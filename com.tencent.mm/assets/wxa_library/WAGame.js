var __wxLibrary={fileName: 'WAGame.js', envType: 'Service', contextType: 'Game:Uncertain', execStart: Date.now()}
;var __WAGameStartTime__ = Date.now();(function(global){;var __libVersionInfo__ = {"updateTime":"2021.11.18 22:36:06","version":"2.21.0","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"lazyCodeLoadingForDevTool":true,"injectAppSeparatedPlugin":true,"nativeTrans":true,"gameLive":true,"supportInvokeWithAppId":true,"expt":["clicfg_appbrand_ios_native_download","clicfg_appbrand_native_download","clicfg_appbrand_ios_native_socket_wcwss","clicfg_appbrand_android_createrequesttaskasync","clicfg_appbrand_android_createdownloadtaskasync","clicfg_navigation_use_scl_alert_v5","clicfg_appbrand_ios_native_readfile","clicfg_appbrand_native_readfile","clicfg_appbrand_ios_game_split_multi_plugincode","clicfg_appbrand_game_split_multi_plugincode","clicfg_appbrand_config_purge_usingcomponents"]}};;var __Function__ = global.Function; var Function = __Function__;var BabelRuntimeHelpers={};(()=>{var e={1964:(e,t,i)=>{"use strict";function r(e,t,i,r,n){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}i.r(t),i.d(t,{default:()=>r})},6470:(e,t,i)=>{"use strict";function r(e,t,i,r,n,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function n(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var o=e.apply(t,i);function s(e){r(o,n,a,s,l,"next",e)}function l(e){r(o,n,a,s,l,"throw",e)}s(void 0)}))}}i.r(t),i.d(t,{default:()=>n})},1217:(e,t,i)=>{"use strict";function r(e,t,i,r){i&&Object.defineProperty(e,t,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(r):void 0})}i.r(t),i.d(t,{default:()=>r})},6647:(e,t,i)=>{"use strict";function r(e,t){throw new Error("Decorating class property failed. Please ensure that proposal-class-properties is enabled and runs after the decorators transform.")}i.r(t),i.d(t,{default:()=>r})},1466:(e,t,i)=>{"use strict";function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,r)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i.r(t),i.d(t,{default:()=>a})},5238:(e,t,i)=>{"use strict";function r(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}i.r(t),i.d(t,{default:()=>r})},929:(e,t,i)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.r(t),i.d(t,{default:()=>r})},5551:(e,t,i)=>{var r={"./applyDecoratedDescriptor":1964,"./asyncToGenerator":6470,"./initializerDefineProperty":1217,"./initializerWarningHelper":6647,"./objectSpread2":1466,"./objectWithoutProperties":5238,"./typeof":929};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id=5551},9401:(e,t,i)=>{var r=i(5551);r.keys().forEach((e=>{BabelRuntimeHelpers[e.substr(2)]=r(e)})),BabelRuntimeHelpers=new Proxy(BabelRuntimeHelpers,{get:(e,t)=>(e[t]||(console.error("尝试读取未定义 BabelRuntimeHelpers.".concat(t,"，请确保 weapp-polyfill 为最新。")),console.error("若确认最新版存在问题，则请尝试在 weapp-polyfill 下执行 node getBabelHelpers")),e[t])})},5482:(e,t,i)=>{"use strict";i.r(t),i(634),i(6882),i(7072),i(4870),i(3108),i(9731),i(9992),i(3430),i(7694),i(3985),i(5388),i(2994),i(9509),i(8836),i(5883),i(1804),i(7890),i(3439),i(1515),i(7368),i(7950),i(103),i(977),i(5734),i(5940),i(5794),i(8827),i(1715),i(1382),i(1982),i(3229),i(4074),i(4696),i(3675),i(6920),i(3161),i(723),i(6618),i(9527),i(315),i(6886),i(4962),i(6481),i(8990),i(884),i(5431),i(5704),["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},305:(e,t,i)=>{var r=i(816),n=i(3718),a=i(6541),o=i(5353),s=a.data,l=a.normalize,u=function(e,t){if(n(e))for(var i=0;i<e.length;i++)s[l(e[i])]=t};e.exports=function(e){"object"==typeof e&&(u(e.useNative,a.NATIVE),u(e.usePolyfill,a.POLYFILL),u(e.useFeatureDetection,null),r(e,"USE_FUNCTION_CONSTRUCTOR")&&(o.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),r(e,"AsyncIteratorPrototype")&&(o.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},3819:e=>{e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},8505:(e,t,i)=>{var r=i(5052);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},9736:(e,t,i)=>{var r=i(95),n=i(2391),a=i(1787),o=r("unscopables"),s=Array.prototype;null==s[o]&&a.f(s,o,{configurable:!0,value:n(null)}),e.exports=function(e){s[o][e]=!0}},6637:(e,t,i)=>{"use strict";var r=i(966).charAt;e.exports=function(e,t,i){return t+(i?r(e,t).length:1)}},7728:e=>{e.exports=function(e,t,i){if(!(e instanceof t))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return e}},1176:(e,t,i)=>{var r=i(5052);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},3339:e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},9918:(e,t,i)=>{"use strict";var r,n=i(3339),a=i(7400),o=i(9859),s=i(5052),l=i(816),u=i(1589),c=i(5762),d=i(7487),h=i(1787).f,p=i(7567),f=i(6540),g=i(95),_=i(1441),m=o.Int8Array,v=m&&m.prototype,y=o.Uint8ClampedArray,A=y&&y.prototype,b=m&&p(m),E=v&&p(v),w=Object.prototype,T=w.isPrototypeOf,C=g("toStringTag"),S=_("TYPED_ARRAY_TAG"),I=n&&!!f&&"Opera"!==u(o.opera),x=!1,P={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},D={BigInt64Array:8,BigUint64Array:8},R=function(e){if(!s(e))return!1;var t=u(e);return l(P,t)||l(D,t)};for(r in P)o[r]||(I=!1);if((!I||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},I))for(r in P)o[r]&&f(o[r],b);if((!I||!E||E===w)&&(E=b.prototype,I))for(r in P)o[r]&&f(o[r].prototype,E);if(I&&p(A)!==E&&f(A,E),a&&!l(E,C))for(r in x=!0,h(E,C,{get:function(){return s(this)?this[S]:void 0}}),P)o[r]&&c(o[r],S,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:I,TYPED_ARRAY_TAG:x&&S,aTypedArray:function(e){if(R(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(f){if(T.call(b,e))return e}else for(var t in P)if(l(P,r)){var i=o[t];if(i&&(e===i||T.call(i,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,i){if(a){if(i)for(var r in P){var n=o[r];if(n&&l(n.prototype,e))try{delete n.prototype[e]}catch(e){}}E[e]&&!i||d(E,e,i?t:I&&v[e]||t)}},exportTypedArrayStaticMethod:function(e,t,i){var r,n;if(a){if(f){if(i)for(r in P)if((n=o[r])&&l(n,e))try{delete n[e]}catch(e){}if(b[e]&&!i)return;try{return d(b,e,i?t:I&&b[e]||t)}catch(e){}}for(r in P)!(n=o[r])||n[e]&&!i||d(n,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||l(P,t)||l(D,t)},isTypedArray:R,TypedArray:b,TypedArrayPrototype:E}},3816:(e,t,i)=>{"use strict";var r=i(9859),n=i(7400),a=i(3339),o=i(5762),s=i(8787),l=i(4229),u=i(7728),c=i(6051),d=i(4237),h=i(7331),p=i(6201),f=i(7567),g=i(6540),_=i(8151).f,m=i(1787).f,v=i(7065),y=i(4555),A=i(6407),b=A.get,E=A.set,w="ArrayBuffer",T="DataView",C="Wrong index",S=r.ArrayBuffer,I=S,x=r.DataView,P=x&&x.prototype,D=Object.prototype,R=r.RangeError,O=p.pack,k=p.unpack,M=function(e){return[255&e]},N=function(e){return[255&e,e>>8&255]},L=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},B=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return O(e,23,4)},U=function(e){return O(e,52,8)},W=function(e,t){m(e.prototype,t,{get:function(){return b(this)[t]}})},G=function(e,t,i,r){var n=h(i),a=b(e);if(n+t>a.byteLength)throw R(C);var o=b(a.buffer).bytes,s=n+a.byteOffset,l=o.slice(s,s+t);return r?l:l.reverse()},V=function(e,t,i,r,n,a){var o=h(i),s=b(e);if(o+t>s.byteLength)throw R(C);for(var l=b(s.buffer).bytes,u=o+s.byteOffset,c=r(+n),d=0;d<t;d++)l[u+d]=c[a?d:t-d-1]};if(a){if(!l((function(){S(1)}))||!l((function(){new S(-1)}))||l((function(){return new S,new S(1.5),new S(NaN),S.name!=w}))){for(var j,H=(I=function(e){return u(this,I),new S(h(e))}).prototype=S.prototype,z=_(S),Y=0;z.length>Y;)(j=z[Y++])in I||o(I,j,S[j]);H.constructor=I}g&&f(P)!==D&&g(P,D);var $=new x(new I(2)),q=P.setInt8;$.setInt8(0,2147483648),$.setInt8(1,2147483649),!$.getInt8(0)&&$.getInt8(1)||s(P,{setInt8:function(e,t){q.call(this,e,t<<24>>24)},setUint8:function(e,t){q.call(this,e,t<<24>>24)}},{unsafe:!0})}else I=function(e){u(this,I,w);var t=h(e);E(this,{bytes:v.call(new Array(t),0),byteLength:t}),n||(this.byteLength=t)},x=function(e,t,i){u(this,x,T),u(e,I,T);var r=b(e).byteLength,a=c(t);if(a<0||a>r)throw R("Wrong offset");if(a+(i=void 0===i?r-a:d(i))>r)throw R("Wrong length");E(this,{buffer:e,byteLength:i,byteOffset:a}),n||(this.buffer=e,this.byteLength=i,this.byteOffset=a)},n&&(W(I,"byteLength"),W(x,"buffer"),W(x,"byteLength"),W(x,"byteOffset")),s(x.prototype,{getInt8:function(e){return G(this,1,e)[0]<<24>>24},getUint8:function(e){return G(this,1,e)[0]},getInt16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=G(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return B(G(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return B(G(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return k(G(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return k(G(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,M,t)},setUint8:function(e,t){V(this,1,e,M,t)},setInt16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,L,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,U,t,arguments.length>2?arguments[2]:void 0)}});y(I,w),y(x,T),e.exports={ArrayBuffer:I,DataView:x}},7065:(e,t,i)=>{"use strict";var r=i(2991),n=i(3231),a=i(4237);e.exports=function(e){for(var t=r(this),i=a(t.length),o=arguments.length,s=n(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,u=void 0===l?i:n(l,i);u>s;)t[s++]=e;return t}},9540:(e,t,i)=>{var r=i(905),n=i(4237),a=i(3231),o=function(e){return function(t,i,o){var s,l=r(t),u=n(l.length),c=a(o,u);if(e&&i!=i){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===i)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},9996:(e,t,i)=>{var r=i(7636),n=i(9337),a=i(2991),o=i(4237),s=i(7501),l=[].push,u=function(e){var t=1==e,i=2==e,u=3==e,c=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,_,m){for(var v,y,A=a(f),b=n(A),E=r(g,_,3),w=o(b.length),T=0,C=m||s,S=t?C(f,w):i||h?C(f,0):void 0;w>T;T++)if((p||T in b)&&(y=E(v=b[T],T,A),e))if(t)S[T]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:l.call(S,v)}else switch(e){case 4:return!1;case 7:l.call(S,v)}return d?-1:u||c?c:S}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},6038:(e,t,i)=>{"use strict";var r=i(4229);e.exports=function(e,t){var i=[][e];return!!i&&r((function(){i.call(null,t||function(){throw 1},1)}))}},3143:(e,t,i)=>{var r=i(3819),n=i(2991),a=i(9337),o=i(4237),s=function(e){return function(t,i,s,l){r(i);var u=n(t),c=a(u),d=o(u.length),h=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(h in c){l=c[h],h+=p;break}if(h+=p,e?h<0:d<=h)throw TypeError("Reduce of empty array with no initial value")}for(;e?h>=0:d>h;h+=p)h in c&&(l=i(l,c[h],h,u));return l}};e.exports={left:s(!1),right:s(!0)}},3867:e=>{var t=Math.floor,i=function(e,a){var o=e.length,s=t(o/2);return o<8?r(e,a):n(i(e.slice(0,s),a),i(e.slice(s),a),a)},r=function(e,t){for(var i,r,n=e.length,a=1;a<n;){for(r=a,i=e[a];r&&t(e[r-1],i)>0;)e[r]=e[--r];r!==a++&&(e[r]=i)}return e},n=function(e,t,i){for(var r=e.length,n=t.length,a=0,o=0,s=[];a<r||o<n;)a<r&&o<n?s.push(i(e[a],t[o])<=0?e[a++]:t[o++]):s.push(a<r?e[a++]:t[o++]);return s};e.exports=i},7501:(e,t,i)=>{var r=i(5052),n=i(3718),a=i(95)("species");e.exports=function(e,t){var i;return n(e)&&("function"!=typeof(i=e.constructor)||i!==Array&&!n(i.prototype)?r(i)&&null===(i=i[a])&&(i=void 0):i=void 0),new(void 0===i?Array:i)(0===t?0:t)}},4575:(e,t,i)=>{var r=i(95)("iterator"),n=!1;try{var a=0,o={next:function(){return{done:!!a++}},return:function(){n=!0}};o[r]=function(){return this},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!n)return!1;var i=!1;try{var a={};a[r]=function(){return{next:function(){return{done:i=!0}}}},e(a)}catch(e){}return i}},7079:e=>{var t={}.toString;e.exports=function(e){return t.call(e).slice(8,-1)}},1589:(e,t,i)=>{var r=i(1601),n=i(7079),a=i(95)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=r?n:function(e){var t,i,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?i:o?n(t):"Object"==(r=n(t))&&"function"==typeof t.callee?"Arguments":r}},7081:(e,t,i)=>{var r=i(816),n=i(4826),a=i(7933),o=i(1787);e.exports=function(e,t){for(var i=n(t),s=o.f,l=a.f,u=0;u<i.length;u++){var c=i[u];r(e,c)||s(e,c,l(t,c))}}},7528:(e,t,i)=>{var r=i(4229);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3723:(e,t,i)=>{"use strict";var r=i(693).IteratorPrototype,n=i(2391),a=i(5358),o=i(4555),s=i(5495),l=function(){return this};e.exports=function(e,t,i){var u=t+" Iterator";return e.prototype=n(r,{next:a(1,i)}),o(e,u,!1,!0),s[u]=l,e}},5762:(e,t,i)=>{var r=i(7400),n=i(1787),a=i(5358);e.exports=r?function(e,t,i){return n.f(e,t,a(1,i))}:function(e,t,i){return e[t]=i,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,i)=>{"use strict";var r=i(2066),n=i(1787),a=i(5358);e.exports=function(e,t,i){var o=r(t);o in e?n.f(e,o,a(0,i)):e[o]=i}},7675:(e,t,i)=>{"use strict";var r=i(3103),n=i(3723),a=i(7567),o=i(6540),s=i(4555),l=i(5762),u=i(7487),c=i(95),d=i(4231),h=i(5495),p=i(693),f=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,_=c("iterator"),m="keys",v="values",y="entries",A=function(){return this};e.exports=function(e,t,i,c,p,b,E){n(i,t,c);var w,T,C,S=function(e){if(e===p&&R)return R;if(!g&&e in P)return P[e];switch(e){case m:case v:case y:return function(){return new i(this,e)}}return function(){return new i(this)}},I=t+" Iterator",x=!1,P=e.prototype,D=P[_]||P["@@iterator"]||p&&P[p],R=!g&&D||S(p),O="Array"==t&&P.entries||D;if(O&&(w=a(O.call(new e)),f!==Object.prototype&&w.next&&(d||a(w)===f||(o?o(w,f):"function"!=typeof w[_]&&l(w,_,A)),s(w,I,!0,!0),d&&(h[I]=A))),p==v&&D&&D.name!==v&&(x=!0,R=function(){return D.call(this)}),d&&!E||P[_]===R||l(P,_,R),h[t]=R,p)if(T={values:S(v),keys:b?R:S(m),entries:S(y)},E)for(C in T)(g||x||!(C in P))&&u(P,C,T[C]);else r({target:t,proto:!0,forced:g||x},T);return T}},8423:(e,t,i)=>{var r=i(9276),n=i(816),a=i(5391),o=i(1787).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});n(t,e)||o(t,e,{value:a.f(e)})}},7400:(e,t,i)=>{var r=i(4229);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},2635:(e,t,i)=>{var r=i(9859),n=i(5052),a=r.document,o=n(a)&&n(a.createElement);e.exports=function(e){return o?a.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},2671:(e,t,i)=>{var r=i(598).match(/firefox\/(\d+)/i);e.exports=!!r&&+r[1]},8639:e=>{e.exports="object"==typeof window},8506:(e,t,i)=>{var r=i(598);e.exports=/MSIE|Trident/.test(r)},2023:(e,t,i)=>{var r=i(598);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},8801:(e,t,i)=>{var r=i(7079),n=i(9859);e.exports="process"==r(n.process)},263:(e,t,i)=>{var r=i(598);e.exports=/web0s(?!.*chrome)/i.test(r)},598:(e,t,i)=>{var r=i(1333);e.exports=r("navigator","userAgent")||""},6358:(e,t,i)=>{var r,n,a=i(9859),o=i(598),s=a.process,l=s&&s.versions,u=l&&l.v8;u?n=(r=u.split("."))[0]<4?1:r[0]+r[1]:o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(n=r[1]),e.exports=n&&+n},9811:(e,t,i)=>{var r=i(598).match(/AppleWebKit\/(\d+)\./);e.exports=!!r&&+r[1]},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,i)=>{var r=i(9859),n=i(7933).f,a=i(5762),o=i(7487),s=i(2079),l=i(7081),u=i(6541);e.exports=function(e,t){var i,c,d,h,p,f=e.target,g=e.global,_=e.stat;if(i=g?r:_?r[f]||s(f,{}):(r[f]||{}).prototype)for(c in t){if(h=t[c],d=e.noTargetGet?(p=n(i,c))&&p.value:i[c],!u(g?c:f+(_?".":"#")+c,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&a(h,"sham",!0),o(i,c,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,i)=>{"use strict";i(7950);var r=i(7487),n=i(3466),a=i(4229),o=i(95),s=i(5762),l=o("species"),u=RegExp.prototype;e.exports=function(e,t,i,c){var d=o(e),h=!a((function(){var t={};return t[d]=function(){return 7},7!=""[e](t)})),p=h&&!a((function(){var t=!1,i=/a/;return"split"===e&&((i={}).constructor={},i.constructor[l]=function(){return i},i.flags="",i[d]=/./[d]),i.exec=function(){return t=!0,null},i[d](""),!t}));if(!h||!p||i){var f=/./[d],g=t(d,""[e],(function(e,t,i,r,a){var o=t.exec;return o===n||o===u.exec?h&&!a?{done:!0,value:f.call(t,i,r)}:{done:!0,value:e.call(i,t,r)}:{done:!1}}));r(String.prototype,e,g[0]),r(u,d,g[1])}c&&s(u[d],"sham",!0)}},4990:(e,t,i)=>{"use strict";var r=i(3718),n=i(4237),a=i(7636),o=function(e,t,i,s,l,u,c,d){for(var h,p=l,f=0,g=!!c&&a(c,d,3);f<s;){if(f in i){if(h=g?g(i[f],f,t):i[f],u>0&&r(h))p=o(e,t,h,n(h.length),p,u-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=h}p++}f++}return p};e.exports=o},7636:(e,t,i)=>{var r=i(3819);e.exports=function(e,t,i){if(r(e),void 0===t)return e;switch(i){case 0:return function(){return e.call(t)};case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,n){return e.call(t,i,r,n)}}return function(){return e.apply(t,arguments)}}},1333:(e,t,i)=>{var r=i(9276),n=i(9859),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(r[e])||a(n[e]):r[e]&&r[e][t]||n[e]&&n[e][t]}},8830:(e,t,i)=>{var r=i(1589),n=i(5495),a=i(95)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||n[r(e)]}},17:(e,t,i)=>{var r=i(2991),n=Math.floor,a="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,i,l,u,c){var d=i+e.length,h=l.length,p=s;return void 0!==u&&(u=r(u),p=o),a.call(c,p,(function(r,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,i);case"'":return t.slice(d);case"<":o=u[a.slice(1,-1)];break;default:var s=+a;if(0===s)return r;if(s>h){var c=n(s/10);return 0===c?r:c<=h?void 0===l[c-1]?a.charAt(1):l[c-1]+a.charAt(1):r}o=l[s-1]}return void 0===o?"":o}))}},9859:(e,t,i)=>{var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof i.g&&i.g)||function(){return this}()||Function("return this")()},816:(e,t,i)=>{var r=i(2991),n={}.hasOwnProperty;e.exports=Object.hasOwn||function(e,t){return n.call(r(e),t)}},5977:e=>{e.exports={}},4665:(e,t,i)=>{var r=i(9859);e.exports=function(e,t){var i=r.console;i&&i.error&&(1===arguments.length?i.error(e):i.error(e,t))}},3777:(e,t,i)=>{var r=i(1333);e.exports=r("document","documentElement")},4394:(e,t,i)=>{var r=i(7400),n=i(4229),a=i(2635);e.exports=!r&&!n((function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a}))},6201:e=>{var t=Math.abs,i=Math.pow,r=Math.floor,n=Math.log,a=Math.LN2;e.exports={pack:function(e,o,s){var l,u,c,d=new Array(s),h=8*s-o-1,p=(1<<h)-1,f=p>>1,g=23===o?i(2,-24)-i(2,-77):0,_=e<0||0===e&&1/e<0?1:0,m=0;for((e=t(e))!=e||e===1/0?(u=e!=e?1:0,l=p):(l=r(n(e)/a),e*(c=i(2,-l))<1&&(l--,c*=2),(e+=l+f>=1?g/c:g*i(2,1-f))*c>=2&&(l++,c/=2),l+f>=p?(u=0,l=p):l+f>=1?(u=(e*c-1)*i(2,o),l+=f):(u=e*i(2,f-1)*i(2,o),l=0));o>=8;d[m++]=255&u,u/=256,o-=8);for(l=l<<o|u,h+=o;h>0;d[m++]=255&l,l/=256,h-=8);return d[--m]|=128*_,d},unpack:function(e,t){var r,n=e.length,a=8*n-t-1,o=(1<<a)-1,s=o>>1,l=a-7,u=n-1,c=e[u--],d=127&c;for(c>>=7;l>0;d=256*d+e[u],u--,l-=8);for(r=d&(1<<-l)-1,d>>=-l,l+=t;l>0;r=256*r+e[u],u--,l-=8);if(0===d)d=1-s;else{if(d===o)return r?NaN:c?-1/0:1/0;r+=i(2,t),d-=s}return(c?-1:1)*r*i(2,d-t)}}},9337:(e,t,i)=>{var r=i(4229),n=i(7079),a="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==n(e)?a.call(e,""):Object(e)}:Object},835:(e,t,i)=>{var r=i(5052),n=i(6540);e.exports=function(e,t,i){var a,o;return n&&"function"==typeof(a=t.constructor)&&a!==i&&r(o=a.prototype)&&o!==i.prototype&&n(e,o),e}},8511:(e,t,i)=>{var r=i(5353),n=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return n.call(e)}),e.exports=r.inspectSource},6407:(e,t,i)=>{var r,n,a,o=i(8694),s=i(9859),l=i(5052),u=i(5762),c=i(816),d=i(5353),h=i(4399),p=i(5977),f="Object already initialized",g=s.WeakMap;if(o||d.state){var _=d.state||(d.state=new g),m=_.get,v=_.has,y=_.set;r=function(e,t){if(v.call(_,e))throw new TypeError(f);return t.facade=e,y.call(_,e,t),t},n=function(e){return m.call(_,e)||{}},a=function(e){return v.call(_,e)}}else{var A=h("state");p[A]=!0,r=function(e,t){if(c(e,A))throw new TypeError(f);return t.facade=e,u(e,A,t),t},n=function(e){return c(e,A)?e[A]:{}},a=function(e){return c(e,A)}}e.exports={set:r,get:n,has:a,enforce:function(e){return a(e)?n(e):r(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=n(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return i}}}},1943:(e,t,i)=>{var r=i(95),n=i(5495),a=r("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},3718:(e,t,i)=>{var r=i(7079);e.exports=Array.isArray||function(e){return"Array"==r(e)}},6541:(e,t,i)=>{var r=i(4229),n=/#|\.prototype\./,a=function(e,t){var i=s[o(e)];return i==u||i!=l&&("function"==typeof t?r(t):!!t)},o=a.normalize=function(e){return String(e).replace(n,".").toLowerCase()},s=a.data={},l=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},5052:e=>{e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},4231:e=>{e.exports=!1},8311:(e,t,i)=>{var r=i(5052),n=i(7079),a=i(95)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==n(e))}},9003:(e,t,i)=>{var r=i(1176),n=i(1943),a=i(4237),o=i(7636),s=i(8830),l=i(7281),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,i){var c,d,h,p,f,g,_,m=i&&i.that,v=!(!i||!i.AS_ENTRIES),y=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),b=o(t,m,1+v+A),E=function(e){return c&&l(c),new u(!0,e)},w=function(e){return v?(r(e),A?b(e[0],e[1],E):b(e[0],e[1])):A?b(e,E):b(e)};if(y)c=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(n(d)){for(h=0,p=a(e.length);p>h;h++)if((f=w(e[h]))&&f instanceof u)return f;return new u(!1)}c=d.call(e)}for(g=c.next;!(_=g.call(c)).done;){try{f=w(_.value)}catch(e){throw l(c),e}if("object"==typeof f&&f&&f instanceof u)return f}return new u(!1)}},7281:(e,t,i)=>{var r=i(1176);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},693:(e,t,i)=>{"use strict";var r,n,a,o=i(4229),s=i(7567),l=i(5762),u=i(816),c=i(95),d=i(4231),h=c("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(n=s(s(a)))!==Object.prototype&&(r=n):p=!0);var f=null==r||o((function(){var e={};return r[h].call(e)!==e}));f&&(r={}),d&&!f||u(r,h)||l(r,h,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},5495:e=>{e.exports={}},4794:(e,t,i)=>{var r,n,a,o,s,l,u,c,d=i(9859),h=i(7933).f,p=i(5795).set,f=i(2023),g=i(263),_=i(8801),m=d.MutationObserver||d.WebKitMutationObserver,v=d.document,y=d.process,A=d.Promise,b=h(d,"queueMicrotask"),E=b&&b.value;E||(r=function(){var e,t;for(_&&(e=y.domain)&&e.exit();n;){t=n.fn,n=n.next;try{t()}catch(e){throw n?o():a=void 0,e}}a=void 0,e&&e.enter()},f||_||g||!m||!v?A&&A.resolve?((u=A.resolve(void 0)).constructor=A,c=u.then,o=function(){c.call(u,r)}):o=_?function(){y.nextTick(r)}:function(){p.call(d,r)}:(s=!0,l=v.createTextNode(""),new m(r).observe(l,{characterData:!0}),o=function(){l.data=s=!s})),e.exports=E||function(e){var t={fn:e,next:void 0};a&&(a.next=t),n||(n=t,o()),a=t}},4226:(e,t,i)=>{var r=i(9859);e.exports=r.Promise},3839:(e,t,i)=>{var r=i(6358),n=i(4229);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},8694:(e,t,i)=>{var r=i(9859),n=i(8511),a=r.WeakMap;e.exports="function"==typeof a&&/native code/.test(n(a))},6485:(e,t,i)=>{"use strict";var r=i(3819),n=function(e){var t,i;this.promise=new e((function(e,r){if(void 0!==t||void 0!==i)throw TypeError("Bad Promise constructor");t=e,i=r})),this.resolve=r(t),this.reject=r(i)};e.exports.f=function(e){return new n(e)}},5496:(e,t,i)=>{var r=i(9859),n=i(1017).trim,a=i(1647),o=r.parseFloat,s=1/o(a+"-0")!=-1/0;e.exports=s?function(e){var t=n(String(e)),i=o(t);return 0===i&&"-"==t.charAt(0)?-0:i}:o},2391:(e,t,i)=>{var r,n=i(1176),a=i(219),o=i(3837),s=i(5977),l=i(3777),u=i(2635),c=i(4399)("IE_PROTO"),d=function(){},h=function(e){return"<script>"+e+"<\/script>"},p=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;p=r?function(e){e.write(h("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(h("document.F=Object")),e.close(),e.F);for(var i=o.length;i--;)delete p.prototype[o[i]];return p()};s[c]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(d.prototype=n(e),i=new d,d.prototype=null,i[c]=e):i=p(),void 0===t?i:a(i,t)}},219:(e,t,i)=>{var r=i(7400),n=i(1787),a=i(1176),o=i(5632);e.exports=r?Object.defineProperties:function(e,t){a(e);for(var i,r=o(t),s=r.length,l=0;s>l;)n.f(e,i=r[l++],t[i]);return e}},1787:(e,t,i)=>{var r=i(7400),n=i(4394),a=i(1176),o=i(2066),s=Object.defineProperty;t.f=r?s:function(e,t,i){if(a(e),t=o(t,!0),a(i),n)try{return s(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},7933:(e,t,i)=>{var r=i(7400),n=i(9195),a=i(5358),o=i(905),s=i(2066),l=i(816),u=i(4394),c=Object.getOwnPropertyDescriptor;t.f=r?c:function(e,t){if(e=o(e),t=s(t,!0),u)try{return c(e,t)}catch(e){}if(l(e,t))return a(!n.f.call(e,t),e[t])}},8151:(e,t,i)=>{var r=i(140),n=i(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,n)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,i)=>{var r=i(816),n=i(2991),a=i(4399),o=i(7528),s=a("IE_PROTO"),l=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=n(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?l:null}},140:(e,t,i)=>{var r=i(816),n=i(905),a=i(9540).indexOf,o=i(5977);e.exports=function(e,t){var i,s=n(e),l=0,u=[];for(i in s)!r(o,i)&&r(s,i)&&u.push(i);for(;t.length>l;)r(s,i=t[l++])&&(~a(u,i)||u.push(i));return u}},5632:(e,t,i)=>{var r=i(140),n=i(3837);e.exports=Object.keys||function(e){return r(e,n)}},9195:(e,t)=>{"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,n=r&&!i.call({1:2},1);t.f=n?function(e){var t=r(this,e);return!!t&&t.enumerable}:i},6540:(e,t,i)=>{var r=i(1176),n=i(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(i,[]),t=i instanceof Array}catch(e){}return function(i,a){return r(i),n(a),t?e.call(i,a):i.__proto__=a,i}}():void 0)},7664:(e,t,i)=>{var r=i(7400),n=i(5632),a=i(905),o=i(9195).f,s=function(e){return function(t){for(var i,s=a(t),l=n(s),u=l.length,c=0,d=[];u>c;)i=l[c++],r&&!o.call(s,i)||d.push(e?[i,s[i]]:s[i]);return d}};e.exports={entries:s(!0),values:s(!1)}},4826:(e,t,i)=>{var r=i(1333),n=i(8151),a=i(894),o=i(1176);e.exports=r("Reflect","ownKeys")||function(e){var t=n.f(o(e)),i=a.f;return i?t.concat(i(e)):t}},9276:(e,t,i)=>{var r=i(9859);e.exports=r},4624:e=>{e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},7757:(e,t,i)=>{var r=i(1176),n=i(5052),a=i(6485);e.exports=function(e,t){if(r(e),n(t)&&t.constructor===e)return t;var i=a.f(e);return(0,i.resolve)(t),i.promise}},8787:(e,t,i)=>{var r=i(7487);e.exports=function(e,t,i){for(var n in t)r(e,n,t[n],i);return e}},7487:(e,t,i)=>{var r=i(9859),n=i(5762),a=i(816),o=i(2079),s=i(8511),l=i(6407),u=l.get,c=l.enforce,d=String(String).split("String");(e.exports=function(e,t,i,s){var l,u=!!s&&!!s.unsafe,h=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof i&&("string"!=typeof t||a(i,"name")||n(i,"name",t),(l=c(i)).source||(l.source=d.join("string"==typeof t?t:""))),e!==r?(u?!p&&e[t]&&(h=!0):delete e[t],h?e[t]=i:n(e,t,i)):h?e[t]=i:o(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},8115:(e,t,i)=>{var r=i(7079),n=i(3466);e.exports=function(e,t){var i=e.exec;if("function"==typeof i){var a=i.call(e,t);if("object"!=typeof a)throw TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},3466:(e,t,i)=>{"use strict";var r,n,a=i(895),o=i(5650),s=i(3036),l=i(2391),u=i(6407).get,c=i(2926),d=i(461),h=RegExp.prototype.exec,p=s("native-string-replace",String.prototype.replace),f=h,g=(r=/a/,n=/b*/g,h.call(r,"a"),h.call(n,"a"),0!==r.lastIndex||0!==n.lastIndex),_=o.UNSUPPORTED_Y||o.BROKEN_CARET,m=void 0!==/()??/.exec("")[1];(g||m||_||c||d)&&(f=function(e){var t,i,r,n,o,s,c,d=this,v=u(d),y=v.raw;if(y)return y.lastIndex=d.lastIndex,t=f.call(y,e),d.lastIndex=y.lastIndex,t;var A=v.groups,b=_&&d.sticky,E=a.call(d),w=d.source,T=0,C=e;if(b&&(-1===(E=E.replace("y","")).indexOf("g")&&(E+="g"),C=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(w="(?: "+w+")",C=" "+C,T++),i=new RegExp("^(?:"+w+")",E)),m&&(i=new RegExp("^"+w+"$(?!\\s)",E)),g&&(r=d.lastIndex),n=h.call(b?i:d,C),b?n?(n.input=n.input.slice(T),n[0]=n[0].slice(T),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:g&&n&&(d.lastIndex=d.global?n.index+n[0].length:r),m&&n&&n.length>1&&p.call(n[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n&&A)for(n.groups=s=l(null),o=0;o<A.length;o++)s[(c=A[o])[0]]=n[c[1]];return n}),e.exports=f},895:(e,t,i)=>{"use strict";var r=i(1176);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},5650:(e,t,i)=>{var r=i(4229),n=function(e,t){return RegExp(e,t)};t.UNSUPPORTED_Y=r((function(){var e=n("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=n("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},2926:(e,t,i)=>{var r=i(4229);e.exports=r((function(){var e=RegExp(".","string".charAt(0));return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},461:(e,t,i)=>{var r=i(4229);e.exports=r((function(){var e=RegExp("(?<a>b)","string".charAt(5));return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:e=>{e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},2079:(e,t,i)=>{var r=i(9859),n=i(5762);e.exports=function(e,t){try{n(r,e,t)}catch(i){r[e]=t}return t}},1832:(e,t,i)=>{"use strict";var r=i(1333),n=i(1787),a=i(95),o=i(7400),s=a("species");e.exports=function(e){var t=r(e),i=n.f;o&&t&&!t[s]&&i(t,s,{configurable:!0,get:function(){return this}})}},4555:(e,t,i)=>{var r=i(1787).f,n=i(816),a=i(95)("toStringTag");e.exports=function(e,t,i){e&&!n(e=i?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},4399:(e,t,i)=>{var r=i(3036),n=i(1441),a=r("keys");e.exports=function(e){return a[e]||(a[e]=n(e))}},5353:(e,t,i)=>{var r=i(9859),n=i(2079),a="__core-js_shared__",o=r[a]||n(a,{});e.exports=o},3036:(e,t,i)=>{var r=i(4231),n=i(5353);(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.15.1",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},7942:(e,t,i)=>{var r=i(1176),n=i(3819),a=i(95)("species");e.exports=function(e,t){var i,o=r(e).constructor;return void 0===o||null==(i=r(o)[a])?t:n(i)}},966:(e,t,i)=>{var r=i(6051),n=i(8885),a=function(e){return function(t,i){var a,o,s=String(n(t)),l=r(i),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l))<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536}};e.exports={codeAt:a(!1),charAt:a(!0)}},7456:(e,t,i)=>{var r=i(598);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},6650:(e,t,i)=>{var r=i(4237),n=i(3124),a=i(8885),o=Math.ceil,s=function(e){return function(t,i,s){var l,u,c=String(a(t)),d=c.length,h=void 0===s?" ":String(s),p=r(i);return p<=d||""==h?c:(l=p-d,(u=n.call(h,o(l/h.length))).length>l&&(u=u.slice(0,l)),e?c+u:u+c)}};e.exports={start:s(!1),end:s(!0)}},3124:(e,t,i)=>{"use strict";var r=i(6051),n=i(8885);e.exports=function(e){var t=String(n(this)),i="",a=r(e);if(a<0||a==1/0)throw RangeError("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(i+=t);return i}},9445:(e,t,i)=>{var r=i(4229),n=i(1647);e.exports=function(e){return r((function(){return!!n[e]()||"​᠎"!="​᠎"[e]()||n[e].name!==e}))}},1017:(e,t,i)=>{var r=i(8885),n="["+i(1647)+"]",a=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),s=function(e){return function(t){var i=String(r(t));return 1&e&&(i=i.replace(a,"")),2&e&&(i=i.replace(o,"")),i}};e.exports={start:s(1),end:s(2),trim:s(3)}},5795:(e,t,i)=>{var r,n,a,o=i(9859),s=i(4229),l=i(7636),u=i(3777),c=i(2635),d=i(2023),h=i(8801),p=o.location,f=o.setImmediate,g=o.clearImmediate,_=o.process,m=o.MessageChannel,v=o.Dispatch,y=0,A={},b=function(e){if(A.hasOwnProperty(e)){var t=A[e];delete A[e],t()}},E=function(e){return function(){b(e)}},w=function(e){b(e.data)},T=function(e){o.postMessage(e+"",p.protocol+"//"+p.host)};f&&g||(f=function(e){for(var t=[],i=1;arguments.length>i;)t.push(arguments[i++]);return A[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(y),y},g=function(e){delete A[e]},h?r=function(e){_.nextTick(E(e))}:v&&v.now?r=function(e){v.now(E(e))}:m&&!d?(a=(n=new m).port2,n.port1.onmessage=w,r=l(a.postMessage,a,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&p&&"file:"!==p.protocol&&!s(T)?(r=T,o.addEventListener("message",w,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:f,clear:g}},3231:(e,t,i)=>{var r=i(6051),n=Math.max,a=Math.min;e.exports=function(e,t){var i=r(e);return i<0?n(i+t,0):a(i,t)}},7331:(e,t,i)=>{var r=i(6051),n=i(4237);e.exports=function(e){if(void 0===e)return 0;var t=r(e),i=n(t);if(t!==i)throw RangeError("Wrong length or index");return i}},905:(e,t,i)=>{var r=i(9337),n=i(8885);e.exports=function(e){return r(n(e))}},6051:e=>{var t=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:t)(e)}},4237:(e,t,i)=>{var r=i(6051),n=Math.min;e.exports=function(e){return e>0?n(r(e),9007199254740991):0}},2991:(e,t,i)=>{var r=i(8885);e.exports=function(e){return Object(r(e))}},4262:(e,t,i)=>{var r=i(2002);e.exports=function(e,t){var i=r(e);if(i%t)throw RangeError("Wrong offset");return i}},2002:(e,t,i)=>{var r=i(6051);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},2066:(e,t,i)=>{var r=i(5052);e.exports=function(e,t){if(!r(e))return e;var i,n;if(t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;if("function"==typeof(i=e.valueOf)&&!r(n=i.call(e)))return n;if(!t&&"function"==typeof(i=e.toString)&&!r(n=i.call(e)))return n;throw TypeError("Can't convert object to primitive value")}},1601:(e,t,i)=>{var r={};r[i(95)("toStringTag")]="z",e.exports="[object z]"===String(r)},2574:(e,t,i)=>{"use strict";var r=i(3103),n=i(9859),a=i(7400),o=i(8200),s=i(9918),l=i(3816),u=i(7728),c=i(5358),d=i(5762),h=i(4237),p=i(7331),f=i(4262),g=i(2066),_=i(816),m=i(1589),v=i(5052),y=i(2391),A=i(6540),b=i(8151).f,E=i(5215),w=i(9996).forEach,T=i(1832),C=i(1787),S=i(7933),I=i(6407),x=i(835),P=I.get,D=I.set,R=C.f,O=S.f,k=Math.round,M=n.RangeError,N=l.ArrayBuffer,L=l.DataView,B=s.NATIVE_ARRAY_BUFFER_VIEWS,F=s.TYPED_ARRAY_TAG,U=s.TypedArray,W=s.TypedArrayPrototype,G=s.aTypedArrayConstructor,V=s.isTypedArray,j="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var i=0,r=t.length,n=new(G(e))(r);r>i;)n[i]=t[i++];return n},Y=function(e,t){R(e,t,{get:function(){return P(this)[t]}})},$=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=m(e))||"SharedArrayBuffer"==t},q=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Q=function(e,t){return q(e,t=g(t,!0))?c(2,e[t]):O(e,t)},Z=function(e,t,i){return!(q(e,t=g(t,!0))&&v(i)&&_(i,"value"))||_(i,"get")||_(i,"set")||i.configurable||_(i,"writable")&&!i.writable||_(i,"enumerable")&&!i.enumerable?R(e,t,i):(e[t]=i.value,e)};a?(B||(S.f=Q,C.f=Z,Y(W,"buffer"),Y(W,"byteOffset"),Y(W,"byteLength"),Y(W,"length")),r({target:"Object",stat:!0,forced:!B},{getOwnPropertyDescriptor:Q,defineProperty:Z}),e.exports=function(e,t,i){var a=e.match(/\d+$/)[0]/8,s=e+(i?"Clamped":"")+"Array",l="get"+e,c="set"+e,g=n[s],_=g,m=_&&_.prototype,C={},S=function(e,t){R(e,t,{get:function(){return function(e,t){var i=P(e);return i.view[l](t*a+i.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var n=P(e);i&&(r=(r=k(r))<0?0:r>255?255:255&r),n.view[c](t*a+n.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};B?o&&(_=t((function(e,t,i,r){return u(e,_,s),x(v(t)?$(t)?void 0!==r?new g(t,f(i,a),r):void 0!==i?new g(t,f(i,a)):new g(t):V(t)?z(_,t):E.call(_,t):new g(p(t)),e,_)})),A&&A(_,U),w(b(g),(function(e){e in _||d(_,e,g[e])})),_.prototype=m):(_=t((function(e,t,i,r){u(e,_,s);var n,o,l,c=0,d=0;if(v(t)){if(!$(t))return V(t)?z(_,t):E.call(_,t);n=t,d=f(i,a);var g=t.byteLength;if(void 0===r){if(g%a)throw M(H);if((o=g-d)<0)throw M(H)}else if((o=h(r)*a)+d>g)throw M(H);l=o/a}else l=p(t),n=new N(o=l*a);for(D(e,{buffer:n,byteOffset:d,byteLength:o,length:l,view:new L(n)});c<l;)S(e,c++)})),A&&A(_,U),m=_.prototype=y(W)),m.constructor!==_&&d(m,"constructor",_),F&&d(m,F,s),C[s]=_,r({global:!0,forced:_!=g,sham:!B},C),j in _||d(_,j,a),j in m||d(m,j,a),T(s)}):e.exports=function(){}},8200:(e,t,i)=>{var r=i(9859),n=i(4229),a=i(4575),o=i(9918).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,l=r.Int8Array;e.exports=!o||!n((function(){l(1)}))||!n((function(){new l(-1)}))||!a((function(e){new l,new l(null),new l(1.5),new l(e)}),!0)||n((function(){return 1!==new l(new s(2),1,void 0).length}))},5215:(e,t,i)=>{var r=i(2991),n=i(4237),a=i(8830),o=i(1943),s=i(7636),l=i(9918).aTypedArrayConstructor;e.exports=function(e){var t,i,u,c,d,h,p=r(e),f=arguments.length,g=f>1?arguments[1]:void 0,_=void 0!==g,m=a(p);if(null!=m&&!o(m))for(h=(d=m.call(p)).next,p=[];!(c=h.call(d)).done;)p.push(c.value);for(_&&f>2&&(g=s(g,arguments[2],2)),i=n(p.length),u=new(l(this))(i),t=0;i>t;t++)u[t]=_?g(p[t],t):p[t];return u}},1441:e=>{var t=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++t+i).toString(36)}},6969:(e,t,i)=>{var r=i(3839);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},5391:(e,t,i)=>{var r=i(95);t.f=r},95:(e,t,i)=>{var r=i(9859),n=i(3036),a=i(816),o=i(1441),s=i(3839),l=i(6969),u=n("wks"),c=r.Symbol,d=l?c:c&&c.withoutSetter||o;e.exports=function(e){return a(u,e)&&(s||"string"==typeof u[e])||(s&&a(c,e)?u[e]=c[e]:u[e]=d("Symbol."+e)),u[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},5738:(e,t,i)=>{"use strict";var r=i(3103),n=i(7567),a=i(6540),o=i(2391),s=i(5762),l=i(5358),u=i(9003),c=function(e,t){var i=this;if(!(i instanceof c))return new c(e,t);a&&(i=a(new Error(void 0),n(i))),void 0!==t&&s(i,"message",String(t));var r=[];return u(e,r.push,{that:r}),s(i,"errors",r),i};c.prototype=o(Error.prototype,{constructor:l(5,c),message:l(5,""),name:l(5,"AggregateError")}),r({global:!0},{AggregateError:c})},5388:(e,t,i)=>{"use strict";var r=i(3103),n=i(9859),a=i(3816),o=i(1832),s=a.ArrayBuffer;r({global:!0,forced:n.ArrayBuffer!==s},{ArrayBuffer:s}),o("ArrayBuffer")},2994:(e,t,i)=>{"use strict";var r=i(3103),n=i(4229),a=i(3816),o=i(1176),s=i(3231),l=i(4237),u=i(7942),c=a.ArrayBuffer,d=a.DataView,h=c.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:n((function(){return!new c(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==h&&void 0===t)return h.call(o(this),e);for(var i=o(this).byteLength,r=s(e,i),n=s(void 0===t?i:t,i),a=new(u(this,c))(l(n-r)),p=new d(this),f=new d(a),g=0;r<n;)f.setUint8(g++,p.getUint8(r++));return a}})},4870:(e,t,i)=>{"use strict";var r=i(3103),n=i(4990),a=i(2991),o=i(4237),s=i(3819),l=i(7501);r({target:"Array",proto:!0},{flatMap:function(e){var t,i=a(this),r=o(i.length);return s(e),(t=l(i,0)).length=n(t,i,i,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},7072:(e,t,i)=>{"use strict";var r=i(3103),n=i(4990),a=i(2991),o=i(4237),s=i(6051),l=i(7501);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=a(this),i=o(t.length),r=l(t,0);return r.length=n(r,t,t,i,0,void 0===e?1:s(e)),r}})},5735:(e,t,i)=>{"use strict";var r=i(905),n=i(9736),a=i(5495),o=i(6407),s=i(7675),l="Array Iterator",u=o.set,c=o.getterFor(l);e.exports=s(Array,"Array",(function(e,t){u(this,{type:l,target:r(e),index:0,kind:t})}),(function(){var e=c(this),t=e.target,i=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:r,done:!1}:"values"==i?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},9731:(e,t,i)=>{"use strict";var r=i(3103),n=i(3143).right,a=i(6038),o=i(6358),s=i(8801);r({target:"Array",proto:!0,forced:!a("reduceRight")||!s&&o>79&&o<83},{reduceRight:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},3108:(e,t,i)=>{"use strict";var r=i(3103),n=i(3143).left,a=i(6038),o=i(6358),s=i(8801);r({target:"Array",proto:!0,forced:!a("reduce")||!s&&o>79&&o<83},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},9992:(e,t,i)=>{"use strict";var r=i(3103),n=i(3718),a=[].reverse,o=[1,2];r({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return n(this)&&(this.length=this.length),a.call(this)}})},3430:(e,t,i)=>{"use strict";var r=i(3103),n=i(3819),a=i(2991),o=i(4237),s=i(4229),l=i(3867),u=i(6038),c=i(2671),d=i(8506),h=i(6358),p=i(9811),f=[],g=f.sort,_=s((function(){f.sort(void 0)})),m=s((function(){f.sort(null)})),v=u("sort"),y=!s((function(){if(h)return h<70;if(!(c&&c>3)){if(d)return!0;if(p)return p<603;var e,t,i,r,n="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(r=0;r<47;r++)f.push({k:t+r,v:i})}for(f.sort((function(e,t){return t.v-e.v})),r=0;r<f.length;r++)t=f[r].k.charAt(0),n.charAt(n.length-1)!==t&&(n+=t);return"DGBEFHACIJK"!==n}}));r({target:"Array",proto:!0,forced:_||!m||!v||!y},{sort:function(e){void 0!==e&&n(e);var t=a(this);if(y)return void 0===e?g.call(t):g.call(t,e);var i,r,s=[],u=o(t.length);for(r=0;r<u;r++)r in t&&s.push(t[r]);for(i=(s=l(s,function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:String(t)>String(i)?1:-1}}(e))).length,r=0;r<i;)t[r]=s[r++];for(;r<u;)delete t[r++];return t}})},3985:(e,t,i)=>{i(9736)("flatMap")},7694:(e,t,i)=>{i(9736)("flat")},4173:(e,t,i)=>{i(3103)({global:!0},{globalThis:i(9859)})},9509:(e,t,i)=>{var r=i(3103),n=Math.hypot,a=Math.abs,o=Math.sqrt;r({target:"Math",stat:!0,forced:!!n&&n(1/0,NaN)!==1/0},{hypot:function(e,t){for(var i,r,n=0,s=0,l=arguments.length,u=0;s<l;)u<(i=a(arguments[s++]))?(n=n*(r=u/i)*r+1,u=i):n+=i>0?(r=i/u)*r:i;return u===1/0?1/0:u*o(n)}})},8836:(e,t,i)=>{var r=i(3103),n=i(5496);r({target:"Number",stat:!0,forced:Number.parseFloat!=n},{parseFloat:n})},5883:(e,t,i)=>{var r=i(3103),n=i(7664).entries;r({target:"Object",stat:!0},{entries:function(e){return n(e)}})},1804:(e,t,i)=>{var r=i(3103),n=i(9003),a=i(2324);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return n(e,(function(e,i){a(t,e,i)}),{AS_ENTRIES:!0}),t}})},7890:(e,t,i)=>{var r=i(3103),n=i(7664).values;r({target:"Object",stat:!0},{values:function(e){return n(e)}})},7919:(e,t,i)=>{"use strict";var r=i(3103),n=i(3819),a=i(6485),o=i(4624),s=i(9003);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,i=a.f(t),r=i.resolve,l=i.reject,u=o((function(){var i=n(t.resolve),a=[],o=0,l=1;s(e,(function(e){var n=o++,s=!1;a.push(void 0),l++,i.call(t,e).then((function(e){s||(s=!0,a[n]={status:"fulfilled",value:e},--l||r(a))}),(function(e){s||(s=!0,a[n]={status:"rejected",reason:e},--l||r(a))}))})),--l||r(a)}));return u.error&&l(u.value),i.promise}})},7178:(e,t,i)=>{"use strict";var r=i(3103),n=i(3819),a=i(1333),o=i(6485),s=i(4624),l=i(9003),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,i=o.f(t),r=i.resolve,c=i.reject,d=s((function(){var i=n(t.resolve),o=[],s=0,d=1,h=!1;l(e,(function(e){var n=s++,l=!1;o.push(void 0),d++,i.call(t,e).then((function(e){l||h||(h=!0,r(e))}),(function(e){l||h||(l=!0,o[n]=e,--d||c(new(a("AggregateError"))(o,u)))}))})),--d||c(new(a("AggregateError"))(o,u))}));return d.error&&c(d.value),i.promise}})},1515:(e,t,i)=>{"use strict";var r=i(3103),n=i(4231),a=i(4226),o=i(4229),s=i(1333),l=i(7942),u=i(7757),c=i(7487);if(r({target:"Promise",proto:!0,real:!0,forced:!!a&&o((function(){a.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=l(this,s("Promise")),i="function"==typeof e;return this.then(i?function(i){return u(t,e()).then((function(){return i}))}:e,i?function(i){return u(t,e()).then((function(){throw i}))}:e)}}),!n&&"function"==typeof a){var d=s("Promise").prototype.finally;a.prototype.finally!==d&&c(a.prototype,"finally",d,{unsafe:!0})}},3439:(e,t,i)=>{"use strict";var r,n,a,o,s=i(3103),l=i(4231),u=i(9859),c=i(1333),d=i(4226),h=i(7487),p=i(8787),f=i(6540),g=i(4555),_=i(1832),m=i(5052),v=i(3819),y=i(7728),A=i(8511),b=i(9003),E=i(4575),w=i(7942),T=i(5795).set,C=i(4794),S=i(7757),I=i(4665),x=i(6485),P=i(4624),D=i(6407),R=i(6541),O=i(95),k=i(8639),M=i(8801),N=i(6358),L=O("species"),B="Promise",F=D.get,U=D.set,W=D.getterFor(B),G=d&&d.prototype,V=d,j=G,H=u.TypeError,z=u.document,Y=u.process,$=x.f,q=$,Q=!!(z&&z.createEvent&&u.dispatchEvent),Z="function"==typeof PromiseRejectionEvent,K="unhandledrejection",X=!1,J=R(B,(function(){var e=A(V)!==String(V);if(!e&&66===N)return!0;if(l&&!j.finally)return!0;if(N>=51&&/native code/.test(V))return!1;var t=new V((function(e){e(1)})),i=function(e){e((function(){}),(function(){}))};return(t.constructor={})[L]=i,!(X=t.then((function(){}))instanceof i)||!e&&k&&!Z})),ee=J||!E((function(e){V.all(e).catch((function(){}))})),te=function(e){var t;return!(!m(e)||"function"!=typeof(t=e.then))&&t},ie=function(e,t){if(!e.notified){e.notified=!0;var i=e.reactions;C((function(){for(var r=e.value,n=1==e.state,a=0;i.length>a;){var o,s,l,u=i[a++],c=n?u.ok:u.fail,d=u.resolve,h=u.reject,p=u.domain;try{c?(n||(2===e.rejection&&oe(e),e.rejection=1),!0===c?o=r:(p&&p.enter(),o=c(r),p&&(p.exit(),l=!0)),o===u.promise?h(H("Promise-chain cycle")):(s=te(o))?s.call(o,d,h):d(o)):h(r)}catch(e){p&&!l&&p.exit(),h(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ne(e)}))}},re=function(e,t,i){var r,n;Q?((r=z.createEvent("Event")).promise=t,r.reason=i,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:i},!Z&&(n=u["on"+e])?n(r):e===K&&I("Unhandled promise rejection",i)},ne=function(e){T.call(u,(function(){var t,i=e.facade,r=e.value;if(ae(e)&&(t=P((function(){M?Y.emit("unhandledRejection",r,i):re(K,i,r)})),e.rejection=M||ae(e)?2:1,t.error))throw t.value}))},ae=function(e){return 1!==e.rejection&&!e.parent},oe=function(e){T.call(u,(function(){var t=e.facade;M?Y.emit("rejectionHandled",t):re("rejectionhandled",t,e.value)}))},se=function(e,t,i){return function(r){e(t,r,i)}},le=function(e,t,i){e.done||(e.done=!0,i&&(e=i),e.value=t,e.state=2,ie(e,!0))},ue=function(e,t,i){if(!e.done){e.done=!0,i&&(e=i);try{if(e.facade===t)throw H("Promise can't be resolved itself");var r=te(t);r?C((function(){var i={done:!1};try{r.call(t,se(ue,i,e),se(le,i,e))}catch(t){le(i,t,e)}})):(e.value=t,e.state=1,ie(e,!1))}catch(t){le({done:!1},t,e)}}};if(J&&(j=(V=function(e){y(this,V,B),v(e),r.call(this);var t=F(this);try{e(se(ue,t),se(le,t))}catch(e){le(t,e)}}).prototype,(r=function(e){U(this,{type:B,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(j,{then:function(e,t){var i=W(this),r=$(w(this,V));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=M?Y.domain:void 0,i.parent=!0,i.reactions.push(r),0!=i.state&&ie(i,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),n=function(){var e=new r,t=F(e);this.promise=e,this.resolve=se(ue,t),this.reject=se(le,t)},x.f=$=function(e){return e===V||e===a?new n(e):q(e)},!l&&"function"==typeof d&&G!==Object.prototype)){o=G.then,X||(h(G,"then",(function(e,t){var i=this;return new V((function(e,t){o.call(i,e,t)})).then(e,t)}),{unsafe:!0}),h(G,"catch",j.catch,{unsafe:!0}));try{delete G.constructor}catch(e){}f&&f(G,j)}s({global:!0,wrap:!0,forced:J},{Promise:V}),g(V,B,!1,!0),_(B),a=c(B),s({target:B,stat:!0,forced:J},{reject:function(e){var t=$(this);return t.reject.call(void 0,e),t.promise}}),s({target:B,stat:!0,forced:l||J},{resolve:function(e){return S(l&&this===a?V:this,e)}}),s({target:B,stat:!0,forced:ee},{all:function(e){var t=this,i=$(t),r=i.resolve,n=i.reject,a=P((function(){var i=v(t.resolve),a=[],o=0,s=1;b(e,(function(e){var l=o++,u=!1;a.push(void 0),s++,i.call(t,e).then((function(e){u||(u=!0,a[l]=e,--s||r(a))}),n)})),--s||r(a)}));return a.error&&n(a.value),i.promise},race:function(e){var t=this,i=$(t),r=i.reject,n=P((function(){var n=v(t.resolve);b(e,(function(e){n.call(t,e).then(i.resolve,r)}))}));return n.error&&r(n.value),i.promise}})},7368:(e,t,i)=>{var r=i(7400),n=i(9859),a=i(6541),o=i(835),s=i(5762),l=i(1787).f,u=i(8151).f,c=i(8311),d=i(895),h=i(5650),p=i(7487),f=i(4229),g=i(816),_=i(6407).enforce,m=i(1832),v=i(95),y=i(2926),A=i(461),b=v("match"),E=n.RegExp,w=E.prototype,T=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,C=/a/g,S=/a/g,I=new E(C)!==C,x=h.UNSUPPORTED_Y;if(a("RegExp",r&&(!I||x||y||A||f((function(){return S[b]=!1,E(C)!=C||E(S)==S||"/a/i"!=E(C,"i")}))))){for(var P=function(e,t){var i,r,n,a,l,u,h=this instanceof P,p=c(e),f=void 0===t,m=[],v=e;if(!h&&p&&f&&e.constructor===P)return e;if((p||e instanceof P)&&(e=e.source,f&&(t="flags"in v?v.flags:d.call(v))),e=void 0===e?"":String(e),t=void 0===t?"":String(t),v=e,y&&"dotAll"in C&&(r=!!t&&t.indexOf("s")>-1)&&(t=t.replace(/s/g,"")),i=t,x&&"sticky"in C&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,"")),A&&(e=(a=function(e){for(var t,i=e.length,r=0,n="",a=[],o={},s=!1,l=!1,u=0,c="";r<=i;r++){if("\\"===(t=e.charAt(r)))t+=e.charAt(++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:T.test(e.slice(r+1))&&(r+=2,l=!0),n+=t,u++;continue;case">"===t&&l:if(""===c||g(o,c))throw new SyntaxError("Invalid capture group name");o[c]=!0,a.push([c,u]),l=!1,c="";continue}l?c+=t:n+=t}return[n,a]}(e))[0],m=a[1]),l=o(E(e,t),h?this:w,P),(r||n||m.length)&&(u=_(l),r&&(u.dotAll=!0,u.raw=P(function(e){for(var t,i=e.length,r=0,n="",a=!1;r<=i;r++)"\\"!==(t=e.charAt(r))?a||"."!==t?("["===t?a=!0:"]"===t&&(a=!1),n+=t):n+="[\\s\\S]":n+=t+e.charAt(++r);return n}(e),i)),n&&(u.sticky=!0),m.length&&(u.groups=m)),e!==v)try{s(l,"source",""===v?"(?:)":v)}catch(e){}return l},D=function(e){e in P||l(P,e,{configurable:!0,get:function(){return E[e]},set:function(t){E[e]=t}})},R=u(E),O=0;R.length>O;)D(R[O++]);w.constructor=P,P.prototype=w,p(n,"RegExp",P)}m("RegExp")},7950:(e,t,i)=>{"use strict";var r=i(3103),n=i(3466);r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},103:(e,t,i)=>{var r=i(7400),n=i(1787),a=i(895),o=i(4229);r&&o((function(){return"sy"!==Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get.call({dotAll:!0,sticky:!0})}))&&n.f(RegExp.prototype,"flags",{configurable:!0,get:a})},3887:(e,t,i)=>{"use strict";var r=i(3103),n=i(3723),a=i(8885),o=i(4237),s=i(3819),l=i(1176),u=i(7079),c=i(8311),d=i(895),h=i(5762),p=i(4229),f=i(95),g=i(7942),_=i(6637),m=i(6407),v=i(4231),y=f("matchAll"),A="RegExp String Iterator",b=m.set,E=m.getterFor(A),w=RegExp.prototype,T=w.exec,C="".matchAll,S=!!C&&!p((function(){"a".matchAll(/./)})),I=n((function(e,t,i,r){b(this,{type:A,regexp:e,string:t,global:i,unicode:r,done:!1})}),"RegExp String",(function(){var e=E(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,i=e.string,r=function(e,t){var i,r=e.exec;if("function"==typeof r){if("object"!=typeof(i=r.call(e,t)))throw TypeError("Incorrect exec result");return i}return T.call(e,t)}(t,i);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=_(i,o(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),x=function(e){var t,i,r,n,a,s,u=l(this),c=String(e);return t=g(u,RegExp),void 0===(i=u.flags)&&u instanceof RegExp&&!("flags"in w)&&(i=d.call(u)),r=void 0===i?"":String(i),n=new t(t===RegExp?u.source:u,r),a=!!~r.indexOf("g"),s=!!~r.indexOf("u"),n.lastIndex=o(u.lastIndex),new I(n,c,a,s)};r({target:"String",proto:!0,forced:S},{matchAll:function(e){var t,i,r,n=a(this);if(null!=e){if(c(e)&&!~String(a("flags"in w?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(S)return C.apply(n,arguments);if(void 0===(i=e[y])&&v&&"RegExp"==u(e)&&(i=x),null!=i)return s(i).call(e,n)}else if(S)return C.apply(n,arguments);return t=String(n),r=new RegExp(e,"g"),v?x.call(r,t):r[y](t)}}),v||y in w||h(w,y,x)},977:(e,t,i)=>{"use strict";var r=i(3103),n=i(6650).end;r({target:"String",proto:!0,forced:i(7456)},{padEnd:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},5734:(e,t,i)=>{"use strict";var r=i(3103),n=i(6650).start;r({target:"String",proto:!0,forced:i(7456)},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},1639:(e,t,i)=>{"use strict";var r=i(3103),n=i(8885),a=i(8311),o=i(895),s=i(17),l=i(95),u=i(4231),c=l("replace"),d=RegExp.prototype,h=Math.max,p=function(e,t,i){return i>e.length?-1:""===t?i:e.indexOf(t,i)};r({target:"String",proto:!0},{replaceAll:function(e,t){var i,r,l,f,g,_,m,v,y=n(this),A=0,b=0,E="";if(null!=e){if((i=a(e))&&!~String(n("flags"in d?e.flags:o.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[c]))return r.call(e,y,t);if(u&&i)return String(y).replace(e,t)}for(l=String(y),f=String(e),(g="function"==typeof t)||(t=String(t)),_=f.length,m=h(1,_),A=p(l,f,0);-1!==A;)v=g?String(t(f,A,l)):s(f,l,A,[],void 0,t),E+=l.slice(b,A)+v,b=A+_,A=p(l,f,A+m);return b<l.length&&(E+=l.slice(b)),E}})},5940:(e,t,i)=>{"use strict";var r=i(4954),n=i(4229),a=i(1176),o=i(4237),s=i(6051),l=i(8885),u=i(6637),c=i(17),d=i(8115),h=i(95)("replace"),p=Math.max,f=Math.min,g="$0"==="a".replace(/./,"$0"),_=!!/./[h]&&""===/./[h]("a","$0");r("replace",(function(e,t,i){var r=_?"$":"$0";return[function(e,i){var r=l(this),n=null==e?void 0:e[h];return void 0!==n?n.call(e,r,i):t.call(String(r),e,i)},function(e,n){if("string"==typeof n&&-1===n.indexOf(r)&&-1===n.indexOf("$<")){var l=i(t,this,e,n);if(l.done)return l.value}var h=a(this),g=String(e),_="function"==typeof n;_||(n=String(n));var m=h.global;if(m){var v=h.unicode;h.lastIndex=0}for(var y=[];;){var A=d(h,g);if(null===A)break;if(y.push(A),!m)break;""===String(A[0])&&(h.lastIndex=u(g,o(h.lastIndex),v))}for(var b,E="",w=0,T=0;T<y.length;T++){A=y[T];for(var C=String(A[0]),S=p(f(s(A.index),g.length),0),I=[],x=1;x<A.length;x++)I.push(void 0===(b=A[x])?b:String(b));var P=A.groups;if(_){var D=[C].concat(I,S,g);void 0!==P&&D.push(P);var R=String(n.apply(void 0,D))}else R=c(C,g,S,I,P,n);S>=w&&(E+=g.slice(w,S)+R,w=S+C.length)}return E+g.slice(w)}]}),!!n((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!g||_)},8827:(e,t,i)=>{"use strict";var r=i(3103),n=i(1017).end,a=i(9445)("trimEnd"),o=a?function(){return n(this)}:"".trimEnd;r({target:"String",proto:!0,forced:a},{trimEnd:o,trimRight:o})},1715:(e,t,i)=>{"use strict";var r=i(3103),n=i(1017).start,a=i(9445)("trimStart"),o=a?function(){return n(this)}:"".trimStart;r({target:"String",proto:!0,forced:a},{trimStart:o,trimLeft:o})},5794:(e,t,i)=>{"use strict";var r=i(3103),n=i(1017).trim;r({target:"String",proto:!0,forced:i(9445)("trim")},{trim:function(){return n(this)}})},6882:(e,t,i)=>{i(8423)("asyncIterator")},634:(e,t,i)=>{"use strict";var r=i(3103),n=i(7400),a=i(9859),o=i(816),s=i(5052),l=i(1787).f,u=i(7081),c=a.Symbol;if(n&&"function"==typeof c&&(!("description"in c.prototype)||void 0!==c().description)){var d={},h=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof h?new c(e):void 0===e?c():c(e);return""===e&&(d[t]=!0),t};u(h,c);var p=h.prototype=c.prototype;p.constructor=h;var f=p.toString,g="Symbol(test)"==String(c("test")),_=/^Symbol\((.*)\)[^)]+$/;l(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=f.call(e);if(o(d,e))return"";var i=g?t.slice(7,-1):t.replace(_,"$1");return""===i?void 0:i}}),r({global:!0,forced:!0},{Symbol:h})}},1382:(e,t,i)=>{i(2574)("Float32",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},1982:(e,t,i)=>{i(2574)("Float64",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},6618:(e,t,i)=>{"use strict";var r=i(8200);(0,i(9918).exportTypedArrayStaticMethod)("from",i(5215),r)},4074:(e,t,i)=>{i(2574)("Int16",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},4696:(e,t,i)=>{i(2574)("Int32",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},3229:(e,t,i)=>{i(2574)("Int8",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},9527:(e,t,i)=>{"use strict";var r=i(9918),n=i(8200),a=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,i=new(a(this))(t);t>e;)i[e]=arguments[e++];return i}),n)},315:(e,t,i)=>{"use strict";var r=i(9918),n=i(9859),a=i(4229),o=i(3819),s=i(4237),l=i(3867),u=i(2671),c=i(8506),d=i(6358),h=i(9811),p=r.aTypedArray,f=r.exportTypedArrayMethod,g=n.Uint16Array,_=g&&g.prototype.sort,m=!!_&&!a((function(){var e=new g(2);e.sort(null),e.sort({})})),v=!!_&&!a((function(){if(d)return d<74;if(u)return u<67;if(c)return!0;if(h)return h<602;var e,t,i=new g(516),r=Array(516);for(e=0;e<516;e++)t=e%4,i[e]=515-e,r[e]=e-2*t+3;for(i.sort((function(e,t){return(e/4|0)-(t/4|0)})),e=0;e<516;e++)if(i[e]!==r[e])return!0}));f("sort",(function(e){var t=this;if(void 0!==e&&o(e),v)return _.call(t,e);p(t);var i,r=s(t.length),n=Array(r);for(i=0;i<r;i++)n[i]=t[i];for(n=l(t,function(e){return function(t,i){return void 0!==e?+e(t,i)||0:i!=i?-1:t!=t?1:0===t&&0===i?1/t>0&&1/i<0?1:-1:t>i}}(e)),i=0;i<r;i++)t[i]=n[i];return t}),!v||m)},3161:(e,t,i)=>{i(2574)("Uint16",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},723:(e,t,i)=>{i(2574)("Uint32",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},3675:(e,t,i)=>{i(2574)("Uint8",(function(e){return function(t,i,r){return e(this,t,i,r)}}))},6920:(e,t,i)=>{i(2574)("Uint8",(function(e){return function(t,i,r){return e(this,t,i,r)}}),!0)},4962:(e,t,i)=>{i(5738)},6481:(e,t,i)=>{i(4173)},8990:(e,t,i)=>{i(7919)},884:(e,t,i)=>{i(7178)},5431:(e,t,i)=>{i(3887)},5704:(e,t,i)=>{i(1639)},6886:(e,t,i)=>{var r=i(9859),n=i(5694),a=i(5735),o=i(5762),s=i(95),l=s("iterator"),u=s("toStringTag"),c=a.values;for(var d in n){var h=r[d],p=h&&h.prototype;if(p){if(p[l]!==c)try{o(p,l,c)}catch(e){p[l]=c}if(p[u]||o(p,u,d),n[d])for(var f in a)if(p[f]!==a[f])try{o(p,f,a[f])}catch(e){p[f]=a[f]}}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=!1,t=!1;if(i.g.__wxConfig&&"string"==typeof i.g.__wxConfig.platform)"ios"===i.g.__wxConfig.platform.toLowerCase()?e=!0:"mac"===i.g.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var r=navigator.userAgent.toLowerCase();r.indexOf("iphone")>=0||r.indexOf("ipad")>=0?e=!0:r.indexOf("miniprogramenv/mac")>=0&&(t=!0)}var n=[];(e||t)&&(i.g.Promise=void 0,n.push("Promise")),i(305)({usePolyfill:n,useNative:["WeakMap"]}),i(5482),i(9401)})()})();var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation;(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>R});class i{constructor(){this.listeners={}}emit(e,t){if(this.listeners[e]&&this.listeners[e].length>0){var i=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(i=!0)})),i&&(this.listeners[e]=this.listeners[e].filter((e=>0!==e.count))),!0}return!1}many(e,t,i){if(!t)return this;var r={count:i,cb:t};return this.listeners[e]?this.listeners[e].push(r):this.listeners[e]=[r],this}on(e,t){this.many(e,t,-1)}once(e,t){this.many(e,t,1)}off(e,t){for(var i=0;i<this.listeners[e].length;i++){var r=this.listeners[e][i];if(r.cb===t)return void(r.count=0)}}}var r=e.g.__wxLibrary,n=e.g.__wxConfig,a=r.envType,o=r.contextType,s="Service"===a,l="WebView"===a,u="Worker"===a,c="Widget"===a,d=l||s&&0===o.indexOf("App:"),h=s&&0===o.indexOf("Game:"),p=u&&"function"==typeof e.g.workerInvokeJsApi,f=!!n.isIsolateContext,g=s&&(f&&o.indexOf("Uncertain")>=0||o.indexOf("MainContext")>=0),_=s&&o.indexOf("SubContext")>=0,m=g||_,v=l||g,y="wxlib"===n.workerContentType,A={platform:function(){var e=n.platform;if(!e&&l){var t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),SDKVersion:"undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version,isIsolateContext:m,isGame:h,isApp:d,isMainContext:g,isSubContext:_,isSafeEnv:v,isService:s,isWebView:l,isWorker:u,isWidget:c,isSupportWorkerAPI:p,typeStr:a,isWXLibWorker:y},b=new Map;var E={collectSyncInvoke:function(e,t){b.has(e)||b.set(e,{count:0,cost:0});var i=b.get(e);i.count+=1,i.cost+=t},collectPublish:function(e,t){},collectAsyncInvoke:function(e,t){},logSyncInvoke:function(e=""){var t=[];Array.from(b.entries()).forEach((([e,i])=>{t.push(`${e}: ${i.count} (${i.cost} ms)`)})),t.length>0&&t.join("\n"),b.clear()}},w=new i,T={},C="configReady",S="libraryReady";function I(e,t){e in T?t(T[e]):D.once("lifeCycle:"+e,t)}function x(e,t){return!(e in T)&&(T[e]=t,D.emit("lifeCycle:"+e,t))}var P=e.g,D={EventEmitter:i,perf:E,on:w.on.bind(w),emit:w.emit.bind(w),once:w.once.bind(w),onConfigReady:I.bind(null,C),emitConfigReady:x.bind(null,C),get isConfigReady(){return C in T},onLibraryReady:I.bind(null,S),emitLibraryReady:x.bind(null,S),get isLibraryReady(){return S in T},onBridgeReady(e){void 0!==WeixinJSBridge?e():"object"==typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:A,global:P};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return P}:new __Function__(...arguments)},Function.prototype=__Function__.prototype),e.g.__wxLibrary.onEnd=function(){D.emitLibraryReady({})};var R=D})(),Foundation=t.default})();var nativeTrans=function(e){"use strict";var t="webViewCreated",i="nativeTransFail",r="nativeTransReady";console;if("object"!=typeof e.ntrans)return e.__nativeTransEnabled__=!1,{enabled:!1,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:i};e.__nativeTransEnabled__=!0;var n=e.ntrans,a=n.id,o=a===n.serviceId,s={};function l(e){o?e(n.serviceId):Foundation.onConfigReady((function(){e(n.serviceId)}))}function u(e,t){var i=s[e]=s[e]||{connectedTime:0,dataQueue:[],initTime:Date.now()};return"number"==typeof t&&(i.id=t),s[e]}function c(e,t){return{event:e,param:t,id:a,sendTime:Date.now()}}return l((function(){delete e.ntrans})),{enabled:!0,publishToTargetWithQueue:function(e,t,i){var r=u(e),a=c(t,i);r.connectedTime?n.postMessage(r.id,a):Date.now()-r.initTime>3e5?r.dataQueue=[]:r.dataQueue.push(a)},packMessage:c,broadcastMessage:function(e,t){n.broadcastMessage(e,t)},onMessage:function(e,t){t!==a&&(n.setMessageListener(),a=t),n.setMessageListener(t,(function(t){"function"==typeof e&&e(t.event,t.param,t.id,t.sendTime)}))},registerTarget:function(e,t){var i=u(e,t);i.connectedTime=Date.now(),n.postMessage(i.id,c(r)),i.dataQueue.forEach((function(e){e.sendTime=Date.now(),n.postMessage(i.id,e)})),i.dataQueue=[]},onceServiceConfirmed:l,revertTargets:function(){for(var e in s)s[e].dataQueue.forEach((function(t){WeixinJSBridge.publish(t.event,t.param,[e])})),s[e].dataQueue=[];s={}},isService:o,get id(){return a},SERVICE_TAG:"AppService",EVT_NTRANS_READY:r,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:i,version:n.version,addGroup:n.addGroup.bind(n)}}(this),WeixinJSBridge=function(e){"use strict";let t,i=!0,r={},n={},a={};const o=new Set(["getSystemInfo","getNetworkType","isGameRecorderSupported","getDeviceInfo"]);"function"==typeof logxx&&logxx("jsbridge start");var s="undefined"!=typeof __devtoolssubcontext&&__devtoolssubcontext;if(e.navigator&&e.navigator.userAgent){var l=e.navigator.userAgent;(l.indexOf("appservice")>-1||l.indexOf("wechatdevtools")>-1)&&(s=!0)}if(s&&!Foundation.env.isWorker||e.useGlobalJSBridge){var u=e.WeixinJSBridge;return delete e.WeixinJSBridge,u}if(e.OSUseGlobalJSBridge)return u=e.WeixinJSBridge;var c=e.__wxConfig||{},d=c.isWK,h={},p=0,f={},g={},_="custom_event_",m={},v=e.webkit,y=e.WeixinJSCore;"object"==typeof y&&"function"!=typeof y.publishHandler&&(y.publishHandler=function(){}),Foundation.env.isWorker&&Foundation.env.isSupportWorkerAPI&&(y={invokeHandler:e.workerInvokeJsApi},p=1<<25),delete e.webkit,e.WeixinJSCore={invokeHandler:function(){},publishHandler:function(){},setTimerHandler:function(){},clearTimerHandler:function(){}};var A=JSON.parse,b=JSON.stringify,E=function(e,t){if(void 0!==e&&"function"==typeof h[t]&&""!==e&&null!==e){if("string"==typeof e)try{e=A(e),e=WeixinNativeBuffer.unpack(e)}catch(t){e={}}var i=h[t];delete h[t],"function"==typeof i&&i(e)}},w=function(e,s,l,u={}){if(!t&&__wxConfig.onReady((()=>{i=!1,r={}}),!0),!t&&(t=!0),i&&o.has(e)&&r[e])return void l(r[e]);let c;var f;if(i&&o.has(e)&&(n[e]||((f=new Promise(((e,t)=>{c=t=>{e(t)}}))).then((e=>{i||(n={},a={}),l(e)})),n[e]=f),!f))return(f=n[e]).then((e=>{i||(n={},a={}),l(e)})),!0;var g=s;!0!==u.keepOriginalParams&&(s=WeixinNativeBuffer.pack(s),g=b(s||{})),delete u.keepOriginalParams;var _,m=++p;_=i?t=>{o.has(e)?a[e]?c(t):(r[e]=t,delete n[e],"function"==typeof l&&l(t)):"function"==typeof l&&l(t)}:e=>{"function"==typeof l&&l(e)},h[m]=_;return function(e,t,i,r){var n;if(y){let o=!1;return n=__wxConfig.supportInvokeWithAppId?y.invokeHandler(e,t,i,r):y.invokeHandler(e,t,i),"function"!=typeof h[i]||null!=n&&""!==n||(a[e]=!0,o=!0),E(n,i),o}var o={event:e,paramsString:t,callbackId:i,privateArgs:b(r)};d?(n=prompt("webgame_invoke",b(o)),E(n,i)):v.messageHandlers.invokeHandler.postMessage(o)}(e,g,m,u)},T=function(e,t){t=WeixinNativeBuffer.unpack(t);var i=h[e];delete h[e],"function"==typeof i&&i(t)},C=function(e,t){f[e]=t},S=function(e,t,i){!function(e,t,i){y?y.publishHandler(e,b(t),b(i)):v.messageHandlers.publishHandler.postMessage({event:e,paramsString:b(t),webviewIds:b(i)})}(_+e,t,i)},I=function(e,t){m[_+e]=t},x=function(e,t,i,r){var n,a;t=WeixinNativeBuffer.unpack(t),-1!=e.indexOf(_)?n=m[e]:(n=f[e],a=g[e]),"function"==typeof n&&n(t,i,r),a&&a.forEach((e=>e(t,i,r)))};return e.WeixinJSBridge={get invokeCallbackHandler(){return T},get subscribeHandler(){return x}},c&&c.clientDebug&&(e.WeixinJSBridge={on:C,publish:S,invoke:w,subscribe:I,get invokeCallbackHandler(){return T},get subscribeHandler(){return x}}),{on:C,publish:S,invoke:w,subscribe:I,loadJsFiles:function(e,t){w("loadJsFiles",{paths:e},t)},addEventListener:function(e,t){g[e]?g[e].add(t):g[e]=new Set([t])},removeEventListener:function(e,t){g[e]&&(t?g[e].delete(t):delete g[e])},get invokeCallbackHandler(){return T},get subscribeHandler(){return x}}}(this);Foundation.onBridgeReady((function(){var e,t=String.prototype.replace,i=WeixinJSBridge.publish,r=[];WeixinJSBridge.publish=function(n,a,o){var s;Foundation.isConfigReady||nativeTrans.enabled?(o=function(e){if(Array.isArray(e)){var t=e.filter((function(e){return null!=e}));if(0===e.length||0!==t.length)return t}}(o||[]))&&(s=n||"",n=t.call(s,/["'\\]/g,""),e&&e(n,a,o)||i.call(WeixinJSBridge,n,a,o)):r.push([n,a,o])},Foundation.onConfigReady((function(){r.forEach((function(e){WeixinJSBridge.publish.apply(WeixinJSBridge,e)})),r=[]})),WeixinJSBridge.setCustomPublishHandler=function(t){e=t}})),function(e){"use strict";var t=JSON.parse,i=JSON.stringify,r=Object.defineProperty,n=Foundation.env.isSubContext,a=Foundation.env.isSafeEnv,o={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function l(e,t,i,n){r(e,i,{configurable:!0,enumerable:!0,get:function(){if(i in t)return t[i];try{"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+i,force:!0})}catch(e){}try{return"function"!=typeof n?n:n()}catch(e){return}},set:function(e){t[i]=e}})}function u(e){return t(i(e))}var c=!0===(__wxConfig=void 0!==e.__wxConfig?a?Object.assign({},e.__wxConfig):u(e.__wxConfig):{}).preload,d=!1,h=!1,p=[],f=[],g=[],_=Foundation.env.typeStr;Foundation.env.isSubContext&&(_="SubContext");function m(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var v=function(e){g.push(e)},y=function(e,t){d?void 0!==__wxConfig&&(t?h?m(e,__wxConfig):f.push(e):m(e,__wxConfig)):"function"==typeof e&&(t?f.push(e):p.push(e))},A=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var i=t.subPackages||t.subpackages;i&&i.length>0&&(i.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=i);const r=__wxConfig.expt&&"1"===__wxConfig.expt.clicfg_appbrand_config_purge_usingcomponents;return d&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(n||(r&&(delete __wxConfig.usingComponents,Object.values(__wxConfig.page||{}).forEach((function(e){e&&e.window&&delete e.window.usingComponents}))),__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){r&&t&&t.window&&delete t.window.usingComponents,__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,o[e+".html"]=u(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},b=function(e){return e.onReady=y,e.beforeReady=v,n||(e.preload=c),e.isReady=d,e.isSubContext=n,e.envTag=_,e.isSafeContext=a,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},E=function(){void 0===e.__wxConfig||d||(d=!0,Object.assign(__wxConfig,a?e.__wxConfig:u(e.__wxConfig)),__wxConfig=b(__wxConfig),__wxConfig=A(__wxConfig),function(e){if(!g.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(g).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),g=[]}((function(){__wxConfig.onReadyStart=Date.now(),p.forEach((function(e){m(e,__wxConfig)})),h=!0,f.forEach((function(e){m(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),p=[],function(){if(!a){var t=e.__wxConfig,i={},r={};o=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(o={});try{l(r,i,"deprecated",!0),s.forEach((function(e){if(e in t){var n=t[e];switch(e){case"page":l(r,i,e,o);break;case"env":l(r,i,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:n.USER_DATA_PATH}}));break;case"accountInfo":l(r,i,e,{appId:n.appId,icon:n.icon,nickname:n.nickname});break;case"appLaunchInfo":l(r,i,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":l(r,i,e,{maxRequestConcurrent:n.maxRequestConcurrent,maxUploadConcurrent:n.maxUploadConcurrent,maxDownloadConcurrent:n.maxDownloadConcurrent,maxWorkerConcurrent:n.maxWorkerConcurrent,maxWebsocketConnect:n.maxWebsocketConnect});break;default:l(r,i,e,n)}}})),e.__wxConfig=r}catch(i){e.__wxConfig=t}}}()})))};function w(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=b(__wxConfig),__wxConfig=A(__wxConfig),Foundation.onConfigReady((function(){E()})),n?__wxConfig.__readyHandler=w:c?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",w)})):Foundation.onLibraryReady(w)}(this),function(e){"use strict";function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var i,r,n=(i=[],r=[],{set:function(e,t){i.push(e),r.push(t)},get:function(e){var t=i.indexOf(e);if(-1!==t)return r[t]},delete:function(e){var t=i.indexOf(e);-1!==t&&(i.splice(t,1),r.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},Object.prototype.hasOwnProperty.call(e,"type")?function(e){var i=n.get(e.promise);if(i)i.event=e;else{var r={event:e};setTimeout((function(){0===r.event.type&&t(r.event),n.delete(r.event.promise)}),0),n.set(e.promise,r)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var NativeBuffer=function(e){var t=e.WeixinNativeBuffer,i=e.getNativeBufferId,r=e.setNativeBuffer,n=e.getNativeBuffer,a=__wxConfig||{},o=!1;"android"===a.platform||"windows"===a.platform||"mina"===a.platform?o="function"==typeof i&&"function"==typeof r&&"function"==typeof n&&a.nativeBufferEnabled:"ios"!==a.platform&&"mac"!==a.platform||(o=null!=t);var s=function(e){var n={};return o?n.id=function(e){var n=e.__proto__;e.__proto__=ArrayBuffer.prototype;var a=-1;return t?a=t.new(e):"function"==typeof i&&"function"==typeof r&&(a=i(),r(a,e)),e.__proto__=n,a}(e):n.base64=h(e),n},l=function(e){var i;if(null!=e)return o&&void 0!==e.id?(i=e.id,t?t.get(i):"function"==typeof n?n(i):void 0):void 0!==e.base64?p(e.base64):void 0},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=c||function(e){for(var t,i,r=String(e),n="",a=0,o=u;r.charAt(0|a)||(o="=",a%1);n+=o.charAt(63&t>>8-a%1*8)){if((i=r.charCodeAt(a+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|i}return n},d=d||function(e){var t=String(e).replace(/=+$/,""),i="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,n,a=0,o=0;n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n=u.indexOf(n);return i},h=function(e){for(var t="",i=new Uint8Array(e),r=i.byteLength,n=0;n<r;n++)t+=String.fromCharCode(i[n]);return c(t)},p=function(e){for(var t=d(e),i=t.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer},f=function(e,t){if(!t)return null;if(t=t.split("."),"Array"!==g(t))throw new Error("parseKeyChain keyChain is unexpected");if(!t.length)return null;for(var i=t[t.length-1],r=e,n=0;n<t.length-1;n++){if(!r)return null;r=r[t[n]]}return[r,i]},g=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]};return delete e.WeixinNativeBuffer,delete e.getNativeBufferId,delete e.setNativeBuffer,delete e.getNativeBuffer,{new:s,get:l,useCompatibleMode:function(e){t&&t.useCompatibleMode(e)},pack:function(e){if(null==e)return e;var t=[];for(var i in e){var r=e[i];if(void 0!==r&&"ArrayBuffer"===g(r)&&void 0!==r.byteLength)(a=s(r)).key=i,t.push(a)}if(t.length>0){for(var n=0;n<t.length;n++){var a;delete e[(a=t[n]).key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var i=0;i<t.length;i++){var r=t[i];if(null!=r){var n=l(r);void 0!==n&&"ArrayBuffer"===g(n)&&(e[r.key]=n)}}return e},packWithBase64:function(e){if(null==e)return e;var t=[];for(var i in e){var r=e[i];if(void 0!==r&&"ArrayBuffer"===g(r)&&void 0!==r.byteLength)(a={base64:h(r)}).key=i,t.push(a)}if(t.length>0){for(var n=0;n<t.length;n++){var a;delete e[(a=t[n]).key]}e.__nativeBuffers__=t}return e},packPostMessage:function(e){if(null==e)return e;var t=function(e){if(null==e)return e;var t=[],i=function(e,t,r=[]){for(var n in e){var a=e[n];if("[object Object]"===Object.prototype.toString.call(a)||"[object Array]"===Object.prototype.toString.call(a)){let e=[...r];e.push(n),i(a,t,e)}else if(void 0!==a&&"ArrayBuffer"===g(a)&&void 0!==a.byteLength){if(e._sabId)continue;var o=s(a),l=Array.prototype.concat.call(r,n).join(".");o.key=l,delete e[n],t.push(o)}}};return i(e,t),t}(e);return t.length>0&&(e.__nativeBuffers__=t),e},unpackPostMessage:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var i=0;i<t.length;i++){var r=t[i];if(null!=r){var n=l(r);if(void 0!==n&&"ArrayBuffer"===g(n)){var a=f(e,r.key);if(!a)return;var[o,s]=a;o[s]=n}}}return e}}}(this),WeixinNativeBuffer=NativeBuffer;NativeBuffer=null;var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole;(()=>{"use strict";var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>v});var i=BabelRuntimeHelpers.objectSpread2,r=e.n(i),{onConfigReady:n,env:a}=Foundation;var o=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function s(e,t){this.num=e,this.type=t}var l,u,c,d,h,p,f,g={ALL:new s(Number.MIN_VALUE,"ALL"),DEBUG:new s(5e3,"DEBUG"),LOG:new s(1e4,"LOG"),INFO:new s(2e4,"INFO"),WARN:new s(3e4,"WARN"),ERROR:new s(4e4,"ERROR"),OFF:new s(Number.MAX_VALUE,"OFF")},_=(e,t)=>({debug:e(g.DEBUG,t),log:e(g.LOG,t),info:e(g.INFO,t),warn:e(g.WARN,t),error:e(g.ERROR,t)}),m=g.INFO;if(a.isWorker||a.isWidget){o=Object.assign({createLogger:function(){return wxConsole}},wxConsole)}else a.isSubContext&&a.isIsolateContext?(l=[],u=(e,t)=>(...i)=>{l.push({level:e,logs:i,category:t})},n(c=()=>{setTimeout((()=>{var e=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;e?(e(l),l=[]):c()}),1e3)}),o=r()(r()({},_(u)),{},{createLogger:e=>_(u,"string"==typeof e?e:"default"),__isFromMainContext:!1})):(d=__wxConfig.platform,h=[],p=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),i=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),n=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),o=("00"+e.getMilliseconds()).slice(-3),s=e.getFullYear()+"-"+t+"-"+i,l=r+":"+n+":"+a+"."+o;return"ios"===d?s+" "+l+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):s+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+l},f=function(e,t){var i=e.type;return function(...r){if(t&&Array.prototype.unshift.call(r,"["+t+"]"),function(){if(__wxConfig&&"debug"in __wxConfig&&void 0!==__wxConfig.debug)return!!__wxConfig.debug}()&&wxConsole[i.toLowerCase()].call(wxConsole,...r),e.num>=m.num){var n=new Date,a=Array.prototype.slice.call(r).map((e=>{switch(typeof e){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}})).join(" ");h&&h.length>1024&&h.shift(),h.push({date:n,type:i,content:a})}}},n((function(){setTimeout((function e(){var t;setTimeout(e,4e3),0!==h.length&&(t=h,"ios"===d?WeixinJSBridge.invoke("systemLog",{dataArray:t.map((function(e){return{message:"\n"+p(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===d&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+p(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),h=[])}),4e3)})),o=r()(r()({},_(f)),{},{createLogger:function(e){return _(f,"string"==typeof e?e:"default")},__mergeSubContextLogs:e=>{Array.isArray(e)&&e.forEach((e=>{var{level:t,logs:i,category:r}=e;f(t,r)(i)}))},__isFromMainContext:!0}));var v=o;wxNativeConsole=t.default})();var WeixinWorker=function(e){var t=["request","createSocketTask","operateSocketTask","onSocketTaskStateChange","createRequestTask","createRequestTaskAsync","operateRequestTask","onRequestTaskStateChange","createDownloadTask","createDownloadTaskAsync","operateDownloadTask","onDownloadTaskStateChange","createUploadTask","createUploadTaskAsync","operateUploadTask","onUploadTaskStateChange","getNetworkType","createAudioInstance","createAudioInstanceAsync","operateAudio","destroyAudioInstance","getAudioState","setAudioState","onAudioStateChange","uploadFile","downloadFile","saveFile","getFileInfo","getSavedFileInfo","getSavedFileList","removeSavedFile","readFile","writeFile","mkdir","readdir","rmdir","access","unlink","stat","copyFile","rename","fs_appendFile","fs_appendFileSync","fs_copyFile","fs_copyFileSync","fs_rename","fs_renameSync","getABTestConfig","reportKeyValue","reportIDKey"],i=!1;if(e.navigator&&e.navigator.userAgent){var r=e.navigator.userAgent;(r.indexOf("appservice")>-1||r.indexOf("wechatdevtools")>-1)&&(i=!0)}var n=e.WeAppWorker,a=e.WeixinWorker,o=[],s=[],l=[],u=[],c=[],d={},h=function(e){return d[e]},p=function(e,t){d[e]=t},f=function(e){e=WeixinNativeBuffer.unpackPostMessage(e),s.forEach((function(t){"function"==typeof t&&t(e)}))},g=function(e,t){t=WeixinNativeBuffer.unpackPostMessage(t),o.forEach((function(i){"function"==typeof i&&i(e,t)}))},_=function(e,t){l.forEach((function(i){"function"==typeof i&&i(e,t)}))},m=function(e){u.forEach((function(t){"function"==typeof t&&t(e)}))};Foundation.on("error",m),Foundation.on("unhandledRejection",(function(e){c.forEach((function(t){"function"==typeof t&&t(e)}))}));var v={get appServiceMsgHandler(){return f},get workerMsgHandler(){return g},get workerCreatedHandler(){return _},get errorHandler(){return m},get __workerId__(){return a.__workerId__}},y={create:function(e,i){var r,o,s=!(!(i=i||{}).useExperimentalWorker||!n);if(s?(o=n,r=JSON.stringify(i)):(o=a,r={APIList:t}),"function"==typeof o.create){var l=o.create.call(o,e,r);return p(l,o),{workerId:l,useWKWorker:s}}},createWXLibWorker:function(e,i){var r={APIList:t};i.APIList&&(r.APIList=t.concat(i.APIList)),i.type&&(r.type=i.type);var n=a;if("function"==typeof n.createWXLibWorker){var o=n.createWXLibWorker.call(n,e,JSON.stringify(r));return p(o,n),{workerId:o}}},terminate:function(e){var t=h(e);if("function"==typeof t.terminate)return function(e){delete d[e]}(e),t.terminate.call(t,e)},postMsgToAppService:function(e,t){try{!1!==t&&(e="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(e):WeixinNativeBuffer.packPostMessage(e),e=JSON.stringify(e)),a.postMsgToAppService(e)}catch(e){console.error(e)}},postMsgToWorker:function(e,t,i){var r=h(e);try{!1!==i&&(t="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(t):WeixinNativeBuffer.packPostMessage(t),t=JSON.stringify(t)),r.postMsgToWorker(e,t)}catch(e){console.error(e)}},onWorkerMsg:function(e){o.push(e)},onWorkerCreated:function(e){l.push(e)},onAppServiceMsg:function(e){s.push(e)},onError:function(e){u.push(e)},onUnhandledRejection:function(e){c.push(e)},get WebAssembly(){return a.WebAssembly}};return i&&(y.appServiceMsgHandler=v.appServiceMsgHandler,y.workerMsgHandler=v.workerMsgHandler,y.errorHandler=v.errorHandler,y.__workerId__=v.__workerId__),e.WeixinWorker=v,e.WeAppWorker=v,y}(this),__wxModule__;(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},t={};e.d(t,{default:()=>i});var i={requirePlugin:e=>{(()=>{if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")})(),(e=>{if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")})(e);var t=(e=>{var t=`__plugin__/${e.pluginId}`;return e.path&&(t+=`/${e.path}`),t})((e=>{var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);var i=t[1],r=t[2],n=(__wxConfig.plugins||__wxConfig.gamePlugins)[i];if(void 0===n)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:n.provider,version:"0",path:r}})(e)),i=requireMiniProgramFile(t);if(void 0===i)throw new Error(`Plugin "${t}" is not defined.`);return i}};__wxModule__=t.default})();var definePlugin=__wxModule__.definePlugin,requirePlugin=__wxModule__.requirePlugin,__webnode__;(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{define:()=>a,require:()=>d,requireOnce:()=>h});var i=globalThis,r={},n={};function a(e,t){var i;if(null!==(i=r[e])&&void 0!==i&&i.factory){var n=r[e],a=t.toString();n.factoryString||(n.factoryString=n.factory.toString()),a!==n.factoryString&&(r[e]={status:1,factory:t,factoryString:a})}else r[e]={status:1,factory:t}}var o=e=>{if(e&&__wxConfig.subPackages)for(var t=0,i=__wxConfig.subPackages.length;t<i;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},s=e=>{for(var t=[],i=e.split("/"),r=0,n=i.length;r<n;++r){var a=i[r];if(""!==a&&"."!==a)if(".."===a){if(0===t.length){t=null;break}t.pop()}else r+1<n&&".."===i[r+1]?r++:t.push(a)}return t},l=e=>{var t=s(e+"/index.js").join("/");return r[t]?t:(t=s(e).join("/"),/\.js$/.test(t)||(t+=".js"),r[t]?t:"")},u=["wx0354ba48aadc0ab2","wxfa43a4a7041a84de"];var c=e=>{var t=(e=>{var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"})(e),i=function(i,n){if("string"!=typeof i)throw new Error("require args must be a string");var a=s(t+"/"+i);if("/__wx__/private-api"===i&&(a=s(i)),!a)throw new Error("can not find module : "+i);try{var u=a.join("/");u=((e,t,i)=>{var n=e;if(/\.js$/.test(n)||(n+=".js"),"string"==typeof n&&r[n])return n;var a=s(t);if(!a)throw new Error("can not find module : "+i);for(var o,u,c=e.substring(a.join("/").length);a.length&&(u=a.join("/")+"/miniprogram_npm"+c,!(o=l(u)));)a.pop();return o||(c="/"===c[0]?c:"/"+c,o=l(u="miniprogram_npm"+c)),o||e})(u,t,i);var c=e=>"functional-pages"===s(e)[0];if(c(u)!==c(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+i+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages&&void 0===n){var h=o(u),p=o(e);h&&h!==p&&console.warn(`Requires "${i}" from "${e}" without a callback may fail in production, since they are in different subPackages`)}return d(u,void 0,n)}catch(e){throw e}};return i.async=e=>new Promise((t=>i(e,t))),i};function d(e,t,a){if(void 0===t&&(t=!0),"string"!=typeof e)throw new Error("require args must be a string");var o=r[e];if(!o){var s=-1===e.indexOf("/")?e+"/index.js":e;/\.js$/.test(s="miniprogram_npm/"+s)||(s+=".js"),o=r[s]}if(e.endsWith(".js")||(e+=".js"),!o&&"devtools"!==__wxConfig.platform&&void 0!==__subContextEngine__){var l="/"+e.substr(0,e.length-3)+".appservice.js",h={__wxRoute:i.__wxRoute,__wxAppCurrentFile__:i.__wxAppCurrentFile__,__wxRouteBegin:i.__wxRouteBegin};__subContextEngine__.loadJsFiles([l]),(e=>{i.__wxRoute=e.__wxRoute,i.__wxAppCurrentFile__=e.__wxAppCurrentFile__,i.__wxRouteBegin=e.__wxRouteBegin})(h),o=r[e]}if("function"!=typeof a){if(!o)throw new Error('module "'+e+'" is not defined');var p={exports:{}},f=o.factory;if(!t||n[e])return delete o.exports,o.status=1,n[e]=!0,f&&f(c(e),p,p.exports),p.exports;if(1===o.status){var g;o.exports=p.exports,o.status=2;try{f&&(g=f(c(e),p,p.exports))}catch(e){throw o.status=1,e}o.exports=void 0!==p.exports?p.exports:g}return o.exports}o?setTimeout((()=>a(d(e)))):function(e,t){var i="__APP__"===e;"/"!==e.slice(-1)&&(e+="/"),"devtools"===__wxConfig.platform?(wxNativeConsole.info("[WebNode] injectSubPackages: "+e),WeixinJSBridge.invoke("injectSubPackages",{subPackages:[e]},t)):(wxNativeConsole.info("[WebNode] loadSubpackage: "+e),__appServiceSDK__.loadSubpackage({name:e,success(){var r=__wxConfig.subPackages.find((t=>t.root===e)),n=Object.keys(r.plugins||{}).map((e=>{var t=r.plugins[e].provider,i="__plugin__/"+t;return{plugin_id:t,prefix_path:u.includes(t)?null:i}}));__subContextEngine__.injectEntryFile(i?"":e,n),t()}}))}((e=>{var t,i=null===(t=__wxConfig)||void 0===t?void 0:t.subPackages;i||(i=[]);for(var r=0;r<i.length;++r){var n=i[r].root||"";if(n&&"/"!==n.slice(-1)&&(n+="/"),e.slice(0,n.length)===n)return n}return"__APP__"})(e),(()=>a(d(e))))}function h(e){return d(e,!1)}i.__modules__=r,__webnode__=t})();var defineMiniProgramFile=globalThis.define=__webnode__.define,requireMiniProgramFile=globalThis.require=__webnode__.require,JSContext,Protect,__cloudSDK__,__subContextEngine__,Safeway;globalThis.requireOnce=__webnode__.requireOnce,(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};e.d(t,{default:()=>W});var i=Object.prototype.toString,r=Object.getPrototypeOf,n=Object.getOwnPropertyNames,a=Object.getOwnPropertyDescriptor,o=Object.defineProperty,s=e=>i.call(e).split(" ")[1].split("]")[0],l=["constructor","__proto__","__defineGetter__","__defineSetter__"],u="undefined"!=typeof WeakMap?new WeakMap:{},c="undefined"!=typeof WeakMap?new WeakMap:{},d=function(e,t=!1){var i=s(e);return"String"===i||"Number"===i||"Boolean"===i?e.valueOf():"Object"===i?new _(e):"Array"===i?function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];t.push(d(r))}return t}(e):"Function"===i?function(e,t=!1){var i=c.get(e);return void 0!==i||(i=function(...i){for(var r=0;r<i.length;r++){var n=i[r];i[r]=d(n)}var a=t?u.get(this):void 0,o=e.call(a,...i);return d(o)},c.set(e,i)),i}(e,t):"Undefined"!==i&&"Null"===i?null:void 0},h=function(e){return function(){var t=u.get(this);if(void 0!==t){if(null===t)return null;var i=t[e];return d(i,!0)}}},p=function(e){return function(t){var i=u.get(this);if(void 0!==i)return null===i?null:void(i[e]=d(t))}},f=e=>{for(var t=0;t<l.length;t++){if(l[t]===e)return!0}return!1},g=function(){for(var e=(e=>{for(var t=[],i=function(e){n(e).forEach((i=>{var r=a(e,i);void 0!==r&&(r.name=i,t.push(r))}))},o=e;o;o=r(o))i(o);return t})(u.get(this)),t=0;t<e.length;t++){var i=e[t],s=i.name;f(s)||(s in this||(delete i.value,delete i.writable,o(this,s,Object.assign(i,{get:h(s),set:p(s)}))))}};class _{constructor(e){u.set(this,e),g.call(this)}}var m,v,y,A,b,E,w,T=_,C={},S={},I=[],x=0,P=[],D=(e,t,i)=>{if(void 0!==t&&void 0!==e&&e===m){var r=void 0!==i?i:++x;return S[r]=t,I.push(r),P.forEach((e=>{"function"==typeof e&&e(r)})),r}},R=(e,t,i,r)=>{if(void 0!==e&&e===m){var n=(e=>{for(var t=I.length,i=0;i<t;i++){var r=I[i];if(S[r]===e)return r}})(t);if(void 0!==n){var a=C[i];"function"==typeof a&&a(r,n)}}},O={},k=(e,t,i,r=!1)=>{if(void 0!==e&&e===m){r||(t=t.valueOf(),i=new T(i));var n=O[t];return"function"==typeof n?n(i):void 0}},M={__init__:e=>{void 0===m&&void 0!==e&&((m=e).register=D,m.subscribeHandler=R,m.syncMethodHandler=k,v=m.alloc,y=m.create,A=m.destroy,b=m.evaluateScriptFile,E=m.loadJsFiles,delete m.alloc,delete m.create,delete m.destroy,delete m.evaluateScriptFile,delete m.loadJsFiles)},publish:(e,t={},i)=>{var r=s(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");i.forEach((i=>{var r=S[i];r&&r.subscribeHandler(m,e,t)}))},subscribe:(e,t)=>{C[e]=t},onRegister:e=>{P.push(e)},evaluateScriptFile:(e,t,i)=>b(e,t,i),batchLoadJsFiles:(e,t)=>{if(void 0===E||"function"!=typeof E)return"failed: loadJsFiles not supported";try{return E(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:(e,t)=>"function"==typeof v?v.call(m,e,t):-9999,create:(e,t)=>"function"==typeof y?y.call(m,e,t):-9999,destroy:(e,t)=>"function"==typeof A?A(e,t):-9999,isAsync:()=>m&&!0===m.async,supportAlloc:()=>"function"==typeof v,registerSyncMethod:(e,t)=>{O[e]=t}},N={},L={subscribeHandler:(e,t,i={})=>{if(void 0!==e&&e===w){t=t.valueOf();var r=N[t];"function"==typeof r&&r(i)}}};var B,F={__init__:(e,t)=>{void 0===w&&void 0!==e&&(w=e).register(e,L,t)},publish:(e,t={})=>{var i=s(t);if("Object"!==i&&"Undefined"!==i)throw new Error("params should be an object.");var r=e.valueOf(),n=t||{};w&&"function"==typeof w.subscribeHandler&&w.subscribeHandler(w,L,r,n)},subscribe:(e,t)=>{N[e]=t},invokeMainContextMethodSync:(e,t={},i=!1)=>{var r=s(t);if("Object"!==r&&"Undefined"!==r)throw new Error("params should be an object.");var n,a=e.valueOf();return n=i?t||{}:void 0===t?{}:t,w.syncMethodHandler(w,a,n,i)}};if(void 0===e.g)throw new Error("js-context: global is undefined");if(void 0!==e.g.WeixinJSContext){var U=Object.getPrototypeOf(e.g.WeixinJSContext)===Object.prototype;U||e.g.isMainContext&&(U=!0),(B=U?M:F).__init__(WeixinJSContext,e.g.WeixinJSContextId)}else B={alloc:()=>-9999,create:()=>-9999,destroy:()=>-9999,publish:()=>{},subscribe:()=>{},supportAlloc:()=>{}};delete B.__init__,delete e.g.WeixinJSContext,delete e.g.WeixinJSContextId;var W=B;JSContext=t.default})(),(()=>{try{WeixinWorker.createWXLibWorker("WASplashadWorker.js",{APIList:["shouldShowSplashAd","onSplashAdShow","onSplashAdHide","onSplashAdClose","onSplashAdWillLayout","onSplashAdButtonClicked","showSplashAd","closeSplashAd","showSplashAdMenu","insertTextView","updateTextView","removeTextView","insertImageView","updateImageView","removeImageView","animateCoverView","onTextViewClick","onImageViewClick","insertVideoPlayer","removeVideoPlayer","updateVideoPlayer","operateVideoPlayer","onVideoProgress","onVideoTimeUpdate","onVideoWaiting","splashAdFirstStepViewLayoutStateChange","splashAdAllViewLayoutStateChange","getInstallState","getDeviceInfo","getOAID","private_addContact","launchApplication","downloadAppInternal","navigateToMiniProgram","openADCanvas","private_openUrl","adOperateWXData","operateWXData","reportIDKey","reportKeyValue","adDataReport","getSystemInfo","accessSync","getPermissionBytes","readFileSync","statSync","reportRealtimeAction","measureText","openChannelsActivity","openChannelsLive","openChannelsUserProfile","openChannelsRewardedVideoAd"],type:"ad"})}catch(e){}})(),(()=>{var e={184:(e,t,i)=>{"use strict";i.r(t),i.d(t,{reportDeprecatedAPI:()=>r});var r=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},665:(e,t)=>{"use strict";var i=__wxConfig;t.Z=i},582:(e,t,i)=>{"use strict";i.r(t),i.d(t,{PLATFORM:()=>n,IS_DEVTOOLS:()=>a,IS_ANDROID:()=>o,IS_IOS:()=>s,IS_WINDOWS:()=>l,IS_MAC:()=>u,IS_MINA:()=>c,IS_PC:()=>d,debugEnabled:()=>h,HOST:()=>p,IS_HOST_SDK:()=>f,IS_HOST_WMPF:()=>g,IS_HOST_WECHAT:()=>_,IS_USE_NATIVE_MAP:()=>m,WK_RENDERER_H5:()=>v});var r=i(665),n=r.Z.platform,a="devtools"===r.Z.platform,o="android"===r.Z.platform,s="ios"===r.Z.platform,l="windows"===r.Z.platform,u="mac"===r.Z.platform,c="mina"===r.Z.platform,d=l||u;function h(){if(r.Z&&"debug"in r.Z&&void 0!==r.Z.debug)return!!r.Z.debug}var p=r.Z.host||{},f="SDK"===p.env,g="WMPF"===p.env,_="WeChat"===p.env,m=p.forceUseNativeMap||!1,v="object"==typeof window&&window&&window.__wkrenderer_h5},538:(e,t,i)=>{var{reportDeprecatedAPI:r}=i(184),{IS_IOS:n}=i(582);e.exports={hijack:function(e=!0,t=!0){if(void 0!==i.g.Function){var r={};function a(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return t?r:{}}}a.prototype=i.g.Function.prototype,i.g.Function.prototype.constructor=a,i.g.Function=a}var o=globalThis;if("undefined"!=typeof eval&&(n&&i.g.__isAppServiceRemoteDebugMode__||(globalThis.eval=void 0)),"undefined"!=typeof setTimeout&&e){var s=setTimeout;globalThis.setTimeout=function(e,t=0){if("function"!=typeof e)throw new TypeError(`setTimeout expects a function as first argument but got ${typeof e}.`);var i=__errorTracer__.surroundThirdByTryCatch(e,"at setTimeout callback function"),r=[].slice.call(arguments,2);return s((()=>{i.apply(o,r)}),t)};var l=setInterval;globalThis.setInterval=function(e,t){if("function"!=typeof e)throw new TypeError(`setInterval expects a function as first argument but got ${typeof e}.`);var i=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),r=[].slice.call(arguments,2);return l((()=>{i.apply(o,r)}),t)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((e=>{if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:()=>(r("globalWa"),t),set:t=>{Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}}}},585:()=>{if("undefined"==typeof navigator){try{new Function("\n      var GeneratorFunctionProto = Object.getPrototypeOf(function* () {});\n      Object.defineProperty(GeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncFunctionProto = Object.getPrototypeOf(async function () {});\n      Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}try{new Function("\n      var AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function* () {});\n      Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function () {} });\n    ")()}catch(e){}}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";i.r(r),i.d(r,{doNotWriteGlobalObjs:()=>u,doNotWriteObj:()=>c,globalEsObjs:()=>t,hijack:()=>d.hijack,hijackWasm:()=>d.hijackWasm,overwriteSetPrototypeOf:()=>l});i(585);var e=i(665),t=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==e.Z.JSEngineName&&t.push("Error");var n=globalThis,a=i.g.Object.setPrototypeOf,o=(e,t,i,r)=>{if(e&&t&&-1===t.indexOf("constructor")){var n;try{n=e[t]}catch(e){return}if(n){var s=Object.getOwnPropertyDescriptor(e,t);if(r||s||"__proto__"===t){s=s||{enumerable:!!r,configurable:!0};var l=typeof n;if(n&&("function"===l||"object"===l)&&(s.configurable&&Object.defineProperty(e,t,{get:()=>n,set(s){if("object"==typeof this||"function"==typeof this){if(this!==e)return o(this,t,i,!0),void(this[t]=s);if(n!==s)if(r)try{n=s,"__proto__"===t&&a(this,s)}catch(e){}else console.error(`[non-writable] modification of global variable '${i}' is not allowed when using plugins at app.json.`),"object"==typeof Reporter&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:i}),Reporter.reportIDKey({key:"global_objs_readonly"}))}},enumerable:s.enumerable,configurable:!!r&&s.configurable}),!r&&"__proto__"!==t)){var u=Object.getOwnPropertyNames(n);"object"==typeof n&&o(n,"__proto__",`${i}.__proto__`,!1);for(var c=0;c<u.length;++c){var d=u[c];o(n,d,`${i}.${d}`,!1)}}}}}},s=t.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),l=function(){Object.defineProperty(n.Object,"setPrototypeOf",{value:(e,t)=>(e.__proto__=t,e),configurable:!0})},u=function(){try{new Date;for(var e=0;e<s.length;++e){var t=s[e];n[t]&&o(n,t,t,!1)}new Date}catch(e){}},c=(e,t,i)=>o(e,t,i,!1),d=i(538)})(),Protect=r})(),(()=>{var e={781:e=>{"use strict";e.exports=function(e,t){var i=new Array(arguments.length-1),r=0,n=2,a=!0;for(;n<arguments.length;)i[r++]=arguments[n++];return new Promise((function(n,o){i[r]=function(e){if(a)if(a=!1,e)o(e);else{for(var t=new Array(arguments.length-1),i=0;i<t.length;)t[i++]=arguments[i];n.apply(null,t)}};try{e.apply(t||null,i)}catch(e){a&&(a=!1,o(e))}}))}},26:(e,t)=>{"use strict";var i=t;i.length=function(e){var t=e.length;if(!t)return 0;for(var i=0;--t%4>1&&"="===e.charAt(t);)++i;return Math.ceil(3*e.length)/4-i};for(var r=new Array(64),n=new Array(123),a=0;a<64;)n[r[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;i.encode=function(e,t,i){for(var n,a=null,o=[],s=0,l=0;t<i;){var u=e[t++];switch(l){case 0:o[s++]=r[u>>2],n=(3&u)<<4,l=1;break;case 1:o[s++]=r[n|u>>4],n=(15&u)<<2,l=2;break;case 2:o[s++]=r[n|u>>6],o[s++]=r[63&u],l=0}s>8191&&((a||(a=[])).push(String.fromCharCode.apply(String,o)),s=0)}return l&&(o[s++]=r[n],o[s++]=61,1===l&&(o[s++]=61)),a?(s&&a.push(String.fromCharCode.apply(String,o.slice(0,s))),a.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var o="invalid encoding";i.decode=function(e,t,i){for(var r,a=i,s=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&s>1)break;if(void 0===(u=n[u]))throw Error(o);switch(s){case 0:r=u,s=1;break;case 1:t[i++]=r<<2|(48&u)>>4,r=u,s=2;break;case 2:t[i++]=(15&r)<<4|(60&u)>>2,r=u,s=3;break;case 3:t[i++]=(3&r)<<6|u,s=0}}if(1===s)throw Error(o);return i-a},i.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},570:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,i){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:i||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var i=this._listeners[e],r=0;r<i.length;)i[r].fn===t?i.splice(r,1):++r;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var i=[],r=1;r<arguments.length;)i.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,i)}return this}},298:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),i=new Uint8Array(t.buffer),r=128===i[3];function n(e,r,n){t[0]=e,r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=i[3]}function a(e,r,n){t[0]=e,r[n]=i[3],r[n+1]=i[2],r[n+2]=i[1],r[n+3]=i[0]}function o(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],t[0]}function s(e,r){return i[3]=e[r],i[2]=e[r+1],i[1]=e[r+2],i[0]=e[r+3],t[0]}e.writeFloatLE=r?n:a,e.writeFloatBE=r?a:n,e.readFloatLE=r?o:s,e.readFloatBE=r?s:o}():function(){function t(e,t,i,r){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,i,r);else if(isNaN(t))e(2143289344,i,r);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,i,r);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,i,r);else{var a=Math.floor(Math.log(t)/Math.LN2);e((n<<31|a+127<<23|8388607&Math.round(t*Math.pow(2,-a)*8388608))>>>0,i,r)}}function o(e,t,i){var r=e(t,i),n=2*(r>>31)+1,a=r>>>23&255,o=8388607&r;return 255===a?o?NaN:n*(1/0):0===a?1401298464324817e-60*n*o:n*Math.pow(2,a-150)*(o+8388608)}e.writeFloatLE=t.bind(null,i),e.writeFloatBE=t.bind(null,r),e.readFloatLE=o.bind(null,n),e.readFloatBE=o.bind(null,a)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),i=new Uint8Array(t.buffer),r=128===i[7];function n(e,r,n){t[0]=e,r[n]=i[0],r[n+1]=i[1],r[n+2]=i[2],r[n+3]=i[3],r[n+4]=i[4],r[n+5]=i[5],r[n+6]=i[6],r[n+7]=i[7]}function a(e,r,n){t[0]=e,r[n]=i[7],r[n+1]=i[6],r[n+2]=i[5],r[n+3]=i[4],r[n+4]=i[3],r[n+5]=i[2],r[n+6]=i[1],r[n+7]=i[0]}function o(e,r){return i[0]=e[r],i[1]=e[r+1],i[2]=e[r+2],i[3]=e[r+3],i[4]=e[r+4],i[5]=e[r+5],i[6]=e[r+6],i[7]=e[r+7],t[0]}function s(e,r){return i[7]=e[r],i[6]=e[r+1],i[5]=e[r+2],i[4]=e[r+3],i[3]=e[r+4],i[2]=e[r+5],i[1]=e[r+6],i[0]=e[r+7],t[0]}e.writeDoubleLE=r?n:a,e.writeDoubleBE=r?a:n,e.readDoubleLE=r?o:s,e.readDoubleBE=r?s:o}():function(){function t(e,t,i,r,n,a){var o=r<0?1:0;if(o&&(r=-r),0===r)e(0,n,a+t),e(1/r>0?0:2147483648,n,a+i);else if(isNaN(r))e(0,n,a+t),e(2146959360,n,a+i);else if(r>17976931348623157e292)e(0,n,a+t),e((o<<31|2146435072)>>>0,n,a+i);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,n,a+t),e((o<<31|s/4294967296)>>>0,n,a+i);else{var l=Math.floor(Math.log(r)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=r*Math.pow(2,-l))>>>0,n,a+t),e((o<<31|l+1023<<20|1048576*s&1048575)>>>0,n,a+i)}}}function o(e,t,i,r,n){var a=e(r,n+t),o=e(r,n+i),s=2*(o>>31)+1,l=o>>>20&2047,u=4294967296*(1048575&o)+a;return 2047===l?u?NaN:s*(1/0):0===l?5e-324*s*u:s*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,i,0,4),e.writeDoubleBE=t.bind(null,r,4,0),e.readDoubleLE=o.bind(null,n,0,4),e.readDoubleBE=o.bind(null,a,4,0)}(),e}function i(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}function r(e,t,i){t[i]=e>>>24,t[i+1]=e>>>16&255,t[i+2]=e>>>8&255,t[i+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function a(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},116:e=>{"use strict";function t(e){try{var t=eval("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}e.exports=t},804:e=>{"use strict";e.exports=function(e,t,i){var r=i||8192,n=r>>>1,a=null,o=r;return function(i){if(i<1||i>n)return e(i);o+i>r&&(a=e(r),o=0);var s=t.call(a,o,o+=i);return 7&o&&(o=1+(7|o)),s}}},958:(e,t)=>{"use strict";var i=t;i.length=function(e){for(var t=0,i=0,r=0;r<e.length;++r)(i=e.charCodeAt(r))<128?t+=1:i<2048?t+=2:55296==(64512&i)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},i.read=function(e,t,i){if(i-t<1)return"";for(var r,n=null,a=[],o=0;t<i;)(r=e[t++])<128?a[o++]=r:r>191&&r<224?a[o++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,a[o++]=55296+(r>>10),a[o++]=56320+(1023&r)):a[o++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,a)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,a.slice(0,o))),n.join("")):String.fromCharCode.apply(String,a.slice(0,o))},i.write=function(e,t,i){for(var r,n,a=i,o=0;o<e.length;++o)(r=e.charCodeAt(o))<128?t[i++]=r:r<2048?(t[i++]=r>>6|192,t[i++]=63&r|128):55296==(64512&r)&&56320==(64512&(n=e.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,t[i++]=r>>18|240,t[i++]=r>>12&63|128,t[i++]=r>>6&63|128,t[i++]=63&r|128):(t[i++]=r>>12|224,t[i++]=r>>6&63|128,t[i++]=63&r|128);return i-a}},882:(e,t,i)=>{"use strict";var r=i(737),n=r.Reader,a=r.Writer,o=r.util,s=r.roots.default||(r.roots.default={});s.HTTPRequest=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.method="",e.prototype.header=o.emptyArray,e.prototype.body=o.newBuffer([]),e.prototype.callId="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.method&&Object.hasOwnProperty.call(e,"method")&&t.uint32(10).string(e.method),null!=e.header&&e.header.length)for(var i=0;i<e.header.length;++i)s.HTTPHeader.encode(e.header[i],t.uint32(18).fork()).ldelim();return null!=e.body&&Object.hasOwnProperty.call(e,"body")&&t.uint32(26).bytes(e.body),null!=e.callId&&Object.hasOwnProperty.call(e,"callId")&&t.uint32(34).string(e.callId),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new s.HTTPRequest;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:r.method=e.string();break;case 2:r.header&&r.header.length||(r.header=[]),r.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:r.body=e.bytes();break;case 4:r.callId=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.method&&e.hasOwnProperty("method")&&!o.isString(e.method))return"method: string expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var i=s.HTTPHeader.verify(e.header[t]);if(i)return"header."+i}}return null!=e.body&&e.hasOwnProperty("body")&&!(e.body&&"number"==typeof e.body.length||o.isString(e.body))?"body: buffer expected":null!=e.callId&&e.hasOwnProperty("callId")&&!o.isString(e.callId)?"callId: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPRequest)return e;var t=new s.HTTPRequest;if(null!=e.method&&(t.method=String(e.method)),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPRequest.header: array expected");t.header=[];for(var i=0;i<e.header.length;++i){if("object"!=typeof e.header[i])throw TypeError(".HTTPRequest.header: object expected");t.header[i]=s.HTTPHeader.fromObject(e.header[i])}}return null!=e.body&&("string"==typeof e.body?o.base64.decode(e.body,t.body=o.newBuffer(o.base64.length(e.body)),0):e.body.length&&(t.body=e.body)),null!=e.callId&&(t.callId=String(e.callId)),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.header=[]),t.defaults&&(i.method="",t.bytes===String?i.body="":(i.body=[],t.bytes!==Array&&(i.body=o.newBuffer(i.body))),i.callId=""),null!=e.method&&e.hasOwnProperty("method")&&(i.method=e.method),e.header&&e.header.length){i.header=[];for(var r=0;r<e.header.length;++r)i.header[r]=s.HTTPHeader.toObject(e.header[r],t)}return null!=e.body&&e.hasOwnProperty("body")&&(i.body=t.bytes===String?o.base64.encode(e.body,0,e.body.length):t.bytes===Array?Array.prototype.slice.call(e.body):e.body),null!=e.callId&&e.hasOwnProperty("callId")&&(i.callId=e.callId),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),s.HTTPResponse=function(){function e(e){if(this.header=[],e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.statusCode=0,e.prototype.header=o.emptyArray,e.prototype.bodyBuffer=o.newBuffer([]),e.prototype.bodyString="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=a.create()),null!=e.statusCode&&Object.hasOwnProperty.call(e,"statusCode")&&t.uint32(8).uint32(e.statusCode),null!=e.header&&e.header.length)for(var i=0;i<e.header.length;++i)s.HTTPHeader.encode(e.header[i],t.uint32(18).fork()).ldelim();return null!=e.bodyBuffer&&Object.hasOwnProperty.call(e,"bodyBuffer")&&t.uint32(26).bytes(e.bodyBuffer),null!=e.bodyString&&Object.hasOwnProperty.call(e,"bodyString")&&t.uint32(34).string(e.bodyString),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new s.HTTPResponse;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:r.statusCode=e.uint32();break;case 2:r.header&&r.header.length||(r.header=[]),r.header.push(s.HTTPHeader.decode(e,e.uint32()));break;case 3:r.bodyBuffer=e.bytes();break;case 4:r.bodyString=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){if("object"!=typeof e||null===e)return"object expected";if(null!=e.statusCode&&e.hasOwnProperty("statusCode")&&!o.isInteger(e.statusCode))return"statusCode: integer expected";if(null!=e.header&&e.hasOwnProperty("header")){if(!Array.isArray(e.header))return"header: array expected";for(var t=0;t<e.header.length;++t){var i=s.HTTPHeader.verify(e.header[t]);if(i)return"header."+i}}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&!(e.bodyBuffer&&"number"==typeof e.bodyBuffer.length||o.isString(e.bodyBuffer))?"bodyBuffer: buffer expected":null!=e.bodyString&&e.hasOwnProperty("bodyString")&&!o.isString(e.bodyString)?"bodyString: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPResponse)return e;var t=new s.HTTPResponse;if(null!=e.statusCode&&(t.statusCode=e.statusCode>>>0),e.header){if(!Array.isArray(e.header))throw TypeError(".HTTPResponse.header: array expected");t.header=[];for(var i=0;i<e.header.length;++i){if("object"!=typeof e.header[i])throw TypeError(".HTTPResponse.header: object expected");t.header[i]=s.HTTPHeader.fromObject(e.header[i])}}return null!=e.bodyBuffer&&("string"==typeof e.bodyBuffer?o.base64.decode(e.bodyBuffer,t.bodyBuffer=o.newBuffer(o.base64.length(e.bodyBuffer)),0):e.bodyBuffer.length&&(t.bodyBuffer=e.bodyBuffer)),null!=e.bodyString&&(t.bodyString=String(e.bodyString)),t},e.toObject=function(e,t){t||(t={});var i={};if((t.arrays||t.defaults)&&(i.header=[]),t.defaults&&(i.statusCode=0,t.bytes===String?i.bodyBuffer="":(i.bodyBuffer=[],t.bytes!==Array&&(i.bodyBuffer=o.newBuffer(i.bodyBuffer))),i.bodyString=""),null!=e.statusCode&&e.hasOwnProperty("statusCode")&&(i.statusCode=e.statusCode),e.header&&e.header.length){i.header=[];for(var r=0;r<e.header.length;++r)i.header[r]=s.HTTPHeader.toObject(e.header[r],t)}return null!=e.bodyBuffer&&e.hasOwnProperty("bodyBuffer")&&(i.bodyBuffer=t.bytes===String?o.base64.encode(e.bodyBuffer,0,e.bodyBuffer.length):t.bytes===Array?Array.prototype.slice.call(e.bodyBuffer):e.bodyBuffer),null!=e.bodyString&&e.hasOwnProperty("bodyString")&&(i.bodyString=e.bodyString),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),s.HTTPHeader=function(){function e(e){if(e)for(var t=Object.keys(e),i=0;i<t.length;++i)null!=e[t[i]]&&(this[t[i]]=e[t[i]])}return e.prototype.key="",e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=a.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.encodeDelimited=function(e,t){return this.encode(e,t).ldelim()},e.decode=function(e,t){e instanceof n||(e=n.create(e));for(var i=void 0===t?e.len:e.pos+t,r=new s.HTTPHeader;e.pos<i;){var a=e.uint32();switch(a>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&a)}}return r},e.decodeDelimited=function(e){return e instanceof n||(e=new n(e)),this.decode(e,e.uint32())},e.verify=function(e){return"object"!=typeof e||null===e?"object expected":null!=e.key&&e.hasOwnProperty("key")&&!o.isString(e.key)?"key: string expected":null!=e.value&&e.hasOwnProperty("value")&&!o.isString(e.value)?"value: string expected":null},e.fromObject=function(e){if(e instanceof s.HTTPHeader)return e;var t=new s.HTTPHeader;return null!=e.key&&(t.key=String(e.key)),null!=e.value&&(t.value=String(e.value)),t},e.toObject=function(e,t){t||(t={});var i={};return t.defaults&&(i.key="",i.value=""),null!=e.key&&e.hasOwnProperty("key")&&(i.key=e.key),null!=e.value&&e.hasOwnProperty("value")&&(i.value=e.value),i},e.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},e}(),e.exports=s},121:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AES_CBC:()=>p});"undefined"!=typeof Float64Array?Float64Array:Float32Array;function r(e){return"number"==typeof e}function n(e){return e instanceof Uint8Array}function a(e,t,i){var r=t?t.byteLength:i||65536;if(4095&r||r<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return t=t||new e(new ArrayBuffer(r))}function o(e,t,i,r,n){var a=e.length-t,o=a<n?a:n;return e.set(i.subarray(r,r+o),t),o}var s=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),e})(),l=(()=>{function e(){var e=Error.apply(this,arguments);this.message=e.message,this.stack=e.stack}return e.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),e})(),u=(()=>{var e,t,i=!1;function r(i,r){var n=e[(t[i]+t[r])%255];return 0!==i&&0!==r||(n=0),n}var n,a,o,s;function l(){function l(i){var r,n,a;for(n=a=function(i){var r=e[255-t[i]];return 0===i&&(r=0),r}(i),r=0;r<4;r++)a^=n=255&(n<<1|n>>>7);return a^=99}i||function(){e=[],t=[];var r,n,a=1;for(r=0;r<255;r++)e[r]=a,n=128&a,a<<=1,a&=255,128===n&&(a^=27),a^=e[r],t[e[r]]=r;e[255]=e[0],t[0]=0,i=!0}(),n=[],a=[],o=[[],[],[],[]],s=[[],[],[],[]];for(var u=0;u<256;u++){var c=l(u);n[u]=c,a[c]=u,o[0][u]=r(2,c)<<24|c<<16|c<<8|r(3,c),s[0][c]=r(14,u)<<24|r(9,u)<<16|r(13,u)<<8|r(11,u);for(var d=1;d<4;d++)o[d][u]=o[d-1][u]>>>8|o[d-1][u]<<24,s[d][c]=s[d-1][c]>>>8|s[d-1][c]<<24}}var u=function(e,t){l();var i=new Uint32Array(t);i.set(n,512),i.set(a,768);for(var r=0;r<4;r++)i.set(o[r],4096+1024*r>>2),i.set(s[r],8192+1024*r>>2);var u=function(e,t,i){"use asm";var r=0,n=0,a=0,o=0,s=0,l=0,u=0,c=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0,v=0,y=0,A=0,b=0,E=0,w=0;var T=new e.Uint32Array(i),C=new e.Uint8Array(i);function S(e,t,i,s,l,u,c,d){e=e|0;t=t|0;i=i|0;s=s|0;l=l|0;u=u|0;c=c|0;d=d|0;var h=0,p=0,f=0,g=0,_=0,m=0,v=0,y=0;h=i|0x400,p=i|0x800,f=i|0xc00;l=l^T[(e|0)>>2],u=u^T[(e|4)>>2],c=c^T[(e|8)>>2],d=d^T[(e|12)>>2];for(y=16;(y|0)<=s<<4;y=y+16|0){g=T[(i|l>>22&1020)>>2]^T[(h|u>>14&1020)>>2]^T[(p|c>>6&1020)>>2]^T[(f|d<<2&1020)>>2]^T[(e|y|0)>>2],_=T[(i|u>>22&1020)>>2]^T[(h|c>>14&1020)>>2]^T[(p|d>>6&1020)>>2]^T[(f|l<<2&1020)>>2]^T[(e|y|4)>>2],m=T[(i|c>>22&1020)>>2]^T[(h|d>>14&1020)>>2]^T[(p|l>>6&1020)>>2]^T[(f|u<<2&1020)>>2]^T[(e|y|8)>>2],v=T[(i|d>>22&1020)>>2]^T[(h|l>>14&1020)>>2]^T[(p|u>>6&1020)>>2]^T[(f|c<<2&1020)>>2]^T[(e|y|12)>>2];l=g,u=_,c=m,d=v}r=T[(t|l>>22&1020)>>2]<<24^T[(t|u>>14&1020)>>2]<<16^T[(t|c>>6&1020)>>2]<<8^T[(t|d<<2&1020)>>2]^T[(e|y|0)>>2],n=T[(t|u>>22&1020)>>2]<<24^T[(t|c>>14&1020)>>2]<<16^T[(t|d>>6&1020)>>2]<<8^T[(t|l<<2&1020)>>2]^T[(e|y|4)>>2],a=T[(t|c>>22&1020)>>2]<<24^T[(t|d>>14&1020)>>2]<<16^T[(t|l>>6&1020)>>2]<<8^T[(t|u<<2&1020)>>2]^T[(e|y|8)>>2],o=T[(t|d>>22&1020)>>2]<<24^T[(t|l>>14&1020)>>2]<<16^T[(t|u>>6&1020)>>2]<<8^T[(t|c<<2&1020)>>2]^T[(e|y|12)>>2]}function I(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;S(0x0000,0x0800,0x1000,w,e,t,i,r)}function x(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var a=0;S(0x0400,0x0c00,0x2000,w,e,r,i,t);a=n,n=o,o=a}function P(e,t,i,d){e=e|0;t=t|0;i=i|0;d=d|0;S(0x0000,0x0800,0x1000,w,s^e,l^t,u^i,c^d);s=r,l=n,u=a,c=o}function D(e,t,i,d){e=e|0;t=t|0;i=i|0;d=d|0;var h=0;S(0x0400,0x0c00,0x2000,w,e,d,i,t);h=n,n=o,o=h;r=r^s,n=n^l,a=a^u,o=o^c;s=e,l=t,u=i,c=d}function R(e,t,i,d){e=e|0;t=t|0;i=i|0;d=d|0;S(0x0000,0x0800,0x1000,w,s,l,u,c);s=r=r^e,l=n=n^t,u=a=a^i,c=o=o^d}function O(e,t,i,d){e=e|0;t=t|0;i=i|0;d=d|0;S(0x0000,0x0800,0x1000,w,s,l,u,c);r=r^e,n=n^t,a=a^i,o=o^d;s=e,l=t,u=i,c=d}function k(e,t,i,d){e=e|0;t=t|0;i=i|0;d=d|0;S(0x0000,0x0800,0x1000,w,s,l,u,c);s=r,l=n,u=a,c=o;r=r^e,n=n^t,a=a^i,o=o^d}function M(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;S(0x0000,0x0800,0x1000,w,d,h,p,f);f=~v&f|v&f+1;p=~m&p|m&p+((f|0)==0);h=~_&h|_&h+((p|0)==0);d=~g&d|g&d+((h|0)==0);r=r^e;n=n^t;a=a^i;o=o^s}function N(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;var n=0,a=0,o=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0;e=e^s,t=t^l,i=i^u,r=r^c;n=y|0,a=A|0,o=b|0,d=E|0;for(;(_|0)<128;_=_+1|0){if(n>>>31){h=h^e,p=p^t,f=f^i,g=g^r}n=n<<1|a>>>31,a=a<<1|o>>>31,o=o<<1|d>>>31,d=d<<1;m=r&1;r=r>>>1|i<<31,i=i>>>1|t<<31,t=t>>>1|e<<31,e=e>>>1;if(m)e=e^0xe1000000}s=h,l=p,u=f,c=g}function L(e){e=e|0;w=e}function B(e,t,i,s){e=e|0;t=t|0;i=i|0;s=s|0;r=e,n=t,a=i,o=s}function F(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;s=e,l=t,u=i,c=r}function U(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;d=e,h=t,p=i,f=r}function W(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;g=e,_=t,m=i,v=r}function G(e,t,i,r){e=e|0;t=t|0;i=i|0;r=r|0;f=~v&f|v&r,p=~m&p|m&i,h=~_&h|_&t,d=~g&d|g&e}function V(e){e=e|0;if(e&15)return-1;C[e|0]=r>>>24,C[e|1]=r>>>16&255,C[e|2]=r>>>8&255,C[e|3]=r&255,C[e|4]=n>>>24,C[e|5]=n>>>16&255,C[e|6]=n>>>8&255,C[e|7]=n&255,C[e|8]=a>>>24,C[e|9]=a>>>16&255,C[e|10]=a>>>8&255,C[e|11]=a&255,C[e|12]=o>>>24,C[e|13]=o>>>16&255,C[e|14]=o>>>8&255,C[e|15]=o&255;return 16}function j(e){e=e|0;if(e&15)return-1;C[e|0]=s>>>24,C[e|1]=s>>>16&255,C[e|2]=s>>>8&255,C[e|3]=s&255,C[e|4]=l>>>24,C[e|5]=l>>>16&255,C[e|6]=l>>>8&255,C[e|7]=l&255,C[e|8]=u>>>24,C[e|9]=u>>>16&255,C[e|10]=u>>>8&255,C[e|11]=u&255,C[e|12]=c>>>24,C[e|13]=c>>>16&255,C[e|14]=c>>>8&255,C[e|15]=c&255;return 16}function H(){I(0,0,0,0);y=r,A=n,b=a,E=o}function z(e,t,i){e=e|0;t=t|0;i=i|0;var s=0;if(t&15)return-1;while((i|0)>=16){$[e&7](C[t|0]<<24|C[t|1]<<16|C[t|2]<<8|C[t|3],C[t|4]<<24|C[t|5]<<16|C[t|6]<<8|C[t|7],C[t|8]<<24|C[t|9]<<16|C[t|10]<<8|C[t|11],C[t|12]<<24|C[t|13]<<16|C[t|14]<<8|C[t|15]);C[t|0]=r>>>24,C[t|1]=r>>>16&255,C[t|2]=r>>>8&255,C[t|3]=r&255,C[t|4]=n>>>24,C[t|5]=n>>>16&255,C[t|6]=n>>>8&255,C[t|7]=n&255,C[t|8]=a>>>24,C[t|9]=a>>>16&255,C[t|10]=a>>>8&255,C[t|11]=a&255,C[t|12]=o>>>24,C[t|13]=o>>>16&255,C[t|14]=o>>>8&255,C[t|15]=o&255;s=s+16|0,t=t+16|0,i=i-16|0}return s|0}function Y(e,t,i){e=e|0;t=t|0;i=i|0;var r=0;if(t&15)return-1;while((i|0)>=16){q[e&1](C[t|0]<<24|C[t|1]<<16|C[t|2]<<8|C[t|3],C[t|4]<<24|C[t|5]<<16|C[t|6]<<8|C[t|7],C[t|8]<<24|C[t|9]<<16|C[t|10]<<8|C[t|11],C[t|12]<<24|C[t|13]<<16|C[t|14]<<8|C[t|15]);r=r+16|0,t=t+16|0,i=i-16|0}return r|0}var $=[I,x,P,D,R,O,k,M];var q=[P,N];return{set_rounds:L,set_state:B,set_iv:F,set_nonce:U,set_mask:W,set_counter:G,get_state:V,get_iv:j,gcm_init:H,cipher:z,mac:Y}}({Uint8Array:Uint8Array,Uint32Array:Uint32Array},e,t);return u.set_key=function(e,t,r,a,o,l,c,d,h){var p=i.subarray(0,60),f=i.subarray(256,316);p.set([t,r,a,o,l,c,d,h]);for(var g=e,_=1;g<4*e+28;g++){var m=p[g-1];(g%e==0||8===e&&g%e==4)&&(m=n[m>>>24]<<24^n[m>>>16&255]<<16^n[m>>>8&255]<<8^n[255&m]),g%e==0&&(m=m<<8^m>>>24^_<<24,_=_<<1^(128&_?27:0)),p[g]=p[g-e]^m}for(var v=0;v<g;v+=4)for(var y=0;y<4;y++){m=p[g-(4+v)+(4-y)%4];f[v+y]=v<4||v>=g-4?m:s[0][n[m>>>24]]^s[1][n[m>>>16&255]]^s[2][n[m>>>8&255]]^s[3][n[255&m]]}u.set_rounds(e+5)},u};return u.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},u.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},u.MAC={CBC:0,GCM:1},u.HEAP_DATA=16384,u})(),c=new Uint8Array(1048576),d=(()=>u(null,c.buffer))();class h{constructor(e,t,i,r,n){this.nonce=null,this.counter=0,this.counterSize=0,this.heap=a(Uint8Array,r).subarray(u.HEAP_DATA),this.asm=n||u(null,this.heap.buffer),this.mode=null,this.key=null,this.AES_reset(e,t,i)}AES_set_key(e){if(void 0!==e){if(!n(e))throw new TypeError("unexpected key type");var t=e.length;if(16!==t&&24!==t&&32!==t)throw new s("illegal key size");var i=new DataView(e.buffer,e.byteOffset,e.byteLength);this.asm.set_key(t>>2,i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12),t>16?i.getUint32(16):0,t>16?i.getUint32(20):0,t>24?i.getUint32(24):0,t>24?i.getUint32(28):0),this.key=e}else if(!this.key)throw new Error("key is required")}AES_CTR_set_options(e,t,i){if(void 0!==i){if(i<8||i>48)throw new s("illegal counter size");this.counterSize=i;var a=Math.pow(2,i)-1;this.asm.set_mask(0,0,a/4294967296|0,0|a)}else this.counterSize=i=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===e)throw new Error("nonce is required");if(!n(e))throw new TypeError("unexpected nonce type");var o=e.length;if(!o||o>16)throw new s("illegal nonce size");this.nonce=e;var l=new DataView(new ArrayBuffer(16));if(new Uint8Array(l.buffer).set(e),this.asm.set_nonce(l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)),void 0!==t){if(!r(t))throw new TypeError("unexpected counter type");if(t<0||t>=Math.pow(2,i))throw new s("illegal counter value");this.counter=t,this.asm.set_counter(0,0,t/4294967296|0,0|t)}else this.counter=0}AES_set_iv(e){if(void 0!==e){if(!n(e))throw new TypeError("unexpected iv type");if(16!==e.length)throw new s("illegal iv size");var t=new DataView(e.buffer,e.byteOffset,e.byteLength);this.iv=e,this.asm.set_iv(t.getUint32(0),t.getUint32(4),t.getUint32(8),t.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}AES_set_padding(e){this.padding=void 0===e||!!e}AES_reset(e,t,i){return this.result=null,this.pos=0,this.len=0,this.AES_set_key(e),this.AES_set_iv(t),this.AES_set_padding(i),this}AES_Encrypt_process(e){if(!n(e))throw new TypeError("data isn't of expected type");for(var t=this.asm,i=this.heap,r=u.ENC[this.mode],a=u.HEAP_DATA,s=this.pos,l=this.len,c=0,d=e.length||0,h=0,p=0,f=new Uint8Array(l+d&-16);d>0;)l+=p=o(i,s+l,e,c,d),c+=p,d-=p,(p=t.cipher(r,a+s,l))&&f.set(i.subarray(s,s+p),h),h+=p,p<l?(s+=p,l-=p):(s=0,l=0);return this.result=f,this.pos=s,this.len=l,this}AES_Encrypt_finish(e){var t=null,i=0;void 0!==e&&(i=(t=this.AES_Encrypt_process(e).result).length);var r=this.asm,n=this.heap,a=u.ENC[this.mode],o=u.HEAP_DATA,l=this.pos,c=this.len,d=16-c%16,h=c;if(this.hasOwnProperty("padding")){if(this.padding){for(var p=0;p<d;++p)n[l+c+p]=d;h=c+=d}else if(c%16)throw new s("data length must be a multiple of the block size")}else c+=d;var f=new Uint8Array(i+h);return i&&f.set(t),c&&r.cipher(a,o+l,c),h&&f.set(n.subarray(l,l+h),i),this.result=f,this.pos=0,this.len=0,this}AES_Decrypt_process(e){if(!n(e))throw new TypeError("data isn't of expected type");var t=this.asm,i=this.heap,r=u.DEC[this.mode],a=u.HEAP_DATA,s=this.pos,l=this.len,c=0,d=e.length||0,h=0,p=l+d&-16,f=0,g=0;this.padding&&(p-=f=l+d-p||16);for(var _=new Uint8Array(p);d>0;)l+=g=o(i,s+l,e,c,d),c+=g,d-=g,(g=t.cipher(r,a+s,l-(d?0:f)))&&_.set(i.subarray(s,s+g),h),h+=g,g<l?(s+=g,l-=g):(s=0,l=0);return this.result=_,this.pos=s,this.len=l,this}AES_Decrypt_finish(e){var t=null,i=0;void 0!==e&&(i=(t=this.AES_Decrypt_process(e).result).length);var r=this.asm,n=this.heap,a=u.DEC[this.mode],o=u.HEAP_DATA,c=this.pos,d=this.len,h=d;if(d>0){if(d%16){if(this.hasOwnProperty("padding"))throw new s("data length must be a multiple of the block size");d+=16-d%16}if(r.cipher(a,o+c,d),this.hasOwnProperty("padding")&&this.padding){var p=n[c+h-1];if(p<1||p>16||p>h)throw new l("bad padding");for(var f=0,g=p;g>1;g--)f|=p^n[c+h-g];if(f)throw new l("bad padding");h-=p}}var _=new Uint8Array(i+h);return i>0&&_.set(t),h>0&&_.set(n.subarray(c,c+h),i),this.result=_,this.pos=0,this.len=0,this}}var p=(()=>{class e extends h{constructor(e,t=null,i=!0,r,n){super(e,t,i,r,n),this.mode="CBC",this.BLOCK_SIZE=16}encrypt(e){return this.AES_Encrypt_finish(e)}decrypt(e){return this.AES_Decrypt_finish(e)}}return e.encrypt=f,e.decrypt=g,e})();function f(e,t,i,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new p(t,r,i,c,d).encrypt(e).result}function g(e,t,i,r){if(void 0===e)throw new SyntaxError("data required");if(void 0===t)throw new SyntaxError("key required");return new p(t,r,i,c,d).decrypt(e).result}"undefined"!=typeof console&&console;var _=Date.now,m=(Math.random,"undefined"!=typeof performance?performance:void 0),v="undefined"!=typeof crypto?crypto:"undefined"!=typeof msCrypto?msCrypto:void 0;void 0!==v&&v.getRandomValues;if(void 0!==m)(function(){return 1e3*m.now()|0});else{var y=1e3*_()|0;(function(){return 1e3*_()-y|0})}Uint32Array,Math},795:(e,t,i)=>{var r=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o=!1;function s(){o=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=e.length;t<i;++t)r[t]=e[t],n[e.charCodeAt(t)]=t;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63}function l(e,t,i){for(var n,a,o=[],s=t;s<i;s+=3)n=(e[s]<<16)+(e[s+1]<<8)+e[s+2],o.push(r[(a=n)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}function u(e){var t;o||s();for(var i=e.length,n=i%3,a="",u=[],c=16383,d=0,h=i-n;d<h;d+=c)u.push(l(e,d,d+c>h?h:d+c));return 1===n?(t=e[i-1],a+=r[t>>2],a+=r[t<<4&63],a+="=="):2===n&&(t=(e[i-2]<<8)+e[i-1],a+=r[t>>10],a+=r[t>>4&63],a+=r[t<<2&63],a+="="),u.push(a),u.join("")}function c(e,t,i,r,n){var a,o,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=i?n-1:0,h=i?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=u}return(p?-1:1)*o*Math.pow(2,a-r)}function d(e,t,i,r,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,d=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,n),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[i+p]=255&s,p+=f,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[i+p]=255&o,p+=f,o/=256,u-=8);e[i+p-f]|=128*g}var h={}.toString,p=Array.isArray||function(e){return"[object Array]"==h.call(e)};m.TYPED_ARRAY_SUPPORT=void 0===i.g.TYPED_ARRAY_SUPPORT||i.g.TYPED_ARRAY_SUPPORT;var f=g();function g(){return m.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function _(e,t){if(g()<t)throw new RangeError("Invalid typed array length");return m.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=m.prototype:(null===e&&(e=new m(t)),e.length=t),e}function m(e,t,i){if(!(m.TYPED_ARRAY_SUPPORT||this instanceof m))return new m(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return A(this,e)}return v(this,e,t,i)}function v(e,t,i,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r);m.TYPED_ARRAY_SUPPORT?(e=t).__proto__=m.prototype:e=b(e,t);return e}(e,t,i,r):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!m.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|T(t,i),n=(e=_(e,r)).write(t,i);n!==r&&(e=e.slice(0,n));return e}(e,t,i):function(e,t){if(w(t)){var i=0|E(t.length);return 0===(e=_(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?_(e,0):b(e,t);if("Buffer"===t.type&&p(t.data))return b(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function y(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function A(e,t){if(y(t),e=_(e,t<0?0:0|E(t)),!m.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function b(e,t){var i=t.length<0?0:0|E(t.length);e=_(e,i);for(var r=0;r<i;r+=1)e[r]=255&t[r];return e}function E(e){if(e>=g())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+g().toString(16)+" bytes");return 0|e}function w(e){return!(null==e||!e._isBuffer)}function T(e,t){if(w(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return X(e).length;default:if(r)return K(e).length;t=(""+t).toLowerCase(),r=!0}}function C(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return W(this,t,i);case"utf8":case"utf-8":return L(this,t,i);case"ascii":return F(this,t,i);case"latin1":case"binary":return U(this,t,i);case"base64":return N(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function S(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function I(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=m.from(t,r)),w(t))return 0===t.length?-1:x(e,t,i,r,n);if("number"==typeof t)return t&=255,m.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):x(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function x(e,t,i,r,n){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,i/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var c=-1;for(a=i;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(i+l>s&&(i=s-l),a=i;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){d=!1;break}if(d)return a}return-1}function P(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}function D(e,t,i,r){return J(K(t,e.length-i),e,i,r)}function R(e,t,i,r){return J(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function O(e,t,i,r){return R(e,t,i,r)}function k(e,t,i,r){return J(X(t),e,i,r)}function M(e,t,i,r){return J(function(e,t){for(var i,r,n,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(i=e.charCodeAt(o))>>8,n=i%256,a.push(n),a.push(r);return a}(t,e.length-i),e,i,r)}function N(e,t,i){return 0===t&&i===e.length?u(e):u(e.slice(t,i))}function L(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var a,o,s,l,u=e[n],c=null,d=u>239?4:u>223?3:u>191?2:1;if(n+d<=i)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[n+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[n+1],o=e[n+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[n+1],o=e[n+2],s=e[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=d}return function(e){var t=e.length;if(t<=B)return String.fromCharCode.apply(String,e);var i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=B));return i}(r)}m.poolSize=8192,m._augment=function(e){return e.__proto__=m.prototype,e},m.from=function(e,t,i){return v(null,e,t,i)},m.TYPED_ARRAY_SUPPORT&&(m.prototype.__proto__=Uint8Array.prototype,m.__proto__=Uint8Array),m.alloc=function(e,t,i){return function(e,t,i,r){return y(t),t<=0?_(e,t):void 0!==i?"string"==typeof r?_(e,t).fill(i,r):_(e,t).fill(i):_(e,t)}(null,e,t,i)},m.allocUnsafe=function(e){return A(null,e)},m.allocUnsafeSlow=function(e){return A(null,e)},m.isBuffer=ee,m.compare=function(e,t){if(!w(e)||!w(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,a=Math.min(i,r);n<a;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},m.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(e,t){if(!p(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return m.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=m.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var a=e[i];if(!w(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n),n+=a.length}return r},m.byteLength=T,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)S(this,t,t+1);return this},m.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)S(this,t,t+3),S(this,t+1,t+2);return this},m.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)S(this,t,t+7),S(this,t+1,t+6),S(this,t+2,t+5),S(this,t+3,t+4);return this},m.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):C.apply(this,arguments)},m.prototype.equals=function(e){if(!w(e))throw new TypeError("Argument must be a Buffer");return this===e||0===m.compare(this,e)},m.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},m.prototype.compare=function(e,t,i,r,n){if(!w(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,n),u=e.slice(t,i),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},m.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},m.prototype.indexOf=function(e,t,i){return I(this,e,t,i,!0)},m.prototype.lastIndexOf=function(e,t,i){return I(this,e,t,i,!1)},m.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return P(this,e,t,i);case"utf8":case"utf-8":return D(this,e,t,i);case"ascii":return R(this,e,t,i);case"latin1":case"binary":return O(this,e,t,i);case"base64":return k(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function F(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function U(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function W(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",a=t;a<i;++a)n+=Z(e[a]);return n}function G(e,t,i){for(var r=e.slice(t,i),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function V(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function j(e,t,i,r,n,a){if(!w(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function H(e,t,i,r){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function z(e,t,i,r){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(r?n:3-n)&255}function Y(e,t,i,r,n,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function $(e,t,i,r,n){return n||Y(e,0,i,4),d(e,t,i,r,23,4),i+4}function q(e,t,i,r,n){return n||Y(e,0,i,8),d(e,t,i,r,52,8),i+8}m.prototype.slice=function(e,t){var i,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),m.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=m.prototype;else{var n=t-e;i=new m(n,void 0);for(var a=0;a<n;++a)i[a]=this[a+e]}return i},m.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||V(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r},m.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||V(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},m.prototype.readUInt8=function(e,t){return t||V(e,1,this.length),this[e]},m.prototype.readUInt16LE=function(e,t){return t||V(e,2,this.length),this[e]|this[e+1]<<8},m.prototype.readUInt16BE=function(e,t){return t||V(e,2,this.length),this[e]<<8|this[e+1]},m.prototype.readUInt32LE=function(e,t){return t||V(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},m.prototype.readUInt32BE=function(e,t){return t||V(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},m.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||V(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},m.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||V(e,t,this.length);for(var r=t,n=1,a=this[e+--r];r>0&&(n*=256);)a+=this[e+--r]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},m.prototype.readInt8=function(e,t){return t||V(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},m.prototype.readInt16LE=function(e,t){t||V(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},m.prototype.readInt16BE=function(e,t){t||V(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},m.prototype.readInt32LE=function(e,t){return t||V(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},m.prototype.readInt32BE=function(e,t){return t||V(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},m.prototype.readFloatLE=function(e,t){return t||V(e,4,this.length),c(this,e,!0,23,4)},m.prototype.readFloatBE=function(e,t){return t||V(e,4,this.length),c(this,e,!1,23,4)},m.prototype.readDoubleLE=function(e,t){return t||V(e,8,this.length),c(this,e,!0,52,8)},m.prototype.readDoubleBE=function(e,t){return t||V(e,8,this.length),c(this,e,!1,52,8)},m.prototype.writeUIntLE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||j(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,a=0;for(this[t]=255&e;++a<i&&(n*=256);)this[t+a]=e/n&255;return t+i},m.prototype.writeUIntBE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||j(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+i},m.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,1,255,0),m.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},m.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},m.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},m.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):z(this,e,t,!0),t+4},m.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},m.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);j(this,e,t,i,n-1,-n)}var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},m.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);j(this,e,t,i,n-1,-n)}var a=i-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},m.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,1,127,-128),m.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},m.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):H(this,e,t,!0),t+2},m.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):H(this,e,t,!1),t+2},m.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,4,2147483647,-2147483648),m.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):z(this,e,t,!0),t+4},m.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||j(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),m.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):z(this,e,t,!1),t+4},m.prototype.writeFloatLE=function(e,t,i){return $(this,e,t,!0,i)},m.prototype.writeFloatBE=function(e,t,i){return $(this,e,t,!1,i)},m.prototype.writeDoubleLE=function(e,t,i){return q(this,e,t,!0,i)},m.prototype.writeDoubleBE=function(e,t,i){return q(this,e,t,!1,i)},m.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,a=r-i;if(this===e&&i<t&&t<r)for(n=a-1;n>=0;--n)e[n+t]=this[n+i];else if(a<1e3||!m.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},m.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var o=w(e)?e:K(new m(e,r).toString()),s=o.length;for(a=0;a<i-t;++a)this[a+t]=o[a%s]}return this};var Q=/[^+\/0-9A-Za-z-_]/g;function Z(e){return e<16?"0"+e.toString(16):e.toString(16)}function K(e,t){var i;t=t||1/0;for(var r=e.length,n=null,a=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function X(e){return function(e){var t,i,r,l,u,c;o||s();var d=e.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");u="="===e[d-2]?2:"="===e[d-1]?1:0,c=new a(3*d/4-u),r=u>0?d-4:d;var h=0;for(t=0,i=0;t<r;t+=4,i+=3)l=n[e.charCodeAt(t)]<<18|n[e.charCodeAt(t+1)]<<12|n[e.charCodeAt(t+2)]<<6|n[e.charCodeAt(t+3)],c[h++]=l>>16&255,c[h++]=l>>8&255,c[h++]=255&l;return 2===u?(l=n[e.charCodeAt(t)]<<2|n[e.charCodeAt(t+1)]>>4,c[h++]=255&l):1===u&&(l=n[e.charCodeAt(t)]<<10|n[e.charCodeAt(t+1)]<<4|n[e.charCodeAt(t+2)]>>2,c[h++]=l>>8&255,c[h++]=255&l),c}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function J(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}function ee(e){return null!=e&&(!!e._isBuffer||te(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&te(e.slice(0,0))}(e))}function te(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var ie=Object.freeze({INSPECT_MAX_BYTES:50,kMaxLength:f,Buffer:m,SlowBuffer:function(e){return+e!=e&&(e=0),m.alloc(+e)},isBuffer:ee});Map;var re=function(){function e(e,t,i){this.low=0|e,this.high=0|t,this.unsigned=!!i}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0}),e.isLong=t;var i={},r={};function n(e,t){var n,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=r[e])?a:(n=o(e,(0|e)<0?-1:0,!0),s&&(r[e]=n),n):(s=-128<=(e|=0)&&e<128)&&(a=i[e])?a:(n=o(e,e<0?-1:0,!1),s&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?g:f;if(t){if(e<0)return g;if(e>=d)return A}else{if(e<=-h)return b;if(e+1>=h)return y}return e<0?a(-e,t).neg():o(e%c|0,e/c|0,t)}function o(t,i,r){return new e(t,i,r)}e.fromInt=n,e.fromNumber=a,e.fromBits=o;var s=Math.pow;function l(e,t,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return f;if("number"==typeof t?(i=t,t=!1):t=!!t,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return l(e.substring(1),t,i).neg();for(var n=a(s(i,8)),o=f,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),d=parseInt(e.substring(u,u+c),i);if(c<8){var h=a(s(i,c));o=o.mul(h).add(a(d))}else o=(o=o.mul(n)).add(a(d))}return o.unsigned=t,o}function u(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):o(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.fromString=l,e.fromValue=u;var c=4294967296,d=c*c,h=d/2,p=n(1<<24),f=n(0);e.ZERO=f;var g=n(0,!0);e.UZERO=g;var _=n(1);e.ONE=_;var m=n(1,!0);e.UONE=m;var v=n(-1);e.NEG_ONE=v;var y=o(-1,2147483647,!1);e.MAX_VALUE=y;var A=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=A;var b=o(0,-2147483648,!1);e.MIN_VALUE=b;var E=e.prototype;return E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*c+(this.low>>>0):this.high*c+(this.low>>>0)},E.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(b)){var t=a(e),i=this.div(t),r=i.mul(t).sub(this);return i.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=a(s(e,6),this.unsigned),o=this,l="";;){var u=o.div(n),c=(o.sub(u.mul(n)).toInt()>>>0).toString(e);if((o=u).isZero())return c+l;for(;c.length<6;)c="0"+c;l=""+c+l}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(b)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&this.high<0},E.isPositive=function(){return this.unsigned||this.high>=0},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return t(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return this.comp(e)<0},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return this.comp(e)<=0},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return this.comp(e)>0},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return this.comp(e)>=0},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(t(e)||(e=u(e)),this.eq(e))return 0;var i=this.isNegative(),r=e.isNegative();return i&&!r?-1:!i&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(b)?b:this.not().add(_)},E.neg=E.negate,E.add=function(e){t(e)||(e=u(e));var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,a=65535&this.low,s=e.high>>>16,l=65535&e.high,c=e.low>>>16,d=0,h=0,p=0,f=0;return p+=(f+=a+(65535&e.low))>>>16,h+=(p+=n+c)>>>16,d+=(h+=r+l)>>>16,d+=i+s,o((p&=65535)<<16|(f&=65535),(d&=65535)<<16|(h&=65535),this.unsigned)},E.subtract=function(e){return t(e)||(e=u(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return f;if(t(e)||(e=u(e)),e.isZero())return f;if(this.eq(b))return e.isOdd()?b:f;if(e.eq(b))return this.isOdd()?b:f;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return a(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,n=this.low>>>16,s=65535&this.low,l=e.high>>>16,c=65535&e.high,d=e.low>>>16,h=65535&e.low,g=0,_=0,m=0,v=0;return m+=(v+=s*h)>>>16,_+=(m+=n*h)>>>16,m&=65535,_+=(m+=s*d)>>>16,g+=(_+=r*h)>>>16,_&=65535,g+=(_+=n*d)>>>16,_&=65535,g+=(_+=s*c)>>>16,g+=i*h+r*d+n*c+s*l,o((m&=65535)<<16|(v&=65535),(g&=65535)<<16|(_&=65535),this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(t(e)||(e=u(e)),e.isZero())throw Error("division by zero");var i,r,n;if(this.isZero())return this.unsigned?g:f;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return g;if(e.gt(this.shru(1)))return m;n=g}else{if(this.eq(b))return e.eq(_)||e.eq(v)?b:e.eq(b)?_:(i=this.shr(1).div(e).shl(1)).eq(f)?e.isNegative()?_:v:(r=this.sub(e.mul(i)),n=i.add(r.div(e)));if(e.eq(b))return this.unsigned?g:f;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=f}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(i)/Math.LN2),l=o<=48?1:s(2,o-48),c=a(i),d=c.mul(e);d.isNegative()||d.gt(r);)d=(c=a(i-=l,this.unsigned)).mul(e);c.isZero()&&(c=_),n=n.add(c),r=r.sub(d)}return n},E.div=E.divide,E.modulo=function(e){return t(e)||(e=u(e)),this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return o(~this.low,~this.high,this.unsigned)},E.and=function(e){return t(e)||(e=u(e)),o(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return t(e)||(e=u(e)),o(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return t(e)||(e=u(e)),o(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):o(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):o(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var i=this.high;return e<32?o(this.low>>>e|i<<32-e,i>>>e,this.unsigned):o(32===e?i:i>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},e.fromBytes=function(t,i,r){return r?e.fromBytesLE(t,i):e.fromBytesBE(t,i)},e.fromBytesLE=function(t,i){return new e(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,i)},e.fromBytesBE=function(t,i){return new e(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],i)},e.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},e.fromExtendedJSON=function(t,i){var r=e.fromString(t.$numberLong);return i&&i.relaxed?r.toNumber():r},Object.defineProperty(e.prototype,"_bsontype",{value:"Long"}),e}();function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ae(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,i){return t&&ae(e.prototype,t),i&&ae(e,i),e}var se=function(){function e(t){ne(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return oe(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,i){return i&&i.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Double"}),e}();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){return!t||"object"!==le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e,i){var r;return ne(this,t),r=re.isLong(e)?ue(this,ce(t).call(this,e.low,e.high,!0)):ue(this,ce(t).call(this,e,i,!0)),ue(r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),oe(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(re.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(re.fromNumber(e,!0))}},{key:"fromBits",value:function(e,i){return new t(e,i)}},{key:"fromString",value:function(e,i){return new t(re.fromString(e,i,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),Object.defineProperty(t.prototype,"_bsontype",{value:"Timestamp"}),t.MAX_VALUE=t.MAX_UNSIGNED_VALUE,t}(re),pe={};function fe(e){for(var t=new Uint8Array(e),i=0;i<e;++i)t[i]=Math.floor(256*Math.random());return t}var ge={normalizedFunctionString:function(e){return e.toString().replace("function(","function (")},randomBytes:function(){var e=fe;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)e=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{e=pe.randomBytes}catch(e){}null==e&&(e=fe)}return e}()};new Date;var _e=function(){function e(e,t){var i={seen:[],stylize:ve};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),we(t)?i.showHidden=t:t&&Me(i,t),Ie(i.showHidden)&&(i.showHidden=!1),Ie(i.depth)&&(i.depth=2),Ie(i.colors)&&(i.colors=!1),Ie(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=me),ye(i,e,i.depth)}return e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e}();function me(e,t){var i=_e.styles[t];return i?"["+_e.colors[i][0]+"m"+e+"["+_e.colors[i][1]+"m":e}function ve(e,t){return e}function ye(e,t,i){if(e.customInspect&&t&&Oe(t.inspect)&&t.inspect!==_e&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(i,e);return Se(r)||(r=ye(e,r,i)),r}var n=function(e,t){if(Ie(t))return e.stylize("undefined","undefined");if(Se(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(Ce(t))return e.stylize(""+t,"number");if(we(t))return e.stylize(""+t,"boolean");if(Te(t))return e.stylize("null","null")}(e,t);if(n)return n;var a=Object.keys(t),o=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),Re(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return Ae(t);if(0===a.length){if(Oe(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(xe(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(De(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Re(t))return Ae(t)}var l,u="",c=!1,d=["{","}"];(Ee(t)&&(c=!0,d=["[","]"]),Oe(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return xe(t)&&(u=" "+RegExp.prototype.toString.call(t)),De(t)&&(u=" "+Date.prototype.toUTCString.call(t)),Re(t)&&(u=" "+Ae(t)),0!==a.length||c&&0!=t.length?i<0?xe(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),l=c?function(e,t,i,r,n){for(var a=[],o=0,s=t.length;o<s;++o)Ne(t,String(o))?a.push(be(e,t,i,r,String(o),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(be(e,t,i,r,n,!0))})),a}(e,t,i,o,a):a.map((function(r){return be(e,t,i,o,r,c)})),e.seen.pop(),function(e,t,i){if(e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(l,u,d)):d[0]+u+d[1]}function Ae(e){return"["+Error.prototype.toString.call(e)+"]"}function be(e,t,i,r,n,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),Ne(r,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(s=Te(i)?ye(e,l.value,null):ye(e,l.value,i-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Ie(o)){if(a&&n.match(/^\d+$/))return s;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function Ee(e){return Array.isArray(e)}function we(e){return"boolean"==typeof e}function Te(e){return null===e}function Ce(e){return"number"==typeof e}function Se(e){return"string"==typeof e}function Ie(e){return void 0===e}function xe(e){return Pe(e)&&"[object RegExp]"===ke(e)}function Pe(e){return"object"===le(e)&&null!==e}function De(e){return Pe(e)&&"[object Date]"===ke(e)}function Re(e){return Pe(e)&&("[object Error]"===ke(e)||e instanceof Error)}function Oe(e){return"function"==typeof e}function ke(e){return Object.prototype.toString.call(e)}function Me(e,t){if(!t||!Pe(t))return e;for(var i=Object.keys(t),r=i.length;r--;)e[i[r]]=t[i[r]];return e}function Ne(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Le=_e,Be=function e(t,r){if(Ie(i.g.process))return function(){return e(t,r).apply(this,arguments)};var n=!1;return function(){return n||(console.error(r),n=!0),t.apply(this,arguments)}},Fe=(()=>ie.Buffer)(),Ue=Be,We=(0,ge.randomBytes)(5),Ge=new RegExp("^[0-9a-fA-F]{24}$"),Ve=function(){var e=!1;try{Fe&&Fe.from&&(e=!0)}catch(t){e=!1}return e}(),je=function(){for(var e=[],t=0;t<256;t++)e[t]=(t<=15?"0":"")+t.toString(16);return e}(),He=function(){for(var e=[],t=0;t<10;)e[48+t]=t++;for(;t<16;)e[55+t]=e[87+t]=t++;return e}(),ze=Fe;var Ye=function(){function e(t){if(ne(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var i=e.isValid(t);if(!i&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(i&&"string"==typeof t&&24===t.length&&Ve)return new e(Fe.from(t,"hex"));if(i&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return oe(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t,i,r,n="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof ze)return n=this.id.toString("hex"),e.cacheHexString&&(this.__id=n),n;for(var a=0;a<this.id.length;a++){var o=je[this.id.charCodeAt(a)];if("string"!=typeof o)throw t=this.id,r=void 0,r=t[i=a],new TypeError('ObjectId string "'.concat(t,'" contains invalid character "').concat(r,'" with character code (').concat(t.charCodeAt(i),"). All character codes for a non-hex string must be less than 256."));n+=o}return e.cacheHexString&&(this.__id=n),n}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof ze?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var i=e.getInc(),r=Fe.alloc(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=We[0],r[5]=We[1],r[6]=We[2],r[7]=We[3],r[8]=We[4],r[11]=255&i,r[10]=i>>8&255,r[9]=i>>16&255,r}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var i=Fe.from([0,0,0,0,0,0,0,0,0,0,0,0]);return i[3]=255&t,i[2]=t>>8&255,i[1]=t>>16&255,i[0]=t>>24&255,new e(i)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(Ve)return new e(Fe.from(t,"hex"));for(var i=new ze(12),r=0,n=0;n<24;)i[r++]=He[t.charCodeAt(n++)]<<4|He[t.charCodeAt(n++)];return new e(i)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&Ge.test(t):t instanceof e||(t instanceof ze&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&Ge.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e.get_inc=Ue((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.get_inc=Ue((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.getInc=Ue((function(){return e.getInc()}),"Please use the static `ObjectId.getInc()` instead"),e.prototype.generate=Ue((function(t){return e.generate(t)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(e.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.prototype[Le.custom||"inspect"]=e.prototype.toString,e.index=~~(16777215*Math.random()),Object.defineProperty(e.prototype,"_bsontype",{value:"ObjectID"}),e}();var $e=function(){function e(t,i){ne(this,e),this.pattern=t||"",this.options=i?i.split("").sort().join(""):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("The regular expression option [".concat(this.options[r],"] is not supported"))}return oe(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"BSONRegExp"}),e}(),qe=function(){function e(t){ne(this,e),this.value=t}return oe(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Symbol"}),e}(),Qe=function(){function e(t){ne(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return oe(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,i){return i&&i.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Int32"}),e}(),Ze=function(){function e(t,i){ne(this,e),this.code=t,this.scope=i}return oe(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"Code"}),e}(),Ke=(()=>ie.Buffer)(),Xe=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,Je=/^(\+|-)?(Infinity|inf)$/i,et=/^(\+|-)?NaN$/i,tt=6111,it=-6176,rt=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),nt=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),at=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),ot=/^([-+])?(\d+)?$/;function st(e){return!isNaN(parseInt(e,10))}function lt(e){var t=re.fromNumber(1e9),i=re.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:i};for(var r=0;r<=3;r++)i=(i=i.shiftLeft(32)).add(new re(e.parts[r],0)),e.parts[r]=i.div(t).low,i=i.modulo(t);return{quotient:e,rem:i}}function ut(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}var ct=function(){function e(e){this.bytes=e}e.fromString=function(t){var i,r=!1,n=!1,a=!1,o=0,s=0,l=0,u=0,c=0,d=[0],h=0,p=0,f=0,g=0,_=0,m=0,v=[0,0],y=[0,0],A=0;if(t.length>=7e3)throw new TypeError(t+" not a valid Decimal128 string");var b=t.match(Xe),E=t.match(Je),w=t.match(et);if(!b&&!E&&!w||0===t.length)throw new TypeError(t+" not a valid Decimal128 string");if(b){var T=b[2],C=b[4],S=b[5],I=b[6];C&&void 0===I&&ut(t,"missing exponent power"),C&&void 0===T&&ut(t,"missing exponent base"),void 0===C&&(S||I)&&ut(t,"missing e before exponent")}if("+"!==t[A]&&"-"!==t[A]||(r="-"===t[A++]),!st(t[A])&&"."!==t[A]){if("i"===t[A]||"I"===t[A])return new e(Ke.from(r?nt:at));if("N"===t[A])return new e(Ke.from(rt))}for(;st(t[A])||"."===t[A];)"."!==t[A]?(h<34&&("0"!==t[A]||a)&&(a||(c=s),a=!0,d[p++]=parseInt(t[A],10),h+=1),a&&(l+=1),n&&(u+=1),s+=1,A+=1):(n&&ut(t,"contains multiple periods"),n=!0,A+=1);if(n&&!s)throw new TypeError(t+" not a valid Decimal128 string");if("e"===t[A]||"E"===t[A]){var x=t.substr(++A).match(ot);if(!x||!x[2])return new e(Ke.from(rt));_=parseInt(x[0],10),A+=x[0].length}if(t[A])return new e(Ke.from(rt));if(f=0,h){if(g=h-1,1!==(o=l))for(;"0"===t[c+o-1];)o-=1}else f=0,g=0,d[0]=0,l=1,h=1,o=0;for(_<=u&&u-_>16384?_=it:_-=u;_>tt;){if((g+=1)-f>34){if(d.join("").match(/^0+$/)){_=tt;break}ut(t,"overflow")}_-=1}for(;_<it||h<l;){if(0===g&&o<h){_=it,o=0;break}if(h<l?l-=1:g-=1,_<tt)_+=1;else{if(d.join("").match(/^0+$/)){_=tt;break}ut(t,"overflow")}}if(g-f+1<o){var P=s;n&&(c+=1,P+=1),r&&(c+=1,P+=1);var D=parseInt(t[c+g+1],10),R=0;if(D>=5&&(R=1,5===D))for(R=d[g]%2==1,m=c+g+2;m<P;m++)if(parseInt(t[m],10)){R=1;break}if(R)for(var O=g;O>=0;O--)if(++d[O]>9&&(d[O]=0,0===O)){if(!(_<tt))return new e(Ke.from(r?nt:at));_+=1,d[O]=1}}if(v=re.fromNumber(0),y=re.fromNumber(0),0===o)v=re.fromNumber(0),y=re.fromNumber(0);else if(g-f<17){var k=f;for(y=re.fromNumber(d[k++]),v=new re(0,0);k<=g;k++)y=(y=y.multiply(re.fromNumber(10))).add(re.fromNumber(d[k]))}else{var M=f;for(v=re.fromNumber(d[M++]);M<=g-17;M++)v=(v=v.multiply(re.fromNumber(10))).add(re.fromNumber(d[M]));for(y=re.fromNumber(d[M++]);M<=g;M++)y=(y=y.multiply(re.fromNumber(10))).add(re.fromNumber(d[M]))}var N,L,B,F,U=function(e,t){if(!e&&!t)return{high:re.fromNumber(0),low:re.fromNumber(0)};var i=e.shiftRightUnsigned(32),r=new re(e.getLowBits(),0),n=t.shiftRightUnsigned(32),a=new re(t.getLowBits(),0),o=i.multiply(n),s=i.multiply(a),l=r.multiply(n),u=r.multiply(a);return o=o.add(s.shiftRightUnsigned(32)),s=new re(s.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:o=o.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new re(u.getLowBits(),0))}}(v,re.fromString("100000000000000000"));U.low=U.low.add(y),N=U.low,L=y,B=N.high>>>0,F=L.high>>>0,(B<F||B===F&&N.low>>>0<L.low>>>0)&&(U.high=U.high.add(re.fromNumber(1))),i=_+6176;var W={low:re.fromNumber(0),high:re.fromNumber(0)};U.high.shiftRightUnsigned(49).and(re.fromNumber(1)).equals(re.fromNumber(1))?(W.high=W.high.or(re.fromNumber(3).shiftLeft(61)),W.high=W.high.or(re.fromNumber(i).and(re.fromNumber(16383).shiftLeft(47))),W.high=W.high.or(U.high.and(re.fromNumber(0x7fffffffffff)))):(W.high=W.high.or(re.fromNumber(16383&i).shiftLeft(49)),W.high=W.high.or(U.high.and(re.fromNumber(562949953421311)))),W.low=U.low,r&&(W.high=W.high.or(re.fromString("9223372036854775808")));var G=Ke.alloc(16);return A=0,G[A++]=255&W.low.low,G[A++]=W.low.low>>8&255,G[A++]=W.low.low>>16&255,G[A++]=W.low.low>>24&255,G[A++]=255&W.low.high,G[A++]=W.low.high>>8&255,G[A++]=W.low.high>>16&255,G[A++]=W.low.high>>24&255,G[A++]=255&W.high.low,G[A++]=W.high.low>>8&255,G[A++]=W.high.low>>16&255,G[A++]=W.high.low>>24&255,G[A++]=255&W.high.high,G[A++]=W.high.high>>8&255,G[A++]=W.high.high>>16&255,G[A++]=W.high.high>>24&255,new e(G)};return e.prototype.toString=function(){for(var e,t,i,r,n,a,o=0,s=new Array(36),l=0;l<s.length;l++)s[l]=0;var u,c,d,h,p,f=0,g=!1,_={parts:new Array(4)},m=[];f=0;var v=this.bytes;if(r=v[f++]|v[f++]<<8|v[f++]<<16|v[f++]<<24,i=v[f++]|v[f++]<<8|v[f++]<<16|v[f++]<<24,t=v[f++]|v[f++]<<8|v[f++]<<16|v[f++]<<24,e=v[f++]|v[f++]<<8|v[f++]<<16|v[f++]<<24,f=0,{low:new re(r,i),high:new re(t,e)}.high.lessThan(re.ZERO)&&m.push("-"),(n=e>>26&31)>>3==3){if(30===n)return m.join("")+"Infinity";if(31===n)return"NaN";a=e>>15&16383,d=8+(e>>14&1)}else d=e>>14&7,a=e>>17&16383;if(u=a-6176,_.parts[0]=(16383&e)+((15&d)<<14),_.parts[1]=t,_.parts[2]=i,_.parts[3]=r,0===_.parts[0]&&0===_.parts[1]&&0===_.parts[2]&&0===_.parts[3])g=!0;else for(p=3;p>=0;p--){var y=0,A=lt(_);if(_=A.quotient,y=A.rem.low)for(h=8;h>=0;h--)s[9*p+h]=y%10,y=Math.floor(y/10)}if(g)o=1,s[f]=0;else for(o=36;!s[f];)o-=1,f+=1;if((c=o-1+u)>=34||c<=-7||u>0){if(o>34)return m.push(0),u>0?m.push("E+"+u):u<0&&m.push("E"+u),m.join("");m.push(s[f++]),(o-=1)&&m.push(".");for(var b=0;b<o;b++)m.push(s[f++]);m.push("E"),c>0?m.push("+"+c):m.push(c)}else if(u>=0)for(var E=0;E<o;E++)m.push(s[f++]);else{var w=o+u;if(w>0)for(var T=0;T<w;T++)m.push(s[f++]);else m.push("0");for(m.push(".");w++<0;)m.push("0");for(var C=0;C<o-Math.max(w-1,0);C++)m.push(s[f++])}return m.join("")},e.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},e.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},e.fromExtendedJSON=function(t){return e.fromString(t.$numberDecimal)},Object.defineProperty(e.prototype,"_bsontype",{value:"Decimal128"}),e}(),dt=function(){function e(){ne(this,e)}return oe(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MinKey"}),e}(),ht=function(){function e(){ne(this,e)}return oe(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"MaxKey"}),e}(),pt=function(){function e(t,i,r,n){ne(this,e);var a=t.split(".");2===a.length&&(r=a.shift(),t=a.shift()),this.collection=t,this.oid=i,this.db=r,this.fields=n||{}}return oe(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var i=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete i[e]})),new e(t.$ref,t.$id,t.$db,i)}}]),Object.defineProperty(e.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(e.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1}),e}(),ft=(()=>ie.Buffer)(),gt=function(){function e(i,r){if(ne(this,e),!(null==i||"string"==typeof i||ft.isBuffer(i)||i instanceof Uint8Array||Array.isArray(i)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==r?t:r,this.position=0,null==i||i instanceof Number)void 0!==ft?this.buffer=ft.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof i)if(void 0!==ft)this.buffer=ft.from(i);else{if("undefined"==typeof Uint8Array&&!Array.isArray(i))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=function(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(i)}else this.buffer=i;this.position=i.length}}oe(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var r=null;if(r="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=r;else if(void 0!==ft&&ft.isBuffer(this.buffer)){var n=ft.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n,this.buffer[this.position++]=r}else{var a=null;a=i(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)a[o]=this.buffer[o];this.buffer=a,this.buffer[this.position++]=r}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var r=null;if(void 0!==ft&&ft.isBuffer(this.buffer))r=ft.alloc(this.buffer.length+e.length),this.buffer.copy(r,0,0,this.buffer.length);else if(i(this.buffer)){r=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var n=0;n<this.position;n++)r[n]=this.buffer[n]}this.buffer=r}if(void 0!==ft&&ft.isBuffer(e)&&ft.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==ft&&"string"==typeof e&&ft.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(i(e)||Array.isArray(e)&&"string"!=typeof e){for(var a=0;a<e.length;a++)this.buffer[t++]=e[a];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var i="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)i[r]=this.buffer[e++];return i}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==ft&&ft.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==ft&&ft.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=i(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),r=0;r<this.position;r++)t[r]=this.buffer[r];return t}return function(e,t,i){for(var r="",n=t;n<i;n++)r+=String.fromCharCode(e[n]);return r}(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=ft.isBuffer(this.buffer)?this.buffer.toString("base64"):ft.from(this.buffer).toString("base64"),i=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===i.length?"0"+i:i}:{$binary:{base64:t,subType:1===i.length?"0"+i:i}}}}],[{key:"fromExtendedJSON",value:function(t,i){var r,n;return(i=i||{}).legacy?(n=t.$type?parseInt(t.$type,16):0,r=ft.from(t.$binary,"base64")):(n=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=ft.from(t.$binary.base64,"base64")),new e(r,n)}}]);var t=0;function i(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}return e.BUFFER_SIZE=256,e.SUBTYPE_DEFAULT=0,e.SUBTYPE_FUNCTION=1,e.SUBTYPE_BYTE_ARRAY=2,e.SUBTYPE_UUID_OLD=3,e.SUBTYPE_UUID=4,e.SUBTYPE_MD5=5,e.SUBTYPE_USER_DEFINED=128,Object.defineProperty(e.prototype,"_bsontype",{value:"Binary"}),e}(),_t=(Math.pow(2,63),Math.pow(2,63),{$oid:Ye,$binary:gt,$symbol:qe,$numberInt:Qe,$numberDecimal:ct,$numberDouble:se,$numberLong:re,$minKey:dt,$maxKey:ht,$regex:$e,$regularExpression:$e,$timestamp:he});function mt(e,t,i,r){if("number"==typeof i){if(r.relaxed||r.legacy)return i;if(Math.floor(i)===i){if(i>=At&&i<=yt)return new Qe(i);if(i>=Et&&i<=bt)return new re.fromNumber(i)}return new se(i)}if(null==i||"object"!==le(i))return i;if(i.$undefined)return null;for(var n=Object.keys(i).filter((function(e){return e.startsWith("$")&&null!=i[e]})),a=0;a<n.length;a++){var o=_t[n[a]];if(o)return o.fromExtendedJSON(i,r)}if(null!=i.$date){var s=i.$date,l=new Date;return r.legacy?"number"==typeof s?l.setTime(s):"string"==typeof s&&l.setTime(Date.parse(s)):"string"==typeof s?l.setTime(Date.parse(s)):re.isLong(s)?l.setTime(s.toNumber()):"number"==typeof s&&r.relaxed&&l.setTime(s),l}if(null!=i.$code){var u=Object.assign({},i);return i.$scope&&(u.$scope=mt(e,null,i.$scope)),Ze.fromExtendedJSON(i)}if(null!=i.$ref||null!=i.$dbPointer){var c=i.$ref?i:i.$dbPointer;if(c instanceof pt)return c;var d=Object.keys(c).filter((function(e){return e.startsWith("$")})),h=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(h=!1)})),h)return pt.fromExtendedJSON(c)}return i}function vt(e,t){var i=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,r){return mt(i,0,r,t)}))}var yt=2147483647,At=-2147483648,bt=0x8000000000000000,Et=-0x8000000000000000;function wt(e,t,i,r){null!=i&&"object"===le(i)&&(r=i,i=0),null==t||"object"!==le(t)||Array.isArray(t)||(r=t,t=null,i=0),r=Object.assign({},{relaxed:!0,legacy:!1},r);var n=Array.isArray(e)?Tt(e,r):xt(e,r);return JSON.stringify(n,t,i)}function Tt(e,t){return e.map((function(e){return St(e,t)}))}function Ct(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function St(e,t){if(Array.isArray(e))return Tt(e,t);if(void 0===e)return null;if(e instanceof Date){var i=e.getTime(),r=i>-1&&i<2534023188e5;return t.legacy?t.relaxed&&r?{$date:e.getTime()}:{$date:Ct(e)}:t.relaxed&&r?{$date:Ct(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var n=e>=Et&&e<=bt;if(e>=At&&e<=yt)return{$numberInt:e.toString()};if(n)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var a=e.flags;return void 0===a&&(a=e.toString().match(/[gimuy]*$/)[0]),new $e(e.source,a).toExtendedJSON(t)}return null!=e&&"object"===le(e)?xt(e,t):e}var It={Binary:function(e){return new gt(e.value(),e.subtype)},Code:function(e){return new Ze(e.code,e.scope)},DBRef:function(e){return new pt(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new ct(e.bytes)},Double:function(e){return new se(e.value)},Int32:function(e){return new Qe(e.value)},Long:function(e){return re.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new ht},MinKey:function(){return new dt},ObjectID:function(e){return new Ye(e)},ObjectId:function(e){return new Ye(e)},BSONRegExp:function(e){return new $e(e.pattern,e.options)},Symbol:function(e){return new qe(e.value)},Timestamp:function(e){return he.fromBits(e.low,e.high)}};function xt(e,t){if(null==e||"object"!==le(e))throw new Error("not an object instance");var i=e._bsontype;if(void 0===i){var r={};for(var n in e)r[n]=St(e[n],t);return r}if("string"==typeof i){var a=e;if("function"!=typeof a.toExtendedJSON){var o=It[i];if(!o)throw new TypeError("Unrecognized or invalid _bsontype: "+i);a=o(a)}return"Code"===i&&a.scope?a=new Ze(a.code,St(a.scope,t)):"DBRef"===i&&a.oid&&(a=new pt(a.collection,St(a.oid,t),a.db,a.fields)),a.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+le(i))}var Pt={parse:vt,deserialize:function(e,t){return t=t||{},vt(JSON.stringify(e),t)},serialize:function(e,t){return t=t||{},JSON.parse(wt(e,t))},stringify:wt};t.EJSON=Pt},96:e=>{var t={};!function e(t,i,r){function n(o,s){if(!i[o]){if(!t[o]){if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};t[o][0].call(u.exports,(function(e){var i=t[o][1][e];return n(i||e)}),u,u.exports,e,t,i,r)}return i[o].exports}for(var a=void 0,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,i,r){t.uncompress=e("./index").uncompress,t.compress=e("./index").compress},{"./index":2}],2:[function(e,t,i){"use strict";function r(){return"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node}function n(e){return e instanceof Uint8Array&&(!r()||!Buffer.isBuffer(e))}function a(e){return e instanceof ArrayBuffer}function o(e){return!!r()&&Buffer.isBuffer(e)}var s=e("./snappy_decompressor").SnappyDecompressor,l=e("./snappy_compressor").SnappyCompressor,u="Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array";i.uncompress=function(e){if(!n(e)&&!a(e)&&!o(e))throw new TypeError(u);var t=!1,i=!1;n(e)?t=!0:a(e)&&(i=!0,e=new Uint8Array(e));var r,l,c=new s(e),d=c.readUncompressedLength();if(-1===d)throw new Error("Invalid Snappy bitstream");if(t){if(r=new Uint8Array(d),!c.uncompressToBuffer(r))throw new Error("Invalid Snappy bitstream")}else if(i){if(r=new ArrayBuffer(d),l=new Uint8Array(r),!c.uncompressToBuffer(l))throw new Error("Invalid Snappy bitstream")}else if(r=Buffer.alloc(d),!c.uncompressToBuffer(r))throw new Error("Invalid Snappy bitstream");return r},i.compress=function(e){if(!n(e)&&!a(e)&&!o(e))throw new TypeError(u);var t=!1,i=!1;n(e)?t=!0:a(e)&&(i=!0,e=new Uint8Array(e));var r,s,c,d=new l(e),h=d.maxCompressedLength();return t?(r=new Uint8Array(h),c=d.compressToBuffer(r)):i?(r=new ArrayBuffer(h),s=new Uint8Array(r),c=d.compressToBuffer(s)):(r=Buffer.alloc(h),c=d.compressToBuffer(r)),r.slice(0,c)}},{"./snappy_compressor":3,"./snappy_decompressor":4}],3:[function(e,t,i){"use strict";function r(e,t){return 506832829*e>>>t}function n(e,t){return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)}function a(e,t,i){return e[t]===e[i]&&e[t+1]===e[i+1]&&e[t+2]===e[i+2]&&e[t+3]===e[i+3]}function o(e,t,i,r,n){return i<=60?(r[n]=i-1<<2,n+=1):i<256?(r[n]=240,r[n+1]=i-1,n+=2):(r[n]=244,r[n+1]=i-1&255,r[n+2]=i-1>>>8,n+=3),function(e,t,i,r,n){var a;for(a=0;a<n;a++)i[r+a]=e[t+a]}(e,t,r,n,i),n+i}function s(e,t,i,r){return r<12&&i<2048?(e[t]=1+(r-4<<2)+(i>>>8<<5),e[t+1]=255&i,t+2):(e[t]=2+(r-1<<2),e[t+1]=255&i,e[t+2]=i>>>8,t+3)}function l(e,t,i,r){for(;r>=68;)t=s(e,t,i,64),r-=64;return r>64&&(t=s(e,t,i,60),r-=60),s(e,t,i,r)}function u(e,t,i,s,u){for(var c=1;1<<c<=i&&c<=d;)c+=1;var p=32-(c-=1);void 0===h[c]&&(h[c]=new Uint16Array(1<<c));var f,g=h[c];for(f=0;f<g.length;f++)g[f]=0;var _,m,v,y,A,b,E,w,T,C,S=t+i,I=t,x=t,P=!0;if(i>=15)for(_=S-15,v=r(n(e,t+=1),p);P;){b=32,y=t;do{if(m=v,E=b>>>5,b+=1,y=(t=y)+E,t>_){P=!1;break}v=r(n(e,y),p),A=I+g[m],g[m]=t-I}while(!a(e,t,A));if(!P)break;u=o(e,x,t-x,s,u);do{for(w=t,T=4;t+T<S&&e[t+T]===e[A+T];)T+=1;if(t+=T,u=l(s,u,w-A,T),x=t,t>=_){P=!1;break}g[r(n(e,t-1),p)]=t-1-I,A=I+g[C=r(n(e,t),p)],g[C]=t-I}while(a(e,t,A));if(!P)break;v=r(n(e,t+=1),p)}return x<S&&(u=o(e,x,S-x,s,u)),u}function c(e){this.array=e}var d=14,h=new Array(d+1);c.prototype.maxCompressedLength=function(){var e=this.array.length;return 32+e+Math.floor(e/6)},c.prototype.compressToBuffer=function(e){var t,i=this.array,r=i.length,n=0,a=0;for(a=function(e,t,i){do{t[i]=127&e,(e>>>=7)>0&&(t[i]+=128),i+=1}while(e>0);return i}(r,e,a);n<r;)a=u(i,n,t=Math.min(r-n,65536),e,a),n+=t;return a},i.SnappyCompressor=c},{}],4:[function(e,t,i){"use strict";function r(e,t,i,r,n){var a;for(a=0;a<n;a++)i[r+a]=e[t+a]}function n(e,t,i,r){var n;for(n=0;n<r;n++)e[t+n]=e[t-i+n]}function a(e){this.array=e,this.pos=0}var o=[0,255,65535,16777215,4294967295];a.prototype.readUncompressedLength=function(){for(var e,t,i=0,r=0;r<32&&this.pos<this.array.length;){if(e=this.array[this.pos],this.pos+=1,(t=127&e)<<r>>>r!==t)return-1;if(i|=t<<r,e<128)return i;r+=7}return-1},a.prototype.uncompressToBuffer=function(e){for(var t,i,a,s,l=this.array,u=l.length,c=this.pos,d=0;c<l.length;)if(t=l[c],c+=1,0==(3&t)){if((i=1+(t>>>2))>60){if(c+3>=u)return!1;a=i-60,i=1+((i=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24))&o[a]),c+=a}if(c+i>u)return!1;r(l,c,e,d,i),c+=i,d+=i}else{switch(3&t){case 1:i=4+(t>>>2&7),s=l[c]+(t>>>5<<8),c+=1;break;case 2:if(c+1>=u)return!1;i=1+(t>>>2),s=l[c]+(l[c+1]<<8),c+=2;break;case 3:if(c+3>=u)return!1;i=1+(t>>>2),s=l[c]+(l[c+1]<<8)+(l[c+2]<<16)+(l[c+3]<<24),c+=4}if(0===s||s>d)return!1;n(e,d,s,i),d+=i}return!0},i.SnappyDecompressor=a},{}]},{},[1]),e.exports=t},737:(e,t,i)=>{"use strict";e.exports=i(536)},536:(e,t,i)=>{"use strict";var r=t;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=i(123),r.BufferWriter=i(673),r.Reader=i(799),r.BufferReader=i(38),r.util=i(165),r.rpc=i(963),r.roots=i(9),r.configure=n,n()},799:(e,t,i)=>{"use strict";e.exports=l;var r,n=i(165),a=n.LongBits,o=n.utf8;function s(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(l.create=function(e){return n.Buffer.isBuffer(e)?new r(e):c(e)})(e)}:c};function h(){var e=new a(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw s(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw s(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function p(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw s(this,8);return new a(p(this.buf,this.pos+=4),p(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,s(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw s(this,4);return p(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw s(this,4);return 0|p(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw s(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw s(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,i=this.pos+e;if(i>this.len)throw s(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,i):t===i?new this.buf.constructor(0):this._slice.call(this.buf,t,i)},l.prototype.string=function(){var e=this.bytes();return o.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw s(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw s(this)}while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){r=e,l.create=d(),r._configure();var t=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return f.call(this)[t](!0)},sfixed64:function(){return f.call(this)[t](!1)}})}},38:(e,t,i)=>{"use strict";e.exports=a;var r=i(799);(a.prototype=Object.create(r.prototype)).constructor=a;var n=i(165);function a(e){r.call(this,e)}a._configure=function(){n.Buffer&&(a.prototype._slice=n.Buffer.prototype.slice)},a.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},a._configure()},9:e=>{"use strict";e.exports={}},963:(e,t,i)=>{"use strict";t.Service=i(548)},548:(e,t,i)=>{"use strict";e.exports=n;var r=i(165);function n(e,t,i){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(i)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,i,n,a,o){if(!a)throw TypeError("request must be specified");var s=this;if(!o)return r.asPromise(e,s,t,i,n,a);if(s.rpcImpl)try{return s.rpcImpl(t,i[s.requestDelimited?"encodeDelimited":"encode"](a).finish(),(function(e,i){if(e)return s.emit("error",e,t),o(e);if(null!==i){if(!(i instanceof n))try{i=n[s.responseDelimited?"decodeDelimited":"decode"](i)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",i,t),o(null,i)}s.end(!0)}))}catch(e){return s.emit("error",e,t),void setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},697:(e,t,i)=>{"use strict";e.exports=n;var r=i(165);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var a=n.zero=new n(0,0);a.toNumber=function(){return 0},a.zzEncode=a.zzDecode=function(){return this},a.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return a;var t=e<0;t&&(e=-e);var i=e>>>0,r=(e-i)/4294967296>>>0;return t&&(r=~r>>>0,i=~i>>>0,++i>4294967295&&(i=0,++r>4294967295&&(r=0))),new n(i,r)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(r.isString(e)){if(!r.Long)return n.fromNumber(parseInt(e,10));e=r.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):a},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var s=String.prototype.charCodeAt;n.fromHash=function(e){return e===o?a:new n((s.call(e,0)|s.call(e,1)<<8|s.call(e,2)<<16|s.call(e,3)<<24)>>>0,(s.call(e,4)|s.call(e,5)<<8|s.call(e,6)<<16|s.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return 0===i?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:i<128?9:10}},165:function(e,t,i){"use strict";var r=t;function n(e,t,i){for(var r=Object.keys(t),n=0;n<r.length;++n)void 0!==e[r[n]]&&i||(e[r[n]]=t[r[n]]);return e}function a(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}r.asPromise=i(781),r.base64=i(26),r.EventEmitter=i(570),r.float=i(298),r.inquire=i(116),r.utf8=i(958),r.pool=i(804),r.LongBits=i(697),r.isNode=Boolean(void 0!==i.g&&i.g&&i.g.process&&i.g.process.versions&&i.g.process.versions.node),r.global=r.isNode&&i.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},r.isString=function(e){return"string"==typeof e||e instanceof String},r.isObject=function(e){return e&&"object"==typeof e},r.isset=r.isSet=function(e,t){var i=e[t];return!(null==i||!e.hasOwnProperty(t))&&("object"!=typeof i||(Array.isArray(i)?i.length:Object.keys(i).length)>0)},r.Buffer=function(){try{var e=r.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(e){return"number"==typeof e?r.Buffer?r._Buffer_allocUnsafe(e):new r.Array(e):r.Buffer?r._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(e){return e?r.LongBits.from(e).toHash():r.LongBits.zeroHash},r.longFromHash=function(e,t){var i=r.LongBits.fromHash(e);return r.Long?r.Long.fromBits(i.lo,i.hi,t):i.toNumber(Boolean(t))},r.merge=n,r.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},r.newError=a,r.ProtocolError=a("ProtocolError"),r.oneOfGetter=function(e){for(var t={},i=0;i<e.length;++i)t[e[i]]=1;return function(){for(var e=Object.keys(this),i=e.length-1;i>-1;--i)if(1===t[e[i]]&&void 0!==this[e[i]]&&null!==this[e[i]])return e[i]}},r.oneOfSetter=function(e){return function(t){for(var i=0;i<e.length;++i)e[i]!==t&&delete this[e[i]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var e=r.Buffer;e?(r._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,i){return new e(t,i)},r._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},123:(e,t,i)=>{"use strict";e.exports=d;var r,n=i(165),a=n.LongBits,o=n.base64,s=n.utf8;function l(e,t,i){this.fn=e,this.len=t,this.next=void 0,this.val=i}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new r})()}:function(){return new d}};function p(e,t,i){t[i]=255&e}function f(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,i){for(;e.hi;)t[i++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[i++]=127&e.lo|128,e.lo=e.lo>>>7;t[i++]=e.lo}function _(e,t,i){t[i]=255&e,t[i+1]=e>>>8&255,t[i+2]=e>>>16&255,t[i+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,i){return this.tail=this.tail.next=new l(e,t,i),this.len+=t,this},f.prototype=Object.create(l.prototype),f.prototype.fn=function(e,t,i){for(;e>127;)t[i++]=127&e|128,e>>>=7;t[i]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new f((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(g,10,a.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=a.from(e);return this._push(g,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=a.from(e).zzEncode();return this._push(g,t.length(),t)},d.prototype.bool=function(e){return this._push(p,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(_,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=a.from(e);return this._push(_,4,t.lo)._push(_,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var m=n.Array.prototype.set?function(e,t,i){t.set(e,i)}:function(e,t,i){for(var r=0;r<e.length;++r)t[i+r]=e[r]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var i=d.alloc(t=o.length(e));o.decode(e,i,0),e=i}return this.uint32(t)._push(m,t,e)},d.prototype.string=function(e){var t=s.length(e);return t?this.uint32(t)._push(s.write,t,e):this._push(p,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,i=this.len;return this.reset().uint32(i),i&&(this.tail.next=e.next,this.tail=t,this.len+=i),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),i=0;e;)e.fn(e.val,t,i),i+=e.len,e=e.next;return t},d._configure=function(e){r=e,d.create=h(),r._configure()}},673:(e,t,i)=>{"use strict";e.exports=a;var r=i(123);(a.prototype=Object.create(r.prototype)).constructor=a;var n=i(165);function a(){r.call(this)}function o(e,t,i){e.length<40?n.utf8.write(e,t,i):t.utf8Write?t.utf8Write(e,i):t.write(e,i)}a._configure=function(){a.alloc=n._Buffer_allocUnsafe,a.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,i){t.set(e,i)}:function(e,t,i){if(e.copy)e.copy(t,i,0,e.length);else for(var r=0;r<e.length;)t[i++]=e[r++]}},a.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(a.writeBytesBuffer,t,e),this},a.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(o,t,e),this},a._configure()}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";i.r(r),i.d(r,{DefaultCloud:()=>Sc,InstanceCloud:()=>Ic,getCloudAPI:()=>Cc,getCloudInstance:()=>Tc,getServiceMarketAPI:()=>Jc});var e={};i.r(e),i.d(e,{GeoLineString:()=>Xa,GeoMultiLineString:()=>eo,GeoMultiPoint:()=>Za,GeoMultiPolygon:()=>no,GeoPoint:()=>qa,GeoPolygon:()=>io,LineString:()=>Ka,MultiLineString:()=>Ja,MultiPoint:()=>Qa,MultiPolygon:()=>ro,Point:()=>$a,Polygon:()=>to,__safe_props__:()=>so});var t={};i.r(t),i.d(t,{AggregateOperatorMap:()=>Ru,AggregateSerializer:()=>Fu,Decoder:()=>Ku,OperatorMap:()=>Du,ProjectionSerializer:()=>Zu,QuerySerializer:()=>Wu,UpdateSerializer:()=>Yu,aggregateOperatorToString:()=>Bu,decodeInternalDataType:()=>Mo,encode:()=>Gu,encodeInternalDataType:()=>ko,extractQueryOptions:()=>No,flattenObject:()=>Do,flattenQueryObject:()=>Po,getProjectionDefinition:()=>Bo,isConversionRequired:()=>Oo,mergeConditionAfterEncode:()=>Ro,operatorToString:()=>Lu});var n=BabelRuntimeHelpers.objectSpread2,a=i.n(n),o=BabelRuntimeHelpers.asyncToGenerator,s=i.n(o);var l=function(){this.__data__=[],this.size=0};var u=function(e,t){return e===t||e!=e&&t!=t};var c=function(e,t){for(var i=e.length;i--;)if(u(e[i][0],t))return i;return-1},d=Array.prototype.splice;var h=function(e){var t=this.__data__,i=c(t,e);return!(i<0)&&(i==t.length-1?t.pop():d.call(t,i,1),--this.size,!0)};var p=function(e){var t=this.__data__,i=c(t,e);return i<0?void 0:t[i][1]};var f=function(e){return c(this.__data__,e)>-1};var g=function(e,t){var i=this.__data__,r=c(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this};function _(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}_.prototype.clear=l,_.prototype.delete=h,_.prototype.get=p,_.prototype.has=f,_.prototype.set=g;var m=_;var v=function(){this.__data__=new m,this.size=0};var y=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i};var A=function(e){return this.__data__.get(e)};var b=function(e){return this.__data__.has(e)},E="object"==typeof global&&global&&global.Object===Object&&global,w="object"==typeof self&&self&&self.Object===Object&&self,T=E||w||Function("return this")(),C=T.Symbol,S=Object.prototype,I=S.hasOwnProperty,x=S.toString,P=C?C.toStringTag:void 0;var D=function(e){var t=I.call(e,P),i=e[P];try{e[P]=void 0;var r=!0}catch(e){}var n=x.call(e);return r&&(t?e[P]=i:delete e[P]),n},R=Object.prototype.toString;var O=function(e){return R.call(e)},k=C?C.toStringTag:void 0;var M=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":k&&k in Object(e)?D(e):O(e)};var N=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var L,B=function(e){if(!N(e))return!1;var t=M(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},F=T["__core-js_shared__"],U=(L=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+L:"";var W=function(e){return!!U&&U in e},G=Function.prototype.toString;var V=function(e){if(null!=e){try{return G.call(e)}catch(e){}try{return e+""}catch(e){}}return""},j=/^\[object .+?Constructor\]$/,H=Function.prototype,z=Object.prototype,Y=H.toString,$=z.hasOwnProperty,q=RegExp("^"+Y.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Q=function(e){return!(!N(e)||W(e))&&(B(e)?q:j).test(V(e))};var Z=function(e,t){return null==e?void 0:e[t]};var K=function(e,t){var i=Z(e,t);return Q(i)?i:void 0},X=K(T,"Map"),J=K(Object,"create");var ee=function(){this.__data__=J?J(null):{},this.size=0};var te=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ie=Object.prototype.hasOwnProperty;var re=function(e){var t=this.__data__;if(J){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return ie.call(t,e)?t[e]:void 0},ne=Object.prototype.hasOwnProperty;var ae=function(e){var t=this.__data__;return J?void 0!==t[e]:ne.call(t,e)};var oe=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=J&&void 0===t?"__lodash_hash_undefined__":t,this};function se(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}se.prototype.clear=ee,se.prototype.delete=te,se.prototype.get=re,se.prototype.has=ae,se.prototype.set=oe;var le=se;var ue=function(){this.size=0,this.__data__={hash:new le,map:new(X||m),string:new le}};var ce=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var de=function(e,t){var i=e.__data__;return ce(t)?i["string"==typeof t?"string":"hash"]:i.map};var he=function(e){var t=de(this,e).delete(e);return this.size-=t?1:0,t};var pe=function(e){return de(this,e).get(e)};var fe=function(e){return de(this,e).has(e)};var ge=function(e,t){var i=de(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this};function _e(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}_e.prototype.clear=ue,_e.prototype.delete=he,_e.prototype.get=pe,_e.prototype.has=fe,_e.prototype.set=ge;var me=_e;var ve=function(e,t){var i=this.__data__;if(i instanceof m){var r=i.__data__;if(!X||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new me(r)}return i.set(e,t),this.size=i.size,this};function ye(e){var t=this.__data__=new m(e);this.size=t.size}ye.prototype.clear=v,ye.prototype.delete=y,ye.prototype.get=A,ye.prototype.has=b,ye.prototype.set=ve;var Ae=ye,be=function(){try{var e=K(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();var Ee=function(e,t,i){"__proto__"==t&&be?be(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i};var we=function(e,t,i){(void 0!==i&&!u(e[t],i)||void 0===i&&!(t in e))&&Ee(e,t,i)};var Te=function(e){return function(t,i,r){for(var n=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++n];if(!1===i(a[l],l,a))break}return t}}(),Ce="object"==typeof exports&&exports&&!exports.nodeType&&exports,Se=Ce&&"object"==typeof module&&module&&!module.nodeType&&module,Ie=Se&&Se.exports===Ce?T.Buffer:void 0,xe=Ie?Ie.allocUnsafe:void 0;var Pe=function(e,t){if(t)return e.slice();var i=e.length,r=xe?xe(i):new e.constructor(i);return e.copy(r),r},De=T.Uint8Array;var Re=function(e){var t=new e.constructor(e.byteLength);return new De(t).set(new De(e)),t};var Oe=function(e,t){var i=t?Re(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)};var ke=function(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t},Me=Object.create,Ne=function(){function e(){}return function(t){if(!N(t))return{};if(Me)return Me(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();var Le=function(e,t){return function(i){return e(t(i))}},Be=Le(Object.getPrototypeOf,Object),Fe=Object.prototype;var Ue=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Fe)};var We=function(e){return"function"!=typeof e.constructor||Ue(e)?{}:Ne(Be(e))};var Ge=function(e){return null!=e&&"object"==typeof e};var Ve=function(e){return Ge(e)&&"[object Arguments]"==M(e)},je=Object.prototype,He=je.hasOwnProperty,ze=je.propertyIsEnumerable,Ye=Ve(function(){return arguments}())?Ve:function(e){return Ge(e)&&He.call(e,"callee")&&!ze.call(e,"callee")},$e=Array.isArray;var qe=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var Qe=function(e){return null!=e&&qe(e.length)&&!B(e)};var Ze=function(e){return Ge(e)&&Qe(e)};var Ke=function(){return!1},Xe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Je=Xe&&"object"==typeof module&&module&&!module.nodeType&&module,et=Je&&Je.exports===Xe?T.Buffer:void 0,tt=(et?et.isBuffer:void 0)||Ke,it=Function.prototype,rt=Object.prototype,nt=it.toString,at=rt.hasOwnProperty,ot=nt.call(Object);var st=function(e){if(!Ge(e)||"[object Object]"!=M(e))return!1;var t=Be(e);if(null===t)return!0;var i=at.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&nt.call(i)==ot},lt={};lt["[object Float32Array]"]=lt["[object Float64Array]"]=lt["[object Int8Array]"]=lt["[object Int16Array]"]=lt["[object Int32Array]"]=lt["[object Uint8Array]"]=lt["[object Uint8ClampedArray]"]=lt["[object Uint16Array]"]=lt["[object Uint32Array]"]=!0,lt["[object Arguments]"]=lt["[object Array]"]=lt["[object ArrayBuffer]"]=lt["[object Boolean]"]=lt["[object DataView]"]=lt["[object Date]"]=lt["[object Error]"]=lt["[object Function]"]=lt["[object Map]"]=lt["[object Number]"]=lt["[object Object]"]=lt["[object RegExp]"]=lt["[object Set]"]=lt["[object String]"]=lt["[object WeakMap]"]=!1;var ut=function(e){return Ge(e)&&qe(e.length)&&!!lt[M(e)]};var ct=function(e){return function(t){return e(t)}},dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,ht=dt&&"object"==typeof module&&module&&!module.nodeType&&module,pt=ht&&ht.exports===dt&&E.process,ft=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||pt&&pt.binding&&pt.binding("util")}catch(e){}}(),gt=ft&&ft.isTypedArray,_t=gt?ct(gt):ut;var mt=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},vt=Object.prototype.hasOwnProperty;var yt=function(e,t,i){var r=e[t];vt.call(e,t)&&u(r,i)&&(void 0!==i||t in e)||Ee(e,t,i)};var At=function(e,t,i,r){var n=!i;i||(i={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(i[s],e[s],s,i,e):void 0;void 0===l&&(l=e[s]),n?Ee(i,s,l):yt(i,s,l)}return i};var bt=function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r},Et=/^(?:0|[1-9]\d*)$/;var wt=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&Et.test(e))&&e>-1&&e%1==0&&e<t},Tt=Object.prototype.hasOwnProperty;var Ct=function(e,t){var i=$e(e),r=!i&&Ye(e),n=!i&&!r&&tt(e),a=!i&&!r&&!n&&_t(e),o=i||r||n||a,s=o?bt(e.length,String):[],l=s.length;for(var u in e)!t&&!Tt.call(e,u)||o&&("length"==u||n&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||wt(u,l))||s.push(u);return s};var St=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t},It=Object.prototype.hasOwnProperty;var xt=function(e){if(!N(e))return St(e);var t=Ue(e),i=[];for(var r in e)("constructor"!=r||!t&&It.call(e,r))&&i.push(r);return i};var Pt=function(e){return Qe(e)?Ct(e,!0):xt(e)};var Dt=function(e){return At(e,Pt(e))};var Rt=function(e,t,i,r,n,a,o){var s=mt(e,i),l=mt(t,i),u=o.get(l);if(u)we(e,i,u);else{var c=a?a(s,l,i+"",e,t,o):void 0,d=void 0===c;if(d){var h=$e(l),p=!h&&tt(l),f=!h&&!p&&_t(l);c=l,h||p||f?$e(s)?c=s:Ze(s)?c=ke(s):p?(d=!1,c=Pe(l,!0)):f?(d=!1,c=Oe(l,!0)):c=[]:st(l)||Ye(l)?(c=s,Ye(s)?c=Dt(s):N(s)&&!B(s)||(c=We(l))):d=!1}d&&(o.set(l,c),n(c,l,r,a,o),o.delete(l)),we(e,i,c)}};var Ot=function e(t,i,r,n,a){t!==i&&Te(i,(function(o,s){if(a||(a=new Ae),N(o))Rt(t,i,s,r,e,n,a);else{var l=n?n(mt(t,s),o,s+"",t,i,a):void 0;void 0===l&&(l=o),we(t,s,l)}}),Pt)};var kt=function(e){return e};var Mt=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)},Nt=Math.max;var Lt=function(e,t,i){return t=Nt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,n=-1,a=Nt(r.length-t,0),o=Array(a);++n<a;)o[n]=r[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=r[n];return s[t]=i(o),Mt(e,this,s)}};var Bt=function(e){return function(){return e}},Ft=be?function(e,t){return be(e,"toString",{configurable:!0,enumerable:!1,value:Bt(t),writable:!0})}:kt,Ut=Date.now;var Wt=function(e){var t=0,i=0;return function(){var r=Ut(),n=16-(r-i);if(i=r,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Ft);var Gt=function(e,t){return Wt(Lt(e,t,kt),e+"")};var Vt=function(e,t,i){if(!N(i))return!1;var r=typeof t;return!!("number"==r?Qe(i)&&wt(t,i.length):"string"==r&&t in i)&&u(i[t],e)};var jt=function(e){return Gt((function(t,i){var r=-1,n=i.length,a=n>1?i[n-1]:void 0,o=n>2?i[2]:void 0;for(a=e.length>3&&"function"==typeof a?(n--,a):void 0,o&&Vt(i[0],i[1],o)&&(a=n<3?void 0:a,n=1),t=Object(t);++r<n;){var s=i[r];s&&e(t,s,r,a)}return t}))}((function(e,t,i){Ot(e,t,i)})),Ht=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase(),zt=e=>"object"===Ht(e),Yt=e=>"string"===Ht(e),$t=e=>"number"===Ht(e),qt=e=>"function"==typeof e,Qt=e=>Array.isArray(e),Zt=e=>"date"===Ht(e),Kt=e=>"regexp"===Ht(e),Xt=e=>e&&"symbol"===Ht(e._internalType),Jt={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002};class ei extends Error{constructor(e){super(e.errMsg),this.errCode=-1,this.errMsg=void 0,this.requestID=void 0,Object.defineProperties(this,{message:{get(){return`errCode: ${this.errCode} ${Jt[this.errCode]||""} | errMsg: `+this.errMsg},set(e){this.errMsg=e}}}),this.errCode=e.errCode||-1,this.errMsg=e.errMsg}get message(){return`errCode: ${this.errCode} | errMsg: `+this.errMsg}set message(e){this.errMsg=e}}function ti(e){return e&&e instanceof Error&&Yt(e.errMsg)}function ii(e,t){return ri(e,t)}function ri(e,t){if(e){if(ti(e))return e;var i,r=`${t}:fail `;if(e instanceof Error)e.message=`${r}${e.message}`,e.stack=e.stack?e.stack.slice(0,7)+r+e.stack.slice(7):e.stack,(i=e).errCode=-1;else if("string"==typeof e)(i=new Error(`${r}${e}`)).errCode=-1;else{var n=e.errMsg||"";(i=new Error(`${t}:fail ${e.errCode} ${Jt[e.errCode]||""}. ${n}`)).errCode=e.errCode||-1}return i.errMsg=i.message+"",i}var a=new Error(`${t}:fail`);return a.errCode=-1,a.errMsg=a.message+"",a}class ni extends Error{constructor(e,t){super(e),this.type="timeout",this.payload=void 0,this.generic=!0,this.payload=t}}var ai=e=>"timeout"===e.type;class oi extends Error{constructor(e,t){super(e),this.type="cancelled",this.payload=void 0,this.generic=!0,this.payload=t}}var si,li=e=>"cancelled"===e.type,ui={surroundThirdByTryCatch:(e,t)=>function(...i){return _i((()=>{try{return e.apply(e,i)}catch(i){throw console.error(JSON.stringify(i)+`; ${t}\n`+i.stack),console.error(e.toString()),i}}),t)},reportIDKey:(...e)=>{},reportIDKeyDirectly:(...e)=>{},reportKeyValue:(...e)=>{}},ci=!1,di=10;function hi(){try{return ci?Reporter:di<=0?si:(di--,Reporter.surroundThirdByTryCatch,ci=!0,si=Reporter)}catch(e){return si=ui}}var pi=(e,t)=>hi().surroundThirdByTryCatch(e,t),fi=e=>hi().reportIDKeyDirectly(e),gi=e=>hi().reportKeyValue(e);function _i(e,t=""){try{return e()}catch(e){if(ti(e))return e.errMsg+=t,e;var i=(e?e.toString():"")+t;return new ei({errMsg:i})}}function mi(e,t=""){return function(...i){return _i((()=>e.apply(e,i)),t)}}function vi(e){var t=e.param;t&&(t.success&&qt(t.success)&&(t.success=pi(t.success,`at api ${e.apiName} success callback function`)),t.fail&&qt(t.fail)&&(t.fail=pi(t.fail,`at api ${e.apiName} fail callback function`)),t.complete&&qt(t.complete)&&(t.complete=pi(t.complete,`at api ${e.apiName} complete callback function`)))}function yi(e,t,i){t.complete&&qt(t.complete)&&mi(t.complete,`at api ${e} complete callback function;`)(i)}function Ai(e,t,i){!function(e,t,i){t.success&&qt(t.success)&&mi(t.success,`at api ${e} success callback function;`)(i)}(e,t,i),yi(e,t,i)}function bi(e,t,i){!function(e,t,i){t.fail&&qt(t.fail)&&mi(t.fail,`at api ${e} fail callback function;`)(i)}(e,t,i),yi(e,t,i)}function Ei(e){return e&&(e.success||e.fail||e.complete)}function wi(e,t,i="parameter",r=ei){var n=function(e,t,i="parameter"){var r=function e(t,i,r){var n=Ht(t),a=Ht(i);if("string"===a)return n!==i?`${r} should be ${i} instead of ${n};`:"";if(n!==a)return`${r} should be ${a} instead of ${n}; `;var o="";switch(n){case"object":for(var s in i)o+=e(t[s],i[s],`${r}.${s}`);break;case"array":for(var l=0;l<i.length;l++)o+=e(t[l],i[l],`${r}[${l}]`)}return o}(e,t,i);return{passed:!r,reason:r}}(e,t,i);if(!n.passed)throw new r({errCode:Jt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:n.reason})}function Ti(e,t,i,r=ei){if(null==e)throw new r({errCode:Jt.SDK_API_PARAMETER_ERROR,errMsg:`parameter ${t} of function ${i} must be provided`})}function Ci({name:e,input:t,max:i,maxWording:r="",ErrorClass:n=ei}){if(t.length>i)throw new n({errCode:Jt.SDK_API_PARAMETER_ERROR,errMsg:`${e} size must be less than ${r||i}`})}function Si({target:e,name:t,ErrorClass:i=ei}){if(0===Object.keys(e).length)throw new i({errCode:Jt.SDK_API_PARAMETER_ERROR,errMsg:`${t} must not be empty`})}function Ii(e,t=!1){if(t)return function(e){switch(Ht(e)){case"object":return a()({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if((e=>{if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t})(e))return a()({},e);switch(Ht(e)){case"object":return e;case"array":return e.slice();default:return e}}var xi,Pi=new WeakMap;function Di(){var e;return null!==(e=xi)&&void 0!==e?e:void 0!==__appServiceSDK__?__appServiceSDK__:void 0}var Ri=e=>{if(!e)return Di();var t=Pi.get(e);return t&&t||Di()},Oi=function(){return T.Date.now()},ki=/\s/;var Mi=function(e){for(var t=e.length;t--&&ki.test(e.charAt(t)););return t},Ni=/^\s+/;var Li=function(e){return e?e.slice(0,Mi(e)+1).replace(Ni,""):e};var Bi=function(e){return"symbol"==typeof e||Ge(e)&&"[object Symbol]"==M(e)},Fi=/^[-+]0x[0-9a-f]+$/i,Ui=/^0b[01]+$/i,Wi=/^0o[0-7]+$/i,Gi=parseInt;var Vi=function(e){if("number"==typeof e)return e;if(Bi(e))return NaN;if(N(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=N(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Li(e);var i=Ui.test(e);return i||Wi.test(e)?Gi(e.slice(2),i?2:8):Fi.test(e)?NaN:+e},ji=Math.max,Hi=Math.min;var zi=function(e,t,i){var r,n,a,o,s,l,u=0,c=!1,d=!1,h=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var i=r,a=n;return r=n=void 0,u=t,o=e.apply(a,i)}function f(e){return u=e,s=setTimeout(_,t),c?p(e):o}function g(e){var i=e-l;return void 0===l||i>=t||i<0||d&&e-u>=a}function _(){var e=Oi();if(g(e))return m(e);s=setTimeout(_,function(e){var i=t-(e-l);return d?Hi(i,a-(e-u)):i}(e))}function m(e){return s=void 0,h&&r?p(e):(r=n=void 0,o)}function v(){var e=Oi(),i=g(e);if(r=arguments,n=this,l=e,i){if(void 0===s)return f(l);if(d)return clearTimeout(s),s=setTimeout(_,t),p(l)}return void 0===s&&(s=setTimeout(_,t)),o}return t=Vi(t)||0,N(i)&&(c=!!i.leading,a=(d="maxWait"in i)?ji(Vi(i.maxWait)||0,t):a,h="trailing"in i?!!i.trailing:h),v.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=n=s=void 0},v.flush=function(){return void 0===s?o:m(Oi())},v};var Yi,$i,qi,Qi=!1,Zi=[],Ki="unknown",Xi=()=>{for(var e of Zi)try{e()}catch(e){0}Zi=[]},Ji=e=>{setTimeout((()=>{try{if(!(e=>!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime)))(e))return;if(!Qi&&Zi.length<100)return void Zi.push(Ji.bind(null,e));var t=e.apiEndTime-e.apiStartTime,i=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,r=[0,e.apiName,t,i,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,Ki,e.tunnelTimeNoCSNetCost?t-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?i-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0];gi({key:"CloudReport",value:r.join(","),force:!0})}catch(e){}}))},er=(e,t,i,r)=>{fi({id:e,key:t,force:i,immediately:r})},tr=[],ir=(e,t,i)=>{tr.push({log_id:e,version:t,user_log_list:i}),Yi&&rr()},rr=function(e,t,i){var r=!0,n=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return N(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),zi(e,t,{leading:r,maxWait:t,trailing:n})}((()=>{Ri()._requestSkipCheckDomain({url:`https://servicewechat.com/wxa-qbase/report?token=${Yi}`,method:"POST",header:{},enableHttp2:!0,data:JSON.stringify({report_info_list:tr})}),tr=[]}),3e4),nr=(e,t)=>{var i=qt(e);function r(...r){if(t.samplePicker&&!t.samplePicker.next())return i?e.apply(this,r):e;var a=Date.now(),o=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return i?e.apply(this,r):e;var s;if(i){var l=e.apply(this,r);if("promise"!==Ht(l))return o=!1,l;s=l}else s=e;return s.then((()=>n(a))).catch((()=>n(a))),s}catch(e){throw o=!1,e}finally{o||n(a)}}function n(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&Ji(a()(a()({},t.timing),{},{apiName:t.autoReport}))}return i?r:r()},ar=($i=10,qi=!0,function*(){for(var e=()=>parseInt(Math.round(2*Math.random()*$i),10),t=qi?0:e();;)t>0?(t--,yield!1):(t=e(),yield!0)})();function or(e){return`${e}:ok`}function sr(e,t){return JSON.stringify(e,((e,i)=>{if(t&&t.has(i))return t.get(i);switch(Ht(i)){case"arraybuffer":return{type:"Buffer",data:[...new Uint8Array(i)]}}return i}))}function lr(e){return ur(JSON.parse(e))}function ur(e){switch(Ht(e)){case"object":return cr(e);case"array":return e.map(ur);default:return e}}function cr(e){var t=e,i=dr(t);if(t!==i)return i;for(var r in t){var n=t[r];switch(Ht(n)){case"object":var a=dr(n);t[r]=a!==n?a:cr(t[r]);break;case"array":var o=ur(n);o!==n&&(t[r]=o);break;default:continue}}return t}function dr(e){for(var t in e)switch(t){case"type":switch(e.type){case"Buffer":if(Qt(e.data)&&$t(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}var hr=Symbol.for("CLOUD_ID"),pr=Symbol("CDN");function fr(e){var t=[];for(var i in e)zt(e[i])&&e[i]._internalType===hr&&t.push({key:i,cloudID:e[i].cloudID});return t}var gr,_r=(e=0)=>new Promise((t=>setTimeout(t,e))),mr=!1,vr=[],yr=()=>new Promise(((e,t)=>{if(gr)e(gr);else{0;try{Ri().wx.getNetworkType({success:t=>{gr={networkType:t.networkType,isConnected:"none"!==t.networkType},e(gr),mr||(Ri().wx.onNetworkStatusChange((e=>{if(gr.networkType=e.networkType,gr.isConnected=e.isConnected,e.isConnected&&vr.length)for(;vr.length;)try{vr.shift()()}catch(e){}})),mr=!0)},fail:t})}catch(e){t(e)}}}));var Ar,br=!1,Er=new Set;function wr(e){Ri().wx.onAppShow&&(br||(!function(){var e=Ri().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((()=>{for(var e of("visible",Er))try{e("show")}catch(e){0}})),e.onAppHide((()=>{for(var e of("hidden",Er))try{e("hide")}catch(e){0}})))}(),br=!0),Er.size>50&&Er.clear(),Er.add(e))}function Tr(e){Er.delete(e)}function Cr(){if(Ar)return Ar;var e=Ri().wx;return Ar=e.getSystemInfoSync()}function Sr(e){try{return JSON.parse(e)}catch(t){return e}}var Ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function xr(e){for(var t="",i=new Uint8Array(e),r=i.byteLength,n=0;n<r;n++)t+=String.fromCharCode(i[n]);return function(e){for(var t,i,r=String(e),n="",a=0,o=Ir;r.charAt(0|a)||(o="=",a%1);n+=o.charAt(63&t>>8-a%1*8)){if((i=r.charCodeAt(a+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|i}return n}(t)}function Pr(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),i="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,n,a=0,o=0;n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n=Ir.indexOf(n);return i}(e),i=t.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer}function Dr(e){return Lr(new Uint8Array(e))}function Rr(e){return function(e){for(var t=[],i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(i++,r=65536+((1023&r)<<10|1023&e.charCodeAt(i)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return new Uint8Array(t)}(e).buffer}var Or,kr,Mr,Nr,Lr=(Or=new Array(128),kr=String.fromCodePoint||String.fromCharCode,Mr=[],function(e){var t,i,r=e.length;Mr.length=0;for(var n=0;n<r;)(i=e[n++])<=127?t=i:i<=223?t=(31&i)<<6|63&e[n++]:i<=239?t=(15&i)<<12|(63&e[n++])<<6|63&e[n++]:String.fromCodePoint?t=(7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]:(t=63,n+=3),Mr.push(Or[t]||(Or[t]=kr(t)));return Mr.join("")});try{__wxConfig.platform,Nr=a()({},__wxConfig),__wxConfig.onReady((()=>{Nr=Object.assign(Nr,__wxConfig)}))}catch(e){Nr={platform:"ios",appLaunchInfo:{mode:""},onReady:e=>{setTimeout((()=>{e()}))}}}var Br=Nr,Fr=()=>"devtools"===Nr.platform,Ur=2e4,Wr=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},Gr=e=>e.join("->");function Vr(e){return function(){var t=s()((function*(t){var i=a()({},t.data),r=fr(i).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(r.length)for(var n of r)delete i[n.key_name];var o=sr(i,yield t.cdnMapPromise);Ci({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var l=`${+new Date}-${Math.random()}`;t.context.tunnelStartTime=+new Date;var{result:u,requestID:c}=yield function(e,t,i,r){return d.apply(this,arguments)}(t,o,r,l);return t.context.tunnelEndTime=+new Date,{errMsg:or(Kr),result:u,requestID:c};function d(){return(d=s()((function*(t,i,r,n){return new Promise(((a,o)=>{var s=[Wr("start")],{resolve:l,reject:u}=f(s,a,o);h({param:t,functionName:t.name,data:i,cloudIDList:r,callID:n,action:zr.CALL,scene:Yr.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:s,resolve:l,reject:u})}))}))).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=s()((function*(i){var{functionName:n,data:o,callID:l,action:u,scene:c,tryCount:d,trace:p,systemErrorRetry:f,timeoutErrorRetry:g,resolve:_,reject:m}=i,v=u===zr.CALL&&Fr()?t.localDebugNoTimeout:void 0,y=sr({function_name:n,data:u===zr.CALL?o:void 0,action:u,scene:c,call_id:l,cloudid_list:u===zr.CALL?r:[],local_debug_no_timeout:v}),A=!1,b=!1,E=()=>{clearTimeout(T),b=!0},w=+new Date,T=v?void 0:setTimeout(s()((function*(){var t=e.appConfig.clientPollTimeout||Ur;if(!(+new Date-w>t&&(yield _r(),b))){if(!Fr()&&+new Date-w>e.appConfig.maxStartRetryGap)return p.push(Wr("timeout, exceed max retry gap")),m(ri({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${l}) (trace: ${Gr(p)})`},Kr));A=!0,i.timeoutErrorRetry>0?(p.push(Wr("timeout, retry")),h(a()(a()({},i),{},{scene:Yr.TIMEOUT_RETRY,tryCount:d-1,timeoutErrorRetry:g-1}))):(p.push(Wr("timeout, abort")),m(ri({errCode:Jt.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${l}) (trace: ${Gr(p)})`},Kr)))}})),e.appConfig.clientPollTimeout||Ur);e.request(a()(a()({},t.config),{},{apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env})).then((function(e){try{if(A)return;E(),(e=>{var i=e.data;i&&i.baseresponse&&i.baseresponse.stat&&(i.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=i.baseresponse.stat.qbase_cost_time),i.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=i.baseresponse.stat.func_exec_cost_time))})(e);var r=e.data;if(!r)return p.push(Wr("empty resp")),m(ri({errCode:Jt.SDK_FUNCTIONS_EMPTY_CALL_RESULT},Kr));if(!r.baseresponse||0!==r.baseresponse.errcode)return r.baseresponse?0!==r.baseresponse.errcode?m(ri({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${r.baseresponse.errcode} errmsg ${r.baseresponse.errmsg} (callId: ${l})`},Kr)):m(ri({errCode:Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(r.baseresponse)} (callId: ${l})`},Kr)):m(ri({errCode:Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},Kr));if(0!==r.status){if(1===r.status){if(0!==r.service_errcode){if(r.service_errcode===Jt.TCB_FUNCTIONS_EXEC_FAIL){var n=r.service_errmsg||"";try{for(var o=n.split("\n"),s=[],u=0;u<o.length;u++)o[u].startsWith("Error: ")&&s.push([o[u],u]);if(s.length%2==1){var c=s[Math.floor(s.length/2)][1];n=o.slice(c).join("\n")}}catch(e){}var f=ri({errCode:Jt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`云函数执行错误\n云端堆栈信息(error stack)(${r.func_request_id?`requestId ${r.func_request_id}, `:""}callid ${l}):\n${n}`},Kr);return f.stack=`Error: ${f.message}`,f.requestID=r.func_request_id,m(f)}var g=ri({errCode:Jt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`\n云函数调用失败(${r.func_request_id?`requestId ${r.func_request_id}, `:""}callid ${l}):\n${r.service_errcode} ${r.service_errmsg}`},Kr);return g.stack=`Error: ${g.message}`,g.requestID=r.func_request_id,m(g)}var v=r.data;try{v=lr(v)}catch(e){try{v=JSON.parse(v)}catch(e){}}return _({result:v,requestID:r.func_request_id})}return p.push(Wr("poll result expired")),m(ri({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${l}) (trace: ${Gr(p)})`},Kr))}if(!(d>=0))return p.push(Wr("too many polls, abort")),m(ri({errCode:Jt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${l}) (trace: ${Gr(p)})`},Kr));p.push(Wr("normal poll")),h(a()(a()({},i),{},{action:zr.POLL,scene:Yr.NORMAL_POLL_RETRY,tryCount:d-1}))}catch(e){m(ri({errCode:Jt.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${l})`},Kr))}})).catch((e=>{A||(E(),e&&e.operateWXDataFail&&f>0?(p.push(Wr(`system error (${e}), retry`)),h(a()(a()({},i),{},{scene:Yr.SYSTEM_ERROR_RETRY,tryCount:d-1,systemErrorRetry:f-1}))):(p.push(Wr(`system error (${e}), abort`)),m(ri(`${e} (callId: ${l}) (trace: ${Gr(p)})`,Kr))))}))}))).apply(this,arguments)}function f(e,t,i){var r=t=>{e.push(Wr(`app ${t}`))};wr(r);return{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),i(e)}}}}));return function(e){return t.apply(this,arguments)}}()}function jr(e){var t=new WeakMap,i=[];if(e&&(JSON.stringify(e,((e,r)=>r&&r._internalType===pr?void i.push(new Promise(((e,i)=>{var n={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},a=r;switch(Ht(a.target)){case"object":if(!a.target.filePath)throw new Error("filePath must be provided");n.filePath=a.target.filePath;break;default:n.fileData=a.target}e(Hr(n).then((e=>{t.set(r,e.fileUrl)})))}))):r)),i.length))return Promise.all(i).then((()=>t))}function Hr(e){return new Promise(((t,i)=>{var r=a()(a()({},e),{},{appType:e.appType||301,fileType:e.fileType||20303,fileKey:e.fileKey||`file_${Math.random()}`});Ri().uploadToCommonCDN(a()(a()({},r),{},{success:t,fail:i}))}))}var zr,Yr,$r,qr=e=>a()(a()({},e),{},{errMsg:void 0}),Qr=e=>{try{Fr()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(a()(a()({},e),{},{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},Zr=(e,t)=>{try{if(Fr()&&"undefined"!=typeof __global&&__global.networkLog){var i=t(),r=`${Math.random()}-${+new Date}`,n=i.console||!1,a=i.resultGetter||qr;Qr({reqId:r,type:"requestWillBeSent",url:i.url,headers:i.headers||{},body:i.reqBody,console:n,callFramesIgnoreLength:2,timestampMs:i.timestampMs}),e.then(function(){var e=s()((function*(e){try{yield((e=0)=>new Promise((t=>setTimeout(t,e))))(),Qr({reqId:r,type:"loadingFinished",body:JSON.stringify(a(e),null,2),console:n,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}));return function(t){return e.apply(this,arguments)}}()).catch((e=>{try{Qr({reqId:r,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:zt(e)?e.errMsg||JSON.stringify(e):e.toString(),console:n,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(zr||(zr={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(Yr||(Yr={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}($r||($r={}));var Kr="cloud.callFunction",Xr="cloud.callFunction_real_v2";function Jr(e){var t,i;function r(){return t||(t=function(e){return function(){var t=s()((function*(t){var i=a()({},t.data),r=fr(i).map((e=>({key_name:e.key,cloud_id:e.cloudID})));if(r.length)for(var n of r)delete i[n.key_name];var o=sr(i,yield t.cdnMapPromise);Ci({input:o,max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"});var l=sr({function_name:t.name,data:o,cloudid_list:r});t.context.tunnelStartTime=+new Date;var u=yield e.request(a()(a()({},t.config),{},{apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:l,env:t.config&&t.config.env||e.env}));t.context.tunnelEndTime=+new Date;var c=u.data;if(!c)throw ii({errCode:Jt.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:Jt[Jt.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},Kr);if(c.event_id,!c.poll_url)throw ii({errCode:Jt.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:Jt[Jt.SDK_FUNCTIONS_EMPTY_POLL_URL]},Kr);c.poll_url.indexOf("?")>-1?c.poll_url+="&devtools_ignore=true&skip_domain_check=true":c.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date;var{result:d,requestID:h}=yield function(e){return p.apply(this,arguments)}(c.poll_url);return t.context.pollEndTime=+new Date,{errMsg:or(Kr),result:d,requestID:h};function p(){return(p=s()((function*(t){return new Promise(((i,r)=>{f(t,e.appConfig.maxPollRetry||50,i,r)}))}))).apply(this,arguments)}function f(e,t,i,r){return g.apply(this,arguments)}function g(){return(g=s()((function*(t,i,r,n){Ri(e.identifiers)._requestSkipCheckDomain({url:t,success:e=>{try{if(200!==e.statusCode)return n(ii({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:`polling status code ${e.statusCode}`},Kr));var a=e.data;if(!a)return n(ii({errCode:Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:Jt[Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},Kr));if(a.base_resp&&0===a.base_resp.ret){if(0!==a.status){if(1===a.status){if(0!==a.service_errcode){var o=ii({errCode:Jt.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:`requestID ${a.func_req_id}, cloud function service error code ${a.service_errcode||"unknown"}, error message ${a.service_errmsg||"unknown"}`},Kr);return o.requestID=a.func_req_id,n(o)}var s=a.content;try{s=lr(s)}catch(e){try{s=JSON.parse(s)}catch(e){}}return r({result:s,requestID:a.func_req_id})}return n(ii({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},Kr))}if(!(i>=0))return n(ii({errCode:Jt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:Jt[Jt.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},Kr));f(t,i-1,r,n)}else{if(!a.base_resp)return n(ii({errCode:Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:Jt[Jt.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},Kr));if(0!==a.base_resp.ret)return n(ii({errCode:Jt.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.ret ${a.base_resp.ret}`},Kr))}}catch(e){n(ii({errCode:Jt.SDK_FUNCTIONS_POLL_ERROR,errMsg:`polling catch error: ${e}`},Kr))}},fail:e=>{n(ii(e,Kr))}})}))).apply(this,arguments)}}));return function(e){return t.apply(this,arguments)}}()}(e)),t}function n(){return i||(i=Vr(e)),i}return function(e){var t=+new Date;wi(e,"object");var i=Ii(e);return i.data||(i.data={}),i.context={tunnelTimeNoCSNetCost:0},i.context.apiStartTime=t,Ei(i)?function(e){vi({apiName:Kr,param:e}),l(e).then((t=>{Ai(Kr,e,t)})).catch((t=>{bi(Kr,e,t)}))}(i):l(i)};function o(e){wi(e,{name:"string"}),e.data&&wi(e.data,"object"),e.config&&e.config.env&&wi(e.config.env,"string")}function l(e){return u.apply(this,arguments)}function u(){return(u=s()((function*(t){try{var i;if(o(t),t.cdnMapPromise=jr(t.data),i=l()?r()(t):n()(t),Fr()){var s=Date.now();Zr(i,(()=>{var i;return{url:`wx.cloud.callFunction.${t.name}`,headers:{Env:e.isInstance?e.env:(null===(i=t.config)||void 0===i?void 0:i.env)||e.env},reqBody:sr(t.data),timestampMs:s,console:e.debug}}))}return yield i}catch(e){throw ii(e,Kr)}finally{Ji(a()(a()({},t.context),{},{apiEndTime:+new Date,apiName:l()?Kr:Xr}))}function l(){return 1===t.version}}))).apply(this,arguments)}}function en(e){return{callFunction:Jr(e)}}var tn="functions";function rn(e){e.registerService(function(e){var t={name:tn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(tn)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:tn,context:t,getAPIs:en.bind(null,t)}}(e))}var nn,an,on,sn,ln=i(882),un=(new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),"cloud.callContainer");function cn(e){return function(){var r=s()((function*(r){var n=e.serviceEndpoint.getEndpointSync("container"),o=new WeakMap;if(r.cdnMapPromise||!n){var s=yield Promise.all([r.cdnMapPromise,dn(e.serviceEndpoint.getEndpoint("container"),r.stats,"getServiceEndpoint")]);s[0]&&(o=s[0]),n=s[1]}else r.stats.getServiceEndpoint=0;return r.shouldSerialize&&(r.data=sr(r.data,o)),n.http?function(t,r){return new Promise(((n,o)=>{var s;r.stats.tsCallContainerImplStart=Date.now();var l=Ri(e.identifiers),u={"X-WX-ENCRYPTION-VERSION":2,"X-WX-ENCRYPTION-TIMESTAMP":t.timestamp+"","X-WX-COMPRESSION":"snappy","X-WX-USER-TIMEOUT":r.timeout||"","X-WX-LIB-BUILD-TS":1637246077416,"X-WX-RESPONSE-CONTENT-ACCEPT-ENCODING":"PB, JSON","Content-Type":"application/octet-stream"},c=`${Math.random()}_${Date.now()}`,d=a()(a()({},r.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(s=r.config)||void 0===s?void 0:s.env)||e.env,"X-WX-SERVICE":r.service,"X-WX-CONTAINER-PATH":r.path,"X-WX-CALL-ID":c});e.appid&&(d["X-WX-RESOURCE-APPID"]=e.appid);var h=r.stats;h.callid=c;var p,f=Date.now(),g=[];for(var _ in d)void 0!==d[_]&&null!==d[_]&&g.push({key:_.toLowerCase(),value:d[_]+""});var m,v=!1;if(r.data){var y=Ht(r.data);"object"===y?p=JSON.stringify(r.data):"arraybuffer"!==y?p=r.data+"":(p=r.data,v=!0)}else p=void 0;f=Date.now(),v?(m=ln.HTTPRequest.encode({method:r.method||"GET",header:g,body:new Uint8Array(p),callId:c}).finish(),h.encodePb=Date.now()-f,u["X-WX-REQUEST-CONTENT-ENCODING"]="PB"):(m=new Uint8Array(Rr(JSON.stringify({method:r.method||"GET",header:g,body:p,call_id:c}))),h.stringToBuffer=Date.now()-f,u["X-WX-REQUEST-CONTENT-ENCODING"]="JSON"),f=Date.now();var A=i(96),b=A.compress(m);h.compress=Date.now()-f,f=Date.now();var E=i(121);h.loadAsmcrypto=Date.now()-f,f=Date.now();var w=new Uint8Array(l.wx.base64ToArrayBuffer(t.key)),T=E.AES_CBC.encrypt(b,w,void 0,w);h.encrypt=Date.now()-f,f=Date.now();var C=!0;!t.localDNSTrusted&&t.vip&&(C=!1,u.host="servicewechat.com",h.ip=t.vip);var S=C?t.url:`http://${t.vip}/wxa-qbase/container_service?token=${t.token}`;r.rdm?S=`https://wxardm.weixin.qq.com/wxa-qbase/container_service?token=${t.token}`:r.ecdn&&(S=`https://cloudbase.servicewechat.com/wxa-qbase/container_service?token=${t.token}`),r.verbose&&console.log(`[cloud.callContainer] url ${S}`),C&&t.domain&&(r.stats.domain=t.domain),h.requestBodyBytes=T.byteLength,h.requestStartTs=Date.now(),l._requestSkipCheckDomain({url:S,method:"POST",header:u,data:T.buffer,dataType:"arraybuffer",responseType:"arraybuffer",timeout:r.timeout,enableHttp2:C,success:e=>{try{for(var t in e.header)if("x-nws-log-uuid"===t.toLowerCase()&&(r.verbose&&console.log(`[cloud.callContainer] x-nws-log-uuid ${e.header[t]}`),r.stats.ecdnId=e.header[t]),"x-edge-timing"===t.toLowerCase()&&(r.stats.ecdnEdgeTiming=e.header[t]),"x-wx-system-error"===t.toLowerCase()){var i=Number(e.header[t]);return void o({errCode:i,errMsg:`${un}:fail system error. code: ${i}`})}if(h.profile=e.profile,h.httpRequest=Date.now()-f,200===e.statusCode){var a=e.data;h.responseBodyBytes=a.byteLength,f=Date.now();var s=E.AES_CBC.decrypt(new Uint8Array(a),w,void 0,w);h.decrypt=Date.now()-f;var l,u,d="pb";for(var p in e.header)if("x-wx-compression"===p.toLowerCase()&&"snappy"===e.header[p]&&(f=Date.now(),s=A.uncompress(s),h.uncompress=Date.now()-f),"x-wx-response-content-encoding"===p.toLowerCase()&&"json"===e.header[p].toLowerCase()&&(d="json"),"x-wx-server-timing"===p.toLowerCase()){var g=(e.header[p]||"").split(",");g.length>=2&&(h.serverStartTs=Number(g[0]),h.serverEndTs=Number(g[1]))}if(f=Date.now(),"json"===d){var _=JSON.parse(Dr(s));l={statusCode:_.status_code,header:_.header,bodyBuffer:_.body_buffer,bodyString:_.body_string},h.decodeJson=Date.now()-f}else l=ln.HTTPResponse.decode(s),h.decodePb=Date.now()-f;if(f=Date.now(),"json"===r.dataType){var m=l.bodyString||(l.bodyBuffer?Dr(l.bodyBuffer):"{}");try{u=JSON.parse(m)}catch(e){return void o({errCode:-1,errMsg:`${un}:fail parse response body as JSON failed: ${e}. input: ${m}`})}}else u="text"===r.responseType?l.bodyString||(l.bodyBuffer?Dr(l.bodyBuffer):""):"arraybuffer"===r.responseType&&l.bodyString?Rr(l.bodyString):l.bodyString||l.bodyBuffer;h.decodeBody=Date.now()-f,n({statusCode:l.statusCode,header:l.header.reduce(((e,t)=>(e[t.key+""]=t.value+"",e)),{}),data:u,stats:h,callID:c,errMsg:`${un}:ok`})}else{var v=-1;for(var y in e.header)"x-wx-system-error"===y.toLowerCase()&&(v=Number(e.header[y]));o({errCode:v,errMsg:`${un}:fail system error, status ${e.statusCode}. code: ${v}`})}}catch(e){o({errCode:-1,errMsg:`${un}:fail error while processing internal response ${e}`})}},fail:e=>{o(a()(a()({},e),{},{errMsg:e.errMsg.replace(/^request/,un)}))}})}))}(n,r):function(e,i){return t.apply(this,arguments)}(n.url,r)}));return function(e){return r.apply(this,arguments)}}();function t(){return(t=s()((function*(t,i){return new Promise(((r,n)=>{var o,s=Ri(e.identifiers),l=a()(a()({},i.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(o=i.config)||void 0===o?void 0:o.env)||e.env,"X-WX-SERVICE":i.service,"X-WX-CONTAINER-PATH":i.path,"X-WX-CALL-ID":`${Math.random()}_${Date.now()}`,"X-WX-USER-TIMEOUT":i.timeout});e.appid&&(l["X-WX-RESOURCE-APPID"]=e.appid),s._requestSkipCheckDomain({url:t,method:i.method,header:l,data:i.data,dataType:i.dataType,responseType:i.responseType,timeout:i.timeout,success:e=>{r(a()(a()({},e),{},{errMsg:`${un}:ok`}))},fail:e=>{n(a()(a()({},e),{},{errMsg:e.errMsg.replace(/^request/,un)}))}})}))}))).apply(this,arguments)}}function dn(e,t,i){var r=Date.now();return e.then((()=>t[i]=Date.now()-r)).catch((()=>t[i]=Date.now()-r)),e}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(nn||(nn={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(an||(an={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(on||(on={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(sn||(sn={}));var hn=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},pn=e=>e.join("->"),fn=2e4,gn=1e5,_n="cloud.callContainer";var mn="cloud.callContainer";function vn(e){var t,i;function r(){return t||(t=cn(e)),t}function n(){return i||(i=function(e){return function(){var t=s()((function*(t){var i,r;if(t.shouldSerialize){var n=yield t.cdnMapPromise;t.data=sr(t.data,n)}var o=on.RAW,l=(null===(i=t.method)||void 0===i?void 0:i.toUpperCase())||"GET";if(t.data&&/^(POST|PUT|PATCH)$/.test(l)){var u=Ht(t.data);if("object"===u)if(t.isReqHeaderContentTypeJSON)t.data=JSON.stringify(t.data);else if(t.isReqHeaderContentTypeURLEncoded){var c="";for(var d in t.data)c+=`${c.length?"&":""}${encodeURIComponent(d)}=${encodeURIComponent(t.data[d])}`;t.data=c}else t.data=JSON.stringify(t.data);else{if("arraybuffer"!==u&&"string"!==u)throw new Error(`input data type is not supported: ${u}`);var h=!1;if("string"===u)h=t.data.length>gn;else if(t.data.byteLength>gn)h=!0;else{var p=xr(t.data);p.length>gn?h=!0:(t.data=p,o=on.BASE64)}if(h)throw new Error("input data size too large (> 100KB)")}}else if("GET"===l&&t.data&&zt(t.data)){for(var f in t.data){var g=`&${f}=${t.data[f]}`;t.path+=`${t.path.includes("?")?"&":"?"}${g}`}t.data=void 0}else t.data=void 0;var _=`${+new Date}-${Math.random()}`;for(var m in t.header=a()(a()({},t.header),{},{"X-WX-ENV":e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.service&&(t.header["X-WX-SERVICE"]=t.service),t.header)null!==t.header[m]&&void 0!==t.header[m]&&(t.header[m]+="");t.context.tunnelStartTime=+new Date;var{result:v}=yield function(e,t,i,r){return y.apply(this,arguments)}(t,t.data,o,_);return t.context.tunnelEndTime=+new Date,a()(a()({},v),{},{errMsg:or(_n),callID:_});function y(){return(y=s()((function*(t,i,r,n){var a,o=!1;t.hasOwnProperty("timeout")&&(a=new Promise(((e,i)=>{setTimeout((()=>{o=!0,i(`timeout (options.timeout == ${t.timeout})`)}),t.timeout)})));var s=new Promise(((s,l)=>{var u=[hn("start")],{resolve:c,reject:d}=E(u,s,l);A({param:t,data:i,dataType:r,callID:n,action:nn.CALL,retryType:an.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!a&&o}},trace:u,resolve:c,reject:d})}));return a?Promise.race([s,a]):s}))).apply(this,arguments)}function A(e){return b.apply(this,arguments)}function b(){return(b=s()((function*(i){var{data:r,dataType:n,callID:o,action:l,retryType:u,tryCount:c,trace:d,systemErrorRetry:h,timeoutErrorRetry:p,userTimeout:f,resolve:g,reject:_}=i,m=[];for(var v in t.header)m.push({k:v,v:t.header[v]});var y=sr(l===nn.CALL?{method:t.method||"GET",headers:m,data:l===nn.CALL?r:void 0,data_type:n,action:l,retryType:u,call_id:o,user_timeout:t.timeout}:{call_id:o,action:l,retryType:u}),b=!1,E=!1,w=()=>{clearTimeout(C),E=!0},T=+new Date,C=setTimeout(s()((function*(){var t=e.appConfig.clientPollTimeout||fn;if(!(+new Date-T>t&&(yield _r(),E)||f.reached)){if(!Fr()&&+new Date-T>e.appConfig.maxStartRetryGap)return d.push(hn("timeout, exceed max retry gap")),_(ri({errCode:Jt.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${o}) (trace: ${pn(d)})`},_n));b=!0,i.timeoutErrorRetry>0?(d.push(hn("timeout, retry")),A(a()(a()({},i),{},{retryType:an.Timeout,tryCount:c-1,timeoutErrorRetry:p-1}))):(d.push(hn("timeout, abort")),_(ri({errCode:Jt.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`(callId: ${o}) (trace: ${pn(d)})`},_n)))}})),e.appConfig.clientPollTimeout||fn),S=e=>{var i=e.data;i&&i.baseresponse&&i.baseresponse.stat&&i.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=i.baseresponse.stat.qbase_cost_time)};function I(){return(I=s()((function*(r){try{if(b||f.reached)return;w(),S(r);var n=r.data;if(!n)return d.push(hn("empty resp")),_(ri({errCode:Jt.SDK_CONTAINER_EMPTY_CALL_RESULT},_n));if(!n.baseresponse||0!==n.baseresponse.errcode)return n.baseresponse?0!==n.baseresponse.errcode?_(ri({errCode:Jt.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:`polling base_resp.errcode ${n.baseresponse.errcode} errmsg ${n.baseresponse.errmsg} (callId: ${o})`},_n)):_(ri({errCode:Jt.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:`polling base_resp ${JSON.stringify(n.baseresponse)} (callId: ${o})`},_n)):_(ri({errCode:Jt.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},_n));if(0!==n.status){if(1===n.status){var s;if(n.data_type===on.BASE64)s=Pr(n.data),"json"===t.dataType?s=Sr(Dr(s)):"arraybuffer"!==t.responseType&&(s=Dr(s));else if(n.data_type===on.CDN_URL)try{var l=Ri(e.identifiers);s=(yield new Promise(((e,i)=>{l._requestSkipCheckDomain({url:n.data,dataType:t.dataType,responseType:t.responseType,success:t=>{200!==t.statusCode?i(`download response status code ${t.statusCode}`):e(t)},fail:e=>{i(e)}})}))).data}catch(e){return _(ri({errCode:Jt.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:`error: ${e} \n (callId: ${o}) (trace: ${pn(d)})`},_n))}else s=n.data,"arraybuffer"===t.responseType?s=Rr(s):"json"===t.dataType&&(s=Sr(s));return g({result:{data:s,statusCode:n.http_code,header:n.headers.reduce(((e,t)=>(e[t.k]=t.v,e)),{})}})}return d.push(hn("poll result expired")),_(ri({errCode:Jt.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:`timeout for result fetching, result cannot be fetched anymore (callId: ${o}) (trace: ${pn(d)})`},_n))}if(!(c>=0))return d.push(hn("too many polls, abort")),_(ri({errCode:Jt.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:`(callId: ${o}) (trace: ${pn(d)})`},_n));d.push(hn("normal poll")),A(a()(a()({},i),{},{action:nn.POLL,retryType:an.None,tryCount:c-1}))}catch(e){_(ri({errCode:Jt.SDK_CONTAINER_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${o})`},_n))}}))).apply(this,arguments)}f.reached||e.request(a()(a()({},t.config),{},{apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:y,env:t.config&&t.config.env||e.env})).then((function(e){return I.apply(this,arguments)})).catch((e=>{b||f.reached||(w(),e&&e.operateWXDataFail&&h>0?(d.push(hn(`system error (${e}), retry`)),A(a()(a()({},i),{},{retryType:an.Error,tryCount:c-1,systemErrorRetry:h-1}))):(d.push(hn(`system error (${e}), abort`)),_(ri(`${e} (callId: ${o}) (trace: ${pn(d)})`,_n))))}))}))).apply(this,arguments)}function E(e,t,i){var r=t=>{e.push(hn(`app ${t}`))};return wr(r),{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),i(e)}}}}));return function(e){return t.apply(this,arguments)}}()}(e)),i}return function(e){var t=+new Date;wi(e,"object");var i=Ii(e);return i.data||(i.data={}),i.dataType||(i.dataType="json"),i.context={tunnelTimeNoCSNetCost:0},i.context.apiStartTime=t,i.stats={apiStartTime:t},Ei(i)?function(e){vi({apiName:mn,param:e}),l(e).then((t=>{Ai(mn,e,t)})).catch((t=>{bi(mn,e,t)}))}(i):l(i)};function o(t){var i;if(t.path||(t.path="/"),t.service,e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null!==(i=t.config)&&void 0!==i&&i.env)wi(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}function l(e){return u.apply(this,arguments)}function u(){return(u=s()((function*(t){var i=!1;try{o(t),t.header||(t.header={}),t.dataType||(t.dataType="json"),t.responseType||(t.responseType="text");var a=!1;for(var s in t.header)"content-type"===s.toLowerCase()&&(a=!0,t.header[s].includes("application/json")&&(t.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===t.header[s]&&(t.isReqHeaderContentTypeURLEncoded=!0));if(a||(t.header["content-type"]="application/json",t.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(t.method||"")&&t.data&&t.isReqHeaderContentTypeJSON){var l=Ht(t.data);t.shouldSerialize="string"!==l}t.cdnMapPromise=t.shouldSerialize?jr(t.data):void 0;var u,h,p=Date.now();i=c(t),t.stats.tsBeforeCallContainerImpl=Date.now(),u=i?r()(t):n()(t);var f=t.service||t.header["X-WX-SERVICE"];h=f?`wx.cloud.callContainer.${t.service}${t.path}`:`wx.cloud.callContainer${t.path}`,Zr(u,(()=>{var i;return{url:h,headers:{Env:e.isInstance?e.env:(null===(i=t.config)||void 0===i?void 0:i.env)||e.env},reqBody:sr(t.data),timestampMs:p,console:e.debug}}));var g=yield u;return d(t,i),g}catch(e){throw ii(e,mn)}}))).apply(this,arguments)}function c(e){return 1===e.apiVersion}function d(e,t){e.stats.apiEndTime=Date.now(),Ji(a()(a()({},e.context),{},{apiEndTime:e.stats.apiEndTime,apiName:mn}));var i=Boolean(e.stats.profile),r=e.stats.profile||{},n=e.stats.serverEndTs-e.stats.serverStartTs,o=e.stats.httpRequest<=6e4?e.stats.httpRequest:6e4,s=e.stats.apiEndTime,l=s-e.context.apiStartTime;l>9e4&&(l=9e4);var u=e.path||"";u=u.split("?")[0].replace(/\/\d+\//g,"/*/").replace(/\/\d+$/g,"/*"),ir(22601,9,[e.stats.callid,e.context.apiStartTime,s,e.stats.serverStartTs,e.stats.serverEndTs,e.stats.requestBodyBytes,e.stats.responseBodyBytes,e.stats.getServiceEndpoint,e.stats.queryDNS,e.stats.compress,e.stats.loadAsmcrypto,e.stats.encrypt,o,e.stats.decrypt,e.stats.uncompress,e.stats.decodePb,e.stats.decodeBody,e.stats.ip,r.redirectStart,i?r.redirectEnd-r.redirectStart:void 0,r.fetchStart,r.domainLookupStart,i?r.domainLookupEnd-r.domainLookupStart:void 0,r.connectStart,i?r.connectEnd-r.connectStart:void 0,r.SSLconnectionStart,i?r.SSLconnectionEnd-r.SSLconnectionStart:void 0,r.requestStart,i?r.requestEnd-r.requestStart:void 0,r.responseStart,i?r.responseEnd-r.responseStart:void 0,r.rtt,r.estimate_nettype,r.httpRttEstimate,r.transportRttEstimate,r.downstreamThroughputKbpsEstimate,r.throughputKbps,r.peerIP,r.port,i?r.socketReused?1:0:void 0,r.sendBytesCount,r.receivedBytedCount,t?r.protocol:"im",Cr().system,l,n>0?n:0,o?l-o:void 0,u,Cr().platform,e.stats.requestStartTs,1637246077416,e.stats.ecdnId,e.stats.ecdnEdgeTiming,e.stats.domain,e.stats.stringToBuffer,e.stats.encodePb,e.stats.tsBeforeCallContainerImpl,e.stats.tsCallContainerImplStart,e.stats.decodeJson].join(","))}}function yn(e){return{callContainer:vn(e)}}var An="container";function bn(e){e.registerService(function(e){var t={name:An,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(An)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:An,context:t,getAPIs:yn.bind(null,t)}}(e))}var En={},wn={env:"",platform:""},Tn=()=>wn;if(void 0!==__wxConfig)wn.env="miniprogram",wn.platform=__wxConfig.platform;else if(wn.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)wn.platform="miniprogram";else{var Cn=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(Cn)&&(wn.platform="wxweb")}var Sn="cloud.uploadFile";function In(e){return function(e){if(Ei(e=Ii(e)))return function(e){var i={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(i),n={apiStartTime:+new Date};return t(a()(a()({},e),{},{context:i,timing:n,uploadTaskAgent:r})).then((t=>{Ai(Sn,e,t)})).catch((t=>{bi(Sn,e,t)})),r}(e);var i={apiStartTime:+new Date};return t(a()(a()({},e),{},{timing:i}))};function t(e){return new Promise(function(){var t=s()((function*(t,n){try{if(function(e){wi(e,{cloudPath:"string"}),"miniprogram"===Tn().env?wi(e,{filePath:"string"}):Ti(e,"file","uploadFile")}(e),e.filePath&&function(e){r.apply(this,arguments)}(e.filePath),e.context&&(e.context.abort=function(){n(ii({errMsg:"abort"},Sn))},e.context.aborted))return n(ii({errMsg:"abort"},Sn));t(yield function(e){return i.apply(this,arguments)}(e))}catch(e){n(ii(e,Sn))}finally{Ji(a()(a()({},e.timing),{},{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"}))}}));return function(e,i){return t.apply(this,arguments)}}())}function i(){return(i=s()((function*(t){var i=Ri(e.identifiers),r=yield n(t);return new Promise(((e,n)=>{if(t.context&&t.context.aborted)return n(ii({errMsg:"abort"},Sn));var o,s;if("web"===Tn().env){var l=new FormData;l.append("key",t.cloudPath),l.append("signature",r.authorization),l.append("x-cos-security-token",r.token),l.append("x-cos-meta-fileid",r.cos_file_id),l.append("file",t.file),o={url:r.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:l}}else o={url:r.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:r.authorization,"x-cos-security-token":r.token,"x-cos-meta-fileid":r.cos_file_id}};(s=i._uploadFileSkipCheckDomain(a()(a()({},o),{},{success:t=>{try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:or(Sn),fileID:r.file_id,statusCode:t.statusCode});else{var i=new ei({errMsg:`status ${t.statusCode}, error: ${t.data};`});n(i)}}catch(i){var a=new ei({errMsg:`Error : ${t.data};`});n(a)}},fail:e=>{n(e)}})))&&(s.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&qt(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(i._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=s.abort.bind(s)))}))}))).apply(this,arguments)}function r(){return(r=s()((function*(t){return new Promise(((i,r)=>{wx.getFileInfo?wx.getFileInfo({filePath:t,success:t=>{t.size>e.appConfig.uploadMaxFileSize?r(new ei({errCode:Jt.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:`exceed max upload file size: ${e.appConfig.uploadMaxFileSize/1024/1024} MB`})):i()},fail:()=>{i()}}):i()}))}))).apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=s()((function*(t){var i=JSON.stringify({path:t.cloudPath}),r=+new Date,n=(yield e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:i,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=n.baseresponse.stat.qbase_cost_time),!n.url)throw new ei({errCode:Jt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:Jt[Jt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return n}))).apply(this,arguments)}}var xn="cloud.downloadFile";function Pn(e){return function(e){if(Ei(e=Ii(e)))return function(e){var i={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(i),n={apiStartTime:+new Date};return t(a()(a()({},e),{},{context:i,timing:n,downloadTaskAgent:r})).then((t=>{Ai(xn,e,t)})).catch((t=>{bi(xn,e,t)})),r}(e);var i={apiStartTime:+new Date};return t(a()(a()({},e),{},{timing:i}))};function t(e){return i.apply(this,arguments)}function i(){return(i=s()((function*(e){return new Promise(function(){var t=s()((function*(t,i){try{if(r(e),e.context&&(e.context.abort=function(){i(ii({errMsg:"abort"},xn))},e.context.aborted))return i(ii({errMsg:"abort"},xn));t(yield n(e))}catch(e){i(ii(e,xn))}finally{Ji(a()(a()({},e.timing),{},{apiEndTime:+new Date,apiName:xn}))}}));return function(e,i){return t.apply(this,arguments)}}())}))).apply(this,arguments)}function r(e){wi(e,{fileID:"string"}),e.config&&e.config.env&&wi(e.config.env,"string")}function n(e){return o.apply(this,arguments)}function o(){return(o=s()((function*(t){var i=Ri(e.identifiers),r=yield l(t);return new Promise(((e,n)=>{if(t.context&&t.context.aborted)return n(ii({errMsg:"abort"},xn));var a=i._downloadFileSkipCheckDomain({url:r,success:t=>{e(t)},fail:e=>{n(e)}});a&&(a.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&qt(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(i._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=a.abort.bind(a)))}))}))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=s()((function*(t){var i=JSON.stringify({fileid:t.fileID}),r=+new Date,n=(yield e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:i,env:t.config&&t.config.env||e.env})).data;if(t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=n.baseresponse.stat.qbase_cost_time),!n.download_url)throw new ei({errCode:Jt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:Jt[Jt.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return n.download_url.indexOf("?")>-1?n.download_url+="&skip_domain_check=true":n.download_url+="?skip_domain_check=true",n.download_url}))).apply(this,arguments)}}var Dn="cloud.getTempFileURL";function Rn(e){return function(e){var t=Ii(e);return t.timing={apiStartTime:+new Date},Ei(t)?function(e){i(e).then((t=>{Ai(Dn,e,t)})).catch((t=>{bi(Dn,e,t)}))}(t):i(t)};function t(t){if(wi(t,{fileList:"array"}),t.config&&t.config.env&&wi(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new ei({errCode:Jt.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function i(e){return r.apply(this,arguments)}function r(){return(r=s()((function*(e){try{return t(e),e.fileList.length?yield n(e):{errMsg:or(Dn),fileList:[]}}catch(e){throw ii(e,Dn)}finally{Ji(a()(a()({},e.timing),{},{apiEndTime:+new Date,apiName:Dn}))}}))).apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=s()((function*(t){var i={file_list:t.fileList.map((e=>Yt(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}))},r=JSON.stringify(i);t.timing.tunnelStartTime=+new Date;var n=yield e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var a=n.data;return t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,{errMsg:or(Dn),fileList:a.download_list.map((e=>({fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}var On="cloud.deleteFile";function kn(e){return function(e){var t=Ii(e);return t.timing={apiStartTime:+new Date},Ei(t)?function(e){i(e).then((t=>{Ai(On,e,t)})).catch((t=>{bi(On,e,t)}))}(t):i(t)};function t(t){wi(t,{fileList:"array"}),t.config&&t.config.env&&wi(t.config.env,"string");for(var i=0,r=t.fileList.length;i<r;i++)wi(t.fileList[i],"string",`parameter.fileList[${i}]`);if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new ei({errCode:Jt.SDK_API_PARAMETER_ERROR,errMsg:`parameter.fileList exceed max length ${e.appConfig.getTempFileURLMaxReq}`})}function i(e){return r.apply(this,arguments)}function r(){return(r=s()((function*(e){try{return t(e),e.fileList.length?yield n(e):{errMsg:or(On),fileList:[]}}catch(e){throw ii(e,On)}finally{Ji(a()(a()({},e.timing),{},{apiEndTime:+new Date,apiName:On}))}}))).apply(this,arguments)}function n(e){return o.apply(this,arguments)}function o(){return(o=s()((function*(t){var i={fileid_list:t.fileList},r=JSON.stringify(i);t.timing.tunnelStartTime=+new Date;var n=yield e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env});t.timing.tunnelEndTime=+new Date;var a=n.data;return t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,{errMsg:or(On),fileList:a.delete_list.map((e=>({fileID:e.fileid,status:e.status,errMsg:e.errmsg})))}}))).apply(this,arguments)}}function Mn(e){return{uploadFile:In(e),downloadFile:Pn(e),getTempFileURL:Rn(e),deleteFile:kn(e)}}var Nn="storage";function Ln(e){e.registerService(function(e){var t={name:Nn,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(Nn)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:Nn,context:t,getAPIs:Mn.bind(null,t)}}(e))}var Bn,Fn=Symbol.for("UNSET_FIELD_NAME"),Un=Symbol.for("AGGREGATE"),Wn=Symbol.for("AGGREGATE_PIPELINE"),Gn=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Vn=Symbol.for("UPDATE_COMMAND"),jn=Symbol.for("QUERY_COMMAND"),Hn=Symbol.for("LOGIC_COMMAND"),zn=Symbol.for("AGGREGATE_COMMAND"),Yn=Symbol.for("PROJECT_COMMAND"),$n=Symbol.for("GEO_POINT"),qn=Symbol.for("GEO_LINESTRING"),Qn=Symbol.for("GEO_POLYGON"),Zn=Symbol.for("GEO_MULTIPOINT"),Kn=Symbol.for("GEO_MULTILINESTRING"),Xn=Symbol.for("GEO_MULTIPOLYGON"),Jn=Symbol.for("SERVER_DATE"),ea=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(Bn||(Bn={}));var ta=[Bn.AND,Bn.OR,Bn.NOT,Bn.NOR],ia=new Set(ta);class ra{constructor(e,t,i){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Hn,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=i||Fn}_setFieldName(e){var t=this.operands.map((t=>t===Bn.AND||t===Bn.OR?t._setFieldName(e):t));return new ra(this.operator,t,e)}and(...e){Ti(arguments[0],"expressions","and");var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new ra(Bn.AND,t,this.fieldName)}or(...e){Ti(arguments[0],"expressions","or");var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new ra(Bn.OR,t,this.fieldName)}nor(...e){Ti(arguments[0],"expressions","nor");var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return t.unshift(this),new ra(Bn.NOR,t,this.fieldName)}not(e){return Ti(e,"expression","not"),new ra(Bn.NOT,[e],this.fieldName)}toJSON(){}}function na(e){return e&&e instanceof ra&&e._internalType===Hn}var aa;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(aa||(aa={}));var oa=[aa.EQ,aa.NEQ,aa.GT,aa.GTE,aa.LT,aa.LTE,aa.IN,aa.NIN,aa.GEO_NEAR,aa.GEO_WITHIN,aa.GEO_INTERSECTS,aa.EXISTS,aa.MOD,aa.ALL,aa.ELEM_MATCH,aa.SIZE],sa=new Set(oa);new Set([...sa,...ia]);class la extends ra{constructor(e,t,i){super(e,t,i),this.operator=void 0,this.__safe_props__=void 0,this.operator=e,this._internalType=jn}_setFieldName(e){return new la(this.operator,this.operands,e)}eq(e){var t=new la(aa.EQ,[e],this.fieldName);return this.and(t)}neq(e){var t=new la(aa.NEQ,[e],this.fieldName);return this.and(t)}gt(e){var t=new la(aa.GT,[e],this.fieldName);return this.and(t)}gte(e){var t=new la(aa.GTE,[e],this.fieldName);return this.and(t)}lt(e){var t=new la(aa.LT,[e],this.fieldName);return this.and(t)}lte(e){var t=new la(aa.LTE,[e],this.fieldName);return this.and(t)}in(e){wi(e,"array");var t=new la(aa.IN,e,this.fieldName);return this.and(t)}nin(e){wi(e,"array");var t=new la(aa.NIN,e,this.fieldName);return this.and(t)}geoNear(e){var t=new la(aa.GEO_NEAR,[e],this.fieldName);return this.and(t)}geoWithin(e){var t=new la(aa.GEO_WITHIN,[e],this.fieldName);return this.and(t)}geoIntersects(e){var t=new la(aa.GEO_INTERSECTS,[e],this.fieldName);return this.and(t)}exists(e){var t=new la(aa.EXISTS,[e],this.fieldName);return this.and(t)}mod(e,t){var i=new la(aa.MOD,[e,t],this.fieldName);return this.and(i)}all(e){var t=new la(aa.ALL,e,this.fieldName);return this.and(t)}elemMatch(e){var t=new la(aa.ELEM_MATCH,[e],this.fieldName);return this.and(t)}size(e){var t=new la(aa.SIZE,[e],this.fieldName);return this.and(t)}}function ua(e){return e&&e instanceof la&&e._internalType===jn}var ca;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(ca||(ca={}));new Set([ca.SET,ca.REMOVE,ca.INC,ca.MUL,ca.MIN,ca.MAX,ca.RENAME,ca.BIT,ca.PUSH,ca.POP,ca.SHIFT,ca.UNSHIFT,ca.ADD_TO_SET,ca.PULL,ca.PULL_ALL]);class da{constructor(e,t,i){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=Vn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=i||Fn}_setFieldName(e){return new da(this.operator,this.operands,e)}toJSON(){}}function ha(e){return e&&e instanceof da&&e._internalType===Vn}var pa;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(pa||(pa={}));pa.ABS,pa.ADD,pa.ADDTOSET,pa.ALLELEMENTSTRUE,pa.AND,pa.ANYELEMENTTRUE,pa.ARRAYELEMAT,pa.ARRAYTOOBJECT,pa.AVG,pa.CEIL,pa.CMP,pa.CONCAT,pa.CONCATARRAYS,pa.COND,pa.CONVERT,pa.DATEFROMPARTS,pa.DATETOPARTS,pa.DATEFROMSTRING,pa.DATETOSTRING,pa.DAYOFMONTH,pa.DAYOFWEEK,pa.DAYOFYEAR,pa.DIVIDE,pa.EQ,pa.EXP,pa.FILTER,pa.FIRST,pa.FLOOR,pa.GT,pa.GTE,pa.HOUR,pa.IFNULL,pa.IN,pa.INDEXOFARRAY,pa.INDEXOFBYTES,pa.INDEXOFCP,pa.ISARRAY,pa.ISODAYOFWEEK,pa.ISOWEEK,pa.ISOWEEKYEAR,pa.LAST,pa.LET,pa.LITERAL,pa.LN,pa.LOG,pa.LOG10,pa.LT,pa.LTE,pa.LTRIM,pa.MAP,pa.MAX,pa.MERGEOBJECTS,pa.META,pa.MIN,pa.MILLISECOND,pa.MINUTE,pa.MOD,pa.MONTH,pa.MULTIPLY,pa.NEQ,pa.NOT,pa.OBJECTTOARRAY,pa.OR,pa.POW,pa.PUSH,pa.RANGE,pa.REDUCE,pa.REVERSEARRAY,pa.RTRIM,pa.SECOND,pa.SETDIFFERENCE,pa.SETEQUALS,pa.SETINTERSECTION,pa.SETISSUBSET,pa.SETUNION,pa.SIZE,pa.SLICE,pa.SPLIT,pa.SQRT,pa.STDDEVPOP,pa.STDDEVSAMP,pa.STRCASECMP,pa.STRLENBYTES,pa.STRLENCP,pa.SUBSTR,pa.SUBSTRBYTES,pa.SUBSTRCP,pa.SUBTRACT,pa.SUM,pa.SWITCH,pa.TOBOOL,pa.TODATE,pa.TODECIMAL,pa.TODOUBLE,pa.TOINT,pa.TOLONG,pa.TOOBJECTID,pa.TOSTRING,pa.TOLOWER,pa.TOUPPER,pa.TRIM,pa.TRUNC,pa.TYPE,pa.WEEK,pa.YEAR,pa.ZIP;class fa{constructor(e,t,i){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this._internalType=zn,this.__safe_props__=void 0,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=i||Fn}_setFieldName(e){return new fa(this.operator,this.operands,e)}}function ga(e){return e&&e instanceof fa&&e._internalType===zn}var _a;!function(e){e.SLICE="slice"}(_a||(_a={}));new Set([_a.SLICE]);class ma{constructor(e,t,i){this.fieldName=void 0,this.operator=void 0,this.operands=void 0,this.__safe_props__=void 0,this._internalType=Yn,this.operator=e,this.operands=t,this.fieldName=i||Fn}_setFieldName(e){return new ma(this.operator,this.operands,e)}}function va(e){return e&&e instanceof ma&&e._internalType===Yn}var ya,Aa,ba;function Ea(e){return wa.apply(this,arguments)}function wa(){return(wa=s()((function*(e){var{env:t,collectionName:i,data:r,instanceContext:n,timing:a}=e,o=JSON.stringify(r);Ci({input:o,max:n.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(n.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var s={collection_name:i,data:o},l=JSON.stringify(s);a.tunnelStartTime=+new Date;var u=yield n.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:n.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||n.serviceContext.env});a.tunnelEndTime=+new Date;var c=u.data;return a.tunnelTimeNoCSNetCost=c.baseresponse.stat.qbase_cost_time,{_id:c._id_type===Aa.NUMBER?c._id_number:c._id}}))).apply(this,arguments)}function Ta(e){return Ca.apply(this,arguments)}function Ca(){return(Ca=s()((function*(e){var{collectionName:t,query:r,options:n,instanceContext:a,timing:o,env:s}=e,l=Fr()?e.explain:void 0,u=n&&n.multi,c=JSON.stringify({collection_name:t,query:JSON.stringify(r),multi:u,query_type:u?ya.WHERE:ya.DOC,explain:l});o.tunnelStartTime=+new Date;var d=yield a.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:a.serviceContext.name,serializedReqData:c,requireDataNotEmpty:!0,env:s||a.serviceContext.env});if(o.tunnelEndTime=+new Date,l){var{EJSON:h}=i(795);return h.deserialize(d.data)}var p=d.data;return o.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{removed:p.deleted}}))).apply(this,arguments)}function Sa(e){return Ia.apply(this,arguments)}function Ia(){return(Ia=s()((function*(e){var{env:t,collectionName:r,query:n,options:a={},instanceContext:o,timing:s,queryType:l}=e,u=Fr()?e.explain:void 0,c={collection_name:r,query:JSON.stringify(n),query_type:l,explain:u};a.offset&&(c.offset=a.offset),a.limit&&(c.limit=a.limit),a.order&&(c.order=a.order),a.projection&&(c.projection=JSON.stringify(a.projection));var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var h=yield o.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:o.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||o.serviceContext.env});if(s.tunnelEndTime=+new Date,u){var{EJSON:p}=i(795);return p.deserialize(h.data)}var f=h.data;s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time;var g=f.data_list?JSON.parse(f.data_list):[];return{list:g=o.engine.Decoder.decode(g),offset:f.offset,limit:f.limit,total:f.total}}))).apply(this,arguments)}function xa(e){return Pa.apply(this,arguments)}function Pa(){return(Pa=s()((function*(e){var{env:t,collectionName:r,query:n,data:a,options:o={},instanceContext:s,timing:l,queryType:u}=e,c=Fr()?e.explain:void 0,d=JSON.stringify(a);Ci({input:d,max:s.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:`${(s.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var h={collection_name:r,query:JSON.stringify(n),data:d,query_type:u,explain:c};h.multi=!1!==o.multi,h.merge=!1!==o.merge,o.upsert&&(h.upsert=o.upsert);var p=JSON.stringify(h);l.tunnelStartTime=+new Date;var f=yield s.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:s.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||s.serviceContext.env});if(l.tunnelEndTime=+new Date,c){var{EJSON:g}=i(795);return g.deserialize(f.data)}var _=f.data;return l.tunnelTimeNoCSNetCost=_.baseresponse.stat.qbase_cost_time,{updated:_.updated}}))).apply(this,arguments)}function Da(e){return Ra.apply(this,arguments)}function Ra(){return(Ra=s()((function*(e){var{env:t,collectionName:i,_id:r,data:n,options:a={},instanceContext:o,timing:s}=e,l=JSON.stringify(n);Ci({input:l,max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:`${(o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)} KB`});var u=$t(r),c={collection_name:i,_id_type:u?Aa.NUMBER:Aa.STRING,data:l};u?c._id_number=r:c._id=r;var d=JSON.stringify(c);s.tunnelStartTime=+new Date;var h=yield o.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:o.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:t||o.serviceContext.env});s.tunnelEndTime=+new Date;var p=h.data;return s.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,{_id:p._id_type===Aa.NUMBER?p._id_number:p._id,updated:p._id?0:1,created:p._id?1:0}}))).apply(this,arguments)}function Oa(e){return ka.apply(this,arguments)}function ka(){return(ka=s()((function*(e){var{env:t,collectionName:r,query:n,instanceContext:a,timing:o}=e,s=Fr()?e.explain:void 0,l={collection_name:r,query:JSON.stringify(n),query_type:ya.WHERE,explain:s},u=JSON.stringify(l);o.tunnelStartTime=+new Date;var c=yield a.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:a.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(o.tunnelEndTime=+new Date,s){var{EJSON:d}=i(795);return d.deserialize(c.data)}var h=c.data;return o.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time,{total:h.total}}))).apply(this,arguments)}function Ma(e){return Na.apply(this,arguments)}function Na(){return(Na=s()((function*(e){var{env:t,collectionName:r,stages:n,instanceContext:a,timing:o}=e,s=Fr()?e.explain:void 0,l={collection_name:r,stages:n.map((e=>{for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error(`empty encoded stage (${JSON.stringify(e)})`)})),explain:s},u=JSON.stringify(l);o.tunnelStartTime=+new Date;var c=yield a.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:a.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||a.serviceContext.env});if(o.tunnelEndTime=+new Date,s){var{EJSON:d}=i(795);return d.deserialize(c.data)}var h=c.data;o.tunnelTimeNoCSNetCost=h.baseresponse.stat.qbase_cost_time;var{EJSON:p}=i(795);return{list:JSON.parse(h.list).map((e=>p.parse(e)))}}))).apply(this,arguments)}function La(){return(La=s()((function*(e,t){var i=(yield e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})).data;return{envId:i.env_id,secretVersion:i.secret_version,signStr:i.sign_str,wsUrl:i.ws_url}}))).apply(this,arguments)}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(ya||(ya={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(Aa||(Aa={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(ba||(ba={}));var Ba=e=>{class t extends Ua{constructor(e,t){super(t),this.collection=void 0,this._internalType=Un,this.collection=e}pushStage(e,i){return new t(this.collection,[...this._stages,new Fa(e,i)])}end(t={}){var i="collection.aggregate",r={apiStartTime:+new Date},n=()=>Ma({env:e.database.config.env,collectionName:this.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(this._stages),instanceContext:e,timing:r,explain:t.explain});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,o){try{var s=yield n();if(t.explain&&Fr())return e(s);e({list:s.list,errMsg:or(i)})}catch(e){o(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}}return t};class Fa{constructor(e,t){this.stage=void 0,this.val=void 0,this._internalType=Gn,this.stage=e,this.val=t}}class Ua{constructor(e){this._stages=void 0,this._internalType=Wn,this.__safe_props__=void 0,this._stages=e}pushStage(e,t){return new Ua([...this._stages,new Fa(e,t)])}addFields(e){return this.pushStage("addFields",e)}bucket(e){return this.pushStage("bucket",e)}bucketAuto(e){return this.pushStage("bucketAuto",e)}collStats(e){return this.pushStage("collStats",e)}count(e){return this.pushStage("count",e)}facet(e){return this.pushStage("facet",e)}geoNear(e){return this.pushStage("geoNear",e)}graphLookup(e){return this.pushStage("graphLookup",e)}group(e){return this.pushStage("group",e)}indexStats(){return this.pushStage("indexStats",{})}limit(e){return this.pushStage("limit",e)}lookup(e){return this.pushStage("lookup",e)}match(e){return this.pushStage("match",e)}out(e){return this.pushStage("out",e)}project(e){return this.pushStage("project",e)}redact(e){return this.pushStage("redact",e)}replaceRoot(e){return this.pushStage("replaceRoot",e)}sample(e){return this.pushStage("sample",e)}skip(e){return this.pushStage("skip",e)}sort(e){return this.pushStage("sort",e)}sortByCount(e){return this.pushStage("sortByCount",e)}unwind(e){return this.pushStage("unwind",e)}end(){}}class Wa extends Ua{constructor(e,t=!1){super(e),this._sealed=void 0,this._sealed=t}pushStage(e,t){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new Wa([...this._stages,new Fa(e,t)])}done(){return new Wa(this._stages,!0)}}var Ga=e=>e&&e._internalType===Wn,Va=e=>e&&e._internalType===Gn,ja=new Set(["each","position","slice","sort"]),Ha={eq:e=>new la(aa.EQ,[e]),neq:e=>new la(aa.NEQ,[e]),lt:e=>new la(aa.LT,[e]),lte:e=>new la(aa.LTE,[e]),gt:e=>new la(aa.GT,[e]),gte:e=>new la(aa.GTE,[e]),in:e=>new la(aa.IN,e),nin:e=>new la(aa.NIN,e),geoNear:e=>new la(aa.GEO_NEAR,[e]),geoWithin:e=>new la(aa.GEO_WITHIN,[e]),geoIntersects:e=>new la(aa.GEO_INTERSECTS,[e]),and(...e){var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new ra(Bn.AND,t)},or(...e){var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new ra(Bn.OR,t)},nor(...e){var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new ra(Bn.NOR,t)},not:e=>new ra(Bn.NOT,[e]),exists:e=>new la(aa.EXISTS,[e]),mod:(e,t)=>new la(aa.MOD,[e,t]),all:e=>new la(aa.ALL,e),elemMatch:e=>new la(aa.ELEM_MATCH,[e]),size:e=>new la(aa.SIZE,[e]),expr:e=>new la(aa.EXPR,[e]),set:e=>new da(ca.SET,[e]),remove:()=>new da(ca.REMOVE,[]),inc:e=>new da(ca.INC,[e]),mul:e=>new da(ca.MUL,[e]),min:e=>new da(ca.MIN,[e]),max:e=>new da(ca.MAX,[e]),rename:e=>new da(ca.RENAME,[e]),bit:e=>new da(ca.BIT,[e]),push(e){var t={};if(Qt(e))t.each=e;else if(zt(e)&&Qt(e.each)){var i=Object.keys(e);if(1===i.length)t=e;else{var r=!1;for(var n of i)if(!ja.has(n)){r=!0;break}t=r?[e]:e}}else t.each=[e];return new da(ca.PUSH,[t])},pop:()=>new da(ca.POP,[]),shift:()=>new da(ca.SHIFT,[]),unshift(...e){var t=Qt(arguments[0])?arguments[0]:Array.from(arguments);return new da(ca.UNSHIFT,t)},addToSet:e=>new da(ca.ADD_TO_SET,[e]),pull:e=>new da(ca.PULL,[e]),pullAll:e=>new da(ca.PULL_ALL,[e]),project:{slice:e=>new ma(_a.SLICE,[e])},aggregate:{pipeline:()=>new Wa([]),abs:e=>new fa(pa.ABS,[e]),add:e=>new fa(pa.ADD,[e]),addToSet:e=>new fa(pa.ADDTOSET,[e]),allElementsTrue:e=>new fa(pa.ALLELEMENTSTRUE,[e]),and:e=>new fa(pa.AND,[e]),anyElementTrue:e=>new fa(pa.ANYELEMENTTRUE,[e]),arrayElemAt:e=>new fa(pa.ARRAYELEMAT,[e]),arrayToObject:e=>new fa(pa.ARRAYTOOBJECT,[e]),avg:e=>new fa(pa.AVG,[e]),ceil:e=>new fa(pa.CEIL,[e]),cmp:e=>new fa(pa.CMP,[e]),concat:e=>new fa(pa.CONCAT,[e]),concatArrays:e=>new fa(pa.CONCATARRAYS,[e]),cond:e=>new fa(pa.COND,[e]),convert:e=>new fa(pa.CONVERT,[e]),dateFromParts:e=>new fa(pa.DATEFROMPARTS,[e]),dateToParts:e=>new fa(pa.DATETOPARTS,[e]),dateFromString:e=>new fa(pa.DATEFROMSTRING,[e]),dateToString:e=>new fa(pa.DATETOSTRING,[e]),dayOfMonth:e=>new fa(pa.DAYOFMONTH,[e]),dayOfWeek:e=>new fa(pa.DAYOFWEEK,[e]),dayOfYear:e=>new fa(pa.DAYOFYEAR,[e]),divide:e=>new fa(pa.DIVIDE,[e]),eq:e=>new fa(pa.EQ,[e]),exp:e=>new fa(pa.EXP,[e]),filter:e=>new fa(pa.FILTER,[e]),first:e=>new fa(pa.FIRST,[e]),floor:e=>new fa(pa.FLOOR,[e]),gt:e=>new fa(pa.GT,[e]),gte:e=>new fa(pa.GTE,[e]),hour:e=>new fa(pa.HOUR,[e]),ifNull:e=>new fa(pa.IFNULL,[e]),in:e=>new fa(pa.IN,[e]),indexOfArray:e=>new fa(pa.INDEXOFARRAY,[e]),indexOfBytes:e=>new fa(pa.INDEXOFBYTES,[e]),indexOfCP:e=>new fa(pa.INDEXOFCP,[e]),isArray:e=>new fa(pa.ISARRAY,[e]),isoDayOfWeek:e=>new fa(pa.ISODAYOFWEEK,[e]),isoWeek:e=>new fa(pa.ISOWEEK,[e]),isoWeekYear:e=>new fa(pa.ISOWEEKYEAR,[e]),last:e=>new fa(pa.LAST,[e]),let:e=>new fa(pa.LET,[e]),literal:e=>new fa(pa.LITERAL,[e]),ln:e=>new fa(pa.LN,[e]),log:e=>new fa(pa.LOG,[e]),log10:e=>new fa(pa.LOG10,[e]),lt:e=>new fa(pa.LT,[e]),lte:e=>new fa(pa.LTE,[e]),ltrim:e=>new fa(pa.LTRIM,[e]),map:e=>new fa(pa.MAP,[e]),max:e=>new fa(pa.MAX,[e]),mergeObjects:e=>new fa(pa.MERGEOBJECTS,[e]),meta:e=>new fa(pa.META,[e]),min:e=>new fa(pa.MIN,[e]),millisecond:e=>new fa(pa.MILLISECOND,[e]),minute:e=>new fa(pa.MINUTE,[e]),mod:e=>new fa(pa.MOD,[e]),month:e=>new fa(pa.MONTH,[e]),multiply:e=>new fa(pa.MULTIPLY,[e]),neq:e=>new fa(pa.NEQ,[e]),not:e=>new fa(pa.NOT,[e]),objectToArray:e=>new fa(pa.OBJECTTOARRAY,[e]),or:e=>new fa(pa.OR,[e]),pow:e=>new fa(pa.POW,[e]),push:e=>new fa(pa.PUSH,[e]),range:e=>new fa(pa.RANGE,[e]),reduce:e=>new fa(pa.REDUCE,[e]),reverseArray:e=>new fa(pa.REVERSEARRAY,[e]),rtrim:e=>new fa(pa.RTRIM,[e]),second:e=>new fa(pa.SECOND,[e]),setDifference:e=>new fa(pa.SETDIFFERENCE,[e]),setEquals:e=>new fa(pa.SETEQUALS,[e]),setIntersection:e=>new fa(pa.SETINTERSECTION,[e]),setIsSubset:e=>new fa(pa.SETISSUBSET,[e]),setUnion:e=>new fa(pa.SETUNION,[e]),size:e=>new fa(pa.SIZE,[e]),slice:e=>new fa(pa.SLICE,[e]),split:e=>new fa(pa.SPLIT,[e]),sqrt:e=>new fa(pa.SQRT,[e]),stdDevPop:e=>new fa(pa.STDDEVPOP,[e]),stdDevSamp:e=>new fa(pa.STDDEVSAMP,[e]),strcasecmp:e=>new fa(pa.STRCASECMP,[e]),strLenBytes:e=>new fa(pa.STRLENBYTES,[e]),strLenCP:e=>new fa(pa.STRLENCP,[e]),substr:e=>new fa(pa.SUBSTR,[e]),substrBytes:e=>new fa(pa.SUBSTRBYTES,[e]),substrCP:e=>new fa(pa.SUBSTRCP,[e]),subtract:e=>new fa(pa.SUBTRACT,[e]),sum:e=>new fa(pa.SUM,[e]),switch:e=>new fa(pa.SWITCH,[e]),toBool:e=>new fa(pa.TOBOOL,[e]),toDate:e=>new fa(pa.TODATE,[e]),toDecimal:e=>new fa(pa.TODECIMAL,[e]),toDouble:e=>new fa(pa.TODOUBLE,[e]),toInt:e=>new fa(pa.TOINT,[e]),toLong:e=>new fa(pa.TOLONG,[e]),toObjectId:e=>new fa(pa.TOOBJECTID,[e]),toString:e=>new fa(pa.TOSTRING,[e]),toLower:e=>new fa(pa.TOLOWER,[e]),toUpper:e=>new fa(pa.TOUPPER,[e]),trim:e=>new fa(pa.TRIM,[e]),trunc:e=>new fa(pa.TRUNC,[e]),type:e=>new fa(pa.TYPE,[e]),week:e=>new fa(pa.WEEK,[e]),year:e=>new fa(pa.YEAR,[e]),zip:e=>new fa(pa.ZIP,[e])}};function za(e){return new Ya(e)}class Ya{constructor(e={offset:0}){this.options=void 0,wi(e,"object","serverDate.options"),this.options=e}get _internalType(){return Jn}toJSON(){return{$date:this.options}}}function $a(e,t){return go(e)?lo(e):new qa(e,t)}class qa{constructor(e,t){this.longitude=void 0,this.latitude=void 0,this._internalType=$n,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var i=e,r=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:()=>i,set(e){if(wi(e,"number","longitude"),e>180||e<-180)throw new ei({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:()=>r,set(e){if(wi(e,"number","latitude"),e>90||e<-90)throw new ei({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=i,this.latitude=r}toJSON(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e}toString(){return JSON.stringify(this.toJSON())}}function Qa(e){return _o(e)?uo(e):new Za(e)}class Za{constructor(e){this.points=void 0,this._internalType=Zn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"MultiPoint",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Ka(e){return mo(e)?co(e):new Xa(e)}class Xa{constructor(e){this.points=void 0,this._internalType=qn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}toJSON(){return{type:"LineString",coordinates:this.points.map((e=>[e.longitude,e.latitude]))}}toString(){return JSON.stringify(this.toJSON())}}function Ja(e){return vo(e)?ho(e):new eo(e)}class eo{constructor(e){this.lines=void 0,this._internalType=Kn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"MultiLineString",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function to(e){return yo(e)?po(e):new io(e)}class io{constructor(e){this.lines=void 0,this._internalType=Qn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}toJSON(){return{type:"Polygon",coordinates:this.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))}}toString(){return JSON.stringify(this.toJSON())}}function ro(e){return Ao(e)?fo(e):new no(e)}class no{constructor(e){this.polygons=void 0,this._internalType=Xn,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}toJSON(){return{type:"MultiPolygon",coordinates:this.polygons.map((e=>e.lines.map((e=>e.points.map((e=>[e.longitude,e.latitude]))))))}}toString(){return JSON.stringify(this.toJSON())}}var ao,oo,so=undefined;function lo(e){return $a(e.coordinates[0],e.coordinates[1])}function uo(e){return Qa(e.coordinates.map((e=>$a(e[0],e[1]))))}function co(e){return Ka(e.coordinates.map((e=>$a(e[0],e[1]))))}function ho(e){return Ja(e.coordinates.map((e=>Ka(e.map((e=>$a(e[0],e[1])))))))}function po(e){return to(e.coordinates.map((e=>Ka(e.map((e=>$a(e[0],e[1])))))))}function fo(e){return ro(e.coordinates.map((e=>to(e.map((e=>Ka(e.map((e=>$a(e[0],e[1]))))))))))}function go(e){return zt(e)&&bo(e.coordinates)}function _o(e){return zt(e)&&Eo(e.coordinates)}function mo(e){return zt(e)&&wo(e.coordinates)}function vo(e){return zt(e)&&To(e.coordinates)}function yo(e){return zt(e)&&Co(e.coordinates)}function Ao(e){return zt(e)&&(t=e.coordinates,Qt(t)&&t.every(Co));var t}function bo(e){return Qt(e)&&$t(e[0])&&$t(e[1])}function Eo(e){return Qt(e)&&e.every(bo)}function wo(e){return Eo(e)}function To(e){return Qt(e)&&e.every(wo)}function Co(e){return To(e)}function So(e){return Io(e,[e])}function Io(e,t){if(!Xt(e)){if(Zt(e))return{$date:+e};if(Kt(e))return{$regex:e.source,$options:e.flags};if(Qt(e))return e.map((e=>{if(t.indexOf(e)>-1)throw new ei({errCode:Jt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Io(e,[...t,e])}));if(zt(e)){var i=a()({},e);for(var r in i){if(t.indexOf(i[r])>-1)throw new ei({errCode:Jt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});i[r]=Io(i[r],[...t,i[r]])}return i}return e}switch(e._internalType){case $n:case Zn:case qn:case Kn:case Qn:case Xn:return e.toJSON();case Jn:return{$date:e.options};case ea:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function xo(e,t,i,r){var n=a()({},e);for(var o in e)if(!/^\$/.test(o)){var s=e[o];if(s&&zt(s)&&!t(s)){if(r.indexOf(s)>-1)throw new ei({errCode:Jt.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var l=xo(s,t,[...i,o],[...r,s]);n[o]=l;var u=!1;for(var c in l)/^\$/.test(c)?u=!0:(n[`${o}.${c}`]=l[c],delete n[o][c]);u||delete n[o]}}return n}function Po(e){return xo(e,Oo,[],[e])}function Do(e){return xo(e,(e=>!1),[],[e])}function Ro(e,t,i){for(var r in t[i]||delete e[i],t)e[r]?Qt(e[r])?e[r].push(t[r]):zt(e[r])?zt(t[r])?Object.assign(e[r],t[r]):(console.warn(`unmergable condition, query is object but condition is ${Ht(t)}, can only overwrite`,t,i),e[r]=t[r]):(console.warn(`to-merge query is of type ${Ht(e)}, can only overwrite`,e,t,i),e[r]=t[r]):e[r]=t[r]}function Oo(e){return Xt(e)||Zt(e)||Kt(e)}function ko(e){return So(e)}function Mo(e){return function(e){var t=a()({},e);for(var i in t)switch(i){case"$date":switch(Ht(t[i])){case"number":return new Date(t[i]);case"object":return za(t[i])}break;case"type":switch(t.coordinates,t.type){case"Point":if(go(t))return lo(t);break;case"MultiPoint":if(_o(t))return uo(t);break;case"LineString":if(mo(t))return co(t);break;case"MultiLineString":if(vo(t))return ho(t);break;case"Polygon":if(yo(t))return po(t);break;case"MultiPolygon":if(Ao(t))return fo(t)}}return e}(e)}function No(e,t){return{limit:e._query.limit,offset:e._query.offset,order:Lo(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function Lo(e){return e.map((e=>({field:e.fieldPath,direction:e.order===_u.DESC?ba.DESC:ba.ASC})))}function Bo(e){var t=Do(e);for(var i in t)!0===t[i]||1===t[i]?t[i]=1:!1===t[i]||0===t[i]?t[i]=0:delete t[i];return t}!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(ao||(ao={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(oo||(oo={}));var Fo={[ao.DISCONNECTED]:{transitions:[{accept:oo.CONNECTION_START,to:ao.CONNECTING}]},[ao.CONNECTING]:{transitions:[{accept:oo.CONNECTION_SUCCESS,to:ao.CONNECTED},{accept:oo.CONNECTION_FAIL,to:ao.DISCONNECTED},{accept:oo.DISCONNECT,to:ao.DISCONNECTED}]},[ao.CONNECTED]:{transitions:[{accept:oo.DISCONNECT,to:ao.DISCONNECTED},{accept:oo.CONNECTION_FAIL,to:ao.DISCONNECTED}]}},Uo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wo=/^\w*$/;var Go=function(e,t){if($e(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!Bi(e))||(Wo.test(e)||!Uo.test(e)||null!=t&&e in Object(t))};function Vo(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],a=i.cache;if(a.has(n))return a.get(n);var o=e.apply(this,r);return i.cache=a.set(n,o)||a,o};return i.cache=new(Vo.Cache||me),i}Vo.Cache=me;var jo=Vo;var Ho=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zo=/\\(\\)?/g,Yo=function(e){var t=jo(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ho,(function(e,i,r,n){t.push(r?n.replace(zo,"$1"):i||e)})),t}));var $o=function(e,t){for(var i=-1,r=null==e?0:e.length,n=Array(r);++i<r;)n[i]=t(e[i],i,e);return n},qo=C?C.prototype:void 0,Qo=qo?qo.toString:void 0;var Zo=function e(t){if("string"==typeof t)return t;if($e(t))return $o(t,e)+"";if(Bi(t))return Qo?Qo.call(t):"";var i=t+"";return"0"==i&&1/t==-Infinity?"-0":i};var Ko=function(e){return null==e?"":Zo(e)};var Xo=function(e,t){return $e(e)?e:Go(e,t)?[e]:Yo(Ko(e))};var Jo=function(e){if("string"==typeof e||Bi(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var es=function(e,t,i,r){if(!N(e))return e;for(var n=-1,a=(t=Xo(t,e)).length,o=a-1,s=e;null!=s&&++n<a;){var l=Jo(t[n]),u=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(n!=o){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=N(c)?c:wt(t[n+1])?[]:{})}yt(s,l,u),s=s[l]}return e};var ts=function(e,t,i){return null==e?e:es(e,t,i)};var is=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var rs=function(e,t){for(var i=0,r=(t=Xo(t,e)).length;null!=e&&i<r;)e=e[Jo(t[i++])];return i&&i==r?e:void 0};var ns=function(e,t,i){var r=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(i=i>n?n:i)<0&&(i+=n),n=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(n);++r<n;)a[r]=e[r+t];return a};var as=function(e,t){return t.length<2?e:rs(e,ns(t,0,-1))};var os=function(e,t){return t=Xo(t,e),null==(e=as(e,t))||delete e[Jo(is(t))]};var ss=function(e,t){return null==e||os(e,t)};var ls=function(e,t){for(var i=-1,r=null==e?0:e.length;++i<r&&!1!==t(e[i],i,e););return e},us=Le(Object.keys,Object),cs=Object.prototype.hasOwnProperty;var ds=function(e){if(!Ue(e))return us(e);var t=[];for(var i in Object(e))cs.call(e,i)&&"constructor"!=i&&t.push(i);return t};var hs=function(e){return Qe(e)?Ct(e):ds(e)};var ps=function(e,t){return e&&At(t,hs(t),e)};var fs=function(e,t){return e&&At(t,Pt(t),e)};var gs=function(e,t){for(var i=-1,r=null==e?0:e.length,n=0,a=[];++i<r;){var o=e[i];t(o,i,e)&&(a[n++]=o)}return a};var _s=function(){return[]},ms=Object.prototype.propertyIsEnumerable,vs=Object.getOwnPropertySymbols,ys=vs?function(e){return null==e?[]:(e=Object(e),gs(vs(e),(function(t){return ms.call(e,t)})))}:_s;var As=function(e,t){return At(e,ys(e),t)};var bs=function(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e},Es=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)bs(t,ys(e)),e=Be(e);return t}:_s;var ws=function(e,t){return At(e,Es(e),t)};var Ts=function(e,t,i){var r=t(e);return $e(e)?r:bs(r,i(e))};var Cs=function(e){return Ts(e,hs,ys)};var Ss=function(e){return Ts(e,Pt,Es)},Is=K(T,"DataView"),xs=K(T,"Promise"),Ps=K(T,"Set"),Ds=K(T,"WeakMap"),Rs="[object Map]",Os="[object Promise]",ks="[object Set]",Ms="[object WeakMap]",Ns="[object DataView]",Ls=V(Is),Bs=V(X),Fs=V(xs),Us=V(Ps),Ws=V(Ds),Gs=M;(Is&&Gs(new Is(new ArrayBuffer(1)))!=Ns||X&&Gs(new X)!=Rs||xs&&Gs(xs.resolve())!=Os||Ps&&Gs(new Ps)!=ks||Ds&&Gs(new Ds)!=Ms)&&(Gs=function(e){var t=M(e),i="[object Object]"==t?e.constructor:void 0,r=i?V(i):"";if(r)switch(r){case Ls:return Ns;case Bs:return Rs;case Fs:return Os;case Us:return ks;case Ws:return Ms}return t});var Vs=Gs,js=Object.prototype.hasOwnProperty;var Hs=function(e){var t=e.length,i=new e.constructor(t);return t&&"string"==typeof e[0]&&js.call(e,"index")&&(i.index=e.index,i.input=e.input),i};var zs=function(e,t){var i=t?Re(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)},Ys=/\w*$/;var $s=function(e){var t=new e.constructor(e.source,Ys.exec(e));return t.lastIndex=e.lastIndex,t},qs=C?C.prototype:void 0,Qs=qs?qs.valueOf:void 0;var Zs=function(e){return Qs?Object(Qs.call(e)):{}};var Ks=function(e,t,i){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Re(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return zs(e,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Oe(e,i);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return $s(e);case"[object Set]":return new r;case"[object Symbol]":return Zs(e)}};var Xs=function(e){return Ge(e)&&"[object Map]"==Vs(e)},Js=ft&&ft.isMap,el=Js?ct(Js):Xs;var tl=function(e){return Ge(e)&&"[object Set]"==Vs(e)},il=ft&&ft.isSet,rl=il?ct(il):tl,nl="[object Arguments]",al="[object Function]",ol="[object Object]",sl={};sl[nl]=sl["[object Array]"]=sl["[object ArrayBuffer]"]=sl["[object DataView]"]=sl["[object Boolean]"]=sl["[object Date]"]=sl["[object Float32Array]"]=sl["[object Float64Array]"]=sl["[object Int8Array]"]=sl["[object Int16Array]"]=sl["[object Int32Array]"]=sl["[object Map]"]=sl["[object Number]"]=sl["[object Object]"]=sl["[object RegExp]"]=sl["[object Set]"]=sl["[object String]"]=sl["[object Symbol]"]=sl["[object Uint8Array]"]=sl["[object Uint8ClampedArray]"]=sl["[object Uint16Array]"]=sl["[object Uint32Array]"]=!0,sl["[object Error]"]=sl[al]=sl["[object WeakMap]"]=!1;var ll=function e(t,i,r,n,a,o){var s,l=1&i,u=2&i,c=4&i;if(r&&(s=a?r(t,n,a,o):r(t)),void 0!==s)return s;if(!N(t))return t;var d=$e(t);if(d){if(s=Hs(t),!l)return ke(t,s)}else{var h=Vs(t),p=h==al||"[object GeneratorFunction]"==h;if(tt(t))return Pe(t,l);if(h==ol||h==nl||p&&!a){if(s=u||p?{}:We(t),!l)return u?ws(t,fs(s,t)):As(t,ps(s,t))}else{if(!sl[h])return a?t:{};s=Ks(t,h,l)}}o||(o=new Ae);var f=o.get(t);if(f)return f;o.set(t,s),rl(t)?t.forEach((function(n){s.add(e(n,i,r,n,t,o))})):el(t)&&t.forEach((function(n,a){s.set(a,e(n,i,r,a,t,o))}));var g=d?void 0:(c?u?Ss:Cs:u?Pt:hs)(t);return ls(g||t,(function(n,a){g&&(n=t[a=n]),yt(s,a,e(n,i,r,a,t,o))})),s};var ul,cl,dl=function(e){return ll(e,5)};!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(ul||(ul={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(cl||(cl={}));var hl={accept:cl.CLOSE,to:ul.CLOSED},pl={accept:cl.WS_DISCONNECTED,to:ul.CLOSED},fl={accept:cl.WS_DISCONNECTED,to:ul.PAUSED},gl={[ul.UNINIT]:{transitions:[{accept:cl.LOGIN_START,to:ul.INIT_LOGGING_IN},pl,hl]},[ul.CLOSED]:{transitions:[hl]},[ul.INIT_LOGGING_IN]:{transitions:[{accept:cl.LOGIN_FAIL,to:ul.INIT_LOGIN_FAIL},{accept:cl.LOGIN_SUCCESS,to:ul.INIT_LOGGED_IN},pl,hl]},[ul.INIT_LOGIN_FAIL]:{transitions:[{accept:cl.LOGIN_START,to:ul.INIT_LOGGING_IN},pl,hl]},[ul.INIT_LOGGED_IN]:{transitions:[{accept:cl.INIT_WATCH_START,to:ul.INIT_WATCH_PENDING},pl,hl]},[ul.INIT_WATCH_PENDING]:{transitions:[{accept:cl.INIT_WATCH_FAIL,to:ul.INIT_WATCH_FAIL},{accept:cl.INIT_WATCH_SUCCESS,to:ul.INIT_WATCH_SUCCESS},pl,hl]},[ul.INIT_WATCH_FAIL]:{transitions:[{accept:cl.LOGIN_START,to:ul.INIT_LOGGING_IN},pl,hl]},[ul.INIT_WATCH_SUCCESS]:{transitions:[{accept:cl.WS_DISCONNECTED,to:ul.PAUSED},{accept:cl.NEED_REBUILD_WATCH,to:ul.ABNORMAL_WATCH_STATUS},fl,hl]},[ul.PAUSED]:{transitions:[{accept:cl.LOGIN_START,to:ul.REBUILD_LOGGING_IN},fl,hl]},[ul.ABNORMAL_WATCH_STATUS]:{transitions:[{accept:cl.LOGIN_START,to:ul.REBUILD_LOGGING_IN},fl,hl]},[ul.REBUILD_LOGGING_IN]:{transitions:[{accept:cl.LOGIN_FAIL,to:ul.REBUILD_LOGIN_FAIL},{accept:cl.LOGIN_SUCCESS,to:ul.REBUILD_LOGGED_IN},fl,hl]},[ul.REBUILD_LOGIN_FAIL]:{transitions:[{accept:cl.LOGIN_START,to:ul.REBUILD_LOGGING_IN},fl,hl]},[ul.REBUILD_LOGGED_IN]:{transitions:[{accept:cl.REBUILD_WATCH_START,to:ul.REBUILD_WATCH_PENDING},fl,hl]},[ul.REBUILD_WATCH_PENDING]:{transitions:[{accept:cl.REBUILD_WATCH_FAIL,to:ul.REBUILD_WATCH_FAIL},{accept:cl.REBUILD_WATCH_SUCCESS,to:ul.REBUILD_WATCH_SUCCESS},fl,hl]},[ul.REBUILD_WATCH_FAIL]:{transitions:[{accept:cl.LOGIN_START,to:ul.REBUILD_LOGGING_IN},fl,hl]},[ul.REBUILD_WATCH_SUCCESS]:{transitions:[{accept:cl.NEED_REBUILD_WATCH,to:ul.ABNORMAL_WATCH_STATUS},fl,hl]}};class _l{constructor(e){for(var t in this.currentState=void 0,this.states=void 0,this.listeners=new Set,this.history=void 0,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((({accept:e,to:t})=>[e,t])))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}transition(e,t){if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new ml(`current state (${this.currentState}) != expected from state (${t instanceof Set?JSON.stringify([...t]):t})`,"unexpectedFromState");var i="string"==typeof e?{type:e}:e,r=this.states.get(this.currentState),n=r.transitions.get(i.type);if(!n)throw new ml(`current state (${this.currentState}) does not accept "${i.type}"`,"unexpectedInput");this.currentState=n,this.history.options.enable&&(this.history.transitions.push({event:i.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((e=>{try{e({event:i,from:r.name,to:this.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))}canAccept(e){return this.states.get(this.currentState).transitions.has(e)}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}getHistoryRepresentation(e){return this.history.options.enable?`states: ${(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((({state:e,event:t})=>`${t?`-(${t})->`:""}${e}`)).join("")}`:""}}class ml extends Error{constructor(e,t,i){super(e),this.type="transition",this.subtype=void 0,this.payload=void 0,this.generic=!0,this.subtype=t,this.payload=i}}function vl(e=""){return`${e?`${e}_`:""}${+new Date}_${Math.random()}`}var yl=1128,Al=1,bl=2,El=3,wl=4,Tl=5,Cl=6,Sl=7,Il=8,xl=9,Pl=10,Dl=11,Rl=12,Ol=13,kl=14,Ml=15,Nl=16,Ll=17,Bl=18,Fl=30,Ul=31,Wl=32,Gl=33,Vl=34,jl=35,Hl=36,zl=37,Yl=38,$l=39,ql=40,Ql=50,Zl=51,Kl=52,Xl=53,Jl=54,eu=55,tu=56,iu=57,ru=58,nu=59,au=60;class ou{constructor(e){this.close=void 0,this.onChange=void 0,this.onError=void 0,this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:()=>e.virtualClient})}}class su{constructor(e){this.id=void 0,this.docChanges=void 0,this.docs=void 0,this.type=void 0,this.EJSON=void 0,this.requestId=void 0,this.watchId=void 0;var{id:t,docChanges:i,docs:r,type:n,EJSON:a,requestId:o,watchId:s}=e;Object.defineProperties(this,{id:{get:()=>t,enumerable:!0},docChanges:{get:()=>i,enumerable:!0},docs:{get:()=>r,enumerable:!0},type:{get:()=>n,enumerable:!0}}),this.requestId=o,this.watchId=s}}class lu extends Error{constructor(e){super(`Watch Error ${JSON.stringify(e.msgData)} (requestid: ${e.requestId})`),this.isRealtimeErrorMessageError=!0,this.payload=void 0,this.payload=e}}var uu=e=>e&&e.isRealtimeErrorMessageError,cu=new Set([ul.REBUILD_LOGGING_IN,ul.INIT_LOGGING_IN]),du=e=>{0};class hu{constructor(e){var t=this;this.watchId=void 0,this._parentFSM=void 0,this._fsm=void 0,this.envId=void 0,this.collectionName=void 0,this.query=void 0,this.limit=void 0,this.orderBy=void 0,this.queryType=void 0,this.send=void 0,this.login=void 0,this.isWSConnected=void 0,this.getWaitExpectedTimeoutLength=void 0,this.getEJSON=void 0,this.getServiceContext=void 0,this.onWatchStart=void 0,this.onWatchClose=void 0,this.timing=void 0,this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this.debug=void 0,this.wsclient=void 0,this.listener=void 0,this._availableRetries=void 0,this._ackTimeoutId=void 0,this._loginInvalidated=!1,this._errors=[],this._parentFSMListener=void 0,this._FSMListener=void 0,this._wsDisconnectionTS=void 0,this.sessionInfo=void 0,this._waitExpectedTimeoutId=void 0,this._snapshotHistory=[],this._login=function(){var e=s()((function*(e){t._fsm.transition(cl.LOGIN_START);try{var i=yield t.login(t.envId,e||t._loginInvalidated,t.timing);t.envId||(t.envId=i.envId),t._fsm.transition(cl.LOGIN_SUCCESS,cu),t._loginInvalidated=!1}catch(e){t._errors.push(e),t._loginInvalidated=!0;try{t._fsm.transition(cl.LOGIN_FAIL,cu)}catch(e){console.warn("[realtime]",e)}}}));return function(t){return e.apply(this,arguments)}}(),this.initWatch=s()((function*(){var e=Date.now(),i=vl();try{t._fsm.transition(cl.INIT_WATCH_START,ul.INIT_LOGGED_IN);var r=t.envId,n={watchId:t.watchId,requestId:i,msgType:"INIT_WATCH",msgData:{envId:r,collName:t.collectionName,query:t.query,limit:t.limit,orderBy:t.orderBy,queryType:t.queryType}},a=yield t.send({msg:n,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus();var{events:o,currEvent:s}=a.msgData;if(t.sessionInfo={queryID:a.msgData.queryID,currentEventId:s-1,currentDocs:[],currentEventTS:Date.now()},o.length>0){for(var l of o)l.ID=s;t.handleServerEvents(a)}else{t.sessionInfo.currentEventId=s;var u=new su({id:s,docChanges:[],docs:[],type:"init",EJSON:t.getEJSON(),requestId:a.requestId,watchId:t.watchId});pi((()=>t.listener.onChange(u)))(),t.scheduleSendACK(),t.debug&&t._snapshotHistory.push(u)}t.onWatchStart(t,t.sessionInfo.queryID),t._availableRetries.INIT_WATCH=2,t._wsDisconnectionTS=void 0,er(yl,Tl,!0),Ji({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(cl.INIT_WATCH_SUCCESS)}catch(r){Ji({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(r,{operationName:"INIT_WATCH",requestId:i})}})),this.rebuildWatch=s()((function*(){var e=Date.now(),i=vl();try{t._fsm.transition(cl.REBUILD_WATCH_START,ul.REBUILD_LOGGED_IN);var r=t.envId;if(!t.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(t._wsDisconnectionTS&&Date.now()-t._wsDisconnectionTS>.9*t.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new ni("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});var n={watchId:t.watchId,requestId:i,msgType:"REBUILD_WATCH",msgData:{envId:r,collName:t.collectionName,queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}},a=yield t.send({msg:n,waitResponse:!0,skipOnMessage:!0,timeout:1e4});t.assertAsyncTaskStatus(),yield t.handleServerEvents(a),t._availableRetries.REBUILD_WATCH=2,t._wsDisconnectionTS=void 0,er(yl,Sl,!0),Ji({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),t._fsm.transition(cl.REBUILD_WATCH_SUCCESS)}catch(r){Ji({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),t.handleWatchEstablishmentError(r,{operationName:"REBUILD_WATCH",requestId:i})}})),this.handleWatchEstablishmentError=function(){var e=s()((function*(e,i){var r="INIT_WATCH"===i.operationName,n=n=>{var a=`${n||e} (${r?"initWatch":"rebuildWatch"} requestId ${i.requestId})`;if(t.closeWithError(new ei({errCode:r?Jt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:Jt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:a})),er(yl,r?Cl:Il,!0),!uu(e)){if(ai(e)){switch(e.payload.subtype){case"totalConnectionTimeout":er(yl,r?Jl:eu,!0);break;case"queryEventCacheClientTimeout":r||er(yl,tu,!0)}return}return li(e)?void er(yl,r?iu:ru,!0):void er(yl,r?nu:au,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":er(yl,r?Ql:Zl,!0);break;default:er(yl,r?Kl:Xl,!0)}};t._errors.push(e),t.handleCommonError(e,{onSignError:()=>{t._loginInvalidated=!0,t._fsm.transition(t.initialized?cl.REBUILD_WATCH_FAIL:cl.INIT_WATCH_FAIL)},onTimeoutError:e=>{e.payload&&!e.payload.retryable?n(e):t._fsm.transition(t.initialized?cl.REBUILD_WATCH_FAIL:cl.INIT_WATCH_FAIL)},onNotRetryableError:n,onCancelledError:e=>{t._fsm.transition(t.initialized?cl.REBUILD_WATCH_FAIL:cl.INIT_WATCH_FAIL)},onUnknownError:()=>{t._fsm.transition(t.initialized?cl.REBUILD_WATCH_FAIL:cl.INIT_WATCH_FAIL)}})}));return function(t,i){return e.apply(this,arguments)}}(),this.closeWatch=s()((function*(){t.closeWatchInvoked=!0;var e=t.sessionInfo?t.sessionInfo.queryID:"";if(t._fsm.currentState!==ul.CLOSED)try{t._fsm.transition(cl.CLOSE),yield t.sendCloseWatch()}catch(e){console.warn(`[realtime] non-fatal error while closing watch: ${e}`)}finally{t.sessionInfo=void 0,t.onWatchClose(t,e),t._cleanup()}})),this.sendCloseWatch=s()((function*(){var e={watchId:t.watchId,requestId:vl(),msgType:"CLOSE_WATCH",msgData:null};yield t.send({msg:e})})),this.scheduleSendACK=()=>{this.clearACKSchedule(),this._ackTimeoutId=setTimeout((()=>{this._waitExpectedTimeoutId?this.scheduleSendACK():this.sendACK()}),1e4)},this.clearACKSchedule=()=>{this._ackTimeoutId&&clearTimeout(this._ackTimeoutId)},this.sendACK=s()((function*(){try{if(t._fsm.currentState!==ul.INIT_WATCH_SUCCESS&&t._fsm.currentState!==ul.REBUILD_WATCH_SUCCESS)return void t.scheduleSendACK();if(!t.sessionInfo)return void console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)");var e={watchId:t.watchId,requestId:vl(),msgType:"CHECK_LAST",msgData:{queryID:t.sessionInfo.queryID,eventID:t.sessionInfo.currentEventId}};yield t.send({msg:e}),t.scheduleSendACK()}catch(e){if(uu(e)){var i=e.payload;switch(i.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return t._loginInvalidated=!0,void(t._fsm.currentState!==ul.INIT_WATCH_SUCCESS&&t._fsm.currentState!==ul.REBUILD_WATCH_SUCCESS||t._fsm.transition(cl.NEED_REBUILD_WATCH));case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return void t.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:i.msgData.code}))}}t._availableRetries.CHECK_LAST&&t._availableRetries.CHECK_LAST>0?(t._availableRetries.CHECK_LAST--,t.scheduleSendACK()):t.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:e}))}})),this.handleCommonError=(e,t)=>{if(uu(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(ai(e))return void t.onTimeoutError(e);if(li(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId=`watchid_${+new Date}_${Math.random()}`,this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new _l({initialState:ul.UNINIT,states:gl,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new ou({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===ao.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}get initialized(){return Boolean(this.sessionInfo)}_cleanup(){this._parentFSM.unsubscribe(this._parentFSMListener)}_subscribeParentFSMEvents(){this._parentFSMListener=e=>{var{event:t,from:i,to:r}=e;if(this._fsm.currentState!==ul.CLOSED)if(t.type===oo.DISCONNECT||t.type===oo.CONNECTION_FAIL)switch(this._fsm.currentState){case ul.UNINIT:case ul.INIT_LOGGING_IN:case ul.INIT_LOGIN_FAIL:case ul.INIT_LOGGED_IN:case ul.INIT_WATCH_PENDING:case ul.INIT_WATCH_FAIL:this.closeWithError(t.error||new Error("websocket connection fail"),!1);break;default:t.type===oo.DISCONNECT?(this._wsDisconnectionTS||(this._wsDisconnectionTS=Date.now()),this._fsm.transition(cl.WS_DISCONNECTED)):this.closeWithError(t.error||new Error("websocket connection fail"),!1)}else if(t.type===oo.CONNECTION_SUCCESS)switch(this._fsm.currentState){case ul.UNINIT:case ul.PAUSED:this._login();break;case ul.CLOSED:break;default:console.warn(`[realtime] current state should not be ${this._fsm.currentState} (parent event ${t})`)}},this._parentFSM.subscribe(this._parentFSMListener)}_subscribeFSMEvents(){this._FSMListener=e=>{var{event:t,from:i,to:r}=e;switch(t.type){case cl.WS_CONNECTED:this._login().catch(du);break;case cl.LOGIN_SUCCESS:i===ul.INIT_LOGGING_IN?this.initWatch().catch(du):i===ul.REBUILD_LOGGING_IN?this.rebuildWatch().catch(du):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${i}`}));break;case cl.LOGIN_FAIL:i===ul.INIT_LOGGING_IN?this.useRetryTicket("INIT_WATCH")?this._login().catch(du):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):i===ul.REBUILD_LOGGING_IN?this.useRetryTicket("REBUILD_WATCH")?this._login().catch(du):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`login fail ${this._errors[this._errors.length-1]}`})):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`unexpected state: event ${t.type} from ${i}`}));break;case cl.INIT_WATCH_SUCCESS:this._availableRetries.INIT_WATCH=2,this._errors=[];break;case cl.INIT_WATCH_FAIL:this.useRetryTicket("INIT_WATCH")?this._login().catch(du):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case cl.REBUILD_WATCH_SUCCESS:this._availableRetries.REBUILD_WATCH=2,this._errors=[];break;case cl.REBUILD_WATCH_FAIL:this.useRetryTicket("REBUILD_WATCH")?this._login().catch(du):this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:`init watch fail ${this._errors[this._errors.length-1]}`}));break;case cl.NEED_REBUILD_WATCH:this._login().catch(du)}},this._fsm.subscribe(this._FSMListener)}useRetryTicket(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)}assertAsyncTaskStatus(){if(this.closeWatchInvoked)throw new oi("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case ul.PAUSED:throw new oi("pause",{subtype:"pause"});case ul.CLOSED:throw new oi("close",{subtype:"close"})}}handleServerEvents(e){var t=this;return s()((function*(){try{t.scheduleSendACK(),yield t._handleServerEvents(e),t._postHandleServerEventsValidityCheck(e)}catch(e){throw er(yl,Gl,!0),e}}))()}_handleServerEvents(e){var t=this;return s()((function*(){var{requestId:i}=e,{events:r}=e.msgData;if(r.length&&t.sessionInfo){var n,a=t.sessionInfo;try{n=r.map(pu)}catch(e){return void t.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e}))}for(var o=[...a.currentDocs],s=!1,l=function(r,l){var u=n[r];if(a.currentEventId>=u.id)return!n[r-1]||u.id>n[r-1].id?er(yl,Vl,!0):(console.error(`[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId ${i})`),er(yl,jl,!0)),"continue";if(a.currentEventId===u.id-1){switch(u.dataType){case"update":if(!u.doc)switch(u.queueType){case"update":case"dequeue":var c=o.find((e=>e._id===u.docId));if(c){var d=dl(c);if(u.updatedFields)for(var h in u.updatedFields)ts(d,h,u.updatedFields[h]);if(u.removedFields)for(var p of u.removedFields)ss(d,p);u.doc=d}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),er(yl,Hl,!0);break;case"enqueue":var f=new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId ${e.requestId})`});throw t.closeWithError(f),f}break;case"limit":if(!u.doc)switch(u.queueType){case"dequeue":var g=o.find((e=>e._id===u.docId));g?u.doc=g:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!u.doc){var _=new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`HandleServerEvents: full doc is not provided with dataType="replace" (requestId ${e.requestId})`});throw t.closeWithError(_),_}break;case"remove":var m=o.find((e=>e._id===u.docId));m?u.doc=m:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),er(yl,zl,!0))}switch(u.queueType){case"init":s?o.push(u.doc):(s=!0,o=[u.doc]);break;case"enqueue":o.push(u.doc);break;case"dequeue":var v=o.findIndex((e=>e._id===u.docId));v>-1?o.splice(v,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),er(yl,Yl,!0));break;case"update":var y=o.findIndex((e=>e._id===u.docId));y>-1?o[y]=u.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),er(yl,$l,!0))}if(r===l-1||n[r+1]&&n[r+1].id!==u.id){var A=[...o],b=n.slice(0,r+1).filter((e=>e.id===u.id));t.sessionInfo.currentEventId=u.id,t.sessionInfo.currentDocs=o,t.sessionInfo.currentEventTS=Date.now();var E=new su({id:u.id,type:"init"===b[0].queueType?"init":void 0,docChanges:t.getEJSON().deserialize(b),docs:t.getEJSON().deserialize(A),EJSON:t.getEJSON(),requestId:i,watchId:t.watchId});pi((()=>t.listener.onChange(E)))(),t.debug&&t._snapshotHistory.push(E)}}else er(yl,ql,!0),t._fsm.transition(cl.NEED_REBUILD_WATCH)},u=0,c=n.length;u<c;u++)l(u,c)}}))()}_postHandleServerEventsValidityCheck(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn(`[realtime listener] internal non-fatal error: client eventId ${this.sessionInfo.currentEventId} does not match with server event id after server event handling ${e.msgData.currEvent} (requestId ${e.requestId})`)):console.error(`[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId ${e.requestId})`)}clearWaitExpectedEvent(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)}onMessage(e){switch(this._fsm.currentState){case ul.INIT_WATCH_SUCCESS:case ul.REBUILD_WATCH_SUCCESS:break;case ul.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn(`[realtime listener] internal non-fatal error: unexpected message received while state is ${this._fsm.currentState}`)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((()=>{this._fsm.transition(cl.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:`${e.msgData.code} - ${e.msgData.message}`}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")}closeWithError(e,t=!0){if(this._fsm.currentState!==ul.CLOSED&&this._fsm.transition(cl.CLOSE),!this.userOnErrorInvoked){var i=this._fsm.getHistoryRepresentation({limit:20});ti(e)?(e.errMsg+=`\nhistory ${i}`,e.history=i):e&&((e=new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:`${e} \nhistory ${i}`})).history=i),this.clearACKSchedule(),pi((()=>this.listener.onError(e)))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(du),this.sessionInfo=void 0}}}function pu(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var fu,gu={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(fu||(fu={}));var _u,mu=(e,t)=>{var i=gu[e],r=i?`${i.name}, code ${e}, reason ${t||i.description}`:`code ${e}`;return new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})},vu=1;class yu{constructor(e){var t=this;this._fsm=void 0,this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._totalConnectionTimeoutId=void 0,this._serviceContext=void 0,this._ws=void 0,this._lastPingSendTS=void 0,this._pingFailed=0,this._pongMissed=0,this._pingTimeoutId=void 0,this._pongTimeoutId=void 0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this._EJSON=void 0,this._defaultEnvId=void 0,this._connectionEnvId=void 0,this.initWebSocketConnection=function(){var e=s()((function*(e,i=t._maxReconnect){var r;if(t._EJSON||(r=function(){return Au.apply(this,arguments)}().then((e=>t._EJSON=e))),t._fsm.currentState===ao.DISCONNECTED){t._fsm.transition(oo.CONNECTION_START),t._logins=new Map,t._wsResponseWait=new Map;var n=!1,a=[],o=!1;if(!t._totalConnectionTimeoutId&&t._totalConnectionTimeout&&t._totalConnectionTimeout!==1/0){var s=t._totalConnectionTimeout;t._totalConnectionTimeoutId=setTimeout((()=>{o=!0,t._totalConnectionTimeoutId=void 0;var e=new ni(`reconnect timeout (reach totalConnectionTimeout ${s}s)`,{subtype:"totalConnectionTimeout",retryable:!1});er(yl,Ll,!0),t._fsm.transition({type:oo.CONNECTION_FAIL,error:e})}),1e3*s)}for(var l=t._maxReconnect;l>=0;l--)try{var u=yield*function*(){if(!(yield yr()).isConnected){if(!e)return t._fsm.transition({type:oo.CONNECTION_FAIL,error:new Error("network offline")}),{v:void 0};if(yield new Promise((e=>{gr&&gr.isConnected?e():vr.push(e)})),0===t._virtualWSClient.size)return t.clearTotalReconnectTimeout(),{v:void 0};Fr()&&(yield _r(100))}if(o)return{v:void 0};var i=yield t.getSignature(t._connectionEnvId);if(o)return{v:void 0};var a=Date.now();return yield new Promise(((e,r)=>{t._ws=Ri(t._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:i.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:r})})),o?{v:void 0}:(Ji({apiName:"_realtime.connectSocket",apiStartTime:a,apiEndTime:Date.now()}),yield t.initWebSocketEvent(),o||r&&(yield r,o)?{v:void 0}:(n=!0,"break"))}();if("break"===u)break;if("object"==typeof u)return u.v}catch(e){if(a.unshift(e),e.errCode===Jt.TCB_PERMISSION_DENIED)break;var{isConnected:c}=yield yr();if(o)return;if(c&&(yield _r(t._reconnectInterval),o))return;if(Fr()&&(yield _r(0),o))return}if(n)return t.clearTotalReconnectTimeout(),er(yl,e?El:Al,!0),void t._fsm.transition(oo.CONNECTION_SUCCESS);t.clearTotalReconnectTimeout(),er(yl,e?wl:bl,!0),e?t._fsm.transition({type:oo.CONNECTION_FAIL,error:new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(a.map((e=>e+"")))}`})}):t._fsm.transition({type:oo.CONNECTION_FAIL,error:new ei({errCode:Jt.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:`errors of each retry (latest to oldest): ${JSON.stringify(a.map((e=>e+"")))}`})})}}));return function(t){return e.apply(this,arguments)}}(),this.initWebSocketEvent=()=>new Promise(((e,t)=>{if(!this._ws)throw new Error("can not initWebSocketEvent, ws not exists");var i=!1;this._ws.onOpen((t=>{this._context.debug&&console.warn("[realtime] ws event: open",t),i=!0,e()}));var r=null;this._ws.onError((e=>{r=e,this._logins=new Map,i?(this._context.debug&&console.error("[realtime] ws event: error",e),this.clearHeartbeat(),er(yl,Pl,!0)):(this._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),t(e),er(yl,xl,!0))})),this._ws.onClose((e=>{this._logins=new Map,this.clearHeartbeat();var t=r||mu(e.code);switch(e.code){case fu.ReconnectOnServerUpgrade:case fu.ReconnectWebSocket:case fu.NoRealtimeListeners:this._fsm.transition({type:oo.DISCONNECT,error:t});break;case fu.HeartbeatPingError:case fu.HeartbeatPongTimeoutError:case fu.NormalClosure:case fu.AbnormalClosure:this._maxReconnect>0?(this._fsm.transition({type:oo.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:oo.CONNECTION_FAIL,error:t}),e.code===fu.HeartbeatPingError?er(yl,Rl,!0):e.code===fu.HeartbeatPongTimeoutError?er(yl,Ol,!0):er(yl,kl,!0);break;case fu.UnauthenticatedIdleConnection:this._fsm.transition({type:oo.CONNECTION_FAIL,error:mu(e.code,e.reason)}),er(yl,Ml,!0);break;case fu.ServerUpgrade:this._fsm.transition({type:oo.DISCONNECT,error:t}),this.initWebSocketConnection(!0),er(yl,Bl,!0);break;default:this._maxReconnect>0?(this._fsm.transition({type:oo.DISCONNECT,error:t}),this.initWebSocketConnection(!0)):this._fsm.transition({type:oo.CONNECTION_FAIL,error:mu(e.code,e.reason)}),er(yl,Nl,!0)}er(yl,Dl,!0)}));var n={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:ar,autoReport:"_realtime.onSocketMessage"};this._ws.onMessage(nr(this.onSocketMessage,n)),this.heartbeat()})),this.isWSConnected=()=>Boolean(this._ws&&this._ws.readyState===vu),this.onSocketMessage=e=>{var t,i=e.data;this.heartbeat();try{t=JSON.parse(i)}catch(e){throw new Error(`[realtime] onMessage parse res.data error: ${e}`)}this._context.debug&&console.log(`[realtime] onMessage ${t.msgType} (${(new Date).toLocaleString()})`,t);var r=this._wsResponseWait.get(t.requestId);if(r){try{"ERROR"===t.msgType?r.reject(new lu(t)):r.resolve(t)}catch(e){this._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{this._wsResponseWait.delete(t.requestId)}if(r.skipOnMessage)return}if("PONG"!==t.msgType){var n=t.watchId&&this._watchIdClientMap.get(t.watchId);if(n)n.onMessage(t);else switch(t.watchId?this._closedWatches.has(t.watchId)?er(yl,Fl,!0):er(yl,Ul,!0):er(yl,Wl,!0),t.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(n=this._queryIdClientMap.get(t.msgData.queryID))&&n.onMessage(t)}}else if(this._lastPingSendTS){var a=Date.now()-this._lastPingSendTS;if(a>1e4)return void(this._context.debug&&console.warn(`[realtime] untrusted rtt observed: ${a}`));this._rttObserved.length>=3&&this._rttObserved.splice(0,this._rttObserved.length-3+1),this._rttObserved.push(a)}},this.login=function(){var e=s()((function*(e,i,r){if(e=e||t._context.env||t._defaultEnvId,!i)if(e){var n=t._logins.get(e);if(n){if(n.loggedIn&&n.loginResult)return n.loginResult;if(n.loggingInPromise)return n.loggingInPromise}}else{var a=t._logins.get("");if(a&&a.loggingInPromise)return a.loggingInPromise}var o=new Promise(function(){var n=s()((function*(n,a){try{var o=yield r?nr(t.getSignature(e,i),{timing:r,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):t.getSignature(e,i),s=(()=>{var e,t,i=Ri().wx;if(i&&i.version){e=i.version.version,t=i.version.updateTime;var r=i.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:r?`${r[1]}-${r[2]}-${r[3]}`:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}})(),l={watchId:void 0,requestId:vl(),msgType:"LOGIN",msgData:{envId:o.envId,signStr:o.signStr,secretVersion:o.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},u=yield t.send({msg:l,waitResponse:!0,skipOnMessage:!0,timeout:5e3});u.msgData.code?a(new Error(`${u.msgData.code} ${u.msgData.message}`)):n({envId:o.envId})}catch(e){a(e)}}));return function(e,t){return n.apply(this,arguments)}}()),l=e&&t._logins.get(e),u=Date.now();l?(l.loggedIn=!1,l.loggingInPromise=o,l.loginStartTS=u):(l={loggedIn:!1,loggingInPromise:o,loginStartTS:u},t._logins.set(e||"",l));try{var c=yield o,d=t._logins.get(e||"");if(d&&d===l&&d.loginStartTS===u)return l.loggedIn=!0,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=c,c;if(d){if(d.loggedIn&&d.loginResult)return d.loginResult;if(d.loggingInPromise)return d.loggingInPromise;throw new Error("ws unexpected login info")}throw new Error("ws login info reset")}catch(e){throw l.loggedIn=!1,l.loggingInPromise=void 0,l.loginStartTS=void 0,l.loginResult=void 0,e}}));return function(t,i,r){return e.apply(this,arguments)}}(),this.getSignature=function(){var e=s()((function*(e,i){if(e=e||t._context.env||t._defaultEnvId,!i&&e&&t._signatures.has(e)){var r=t._signatures.get(e);if(Date.now()<r.expireTS)return r}else 0;var n=Date.now()+6e4,o=yield function(e,t){return La.apply(this,arguments)}(t._context,e);if(Date.now()-n>6e4)return t.getSignature(e,i);var s=a()(a()({},o),{},{expireTS:n});return t._signatures.set(s.envId,s),e||(t._defaultEnvId=s.envId),s}));return function(t,i){return e.apply(this,arguments)}}(),this.getWaitExpectedTimeoutLength=()=>this._rttObserved.length?this._rttObserved.reduce(((e,t)=>e+t))/this._rttObserved.length*1.5:5e3,this.ping=s()((function*(){var e={watchId:void 0,requestId:vl(),msgType:"PING",msgData:null};yield t.send({msg:e}),t._context.debug&&console.log("ping sent")})),this.send=e=>new Promise(function(){var i=s()((function*(i,r){if(t._fsm.currentState!==ao.CONNECTED)return r(new Error("websocket not connected"));var n,a=!1,o=!1,l=e=>{a=!0,n&&clearTimeout(n),i(e)},u=e=>{o=!0,n&&clearTimeout(n),r(e)};e.timeout&&(n=setTimeout(s()((function*(){a&&o||(yield _r(0),a&&o||u(new ni("wsclient.send timedout")))})),e.timeout));try{if(t._context.debug&&console.log(`[realtime] ws send ${e.msg.msgType} (${(new Date).toLocaleString()}): `,e),!t._ws)return void u(new Error("invalid state: ws connection not exists, can not send message"));if(t._ws.readyState!==vu)return void u(new Error(`ws readyState invalid: ${t._ws.readyState}, can not send message`));e.waitResponse&&t._wsResponseWait.set(e.msg.requestId,{resolve:l,reject:u,skipOnMessage:e.skipOnMessage}),t._ws.send({data:JSON.stringify(e.msg),success:t=>{e.waitResponse||l(t)},fail:i=>{u(i),e.waitResponse&&t._wsResponseWait.delete(e.msg.requestId)}})}catch(e){u(e)}}));return function(e,t){return i.apply(this,arguments)}}()),this.onWatchStart=(e,t)=>{this._queryIdClientMap.set(t,e)},this.onWatchClose=(e,t)=>{t&&this._queryIdClientMap.delete(t),this._watchIdClientMap.delete(e.watchId),this._virtualWSClient.delete(e),this._closedWatches.add(e.watchId),this._virtualWSClient.size||this.close(fu.NoRealtimeListeners)},this.getEJSON=()=>this._EJSON,this._fsm=new _l({initialState:ao.DISCONNECTED,states:Fo}),this._serviceContext=e.serviceContext}get _context(){return this._serviceContext}get _maxReconnect(){return this._context.appConfig.realtimeMaxReconnect}get _reconnectInterval(){return this._context.appConfig.realtimeReconnectInterval}get _totalConnectionTimeout(){return this._context.appConfig.realtimeTotalConnectionTimeout}heartbeat(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout(s()((function*(){try{if(!t._ws||t._ws.readyState!==vu)return;t._lastPingSendTS=Date.now(),yield t.ping(),t._pingFailed=0,t._pongTimeoutId=setTimeout((()=>{t._context.debug&&console.error("pong timed out"),t._pongMissed<2?(t._pongMissed++,t.heartbeat(!0)):t.close(fu.HeartbeatPongTimeoutError)}),t._context.appConfig.realtimePongWaitTimeout)}catch(e){t._pingFailed<2?(t._pingFailed++,t.heartbeat()):t.close(fu.HeartbeatPingError)}})),e?0:this._context.appConfig.realtimePingInterval)}clearHeartbeat(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)}clearTotalReconnectTimeout(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)}close(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:gu[e].name}),this._ws=void 0)}watch(e){var t={apiStartTime:Date.now()},i=!1,r=()=>{Ji(a()(a()({},t),{},{apiName:e.reportAPIName}))},n=e.onChange,o=e.onError;this._fsm.currentState===ao.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var s=new hu(a()(a()({},e),{},{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:()=>this._context,onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:t,debug:this._context.debug,wsclient:this,onChange:u,onError:c}));this._virtualWSClient.add(s),this._watchIdClientMap.set(s.watchId,s);var l=s.listener;return l;function u(...e){i||(i=!0,t.apiEndTime=Date.now(),r()),d(),pi((()=>l.onChange.apply(this,e)))()}function c(...e){i||(i=!0,t.apiEndTime=Date.now(),r()),d(),pi((()=>l.onError.apply(this,e)))()}function d(){l.onChange===u&&(l.onChange=n),l.onError===c&&(l.onError=o)}}}function Au(){return(Au=s()((function*(){var e=Date.now(),t=i(795);return Ji({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),t.EJSON}))).apply(this,arguments)}!function(e){e.ASC="asc",e.DESC="desc"}(_u||(_u={}));var bu=e=>{class t{constructor(t,r){if(this.collectionName=void 0,this._query=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(wi(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new yu({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(a()(a()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(this._query.where||{})),limit:this._query.limit,orderBy:this._query.order?this._query.order.reduce(((e,t)=>(e[t.fieldPath]=t.order,e)),{}):void 0,queryType:ya.WHERE,reportAPIName:"cloud.db.collection.watch"}))),!t)throw new ei({errCode:Jt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new i(r),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=r&&r.field||{}}field(e){return Ti(e,"object","field"),new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{field:e}))}where(e){return Ti(e,"condition","where"),this._query.where?new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{where:Ha.and(this._query.where,e)})):new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{where:e}))}orderBy(e,i){return Ti(e,"fieldPath","orderBy"),Ti(i,"order","orderBy"),new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{order:[...this._query.order||[],{fieldPath:e,order:i}]}))}limit(e){return Ti(e,"max","limit"),new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{limit:e}))}skip(e){return Ti(e,"offset","skip"),new t(this.collectionName,a()(a()({},this._query.getProperties()),{},{offset:e}))}get(t){var i="collection.get",r={apiStartTime:+new Date},n=()=>Sa({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ya.WHERE,options:No(this,e),instanceContext:e,timing:r,explain:null==t?void 0:t.explain});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,o){try{var s=yield n();if(null!=t&&t.explain&&Fr())return void e(s);e({data:s.list,errMsg:or(i)})}catch(e){o(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}update(t){var i="collection.update",r={apiStartTime:+new Date},n=()=>{if(Ti(t,"options","update"),wi(t,{data:"object"}),!this._query.where)throw new ei({errCode:-1,errMsg:"query condition must be provided"})},o=()=>xa({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:ya.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:r,explain:t.explain});var l=Ei(t),u=new Promise(function(){var e=s()((function*(e,s){try{n();var l=yield o();if(null!=t&&t.explain&&Fr())return e(l);e({stats:{updated:l.updated},errMsg:or(i)})}catch(e){s(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!l)return u;u.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}remove(t){var i="collection.remove",r={apiStartTime:+new Date},n=()=>{if(!this._query.where||0===Object.keys(this._query.where).length)throw new ei({errCode:-1,errMsg:"query condition must be provided and not be empty"})},o=()=>Ta({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ya.WHERE,options:{multi:!0},instanceContext:e,timing:r,explain:null==t?void 0:t.explain});var l=Ei(t),u=new Promise(function(){var e=s()((function*(e,s){try{n();var l=yield o();if(null!=t&&t.explain&&Fr())return e(l);e({stats:{removed:l.removed||0},errMsg:or(i)})}catch(e){s(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!l)return u;u.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}count(t){var i="collection.count",r={apiStartTime:+new Date},n=()=>Oa({env:e.database.config.env,collectionName:this.collectionName,query:e.engine.QuerySerializer.encode(this._query.where||{}),queryType:ya.WHERE,instanceContext:e,timing:r,explain:null==t?void 0:t.explain});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,o){try{var s=yield n();if(null!=t&&t.explain&&Fr())return e(s);e({total:s.total,errMsg:or(i)})}catch(e){o(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}toJSON(){}}class i{constructor(e){this.where=void 0,this.offset=void 0,this.limit=void 0,this.order=void 0,this.field=void 0,this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}getProperties(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}}}return t},Eu="document.get",wu="document.update",Tu="document.set",Cu="document.remove",Su=e=>class{constructor(t,i){if(this._id=void 0,this.collection=void 0,this._field=void 0,this.__safe_props__=void 0,this.watch=t=>(wi(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new yu({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(a()(a()({},t),{},{envId:e.database.config.env||e.serviceContext.env,collectionName:this.collection.collectionName,query:JSON.stringify({_id:this._id}),queryType:ya.DOC,reportAPIName:"cloud.db.document.watch"}))),this.collection=t,this._id=i,null==i)throw new ei({errCode:Jt.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}field(e){return Ti(e,"object","field"),wi(e,"object","field"),this._field=e,this}get(t){var i=this,r={apiStartTime:+new Date},n=()=>Sa({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),options:{projection:e.engine.ProjectionSerializer.encode(this._field)},queryType:ya.DOC,instanceContext:e,timing:r});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,t){try{var o=i._id,s=yield n();if(!s.list||!s.list.length)throw new Error(`cannot find document with _id ${o}, please make sure that the document exists and you have the corresponding access permission`);e({data:s.list[0],errMsg:or(Eu)})}catch(e){t(ii(e,Eu))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.get"}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(Eu,t,e)})).catch((e=>{bi(Eu,t,e)}))}set(t){var i={apiStartTime:+new Date},r=()=>Da({env:e.database.config.env,collectionName:this.collection.collectionName,_id:this._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:i});var n=Ei(t),o=new Promise(function(){var e=s()((function*(e,n){try{wi(t,{data:"object"}),Si({name:"options.data",target:t.data});var o=yield r();e({_id:o._id,errMsg:or(Tu),stats:{updated:o.updated,created:o.created}})}catch(e){n(ii(e,Tu))}finally{Ji(a()(a()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.document.set"}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!n)return o;o.then((e=>{Ai(Tu,t,e)})).catch((e=>{bi(Tu,t,e)}))}update(t){var i={apiStartTime:+new Date},r=()=>xa({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:ya.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:i});var n=Ei(t),o=new Promise(function(){var e=s()((function*(e,n){try{wi(t,{data:"object"}),Si({name:"options.data",target:t.data}),e({stats:{updated:(yield r()).updated},errMsg:or(wu)})}catch(e){n(ii(e,wu))}finally{Ji(a()(a()({},i),{},{apiEndTime:+new Date,apiName:"cloud.db.document.update"}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!n)return o;o.then((e=>{Ai(wu,t,e)})).catch((e=>{bi(wu,t,e)}))}remove(t){var i=this,r={apiStartTime:+new Date},n=()=>Ta({env:e.database.config.env,collectionName:this.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:this._id}),queryType:ya.DOC,options:{},instanceContext:e,timing:r});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,t){try{var o=i._id,s=yield n();if(0===s.removed)throw new Error(`cannot remove document with _id ${o}, please make sure that the document exists and you have the corresponding Write permission`);e({stats:{removed:s.removed||0},errMsg:or(Cu)})}catch(e){t(ii(e,Cu))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:"cloud.db.document.remove"}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(Cu,t,e)})).catch((e=>{bi(Cu,t,e)}))}toJSON(){}},Iu=e=>{var t=bu(e),i=Su(e),r=Ba(e);return class extends t{constructor(e){super(e),this.collectionName=void 0,this.__safe_props__=void 0,this.collectionName=e}doc(e){if(null==e)throw ii({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new i(this,e)}add(t){var i="collection.add",r={apiStartTime:+new Date},n=()=>Ea({env:e.database.config.env,collectionName:this.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:r});var o=Ei(t),l=new Promise(function(){var e=s()((function*(e,o){try{wi(t,{data:"object"}),e({_id:(yield n())._id,errMsg:or(i)})}catch(e){o(ii(e,i))}finally{Ji(a()(a()({},r),{},{apiEndTime:+new Date,apiName:`cloud.db.${i}`}))}}));return function(t,i){return e.apply(this,arguments)}}());if(!o)return l;l.then((e=>{Ai(i,t,e)})).catch((e=>{bi(i,t,e)}))}aggregate(){return new r(this,[])}}},xu=function(e){return new Pu(e)};class Pu{constructor(e){this.regexp=void 0,this.options=void 0,wi(e,{regexp:"string"},"RegExp options"),e.options&&wi(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}get _internalType(){return ea}toJSON(){return{$regex:this.regexp,$options:this.options}}}var Du={},Ru={};for(var Ou in aa)Du[aa[Ou]]=`$${aa[Ou]}`;for(var ku in Bn)Du[Bn[ku]]=`$${Bn[ku]}`;for(var Mu in ca)Du[ca[Mu]]=`$${ca[Mu]}`;for(var Nu in pa)Ru[pa[Nu]]=`$${pa[Nu]}`;function Lu(e){return Du[e]||`$${e.toLowerCase()}`}function Bu(e){return Ru[e]||`$${e.toLowerCase()}`}Du[aa.NEQ]="$ne",Du[ca.REMOVE]="$unset",Du[ca.SHIFT]="$pop",Du[ca.UNSHIFT]="$push",Du[aa.GEO_NEAR]="$nearSphere",Du[aa.GEO_WITHIN]="$geoWithin",Du[aa.GEO_INTERSECTS]="$geoIntersects";class Fu{static encodeStages(e){return(new Uu).encodeStages(e)}static encode(e){return(new Uu).encodeAny(e)}}class Uu{encodeStages(e){return e.map((e=>this.encodePipelineStage(e)))}encodeAny(e){return Oo(e)?Ga(e)?this.encodePipeline(e):Va(e)?this.encodePipelineStage(e):ga(e)?this.encodeAggregateCommand(e):ko(e):zt(e)?this.encodeObject(e):Qt(e)?e.map((e=>this.encodeAny(e))):e}encodeObject(e){var t={};for(var i in e)t[i]=this.encodeAny(e[i]);return t}encodePipeline(e){return e._stages.map((e=>this.encodeAny(e)))}encodePipelineStage(e){var t=`$${e.stage}`;switch(e.stage){case"match":return{[t]:Wu.encode(e.val)};default:return{[t]:this.encodeAny(e.val)}}}encodeAggregateCommand(e){return{[Bu(e.operator)]:this.encodeAny(e.operands[0])}}}class Wu{constructor(){}static encode(e){return Gu(e)}}var Gu=e=>na(e)?ju(e):ua(e)?Hu(e):Ga(e)||ga(e)||Va(e)?Fu.encode(e):zt(e)?Vu(e):ko(e),Vu=e=>{var t=Po(e),i=[],r={[Bn.OR]:0,[Bn.NOR]:0,[Bn.AND]:0,[Bn.NOT]:0},n=function(e){var n=t[e];if(na(n))switch(n.operator){case Bn.OR:case Bn.NOR:case Bn.AND:r[n.operator]++,i.push({[Lu(n.operator)]:n.operands.map((t=>Gu({[e]:t})))});break;case Bn.NOT:var a=n.operands[0];if(na(a))switch(a.operator){case Bn.AND:r[Bn.OR]++,i.push(ju(new ra(Bn.OR,a.operands.map((t=>({[e]:new ra(Bn.NOT,[t])}))))));break;case Bn.OR:r[Bn.NOR]++,i.push(ju(new ra(Bn.NOR,a.operands.map((t=>({[e]:t}))))));break;case Bn.NOR:r[Bn.OR]++,i.push(ju(new ra(Bn.OR,a.operands.map((t=>({[e]:t}))))));break;case Bn.NOT:i.push(Gu({[e]:a.operands[0]}))}else i.push({[e]:ju(n)})}else ua(n)?i.push({[e]:Hu(n)}):i.push({[e]:ko(n)})};for(var a in t)n(a);return zu(i)},ju=e=>{switch(e.operator){case Bn.AND:if(e.operands.every((e=>ua(e)))){var t={};for(var i of e.operands)Object.assign(t,Hu(i));return t}return{[Lu(e.operator)]:e.operands.map(Gu)};case Bn.OR:case Bn.NOR:return{[Lu(e.operator)]:e.operands.map(Gu)};case Bn.NOT:var r=Lu(e.operator),n=e.operands[0];return{[r]:Gu(n)};default:return{[Lu(e.operator)]:e.operands.map(Gu)}}},Hu=e=>{var t=Lu(e.operator);switch(e.operator){case aa.EQ:case aa.NEQ:case aa.LT:case aa.LTE:case aa.GT:case aa.GTE:case aa.EXISTS:case aa.SIZE:return{[t]:ko(e.operands[0])};case aa.IN:case aa.NIN:case aa.MOD:return{[t]:ko(e.operands)};case aa.ALL:return{[t]:e.operands.map(Gu)};case aa.ELEM_MATCH:case aa.EXPR:return{[t]:Gu(e.operands[0])};case aa.GEO_NEAR:return{[t]:{$geometry:ko(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance}};case aa.GEO_WITHIN:var i={};return e.operands[0].geometry&&(i.$geometry=ko(e.operands[0].geometry)),e.operands[0].centerSphere&&(i.$centerSphere=ko(e.operands[0].centerSphere)),{[t]:i};case aa.GEO_INTERSECTS:return{[t]:{$geometry:ko(e.operands[0].geometry)}};default:return{[t]:e.operands.length>1?e.operands.map(Gu):Gu(e.operands[0])}}},zu=e=>{var t={$and:0,$or:0,$nor:0};for(var i of e)i.$and&&t.$and++,i.$or&&t.$or++,i.$nor&&t.$nor++;var r=t.$and>1||t.$or>1||t.$nor>1,n=!1,a={};for(var o of e)for(var s in o){var l=o[s];r?n?a.$and.push(o):"$and"===s||"$or"===s||"$nor"===s?(n=!0,a.$and=[o]):a[s]=l:a[s]=l}return a};class Yu{constructor(){}static encode(e){return qu(e)}}var $u,qu=e=>Qu(e),Qu=e=>{var t=Po(e),i={};for(var r in t){var n=t[r];if(ha(n)){var a=Lu(n.operator);switch(i[a]||(i[a]={}),n.operator){case ca.SET:case ca.INC:case ca.MUL:case ca.MIN:case ca.MAX:case ca.RENAME:case ca.BIT:i[a][r]=ko(n.operands[0]);break;case ca.REMOVE:i[a][r]="";break;case ca.PUSH:var o=void 0;o=1===n.operands.length&&zt(n.operands[0])?{$each:n.operands[0].each.map(ko),$position:n.operands[0].position,$slice:n.operands[0].slice,$sort:n.operands[0].sort}:{$each:n.operands.map(ko)},i[a][r]=o;break;case ca.UNSHIFT:var s={$each:n.operands.map(ko),$position:0};i[a][r]=s;break;case ca.POP:i[a][r]=1;break;case ca.SHIFT:i[a][r]=-1;break;case ca.ADD_TO_SET:i[a][r]=zt(n.operands[0])&&n.operands[0].each?{$each:n.operands[0].each}:n.operands[0];break;case ca.PULL:i[a][r]=Wu.encode(n.operands[0]);break;case ca.PULL_ALL:default:i[a][r]=ko(n.operands[0])}}else i.$set||(i.$set={}),i.$set[r]=ko(n)}return i};class Zu{constructor(){}static encode(e){return(new Zu).encodeProjection(e)}encodeProjection(e){return va(e)?this.encodeProjectionCommand(e):"object"===Ht(e)?this.encodeProjectionObject(e):e}encodeProjectionCommand(e){var t=Lu(e.operator);switch(e.operator){case _a.SLICE:default:return{[t]:e.operands[0]}}}encodeProjectionObject(e){var t=Po(e);for(var i in t)!0===t[i]||1===t[i]?t[i]=1:!1===t[i]||0===t[i]?t[i]=0:va(t[i])?t[i]=this.encodeProjectionCommand(t[i]):delete t[i];return t}}class Ku{constructor(){}static decode(e){return(new Ku).decodeData(e)}decodeData(e){switch(Ht(e)){case"object":return this.decodeObject(e);case"array":return e.map((e=>{if(zt(e)){var t=Mo(e);return t!==e?t:this.decodeObject(e)}return e}));default:return e}}decodeObject(e){var t=a()({},e);for(var i in t){var r=t[i];switch(Ht(r)){case"object":var n=Mo(r);t[i]=n!==r?n:this.decodeObject(t[i]);break;case"array":var o=this.decodeData(r);o!==r&&(t[i]=o);break;default:continue}}return t}}!function(e){e[e.DEFAULT=0]="DEFAULT"}($u||($u={}));var Xu=function(e,t){return new(ec(e.identifiers||{}))({context:e,config:t})};function Ju(e){return e.debug}var ec=i=>{var r,n;return class{constructor(a){this.identifiers=void 0,this.config=void 0,this.command=void 0,this.Geo=void 0,this.serverDate=void 0,this.RegExp=void 0,this.__safe_props__=void 0;var{config:o,context:s}=a;this.identifiers=i,this.config=o||{},n=Iu(r={database:this,serviceContext:s,engine:t}),o&&o.env&&wi(o.env,"string"),this.command=Ha,this.Geo=e,this.serverDate=za,this.RegExp=xu,o&&o.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get(){return Ju((e=r).database)?e.engine.QuerySerializer:void 0;var e},set(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get(){return Ju((e=r).database)?e.engine.UpdateSerializer:void 0;var e},set(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get(){return Ju((e=r).database)?e.engine.ProjectionSerializer:void 0;var e},set(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get(){return Ju((e=r).database)?e.engine.AggregateSerializer:void 0;var e},set(){}},Decoder:{enumerable:!1,configurable:!1,get(){return Ju((e=r).database)?e.engine.Decoder:void 0;var e},set(){}}})}collection(e){return new n(e)}toJSON(){}}};function tc(e){return{database:Xu.bind(null,e)}}var ic="database";function rc(e){e.registerService(function(e){var t={name:ic,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(ic)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:ic,context:t,getAPIs:tc.bind(null,t)}}(e))}function nc(e){class t{constructor(e){this.cloudID=void 0,this._internalType=hr,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toJSON(){return this.cloudID}toString(){return this.cloudID}}return function(e){return new t(e)}}function ac(e){class t{constructor(e){this.target=void 0,this._internalType=pr,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}toString(){return JSON.stringify({target:this.target})}}return function(e){return new t(e)}}function oc(e){return{CloudID:nc(),CDN:ac()}}var sc="utils";function lc(e){e.registerService(function(e){var t={name:sc,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:sc,context:t,getAPIs:oc.bind(null,t)}}(e))}var uc=new class{constructor(){this._running=0,this._onIdleCallbacks=[],this._idleTriggerTimer=void 0}get running(){return this._running}incrementRunning(e=1){this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)}decrementRunning(e=1){this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((()=>{if(this._idleTriggerTimer=null,this._onIdleCallbacks.length){var e=this._onIdleCallbacks.shift();e&&e()}}),50))}onceIdle(e){this._running>0?this._onIdleCallbacks.push(e):e()}};function cc(e,t={}){if(t.fireOnIdle&&uc.running>0)return new Promise(((i,r)=>{uc.onceIdle(s()((function*(){try{var n=yield cc(e,t);i(n)}catch(e){r(e)}})))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise(((i,r)=>{var n,o,s,l,u;uc.incrementRunning(),Ri((e.cloud||t.cloud||{}).identifiers).invokeOperateWXData({appid:null===(n=e.cloud)||void 0===n||null===(o=n.instanceOptions)||void 0===o?void 0:o.resourceAppid,accessToken:null===(s=e.cloud)||void 0===s||null===(l=s.authStorage)||void 0===l?void 0:l.getItem("access_token"),webRequest:null===(u=e.cloud)||void 0===u?void 0:u.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:e=>{var n=a()(a()({},e),{},{data:e.data});if(e.data)try{var o=e.data;if(o.baseresponse&&0!==o.baseresponse.errcode){var s=new ei({errCode:o.baseresponse.errcode,errMsg:o.baseresponse.errmsg});return void r(s)}n=a()(a()({},e),{},{data:o})}catch(e){var l=new ei({errMsg:e&&e.toString()});return void r(l)}else if(t&&t.requireDataNotEmpty){var u=new ei({errCode:e.errCode,errMsg:`error empty internal server response, ${e.errMsg}`});return void r(u)}i(n)},fail:e=>{if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{var i=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(i)).errMsg=i,e.operateWXDataFail=!0}r(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),uc.decrementRunning()}})}))}var dc=cc,hc={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0},pc={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4,call_container_max_req_data_size:5242880},fc={},gc={},_c={},mc=`${Math.random()}_${Date.now()}`,vc="servicewechat.com";class yc{constructor(){this._tunnelRequest=void 0,this._meta=void 0}setMetaData(e){this._meta=e}setTunnelRequest(e){this._tunnelRequest=e}getEndpointSync(e){var t=fc[e];if("container"===e){if(null!=t&&t.url&&null!=t&&t.expiresTs&&Date.now()<t.expiresTs)return t;this.getEndpoint(e)}}getEndpoint(e){var t=this;return s()((function*(){var i=fc[e];return"container"===e?null!=i&&i.url&&null!=i&&i.expiresTs&&Date.now()<i.expiresTs?i:t.refreshContainerServiceEndpoint():null}))()}refreshContainerServiceEndpoint(){var e=this;return s()((function*(){return gc.container||(_c.servicewechatGetIP||(_c.servicewechatGetIP=!0,Ri().wx.onNetworkStatusChange((e=>{e.isConnected&&Ac()}))),clearTimeout(_c.container),gc.container=new Promise(function(){var t=s()((function*(t,i){for(var r,n=[],a=0;a<3;a++)try{var o=Date.now(),s=Cr(),l=(e._tunnelRequest?yield e._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:JSON.stringify({client_random:mc,system:s.system,wx_app_version:s.version})}):yield dc({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:JSON.stringify({client_random:mc,system:s.system,wx_app_version:s.version}),qbase_options:{},qbase_meta:e._meta,cli_req_id:`${+new Date}_${Math.random()}`}})).data;if(Date.now()-o>1e3*l.expires_in){n.push(`result already expired (startTs ${o} resultTs ${Date.now()})`);continue}var u=Date.now()+1e3*l.expires_in-(Date.now()-o),c=l.domain||"servicewechat.com";return fc.container={url:`https://${c}/wxa-qbase/container_service?token=${l.token}`,domain:c,token:l.token,http:l.http,key:l.key,timestamp:l.timestamp,ip:l.ip,vip:l.vip,ips:l.ips?new Set(l.ips):void 0,expiresTs:u,encryptedClientRandom:l.encrypted_client_random,protocol:l.protocol},t(fc.container),delete gc.container,Ac(),r=l.token,Yi=r,vc=!l.vip||l.ips||fc.container.localDNSTrusted?fc.container.domain||"servicewechat.com":l.vip,Ec(),clearTimeout(_c.container),void(_c.container=setTimeout((()=>{e.refreshContainerServiceEndpoint()}),.8*(u-Date.now())))}catch(e){n.push(e+"")}i(`get container service endpoints errors: ${n.join("\n")}`),delete gc.container}));return function(e,i){return t.apply(this,arguments)}}())),gc.container}))()}}function Ac(){if(fc.container){var e=fc.container.domain||"servicewechat.com",t=fc.container.encryptedClientRandom;Ri()._requestSkipCheckDomain({url:`https://${e}/wxa-qbase/verify_server?client_random=${mc}&token=${fc.container.token}`,method:"POST",dataType:"json",data:JSON.stringify({client_random:mc}),success:e=>{fc.container&&(200===e.statusCode&&e.data.encrypted_client_random===t?fc.container.localDNSTrusted=!0:fc.container.localDNSTrusted=!1)},fail:e=>{fc.container&&(console.warn(`check servicewechat connection fail ${e}`),fc.container.localDNSTrusted=!1)}})}}var bc=!1;function Ec(){return wc.apply(this,arguments)}function wc(){return(wc=s()((function*(){if(!bc){var e=Ri(),t=()=>new Promise((t=>{var i=Date.now(),r=!/^\d+/.test(vc);e._requestSkipCheckDomain({url:`${r?"https":"http"}://${vc}/wxa-qbase/keepalive`,header:r?{}:{host:"servicewechat.com"},method:"GET",dataType:"text",enableHttp2:r,success:()=>{t(),ir(22990,1,["privateHttpKeepAlive",vc,i,Date.now(),Date.now()-i].join(","))},fail:()=>{t()}})})),i=()=>{setTimeout(s()((function*(){yield t(),i()})),2e4)};return bc=!0,i(),t()}}))).apply(this,arguments)}var Tc=(e={})=>{var{sdk:t}=e,i=e.identifiers||{};return t&&((e,t)=>{Pi.set(e,t)})(i,t),new Sc(i,!1)},Cc=(e={})=>Tc(e).exportAPI;class Sc{constructor(e,t){var i=this;this.inited=!1,this.isInstance=void 0,this.services={},this.apiServiceMap={},this.meta=void 0,this.config=void 0,this.identifiers=void 0,this.debug=!1,this.request=void 0,this.exportAPI=void 0,this.appConfig=void 0,this.apiPermissions=void 0,this.runtimeInfo=void 0,this.serviceEndpoint=void 0,this.authStorage=void 0,this.testSpeed=s()((function*(){var e,t,r=+new Date,n=r;return cc((t=(e={cloud:i,apiName:"tcbapi_testspeed",serializedReqData:null}).cloud,{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t}),{fireOnIdle:!0,onFire:()=>{r=+new Date,n=r}}).then((e=>{Ji({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:r,tunnelEndTime:+new Date,tunnelStartTime:n,tunnelTimeNoCSNetCost:e.data.baseresponse.stat.qbase_cost_time})})).catch((e=>{0}))})),this.identifiers=e,this.isInstance=t,this.runtimeInfo=Tn(),this.serviceEndpoint=new yc,this.request=function(e){var{cloud:t}=e;return function(e){var i=t.isInstance?a()(a()({},t.instanceOptions),{},{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}):a()(a()({},e),{},{env:e.env});return cc({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:i,qbase_meta:t.getMetaData(),cli_req_id:`${+new Date}_${Math.random()}`},cloud:t})}}({cloud:this});var r,n=this;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(t){return new Ic(e,n,t).exportAPI}),rn(r=this),Ln(r),rc(r),lc(r),bn(r),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:xc()},this.appConfig=a()({},pc),this.apiPermissions={};try{Br.onReady((()=>{setTimeout((()=>{(()=>{if(!Qi)try{var e=Ri();e.wx.getNetworkType({success:e=>{Ki=e.networkType},complete:()=>{Qi=!0,Xi()}}),e.wx.onNetworkStatusChange((e=>{Qi||(Qi=!0,Xi()),Ki=e.networkType}))}catch(e){}})()}),2e3)}))}catch(e){}}getMetaData(){var e;if(!this.meta.sdk_version){var t=Ri(this.identifiers);if(t){var i=t.wx;i&&i.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version=`wx-miniprogram-sdk/${i.version.version} (${Date.parse(`${i.version.updateTime} GMT+0800`)})`:this.meta.sdk_version=`wx-web-sdk/undefined (${Date.parse("undefined GMT+0800")})`)}}return this.meta.filter_user_info="singlePage"===(null===(e=Br.appLaunchInfo)||void 0===e?void 0:e.mode),this.meta}getConfig(){return this.config}getEnvForService(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(Ht(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}}checkAPIPermission(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]}init(e={}){return this.inited=!0,this.initConfig(e),Promise.all([this.sendInitRequest().then((()=>{this.testSpeed()}))]).then((()=>{}))}initConfig(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=jt(this.config.database,xc()):this.config.database=xc()}sendInitRequest(){var e="string"==typeof this.config.env?this.config.env:void 0,t=JSON.stringify({trace_user:!1!==this.config.traceUser,env:e,region:this.config.region}),i=+new Date,r=i;return this.request(a()(a()({},this.config),{},{apiName:"tcbapi_init",serializedReqData:t,env:e})).then((e=>{var t=+new Date,n=e.data;this.appConfig=a()(a()({},this.appConfig),n.config);for(var o=n.tcb_api_list||[],s=0,l=o.length;s<l;s++)this.apiPermissions[o[s].apiname]=o[s].status;Ji({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:i,tunnelEndTime:t,tunnelStartTime:r,tunnelTimeNoCSNetCost:n.baseresponse.stat.qbase_cost_time})})).catch((e=>{console.error("cloud init error: ",e)}))}registerService(e){this.services[e.name]=e;var t=e.getAPIs();for(var i in t)if(this.apiServiceMap[i]=e.name,"function"==typeof t[i])this.registerFunction(i,!0,t[i]);else{var{initRequired:r,fn:n}=t[i];this.registerFunction(i,r,n)}}registerFunction(e,t,i){var r=this;this.exportAPI[e]=t?function(){if(!r.inited)throw new ei({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!r.checkAPIPermission(e))throw new ei({errCode:Jt.SDK_API_PERMISSION_DENIED,errMsg:Jt[Jt.SDK_API_PERMISSION_DENIED]});return i.apply(r,arguments)}:i}toJSON(){}}class Ic extends Sc{constructor(e,t,i){if(super(e,!0),this.defaultInstance=void 0,this.instanceOptions=void 0,this.webRequest=void 0,this._webCurrentRefreshTokenPromise=void 0,"web"===this.runtimeInfo.env){if(!i.identityless&&!i.appid)throw new Error("appid must be provided");if(!i.resourceAppid)throw new Error("resourceAppid must be provided")}if(!i.resourceEnv)throw new Error("resourceEnv must be provided");if(i.config||(i.config={}),this.defaultInstance=t,this.instanceOptions=JSON.parse(JSON.stringify(i)),this.meta=t.meta,this.apiPermissions=t.apiPermissions,this.instanceOptions.config.database=jt(xc(),this.instanceOptions.config.database||{}),"web"===this.runtimeInfo.env){if(this.exportAPI.init=this.webInit.bind(this),this.webRequest=(0,En.getBoundAuthRequest)(this),this.registerService((0,En.createWebService)(this)),!this.instanceOptions.identityless&&(this.authStorage=this.defaultInstance.authStorage,!this.authStorage))throw new Error("authStorage not found")}else this.exportAPI.init=this.miniprogramInit.bind(this);this.instanceOptions.resourceAppid&&(this.exportAPI.refreshAuth=this.refreshAuth.bind(this))}miniprogramInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(t.instanceOptions.resourceAppid){var i=(yield t.refreshAuth()).data.env_auth_info;return 0===i.errCode?(e().call(t),{errCode:i.errCode,errMsg:i.errMsg,expireTime:1e3*i.expire_time}):{errCode:i.errCode,errMsg:i.errMsg}}e().call(t)}}))()}webInit(){var e=()=>super.init,t=this;return s()((function*(){if(!t.inited){if(!t.instanceOptions.identityless){var i=(yield t.refreshAuth()).data.env_auth_info;return 0===i.errCode?(t.sendInitRequest().then((()=>{t.testSpeed()})),e().call(t),{errCode:i.errCode,errMsg:i.errMsg,expireTime:1e3*i.expire_time}):{errCode:i.errCode,errMsg:i.errMsg}}t.inited=!0}}))()}webRefreshToken(){var e=this;return s()((function*(){return e._webCurrentRefreshTokenPromise||(e._webCurrentRefreshTokenPromise=new Promise(function(){var t=s()((function*(t,i){try{var r=(yield e.webRequest({url:"/refresh_token",method:"POST",json:{appid:e.instanceOptions.appid,refresh_token:e.authStorage.getItem("refreshToken")}})).data;e.authStorage.setItem("appid",r.access_token),t()}catch(e){i(e)}finally{e._webCurrentRefreshTokenPromise=void 0}}));return function(e,i){return t.apply(this,arguments)}}())),e._webCurrentRefreshTokenPromise}))()}refreshAuth(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,i=t,r=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return r.then((e=>{var r=+new Date;Ji({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:r,tunnelStartTime:i})})),r}}function xc(){return{realtime:{maxReconnect:hc.REALTIME_DB_MAX_RECONNECT,reconnectInterval:hc.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:hc.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}var Pc=Symbol("CDN");class Dc{constructor(e){this.symbol=Pc,this.options=void 0,this.options=e}}function Rc(e,t){return new Promise(((i,r)=>{(t||Ri()).uploadToCommonCDN(a()(a()({},e),{},{success:i,fail:r}))}))}function Oc(e,t){return new Promise(((i,r)=>{(t||Ri()).invokeOperateWXData(a()(a()({},e),{},{success:i,fail:r}))}))}var kc,Mc,Nc,Lc=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,i=[];e.data&&JSON.stringify(e.data,((r,n)=>n&&n.symbol===Pc?void i.push(new Promise(((i,r)=>{var a,o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=n;switch(a=s.options,Object.prototype.toString.call(a).slice(8,-1)){case"Object":if(!s.options.filePath)throw new Error("filePath must be provided");o.filePath=s.options.filePath;break;default:o.fileData=s.options}i(Rc(o,e.sdk).then((e=>{t.set(n,e.fileUrl)})))}))):n)),yield Promise.all(i);var r,n,a,o=JSON.stringify(e.data,((e,i)=>i&&i.symbol===Pc&&t.has(i)?t.get(i):i)),{data:s}=yield Oc({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:o,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:1}},e.sdk);try{var l=s;if(r=l.request_id,0===l.errcode)n=JSON.parse(l.data);else{var u=`invokeService:fail ${l.errcode} ${l.errmsg} (requestId: ${r})`;(a=new Error(u)).errCode=l.errcode,a.errMsg=u,a.requestId=r}}catch(h){var c=`invokeService:fail inner protocol parse failed (requestId: ${r||"empty"})`;(a=new Error(c)).errCode=-1,a.errMsg=c,a.requestId=r}if(a)throw a;return{errMsg:"invokeService:ok",data:n,requestId:r}}catch(e){var d="invokeService:fail ";if(e&&e.errMsg&&e.err_code){d+=e.errMsg;var h=new Error(d+`(err_code ${e.err_code})`);throw h.errCode=e.err_code,h}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}}));return function(t){return e.apply(this,arguments)}}();!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(kc||(kc={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(Mc||(Mc={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(Nc||(Nc={}));var Bc,Fc={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},Uc="exceed max timeout retry",Wc="empty call result",Gc="exceed max poll retry",Vc="invokeService",jc=2e4;!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(Bc||(Bc={}));var Hc=e=>{var t=new Date;return`${t.getHours()}:${t.getMinutes()}:${t.getSeconds()} ${e}`},zc=e=>e.join("->"),Yc=function(){var e=s()((function*(e){try{if(!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");var t=new WeakMap,i=[];e.data&&JSON.stringify(e.data,((r,n)=>n&&n.symbol===Pc?void i.push(new Promise(((i,r)=>{var a,o={appType:301,fileType:20303,fileKey:`file_${Math.random()}`},s=n;switch(a=s.options,Object.prototype.toString.call(a).slice(8,-1)){case"Object":if(!s.options.filePath)throw new Error("filePath must be provided");o.filePath=s.options.filePath;break;default:o.fileData=s.options}i(Rc(o,e.sdk).then((e=>{t.set(n,e.fileUrl)})))}))):n)),yield Promise.all(i);var r=JSON.stringify(e.data,((e,i)=>i&&i.symbol===Pc&&t.has(i)?t.get(i):i)),n=`${Math.random()}_${Date.now()}`;if(e.async){var o={service_id:e.service,api_name:e.api,data:r,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:n,scene:kc.CALL,retry_reason:Mc.None,req_type:Nc.LongAsync},l=(yield Oc({apiName:"webapi_servicemarket_jsapi_comm",reqData:o},e.sdk)).data;if(l.scene===kc.FinalResp&&0===l.errcode)return{errMsg:"invokeService:ok",requestId:l.request_id};var u=ii({errCode:Fc.SM_SYSTEM_ERROR,errMsg:`requestID ${l.request_id}, error message ${l.errmsg||"unknown"} (callid ${n})`},Vc);throw u.requestID=l.request_id,u}var{result:c,requestID:d}=yield function(e,t,i){return f.apply(this,arguments)}(e,r,n);return{errMsg:"invokeService:ok",data:c,requestId:d}}catch(e){var h="invokeService:fail ";if(e&&e.errMsg&&e.err_code){h+=e.errMsg;var p=new Error(h+`(err_code ${e.err_code})`);throw p.errCode=e.err_code,p}throw e&&e.errMsg&&e.errCode?e:new Error(`invokeService:fail ${e}`)}function f(){return(f=s()((function*(e,t,i){return new Promise(((r,n)=>{var a=[Hc("start")],{resolve:o,reject:s}=m(a,r,n);g({param:e,data:t,callID:i,scene:kc.CALL,retryReason:Mc.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:a,resolve:o,reject:s})}))}))).apply(this,arguments)}function g(e){return _.apply(this,arguments)}function _(){return(_=s()((function*(t){var{param:i,data:r,callID:n,scene:o,retryReason:l,tryCount:u,trace:c,systemErrorRetry:d,timeoutErrorRetry:h,resolve:p,reject:f}=t,_={service_id:i.service,api_name:i.api,data:o===kc.CALL?r:void 0,consume_type:e.consumeType,consume_appid:e.consumeAppid,client_msg_id:`${Math.random()}_${Date.now()}`,version:2,call_id:n,scene:o,retry_reason:l},m=!1,v=!1,y=()=>{clearTimeout(b),v=!0},A=+new Date,b=setTimeout(s()((function*(){if(!(+new Date-A>2e4&&(yield _r(),v))){if(!Fr()&&+new Date-A>60)return c.push(Hc("timeout, exceed max retry gap")),f(ii({errCode:Fc.SM_POLL_RESULT_EXPIRED,errMsg:`timeout for retry, cannot retry fetching the result anymore (callId: ${n}) (trace: ${zc(c)})`},Vc));m=!0,t.timeoutErrorRetry>0?(c.push(Hc("timeout, retry")),g(a()(a()({},t),{},{scene:o,retryReason:Mc.Timeout,tryCount:u-1,timeoutErrorRetry:h-1}))):(c.push(Hc("timeout, abort")),f(ii({errCode:Fc.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:`${Uc} (callId: ${n}) (trace: ${zc(c)})`},Vc)))}})),jc);try{var E=yield Oc({apiName:"webapi_servicemarket_jsapi_comm",reqData:_},e.sdk);try{if(m)return;y();var w=E.data;if(!w&&E.rawData)try{w=JSON.parse(E.rawData)}catch(e){}if(!w)return c.push(Hc("empty resp")),f(ii({errCode:Fc.SM_EMPTY_CALL_RESULT,errMsg:Wc},Vc));if(w.scene!==kc.PreResp){if(w.scene===kc.FinalResp){if(0!==w.errcode){var T=ii({errCode:Fc.SM_PROVIDER_EXECUTION_ERROR,errMsg:`requestID ${w.request_id}, error message ${w.provider_errmsg||"unknown"} (callid ${n})`},Vc);return T.requestID=w.request_id,f(T)}var C=w.data;try{C=JSON.parse(C)}catch(e){}return p({result:C,requestID:w.request_id})}return c.push(Hc("unexpected scene")),f(ii({errCode:Fc.SM_UNKNOWN_SCENE,errMsg:`unknown scene ${w.scene} (callId: ${n}) (trace: ${zc(c)})`},Vc))}if(!(u>=0))return c.push(Hc("too many polls, abort")),f(ii({errCode:Fc.SM_EXCEED_MAX_POLL_RETRY,errMsg:`${Gc} (callId: ${n}) (trace: ${zc(c)})`},Vc));c.push(Hc("normal poll")),g(a()(a()({},t),{},{scene:kc.POLL,retryReason:Mc.None,tryCount:u-1}))}catch(e){f(ii({errCode:Fc.SM_POLL_ERROR,errMsg:`polling catch error: ${e} (callId: ${n})`},Vc))}}catch(e){if(m)return;y();var S=e instanceof Error?e:JSON.stringify(e);e&&e.operateWXDataFail&&d>0?(c.push(Hc(`system error (${S}), retry`)),g(a()(a()({},t),{},{scene:o,retryReason:Mc.SysErr,tryCount:u-1,systemErrorRetry:d-1}))):(c.push(Hc(`system error (${S}), abort`)),f(ii(`${S} (callId: ${n}) (trace: ${zc(c)})`,Vc)))}}))).apply(this,arguments)}function m(e,t,i){var r=t=>{e.push(Hc(`app ${t}`))};wr(r);return{resolve:e=>{Tr(r),t(e)},reject:e=>{Tr(r),i(e)}}}}));return function(t){return e.apply(this,arguments)}}();function $c(e){return qc.apply(this,arguments)}function qc(){return(qc=s()((function*(e){var t=(yield Oc({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}},e.sdk)).data;if(0===t.errcode)return t.provider_errmsg?{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:t.status,providerErrMsg:t.provider_errmsg,requestId:t.request_id}:{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(t.data),status:t.status,requestId:t.request_id};var i=new Error(`getAsyncResult:fail requestID ${t.request_id}, error message ${t.errmsg||"unknown"}`);throw i.errCode=t.errcode,i.errMsg=t.errmsg,i}))).apply(this,arguments)}var Qc="invokeService",Zc="getAsyncResult",Kc=e=>{(Fr()&&!e.async?Lc(e):Yc(e)).then((t=>{Ai(Qc,e,t)})).catch((t=>{bi(Qc,e,t)}))},Xc=e=>{$c(e).then((t=>{Ai(Zc,e,t)})).catch((t=>{bi(Zc,e,t)}))};function Jc(e={}){var{sdk:t}=e;return{invokeService:e=>(e=>Ei(e)?Kc(e):Fr()&&!e.async?Lc(e):Yc(e))(a()(a()({},e),{},{sdk:t})),getAsyncResult:e=>(e=>Ei(e)?Xc(e):$c(e))(a()(a()({},e),{},{sdk:t})),CDN:Dc}}})(),__cloudSDK__=r})(),(()=>{var e={146:(e,t,i)=>{var r=i(61),n=i(76);function a(e){e=(0,n.B)(e),(0,r.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught FrameworkError","\n",e.message,"\n",e.stack)):(0,r.sK)(e,"")}function o(e={}){(0,r.N0)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught (in promise) FrameworkError","\n",e.reason)):(0,r.sK)(e.reason,"",e.promise||null)}void 0!==WeixinJSBridge&&(WeixinJSBridge.on("onError",a),WeixinJSBridge.on("unhandledRejection",o)),Foundation.on("error",a),Foundation.on("unhandledRejection",o)},676:(e,t,i)=>{i.d(t,{OJ:()=>a,yQ:()=>r,YZ:()=>n});function r(){if(i.g.PerfDog)return i.g.PerfDog}function n(){if("undefined"!=typeof NativeGlobal&&NativeGlobal.Profiler)return NativeGlobal.Profiler}var a=new class{constructor(){this.callbacks=new Map}sendPackage(e,t){var i=this.callbacks.get(e);i&&Array.isArray(i)&&i.forEach((i=>{i(e,t)}))}registerCallback(e,t){if(this.callbacks.get(e)){this.callbacks.get(e).push(t)}else{var i=[t];this.callbacks.set(e,i)}}};i.g.LanDebug=a},495:(e,t,i)=>{var r=i(176);__wxConfig.onReady((()=>{"undefined"!=typeof __wxSourceMap&&(__wxSourceMap.get=function(e){if(__wxSourceMap[e])return __wxSourceMap[e];for(var t=(0,r.M)(),i=0;i<t.length;i++){var n=t[i].contextGlobal.__wxSourceMap;if("object"==typeof n&&n[e]){var a=void 0;try{a=JSON.parse(JSON.stringify(n[e]))}catch(e){console.error("[SourceMap] clone soucemap failed.")}return a}}})}))},647:(e,t,i)=>{var r,n=i(356),a=i.n(n),o=i(503),s=i.n(o),l=i(61),u={},c={},d={},h={},p={},f={},g=0;JSContext.subscribe("subContextMessage",((e,t)=>{var i=d[t];i&&i.__onMessageHandler(e)})),JSContext.subscribe("subContextReady",((e,t)=>{var i;if(((0,l.G$)()||(0,l.oi)())&&(i=d[t]),Foundation.env.isGame)if("game"===r.__name__||i&&"game"===i.__name__||"string"==typeof r.__name__&&r.__name__.includes("preload")||i&&"string"==typeof i.__name__&&i.__name__.includes("preload")){var n=r;if((i?r&&"game"===r.name?r:i:r).delaySubContextReadyCallback=()=>{(0,l.G$)()||(0,l.oi)()?d[t].__onReadyHandler(t,e):n&&n.__onReadyHandler(t,e)},(0,l.G$)()||(0,l.oi)())return void d[t].__onPreloadReadyHandler(t,e);if(!n)return;n.__onPreloadReadyHandler(t,e),r=void 0}else{if((0,l.G$)()||(0,l.oi)())return void d[t].__onReadyHandler(t,e);if(!r)return;r.__onReadyHandler(t,e),r=void 0}else{if((0,l.G$)()||JSContext.isAsync())return void d[t].__onReadyHandler(t,e);if(!r)return;r.__onReadyHandler(t,e),r=void 0}})),JSContext.subscribe("subContextLibVarReady",((e,t)=>{d[t].__onLibVarReadyHandler(e)}));var _=function(e){var t=JSContext.create(e);return t<=0&&setTimeout((()=>{}),0),u[this.__guid__]=t,t},m=function(e){var t=(0,l.G$)()||JSContext.isAsync()?JSContext.alloc(e):JSContext.alloc();return t<=0&&setTimeout((()=>{}),0),((0,l.G$)()||(0,l.oi)())&&(d[t]=this),u[this.__guid__]=t,t},v=function(e,t,i){Object.defineProperty(this,e,s()({value:t},i?{writable:!0,configurable:!1}:{writable:!1,configurable:!1}))},y=function(){void 0!==c[this.__guid__]&&(f[this.__guid__].forEach((e=>{this.postMessage(e)})),f[this.__guid__]=[])};t.Z=class{constructor({name:e,secure:t=!0,env:i={},entry:r=[],injectAfterAlloc:n=!0,isPreload:a=!1}){v.call(this,"__name__",e,a),v.call(this,"__guid__",g++,a),v.call(this,"__secure__",t,a),v.call(this,"__entry__",r,a),v.call(this,"__injectAfterAlloc__",n,a),this.contextGlobal=globalThis,this.alreadyLoadedJsFiles=new Set,this.setExportEnv(i),p[this.__guid__]=[],f[this.__guid__]=[]}init(){var e=this;if(r=this,!JSContext.supportAlloc())return _.call(this,this.__entry__);if(m.call(this,this.__name__),this.__injectAfterAlloc__){if(((0,l.G$)()||JSContext.isAsync())&&(0,l.N0)())return a()((function*(){for(var t=0,i=e.__entry__.length;t<i;t++)yield e.evaluateScriptFile(e.__entry__[t])}))();this.__entry__.forEach((e=>this.evaluateScriptFile(e)))}}preInit(e){var t=this;if(this.preHandleExportEnv=e,r=this,!JSContext.supportAlloc())return _.call(this,this.__entry__);m.call(this,this.__name__),this.__injectAfterAlloc__&&(this.delayExecuteJsFile=()=>{if(((0,l.G$)()||JSContext.isAsync())&&(0,l.N0)())return a()((function*(){for(var e=0,i=t.__entry__.length;e<i;e++)yield t.evaluateScriptFile(t.__entry__[e])}))();this.__entry__.forEach((e=>this.evaluateScriptFile(e)))})}callDelayFn(){return new Promise(((e,t)=>{var i=Date.now(),n=()=>{if(this.delaySubContextReadyCallback){r=this,this.delaySubContextReadyCallback&&this.delaySubContextReadyCallback();var a=this.delayExecuteJsFile&&this.delayExecuteJsFile();r=void 0,e(a)}else{if(Date.now()-i>2e4)return Foundation.env.platform,t();setTimeout(n)}};n()}))}callDelayFnSync(){r=this,this.delaySubContextReadyCallback&&this.delaySubContextReadyCallback();var e=this.delayExecuteJsFile&&this.delayExecuteJsFile();return r=void 0,e}unShiftEntries(e){this.__entry__.unshift(...e)}afterPreloadInit(){return("android"===Foundation.env.platform||"ios"===Foundation.env.platform)&&!JSContext.isAsync()?this.callDelayFnSync():this.callDelayFn()}onMessage(e){(this.__onMsgCallback=e,"function"==typeof this.__onMsgCallback)&&(p[this.__guid__].forEach((e=>{this.__onMsgCallback(e)})),p[this.__guid__]=[])}postMessage(e){var t=c[this.__guid__];void 0!==t?JSContext.publish("mainContextMessage",e,[t]):f[this.__guid__].push(e)}onInitReady(e){this.__onInitReadyCallbacks=this.__onInitReadyCallbacks||[],this.__onInitReadyCallbacks.push(e)}setExportEnv(e){e.contextName=this.__name__,e.contextSecure=this.__secure__,h[this.__guid__]=e}setName(e){this.name=e,this.__name__=e}setEntry(e){this.__entry__&&this.__entry__.pop?(this.__entry__.splice(0,this.__entry__.length),this.__entry__.push(...e)):this.__entry__=[...e]}getEntry(){return this.__entry__}refreshExportEnv(e){return new Promise((t=>{if(!e)throw Error("refreshExportEnv: missing arguments.");this.setExportEnv(e);var i=h[this.__guid__],r=c[this.__guid__];JSContext.publish("subContextEnvReady",i,[r],!0),JSContext.subscribe("subContextRefreshEnvReady",((e,i)=>{r===i&&t()}))}))}refreshWxConfig(e,t){var i=c[this.__guid__];JSContext.publish("subContextRefreshWxConfig",{key:e,value:t},[i])}dynamicExportGlobal(e={name:"",value:"",needCondom:!0},t){var i=()=>{var i=c[this.__guid__];JSContext.publish("exportGlobalRequire",e,[i]),t&&t()};void 0!==u[this.__guid__]?i():this.onInitReady(i)}evaluateScriptFile(e){var t=u[this.__guid__];if(void 0!==t){if(((0,l.G$)()||JSContext.isAsync())&&(0,l.N0)())return new Promise((i=>{var r=JSContext.evaluateScriptFile(t,e,(()=>i(r)));if(1!==r)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${r}`)}));var i=JSContext.evaluateScriptFile(t,e);if(1!==i)throw new Error(`SubContext evaluateScriptFile "${e}" failed: error code ${i}`);this.alreadyLoadedJsFiles.add(e)}}loadJsFiles(e){e=e.map((e=>"/"===e[0]?e:"/"+e));var t=u&&u[this.__guid__],i=e.filter((e=>this.alreadyLoadedJsFiles.has(e)));if(i.length>0&&wxNativeConsole.info("[SubContext] loadJsFiles ignored loaded: "+i.join(",")),0!==(e=e.filter((e=>!this.alreadyLoadedJsFiles.has(e)))).length){if(void 0!==t&&JSContext&&JSContext.batchLoadJsFiles)try{var r=Date.now();wxNativeConsole.info("[SubContext] loadJsFiles: "+e.join(",")),JSContext.batchLoadJsFiles(t,e),wxNativeConsole.info("[SubContext] loadJsFiles done, cost "+(Date.now()-r)),e.forEach((e=>this.alreadyLoadedJsFiles.add(e)))}catch(t){throw new Error(`SubContext loadJsFiles "${e}" failed: error ${t}`)}}else wxNativeConsole.info("[SubContext] loadJsFiles have no files to load, return")}destroy(){var e=u[this.__guid__],t=c[this.__guid__];e>0&&(JSContext.publish("subContextDestroy",{},[t]),JSContext.destroy(e)),delete d[t],delete u[this.__guid__],delete c[this.__guid__],delete h[this.__guid__],delete p[this.__guid__],delete f[this.__guid__],delete this.__guid__,delete this.contextGlobal}__onMessageHandler(e){"function"==typeof this.__onMsgCallback?this.__onMsgCallback(e):p[this.__guid__].push(e)}__onReadyHandler(e,t){d[e]=this,c[this.__guid__]=e,this.contextGlobal=t.contextGlobal;var i=h[this.__guid__];i&&JSContext.publish("subContextEnvReady",i,[e],!0),this.__onInitReadyCallbacks&&(this.__onInitReadyCallbacks.forEach((e=>{e(t)})),delete this.__onInitReadyCallbacks),delete this.__onReadyHandler,y.call(this)}__onPreloadReadyHandler(e,t){d[e]=this,c[this.__guid__]=e,this.contextGlobal=t.contextGlobal;var i=h[this.__guid__];i&&(i.preHandleEnv=this.preHandleExportEnv,JSContext.publish("preloadSubContextEnvReady",i,[e],!0))}}},176:(e,t,i)=>{i.d(t,{z:()=>n,M:()=>a});var r=[],n=function(e){r.push(e)},a=function(){return r}},61:(e,t,i)=>{i.d(t,{xJ:()=>a,N0:()=>s,F:()=>l,QT:()=>u,sK:()=>c,Hw:()=>d,G$:()=>h,gn:()=>p,cF:()=>f,NG:()=>g,Qj:()=>_,c6:()=>m,oi:()=>v});var r=i(356),n=i.n(r),a=globalThis;function o(e){e===a&&h()||(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var i;try{i=e[t]}catch(e){}"object"!=typeof i&&"function"!=typeof i||Object.isFrozen(i)||o(i)})))}var s=function(){return void 0!==__wxConfig&&__wxConfig.isIsolateContext},l=function(){var e=a;Protect.globalEsObjs.concat(["console"]).forEach((function(t){e[t]&&(o(e[t]),Object.defineProperty(e,t,{value:e[t],configurable:!1,writable:!1}))}))},u=function(){var e=n()((function*(e,t){Reporter.reportIDKey({key:t});try{yield e()}catch(e){Reporter.reportIDKey({key:`${t}_fail`,force:!0});var i=t.indexOf("initGame")>=0?"gameSDKScriptError":"appServiceSDKScriptError";Reporter.errorReport({key:i,error:e,extend:""})}}));return function(t,i){return e.apply(this,arguments)}}(),c=function(e,t,i){void 0!==i?Reporter.thirdErrorReport({error:e,isUnhandledRejection:!0,promise:i,extend:t}):Reporter.thirdErrorReport({error:e,isUnhandledRejection:!1,extend:t})},d=function(e,t){return function(){try{return t.apply(t,arguments)}catch(t){Reporter.errorReport({key:e,error:t,extend:""})}}},h=function(){return"devtools"===__wxConfig.platform},p=function(){return"ios"===__wxConfig.platform},f=e=>{var t;if(WeixinJSBridge.invoke("accessSync",{path:e},(e=>{/:fail/.test(e.errMsg)&&(t=e.errMsg)})),t)throw new Error(t)},g=e=>{var t,i;if(WeixinJSBridge.invoke("readFileSync",{filePath:e,encoding:"utf-8"},(e=>{/:fail/.test(e.errMsg)?i=e.errMsg:t=e.data})),i)throw new Error(i);return t},_=(e="",t=[])=>{if(e&&"string"==typeof e&&!/^index/.test(e)){var i=e.replace(/(^\/+)|(\/+$)/g,"").split("/"),r=t.find((t=>{if(t.independent){var r=t.root||"",n=t.alias||"",a=r.replace(/(^\/+)|(\/+$)/g,"").split("/");if(i.length>=a.length){var o=a.every(((e,t)=>e===i[t]));if(o)return o}if(n&&0===e.indexOf(n))return!0}return!1}));if(r)return r}return!1},m=e=>[1001,1011,1007,1008,1074,1088,1044,1010,1096,1014,1043,1107,1155].indexOf(e)>=0,v=()=>JSContext.isAsync()},290:(e,t,i)=>{i.d(t,{E:()=>T,F:()=>C});var r=i(503),n=i.n(r),a=i(647),o=i(676),s=i(61),l=i(594),u="undefined"!=typeof __AppServiceRemoteDebugger__,c=u?__AppServiceRemoteDebugger__(__wxConfig.platform,l.M,l.O,s.NG,i.g.WeixinJSBridge):null,d={};u&&c&&((d=(0,s.gn)()?c.runtime.getSubContextGlobals():{}).BaseConsole&&c.runtime.setupConsole(console,d.BaseConsole),i.g.__remoteDebug__=c.__remoteDebug__);var h="app-service.js",p="appservice.app.js",f="common.app.js",g="appservice.js",_=new a.Z({name:"app",secure:!1,entry:[h],injectAfterAlloc:!1}),m=new Set;__wxConfig.onReady((()=>{"develop"!==__wxConfig.envVersion&&"trial"!==__wxConfig.envVersion||(m.add("wx0354ba48aadc0ab2"),m.add("wxfa43a4a7041a84de"))}));var v,y=e=>wxNativeConsole.info("[injectEntryFile] "+e),A=new Set,b=(e,t)=>{if(!A.has(e)){u&&c&&(0,s.gn)()&&c.runtime.registerScript(e);var i=-1,r=-1;if(A.add(e),y(`isLazyLoad: ${__wxConfig.isLazyLoad}`),y(`moduleName: ${e}`),y(`separatedPlugins: ${JSON.stringify(t)}`),Foundation.perf.logSyncInvoke("beforeInject "+e),__wxConfig.isLazyLoad){console.info("Lazy code loading is enabled. Only injecting required components.");var n=[];t.forEach((t=>{var i=(e+t.prefix_path+"/").replace(/\/\/$/,"/");t.prefix_path||(i+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id));try{y(`accessSync path: ${i+f}`),(0,s.cF)(i+f),n.push(i+f,i+p),t.prefix_path||((e,t)=>{var i=(0,s.NG)(t);if(i){var r;try{r=JSON.parse(i)}catch(e){r={}}(__wxConfig.subPackages||[]).forEach((t=>{"/"+t.root===e&&t.useExtendedLib&&r.allExtendedComponents&&(t.allExtendedComponents=r.allExtendedComponents)})),_.refreshWxConfig("subPackages",__wxConfig.subPackages)}})(e,i+"plugin.json")}catch(e){n.push(i+g)}})),n.push(e+f,e+p),y(`using separated plugins: ${JSON.stringify(n)}`),i=Date.now(),_.loadJsFiles(n),r=Date.now()}else{var a=t.map((t=>{var i=(e+t.prefix_path+"/").replace(/\/\/$/,"/");return t.prefix_path||(i+=`__extended__/${t.plugin_id}/`,m.add(t.plugin_id)),i+g}));a.push(e+h),y(`using separated plugins: ${JSON.stringify(a)}`),i=Date.now(),a.forEach((e=>{e="/"===e[0]?e:"/"+e,_.alreadyLoadedJsFiles.has(e)||(_.evaluateScriptFile(e),_.alreadyLoadedJsFiles.add(e))})),r=Date.now()}_.refreshWxConfig("extendedLibList",Array.from(m)),i>0&&r>0&&(y("time cost: "+(r-i)),E.send({type:"evaluateScript",moduleName:e,startTime:i,endTime:r}),Foundation.perf.logSyncInvoke("afterInject "+e))}},E={setReceiver(e){v=e},send(e){"function"==typeof v&&v(e)}},w=(0,s.Hw)("appServiceSDKScriptError",((e,t)=>{var i=t.moduleName,r="__APP__"===i,n=t.separatedPlugins||[];"string"!=typeof i&&console.error("SubContext onSubPackageReady error: moduleName is empty"),i.endsWith("/")||(i=`${i}/`),__wxConfig.onReady((()=>{(0,s.gn)()&&u?(i=r?"":i,c.runtime.isInitialInject()?(c.runtime.startBufferBridgeMessages(),c.runtime.runAfterAttached((()=>{b(i,n),c.runtime.dispatchBridgeMessages()}))):b(i,n)):b(r?"":i,n)}))})),T=function(){var e,t={};u&&c&&(t=n()({__isAppServiceRemoteDebugMode__:!0,__remoteDebug__:c.__remoteDebug__},d));var r=new Safeway(_),a=(null===(e=__libVersionInfo__)||void 0===e?void 0:e.version)||"9.9.9",s=n()(n()({wxLibVersion:a,__Function__:__Function__,console:Object.assign({group:()=>{},groupEnd:()=>{}},console),setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,safeway:r,__wxConfig:__wxConfig,Reporter:Reporter,BaseConsole:__appServiceConsole__.BaseConsole,NativeGlobal:i.g.NativeGlobal,WeixinCanvas:i.g.WeixinCanvas,WeixinArrayBuffer:i.g.WeixinArrayBuffer,WeixinSharedBuffer:i.g.WeixinSharedBuffer,wxNativeConsole:wxNativeConsole,getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},Canvas:i.g.Canvas,Image:i.g.Image,ImageData:i.g.ImageData,Path2D:i.g.Path2D,SkiaCanvasExternalTexture:i.g.SkiaCanvasExternalTexture,skiacanvasLoadNewFont:i.g.skiacanvasLoadNewFont,SkiaCanvas:NativeGlobal.SkiaCanvas,SkiaCanvasRequestAnimationFrame:NativeGlobal.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame:NativeGlobal.SkiaCanvasCancelAnimationFrame,SkiaImageData:NativeGlobal.SkiaImageData,HTMLCanvasView:NativeGlobal.HTMLCanvasView,HTMLCanvasElement:NativeGlobal.HTMLCanvasElement,SkiaImage:NativeGlobal.SkiaImages,SkiaPath2D:NativeGlobal.SkiaPath2D,SkiaCanvasLoadNewFont:NativeGlobal.SkiaCanvasLoadNewFont,originConsole:console},t),{},{performanceChannel:E,debuggerMessager:l.O,__sclEngine__:__sclEngine__,LanDebug:o.OJ,getPerfDog:o.yQ,getProfiler:o.YZ});r.onSubpackageReady(w),_.setExportEnv(s),_.init()},C=function(){return _};JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("injectEntryFile",(e=>{b(e.moduleName,e.separatedPlugins)}))},594:(e,t,i)=>{i.d(t,{M:()=>a,O:()=>n});var r=[],n="undefined"!=typeof DebuggerConnection?DebuggerConnection:{};n.registerCallback=e=>{"function"==typeof e&&r.push(e)},n.onCustomMessage=(e,t)=>{r.forEach((i=>{try{i(e,t)}catch(e){}}))};var a="undefined"!=typeof JSThread?JSThread:null},309:(e,t,i)=>{i.d(t,{M:()=>u,eC:()=>c,xC:()=>d});var r=i(647),n=i(61),a=i(676),o=i(594);i.g.LanDebug=a.OJ,i.g.getPerfDog=a.yQ,i.g.__debuggerMessager__=o.O;var s=new r.Z({name:"game",secure:!1,entry:["game.js"]});function l(){__appServiceSDK__.getABTestConfig({experimentId:(0,n.gn)()?"clicfg_appbrand_ios_game_split_multi_plugincode":"clicfg_appbrand_game_split_multi_plugincode",experimentType:"Expt",success(e){e&&1===Number(e.testConfig)&&function(){var e=__wxConfig.plugins||__wxConfig.gamePlugins;if(e){var t=Object.keys(e).filter((t=>{var{contexts:i}=e[t];return!i||i.some((e=>"gameContext"===e.type))})).map((t=>e[t]));s.unShiftEntries(t.map((e=>{var{provider:t}=e;return`__plugin__/${t}/plugin.js`})))}}()},fail(e){wxNativeConsole.error("getABTestConfig fail",e)}})}var u=function(e){return e.__wxConfig=__wxConfig,s.setExportEnv(e),(0,n.G$)()||JSContext.isAsync()||l(),s.afterPreloadInit()},c=function(){return s},d=function(e){return s.preInit(e)}},945:(e,t,i)=>{i.d(t,{J:()=>o,r:()=>s});var r=i(647),n=i(61),a=new r.Z({name:"gameOpenData",secure:!0,entry:["subContext.js"]});var o=e=>(e.__wxConfig=__wxConfig,a.setExportEnv(e),(0,n.G$)()||JSContext.isAsync()||function(){var e=__wxConfig.plugins||__wxConfig.gamePlugins;if(e){var t=Object.keys(e).filter((t=>{var{contexts:i}=e[t];return!!i&&i.some((e=>"openDataContext"===e.type))})).map((t=>e[t]));a.unShiftEntries(t.map((e=>{var{provider:t}=e;return`__plugin__/${t}/plugin.js`})))}}(),a.init()),s=function(){return a}},813:(e,t,i)=>{i.d(t,{dr:()=>v,qo:()=>y,hS:()=>b,K0:()=>A});var r=i(356),n=i.n(r),a=i(503),o=i.n(a),s=i(647),l=i(176),u=i(61),c=i(309),d=i(945),h={},p={isolatedContext:{},gameContext:{},gameOpenDataContext:{},unknown:{}},f=e=>`__plugin__/${e}/plugin.js`,g=null,_=!1,m=1;Foundation.env.isGame&&__wxConfig.preload&&"android"===Foundation.env.platform&&!JSContext.isAsync()?(g=new s.Z({name:`gamePlugin_preload_${m}`,secure:!1,isPreload:!0}),m++,g.preInit()):_=!0;var v=(e={provider:"",secure:!0,env:null,subContext:!1,isPreload:!1})=>{var{env:t,secure:i,isPreload:r,subContext:a}=e,{provider:c}=e;if(!1===(0,u.N0)())throw new Error("isn't isolateContext mode!");var d,m=h[c=`${c}_${a?"_sub":"main"}`];if(m)return d=m.contextGlobal.__require,!0===m.__isCompleted||!1===m.__isCompleted&&(m.dynamicExportGlobal({name:"pluginEnv",value:t}),p.isolatedContext[c]=d),d;var v,y=`gamePlugin_${c}`,A=f(c.slice(0,-5));v=_?new s.Z({name:y,secure:i,entry:[A]}):g;var b=e=>{if(e.__wxConfig=__wxConfig,v.setExportEnv(o()(o()({},e),{},{pluginEnv:t})),_)return v.init();v.setName(y),v.setEntry([A]),v.afterPreloadInit(),_=!0};return((0,u.G$)()||JSContext.isAsync())&&!0===r?n()((function*(){return yield(0,u.QT)(n()((function*(){(0,l.z)(v),yield b(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),d=v.contextGlobal.__require,v.__isCompleted=!1,h[c]=v})),"initGamePluginContext"),d}))():((0,u.QT)((()=>{(0,l.z)(v),b(__appServiceSDK__.getIsolatedGamePluginContextEnv(e)),d=v.contextGlobal.__require,v.__isCompleted=!0,h[c]=v}),"initGamePluginContext"),p.isolatedContext[c]=d,d)},y=(e,t,i)=>{var{__name__:r}=e,a=f(t),o="game"===r?"gameContext":"gameOpenData"===r?"gameOpenDataContext":"unknown";return((0,u.G$)()||JSContext.isAsync())&&!0===i?n()((function*(){return yield e.evaluateScriptFile(a),p[o][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:o}}))():(e.evaluateScriptFile(a),p[o][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:o})},A=function(){var e=n()((function*(){var e,t,i=(e=__wxConfig.gamePlugins||__wxConfig.plugins||{},t=[],Object.keys(e).forEach((i=>{if(e[i].contexts)e[i].contexts.forEach((r=>{t.push(o()(o()({},e[i]),{},{context:r,contexts:null}));var n=e[i].provider;"wx20afc706a711eefc"!==n&&"wx4d5893418b75cb20"!==n||t.push(o()(o()({},e[i]),{},{context:r,subContext:!0,contexts:null}))}));else{t.push(o()(o()({},e[i]),{},{context:{type:"gameContext"},contexts:null}));var r=e[i].provider;"wx20afc706a711eefc"!==r&&"wx4d5893418b75cb20"!==r||t.push(o()(o()({},e[i]),{},{context:{type:"gameContext"},subContext:!0,contexts:null}))}})),t),r=(e,t)=>e.getEntry().unshift(t);return Promise.all(i.map((e=>{var{provider:t,context:i}=e;switch(i.type){case"isolatedContext":return v(o()(o()({},e),{},{isPreload:!0}));case"gameContext":return r((0,c.eC)(),f(t));case"openDataContext":return r((0,d.r)(),f(t));default:throw new Error(`pluginConf error: invalid context name: ${i.type}`)}})))}));return function(){return e.apply(this,arguments)}}(),b=()=>p},228:(e,t,i)=>{var r=i(176);JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("loadJsFiles",(e=>{var t=(0,r.M)().find((t=>t.__name__===e.contextName));t?t.loadJsFiles(e.paths):wxNativeConsole.warn(`[MainContext] context name with ${e.contextName} not found, loadJsFiles fail`)}))},76:(e,t,i)=>{i.d(t,{B:()=>r});var r=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}},356:e=>{e.exports=BabelRuntimeHelpers.asyncToGenerator},503:e=>{e.exports=BabelRuntimeHelpers.objectSpread2}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{i.r(r),i.d(r,{initAppRelatedContexts:()=>u,initGameRelatedContexts:()=>c,getAppContext:()=>e.F,getGameContext:()=>t.eC,createGameOpenDataContext:()=>f,getGameOpenDataContext:()=>n.r,createIsolatedGamePlugin:()=>a.dr,injectGamePlugin:()=>a.qo,getGamePlugins:()=>a.hS,isIsolateContext:()=>o.N0,initGameJS:()=>h,initFunctionalPage:()=>d,getPool:()=>s.M,isValidGameIndependentSubpackagePath:()=>o.Qj,loadJsFiles:()=>g});i(146);var e=i(290),t=i(309),n=i(945),a=i(813),o=i(61),s=i(176),l=(i(228),i(495),Object.keys),u=function(t){(0,o.N0)();for(var i=l(t),r=0;r<i.length;r++){var n=i[r];o.xJ[n]=t[n]}(0,o.N0)()&&(0,o.QT)((function(){Protect.hijack(),(0,o.F)(),(0,s.z)((0,e.F)()),(0,e.E)(t)}),"initAppIsolatedContext"),__wxConfig.onReady((()=>{!(0,o.N0)()&&__wxConfig.plugins&&(Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs())}))},c=()=>{var e;function i(){var e=__appServiceSDK__.getGameRelatedContextsExports(),i=e.game.FunctionalPage,r=__wxConfig.appLaunchInfo;if(i.parseCompletePath(r.path).isFunctionalPage&&i.VALID_SCENE.includes(r.scene))d(e);else if((0,o.c6)(r.scene)){var n=(0,o.Qj)(r.path,__wxConfig.subPackages);if(n){var a=(0,t.eC)(),s=n.root;s.endsWith(".js")||(s.endsWith("/")||(s=`${s}/`),s=`${s}game.js`),a.setEntry([s]),p(e,(e=>{e&&(console.error("run game independent subpackage fail",e),wxNativeConsole.error("run game independent subpackage fail",e),a.evaluateScriptFile("game.js"),Reporter.reportIDKey({key:"loadGameIndependentSubPackageFail"}))}))}else p(e)}else p(e)}(__wxConfig.preload||102==__wxConfig.preloadType)&&(e=__appServiceSDK__.getGameRelatedContextsExportsWx().game),(0,t.xC)(e),__wxConfig.onReady((function(){((0,o.G$)()||JSContext.isAsync())&&(0,o.N0)()?(0,a.K0)().then((()=>(i(),null))):i()}))};function d(e){(e=e||__appServiceSDK__.getGameRelatedContextsExports()).game.FunctionalPage.initFunctionalPage()}function h(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,s.M)().length>0||p(e)}function p(e,i){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,o.N0)()&&(0,o.QT)((function(){(0,o.F)(),(0,s.z)((0,t.eC)());var r=(0,t.M)(e.game);r&&r.catch&&r.catch((e=>{"function"==typeof i&&i(e)}))}),"initGameIsolatedContext")}function f(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),(0,o.QT)((function(){(0,s.z)((0,n.r)());var t=(0,n.J)(e.gameOpenData);t&&t.catch&&t.catch((e=>{}))}),"initGameOpenDataContext")}var g=()=>{}})(),__subContextEngine__=r})(),(()=>{"use strict";var e=(e,t,i)=>{i.d(t,{default:()=>x});var r={openAddress:62,setNavigationBarRightButton:238,navigateToDevMiniProgram:351,insertLivePusher:360,updateLivePusher:361,removeLivePusher:362,operateLivePusher:363,insertLivePlayer:364,updateLivePlayer:365,removeLivePlayer:366,operateLivePlayer:367,openOfflinePayView:403,setCookies:502,getCookies:503,joinVoIPChat:516,exitVoIPChat:517,onVoIPChatMembersChanged:518,onVoIPChatSpeakersChanged:519,onVoIPChatInterrupted:520,updateVoIPChatMuteConfig:521,insertXWebLivePlayer:561,updateXWebLivePlayer:562,removeXWebLivePlayer:563,insertXWebLivePusher:564,updateXWebLivePusher:565,removeXWebLivePusher:566,operateXWebLivePlayer:567,operateXWebLivePusher:568,insertVoIPView:623,updateVoIPView:624,removeVoIPView:625,chooseShareGroup:627,navigateToMiniProgramDirectly:632,navigateBackNative:646,operateMediaContainer:686,operateMediaTrack:687,openVideoEditor:705,operateMediaRecorder:712,onMediaRecorderStateChange:713,operateCanvasPlayer:741,onCanvasPlayerStateChange:742,chooseAddressForPlugin:765,openSettingForPlugin:768,requestPaymentForPlugin:771,subscribeVoIPMembers:780,onVoIPVideoMembersChanged:781,openUrlForPlugin:844,enterContactForPlugin:850,setLoginAuthForPlugin:855,openAddressWithLightMode:905,editTextWithPopForm:906,enableShareTimeLine:909,private_getEnterOptions:911,requestLivePlayerPictureInPicture:930,private_chooseInvoiceTitleDirectly:932,insertXWebVoIPView:934,updateXWebVoIPView:935,removeXWebVoIPView:936,private_getPhoneNumberDirectly:937,preloadWebview:955,private_openCardDirectly:961,openChannelsCreateContact:985,private_plugin_webview:986,private_launchTrialMiniProgram:992,showSalesDrivingMenu:1003,onSalesDrivingMessage:1004,TCPServer:1026,inputTypeSafePassword:1027},n=null,a=[],o=e=>{null!==n?e():a.push(e)};WeixinJSBridge.subscribe("batchGetPluginPermissionBytes",(e=>{n=e.data.pluginPermissionBytes,a.forEach((e=>e())),a=[]}));var s=(e,t)=>{e=(e=>e.split("/",1)[0])(e);var i=n&&n[e]&&n[e][t];return null==i?i=[0,0,0]:"object"!=typeof i&&(i=[i,i,i]),i};function l(e,t,i){__wxConfig.supportInvokeWithAppId?WeixinJSBridge.invoke("getPluginPermissionBytes",{pluginList:[{pluginId:e,indexes:[r[t]]}]},(t=>{var r=t.pluginPermissionMap[e][0];i([r,r,r])})):o((()=>{var r=s(e,t);i(r)}))}function u(e,t,i,r){i=parseInt(i,10),l(e,t,(e=>{r(e[0]===i)}))}function c(e,t,i,r){i=parseInt(i,10),l(e,t,(e=>{r(e[0]!==i)}))}BabelRuntimeHelpers.objectSpread2;var d=Function.prototype.call,h=(d.bind(String.prototype.indexOf),d.bind(String.prototype.slice),d.bind(Array.prototype.sort),d.bind(Number.prototype.toString),d.bind(Object.prototype.toString)),p=(Object.keys,Array.isArray,JSON.parse('{"i":{"createRequestTask":["__skipDomainCheck__","url"],"installDownloadTask":["downloadId"],"downloadAppInternal":["appUrl"],"addDownloadTaskStraight":["taskName","taskUrl","fileMd5"],"getInstallState":["packageName","packageNameArray"],"setClipboardData":["data"],"getClipboardData":[],"navigateBackApplication":[]}}'),Math.floor,Math.random,new Set,Function.prototype.call);p.bind(Set.prototype.has),p.bind(Set.prototype.add);var f=Object.create(null);function g(){return{invoke(e,t,i,r={}){var n=r.appId;return __wxConfig.supportInvokeWithAppId||void 0===n?WeixinJSBridge.invoke(e,t,i,r):o((()=>{var a=function(e,t,i){delete i.permissionBytes;var r=s(t,e);return i.permissionBytes=r,i}(e,n,t);WeixinJSBridge.invoke(e,a,i,r)}))},on:(e,t)=>f[e]instanceof Array?(f[e].push(t),null):(f[e]=null,WeixinJSBridge.on(e,t)),publish:(e,t,i)=>WeixinJSBridge.publish(e,t,i),subscribe:(e,t)=>WeixinJSBridge.subscribe(e,t)}}var _=!1,m=[],v=[],y=function(e){v.push(e)},A=function(e){m.push(e),_||(this.bridge.on("onSubPackageReady",(e=>{v.forEach((t=>{"function"==typeof t&&t(void 0,e)})),m.forEach((t=>{"function"==typeof t&&t(void 0,e)}))})),_=!0)};function b(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}var E=(e,t)=>{if(!t)return null;if(t=t.split("."),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("parseKeyChain keyChain is unexpected");if(!t.length)return null;for(var i=t[t.length-1],r=e,n=0;n<t.length-1;n++){if(!r)return null;r=r[t[n]]}return[r,i]},w=(e,{stringify:t=JSON.stringify,parse:i=JSON.parse,arrayBufferProto:r=ArrayBuffer.prototype,violateConvention:n=!1}={})=>{if(!e)return e;var a=typeof e;if("function"===a)throw new Error("[Safeway] not allow to pass function.");if("object"!==a)return e.valueOf();var o,s=Object.keys(e),l={};if(n)((e,t,i)=>{if(null==e)return e;var r=(e,n,a=[])=>{for(var o in e){var s=e[o];if("[object Object]"===Object.prototype.toString.call(s)||"[object Array]"===Object.prototype.toString.call(s)){var l=[...a];l.push(o),r(s,n,l)}else if(void 0!==s&&"[object ArrayBuffer]"===Object.prototype.toString.call(s)&&void 0!==s.byteLength){var u=Array.prototype.concat.call(a,o).join(".");Object.setPrototypeOf(s,i),t[u]=s}}};r(e,t)})(e,l,r);else for(var u=0;u<s.length;u++){var c=s[u],d=e[c];void 0!==d&&"ArrayBuffer"===b(d)&&void 0!==d.byteLength&&(Object.setPrototypeOf(d,r),l[c]=d)}try{o=i(t(e))}catch(e){throw new Error(`[Safeway] data clone error ${e.toString()}`)}for(var h=Object.keys(l),p=0;p<h.length;p++){var f=h[p];if(n){var g=E(o,f);if(!g)continue;var[_,m]=g;_[m]=l[f]}else o[f]=l[f]}return o};function T(e,t,i=!1){return function(...r){for(var n=[],a=0;a<r.length;a++)n[a]=w(r[a],{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto,violateConvention:i});t.apply(this,n)}}function C(e,t,{cloneArgs:i=!0,violateConvention:r=!1}={}){return function(...n){for(var a=[],o=0;o<n.length;o++)"function"==typeof n[o]?a[o]=new T(e,n[o],r):a[o]=i?w(n[o],{parse:JSON.parse,stringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype,violateConvention:r}):n[o];var s=t.apply(this,a);return w(s,{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto})}}function S(e,t,i,r=!0,n=!1){for(var a=Object.keys(e),o=0;o<a.length;o++){var s=a[o],l=e[s];if("function"!=typeof l)throw new Error(`Export value of Safeway must be a function, key ${s} func ${typeof l}`);i&&void 0!==__subContextEngine__&&__subContextEngine__.isIsolateContext()?t[s]=new C(i,l,{cloneArgs:r,violateConvention:n}):t[s]=l}}function I(e){var t=g(),i={create:(e,t)=>WeixinWorker.create(e,t),onWorkerMsg:e=>WeixinWorker.onWorkerMsg(e),postMsgToWorker:(e,t,i)=>WeixinWorker.postMsgToWorker(e,t,i),terminate:e=>WeixinWorker.terminate(e)},r={ifIs:u,ifIsNot:c};S(t,t,e,{cloneArgs:!1}),S(i,i,e,!0,!0),S(r,r,e),this.bridge=t,this.worker=i,this.apiSign={makeApiSign:(e,t)=>t},this.pluginPermissionBytes=r,S({onSubpackageReady:A,beforeSubpackageReady:y},this,e)}var x=class{constructor(e){I.call(this,e)}static splitOnBridgeListener(e){return function(e){return null===f[e]?(console.error("`splitOnBridgeListener` should be called before any listeners attached to it. Ignored."),null):(f[e]=[],WeixinJSBridge.on(e,((...t)=>{var i=f[e];for(var r of i)if(!1===r(...t))break})),t=>{f[e].unshift(t)})}(e)}}},t={n:e=>{var i=e&&e.__esModule?()=>e.default:()=>e;return t.d(i,{a:i}),i},d:(e,i)=>{for(var r in i)t.o(i,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},i={};e(0,i,t),Safeway=i.default})();var __safeway__=new Safeway,__sclEngine__,__errorTracer__,Reporter;(()=>{var e={821:(e,t,i)=>{"use strict";i.r(t),i.d(t,{exparser:()=>a,onThemeChange:()=>m,onViewportResize:()=>v,timestamp:()=>A,timestampMs:()=>b,getEngineConfig:()=>E,getWindowWidth:()=>w,getWindowHeight:()=>T,getTheme:()=>C,getDevicePixelRatio:()=>S,getSafeArea:()=>I,invoke:()=>x,subscribe:()=>P,timeoutCallback:()=>D});var r=i(995),n=i(404);r.globalOptions.publicProperties=!0,r.globalOptions.renderingMode="full",r.globalOptions.classPrefix="",r.globalOptions.templateEngine=n.GlassEaselTemplate;var a=r,o=WeixinJSBridge,s=[],l=[],u=0,c=0,d=0,h=null,p=null,f={};["onViewDidResize","onAppRouteResized","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onTextViewDrag","onImageViewLoad","onScrollViewScroll","onThemeChange"].forEach((e=>{f[e]=Safeway.splitOnBridgeListener(e)}));var g=e=>e?{left:e.left,top:e.top,right:Math.max(u-e.right,0),bottom:Math.max(c-e.bottom,0)}:e,_=e=>{u=e.size.framesetWidth||e.size.screenWidth,c=e.size.framesetHeight||e.size.screenHeight,p=g(i.g.__wxConfig.safeArea),s.forEach((e=>{e()}))};f.onViewDidResize(_),f.onAppRouteResized(_),f.onThemeChange((e=>{h!==e.theme&&i.g.__wxConfig.darkmode&&(h=e.theme,r.triggerRender((()=>{l.forEach((e=>e({theme:h})))})))}));var m=function(e){l.push(e)},v=function(e){s.push(e)},y=function(){d&&u&&c||o.invoke("getSystemInfo",{},(e=>{d=e.pixelRatio,u&&c||(u=e.framesetWidth||e.screenWidth,c=e.framesetHeight||e.screenHeight),p=g(e.safeArea)}))},A=function(){return Math.floor(Date.now()/1e3)},b=function(){return Date.now()%1e3},E=function(){return{relativeToParentContent:!1}},w=function(){return y(),u},T=function(){return y(),c},C=function(){return function(){if(!h){var e=i.g.__wxConfig,{darkmode:t}=e;h=t?e.theme:"light"}}(),h||"light"},S=function(){return d},I=function(){return p},x=function(e,t,i){o.invoke(e,t,(e=>{i&&i.exec(e)}))},P=function(e,t){f[e]((e=>{if(t)return t.exec(e)}))},D=function(e,t){t&&setTimeout((e=>{t.exec(e)}),e)}},57:(e,t,i)=>{"use strict";i.d(t,{W:()=>r,J:()=>n});var r=[],n=[]},404:(e,t,i)=>{e.exports=(()=>{"use strict";var e={674:(e,t,r)=>{r.r(t),r.d(t,{GlassEaselTemplate:()=>C});var n,a=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var i=e[t];if(!0===i)return!0;if(!i)continue;if(a(i))return!0}return!1},o=function(e,t,r,n,o,s,l){if("object"==typeof e){var u=[],c=function(e,t){var r=e;return i(995).safeCallback("Template Function",r,null,t)},d=function(i){if(void 0===u[i]){var n=(0,e.I[i])(t,r,d,c);u[i]=void 0===n?null:n}return u[i]},h=!0===n||e.L(n,o,d);if(l||!0===h||h&&a(h)){var p=e.F(t,r,d,c),f=null;if(e.M){var g=e.M;f=[];for(var _=0;_<g.length;_+=1){var m=g[_];if("number"==typeof m)if(0===_){if(!s[m]){f=null;break}f.push.apply(f,s[m])}else{var v=d(m);f.push("number"==typeof v?v:v.toString())}else f.push(m)}}return[p,h,f]}}else if(l)return[e,void 0,null];return null},s=function(e,t,r,n){if("object"==typeof e){var a=[],o=function(e,t){var r=e;return i(995).safeCallback("Template Function",r,null,t)},s=function(i){if(void 0===a[i]){var n=(0,e.I[i])(t,r,s,o);a[i]=void 0===n?null:n}return a[i]},l=e.F(t,r,s,o),u=null;if(e.M){var c=e.M;u=[];for(var d=0;d<c.length;d+=1){var h=c[d];if("number"==typeof h)if(0===d){if(!n[h]){u=null;break}u.push.apply(u,n[h])}else{var p=s(h);u.push("number"==typeof p?p:p.toString())}else u.push(h)}}return[l,u]}return[e,null]},l=function(e){return null==e?"":e.toString()};!function(e){e[e.ATTR=0]="ATTR"}(n||(n={}));var u,c=function(e){return e.indexOf("-")<=0?e:e.replace(/-[a-z]/g,(function(e){return e[1].toUpperCase()}))},d=function(e,t,r,a,o,s,u){var d=i(995),h=d.dataUtils.deepCopy(r);if(e instanceof d.VirtualNode&&"slot"===e.is&&"name"===t)return d.Element.setSlotName(e,l(h)),!1;if("id"===t)return e.id=l(h),!1;if("slot"===t)return e.slot=l(h),!1;if("class"===t){if(s)e.hasExternalClass("class")?e.setExternalClass("class",l(h)):e.class=l(h);else e.class=l(h);return!1}if(s){var p=c(t);if(d.Component.hasPublicProperty(e,p))return o.scheduleReplace([p],h,null),!0;if("model:"===t.slice(0,6)){a||console.warn('Cannot apply reverse binding to property "'+t+'" because the binding expression is not a valid lvalue');var f=p.slice(6);if(d.Component.hasPublicProperty(e,f))return o.scheduleReplace([f],h,null),u.push([f,a]),!0}}if("style"===t)return e.setNodeStyle(l(h),n.ATTR),!1;if(/^data:/.test(t)){var g=t.slice(5);return e.dataset[g]=h,!1}if(/^data-/.test(t)){g=c(t.slice(5).toLowerCase());return e.dataset[g]=h,!1}var _=/^(capture-)?(mut-)?(bind|catch):?(.+)$/.exec(t);if(_){var m=l(h);return e.addListener(_[4],(function(t){var i,r=e.ownerShadowRoot.getHostNode();if("object"==typeof r){var n=d.Element.getMethodCaller(r)||r,a=n[m];"function"==typeof a&&(i=a.call(n,t))}return i})),!1}return/^mark:/.test(t)?(e.setMark(t.slice(5),h),!1):s&&e.hasExternalClass(t)?(e.setExternalClass(t,l(h)),!1):e instanceof d.NativeNode&&("boolean"==typeof h?!0===h?e.setAttribute(t,""):e.removeAttribute(t):e.setAttribute(t,l(h)),!1)},h=function(e,t,r,n,a,l,u){var c;e.dataset=e.dataset||{};var h=!1,p=[],f=i(995),g=e instanceof f.Component,_=g?f.Component.getDataProxy(e):null;for(var m in t)if(Object.prototype.hasOwnProperty.call(t,m)){var v=t[m],y=void 0,A=null;if(u){var b=o(v,r,n,l,u,a,!1);if(!b)continue;y=b[0],A=b[2]}else y=(c=s(v,r,n,a))[0],A=c[1];d(e,m,y,A,_,g,p)&&(h=!0)}if(h&&_.doUpdates(null,!0),g)for(var E=function(t){var i=p[t],r=i[0],n=i[1];e.setPropertyChangeListener(r,(function(t){var i=e.ownerShadowRoot.getHostNode(),r=f.Component.getDataProxy(i);r.scheduleReplace(n,t,null),r.doUpdates(null,!1)}))},w=0;w<p.length;w+=1)E(w)},p=function(e,t,r,n){e.dataset=e.dataset||{};var a=[],o=i(995),l=e instanceof o.Component,u=l?o.Component.getDataProxy(e):null,c=s(r,n,null,null),h=c[0],p=c[1];if(d(e,t,h,p,u,l,a)&&u.doUpdates(null,!0),l)for(var f=function(t){var i=a[t],r=i[0],n=i[1];e.setPropertyChangeListener(r,(function(t){var i=e.ownerShadowRoot.getHostNode(),r=o.Component.getDataProxy(i);r.scheduleReplace(n,t,null),r.doUpdates(null,!1)}))},g=0;g<a.length;g+=1)f(g)},f=function(e,t,i){for(var r=function(e){for(var t={},i=0;i<e.length;i+=1){var r=e[i];r?Object.prototype.hasOwnProperty.call(t,r)?e[i]=void 0:t[l(r)]=i:Number.isNaN(r)&&(e[i]=void 0)}return t}(e),n=function(e){for(var t={},i=[],r=0;r<e.length;r+=1){var n=e[r];n?Object.prototype.hasOwnProperty.call(t,n)?(e[r]=void 0,i.push(r)):t[l(n)]=r:(Number.isNaN(n)&&(e[r]=void 0),i.push(r))}return[t,i]}(t),a=n[0],o=n[1],s=[],u=new Array(e.length),c=new Array(e.length),d=[],h=[],p=0,f=0,g=0;g<e.length;g+=1){var _=e[g];if(_)if(Object.prototype.hasOwnProperty.call(a,_)){var m=a[l(_)];s.push(t[m]),u[g]=i[m],c[g]=g!==m}else d.push(g-f),f+=1,s.push(null),u[g]=null;else if(p<o.length){m=o[p];s.push(t[m]),u[g]=i[m],p+=1,c[g]=g!==m}else d.push(g-f),f+=1,s.push(null),u[g]=null}for(var v=0,y=[],A=0;A<t.length;){for(var b=t[A],E=s[v];null===E;)E=s[v+=1];v>=s.length?(h.push({oldIndex:r[l(b)],index:A,pos:-1}),v+=1,A+=1):E===b?(y.push(v),v+=1,A+=1):b?(E?a[l(E)]===A+1?h.push({oldIndex:r[l(b)],index:A,pos:v}):(E=s[v+=1])===b?(y.push(v),v+=1):(v-=1,h.push({oldIndex:r[l(b)],index:A,pos:v})):h.push({oldIndex:r[l(b)],index:A,pos:v}),A+=1):v+=1}var w=0;for(g=0;g<h.length;g+=1){var T=h[g].pos;if(-1===T)break;for(;w<y.length&&T>y[w];)w+=1;w>=y.length?h[g].pos=-1:h[g].pos=y[w]}return{children:u,indexChanged:c,removes:d,inserts:h}};!function(e){e[e.PURE=0]="PURE",e[e.IF=1]="IF",e[e.FOR=2]="FOR",e[e.TEMPLATE_IS=3]="TEMPLATE_IS",e[e.SHADOW_ROOT=4]="SHADOW_ROOT",e[e.SLOT=5]="SLOT",e[e.INCLUDE=6]="INCLUDE",e[e.BLOCK_SLOT=7]="BLOCK_SLOT"}(u||(u={}));var g=function(e,t,i,r,n,a,o){if(i)for(var u=0;u<i.length;u+=1){var c=i[u];if(null!=c)if(void 0===c.S){var d=_(e,c,r,n,a,null,o);t.appendChild(d)}else{var h=s(c.S,r,n,a)[0];d=o.createTextNode(l(h));t.appendChild(d)}}},_=function(e,t,r,n,a,o,c){var d=null;if(void 0!==t.V){var p=t;if(p.V===u.IF){var f="wx:if",_=c.createVirtualNode(f);_.__templateArgs={},(M=i(995)).Element.setInheritSlots(_);for(var m=p.B,v=0;v<m.length;v+=1){var y=m[v];if(s(y.B,r,n,a)[0]){g(e,_,y.C,r,n,a,c),_.__templateArgs.key=v;break}}return _}if(p.V===u.FOR){f="wx:for";var A=c.createVirtualNode(f);A.__templateArgs={},(M=i(995)).Element.setInheritSlots(A);var b=A.__templateArgs.keyList=[],E=p.K,w=function(t,i,o){"*this"===E?b.push(t):b.push(null==t?void 0:t[E]);var s=c.createVirtualNode("wx:for-item");M.Element.setInheritSlots(s),n.push(t),n.push(i),a.push(o),a.push(null),g(e,s,p.C,r,n,a,c),a.pop(),a.pop(),n.pop(),n.pop(),A.appendChild(s)},T=s(p.L,r,n,a),C=T[0],S=T[1];if(C instanceof Array)for(v=0;v<C.length;v+=1)S&&S.push(v),w(C[v],v,S),S&&S.pop();else if("object"==typeof C)for(var I in C)Object.prototype.hasOwnProperty.call(C,I)&&(S&&S.push(I),w(C[I],I,S),S&&S.pop());else if("string"==typeof C)for(v=0;v<C.length;v+=1)S&&S.push(v),w(C[v],v,S),S&&S.pop();else if("number"==typeof C)for(v=0;v<C;v+=1)S&&S.push(v),w(v,v,S),S&&S.pop();return A}if(p.V===u.TEMPLATE_IS){var x=c.createVirtualNode("template");x.__templateArgs={},(M=i(995)).Element.setInheritSlots(x);var P=s(p.N,r,n,a)[0],D=x.__templateArgs.key=l(P),R=e(D);if(R){var O=s(p.D,r,n,a)[0];g(e,x,R.C,O,[],[],c)}return x}if(p.V===u.INCLUDE){var k=c.createVirtualNode("include");return(M=i(995)).Element.setInheritSlots(k),k}if(p.V===u.SHADOW_ROOT){var M=i(995);d=c=M.ShadowRoot.create(o)}else if(p.V===u.SLOT){var N=d=c.createVirtualNode("slot"),L=s(p.N,r,n,a)[0];(M=i(995)).Element.setSlotName(N,l(L))}else if(p.V===u.BLOCK_SLOT){N=d=c.createVirtualNode("virtual");var B=s(p.N,r,n,a)[0];N.slot=l(B)}else if(p.V===u.PURE){N=d=c.createVirtualNode("virtual");(M=i(995)).Element.setInheritSlots(N)}}else{var F=(U=t).T;d=c.tagNameUsed(F)||F.indexOf("-")>=0?c.createComponent(F,void 0,U.G):c.createNativeNode(F)}if(d instanceof(M=i(995)).Element){var U,W=t.SD;if(void 0!==W){d.__templateArgs||(d.__templateArgs={});var G=s(W,r,n,a)[0];d.__templateArgs.scopeData=G}if((U=t).EA)for(var V in U.EA)d.setAttribute(V,U.EA[V]);var j=U.A;j&&h(d,j,r,n,a);var H=t.C;H&&g(e,d,H,r,n,a,c)}return d},m=function(e,t,i,r,n,a,s,u,c){if(i)for(var d=0;d<i.length;d+=1){var h=i[d];if(null!=h)if(void 0===h.S)v(e.childNodes[d],t,h,r,n,a,s,u,c);else{var p=o(h.S,r,n,a,s,u,!1);if(p){var f=p[0];e.childNodes[d].textContent=l(f)}}}},v=function(e,t,r,n,a,s,c,d,p){if(void 0!==r.V){var y=r;if(y.V===u.IF){for(var A=function(r,o){var s=p.createVirtualNode("wx:if");s.__templateArgs={},i(995).Element.setInheritSlots(s),s.__templateArgs.key=r,o&&g(t,s,o,n,a,d,p),e.parentNode.replaceChild(s,e)},b=y.B,E=0;E<b.length;E+=1){var w=b[E];if(o(w.B,n,a,s,c,d,!0)[0])return void(e.__templateArgs.key===E?v(e,t,w,n,a,s,c,d,p):A(E,w.C))}return void(-1!==e.__templateArgs.key&&A(-1))}if(y.V===u.FOR){var T=e.__templateArgs.keyList,C=e.__templateArgs.keyList=[],S=y.K,I=function(e){"*this"===S?C.push(e):C.push(null==e?void 0:e[S])},x=function(e,i,r,o,l,u){a.push(e),a.push(i),c.push(r),c.push(!!l||void 0),d.push(o),d.push(null);var h=y.C;m(u,t,h,n,a,s,c,d,p),d.pop(),d.pop(),c.pop(),c.pop(),a.pop(),a.pop()},P=o(y.L,n,a,s,c,d,!0),D=P[0],R=P[1],O=P[2],k=!1,M=[];if(D instanceof Array)for(E=0;E<D.length;E+=1)I(D[E]),M.push({item:D[E],index:E});else if("object"==typeof D)for(var N in k=!0,D)I(D[N]),M.push({item:D[N],index:N});else if("string"==typeof D)for(E=0;E<D.length;E+=1)I(D[E]),M.push({item:D[E],index:E});else if("number"==typeof D)for(E=0;E<D;E+=1)I(E),M.push({item:E,index:E});var L=f(T,C,M),B=L.children,F=L.indexChanged,U=L.inserts,W=L.removes;for(E=0;E<B.length;E+=1){var G=B[E];if(G){var V=void 0;!0===R?V=!0:R&&(V=R[G.index]),O&&O.push(G.index),x(G.item,G.index,V,O,k||F[E],e.childNodes[E]),O&&O.pop()}}return void function(e,t,i,r,n,a){for(var o=i.childNodes,s=[],l=0;l<t.length;l+=1){var u=t[l];s.push({node:void 0!==u.oldIndex?o[u.oldIndex]:null,before:u.pos>=0?o[u.pos]:void 0,index:u.index})}for(l=0;l<e.length;l+=1){var c=o[p=e[l]];i.removeChild(c)}for(l=0;l<s.length;l+=1){var d=s[l],h=d.before,p=d.index;if(null===(c=s[l].node)){var f=r[p],g=f.item,_=f.index;n&&n.push(_),c=a(g,_,n),n&&n.pop()}i.insertBefore(c,h)}}(W,U,e,M,O,(function(e,r,o){var s=p.createVirtualNode("wx:for-item");return i(995).Element.setInheritSlots(s),a.push(e),a.push(r),d.push(o),d.push(null),g(t,s,y.C,n,a,d,p),d.pop(),d.pop(),a.pop(),a.pop(),s}))}if(y.V===u.TEMPLATE_IS){if((Q=o(y.N,n,a,s,c,d,!1))&&e.__templateArgs.key!==Q[0]){var j=_(t,y,n,a,d,null,p);e.parentNode.replaceChild(j,e)}else{var H=e.__templateArgs.key,z=t(H),Y=o(y.D,n,a,s,c,d,!0),$=Y[0],q=Y[1];m(e,t,z.C,$,[],q,[],[],p)}return}if(y.V===u.SLOT){if(Q=o(y.N,n,a,s,c,d,!1))(Z=i(995)).Element.setSlotName(e,l(Q[0]))}else{if(y.V===u.INCLUDE)return;var Q;y.V===u.BLOCK_SLOT&&(Q=o(y.N,n,a,s,c,d,!1))&&(e.slot=l(Q[0]))}}var Z=i(995);if(e instanceof Z.Element){var K=r.A;K&&h(e,K,n,a,d,s,c),(B=r.C)&&m(e,t,B,n,a,s,c,d,p)}},y=function(){return{P:"",C:[{V:u.SLOT,N:"",C:[]}]}},A=function(){function e(e,t,r,n){if(this.data=t,this.innerData=r,"string"==typeof e.template){var a=i(995);this.genObjectGroup=a.precompileTemplate(e.template).content[""]}else{var o=e.template||{content:y};this.genObjectGroup=o.content}this.updateMode=""}return e.create=function(t,i,r,n){return new e(t,i,r,n)},e.prototype.createInstance=function(e,t){var r=new b;r.template=this;var n=r.template.genObjectGroup("");r.genObject={V:u.SHADOW_ROOT,C:n.C},r.bindingMap=n.BM;var a=i(995);r.data=a.dataUtils.deepCopy(this.data),r.idMap=Object.create(null);var o=Object.create(null);o[""]=null;var s=E(e,r.genObject,r.data,r.idMap,o);if(null===o[""]&&s.childNodes.length>0){var l=document.createElement("virtual");s.appendChild(l),o[""]=l}return r.shadowRoot=s,r.slots=o,r.listeners=[],r},e}(),b=function(){function e(){}return e.prototype.updateValues=function(e,t,i,r,n,a){if(!this.bindingMapInstance){var o={};for(var u in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,u)){for(var c=this.bindingMap[u],d=new Array(c.length),h=0;h<c.length;h+=1){for(var p=c[h],f=e.shadowRoot,g=this.genObject,_=null,m=0;m<p.length;m+=1){var v=p[m];if("number"!=typeof v){_=v;break}f=f.childNodes[v],g=g.C[v]}var y=null===_?g.S:g.A[_];_&&("id"===_||_.indexOf(":")>=0)?d[h]=[f,"illegal-update:"+_,y]:d[h]=[f,_,y]}o[u]=d}this.bindingMapInstance=o}var A=this.bindingMapInstance;for(h=0;h<i.length;h+=1){var b=A[i[h][0]];if(void 0!==b)for(m=0;m<b.length;m+=1){var E=b[m],w=E[0],T=(_=E[1],y=E[2],s(y,t,null,null)[0]);null!==_?"boolean"==typeof T?!0===T?w.setAttribute(_,""):w.removeAttribute(_):w.setAttribute(_,l(T)):w.textContent=l(T)}}},e}(),E=function(e,t,r,n,a){var o,c=!1;if(void 0!==t.V){var d=t;if(d.V===u.SHADOW_ROOT&&(o=document.createDocumentFragment(),c=!0),d.V===u.SLOT)return a[""]=document.createElement("virtual")}else{var h=t,p=h.T;o=document.createElement(p);var f=h.A,g=function(t){if(!Object.prototype.hasOwnProperty.call(f,t))return"continue";var a=f[t],u=s(a,r,null,null)[0];if("id"===t)n[l(u)]=o;else{var c=t.split(":",2),d=c[0],h=c[1];if(h){if("bind"===d){var p=l(u);i(995).addListenerToElement(o,h,(function(t){var i;if("object"==typeof e){var r=e[p];"function"==typeof r&&(i=r.call(e,t))}return i}))}}else"boolean"==typeof u?!0===u?o.setAttribute(t,""):o.removeAttribute(t):o.setAttribute(d,l(u))}};for(var _ in f)g(_)}var m=t.C;if(1===m.length&&m[0].V===u.SLOT)c||(a[""]=o);else for(var v=0;v<m.length;v+=1){var y=m[v];if(void 0===y.S){var A=E(e,y,r,n,a);o.appendChild(A)}else{var b=s(y.S,r,null,null)[0];A=document.createTextNode(l(b));o.appendChild(A)}}return o},w=function(){return{P:"",C:[{V:u.SLOT,N:"",C:[]}]}},T=function(e,t,r){for(var n=e.childNodes,a=0;a<n.length;a+=1){var o=n[a];o instanceof i(995).Element&&(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(r[o.__slotName]=o),T(o,t,r))}},C=function(){function e(e,t,r,n){if(this.data=t,this.innerData=r,"string"==typeof e.template){var a=i(995);this.genObjectGroup=a.precompileTemplate(e.template).content[""],this.updateMode=""}else{var o=e.template||{content:w};this.genObjectGroup=o.content,this.updateMode=o.updateMode||""}}return e.create=function(t,i,r,n){return"native"===n.renderingMode?new A(t,i,r,n):new e(t,i,r,n)},e.prototype.createInstance=function(e,t){var r=new S;r.template=this;var n=r.template.genObjectGroup("");r.genObject={V:u.SHADOW_ROOT,C:n.C},""!==this.updateMode&&"bindingMap"!==this.updateMode||(r.bindingMap=n.BM,"bindingMap"===this.updateMode&&(r.forceBindingMapUpdate=!0));var a=i(995);return r.data=a.dataUtils.deepCopy(this.data),r.idMap=Object.create(null),r.slots=Object.create(null),r.shadowRoot=_(r.template.genObjectGroup,r.genObject,this.innerData,[],[],e,null),T(r.shadowRoot,r.idMap,r.slots),r.listeners=[],r},e}(),S=function(){function e(){}return e.prototype.updateValues=function(e,t,i,r,n,a){if(this.forceBindingMapUpdate)this.tryBindingMapUpdate(e,t,i);else if(!(i.length<=1&&this.bindingMap&&this.tryBindingMapUpdate(e,t,i))){for(var o=Object.create(null),s=0;s<i.length;s+=1)for(var l=i[s],u=o,c=0;c<l.length;c+=1){var d=l[c];if(!0===u[d])break;if(c===l.length-1){u[d]=!0;break}u[d]||(u[d]=Object.create(null)),u=u[d]}v(this.shadowRoot,this.template.genObjectGroup,this.genObject,t,[],o,[],[],e.shadowRoot)}},e.prototype.tryBindingMapUpdate=function(e,t,i){if(!this.bindingMapInstance){var r={};for(var n in this.bindingMap)if(Object.prototype.hasOwnProperty.call(this.bindingMap,n)){for(var a=this.bindingMap[n],o=new Array(a.length),u=0;u<a.length;u+=1){for(var c=a[u],d=e.shadowRoot,h=this.genObject,f=null,g=0;g<c.length;g+=1){var _=c[g];if("number"!=typeof _){f=_;break}d=d.childNodes[_],h=h.C[_]}var m=null===f?h.S:h.A[f];o[u]=[d,f,m]}r[n]=o}this.bindingMapInstance=r}var v=this.bindingMapInstance;for(u=0;u<i.length;u+=1){if(1!==(y=i[u]).length)return!1;if(void 0===(A=v[y[0]]))return!1}for(u=0;u<i.length;u+=1){var y,A=v[(y=i[u])[0]];for(g=0;g<A.length;g+=1){var b=A[g],E=b[0];f=b[1],m=b[2];if(null!==f)p(E,f,m,t);else{var w=s(m,t,null,null)[0];E.textContent=l(w)}}}return!0},e}()}},t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}return r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(674)})()},995:e=>{var t=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,i,r){var n=r(1),a=r(3),o=r(5),s=r(6),l=r(7),u=r(8),c=r(9),d=r(15),h=r(12),p=r(17),f=r(18),g=r(19),_=r(16),m=r(10),v=r(20),y=r(14),A=r(21),b=r(4),E=r(13),w=r(22);i.FreeTmpl=w,i.precompileTemplate=w.precompiler?w.precompiler.compile:null,i.precompiler=w.precompiler?w.precompiler:null,i.HtmlLLParser=w.htmlParser?w.htmlParser:null,i.LLParser=n,i.dataPath=l,i.dataUtils=o,i.Event=s,i.Element=c,i.TextNode=h,i.NativeNode=p,i.VirtualNode=f,i.ShadowRoot=g,i.Behavior=u,i.Component=d,i.Observer=m,i.DataGroup=_,i.ElementIterator=v,i.FakeDomElement=y,i.registerBehavior=u.create,i.registerElement=d.register,i.createElement=d.create,i.createTextNode=h.create,i.createVirtualNode=f.create,i.appendChild=c.appendChild,i.insertBefore=c.insertBefore,i.removeChild=c.removeChild,i.replaceChild=c.replaceChild,i.addListenerToElement=s.addListenerToElement,i.removeListenerFromElement=s.removeListenerFromElement,i.triggerEvent=s.triggerEvent,i.triggerRender=A.triggerRender,i.safeCallback=a.safeCallback,i.addGlobalErrorListener=a.addGlobalErrorListener,i.removeGlobalErrorListener=a.removeGlobalErrorListener,i.addGlobalWarningListener=a.addGlobalWarningListener,i.removeGlobalWarningListener=a.removeGlobalWarningListener,i.globalOptions=b,i.globalState=E,d._setDefaultTemplateEngine(w);var T=i.updateDefaultComponent=function(){delete d._list[""],d.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};T(),i.initBackend=function(){T()};var C=function(e){var i="";if(e instanceof t.Element&&(e.id&&(i+=' id="'+e.id+'"'),e.slot&&(i+=' slot="'+e.slot+'"'),e.__slotName&&(i+=' name="'+e.__slotName+'"'),e.classList&&(i+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(i+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof t.VirtualNode)return i;if(e instanceof t.Component)return d.listPublicProperties(e).forEach((function(t){i+=" "+t+"="+JSON.stringify(e[t])})),i;for(var r=e.attributes,n=0;n<r.length;n++)i+=" "+r[n].name+'="'+r[n].value+'"';return i},S=i.dumpElementToString=function(e,i,r){var n=null;"dom"===b.documentBackend&&(n=window);var a=0,o="";for(a=r=r||0;a;a--)o+="  ";var s="";if(e instanceof t.Element)s+=o+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+C(e)+">",s+=e instanceof t.VirtualNode?" [Exp-Virtual]":e instanceof t.NativeNode?" [Exp-Native]":" [Exp-Component]",s+="\n"+S(i?e.__wxSlotChildren:e.childNodes,i,r+1);else if(e instanceof t.TextNode)s+=o+e.textContent+" [Exp-Text]\n";else if(n&&n.HTMLElement&&e instanceof n.HTMLElement)s+=o+"<"+e.tagName.toLowerCase()+C(e)+"> [DOM-Element]",s+="\n"+S(i&&e.__wxSlotChildren||e.childNodes,i,r+1);else if(n&&n.Text&&e instanceof n.Text)s+=o+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(a=0;a<e.length;a++)s+=S(e[a],i,r);else s=o+"[unknown node]\n";return s};i.dumpElement=function(e,t){console.log(S(e,t))}},function(e,t,i){var r=null,n=function(){},a=n.stats={all:0,copyIn:0,parse:0,constructOut:0},o=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var i=r.llparser_create_descriptor(e,0),n=!1;"^"===t[0]&&(n=!0);for(var a=n?1:0;a<t.length;a++){var o=t.charCodeAt(a);if("-"===t[a+1]){var s=t.charCodeAt(a+2);o<=s?(r.llparser_descriptor_add_range(i,o,s),a+=2):r.llparser_descriptor_add_char(i,o)}else r.llparser_descriptor_add_char(i,o)}return n&&r.llparser_descriptor_revert(i),i};n.create=function(e,t,a){r||(r=i(2));var l=new n;a=a||16384;var u=l._llp=r.llparser_create(a,128,128),c={},d={},h="";for(h in c.ALL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_all(c.ALL),c.NULL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_nil(c.NULL),e)c[h]=o(u);for(h in e)for(var p=e[h],f=c[h],g=0;g<p.length;g++){for(var _=p[g].id,m=p[g].states,v=[],y=0;y<m.length;y++){var A=m[y];c[A]||(c[A]=s(u,A)),v.push(c[A])}var b=0;"_raw"===_?b=1:"_jump"===_?b=65536:"_blank"===_&&(b=65537);var E=r.llparser_add_rule(u,b,f,v.length,v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7]);0===b&&(d[E]=t[_])}return r.llparser_prepare(u),l._inputPtr=r.llparser_get_input_buffer(u),l._resultPtr=r.llparser_get_result(u),l._stateIdMap=c,l._ruleCbMap=d,l._charCountLimit=a,l};n.prototype.parse=function(e,t){var i=Date.now();(function(e,t,i,r){for(var n=r>e.length?e.length:r,a=0;a<n;a++)t[i+a]=e.charCodeAt(a);t[i+n]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),a.copyIn=a.copyIn+Date.now()-i,i=Date.now();var n=r.llparser_parse(this._llp,this._stateIdMap[e]);if(a.parse=a.parse+Date.now()-i,i=Date.now(),n)throw new Error("Parsing failed at character position "+(n-1)+' near "'+t.slice(n-20,n)+'"');var o=function(e,t,i,r,n){for(var a=[],o={i:0,r:0,n:!1,cc:-1,c:[]},s=o,l=n.pos,u=!1,c=!1,d=!1;;){var h=t[l],p=t[l+1];if(p<0?(c=!0,p=-p-1):c=!1,h>=0){d=!0;var f=i.slice(h,p);s.c.push(f),u=c}else{if(-1===h&&0===p)break;d=!1;var g=-h,_=p,m={i:s.c.length-(u?1:0),r:g,n:c,cc:_,c:[]};if(u){var v=s.c.length-1,y=s.c[v];m.c.push(y),s.c[v]=m}else s.c.push(m);a.push(s),s=m,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var A=a.pop();if(A.c[s.i]=r[s.r].call(e,s.c),s=A,u)break}l+=2}return o.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return a.constructOut=a.constructOut+Date.now()-i,o},n.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=n},function(e,t){e.exports=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var n in e)t.d(r,n,function(t){return e[t]}.bind(null,n));return r},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){"use strict";function r(e,t,i){return m.llparser_create(e,t,i)}function n(e){m.llparser_destroy(e)}function a(e,t){return m.llparser_create_descriptor(e,t)}function o(e){m.llparser_descriptor_set_all(e)}function s(e){m.llparser_descriptor_set_nil(e)}function l(e,t){m.llparser_descriptor_add_char(e,t)}function u(e,t,i){m.llparser_descriptor_add_range(e,t,i)}function c(e){m.llparser_descriptor_revert(e)}function d(e,t,i,r,n,a,o,s,l,u,c,d){return m.llparser_add_rule(e,t,i,r,n,a,o,s,l,u,c,d)}function h(e){m.llparser_prepare(e)}function p(e,t){return m.llparser_parse(e,t)}function f(e){return m.llparser_get_input_buffer(e)}function g(e){return m.llparser_get_result(e)}function _(){m.wasm_main()}i.r(t),i.d(t,"llparser_create",(function(){return r})),i.d(t,"llparser_destroy",(function(){return n})),i.d(t,"llparser_create_descriptor",(function(){return a})),i.d(t,"llparser_descriptor_set_all",(function(){return o})),i.d(t,"llparser_descriptor_set_nil",(function(){return s})),i.d(t,"llparser_descriptor_add_char",(function(){return l})),i.d(t,"llparser_descriptor_add_range",(function(){return u})),i.d(t,"llparser_descriptor_revert",(function(){return c})),i.d(t,"llparser_add_rule",(function(){return d})),i.d(t,"llparser_prepare",(function(){return h})),i.d(t,"llparser_parse",(function(){return p})),i.d(t,"llparser_get_input_buffer",(function(){return f})),i.d(t,"llparser_get_result",(function(){return g})),i.d(t,"wasm_main",(function(){return _})),i.d(t,"memory",(function(){return v}));var m=i(1),v=m.memory;m.__wbindgen_start()},function(e,t,i){"use strict";i.r(t),i.d(t,"memory",(function(){return a})),i.d(t,"rust_calloc",(function(){return o})),i.d(t,"rust_free",(function(){return s})),i.d(t,"llparser_create",(function(){return l})),i.d(t,"llparser_destroy",(function(){return u})),i.d(t,"llparser_create_descriptor",(function(){return c})),i.d(t,"llparser_descriptor_set_all",(function(){return d})),i.d(t,"llparser_descriptor_set_nil",(function(){return h})),i.d(t,"llparser_descriptor_add_char",(function(){return p})),i.d(t,"llparser_descriptor_add_range",(function(){return f})),i.d(t,"llparser_descriptor_revert",(function(){return g})),i.d(t,"llparser_add_rule",(function(){return _})),i.d(t,"llparser_prepare",(function(){return m})),i.d(t,"llparser_parse",(function(){return v})),i.d(t,"llparser_get_input_buffer",(function(){return y})),i.d(t,"llparser_get_result",(function(){return A})),i.d(t,"wasm_main",(function(){return b})),i.d(t,"__wbindgen_start",(function(){return E}));var r=new ArrayBuffer(1114112),n=function(e,t,i){function r(e){var t=0,i=0,r=0,n=0,a=0,l=0,u=0;i=(t=e+-8|0)+(e=-8&(n=f[e+-4>>2]))|0;e:{t:{i:{r:{n:if(!(1&n)){if(!(3&n))break r;if(e=(n=f[t>>2])+e|0,(0|(t=t-n|0))==f[262246]){if(3!=(3&f[i+4>>2]))break n;return f[262244]=e,f[i+4>>2]=-2&f[i+4>>2],f[t+4>>2]=1|e,void(f[e+t>>2]=e)}n>>>0>=256?s(t):(0|(r=f[t+8>>2]))==(0|(a=f[t+12>>2]))?(l=1048576,u=f[262144]&d(n>>>3),f[l>>2]=u):(f[r+12>>2]=a,f[a+8>>2]=r)}if(2&(n=f[i+4>>2]))f[i+4>>2]=-2&n,f[t+4>>2]=1|e,f[e+t>>2]=e;else{n:{if(f[262247]!=(0|i)){if((0|i)!=f[262246])break n;return f[262246]=t,e=f[262244]+e|0,f[262244]=e,f[t+4>>2]=1|e,void(f[e+t>>2]=e)}if(f[262247]=t,e=f[262245]+e|0,f[262245]=e,f[t+4>>2]=1|e,(0|t)==f[262246]&&(f[262244]=0,f[262246]=0),(i=f[262254])>>>0>=e>>>0)break r;if(!(e=f[262247]))break r;a:if(!((n=f[262245])>>>0<41))for(t=1049e3;;){if((r=f[t>>2])+f[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break a;if(!(t=f[t+8>>2]))break}if(r=4095,e=f[262252]){for(t=0;t=t+1|0,e=f[e+8>>2];);r=t>>>0>4095?t:4095}if(f[262256]=r,n>>>0<=i>>>0)break r;return void(f[262254]=-1)}if(e=(r=-8&n)+e|0,r>>>0>=256?s(i):(0|(r=f[i+12>>2]))==(0|(i=f[i+8>>2]))?(l=1048576,u=f[262144]&d(n>>>3),f[l>>2]=u):(f[i+12>>2]=r,f[r+8>>2]=i),f[t+4>>2]=1|e,f[e+t>>2]=e,f[262246]==(0|t)){f[262244]=e;break r}}if(e>>>0<256)break i;if(o(t,e),e=f[262256]+-1|0,f[262256]=e,!e){if(e=f[262252])break t;e=4095;break e}}return}return e=1048584+((i=e>>>3)<<3)|0,n=f[262144],i=1<<(31&i),r=f[e+8>>2],n&i||(f[262144]=i|n,r=e),i=r,f[e+8>>2]=t,f[i+12>>2]=t,f[t+12>>2]=e,void(f[t+8>>2]=i)}for(t=0;t=t+1|0,e=f[e+8>>2];);e=t>>>0>4095?t:4095}f[262256]=e}function n(e,t,i,r,a){var o;if(A=o=A-48|0,f[o+44>>2]=e,f[o+40>>2]=t,f[o+36>>2]=i,f[o+32>>2]=r,f[o+28>>2]=a,f[f[o+40>>2]>>2]!=f[o+36>>2])for(f[f[o+40>>2]>>2]=f[o+36>>2],f[o+24>>2]=f[f[o+40>>2]+136>>2],f[o+20>>2]=1&(0!=f[o+28>>2]^-1^-1);f[o+24>>2];){for(f[o+20>>2]||(f[o+28>>2]=f[o+24>>2]),f[o+16>>2]=f[f[f[o+24>>2]>>2]+8>>2],1==f[f[o+16>>2]+4>>2]&&n(f[o+44>>2],f[o+16>>2],f[o+36>>2],f[o+32>>2],f[o+28>>2]),f[o+12>>2]=0;!(f[o+12>>2]>=128);)g[f[o+12>>2]+(f[o+16>>2]+8|0)|0]&&(m[f[o+28>>2]>>2]>=m[f[o+32>>2]+(f[o+12>>2]<<2)>>2]&&f[f[o+32>>2]+(f[o+12>>2]<<2)>>2]||(f[f[o+32>>2]+(f[o+12>>2]<<2)>>2]=f[f[o+28>>2]>>2])),f[o+12>>2]=f[o+12>>2]+1;f[o+24>>2]=f[f[o+24>>2]+4>>2]}A=o+48|0}function a(e,t,i,r){var n;for(f[44+(n=A-48|0)>>2]=e,f[n+40>>2]=t,f[n+36>>2]=i,f[n+32>>2]=r,f[n+28>>2]=f[f[n+40>>2]+136>>2];f[n+28>>2];){if(f[n+24>>2]=f[f[f[n+28>>2]>>2]+8>>2],f[n+24>>2]==f[n+40>>2])for(f[n+20>>2]=f[f[f[n+28>>2]>>2]+12>>2],f[n+16>>2]=0;!(f[n+16>>2]>=128);){e:{if(1!=f[f[n+20>>2]+4>>2]){if(!g[f[n+16>>2]+(f[n+20>>2]+8|0)|0])break e}else if(f[n+12>>2]=f[f[n+44>>2]+32>>2]+((f[n+20>>2]-f[f[n+44>>2]+24>>2]|0)/140<<9),!f[f[n+12>>2]+(f[n+16>>2]<<2)>>2])break e;m[f[n+28>>2]>>2]>=m[f[n+32>>2]+(f[n+16>>2]<<2)>>2]&&f[f[n+32>>2]+(f[n+16>>2]<<2)>>2]||(f[f[n+32>>2]+(f[n+16>>2]<<2)>>2]=f[f[n+28>>2]>>2])}f[n+16>>2]=f[n+16>>2]+1}f[n+28>>2]=f[f[n+28>>2]+4>>2]}}function o(e,t){var i=0,r=0,n=0,a=0;f[e+16>>2]=0,f[e+20>>2]=0,n=e,i=0,(r=t>>>8)&&(i=31,t>>>0>16777215||(i=62+((t>>>(6-(r=y(r))&31)&1)-(r<<1)|0)|0)),f[n+28>>2]=i,n=1048848+(i<<2)|0;e:{t:{i:{r:{if((a=f[262145])&(r=1<<(31&i))){if(r=f[n>>2],(-8&f[r+4>>2])!=(0|t))break r;i=r;break i}f[262145]=r|a,f[n>>2]=e,f[e+24>>2]=n;break e}for(n=t<<(31==(0|i)?0:25-(i>>>1)&31);;){if(!(i=f[(a=16+((n>>>29&4)+r|0)|0)>>2]))break t;if(n<<=1,r=i,(-8&f[i+4>>2])==(0|t))break}}return t=f[i+8>>2],f[t+12>>2]=e,f[i+8>>2]=e,f[e+24>>2]=0,f[e+12>>2]=i,void(f[e+8>>2]=t)}f[a>>2]=e,f[e+24>>2]=r}f[e+12>>2]=e,f[e+8>>2]=e}function s(e){var t,i=0,r=0,n=0,a=0,o=0,s=0;t=f[e+24>>2];e:{t:{if((0|e)==(0|(i=f[e+12>>2]))){if(n=f[(i=e+20|0)>>2],r=f[(n?20:16)+e>>2])break t;i=0;break e}r=f[e+8>>2],f[r+12>>2]=i,f[i+8>>2]=r;break e}for(n=n?i:e+16|0;a=n,(r=f[(n=(i=r)+20|0)>>2])||(n=i+16|0,r=f[i+16>>2]),r;);f[a>>2]=0}e:if(t){r=1048848+(f[e+28>>2]<<2)|0;t:{if((0|e)==f[r>>2]){if(f[r>>2]=i,i)break t;return o=1048580,s=f[262145]&d(f[e+28>>2]),void(f[o>>2]=s)}if(f[(f[t+16>>2]==(0|e)?16:20)+t>>2]=i,!i)break e}f[i+24>>2]=t,(r=f[e+16>>2])&&(f[i+16>>2]=r,f[r+24>>2]=i),(e=f[e+20>>2])&&(f[i+20>>2]=e,f[e+24>>2]=i)}}function l(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,i=0,r=0,n=0,a=0,l=0,u=0,p=0,g=0,_=0,v=0;e:{t:{i:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(n=-8&(e=e+11|0),!(p=f[262145]))break i;i=0-n|0,u=0,(e>>>=8)&&(u=31,n>>>0>16777215||(u=62+((n>>>(6-(e=y(e))&31)&1)-(e<<1)|0)|0));r:{n:{if(e=f[1048848+(u<<2)>>2]){for(a=n<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((l=-8&f[e+4>>2])>>>0<n>>>0||(l=l-n|0)>>>0>=i>>>0||(r=e,i=l))){i=0;break n}if(l=f[e+20>>2],e=f[16+((a>>>29&4)+e|0)>>2],t=l&&(0|l)!=(0|e)?l:t,a<<=1,!e)break}if(t){e=t;break n}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&u))|e)&p))break i;if(!(e=f[1048848+(c(e&0-e)<<2)>>2]))break i}for(;r=(l=(a=(t=-8&f[e+4>>2])-n|0)>>>0<i>>>0&t>>>0>=n>>>0)?e:r,i=l?a:i,e=(t=f[e+16>>2])||f[e+20>>2];);if(!r)break i}if(i>>>0>=(e=f[262244])-n>>>0&&e>>>0>=n>>>0)break i;s(r);r:if(i>>>0>=16){if(f[r+4>>2]=3|n,f[4+(t=r+n|0)>>2]=1|i,f[t+i>>2]=i,i>>>0>=256){o(t,i);break r}e=1048584+((i>>>=3)<<3)|0,a=f[262144],i=1<<(31&i),u=f[e+8>>2],a&i||(f[262144]=i|a,u=e),i=u,f[e+8>>2]=t,f[i+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=i}else e=i+n|0,f[r+4>>2]=3|e,f[4+(e=e+r|0)>>2]=1|f[e+4>>2];return r+8|0}r:{n:{if(!(3&(e=(t=f[262144])>>>(r=31&(i=(n=e>>>0<11?16:e+11&-8)>>>3))))){if(n>>>0<=m[262244])break i;if(e)break n;if(!(e=f[262145]))break i;for(t=f[1048848+(c(e&0-e)<<2)>>2],i=(-8&f[t+4>>2])-n|0,a=t;;){if(!(e=f[t+16>>2])&&!(e=f[t+20>>2]))break r;i=(t=(r=(-8&f[e+4>>2])-n|0)>>>0<i>>>0)?r:i,a=t?e:a,t=e}}i=(e=f[1048592+(l=(r=i+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(a=f[e+8>>2]))==(0|(l=l+1048584|0))?(_=1048576,v=d(r)&t,f[_>>2]=v):(f[a+12>>2]=l,f[l+8>>2]=a),t=r<<3,f[e+4>>2]=3|t,f[4+(e=e+t|0)>>2]=1|f[e+4>>2];break t}return r=c(0-(e=(i=e<<r)&(0-(e=2<<r)|e))&e),e=f[1048592+(a=r<<3)>>2],(0|(i=f[e+8>>2]))==(0|(a=a+1048584|0))?(_=1048576,v=d(r)&t,f[_>>2]=v):(f[i+12>>2]=a,f[a+8>>2]=i),a=e+8|0,f[e+4>>2]=3|n,i=(t=r<<3)-n|0,f[4+(l=e+n|0)>>2]=1|i,f[e+t>>2]=i,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],n=f[262144],r=1<<(31&r),u=f[e+8>>2],n&r||(f[262144]=r|n,u=e),r=u,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=l,f[262244]=i,a}return s(a),i>>>0>=16?(f[a+4>>2]=3|n,f[4+(l=n+a|0)>>2]=1|i,f[i+l>>2]=i,(e=f[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=f[262246],n=f[262144],r=1<<(31&r),u=f[e+8>>2],n&r||(f[262144]=r|n,u=e),r=u,f[e+8>>2]=t,f[r+12>>2]=t,f[t+12>>2]=e,f[t+8>>2]=r),f[262246]=l,f[262244]=i):(e=i+n|0,f[a+4>>2]=3|e,f[4+(e=e+a|0)>>2]=1|f[e+4>>2]),a+8|0}i:{r:{n:{a:{if((t=f[262244])>>>0<n>>>0){if((e=f[262245])>>>0>n>>>0)break e;if(i=0,-1==(0|(t=h((e=n+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(a=-65536&e)+f[262248]|0,f[262248]=e,t=f[262249],f[262249]=t>>>0>e>>>0?t:e,!(i=f[262247]))break a;for(e=1049e3;;){if((0|r)==((t=f[e>>2])+(l=f[e+4>>2])|0))break n;if(!(e=f[e+8>>2]))break}break r}return e=f[262246],(r=t-n|0)>>>0<=15?(f[262246]=0,f[262244]=0,f[e+4>>2]=3|t,n=4+(t=e+t|0)|0,i=1|f[t+4>>2]):(f[262244]=r,i=e+n|0,f[262246]=i,f[i+4>>2]=1|r,f[e+t>>2]=r,i=3|n,n=e+4|0),f[n>>2]=i,e+8|0}for((e=f[262255])>>>0<=r>>>0&&e||(f[262255]=r),e=0,f[262256]=4095,f[262251]=a,f[262250]=r,f[262253]=0;t=e+1048584|0,f[e+1048592>>2]=t,f[e+1048596>>2]=t,256!=(0|(e=e+8|0)););f[262247]=r,e=a+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break i}if(!(f[e+12>>2]|r>>>0<=i>>>0|t>>>0>i>>>0)){f[e+4>>2]=a+l,t=(e=f[262247])+15&-8,f[262247]=t+-8,i=8+((r=a+f[262245]|0)+(e-t|0)|0)|0,f[262245]=i,f[t+-4>>2]=1|i,f[4+(e+r|0)>>2]=40,f[262254]=2097152;break i}}e=f[262255],f[262255]=e>>>0<r>>>0?e:r,t=r+a|0,e=1049e3;r:{for(;;){if((0|t)!=f[e>>2]){if(e=f[e+8>>2])continue;break r}break}if(!f[e+12>>2]){f[e>>2]=r,f[e+4>>2]=a+f[e+4>>2],f[r+4>>2]=3|n,a=r+n|0,n=(t-r|0)-n|0;n:{a:{if((0|t)!=f[262247]){if(f[262246]==(0|t))break a;if(1==(3&(e=f[t+4>>2]))&&((i=-8&e)>>>0>=256?s(t):(0|(l=f[t+12>>2]))==(0|(u=f[t+8>>2]))?(_=1048576,v=f[262144]&d(e>>>3),f[_>>2]=v):(f[u+12>>2]=l,f[l+8>>2]=u),n=i+n|0,t=t+i|0),f[t+4>>2]=-2&f[t+4>>2],f[a+4>>2]=1|n,f[n+a>>2]=n,n>>>0>=256){o(a,n);break n}e=1048584+((t=n>>>3)<<3)|0,i=f[262144],t=1<<(31&t),u=f[e+8>>2],i&t||(f[262144]=t|i,u=e),i=u,f[e+8>>2]=a,f[i+12>>2]=a,f[a+12>>2]=e,f[a+8>>2]=i;break n}f[262247]=a,e=f[262245]+n|0,f[262245]=e,f[a+4>>2]=1|e;break n}f[262246]=a,e=f[262244]+n|0,f[262244]=e,f[a+4>>2]=1|e,f[e+a>>2]=e}return r+8|0}}for(e=1049e3;!((t=f[e>>2])>>>0<=i>>>0&&(l=t+f[e+4>>2]|0)>>>0>i>>>0);)e=f[e+8>>2];for(f[262247]=r,e=a+-40|0,f[262245]=e,f[r+4>>2]=1|e,f[4+(e+r|0)>>2]=40,f[262254]=2097152,f[(t=(e=(l+-32&-8)-8|0)>>>0<i+16>>>0?i:e)+4>>2]=27,e=f[262250],u=f[262251],g=f[262253],f[(p=t+16|0)>>2]=f[262252],f[p+4>>2]=g,f[t+8>>2]=e,f[t+12>>2]=u,f[262251]=a,f[262250]=r,f[262252]=t+8,f[262253]=0,e=t+28|0;f[e>>2]=7,l>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|i)&&(f[t+4>>2]=-2&f[t+4>>2],e=t-i|0,f[i+4>>2]=1|e,f[t>>2]=e,e>>>0>=256?o(i,e):(e=1048584+((t=e>>>3)<<3)|0,r=f[262144],t=1<<(31&t),u=f[e+8>>2],r&t||(f[262144]=t|r,u=e),t=u,f[e+8>>2]=i,f[t+12>>2]=i,f[i+12>>2]=e,f[i+8>>2]=t))}if(i=0,!((e=f[262245])>>>0<=n>>>0))break e}return i}return t=e-n|0,f[262245]=t,r=(e=f[262247])+n|0,f[262247]=r,f[r+4>>2]=1|t,f[e+4>>2]=3|n,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;p[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(v(e|=0,t|=0))}function u(){}function c(e){return e?31-y(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function h(t){t|=0;var r=0|i.byteLength/65536,n=r+t|0;if(r<n&&n<65536){var a=new ArrayBuffer(v(n,65536)),o=new e.Int8Array(a);o.set(p),p=o,p=new e.Int8Array(a),new e.Int16Array(a),f=new e.Int32Array(a),g=new e.Uint8Array(a),_=new e.Uint16Array(a),m=new e.Uint32Array(a),new e.Float32Array(a),new e.Float64Array(a),i=a}return r}var p=new e.Int8Array(i),f=(new e.Int16Array(i),new e.Int32Array(i)),g=new e.Uint8Array(i),_=new e.Uint16Array(i),m=new e.Uint32Array(i),v=(new e.Float32Array(i),new e.Float64Array(i),e.Math.imul),y=(e.Math.fround,e.Math.abs,e.Math.clz32),A=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:h},buffer:{get:function(){return i}}}),rust_calloc:l,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,i){return 0|function(e,t,i){var r,n,a;return A=r=A-32|0,f[r+28>>2]=e,f[r+24>>2]=t,f[r+20>>2]=i,e=r,t=f[r+28>>2]?f[r+28>>2]:256,f[e+28>>2]=t,e=r,t=f[r+24>>2]?f[r+24>>2]:256,f[e+24>>2]=t,e=r,t=f[r+20>>2]?f[r+20>>2]:256,f[e+20>>2]=t,n=r,a=l(((((((v(f[r+24>>2],140)+52|0)+v(f[r+20>>2],44)|0)+(f[r+24>>2]<<9)|0)+(f[r+24>>2]<<9)|0)+v(f[r+20>>2],f[r+24>>2]<<3)|0)+(f[r+28>>2]<<1)|0)+(f[r+28>>2]<<3)|0,1),f[n+16>>2]=a,f[f[r+16>>2]+12>>2]=f[r+28>>2],f[f[r+16>>2]+16>>2]=f[r+24>>2],f[f[r+16>>2]+20>>2]=f[r+20>>2],f[f[r+16>>2]+4>>2]=0,f[f[r+16>>2]>>2]=0,f[f[r+16>>2]+8>>2]=0,f[r+12>>2]=f[r+16>>2]+52,f[f[r+16>>2]+24>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+v(f[r+24>>2],140),f[f[r+16>>2]+28>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+v(f[r+20>>2],44),f[f[r+16>>2]+32>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+36>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+24>>2]<<9),f[f[r+16>>2]+40>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+v(f[r+20>>2],f[r+24>>2]<<3),f[f[r+16>>2]+44>>2]=f[r+12>>2],f[r+12>>2]=f[r+12>>2]+(f[r+28>>2]<<1),f[f[r+16>>2]+48>>2]=f[r+12>>2],A=r+32|0,f[r+16>>2]}(e|=0,t|=0,i|=0)},llparser_destroy:function(e){!function(e){var t;A=t=A-16|0,f[t+12>>2]=e,r(f[t+12>>2]),A=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var i,r;return f[12+(i=A-16|0)>>2]=e,f[i+8>>2]=t,t=f[f[i+12>>2]+24>>2],r=f[i+12>>2],e=f[r+4>>2],f[r+4>>2]=e+1,f[i+4>>2]=t+v(e,140),f[f[i+4>>2]+4>>2]=f[i+8>>2]?1:0,f[i+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-1,p[f[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+4>>2]=-2,p[f[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var i;f[12+(i=A-16|0)>>2]=e,f[i+8>>2]=t,p[f[i+8>>2]+(f[i+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,i){!function(e,t,i){var r;for(f[12+(r=A-16|0)>>2]=e,f[r+8>>2]=t,f[r+4>>2]=i,f[r>>2]=f[r+8>>2];!(f[r>>2]>f[r+4>>2]);)p[f[r>>2]+(f[r+12>>2]+8|0)|0]=1,f[r>>2]=f[r>>2]+1}(e|=0,t|=0,i|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(f[12+(t=A-16|0)>>2]=e,f[t+8>>2]=1;!(f[t+8>>2]>=127);)p[f[t+8>>2]+(f[t+12>>2]+8|0)|0]=1&(0!=g[f[t+8>>2]+(f[t+12>>2]+8|0)|0]^-1),f[t+8>>2]=f[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,i,r,n,a,o,s,l,u,c,d){return 0|function(e,t,i,r,n,a,o,s,l,u,c,d){var h;return A=h=A+-64|0,f[h+60>>2]=e,f[h+56>>2]=t,f[h+52>>2]=i,f[h+48>>2]=r,f[h+44>>2]=n,f[h+40>>2]=a,f[h+36>>2]=o,f[h+32>>2]=s,f[h+28>>2]=l,f[h+24>>2]=u,f[h+20>>2]=c,f[h+16>>2]=d,t=f[f[h+60>>2]+28>>2],i=f[h+60>>2],e=f[i>>2],f[i>>2]=e+1,f[h+12>>2]=t+v(e,44),f[f[h+12>>2]>>2]=f[h+52>>2],f[f[h+12>>2]+4>>2]=f[h+48>>2],f[h+48>>2]>0&&(f[f[h+12>>2]+8>>2]=f[h+44>>2]),f[h+48>>2]>1&&(f[f[h+12>>2]+12>>2]=f[h+40>>2]),f[h+48>>2]>2&&(f[f[h+12>>2]+16>>2]=f[h+36>>2]),f[h+48>>2]>3&&(f[f[h+12>>2]+20>>2]=f[h+32>>2]),f[h+48>>2]>4&&(f[f[h+12>>2]+24>>2]=f[h+28>>2]),f[h+48>>2]>5&&(f[f[h+12>>2]+28>>2]=f[h+24>>2]),f[h+48>>2]>6&&(f[f[h+12>>2]+32>>2]=f[h+20>>2]),f[h+48>>2]>7&&(f[f[h+12>>2]+36>>2]=f[h+16>>2]),f[f[h+12>>2]+40>>2]=f[h+56>>2],f[h+48>>2]>0&&function(e,t,i){var r;f[28+(r=A-32|0)>>2]=e,f[r+24>>2]=t,f[r+20>>2]=i,f[r+16>>2]=(f[r+20>>2]-f[f[r+28>>2]+24>>2]|0)/140,1==f[f[r+20>>2]+4>>2]&&(t=f[f[r+28>>2]+40>>2],i=f[r+28>>2],e=f[i+8>>2],f[i+8>>2]=e+1,f[r+12>>2]=t+(e<<3),f[f[r+12>>2]>>2]=f[r+24>>2],f[f[r+12>>2]+4>>2]=f[f[r+20>>2]+136>>2],f[f[r+20>>2]+136>>2]=f[r+12>>2])}(f[h+60>>2],f[h+12>>2],f[h+52>>2]),A=h- -64|0,f[h+12>>2]}(e|=0,t|=0,i|=0,r|=0,n|=0,a|=0,o|=0,s|=0,l|=0,u|=0,c|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(A=t=A-32|0,f[t+28>>2]=e,f[t+24>>2]=0;!(f[t+24>>2]>=f[f[t+28>>2]+4>>2]);)f[t+20>>2]=f[f[t+28>>2]+24>>2]+v(f[t+24>>2],140),1==f[f[t+20>>2]+4>>2]&&n(f[t+28>>2],f[t+20>>2],f[t+20>>2],f[f[t+28>>2]+32>>2]+(f[t+24>>2]<<9)|0,0),f[t+24>>2]=f[t+24>>2]+1;for(f[t+16>>2]=0;!(f[t+16>>2]>=f[f[t+28>>2]+4>>2]);)f[t+12>>2]=f[f[t+28>>2]+24>>2]+v(f[t+16>>2],140),1==f[f[t+12>>2]+4>>2]&&(f[f[t+12>>2]>>2]=0,a(f[t+28>>2],f[t+12>>2],f[t+12>>2],f[f[t+28>>2]+36>>2]+(f[t+16>>2]<<9)|0)),f[t+16>>2]=f[t+16>>2]+1;A=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var i,r,n;return A=i=A-32|0,f[i+24>>2]=e,f[i+20>>2]=t,f[i+16>>2]=0,f[i+12>>2]=0,r=i,n=function e(t,i,r,n,a,o,s){var l,u=0,c=0;A=l=A-96|0,f[l+88>>2]=t,f[l+84>>2]=i,f[l+80>>2]=r,f[l+76>>2]=n,f[l+72>>2]=a,f[l+68>>2]=o,f[l+64>>2]=s,f[l+60>>2]=_[f[l+80>>2]+(f[f[l+76>>2]>>2]<<1)>>1],m[l+60>>2]>=128&&(f[l+60>>2]=1);e:if(f[f[l+72>>2]>>2]>(f[l+64>>2]-4|0))f[l+92>>2]=-1;else if(1==f[f[l+84>>2]+4>>2])if(f[l+56>>2]=f[f[l+76>>2]>>2],f[l+52>>2]=f[f[l+72>>2]>>2],f[l+48>>2]=0,f[l+44>>2]=0,f[l+40>>2]=f[f[l+88>>2]+32>>2]+((f[l+84>>2]-f[f[l+88>>2]+24>>2]|0)/140<<9),f[l+36>>2]=0,!f[f[l+40>>2]+(f[l+60>>2]<<2)>>2]|m[l+60>>2]<=0|m[l+60>>2]>=127?!f[l+60>>2]|!f[f[l+40>>2]+508>>2]?f[f[l+40>>2]>>2]&&(f[l+36>>2]=f[f[l+40>>2]>>2]):f[l+36>>2]=f[f[l+40>>2]+508>>2]:f[l+36>>2]=f[f[l+40>>2]+(f[l+60>>2]<<2)>>2],f[l+36>>2]){for(f[l+68>>2]||f[f[l+36>>2]+40>>2]||(f[l+48>>2]=f[f[l+72>>2]>>2],t=f[l+72>>2],f[t>>2]=f[t>>2]+2),f[l+32>>2]=0;f[l+32>>2]<f[f[l+36>>2]+4>>2];){if(f[l+28>>2]=f[l+68>>2],f[l+68>>2]||!f[f[l+36>>2]+40>>2]|f[f[l+36>>2]+40>>2]==(f[l+32>>2]+65536|0)||(f[l+28>>2]=1),u=l,c=e(f[l+88>>2],f[(f[l+36>>2]+8|0)+(f[l+32>>2]<<2)>>2],f[l+80>>2],f[l+76>>2],f[l+72>>2],f[l+28>>2],f[l+64>>2]),f[u+24>>2]=c,f[l+24>>2]<0){f[l+92>>2]=-1;break e}f[l+68>>2]|f[f[l+36>>2]+40>>2]!=(f[l+32>>2]+65536|0)||(f[l+44>>2]=f[l+24>>2]),f[l+32>>2]=f[l+32>>2]+1}for(f[l+68>>2]||(f[f[l+36>>2]+40>>2]?1==f[f[l+36>>2]+40>>2]&&(i=f[l+56>>2],r=f[f[l+88>>2]+48>>2],n=f[l+72>>2],t=f[n>>2],f[n>>2]=t+1,f[r+(t<<2)>>2]=i,f[l+44>>2]=f[f[l+72>>2]>>2],i=f[f[l+76>>2]>>2],r=f[f[l+88>>2]+48>>2],n=f[l+72>>2],t=f[n>>2],f[n>>2]=t+1,f[r+(t<<2)>>2]=i):(f[f[f[l+88>>2]+48>>2]+(f[l+48>>2]<<2)>>2]=0-f[l+36>>2],f[f[f[l+88>>2]+48>>2]+(f[l+48>>2]+1<<2)>>2]=f[f[l+36>>2]+4>>2],f[l+44>>2]=f[l+48>>2]+1));;){if(f[f[l+72>>2]>>2]>(f[l+64>>2]-4|0)){f[l+92>>2]=-1;break e}if(f[l+20>>2]=f[f[l+88>>2]+36>>2]+((f[l+84>>2]-f[f[l+88>>2]+24>>2]|0)/140<<9),f[l+16>>2]=0,f[l+60>>2]=_[f[l+80>>2]+(f[f[l+76>>2]>>2]<<1)>>1],m[l+60>>2]>=128&&(f[l+60>>2]=1),!f[f[l+20>>2]+(f[l+60>>2]<<2)>>2]|m[l+60>>2]<=0|m[l+60>>2]>=127?!f[l+60>>2]|!f[f[l+20>>2]+508>>2]||(f[l+16>>2]=f[f[l+20>>2]+508>>2]):f[l+16>>2]=f[f[l+20>>2]+(f[l+60>>2]<<2)>>2],!f[l+16>>2])break;for(f[l+68>>2]||(f[f[l+16>>2]+40>>2]?65536!=f[f[l+16>>2]+40>>2]&&(f[f[l+72>>2]>>2]=f[l+52>>2]):(f[f[f[l+88>>2]+48>>2]+(f[l+44>>2]<<2)>>2]=(0-f[f[f[l+88>>2]+48>>2]+(f[l+44>>2]<<2)>>2]|0)-1,f[l+48>>2]=f[f[l+72>>2]>>2],t=f[l+72>>2],f[t>>2]=f[t>>2]+2)),f[l+12>>2]=1;f[l+12>>2]<f[f[l+16>>2]+4>>2];){if(f[l+8>>2]=f[l+68>>2],f[l+68>>2]||!f[f[l+16>>2]+40>>2]|f[f[l+16>>2]+40>>2]==(f[l+12>>2]+65536|0)||(f[l+8>>2]=1),u=l,c=e(f[l+88>>2],f[(f[l+16>>2]+8|0)+(f[l+12>>2]<<2)>>2],f[l+80>>2],f[l+76>>2],f[l+72>>2],f[l+8>>2],f[l+64>>2]),f[u+4>>2]=c,f[l+4>>2]<0){f[l+92>>2]=-1;break e}f[l+68>>2]|f[f[l+16>>2]+40>>2]!=(f[l+12>>2]+65536|0)||(f[l+44>>2]=f[l+4>>2]),f[l+12>>2]=f[l+12>>2]+1}f[l+68>>2]||(f[f[l+16>>2]+40>>2]?1==f[f[l+16>>2]+40>>2]&&(i=f[l+56>>2],r=f[f[l+88>>2]+48>>2],n=f[l+72>>2],t=f[n>>2],f[n>>2]=t+1,f[r+(t<<2)>>2]=i,f[l+44>>2]=f[f[l+72>>2]>>2],i=f[f[l+76>>2]>>2],r=f[f[l+88>>2]+48>>2],n=f[l+72>>2],t=f[n>>2],f[n>>2]=t+1,f[r+(t<<2)>>2]=i):(f[f[f[l+88>>2]+48>>2]+(f[l+48>>2]<<2)>>2]=0-f[l+16>>2],f[f[f[l+88>>2]+48>>2]+(f[l+48>>2]+1<<2)>>2]=f[f[l+16>>2]+4>>2],f[l+44>>2]=f[l+48>>2]+1))}f[l+92>>2]=f[l+44>>2]}else f[l+92>>2]=-1;else{if(f[l+60>>2]&&(-1==f[f[l+84>>2]+4>>2]&&(t=f[l+76>>2],f[t>>2]=f[t>>2]+1),!f[f[l+84>>2]+4>>2])){if(!g[f[l+60>>2]+(f[l+84>>2]+8|0)|0]){f[l+92>>2]=-1;break e}t=f[l+76>>2],f[t>>2]=f[t>>2]+1}f[l+68>>2]||(i=f[f[l+76>>2]>>2],r=f[f[l+84>>2]+4>>2],n=f[f[l+88>>2]+48>>2],a=f[l+72>>2],t=f[a>>2],f[a>>2]=t+1,f[n+(t<<2)>>2]=i-(-2==(0|r)?0:1),i=f[f[l+76>>2]>>2],r=f[f[l+88>>2]+48>>2],n=f[l+72>>2],t=f[n>>2],f[n>>2]=t+1,f[r+(t<<2)>>2]=i),f[l+92>>2]=f[f[l+72>>2]>>2]-1}return A=l+96|0,f[l+92>>2]}(f[i+24>>2],f[i+20>>2],f[f[i+24>>2]+44>>2],i+12|0,i+16|0,0,f[f[i+24>>2]+12>>2]<<1),f[r+8>>2]=n,e=f[f[i+24>>2]+48>>2],t=f[i+16>>2],f[i+16>>2]=t+1,f[e+(t<<2)>>2]=-1,e=f[f[i+24>>2]+48>>2],t=f[i+16>>2],f[i+16>>2]=t+1,f[e+(t<<2)>>2]=0,_[f[f[i+24>>2]+44>>2]+(f[i+12>>2]<<1)>>1]|f[i+8>>2]<0?f[i+28>>2]=f[i+12>>2]+1:f[i+28>>2]=0,A=i+32|0,f[i+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,f[12+(t=A-16|0)>>2]=e,f[f[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),a=n.memory,o=n.rust_calloc,s=n.rust_free,l=n.llparser_create,u=n.llparser_destroy,c=n.llparser_create_descriptor,d=n.llparser_descriptor_set_all,h=n.llparser_descriptor_set_nil,p=n.llparser_descriptor_add_char,f=n.llparser_descriptor_add_range,g=n.llparser_descriptor_revert,_=n.llparser_add_rule,m=n.llparser_prepare,v=n.llparser_parse,y=n.llparser_get_input_buffer,A=n.llparser_get_result,b=n.wasm_main,E=n.__wbindgen_start}])},function(e,t,i){var r=i(4),n=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};n.create=function(e){return new n(e)},n.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},n.prototype.remove=function(e){var t=this._arr,i=0;if("function"==typeof e)for(i=0;i<t.length;i++){var r=t[i].func;if(r===e)return t.splice(i,1),this.empty=!t.length,r}else for(i=0;i<t.length;i++)if(t[i].id===e){var n=t[i].func;return t.splice(i,1),this.empty=!t.length,n}return null},n.prototype.call=function(e,t,i){for(var r=this._arr,n=!1,a=0;a<r.length;a++){!1===o(this._type,r[a].func,e,t,i)&&(n=!0)}if(n)return!1};var a=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},o=n.safeCallback=function(e,t,i,r,n){try{return t.apply(i,r)}catch(s){var o="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";i&&i.is&&(o+=i.is),o+="#"+(t.name||"(anonymous)"),n&&n.triggerLifeTime("error",[s]),a(s,{message:o,type:e,element:i,method:t,args:r})}},s=n.create();n.addGlobalErrorListener=function(e){return s.add(e)},n.removeGlobalErrorListener=function(e){return s.remove(e)};var l=null;n.addGlobalWarningListener=function(e){return(l=n.create()).add(e)},n.removeGlobalWarningListener=function(e){if(l){var t=l.remove(e);return l.empty&&(l=null),t}return null},n.hasGlobalWarningListeners=function(){return!!l},n.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;l.call(null,[t],null)},e.exports=n},function(e,t){var i={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,styleScope:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document),customContext:null};e.exports=i},function(e,t){var i=Object.prototype.hasOwnProperty,r=function(e,t){var n=typeof e;if("object"===n&&null!==e){var a=t?t.get(e):void 0;if(void 0!==a)return a;if(e instanceof Array){a=[],t&&t.set(e,a);for(var o=0;o<e.length;o++)a[o]=r(e[o],t)}else for(var s in a={},t&&t.set(e,a),e)i.call(e,s)&&(a[s]=r(e[s],t));return a}if("symbol"!==n)return e};t.deepCopy=function(e,t){var i=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,i)}},function(e,t,i){var r=i(3),n=(Object.prototype.hasOwnProperty,function(){});n.prototype=Object.create(Object.prototype,{constructor:{value:n,writable:!0,configurable:!0}});var a=null;n._setElementSystem=function(e){a=e,n._setElementSystem=null};var o=null;n._setComponent=function(e){o=e,n._setComponent=null};var s=Date.now();n.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},n.getInitTimeStamp=function(e){return s},n.create=function(e,t,i){var r=(i=i||{}).originalEvent,a=i.extraFields||{},o=Date.now()-s,l=new n;for(var u in l.currentTarget=null,l.type=e,l.timeStamp=o,l.mark=null,l.detail=t,l.bubbles=!!i.bubbles,l.composed=!!i.composed,l.__originalEvent=r,l.__hasCapture=!!i.capturePhase,l.__stopped=!1,l.__dispatched=!1,a)l[u]=a[u];return l},n.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},n.prototype.stopPropagation=function(){this.__stopped=!0},n.prototype.isStopped=function(){return!!this.__stopped},n.prototype.markMutated=function(){this.__mutatedMarked=!0},n.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var l=function(e,t,i,r){for(var n=e,o=e instanceof a?e.collectMarks():{},s=[],l=[],u=e;u;){if(n!==u&&(s.push(e),e=u,l.push(o),o=e instanceof a?e.collectMarks():{}),n=u.parentNode,!1===r(u,e,o))return;if(u.__wxHost){if(i)break;e=s.pop()||u.__wxHost,o=l.pop()||(e instanceof a?e.collectMarks():{}),n=u=u.__wxHost}else{var c=!0;u instanceof a&&(c=!1),u=c||i?u.parentNode:u.__wxSlotParent}}};n.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof a&&(e=e.shadowRoot)),t.target=e instanceof a?e.__methodCaller:e;var i=function(e,i,r){if(!(i&&i.length&&t.mutatedMarked())){var n=t.currentTarget=r instanceof a?r.__methodCaller:r,s=e.call(n,[t],r instanceof o?r:void 0);i&&i.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,n=!t.composed;if(t.__hasCapture){var s=[];l(e,0,n,(function(e,t,i){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,i]),!0}));for(var u=s.length-1;u>=0;u--){var c=s[u],d=c[0],h=c[1];t.target=h instanceof a?h.__methodCaller:h,t.mark=c[2];var p=d.__wxCaptureMutated&&d.__wxCaptureMutated[r];if(i(d.__wxCaptureEvents[r],p,d),t.__stopped)break}}if(t.target=e instanceof a?e.__methodCaller:e,!t.__stopped){var f=!t.bubbles;l(e,0,n,(function(e,n,o){t.target=n instanceof a?n.__methodCaller:n,t.mark=o;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&i(e.__wxEvents[r],s,e),!f&&!t.__stopped}))}}},n.triggerEvent=function(e,t,i,r){var a=n.create(t,i,r);n.dispatchEvent(e,a)},n.addListenerToElement=function(e,t,i,n){var a=n&&n.mutated;if(a){var s=i;i=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var l=void 0;return n&&(n.useCapture||n.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),l=e.__wxCaptureEvents[t].add(i),a&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(l))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),l=e.__wxEvents[t].add(i),a&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(l))),e instanceof o&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,i,n]),l},n.removeListenerFromElement=function(e,t,i,r){var n=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(n=e.__wxCaptureEvents[t].remove(i)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(a=e.__wxCaptureMutated[t].indexOf(i))&&e.__wxCaptureMutated[t].splice(a,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(n=e.__wxEvents[t].remove(i)),e.__wxMutated&&e.__wxMutated[t]){var a;-1!==(a=e.__wxMutated[t].indexOf(i))&&e.__wxMutated[t].splice(a,1)}n&&e instanceof o&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,n,r])},e.exports=n},function(e,t,i){var r=i(1),n=" \n\r\t\f",a=null;t.parseMultiPaths=function(e){return a||(a=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",n]}],VAR_NAME:[{id:"_blank",states:[n,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",n]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[n,"INT"]},{id:"_jump",states:["INT",n]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),a.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,i=[],r="",n=0,a=!1,o=!1,s=0;s<t;s++){var l=e[s];if("\\"===l)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===l)r&&(i.push(r),r="");else if("["===l){if(r&&(i.push(r),r=""),0===i.length)throw new Error("The path string should not start with []: "+e);o=!0,a=!1}else if("]"===l){if(!a)throw new Error("There should be digits inside [] in the path string: "+e);o=!1,i.push(n),n=0}else if(o){if(l<"0"||l>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);a=!0,n=10*n+l.charCodeAt(0)-48}else r+=l}if(r&&i.push(r),0===t)throw new Error("The path string should not be empty");return i}},function(e,t,i){var r=i(3),n=i(4),a=i(7),o=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],l=function(){},u=a.parseMultiPaths,c=function(){};c.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],i=0;i<e.length;i++)t[i]=e[i];return t},h=function(e){var t={};for(var i in e)t[i]=e[i];return t},p=function(e,t){for(var i in t)hasOwnProperty.call(e,i)?(r.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&r.triggerWarning('data field "'+i+'" from different behaviors is overriding or merging.'),"object"!=typeof e[i]||"object"!=typeof t[i]||null===t[i]||t[i]instanceof Array?e[i]=t[i]:(e[i]instanceof Array?e[i]=d(e[i]):e[i]=h(e[i]),p(e[i],t[i]))):e[i]=t[i]};c.create=function(e){var t=new c;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:n.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:n.lazyRegistration)||c.prepare(t),e.is&&(c._list[e.is]=t),t},c.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var i=e.ancestors,n="",a=0;for(a=0;a<(t.behaviors||[]).length;a++){var d=t.behaviors[a],h=d;for(n in"string"==typeof h&&(h=c._list[d],r.hasGlobalWarningListeners()&&(h instanceof c||r.triggerWarning('behavior "'+d+'" is not found (when preparing behavior "'+e.is+'").'))),h._unprepared&&c.prepare(h),"object"==typeof h.data&&(null===e.data?e.data=h.data:p(e.data,h.data)),h.generics){var f=h.generics[n];"object"!=typeof f&&(f={}),e.generics[n]={default:f.default}}for(n in h.properties)r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&void 0!==e.properties[n]&&r.triggerWarning('property "'+n+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.properties[n]=h.properties[n];for(n in h.relations)e.relations[n]=h.relations[n];for(n in h.methods)r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&e.methods[n]&&r.triggerWarning('method "'+n+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[n]=h.methods[n];for(var g=0;g<h.ancestors.length;g++)i.indexOf(h.ancestors[g])<0&&i.push(h.ancestors[g])}for(n in"object"==typeof t.data&&(null===e.data?e.data=t.data:p(e.data,t.data)),t.properties){r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&void 0!==e.properties[n]&&r.triggerWarning('property "'+n+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").');var _=t.properties[n];s.indexOf(_)>=0?_={type:_}:s.indexOf(_.type)<0&&_.optionalTypes&&_.optionalTypes.length>0&&(_.type=_.optionalTypes[0]),r.hasGlobalWarningListeners()&&s.indexOf(_.type)<0&&r.triggerWarning('the type of property "'+n+'" is illegal (when preparing behavior "'+e.is+'").'),void 0===_.value&&(_.type===String?_.value="":_.type===Number?_.value=0:_.type===Boolean?_.value=!1:_.type===Array?_.value=[]:_.value=null),e.properties[n]={type:_.type,optionalTypes:_.optionalTypes,value:_.value,filter:_.filter,observer:_.observer,public:!!(void 0===_.public?e.options.publicProperties:_.public),availability:_.availability,observeAssignments:!!_.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(n in t.lifetimes)e.lifetimes[n]=t.lifetimes[n];for(a=0;a<o.length;a++)void 0===e.lifetimes[o[a]]&&(e.lifetimes[o[a]]=t[o[a]]);for(n in t.listeners)e.listeners[n]=t.listeners[n];var m=t.observers;if(m instanceof Array)for(a=0;a<m.length;a++){var v=m[a];e.observers.push({paths:u(v.fields||"**"),observer:v.observer})}else for(n in m)e.observers.push({paths:u(n),observer:m[n]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(n in t.pageLifetimes)e.pageLifetimes[n]=t.pageLifetimes[n];for(n in t.relations){var y=t.relations[n];e.relations[n]={target:y.target||n,type:y.type,linked:y.linked||l,linkChanged:y.linkChanged||l,unlinked:y.unlinked||l,linkFailed:y.linkFailed||l}}for(n in t.methods)"function"==typeof t.methods[n]&&(r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&e.methods[n]&&r.triggerWarning('method "'+n+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[n]=t.methods[n]);i.push(e)}},c._list=Object.create(null),c.prototype.hasBehavior=function(e){this._unprepared&&c.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof c){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===c._list[e])return!0;return!1},c.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,i=0;i<t.length;i++){var r=this.ancestors[i];for(var n in r.listeners)Object.prototype.hasOwnProperty.call(e,n)?e[n].push(r.listeners[n]):e[n]=[r.listeners[n]]}return e},c.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,i=0;i<t.length;i++)for(var r=this.ancestors[i].observers,n=0;n<r.length;n++){var a=r[n];e.addObserver(a.observer,a.paths)}},c.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;o.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var i=0;i<t.length;i++){var n=t[i];for(var a in n.lifetimes)n.lifetimes[a]&&(e[a]||(e[a]=r.create("Lifetime Method")),e[a].add(n.lifetimes[a]))}return e},c.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,i=0;i<t.length;i++){var n=t[i];for(var a in n.pageLifetimes)n.pageLifetimes[a]&&(e[a]||(e[a]=r.create("Page Lifetime Method")),e[a].add(n.pageLifetimes[a]))}return e},c.callDefinitionFilter=function(e){var t=e.definitionFilter,i=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?c._list[t]:t)&&t.definitionFilter&&(i.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,i)}:null},e.exports=c},function(e,t,i){var r=i(3),n=i(6),a=i(10),o=i(11),s=i(12),l=i(14),u=i(4),c=i(13),d=function(e){h(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var i=this.ownerShadowRoot.__wxHost;i.__idCacheDirty=!0,this.__domElement&&i.__componentOptions.writeIdToDOM&&("dom"===u.documentBackend?this.__domElement.id=t:"custom"===u.documentBackend&&this.__domElement.setId(t))}u.writeExtraInfoToAttr&&this.__domElement&&"dom"===u.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&a._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(r.hasGlobalWarningListeners()&&r.triggerWarning('slots-inherited nodes do not support "slot" attribute.'));this.__slot=e,b(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&a._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&a._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return P.call(this,e)},configurable:!0}}),n._setElementSystem(d),o._setElementSystem(d);var h=d.initialize=function(e,t,i){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=i,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,i,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var n in t.__marks)e.__marks[n]=t.__marks[n];for(var a in e.__attributes=Object.create(null),t.__attributes)e.__attributes[a]=t.__attributes[a];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=c.backendExtractedDefault,e.__domElement=i,e.$$=i,i&&(i.__wxElement=e)},d.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},d.prototype.destroy=function(){"custom"!==u.documentBackend||this.__virtual||(this.__domElement.release(),this.__domElement=null)};var p=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&a._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r])}};t(e)}},f=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&a._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},g=function(e){if(!e.__attached)return p(e);var t=function(e){if(e instanceof d){for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},_=function(e,t,i){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,n=[i];r="add"===t?{type:"childList",target:e,addedNodes:n}:"remove"===t?{type:"childList",target:e,removedNodes:n}:{type:"childList",target:e,addedNodes:n,removedNodes:n},a._callObservers(e,"__childObservers",r)}},m=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var i=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,n=0;n<r.length;n++){var a=r[n];a instanceof d&&i(a)}};i(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var i=e.__idCache=Object.create(null),r=function(e){e.__id&&(i[e.__id]||(i[e.__id]=e));for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof d&&r(t[n])};r(t)}};var v=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,i=e.__wxHost,n=Object.create(null);t=void 0!==i.__singleSlot?{"":i.__singleSlot}:i.__slots;var a=function(e){void 0!==e.__slotName&&(n[e.__slotName]?r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+e.__slotName+'" duplication is found under a single shadow root. The first one was accepted.'):n[e.__slotName]=e);for(var t=e.childNodes,i=0;i<t.length;i++)t[i]instanceof d&&a(t[i])};a(e),void 0!==i.__singleSlot?i.__singleSlot!==n[""]&&(n[""]&&(n[""].__wxSlotChildren=i.childNodes),y(i,n,t,!0),i.__singleSlot&&(i.__singleSlot.__wxSlotChildren=[]),i.__singleSlot=n[""]||null):(y(i,n,t,!1),i.__slots=n)}},y=function(e,t,i,r){var n=e.childNodes,a=0;if(r){var o=t[""];if(o)for(;a<n.length;a++)E(o,n[a],null,!1,!1,!1,-1);else if(o=i[""])for(;a<n.length;a++)E(o,null,n[a],!0,!1,!1,a)}else{var s=function(e){for(var r=0;r<e.length;r++){var n=e[r],a=n.__slot||"",o=t[a];o?E(o,n,null,!1,!0,!0):(o=i[a])&&E(o,null,n,!0,!0,!0),n.__inheritSlots&&s(n.childNodes)}};s(n)}},A=function(e,t,i,r){for(var n=function(e,t,r){var a=e.childNodes,o=0;for(t&&(o=a.indexOf(t)+(r?0:1));o<a.length;o++){var s=a[o];if(s.__slot===i)return s;if(s.__inheritSlots){var l=n(s,null,!1);if(l)return l}}return null};t!==e;t=t.parentNode){var a=n(t.parentNode,t,r);if(a)return a;r=!1}return null},b=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var i=e.__slot||"",n=t.__slots[i];if(n){var a=A(t,e,i,!1);E(n,e,a,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+i+'" is not found.'),(n=e.__wxSlotParent)&&E(n,null,e,!0,!0,!0)}},E=function(e,t,i,r,n,a,o){if(r&&(i.__wxSlotParent=null),n&&(o=e.__wxSlotChildren.indexOf(i)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&a){var l=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(l,1),s===e&&l<o&&o--}}var c=!1;(t&&t.__backendExtracted||i&&i.__backendExtracted)&&(c=!0),"dom"===u.documentBackend?c||function(e,t,i,r,n){var a=e;if(a instanceof d){for(;a.__virtual;){var o=a.__wxSlotParent;if(!o){a=null;break}if(t&&!i){var s=o.__wxSlotChildren.indexOf(a);i=o.__wxSlotChildren[s+1]}a=o}a instanceof d&&(a=a.__domElement)}if(a){var l=r,u=null,c=null;if(t)if(t.__virtual){var h=document.createDocumentFragment(),p=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var i=e.__wxSlotChildren[t];i.__virtual?p(i):h.appendChild(i.__domElement)}};p(t),u=h}else u=t.__domElement;if(i)if(i.__virtual){var f=e,g=0;if(r){var _=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var i=e.__wxSlotChildren[t];i.__virtual?_(i):a.removeChild(i.__domElement)}};_(i),l=!1,g=n+1}else f=i.__wxSlotParent,g=i===t?n:f.__wxSlotChildren.indexOf(i);if(t){var m=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var i=e.__wxSlotChildren[t];if(!i.__virtual)return i;var r=m(i,0);if(r)return r}};i=null;for(var v=f;!(i=m(v,g))&&v.__virtual;v=v.__wxSlotParent)g=v.__wxSlotParent.__wxSlotChildren.indexOf(v)+1;i&&(c=i.__domElement)}}else c=i.__domElement;l?u?a.replaceChild(u,c):a.removeChild(c):u&&(c?a.insertBefore(u,c):a.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var i=e.__domElement;i&&i.parentNode&&i.parentNode.removeChild(i)}};y(t)}}(e,t,i,r,o):"custom"===u.documentBackend&&function(e,t,i,r,n){var a=e;if(a instanceof d){for(;a.__virtual;){var o=a.__wxSlotParent;if(!o){a=null;break}if(t&&!i){var s=o.__wxSlotChildren.indexOf(a);i=o.__wxSlotChildren[s+1]}a=o}a instanceof d&&(a=a.__domElement)}if(a)if(!t||i||t.__virtual){var l=u.customContext.createElement("fragment",""),c=0,h=-1;if(t){var p=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var i=e.__wxSlotChildren[t];p(i)}else l.appendChild(e.__domElement)};p(t)}if(i){var f=e,g=0,_=null;if(r){var m=function(e){if(e.__virtual){for(var t=0,i=0;i<e.__wxSlotChildren.length;i++)t+=m(e.__wxSlotChildren[i]);return t}return _||(_=e),1};c=m(i),g=n+1}else f=i.__wxSlotParent,g=i===t?n:f.__wxSlotChildren.indexOf(i);if(t&&!_)for(var v=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var i=e.__wxSlotChildren[t];if(!i.__virtual)return i;var r=v(i,0);if(r)return r}return null},y=f;!(_=v(y,g))&&y.__virtual;y=y.__wxSlotParent)g=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;_&&(h=a.findChildPosition(_.__domElement))}a.splice(h,c,l),l.release()}else a.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){for(var A=t.__wxSlotParent;A.__virtual&&(A=A.__wxSlotParent););if(A){var b=null,E=function(e){if(e.__virtual){for(var t=0,i=0;i<e.__wxSlotChildren.length;i++)t+=E(e.__wxSlotChildren[i]);return t}return b||(b=e),1};A.__domElement.splice(A.__domElement.findChildPosition(b.__domElement),E(t),null)}}}(e,t,i,r,o),u.writeExtraInfoToAttr&&"dom"===u.documentBackend&&(r&&i instanceof d&&i.__domElement&&i.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),n&&(-1===o&&(o=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(o,r?1:0,t):e.__wxSlotChildren.splice(o,r?1:0))},w=function(e,t){for(var i=e.childNodes,r=0;r<i.length;r++){var n=i[r];t(e,n),n.__inheritSlots&&w(n,t)}},T=d.insertChildToElement=function(e,t,i,n){if(void 0!==e.__slotName)return!1;var o=i>=0?e.childNodes[i]:null;n&&t===o&&(n=!1);var s=null,l=e,u=e;if(t){s=t.parentNode,t.parentNode=e;var c=e.__subtreeObserversCount;if(s){var d=s.childNodes.indexOf(t);s.childNodes.splice(d,1),s===e&&d<i&&i--,c-=s.__subtreeObserversCount}c&&a._updateSubtreeCaches(t,c)}for(var h=e;h&&h.__inheritSlots;)h=h.parentNode;for(var y=!h||!h.__slots,b=!y||e.__inheritSlots,T=s;T&&T.__inheritSlots;)T=T.parentNode;var C=!T||!T.__slots,S=!C||s&&s.__inheritSlots;if(y)void 0!==e.__singleSlot&&(l=u=e.__singleSlot,r.hasGlobalWarningListeners()&&(l||r.triggerWarning("slot is not found."))),l?E(l,t,o,n,b,S,i):t.__wxSlotParent&&E(t.__wxSlotParent,null,t,!0,S,!1),t&&!C&&t.__inheritSlots&&w(t,(function(e,t){E(e,t,null,!1,!0,!0,-1)}));else{var I="";if(t&&(I=t.__slot||"",l=h.__slots[I]||null,r.hasGlobalWarningListeners()&&(l||r.triggerWarning('slot "'+I+'" is not found.'))),o&&(u=h.__slots[o.__slot||""]||null),o&&u&&n&&E(u,null,o,n,!0,!1),t)if(l){var x=o?A(h,o,I,!n):A(h,e,I,!1);E(l,t,x,!1,!0,S)}else t.__wxSlotParent&&E(t.__wxSlotParent,null,t,!0,S,!1);o&&n&&o.__inheritSlots&&w(o,(function(e,t){E(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&w(t,(function(t,i){var a=i.__slot||"",s=h.__slots[a]||null;if(s){var l=o?A(h,o,a,!n):A(h,e,a,!1);E(s,i,l,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+a+'" is not found.'),i.__wxSlotParent&&E(i.__wxSlotParent,null,i,!0,!0,!1)}))}return n&&(e.__subtreeObserversCount&&a._updateSubtreeCaches(o,-e.__subtreeObserversCount),o.parentNode=null),-1===i&&(i=e.childNodes.length),t?e.childNodes.splice(i,n?1:0,t):e.childNodes.splice(i,n?1:0),e.ownerShadowRoot&&(n&&m(o,e.ownerShadowRoot),t&&m(t,e.ownerShadowRoot),v(e.ownerShadowRoot)),n&&(f(o),_(e,"remove",o)),t&&(s?g(t):p(t),s===e?_(e,"move",t):(s&&_(s,"remove",t),_(e,"add",t))),!0},C=function(e,t,i,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var n=r?i:t,a=-1;return i&&(a=e.childNodes.indexOf(i))<0?null:T(e,t,a,r)?n:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],E(t,e,null,!1,!1,0),e.__hostAssociated=!0,v(e)},d.appendChild=function(e,t){return C(e,t,null,!1)},d.insertBefore=function(e,t,i){return C(e,t,i,!1)},d.removeChild=function(e,t){return C(e,null,t,!0)},d.replaceChild=function(e,t,i){return C(e,t,i,!0)},d.prototype.appendChild=function(e){return C(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return C(this,e,t,!1)},d.prototype.removeChild=function(e){return C(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return C(this,e,t,!0)};var S=function(e){var t=!0,i=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,i=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,i=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var n=e.__wxSlotChildren[r];S(n)}else if(i&&e.childNodes)for(var a=0;a<e.childNodes.length;a++)S(e.childNodes[a])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return S(e),t};var I=function(e,t){if(!t){var i=l.toElement(e.__domElement);return e.$$=e.__domElement=i,i}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=l.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},x=function(e,t,i){var r=e instanceof d&&e.__virtual,n=t?t.childNodes[i]:void 0,a=!0,o=!0,l=null;if(e instanceof d)e.__backendExtracted=!1,r||(l=I(e,n)),o=!1;else if(e instanceof s)e.__backendExtracted=!1,l=function(e,t){if(!t){var i=document.createTextNode(e.textContent);return e.$$=e.__domElement=i,i}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,n),a=!1,o=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,n&&n.childNodes)for(;n.childNodes.length;)u.appendChild(n.childNodes[0]);l=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,n),e=u}l?(t.appendChild(l),n=l):n=t?t.childNodes[i]:void 0;var c=0;if(a&&e.__wxSlotChildren)for(var h=0;h<e.__wxSlotChildren.length;h++){var p=e.__wxSlotChildren[h];if(r)i=x(p,t,i);else if(p.asShadowRoot){for(var f=0;f<p.asShadowRoot.childNodes.length;f++)c=x(p.asShadowRoot.childNodes[f],n,c);e.shadowRoot=n,n.__wxHost=e,e.__wxSlotChildren[0]=n,n.__wxSlotParent=e,e.__singleSlot===p&&(e.__singleSlot=n)}else c=x(p,n,c)}else if(o&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)c=x(e.childNodes[g],n,c);if(r)return i;for(;n.childNodes.length>c;)n.removeChild(n.childNodes[c]);return i+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var i=document.createDocumentFragment();i.appendChild(t),x(e,i,0)}},d.prototype.triggerEvent=function(e,t,i){n.triggerEvent(this,e,t,i)},d.prototype.dispatchEvent=function(e){n.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,i){n.addListenerToElement(this,e,t,i)},d.prototype.removeListener=function(e,t,i){n.removeListenerFromElement(this,e,t,i)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]!==t&&(this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t))},d.prototype.setStyle=function(e){this.__domElement&&"custom"===u.documentBackend&&this.__domElement.setStyle(e)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&"dom"===u.documentBackend&&this.__domElement.removeAttribute(e))},d.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var i in t.__marks)hasOwnProperty.call(e,i)||(e[i]=t.__marks[i]);return e};var P=d.prototype.setNodeStyle=function(e,t){if(this.__styleSegments[t||0]!==e){this.__styleSegments[t||0]=e;var i=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void("dom"===u.documentBackend?this.__domElement.setAttribute("style",r.call(this,i)):"custom"===u.documentBackend&&this.__domElement.setStyle(r.call(this,i)))}this.__domElement&&("dom"===u.documentBackend?this.__domElement.setAttribute("style",i):"custom"===u.documentBackend&&this.__domElement.setStyle(i)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&a._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})}};d.replaceDocumentElement=function(e,t,i){e.__attached||("dom"===u.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===u.documentBackend&&t.replaceChild(e.__domElement,i),p(e))},d.pretendAttached=function(e){e.__attached||p(e)},d.pretendDetached=function(e){e.__attached&&f(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,v(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var D=function(e,t){var i=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!i)return null;var r=i[1].slice(1),n=i[2].split(".");return n.shift(),r||n.length?{id:r,classes:n,relation:t||""}:null},R=d.parseSelector=function(e){for(var t=String(e||"").split(","),i=[],r=!1,n=0;n<t.length;n++){for(var a=t[n].split(/( |\t|>+)/g),o=[],s="",l=0;l<a.length;l++){var u=a[l];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var c=D(u,s);if(s="",!c)break;o.push(c)}else{if(""!==s)break;s=u,">>>"===u&&(r=!0)}}l===a.length&&o.length&&i.push(o)}return i.length?{crossShadow:r,union:i}:null},O=function(e,t,i,r,n){if(t===e)return!1;var a=i[r],o=!0;a.id&&a.id!==t.__id&&(o=!1);for(var s=a.classes,l=0;o&&l<s.length;l++)t.classList.contains(s[l])||(o=!1);if(!o&&">"===n)return!1;var u=t;if(o&&0===r){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==n)return!1;u=t,o=!1}var c=o?a.relation:n;do{u.parentNode?u=u.parentNode:">>>"===c?u=u.__wxHost:">>>"===n?(o=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&u.__virtual);if(!u)return!1;if(o){if(O(e,u,i,r-1,c))return!0;if(">>>"!==n)return!1}return O(e,u,i,r,n)},k=function(e,t,i){if(i.__virtual)return!1;for(var r=e.union,n=0;n<r.length;n++){var a=r[n];if(O(t,i,a,a.length-1,">"))return!0}return!1},M=function(e,t,i,r,n){if(k(t,i,r)&&(e.push(r),n))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===r.__componentOptions.domain&&M(e,t,i,r.shadowRoot,n)&&n))return!0;for(var a=r.childNodes,o=0;o<a.length;o++)if(a[o]instanceof d&&M(e,t,i,a[o],n)&&n)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:R(e);if(!t)return null;var i=[];return M(i,t,this,this,!0),i[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:R(e),i=[];return t?(M(i,t,this,this,!1),i):[]},d.matchSelector=function(e,t){var i="object"==typeof e?e:R(e);return!!i&&k(i,null,t)},d.prototype.matchSelector=function(e,t){var i="object"==typeof e?e:R(e);return!!i&&k(i,this,t)},e.exports=d},function(e,t,i){var r=i(3),n=function(){};n.prototype=Object.create(Object.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),n.create=function(e){var t=new n;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},n.prototype.observe=function(e,t){var i=0,n=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(n),subtree:t.subtree?e:null}),i++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(n),subtree:t.subtree?e:null}),i++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(n),subtree:t.subtree?e:null}),i++),t.subtree&&a(e,i),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(n),subtree:null}))},n.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var i=e[t];i.funcArr.remove(i.id),i.subtree&&a(i.subtree,-1)}this._binded=[]};var a=n._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var i=e.childNodes;if(i)for(var r=0;r<i.length;r++)a(i[r],t)};n._callObservers=function(e,t,i){do{e[t]&&e[t].call(e,[i]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},n._callSingleObserver=function(e,t,i){e[t]&&e[t].call(e,[i])},e.exports=n},function(e,t,i){var r=i(4),n=function(){},a=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,o=null;n._setElementSystem=function(e){o=e,n._setElementSystem=null};var s=Object.prototype.hasOwnProperty;n.create=function(e,t){var i=new n;for(var r in i._prefix="",i._addOriginalClass=!1,i._alias=t,i._resolvedAlias={},t)i._resolvedAlias[r]="";return i._rawNames=[],i._elem=e,i._owner=null,i._prevGenNames="",i};var l=function(e){var t="",i=e._rawNames,r=e._prefix,n=e._owner?e._owner._resolvedAlias:null,a=e._addOriginalClass;r&&(r+="--");for(var o=0;o<i.length;o++){var l=i[o];if(o&&(t+=" "),n&&s.call(n,l))t+=n[l];else if("~"===l[0])t+=l.slice(1);else if("^"===l[0]){l=l.slice(1);for(var u=e._owner||null;"^"===l[0];)l=l.slice(1),u=u?u._owner:null;var c=u?u._prefix:"";c&&(c+="--"),t+=c+l}else a&&(t+=l+" "),t+=r+l}return t},u=function(e){var t=e._elem.__domElement;if(t){var i=l(e);if("dom"===r.documentBackend)i?t.setAttribute("class",i):t.removeAttribute("class");else if("custom"===r.documentBackend){if(e._prevGenNames===i)return;e._prevGenNames=i,t.setClass(i)}}},c=function(e){var t=e.classList;t instanceof n&&(t._alias&&d(t),u(t));for(var i=e.childNodes,r=0;r<i.length;r++)i[r]instanceof o&&c(i[r])},d=function(e){var t=e._owner;if(!t)return!1;var i=!1;for(var r in e._alias){var n=e._alias[r],a=[];if(n)for(var l=0;l<n.length;l++){var u=n[l];if(s.call(t._alias,u)){var d=t._resolvedAlias[u];a.push(d)}else{var h=e._prefix&&u?e._prefix+"--"+u:u;a.push(h)}}var p=a.join(" ");e._resolvedAlias[r]!==p&&(i=!0,e._resolvedAlias[r]=p)}i&&e._elem.shadowRoot instanceof o&&c(e._elem.shadowRoot)};n.prototype.toggle=function(e,t){var i=this._rawNames.indexOf(e);void 0===t&&(t=i<0),t?i<0&&(this._rawNames.push(e),u(this)):i>=0&&(this._rawNames.splice(i,1),u(this))},n.prototype.contains=function(e){for(var t=this._rawNames,i=0;i<t.length;i++){var r=t[i];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var n=1;"^"===r[n];)n++;if(r.slice(n)===e)return!0}else if(r===e)return!0}return!1},n.prototype._setOwnerOptions=function(e,t,i){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=i,this._owner=e,this._alias&&d(this),u(this))},n.prototype._setAlias=function(e,t){var i=this._owner,r=String(t).match(a);this._alias[e]=r;var n=[];if(r)for(var o=0;o<r.length;o++){var l=r[o];i&&s.call(i._alias,l)?n.push(i._resolvedAlias[l]):n.push(this._prefix?this._prefix+"--"+l:l)}this._resolvedAlias[e]=n.join(" "),c(this._elem.shadowRoot)},n.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(a)||[],u(this)},n.prototype.getClassNames=function(){return l(this)},n.prototype.getPrefix=function(){return this._prefix},n.prototype.getAddOriginalClass=function(){return this._addOriginalClass},e.exports=n},function(e,t,i){var r=i(10),n=i(4),a=i(13),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var s=o._advancedCreate=function(e,t){var i=new o;i.__slot="";var r=null;return a.backendExtractedDefault||"dom"!==n.documentBackend?"custom"===n.documentBackend?((r=n.customContext.createElement("text","")).setText(e||""),r.textContent=e,r.__wxElement=i):i.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=i,i.$$=i.__domElement=r,i.__backendExtracted=a.backendExtractedDefault,i.__subtreeObserversCount=0,i.__autoDestroy=!0,i.parentNode=null,i.ownerShadowRoot=t,i};o.create=function(e){return s(e,null)},o.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},o.prototype.destroy=function(){"custom"===n.documentBackend&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(o.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){if(e=String(e),this.__domElement){if(this.__domElement.textContent===e)return;this.__domElement.textContent=e,"custom"===n.documentBackend&&this.__domElement.setText(e)}else{if(this.__textContent===e)return;this.__textContent=e}(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=o},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var i=function(e){this.tagName=e,this.id="",this.attrs={}};i.toElement=function(e){var t=document.createElement(e.tagName);for(var i in e.id&&(t.id=e.id),e.attrs)t.setAttribute(i,e.attrs[i]);return t},i.fromElement=function(e){var t=new i(e.tagName);t.id=e.id;for(var r=e.attributes,n=0;n<r.length;n++)t.attrs[r[n].name]=r[n].value;return t},i.prototype.cloneNode=function(){var e=new i;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},i.prototype.removeAttribute=function(e,t){delete this.attrs[e]},i.prototype.setAttribute=function(e,t){this.attrs[e]=t},i.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=i},function(e,t,i){var r=i(3),n=i(5),a=i(16),o=i(6),s=i(8),l=i(9),u=i(17),c=i(10),d=i(11),h=i(14),p=i(4),f=i(13),g=i(7),_=o.addListenerToElement,m=g.parseSinglePath,v=n.deepCopy,y=function(){};y.prototype=Object.create(l.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var i in e)t.scheduleReplace([i],e[i]);t.doUpdates()},configurable:!0},$:{get:function(){return l._updateIdMap(this),this.__idCache},set:function(){}}});var A=function(){};A.prototype=Object.create(Object.prototype),o._setComponent(y);var b=null;y._setDefaultTemplateEngine=function(e){b=e,y._setDefaultTemplateEngine=null};var E=function(e,t,i){if(i)for(var n=0;n<i.length;n++)if(s.matchTypeWithValue(i[n],e))return e;return t===String?null==e?(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <String> but get null value. Used empty string instead."),""):(r.hasGlobalWarningListeners()&&"object"==typeof e&&r.triggerWarning("property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted."),String(e)):t===Number?isFinite(e)?Number(e):(r.hasGlobalWarningListeners()&&("number"==typeof e?r.triggerWarning("property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead."):r.triggerWarning("property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.")),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead."),[]):t===Object?"object"==typeof e?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Object> but got non-object value. Used null instead."),null):void 0===e?null:e};a.setPropUpdater((function(e,t,i,n){var a=e[0],o=this.__propData[a];if(i=E(i,t.type,t.optionalTypes),!(!t.availability||function(e,t,i,n){var a=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,n?void 0:i];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,a,e)}(this,t.availability,i,n)))return r.hasGlobalWarningListeners()&&r.triggerWarning('the new value for property "'+a+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),o;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,n?[]:[i,o,e],this);void 0!==s&&(i=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[a]&&function(e,t,i){if("dom"===p.documentBackend){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),n=typeof i;"boolean"===n?i?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===n?e.__domElement.setAttribute(r,JSON.stringify(i)):e.__domElement.setAttribute(r,i)}}(this,a,i),i})),a.setPropObserver((function(e,t,i,n,a,o){if(n.observeAssignments||e!==t){var s=i[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!o&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),n.observer&&r.safeCallback("Property Observer",n.observer,this.__methodCaller,a?[]:[e,t,i],this),n.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&c._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var w=function(e,t,i){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[i]=[],n=0;n<e.length;n++)r.push(null)},T=function(e,t,i,n,a){for(var o=y.prototype.hasBehavior,l="parent"===n,u="shadowHost"===n,c=0;c<e.length;c++){var d,h=e[c];if(d="object"!=typeof h.target?s._list[h.target]:h.target){var p=t[c],f=null;if(!a)for(var g=u?i.ownerShadowRoot&&i.ownerShadowRoot.__wxHost:i.parentNode;g;g=u?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(o.call(g,d)){var _;_=l?g.__relationMap.child:u?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var m=0;m<_.length;m++){var v,A=_[m];if((v="object"!=typeof A.target?s._list[A.target]:A.target)&&o.call(i,v)){f={parent:g,relation:A};break}}}if(l||f)break}t[c]=f,!p||f&&p.parent===f.parent||(r.safeCallback("Relation Unlinked Callback",p.relation.unlinked,p.parent.__methodCaller,[i.__methodCaller],p.parent),r.safeCallback("Relation Unlinked Callback",h.unlinked,i.__methodCaller,[p.parent.__methodCaller],i)),!f||p&&p.parent===f.parent||(r.safeCallback("Relation Linked Callback",f.relation.linked,f.parent.__methodCaller,[i.__methodCaller],f.parent),r.safeCallback("Relation Linked Callback",h.linked,i.__methodCaller,[f.parent.__methodCaller],i)),p&&f&&p.parent===f.parent&&(r.safeCallback("Relation Link Changed Callback",f.relation.linkChanged,f.parent.__methodCaller,[i.__methodCaller],f.parent),r.safeCallback("Relation Link Changed Callback",h.linkChanged,i.__methodCaller,[f.parent.__methodCaller],i)),a||f||r.safeCallback("Relation Link Failed Callback",h.linkFailed,i.__methodCaller,[],i)}}},C=function(e,t,i){if(e instanceof l){var r=0,n=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,i||[]),n=e.childNodes,r=0;r<n.length;r++)C(n[r],t,i);e=e.shadowRoot}for(n=e.childNodes,r=0;r<n.length;r++)C(n[r],t,i)}};y._list={},y.register=function(e){var t=e.options||{},i=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:p.classPrefix;null!=r||(r=i.is||"");var n=new A;return n._unprepared=i,n.is=e.is||"",n.behavior=i,n.protoFunc=null,n.props=null,n.template=null,n.innerEvents=null,n.generics=i.generics,n.initiator=i.initiator||null,n.options={availability:t.availability||p.availability,domain:t.domain||p.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:p.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:p.allowInWriteOnly),classPrefix:r,styleScope:t.styleScope||p.styleScope,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:p.addGlobalClass),templateEngine:t.templateEngine||p.templateEngine||b,renderingMode:t.renderingMode||p.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:p.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:p.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:p.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:p.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:p.separateInnerData),innerDataExclude:t.innerDataExclude||p.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:p.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:p.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:p.virtualHost)},i._unprepared||y.prepare(n),void 0!==e.is&&(y._list[i.is]=n),n},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var i=e.options,n={};t._unprepared&&s.prepare(t),i.writeOnly&&(n.data={value:null});var o=e.props={};Object.keys(t.properties).forEach((function(e){var r=t.properties[e];o[e]={type:r.type,optionalTypes:r.optionalTypes,value:r.value,filter:"function"==typeof r.filter?r.filter:null==r.filter?null:t.methods[r.filter],observer:"function"==typeof r.observer?r.observer:null==r.observer?null:t.methods[r.observer],public:r.public,availability:r.availability,observeAssignments:r.observeAssignments},i.writeFieldsToNode&&(n[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var i=this.__dataProxy;i.scheduleReplace([e],t),i.doUpdates()}})}));var l=function(){};e.protoFunc=l;var u=l.prototype=Object.create(y.prototype,n);if(u.is=e.is,u.__componentOptions=i,u.__using=t.using,e.dataGroupObserverTree=a._createObserverTree(o),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,i.writeFieldsToNode)for(var c in t.methods)u[c]=t.methods[c];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,h=u.__relationMap={};for(var p in d){var f=d[p],g=f.type;h[g]?h[g].push(f):h[g]=[f]}var _=[];h.parent&&_.push((function(e){T(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),h.ancestor&&_.push((function(e){T(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),h.shadowHost&&_.push((function(e){T(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<_.length;t++)_[t].call(this,e)};var m={},v={},A=t.data,b="";for(b in A)v[b]=A[b];for(b in o){var E=o[b];r.hasGlobalWarningListeners()&&void 0!==v[b]&&r.triggerWarning('data field "'+b+'" is overwritten by property with the same name.'),v[b]=E.value,m[b]=E.public}var w=v,C=i.separateInnerData,S=i.innerDataExclude;if(S){for(var I in w={},v)S.test(I)||(w[I]=v[I]);C||(v=w)}var x=i.templateEngine;e.template=x.create(t,v,w,i),u.__propPublic=m;var P=t._getAllListeners(),D=e.innerEvents=[];for(var R in P){for(var O=P[R],k=R.indexOf("."),M=R.slice(k+1),N=k<1?"":R.slice(0,k),L=[],B=0;B<O.length;B++){var F=O[B];"function"!=typeof F&&(F=null==F?null:t.methods[F]),L.push(F)}D.push({id:N,name:M,funcs:L})}}};var S=1,I=Object.prototype.hasOwnProperty,x=function(e,t){return function(i){return e.call(t.__methodCaller,i,t)}},P=y._advancedCreate=function(e,t,i,n,o){var s=t;s._unprepared&&y.prepare(s);var u=s.options;!u.availability||function(e,t,i){var n=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",i,e,n)}(s,i,u.availability)||(r.hasGlobalWarningListeners()&&r.triggerWarning('the component "'+(s.is||"")+'" is currently not available. The default component is used instead.'),s=y._list[""]);var c=new(0,s.protoFunc),g=s.generics;c.__generics=g?function(e,t,i){var n={};for(var a in e){var o=e[a],s=t[a];"object"!=typeof s&&(s=y._list[s]),"object"!=typeof s&&null!=o.default&&(s=y._list[o.default]),r.hasGlobalWarningListeners()&&(s||r.triggerWarning('generic "'+a+'" is not instantiated. The default component is used instead.')),s&&(n[a]=s)}if(r.hasGlobalWarningListeners())for(var l in t)void 0===e[l]&&r.triggerWarning('generic "'+l+'" is not defined. It will be ignored.');return n}(g,n||{}):{};var m=null,A=p.documentBackend;if(u.virtualHost){m=null;"dom"===p.documentBackend&&(m=void 0),l.initialize(c,m,i),c.__virtual=!0}else"dom"===A?(m=f.backendExtractedDefault?new h(e):document.createElement(e),l.initialize(c,m,i)):"custom"===A?(m=p.customContext.createElement("empty",e),l.initialize(c,m,i)):l.initialize(c,null,i);var b=0,E=c.__externalClassAlias={};if(s.behavior.externalClasses){var T=s.behavior.externalClasses;for(b=0;b<T.length;b++)E[T[b]]=null}if(c.classList=d.create(c,E),i){var C=i.__wxHost;m&&"custom"===A&&C.__componentOptions.styleScope&&m.setStyleScope(C.__componentOptions.styleScope),c.classList._setOwnerOptions(C.classList,C.__componentOptions.classPrefix,C.__componentOptions.addGlobalClass),p.writeExtraInfoToAttr&&m&&m.setAttribute("exparser:info-class-prefix",C.__componentOptions.classPrefix&&C.__componentOptions.classPrefix+"--")}"dom"===A&&p.writeExtraInfoToAttr&&m&&(c.__componentInstanceId=S++,m.setAttribute("exparser:info-component-id",c.__componentInstanceId));var I=c.__templateInstance=s.template.createInstance(c,o);c.__propData=I.data;var P=u.separateInnerData;c.__innerData=P?v(c.__propData):null;var D=u.innerDataExclude;if(P&&D){var R={};for(var O in c.__innerData)D.test(O)||(R[O]=c.__innerData[O]);c.__innerData=R}c.__dataProxy=a._advancedCreate(c,c.__propData,c.__innerData,D,s.dataGroupObserverTree,(function(e,t,i,r){c.__templateInstance.updateValues(c,P?c.__innerData:c.__propData,e,t,i,r)})),I.beforeMergeValues&&c.__dataProxy.setBeforeMergeCb((function(e,t,i){c.__templateInstance.beforeMergeValues(e,t,i)})),I.beforeUpdateValues&&c.__dataProxy.setBeforeUpdateCb((function(e){c.__templateInstance.beforeUpdateValues(c,P?c.__innerData:c.__propData,e)})),u.writeOnly&&c.__dataProxy.setHidingValue(!0),c.__idCacheDirty=!1,c.__idCache=I.idMap,null===I.slots[""]&&(I.slots[""]=m),s.options.multipleSlots?c.__slots=I.slots:(c.__singleSlot=I.slots[""]||null,c.__singleSlot&&(c.__singleSlot.__wxSlotChildren=c.childNodes)),I.shadowRoot instanceof l?(c.shadowRoot=I.shadowRoot,l._attachShadowRoot(I.shadowRoot)):m instanceof h?(c.shadowRoot=m,m.__wxHost=c,c.__domElement.asShadowRoot=I.shadowRoot,c.__wxSlotChildren=[m],m.__wxSlotParent=c):(c.shadowRoot=m,m.__wxHost=c,""!==p.documentBackend&&c.__domElement.appendChild(I.shadowRoot),c.__wxSlotChildren=[m],m.__wxSlotParent=c);for(var k=I.listeners,M=0;M<k.length;M++){var N=k[M];_(N.target,N.name,x(N.func,c))}var L=s.innerEvents;for(b=0;b<L.length;b++){var B=L[b],F=B.id?"this"===B.id?c:c.__idCache[B.id]:c.shadowRoot;if(F)for(var U=B.name,W=B.funcs,G=0;G<W.length;G++)_(F,U,x(W[G],c))}var V=c.__relationMap;return V.parent&&(w(V.parent,c,"parent"),c.__relationHandler=s.relationHandler),V.ancestor&&(w(V.ancestor,c,"ancestor"),c.__relationHandler=s.relationHandler),V.shadowHost&&(w(V.shadowHost,c,"shadowHost"),c.__relationHandler=s.relationHandler),c.__propertyChangeListeners=null,"custom"===A&&m&&m.associateComponent(c),s.initiator&&r.safeCallback("Component Initiator",s.initiator,c.__methodCaller,[],c),c.__lifeTimeFuncs.created.call(c.__methodCaller,[],c),c};y.createWithGenerics=function(e,t,i,n){return"object"==typeof e?P(e.is,e,null,i,n):e?e.indexOf("-")<0&&!t?u.create(e):(r.hasGlobalWarningListeners()&&(t||I.call(y._list,e)||"virtual"===e||r.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),P(e.toLowerCase(),t||I.call(y._list,e)&&y._list[e]||y._list[""],null,i,n)):P("virtual",y._list[""],null,i,n)},y.create=function(e,t,i){return y.createWithGenerics(e,t,null,i)},y.listProperties=function(e){var t=[];for(var i in e.__propPublic)void 0!==e.__propPublic[i]&&t.push(i);return t},y.listPublicProperties=function(e){var t=[];for(var i in e.__propPublic)!0===e.__propPublic[i]&&t.push(i);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){C(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var i=this.__relationMap[t.type],r=0;r<i.length&&i[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var i=[],r=t.type,n="child"===r,a="shadowContent"===r,o=function(r){for(var s=r.childNodes,u=0;u<s.length;u++){var c=s[u];if(c instanceof l)if(c.__virtual)o(c);else{var d;if(c.__relationLinks)if(d=n?c.__relationLinks.parent:a?c.__relationLinks.shadowHost:c.__relationLinks.ancestor)for(var h=0;h<d.length;h++){var p=d[h];if(p&&p.parent===e&&p.relation===t){i.push(c);break}}a&&c instanceof y&&o(c.shadowRoot),n||o(c)}}};return o(a?e.shadowRoot:e),i}(this,t)},y.prototype.hasExternalClass=function(e){return I.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,i){e.__propData=t,e.__dataProxy.replaceWholeData(t,i)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var i in e)t.scheduleReplace(m(i),e[i]);t.doUpdates()},e.exports=y},function(e,t,i){var r=i(3),n=i(5),a=null,o=null,s=Object.prototype.hasOwnProperty,l=n.deepCopy,u=function(e,t,i,r,n,a){this._data=t,this._innerData=i,this._innerDataExclude=r,this._comp=e,this._updateCb=a,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=n._propFields,this._observers=n._observers,this._observerTree=n._observerTree,this._relatedObserverTreeObj=n,this._observerStatus=[]};u._advancedCreate=function(e,t,i,r,n,a){return new u(e,t,i,r,n,a)};var c=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new c(e)},u.create=function(e,t,i){var r=new c({});return new u({__methodCaller:e},t,null,null,r,i)},u.setPropUpdater=function(e){a=e},u.setPropObserver=function(e){o=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,i){for(var n=e,a=0;a<t.length;a++){var o=t[a];if("**"===o)return r.hasGlobalWarningListeners()&&a!==t.length-1&&r.triggerWarning('"**" can only be used at the end of a path descriptor.'),n["**"]||(n["**"]=[]),void n["**"].push(i);n[o]||(n[o]={}),n=n[o]}n["~"]||(n["~"]=[]),n["~"].push(i)},h=function(e,t,i){for(var r=0;r<t.length;r++)d(e,t[r],i)},p=function(e,t,i){for(var r=e,n=0,a="";n<t.length&&"**"!==(a=t[n]);n++){if(!r)return;r=r[a]}var o="**"===a?r["**"]:r["~"];if(o)for(n=0;n<o.length;n++)if(o[n]===i){o.splice(n,1);break}},f=function(e,t,i){for(var r=0;r<t.length;r++)p(e,t[r],i)};c.prototype.addObserver=function(e,t){var i=this._observerIdInc++;return this._observers[i]={pathObj:t,func:e},h(this._observerTree,t,i),i},c.prototype.removeObserver=function(e){var t=this._observers[e];f(this._observerTree,t.pathObj,e),this._observers[e]=null},c.prototype.moveObserver=function(e,t){var i=this._observers[e];f(this._observerTree,i.pathObj,e),i.pathObj=t,h(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,i){for(var n=[],a=i.pathObj,o=0;o<a.length;o++){for(var s=a[o],l=t,u=0;u<s.length;u++){var c=s[u];if("**"===c)break;if("object"!=typeof l){l=void 0;break}l=l[c]}n[o]=l}r.safeCallback("Data Observer",i.func,e.__methodCaller,n,e)},_=function(e,t){var i=null,r=0;for(var n in e)if("~"!==n)if("**"!==n)_(e[n],t);else for(i=e["**"],r=0;r<i.length;r++)t[i[r]]=!0;else for(i=e["~"],r=0;r<i.length;r++)t[i[r]]=!0},m=function(e,t,i){for(var r=e,n=0;n<i.length;n++){if(r["**"])for(var a=r["**"],o=0;o<a.length;o++){t[a[o]]=!0}var l=i[n];if("number"==typeof l){if(!s.call(r,l)){r=null;break}}else if(!/^[_a-zA-Z]/.test(l)||!s.call(r,l)){r=null;break}r=r[l]}r&&_(r,t)},v=function(e,t,i,r,n){for(var a=0;a<e.length;a++){var o=e[a],s=t[a];s&&s&&(t[a]=!1,g(i,n?void 0:r,o))}};u.prototype.scheduleReplace=function(e,t,i){this._changes.push([e,t,i])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var i=this._propFields,r=this._comp,n=this._hidingValue,u=this._innerDataExclude,c=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,h=null,p=null,f=null;d?(c||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),h=this._doingUpdates.changedPaths,p=this._doingUpdates.changedValues,f=this._doingUpdates.combinedChanges):(h=[],p=[],f=[]);var g=this._changes;this._changes=[];var _=[];this._beforeMergeCb&&this._beforeMergeCb(g,_,e);for(var y=0;y<g.length;y++){var A=g[y],b=A[0],E=A[1],w=E,T=void 0,C=b[0],S=!!u&&u.test(C),I=i[C];if(I&&1===b.length)T=this._data[C],E=a.call(this._comp,b,I,E,this._hidingValue),S||(this._innerData?(w=l(E),_[y]||(this._innerData[C]=w)):w=E,A[1]=w),S&&!this._innerData||(this._data[C]=E);else{var x=this._data,P=C,D=null,R=1;if(!S||this._innerData){for(;R<b.length;R++)"number"==typeof(D=b[R])&&isFinite(D)?s.call(x,P)&&x[P]instanceof Array||(x[P]=[]):(!s.call(x,P)||null===x[P]||"object"!=typeof x[P]||x[P]instanceof Array)&&(x[P]={}),x=x[P],P=D;x[P]=E}if(this._innerData&&(x=this._innerData,P=C,!S)){for(R=1;R<b.length;R++)"number"==typeof(D=b[R])&&isFinite(D)?s.call(x,P)&&x[P]instanceof Array||(x[P]=[]):(!s.call(x,P)||null===x[P]||"object"!=typeof x[P]||x[P]instanceof Array)&&(x[P]={}),x=x[P],P=D;w=l(E),_[y]||(x[P]=w),A[1]=w}}m(this._observerTree,this._observerStatus,b),S||(h.push(b),p.push([w,T,E]),f.push(A)),d&&(this._doingUpdates.changesTotal+=1)}if(!c){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var O=0;do{O=this._doingUpdates.changesTotal,v(this._observers,this._observerStatus,r,this._data,n)}while(O!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(h,p,f,e);for(var k=0;k<p.length;k++){var M=p[k];if(M){var N=h[k],L=i[N[0]];L&&o.call(r,M[2],M[1],N,L,n,t)}}}},e.exports=u},function(e,t,i){var r=i(9),n=i(11),a=i(14),o=i(4),s=i(13),l=function(){};l.prototype=Object.create(r.prototype,{constructor:{value:l,writable:!0,configurable:!0}});var u=l._advancedCreate=function(e,t){var i=new l;i.is=e.toLowerCase();var u=null;if("dom"===o.documentBackend?u=s.backendExtractedDefault?new a(e):document.createElement(e):"custom"===o.documentBackend&&(u=o.customContext.createElement("image"===e?e:"empty",e)),r.initialize(i,u,t),i.classList=n.create(i,null),"custom"===o.documentBackend&&u.associateComponent(i),t){var c=t.__wxHost;u&&"custom"===o.documentBackend&&c.__componentOptions.styleScope&&u.setStyleScope(c.__componentOptions.styleScope),i.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),o.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return i};l.create=function(e){return u(e,null)};var c=l._advancedClone=function(e,t){var i=new l;i.is=e.is;var u=null;if(e.__domElement&&("dom"===o.documentBackend?u=e.__domElement instanceof a?s.backendExtractedDefault?e.__domElement.cloneNode():a.toElement(e.__domElement):s.backendExtractedDefault?a.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===o.documentBackend&&(u=e.__domElement.cloneNode())),r._clone(i,e,u,t),i.classList=n.create(i,null),"custom"===o.documentBackend&&u.associateComponent(i),t){var c=t.__wxHost;i.classList._setOwnerOptions(c.classList,c.__componentOptions.classPrefix,c.__componentOptions.addGlobalClass),o.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",c.__componentOptions.classPrefix&&c.__componentOptions.classPrefix+"--")}return i};l.cloneNode=function(e){return c(e,null)},e.exports=l},function(e,t,i){var r=i(9),n=i(4),a=function(e,t){o(this,e,t)};a.prototype=Object.create(r.prototype);var o=a.initialize=function(e,t,i){e.is=t||"";var a=null;"dom"!==n.documentBackend&&"custom"!==n.documentBackend||(a=void 0),r.initialize(e,a,i),e.__virtual=!0};a._advancedCreate=function(e,t){return new a(e,t)},a.create=function(e){return new a(e,null)},e.exports=a},function(e,t,i){var r=i(9),n=i(15),a=i(18),o=i(17),s=i(12),l=Object.prototype.hasOwnProperty,u=function(e){a.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(a.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var i in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[i]||(t.__childrenPropsFilter[i]=e.ownerShadowRoot.__childrenPropsFilter[i]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return o._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return o._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return a._advancedCreate(e,this)},u.prototype.createComponent=function(e,t,i,r){var a=null;a=void 0===t?e:t;var o=this.__wxHost;return"object"!=typeof a&&(l.call(o.__using,a)?a=o.__using[a]:l.call(o.__generics,a)&&(a=o.__generics[a]),"object"!=typeof a&&(a=n._list[a]||n._list[""])),i&&(i=function(e,t){var i={};for(var r in e){var a=e[r];"object"!=typeof a&&(l.call(t.__using,a)?a=t.__using[a]:l.call(t.__generics,a)&&(a=t.__generics[a]||n._list[""]),i[r]=a)}return i}(i,o)),"object"==typeof e&&(e=a.is),o.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",i=0;i<8;i++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),o.__componentOptions.writeOnly&&!a.options.allowInWriteOnly&&(a=n._list[""]),n._advancedCreate(e,a,this,i,r)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!l.call(t.__using,e)||!!l.call(t.__generics,e)},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,i){var r=i(9),n=i(12),a=function(){};a.create=function(e,t,i){var o=new a;if(!(e instanceof r||e instanceof n))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");o._elem=e,o._elemTypeLimit=i||r;var s=t.split("-");if("shadow"===s[0])o._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);o._composed=!0}if("ancestors"===s[1])o._relation="ancestors",o._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(o._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])o._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);o._order=1}}return o};var o=function(e,t,i,r,n){if(r<0&&e instanceof t&&!1===n(e))return!1;var a=i&&e.__wxSlotChildren||e.childNodes;if(a)for(var s=0;s<a.length;s++)if(!1===o(a[s],t,i,r,n))return!1;return!(r>0&&e instanceof t&&!1===n(e))};a.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,i,r){for(;e;e=i&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):o(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=a},function(e,t,i){var r=i(4),n=i(3),a=!1,o=[],s=function(e){var t=o;o=[],a=!0,r.customContext.render((function(){a=!1,o.length&&(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&n.safeCallback("render",t[e],null,[])}))};t.triggerRender=function(e){"custom"===r.documentBackend&&(o.push(e||null),a||1!==o.length||(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16)))}},function(e,t,i){(function(t){var r=i(4),n=i(3),a=i(9),o=i(17),s=i(12),l=i(19),u=i(15),c=i(24),d=i(25),h=function(){};h.prototype=Object.create(Object.prototype,{constructor:{value:h,writable:!0,configurable:!0}});var p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var f=null;h.precompiler=f,h.htmlParser=null;var g=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},_=Object.prototype.hasOwnProperty,m=function(e,t){if(null!==e&&"object"==typeof e&&_.call(e,t))return e[t]},v=function(e,t,i,r){if(_.call(t,i)){var a=t[i];if("function"==typeof a)return n.safeCallback("Template Method",a,e,r)}},y={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},A=function(e,t,i){e.classList.toggle(t,!!i)},b=function(e,t,i){e[t]=i},E=function(e,t,i){var r=e.__dataProxy;r.scheduleReplace([t],i),r.doUpdates()},w=function(e,t,i){e.class=i},T=function(e,t,i){"dom"===r.documentBackend?e.setAttribute("style",i):"custom"===r.documentBackend&&e.setStyle(i)},C=function(e,t,i){e.setAttribute("class",i)},S=function(e,t,i){e.textContent=i},I=function(e,t,i){e.dataset||(e.dataset={}),e.dataset[t]=i},x={$:function(e,t,i){!0===i?e.setAttribute(t,""):!1===i||null==i?e.removeAttribute(t):e.setAttribute(t,i)},":":b,c:A,s:function(e,t,i){var r=e.style;r&&(r[t]=i)},d:I},P=function(e,t,i){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};h.create=function(e,i,r,a){var o=void 0===e.template?P:e.template,s=o;"function"!=typeof o&&(void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?s=h.precompileAndGetCreator(o):(n.hasGlobalWarningListeners()&&n.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),s=P));var l=Object.create(h.prototype);return l._initValuesJSON=JSON.stringify(r),l._dataJSON=i!==r?JSON.stringify(i):null,l._tagTreeRoot=D(s,r,e.methods,a),l._renderingMode=a.renderingMode,l};var D=function(e,t,i,n){var a="native"===n.renderingMode,s=a,l=!1,u=Object.create(null);a&&!r.hasDOMBackend&&(e=P);var c={},h=e(m,v,i),p=function(e){for(var i=0;i<e.length;i++){var n=e[i];if(3!==n.t){var u=n.n,h=!(a||"string"==typeof u&&u.indexOf("-")<0);"slot"===u&&""===n.sn&&(l=!0),n.n=u;var f=n.st;f&&f.e&&(f.o=T,s&&(f.v=f.e(t,c,null)));var _=n.cl;_&&_.e&&(_.o=a?C:w,s&&(_.v=_.e(t,c,null)));var m=null;h||(n.p=m=a?document.createElement(n.n):o.create(n.n),f&&void 0!==f.v&&("dom"===r.documentBackend?m.setAttribute("style",f.v):"custom"===r.documentBackend&&m.__domElement.setStyle(f.v)),a&&_&&void 0!==_.v&&m.setAttribute("class",_.v));for(var v=n.a,y=0;y<v.length;y++){var I=v[y];if(I.d)a||d[I.n].register(I.n,I,n);else{a||("bind"===I.n.slice(0,4)?(I.evCatch=!1,I.ev=g(I.n.slice(4)),":"===I.ev[0]&&(I.ev=I.ev.slice(1))):"catch"===I.n.slice(0,5)&&(I.evCatch=!0,I.ev=g(I.n.slice(5)),":"===I.ev[0]&&(I.ev=I.ev.slice(1))));var P=I.o;if(h)P?I.o="&"===P?x[":"]:x[P]:(I.o=x[":"],I.n=g(I.n)),I.o===b&&(I.o=E),s&&I.e&&(I.v=I.e(t,c,null));else if(!I.ev){var D=x;I.o=P?"&"===P?D[":"]:D[P]:D.$,s?(I.e&&(I.v=I.e(t,c,null)),(I.o!==A||a)&&I.o(m,I.n,I.v)):I.e||I.o(m,I.n,I.v)}}}p(n.c),a&&(1!==n.c.length||void 0===n.c[0].sn||n.c[0].compressed||(n.sn=n.c[0].sn,n.compressed=!0,n.c.pop()))}else n.e&&(n.o=S,n.c=s?n.e(t,c,null):"")}};return p(h,u,!0),a&&(l||h.push(y),1!==h.length||""!==h[0].sn||h[0].compressed||h.pop()),h},R=function(e,t){return function(i){if(this[e](i),t)return!1}},O=function(e,t,i,n,o,s,l,h){for(var p=null,f=0,g=null,_=0;_<e.length;_++){var m=l,v=e[_];if(3===v.t)p=v.e?t.createTextNode(v.e(n,o,null)):t.createTextNode(v.c),v.e&&c.addBindings(s,m,v.b,p,v),a.appendChild(i,p);else{var y=v.cl,w=v.st,T=v.a,C=!1;for(f=0;f<T.length;f++)if((g=T[f]).d){var S=d[g.n].create(g.n,g,v,n,o,s,m,h,t,O,i);if(d[g.n].requireBlock){p=S,a.appendChild(i,p),C=!0;break}}if(C)continue;if(v.v)p=t.createVirtualNode(v.n);else if(v.p){for(p=t.cloneNativeNode(v.p),f=0;f<T.length;f++)(g=T[f]).d||(g.ev?h(p,g.ev,g.v,g.evCatch):g.o===b?p.__domElement&&(g.o(p.__domElement,g.n,g.e(n,o,null)),c.addBindings(s,m,g.b,p.__domElement,g)):(g.e&&g.o(p,g.n,g.e(n,o,null)),(g.e||g.o===A||g.o===I)&&c.addBindings(s,m,g.b,p,g)));w&&w.e&&("dom"===r.documentBackend?p.setAttribute("style",w.e(n,o,null)):"custom"===r.documentBackend&&p.__domElement.setStyle(w.e(n,o,null)),c.addBindings(s,m,w.b,p,w))}else{if(v.cpf){var x={},P=t.__wxHost;for(var D in v.cpf)!function(e){var t=v.cpf[e];x[e]=P.__behavior.methods[t]}(D);t.__childrenPropsFilter=x}for(p=t.createComponent(v.n,void 0,v.g,void 0),f=0;f<T.length;f++)if(!(g=T[f]).d){var R=g.v;g.o===E&&u.hasPublicProperty(p,g.n)?(g.e&&(R=g.e(n,o,null),c.addBindings(s,m,g.b,p,g)),g.e?E(p,g.n,R):p.__behavior.properties[g.n].type===Boolean?E(p,g.n,!0):E(p,g.n,R)):g.ev?h(p,g.ev,R,g.evCatch):g.o!==E&&(g.e&&(R=g.e(n,o,null),c.addBindings(s,m,g.b,p,g)),g.o(p,g.n,R))}w&&(w.e?("dom"===r.documentBackend?p.__domElement.setAttribute("style",w.e(n,o,null)):"custom"===r.documentBackend&&p.__domElement.setStyle(w.e(n,o,null)),c.addBindings(s,m,w.b,p.__domElement,w)):"dom"===r.documentBackend?p.__domElement.setAttribute("style",w.v):"custom"===r.documentBackend&&p.__domElement.setStyle(w.v))}v.id&&(p.id=v.id),y&&(y.e?p.class=y.e(n,o,null):p.class=y.v,y.o&&c.addBindings(s,m,y.b,p,y)),v.sl&&(p.slot=v.sl),void 0!==v.sn&&a.setSlotName(p,v.sn),a.appendChild(i,p),O(v.c,t,p,n,o,s,m,h)}}},k=function(e,t,i){for(var r=e.childNodes,n=0;n<r.length;n++){var a=r[n];a instanceof s||(a.__id&&(t[a.__id]=a),void 0!==a.__slotName&&(i[a.__slotName]=a),k(a,t,i))}},M=function(e,t,i,r,n,a){for(var o=null,s=0,l=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)o=document.createTextNode(d.c),d.e&&c.addBindings(n,a,d.b,o,d),t.appendChild(o);else{var h=d.cl,p=d.st,f=d.a;for(o=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<f.length;s++)(l=f[s]).e&&c.addBindings(n,a,l.b,o,l);t.appendChild(o),d.id&&(i[d.id]=o),h&&h.e&&c.addBindings(n,a,h.b,o,h),p&&p.e&&c.addBindings(n,a,p.b,o,p),void 0!==d.sn&&(r[d.sn]=o),M(d.c,o,i,r,n,a)}}};h.prototype.createInstance=function(e){var t=Object.create(p.prototype),i=JSON.parse(this._initValuesJSON),n=null===this._dataJSON?i:JSON.parse(this._dataJSON),a=Object.create(null),o=Object.create(null),s=[],u=c.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(d=document.createDocumentFragment()),M(this._tagTreeRoot,d,a,o,u,{}),o[""]||(o[""]=null);else{if(d=l.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var h in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[h]||(d.__childrenPropsFilter[h]=e.ownerShadowRoot.__childrenPropsFilter[h]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;O(this._tagTreeRoot,d,d,i,{},u,{},(function(e,t,i,r){d.__wxHost?e.addListener(t,R(i,r).bind(d.__wxHost)):s.push({target:e,name:t,func:R(i,r)})})),k(d,a,o)}return t.data=n,t.shadowRoot=d,t.idMap=a,t.slots=o,t.listeners=s,t._topScope=u,t},p.prototype.updateValues=function(e,t,i){for(var r=a.getMethodCaller(e),n=0;n<i.length;n++){var o=i[n];c.updateBinding(this._topScope,o,t,{},r)}},e.exports=h}).call(t,i(23))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function n(e){if(u===setTimeout)return setTimeout(e,0);if((u===i||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function a(){f&&h&&(f=!1,h.length?p=h.concat(p):g=-1,p.length&&o())}function o(){if(!f){var e=n(a);f=!0;for(var t=p.length;t;){for(h=p,p=[];++g<t;)h&&h[g].run();g=-1,t=p.length}h=null,f=!1,function(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var u,c,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:i}catch(e){u=i}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var h,p=[],f=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];p.push(new s(e,t)),1!==p.length||f||n(o)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.prependListener=l,d.prependOnceListener=l,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var i={create:function(e,t,i,n,a,o,s){for(var l={inc:1,name:e,exp:n,lp:a,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<o.length;u++){var c=o[u];null===c[0]?r(t,c,null,l):r(i[c[0]],c,null,l)}return l},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var i in e)t[i]={inc:1,linked:e[i],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[i],[null],null,t[i]);return t}},r=i.addBinding=function(e,t,i,r){for(var n=e,a=1;a<t.length;a++){var o=t[a];n.children||(n.children=Object.create(null));var s=n.children;s[o]||(s[o]={scopes:{},targets:{},children:null}),n=s[o]}var l=e.inc++;return i?n.targets[l]=[i,r]:(n.scopes[l]=r,r.__scopeBinded.push([n,l])),l};i.addBindings=function(e,t,i,n,a){for(var o=0;o<i.length;o++){var s=i[o];s[0]?r(t[s[0]],s,n,a):r(e,s,n,a)}},i.updateLvaluePath=function(e,t){e.lp=t},i.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,i=0;i<t.length;i++){var r=t[i];delete r[0].scopes[r[1]]}};var n=function(e,t,i,r,n){if(e.linked)a(e,t,i,r,n);else{var o=r[e.name];r[e.name]=e.exp(i,r,n),a(e,t,i,r,n),r[e.name]=o}},a=i.updateBinding=function(e,t,i,r,a){for(var o=e,s=0,l=0;l<t.length;l++){for(s in o.scopes)n(o.scopes[s],t,i,r,a);var u=t[l];if(!o.children)return;var c=o.children;if(!c[u])return;o=c[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],o=t[1];o.o(t[0],o.n,o.e(i,r,a))}for(s in e.scopes)n(e.scopes[s],[],i,r,a);for(s in e.children)d(e.children[s])};d(o)};e.exports=i},function(e,t,i){e.exports={if:i(26),elif:i(26),else:i(26),for:i(28),key:i(29),"for-index":i(30),"for-item":i(31),alias:i(32)}},function(e,t,i){var r=i(24),n=i(27).RUNTIME_NAMES;n.TOP_SCOPE,n.SUB_SCOPE,n.CALLER,e.exports={requireBlock:!0,register:function(e,t,i){},create:function(e,t,i,n,a,o,s,l,u,c,d){var h=u.createVirtualNode("wx:"+e);h.__wxIfCondValue=!0,h.__wxIfNextNode=null,h.__wxIfHasTrueCond=!0;var p=null;"if"!==e&&("wx:if"!==(p=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==p.is?p=null:p.__wxIfNextNode=h),i.id&&(h.id=i.id);var f=h.__wxIfUpdateNode=function(){var e=h.__wxIfCondValue;if(p&&p.__wxIfHasTrueCond&&(e=!1),e&&!h.childNodes.length){var t=r.proxyTopScope(o),d=r.proxySubScopes(s);h.__wxTopScope=t,h.__wxSubScopes=d,c(i.c,u,h,n,a,t,d,l)}else if(!e&&h.childNodes.length){for(var f in r.removeBindingsForScope(h.__wxTopScope),h.__wxSubScopes)r.removeBindingsForScope(h.__wxSubScopes[f]);for(;h.childNodes.length;)h.removeChild(h.childNodes[0])}h.__wxIfNextNode&&h.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){h.__wxIfCondValue=!!e,h.__wxIfHasTrueCond=h.__wxIfCondValue||p&&p.__wxIfHasTrueCond,f()};return"else"===e?g(!0):(r.addBindings(o,s,t.b,h,{e:t.d,o:function(e,t,i){g(i)}}),g(t.d(n,a,null))),h}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var i=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},n="";for(var a in i)r[i[a]]=a,n+=i[a];t.STRING_ESCAPE_REGEXP=new RegExp("["+n+"]","g")},function(e,t,i){var r=(i(18),i(24)),n=i(27).RUNTIME_NAMES;n.TOP_SCOPE,n.SUB_SCOPE,n.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,i){},create:function(e,t,i,n,a,o,s,l,u,c){var d=i._wxForIndex||"index",h=i._wxForItem||"item",p=i._wxKey,f=u.createVirtualNode("wx:for:list");i.id&&(f.id=i.id),r.create("",o,s,(function(e,i,r){var n=t.d(e,i,null);return y(n,e,i,r),n}),t.l,t.b);var g=function(e,t,n,a,p){var g=u.createVirtualNode("wx:for:item"),_=r.proxyTopScope(o),m=r.proxySubScopes(s);g.__wxTopScope=_,g.__wxSubScopes=m,g.__wxForToRemove=!1,g.__wxForKeyStr="";var v=r.create(d,_,m,null,null,[]),y=r.create(h,_,m,null,[n],[]);return m[d]=v,m[h]=y,t[d]=n,t[h]=a,c(i.c,u,g,e,t,_,m,l),void 0===p?f.appendChild(g):f.insertBefore(g,p),g},_=function(e,t,i,a,o,s){var l=e.__wxSubScopes[h];r.updateLvaluePath(l,[a]),o&&(s?f.insertBefore(e,s):f.appendChild(e));var u=e.__wxSubScopes[d];i[d]=a,r.updateBinding(u,[],n,i,t)},m=function(e,t,i,n,a,o){n[h]=a,r.updateBinding(e.__wxSubScopes[h],t,i,n,o)},v=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);f.removeChild(e)},y=function(e,t,i,r){var n="",a=e;"object"==typeof e&&null!==e||(a=[]);var o={};for(n in i)o[n]=i[n];var s=0;if(p){var l=[],u=e instanceof Array,c=[];if(!u){var d=a;for(n in a=[],d)a.push(d[n]),c.push(n)}for(s=0;s<a.length;s++)l.push(String(a[s][p]));if(0===a.length)for(;f.childNodes.length;)v(f.childNodes[0]);else{var h=Object.create(null),y=Object.create(null),A=f.childNodes,b=null,E="";for(s=0;s<A.length;s++)h[E=(b=A[s]).__wxForKeyStr]>=0?(v(b),s--):(h[E]=s,y[E]=b,b.__wxForToRemove=!0);var w=-1,T=0,C=1,S=[];for((T=h[a[0][p]])>=0||(T=-1),A[T]&&(A[T].__wxForToRemove=!1),s=1;s<a.length;s++)(C=h[a[s][p]])>=0&&(w<T&&(T<C||w>C)&&(S.push(A[T]),w=T),A[T=C]&&(A[T].__wxForToRemove=!1));for(w<T&&S.push(A[T]),s=0;s<A.length;s++)(b=A[s]).__wxForToRemove&&(v(b),s--);var I=S.shift(),x=0;for(s=0;s<a.length;s++){var P=a[s],D=y[P[p]];if(y[P[p]]=null,D){var R=!0;if(D===I){for(;A[x]!==I;)x++;x++,I=S.shift(),R=!1}_(b=D,r,o,u?s:c[s],R,A[x]),R&&A[x]===b&&x++,m(b,[],t,o,a[s],r)}else b=g(t,o,u?s:c[s],a[s],A[x]),x++,b.__wxForKeyStr=String(P[p])}}}else{for(;f.childNodes.length;)v(f.childNodes[0]);if(e instanceof Array)for(s=0;s<a.length;s++)g(t,o,s,a[s]);else for(n in a)g(t,o,n,a[n])}};return y(t.d(n,a,null),n,a,null),f}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,i){i._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,i){i._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,i){i._wxForItem=t.d},create:function(){}}},function(e,t,i){var r=i(24),n=i(27).RUNTIME_NAMES;n.TOP_SCOPE,n.SUB_SCOPE,n.CALLER,e.exports={requireBlock:!0,register:function(e,t,i){},create:function(e,t,i,n,a,o,s,l,u,c){var d=t.s[0],h=r.create(d,o,s,t.d,t.l,t.b),p={},f="";for(f in s)p[f]=s[f];p[d]=h;var g={};for(f in a)g[f]=a[f];g[d]=t.d(n,a,null);var _=u.createVirtualNode("wx:alias");return i.id&&(_.id=i.id),c(i.c,u,_,n,g,o,p,l),_}}}]);e.exports=t},446:(e,t,i)=>{var r=i(821);e.exports=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=4)}([function(e,t,i){var r=null;"undefined"!=typeof NativeGlobal&&void 0!==NativeGlobal.WebAssembly?r=NativeGlobal.WebAssembly:"undefined"!=typeof WebAssembly&&(r=WebAssembly),t.wasm_initialize=function(e,n){var a=e.bin,o=new r.Memory({initial:16}),s={js:{mem:o},"./exparser_scl_backend_bg.js":i(3)},l=function(e){for(var i in e.instance.exports)t[i]=e.instance.exports[i];t.memory||(t.memory=o),t.wasm_initialize=null,n(t)},u=r.instantiate(a,s);"function"==typeof u.then?u.then(l):l(u)}},function(e,t,i){"use strict";function r(){}function n(){}i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return n})),r.prototype.encode=function(e){for(var t=[],i=e.length,r=0;r<i;){var n=e.codePointAt(r),a=0,o=0;for(n<=127?(a=0,o=0):n<=2047?(a=6,o=192):n<=65535?(a=12,o=224):n<=2097151&&(a=18,o=240),t.push(o|n>>a),a-=6;a>=0;)t.push(128|n>>a&63),a-=6;r+=n>=65536?2:1}return t},n.prototype.decode=function(e){if(void 0===e)return"";for(var t="",i=0;i<e.length;){var r=e[i],n=0,a=0;if(r<=127?(n=0,a=255&r):r<=223?(n=1,a=31&r):r<=239?(n=2,a=15&r):r<=244&&(n=3,a=7&r),e.length-i-n>0)for(var o=0;o<n;)a=a<<6|63&(r=e[i+o+1]),o+=1;else a=65533,n=e.length-i;t+=String.fromCodePoint(a),i+=n+1}return t}},function(e,t,i){"use strict";i.r(t),i.d(t,"setErrorListener",(function(){return n})),i.d(t,"consoleErrorReport",(function(){return a}));var r=null,n=function(e){r=e},a=function(e){if(r){var t=e.split("\nStack:\n",2)[0].trim();r(new Error(t))}else console.error(e)}},function(e,t,i){"use strict";i.r(t),function(e){i.d(t,"setCurrentFrameView",(function(){return k})),i.d(t,"wasm_main",(function(){return M})),i.d(t,"compileStyleSheetToJson",(function(){return N})),i.d(t,"compileStyleSheetToBincode",(function(){return L})),i.d(t,"BoundingClientRect",(function(){return B})),i.d(t,"Callback",(function(){return F})),i.d(t,"Context",(function(){return U})),i.d(t,"Element",(function(){return W})),i.d(t,"Listener",(function(){return G})),i.d(t,"ScrollPosition",(function(){return V})),i.d(t,"StyleSheetGroup",(function(){return j})),i.d(t,"__wbg_invoke_e595dd16845dff2f",(function(){return H})),i.d(t,"__wbindgen_object_drop_ref",(function(){return z})),i.d(t,"__wbg_instanceof_ExparserElement_74ace43f429ed53b",(function(){return Y})),i.d(t,"__wbindgen_json_parse",(function(){return $})),i.d(t,"__wbindgen_json_serialize",(function(){return q})),i.d(t,"__wbg_triggerRender_8291f7e41c9ba309",(function(){return Q})),i.d(t,"__wbg_getTheme_6ee867e661a1fe00",(function(){return Z})),i.d(t,"__wbg_getWindowWidth_5d3459d21d0fb732",(function(){return K})),i.d(t,"__wbg_getWindowHeight_5055bbf1cbab7ad7",(function(){return X})),i.d(t,"__wbg_getDevicePixelRatio_bad18211fbb2a2d3",(function(){return J})),i.d(t,"__wbg_getSafeArea_e02a51c464e82ae4",(function(){return ee})),i.d(t,"__wbg_getEngineConfig_d071336fb0f35c81",(function(){return te})),i.d(t,"__wbg_setTimeout_73cd22a52998d9f8",(function(){return ie})),i.d(t,"__wbindgen_object_clone_ref",(function(){return re})),i.d(t,"__wbg_triggerEvent_fe8e7714c046228c",(function(){return ne})),i.d(t,"__wbg_subscribe_76e57ecbbf87c182",(function(){return ae})),i.d(t,"__wbg_timeoutCallback_5a0fccae410eec7e",(function(){return oe})),i.d(t,"__wbg_new_59cb74e423758ede",(function(){return se})),i.d(t,"__wbg_stack_558ba5917b466edd",(function(){return le})),i.d(t,"__wbg_error_4bb6c2a97407129a",(function(){return ue})),i.d(t,"__wbindgen_string_new",(function(){return ce})),i.d(t,"__wbg_debug_733679f61d937b18",(function(){return de})),i.d(t,"__wbg_error_c81c8d172df3cb18",(function(){return he})),i.d(t,"__wbg_info_23f7f04053448bbc",(function(){return pe})),i.d(t,"__wbg_log_8485ead621ceded9",(function(){return fe})),i.d(t,"__wbg_warn_eb158fa0859088bf",(function(){return ge})),i.d(t,"__wbindgen_debug_string",(function(){return _e})),i.d(t,"__wbindgen_throw",(function(){return me}));var n=i(1),a=i(2),o=i(0);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,i){return t&&l(e.prototype,t),i&&l(e,i),e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d=new Array(32).fill(void 0);function h(e){return d[e]}d.push(void 0,null,!0,!1);var p=d.length;function f(e){var t=h(e);return function(e){e<36||(d[e]=p,p=e)}(e),t}var g=new(void 0===n.a?(0,e.require)("util").TextDecoder:n.a)("utf-8",{ignoreBOM:!0,fatal:!0});g.decode();var _=null;function m(){return null!==_&&_.buffer===o.memory.buffer||(_=new Uint8Array(o.memory.buffer)),_}function v(e,t){return g.decode(m().subarray(e,e+t))}function y(e){p===d.length&&d.push(d.length+1);var t=p;return p=d[t],d[t]=e,t}var A=0,b=new(void 0===n.b?(0,e.require)("util").TextEncoder:n.b)("utf-8"),E="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var i=b.encode(e);return t.set(i),{read:e.length,written:i.length}};function w(e,t,i){if(void 0===i){var r=b.encode(e),n=t(r.length);return m().subarray(n,n+r.length).set(r),A=r.length,n}for(var a=e.length,o=t(a),s=m(),l=0;l<a;l++){var u=e.charCodeAt(l);if(u>127)break;s[o+l]=u}if(l!==a){0!==l&&(e=e.slice(l)),o=i(o,a,a=l+3*e.length);var c=m().subarray(o+l,o+a);l+=E(e,c).written}return A=l,o}var T=null;function C(){return null!==T&&T.buffer===o.memory.buffer||(T=new Int32Array(o.memory.buffer)),T}var S=32;function I(e){if(1==S)throw new Error("out of js stack");return d[--S]=e,S}function x(e){return function(){throw new Error("".concat(e," is not defined"))}}function P(e){return null==e}function D(e,t){var i=t(1*e.length);return m().set(e,i/1),A=e.length,i}function R(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name));return e.ptr}function O(e,t){try{return e.apply(this,t)}catch(e){o.__wbindgen_exn_store(y(e))}}function k(e){o.setCurrentFrameView(e)}function M(){o.wasm_main()}function N(e,t){try{var i=o.__wbindgen_add_to_stack_pointer(-16),r=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=A,a=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),s=A;o.compileStyleSheetToJson(i,r,n,a,s);var l=C()[i/4+0],u=C()[i/4+1];return v(l,u)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(l,u)}}function L(e,t){try{var i=o.__wbindgen_add_to_stack_pointer(-16),r=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=A,a=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),s=A;o.compileStyleSheetToBincode(i,r,n,a,s);var l=C()[i/4+0],u=C()[i/4+1],c=(d=l,h=u,m().subarray(d/1,d/1+h)).slice();return o.__wbindgen_free(l,1*u),c}finally{o.__wbindgen_add_to_stack_pointer(16)}var d,h}var B=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_boundingclientrect_free(e)}},{key:"left",get:function(){return o.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"top",get:function(){return o.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"width",get:function(){return o.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"height",get:function(){return o.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}}]),e}(),F=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_callback_free(e)}},{key:"exec",value:function(e){try{var t=this.__destroy_into_raw();o.callback_exec(t,I(e))}finally{d[S++]=void 0}}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}}]),e}(),U=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_context_free(e)}},{key:"getWindowWidth",value:function(){return o.context_getWindowWidth(this.ptr)}},{key:"getWindowHeight",value:function(){return o.context_getWindowHeight(this.ptr)}},{key:"getDevicePixelRatio",value:function(){return o.context_getDevicePixelRatio(this.ptr)}},{key:"getTheme",value:function(){try{var e=o.__wbindgen_add_to_stack_pointer(-16);o.context_getTheme(e,this.ptr);var t=C()[e/4+0],i=C()[e/4+1];return v(t,i)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(t,i)}}},{key:"appendStyleSheet",value:function(e){var t=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;return o.context_appendStyleSheet(this.ptr,t,i)>>>0}},{key:"appendStyleSheetJson",value:function(e,t){var i=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A,n=P(t)?0:w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=A;return o.context_appendStyleSheetJson(this.ptr,i,r,n,a)>>>0}},{key:"appendStyleSheetBincode",value:function(e,t){var i=D(e,o.__wbindgen_malloc),r=A,n=P(t)?0:w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=A;return o.context_appendStyleSheetBincode(this.ptr,i,r,n,a)>>>0}},{key:"replaceStyleSheet",value:function(e,t){var i=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A;o.context_replaceStyleSheet(this.ptr,e,i,r)}},{key:"replaceStyleSheetJson",value:function(e,t,i){var r=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),n=A,a=P(i)?0:w(i,o.__wbindgen_malloc,o.__wbindgen_realloc),s=A;o.context_replaceStyleSheetJson(this.ptr,e,r,n,a,s)}},{key:"replaceStyleSheetBincode",value:function(e,t,i){var r=D(t,o.__wbindgen_malloc),n=A,a=P(i)?0:w(i,o.__wbindgen_malloc,o.__wbindgen_realloc),s=A;o.context_replaceStyleSheetBincode(this.ptr,e,r,n,a,s)}},{key:"clearStyleSheets",value:function(){o.context_clearStyleSheets(this.ptr)}},{key:"render",value:function(e){try{o.context_render(this.ptr,I(e))}finally{d[S++]=void 0}}},{key:"bindRootNode",value:function(e){R(e,W),o.context_bindRootNode(this.ptr,e.ptr)}},{key:"getRootNode",value:function(){var e=o.context_getRootNode(this.ptr);return 0===e?void 0:W.__wrap(e)}},{key:"createElement",value:function(e,t){var i=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A,n=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=A,s=o.context_createElement(this.ptr,i,r,n,a);return W.__wrap(s)}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}},{key:"create",value:function(){var t=o.context_create();return e.__wrap(t)}},{key:"getNodeUnderPoint",value:function(e,t){var i=o.context_getNodeUnderPoint(e,t);return W.__wrap(i)}},{key:"getExparserElementByViewId",value:function(e){return f(o.context_getExparserElementByViewId(e))}}]),e}(),W=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_element_free(e)}},{key:"release",value:function(){var e=this.__destroy_into_raw();o.element_release(e)}},{key:"associateComponent",value:function(e){o.element_associateComponent(this.ptr,y(e))}},{key:"cloneNode",value:function(){var t=o.element_cloneNode(this.ptr);return e.__wrap(t)}},{key:"equal",value:function(t){return R(t,e),0!==o.element_equal(this.ptr,t.ptr)}},{key:"getParentNode",value:function(){var t=o.element_getParentNode(this.ptr);return 0===t?void 0:e.__wrap(t)}},{key:"getChildNode",value:function(t){var i=o.element_getChildNode(this.ptr,t);return 0===i?void 0:e.__wrap(i)}},{key:"appendChild",value:function(t){R(t,e),o.element_appendChild(this.ptr,t.ptr)}},{key:"insertChild",value:function(t,i){R(t,e),o.element_insertChild(this.ptr,t.ptr,i)}},{key:"removeChild",value:function(e){o.element_removeChild(this.ptr,e)}},{key:"replaceChild",value:function(t,i){R(t,e),o.element_replaceChild(this.ptr,t.ptr,i)}},{key:"splice",value:function(t,i,r){R(r,e),o.element_splice(this.ptr,t,i,r.ptr)}},{key:"findChildPosition",value:function(t){return R(t,e),o.element_findChildPosition(this.ptr,t.ptr)}},{key:"length",value:function(){return o.element_length(this.ptr)>>>0}},{key:"getBoundingClientRect",value:function(){var e=o.element_getBoundingClientRect(this.ptr);return 0===e?void 0:B.__wrap(e)}},{key:"getScrollPosition",value:function(){var e=o.element_getScrollPosition(this.ptr);return V.__wrap(e)}},{key:"setScrollPosition",value:function(e,t,i){o.element_setScrollPosition(this.ptr,!P(e),P(e)?0:e,!P(t),P(t)?0:t,!P(i),P(i)?0:i)}},{key:"setId",value:function(e){var t=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;o.element_setId(this.ptr,t,i)}},{key:"setClass",value:function(e){var t=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;o.element_setClass(this.ptr,t,i)}},{key:"setStyle",value:function(e){var t=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;o.element_setStyle(this.ptr,t,i)}},{key:"setStyleScope",value:function(e){var t=P(e)?0:w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;o.element_setStyleScope(this.ptr,t,i)}},{key:"setAttribute",value:function(e,t){var i=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A,n=w(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=A;o.element_setAttribute(this.ptr,i,r,n,a)}},{key:"getAttribute",value:function(e){try{var t=o.__wbindgen_add_to_stack_pointer(-16),i=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A;o.element_getAttribute(t,this.ptr,i,r);var n=C()[t/4+0],a=C()[t/4+1];return v(n,a)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(n,a)}}},{key:"setText",value:function(e){var t=w(e,o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;o.element_setText(this.ptr,t,i)}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}}]),e}(),G=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_listener_free(e)}},{key:"exec",value:function(e){try{return 0!==o.listener_exec(this.ptr,I(e))}finally{d[S++]=void 0}}},{key:"release",value:function(){var e=this.__destroy_into_raw();o.__wbg_callback_free(e)}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}}]),e}(),V=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_scrollposition_free(e)}},{key:"scrollLeft",get:function(){return o.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"scrollTop",get:function(){return o.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"scrollWidth",get:function(){return o.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"scrollHeight",get:function(){return o.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var i=Object.create(e.prototype);return i.ptr=t,i}}]),e}(),j=function(){function e(){s(this,e)}return u(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();o.__wbg_stylesheetgroup_free(e)}}]),e}();function H(){return O((function(e,t,i,n){r.invoke(v(e,t),f(i),0===n?void 0:F.__wrap(n))}),arguments)}function z(e){f(e)}function Y(e){return h(e)instanceof r.exparser.Element}function $(e,t){return y(JSON.parse(v(e,t)))}function q(e,t){var i=h(t),r=w(JSON.stringify(void 0===i?null:i),o.__wbindgen_malloc,o.__wbindgen_realloc),n=A;C()[e/4+1]=n,C()[e/4+0]=r}var Q="function"==typeof r.exparser.triggerRender?r.exparser.triggerRender:x("__exparserSclEngine__.exparser.triggerRender");function Z(e){var t=w(r.getTheme(),o.__wbindgen_malloc,o.__wbindgen_realloc),i=A;C()[e/4+1]=i,C()[e/4+0]=t}var K="function"==typeof r.getWindowWidth?r.getWindowWidth:x("__exparserSclEngine__.getWindowWidth"),X="function"==typeof r.getWindowHeight?r.getWindowHeight:x("__exparserSclEngine__.getWindowHeight"),J="function"==typeof r.getDevicePixelRatio?r.getDevicePixelRatio:x("__exparserSclEngine__.getDevicePixelRatio");function ee(){return y(r.getSafeArea())}function te(){return y(r.getEngineConfig())}function ie(e,t){return setTimeout(h(e),t>>>0)}function re(e){return y(h(e))}function ne(e,t,i,n,a){r.exparser.triggerEvent(h(e),v(t,i),f(n),f(a))}function ae(){return O((function(e,t,i){r.subscribe(v(e,t),0===i?void 0:G.__wrap(i))}),arguments)}function oe(e,t){r.timeoutCallback(e>>>0,F.__wrap(t))}function se(){return y(new Error)}function le(e,t){var i=w(h(t).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),r=A;C()[e/4+1]=r,C()[e/4+0]=i}function ue(e,t){try{Object(a.consoleErrorReport)(v(e,t))}finally{o.__wbindgen_free(e,t)}}function ce(e,t){return y(v(e,t))}function de(e){console.debug(h(e))}function he(e){Object(a.consoleErrorReport)(h(e))}function pe(e){console.info(h(e))}function fe(e){console.log(h(e))}function ge(e){console.warn(h(e))}function _e(e,t){var i=w(function e(t){var i=c(t);if("number"==i||"boolean"==i||null==t)return"".concat(t);if("string"==i)return'"'.concat(t,'"');if("symbol"==i){var r=t.description;return null==r?"Symbol":"Symbol(".concat(r,")")}if("function"==i){var n=t.name;return"string"==typeof n&&n.length>0?"Function(".concat(n,")"):"Function"}if(Array.isArray(t)){var a=t.length,o="[";a>0&&(o+=e(t[0]));for(var s=1;s<a;s++)o+=", "+e(t[s]);return o+"]"}var l,u=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!(u.length>1))return toString.call(t);if("Object"==(l=u[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?"".concat(t.name,": ").concat(t.message,"\n").concat(t.stack):l}(h(t)),o.__wbindgen_malloc,o.__wbindgen_realloc),r=A;C()[e/4+1]=r,C()[e/4+0]=i}function me(e,t){throw new Error(v(e,t))}}.call(this,i(5)(e))},function(e,t,i){var r=i(2),n=i(0);e.exports=i(3);var a=function(){e.exports.memory=n.memory,"function"==typeof n.__wbindgen_start?n.__wbindgen_start():"function"==typeof n.wasm_main&&n.wasm_main()},o=null;e.exports.wasm_initialize=function(e,t){void 0===t&&(t=e,e=void 0),n.wasm_initialize?o?o.push(t):(o=[t],n.wasm_initialize(e,(function(){a();var e=o;o=null,e.forEach((function(e){e()}))}))):t&&setTimeout(t,0)},n.wasm_initialize||a(),e.exports.setErrorListener=r.setErrorListener},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])},668:(e,t,i)=>{i(57).J.push("AftQA21wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLW1hc2ttcC1idWJibGUtYWN0aW9uLXNoZWV0LS1tZW51bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbG1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1pbWdtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jZWxsLWRlc2NtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1mb290bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uc2FmZS1hcmVhLWluc2V0LWJvdHRvbW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWJ1dHRvbl9fYmVmb3JlbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19ob3Zlcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1jb250ZW50bXAtYnViYmxlLWFjdGlvbi1zaGVldC0tbWVudW1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWJ1YmJsZS1hY3Rpb24tc2hlZXQtLWNlbGxfX2hvdmVybXAtYnViYmxlLWFjdGlvbi1zaGVldC0tY2VsbC1kZXNjbXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9ubXAtYnViYmxlLWFjdGlvbi1zaGVldC0tYnV0dG9uX19iZWZvcmVtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2NvbnRlbnRtcC1idWJibGUtYWN0aW9uLXNoZWV0LS1idXR0b25fX2hvdmVy+8ADFi4ODAEKAAAAAAMBABwAABAcBQIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAAAAAWA4MAQocABwAAwEcHAAAEEYOJgMAIgPt7e3/AgIALwIAAAAALgIAAAAAKAIAAApDJwgAAIA/MwIAAMBBNAIAAMBBMgIAAMBBMQIAAMBBAQMACAEADQYAAAAWDgwBCjgAOAADATgcAAAQBAECAgAAAFgODAEKVABUAAMBVCoAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAAIxgWARR+AH4AAwF+KgEKqACoAAMBqCMAACAHASID7Ozs/wAAHw4MAQrLAMsAAwHLIAAAEA0CJwIAAABCKAIAAABCAAAoDgwBCusA6wADAeshAAAQFgQWAgAAIEETAwAAAIAYAgA3AgAAAEEAACIUEgEQ+wwBAPsMAQAFAfsMARwAABAKAgICACcIAACAPwAAKxQSARD7KAEA+ygBAAUB+ygBHgAAEBMDAgIANAkB+0YBFgAAIgP/////AABHFBIBEPtcAQD7XAEABQH7XAEmAAAQLwcCAwAvAgAAAAAtAgAAAAAuAgAAAAAoAgAAgD8iAwAAABpJAQoBAwAAgD8AAAA/AABSFBIBEPuCAQD7ggEABQH7ggEnAAAQOgsmAwAzAgAAAAA0AgAAAAAyAgAAgEExAgAAgEEYAgAWAgAAiEEXAgAAYEIeAwATAwAAAOYoAgAAYEIAAB8UEgEQ+6kBAPupAQAFAfupASUAABAHASID7Ozs/wAAHxQSARD7zgEA+84BAAUB+84BHwAAEAcBJwMAAMhCAQAfFBIBEPvtAQD77QEABQH77QEfAAAQBwEnBAAAyEIBAR8UEgEQ+wwCAPsMAgAFAfsMAhwAABAHASIDERER/wECHxQSARD7KAIA+ygCAAUB+ygCKgAAEAcBIgMfHx//AQIvJCIBIPtSAgD7UgIABQH7UgIqARD7fAIA+3wCAAUB+3wCIwAAIAcBIgM3Nzf/AQIfFBIBEPufAgD7nwIABQH7nwIhAAAQBwETA////4ABAh8UEgEQ+8ACAPvAAgAFAfvAAh4AABAHASIDHx8f/wECHxQSARD73gIA+94CAAUB+94CJgAAEAcBIgP///8NAQIfFBIBEPsEAwD7BAMABQH7BAMnAAAQBwETA////8wBAh8UEgEQ+ysDAPsrAwAFAfsrAyUAABAHASIDNzc3/wECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},574:(e,t,i)=>{i(57).J.push("AfvjAW1wLWRpYWxvZy0tcm9vdG1wLWRpYWxvZy0tbWFza21wLWRpYWxvZy0tbWFza19faW5tcC1kaWFsb2ctLWNvbnRhaW5lcm1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tY29udGVudF9faW5tcC1kaWFsb2ctLWhlYWRtcC1kaWFsb2ctLXRpdGxlbXAtZGlhbG9nLS1ib2R5bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290bXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19maXJzdC1jaGlsZF9fYWZ0ZXJtcC1kaWFsb2ctLWJ1dHRvbl9fZGVmYXVsdG1wLWRpYWxvZy0tY29udGVudG1wLWRpYWxvZy0tYm9keW1wLWRpYWxvZy0tYnV0dG9ubXAtZGlhbG9nLS1idXR0b25fX2RlZmF1bHRtcC1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtZGlhbG9nLS1mb290X19hZnRlcm1wLWRpYWxvZy0tYnV0dG9uX19hZnRlcvvqAxc5DgwBCgAAAAADAQAPAAAQJwkoBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgAVAEB6RAAASw4MAQoPAA8AAwEPDwAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKHgAeAAMBHhMAABAGARQAAIA/AAA3DgwBCjEAMQADATEUAAAQJQgCAwAvAgAAAAAuAgAAAAAtAgAAAAAwAgAAAAABAwANAQAKAgAAAF0ODAEKRQBFAAMBRRIAABBLECID/////xgCAEUCAAAAQUYCAAAAQUcCAAAAQUgCAAAAQQMCAAQCAAEDAAgDACcCAACgQxQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBClcAVwADAVcWAAAQBgEUAACAPwAAMQ4MAQptAG0AAwFtDwAAEB8FNwIAAABCNQIAAMBBOAIAAAAANgIAAMBBKAIAAMBBAAAcDgwBCnwAfAADAXwQAAAQCgIZAgAWAgAAiEEAACsODAEKjACMAAMBjA8AABAZBDECAADAQTICAADAQRYCAACIQRMDAAAAgAAAFg4MAQqbAJsAAwGbDwAAEAQBAQMAAAAoDgwBCqoAqgADAaoPAAAQFgQCAgAoAgAAYEIXAgAAYEIWAgAAiEEAAEEODAEKuQC5AAMBuRYAABAvBwIDAC0CAAAAAC8CAAAAAC4CAAAAACgCAACAPyIDAAAAGkkBCgEDAACAPwAAAD8AACcODAEKzwDPAAMBzxEAABAVBQECAA4AAIA/EwNXa5X/GQIAAgIAAAAZDgwBCuAA4AADAeAZAAAQBwEiA+zs7P8AAEEODAEK+QD5AAMB+RgAABAvBwIDAC0CAAAAAC8CAACAPycCAACAPzACAAAAACIDAAAAGkkBCgEDAAAAPwAAgD8AABwUEgEQ+xEBAPsRAQAFAfsRASUAABAEAQEBAAAAHxQSARD7NgEA+zYBAAUB+zYBGgAAEAcBEwMAAADmAAAlFBIBEPtQAQD7UAEABQH7UAESAAAQDQIiAx4eHv8TA/////8BACUUEgEQ+2IBAPtiAQAFAftiAQ8AABANAiIDHh4e/xMD////gAEAHxQSARD7cQEA+3EBAAUB+3EBEQAAEAcBEwN9kKn/AQAfFBIBEPuCAQD7ggEABQH7ggEaAAAQBwETA////5kBAB8UEgEQ+5wBAPucAQAFAfucARkAABAHASIDNzc3/wEAMCUjAhD7tQEA+7UBAAUB+7UBFgAAEPvLAQD7ywEABQH7ywEYAAAQBwEiA////w0BAA4BDAAACQEHAAAEAQkCAA==")},81:(e,t,i)=>{i(57).J.push("Aft3Am1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHNhZmUtYXJlYS1pbnNldC1ib3R0b21tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWhlYWRtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLXRpdGxlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1ib2R5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1mb290bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbm1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmVtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19wcmltYXJ5bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX2FjdGl2ZW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0taGVhZG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYm9keW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9ubXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25tcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fYWN0aXZlbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1idXR0b25fX3ByaW1hcnltcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWJ1dHRvbl9fcHJpbWFyeW1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYnV0dG9uX19hY3RpdmX7gwIPPg4MAQoAAAAAAwEAHgAAECwIJgMAOAkBHhYAABgCADMCAADAQTQCAADAQTICAADAQTECAADAQScIAACAPwAAJQ4MAQo0ADQAAwE0GwAAEBMDNwIAAABBLAIAAEBCEwMAAADmAAAcDgwBCk8ATwADAU8cAAAQCgIZAgAWAgAAiEEAAC4ODAEKawBrAAMBaxsAABAcBSYDADECAADAQTICAADAQRYCAACIQRMDAAAA5gAAKw4MAQqGAIYAAwGGGwAAEBkGJgMAAQMAAgIANwIAAMBBFgIAAIhBDQEAAABqDgwBCqEAoQADAaEdAAAQWBEmAwAoAgAAIEInAgAA8EIXAgAAIEJFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAiA/Ly8v8BAgATAwauVv8ZAgACAgAfAgAAgD8YAgA1AgAAAEE2AgAAAEEAABsQDgEMvgC+AAUCvh3bJQAAIAcBIgPm5ub/AAAlFBIBEPsAAQD7AAEABQH7AAEmAAAQDQIiAwfBYP8TA/////8AACMYFgEU+yYBAPsmAQAJAvsmASb7TAElAAAgBwEiAwauVv8AAB8UEgEQ+3EBAPtxAQAFAftxARsAABAHARMD////zAEAHxQSARD7jAEA+4wBAAUB+4wBGwAAEAcBEwP////MAQAlFBIBEPunAQD7pwEABQH7pwEdAAAQDQIiA////xQTA9bW1v8BACMYFgEU+8QBAPvEAQAJAvvEAR374QElAAAgBwEiA////yABACUUEgEQ+wYCAPsGAgAFAfsGAiYAABANAiIDB8Fg/xMD/////wEAIxgWART7LAIA+ywCAAkC+ywCJvtSAiUAACAHASIDBq5WmQEADgEMAAAJAQcAAAQBCQIA")},741:(e,t,i)=>{i(57).J.push("AfsIAW1wLWhhbGYtc2NyZWVuLXBvcHVwLS1yb290bXAtaGFsZi1zY3JlZW4tcG9wdXAtLW1hc2ttcC1oYWxmLXNjcmVlbi1wb3B1cC0tbWFza19faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGFpbmVybXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRhaW5lcl9faW5tcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudG1wLWhhbGYtc2NyZWVuLXBvcHVwLS1jb250ZW50bXAtaGFsZi1zY3JlZW4tcG9wdXAtLWNvbnRlbnRtcC1oYWxmLXNjcmVlbi1wb3B1cC0tY29udGVudPu9AQkwDgwBCgAAAAADAQAaAAAQHgYoBAAAyEInAwAAyEIWAgAAgEEDAgAEAgAVAEB6RAAASw4MAQoaABoAAwEaGgAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAACZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKNAA0AAMBNB4AABAGARQAAIA/AABYDgwBClIAUgADAVIfAAAQRg0CAwBKAwEBAEsCAchMAwEBAE0CAQAnCAAAgD8vCAAAgD8tAgAAAAAuAgAAAABJAQwBAgIAAAAACAAAAAABAwAIAQANAQAAACIODAEKcQBxAAMBcSMAABAQAUkBDAECAgAAAAAIAACAvwAAVQ4MAQqUAJQAAwGUHQAAEEMNJgMAJwMAAMhCIgP/////EwMAAAD/RQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBAgIAOAIAAEDBNAIAAEBBAwIABAIAAAAZDgwBCrEAsQADAbEdAAAQBwEnAwAAyEIBABkODAEKzgDOAAMBzh0AABAHAScEAADIQgEBHw4MAQrrAOsAAwHrHQAAEA0CIgMZGRn/EwP/////AQIoAwwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQkCAA==")},161:(e,t,i)=>{i(57).J.push("AftpBG1wLWhvcml6b25hbC1idWJibGUtLXJvb3RtcC1ob3Jpem9uYWwtYnViYmxlLS1tYXNrbXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWFza19faW5tcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50bXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWJ0bi1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jbG9zZS1idG5fX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVyX19pbm1wLWhvcml6b25hbC1idWJibGUtLW1lbnVtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWJlZm9yZW1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWFmdGVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbG1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtaW1nLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGxfX2hvdmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2VsbC1pbWdtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWRlc2NtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsLWltZy1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jZWxsX19ob3Zlcm1wLWhvcml6b25hbC1idWJibGUtLWNlbGwtZGVzY21wLWhvcml6b25hbC1idWJibGUtLW1lbnUtaW5uZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1tZW51LWlubmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY2xvc2UtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tbWVudS1jb250YWluZXJtcC1ob3Jpem9uYWwtYnViYmxlLS1jb250ZW50LWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLWNsb3NlLWNvbnRhaW5lcm1wLWhvcml6b25hbC1idWJibGUtLW1lbnUtY29udGFpbmVybXAtaG9yaXpvbmFsLWJ1YmJsZS0tY29udGVudC1jb250YWluZXL7WQUeMA4MAQoAAAAAAwEAGQAAEB4GKAQAAMhCJwMAAMhCFgIAAIBBAwIABAIAFQBAekQAAEsODAEKGQAZAAMBGRkAABA5CwIDAC8CAAAAAC4CAAAAAC0CAAAAADACAAAAACIDAAAA2RQAAAAASgMBAgBLAgHITAMBAwBNAgEAAAAYDgwBCjIAMgADATIdAAAQBgEUAACAPwAAIg4MAQpPAE8AAwFPHAAAEBADAQMAKAQAAMhCJwMAAMhCAAA9DgwBCmsAawADAWskAAAQKwcCAgAoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIC/AgAAAAAAACIODAEKjwCPAAMBjygAABAQAUkBDAECCAAAAAACAAAAAAAAbQ4MAQq3ALcAAwG3HgAAEFsRJgMAAgMALQIAAJhCMAIAABRCKAIAAABCJwIAAABCMwIAAIBANAIAAIBAMgIAAIBAMQIAAIBARQIAAIBBRgIAAIBBRwIAAIBBSAIAAIBBAwIABAIAIgM+PD//AAAfDgwBCtUA1QADAdUiAAAQDQIoAgAAwEEnAgAAwEEAABkODAEK9wD3AAMB9yUAABAHASIDNzc3/wAAHxQSARD7HAEA+xwBAAUB+xwBJgAAEAcBKAQAAMhCAABAFBIBEPtCAQD7QgEABQH7QgEjAAAQKAYoBAAAyEJKAwEBAEsCAchMAwEBAE0CAQBJAQwBAggAAIA/AgAAAAAAACgUEgEQ+2UBAPtlAQAFAftlAScAABAQAUkBDAECCAAAAAACAAAAAAAAJRQSARD7jAEA+4wBAAUB+4wBGQAAEA0DKAgAAIA/AQMACAEAAAAeFBIBEPulAQD7pQEABQH7pQEgAAAQBgEOAACAPwAALRQSARD7xQEA+8UBAAUB+8UBHwAAEBUFDgAAAAAoCAAAgD8BAwAIAwANBAAAAB4UEgEQ++QBAPvkAQAFAfvkAR8AABAGAQ4AAEBAAAAcFBIBEPsDAgD7AwIABQH7AwIZAAAQBAECAgAAAF4UEgEQ+xwCAPscAgAFAfscAicAABBGDCYDACcCAABgQigCAABgQjMCAABAQTQCAABAQTICAABAQTECAABAQSID/////0UCAABAQUYCAABAQUcCAABAQUgCAABAQQAALyQiASD7QwIA+0MCAAUB+0MCJwEQ+2oCAPtqAgAFAftqAiAAACAHASID7Ozs/wAAJRQSARD7igIA+4oCAAUB+4oCHQAAEA0CJwIAAABCKAIAAABCAAA0FBIBEPunAgD7pwIABQH7pwIeAAAQHAUWAgAAIEETA////4AYAgA3AgAAAEEoAgAAYEEAAB8UEgEQ+8UCAPvFAgAFAfvFAicAABAHASIDHx8f/wAALyQiASD77AIA++wCAAUB++wCJwEQ+xMDAPsTAwAFAfsTAyAAACAHASIDNzc3/wAAHxQSARD7MwMA+zMDAAUB+zMDHgAAEAcBEwP///+AAAAoFBIBEPtRAwD7UQMABQH7UQMfAAAQEAMmAwAzAgAAiEI0AgAAwEEBACgUEgEQ+3ADAPtwAwAFAftwAx8AABAQAyYDADMCAAAwQjQCAADAQQEBNSUjAhD7jwMA+48DAAUB+48DJAAAEPuzAwD7swMABQH7swMjAAAQDAIOAACAPxACAAAAAAECHxQSARD71gMA+9YDAAUB+9YDJgAAEAcBJwIAAK9DAQI1JSMCEPv8AwD7/AMABQH7/AMkAAAQ+yAEAPsgBAAFAfsgBCMAABAMAicCAAAeQw4AAAAAAQMkFBIBEPtDBAD7QwQABQH7QwQmAAAQDAIOAACAPxACAAAAAAEDPQQOAAALAQkAAAYBBwAAr0MOAAALAQkAAAYBCAAAr0MOAAALAQkAAAYBBADAJkQOAAALAQkAAAYBBQDAJkQ=")},521:(e,t,i)=>{i(57).J.push("AUhhZC1za2lwLWNhcmQtLXJvb3RhZC1za2lwLWNhcmQtLWljb25hZC1za2lwLWNhcmQtLXRpdGxlYWQtc2tpcC1jYXJkLS1zdWK1BDYODAEKAAAAAAMBABIAABAkCCgEAADIQicDAADIQgEDAAgDAAoCAA0BACIDAAAAmRUAQHpEAAAlDgwBChIAEgADARISAAAQEwMnAgCAu0MoAgAAcEM4AgAAwEEAACgODAEKJAAkAAMBJBMAABAWBBMD/////xYCAACIQTgCAAAAQRgCAAAALQ4MAQo3ADcAAwE3EQAAEBsFFM3MTD8TA/////8WAgAAYEE4AgAAwEAYAgAAAAEA")},431:(e,t,i)=>{i(57).J.push("AftzAWF1dGhvcml6ZS0tcm9vdGF1dGhvcml6ZS0tbWFza2F1dGhvcml6ZS0tbWFzay1pbmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS1jb250ZW50LWluYXV0aG9yaXplLS1oZWFkYXV0aG9yaXplLS1pY29uYXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYm9keWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tYnV0dG9uc2F1dGhvcml6ZS0tYnV0dG9uYXV0aG9yaXplLS1jYW5jZWxhdXRob3JpemUtLWNvbmZpcm1hdXRob3JpemUtLWNvbnRhaW5lcmF1dGhvcml6ZS0tY29udGFpbmVyYXV0aG9yaXplLS1jb250ZW50YXV0aG9yaXplLS10aXRsZWF1dGhvcml6ZS0tYXBwbHktaW5mb2F1dGhvcml6ZS0tY2FuY2Vs++4DFTkODAEKAAAAAAMBAA8AABAnCSgEAADIQicDAADIQgEDABYCAACAQQMCAAQCAAgDAAoCABUAQHpEAAA8DgwBCg8ADwADAQ8PAAAQKggnCAAAgD8oCAAAgD8iAwAAAP8UAAAAAEoDAQIASwIByEwDAQEATQIBAAAAGA4MAQoeAB4AAwEeEgAAEAYBFM3MzD4AAD0ODAEKMAAwAAMBMBQAABArBwMCAAQCACgIAACAPwIDAC0IAAAAPzACAABAwUkBDAECCAAAAL8CAAAAAAAAfA4MAQpEAEQAAwFEEgAAEGoUAQMACAMASgMBAQBLAgHITAMBAQBNAgEAMwIAAAAANAIAAAAAMgIAAMBBMQIAAMBBJwgAAIA/KAIAAHpDRQIAAEBBRgIAAEBBRwIAAEBBSAIAAEBBIgP/////AgMALwgAAIA/LQIAAAAAAAAiDgwBClYAVgADAVYVAAAQEAFJAQwBAgIAAAAACAAAgL8AAB8ODAEKawBrAAMBaw8AABANAygCAACAQgEDAAoCAAAAHw4MAQp6AHoAAwF6DwAAEA0CJwIAAMBBKAIAAMBBAAA+DgwBCokAiQADAYkQAAAQLAg1AgAAAEEUZmZmPxMDAAAA/xYCAABwQRkCACgCAACoQRcCAACoQQ4AAIA/AAAhDgwBCpkAmQADAZkPAAAQDwMOAACAPwgDADcCAACAQAAAMw4MAQqoAKgAAwGoFQAAECEGFGZmZj8WAgAAiEETAwAAAP8ZAgAoAmZmvkEXAmZmvkEAAEAODAEKvQC9AAMBvRIAABAuCicIAACAPygCAAAgQgIDADACAACcQi0CAAAAABYCAACIQRkCAAEDAAgBAA0BAAAAWA4MAQrPAM8AAwHPEQAAEEYMJwIAAPBCKAIAACBCFwIAACBCGAIANwIAAAAAOAIAAAAANgIAAABBNQIAAABBRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAfDgwBCuAA4AADAeARAAAQDQIiA/Ly8v8TAwfBYP8AAB8ODAEK8QDxAAMB8RIAABANAiIDBMFg/xMD/////wAAHxQSARD7AwEA+wMBAAUB+wMBFAAAEAcBJwMAAMhCAQAfFBIBEPsXAQD7FwEABQH7FwEUAAAQBwEnBAAAyEIBAR8UEgEQ+ysBAPsrAQAFAfsrARIAABAHASIDLCws/wECJBQSARD7PQEA+z0BAAUB+z0BEAAAEAwCFM3MTD8TA/////8BAiQUEgEQ+00BAPtNAQAFAftNARUAABAMAhTNzEw/EwP/////AQIlFBIBEPtiAQD7YgEABQH7YgERAAAQDQIiA////xQTA/////8BAigDDAAACQEHAAAEAQIBAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBCQIA")},970:(e,t,i)=>{i(57).J.push("AS5nYW1lLWdyYW50LWluZm8tLXNjcm9sbGdhbWUtZ3JhbnQtaW5mby0tc2Nyb2xsWQIxDgwBCgAAAAADAQAXAAAQHwcBAwAIAwAZAQAWAgAAYEEYAQA3AgAAyEE4AgAAIEIAACUODAEKFwAXAAMBFxcAABATBDgCAACgQQMDAAQDACgCAADwQgEADgEMAAAJAQcAAAQBAgIA")},78:(e,t,i)=>{i(57).J.push("AftcAWdhbWUtcmFua2xpc3QtLXJvb3RnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tbGluZWdhbWUtcmFua2xpc3QtLWhlYWRnYW1lLXJhbmtsaXN0LS1jbG9zZWdhbWUtcmFua2xpc3QtLXRpdGxlZ2FtZS1yYW5rbGlzdC0tYm9keWdhbWUtcmFua2xpc3QtLWl0ZW1nYW1lLXJhbmtsaXN0LS1pY29uZ2FtZS1yYW5rbGlzdC0tbmFtZWdhbWUtcmFua2xpc3QtLXNjb3JlZ2FtZS1yYW5rbGlzdC0tYnV0dG9uc2dhbWUtcmFua2xpc3QtLWJ1dHRvbmdhbWUtcmFua2xpc3QtLWJ0bi1pY29uZ2FtZS1yYW5rbGlzdC0tZGlzYWJsZWRnYW1lLXJhbmtsaXN0LS1jb250ZW50Z2FtZS1yYW5rbGlzdC0tY29udGVudPtbAxFODgwBCgAAAAADAQATAAAQPA0oBAAAyEInAwAAyEIBAwAWAgAAgEEDAgAEAgAIAwAKAgANBQAVAEB6RCcIAACAPygIAACAPyIDAAAAgAAAMQ4MAQoTABMAAwETFgAAEB8FRQIAAIBARgIAAIBARwIAAIBASAIAAIBAIgP/////AAAfDgwBCikAKQADASkTAAAQDQIoAgAAgD8iAwAAAA0AADoODAEKPAA8AAMBPBMAABAoCCgCAAA0QgEDAAoCAA0EADMCAAAAADQCAAAAADICAACgQTECAACgQQAAJA4MAQpPAE8AAwFPFAAAEBIDJwIAAIBBKAIAAIBBFAAAAD8AADcODAEKYwBjAAMBYxQAABAlBxMDAAAA5hYCAABgQRkCACgCAACgQRcCAACgQScIzcxMPxgCAAAAKw4MAQp3AHcAAwF3EwAAEBkEMwIAAAAANAIAAAAAMgIAAIBBMQIAAIBBAAAiDgwBCooAigADAYoTAAAQEAQoAgAAjEIBAwAIAQAKAgAAADcODAEKnQCdAAMBnRMAABAlBicCAAAgQigCAAAgQkUCAACAQEYCAACAQEcCAACAQEgCAACAQAAAVQ4MAQqwALAAAwGwEwAAEEMNJwgAAAA/NwIAAAAAOAIAAAAANgIAAEBBNQIAAEBBFgIAAIhBKAIAAMBBFwIAAMBBAwIABAIAGwIAHAIAEwMAAADmAAAzDgwBCsMAwwADAcMUAAAQIQYOAACAPxYCAABgQSgCAACgQRcCAACgQRMDAAAAgBgDAAAAQw4MAQrXANcAAwHXFgAAEDEKKAIAADBCAQMACAEACgIADQUAIgP39/f/MwIAAAAANAIAAAAAMgjNzEw+MQjNzEw+AABGDgwBCu0A7QADAe0VAAAQNAonAgAAwEEoAgAAwEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEBAwAKAgANAQAiA+rq6v8AACUUEgEQ+wIBAPsCAQAFAfsCARcAABANAicCAADAQCgCAABAQQAAHhQSARD7GQEA+xkBAAUB+xkBFwAAEAYBFAAAAD8AAB8UEgEQ+zABAPswAQAFAfswARYAABAHAScDAACqQgEAHxQSARD7RgEA+0YBAAUB+0YBFgAAEAcBJwQAAKpCAQEbAgwAAAkBBwAABAECAQAMAAAJAQcAAAQBAgIA")},426:(e,t,i)=>{i(57).J.push("AfuuAXNoYXJlLWltYWdlLS1tYXNrc2hhcmUtaW1hZ2UtLW1hc2tfX2luc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcnNoYXJlLWltYWdlLS1sYW5kc2NhcGUtY29udGFpbmVyc2hhcmUtaW1hZ2UtLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tbGFuZHNjYXBlLWNvbnRhaW5lcl9faW5zaGFyZS1pbWFnZS0tY29udGFpbmVyc2FmZS1hcmVhLWluc2V0LWxlZnRzYWZlLWFyZWEtaW5zZXQtYm90dG9tc2FmZS1hcmVhLWluc2V0LXJpZ2h0c2hhcmUtaW1hZ2UtLWxhbmRzY2FwZS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXItY29udGFpbmVyc2hhcmUtaW1hZ2UtLXNjcm9sbGVyc2hhcmUtaW1hZ2UtLWltZ3NoYXJlLWltYWdlLS1pbWctd3JhcHBlcnNoYXJlLWltYWdlLS1jb250YWluZXJzaGFyZS1pbWFnZS0tc2Nyb2xsZXJzaGFyZS1pbWFnZS0taW1nLXdyYXBwZXL70gINSw4MAQoAAAAAAwEAEQAAEDkLAgMALwIAAAAALgIAAAAALQIAAAAAMAIAAAAAIgMAAADZFAAAAABKAwECAEsCAchMAwEDAE0CAQAAABgODAEKEQARAAMBERUAABAGARQAAIA/AAA+GRcCCiYAJgADASYWAAAKPAA8AAMBPCAAABAhCBQAAAAASgMBAgBLAgHITAMBAwBNAgEAAQMACAEADQEAAAAjGRcCClwAXAADAVwaAAAKdgB2AAMBdiQAABAGARQAAIA/AAA6DgwBCpoAmgADAZoWAAAQKAcmAwACAwAvAgAAAAAtCQGwFAAAMAkBxBYAAC4JAdoVAAA0AgAAQkMAAB8ODAEK7wDvAAMB7yAAABANAicIAACAPygIAACAPwAAWBQSARD7DwEA+w8BAAUB+w8BHwAAEEAMJwgAAIA/MwIAAAAANAIAAAAAMgIAAAAAMQIAAAAANwIAAAAAOAIAAAAANgIAAAAANQIAAAAAAQMACAMADQEAAABVFBIBEPsuAQD7LgEABQH7LgEVAAAQPQonCAAAgD8sCAAAgD8zAgAAAAA0AgAAAAAyAgAAAAAxAgAAAAA3AgAAAAA4AgAAAAA2AgAAAAA1AgAAAAAAADcUEgEQ+0MBAPtDAQAFAftDARAAABAfBkUCAABAQUYCAABAQUcCAABAQUgCAABAQQMCAAQCAAAAPxQSARD7UwEA+1MBAAUB+1MBGAAAECcHJgMAMwIAADBCNAIAAABCMQIAAABCMgIAAABCJwgAAIA/DwAAAAAAACUUEgEQ+2sBAPtrAQAFAftrARYAABANAjQCAAAAADACAAAAAAEAJRQSARD7gQEA+4EBAAUB+4EBFQAAEA0CJwgAAIA/LAQAAMhCAQA6FBIBEPuWAQD7lgEABQH7lgEYAAAQIgYmAwAzAgAAwEE0AgAAwEExAgAAAAAyAgAAAAAnCAAAgD8BAA4BDAAACQEHAAAEAQICAA==")},13:(e,t,i)=>{i(57).J.push("ATN0b2FzdC0tcm9vdHRvYXN0LS1jb250ZW50dG9hc3QtLWxvYWRpbmd0b2FzdC0tdGl0bGXLBCgODAEKAAAAAAMBAAsAABAWBScDAADIQigEAADIQgEDAAoCAA0BAAAAVQ4MAQoLAAsAAwELDgAAEEMMKAIAADBCMwIAAAAANAIAAAAAMgIAAKBBMQIAAKBBRQIAAABBRgIAAABBRwIAAABBSAIAAABBIgNMTEz/CgIAAQMAAAAlDgwBChkAGQADARkOAAAQEwMnAgAAgEEoAgAAgEE2AgAAgEAAACQODAEKJwAnAAMBJwwAABASAxRmZmY/FgIAAGBBEwP/////AAABAA==")},295:(e,t,i)=>{i(57).J.push("Aat1c2UtY291cG9uLW1vZGFsLS1yb290bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1ib2R5dXNlLWNvdXBvbi1tb2RhbC0tcm9vdG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHVzZS1jb3Vwb24tbW9kYWwtLXJvb3R1c2UtY291cG9uLW1vZGFsLS1zY3JvbGx1c2UtY291cG9uLW1vZGFsLS1zY3JvbGzWBRYODAEKAAAAAAMBABYAABAEAQIDAAAANRgWARQWABYAAwEWGwEKMQAxAAMBMRYAACAZBDMCAAAAADQCAAAAADICAAAAADECAAAAAAAANRgWARRHAEcAAwFHHgEKZQBlAAMBZRYAACAZBDMCAAAAADQCAAAAADICAAAAADECAAAAAAAANw4MAQp7AHsAAwF7GAAAECUHAwMABAMAKAIAAMhDMwIAAIBBNAIAAIBBMgIAAIBBMQIAAIBBAAAZDgwBCpMAkwADAZMYAAAQBwEoAgAAekMBAA4BDAAACQEHAAAEAQICAA==")},164:(e,t,i)=>{i(57).J.push("AftGBHVzZXItcHJvZmlsZS0tcm9vdHVzZXItcHJvZmlsZS0taGlkZXVzZXItcHJvZmlsZS0tbWFza3VzZXItcHJvZmlsZS0tbWFzay1pbnVzZXItcHJvZmlsZS0tY29udGFpbmVydXNlci1wcm9maWxlLS1jb250ZW50dXNlci1wcm9maWxlLS1jb250ZW50LWludXNlci1wcm9maWxlLS1oZWFkdXNlci1wcm9maWxlLS1ib2R5dXNlci1wcm9maWxlLS1idXR0b25zdXNlci1wcm9maWxlLS1pY29udXNlci1wcm9maWxlLS10aXRsZXVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tc3BsaXQtbGluZXVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZHVzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fcGx1c3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0taW5mby1pdGVtdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2xlZnR1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fYXZhdGFydXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX2Rlc2NfX3dycHVzZXItcHJvZmlsZS0taW5mby1pdGVtX19uaWNrbmFtZXVzZXItcHJvZmlsZS0taW5mby1pdGVtX19kZXNjdXNlci1wcm9maWxlLS1pbmZvLWl0ZW1fX3JpZ2h0dXNlci1wcm9maWxlLS1pY29uLWNoZWNrZWR1c2VyLXByb2ZpbGUtLWV4Y2VlZC10aXB1c2VyLXByb2ZpbGUtLXVzZS1vdGhlci1hdmF0YXJ1c2VyLXByb2ZpbGUtLWJ1dHRvbnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1jb25maXJtdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1jb250YWluZXJ1c2VyLXByb2ZpbGUtLWNvbnRhaW5lcnVzZXItcHJvZmlsZS0taGVhZHVzZXItcHJvZmlsZS0tYnV0dG9uc3VzZXItcHJvZmlsZS0tY29udGVudHVzZXItcHJvZmlsZS0tdGl0bGV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fbmlja25hbWV1c2VyLXByb2ZpbGUtLWluZm8taXRlbV9fZGVzY3VzZXItcHJvZmlsZS0taW5mby1pdGVtLWFkZF9fdGV4dHVzZXItcHJvZmlsZS0tYXBwbHktaW5mb3VzZXItcHJvZmlsZS0tdXNlLW90aGVyLWF2YXRhcnVzZXItcHJvZmlsZS0tY2FuY2VsdXNlci1wcm9maWxlLS1leGNlZWQtdGlwdXNlci1wcm9maWxlLS1zcGxpdC1saW5l+0kILTkODAEKAAAAAAMBABIAABAnCSgEAADIQicDAADIQgEDABYCAABgQQMCAAQCAAgDAAoCABUAQHpEAAAZDgwBChIAEgADARISAAAQBwEoAgAAAAAAADwODAEKJAAkAAMBJBIAABAqCCcIAACAPygIAACAPyIDAAAA/xQAAAAASgMBAgBLAgHITAMBAQBNAgEAAAAYDgwBCjYANgADATYVAAAQBgEUAAAAPwAAPQ4MAQpLAEsAAwFLFwAAECsHAwIABAIAKAgAAIA/AgMALQgAAAA/MAIAAEDBSQEMAQIIAAAAvwIAAAAAAAB/DgwBCmIAYgADAWIVAAAQbRUBAwAnCAAAgD8mAwAzAgAAAAA0AgAAAAAyAgAAwEExAgAAwEEIAwBKAwEBAEsCAchMAwEBAE0CAQA0AgAAQEFFAgAAQEFGAgAAQEFHAgAAQEFIAgAAQEEiA/////8CAwAvCAAAgD8tAgAAAAAAACIODAEKdwB3AAMBdxgAABAQAUkBDAECAgAAAAAIAACAvwAAKw4MAQqPAI8AAwGPEgAAEBkFNwIAAABCOAIAAIBBKAIAAMBBAQMACgIAAAAhDgwBCqEAoQADAaESAAAQDwMOAACAPwgDADQCAABCQwAARg4MAQqzALMAAwGzFQAAEDQLNQIAAMBBJwgAAIA/KAIAACBCAgMAMAIAAMRCLQIAAAAAFgIAAIhBGQIAAQMACAEADQEAAAA3DgwBCsgAyAADAcgSAAAQJQYnAgAAwEEoAgAAwEFFCAAAAD9GCAAAAD9HCAAAAD9ICAAAAD8AAD4ODAEK2gDaAAMB2hMAABAsCDUCAAAgQRRmZmY/EwMAAAD/FgIAAHBBGQIAKAIAAKhBFwIAAKhBDgAAgD8AAEUODAEK7QDtAAMB7RgAABAzCScIAACAPygCAABAQhRmZmY/FgIAAIhBEwMAAAD/GQIAFwJmZr5BNwIAAABBOAIAAIBBAAArFBIBEPsFAQD7BQEABQH7BQEYAAAQEwMnCAAAgD8oAgAAgD8iAwAAAA0AACUUEgEQ+x0BAPsdAQAFAfsdARsAABANAygCAACAQgEDAAoCAAAAMRQSARD7OAEA+zgBAAUB+zgBIQAAEBkEJwIAAMBBKAIAAMBBNQIAAABBNgIAAIBBAAA2FBIBEPtZAQD7WQEABQH7WQEhAAAQHgUOAACAPygCAADAQRcCAADAQRYCAACIQRMDAAAA5gAAKBQSARD7egEA+3oBAAUB+3oBFwAAEBAEKAIAAIBCAQMACgIADQQAAAAqFBIBEPuRAQD7kQEABQH7kQEdAAAQEgQoCAAAgD8BAwAKAgAOAACAPwAARhQSARD7rgEA+64BAAUB+64BHwAAEC4IAQUANgIAAABBJwIAACBCKAIAACBCRQIAAIBARgIAAIBARwIAAIBASAIAAIBAAAAtFBIBEPvNAQD7zQEABQH7zQEiAAAQFQUBAwAoCAAAgD8IAwANAQAOAACAPwAAMRQSARD77wEA++8BAAUB++8BIQAAEBkEKAIAAMBBFwIAAMBBEwMAAADmFgIAAIhBAAA8FBIBEPsQAgD7EAIABQH7EAIdAAAQJAY3AgAAAEAoAgAAoEEXAgAAoEEWAgAAYEETAwAAAP8UmpmZPgAAOhQSARD7LQIA+y0CAAUB+y0CHgAAECIIJwIAAMBBKAIAAMBBAwIABAIANgIAAABBAQMACgIADQEAAAAlFBIBEPtLAgD7SwIABQH7SwIaAAAQDQInAgAAwEEoAgAAwEEAAD0UEgEQ+2UCAPtlAgAFAftlAhgAABAlBicIAACAPygCAACgQRcCAACgQTcCAAAAQRYCAABgQRMDAAAATQAAPRQSARD7fQIA+30CAAUB+30CHgAAECUGJwgAAIA/KAIAAKBBFwIAAKBBNwIAAABBFgIAAGBBEwNZa5X/AABeFBIBEPubAgD7mwIABQH7mwIUAAAQRgwnAgAA8EIoAgAAIEIXAgAAIEIYAgA3AgAAAAA4AgAAAAA2AgAAAEE1AgAAAEFFAgAAgEBGAgAAgEBHAgAAgEBIAgAAgEAAACUUEgEQ+68CAPuvAgAFAfuvAhQAABANAiIDAAAADRMDB8Fg/wAAJRQSARD7wwIA+8MCAAUB+8MCFQAAEA0CIgMHwWD/EwP/////AAAfFBIBEPvYAgD72AIABQH72AIYAAAQBwETAwAAAE0AAB8UEgEQ+/ACAPvwAgAFAfvwAhcAABAHAScDAADIQgEAHxQSARD7BwMA+wcDAAUB+wcDFwAAEAcBJwQAAMhCAQEfFBIBEPseAwD7HgMABQH7HgMSAAAQBwE3AgAAwEEBAR8UEgEQ+zADAPswAwAFAfswAxUAABAHATACAABUQgEBHxQSARD7RQMA+0UDAAUB+0UDFQAAEAcBIgMeHh7/AQIkFBIBEPtaAwD7WgMABQH7WgMTAAAQDAIUzcxMPxMD/////wECHxQSARD7bQMA+20DAAUB+20DIQAAEAcBEwP////MAQIfFBIBEPuOAwD7jgMABQH7jgMdAAAQBwETA////00BAh8UEgEQ+6sDAPurAwAFAfurAyEAABAHARMD////zAECJBQSARD7zAMA+8wDAAUB+8wDGAAAEAwCFM3MTD8TA/////8BAh8UEgEQ++QDAPvkAwAFAfvkAx4AABAHARMDfZCp/wECJRQSARD7AgQA+wIEAAUB+wIEFAAAEA0CIgP///8UEwP/////AQIfFBIBEPsWBAD7FgQABQH7FgQYAAAQBwETA////00BAh8UEgEQ+y4EAPsuBAAFAfsuBBgAABAHASID////DQECKAMMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAAwAAAkBBwAABAEJAgA=")},297:(e,t,i)=>{i(57).J.push("AfuHCm1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHZlcmlmeS1tb2RhbC0tcm9vdG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHZlcmlmeS1tb2RhbC0tcm9vdG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tYm9keXZlcmlmeS1tb2RhbC0tcm9vdG1wLWhhbGYtc2NyZWVuLWRpYWxvZy0tY29udGVudHZlcmlmeS1tb2RhbC0tcm9vdHZlcmlmeS1tb2RhbC0taW5kZXhtcC1oYWxmLXNjcmVlbi1kaWFsb2ctLWNvbnRlbnR2ZXJpZnktbW9kYWwtLXJvb3R2ZXJpZnktbW9kYWwtLWluZGV4bXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1zdWNjbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1zdWNjbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1mYWlsbXAtaGFsZi1zY3JlZW4tZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1mYWlsbXAtZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290bXAtZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1yb290bXAtZGlhbG9nLS1oZWFkdmVyaWZ5LW1vZGFsLS1yb290bXAtZGlhbG9nLS1idXR0b25fX2RlZmF1bHR2ZXJpZnktbW9kYWwtLXJvb3RtcC1kaWFsb2ctLWZvb3R2ZXJpZnktbW9kYWwtLWRpYWxvZy1jb250YWluZXJtcC1kaWFsb2ctLWZvb3RfX2FmdGVydmVyaWZ5LW1vZGFsLS1kaWFsb2ctY29udGFpbmVybXAtZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1kaWFsb2ctY29udGFpbmVybXAtZGlhbG9nLS1jb250ZW50dmVyaWZ5LW1vZGFsLS1kaWFsb2ctY29udGFpbmVybXAtZGlhbG9nLS1oZWFkdmVyaWZ5LW1vZGFsLS1kaWFsb2ctY29udGFpbmVybXAtZGlhbG9nLS1mb290dmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1oZWxwdmVyaWZ5LW1vZGFsLS1yb290dmVyaWZ5LW1vZGFsLS1tb2RhbHZlcmlmeS1tb2RhbC0tbW9kYWwtdGl0bGV2ZXJpZnktbW9kYWwtLW1vZGFsLWNvbnRlbnR2ZXJpZnktbW9kYWwtLW1vZGFsLS1idXR0b252ZXJpZnktbW9kYWwtLWFuaW1hdGlvbnZlcmlmeS1tb2RhbC0tYW5pbWF0aW9uLWludmVyaWZ5LW1vZGFsLS1tYXNrdmVyaWZ5LW1vZGFsLS1tYXNrLWludmVyaWZ5LW1vZGFsLS1pbml0dmVyaWZ5LW1vZGFsLS1jb250YWluZXJ2ZXJpZnktbW9kYWwtLWRpYWxvZy1jb250YWluZXJ2ZXJpZnktbW9kYWwtY29udGVudC0tcm9vdHZlcmlmeS1tb2RhbC1jb250ZW50LS1jb250ZW50dmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWZvcm12ZXJpZnktbW9kYWwtY29udGVudC0tZm9ybXZlcmlmeS1tb2RhbC1jb250ZW50LS1mb3JtLW1pZHZlcmlmeS1tb2RhbC1jb250ZW50LS1mb3JtLXJvd3ZlcmlmeS1tb2RhbC1jb250ZW50LS1mb3JtLXJvdy1taWR2ZXJpZnktbW9kYWwtY29udGVudC0tZm9ybS1pY29udmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWZvcm0taW5wdXR2ZXJpZnktbW9kYWwtY29udGVudC0tZm9ybS1pbnB1dHZlcmlmeS1tb2RhbC1jb250ZW50LS1mb3JtLWNvbnRlbnR2ZXJpZnktbW9kYWwtY29udGVudC0tYWN0aW9udmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWJ1dHRvbnZlcmlmeS1tb2RhbC1jb250ZW50LS1idXR0b252ZXJpZnktbW9kYWwtY29udGVudC0taGFsZnZlcmlmeS1tb2RhbC1jb250ZW50LS1jYW5jZWx2ZXJpZnktbW9kYWwtY29udGVudC0tY2FuY2VsdmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWhhbGZ2ZXJpZnktbW9kYWwtY29udGVudC0tY29uZmlybXZlcmlmeS1tb2RhbC1jb250ZW50LS1jb25maXJtdmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWhhbGZ2ZXJpZnktbW9kYWwtY29udGVudC0tc2Nyb2xsdmVyaWZ5LW1vZGFsLWNvbnRlbnQtLXNjcm9sbHZlcmlmeS1tb2RhbC1jb250ZW50LS1ib2xkdmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWxpbmV2ZXJpZnktbW9kYWwtY29udGVudC0tZmFpbHZlcmlmeS1tb2RhbC1jb250ZW50LS1mYWlsdmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWZhaWwtaWNvbnZlcmlmeS1tb2RhbC1jb250ZW50LS1mYWlsLWljb252ZXJpZnktbW9kYWwtY29udGVudC0tZmFpbC10ZXh0dmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWZhaWwtdGV4dHZlcmlmeS1tb2RhbC1jb250ZW50LS1mYWlsLXRpdGxldmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWZhaWwtYnV0dG9udmVyaWZ5LW1vZGFsLWNvbnRlbnQtLWJ1dHRvbnZlcmlmeS1tb2RhbC1jb250ZW50LS1zdWNjLWJ1dHRvbnZlcmlmeS1tb2RhbC0tdGl0bGV2ZXJpZnktbW9kYWwtLXRpdGxlLWhhbGZ2ZXJpZnktbW9kYWwtLXRpdGxlLWhhbGYtaGVscHZlcmlmeS1tb2RhbC0tdGl0bGUtaGFsZi1oZWxwLWljb252ZXJpZnktbW9kYWwtLXRpdGxlLWhlbHAtaWNvbnZlcmlmeS1tb2RhbC0tdGl0bGUtYmFydmVyaWZ5LW1vZGFsLS1xdWVzdGlvbnZlcmlmeS1tb2RhbC0tcXVlc3Rpb24tbWlkdmVyaWZ5LW1vZGFsLS1xdWVzdGlvbi1taWQtaWNvbnZlcmlmeS1tb2RhbC0tbG9nb3ZlcmlmeS1tb2RhbC0tbG9nb3ZlcmlmeS1tb2RhbC0tbG9nb3ZlcmlmeS1tb2RhbC0tbG9nb3ZlcmlmeS1tb2RhbC0tbG9nb3ZlcmlmeS1tb2RhbC0tZ3JlZXR2ZXJpZnktbW9kYWwtLWZvb3RlcnZlcmlmeS1tb2RhbC0tYnV0dG9udmVyaWZ5LW1vZGFsLS1jYW5jZWx2ZXJpZnktbW9kYWwtLWNvbmZpcm373g9SJhgWARQAAAAAAwEAHgEKHgAeAAMBHhIAACAKAhgBADMCAAAAAAAAKRgWARQwADAAAwEwHgEKTgBOAAMBThIAACANAjgCAAAAADQCAAAAAAEANRgWARRgAGAAAwFgGwEKewB7AAMBexIAACAZBDMCAAAAADQCAAAAADICAAAAADECAAAAAAAAJRoYARaNAI0AAwGNHgEMqwCrAAUCqxK9EwAAMAcBNAIAAIBCAAAnHBoBGNAA0AADAdAeAQ7uAO4ABwLuEvsAARMAADAHATQCAACAQQEBMygmAST7EwEA+xMBAAUB+xMBHgEU+zEBAPsxAQAJAvsxARL7QwESAAAwBwE0AgAAgEIAADMoJgEk+1UBAPtVAQAFAftVAR4BFPtzAQD7cwEACQL7cwES+4UBEgAAMAcBNAIAAIBBAQIzKCYBJPuXAQD7lwEABQH7lwEeART7tQEA+7UBAAkC+7UBEvvHARIAADAHATQCAACAQgAAMygmAST72QEA+9kBAAUB+9kBHgEU+/cBAPv3AQAJAvv3ARL7CQISAAAwBwE0AgAAgEEBA0EkIgEg+xsCAPsbAgAFAfsbAhIBEPstAgD7LQIABQH7LQISAAAgGQYCAgABAwAIAwANBQAnCGZmZj8oAgAAEEMAAC8kIgEg+z8CAPs/AgAFAfs/AhIBEPtRAgD7UQIABQH7UQISAAAgBwEnAgAAoEMBBEckIgEg+2MCAPtjAgAFAftjAg8BEPtyAgD7cgIABQH7cgISAAAgHwU3AgAAAAA4AgAAAAA2AgAAAAA1AgAAAAAoAgAAQEIAADIkIgEg+4QCAPuEAgAFAfuEAhoBEPueAgD7ngIABQH7ngISAAAgCgITA1drlf8ZAgAAAC8kIgEg+7ACAPuwAgAFAfuwAg8BEPu/AgD7vwIABQH7vwIeAAAgBwEoAgAAyEIAAC8kIgEg+90CAPvdAgAFAfvdAhYBEPvzAgD78wIABQH78wIeAAAgBwEoAgAAAAAAADUkIgEg+xEDAPsRAwAFAfsRAxIBEPsjAwD7IwMABQH7IwMeAAAgDQMnCGZmZj8oAQABAgAAADUkIgEg+0EDAPtBAwAFAftBAxIBEPtTAwD7UwMABQH7UwMeAAAgDQIoAgAAjEMnCM3MTD8BBUckIgEg+3EDAPtxAwAFAftxAw8BEPuAAwD7gAMABQH7gAMeAAAgHwU3AgAAAAA4AgAAAAA2AgAAAAA1AgAAAAAoAgAAQEIAADMoJgEk+54DAPueAwAFAfueAw8BFPutAwD7rQMACQL7rQMS+78DEgAAMAcBKAIAAAAAAAAlFBIBEPvRAwD70QMABQH70QMSAAAQDQIoBAAAyEInAwAAyEIAACEUEgEQ++MDAPvjAwAFAfvjAxMAABAJAgIDABUAIPpEAABFFBIBEPv2AwD79gMABQH79gMZAAAQLQoVAEB6RBYCAACIQRcCAADAQRgCABMDAAAA/xkCAAEDAA0BAAoCACgCAACAQgAANBQSARD7DwQA+w8EAAUB+w8EGwAAEBwFFgIAAIhBFwIAAMBBNwIAAIBBJgMAEwMAAACAAAAuFBIBEPsqBAD7KgQABQH7KgQbAAAQFgQTA1drlf8ZAgAWAgAAiEEXAgAAwEEAAC0UEgEQ+0UEAPtFBAAFAftFBBcAABAVBEoDAQEASwQB+ywBTAMBBABNAgEAAAA8FBIBEPtcBAD7XAQABQH7XAQaAAAQJAVKAwEBAEsEAfssAUwDAQQATQIBAEkBDAECAgAAAAACAAAAAAAANhQSARD7dgQA+3YEAAUB+3YEEgAAEB4GSgMBAgBLAgHITAMBAwBNAgEAIgMAAACZFAAAAAAAAB4UEgEQ+4gEAPuIBAAFAfuIBBUAABAGARQAAIA/AAAoFBIBEPudBAD7nQQABQH7nQQSAAAQEAFJAQwBAgIAAAAACAAAgD8AACsUEgEQ+68EAPuvBAAFAfuvBBcAABATBEoDAQEASwIB+kwDAQQATQIBAAAAHBQSARD7xgQA+8YEAAUB+8YEHgAAEAQBAgIAAAAxFBIBEPvkBAD75AQABQH75AQaAAAQGQUoCAAAgD8nCAAAgD83AgAAgEEBAwAIAwAAADoUEgEQ+/4EAPv+BAAFAfv+BB0AABAiBwEDAAgDABYCAABgQRcCAACgQRMDAAAA5hgBADQCAACAQAAAJRQSARD7GwUA+xsFAAUB+xsFGgAAEA0DAQMACAMANAIAAABCAAAfFBIBEPs1BQD7NQUABQH7NQUaAAAQBwE0AgAAgEEBBiIUEgEQ+08FAPtPBQAFAftPBR4AABAKAggBADQCAADAQAEGJRQSARD7bQUA+20FAAUB+20FHgAAEA0DAQMACgIANwIAAEBBAAAfFBIBEPuLBQD7iwUABQH7iwUiAAAQBwE2AgAAwEEBByUUEgEQ+60FAPutBQAFAfutBR8AABANAicCAADAQSgCAADAQQAAahQSARD7zAUA+8wFAAUB+8wFIAAAEFIPNQIAAGBBMQIAAEBBAQMACgIAGAIAJwMAAJZCKAIAACBCIgP39/f/RQIAAIBARgIAAIBARwIAAIBASAIAAIBAFgIAAGBBFwIAAKBBEwMAAACAAAAfFBIBEPvsBQD77AUABQH77AUgAAAQBwEnAwAA8EEBCB8UEgEQ+wwGAPsMBgAFAfsMBiIAABAHARMDAAAA5gAAIhQSARD7LgYA+y4GAAUB+y4GHAAAEAoDAQMACAEADQEAAABkFBIBEPtKBgD7SgYABQH7SgYcAAAQTA8mAwABAwANAQAKAgAYAgBFAgAAgEFGAgAAgEFHAgAAgEFIAgAAgEEnAgAAcEIoAgAA8EE3AgAAoEA4AgAAoEA2AgAAoEA1AgAAoEAAAEEkIgEg+2YGAPtmBgAFAftmBhwBEPuCBgD7ggYABQH7ggYaAAAgGQRFAgAAAEFGAgAAAEFHAgAAAEFIAgAAAEEAAFsUEgEQ+5wGAPucBgAFAfucBhwAABBDDTkCAABAQDwCAABAQD8CAABAQEICAABAQDoBAD0BAEABAEMBADsDf//U/z4Df//U/0EDf//U/0QDf//U/xMDf//U/wAANSQiASD7uAYA+7gGAAUB+7gGHAEQ+9QGAPvUBgAFAfvUBhoAACANAhMDAIAA/yIDgICA/wAAJRQSARD77gYA++4GAAUB++4GHQAAEA0CIgN//9T/EwP/////AAAvJCIBIPsLBwD7CwcABQH7CwcdARD7KAcA+ygHAAUB+ygHGgAAIAcBIgMAgAD/AABDFBIBEPtCBwD7QgcABQH7QgccAAAQKwgnAwAAoEIYAQAsAgAAlkMZAQAWAgAAYEEXAgAAoEETAwAAAOY0AgAA8EEAACUUEgEQ+14HAPteBwAFAfteBxwAABANAiwCAACMQycIAACAPwEJNBQSARD7egcA+3oHAAUB+3oHGgAAEBwFNwIAAKhBOAIAAEBBGQIAFgIAAHBBFwIAAKhBAAAlFBIBEPuUBwD7lAcABQH7lAcaAAAQDQI3AgAAAEE4AgAAQEEAADcUEgEQ+64HAPuuBwAFAfuuBxoAABAfBxMDAAAA5gEDAAgDAA0BAAoCADcCAADAQTgCAAAAQQAAHBQSARD7yAcA+8gHAAUB+8gHGgAAEAQBCAEAAQolFBIBEPviBwD74gcABQH74gcfAAAQDQInAgAAgEIoAgAAgEIAACsUEgEQ+wEIAPsBCAAFAfsBCB8AABATAycCAABgQigCAABgQjYCAABAQQELJRQSARD7IAgA+yAIAAUB+yAIHwAAEA0EAQMACgIACAMAGAIAAAAlFBIBEPs/CAD7PwgABQH7PwgfAAAQDQMKAwAYAQArCM3MTD8BDCgUEgEQ+14IAPteCAAFAfteCCAAABAQAxYCAACgQRkCADgCAAAAQQAAHxQSARD7fggA+34IAAUB+34IIQAAEAcBIgP/PF//AABMFBIBEPufCAD7nwgABQH7nwgcAAAQNAoBAwANAQAKAgATA/////8nAgAA8EIoAgAAIEJFAgAAIEFGAgAAIEFHAgAAIEFIAgAAIEEAAB8UEgEQ+7sIAPu7CAAFAfu7CCEAABAHASIDONmg/wAATBQSARD73AgA+9wIAAUB+9wIEwAAEDQLAgIAAQMADQEACgIAIgM42aD/EwP/////GQIAFgIAAIhBFwIAAMBBKAIAAEBCJwgAAIA/AAAoFBIBEPvvCAD77wgABQH77wgYAAAQEAQBAwAKAgAmAwAoAgAAgEIAAC4UEgEQ+wcJAPsHCQAFAfsHCR0AABAWBgEDAAoCACYDACgCAACAQhgCAAICAAAAORQSARD7JAkA+yQJAAUB+yQJIgAAECEGFQBAekQCAwAvAgAAoEEtAgAAAAAnAgAAwEEoAgAAwEEAADQUEgEQ+0YJAPtGCQAFAftGCR0AABAcBQIDAC8CAABAQS4CAACAQScCAADAQSgCAADAQQAAKBQSARD7YwkA+2MJAAUB+2MJFwAAEBADAgMAJwgAAIA/KAIAAEBCAAAlFBIBEPt6CQD7egkABQH7egkWAAAQDQInAgAAwEEoAgAAwEEAADoUEgEQ+5AJAPuQCQAFAfuQCRoAABAiBwEDAAoCAAIDAC4CAACAQS8CAABgQRYCAABgQRcCAACgQQAAJRQSARD7qgkA+6oJAAUB+6oJHwAAEA0CJwIAAIBBKAIAAIBBAAA+FBIBEPvJCQD7yQkABQH7yQkSAAAQJgcCAwAnAgAAAEMoAgAA4EEtAgAAoEEvCM3MzD0VABB6RRTNzEw/AAAfFBIBEPvbCQD72wkABQH72wkSAAAQBwEvCArXoz0BDR8UEgEQ++0JAPvtCQAFAfvtCRIAABAHAS8ImpkZPgEOHxQSARD7/wkA+/8JAAUB+/8JEgAAEAcBLwjNzEw+AQ8lFBIBEPsRCgD7EQoABQH7EQoSAAAQDQItAgAAoEIvCI/C9TwBED0UEgEQ+yMKAPsjCgAFAfsjChMAABAlBxgBADcCAACAQTgCAABAQRkCABYCAABwQRcCAACoQRMDAAAA5gAANBQSARD7NgoA+zYKAAUB+zYKFAAAEBwGJwgAAIA/AQMADQEAMwIAAKBBNAIAACBCJgMAAABMFBIBEPtKCgD7SgoABQH7SgoUAAAQNAoBAwANAQAKAgAnAgAA8EIoAgAAIEIXAgAAIEJFAgAAIEFGAgAAIEFHAgAAIEFIAgAAIEEAAGEUEgEQ+14KAPteCgAFAfteChQAABBJDjkCAACAPzwCAACAPz8CAACAP0ICAACAPzoBAD0BAEABAEMBADsDONmg/z4DONmg/0EDONmg/0QDONmg/xMDONmg/zYCAABwQQAAJRQSARD7cgoA+3IKAAUB+3IKFQAAEA0CIgM42aD/EwP/////AADkEQwAAAkBBwAABAECAgAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQICAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQICAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQICAAwAAAkBBwAABAECAgAMAAAJAQcAAAQBAgIADAAACQEHAAAEAQICAAwAAAkBBwAABAECAgAOAAALAQkAAAYBBwAADkQOAAALAQkAAAYBBwAAIEQOAAALAQkAAAYBBwAAUkQMAAAJAQcAAAQBAgIA")},300:(e,t,i)=>{i(57).J.push("AVF2ZXJpZnktdGlwLS1yb290dmVyaWZ5LXRpcC0tY29udGVudHZlcmlmeS10aXAtLWZpcnN0dmVyaWZ5LXRpcC0tY2R2ZXJpZnktdGlwLS1tc2faBR8ODAEKAAAAAAMBABAAABANAicDAADIQigEAADIQgAAXg4MAQoQABAAAwEQEwAAEEwOAQMACgIAFgIAAEBBFwIAAKBBEwMAAACARQIAACBBRgIAACBBRwIAACBBSAIAACBBIgP/////AgMAKAIAAKBBMQIAAABBMgIAAABBAAAcDgwBCiMAIwADASMRAAAQCgMBAwANAQAKAgAAAB8ODAEKNAA0AAMBNA4AABANBAEDAAgBAAoCAA0BAAAAHA4MAQpCAEIAAwFCDwAAEAoDAQMADQEACgIAAAABAA==")},730:(e,t,i)=>{i(57).J.push("AYhfX3d4X3NjbF9fcm9vdF9ub2RlX193eF9zY2xfX2xheWVycm9vdHJvb3QtaW5jb250ZW50cm9vdGNvbnRlbnRjb250ZW50LWlucm9vdGNvbnRlbnRjb250ZW50LWludGl0bGVib2R5YnV0dG9uc2J1dHRvbm9rb2staG92ZXJkZW55LWhvdmVy+2MDEhkODAEKAAAAAAMBABMAABAHAScDAADIQgAAGA4MAQoTABMAAwETDwAAEAYBFQBAekQAAEUODAEKIgAiAAMBIgQAABAzCygEAADIQgEDACIDICAgvwMCAAQCABYCAACAQRTNzMw9SgMBAgBLAgHITAMBBABNAgEAAAAYDgwBCiYAJgADASYHAAAQBgEUAACAPwAAUg4MAQotAC0AAwEtBwAAEEAMIgP4+Pj/EwNERET/RQIAACBBRgIAACBBRwIAACBBSAIAACBBSgMBAQBLAgHITAMBBABNAgEANAIAACBBGAIAAAAWDgwBCjQANAADATQEAAAQBAEIBAABACgODAEKOAA4AAMBOAcAABAWAigCAACbQ0kBDAECAgAAAAACAACbQwEAIg4MAQo/AD8AAwE/CgAAEBABSQEMAQICAAAAAAIAACBBAQAWDgwBCkkASQADAUkEAAAQBAEIAgABAS4ODAEKTQBNAAMBTQcAABAcAygEAADIQicCAADNQ0kBDAECAgAAzUMCAAAAAAEBIg4MAQpUAFQAAwFUCgAAEBABSQEMAQICAAAgQQIAAAAAAQEiDgwBCl4AXgADAV4FAAAQEAMZAgAWBwAAwD8XBwAAAEAAADYODAEKYwBjAAMBYwQAABAkBg4AAIA/FgeamZk/NwIAAEhCOAIAAEhCNgIAAAAANQIAAAAAAAAoDgwBCmcAZwADAWcHAAAQFgUWB5qZmT8BAwAIAQANAQA0AgAASEIAAKMODAEKbgBuAAMBbgYAABCRGicCAADwQjMHAAAAPzQHAAAAPzIHzczMPTEHzczMPSID/////zcCAAAAADgCAAAAADYCAACgQTUCAACgQUUCAACAQEYCAACAQEcCAACAQEgCAACAQDkCAACAPzwCAACAPz8CAACAP0ICAACAPzoBAD0BAEABAEMBADsDzMzM/z4DzMzM/0EDzMzM/0QDzMzM/wAAVQ4MAQp0AHQAAwF0AgAAEEMNIgMA/9L/OQIAAIA/PAIAAIA/PwIAAIA/QgIAAIA/OgEAPQEAQAEAQwEAOwMAzKr/PgMAzKr/QQMAzKr/RAMAzKr/AAAZDgwBCnYAdgADAXYIAAAQBwEiAwDMqv8AABkODAEKfgB+AAMBfgoAABAHASIDzMzM/wAAGwIMAAAJAQcAAAQBAgEADAAACQEHAAAEAQICAA==")}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,i),a.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{"use strict";i.r(r),i.d(r,{adSkipCard:()=>O,authorize:()=>te,exparser:()=>e.exparser,gameGrantInfo:()=>Z,gameRanklist:()=>q,getExparserElementByViewId:()=>b,getMainRoot:()=>m,initScl:()=>A,onViewportResize:()=>v,setCurrentFrameView:()=>w,shareImage:()=>Y,toast:()=>H,triggerRender:()=>E,useCouponModal:()=>ee,userProfile:()=>j,verifyModal:()=>R,verifyModalContent:()=>I,verifyTip:()=>U});var e=i(821),t=(i(730),i(995)),n=[];e.onThemeChange((e=>{n.forEach((t=>t(e)))})),t.registerBehavior({is:"wx-theme",data:{theme:"light"},created(){this._onThemeChange({theme:e.getTheme()})},attached(){this.__onThemeChange=this._onThemeChange.bind(this),n.push(this.__onThemeChange)},detached(){n.splice(n.indexOf(this.__onThemeChange),1)},methods:{_onThemeChange({theme:e}){this.setData({theme:e})}}});var a,o,s=t.registerElement({template:{content:(a={},o={P:"",C:[{V:5,N:"",C:[]}],BM:{}},a[""]=function(){return o},function(e){var t=a[e];return t?t():null})},methods:{append(e,i){var r=this.shadowRoot.createComponent(e);return r.classList.toggle("__wx_scl__layer",!0),r.addListener("destroy",(e=>{e.target===r&&this.remove(r)})),i&&r.setData(i),this.shadowRoot.appendChild(r),t.triggerRender(),r},remove(e){e.is,this.shadowRoot.removeChild(e)}}}),l=(t.registerElement({is:"wx-view",template:{content:function(){var e={},t={P:"",C:[{V:5,N:"",C:[]}],BM:{}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{hoverClass:String},listeners:{"this.touchstart":function(){this.hoverStart()},"this.touchend":function(){this.hoverEnd()},"this.canceltap":function(){this.hoverEnd()}},methods:{hoverStart(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!0),t.triggerRender())},hoverEnd(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!1),t.triggerRender())}}}),t.registerElement({is:"wx-image",template:{content:function(){var e={},t={P:"",C:[{T:"image",A:{src:{L:function(e,t,i){return e.src},F:function(e,t,i,r){return e.src}},style:"width: 100%; height: 100%;"},C:[]}],BM:{src:[[0,"src"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{src:{type:String,public:!0}}}),t.registerElement({is:"wx-adaptive-image",template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{id:"wrapper",style:"width: 100%; height: 100%; display: flex; flex-direction: column; flex-shrink: 0; align-items: center;"},C:[{T:"image",A:{src:{L:function(e,t,i){return e.src},F:function(e,t,i,r){return e.src}},style:{L:function(e,t,i){return!(!e.imgStyleWidth&&!e.imgStyleHeight)||void 0},F:function(e,t,i,r){return"width: "+e.imgStyleWidth+"px; height: "+e.imgStyleHeight+"px;"}}},C:[]}]}],BM:{src:[[0,0,"src"]],imgStyleWidth:[[0,0,"style"]],imgStyleHeight:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{src:{type:String,public:!0},srcWidth:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"},srcHeight:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"}},data:{imgStyleWidth:0,imgStyleHeight:0},attached(){this.attached=!0,this._onSrcSizeChange()},detached(){this.attached=!1},methods:{_onSrcSizeChange(){if(this.attached){var e=this.$$.getBoundingClientRect(),t=Math.min(e.width,this.data.srcWidth),i=t*this.data.srcHeight/this.data.srcWidth;this.setData({imgStyleWidth:t,imgStyleHeight:i})}}}}),t.registerElement({is:"wx-scroll-view",template:{content:function(){var e={},t={P:"",C:[{T:"scrollview",A:{"scroll-x":{L:function(e,t,i){return!!e.scrollX||void 0},F:function(e,t,i,r){return e.scrollX?"1":""}},"scroll-y":{L:function(e,t,i){return!!e.scrollY||void 0},F:function(e,t,i,r){return e.scrollY?"1":""}},style:"width: 100%; height: 100%"},C:[{T:"view",A:{},C:[{V:5,N:"",C:[]}]}]}],BM:{scrollY:[[0,"scroll-y"]],scrollX:[[0,"scroll-x"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{scrollX:{type:Boolean,public:!0,value:!1},scrollY:{type:Boolean,public:!0,value:!1}}}),function(e){return null==e?Object.create(null):e}),u=function(e,t){return!0===e||(e?e[t]:void 0)},c=(i(668),e.exparser.registerElement({is:"mp-bubble-action-sheet",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"mp-bubble-action-sheet",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},mask:{L:function(e,t,i){return e.mask},F:function(e,t,i,r){return e.mask}},"mask-closable":{L:function(e,t,i){return e.maskClosable},F:function(e,t,i,r){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"mask",slot:"mask"},C:[{V:5,N:"mask",C:[]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"menu"},C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.theme||void 0},F:function(e,t,i,r){return"light"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,i){return e.actions},F:function(e,t,i,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,i){return u(t[0],"imageSrc")},F:function(e,t,i,r){return l(t[0]).imageSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,i){return u(t[0],"text")},F:function(e,t,i,r){return l(t[0]).text}}}]}]}]}]},{B:{L:function(e,t,i){return!!e.theme||void 0},F:function(e,t,i,r){return"dark"===e.theme}},C:[{V:2,L:{M:["actions"],L:function(e,t,i){return e.actions},F:function(e,t,i,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,i){return u(t[0],"imageDarkSrc")},F:function(e,t,i,r){return l(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,i){return u(t[0],"text")},F:function(e,t,i,r){return l(t[0]).text}}}]}]}]}]}]}]},{T:"wx-view",A:{class:"foot"},C:[{T:"wx-view",A:{class:"button","hover-class":"button__hover","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"button__before"},C:[]},{T:"wx-view",A:{class:"button__content"},C:[{S:{L:function(e,t,i){return e.cancelText},F:function(e,t,i,r){return e.cancelText}}}]}]}]}]}]}],BM:{show:[[0,"show"]],cancelText:[[0,1,1,0,1,0]],maskClosable:[[0,"mask-closable"]],mask:[[0,"mask"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},methods:{buttonTap(e){var{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}}),i(574),t.registerElement({is:"mp-dialog",options:{multipleSlots:!0,classPrefix:"mp-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,i){return e.mask},F:function(e,t,i,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{T:"wx-view",A:{class:"container","bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"content "+(e.show?"content__in":"")}},"catch:tap":"stopEvent"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,i){return!(!e.innerButtons&&!u(e.innerButtons,"length"))||void 0},F:function(e,t,i,r){return e.innerButtons&&l(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,i){return e.innerButtons},F:function(e,t,i,r){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!u(t[0],"className")||void 0},F:function(e,t,i,r){return"button "+l(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,i){return!!u(t[0],"text")||void 0},F:function(e,t,i,r){return"\n                  "+l(t[0]).text+"\n                  "}}},{V:1,B:[{B:{L:function(e,t,i){return!!t[1]||void 0},F:function(e,t,i,r){return t[1]>0}},C:[{T:"wx-view",A:{class:"button__after"},C:[]}]}]}]}]}]}]},{V:5,N:"footer",C:[]},{T:"wx-view",A:{class:"foot__after"},C:[]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerButtons:[]},attached(){this.attached=!0},observers:{buttons(e){var t=e.length;this.setData({innerButtons:e.map(((e,i)=>{var r=e.type||(t>=1&&0===i?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})},show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){var{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}}),i(81),t.registerElement({is:"mp-half-screen-dialog",options:{multipleSlots:!0,classPrefix:"mp-half-screen-dialog",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"mp-half-screen-popup",A:{show:{L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},mask:{L:function(e,t,i){return e.mask},F:function(e,t,i,r){return e.mask}},"mask-closable":{L:function(e,t,i){return e.maskClosable},F:function(e,t,i,r){return e.maskClosable}},"bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-view",A:{class:"title"},C:[{V:5,N:"title",C:[]}]}]},{T:"wx-view",A:{class:"body"},C:[{V:5,N:"body",C:[]}]},{T:"wx-view",A:{class:"foot"},C:[{V:1,B:[{B:{L:function(e,t,i){return!(!e.innerButtons&&!u(e.innerButtons,"length"))||void 0},F:function(e,t,i,r){return e.innerButtons&&l(e.innerButtons).length}},C:[{V:2,L:{M:["innerButtons"],L:function(e,t,i){return e.innerButtons},F:function(e,t,i,r){return e.innerButtons}},K:"index",C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!u(t[0],"className")||void 0},F:function(e,t,i,r){return"button "+l(t[0]).className}},"hover-class":"button__active","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}},"bind:tap":"buttonTap"},C:[{S:{L:function(e,t,i){return!!u(t[0],"text")||void 0},F:function(e,t,i,r){return"\n                "+l(t[0]).text+"\n              "}}}]}]}]}]},{V:5,N:"footer",C:[]}]}]}]}],BM:{mask:[[0,"mask"]],show:[[0,"show"]],maskClosable:[[0,"mask-closable"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerShow:!1,innerButtons:[]},observers:{buttons(e){var t=e.length;this.setData({innerButtons:e.map(((e,i)=>{var r=e.type||(t>=1&&0===i?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})}},methods:{buttonTap(e){var{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose(){this.triggerEvent("close",{},{})},handleClosed(){this.triggerEvent("closed",{},{})},stopEvent(){}}}),i(741),t.registerElement({is:"mp-half-screen-popup",options:{multipleSlots:!0,classPrefix:"mp-half-screen-popup",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,i){return e.mask},F:function(e,t,i,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"mask "+(e.show?"mask__in":"")}},"bind:tap":"handleClose"},C:[]}]}]},{V:5,N:"mask",C:[]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"container "+(e.show?"container__in":"")}},"bind:tap":"handleClose"},C:[{T:"wx-view",A:{class:"content","catch:tap":"stopEvent"},C:[{V:5,N:"",C:[]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1}},attached(){this.attached=!0},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{handleClose(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent(){}}}),i(161),t.registerElement({is:"mp-horizonal-bubble",options:{multipleSlots:!0,classPrefix:"mp-horizonal-bubble",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,i){return e.mask},F:function(e,t,i,r){return e.mask}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"mask "+(e.show?"mask__in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"close-container "+(e.show?"close-container__in":"")}}},C:[{T:"wx-view",A:{class:"close-btn","hover-class":"close-btn__hover","bind:tap":"handleClose"},C:[{T:"wx-image",A:{class:"close-btn-img",src:{L:function(e,t,i){return e.closeBtn},F:function(e,t,i,r){return e.closeBtn}}},C:[]}]}]},{T:"wx-view",A:{class:"content-container"},C:[{V:5,N:"content",C:[]}]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"menu-container "+(e.show?"menu-container__in":"")}}},C:[{T:"wx-view",A:{class:"menu"},C:[{T:"wx-view",A:{class:"menu-before"},C:[]},{T:"wx-view",A:{class:"menu-inner"},C:[{V:2,L:{M:["actions"],L:function(e,t,i){return e.actions},F:function(e,t,i,r){return e.actions}},K:"index",C:[{T:"wx-view",A:{class:"cell","hover-class":"cell__hover","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}},"bind:tap":"buttonTap"},C:[{T:"wx-view",A:{class:"cell-img-container"},C:[{T:"wx-image",A:{class:"cell-img",src:{L:function(e,t,i){return u(t[0],"imageDarkSrc")},F:function(e,t,i,r){return l(t[0]).imageDarkSrc}}},C:[]}]},{T:"wx-view",A:{class:"cell-desc"},C:[{S:{L:function(e,t,i){return u(t[0],"text")},F:function(e,t,i,r){return l(t[0]).text}}}]}]}]}]},{T:"wx-view",A:{class:"menu-after"},C:[]}]}]}]}]}],BM:{closeBtn:[[0,1,0,0,0,"src"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},attached(){this.attached=!0,t.triggerRender((()=>{this.setData({closeBtn:"https://res.wx.qq.com/op_res/hlMx1wXYJya8ib3DpW10m6aLCGf7RoluABX1QvNEAxVIyhhGuY0iI62dzv56y5rq9nBrd-H44CqoH5dM9JTr0g"})}))},observers:{show(e){this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((()=>{this.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((()=>{this.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap(e){var{index:t}=e.currentTarget.dataset;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose(){this.triggerEvent("close",{},{})},stopEvent(){}}}),i(57)),d=i(446),h=null,p=null,f=[],g=!1,_=e=>{f?(f.push(e),1===f.length&&(d.setErrorListener((e=>{Reporter.errorReport({key:"exparserScriptError",error:e})})),WeixinJSBridge.invoke("loadWAFile",{filename:"WASclBackend.wasm"},(e=>{var t=e.arrayBuffer;g&&(t=e.arrayBuffer[__wxConfig.minaVmToken]||t),d.wasm_initialize({bin:t},(()=>{var e=f;f=null,e.forEach((e=>e()))}))})))):e()},m=()=>p,v=t=>{e.onViewportResize(t)},y=globalThis.atob||function(e){var t=String(e).replace(/[=]+$/,""),i="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,n,a=0,o=0;n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i},A=e=>{var t=()=>{e({mainRoot:p})};if(h)setTimeout(t,0);else{_((()=>{try{v((()=>{i(995).triggerRender()}));var e=d.Context.create();h=e.createElement("empty","virtuallayout"),e.bindRootNode(h),h.setClass("__wx_scl__root_node");var r=i(995);r.globalOptions.documentBackend="custom",r.globalOptions.customContext=e,r.initBackend(),c.W.length&&e.appendStyleSheet(c.W.join("")),c.J.length&&c.J.forEach((t=>e.appendStyleSheetBincode((e=>{for(var t=y(e),i=t.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=t.charCodeAt(n);return r})(t))));var n=e.createElement("empty","virtuallayout");h.appendChild(n),n.release(),(p=r.createElement("virtuallayout",s)).classList.toggle("__wx_scl__main_root",!0),r.Element.replaceDocumentElement(p,h,0),setTimeout(t,0)}catch(e){e.stack}}))}},b=e=>i(995).globalOptions.customContext.constructor.getExparserElementByViewId(e),E=()=>{i(995).triggerRender()},w=e=>{d.setCurrentFrameView(e)};void 0!==__wxConfig&&"ios"!==__wxConfig.platform&&"function"==typeof __wxConfig.onReady?(g="mina"===__wxConfig.platform,__wxConfig.onReady((()=>{setTimeout((()=>{__wxConfig.platform,_((()=>{}))}),3e3)}))):__wxConfig.platform;i(297);var T={content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"root "+e.page}}},C:[{V:1,B:[{B:{L:function(e,t,i){return e.showModal},F:function(e,t,i,r){return e.showModal}},C:[{T:"mp-dialog",A:{class:"modal",show:{L:function(e,t,i){return e.showModal},F:function(e,t,i,r){return e.showModal}},"mask-closable":{L:function(e,t,i){},F:function(e,t,i,r){return!1}},buttons:{L:function(e,t,i){return e.modalButtons},F:function(e,t,i,r){return e.modalButtons}},"bind:buttontap":"closeModal"},C:[{V:7,N:"title",C:[{T:"wx-view",A:{class:"modal-title"},C:[{S:{L:function(e,t,i){return e.modalTitle},F:function(e,t,i,r){return e.modalTitle}}}]}]}]}]}]},{T:"wx-view",A:{class:"container",style:{L:function(e,t,i){return!!e.keyboardHeight||void 0},F:function(e,t,i,r){return"transform: translateY(-"+e.keyboardHeight+"px);"}}},C:[{V:1,B:[{B:{L:function(e,t,i){return e.half},F:function(e,t,i,r){return e.half}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"mask "+(e.enter?"mask-in":"")}}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"animation "+(e.enter?"animation-in":"init")}}},C:[{T:"mp-half-screen-dialog",A:{"bind:buttontap":"handleTapButton",show:{L:function(e,t,i){},F:function(e,t,i,r){return!0}},mask:{L:function(e,t,i){},F:function(e,t,i,r){return!1}},"mask-closable":{L:function(e,t,i){},F:function(e,t,i,r){return!0}},buttons:{L:function(e,t,i){return e.buttons},F:function(e,t,i,r){return e.buttons}}},C:[{V:7,N:"title",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{class:"title-half"},C:[{T:"wx-view",A:{},C:[{S:"微信小游戏实名认证"}]},{T:"wx-view",A:{style:"flex: 1"},C:[]},{T:"wx-image",A:{class:"question",src:{L:function(e,t,i){return e.questionIcon},F:function(e,t,i,r){return e.questionIcon}},"bind:tap":"showHelp"},C:[]}]}]}]}]},{V:7,N:"title",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"help"===e.page}},C:[{T:"wx-view",A:{class:"title-half-help"},C:[{T:"wx-image",A:{src:{L:function(e,t,i){return e.closeIcon},F:function(e,t,i,r){return e.closeIcon}},class:"title-half-help-icon","bind:tap":"showIndex"},C:[]},{T:"wx-view",A:{style:"width: 100%;"},C:[{S:"健康系统＆防沉迷策略F&Q"}]}]}]}]}]},{T:"verify-modal-content",A:{failReason:{L:function(e,t,i){return e.failReason},F:function(e,t,i,r){return e.failReason}},page:{L:function(e,t,i){return e.page},F:function(e,t,i,r){return e.page}},isPay:{L:function(e,t,i){return e.isPay},F:function(e,t,i,r){return e.isPay}},name:{L:function(e,t,i){return e.name},F:function(e,t,i,r){return e.name}},id:{L:function(e,t,i){return e.id},F:function(e,t,i,r){return e.id}},half:{L:function(e,t,i){},F:function(e,t,i,r){return!0}},"bind:click":"tap",slot:"body"},C:[]}]}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"dialog-container"},C:[{T:"wx-image",A:{class:"logo",src:{L:function(e,t,i){return e.logo},F:function(e,t,i,r){return e.logo}}},C:[]},{T:"mp-dialog",A:{show:{L:function(e,t,i){},F:function(e,t,i,r){return!0}},"mask-closable":{L:function(e,t,i){},F:function(e,t,i,r){return!1}}},C:[{T:"wx-view",A:{class:"title",slot:"title"},C:[{T:"wx-image",A:{class:"title-bar",src:{L:function(e,t,i){return!!(e.hor||e.barHor||e.bar)||void 0},F:function(e,t,i,r){return e.hor?e.barHor:e.bar}}},C:[]},{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"help"===e.page}},C:[{T:"wx-view",A:{style:"width: 100%;"},C:[{S:"健康系统＆防沉迷策略F&Q"}]},{T:"wx-image",A:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEUAAAD///////////////////////////////////////////+0CY3pAAAAC3RSTlMAMO+gEM9gv69fQHSxjgkAAADWSURBVEjH7dMxDgFRFEbhJwRRCYVardFrprEDnSXYhRVYgjUQhdzNaW7mxHvJSdTmdHOLr/nnlaE/abJsTovmctw2p8Oths6PmhrHu7rMIpICirh/X0a7SAoonqVq1VNA+0JQAkEZBCUQlEFQAkEpBAUkFJBQQEIBGQUkFJBQ64SUioSUAhIqIWseEblgG/OzYBPzRy6o0FWpXC0XVGifCyrEz2BQLugQlEBQAkEJBCUQlEBQAkEJBKUQlENQLeTUFAjq1VWnSw9BnfhIqn0im64MDf3UB5jlkgnLXEPdAAAAAElFTkSuQmCC",class:"title-help-icon","bind:tap":"showIndex"},C:[]}]},{B:1,C:[{T:"wx-view",A:{},C:[{S:"微信小游戏实名认证"}]},{T:"wx-view",A:{class:"question-mid","bind:tap":"showHelp"},C:[{T:"wx-image",A:{style:"margin-right: 4px",class:"question-mid-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAOVBMVEUAAAD///////////////////////////////////////////////////////////////////////8KOjVvAAAAEnRSTlMA7xDfIJCAQJ9gv6+gz3AwUB9f57iZAAABb0lEQVRIx91V2XIDIQzDmHM50ur/P7almYmBBTqTx+hph7WQfADqM+FrYgKoJOf/j9aO0IGDOYdb/IIu62J09vrjnii1OUlei7vcVOIuvm1v9bhmGsWu7VwAL7I0DBS9IBQg6+VOGbiWftzOq1u4ikBWW2Sg3oyyPpSbQePvAJiObluifQP8ZMoAobNHeMINKeqdgCFQffjIgBdTNNSEEXo2myexr2YCDQ79gp23MQ7UVziaVzFV76mKXK/dSxUluJC6qbDr/sZhFPj1LRUQmATRnX2/thI8CJNsBA4EwzLqQjhYqtLJlSW+JZ3B9/kvh7JmWVmVtc7Dq7QRR+L73vY7NjEkcjuEISs3e/pKoi8nRqDnLjHwvTiSAjtlUURyEpDhZd0HxMd0CbC5tTacMkZ8/yKTTiKsr8oAlNV6gRjt4Bm49Pa6D2bxxNid18iN4iXaJwKoqi1Mnp4seWL2FEYHchK+hXepNCecqlcfiR+DkhTJmxhj1wAAAABJRU5ErkJggg=="},C:[]},{S:"\n                帮助\n              "}]}]}]}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{class:"greet"},C:[{S:"尊敬的用户："}]}]}]},{T:"verify-modal-content",A:{failReason:{L:function(e,t,i){return e.failReason},F:function(e,t,i,r){return e.failReason}},page:{L:function(e,t,i){return e.page},F:function(e,t,i,r){return e.page}},isPay:{L:function(e,t,i){return e.isPay},F:function(e,t,i,r){return e.isPay}},name:{L:function(e,t,i){return e.name},F:function(e,t,i,r){return e.name}},id:{L:function(e,t,i){return e.id},F:function(e,t,i,r){return e.id}},half:{L:function(e,t,i){},F:function(e,t,i,r){return!1}},"bind:click":"tap","bind:buttontap":"handleTapButton"},C:[]}]},{V:7,N:"footer",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{class:"footer"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:{L:function(e,t,i){return e.cancelText},F:function(e,t,i,r){return e.cancelText}}}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:{L:function(e,t,i){return e.confirmText},F:function(e,t,i,r){return e.confirmText}}}]}]}]}]}]}]}]}]}]}]}]}],BM:{keyboardHeight:[[0,1,"style"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},C={content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:{L:function(e,t,i){return!!e.half||void 0},F:function(e,t,i,r){return"root "+(e.half?"half":"")}}},C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{class:"content"},C:[{S:{L:function(e,t,i){return!!e.isPay||void 0},F:function(e,t,i,r){return"\n      检测到你的认证信息不全，应主管部门要求，"+(e.isPay?"未实名用户无法进行充值。":"")+"为保护你的合法权益，我们需要获取你的信息进行实名认证。未完成认证将影响游戏登录。\n    "}}}]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.half||void 0},F:function(e,t,i,r){return"form "+(e.half?"":"form-mid")}}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.half||void 0},F:function(e,t,i,r){return"form-row "+(e.half?"":"form-row-mid")}}},C:[{T:"wx-image",A:{class:"form-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAALVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADBoCg+AAAAD3RSTlMAgBB4QB9QYDdwCEhoWCiZ5BfxAAAA9klEQVRIx+3UvQ7BUBjG8RNBBMtRX2WpSCTGbh2bGKw1mSTiCtRkJG5A3QI30DtyKURbj0Sel6Q16X/+JX3Pe3Kq8n5XdRoYW0s2BV/fa8vqoB85kinqOFdA+wR1hYnsBBl8qrJ+tqZoANTjIwE1KfKBOhTZQCZF+qU/RQGMkW7jIVCfohlQi6Iz0JGiGtCSohKQpT4fr614wwQ1BFTBuxMKsSVe/W0B/HyeErPJ7RKU8nPjCJ0kc7EjZKxEkwRFDVcjCChquFpoxNRcIyjRQHGDNjBFTXPxQ+UI7y/gyMTVC3kYibf7BrlZI3nwq4qbcOOovGy7ATxkSlqw/L29AAAAAElFTkSuQmCC"},C:[]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.name||void 0},F:function(e,t,i,r){return"form-input "+(e.name?"form-content":"")}},"bind:tap":"tapName"},C:[{S:{L:function(e,t,i){return!!e.name||void 0},F:function(e,t,i,r){return"\n          "+(e.name||"点击输入姓名")+"\n        "}}}]}]},{T:"wx-view",A:{class:"form-row"},C:[{T:"wx-image",A:{class:"form-icon",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAMFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABaPxwLAAAAEHRSTlMAgEAQcCAweFBIaAhgWDgYjyHRFQAAAQ9JREFUSMft1b0JwkAYBuBTUBEVTBDPHxTjAio2YmXAAbRwgDTps4HgAnEEcQFLS53DyhWcwMt7gRC5fIeIYCRvdS88kC9wPyxLqpP3jMRwP0R7g4gZIo9CPEQGmb9BfMQetg4dRZlrUGMsSuVAoybamkYLtCqNtmhlGg3QimI1lZmQiMnkPkcbmbUC+Wh5evALWo1GXbQSjUw0B8thEEuB+Clo2Ab1xL8zfMytQX18TYM6olzlrlkGsVWoJYql25k3Uc4atEObUQgmUqZycBipEhBMpBLQMSLyXPVc13XiCKcpSsVTDd5i8VgqZL4gR4XaL+iuQnwVMwX7Zy6xL6N3ng2LQu0QlamnbMCypDlPojZmYDMqLCcAAAAASUVORK5CYII="},C:[]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.id||void 0},F:function(e,t,i,r){return"form-input "+(e.id?"form-content":"")}},"bind:tap":"tapId"},C:[{S:{L:function(e,t,i){return!!e.id||void 0},F:function(e,t,i,r){return"\n          "+(e.id||"点击输入有效身份证号码")+"\n        "}}}]}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"help"===e.page}},C:[{T:"wx-scroll-view",A:{"scroll-y":{L:function(e,t,i){},F:function(e,t,i,r){return!0}},"scroll-x":{L:function(e,t,i){},F:function(e,t,i,r){return!1}},class:"scroll"},C:[{T:"wx-view",A:{class:"bold"},C:[{S:"尊敬的用户："}]},{T:"wx-view",A:{class:"line"},C:[{S:"健康系统策略已全面覆盖更新，关于新的健康系统策略，你可通过以下内容了解更多："}]},{T:"wx-view",A:{style:"color: #f06b1f"},C:[{S:"1.港澳台／海外用户如何实名认证？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"关注微信公众号【腾讯成长守护】，点击右下方【帮助】－【健康系统】－【港澳台／海外用户实名认证】进行验证。"}]},{T:"wx-view",A:{style:"color: #f06b1f"},C:[{S:"2.我有港澳台／海外用户实名认证的疑问，如何联系客服人员？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        请进入【腾讯客服】小程序，点击左下方【提交问题】，选择产品“腾讯健康系统”，问题类型“港澳台、海外用户实名视频认证”。根据提示提交材料后，客服人员将致电联系你。客服人员联系时段为 北京时间9:00-22:00。\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"3.健康系统策略中，未成年游戏时长限制是什么？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        根据2019年国家新闻出版署发布的《关于防止未成年人沉迷网络游戏的通知》最新要求，未成年用户游戏时长和时段限制为：\n（1）法定节假日：每日限玩3小时\n（2）非法定节假日：每日限玩1.5小时\n（3）每日22:00至次日8:00无法登陆游戏\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"3.健康系统策略中，未成年游戏时长限制是什么？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        根据2019年国家新闻出版署发布的《关于防止未成年人沉迷网络游戏的通知》最新要求，未成年用户游戏时长和时段限制为：\n（1）法定节假日：每日限玩3小时\n（2）非法定节假日：每日限玩1.5小时\n（3）每日22:00至次日8:00无法登陆游戏\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"4.健康系统策略中，未成年的充值限制是什么？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        根据2019年11月国家新闻出版署发布的《关于防止未成年人沉迷网络游戏的通知》最新要求，未成年用户游戏充值限制为：\n（1）8岁以下：无法在游戏内进行充值\n（2）8-15岁：单次充值上限50元，单月充值上限200元\n（3）6-17岁：单次充值上限100元，单月充值上限400元\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"5.成年人游戏时长限制是什么？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        针对王者荣耀与和平精英两款手游，若实名认证为成年人：单次连续在线5小时，会提醒你合理安排时间休息；单次连续在线6小时，需要你下线休息15分钟。单日累计在线5、6小时，会提示你合理安排时间休息，单日累计在线7小时后，需要你下线休息15分钟，此后每1小时下线休息15分钟，每天凌晨0点重置累计时长。\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"6.实名认证是否可以修改？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        实名信息为成年人的用户会有一次修改实名认证信息的机会，已经纳入防沉迷保护的未成年用户则无法再次修改实名认证；实名认证为成年人的用户修改方式：微信关注【腾讯成长守护】公众号，点击右下角【帮助】－【健康系统】－【实名认证查询】－【修改实名认证】。\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"7.健康系统时长和充值限制是否能够解除？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"目前已纳入防沉迷保护的未成年用户均不支持解除时长和充值限制，请你合理安排游戏时间。"}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"8.游戏服受到的时长限制是怎么样的？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        IOS游客服用户登录游戏时，不需要进行实名认证，但针对游客模式中的所有用户，同一台设备15天内只能累计游戏1小时。且游客服内不支持充值。\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"9.游戏时长刷新重置的时间是什么？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"每日累计时长与登录限制的刷新时间为凌晨0点。"}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"11.为什么我已满18周岁，但游戏时长和充值仍受到限制？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"请通过微信关注公众号【腾讯成长守护】－【家长请进】－【家庭守护】，查询是否绑定腾讯成长守护。"}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"10.未成年共享时长规则是否受到影响？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        在当前的健康系统策略下，一个未成年人身份信息仅允许用于微信和QQ平台各一个游戏账号的校验。所有处于生效区域的未成年用户，其名下的游戏账号在同一游戏中将共享1.5小时（非法定节假日）或3小时（法定节假日）的总游戏时长，不再分别单独统计。\n      "}]},{T:"wx-view",A:{style:"color: #06AE56"},C:[{S:"12.已确认被关联腾讯成长守护，该如何解除？"}]},{T:"wx-view",A:{class:"line"},C:[{S:"\n        （1）若是未成年人（未满18周岁），且已确认账号被家长关联腾讯成长守护，建议与家长进行沟通。\n（2）若是成年人（已满18周岁），且已确认账号被关联腾讯成长守护，并受到健康系统限制，如需解绑腾讯成长守护，请关注微信公众号【腾讯成长守护】，回复内容“我要解绑”，根据系统提醒自动解绑。\n      "}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"fail"===e.page}},C:[{V:1,B:[{B:{L:function(e,t,i){return e.half},F:function(e,t,i,r){return e.half}},C:[{T:"wx-view",A:{style:"margin-bottom: 32px"},C:[{S:{L:function(e,t,i){return!!e.failReason||void 0},F:function(e,t,i,r){return"\n        "+(e.failReason||"由于您提交的实名信息暂未通过且当前无剩余提交认证次数，您目前无法登录游戏。")+"\n      "}}}]}]},{B:1,C:[{T:"wx-view",A:{class:"fail"},C:[{T:"wx-image",A:{class:"fail-icon",src:{L:function(e,t,i){return e.failIcon},F:function(e,t,i,r){return e.failIcon}}},C:[]},{T:"wx-view",A:{class:"fail-text"},C:[{T:"wx-view",A:{class:"fail-title"},C:[{S:"认证失败"}]},{T:"wx-view",A:{},C:[{S:{L:function(e,t,i){return!!e.failReason||void 0},F:function(e,t,i,r){return e.failReason||"由于您提交的实名信息暂未通过且当前无剩余提交认证次数，您目前无法登录游戏。"}}}]}]}]}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"succ"===e.page}},C:[{V:1,B:[{B:{L:function(e,t,i){return e.half},F:function(e,t,i,r){return e.half}},C:[{T:"wx-view",A:{style:"margin-bottom: 32px"},C:[{S:"恭喜，你已完成腾讯游戏实名认证"}]}]},{B:1,C:[{T:"wx-view",A:{class:"fail"},C:[{T:"wx-image",A:{class:"fail-icon",src:{L:function(e,t,i){return e.succIcon},F:function(e,t,i,r){return e.succIcon}}},C:[]},{T:"wx-view",A:{class:"fail-text"},C:[{T:"wx-view",A:{class:"fail-title"},C:[{S:"认证成功"}]},{T:"wx-view",A:{},C:[{S:"恭喜，你已完成腾讯游戏实名认证"}]}]}]}]}]}]}]},{V:1,B:[{B:{L:function(e,t,i){return!!(e.half||e.page||e.page)||void 0},F:function(e,t,i,r){return!e.half&&("succ"===e.page||"fail"===e.page)}},C:[{T:"wx-view",A:{style:"width: 100%; display: flex; justify-content: center; margin-top: 40px"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"button "+e.page+"-button"}},"bind:tap":"tapButton"},C:[{S:"确认"}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},S="https://res.wx.qq.com/t/fed_upload/b19c189d-d79b-4901-9fb1-da7c61aea1af",I=i(821).exparser.registerElement({is:"verify-modal-content",options:{classPrefix:"verify-modal-content",writeIdToDOM:!0,virtualHost:!0},template:C,properties:{isPay:{type:Boolean,value:!1},failReason:{type:String,value:""},page:{type:String,value:"index"},half:{type:Boolean,value:!1},name:{type:String,value:""},id:{type:String,value:""}},data:{succIcon:`${S}/succ.png`,failIcon:`${S}/fail.png`},methods:{tapButton(){this.triggerEvent("buttontap",{index:0})},tapName(){this.triggerEvent("click",{key:"name",value:this.data.name})},tapId(){this.triggerEvent("click",{key:"id",value:this.data.id})},destroy(){this.triggerEvent("destroy")}}}),x=i(821).exparser,P="https://res.wx.qq.com/t/fed_upload/b19c189d-d79b-4901-9fb1-da7c61aea1af",D=[],R=x.registerElement({is:"verify-modal",options:{classPrefix:"verify-modal",writeIdToDOM:!0,virtualHost:!0},template:T,properties:{page:{type:String,value:"index"},hor:{type:Boolean,value:!1},half:{type:Boolean,value:!1},failReason:{type:String,value:""},confirmText:{type:String,value:"提交"},cancelText:{type:String,value:"取消"},keyboardHeight:{type:Number,value:0}},data:{logo:`${P}/logo.png`,barHor:`${P}/${encodeURIComponent("顶栏背景-横版")}.jpg`,bar:`${P}/${encodeURIComponent("顶栏背景-竖版")}.jpg`,questionIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAMAAABiM0N1AAAAM1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACjBUbJAAAAEXRSTlMAgGBwCCAQUDh4MGhIQFgYKOJvWD4AAAI1SURBVFjD7VjbcusgDIwRN0HA/v+vPcF4Do0XC+KZ9qFTPbVystKuJIzy+LPfZnrzLtLyMlI5GX0TJanlZMrbj2HMgQJY5iYMU3YvU/E/FG3TMPaA4Tcqa8hc/W6SoOdKIqC4oYagMKPxE7VA0s8xTtxDCpKGvR/igJ6lPZ4WY7k9lh3j+KGKO5IUrfDiiU5ZubC7Rio689r+l5AkxUPJeJ1sWUEDS/hM1on7gpdiOPCKOqjeg61bCe0VlWFJFp4UAr3CFH+4GJduc5mW0tDtlmaYrjpSGntTPc0249X+10xsW5zg29m2Zjad4LpTzdCpi/+aneo0XkJw7rClVqQFP6EZwMvH8hmID1+r6mPIzfRqb63Vb7Dca+8N6iNPme2WCIYql7xFczVnZO/OZKOIk/BQPISLZ4eSeOXWUmcm9ObAwceJ8xeE54ESvFjuAQWY/ZtABLQEICpN3DcjBVFnsWNzjLr3/D11TpEFqVHoJkmGsPZzoBXOke1aUN1mFyxAEI0jKVsbUY0Hm/4YiDF8wlkaWwBBZG5W6KLF9pzm4uJB9rJV1ZUXjaCzhdhSStwioEJ0kShp8YzFS8R2lemzF9mFz25Blj+9aGERhPe7MGVL+O7L6EPHSSTDi/z+0pMX9tmrv9PjtYdGy0gc7VGmLjXjo2JuzdIzhwNVqICkQoXhyW6z7lhFc1i/eL3i6lfzu/ZWkqoWlXtZJm579o+v640KoKS7P0aYlNXOkqLzm3782S+zf9hQDfiecyagAAAAAElFTkSuQmCC",closeIcon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAG1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACUUeIgAAAACXRSTlMNAIY6Bgp3HBSB4mXEAAABXklEQVRIx5WWsW6DQBBEnxVQUnIS+QEipbZcpIaCHkv2DyRF2lSp/ekpjPfuGA42U8LT7DLc3R4hUzte4XoZ8qdkyMSseihBI4ku61APBQpljFLoFYoUZQbOC2gCVZ1DDauqUqiloCGBetiyQo3Uik0jOBjEhu6QZKRZoRlpVmjbWg+tpvXQb9Oo0Ja0HtqS5kmhpZc0T5KWnr8wffwkTZG09NsdmfXUfSdJEWKFz+6NWafuHVOghfimOz6MIg8D1re9MtzipCG3UiMONIiVwQb1LKzEiIoesTIjgyaWVksjaoOilRkpFK3MKEKwtDKjsk5i5IRc5fYa90fgCtP1W1w/2LVUXIvOtXx9GyFgyrfUjYdcm9O7zRtMN9Z09h49YYepXceh+2DdqzfcoX6nmmts+AdQzFNVuYaid7z6B3XZ6vC/y0O54LCAwrieYw4pVQWBhKr81zX/xc91hfwDMyBVqzsvF5wAAAAASUVORK5CYII=",enter:!1,isPay:!1,showModal:!1,modalTitle:"",modalContent:"",modalButtons:[{text:"确定"}],buttons:[{type:"default",text:"取消"},{type:"primary",text:"提交"}],name:"",id:""},attached(){x.triggerRender((()=>{this.setData({enter:!0})}))},methods:{tap(e){this.triggerEvent("click",e.detail)},showHelp(){D.push(this.data.page),this.report({PositionID:1,ActionID:2}),this.triggerEvent("switchPage",{page:"help",buttons:[]})},showIndex(){this.report({UIArea:1509,PositionID:1,ActionID:2});var e,t="index";this.data.half||(t=null!==(e=D.pop())&&void 0!==e?e:"index");this.triggerEvent("switchPage",{page:t,buttons:[{className:"button cancel",type:"default",text:"取消"},{className:"button confirm",type:"primary",text:"提交"}]})},showFail({failReason:e=""}){this.triggerEvent("switchPage",{failReason:e,page:"fail",buttons:[{type:"default",text:"我知道了"}]})},showSucc(){this.triggerEvent("switchPage",{page:"succ",buttons:[{type:"default",text:"返回游戏"}]})},showModal({title:e,content:t}){this.setData({modalTitle:null!=e?e:"",modalContent:null!=t?t:"",showModal:!0})},closeModal(){this.setData({showModal:!1})},handleTapButton(e){var t=e.detail.index,i=this.data.page;"succ"===i?(this.report({UIArea:1511,PositionID:1,ActionID:2}),this.des("succ")):"fail"===i?(this.report({UIArea:1510,PositionID:1,ActionID:2}),this.handleClose("fail")):"index"===i&&(1===t?this.handleConfirm():this.handleClose())},report(e){this.triggerEvent("report",e)},des(e="destroy"){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy",{reason:e})}),300)},handleCancel(){this.triggerEvent("close",{reason:"cancel"})},handleClose(e="cancel"){this.triggerEvent("close",{reason:e})},handleConfirm(){this.triggerEvent("confirm",{id:this.data.id,name:this.data.name})}}}),O=(i(521),t.registerElement({is:"ad-skip-card",options:{classPrefix:"ad-skip-card",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root","bind:tap":"close"},C:[{T:"wx-image",A:{class:"icon",src:"https://res.wx.qq.com/t/fed_upload/d3b06ed8-7ff2-4477-ae39-c37621d06f20/Frame%20348.png"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,i){return!!e.amount||void 0},F:function(e,t,i,r){return"恭喜获得 广告跳过卡x"+e.amount}}}]},{T:"wx-view",A:{class:"sub"},C:[{S:"在小游戏中使用可跳过对应视频广告"}]},{T:"wx-view",A:{class:"sub"},C:[{S:"点击任意处关闭"}]}]}],BM:{amount:[[0,1,0]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{amount:{type:Number,value:1}},methods:{close(){this.triggerEvent("destroy")}}})),k=(i(300),{content:function(){var e={},t={P:"",C:[{T:"virtuallayout",A:{class:"root"},C:[{T:"wx-view",A:{class:"content",style:{L:function(e,t,i){return!(!e.top&&!e.right)||void 0},F:function(e,t,i,r){return"top:"+e.top+"px;right:"+e.right+"px"}},"bind:tap":"tap"},C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.showSeconds||void 0},F:function(e,t,i,r){return!e.showSeconds}},C:[{T:"wx-view",A:{class:"first"},C:[{S:"\n      尚未实名认证，仅可玩1小时\n    "}]}]},{B:{L:function(e,t,i){return!!e.remainSeconds||void 0},F:function(e,t,i,r){return e.remainSeconds>0}},C:[{T:"wx-view",A:{class:"cd"},C:[{T:"wx-view",A:{style:{L:function(e,t,i){return!(!e.remainSeconds&&!e.remainThreshold)||void 0},F:function(e,t,i,r){return"overflow-wrap:normal;color:"+(e.remainSeconds<e.remainThreshold?"#fa5151":"rgba(0,0,0,.5)")}}},C:[{S:{L:function(e,t,i){return!!e.remainStr||void 0},F:function(e,t,i,r){return"\n        "+e.remainStr+"\n      "}}}]},{T:"wx-view",A:{style:"margin-left:4px"},C:[{S:"微信小游戏实名认证"}]}]}]},{B:1,C:[{T:"wx-view",A:{class:"msg"},C:[{S:"\n      微信小游戏实名认证\n    "}]}]}]},{T:"wx-image",A:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAwBAMAAAD5pqeQAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABnRSTlMAgEAIaFCMCA7dAAAAMUlEQVQoz2MYfEAJic0kqIDgmAgKITjMjgMnJYzgsCJzAoHKEBJC9JNABBUiEAcnAACUTAh6KPgabwAAAABJRU5ErkJggg==",style:"height: 16px; width: 8px;"},C:[]}]}]}],BM:{top:[[0,0,"style"]],right:[[0,0,"style"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()}),M=e=>e<10?`0${e}`:`${e}`,N=i(821).exparser,L=!1,B=null,F=!1,U=N.registerElement({is:"verify-tip",options:{classPrefix:"verify-tip",writeIdToDOM:!0,virtualHost:!0},template:k,properties:{top:{type:Number,value:20},right:{type:Number,value:100},remainThreshold:{type:Number,value:300},info:{type:String,value:"{}"}},data:{showSeconds:L,remainStr:"00:00",remainSeconds:-1},observers:{info(e){this.setData(JSON.parse(e))},remainSeconds(e){e<0&&(e=0);var t=e%60,i=Math.floor(e/60);this.setData({remainStr:M(i)+":"+M(t)})}},attached(){F=!1,this.setData({showSeconds:L}),L||setTimeout((()=>{L=!0,F||this.setData({showSeconds:!0})}),1e4),B=setInterval((()=>{var{remainSeconds:e}=this.data;e&&(e--,this.setData({remainSeconds:e}),e||this.triggerEvent("stop"))}),1e3)},methods:{tap(){this.triggerEvent("click")},des(){clearInterval(B),F=!0,this.triggerEvent("destroy")}}}),W=(i(164),e.exparser),G="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABEElEQVR4Ae3aQQqCQACF4Yp2XaQDdP8T1L6LtC4FXf8RWhLfQIzwYBw/X250tzMIECBAgAABAgQIbFzgOuzvOf3G402MwyZ2seFNAIqbAwhQCESsQYBCIGINAhQCEWsQoBCIWIMAhUDEGgQoBCLWIEAhELEGAQqBiDUIUAhErEGAQiBiDQIUAhHvI5/jb7zIOw8nO00nfAzzfT75ivOl1n4XaHzj+Y8jr98zKG77MfI5vs0HK86/+IuteDnLL+3jheVN11/RMyiMAQEKgYg1CFAIRKxBgEIgYg0CFAIRaxCgEIhYgwCFQMQaBCgEItYgQCEQsQYBCoGINQhQCESsQYBCQEyAAAECBAgQIEDgE4EXsiEOYoSfPhkAAAAASUVORK5CYII=",V=[];e.onViewportResize((e=>{V.forEach((t=>t(e)))}));var j=W.registerElement({is:"user-profile",options:{classPrefix:"user-profile",writeIdToDOM:!0},behaviors:["wx-theme"],template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.hide||void 0},F:function(e,t,i,r){return"root "+(e.hide?"hide":"")}}},C:[{V:1,B:[{B:{L:function(e,t,i){return e.overlay},F:function(e,t,i,r){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,i){return e.appIcon},F:function(e,t,i,r){return e.appIcon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,i){return!!e.appName||void 0},F:function(e,t,i,r){return e.appName+" 申请"}}}]}]},{T:"wx-view",A:{class:"body",style:{L:function(e,t,i){return!!e.paddingBottom||void 0},F:function(e,t,i,r){return"padding-bottom: "+e.paddingBottom+"px"}}},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:"使用你的头像、昵称、性别及地区，用于个人信息展示。"}]},{T:"wx-view",A:{class:"info-list"},C:[{T:"wx-scroll-view",A:{"scroll-y":{L:function(e,t,i){},F:function(e,t,i,r){return!0}},style:{L:function(e,t,i){return!!e.scrollHeight||void 0},F:function(e,t,i,r){return"height: "+e.scrollHeight+"px;"}}},C:[{V:2,L:{M:["infoList"],L:function(e,t,i){return e.infoList},F:function(e,t,i,r){return e.infoList}},K:"id",C:[{T:"wx-view",A:{"bind:tap":"handleChoose","data-id":{L:function(e,t,i){return u(t[0],"id")},F:function(e,t,i,r){return l(t[0]).id}},style:"flex-shrink: 0;"},C:[{T:"wx-view",A:{class:"split-line"},C:[]},{T:"wx-view",A:{class:"info-item",id:{L:function(e,t,i){return!!u(t[0],"id")||void 0},F:function(e,t,i,r){return"item_"+l(t[0]).id}}},C:[{T:"wx-view",A:{class:"info-item__left"},C:[{T:"wx-image",A:{class:"info-item__avatar",src:{L:function(e,t,i){return u(t[0],"avatar")},F:function(e,t,i,r){return l(t[0]).avatar}}},C:[]},{T:"wx-view",A:{class:"info-item__desc__wrp"},C:[{T:"wx-view",A:{class:"info-item__nickname"},C:[{S:{L:function(e,t,i){return u(t[0],"nickname")},F:function(e,t,i,r){return l(t[0]).nickname}}}]},{V:1,B:[{B:{L:function(e,t,i){return u(t[0],"desc")},F:function(e,t,i,r){return l(t[0]).desc}},C:[{T:"wx-view",A:{class:"info-item__desc"},C:[{S:{L:function(e,t,i){return u(t[0],"desc")},F:function(e,t,i,r){return l(t[0]).desc}}}]}]}]}]}]},{V:1,B:[{B:{L:function(e,t,i){return!(!e.selected&&!u(t[0],"id"))||void 0},F:function(e,t,i,r){return e.selected===l(t[0]).id}},C:[{T:"wx-view",A:{class:"info-item__right"},C:[{T:"wx-image",A:{class:"icon-checked",src:{L:function(e,t,i){return e.iconChecked},F:function(e,t,i,r){return e.iconChecked}}},C:[]}]}]}]}]}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]},{V:1,B:[{B:{L:function(e,t,i){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,i,r){return 1===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"use-other-avatar","bind:tap":"handleCreate"},C:[{S:"使用其它头像和昵称"}]}]}]},{V:1,B:[{B:{L:function(e,t,i){return!!(e.showType||e.exceed||e.isBanModifyAvatar)||void 0},F:function(e,t,i,r){return 2===e.showType&&!e.exceed&&!e.isBanModifyAvatar}},C:[{T:"wx-view",A:{class:"info-item-add","bind:tap":"handleCreate"},C:[{T:"wx-image",A:{class:"info-item-add__plus",src:{L:function(e,t,i){return e.iconPlus},F:function(e,t,i,r){return e.iconPlus}}},C:[]},{T:"wx-view",A:{class:"info-item-add__text"},C:[{S:"使用其它头像和昵称"}]}]},{T:"wx-view",A:{class:"split-line"},C:[]}]}]},{V:1,B:[{B:{L:function(e,t,i){return e.exceed},F:function(e,t,i,r){return e.exceed}},C:[{T:"wx-view",A:{class:"exceed-tip"},C:[{S:"数量已达上限，无法新增"}]}]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel","hover-class":"hand-over"},C:[{S:"取消"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm","hover-class":"hand-over"},C:[{S:"允许"}]}]}]}]}]}],BM:{hide:[[0,"class"]],scrollHeight:[[0,1,0,1,1,0,"style"]],appIcon:[[0,1,0,0,0,"src"]],appName:[[0,1,0,0,1,0]],paddingBottom:[[0,1,0,1,"style"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},data:{overlay:!0,enter:!1,hide:!1,duration:200,appName:"",appIcon:"",infoList:[],input:"",iconChecked:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAACT0lEQVR4Ae3asUoDMRgH8ORaqgh26CYOujk4uUlBBRFXVxcXfQJfQOqDWHyBIiI4SEEEKW4OPoduWqtt4n3IQSntXa6XpEn6D7TXHl+OfD+SI5cLYygQgAAEIAABCEAAAhCAAAQgAAEIQAACPgs0ZCPK036eJ9j32OXn040fIVqlcunkq371qpJPLk2VC7oaQzi/QjwyyTZFX7SXOmdbKm2dix6U4EjJVhIUzvlHVI4OsnpS8D1oHA4hxVhVOZDrCdikY9BAk3AY4/2I8+PuTvNmEkxyPtghlomz22wlCGnHIIF04RBccEA6cYID0o0TFJAJnGCATOEEAWQSx3sg0zheA9nA8RbIFo6XQDZxvAOyjeMV0CxwlIGqnbPaT1/cSckve3vNB6pos8wKh3LMfBYjnN6vaMcrKLQC981YdGQTaZY4mUAjOBRPxRrSrHEo2dQFswEbrHLO1ihwqCwyJm4Xnk4Ph85p/+kCDiWVCvRZv36jdVtavx0RMIrkCg7lnHkPoiB6A0BvAqSUNfo/VLQPN5dwKE8lIAq0geQaTi4g00gu4uQGMoXkKs5UQLqRXMaZGkgXkus4hYCKIvmAUxhoWiRfcLQA5UXyCUcbkCqSbzhagTKReHTOmbgY3oJCdeK56v9GAsV35f917H0rz6RVm5Qy4x5zCbdxqMHageiiakju4xgDykbyA8co0GQkf3Aoh9T1IAooUmj/X6Uit+ORfB+P5ff488JLcr/r6A25SK6oCwEIQAACEIAABCAAAQhAAAIQgAAEIACBuRD4AzKlWWPvanSJAAAAAElFTkSuQmCC",iconPlus:G,scrollHeight:66,screenHeight:812,screenWidth:375,showType:1,selected:0,limit:4,exceed:!1,isBanModifyAvatar:!1,paddingBottom:194},observers:{input(e){if(e){var t=JSON.parse(e);this.setData(t)}},infoList(e=[]){console.log("[user-profile]: infoListChanged");var t=e.length,i=this.data.limit;this.setData({exceed:t>=i}),this.didChangeScrollHeight()}},created(){console.log("[user-profile]: created"),this.onViewportResize()},attached(){console.log("[user-profile]: attached"),W.triggerRender((()=>{this.setData({enter:!0})})),this._onViewportResize=this.onViewportResize.bind(this),V.push(this._onViewportResize)},detached(){V.splice(V.indexOf(this._onViewportResize),1)},methods:{_onThemeChange({theme:e}){console.log("[user-profile] _onThemeChange: ",e),"dark"===e?this.setData({iconPlus:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAASKADAAQAAAABAAAASAAAAACQMUbvAAABT0lEQVR4Ae3aMQ6CQBRFUcdYuAxKF+XyXBSly7BDTMaQ3EzyJiLQXBt4fJjBkw/NcDr5U0ABBRRQQAEFFFCgIVAaxw45NE3TY574VicfSyn3Q24Ek56RjRAQCCCMAlEEWSCAMApEEWSBAMIoEEWQBQIIo0AUQRYIIIwCUQRZIIAwCkQRZIEAwigQRZAFAgijQBRBFgggjAJRBFkggDAKRBFkgQDCKBBFkAUCCGPXwmFd1OO1/87DPOC1Dvqat8+6v9mmZ3Hy0jn7d8Wz8/TVp32g9p6zedM+Yk2W5WBvB43LJZvtDfPIuz5iPf+k6x3UM9Dac/x4Ya3gQdf7DgrwAgkUBELZDhIoCISyHSRQEAhlO0igIBDKdpBAQSCU7SCBgkAo20ECBYFQtoMECgKhbAcJFARC2Q4SKAiEsh0kUBCwrIACCiiggAIKKKDALwJvdcMTni08WagAAAAASUVORK5CYII="}):this.setData({iconPlus:G})},didChangeScrollHeight(){var{screenHeight:e,screenWidth:t}=this.data,i=65*this.data.infoList.length+1,r=e>t,n=r?.75*e:.9*e,a=r?194:118,o=r?361:277;o+i>n&&(i=n-o),console.log("[user-profile]: screenHeight",e,"scrollHeight: ",i),this.setData({scrollHeight:i,paddingBottom:a})},onViewportResize(){console.log("[user-profile]: onViewportResize");var t=e.getWindowHeight(),i=e.getWindowWidth();this.setData({screenHeight:t,screenWidth:i}),this.didChangeScrollHeight()},handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){var e=this.data.selected;this.triggerEvent("confirm",{selected:e}),this.destory()},handleCreate(){this.data.exceed||(this.setData({hide:!0}),this.triggerEvent("create"))},handleChoose(e){var t=e.currentTarget.dataset.id;t!==this.data.selected&&this.setData({selected:t})},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}}),H=(i(13),t.registerElement({is:"toast",options:{classPrefix:"toast",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{V:1,B:[{B:{L:function(e,t,i){return e.loading},F:function(e,t,i,r){return e.loading}},C:[{T:"wx-image",A:{src:"https://res.wx.qq.com/op_res/4gTGxmOnjTG1Pmsfj7JwUaZHfOb677UMxDEVI8p20yTosmcwujlY9-UEvMZm0ePGFGKS_PoQJNEN_S9YFfGTWA",class:"loading"},C:[]}]}]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,i){return e.title},F:function(e,t,i,r){return e.title}}}]}]}]}],BM:{title:[[0,0,1,0]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{loading:{type:Boolean,value:!1},title:{type:String}},methods:{close(){this.triggerEvent("destroy")}}})),z=(i(426),[]);e.onViewportResize((e=>{z.forEach((t=>t(e)))}));var Y=t.registerElement({is:"share-image",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"share-image",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.orientation||void 0},F:function(e,t,i,r){return"portrait"===e.orientation}},C:[{T:"mp-bubble-action-sheet",A:{actions:{L:function(e,t,i){return e.actionsArr},F:function(e,t,i,r){return e.actionsArr}},show:{L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},mask:{L:function(e,t,i){},F:function(e,t,i,r){return!1}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"mask "+(e.show?"mask__in":"")}},slot:"mask"},C:[]},{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"container "+(e.show?"container__in":"")}},slot:"mask"},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,i){return e.imgPath},F:function(e,t,i,r){return e.imgPath}},srcHeight:{L:function(e,t,i){return e.height},F:function(e,t,i,r){return e.height}},srcWidth:{L:function(e,t,i){return e.width},F:function(e,t,i,r){return e.width}}},C:[]}]}]}]}]}]}]},{B:1,C:[{T:"mp-horizonal-bubble",A:{actions:{L:function(e,t,i){return e.actionsArr},F:function(e,t,i,r){return e.actionsArr}},show:{L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},"bind:buttontap":"onButtonTap","bind:close":"handleClose","bind:closed":"handleClosed"},C:[{T:"wx-view",A:{slot:"content"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.show||void 0},F:function(e,t,i,r){return"landscape-container "+(e.show?"container__in":"")}}},C:[{T:"wx-view",A:{class:"scroller-container"},C:[{T:"scrollview",A:{class:"scroller","scroll-y":"1"},C:[{T:"wx-view",A:{class:"img-wrapper"},C:[{T:"wx-adaptive-image",A:{class:"img",src:{L:function(e,t,i){return e.imgPath},F:function(e,t,i,r){return e.imgPath}},srcHeight:{L:function(e,t,i){return e.height},F:function(e,t,i,r){return e.height}},srcWidth:{L:function(e,t,i){return e.width},F:function(e,t,i,r){return e.width}}},C:[]}]}]}]}]}]}]}]}]}],BM:{}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{imgPath:{type:String,public:!0,value:""},height:{type:Number,public:!0,value:0},width:{type:Number,public:!0,value:0},actions:{type:String,public:!0,value:"[]"}},data:{show:!1,actionsArr:[],imgHeight:0,imgWidth:0,orientation:"portrait"},observers:{actions(){this.getActions(this.data.actions)}},created(){this.onViewportResize()},attached(){t.triggerRender((()=>{this.setData({show:!0})})),this._onViewportResize=this.onViewportResize.bind(this),z.push(this._onViewportResize)},detached(){z.splice(z.indexOf(this._onViewportResize),1)},methods:{onViewportResize(){var t=e.getWindowWidth(),i=e.getWindowHeight();this.updateOrientation(t,i)},updateOrientation(e,t){this.setData({orientation:e<=t?"portrait":"landscape"})},getActions(e){var t=JSON.parse(e);this.setData({actionsArr:t})},onButtonTap(e){var{item:t}=e.detail;this.triggerEvent(t.action),this.triggerDestroy()},handleClose(){this.data.show&&(this.triggerEvent("cancel"),this.triggerDestroy())},handleClosed(){this.triggerEvent("destroy")},triggerDestroy(){this.setData({show:!1})}}}),$=(i(78),3),q=t.registerElement({is:"game-ranklist",options:{classPrefix:"game-ranklist",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{T:"wx-view",A:{class:"content"},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"close",src:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png","bind:tap":"close"},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,i){return e.title},F:function(e,t,i,r){return e.title}}}]},{T:"wx-view",A:{class:"close"},C:[]}]},{T:"wx-view",A:{class:"line"},C:[]},{T:"wx-view",A:{class:"body"},C:[{V:2,L:{M:["show"],L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},K:"index",C:[{T:"wx-view",A:{},C:[{T:"wx-view",A:{class:"item"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,i){return u(t[0],"head_img_url")},F:function(e,t,i,r){return l(t[0]).head_img_url}}},C:[]},{T:"wx-view",A:{class:"name"},C:[{S:{L:function(e,t,i){return u(t[0],"user_name")},F:function(e,t,i,r){return l(t[0]).user_name}}}]},{T:"wx-view",A:{class:"score"},C:[{S:{L:function(e,t,i){return u(t[0],"score_desc")},F:function(e,t,i,r){return l(t[0]).score_desc}}}]}]},{T:"wx-view",A:{class:"line"},C:[]}]}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button","bind:tap":"left"},C:[{T:"wx-image",A:{class:{L:function(e,t,i){return!!e.canl||void 0},F:function(e,t,i,r){return"btn-icon "+(e.canl?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/d71d0af9-0fb5-4fd6-aa3c-f9ff1494435e/left.png"},C:[]}]},{T:"wx-view",A:{class:"button","bind:tap":"right"},C:[{T:"wx-image",A:{class:{L:function(e,t,i){return!!e.canr||void 0},F:function(e,t,i,r){return"btn-icon "+(e.canr?"":"disabled")}},src:"https://res.wx.qq.com/a/fed_upload/dfbbd68d-9cfc-4ddc-a77a-3f049f3757f5/right.png"},C:[]}]}]}]}]}],BM:{canl:[[0,0,3,0,0,"class"]],title:[[0,0,0,1,0]],canr:[[0,0,3,1,0,"class"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{title:{type:String,value:""},list:{type:Array,value:[]}},data:{page:0,canl:!1,canr:!1,show:[],all:[]},observers:{list(e){$="portrait"===i.g.__wxConfig.deviceOrientation?5:3,Array.isArray(e)&&this.setData({page:0,all:e,canr:e.length>$,show:e.slice(0,$)})}},methods:{left(){if(this.data.canl){var e=this.data.page-1;this.setData({page:e,canl:e>0,canr:this.data.all.length>$*(e+1),show:this.data.all.slice($*e,$*(e+1))})}},right(){if(this.data.canr){var e=this.data.page+1;this.setData({page:e,canl:e>0,canr:this.data.all.length>$*(e+1),show:this.data.all.slice($*e,$*(e+1))})}},close(){this.triggerEvent("destroy")}}}),Q=(i(970),{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{style:"display:flex"},C:[{T:"wx-view",A:{style:"color:rgba(0,0,0,.5);margin-right:4px"},C:[{S:{L:function(e,t,i){return e.item_status_name},F:function(e,t,i,r){return e.item_status_name}}}]},{T:"wx-image",A:{src:"https://res.wx.qq.com/t/fed_upload/17a92d3f-e1d4-413a-bbe5-b8a08d75810b/right.png",style:"width:12px;height:24px"},C:[]}]}]};e.select=function(){return t};var i={P:"",C:[]};e["action-sheet"]=function(){return i};var r={P:"",C:[{T:"wx-view",A:{style:"height:1px;background:rgba(0,0,0,.1);width:100%;margin-top:12px;margin-bottom:16px;"},C:[]}]};e.line=function(){return r};var n={P:"",C:[{T:"mp-half-screen-dialog",A:{show:{L:function(e,t,i){return e.show},F:function(e,t,i,r){return e.show}},buttons:{L:function(e,t,i){return e.buttons},F:function(e,t,i,r){return e.buttons}},"bind:buttontap":"handleTaps"},C:[{V:7,N:"title",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{style:"display:flex;padding-left:16px;"},C:[{T:"wx-image",A:{src:{L:function(e,t,i){return u(u(e.config,"title"),"icon_url")},F:function(e,t,i,r){return l(l(e.config).title).icon_url}},style:"width:24px;height:24px;margin-right:8px"},C:[]},{T:"wx-view",A:{style:"font-size:15;font-weight:bold;text-align:left;width:100%"},C:[{S:{L:function(e,t,i){return!(!u(u(e.config,"title"),"icon_wording")&&!u(u(e.config,"title"),"title"))||void 0},F:function(e,t,i,r){return"\n        "+l(l(e.config).title).icon_wording+" "+l(l(e.config).title).title+"\n      "}}}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"action"===e.page}},C:[{T:"wx-view",A:{style:"display:flex;padding-left:16px"},C:[{T:"wx-image",A:{src:"https://res.wx.qq.com/t/fed_upload/0609c729-3ccf-4d93-a650-0c0e03634883/light.png",style:"width:24px;height:24px;position:absolute;-wx-partial-z-index:3000","bind:tap":"backToIndex"},C:[]},{T:"wx-view",A:{style:"font-size:15;font-weight:bold;text-align:center;width:100%"},C:[{S:"选择授权范围"}]}]}]}]}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-scroll-view",A:{class:"scroll","scroll-y":{L:function(e,t,i){},F:function(e,t,i,r){return!0}},"scroll-x":{L:function(e,t,i){},F:function(e,t,i,r){return!1}}},C:[{T:"wx-view",A:{style:"font-size:17px;font-weight:bold"},C:[{S:{L:function(e,t,i){return u(u(e.config,"title"),"sub_title")},F:function(e,t,i,r){return l(l(e.config).title).sub_title}}}]},{V:3,N:"line",D:""},{V:2,L:{M:["config","body","item_list"],L:function(e,t,i){return u(u(e.config,"body"),"item_list")},F:function(e,t,i,r){return l(l(e.config).body).item_list}},K:null,C:[{T:"wx-view",A:{style:"display:flex","bind:tap":"showAction","data-id":{L:function(e,t,i){return u(t[0],"item_id")},F:function(e,t,i,r){return l(t[0]).item_id}}},C:[{T:"wx-view",A:{style:"display:flex;flex-direction:column;text-align:left"},C:[{T:"wx-view",A:{style:"font-size:17px"},C:[{S:{L:function(e,t,i){return u(t[0],"item_name")},F:function(e,t,i,r){return l(t[0]).item_name}}}]},{V:1,B:[{B:{L:function(e,t,i){return u(t[0],"item_desc")},F:function(e,t,i,r){return l(t[0]).item_desc}},C:[{T:"wx-view",A:{style:"color:rgba(0,0,0,.5)"},C:[{S:{L:function(e,t,i){return u(t[0],"item_desc")},F:function(e,t,i,r){return l(t[0]).item_desc}}}]}]}]}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{V:3,N:"select",D:{I:[function(e,t,i,r){return l(t[0]).item_id},function(e,t,i,r){return l(e.infoMap)[i(0)]}],L:function(e,t,i){return{item_id:u(t[0],"item_id"),item_status_name:!(!u(t[0],"item_id")&&!u(e.infoMap,i(0)))||u(e.statusMap,i(1))}},F:function(e,t,i,r){return{item_id:l(t[0]).item_id,item_status_name:l(e.statusMap)[i(1)]}}}}]},{V:3,N:"line",D:""}]},{T:"wx-view",A:{style:"color:rgba(0,0,0,.5);display:flex;flex-direction:column"},C:[{S:{L:function(e,t,i){return!!u(u(e.config,"footer"),"content")||void 0},F:function(e,t,i,r){return"\n          "+l(l(e.config).footer).content+"\n        "}}}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"action"===e.page}},C:[{T:"wx-view",A:{},C:[{V:3,N:"line",D:""},{V:2,L:{M:["selections"],L:function(e,t,i){return e.selections},F:function(e,t,i,r){return e.selections}},K:null,C:[{T:"wx-view",A:{style:"display:flex","bind:tap":"select","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}}},C:[{T:"wx-view",A:{},C:[{S:{L:function(e,t,i){return u(t[0],"item_status_name")},F:function(e,t,i,r){return l(t[0]).item_status_name}}}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{V:1,B:[{B:{L:function(e,t,i){return!(!t[1]&&!e.selected)||void 0},F:function(e,t,i,r){return t[1]===e.selected}},C:[{T:"wx-image",A:{style:"width:24px;height:24px",src:"https://res.wx.qq.com/t/fed_upload/0609c729-3ccf-4d93-a650-0c0e03634883/done.png"},C:[]}]}]}]},{V:3,N:"line",D:""}]}]}]}]}]}]}],BM:{show:[[0,"show"]],buttons:[[0,"buttons"]]}};return e[""]=function(){return n},function(t){var i=e[t];return i?i():null}}()}),Z=e.exparser.registerElement({is:"game-grant-info",options:{classPrefix:"game-grant-info",writeIdToDOM:!0,virtualHost:!0},template:Q,properties:{},data:{infoMap:{},statusMap:{},selected:0,selections:[],config:{},infoList:{},page:"index",show:!1,buttons:[{type:"default",text:"取消"},{type:"primary",text:"确认"}]},attached(){setTimeout((()=>{this.setData({show:!0})}),100)},methods:{select(e){this.triggerEvent("select",{index:e.currentTarget.dataset.index})},backToIndex(){this.triggerEvent("back")},showAction(e){this.triggerEvent("showAction",{id:e.currentTarget.dataset.id})},handleTaps(e){0===e.detail.index?this.deny():1===e.detail.index&&this.submit()},submit(){this.triggerEvent("submit"),this.destroy()},deny(){this.triggerEvent("deny"),this.destroy()},destroy(){this.setData({show:!1}),setTimeout((()=>this.triggerEvent("destroy")),300)}}}),K=BabelRuntimeHelpers.objectSpread2,X=i.n(K),J=(i(295),{content:function(){var e={},t={P:"",C:[{T:"mp-half-screen-dialog",A:{class:"root",show:{L:function(e,t,i){return e.enter},F:function(e,t,i,r){return e.enter}}},C:[{V:7,N:"title",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{style:"padding:16px"},C:[{T:"wx-image",A:{"bind:tap":"close",style:"position:absolute;height:24px;width:24px;-wx-partial-z-index:20000",src:"https://res.wx.qq.com/t/fed_upload/eac2a9fe-fd4d-4187-8f4a-fb25fa4a21fa/close.png"},C:[]},{S:"\n      优惠券订单确认\n    "}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"choose"===e.page}},C:[{T:"wx-view",A:{style:"padding:16px"},C:[{T:"wx-image",A:{"bind:tap":"showIndex",style:"position:absolute;height:24px;width:24px;-wx-partial-z-index:20000",src:"https://res.wx.qq.com/t/fed_upload/eac2a9fe-fd4d-4187-8f4a-fb25fa4a21fa/back.png"},C:[]},{S:"\n      小游戏专属充值优惠\n    "}]}]}]}]},{V:7,N:"body",C:[{V:1,B:[{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"index"===e.page}},C:[{T:"wx-view",A:{style:"display:flex;flex-direction:column"},C:[{T:"wx-view",A:{style:"padding:16px"},C:[{T:"wx-view",A:{style:"display:flex;font-size:14px;color:rgba(0,0,0,.5)"},C:[{T:"wx-image",A:{src:{L:function(e,t,i){return u(e.accountInfo,"icon")},F:function(e,t,i,r){return l(e.accountInfo).icon}},style:"width:24px;height:24px;border-radius:12px;margin-right:4px"},C:[]},{S:{L:function(e,t,i){return!!u(e.accountInfo,"nickname")||void 0},F:function(e,t,i,r){return"\n            "+(l(e.accountInfo).nickname||"")+"\n          "}}}]},{T:"wx-view",A:{style:"display:flex;flex-direction:column;justify-content:center;align-items:center;color:rgba(0,0,0,.9);width:100%"},C:[{T:"wx-view",A:{style:"color: rgba(0,0,0,.5);font-size:14px"},C:[{S:"付款金额"}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{T:"wx-view",A:{style:"font-weight:bold;display:flex;font-family:'WeChat Sans Std'"},C:[{T:"wx-view",A:{style:"font-size:28px;line-height:33px;"},C:[{S:"￥"}]},{T:"wx-view",A:{style:"font-size:40px;line-height:44px;"},C:[{S:{L:function(e,t,i){return!(!u(e.selectedCoupon,"pay_amt")&&!e.pay_ori_amt)||void 0},F:function(e,t,i,r){return"\n                "+(l(e.selectedCoupon).pay_amt||e.pay_ori_amt)+"\n              "}}}]},{V:1,B:[{B:{L:function(e,t,i){return!!(u(e.selectedCoupon,"pay_amt")||u(e.selectedCoupon,"pay_amt")||e.pay_ori_amt)||void 0},F:function(e,t,i,r){return l(e.selectedCoupon).pay_amt&&l(e.selectedCoupon).pay_amt!==e.pay_ori_amt}},C:[{T:"wx-view",A:{style:"align-self:flex-end;display:flex"},C:[{T:"wx-view",A:{style:"position:absolute;width:100%;height:2px;background:rgba(0,0,0,.5);top:8px"},C:[]},{T:"wx-view",A:{style:"font-size:12px;line-height:14px;"},C:[{S:"￥"}]},{T:"wx-view",A:{style:"font-size:16px;line-height:18px;font-weight:bold;color:rgba(0,0,0,.5);"},C:[{S:{L:function(e,t,i){return!!e.pay_ori_amt||void 0},F:function(e,t,i,r){return"\n                  "+e.pay_ori_amt+"\n                "}}}]}]}]}]}]}]}]},{T:"wx-view",A:{style:"height:1px;width:100%;background:rgba(0,0,0,.1)"},C:[]},{T:"wx-view",A:{style:"display:flex;padding:16px;justify-content:space-between","bind:tap":"choose"},C:[{T:"wx-view",A:{},C:[{S:"优惠券"}]},{T:"wx-view",A:{style:"display:flex"},C:[{V:1,B:[{B:{L:function(e,t,i){return u(e.selectedCoupon,"amt")},F:function(e,t,i,r){return l(e.selectedCoupon).amt}},C:[{T:"wx-view",A:{style:"display:flex;margin-right:8px;color:#F06B1F;font-size:17px;justify-self:flex-end;-wx-partial-z-index:20000"},C:[{S:{L:function(e,t,i){return!!u(e.selectedCoupon,"amt")||void 0},F:function(e,t,i,r){return"\n                立减"+l(e.selectedCoupon).amt+"元\n              "}}}]}]}]},{T:"wx-image",A:{style:"width:12px;height:24px",src:"https://res.wx.qq.com/t/fed_upload/17a92d3f-e1d4-413a-bbe5-b8a08d75810b/right.png"},C:[]}]}]},{T:"wx-view",A:{style:"height:1px;width:100vw;background:rgba(0,0,0,.1)"},C:[]},{T:"wx-view",A:{style:"display:flex;justify-content:center;padding:16px"},C:[{T:"wx-view",A:{style:"background:#07C160;border-radius:4px;color:#fff;width:184px;height:40px;display:flex;justify-content:center;align-items:center;text-align:center","bind:tap":"submit"},C:[{S:"\n            立即支付\n          "}]}]}]}]},{B:{L:function(e,t,i){return!!e.page||void 0},F:function(e,t,i,r){return"choose"===e.page}},C:[{T:"wx-scroll-view",A:{"scroll-y":"1",scrollY:{L:function(e,t,i){},F:function(e,t,i,r){return!0}},"scroll-x":{L:function(e,t,i){},F:function(e,t,i,r){return!1}},class:"scroll"},C:[{T:"wx-view",A:{style:"display:flex;margin-top: 24px;margin-bottom:24px;justify-content:center"},C:[{S:"\n          你已获得总价值\n          "},{T:"wx-view",A:{style:"color:#06AE56;margin-left:4px;margin-right:4px"},C:[{S:{L:function(e,t,i){return!!e.amount||void 0},F:function(e,t,i,r){return e.amount+"元"}}}]},{S:"\n          的充值优惠\n        "}]},{V:2,L:{M:["coupons"],L:function(e,t,i){return e.coupons},F:function(e,t,i,r){return e.coupons}},K:"index",C:[{T:"wx-view",A:{style:"background:#F7F7F7;border-radius:4px;display:flex;padding:8px;margin-top:8px"},C:[{T:"wx-view",A:{style:"color:#06AE56;display:flex;flex-direction:column;justify-content:center;font-size:12px;"},C:[{T:"wx-view",A:{style:"font-size:22px;line-height:27px;font-weight:bold"},C:[{S:{L:function(e,t,i){return!!u(t[0],"amt")||void 0},F:function(e,t,i,r){return"\n                ¥"+l(t[0]).amt+"\n              "}}}]},{S:"\n              充值优惠\n            "}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{T:"wx-view",A:{style:"display:flex;flex-direction:column;flex:2;text-align:left;font-size: 12px;"},C:[{T:"wx-view",A:{},C:[{S:{L:function(e,t,i){return u(t[0],"title")},F:function(e,t,i,r){return l(t[0]).title}}}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{T:"wx-view",A:{style:"color:#F06B1F"},C:[{S:{L:function(e,t,i){return!!u(t[0],"least_price")||void 0},F:function(e,t,i,r){return"满"+l(t[0]).least_price+"元自动抵扣"}}}]},{T:"wx-view",A:{style:"flex:2"},C:[]},{T:"wx-view",A:{style:"color:rgba(0,0,0,.3)"},C:[{S:{L:function(e,t,i){return!(!u(t[0],"begintime")&&!u(t[0],"endtime"))||void 0},F:function(e,t,i,r){return"\n                "+l(t[0]).begintime+" ~ "+l(t[0]).endtime+"\n              "}}}]}]},{T:"wx-view",A:{style:"flex:1"},C:[]},{T:"wx-view",A:{style:"display:flex;justify-content:center;align-items:center;font-size: 14px;"},C:[{T:"wx-view",A:{style:{L:function(e,t,i){return!!u(t[0],"disabled")||void 0},F:function(e,t,i,r){return"background:rgba(0,0,0,.05);width:64px;height:32px;adding-right:12px;display:flex;justify-content:center;align-items:center;color:"+(l(t[0]).disabled?"rgba(0,0,0,.2)":"#06AE56")}},"bind:tap":"use","data-index":{L:function(e,t,i){return t[1]},F:function(e,t,i,r){return t[1]}}},C:[{S:{L:function(e,t,i){return!!u(t[0],"disabled")||void 0},F:function(e,t,i,r){return"\n                "+(l(t[0]).disabled?"不可用":"使用")+"\n              "}}}]}]}]}]}]}]}]}]}]}],BM:{enter:[[0,"show"]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()}),ee=e.exparser.registerElement({is:"use-coupon-modal",options:{classPrefix:"use-coupon-modal",writeIdToDOM:!0,virtualHost:!0},template:J,properties:{buy_quantity:{type:Number,value:0},pay_ori_amt:{type:String,value:""},amount:{type:Number,value:0},IS_ANDROID:{type:Boolean,value:!0},IS_PC:{type:Boolean,value:!1},coupons:{type:Array,value:[]}},data:{data:"{}",accountInfo:{},page:"index",selectedCoupon:{},enter:!1},attached(){setTimeout((()=>{this.setData(X()(X()({},JSON.parse(this.data.data)),{},{enter:!0}))}),0)},methods:{use(e){var t,{index:i}=e.currentTarget.dataset;null!==(t=this.data.coupons[i])&&void 0!==t&&t.disabled||this.setData({page:"index",selectedCoupon:this.data.coupons[i]})},showIndex(){this.setData({page:"index"})},choose(){this.setData({page:"choose"})},submit(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy",{reason:"submit"})}),200)},close(){this.setData({enter:!1,selectedCoupon:null}),setTimeout((()=>{this.triggerEvent("destroy",{reason:"cancel"})}),200)}}}),te=(i(431),t.registerElement({is:"authorize",options:{classPrefix:"authorize",writeIdToDOM:!0},template:{content:function(){var e={},t={P:"",C:[{T:"wx-view",A:{class:"root"},C:[{V:1,B:[{B:{L:function(e,t,i){return e.overlay},F:function(e,t,i,r){return e.overlay}},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"mask "+(e.enter?"mask-in":"")}}},C:[]}]}]},{T:"wx-view",A:{class:"container"},C:[{T:"wx-view",A:{class:{L:function(e,t,i){return!!e.enter||void 0},F:function(e,t,i,r){return"content "+(e.enter?"content-in":"")}}},C:[{T:"wx-view",A:{class:"head"},C:[{T:"wx-image",A:{class:"icon",src:{L:function(e,t,i){return e.icon},F:function(e,t,i,r){return e.icon}}},C:[]},{T:"wx-view",A:{class:"title"},C:[{S:{L:function(e,t,i){return!!e.nickname||void 0},F:function(e,t,i,r){return e.nickname+" 申请"}}}]}]},{T:"wx-view",A:{class:"body"},C:[{T:"wx-view",A:{class:"apply-info"},C:[{S:{L:function(e,t,i){return e.apply},F:function(e,t,i,r){return e.apply}}}]}]},{T:"wx-view",A:{class:"buttons"},C:[{T:"wx-view",A:{class:"button cancel","bind:tap":"handleCancel"},C:[{S:"拒绝"}]},{T:"wx-view",A:{class:"button confirm","bind:tap":"handleConfirm"},C:[{S:"允许"}]}]}]}]}]}],BM:{apply:[[0,1,0,1,0,0]],icon:[[0,1,0,0,0,"src"]],nickname:[[0,1,0,0,1,0]]}};return e[""]=function(){return t},function(t){var i=e[t];return i?i():null}}()},properties:{nickname:{type:String,value:""},icon:{type:String,value:""},overlay:{type:Boolean,value:!0},apply:{type:String,value:""},input:{type:String,value:""}},data:{enter:!1,duration:300},observers:{input(e){if(e){var t=JSON.parse(e);this.setData(t)}}},attached(){t.triggerRender((()=>{this.setData({enter:!0})}))},methods:{handleCancel(){this.triggerEvent("cancel"),this.destory()},handleConfirm(){this.triggerEvent("confirm"),this.destory()},destory(){this.setData({enter:!1}),setTimeout((()=>{this.triggerEvent("destroy")}),this.data.duration)}}}))})(),__sclEngine__=r})(),(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{callSystemFunction:()=>l,wrapSystemFunction:()=>u,callMiniProgramOrPluginFunction:()=>c,callThirdPartyFunction:()=>d,wrapMiniProgramOrPluginFunction:()=>h,wrapThirdPartyFunction:()=>p,surroundThirdByTryCatch:()=>f});var i=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,r=[];function n(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var i=t,n=r.length-1,o=0;o>=0&&n>=0;){var s=i.length,l=0;for(var u in a)if(a[u]){var c=i.indexOf(a[u],o);c<0||s<=c||(s=c,l=a[u].length)}if(s>=i.length)break;var d=`at <${r[n--].description}>`;i=i.slice(0,s)+d+i.slice(s+l),o=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:i,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function o(e){var t=((new Error).stack||"").match(/.+/gm),r="",n=0;t&&t.forEach((e=>{if(i.test(e)&&2===(n+=1)){var t=e.match(/^(\s*)at /),a=t?t[1].length:0;return r=e.slice(a),!1}return!0})),a[e]=r}function s(){for(var e="",t=r.length-1;t>=0;t--)r[t].pluginAppId&&(e=r[t].pluginAppId);return e}function l(e,t,i,l,c,d=!1){var h;null===a.wrapSystemFunction&&(a.wrapSystemFunction="",u("","",o)("wrapSystemFunction")),r.push({description:t});try{h=i.apply(l,c)}catch(t){if(n(t)){if("AppServiceSdkKnownError"===t.type)throw r.pop(),t;if("ThirdScriptError"===t.type){var p=s();Reporter.thirdErrorReport({error:t,source:p,triggerErrorCallback:!d})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!d})}if(d)throw r.pop(),t}return r.pop(),h}function u(e,t,i,r=!1){return function(...n){return l(e,t,i,this,n,r)}}function c(e,t,i,s,l,u=!1){var c;null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",h("","",o)("wrapMiniProgramOrPluginFunction")),r.push({description:t,pluginAppId:e});try{c=i.apply(s,l)}catch(t){if(n(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!u}),u)throw r.pop(),t}return r.pop(),c}function d(e,t,i,r,n=!1){return c(s(),e,t,i,r,n)}function h(e,t,i,r=!1){return function(...n){return c(e,t,i,this,n,r)}}function p(e,t,i=!1){return function(...r){return c(s(),e,t,this,r,i)}}function f(e,t){var i=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),r=i?i[1]:"",n=e||function(){};return function(...e){return c(s(),r,n,n,e,!1)}}__errorTracer__=t})(),(()=>{"use strict";var e={d:(t,i)=>{for(var r in i)e.o(i,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:i[r]})}};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var t={};(()=>{e.d(t,{default:()=>q});var i={APP:0,WIDGET:1,GAME:2,GAME_SUBCONTEXT:3},r={login:1,login_cancel:2,login_fail:3,request_fail:4,connectSocket_fail:5,closeSocket_fail:6,sendSocketMessage_fail:7,uploadFile_fail:8,downloadFile_fail:9,redirectTo_fail:10,navigateTo_fail:11,navigateBack_fail:12,appServiceSDKScriptError:13,webviewSDKScriptError:14,jsEnginScriptError:15,thirdScriptError:16,webviewScriptError:17,exparserScriptError:18,widgetEnginScriptError:113,widgetThirdScriptError:114,gameSDKScriptError:135,gameSubContextSDKScriptError:136,gameThirdScriptError:137,gameSubContextThirdScriptError:138,startRecord:19,startRecord_fail:20,getLocation:21,getLocation_fail:22,chooseLocation:23,chooseLocation_fail:24,openAddress:25,openAddress_fail:26,openLocation:27,openLocation_fail:28,makePhoneCall:29,makePhoneCall_fail:30,operateWXData:31,operateWXData_fail:32,checkLogin:33,checkLogin_fail:34,refreshSession:35,refreshSession_fail:36,chooseVideo:37,chooseVideo_fail:38,chooseImage:39,chooseImage_fail:40,verifyPaymentPassword:41,verifyPaymentPassword_fail:42,requestPayment:43,requestPayment_fail:44,bindPaymentCard:45,bindPaymentCard_fail:46,requestPaymentToBank:47,requestPaymentToBank_fail:48,openDocument:49,openDocument_fail:50,chooseContact:51,chooseContact_fail:52,operateMusicPlayer:53,operateMusicPlayer_fail:54,getMusicPlayerState_fail:55,playVoice_fail:56,setNavigationBarTitle_fail:57,switchTab_fail:58,getImageInfo_fail:59,enableCompass_fail:60,enableAccelerometer_fail:61,getStorage_fail:62,setStorage_fail:63,clearStorage_fail:64,removeStorage_fail:65,getStorageInfo_fail:66,getStorageSync_fail:67,setStorageSync_fail:68,addCard_fail:69,openCard_fail:70,openSetting_fail:71,reLaunch_fail:72,getClipboardData_fail:73,setClipboardData_fail:74,showShareMenu_fail:75,hideShareMenu_fail:76,showToast_fail:77,hideToast_fail:78,openBluetoothAdapter_fail:79,closeBluetoothAdapter_fail:80,getBluetoothAdapterState_fail:81,startBluetoothDevicesDiscovery_fail:82,stopBluetoothDevicesDiscovery_fail:83,getBluetoothDevices_fail:84,getConnectedBluetoothDevices_fail:85,createBLEConnection_fail:86,closeBLEConnection_fail:87,getBLEDeviceServices_fail:88,getBLEDeviceCharacteristics_fail:89,notifyBLECharacteristicValueChanged_fail:90,readBLECharacteristicValue_fail:91,checkIsSupportFacialRecognition_fail:92,startFacialRecognitionVerify_fail:93,startFacialRecognitionVerifyAndUploadVideo_fail:94,startBeaconDiscovery_fail:95,stopBeaconDiscovery_fail:96,getBeacons_fail:97,getSetting_fail:98,setScreenBrightness_fail:99,getScreenBrightness_fail:100,vibrateShort_fail:101,vibrateLong_fail:102,shareAppMessage:103,shareAppMessage_fail:104,shareAppMessage_cancel:105,shareAppMessageDirectly:106,shareAppMessageDirectly_fail:107,shareAppMessageDirectly_cancel:108,sendBizRedPacket_fail:109,addPhoneContact_fail:110,saveImageToPhotosAlbum_fail:111,saveVideoToPhotosAlbum_fail:112,setTopBarText_fail:115,setNavigationBarRightButton_fail:116,setEnableDebug_fail:117,captureScreen_fail:118,setKeepScreenOn_fail:119,createRequestTask:120,createRequestTask_fail:121,createDownloadTask:122,createDownloadTask_fail:123,createUploadTask:124,createUploadTask_fail:125,checkIsSupportSoterAuthentication_fail:126,startSoterAuthentication_fail:127,navigateToMiniProgram_fail:128,navigateBackMiniProgram_fail:129,openDeliveryList_fail:130,setNavigationBarColor_fail:131,setStatusBarStyle_fail:132,getFileInfo_fail:133,global_objs_readonly:134,writeBLECharacteristicValue_fail:206,adData_error:140,adExposureReport_fail:141,adClickReport_fail:142,adNavigateToMiniProgram_fail:143,adOpenUrl_fail:144,initGameIsolatedContext:145,initGameIsolatedContext_fail:146,initGameOpenDataContext:147,initGameOpenDataContext_fail:148,initAppIsolatedContext:149,initAppIsolatedContext_fail:150,adFollowReport_fail:151,adAddContact_fail:152,adDownloadAppInternal_fail:153,adGetInstallState_fail:154,adQueryDownloadTask_fail:155,adAddDownloadTaskStraight_fail:156,adPauseDownloadTask_fail:157,adResumeDownloadTask_fail:158,adInstallDownloadTask_fail:159,pluginDisplayInPage:160,functionalPageSuccess:161,functionalPageFail:162,functionalPageReject:163,insertInputToWebLayer_fail:166,insertVideoToWebLayer_fail:167,insertInputToWebLayer_succ:168,insertVideoToWebLayer_succ:169,insertMapToWebLayer_fail:171,insertMapToWebLayer_succ:172,insertLiveToWebLayer_fail:178,insertLiveToWebLayer_succ:179,insertCanvas2dToWebLayer_fail:180,insertCanvas2dToWebLayer_succ:181,insertWebGLToWebLayer_fail:187,insertWebGLToWebLayer_succ:186,insertVideo2ToWebLayer_fail:182,insertVideo2ToWebLayer_succ:183,insertCameraToWebLayer_fail:184,insertCameraToWebLayer_succ:185,insertTextareaToWebLayer_fail:189,insertTextareaToWebLayer_succ:188,showImageOperateSheet_fail:190,audioInstancesCountReach1024:170,bindUDP:173,sendUDPMessage:174,receiveUDPMessage:175,UDPError:176,sendUDPMessageToInvalidAddress:177,clientLibVersionNotMatch:205,subContextLibVersionNotMatch:207,oaAddContact_fail:201,oaReportBehavior_fail:202,oaGetContactData_fail:203,demoEnterHomePage:210,demoConfigRepeat:211,getUserInteractiveStorage:212,modifyFriendInteractiveStorage:213,modifyFriendInteractiveStorageShowModal:214,modifyFriendInteractiveStorageConfirm:215,modifyFriendInteractiveStorageCancel:216,disableLivePlayer:220,disableLivePusher:221,disableVideo:222,asyncApiCost:226,asyncApiCount:227,requestSubscribeMessageWithNative:230,requestSubscribeMessageWithNativeSuccess:231,requestSubscribeMessageWithNativeFail:232,tradeServiceGetPermissionBytesSuccess:235,tradeServiceGetPermissionBytesFail:236,tradeServiceCanUse:237,tradeServiceCanNotUse:238,tradeServiceTapCard:239,midasLaunchFeatureFail:240,createNormalWorker:241,createWKWorker:242,onWorkerWebViewTerminate:244,loadGameIndependentSubPackageFail:243,requestPaymentCheckTicketCount:245,requestPaymentCheckTicketFail:246,requestPaymentCheckTicketTimeout:247,useLaunchExptInfo:249,useOriginLaunchExptInfo:250,useContactExptInfo:251,reportEventInvoke:252,readdirTraverseRootDir:253,useWxProtobuf:254,useWxLanDebug:255},n={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536,BLEConnection:23886,WeAppRequestError:24247,ClickWechatAppPreviewPage:24298,MiniprogramOnNeworkWeakChange:24499,WeAppRequestErrnoInfo:24321,PublishWechatState:24488,OpenEmbeddedMiniProgramResult:24542,RequestPaymentRiskConfirm:24544},a={webview2AppService:1,appService2Webview:2,funcReady:3,firstGetData:4,firstRenderTime:5,reRenderTime:6,forceUpdateRenderTime:7,appRoute2newPage:8,newPage2pageReady:9,thirdScriptRunTime:10,pageframe:11,WAWebview:12,WAWidget:13,widgetCanvasReady:14,widgetFirstDataPush:15},o={apiCallback:1,pageInvoke:2,widgetInvoke:3},s={appServiceSDKScriptError:1,webviewSDKScriptError:2,jsEnginScriptError:3,thirdScriptError:4,webviewScriptError:5,exparserScriptError:6,widgetEnginScriptError:7,widgetThirdScriptError:8,gameSDKScriptError:10,gameSubContextSDKScriptError:12,gameThirdScriptError:13,gameSubContextThirdScriptError:14},l={[i.APP]:"thirdScriptError",[i.WIDGET]:"widgetThirdScriptError",[i.GAME]:"gameThirdScriptError",[i.GAME_SUBCONTEXT]:"gameSubContextThirdScriptError"};class u{constructor(e,t,i,r){this.BATCH_KEYVALUE_INTERVAL=e,this.REPORT_DECREASE_RATE=t,this.PERIOD_TIME=r,this.NATIVE_LIMIT_REPORT_KEY_VALUE_MAX_COUNT_ON_MINUTE=i,this.periodStartTime=Date.now(),this.currentPeriodSurplusReportCount=this.NATIVE_LIMIT_REPORT_KEY_VALUE_MAX_COUNT_ON_MINUTE,this.currentMiniPeriodReportCount=0,this.currentPeriodReportQueue=[],this._currentMiniPeriodFlag=1,this._lastReportTime=this.periodStartTime,this._periods=parseInt(this.PERIOD_TIME/this.BATCH_KEYVALUE_INTERVAL,10)}get _currentMiniPeriod(){var e=this._evaluateCurrentMiniPeriodBatch();return this._currentMiniPeriodFlag!==e?(this._currentMiniPeriodFlag=e,this.currentPeriodSurplusReportCount-=this.currentMiniPeriodReportCount,this.currentMiniPeriodReportCount=0,this._currentMiniPeriod):e}_evaluateCurrentMiniPeriodBatch(){for(var e=Date.now()-this.periodStartTime,t=1;t<=this._periods;t++)if(e<this.BATCH_KEYVALUE_INTERVAL*t)return t;return this._periods}get _currentMiniPeriodMaxReportCount(){return Date.now()-this.periodStartTime>this.PERIOD_TIME?(this.periodStartTime=Date.now(),this.currentPeriodSurplusReportCount=this.NATIVE_LIMIT_REPORT_KEY_VALUE_MAX_COUNT_ON_MINUTE,this._currentMiniPeriodMaxReportCount):this._currentMiniPeriod===this._periods?this.currentPeriodSurplusReportCount:parseInt(this.currentPeriodSurplusReportCount*this.REPORT_DECREASE_RATE,10)}pushReportQueue(e,t=!1){this.currentMiniPeriodReportCount>=this._currentMiniPeriodMaxReportCount?t&&(this.currentPeriodReportQueue.unshift(e),this.currentPeriodReportQueue.pop()):(this.currentPeriodReportQueue.push(e),this.currentMiniPeriodReportCount++)}attemptReportAndGetReportMsgs(e=!1){var t=Date.now();if(t-this._lastReportTime>this.BATCH_KEYVALUE_INTERVAL||e){if(!this.currentPeriodReportQueue.length)return[];var i=this.currentPeriodReportQueue.splice(0,this.currentPeriodReportQueue.length);return this._lastReportTime=t,i}return[]}}class c{constructor(e,t,i,r){this.BATCH_KEYVALUE_INTERVAL=t,this.PERIOD_TIME=r,this.NATIVE_LIMIT_REPORT_KEY_VALUE_MAX_COUNT_ON_MINUTE=i,this.keyStrs=e,this._lastReportTime=Date.now(),this._periodStartTime=Date.now(),this._periodReportCountMP={},this.cacheMP={}}pushReportQueue(e,t=!1){var i=this._getKey(e);this.cacheMP[i]||(this.cacheMP[i]=[]),this._periodReportCountMP[i]||(this._periodReportCountMP[i]=0),this._periodReportCountMP[i]>this.NATIVE_LIMIT_REPORT_KEY_VALUE_MAX_COUNT_ON_MINUTE?t&&(this.cacheMP[i].unshift(e),this.cacheMP[i].pop()):(this._periodReportCountMP[i]++,this.cacheMP[i].push(e))}_getKey(e){return e[this.keyStrs.find((t=>e[t]))]}attemptReportAndGetReportMsgs(e){var t=Date.now();if(t-this._lastReportTime>this.BATCH_KEYVALUE_INTERVAL||e){var i=Array.prototype.concat.call([],...Object.values(this.cacheMP));return Object.keys(this.cacheMP).forEach((e=>{this.cacheMP[e].length=0})),this._lastReportTime=t,t-this._periodStartTime>this.PERIOD_TIME&&(this._periodStartTime=t,this._periodReportCountMP={},this.cacheMP={}),i}return[]}}class d{constructor(e,t,i,r){this.reportTime=Date.now(),this.continueDecreaseReportLimitStrategys={},this.reportLimitStrategy=new c(e,t,i,r),this.BATCH_KEYVALUE_INTERVAL=t,this.keyStrs=e}shouldReport(){return Date.now()-this.reportTime>=this.BATCH_KEYVALUE_INTERVAL}setContinueDecreaseReportLimitStrategyKey(e,t,i,r,n){this.continueDecreaseReportLimitStrategys[e]=new u(t,i,r,n)}_getKey(e){return e[this.keyStrs.find((t=>e[t]))]}pushReportQueue(e,t){var i=this._getKey(e);i in this.continueDecreaseReportLimitStrategys?this.continueDecreaseReportLimitStrategys[i].pushReportQueue(e,t):this.reportLimitStrategy.pushReportQueue(e,t)}attemptReportAndGetReportMsgs(e){if(e||this.shouldReport()){var t=this.reportLimitStrategy.attemptReportAndGetReportMsgs(e),i=Object.values(this.continueDecreaseReportLimitStrategys).reduce(((e,t)=>(e.push(...t.attemptReportAndGetReportMsgs()),e)),[]);return this.reportTime=Date.now(),t.concat(i)}return[]}}var h=__wxConfig,p=(h.platform,"devtools"===h.platform),f=(h.platform,"ios"===h.platform);h.platform,h.platform,h.platform;var g=h.host||{},_=(g.env,g.env,g.env,g.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5,Object.prototype.toString);function m(e){return _.call(e).slice(8,-1)}var v=e=>"Number"===m(e);Number.isNaN,Number.isFinite,Array.isArray;var y=6e4,A=15e3,b=[],E=0,w=0,T=0,C={},S={},I={},x=new d(["key"],A,100,y);x.setContinueDecreaseReportLimitStrategyKey(18042,A,.5,100,y);var P=new d(["key"],A,100,y);function D(e){void 0!==WeixinJSBridge?e():"undefined"!=typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)}function R(...e){D((()=>{WeixinJSBridge.invoke(...e)}))}function O(e){R("reportKeyValue",{dataArray:e})}function k(e){R("reportIDKey",{dataArray:e})}function M(){!b||b.length<=0||(R("systemLog",{dataArray:b}),b=[])}var N=()=>{},L=()=>{},B=()=>{},F=()=>{},U="",W={},G=-1,V=0,j=i.APP,H="";"function"==typeof h.onReady&&h.onReady((()=>{void 0!==h.appType&&(G=h.appType),"object"==typeof h.appLaunchInfo&&(V=h.appLaunchInfo.scene),WeixinJSBridge.invoke("getNetworkType",{},(e=>{e&&e.networkType&&(H=e.networkType)})),"function"==typeof WeixinJSBridge.addEventListener&&WeixinJSBridge.addEventListener("onNetworkStatusChange",(e=>{H=e.networkType}))}));var z={surroundThirdByTryCatch:__errorTracer__.surroundThirdByTryCatch,slowReport:({key:e,cost:t,extend:i,force:r})=>{var n=o[e],a=Date.now();if(n&&(r||!(a-T<500))&&!(Object.keys(I).length>50||(I[i]||(I[i]=0),I[i]++,I[i]>3))){T=a;var s=`${t},${encodeURIComponent(i)},${n},${z.getAppType()}`;z.reportKeyValue({key:"Slow",value:s})}},speedReport:({key:e,data:t,timeMark:i,force:r})=>{var n=a[e],o=Date.now(),s=0,l=i.nativeTime;if(n&&(r||!(o-(C[n]||0)<500))&&i.startTime&&i.endTime&&(1!==n&&2!==n||l)){t&&(s=JSON.stringify(t).length),C[n]=o;var u=`${n},${i.startTime},${l},${l},${i.endTime},${s},${z.getAppType()}`;z.reportKeyValue({key:"Speed",value:u})}},reportQualityData(e,t,i,r=[]){R("reportKeyValue",{version:2,dataArray:[{key:n[e],value:[i-t,V,t,i,...r].join(",")}]})},reportKeyValue:({key:e,value:t,immediately:i=!1,number:r=!1})=>{if(r||n[e]){x.pushReportQueue({key:r?e:n[e],value:t},i);var a=x.attemptReportAndGetReportMsgs(i);a.length&&O(a)}},reportIDKey:({id:e,key:t,value:i=1})=>{if(r[t]){P.pushReportQueue({id:e||(f?"356":"358"),key:r[t],value:i});var n=P.attemptReportAndGetReportMsgs();n.length&&k(n)}},reportIDKeyDirectly:({id:e,key:t,immediately:i=!1})=>{if(t&&"356"!==e&&"358"!==e){P.pushReportQueue({id:e,key:t,value:1});var r=P.attemptReportAndGetReportMsgs(i);r.length&&k(r)}},thirdErrorReport:({key:e=j,error:t,triggerErrorCallback:i=!0,isUnhandledRejection:r=!1,promise:n,source:a=""})=>{z.errorReport({key:l[e],error:t,triggerErrorCallback:i,isThirdScriptError:!0,isUnhandledRejection:r,promise:n,source:a})},errorReport:({key:e,error:t,isThirdScriptError:r=!1,triggerErrorCallback:n=!0,isUnhandledRejection:a=!1,promise:o,source:l=""})=>{if(s[e]&&null!=t){var u,c;"function"==typeof __wxSourceMapRetrace__&&(t=__wxSourceMapRetrace__(t)),"object"==typeof t&&(t.message||t.stack)?(u=t.message,c=t.stack):(u=function(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}(t),c=m(t));var d=r?"MiniProgramError":`SystemError (${e})`,f=u,g="";t.name&&0!==c.indexOf(t.name)&&(g="\n"+t.name+": "+f);var _=`${d}\n${f}${g}\n${c}`;if(p){var v=new Error(`${d}\n${f}`);"object"==typeof t&&void 0!==t.name&&Object.defineProperty(v,"name",{value:t.name}),"object"==typeof t&&void 0!==t.stack&&Object.defineProperty(v,"stack",{value:t.stack}),console.error(v)}else a?console.error("(in promise) "+_):console.error(_);if(!(_.indexOf("subContext.js")>=0||("undefined"!=typeof window&&void 0!==window.__webviewId__?function(...e){D((()=>{WeixinJSBridge.publish(...e)}))}("WEBVIEW_ERROR_MSG",{data:{msg:_},options:{timestamp:Date.now()}}):n&&(z.triggerErrorMessage(_,a,t,o),r&&z.triggerThirdErrorMessage(_,a,t,o)),Object.keys(S).length>50||a&&"Error"!==m(t)))){var y="",A="";j!==i.APP&&j!==i.GAME||(y=U,A=function(e){var t="";return Object.keys(e).forEach(((i,r)=>{0!==r&&(t+="&");try{t+=`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`}catch(e){}})),t}(W));var b=l.match(/wx[0-9a-f]{16}/)?function(e){var t=h&&h.appContactInfo&&h.appContactInfo.call_plugin_info;if(!t||!Array.isArray(t))return 0;var i=t.find((t=>t.plugin_id===e));return i&&void 0!==i.inner_version?i.inner_version:0}(l):0;if(4===h.appType)try{H=__appServiceSDK__.getGameRelatedContextsExports().game._getCurrentNetworkType()}catch(v){}var E=[s[e],t.name,...[f,c,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.version||"",z.getAppType(),y,A,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.updateTime||"","",a?1:0,l,b,H].map((e=>{var t;try{t=encodeURIComponent(e)}catch(i){t=e}return t}))].join(",");if(S[E]||(S[E]=0),S[E]++,!(r&&S[E]>3||S[E]>3)){z.reportIDKey({key:e}),z.reportKeyValue({key:"Error",value:E});var w=x.attemptReportAndGetReportMsgs(!0);w.length&&O(w);var T=P.attemptReportAndGetReportMsgs(!0);T.length&&k(T),M()}}}},log:(e,t)=>{e&&"string"==typeof e&&(!t&&Date.now()-E<50||(E=Date.now(),b.push(e+""),b.length>=50&&M()))},submit:()=>{Date.now()-w<50||(w=Date.now(),k(P.attemptReportAndGetReportMsgs(!0)),O(x.attemptReportAndGetReportMsgs(!0)),M())},registerErrorListener:e=>{"function"==typeof e&&(N=e)},registerThirdErrorListener:e=>{"function"==typeof e&&(L=e)},registerUnhandledRejectionListener:e=>{"function"==typeof e&&(B=e)},registerThirdUnhandledRejectionListener:e=>{"function"==typeof e&&(F=e)},triggerErrorMessage:(e,t=!1,i,r)=>{setTimeout((()=>{try{t?B(i,r):N(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},triggerThirdErrorMessage:(e,t=!1,i,r)=>{setTimeout((()=>{try{t?F(i,r):L(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},setAsWidget:()=>{j=i.WIDGET},setAsGame:()=>{j=i.GAME},setAsGameSubContext:()=>{j=i.GAME_SUBCONTEXT},getAppType:()=>-1===G?0:G+1e3},Y={};function $(e){Object.defineProperty(Y,e,{get(){return t=z[e],function(...e){try{return t.apply(t,e)}catch(e){return void console.error("reporter error:"+e.message,e.stack)}};var t},configurable:!0,enumerable:!0})}Object.keys(z).forEach((e=>{$(e)})),Object.defineProperty(Y,"__route__",{set(e){U=e}}),Object.defineProperty(Y,"__method__",{set(){}}),Object.defineProperty(Y,"__query__",{set(e){W=e}}),Y.RunType=i,"undefined"!=typeof window&&Object.defineProperty(window,"onbeforeunload",{configurable:!0,enumerable:!0,writable:!0,value(){z.submit()}});var q=Y})(),Reporter=t.default})();var wgfx=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1).__importStar(i(2));t.default=r},function(e,t,i){"use strict";i.r(t),i.d(t,"__extends",(function(){return n})),i.d(t,"__assign",(function(){return a})),i.d(t,"__rest",(function(){return o})),i.d(t,"__decorate",(function(){return s})),i.d(t,"__param",(function(){return l})),i.d(t,"__metadata",(function(){return u})),i.d(t,"__awaiter",(function(){return c})),i.d(t,"__generator",(function(){return d})),i.d(t,"__createBinding",(function(){return h})),i.d(t,"__exportStar",(function(){return p})),i.d(t,"__values",(function(){return f})),i.d(t,"__read",(function(){return g})),i.d(t,"__spread",(function(){return _})),i.d(t,"__spreadArrays",(function(){return m})),i.d(t,"__await",(function(){return v})),i.d(t,"__asyncGenerator",(function(){return y})),i.d(t,"__asyncDelegator",(function(){return A})),i.d(t,"__asyncValues",(function(){return b})),i.d(t,"__makeTemplateObject",(function(){return E})),i.d(t,"__importStar",(function(){return w})),i.d(t,"__importDefault",(function(){return T})),i.d(t,"__classPrivateFieldGet",(function(){return C})),i.d(t,"__classPrivateFieldSet",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function n(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return(a=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}function s(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}function l(e,t){return function(i,r){t(i,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function d(e,t){var i,r,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function h(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}function p(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,n++)r[n]=a[o];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function y(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){a.push([e,t,i,r])>1||s(e,t)}))})}function s(e,t){try{(i=n[e](t)).value instanceof v?Promise.resolve(i.value.v).then(l,u):c(a[0][2],i)}catch(e){c(a[0][3],e)}var i}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function A(e){var t,i;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:v(e[r](t)),done:"return"===r}:n?n(t):t}:n}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))}]).default,wxGA=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=3)}([,function(e,t,i){"use strict";i.r(t),i.d(t,"__extends",(function(){return n})),i.d(t,"__assign",(function(){return a})),i.d(t,"__rest",(function(){return o})),i.d(t,"__decorate",(function(){return s})),i.d(t,"__param",(function(){return l})),i.d(t,"__metadata",(function(){return u})),i.d(t,"__awaiter",(function(){return c})),i.d(t,"__generator",(function(){return d})),i.d(t,"__createBinding",(function(){return h})),i.d(t,"__exportStar",(function(){return p})),i.d(t,"__values",(function(){return f})),i.d(t,"__read",(function(){return g})),i.d(t,"__spread",(function(){return _})),i.d(t,"__spreadArrays",(function(){return m})),i.d(t,"__await",(function(){return v})),i.d(t,"__asyncGenerator",(function(){return y})),i.d(t,"__asyncDelegator",(function(){return A})),i.d(t,"__asyncValues",(function(){return b})),i.d(t,"__makeTemplateObject",(function(){return E})),i.d(t,"__importStar",(function(){return w})),i.d(t,"__importDefault",(function(){return T})),i.d(t,"__classPrivateFieldGet",(function(){return C})),i.d(t,"__classPrivateFieldSet",(function(){return S}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function n(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var a=function(){return(a=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++)for(var n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function o(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]])}return i}function s(e,t,i,r){var n,a=arguments.length,o=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,r);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,i,o):n(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o}function l(e,t){return function(i,r){t(i,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,i,r){return new(i||(i=Promise))((function(n,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function d(e,t){var i,r,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&a[0]?r.return:a[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,a[1])).done)return n;switch(r=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{i=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function h(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}function p(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||(t[i]=e[i])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var r,n,a=i.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function m(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,n++)r[n]=a[o];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function y(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=i.apply(e,t||[]),a=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){n[e]&&(r[e]=function(t){return new Promise((function(i,r){a.push([e,t,i,r])>1||s(e,t)}))})}function s(e,t){try{(i=n[e](t)).value instanceof v?Promise.resolve(i.value.v).then(l,u):c(a[0][2],i)}catch(e){c(a[0][3],e)}var i}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function A(e){var t,i;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,n){t[r]=e[r]?function(t){return(i=!i)?{value:v(e[r](t)),done:"return"===r}:n?n(t):t}:n}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise((function(r,n){(function(e,t,i,r){Promise.resolve(r).then((function(t){e({value:t,done:i})}),t)})(r,n,(t=e[i](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(4),a=i(6),o=r.__importDefault(i(30)),s=r.__importDefault(i(79)),l=r.__importDefault(i(80)),u=r.__importStar(i(78)),c=function(){function e(){this.enumComponentType=a.enumComponentType,this.enumModelType=a.enumModelType,this.isNativeValueNative=!1,this.isEngineNative=!1,this.isPhysicsNative=!1,this.isWeakRefNative=!1,this.isCreateNativeUUMap=!1,this.isCreateNativeSUMap=!1,this.isCreateNativeULUMap=!1,this.hasNewWeakRef=!1,this.heatProtect=60,this._inited=!1}return e.prototype.heatProtectPromiseFactory=function(){return new Promise((function(e){e(60)}))},e.prototype.init=function(){var e=this;if(!this._inited){if("undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator)this.worker=new NativeGlobal.GameAccelerator,this.isEngineNative=!!this.worker.getEngine,this.isPhysicsNative=!!NativeGlobal.Phys3D,this.isRenderNative=!!this.worker.getRenderer,this.isNativeValueNative=!!this.worker.createNativeValue,this.isWeakRefNative=!!this.worker.createWeakRef,this.hasNewWeakRef=!!this.worker.createNewWeakRef,this.gaVersion=this.worker.getVersion?this.worker.getVersion():{version:"0"},this.isCreateNativeUUMap=!!this.worker.createNativeUUMap,this.isCreateNativeSUMap=!!this.worker.createNativeSUMap,this.isCreateNativeULUMap=!!this.worker.createNativeULUMap;else{this.worker=n.wxMockGA,this.isEngineNative=this.isPhysicsNative=this.isRenderNative=!1;try{var t=u.default("ga-logic");t&&"function"==typeof t.getEngine&&"function"==typeof t.getVersion&&(console.log("ga-logic process id:"+u.pid),this.worker.getEngine=function(){return t.getEngine()},this.worker.getVersion=function(){return t.getVersion()},this.isEngineNative=!0)}catch(e){}this.gaVersion=this.worker.getVersion()}var i=parseInt(this.gaVersion.version),r=NaN===i||i<100?0:i;this.gaVersion.versionNumber=r,this.config={isNativeValueNative:this.isNativeValueNative,isEngineNative:this.isEngineNative,isPhysicsNative:this.isPhysicsNative,isRenderNative:this.isRenderNative,isWeakRefNative:this.isWeakRefNative,gaVersion:this.gaVersion},setTimeout((function(){"undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator,e.isRenderNative,e.isEngineNative&&e.config.gaVersion.versionNumber,e.isNativeValueNative}),100),this._inited=!0}},e.prototype.createWeakRef=function(e){return(this.isWeakRefNative?this.worker:n.wxMockGA).createWeakRef(e)},e.prototype.createAutoRef=function(e){return(this.isWeakRefNative?this.worker:n.wxMockGA).createAutoRef(e)},e.prototype.createNewWeakRef=function(e){if(!e._wr_entry_)throw new Error("createNewWeakRef Error: is not a WeakRefSentry");return(this.isWeakRefNative?this.worker:n.wxMockGA).createNewWeakRef(e)},e.prototype.createNewWeakRefSentry=function(){var e=(this.isWeakRefNative?this.worker:n.wxMockGA).createNewWeakRefSentry();return e._wr_entry_=!0,e},e.prototype.NativeGlobalStartProfile=function(){return NativeGlobal.startProfile()},e.prototype.NativeGlobalStopProfile=function(){return NativeGlobal.stopProfile()},e.prototype.getNativeGlobalProfileResult=function(){return NativeGlobal.getProfileResult()},e.prototype.LogicAcceleratorStartProfile=function(){return this.worker.startProfile()},e.prototype.LogicAcceleratorStopProfile=function(){return this.worker.stopProfile()},e.prototype.getLogicAcceleratorProfileResult=function(){return this.worker.getProfileResult()},e.prototype.createNativeValue=function(e){var t=(this.isNativeValueNative?this.worker:n.wxMockGA).createNativeValue(e);return new s.default(t)},e.prototype.getRenderer=function(e){var t=this.isRenderNative?this.worker:n.wxMockGA,i=this.isRenderNative?e.gfx:e,r=t.getRenderer(i);return new l.default(r,this.config)},e.prototype.getEngine=function(){var e=(this.isEngineNative?this.worker:n.wxMockGA).getEngine();return new o.default(e,this.config)},e.prototype.getGAVersion=function(){return this.gaVersion},e.prototype.createNativeUUMap=function(){return(this.isCreateNativeUUMap?this.worker:n.wxMockGA).createNativeUUMap()},e.prototype.createNativeSUMap=function(){return(this.isCreateNativeSUMap?this.worker:n.wxMockGA).createNativeSUMap()},e.prototype.createNativeULUMap=function(){return(this.isCreateNativeULUMap?this.worker:n.wxMockGA).createNativeULUMap()},e}();t.default=function(){var e=new c;return!0===__wxConfig.engine&&e.init(),e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wxMockGA=void 0;var r=i(1),n=r.__importDefault(i(5)),a=i(13),o=r.__importDefault(i(14)),s=function(){function e(){this.key1toKey2=new Map,this.key2toValue=new Map}return e.prototype.set=function(e,t,i){this.key1toKey2.set(e,t),this.key2toValue.set(t,i)},e.prototype.get=function(e,t){if(this.key1toKey2.get(e)===t)return this.key2toValue.get(t)},e.prototype.del=function(e,t){this.key1toKey2.delete(e),this.key2toValue.delete(t)},e}(),l=function(){function e(){this.map=new Map}return e.prototype.set=function(e,t){this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.del=function(e){this.map.delete(e)},e}(),u=function(){function e(){}return e.prototype.createNativeValue=function(e){return new a.NativeValueNative(this._gfx,e)},e.prototype.getRenderer=function(e){return this._gfx=e,new o.default(e)},e.prototype.getEngine=function(){return new n.default},e.prototype.getVersion=function(){return{version:"mock"}},e.prototype.createWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createAutoRef=function(e){if("function"==typeof WeakRef)var t=new WeakRef(e);return{makeRef:function(){return"function"==typeof WeakRef?t.deref():e}}},e.prototype.createNewWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createNewWeakRefSentry=function(){return{__mockGA__:!0}},e.prototype.createNativeUUMap=function(){return new l},e.prototype.createNativeSUMap=function(){return new l},e.prototype.createNativeULUMap=function(){return new s},e.prototype.startProfile=function(){},e.prototype.stopProfile=function(){},e.prototype.getProfileResult=function(){return{}},e}(),c=new u;t.wxMockGA=c,t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(6),a=r.__importDefault(i(7)),o=r.__importDefault(i(9)),s=r.__importDefault(i(10)),l=r.__importDefault(i(11)),u=r.__importDefault(i(12)),c=i(8),d=1024,h=function(){function e(){this.dirtyEntities=new ArrayBuffer(d),this.entityCommands=new ArrayBuffer(d),this.cullingResult=new ArrayBuffer(d)}return e.prototype.createEntity=function(e,t){if(t&&t>0){var i=0;return i=e===n.enumEntityType.Entity3D?4*n.ENTITY3D_SIZE:4*n.ENTITY2D_SIZE,new u.default(i,t)}return new l.default(e)},e.prototype.createComponent=function(e,t,i){if(e===n.enumComponentType.Cullable&&t&&t>0){var r=4*n.CULLABLECOMPONENT_SIZE;return new u.default(r,t)}return new a.default(e,t,i)},e.prototype.createDataModel=function(e,t){return new s.default(e,t)},e.prototype.createDataBuffer=function(e){return new o.default(e)},e.prototype.createAnimatorControllerStateModel=function(e){return{id:c.requestAccelerateObjectID(),buffer:new ArrayBuffer(5*e*4+12)}},e.prototype.refreshWorldTransform=function(){},e.prototype.frustumCulling=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.orthoCulling=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p,f,g){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.addDirtyEntity=function(){},e.prototype.frameStart=function(){},e}();t.default=h},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CULLABLECOMPONENT_SIZE=t.CULLABLECOMPONENT_OFFSET=t.ENTITY3D_SIZE=t.ENTITY3D_OFFSET=t.ENTITY2D_SIZE=t.ENTITY2D_OFFSET=t.POOLINDEX_AND=t.POOLID_AND=t.componentType2SharedBufferSize=t.enumEntityType=t.enumEntityCommandType=t.enumModelType=t.enumComponentType=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Cullable=1]="Cullable",e[e.Animator=2]="Animator",e[e.SkinnedSkeleton=3]="SkinnedSkeleton"}(r=t.enumComponentType||(t.enumComponentType={})),function(e){e[e.Undefined=0]="Undefined",e[e.AnimationClipModel=1]="AnimationClipModel",e[e.SkeletonBoneInverseModel=2]="SkeletonBoneInverseModel"}(t.enumModelType||(t.enumModelType={})),function(e){e[e.SetRootEntity=1]="SetRootEntity",e[e.AddChild=2]="AddChild",e[e.AddChildAtIndex=3]="AddChildAtIndex",e[e.RemoveFromParent=4]="RemoveFromParent",e[e.DisperseSubTree=5]="DisperseSubTree",e[e.BindToBone=6]="BindToBone",e[e.BindToBones=7]="BindToBones",e[e.UnBindFromBone=8]="UnBindFromBone",e[e.UnBindFromBones=9]="UnBindFromBones",e[e.EntityCommandActive=10]="EntityCommandActive",e[e.EntityCommandInActive=11]="EntityCommandInActive"}(t.enumEntityCommandType||(t.enumEntityCommandType={})),function(e){e[e.Entity2D=0]="Entity2D",e[e.Entity3D=1]="Entity3D"}(t.enumEntityType||(t.enumEntityType={})),t.componentType2SharedBufferSize={},t.componentType2SharedBufferSize[r.Cullable]=24,t.componentType2SharedBufferSize[r.Animator]=4,t.componentType2SharedBufferSize[r.SkinnedSkeleton]=72,t.POOLID_AND=4294963200,t.POOLINDEX_AND=4095,t.ENTITY2D_OFFSET={},t.ENTITY2D_OFFSET.OFFSET_ROTATION=0,t.ENTITY2D_OFFSET.OFFSET_POSITION=1,t.ENTITY2D_OFFSET.OFFSET_SCALE=3,t.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX=5,t.ENTITY2D_SIZE=14,t.ENTITY3D_OFFSET={},t.ENTITY3D_OFFSET.DF_ROTATIONTYPE=1,t.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE=0,t.ENTITY3D_OFFSET.OFFSET_ROTATION=1,t.ENTITY3D_OFFSET.OFFSET_POSITION=5,t.ENTITY3D_OFFSET.OFFSET_SCALE=8,t.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX=11,t.ENTITY3D_SIZE=27,t.CULLABLECOMPONENT_OFFSET={},t.CULLABLECOMPONENT_OFFSET.DF_ACTIVE=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE=0,t.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER=2,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS=5,t.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID=6,t.CULLABLECOMPONENT_SIZE=7},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),n=i(8),a=function(e,t,i){switch(this.size=0,this.id=n.requestAccelerateObjectID(),e){case r.enumComponentType.Cullable:this.size=r.componentType2SharedBufferSize[e];break;case r.enumComponentType.Animator:this.size=r.componentType2SharedBufferSize[e]*t*i;break;case r.enumComponentType.SkinnedSkeleton:this.size=r.componentType2SharedBufferSize[e]*t}this.buffer=new ArrayBuffer(this.size)};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=t.requestAcceleratePoolID=t.requestAccelerateObjectID=void 0;var r=0;t.requestAccelerateObjectID=function(){return r++};var n=4096;t.requestAcceleratePoolID=function(){var e=n;return n+=4096,e},t.applyMixins=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(i){Object.defineProperty(e.prototype,i,Object.getOwnPropertyDescriptor(t.prototype,i))}))}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),n=i(8),a=function(e){this.id=n.requestAccelerateObjectID(),e===r.enumEntityType.Entity3D?this.size=108:this.size=56,this.buffer=new ArrayBuffer(this.size)};t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(8),n=function(e,t){this.id=r.requestAcceleratePoolID(),this.size=e*t,this.buffer=new ArrayBuffer(this.size)};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeValueNative=void 0;var r=!1;void 0!==__wxConfig&&__wxConfig.jitMode&&(r=!0);var n=function(e,t){r?(this.nativeBuffer=new Float32Array(t/4),this.data=this.nativeBuffer.buffer):(this.nativeBuffer=e.createNativeBuffer(t),this.data=this.nativeBuffer.data),this._f32View=new Float32Array(this.data)};t.NativeValueNative=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(15)),a=r.__importDefault(i(16)),o=i(25),s=r.__importDefault(i(26)),l=i(17),u=i(27),c=i(23),d=i(28),h=i(29),p=function(){function e(e){this._decoder=new s.default;var t=new a.default(e);this._executor=t,this._decoder._setCommandExecutor(t),this._gfx=e}return e.prototype.createCommandBuffer=function(e){return new n.default(this)},e.prototype.createRect=function(e,t,i,r){return new o.RectNative(e,t,i,r)},e.prototype.createRenderDraw=function(){return new l.RenderDrawNative},e.prototype.createVertexLayout=function(e){var t=JSON.parse(e);return new c.VertexLayoutNative(t,this._gfx)},e.prototype.createView=function(e,t,i,r){return new u.RenderViewNative(e,t,i,r)},e.prototype._executeCommandBuffer=function(e){this._decoder.decodeAndExecCommandBuffer(e),this._executor.endFrame()},e.prototype.executeCommandBuffer=function(e){},e.prototype.createBatchableVertexBuffer=function(e,t){return new d.BatchableVertexBufferNative(e,t)},e.prototype.createBatchableIndexBuffer=function(e){return new h.BatchableIndexBufferNative(e)},e}();t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._array=[],this._renderer=e}return e.prototype.extend=function(t){return new e(this._renderer)},e.prototype.putRenderDraw=function(e){this._array.push(e)},e.prototype.batchPutRenderDraw=function(e){this._array=this._array.concat(e)},e.prototype.putSubCommandBuffer=function(e){this._array.push(e)},e.prototype.reset=function(){this._array.length=0},e.prototype.execute=function(){this._renderer._executeCommandBuffer(this)},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(17),n=i(23),a=function(){function e(e){this.renderDraw2Bindings=new WeakMap,this.pipelineMap={},this._renderDrawList=[],this._batchedRenderDrawList=[],this.gfx=e}return e.prototype.drawRenderDraw=function(e){this._renderDrawList.push(e)},e.prototype.endFrame=function(){for(var e=0,t=n.createdVertexLayout;e<t.length;e++){t[e]._getBatcher().reset()}for(var i=0,r=this._renderDrawList;i<r.length;i++){var a=r[i];this.doRenderDrawBatch(a)}this._flushRenderDrawBatch();for(var o=0,s=n.createdVertexLayout;o<s.length;o++){s[o]._getBatcher().uploadBuffer()}for(var l=0,u=this._batchedRenderDrawList;l<u.length;l++){a=u[l];this.doDrawRenderDraw(a)}this.lastView&&(this.gfx.endPass(),this.lastView=null),this.gfx.commit(),this._renderDrawList.length=0,this._batchedRenderDrawList.length=0},e.prototype.doRenderDrawBatch=function(e){if(!e.batchable)return this._flushRenderDrawBatch(),void this._batchedRenderDrawList.push(e);this._startBatchedRenderDraw&&!this._compareMaterial(this._startBatchedRenderDraw,e)&&this._flushRenderDrawBatch();var t=e.vertexBuffers[0],i=e.indexBuffer;if(e.renderDataDirty){t._cloneBuffer();for(var r=t._positionViews,n=t._worldPositionViews,a=e._worldTransformMatrix,o=0;o<r.length;o++){var s=r[o],l=n[o];a.transformPoint(s,l)}}var u=e.vertexLayout._getBatcher(),c=u._ibCount;this._startBatchedRenderDraw||(this._startBatchedRenderDraw=e,this._vertexBatcher=u,this._startIBCount=c),u.batchMesh(t,i,e.baseElement,e.numElements)},e.prototype._flushRenderDrawBatch=function(){if(this._startBatchedRenderDraw){var e=new r.RenderDrawNative;Object.assign(e,this._startBatchedRenderDraw),e.indexBuffer=this._vertexBatcher._indexBuffer,e.vertexBuffers=[this._vertexBatcher._vertexBuffer],e.batchable=!1,e.baseElement=this._startIBCount,e.numElements=this._vertexBatcher._ibCount-this._startIBCount,this._batchedRenderDrawList.push(e),this._startBatchedRenderDraw=null,this._vertexBatcher=null}},e.prototype._compareMaterial=function(e,t){var i=e.raster===t.raster&&e.rgba===t.rgba&&e.shader===t.shader&&e.vertexLayout===t.vertexLayout&&e.view===t.view&&e.stencilDepth===t.stencilDepth&&e.stencilOpTest===t.stencilOpTest&&e.blend===t.blend,r=e.images.length,n=e.nativeValues.length;if(!(i=i&&r==t.images.length&&n==t.nativeValues.length))return i;for(var a=0;a<r;a++)i=i&&e.images[a]===t.images[a];for(a=0;a<n;a++)i=i&&e.nativeValues[a]===t.nativeValues[a];return i},e.prototype.doDrawRenderDraw=function(e){var t=e.view;this.lastView!==t&&(this.lastView&&this.gfx.endPass(),t._isDefaultView?"undefined"==typeof __IDE?this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):"undefined"!=typeof __gameContextWindow&&void 0!==__gameContextWindow.__IDE&&void 0!==__gameContextWindow.__IDE.realCanvas?this.gfx.beginDefaultPass(t._passAction,__gameContextWindow.__IDE.realCanvas.width,__gameContextWindow.__IDE.realCanvas.height):this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):this.gfx.beginPass(t._pass,t._passAction),this.gfx.applyViewport(t._viewport._x,t._viewport._y,t._viewport._width,t._viewport._height,!1),this.gfx.applyScissorRect(t._scissor._x,t._scissor._y,t._scissor._width,t._scissor._height,!1),this.lastView=e.view),this.gfx.applyPipeline(this.getPipeline(e)),this.gfx.applyBindings(this.getBindings(e));for(var i=0;i<e.nativeValues.length;i++){var r=e.nativeValues[i].nativeBuffer;this.gfx.applyUniforms(wgfx.EnumShaderStage.VS,i,r)}this.gfx.draw(e.baseElement,e.numElements,1)},e.prototype.getBindings=function(e){return this.gfx.makeBindings({vertex_buffers:e.vertexBuffers,index_buffer:e.indexBuffer,vs_images:e.images})},e.prototype.getPipeline=function(e){var t=e._hashForPipeline;if(!this.pipelineMap[t]){var i=this.gfx.makePipeline({layout:e.vertexLayout._config.layout,shader:e.shader,index_type:e._getIndexType(),primitive_type:e._getPrimitiveType(),depth_stencil:{stencil_front:{fail_op:e._getStencilFrontFailOp(),depth_fail_op:e._getStencilFrontDepthFailOp(),pass_op:e._getStencilFrontPassOp(),compare_func:e._getStencilFrontCompareFunc()},stencil_back:{fail_op:e._getStencilBackFailOp(),depth_fail_op:e._getStencilBackDepthFailOp(),pass_op:e._getStencilBackPassOp(),compare_func:e._getStencilBackCompareFunc()},depth_compare_func:e._getDepthCompareFunc(),depth_write_enabled:e._getDepthWriteEnable(),stencil_enabled:e._getStencilEnable(),stencil_read_mask:e._getStencilRead(),stencil_write_mask:e._getStencilWrite(),stencil_ref:e._getStencilRef()},blend:{enabled:e._getBlendEnable(),src_factor_rgb:e._getBlendSrcFactorRGB(),dst_factor_rgb:e._getBlendDstFactorRGB(),op_rgb:e._getBlendOpRGB(),src_factor_alpha:e._getBlendSrcFactorAlpha(),dst_factor_alpha:e._getBlendDstFactorAlpha(),op_alpha:e._getBlendOpAlpha(),color_write_mask:e._getBlendColorMask(),color_format:e._getColorFormat(),depth_format:e._getDepthFormat()},rasterizer:{cull_mode:e._getCullMode(),face_winding:e._getFaceWinding()}});this.pipelineMap[t]=i}return this.pipelineMap[t]},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDrawNative=void 0;var r=i(1),n=r.__importDefault(i(18)),a=r.__importDefault(i(19)),o=r.__importDefault(i(21));var s=function(){function e(){this.blend=0,this.rgba=0,this.stencilOpTest=0,this.stencilDepth=0,this.raster=0,this._hashForPipeline=""}return e.prototype.applyUpdate=function(){var e=[this.blend,this.rgba,this.stencilDepth,this.stencilOpTest,this.raster,this.vertexLayout._id,this.shader.id];this._hashForPipeline=e.join("_"),this.worldTransform&&this.batchable&&(this._worldTransformMatrix=new o.default(this.worldTransform._f32View))},e.prototype._getBlendEnable=function(){return!!n.default.WRITE_GET(this.blend,n.default.BLEND_ENABLE_MASK,n.default.BLEND_ENABLE_SHIFT)},e.prototype._getBlendOpAlpha=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_OP_ALPHA_MASK,n.default.BLEND_OP_ALPHA_SHIFT)},e.prototype._getBlendDstFactorAlpha=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_DST_FACTOR_ALPHA_MASK,n.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendSrcFactorAlpha=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_SRC_FACTOR_ALPHA_MASK,n.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendOpRGB=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_OP_RGB_MASK,n.default.BLEND_OP_RGB_SHIFT)},e.prototype._getBlendDstFactorRGB=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_DST_FACTOR_RGB_MASK,n.default.BLEND_DST_FACTOR_RGB_SHIFT)},e.prototype._getBlendSrcFactorRGB=function(){return n.default.WRITE_GET(this.blend,n.default.BLEND_SRC_FACTOR_RGB_MASK,n.default.BLEND_SRC_FACTOR_RGB_SHIFT)},e.prototype._getBlendColorMask=function(){return n.default.WRITE_GET(this.blend,n.default.COLOR_WRITE_MASK,n.default.COLOR_WRITE_SHIFT)},e.prototype._getBlendRGBA=function(){var e=a.default.fromHex(this.rgba);return[e.r/255,e.g/255,e.b/255,e.a/255]},e.prototype._getStencilFrontFailOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_FRONT_FAIL_OP_MASK,n.default.STENCIL_FRONT_FAIL_OP_SHIFT)},e.prototype._getStencilFrontDepthFailOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,n.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilFrontPassOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_FRONT_PASS_OP_MASK,n.default.STENCIL_FRONT_PASS_OP_SHIFT)},e.prototype._getStencilFrontCompareFunc=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_FRONT_COMPARE_FUN_MASK,n.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)},e.prototype._getStencilBackFailOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_BACK_FAIL_OP_MASK,n.default.STENCIL_BACK_FAIL_OP_SHIFT)},e.prototype._getStencilBackDepthFailOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,n.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilBackPassOp=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_BACK_PASS_OP_MASK,n.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype._getStencilBackCompareFunc=function(){return n.default.WRITE_GET(this.stencilOpTest,n.default.STENCIL_BACK_COMPARE_FUN_MASK,n.default.STENCIL_BACK_COMPARE_FUN_SHIFT)},e.prototype._getStencilRef=function(){return n.default.WRITE_GET(this.stencilDepth,n.default.STENCIL_REF_MASK,n.default.STENCIL_REF_SHIFT)},e.prototype._getStencilWrite=function(){return n.default.WRITE_GET(this.stencilDepth,n.default.STENCIL_WRITE_MASK,n.default.STENCIL_WRITE_SHIFT)},e.prototype._getStencilRead=function(){return n.default.WRITE_GET(this.stencilDepth,n.default.STENCIL_READ_MASK,n.default.STENCIL_READ_SHIFT)},e.prototype._getDepthCompareFunc=function(){return n.default.WRITE_GET(this.stencilDepth,n.default.DEPTH_COMPARE_FUNC_MASK,n.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype._getDepthWriteEnable=function(){return!!n.default.WRITE_GET(this.stencilDepth,n.default.DEPTH_WRITE_ENABLE_FUNC_MASK,n.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)},e.prototype._getStencilEnable=function(){return!!n.default.WRITE_GET(this.stencilDepth,n.default.STENCIL_ENABLE_FUNC_MASK,n.default.STENCIL_ENABLE_FUNC_SHIFT)},e.prototype._getColorAttachCount=function(){return n.default.WRITE_GET(this.raster,n.default.COLOR_ATTACHMENT_COUNT_MASK,n.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype._getColorFormat=function(){return n.default.WRITE_GET(this.raster,n.default.COLOR_FORMAT_MASK,n.default.COLOR_FORMAT_SHIFT)},e.prototype._getDepthFormat=function(){return n.default.WRITE_GET(this.raster,n.default.DEPTH_FORMAT_MASK,n.default.DEPTH_FORMAT_SHIFT)},e.prototype._getCullMode=function(){return n.default.WRITE_GET(this.raster,n.default.CULL_MODE_MASK,n.default.CULL_MODE_SHIFT)},e.prototype._getFaceWinding=function(){return n.default.WRITE_GET(this.raster,n.default.FACE_WINDING_MASK,n.default.FACE_WINDING_SHIFT)},e.prototype._getSampleCount=function(){return n.default.WRITE_GET(this.raster,n.default.SAMPLE_COUNT_MASK,n.default.SAMPLE_COUNT_SHIFT)},e.prototype._getPrimitiveType=function(){return n.default.WRITE_GET(this.raster,n.default.PRIMITIVE_TYPE_MASK,n.default.PRIMITIVE_TYPE_SHIFT)},e.prototype._getIndexType=function(){return n.default.WRITE_GET(this.raster,n.default.INDEX_TYPE_MASK,n.default.INDEX_TYPE_SHIFT)},e.prototype._getAlphaToCoverageEnable=function(){return n.default.WRITE_GET(this.raster,n.default.ALPHA_TO_COVERAGE_ENABLE_MASK,n.default.ALPHA_TO_COVERAGE_ENABLE_SHIFT)},e}();t.RenderDrawNative=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={WRITE_GET:function(e,t,i){return(e&t)>>i},WRITE_SET:function(e,t,i){return e<<i&t},WRITE_SET_SAFE:function(e,t,i){return e<<i>>>0&t},COLOR_WRITE_SHIFT:0,COLOR_WRITE_MASK:15,BLEND_SRC_FACTOR_RGB_SHIFT:4,BLEND_SRC_FACTOR_RGB_MASK:240,BLEND_DST_FACTOR_RGB_SHIFT:8,BLEND_DST_FACTOR_RGB_MASK:3840,BLEND_OP_RGB_SHIFT:12,BLEND_OP_RGB_MASK:61440,BLEND_SRC_FACTOR_ALPHA_SHIFT:16,BLEND_SRC_FACTOR_ALPHA_MASK:983040,BLEND_DST_FACTOR_ALPHA_SHIFT:20,BLEND_DST_FACTOR_ALPHA_MASK:15728640,BLEND_OP_ALPHA_SHIFT:24,BLEND_OP_ALPHA_MASK:251658240,BLEND_ENABLE_SHIFT:28,BLEND_ENABLE_MASK:4026531840,BLEND_RGBA_R_SHIFT:0,BLEND_RGBA_R_MASK:255,BLEND_RGBA_G_SHIFT:8,BLEND_RGBA_G_MASK:65280,BLEND_RGBA_B_SHIFT:16,BLEND_RGBA_B_MASK:16711680,BLEND_RGBA_A_SHIFT:24,BLEND_RGBA_A_MASK:4278190080,STENCIL_FRONT_FAIL_OP_SHIFT:0,STENCIL_FRONT_FAIL_OP_MASK:15,STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT:4,STENCIL_FRONT_DEPTH_FAIL_OP_MASK:240,STENCIL_FRONT_PASS_OP_SHIFT:8,STENCIL_FRONT_PASS_OP_MASK:3840,STENCIL_FRONT_COMPARE_FUN_SHIFT:12,STENCIL_FRONT_COMPARE_FUN_MASK:61440,STENCIL_BACK_FAIL_OP_SHIFT:16,STENCIL_BACK_FAIL_OP_MASK:983040,STENCIL_BACK_DEPTH_FAIL_OP_SHIFT:20,STENCIL_BACK_DEPTH_FAIL_OP_MASK:15728640,STENCIL_BACK_PASS_OP_SHIFT:24,STENCIL_BACK_PASS_OP_MASK:251658240,STENCIL_BACK_COMPARE_FUN_SHIFT:28,STENCIL_BACK_COMPARE_FUN_MASK:4026531840,STENCIL_REF_SHIFT:0,STENCIL_REF_MASK:255,STENCIL_WRITE_SHIFT:8,STENCIL_WRITE_MASK:65280,STENCIL_READ_SHIFT:16,STENCIL_READ_MASK:16711680,DEPTH_COMPARE_FUNC_SHIFT:24,DEPTH_COMPARE_FUNC_MASK:251658240,DEPTH_WRITE_ENABLE_FUNC_SHIFT:28,DEPTH_WRITE_ENABLE_FUNC_MASK:805306368,STENCIL_ENABLE_FUNC_SHIFT:30,STENCIL_ENABLE_FUNC_MASK:3221225472,COLOR_ATTACHMENT_COUNT_SHIFT:0,COLOR_ATTACHMENT_COUNT_MASK:15,COLOR_FORMAT_SHIFT:4,COLOR_FORMAT_MASK:1008,DEPTH_FORMAT_SHIFT:10,DEPTH_FORMAT_MASK:64512,BLEND_PART_MASK:65535,CULL_MODE_SHIFT:16,CULL_MODE_MASK:196608,FACE_WINDING_SHIFT:18,FACE_WINDING_MASK:786432,SAMPLE_COUNT_SHIFT:20,SAMPLE_COUNT_MASK:15728640,PRIMITIVE_TYPE_SHIFT:24,PRIMITIVE_TYPE_MASK:117440512,INDEX_TYPE_SHIFT:27,INDEX_TYPE_MASK:939524096,ALPHA_TO_COVERAGE_ENABLE_SHIFT:30,ALPHA_TO_COVERAGE_ENABLE_MASK:3221225472,RASTER_PART_MASK:4294901760}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlendType=void 0;var r,n=i(20);!function(e){e[e.Alpha=0]="Alpha",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA",e[e.None=3]="None"}(r=t.BlendType||(t.BlendType={}));var a=function(){function e(e,t,i,r){e=e||0,t=t||0,i=i||0,r="number"==typeof r?r:255,this._value32=(r<<24>>>0)+(i<<16)+(t<<8)+e}return Object.defineProperty(e.prototype,"r",{get:function(){return 255&this._value32},set:function(e){e=n.mathClamp(e,0,255),this._value32=(4294967040&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return(65280&this._value32)>>>8},set:function(e){e=n.mathClamp(e,0,255)<<8,this._value32=(4294902015&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return(16711680&this._value32)>>>16},set:function(e){e=n.mathClamp(e,0,255)<<16,this._value32=(4278255615&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return(4278190080&this._value32)>>>24},set:function(e){e=n.mathClamp(e,0,255)<<24,this._value32=(16777215&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){return new e(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BLACK",{get:function(){return new e(0,0,0,255)},enumerable:!1,configurable:!0}),e.fromHex=function(t){var i=new e(0,0,0,0);return i._value32=t,i},e.fromFloatArray=function(t){return new e(Math.ceil(255*(t[0]||0)),Math.ceil(255*(t[1]||0)),Math.ceil(255*(t[2]||0)),t.length>=4?Math.ceil(255*(t[3]||0)):255)},e.prototype.clone=function(){var t=new e(0,0,0,0);return t._value32=this._value32,t},e.prototype.equals=function(e){return e._value32===this._value32},e.prototype.set=function(e){this._value32=e._value32},e.prototype.setRGBA=function(e,t,i,r){this._value32=(r<<24>>>0)+(i<<16)+(t<<8)+e},e.prototype.setValue32=function(e){this._value32=e},e.prototype.toNormalizedArray=function(){return[this.r/255,this.g/255,this.b/255,this.a/255]},e.prototype.toRGBAString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a/255+")"},e.prototype.mix=function(t,i){return i?(i.r=this.r*t.r/255,i.g=this.g*t.g/255,i.b=this.b*t.b/255,i.a=this.a*t.a/255,i):new e(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255,this.a*t.a/255)},e.blendColorHex=function(e,t,i){var n;switch(void 0===i&&(i=r.None),i){case r.Alpha:n=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case r.RGB:n=(4278190080&e)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case r.RGBA:n=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case r.None:default:n=e}return n},e.getValue32FromRGBA=function(e,t,i,r){return(r<<24>>>0)+(i<<16)+(t<<8)+e},e.randomMix=function(e,t){var i=255&e,r=(65280&e)>>>8,n=(16711680&e)>>>16,a=(4278190080&e)>>>24,o=255&t,s=(65280&t)>>>8,l=(16711680&t)>>>16,u=(4278190080&t)>>>24,c=Math.random(),d=Math.abs(i-o)*c+Math.min(i,o),h=Math.abs(r-s)*c+Math.min(r,s),p=Math.abs(n-l)*c+Math.min(n,l),f=Math.abs(a-u)*c+Math.min(a,u);return this.getValue32FromRGBA(d,h,p,f)},e.BlendType=r,e}();t.default=a},function(e,t,i){"use strict";function r(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function n(e){return!(e&e-1)}function a(e,t){return Math.abs(e-t)<1e-6}function o(e,t,i){return(e=e>t?e:t)<i?e:i}Object.defineProperty(t,"__esModule",{value:!0}),t.m4Helper=t.m3Helper=t.quatHelper=t.v4Helper=t.v3Helper=t.v2Helper=t.mathHelper=t.mathClamp=t.nearEqual=t.isPowOf2=t.arcTanAngle=void 0,t.arcTanAngle=r,t.isPowOf2=n,t.nearEqual=a,t.mathClamp=o,t.mathHelper={arcTanAngle:r,isPowOf2:n,nearEqual:a,mathClamp:o},t.v2Helper={equal:function(e,t,i,r){return a(e[t],i[r])&&a(e[t+1],i[r+1])},add:function(e,t,i,r,n,a){n[a]=e[t]+i[r],n[a+1]=e[t+1]+i[r+1]},sub:function(e,t,i,r,n,a){n[a]=e[t]-i[r],n[a+1]=e[t+1]-i[r+1]},length:function(e,t){var i=e[t],r=e[t+1];return Math.sqrt(i*i+r*r)},normalize:function(e,i,r,n){var a=t.v2Helper.length(e,i);0===a?(r[n]=0,r[n+1]=0):(r[n]=e[i]/a,r[n+1]=e[i+1]/a)},scale:function(e,t,i,r,n){r[n]=e[t]*i,r[n+1]=e[t+1]*i},lerp:function(e,t,i,r,n,a,o){var s=1-n;a[o]=e[t]*s+i[r]*n,a[o+1]=e[t+1]*s+i[r+1]*n},dot:function(e,t,i,r){return e[t]*i[r]+e[t+1]*i[r+1]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)},getAngle:function(e,t){var i=180*Math.atan2(e[t+1],e[t])/Math.PI;return(360+Math.round(i))%360},distance:function(e,t,i,r){var n=e[t]-i[r],a=e[t+1]-i[r+1];return Math.sqrt(n*n+a*a)},copy:function(e,t,i,r){i[r+0]=e[t+0],i[r+1]=e[t+1]}},t.v3Helper={equal:function(e,t,i,r){return a(e[t],i[r])&&a(e[t+1],i[r+1])&&a(e[t+2],i[r+2])},add:function(e,t,i,r,n,a){n[a]=e[t]+i[r],n[a+1]=e[t+1]+i[r+1],n[a+2]=e[t+2]+i[r+2]},sub:function(e,t,i,r,n,a){n[a]=e[t]-i[r],n[a+1]=e[t+1]-i[r+1],n[a+2]=e[t+2]-i[r+2]},length:function(e,t){var i=e[t],r=e[t+1],n=e[t+2];return Math.sqrt(i*i+r*r+n*n)},normalize:function(e,i,r,n){var a=t.v3Helper.length(e,i);0===a?(r[n]=0,r[n+1]=0,r[n+2]=0):(r[n]=e[i]/a,r[n+1]=e[i+1]/a,r[n+2]=e[i+2]/a)},scale:function(e,t,i,r,n){r[n]=e[t]*i,r[n+1]=e[t+1]*i,r[n+2]=e[t+2]*i},lerp:function(e,t,i,r,n,a,o){var s=1-n;a[o]=e[t]*s+i[r]*n,a[o+1]=e[t+1]*s+i[r+1]*n,a[o+2]=e[t+2]*s+i[r+2]*n},dot:function(e,t,i,r){return e[t]*i[r]+e[t+1]*i[r+1]+e[t+2]*i[r+2]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)&&a(e[t+2],0)},cross:function(e,t,i,r,n,a){n[a]=e[t+1]*i[r+2]-i[r+1]*e[t+2],n[a+1]=e[t+2]*i[r]-i[r+2]*e[t],n[a+2]=e[t]*i[r+1]-i[r]*e[t+1]},distance:function(e,t,i,r){var n=e[t]-i[r],a=e[t+1]-i[r+1],o=e[t+2]-i[r+2];return Math.sqrt(n*n+a*a+o*o)},angleTo:function(e,i,n,a,o,l){var u=s;t.v3Helper.sub(n,a,e,i,u,0),t.v3Helper.normalize(u,0,u,0),o[l]=Math.asin(u[1]),o[l+1]=r(-u[2],-u[0]),o[l+2]=0},copy:function(e,t,i,r){i[r+0]=e[t+0],i[r+1]=e[t+1],i[r+2]=e[t+2]}},t.v4Helper={equal:function(e,t,i,r){return a(e[t],i[r])&&a(e[t+1],i[r+1])&&a(e[t+2],i[r+2])&&a(e[t+3],i[r+3])},add:function(e,t,i,r,n,a){n[a]=e[t]+i[r],n[a+1]=e[t+1]+i[r+1],n[a+2]=e[t+2]+i[r+2],n[a+3]=e[t+3]+i[r+3]},sub:function(e,t,i,r,n,a){n[a]=e[t]-i[r],n[a+1]=e[t+1]-i[r+1],n[a+2]=e[t+2]-i[r+2],n[a+3]=e[t+3]-i[r+3]},scale:function(e,t,i,r,n){r[n]=e[t]*i,r[n+1]=e[t+1]*i,r[n+2]=e[t+2]*i,r[n+3]=e[t+3]*i},lerp:function(e,t,i,r,n,a,o){var s=1-n;a[o]=e[t]*s+i[r]*n,a[o+1]=e[t+1]*s+i[r+1]*n,a[o+2]=e[t+2]*s+i[r+2]*n,a[o+3]=e[t+3]*s+i[r+3]*n},dot:function(e,t,i,r){return e[t]*i[r]+e[t+1]*i[r+1]+e[t+2]*i[r+2]+e[t+3]*i[r+3]},isZero:function(e,t){return a(e[t],0)&&a(e[t+1],0)&&a(e[t+2],0)&&a(e[t+3],0)},copy:function(e,t,i,r){4===e.length?i.set(e,r):(i[r+0]=e[t+0],i[r+1]=e[t+1],i[r+2]=e[t+2],i[r+3]=e[t+3])}},t.quatHelper={multiply:function(e,t,i,r,n,a){var o=e[t+0],s=e[t+1],l=e[t+2],u=e[t+3],c=i[r+0],d=i[r+1],h=i[r+2],p=i[r+3],f=s*h-l*d,g=l*c-o*h,_=o*d-s*c,m=o*c+s*d+l*h;n[a]=o*p+c*u+f,n[a+1]=s*p+d*u+g,n[a+2]=l*p+h*u+_,n[a+3]=u*p-m},invert:function(e,t,i,r){var n=e[t+0],a=e[t+1],o=e[t+2],s=e[t+3],l=n*n+a*a+o*o+s*s,u=l?1/l:0;i[r]=-n*u,i[r+1]=-a*u,i[r+2]=-o*u,i[r+3]=s*u},toMatrix4:function(e,t,i,r){var n=e[t],a=e[t+1],o=e[t+2],s=e[t+3],l=n+n,u=a+a,c=o+o,h=n*l,p=a*l,f=a*u,g=o*l,_=o*u,m=o*c,v=s*l,y=s*u,A=s*c;i.set(d,r),i[r]=1-f-m,i[r+1]=p+A,i[r+2]=g-y,i[r+4]=p-A,i[r+5]=1-h-m,i[r+6]=_+v,i[r+8]=g+y,i[r+9]=_-v,i[r+10]=1-h-f},fromMatrix4:function(e,t,i,r){var n,a,o=e,s=t,l=c,u=o[s+0]+o[s+5]+o[s+10];u>0?(n=Math.sqrt(u+1),l[3]=.5*n,n=.5/n,l[0]=(o[s+6]-o[s+9])*n,l[1]=(o[s+8]-o[s+2])*n,l[2]=(o[s+1]-o[s+4])*n):o[s+0]>=o[s+5]&&o[s+0]>=o[s+10]?(a=.5/(n=Math.sqrt(1+o[s+0]-o[s+5]-o[s+10])),l[0]=.5*n,l[1]=(o[s+1]+o[s+4])*a,l[2]=(o[s+2]+o[s+8])*a,l[3]=(o[s+6]-o[s+9])*a):o[s+5]>o[s+10]?(a=.5/(n=Math.sqrt(1+o[s+5]-o[s+0]-o[s+10])),l[0]=(o[s+4]+o[s+1])*a,l[1]=.5*n,l[2]=(o[s+9]+o[s+6])*a,l[3]=(o[s+8]-o[s+2])*a):(a=.5/(n=Math.sqrt(1+o[s+10]-o[s+0]-o[s+5])),l[0]=(o[s+8]+o[s+2])*a,l[1]=(o[s+9]+o[s+6])*a,l[2]=.5*n,l[3]=(o[s+1]-o[s+4])*a),i.set(l,r)},fromEulerAngles:function(e,i,r,n){t.quatHelper.fromYawRawPitch(e[i+1],e[i],e[i+2],r,n)},fromYawRawPitch:function(e,t,i,r,n){var a=.5*i,o=.5*t,s=.5*e,l=Math.sin(a),u=Math.cos(a),c=Math.sin(o),d=Math.cos(o),h=Math.sin(s),p=Math.cos(s);r[n]=p*c*u+h*d*l,r[n+1]=h*d*u-p*c*l,r[n+2]=p*d*l-h*c*u,r[n+3]=p*d*u+h*c*l},toEulerAngles:function(e,i,r,n){t.quatHelper.toYawRawPitch(e,i,r,n)},toYawRawPitch:function(e,i,n,a){t.quatHelper.transformDirection(e,i,f,0,s,0),t.quatHelper.transformDirection(e,i,g,0,l,0);var o=l;t.v3Helper.angleTo(_,0,s,0,u,0);var c=u;c[0]===Math.PI/2?(c[1]=r(o[2],o[0]),c[2]=0):c[0]===-Math.PI/2?(c[1]=r(-o[2],-o[0]),c[2]=0):(t.m4Helper.yRotation(-c[1],m,0),t.m4Helper.xRotation(-c[0],v,0),t.m4Helper.transformPoint(m,0,l,0,l,0),t.m4Helper.transformPoint(v,0,l,0,l,0),c[2]=r(o[1],-o[0])),c[1]<=-Math.PI&&(c[1]=Math.PI),c[2]<=-Math.PI&&(c[2]=Math.PI),c[1]>=Math.PI&&c[2]>=Math.PI&&(c[1]=0,c[2]=0,c[0]=Math.PI-c[0]),n.set(c,a)},slerp:function(e,t,i,r,n,a,o){var s,l,u,c,d,h=e[t+0],p=e[t+1],f=e[t+2],g=e[t+3],_=i[r+0],m=i[r+1],v=i[r+2],y=i[r+3];return(l=h*_+p*m+f*v+g*y)<0&&(l=-l,_=-_,m=-m,v=-v,y=-y),1-l>1e-6?(s=Math.acos(l),u=Math.sin(s),c=Math.sin((1-n)*s)/u,d=Math.sin(n*s)/u):(c=1-n,d=n),a[o]=c*h+d*_,a[o+1]=c*p+d*m,a[o+2]=c*f+d*v,a[o+3]=c*g+d*y,a},transformDirection:function(e,t,i,r,n,a){var o=i[r],s=i[r+1],l=i[r+2],u=e[t],c=e[t+1],d=e[t+2],h=e[t+3],p=h*o+c*l-d*s,f=h*s+d*o-u*l,g=h*l+u*s-c*o,_=-u*o-c*s-d*l;n[a]=p*h+_*-u+f*-d-g*-c,n[a+1]=f*h+_*-c+g*-u-p*-d,n[a+2]=g*h+_*-d+p*-c-f*-u}},t.m3Helper={translate:function(e,t,i,r,n,a){var o=e[t+0],s=e[t+1],l=e[t+2],u=e[t+3+0],c=e[t+3+1],d=e[t+3+2],h=e[t+6+0],p=e[t+6+1],f=e[t+6+2];9===e.length?n.set(e,a):n===e&&a===t||(n[a]=o,n[a+1]=s,n[a+2]=l,n[a+3]=u,n[a+4]=c,n[a+5]=d),n[a+6]=o*i+u*r+h,n[a+7]=s*i+c*r+p,n[a+8]=l*i+d*r+f},scale:function(e,t,i,r,n,a){n[a+0]=i*e[t+0],n[a+1]=i*e[t+1],n[a+3]=r*e[t+3],n[a+4]=r*e[t+4],n===e&&a===t||(n[a+6]=e[t+6],n[a+7]=e[t+7],n[a+8]=e[t+8])},rotate:function(e,t,i,r,n){var a=e[t+0],o=e[t+1],s=e[t+2],l=e[t+3],u=e[t+4],c=e[t+5],d=Math.cos(i),h=Math.sin(i);r[n+0]=d*a-h*l,r[n+1]=d*o-h*u,r[n+2]=d*s-h*c,r[n+3]=d*l+h*a,r[n+4]=d*u+h*o,r[n+5]=d*c+h*s,r===e&&n===t||(r[n+6]=e[t+6],r[n+7]=e[t+7],r[n+8]=e[t+8])},inverse:function(e,t,i,r){var n=e[t+0+0],a=e[t+0+1],o=e[t+0+2],s=e[t+3+0],l=e[t+3+1],u=e[t+3+2],c=e[t+6+0],d=e[t+6+1],h=e[t+6+2],p=l*h-u*d,f=a*h-o*d,g=a*u-o*l,_=1/(n*p-s*f+c*g);i[r+0]=_*p,i[r+1]=-_*f,i[r+2]=_*g,i[r+3]=-_*(s*h-u*c),i[r+4]=_*(n*h-o*c),i[r+5]=-_*(n*u-o*s),i[r+6]=_*(s*d-l*c),i[r+7]=-_*(n*d-a*c),i[r+8]=_*(n*l-a*s)},multiply:function(e,t,i,r,n,a){var o=e[t+0+0],s=e[t+0+1],l=e[t+0+2],u=e[t+3+0],c=e[t+3+1],d=e[t+3+2],h=e[t+6+0],p=e[t+6+1],f=e[t+6+2],g=i[r+0+0],_=i[r+0+1],m=i[r+0+2],v=i[r+3+0],y=i[r+3+1],A=i[r+3+2],b=i[r+6+0],E=i[r+6+1],w=i[r+6+2];n[a+0]=g*o+_*u+m*h,n[a+1]=g*s+_*c+m*p,n[a+2]=g*l+_*d+m*f,n[a+3]=v*o+y*u+A*h,n[a+4]=v*s+y*c+A*p,n[a+5]=v*l+y*d+A*f,n[a+6]=b*o+E*u+w*h,n[a+7]=b*s+E*c+w*p,n[a+8]=b*l+E*d+w*f},transformPoint:function(e,t,i,r,n,a){var o=i[r+0],s=i[r+1],l=o*e[t+0+2]+s*e[t+3+2]+e[t+6+2];n[a+0]=(o*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/l,n[a+1]=(o*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/l},decomposeScale:function(e,t,i,r){var n=e[t+0],a=e[t+1],o=e[t+3],s=e[t+4];i[r]=Math.sqrt(n*n+a*a),i[r+1]=Math.sqrt(o*o+s*s)},copy:function(e,t,i,r){if(9===e.length)i.set(e,r);else for(var n=0;n<9;n++)i[r+n]=e[t+n]}},t.m4Helper={lookAt:function(e,i,r,n,a,o,c,h){var p=s,f=l,g=u;t.v3Helper.sub(e,i,r,n,p,0),t.v3Helper.normalize(p,0,p,0),t.v3Helper.cross(a,o,p,0,f,0),t.v3Helper.normalize(f,0,f,0),t.v3Helper.cross(p,0,f,0,g,0),t.v3Helper.normalize(g,0,g,0),c.set(d,h),c[h]=f[0],c[h+1]=f[1],c[h+2]=f[2],c[h+4]=g[0],c[h+5]=g[1],c[h+6]=g[2],c[h+8]=p[0],c[h+9]=p[1],c[h+10]=p[2],c[h+12]=e[i],c[h+13]=e[i+1],c[h+14]=e[i+2]},perspective:function(e,t,i,r,n,a){var o=Math.tan(.5*Math.PI-.5*e),s=1/(i-r);n.set(h,a),n[a]=o/t,n[a+5]=o,n[a+10]=(i+r)*s,n[a+14]=i*r*s*2},orthographic:function(e,t,i,r,n,a,o,s){o.set(p,s),o[s]=2/(t-e),o[s+5]=2/(r-i),o[s+10]=2/(n-a),o[s+12]=(e+t)/(e-t),o[s+13]=(i+r)/(i-r),o[s+14]=(n+a)/(n-a)},xRotation:function(e,t,i){var r=Math.cos(e),n=Math.sin(e);t.set(d,i),t[i+5]=r,t[i+6]=n,t[i+9]=-n,t[i+10]=r},yRotation:function(e,t,i){var r=Math.cos(e),n=Math.sin(e);t.set(d,i),t[i]=r,t[i+2]=-n,t[i+8]=n,t[i+10]=r},zRotation:function(e,t,i){var r=Math.cos(e),n=Math.sin(e);t.set(d,i),t[i]=r,t[i+1]=n,t[i+4]=-n,t[i+5]=r},axisRotation:function(e,t,i,r,n){var a=e[t],o=e[t+1],s=e[t+2],l=Math.sqrt(a*a+o*o+s*s),u=(a/=l)*a,c=(o/=l)*o,h=(s/=l)*s,p=Math.cos(i),f=Math.sin(i),g=1-p;return r.set(d,n),r[n]=u+(1-u)*p,r[n+1]=a*o*g+s*f,r[n+2]=a*s*g-o*f,r[n+4]=a*o*g-s*f,r[n+5]=c+(1-c)*p,r[n+6]=o*s*g+a*f,r[n+8]=a*s*g+o*f,r[n+9]=o*s*g-a*f,r[n+10]=h+(1-h)*p,r},composeTRS:function(e,t,i,r,n,a,o,s){16===i.length?o.set(i,s):(o[s+3]=0,o[s+7]=0,o[s+11]=0,o[s+15]=0);var l=n[a],u=n[a+1],c=n[a+2];o[s+0]=i[r+0]*l,o[s+1]=i[r+1]*l,o[s+2]=i[r+2]*l,o[s+4]=i[r+4]*u,o[s+5]=i[r+5]*u,o[s+6]=i[r+6]*u,o[s+8]=i[r+8]*c,o[s+9]=i[r+9]*c,o[s+10]=i[r+10]*c,o[s+12]=e[t],o[s+13]=e[t+1],o[s+14]=e[t+2]},composeTQS:function(e,i,r,n,a,o,s,l){t.quatHelper.toMatrix4(r,n,m,0),t.m4Helper.composeTRS(e,i,m,0,a,o,s,l)},translate:function(e,t,i,r,n,a,o){var s=e[t+0],l=e[t+1],u=e[t+2],c=e[t+3],d=e[t+4+0],h=e[t+4+1],p=e[t+4+2],f=e[t+4+3],g=e[t+8+0],_=e[t+8+1],m=e[t+8+2],v=e[t+8+3],y=e[t+12+0],A=e[t+12+1],b=e[t+12+2],E=e[t+12+3];16===e.length?a.set(e,o):a===e&&o===t||(a[o]=s,a[o+1]=l,a[o+2]=u,a[o+3]=c,a[o+4]=d,a[o+5]=h,a[o+6]=p,a[o+7]=f,a[o+8]=g,a[o+9]=_,a[o+10]=m,a[o+11]=v),a[o+12]=s*i+d*r+g*n+y,a[o+13]=l*i+h*r+_*n+A,a[o+14]=u*i+p*r+m*n+b,a[o+15]=c*i+f*r+v*n+E},scale:function(e,t,i,r,n,a,o){a[o+0]=i*e[t+0+0],a[o+1]=i*e[t+0+1],a[o+2]=i*e[t+0+2],a[o+3]=i*e[t+0+3],a[o+4]=r*e[t+4+0],a[o+5]=r*e[t+4+1],a[o+6]=r*e[t+4+2],a[o+7]=r*e[t+4+3],a[o+8]=n*e[t+8+0],a[o+9]=n*e[t+8+1],a[o+10]=n*e[t+8+2],a[o+11]=n*e[t+8+3],a===e&&o===t||(a[o+12]=e[t+12],a[o+13]=e[t+13],a[o+14]=e[t+14],a[o+15]=e[t+15])},xRotate:function(e,t,i,r,n){16===e.length?r.set(e,n):r===e&&n===t||(r[n+0]=e[t+0],r[n+1]=e[t+1],r[n+2]=e[t+2],r[n+3]=e[t+3],r[n+12]=e[t+12],r[n+13]=e[t+13],r[n+14]=e[t+14],r[n+15]=e[t+15]);var a=e[t+4],o=e[t+5],s=e[t+6],l=e[t+7],u=e[t+8],c=e[t+9],d=e[t+10],h=e[t+11],p=Math.cos(i),f=Math.sin(i);r[n+4]=p*a+f*u,r[n+5]=p*o+f*c,r[n+6]=p*s+f*d,r[n+7]=p*l+f*h,r[n+8]=p*u-f*a,r[n+9]=p*c-f*o,r[n+10]=p*d-f*s,r[n+11]=p*h-f*l},yRotate:function(e,t,i,r,n){16===e.length?r.set(e,n):r===e&&n===t||(r[n+4]=e[t+4],r[n+5]=e[t+5],r[n+6]=e[t+6],r[n+7]=e[t+7],r[n+12]=e[t+12],r[n+13]=e[t+13],r[n+14]=e[t+14],r[n+15]=e[t+15]);var a=e[t+0+0],o=e[t+0+1],s=e[t+0+2],l=e[t+0+3],u=e[t+8+0],c=e[t+8+1],d=e[t+8+2],h=e[t+8+3],p=Math.cos(i),f=Math.sin(i);r[n+0]=p*a-f*u,r[n+1]=p*o-f*c,r[n+2]=p*s-f*d,r[n+3]=p*l-f*h,r[n+8]=p*u+f*a,r[n+9]=p*c+f*o,r[n+10]=p*d+f*s,r[n+11]=p*h+f*l},zRotate:function(e,t,i,r,n){16===e.length?r.set(e,n):r===e&&n===t||(r[n+8]=e[t+8],r[n+9]=e[t+9],r[n+10]=e[t+10],r[n+11]=e[t+11],r[n+12]=e[t+12],r[n+13]=e[t+13],r[n+14]=e[t+14],r[n+15]=e[t+15]);var a=e[t+0+0],o=e[t+0+1],s=e[t+0+2],l=e[t+0+3],u=e[t+4+0],c=e[t+4+1],d=e[t+4+2],h=e[t+4+3],p=Math.cos(i),f=Math.sin(i);r[n+0]=p*a+f*u,r[n+1]=p*o+f*c,r[n+2]=p*s+f*d,r[n+3]=p*l+f*h,r[n+4]=p*u-f*a,r[n+5]=p*c-f*o,r[n+6]=p*d-f*s,r[n+7]=p*h-f*l},axisRotate:function(e,t,i,r,n,a,o){var s=i[r],l=i[r+1],u=i[r+2],c=Math.sqrt(s*s+l*l+u*u),d=(s/=c)*s,h=(l/=c)*l,p=(u/=c)*u,f=Math.cos(n),g=Math.sin(n),_=1-f,m=d+(1-d)*f,v=s*l*_+u*g,y=s*u*_-l*g,A=s*l*_-u*g,b=h+(1-h)*f,E=l*u*_+s*g,w=s*u*_+l*g,T=l*u*_-s*g,C=p+(1-p)*f,S=e[t+0],I=e[t+1],x=e[t+2],P=e[t+3],D=e[t+4],R=e[t+5],O=e[t+6],k=e[t+7],M=e[t+8],N=e[t+9],L=e[t+10],B=e[t+11];a[o+0]=m*S+v*D+y*M,a[o+1]=m*I+v*R+y*N,a[o+2]=m*x+v*O+y*L,a[o+3]=m*P+v*k+y*B,a[o+4]=A*S+b*D+E*M,a[o+5]=A*I+b*R+E*N,a[o+6]=A*x+b*O+E*L,a[o+7]=A*P+b*k+E*B,a[o+8]=w*S+T*D+C*M,a[o+9]=w*I+T*R+C*N,a[o+10]=w*x+T*O+C*L,a[o+11]=w*P+T*k+C*B,a===e&&o===t||(a[o+12]=e[t+12],a[o+13]=e[t+13],a[o+14]=e[t+14],a[o+15]=e[t+15])},multiply:function(e,t,i,r,n,a){var o=i[r+0+0],s=i[r+0+1],l=i[r+0+2],u=i[r+0+3],c=i[r+4+0],d=i[r+4+1],h=i[r+4+2],p=i[r+4+3],f=i[r+8+0],g=i[r+8+1],_=i[r+8+2],m=i[r+8+3],v=i[r+12+0],y=i[r+12+1],A=i[r+12+2],b=i[r+12+3],E=e[t+0+0],w=e[t+0+1],T=e[t+0+2],C=e[t+0+3],S=e[t+4+0],I=e[t+4+1],x=e[t+4+2],P=e[t+4+3],D=e[t+8+0],R=e[t+8+1],O=e[t+8+2],k=e[t+8+3],M=e[t+12+0],N=e[t+12+1],L=e[t+12+2],B=e[t+12+3];n[a+0]=o*E+s*S+l*D+u*M,n[a+1]=o*w+s*I+l*R+u*N,n[a+2]=o*T+s*x+l*O+u*L,n[a+3]=o*C+s*P+l*k+u*B,n[a+4]=c*E+d*S+h*D+p*M,n[a+5]=c*w+d*I+h*R+p*N,n[a+6]=c*T+d*x+h*O+p*L,n[a+7]=c*C+d*P+h*k+p*B,n[a+8]=f*E+g*S+_*D+m*M,n[a+9]=f*w+g*I+_*R+m*N,n[a+10]=f*T+g*x+_*O+m*L,n[a+11]=f*C+g*P+_*k+m*B,n[a+12]=v*E+y*S+A*D+b*M,n[a+13]=v*w+y*I+A*R+b*N,n[a+14]=v*T+y*x+A*O+b*L,n[a+15]=v*C+y*P+A*k+b*B},transformVector:function(e,t,i,r,n,a){for(var o=0,s=0,l=0;l<4;++l){s=t+l,n[o=a+l]=0;for(var u=0;u<4;++u)n[o]+=i[r+u]*e[s+4*u]}},transformDirection:function(e,t,i,r,n,a){var o=i[r+0],s=i[r+1],l=i[r+2];n[a+0]=o*e[t+0+0]+s*e[t+4+0]+l*e[t+8+0],n[a+1]=o*e[t+0+1]+s*e[t+4+1]+l*e[t+8+1],n[a+2]=o*e[t+0+2]+s*e[t+4+2]+l*e[t+8+2]},transformPoint:function(e,t,i,r,n,a){var o=i[r+0],s=i[r+1],l=i[r+2],u=o*e[t+0+3]+s*e[t+4+3]+l*e[t+8+3]+e[t+12+3];n[a+0]=(o*e[t+0+0]+s*e[t+4+0]+l*e[t+8+0]+e[t+12+0])/u,n[a+1]=(o*e[t+0+1]+s*e[t+4+1]+l*e[t+8+1]+e[t+12+1])/u,n[a+2]=(o*e[t+0+2]+s*e[t+4+2]+l*e[t+8+2]+e[t+12+2])/u},decomposeTransRotMatScale:function(e,i,r,n,a,o,c,h){r[n+0]=e[i+12],r[n+1]=e[i+13],r[n+2]=e[i+14];var p=e[i+0],f=e[i+1],g=e[i+2],_=e[i+4],m=e[i+5],v=e[i+6],y=e[i+8],A=e[i+9],b=e[i+10],E=c[h+0]=Math.sqrt(p*p+f*f+g*g),w=c[h+1]=Math.sqrt(_*_+m*m+v*v),T=c[h+2]=Math.sqrt(y*y+A*A+b*b);if(a.set(d,o),0===E||0===w||0===T)return!1;var C=s;C[0]=y/T,C[1]=A/T,C[2]=b/T;var S=l;S[0]=p/E,S[1]=f/E,S[2]=g/E;var I=u;t.v3Helper.cross(C,0,S,0,I,0);var x=S;return t.v3Helper.cross(I,0,C,0,x,0),a.set(x,o),a.set(I,o+4),a.set(C,o+8),a[o+0]*p+a[o+1]*f+a[o+2]*g<0&&(c[h+0]=-E),a[o+4]*_+a[o+5]*m+a[o+6]*v<0&&(c[h+1]=-w),a[o+8]*y+a[o+9]*A+a[o+10]*b<0&&(c[h+2]=-T),!0},inverse:function(e,t,i,r){var n=e[t+0+0],a=e[t+0+1],o=e[t+0+2],s=e[t+0+3],l=e[t+4+0],u=e[t+4+1],c=e[t+4+2],d=e[t+4+3],h=e[t+8+0],p=e[t+8+1],f=e[t+8+2],g=e[t+8+3],_=e[t+12+0],m=e[t+12+1],v=e[t+12+2],y=e[t+12+3],A=f*y,b=v*g,E=c*y,w=v*d,T=c*g,C=f*d,S=o*y,I=v*s,x=o*g,P=f*s,D=o*d,R=c*s,O=h*m,k=_*p,M=l*m,N=_*u,L=l*p,B=h*u,F=n*m,U=_*a,W=n*p,G=h*a,V=n*u,j=l*a,H=A*u+w*p+T*m-(b*u+E*p+C*m),z=b*a+S*p+P*m-(A*a+I*p+x*m),Y=E*a+I*u+D*m-(w*a+S*u+R*m),$=C*a+x*u+R*p-(T*a+P*u+D*p),q=1/(n*H+l*z+h*Y+_*$);i[r+0]=q*H,i[r+1]=q*z,i[r+2]=q*Y,i[r+3]=q*$,i[r+4]=q*(b*l+E*h+C*_-(A*l+w*h+T*_)),i[r+5]=q*(A*n+I*h+x*_-(b*n+S*h+P*_)),i[r+6]=q*(w*n+S*l+R*_-(E*n+I*l+D*_)),i[r+7]=q*(T*n+P*l+D*h-(C*n+x*l+R*h)),i[r+8]=q*(O*d+N*g+L*y-(k*d+M*g+B*y)),i[r+9]=q*(k*s+F*g+G*y-(O*s+U*g+W*y)),i[r+10]=q*(M*s+U*d+V*y-(N*s+F*d+j*y)),i[r+11]=q*(B*s+W*d+j*g-(L*s+G*d+V*g)),i[r+12]=q*(M*f+B*v+k*c-(L*v+O*c+N*f)),i[r+13]=q*(W*v+O*o+U*f-(F*f+G*v+k*o)),i[r+14]=q*(F*c+j*v+N*o-(V*v+M*o+U*c)),i[r+15]=q*(V*f+L*o+G*c-(W*c+j*f+B*o))},transpose:function(e,t,i,r){i[r+0]=e[t+0],i[r+1]=e[t+4],i[r+2]=e[t+8],i[r+3]=e[t+12],i[r+4]=e[t+1],i[r+5]=e[t+5],i[r+6]=e[t+9],i[r+7]=e[t+13],i[r+8]=e[t+2],i[r+9]=e[t+6],i[r+10]=e[t+10],i[r+11]=e[t+14],i[r+12]=e[t+3],i[r+13]=e[t+7],i[r+14]=e[t+11],i[r+15]=e[t+15]},composeRST3toRST4:function(e,t,i,r){i.set(d,r),i[r+0]=e[t+0],i[r+1]=e[t+1],i[r+4]=e[t+3],i[r+5]=e[t+4],i[r+10]=1,i[r+12]=e[t+6],i[r+13]=e[t+7],i[r+15]=e[t+8]},copy:function(e,t,i,r){if(16===e.length)i.set(e,r);else for(var n=0;n<16;n++)i[r+n]=e[t+n]}};var s=new Float32Array(3),l=new Float32Array(3),u=new Float32Array(3),c=new Float32Array(4),d=new Float32Array(16);d.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var h=new Float32Array(16).fill(0);h[11]=-1;var p=new Float32Array(16).fill(0);p[15]=1;var f=new Float32Array([0,0,-1]),g=new Float32Array([0,1,0]),_=new Float32Array([0,0,0]),m=new Float32Array(16),v=new Float32Array(16)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1).__importDefault(i(22)),n=i(20),a=new Float32Array(9);a.set([1,0,0,0,1,0,0,0,1],0);var o=function(){function e(e,t){this._raw=e||new Float32Array(9),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(a),t},enumerable:!1,configurable:!0}),e.createFromArray=function(t){if(9!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){if(void 0===i&&(i=0),t.length-i<9)throw new Error("create Matrix Error:array length is wrong");return new e(t,i)},Object.defineProperty(e.prototype,"raw",{get:function(){return this.__raw||(this.__raw=new Float32Array(this._raw.buffer,4*this._offset,9)),this.__raw},enumerable:!1,configurable:!0}),e.prototype.toArray=function(){for(var e=new Array(9),t=0;t<9;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,i,r){return r=r||new e,n.m3Helper.translate(this._raw,this._offset,t,i,r._raw,r._offset),r},e.prototype.scale=function(t,i,r){return r=r||new e,n.m3Helper.scale(this._raw,this._offset,t,i,r._raw,r._offset),r},e.prototype.rotate=function(t,i){return i=i||new e,n.m3Helper.rotate(this._raw,this._offset,t,i._raw,i._offset),i},e.prototype.inverse=function(t){return t=t||new e,n.m3Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,i){return i=i||new e,n.m3Helper.multiply(this._raw,this._offset,t._raw,t._offset,i._raw,i._offset),i},e.prototype.transformPoint=function(e,t){return t=t||r.default.ZERO,n.m3Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(20),n=function(){function e(e,t){this._raw=e||new Float32Array(2),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,i){var r=new Float32Array(2);return r[0]=t||0,r[1]=i||0,new e(r)},e.createFromArray=function(t){return 2!==t.length&&(t=new Array(2).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){return void 0===i&&(i=0),t.length-i<2&&(t=new Float32Array(2).fill(0),i=0),new e(t,i)},e.prototype.toArray=function(){return[this._raw[this._offset],this._raw[this._offset+1]]},e.prototype.equal=function(e){return r.v2Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){if(2===e._raw.length)this._raw.set(e._raw,this._offset);else for(var t=0;t<2;t++)this._raw[this._offset+t]=e._raw[e._offset+t]},e.prototype.setValue=function(e,t){return this._raw[this._offset]=e,this._raw[this._offset+1]=t,this},e.prototype.add=function(t,i){return i=i||new e,r.v2Helper.add(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.sub=function(t,i){return i=i||new e,r.v2Helper.sub(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.normalize=function(t){return t=t||new e,r.v2Helper.normalize(this._raw,this._offset,a._raw,a._offset),t.set(a),t},e.prototype.scale=function(t,i){return i=i||new e,r.v2Helper.scale(this._raw,this._offset,t,a._raw,a._offset),i.set(a),i},e.prototype.lerp=function(t,i,n){return n=n||new e,r.v2Helper.lerp(this._raw,this._offset,t._raw,t._offset,i,a._raw,a._offset),n.set(a),n},e.prototype.dot=function(e){return r.v2Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return r.v2Helper.length(this._raw,this._offset)},e.prototype.clone=function(){return e.createFromNumber(this._raw[this._offset+0],this._raw[this._offset+1])},e.prototype.isZero=function(){return r.v2Helper.isZero(this._raw,this._offset)},e.prototype.getAngle=function(){return r.v2Helper.getAngle(this._raw,this._offset)},e}();t.default=n;var a=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexLayoutNative=t.createdVertexLayout=void 0;var r=i(1),n=i(2),a=r.__importDefault(i(24)),o=0;var s={};s[n.EnumVertexFormat.BYTE4]=4,s[n.EnumVertexFormat.BYTE4N]=4,s[n.EnumVertexFormat.FLOAT]=4,s[n.EnumVertexFormat.FLOAT2]=8,s[n.EnumVertexFormat.FLOAT3]=12,s[n.EnumVertexFormat.FLOAT4]=16,s[n.EnumVertexFormat.SHORT2]=4,s[n.EnumVertexFormat.SHORT2N]=4,s[n.EnumVertexFormat.SHORT4]=8,s[n.EnumVertexFormat.SHORT4N]=8,s[n.EnumVertexFormat.UBYTE4]=4,s[n.EnumVertexFormat.UBYTE4N]=4,t.createdVertexLayout=[];var l=function(){function e(e,i){this._id=o++,this._gfx=i,this._config=e,this._calStride(),this._batcher=new a.default(this._gfx),t.createdVertexLayout.push(this)}return e.prototype._calStride=function(){for(var e=0,t=0,i=this._config.layout.attrs;t<i.length;t++){var r=i[t];e+=s[r.format]}this._stride=e},e.prototype._getBatcher=function(){return this._batcher},e}();t.VertexLayoutNative=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=2048e3,n=1228800,a=function(){function e(e){this._vbOffset=0,this._ibCount=0,this._iBase=0,this._inited=!1,this._gfx=e}return e.prototype.init=function(){var e={type:wgfx.EnumBufferType.VERTEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:r};this._vertexBuffer=this._gfx.makeBuffer(e);var t={type:wgfx.EnumBufferType.INDEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:n};this._indexBuffer=this._gfx.makeBuffer(t),this._vbView=new Uint8Array(r),this._ibView=new Uint16Array(614400),this._inited=!0},e.prototype.reset=function(){this._vbOffset=0,this._ibCount=0,this._iBase=0},e.prototype.batchMesh=function(e,t,i,r){void 0===r&&(r=t._dataView.length),this._inited||this.init(),this._vbView.set(e._finalBufferView,this._vbOffset),this._vbOffset+=e._finalBufferView.byteLength;for(var n=this._ibCount,a=t._dataView,o=this._iBase,s=i,l=r;s<l;s++)this._ibView[n+s]=o+a[s];this._iBase+=e._count,this._ibCount+=r},e.prototype.uploadBuffer=function(){this._inited&&(this._gfx.updateBuffer(this._vertexBuffer,0,this._vbView,0,this._vbOffset),this._gfx.updateBuffer(this._indexBuffer,0,this._ibView,0,2*this._ibCount))},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RectNative=void 0;var r=function(e,t,i,r){this._x=e,this._y=t,this._width=i,this._height=r};t.RectNative=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1).__importDefault(i(15)),n=function(){function e(){this.bufferStack=[]}return e.prototype._setCommandExecutor=function(e){this._executor=e},e.prototype.decodeAndExecCommandBuffer=function(e){this.bufferStack.push(e);for(var t=0,i=e._array;t<i.length;t++){var n=i[t];if(n instanceof r.default){if(this.bufferStack.indexOf(n)>-1)return void console.warn("execute command buffer error: has infinite loop");this.decodeAndExecCommandBuffer(n)}else this.drawRenderDraw(n)}this.bufferStack.pop()},e.prototype.drawRenderDraw=function(e){this._executor.drawRenderDraw(e)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderViewNative=void 0;var r=function(e,t,i,r){this._pass=e,this._passAction=t,this._viewport=i,this._scissor=r,this._isDefaultView=0===this._pass.id};t.RenderViewNative=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableVertexBufferNative=void 0;var r=i(1).__importDefault(i(22)),n=function(){function e(e,t){if(this._count=e,e){var i=e*t._stride;this.data=new ArrayBuffer(i),this._finalBuffer=new ArrayBuffer(i),this._dataView=new Uint8Array(this.data),this._finalBufferView=new Uint8Array(this._finalBuffer),this._calPositionOffset(t)}else this.data=null}return e.prototype._cloneBuffer=function(){this._finalBufferView.set(this._dataView)},e.prototype._calPositionOffset=function(e){for(var t=0,i=e._config.layout.attrs;t<i.length;t++){var n=i[t];"a_position"==n.name&&(this._positionOffset=n.offset)}this._positionViews=[],this._worldPositionViews=[];for(var a=0;a<this._count;a++){var o=new r.default(new Float32Array(this.data,a*e._stride+this._positionOffset,2));this._positionViews.push(o);var s=new r.default(new Float32Array(this._finalBuffer,a*e._stride+this._positionOffset,2));this._worldPositionViews.push(s)}},e}();t.BatchableVertexBufferNative=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableIndexBufferNative=void 0;var r=function(e,t){this._count=e,this._dataView=new Uint16Array(e),this.data=this._dataView.buffer};t.BatchableIndexBufferNative=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(5)),a=i(31),o=i(65),s=i(33),l=i(6),u=r.__importDefault(i(48)),c=r.__importDefault(i(49)),d=r.__importDefault(i(76)),h=r.__importDefault(i(77)),p=function(){function e(e,t){if(this.config=t,this.isEngineNative=t.isEngineNative,this.isPhysicsNative=t.isPhysicsNative,this.gaVersion=t.gaVersion,this.isEngineNative){this.worker=e;var i=new a.AccelerateManager(this.worker,t);this.manager=i,this.createEntity3D=i.createEntity3D.bind(i),this.createEntity2D=i.createEntity2D.bind(i),this._createCullableComponent=i.createCullableComponent.bind(i),this._createAnimatorComponent=i.createAnimatorComponent.bind(i),this._createSkinnedSkeletonComponent=i.createSkinnedSkeletonComponent.bind(i),this.createEntity2DGroup=i.createEntity2DGroup.bind(i),this.createEntity3DGroup=i.createEntity3DGroup.bind(i),this.createDataBuffer=i.createDataBuffer.bind(i),this.createDataModel=i.createDataModel.bind(i),this.createAnimationClipBinding=i.createAnimationClipBinding.bind(i),this.createAnimatorController=i.createAnimatorController.bind(i),this.createAnimatorControllerStateModel=i.createAnimatorControllerStateModel.bind(i),this.entityAddChild=i.entityAddChild.bind(i),this.entityAddChildAtIndex=i.entityAddChildAtIndex.bind(i),this.entityRemoveFromParent=i.entityRemoveFromParent.bind(i),this.entityDestroy=i.entityDestroy.bind(i),this.entityClear=i.entityClear.bind(i),this.entitySetActive=i.entitySetActive.bind(i),this.entitySetLocalMatrixDirty=i.entitySetLocalMatrixDirty.bind(i),this.entitiesSetLocalMatrixDirty=i.entitiesSetLocalMatrixDirty.bind(i),this.entitiesSetLocalMatrixDirtyById=i.entitiesSetLocalMatrixDirtyById.bind(i),this.entityGroupAddChild=i.entityGroupAddChild.bind(i),this.entityGroupAddChildAtIndex=i.entityGroupAddChildAtIndex.bind(i),this.entityGroupRemoveFromParent=i.entityGroupRemoveFromParent.bind(i),this.entityGroupDestroy=i.entityGroupDestroy.bind(i),this.entityGroupClear=i.entityGroupClear.bind(i),this.entityGroupSetActive=i.entityGroupSetActive.bind(i),this.entityGroupSetLocalMatrixDirty=i.entityGroupSetLocalMatrixDirty.bind(i),this.entityGroupSetLocalMatrixDirtyAll=i.entityGroupSetLocalMatrixDirtyAll.bind(i),this.componentBindEntity=i.componentBindEntity.bind(i),this.componentUnbindEntity=i.componentUnbindEntity.bind(i),this.setRootEntity=i.setRootEntity.bind(i),this.updateAnimator=i.updateAnimator.bind(i),this.updateAnimators=i.updateAnimators.bind(i),this.updateAnimatorControllers=i.updateAnimatorControllers.bind(i),this.updateSkinningMatrix=i.updateSkinningMatrix.bind(i),this.updateSkinningMatrices=i.updateSkinningMatrices.bind(i),this.bindEntitiesToBones=i.bindEntitiesToBones.bind(i),this.unbindEntitiesFromBones=i.unbindEntitiesFromBones.bind(i),this.bindEntitiesToBonesWithIndex=i.bindEntitiesToBonesWithIndex.bind(i),this.unbindEntitiesFromBonesWithIndex=i.unbindEntitiesFromBonesWithIndex.bind(i),this.refreshWorldTransform=i.refreshWorldTransform.bind(i),this.frameStart=i.frameStart.bind(i),this.cullWithCameraPerspective=i.cullWithCameraPerspective.bind(i),this.cullWithCameraOrthographic=i.cullWithCameraOrthographic.bind(i),this.worker.cullingResult&&(this.initCullingArrayBuffer=i.initCullingArrayBuffer.bind(i),this.cullWithCameraPerspectiveByArrayBuffer=i.cullWithCameraPerspectiveV2.bind(i),this.cullWithCameraOrthographicByArrayBuffer=i.cullWithCameraOrthographicV2.bind(i))}else{this.mockWorker=e;var r=this._getMockAccelerateWorker();this.createEntity3D=r.createEntity3D.bind(r),this.createEntity2D=r.createEntity2D.bind(r),this._createCullableComponent=r.createCullableComponent.bind(r),this._createAnimatorComponent=r.createAnimatorComponent.bind(r),this._createSkinnedSkeletonComponent=r.createSkinnedSkeletonComponent.bind(r),this.createEntity2DGroup=r.createEntity2DGroup.bind(r),this.createEntity3DGroup=r.createEntity3DGroup.bind(r),this.createDataModel=r.createDataModel.bind(r),this.createDataBuffer=r.createDataBuffer.bind(r),this.createAnimationClipBinding=r.createAnimationClipBinding.bind(r),this.createAnimatorController=r.createAnimatorController.bind(r),this.createAnimatorControllerStateModel=r.createAnimatorControllerStateModel.bind(r),this.entityAddChild=r.entityAddChild.bind(r),this.entityAddChildAtIndex=r.entityAddChildAtIndex.bind(r),this.entityRemoveFromParent=r.entityRemoveFromParent.bind(r),this.entityDestroy=r.entityDestroy.bind(r),this.entityClear=r.entityClear.bind(r),this.entitySetActive=r.entitySetActive.bind(r),this.entitySetLocalMatrixDirty=r.entitySetLocalMatrixDirty.bind(r),this.entitiesSetLocalMatrixDirty=r.entitiesSetLocalMatrixDirty.bind(r),this.entitiesSetLocalMatrixDirtyById=r.entitiesSetLocalMatrixDirtyById.bind(r),this.entityGroupAddChild=r.entityGroupAddChild.bind(r),this.entityGroupAddChildAtIndex=r.entityGroupAddChildAtIndex.bind(r),this.entityGroupRemoveFromParent=r.entityGroupRemoveFromParent.bind(r),this.entityGroupDestroy=r.entityGroupDestroy.bind(r),this.entityGroupClear=r.entityGroupClear.bind(r),this.entityGroupSetActive=r.entityGroupSetActive.bind(r),this.entityGroupSetLocalMatrixDirty=r.entityGroupSetLocalMatrixDirty.bind(r),this.entityGroupSetLocalMatrixDirtyAll=r.entityGroupSetLocalMatrixDirtyAll.bind(r),this.componentBindEntity=r.componentBindEntity.bind(r),this.componentUnbindEntity=r.componentUnbindEntity.bind(r),this.setRootEntity=r.setRootEntity.bind(r),this.cullWithCameraPerspective=r.cullWithCameraPerspective.bind(r),this.cullWithCameraOrthographic=r.cullWithCameraOrthographic.bind(r),this.updateAnimator=r.updateAnimator.bind(r),this.updateAnimators=r.updateAnimators.bind(r),this.updateAnimatorControllers=r.updateAnimatorControllers.bind(r),this.updateSkinningMatrix=r.updateSkinningMatrix.bind(r),this.updateSkinningMatrices=r.updateSkinningMatrices.bind(r),this.bindEntitiesToBones=r.bindEntitiesToBones.bind(r),this.unbindEntitiesFromBones=r.unbindEntitiesFromBones.bind(r),this.bindEntitiesToBonesWithIndex=r.bindEntitiesToBonesWithIndex.bind(r),this.unbindEntitiesFromBonesWithIndex=r.unbindEntitiesFromBonesWithIndex.bind(r),this.refreshWorldTransform=r.refreshWorldTransform.bind(r),this.frameStart=r.frameStart.bind(r)}if(this.isPhysicsNative){(n=NativeGlobal.Phys3D)&&(this.phys3D=new d.default(n,this,this.isEngineNative))}else{var n=void 0;try{n=h.default().Phys3D}catch(e){}n&&(this.phys3D=new d.default(n,this,this.isEngineNative))}}return e.prototype.createComponent=function(e){if(!s.componentType2Ctor[e])return console.warn("can not support dataModel ["+e+"]"),null;switch(e){case l.enumComponentType.Cullable:return this._createCullableComponent();case l.enumComponentType.Animator:return this._createAnimatorComponent();case l.enumComponentType.SkinnedSkeleton:return this._createSkinnedSkeletonComponent()}return null},e.prototype.composeRawBufferEntity2D=function(e,t,i){var r=new ArrayBuffer(4*u.default.ENTITY2D_SIZE),n=new Float32Array(r);return n[u.default.OFFSET_ROTATION]=e,n[u.default.OFFSET_POSITION]=t[0],n[u.default.OFFSET_POSITION+1]=t[1],n[u.default.OFFSET_SCALE]=i[0],n[u.default.OFFSET_SCALE+1]=i[1],n},e.prototype.composeRawBufferEntity3D=function(e,t,i,r){var n=new ArrayBuffer(4*(c.default.ENTITY3D_SIZE-16)),a=new Uint32Array(n),o=new Float32Array(n);return a[c.default.OFFSET_ROTATIONTYPE]=e?0:1,o.set(t,c.default.OFFSET_ROTATION),o.set(i,c.default.OFFSET_POSITION),o.set(r,c.default.OFFSET_SCALE),o},e.prototype.composeRawBufferEntity3DWhole=function(e,t,i,r){var n=new ArrayBuffer(4*c.default.ENTITY3D_SIZE),a=new Uint32Array(n),o=new Float32Array(n);return a[c.default.OFFSET_ROTATIONTYPE]=e?0:1,o.set(t,c.default.OFFSET_ROTATION),o.set(i,c.default.OFFSET_POSITION),o.set(r,c.default.OFFSET_SCALE),o},e.prototype.composeRawBufferEntity2DGroup=function(e){for(var t=new ArrayBuffer(4*u.default.ENTITY2D_SIZE*e.length),i=new Float32Array(t),r=0;r<e.length;r++){var n=e[r];i[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_ROTATION]=n.rotation,i[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_POSITION]=n.position[0],i[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_POSITION+1]=n.position[1],i[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_SCALE]=n.scale[0],i[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_SCALE+1]=n.scale[1]}return i},e.prototype.composeRawBufferEntity3DGroup=function(e){for(var t=new ArrayBuffer(4*c.default.ENTITY3D_SIZE*e.length),i=new Uint32Array(t),r=new Float32Array(t),n=0;n<e.length;n++){var a=e[n];i[c.default.OFFSET_ROTATIONTYPE]=a.useEuler?0:1,r.set(a.rotation,n*c.default.ENTITY3D_SIZE+c.default.OFFSET_ROTATION),r.set(a.position,n*c.default.ENTITY3D_SIZE+c.default.OFFSET_POSITION),r.set(a.scale,n*c.default.ENTITY3D_SIZE+c.default.OFFSET_SCALE)}return r},e.prototype.getAccObjNumber=function(){return{entity2D:this.manager.poolManager._entity2DPoolUsedLength}},e.prototype._getMockAccelerateWorker=function(){return this.logicManager||(this.mockWorker||(this.mockWorker=new n.default),this.logicManager=new o.LogicManager(this.mockWorker,this.config)),this.logicManager},e}();t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccelerateManager=void 0;var r=i(1),n=i(32),a=i(33),o=r.__importStar(i(35)),s=r.__importStar(i(34)),l=r.__importDefault(i(37)),u=r.__importStar(i(47)),c=i(39),d=i(6),h=r.__importStar(i(48)),p=r.__importStar(i(49)),f=i(50),g=r.__importDefault(i(51)),_=r.__importDefault(i(52)),m=r.__importStar(i(53)),v=r.__importStar(i(55)),y=r.__importDefault(i(56)),A=r.__importDefault(i(57)),b=r.__importDefault(i(58)),E=i(60),w=i(62),T=r.__importDefault(i(63)),C=i(64),S=function(){function e(e,t){this.worker=e,this.config=t,this.poolManager=new b.default(this.worker),this.dirtyEntitiesCommand=new v.default(this.worker.dirtyEntities),this.entityCommand=new m.default(e.entityCommands),this.animatorCommand=new y.default,this.animatorControllerCommand=new T.default,this.skinningMatrixCommand=new A.default,h.staticInitEntity2D(this),p.staticInitEntity3D(this),f.staticInitEntityGroup(this),s.staticInitAnimatorComponent(this),o.staticInitCullableComponent(this),n.staticInitNativeObject(this.worker),E.staticInitAnimatorController(this),C.staticInitAnimationClipBinding(this),w.staticInitAnimatorControllerLayerBlend(this.worker),c.staticInitAccelerateModel(this.worker),u.staticInitAccelerateDataBuffer(this.worker),m.staticInitAccelerateEntityCommand(this.worker),v.staticInitAccelerateDirtiesCommand(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new p.default(e,this.poolManager.entity3DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new h.default(e,this.poolManager.entity2DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity2D,e);return new g.default(t,e)},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity3D,e);return new _.default(t,e)},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new o.default(e,this.poolManager.cullableComponentPools);return t.isUsing=!0,t.setActive(!0),t},e.prototype.createCullableComponentSingle=function(){var e=this.poolManager.getCullableComponentSingle(),t=new o.default(e,this.poolManager.cullableComponentPools);return t.setActive(!0),t},e.prototype.createAnimatorComponent=function(){return new s.default},e.prototype.createSkinnedSkeletonComponent=function(){return new l.default},e.prototype.createDataModel=function(e){var t=a.dataModel2Ctor[e];return t?new t:(console.warn("can not support dataModel ["+e+"]"),null)},e.prototype.createDataBuffer=function(e){var t=this.worker.createDataBuffer(e);return new u.default(t)},e.prototype.createAnimationClipBinding=function(e,t,i,r,n,a,o,s){return new C.AnimationClipBinding(e,t,i,r,n,a,o,s)},e.prototype.createAnimatorControllerStateModel=function(e){return new w.AnimatorControllerState(e)},e.prototype.createAnimatorController=function(e){return new E.AnimatorController(e)},e.prototype.entityAddChild=function(e,t){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityAddChildAtIndex=function(e,t,i){this.entityCommand.addChildAtIndex(e.id,t.id,i)},e.prototype.entityRemoveFromParent=function(e){this.entityCommand.removeFromParent(e.id)},e.prototype.entityDestroy=function(e){this.entityCommand.removeFromParent(e.id),e instanceof h.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){this.entityCommand.disperseSubTree(e.id)},e.prototype.entitySetActive=function(e,t){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entitySetLocalMatrixDirty=function(e){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntities(e,t)},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){this.dirtyEntitiesCommand.addDirtyEntitiesById(e,t)},e.prototype.componentBindEntity=function(e,t){e.bindEntityNative(t)},e.prototype.componentUnbindEntity=function(e){this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){this.entityCommand.setRootEntity(e.id)},e.prototype.entityGroupAddChild=function(e,t,i,r){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityGroupAddChildAtIndex=function(e,t,i,r,n){this.entityCommand.addChildAtIndex(e.id,t.id,i)},e.prototype.entityGroupRemoveFromParent=function(e,t){this.entityCommand.removeFromParent(e.id)},e.prototype.entityGroupDestroy=function(e,t){this.entityCommand.removeFromParent(e.id),e instanceof h.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){this.entityCommand.disperseSubTree(e.id)},e.prototype.entityGroupSetActive=function(e,t,i){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){this.dirtyEntitiesCommand.addDirtyEntityGroupAll(e)},e.prototype.componentBindEntityGroup=function(e,t,i,r){e.bindEntityNative(t)},e.prototype.componentUnbindEntityGroup=function(e,t){e.unbindEntityNative(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){this.entityCommand.setRootEntity(e.id)},e.prototype.componentUnbindEntitySingle=function(e){e.unbindEntityNative(),this.poolManager.disposeCullableComponentSingle(e)},e.prototype.refreshWorldTransform=function(){this.worker.refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p){var f=this.worker.frustumCulling(e,t,i,r,n,a,o,s,l,u,c,d,h,p);return f?{hash:f.hash,objects:new Uint32Array(f.objects),distances:new Float32Array(f.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p,f,g){var _=this.worker.orthoCulling(e,t,i,r,n,a,o,s,l,u,c,d,h,p,f,g);return _?{hash:_.hash,objects:new Uint32Array(_.objects),distances:new Float32Array(_.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.initCullingArrayBuffer=function(){var e=this.worker.cullingResult;return{u32View:new Uint32Array(e),f32View:new Float32Array(e)}},e.prototype.cullWithCameraPerspectiveV2=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p){return!!this.worker.frustumCullingV2(e,t,i,r,n,a,o,s,l,u,c,d,h,p)},e.prototype.cullWithCameraOrthographicV2=function(e,t,i,r,n,a,o,s,l,u,c,d,h,p,f,g){return!!this.worker.orthoCullingV2(e,t,i,r,n,a,o,s,l,u,c,d,h,p,f,g)},e.prototype.updateAnimator=function(e){this.worker.updateAnimator(e.id)},e.prototype.updateAnimators=function(e,t){this.animatorCommand.updateAnimators(e,t),this.worker.updateAnimators(this.animatorCommand.buffer)},e.prototype.updateAnimatorControllers=function(e,t){this.animatorControllerCommand.updateAnimatorControllers(e,t),this.worker.updateAnimatorControllers(this.animatorControllerCommand.buffer)},e.prototype.updateSkinningMatrix=function(e){this.worker.updateSkinningMatrix(e.id)},e.prototype.updateSkinningMatrices=function(e,t){this.skinningMatrixCommand.updateSkinningMatrices(e,t),this.worker.updateSkinningMatrices(this.skinningMatrixCommand.buffer)},e.prototype.bindEntitiesToBones=function(e,t){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){this.entityCommand.unBindFromBones(e)},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,i,r){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){this.entityCommand.unBindFromBones(e)},e.prototype.frameStart=function(){this.worker.frameStart()},e.prototype.setEntityName=function(e,t){this.worker.setEntityName(e,t)},e}();t.AccelerateManager=S},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitNativeObject=void 0,t.staticInitNativeObject=function(e){r=e};var n=function(){function e(){}return e.prototype._init=function(e){this._fastInit(e),this._initU32View()},e.prototype._fastInit=function(e){this._nativeObj=e;var t=e.id,i=e.buffer,r=i.byteLength;this._id=t,this._bufferLength=r,this._byteOffset=0,this._buffer=i,this._f32view=new Float32Array(i,0,r/4),this.id=this._id},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._createNativeComponent=function(e,t,i){var n=r.createComponent(e,t,i);return n.id<0||!n.buffer?null:(this._init(n),n)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataModel2CtorMock=t.dataModel2Ctor=t.componentType2Ctor=void 0;var r=i(1),n=r.__importDefault(i(34)),a=r.__importDefault(i(35)),o=r.__importDefault(i(37)),s=i(6),l=r.__importDefault(i(38)),u=r.__importDefault(i(40)),c=r.__importDefault(i(41)),d=r.__importDefault(i(43));t.componentType2Ctor={},t.componentType2Ctor[s.enumComponentType.Undefined]=null,t.componentType2Ctor[s.enumComponentType.Cullable]=a.default,t.componentType2Ctor[s.enumComponentType.SkinnedSkeleton]=o.default,t.componentType2Ctor[s.enumComponentType.Animator]=n.default,t.dataModel2Ctor={},t.dataModel2Ctor[s.enumModelType.SkeletonBoneInverseModel]=u.default,t.dataModel2Ctor[s.enumModelType.AnimationClipModel]=l.default,t.dataModel2CtorMock={},t.dataModel2CtorMock[s.enumModelType.SkeletonBoneInverseModel]=d.default,t.dataModel2CtorMock[s.enumModelType.AnimationClipModel]=c.default},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAnimatorComponent=void 0;var r=i(1),n=r.__importDefault(i(32)),a=i(6),o=!1,s=!1;t.staticInitAnimatorComponent=function(e){var t=e.config.gaVersion.versionNumber;o=t>=120,s=t<120};var l=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t}return r.__extends(t,e),t.prototype.bindAnimations=function(e,t,i){this._animationClipCount=e.length;var r=t.length;for(var n in t)r+=t[n].length;if(this._nodeCount=r,this._createNativeComponent(a.enumComponentType.Animator,e.length,r),this._nativeObj){for(n=0;n<e.length;n++)this._u32view[3*n]=e[n].id;this._offsetEntityIds=3*e.length;var o,l=0;for(n=0;n<t.length;n++){for(var u=0;u<t[n].length;u++)null!=t[n][u]?(this._u32view[this._offsetEntityIds+l+u]=t[n][u].id,o||(o=t[n][u].id)):this._u32view[this._offsetEntityIds+l+u]=4294967295,this._u32view[this._offsetEntityIds+l+u]=null!=t[n][u]?t[n][u].id:4294967295;l+=t[n].length}s&&4294967295===this._u32view[this._offsetEntityIds]&&(null!=i&&i.id?this._u32view[this._offsetEntityIds]=i.id:o&&(this._u32view[this._offsetEntityIds]=o))}},t.prototype.setClipParams=function(e,t,i){if(this._nativeObj){var r=3*e;o?this._f32view[r+1]=t:this._u32view[r+1]=Math.round(t),this._f32view[r+2]=i}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParamater=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(n.default);t.default=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitCullableComponent=void 0;var r,n=i(1),a=i(6),o=n.__importDefault(i(36));t.staticInitCullableComponent=function(e){r=e};var s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.entityOffset=r._poolIndex*a.CULLABLECOMPONENT_SIZE,r._activeOffset=r.entityOffset+a.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE,r._cullmaskOffset=r.entityOffset+a.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK,r._boundingBallCenterOffset=r.entityOffset+a.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER,r._boundingBallRadiusOffset=r.entityOffset+a.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS,r._entityIdOffset=r.entityOffset+a.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID,r}return n.__extends(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},t.prototype.getCullMask=function(){return this._nativePool._u32view[this._cullmaskOffset]},t.prototype.setCullMask=function(e){this._nativePool._u32view[this._cullmaskOffset]=e},t.prototype.bindEntityNative=function(e){this._nativePool._u32view[this._entityIdOffset]=e.id},t.prototype.unbindEntityNative=function(){this._nativePool._u32view[this._entityIdOffset]=0},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},Object.defineProperty(t.prototype,"active",{get:function(){return 0!=(this._nativePool._u32view[this._activeOffset]&a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},set:function(e){e?this._nativePool._u32view[this._activeOffset]|=a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~a.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},enumerable:!1,configurable:!0}),t.prototype.bindEntity=function(e){r.componentBindEntity(this,e)},t.prototype.unbindEntity=function(){r.componentUnbindEntity(this)},t}(o.default);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(6),n=function(){function e(e,t){this._nativeId=e,this._poolId=e&r.POOLID_AND,this._poolIndex=e&r.POOLINDEX_AND,this._nativePool=t[this._poolId],this.float32View=this._nativePool._f32view,this.uint32View=this._nativePool._u32view,this.id=this._nativeId,this.poolId=this._poolId,this.poolIndex=this._poolIndex}return e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(32)),a=i(6),o=function(e){function t(){var t=e.call(this)||this;return t._boneNum=0,t}return r.__extends(t,e),t.prototype.setBoneMatrix=function(e,t,i,r){if(i.length===t&&r.length===t){if(this._boneNum=t,this._createNativeComponent(a.enumComponentType.SkinnedSkeleton,t),this._nativeObj){for(var n=[],o=0;o<t;o++)n.push(r[o].id);this._u32view[0]=e.id,this._u32view.set(i,1);var s=1+t;this._u32view.set(n,s),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(1+2*t),16*t)}}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(n.default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(39)),a=i(6),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(a.enumModelType.AnimationClipModel,e)},t}(n.default);t.default=o},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateModel=void 0,t.staticInitAccelerateModel=function(e){r=e};var n=function(){function e(){}return e.prototype._createNativeModel=function(e,t){var i=r.createDataModel(e,t);this._nativeObj=i,this._id=i?i.id:0,this.id=this._id},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(39)),a=i(6),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(a.enumModelType.SkeletonBoneInverseModel,t.buffer)},t}(n.default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(42),n=function(){function e(e){this.contentoffset=0,this.frameRate=0,this.frameLength=0,this.totalSampleGroup=0,this.nodes={},this.nodesLength=0,this._id=e,this.id=this._id}return e.prototype.setAnimationClip=function(e){this._f32View=new Float32Array(e),this._u32View=new Uint32Array(e),this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3],this.nodes={},this._initAnimationClipNodes(),this.nodesLength=Object.keys(this.nodes).length},e.prototype._initAnimationClipNodes=function(){if(this._f32View&&this._u32View){this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3];for(var e=0,t=0;t<this.totalSampleGroup;t++){for(var i=this._u32View[4+3*t+0],n=this._u32View[4+3*t+1],a=this._u32View[4+3*t+2],o=this.nodes[i]||new r.TransformCurve(this.frameRate,this.frameLength,r.CurveMode.Hermite),s=0;s<a;s++){var l=this._u32View[4+3*this.totalSampleGroup+4*e+0],u=this._f32View[4+3*this.totalSampleGroup+4*e+1],c=this._f32View[4+3*this.totalSampleGroup+4*e+2],d=this._f32View[4+3*this.totalSampleGroup+4*e+3];l>=this.frameLength&&console.error("Index out of range: ",l,this.frameLength),e++,o.addKeyFrame({index:l,value:u,inTangent:c,outTangent:d},n)}this.nodes[i]=o}this.nodesLength=Object.keys(this.nodes).length}},e.prototype.evaluate=function(e){for(;e>this.frameLength-1;)e-=this.frameLength-1;var t=e,i=Object.create(null);for(var r in this.nodes)i[r]=this.nodes[r].evaluate(t);return i},e}();t.default=n},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TransformCurve=t.TransformCurveRotationMode=t.TransformCurveType=t.Curve=t.CurveMode=void 0,function(e){e[e.Hermite=0]="Hermite"}(r=t.CurveMode||(t.CurveMode={}));var n,a,o=function(){function e(e,t,i,n){void 0===n&&(n=r.Hermite),this.keyFrames=e,this.fps=t,this.frameCount=i,this.mode=n}return e.prototype.evaluate=function(e,t){return void 0===t&&(t=!1),this.mode===r.Hermite?this._evaluate(e,t):null},Object.defineProperty(e.prototype,"keyCount",{get:function(){return this.keyFrames.length},enumerable:!1,configurable:!0}),e.prototype.addKeyFraem=function(e){var t=this._findKeyIndex(e.index);this.keyFrames.splice(t,0,e)},e.prototype._evaluate=function(e,t){if(!this.keyFrames.length)return null;var i=this._findKeyIndex(e);if(this.keyFrames[i]&&this.keyFrames[i].index===e)return this.keyFrames[i].value;if(0===i||i===this.keyFrames.length){if(t){if(this.mode===r.Hermite){var n=this.keyFrames[this.keyFrames.length-1],a=this.keyFrames[0],o=(this.frameCount-1-n.index+e)/this.fps;return(2*(u=(l=(s=(0===i?e-n.index+e:e-a.index)/(a.index-n.index))*s)*s)-3*l+1)*n.value+(u-2*l+s)*o*n.outTangent+(-2*u+3*l)*a.value+(u-l)*o*a.inTangent}return null}return this.mode===r.Hermite?this.keyFrames[0===i?0:this.keyFrames.length-1].value:null}if(this.mode===r.Hermite){n=this.keyFrames[i-1],o=((a=this.keyFrames[i]).index-n.index)/this.fps;var s,l,u=(l=(s=(e-n.index)/(a.index-n.index))*s)*s;return Number.isFinite(n.outTangent)&&Number.isFinite(a.inTangent)?(2*u-3*l+1)*n.value+(u-2*l+s)*o*n.outTangent+(-2*u+3*l)*a.value+(u-l)*o*a.inTangent:n.value}return null},e.prototype._findKeyIndex=function(e){for(var t=0,i=this.keyFrames.length,r=Math.floor((t+i)/2);t<i;)r=Math.floor((t+i)/2),this.keyFrames[r].index>=e?i=r:t=r+1;return t},e}();t.Curve=o,function(e){e[e.TranslateX=1]="TranslateX",e[e.TranslateY=2]="TranslateY",e[e.TranslateZ=3]="TranslateZ",e[e.ScaleX=4]="ScaleX",e[e.ScaleY=5]="ScaleY",e[e.ScaleZ=6]="ScaleZ",e[e.QuaternionX=7]="QuaternionX",e[e.QuaternionY=8]="QuaternionY",e[e.QuaternionZ=9]="QuaternionZ",e[e.QuaternionW=10]="QuaternionW",e[e.EulerX=11]="EulerX",e[e.EulerY=12]="EulerY",e[e.EulerZ=13]="EulerZ"}(n=t.TransformCurveType||(t.TransformCurveType={})),function(e){e[e.None=0]="None",e[e.Euler=1]="Euler",e[e.Quaternion=2]="Quaternion"}(a=t.TransformCurveRotationMode||(t.TransformCurveRotationMode={}));var s=function(){function e(e,t,i){void 0===i&&(i=r.Hermite),this.fps=e,this.frameLength=t,this.mode=i,this._rotationMode=a.None,this._translateX=new o([],e,t,i),this._translateY=new o([],e,t,i),this._translateZ=new o([],e,t,i),this._scaleX=new o([],e,t,i),this._scaleY=new o([],e,t,i),this._scaleZ=new o([],e,t,i),this._rotationX=new o([],e,t,i),this._rotationY=new o([],e,t,i),this._rotationZ=new o([],e,t,i),this._rotationW=new o([],e,t,i)}return Object.defineProperty(e.prototype,"rotationMode",{get:function(){return this._rotationMode},enumerable:!1,configurable:!0}),e.prototype.addKeyFrame=function(e,t){switch(t){case n.TranslateX:this._translateX.addKeyFraem(e);break;case n.TranslateY:this._translateY.addKeyFraem(e);break;case n.TranslateZ:this._translateZ.addKeyFraem(e);break;case n.ScaleX:this._scaleX.addKeyFraem(e);break;case n.ScaleY:this._scaleY.addKeyFraem(e);break;case n.ScaleZ:this._scaleZ.addKeyFraem(e);break;case n.QuaternionX:case n.EulerX:this._rotationX.addKeyFraem(e);break;case n.QuaternionY:case n.EulerY:this._rotationY.addKeyFraem(e);break;case n.QuaternionZ:case n.EulerZ:this._rotationZ.addKeyFraem(e);break;case n.QuaternionW:this._rotationW.addKeyFraem(e)}},e.prototype.evaluate=function(e){var t=Object.create(null);if(t.tx=this._translateX.evaluate(e),t.ty=this._translateY.evaluate(e),t.tz=this._translateZ.evaluate(e),t.sx=this._scaleX.evaluate(e),t.sy=this._scaleY.evaluate(e),t.sz=this._scaleZ.evaluate(e),t.rx=this._rotationX.evaluate(e),t.ry=this._rotationY.evaluate(e),t.rz=this._rotationZ.evaluate(e),t.rw=this._rotationW.evaluate(e),t.rw)if(null===t.rx||null===t.ry||null===t.rz)t.rx=t.ry=t.rz=t.rw=null,t.use_quaternion=!1;else{var i=Math.sqrt(t.rx*t.rx+t.ry*t.ry+t.rz*t.rz+t.rw*t.rw);t.rx/=i,t.ry/=i,t.rz/=i,t.rw/=i,t.use_quaternion=!0}else t.use_quaternion=!1;return t},e.TransformCurveRotationMode=a,e.TransformCurveType=n,e}();t.TransformCurve=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1).__importDefault(i(44)),n=function(){function e(e){this.boneNum=0,this.inverseMatrixs=[],this._id=e,this.id=this._id}return e.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e);var i=t.buffer;this.inverseMatrixs=[];for(var n=this.boneNum=i.byteLength/64,a=0;a<n;a++)this.inverseMatrixs.push(r.default.createFromTypedArray(new Float32Array(i,64*a,16)))},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(20),a=r.__importDefault(i(45)),o=r.__importDefault(i(46)),s=new Float32Array(16);s.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var l=function(){function e(e,t){this._raw=e||new Float32Array(16),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(s),t},enumerable:!1,configurable:!0}),e.lookAt=function(t,i,r,a){return a=a||new e,n.m4Helper.lookAt(t._raw,t._offset,i._raw,i._offset,r._raw,r._offset,a._raw,a._offset),a},e.perspective=function(t,i,r,a,o){return o=o||new e,n.m4Helper.perspective(t,i,r,a,o._raw,o._offset),o},e.orthographic=function(t,i,r,a,o,s,l){return l=l||new e,n.m4Helper.orthographic(t,i,r,a,o,s,l._raw,l._offset),l},e.fromQuaternion=function(t,i){return i=i||new e,n.quatHelper.toMatrix4(t._raw,t._offset,i._raw,i._offset),i},e.createFromArray=function(t){if(16!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){if(void 0===i&&(i=0),t.length-i<16)throw new Error("create Matrix Error:array length is wrong");return new e(t,i)},e.createRotationX=function(t,i){return i=i||new e,n.m4Helper.xRotation(t,i._raw,i._offset),i},e.createRotationY=function(t,i){return i=i||new e,n.m4Helper.yRotation(t,i._raw,i._offset),i},e.createRotationZ=function(t,i){return i=i||new e,n.m4Helper.zRotation(t,i._raw,i._offset),i},e.createRotationAxis=function(t,i,r){return r=r||new e,n.m4Helper.axisRotation(t._raw,t._offset,i,r._raw,r._offset),r},e.composeTRS=function(t,i,r,a){return a=a||new e,n.m4Helper.composeTRS(t._raw,t._offset,i._raw,i._offset,r._raw,r._offset,a._raw,a._offset),a},e.composeTQS=function(t,i,r,n){return n=e.fromQuaternion(i,n),e.composeTRS(t,n,r,n),n},e.composeFromRST3=function(t,i){return i=i||new e,n.m4Helper.composeRST3toRST4(t._raw,t._offset,i._raw,i._offset),i},e.prototype.toArray=function(){for(var e=new Array(16),t=0;t<16;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,i,r,a){return a=a||new e,n.m4Helper.translate(this._raw,this._offset,t,i,r,a._raw,a._offset),a},e.prototype.scale=function(t,i,r,a){return a=a||new e,n.m4Helper.scale(this._raw,this._offset,t,i,r,a._raw,a._offset),a},e.prototype.xRotate=function(t,i){return i=i||new e,n.m4Helper.xRotate(this._raw,this._offset,t,i._raw,i._offset),i},e.prototype.yRotate=function(t,i){return i=i||new e,n.m4Helper.yRotate(this._raw,this._offset,t,i._raw,i._offset),i},e.prototype.zRotate=function(t,i){return i=i||new e,n.m4Helper.zRotate(this._raw,this._offset,t,i._raw,i._offset),i},e.prototype.axisRotate=function(t,i,r){return r=r||new e,n.m4Helper.axisRotate(this._raw,this._offset,t._raw,t._offset,i,r._raw,r._offset),r},e.prototype.rotateByQuaternion=function(t,i){i=i||new e;var r=u;return e.fromQuaternion(t,r),this.multiply(r,i),i},e.prototype.inverse=function(t){return t=t||new e,n.m4Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.transpose=function(t){return t=t||new e,n.m4Helper.transpose(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,i){return i=i||new e,n.m4Helper.multiply(this._raw,this._offset,t._raw,t._offset,i._raw,i._offset),i},e.prototype.transformVector=function(e,t){return t=t||new o.default,n.m4Helper.transformVector(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformDirection=function(e,t){return t=t||a.default.ZERO,n.m4Helper.transformDirection(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformPoint=function(e,t){return t=t||a.default.ZERO,n.m4Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.set=function(e){return n.m4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.clone=function(){var t=new e;return n.m4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.decomposeTransRotMatScale=function(e,t,i){return n.m4Helper.decomposeTransRotMatScale(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset,i._raw,i._offset)},e.prototype.setValue=function(e,t,i){return this._raw[this._offset+4*t+i]=e,this},e.prototype.getValue=function(e,t){return this._raw[this._offset+4*e+t]},e.prototype.setColumn=function(e,t){var i=this._offset+4*t;return this._raw[i]=e.x,this._raw[i+1]=e.y,this._raw[i+2]=e.z,this._raw[i+3]=e.w,this},e.prototype.getColumn=function(e,t){t=t||new o.default;var i=this._offset+4*e;return t.setValue(this._raw[i],this._raw[i+1],this._raw[i+2],this._raw[i+3]),t},e.prototype.setRow=function(e,t){var i=this._offset+t;return this._raw[i]=e.x,this._raw[i+4]=e.y,this._raw[i+8]=e.z,this._raw[i+12]=e.w,this},e.prototype.getRow=function(e,t){t=t||new o.default;var i=this._offset+e;return t.setValue(this._raw[i],this._raw[i+4],this._raw[i+8],this._raw[i+12]),t},e}();t.default=l;var u=new l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(20),n=function(){function e(e,t){this._raw=e||new Float32Array(3),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONE",{get:function(){return new e(new Float32Array([1,1,1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Up",{get:function(){return new e(new Float32Array([0,1,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardRH",{get:function(){return new e(new Float32Array([0,0,-1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardLH",{get:function(){return new e(new Float32Array([0,0,1]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,i,r){var n=new Float32Array(3);return n[0]=t,n[1]=i,n[2]=r,new e(n)},e.createFromArray=function(t){return 3!==t.length&&(t=new Array(3).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){return void 0===i&&(i=0),t.length-i<3&&(t=new Float32Array(3).fill(0),i=0),new e(t,i)},e.transformQuat=function(t,i,n){return n=n||e.ZERO,r.quatHelper.transformDirection(i._raw,i._offset,t._raw,t._offset,a._raw,a._offset),n.set(a),n},e.transformCoordinate=function(e,t,i){return i=t.transformPoint(e,i)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset],e[this._offset+1],e[this._offset+2]]},e.prototype.equal=function(e){return r.v3Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){r.v3Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,i){var r=this._raw;return r[this._offset]=e,r[this._offset+1]=t,r[this._offset+2]=i,this},e.prototype.add=function(t,i){return i=i||new e,r.v3Helper.add(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.sub=function(t,i){return i=i||new e,r.v3Helper.sub(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.cross=function(t,i){return i=i||new e,r.v3Helper.cross(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.normalize=function(t){return t=t||new e,r.v3Helper.normalize(this._raw,this._offset,a._raw,a._offset),t.set(a),t},e.prototype.scale=function(t,i){return i=i||new e,r.v3Helper.scale(this._raw,this._offset,t,a._raw,a._offset),i.set(a),i},e.prototype.scaleXYZ=function(t,i,r,n){n=n||new e;var a=this._raw;return n.setValue(a[this._offset]*t,a[this._offset+1]*i,a[this._offset+2]*r),n},e.prototype.lerp=function(t,i,n){return n=n||new e,r.v3Helper.lerp(this._raw,this._offset,t._raw,t._offset,i,a._raw,a._offset),n.set(a),n},e.prototype.dot=function(e){return r.v3Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return r.v3Helper.length(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return r.v3Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return r.v3Helper.isZero(this._raw,this._offset)},e.prototype.distanceTo=function(e){return r.v3Helper.distance(this._raw,this._offset,e._raw,e._offset)},e.prototype.angleTo=function(t,i){return i=i||e.ZERO,r.v3Helper.angleTo(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.setFromMatrixColumn=function(e,t){return this.fromArray(e._raw,4*t)},e.prototype.fromArray=function(e,t){void 0===t&&(t=0);var i=this._raw;return i[this._offset]=e[t],i[this._offset+1]=e[t+1],i[this._offset+2]=e[t+2],this},e.prototype.setFromMatrixScale=function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length(),n=this._raw;return n[this._offset]=t,n[this._offset+1]=i,n[this._offset+2]=r,this},e.prototype.setFromMatrixPosition=function(e){var t=e._raw,i=this._raw;return i[this._offset]=t[e._offset+12],i[this._offset+1]=t[e._offset+13],i[this._offset+2]=t[e._offset+14],this},e.prototype.applyMatrix4=function(t){return e.transformCoordinate(this,t,this)},e.prototype.transformDirection=function(e){var t=this._raw,i=t[this._offset],r=t[this._offset+1],n=t[this._offset+2],a=e._raw;return t[this._offset]=a[e._offset]*i+a[e._offset+4]*r+a[e._offset+8]*n,t[this._offset+1]=a[e._offset+1]*i+a[e._offset+5]*r+a[e._offset+9]*n,t[this._offset+2]=a[e._offset+2]*i+a[e._offset+6]*r+a[e._offset+10]*n,this.normalize()},e}();t.default=n;var a=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(20),n=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){var t=new Float32Array(4);return t.fill(0),new e(t)},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,i,r,n){var a=new Float32Array(4);return a[0]=t,a[1]=i,a[2]=r,a[3]=n,new e(a)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){return void 0===i&&(i=0),t.length-i<4&&(t=new Float32Array(4).fill(0),i=0),new e(t)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset+0],e[this._offset+1],e[this._offset+2],e[this._offset+3]]},e.prototype.equal=function(e){return r.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){r.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,i,r){var n=this._raw;return n[this._offset+0]=e,n[this._offset+1]=t,n[this._offset+2]=i,n[this._offset+3]=r,this},e.prototype.add=function(t,i){return i=i||new e,r.v4Helper.add(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.sub=function(t,i){return i=i||new e,r.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,a._raw,a._offset),i.set(a),i},e.prototype.scale=function(t,i){return i=i||new e,r.v4Helper.scale(this._raw,this._offset,t,a._raw,a._offset),i.set(a),i},e.prototype.lerp=function(t,i,n){return n=n||new e,r.v4Helper.lerp(this._raw,this._offset,t._raw,t._offset,i,a._raw,a._offset),n.set(a),n},e.prototype.dot=function(e){return r.v4Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.isZero=function(){return r.v4Helper.isZero(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return r.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e}();t.default=n;var a=new n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDataBuffer=void 0;var r=i(1),n=r.__importDefault(i(32));t.staticInitAccelerateDataBuffer=function(e){e};var a=function(e){function t(t){var i=e.call(this)||this;return i._init(t),i}return r.__extends(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(n.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity2D=void 0;var r,n=i(1),a=i(6),o=n.__importDefault(i(36));t.staticInitEntity2D=function(e){r=e};var s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.entityOffset=r._poolIndex*a.ENTITY2D_SIZE,r.localRotationOffset=r.entityOffset+a.ENTITY2D_OFFSET.OFFSET_ROTATION,r.localPositionOffset=r.entityOffset+a.ENTITY2D_OFFSET.OFFSET_POSITION,r.localScaleOffset=r.entityOffset+a.ENTITY2D_OFFSET.OFFSET_SCALE,r.worldMatrixOffset=r.entityOffset+a.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,r}return n.__extends(t,e),Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,2)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotationView",{get:function(){return this._localRotationView||(this._localRotationView=new Float32Array(this._nativePool._buffer,4*this.localRotationOffset,1)),this._localRotationView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,2)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,9)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){r.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){r.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){r.entityRemoveFromParent(this)},t.prototype.destroy=function(){r.entityRemoveFromParent(this)},t.prototype.clear=function(){r.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){r.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){r.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.OFFSET_ROTATION=a.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=a.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=a.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=a.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t.ENTITY2D_SIZE=a.ENTITY2D_SIZE,t}(o.default);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity3D=void 0;var r,n=i(1),a=i(6),o=n.__importDefault(i(36));t.staticInitEntity3D=function(e){r=e};var s=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.entityOffset=r._poolIndex*a.ENTITY3D_SIZE,r.localRotationTypeOffset=r.entityOffset+a.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,r.localQuaternionOffset=r.entityOffset+a.ENTITY3D_OFFSET.OFFSET_ROTATION,r.localPositionOffset=r.entityOffset+a.ENTITY3D_OFFSET.OFFSET_POSITION,r.localScaleOffset=r.entityOffset+a.ENTITY3D_OFFSET.OFFSET_SCALE,r.worldMatrixOffset=r.entityOffset+a.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,r}return n.__extends(t,e),t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~a.ENTITY3D_OFFSET.DF_ROTATIONTYPE:this._nativePool._u32view[this.localRotationTypeOffset]|=a.ENTITY3D_OFFSET.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&a.ENTITY3D_OFFSET.DF_ROTATIONTYPE)},Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,3)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternionView",{get:function(){return this._localQuaternionView||(this._localQuaternionView=new Float32Array(this._nativePool._buffer,4*this.localQuaternionOffset,4)),this._localQuaternionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,3)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,16)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){r.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){r.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){r.entityRemoveFromParent(this)},t.prototype.destroy=function(){r.entityRemoveFromParent(this)},t.prototype.clear=function(){r.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){r.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){r.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.prototype.setEntityDebugName=function(e){r.setEntityName(this.id,e)},t.OFFSET_ROTATIONTYPE=a.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=a.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=a.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=a.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=a.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t.DF_ROTATIONTYPE=a.ENTITY3D_OFFSET.DF_ROTATIONTYPE,t.ENTITY3D_SIZE=a.ENTITY3D_SIZE,t}(o.default);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntityGroup=void 0;var r,n=i(1),a=n.__importDefault(i(32));t.staticInitEntityGroup=function(e){r=e};var o=function(e){function t(t,i){var r=e.call(this)||this;return r._init(t),r.entityLength=i,r}return n.__extends(t,e),t.prototype.getEntityIdByIndex=function(e){return this._id+e},t.prototype.getEntityOffsetByIndex=function(e){return e*this.objectSize},t.prototype.setRawBuffer=function(e,t){void 0===t&&(t=0),this._f32view.set(e,t)},t.prototype.setLocalMatrixDirtyAll=function(){r.entityGroupSetLocalMatrixDirtyAll(this)},t}(a.default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(6),a=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.objectSize=n.ENTITY2D_SIZE,r}return r.__extends(t,e),t.OFFSET_ROTATION=n.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=n.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=n.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=n.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t}(r.__importDefault(i(50)).default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=i(6),a=function(e){function t(t,i){var r=e.call(this,t,i)||this;return r.objectSize=n.ENTITY3D_SIZE,r}return r.__extends(t,e),t.OFFSET_ROTATIONTYPE=n.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=n.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=n.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=n.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=n.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t}(r.__importDefault(i(50)).default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateEntityCommand=void 0;var r,n=i(1),a=n.__importStar(i(54)),o=i(6);t.staticInitAccelerateEntityCommand=function(e){r=e};var s=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype._checkBufferSize=function(e){a.SIZE_UINT32+this._u32view[a.OFFSET_COMMANDLENGTH]+e>this._bufferSize&&r.refreshWorldTransform()},t.prototype.setRootEntity=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.SetRootEntity,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.addChild=function(e,t){var i=3*a.SIZE_UINT32;this._checkBufferSize(i);var r=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[r]=o.enumEntityCommandType.AddChild,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+i)},t.prototype.addChildAtIndex=function(e,t,i){var r=4*a.SIZE_UINT32;this._checkBufferSize(r);var n=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[n]=o.enumEntityCommandType.AddChildAtIndex,this._u32view[n+1]=e,this._u32view[n+2]=t,this._u32view[n+3]=i,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+r)},t.prototype.removeFromParent=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.RemoveFromParent,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.disperseSubTree=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.DisperseSubTree,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBone=function(e,t){var i=3*a.SIZE_UINT32;this._checkBufferSize(i);var r=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[r]=o.enumEntityCommandType.BindToBone,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+i)},t.prototype.unBindFromBone=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.UnBindFromBone,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandActive=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.EntityCommandActive,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandInActive=function(e){var t=2*a.SIZE_UINT32;this._checkBufferSize(t);var i=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[i]=o.enumEntityCommandType.EntityCommandInActive,this._u32view[i+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBones=function(e,t){var i=e.length,r=(2+2*i)*a.SIZE_UINT32;this._checkBufferSize(r);var n=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[n]=o.enumEntityCommandType.BindToBones,this._u32view[n+1]=i;for(var s=0;s<i;s++){var l=e[s],u=t[s];this._u32view[n+2+s]=l.id,this._u32view[n+2+i+s]=u.id}this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+r)},t.prototype.unBindFromBones=function(e){var t=e.length,i=(2+t)*a.SIZE_UINT32;this._checkBufferSize(i);var r=this._u32view[a.OFFSET_COMMANDLENGTH]/a.SIZE_UINT32+1;this._u32view[r]=o.enumEntityCommandType.UnBindFromBones,this._u32view[r+1]=t;for(var n=0;n<t;n++){var s=e[n];this._u32view[r+2+n]=s.id}this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+i)},t}(a.default);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_COMMANDLENGTH=t.SIZE_UINT32=void 0;t.SIZE_UINT32=4,t.OFFSET_COMMANDLENGTH=0;var r=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[t.OFFSET_COMMANDLENGTH]=e},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDirtiesCommand=void 0;var r,n=i(1),a=n.__importStar(i(54));t.staticInitAccelerateDirtiesCommand=function(e){r=e};var o=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype._checkBufferSize=function(e){this._u32view[a.OFFSET_COMMANDLENGTH]+e+1>this._u32view.length&&r.refreshWorldTransform()},t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[a.OFFSET_COMMANDLENGTH]+1]=e.id,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[a.OFFSET_COMMANDLENGTH]+1]=e,this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var i=this._u32view[a.OFFSET_COMMANDLENGTH]+1,r=t-(this._u32view.length-1),n=0;n<r;n++)this._u32view[i+n]=e[n].id;var o=t-r;for(n=r;n<o;n++)this.addDirtyEntityId(e[n].id)}else{for(r=t,i=this._u32view[a.OFFSET_COMMANDLENGTH]+1,n=0;n<r;n++)this._u32view[i+n]=e[n].id;this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+r)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var i=this._u32view[a.OFFSET_COMMANDLENGTH]+1,r=t-(this._u32view.length-1),n=0;n<r;n++)this._u32view[i+n]=e[n];var o=t-r;for(n=r;n<o;n++)this.addDirtyEntityId(e[n])}else{for(r=t,i=this._u32view[a.OFFSET_COMMANDLENGTH]+1,n=0;n<r;n++)this._u32view[i+n]=e[n];this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+r)}},t.prototype.addDirtyEntityGroupAll=function(e){if(this._checkBufferSize(e.entityLength),e.entityLength>this._u32view.length){for(var t=this._u32view[a.OFFSET_COMMANDLENGTH]+1,i=e.entityLength-(this._u32view.length-1),r=0;r<i;r++)this._u32view[t+r]=e.getEntityIdByIndex(r);var n=e.entityLength-i;for(r=i;r<n;r++)this.addDirtyEntityId(e.getEntityIdByIndex(r))}else{for(i=e.entityLength,t=this._u32view[a.OFFSET_COMMANDLENGTH]+1,r=0;r<i;r++)this._u32view[t+r]=e.getEntityIdByIndex(r);this.setCommandSize(this._u32view[a.OFFSET_COMMANDLENGTH]+i)}},t}(a.default);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(54)),a=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;this.setCommandSize(t)},t}(n.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(54)),a=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;this.setCommandSize(t)},t}(n.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scaleNumberArray=t.NativePools=void 0;var r=i(1),n=i(6),a=r.__importDefault(i(59)),o=4e3,s=function(){};t.NativePools=s;var l=new Float32Array(new ArrayBuffer(4*n.ENTITY2D_SIZE));l.set([0,0,0,1,1],0);var u=new Uint32Array(new ArrayBuffer(4*n.ENTITY3D_SIZE)),c=new Float32Array(u.buffer);u[0]=1,c.set([0,0,0,1],1),c.set([0,0,0],5),c.set([1,1,1],8);var d=new Uint32Array(new ArrayBuffer(4*n.CULLABLECOMPONENT_SIZE)),h=new Float32Array(d.buffer),p=function(){function e(e){this._index=0,this._size=null!=e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}();t.scaleNumberArray=p;var f=function(){function e(e){this.worker=e,this.entity2DPools={},this._entity2DPoolIndex=0,this._entity2DPoolUsedLength=0,this._entity2DPoolLength=0,this._entity2DDisposedIds=new p,this.entity3DPools={},this._entity3DPoolIndex=0,this._entity3DPoolUsedLength=0,this._entity3DPoolLength=0,this._entity3DDisposedIds=new p,this.cullableComponentPools={},this._cullableComponentPoolIndex=0,this._cullableComponentPoolUsedLength=0,this._cullableComponentPoolLength=0,this._cullableComponentDisposedIds=new p}return e.prototype._enlargeEntity2DPool=function(e){var t=this.worker.createEntity(n.enumEntityType.Entity2D,e),i=new a.default(t);this._entity2DPoolIndex=i.id,this.entity2DPools[i.id]=i,this._entity2DPoolLength+=e},e.prototype._enlargeEntity3DPool=function(e){var t=this.worker.createEntity(n.enumEntityType.Entity3D,e),i=new a.default(t);this._entity3DPoolIndex=i.id,this.entity3DPools[i.id]=i,this._entity3DPoolLength+=e},e.prototype._enlargeCullableComponentPool=function(e){var t=this.worker.createComponent(n.enumComponentType.Cullable,e),i=new a.default(t);this._cullableComponentPoolIndex=i.id,this.cullableComponentPools[i.id]=i,this._cullableComponentPoolLength+=e},e.prototype.getEntity2D=function(){if(this._entity2DDisposedIds.size()>0)return this._entity2DPoolUsedLength++,this._entity2DDisposedIds.pop();this._entity2DPoolUsedLength>=this._entity2DPoolLength&&this._enlargeEntity2DPool(o);var e=this._entity2DPoolIndex;return this._entity2DPoolIndex+=1,this._entity2DPoolUsedLength++,e},e.prototype.disposeEntity2D=function(e){e.isUsing&&(this._entity2DDisposedIds.push(e.id),this._entity2DPoolUsedLength--,e.setRawBuffer(l),e.isUsing=!1)},e.prototype.getEntity3D=function(){if(this._entity3DDisposedIds.size()>0)return this._entity3DPoolUsedLength++,this._entity3DDisposedIds.pop();this._entity3DPoolUsedLength>=this._entity3DPoolLength&&this._enlargeEntity3DPool(o);var e=this._entity3DPoolIndex;return this._entity3DPoolIndex+=1,this._entity3DPoolUsedLength++,e},e.prototype.disposeEntity3D=function(e){e.isUsing&&(this._entity3DDisposedIds.push(e.id),this._entity3DPoolUsedLength--,e.setRawBuffer(c),e.isUsing=!1)},e.prototype.getCullableComponent=function(){if(this._cullableComponentDisposedIds.size()>0)return this._cullableComponentPoolUsedLength++,this._cullableComponentDisposedIds.pop();this._cullableComponentPoolUsedLength>=this._cullableComponentPoolLength&&this._enlargeCullableComponentPool(o);var e=this._cullableComponentPoolIndex;return this._cullableComponentPoolIndex+=1,this._cullableComponentPoolUsedLength++,e},e.prototype.disposeCullableComponent=function(e){e.isUsing&&(this._cullableComponentDisposedIds.push(e.id),this._cullableComponentPoolUsedLength--,e.setRawBuffer(h),e.isUsing=!1)},e.prototype.getCullableComponentSingle=function(){return this._enlargeCullableComponentPool(1),this._cullableComponentPoolIndex},e.prototype.disposeCullableComponentSingle=function(e){this.cullableComponentPools[e.id]=null},e}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=function(e){function t(t){var i=e.call(this)||this;return i._init(t),i}return r.__extends(t,e),t}(r.__importDefault(i(32)).default);t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerMock=t.AnimatorController=t.AnimatorControllerModelMock=t.staticInitAnimatorController=void 0;var r,n=i(1),a=i(8),o=n.__importDefault(i(45)),s=n.__importDefault(i(61)),l=n.__importDefault(i(46));t.staticInitAnimatorController=function(e){r=e};var u,c=new o.default,d=new s.default,h=new s.default,p=new l.default,f=new l.default,g=function(){function e(e){this.layerCount=e,this.id=a.requestAccelerateObjectID(),this.masks=[],this.buffer=new ArrayBuffer(4+12*e),this.uint32=new Uint32Array(this.buffer);for(var t=0;t<e;t++)this.masks.push(null)}return e.prototype.setMaskAtIndex=function(e,t,i,r){if(this.masks[e]=[],t)for(var n=new Float32Array(t,i,2*r),a=new Uint32Array(t,i,2*r),o=0;o<r;o++)this.masks[e].push({entity:a[2*o],weight:n[2*o+1]})},e}();t.AnimatorControllerModelMock=g,function(e){e[e.Override=0]="Override",e[e.Additive=1]="Additive"}(u||(u={}));var _=function(){this.tx=[0,0],this.ty=[0,0],this.tz=[0,0],this.sx=[0,0],this.sy=[0,0],this.sz=[0,0],this.use_quaternion=!0,this.r_weight=0,this.rx=0,this.ry=0,this.rz=0,this.rw=0},m=function(){function e(e){this.layerCount=e,this.nativeObject=r.worker.createAnimatorControllerModel(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){this.nativeObject.update()},e}();function v(e,t,i,r){var n=!1;return e.use_quaternion?null!==e.rx&&null!==e.ry&&null!==e.rz&&null!==e.rw?(n=!0,r[0]=e.rx,r[1]=e.ry,r[2]=e.rz,r[3]=e.rw):n=!1:null!==e.rx&&null!==e.ry&&null!==e.rz?(n=!0,c.setValue(e.rx,e.ry,e.rz),s.default.fromEulerAngles(c,d),r[0]=d.x,r[1]=d.y,r[2]=d.z,r[3]=d.w):t&&i?(n=!0,c.setValue(null===e.rx?i.getEuler()[0]:e.rx,null===e.ry?i.getEuler()[1]:e.ry,null===e.rz?i.getEuler()[2]:e.rz),s.default.fromEulerAngles(c,d),r[0]=d.x,r[1]=d.y,r[2]=d.z,r[3]=d.w):n=!1,n}t.AnimatorController=m;var y=function(){function e(e){this.layerCount=e,this.binding=null,this._blendMap=new Map,this.nativeObject=new g(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295,this.binding=e},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295,t&&this._blendMap.set(t.id,t)},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){var e=this;if(this.binding){for(var t=[],i=this.binding.defaultValues,r=function(r){var a=new Map,o=n._uint32View[1+3*r];if(o!==u.Override&&o!==u.Additive)return t.push(a),"continue";var s=o===u.Additive,l=n._uint32View[1+3*r+2],c=n._blendMap.get(l);if(!c)return t.push(a),"continue";for(var d=[];c;)c.weight&&d.push(c),c=c.nextState;for(var h=function(e){var t=n._blendState(d[e],s,n.nativeObject.masks[r]),i=d[e].weight;t.forEach((function(e,t){if(!a.has(t)){var r=new _;r.tx[1]=NaN,r.ty[1]=NaN,r.tz[1]=NaN,r.sx[1]=NaN,r.sy[1]=NaN,r.sz[1]=NaN,r.r_weight=NaN,a.set(t,r)}var n=a.get(t);if(isNaN(e.tx[1])||0===e.tx[1]||(isNaN(n.tx[1])&&(n.tx[1]=0),n.tx[0]+=e.tx[0]*i,n.tx[1]+=e.tx[1]*i),isNaN(e.ty[1])||0===e.ty[1]||(isNaN(n.ty[1])&&(n.ty[1]=0),n.ty[0]+=e.ty[0]*i,n.ty[1]+=e.ty[1]*i),isNaN(e.tz[1])||0===e.tz[1]||(isNaN(n.tz[1])&&(n.tz[1]=0),n.tz[0]+=e.tz[0]*i,n.tz[1]+=e.tz[1]*i),isNaN(e.sx[1])||0===e.sx[1]||(isNaN(n.sx[1])&&(n.sx[1]=0),n.sx[0]+=e.sx[0]*i,n.sx[1]+=e.sx[1]*i),isNaN(e.sy[1])||0===e.sy[1]||(isNaN(n.sy[1])&&(n.sy[1]=0),n.sy[0]+=e.sy[0]*i,n.sy[1]+=e.sy[1]*i),isNaN(e.sz[1])||0===e.sz[1]||(isNaN(n.sz[1])&&(n.sz[1]=0),n.sz[0]+=e.sz[0]*i,n.sz[1]+=e.sz[1]*i),!isNaN(e.r_weight)&&0!==e.r_weight){isNaN(n.r_weight)&&(n.r_weight=0);var o=p;o.setValue(n.rx,n.ry,n.rz,n.rw);var s=f;s.setValue(e.rx,e.ry,e.rz,e.rw),o.add(s.scale(o.dot(s)<0?-e.r_weight*i:e.r_weight*i,s),o),n.rx=o.x,n.ry=o.y,n.rz=o.z,n.rw=o.w,n.r_weight+=e.r_weight*i}}))},g=0;g<d.length;g++)h(g);s?a.forEach((function(e,t){if(!isNaN(e.r_weight)){var i=p;i.setValue(e.rx*e.r_weight,e.ry*e.r_weight,e.rz*e.r_weight,e.rw);var r=i.dot(i);r>0&&i.scale(1/Math.sqrt(r),i),e.rx=i.x,e.ry=i.y,e.rz=i.z,e.rw=i.w}})):a.forEach((function(t,r){var n=e.binding.entities.get(r),a=i.get(n);if(!isNaN(t.tx[1])&&t.tx[1]<1&&(t.tx[0]+=(1-t.tx[1])*a.position[0]),!isNaN(t.ty[1])&&t.ty[1]<1&&(t.ty[0]+=(1-t.ty[1])*a.position[1]),!isNaN(t.tz[1])&&t.tz[1]<1&&(t.tz[0]+=(1-t.tz[1])*a.position[2]),!isNaN(t.sx[1])&&t.sx[1]<1&&(t.sx[0]+=(1-t.sx[1])*a.scale[0]),!isNaN(t.sy[1])&&t.sy[1]<1&&(t.sy[0]+=(1-t.sy[1])*a.scale[1]),!isNaN(t.sz[1])&&t.sz[1]<1&&(t.sz[0]+=(1-t.sz[1])*a.scale[2]),!isNaN(t.r_weight)&&t.r_weight<1){var o=a.getQuaternion(),s=p;s.setValue(t.rx,t.ry,t.rz,t.rw),(l=f).setValue(o[0],o[1],o[2],o[3]),s.add(l.scale(s.dot(l)<0?-(1-t.r_weight):1-t.r_weight,l),s),t.rx=s.x,t.ry=s.y,t.rz=s.z,t.rw=s.w}if(!isNaN(t.r_weight)){var l;(l=p).setValue(t.rx,t.ry,t.rz,t.rw);var u=l.dot(l);u>0&&l.scale(1/Math.sqrt(u),l),t.rx=l.x,t.ry=l.y,t.rz=l.z,t.rw=l.w}})),t.push(a)},n=this,a=0;a<this.layerCount;a++)r(a);var o=new Map,s=function(r){var n=l._uint32View[1+3*r]===u.Additive,a=l._f32View[1+3*r+1];t[r].forEach((function(t,s){if(!o.has(s)){var l=new _;l.tx[1]=NaN,l.ty[1]=NaN,l.tz[1]=NaN,l.sx[1]=NaN,l.sy[1]=NaN,l.sz[1]=NaN,l.r_weight=NaN,o.set(s,l)}var u=o.get(s);if(n){if(0===r){var c=i.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=c.position[0]+t.tx[0]*a),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=c.position[1]+t.ty[0]*a),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=c.position[2]+t.tz[0]*a),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=c.scale[0]*(1-a)+t.sx[0]*a),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=c.scale[1]*(1-a)*t.sy[0]*a),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=c.scale[2]*(1-a)*t.sz[0]*a),!isNaN(t.r_weight)){isNaN(u.r_weight)&&(u.r_weight=0);var g=c.getQuaternion(),m=p;m.setValue(g[0],g[1],g[2],g[3]),(y=d).setValue(m.x,m.y,m.z,m.w),(T=f).setValue(t.rx*a,t.ry*a,t.rz*a,t.rw),(C=T.dot(T))>=0&&T.scale(1/Math.sqrt(C),T),(v=h).setValue(T.x,T.y,T.z,T.w),v.multiply(y,v),u.rx=v.x,u.ry=v.y,u.rz=v.z,u.rw=v.w}}else if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]+=t.tx[0]*a),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]+=t.ty[0]*a),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]+=t.tz[0]*a),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]+=t.sx[0]*a),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]+=t.sy[0]*a),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]+=t.sz[0]*a),!isNaN(t.r_weight)){if(isNaN(u.r_weight)){u.r_weight=0;g=(c=i.get(e.binding.entities.get(s))).getQuaternion();u.rx=g[0],u.ry=g[1],u.rz=g[2],u.rw=g[3]}var v,y;(T=f).setValue(t.rx*a,t.ry*a,t.rz*a,t.rw),(C=T.dot(T))>=0&&T.scale(1/Math.sqrt(C),T),(v=h).setValue(T.x,T.y,T.z,T.w),(y=d).setValue(u.rx,u.ry,u.rz,u.rw),v.multiply(y,v),u.rx=v.x,u.ry=v.y,u.rz=v.z,u.rw=v.w}}else if(a<1){c=i.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=c.position[0]*(1-a)+t.tx[0]*a),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=c.position[1]*(1-a)+t.ty[0]*a),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=c.position[2]*(1-a)+t.tz[0]*a),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=c.scale[0]*(1-a)+t.sx[0]*a),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=c.scale[1]*(1-a)+t.sy[0]*a),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=c.scale[2]*(1-a)+t.sz[0]*a),!isNaN(t.r_weight)){isNaN(u.r_weight)&&(u.r_weight=0);g=c.getQuaternion();var A=p;A.setValue(g[0],g[1],g[2],g[3]);var b=f;b.setValue(t.rx,t.ry,t.rz,t.rw);var E=b.dot(A)>=0?1:-1,w=b.scale(E).sub(A).scale(a).add(A);(C=w.dot(w))>=0&&w.scale(1/Math.sqrt(C),w),u.rx=w.x,u.ry=w.y,u.rz=w.z,u.rw=w.w}}else{var T,C;if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=t.tx[0]*a),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=t.ty[0]*a),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=t.tz[0]*a),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=t.sx[0]*a),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=t.sy[0]*a),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=t.sz[0]*a),!isNaN(t.r_weight))isNaN(u.r_weight)&&(u.r_weight=0),(T=f).setValue(t.rx*a,t.ry*a,t.rz*a,t.rw),(C=T.dot(T))>=0&&T.scale(1/Math.sqrt(C),T),u.rx=T.x,u.ry=T.y,u.rz=T.z,u.rw=T.w}}))},l=this;for(a=0;a<t.length;a++)s(a);o.forEach((function(t,i){var r=e.binding.entities.get(i);isNaN(t.tx[1])||(r.localPositionView[0]=t.tx[0]),isNaN(t.ty[1])||(r.localPositionView[1]=t.ty[0]),isNaN(t.tz[1])||(r.localPositionView[2]=t.tz[0]),isNaN(t.sx[1])||(r.localScaleView[0]=t.sx[0]),isNaN(t.sy[1])||(r.localScaleView[1]=t.sy[0]),isNaN(t.sz[1])||(r.localScaleView[2]=t.sz[0]),isNaN(t.r_weight)||(r.localQuaternionView.set([t.rx,t.ry,t.rz,t.rw]),r.setUsingEuler(!1)),r.setLocalMatrixDirty()}))}},e.prototype._blendState=function(e,t,i){var r=new Map;if(!this.binding)return r;for(var n=this.binding.defaultValues,a=e.count,o=e.useDefault,s=0;s<a;s++){var l={clip:e.clipsMap.get(e._uint32View[3+5*s]),frameIndex:e._f32View[3+5*s+1],weight:e._f32View[3+5*s+2],additiveReferenceClip:e.clipsMap.get(e._uint32View[3+5*s+3]),additiveFrameIndex:e._f32View[3+5*s+4]};if(l.weight&&l.clip&&this.binding.clipBinding.has(l.clip)){var u=l.clip.evaluate(l.frameIndex),c=l.weight,g={};if(t){var m=l.additiveReferenceClip?l.additiveReferenceClip:l.clip,y=l.additiveReferenceClip?l.additiveFrameIndex:0;this.binding.clipBinding.has(m)||(m=l.clip,y=0);var A=m.evaluate(y);for(var b in A){var E=this.binding.clipBinding.get(m);if(E[+b])(T=this.binding.entities.get(E[+b].id))&&(g[T.id]=A[b])}}for(var w in u){var T;if(T=this.binding.clipBinding.get(l.clip)[+w]){var C=1;if(i.length){for(var S=NaN,I=0;I<i.length;I++)if(i[I]&&i[I].entity===T.id){S=i[I].weight;break}if(!isNaN(S)){if(0===S)continue;C=S}}var x=n.get(T);if(x){var P=c*C,D=[0,0,0,0],R=v(u[w],0!==o,x,D);if(t){var O=g[T.id];if(!O)continue;var k=[0,0,0,0],M=v(O,0!==o,x,k);if(null!==u[w].tx&&null!==O.tx&&(u[w].tx-=O.tx),null!==u[w].ty&&null!==O.ty&&(u[w].ty-=O.ty),null!==u[w].tz&&null!==O.tz&&(u[w].tz-=O.tz),null!==u[w].sx&&null!==O.sx&&(u[w].sx-=O.sx),null!==u[w].sy&&null!==O.sy&&(u[w].sy-=O.sy),null!==u[w].sz&&null!==O.sz&&(u[w].sz-=O.sz),R&&M){var N=d;N.setValue(k[0],k[1],k[2],k[3]);var L=h;L.setValue(D[0],D[1],D[2],D[3]),L.multiply(N.invert(N),L),D[0]=u[w].rx=L.x,D[1]=u[w].ry=L.y,D[2]=u[w].rz=L.z,D[3]=u[w].rw=L.w}}if(!r.has(T.id)){var B=new _;B.tx[1]=NaN,B.ty[1]=NaN,B.tz[1]=NaN,B.sx[1]=NaN,B.sy[1]=NaN,B.sz[1]=NaN,B.r_weight=NaN,r.set(T.id,B)}var F=r.get(T.id);if(null!==u[w].tx&&(isNaN(F.tx[1])&&(F.tx[1]=0),F.tx[0]+=u[w].tx*P,F.tx[1]+=P),null!==u[w].ty&&(isNaN(F.ty[1])&&(F.ty[1]=0),F.ty[0]+=u[w].ty*P,F.ty[1]+=P),null!==u[w].tz&&(isNaN(F.tz[1])&&(F.tz[1]=0),F.tz[0]+=u[w].tz*P,F.tz[1]+=P),null!==u[w].sx&&(isNaN(F.sx[1])&&(F.sx[1]=0),F.sx[0]+=u[w].sx*P,F.sx[1]+=P),null!==u[w].sy&&(isNaN(F.sy[1])&&(F.sy[1]=0),F.sy[0]+=u[w].sy*P,F.sy[1]+=P),null!==u[w].sz&&(isNaN(F.sz[1])&&(F.sz[1]=0),F.sz[0]+=u[w].sz*P,F.sz[1]+=P),R){isNaN(F.r_weight)&&(F.r_weight=0),F.r_weight+=P;var U=p;U.setValue(F.rx,F.ry,F.rz,F.rw);var W=f;W.setValue(D[0],D[1],D[2],D[3]),U.add(W.scale(U.dot(W)<0?-P:P,W),U),F.rx=U.x,F.ry=U.y,F.rz=U.z,F.rw=U.w}}}}}}return t||0===o||n.forEach((function(e,t){if(i.length)for(var n=0;n<i.length;n++)if(i[n]&&i[n].entity===t.id){if(i[n]&&0===i[n].weight)return;break}r.has(t.id)||r.set(t.id,new _)})),r},e}();t.AnimatorControllerMock=y},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(44)),a=r.__importDefault(i(45)),o=i(20),s=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT",{get:function(){return e.createFromNumber(0,0,0,1)},enumerable:!1,configurable:!0}),e.fromEulerAngles=function(t,i){return i=i||e.DEFAULT,o.quatHelper.fromEulerAngles(t._raw,t._offset,c._raw,c._offset),i.set(c),i},e.createFromMatrix4=function(t,i){return i=i||new e,o.quatHelper.fromMatrix4(t._raw,t._offset,c._raw,c._offset),i.set(c),i},e.createFromAxisAngle=function(t,i,r){return r=r||new e,n.default.createRotationAxis(t,i,l),e.createFromMatrix4(l,r),r},e.lookRotation=function(t,i,r){return r=r||new e,n.default.lookAt(a.default.ZERO,t,i,l),e.createFromMatrix4(l,r),r},e.createFromNumber=function(t,i,r,n){var a=new Float32Array(4);return a[0]=t,a[1]=i,a[2]=r,a[3]=n,new e(a)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,i){return void 0===i&&(i=0),t.length-i<4&&(t=new Float32Array(4).fill(0)),new e(t,i)},e.prototype.set=function(e){o.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,i,r){var n=this._raw;return n[this._offset+0]=e,n[this._offset+1]=t,n[this._offset+2]=i,n[this._offset+3]=r,this},e.prototype.slerp=function(t,i,r){return r=r||new e,o.quatHelper.slerp(this._raw,this._offset,t._raw,t._offset,i,c._raw,c._offset),r.set(c),r},e.prototype.invert=function(t){return t=t||new e,o.quatHelper.invert(this._raw,this._offset,c._raw,c._offset),t.set(c),t},e.prototype.add=function(t,i){return i=i||e.DEFAULT,o.v4Helper.add(this._raw,this._offset,t._raw,t._offset,c._raw,c._offset),i.set(c),i},e.prototype.sub=function(t,i){return i=i||e.DEFAULT,o.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,c._raw,c._offset),i.set(c),i},e.prototype.multiply=function(t,i){return i=i||e.DEFAULT,o.quatHelper.multiply(this._raw,this._offset,t._raw,t._offset,c._raw,c._offset),i.set(c),i},e.prototype.clone=function(){var t=new e;return o.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return o.v4Helper.isZero(this._raw,this._offset)},e.prototype.isDefault=function(){return o.v4Helper.equal(this._raw,this._offset,u._raw,u._offset)},e.prototype.toEulerAngles=function(e){return e=e||a.default.ZERO,o.quatHelper.toEulerAngles(this._raw,this._offset,d._raw,d._offset),e.set(d),e},e.prototype.equal=function(e){return o.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e}();t.default=s;var l=new n.default,u=s.DEFAULT,c=new s,d=new a.default},function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerStateMock=t.AnimatorControllerState=t.staticInitAnimatorControllerLayerBlend=void 0,t.staticInitAnimatorControllerLayerBlend=function(e){r=e};var n=function(){function e(e){this.count=e,this._index=0,this._native=r.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},e.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,i,r,n){return!(this._index>=this.count)&&(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=i,this._uint32View[5*this._index+3+3]=r?r.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=n,this._index++,!0)},e}();t.AnimatorControllerState=n;var a=function(){function e(e){this.count=e,this.clipsMap=new Map,this._index=0,this._native=r.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0,this.clipsMap.clear()},e.prototype.setNextState=function(e){this.nextState=e,this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,i,r,n){return!(this._index>=this.count)&&(this.clipsMap.set(e.id,e),this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=i,this._uint32View[5*this._index+3+3]=r?r.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=n,r&&this.clipsMap.set(r.id,r),this._index++,!0)},e}();t.AnimatorControllerStateMock=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(54)),a=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;this.setCommandSize(t)},t}(n.default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationClipBindingMock=t.AnimationClipBinding=t.staticInitAnimationClipBinding=t.Entity3DValue=void 0;var r,n,a,o,s=i(1),l=i(8),u=s.__importDefault(i(61)),c=s.__importDefault(i(45)),d=new u.default,h=new c.default,p=function(){function e(e){this.position=[e.localPositionView[0],e.localPositionView[1],e.localPositionView[2]],this.scale=[e.localScaleView[0],e.localScaleView[1],e.localScaleView[2]],e.isUsingEuler()?(this._euler=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2]],this.useQuaternion=!1,this._quaternionInitialized=!1,this._eulerInitialized=!0):(this.useQuaternion=!0,this._quaternionInitialized=!0,this._quaternion=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2],e.localQuaternionView[3]],this._eulerInitialized=!1)}return e.prototype.getEuler=function(){return this._eulerInitialized||(this._eulerInitialized=!0,d.setValue(this._quaternion[0],this._quaternion[1],this._quaternion[2],this._quaternion[3]),d.toEulerAngles(h),this._euler=[h.x,h.y,h.z]),this._euler},e.prototype.getQuaternion=function(){return this._quaternionInitialized||(this._quaternionInitialized=!0,h.setValue(this._euler[0],this._euler[1],this._euler[2]),u.default.fromEulerAngles(h,d),this._quaternion=[d.x,d.y,d.z,d.w]),this._quaternion},e.prototype.syncValue=function(e){e.localPositionView.set(this.position),e.localScaleView.set(this.scale),this.useQuaternion?(e.localQuaternionView.set(this._quaternion),e.setUsingEuler(!1)):(e.localQuaternionView.set(this._euler),e.setUsingEuler(!0)),e.setLocalMatrixDirty()},e}();t.Entity3DValue=p,t.staticInitAnimationClipBinding=function(e){r=e},function(e){e[e.Ignore=0]="Ignore",e[e.Refresh=1]="Refresh"}(n||(n={})),function(e){e[e.Keep=0]="Keep",e[e.Refresh=1]="Refresh",e[e.WriteBack=2]="WriteBack"}(a||(a={})),function(e){e[e.Keep=0]="Keep",e[e.Clear=1]="Clear",e[e.WriteBack=2]="WriteBack"}(o||(o={}));var f=function(){function e(e,t,i,n,a,o,s,l){for(var u=Math.min(n.length-a,o),c=Math.min(e.length-t,i),d=new ArrayBuffer(4*(u+c)),h=new Uint32Array(d),p=0,f=t;f<c;f++)h[p++]=e[f]?e[f].id:4294967295;for(f=a;f<u;f++)h[p++]=null===n[f]?4294967295:"number"==typeof n[f]?n[f]:n[f].id;this.nativeObject=r.worker.createAnimationClipBinding(d,0,c,u,s,l.id)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.updateBinding=function(e,t,i,r,n,a,o,s,l,u){for(var c=Math.min(r.length-n,a),d=Math.min(e.length-t,i),h=new ArrayBuffer(4*(c+d)),p=new Uint32Array(h),f=0,g=t;g<d;g++)p[f++]=e[g]?e[g].id:4294967295;for(g=n;g<c;g++)p[f++]=null===r[g]?4294967295:"number"==typeof r[g]?r[g]:r[g].id;return this.nativeObject.updateBinding(h,0,d,c,o,s,l,u.id)},e.prototype.writeDefaultValues=function(){this.nativeObject.writeDefaultValues()},e}();t.AnimationClipBinding=f;var g=function(){function e(e,t,i,r,a,o,s,u){this.clipBinding=new Map,this.defaultValues=new Map,this.id=l.requestAccelerateObjectID(),this._root=null,this.clipModels=new Map,this.entities=new Map;var c=[];if(this._updateBinding(e,t,i,r,a,o,c)&&s===n.Refresh)for(var d=0,h=c;d<h.length;d++){var f=h[d];this.defaultValues.set(f,new p(f))}}return e.prototype.updateBinding=function(e,t,i,r,s,l,u,c,d,h){var f=this,g=[];if(!this._updateBinding(e,t,i,r,s,l,g))return!1;var _=this.defaultValues;this.defaultValues=new Map;var m,v,y=u;y&o.WriteBack?(v=!0,m=y&~o.WriteBack):(v=!1,m=y);var A,b,E=c;E&a.WriteBack?(b=!0,A=E&~a.WriteBack):(b=!1,A=E);for(var w=d,T=new Set,C=new Set,S=new Set,I=0,x=g;I<x.length;I++){var P=x[I];_.has(P)?T.add(P):C.add(P)}return _.forEach((function(e,t){g.indexOf(t)<0&&S.add(t)})),v&&S.forEach((function(e){_.get(e).syncValue(e)})),m===o.Keep&&S.forEach((function(e){var t=_.get(e);f.defaultValues.set(e,t)})),A===a.Refresh&&T.forEach((function(e){f.defaultValues.set(e,new p(e))})),b&&T.forEach((function(e){_.get(e).syncValue(e)})),A===a.Keep&&T.forEach((function(e){var t=_.get(e);f.defaultValues.set(e,t)})),w===n.Refresh&&C.forEach((function(e){f.defaultValues.set(e,new p(e))})),!0},e.prototype.writeDefaultValues=function(){this.defaultValues.forEach((function(e,t){e.syncValue(t)}))},e.prototype.getRoot=function(){return this._root},e.prototype._getRoot=function(){if(!this.clipBinding.size)return null;var e=null;return this.clipBinding.forEach((function(t,i){!e&&t.length&&(e=t[0])})),e},e.prototype._updateBinding=function(e,t,i,r,n,a,o){i=Math.min(e.length-t,i),a=Math.min(r.length-n,a);for(var s=0,l=new Map,u=t;u<i;u++){var c=e[u],d=[],h=r[s++];if("number"!=typeof h)return!1;if(s>=a)return!1;for(var p=0;p<h;p++){if(s>=a)return!1;if("number"==typeof(_=r[n+s]))return!1;_?(o.push(_),d.push(_)):d.push(null),s++}l.set(c,d)}this.clipBinding=l,this.entities.clear();for(var f=0,g=o;f<g.length;f++){var _=g[f];this.entities.set(_.id,_)}return this._root=this._getRoot(),!0},e}();t.AnimationClipBindingMock=g},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicManager=void 0;var r=i(1),n=i(32),a=r.__importDefault(i(44)),o=r.__importDefault(i(61)),s=r.__importDefault(i(45)),l=i(6),u=i(33),c=r.__importDefault(i(66)),d=r.__importStar(i(48)),h=r.__importStar(i(49)),p=r.__importDefault(i(67)),f=r.__importDefault(i(69)),g=r.__importStar(i(50)),_=r.__importDefault(i(51)),m=r.__importDefault(i(52)),v=r.__importDefault(i(70)),y=r.__importDefault(i(72)),A=r.__importDefault(i(73)),b=r.__importDefault(i(74)),E=r.__importStar(i(35)),w=r.__importDefault(i(75)),T=r.__importDefault(i(47)),C=i(8),S=r.__importDefault(i(58)),I=r.__importDefault(i(46)),x=i(64),P=i(60),D=i(62),R=function(){function e(e,t){this.config=t,this.entity2mock=new WeakMap,this.entityGroup2mock=new WeakMap,this.cullableComponent2mock=new WeakMap,this._entitySystem=null,this._modelMap={},this._dataBufferMap={},this.worker=e,this.poolManager=new S.default(this.worker),d.staticInitEntity2D(this),h.staticInitEntity3D(this),g.staticInitEntityGroup(this),E.staticInitCullableComponent(this),n.staticInitNativeObject(this.worker),P.staticInitAnimatorController(this),x.staticInitAnimationClipBinding(this),D.staticInitAnimatorControllerLayerBlend(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new h.default(e,this.poolManager.entity3DPools);t.isUsing=!0,this.entitySetActive(t,!0);var i=new f.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,i),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new d.default(e,this.poolManager.entity2DPools);t.isUsing=!0,this.entitySetActive(t,!0);var i=new p.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,i),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(l.enumEntityType.Entity2D,e),i=new _.default(t,e),r=new v.default(i);return this.entityGroup2mock.set(i,r),i},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(l.enumEntityType.Entity3D,e),i=new m.default(t,e),r=new y.default(i);return this.entityGroup2mock.set(i,r),i},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new E.default(e,this.poolManager.cullableComponentPools);t.isUsing=!0,t.setActive(!0);var i=new w.default(t);return this.cullableComponent2mock.set(t,i),t},e.prototype.createAnimatorComponent=function(){return new A.default},e.prototype.createSkinnedSkeletonComponent=function(){return new b.default},e.prototype.createDataModel=function(e){var t=u.dataModel2CtorMock[e];if(!t)return console.warn("can not support dataModel ["+e+"]"),null;var i=C.requestAccelerateObjectID(),r=new t(i);return this._modelMap[i]=r,r},e.prototype.createDataBuffer=function(e){var t=C.requestAccelerateObjectID(),i={buffer:new ArrayBuffer(e),id:t,byteSize:e},r=new T.default(i);return this._dataBufferMap[t]=r,r},e.prototype.createAnimationClipBinding=function(e,t,i,r,n,a,o,s){return new x.AnimationClipBindingMock(e,t,i,r,n,a,o,s)},e.prototype.createAnimatorController=function(e){return new P.AnimatorControllerMock(e)},e.prototype.createAnimatorControllerStateModel=function(e){return new D.AnimatorControllerStateMock(e)},e.prototype.entityAddChild=function(e,t){var i=this.entity2mock.get(e),r=this.entity2mock.get(t);i&&r&&i.addChild(r)},e.prototype.entityAddChildAtIndex=function(e,t,i){var r=this.entity2mock.get(e),n=this.entity2mock.get(t);r&&n&&r.addChildAtIndex(n,i)},e.prototype.entityRemoveFromParent=function(e){var t=this.entity2mock.get(e);t&&t.removeFromParent()},e.prototype.entityDestroy=function(e){var t=this.entity2mock.get(e);t&&t.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof h.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){var t=this.entity2mock.get(e);t&&t.clear()},e.prototype.entitySetActive=function(e,t){var i=this.entity2mock.get(e);i&&(i.active=t)},e.prototype.entitySetLocalMatrixDirty=function(e){var t=this.entity2mock.get(e);t&&t.setLocalMatrixDirty()},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){for(var i=0;i<t;i++){var r=e[i],n=this.entity2mock.get(r);n&&n.setLocalMatrixDirty()}},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){},e.prototype.componentBindEntity=function(e,t){var i=this.cullableComponent2mock.get(e),r=this.entity2mock.get(t);i&&r&&i.bindEntity(r)},e.prototype.componentUnbindEntity=function(e){var t=this.cullableComponent2mock.get(e);t&&t.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){var t=this.entity2mock.get(e);t&&(t instanceof f.default?this._getEntitySystem().setEntityRoot3D(t):this._getEntitySystem().setEntityRoot2D(t))},e.prototype.entityGroupAddChild=function(e,t,i,r){var n,a;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[i]:n=this.entity2mock.get(e);t instanceof g.default?a=this.entityGroup2mock.get(t).entitis[r]:a=this.entity2mock.get(t);n&&a&&n.addChild(a)},e.prototype.entityGroupAddChildAtIndex=function(e,t,i,r,n){var a,o;e instanceof g.default?a=this.entityGroup2mock.get(e).entitis[r]:a=this.entity2mock.get(e);t instanceof g.default?o=this.entityGroup2mock.get(t).entitis[n]:o=this.entity2mock.get(t);a&&o&&a.addChildAtIndex(o,i)},e.prototype.entityGroupRemoveFromParent=function(e,t){var i;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[t]:i=this.entity2mock.get(e);i&&i.removeFromParent()},e.prototype.entityGroupDestroy=function(e,t){var i;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[t]:i=this.entity2mock.get(e);i&&i.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof h.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){var i;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[t]:i=this.entity2mock.get(e);i&&i.clear()},e.prototype.entityGroupSetActive=function(e,t,i){var r;e instanceof g.default?r=this.entityGroup2mock.get(e).entitis[i]:r=this.entity2mock.get(e);r&&(r.active=t)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){var i;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[t]:i=this.entity2mock.get(e);i&&i.setLocalMatrixDirty()},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){var t=this.entityGroup2mock.get(e);t&&t.setLocalMatrixDirtyAll()},e.prototype.componentBindEntityWithIndex=function(e,t,i,r){var n,a=this.cullableComponent2mock.get(e);t instanceof g.default?n=this.entityGroup2mock.get(t).entitis[r]:n=this.entity2mock.get(t);a&&n&&a.bindEntity(n)},e.prototype.componentUnbindEntityWithIndex=function(e,t){var i=this.cullableComponent2mock.get(e);i&&i.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){var i;(void 0===t&&(t=0),e instanceof g.default)?i=this.entityGroup2mock.get(e).entitis[t]:i=this.entity2mock.get(e);i&&(i instanceof f.default?this._getEntitySystem().setEntityRoot3D(i):this._getEntitySystem().setEntityRoot2D(i))},e.prototype.refreshWorldTransform=function(){this._getEntitySystem().refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,i,r,n,a,o,l,u,c,d,h,p,f){var g=this._getEntitySystem().root3D,_=[],m=[],v=s.default.createFromNumber(t,i,r),y=s.default.createFromNumber(n,a,o),A=s.default.createFromNumber(l,u,c),b=p*Math.tan(d/2),E=b*h,w=v.sub(y).normalize(),T=A.cross(w).normalize(),C=w.cross(T),S=v,I=S.sub(w.scale(p)),x=S.sub(w.scale(f)),P=[];P[0]={},P[0].point=I,P[0].normal=w.scale(-1),P[0].distance=P[0].point.dot(P[0].normal.scale(-1)),P[1]={},P[1].point=x,P[1].normal=w,P[1].distance=P[1].point.dot(P[1].normal.scale(-1)),P[2]={},P[2].point=I.add(C.scale(b)),P[2].normal=P[2].point.sub(S).normalize().cross(T),P[2].distance=P[2].point.dot(P[2].normal.scale(-1)),P[3]={},P[3].point=I.sub(C.scale(b)),P[3].normal=T.cross(P[3].point.sub(S).normalize()),P[3].distance=P[3].point.dot(P[3].normal.scale(-1)),P[4]={},P[4].point=I.sub(T.scale(E)),P[4].normal=P[4].point.sub(S).normalize().cross(C),P[4].distance=P[4].point.dot(P[4].normal.scale(-1)),P[5]={},P[5].point=I.add(T.scale(E)),P[5].normal=C.cross(P[5].point.sub(S).normalize()),P[5].distance=P[5].point.dot(P[5].normal.scale(-1)),g&&g.travelChild((function(t){for(var i=0,r=t._cullableComps;i<r.length;i++){var n=r[i];if(!n||!n.active||n.entity!==t||!t.active)return!0;if(!(e&n.cullMask))return!0;var a=!1,o=t.worldMatrix,l=o._raw,u=o._offset,c=s.default.createFromNumber(l[u+0+0],l[u+0+1],l[u+0+2]).length(),d=s.default.createFromNumber(l[u+4+0],l[u+4+1],l[u+4+2]).length(),h=s.default.createFromNumber(l[u+8+0],l[u+8+1],l[u+8+2]).length(),p=c>d?c:d;p=p>h?p:h;for(var f=o.transformPoint(s.default.createFromTypedArray(n.boundingBallCenter)),g=n.boundingBallRadius*p,v=0;v<6;v++){if(P[v].normal.dot(f)+P[v].distance<-g){a=!0;break}}a||(_.push(n._componetModel.id),m.push(0))}}));var D={objects:new Uint32Array(_).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(m).buffer};return D?{hash:D.hash,objects:new Uint32Array(D.objects),distances:new Float32Array(D.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,i,r,n,a,o,l,u,c,d,h,p,f,g,_){var m=this._getEntitySystem().root3D,v=[],y=[],A=s.default.createFromNumber(t,i,r),b=s.default.createFromNumber(n,a,o),E=s.default.createFromNumber(l,u,c),w=A.sub(b).normalize(),T=E.cross(w).normalize(),C=w.cross(T),S=A,I=S.sub(w.scale(g)),x=S.sub(w.scale(_)),P=[];P[0]={},P[0].point=I,P[0].normal=w.scale(-1),P[0].distance=P[0].point.dot(P[0].normal.scale(-1)),P[1]={},P[1].point=x,P[1].normal=w,P[1].distance=P[1].point.dot(P[1].normal.scale(-1)),P[2]={},P[2].point=I.add(C.scale(f)),P[2].normal=C.scale(-1),P[2].distance=P[2].point.dot(P[2].normal.scale(-1)),P[3]={},P[3].point=I.add(C.scale(p)),P[3].normal=C,P[3].distance=P[3].point.dot(P[3].normal.scale(-1)),P[4]={},P[4].point=I.add(T.scale(d)),P[4].normal=T,P[4].distance=P[4].point.dot(P[4].normal.scale(-1)),P[5]={},P[5].point=I.add(T.scale(h)),P[5].normal=T.scale(-1),P[5].distance=P[5].point.dot(P[5].normal.scale(-1)),m&&m.travelChild((function(t){for(var i=0,r=t._cullableComps;i<r.length;i++){var n=r[i];if(!n||!n.active||n.entity!==t||!t.active)return!0;if(!(e&n.cullMask))return!0;var a=!1,o=t.worldMatrix,l=o._raw,u=o._offset,c=s.default.createFromNumber(l[u+0+0],l[u+0+1],l[u+0+2]).length(),d=s.default.createFromNumber(l[u+4+0],l[u+4+1],l[u+4+2]).length(),h=s.default.createFromNumber(l[u+8+0],l[u+8+1],l[u+8+2]).length(),p=c>d?c:d;p=p>h?p:h;for(var f=o.transformPoint(s.default.createFromTypedArray(n.boundingBallCenter)),g=n.boundingBallRadius*p,_=0;_<6;_++){if(P[_].normal.dot(f)+P[_].distance<-g){a=!0;break}}a||(v.push(n._componetModel.id),y.push(0))}}));var D={objects:new Uint32Array(v).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(y).buffer};return D?{hash:D.hash,objects:new Uint32Array(D.objects),distances:new Float32Array(D.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.SyncValuesToEntity3D=function(e,t){null!==e.tx&&(t.float32View[t.localPositionOffset]=e.tx),null!==e.ty&&(t.float32View[t.localPositionOffset+1]=e.ty),null!==e.tz&&(t.float32View[t.localPositionOffset+2]=e.tz),null!==e.sx&&(t.float32View[t.localScaleOffset+0]=e.sx),null!==e.sy&&(t.float32View[t.localScaleOffset+1]=e.sy),null!==e.sz&&(t.float32View[t.localScaleOffset+2]=e.sz),null!==e.rw?(t.setUsingEuler(!1),t.float32View[t.localQuaternionOffset+0]=e.rx,t.float32View[t.localQuaternionOffset+1]=e.ry,t.float32View[t.localQuaternionOffset+2]=e.rz,t.float32View[t.localQuaternionOffset+3]=e.rw):null!==e.rx||null!==e.ry||e.rz,this.entitySetLocalMatrixDirty(t)},e.prototype.updateAnimator=function(e){if(this._updateAnimator(e),e){var t=this.entity2mock.get(e.culEntity3DTreeNode);t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.updateAnimatorController=function(e){if(e&&e.binding&&e.binding.getRoot()){e.update();var t=this.entity2mock.get(e.binding.getRoot());t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.computeRootWorldMatrixRecursive=function(e){var t=e.parent;t?this.computeRootWorldMatrixRecursive(t):e!=this._getEntitySystem().root3D&&e._computeWorldMatrixRecursive(!1)},e.prototype._updateAnimator=function(e){if(e){for(var t=[],i=0,n=0;n<e.animationClipCount;n++){var a=e.getAnimationParamater(n);if(void 0!==a.percentage){var s=r.__assign({},a);s.nodeIndex=i,t.push(s)}i+=this._modelMap[a.animationClipId].nodesLength}if(0!==t.length){var l=this._modelMap[t[0].animationClipId];if(void 0!==l)if(1===t.length){var u=l.evaluate(t[0].frameIndex);for(var n in u){if(g=e.getEntity(Number(n)+t[0].nodeIndex)){var c=u[n];delete(m=r.__assign({},u[n])).use_quaternion,this.SyncValuesToEntity3D(c,g)}}}else{var d={},h=e,p=t;for(n=0;n<p.length;n++)if(this._modelMap[p[n].animationClipId]){u=this._modelMap[p[n].animationClipId].evaluate(p[n].frameIndex);for(var f in u){var g;if(g=h.getEntity(Number(f)+p[n].nodeIndex)){var _=g.id,m=r.__assign({},u[f]),v=r.__assign({},u[f]);for(var y in delete m.use_quaternion,delete v.use_quaternion,m)null!==m[y]&&(v[y]=p[n].percentage);d[_]||(d[_]={entity:g,transforms:[],percentages:[]}),d[_].transforms.push(m),d[_].percentages.push(v)}}}else console.log("Fail to get native animation-clip resource.");var A={},b={};for(var _ in d){A[_]={tx:[],ty:[],tz:[],sx:[],sy:[],sz:[],rx:[],ry:[],rz:[],rw:[]};var E=d[_].transforms.length;for(n=0;n<E;n++){m=d[_].transforms[n],v=d[_].percentages[n];for(var w in v)null!==v[w]&&A[_][w].push({value:m[w],percentage:v[w]})}}for(var _ in A){b[_]={tx:null,ty:null,tz:null,sx:null,sy:null,sz:null,rx:null,ry:null,rz:null,rw:null,use_quaternion:!0};var T=A[_];for(var w in T)if(T[w].length&&["tx","ty","tz","sx","sy","sz"].indexOf(w)>=0){null===b[_][w]&&(b[_][w]=0);for(var C=0;C<T[w].length;C++){var S=T[w][C];b[_][w]+=S.value*S.percentage}}if(T.rx.length&&T.rx.length===T.ry.length&&T.rx.length===T.rz.length&&T.rx.length===T.rw.length)if(2!==T.rx.length){for(var x=new I.default,P=0;P<T.rx.length;P++){var D=T.rx[P].percentage,R=I.default.createFromNumber(T.rx[P].value,T.ry[P].value,T.rz[P].value,T.rw[P].value);x.add(x.dot(R)<0?R.scale(-D):R.scale(D),x)}x.scale(1/Math.sqrt(x.dot(x)),x),b[_].rx=x.x,b[_].ry=x.y,b[_].rz=x.z,b[_].rw=x.w}else{var O=new o.default;O.setValue(T.rx[0].value,T.ry[0].value,T.rz[0].value,T.rw[0].value);var k=new o.default;k.setValue(T.rx[1].value,T.ry[1].value,T.rz[1].value,T.rw[1].value),O.slerp(k,T.rx[1].percentage/(T.rx[0].percentage+T.rx[1].percentage),O),b[_].rx=O.x,b[_].ry=O.y,b[_].rz=O.z,b[_].rw=O.w}}for(var _ in b)this.SyncValuesToEntity3D(b[_],d[_].entity)}else console.log("AnimationClipModel not found")}}},e.prototype.updateAnimators=function(e){for(var t=0;t<e.length;t++)this.updateAnimator(e[t])},e.prototype.updateAnimatorControllers=function(e,t){for(var i=0;i<t;i++)this.updateAnimatorController(e[i])},e.prototype.updateSkinningMatrix=function(e){if(e)for(var t=this._modelMap[e.getBoneInverseModelId()],i=0;i<e.getBoneNum();i++){var r=e.getBoneIndices(i),n=e.getBoneEntity(i),o=a.default.createFromTypedArray(n.float32View,n.worldMatrixOffset),s=t.inverseMatrixs[r];o.multiply(s,e.outputBoneInverseMatrixs[i])}},e.prototype.updateSkinningMatrices=function(e){for(var t=0;t<e.length;t++)this.updateSkinningMatrix(e[t])},e.prototype.bindEntitiesToBones=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=t[i],a=this.entity2mock.get(r),o=this.entity2mock.get(n);a&&o&&(a._linkBoneEntity=o,o._linkEntity=a)}},e.prototype.unbindEntitiesFromBones=function(e){for(var t=0;t<e.length;t++){var i=e[t],r=this.entity2mock.get(i);r&&r._linkBoneEntity&&(r._linkBoneEntity._linkEntity=null,r._linkEntity=null)}},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,i,r){for(var n=0;n<e.length;n++){var a=e[n],o=t[n],s=this.entity2mock.get(a),l=this.entity2mock.get(o);s&&l&&(s._linkBoneEntity=l,l._linkEntity=s)}},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){for(var i=0;i<e.length;i++){var r=e[i],n=this.entity2mock.get(r);n&&n._linkBoneEntity&&(n._linkBoneEntity._linkEntity=null,n._linkEntity=null)}},e.prototype._getEntitySystem=function(){return this._entitySystem||(this._entitySystem=new c.default(this)),this._entitySystem},e.prototype.frameStart=function(){},e.prototype.setEntityName=function(e,t){},e}();t.LogicManager=R},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.root3D=null,this.root3Ds=[],this.root2Ds=[],this._manager=e}return e.prototype.refreshWorldTransform=function(){this.root3D._computeWorldMatrixRecursive(!0),this.root2Ds.forEach((function(e){e._computeWorldMatrixRecursive(!0)}))},e.prototype.setEntityRoot3D=function(e){this.root3D=e,this.root3Ds.push(e)},e.prototype.setEntityRoot2D=function(e){this.root2Ds.push(e)},e.prototype.entityAddChild=function(e,t){e.addChild(t)},e.prototype.entityAddChildAtIndex=function(e,t,i){e.addChildAtIndex(t,i)},e.prototype.entityRemoveFromParent=function(e){e.parent&&e.parent.removeChild(e)},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(21)),a=r.__importDefault(i(22)),o=r.__importDefault(i(48)),s=function(e){function t(t,i,r){var a=e.call(this)||this;return a._localMatrix=n.default.IDENTITY,a._raw=t,a._rawU32=i,a._offset=r,a.localRotationOffset=a._offset+o.default.OFFSET_ROTATION,a.localPositionOffset=a._offset+o.default.OFFSET_POSITION,a.localScaleOffset=a._offset+o.default.OFFSET_SCALE,a.worldMatrixOffset=a._offset+o.default.OFFSET_WORLDMATRIX,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=a.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotation",{get:function(){return this._raw[this.localRotationOffset]},set:function(e){this._raw[this.localRotationOffset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=a.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=n.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),i=e||t;if(i){var r=this.parent;r?r.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset)}this._isWorldMatrixDirty=!0;for(var n=0,a=this.children;n<a.length;n++){var o=a[n];o.active&&o._computeWorldMatrixRecursive(i)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){var t=this.localPosition,i=this.localRotation,r=this.localScale;n.default.IDENTITY.translate(t.x,t.y,this._localMatrix).rotate(i,this._localMatrix).scale(r.x,r.y,this._localMatrix),this._isLocalMatrixDirty=!1}return e},t}(r.__importDefault(i(68)).default);t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.children=[],this.parent=null,this.components=[],this.id=0,this.active=!0,this._isLocalMatrixDirty=!1,this._isWorldMatrixDirty=!1}return e.prototype.setLocalMatrixDirty=function(){this._isLocalMatrixDirty=!0},e.prototype._computeWorldMatrixRecursive=function(e){},e.prototype.bindComponet=function(e){this.components.push(e),e.entity=this,e._onAdd()},e.prototype.unbindComponent=function(e){var t=this.components.indexOf(e);(e.entity||-1!==t)&&(this.components.splice(t,1),e.entity=null,e._onDestroy())},e.prototype.getComponent=function(e){var t=this.getAllComponents(e);return t.length?t[0]:void 0},e.prototype.getAllComponents=function(e){return this.components.filter((function(t){return t instanceof e}))||[]},e.prototype.travelChild=function(e){e(this);for(var t=0;t<this.children.length;t++)this.children[t].travelChild(e)},e.prototype.addChild=function(e){this.addChildAtIndex(e,this.children.length)},e.prototype.addChildAtIndex=function(e,t){e.parent&&e.parent.removeChild(e),-1===this.children.indexOf(e)&&(t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),e.parent=this)},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)},e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.destroy=function(){for(var e=0,t=this.components;e<t.length;e++){var i=t[e];i._onDestroy(),i.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null},e.prototype.clear=function(){for(var e=0,t=this.components;e<t.length;e++){var i=t[e];i._onDestroy(),i.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null;for(var r=0,n=this.children;r<n.length;r++){n[r].clear()}},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(44)),a=r.__importDefault(i(61)),o=r.__importDefault(i(45)),s=r.__importDefault(i(68)),l=r.__importDefault(i(49)),u=function(e){function t(t,i,r){var a=e.call(this)||this;return a._localMatrix=n.default.IDENTITY,a._cullableComps=[],a._linkEntity=null,a._linkBoneEntity=null,a._raw=t,a._rawU32=i,a._offset=r,a.localRotationTypeOffset=a._offset+l.default.OFFSET_ROTATIONTYPE,a.localQuaternionOffset=a._offset+l.default.OFFSET_ROTATION,a.localPositionOffset=a._offset+l.default.OFFSET_POSITION,a.localScaleOffset=a._offset+l.default.OFFSET_SCALE,a.worldMatrixOffset=a._offset+l.default.OFFSET_WORLDMATRIX,a}return r.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=o.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternion",{get:function(){return this._localQuaternion||(this._localQuaternion=new a.default(this._raw,this.localQuaternionOffset)),this._localQuaternion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=o.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=n.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._refreshWorldTransform=function(){var e=this.parent;e&&e._refreshWorldTransform();this._culLocalTransform();e?e.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._isWorldMatrixDirty=!0},t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),i=e||t;if(i){var r=this.parent;r?r.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._linkEntity&&this._SyncTransform(),this._isWorldMatrixDirty=!0}for(var n=0,a=this.children;n<a.length;n++){var o=a[n];o.active&&o._computeWorldMatrixRecursive(i)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){if(this.isUsingEuler());else{var t=this.localPosition,i=this.localQuaternion,r=this.localScale;n.default.composeTQS(t,i,r,this._localMatrix)}this._isLocalMatrixDirty=!1}return e},t.prototype._SyncTransform=function(){var e=this.worldMatrix,t=o.default.ZERO,i=o.default.ZERO,r=n.default.IDENTITY;if(e.decomposeTransRotMatScale(t,r,i),this._linkEntity){this._linkEntity.localPosition.set(t),this._linkEntity.localScale.set(i);var s=a.default.createFromMatrix4(r);this._linkEntity.isUsingEuler()||this._linkEntity.localQuaternion.set(s),this._linkEntity._isLocalMatrixDirty=!0}},t.prototype.setUsingEuler=function(e){e?this._rawU32[this.localRotationTypeOffset]&=~l.default.DF_ROTATIONTYPE:this._rawU32[this.localRotationTypeOffset]|=l.default.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._rawU32[this.localRotationTypeOffset]&l.default.DF_ROTATIONTYPE)},t}(s.default);t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(67)),a=function(e){function t(t){var i=e.call(this,t)||this;i.entitis=[];for(var r=0;r<t.entityLength;r++){var a=new n.default(t._f32view,t._u32view,r*t.objectSize);i.entitis.push(a)}return i}return r.__extends(t,e),t}(r.__importDefault(i(71)).default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.entitis=[]}return e.prototype.setLocalMatrixDirtyAll=function(){for(var e=0;e<this.entitis.length;e++){this.entitis.length[e].setLocalMatrixDirty()}},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(69)),a=function(e){function t(t){var i=e.call(this,t)||this;i.entitis=[];for(var r=0;r<t.entityLength;r++){var a=new n.default(t._f32view,t._u32view,r*t.objectSize);i.entitis.push(a)}return i}return r.__extends(t,e),t}(r.__importDefault(i(71)).default);t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._animationClipCount=0,this._nodeCount=0,this._animationClipModels=[],this._frameIndexs=[],this._blendWeight=[],this._entityIds={}}return e.prototype._getNeedMemorySize=function(){return 4*this.nodeCount*this.animationClipCount},Object.defineProperty(e.prototype,"animationClipCount",{get:function(){return this._animationClipCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeCount",{get:function(){return this._nodeCount},enumerable:!1,configurable:!0}),e.prototype.getAnimationParamater=function(e){return{animationClipId:this._animationClipModels[e].id,frameIndex:this._frameIndexs[e],percentage:this._blendWeight[e]}},e.prototype.bindAnimations=function(e,t,i){this._entityIds={},this._animationClipModels=e,this._frameIndexs=new Array(e.length),this._blendWeight=new Array(e.length);var r=t.length;for(var n in t)r+=t[n].length;this._animationClipCount=e.length,this._nodeCount=r;var a,o=0;for(n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)t[n][s]&&(this._entityIds[o+s]=t[n][s],a||(a=t[n][s]));o+=t[n].length}null!=i&&i.id?this.culEntity3DTreeNode=i:a&&(this.culEntity3DTreeNode=a)},e.prototype.setClipParams=function(e,t,i){this._frameIndexs[e]=t,this._blendWeight[e]=i},e.prototype.getEntity=function(e){return this._entityIds[e]},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1).__importDefault(i(44)),n=function(){function e(){this._boneInverseModelId=0,this._boneNum=0}return e.prototype._getNeedMemorySize=function(){return 18*this._boneNum*4},e.prototype.setBoneMatrix=function(e,t,i,n){if(i.length===t&&n.length===t){this._boneInverseModelId=e.id,this._boneNum=t,this.boneIndices=i,this.boneEntities=n;var a=new ArrayBuffer(this._getNeedMemorySize());this.outputBoneInverseMatrixs=new Array(t);for(var o=0;o<t;o++){var s=new Float32Array(a,2*t*4+64*o,16);this.outputBoneInverseMatrixs[o]=r.default.createFromTypedArray(s)}this._boneOffsetMatrices=new Float32Array(a,2*this._boneNum*4,16*this._boneNum)}else console.warn("setBoneMatrix Error")},e.prototype.getBoneNum=function(){return this._boneNum},e.prototype.getBoneInverseModelId=function(){return this._boneInverseModelId},e.prototype.getBoneIndices=function(e){return this.boneIndices[e]},e.prototype.getBoneEntity=function(e){return this.boneEntities[e]},e.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.entity=null,this._componetModel=e}return e.prototype.destroy=function(){if(this.entity){var e=this.entity,t=e.components.indexOf(this);t>-1&&(e.components.splice(t,1),this._onDestroy())}},e.prototype._onAdd=function(){this.entity._cullableComps.push(this)},e.prototype._onDestroy=function(){if(this.entity){var e=this.entity._cullableComps,t=e.indexOf(this);-1!==t&&e.splice(t,1)}},Object.defineProperty(e.prototype,"active",{get:function(){return this._componetModel.getActive()},set:function(e){this._componetModel.setActive(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cullMask",{get:function(){return this._componetModel.getCullMask()},set:function(e){this._componetModel.setCullMask(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallCenter",{get:function(){return this._componetModel.getBoundingBallCenter()},set:function(e){this._componetModel.setBoundingBallCenter(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallRadius",{get:function(){return this._componetModel.getBoundingBallRadius()},set:function(e){this._componetModel.setBoundingBallRadius(e)},enumerable:!1,configurable:!0}),e.prototype.bindEntity=function(e){this.entity=e,this.entity.bindComponet(this)},e.prototype.unbindEntity=function(){this.entity.unbindComponent(this)},e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(44)),a=r.__importDefault(i(45)),o=r.__importDefault(i(61)),s=function(e,t){Object.defineProperty(e,t,{get:function(){return this._phys3D[t]},set:function(){}})};function l(e,t,i){return void 0===i&&(i=1e-5),Math.abs(e-t)<i}var u=function(){function e(e,t,i){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet=new Set,this._phys3D=e,this._ga=t,this._isNative=i,this._isNative||(this._mock=t._getMockAccelerateWorker())}return e.prototype.clear=function(){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet.clear()},e.prototype.bindRigidbodyToEntity=function(e,t,i){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var r=this._mock.entity2mock.get(t);this._bindMap.set(e,r),this._reverseBindMap.set(r,e)}},e.prototype.bindColliderToEntity=function(e,t){if(!this._isNative){var i=this._mock.entity2mock.get(t);this._colliderToEntityMap.set(e,i),this._colliderSet.add(e)}},e.prototype.bindCCToEntity=function(e,t){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var i=this._mock.entity2mock.get(t);this._ccbindMap.set(e,i),this._ccReverseBindMap.set(i,e),this._alignCCWithEntity(e,i)}},e.prototype.unbindCCT=function(e){if(!this._isNative){var t=this._ccbindMap.get(e);t&&this._ccReverseBindMap.delete(t),this._ccbindMap.delete(e)}},e.prototype._alignCCWithEntity=function(e,t){var i=t.worldMatrix,r=a.default.ZERO,s=a.default.ZERO,l=n.default.IDENTITY;i.decomposeTransRotMatScale(r,l,s);o.default.createFromMatrix4(l);e.position=new this._phys3D.RawVec3f(r.x,r.y,r.z)},e.prototype._alignRigidbodyWithEntity=function(e,t){var i=t.worldMatrix,r=a.default.ZERO,s=a.default.ZERO,l=n.default.IDENTITY;i.decomposeTransRotMatScale(r,l,s);var u=o.default.createFromMatrix4(l);e.position=new this._phys3D.RawVec3f(r.x,r.y,r.z),e.rotation=new this._phys3D.RawQuaternion(u.x,u.y,u.z,u.w)},e.prototype.alignRigidbodyWithEntity=function(e,t){var i=this._mock.entity2mock.get(t);this._alignRigidbodyWithEntity(e,i)},e.prototype.unbindRigidbody=function(e){if(this._isNative)e.Detach();else{var t=this._bindMap.get(e);t&&this._reverseBindMap.delete(t),this._bindMap.delete(e)}},e.prototype.unbindCollider=function(e){this._isNative||(this._colliderSet.delete(e),this._colliderToEntityMap.delete(e))},e.prototype._syncForward=function(){this.syncEntityScaleToPhysic(),this.recursivelySyncForwardEntity(this._mock._getEntitySystem().root3D)},e.prototype.syncEntityScaleToPhysic=function(){var e=this;this._colliderSet.forEach((function(t){var i=e._colliderToEntityMap.get(t);if(i._isWorldMatrixDirty){var r=i.worldMatrix,o=a.default.ZERO,s=a.default.ZERO,u=n.default.IDENTITY;r.decomposeTransRotMatScale(o,u,s);var c=t.scale;l(c.x,s.x)&&l(c.y,s.y)&&l(c.z,s.z)||(t.scale=new e._phys3D.RawVec3f(s.x,s.y,s.z))}}))},e.prototype.recursivelySyncForwardEntity=function(e){var t=this;if(e._isWorldMatrixDirty){var i=this._ccReverseBindMap.get(e),r=this._reverseBindMap.get(e);i&&this._alignCCWithEntity(i,e),r&&this._alignRigidbodyWithEntity(r,e),e._isWorldMatrixDirty=!1}e.children.forEach((function(e){t.recursivelySyncForwardEntity(e)}))},e.prototype._syncBack=function(){this.recursivelySyncBackEntity(this._mock._getEntitySystem().root3D,!1)},e.prototype.recursivelySyncCCBackEntity=function(e,t){var i=this;if(void 0===t&&(t=!1),!this._isNative){var r=this._mock.entity2mock.get(e),s=this._ccReverseBindMap.get(r);if(s){var l=s.position,u=(s.center,r.parent?r.parent.worldMatrix:n.default.IDENTITY),c=a.default.createFromNumber(l.x,l.y,l.z),d=r.localQuaternion,h=n.default.composeTQS(c,d,r.localScale),p=u.inverse().multiply(h),f=n.default.IDENTITY;p.decomposeTransRotMatScale(r.localPosition,f,a.default.ONE);var g=o.default.createFromMatrix4(f);r.localQuaternion.set(g),r.worldMatrix.set(h),n.default.composeTQS(r.localPosition,r.localQuaternion,r.localScale,r._localMatrix),t=!0}else if(t){u=r.parent?r.parent.worldMatrix:n.default.IDENTITY;r.worldMatrix.set(u.multiply(r._localMatrix))}r.children.forEach((function(e){i.recursivelySyncBackEntity(e,t)}))}},e.prototype.recursivelySyncBackEntity=function(e,t){var i=this,r=this._reverseBindMap.get(e);if(r){var s=e.parent?e.parent.worldMatrix:n.default.IDENTITY,l=a.default.createFromNumber(r.position.x,r.position.y,r.position.z),u=o.default.createFromNumber(r.rotation.x,r.rotation.y,r.rotation.z,r.rotation.w),c=n.default.composeTQS(l,u,e.localScale),d=s.inverse().multiply(c),h=n.default.IDENTITY;d.decomposeTransRotMatScale(e.localPosition,h,a.default.ONE);var p=o.default.createFromMatrix4(h);e.localQuaternion.set(p),e.worldMatrix.set(c),n.default.composeTQS(e.localPosition,e.localQuaternion,e.localScale,e._localMatrix),t=!0}else if(t){s=e.parent?e.parent.worldMatrix:n.default.IDENTITY;e.worldMatrix.set(s.multiply(e._localMatrix))}e._isWorldMatrixDirty=!1,e._isLocalMatrixDirty=!1,e.children.forEach((function(e){i.recursivelySyncBackEntity(e,t)}))},Object.defineProperty(e.prototype,"PhysSystem",{get:function(){var e=this;return function(t){var i;return i=t?new e._phys3D.PhysSystem(t):new e._phys3D.PhysSystem,e._isNative||(i._Simulate=i.Simulate,i.Simulate=function(t){e._syncForward(),i._Simulate(t),e._syncBack()}),i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DynamicRigidbody",{get:function(){var e=this;return function(t){var i=new e._phys3D.DynamicRigidbody(t);return e._isNative||(i._isAttached=i.isAttached,i.isAttached=function(){return e._bindMap.has(i)}),i}},enumerable:!1,configurable:!0}),r.__decorate([s],e.prototype,"RawVec3f",void 0),r.__decorate([s],e.prototype,"RawVec2f",void 0),r.__decorate([s],e.prototype,"PhysMesh",void 0),r.__decorate([s],e.prototype,"Collider",void 0),r.__decorate([s],e.prototype,"MeshCollider",void 0),r.__decorate([s],e.prototype,"CombineMode",void 0),r.__decorate([s],e.prototype,"Material",void 0),r.__decorate([s],e.prototype,"CapsuleCollider",void 0),r.__decorate([s],e.prototype,"Joint",void 0),r.__decorate([s],e.prototype,"ContactPoint",void 0),r.__decorate([s],e.prototype,"Collision",void 0),r.__decorate([s],e.prototype,"SphereCollider",void 0),r.__decorate([s],e.prototype,"Bounds",void 0),r.__decorate([s],e.prototype,"StaticRigidbody",void 0),r.__decorate([s],e.prototype,"RawQuaternion",void 0),r.__decorate([s],e.prototype,"BoxCollider",void 0),r.__decorate([s],e.prototype,"RaycastHit",void 0),r.__decorate([s],e.prototype,"CharacterController",void 0),e}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=i(1).__importDefault(i(78));t.default=function(){if(r)return r;var e=n.default("phye");return e&&e.Phys3D&&(r=e),r}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pid=void 0;var r=null,n=null;t.pid=0;var a=!1;function o(e){var t=n.readFileSync(e),i=r("crypto").createHash("md5");return i.update(t),i.digest("hex")}function s(e,t){return!!t&&function(e,t){var i=window.Buffer.from(t,"base64"),n=r("crypto").createVerify("RSA-SHA1");return n.update(e),!!n.verify("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCIfocuCk0FdG9zN9C6GqhJRVNG\n1FbJa8aUAZDawoCcwowIc/zMHRCl3srHUOQi3fjZpSObiVbvLidlWDSOw/rdBxbU\nG/4BqJFuIUQziCnqdRiCyYV2w9Z29/qNcKbr1gxmqXVgo0WRbkKlIFKGvSXFiVM3\nn49RQm2mgWsvqXn2vQIDAQAB\n-----END PUBLIC KEY-----",i)}(o(e),t)}function l(e){if(!r)return null;var t,i=!1,n=window.__devtoolsConfig||window.top.__devtoolsConfig||{};if(n.__runtimeLibConfigPath&&(t=n.__runtimeLibConfigPath,i=n.appConfig.isDev),!t)throw new Error("cannot find runtimeLibConfigPath");var a=r(t);if(!a)throw new Error("connot find lib config");if(!Object.keys(a).includes(e))throw new Error("the mod cannot be require");var l=a[e],u=l.path,c=l.signature,d=l.distMd5;if(!i){var h=!1;if(c?h=s(u,c):d&&(h=function(e,t){return!!t&&o(e)===t}(u,d)),!h)throw new Error("node addon is not safe!")}return r(u)}t.default=function(e){return console.log("require module: "+e),function(){if(!a&&(a=!0,window.__global&&window.__global.require))try{if(r=window.__global.require,delete window.__global.require,!(n=r("fs"))||!n.readFileSync)throw new Error;t.pid=r("process").pid}catch(e){n=null,r=null}}(),l(e)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nativeValue2Native=void 0,t.nativeValue2Native=new WeakMap;var r=function(e){this._native=e,this.data=this._native.data,t.nativeValue2Native.set(this,e)};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(1),n=r.__importDefault(i(81)),a=r.__importDefault(i(87)),o=r.__importStar(i(89)),s=r.__importDefault(i(82)),l=r.__importDefault(i(88)),u=r.__importDefault(i(83)),c=r.__importStar(i(84)),d=r.__importDefault(i(85)),h=r.__importDefault(i(86)),p=function(){function e(e,t){this._native=e,t.isRenderNative?(this.createRenderDraw=this.createRenderDrawAccelerate.bind(this),this.createCommandBuffer=this.createCommandBufferAccelerate.bind(this)):(this.createRenderDraw=this.createRenderDrawLocal.bind(this),this.createCommandBuffer=this.createCommandBufferLocal.bind(this))}return e.prototype.createCommandBufferAccelerate=function(e,t){return new a.default(this._native,e,t)},e.prototype.createCommandBufferLocal=function(){var e=this._native.createCommandBuffer();return new n.default(e)},e.prototype.createRect=function(e,t,i,r){var n=this._native.createRect(e,t,i,r);return new o.default(n)},e.prototype.createRenderDrawLocal=function(){var e=this._native.createRenderDraw();return new s.default(e)},e.prototype.createRenderDrawAccelerate=function(){var e=this._native.createRenderDraw();return new l.default(e)},e.prototype.createVertexLayout=function(e){var t=this._native.createVertexLayout(JSON.stringify(e));return new c.default(t)},e.prototype.createRenderView=function(e,t,i,r){var n=e||0,a=this._native.createView(n,t,o.rect2Native.get(i),o.rect2Native.get(r));return new u.default(a)},e.prototype.createBatchableVertexBuffer=function(e,t){var i=this._native.createBatchableVertexBuffer(e,c.vertexLayout2Native.get(t));return new d.default(i)},e.prototype.createBatchableIndexBuffer=function(e){var t=this._native.createBatchableIndexBuffer(e);return new h.default(t)},e}();t.default=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commandBuffer2Native=void 0;var r=i(82);t.commandBuffer2Native=new WeakMap;var n=function(){function e(e){this._native=e,t.commandBuffer2Native.set(this,e)}return e.prototype.putRenderDraw=function(e){this._native.putRenderDraw(r.renderDraw2Native.get(e))},e.prototype.batchPutRenderDraw=function(e,t){t=void 0!==t?t:e.length;for(var i=0;i<t;i++){var n=e[i];this._native.putRenderDraw(r.renderDraw2Native.get(n))}},e.prototype.putSubCommandBuffer=function(e){this._native.putSubCommandBuffer(e._native)},e.prototype.reset=function(){this._native.reset()},e.prototype.execute=function(){this._native.execute()},e}();t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var r=i(1),n=i(79),a=r.__importDefault(i(18)),o=i(83),s=i(84),l=i(85),u=i(86);t.renderDraw2Native=new WeakMap;var c={raster:a.default.WRITE_SET(wgfx.EnumIndexType.UINT16,a.default.INDEX_TYPE_MASK,a.default.INDEX_TYPE_SHIFT)|a.default.WRITE_SET(wgfx.EnumCullMode.BACK,a.default.CULL_MODE_MASK,a.default.CULL_MODE_SHIFT)|a.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,a.default.PRIMITIVE_TYPE_MASK,a.default.PRIMITIVE_TYPE_SHIFT)|a.default.WRITE_SET(wgfx.EnumFaceWinding.CW,a.default.FACE_WINDING_MASK,a.default.FACE_WINDING_SHIFT),stencilDepth:a.default.WRITE_SET(1,a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,a.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|a.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,a.default.DEPTH_COMPARE_FUNC_MASK,a.default.DEPTH_COMPARE_FUNC_SHIFT)},d=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),Object.assign(this._native,c)}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._native.view=o.renderView2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._native.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._native.vertexLayout=s.vertexLayout2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._native.indexBuffer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._native.vertexBuffers=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){for(var t=[],i=0,r=e;i<r.length;i++){var a=r[i];t.push(n.nativeValue2Native.get(a))}this._native.nativeValues=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._native.images=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._native.baseElement=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._native.numElements=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){this._native.applyUpdate()},e.prototype.setBlendOn=function(e){this._native.blend&=~a.default.BLEND_ENABLE_MASK,e&&(this._native.blend|=a.default.WRITE_SET(1,a.default.BLEND_ENABLE_MASK,a.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,i){this.setBlendModeSeparate(e,e,t,t,i,i)},e.prototype.setBlendModeSeparate=function(e,t,i,r,n,o){this._native.blend&=~(a.default.BLEND_OP_RGB_MASK|a.default.BLEND_OP_ALPHA_MASK|a.default.BLEND_SRC_FACTOR_RGB_MASK|a.default.BLEND_SRC_FACTOR_ALPHA_MASK|a.default.BLEND_DST_FACTOR_RGB_MASK|a.default.BLEND_DST_FACTOR_ALPHA_MASK),this._native.blend|=a.default.WRITE_SET(n,a.default.BLEND_OP_RGB_MASK,a.default.BLEND_OP_RGB_SHIFT)|a.default.WRITE_SET(o,a.default.BLEND_OP_ALPHA_MASK,a.default.BLEND_OP_ALPHA_SHIFT)|a.default.WRITE_SET(e,a.default.BLEND_SRC_FACTOR_RGB_MASK,a.default.BLEND_SRC_FACTOR_RGB_SHIFT)|a.default.WRITE_SET(t,a.default.BLEND_SRC_FACTOR_ALPHA_MASK,a.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|a.default.WRITE_SET(i,a.default.BLEND_DST_FACTOR_RGB_MASK,a.default.BLEND_DST_FACTOR_RGB_SHIFT)|a.default.WRITE_SET(r,a.default.BLEND_DST_FACTOR_ALPHA_MASK,a.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._native.blend&=~a.default.COLOR_WRITE_MASK,this._native.blend|=a.default.WRITE_SET(e,a.default.COLOR_WRITE_MASK,a.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._native.stencilDepth&=~a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=a.default.WRITE_SET(1,a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,a.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._native.stencilDepth&=~a.default.DEPTH_COMPARE_FUNC_MASK,this._native.stencilDepth|=a.default.WRITE_SET(e,a.default.DEPTH_COMPARE_FUNC_MASK,a.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._native.stencilDepth&=~a.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=a.default.WRITE_SET(1,a.default.STENCIL_ENABLE_FUNC_MASK,a.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._native.stencilDepth&=~a.default.STENCIL_WRITE_MASK,this._native.stencilDepth|=a.default.WRITE_SET(e,a.default.STENCIL_WRITE_MASK,a.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._native.stencilDepth&=~a.default.STENCIL_READ_MASK,this._native.stencilDepth|=a.default.WRITE_SET(e,a.default.STENCIL_READ_MASK,a.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._native.stencilDepth&=~a.default.STENCIL_REF_MASK,this._native.stencilDepth|=a.default.WRITE_SET(e,a.default.STENCIL_REF_MASK,a.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,i,r){var n=a.default.WRITE_SET(e,a.default.STENCIL_FRONT_COMPARE_FUN_MASK,a.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|a.default.WRITE_SET(t,a.default.STENCIL_FRONT_FAIL_OP_MASK,a.default.STENCIL_FRONT_FAIL_OP_SHIFT)|a.default.WRITE_SET(i,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|a.default.WRITE_SET(r,a.default.STENCIL_FRONT_PASS_OP_MASK,a.default.STENCIL_FRONT_PASS_OP_SHIFT);this._native.stencilOpTest=n+(n<<16>>>0)},e.prototype.setStencilTestModeSeparate=function(e,t,i,r,n,o,s,l){this._native.stencilOpTest=0,this._native.stencilOpTest=a.default.WRITE_SET(e,a.default.STENCIL_FRONT_COMPARE_FUN_MASK,a.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|a.default.WRITE_SET(t,a.default.STENCIL_FRONT_FAIL_OP_MASK,a.default.STENCIL_FRONT_FAIL_OP_SHIFT)|a.default.WRITE_SET(i,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|a.default.WRITE_SET(r,a.default.STENCIL_FRONT_PASS_OP_MASK,a.default.STENCIL_FRONT_PASS_OP_SHIFT)|a.default.WRITE_SET_SAFE(n,a.default.STENCIL_BACK_COMPARE_FUN_MASK,a.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|a.default.WRITE_SET(o,a.default.STENCIL_BACK_FAIL_OP_MASK,a.default.STENCIL_BACK_FAIL_OP_SHIFT)|a.default.WRITE_SET(s,a.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,a.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|a.default.WRITE_SET(l,a.default.STENCIL_BACK_PASS_OP_MASK,a.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._native.raster&=~a.default.CULL_MODE_MASK,this._native.raster|=a.default.WRITE_SET(e,a.default.CULL_MODE_MASK,a.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._native.raster&=~a.default.FACE_WINDING_MASK,this._native.raster|=a.default.WRITE_SET(e,a.default.FACE_WINDING_MASK,a.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._native.raster&=~a.default.PRIMITIVE_TYPE_MASK,this._native.raster|=a.default.WRITE_SET(e,a.default.PRIMITIVE_TYPE_MASK,a.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._native.raster&=~a.default.INDEX_TYPE_MASK,this._native.raster|=a.default.WRITE_SET(e,a.default.INDEX_TYPE_MASK,a.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._native.raster&=~a.default.DEPTH_FORMAT_MASK,this._native.raster|=a.default.WRITE_SET(e,a.default.DEPTH_FORMAT_MASK,a.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._native.raster&=~(a.default.COLOR_ATTACHMENT_COUNT_MASK|a.default.COLOR_FORMAT_MASK),this._native.raster|=a.default.WRITE_SET(e,a.default.COLOR_FORMAT_MASK,a.default.COLOR_FORMAT_SHIFT)|a.default.WRITE_SET(t,a.default.COLOR_ATTACHMENT_COUNT_MASK,a.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._native.batchable=!1,this._native.renderDataDirty=!1},e.prototype.setBatchable=function(e,t,i){this._native.batchable=!0,this._native.renderDataDirty=!0,this._native.vertexBuffers=[l.batchableVertexBuffer2Native.get(e)],this._native.indexBuffer=u.batchableIndexBuffer2Native.get(t),this._native.worldTransform=n.nativeValue2Native.get(i)},e.prototype.setBatchableRenderDataDirty=function(){this._native.renderDataDirty=!0},e}();t.default=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderView2Native=void 0,t.renderView2Native=new WeakMap;var r=function(e){this._native=e,t.renderView2Native.set(this,e)};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertexLayout2Native=void 0,t.vertexLayout2Native=new WeakMap;var r=function(e){this._native=e,t.vertexLayout2Native.set(this,e)};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableVertexBuffer2Native=void 0,t.batchableVertexBuffer2Native=new WeakMap;var r=function(e){this._native=e,this.data=e.data,t.batchableVertexBuffer2Native.set(this,e)};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableIndexBuffer2Native=void 0,t.batchableIndexBuffer2Native=new WeakMap;var r=function(e){this._native=e,this.data=e.data,t.batchableIndexBuffer2Native.set(this,e)};t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=i(88);!function(e){e[e.CommandRenderDraw=1]="CommandRenderDraw",e[e.CommandSubBuffer=2]="CommandSubBuffer"}(r||(r={}));var a=function(){function e(e,t,i){if(this._bufferSize=0,this._renderer=e,t&&0!=t||i&&0!=i){var r=t||0,n=i||0;this._initCommandBuffer(4*(2*r+2*n))}else this._initCommandBuffer(1024)}return e.prototype.batchPutRenderDraw=function(e,t){var i=2*(t=void 0!==t?t:e.length)*4;this._checkSize(i);for(var a=this._u32view[0]/4+1,o=0;o<t;o++){var s=e[o];this._u32view[a]=r.CommandRenderDraw,this._u32view[a+1]=n.renderDraw2Native.get(s).id,a+=2}for(var l=0,u=e;l<u.length;l++)s=u[l];this.setCommandSize(this._u32view[0]+i)},e.prototype.putSubCommandBuffer=function(e){this._checkSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=r.CommandSubBuffer,this._u32view[t+1]=e._native.id,this.setCommandSize(this._u32view[0]+8)},e.prototype.reset=function(){this.setCommandSize(0)},e.prototype.execute=function(){this._native.execute()},e.prototype._initCommandBuffer=function(e){this._native=this._renderer.createCommandBuffer(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._extendCommandBuffer=function(e){this._native.extend(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._checkSize=function(e){if(4+this._u32view[0]+e>this._bufferSize){var t=2*(4+this._u32view[0]+e);this._extendCommandBuffer(t)}},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}();t.default=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var r=i(1),n=i(79),a=r.__importDefault(i(18)),o=i(83),s=i(84),l=i(85),u=i(86);t.renderDraw2Native=new WeakMap;var c=a.default.WRITE_SET(wgfx.EnumIndexType.UINT16,a.default.INDEX_TYPE_MASK,a.default.INDEX_TYPE_SHIFT)|a.default.WRITE_SET(wgfx.EnumCullMode.BACK,a.default.CULL_MODE_MASK,a.default.CULL_MODE_SHIFT)|a.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,a.default.PRIMITIVE_TYPE_MASK,a.default.PRIMITIVE_TYPE_SHIFT)|a.default.WRITE_SET(wgfx.EnumFaceWinding.CW,a.default.FACE_WINDING_MASK,a.default.FACE_WINDING_SHIFT),d=a.default.WRITE_SET(1,a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,a.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|a.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,a.default.DEPTH_COMPARE_FUNC_MASK,a.default.DEPTH_COMPARE_FUNC_SHIFT),h=new ArrayBuffer(200),p=new Uint32Array(h);p[8]=c,p[7]=d;var f=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),this._u8view=new Uint8Array(this._native.data),this._u32View=new Uint32Array(this._native.data),this.clear()}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._u32View[0]=o.renderView2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._u32View[2]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._u32View[3]=s.vertexLayout2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._u32View[9]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._u32View.fill(0,10,14);for(var t=0;t<e.length;t++)this._u32View[10+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){this._u32View.fill(0,14,30);for(var t=0;t<e.length;t++)this._u32View[14+t]=n.nativeValue2Native.get(e[t]).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._u32View.fill(0,30,46);for(var t=0;t<e.length;t++)this._u32View[30+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._u32View[46]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._u32View[47]=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){},e.prototype.clear=function(){this._u32View.set(p)},e.prototype.setBlendOn=function(e){this._u32View[4]&=~a.default.BLEND_ENABLE_MASK,e&&(this._u32View[4]|=a.default.WRITE_SET(1,a.default.BLEND_ENABLE_MASK,a.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,i){this.setBlendModeSeparate(e,e,t,t,i,i)},e.prototype.setBlendModeSeparate=function(e,t,i,r,n,o){this._u32View[4]&=~(a.default.BLEND_OP_RGB_MASK|a.default.BLEND_OP_ALPHA_MASK|a.default.BLEND_SRC_FACTOR_RGB_MASK|a.default.BLEND_SRC_FACTOR_ALPHA_MASK|a.default.BLEND_DST_FACTOR_RGB_MASK|a.default.BLEND_DST_FACTOR_ALPHA_MASK),this._u32View[4]|=a.default.WRITE_SET(n,a.default.BLEND_OP_RGB_MASK,a.default.BLEND_OP_RGB_SHIFT)|a.default.WRITE_SET(o,a.default.BLEND_OP_ALPHA_MASK,a.default.BLEND_OP_ALPHA_SHIFT)|a.default.WRITE_SET(e,a.default.BLEND_SRC_FACTOR_RGB_MASK,a.default.BLEND_SRC_FACTOR_RGB_SHIFT)|a.default.WRITE_SET(t,a.default.BLEND_SRC_FACTOR_ALPHA_MASK,a.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|a.default.WRITE_SET(i,a.default.BLEND_DST_FACTOR_RGB_MASK,a.default.BLEND_DST_FACTOR_RGB_SHIFT)|a.default.WRITE_SET(r,a.default.BLEND_DST_FACTOR_ALPHA_MASK,a.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._u32View[4]&=~a.default.COLOR_WRITE_MASK,this._u32View[4]|=a.default.WRITE_SET(e,a.default.COLOR_WRITE_MASK,a.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._u32View[7]&=~a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=a.default.WRITE_SET(1,a.default.DEPTH_WRITE_ENABLE_FUNC_MASK,a.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._u32View[7]&=~a.default.DEPTH_COMPARE_FUNC_MASK,this._u32View[7]|=a.default.WRITE_SET(e,a.default.DEPTH_COMPARE_FUNC_MASK,a.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._u32View[7]&=~a.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=a.default.WRITE_SET(1,a.default.STENCIL_ENABLE_FUNC_MASK,a.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._u32View[7]&=~a.default.STENCIL_WRITE_MASK,this._u32View[7]|=a.default.WRITE_SET(e,a.default.STENCIL_WRITE_MASK,a.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._u32View[7]&=~a.default.STENCIL_READ_MASK,this._u32View[7]|=a.default.WRITE_SET(e,a.default.STENCIL_READ_MASK,a.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._u32View[7]&=~a.default.STENCIL_REF_MASK,this._u32View[7]|=a.default.WRITE_SET(e,a.default.STENCIL_REF_MASK,a.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,i,r){this.setStencilTestModeSeparate(e,t,i,r,e,t,i,r)},e.prototype.setStencilTestModeSeparate=function(e,t,i,r,n,o,s,l){this._u32View[6]=0,this._u32View[6]=a.default.WRITE_SET(e,a.default.STENCIL_FRONT_COMPARE_FUN_MASK,a.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|a.default.WRITE_SET(t,a.default.STENCIL_FRONT_FAIL_OP_MASK,a.default.STENCIL_FRONT_FAIL_OP_SHIFT)|a.default.WRITE_SET(i,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,a.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|a.default.WRITE_SET(r,a.default.STENCIL_FRONT_PASS_OP_MASK,a.default.STENCIL_FRONT_PASS_OP_SHIFT)|a.default.WRITE_SET(n,a.default.STENCIL_BACK_COMPARE_FUN_MASK,a.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|a.default.WRITE_SET(o,a.default.STENCIL_BACK_FAIL_OP_MASK,a.default.STENCIL_BACK_FAIL_OP_SHIFT)|a.default.WRITE_SET(s,a.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,a.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|a.default.WRITE_SET(l,a.default.STENCIL_BACK_PASS_OP_MASK,a.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._u32View[8]&=~a.default.CULL_MODE_MASK,this._u32View[8]|=a.default.WRITE_SET(e,a.default.CULL_MODE_MASK,a.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._u32View[8]&=~a.default.FACE_WINDING_MASK,this._u32View[8]|=a.default.WRITE_SET(e,a.default.FACE_WINDING_MASK,a.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._u32View[8]&=~a.default.PRIMITIVE_TYPE_MASK,this._u32View[8]|=a.default.WRITE_SET(e,a.default.PRIMITIVE_TYPE_MASK,a.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._u32View[8]&=~a.default.INDEX_TYPE_MASK,this._u32View[8]|=a.default.WRITE_SET(e,a.default.INDEX_TYPE_MASK,a.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._u32View[8]&=~a.default.DEPTH_FORMAT_MASK,this._u32View[8]|=a.default.WRITE_SET(e,a.default.DEPTH_FORMAT_MASK,a.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._u32View[8]&=~(a.default.COLOR_ATTACHMENT_COUNT_MASK|a.default.COLOR_FORMAT_MASK),this._u32View[8]|=a.default.WRITE_SET(e,a.default.COLOR_FORMAT_MASK,a.default.COLOR_FORMAT_SHIFT)|a.default.WRITE_SET(t,a.default.COLOR_ATTACHMENT_COUNT_MASK,a.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._u8view[192]=0,this._u8view[193]=0},e.prototype.setBatchable=function(e,t,i){this._u8view[192]=1,this._u8view[193]=1,this._u32View[10]=l.batchableVertexBuffer2Native.get(e).id,this._u32View[11]=0,this._u32View[9]=u.batchableIndexBuffer2Native.get(t).id,this._u32View[49]=n.nativeValue2Native.get(i).id},e.prototype.setBatchableRenderDataDirty=function(){this._u8view[193]=1},e}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rect2Native=void 0,t.rect2Native=new WeakMap;var r=function(e){this._native=e,t.rect2Native.set(this,e)};t.default=r}]).default,__appServiceSDK__;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Kanata={})}(this,(function(e){"use strict";e.Puppet="undefined"!=typeof NativeGlobal?NativeGlobal.Puppet:void 0,e.CREATE_INSTANCE=(t,i,r,n,a)=>{var o=globalThis.KANATA_INSTANCES=globalThis.KANATA_INSTANCES||{};if(o[t])return o[t];var s={exports:{}},l=s.exports;return function(e,t){"object"==typeof l&&void 0!==s?t(l):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).KanataClass={})}(this,(function(o){var s,l,u,c,d,h,p,f,g,_,m,v,y,A,b,E,w,T,C,S,I,x,P,D,R,O,k,M;o.EVertexFormat=void 0,(s=o.EVertexFormat||(o.EVertexFormat={}))[s.FLOAT=0]="FLOAT",s[s.FLOAT2=1]="FLOAT2",s[s.FLOAT3=2]="FLOAT3",s[s.FLOAT4=3]="FLOAT4",s[s.BYTE4=4]="BYTE4",s[s.BYTE4N=5]="BYTE4N",s[s.UBYTE4=6]="UBYTE4",s[s.UBYTE4N=7]="UBYTE4N",s[s.SHORT2=8]="SHORT2",s[s.SHORT2N=9]="SHORT2N",s[s.SHORT4=10]="SHORT4",s[s.SHORT4N=11]="SHORT4N",s[s.UINT10_N2=12]="UINT10_N2",o.EVertexStep=void 0,(l=o.EVertexStep||(o.EVertexStep={}))[l.PER_VERTEX=0]="PER_VERTEX",l[l.PER_INSTANCE=1]="PER_INSTANCE",o.EIndexType=void 0,(u=o.EIndexType||(o.EIndexType={}))[u.NONE=1]="NONE",u[u.UINT16=2]="UINT16",u[u.UINT32=3]="UINT32",o.ETextureType=void 0,(c=o.ETextureType||(o.ETextureType={}))[c.D2=0]="D2",c[c.Cube=1]="Cube",c[c.D2Array=2]="D2Array",c[c.D3=3]="D3",o.ETextureFormat=void 0,(d=o.ETextureFormat||(o.ETextureFormat={}))[d.RGBA8=0]="RGBA8",d[d.SRGBA8=1]="SRGBA8",d[d.RGB10A2=2]="RGB10A2",d[d.RG8=3]="RG8",d[d.R8=4]="R8",d[d.RGBA32F=5]="RGBA32F",d[d.RGBA16F=6]="RGBA16F",d[d.RG11B10F=7]="RG11B10F",d[d.Depth_Low=20]="Depth_Low",d[d.Depth_High=21]="Depth_High",d[d.Depth_Stencil=22]="Depth_Stencil",d[d.RGBA4=23]="RGBA4",d[d.RGB565=24]="RGB565",d[d.RGB5A1=25]="RGB5A1",d[d.ETC1RGB8=100]="ETC1RGB8",d[d.ETC2RGB8=110]="ETC2RGB8",d[d.ETC2RGBA8=111]="ETC2RGBA8",d[d.PVRTC2RGBV1=120]="PVRTC2RGBV1",d[d.PVRTC4RGBV1=121]="PVRTC4RGBV1",d[d.PVRTC2RGBAV1=122]="PVRTC2RGBAV1",d[d.PVRTC4RGBAV1=123]="PVRTC4RGBAV1",d[d.ASTC4x4=140]="ASTC4x4",d[d.ASTC5x5=141]="ASTC5x5",d[d.ASTC6x6=142]="ASTC6x6",d[d.ASTC8x6=143]="ASTC8x6",d[d.ASTC8x8=144]="ASTC8x8",d[d.DXT1=150]="DXT1",d[d.DXT3=151]="DXT3",d[d.DXT5=152]="DXT5",o.EWrapMode=void 0,(h=o.EWrapMode||(o.EWrapMode={}))[h.REPEAT=1]="REPEAT",h[h.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",h[h.MIRRORED_REPEAT=3]="MIRRORED_REPEAT",o.EFilterMode=void 0,(p=o.EFilterMode||(o.EFilterMode={}))[p.NEAREST=1]="NEAREST",p[p.LINEAR=2]="LINEAR",p[p.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",p[p.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",p[p.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",p[p.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR",o.EUniformType=void 0,(f=o.EUniformType||(o.EUniformType={}))[f.FLOAT=0]="FLOAT",f[f.FLOAT2=1]="FLOAT2",f[f.FLOAT3=2]="FLOAT3",f[f.FLOAT4=3]="FLOAT4",f[f.MAT2=4]="MAT2",f[f.MAT3=5]="MAT3",f[f.MAT4=6]="MAT4",f[f.SAMPLER=7]="SAMPLER",o.ECullMode=void 0,(g=o.ECullMode||(o.ECullMode={}))[g.NONE=0]="NONE",g[g.FRONT=1]="FRONT",g[g.BACK=2]="BACK",o.EFaceWinding=void 0,(_=o.EFaceWinding||(o.EFaceWinding={}))[_.CCW=1]="CCW",_[_.CW=2]="CW",o.ECompareFunc=void 0,(m=o.ECompareFunc||(o.ECompareFunc={}))[m.LESS=1]="LESS",m[m.LEQUAL=2]="LEQUAL",m[m.EQUAL=3]="EQUAL",m[m.GEQUAL=4]="GEQUAL",m[m.GREATER=5]="GREATER",m[m.NOTEQUAL=6]="NOTEQUAL",m[m.NEVER=7]="NEVER",m[m.ALWAYS=8]="ALWAYS",o.EStencilOp=void 0,(v=o.EStencilOp||(o.EStencilOp={}))[v.ZERO=0]="ZERO",v[v.KEEP=1]="KEEP",v[v.REPLACE=2]="REPLACE",v[v.INCR_WRAP=3]="INCR_WRAP",v[v.INCR=4]="INCR",v[v.DECR_WRAP=5]="DECR_WRAP",v[v.DECR=6]="DECR",v[v.INVERT=7]="INVERT",o.EBlendFactor=void 0,(y=o.EBlendFactor||(o.EBlendFactor={}))[y.ZERO=0]="ZERO",y[y.ONE=1]="ONE",y[y.SRC_COLOR=2]="SRC_COLOR",y[y.ONE_MINUS_SRC_COLOR=3]="ONE_MINUS_SRC_COLOR",y[y.SRC_ALPHA=4]="SRC_ALPHA",y[y.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",y[y.DST_ALPHA=6]="DST_ALPHA",y[y.ONE_MINUS_DST_ALPHA=7]="ONE_MINUS_DST_ALPHA",y[y.DST_COLOR=8]="DST_COLOR",y[y.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",y[y.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",y[y.CONSTANT_COLOR=11]="CONSTANT_COLOR",y[y.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",o.EBlendEquation=void 0,(A=o.EBlendEquation||(o.EBlendEquation={}))[A.FUNC_ADD=0]="FUNC_ADD",A[A.FUNC_SUBTRACT=1]="FUNC_SUBTRACT",A[A.FUNC_REVERSE_SUBTRACT=2]="FUNC_REVERSE_SUBTRACT",A[A.MIN=3]="MIN",A[A.MAX=4]="MAX",o.EColorMask=void 0,(b=o.EColorMask||(o.EColorMask={}))[b.NONE=16]="NONE",b[b.R=1]="R",b[b.G=2]="G",b[b.B=4]="B",b[b.A=8]="A",b[b.RGB=7]="RGB",b[b.RGBA=15]="RGBA",o.EPixelType=void 0,(E=o.EPixelType||(o.EPixelType={}))[E.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",E[E.FLOAT=5126]="FLOAT",E[E.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",E[E.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",E[E.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",o.ELoadAction=void 0,(w=o.ELoadAction||(o.ELoadAction={}))[w.CLEAR=0]="CLEAR",w[w.LOAD=1]="LOAD",w[w.DONTCARE=2]="DONTCARE",o.EDataModelType=void 0,(T=o.EDataModelType||(o.EDataModelType={}))[T.AnimationClip=1]="AnimationClip",T[T.SkeletonBoneInverse=2]="SkeletonBoneInverse",o.EMeshRenderType=void 0,(C=o.EMeshRenderType||(o.EMeshRenderType={}))[C.UnKnown=0]="UnKnown",C[C.Static3D=1]="Static3D",C[C.Skinned3D=2]="Skinned3D",C[C.UI=3]="UI",o.EPrimitiveType=void 0,(S=o.EPrimitiveType||(o.EPrimitiveType={}))[S.TRIANGLES=0]="TRIANGLES",S[S.TRIANGLE_STRIP=1]="TRIANGLE_STRIP",S[S.LINES=2]="LINES",S[S.LINE_STRIP=3]="LINE_STRIP",S[S.POINTS=4]="POINTS",S[S.ZERO=5]="ZERO",o.EShadowMode=void 0,(I=o.EShadowMode||(o.EShadowMode={}))[I.None=0]="None",I[I.OneCascade_PCF=1]="OneCascade_PCF",I[I.TwoCascade_PCF=2]="TwoCascade_PCF",I[I.FourCascade_PCF=4]="FourCascade_PCF",o.EShadowFitMode=void 0,(x=o.EShadowFitMode||(o.EShadowFitMode={}))[x.FitFrustum=0]="FitFrustum",x[x.FitObjects=1]="FitObjects",o.EVertexLayoutUsage=void 0,(P=o.EVertexLayoutUsage||(o.EVertexLayoutUsage={}))[P.CUSTOM=0]="CUSTOM",P[P.POSITION=1]="POSITION",P[P.NORMAL=2]="NORMAL",P[P.TANGENT=3]="TANGENT",P[P.UV0=4]="UV0",P[P.UV1=5]="UV1",P[P.UV2=6]="UV2",P[P.COLOR=7]="COLOR",P[P.BONEINDEX=8]="BONEINDEX",P[P.BONEWEIGHT=9]="BONEWEIGHT",o.EVertexBatchOperator=void 0,(D=o.EVertexBatchOperator||(o.EVertexBatchOperator={}))[D.MatrixMultiple=0]="MatrixMultiple",D[D.UVST=1]="UVST",o.EAnimationBlendType=void 0,(R=o.EAnimationBlendType||(o.EAnimationBlendType={}))[R.Override=0]="Override",R[R.Additive=1]="Additive",o.EUseDefaultAddedAction=void 0,(O=o.EUseDefaultAddedAction||(o.EUseDefaultAddedAction={}))[O.Ignore=0]="Ignore",O[O.Refresh=1]="Refresh",o.EUseDefaultRetainedAction=void 0,(k=o.EUseDefaultRetainedAction||(o.EUseDefaultRetainedAction={}))[k.Keep=0]="Keep",k[k.Refresh=1]="Refresh",k[k.WriteBack=2]="WriteBack",o.EUseDefaultRemovedAction=void 0,(M=o.EUseDefaultRemovedAction||(o.EUseDefaultRemovedAction={}))[M.Keep=0]="Keep",M[M.Clear=1]="Clear",M[M.WriteBack=2]="WriteBack";var N,L={size:21,resetFlag:0,renderPass:1,canvasWidth:2,canvasHeight:3,uniforms:4,useInstanceOrNeverTranspose:20},B=65472,F={size:14,rotation:0,position:1,scale:3,worldMatrix:5},U={size:27,dfRotationType:1,rotationType:0,rotation:1,position:5,scale:8,worldOffset:11,worldMatrix:11},W={size:7,active:0,dfActive:1,layer:1,boundingBallCenter:2,boundingBallRadius:5,entityId:6},G={size:147,view:0,depth:1,active:2,fov:3,aspect:4,near:5,far:6,up:7,eye:10,orthoSize:13,isProjection:14,cullingMask:15,canvasSizeY:16,targetTransform:17,viewMatrix:18,projectionMatrix:34,viewMatrixInverse:50,viewMatrix2D:66,projectionMatrix2D:82,viewMatrixInverse2D:98,manualMatrix:114,layerCullDistances:115},V={size:78,view:0,depth:1,active:2,shadowDistance:3,shadowMode:4,shadowFilterMode:5,lightDir:6,bounds:9,lightSpaceMatrices:14},j={dynamicBatch:0,skinHandle:1,castShadow:2,bindTarget:3,start:4,size:5,materialId:0,vertexBufferId:1,indexBufferId:2,startIndex:3,numIndices:4},H={size:6,useMaterialStates:0,fstencil:1,bstencil:2,blendRGBA:3,colorDepth:4,state:5},z={size:14,renderQueue:0,effect:1,uniformBlock:2,fstencilMask:3,bstencilMask:4,blendRGBAMask:5,colorDepthMask:6,stateMask:7,fstencil:8,bstencil:9,blendRGBA:10,colorDepth:11,state:12,useInstance:13},Y={boneInverseModelId:0,boneIndices:1,perBoneIndices:1,perBoneEntityId:1,perBoneMatrixOld:16,perBoneMatrixNew:12},$={stiffness:0,elasticity:1,damping:2};o.EEventType=void 0,(N=o.EEventType||(o.EEventType={}))[N.SetRootEntity=1]="SetRootEntity",N[N.AddChild=2]="AddChild",N[N.AddChildAtIndex=3]="AddChildAtIndex",N[N.RemoveFromParent=4]="RemoveFromParent",N[N.DisperseSubTree=5]="DisperseSubTree",N[N.BindToBone=6]="BindToBone",N[N.BindToBones=7]="BindToBones",N[N.UnBindFromBone=8]="UnBindFromBone",N[N.UnBindFromBones=9]="UnBindFromBones",N[N.EntityCommandActive=10]="EntityCommandActive",N[N.EntityCommandInActive=11]="EntityCommandInActive";var q,Q=t.getContext("wgfx",{bufferPoolSize:40960,shaderPoolSize:5120,imagePoolSize:40960,pipelinePoolSize:1024,passPoolSize:1024,stencil:!0,alpha:"Editor"===r,antialias:i.mainScreenMSAA||!1,preserveDrawingBuffer:!0,ignore_assert:!!i.gfxIgnoreAssert,disable_log:"Editor"!==r});q="undefined"!=typeof window&&window.top?(window.top.NativeGlobal||{}).Puppet:"undefined"!=typeof NativeGlobal?NativeGlobal.Puppet:((null==wx?void 0:wx.NativeGlobal)||{}).Puppet;var Z=void 0;q&&(Q&&Q.gfx||n)&&(Z=new q(null==Q?void 0:Q.gfx,a,n));var K=Z||{};var X=new(function(){function e(e){this._queues=[],this._end=0,this._end=e;for(var t=0;t<=e;t+=1)this._queues.push([])}return e.prototype.add=function(e){this._queues[0].push(e)},e.prototype.step=function(){var e=this._queues[this._end];e.splice(0,e.length);for(var t=this._end;t>0;t-=1)this._queues[t]=this._queues[t-1];this._queues[0]=e},e}())(5),J={REAL_DOWNLOADER:null,LOAD:function(e){return J.REAL_DOWNLOADER.load(e)}},ee=function(e,t){return(ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])})(e,t)};function te(e,t){function i(){this.constructor=e}ee(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var ie=function(){function e(e){this._bufferSize=0,e&&(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){this._u32view[0]+e+1>this._u32view.length&&K.refreshNodesWorldTransform()},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),re=function(e){function t(){return e.call(this,K.eventBusSM)||this}return te(t,e),t.prototype.setRootEntity=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.SetRootEntity,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.addChild=function(e,t){this._checkBufferSize(12);var i=this._u32view[0]/4+1;this._u32view[i]=o.EEventType.AddChild,this._u32view[i+1]=e,this._u32view[i+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.addChildAtIndex=function(e,t,i){this._checkBufferSize(16);var r=this._u32view[0]/4+1;this._u32view[r]=o.EEventType.AddChildAtIndex,this._u32view[r+1]=e,this._u32view[r+2]=t,this._u32view[r+3]=i,this.setCommandSize(this._u32view[0]+16)},t.prototype.removeFromParent=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.RemoveFromParent,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.disperseSubTree=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.DisperseSubTree,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBone=function(e,t){this._checkBufferSize(12);var i=this._u32view[0]/4+1;this._u32view[i]=o.EEventType.BindToBone,this._u32view[i+1]=e,this._u32view[i+2]=t,this.setCommandSize(this._u32view[0]+12)},t.prototype.unbindFromBone=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.UnBindFromBone,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.EntityCommandActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.entityCommandInActive=function(e){this._checkBufferSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=o.EEventType.EntityCommandInActive,this._u32view[t+1]=e,this.setCommandSize(this._u32view[0]+8)},t.prototype.bindToBones=function(e,t){var i=e.length,r=4*(2+2*i);this._checkBufferSize(r);var n=this._u32view[0]/4+1;this._u32view[n]=o.EEventType.BindToBones,this._u32view[n+1]=i;for(var a=0;a<i;a++){var s=e[a],l=t[a];this._u32view[n+2+a]=s.id,this._u32view[n+2+i+a]=l.id}this.setCommandSize(this._u32view[0]+r)},t.prototype.unBindFromBones=function(e){var t=e.length,i=4*(2+t);this._checkBufferSize(i);var r=this._u32view[0]/4+1;this._u32view[r]=o.EEventType.UnBindFromBones,this._u32view[r+1]=t;for(var n=0;n<t;n++){var a=e[n];this._u32view[r+2+n]=a.id}this.setCommandSize(this._u32view[0]+i)},t}(ie),ne=function(e){function t(){return e.call(this,K.dirtyNodesSM)||this}return te(t,e),t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var i=this._u32view[0]+1,r=t-(this._u32view.length-1),n=0;n<r;n++)this._u32view[i+n]=e[n];var a=t-r;for(n=r;n<a;n++)this.addDirtyEntityId(e[n])}else{for(r=t,i=this._u32view[0]+1,n=0;n<r;n++)this._u32view[i+n]=e[n];this.setCommandSize(this._u32view[0]+r)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var i=this._u32view[0]+1,r=t-(this._u32view.length-1),n=0;n<r;n++)this._u32view[i+n]=e[n];var a=t-r;for(n=r;n<a;n++)this.addDirtyEntityId(e[n])}else{for(r=t,i=this._u32view[0]+1,n=0;n<r;n++)this._u32view[i+n]=e[n];this.setCommandSize(this._u32view[0]+r)}},t}(ie),ae=new re,oe=new ne,se=new(function(){function e(){}return e.prototype.entityAddChild=function(e,t){ae.addChild(e,t)},e.prototype.entityAddChildAtIndex=function(e,t,i){ae.addChildAtIndex(e,t,i)},e.prototype.entityRemoveFromParent=function(e){ae.removeFromParent(e)},e.prototype.entityClear=function(e){ae.disperseSubTree(e)},e.prototype.entitySetActive=function(e,t){t?ae.entityCommandActive(e):ae.entityCommandInActive(e)},e.prototype.entitySetLocalMatrixDirty=function(e){oe.addDirtyEntity(e)},e.prototype.setRootEntity=function(e){ae.setRootEntity(e)},e.prototype.refreshWorldTransform=function(){K.refreshNodesWorldTransform()},e.prototype.bindEntityToBone=function(e,t){ae.bindToBone(e.id,t.id)},e.prototype.unbindEntityFromBone=function(e){ae.unbindFromBone(e.id)},e.prototype.bindEntitiesToBones=function(e,t){ae.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){ae.unBindFromBones(e)},e}()),le=function(){function e(){this.isKanataImage=!0,this.premultiplyAlpha=!1}return e.IS=function(e){return e&&e.isKanataImage},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){var t=this;this._src=e,J.LOAD({src:this._src,encoding:void 0,onLoad:function(i){K.decodeImage(i.data,(function(i,r,n){i?(t._data=i,t._width=r,t._height=n,t.onload&&t.onload()):t.onerror&&t.onerror(new Error("Decode Image error: '"+e+"'"))}),t.premultiplyAlpha),X.add(i.data)},onError:function(e){t.onerror&&t.onerror(e)}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e}(),ue=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;return this.setCommandSize(t),this._u32view},t}(ue),de=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;return this.setCommandSize(t),this._u32view},t}(ue),he=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var i=0;i<t;i++)this._u32view[1+i]=e[i].id;return this.setCommandSize(t),this._u32view},t}(ue),pe=new ce,fe=new de,ge=new he,_e="undefined"!=typeof WeakRef,me={downloader:J,eventBridge:se,update:function(e){X.step()},clearView:function(e){return K.clearView(e.id)},cullCamera:function(e,t,i){return K.cullCamera(e.id,t.id,i)},drawCamera:function(e,t,i){return K.drawCamera(e.id,t.id,i)},drawLight:function(e,t,i,r){return K.drawLight(e.id,t.id,i.id,r)},submit:function(){return K.submit()},createScalableList:function(e,t){return K.createScalableList(e,t)},createNodePool:function(e,t){return K.createNodePool(e,t)},createNodeTree:function(e,t,i,r,n){return K.createNodeTree(e,t,i,r,n)},createVertexLayout:function(e){return K.createVertexLayout(JSON.stringify(e))},createVertexDataDescriptor:function(e){return K.createVertexDataDescriptor(JSON.stringify(e))},createVertexBuffer:function(e,t){return X.add(e),K.createVertexBuffer(e,t.id)},updateVertexBuffer:function(e,t,i){return X.add(t),K.updateVertexBuffer(e.id,t,i)},createIndexBuffer:function(e,t){return X.add(e),K.createIndexBuffer(e,t)},updateIndexBuffer:function(e,t,i){return X.add(t),K.updateIndexBuffer(e.id,t,i)},createVertexData:function(e,t,i){return K.createVertexData(e.id,t,i.id)},createIndexData:function(e){return K.createIndexData(e)},createTexture:function(e,t,i,r,n,a,o,s,l){return s&&s.forEach((function(e,t){e=le.IS(e)?e.data:e,s[t]=e,X.add(e)})),K.createTexture(e,t,i,r,n,a,o,s,l)},createAutoUpdateTextureFromCanvas:function(e){return K.createTexture(e)},updateTexture:function(e,t,i,r,n,a,o,s,l){return X.add(l),K.updateTexture(e.id,t,i,r,n,a,o,s,l)},updateTextureFlags:function(e,t){return K.updateTextureFlags(e.id,t)},createUniformBlockDescriptor:function(e){return K.createUniformBlockDescriptor(JSON.stringify(e))},createUniformBlock:function(e){return K.createUniformBlock(e.id)},createEffect:function(e,t,i,r,n,a){return K.createEffect(e,t,JSON.stringify(i),JSON.stringify(r),n,JSON.stringify(a))},createMaterial:function(e){return K.createMaterial(JSON.stringify(e||{}))},changeMaterialMacros:function(e,t){return K.changeMaterialMacros(e.id,JSON.stringify(t))},createView:function(e){var t={passAction:e.passAction,viewport:e.viewport,scissor:e.scissor};return K.createView(JSON.stringify(t))},updateViewRect:function(e,t){return K.updateViewRect(e.id,t)},updateViewScissor:function(e,t){return K.updateViewScissor(e.id,t)},createRenderPass:function(e){var t=e;return t.colors.forEach((function(e){e.texture=e.texture.id})),t.depth.texture=t.depth.texture.id,t.stencil.texture=t.stencil.texture.id,K.createRenderPass(JSON.stringify(e))},createCullingComponentPool:function(e){return K.createCullingComponentPool(e)},createRenderComponent:function(e,t,i,r,n,a){return K.createRenderComponent(e,t.id,i,r,n,JSON.stringify(a||{}))},changeMeshMacros:function(e,t){return K.changeMeshMacros(e.id,JSON.stringify(t))},createAnimator:function(e,t){return K.createAnimator(e,t)},updateAnimators:function(e,t){var i=fe.updateAnimators(e,t);return X.add(i),K.updateAnimators(i)},createAnimationClipBinding:function(e,t,i,r,n,a,o,s){for(var l=Math.min(r.length-n,a),u=Math.min(e.length-t,i),c=new ArrayBuffer(4*(l+u)),d=new Uint32Array(c),h=0,p=t;p<u;p++)d[h++]=e[p]?e[p].id:0;for(p=n;p<l;p++)d[h++]=null===r[p]?0:"number"==typeof r[p]?r[p]:r[p].id;return X.add(c),K.createAnimationClipBinding(c,0,u,l,o,s.id)},rebindAnimationClipBinding:function(e,t,i,r,n,a,o,s,l,u,c){for(var d=Math.min(n.length-a,o),h=Math.min(t.length-i,r),p=new ArrayBuffer(4*(d+h)),f=new Uint32Array(p),g=0,_=i;_<h;_++)f[g++]=t[_]?t[_].id:0;for(_=a;_<d;_++)f[g++]=null===n[_]?0:"number"==typeof n[_]?n[_]:n[_].id;return X.add(p),e.rebind(p,0,h,d,s,l,u,c.id)},updateAnimationClipBinding:function(e,t,i,r,n,a,o,s,l,u){for(var c=Math.min(n.length-a,o),d=Math.min(t.length-i,r),h=new ArrayBuffer(4*(c+d)),p=new Uint32Array(h),f=0,g=i;g<d;g++)p[f++]=t[g]?t[g].id:0;for(g=a;g<c;g++)p[f++]=null===n[g]?0:"number"==typeof n[g]?n[g]:n[g].id;return X.add(h),e.update(h,0,d,c,s,l,u)},writeAnimationClipBindingDefaultValues:function(e){e.writeDefaultValues()},createAnimatorControllerModel:function(e){return K.createAnimatorControllerModel(e)},setAnimatorControllerModelMaskAtIndex:function(e,t,i){e.setMaskAtIndex(t,i.buffer,i.offset,i.length)},updateAnimatorControllerModel:function(e){e.update()},createAnimatorControllerStateModel:function(e){return K.createAnimatorControllerStateModel(e)},updateAnimatorControllers:function(e,t){var i=ge.updateAnimatorControllers(e,t);X.add(i),K.updateAnimatorControllers(i)},createSkinning:function(e,t){return K.createSkinning(e,t)},updateSkinnings:function(e,t){var i=pe.updateSkinningMatrices(e,t);return X.add(i),K.updateSkinnings(i)},createRenderCamera:function(e,t){return K.createRenderCamera(e,t)},createLightCamera:function(){return K.createLightCamera()},createAnimationClipModel:function(e){return X.add(e),K.createAnimationClipModel(e)},createBoneInverseModel:function(e){return X.add(e),K.createBoneInverseModel(e)},createDynamicBones:function(e){return K.createDynamicBones(e)},loadTTFFont:function(e,t){J.LOAD({src:e,encoding:void 0,onLoad:function(e){var i=e.data,r=e.filePath;X.add(i);var n=K.loadTTFFont(i,r);t(n)},onError:function(){t("Arial")}})},getGlyphInfo:function(e,t){var i=e.italic?"italic ":" ",r=e.bold?"bold ":" ";return K.getGlyphInfo((""+i+r+Math.floor(e.size)+"px "+e.fontFamily).trim(),t)},refreshNodesWorldTransform:function(){return K.refreshNodesWorldTransform()},getRenderEnv:function(){var e=K.getRenderEnv(),t=e.registerFallbackEffect.bind(e);if(e.registerFallbackEffect=function(e,i){t(e,(null==i?void 0:i.id)||0)},e.changeMacros){var i=e.changeMacros.bind(e);e.changeMacros=function(e){i(JSON.stringify(e))}}else e.changeMacros=function(){};if(e.changeVirtualMacros){var r=e.changeVirtualMacros.bind(e);e.changeVirtualMacros=function(e){r(JSON.stringify(e))}}else e.changeVirtualMacros=function(){};if(e.setInternalInstanceInfo){var n=e.setInternalInstanceInfo.bind(e);e.setInternalInstanceInfo=function(e,t,i){n(e,JSON.stringify(t),JSON.stringify(i))}}else e.setInternalInstanceInfo=function(){};return e},createWeakRef:function(e){return _e?new WeakRef(e):K.createWeakRef?K.createWeakRef(e):{deref:function(){return e}}},createWeakRefSentry:function(){return K.createWeakRefSentry?K.createWeakRefSentry():{}},createNativeUUMap:function(){return K.createNativeUUMap()},createNativeSUMap:function(){return K.createNativeSUMap()},createNativeULUMap:function(){return K.createNativeULUMap()},setNodeName:function(e,t){return K.setNodeName(e,t)},setRenderComponentName:function(e,t){return K.setRenderComponentName(e.id,t)},debugPrint:function(e){return K.debugPrint(e)}},ve={IS_VALID:function(){return!!Z},GET_MAIN_CANVAS:function(){return t}};ve.worker=me,ve.Image=le;var ye,Ae=function(){function e(){}return Object.defineProperty(e.prototype,"_handle",{get:function(){return this.__handle},set:function(e){this.__handle=e,this.id=e.id,this.__handle.__feObj=this},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),be=ve.worker,Ee=function(e){function t(){var t=e.call(this)||this;return t._macros={},t._virtualMacros={},t._isWrongWrapMapping=!1,t._isNotWrongEffectSort=!1,t._isGoodInstance=!1,t._handle=be.getRenderEnv(),t._uniformBlocks=[],t._u32View=new Uint32Array(t._handle.data),t._f32View=new Float32Array(t._handle.data),"string"==typeof t._handle.version?t._version=t._handle.version.split(".").map((function(e){return parseInt(e,10)})):"WEBGL"!==t.backendType&&(t._version=[0,0]),t._version?(t._isWrongWrapMapping=0===t._version[0],t._isNotWrongEffectSort=!(t._version[0]<=1&&t._version[1]<2),t._isGoodInstance=!(t._version[0]<=1&&t._version[1]<3)):(t._isNotWrongEffectSort=!0,t._isGoodInstance=!0),t._isNotWrongEffectSort&&(t.neverTranspose=!0),t}return te(t,e),Object.defineProperty(t.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"backendType",{get:function(){return this._handle.backendType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasWidth",{get:function(){return this._f32View[L.canvasWidth]},set:function(e){this._f32View[L.canvasWidth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasHeight",{get:function(){return this._f32View[L.canvasHeight]},set:function(e){this._f32View[L.canvasHeight]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportCompressTextures",{get:function(){return this._handle.supportCompressTextures},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._handle.features||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!(1&this._u32View[L.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[L.useInstanceOrNeverTranspose];this._u32View[L.useInstanceOrNeverTranspose]=e?1|t:-2&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"neverTranspose",{get:function(){return!!(2&this._u32View[L.useInstanceOrNeverTranspose])},set:function(e){var t=this._u32View[L.useInstanceOrNeverTranspose];this._u32View[L.useInstanceOrNeverTranspose]=e?2|t:-3&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isWrongWrapMapping",{get:function(){return this._isWrongWrapMapping},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNotWrongEffectSort",{get:function(){return this._isNotWrongEffectSort},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isGoodInstance",{get:function(){return this._isGoodInstance},enumerable:!1,configurable:!0}),t.prototype.supportCompressTexture=function(e){return this.supportCompressTextures.indexOf(e)>=0},t.prototype.registerFallbackEffect=function(e,t){this._handle.registerFallbackEffect(e,null==t?void 0:t.__handle)},t.prototype.beginFrame=function(){this._u32View[L.resetFlag]=1},t.prototype.endFrame=function(){be.submit()},t.prototype.clearView=function(e){be.clearView(e.__handle)},t.prototype.setEnvUniform=function(e,t){this._u32View[L.uniforms+e]=t.id,this._uniformBlocks[e]=t},t.prototype.setRenderPass=function(e){this._u32View[L.renderPass]=e.id,this._renderPass=e},t.prototype.changeMacros=function(e){Object.assign(this._macros,e),this._handle.changeMacros(this._macros)},t.prototype.getMacro=function(e){return this._macros[e]},t.prototype.changeVirtualMacros=function(e){Object.assign(this._virtualMacros,e),this._handle.changeVirtualMacros(this._virtualMacros)},t.prototype.getVirtualMacro=function(e){return this._virtualMacros[e]},t.prototype.setInternalInstanceInfo=function(e,t,i){this._handle.setInternalInstanceInfo(e,t,i)},t}(Ae),we=new Ee,Te=function(){function t(){var t=e.DATA_BUSES=e.DATA_BUSES||{};this._globalObj=t[a]=t[a]||[]}return t.prototype.postMessage=function(e){!n&&this._globalObj.push(e)},t.prototype.onMessage=function(e){n&&(this._callback=e)},t.prototype.flush=function(){if(n){for(var e=0,t=this._globalObj;e<t.length;e++){var i=t[e];this._callback&&this._callback("string"==typeof i?JSON.parse(i):i)}this._globalObj.length=0}},t}();e&&(ye=new Te);var Ce=ye,Se=function(){function e(){}return Object.defineProperty(e.prototype,"__handle",{get:function(){return this._handle},enumerable:!1,configurable:!0}),e.prototype._init=function(e){this._fastInit(e)},e.prototype._fastInit=function(e){this._handle=e,this._handle.__feObj=this;var t=e.id,i=e.data,r=i.byteLength;this._bufferLength=r,this._byteOffset=0,this._buffer=i,this.id=t,this._f32view=new Float32Array(i,0,r/4)},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),Ie=ve.worker,xe=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t._handle={id:0},t}return te(t,e),t.UPDATE_ANIMATORS=function(e,t){Ie.updateAnimators(e,t)},t.prototype.bindAnimations=function(e,t,i){this.entities=t,this.animationClipModels=e,this.animationClipModels=e,this._animationClipCount=e.length;var r=t.length;for(var n in t)r+=t[n].length;this._nodeCount=r;var a=Ie.createAnimator(e.length,r);if(!(a.id<0)&&a.data){this._init(a),this._initU32View();for(n=0;n<e.length;n++)this._u32view[3*n]=e[n].id;this._offsetEntityIds=3*e.length;var o,s=0;for(n=0;n<t.length;n++){for(var l=0;l<t[n].length;l++)null!==t[n][l]?(this._u32view[this._offsetEntityIds+s+l]=t[n][l].id,o||(o=t[n][l].id)):this._u32view[this._offsetEntityIds+s+l]=0,this._u32view[this._offsetEntityIds+s+l]=null!==t[n][l]?t[n][l].id:0;s+=t[n].length}0===this._u32view[this._offsetEntityIds]&&(void 0!==i&&i.id?this._u32view[this._offsetEntityIds]=i.id:o&&(this._u32view[this._offsetEntityIds]=o))}},t.prototype.setClipParams=function(e,t,i){if(this._handle){var r=3*e;this._f32view[r+1]=Math.round(t),this._f32view[r+2]=i}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParameter=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(Se),Pe=ve.worker,De=function(e){function t(t,i){var r=e.call(this)||this,n=Pe.createRenderCamera(t.id,i||!1);return n.id<0||!n.data||(r._init(n),r._initU32View(),r._layerCullDistances=new Float32Array(r._buffer,4*G.layerCullDistances,32),r._f32view.set([0,1,0],G.up),r.isProjection=!0),r}return te(t,e),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[G.active]},set:function(e){this._u32view[G.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[G.depth]},set:function(e){this._u32view[G.depth]=e<0?0:e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isProjection",{get:function(){return!!this._u32view[G.isProjection]},set:function(e){this._u32view[G.isProjection]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._u32view[G.view]=e.id,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fov",{get:function(){return this._f32view[G.fov]},set:function(e){this._f32view[G.fov]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"aspect",{get:function(){return this._f32view[G.aspect]},set:function(e){Math.abs(this._f32view[G.aspect]-e)<=1e-4||(this._f32view[G.aspect]=e,this._setDirty())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._f32view[G.near]},set:function(e){this._f32view[G.near]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._f32view[G.far]},set:function(e){this._f32view[G.far]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"orthoSize",{get:function(){return this._f32view[G.orthoSize]},set:function(e){this._f32view[G.orthoSize]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullingMask",{get:function(){return this._u32view[G.cullingMask]},set:function(e){this._u32view[G.cullingMask]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layerCullDistances",{get:function(){return this._layerCullDistances},set:function(e){this._layerCullDistances.set(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasSizeY",{get:function(){return this._f32view[G.canvasSizeY]},set:function(e){this._f32view[G.canvasSizeY]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetTransform",{get:function(){return this._u32view[G.targetTransform]},set:function(e){this._u32view[G.targetTransform]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"up",{set:function(e){this._f32view.set(e,G.up)},enumerable:!1,configurable:!0}),t.prototype.cull=function(e,t){Pe.cullCamera(this.__handle,e.__handle,t)},t.prototype.draw=function(e,t){Pe.drawCamera(this.__handle,e.__handle,t)},t.prototype.changeProjectionMatrix=function(e,t){e?(this._f32view.set(t,G.projectionMatrix),this._u32view[G.manualMatrix]|=1):this._u32view[G.manualMatrix]&=-2,this._setDirty()},t.prototype.changeViewMatrix=function(e,t){e?(this._f32view.set(t,G.viewMatrix),this._u32view[G.manualMatrix]|=2):this._u32view[G.manualMatrix]&=-3,this._setDirty()},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.prototype.updateMatrix=function(){this._handle.updateMatrices()},t.OFFSETS=G,t}(Se),Re=ve.worker,Oe=function(e){function t(){var t=e.call(this)||this,i=Re.createLightCamera();return i.id<0||!i.data||(t._init(i),t._initU32View(),t._lightSpaceMatrices=new Float32Array(t._buffer,4*V.lightSpaceMatrices,64),t._tilingOffsets=new Float32Array([1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]),t._cascadedSplits=new Float32Array(3),t._farBounds=new Float32Array(t._buffer,4*(V.bounds+1),4),t._bounds=new Float32Array(t._buffer,4*V.bounds,5)),t}return te(t,e),Object.defineProperty(t.prototype,"view",{get:function(){return this._view},set:function(e){this._u32view[V.view]=e.id,this._view=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[V.active]},set:function(e){this._u32view[V.active]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depth",{get:function(){return this._u32view[V.depth]},set:function(e){this._u32view[V.depth]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowDistance",{get:function(){return this._f32view[V.shadowDistance]},set:function(e){this._f32view[V.shadowDistance]=e,this._updateBounds(!1),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowFilterMode",{get:function(){return this._u32view[V.shadowFilterMode]},set:function(e){this._u32view[V.shadowFilterMode]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shadowMode",{get:function(){return this._u32view[V.shadowMode]},set:function(e){this._u32view[V.shadowMode]=e,this._tilingOffsets.set(e<2?[1,1,0,0,1,1,0,0,1,1,0,0,1,1,0,0]:[.5,.5,0,0,.5,.5,.5,0,.5,.5,0,.5,.5,.5,.5,.5]),this._updateBounds(!0),this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lightSpaceMatrices",{get:function(){return this._lightSpaceMatrices},enumerable:!1,configurable:!0}),t.prototype.draw=function(e,t,i){Re.drawLight(this.__handle,e.__handle,t,i)},t.prototype.prepareUniforms=function(e){e.setUniform("u_csmLightSpaceMatrices",this.lightSpaceMatrices),e.setUniform("u_shadowTilingOffsets",this._tilingOffsets),e.setUniform("u_csmFarBounds",this._farBounds)},t.prototype.setLightDir=function(e,t,i){Math.abs(e-this._f32view[V.lightDir])<1e-6&&Math.abs(t-this._f32view[V.lightDir+1])<1e-6&&Math.abs(i-this._f32view[V.lightDir+2])<1e-6||(this._f32view[V.lightDir]=e,this._f32view[V.lightDir+1]=t,this._f32view[V.lightDir+2]=i,this._setDirty())},t.prototype.setCascadedSplits=function(e,t,i){},t.prototype._updateBounds=function(e){var t=.3,i=this.shadowDistance,r=this.shadowMode;if(e){var n=i/t;this._bounds[0]=t;for(var a=1;a<r;a+=1){var o=a/r,s=t*Math.pow(n,o)*.75+.25*(t+(i-t)*o);this._bounds[a]=s,this._setSplitPercents(a-1,s/i)}this._bounds[r]=i,this._setSplitPercents(r-1,1)}else{for(a=1;a<r;a+=1){s=this._cascadedSplits[a-1]*i;this._bounds[a]=s}this._bounds[r]=i}},t.prototype._adjustSplitPercents=function(e,t){return e<this.shadowMode/2&&(t=Math.min(t,this._cascadedSplits[e+1])),this._setSplitPercents(e,t)},t.prototype._setSplitPercents=function(e,t){var i=this.shadowMode/2;return e>=i?0:e===i-1?1:t},t.prototype._setDirty=function(){this._handle.setSharedDirty()},t.OFFSETS=V,t}(Se),ke=function(){function e(){}return Object.defineProperty(e.prototype,"float32View",{get:function(){return this._nativePool._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint32View",{get:function(){return this._nativePool._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._nativeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolId",{get:function(){return this._poolId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolIndex",{get:function(){return this._poolIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poll",{get:function(){return this._nativePool.__handle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsing",{get:function(){return this._using},set:function(e){this._using=e},enumerable:!1,configurable:!0}),e.prototype._init=function(e,t){this._nativeId=e,this._poolId=-65473&e,this._poolIndex=e&B,this._nativePool=t[this._poolId],this._using=!0},e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}(),Me=function(){function e(e){this._index=0,this._size=void 0!==e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}(),Ne=function(e){function t(t){var i=e.call(this)||this;return i._init(t),i._initU32View(),i}return te(t,e),t}(Se),Le=function(){function e(e,t,i){this.pools={},this._poolIndex=0,this._poolUsedLength=0,this._poolLength=0,this._disposedIds=new Me,this._template=e,this._templateView=t,this._allocateFunc=i}return e.prototype._enlargePool=function(e){var t=this._allocateFunc(e),i=new Ne(t);this._poolIndex=i.id,this.pools[i.id]=i,this._poolLength+=e},e.prototype.allocateOne=function(){if(this._disposedIds.size()>0)return this._poolUsedLength++,this._disposedIds.pop();this._poolUsedLength>=this._poolLength&&this._enlargePool(1024);var e=this._poolIndex;return this._poolIndex+=64,this._poolUsedLength++,e},e.prototype.dispose=function(e){e.isUsing&&(this._disposedIds.push(e.id),this._poolUsedLength--,e.setRawBuffer(this._templateView),e.isUsing=!1)},e}(),Be=ve.worker,Fe=new Uint32Array(new ArrayBuffer(4*W.size)),Ue=new Float32Array(Fe.buffer),We=function(e){function t(i){var r=e.call(this)||this,n=t.POLL_MANAGER.allocateOne();return r._init(n,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*W.size,r._activeOffset=r.entityOffset+W.active,r._layerOffset=r.entityOffset+W.layer,r._boundingBallCenterOffset=r.entityOffset+W.boundingBallCenter,r._boundingBallRadiusOffset=r.entityOffset+W.boundingBallRadius,r._entityIdOffset=r.entityOffset+W.entityId,r}return te(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&W.dfActive)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=W.dfActive:this._nativePool._u32view[this._activeOffset]&=~W.dfActive},t.prototype.getLayer=function(){return this._nativePool._u32view[this._layerOffset]},t.prototype.setLayer=function(e){this._nativePool._u32view[this._layerOffset]=e},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},t.prototype.bindEntity=function(e){this._bindEntityNative(e)},t.prototype.destroy=function(){this._unbindEntityNative(),t.POLL_MANAGER.dispose(this)},t.prototype._bindEntityNative=function(e){this.uint32View[this._entityIdOffset]=e.id},t.prototype._unbindEntityNative=function(){this.uint32View[this._entityIdOffset]=0},t.POLL_MANAGER=new Le(Fe,Ue,(function(e){return Be.createCullingComponentPool(e)})),t}(ke),Ge=ve.worker,Ve=function(e){function t(t,i){var r=e.call(this)||this,n=r._createNativeObj(t,i);return n.id<0||!n.data||(r._init(n),r._initU32View(),r._macros=i.macros,r._meshCount=i.meshCount,r._uniforms=i.uniformBlock),r}return te(t,e),t.CREATE_FAKE=function(e,t){return new je(e,t)},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meshCount",{get:function(){return this._meshCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return!!this._u32view[j.castShadow]},set:function(e){this._u32view[j.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dynamicBatch",{get:function(){return!!this._u32view[j.dynamicBatch]},set:function(e){this._u32view[j.dynamicBatch]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skinSkeleton",{set:function(e){this._u32view[j.skinHandle]=e.id,this._skinSkeleton=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bindTarget",{set:function(e){this._u32view[j.bindTarget]=e?e.id:0,this._bindTarget=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"macros",{get:function(){return this._macros},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e,t){return Ge.createRenderComponent(t.meshCount,t.uniformBlock.__handle,e.id,t.culling?t.culling.id:0,t.renderType,t.macros)},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),Ge.changeMeshMacros(this.__handle,this._macros,!0)},t.prototype.getStartIndex=function(e){return this._u32view[j.start+j.size*e+j.startIndex]},t.prototype.setStartIndex=function(e,t){this._u32view[j.start+j.size*e+j.startIndex]=t},t.prototype.getNumIndices=function(e){return this._u32view[j.start+j.size*e+j.numIndices]},t.prototype.setNumIndices=function(e,t){this._u32view[j.start+j.size*e+j.numIndices]=t},t.prototype.getVertexBuffer=function(e){return this._vertexes[e]},t.prototype.setVertexBuffer=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexBuffer=function(e){return this._indexes[e]},t.prototype.setIndexBuffer=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getVertexData=function(e){return this._vertexes&&this._vertexes[e]},t.prototype.setVertexData=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexData=function(e){return this._indexes&&this._indexes[e]},t.prototype.setIndexData=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getMaterial=function(e){return this._materials&&this._materials[e]},t.prototype.setMaterial=function(e,t){this._materials||(this._materials=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.materialId]=t?t.id:0,this._materials[e]=t},t.prototype.fastSet=function(e,t,i,r,n){this._vertexes=e,this._indexes=t,this._materials=i;for(var a=0;a<this._meshCount;a+=1)this.setVertexBuffer(a,e[a]),this.setIndexBuffer(a,t[a]),this.setMaterial(a,i[a]),this.setStartIndex(a,r[a]),this.setNumIndices(a,n[a])},t.prototype.setDirty=function(){this._handle.setSharedDirty&&this._handle.setSharedDirty()},t.prototype.copyStates=function(e){e._u32view.length<this._u32view.length?this._u32view.set(e._u32view,0):this._u32view.set(new Uint32Array(e._u32view.buffer,0,this._u32view.length),0),this._materials=e._materials,this._vertexes=e._vertexes,this._indexes=e._indexes},t.OFFSETS=j,t}(Se),je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeObj=function(e,t){return{id:0,data:new ArrayBuffer(4*(j.start+j.size*t.meshCount)),setSharedDirty:function(){}}},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._uniforms=e},enumerable:!1,configurable:!0}),t}(Ve),He=ve.worker,ze=function(e){function t(t,i){var r=e.call(this)||this;r.flag=i,r._boneNum=0,r._boneNum=t;var n=He.createSkinning(t,i);return n.id<0||!n.data||(r._init(n),r._initU32View()),r}return te(t,e),t.UPDATE_MATS=function(e,t){He.updateSkinnings(e,t)},Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneInverseModel",{get:function(){return this._boneInverseModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneOffsetMatrices",{get:function(){return this._boneOffsetMatrices},enumerable:!1,configurable:!0}),t.prototype.setBoneMatrix=function(e,t,i){var r=this._boneNum;if(t.length===r&&i.length===r){for(var n=[],a=0;a<r;a++)n.push(i[a].id);this._u32view[Y.boneInverseModelId]=e.id,this._u32view.set(t,Y.boneIndices);var o=Y.boneIndices+r*Y.perBoneIndices;this._u32view.set(n,o),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(Y.boneIndices+r*(Y.perBoneIndices+Y.perBoneEntityId)),r*(1&this.flag?12:16)),this._boneInverseModel=e}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(Se),Ye=ve.worker,$e=function(e){function t(t){var i=e.call(this)||this,r=Ye.createDynamicBones(t?t.id:0);return r.id<0||!r.data||(i._init(r),i._initU32View()),i}return te(t,e),Object.defineProperty(t.prototype,"stiffness",{get:function(){return this._f32view[$.stiffness]},set:function(e){this._f32view[$.stiffness]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"damping",{get:function(){return this._f32view[$.damping]},set:function(e){this._f32view[$.damping]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"elasticity",{get:function(){return this._f32view[$.elasticity]},set:function(e){this._f32view[$.elasticity]=e},enumerable:!1,configurable:!0}),t.prototype.preUpdate=function(){this._handle.preUpdate()},t.prototype.update=function(e,t){t?this._handle.update(e,t.x,t.y,t.z):this._handle.update(e)},t.prototype.rebuild=function(){this._handle.rebuild()},t.prototype.resetRoot=function(e){this._handle.resetRoot(e?e.id:0)},t.OFFSETS=$,t}(Se),qe=ve.worker,Qe=new Float32Array(new ArrayBuffer(4*F.size));Qe.set([0,0,0,1,1],0);var Ze=function(e){function t(){var i=e.call(this)||this,r=t.POLL_MANAGER.allocateOne();return i._init(r,t.POLL_MANAGER.pools),i.entityOffset=(i._poolIndex>>6)*F.size,i.localRotationOffset=i.entityOffset+F.rotation,i.localPositionOffset=i.entityOffset+F.position,i.localScaleOffset=i.entityOffset+F.scale,i.worldMatrixOffset=i.entityOffset+F.worldMatrix,i.active=!0,i}return te(t,e),t.prototype.addChild=function(e){qe.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){qe.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){qe.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){qe.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){qe.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){qe.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){qe.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Le(Qe,Qe,(function(e){return qe.createNodePool(e,!1)})),t.OFFSETS=F,t}(ke),Ke=function(){function e(e,t){this._ctor=e,this._index=0,this._size=void 0!==t?t:500,this._array=new e(this._size)}return e.prototype.push=function(e){if(this._index>=this._size){var t=new this._ctor(2*this._size);t.set(this._array),this._array=t,this._size*=2}this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},Object.defineProperty(e.prototype,"buffer",{get:function(){return this._array.buffer},enumerable:!1,configurable:!0}),e}(),Xe=ve.worker,Je=new Uint32Array(new ArrayBuffer(4*U.size)),et=new Float32Array(Je.buffer);Je[0]=1,et.set([0,0,0,1],1),et.set([0,0,0],5),et.set([1,1,1],8);var tt=function(e){function t(){var i=e.call(this)||this,r=t.POLL_MANAGER.allocateOne();return i._init(r,t.POLL_MANAGER.pools),i.entityOffset=(i._poolIndex>>6)*U.size,i.localRotationTypeOffset=i.entityOffset+U.rotationType,i.localQuaternionOffset=i.entityOffset+U.rotation,i.localPositionOffset=i.entityOffset+U.position,i.localScaleOffset=i.entityOffset+U.scale,i.worldMatrixOffset=i.entityOffset+U.worldOffset,i.active=!0,i}return te(t,e),t.CREATE_TREE=function(e,i,r,n){void 0===n&&(n=!1),t._CREATE_TREE_IDS.clear();for(var a=0;a<e;a++)r[a]=new t,t._CREATE_TREE_IDS.push(r[a].id);var o=Xe.createNodeTree(e,t._CREATE_TREE_IDS.buffer,i,n,!0);if(!o)for(a=0;a<e;a++)t.POLL_MANAGER.dispose(r[a]);return o},t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~U.dfRotationType:this._nativePool._u32view[this.localRotationTypeOffset]|=U.dfRotationType},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&U.dfRotationType)},t.prototype.addChild=function(e){Xe.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){Xe.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){Xe.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){Xe.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(e,i){for(var r=0;r<i;r++)t.POLL_MANAGER.dispose(e[r]);Xe.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){Xe.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){Xe.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new Le(Je,et,(function(e){return Xe.createNodePool(e,!0)})),t.OFFSETS=U,t._CREATE_TREE_IDS=new Ke(Uint32Array),t}(ke),it=ve.worker,rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeModel=function(e,t){var i;e===o.EDataModelType.AnimationClip?i=it.createAnimationClipModel(t):e===o.EDataModelType.SkeletonBoneInverse&&(i=it.createBoneInverseModel(t)),i=i||{id:0},this._handle=i},t}(Ae),nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(o.EDataModelType.AnimationClip,e)},t}(rt),at=ve.worker,ot=function(e){function t(t,i,r,n,a,o,s,l){var u=e.call(this)||this;return u._handle=at.createAnimationClipBinding(t,i,r,n,a,o,s,l),u}return te(t,e),t.prototype.rebind=function(e,t,i,r,n,a,o,s,l,u){return at.rebindAnimationClipBinding(this.__handle,e,t,i,r,n,a,o,s,l,u)},t.prototype.update=function(e,t,i,r,n,a,o,s,l){return at.updateAnimationClipBinding(this.__handle,e,t,i,r,n,a,o,s,l)},t.prototype.writeDefaultValues=function(){at.writeAnimationClipBindingDefaultValues(this.__handle)},t}(Ae),st=ve.worker,lt=function(e){function t(t){var i=e.call(this)||this;i.layerCount=t,i._handle=st.createAnimatorControllerModel(t),i._uint32View=new Uint32Array(i._handle.data),i._f32View=new Float32Array(i._handle.data),i._blendStates=new Array(t);for(var r=0;r<t;r++)i._uint32View[1+3*r]=1,i._f32View[1+3*r+1]=0,i._f32View[1+3*r+2]=0;return i}return te(t,e),t.UPDATE_ANIMATOR_CONTROLLERS=function(e,t){st.updateAnimatorControllers(e,t)},t.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:0,this._binding=e},t.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},t.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},t.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:0,this._blendStates[e]=t},t.prototype.setLayerMask=function(e,t){st.setAnimatorControllerModelMaskAtIndex(this.__handle,e,t)},t.prototype.update=function(){st.updateAnimatorControllerModel(this.__handle)},t.prototype.destroy=function(){this._binding=null,this._blendStates=null},t}(Ae),ut=ve.worker,ct=function(e){function t(t){var i=e.call(this)||this;i.count=t,i._index=0,i._handle=ut.createAnimatorControllerStateModel(t),i._f32View=new Float32Array(i._handle.data),i._uint32View=new Uint32Array(i._handle.data);for(var r=0;r<t;r++)i._uint32View[5*r+3]=0,i._f32View[5*r+3+1]=0,i._f32View[5*r+3+2]=0,i._uint32View[5*r+3+3]=0,i._f32View[5*r+3+4]=0;return i}return te(t,e),Object.defineProperty(t.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),t.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},t.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:0,this._nextState=e},t.prototype.setBlendInfo=function(e,t,i,r,n){return!(this._index>=this.count)&&(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=i,this._uint32View[5*this._index+3+3]=r?r.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=n,this._index++,!0)},t}(Ae),dt=function(e){function t(t){var i=e.call(this)||this;return i._init(t),i}return te(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(Se),ht=16384,pt=32768,ft=393216,gt=15728640;function _t(e,t){return-8&e|t<<0}function mt(e,t){return-57&e|t<<3}function vt(e,t){return-449&e|t<<6}function yt(e,t){return-3585&e|t<<9}function At(e,t){return-12289&e|t<<12}function bt(e,t){return t?e|ht:-16385&e}function Et(e,t){return-393217&e|(1===t?0:t<<17)}function wt(e,t){return-15728641&e|t-1<<20}function Tt(e,t){return t?e|pt:-32769&e}function Ct(e){return(7&e)>>0}function St(e){return(56&e)>>3}function It(e){return(448&e)>>6}var xt=2147483648;function Pt(e,t){return t?e|xt:2147483647&e}function Dt(e){return!!(e&xt)}var Rt=1073741824;function Ot(e,t){return t?e|Rt:-1073741825&e}function kt(e){return!!(e&Rt)}var Mt=16776960;function Nt(e,t){return 4294963455&e|t<<8}function Lt(e,t){return 4294905855&e|t<<8<<4}function Bt(e,t){return 4293984255&e|t<<8<<8}function Ft(e,t){return 4279238655&e|t<<8<<12}function Ut(e){return(e&Mt)>>8&15}function Wt(e){return(e&Mt)>>8>>4&15}function Gt(e){return(e&Mt)>>8>>8&15}function Vt(e){return(e&Mt)>>8>>12&15}var jt=1056964608;function Ht(e,t){return 4043309055&e|t<<24}function zt(e,t){return 3489660927&e|t<<24<<3}function Yt(e){return(e&jt)>>24&7}var $t=240;function qt(e,t){return-241&e|t<<4}function Qt(e){return 0!=(e&$t)}function Zt(e){return(e&$t)>>4}var Kt=255;function Xt(e,t){return-256&e|(255&t)<<0}function Jt(e){return(e&Kt)>>0}var ei=65280;function ti(e,t){return-65281&e|t<<8}function ii(e){return(e&ei)>>8}var ri=983040;function ni(e,t){return-983041&e|t<<16}function ai(e){return 0!=(e&ri)}function oi(e){return(e&ri)>>16}var si=20,li=4293918720;function ui(e,t){return 4279238655&e|t<<si}function ci(e,t){return 4043309055&e|t<<si<<4}function di(e,t){return 268435455&e|t<<si<<8}function hi(e){return(e&li)>>si&15}function pi(e){return(e&li)>>si>>4&15}function fi(e){return(e&li)>>si>>8&15}var gi=255;function _i(e,t){return-256&e|(255&t)<<0}function mi(e){return e&gi}var vi=768;function yi(e,t){return-769&e|t<<8}function Ai(e){return(e&vi)>>8}function bi(e){return!!(e&vi)}var Ei=14336;function wi(e,t){return-14337&e|t<<11}function Ti(e){return(e&Ei)>>11}var Ci=ve.worker,Si=function(e){function t(t,i,r,n,a,s){var l,u=e.call(this)||this,c=Ci.createEffect(t,i,r,n,a,s);if(c.id<0||!c.data)return u;u._handle=c,u._init(c),u._initU32View();for(var d=0;d<i;d+=1){var h=d*H.size+H.colorDepth;u._u32view[h]=(l=u._u32view[h],!0?15|l:-16&l),u._u32view[h]=Bt(u._u32view[h],o.EBlendFactor.ZERO),u._u32view[h]=Ft(u._u32view[h],o.EBlendFactor.ONE)}return u._passCount=i,u}return te(t,e),Object.defineProperty(t.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),t.prototype.warmUp=function(){return this._handle.warmUp()},t.prototype.getBlendOn=function(e){return kt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendOn=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Ot(this._u32view[i],t)},t.prototype.getBlendSrc=function(e){return Ut(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendSrc=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Nt(this._u32view[i],t),this._u32view[i]=Bt(this._u32view[i],t)},t.prototype.getBlendDst=function(e){return Wt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendDst=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Lt(this._u32view[i],t),this._u32view[i]=Ft(this._u32view[i],t)},t.prototype.getBlendSrcRGB=function(e){return Ut(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendSrcRGB=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Nt(this._u32view[i],t)},t.prototype.getBlendSrcAlpha=function(e){return Gt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendSrcAlpha=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Bt(this._u32view[i],t)},t.prototype.getBlendDstRGB=function(e){return Wt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendDstRGB=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Lt(this._u32view[i],t)},t.prototype.getBlendDstAlpha=function(e){return Vt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendDstAlpha=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Ft(this._u32view[i],t)},t.prototype.getBlendFunc=function(e){return Yt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setBlendFunc=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Ht(this._u32view[i],t),this._u32view[i]=zt(this._u32view[i],t)},t.prototype.getDepthTestOn=function(e){return Qt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setDepthTestOn=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=qt(this._u32view[i],t?o.ECompareFunc.LEQUAL:0)},t.prototype.getDepthTestComp=function(e){return Zt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setDepthTestComp=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=qt(this._u32view[i],t)},t.prototype.getDepthWrite=function(e){return Dt(this._u32view[e*H.size+H.colorDepth])},t.prototype.setDepthWrite=function(e,t){var i=e*H.size+H.colorDepth;this._u32view[i]=Pt(this._u32view[i],t)},t.prototype.getCullFace=function(e){return Ai(this._u32view[e*H.size+H.state])},t.prototype.setCullFace=function(e,t){var i=e*H.size+H.state;this._u32view[i]=yi(this._u32view[i],t)},t.prototype.getCullOn=function(e){return bi(this._u32view[e*H.size+H.state])},t.prototype.setCullOn=function(e,t){var i=e*H.size+H.state;this._u32view[i]=yi(this._u32view[i],t?o.ECullMode.BACK:o.ECullMode.NONE)},t.prototype.getPrimitiveType=function(e){return Ti(this._u32view[e*H.size+H.state])},t.prototype.setPrimitiveType=function(e,t){var i=e*H.size+H.state;this._u32view[i]=wi(this._u32view[i],t)},t.prototype.getStencilTestOn=function(e){return ai(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilTestOn=function(e,t){var i=e*H.size+H.bstencil,r=ni(this._u32view[i],t?o.ECompareFunc.LEQUAL:0);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilComp=function(e){return oi(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilComp=function(e,t){var i=e*H.size+H.bstencil,r=ni(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilPass=function(e){return fi(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilPass=function(e,t){var i=e*H.size+H.bstencil,r=di(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilFail=function(e){return hi(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilFail=function(e,t){var i=e*H.size+H.bstencil,r=ui(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilZFail=function(e){return pi(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilZFail=function(e,t){var i=e*H.size+H.bstencil,r=ci(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilWriteMask=function(e){return mi(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilWriteMask=function(e,t){var i=e*H.size+H.bstencil,r=_i(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilReadMask=function(e){return Jt(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilReadMask=function(e,t){var i=e*H.size+H.bstencil,r=Xt(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getStencilRef=function(e){return ii(this._u32view[e*H.size+H.fstencil])},t.prototype.setStencilRef=function(e,t){var i=e*H.size+H.bstencil,r=ti(this._u32view[i],t);this._u32view[i]=r,i=e*H.size+H.fstencil,this._u32view[i]=r},t.prototype.getUseMaterialStates=function(e){return!!(1&this._u32view[e*H.size+H.useMaterialStates])},t.prototype.setUseMaterialStates=function(e,t){this._u32view[e*H.size+H.useMaterialStates]=t?4294967295:0},t.prototype._getUseMaterialStateMask=function(e,t){return function(e,t){return!!(e&1<<t)}(this._u32view[e*H.size+H.useMaterialStates],t)},t.prototype._setUseMaterialStateMask=function(e,t,i){this._u32view[e*H.size+H.useMaterialStates]=function(e,t,i){return i?e|t:e&~t}(this._u32view[e*H.size+H.useMaterialStates],t,i)},t.prototype.getUseMaterialStateBlendOn=function(e){return this._getUseMaterialStateMask(e,1)},t.prototype.setUseMaterialStateBlendOn=function(e,t){return this._setUseMaterialStateMask(e,1,t)},t.prototype.getUseMaterialStateBlendSrcRGB=function(e){return this._getUseMaterialStateMask(e,2)},t.prototype.setUseMaterialStateBlendSrcRGB=function(e,t){return this._setUseMaterialStateMask(e,2,t)},t.prototype.getUseMaterialStateBlendSrcAlpha=function(e){return this._getUseMaterialStateMask(e,3)},t.prototype.setUseMaterialStateBlendSrcAlpha=function(e,t){return this._setUseMaterialStateMask(e,3,t)},t.prototype.getUseMaterialStateBlendDstRGB=function(e){return this._getUseMaterialStateMask(e,4)},t.prototype.setUseMaterialStateBlendDstRGB=function(e,t){return this._setUseMaterialStateMask(e,4,t)},t.prototype.getUseMaterialStateBlendDstAlpha=function(e){return this._getUseMaterialStateMask(e,5)},t.prototype.setUseMaterialStateBlendDstAlpha=function(e,t){return this._setUseMaterialStateMask(e,5,t)},t.prototype.getUseMaterialStateBlendFunc=function(e){return this._getUseMaterialStateMask(e,6)},t.prototype.setUseMaterialStateBlendFunc=function(e,t){return this._setUseMaterialStateMask(e,6,t)},t.prototype.getUseMaterialStateDepthTestOn=function(e){return this._getUseMaterialStateMask(e,7)},t.prototype.setUseMaterialStateDepthTestOn=function(e,t){return this._setUseMaterialStateMask(e,7,t)},t.prototype.getUseMaterialStateDepthTestComp=function(e){return this._getUseMaterialStateMask(e,8)},t.prototype.setUseMaterialStateDepthTestComp=function(e,t){return this._setUseMaterialStateMask(e,8,t)},t.prototype.getUseMaterialStateDepthWrite=function(e){return this._getUseMaterialStateMask(e,9)},t.prototype.setUseMaterialStateDepthWrite=function(e,t){return this._setUseMaterialStateMask(e,9,t)},t.prototype.getUseMaterialStateCullOn=function(e){return this._getUseMaterialStateMask(e,10)},t.prototype.setUseMaterialStateCullOn=function(e,t){return this._setUseMaterialStateMask(e,10,t)},t.prototype.getUseMaterialStateCullFace=function(e){return this._getUseMaterialStateMask(e,11)},t.prototype.setUseMaterialStateCullFace=function(e,t){return this._setUseMaterialStateMask(e,11,t)},t.prototype.getUseMaterialStatePrimitiveType=function(e){return this._getUseMaterialStateMask(e,12)},t.prototype.setUseMaterialStatePrimitiveType=function(e,t){return this._setUseMaterialStateMask(e,12,t)},t.prototype.getUseMaterialStateStencilTestOn=function(e){return this._getUseMaterialStateMask(e,13)},t.prototype.setUseMaterialStateStencilTestOn=function(e,t){return this._setUseMaterialStateMask(e,13,t)},t.prototype.getUseMaterialStateStencilTestComp=function(e){return this._getUseMaterialStateMask(e,14)},t.prototype.setUseMaterialStateStencilTestComp=function(e,t){return this._setUseMaterialStateMask(e,14,t)},t.prototype.getUseMaterialStateStencilTestPass=function(e){return this._getUseMaterialStateMask(e,15)},t.prototype.setUseMaterialStateStencilTestPass=function(e,t){return this._setUseMaterialStateMask(e,15,t)},t.prototype.getUseMaterialStateStencilTestFail=function(e){return this._getUseMaterialStateMask(e,16)},t.prototype.setUseMaterialStateStencilTestFail=function(e,t){return this._setUseMaterialStateMask(e,16,t)},t.prototype.getUseMaterialStateStencilTestZFail=function(e){return this._getUseMaterialStateMask(e,17)},t.prototype.setUseMaterialStateStencilTestZFail=function(e,t){return this._setUseMaterialStateMask(e,17,t)},t.prototype.showDebugInfo=function(){for(var e="",t=0;t<this._passCount;t+=1)e+="Pass: "+t+":\nPrimitiveType("+o.EPrimitiveType[this.getPrimitiveType(t)]+"),\nBlendOn("+this.getBlendOn(t)+"), BlendSrc("+o.EBlendFactor[this.getBlendSrcRGB(t)]+","+o.EBlendFactor[this.getBlendSrcAlpha(t)]+"), BlendDst("+o.EBlendFactor[this.getBlendDstRGB(t)]+","+o.EBlendFactor[this.getBlendDstAlpha(t)]+"), BlendFunc("+o.EBlendEquation[this.getBlendFunc(t)]+"),\nDepthTestOn("+this.getDepthTestOn(t)+"), DepthTestComp("+o.ECompareFunc[this.getDepthTestComp(t)]+"), DepthWrite("+this.getDepthWrite(t)+"),\nCullOn("+this.getCullOn(t)+"), CullFace("+o.ECullMode[this.getCullFace(t)]+"),\nStencilTestOn("+this.getStencilTestOn(t)+"), StencilComp("+o.ECompareFunc[this.getStencilComp(t)]+"), StencilPass("+o.EStencilOp[this.getStencilPass(t)]+"), StencilFail("+o.EStencilOp[this.getStencilFail(t)]+"), StencilZFail("+o.EStencilOp[this.getStencilZFail(t)]+"),\nStencilWriteMask("+this.getStencilWriteMask(t)+"), StencilReadMask("+this.getStencilReadMask(t)+"), StencilRef("+this.getStencilRef(t)+")\n      ";return e},t.OFFSETS=H,t}(Se),Ii=ve.worker,xi=function(e){function t(t,i,r){var n=e.call(this)||this;return n._createNativeMat(t,i,r),n.blendSrcAlpha=o.EBlendFactor.ZERO,n.blendDstAlpha=o.EBlendFactor.ONE,n.renderQueue=2e3,n._macros=t,i&&(n.effect=i),r&&(n.uniforms=r),n}return te(t,e),Object.defineProperty(t.prototype,"effect",{get:function(){return this._effect},set:function(e){this._u32view[z.effect]=e.id,this._effect=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._u32view[z.uniformBlock]=e.id,this._uniforms=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderQueue",{get:function(){return this._u32view[z.renderQueue]},set:function(e){this._u32view[z.renderQueue]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"useInstance",{get:function(){return!!this._u32view[z.useInstance]},set:function(e){this._u32view[z.useInstance]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendOn",{get:function(){return kt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Ot(this._u32view[t],e),this._u32view[z.colorDepthMask]|=Rt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGB",{get:function(){return Ut(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Nt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=3840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBChanged",{get:function(){return!!(3840&this._u32view[z.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlpha",{get:function(){return Gt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Bt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=983040},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrc",{set:function(e){this.blendSrcRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGB",{get:function(){return Wt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Lt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=61440},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBChanged",{get:function(){return!!(61440&this._u32view[z.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlpha",{get:function(){return Vt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Ft(this._u32view[t],e),this._u32view[z.colorDepthMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDst",{set:function(e){this.blendDstRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFunc",{get:function(){return Yt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Ht(this._u32view[t],e),this._u32view[t]=zt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=jt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOn",{get:function(){return Qt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=qt(this._u32view[t],e?o.ECompareFunc.LEQUAL:0),this._u32view[z.colorDepthMask]|=$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestComp",{get:function(){return Zt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=qt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWrite",{get:function(){return Dt(this._u32view[z.colorDepth])},set:function(e){var t=z.colorDepth;this._u32view[t]=Pt(this._u32view[t],e),this._u32view[z.colorDepthMask]|=xt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFace",{get:function(){return Ai(this._u32view[z.state])},set:function(e){var t=z.state;this._u32view[t]=yi(this._u32view[t],e),this._u32view[z.stateMask]|=vi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOn",{get:function(){return bi(this._u32view[z.state])},set:function(e){var t=z.state;this._u32view[t]=yi(this._u32view[t],e?o.ECullMode.BACK:o.ECullMode.NONE),this._u32view[z.stateMask]|=vi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveType",{get:function(){return Ti(this._u32view[z.state])},set:function(e){var t=z.state;this._u32view[t]=wi(this._u32view[t],e),this._u32view[z.stateMask]|=Ei},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOn",{get:function(){return ai(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=ni(this._u32view[t],e?o.ECompareFunc.LEQUAL:0);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=ri,this._u32view[z.fstencilMask]|=ri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilComp",{get:function(){return oi(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=ni(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=ri,this._u32view[z.fstencilMask]|=ri},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPass",{get:function(){return fi(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=di(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=4026531840,this._u32view[z.fstencilMask]|=4026531840},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFail",{get:function(){return hi(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=ui(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=15728640,this._u32view[z.fstencilMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFail",{get:function(){return pi(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=ci(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=251658240,this._u32view[z.fstencilMask]|=251658240},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMask",{get:function(){return mi(this._u32view[z.fstencil])},set:function(e){var t=z.state,i=_i(this._u32view[t],e);this._u32view[t]=i,t=z.state,this._u32view[t]=i,this._u32view[z.stateMask]|=gi,this._u32view[z.stateMask]|=gi},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMask",{get:function(){return Jt(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=Xt(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=Kt,this._u32view[z.fstencilMask]|=Kt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRef",{get:function(){return ii(this._u32view[z.fstencil])},set:function(e){var t=z.bstencil,i=ti(this._u32view[t],e);this._u32view[t]=i,t=z.fstencil,this._u32view[t]=i,this._u32view[z.bstencilMask]|=ei,this._u32view[z.fstencilMask]|=ei},enumerable:!1,configurable:!0}),t.prototype._setMask=function(e,t,i){this._u32view[e]=i?this._u32view[e]|t:this._u32view[e]&~t},t.prototype._getMask=function(e,t){return!!(this._u32view[e]&t)},Object.defineProperty(t.prototype,"blendOnMask",{get:function(){return this._getMask(z.colorDepthMask,Rt)},set:function(e){this._setMask(z.colorDepthMask,Rt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcRGBMask",{get:function(){return this._getMask(z.colorDepthMask,3840)},set:function(e){this._setMask(z.colorDepthMask,3840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcAlphaMask",{get:function(){return this._getMask(z.colorDepthMask,983040)},set:function(e){this._setMask(z.colorDepthMask,983040,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendSrcMask",{set:function(e){this.blendSrcRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstRGBMask",{get:function(){return this._getMask(z.colorDepthMask,61440)},set:function(e){this._setMask(z.colorDepthMask,61440,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstAlphaMask",{get:function(){return this._getMask(z.colorDepthMask,15728640)},set:function(e){this._setMask(z.colorDepthMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendDstMask",{set:function(e){this.blendDstRGBMask=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendFuncMask",{get:function(){return this._getMask(z.colorDepthMask,jt)},set:function(e){this._setMask(z.colorDepthMask,jt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestOnMask",{get:function(){return this._getMask(z.colorDepthMask,$t)},set:function(e){this._setMask(z.colorDepthMask,$t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTestCompMask",{get:function(){return this._getMask(z.colorDepthMask,$t)},set:function(e){this._setMask(z.colorDepthMask,$t,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthWriteMask",{get:function(){return this._getMask(z.colorDepthMask,xt)},set:function(e){this._setMask(z.colorDepthMask,xt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullFaceMask",{get:function(){return this._getMask(z.stateMask,vi)},set:function(e){this._setMask(z.stateMask,vi,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cullOnMask",{get:function(){return this._getMask(z.stateMask,vi)},set:function(e){this._setMask(z.stateMask,vi,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"primitiveTypeMask",{get:function(){return this._getMask(z.stateMask,Ei)},set:function(e){this._setMask(z.stateMask,Ei,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilTestOnMask",{get:function(){return this._getMask(z.bstencilMask,ri)},set:function(e){this._setMask(z.bstencilMask,ri,e),this._setMask(z.fstencilMask,ri,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilCompMask",{get:function(){return this._getMask(z.bstencilMask,ri)},set:function(e){this._setMask(z.bstencilMask,ri,e),this._setMask(z.fstencilMask,ri,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilPassMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.bstencilMask,4026531840,e),this._setMask(z.fstencilMask,4026531840,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilFailMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.bstencilMask,15728640,e),this._setMask(z.fstencilMask,15728640,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilZFailMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.bstencilMask,251658240,e),this._setMask(z.fstencilMask,251658240,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilWriteMaskMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.stateMask,gi,e),this._setMask(z.stateMask,gi,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilReadMaskMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.bstencilMask,Kt,e),this._setMask(z.fstencilMask,Kt,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stencilRefMask",{get:function(){return this._getMask(z.bstencilMask,ei)},set:function(e){this._setMask(z.bstencilMask,ei,e),this._setMask(z.fstencilMask,ei,e)},enumerable:!1,configurable:!0}),t.prototype._createNativeMat=function(e,t,i){var r=Ii.createMaterial(e,i);r.id<0||!r.data||(this._handle=r,this._init(r),this._initU32View())},t.prototype.changeMacros=function(e){this._macros=this._macros||{},Object.assign(this._macros,e),Ii.changeMaterialMacros(this.__handle,this._macros,!0)},t.prototype.getMacro=function(e){return this._macros[e]},t.prototype.clone=function(e){var i=new t(this._macros,this._effect);return i._f32view.set(this._f32view),i.uniforms=e||this._uniforms.clone(),i},t.prototype.showDebugInfo=function(){var e="";return e+="RenderQueue("+this.renderQueue+"), PrimitiveType("+o.EPrimitiveType[this.primitiveType]+"),\nOverwrite("+this._u32view[z.fstencilMask].toString(16)+", "+this._u32view[z.bstencilMask].toString(16)+", "+this._u32view[z.blendRGBAMask].toString(16)+", "+this._u32view[z.colorDepthMask].toString(16)+", "+this._u32view[z.stateMask].toString(16)+"),\nBlendOn("+this.blendOn+"), BlendSrc("+o.EBlendFactor[this.blendSrcRGB]+","+o.EBlendFactor[this.blendSrcAlpha]+"), BlendDst("+o.EBlendFactor[this.blendDstRGB]+","+o.EBlendFactor[this.blendDstAlpha]+"), BlendFunc("+o.EBlendEquation[this.blendFunc]+"),\nDepthTestOn("+this.depthTestOn+"), DepthTestComp("+o.ECompareFunc[this.depthTestComp]+"), DepthWrite("+this.depthWrite+"),\nCullOn("+this.cullOn+"), CullFace("+o.ECullMode[this.cullFace]+"),\nStencilTestOn("+this.stencilTestOn+"), StencilComp("+o.ECompareFunc[this.stencilComp]+"), StencilComp("+o.EStencilOp[this.stencilPass]+"), StencilFail("+o.EStencilOp[this.stencilFail]+"), StencilZFail("+o.EStencilOp[this.stencilZFail]+"),\nStencilWriteMask("+this.stencilWriteMask+"), StencilReadMask("+this.stencilReadMask+"), StencilRef("+this.stencilRef+")\n      "},t.OFFSETS=z,t}(Se),Pi=ve.worker,Di=function(e){function t(t){var i=e.call(this)||this,r=t;return r.colors.forEach((function(e,t){e.texture=e.texture.__handle})),r.depth.texture=r.depth.texture.__handle,t.stencil?r.stencil.texture=r.stencil.texture.__handle:r.stencil={texture:{id:0}},i._handle=Pi.createRenderPass(r),i}return te(t,e),t.SCREEN_RENDER_PASS={id:0,__handle:{id:0}},t}(Ae),Ri=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(o.EDataModelType.SkeletonBoneInverse,t.buffer)},t}(rt),Oi=ve.worker,ki=function(e){function t(t){var i=e.call(this)||this,r=t.canvas;r?(i._width=r.width,i._height=r.height):(i._width=t.width,i._height=t.height),i._type=t.type||o.ETextureType.D2,i._slice=t.slices||0,i._mips=t.mips||0,i._pixelFormat=t.pixelFormat||o.ETextureFormat.RGBA8,i._flags=i._buildFlags(t);var n=r?Oi.createAutoUpdateTextureFromCanvas(r):Oi.createTexture(i._type,i._width,i._height,i._slice,i._mips,i._pixelFormat,i._flags,t.source,t.offsets);return i._handle=n||{id:0},i}return te(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mips",{get:function(){return this._mips},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapU",{get:function(){return we.isWrongWrapMapping?It(this._flags):Ct(this._flags)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=we.isWrongWrapMapping?vt(this._flags,e):_t(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapV",{get:function(){return we.isWrongWrapMapping?Ct(this._flags):St(this._flags)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=we.isWrongWrapMapping?_t(this._flags,e):mt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wrapW",{get:function(){return we.isWrongWrapMapping?St(this._flags):It(this._flags)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=we.isWrongWrapMapping?mt(this._flags,e):vt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"magFilter",{get:function(){return(12288&this._flags)>>12},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=At(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFilter",{get:function(){return(3584&this._flags)>>9},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=yt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"anisoLevel",{get:function(){return 1+((this._flags&gt)>>20)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=wt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sampleCount",{get:function(){return(this._flags&ft)>>17},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=Et(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generateMipmaps",{get:function(){return!!(this._flags&ht)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=bt(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRenderTarget",{get:function(){return!!(this._flags&pt)},set:function(e){Oi.updateTextureFlags(this.__handle,this._flags=Tt(this._flags,e))},enumerable:!1,configurable:!0}),t.prototype.update=function(e){var t=e.level||0;Oi.updateTexture(this.__handle,t,e.slice||0,e.xoffset||0,e.yoffset||0,e.zoffset||0,e.width||this.width>>t||1,e.height||this.height>>t||1,e.buffer)},t.prototype._buildFlags=function(e){var t;return this._flags=0,we.isWrongWrapMapping?(e.wrapU&&(this._flags=vt(this._flags,e.wrapU)),e.wrapV&&(this._flags=_t(this._flags,e.wrapV)),e.wrapW&&(this._flags=mt(this._flags,e.wrapW))):(e.wrapU&&(this._flags=_t(this._flags,e.wrapU)),e.wrapV&&(this._flags=mt(this._flags,e.wrapV)),e.wrapW&&(this._flags=vt(this._flags,e.wrapW))),e.magFilter&&(this._flags=At(this._flags,e.magFilter)),e.minFilter&&(this._flags=yt(this._flags,e.minFilter)),e.anisoLevel&&(this._flags=wt(this._flags,e.anisoLevel)),e.sampleCount&&(this._flags=Et(this._flags,e.sampleCount)),e.generateMipmaps&&(this._flags=bt(this._flags,e.generateMipmaps)),e.isRenderTarget&&(this._flags=Tt(this._flags,e.isRenderTarget)),e.isWriteOnly&&(this._flags=(t=this._flags,e.isWriteOnly?65536|t:-65537&t)),this._flags},t.prototype.showDebugInfo=function(){var e="";return e+="type("+o.ETextureType[this.type]+"), format("+o.ETextureFormat[this.pixelFormat]+"),\nwidth("+this.width+"), height("+this.height+"), slice("+this.slice+"), mips("+this.mips+"),\nwrapU("+o.EWrapMode[this.wrapU]+"), wrapV("+o.EWrapMode[this.wrapV]+"), wrapW("+o.EWrapMode[this.wrapW]+"),\nmagFilter("+o.EFilterMode[this.magFilter]+"), minFilter("+o.EFilterMode[this.minFilter]+"),\nanisoLevel("+this.anisoLevel+"), sampleCount("+this.sampleCount+"), generateMipmaps("+this.generateMipmaps+")\n    "},t}(Ae),Mi=ve.worker,Ni=function(e){function t(t){var i=e.call(this)||this;return i._handle=i._createNativeObj(t),i._handle.data&&(i._f32View=new Float32Array(i._handle.data),i._u32View=new Uint32Array(i._handle.data)),i._descriptor=t,i}return te(t,e),t.CREATE_FAKE=function(e){return new Li(e)},Object.defineProperty(t.prototype,"_dataView",{get:function(){return this._f32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e){return Mi.createUniformBlock(e.__handle)||{id:0}},t.prototype.hasKey=function(e){return this._descriptor.hasKey(e)},t.prototype.setUniform=function(e,t){var i=this._descriptor.layout[e];return!!i&&(i[0]===o.EUniformType.SAMPLER&&(t instanceof ki?(this._textures=this._textures||{},this._textures[e]=t,t=t.id):this._textures&&(this._textures[e]=void 0)),this._descriptor.setUniform(e,t,this._f32View,this._u32View),!0)},t.prototype.getUniform=function(e){return this._descriptor.getUniform(e,this._f32View,this._u32View)},t.prototype._getFloatOffset=function(e){return this._descriptor._getFloatOffset(e)},t.prototype.setAllData=function(e){this._f32View.set(e,0)},t.prototype.clone=function(){var e=new t(this._descriptor);return e._f32View?(this._textures&&(e._textures=Object.assign({},this._textures)),e._f32View.set(this._f32View),e):e},t.prototype.copy=function(e){if(this._descriptor.id!==e._descriptor.id){var t=e.descriptor.layout;for(var i in t)if(this.hasKey(i)){var r=e.getUniform(i);this.setUniform(i,r),e._textures&&e._textures[i]&&(this._textures=this._textures||{},this._textures[i]=e._textures[i])}}else this._f32View.set(e._f32View)},t.prototype.showDebugInfo=function(){var e=this,t="";return Object.keys(this._descriptor.layout).forEach((function(i){var r=e._descriptor.getUniform(i,e._f32View,e._u32View);t+=i+": ["+("number"==typeof r?[r]:r).join(",")+"]\n"})),t},t}(Ae),Li=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return te(t,e),t.prototype._createNativeObj=function(e){return{id:0,data:new ArrayBuffer(4*e.size)}},t}(Ni),Bi=ve.worker,Fi=function(e){function t(t){var i=e.call(this)||this;i._layout={};var r=0;return t.uniforms.forEach((function(e){var t=e.type;we.neverTranspose||e.type===o.EUniformType.MAT4&&(e.type=o.EUniformType.FLOAT4,e.num=4*(e.num||1));var n=void 0!==e.num?e.num:1,a=i._getLength(e.type),s=r+a*n;i._layout[e.name]=[e.type,r,n,a,t,!!e.needTranspose],r=s})),i._size=r,i._handle=Bi.createUniformBlockDescriptor(t)||{id:0},i}return te(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),t.prototype._getLength=function(e){var t=0;switch(e){case o.EUniformType.FLOAT:t=1;break;case o.EUniformType.FLOAT2:t=2;break;case o.EUniformType.FLOAT3:t=3;break;case o.EUniformType.FLOAT4:t=4;case o.EUniformType.MAT2:t=4;break;case o.EUniformType.MAT3:t=9;break;case o.EUniformType.MAT4:t=16;break;case o.EUniformType.SAMPLER:t=1}return t},t.prototype.hasKey=function(e){return void 0!==this._layout[e]},t.prototype.setUniform=function(e,t,i,r){var n=this._layout[e];if(n){var a=n[0],s=n[1];switch(a){case o.EUniformType.FLOAT:case o.EUniformType.FLOAT2:case o.EUniformType.FLOAT3:case o.EUniformType.FLOAT4:case o.EUniformType.MAT2:case o.EUniformType.MAT3:case o.EUniformType.MAT4:this._setFloatArray(s,t,i);break;case o.EUniformType.SAMPLER:this._setTexture(s,t,r)}}},t.prototype._setFloatArray=function(e,t,i){i.set(t,e)},t.prototype._setTexture=function(e,t,i){i[e]=t},t.prototype.getUniform=function(e,t,i){var r=this._layout[e];if(!r)return null;var n=r[0],a=r[1],s=r[2],l=r[3];switch(n){case o.EUniformType.FLOAT:case o.EUniformType.FLOAT2:case o.EUniformType.FLOAT3:case o.EUniformType.FLOAT4:case o.EUniformType.MAT2:case o.EUniformType.MAT3:case o.EUniformType.MAT4:return new Float32Array(t.buffer,4*a,s*l);case o.EUniformType.SAMPLER:return i[a]}},t.prototype._getFloatOffset=function(e){var t=this._layout[e];return t?t[1]:-1},t}(Ae),Ui=ve.worker,Wi=function(e){function t(t,i){void 0===i&&(i=!1);var r=e.call(this)||this;return r._handle=Ui.createIndexBuffer(t,i)||{id:0},r._byteSize=t.byteLength,r}return te(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){Ui.updateIndexBuffer(this.__handle,e,t)},t}(Ae),Gi=ve.worker,Vi=function(e){function t(t){var i=e.call(this)||this;return i._handle=Gi.createIndexData(t),i}return te(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Ae),ji=ve.worker,Hi=function(e){function t(t,i){var r=e.call(this)||this;return r._handle=ji.createVertexBuffer(t,i.__handle)||{id:0},r._layout=i,r._byteSize=t.byteLength,r}return te(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){ji.updateVertexBuffer(this.__handle,e,t)},t}(Ae),zi=ve.worker,Yi=function(e){function t(t,i,r){var n=e.call(this)||this;return n._handle=zi.createVertexData(t.__handle,i,r.__handle),n._layout=t,n}return te(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(Ae),$i=ve.worker,qi=function(e){function t(t){var i=e.call(this)||this;return i._attributes={},i._usages={},i._options=t,t.attributes.forEach((function(e){i._attributes[e.name]=e,i._usages[e.usage]=e})),i._handle=$i.createVertexLayout(t),i}return te(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._options.stride},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this._attributes[e]},t.prototype.getConfigByUsage=function(e){return this._usages[e]},t}(Ae),Qi=ve.worker,Zi=function(e){function t(t){var i=e.call(this)||this;return i._options=t,i._handle=Qi.createVertexDataDescriptor(t),i}return te(t,e),t}(Ae),Ki=ve.worker,Xi=function(e){function t(t){var i=e.call(this)||this;return i._handle=Ki.createView(t),i}return te(t,e),t}(Ae),Ji=ve.worker,er=function(e){function t(t){var i=e.call(this)||this;return i._size=0,i._index=0,i._onBackendEnlarge=function(){i._resized()},i._handle=Ji.createScalableList(t,i._onBackendEnlarge),i._resized(),i}return te(t,e),Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataView",{get:function(){return this._u32View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"usedSize",{get:function(){return this._sizeView[0]>this.size?this.size:this._sizeView[0]},set:function(e){this._sizeView[0]=e},enumerable:!1,configurable:!0}),t.prototype.enlarge=function(e){this._handle.enlarge(),this._resized()},t.prototype.begin=function(){this._index=0},t.prototype.add=function(e,t){this._index===this._size&&this.enlarge(),this._u32View[this._index++]=e},t.prototype.end=function(){this._sizeView[0]=this._index},t.prototype.reset=function(){this._sizeView[0]=0},t.prototype._resized=function(){var e=this.__handle.data.byteLength/4-1;this._u32View=new Uint32Array(this.__handle.data,4),this._sizeView=new Uint32Array(this.__handle.data,0,1),this._size=e},t}(Ae),tr=ve.worker,ir=ve.IS_VALID,rr=ve.GET_MAIN_CANVAS,nr=ve.Image,ar=tr.downloader,or=tr.createWeakRef,sr=tr.createWeakRefSentry,lr=tr.createNativeUUMap,ur=tr.createNativeSUMap,cr=tr.createNativeULUMap,dr=tr.loadTTFFont,hr=tr.getGlyphInfo,pr=tr.refreshNodesWorldTransform;var fr=tr.eventBridge,gr={bindEntityToBone:fr.bindEntityToBone.bind(fr),unbindEntityFromBone:fr.unbindEntityFromBone.bind(fr),bindEntitiesToBones:fr.bindEntitiesToBones.bind(fr),unbindEntitiesFromBones:fr.unbindEntitiesFromBones.bind(fr)},_r=void 0,mr=void 0!==(_r="undefined"!=typeof window&&window.top?window.top.NativeGlobal:"undefined"!=typeof NativeGlobal?NativeGlobal:null==wx?void 0:wx.NativeGlobal)&&_r.Puppet,vr=void 0!==_r&&_r.Phys3D;o.AnimationClipBinding=ot,o.AnimationClipModel=nt,o.AnimatorComponent=xe,o.AnimatorControllerModel=lt,o.AnimatorControllerStateModel=ct,o.CAMERA_OFFSETS=G,o.CULLING_OFFSETS=W,o.CameraComponent=De,o.CullingComponent=We,o.DYNAMIC_BONES_OFFSETS=$,o.DataBuffer=dt,o.DataModel=rt,o.Downloader=ar,o.DynamicBonesComponent=$e,o.EFFECT_OFFSETS=H,o.ENTITY2D_OFFSETS=F,o.ENTITY3D_OFFSETS=U,o.Effect=Si,o.Entity2D=Ze,o.Entity3D=tt,o.GET_MAIN_CANVAS=rr,o.IS_VALID=ir,o.Image=nr,o.IndexBuffer=Wi,o.IndexData=Vi,o.LIGHT_OFFSETS=V,o.LightCameraComponent=Oe,o.MATERIAL_OFFSETS=z,o.MESH_OFFSETS=j,o.Material=xi,o.MeshRendererComponent=Ve,o.POOL_SUB_ID_MASK=B,o.POOL_SUB_ID_SHIT=6,o.Phys3D=vr,o.Puppet=mr,o.RENDER_ENV_OFFSETS=L,o.RenderEnv=Ee,o.RenderPass=Di,o.SKINNED_SKELETON_OFFSETS=Y,o.ScalableList=er,o.SkeletonBoneInverseModel=Ri,o.SkinnedSkeletonComponent=ze,o.Texture=ki,o.UniformBlock=Ni,o.UniformDescriptor=Fi,o.VERSION="1.0.3",o.VertexBuffer=Hi,o.VertexData=Yi,o.VertexDataDescriptor=Zi,o.VertexLayout=qi,o.View=Xi,o.composeRawBufferEntity2D=function(e,t,i){var r=new ArrayBuffer(4*F.size),n=new Float32Array(r);return n[F.rotation]=e,n[F.position]=t[0],n[F.position+1]=t[1],n[F.scale]=i[0],n[F.scale+1]=i[1],n},o.composeRawBufferEntity3D=function(e,t,i,r){var n=new ArrayBuffer(4*(U.size-16)),a=new Uint32Array(n),o=new Float32Array(n);return a[U.rotationType]=e?0:1,o.set(t,U.rotation),o.set(i,U.position),o.set(r,U.scale),o},o.composeRawBufferEntity3DWhole=function(e,t,i,r){var n=new ArrayBuffer(4*U.size),a=new Uint32Array(n),o=new Float32Array(n);return a[U.rotationType]=e?0:1,o.set(t,U.rotation),o.set(i,U.position),o.set(r,U.scale),o},o.createNativeSUMap=ur,o.createNativeULUMap=cr,o.createNativeUUMap=lr,o.createWeakRef=or,o.createWeakRefSentry=sr,o.crossContext=Ce,o.debugPrint=function(e){},o.eventBridge=gr,o.getGlyphInfo=hr,o.loadTTFFont=dr,o.refreshNodesWorldTransform=pr,o.renderEnv=we,o.setNodeName=function(e,t){},o.setRenderComponentName=function(e,t){},o.update=function(e){Ce.flush(),tr.update(e)},Object.defineProperty(o,"__esModule",{value:!0})})),o[t]=l,l}})),(()=>{var e={926:(e,t,i)=>{var r,n=i(947).Z,a="undefined"!=typeof __Function__?__Function__:globalThis.Function;e.exports=function(){return r||(r=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="./entry.js")}({"./entry.js":function(e,t,i){(function(t){var r=i("./node_modules/protocol-buffers/index.js"),a=i("./node_modules/protocol-buffers-encodings/index.js"),o=i("./node_modules/varint/index.js"),s=function(e,t){var i=new Uint8Array(8),r=t,n=0,a=0,o=0;do{a|=(127&e[r])<<o,(o+=7)>=8&&(i[n]=255&a,a>>=8,o-=8,n++)}while(e[r++]>=128);return i[n]=255&a,s.bytes=r-t,i};function l(e,t){for(var i=0,r=t;r<e.length;r++){if(!(128&e[r]))return i+1;i++}return i}var u,c,d=function(e,t,i,r){return t.bytes=i.bytes=0,{type:e,encode:t,decode:i,encodingLength:r}};a.uint64=(u=function(e,t){var i=l(e,t);if(i>=7&&n.decodeUint64Array){e=s(e,t);var r=n.decodeUint64Array(e);u.bytes=i}else r=o.decode(e,t),u.bytes=o.decode.bytes;return r},c=o.encode,d(0,c,u,(function(e){return e<0?10:o.encodingLength(e)}))),a.int64=function(){var e=function(i,r){if(((c=o.decode(i,r))>Number.MAX_SAFE_INTEGER||c<Number.MIN_SAFE_INTEGER)&&n.decodeUint64Array){var a=l(i,r),u=10==a;u&&(i[9+r]=127&i[9+r]),i=s(i,r);var c=n.decodeUint64Array(i);return e.bytes=a,u?"-"+c:c}if(c>=Math.pow(2,63)){for(var d=9;255===i[r+d-1];)d--;var h=new t(d=d||9);i.copy(h,0,r,r+d),h[d-1]=127&h[d-1],c=-1*o.decode(h,0),e.bytes=10}else e.bytes=o.decode.bytes;return c},i=function(e,t,r){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw new Error("number too large, not supported yet");if(e<0){var n=r+9;for(o.encode(-1*e,t,r),t[r+=o.encode.bytes-1]=128|t[r];r<n-1;)t[++r]=255;t[n]=1,i.bytes=10}else o.encode(e,t,r),i.bytes=o.encode.bytes;return t};return d(0,i,e,(function(e){return e<0?10:o.encodingLength(e)}))}(),e.exports=function(e){var i=r(e);return Object.keys(i).forEach((function(e){var r;i[e].decode&&(i[e].decode=(r=i[e].decode,function e(i){"[object Uint8Array]"==Object.prototype.toString.call(i)&&i.__proto__!=t.__proto__&&(i.__proto__=t.prototype);var n=r.apply(this,arguments);return e.bytes=r.bytes,n}))})),i},e.exports.fixBuffer=function(e){return"[object Uint8Array]"==Object.prototype.toString.call(e)&&e.__proto__!=t.__proto__&&(e.__proto__=t.prototype),e}}).call(this,i("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,i){"use strict";t.byteLength=function(e){var t=u(e),i=t[0],r=t[1];return 3*(i+r)/4-r},t.toByteArray=function(e){var t,i,r=u(e),o=r[0],s=r[1],l=new a(function(e,t,i){return 3*(t+i)/4-i}(0,o,s)),c=0,d=s>0?o-4:o;for(i=0;i<d;i+=4)t=n[e.charCodeAt(i)]<<18|n[e.charCodeAt(i+1)]<<12|n[e.charCodeAt(i+2)]<<6|n[e.charCodeAt(i+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=n[e.charCodeAt(i)]<<2|n[e.charCodeAt(i+1)]>>4,l[c++]=255&t);1===s&&(t=n[e.charCodeAt(i)]<<10|n[e.charCodeAt(i+1)]<<4|n[e.charCodeAt(i+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,i=e.length,n=i%3,a=[],o=16383,s=0,l=i-n;s<l;s+=o)a.push(c(e,s,s+o>l?l:s+o));1===n?(t=e[i-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[i-2]<<8)+e[i-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");return-1===i&&(i=t),[i,i===t?0:4-i%4]}function c(e,t,i){for(var n,a,o=[],s=t;s<i;s+=3)n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=n)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,i){"use strict";(function(e){var r=i("./node_modules/base64-js/index.js"),n=i("./node_modules/ieee754/index.js"),a=i("./node_modules/isarray/index.js");function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,i);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,i)}function u(e,t,i,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,i,r){if(t.byteLength,i<0||t.byteLength<i)throw new RangeError("'offset' is out of bounds");if(t.byteLength<i+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===i&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,i):new Uint8Array(t,i,r);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=h(e,t);return e}(e,t,i,r):"string"==typeof t?function(e,t,i){"string"==typeof i&&""!==i||(i="utf8");if(!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(t,i),n=(e=s(e,r)).write(t,i);n!==r&&(e=e.slice(0,n));return e}(e,t,i):function(e,t){if(l.isBuffer(t)){var i=0|p(t.length);return 0===(e=s(e,i)).length||t.copy(e,0,0,i),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<t;++i)e[i]=0;return e}function h(e,t){var i=t.length<0?0:0|p(t.length);e=s(e,i);for(var r=0;r<i;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var i=e.length;if(0===i)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return V(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,i){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return D(this,t,i);case"utf8":case"utf-8":return S(this,t,i);case"ascii":return x(this,t,i);case"latin1":case"binary":return P(this,t,i);case"base64":return C(this,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,i);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,i){var r=e[t];e[t]=e[i],e[i]=r}function m(e,t,i,r,n){if(0===e.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=n?0:e.length-1),i<0&&(i=e.length+i),i>=e.length){if(n)return-1;i=e.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:v(e,t,i,r,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,i):Uint8Array.prototype.lastIndexOf.call(e,t,i):v(e,[t],i,r,n);throw new TypeError("val must be string, number or Buffer")}function v(e,t,i,r,n){var a,o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,i/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var c=-1;for(a=i;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(i+l>s&&(i=s-l),a=i;a>=0;a--){for(var d=!0,h=0;h<l;h++)if(u(e,a+h)!==u(t,h)){d=!1;break}if(d)return a}return-1}function y(e,t,i,r){i=Number(i)||0;var n=e.length-i;r?(r=Number(r))>n&&(r=n):r=n;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[i+o]=s}return o}function A(e,t,i,r){return j(G(t,e.length-i),e,i,r)}function b(e,t,i,r){return j(function(e){for(var t=[],i=0;i<e.length;++i)t.push(255&e.charCodeAt(i));return t}(t),e,i,r)}function E(e,t,i,r){return b(e,t,i,r)}function w(e,t,i,r){return j(V(t),e,i,r)}function T(e,t,i,r){return j(function(e,t){for(var i,r,n,a=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(i=e.charCodeAt(o))>>8,n=i%256,a.push(n),a.push(r);return a}(t,e.length-i),e,i,r)}function C(e,t,i){return 0===t&&i===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,i))}function S(e,t,i){i=Math.min(e.length,i);for(var r=[],n=t;n<i;){var a,o,s,l,u=e[n],c=null,d=u>239?4:u>223?3:u>191?2:1;if(n+d<=i)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(a=e[n+1]))&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[n+1],o=e[n+2],128==(192&a)&&128==(192&o)&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[n+1],o=e[n+2],s=e[n+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),n+=d}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var i="",r=0;for(;r<t;)i+=String.fromCharCode.apply(String,e.slice(r,r+=I));return i}(r)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,i){return u(null,e,t,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,i){return function(e,t,i,r){return c(t),t<=0?s(e,t):void 0!==i?"string"==typeof r?s(e,t).fill(i,r):s(e,t).fill(i):s(e,t)}(null,e,t,i)},l.allocUnsafe=function(e){return d(null,e)},l.allocUnsafeSlow=function(e){return d(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var i=e.length,r=t.length,n=0,a=Math.min(i,r);n<a;++n)if(e[n]!==t[n]){i=e[n],r=t[n];break}return i<r?-1:r<i?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var i;if(void 0===t)for(t=0,i=0;i<e.length;++i)t+=e[i].length;var r=l.allocUnsafe(t),n=0;for(i=0;i<e.length;++i){var o=e[i];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",i=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,i,r,n){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===i&&(i=e?e.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),t<0||i>e.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=i)return 0;if(r>=n)return-1;if(t>=i)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(t>>>=0),s=Math.min(a,o),u=this.slice(r,n),c=e.slice(t,i),d=0;d<s;++d)if(u[d]!==c[d]){a=u[d],o=c[d];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,i){return-1!==this.indexOf(e,t,i)},l.prototype.indexOf=function(e,t,i){return m(this,e,t,i,!0)},l.prototype.lastIndexOf=function(e,t,i){return m(this,e,t,i,!1)},l.prototype.write=function(e,t,i,r){if(void 0===t)r="utf8",i=this.length,t=0;else if(void 0===i&&"string"==typeof t)r=t,i=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(i)?(i|=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}var n=this.length-t;if((void 0===i||i>n)&&(i=n),e.length>0&&(i<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return y(this,e,t,i);case"utf8":case"utf-8":return A(this,e,t,i);case"ascii":return b(this,e,t,i);case"latin1":case"binary":return E(this,e,t,i);case"base64":return w(this,e,t,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,i);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function x(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(127&e[n]);return r}function P(e,t,i){var r="";i=Math.min(e.length,i);for(var n=t;n<i;++n)r+=String.fromCharCode(e[n]);return r}function D(e,t,i){var r=e.length;(!t||t<0)&&(t=0),(!i||i<0||i>r)&&(i=r);for(var n="",a=t;a<i;++a)n+=W(e[a]);return n}function R(e,t,i){for(var r=e.slice(t,i),n="",a=0;a<r.length;a+=2)n+=String.fromCharCode(r[a]+256*r[a+1]);return n}function O(e,t,i){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>i)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,i,r,n,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(i+r>e.length)throw new RangeError("Index out of range")}function M(e,t,i,r){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-i,2);n<a;++n)e[i+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function N(e,t,i,r){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-i,4);n<a;++n)e[i+n]=t>>>8*(r?n:3-n)&255}function L(e,t,i,r,n,a){if(i+r>e.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function B(e,t,i,r,a){return a||L(e,0,i,4),n.write(e,t,i,r,23,4),i+4}function F(e,t,i,r,a){return a||L(e,0,i,8),n.write(e,t,i,r,52,8),i+8}l.prototype.slice=function(e,t){var i,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else{var n=t-e;i=new l(n,void 0);for(var a=0;a<n;++a)i[a]=this[a+e]}return i},l.prototype.readUIntLE=function(e,t,i){e|=0,t|=0,i||O(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r},l.prototype.readUIntBE=function(e,t,i){e|=0,t|=0,i||O(e,t,this.length);for(var r=this[e+--t],n=1;t>0&&(n*=256);)r+=this[e+--t]*n;return r},l.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,i){e|=0,t|=0,i||O(e,t,this.length);for(var r=this[e],n=1,a=0;++a<t&&(n*=256);)r+=this[e+a]*n;return r>=(n*=128)&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,i){e|=0,t|=0,i||O(e,t,this.length);for(var r=t,n=1,a=this[e+--r];r>0&&(n*=256);)a+=this[e+--r]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var i=this[e]|this[e+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var i=this[e+1]|this[e]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=1,a=0;for(this[t]=255&e;++a<i&&(n*=256);)this[t+a]=e/n&255;return t+i},l.prototype.writeUIntBE=function(e,t,i,r){(e=+e,t|=0,i|=0,r)||k(this,e,t,i,Math.pow(2,8*i)-1,0);var n=i-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+i},l.prototype.writeUInt8=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var a=0,o=1,s=0;for(this[t]=255&e;++a<i&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},l.prototype.writeIntBE=function(e,t,i,r){if(e=+e,t|=0,!r){var n=Math.pow(2,8*i-1);k(this,e,t,i,n-1,-n)}var a=i-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+i},l.prototype.writeInt8=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,i){return e=+e,t|=0,i||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,i){return B(this,e,t,!0,i)},l.prototype.writeFloatBE=function(e,t,i){return B(this,e,t,!1,i)},l.prototype.writeDoubleLE=function(e,t,i){return F(this,e,t,!0,i)},l.prototype.writeDoubleBE=function(e,t,i){return F(this,e,t,!1,i)},l.prototype.copy=function(e,t,i,r){if(i||(i=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-i&&(r=e.length-t+i);var n,a=r-i;if(this===e&&i<t&&t<r)for(n=a-1;n>=0;--n)e[n+t]=this[n+i];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+i];else Uint8Array.prototype.set.call(e,this.subarray(i,i+a),t);return a},l.prototype.fill=function(e,t,i,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<i)throw new RangeError("Out of range index");if(i<=t)return this;var a;if(t>>>=0,i=void 0===i?this.length:i>>>0,e||(e=0),"number"==typeof e)for(a=t;a<i;++a)this[a]=e;else{var o=l.isBuffer(e)?e:G(new l(e,r).toString()),s=o.length;for(a=0;a<i-t;++a)this[a+t]=o[a%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var i;t=t||1/0;for(var r=e.length,n=null,a=[],o=0;o<r;++o){if((i=e.charCodeAt(o))>55295&&i<57344){if(!n){if(i>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}n=i;continue}if(i<56320){(t-=3)>-1&&a.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,i<128){if((t-=1)<0)break;a.push(i)}else if(i<2048){if((t-=2)<0)break;a.push(i>>6|192,63&i|128)}else if(i<65536){if((t-=3)<0)break;a.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return a}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,i,r){for(var n=0;n<r&&!(n+i>=t.length||n>=e.length);++n)t[n+i]=e[n];return n}}).call(this,i("./node_modules/webpack/buildin/global.js"))},"./node_modules/generate-function/index.js":function(e,t,i){for(var r=i("./node_modules/util/util.js"),n=i("./node_modules/is-property/is-property.js"),o=/[\{\[]/,s=/[\}\]]/,l=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],u={},c=0;c<l.length;c++)u[l[c]]=!0;var d=function(e){return n(e)&&!u.hasOwnProperty(e)},h={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}},p=function(){var e=[],t=0,i={},l=function(i){for(var r="";r.length<2*t;)r+="  ";e.push(r+i)},u=function(e){return s.test(e.trim()[0])&&o.test(e[e.length-1])?(t--,l(e),void t++):o.test(e[e.length-1])?(l(e),void t++):s.test(e.trim()[0])?(t--,void l(e)):void l(e)},c=function(e){if(!e)return c;if(1===arguments.length&&e.indexOf("\n")>-1)for(var t=e.trim().split("\n"),i=0;i<t.length;i++)u(t[i].trim());else u(r.format.apply(r,arguments));return c};return c.scope={},c.formats=h,c.sym=function(e){return e&&d(e)||(e="tmp"),i[e]||(i[e]=0),e+(i[e]++||"")},c.property=function(e,t){return 1===arguments.length&&(t=e,e=""),n(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},c.toString=function(){return e.join("\n")},c.toFunction=function(t){t||(t={});var i="return ("+e.join("\n")+")";Object.keys(c.scope).forEach((function(e){t[e]||(t[e]=c.scope[e])}));var r=Object.keys(t).map((function(e){return e})),n=r.map((function(e){return t[e]}));return a.apply(null,r.concat(i)).apply(null,n)},arguments.length&&c.apply(null,arguments),c};p.formats=h,e.exports=p},"./node_modules/generate-object-property/index.js":function(e,t,i){var r=i("./node_modules/is-property/is-property.js"),n=function(e,t){return r(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};n.valid=r,n.property=function(e){return r(e)?e:JSON.stringify(e)},e.exports=n},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,i,r,n){var a,o,s=8*n-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=i?n-1:0,h=i?-1:1,p=e[t+d];for(d+=h,a=p&(1<<-c)-1,p>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=u}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,i,r,n,a){var o,s,l,u=8*a-n-1,c=(1<<u)-1,d=c>>1,h=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,f=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,n),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,n),o=0));n>=8;e[i+p]=255&s,p+=f,s/=256,n-=8);for(o=o<<n|s,u+=n;u>0;e[i+p]=255&o,p+=f,o/=256,u-=8);e[i+p-f]|=128*g}},"./node_modules/is-property/is-property.js":function(e,t,i){"use strict";e.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},"./node_modules/isarray/index.js":function(e,t){var i={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==i.call(e)}},"./node_modules/os-browserify/browser.js":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"./node_modules/process/browser.js":function(e,t){var i,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var l,u=[],c=!1,d=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):d=-1,u.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++d<t;)l&&l[d].run();d=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"./node_modules/protocol-buffers-encodings/index.js":function(e,t,i){(function(e){var r=i("./node_modules/varint/index.js"),n=i("./node_modules/signed-varint/index.js");function a(e,t,i,r){return t.bytes=i.bytes=0,{type:e,encode:t,decode:i,encodingLength:r}}function o(t){return e.isBuffer(t)?t.length:e.byteLength(t)}t.make=a,t.name=function(e){for(var i=Object.keys(t),r=0;r<i.length;r++)if(t[i[r]]===e)return i[r];return null},t.skip=function(e,t,i){switch(e){case 0:return r.decode(t,i),i+r.decode.bytes;case 1:return i+8;case 2:var n=r.decode(t,i);return i+r.decode.bytes+n;case 3:case 4:throw new Error("Groups are not supported");case 5:return i+4}throw new Error("Unknown wire type: "+e)},t.bytes=a(2,(function t(i,n,a){var s=a,l=o(i);return r.encode(l,n,a),a+=r.encode.bytes,e.isBuffer(i)?i.copy(n,a):n.write(i,a,l),t.bytes=(a+=l)-s,n}),(function e(t,i){var n=i,a=r.decode(t,i);i+=r.decode.bytes;var o=t.slice(i,i+a);return i+=o.length,e.bytes=i-n,o}),(function(e){var t=o(e);return r.encodingLength(t)+t})),t.string=a(2,(function t(i,n,a){var o=a,s=e.byteLength(i);return r.encode(s,n,a,"utf-8"),a+=r.encode.bytes,n.write(i,a,s),t.bytes=(a+=s)-o,n}),(function e(t,i){var n=i,a=r.decode(t,i);i+=r.decode.bytes;var o=t.toString("utf-8",i,i+a);return e.bytes=(i+=a)-n,o}),(function(t){var i=e.byteLength(t);return r.encodingLength(i)+i})),t.bool=a(0,(function e(t,i,r){return i[r]=t?1:0,e.bytes=1,i}),(function e(t,i){var r=t[i]>0;return e.bytes=1,r}),(function(){return 1})),t.int32=a(0,(function e(t,i,n){return r.encode(t<0?t+4294967296:t,i,n),e.bytes=r.encode.bytes,i}),(function e(t,i){var n=r.decode(t,i);return e.bytes=r.decode.bytes,n>2147483647?n-4294967296:n}),(function(e){return r.encodingLength(e<0?e+4294967296:e)})),t.int64=a(0,(function e(t,i,n){if(t<0){var a=n+9;for(r.encode(-1*t,i,n),i[n+=r.encode.bytes-1]=128|i[n];n<a-1;)i[++n]=255;i[a]=1,e.bytes=10}else r.encode(t,i,n),e.bytes=r.encode.bytes;return i}),(function t(i,n){var a=r.decode(i,n);if(a>=Math.pow(2,63)){for(var o=9;255===i[n+o-1];)o--;o=o||9;var s=e.allocUnsafe(o);i.copy(s,0,n,n+o),s[o-1]=127&s[o-1],a=-1*r.decode(s,0),t.bytes=10}else t.bytes=r.decode.bytes;return a}),(function(e){return e<0?10:r.encodingLength(e)})),t.sint32=t.sint64=a(0,n.encode,n.decode,n.encodingLength),t.uint32=t.uint64=t.enum=t.varint=a(0,r.encode,r.decode,r.encodingLength),t.fixed64=t.sfixed64=a(1,(function e(t,i,r){return t.copy(i,r),e.bytes=8,i}),(function e(t,i){var r=t.slice(i,i+8);return e.bytes=8,r}),(function(){return 8})),t.double=a(1,(function e(t,i,r){return i.writeDoubleLE(t,r),e.bytes=8,i}),(function e(t,i){var r=t.readDoubleLE(i);return e.bytes=8,r}),(function(){return 8})),t.fixed32=a(5,(function e(t,i,r){return i.writeUInt32LE(t,r),e.bytes=4,i}),(function e(t,i){var r=t.readUInt32LE(i);return e.bytes=4,r}),(function(){return 4})),t.sfixed32=a(5,(function e(t,i,r){return i.writeInt32LE(t,r),e.bytes=4,i}),(function e(t,i){var r=t.readInt32LE(i);return e.bytes=4,r}),(function(){return 4})),t.float=a(5,(function e(t,i,r){return i.writeFloatLE(t,r),e.bytes=4,i}),(function e(t,i){var r=t.readFloatLE(i);return e.bytes=4,r}),(function(){return 4}))}).call(this,i("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers-schema/index.js":function(e,t,i){var r=i("./node_modules/protocol-buffers-schema/parse.js"),n=i("./node_modules/protocol-buffers-schema/stringify.js");e.exports=r,e.exports.parse=r,e.exports.stringify=n},"./node_modules/protocol-buffers-schema/parse.js":function(e,t,i){var r=i("./node_modules/protocol-buffers-schema/tokenize.js"),n=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],a=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var i=e.shift();if("("===i&&(i=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[i]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},o=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var i=e.shift();t.required="required"===i,t.repeated="repeated"===i,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=a(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(o(e));break;case"enum":t.enums.push(f(e));break;case"message":t.messages.push(c(e));break;case"extensions":t.extensions=u(e);break;case"oneof":e.shift();var i=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=o(e);r.oneof=i,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(l(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;default:e.unshift("optional"),t.fields.push(o(e))}return t},l=function(e){return{name:e[1],message:c(e)}},u=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var i=e.shift();if("max"===i&&(i=536870911),i=Number(i),isNaN(i))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:i}},c=function(e){e.shift();var t=1,i=[],r={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),i=s(i),r.enums=i.enums,r.messages=i.messages,r.fields=i.fields,r.extends=i.extends,r.extensions=i.extensions,r.options=i.options,r;i.push(e.shift())}if(t)throw new Error("No closing tag for message")},d=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var i={value:null,options:{}};return i.value=Number(e.shift()),"["===e[0]&&(i.options=a(e)),e.shift(),{name:t,val:i}},f=function(e){e.shift();var t={},i={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),i;if("option"!==e[0]){var r=p(e);i.values[r.name]=r.val}else t=g(e),i.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,i=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:i};switch(e[0]){case"option":e.shift();var n="("===e[0];if(n&&e.shift(),t=e.shift(),n){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(i=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(i))throw new Error("Unexpected value for option optimize_for: "+i);"{"===i&&(i=_(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},_=function(e){for(var t=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},i={};e.length;){if("}"===e[0])return e.shift(),i;var r="("===e[0];r&&e.shift();var n=e.shift();if(r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var a=null;switch(e[0]){case":":if(void 0!==i[n])throw new Error("Duplicate option map key "+n);e.shift(),"{"===(a=t(e.shift()))&&(a=_(e)),i[n]=a,";"===e[0]&&e.shift();break;case"{":if(e.shift(),a=_(e),void 0===i[n]&&(i[n]=[]),!Array.isArray(i[n]))throw new Error("Duplicate option map key "+n);i[n].push(a);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},m=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},v=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var i=g(e);if(void 0!==t.options[i.name])throw new Error("Duplicate option "+i.name);t.options[i.name]=i.value;break;case"rpc":t.methods.push(y(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},y=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var i=g(e);if(void 0!==t.options[i.name])throw new Error("Duplicate option "+i.name);t.options[i.name]=i.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=r(e.toString()),i=0;i<t.length;i++){var a;if(/^("|')([^'"]*)$/.test(t[i]))for(a=1===t[i].length?i+1:i;a<t.length;a++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(t[a])){t=t.slice(0,i).concat(t.slice(i,a+1).join("")).concat(t.slice(a+1));break}}for(var o={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;t.length;){switch(t[0]){case"package":o.package=d(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");o.syntax=h(t);break;case"message":o.messages.push(c(t));break;case"enum":o.enums.push(f(t));break;case"option":var u=g(t);if(o.options[u.name])throw new Error("Duplicate option "+u.name);o.options[u.name]=u.value;break;case"import":o.imports.push(m(t));break;case"extend":o.extends.push(l(t));break;case"service":o.services||(o.services=[]),o.services.push(v(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return o.extends.forEach((function(e){o.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),o.messages.forEach((function(e){e.fields.forEach((function(t){var i,r,a,s;if(t.options&&"true"===t.options.packed&&-1===n.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((i=t.type.split(".")).length>2)throw new Error("what is this?");if(r=i[0],a=i[1],o.messages.some((function(e){if(e.name===r)return s=e,e})),s&&s.enums&&s.enums.some((function(e){return e.name===a})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),o}},"./node_modules/protocol-buffers-schema/stringify.js":function(e,t){var i=function(e,t){var i=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(i="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(i="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((i?i+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},r=function(e,t){t.push("message "+e.name+" {"),e.options||(e.options={}),o(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){t.push(n(e,[]))})),e.messages||(e.messages=[]),e.messages.forEach((function(e){t.push(r(e,[]))}));var a={};return e.fields||(e.fields=[]),e.fields.forEach((function(e){e.oneof?(a[e.oneof]||(a[e.oneof]=[]),a[e.oneof].push(i(e,[]))):t.push(i(e,[]))})),Object.keys(a).forEach((function(e){a[e].unshift("oneof "+e+" {"),a[e].push("}"),t.push(a[e])})),t.push("}",""),t},n=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var i=o(e.options,[]);return i.length>1&&t.push(i.slice(0,-1)),Object.keys(e.values).map((function(i){var r=a(e.values[i]);t.push([i+" = "+r+";"])})),t.push("}",""),t},a=function(e,t){var i=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return i&&(i=" ["+i+"]"),e.value+i},o=function(e,t){var i=Object.keys(e);return i.forEach((function(i){var r=e[i];~i.indexOf(".")&&(i="("+i+")");var n=typeof r;"object"===n?(r=s(r,[])).length&&t.push("option "+i+" = {",r,"};"):("string"===n&&"optimize_for"!==i&&(r='"'+r+'"'),t.push("option "+i+" = "+r+";"))})),i.length>0&&t.push(""),t},s=function(e,t){return Object.keys(e).forEach((function(i){var r=e[i],n=typeof r;"object"===n?Array.isArray(r)?r.forEach((function(e){(e=s(e,[])).length&&t.push(i+" {",e,"}")})):(r=s(r,[])).length&&t.push(i+" {",r,"}"):("string"===n&&(r='"'+r+'"'),t.push(i+": "+r))})),t},l=function(e,t){var i="rpc "+e.name+"(";e.client_streaming&&(i+="stream "),i+=e.input_type+") returns (",e.server_streaming&&(i+="stream "),i+=e.output_type+")",e.options||(e.options={});var r=o(e.options,[]);return r.length>1?t.push(i+" {",r.slice(0,-1),"}"):t.push(i+";"),t},u=function(e){return function(t){return Array.isArray(t)?t.map(u(e+"  ")).join("\n"):e+t}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),o(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){n(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){r(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),o(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(l(e,[]))})),t.push("}","")}(e,t)})),t.map(u("")).join("\n")}},"./node_modules/protocol-buffers-schema/tokenize.js":function(e,t){e.exports=function(e){var t,i=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(i).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(i).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},"./node_modules/protocol-buffers/compile-to-js.js":function(e,t,i){var r=i("./node_modules/os-browserify/browser.js"),n={type:!0,message:!0,name:!0,buffer:!0,encode:!0,decode:!0,encodingLength:!0,dependencies:!0};function a(e){return"function"==typeof e.encode}e.exports=function(e){var t="";return t+="// This file is auto generated by the protocol-buffers compiler"+r.EOL,t+=r.EOL,t+="/* eslint-disable quotes */"+r.EOL,t+="/* eslint-disable indent */"+r.EOL,t+="/* eslint-disable no-redeclare */"+r.EOL,t+="/* eslint-disable camelcase */"+r.EOL,t+=r.EOL,t+="// Remember to `npm install --save protocol-buffers-encodings`"+r.EOL,t+="var encodings = require('protocol-buffers-encodings')"+r.EOL,t+="var varint = encodings.varint"+r.EOL,t+="var skip = encodings.skip"+r.EOL,t+=r.EOL,function e(i,s,l){var u=Object.keys(i).filter((function(e){return!n[e]&&a(i[e])}));Object.keys(i).filter((function(e){if(n[e])return false;return!a(i[e])})).forEach((function(e){t+=l+s+"."+e+" = "+function(e,t){var i=Object.keys(e);if(!i.every((function(t){return"number"==typeof e[t]&&/^[a-z][a-z0-9]+$/i.test(t)})))return JSON.stringify(e,null,2).replace(/\n/g,r.EOL)+r.EOL;var n="{"+r.EOL;return i.forEach((function(a,o){n+=t+"  "+a+": "+e[a]+(o<i.length-1?",":"")+r.EOL})),n+t+"}"+r.EOL}(i[e],l)+r.EOL})),u.forEach((function(e){t+=l+"var "+e+" = "+s+"."+e+" = {"+r.EOL,t+=l+"  buffer: true,"+r.EOL,t+=l+"  encodingLength: null,"+r.EOL,t+=l+"  encode: null,"+r.EOL,t+=l+"  decode: null"+r.EOL,t+=l+"}"+r.EOL,t+=r.EOL})),u.forEach((function(e){t+=l+"define"+e+"()"+r.EOL})),u.length&&(t+=r.EOL);u.forEach((function(n){t+=l+"function define"+n+" () {"+r.EOL,e(i[n],n,l+"  "),t+=l+"  "+n+".encodingLength = encodingLength"+r.EOL,t+=l+"  "+n+".encode = encode"+r.EOL,t+=l+"  "+n+".decode = decode"+r.EOL+r.EOL,t+=l+"  "+o(i[n].encodingLength,l+"  ")+r.EOL+r.EOL,t+=l+"  "+o(i[n].encode,l+"  ")+r.EOL+r.EOL,t+=l+"  "+o(i[n].decode,l+"  ")+r.EOL,t+=l+"}"+r.EOL+r.EOL}))}(e,"exports",""),t+=o(i("./node_modules/protocol-buffers/compile.js").defined,"")+r.EOL;function o(e,t){return e.toString().split("\n").map((function(e,i){return i?t+e:e.replace(/(function \w+)\(/,"$1 (")})).join("\n")}}},"./node_modules/protocol-buffers/compile.js":function(e,t,i){(function(t){var r=i("./node_modules/protocol-buffers-encodings/index.js"),n=i("./node_modules/varint/index.js"),a=i("./node_modules/generate-object-property/index.js"),o=i("./node_modules/generate-function/index.js"),s=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},l=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(e){return!1}}(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};e.exports=function(e,i,u){var c={},d={},h={},p=function(e,t){return u?(i=t[e],(n=r.name(i))?"encodings."+n:i.name?i.name:"encodings.enum"):"enc["+e+"]";var i,n},f=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,d[e.id]=e,f(e,e.id)})),e.messages&&e.messages.forEach((function(i){i.id=t+(t?".":"")+i.name,c[i.id]=i,i.fields.forEach((function(i){if(i.map){var r="Map_"+i.map.from+"_"+i.map.to,n={name:r,enums:[],messages:[],fields:[{name:"key",type:i.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:i.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+r};c[n.id]||(c[n.id]=n,e.messages.push(n)),i.type=r,i.repeated=!0}})),f(i,i.id)}))};f(e,"");var g=function(i,u){i.messages.forEach((function(e){u[e.name]=_(e.name,i.id)})),i.enums.forEach((function(e){u[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(i){t[i]=e[i].value})),t}(e.values)})),u.type=2,u.message=!0,u.name=i.name;var c={};i.fields.forEach((function(e){e.oneof&&(c[e.oneof]||(c[e.oneof]=[]),c[e.oneof].push(e.name))}));var d=i.fields.map((function(e){return _(e.type,i.id)})),h=d.filter((function(e,t){return d.indexOf(e)===t})),f=d.map((function(e){return h.indexOf(e)})),g=function(e){for(var t=0;t<d.length;t++)e(d[t],i.fields[t],a("obj",i.fields[t].name),t)},m=o()("function encodingLength (obj) {")("var length = 0");Object.keys(c).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),i=c[e].map((function(e){return"+defined("+a("obj",e)+")"})).join(" + ");m("if ((%s) > 1) throw new Error(%s)",i,t)})),g((function(e,t,i,r){var a=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,o=n.encodingLength(t.tag<<3|e.type);t.required?m("if (!defined(%s)) throw new Error(%s)",i,JSON.stringify(t.name+" is required")):m("if (defined(%s)) {",i),t.map&&(m()("var tmp = Object.keys(%s)",i)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",i)("}"),i="tmp"),a?(m()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",i)("if (!defined(%s)) continue",i+"[i]")("var len = %s.encodingLength(%s)",p(f[r],h),i+"[i]")("packedLen += len"),e.message&&m("packedLen += varint.encodingLength(len)"),m("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",o)("}")):(t.repeated&&(m("for (var i = 0; i < %s.length; i++) {",i),m("if (!defined(%s)) continue",i+="[i]")),m("var len = %s.encodingLength(%s)",p(f[r],h),i),e.message&&m("length += varint.encodingLength(len)"),m("length += %d + len",o),t.repeated&&m("}")),t.required||m("}")})),m()("return length")("}"),m=m.toFunction({defined:s,varint:n,enc:h});var v=o()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = Buffer.allocUnsafe(encodingLength(obj))")("var oldOffset = offset");Object.keys(c).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),i=c[e].map((function(e){return"+defined("+a("obj",e)+")"})).join(" + ");v("if ((%s) > 1) throw new Error(%s)",i,t)})),g((function(e,t,i,r){t.required?v("if (!defined(%s)) throw new Error(%s)",i,JSON.stringify(t.name+" is required")):v("if (defined(%s)) {",i);var a,o=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=n.encode(t.tag<<3|2),l=n.encode(t.tag<<3|e.type);if(t.map&&(v()("var tmp = Object.keys(%s)",i)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",i)("}"),i="tmp"),o){for(v()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",i)("if (!defined(%s)) continue",i+"[i]")("packedLen += %s.encodingLength(%s)",p(f[r],h),i+"[i]")("}"),v("if (packedLen) {"),a=0;a<l.length;a++)v("buf[offset++] = %d",s[a]);v("varint.encode(packedLen, buf, offset)"),v("offset += varint.encode.bytes"),v("}")}if(t.repeated&&(v("for (var i = 0; i < %s.length; i++) {",i),v("if (!defined(%s)) continue",i+="[i]")),!o)for(a=0;a<l.length;a++)v("buf[offset++] = %d",l[a]);e.message&&(v("varint.encode(%s.encodingLength(%s), buf, offset)",p(f[r],h),i),v("offset += varint.encode.bytes")),v("%s.encode(%s, buf, offset)",p(f[r],h),i),v("offset += %s.encode.bytes",p(f[r],h)),t.repeated&&v("}"),t.required||v("}")})),v()("encode.bytes = offset - oldOffset")("return buf")("}"),v=v.toFunction({encodingLength:m,defined:s,varint:n,enc:h,Buffer:t});var y,A=i.fields.map((function(e,t){return e.required&&"!found"+t})).filter((function(e){return e})).join(" || "),b=o(),E=[];return g((function(e,t){var r=t.options&&t.options.default,n=_(t.type,i.id,!1),o=n&&n.values;o?t.repeated?E.push(a.property(t.name)+": []"):(r=r&&o[r]?o[r].value:o[Object.keys(o)[0]].value,E.push(a.property(t.name)+": "+parseInt(r||0,10))):E.push(a.property(t.name)+": "+l(t,r))})),E=E.filter((y={},function(e){return!y.hasOwnProperty(e)&&(y[e]=!0,!0)})),b()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),E.forEach((function(e,t){b(e+(t===E.length-1?"":","))})),b("}"),g((function(e,t,i,r){t.required&&b("var found%d = false",r)})),b("while (true) {")("if (end <= offset) {")(A&&'if (%s) throw new Error("Decoded message is not valid")',A)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),g((function(t,r,n,o){var s=r.repeated&&(r.options&&r.options.packed&&"false"!==r.options.packed||!(r.options&&"false"==r.options.packed)&&3==e.syntax&&("float"===r.type||"double"===r.type||-1!=r.type.indexOf("int")));b("case %d:",r.tag),r.oneof&&i.fields.forEach((function(e){e.oneof===r.oneof&&r.name!==e.name&&b("delete %s",a("obj",e.name))})),s&&b()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(b("var len = varint.decode(buf, offset)"),b("offset += varint.decode.bytes"),r.map?(b("var tmp = %s.decode(buf, offset, offset + len)",p(f[o],h)),b("%s[tmp.key] = tmp.value",n)):r.repeated?b("%s.push(%s.decode(buf, offset, offset + len))",n,p(f[o],h)):b("%s = %s.decode(buf, offset, offset + len)",n,p(f[o],h))):r.repeated?b("%s.push(%s.decode(buf, offset))",n,p(f[o],h)):b("%s = %s.decode(buf, offset)",n,p(f[o],h)),b("offset += %s.decode.bytes",p(f[o],h)),s&&b("}"),r.required&&b("found%d = true",o),b("break")})),b()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),b=b.toFunction({varint:n,skip:r.skip,enc:h}),v.bytes=b.bytes=0,u.buffer=!0,u.encode=v,u.decode=b,u.encodingLength=m,u.dependencies=h,u},_=function(e,t,a){if(i&&i[e])return i[e];if(r[e])return r[e];var s=(t?t+"."+e:e).split(".").map((function(t,i,r){return r.slice(0,i).concat(e).join(".")})).reverse().reduce((function(e,t){return e||c[t]||d[t]}),null);if(!1===a)return s;if(!s)throw new Error("Could not resolve "+e);return s.values?function(e){var t=Object.keys(e.values).map((function(t){return"val !== "+parseInt(e.values[t].value,10)})).join(" && ");t||(t="true");var i=o()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:n}),a=o()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:n});return r.make(0,i,a,n.encodingLength)}(s):h[s.id]?h[s.id]:(h[s.id]={},g(s,h[s.id]))};return(e.enums||[]).concat((e.messages||[]).map((function(e){return _(e.id)})))},e.exports.defined=s}).call(this,i("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers/index.js":function(e,t,i){(function(t){var r=i("./node_modules/protocol-buffers-schema/index.js"),n=i("./node_modules/protocol-buffers/compile.js"),a=i("./node_modules/protocol-buffers/compile-to-js.js");e.exports=function(e,i){if(i||(i={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var a="object"!=typeof e||t.isBuffer(e)?r.parse(e):e,o=function(){var e=this;n(a,i.encodings||{},i.inlineEnc).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(i){t[i]=e[i].value})),t}(t.values)||t}))};return o.prototype.toString=function(){return r.stringify(a)},o.prototype.toJSON=function(){return a},new o},e.exports.toJS=function(t){return a(e.exports(t,{inlineEnc:!0}))}}).call(this,i("./node_modules/buffer/index.js").Buffer)},"./node_modules/signed-varint/index.js":function(e,t,i){var r=i("./node_modules/varint/index.js");t.encode=function e(t,i,n){t=t>=0?2*t:-2*t-1;var a=r.encode(t,i,n);return e.bytes=r.encode.bytes,a},t.decode=function e(t,i){var n=r.decode(t,i);return e.bytes=r.decode.bytes,1&n?(n+1)/-2:n/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},"./node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},"./node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":function(e,t,i){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),i={},r=0;r<t.length;r++)i[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return i},n=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(s(arguments[i]));return t.join(" ")}i=1;for(var r=arguments,a=r.length,o=String(e).replace(n,(function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(e){return"[Circular]"}default:return e}})),l=r[i];i<a;l=r[++i])g(l)||!A(l)?o+=" "+l:o+=" "+s(l);return o},t.deprecate=function(i,r){if(void 0!==e&&!0===e.noDeprecation)return i;if(void 0===e)return function(){return t.deprecate(i,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),n=!0}return i.apply(this,arguments)}};var a,o={};function s(e,i){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),f(i)?r.showHidden=i:i&&t._extend(r,i),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=l),c(r,e,r.depth)}function l(e,t){var i=s.styles[t];return i?"["+s.colors[i][0]+"m"+e+"["+s.colors[i][1]+"m":e}function u(e,t){return e}function c(e,i,r){if(e.customInspect&&i&&w(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var n=i.inspect(r,e);return m(n)||(n=c(e,n,r)),n}var a=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(m(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(_(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,i);if(a)return a;var o=Object.keys(i),s=function(e){var t={};return e.forEach((function(e,i){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(i)),E(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(i);if(0===o.length){if(w(i)){var l=i.name?": "+i.name:"";return e.stylize("[Function"+l+"]","special")}if(y(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(b(i))return e.stylize(Date.prototype.toString.call(i),"date");if(E(i))return d(i)}var u,A="",T=!1,C=["{","}"];(p(i)&&(T=!0,C=["[","]"]),w(i))&&(A=" [Function"+(i.name?": "+i.name:"")+"]");return y(i)&&(A=" "+RegExp.prototype.toString.call(i)),b(i)&&(A=" "+Date.prototype.toUTCString.call(i)),E(i)&&(A=" "+d(i)),0!==o.length||T&&0!=i.length?r<0?y(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),u=T?function(e,t,i,r,n){for(var a=[],o=0,s=t.length;o<s;++o)x(t,String(o))?a.push(h(e,t,i,r,String(o),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(h(e,t,i,r,n,!0))})),a}(e,i,r,s,o):o.map((function(t){return h(e,i,r,s,t,T)})),e.seen.pop(),function(e,t,i){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(u,A,C)):C[0]+A+C[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function h(e,t,i,r,n,a){var o,s,l;if((l=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?s=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(s=e.stylize("[Setter]","special")),x(r,n)||(o="["+n+"]"),s||(e.seen.indexOf(l.value)<0?(s=g(i)?c(e,l.value,null):c(e,l.value,i-1)).indexOf("\n")>-1&&(s=a?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(o)){if(a&&n.match(/^\d+$/))return s;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function p(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function g(e){return null===e}function _(e){return"number"==typeof e}function m(e){return"string"==typeof e}function v(e){return void 0===e}function y(e){return A(e)&&"[object RegExp]"===T(e)}function A(e){return"object"==typeof e&&null!==e}function b(e){return A(e)&&"[object Date]"===T(e)}function E(e){return A(e)&&("[object Error]"===T(e)||e instanceof Error)}function w(e){return"function"==typeof e}function T(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(i){if(v(a)&&(a=e.env.NODE_DEBUG||""),i=i.toUpperCase(),!o[i])if(new RegExp("\\b"+i+"\\b","i").test(a)){var r=e.pid;o[i]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",i,r,e)}}else o[i]=function(){};return o[i]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=f,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=_,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=y,t.isObject=A,t.isDate=b,t.isError=E,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i("./node_modules/util/support/isBufferBrowser.js");var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function I(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=i("./node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!A(t))return e;for(var i=Object.keys(t),r=i.length;r--;)e[i[r]]=t[i[r]];return e};var P="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var i=new Error("Promise was rejected with a falsy value");i.reason=e,e=i}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(P&&e[P]){var t;if("function"!=typeof(t=e[P]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,i,r=new Promise((function(e,r){t=e,i=r})),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push((function(e,r){e?i(e):t(r)}));try{e.apply(this,n)}catch(e){i(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),P&&Object.defineProperty(t,P,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=P,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function i(){for(var i=[],r=0;r<arguments.length;r++)i.push(arguments[r]);var n=i.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var a=this,o=function(){return n.apply(a,arguments)};t.apply(this,i).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(D,t,o)}))}return Object.setPrototypeOf(i,Object.getPrototypeOf(t)),Object.defineProperties(i,r(t)),i}}).call(this,i("./node_modules/process/browser.js"))},"./node_modules/varint/decode.js":function(e,t){e.exports=function e(t,i){var r,n=0,a=0,o=i=i||0,s=t.length;do{if(o>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[o++],n+=a<28?(127&r)<<a:(127&r)*Math.pow(2,a),a+=7}while(r>=128);return e.bytes=o-i,n}},"./node_modules/varint/encode.js":function(e,t){e.exports=function e(t,r,n){r=r||[];var a=n=n||0;for(;t>=i;)r[n++]=255&t|128,t/=128;for(;-128&t;)r[n++]=255&t|128,t>>>=7;return r[n]=0|t,e.bytes=n-a+1,r};var i=Math.pow(2,31)},"./node_modules/varint/index.js":function(e,t,i){e.exports={encode:i("./node_modules/varint/encode.js"),decode:i("./node_modules/varint/decode.js"),encodingLength:i("./node_modules/varint/length.js")}},"./node_modules/varint/length.js":function(e,t){var i=Math.pow(2,7),r=Math.pow(2,14),n=Math.pow(2,21),a=Math.pow(2,28),o=Math.pow(2,35),s=Math.pow(2,42),l=Math.pow(2,49),u=Math.pow(2,56),c=Math.pow(2,63);e.exports=function(e){return e<i?1:e<r?2:e<n?3:e<a?4:e<o?5:e<s?6:e<l?7:e<u?8:e<c?9:10}},"./node_modules/webpack/buildin/global.js":function(e,t){var i;i=globalThis;try{i=i||new a("return this")()}catch(e){"object"==typeof window&&(i=window)}e.exports=i}})),r}},947:(e,t)=>{"use strict";var i="undefined"!=typeof NativeGlobal?NativeGlobal:{};t.Z=i},185:()=>{},942:()=>{},423:(e,t,i)=>{"use strict";e=i.hmd(e);var r,n={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};n.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(i,(function(e){return t[e]||e})):""}},r=globalThis,e.exports?e.exports=n:"function"==typeof define&&i.amdO?define((function(){return n})):r.doT=n;var a={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},o=/$^/;function s(e,t,i){return("string"==typeof t?t:t.toString()).replace(e.define||o,(function(t,r,n,a){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in i||(":"===n?(e.defineParams&&a.replace(e.defineParams,(function(e,t,n){i[r]={arg:t,text:n}})),r in i||(i[r]=a)):new Function("def","def['"+r+"']="+a)(i)),""})).replace(e.use||o,(function(t,r){e.useParams&&(r=r.replace(e.useParams,(function(e,t,r,n){if(i[r]&&i[r].arg&&n){var a=(r+":"+n).replace(/'|\\/g,"_");return i.__exp=i.__exp||{},i.__exp[a]=i[r].text.replace(new RegExp("(^|[^\\w$])"+i[r].arg+"([^\\w$])","g"),"$1"+n+"$2"),t+"def.__exp['"+a+"']"}})));var n=new Function("def","return "+r)(i);return n?s(e,n,i):n}))}function l(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}n.template=function(e,t,i){var u,c,d=(t=t||n.templateSettings).append?a.append:a.split,h=0,p=t.use||t.define?s(t,e,i||{}):e;p=("var out='"+(t.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(t.interpolate||o,(function(e,t){return d.start+l(t)+d.end})).replace(t.encode||o,(function(e,t){return u=!0,d.startencode+l(t)+d.end})).replace(t.conditional||o,(function(e,t,i){return t?i?"';}else if("+l(i)+"){out+='":"';}else{out+='":i?"';if("+l(i)+"){out+='":"';}out+='"})).replace(t.iterate||o,(function(e,t,i,r){return t?(h+=1,c=r||"i"+h,t=l(t),"';var arr"+h+"="+t+";if(arr"+h+"){var "+i+","+c+"=-1,l"+h+"=arr"+h+".length-1;while("+c+"<l"+h+"){"+i+"=arr"+h+"["+c+"+=1];out+='"):"';} } out+='"})).replace(t.evaluate||o,(function(e,t){return"';"+l(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),u&&(t.selfcontained||!r||r._encodeHTML||(r._encodeHTML=n.encodeHTMLSource(t.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+n.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+p);try{return new Function(t.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},n.compile=function(e,t){return n.template(e,null,t)},t.Z=n},878:(e,t,i)=>{var r,n,a;globalThis,n=[t,i(447),i(415)],void 0===(a="function"==typeof(r=(e,t,i)=>{e.animate=t,e.Scroller=i})?r.apply(t,n):r)||(e.exports=a)},415:(e,t,i)=>{var r,n,a,o;globalThis,o=e=>{var t=function(){},i=function(e,i){for(var r in this.__callback=e,this.options={scrollingX:!0,scrollingY:!0,animating:!0,animationDuration:250,bouncing:!0,locking:!0,paging:!1,snapping:!1,zooming:!1,minZoom:.5,maxZoom:3,speedMultiplier:1,scrollingComplete:t,penetrationDeceleration:.03,penetrationAcceleration:.08},i)this.options[r]=i[r]},r=function(e){return Math.pow(e-1,3)+1},n=function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)};return i.prototype={__isSingleTouch:!1,__isTracking:!1,__didDecelerationComplete:!1,__isGesturing:!1,__isDragging:!1,__isDecelerating:!1,__isAnimating:!1,__clientLeft:0,__clientTop:0,__clientWidth:0,__clientHeight:0,__contentWidth:0,__contentHeight:0,__snapWidth:100,__snapHeight:100,__zoomLevel:1,__scrollLeft:0,__scrollTop:0,__maxScrollLeft:0,__maxScrollTop:0,__scheduledLeft:0,__scheduledTop:0,__scheduledZoom:0,__lastTouchLeft:null,__lastTouchTop:null,__lastTouchMove:null,__positions:null,__minDecelerationScrollLeft:null,__minDecelerationScrollTop:null,__maxDecelerationScrollLeft:null,__maxDecelerationScrollTop:null,__decelerationVelocityX:null,__decelerationVelocityY:null,setDimensions(e,t,i,r){null!==e&&(this.__clientWidth=e),null!==t&&(this.__clientHeight=t),null!==i&&(this.__contentWidth=i),null!==r&&(this.__contentHeight=r),this.__computeScrollMax(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0)},setPosition(e,t){this.__clientLeft=e||0,this.__clientTop=t||0},setSnapSize(e,t){this.__snapWidth=e,this.__snapHeight=t},getValues(){return{left:this.__scrollLeft,top:this.__scrollTop,right:this.__scrollLeft+this.__clientWidth/this.__zoomLevel,bottom:this.__scrollTop+this.__clientHeight/this.__zoomLevel,zoom:this.__zoomLevel}},getPoint(e,t){var i=this.getValues();return{left:e/i.zoom,top:t/i.zoom}},getScrollMax(){return{left:this.__maxScrollLeft,top:this.__maxScrollTop}},zoomTo(t,i,r,n,a){if(!this.options.zooming)throw new Error("Zooming is not enabled!");a&&(this.__zoomComplete=a),this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1);var o=this.__zoomLevel;void 0===r&&(r=this.__clientWidth/2),void 0===n&&(n=this.__clientHeight/2),t=Math.max(Math.min(t,this.options.maxZoom),this.options.minZoom),this.__computeScrollMax(t);var s=t/o,l=s*(this.__scrollLeft+r)-r,u=s*(this.__scrollTop+n)-n;l>this.__maxScrollLeft?l=this.__maxScrollLeft:l<0&&(l=0),u>this.__maxScrollTop?u=this.__maxScrollTop:u<0&&(u=0),this.__publish(l,u,t,i)},zoomBy(e,t,i,r,n){this.zoomTo(this.__zoomLevel*e,t,i,r,n)},scrollTo(t,i,r,n){if(this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1),void 0!==n&&n!==this.__zoomLevel){if(!this.options.zooming)throw new Error("Zooming is not enabled!");t*=n,i*=n,this.__computeScrollMax(n)}else n=this.__zoomLevel;this.options.scrollingX?this.options.paging?t=Math.round(t/this.__clientWidth)*this.__clientWidth:this.options.snapping&&(t=Math.round(t/this.__snapWidth)*this.__snapWidth):t=this.__scrollLeft,this.options.scrollingY?this.options.paging?i=Math.round(i/this.__clientHeight)*this.__clientHeight:this.options.snapping&&(i=Math.round(i/this.__snapHeight)*this.__snapHeight):i=this.__scrollTop,t=Math.max(Math.min(this.__maxScrollLeft,t),0),i=Math.max(Math.min(this.__maxScrollTop,i),0),t===this.__scrollLeft&&i===this.__scrollTop&&(r=!1),this.__publish(t,i,n,r)},scrollBy(e,t,i){var r=this.__isAnimating?this.__scheduledLeft:this.__scrollLeft,n=this.__isAnimating?this.__scheduledTop:this.__scrollTop;this.scrollTo(r+(e||0),n+(t||0),i)},doMouseZoom(e,t,i,r){var n=e>0?.97:1.03;return this.zoomTo(this.__zoomLevel*n,!1,i-this.__clientLeft,r-this.__clientTop)},doTouchStart(t,i){if(void 0===t.length)throw new Error(`Invalid touch list: ${t}`);if(i instanceof Date&&(i=i.valueOf()),"number"!=typeof i)throw new Error(`Invalid timestamp value: ${i}`);var r,n;this.__interruptedAnimation=!0,this.__isDecelerating&&(e.stop(this.__isDecelerating),this.__isDecelerating=!1,this.__interruptedAnimation=!0),this.__isAnimating&&(e.stop(this.__isAnimating),this.__isAnimating=!1,this.__interruptedAnimation=!0);var a=1===t.length;a?(r=t[0].pageX,n=t[0].pageY):(r=Math.abs(t[0].pageX+t[1].pageX)/2,n=Math.abs(t[0].pageY+t[1].pageY)/2),this.__initialTouchLeft=r,this.__initialTouchTop=n,this.__zoomLevelStart=this.__zoomLevel,this.__lastTouchLeft=r,this.__lastTouchTop=n,this.__lastTouchMove=i,this.__lastScale=1,this.__enableScrollX=!a&&this.options.scrollingX,this.__enableScrollY=!a&&this.options.scrollingY,this.__isTracking=!0,this.__didDecelerationComplete=!1,this.__isDragging=!a,this.__isSingleTouch=a,this.__positions=[]},doTouchMove(e,t,i){if(void 0===e.length)throw new Error(`Invalid touch list: ${e}`);if(t instanceof Date&&(t=t.valueOf()),"number"!=typeof t)throw new Error(`Invalid timestamp value: ${t}`);if(this.__isTracking){var r,n;2===e.length?(r=Math.abs(e[0].pageX+e[1].pageX)/2,n=Math.abs(e[0].pageY+e[1].pageY)/2):(r=e[0].pageX,n=e[0].pageY);var a=this.__positions;if(this.__isDragging){var o=r-this.__lastTouchLeft,s=n-this.__lastTouchTop,l=this.__scrollLeft,u=this.__scrollTop,c=this.__zoomLevel;if(void 0!==i&&this.options.zooming){var d=c;if(c=c/this.__lastScale*i,d!==(c=Math.max(Math.min(c,this.options.maxZoom),this.options.minZoom))){var h=r-this.__clientLeft,p=n-this.__clientTop;l=(h+l)*c/d-h,u=(p+u)*c/d-p,this.__computeScrollMax(c)}}if(this.__enableScrollX){l-=o*this.options.speedMultiplier;var f=this.__maxScrollLeft;(l>f||l<0)&&(this.options.bouncing?l+=o/2*this.options.speedMultiplier:l=l>f?f:0)}if(this.__enableScrollY){u-=s*this.options.speedMultiplier;var g=this.__maxScrollTop;(u>g||u<0)&&(this.options.bouncing?u+=s/2*this.options.speedMultiplier:u=u>g?g:0)}a.length>60&&a.splice(0,30),a.push(l,u,t),this.__publish(l,u,c)}else{var _=this.options.locking?3:0,m=Math.abs(r-this.__initialTouchLeft),v=Math.abs(n-this.__initialTouchTop);this.__enableScrollX=this.options.scrollingX&&m>=_,this.__enableScrollY=this.options.scrollingY&&v>=_,a.push(this.__scrollLeft,this.__scrollTop,t),this.__isDragging=(this.__enableScrollX||this.__enableScrollY)&&(m>=5||v>=5),this.__isDragging&&(this.__interruptedAnimation=!1)}this.__lastTouchLeft=r,this.__lastTouchTop=n,this.__lastTouchMove=t,this.__lastScale=i}},doTouchEnd(e){if(e instanceof Date&&(e=e.valueOf()),"number"!=typeof e)throw new Error(`Invalid timestamp value: ${e}`);if(this.__isTracking){if(this.__isTracking=!1,this.__isDragging)if(this.__isDragging=!1,this.__isSingleTouch&&this.options.animating&&e-this.__lastTouchMove<=100){for(var t=this.__positions,i=t.length-1,r=i,n=i;n>0&&t[n]>this.__lastTouchMove-100;n-=3)r=n;if(r!==i){var a=t[i]-t[r],o=this.__scrollLeft-t[r-2],s=this.__scrollTop-t[r-1];this.__decelerationVelocityX=o/a*(1e3/60),this.__decelerationVelocityY=s/a*(1e3/60);var l=this.options.paging||this.options.snapping?4:1;(Math.abs(this.__decelerationVelocityX)>l||Math.abs(this.__decelerationVelocityY)>l)&&this.__startDeceleration(e)}else this.options.scrollingComplete()}else e-this.__lastTouchMove>100&&this.options.scrollingComplete();this.__isDecelerating||((this.__interruptedAnimation||this.__isDragging)&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,!0,this.__zoomLevel)),this.__positions.length=0}},__publish(t,i,a,o){var s=this.__isAnimating;if(s&&(e.stop(s),this.__isAnimating=!1),o&&this.options.animating){this.__scheduledLeft=t,this.__scheduledTop=i,this.__scheduledZoom=a;var l=this.__scrollLeft,u=this.__scrollTop,c=this.__zoomLevel,d=t-l,h=i-u,p=a-c,f=function(e,t,i){i&&(this.__scrollLeft=l+d*e,this.__scrollTop=u+h*e,this.__zoomLevel=c+p*e,this.__callback&&this.__callback(this.__scrollLeft,this.__scrollTop,this.__zoomLevel))}.bind(this),g=function(e){return this.__isAnimating===e}.bind(this),_=function(e,t,i){t===this.__isAnimating&&(this.__isAnimating=!1),(this.__didDecelerationComplete||i)&&this.options.scrollingComplete(),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))}.bind(this);this.__isAnimating=e.start(f,g,_,this.options.animationDuration,s?r:n)}else this.__scheduledLeft=this.__scrollLeft=t,this.__scheduledTop=this.__scrollTop=i,this.__scheduledZoom=this.__zoomLevel=a,this.__callback&&this.__callback(t,i,a),this.options.zooming&&(this.__computeScrollMax(),this.__zoomComplete&&(this.__zoomComplete(),this.__zoomComplete=null))},__computeScrollMax(e){void 0===e&&(e=this.__zoomLevel),this.__maxScrollLeft=Math.max(this.__contentWidth*e-this.__clientWidth,0),this.__maxScrollTop=Math.max(this.__contentHeight*e-this.__clientHeight,0)},__startDeceleration(t){if(this.options.paging){var i=Math.max(Math.min(this.__scrollLeft,this.__maxScrollLeft),0),r=Math.max(Math.min(this.__scrollTop,this.__maxScrollTop),0),n=this.__clientWidth,a=this.__clientHeight;this.__minDecelerationScrollLeft=Math.floor(i/n)*n,this.__minDecelerationScrollTop=Math.floor(r/a)*a,this.__maxDecelerationScrollLeft=Math.ceil(i/n)*n,this.__maxDecelerationScrollTop=Math.ceil(r/a)*a}else this.__minDecelerationScrollLeft=0,this.__minDecelerationScrollTop=0,this.__maxDecelerationScrollLeft=this.__maxScrollLeft,this.__maxDecelerationScrollTop=this.__maxScrollTop;var o=function(e,t,i){this.__stepThroughDeceleration(i)}.bind(this),s=this.options.snapping?4:.1,l=function(){var e=Math.abs(this.__decelerationVelocityX)>=s||Math.abs(this.__decelerationVelocityY)>=s;return e||(this.__didDecelerationComplete=!0),e}.bind(this),u=function(e,t,i){this.__isDecelerating=!1,this.__didDecelerationComplete&&this.options.scrollingComplete(),this.scrollTo(this.__scrollLeft,this.__scrollTop,this.options.snapping)}.bind(this);this.__isDecelerating=e.start(o,l,u)},__stepThroughDeceleration(e){var t=this.__scrollLeft+this.__decelerationVelocityX,i=this.__scrollTop+this.__decelerationVelocityY;if(!this.options.bouncing){var r=Math.max(Math.min(this.__maxDecelerationScrollLeft,t),this.__minDecelerationScrollLeft);r!==t&&(t=r,this.__decelerationVelocityX=0);var n=Math.max(Math.min(this.__maxDecelerationScrollTop,i),this.__minDecelerationScrollTop);n!==i&&(i=n,this.__decelerationVelocityY=0)}if(e?this.__publish(t,i,this.__zoomLevel):(this.__scrollLeft=t,this.__scrollTop=i),this.options.paging||(this.__decelerationVelocityX*=.95,this.__decelerationVelocityY*=.95),this.options.bouncing){var a=0,o=0,{penetrationDeceleration:s}=this.options,{penetrationAcceleration:l}=this.options;t<this.__minDecelerationScrollLeft?a=this.__minDecelerationScrollLeft-t:t>this.__maxDecelerationScrollLeft&&(a=this.__maxDecelerationScrollLeft-t),i<this.__minDecelerationScrollTop?o=this.__minDecelerationScrollTop-i:i>this.__maxDecelerationScrollTop&&(o=this.__maxDecelerationScrollTop-i),0!==a&&(a*this.__decelerationVelocityX<=0?this.__decelerationVelocityX+=a*s:this.__decelerationVelocityX=a*l),0!==o&&(o*this.__decelerationVelocityY<=0?this.__decelerationVelocityY+=o*s:this.__decelerationVelocityY=o*l)}}},i},n=[i(447)],void 0===(a="function"==typeof(r=o)?r.apply(t,n):r)||(e.exports=a)},447:(e,t)=>{var i,r,n;globalThis,r=[t],void 0===(n="function"==typeof(i=function(e){var t="undefined"==typeof window?this:window,i=Date.now||function(){return+new Date},r=60,n=1e3,a={},o=1;e.requestAnimationFrame=function(){var e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame,i=!!e;if(e&&!/requestAnimationFrame\(\)\s*\{\s*\[native code\]\s*\}/i.test(e.toString())&&(i=!1),i)return function(t,i){e(t,i)};var r=60,n={},a=1,o=null,s=+new Date;return function(e,t){var i=a++;return n[i]=e,null===o&&(o=setInterval((()=>{var e=+new Date,t=n;for(var i in n={},t)t.hasOwnProperty(i)&&(t[i](e),s=e);e-s>2500&&(clearInterval(o),o=null)}),1e3/r)),i}}(),e.stop=function(e){var t=null!==a[e];return t&&(a[e]=null),t},e.isRunning=function(e){return null!==a[e]},e.start=function(t,s,l,u,c,d){var h=i(),p=h,f=0,g=0,_=o++;if(_%20==0){var m={};for(var v in a)m[v]=!0;a=m}var y=function(o){var m=!0!==o,v=i();if(!a[_]||s&&!s(_))return a[_]=null,void l(r-g/((v-h)/n),_,!1);if(m)for(var A=Math.round((v-p)/(n/r))-1,b=0;b<Math.min(A,4);b++)y(!0),g++;u&&(f=(v-h)/u)>1&&(f=1);var E=c?c(f):f;!1!==t(E,v,m)&&1!==f||!m?m&&(p=v,e.requestAnimationFrame(y,d)):(a[_]=null,l(r-g/((v-h)/n),_,1===f||void 0===u))};return a[_]=!0,e.requestAnimationFrame(y,d),_}})?i.apply(t,r):i)||(e.exports=n)},130:(e,t,i)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=i(161)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),!i)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},161:(e,t,i)=>{var r;function n(e){function i(){if(i.enabled){var e=i,n=+new Date,a=n-(r||n);e.diff=a,e.prev=r,e.curr=n,r=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(i,r){if("%%"===i)return i;l++;var n=t.formatters[r];if("function"==typeof n){var a=o[l];i=n.call(e,a),o.splice(l,1),l--}return i})),t.formatArgs.call(e,o);var u=i.log||t.log||console.log.bind(console);u.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var i,r=0;for(i in e)r=(r<<5)-r+e.charCodeAt(i),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(i),i}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length,n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,r;for(i=0,r=t.skips.length;i<r;i++)if(t.skips[i].test(e))return!1;for(i=0,r=t.names.length;i<r;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(378),t.names=[],t.skips=[],t.formatters={}},378:e=>{var t=1e3,i=60*t,r=60*i,n=24*r,a=365.25*n;function o(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}e.exports=function(e,s){s=s||{};var l,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o)return;var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*n;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return s.long?o(l=e,n,"day")||o(l,r,"hour")||o(l,i,"minute")||o(l,t,"second")||l+" ms":function(e){if(e>=n)return Math.round(e/n)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},808:e=>{"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,i,r,n){i=i||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(i);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,d,h,p,f=e[u].replace(o,"%20"),g=f.indexOf(r);g>=0?(c=f.substr(0,g),d=f.substr(g+1)):(c=f,d=""),h=decodeURIComponent(c),p=decodeURIComponent(d),t(a,h)?Array.isArray(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a}},368:e=>{"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,i,r,n){return i=i||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map((function(n){var a=encodeURIComponent(t(n))+r;return Array.isArray(e[n])?e[n].map((function(e){return a+encodeURIComponent(t(e))})).join(i):a+encodeURIComponent(t(e[n]))})).join(i):n?encodeURIComponent(t(n))+r+encodeURIComponent(t(e)):""}},642:(e,t,i)=>{"use strict";t.decode=t.parse=i(808),t.encode=t.stringify=i(368)},639:function(e,t,i){var r;e=i.nmd(e),function(n){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof i.g&&i.g;a.global!==a&&a.window!==a&&a.self;var o,s=2147483647,l=36,u=/^xn--/,c=/[^\x20-\x7E]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function g(e){throw RangeError(h[e])}function _(e,t){for(var i=e.length,r=[];i--;)r[i]=t(e[i]);return r}function m(e,t){var i=e.split("@"),r="";return i.length>1&&(r=i[0]+"@",e=i[1]),r+_((e=e.replace(d,".")).split("."),t).join(".")}function v(e){for(var t,i,r=[],n=0,a=e.length;n<a;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a?56320==(64512&(i=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),n--):r.push(t);return r}function y(e){return _(e,(function(e){var t="";return e>65535&&(t+=f((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=f(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function b(e,t,i){var r=0;for(e=i?p(e/700):e>>1,e+=p(e/t);e>455;r+=l)e=p(e/35);return p(r+36*e/(e+38))}function E(e){var t,i,r,n,a,o,u,c,d,h,f,_=[],m=e.length,v=0,A=128,E=72;for((i=e.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)e.charCodeAt(r)>=128&&g("not-basic"),_.push(e.charCodeAt(r));for(n=i>0?i+1:0;n<m;){for(a=v,o=1,u=l;n>=m&&g("invalid-input"),((c=(f=e.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:l)>=l||c>p((s-v)/o))&&g("overflow"),v+=c*o,!(c<(d=u<=E?1:u>=E+26?26:u-E));u+=l)o>p(s/(h=l-d))&&g("overflow"),o*=h;E=b(v-a,t=_.length+1,0==a),p(v/t)>s-A&&g("overflow"),A+=p(v/t),v%=t,_.splice(v++,0,A)}return y(_)}function w(e){var t,i,r,n,a,o,u,c,d,h,_,m,y,E,w,T=[];for(m=(e=v(e)).length,t=128,i=0,a=72,o=0;o<m;++o)(_=e[o])<128&&T.push(f(_));for(r=n=T.length,n&&T.push("-");r<m;){for(u=s,o=0;o<m;++o)(_=e[o])>=t&&_<u&&(u=_);for(u-t>p((s-i)/(y=r+1))&&g("overflow"),i+=(u-t)*y,t=u,o=0;o<m;++o)if((_=e[o])<t&&++i>s&&g("overflow"),_==t){for(c=i,d=l;!(c<(h=d<=a?1:d>=a+26?26:d-a));d+=l)w=c-h,E=l-h,T.push(f(A(h+w%E,0))),c=p(w/E);T.push(f(A(c,0))),a=b(i,y,r==n),i=0,++r}++i,++t}return T.join("")}o={version:"1.3.2",ucs2:{decode:v,encode:y},decode:E,encode:w,toASCII:function(e){return m(e,(function(e){return c.test(e)?"xn--"+w(e):e}))},toUnicode:function(e){return m(e,(function(e){return u.test(e)?E(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return o}.call(t,i,t,e))||(e.exports=r)}()},883:(e,t,i)=>{"use strict";var r=i(639),n=i(225);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),d=["%","/","?",";","#"].concat(c),h=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},m={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(642);function y(e,t,i){if(e&&n.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,i),r}a.prototype.parse=function(e,t,i){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var y=e=u.join(s);if(y=y.trim(),!i&&1===e.split("#").length){var A=l.exec(y);if(A)return this.path=y,this.href=y,this.pathname=A[1],A[2]?(this.search=A[2],this.query=t?v.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var b=o.exec(y);if(b){var E=(b=b[0]).toLowerCase();this.protocol=E,y=y.substr(b.length)}if(i||b||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===y.substr(0,2);!w||b&&_[b]||(y=y.substr(2),this.slashes=!0)}if(!_[b]&&(w||b&&!m[b])){for(var T,C,S=-1,I=0;I<h.length;I++){-1!==(x=y.indexOf(h[I]))&&(-1===S||x<S)&&(S=x)}-1!==(C=-1===S?y.lastIndexOf("@"):y.lastIndexOf("@",S))&&(T=y.slice(0,C),y=y.slice(C+1),this.auth=decodeURIComponent(T)),S=-1;for(I=0;I<d.length;I++){var x;-1!==(x=y.indexOf(d[I]))&&(-1===S||x<S)&&(S=x)}-1===S&&(S=y.length),this.host=y.slice(0,S),y=y.slice(S),this.parseHost(),this.hostname=this.hostname||"";var P="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!P)for(var D=this.hostname.split(/\./),R=(I=0,D.length);I<R;I++){var O=D[I];if(O&&!O.match(p)){for(var k="",M=0,N=O.length;M<N;M++)O.charCodeAt(M)>127?k+="x":k+=O[M];if(!k.match(p)){var L=D.slice(0,I),B=D.slice(I+1),F=O.match(f);F&&(L.push(F[1]),B.unshift(F[2])),B.length&&(y="/"+B.join(".")+y),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),P||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+U,this.href+=this.host,P&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[E])for(I=0,R=c.length;I<R;I++){var G=c[I];if(-1!==y.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),y=y.split(G).join(V)}}var j=y.indexOf("#");-1!==j&&(this.hash=y.substr(j),y=y.slice(0,j));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),t&&(this.query=v.parse(this.query)),y=y.slice(0,H)):t&&(this.search="",this.query={}),y&&(this.pathname=y),m[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var z=this.search||"";this.path=U+z}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||m[t])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(n.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var i=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];i[s]=this[s]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(i[c]=e[c])}return m[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!m[e.protocol]){for(var d=Object.keys(e),h=0;h<d.length;h++){var p=d[h];i[p]=e[p]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||_[e.protocol])i.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var g=i.pathname||"",v=i.search||"";i.path=g+v}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),A=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=A||y||i.host&&e.pathname,E=b,w=i.pathname&&i.pathname.split("/")||[],T=(f=e.pathname&&e.pathname.split("/")||[],i.protocol&&!m[i.protocol]);if(T&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),b=b&&(""===f[0]||""===w[0])),A)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,w=f;else if(f.length)w||(w=[]),w.pop(),w=w.concat(f),i.search=e.search,i.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(T)i.hostname=i.host=w.shift(),(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift());return i.search=e.search,i.query=e.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var C=w.slice(-1)[0],S=(i.host||e.host||w.length>1)&&("."===C||".."===C)||""===C,I=0,x=w.length;x>=0;x--)"."===(C=w[x])?w.splice(x,1):".."===C?(w.splice(x,1),I++):I&&(w.splice(x,1),I--);if(!b&&!E)for(;I--;I)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var P,D=""===w[0]||w[0]&&"/"===w[0].charAt(0);T&&(i.hostname=i.host=D?"":w.length?w.shift():"",(P=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift()));return(b=b||i.host&&w.length)&&!D&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},225:e=>{"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},725:(e,t,i)=>{var r=i(130)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:i()}}();function t(){if(a(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!s("?>");){var t=n();if(!t)return e;e.attributes[t.name]=t.value}return a(/\?>\s*/),e}}function i(){r("tag %j",e);var t=a(/^<([\w-:.]+)\s*/);if(t){for(var l,u={name:t[1],attributes:{},children:[]};!(o()||s(">")||s("?>")||s("/>"));){var c=n();if(!c)return u;u.attributes[c.name]=c.value}if(a(/^\s*\/>\s*/))return u;for(a(/\??>\s*/),u.content=function(){r("content %j",e);var t=a(/^([^<]*)/);return t?t[1]:""}();l=i();)u.children.push(l);return a(/^<\/[\w-:.]+>\s*/),u}}function n(){r("attribute %j",e);var t,i=a(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(i)return{name:i[1],value:(t=i[2],t.replace(/^['"]|['"]$/g,""))}}function a(t){var i=e.match(t);if(i)return e=e.slice(i[0].length),i}function o(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},463:(e,t,i)=>{var r=i(689)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:i()}}();function t(){if(a(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!s("?>");){var t=n();if(!t)return e;e.attributes[t.name]=t.value}return a(/\?>\s*/),e}}function i(){r("tag %j",e);var t=a(/^<([\w-:.]+)\s*/);if(t){for(var l,u={name:t[1],attributes:{},children:[]};!(o()||s(">")||s("?>")||s("/>"));){var c=n();if(!c)return u;u.attributes[c.name]=c.value}if(a(/^\s*\/>\s*/))return u;for(a(/\??>\s*/),u.content=function(){r("content %j",e);var t=a(/^([^<]*)/);return t?t[1]:""}();l=i();)u.children.push(l);return a(/^<\/[\w-:.]+>\s*/),u}}function n(){r("attribute %j",e);var t,i=a(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(i)return{name:i[1],value:(t=i[2],t.replace(/^['"]|['"]$/g,""))}}function a(t){var i=e.match(t);if(i)return e=e.slice(i[0].length),i}function o(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},689:(e,t,i)=>{function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e}(t=e.exports=i(71)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var i=this.useColors;if(e[0]=(i?"%c":"")+this.namespace+(i?" %c":" ")+e[0]+(i?"%c ":" ")+"+"+t.humanize(this.diff),!i)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,a=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(a=n))})),e.splice(a,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())},71:(e,t,i)=>{var r;function n(e){function i(){if(i.enabled){var e=i,n=+new Date,a=n-(r||n);e.diff=a,e.prev=r,e.curr=n,r=n;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(i,r){if("%%"===i)return i;l++;var n=t.formatters[r];if("function"==typeof n){var a=o[l];i=n.call(e,a),o.splice(l,1),l--}return i})),t.formatArgs.call(e,o);var u=i.log||t.log||console.log.bind(console);u.apply(e,o)}}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=function(e){var i,r=0;for(i in e)r=(r<<5)-r+e.charCodeAt(i),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(i),i}(t=e.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var i=("string"==typeof e?e:"").split(/[\s,]+/),r=i.length,n=0;n<r;n++)i[n]&&("-"===(e=i[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var i,r;for(i=0,r=t.skips.length;i<r;i++)if(t.skips[i].test(e))return!1;for(i=0,r=t.names.length;i<r;i++)if(t.names[i].test(e))return!0;return!1},t.humanize=i(572),t.names=[],t.skips=[],t.formatters={}},572:e=>{var t=1e3,i=60*t,r=60*i,n=24*r,a=365.25*n;function o(e,t,i){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+i:Math.ceil(e/t)+" "+i+"s"}e.exports=function(e,s){s=s||{};var l,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!o)return;var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*n;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*i;case"seconds":case"second":case"secs":case"sec":case"s":return s*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return s.long?o(l=e,n,"day")||o(l,r,"hour")||o(l,i,"minute")||o(l,t,"second")||l+" ms":function(e){if(e>=n)return Math.round(e/n)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.amdO={},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var r={};(()=>{"use strict";i.d(r,{default:()=>Q9});var e={};i.r(e),i.d(e,{ALPHA_MODES:()=>Lb,AbstractBatchRenderer:()=>xC,AbstractRenderer:()=>AC,Attribute:()=>Xw,BLEND_MODES:()=>xb,BUFFER_BITS:()=>Ib,BaseRenderTexture:()=>Hw,BaseTexture:()=>Uw,BatchDrawCall:()=>CC,BatchGeometry:()=>DC,BatchPluginFactory:()=>kC,BatchRenderer:()=>MC,BatchShaderGenerator:()=>PC,BatchTextureArray:()=>SC,Bounds:()=>vw,Buffer:()=>eT,CLEAR_MODES:()=>Bb,Circle:()=>XE,Container:()=>Ew,DEG_TO_RAD:()=>ZE,DRAW_MODES:()=>Pb,DisplayObject:()=>yw,ENV:()=>Cb,Ellipse:()=>JE,FORMATS:()=>Db,FillStyle:()=>vS,Filter:()=>ZT,FilterState:()=>dT,Framebuffer:()=>jw,GC_MODES:()=>Fb,GLFramebuffer:()=>mT,GLProgram:()=>cC,GLTexture:()=>_C,GRAPHICS_CURVES:()=>mS,Geometry:()=>oT,Graphics:()=>HS,GraphicsData:()=>LS,GraphicsGeometry:()=>US,IGLUniformData:()=>uC,InteractionData:()=>ww,InteractionEvent:()=>Tw,InteractionManager:()=>Pw,InteractionTrackingData:()=>Cw,LINE_CAP:()=>fS,LINE_JOIN:()=>pS,LineStyle:()=>WS,Loader:()=>nS,LoaderResource:()=>tS,MASK_TYPES:()=>Wb,MIPMAP_MODES:()=>Nb,MSAA_QUALITY:()=>Gb,MaskData:()=>wT,Matrix:()=>nw,ObjectRenderer:()=>pT,ObservablePoint:()=>rw,PI_2:()=>qE,PRECISION:()=>Ub,Point:()=>iw,Polygon:()=>ew,Program:()=>$T,Quad:()=>sT,QuadUv:()=>lT,RAD_TO_DEG:()=>QE,RENDERER_TYPE:()=>Sb,Rectangle:()=>KE,RenderTexture:()=>Zw,RenderTexturePool:()=>Kw,Renderer:()=>bC,ResourceType:()=>iS,RoundedRectangle:()=>tw,SCALE_MODES:()=>kb,SHAPES:()=>VE,Shader:()=>qT,Sprite:()=>cS,SpriteMaskFilter:()=>JT,Spritesheet:()=>aS,SpritesheetLoader:()=>sS,State:()=>QT,System:()=>Gw,TARGETS:()=>Rb,TEXT_GRADIENT:()=>GS,TYPES:()=>Ob,TemporaryDisplayObject:()=>Aw,Text:()=>tI,TextMetrics:()=>XS,TextStyle:()=>qS,Texture:()=>$w,TextureLoader:()=>rS,TextureMatrix:()=>XT,TextureUvs:()=>zw,Ticker:()=>_w,TickerPlugin:()=>mw,Transform:()=>fw,UPDATE_PRIORITY:()=>hw,UniformGroup:()=>cT,VERSION:()=>lI,ViewableBuffer:()=>IC,WRAP_MODES:()=>Mb,autoDetectRenderer:()=>EC,checkMaxIfStatementsInShader:()=>HT,defaultFilterVertex:()=>TC,defaultVertex:()=>wC,graphicsUtils:()=>NS,groupD8:()=>pw,interactiveTarget:()=>Iw,isMobile:()=>Tb,navigator:()=>wb,resources:()=>Ww,settings:()=>Vb,systems:()=>vC,uniformParsers:()=>FT,utils:()=>$E});var t={};i.r(t),i.d(t,{getABTestConfig:()=>rr,getGameRelatedContextsExports:()=>sL,getGameRelatedContextsExportsWx:()=>lL,getIsolatedGamePluginContextEnv:()=>uL});var n={};i.r(n),i.d(n,{_downloadFileSkipCheckDomain:()=>Ka,_requestSkipCheckDomain:()=>Na,_socketSkipCheckDomainFactory:()=>No,_uploadFileSkipCheckDomain:()=>ro,invokeOperateWXData:()=>Oi,private_getUserAgent:()=>vs,uploadToCommonCDN:()=>cL});var a=Object.prototype.toString;function o(e){return a.call(e).slice(8,-1)}var s=e=>"String"===o(e),l=e=>"Number"===o(e),u=e=>!0===e||!1===e||"Boolean"===o(e),c=e=>void 0===e,d=e=>null===e,h=Number.isNaN||(e=>e!=e),p=Number.isFinite||(e=>l(e)&&i.g.isFinite(e)),f=e=>p(e)&&Math.floor(e)===e,g=e=>"Object"===o(e),_=Array.isArray||(e=>"Array"===o(e)),m=e=>"function"==typeof e,v=e=>"ArrayBuffer"===o(e),y=e=>ArrayBuffer.isView(e)&&!(e=>"DataView"===o(e))(e);function A(e,t,i="parameter"){var r=o(t),n=o(e);if(n!==r)return`${i} should be ${r} instead of ${n};`;var a="";switch(r){case"Object":Object.keys(t).forEach((r=>{a+=A(e[r],t[r],`${i}.${r}`)}));break;case"Array":if(e.length<t.length)return`${i} should have at least ${t.length} item;`;for(var s=0;s<t.length;++s)a+=A(e[s],t[s],`${i}[${s}]`)}return a}function b(e){var t,i=o(e);if("Number"===i){if(h(e))return"NaN";if(l(t=e)&&Math.abs(t)===1/0)return"Infinity"}else if("Object"===i){if(d(e))return"Null"}else if(i.endsWith("Array")&&"Array"!==i&&y(e))return"TypedArray";return i}var E={String:0,NaN:"<NaN>",Infinity:e=>e>0?"<Infinity>":"<-Infinity>",Number:0,Boolean:0,Null:0,Undefined:"<Undefined>",Function:e=>""===e.name?"<Function>":`<Function: ${e.name}>`,Date:e=>`<Date: ${e.toJSON()}>`,RegExp:e=>`<RegExp: ${e.toString()}>`,Error:e=>`<${e.name}: ${e.message}>`,Symbol:e=>`<Symbol: ${e.toString()}>`,Promise:"<Promise>",Map:e=>`<Map: size=${e.size}>`,WeakMap:"<WeakMap>",Set:e=>`<Set: size=${e.size}>`,WeakSet:"<WeakSet>",ArrayBuffer:e=>`<ArrayBuffer: byteLength=${e.byteLength}>`,DataView:e=>`<DataView: byteLength=${e.byteLength}, byteOffset=${e.byteOffset}>`,TypedArray:e=>`<${e.constructor&&e.constructor.name?e.constructor.name:"TypedArray"}: byteLength=${e.byteLength}, length=${e.length}>`};function w(e){var t=new WeakMap,i=0;return function e(r,n){var a,[o,s]=function(e){var t=b(e);return t in E?E[t]?m(E[t])?[E[t](e),!0]:[E[t],!0]:[e,!0]:[null,!1]}(r);return s?o:i>3e3?"<Hidden>":t.has(r)?`<Circular: ${t.get(r)}>`:(t.set(r,n),i++,_(r)?r.map(((t,i)=>e(t,`${n}[${i}]`))):(a={},Object.keys(r).forEach((t=>{a[t]=e(r[t],`${n}.${t}`)})),a))}(e,"@")}function T(e){try{return(e=Array.prototype.slice.call(e)).map(w)}catch(e){return void console.warn("[console] This object can not be logged")}}var C=0,S=1,I=2,x=3,P=4,D=5,R=5;var O=i(947),k=__wxConfig,M=k.platform,N="devtools"===k.platform,L="android"===k.platform,B="ios"===k.platform,F="windows"===k.platform,U="mac"===k.platform,W="mina"===k.platform,G=F||U;function V(){if(k&&"debug"in k&&void 0!==k.debug)return!!k.debug}var j=k.host||{},H=(j.env,j.env,j.env,j.forceUseNativeMap,"object"==typeof window&&window&&window.__wkrenderer_h5);if(H)console=window.console;else if(!N&&!G&&!W){var z=function(e,t){var i=function(e,t,i=!0){if(i||e===I||e===x)try{var r=T(t);if(void 0===r)return;var n=JSON.stringify({level:e,logs:r});return n.length>1048576&&!i||n.length>2097152&&i?JSON.stringify({level:e,logs:["<LOG_EXCEED_MAX_LENGTH>"]}):n}catch(e){return void console.warn("[console] This object can not be logged")}}(e,t,V());i&&O.Z.log(i)};globalThis.console={log(){z(C,arguments)},info(){z(S,arguments)},warn(){z(I,arguments)},error(){z(x,arguments)},debug(){z(P,arguments)},time(){z(D,arguments)},timeEnd(){z(R,arguments)},group(){},groupEnd(){}}}var Y=()=>B||L?{log(...e){V()&&globalThis.console.log(...e)},info(...e){V()&&globalThis.console.info(...e)},warn(...e){V()&&globalThis.console.warn(...e)},error(...e){V()&&globalThis.console.error(...e)},debug(...e){V()&&globalThis.console.debug(...e)},time(...e){V()&&globalThis.console.time(...e)},timeEnd(...e){V()&&globalThis.console.timeEnd(...e)},group(){},groupEnd(){}}:Object.assign({},console);var $=BabelRuntimeHelpers.objectWithoutProperties,q=i.n($),Q=Symbol("ErrorInfosSymbol"),Z=BabelRuntimeHelpers.objectSpread2,K=i.n(Z),X=["errMsg"],J=["errMsg"],ee=e=>(t={},...i)=>new Promise(((r,n)=>e(K()(K()({},t),{},{success:r,fail:e=>{var{errMsg:t}=e,i=q()(e,X),r=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(r,i),r[Q]=i,n(r)},complete:(e={})=>{var{errMsg:t}=e,i=q()(e,J);if(t&&!/^\w+:(ok|fail)/.test(t)){var r=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(r,i),r[Q]=i,r._complete_hook=!0,n(r)}}}),...i))),te=["success","fail","complete"];function ie(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function re(e,t){return function(...i){try{return e(...i)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function ne(){}var ae=re((function(e){var t=o(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");var oe=re((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function se(e){return function(t={},...i){t=t||{};var{success:r,fail:n,complete:a}=t;return r||n||a?e.apply(this,[t,...i]):new Promise(((r,n)=>{var a=Object.assign({success:r,fail:n},t);e.apply(this,[a,...i])}))}}function le(e,t,i){var r=se(i.value);return i.value=function(){return r.apply(this,arguments)},i}Error;var ue=(e,t)=>(i={},...r)=>{var{success:n,fail:a,complete:o}=i,s=q()(i,te),l={success:n,fail:a,complete:o};t(s,...r).then((t=>ct({name:e,args:l,success:!0,res:t})),(t=>{t._complete_hook?function({name:e,args:t={},errMsg:i="",res:r={}}){t=t||{};var n=`${e}:${i}`,a=__errorTracer__.surroundThirdByTryCatch(t.complete||ne,`at api ${e} complete callback function`);r.errMsg=n,a(r)}({name:e,args:l,errMsg:t.message,res:t[Q]||{}}):ct({name:e,args:l,success:!1,errMsg:t.message,res:t[Q]||{}})}))};function ce(e,t){!function(e,t){__safeway__.bridge.on(e,t)}(e,re(t,`at api ${e} callback function`))}var de=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function he(){this._events={},this._conf&&pe.call(this,this._conf)}function pe(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function fe(e,t){console.warn(`[Event] ${e} listeners of event ${t} have been added, possibly causing memory leak.`)}function ge(e){this._events={},this._newListener=!1,this._removeListener=!1,pe.call(this,e)}ge.prototype.delimiter=".",ge.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},ge.prototype.event="",ge.prototype.once=function(e,t){return this._once(e,t,!1)},ge.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},ge.prototype._once=function(e,t,i){return this._many(e,1,t,i),this},ge.prototype.many=function(e,t,i){return this._many(e,t,i,!1)},ge.prototype.prependMany=function(e,t,i){return this._many(e,t,i,!0)},ge.prototype._many=function(e,t,i,r){var n=this;if("function"!=typeof i)throw new Error("many only accepts instances of Function");function a(){return 0==--t&&n.off(e,a),i.apply(this,arguments)}return a._origin=i,this._on(e,a,r),n},ge.prototype.emit=function(){this._events||he.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,i,r,n,a,o=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),o>3)for(t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];for(r=0,i=a.length;r<i;r++)switch(this.event=e,o){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if("function"==typeof(a=this._events[e])){switch(this.event=e,o){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(o-1),n=1;n<o;n++)t[n-1]=arguments[n];a.apply(this,t)}return!0}if(a&&(a=a.slice()),a&&a.length){if(o>3)for(t=new Array(o-1),n=1;n<o;n++)t[n-1]=arguments[n];for(r=0,i=a.length;r<i;r++)switch(this.event=e,o){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},ge.prototype.emitAsync=function(){this._events||he.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,i,r,n,a,o=[],s=arguments.length;if(this._all){if(s>3)for(t=new Array(s),n=1;n<s;n++)t[n]=arguments[n];for(r=0,i=this._all.length;r<i;r++)switch(this.event=e,s){case 1:o.push(this._all[r].call(this,e));break;case 2:o.push(this._all[r].call(this,e,arguments[1]));break;case 3:o.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:o.push(this._all[r].apply(this,t))}}if("function"==typeof(a=this._events[e]))switch(this.event=e,s){case 1:o.push(a.call(this));break;case 2:o.push(a.call(this,arguments[1]));break;case 3:o.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(s-1),n=1;n<s;n++)t[n-1]=arguments[n];o.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),s>3)for(t=new Array(s-1),n=1;n<s;n++)t[n-1]=arguments[n];for(r=0,i=a.length;r<i;r++)switch(this.event=e,s){case 1:o.push(a[r].call(this));break;case 2:o.push(a[r].call(this,arguments[1]));break;case 3:o.push(a[r].call(this,arguments[1],arguments[2]));break;default:o.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(o)},ge.prototype.on=function(e,t){return this._on(e,t,!1)},ge.prototype.prependListener=function(e,t){return this._on(e,t,!0)},ge.prototype.onAny=function(e){return this._onAny(e,!1)},ge.prototype.prependAny=function(e){return this._onAny(e,!0)},ge.prototype.addListener=ge.prototype.on,ge.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},ge.prototype._on=function(e,t,i){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||he.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),i?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,fe.call(this,this._events[e].length,e))):this._events[e]=t,this},ge.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var i,r=[];if(!this._events[e])return this;i=this._events[e],r.push({_listeners:i});for(var n=0;n<r.length;n++){if(i=r[n]._listeners,de(i)){for(var a=-1,o=0,s=i.length;o<s;o++)if(i[o]===t||i[o].listener&&i[o].listener===t||i[o]._origin&&i[o]._origin===t){a=o;break}if(a<0)continue;return this._events[e].splice(a,1),0===i.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(i===t||i.listener&&i.listener===t||i._origin&&i._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var i=Object.keys(t);for(var r in i){var n=i[r],a=t[n];a instanceof Function||"object"!=typeof a||null===a||(Object.keys(a).length>0&&e(t[n]),0===Object.keys(a).length&&delete t[n])}}}(this.listenerTree),this},ge.prototype.offAny=function(e){var t,i=0,r=0;if(e&&this._all&&this._all.length>0){for(i=0,r=(t=this._all).length;i<r;i++)if(e===t[i])return t.splice(i,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(i=0,r=t.length;i<r;i++)this.emit("removeListenerAny",t[i]);this._all=[]}return this},ge.prototype.removeListener=ge.prototype.off,ge.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||he.call(this),this):(this._events&&(this._events[e]=null),this)},ge.prototype.listeners=function(e){return this._events||he.call(this),this._events[e]||(this._events[e]=[]),de(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},ge.prototype.eventNames=function(){return Object.keys(this._events)},ge.prototype.listenerCount=function(e){return this.listeners(e).length},ge.prototype.listenersAny=function(){return this._all?this._all:[]};var _e=ge,me=new _e({maxListeners:20,newListener:!1}),ve=new _e({maxListeners:20,newListener:!1});var ye={};function Ae(e){if(e=e[0].toUpperCase()+e.slice(1),!ye[e]){var t=new WeakMap;ye[e]={getGlobalListeners:()=>me.listeners(e),getInternalListeners:()=>ve.listeners(e),emit:(...t)=>{ve.emit(e,...t),me.emit(e,...t)},emitGlobal:(...t)=>{me.emit(e,...t)},emitInternal:(...t)=>{ve.emit(e,...t)},internalOnMethod:(t,i={})=>{"function"==typeof t&&(i.prepend?i.once?ve.prependOnceListener(e,t):ve.prependListener(e,t):i.once?ve.once(e,t):ve.on(e,t))},internalOffMethod:t=>{"function"==typeof t&&ve.off(e,t)},onMethod:i=>{var r=function(e,t){return"function"!=typeof t?(console.error(`on${e} should accept a function instead of ${typeof t}`),null):__errorTracer__.surroundThirdByTryCatch(t,`at api on${e} callback function`)}(e,i);r&&(t.set(i,r),me.on(e,r))},offMethod:i=>{if(function(e,t){return!t||"function"==typeof t||(console.error(`off${e} should accept a function instead of ${typeof t}`),!1)}(e,i))if(i){if(t.has(i)){var r=t.get(i);t.delete(i),me.off(e,r)}}else t=new WeakMap,me.removeAllListeners(e)}}}return ye[e]}var be={},Ee=(e,t)=>{var i=Ae(`WeixinJSBridge-${e}`);be[e]||(ce(e,((...e)=>{i.emit(...e)})),be[e]=!0),i.internalOnMethod(t)},we="",Te=(e={})=>{try{we=e.transitExtraData.adUxInfo}catch(e){we=""}};void 0!==__safeway__&&(k.onReady((()=>{Te(k.appLaunchInfo)})),Ee("onAppEnterForeground",(e=>{Te(e)})),Ee("onAppEnterBackground",((e={})=>{"back"!==e.mode&&"close"!==e.mode||(we="")})));var Ce=()=>we;function Se(e,t,i,r={}){return"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||Ce()),__safeway__.bridge.invoke(e,t,i,r)}var Ie={},xe={},Pe={},De=0,Re=(e,t)=>Object.keys(t).map((i=>Object.keys(t[i]).map((r=>({func:i,result:e,errMsg:r,count:t[i][r]}))))),Oe=()=>{var e=Re(1,Ie),t=Re(2,xe),i=Re(3,Pe),r=[].concat(e,t,i);0!==r.length&&it("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:r,appType:Reporter.getAppType()})}),Ie={},xe={},Pe={}},ke={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:0,navigationBarTitleMap:{},currentNetworkType:""},Me=0,Ne=1,Le=2,Be=1,Fe=2,Ue=3,We=4,Ge=wxNativeConsole.createLogger("BanForPage"),Ve=!1,je=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),He=[];function ze(e,t,i){var r=function(e,t,i){for(var r=-1,n=0;n<He.length;n++){var a=He[n];if((!s(a.path_rule)||!a.path_rule||new RegExp(a.path_rule).test(t))&&(!s(a.title_rule)||!a.title_rule||new RegExp(a.title_rule).test(i))){r=n;break}}return Ge.log(`[getBanRuleIndexForPage] banRuleIndex=${r}`),r}(0,t,i);return-1===r?(Ye(e,Be,We,e),!0):function(e,t){var i,r,n=e.ban_jsapi_list.find((e=>e.jsapi_name===t));if(!n)return Ge.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;if(Ge.log("[checkAPIAvailableForPageByRule], found APIItem:",n),n.state===Me)i=!1;else if(n.state===Ne)i=!0;else if(n.state===Le&&(i=!0,1===e.is_valid)){var a=n.toast_wording||"该功能暂时无法使用";ot("showToast",{title:a,icon:"none"})}return r=i?e.is_valid?Fe:Ue:Be,Ye(t,r,We,t),1!==e.is_valid||!i}(He[r],e)}function Ye(e,t,i,r="",n=""){if(Ge.log(`[reportAPIBanForPage] APIName=${e}, blockType=${t}, checkScene=${i}, extraInfo=${r}, needReport=${Ve}`),Ve){var{appLaunchInfo:a}=k,o=Object.keys(ke.query).map((e=>`${e}=${ke.query[e]}`)).join("&"),s={session_id:a.sessionid||a.sessionId,cur_path:ke.lastRoute+(o?`?${o}`:""),title:ke.navigationBarTitleMap[ke.lastRoute],check_scene:i,block_status:t,extra_info:r,launch_scene:a.scene,launch_path:a.path,target_path:n};Ge.log("[reportAPIBanForPage], reqData:",s),Oi({reqData:s,apiName:"webapi_reportnvgcheckinfo",complete(e){Ge.log(`[reportAPIBanForPage], res.errMsg=${e.errMsg}`)}})}}k.onReady((()=>{if(!N)try{var{do_report:e,navigate_ban_rule_list:t}=k.appContactInfo.operationInfo.jsonInfo.navigate_ban_info;He=t,Ve=1===e,je=new Set(t.reduce(((e,t)=>[...e,...t.ban_jsapi_list]),je))}catch(e){Ge.error(`[BanForPage][init] fail, errMsg=${e.message}`)}}));var $e,qe=["startPullDownRefresh"],Qe=[],Ze={appRoute:!1,appRouteDone:!1},Ke=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"];function Xe(e,t,i,r,n){e.errMsg=e.errMsg||`${t}:ok`;var a=0===e.errMsg.indexOf(`${t}:ok`),o=new RegExp(`${t}:(fail |fail:)?cancel`).test(e.errMsg),s=0===e.errMsg.indexOf(`${t}:fail`);"function"==typeof r.beforeAll&&r.beforeAll(e),a?function(e,t,i,r,n){var a=function(){"function"==typeof e.success&&e.success(i),"function"==typeof r.afterSuccess&&r.afterSuccess(i)};"function"==typeof r.beforeSuccess?2===r.beforeSuccess._argumentsLength?r.beforeSuccess(i,a):(r.beforeSuccess(i),a()):a(),"function"==typeof $e&&setTimeout((()=>{$e(t,n)}))}(i,t,e,r,n):o?function(e,t,i,r){var n=new RegExp(`${t}:(fail |fail:)?cancel`);e.errMsg=e.errMsg.replace(n,`${t}:fail cancel`),"function"==typeof i.fail&&i.fail(e),"function"==typeof r.beforeCancel&&r.beforeCancel(e),"function"==typeof i.cancel&&i.cancel(e),"function"==typeof r.afterCancel&&r.afterCancel(e)}(e,t,i,r):s&&function(e,t,i,r){"function"==typeof e.beforeFail&&e.beforeFail(i),"function"==typeof r.fail&&r.fail(i),"function"==typeof e.afterFail&&e.afterFail(i),m(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(i)||Reporter.reportIDKey({key:`${t}_fail`})}(r,t,e,i),"function"==typeof i.complete&&i.complete(e),"function"==typeof r.afterAll&&r.afterAll(e),((e,t,i,r,n)=>{var a;(a=t?Ie:i?xe:Pe)[e]=a[e]||{},a[e][n]=(a[e][n]||0)+1,Date.now()-De>=6e4&&(De=Date.now(),setTimeout(Oe,6e4))})(t,a,s,0,e.errMsg)}function Je(e,t,i){var r=function(e,t){return Object.keys(e).reduce(((i,r)=>("function"==typeof e[r]&&(i[r]=__errorTracer__.surroundThirdByTryCatch(e[r],`at api ${t} ${r} callback function`),delete e[r]),i)),{})}(e,t);return e=>{Xe(e,t,r,i)}}function et(e){return(t,i={},r={},n="/")=>{g(i)||(i={}),"operateWXData"===t&&i._isFromBaseOperateWXData;var a=i.__report__;delete i.__report__;var o=Je(i=Object.assign({},i),t,r=function(e,t){return Object.keys(e).reduce(((i,r)=>("function"==typeof e[r]&&(i[r]=re(e[r],`at api ${t} ${r} callback function`),i[r]._argumentsLength=e[r].length),i)),{})}(r,t));Reporter.reportIDKey({key:t});var s,l={keepOriginalParams:(s=t,H||L&&Ke.includes(s))};if(!e){if(0===k.appType&&je.has(t)&&!function(e){var t=Object.keys(ke.query).reduce(((e,t)=>[...e,`${t}=${ke.query[t]}`]),[]).join("&");return ze(e,ke.lastRoute+(t?`?${t}`:""),ke.navigationBarTitleMap[ke.lastRoute]||"")}(t))return void o({errMsg:`${t}:fail API has been banned`});delete i.pluginId,delete i.permissionBytes,n.startsWith("wx")&&(l.appId=n.split("/",1)[0])}Se(t,i,o,l)&&"function"==typeof a&&a()}}var tt=et(!1),it=(e,t,i)=>{qe.indexOf(e)<0?tt(e,t,i):((e,t,i)=>{var{appRoute:r,appRouteDone:n}=Ze;!r&&n?tt(e,t,i):Qe.push({name:e,args:t,option:i})})(e,t,i)},rt=(e,t,i)=>ee((t=>it(e,t,i)))(t),nt=e=>e?(t,i,r)=>{tt(t,i,r,e)}:it,at=et(!0),ot=(e,t,i)=>{at(e,t,i)};function st(e,t,i){var r=A(t,i);return!r||(ut(e,t,`parameter error: ${r}`),!1)}function lt(e,t){var i=A(e,t);if(i)throw new Error(`parameter error: ${i}`)}function ut(e,t={},i,r){var n=l(i);ct({name:e,args:t,errno:n&&i,errMsg:n||i,errCode:n||r,success:!1})}function ct({name:e,args:t={},success:i=!0,errno:r,errMsg:n="",errCode:a,res:o={}}){t=t||{};var s=__errorTracer__.surroundThirdByTryCatch((i?t.success:t.fail)||ne,`at api ${e} ${i?"success":"fail"} callback function`),u=__errorTracer__.surroundThirdByTryCatch(t.complete||ne,`at api ${e} complete callback function`);l(r)?(o.errno=r,o.errMsg=`${e}:fail`):(o.errMsg=i?`${e}:ok`:`${e}:fail ${n}`,l(a)&&(o.errCode=a)),s(o),u(o)}var dt=({success:e,fail:t,complete:i}={},r)=>{var n=e=>{"function"==typeof t&&(r?__errorTracer__.surroundThirdByTryCatch(t,`at api ${r} fail callback function`)(e):t(e)),"function"==typeof i&&(r?__errorTracer__.surroundThirdByTryCatch(i,`at api ${r} complete callback function`)(e):i(e))};return{success:t=>{void 0===t.errMsg&&r&&(t.errMsg=`${r}:ok`),"function"==typeof e&&(r?__errorTracer__.surroundThirdByTryCatch(e,`at api ${r} success callback function`)(t):e(t)),"function"==typeof i&&(r?__errorTracer__.surroundThirdByTryCatch(i,`at api ${r} complete callback function`)(t):i(t))},fail:n,failWithMsg:({code:e,msg:t,errno:i,name:a}={})=>{var o={};"number"==typeof i&&i>0?(o.errno=i,o.errMsg=`${a||r}:fail`):(o.errMsg=`${a||r}:fail ${t||""}`,"number"==typeof e&&(o.errCode=e)),n(o)}}},ht="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",pt="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function ft(e){return t=>s(t)&&t.length>e?t.substr(0,e):t}function gt(e,t=!0){var i=o(e);switch(i){case"Number":case"Boolean":return e;case"String":return ft(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${gt(e.message)}|${gt(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${gt(t)}=${gt(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${i}]`;default:return`[${i}]`}}function _t({WXDataApiName:e,argument:t,isSuccess:i,invokeTime:r,costTime:n,result:a,errMsg:o,isConfirm:s,queueLength:l,wxdataQueueTimestamp:u,wxdataDequeueTimestamp:c,beginCGITimestamp:d,CGICallbackTimestamp:h,beginCGITimestampAfterConfirm:p,CGICallbackTimestampAfterConfirm:f,wxlibCallbackTimestamp:g,requestInQueue:_,requestingCount:m,cost1:v,cost2:y,cost3:A,cost4:b,cost5:E,cost6:w}){Math.random()<.05&&setTimeout((()=>{var T=ke.currentNetworkType,C=k.appType+1e3,S=k.appLaunchInfo&&void 0!==k.appLaunchInfo.scene?k.appLaunchInfo.scene:0,I=[e,gt(JSON.stringify(t)),i?1:0,r,n,T,gt(a),C,S,ht,pt,o&&gt(o)||"",s?1:0,l,v,y,A,b,E,w,0,_?1:0,m,r,u,c,d,h,p,f,g].map(ft(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:I})}),0)}s(ht)&&(ht=ht.replace(" ","")),s(pt)&&(pt=pt.replace(" ","-"));var mt=0,vt=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg","webapi_getfrienduserstorage","webapi_getgroupuserstorage","webapi_game_potential_friends","webapi_getuserinteractivedata","webapi_setselfuserstorage","webapi_modifyfriendinteractivedata","webapi_getuserstorageallappkey","webapi_getshareinfo_byopengid","webapi_getuserinfo_byopenid","webapi_opengameinfo_getfriendsuserdata"],yt=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo","webapi_getuserprofile"],At=["qbase_commapi","webapi_botdemo"];function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Et=/^[-+a-zA-Z0-9]+:\/\//,wt=/^__[-+a-zA-Z0-9]+__\//;function Tt(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function Ct(e,t,i=!0){if(i&&(t=Ot(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return Ct(e,t.substr(2),!1);var r,n,a=t.split("/");for(r=0,n=a.length;r<n&&".."===a[r];r++);a.splice(0,r);var o=e.length>0?e.split("/"):[];o.splice(o.length-r-1,r+1);var s=o.concat(a).join("/");return s}function St(e){var t=e.match(Et);if(!t)return e;var i=t[0];if("plugin://"===i){var r=i.length,n=e.indexOf("/",r);if(n>=0){var a=e.slice(r,n),o=k.plugins&&k.plugins[a]?k.plugins[a].provider:a;e=e.slice(0,r)+o+e.slice(n)}var s=e.indexOf("?");s<0&&(s=e.length);var l=e.slice(0,s),u=exparser.Component._list[l];if(!u)throw new kt(`Page "${l}" is not found`);e=u.is+e.slice(s)}else if("plugin-private://"===i){var c=e.indexOf("?");c<0&&(c=e.length);var d=e.slice(0,c);e="/"+__appServiceEngine__.convertComponentAliasToRoute(d)+e.slice(c)}else{if("wx://"!==i)throw new kt(`Unknown URL protocol "${i}"`);e="/__wx__/"+e.slice(5)}return e}function It(e){var t=e.match(Et),i=e.match(wt),r="";if(t){var n=t[0];if("plugin://"===n){var a=n.length,o=e.indexOf("/",a);if(o>=0){var s=e.slice(a,o);r=k.plugins&&k.plugins[s]?k.plugins[s].provider:s}}else if("plugin-private://"===n){var l=n.length,u=e.indexOf("/",l);if(u>=0)r=e.slice(l,u)}else"wx://"===n&&(r="//")}if(i){var c=i[0];if("__plugin__/"===c){var d=c.length,h=e.indexOf("/",d);if(h>=0)r=e.slice(d,h)}else"__wx__/"===c&&(r="//")}return r}function xt(e,t=!1){if("object"!=typeof e)return e;var i=[];for(var r in e)if(bt(e,r))if(t)try{i.push(`${encodeURIComponent(r)}=${encodeURIComponent(e[r])}`)}catch(t){i.push(`${r}=${e[r]}`)}else i.push(`${r}=${e[r]}`);return i.join("&")}function Pt(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&Object.keys(t).length>0){var i=e.split("?");return i[0]+"?"+xt(Rt((i[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){var i=t.split("="),r=i[0],n=i[1];e[r]=n}return e}),{}),Object.keys(t).reduce(((e,i)=>("object"==typeof t[i]?e[encodeURIComponent(i)]=encodeURIComponent(JSON.stringify(t[i])):e[encodeURIComponent(i)]=encodeURIComponent(t[i]),e)),{})))}return e}function Dt(e,t="http"){return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function Rt(...e){return e.reduce(((e,t)=>{for(var i in t)e[i]=t[i];return e}),{})}function Ot(e){if("string"!=typeof e)return e;var t=e.split("?")[0],i=e.split("?")[1];return t+=".html",void 0!==i?`${t}?${i}`:t}class kt extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}class Mt extends Error{constructor(e){super(`${e}`),this.type="ThirdScriptError"}}function Nt(e,t){for(var i in t)e[i]=t[i];return e}var Lt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Bt=globalThis.btoa||function(e){for(var t,i,r=String(e),n="",a=0,o=Lt;r.charAt(0|a)||(o="=",a%1);n+=o.charAt(63&t>>8-a%1*8)){if((i=r.charCodeAt(a+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|i}return n},Ft=globalThis.atob||function(e){var t=String(e).replace(/=+$/,""),i="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,n,a=0,o=0;n=t.charAt(o++);~n&&(r=a%4?64*r+n:n,a++%4)?i+=String.fromCharCode(255&r>>(-2*a&6)):0)n=Lt.indexOf(n);return i};function Ut(e){for(var t="",i=new Uint8Array(e),r=i.byteLength,n=0;n<r;n++)t+=String.fromCharCode(i[n]);return Bt(t)}function Wt(e){for(var t=Ft(e),i=t.length,r=new Uint8Array(i),n=0;n<i;n++)r[n]=t.charCodeAt(n);return r.buffer}function Gt(e){return Object.keys(e).reduce(((t,i)=>("string"==typeof e[i]?t[i]=e[i]:"number"==typeof e[i]?t[i]=e[i]+"":t[i]=Object.prototype.toString.apply(e[i]),t)),{})}function Vt(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}k.clientVersion;function jt(e,t){if("string"!=typeof e||"string"!=typeof t)return 0;e=e.split("."),t=t.split(".");for(var i=Math.max(e.length,t.length);e.length<i;)e.push("0");for(;t.length<i;)t.push("0");for(var r=0;r<i;r++){var n=parseInt(e[r],10),a=parseInt(t[r],10);if(n>a)return 1;if(n<a)return-1}return 0}function Ht(e){if("string"!=typeof e)return String(Number.parseInt(e,10));for(var t,i=0;i<e.length;i++)if(!Number.isNaN(parseInt(e[i],10))){t=i;break}return e.slice(t)}function zt(e,t){return e||t?e?t?jt(Ht(e),Ht(t)):1:-1:0}var Yt=({name:e,scene:t,strategy:i,timeDiffToLastTap:r=0})=>{var n;"undefined"!=typeof __appServiceEngine__&&(n=__appServiceEngine__.getCurrentPagesByDomain("").find((e=>e.__wxWebviewId__===ke.currentWebviewId))||{});var a=[e,t,Reporter.getAppType(),n?n.route:"",i||0,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:a})},$t={},qt={lastShareTicket:null,get:e=>$t[e],set(e,t){var i=Vt();return $t[i]={shareKey:e,shareName:t},i}},Qt=(new _e,{requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021,TCP:1025,TCPServer:1026,inputTypeSafePassword:1027,startGameLiveDirectly:1045,getUserRecentGameLiveInfo:1049,private_getWebviewDebugInfo:1051,showRedPackage:1052,WXA_JSAPI_INDEX_useOldCanvas:977,reportRequestError:1069}),Zt={};k.onReady((()=>{var e=Object.keys(Qt).map((e=>Qt[e]));it("getPermissionBytes",{indexes:e,success(t){if(t.permissionBytes)for(var i=0;i<t.permissionBytes.length;i++){var r=e[i];Zt[r]=1===t.permissionBytes[i]}},fail(e){}})}));var Kt=e=>{var t=Qt[e];if("number"!=typeof t)return!1;if(!c(Zt[t]))return Zt[t];var i=!1;return it("getPermissionBytes",{indexes:[t],success(e){e.permissionBytes&&(i=1===e.permissionBytes[0],Zt[t]=i)}}),i};i(883);var Xt={emitter:new _e,puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}},Jt=new WeakMap,ei=e=>{for(var t in Xt.puidToPluginWX)if(Xt.puidToPluginWX[t]===e)return t},ti=e=>Xt.pluginIDs[ei(e)],ii=e=>{if(bi()){var t=(e=>Jt.get(e))(e);return t&&t.provider?t.provider:void 0}return ti(e)},ri={},ni={};function ai(){var e=ti(this)||"";return function(e,t=""){if(It(e.path||"")===t)return e;var i={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(i.mode=e.mode),e.apiCategory&&(i.apiCategory=e.apiCategory),10===k.appType&&(e.nativeExtraData&&(i.nativeExtraData=e.nativeExtraData),i.sessionId=e.sessionId,i.isLaunch=e.isLaunch,e.isLaunch&&(i.prerender=e.prerender),i.clickTimestamp=e.clickTimestamp,i.preloadType=e.preloadType),i}(ri,e)}function oi(){return ni}var si={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,isBluetoothDevicePaired:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,getBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,onBLEMTUChange:null,offBLEMTUChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,requestSubscribeDeviceMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null,publishWeChatState:null,chooseLicensePlate:null,openSystemBluetoothSetting:null,openAppAuthorizeSetting:null,getSystemSetting:null,getAppAuthorizeSetting:null,getDeviceInfo:null,getWindowInfo:null,getAppBaseInfo:null,openEmbeddedMiniProgram:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,isBluetoothDevicePaired:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,getBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,onBLEMTUChange:10,offBLEMTUChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10,publishWeChatState:20,chooseLicensePlate:20,openSystemBluetoothSetting:30,openAppAuthorizeSetting:30,getSystemSetting:10,getAppAuthorizeSetting:10,getDeviceInfo:10,getWindowInfo:10,getAppBaseInfo:10,openEmbeddedMiniProgram:30},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,requestSubscribeDeviceMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,isBluetoothDevicePaired:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,getBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,onBLEMTUChange:3,offBLEMTUChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1,publishWeChatState:1,chooseLicensePlate:1,openSystemBluetoothSetting:1,openAppAuthorizeSetting:1,getSystemSetting:1,getAppAuthorizeSetting:1,getDeviceInfo:1,getWindowInfo:1,getAppBaseInfo:1,openEmbeddedMiniProgram:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:40,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,isBluetoothDevicePaired:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,getBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,onBLEMTUChange:0,offBLEMTUChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,requestSubscribeDeviceMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:30,openChannelsActivity:30,openChannelsUserProfile:30,openChannelsLiveCollection:30,openChannelsEvent:30,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40,publishWeChatState:40,openCustomerServiceChat:40,chooseLicensePlate:40,openSystemBluetoothSetting:40,openAppAuthorizeSetting:40,getSystemSetting:0,getAppAuthorizeSetting:0,getDeviceInfo:0,getWindowInfo:0,getAppBaseInfo:0,openEmbeddedMiniProgram:0},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,getBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,onBLEMTUChange:0,offBLEMTUChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,getBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,onBLEMTUChange:10,offBLEMTUChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},li=(e,t)=>si[t][e];function ui(e){var t=li(e,"thirdApp");return 0!==t&&1!==t||!xi()||1===t&&fi()&&it("showToast",{icon:"",title:"暂不支持当前功能",duration:2500}),!0}var ci=!1;function di(e){ci="tap"===e}function hi(){setTimeout((()=>{ci=!1}),0)}function pi(e){return(...t)=>{if(4===k.appType)return di("tap"),e.apply(this,t),void hi();__virtualDOM__.wrapTapMark((()=>{e.apply(this,t)}))}}function fi(){return 4===k.appType?ci:ci||__virtualDOM__.checkTapMark()}function gi(e,t){return function(i,...r){var n=li(e,"tap"),a=fi(),o=i;if(10!==n||a||(Yt({name:e,scene:0,strategy:1}),!N&&Ai(e))){if((20===n&&a||30===n)&&("function"==typeof i?o=pi.call(this,i):"object"==typeof i&&(o=Object.assign({},i),["success","fail","complete"].forEach((e=>{"function"==typeof o[e]&&(o[e]=pi.call(this,o[e]))})))),40!==n||4===k.appType||a){var s=t.apply(this,[o].concat(r));return 4===k.appType&&[10,30,40].includes(n)&&hi(),s}i&&(i.fail||i.complete)&&setTimeout((()=>{ut(e,i,"can only be invoked by user TAP gesture.")}),0)}else i&&(i.fail||i.complete)&&setTimeout((()=>{ut(e,i,"can only be invoked by user TAP gesture.")}),0)}}function _i(e,t,i){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:i,error:e,extend:t})}}}}function mi(e,t,i,r){Object.defineProperty(e,i,{get(){var e=this;return"function"==typeof t[i]?_i((function(){return ui(i),gi(i,t[i]).apply(e,arguments)}),`wx.${i}`,r):t[i]},enumerable:!0,configurable:!0})}class vi{constructor(e={maxListeners:2e3}){this.emitter=new _e(e),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){var i=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,i),this.originalCallbackMap.set(i,t),this.emitter.on(e,i)}}off(e,t){if(t&&"function"==typeof t){var i=this.callbackMap.get(t);this.emitter.off(e,i),this.callbackMap.delete(t),this.originalCallbackMap.delete(i)}else this.emitter.listeners(e).forEach((e=>{var t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}listeners(e){return this.emitter.listeners(e)}}function yi(e){return"string"==typeof e?e.length:"object"==typeof e&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function Ai(e){var t="unknown";if(k.appContactInfo&&k.appContactInfo.operationInfo&&k.appContactInfo.operationInfo.jsonInfo&&k.appContactInfo.operationInfo.jsonInfo.apiAvailable){var{apiAvailable:i}=k.appContactInfo.operationInfo.jsonInfo;"number"==typeof i[e]&&(t=1===i[e])}return t}function bi(){return 4===k.appType}function Ei(e){return(t={})=>new Promise(((i,r)=>{e(Object.assign(t,{success:i,fail:r}))}))}function wi(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ti(e,t){var i,r=String(e).split(".").map((e=>parseInt(e,10))),n=String(t).split(".").map((e=>parseInt(e,10))),a=Math.max(r.length,n.length);if(null!=e&&null!=t){if(0===e.length&&0===t.length)return 0;if(0===e.length)return-1;if(0===t.length)return 1;for(var o=0;o<a&&0===(i=s(r[o],n[o]));o++);return i}function s(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e>t?1:e<t?-1:0}console.error("versionCompare()参数格式错误")}function Ci(e,t){return t.reduce(((t,i)=>(c(e[i])||(t[i]=e[i]),t)),{})}function Si(e){if(!N||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){var t=e.split("?"),i=t[1]||"",r=i.length>0?"&":"";e=`${t[0]}?${i}${r}devtools_ignore=true`}return e}function Ii(){return k.appLaunchInfo&&"singlePage"===k.appLaunchInfo.mode}function xi(){var e=k.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}var Pi=function(){return k.isIsolateContext};var Di=JSON.parse,Ri=e=>({apiName:t,reqData:i,sdkApiName:r,pluginId:n,success:a,fail:o,complete:s,fromComponent:l=!1,withCredentials:u=!1,showConfirm:c=!1}={})=>{if(st("operateWXData",{apiName:t,success:a,fail:o,complete:s},{apiName:""})){var d={success:a,fail:o,complete:s};r=r||"operateWXData";var h={api_name:t,data:i||{},operate_directly:e};"string"==typeof n&&(h.plugin_appid=n),!0===l&&(h.from_component=!0),!0===u&&(h.with_credentials=!0),!0===c&&(h.show_confirm=!0),((e={},t={},...i)=>{var r=Object.assign({},e);r._isFromBaseOperateWXData=!0;var n=t.beforeAll,a=t.beforeSuccess,o=t.beforeFail,s=r.data&&r.data.api_name;vt.includes(s)?r.requestInQueue=!0:r.requestInQueue=!1,yt.includes(s)?r.isImportant=!0:r.isImportant=!1,At.includes(r.data&&r.data.api_name)&&(r.keepAlive=!0);var l={isSuccess:void 0,WXDataApiName:s,argument:r,invokeTime:Date.now(),requestInQueue:r.requestInQueue,requestingCount:++mt};it("operateWXData",r,{beforeAll(e){var i=Date.now();mt--,l.costTime=i-l.invokeTime;try{if(e&&e.data&&e.data.data?l.result=JSON.stringify(e.data):l.result=e.data,e.clientInfo&&"object"==typeof e.clientInfo){var r=e.clientInfo;delete e.clientInfo,Object.keys(r).forEach((e=>{l[e]=r[e]})),l.cost1=r.wxdataQueueTimestamp-l.invokeTime,l.cost2=r.wxdataDequeueTimestamp-r.wxdataQueueTimestamp,l.cost3=r.beginCGITimestamp-r.wxdataDequeueTimestamp,l.cost4=r.CGICallbackTimestamp-r.beginCGITimestamp,l.cost5=r.wxlibCallbackTimestamp-r.CGICallbackTimestamp,l.cost6=i-r.wxlibCallbackTimestamp}}catch(e){wxNativeConsole.error(e)}"function"==typeof n&&n.call(t,e)},beforeSuccess(e){l.isSuccess=!0,r.data.data&&r.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof a&&a.call(t,e),_t(l)},beforeFail(e){l.isSuccess=!1,l.errMsg=e.errMsg,r.data.data&&r.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=l),"function"==typeof o&&o.call(t,e),_t(l)}},...i)})({data:h,success(t){"string"==typeof t.data&&(t.data=Di(t.data));var{data:i}=t;delete t.data;var{data:n,encryptedData:o,iv:l,cloud_id:u,err_no:c,signature:h}=i;e?(void 0!==n&&(t.rawData=n),t.respData=i):t.data="string"==typeof n?Di(n):{},h&&(t.signature=h),o&&(t.encryptedData=o,t.iv=l,u&&(t.cloudID=u)),"number"==typeof c&&0!==c?ut(r,d,c):("function"==typeof a&&a(t),"function"==typeof s&&s(t))},fail(e){"function"==typeof o&&o(e),"function"==typeof s&&s(e)}},{beforeAll(e){"operateWXData"!==r&&(e.errMsg=e.errMsg.replace("operateWXData",r))}})}},Oi=Ri(!1),ki=Ei(Oi),Mi=Ri(!0),Ni=Object.assign;function Li(e,t,i=(()=>{}),r=(()=>{})){return(n={})=>{var{success:a,fail:o}=dt(n,e);Oi({apiName:t,reqData:i(n)||{},sdkApiName:e,success(e){e.rawDataObject=e.data,delete e.data,Ni(e,e.rawDataObject),r(e),delete e.rawDataObject,a(e)},fail:o})}}var Bi=Ae("UpdateWXConfig"),Fi=Bi.onMethod;Bi.offMethod;ce("onUpdateWXConfig",(e=>{wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((t=>{k[t]=e[t]})),Bi.emit(e)}));var Ui="",Wi=Ae("networkstatusChange"),Gi=Ae("networkWeakChange"),Vi=e=>{it("getNetworkType",e)},ji=Wi.onMethod,Hi=Wi.offMethod,zi=Gi.onMethod,Yi=Gi.offMethod,$i=()=>Ui,qi=e=>{Vi({success(t){var{networkType:i="",signalStrength:r=0}=t;Reporter.reportKeyValue({key:"MiniprogramOnNeworkWeakChange",value:[i,r,e.weakNet?1:0].join(",")})}})};ce("onNetworkStatusChange",((e={})=>{qi(e),Ui=e.networkType,ke.currentNetworkType=Ui,Wi.emit(e)})),ce("onNetworkWeakChange",((e={})=>{qi(e),Gi.emit(e)})),k.onReady((()=>{Vi({success(e){Ui=e.networkType,ke.currentNetworkType=Ui}})}));var Qi={query:{},scene:0,sceneNote:""},Zi=0,Ki=[],Xi=()=>{var e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:Ki,appType:Reporter.getAppType()},null,2);it("reportRealtimeAction",{actionData:e}),Ki=[]},Ji=e=>{var t="";return Object.keys(e).forEach(((i,r)=>{try{var n=`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`;0!==r&&(t+="&"),t+=n}catch(e){}})),t},er=(e,t,i,r,n,a,o,s=0,l=0,u={})=>{t.length>1024&&(t=t.substring(0,1024));var c="",d="",h=0,p="";if(bi()?(d=Ji(Qi.query),h=Qi.scene,p=Qi.sceneNote):(h=ke.scene,p=ke.sceneNote),"undefined"!=typeof __appServiceEngine__){var f=__appServiceEngine__.getCurrentPages();if(f&&f.length>0){var g=f[f.length-1];g&&(c=g.route,d=g.__displayReporter&&g.__displayReporter.showOptions&&g.__displayReporter.showOptions.query)}}var _=[e,t,i,r,n,Reporter.getAppType(),a,s,$i(),c,d,l,Ji(u),h,p].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:_}),Reporter.reportIDKey({key:`${e}_${1===i?"ok":"fail"}`}),Ki.push([e,t,i,a||"",r,n,$i(),o?"1":"0",Reporter.getAppType(),s].map((e=>{var t;try{t=encodeURIComponent(e)}catch(i){t=e}return t})).join(",")),Date.now()-Zi>=6e4&&(Zi=Date.now(),setTimeout(Xi,6e4))};class tr{constructor(e="",t=!1){this.type="",this.surround=!1,this.eventMap=new Map,this.type=e,this.surround=t}on(e,t){m(t)?this.eventMap.has(e)?this.eventMap.get(e).add(t):this.eventMap.set(e,new Set([t])):console.error("EmitterError: callback must be a function")}off(e,t){var i=this.eventMap.get(e);"function"!=typeof t?null==i||i.clear():null==i||i.delete(t)}emit(e,...t){var i=[...this.eventMap.get(e)||[]],r=`at ${this.type}${e} callback function`;i.forEach((e=>this.surround?((e,t,...i)=>{if(void 0!==__errorTracer__)__errorTracer__.surroundThirdByTryCatch(e,t)(...i);else if(void 0!==__subContextEngine__)__subContextEngine__.surroundThirdByTryCatch(e,t)(...i);else try{e(...i)}catch(e){console.error(`thirdScriptError\n${null==e?void 0:e.message};${t}`),console.error(e)}})(e,r,...t):e(...t)))}removeAllListeners(e){this.off(e)}getListenersLength(e){var t;return(null===(t=this.eventMap.get(e))||void 0===t?void 0:t.size)||0}}var ir=(e={})=>{if(st("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){var t=A(e,{digestAlgorithm:""});if(t)return void ut("getFileInfo",e,`parameter error: ${t}`);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void ut("getFileInfo",e,`parameter error: invalid digestAlgorithm "${e.digestAlgorithm}"`)}it("getFileInfo",e,{})}},rr=(e={})=>{if("[object Object]"===Object.prototype.toString.call(k.expt)){var t=k.expt[e.experimentId];if(void 0!==t)return void("function"==typeof e.success&&e.success({testConfig:t}))}it("getABTestConfig",e)};var nr=new class{constructor(){this._internal=new Map,this._once=new Map}add(e,t=null){this._internal.set(e,t)}get(e,t){var i=this._internal.get(e);return this._once.get(e)&&this.off(e),void 0===i&&void 0!==t?t:i}compare(e,t){return this.get(e)===t}off(e){this._internal.delete(e),this._once.delete(e)}once(e,t=null){this._once.set(e,!0),this.add(e,t)}set(e,t,i=!1){return!(!this._internal.get(e)&&!i)&&(this._internal.set(e,t),!0)}},ar=0,or="",sr="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",lr="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";s(sr)&&(sr=sr.replace(" ","")),s(lr)&&(lr=lr.replace(" ","-"));var ur=Date.now(),cr=Date.now(),dr={};function hr(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}nr.set("appLaunchInfo",dr),k.onReady((()=>{ur=Date.now(),cr=Date.now()})),k.onReady((()=>{ar=k.appLaunchInfo.scene,or=k.appLaunchInfo.sessionid||k.appLaunchInfo.sessionId,Object.assign(dr,k.appLaunchInfo),Ee("onAppEnterForeground",(e=>{Object.assign(dr,e),cr=Date.now(),e&&e.scene&&(ar=e.scene),e&&(e.sessionid||e.sessionId)&&(or=e.sessionid||e.sessionId)}))}));var pr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],fr=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],gr=[/^(get|set)Storage(Info)?(Sync)?$/,/^getFileSystemManager/,/^(get|set)ClipboardData$/,/^request$/,/^connectSocket/,/^connectWifi$/],_r=new WeakSet,mr=[{match:/^connectSocket/,version:1},{match:/^request/,version:1},{match:/^downloadFile/,version:1}];function vr(){return 1e4*Date.now()+Math.round(9999*Math.random())}function yr(e,t,i){var r=Object.getOwnPropertyDescriptor(e,t);return!r.get&&(!!r.writable&&(!(!t||"_"===t[0])&&(!pr.includes(t)&&(!(i&&!fr.includes(t))&&!!m(e[t])))))}function Ar(e,...t){m(e)&&e(...t)}function br(e,t=!0){var i=o(e);switch(i){case"Number":case"Boolean":return e;case"String":return Er(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return`[Error:${br(e.message)}|${br(e.stack)}]`;case"Object":return t?Object.keys(e).map((t=>`${br(t)}=${br(e[t],!1)}`)).sort(((e,t)=>e.length-t.length)).join("&")||"{}":`[${i}]`;case"Array":var r=[];return t?(e.forEach((e=>r.push(br(e,"Array"!==o(e))))),r.join(";")):`[${i}]`;default:return`[${i}]`}}function Er(e){return t=>s(t)&&t.length>e?t.substr(0,e):t}function wr(e,t,i,r,n,a,o,s,l,u){var c=0;for(var d of(mr.forEach((({match:t,version:i})=>("string"==typeof t?e===t&&(c=i):t instanceof RegExp&&t.test(e)&&(c=i),!1))),gr))if(d.test(e)){i="",s="";break}var h=nr.get("api_call_from_hot_boot_time",cr),p=[e,t,br(i),r,n,Date.now()-n,a,o,br(s),k.appType+1e3,ar,sr,lr,c,l,hr(),or,Date.now()-ur,Date.now()-h,encodeURIComponent(dr.scene_note||dr.sceneNote)].map(Er(1024)).join(",");u||1!==o||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-n})),Reporter.reportKeyValue({key:u?"WeAppInvoke2":"WeAppInvoke",value:p})}var Tr=Map,Cr=Math.random,Sr=["requestPayment","requestOrderPayment","requestMidasPayment","requestMidasFriendPayment","login","getUserProfile","getUserInfo","getSetting"];function Ir(e,t,i,r,n,a=!1,o=!1){if(g(t)){var s=new Tr;for(var l of Object.getOwnPropertyNames(t))yr(t,l,a)&&s.set(l,t[l]);var u=Object.getPrototypeOf(t);for(var c of Object.getOwnPropertyNames(u))yr(u,c,a)&&s.set(c,u[c]);s.forEach(((s,l)=>{var u,c=`${e}${l}`;o?t[l]=new Proxy(t[l],{construct(e,t){var i=$i(),r=Date.now(),o=vr();u=t;try{var s=Reflect.construct(e,t);return wr(c,o,t,null===s?0:1,r,i,0,s,n,a),s}catch(e){throw wr(c,o,u,0,r,i,0,e,n,a),e}},get:(e,t)=>t===Symbol.hasInstance?t=>t instanceof e:e[t]}):t[l]=function(e,...o){if(!Sr.includes(c)&&Cr()>r){var l=s.call(t,g(e)&&("success"in e||"fail"in e||"complete"in e)?Object.assign({},e,{fail:t=>{t.errno&&Reporter.reportKeyValue({key:"WeAppRequestErrnoInfo",value:[c,t.errno].join(",")}),Ar(e&&e.fail,t)}}):e,...o);return i&&g(l)&&!_r.has(l)&&(Ir(`${c}.`,l,!1,r,n,a),_r.add(l)),l}var u=$i(),d=Date.now(),h=vr();try{var p=!1,f=s.call(t,g(e)&&("success"in e||"fail"in e||"complete"in e)?Object.assign({},e,{success:t=>{p&&wr(c,h,o.length?[e,...o]:e,1,d,u,1,t,n,a),Ar(e&&e.success,t)},fail:t=>{p&&wr(c,h,o.length?[e,...o]:e,0,d,u,1,t,n,a),t.errno&&Reporter.reportKeyValue({key:"WeAppRequestErrnoInfo",value:[c,t.errno].join(",")}),Ar(e&&e.fail,t)},__report__(){p=!0}}):e,...o);return wr(c,h,o.length?[e,...o]:e,null===f?0:1,d,u,0,f,n,a),i&&g(f)&&!_r.has(f)&&(Ir(`${c}.`,f,!1,r,n,a),_r.add(f)),f}catch(t){throw wr(c,h,o.length?[e,...o]:e,0,d,u,0,t,n,a),t}}}))}}var xr=!1;function Pr(e){Reporter.reportIDKey({key:e})}function Dr(e,t=0){!function(e){var t={lanDebug:[e.lanDebug,()=>Pr("useWxLanDebug")],protobuf:[e.protobuf,()=>Pr("useWxProtobuf")]},i=function(i){var[r,n]=t[i];Object.defineProperty(e,i,{get:()=>(n(),r)})};for(var r of Object.getOwnPropertyNames(t))i(r)}(e),Ir("",e,!0,.05,t),Ir("",e,!0,1,t,!0),Ir("cloud.",e.cloud,!0,.05,t),function(e){if(e.createCanvas){var t=e.createCanvas;e.createCanvas=()=>{var i=t.call(e);if(i&&i.getContext){var r=i.getContext;i.getContext=(...e)=>{var t=r.call(i,...e);if(t&&t.compressedTexImage2D){var n=t.compressedTexImage2D;t.compressedTexImage2D=(...e)=>{xr||(xr=!0,wr("WebGLRenderingContext.compressedTexImage2D",vr(),{},1,Date.now(),$i(),0,void 0)),n.call(t,...e)}}return t}}return i}}}(e)}function Rr(e,t){mr.push({match:e,version:t})}var Or=O.Z.fs,kr=!1;Or&&Or.FileReader&&k.onReady((()=>{var e=!1,t=B?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";rr({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(Rr(/readFile(?:Sync)?$/,1),e=!0)},fail(e){}});var i=Kt("bindingReadFile");kr=e||i}));var Mr=(e={})=>{if(st("readFile",e,{filePath:""}))if(c(e.encoding)||s(e.encoding))if(c(e.position)||l(e.position))if(c(e.length)||l(e.length))if(kr){var t=new Or.FileReader;t.onerror=t=>ut("readFile",e,t),t.onread=t=>ct({name:"readFile",args:e,res:{data:t}}),t.read(e.filePath,e.encoding)}else it("readFile",e);else ut("readFile",e,`invalid length: ${e.length}`);else ut("readFile",e,`invalid position: ${e.position}`);else ut("readFile",e,`invalid encoding: ${e.encoding}`)},Nr=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"],Lr=(e={})=>{st("unlink",e,{filePath:""})&&it("unlink",e)};class Br{constructor({mode:e,size:t,lastAccessedTime:i,lastModifiedTime:r}){this.mode=e,this.size=t,this.lastAccessedTime=i,this.lastModifiedTime=r}_checkModeProperty(e){return(61440&this.mode)===e}isDirectory(){return this._checkModeProperty(16384)}isFile(){return this._checkModeProperty(32768)}}var Fr=(e,t)=>{var i=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((t=>{i=i&&void 0!==e[t]})),i)e.stats=new Br(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new Br(e.stats[""]);else{var r=[],n=e.stats;L&&(n=e,r.push({path:"/",stats:Ur(t)})),Object.keys(n).forEach((e=>{if("errMsg"!==e){var t=n[e];""===e&&(e="/"),r.push({path:e,stats:new Br(t)}),delete n[e]}})),e.stats=r}},Ur=(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");var i,r;if(it("statSync",{path:e,recursive:t,success(t){Fr(t,e),i=t.stats},fail(e){r=e.errMsg}}),r)throw new Error(r);return i},Wr=(e={})=>{st("copyFile",e,{srcPath:"",destPath:""})&&it("fs_copyFile",e,{beforeAll(e){e.errMsg=e.errMsg.replace("fs_copyFile:","copyFile:")}})},Gr="readZipEntry",Vr=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"],jr=i.g.WeixinArrayBuffer;delete i.g.WeixinArrayBuffer;var Hr=jr,zr={saveFile:e=>{st("saveFile",e,{tempFilePath:""})&&it("saveFile",e)},saveFileSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");var i,r;if(it("saveFileSync",{tempFilePath:e,filePath:t,success(e){r=e.savedFilePath},fail(e){i=e.errMsg}}),i)throw new Error(i);return r},getSavedFileList:(e={})=>{it("getSavedFileList",e)},getSavedFileInfo:(e={})=>{st("getSavedFileInfo",e,{filePath:""})&&it("getSavedFileInfo",e)},removeSavedFile:(e={})=>{st("removeSavedFile",e,{filePath:""})&&it("removeSavedFile",e)},getFileInfo:ir,readFile:Mr,readFileSync:(e,t,i,r)=>{if(!e||!s(e))throw new Mt(`invalid filePath: ${e}`);if(!c(t)&&!s(t))throw new Mt(`invalid encoding: ${t}`);if(!c(i)&&!l(i))throw new Mt(`invalid position: ${i}`);if(!c(r)&&!l(r))throw new Mt(`invalid length: ${r}`);if(kr)try{return Or.readFileSync(e,t)}catch(a){throw new Error(a)}var n,a;if(it("readFileSync",{filePath:e,encoding:t,position:i,length:r,success(e){n=e.data},fail(e){a=e.errMsg}}),a)throw new Error(a);return n},writeFile:(e={})=>{st("writeFile",e,{filePath:""})&&(e.encoding&&-1===Nr.indexOf(e.encoding)?ut("writeFile",e,`invalid encoding "${e.encoding}"`):it("writeFile",e,{}))},writeFileSync:(e,t,i)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(i&&-1===Nr.indexOf(i))throw new Error(`invalid encoding "${i}"`);var r;if(it("writeFileSync",{filePath:e,data:t,encoding:i,fail(e){r=e.errMsg}}),r)throw new Error(r)},mkdir:(e={})=>{st("mkdir",e,{dirPath:""})&&it("mkdir",e)},mkdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var i;if(it("mkdirSync",{dirPath:e,recursive:t,fail(e){i=e.errMsg}}),i)throw new Error(i)},rmdir:(e={})=>{st("rmdir",e,{dirPath:""})&&it("rmdir",e)},rmdirSync:(e,t=!1)=>{if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");var i;if(it("rmdirSync",{dirPath:e,recursive:t,fail(e){i=e.errMsg}}),i)throw new Error(i)},readdir:(e={})=>{(G||"wxfile://"!==e.dirPath)&&(!G||"wxfile://tmp"!==e.dirPath&&"wxfile://tmp/"!==e.dirPath)?st("readdir",e,{dirPath:""})&&it("readdir",e):ut("readdir",e,"path permission denied")},readdirSync:e=>{if("wxfile://"===e)throw Error("path permission denied");if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var t,i;if(it("readdirSync",{dirPath:e,success(e){t=e.files},fail(e){i=e.errMsg}}),i)throw new Error(i);return t},access:(e={})=>{st("access",e,{path:""})&&it("access",e)},accessSync:e=>{if(!e||"string"!=typeof e)throw new TypeError("path must be a string");var t;if(it("accessSync",{path:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},unlink:Lr,unlinkSync:e=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var t;if(it("unlinkSync",{filePath:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},stat:(e={})=>{st("stat",e,{path:""})&&it("stat",e,{beforeSuccess:t=>{Fr(t,e.path)}})},statSync:Ur,unzip:(e={})=>{st("unzip",e,{zipFilePath:""})&&it("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:Wr,copyFileSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");var i;if(it("fs_copyFileSync",{srcPath:e,destPath:t,fail(e){i=e.errMsg.replace("fs_copyFileSync:","copyFileSync:")}}),i)throw new Error(i)},rename:(e={})=>{st("rename",e,{oldPath:"",newPath:""})&&it("fs_rename",e,{beforeAll(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:(e,t)=>{if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");var i;if(it("fs_renameSync",{oldPath:e,newPath:t,fail(e){i=e.errMsg.replace(/^fs_/,"")}}),i)throw new Error(i)},appendFile:(e={})=>{st("appendFile",e,{filePath:""})&&(e.encoding&&-1===Nr.indexOf(e.encoding)?ut("appendFile",e,`invalid encoding "${e.encoding}"`):it("fs_appendFile",e,{}))},appendFileSync:(e,t,i)=>{if(!e||"string"!=typeof e)throw new Error("path must be a string");if(i&&-1===Nr.indexOf(i))throw new Error(`invalid encoding "${i}"`);var r;if(it("fs_appendFileSync",{filePath:e,data:t,encoding:i,fail(e){r=e.errMsg}}),r)throw new Error(r)},readZipEntry:(e={})=>{st(Gr,e,{filePath:""})&&(c(e.encoding)||-1!==Nr.indexOf(e.encoding)?"all"===e.entries||Array.isArray(e.entries)?it(Gr,e,{beforeSuccess:e=>(e.entries&&Object.keys(e.entries).forEach((t=>{if(e[t]&&(e.entries[t].data=e[t],delete e[t]),"ok"===e.entries[t].errMsg?e.entries[t].errMsg="readZipEntry:ok":e.entries[t].errMsg=`readZipEntry:fail ${e.entries[t].errMsg}`,0===t.indexOf("file:")){var i=t.replace("file:","");e.entries[i]=e.entries[t],delete e.entries[t]}})),e)}):ut(Gr,e,"invalid entries"):ut(Gr,e,`invalid encoding "${e.encoding}"`))},open:(e={})=>{var t=Object.assign({},e);st("open",e,{filePath:""})&&(void 0===e.flag||Vr.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),it("open",t)):ut("open",e,`invalid flag "${e.flag}"`))},openSync:(e={})=>{var t,i,{filePath:r}=e,{flag:n}=e;if(!r||"string"!=typeof r)throw new TypeError("filePath must be a string");if(void 0!==n&&!Vr.includes(n))throw new Mt(`invalid flag: ${n}`);if(void 0===n&&(n="r"),it("openSync",{filePath:r,flag:n,fail(e){i=e.errMsg},success(e){t=e.fd}}),i)throw new Error(i);return t},truncate:(e={})=>{st("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),it("truncate",e,{}))},truncateSync:({filePath:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var i;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),it("truncateSync",{filePath:e,length:t,fail(e){i=e.errMsg}}),i)throw new Error(i)}},Yr={close:(e={})=>{st("close",e,{fd:""})&&it("close",e)},closeSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");var t;if(it("closeSync",{fd:e,fail(e){t=e.errMsg}}),t)throw new Error(t)},fstat:(e={})=>{st("fstat",e,{fd:""})&&it("fstat",e,{beforeSuccess(e){var{mode:t,size:i}=e,{lastAccessedTime:r,lastModifiedTime:n}=e;r>1617e9&&(r=Math.floor(r/1e3)),n>1617e9&&(n=Math.floor(n/1e3)),e.stats=new Br({mode:t,size:i,lastAccessedTime:r,lastModifiedTime:n}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:({fd:e}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");var t,i;if(it("fstatSync",{fd:e,fail(e){i=e.errMsg},success(e){var{mode:i,size:r}=e,{lastAccessedTime:n,lastModifiedTime:a}=e;n>1617e9&&(n=Math.floor(n/1e3)),a>1617e9&&(a=Math.floor(a/1e3)),t=new Br({mode:i,size:r,lastAccessedTime:n,lastModifiedTime:a})}}),i)throw new Error(i);return t},write:(e={})=>{var t=Object.assign({},e);if(st("write",t,{fd:""}))if(t.encoding&&-1===Nr.indexOf(t.encoding))ut("write",t,`invalid encoding "${t.encoding}"`);else{if(v(t.data)){if(t.data.byteLength>10485760)return void ut("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!s(t.data))return void ut("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),it("write",t)}},writeSync:({fd:e,data:t,offset:i,length:r,encoding:n,position:a}={})=>{if(!e||"string"!=typeof e)throw new TypeError("fd must be a string");if(n&&-1===Nr.indexOf(n))throw new Mt(`invalid encoding "${n}"`);if(v(t)){if(t.byteLength>10485760)throw new Mt("ArrayBuffer exceed size limit (10M)");("number"!=typeof i||i<0)&&(i=0),("number"!=typeof r||r<0)&&(r=t.byteLength-i)}else if(!s(t))throw new TypeError("data must be a string or ArrayBuffer");var o,l;if("number"!=typeof a&&(a=void 0),it("writeSync",{fd:e,data:t,offset:i,length:r,encoding:n,position:a,fail(e){o=e.errMsg},success(e){l={bytesWritten:e.bytesWritten}}}),o)throw new Error(o);return l},read:(e={})=>{if(st("read",e,{fd:""}))if(v(e.arrayBuffer)){var t=Object.assign({},e);B&&Hr&&Hr.trace&&(t.arrayBufferId=Hr.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),l(t.position)&&t.position<0?t.position=0:c(t.position)||d(t.position)?t.position=null:l(t.position)||(t.position=0);var i=Number(t.length);Number.isNaN(i)?t.length=0:t.length=i;var r=Number(t.offset);Number.isNaN(r)?t.offset=0:t.offset=r,it("read",t,{beforeSuccess(t){t.arrayBuffer=e.arrayBuffer},afterAll(){B&&Hr&&Hr.untrace&&Hr.untrace(t.arrayBufferId)}})}else ut("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer")},readSync:(e={})=>{var{fd:t,arrayBuffer:i}=e;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!v(i))throw new TypeError("arrayBuffer must be an ArrayBuffer");var r=Object.assign({},e);B&&Hr&&Hr.trace&&(r.arrayBufferId=Hr.trace(r.arrayBuffer,"rw"),delete r.arrayBuffer),l(r.position)&&r.position<0?r.position=0:c(r.position)||d(r.position)?r.position=null:l(r.position)||(r.position=0);var n=Number(r.length);Number.isNaN(n)?r.length=0:r.length=n;var a,o,s=Number(r.offset);if(Number.isNaN(s)?r.offset=0:r.offset=s,it("readSync",K()(K()({},r),{},{fail(e){o=e.errMsg},success(e){a={bytesRead:e.bytesRead,arrayBuffer:i}}})),B&&Hr&&Hr.untrace&&Hr.untrace(r.arrayBufferId),o)throw new Error(o);return a},ftruncate:(e={})=>{st("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),it("ftruncate",e))},ftruncateSync:({fd:e,length:t}={})=>{if(!e||"string"!=typeof e)throw new Error("fd must be a string");var i;if("number"!=typeof t&&(t=0),(t=Math.floor(t))<0&&(t=0),it("ftruncateSync",{fd:e,length:t,fail(e){i=e.errMsg}}),i)throw new Error(i)}},$r="",qr="",Qr="";k.onReady((()=>{try{$r=k.env.USER_DATA_PATH,qr=k.env.OPEN_DATA_PATH,delete k.env.OPEN_DATA_PATH,Qr=$r+"/__plugins__"}catch(e){}}));var Zr={saveFile:["filePath"],saveFileSync:[1],getSavedFileList:null,getSavedFileInfo:null,removeSavedFile:null,getFileInfo:null,readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0],readZipEntry:["filePath"],open:["filePath"],openSync:["filePath"],truncate:["filePath"],truncateSync:["filePath"],close:null,closeSync:null,fstat:null,fstatSync:null,write:null,writeSync:null,read:null,readSync:null,ftruncate:null,ftruncateSync:null},Kr={openSync:!0,truncateSync:!0},Xr=(e,t,i)=>"string"!=typeof e||!e.startsWith("wxfile://ad")&&((!Ii()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&("opendata"===t?!e.startsWith($r):"game"===t?!e.startsWith(qr):"app"===t?!e.startsWith(qr)&&!e.startsWith(Qr)&&!e.match(/__plugin__\/wx[a-z0-9]{16}/):"app-plugin"===t&&(!e.startsWith(qr)&&(!e.startsWith($r)||e.startsWith((e=>`${Qr}/${e}`)(i)))))),Jr=(e,t="")=>{var i={},r=new Set;return Object.keys(zr).forEach((n=>{var a=zr[n];if(!c(Zr[n])){i[n]=(...i)=>{if(null===Zr[n])return a(...i);var r=n.endsWith("Sync"),o=!r||Kr[n]?i[0]:i,s=Zr[n].every((i=>Xr(o[i],e,t)));if("app-plugin"===e&&Zr[n].forEach((e=>{var r=n.endsWith("Sync")?i:i[0];if("string"==typeof r[e]&&!r[e].match(/^[a-zA-Z0-9]+:\/\//)){var a=`plugin-private://${t}`;r[e].startsWith("/")||(a+="/"),r[e]=St(a+r[e])}})),s)return a(...i);if(r)throw new Error(`${n}:fail permission denied`);ut(n,o,"permission denied")};var o=i[n];"open"===n?i[n]=(e={})=>{var{success:t}=e;o(Object.assign({},e,{success:e=>{r.add(e.fd),"function"==typeof t&&t(e)}}))}:"openSync"===n?i[n]=(e={})=>{var t=o(e);return r.add(t),t}:"close"===n?i[n]=(e={})=>{var{fd:t,success:i}=e;o(Object.assign({},e,{fd:t,success:e=>{r.delete(t),"function"==typeof i&&i(e)}}))}:"closeSync"===n&&(i[n]=(e={})=>{var{fd:t}=e;o({fd:t}),r.delete(t)})}})),Object.keys(Yr).forEach((e=>{var t=Yr[e];i[e]=(i={})=>{var{fd:n}=i;if(r.has(n))return t(Object.assign({},i,{fd:n}));if(e.endsWith("Sync"))throw new Error(`${e}:fail invalid fd`);ut(e,i,"invalid fd")}})),i},en={app:Jr("app"),game:Jr("game"),opendata:Jr("opendata")},tn=Object.assign({},zr,Yr);function rn(){return qr}var{saveFile:nn,saveFileSync:an,getSavedFileList:on,getSavedFileInfo:sn,removeSavedFile:ln,getFileInfo:un,readFile:cn,readFileSync:dn,writeFile:hn,writeFileSync:pn,mkdir:fn,mkdirSync:gn,rmdir:_n,rmdirSync:mn,readdir:vn,readdirSync:yn,access:An,accessSync:bn,unlink:En,unlinkSync:wn,stat:Tn,statSync:Cn,unzip:Sn,copyFile:In,copyFileSync:xn,rename:Pn,renameSync:Dn,appendFile:Rn,appendFileSync:On}=en.app;class kn{constructor(e){if(this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof e)throw new TypeError("Promise resolver is not a function");try{e((e=>{"pending"===this._status&&(this._status="then",this._return=e,this._consume())}),(e=>{"pending"===this._status&&(this._status="catch",this._return=e,this._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}_consume(){if("pending"!==this._status){var e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}}then(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}catch(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}static resolve(e){return new kn((t=>t(e)))}static reject(e){return new kn((()=>{throw e}))}}var Mn,Nn,Ln=(Mn=!1,L&&k.onReady((()=>{rr({experimentId:"clicfg_appbrand_android_createdownloadtaskasync",experimentType:"Expt",success:e=>{e&&1===Number(e.testConfig)&&(Mn=!0,Rr(/^downloadFile/,3))},fail(e){}})})),()=>Mn),Bn=(()=>{var e=!1;return L&&k.onReady((()=>{rr({experimentId:"clicfg_appbrand_android_createrequesttaskasync",experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0,Rr(/^request/,3))},fail(e){}})})),()=>e})(),Fn=(Nn={},e=>{if(u(Nn[e]))return Nn[e];if(H)Nn[e]=!0;else if(L)switch(e){case"Download":(Ln()||Un())&&(Nn[e]=!0);break;case"Request":(Bn()||Un())&&(Nn[e]=!0)}else Nn[e]=!1;return Nn[e]}),Un=()=>Object.keys(k.gamePlugins||k.plugins||{}).some((e=>{var t=(k.gamePlugins||k.plugins)[e];return!(!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider)})),Wn=Ei(Tn),Gn=0,Vn=new WeakMap,jn=new WeakMap,Hn=new WeakMap,zn=new WeakMap,Yn=new WeakMap,$n=new WeakMap,qn=new WeakMap,Qn=new WeakMap,Zn=new WeakMap,Kn=new WeakMap,Xn={},Jn=new tr("Network",!0),ea=wxNativeConsole.createLogger("NetworkTask");class ta{constructor(e,{taskType:t,beforeSend:i,beforeSuccess:r,beforeFail:n}){var a=Gn++;Vn.set(this,a),Hn.set(this,"waiting"),zn.set(this,e),Yn.set(this,t),qn.set(this,i),Qn.set(this,r),m(n)&&Zn.set(this,n);var o=!1;(Fn(t)||(B||L)&&e.forceCellularNetwork)&&(o=!0),Kn.set(this,o),this.promise=new kn(((e,t)=>{this.resolve=e,this.reject=t}));var s=()=>{la.call(this)?Xn[t].taskQueue.push({id:a,item:this}):ra.call(this)};m(e.customCheck)?e.customCheck(e,(i=>{i?ia(t,e,i):s()})):s()}abort(){if(ea.info(`[${Yn.get(this)}][${Vn.get(this)}]abort()`),"waiting"===Hn.get(this)){ea.info(`[${Yn.get(this)}][${Vn.get(this)}] waiting=true`);var e=Xn[Yn.get(this)].taskQueue.findIndex((e=>e.id===Vn.get(this)));e>-1&&(Xn[Yn.get(this)].taskQueue.splice(e,1),ut(Xn[Yn.get(this)].functionName,zn.get(this),"abort")),Hn.set(this,"done")}else this.promise.then((()=>{it(`operate${Yn.get(this)}Task`,{[`${Yn.get(this).toLowerCase()}TaskId`]:jn.get(this),operationType:"abort"})}))}onProgressUpdate(e){this.promise.then((()=>{Jn.on(`${Yn.get(this)}${jn.get(this)}progressUpdate`,e)}))}offProgressUpdate(e){this.promise.then((()=>{Jn.off(`${Yn.get(this)}${jn.get(this)}progressUpdate`,e)}))}onHeadersReceived(e){this.promise.then((()=>{Jn.on(`${Yn.get(this)}${jn.get(this)}headersReceived`,e)}))}offHeadersReceived(e){this.promise.then((()=>{Jn.off(`${Yn.get(this)}${jn.get(this)}headersReceived`,e)}))}onChunkReceived(e){this.promise.then((()=>{Jn.on(`${Yn.get(this)}${jn.get(this)}chunked`,e)}))}offChunkReceived(e){this.promise.then((()=>{Jn.off(`${Yn.get(this)}${jn.get(this)}chunked`,e)}))}}function ia(e,t,i){ct({name:Xn[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:i})}function ra(){var e=zn.get(this),t=Yn.get(this),i=Kn.get(this);Hn.set(this,"sending"),$n.set(this,Date.now());var r=na.call(this);i?this.promise.then((()=>{aa.call(this)})).catch((i=>{ia(t,e,i)})):r?ia(t,e,r):aa.call(this)}function na(){var e,t=Yn.get(this),i=zn.get(this);Xn[t].currentTaskCount++;var r={data:i.data,url:i.url,header:i.header,method:i.method,timeout:l(i.timeout)?i.timeout:0,enableHttp2:!!u(i.enableHttp2)&&i.enableHttp2,enableQuic:!!u(i.enableQuic)&&i.enableQuic,enableCache:!!u(i.enableCache)&&i.enableCache,enableProfile:!u(i.enableProfile)||i.enableProfile,ip:i.ip,port:i.port,forbidReuse:!!u(i.forbidReuse)&&i.forbidReuse,host:i.host,enableChunked:i.enableChunked,__skipDomainCheck__:i.__skipDomainCheck__,success:e=>{var i=e[`${t.toLowerCase()}TaskId`];jn.set(this,i),Xn[t].taskIdMap[i]=this,this.resolve()},fail:r=>{Xn[t].currentTaskCount--;var n=r[`${t.toLowerCase()}TaskId`];e=r.errMsg,oa.call(this,{taskType:t,options:i,errMsg:e,success:!1}),this.reject(e),ea.error(`[${t}][createTask][Fail] taskId=${n}`)},complete:()=>{Hn.set(this,"done")}},n=Kn.get(this),a=`create${t}Task${n?"Async":""}`;return(B||L)&&i.forceCellularNetwork&&(a="createCellularNetworkRequestTaskAsync"),it(a,qn.get(this)(r)),e}function aa(){var e=jn.get(this),t=zn.get(this),i=Yn.get(this),r=Xn[i].functionName;Jn.on(`${i}${e}success`,(e=>{Qn.get(this).call(this,e),ct({name:r,args:{success:t.success,fail:t.fail,complete:t.complete},res:e})})),Jn.on(`${i}${e}fail`,(e=>{var i=Zn.get(this);i&&i.call(this,e),ct({name:r,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:e.errMsg})}))}function oa({taskType:e,options:t,errMsg:i,success:r=!0,dataLength:n=0,statusCode:a="",responseDataLength:o=0,profile:s={}}){var l=t.url,u=r?1:2,c=Date.now()-$n.get(this),d=t.__skipDomainCheck__;c>=6e4&&ea.error(`reportTask costTime too long: ${c}ms, taskId=${jn.get(this)}`),er(Xn[e].functionName,l,u,c,i,a,d,n,o,s)}function sa(e,t){var i,r=`${t.toLowerCase()}TaskId`,n=e[r],{state:a,header:o}=e;if(delete e.state,delete e[r],"chunked"!==a&&(e.cookies=o&&(i=o["Set-Cookie"]||o["set-cookie"])?Array.isArray(i)?i:i.split(",").reduce(((e,t)=>(/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e)),[]).map((e=>e.trim())):[]),Jn.emit(`${t}${n}${a}`,e),"success"===a||"fail"===a){var s=Xn[t].taskIdMap[n],l=zn.get(s);if(!s)return;Xn[t].currentTaskCount-=1,Xn[t].taskQueue.length>0&&ra.call(Xn[t].taskQueue.shift().item);var u=Promise.resolve(yi(l.data));if("Upload"===t){var c=0;"object"==typeof l.formData&&null!==l.formData&&(c=JSON.stringify(l.formData).length),u=Wn({path:l.filePath}).then((e=>c+e.stats.size)).catch((()=>c))}var d=Promise.resolve(yi(e.data));if("Download"===t){var h=e.dataLength;d="number"==typeof h?Promise.resolve(h):Wn({path:e.filePath||e.tempFilePath||""}).then((e=>e.stats.size)).catch((()=>0))}Promise.all([u,d]).then((([i,r])=>{oa.call(s,{taskType:t,options:l,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===a,dataLength:i,responseDataLength:r,profile:e.profile})})),ua.call(s)}}function la(){var e=Yn.get(this);return Xn[e].currentTaskCount>=Xn[e].maxTaskCount}function ua(){var e=Yn.get(this),t=jn.get(this);delete Xn[e].taskIdMap[t],Jn.removeAllListeners(`${e}${t}success`),Jn.removeAllListeners(`${e}${t}fail`),Jn.removeAllListeners(`${e}${t}complete`)}function ca(e,t){var i=Xn[e]?Xn[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};ce(`on${e}TaskStateChange`,(t=>{sa.call(this,t,e)})),Xn[e]=Object.assign(i,t)}var da="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",ha="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function pa({isSuccess:e,invokeTime:t,costTime:i,wxdataQueueTimestamp:r,wxdataDequeueTimestamp:n,beginCGITimestamp:a,CGICallbackTimestamp:o,wxlibCallbackTimestamp:l,requestingCount:u,cost1:c,cost2:d,cost3:h,cost4:p,cost5:f,cost6:g,JSApiType:_}){Math.random()<.002&&setTimeout((()=>{var m,v=ke.currentNetworkType,y=k.appType+1e3,A=k.appLaunchInfo&&void 0!==k.appLaunchInfo.scene?k.appLaunchInfo.scene:0,b=["","",e?1:0,t,i,v,"",y,A,da,ha,"",0,0,c,d,h,p,f,g,0,0,u,t,r,n,a,o,0,0,l,_].map((m=1024,e=>s(e)&&e.length>m?e.substr(0,m):e)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:b})}),0)}function fa(e){var t="";if("string"==typeof e)t=e;else try{t=JSON.stringify(e)||""}catch(i){t=o(e)}return t.replace(/,/g,";").substr(0,1024)}function ga(e,t){var i=nr.get("appLaunchInfo",{});Reporter.reportKeyValue({key:"WeAppRequestError",value:[$i(),e.url,t.errMsg,t.statusCode,fa(e.header),fa(e.data),fa(t.header),fa(t.data),e.method,i.scene,encodeURIComponent(i.scene_note||i.sceneNote)].join(",")})}function _a(e,t=!0){if(!e)return!1;if("string"==typeof e)return/err|fail|错误|失败/i.test(e)&&!/ok|success|成功/i.test(e);if("object"==typeof e)for(var i in e){if(/ret|msg|text|message|result/i.test(i)&&/ok|success|成功/i.test(e[i]))return!1;if(/ret|msg|text|message|result/i.test(i)&&/err|fail|错误|失败/i.test(e[i]))return!0;if(/err|code/i.test(i)&&"number"==typeof e[i]&&0!==e[i]&&200!==e[i])return!0;if(t&&"object"==typeof e[i]&&_a(e[i],!1))return!0}return!1}function ma(e,t){(k.accountInfo&&"wxe5f52902cf4de896"===k.accountInfo.appId||Kt("reportRequestError")&&(t.errMsg||t.statusCode>=400||_a(t.data)))&&ga(e,t)}s(da)&&(da=da.replace(" ","")),s(ha)&&(ha=ha.replace(" ","-"));var va={},ya={},Aa={};ji((()=>{va={},ya={},Aa={}}));var ba=0;ca("Request",{maxTaskCount:10,functionName:"request"}),k.onReady((()=>{try{"number"==typeof k.wxAppInfo.maxRequestConcurrent&&ca("Request",{maxTaskCount:k.wxAppInfo.maxRequestConcurrent})}catch(e){}}));function Ea(e,t,i){var r=Date.now();if(ba--,t.costTime=r-t.invokeTime,e.clientInfo&&"object"==typeof e.clientInfo){var n=e.clientInfo;t.wxdataQueueTimestamp=n.invokeTime,t.wxdataDequeueTimestamp=n.invokeTime,t.beginCGITimestamp=n.beginCGITimestamp,t.CGICallbackTimestamp=n.CGICallbackTimestamp,t.wxlibCallbackTimestamp=n.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=r-t.wxlibCallbackTimestamp,i&&i.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,pa(t)}}var wa=class extends ta{constructor(e){var t={JSApiType:1,invokeTime:Date.now(),requestingCount:++ba};super(e,{taskType:"Request",beforeSend:t=>(t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t),beforeSuccess:i=>{var r,n;return e.host&&e.ip&&(r=e.host,n=e.ip,ya[r]=n),t.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(i),function(e){e.statusCode=parseInt(e.statusCode,10)}(i),function(e){"object"==typeof e.header&&(e.header=Object.keys(e.header).reduce(((t,i)=>(Array.isArray(e.header[i])?t[i]=e.header[i].join(","):"string"==typeof e.header[i]&&(t[i]=e.header[i]),t)),{}))}(i),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(i),Ea(i,t,e),ma(e,i),i},beforeFail:i=>(t.isSuccess=!1,Ea(i,t,e),ma(e,i),i)})}},Ta=new WeakMap;class Ca{constructor(){var e,t=new Promise((t=>{e=t}));Ta.set(this,{promise:t,resolve:e})}abort(){var{promise:e}=Ta.get(this);e.then((e=>{e.abort()}))}onHeadersReceived(e){var{promise:t}=Ta.get(this);t.then((t=>{t.onHeadersReceived(e)}))}offHeadersReceived(e){var{promise:t}=Ta.get(this);t.then((t=>{t.offHeadersReceived(e)}))}onChunkReceived(e){var{promise:t}=Ta.get(this);t.then((t=>{t.onChunkReceived(e)}))}offChunkReceived(e){var{promise:t}=Ta.get(this);t.then((t=>{t.offChunkReceived(e)}))}}function Sa({args:e}){var t=o(e.header);e.header=e.header||{},e.header=Gt(e.header),"Undefined"!==t&&"Object"!==t&&(console.warn("wx.request: header must be an object"),e.header={}),e.header=Object.keys(e.header).reduce(((t,i)=>("content-type"===i.toLowerCase()?t[i.toLowerCase()]=e.header[i]:t[i]=e.header[i],t)),{});var i="text";e.responseType&&(i=e.responseType.toLowerCase());var r,n=e.header||{},a="GET";return"string"==typeof e.method&&(a=e.method.toUpperCase()),e.dataType=e.dataType||"json",n["content-type"]=n["content-type"]||"application/json",r=void 0===e.data?"":"string"!=typeof e.data&&"ArrayBuffer"!==o(e.data)?n["content-type"].indexOf("application/x-www-form-urlencoded")>-1?xt(e.data,!0):n["content-type"].indexOf("application/json")>-1||"object"==typeof e.data?JSON.stringify(e.data):r.toString():e.data,"GET"===a&&(e.url=Pt(e.url,e.data)),{header:n,method:a,responseType:i,dataStr:r,args:e}}function Ia({args:e={},host:t}){var i,{enableHttpDNS:r,httpDNSServiceId:n}=e;if(!0===r&&s(n)){var a=(e=>{var t=va[e];return t?{expired:Date.now()>t.expireTime,ip:t.ip}:null})(t);return a&&!1===a.expired?(i=a.ip,{host:t,ip:i}):((e,t)=>(Aa[e]||(Aa[e]=ki({sdkApiName:"getDNSInfo",apiName:"webapi_wxahttpdns_gethostip",reqData:{domain:e,service_id:t}}).then((t=>{delete Aa[e];var{wxa_state:i,ip:r,ttl:n}=t.data;if(0===i)return va[e]={ip:r,expireTime:1e3*n+Date.now()},va[e];throw new Error(i)})).catch((t=>{throw delete Aa[e],t}))),Aa[e]))(t,n).then((e=>(i=e.ip,{host:t,ip:i})))}return!0===r?Promise.reject(new Error("invalid httpDNSServiceId")):{}}function xa({host:e,ip:t}){return{forbidReuse:((e,t)=>{var i=ya[e];return t?!(i&&i===t||(delete ya[e],0)):(delete ya[e],!1)})(e,t)}}function Pa({args:e}){var{host:t,protocol:i}=function(e){var t={protocol:/^(.+):\/\//,host:/:\/\/(.+?)[?#\s/]/,path:/\w(\/.*?)[?#\s]/,query:/\?(.+?)[#/\s]/,hash:/#(\w+)\s$/};return e+=" ",Object.keys(t).forEach((i=>{var r=t[i];t[i]="query"===i?r.exec(e)&&r.exec(e)[1].split("&").reduce(((e,t)=>{var i=t.split("=");return e[i[0]]=i[1],e}),{}):r.exec(e)&&r.exec(e)[1]})),t}(e.url);return{host:t,protocol:i}}function Da({protocol:e}){return{port:"http"===e?80:"https"===e?443:0}}var Ra=__safeway__.apiSign.makeApiSign;class Oa{constructor(e){this.innerParams=e,this.asyncTasks=[]}use(e){var t=e(this.innerParams,this.asyncTasks);if(t instanceof Promise){var i=t.then((e=>{Object.assign(this.innerParams,e)}));this.asyncTasks.push(i)}else Object.assign(this.innerParams,t);return this}useAfterAsyncTasks(e){return this.asyncTasks.length>0?Promise.all(this.asyncTasks).then((()=>{this.use(e)})).catch((e=>e)):this.use(e),this}catch(e){return this.catchFn=e,this}execute(){if(this.asyncTasks.length>0){var e=new Ca;return Promise.all(this.asyncTasks).then((()=>{var t=this.createRequestTask();((e,t)=>{var{resolve:i}=Ta.get(e);i(t)})(e,t)})).catch((e=>{this.catchFn&&this.catchFn(e),delete this.catchFn})),e}return this.createRequestTask()}createRequestTask(){var{args:e,host:t,ip:i,header:r,method:n,port:a,responseType:o,dataStr:s,options:l,forbidReuse:u}=this.innerParams;try{return new wa(Object.assign({},e,{header:r,method:n,responseType:o,data:s,ip:i,host:t,port:a,forbidReuse:u},Ra("createRequestTask",{url:e.url,__skipDomainCheck__:l.__skipDomainCheck__})))}catch(e){return this.catchFn&&this.catchFn(e),void delete this.catchFn}}}var ka=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),function(t={}){if(st("request",t,{url:""}))if(!1!==Dt(t.url)){try{JSON.stringify(t.data)}catch(e){return void ut("request",t,"fail to stringify data")}if("function"!=typeof t.data){var i=new Oa({args:t,options:e});return i.catch((e=>{ut("request",t,e.errno||e.message||e.errMsg)})).use(Sa).use(Pa).use(Da).use(Ia).useAfterAsyncTasks(xa),i.execute()}ut("request",t,"data should not be Function")}else ut("request",t,`invalid url "${t.url}"`)}),Ma=ka(),Na=ka({__skipDomainCheck__:!0});ca("Download",{maxTaskCount:10,functionName:"downloadFile"}),k.onReady((()=>{try{"number"==typeof k.wxAppInfo.maxDownloadConcurrent&&ca("Download",{maxTaskCount:k.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));var La=class extends ta{constructor(e){super(e,{taskType:"Download",beforeSend:t=>(t.filePath=e.filePath,t),beforeSuccess:e=>(delete e.timeInterval,e)})}},Ba=({api:e,url:t})=>(N?k.urlCheck:!0!==k.debug)?new Promise(((i,r)=>{it("checkNetworkAPIURL",{api:e,url:t,success:i,fail:r})})):Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!0}),Fa=O.Z.Download,Ua=new WeakMap,Wa=new WeakMap,Ga=new WeakMap,Va=[],ja=0,Ha=10;function za(e=!1){for(e&&(Ua.delete(e),Wa.delete(e),Ga.delete(e),ja--);Va.length>0&&ja<Ha;){var t=Va.shift(),i=Ua.get(t),r=Wa.get(t);i&&r&&(i.start(r),ja++)}}k.onReady((()=>{k.wxAppInfo&&k.wxAppInfo.maxDownloadConcurrent&&(Ha=k.wxAppInfo.maxDownloadConcurrent)}));class Ya{constructor(e){var t=new Fa,i=new _e;Ua.set(this,t),Ga.set(this,i),Wa.set(this,Ci(e,["url","header","filePath","enableProfile"])),t.onfail=t=>{ut("downloadFile",e,t),za(!0)},t.onsuccess=t=>{ct({name:"downloadFile",args:e,res:t}),za(!0)},t.onheader=e=>i.emit("header",{header:e}),t.onprogress=(e,t,r)=>i.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:r}),Ba({api:"downloadFile",url:e.url}).then((t=>{e.__skipDomainCheck__||t.isInDomainList||t.isInLAN&&!t.isLocalHost?(Va.push(this),za()):ut("downloadFile",e,"invalid url")})).catch((()=>{ut("downloadFile",e,"url validate error")}))}abort(){var e=Ua.get(this);e&&e.abort()}onHeadersReceived(e){var t=Ga.get(this);t&&t.on("header",e)}onProgressUpdate(e){var t=Ga.get(this);t&&t.on("progress",e)}offHeadersReceived(e){var t=Ga.get(this);t&&t.off("header",e)}offProgressUpdate(e){var t=Ga.get(this);t&&t.off("progress",e)}}var $a=!1;function qa(e){return $a?new Ya(e):new La(e)}i.g.__isAppServiceRemoteDebugMode__||O.Z.Download&&k.onReady((()=>{var e=!1,t=B?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";rr({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0,Rr(/^downloadFile/,2))},fail(e){}});var i=Kt("bindingDownload");$a=e||i}));var Qa=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if(st("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{return new qa(t)}catch(e){return void ut("downloadFile",t,e.message)}}}),Za=Qa(),Ka=Qa({__skipDomainCheck__:!0}),Xa=(e={})=>{if("string"!=typeof e.filePath||!e.filePath.startsWith(rn()))return Za(e);ut("downloadFile",e,"permission denied")};ca("Upload",{maxTaskCount:10,functionName:"uploadFile"}),k.onReady((()=>{try{"number"==typeof k.wxAppInfo.maxUploadConcurrent&&ca("Upload",{maxTaskCount:k.wxAppInfo.maxUploadConcurrent})}catch(e){}}));var Ja,eo=class extends ta{constructor(e){super(e,{taskType:"Upload",beforeSend:t=>(t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t),beforeSuccess:e=>e})}},to=(e={})=>(e=Object.assign({__skipDomainCheck__:!1},e),(t={})=>{if(st("uploadFile",t,{url:"",filePath:"",name:""})){"object"!=typeof t.header&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!=typeof t.formData&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);var i={},r={};t.header&&(i=Gt(t.header)),t.formData&&(r=Gt(t.formData));try{return new eo(Object.assign({},t,{header:i,formData:r,__skipDomainCheck__:e.__skipDomainCheck__}))}catch(e){return void ut("uploadFile",t,e.message)}}}),io=to(),ro=to({__skipDomainCheck__:!0}),no=BabelRuntimeHelpers.applyDecoratedDescriptor,ao=i.n(no),oo=0,so=new WeakMap,lo=new WeakMap,uo=new WeakMap,co=new WeakMap,ho={},po=new tr;ce("onSocketTaskStateChange",((e={})=>{var{state:t,socketTaskId:i}=e,r=ho[i];if(r){var n=so.get(r);if(delete e.state,delete e.socketTaskId,r){if("open"===t){r.readyState=r.OPEN;var a=uo.get(r).url,o=Date.now()-co.get(r),s=e.statusCode,l=uo.get(r).__skipDomainCheck__,u=e.profile;er("connectSocket",a,1,o,"",s,l,0,0,u)}else"close"!==t&&"error"!==t||(r.readyState=r.CLOSED);po.emit(`${n}${t}`,e),po.emit(`onSocket${t[0].toUpperCase()+t.substr(1)}`,e,r),"close"===t&&(delete ho[i],po.removeAllListeners(`${n}open`),po.removeAllListeners(`${n}close`),po.removeAllListeners(`${n}error`),po.removeAllListeners(`${n}message`))}}}));var fo=function(e,t){po.on(`${so.get(this)}${e}`,__errorTracer__.surroundThirdByTryCatch(t,`at socketTask.on${e} callback function`))},go=(Ja=class{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;var i,r=oo++;so.set(this,r),uo.set(this,t),Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((e=>{"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],`at api connectSocket ${e} callback function`))})),co.set(this,Date.now()),l(t.timeout)||(t.timeout=0);var n=()=>{it("createSocketTask",t,{beforeAll(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:e=>{lo.set(this,e.socketTaskId),ho[e.socketTaskId]=this},beforeFail:e=>{var r=t.url,n=Date.now()-co.get(this),a=t.__skipDomainCheck__;i=e.errMsg,er("connectSocket",r,2,n,i,"",a,0)}}),i&&(this.readyState=this.CLOSED,setTimeout((()=>{po.emit(`${r}error`,{errMsg:i})}),0))};m(t.customCheck)?t.customCheck(t,(e=>{e?(ut("connectSocket",t,e),this.readyState=this.CLOSED,setTimeout((()=>{po.emit(`${r}error`,{errMsg:e})}),0)):n()})):n()}send(e){if(this.readyState===this.OPEN){var t=Date.now();it("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:lo.get(this)}),{beforeAll:i=>{if(i.errMsg=i.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){var r=uo.get(this).url,n=i.errMsg.indexOf("ok")>-1?1:2,a=Date.now()-t,o=i.errMsg,s=uo.get(this).__skipDomainCheck__,l=yi(e.data);er("sendSocketMessage",r,n,a,o,"",s,l)}}})}else ut("SocketTask.send",e,"SocketTask.readyState is not OPEN")}close(e={}){it("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:lo.get(this)}),{beforeAll(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}onOpen(e){fo.call(this,"open",e)}onClose(e){fo.call(this,"close",e)}onMessage(e){fo.call(this,"message",e)}onError(e){fo.call(this,"error",e)}},ao()(Ja.prototype,"send",[le],Object.getOwnPropertyDescriptor(Ja.prototype,"send"),Ja.prototype),ao()(Ja.prototype,"close",[le],Object.getOwnPropertyDescriptor(Ja.prototype,"close"),Ja.prototype),Ja),_o=5;k.onReady((()=>{k.wxAppInfo&&k.wxAppInfo.maxWebsocketConnect&&(_o=k.wxAppInfo.maxWebsocketConnect)}));var mo=O.Z.WSS,vo=new WeakMap,yo=new WeakMap,Ao=new WeakMap,bo={},Eo=new tr,wo=0,To=0;function Co(e,t,i){t.errMsg=t.errMsg||"ok",ct({name:e,args:i,success:"ok"===t.errMsg,errMsg:t.errMsg})}class So{constructor(e,t){this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:e,writable:!1,configurable:!1,enumerable:!1});var i=wo++,r=new mo;vo.set(this,t),yo.set(this,r),Ao.set(this,i);var n=Date.now();r.onopen=(e,r)=>{this.readyState!==this.CLOSED&&(To++,this.readyState=this.OPEN,Eo.emit(`${i}open`,{header:e,profile:r}),Eo.emit("onSocketOpen",{header:e,profile:r},this),er("connectSocket",t.url,1,Date.now()-n,"","",t.__skipDomainCheck__,0,0,r))},r.onclose=(e,t)=>{To--,this.readyState=this.CLOSED,Eo.emit(`${i}close`,{code:e,reason:t}),Eo.emit("onSocketClose",{code:e,reason:t},this)},r.onmessage=e=>{this.readyState!==this.CLOSED&&(v(e)&&(e.__proto__=ArrayBuffer.prototype),Eo.emit(`${i}message`,{data:e}),Eo.emit("onSocketMessage",{data:e},this))},r.onerror=(e,t)=>{To--,this.readyState=this.CLOSED,setTimeout((()=>{Eo.emit(`${i}error`,{errCode:e,errMsg:t}),Eo.emit("onSocketError",{errCode:e,errMsg:t},this)}),0)};var a=()=>{var e={errMsg:""};To>=_o?(this.readyState=this.CLOSED,e.errMsg=`fail reach max websocket connect count ${_o}`):(e.errMsg=r.connect(Ci(t,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),e.errMsg,"ok"===e.errMsg&&(bo[i]=this),Co("connectSocket",e,t)};m(t.customCheck)?t.customCheck(t,(e=>{e?Co("connectSocket",{errMsg:e},t):a()})):(a(),Ba({api:"websocket",url:t.url}).then((e=>{if(t.url,!(t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((e=>{this.readyState=this.CLOSED;var t=e.message||e.errMsg;Eo.emit(`${i}error`,{errMsg:t}),Eo.emit("onSocketError",{errMsg:t},this)})))}send(e={}){var t={errMsg:yo.get(this).send(e.data)};(e.success||e.fail||e.complete)&&Co("sendSocketMessage",t,e)}close(e={}){this.readyState,Co("closeSocket",{errMsg:yo.get(this).close(l(e.code)?e.code:1e3,e.reason)},e)}onOpen(e){Eo.on(`${Ao.get(this)}open`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}onClose(e){Eo.on(`${Ao.get(this)}close`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}onMessage(e){Eo.on(`${Ao.get(this)}message`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}onError(e){Eo.on(`${Ao.get(this)}error`,__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}var Io=go,xo=ho;i.g.__isAppServiceRemoteDebugMode__||O.Z.WSS&&k.onReady((()=>{var e=!1,t=B?"clicfg_appbrand_ios_native_socket_wcwss":1;1===t?e=!0:rr({experimentId:t,experimentType:"Expt",success:t=>{t&&1===Number(t.testConfig)&&(e=!0)}});var i=Kt("bindingWebSocket");(e||i||O.Z.WSS.force)&&(Io=So,xo=bo,Rr(/^connectSocket/,2))}));var Po=new WeakMap,Do={};function Ro(e,t){return Do[t]||(Do[t]=new WeakMap,po.on(`onSocket${t}`,Oo(t)),Eo.on(`onSocket${t}`,Oo(t))),function(i){st(`onSocket${t}`,i,ne)&&Do[t].set(e,i)}}function Oo(e){return function(t,i){var r=i.__socketInstance__,n=Do[e].get(r),a=Po.get(r);n&&i===a&&__errorTracer__.surroundThirdByTryCatch(n,`at onSocket${e} callback function`)(t)}}var ko=(e={})=>{e=Object.assign({__skipDomainCheck__:!1},e);var t={};return{connectSocket(i){if(st("connectSocket",i,{url:""}))if(!1!==Dt(i.url,"websocket")){"object"!=typeof i.header&&void 0!==i.header&&delete i.header;var r={};i.header&&(r=Gt(i.header)),i.__skipDomainCheck__=e.__skipDomainCheck__;try{var n=Po.get(t),a=new Io(t,Object.assign({},i,{header:r}));return n&&n.readyState!==n.CLOSED?n.readyState:Po.set(t,a),a}catch(e){return e.message,void ut("connectSocket",i,e.message)}}else ut("request",i,`invalid url "${i.url}"`)},closeSocket(e){var i=Po.get(t);for(var r in i&&i.readyState!==i.CLOSED?(i.readyState=i.CLOSED,i.close(e)):ut("closeSocket",e,"WebSocket is not connected"),xo){var n=xo[r];n.__socketInstance__===t&&(n.readyState=n.CLOSED,n!==i&&n.close())}},sendSocketMessage(e){var i=Po.get(t);i&&i.readyState===i.OPEN?i.send(e):ut("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:Ro(t,"Open"),onSocketClose:Ro(t,"Close"),onSocketMessage:Ro(t,"Message"),onSocketError:Ro(t,"Error")}},Mo=ko(),No=()=>ko({__skipDomainCheck__:!0});class Lo extends Error{constructor(e){super(`APP-SERVICE-SDK:${e}`),this.type="AppServiceSdkKnownError"}}var Bo,Fo=0,Uo=function(e){return Array.isArray(e)?e.filter((e=>"string"==typeof e&&!e.startsWith("__plugins__"))):[]},Wo={setStorage:e=>{if(st("setStorage",e,{key:""}))try{var{data:t,dataType:i}=ae(e.data);it("setStorage",{key:e.key,data:t,dataType:i,storageId:Fo,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:`setStorage:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errMsg:`setStorage:fail ${t.message}`})}},setStorageSync:(e,t="")=>{if(st("setStorage",e,"")){var i=B?"setStorage":"setStorageSync",{data:r,dataType:n}=ae(t),a=!1,o="";if(it(i,{key:e,data:r,dataType:n,storageId:Fo,fail(e={}){a=!0,o=e.errMsg.replace("setStorage:","setStorageSync:")}}),a)throw new Lo(o)}},getStorage:e=>{st("getStorage",e,{key:""})&&it("getStorage",Object.assign({},e,{storageId:Fo}),{beforeSuccess:e=>{e.data=oe(e.data,e.dataType),delete e.dataType},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")})},getStorageSync:e=>{var t;if(s(e))return it(B?"getStorage":"getStorageSync",{key:e,storageId:Fo},{beforeAll:(e={})=>{t=oe(e.data,e.dataType)},checkNeedReportFail:e=>-1===e.errMsg.indexOf("data not found")}),t},getStorageInfo:e=>{it("getStorageInfo",Object.assign({},e,{storageId:Fo}),{beforeAll:e=>{e.keys=Uo(e.keys)}})},getStorageInfoSync:()=>{var e;return it("getStorageInfoSync",{storageId:Fo},{beforeAll:t=>{e=t,t.keys=Uo(t.keys),delete t.errMsg}}),e},removeStorage:e=>{st("removeStorage",e,{key:""})&&it("removeStorage",Object.assign({},e,{storageId:Fo}))},removeStorageSync:e=>{st("removeStorageSync",e,"")&&it("removeStorageSync",{key:e,storageId:Fo})},clearStorage:e=>{it("clearStorage",Object.assign({},e,{storageId:Fo}))},clearStorageSync:()=>{it(B?"clearStorage":"clearStorageSync",{storageId:Fo})}},Go={app:0,game:0,opendata:1,singlePage:2},Vo=e=>{var t=Go[e],i={};return Object.keys(Wo).forEach((e=>{var r=Wo[e];i[e]=(...e)=>(Fo=t,r(...e))})),i},jo={app:Vo("app"),game:Vo("game"),opendata:Vo("opendata"),singlePage:Vo("singlePage")},Ho=BabelRuntimeHelpers.asyncToGenerator,zo=i.n(Ho),Yo=(Bo=!1,(B||L&&k.clientVersion>=637865520)&&(Bo=!0),(()=>{var e=!1;return B&&k.clientVersion>=385877248&&(e=!0),()=>e})()),$o=(()=>{var e=!1;return B&&k.clientVersion>=385878314&&(e=!0),()=>e})(),qo=(()=>{var e=!1;return B&&k.clientVersion>=402655232&&k.clientVersion<=402655487&&(e=!0),()=>e})();k.onReady((()=>{ke.scene=k.appLaunchInfo.scene,ke.sceneNote=k.appLaunchInfo.scene_note}));var Qo=Ae("AppEnterForeground"),Zo=Qo.internalOnMethod;Date.now();var Ko="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version,Xo=0,Jo=[],es=(e,t={},i,r)=>{var n=Xo++;Jo[n]=r,void 0===i&&ke.currentWebviewId},ts=null,is=e=>{var t=M;B&&(e.brand="iPhone"),N&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=Ko,e.enableDebug=Boolean(k.debug),k.devicePixelRatio&&(e.devicePixelRatio=k.devicePixelRatio),k.theme&&(e.theme=k.theme),k.host&&(e.host=k.host),k.appLaunchInfo&&k.appLaunchInfo.mode&&(e.mode=k.appLaunchInfo.mode),L&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),delete(ts=Object.assign({},e)).errMsg,Ii()&&4!==k.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),H&&(e.renderer="h5")},rs=()=>{k.isReady||(new Error).stack},ns=e=>{rs();it("getSystemInfo",e,{beforeSuccess:is})},as=()=>{var e={};return ns({success(t){delete t.errMsg,e=t,ts=Object.assign({},e)}}),e},os=()=>ts||as(),ss=null,ls=0,us=0,cs=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];k.onReady((()=>{ss={};for(var e=0;e<cs.length;e++){if(!(cs[e]in k)){ss=os();break}ss[cs[e]]=k[cs[e]]}if(k.screenHeight&&k.screenWidth)ls=k.screenWidth,us=k.screenHeight;else{var t=os();ls=t.screenWidth,us=t.screenHeight}}));var ds,hs=()=>k.isReady?Object.assign({},ss):((new Error).stack,{}),ps=()=>k.isReady?{screenWidth:ls,screenHeight:us,deviceOrientation:ls>us?"landscape":"portrait"}:((new Error).stack,{}),fs=!1,gs=new Set;Ee("onAppRouteDone",(()=>{fs=!0,gs.forEach((e=>e())),gs.clear()}));var _s=new Set,ms=()=>{es(0,{},void 0,(e=>{ds=e,_s.forEach((t=>{try{t(e)}catch(e){}})),_s.clear()}))},vs=e=>{ds?e(ds):fs?(_s.add(e),ms()):(gs.has(ms)||gs.add(ms),_s.add(e))},ys=(()=>{var e;return(...t)=>{if(e)return e;if(!0===t[0]){if(ss)return ss;e=as()}else e=as();return e}})(),As=(Object.defineProperty,Object.hasOwnProperty,Ae("AppRouteNotFound")),bs=(As.onMethod,As.offMethod,As.emit,Ae("AppRoute")),Es=bs.internalOnMethod;bs.internalOffMethod,new Set;var ws=Ae("AppShow"),Ts=(ws.onMethod,ws.offMethod,ws.internalOnMethod);var Cs=[],Ss=[],Is=["expires","domain","path","busid","indate","receivetime","spread"],xs={scene:-1,sceneNote:"",sessionId:""};function Ps(){var e=Date.now(),t=[];Cs.forEach((i=>{var r=i.expires||i.__wxprivate_calc_expires__;if(r&&1e3*r>e){var n=[];for(var a in i)Is.indexOf(a)>=0&&n.push(`${encodeURIComponent(a)}=${encodeURIComponent(i[a])}`);n.push(`${encodeURIComponent(i.key)}=${encodeURIComponent(i.value)}`),t.push(n.join("; "))}}));var i=t.join(";; ");i.length>=4096||function(e,t){var i=k.accountInfo&&k.accountInfo.appId||"noAppId";e&&e.trim()&&es(0,{cookies:e,appId:i},void 0,t)}(i,(()=>{}))}function Ds(e,t,i){if("string"==typeof e){var r=Date.now();e.split(";;").forEach((e=>{var n;if(e.split(";").forEach((e=>{n=n||{};var t=(e=e.split("="))[0].trim(),i=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(i=+i,i=Number.isNaN(i)?void 0:i),t&&void 0!==i&&(Is.indexOf(t)>=0?n[decodeURIComponent(t)]=decodeURIComponent(i):(n.key=decodeURIComponent(t),n.value=decodeURIComponent(i)))})),n){t&&(n.receivetime=~~(r/1e3)),void 0===n.expires&&void 0!==n.indate&&n.receivetime&&(n.__wxprivate_calc_expires__=+n.receivetime+ +n.indate);var a=n.expires||n.__wxprivate_calc_expires__;a&&!(1e3*a>r)||function(e,t){for(var i=0,r=t.length;i<r;i++){var n=t[i];if(e.busid===n.busid&&e.key===n.key)return!0}return!1}(n,i)||i.push(n),k.accountInfo&&k.accountInfo.appId&&n.spread&&(n.spread="*"===n.spread?"":n.spread+":",n.spread+=k.accountInfo.appId)}}))}}Ts(((e={})=>{xs.scene=e.scene,xs.sceneNote=e.scene_note,xs.sessionId=e.sessionid}));function Rs(e){var t=[];for(var i in e)Is.indexOf(i)>=0&&t.push(`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`);return t.push(`${encodeURIComponent(e.key)}=${encodeURIComponent(e.value)}`),t.join("; ")}var Os=e=>{var t=Date.now(),i=e.cookies||[],r=e.isTemporary;if(i instanceof Array){var n=r?Ss:Cs,a=[],o={},s={},l=k.accountInfo&&k.accountInfo.appId||"";if(i.forEach((e=>{if(e.key&&"string"==typeof e.key){var i=+e.expires;if(!e.value||i&&1e3*i<t)o[e.key]={key:e.key,busid:e.busid};else{var n={key:e.key,value:e.value};Is.forEach((t=>{var i=e[t];"expires"!==t&&"indate"!==t||(i=+i,i=Number.isNaN(i)?void 0:i),"spread"===t&&i&&!r&&l&&(n.spread="*"===i?"":i+":",n.spread+=l),"receivetime"!==t&&"spread"!==t&&void 0!==i&&(n[t]=i)})),s[e.key]=n,a.push(n)}}})),n.forEach((e=>{var i=o[e.key];if(!i||(i.busid||e.busid)&&i.busid!==e.busid){var r=s[e.key];if(!r||(r.busid||e.busid)&&r.busid!==e.busid){var n=e.expires||e.__wxprivate_calc_expires__;n&&1e3*n<t||a.push(e)}}})),function(e){var t=[];return e.forEach((e=>{t.push(Rs(e))})),t.join(";; ")}(a).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";r?Ss=a:(Cs=a,Ps())}},ks=Ae("AppEnterBackground"),Ms=ks.internalOnMethod;Ee("onAppEnterBackground",((e={})=>{ks.emit(e),ke.lastEmitIsEnterForeground=!1}));var Ns=Ae("navigateBackIntercept"),Ls={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},Bs=[Ls.SlideBack,Ls.BottomBackButton,Ls.NavigationBarBack,Ls.NavigateBackCall],Fs=[],Us=0;ce("onNavigateBackIntercept",((e={})=>{var{id:t}=Fs[Fs.length-1]||{};Ns.emit(K()(K()({},e),{},{id:t})),K()(K()({},e),{},{id:t})}));var Ws=({scopes:e}={})=>{var t=new Set(e||[]),i={scopes:Bs.map((e=>({type:e,interception:t.has(e)})))};return rt("setNavigateBackInterception",i)},Gs=function(){var e=zo()((function*(e={}){var t;e=K()(K()({},e),{},{scopes:null!==(t=e.scopes)&&void 0!==t?t:Bs}),yield Ws(e);var i=++Us;return Fs.push({id:i,options:e}),{id:i}}));return function(){return e.apply(this,arguments)}}(),Vs=(ue("setNavigateBackInterception",Gs),function(){var e=zo()((function*({id:e}={}){var t=Fs.findIndex((t=>t.id===e));if(!(t<0)){var i;if(t===Fs.length-1)i=Fs.length>1?Fs[Fs.length-2].options:{scope:[]},yield Ws(i);Fs.splice(t,1)}}));return function(){return e.apply(this,arguments)}}()),js=(ue("stopNavigateBackInterception",Vs),Ns.internalOnMethod),Hs=Ns.internalOffMethod,zs=function(){var e=zo()((function*(e,t=Bs){var{id:i}=yield Gs({scopes:t}),r=t=>{t.id===i&&e(t)};return js(r),{id:i,handler:r}}));return function(t){return e.apply(this,arguments)}}(),Ys=function(){var e=zo()((function*(e){var{id:t,handler:i}=(yield e)||{};yield Vs({id:t}),Hs(i)}));return function(t){return e.apply(this,arguments)}}(),$s=e=>(t={})=>{if(!0!==ke.openUrlLock)if(t.url=t.url||"",Dt(t.url))ke.openUrlLock=!0,it(e,t,{afterAll(){ke.openUrlLock=!1}});else{console.error("invalid url",t.url);var i={errMsg:`${e}: invalid url "${t.url}"`};"function"==typeof t.fail&&t.fail(i),"function"==typeof t.complete&&t.complete(i)}},qs=$s("openUrl"),Qs=$s("private_openUrl"),Zs=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],Ks=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],Xs=({outer:e={width:0,height:0},inner:t={width:0,height:0},maxScale:i=1e3,minScale:r=0,side:n})=>{var a,o,s,l=e.width/e.height,u=t.width/t.height,c=e.width/t.width,d=e.height/t.height,h=l>u?d:c;return"width"===n?h=c:"height"===n&&(h=d),a=h,o=r,s=i,h=Math.min(Math.max(o,a),s),t.width*=h,t.height*=h,e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height),{scale:h,outer:e,inner:t}},Js=(e=0)=>new Promise((t=>{setTimeout(t,e)})),el=(e,t)=>{for(var i="",r=0,n=0;n<e.length;n++){if((r+=/[\u4e00-\u9fa5]/.test(e[n])?2:1)>t){i+="...";break}i+=e[n]}return i},tl=e=>e.split("-").map(((e,t)=>0===t?e:e[0].toUpperCase()+e.slice(1))).join(""),il=e=>(t={})=>new Promise(((i,r)=>{e(Object.assign(t,{success:i,fail:r}))})),rl=e=>{var t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map(((e,t)=>(e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e))).join(""):"#00000000":e},nl=new _e({maxListeners:2e5}),al=32768,ol="portrait",sl="";k.onReady((()=>{ol=k.deviceOrientation||ol,sl=hs().model||""}));var ll=(e,t)=>-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?`element-${t}-${e}`:-1!==["layout"].indexOf(e)?e:void 0;class ul{constructor({parentId:e=0,id:t=al++,style:i={},props:r={},name:n=""}={}){var a=k.platform;this.parentId=e,this.dest=0,this.id=t,this.name=n,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((e=>{this.on("ready",e)})),i=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},i),Object.assign(i,i[ol]);var o=/iphone x/.test(sl.toLowerCase())?"iphone x":a;Object.assign(i,i[o]),Object.assign(i,i[`${o}-${ol}`]),this.style={},this.computedStyle=Object.assign({},i),this.lastComputedStyle=Object.assign({},i),this.layoutBox=null,Object.keys(i).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>i[e],set:t=>{if(t!==i[e]&&void 0!==t){if(i[e]=t,this.computedStyle[e]=t,this.lastComputedStyle[e]=t,-1!==Zs.indexOf(e)&&this.style.scale){var r=t*this.style.scale;this.computedStyle[e]=r,this.lastComputedStyle[e]=r}"scale"===e&&Zs.forEach((e=>{i[e]&&(this.computedStyle[e]=i[e]*t,this.lastComputedStyle[e]=i[e]*t)})),this.shouldUpdate=!0,"hidden"===e&&(t?(this.id,this.name,this.computedStyle.width,this.computedStyle.height,Ks.forEach((e=>{this.computedStyle[e]=0}))):(this.id,this.name,this.lastComputedStyle.width,this.lastComputedStyle.height,Ks.forEach((e=>{this.computedStyle[e]=this.lastComputedStyle[e]})))),this.requestLayout()}}})})),Zs.forEach((e=>{if(this.style[e]&&this.style.scale){var t=this.style[e]*this.style.scale;this.computedStyle[e]=t,this.lastComputedStyle[e]=t}})),i.hidden&&Ks.forEach((e=>{this.computedStyle[e]=0})),Object.keys(r).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>r[e],set:t=>{t!==r[e]&&(r[e]=t,this.shouldUpdate=!0,this.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((e=>{this.on(e,(t=>{if(this.bubbleEvent&&this.parent){var i=0,r=0;try{i=this.layoutBox.left,r=this.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){var n=Object.assign({},t);n.x+=i,n.y+=r,this.parent.emit(e,n)}else{var a=t.map((e=>({x:e.x+i,y:e.y+r})));this.parent.emit(e,a)}}}))}))}getChildren(){return Object.keys(this.children).map((e=>{var t=this.children[e];return t.dest=this.dest,{id:t.id,name:t.name,style:t.computedStyle,children:t.getChildren()}}))}getAbsolutePosition(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};var{left:t,top:i}=this.getAbsolutePosition(e.parent);return{left:t+e.layoutBox.left,top:i+e.layoutBox.top}}add(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}remove(e){e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((e=>{this.children[e].remove(),delete this.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}emit(e,t){nl.emit(ll(e,this.id),t)}on(e,t){nl.on(ll(e,this.id),t)}once(e,t){nl.once(ll(e,this.id),t)}off(e,t){nl.off(ll(e,this.id),t)}nextLayout(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextLayout(e)));setTimeout(e,250)}nextUpdate(e){if(!e||"function"!=typeof e)return new Promise((e=>this.nextUpdate(e)));this.once("update-done",e)}ready(){var e=Object.keys(this.children).map((e=>this.children[e].ready()));return Promise.all(e.concat(this.readyResult))}requestLayout(){this.emit("layout")}forceUpdate(){var e=this.isInserted?this.update():this.insert(),t=Object.keys(this.children).map((e=>this.children[e].forceUpdate()));return e.then((()=>Promise.all(t)))}insert(){return Promise.resolve()}update(){return Promise.resolve()}destroy(){["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((e=>{var t=ll(e,this.id);nl.removeAllListeners(t)}))}}var cl=e=>{var{id:t}=JSON.parse(e.data);nl.emit(ll("click",t))};Ee("onTextViewClick",cl),Ee("onImageViewClick",cl),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((e=>{var t=e.replace(/^on/,"").toLowerCase();Ee(e,(e=>{try{var{id:i}=JSON.parse(e.data);nl.emit(ll(t,i),e.touch||e.touches)}catch(e){}}))}));var dl=new Map,hl=new WeakMap,pl=new WeakMap,fl=new WeakMap;function gl(e){return new Promise(((t,i)=>{var r=pl.get(this);it("insertHTMLWebView",{htmlId:this.id,position:r,src:hl.get(this),zIndex:fl.get(this),backgroundColor:r.backgroundColor,__skipDomainCheck__:e,success:t,fail:i})}))}class _l extends ul{constructor({src:e,zIndex:t,style:i={},__skipDomainCheck__:r}){super({style:i}),dl.set(this.id,this),hl.set(this,e),pl.set(this,i),fl.set(this,t),gl.call(this,r),this.isInserted=!0}get src(){return hl.get(this)}set src(e){hl.set(this,e),it("updateHTMLWebView",{htmlId:this.id,src:e})}get style(){return pl.get(this)}set style(e){this.style||pl.set(this,{});var t=Object.assign(this.style,e);this.isInserted&&it("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}get zIndex(){return fl.get(this)}set zIndex(e){fl.set(this,e),it("updateHTMLWebView",{htmlId:this.id,zIndex:e})}destroy(){dl.delete(this.id),it("removeHTMLWebView",{htmlId:this.id})}}function ml(){return[...dl.keys()]}function vl({htmlId:e}){var t=dl.get(e);t&&t.onload&&setTimeout(t.onload)}function yl({name:e,arg:t,htmlId:i}){"postMessage"===e&&dl.forEach((({onmessage:e},r)=>{i&&i!==r||e&&setTimeout((()=>e(t)))}))}k.onReady((()=>{4===k.appType&&(Ee("onWebviewFinishLoad",vl),Ee("onWebInvokeAppService",yl),Ee("WEB_INVOKE_APPSERVICE",yl))}));var Al=1,bl=2,El=3,wl=4,Tl=5,Cl=6,Sl=7,Il=8,xl=9,Pl=13,Dl=14,Rl=16,Ol=17,kl=18,Ml={sampleEventList:[]},Nl=new Map;function Ll(e,t){var i=function(e){return Ml.sampleEventList.find((t=>e===t.event))}(e);if(i){var r=Date.now(),n=Nl.get(i);if(i.sample_interval_seconds,(r-n)/1e3<i.sample_interval_seconds)return;it("reportCanvasData",{eventInfo:JSON.stringify(i),viewId:t>0?t:0,success(){Nl.set(i,r)},fail({errMsg:e}){}})}}Ae("XWebTextareaSupportedEvent");var Bl=Ae("DomReady"),Fl=(Bl.internalOnMethod,!1),Ul=(e={})=>{var t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};if(st("showModal",t=Nt(t,e),{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})){var i=!1;e.__sdk_inner_allowShowMoreLength__&&(i=!0),!i&&t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?ut("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?ut("showModal",e,"cancelText length should not larger than 4 Chinese characters"):it("showModal",t,{beforeSuccess:e=>{e.confirm=Boolean(e.confirm),e.cancel=B||U?!e.confirm:!e.confirm&&Boolean(e.cancel),Tu()},beforeAll(){Fl=!0},afterAll(){Fl=!1}})}},Wl=(e={})=>{e.__sdk_inner_allowShowMoreLength__&&delete e.__sdk_inner_allowShowMoreLength__,Ul(e),bi()&&Ll(Dl)},Gl={};var Vl=1,jl=!1,Hl=(e={})=>{var t={duration:1500,title:"",icon:"success",mask:!1};if(t=Nt(t,e),e.image&&(t.image=Ct(ke.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),st("showToast",t,{duration:1,title:"",icon:""})){var i=Gl[ke.currentWebviewId]||[];i.length>0&&(jl=!1,Yl=!1,i.forEach((e=>{var{res:t,args:i}=e;"function"==typeof i.success&&i.success(t),"function"==typeof i.complete&&i.complete(t)})),delete Gl[ke.currentWebviewId]),jl=Vl++,setTimeout((()=>{jl=!1}),t.duration),t.maskAll=!1,it("showToast",t)}},zl=(e={})=>{if(N&&Yl&&(!jl||jl<Yl))return jl=!1,"function"==typeof e.success&&setTimeout((()=>{e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((()=>{e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");ke.currentWebviewId;jl=!1,it("hideToast",e)},Yl=!1,$l=(e={})=>{var t={title:"",icon:"loading",mask:!1,duration:1e8};if((t=Nt(t,e)).icon="loading",delete t.image,st("showLoading",t,{duration:1,title:""})){var i=Gl[ke.currentWebviewId]||[];i.length>0&&(jl=!1,Yl=!1,i.forEach((e=>{var{res:t,args:i}=e;"function"==typeof i.success&&i.success(t),"function"==typeof i.complete&&i.complete(t)})),delete Gl[ke.currentWebviewId]),Yl=Vl++,t.maskAll=!1,it("showToast",t,{beforeAll:e=>{e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},ql=(e={})=>{if(N&&jl&&(!Yl||Yl<jl))return Yl=!1,"function"==typeof e.success&&setTimeout((()=>{e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((()=>{e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");ke.currentWebviewId;Yl=!1,it("hideToast",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},Ql={constant:{modalCancel:"取消"}};Ql.attemptSkipMaxThreshold=5,Ql.currentAttemptSkipCount=0,Ql.currentUserFirstUseThisGame=!1,Ql.currentUserUseThisGameTime=0,Ql.currentUserUseThisGameTimer=null,Ql.isPause=null,Ql.limitStrategy=null;var Zl=e=>1===e?3303:3304,Kl={count:0,uuid:ie(),navigateCount:0,bannedCount:0},Xl=(e,t,i)=>{Kl.count,Kl.uuid,Kl.bannedCount,Kl.navigateCount,parseInt(Date.now()/100,10),Reporter.reportKeyValue({key:"WeAppNavBan",value:[k.appType+1e3,k.appLaunchInfo.scene,33,Zl(e),0,1,"","",$i(),encodeURIComponent(JSON.stringify({content:t,expid:i,uuid:Kl.uuid,bannedCount:Kl.bannedCount,navigateCount:Kl.navigateCount,count:Kl.count,timestamp:parseInt(Date.now()/100,10)}))].join(",")})};Object.defineProperties(Ql,K()(K()({allowSkip:{get(){return this.shouldExecuteSkipMaxLimitStrategy&&(this.startLimitCount&&this.currentAttemptSkipCount++,this.currentAttemptSkipCount>this.attemptSkipMaxThreshold)?(this.limitStrategy=1,Xl(1,this.modalMessage,this.expId1),1):this.shouldExecuteFirstSkipLimitStrategy&&this.currentUserUseThisGameTime<=this.attemptSkipMinTime?(this.limitStrategy=2,Xl(2,this.modalMessage,this.expId2),2):3},configurable:!1},needLimit:{get(){return this.shouldExecuteFirstSkipLimitStrategy||this.shouldExecuteSkipMaxLimitStrategy},configurable:!1}},["modalConfirm1","modalMessage1","modalSkipLink1","modalConfirm2","modalMessage2","modalSkipLink2","attemptSkipMaxThreshold","attemptSkipMinTime","currentAttemptSkipCount","shouldExecuteFirstSkipLimitStrategy","shouldExecuteSkipMaxLimitStrategy","expId1","expId2","startLimitCount","uneffectFirstSkipLimit"].reduce(((e,t)=>(e["set"+t.slice(0,1).toUpperCase()+t.slice(1)]={get:()=>e=>{Ql[t]=e},configurable:!1},e)),{})),{},{modalMessage:{get(){return this["modalMessage"+this.limitStrategy]},configurable:!1},modalConfirm:{get(){return this["modalConfirm"+this.limitStrategy]},configurable:!1},modalSkipLink:{get(){return this["modalSkipLink"+this.limitStrategy]},configurable:!1},reportModalConfirm:{get(){return()=>{var e,t,i;e=this.limitStrategy,t=this.modalMessage,i=this["expId"+this.limitStrategy],Reporter.reportKeyValue({key:"WeAppNavBan",value:[k.appType+1e3,k.appLaunchInfo.scene,33,Zl(e),1,2,"","",$i(),encodeURIComponent(JSON.stringify({content:t,expid:i}))].join(",")})}},configurable:!1},reportModalCancel:{get(){return()=>{var e,t,i;e=this.limitStrategy,t=this.modalMessage,i=this["expId"+this.limitStrategy],Reporter.reportKeyValue({key:"WeAppNavBan",value:[k.appType+1e3,k.appLaunchInfo.scene,33,Zl(e),2,2,"","",$i(),encodeURIComponent(JSON.stringify({content:t,expid:i}))].join(",")})}},configurable:!1}})),Ql.resumeLimitTimer=function(e){this.isPause=!1,e&&clearTimeout(this.currentUserUseThisGameTimer),this.currentUserUseThisGameTimer=setTimeout((()=>{this.currentUserUseThisGameTime++,this.isPause||(this.currentUserUseThisGameTime<=this.attemptSkipMinTime?this.resumeLimitTimer():this.uneffectFirstSkipLimit||(this.setUneffectFirstSkipLimit(!0),this.setCurrentAttemptSkipCount(0)))}),1e3)},Ql.pauseLimitTimer=function(){this.isPause=!0},Ql.allowStartLimitCount=function(){this.setStartLimitCount(!0)};var Jl=Ae("tapAnyWhere");Jl.emitInternal;var eu,tu=Jl.internalOnMethod,iu=Jl.internalOffMethod,ru=ee(Oi),nu=function(){var e=zo()((function*(e={},t={},i={}){JSON.stringify(e),JSON.stringify(t),JSON.stringify(i);var r=Object.assign({},e);delete r.sourcetype,delete r.preScene,delete r.preSceneNote,delete r.mode,7!==k.appType&&(delete r.scene,delete r.sceneNote);var n=(e=>{var t=Date.now(),i=[];Cs.forEach((e=>{var r=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!r||1e3*r>t)&&i.push(Rs(e))}));var r=i.join(";; ");return e&&e.success&&e.success({cookies:r}),r})();n?(r.privateExtraData=r.privateExtraData||{},r.privateExtraData.cookies=n):r.privateExtraData&&delete r.privateExtraData.cookies;var a=Object.assign({},r,t);return"string"==typeof a.path&&a.path.trim().length>0?a.path=Ot(a.path).trim():a.path=void 0,a.halfPage=Object.assign({},a.halfPage||{}),a.halfPage.hideCapsuleMenu=!1,a.halfPage.capsuleMenuType="singleClose",JSON.stringify(a),a.needTransferToWeChat&&xi()?(yield rt("sdk_navigateToMiniProgram",a,i),{}):rt("navigateToMiniProgram",a,i)}));return function(){return e.apply(this,arguments)}}(),au=ue("doNavigateToMiniProgram",nu),ou=(e,t,i,r)=>{var n=[e,t,k.appType+1e3,i+1e3,r].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:n})},su=()=>(eu||(eu=new Promise((e=>{__sclEngine__.initScl((t=>e(t.mainRoot)))}))),eu),lu=function(){var e=zo()((function*(e){var t,i=yield su();switch(cu){case uu.HALF_SCREEN_DIALOG_WITHOUT_LOGO:t=i.append("navigateToMp",{title:e.oldWording,logo:"",name:"",type:uu.HALF_SCREEN_DIALOG});break;case uu.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:t=i.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:uu.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({used_friend_cnt_sub_desc:e})=>{t.setData({desc:e||""})}));break;case uu.HALF_SCREEN_DIALOG_WITH_SCORE:t=i.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:uu.HALF_SCREEN_DIALOG}),e.expensiveWording&&e.expensiveWording.then((({score_sub_desc:e})=>{t.setData({desc:e||""})}));break;default:t=i.append("navigateToMp",{title:e.title,logo:e.icon_url,name:e.desc,type:cu})}var r=zs((e=>{[Ls.BottomBackButton,Ls.NavigationBackInterceptionType,Ls.NavigateBackCall].includes(e.type)&&t.handleCancel()})),n=yield new Promise((e=>{t.addListener("confirm",(()=>{e({confirm:!0})})),t.addListener("cancel",(()=>{e({confirm:!1})}))}));return Ys(r),n}));return function(t){return e.apply(this,arguments)}}(),uu={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5},cu=uu.DEFAULT;k.onReady((()=>{rr({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:e=>{JSON.stringify(e),e&&void 0!==e.testConfig&&(cu=Number(e.testConfig)||uu.DEFAULT,Object.values(uu).includes(cu)||(cu=uu.DEFAULT))}})}));var du,hu=function(){var e=zo()((function*(e,t,i,r,n,a){if(1!==t){var o,s=cu!==uu.DEFAULT&&void 0!==__sclEngine__&&(N||B||L)&&n,l=s?cu:uu.DEFAULT;try{o=s?yield lu(K()(K()({},n),{},{oldWording:e,expensiveWording:a})):yield rt("showModal",{title:e,content:"",confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA"})}catch(e){throw ou(3,i,r,l),e}var{confirm:u}=o;if(!u)throw ou(2,i,r,l),new Error("cancel");Ql.shouldExecuteSkipMaxLimitStrategy&&Ql.setCurrentAttemptSkipCount(0),ou(1,i,r,l)}}));return function(t,i,r,n,a,o){return e.apply(this,arguments)}}(),pu=function(){var e=zo()((function*({appId:e,path:t,shortLink:i}){var r,n=new Promise((e=>{r=e}));e&&!i&&r(e);var a=n.then((e=>_u({appId:e}))),o=0,s=1;try{var l=yield ru({apiName:"webapi_getnavigatewxaappinfo",reqData:{req_type:i?s:o,target_appid:e,target_short_link:i}});JSON.stringify(l.data);var u=l.data,c=u.action_code,d=u.skip_local_check,h=Boolean(u.runtime_sdk_whitelist),p=u.target_short_link_info,f=u.allow_embedded_mode;return p&&(e=p.wxa_appid,t=(p.wxa_path||"").replace(/\.html(\?|$)/,"$1"),r(e)),{appId:e,path:t,actionCode:c,skipLocalCheck:d,reason:u.reason,wording:u.wording,appType:u.apptype,newWording:u.new_wording,popupInfo:u.pop_up_info,needTransferToWeChat:h,shortLinkInfo:p,allowEmbeddedMode:f,expensiveInfo:a}}catch(e){throw e.message||e.errMsg,e}}));return function(t){return e.apply(this,arguments)}}(),fu=1,gu=2,_u=function(){var e=zo()((function*(e){var t=[];switch(cu){case uu.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:t.push(gu);break;case uu.HALF_SCREEN_DIALOG_WITH_SCORE:t.push(fu)}if(!t.length)return{};e.appId;try{var{data:i}=yield ru({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:e.appId,desc_type_list:t}});return i}catch(e){return e.message,{}}}));return function(t){return e.apply(this,arguments)}}(),mu=(du=[],k.onReady((()=>{Array.isArray(k.navigateToMiniProgramAppIdList)&&(du=k.navigateToMiniProgramAppIdList,Kt("openWxappLimit5")&&du.splice(5))})),(e,t)=>new Promise(((i,r)=>{var n=Ai("navigateToMiniProgramConfig");!1===n||N?t?i():du.indexOf(e)>-1?i({sourcetype:4}):r({errMsg:`appId "${e}" is not in navigateToMiniProgramAppIdList`}):!0===n?i():"unknown"===n&&i({sourcetype:4})}))),vu=!1,yu=function(){var e=zo()((function*({appId:e,path:t,shortLink:i},r){if(vu)throw new Error("another navigation is in progress");vu=!0;try{cu!==uu.DEFAULT&&su();try{r||(r=yield pu({appId:e,path:t,shortLink:i}))}catch(i){return i.errMsg||i.message,{appId:e,path:t}}var{actionCode:n,skipLocalCheck:a,reason:o,wording:s,appType:l,newWording:u,popupInfo:c,needTransferToWeChat:d,expensiveInfo:h}=r,p=1===n;if(e=r.appId,t=r.path,1!==n&&2!==n)throw c?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[k.appType+1e3,k.appLaunchInfo.scene,33,3302,0,1,o,"跳转跳出",$i()].join(",")}),it("showModal",{showCancel:!0,content:c.desc,confirmText:c.confirm_wording,cancelText:c.cancel_wording,success({confirm:e}){var t=c.confirm_url;e&&Qs({url:t}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[k.appType+1e3,k.appLaunchInfo.scene,33,3302,e?1:2,2,o,"跳转跳出",$i()].join(",")})}})):s&&it("showModal",{content:s,showCancel:!1}),new Error(o);var f=oi().apiCategory;if(1!==n&&["nativeFunctionalized","embedded"].includes(f)){if(7!==l)throw Hl({icon:"none",title:"暂不支持当前功能"}),new Error(`not supported in ${f} apiCategory.`);p=!0}try{var g=yield mu(e,a);return p||(yield hu(s,n,e,l,u,h)),K()(K()({},g),{},{appId:e,path:t,needTransferToWeChat:d})}catch(e){var _=e.errMsg||e.message;throw new Error(_)}}finally{vu=!1}}));return function(t,i){return e.apply(this,arguments)}}(),Au=(ue("checkBeforeNavigateToMiniProgram",yu),function(){var e=zo()((function*(e={}){if(!e.appId&&!e.shortLink)throw new Error("should have appId or shortLink");e.appId&&lt(e,{appId:""}),e.shortLink&&st(e,{shortLink:""}),e.appId,e.path,e.shortLink;try{var t=yield yu({appId:e.appId,path:e.path,shortLink:e.shortLink});return JSON.stringify(t),yield nu(e,{appId:t.appId,path:t.path,sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}catch(e){var i=e.errMsg||e.message;throw["cancel","another navigation is in progress"].includes(i)||Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at checking before navigate to miniprogram"}),new Error(i)}}));return function(){return e.apply(this,arguments)}}()),bu=ue("navigateToMiniProgramWithoutTapCheck",Au),Eu=!1,wu=0;Ms((()=>{wu=0,Eu=!1}));var Tu=()=>{wu=Date.now(),Eu=!0};ue("navigateToMiniProgram",function(){var e=zo()((function*(e){var t=k.accountInfo.appId;if(0!==k.appType||"wx308bd2aeb83d3345"===t||"wxc98889eca359c1e5"===t)return Au(e);if(!Eu)throw new Error("can only be invoked by user TAP gesture.");return Yt({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===wu?-2:Date.now()-wu}),Au(e)}));return function(t){return e.apply(this,arguments)}}()),ue("navigateToMiniProgramDirectly",function(){var e=zo()((function*(e){if(!Kt("navigateToMiniProgramDirectly"))throw new Error("no permission");return nu(e,e)}));return function(t){return e.apply(this,arguments)}}());var Cu=!1,Su=500,Iu=!1,xu=0,Pu=1,Du=2,Ru=3,Ou=4,ku=()=>{var e,t,i;return{shouldCheck:null!==(e=Cu)&&void 0!==e&&e,timeout:null!==(t=Su)&&void 0!==t?t:500,deprecated:null!==(i=Iu)&&void 0!==i&&i}},Mu=function(){var e=zo()((function*(e){try{var{data:t}=yield Vu({apiName:"webapi_openproduct_bizaccount",reqData:{path:e.path,query:JSON.stringify(e.query||{})}});if(void 0!==t.openproduct_checkticket&&(Cu=!!t.openproduct_checkticket),void 0!==t.openproduct_checktickettimeout&&(Su=parseInt(t.openproduct_checktickettimeout,10)),void 0!==t.openproduct_checkticket_deprecated&&(Iu=!!t.openproduct_checkticket_deprecated),void 0!==t.openleague_cookie){var i=[];Ds(t.openleague_cookie||"",!1,i);var r=Os({cookies:i});r&&wxNativeConsole.error("[set openleague_cookie]",r)}}catch(e){}}));return function(t){return e.apply(this,arguments)}}();k.onReady((()=>{setTimeout((()=>Mu(k.appLaunchInfo||{})),1e3)})),Zo((e=>{(e.reLaunch||e.isLaunch)&&Mu(e)}));var Nu=(()=>{var e,t,i,r;return Zo((n=>{e=+n.scene||0,t=n.scene_note||n.sceneNote||"",i=+n.prescene||0,r=n.prescene_note||n.presceneNote||""})),k.onReady((()=>{(()=>{var n=k.appLaunchInfo||{};e=n.scene||0,t=n.scene_note||n.sceneNote||"",i=n.prescene||0,r=n.prescene_note||n.presceneNote||""})()})),()=>({scene:e,scene_note:t,prescene:i,prescene_note:r})})(),Lu=ue("requestPayment",function(){var e=zo()((function*(e){var t=A(e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""});if(t)throw new Error(`parameter error: ${t}`);e=Object.assign({},e);var{deprecated:i,shouldCheck:r}=ku(),n=!1;if(n="develop"===k.envVersion||"trial"===k.envVersion?k.usingShopPlugin||!1:r||!1){if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),i)throw new Error("deprecated for shop plugin");var a=xu,o=e.ticket||"";try{var s=ku().timeout||500;try{var{is_authorized:l}=yield Promise.race([ju(K()({ticket:o,prepay_id:e.package.replace("prepay_id=","")},Nu())),Hu("timeout",s)]);a=l?Ru:Ou}catch(e){wxNativeConsole.error("[paymentCheckTicket] fail",e),a=e&&"timeout"===e.message?Du:Pu}if(a===Ou)throw new Error("check ticket rejected")}finally{zu({ticket:o,checkTicketStatus:a})}}var u,c=$u.NONE;try{var d=yield Yu(e);return c=$u.SUCCESS,d}catch(e){throw c=$u.FAILED,u=e.message,e}finally{n&&qu({prepayId:(e.package||"").replace("prepay_id=",""),requestPaymentStatus:c,requestPaymentErrmsg:u})}}));return function(t){return e.apply(this,arguments)}}()),Bu=0,Fu=1,Uu=2,Wu=function(){var e=zo()((function*(){var{time:e,isRiskWarning:t,wording:i}=yield new Promise((e=>{!function(e){var t=k.accountInfo&&k.accountInfo.appId||"noAppId";es(0,{appId:t},void 0,e)}((t=>{var i,r,n,a,o=!1,s="";((null==k||null===(i=k.appContactInfo)||void 0===i||null===(r=i.operationInfo)||void 0===r||null===(n=r.jsonInfo)||void 0===n||null===(a=n.warning_info)||void 0===a?void 0:a.jsapi_alter)||[]).forEach((e=>{"requestPayment"===e.jsapi_name&&e.wording&&(o=!0,s=e.wording)})),e({time:t,isRiskWarning:o,wording:s})}))})),r=(+new Date-(e||0))/1e3/60;if(t&&!(r<30)){var n=Bu;try{yield new Promise(((e,t)=>{Ul({content:i,confirmText:"继续支付",cancelText:"取消",success(i){i.confirm?(n=Fu,e()):(n=Uu,t(new Error("cancel")))}})})),function(e,t){var i=k.accountInfo&&k.accountInfo.appId||"noAppId";e&&es(0,{requestPayment:e,appId:i},void 0,t)}(+new Date)}finally{(e=>{var t=Object.keys(ke.query).map((e=>`${e}=${ke.query[e]}`)).join("&"),i=[`${ke.lastRoute}?${t}`,e].join(",");Reporter.reportKeyValue({key:"RequestPaymentRiskConfirm",value:i})})(n)}}}));return function(){return e.apply(this,arguments)}}(),Gu=ee(it.bind(null,"requestPayment")),Vu=ee(Oi),ju=function(){var e=zo()((function*(e={}){var{data:t}=yield Vu({apiName:"webapi_openproductcheckticket",reqData:K()({},e)});return t}));return function(){return e.apply(this,arguments)}}(),Hu=(e,t)=>new Promise(((i,r)=>setTimeout((()=>r(new Error(e))),t))),zu=({ticket:e,checkTicketStatus:t})=>{var i=k.appLaunchInfo||{},r=Nu(),n=[i.sessionid||i.sessionId||"",r.scene,r.scene_note,r.prescene,r.prescene_note,t||0,e||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:n})},Yu=function(){var e=zo()((function*(e){yield Wu();var t=(e=>{var t=Date.now(),i=[];Cs.forEach((e=>{var r=e.expires||e.__wxprivate_calc_expires__;(!r||1e3*r>t)&&i.push(e)}));var r=k&&k.accountInfo&&k.accountInfo.appId||"",n=xs.scene||"",a=xs.sceneNote||"",o=xs.sessionId||"";i.push({key:"appid",value:r,busid:"wxapp"},{key:"sessionid",value:o,busid:"wxapp"},{key:"scene",value:n,busid:"wxapp"},{key:"scene_note",value:a,busid:"wxapp"});var{hostAppId:s,pluginAppId:l}=e&&e.pluginInfo?e.pluginInfo:{};if(void 0!==s&&void 0!==l){var u=i.find((e=>"appid"===e.key));u&&(u.value=s),i.push({key:"plugin_appid",value:l,busid:"wxapp"})}var c=k.host||{};"SDK"===c.env&&i.push({key:"sdk_host_appid",value:c.appId,busid:"wxapp"});var d=i.map(Rs).join(";; ");return e&&e.success&&e.success({cookies:d}),d})();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie;var i=Ce(),r=()=>!0,n={afterSuccess:r};N&&(n.afterAll=r);var a=yield Gu(K()(K()({adUxInfo:i},e),{},{grantMessageQuota:!0}),n);return Oi({apiName:"webapi_reportpayrecord",reqData:{prepay_id:e.package.replace("prepay_id=","")}}),es(0,{packageStr:e.package}),Tu(),a}));return function(t){return e.apply(this,arguments)}}(),$u={NONE:0,SUCCESS:1,FAILED:2},qu=function(){var e=zo()((function*({extUserUin:e,addOrderStatus:t,requestPaymentStatus:i,requestPaymentErrmsg:r,prepayId:n,outOrderId:a}){var o=ys(!0),s=k.appLaunchInfo||{},{data:l}=yield ki({apiName:"webapi_openproductreportorder",reqData:{ext_info:K()(K()({ext_useruin:e,ext_appid:k.host&&k.host.appId,session_id:s.sessionid||s.sessionId||""},Nu()),{},{add_order_status:t,request_payment_status:i,request_payment_errmsg:r,model:o.model,brand:o.brand,version:o.version,system:o.system,platform:o.platform,sdk_version:o.SDKVersion}),prepay_id:n,order_info:{out_order_id:a}}});return l}));return function(t){return e.apply(this,arguments)}}(),Qu="getShareInfo",Zu={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1};function Ku(e){return new Promise(((t,i)=>{"boolean"==typeof e.withShareTicket?it("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:i},{beforeAll(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function Xu(e){return new Promise(((t,i)=>{if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){var r=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});it("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:r,success:t,fail:i}),!0===e.isPrivateMessage?Zu.isPrivateMessage=!0:!1===e.isPrivateMessage&&(Zu.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function Ju(e){return new Promise(((t,i)=>{"string"==typeof e.toDoActivityId?(it("updateShareMenuUpdatable",{updatable:!0}),it("updateShareMenuShareTicket",{withShareTicket:!0}),it("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:e=>{t(e)},fail:e=>{i(e)}})):t({errMsg:"updateShareMenu:ok"})}))}var ec=e=>{Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})},tc="authPrivateMessage";var ic=new _e,rc={map:{},set(e){var t=ie();return this.map[t]=e,t},get(e){return e?this.map[e]:Object.keys(this.map).map((e=>this.map[e]))}},nc=function(e,t){return Li(e,t,(function(e){var t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:`${+new Date}_${Math.random()}`}}),(function(e){return e}))}("getCloudFileUrl","qbase_commapi");var ac=function(e,t,i){sc({fileIds:e,type:t,success:i})},oc=new Map,sc=function(e){var{fileIds:t,type:i,success:r}=e,n=new Map,a=[],o=!1;if(t.forEach((e=>{var t=oc.get(e);if(t){if(Date.now()<t.expireTime)return void(n.has(e)||(n.set(e,t.data),o||(o=!0)));oc.delete(e)}/^(cloud):\/\//.test(e)&&a.push(e)})),0!==a.length){var s=0,l=function(e,t){for(var i=[],r=Math.ceil(e.length/t),n=0;n<r;n++)i.push(e.slice(n*t,(n+1)*t));return i}(t,50);Promise.all(l.map((e=>new Promise((t=>{nc({data:{fileid_list:e,type:i},requestInQueue:!1,success(i){var r=i;if(r.baseresponse&&0===r.baseresponse.errcode?r.download_list.forEach((e=>{n.set(e.fileid,e),!oc.has(e.fileid)&&e.max_age&&oc.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):r.baseresponse?e.forEach((e=>{n.set(e,{download_url:e,service_errcode:r.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+r.baseresponse.errcode}),oc.has(e)&&oc.delete(e)})):e.forEach((e=>{n.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),oc.has(e)&&oc.delete(e)})),r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time){var a=r.baseresponse.stat.qbase_cost_time;a>s&&(s=a)}t()},fail(){t()},complete(e){}})}))))).then((()=>{lc(t,n,s,r)})).catch((e=>{"function"==typeof r&&r({data:t.map((t=>({url:t,service_errcode:-1,errmsg:e+""})))})}))}else o?lc(t,n,0,r):"function"==typeof r&&r({data:t.map((e=>({url:e})))})};function lc(e,t,i,r){var n=[];e.forEach((e=>{if(/^(cloud):\/\//.test(e)){var i=t.get(e);i?0===i.service_errcode?n.push({url:i.download_url}):n.push({url:e,code:i.service_errcode,msg:i.errmsg}):n.push({url:e,code:-1,msg:"NO_RESULT"})}else n.push({url:e})})),"function"==typeof r&&r({data:n,cost:i})}var uc,cc=(e,t)=>{st("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?it("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success(t){404!==t.statusCode?(e.src=t.tempFilePath,it("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})):ut("getImageInfo",e,"image not found (404)")},fail(t){ut("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=Ct(ke.lastRoute,e.src,!1),it("getImageInfo",e,{beforeSuccess:t=>{t.path=e.src}})))},dc=ee((e=>{var t=Object.assign({},e),i=[t.src];ac(i,"image",(e=>(t.src=e.data[0].url,cc(t,Xa))))})),hc=1,pc=3,fc=4,gc=5,_c=6,mc=7,vc=({action:e})=>{var t=k.appLaunchInfo||{},i=[k.appType+1e3,e,t.sessionid||t.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:i})},yc=function(){var e=zo()((function*(e){var t=(yield new Promise((e=>__sclEngine__.initScl((t=>e(t.mainRoot)))))).append("share-image",{imgPath:e.imgPath,height:e.height,width:e.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg",imageDarkSrc:"https://res.wx.qq.com/op_res/9uyxJUMf5aP9owCkoJvfePWjtv7dvB_UbB9Mh2QOnIvTu_Q6ulI-q0micEIFzNyo-XSO9_sHyTzCgIXG4zFhDg"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),i=zs((e=>{[Ls.BottomBackButton,Ls.NavigationBackInterceptionType,Ls.NavigateBackCall].includes(e.type)&&t.handleClose()})),{action:r}=yield new Promise((e=>{["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((i=>{t.addListener(i,(()=>e({action:i})))}))}));return Ys(i),{action:r}}));return function(t){return e.apply(this,arguments)}}(),Ac=ue("showShareImageMenu",function(){var e=zo()((function*(e={}){if(!Kt("showShareImageMenu"))throw new Error("no permission");lt(e,{path:""});var t=e.path;if(/^\w+:\/\//.test(t)){if(!/^wxfile:\/\//.test(t)&&!/^http:\/\/tmp\//.test(t))throw new Error("invalid path")}else t="/"+((e,t=!0)=>Ct(ke.lastRoute,e,t))(t,!1);var{height:i,width:r}=yield dc({src:t}),{action:n}=yield yc({imgPath:t,height:i,width:r});switch(vc({action:hc}),n){case"shareToFriend":try{yield rt("shareImageMessage",{imagePath:t}),vc({action:pc})}catch(e){if("cancel"===e.message)return void vc({action:fc});throw e}return;case"addToFavorites":return vc({action:gc}),void(yield rt("addImageToFavorites",{url:t}));case"saveToAlbum":return vc({action:_c}),yield rt("saveImageToPhotosAlbum",{filePath:t}),void(B&&Hl({icon:"success",title:"已保存"}));default:case"cancel":throw vc({action:mc}),new Error("cancel")}}));return function(){return e.apply(this,arguments)}}());var bc,Ec=({innerContext:e={},args:t={}}={})=>{st("authorize",t,{scope:""})&&("scope.userInfo"!==t.scope||Ai("getUserInfo")||Ai("authorize")?it("authorize",Rt(t,{scope:[t.scope],requestInQueue:!e.hasOwnProperty("requestInQueue")||Boolean(e.requestInQueue)}),{beforeAll(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):ut("authorize",t,"scope unauthorized"))},wc={openAddress:"jsapi_address",chooseInvoiceTitle:"jsapi_invoice",chooseInvoice:"jsapi_invoice",getPhoneNumber:"webapi_getuserwxphone_group",chooseLicensePlate:"jsapi_licenseplate",chooseImage:"jsapi_media",chooseMedia:"jsapi_media",chooseVideo:"jsapi_media",chooseMessageFile:"jsapi_messagefile"};!function(e){e.USER_INFO="webapi_userinfo"}(bc||(bc={}));var Tc,Cc=/^wx[0-9a-f]{16}(\/.*)?$/;!function(e){e[e.UNUSED=0]="UNUSED",e[e.USED=1]="USED",e[e.REMOVAL_NOTIFIED=7]="REMOVAL_NOTIFIED"}(Tc||(Tc={}));var Sc=(e,t)=>{var i="string"==typeof t&&t.match(Cc)?(e=>e.split("/",1)[0])(t):null;return{apiName:"webapi_reportwxauseuserinfo",reqData:{scope:e,state:Tc.USED},pluginId:i,fail({errMsg:t}){wxNativeConsole.warn(`[reportUserInfo] failed, scope=${e}, pluginId=${i}, errMsg=${t}`)}}};!function(e){void 0===$e&&($e=e)}(((e,t)=>{var i=((e,t)=>{var i=wc[e];return"string"==typeof i?Sc(i,t):null})(e,t);null!==i&&Oi(i)}));var Ic=(e={})=>{if(st("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)ut("getUserProfile",e,"desc length does not meet the requirements");else{var i=!0===Ai("getUserProfile")||"unknown"===Ai("getUserProfile"),{success:r,fail:n}=dt(e,"getUserProfile");Oi({sdkApiName:"getUserProfile",apiName:"webapi_getuserprofile",withCredentials:"boolean"!=typeof e.withCredentials||e.withCredentials,showConfirm:i,reqData:{lang:e.lang||"en",desc:e.desc},success:e=>{var{cloudID:t,encryptedData:i,iv:n,signature:a,data:o}=e;r({cloudID:t,encryptedData:i,iv:n,signature:a,userInfo:o,rawData:JSON.stringify(e.data)}),setTimeout((()=>{return e="",void Oi(Sc(bc.USER_INFO,e));var e}))},fail:e=>{e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny"),n(e)}})}}},xc=(e={})=>{Li("confirmAvatarInfo","webapi_confirmuseravatarinfo",(e=>e),(e=>{try{e.userInfo=e.rawDataObject,Object.keys(e.userInfo).forEach((t=>{delete e[t]})),e.rawData=JSON.stringify(e.userInfo)}catch(e){}}))(e)},Pc=null,Dc={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},Rc=function(e){var t={};for(var i in e)t[e[i]]=i;return t}(Dc);function Oc(e){return Rc[e]}var kc=Li("getSetting","webapi_getuserallappauth",(function(e){var t=wx&&wx.version&&wx.version.version||"",i=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete i.withSubscriptions,i}),(function(e){if(wxNativeConsole.info("webapi_getuserallappauth res=",e),e.auth_item?e.authSetting=e.auth_item.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}):e.authSetting={},void 0!==e.sub_msg_switch){var t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){var i=e.sub_msg_list.reduce(((e,t)=>{var i=t.template_id;return t.sys_msg_type>0&&(i=Oc(t.sys_msg_type)),t.ban_flag?e[i]="ban":(e[i]=t.setting_status?"accept":"reject",t.is_accept_with_audio&&(e[i]="acceptWithAudio")),e}),{});t.itemSettings=i,Object.assign(t,i)}e.subscriptionsSetting=t}return delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e})),Mc=(e={})=>{it("openSetting",e,{beforeSuccess(e){var t=e.authSetting||[];if(e.authSetting=t.reduce(((e,t)=>(e[t.scope]=1===t.state,e)),{}),e.subscriptionsSetting){var i={};if(i.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){var r=e.subscriptionsSetting.templatesInfo;i.itemSettings=r.reduce(((e,t)=>{var i={2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[t.tid],r={"-1":"ban",0:"reject",1:"accept"};return i?e[i]=r[t.status]:(e[t.templateId]=r[t.status],t.acceptAudio&&(e[t.templateId]="acceptWithAudio")),e}),{})}e.subscriptionsSetting=i}}})},Nc=e=>(t={})=>{st("operateWXData",t,{apiName:""})&&Mi({apiName:t.apiName,reqData:t.reqData||{},pluginId:e?t.pluginId:void 0,success(e){"function"==typeof t.success&&t.success(e)},fail(e){"function"==typeof t.fail&&t.fail(e)},complete(e){"function"==typeof t.complete&&t.complete(e)}})},Lc=Nc(!1),Bc=(Nc(!0),Li("getUserGameLabel","webapi_getgameplayerlabel",(()=>{}),(e=>e))),Fc=Li("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",(({branchId:e,branchDim:t,eventType:i})=>({itemList:[{branchId:e,branchDim:t,eventType:i}]}))),Uc=Li("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",(({branchId:e,branchDim:t,reportType:i,query:r})=>({itemList:[{branchId:e,branchDim:t,reportType:i,query:r}]})));function Wc(e={}){"release"!==k.envVersion&&Uc(e)}var Gc=Li("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",(({todayPlayedTime:e=0})=>({today_played_seconds:e})),(e=>{e.result=!e.is_healthy,delete e.is_healthy})),Vc=Ae("AppHide"),jc=(Vc.onMethod,Vc.offMethod,Vc.internalOnMethod);Ms((e=>{Vc.emitInternal(e)}));var Hc=0,zc={};k.onReady((()=>{Hc=k.appType,zc=k.appLaunchInfo}));var Yc=(e,t)=>{var i=[];return t.forEach((t=>{var r=e[t];"boolean"==typeof r&&(r=r?1:0),i.push(`${t}:${r}`)})),i.join("|")},$c=({name:e,data:t})=>{var i="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],r=i.length>0&&i[i.length-1].__route__||"",n=$i(),a=wx&&wx.version&&wx.version.version||"",o="";switch(e){case"loadFontFace":o=Yc(t,["family","source","global","scopes"]);break;case"requestSubscribeMessage":o=Yc(t,["templateCount","templateType","operationType"]);break;case"openCustomerServiceChat":o=Yc(t,["extInfo","corpId"])}var s=[Math.round(Date.now()/1e3),zc.scene,zc.sessionid||zc.sessionId,r,n,a,e,o,Hc,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:s,immediately:!0})},qc={};jc((()=>{var e=!1;Object.keys(qc).forEach((t=>{var i=qc[t];i.cameraFrame&&i.webgl&&(e=!0)})),e&&$c({name:"suspectAR",data:{}}),qc={}}));var Qc=!1;Es((()=>{Qc=!1})),Ms((()=>{Qc=!1}));var Zc=e=>{Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});var t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),it("requestSubscribeMessage",t,{beforeAll(){Qc=!1},beforeSuccess(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),Qc=!1},beforeFail(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},Kc=e=>{var t,i,r=e.tmplIds||[];if(0===r.length?(t="TmplIds can't be empty",i=10001):r.length>=4?(t="Templates count out of max bounds",i=20003):""===r[0]?(t="No template data return, verify the template id exist",i=20001):"string"!=typeof r[0]&&(t="Invalid template id",i=10004),t)return Qc=!1,void ut("requestSubscribeMessage",e,t,i);var n=r.map((e=>({TemplateId:e})));Oi({sdkApiName:"requestSubscribeMessage",apiName:"webapi_subscribe_msg",reqData:{AppId:k.accountInfo.appId,ActionType:1,ItemList:n},success(t){var i=(t.data.InfoList||[])[0]||{};if(i.TemplateId!==r[0])return Qc=!1,void ct({name:"requestSubscribeMessage",args:e,res:{[r[0]]:"ban"}});var n="订阅一次以下消息通知";3===i.TemplateType&&(n="长期订阅以下消息通知"),Wl({title:n,content:i.Title||"",confirmText:"允许",cancelText:"取消",success(t){Qc=!1,Xc(e,t)},fail(t){Qc=!1,ut("requestSubscribeMessage",e,t.errMsg)}})},fail(t){var i=t.errMsg.replace("requestSubscribeMessage:fail","").trim();ut("requestSubscribeMessage",e,i,+t.err_code),Qc=!1}})},Xc=(e,t)=>{var i=e.tmplIds[0];Oi({sdkApiName:"requestSubscribeMessage",apiName:"webapi_subscribe_msg",reqData:{AppId:k.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:i,ChooseStatus:1}]}},success(){var r={};r[`${i}`]=""+(t.confirm?"accept":"reject"),ct({name:"requestSubscribeMessage",args:e,res:r}),$c({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail(t){var i=t.errMsg.replace("requestSubscribeMessage:fail","").trim();ut("requestSubscribeMessage",e,i,+t.err_code)}})},Jc="";k.onReady((()=>{Jc=k.appLaunchInfo.chatroomUsername})),Ee("onAppEnterForeground",((e={})=>{Jc=e.chatroomUsername}));var ed="getGroupEnterInfo";Ae("AppPerfRouteNavigation");function td(e,t,i){var r,n,a,o=void 0===t._relativePath?ke.lastRoute:t._relativePath;try{return function(e,t,i=!0){for(;Et.test(t);)t=St(t);return Ct(e,t,i)}(o,t.url,!i)}catch(s){if(!(s instanceof kt))throw s;if(!i){if(r=o,n=t.url,(a=It(n))&&It(__virtualDOM__.convertRouteToComponentAlias(r))!==a)return t.url;ut(e,t,s.message)}}return""}var id=!1,rd=Ae("accelerometerChange"),nd=rd.onMethod,ad=rd.offMethod;ce("onAccelerometerChange",((e={})=>{k.clientVersion>=369558016&&k.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),rd.emit(e)}));var od=!1,sd=Ae("compassChange"),ld=sd.onMethod,ud=sd.offMethod;ce("onCompassChange",((e={})=>{sd.emit(e)}));var cd=__safeway__.apiSign.makeApiSign;var dd=Ae("userCaptureScreen"),hd=dd.onMethod,pd=(dd.offMethod,null);Ee("onUserCaptureScreen",(e=>{"function"==typeof pd&&pd(e),dd.emit(e)}));k.onReady((()=>{var e,t,i,r=1092===(null===(e=k.appLaunchInfo)||void 0===e?void 0:e.scene),n=null===(t=k.appLaunchInfo)||void 0===t||null===(i=t.referrerInfo)||void 0===i?void 0:i.extraData;Ee("onAppEnterForeground",(e=>{var t;r=1092===e.scene,n=null===(t=e.referrerInfo)||void 0===t?void 0:t.extraData})),Ee("onUserCaptureScreen",(()=>{var e;r&&(null===(e=n)||void 0===e?void 0:e.csSessionId)&&function(e){var t=ti(this);Oi(Object.assign({},e,{pluginId:t}))}({apiName:"webapi_reportwxacityservicescreenshot",reqData:{cs_session_id:n.csSessionId}})}))}));var fd=new _e;ce("onBLEConnectionStateChanged",(e=>{fd.emit("onBLEConnectionStateChanged",e),fd.emit("_onBLEConnectionStateChanged",e)}));var gd=new _e;ce("onBluetoothAdapterStateChange",(e=>{gd.emit("onBluetoothAdapterStateChange",e),gd.emit("_onBluetoothAdapterStateChange",e)}));var _d=new _e,md={};L&&ce("onBLEMTUChange",(e=>{if(e.deviceId&&e.mtu){for(var t in md)delete md[t];md[e.deviceId]={mtu:e.mtu}}_d.emit("onBLEMTUChange",e)}));var vd,yd=(e,t)=>Object.assign({},e,{[t]:Ut(e[t])}),Ad=e=>!(e>=0&&e<65536),bd=new _e,Ed=new WeakMap,wd=new WeakMap,Td=function(e,t){var i=`${Ed.get(this)}_on${e}`,r=i=>{__errorTracer__.surroundThirdByTryCatch(t,`at BLEPeripheralServer.on${e} callback function`)(i)};wd.get(this).set(t,r),bd.on(i,r)},Cd=function(e,t){var i=`${Ed.get(this)}_on${e}`,r=wd.get(this);if(m(t)){var n=r.get(t);m(n)&&(r.delete(t),bd.off(i,n))}else wd.set(this,new WeakMap),bd.removeAllListeners(i)},Sd=Ae("CharacteristicReadRequest");Sd.onMethod,Sd.offMethod;ce("onCharacteristicReadRequest",((e={})=>{bd.emit(`${e.serverId}_onCharacteristicReadRequest`,e),Sd.emit(e)}));var Id=Ae("CharacteristicWriteRequest");Id.onMethod,Id.offMethod;ce("onCharacteristicWriteRequest",((e={})=>{"string"==typeof e.value&&(e.value=Wt(e.value)),bd.emit(`${e.serverId}_onCharacteristicWriteRequest`,e),Id.emit(e)}));var xd=Ae("CharacteristicSubscribed");xd.onMethod,xd.offMethod;ce("onCharacteristicSubscribed",((e={})=>{bd.emit(`${e.serverId}_onCharacteristicSubscribed`,e),xd.emit(e)}));var Pd=Ae("CharacteristicUnsubscribed");Pd.onMethod,Pd.offMethod;ce("onCharacteristicUnsubscribed",((e={})=>{bd.emit(`${e.serverId}_onCharacteristicUnsubscribed`,e),Pd.emit(e)}));var Dd=(vd=class{constructor(e){this.serverId=e,this.services=[],Ed.set(this,e),wd.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((e=>{this[`on${e}`]=t=>{Td.call(this,e,t)},this[`off${e}`]=t=>{Cd.call(this,e,t)}}))}close(e={}){var t=this,i=Object.assign({},e,{serverId:this.serverId});it("closeBLEPeripheralServer",i,{beforeSuccess(){t.serverId="",Ed.delete(t)}})}addService(e={}){if(st("BLEPeripheralServer.addService",e,{service:{}})){var t=e.service.characteristics||[];t=t.map((e=>{var t=e.descriptors||[];return t=t.map((e=>yd(e,"value"))),Object.assign({},e,{value:Ut(e.value),descriptors:t})}));var i=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),r=this;it("addBLEPeripheralService",i,{beforeSuccess(){r.services.push(e.service.uuid)}})}}removeService(e={}){if(st("BLEPeripheralServer.removeService",e,{serviceId:""})){var t=this,i=Object.assign({},e,{serverId:this.serverId});it("removeBLEPeripheralService",i,{beforeSuccess(){var i=t.services.indexOf(e.serviceId);i>=0&&t.services.splice(i,1)}})}}startAdvertising(e={}){if(st("BLEPeripheralServer.startAdvertising",e,{advertiseRequest:{}})){var t=e.advertiseRequest||{},i={connectable:!0};if(t.beacon){if(t.deviceName||t.serviceUuids||t.manufacturerData)throw new Error("iBeacon mode only accept connectable and beacon properties");if(!st("BLEPeripheralServer.startAdvertising",t,{beacon:{uuid:"",major:0,minor:0}}))throw new Error("iBeacon mode must include [uuid、major、minor] properties");if(Ad(t.beacon.major)||Ad(t.beacon.minor))throw new Error("major or minor must be between 0 and 65536");i=Object.assign(i,t)}else{var r=t.manufacturerData||[];r=r.map((e=>yd(e,"manufacturerSpecificData"))),i=Object.assign(i,t,{manufacturerData:r})}var n=Object.assign({},e,{serverId:this.serverId,advertiseRequest:i,powerLevel:e.powerLevel||"medium"});it("startBLEPeripheralAdvertising",n,{})}}stopAdvertising(e={}){var t=Object.assign({},e,{serverId:this.serverId});it("stopBLEPeripheralAdvertising",t,{})}writeCharacteristicValue(e={}){var t=Object.assign({},e,{serverId:this.serverId,value:Ut(e.value)});it("writeBLEPeripheralCharacteristicValue",t,{})}},ao()(vd.prototype,"close",[le],Object.getOwnPropertyDescriptor(vd.prototype,"close"),vd.prototype),ao()(vd.prototype,"addService",[le],Object.getOwnPropertyDescriptor(vd.prototype,"addService"),vd.prototype),ao()(vd.prototype,"removeService",[le],Object.getOwnPropertyDescriptor(vd.prototype,"removeService"),vd.prototype),ao()(vd.prototype,"startAdvertising",[le],Object.getOwnPropertyDescriptor(vd.prototype,"startAdvertising"),vd.prototype),ao()(vd.prototype,"stopAdvertising",[le],Object.getOwnPropertyDescriptor(vd.prototype,"stopAdvertising"),vd.prototype),ao()(vd.prototype,"writeCharacteristicValue",[le],Object.getOwnPropertyDescriptor(vd.prototype,"writeCharacteristicValue"),vd.prototype),vd),Rd=Ae("BLEPeripheralConnectionStateChanged"),Od=Rd.onMethod,kd=Rd.offMethod;ce("onBLEPeripheralConnectionStateChanged",((e={})=>{Rd.emit(e)}));var Md=Ae("local-service-found"),Nd=Ae("local-service-lost"),Ld=Ae("local-service-discovery"),Bd=Ae("local-service-resolve-fail");ce("onLocalServiceEvent",(e=>{var t=Object.assign({},e);switch("object"==typeof t.attributes&&null!==t.attributes&&Object.keys(t.attributes).forEach((e=>{var i=t.attributes[e];t.attributes[e]=Wt(i)})),delete t.event,e.event){case"found":Md.emit(t);break;case"lost":Nd.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Ld.emit(t);break;case"resolveFail":delete t.ip,delete t.port,Bd.emit(t)}}));var Fd=Md.onMethod,Ud=Md.offMethod,Wd=Nd.onMethod,Gd=Nd.offMethod,Vd=Ld.onMethod,jd=Ld.offMethod,Hd=Bd.onMethod,zd=Bd.offMethod,Yd=Ae("gyroscopeChange"),$d=Yd.onMethod,qd=Yd.offMethod;ce("onGyroscopeChange",(e=>{Yd.emit(e)}));var Qd=Ae("deviceMotionChange"),Zd=Qd.onMethod,Kd=Qd.offMethod;ce("onDeviceMotionChange",(e=>{Qd.emit(e)}));var Xd=Ae("AudioInterruptionBegin"),Jd=Xd.onMethod,eh=Xd.offMethod,th=(Xd.internalOnMethod,Xd.internalOffMethod,Ae("AudioInterruptionEnd")),ih=th.onMethod,rh=th.offMethod,nh=(th.internalOnMethod,th.internalOffMethod,null);O.Z&&O.Z.WXAUDIO?nh=O.Z.WXAUDIO:O.Z&&O.Z.AudioContext?nh=O.Z.AudioContext:"undefined"!=typeof AudioContext?nh=AudioContext:"undefined"!=typeof webkitAudioContext&&(nh=webkitAudioContext);var ah,oh=nh,sh=new WeakMap,lh=new WeakMap,uh=new WeakMap,ch=new WeakMap,dh=new WeakMap,hh=new WeakMap,ph=new WeakMap,fh=new WeakMap,gh=new WeakMap,_h=new WeakMap,mh=new WeakMap,vh={},yh=Ei(Na),Ah=Ei(Mr),bh=e=>Ah({filePath:e}).then((e=>e.data)),Eh=e=>yh({url:e,responseType:"arraybuffer",enableHttp2:!0,enableCache:!0}).then((e=>e.data)),wh=e=>new Promise((t=>{ac([e],"audio",(e=>{t(Eh(e.data[0].url))}))})),Th=e=>Promise.resolve(nr.get(e)),Ch=function(e){sh.set(this,Object.assign(sh.get(this),e))},Sh=function(e){return sh.get(this)[e]},Ih=function(){return sh.get(this)},xh=function(){this.stop(!0),Ch.call(this,{_source:null});var e=uh.get(this);e&&e()},Ph=function(e){var t=ah.createBufferSource(),{currentPlayBackTime:i,state:r}=Dh.call(this,e),{loop:n,playbackRate:a,_buffer:o,_gainNode:s}=r,l=xh.bind(this);t.onended=l,t.buffer=o,t.loop=n,t.playbackRate.value=a,s&&t.connect(s),t.start(0,i),ah.resume(),Ch.call(this,{_isPlaying:!0,paused:!1,_source:t,_played:!0,_playbackTime:0,_lastCurrentTime:i,_startedAt:ah.currentTime,_endedHandler:l})},Dh=function(e){e=e||Ih.call(this);var t,{_startedAt:i,_playbackTime:r,_isPlaying:n,playbackRate:a,_lastCurrentTime:o,duration:s}=e;return(t=n?o+(ah.currentTime-i)*a:r)>s&&(t%=s),{currentPlayBackTime:t,state:e}},Rh=function(){this.stop(!0);var{_gainNode:e}=Ih.call(this);e&&e.disconnect(),Ch.call(this,{_buffer:null,_source:null,_loadPromise:null,_gainNode:null,_audioLoadPromiseResolve:null}),lh.delete(this),uh.delete(this),ch.delete(this),dh.delete(this),ph.delete(this),hh.delete(this),fh.delete(this),gh.delete(this),mh.delete(this),clearInterval(_h.get(this)),_h.delete(this)},Oh=function(){this.stop(!0),Ch.call(this,{_buffer:null,_source:null,_loadPromise:null,_audioLoadPromiseResolve:null})},kh=function(e){var t;Oh.call(this);var i=new Promise((e=>{t=e}));Ch.call(this,{src:e,_ready:!1,_played:!1,_loadPromise:i,_audioLoadPromiseResolve:t})};class Mh{constructor(){ah||"function"==typeof(ah=new oh).create&&ah.create();var e=ah.createGain();e.connect(ah.destination);var t={},i=new Promise((e=>{t._audioLoadPromiseResolve=e}));sh.set(this,Object.assign(t,{startTime:0,autoplay:!1,loop:!1,volume:1,playbackRate:1,paused:!1,duration:NaN,_loadPromise:i,_gainNode:e,_played:!1,_playbackTime:0,_ready:!1,_isPlaying:!1,src:""}))}get src(){return Sh.call(this,"src")}set src(e){var{src:t}=Ih.call(this);"string"==typeof e&&e.length>0&&t!==e&&(t&&kh.call(this,e),Ch.call(this,{src:e}),(e=>{var t=vh[e];if(t&&t.audioBuffer)return Promise.resolve(t.audioBuffer);if(t&&t.loadPromise)return t.loadPromise;var i=(/^(http|https):\/\//.test(e)?Eh(e):/^(cloud):\/\//.test(e)?wh(e):/^(wxblob:\/\/)/.test(e)?Th(e):bh(e)).then((t=>new Promise(((i,r)=>{ah.decodeAudioData(t,(t=>{var r=vh[e];r.audioBuffer||(r.audioBuffer=t),i(r.audioBuffer)}),r)}))));return vh[e]={loadPromise:i},i})(e).then((e=>{var t=Ih.call(this),i=lh.get(this),{_isPlaying:r,autoplay:n,_audioLoadPromiseResolve:a}=t;return Ch.call(this,{_ready:!0,_buffer:e,duration:e.duration}),i&&i(),n&&!r&&this.play(),a(),null})).catch((t=>{var i=ch.get(this);i&&i({type:"error",errMsg:`set audio src ${e} fail: ${t.message}`})})))}get startTime(){return Sh.call(this,"startTime")}set startTime(e){var{_played:t,startTime:i}=Ih.call(this);e!==i&&"number"==typeof e&&e>=0&&(Ch.call(this,{startTime:e}),t||this.seek(e))}get autoplay(){return Sh.call(this,"autoplay")}set autoplay(e){var{autoplay:t}=Ih.call(this);if(!!e!==t&&(Ch.call(this,{autoplay:!!e}),e)){var{_loadPromise:i}=Ih.call(this);i.then((()=>{var e=Ih.call(this),{_isPlaying:t,autoplay:i,_source:r}=e;return r&&!t&&i&&this.play(),null}))}}get loop(){return Sh.call(this,"loop")}set loop(e){var t=Sh.call(this,"_source");Ch.call(this,{loop:e=!!e}),t&&(t.loop=e)}get volume(){return Sh.call(this,"volume")}set volume(e){var{volume:t,_gainNode:i}=Ih.call(this);"number"==typeof e&&e>=0&&e<=1&&e!==t&&(Ch.call(this,{volume:e}),i&&i.gain&&(i.gain.value=e))}get playbackRate(){return Sh.call(this,"playbackRate")}set playbackRate(e){var{playbackRate:t,_source:i}=Ih.call(this);"number"==typeof e&&t!==e&&e>=.5&&e<=2&&(Ch.call(this,{playbackRate:e,_lastCurrentTime:this.currentTime,_startedAt:ah.currentTime}),i&&(i.playbackRate.value=e))}get duration(){return Sh.call(this,"duration")}get currentTime(){var{currentPlayBackTime:e}=Dh.call(this);return e}get paused(){return Sh.call(this,"paused")}get buffered(){var{duration:e}=Ih.call(this);return e>0?e:0}play(e=!1){var t=Ih.call(this),{_isPlaying:i,_ready:r,_loadPromise:n}=t;if(!i){var a=()=>e?null:dh.get(this);if(r){Ph.call(this,t);var o=a();o&&o()}else n.then((()=>{Ph.call(this);var e=a();return e&&e(),null}))}}pause(){var e=Ih.call(this),{_isPlaying:t,_source:i}=e;if(i&&t){var r=hh.get(this);i.stop(0),i.disconnect(),i.onended=null,Ch.call(this,{_isPlaying:!1,_playbackTime:this.currentTime,paused:!0,_endedHandler:null}),r&&r()}}stop(e=!1){var{_source:t}=Ih.call(this);if(t){var i=ph.get(this);t.stop(0),t.disconnect(),t.onended=null,Ch.call(this,{_isPlaying:!1,_playbackTime:0,paused:!0,_endedHandler:null}),!e&&i&&i()}}seek(e){if("number"==typeof e&&e>=0){var{_isPlaying:t}=Ih.call(this),i=fh.get(this),r=gh.get(this),n=lh.get(this);r&&r(),t?(this.stop(!0),Ch.call(this,{_playbackTime:e}),this.play(!0)):Ch.call(this,{_playbackTime:e}),i&&i(),n&&n()}}destroy(){Rh.call(this)}set oncanplay(e){"function"==typeof e?lh.set(this,e):lh.delete(this)}set onended(e){"function"==typeof e?uh.set(this,e):uh.delete(this)}set onerror(e){"function"==typeof e?ch.set(this,e):ch.delete(this)}set onplay(e){"function"==typeof e?dh.set(this,e):dh.delete(this)}set onpause(e){"function"==typeof e?hh.set(this,e):hh.delete(this)}set onstop(e){"function"==typeof e?ph.set(this,e):ph.delete(this)}set onseeked(e){"function"==typeof e?fh.set(this,e):fh.delete(this)}set onseeking(e){"function"==typeof e?gh.set(this,e):gh.delete(this)}set ontimeupdate(e){if("function"==typeof e){var t=_h.get(this);clearInterval(t);var i=setInterval((()=>{var{_isPlaying:t}=Ih.call(this);t&&e()}),350);_h.set(this,i)}else _h.delete(this)}set onwaiting(e){"function"==typeof e?mh.set(this,e):mh.delete(this)}}var Nh=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],Lh=["startTime","duration","currentTime"],Bh=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],Fh=new Set,Uh=new WeakMap,Wh=new WeakMap,Gh=new WeakMap,Vh=new WeakMap;class jh{constructor(e,t=1e3){var i=new _e;Uh.set(this,e),Fh.add(this),Vh.set(this,{conversion:t}),Nh.forEach((i=>Object.defineProperty(this,i,{get:()=>Lh.includes(i)?e[i]/t:e[i],set(r){Lh.includes(i)?e[i]=t*r:e[i]=r}}))),Bh.forEach((t=>{this["on"+t]=e=>{var r=__errorTracer__.surroundThirdByTryCatch(e,`at audioContext.on${t} callback function`);Wh.set(e,r),Gh.set(r,e),i.on(t,r)},this["off"+t]=e=>{if(m(e)){var r=Wh.get(e);m(r)&&(i.off(t,r),Wh.delete(e),Gh.delete(r))}else i.listeners(t).forEach((e=>{var t=Gh.get(e);Wh.delete(t),Gh.delete(e)})),i.removeAllListeners(t)},e["on"+t.toLowerCase()]=(e,r)=>{e?i.emit(t,{errCode:e,errMsg:r}):i.emit(t)}}))}play(){Uh.get(this).play()}stop(){Uh.get(this).stop()}pause(){Uh.get(this).pause()}seek(e){var{conversion:t}=Vh.get(this);Uh.get(this).seek(t*e)}destroy(){var e=Uh.get(this);e.destroy&&e.destroy(),Bh.forEach((e=>{this["off"+e]()})),Fh.delete(this),Uh.delete(this)}static pauseAllAudio(){Fh.forEach((e=>{var t=Uh.get(e);t&&t.pause()}))}}class Hh extends jh{constructor(){super(new O.Z.Audio,1e3)}}class zh extends jh{constructor(){super(new Mh,1)}}var Yh=()=>{Ap.pauseAllAudio(),Hh.pauseAllAudio(),zh.pauseAllAudio()},$h=!1,qh=!1;ce("onAudioInterruptionBegin",(e=>{$h=!0,!1===qh&&Xd.emit(e)})),ce("onAudioInterruptionEnd",(e=>{$h=!1,!1===qh&&th.emit(e)}));var Qh=()=>qh,Zh=new WeakMap,Kh=new WeakMap,Xh=new WeakMap,Jh=new WeakMap,ep=new WeakMap,tp=new WeakMap,ip=new WeakMap,rp=new Map,np=new Map,ap=new Map,op=wxNativeConsole.createLogger("InnerAudio");O.Z.EventHandler&&(O.Z.EventHandler.onbindingobjectdestruct=e=>{var t=np[e];t&&it("getAudioState",{audioId:t,success(e){!0===e.paused?(rp.delete(t),it("destroyAudioInstance",{audioId:t})):rp.get(t)&&!1===rp.get(t).loop&&hp.once(`${t}_onAudioStateChange_ended`,(()=>{rp.delete(t),it("destroyAudioInstance",{audioId:t})}))}})});var sp=function(e,t){Kh.set(this,Object.assign(Kh.get(this),{[e]:t})),"src"===e&&Kh.set(this,Object.assign(Kh.get(this),{paused:!0})),Jh.get(this)&&(setTimeout((()=>{var i=Object.assign({},Kh.get(this),ep.get(this),{timestamp:Date.now(),audioId:Zh.get(this),success:()=>{Kh.set(this,Object.assign(Kh.get(this),{[e]:t}))},fail:()=>{up.call(this)}});Qh()&&(i.autoplay=!1),it("setAudioState",i),Jh.set(this,!0)}),0),Jh.set(this,!1)),ep.set(this,Object.assign(ep.get(this),{[e]:t}))},lp=function(e,t){ip.get(this).then((()=>{sp.call(this,e,t)}))},up=function(e,t){var i=Kh.get(this)[e];return it("getAudioState",{audioId:Zh.get(this),success:r=>{delete r.errMsg,Kh.set(this,Object.assign(Kh.get(this),r)),i=r[e],"function"==typeof t&&t(i)}}),i},cp=function(e){var t=Zh.get(this);it("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail:({errMsg:e})=>{op.error(`operateAudio fail: errMsg="${e}"`),mp.call(this,"error",{errMsg:e,errCode:-1})}},e))},dp=function(e){ip.get(this).then((()=>{setTimeout((()=>{cp.call(this,e)}),0)}))},hp=new _e;ce("onAudioStateChange",((e={})=>{e.state=e.state.toLowerCase();var{state:t,audioId:i}=e;delete e.audioId,delete e.state;var r="play"!==t,n=rp.get(i);n&&(n.paused=r);var a=ap.get(i);a&&t in a&&hp.emit(`${i}_onAudioStateChange_${t}`,e)}));var pp=function(e,t){var i=`${Zh.get(this)}_onAudioStateChange_${e}`,r=i=>{__errorTracer__.surroundThirdByTryCatch(t,`at audioContext.on${e} callback function`)(i)};tp.set(t,r),hp.on(i,r)},fp=function(e,t){ip.get(this).then((()=>{pp.call(this,e,t)}))},gp=function(e,t){var i=`${Zh.get(this)}_onAudioStateChange_${e}`;if(m(t)){var r=tp.get(t);m(r)&&hp.off(i,r)}else hp.removeAllListeners(i)},_p=function(e,t){ip.get(this).then((()=>{gp.call(this,e,t)}))},mp=function(e,t){hp.emit(`${Zh.get(this)}_onAudioStateChange_${e}`,t)},vp=0,yp=!1;var Ap=class{constructor(){var e,t;Kh.set(this,{}),ep.set(this,{}),Xh.set(this,void 0),Jh.set(this,!0),ip.set(this,new kn(((i,r)=>{e=i,t=r})));var i={};it(L||H?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:t=>{var r={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(ap.set(t.audioId,i),rp.set(t.audioId,r),Zh.set(this,t.audioId),Kh.set(this,r),O.Z.BindingObject){var n=new O.Z.BindingObject;this.__bindingObject=n,np[n.__id]=t.audioId}vp+=1,++vp>=1024&&!yp&&B&&(yp=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(e,0)},fail:e=>{t(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((e=>{this[`on${e}`]=t=>{var r=e.toLowerCase();i[r]=1,fp.call(this,r,t)},this[`off${e}`]=t=>{var r=e.toLowerCase();delete i[r],_p.call(this,r,t)}}))}get src(){return this.cloudId?this.cloudId:up.call(this,"src")}set src(e){"string"==typeof e&&0!==e.length?ac([e],"audio",(t=>{/^(cloud):\/\//.test(e)?this.cloudId=e:this.cloudId="",e=t.data[0].url,lp.call(this,"src",e)})):mp.call(this,"error",{errMsg:`Failed to set src, the src ${e} is invalid.`})}get startTime(){return up.call(this,"startTime")/1e3}set startTime(e){"number"==typeof e?lp.call(this,"startTime",1e3*e):mp("error",{errMsg:`Failed to set startTime, the startTime ${e} is invalid.`})}set autoplay(e){"boolean"==typeof e&&lp.call(this,"autoplay",e)}get autoplay(){return up.call(this,"autoplay")}set loop(e){"boolean"==typeof e&&lp.call(this,"loop",e)}get loop(){return up.call(this,"loop")}set obeyMuteSwitch(e){"boolean"==typeof e&&lp.call(this,"obeyMuteSwitch",e)}get obeyMuteSwitch(){return up.call(this,"obeyMuteSwitch")}set volume(e){"number"!=typeof e||e<0||e>1||lp.call(this,"volume",e)}get volume(){return up.call(this,"volume")}set playbackRate(e){"number"!=typeof e||e<0||lp.call(this,"playbackRate",e)}get playbackRate(){return up.call(this,"playbackRate")}set referrerPolicy(e){"string"==typeof e&&lp.call(this,"referrerPolicy",e)}get referrerPolicy(){return up.call(this,"referrerPolicy")}get paused(){return up.call(this,"paused")}get duration(){return up.call(this,"duration")/1e3}get currentTime(){return up.call(this,"currentTime")/1e3}get buffered(){return up.call(this,"buffered")/1e3}play(){!1===Qh()&&dp.call(this,{operationType:"play"})}pause(){dp.call(this,{operationType:"pause"})}stop(){dp.call(this,{operationType:"stop"})}seek(e){"number"!=typeof e||e<0?mp("error",{errMsg:`Failed to seek, the currentTime ${e} is invalid.`}):dp.call(this,{operationType:"seek",currentTime:1e3*e})}destroy(){ip.get(this).then((()=>{var e=Zh.get(this);rp.has(e)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((t=>{var i=`${e}_onAudioStateChange_${t}`;hp.removeAllListeners(i)})),ap.delete(e),rp.delete(e),vp-=1,it("destroyAudioInstance",{audioId:e}))}))}onTimeUpdate(e){ip.get(this).then((()=>{var t=`${Zh.get(this)}_onAudioStateChange_timeupdate`;void 0===Xh.get(this)&&Xh.set(this,setInterval((()=>{if("active"===ke.runningStatus&&!0!==Kh.get(this).paused&&1!==Kh.get(this).paused){var e=Kh.get(this).currentTime;up.call(this,"currentTime",(i=>{i!==e&&hp.emit(t)}))}}),250)),hp.removeAllListeners(t);var i=t=>{__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};tp.set(e,i),hp.on(t,i)}))}offTimeUpdate(e){ip.get(this).then((()=>{_p.call(this,"timeupdate",e)}))}static pauseAllAudio(){rp.forEach(((e,t)=>{it("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}},bp=wxNativeConsole.createLogger("InnerAudioContext"),Ep=(e={})=>{var t=!1;if(L){var{system:i}=os();-1===zt(i,"6.0.0")&&(t=!0)}var{useWebAudioImplement:r}=e;return(G||W)&&O.Z.Audio?(bp.info("using NativeAudio"),new Hh):!t&&r&&oh?(bp.info("using WebAudio"),new zh):(bp.info("using AudioJsApi"),new Ap)},wp=!1;k.onReady((()=>{wp="develop"===k.envVersion||"trial"===k.envVersion}));var Tp={wgs84:0,gcj02:0},Cp={wgs84:null,gcj02:null};Es((()=>{Tp.wgs84=0,Tp.gcj02=0})),Ms((()=>{Tp.wgs84=0,Tp.gcj02=0}));var Sp=new _e,Ip={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};ce("onRecorderStateChange",((e={})=>{var{state:t}=e;delete e.state,Sp.emit(`onRecorderStateChange_${t}`,e)}));var xp=e=>{it("operateRecorder",Object.assign({},e))},Pp={start(e={}){var t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(Ip).map((e=>parseInt(e,10))).indexOf(t.sampleRate))throw new Error(`invalid sampleRate "${t.sampleRate}", sampleRate should be one of ${JSON.stringify(Object.keys(Ip))}`);if(t.encodeBitRate>Ip[t.sampleRate][1]||t.encodeBitRate<Ip[t.sampleRate][0])throw new Error(`invalid encodeBitRate "${t.encodeBitRate}", encodeBitRate should be greater than ${Ip[t.sampleRate][0]} and less than ${Ip[t.sampleRate][1]}`);t.operationType="start",t.fail=e=>{Sp.emit("onRecorderStateChange_error",e)},xp(t)},pause(){xp({operationType:"pause",fail(e){Sp.emit("onRecorderStateChange_error",e)}})},resume(){xp({operationType:"resume",success(){Sp.emit("onRecorderStateChange_resume")},fail(e){Sp.emit("onRecorderStateChange_error",e)}})},stop(){xp({operationType:"stop",fail(e){Sp.emit("onRecorderStateChange_error",e)}})},onStart(e){Sp.removeAllListeners("onRecorderStateChange_start"),Sp.on("onRecorderStateChange_start",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume(e){Sp.removeAllListeners("onRecorderStateChange_resume"),Sp.on("onRecorderStateChange_resume",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause(e){Sp.removeAllListeners("onRecorderStateChange_pause"),Sp.on("onRecorderStateChange_pause",(()=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop(e){Sp.removeAllListeners("onRecorderStateChange_stop"),Sp.on("onRecorderStateChange_stop",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded(e){Sp.removeAllListeners("onRecorderStateChange_frameRecorded"),Sp.on("onRecorderStateChange_frameRecorded",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError(e){Sp.removeAllListeners("onRecorderStateChange_error"),Sp.on("onRecorderStateChange_error",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin(e){Sp.removeAllListeners("onRecorderStateChange_interruptionBegin"),Sp.on("onRecorderStateChange_interruptionBegin",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd(e){Sp.removeAllListeners("onRecorderStateChange_interruptionEnd"),Sp.on("onRecorderStateChange_interruptionEnd",(t=>{"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}},Dp=new WeakMap;function Rp(e,t){Dp.set(this,Object.assign(Dp.get(this),{[e]:t})),this.promise.then((()=>{it("operateAudioPlayer",{operationType:"update",containerId:Dp.get(this).containerId,[e]:t,success:e=>{},fail:e=>{}})})).catch((e=>{}))}class Op{constructor(){Dp.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),it("operateAudioPlayer",{operationType:"create",success:e=>{Dp.set(this,Object.assign(Dp.get(this),{containerId:e.containerId})),this.resolve(e)},fail:e=>{this.reject(e)}})}start(){return this.promise.then((()=>new Promise(((e,t)=>{it("operateAudioPlayer",{operationType:"start",containerId:Dp.get(this).containerId,success:t=>{e(t)},fail:e=>{t(e)}})}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,i)=>{it("operateAudioPlayer",{operationType:"addTask",containerId:Dp.get(this).containerId,taskId:e.videoDecoderId,success:e=>{t(e)},fail:e=>{i(e)}})}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,i)=>{it("operateAudioPlayer",{operationType:"delTask",containerId:Dp.get(this).containerId,taskId:e.videoDecoderId,success:e=>{t(e)},fail:e=>{i(e)}})}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{it("operateAudioPlayer",{operationType:"stop",containerId:Dp.get(this).containerId,success:t=>{e(t)},fail:e=>{t(e)}})}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{it("operateAudioPlayer",{operationType:"remove",containerId:Dp.get(this).containerId,success:t=>{e(t)},fail:e=>{t(e)}}),Dp.delete(this)}))))}set volume(e){return Rp.call(this,"audioVolume",e),e}get volume(){return Dp.get(this).audioVolume}}var kp=new WeakMap;function Mp(e,t){kp.set(this,Object.assign(kp.get(this),{[e]:t})),this.promise.then((()=>{O.Z.MediaToolKit.audioUpdate({containerId:kp.get(this).containerId,[e]:t},(e=>{e.errCode}))})).catch((e=>{}))}class Np{constructor(){kp.set(this,{}),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t})),O.Z.MediaToolKit.audioCreate({},(e=>{0===e.errCode?(kp.set(this,Object.assign(kp.get(this),{containerId:e.containerId})),this.resolve(e)):this.reject(e)}))}start(){return this.promise.then((()=>new Promise(((e,t)=>{O.Z.MediaToolKit.audioStart({containerId:kp.get(this).containerId},(i=>{0===i.errCode?e(i):t(i)}))}))))}addAudioSource(e){return this.promise.then((()=>new Promise(((t,i)=>{O.Z.MediaToolKit.audioAddTask({containerId:kp.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?t(e):i(e)}))}))))}removeAudioSource(e){return this.promise.then((()=>new Promise(((t,i)=>{O.Z.MediaToolKit.audioDelTask({containerId:kp.get(this).containerId,taskId:e.videoDecoderId},(e=>{0===e.errCode?t(e):i(e)}))}))))}stop(){return this.promise.then((()=>new Promise(((e,t)=>{O.Z.MediaToolKit.audioStop({containerId:kp.get(this).containerId},(i=>{0===i.errCode?e(i):t(i)}))}))))}destroy(){return this.promise.then((()=>new Promise(((e,t)=>{O.Z.MediaToolKit.audioRemove({containerId:kp.get(this).containerId},(i=>{0===i.errCode?e(i):t(i)})),kp.delete(this)}))))}set volume(e){return Mp.call(this,"audioVolume",e),e}get volume(){return kp.get(this).audioVolume}}var Lp=new _e,Bp=new WeakMap,Fp=new WeakMap;ce("onCanvasPlayerStateChange",(e=>{var t=e.state;"playEnd"===t?Lp.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?Lp.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&Lp.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));var Up=!1;function Wp(e){return Gp.apply(this,arguments)}function Gp(){return(Gp=zo()((function*(e){var t=Fp.get(e);yield t}))).apply(this,arguments)}function Vp(e,t,i={}){return rt("operateCanvasPlayer",K()(K()({},i),{},{containerId:e.id||0,operationType:t}))}function jp(e,t,i={}){return new Promise(((r,n)=>{O.Z.MediaToolKit[t](K()(K()({},i),{},{containerId:e.id||0}),(e=>{if(0!==e.errCode){var i=new Error(e.errMsg||`${t} failed`);return Object.assign(i,e),void n(i)}r(e)}))}))}function Hp(e,t,i){var r=Bp.get(e);r&&r.emit(t,i)}class zp{constructor(){var e=this,t=new _e;Bp.set(this,t);var i=zo()((function*(){if(L){L&&(Up||(Up=!0,O.Z.MediaToolKit.addEventListener("onPlayerBuffSize",(e=>{Lp.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),O.Z.MediaToolKit.addEventListener("onPlayerPlayEnd",(e=>{Lp.emit(e.containerId,{event:"ended",data:{}})}))));var i=yield new Promise(((e,t)=>{O.Z.MediaToolKit.playerCreate({},(i=>{if(0!==i.errCode){var r=new Error(i.errMsg||"create failed");return Object.assign(r,i),void t(r)}e(i)}))}));e.id=i.containerId}else{var r=yield rt("operateCanvasPlayer",{operationType:"create"});e.id=r.containerId}Lp.on(e.id,(({event:e,data:i})=>t.emit(e,i)))}))();Fp.set(this,i)}start(e={}){var t=this;return zo()((function*(){var i;if(yield Wp(t),L){var r=e.source;if(!e.source||!/^(http|https):\/\/.*/i.test(e.source))r=(yield rt("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:e.source})).filePath;var n=yield jp(t,"playerStart",{filePath:r,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});i=Object.assign({},n.video),t.width=i.width||0,t.height=i.height||0,t.buffer=new ArrayBuffer(t.width*t.height*4),i.video=n.video,i.audio=n.audio}else{var a=yield Vp(t,"start",{source:e.source,mode:void 0!==e.mode?e.mode:1,videoFormat:e.videoFormat||55,startStamp:e.startTime,abortAudio:e.abortAudio,abortVideo:e.abortVideo});i=Object.assign({},a.video),t.buffId=a.buffId,t.width=i.width||0,t.height=i.height||0,i.video=a.video,i.audio=a.audio}return Hp(t,"start",i),i}))()}seek(e,t="inaccurate"){var i=this;return zo()((function*(){yield Wp(i);var r="accurate"===t;return L?yield jp(i,"playerSeek",{seekStamp:e,seekByStamp:r}):yield Vp(i,"seek",{seekStamp:e,seekByStamp:r}),Hp(i,"seek",{position:e}),e}))()}wait(e=!1){var t=this;return zo()((function*(){yield Wp(t),L?yield jp(t,"playerWait",{wait:e}):yield Vp(t,"wait",{wait:e}),Hp(t,"wait",{})}))()}stop(){var e=this;return zo()((function*(){yield Wp(e),L?yield jp(e,"playerStop",{}):yield Vp(e,"stop",{}),Hp(e,"stop",{})}))()}remove(){var e=this;return zo()((function*(){if(yield Wp(e),e.id){Lp.removeAllListeners(e.id);var t=Bp.get(e);t.eventNames().forEach((e=>t.removeAllListeners(e)))}L?yield jp(e,"playerRemove",{}):yield Vp(e,"remove",{})}))()}getFrameData(){var e,t,i,r,n,a;if(L?O.Z.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(a=>{a.got&&(e=this.buffer),t=a.pts,i=a.pk_pts,r=a.dts,n=a.pk_dts})):it("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:a=>{a.got&&(e=Hr.get(this.buffId))&&(e.__proto__=ArrayBuffer.prototype),t=a.pts,i=a.pk_pts,r=a.dts,n=a.pk_dts},fail(e){a=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(a,e)}}),a)throw a;return e?{width:this.width,height:this.height,data:e,pts:t,pkPts:i,dts:r,pkDts:n}:null}on(e,t){Bp.get(this).on(e,t)}off(e,t){Bp.get(this).off(e,t)}get videoDecoderId(){return this.id}}var Yp=0,$p=()=>{var e,t={};if(it("getMenuButtonBoundingClientRect",{success(e){Object.assign(t,e),delete t.errMsg},fail(t){e=t.errMsg}}),e)throw new Mt(e);return t},qp=(e={})=>{it("exitMiniProgram",e,{})},Qp=!1,Zp=[],Kp=(e={})=>{if(!e.webviewId||!e.data){console.error("invalid arguments");var t={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),Qp?Zp.push(e):(Qp=!0,it("sendDataToH5",e,{afterAll(){if(Qp=!1,Zp.length){var e=Zp.shift();Kp(e)}}}))},Xp=!1,Jp=[];function ef(e){for(var t=0;t<Jp.length;t++)Jp[t](e)}var tf={debug(){},log(){},info(){},warn(){},error(){}},rf=!1;rf||k.onReady((()=>{tf=wxNativeConsole.createLogger(`LogManager${k.accountInfo&&k.accountInfo.appId}]`)}));var nf,af,of,sf="undefined"!=typeof __initHelper&&1===__initHelper,lf=function(){try{return bn.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return tf.error("accessSync fail",e,arguments),{errMsg:e.message||""}}},uf=function(){try{return Dn.apply(this,arguments)}catch(e){return tf.error("renameSync fail",e,arguments),{errMsg:e.message||""}}},cf=function(){try{var e=Cn.apply(this,arguments);return{stat:e,errMsg:"statSync:ok"}}catch(e){return tf.error("statSync fail",e,arguments),{errMsg:e.message||""}}},df=function(e){return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}`},hf=function(e){"string"!=typeof e&&(e+="");var t,i,r=0;for(t=0;t<e.length;t++)(i=e.charCodeAt(t))<127?r+=1:i>=128&&i<=2047?r+=2:i>=2048&&i<=65535&&(r+=3);return r},pf=!1,ff=102400,gf=[],_f={lastLogNum:1,lastLogSize:0},mf=!1,vf=!1,yf=!1,Af={},bf=e=>af+"log"+e,Ef=Tt((e=>lf(e).errMsg.indexOf("accessSync:ok")>=0)),wf=Tt((e=>{var t=lf(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),Tf=Tt((e=>{if(tf.info(`initLog[1][isRemoteDebugMode=${sf}, wxConfigReady=${pf}, isLogInit=${mf}]`),sf||!pf||mf)e&&e();else{if(tf.info("initLog[2]"),nf=k&&"devtools"===k.platform,af=(k&&k.env.USER_DATA_PATH||(nf?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!Ef(af))return tf.info(`initLog[3][mkdirSync][usrLogDir=${af}]`),function(){try{gn.apply(this,arguments)}catch(e){return tf.error("mkdirSync fail",e,arguments),{errMsg:e.message||""}}}(af),mf=!0,yf=wf(af),e&&e(),yf?void tf.error("hasNoPermission[1]"):void 0;if(yf=wf(af))return mf=!0,void tf.error("hasNoPermission[2]");for(var t=1;t<=5&&Ef(bf(t));)Af[t]=!0,_f.lastLogNum=t,t++;tf.info(`[before statSync] path=${bf(_f.lastLogNum)}`);var i=cf(bf(_f.lastLogNum));i.stat&&(_f.lastLogSize=i.stat.size),tf.info("[before isLogInit changeinto true"),mf=!0,e&&e()}})),Cf=Tt((()=>{Tf((()=>{if(tf.warn(`[after initLog] isLogInit=${mf}; isRemoteDebugMode=${sf}; hasNoPermission=${yf}; CACHE_LOG.length=${gf.length}; needDeleteOldLog=${vf}`),mf&&!sf&&!yf&&gf.length&&!vf){for(var e=[],t=0,i=0;i<gf.length;i++){var r=hf(gf[i]);if(tf.warn(`[logItemSize=${r}][currentSize=${t}][MAX_LOG_SIZE=102400]`),r>ff)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),tf.warn(`submitLog[3],logItemSize=${r},MAX_LOG_SIZE=102400`);else{if(t+r>ff)break;t+=r,e.push(gf[i])}}if(tf.warn(`[reportLogList.length=${e.length}]`),e.length){if(_f.lastLogSize+t>1048576){if(_f.lastLogNum+1>=6)return vf=!0,tf.warn("submitLog[4][deleteOldLog]","logConfig=",_f,",MAX_FILE_COUNT=",4),void setTimeout((()=>{tf.info(`deleteOldLog[1],unlinkSync,logPath(1)=${bf(1)}`),function(){try{wn.apply(this,arguments),tf.info("unlinkSync success",arguments)}catch(e){return tf.error("unlinkSync fail",e,arguments),{errMsg:e.message||""}}}(bf(1));for(var e=2;e<=5;e++)tf.info(`deleteOldLog[2],renameSync,logPath(1)=${bf(1)},logPath(i - 1)=${bf(e-1)}`),uf(bf(e),bf(e-1));_f.lastLogNum=5,Af[_f.lastLogNum]=!1,_f.lastLogSize=0,vf=!1}),50);_f.lastLogNum++,_f.lastLogSize=0}i===gf.length?gf=[]:gf.splice(0,i),Af[_f.lastLogNum]||Ef(bf(_f.lastLogNum))?(tf.info("submitLog[7],before appendFile, filePath=",bf(_f.lastLogNum)),Rn({filePath:bf(_f.lastLogNum),data:(_f.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail(e){tf.error("submitLog[7.1], appendFile fail",e)},success(e){tf.info("submitLog[7.2], appendFile success",e)}})):(tf.info("submitLog[5], before writeFile, filePath=",bf(_f.lastLogNum)),hn({filePath:bf(_f.lastLogNum),data:(_f.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success(e){tf.info("submitLog[5.1], writeFile success",e)},fail(e){console.log("log writeFile err "+e.errMsg),tf.error("submitLog[6],writeFile fail",e)}})),_f.lastLogSize+=t}}}))}));function Sf(){of&&clearTimeout(of),of=setTimeout((()=>{Cf(),of=null,Sf()}),2e3)}var If={logApiInvoke:!0};["info","debug","log","warn"].forEach((e=>{If[e]=function(){if(!sf&&!yf&&pf&&arguments.length&&_f){for(var t=[],i=0;i<arguments.length;i++)"number"==typeof arguments[i]||"string"==typeof arguments[i]?t.push(arguments[i]):t.push(JSON.stringify(arguments[i]));t.splice(0,0,df(new Date),`[${e}]`),gf.push(t.join(" "))}}}));var xf=!1;If._getUserLog=function(){for(var e={},t=1;t<=5;t++)e["log"+t]=cf(bf(t));return e},If.privateSystemLog=(...e)=>{pf&&7===k.appType&&void 0!==Reporter&&e&&e.length&&wxNativeConsole.info(e)},k.onReady((()=>{sf||(pf=!0)})),Ms((()=>{sf||Cf()}));var Pf=Tt(Kp),Df=Tt((e=>{if("function"==typeof e){Jp.push(((t={})=>{t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),Xp||(ce("onH5Data",ef),Xp=!0)}}));function Rf(e={}){if(tf.info(`uploadUserLog[1],logConfig.lastLogNum=${_f.lastLogNum}`,",args=",e),!e.index||e.index>_f.lastLogNum)return tf.info("uploadUserLog[2]"),void(e.complete&&e.complete());var t="ios"===k.platform?1:5,i=e.readFileResp||function(){try{return{data:dn.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return tf.error("readFileSync fail",e,arguments),{errMsg:e.message||""}}}(bf(e.index),"utf8");if(tf.info(`uploadUserLog[3],readFileSync=${i.errMsg},index=${e.index},EACH_SLICE=${t}`),i.errMsg.indexOf("readFileSync:ok")>=0&&i.data){var r=i.data.length,n=Math.max(parseInt(r/t,10),1),a=(e.slice-1)*n;tf.info("uploadUserLog[4]","start=",a,"eachLen=",n,"len=",r,i.data.length);var o=i.data.substr(a,n);if(tf.info("uploadUserLog[5],content.length=",o&&o.length,",logConfig=",_f),!o)return tf.info("uploadUserLog[6],uploadUserLogSliceComplete"),Pf({webviewId:e.webviewId,data:{total:_f.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:os()}}),e.index++,e.slice=1,e.readFileResp=null,void Rf(e);tf.info("uploadUserLog[7], uploadUserLogContent,content.length=",o&&o.length,",logConfig=",_f),Pf({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:o,index:e.index,slice:e.slice||1,total:_f.lastLogNum,info:1===e.index&&1===e.slice?os():null},success(){tf.info(`uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE=${t}, args.slice=${e.slice}, logConfig.lastLogNum=${_f.lastLogNum}`),e.slice===t?(Pf({webviewId:e.webviewId,data:{total:_f.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:os()}}),e.index++,e.slice=1,e.readFileResp=null,Rf(e)):(e.slice++,e.readFileResp=i,tf.info("uploadUserLog[9],args=",e),Rf(e))},fail(t){tf.error(`uploadUserLog[10] fail,failResp.errMsg=${t.errMsg},args.retry=${e.retry}`),e.retry?Pf({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:os()}}):(e.retry=!0,Rf(e))}})}else tf.error(`uploadUserLog[11],readFileSync fail=${i.errMsg},index=${e.index}`),Pf({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:i.errMsg,index:e.index,info:os()}})}sf||Df((e=>{tf.info("onH5Data",e,_f),e.data&&"uploadUserLog"===e.data.type&&Rf({index:1,slice:1,webviewId:e.webviewId})}));var Of=[],kf=[],Mf=~~(+new Date/1e3),Nf=0;function Lf(e,t,i,r){it("operateRealtimeData",{type:t,content:i,priority:"string"==typeof r?r:r?"high":"low",id:e},{beforeSuccess(){},beforeFail(e){kf.forEach((t=>t(e)))}})}function Bf(){var e=Of.shift();"function"==typeof e&&(e(),Nf=+new Date),Of.length&&setTimeout(Bf,200)}var Ff=(e,t,i)=>{if(1005===e||!N){var r=+new Date,n=Mf++;return r-Nf>=200&&!Of.length?(Lf(n,e,t,i),Nf=r):(Of.push((()=>{Lf(n,e,t,i)})),setTimeout(Bf,200)),n}};ce("onRealtimeDataResponse",(e=>{kf.forEach((t=>t(e)))}));var Uf,Wf="GetUploadSetting",Gf={};function Vf(e){return e?(Gf[e]||(Gf[e]=ki({sdkApiName:Wf,apiName:"GetUploadSetting",reqData:{},pluginId:e})),Gf[e]):Uf||(Uf=ki({sdkApiName:Wf,apiName:"GetUploadSetting",reqData:{}}))}var jf=+new Date,Hf=Tt((e=>zf(e).errMsg.indexOf("accessSync:ok")>=0)),zf=function(){try{return bn.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},Yf={DEBUG:1,INFO:2,WARN:4,ERROR:8},$f=1,qf=2,Qf=1,Zf="",Kf=!1;function Xf(e){Kf?e&&e():(Kf=!0,k.onReady((()=>{Zf=k.accountInfo.appId,e&&e()})))}var Jf=function(e,t){if("string"!=typeof e)return 0;var i,r,n,a=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(r=0,n=e.length;r<n;r++)a+=(i=e.charCodeAt(r))<=65535?2:4;else for(r=0,n=e.length;r<n;r++)a+=(i=e.charCodeAt(r))<=127?1:i<=2047?2:i<=65535?3:4;return a};function eg(){if("undefined"!=typeof __appServiceEngine__){var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if(bi())return"index"}var tg;function ig(){tg&&(tg=clearTimeout(tg))}var rg=!1;class ng{constructor(e={}){var t;this.systemInfo=os(),this.opt={},this.opt.level=Yf.INFO,this.mode=e.mode||"normal",this.pluginId=e.pluginId,this.pluginVersion=e.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!e.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=Qf,this._logInfo.platform="ios"===this.systemInfo.platform?qf:$f,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((()=>{N||this._getLogConfig()}),300),Xf((()=>{bi()&&this.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,t=e=>{this.onRealtimeDataResponse(e)},N||"function"==typeof t&&kf.push(re(t)))}cyclelyUploadInGame(){setTimeout((()=>{cg(),this.cyclelyUploadInGame()}),6e5)}onRealtimeDataResponse(e){if(this.uploadCount++,0!==e.errcode){var t=$i();if("wifi"!==t&&"4g"!==t||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(rg=!0,this.failCount=0,this.uploadCount=0,setTimeout((()=>{rg=!1}),6e4))),e.idList&&e.idList.length){var i=!1,r={},n=!1,a={};e.idList.forEach((o=>{var s=this.historyLog[o];s&&(s.id,s.url,Reporter.reportKeyValue({key:"UserLogFail",value:`,${t},${e.errcode},${parseInt(Date.now()/1e3,10)},${s.url},${s.libraryVersion},${Zf}`}),i=!0,delete this.historyLog[o],r[o]=s);var l=this.retryLogList[o];l&&(l.id,l.url,a[o]=l,delete this.retryLogList[o],n=!0)})),i&&(this.retryLogList=r,this.failRetry(r)),n&&this.saveToFile(a)}}}_getLogConfig(e,t){return Vf(this.pluginId).then((i=>{if(i.data){try{var r=i.data;this.MaxSize=1024*r.MaxLogSize,r.MaxLogCount&&(this.MaxLogCount=r.MaxLogCount),this._logInfo.id=r.UserUin,r.OpenId&&(this.traceid=`${r.OpenId}_${parseInt(Date.now()/1e3,10)}`),r.Debug&&r.Debug.MaxSize&&r.Debug.ExpireTime>Date.now()/1e3&&(this.isDebugMode=!0,this.MaxSize=1024*r.Debug.MaxSize,this.opt.level=Yf.DEBUG,r.Debug.MaxLogCount&&(this.MaxLogCount=r.Debug.MaxLogCount));var n=this._logCacheBeforeLogConfig||[];this._logCacheBeforeLogConfig=[],n.forEach((e=>{this._baseLog(e.key,e.path,...e.args)})),this._getConfigFail=!1,e&&this.upload(t),bi()||function(e){if(ig(),e="number"!=typeof e?3e5:e,(e=Math.max(e,5e3))>0){var t=()=>{ig(),tg=setTimeout((()=>{cg(),t()}),e)};t()}}(r.ReportInterval)}catch(e){this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]}setTimeout((()=>{this.tryUploadFailLog()}),100)}else this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]})).catch((e=>{e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(this._hasNoPermission=!0,this._logCacheBeforeLogConfig=[]),this._getConfigFail=!0}))}_config(e={}){e.mode&&(this.mode=e.mode)}_checkSize(e,t){var i=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||eg()))return!0;t.forEach((e=>{i+=Jf(e)})),this.sizeList[e]=this.sizeList[e]||0;var r=this.sizeList[e];return r+i>this.MaxSize?i:(this.sizeList[e]=r+i,!0)}_getLogValue(e){var t,i=typeof e,r="";if("function"===i&&(t="function(){}"),"undefined"===i)t="<Undefined>";else if("object"===i){r=(r=Object.prototype.toString.call(e)).replace(/^\[object |\]$/g,"");try{t="Error"===r?e.stack:JSON.stringify(e)}catch(e){r="Error",t=e.message}}else e+="";return t||e}_baseLog(e,t,...i){if(i.length&&!this._hasNoPermission)if(this._logInfo.id){var r,n,a,o;"object"==typeof e?(r=e.id,n=e.name,a=e.level,o=e.time):(r="__DEFAULT__",n="__DEFAULT__",a=e,o=+new Date);var s=Yf[a.toUpperCase()]||0;if(!(s<this.opt.level)){var l,u;if(t=this.pluginId||t||eg(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){var[c,d]=i;if(!c||"string"!=typeof c)return;var h=this._getLogValue(d);u=this._checkSize(t,[c,h]),l=[r,o,n,c,h]}else l=i.map(this._getLogValue),u=this._checkSize(t,l),this.structSizeList[t]+=6+(l.length?3*l.length-1:0);if(!0===u)this._addLogMsg(l,t,s);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){var p=[`UserLog:fail Log Size ${u} Exceed.`];"kv"===this.mode&&p.unshift("warning"),this._addLogMsg(p,t,Yf.WARN)}this.exceedSizeList[t]+=u}}}else this._logCacheBeforeLogConfig.push({key:e,path:t,args:i})}_addLogMsg(e,t,i){if(!this.isExceedTodayUploadLogCount&&i&&(!this._getConfigFail||!this._getConfigRetry)){var r=this.pluginId||t||eg();if(r)if(this.msgList[r]=this.msgList[r]||[],this.msgList[r].length>=this.MaxLogCount)this.MaxLogCount;else{var n=this.msgList[r][0];if("kv"===this.mode){var[a,o,s,l,u]=e,c=[i,a,o,s,l,u];this.msgList[r].push(c)}else{var d=new Date,h=Math.ceil(+d/1e3),p=[n?h-n[0]:h,e,i,d.getMilliseconds()];if(!this.msgList[r].length){var f=(new Date).getTimezoneOffset();p.push(f)}this.msgList[r].push(p)}this.levelList[r]=this.levelList[r]||0,this.levelList[r]|=i}}}OperateWxUploadLog(e,t){if(!this.isExceedTodayUploadLogCount){var i=e.structSize||0;delete e.structSize;var r,n=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){var a=this.pluginId?1004:1001;e.url;var o=Ff(a,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:Zf}));return this.historyLog[o]=e,Reporter.reportKeyValue({key:"UserLog",value:`,${i+n},${n}${e.timestamp},${e.url},${e.filter1},${Zf}`}),void(t&&t(!0))}return(r={sdkApiName:"UploadByApi",apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},ki(r)).then((()=>{t&&t(!0)})).catch((e=>{e&&1e4==+e.err_code&&(this.isExceedTodayUploadLogCount=!0),t&&t(!1),this.failCount++}))}}failRetry(e){this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((()=>{if(e)for(var t in e)this.historyLog.hasOwnProperty(t)&&this.OperateWxUploadLog(this.historyLog[t])}),3e3))}stat(e){return(e=this.pluginId||e||eg())&&this.sizeList[e]||0}getCurrentState(e){return{size:(e=this.pluginId||e||eg())&&this.sizeList[e]||0,maxSize:this.MaxSize,logCount:e&&this.msgList[e]&&this.msgList[e].length||0,maxLogCount:this.MaxLogCount}}_hasUploadInterval(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}upload(e){var t=e||eg();if(e=this.pluginId||t){var i=this.msgList[e]||[];if(i&&i.length)if(this._hasUploadInterval()){if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,t)}if(Kf){if(!rg){this.msgList[e]=[];var r=this.levelList[e]||Yf.DEBUG;this.levelList[e]=0;var n=this.sizeList[e];this.sizeList[e]=0;var a=this.exceedSizeList[e];this.exceedSizeList[e]=0;var o=this._logInfo;o.level=r,o.rawSize=a+n;var s=this.structSizeList[e]||0;if(o.structSize=s,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){var l={},u={};i.forEach((e=>{var[t,i,r,n,a,o]=e,s=t||Yf.DEBUG;u[i]=u[i]||[r,{},s],u[i][1][a]=o,u[i][2]=Math.max(u[i][2],s),l[n]=l[n]||[],-1===l[n].indexOf(u[i])&&l[n].push(u[i])}));var c=this.kvFilterList,d=[];c&&c[e]&&Object.keys(c[e]).forEach((t=>{var i=c[e][t];i&&i.length&&i.forEach((e=>{var[i,r=""]=e;if(u[i]){var n=u[i][1];n.__REALTIME_LOG_TAG__=n.__REALTIME_LOG_TAG__||[],-1===n.__REALTIME_LOG_TAG__.indexOf(r)&&n.__REALTIME_LOG_TAG__.push(r),-1===d.indexOf(r)&&(d.push(r),d.push(`${t}_${r}`))}}))})),o.msg=JSON.stringify(l),o.filter1=[].concat(Object.keys(l),d).join(" "),this.kvFilterList[e]=[]}else o.msg=JSON.stringify(i),o.filter1=this.filterList[e]||"",this.filterList[e]="";Jf(o.msg),o.appid=Zf,this.pluginId&&(o.pluginid=this.pluginId),this.pluginVersion&&(o.pluginVersion=this.pluginVersion),"kv"===this.mode&&(o.mode=this.mode),o.url=t,this.traceid&&(o.traceid=this.traceid),o.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(o,(e=>{this._isUploading=!1,this._lastUploadTime=Date.now(),e&&this._uploadList.length&&(this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout((()=>{this.timerId=null,this.upload(this._uploadList.shift())}),1e3))}))}}else Xf((()=>{Zf&&this.upload(t)}))}else this._uploadList.indexOf(t)<0&&this._uploadList.push(t)}}setFilterMsg(e,t,i){if("string"!=typeof t&&(t=JSON.stringify(t)),Jf(t)>2048)return!1;if(e=this.pluginId||e||eg(),"kv"===this.mode&&"object"==typeof i){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][i.name]=[[i.id,t]],!0}return this.filterList[e]=t,!0}addFilterMsg(e,t,i){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||eg(),"kv"===this.mode&&"object"==typeof i){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][i.name]=r[e][i.name]||[],void r[e][i.name].push([i.id,t])}var n=this.filterList[e]||"";this.setFilterMsg(e,n+(n?" ":"")+t)}getTraceId(){return this.traceid||""}getFilePath(){var e=(k&&k.env.USER_DATA_PATH||(N?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return Hf(e)||function(){try{gn.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}getFileContent(e){var t=function(){try{return{data:dn.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data)}catch(e){}return null}saveToFile(e){if(e){var t=this.getFilePath();if(Hf(t)){var i=this.getFileContent(t);if(i)for(var r in i)e[r]||(e[r]=i[r])}hn({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail(e){e.errMsg},success(e){}})}}tryUploadFailLog(){var e=this.getFilePath();if(Hf(e)){var t=this.getFileContent(e);if(!t)return;for(var i in t)t.hasOwnProperty(i)&&this.OperateWxUploadLog(t[i]);hn({filePath:e,data:"{}",encoding:"utf8",fail(e){e.errMsg},success(e){}})}}}var ag,og=null,sg={},lg=e=>e?sg[e]:og,ug=(e={},t,i)=>{var r="",n={stat(){if(!N){var e=lg(t);if(e)return e.stat(r)}},getCurrentState(){if(N)return{};var e=lg(t);return e?e.getCurrentState(r):{}},setFilterMsg(e){if(!N){var i=lg(t);if(i)return i.setFilterMsg(r,e)}},addFilterMsg(e){if(!N){var i=lg(t);if(i)return i.addFilterMsg(r,e)}},in(e){bi()?r="index":e&&e.route&&(r=e.route)},tag(e){var i=jf++,n=+new Date;return{debug(a,o){if(!N){var s=lg(t);if(s)return s._baseLog({id:i,name:e,time:n,level:"debug"},r,a,o)}},info(a,o){if(!N){var s=lg(t);if(s)return s._baseLog({id:i,name:e,time:n,level:"info"},r,a,o)}},warn(a,o){if(!N){var s=lg(t);if(s)return s._baseLog({id:i,name:e,time:n,level:"warn"},r,a,o)}},error(a,o){if(!N){var s=lg(t);if(s)return s._baseLog({id:i,name:e,time:n,level:"error"},r,a,o)}},setFilterMsg(n){if(!N){var a=lg(t);if(a)return a.setFilterMsg(r,n,{name:e,id:i})}},addFilterMsg(n){if(!N){var a=lg(t);if(a)return a.addFilterMsg(r,n,{name:e,id:i})}}}}};return n=t?Object.assign(n,{config(){},debug(){},info(){},warn(){},error(){}}):Object.assign(n,{config(e){if(!N&&"object"==typeof e){var i=lg(t);i&&i._config(e)}},debug(...e){if(!N){var i=lg(t);if(i)return i._baseLog("debug",r,...e)}},info(...e){if(!N){var i=lg(t);if(i)return i._baseLog("info",r,...e)}},warn(...e){if(!N){var i=lg(t);if(i)return i._baseLog("warn",r,...e)}},error(...e){if(!N){var i=lg(t);if(i)return i._baseLog("error",r,...e)}}}),lg(t)||((e,t)=>{e?sg[e]=t:og=t})(t,new ng({isClientReport:e.isClientReport,pluginId:t,pluginVersion:i,mode:t?"kv":"normal"})),n},cg=e=>{if(!N){var t,i=(t=[],og&&t.push(og),Object.keys(sg).forEach((e=>t.push(sg[e]))),t);i.length&&i.forEach((t=>{try{t.upload(e)}catch(e){}}))}};Ms((e=>{N||e&&8===e.targetAction||Kf&&(ag&&clearTimeout(ag),ag=setTimeout((()=>{"undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain("").forEach((e=>{cg(e.route)})):bi()&&cg();ag=null}),10))}));var dg=e=>"object"==typeof e&&null!==e,hg=function(){var e=arguments[arguments.length-1],t=zI(e),{textures:i,currentTextureIndex:r,dirtyTextureMap:n}=zI(this.canvas).flag,a=i[r];dg(a)&&(t&&t.isSharedCanvas?n.set(a,!0):n.has(a)&&n.delete(a))},pg=function(){var{textures:e,currentFramebuffer:t,dirtyFramebufferMap:i,framebufferTextureMap:r,dirtyTextureMap:n,framebufferRenderbufferMap:a,dirtyRenderbufferMap:o}=zI(this.canvas).flag;if(e.some((e=>n.has(e)))){i.set(t,!0);var s=r.get(t);dg(s)&&n.set(s,!0);var l=a.get(t);dg(l)&&o.set(l,!0)}},fg={activeTexture(e){var t=e-this.TEXTURE0;zI(this.canvas).flag.currentTextureIndex=t},bindTexture(e,t){var{textures:i,currentTextureIndex:r}=zI(this.canvas).flag;i[r]=t},wxBindCanvasTexture(e,t){var{textures:i,currentTextureIndex:r,dirtyTextureMap:n}=zI(this.canvas).flag;if(dg(t)){var a=zI(t),o={type:"WeixinCanvasTexture"};i[r]=o,a&&a.isSharedCanvas?n.set(o,!0):n.has(o)&&n.delete(o)}else i[r]=null},texImage2D:hg,texSubImage2D:hg,bindFramebuffer(e,t){var i=zI(this.canvas).flag;i.currentFramebuffer=t||i.screenFramebuffer},framebufferTexture2D(e,t,i,r){var{framebufferTextureMap:n,currentFramebuffer:a}=zI(this.canvas).flag;n.set(a,r)},framebufferRenderbuffer(e,t,i,r){var{dirtyRenderbufferMap:n,dirtyFramebufferMap:a,framebufferRenderbufferMap:o,currentFramebuffer:s}=zI(this.canvas).flag;n.has(r)&&a.set(s,!0),o.set(s,r)},copyTexImage2D(){var{dirtyFramebufferMap:e,currentFramebuffer:t,textures:i,currentTextureIndex:r,dirtyTextureMap:n}=zI(this.canvas).flag;if(e.has(t)){var a=i[r];dg(a)&&n.set(a,!0)}},drawArrays:pg,drawElements:pg},gg=e=>!zI(e).secure,_g=(e,t)=>{var i=zI(t);if(!i)return!0;var{secure:r}=i,{secure:n}=zI(e);return!(!n&&r)},mg=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){var{flag:t}=zI(this.canvas),{textures:i,currentTextureIndex:r}=t,n=i[r];if(n&&"WeixinCanvasTexture"===n.type)return void console.warn(`在调用 wxBindCanvasTexture() 向 ${r} 号纹理单元提交纹理后，不能再调用 ${e}() 向该纹理单元提交纹理`)}var a=this.canvas,o=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(_g(a,o))return!0;console.warn(`在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 ${e} 不能传入安全 Canvas`)}},vg=!1,yg="unknown";k.onReady((()=>{vg=Kt("screenCanvasReadPixels"),yg=Ai("screenCanvasReadPixelsFreely")}));var Ag,bg,Eg,wg={toDataURL:function(){return!!gg(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!gg(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:mg("createPattern"),drawImage:mg("drawImage"),texImage2D:mg("texImage2D"),texSubImage2D:mg("texSubImage2D"),wxBindCanvasTexture:mg("wxBindCanvasTexture"),readPixels:function(){var{secure:e}=zI(this.canvas);if(!e)return!0;if(ec("WebGLRenderingContext.readPixels"),vg){var{dirtyFramebufferMap:t,currentFramebuffer:i}=zI(this.canvas).flag;if(!t.has(i)||(ec("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==yg))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}else ec("screenCanvasReadPixelsNoPermission")}},{Canvas:Tg,Image:Cg}=O.Z,Sg={"2d":null,webgl:null},Ig={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},xg=function(e){Object.defineProperty(Ig,e,{get(){bg||(bg=Rg()),Eg||(Eg=bg.getContext("2d"));var t=e+"_cache";if(Ig[t])return Ig[t];if("Canvas"===e)Ig[t]=Object.getPrototypeOf(bg);else if("Image"===e)Ig[t]=Object.getPrototypeOf(new Cg);else if("CanvasRenderingContext2D"===e)Ig[t]=Object.getPrototypeOf(Eg);else if("CanvasPattern"===e){var i=Eg.createPattern(bg,"repeat");Ig[t]=Object.getPrototypeOf(i)}else if("CanvasGradient"===e){var r=Eg.createLinearGradient(0,0,100,100);Ig[t]=Object.getPrototypeOf(r)}else if("ImageData"===e){var n=Eg.getImageData(0,0,10,10);Ig[t]=Object.getPrototypeOf(n)}else if("TextMetrics"===e){var a=Eg.measureText("123");try{Ig[t]=Object.getPrototypeOf(a)}catch(e){wxNativeConsole.error("createTextMetrics Error: ",e)}}return Ig[t]}})};for(var Pg of Object.keys(Ig))xg(Pg);var Dg=new WeakMap;function Rg(){var e=new Tg;return e.width=1,e.height=1,e}function Og(e){var t={};return Object.keys(e).forEach((i=>{var r=Object.getOwnPropertyDescriptor(e,i);if("function"!=typeof r.value)r.get||r.set?Object.defineProperty(t,i,{get(){if(r.get)return r.get.call(this)},set(e){r.set&&r.set.call(this,e)}}):Object.defineProperty(t,i,r);else{var n=e[i];t[i]=function(){if("function"==typeof wg[i]){var e=wg[i].apply(this,arguments);if(!0!==e)return e}return"function"==typeof fg[i]&&fg[i].apply(this,arguments),n.apply(this,arguments)}}})),t}function kg(){return Ig}var Mg=function(){if(Ag)return Ag;var e=Rg(),t=Og(Object.getPrototypeOf(e)),i=t.getContext;return t.getContext=function(e,t){var{isSharedCanvas:r,isScreenCanvas:n}=zI(this);if(r)return{};var a=i.call(this,e,t);return null==a||(H&&n&&O.Z.setLiveContext&&O.Z.setLiveContext(a,e,t),/2d|webgl/.test(e)&&Object.setPrototypeOf(a,function(e){if(Sg[e])return Sg[e];var t=Rg().getContext(e),i=Og(Object.getPrototypeOf(t));return Sg[e]=i,Sg[e]}(e)),Dg.set(a,this),Object.defineProperty(a,"canvas",{value:this,configurable:!1,writeable:!1})),a},Ag=t,t},Ng=i(725),Lg=i.n(Ng),Bg=wxGA,Fg={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267,MiniGameOpenDataMonitor:23536,BLEConnection:23886,WeAppRequestError:24247,ClickWechatAppPreviewPage:24298,MiniprogramOnNeworkWeakChange:24499,WeAppRequestErrnoInfo:24321,PublishWechatState:24488,OpenEmbeddedMiniProgramResult:24542,RequestPaymentRiskConfirm:24544};function Ug(e){if(!Array.isArray(e)||e.some((e=>"string"!=typeof e||0===e.length)))return"invalid keyList"}var Wg=Li("getUserCloudStorage","webapi_getselfuserstorage",(({keyList:e=[]})=>({key:e})),(e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),Gg=e=>{var t=Ug(e.keyList);t?ut("getUserCloudStorage",e,t):Wg(e)},Vg=Li("getFriendCloudStorage","webapi_getfrienduserstorage",(({keyList:e=[]})=>({key:e})),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,e))),jg=(e={})=>{var t=Ug(e.keyList);t?ut("getFriendCloudStorage",e,t):Vg(e)},Hg=Li("getGroupCloudStorage","webapi_getgroupuserstorage",(({keyList:e=[],shareTicket:t})=>{var i=qt.get(t),{shareKey:r,shareName:n}=i;return{key:e,share_key:r,share_name:n}}),(e=>(e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((e=>(e.KVDataList=e.kv_list||[],delete e.kv_list,e))),delete e.user_item,e))),zg=e=>{var t=Ug(e.keyList);t?ut("getGroupCloudStorage",e,t):setTimeout((()=>{e.shareTicket?qt.get(e.shareTicket)?Hg(e):ut("getGroupCloudStorage",e,"参数 shareTicket 不正确"):qt.lastShareTicket&&qt.get(qt.lastShareTicket)?Hg(Object.assign({shareTicket:qt.lastShareTicket},e)):ut("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)},Yg=Li("getPotentialFriendList","webapi_game_potential_friends",(()=>{}),(e=>(e.list=e.friend_list,delete e.friend_list,e))),$g=Li("getGroupInfo","webapi_getshareinfo_byopengid",(({openGId:e})=>({opengid_list:[e]})),(e=>(e.name=e.info_list[0].room_topic,delete e.info_list,e)));function qg(e){setTimeout((()=>{$g(Object.assign({},e,{success:t=>ct({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}))}))}var Qg,Zg=e=>{var{success:t,fail:i,failWithMsg:r}=dt(e,"getGroupMsgTicket");Oi({sdkApiName:"getGroupMsgTicket",apiName:"webapi_reportgroupshare",reqData:{path:e.path,share_key:e.shareKey},success:e=>{var{data:i}=e;0===i.errcode?t({expiresIn:i.expires_in,groupMsgTicket:i.group_msg_ticket}):r({code:i.errcode,msg:i.errmsg})},fail:e=>{e.errCode=-1,i(e)}})},Kg=e=>{Zg(e)},Xg=Li("getIAPInfo","webapi_getiapinfo");function Jg(){return new Promise(((e,t)=>{Qg?e(Qg):Xg({success(t){Qg={openId:t.openID,appId:t.appId},e(Qg)},fail(e){t(e.errMsg)}})}))}var e_,t_,i_,r_={};k.onReady((()=>{var e=o_(k.appLaunchInfo||{});t_=e.appLaunchInfo,i_=e.publicLaunchInfo}));var n_=()=>i_,a_=()=>t_;function o_(e={}){var t=e.shareInfo,i=e.scene,r=e.query||{};if("object"==typeof t&&null!==t&&(e.shareTicket=qt.set(t.shareKey,t.shareName),qt.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},"string"==typeof e.referrerInfo.gameLiveInfo)try{e.referrerInfo.gameLiveInfo=JSON.parse(e.referrerInfo.gameLiveInfo)}catch(e){console.error("parse appLaunchInfo.referrerInfo.gameLiveInfo error",e)}1022===e.scene&&(r=e.query={}),!1===e.reLaunch&&(r={}),void 0===e.reLaunch&&"hide"===e_&&(r={}),1103===e.scene&&(i=1001),1104===e.scene&&(i=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!Kt("getGroupToolbarInfo")&&(i=1008);var n={scene:i,query:r,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return e.referrerInfo.gameLiveInfo&&(n.referrerInfo.gameLiveInfo=e.referrerInfo.gameLiveInfo),k.debugLaunchInfo&&k.debugLaunchInfo.lanDebugInfo&&!1!==k.debugLaunchInfo.lanDebugInfo.useStaticServer&&(n.lanDebugInfo=k.debugLaunchInfo.lanDebugInfo),e.chatType&&(n.chatType=e.chatType),{publicLaunchInfo:n,appLaunchInfo:e}}var s_={},l_={get:(e="default")=>s_[e],set(e,t="default"){s_[t]=e},clear(){s_={}}},u_="__wx__/functional-page",c_={PLAY_PAGE_IMAGE:"play_page_image",PLAY_PAGE_VIDEO:"play_page_video"},d_=[1154,1007,1008,1074,1088,1044,1045,1046,1010,1096];function h_({pageType:e="",query:t}={}){var i="";return"string"==typeof t?i=t:t&&"object"==typeof t&&(i=v_(t)),`${u_}/${e}?${i.replace(/^\?/,"")}`}function p_(){return Object.keys(c_).map((e=>c_[e])).join("|")}function f_(e=""){var t=e.indexOf("?"),i="",r="";t>=0?(i=e.slice(0,t),r=e.slice(t+1)):i=e;var n=new RegExp(`^${u_}/(${p_()})`),a=e.match(n),o="";return a&&(o=a[1]),{path:i,query:r,functionalPageType:o,isFunctionalPage:!!o}}function g_(e){var t={},i=l_.get();if(i.pageType===c_.PLAY_PAGE_IMAGE){var r=h_({pageType:c_.PLAY_PAGE_IMAGE,query:i.query});t={title:i.params.title||e.title,path:r,imageUrl:i.params.imageUrl||i.params.fileUrl,messageExtraData:Object.assign({},i.params,{pageType:c_.PLAY_PAGE_IMAGE}),cardSubType:__(c_.PLAY_PAGE_IMAGE)}}else if(i.pageType===c_.PLAY_PAGE_VIDEO){var n=h_({pageType:c_.PLAY_PAGE_VIDEO,query:i.query});t={title:i.params.title||e.title,path:n,imageUrl:i.params.thumbUrl,messageExtraData:Object.assign({},i.params,{pageType:c_.PLAY_PAGE_VIDEO}),cardSubType:__(c_.PLAY_PAGE_VIDEO)}}return t}function __(e){return{[c_.PLAY_PAGE_IMAGE]:0,[c_.PLAY_PAGE_VIDEO]:1}[e]}function m_(){return!!l_.get()}function v_(e={}){var t=Object.keys(e).reduce(((t,i)=>`${t}${i}=${e[i]}&`),"");return t=t.replace(/&$/,"")}function y_(e,t="index.html"){var i="";return"string"==typeof e?i=e:e&&"object"==typeof e&&(i=v_(e)),t+"?"+i}var A_=Ae("Show"),b_=Ae("BaseFrameShow"),E_=A_.onMethod,w_=A_.offMethod,T_=A_.internalOnMethod,C_=A_.internalOffMethod,S_=b_.internalOnMethod;b_.internalOffMethod;function I_(e,t){e=e||n_(),t=t||a_(),Reporter.__query__=e.query,Qi.query=e.query,Qi.scene=e.scene,A_.emitInternal(t),A_.emitGlobal(e)}function x_(e){Qi.sceneNote=e.scene_note,b_.emitInternal(e)}function P_(e=""){var t=e.indexOf("?"),i={};if(t>=0){var r=e.slice(t+1);if(r)try{i=r.split("&").reduce(((e,t)=>{var i=t.split("="),r=i[0],n=i.slice(1).join("=");return e[r]=n,e}),{})}catch(e){i={}}}return i}(N||G)&&nr.once("onhide",!0),Ee("onAppEnterForeground",((e={})=>{var t=e.path;L&&g(e.query)&&Object.keys(e.query).length>0||t&&(e.query=P_(t));var{publicLaunchInfo:i,appLaunchInfo:r}=o_(e);x_(r),setTimeout((()=>{!m_()&&nr.get("onhide")&&I_(i,r)}),0)})),k.onReady((()=>{var e=n_(),t=a_();Reporter.__query__=e.query,Qi.query=e.query,Qi.scene=e.scene,N||(x_(t),setTimeout((()=>{m_()||I_(e,t)}),0))}));var D_={},R_=null;function O_(){return D_}function k_({filePath:e,thumbFilePath:t,fileType:i,appType:r}={}){return new Promise(((n,a)=>{if(!/wxfile:\/\//.test(e)&&!/http:\/\//.test(e)){var o=rc.get(e);e=o}it("uploadToCommonCDN",{filePath:e,thumbFilePath:t,fileType:i,appType:r,isStorageMode:!0,snsUploadVersion:0,directReturnInDevtools:!0,success:n,fail:a})}))}k.onReady((()=>{D_=k.appLaunchInfo,bi()&&(S_(((e={})=>{var t=Object.assign({},e);D_.referrerInfo=Object.assign({},D_.referrerInfo,t.referrerInfo),delete t.referrerInfo,D_=Object.assign({},D_,t)})),E_((e=>{R_=e})))}));var M_=!0,N_={};k.onReady((()=>{Ai("shareCustomImageUrl")||(Li("getShareConfig","webapi_getshareconf")({success(e){Array.isArray(e.share_link_list)&&(N_=e.share_link_list.reduce(((e,t)=>(e[t.id]=t.url,e)),{}))},fail(e){}}),M_=!1)}));var L_=()=>N_,B_=()=>M_,F_=(e,t,i)=>`${e}?size=${t}x${i}`,U_=e=>new Promise(((t,i)=>{it("getImageInfo",{src:e,success:t,fail:i})}));function W_(e){return k_({filePath:e,fileType:20301,appType:215})}function G_(e,t=1048576){return new Promise(((i,r)=>{ir({filePath:e,success:e=>{e.size<=t?i(e):r(e)},fail:r})}))}var V_=null;var j_,H_=["width","left"],z_=new Map;function Y_({component:e,getVisibleAera:t}){z_.has(e)||z_.set(e,t)}function $_(e){z_.delete(e)}function q_(){return[...z_.entries()].map((([e,t])=>{var{width:i,height:r,left:n,top:a}=t(e);return{width:i,height:r,left:n,top:a}}))}function Q_({left:e,width:t}){return e+t}function Z_({top:e,height:t}){return e+t}function K_(e,t){var i;null!==(i=t)&&void 0!==i||(t=q_());var r=t.findIndex((t=>{return i=t,r=e,n=Math.max(i.left,r.left),a=Math.max(n,Math.min(Q_(i),Q_(r))),o=Math.max(i.top,r.top),s=Math.max(o,Math.min(Z_(i),Z_(r))),n!==a&&o!==s;var i,r,n,a,o,s}));return-1!==r&&t[r]}z_.set({},(()=>$p()));var X_=null!==(j_=k.screenWidth)&&void 0!==j_?j_:375,J_=X_/2;function em({height:e,width:t,align:i="right",padding:r=8}){for(var n=q_(),a=n.map((e=>{var{width:t,left:i}=e,r=q()(e,H_);return K()(K()({width:t,left:i},r),{},{align:t>J_?"center":i<J_?"left":"right"})})).filter((({align:e})=>i===e||"center"===e)).sort(((e,t)=>e.top-t.top)),o=a[a.length-1],s={height:e,width:t,left:"left"===i?0:X_-t,top:o?o.height+o.top+r:0},l=K_(s,n);l;)s.top=l.top+l.height+r,l=K_(s,n);return s}var tm=null;var im=new tr("Keyboard"),rm=new tr("",!0);["onKeyboardInput","onKeyboardConfirm","onKeyboardComplete","onStoreEmoticonSelect","onKeyboardHeightChange"].forEach((e=>{Ee(e,(t=>{im.emit(e,t),rm.emit(e,t)}))}));var nm=e=>rm.on("onKeyboardInput",e),am=e=>rm.off("onKeyboardInput",e),om=e=>rm.on("onKeyboardConfirm",e),sm=e=>rm.off("onKeyboardConfirm",e),lm=null,um=!1,cm="",dm=0,hm=null,pm=({value:e})=>{cm&&lm.setData({[cm]:e})},fm=({value:e})=>{um=!1,cm&&lm.setData({[cm]:e})},gm=({detail:e})=>{cm===e.key&&um||(cm=e.key,um?it("hideKeyboard",{success:()=>{um=!1,setTimeout((()=>{it("showKeyboard",{confirmType:"done",defaultValue:e.value,type:"id"===cm?"identity":"text",style:{height:"50px"},success:()=>{um=!0}})}),800)}}):it("showKeyboard",{confirmType:"done",defaultValue:e.value,type:"id"===cm?"identity":"text",style:{height:"50px"},success(){um=!0,lm.setData({open:um,key:cm})}}))},_m=({height:e})=>{e<100?lm.setData({keyboardHeight:0}):lm.setData({keyboardHeight:e+50})};function mm(e={},t){var i;if(clearInterval(hm),dm=null!==(i=e.remainSeconds)&&void 0!==i?i:dm,hm=setInterval((()=>{dm>0&&dm--}),1e3),lm)return t&&t(lm);__sclEngine__.initScl((i=>{lm=i.mainRoot.append("verify-modal",e),Ee("onKeyboardHeightChange",_m),lm.addListener("destroy",(({detail:t})=>{var i;lm=null,am(pm),sm(fm),i=_m,Ae(`WeixinJSBridge-${"onKeyboardHeightChange"}`).internalOffMethod(i),e.des&&e.des(null==t?void 0:t.reason),"success"===(null==t?void 0:t.reason)&&e.reportkv({UIArea:1511,PositionID:1,ActionID:2,Status:e.isSoftMode?3:1})})),lm.addListener("click",gm),lm.addListener("confirm",(({detail:t})=>(it("hideKeyboard",{success:()=>{um=!1}}),e.confirm(K()(K()({},t),{},{showModal:(...e)=>lm.showModal(...e)}))))),lm.addListener("switchPage",(({detail:t})=>{um&&it("hideKeyboard",{success:()=>{um=!1}});var{page:i}=t,r=e.half?1508:1507;"help"===i?r=1509:"fail"===i?r=1510:"succ"===i&&(r=1511),e.reportkv({UIArea:r,PositionID:0,ActionID:1,Status:e.isSoftMode?3:1}),lm.setData(K()({},t))})),lm.addListener("close",(({detail:t})=>{!e.isSoftMode&&dm<=0?qp():(lm.des(null==t?void 0:t.reason),"fail"===(null==t?void 0:t.reason)?e.reportkv({UIArea:1510,PositionID:1,ActionID:2,Status:e.isSoftMode?3:1}):"cancel"===(null==t?void 0:t.reason)&&(it("hideKeyboard",{success:()=>{um=!1}}),e.reportkv({UIArea:e.half?1508:1507,PositionID:3,ActionID:2,Status:e.isSoftMode?3:1})))})),lm.addListener("report",(({detail:t})=>{e.reportkv(t)})),nm(pm),om(fm),t&&t(lm)}))}var vm=new tr("touch",!0),ym=new tr("touch",!0),Am={};Foundation.env.isGame&&["start","move","end","cancel"].forEach((e=>{if("start"===e){O.Z.EventHandler[`ontouch${e}`]=t=>{ic.emit("beforeTouchStart",t),ic.emit("setLastTapTime",Date.now()),di("tap"),vm.emit(e,t),ym.emit(e,t)}}else if("end"===e){O.Z.EventHandler[`ontouch${e}`]=t=>{ic.emit("beforeTouchEnd"),vm.emit(e,t),ym.emit(e,t),ic.emit("afterTouchEnd")}}else O.Z.EventHandler[`ontouch${e}`]=t=>{vm.emit(e,t),ym.emit(e,t)};Am[`onTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=(t,i)=>{g(i)&&(O.Z.EventHandler[`ontouch${e}Dst`]=i),vm.on(e,t)},Am[`offTouch${e.charAt(0).toUpperCase()+e.slice(1)}`]=t=>{vm.off(e,t)}}));var bm=Am,{EventHandler:Em}=O.Z,wm=new tr("Mouse",!0),Tm={};["Down","Move","Up"].forEach((e=>{Tm[`onMouse${e}`]=t=>wm.on(e,t),Tm[`offMouse${e}`]=t=>wm.off(e,t),Em[`onmouse${e.toLowerCase()}`]=t=>{"Up"===e&&ic.emit("beforeTouchEnd"),wm.emit(e,t),"Up"===e&&ic.emit("afterTouchEnd")}}));var Cm=Tm,{EventHandler:Sm}=O.Z,Im=new tr("PointerLock",!0),xm={};["Change","Error"].forEach((e=>{xm[`onPointerLock${e}`]=t=>Im.on(e,t),xm[`offPointerLock${e}`]=t=>Im.off(e,t),Sm[`onpointerlock${e.toLowerCase()}`]=()=>Im.emit(e)}));var Pm=xm,{EventHandler:Dm}=O.Z,Rm=new tr("Mouse",!0);Dm.onwheel=e=>Rm.emit("Wheel",e);var Om=Ae("Game-Error"),km=Ae("Game-UnhandledRejection"),Mm=Om.onMethod,Nm=Om.offMethod,Lm=km.onMethod,Bm=km.offMethod;Reporter.registerThirdErrorListener((e=>{Om.emit({message:e,stack:""})})),Reporter.registerThirdUnhandledRejectionListener(((e,t)=>{km.emit({reason:e,promise:t})}));var Fm=null;function Um(e,t){"object"!=typeof e&&(e={});var i=O_(),r=i.scene,n=i.chatroomUsername,a="shareAppMessage",o=e.toCurrentGroup;o=1158===r?"boolean"!=typeof o||o:"boolean"==typeof o&&o;var s={title:e.title||k.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path};o&&1158===r&&(s.chatroomUsername=n,a="shareAppMessageToSpecificContactDirectly"),Bv(s,a,t)}ce("onShareAppMessage",(e=>{if(m_()){var t=g_(e);it("shareAppMessageDirectly",K()({},t))}else{var i={};if("function"==typeof Fm&&"object"!=typeof(i=Fm({}))&&(i={}),"Promise"===o(i.promise)){var r=!1;setTimeout((()=>{r||(r=!0,Um(i,e))}),3e3),i.promise.then((t=>{r||(r=!0,Um(t,e))}))}else Um(i,e)}}));var Wm=wxNativeConsole.createLogger("shareTimeline");function Gm(e={},t={title:k.accountInfo.nickname}){var i={},r="string"==typeof e.query?e.query:"";r.length>2e3&&(console.warn(`shreTimeline: query exceed max length limit 2000: "${r.length}"`),r=r.substr(0,2e3)),i.path=h_({pageType:c_.PLAY_PAGE_IMAGE,query:r});var n=B_(),a=L_();if(n){var o=rc.get(e.imageUrl);i.imageUrl="string"==typeof o?o:e.imageUrl}else{if(!a[e.imageUrlId])return Hl({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),null;i.imageUrl=a[e.imageUrlId]}return Object.assign({userPath:"string"==typeof e.path?e.path:"",userQuery:r},t,e,i)}function Vm(e,t={},i,r={}){return new Promise(((n,a)=>{var o={title:t.title,path:t.path,imageUrl:t.imageUrl?t.imageUrl:"",cardSubType:__(i),messageExtraData:K()({userPath:t.userPath,userQuery:t.userQuery,title:t.title,imageUrl:t.imageUrl||"",pageType:i,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl,isCustomPreviewImg:e.isSnapshot?0:1},r)};i===c_.PLAY_PAGE_IMAGE&&(o.preloadResources=[e.fileUrl]),it("shareTimeline",K()(K()({},o),{},{success:n,fail:a}))}))}function jm(e){$l({title:"请稍等"}),function(e={}){var{imagePreviewUrlId:t,imagePreviewUrl:i}=e,r=B_(),n=L_();if(r){if(/^(http|https):\/\//.test(i))return new Promise((e=>{Ka({url:i,success:t=>{e(Hm(t.tempFilePath).catch((e=>{Wm.error(e),zm()})))},fail:t=>{Wm.error(t),e(zm())}})}));if(/^wxfile:\/\//.test(i))return Hm(i).catch((e=>(Wm.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,i),zm())));if(s(i)){var a=i.split(".").pop();a=a?a.toLowerCase():"jpg";var o=`__wx_temp_timeline_img_${Vt()}.${a}`,l=`${k.env.USER_DATA_PATH}/${o}`;return Ei(Wr)({srcPath:i,destPath:l}).then((()=>Hm(l))).then((e=>(Lr({filePath:l,success:e=>{Wm.log("unlink success",e)},fail:e=>{Wm.error("unlink fail",e)}}),e))).catch((e=>(Wm.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,l),zm())))}return zm()}var u=n[t];return t&&u?new Promise((e=>{cc({src:u,success:t=>{var{width:i,height:r}=t,n=F_(u,i,r);e({fileUrl:n,thumbUrl:n})},fail:()=>e(zm())},Ka)})):zm()}(e).then((e=>(ql(),e))).then((t=>Vm(t,e,c_.PLAY_PAGE_IMAGE))).catch((e=>{ql(),Wm.error("invokeShareTimeline fail",e)}))}function Hm(e){return Promise.all([U_(e),G_(e,1048576).then((()=>W_(e)))]).then((([e,t])=>{var{width:i,height:r}=e;return{fileUrl:F_(t.fileUrl,i,r),thumbUrl:F_(t.thumbUrl,i,r)}}))}function zm(){return new Promise(((e,t)=>{var i=ux();i.toTempFilePath({x:0,y:0,width:i.width,height:i.height,destWidth:i.width,destHeight:i.height,success(t){t.width=i.width,t.height=i.height,e(t)},fail(e){t(e)}})})).then((e=>{var{width:t,height:i,tempFilePath:r}=e;return W_(r).then((e=>({fileUrl:F_(e.fileUrl,t,i),thumbUrl:F_(e.thumbUrl,t,i),isSnapshot:!0})))}))}var Ym=null;function $m(e,t){var i=function(e){var t={};return"function"==typeof Ym&&"object"!=typeof(t=Ym())&&(t={}),Gm(t,e)}(t);i&&jm(i)}ce("onShareTimeline",(e=>{var t=l_.get();t?function(e,t){var i="",r="";e.pageType===c_.PLAY_PAGE_IMAGE?(i=h_({pageType:c_.PLAY_PAGE_IMAGE,query:e.query}),r=e.params.imageUrl||""):e.pageType===c_.PLAY_PAGE_VIDEO&&(i=h_({pageType:c_.PLAY_PAGE_VIDEO,query:e.query}),r=e.params.thumbUrl||""),Vm({thumbUrl:e.params.thumbUrl,fileUrl:e.params.fileUrl},{title:e.params.title||t.title,imageUrl:r,path:i,userPath:e.params.userPath,userQuery:e.params.userQuery},e.pageType,e.params).catch((e=>{wxNativeConsole.error("onShareTimeline fail",e)}))}(t,e):$m(0,e)}));var qm=Ae("Hide"),Qm=Ae("BaseFrameHide"),Zm=qm.onMethod,Km=qm.offMethod,Xm=qm.internalOnMethod,Jm=qm.internalOffMethod,ev=Qm.internalOnMethod;Qm.internalOffMethod;Ee("onAppEnterBackground",((e={})=>{var t;t=e.mode,e_=t,m_()?Qm.emit(e):(nr.once("onhide",!0),Qm.emit(e),qm.emit(e))}));var tv=!1;function iv(){return!!tv}function rv(){return iv()||Fl?Promise.resolve():Promise.reject(new Error("require user interaction (only in touchend event)"))}ic.on("beforeTouchEnd",(()=>{tv=!0})),ic.on("afterTouchEnd",(()=>{tv=!1})),Xm((()=>{tv=!1}));var nv="startGameLive",av=!1,ov=e=>{var t="";if(e&&"object"==typeof e){var{query:i}=e;(i="string"==typeof i?i:"").length>2e3&&(console.warn(`onGameLiveStateChange: query exceed max length limit 2000: "${i.length}"`),i=i.substr(0,2e3)),i.length>0&&(t=`?${i.replace(/^\?/,"")}`)}return t},sv=({actionStatus:e,errType:t})=>{Reporter.reportKeyValue({key:"MidasFriendPayment",value:["","",37,2,"",e,"","","",$i(),"","",t,"","","",""].join(",")})},lv=Ae("GameLiveStateChange"),uv=lv.internalOnMethod,cv=(lv.internalOffMethod,null),dv=e=>({0:"end",1:"start",4:"menuClick"}[e]);Ee("onGameLiveStateChange",((e={})=>{lv.emitInternal(e)}));uv((e=>{var{event:t,extra:i}=e;if(4===t){var{path:r}=(e=>{var t="";if("function"==typeof cv){var i={state:dv(e.event)},r=cv(i);t=ov(r)}return{path:t}})(e);it("startGameLive",{path:r,reportInfo:JSON.stringify({scene:4})})}else if((0===t||1===t)&&"function"==typeof cv){var n={state:dv(e.event)};i&&i.wxaGameExportId&&(n.feedId=i.wxaGameExportId),cv(n)}}));var hv,pv,fv=new tr("key",!0);O.Z.EventHandler.onkeydown=e=>{fv.emit("down",e)},O.Z.EventHandler.onkeyup=e=>{fv.emit("up",e)},ce("onWindowResize",(()=>{var e={},t=as();hv===t.windowWidth&&pv===t.windowHeight||(hv=e.windowWidth=t.windowWidth,pv=e.windowHeight=t.windowHeight,ic.emit("onWindowResize",e))}));var gv=null;ce("onAddToFavorites",(e=>{var t={};if(m_()){var i=g_(e);it("addToFavorites",K()({},i))}else{"function"==typeof gv&&("object"!=typeof(t=gv({}))&&(t={}),t.path="string"==typeof t.path?t.path:"","string"==typeof t.query&&(t.path=t.path+"?"+t.query));var r=t.imageUrl;ac([r],"image",(i=>{/^(cloud):\/\//.test(r)&&(r=i.data[0].url),t.imageUrl=r,it("addToFavorites",Object.assign(e,t))}))}}));var _v,{Image:mv}=O.Z,vv=Object.defineProperty,yv=Object.getOwnPropertyDescriptor,Av=Object.prototype.hasOwnProperty,bv=["src","width","height","naturalWidth","naturalHeight","complete","tagName","nodeName","onerror","onload"],Ev=new WeakMap;function wv(e){return"function"!=typeof e?null:(Ev.set(e,(({type:t,target:i,timeStamp:r})=>e&&e({type:t,target:i,currentTarget:i,timestamp:1e6*r}))),Ev.get(e))}function Tv(){return new mv}var Cv=1,Sv=!1;function Iv(e,t,i=""){return e.font=`${t}px -apple-system`,i?e.measureText(i).width:0}k.onReady((()=>{Cv=k.pixelRatio,setTimeout((()=>{Oi({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:Ko},success(e){var t=e.data;Sv=t.is_enabled}})}),4e3)}));var xv=e=>new Promise((t=>{if(e)if("transparent"===e)t({width:0,height:0});else{var i=Tv();i.onload=()=>t(i),i.onerror=()=>t(),i.src=e}else t()})),Pv=function(){var e=zo()((function*({background:e,label:t,icon:i,tag:r,more:n=!1,base64:a=!1}){if(!e)return e;var o=lx(),s=o.getContext("2d");o.width=210*Cv,o.height=168*Cv,"transparent"===e&&(o.height=40*Cv),s.fillStyle="rgba(255, 255, 255, 0)",s.fillRect(0,0,o.width,o.height);var l=yield xv(e);if(!l)return e;l.width/l.height>=1.25?s.drawImage(l,0,0,1.25*l.height,l.height,0,0,o.width,o.height):l.width/l.height<1.25&&s.drawImage(l,0,0,l.width,.8*l.width,0,0,o.width,o.height);var u=Iv(s,12*Cv,t);if(r){var c=Iv(s,10*Cv,r);s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*Cv),s.lineTo(u+c+12*Cv,8*Cv),s.arc(u+c+12*Cv,20*Cv,12*Cv,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*Cv),s.closePath(),s.fill(),s.fillStyle="#F36D00",s.beginPath(),s.moveTo(4*Cv,14*Cv),s.arc(6*Cv,14*Cv,2*Cv,Math.PI,1.5*Math.PI),s.lineTo(c+10*Cv,12*Cv),s.arc(c+10*Cv,14*Cv,2*Cv,1.5*Math.PI,2*Math.PI),s.lineTo(c+12*Cv,26*Cv),s.arc(c+10*Cv,26*Cv,2*Cv,2*Math.PI,2.5*Math.PI),s.lineTo(6*Cv,28*Cv),s.arc(6*Cv,26*Cv,2*Cv,.5*Math.PI,Math.PI),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",s.fillText(r,8*Cv,23.5*Cv),Iv(s,12*Cv),s.fillText(t,c+16*Cv,24*Cv)}else if(i){var d=yield xv(n&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg=="),h=d?10*Cv:0;s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*Cv),s.lineTo(u+h+22*Cv,8*Cv),s.arc(u+h+22*Cv,20*Cv,12*Cv,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*Cv),s.closePath(),s.fill();var p=yield xv(i);p&&p.width&&p.height&&s.drawImage(p,6*Cv,12*Cv,16*Cv,16*Cv),d&&d.width&&d.height&&s.drawImage(d,u+30*Cv,14*Cv,6*Cv,12*Cv),s.fillStyle="#FFFFFF",Iv(s,12*Cv),s.fillText(t,26*Cv,24*Cv)}else s.fillStyle="rgba(0, 0, 0, 0.5)",s.beginPath(),s.moveTo(0,8*Cv),s.lineTo(u+2*Cv,8*Cv),s.arc(u+2*Cv,20*Cv,12*Cv,1.5*Math.PI,2.5*Math.PI),s.lineTo(0,32*Cv),s.closePath(),s.fill(),s.fillStyle="#FFFFFF",Iv(s,12*Cv),s.fillText(t,6*Cv,24*Cv);return a?o.toDataURL():o.toTempFilePathSync()}));return function(t){return e.apply(this,arguments)}}(),Dv=[];var Rv=new _e,Ov=null,kv=null;k.onReady((()=>{bi()&&T_((e=>{if(kv={},e.referrerInfo&&e.referrerInfo.messageExtraData){kv=e.referrerInfo.messageExtraData;var{userInfo:t,shareType:i}=kv;if(i&&t){var r=[Reporter.getAppType(),i,t.openID,e.path||"",$i()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:r})}}}))})),S_((e=>{var t=e.shareInfo;"object"==typeof t&&null!==t&&setTimeout((()=>{Mv(t.shareKey)}),500)}));var Mv=e=>{it("showUpdatableMessageSubscribeButton",{shareKey:e})},Nv=e=>(t,i)=>{var{shareInfos:r}=t;if(delete t.shareInfos,void 0!==r&&r.length>0)if(r=r.filter((e=>e.shareKey&&e.shareName)),t.shareTickets=r.map((e=>(Mv(e.shareKey),qt.set(e.shareKey,e.shareName)))),N)delete t.shareTickets,delete t.shareInfos,i();else{if(e.getGroupMsgTicket)return void Promise.all(r.map((e=>new Promise((t=>{var{shareKey:i}=e;Kg({shareKey:i,success(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail(){t({groupMsgTicket:""})}})}))))).then((e=>(t.groupMsgInfos=e,i()))).catch((()=>{}));i()}else i()},Lv=(e={},t,i={},r=!1)=>{var n=B_(),a=L_(),o="string"==typeof e.path?e.path:"",s="string"==typeof e.query?e.query:"",l="",u=0;switch(t){case"shareAppMessage":u=1;break;case"shareAppMessageDirectly":u=2;break;case"shareAppMessageToSpecificContactDirectly":u=3}if(s.length>2e3&&(console.warn(`shareAppMessage: query exceed max length limit 2000: "${s.length}"`),s=s.substr(0,2e3)),s&&(o=`${o}?${s}`),e.imageUrl=rc.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!n){if(!a[e.imageUrlId])return e.imageUrlId,Hl({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void c(2);l=e.imageUrl=a[e.imageUrlId]}function c(t){!function({result:e,shareType:t,canUseCustomImageUrl:i,imageUrlId:r="",transformedImageUrl:n=""}){var a=r_.query,o=[],s=k.accountInfo&&k.accountInfo.nickname||"";if(a&&"object"==typeof a)for(var l in a)o.push(`${encodeURIComponent(l)}=${encodeURIComponent(a[l])}`);var u=[r_.scene,r_.scene_note,r_.sessionid,"",s,Reporter.getAppType(),e,0,o.join("&"),t,i?1:2,r,n,k.host?k.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:u}),Reporter.submit()}({result:t,shareType:u,canUseCustomImageUrl:n,imageUrlId:e.imageUrlId,transformedImageUrl:l})}it(t,Object.assign(i,e,{path:o,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:u,userInfo:Ov},e.extra),success(t){!function(e,t){Dv.forEach((i=>{try{i(e,t)}catch(e){console.error(e)}}))}("shareAppMessage",t),(r||!N&&Ai("share"))&&ct({name:"shareAppMessage",args:e,res:t}),c(1),setTimeout((()=>{Ll(bl)}),500),e.requireAdsSkipCard&&Oi({apiName:"webapi_recvadcardsharepresent",reqData:{outTradeNo:(Date.now()+Math.random()).toString(36)},success(e){var t=e.data;!t.errCode&&t.amount&&function(e={}){__sclEngine__.initScl((t=>{t.mainRoot.append("ad-skip-card",e)}))}(t)}})},fail(t){var i=t.errMsg.replace("shareAppMessage:fail","");(r||!N&&Ai("share"))&&ut("shareAppMessage",e,i),c(-1!==i.indexOf("cancel")?3:2)},cancel(){setTimeout((()=>{Ll(El)}),500)},complete:t=>{var i=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),r=!i||"shareMessageToFriend:ok"===i;Kt("shareCallback")&&3===u&&(Rv.emit("callback",{errMsg:i,success:r}),ct({name:"shareMessageToFriend",errMsg:i,success:r,args:e}))}}),{beforeSuccess:Nv(e),beforeAll(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((t=>"function"==typeof e[t]))&&Yt({name:t,strategy:1}),Ll(Al)},Bv=(...e)=>{var t=()=>{var t=e[0].imageUrl;ac([t],"image",(i=>{/^(cloud):\/\//.test(t)&&(t=i.data[0].url),e[0].imageUrl=t,bi()?(e=>new Promise((t=>{Sv&&e.imageUrl?Oi({apiName:"webapi_game_getsharemark",reqData:{lib_version:Ko},success:i=>{var r=i.data;(r=(r.mark_list||[])[0])||t(e),r&&Pv({background:e.imageUrl,label:r.wording,icon:r.head_img_url,tag:r.mark_word}).then((i=>{e.imageUrl=i,e.extra={shareCardMarker:{label:r.mark_type}},t(e)})).catch((()=>t(e)))},fail:()=>t(e)}):t(e)})))(e[0]).catch(wxConsole.warn).then((()=>Lv(...e))):Lv(...e)}))};Ov?t():Xg({success:e=>{Ov=e},complete:()=>t()})},Fv=(e={})=>{var t={title:e.title||k.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path,requireAdsSkipCard:e.requireAdsSkipCard},i=O_(),r=i.scene,n=i.chatroomUsername,a="shareAppMessageDirectly",o=e.toCurrentGroup;(o=1158===r?"boolean"!=typeof o||o:"boolean"==typeof o&&o)&&1158===r&&(t.chatroomUsername=n,a="shareAppMessageToSpecificContactDirectly"),Bv(t,a),Wc({reportType:8,query:e.query})};function Uv(e){return $l({title:"请稍等"}),k_({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((e=>(ql(),e))).then((t=>{var i=h_({pageType:c_.PLAY_PAGE_VIDEO,query:e.query});return function(e,t={},i,r={}){return new Promise(((n,a)=>{var o={title:t.title,path:t.path,imageUrl:e.thumbUrl,cardSubType:__(i),messageExtraData:K()({title:t.title,imageUrl:e.fileUrl,pageType:i,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl},r)};it("shareAppMessageDirectly",K()(K()({},o),{},{success:n,fail:a}))}))}(t,{title:e.title,path:i,imageUrl:t.thumbUrl},c_.PLAY_PAGE_VIDEO,e)})).catch((e=>{ql(),wxNativeConsole.error("shareVideoAppMessage fail",e)}))}var Wv={};function Gv(e={}){var t={openId:e.openId,title:e.title||k.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=Object.keys(Wv).map((e=>`${e}=${Wv[e]}`)).join("&"),Bv(t,"shareAppMessageToSpecificContactDirectly")}var Vv="getUserInfo",jv=({openIdList:e=[],lang:t="en",success:i,fail:r,complete:n}={})=>{var{success:a,fail:o}=dt({success:i,fail:r,complete:n},Vv);Oi({sdkApiName:Vv,apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:e,lang:t},success:e=>{a({data:e.data.userInfoList||[]})},fail:o})},Hv=Li("getUserCloudStorageKeys","webapi_getuserstorageallappkey",(()=>{}),(e=>(e.keys=e.data_key,delete e.data_key,e)));class zv extends ul{constructor({id:e,parentId:t,style:i,props:r={},type:n="text",name:a="",autoInsert:o=!1,eventType:s="touch",clickState:l=!1,bubbleEvent:u=!1}={}){super({id:e,style:i,props:Object.assign(r,{fullscreen:!1}),name:a,parentId:t}),this.type="text"===n?"TextView":"ImageView",this.eventType=s,this.autoInsert=o,this.bubbleEvent=u,"touch"===this.eventType&&l&&this.ready().then((()=>{this.mask=new zv({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),this.mask.name="mask",this.add(this.mask)})).catch((()=>{}));var c=Date.now(),d={x:0,y:0};this.on("touchstart",(e=>{l&&this.mask&&(this.mask.style.hidden=!1),c=Date.now(),d=e}));var h=e=>{l&&this.mask&&(this.mask.style.hidden=!0);var t={x:0,y:0};try{t=this.getAbsolutePosition()}catch(e){}var i={x:0,y:0};Array.isArray(e)?i=e.pop():e.x&&e.y&&(i=e);var r={absoluteX:t.left+d.x,absoluteY:t.top+d.y,relativeX:d.x,relativeY:d.y,absoluteEndX:t.left+i.x,absoluteEndY:t.top+i.y,relativeEndX:i.x,relativeEndY:i.y,pressInterval:Date.now()-c};this.emit("click",r)};this.on("touchend",h),this.on("touchcancel",h),this.autoInsert&&this.insert()}toNativeData(){var e=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&e.push("objectFit");var t=e.reduce(((e,t)=>(e[t]=this.computedStyle[t],"borderColor"===t&&(e[t]=rl(this.computedStyle[t])),e)),{});t.bgColor=rl(this.computedStyle.backgroundColor),t.scaleX=this.computedStyle.scaleWidth,t.scaleY=this.computedStyle.scaleHeight;var i={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};return this.layoutBox&&(i={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(i.width=0,i.height=0),this.mask&&(this.mask.style.width=i.width,this.mask.style.height=i.height),t.padding=[0,0,0,0],void 0!==t.borderRadius&&t.borderRadius||(t.borderRadius=0),{parentId:this.parentId,dest:this.dest,viewId:this.id,position:i,hide:this.computedStyle.hidden,style:t,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:t.fixed}}insert(){var e=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise(((t,i)=>{it(`insert${this.type}`,Object.assign(e,{success:e=>{this.name,this.id,this.emit("ready"),t(e)},fail:i}))}))}update(){this.shouldUpdate=!1;var e=this.toNativeData();return new Promise(((t,i)=>{it(`update${this.type}`,Object.assign(e,{success:t,fail:i}))}))}destroy(){super.destroy();var e={dest:this.dest,viewId:this.id};return new Promise(((t,i)=>{it(`remove${this.type}`,Object.assign(e,{success:t,fail:i}))}))}animate({left:e,top:t,opacity:i,scaleWidth:r,scaleHeight:n,rotate:a=0,duration:o=500}={}){var s={dest:this.dest,viewId:this.id,easing:"ease-in",duration:o,finalStyle:{left:e,top:t,opacity:i,rotate:a,scaleX:r,scaleY:n}};return new Promise(((e,t)=>{it("animateCoverView",Object.assign(s,{success:e,fail:t}))})).then((o=>(void 0!==e&&(this.style.left=e),void 0!==t&&(this.style.top=t),void 0!==r&&(this.style.scaleWidth=r),void 0!==n&&(this.style.scaleHeight=n),void 0!==i&&(this.style.opacity=i),void 0!==a&&(this.style.rotate=a),o))).catch((e=>{wxNativeConsole.error("animateCoverView fail",e)}))}}class Yv extends zv{constructor({id:e,style:t,value:i="",name:r="",autoInsert:n=!1,eventType:a,bubbleEvent:o,clickState:s}={}){super({id:e,style:t,props:{value:i},type:"text",name:r,autoInsert:n,eventType:a,bubbleEvent:o,clickState:s})}toNativeData(){var e=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce(((e,t)=>(e[t]=this.computedStyle[t],e)),{});return Object.assign(super.toNativeData(),{label:Object.assign(e,{content:this.value})})}}var $v=function(){var e,t="inherit",i="row",r="row-reverse",n="column",a="column-reverse",o="flex-start",s="center",l="flex-start",u="center",c="flex-end",d="stretch",h="relative",p="absolute",f={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},g={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},_={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},m={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function v(e){return void 0===e}function y(e){return e===i||e===r}function A(e,t){if(void 0!==e.style.marginStart&&y(t))return e.style.marginStart;var i=null;switch(t){case"row":i=e.style.marginLeft;break;case"row-reverse":i=e.style.marginRight;break;case"column":i=e.style.marginTop;break;case"column-reverse":i=e.style.marginBottom}return void 0!==i?i:void 0!==e.style.margin?e.style.margin:0}function b(e,t){if(void 0!==e.style.marginEnd&&y(t))return e.style.marginEnd;var i=null;switch(t){case"row":i=e.style.marginRight;break;case"row-reverse":i=e.style.marginLeft;break;case"column":i=e.style.marginBottom;break;case"column-reverse":i=e.style.marginTop}return null!=i?i:void 0!==e.style.margin?e.style.margin:0}function E(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&y(t))return e.style.borderStartWidth;var i=null;switch(t){case"row":i=e.style.borderLeftWidth;break;case"row-reverse":i=e.style.borderRightWidth;break;case"column":i=e.style.borderTopWidth;break;case"column-reverse":i=e.style.borderBottomWidth}return null!=i&&i>=0?i:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function w(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&y(t))return e.style.borderEndWidth;var i=null;switch(t){case"row":i=e.style.borderRightWidth;break;case"row-reverse":i=e.style.borderLeftWidth;break;case"column":i=e.style.borderBottomWidth;break;case"column-reverse":i=e.style.borderTopWidth}return null!=i&&i>=0?i:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function T(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&y(t))return e.style.paddingStart;var i=null;switch(t){case"row":i=e.style.paddingLeft;break;case"row-reverse":i=e.style.paddingRight;break;case"column":i=e.style.paddingTop;break;case"column-reverse":i=e.style.paddingBottom}return null!=i&&i>=0?i:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+E(e,t)}function C(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&y(t))return e.style.paddingEnd;var i=null;switch(t){case"row":i=e.style.paddingRight;break;case"row-reverse":i=e.style.paddingLeft;break;case"column":i=e.style.paddingBottom;break;case"column-reverse":i=e.style.paddingTop}return null!=i&&i>=0?i:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+w(e,t)}function S(e,t){return E(e,t)+w(e,t)}function I(e,t){return A(e,t)+b(e,t)}function x(e,t){return T(e,t)+C(e,t)}function P(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function D(e,t){if("rtl"===t){if(e===i)return r;if(e===r)return i}return e}function R(e,t){return function(e){return e===n||e===a}(e)?D(i,t):n}function O(e){return e.style.position?e.style.position:"relative"}function k(e){return O(e)===h&&e.style.flex>0}function M(e,t){return e.layout[m[t]]+I(e,t)}function N(e,t){return void 0!==e.style[m[t]]&&e.style[m[t]]>=0}function L(e,t){return void 0!==e.style[t]}function B(e,t){return void 0!==e.style[t]?e.style[t]:0}function F(e,t,i){var r={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],n={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],a=i;return void 0!==n&&n>=0&&a>n&&(a=n),void 0!==r&&r>=0&&a<r&&(a=r),a}function U(e,t){return e>t?e:t}function W(e,t){void 0===e.layout[m[t]]&&N(e,t)&&(e.layout[m[t]]=U(F(e,t,e.style[m[t]]),x(e,t)))}function G(e,t,i){t.layout[g[i]]=e.layout[m[i]]-t.layout[m[i]]-t.layout[_[i]]}function V(e,t){return void 0!==e.style[f[t]]?B(e,f[t]):-B(e,g[t])}function j(w,j,z){var Y=function(e,i){var r;return(r=e.style.direction?e.style.direction:t)===t&&(r=void 0===i?"ltr":i),r}(w,z),$=D(function(e){return e.style.flexDirection?e.style.flexDirection:n}(w),Y),q=R($,Y),Q=D(i,Y);W(w,$),W(w,q),w.layout.direction=Y,w.layout[f[$]]+=A(w,$)+V(w,$),w.layout[g[$]]+=b(w,$)+V(w,$),w.layout[f[q]]+=A(w,q)+V(w,q),w.layout[g[q]]+=b(w,q)+V(w,q);var Z=w.children.length,K=x(w,Q);if(function(e){return void 0!==e.style.measure}(w)){var X=!v(w.layout[m[Q]]),J=e;J=N(w,Q)?w.style.width:X?w.layout[m[Q]]:j-I(w,Q),J-=K;var ee=!N(w,Q)&&!X,te=!N(w,n)&&v(w.layout[m.column]);if(ee||te){var ie=w.style.measure(J);ee&&(w.layout.width=ie.width+K),te&&(w.layout.height=ie.height+x(w,n))}if(0===Z)return}var re,ne,ae,oe,se=function(e){return"wrap"===e.style.flexWrap}(w),le=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(w),ue=T(w,$),ce=T(w,q),de=x(w,$),he=x(w,q),pe=!v(w.layout[m[$]]),fe=!v(w.layout[m[q]]),ge=y($),_e=null,me=null,ve=e;pe&&(ve=w.layout[m[$]]-de);for(var ye=0,Ae=0,be=0,Ee=0,we=0,Te=0;Ae<Z;){var Ce,Se=0,Ie=0,xe=0,Pe=0,De=pe&&le===o||!pe&&le!==s,Re=De?Z:ye,Oe=!0,ke=Z,Me=null,Ne=null,Le=ue,Be=0;for(re=ye;re<Z;++re){if((ae=w.children[re]).lineIndex=Te,ae.nextAbsoluteChild=null,ae.nextFlexChild=null,(Ye=P(w,ae))===d&&O(ae)===h&&fe&&!N(ae,q))ae.layout[m[q]]=U(F(ae,q,w.layout[m[q]]-he-I(ae,q)),x(ae,q));else if(O(ae)===p)for(null===_e&&(_e=ae),null!==me&&(me.nextAbsoluteChild=ae),me=ae,ne=0;ne<2;ne++)oe=0!==ne?i:n,!v(w.layout[m[oe]])&&!N(ae,oe)&&L(ae,f[oe])&&L(ae,g[oe])&&(ae.layout[m[oe]]=U(F(ae,oe,w.layout[m[oe]]-x(w,oe)-I(ae,oe)-B(ae,f[oe])-B(ae,g[oe])),x(ae,oe)));var Fe=0;if(pe&&k(ae)?(Ie++,xe+=ae.style.flex,null===Me&&(Me=ae),null!==Ne&&(Ne.nextFlexChild=ae),Ne=ae,Fe=x(ae,$)+I(ae,$)):(Ce=e,ge||(Ce=N(w,Q)?w.layout[m[Q]]-K:j-I(w,Q)-K),0===be&&H(ae,Ce,Y),O(ae)===h&&(Pe++,Fe=M(ae,$))),se&&pe&&Se+Fe>ve&&re!==ye){Pe--,be=1;break}De&&(O(ae)!==h||k(ae))&&(De=!1,Re=re),Oe&&(O(ae)!==h||Ye!==d&&Ye!==l||v(ae.layout[m[q]]))&&(Oe=!1,ke=re),De&&(ae.layout[_[$]]+=Le,pe&&G(w,ae,$),Le+=M(ae,$),Be=U(Be,F(ae,q,M(ae,q)))),Oe&&(ae.layout[_[q]]+=Ee+ce,fe&&G(w,ae,q)),be=0,Se+=Fe,Ae=re+1}var Ue=0,We=0,Ge=0;if(Ge=pe?ve-Se:U(Se,0)-Se,0!==Ie){var Ve,je,He=Ge/xe;for(Ne=Me;null!==Ne;)(Ve=He*Ne.style.flex+x(Ne,$))!==(je=F(Ne,$,Ve))&&(Ge-=je,xe-=Ne.style.flex),Ne=Ne.nextFlexChild;for((He=Ge/xe)<0&&(He=0),Ne=Me;null!==Ne;)Ne.layout[m[$]]=F(Ne,$,He*Ne.style.flex+x(Ne,$)),Ce=e,N(w,Q)?Ce=w.layout[m[Q]]-K:ge||(Ce=j-I(w,Q)-K),H(Ne,Ce,Y),ae=Ne,Ne=Ne.nextFlexChild,ae.nextFlexChild=null}else le!==o&&(le===s?Ue=Ge/2:"flex-end"===le?Ue=Ge:"space-between"===le?(Ge=U(Ge,0),We=Ie+Pe-1!=0?Ge/(Ie+Pe-1):0):"space-around"===le&&(Ue=(We=Ge/(Ie+Pe))/2));for(Le+=Ue,re=Re;re<Ae;++re)O(ae=w.children[re])===p&&L(ae,f[$])?ae.layout[_[$]]=B(ae,f[$])+E(w,$)+A(ae,$):(ae.layout[_[$]]+=Le,pe&&G(w,ae,$),O(ae)===h&&(Le+=We+M(ae,$),Be=U(Be,F(ae,q,M(ae,q)))));var ze=w.layout[m[q]];for(fe||(ze=U(F(w,q,Be+he),he)),re=ke;re<Ae;++re)if(O(ae=w.children[re])===p&&L(ae,f[q]))ae.layout[_[q]]=B(ae,f[q])+E(w,q)+A(ae,q);else{var Ye,$e=ce;if(O(ae)===h)if((Ye=P(w,ae))===d)v(ae.layout[m[q]])&&(ae.layout[m[q]]=U(F(ae,q,ze-he-I(ae,q)),x(ae,q)));else if(Ye!==l){var qe=ze-he-M(ae,q);$e+=Ye===u?qe/2:qe}ae.layout[_[q]]+=Ee+$e,fe&&G(w,ae,q)}Ee+=Be,we=U(we,Le),Te+=1,ye=Ae}if(Te>1&&fe){var Qe=w.layout[m[q]]-he,Ze=Qe-Ee,Ke=0,Xe=ce,Je=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(w);Je===c?Xe+=Ze:Je===u?Xe+=Ze/2:Je===d&&Qe>Ee&&(Ke=Ze/Te);var et=0;for(re=0;re<Te;++re){var tt=et,it=0;for(ne=tt;ne<Z;++ne)if(O(ae=w.children[ne])===h){if(ae.lineIndex!==re)break;v(ae.layout[m[q]])||(it=U(it,ae.layout[m[q]]+I(ae,q)))}for(et=ne,it+=Ke,ne=tt;ne<et;++ne)if(O(ae=w.children[ne])===h){var rt=P(w,ae);if(rt===l)ae.layout[_[q]]=Xe+A(ae,q);else if(rt===c)ae.layout[_[q]]=Xe+it-b(ae,q)-ae.layout[m[q]];else if(rt===u){var nt=ae.layout[m[q]];ae.layout[_[q]]=Xe+(it-nt)/2}else rt===d&&(ae.layout[_[q]]=Xe+A(ae,q))}Xe+=it}}var at=!1,ot=!1;if(pe||(w.layout[m[$]]=U(F(w,$,we+C(w,$)),de),$!==r&&$!==a||(at=!0)),fe||(w.layout[m[q]]=U(F(w,q,Ee+he),he),q!==r&&q!==a||(ot=!0)),at||ot)for(re=0;re<Z;++re)ae=w.children[re],at&&G(w,ae,$),ot&&G(w,ae,q);for(me=_e;null!==me;){for(ne=0;ne<2;ne++)oe=0!==ne?i:n,!v(w.layout[m[oe]])&&!N(me,oe)&&L(me,f[oe])&&L(me,g[oe])&&(me.layout[m[oe]]=U(F(me,oe,w.layout[m[oe]]-S(w,oe)-I(me,oe)-B(me,f[oe])-B(me,g[oe])),x(me,oe))),L(me,g[oe])&&!L(me,f[oe])&&(me.layout[f[oe]]=w.layout[m[oe]]-me.layout[m[oe]]-B(me,g[oe]));ae=me,me=me.nextAbsoluteChild,ae.nextAbsoluteChild=null}}function H(e,t,i){e.shouldUpdate=!0;var r=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===r?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=r,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),j(e,t,i),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:j,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();var qv=(e,t)=>{var i=!1;t.layoutBox=t.layoutBox||{},["left","top","width","height"].forEach((r=>{i=i||t.layoutBox[r]!==e.layout[r],t.layoutBox[r]=e.layout[r]})),t.shouldUpdate=t.shouldUpdate||i,e.children.forEach((e=>{var i=t.children[e.id];i&&qv(e,i)}))},Qv=e=>{var t=Promise.resolve();return e.isInserted?e.shouldUpdate&&(t=e.update()):t=e.insert(),t.then((()=>Promise.all(Object.keys(e.children).map((t=>{var i=e.children[t];return Qv(i)})))))},Zv=e=>{e.isInserted?e.shouldUpdate&&e.update():e.insert(),Object.keys(e.children).map((t=>{var i=e.children[t];return Zv(i)}))};class Kv extends ul{constructor({style:e,name:t,auto:i=!0}={}){super({style:e,id:0,name:t});var r=null;this.auto=i,this.on("layout",(()=>{this.auto&&(clearTimeout(r),r=setTimeout((()=>this.layout()),0))})),this.onebyone=!0}layout(){var e,t={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return e=t,$v.fillNodes(e),$v.computeLayout(e),qv(t,this),this.onebyone?Qv(this).then((()=>this.emit("update-done"))):(Zv(this),Promise.resolve().then((()=>this.emit("update-done"))))}}var Xv=new Kv({name:"webview-layout"});Xv.dest=0;var Jv=new Kv({name:"nativeview-layout",auto:!1});Jv.onebyone=!1,Jv.dest=1;class ey extends zv{constructor({id:e,style:t,src:i="",name:r="",autoInsert:n=!1,eventType:a,bubbleEvent:o,clickState:s}={}){super({id:e,style:t,props:{src:i},type:"image",name:r,autoInsert:n,eventType:a,bubbleEvent:o,clickState:s})}toNativeData(){return Object.assign(super.toNativeData(),{iconPath:Si(this.src)})}}class ty{constructor(){this.emitter=new _e({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}emit(e,t){this.emitter.emit(e,t)}on(e,t){if(t&&"function"==typeof t){var i=__errorTracer__.surroundThirdByTryCatch(t,`at ${e} callback function`);this.callbackMap.set(t,i),this.originalCallbackMap.set(i,t),this.emitter.on(e,i)}}off(e,t){if(t&&"function"==typeof t){var i=this.callbackMap.get(t);"function"==typeof i&&(this.emitter.off(e,i),this.callbackMap.delete(t),this.originalCallbackMap.delete(i))}else this.emitter.listeners(e).forEach((e=>{var t=this.originalCallbackMap.get(e);this.callbackMap.delete(t),this.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}var iy={video:1,"live-player":2,"live-pusher":3,image:4,audio:5},ry=0,ny={};k.onReady((()=>{ry=k.appType+1e3,ny=k.appLaunchInfo}));var ay={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92},oy={},sy=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];L&&sy.push("onVideoFullScreenChange");var ly=(e,t,i)=>{"ad"!==e.scene&&(({component:e,eventName:t,eventData:i,src:r=""}={})=>{var n=$i(),a=wx&&wx.version&&wx.version.version||"",o=Object.keys(ny.query||{}).map((e=>`${e}=${ny.query[e]}`)).join(",");o=encodeURIComponent(o);var s="";switch(t){case"onLoad":s=[i.duration,i.controls?2:1].join(";");break;case"onWaiting":s=[i.position,i.buffered].join(";");break;case"onError":s=i.errMsg.replace(","," ");break;case"onFullScreenChange":s=i.fullScreen?2:1;break;case"onTimeUpdate":s=[i.position,i.buffered].join(";");break;case"onImageLoad":s=[i.isLazyLoad?2:1,i.size,i.loadTime,i.width,i.height,i.originalWidth,i.originalHeight].join(";");break;case"onImageError":s=[i.isLazyLoad?2:1].join(";")}var l=[Math.round(Date.now()/1e3),ny.scene,"",ny.sessionid||ny.sessionId,ny.path,o,n,a,iy[e],ay[t],s,encodeURIComponent(r.substring(0,1024)).substring(0,1024),ry].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})})({component:"video",eventName:t,eventData:i,src:e.src})};class uy extends ul{constructor({style:e={},name:t,x:i=0,y:r=0,width:n=300,height:a=200,hide:o=!1,src:s,poster:l,referrerPolicy:u="no-referrer",initialTime:c=0,playbackRate:d=1,live:h=!1,objectFit:p="contain",controls:f=!0,showProgress:g=!0,showProgressInControlMode:_=g,autoplay:m=!1,muted:v=!1,loop:y=!1,enableProgressGesture:A=!0,enablePlayGesture:b=!1,showCenterPlayBtn:E=!0,autoInsert:w=!0,scene:T="default",preLoad:C=!1,obeyMuteSwitch:S=!1,underGameView:I=!1,backgroundColor:x="#000000",playerHint:P="",zIndex:D,autoPauseIfNavigate:R=!0,autoPauseIfOpenNative:O=!0}={}){super({style:e,name:t}),this.isSrcChanged=!1,this.autoInsert=w,this.playerHint=P,this.scene=T,this.preLoad=C,this.underGameView=I,this.zIndex=D,this.autoPauseIfOpenNative=O,this.autoPauseIfNavigate=R,oy[this.id]=this;var k=null;this.emitter=new ty,this.deferred=[],this._buffered=0,this._position=0;var M={x:i,y:r,width:n,height:a,hide:o,src:s,poster:l,initialTime:c,playbackRate:d,live:h,objectFit:p,controls:f,showProgress:g,showProgressInControlMode:_,backgroundColor:x,autoplay:m,muted:v,loop:y,enableProgressGesture:A,enablePlayGesture:b,showCenterPlayBtn:E,obeyMuteSwitch:S,referrerPolicy:u};Object.keys(M).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>M[e],set:t=>{"src"!==e&&M[e]===t||(M[e]=t,this.isInserted?("src"===e&&(this.isSrcChanged=!0),"poster"===e&&(this.isPosterChanged=!0),"playbackRate"===e?this.operate("playbackRate",[t]):(clearTimeout(k),k=setTimeout((()=>this.update()),0))):this.deferred.push({type:"property",property:e,value:t}))}})})),sy.forEach((e=>{var t=e.toLowerCase().replace("video","");this[t]=()=>{},this.emitter.on(e,(e=>{this[t](e)}))})),this.autoInsert&&this.insert().then((()=>{this.playbackRate&&1!==this.playbackRate&&this.operate("playbackRate",[this.playbackRate])})).then((()=>{this.deferred.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)}))}))}insert(){if(!this.isInserted)return this.isInserted=!0,ly(this,"onSrcSet",{}),new Promise(((e,t)=>{it("insertVideoPlayer",Object.assign(this.toNativeData(),{data:JSON.stringify({id:this.id}),filePath:Si(this.src),scene:this.scene,preLoad:this.preLoad,underGameView:this.underGameView,referrerPolicy:this.referrerPolicy,playerHint:this.playerHint,zIndex:this.zIndex,success:t=>{this.emit("ready"),e(t)},fail:t}))}))}destroy(){return new Promise(((e,t)=>{B?setTimeout((()=>{it("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t})}),0):it("removeVideoPlayer",{videoPlayerId:this.id,success:e,fail:t}),sy.forEach((e=>{var t=e.replace("Video","").replace("on","off");"function"==typeof this[t]&&this[t]()})),delete oy[this.id]}))}toNativeData(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,backgroudColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy,autoPauseIfNavigate:this.autoPauseIfNavigate,autoPauseIfOpenNative:this.autoPauseIfOpenNative};return this.isSrcChanged&&(t.filePath=Si(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=Si(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}update(){this.shouldUpdate=!1;var e=this.toNativeData();return e.filePath&&ly(this,"onSrcSet",{}),new Promise(((t,i)=>{it("updateVideoPlayer",Object.assign({},e,{success:t,fail:i}))}))}operate(e,t=[]){if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(`${e} can't be invoked when video is hidden`)):new Promise(((i,r)=>{it("operateVideoPlayer",{videoPlayerId:this.id,type:e,data:t,success:i,fail:r})}));this.deferred.push({type:"method",method:e,args:t})}play(){return this.operate("play")}pause(){return this.operate("pause")}stop(){return this.operate("stop")}seek(e){return this.operate("seek",[e])}requestFullScreen(e){return this.operate("requestFullScreen",[e])}exitFullScreen(){return this.operate("exitFullScreen")}}sy.forEach((e=>{var t=e.replace("Video","");uy.prototype[t]=function(t){this.emitter.on(e,t)};var i=t.replace("on","off");uy.prototype[i]=function(t){this.emitter.off(e,t)}})),sy.forEach((e=>{Ee(e,(t=>{var i=t.videoPlayerId||JSON.parse(t.data||"{}").id,r=oy[i];if(r)if(r.emitter.emit(e,t),"onVideoProgress"!==e){var n=t;"onVideoTimeUpdate"===e?(r._position=t.position,n={position:t.position,buffered:r._buffered}):"onVideoWaiting"===e&&(n={position:r._position,buffered:r._buffered}),ly(r,e.replace("Video",""),n)}else r._buffered=t.buffered}))}));var cy=new Set,dy=new WeakMap,hy="service",py="plugin",fy={[hy]:0,[py]:0},gy={add(e,t){cy.add(e),dy.set(e,t),fy[t]++},remove(e){var t=dy.get(e);cy.delete(e)&&(dy.delete(e),fy[t]--)},get size(){return cy.size},getSizeByType:e=>fy[e]},_y=0,my=1,vy=2,yy=new WeakMap,Ay=new Map,by=ArrayBuffer,Ey="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?by=__global.SharedArrayBuffer:i.g.SharedArrayBuffer&&(by=i.g.SharedArrayBuffer));class wy{constructor(e,t){if(!l(e)||e<0)throw new Mt(`Invalid array buffer length ${e}`);if(l(t)){var i;try{i=Ey.get(t)}catch(e){throw new Error(`WeixinSharedBuffer.get${t} fail: ${e.message}`)}Object.defineProperty(this,"buffer",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:t,enumerable:!0,writable:!1})}else{Object.defineProperty(this,"buffer",{value:new by(e),writable:!1,enumerable:!0});var r=Ey.new(this.buffer);Object.defineProperty(this,"_sabId",{value:r,enumerable:!0,writable:!1})}var n={writeStatus:_y,readStatus:_y,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};yy.set(this,n),Ay.set(this._sabId,this)}destroy(){var e=yy.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],Ay.delete(this._sabId),yy.get(this).destroyed=!0,this.unlock(),Ey.destroy(this._sabId)}lock(e,t=!1){var i=yy.get(this),{destroyed:r,writeStatus:n,readStatus:a,writeLockCallbacks:o,readLockCallbacks:s}=i;if(r)throw new Mt("SharedArrayBuffer has been destroyed");if(!m(e))throw new Mt("callback must be a function");n!==vy?(o.push(e),n===my||(i.writeStatus=my,i.writeLockId=Ey.Lock(this._sabId,(()=>{o.forEach((e=>e())),s.forEach((e=>e())),i.writeStatus=vy,i.writeLockCallbacks=[],i.readLockCallbacks=[]})))):e()}unlock(){var e=yy.get(this),{writeLockId:t,readLockId:i,writeStatus:r,readStatus:n,destroyed:a}=e;a?console.warn("unlock: SharedArrayBuffer has been destroyed"):(r!==my&&r!==vy||(Ey.Unlock(this._sabId,t),e.writeStatus=_y,e.writeLockId=void 0,e.writeLockCallbacks=[]),n!==my&&n!==vy||(Ey.Unlock(this._sabId,i),e.readStatus=_y,e.readLockId=void 0,e.readLockCallbacks=[]))}}var Ty=e=>{return g(e)?l(e._sabId)?(t=e._sabId,Ay.has(t)?Ay.get(t):new wy(0,t)):Object.keys(e).reduce(((t,i)=>{var r=e[i];return t[i]=Ty(r),t}),{}):_(e)?e.map(Ty):e;var t},Cy=new WeakMap,Sy=new WeakMap,Iy=new WeakMap,xy={},Py={},Dy={},Ry=new WeakMap,Oy=new WeakMap,ky=0,My={};function Ny(e,t,i=++ky){return Dy[e]?(My[e]||(My[e]=[]),My[e].push({id:i,callback:t})):(Dy[e]=i,t()),i}function Ly(e,t){if(Dy[e]===t&&(delete Dy[e],My[e]&&My[e].length)){var{id:i,callback:r}=My[e].shift();Ny(e,r,i)}}if(!Ey.new){var By=0;Object.assign(Ey,{new(e){var t=++By;return Py[t]=e,Object.keys(xy).forEach((i=>{var r=Cy.get(xy[i]);__safeway__.worker.postMsgToWorker(r,{__cmd__:"setSharedBuffer",__buffer__:e,__id__:t},!1)})),t},get:e=>Py[e],destroy(e){delete Py[e]},Lock:Ny,Unlock:Ly})}__safeway__.worker.onWorkerMsg(((e,t)=>{var i=xy[e],r=Sy.get(i),n=Oy.get(i);if(t.__inner_postmsg_flag__&&(t=t.data),t.__log__&&t.logs)(e=>{e.__isNativeConsole__?wxNativeConsole[e.level](...e.logs):console[e.level](...e.logs)})(t);else{if("setSharedBuffer"===t.__cmd__)return Py[t.__id__]=t.__buffer__,void Object.keys(xy).forEach((i=>{var r=Cy.get(xy[i]);r!==e&&__safeway__.worker.postMsgToWorker(r,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(i&&"function"==typeof r)if(n&&n.useWKWorker){if("requireScriptSuccess"===t.__cmd__){var a=Ry.get(i);return void(a&&a.evaluateWorkerScriptPromiseResolve&&a.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void tn.readFile({filePath:t.filePath,success:({data:i})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode(...new Uint16Array(i))}),fail:({errMsg:i})=>__safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:i})});r(t.data)}else r(Ty(t))}else Ly(t.__sid__,t.__lid__);else Ny(t.__sid__,(()=>i.postMessage(t)),t.__lid__)}}));var Fy=function(e,t){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:Cy.get(this),__options__:t})},Uy=function(){var e,t=new Promise((t=>{e=t}));Ry.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})};class Wy{constructor(e,t,i={useWKWorker:!1,contextType:"",pluginId:""}){Cy.set(this,e),Oy.set(this,i),xy[e]=this,this._id=e,i.useWKWorker?Uy.call(this):Fy.call(this,t,{pluginId:i.pluginId}),gy.add(this,i.contextType)}postMessage(e){var t=Cy.get(this),i=Ry.get(this),r=Oy.get(this);r&&r.useWKWorker&&i?i.evaluateWorkerScriptPromise.then((()=>{__safeway__.worker.postMsgToWorker(t,{data:e,appid:k.accountInfo.appId})})):(e={data:e,__inner_postmsg_flag__:!0},__safeway__.worker.postMsgToWorker(t,e))}onMessage(e){Sy.set(this,e)}terminate(){var e=Cy.get(this),t=Oy.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:k.accountInfo.appId}):__safeway__.worker.terminate(e),gy.remove(this),Cy.delete(this),Sy.delete(this),Ry.delete(this),Iy.delete(this),Oy.delete(this),delete xy[e]}onProcessKilled(e){Iy.set(this,e)}}ce("onWorkerWebViewTerminate",(()=>{Object.keys(xy).forEach((e=>{var t=xy[e],i=Oy.get(t);if(i&&i.useWKWorker){var r=Iy.get(t);gy.remove(t),Cy.delete(t),Sy.delete(t),Ry.delete(t),Iy.delete(t),Oy.delete(t),delete xy[e],"function"==typeof r&&__errorTracer__.surroundThirdByTryCatch(r,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));var Gy=new _e,Vy={};class jy extends ul{constructor({style:e,name:t,x:i=0,y:r=0,width:n=300,height:a=200,devicePosition:o="back",flash:s="auto",size:l="small",autoInsert:u=!0,success:c,fail:d,complete:h}={}){super({style:e,name:t}),this.size=l,Vy[this.id]=this;var p=null;this.deferred=[];var f={x:i,y:r,width:n,height:a,devicePosition:o,flash:s};Object.keys(f).forEach((e=>{Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:()=>f[e],set:t=>{if(f[e]!==t){if(f[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(p),p=setTimeout((()=>this.update()),0)}}})})),Gy.on("onInit",(()=>{var e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)}))}));var g={success:c,fail:d,complete:h};u&&this.insert().then((e=>{this.frameWidth=e.width,this.frameHeight=e.height,ct({name:"createCamera",args:g})})).catch((()=>{ut("createCamera",g)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{it("insertCamera",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{it("updateCamera",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t={}){return this.isInserted?new Promise(((i,r)=>{it("operateCamera",Object.assign(t,{cameraId:this.id,type:e,fail:r,success:t=>{if(i(t),"listenFrameChange"===e){if(!Hr)throw new Error("device not supported");t.data=Hr.get(t.bufferId),t.data.__proto__=ArrayBuffer.prototype,this._frame=t}}}))})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}takePhoto(e="normal"){return this.operate("takePhoto",{quality:e})}startRecord(){return this.operate("startRecord")}stopRecord(e=!1){return this.operate("stopRecord",{compressed:e})}onAuthCancel(e){Gy.on("onAuthCancel",e)}onStop(e){Gy.on("onStop",e)}onCameraFrame(e){"function"==typeof e&&Gy.on("onCameraFrame",(()=>{this._frame&&e({data:this._frame.data,width:this._frame.width,height:this._frame.height})}))}listenFrameChange(e){var t=e?(e=>{if(e._id>=0&&xy[e._id])return e._id})(e):void 0,i={size:this.size};return void 0!==t&&Kt("listenFrameChangeInWorker")?(i.workerId=t,this.operate("listenFrameChange",i)):this.operate("listenFrameChange",i)}closeFrameChange(){return this._frame=null,this.operate("closeFrameChange")}destroy(){return new Promise(((e,t)=>{delete Vy[this.id],Gy.removeAllListeners("onInit"),Gy.removeAllListeners("onAuthCancel"),Gy.removeAllListeners("onStop"),Gy.removeAllListeners("onCameraFrame"),it("removeCamera",{cameraId:this.id,success:e,fail:t})}))}}Ee("onCameraInitDone",(()=>Gy.emit("onInit"))),Ee("onCameraNeedAuthCancel",(()=>Gy.emit("onAuthCancel"))),Ee("onCameraStop",(()=>Gy.emit("onStop"))),Ee("onCameraFrame",(()=>Gy.emit("onCameraFrame")));var Hy={},zy=new tr("LivePlayer",!0);class Yy extends ul{constructor({style:e,name:t,x:i=0,y:r=0,width:n=300,height:a=200,src:o,mode:s="live",autoplay:l=!1,muted:u=!1,orientation:c="vertical",objectFit:d="contain",minCache:h=1,maxCache:p=3,soundMode:f="speaker",autoPauseIfOpenNative:g=!0,autoInsert:_=!0,success:m,fail:v,complete:y}={}){super({style:e,name:t}),Hy[this.id]=this;var A=null;this.deferred=[];var b={x:i,y:r,width:n,height:a,src:o,mode:s,autoplay:l,muted:u,orientation:c,objectFit:d,minCache:h,maxCache:p,soundMode:f,autoPauseIfOpenNative:g};Object.keys(b).forEach((e=>{Object.defineProperty(this,e,{enumerable:!0,get:()=>b[e],set:t=>{if(b[e]!==t){if(b[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(A),A=setTimeout((()=>this.update()),0)}}})}));var E={success:m,fail:v,complete:y};_&&this.insert().then((()=>{var e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)})),ct({name:"createLivePlayer",args:E})})).catch((({errMsg:e})=>{var t=(e||"").replace(/^\w+:fail\s*/,"");ut("createLivePlayer",E,t)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{it("insertLivePlayer",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{it("updateLivePlayer",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t=[]){return this.isInserted?new Promise(((i,r)=>{it("operateLivePlayer",{livePlayerId:this.id,type:e,data:t,quality:t.quality,fail:r,success:i})})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}play(){return this.operate("play")}stop(){return this.operate("stop")}pause(){return this.operate("pause")}resume(){return this.operate("resume")}mute(){return this.operate("mute")}requestFullScreen(e=0){return this.operate("requestFullScreen",[e])}exitFullScreen(){return this.operate("exitFullScreen")}snapshot(e="raw"){return this.operate("snapshot",{quality:e})}destroy(){return new Promise(((e,t)=>{delete Hy[this.id],zy.off(`state-${this.id}`),zy.off(`fs-${this.id}`),zy.off(`net-${this.id}`),zy.off(`audio-${this.id}`),it("removeLivePlayer",{livePlayerId:this.id,success:e,fail:t})}))}onStateChange(e){zy.on(`state-${this.id}`,e)}offStateChange(e){zy.off(`state-${this.id}`,e)}onFullScreenChange(e){zy.on(`fs-${this.id}`,e)}offFullScreenChange(e){zy.off(`fs-${this.id}`,e)}onNetStatus(e){zy.on(`net-${this.id}`,e)}offNetStatus(e){zy.off(`net-${this.id}`,e)}onAudioVolumeNotify(e){zy.on(`audio-${this.id}`,e)}offAudioVolumeNotify(e){zy.off(`audio-${this.id}`,e)}}var $y=(e,t)=>Ee(e,(e=>t(e||{})));$y("onLivePlayerEvent",(({livePlayerId:e,errCode:t,errMsg:i})=>{zy.emit(`state-${e}`,{code:t,message:i})})),$y("onLivePlayerFullScreenChange",(({livePlayerId:e,fullScreen:t,direction:i})=>{zy.emit(`fs-${e}`,{fullScreen:t,direction:i})})),$y("onLivePlayerNetStatus",(({livePlayerId:e,info:t})=>{t&&zy.emit(`net-${e}`,{videoBitrate:t.VIDEO_BITRATE,audioBitrate:t.AUDIO_BITRATE,videoFPS:t.VIDEO_FPS,videoGOP:t.VIDEO_GOP,netSpeed:t.NET_SPEED,netQualityLevel:t.NET_QUALITY_LEVEL,netJitter:t.NET_JITTER,videoWidth:t.VIDEO_WIDTH,videoHeight:t.VIDEO_HEIGHT})})),$y("onLivePlayerAudioVolume",(({livePlayerId:e,volume:t})=>{zy.emit(`audio-${e}`,{volume:t})}));var qy={},Qy=new tr("LivePusher",!0);function Zy(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function Ky(e){switch(e){case"3:14":return 1;default:return 2}}class Xy extends ul{constructor({style:e,name:t,x:i=0,y:r=0,width:n=300,height:a=200,url:o,mode:s="RTC",autopush:l=!1,muted:u=!1,enableCamera:c=!0,autoFocus:d=!0,orientation:h="vertical",beauty:p=0,whiteness:f=0,aspect:g="9:16",minBitrate:_=200,maxBitrate:m=1e3,audioQuality:v="high",waitingImage:y,waitingImageHash:A,zoom:b=!1,devicePosition:E="front",remoteMirror:w=!1,localMirror:T="auto",audioReverbType:C=0,enableMic:S=!0,enableAgc:I=!1,enableAns:x=!1,audioVolumeType:P="voicecall",videoWidth:D=360,videoHeight:R=640,autoInsert:O=!0,success:k,fail:M,complete:N}={}){super({style:e,name:t}),qy[this.id]=this;var L=null;this.deferred=[];var B={x:i,y:r,width:n,height:a,url:o,mode:s,autopush:l,muted:u,enableCamera:c,autoFocus:d,orientation:h,beauty:p,whiteness:f,aspect:g,minBitrate:_,maxBitrate:m,audioQuality:v,waitingImage:y,waitingImageHash:A,zoom:b,devicePosition:E,remoteMirror:w,localMirror:T,audioReverbType:C,enableMic:S,enableAgc:I,enableAns:x,audioVolumeType:P,videoWidth:D,videoHeight:R};Object.keys(B).forEach((e=>{Object.defineProperty(this,e,{enumerable:!0,get:()=>B[e],set:t=>{if(B[e]!==t){if(B[e]=t,!this.isInserted)return this.deferred.push({type:"property",property:e,value:t}),t;clearTimeout(L),L=setTimeout((()=>this.update()),0)}}})}));var F={success:k,fail:M,complete:N};O&&this.insert().then((()=>{var e=this.deferred;this.isInserted=!0,this.deferred=[],e.forEach((e=>{"property"===e.type?this[e.property]=e.value:this.operate(e.method,e.args)})),ct({name:"createLivePusher",args:F})})).catch((({errMsg:e})=>{var t=(e||"").replace(/^\w+:fail\s*/,"");ut("createLivePusher",F,t)}))}insert(){if(!this.isInserted)return new Promise(((e,t)=>{it("insertLivePusher",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}update(){return new Promise(((e,t)=>{it("updateLivePusher",Object.assign(this.toNativeData(),{success:e,fail:t}))}))}operate(e,t={}){return this.isInserted?new Promise(((i,r)=>{it("operateLivePusher",{livePusherId:this.id,type:e,url:t.url,volume:t.volume,quality:t.quality,fail:r,success:i})})):(this.deferred.push({type:"method",method:e,args:t}),Promise.resolve({}))}toNativeData(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:Zy(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:Ky(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}start(){return this.operate("start")}stop(){return this.operate("stop")}pause(){return this.operate("pause")}resume(){return this.operate("resume")}playBGM(e){return this.operate("playBGM",{url:e})}stopBGM(){return this.operate("stopBGM")}pauseBGM(){return this.operate("pauseBGM")}resumeBGM(){return this.operate("resumeBGM")}setBGMVolume(e=1){return this.operate("setBGMVolume",{volume:e})}setMICVolume(e=1){return this.operate("setMICVolume",{volume:e})}startPreview(){return this.operate("startPreview")}stopPreview(){return this.operate("stopPreview")}snapshot(e){return this.operate("snapshot",{quality:e})}switchCamera(){return this.operate("switchCamera")}toggleTorch(){return this.operate("toggleTorch")}destroy(){return new Promise(((e,t)=>{delete qy[this.id],Qy.off(`state-${this.id}`),Qy.off(`net-${this.id}`),Qy.off(`start-${this.id}`),Qy.off(`progress-${this.id}`),Qy.off(`complete-${this.id}`),Qy.off(`error-${this.id}`),it("removeLivePusher",{livePusherId:this.id,success:e,fail:t})}))}onStateChange(e){Qy.on(`state-${this.id}`,e)}offStateChange(e){Qy.off(`state-${this.id}`,e)}onNetStatus(e){Qy.on(`net-${this.id}`,e)}offNetStatus(e){Qy.off(`net-${this.id}`,e)}onBGMStart(e){Qy.on(`start-${this.id}`,e)}offBGMStart(e){Qy.off(`start-${this.id}`,e)}onBGMProgress(e){Qy.on(`progress-${this.id}`,e)}offBGMProgress(e){Qy.off(`progress-${this.id}`,e)}onBGMComplete(e){Qy.on(`complete-${this.id}`,e)}offBGMComplete(e){Qy.off(`complete-${this.id}`,e)}onError(e){Qy.on(`error-${this.id}`,e)}offError(e){Qy.off(`error-${this.id}`,e)}}var Jy=(e,t)=>Ee(e,(e=>t(e||{})));Jy("onLivePusherEvent",(({livePusherId:e,errCode:t,errMsg:i})=>{Qy.emit(`state-${e}`,{code:t,message:i})})),Jy("onLivePusherNetStatus",(({livePusherId:e,info:t})=>{t&&Qy.emit(`net-${e}`,{videoBitrate:t.VIDEO_BITRATE,audioBitrate:t.AUDIO_BITRATE,videoFPS:t.VIDEO_FPS,videoGOP:t.VIDEO_GOP,netSpeed:t.NET_SPEED,netQualityLevel:t.NET_QUALITY_LEVEL,netJitter:t.NET_JITTER,videoWidth:t.VIDEO_WIDTH,videoHeight:t.VIDEO_HEIGHT})})),Jy("onLivePusherBGMStart",(({livePusherId:e})=>{Qy.emit(`start-${e}`)})),Jy("onLivePusherBGMProgress",(({livePusherId:e,progress:t,duration:i})=>{Qy.emit(`progress-${e}`,{progress:t,duration:i})})),Jy("onLivePusherBGMComplete",(({livePusherId:e,errCode:t})=>{Qy.emit(`complete-${e}`,{errCode:t})})),Jy("onLivePusherError",(({livePusherId:e,errCode:t,errMsg:i,data:r})=>{Qy.emit(`error-${e}`,{errCode:t,errMsg:i,data:r})}));var eA={};class tA extends ul{constructor({style:e={},name:t,x:i=0,y:r=0,width:n=300,height:a=200,url:o="",urls:s=[],scale:l=1,autoInsert:u=!0,hide:c=!1,zIndex:d=0}={}){if(super({style:e,name:t}),this.x=i,this.y=r,this.width=n,this.height=a,this.scale=+l,this.hide=c,this.autoInsert=u,this.url=o,this.zIndex=d,this.emitter=new tr("ImagePreviewer",!0),eA[this.id]=this,"string"==typeof s)try{this.urls=JSON.parse(s)}catch(e){this.urls=[]}else this.urls=s;this._insertPromise=new Promise(((e,t)=>{this._insertPromiseResolve=e,this._insertPromiseReject=t}))}insert(){return it("insertImagePreviewer",Object.assign(this.toNativeData(),{success:e=>{this._insertPromiseResolve(e)},fail:e=>{this._insertPromiseReject(e)}})),this._insertPromise}update(){return new Promise(((e,t)=>{this._insertPromise.then((()=>{it("updateImagePreviewer",Object.assign(this.toNativeData(),{success:t=>{e(t)},fail:e=>{t(e)}}))})).catch(t)}))}destroy(){return new Promise(((e,t)=>{setTimeout((()=>{it("removeImagePreviewer",{viewId:this.id,success:e,fail:t}),this.offImageLoadFail(),delete eA[this.id]}),0)}))}toNativeData(){return{position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId}}onImageLoadFail(e){this.emitter.on("onImageLoadFail",e)}offImageLoadFail(e){this.emitter.off("onImageLoadFail",e)}}Ee("onImagePreviewerLoadFail",(e=>{eA[e.viewId].emitter.emit("onImageLoadFail",e)}));var iA=new WeakMap,rA=e=>iA.get(e),nA=function(e){var t=rA(this),i={view:zv,text:Yv,image:ey,video:uy,"image-previewer":tA}[e.name],r="";e.attributes.id?r=tl(e.attributes.id):wxNativeConsole.error(`${e.name} 缺少id`);var n=Object.keys(e.attributes).reduce(((i,n)=>{var a=e.attributes[n],o=tl(n);return"id"===n?(i.style=Object.assign(i.style||{},t.style[r]),i):"class"===n?(i.style=a.split(/\s+/).reduce(((e,i)=>Object.assign(e,t.style[i])),i.style||{}),i):(/\{\{.+\}\}/.test(a)||(i[o]=""===a||"true"===a||"false"!==a&&a),i)}),{});n.name=r;var a=new i(n);return t[r]=a,e.children.forEach((e=>{var t=nA.call(this,e);a.add(t)})),a},aA=e=>{iA.delete(e)};class oA{constructor(){iA.set(this,{})}}var sA=function(e,t,i){var r=rA(this);r.xom=e,r.style=t,r.state=i,nA.call(this,e)},lA=[],uA=null,cA=null,dA=!1,hA=[],pA=!1,fA="",gA=0,_A=0,mA=e=>{uA=e;var t=!1,i=!0;e.deviceOrientation!==fA&&(t=!0),e.size.windowWidth!==gA&&(t=!0),e.size.windowHeight!==_A&&(t=!0),(e=>{e.deviceOrientation&&(fA=e.deviceOrientation),gA=e.size.windowWidth,_A=e.size.windowHeight})(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(pA=!0),"auto"===e.pageOrientation.originalPageOrientation||pA||(t=!1,i=!1)),"undefined"!=typeof __appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(i=!1),t&&(dA=!0);var r=e.changedWebviewIds;i&&r&&r.forEach((e=>{hA.indexOf(e)<0&&hA.push(e)})),cA||(cA=setTimeout((()=>{cA=null;var e=dA;dA=!1;var t=hA;hA=[];var i={deviceOrientation:uA.deviceOrientation,size:uA.size};e&&lA.forEach((e=>{__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(i)})),t.forEach((e=>{var t="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((()=>{t.__callPageLifeTime__("onResize",i)}),"at Resize callback function")()}))}),16))};Ee("onViewDidResize",(e=>{mA(e)}));var vA=e=>{lA.push(e)},yA=0,AA=0;k.onReady((()=>{var e=ps();yA=e.screenWidth,AA=e.screenHeight,vA((e=>{yA=e.windowWidth,AA=e.windowHeight}))}));class bA extends oA{constructor({title:e,content:t,icon:i,confirmText:r,cancelText:n,confirm:a,cancel:o,style:s={}}={}){super();var l=rA(this),u=`<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png" />\n          <text id="title" value="${e}" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          ${i?`<image id="icon" src="${!0===i?"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png":i}" />`:""}\n          <text id="content" value="${t}" />\n        </view>\n        <view id="footer">\n          ${n?`<text id="cancel" value="${n}" />`:""}\n          ${r?`<text id="confirm" value="${r}" />`:""}\n        </view>\n      </view>\n    </view>`,{root:c}=Lg()(u),d=(({cancelText:e,confirmText:t,icon:i})=>{var r=yA>AA;return{mask:{width:yA,height:AA,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:r?(yA-AA)/2:0,width:r?AA:yA},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:r?(yA-AA)/2:0,width:r?AA:yA},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:r?AA:yA},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:r?AA:yA},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:i?0:64,marginBottom:i?0:15,width:r?.9*AA:.9*yA},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:r?AA:yA},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:t?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:e?120:184}}})(arguments[0]);Object.keys(s).forEach((e=>{d[e]&&Object.assign(d[e],s[e])})),sA.call(this,c,d),Xv.add(l.container),l.close&&l.close.on("click",(()=>{"function"==typeof o&&o()})),l.cancel&&l.cancel.on("click",(()=>{"function"==typeof o&&o()})),l.confirm&&l.confirm.on("click",(()=>{"function"==typeof a&&a()}))}destroy(){var e=rA(this);Xv.remove(e.container),aA(this)}}function EA(e={}){return G?(Ul(Object.assign({},e,{showCancel:!!e.cancelText,success({confirm:t,cancel:i}){t?e.confirm&&e.confirm():i&&e.cancel&&e.cancel()}})),{destroy:()=>{}}):new bA(e)}var wA=new tr("InteractiveStorageModified",!0),TA={add:1},CA=Ei(jv);var SA=({actionId:e,actId:t=0,receiverOpenId:i,detail:r,opNum:n=0,operationType:a=0})=>{var o=[e,t,0,r,n,a,i].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:o})},IA=e=>{Reporter.reportIDKey({key:e})},xA=Li("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",(({key:e,operation:t,opNum:i,toUser:r,debug:n,action:a,object:o,ratio:s,quiet:l})=>({key:e,operation:t,debug:n,opNum:i,toUser:r,action:a,object:o,ratio:s,quiet:!!l,op_num:i,to_user:r,random_number:Date.now(),randomNumber:Date.now()})),(e=>{var t,i,{json_resp:r,inner_errcode:n,inner_errmsg:a}=e,o="modifyFriendInteractiveStorage:fail ";e.errMsg,delete e.json_resp,delete e.inner_errcode,delete e.inner_errmsg;try{t=JSON.parse(r)}catch(e){t={},e.message}if((i=t.log)&&i.split("\n").map(decodeURIComponent).forEach((e=>{var t=parseInt(e.substr(0,1),10),i=`[JSServer]${e.substr(1)}`;switch(t){case C:console.log(i);break;case I:console.warn(i);break;case x:console.error(i)}})),!c(n)&&0!==n)return e.errMsg=`${o}${a}`,void(e.errCode=n);try{var s=JSON.parse(t.base_resp);if(0!==s.errcode)return e.errCode=s.errmsg,void(e.errMsg=`${o}${s.errmsg}`);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=`${o}${t.message}`,t.message}})),PA=new Set,DA=e=>{var t=a_(),i=kv;!i&&t&&t.referrerInfo&&(i=t.referrerInfo.messageExtraData),i&&3===i.shareType&&i.userInfo?PA.has(i.userInfo.openID)?ut("modifyFriendInteractiveStorage",e,"quiet modify can only be use once"):(PA.add(i.userInfo.openID),xA(Object.assign(e,{toUser:i.userInfo.openID}))):ut("modifyFriendInteractiveStorage",e,"game is not launch by click share card")},RA=e=>{IA("modifyFriendInteractiveStorage");var t=Object.assign({},e,{success:t=>{ct({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||wA.emit("modified",`${e.key}`)}});t.quiet?DA(t):t.toUser?k.modifyFriendInteractiveStorageTemplates?(e=>{CA({openIdList:[e.toUser]}).then((t=>{var i,r,n,{nickName:a}=t.data[0],o=parseInt(e.key,10),s=e.toUser,l=e.opNum,u=TA[e.operation];for(n of k.modifyFriendInteractiveStorageTemplates)if(n.key===e.key){var c=n.ratio?` x${l*n.ratio} ？`:"？";i=`确认${n.action} ${a} ${n.object}${c}`,r=encodeURIComponent(i);break}if(!i)throw new Error("invalid key");var d={actId:o,receiverOpenId:s,detail:r,opNum:l,operationType:u};SA(Object.assign({actionId:1},d)),IA("modifyFriendInteractiveStorageShowModal");var h=EA({content:i,title:`${n.action}${n.object}`,confirmText:`确认${n.action}`,confirm(){h.destroy(),xA(Object.assign({action:n.action,object:n.object,ratio:n.ratio},e,{success:t=>{if(e.success&&e.success(t),!t.errCode)var i="string"==typeof e.title,r=EA({title:`${n.action}${n.object}`,icon:!0,content:i?`已${n.action}，马上告诉微信好友？`:`已${n.action}`,cancelText:i?"下次吧":"我知道了",confirmText:!!i&&"告诉他",cancel(){r.destroy()},confirm(){r.destroy(),Gv({openId:s,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),SA(Object.assign({actionId:2},d)),IA("modifyFriendInteractiveStorageConfirm")},cancel(){h.destroy(),ut("modifyFriendInteractiveStorage",e,"cancel"),SA(Object.assign({actionId:3},d)),IA("modifyFriendInteractiveStorageCancel")}})})).catch((({errMsg:t,message:i})=>{ut("modifyFriendInteractiveStorage",e,t||i)}))})(t):k.modifyFriendInteractiveStorageConfirmWording?(e=>{CA({openIdList:[e.toUser]}).then((t=>{var{nickName:i}=t.data[0],r=k.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",i),n={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(r),opNum:e.opNum,operationType:TA[e.operation]};SA(Object.assign({actionId:1},n)),IA("modifyFriendInteractiveStorageShowModal"),Ul({content:r,confirmText:"确定",cancelText:"取消",success(t){t.confirm?(xA(e),SA(Object.assign({actionId:2},n)),IA("modifyFriendInteractiveStorageConfirm")):(ut("modifyFriendInteractiveStorage",e,"cancel"),SA(Object.assign({actionId:3},n)),IA("modifyFriendInteractiveStorageCancel"))}})})).catch((({errMsg:t})=>{ut("modifyFriendInteractiveStorage",e,t)}))})(t):ut("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):ut("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},OA=(O.Z.fs,(e={})=>{st("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&it("readCompressedFile",e)}),kA="weapp://wechat-game-runtime",MA="readFile";function NA(e={}){var t,{filePath:i,encoding:r}=e,n=new XMLHttpRequest;n.open("POST",`${kA}/wxfs/${btoa(i)}`,!0),n.setRequestHeader("content-type","application/json"),n.responseType="string"==typeof r?"text":"arraybuffer",n.onload=()=>{t="string"==typeof r?n.responseText:n.response,ct({name:MA,args:e,res:{data:t}})},n.onerror=t=>{ut(MA,e,t.message)},n.send(JSON.stringify({}))}var LA=globalThis,BA={};function FA(e,t){var i=function(e,t,i,r=!1){var n=vr(),a=Date.now(),o=$i(),s=0;return mr.forEach((({match:t,version:i})=>{"string"==typeof t?e===t&&(s=i):t instanceof RegExp&&t.test(e)&&(s=i)})),"connectWifi"===e&&(t=""),(l,u,c=!1)=>{if(wr(e,n,t,null===u?0:1,a,o,0,u,i,r),!c){var d=[e,n,br(t),l?1:0,a,Date.now()-a,o,1,br(u),k.appType+1e3,ar,sr,lr,s,i,hr(),or,Date.now()-ur,Date.now()-cr].map(Er(1024)).join(",");r||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-a})),Reporter.reportKeyValue({key:r?"WeAppInvoke2":"WeAppInvoke",value:d})}}}("instantiate",{file:e,imports:t},!1,!1);return((e,t)=>{if("string"!=typeof e){var r=new Error("WebAssembly.instantiate: first argument must be a string");return i(!1,r,!0),Promise.reject(r)}if(/^(wxfile|https?):/.test(e)){var n=new Error("WebAssembly.instantiate: not support wxfile: or http: path");return i(!1,n,!0),Promise.reject(n)}if(!/\.wasm(\.br)?$/.test(e)){var a=new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br");return i(!1,a,!0),Promise.reject(a)}if(H)return new Promise(((r,n)=>{NA({filePath:e,success(e){BA.instantiate(e.data,t).then((e=>{i(!0,e),r(e)}),(e=>{i(!1,e),n(e)}))},fail({errMsg:e}){var t=new Error(e.replace(/^\w+:fail\s*/,""));i(!1,t),n(t)}})}));if(B||L){var s=BA.instantiate(e,t);return"Promise"===o(s)?(i(!0,s),s):(i(!0,s,!0),Promise.resolve(s))}var l=Mr;return N&&/\.br$/.test(e)&&(l=OA),new Promise(((r,n)=>{l({compressionAlgorithm:"br",filePath:e,success(e){BA.instantiate(e.data,t).then((e=>{i(!0,e),r(e)}),(e=>{i(!1,e),n(e)}))},fail({errMsg:e}){var t=new Error(e.replace(/^\w+:fail\s*/,""));i(!1,t,!0),n(t)}})}))})(e,t)}function UA(e){return function(e){return new Promise(((t,i)=>{"string"!=typeof e?i(new Error("WebAssembly.instantiate: first argument must be a string")):/^(wxfile|https?):/.test(e)?i(new Error("WebAssembly.instantiate: not support wxfile: or http: path")):/\.wasm(\.br)?$/.test(e)||i(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br")),t()}))}(e).then((()=>{if(H)return new Promise(((t,i)=>{NA({filePath:e,success(e){t(BA.compile(e.data))},fail({errMsg:e}){i(new Error(e.replace(/^\w+:fail\s*/,"")))}})}));var t=Mr;return/\.br$/.test(e)&&!G&&(t=OA),new Promise(((i,r)=>{t({compressionAlgorithm:"br",filePath:e,success(e){i(BA.compile(e.data))},fail({errMsg:e}){r(new Error(e.replace(/^\w+:fail\s*/,"")))}})}))}))}void 0!==O.Z.WebAssembly?BA=O.Z.WebAssembly:void 0!==LA.WebAssembly&&(BA=LA.WebAssembly);class WA{constructor(){}}BA.Module&&(WA.customSections=BA.Module.customSections,WA.exports=BA.Module.exports,WA.imports=BA.Module.imports);var GA=()=>{var e={Table:BA.Table,Memory:BA.Memory,Global:BA.Global,Instance:BA.Instance};!function(e,t){Ir("",e,!0,1,t,!1,!0)}(e,!1);var t=K()(K()({},e),{},{instantiate:(e,t)=>BA.Module&&e instanceof BA.Module?BA.instantiate(e,t):FA(e,t)});return BA.compile&&(t.compile=e=>UA(e)),BA.Module&&(t.Module=WA),t},VA=({provider:e}={})=>e?(e=>{var t={Table:BA.Table,Memory:BA.Memory,Global:BA.Global,Instance:BA.Instance,instantiate:(t,i)=>BA.Module&&t instanceof BA.Module?BA.instantiate(t,i):"string"==typeof t?(-1!==t.indexOf(`__plugin__/${e}/`)||(t=t.replace(/^\//,""),t=bi()?`__plugin__/${e}/${t}`:St(`plugin-private://${e}/${t}`)),FA(t,i)):FA(t,i)};return BA.compile&&(t.compile=e=>UA(e)),BA.Module&&(t.Module=WA),t})(e):GA();LA.WXWebAssembly=GA(),delete LA.WebAssembly;var jA={Table:BA.Table,Memory:BA.Memory,Global:BA.Global,Instance:BA.Instance,compile:BA.compile,compileStreaming:BA.compileStreaming,instantiateStreaming:BA.instantiateStreaming,validate:BA.validate,CompileError:BA.CompileError,LinkError:BA.LinkError,Module:BA.Module,RuntimeError:BA.RuntimeError,instantiate:(...e)=>Promise.resolve(BA.instantiate(...e))},HA=Li("getGameLifeProfile","webapi_getgamelifeprofile",(e=>JSON.parse(JSON.stringify(e)))),zA=Li("getGreetingControlInfo","webapi_getgreetingcontrolinfo",(e=>JSON.parse(JSON.stringify(e)))),YA=Li("interactGameLifeTag","webapi_interactgamelifetag",(e=>JSON.parse(JSON.stringify(e)))),$A=({url:e,success:t,fail:i,complete:r})=>{it("private_openUrl",{url:e,isNativeStyle:!0,success:t,fail:i,complete:r})},qA=e=>(t={})=>{(e?Oi:Mi)({apiName:e?"webapi_game_transfer":"gameTransfer",sdkApiName:"gameTransfer",reqData:JSON.parse(JSON.stringify(t)),success(e){"function"==typeof t.success&&t.success(e)},fail(e){"function"==typeof t.fail&&t.fail(e)},complete(e){"function"==typeof t.complete&&t.complete(e)}})},QA=qA(!1),ZA=qA(!0),KA=__safeway__.apiSign.makeApiSign,XA=(e={})=>{var t=KA("navigateBackApplication",e);it("navigateBackApplication",t,{})},JA=(e={})=>{var{launchAppid:t}=e;t&&"string"==typeof t?Oi({apiName:"wxaapi_verify_jump",reqData:{appid:t},success:i=>{"ok"===i.data.res?it("launchApplication",Object.assign(e,{appId:t,operateDirectly:!0})):ut("launchApplication",e,"no permission")},fail:()=>{ut("launchApplication",e,"no permission")}}):(delete e.operateDirectly,it("launchApplication",e,{}))},eb=e=>{if(N){var t=null;return it("encodeArrayBufferSync",Object.assign(e,{success(e){t=e.buffer},fail(){}})),t}return O.Z.encodeArrayBuffer(e.data,e.format)},tb=e=>{if(N){var t="";return it("decodeArrayBufferSync",Object.assign(e,{success(e){t=e.result},fail(){}})),t}return O.Z.decodeArrayBuffer(e.data,e.format)},ib={now:O.Z.performanceNow},rb=()=>ib,nb=function(){var e=Tv();return e._type="image",e},ab=function(){var e=rx({secure:GI()},!1);return e._type="canvas",e},ob=rb(),sb=/iPhone/i,lb=/iPod/i,ub=/iPad/i,cb=/\biOS-universal(?:.+)Mac\b/i,db=/\bAndroid(?:.+)Mobile\b/i,hb=/Android/i,pb=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,fb=/Silk/i,gb=/Windows Phone/i,_b=/\bWindows(?:.+)ARM\b/i,mb=/BlackBerry/i,vb=/BB10/i,yb=/Opera Mini/i,Ab=/\b(CriOS|Chrome)(?:.+)Mobile/i,bb=/Mobile(?:.+)Firefox\b/i,Eb=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};var wb={platform:"ios",language:"zh-cn",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN"},Tb=function(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=t.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var n=function(e){return function(t){return t.test(e)}}(i),a={apple:{phone:n(sb)&&!n(gb),ipod:n(lb),tablet:!n(sb)&&(n(ub)||Eb(t))&&!n(gb),universal:n(cb),device:(n(sb)||n(lb)||n(ub)||n(cb)||Eb(t))&&!n(gb)},amazon:{phone:n(pb),tablet:!n(pb)&&n(fb),device:n(pb)||n(fb)},android:{phone:!n(gb)&&n(pb)||!n(gb)&&n(db),tablet:!n(gb)&&!n(pb)&&!n(db)&&(n(fb)||n(hb)),device:!n(gb)&&(n(pb)||n(fb)||n(db)||n(hb))||n(/\bokhttp\b/i)},windows:{phone:n(gb),tablet:n(_b),device:n(gb)||n(_b)},other:{blackberry:n(mb),blackberry10:n(vb),opera:n(yb),firefox:n(bb),chrome:n(Ab),device:n(mb)||n(vb)||n(yb)||n(bb)||n(Ab)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(wb);var Cb,Sb,Ib,xb,Pb,Db,Rb,Ob,kb,Mb,Nb,Lb,Bb,Fb,Ub,Wb,Gb,Vb={MIPMAP_TEXTURES:1,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:function(e){var t=!0;if(Tb.tablet||Tb.phone){if(Tb.apple.device){var i=wb.userAgent.match(/OS (\d+)_(\d+)?/);if(i)parseInt(i[1],10)<11&&(t=!1)}if(Tb.android.device){var r=wb.userAgent.match(/Android\s([0-9.]*)/);if(r)parseInt(r[1],10)<7&&(t=!1)}}return t?e:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:33071,SCALE_MODE:1,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"highp",CAN_UPLOAD_SAME_BUFFER:!Tb.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};!function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"}(Cb||(Cb={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"}(Sb||(Sb={})),function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"}(Ib||(Ib={})),function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"}(xb||(xb={})),function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Pb||(Pb={})),function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Db||(Db={})),function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Rb||(Rb={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.FLOAT=5126]="FLOAT",e[e.HALF_FLOAT=36193]="HALF_FLOAT"}(Ob||(Ob={})),function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"}(kb||(kb={})),function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Mb||(Mb={})),function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON"}(Nb||(Nb={})),function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"}(Lb||(Lb={})),function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"}(Bb||(Bb={})),function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"}(Fb||(Fb={})),function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"}(Ub||(Ub={})),function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"}(Wb||(Wb={})),function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"}(Gb||(Gb={}));var jb=Object.prototype.hasOwnProperty,Hb="~";function zb(){}function Yb(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function $b(e,t,i,r,n){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new Yb(i,r||e,n),o=Hb?Hb+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function qb(e,t){0==--e._eventsCount?e._events=new zb:delete e._events[t]}function Qb(){this._events=new zb,this._eventsCount=0}function Zb(e,t,i){i=i||2;var r,n,a,o,s,l,u,c=t&&t.length,d=c?t[0]*i:e.length,h=Kb(e,0,d,i,!0),p=[];if(!h||h.next===h.prev)return p;if(c&&(h=function(e,t,i,r){var n,a,o,s=[];for(n=0,a=t.length;n<a;n++)(o=Kb(e,t[n]*r,n<a-1?t[n+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(lE(o));for(s.sort(nE),n=0;n<s.length;n++)i=Xb(i=aE(s[n],i),i.next);return i}(e,t,h,i)),e.length>80*i){r=a=e[0],n=o=e[1];for(var f=i;f<d;f+=i)(s=e[f])<r&&(r=s),(l=e[f+1])<n&&(n=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-n))?1/u:0}return Jb(h,p,i,r,n,u),p}function Kb(e,t,i,r,n){var a,o;if(n===bE(e,t,i,r)>0)for(a=t;a<i;a+=r)o=vE(a,e[a],e[a+1],o);else for(a=i-r;a>=t;a-=r)o=vE(a,e[a],e[a+1],o);return o&&hE(o,o.next)&&(yE(o),o=o.next),o}function Xb(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!hE(r,r.next)&&0!==dE(r.prev,r,r.next))r=r.next;else{if(yE(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Jb(e,t,i,r,n,a,o){if(e){!o&&a&&function(e,t,i,r){var n=e;do{null===n.z&&(n.z=sE(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,a,o,s,l,u=1;do{for(i=e,e=null,a=null,o=0;i;){for(o++,r=i,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,s--):(n=r,r=r.nextZ,l--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=r}a.nextZ=null,u*=2}while(o>1)}(n)}(e,r,n,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?tE(e,r,n,a):eE(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),yE(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?Jb(e=iE(Xb(e),t,i),t,i,r,n,a,2):2===o&&rE(e,t,i,r,n,a):Jb(Xb(e),t,i,r,n,a,1);break}}}function eE(e){var t=e.prev,i=e,r=e.next;if(dE(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(uE(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&dE(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function tE(e,t,i,r){var n=e.prev,a=e,o=e.next;if(dE(n,a,o)>=0)return!1;for(var s=n.x<a.x?n.x<o.x?n.x:o.x:a.x<o.x?a.x:o.x,l=n.y<a.y?n.y<o.y?n.y:o.y:a.y<o.y?a.y:o.y,u=n.x>a.x?n.x>o.x?n.x:o.x:a.x>o.x?a.x:o.x,c=n.y>a.y?n.y>o.y?n.y:o.y:a.y>o.y?a.y:o.y,d=sE(s,l,t,i,r),h=sE(u,c,t,i,r),p=e.prevZ,f=e.nextZ;p&&p.z>=d&&f&&f.z<=h;){if(p!==e.prev&&p!==e.next&&uE(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&dE(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&uE(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&dE(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=d;){if(p!==e.prev&&p!==e.next&&uE(n.x,n.y,a.x,a.y,o.x,o.y,p.x,p.y)&&dE(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&uE(n.x,n.y,a.x,a.y,o.x,o.y,f.x,f.y)&&dE(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function iE(e,t,i){var r=e;do{var n=r.prev,a=r.next.next;!hE(n,a)&&pE(n,r,r.next,a)&&_E(n,a)&&_E(a,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(a.i/i),yE(r),yE(r.next),r=e=a),r=r.next}while(r!==e);return Xb(r)}function rE(e,t,i,r,n,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&cE(o,s)){var l=mE(o,s);return o=Xb(o,o.next),l=Xb(l,l.next),Jb(o,t,i,r,n,a),void Jb(l,t,i,r,n,a)}s=s.next}o=o.next}while(o!==e)}function nE(e,t){return e.x-t.x}function aE(e,t){var i=function(e,t){var i,r=t,n=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o){if(o=s,s===n){if(a===r.y)return r;if(a===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===o)return i;var l,u=i,c=i.x,d=i.y,h=1/0;r=i;do{n>=r.x&&r.x>=c&&n!==r.x&&uE(a<d?n:o,a,c,d,a<d?o:n,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(n-r.x),_E(r,e)&&(l<h||l===h&&(r.x>i.x||r.x===i.x&&oE(i,r)))&&(i=r,h=l)),r=r.next}while(r!==u);return i}(e,t);if(!i)return t;var r=mE(i,e),n=Xb(i,i.next);return Xb(r,r.next),t===i?n:t}function oE(e,t){return dE(e.prev,e,t.prev)<0&&dE(t.next,e,e.next)<0}function sE(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function lE(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function uE(e,t,i,r,n,a,o,s){return(n-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(i-o)*(t-s)>=0&&(i-o)*(a-s)-(n-o)*(r-s)>=0}function cE(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&pE(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(_E(e,t)&&_E(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(dE(e.prev,e,t.prev)||dE(e,t.prev,t))||hE(e,t)&&dE(e.prev,e,e.next)>0&&dE(t.prev,t,t.next)>0)}function dE(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function hE(e,t){return e.x===t.x&&e.y===t.y}function pE(e,t,i,r){var n=gE(dE(e,t,i)),a=gE(dE(e,t,r)),o=gE(dE(i,r,e)),s=gE(dE(i,r,t));return n!==a&&o!==s||(!(0!==n||!fE(e,i,t))||(!(0!==a||!fE(e,r,t))||(!(0!==o||!fE(i,e,r))||!(0!==s||!fE(i,t,r)))))}function fE(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function gE(e){return e>0?1:e<0?-1:0}function _E(e,t){return dE(e.prev,e,e.next)<0?dE(e,t,e.next)>=0&&dE(e,e.prev,t)>=0:dE(e,t,e.prev)<0||dE(e,e.next,t)<0}function mE(e,t){var i=new AE(e.i,e.x,e.y),r=new AE(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,a.next=r,r.prev=a,r}function vE(e,t,i,r){var n=new AE(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function yE(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function AE(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function bE(e,t,i,r){for(var n=0,a=t,o=i-r;a<i;a+=r)n+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return n}function EE(e,t=[]){return t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t}function wE(e){var t=e.toString(16);return`#${t="000000".substr(0,6-t.length)+t}`}function TE(e){return"string"==typeof e&&"#"===e[0]&&(e=e.substr(1)),parseInt(e,16)}Object.create&&(zb.prototype=Object.create(null),(new zb).__proto__||(Hb=!1)),Qb.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)jb.call(e,t)&&i.push(Hb?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},Qb.prototype.listeners=function(e){var t=Hb?Hb+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,n=i.length,a=new Array(n);r<n;r++)a[r]=i[r].fn;return a},Qb.prototype.listenerCount=function(e){var t=Hb?Hb+e:e,i=this._events[t];return i?i.fn?1:i.length:0},Qb.prototype.emit=function(e,t,i,r,n,a){var o=Hb?Hb+e:e;if(!this._events[o])return!1;var s,l,u=this._events[o],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,n),!0;case 6:return u.fn.call(u.context,t,i,r,n,a),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var d,h=u.length;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,i);break;case 4:u[l].fn.call(u[l].context,t,i,r);break;default:if(!s)for(d=1,s=new Array(c-1);d<c;d++)s[d-1]=arguments[d];u[l].fn.apply(u[l].context,s)}}return!0},Qb.prototype.on=function(e,t,i){return $b(this,e,t,i,!1)},Qb.prototype.once=function(e,t,i){return $b(this,e,t,i,!0)},Qb.prototype.removeListener=function(e,t,i,r){var n=Hb?Hb+e:e;if(!this._events[n])return this;if(!t)return qb(this,n),this;var a=this._events[n];if(a.fn)a.fn!==t||r&&!a.once||i&&a.context!==i||qb(this,n);else{for(var o=0,s=[],l=a.length;o<l;o++)(a[o].fn!==t||r&&!a[o].once||i&&a[o].context!==i)&&s.push(a[o]);s.length?this._events[n]=1===s.length?s[0]:s:qb(this,n)}return this},Qb.prototype.removeAllListeners=function(e){var t;return e?(t=Hb?Hb+e:e,this._events[t]&&qb(this,t)):(this._events=new zb,this._eventsCount=0),this},Qb.prototype.off=Qb.prototype.removeListener,Qb.prototype.addListener=Qb.prototype.on,Qb.prefixed=Hb,Qb.EventEmitter=Qb,Zb.deviation=function(e,t,i,r){var n=t&&t.length,a=n?t[0]*i:e.length,o=Math.abs(bE(e,0,a,i));if(n)for(var s=0,l=t.length;s<l;s++){var u=t[s]*i,c=s<l-1?t[s+1]*i:e.length;o-=Math.abs(bE(e,u,c,i))}var d=0;for(s=0;s<r.length;s+=3){var h=r[s]*i,p=r[s+1]*i,f=r[s+2]*i;d+=Math.abs((e[h]-e[f])*(e[p+1]-e[h+1])-(e[h]-e[p])*(e[f+1]-e[h+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},Zb.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var o=0;o<t;o++)i.vertices.push(e[n][a][o]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i},Vb.RETINA_PREFIX=/@([0-9\.]+)x/,Vb.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!0;var CE=function(){for(var e=[],t=[],i=0;i<32;i++)e[i]=i,t[i]=i;e[xb.NORMAL_NPM]=xb.NORMAL,e[xb.ADD_NPM]=xb.ADD,e[xb.SCREEN_NPM]=xb.SCREEN,t[xb.NORMAL]=xb.NORMAL_NPM,t[xb.ADD]=xb.ADD_NPM,t[xb.SCREEN]=xb.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function SE(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var i=e>>16&255,r=e>>8&255,n=255&e;return(255*t<<24)+((i=i*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(n=n*t+.5|0)}function IE(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var xE={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function PE(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function DE(e){return!(e&e-1||!e)}function RE(e){var t=(e>65535?1:0)<<4,i=((e>>>=t)>255?1:0)<<3;return t|=i,t|=i=((e>>>=i)>15?1:0)<<2,(t|=i=((e>>>=i)>3?1:0)<<1)|(e>>>=i)>>1}function OE(e,t,i){var r,n=e.length;if(!(t>=n||0===i)){var a=n-(i=t+i>n?n-t:i);for(r=t;r<a;++r)e[r]=e[r+i];e.length=a}}function kE(e){return 0===e?0:e<0?-1:1}var ME=0;function NE(){return++ME}var LE={},BE=Object.create(null),FE=Object.create(null);var UE=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function WE(e,t){var i=Vb.RETINA_PREFIX.exec(e);return i?parseFloat(i[1]):void 0!==t?t:1}var GE=Tv().constructor;var VE,jE=(new class{construct(){this._type="canvas"}}).constructor,HE={createElement:e=>"canvas"===e?ab():"img"===e?nb():void 0},zE={SCISSOR_TEST:3089,STENCIL_TEST:2960},YE=function(e,t){var i=e.measureText(t);return i?i.width:14*t.length},$E={BaseTextureCache:FE,DATA_URI:UE,EventEmitter:Qb,HTMLCanvasElement:jE,HTMLImageElement:GE,ProgramCache:LE,TextureCache:BE,WebGLRenderingContext:zE,clearTextureCache:function(){var e;for(e in BE)delete BE[e];for(e in FE)delete FE[e]},correctBlendMode:function(e,t){return CE[t?1:0][e]},createIndicesForQuads:function(e,t=null){var i=6*e;if((t=t||new Uint16Array(i)).length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(var r=0,n=0;r<i;r+=6,n+=4)t[r+0]=n+0,t[r+1]=n+1,t[r+2]=n+2,t[r+3]=n+0,t[r+4]=n+2,t[r+5]=n+3;return t},decomposeDataUri:function(e){var t=UE.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}},destroyTextureCache:function(){var e;for(e in BE)BE[e].destroy();for(e in FE)FE[e].destroy()},document:HE,earcut:Zb,getBufferType:IE,getResolutionOfUrl:WE,getTextWidth:YE,hex2rgb:EE,hex2string:wE,interleaveTypedArrays:function(e,t){for(var i=0,r=0,n={},a=0;a<e.length;a++)r+=t[a],i+=e[a].length;for(var o=new ArrayBuffer(4*i),s=null,l=0,u=0;u<e.length;u++){var c=t[u],d=e[u],h=IE(d);n[h]||(n[h]=new xE[h](o)),s=n[h];for(var p=0;p<d.length;p++){s[(p/c|0)*r+l+p%c]=d[p]}l+=c}return new Float32Array(o)},isPow2:DE,log2:RE,nextPow2:PE,premultiplyBlendMode:CE,premultiplyRgba:function(e,t,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t):(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=t,i},premultiplyTint:SE,premultiplyTintToRgba:function(e,t,i,r){return(i=i||new Float32Array(4))[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(255&e)/255,(r||void 0===r)&&(i[0]*=t,i[1]*=t,i[2]*=t),i[3]=t,i},removeItems:OE,rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},sign:kE,string2hex:TE,uid:NE,isMobile:Tb},qE=2*Math.PI,QE=180/Math.PI,ZE=Math.PI/180;!function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"}(VE||(VE={}));class KE{constructor(e=0,t=0,i=0,r=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r),this.type=VE.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new KE(0,0,0,0)}clone(){return new KE(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){var t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(e=1,t=.001){var i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=n-r,this}}class XE{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=VE.CIRC}clone(){return new XE(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-e,n=this.y-t;return(r*=r)+(n*=n)<=i}getBounds(){return new KE(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}class JE{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.width=i,this.height=r,this.type=VE.ELIP}clone(){return new JE(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,r=(t-this.y)/this.height;return(i*=i)+(r*=r)<=1}getBounds(){return new KE(this.x-this.width,this.y-this.height,this.width,this.height)}}class ew{constructor(...e){var t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){for(var i=[],r=0,n=t.length;r<n;r++)i.push(t[r].x,t[r].y);t=i}this.points=t,this.type=VE.POLY,this.closeStroke=!0}clone(){var e=this.points.slice(),t=new ew(e);return t.closeStroke=this.closeStroke,t}contains(e,t){for(var i=!1,r=this.points.length/2,n=0,a=r-1;n<r;a=n++){var o=this.points[2*n],s=this.points[2*n+1],l=this.points[2*a],u=this.points[2*a+1];s>t!=u>t&&e<(t-s)/(u-s)*(l-o)+o&&(i=!i)}return i}}class tw{constructor(e=0,t=0,i=0,r=0,n=20){this.x=e,this.y=t,this.width=i,this.height=r,this.radius=n,this.type=VE.RREC}clone(){return new tw(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),r=t-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=e-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=t-(this.y+this.height-this.radius))*r<=n)return!0;if((i=e-(this.x+this.radius))*i+r*r<=n)return!0}return!1}}class iw{constructor(e=0,t=0){this.x=e,this.y=t}clone(){return new iw(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}}class rw{constructor(e,t,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new rw(e,t,this._x,this._y)}set(e=0,t=e){return e=Math.round(100*e)/100,t=Math.round(100*t)/100,this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){e=Math.round(100*e)/100,this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){e=Math.round(100*e)/100,this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class nw{constructor(e=1,t=0,i=0,r=1,n=0,a=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=a}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,n,a){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=a,this}toArray(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new iw;var i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new iw;var i=1/(this.a*this.d+this.c*-this.b),r=e.x,n=e.y;return t.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){var t=Math.cos(e),i=Math.sin(e),r=this.a,n=this.c,a=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=a*t-this.ty*i,this.ty=a*i+this.ty*t,this}append(e){var t=this.a,i=this.b,r=this.c,n=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this}setTransform(e,t,i,r,n,a,o,s,l){return this.a=Math.cos(o+l)*n,this.b=Math.sin(o+l)*n,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){var t=this.a,i=this.b,r=this.c,n=this.d,a=-Math.atan2(-r,n),o=Math.atan2(i,t),s=Math.abs(a+o);return s<1e-5||Math.abs(qE-s)<1e-5?(e.rotation=o,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=o),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+n*n),e.position.x=this.tx,e.position.y=this.ty,e}invert(){var e=this.a,t=this.b,i=this.c,r=this.d,n=this.tx,a=e*r-t*i;return this.a=r/a,this.b=-t/a,this.c=-i/a,this.d=e/a,this.tx=(i*this.ty-r*n)/a,this.ty=-(e*this.ty-t*n)/a,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){var e=new nw;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new nw}static get TEMP_MATRIX(){return new nw}}var aw=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ow=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],sw=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],lw=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],uw=[],cw=[],dw=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];uw.push(t);for(var i=0;i<16;i++)for(var r=dw(aw[e]*aw[i]+sw[e]*ow[i]),n=dw(ow[e]*aw[i]+lw[e]*ow[i]),a=dw(aw[e]*sw[i]+sw[e]*lw[i]),o=dw(ow[e]*sw[i]+lw[e]*lw[i]),s=0;s<16;s++)if(aw[s]===r&&ow[s]===n&&sw[s]===a&&lw[s]===o){t.push(s);break}}for(var l=0;l<16;l++){var u=new nw;u.set(aw[l],ow[l],sw[l],lw[l],0,0),cw.push(u)}}();var hw,pw={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>aw[e],uY:e=>ow[e],vX:e=>sw[e],vY:e=>lw[e],inv:e=>8&e?15&e:7&-e,add:(e,t)=>uw[e][t],sub:(e,t)=>uw[e][pw.inv(t)],rotate180:e=>4^e,isVertical:e=>2==(3&e),byDirection:(e,t)=>2*Math.abs(e)<=Math.abs(t)?t>=0?pw.S:pw.N:2*Math.abs(t)<=Math.abs(e)?e>0?pw.E:pw.W:t>0?e>0?pw.SE:pw.SW:e>0?pw.NE:pw.NW,matrixAppendRotationInv:(e,t,i=0,r=0)=>{var n=cw[pw.inv(t)];n.tx=i,n.ty=r,e.append(n)}};class fw{constructor(){this.worldTransform=new nw,this.localTransform=new nw,this.position=new rw(this.onChange,this,0,0),this.scale=new rw(this.onChange,this,1,1),this.pivot=new rw(this.onChange,this,0,0),this.skew=new rw(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,r=this.worldTransform;r.a=t.a*i.a+t.b*i.c,r.b=t.a*i.b+t.b*i.d,r.c=t.c*i.a+t.d*i.c,r.d=t.c*i.b+t.d*i.d,r.tx=t.tx*i.a+t.ty*i.c+i.tx,r.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}fw.IDENTITY=new fw,Vb.TARGET_FPMS=.06,function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"}(hw||(hw={}));class gw{constructor(e,t=null,i=0,r=!1){this.fn=e,this.context=t,this.priority=i,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t}}class _w{constructor(){this._head=new gw(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this.autoStart=!1,this.deltaTime=1,this.deltaMS=1/Vb.TARGET_FPMS,this.elapsedMS=1/Vb.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._protected=!1,this._lastFrame=-1,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=ob.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=hw.NORMAL){return this._addListener(new gw(e,t,i))}addOnce(e,t,i=hw.NORMAL){return this._addListener(new gw(e,t,i,!0))}_addListener(e){var t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,t){for(var i=this._head.next;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=ob.now()){var t;if(e>this.lastTime){if((t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var i=e-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=e-i%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Vb.TARGET_FPMS;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){var t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Vb.TARGET_FPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!_w._shared){var e=_w._shared=new _w;e.autoStart=!0,e._protected=!0}return _w._shared}static get system(){if(!_w._system){var e=_w._system=new _w;e.autoStart=!0,e._protected=!0}return _w._system}}class mw{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,hw.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?_w.shared:new _w,e.autoStart&&this.start()}static destroy(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}}}Vb.SORTABLE_CHILDREN=!1;class vw{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?KE.EMPTY:((e=e||new KE(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addQuad(e){var t=this.minX,i=this.minY,r=this.maxX,n=this.maxY,a=e[0],o=e[1];t=a<t?a:t,i=o<i?o:i,r=a>r?a:r,n=o>n?o:n,t=(a=e[2])<t?a:t,i=(o=e[3])<i?o:i,r=a>r?a:r,n=o>n?o:n,t=(a=e[4])<t?a:t,i=(o=e[5])<i?o:i,r=a>r?a:r,n=o>n?o:n,t=(a=e[6])<t?a:t,i=(o=e[7])<i?o:i,r=a>r?a:r,n=o>n?o:n,this.minX=t,this.minY=i,this.maxX=r,this.maxY=n}addFrame(e,t,i,r,n){this.addFrameMatrix(e.worldTransform,t,i,r,n)}addFrameMatrix(e,t,i,r,n){var a=e.a,o=e.b,s=e.c,l=e.d,u=e.tx,c=e.ty,d=this.minX,h=this.minY,p=this.maxX,f=this.maxY,g=a*t+s*i+u,_=o*t+l*i+c;d=g<d?g:d,h=_<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=a*r+s*i+u)<d?g:d,h=(_=o*r+l*i+c)<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=a*t+s*n+u)<d?g:d,h=(_=o*t+l*n+c)<h?_:h,p=g>p?g:p,f=_>f?_:f,d=(g=a*r+s*n+u)<d?g:d,h=(_=o*r+l*n+c)<h?_:h,p=g>p?g:p,f=_>f?_:f,this.minX=d,this.minY=h,this.maxX=p,this.maxY=f}addVertexData(e,t,i){for(var r=this.minX,n=this.minY,a=this.maxX,o=this.maxY,s=t;s<i;s+=2){var l=e[s],u=e[s+1];r=l<r?l:r,n=u<n?u:n,a=l>a?l:a,o=u>o?u:o}this.minX=r,this.minY=n,this.maxX=a,this.maxY=o}addVertices(e,t,i,r){this.addVerticesMatrix(e.worldTransform,t,i,r)}addVerticesMatrix(e,t,i,r,n=0,a=n){for(var o=e.a,s=e.b,l=e.c,u=e.d,c=e.tx,d=e.ty,h=this.minX,p=this.minY,f=this.maxX,g=this.maxY,_=i;_<r;_+=2){var m=t[_],v=t[_+1],y=o*m+l*v+c,A=u*v+s*m+d;h=Math.min(h,y-n),f=Math.max(f,y+n),p=Math.min(p,A-a),g=Math.max(g,A+a)}this.minX=h,this.minY=p,this.maxX=f,this.maxY=g}addBounds(e){var t=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>n?e.maxY:n}addBoundsMask(e,t){var i=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=n&&r<=a){var o=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=r<s?r:s,this.maxX=n>l?n:l,this.maxY=a>u?a:u}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){var i=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=n&&r<=a){var o=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=i<o?i:o,this.minY=r<s?r:s,this.maxX=n>l?n:l,this.maxY=a>u?a:u}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,r,n,a){e-=n,t-=a,i+=n,r+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}class yw extends Qb{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new fw,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vw,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){for(var t=Object.keys(e),i=0;i<t.length;++i){var r=t[i];Object.defineProperty(yw.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new KE),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new KE),e=this._localBoundsRect),this._localBounds||(this._localBounds=new vw);var t=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,n=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-n,a}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,r){return t&&(e=t.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}setTransform(e=0,t=0,i=1,r=1,n=0,a=0,o=0,s=0,l=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=l,this}destroy(e){this.parent&&this.parent.removeChild(this),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Aw),this.tempDisplayObjectParent}enableTempParent(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){e=Math.round(100*e)/100,this.transform.position.x=e}get y(){return this.position.y}set y(e){e=Math.round(100*e)/100,this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*QE}set angle(e){this.transform.rotation=e*ZE}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask){var t=this._mask.maskObject||this._mask;t.renderable=!0,t.isMask=!1}if(this._mask=e,this._mask){var i=this._mask.maskObject||this._mask;i.renderable=!1,i.isMask=!0}}}class Aw extends yw{constructor(){super(...arguments),this.sortDirty=null}}function bw(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}yw.prototype.displayObjectUpdateTransform=yw.prototype.updateTransform;class Ew extends yw{constructor(){super(),this.children=[],this.sortableChildren=Vb.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(var t=0;t<e.length;t++)this.addChild(e[t]);else{var i=e[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e!==t){var i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e,this.onChildrenChange(i<r?i:r)}}getChildIndex(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);var i=this.getChildIndex(e);OE(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(var t=0;t<e.length;t++)this.removeChild(e[t]);else{var i=e[0],r=this.children.indexOf(i);if(-1===r)return null;i.parent=null,i.transform._parentID=-1,OE(this.children,r,1),this._boundsID++,this.onChildrenChange(r),i.emit("removed",this),this.emit("childRemoved",i,this,r)}return e[0]}removeChildAt(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,OE(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){var i,r=e,n=t-r;if(n>0&&n<=t){i=this.children.splice(r,n);for(var a=0;a<i.length;++a)i[a].parent=null,i[a].transform&&(i[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var o=0;o<i.length;++o)i[o].emit("removed",this),this.emit("childRemoved",i[o],this,o);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){for(var e=!1,t=0,i=this.children.length;t<i;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(bw),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var i=t._mask.maskObject||t._mask;i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){var i=super.getLocalBounds(e);if(!t)for(var r=0,n=this.children.length;r<n;++r){var a=this.children[r];a.visible&&a.updateTransform()}return i}_calculateBounds(){}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(e);else{this._render(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].render(e)}}renderAdvanced(e){e.batch.flush();var t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filter.push(this,this._enabledFilters)}i&&e.mask.push(this,this._mask),this._render(e);for(var n=0,a=this.children.length;n<a;n++)this.children[n].render(e);e.batch.flush(),i&&e.mask.pop(this),t&&this._enabledFilters&&this._enabledFilters.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;var t="boolean"==typeof e?e:e&&e.children,i=this.removeChildren(0,this.children.length);if(t)for(var r=0;r<i.length;++r)i[r].destroy(e)}get width(){return Math.round(this.scale.x*this.getLocalBounds().width*100)/100}set width(e){e=Math.round(100*e)/100;var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return Math.round(this.scale.y*this.getLocalBounds().height*100)/100}set height(e){e=Math.round(100*e)/100;var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}Ew.prototype.containerUpdateTransform=Ew.prototype.updateTransform;class ww{constructor(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new iw,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}get pointerId(){return this.identifier}getLocalPosition(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)}copyEvent(e){"isPrimary"in e&&e.isPrimary&&(this.isPrimary=!0),this.button="button"in e&&e.button;var t="buttons"in e&&e.buttons;this.buttons=Number.isInteger(t)?t:"which"in e&&e.which,this.width="width"in e&&e.width,this.height="height"in e&&e.height,this.tiltX="tiltX"in e&&e.tiltX,this.tiltY="tiltY"in e&&e.tiltY,this.pointerType="pointerType"in e&&e.pointerType,this.pressure="pressure"in e&&e.pressure,this.rotationAngle="rotationAngle"in e&&e.rotationAngle,this.twist="twist"in e&&e.twist||0,this.tangentialPressure="tangentialPressure"in e&&e.tangentialPressure||0}reset(){this.isPrimary=!1}}class Tw{constructor(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}stopPropagation(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget}reset(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null}}class Cw{constructor(e){this._pointerId=e,this._flags=Cw.FLAGS.NONE}_doSet(e,t){this._flags=t?this._flags|e:this._flags&~e}get pointerId(){return this._pointerId}get flags(){return this._flags}set flags(e){this._flags=e}get none(){return this._flags===Cw.FLAGS.NONE}get over(){return 0!=(this._flags&Cw.FLAGS.OVER)}set over(e){this._doSet(Cw.FLAGS.OVER,e)}get rightDown(){return 0!=(this._flags&Cw.FLAGS.RIGHT_DOWN)}set rightDown(e){this._doSet(Cw.FLAGS.RIGHT_DOWN,e)}get leftDown(){return 0!=(this._flags&Cw.FLAGS.LEFT_DOWN)}set leftDown(e){this._doSet(Cw.FLAGS.LEFT_DOWN,e)}}Cw.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});class Sw{constructor(){this._tempPoint=new iw}recursiveFindHit(e,t,i,r,n){if(!t||!t.visible)return!1;var a=e.data.global,o=!1,s=n=t.interactive||n,l=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(a,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,l=!1)),s=!1):t._mask&&r&&(t._mask.containsPoint&&t._mask.containsPoint(a)||(r=!1)),l&&t.interactiveChildren&&t.children)for(var u=t.children,c=u.length-1;c>=0;c--){var d=u[c],h=this.recursiveFindHit(e,d,i,r,s);if(h){if(!d.parent)continue;s=!1,h&&(e.target&&(r=!1),o=!0)}}return n&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(a)&&(o=!0),t.interactive&&(o&&!e.target&&(e.target=t),i&&i(e,t,!!o))),o}findHit(e,t,i,r){this.recursiveFindHit(e,t,i,r,!1)}}var Iw={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};yw.mixin(Iw);var xw={target:null,data:{global:null}};class Pw extends Qb{constructor(e,t){super(),t=t||{},this.renderer=e,this.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new ww,this.mouse.identifier=1,this.mouse.global.set(-999999),this.activeInteractionData={},this.activeInteractionData[1]=this.mouse,this.interactionDataPool=[],this.eventData=new Tw,this.interactionDOMElement=null,this.moveWhenInside=!1,this.eventsAdded=!1,this.tickerAdded=!1,this.mouseOverRenderer=!1,this.supportsTouchEvents=!0,this.supportsPointerEvents=!1,this.onPointerUp=this.onPointerUp.bind(this),this.processPointerUp=this.processPointerUp.bind(this),this.onPointerCancel=this.onPointerCancel.bind(this),this.processPointerCancel=this.processPointerCancel.bind(this),this.onPointerDown=this.onPointerDown.bind(this),this.processPointerDown=this.processPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.processPointerMove=this.processPointerMove.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this.processPointerOverOut=this.processPointerOverOut.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.cursorStyles={default:"inherit",pointer:"pointer"},this.currentCursorMode=null,this.cursor=null,this.resolution=1,this.delayedEvents=[],this.search=new Sw,this._tempDisplayObject=new Aw,this._useSystemTicker=void 0===t.useSystemTicker||t.useSystemTicker,this.setTargetElement(this.renderer.view,this.renderer.resolution)}get useSystemTicker(){return this._useSystemTicker}set useSystemTicker(e){this._useSystemTicker=e,e?this.addTickerListener():this.removeTickerListener()}get lastObjectRendered(){return this.renderer._lastObjectRendered||this._tempDisplayObject}hitTest(e,t){return xw.target=null,xw.data.global=e,t||(t=this.lastObjectRendered),this.processInteractive(xw,t,null,!0),xw.target}setTargetElement(e,t=1){this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents(),this.addTickerListener()}addTickerListener(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(_w.system.add(this.tickerUpdate,this,hw.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(_w.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}addEvents(){!this.eventsAdded&&this.interactionDOMElement&&(this.eventsAdded=!0)}removeEvents(){this.eventsAdded&&this.interactionDOMElement&&(this.interactionDOMElement=null,this.eventsAdded=!1)}tickerUpdate(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())}update(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}}setCursorMode(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(typeof t){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}}dispatchEvent(e,t,i){i.stopPropagationHint&&e!==i.stopsPropagatingAt||(i.currentTarget=e,i.type=t,e.emit(t,i),e[t]&&e[t](i))}delayDispatchEvent(e,t,i){this.delayedEvents.push({displayObject:e,eventString:t,eventData:i})}mapPositionToPoint(e,t,i){var r=this.interactionDOMElement.getBoundingClientRect(),n=1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*n,e.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n}processInteractive(e,t,i,r){var n=this.search.findHit(e,t,i,r),a=this.delayedEvents;if(!a.length)return n;e.stopPropagationHint=!1;var o=a.length;this.delayedEvents=[];for(var s=0;s<o;s++){var{displayObject:l,eventString:u,eventData:c}=a[s];c.stopsPropagatingAt===l&&(c.stopPropagationHint=!0),this.dispatchEvent(l,u,c)}return n}onPointerDown(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var i=t.length,r=0;r<i;r++){var n=t[r],a=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,a);if(o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType)this.emit("touchstart",o);else if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}}processPointerDown(e,t,i){var r=e.data,n=e.data.identifier;if(this.touchStartInteractionX=e.data.global.x,this.touchStartInteractionY=e.data.global.y,this.touchStartInteractionTime=Date.now(),i)if(t.trackedPointers[n]||(t.trackedPointers[n]=new Cw(n)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var a=2===r.button;a?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,a?"rightdown":"mousedown",e)}}onPointerComplete(e,t,i){for(var r=this.normalizeToPointerData(e),n=r.length,a=e.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var s=r[o],l=this.getInteractionDataForPointerId(s),u=this.configureInteractionEventForDOMEvent(this.eventData,s,l);if(u.data.originalEvent=e,this.processInteractive(u,this.lastObjectRendered,i,t||!a),this.emit(t?"pointercancel":`pointerup${a}`,u),"mouse"===s.pointerType||"pen"===s.pointerType){var c=2===s.button;this.emit(c?`rightup${a}`:`mouseup${a}`,u)}else"touch"===s.pointerType&&(this.emit(t?"touchcancel":`touchend${a}`,u),this.releaseInteractionDataForPointerId(s.pointerId))}}onPointerCancel(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)}processPointerCancel(e,t){var i=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===i.pointerType&&this.dispatchEvent(t,"touchcancel",e))}onPointerUp(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)}processPointerUp(e,t,i){var r=e.data,n=e.data.identifier,a=t.trackedPointers[n],o="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,l=!1;if(s){var u=2===r.button,c=Cw.FLAGS,d=u?c.RIGHT_DOWN:c.LEFT_DOWN,h=void 0!==a&&a.flags&d;i?(this.dispatchEvent(t,u?"rightup":"mouseup",e),h&&(this.dispatchEvent(t,u?"rightclick":"click",e),l=!0)):h&&this.dispatchEvent(t,u?"rightupoutside":"mouseupoutside",e),a&&(u?a.rightDown=!1:a.leftDown=!1)}i?(this.dispatchEvent(t,"pointerup",e),o&&this.dispatchEvent(t,"touchend",e),a&&Math.abs(this.touchStartInteractionX-e.data.global.x)<20&&Math.abs(this.touchStartInteractionY-e.data.global.y)<20&&Date.now()-this.touchStartInteractionTime<300&&(s&&!l||this.dispatchEvent(t,"pointertap",e),o&&(this.dispatchEvent(t,"tap",e),a.over=!1))):a&&(this.dispatchEvent(t,"pointerupoutside",e),o&&this.dispatchEvent(t,"touchendoutside",e)),a&&a.none&&delete t.trackedPointers[n]}onPointerMove(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=t.length,r=0;r<i;r++){var n=t[r],a=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,a);o.data.originalEvent=e,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}}processPointerMove(e,t,i){var r=e.data,n="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType;a&&this.processPointerOverOut(e,t,i),this.moveWhenInside&&!i||(this.dispatchEvent(t,"pointermove",e),n&&this.dispatchEvent(t,"touchmove",e),a&&this.dispatchEvent(t,"mousemove",e))}onPointerOut(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,i);r.data.originalEvent=t,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}}processPointerOverOut(e,t,i){var r=e.data,n=e.data.identifier,a="mouse"===r.pointerType||"pen"===r.pointerType,o=t.trackedPointers[n];i&&!o&&(o=t.trackedPointers[n]=new Cw(n)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(t,"pointerover",e),a&&this.delayDispatchEvent(t,"mouseover",e)),a&&null===this.cursor&&(this.cursor=t.cursor)):o.over&&(o.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),a&&this.dispatchEvent(t,"mouseout",e),o.none&&delete t.trackedPointers[n]))}onPointerOver(e){var t=this.normalizeToPointerData(e)[0],i=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,i);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)}getInteractionDataForPointerId(e){var t,i=e.pointerId;return 1===i||"mouse"===e.pointerType?t=this.mouse:this.activeInteractionData[i]?t=this.activeInteractionData[i]:((t=this.interactionDataPool.pop()||new ww).identifier=i,this.activeInteractionData[i]=t),t.copyEvent(e),t}releaseInteractionDataForPointerId(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))}configureInteractionEventForDOMEvent(e,t,i){return e.data=i,this.mapPositionToPoint(i.global,t.clientX,t.clientY),"touch"===t.pointerType&&(t.globalX=i.global.x,t.globalY=i.global.y),i.originalEvent=t,e.reset(),e}normalizeToPointerData(e){var t=[];if(this.supportsTouchEvents)for(var i=0,r=e.changedTouches.length;i<r;i++){var n=e.changedTouches[i];void 0===n.button&&(n.button=e.touches.length?1:0),void 0===n.buttons&&(n.buttons=e.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n)}else t.push(e);return t}destroy(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null}}class Dw{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,r,n,a,o,s){if(arguments.length>8)throw new Error("max arguments reached");var{name:l,items:u}=this;this._aliasCount++;for(var c=0,d=u.length;c<d;c++)u[c][l](e,t,i,r,n,a,o,s);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return-1!==this.items.indexOf(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(Dw.prototype,{dispatch:{value:Dw.prototype.emit},run:{value:Dw.prototype.emit}}),Vb.PREFER_ENV=Cb.WEBGL,Vb.STRICT_TEXTURE_CACHE=!1;var Rw=[];function Ow(e,t){if(!e)return null;var i="";if("string"==typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(i=r[1].toLowerCase())}for(var n=Rw.length-1;n>=0;--n){var a=Rw[n];if(a.test&&a.test(e,i))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class kw{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Dw("setRealSize"),this.onUpdate=new Dw("update"),this.onError=new Dw("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class Mw extends kw{constructor(e){var t=e;super(t.naturalWidth||t.videoWidth||t.width,t.naturalHeight||t.videoHeight||t.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){void 0===i&&0!==t.indexOf("data:")?e.crossOrigin="anonymous":!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous")}upload(e,t,i,r){var n=e.gl,a=t.realWidth,o=t.realHeight;return r=r||this.source,n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Lb.UNPACK),this.noSubImage||t.target!==n.TEXTURE_2D||i.width!==a||i.height!==o?(i.width=a,i.height=o,n.texImage2D(t.target,0,t.format,t.format,t.type,r)):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t.format,t.type,r),!0}update(){if(!this.destroyed){var e=this.source,t=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(t,i),super.update()}}dispose(){this.source=null}}class Nw extends Mw{static test(e){return"canvas"===e._type||e instanceof jE||"HTMLCanvasElement"===e.constructor.name||"t"===e.constructor.name||"n"===e.constructor.name}}class Lw extends Mw{constructor(e,t){if(t=t||{},!(e instanceof GE)){var i=new nb;Mw.crossOrigin(i,e,t.crossorigin),i.bindingScreen=t.bindingScreen,i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this.preserveBitmap=!1,this.createBitmap=void 0!==t.createBitmap?t.createBitmap:Vb.CREATE_IMAGE_BITMAP,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,void 0!==t.premultiplyAlpha&&(this.premultiplyAlpha=t.premultiplyAlpha),this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(){return this._load||(this.createBitmap=!1,this._load=new Promise(((e,t)=>{var i=this.source;this.url=i.src;var r=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,e(this))};i.complete&&i.src?r():(i.onload=r,i.onerror=e=>{t(e),this.onError.emit(e)})}))),this._load}upload(e,t,i){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&!this.bitmap)return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){var r=!0,n=t._glTextures;for(var a in n){var o=n[a];if(o!==i&&o.dirtyId!==t.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._load=null}static test(e){return"string"==typeof e||e instanceof GE}}class Bw extends kw{constructor(e,t){var{width:i,height:r}=t||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e}upload(e,t,i){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Lb.UNPACK),i.width===t.width&&i.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(i.width=t.width,i.height=t.height,r.texImage2D(t.target,0,i.internalFormat,t.width,t.height,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}var Fw={scaleMode:kb.NEAREST,format:Db.RGBA,alphaMode:Lb.NPM};class Uw extends Qb{constructor(e=null,t=null){super(),t=t||{};var{alphaMode:i,mipmap:r,anisotropicLevel:n,scaleMode:a,width:o,height:s,wrapMode:l,format:u,type:c,target:d,resolution:h,resourceOptions:p,bindingScreen:f}=t;!e||e instanceof kw||(p?(p.bindingScreen=f,e=Ow(e,p)):e=Ow(e,{bindingScreen:f}),e.internal=!0),this.width=o||0,this.height=s||0,this.resolution=h||Vb.RESOLUTION,this.mipmap=void 0!==r?r:Vb.MIPMAP_TEXTURES,this.anisotropicLevel=void 0!==n?n:Vb.ANISOTROPIC_LEVEL,this.wrapMode=l||Vb.WRAP_MODE,this.scaleMode=void 0!==a?a:Vb.SCALE_MODE,this.format=u||Db.RGBA,this.type=c||Ob.UNSIGNED_BYTE,this.target=d||Rb.TEXTURE_2D,this.alphaMode=void 0!==i?i:Lb.UNPACK,void 0!==t.premultiplyAlpha&&(this.premultiplyAlpha=t.premultiplyAlpha),this.uid=NE(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&s>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.ceil(this.width*this.resolution-1e-4)}get realHeight(){return Math.ceil(this.height*this.resolution-1e-4)}setStyle(e,t){var i;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return this.resolution=i||this.resolution,this.width=e,this.height=t,this._refreshPOT(),this.update(),this}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=e/this.resolution,this.height=t/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=DE(this.realWidth)&&DE(this.realHeight)}setResolution(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=this.width*t/e,this.height=this.height*t/e,this.emit("update",this)),this._refreshPOT()),this}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete FE[this.cacheId],delete BE[this.cacheId],this.cacheId=null),this.dispose(),Uw.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=Vb.STRICT_TEXTURE_CACHE){var r="string"==typeof e,n=null;r?n=e:(e._pixiId||(e._pixiId=`pixiid_${NE()}`),n=e._pixiId);var a=FE[n];if(r&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return a||((a=new Uw(e,t)).cacheId=n,Uw.addToCache(a,n)),a}static fromBuffer(e,t,i,r){e=e||new Float32Array(t*i*4);var n=new Bw(e,{width:t,height:i}),a=e instanceof Float32Array?Ob.FLOAT:Ob.UNSIGNED_BYTE;return new Uw(n,Object.assign(Fw,r||{width:t,height:i,type:a}))}static addToCache(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),FE[t]&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),FE[t]=e)}static removeFromCache(e){if("string"==typeof e){var t=FE[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete FE[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete FE[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}}Uw._globalBatch=0;Rw.push(Lw,Nw);var Ww={Resource:kw,BaseImageResource:Mw,INSTALLED:Rw,autoDetectResource:Ow,AbstractMultiResource:class extends kw{constructor(e,t){var{width:i,height:r}=t||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(var n=0;n<e;n++){var a=new Uw;this.items.push(a),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(var i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof kw?this.addResourceAt(e[i],i):this.addResourceAt(Ow(e[i],t),i))}dispose(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;var e=this.items.map((e=>e.resource)).filter((e=>e)).map((e=>e.load()));return this._load=Promise.all(e).then((()=>{var{realWidth:e,realHeight:t}=this.items[0];return this.resize(e,t),Promise.resolve(this)})),this._load}},CanvasResource:Nw,ImageResource:Lw};class Gw{constructor(e){this.renderer=e}destroy(){this.renderer=null}}class Vw extends Bw{upload(e,t,i){var r=e.gl;return r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Lb.UNPACK),i.width===t.width&&i.height===t.height?r.texSubImage2D(t.target,0,0,0,t.width,t.height,t.format,t.type,this.data):(i.width=t.width,i.height=t.height,r.texImage2D(t.target,0,1===e.context.webGLVersion?r.DEPTH_COMPONENT:r.DEPTH_COMPONENT16,t.width,t.height,0,t.format,t.type,this.data)),!0}}class jw{constructor(e,t){this.width=Math.ceil(e||100),this.height=Math.ceil(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Dw("disposeFramebuffer"),this.multisample=Gb.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Uw(null,{scaleMode:kb.NEAREST,resolution:1,mipmap:Nb.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Uw(new Vw(null,{width:this.width,height:this.height}),{scaleMode:kb.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Nb.OFF,format:Db.DEPTH_COMPONENT,type:Ob.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.ceil(e),t=Math.ceil(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(e/n,t/n)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,t/a)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class Hw extends Uw{constructor(e){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});super(null,e);var{width:t,height:i}=e||{};this.mipmap=0,this.width=Math.ceil(t)||100,this.height=Math.ceil(i)||100,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new jw(this.width*this.resolution,this.height*this.resolution).addColorTexture(0,this),this.maskStack=[],this.filterStack=[{}]}resize(e,t){e=Math.ceil(e),t=Math.ceil(t),this.framebuffer.resize(e*this.resolution,t*this.resolution)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class zw{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){var r=t.width,n=t.height;if(i){var a=e.width/2/r,o=e.height/2/n,s=e.x/r+a,l=e.y/n+o;i=pw.add(i,pw.NW),this.x0=s+a*pw.uX(i),this.y0=l+o*pw.uY(i),i=pw.add(i,2),this.x1=s+a*pw.uX(i),this.y1=l+o*pw.uY(i),i=pw.add(i,2),this.x2=s+a*pw.uX(i),this.y2=l+o*pw.uY(i),i=pw.add(i,2),this.x3=s+a*pw.uX(i),this.y3=l+o*pw.uY(i)}else this.x0=e.x/r,this.y0=e.y/n,this.x1=(e.x+e.width)/r,this.y1=e.y/n,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/n,this.x3=e.x/r,this.y3=(e.y+e.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}var Yw=new zw;class $w extends Qb{constructor(e,t,i,r,n,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new KE(0,0,1,1)),e instanceof $w&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=r,this.valid=!1,this._uvs=Yw,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(n||0),!0===n)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=a?new iw(a.x,a.y):new iw(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){var t=this.baseTexture;t&&t.url&&BE[t.url]&&$w.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,$w.removeFromCache(this),this.textureCacheIds=null}clone(){return new $w(this.baseTexture,this.frame.clone(),this.orig.clone(),this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor)}updateUvs(){this._uvs===Yw&&(this._uvs=new zw),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=Vb.STRICT_TEXTURE_CACHE){var r="string"==typeof e,n=null;r?n=e:(e._pixiId||(e._pixiId=`pixiid_${NE()}`),n=e._pixiId);var a=BE[n];if(r&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in TextureCache.`);return a||(t.resolution||(t.resolution=WE(e)),(a=new $w(new Uw(e,t))).baseTexture.cacheId=n,Uw.addToCache(a.baseTexture,n),$w.addToCache(a,n)),a}static fromURL(e,t){var i=Object.assign({autoLoad:!1},null==t?void 0:t.resourceOptions),r=$w.from(e,Object.assign({resourceOptions:i},t),!1),n=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):n.load().then((()=>Promise.resolve(r)))}static fromBuffer(e,t,i,r){return new $w(Uw.fromBuffer(e,t,i,r))}static fromLoader(e,t,i){var r=new Lw(e);r.url=t;var n=new Uw(r,{scaleMode:Vb.SCALE_MODE,resolution:WE(t)}),a=new $w(n);return i||(i=t),Uw.addToCache(a.baseTexture,i),$w.addToCache(a,i),i!==t&&(Uw.addToCache(a.baseTexture,t),$w.addToCache(a,t)),a}static addToCache(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),BE[t]&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),BE[t]=e)}static removeFromCache(e){if("string"==typeof e){var t=BE[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete BE[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)BE[e.textureCacheIds[r]]===e&&delete BE[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;var{x:t,y:i,width:r,height:n}=e,a=t+r>this.baseTexture.width,o=i+n>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",l=`X: ${t} + ${r} = ${t+r} > ${this.baseTexture.width}`,u=`Y: ${i} + ${n} = ${i+n} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${l} ${s} ${u}`)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return this._EMPTY||$w._EMPTY||($w._EMPTY=new $w(new Uw),qw($w._EMPTY),qw($w._EMPTY.baseTexture)),this._EMPTY}static get WHITE(){return this._WHITE[0]||Qw(0),this._WHITE[0]}static getWHITE(e=0){return this._WHITE[e]||Qw(e),this._WHITE[e]}}function qw(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}function Qw(e){$w._WHITE[e]||($w._WHITE[e]=function(e){var t=HE.createElement("canvas");t.bindingScreen=e,t.width=16,t.height=16;var i=t.getContext("2d");return i.fillStyle="white",i.fillRect(0,0,16,16),new $w(new Uw(new Nw(t)))}(e),qw($w._WHITE[e]),qw($w._WHITE[e].baseTexture))}$w._WHITE=Object.create(null);class Zw extends $w{constructor(e,t){var i=null;if(!(e instanceof Hw)){var r=arguments[1],n=arguments[2],a=arguments[3],o=arguments[4];console.warn(`Please use RenderTexture.create(${r}, ${n}) instead of the ctor directly.`),i=arguments[0],t=null,e=new Hw({width:r,height:n,scaleMode:a,resolution:o})}super(e,t),this.legacyRenderer=i,this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}resize(e,t,i=!0){e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,i&&this.baseTexture.resize(e,t),this.updateUvs()}setResolution(e){var{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return"number"==typeof e&&(e={width:e,height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),new Zw(new Hw(e))}}class Kw{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,t){var i=new Hw(Object.assign({width:e,height:t,resolution:1},this.textureOptions));return new Zw(i)}getOptimalTexture(e,t,i=1){var r=Kw.SCREEN_KEY;e*=i,t*=i,this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight||(r=(65535&(e=PE(e)))<<16|65535&(t=PE(t))),this.texturePool[r]||(this.texturePool[r]=[]);var n=this.texturePool[r].pop();return n||(n=this.createTexture(e,t)),n.filterPoolKey=r,n.setResolution(i),n}getFilterTexture(e,t){var i=this.getOptimalTexture(e.width,e.height,t||e.resolution);return i.filterFrame=e.filterFrame,i}returnTexture(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=!1!==e)for(var t in this.texturePool){var i=this.texturePool[t];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}}setScreenSize(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){var t=Kw.SCREEN_KEY,i=this.texturePool[t];if(this.enableFullScreen=e.width>0&&e.height>0,i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[t]=[],this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}Kw.SCREEN_KEY="screen";class Xw{constructor(e,t=0,i=!1,r=5126,n,a,o){this.buffer=e,this.size=t,this.normalized=i,this.type=r,this.stride=n,this.start=a,this.instance=o}destroy(){this.buffer=null}static from(e,t,i,r,n){return new Xw(e,t,i,r,n)}}var Jw=0;class eT{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=Jw++,this.disposeRunner=new Dw("disposeBuffer")}update(e){this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new eT(e)}}function tT(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var iT={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var rT={5126:4,5123:2,5121:1},nT=0,aT={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array};class oT{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=nT++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Dw("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,r=!1,n,a,o,s=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof eT||(t instanceof Array&&(t=new Float32Array(t)),t=new eT(t));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,i,r,n);return this}var c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Xw(c,i,r,n,a,o,s),this.instanced=this.instanced||s,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof eT||(e instanceof Array&&(e=new Uint16Array(e)),e=new eT(e)),e.index=!0,this.indexBuffer=e,-1===this.buffers.indexOf(e)&&this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],i=[],r=new eT;for(e in this.attributes){var n=this.attributes[e],a=this.buffers[n.buffer];t.push(a.data),i.push(n.size*rT[n.type]/4),n.buffer=0}for(r.data=function(e,t){for(var i=0,r=0,n={},a=0;a<e.length;a++)r+=t[a],i+=e[a].length;for(var o=new ArrayBuffer(4*i),s=null,l=0,u=0;u<e.length;u++){var c=t[u],d=e[u],h=tT(d);n[h]||(n[h]=new iT[h](o)),s=n[h];for(var p=0;p<d.length;p++)s[(p/c|0)*r+l+p%c]=d[p];l+=c}return new Float32Array(o)}(t,i),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){for(var e=new oT,t=0;t<this.buffers.length;t++)e.buffers[t]=new eT(this.buffers[t].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new Xw(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.index=!0),e}static merge(e){for(var t,i=new oT,r=[],n=[],a=[],o=0;o<e.length;o++){t=e[o];for(var s=0;s<t.buffers.length;s++)n[s]=n[s]||0,n[s]+=t.buffers[s].data.length,a[s]=0}for(var l=0;l<t.buffers.length;l++)r[l]=new(aT[tT(t.buffers[l].data)])(n[l]),i.buffers[l]=new eT(r[l]);for(var u=0;u<e.length;u++){t=e[u];for(var c=0;c<t.buffers.length;c++)r[c].set(t.buffers[c].data,a[c]),a[c]+=t.buffers[c].data.length}if(i.attributes=t.attributes,t.indexBuffer){i.indexBuffer=i.buffers[t.buffers.indexOf(t.indexBuffer)],i.indexBuffer.index=!0;for(var d=0,h=0,p=0,f=0,g=0;g<t.buffers.length;g++)if(t.buffers[g]!==t.indexBuffer){f=g;break}for(var _ in t.attributes){var m=t.attributes[_];(0|m.buffer)===f&&(h+=m.size*rT[m.type]/4)}for(var v=0;v<e.length;v++){for(var y=e[v].indexBuffer.data,A=0;A<y.length;A++)i.indexBuffer.data[A+p]+=d;d+=t.buffers[f].data.length/h,p+=y.length}}return i}}class sT extends oT{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class lT extends oT{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new eT(this.vertices),this.uvBuffer=new eT(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}var uT=0;class cT{constructor(e,t){this.uniforms=e,this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=uT++,this.static=!!t}update(){this.dirtyId++}add(e,t,i){this.uniforms[e]=new cT(t,i)}static from(e,t){return new cT(e,t)}}class dT{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.sourceFrame=new KE,this.destinationFrame=new KE,this.filters=[]}clear(){this.target=null,this.filters=null,this.renderTexture=null}}class hT extends Gw{constructor(e){super(e),this.defaultFilterStack=[{}],this.texturePool=new Kw,this.texturePool.setScreenSize(e.view),this.statePool=[],this.quad=new sT,this.quadUv=new lT,this.tempRect=new KE,this.activeState={},this.globalUniforms=new cT({outputFrame:this.tempRect,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}push(e,t){for(var i=this.renderer,r=this.defaultFilterStack,n=this.statePool.pop()||new dT,a=t[0].resolution,o=t[0].padding,s=t[0].autoFit,l=t[0].legacy,u=1;u<t.length;u++){var c=t[u];a=Math.min(a,c.resolution),o=this.useMaxPadding?Math.max(o,c.padding):o+c.padding,s=s&&c.autoFit,l=l||c.legacy}1===r.length&&(this.defaultFilterStack[0].renderTexture=i.renderTexture.current),r.push(n),n.resolution=a,n.legacy=l,n.target=e,n.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),n.sourceFrame.pad(o),s&&n.sourceFrame.fit(this.renderer.renderTexture.sourceFrame),n.sourceFrame.ceil(a),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a),n.filters=t,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var d=this.tempRect;d.width=n.sourceFrame.width,d.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,i.renderTexture.bind(n.renderTexture,n.sourceFrame,d),i.renderTexture.clear()}pop(){var e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var n=r.inputSize,a=r.inputPixel,o=r.inputClamp;if(n[0]=t.destinationFrame.width,n[1]=t.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],a[0]=n[0]*t.resolution,a[1]=n[1]*t.resolution,a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*n[2]-.5*a[2],o[3]=t.sourceFrame.height*n[3]-.5*a[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(t.renderTexture.framebuffer.multisample>1&&this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,t.renderTexture,l.renderTexture,Bb.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;var d=0;for(d=0;d<i.length-1;++d){i[d].apply(this,u,c,Bb.CLEAR,t);var h=u;u=c,c=h}i[d].apply(this,u,l.renderTexture,Bb.BLEND,t),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Bb.CLEAR){if(e&&e.filterFrame){var i=this.tempRect;i.width=e.filterFrame.width,i.height=e.filterFrame.height,this.renderer.renderTexture.bind(e,e.filterFrame,i)}else this.renderer.renderTexture.bind(e);"boolean"==typeof t&&(t=t?Bb.CLEAR:Bb.BLEND),(t===Bb.CLEAR||t===Bb.BLIT&&this.forceClear)&&this.renderer.renderTexture.clear()}applyFilter(e,t,i,r){var n=this.renderer;this.bindAndClear(i,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,n.state.set(e.state),n.shader.bind(e),e.legacy?(this.quadUv.map(t._frame,t.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(Pb.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(Pb.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){var{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:n}=t._texture,a=e.set(r.width,0,0,r.height,i.x,i.y),o=t.worldTransform.copyTo(nw.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/n.width,1/n.height),a.translate(t.anchor.x,t.anchor.y),a}destroy(){this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1){return this.texturePool.getOptimalTexture(e,t,i)}getFilterTexture(e,t){if("number"==typeof e){var i=e;e=t,t=i}e=e||this.activeState.renderTexture;var r=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}}class pT{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class fT extends Gw{constructor(e){super(e),this.emptyRenderer=new pT(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){for(var{boundTextures:i}=this.renderer.texture,r=t-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,t,i,r){for(var{elements:n,ids:a,count:o}=e,s=0,l=0;l<o;l++){var u=n[l],c=u._batchLocation;if(c>=0&&c<r&&t[c]===u)a[l]=c;else for(;s<r;){var d=t[s];if(!d||d._batchEnabled!==i||d._batchLocation!==s){a[l]=s,u._batchLocation=s,t[s]=u;break}s++}}}}var gT=0;class _T extends Gw{constructor(e){super(e),this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),e.view.addEventListener&&(e.view.addEventListener("webglcontextlost",this.handleContextLost,!1),e.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=gT++,e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext()}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=gT++,this.renderer.runners.contextChange.emit(e)}initFromOptions(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){var i;if(Vb.PREFER_ENV>=Cb.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){var{gl:e}=this;1===this.webGLVersion?Object.assign(this.extensions,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),loseContext:e.getExtension("WEBGL_lose_context"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,{anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),colorBufferFloat:e.getExtension("EXT_color_buffer_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear")})}handleContextLost(e){e.preventDefault()}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){var e=this.renderer.view;e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.renderingToScreen&&this.gl.flush()}validateContext(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var t=!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=t,t||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}class mT{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.multisample=Gb.NONE,this.msaaBuffer=null,this.blitFramebuffer=null}}var vT=new KE;class yT extends Gw{constructor(e){super(e),this.managedFramebuffers=[],this.unknownFramebuffer=new jw(10,10),this.msaaSamples=null}contextChange(){var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new KE,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Vb.PREFER_ENV===Cb.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=e=>t.drawBuffersWEBGL(e):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t){var{gl:i}=this;if(e){var r=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,r.framebuffer)),r.dirtyId!==e.dirtyId&&(r.dirtyId=e.dirtyId,r.dirtyFormat!==e.dirtyFormat?(r.dirtyFormat=e.dirtyFormat,this.updateFramebuffer(e)):r.dirtySize!==e.dirtySize&&(r.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var n=0;n<e.colorTextures.length;n++){var a=e.colorTextures[n];this.renderer.texture.unbind(a.parentTextureArray||a)}e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,e.width,e.height)}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,r){var n=this.viewport;n.width===i&&n.height===r&&n.x===e&&n.y===t||(n.x=e,n.y=t,n.width=i,n.height=r,this.gl.viewport(e,t,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,r,n=Ib.COLOR|Ib.DEPTH){var{gl:a}=this;a.clearColor(e,t,i,r),a.clear(n)}initFramebuffer(e){var{gl:t}=this,i=new mT(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){var{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));for(var r=e.colorTextures,n=0;n<r.length;n++)this.renderer.texture.bind(r[n],0);e.depthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e){var{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID],r=e.colorTextures.length;t.drawBuffers||(r=Math.min(r,1)),i.multisample>1&&(i.msaaBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.RGBA8,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,i.msaaBuffer));for(var n=[],a=0;a<r;a++)if(!(0===a&&i.multisample>1)){var o=e.colorTextures[a],s=o.parentTextureArray||o;this.renderer.texture.bind(s,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+a,o.target,s._glTextures[this.CONTEXT_UID].texture,0),n.push(t.COLOR_ATTACHMENT0+a)}if((n.length>1&&t.drawBuffers(n),e.depthTexture)&&this.writeDepthTexture){var l=e.depthTexture;this.renderer.texture.bind(l,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,0)}i.stencil||!e.stencil&&!e.depth||(i.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height),e.depthTexture||t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,i.stencil))}detectSamples(e){var{msaaSamples:t}=this,i=Gb.NONE;if(e<=1||null===t)return i;for(var r=0;r<t.length;r++)if(t[r]<=e){i=t[r];break}return 1===i&&(i=Gb.NONE),i}blit(e,t,i){var{current:r,renderer:n,gl:a,CONTEXT_UID:o}=this;if(2===n.context.webGLVersion&&r){var s=r.glFramebuffers[o];if(s){if(!e){if(s.multisample<=1)return;s.blitFramebuffer||(s.blitFramebuffer=new jw(r.width,r.height),s.blitFramebuffer.addColorTexture(0,r.colorTextures[0])),(e=s.blitFramebuffer).width=r.width,e.height=r.height}t||((t=vT).width=r.width,t.height=r.height),i||(i=t);var l=t.width===i.width&&t.height===i.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,s.framebuffer),a.blitFramebuffer(t.x,t.y,t.width,t.height,i.x,i.y,i.width,i.height,a.COLOR_BUFFER_BIT,l?a.NEAREST:a.LINEAR)}}}disposeFramebuffer(e,t){var i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete e.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(e);n>=0&&this.managedFramebuffers.splice(n,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(i.framebuffer),i.stencil&&r.deleteRenderbuffer(i.stencil))}}disposeAll(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.enableStencil();var i=e.width,r=e.height,n=this.gl,a=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,a),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),t.stencil=a,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,a)}}}reset(){this.current=this.unknownFramebuffer,this.viewport=new KE}}class AT{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}var bT={5126:4,5123:2,5121:1};class ET extends Gw{constructor(e){super(e),this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={},this.managedBuffers={}}contextChange(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;Vb.PREFER_ENV===Cb.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=e=>i.bindVertexArrayOES(e),e.deleteVertexArray=e=>i.deleteVertexArrayOES(e)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(e,t)=>r.vertexAttribDivisorANGLE(e,t),e.drawElementsInstanced=(e,t,i,n,a)=>r.drawElementsInstancedANGLE(e,t,i,n,a),e.drawArraysInstanced=(e,t,i,n)=>r.drawArraysInstancedANGLE(e,t,i,n)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;var{gl:i}=this,r=e.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var a=r[t.program.id]||this.initGeometryVao(e,t.program,n);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?i.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){for(var e=this._activeGeometry,{gl:t}=this,i=0;i<e.buffers.length;i++){var r=e.buffers[i],n=r._glBuffers[this.CONTEXT_UID];if(r._updateID!==n.updateID){n.updateID=r._updateID;var a=r.index?t.ELEMENT_ARRAY_BUFFER:t.ARRAY_BUFFER;if(t.bindBuffer(a,n.buffer),this._boundBuffer=n,n.byteLength>=r.data.byteLength)t.bufferSubData(a,0,r.data);else{var o=r.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;n.byteLength=r.data.byteLength,t.bufferData(a,r.data,o)}}}}checkCompatibility(e,t){var i=e.attributes,r=t.attributeData;for(var n in r)if(!i[n])throw new Error(`shader and geometry incompatible, geometry missing the "${n}" attribute`)}getSignature(e,t){var i=e.attributes,r=t.attributeData,n=["g",e.id];for(var a in i)r[a]&&n.push(a);return n.join("-")}initGeometryVao(e,t,i=!0){this.checkCompatibility(e,t);var r=this.gl,n=this.CONTEXT_UID,a=this.getSignature(e,t),o=e.glVertexArrayObjects[this.CONTEXT_UID],s=o[a];if(s)return o[t.id]=s,s;var l=e.buffers,u=e.attributes,c={},d={};for(var h in l)c[h]=0,d[h]=0;for(var p in u)!u[p].size&&t.attributeData[p]?u[p].size=t.attributeData[p].size:u[p].size||console.warn(`PIXI Geometry attribute '${p}' size cannot be determined (likely the bound shader does not have the attribute)`),c[u[p].buffer]+=u[p].size*bT[u[p].type];for(var f in u){var g=u[f],_=g.size;void 0===g.stride&&(c[g.buffer]===_*bT[g.type]?g.stride=0:g.stride=c[g.buffer]),void 0===g.start&&(g.start=d[g.buffer],d[g.buffer]+=_*bT[g.type])}s=r.createVertexArray(),r.bindVertexArray(s);for(var m=0;m<l.length;m++){var v=l[m];v._glBuffers[n]||(v._glBuffers[n]=new AT(r.createBuffer()),this.managedBuffers[v.id]=v,v.disposeRunner.add(this)),i&&v._glBuffers[n].refCount++}return this.activateVao(e,t),this._activeVao=s,o[t.id]=s,o[a]=s,s}disposeBuffer(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(t||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}}disposeGeometry(e,t){if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,n=e.buffers;if(e.disposeRunner.remove(this),i){for(var a=0;a<n.length;a++){var o=n[a]._glBuffers[this.CONTEXT_UID];o.refCount--,0!==o.refCount||t||this.disposeBuffer(n[a],t)}if(!t)for(var s in i)if("g"===s[0]){var l=i[s];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}}disposeAll(e){for(var t=Object.keys(this.managedGeometries),i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e);t=Object.keys(this.managedBuffers);for(var r=0;r<t.length;r++)this.disposeBuffer(this.managedBuffers[t[r]],e)}activateVao(e,t){var i=this.gl,r=this.CONTEXT_UID,n=e.buffers,a=e.attributes;e.indexBuffer&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.indexBuffer._glBuffers[r].buffer);var o=null;for(var s in a){var l=a[s],u=n[l.buffer]._glBuffers[r];if(t.attributeData[s]){o!==u&&(i.bindBuffer(i.ARRAY_BUFFER,u.buffer),o=u);var c=t.attributeData[s].location;if(i.enableVertexAttribArray(c),i.vertexAttribPointer(c,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(c,1)}}}}draw(e,t,i,r){var{gl:n}=this,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,s=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?a.instanced?n.drawElementsInstanced(e,t||a.indexBuffer.data.length,s,(i||0)*o,r||1):n.drawElements(e,t||a.indexBuffer.data.length,s,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else a.instanced?n.drawArraysInstanced(e,i,t||a.getSize(),r||1):n.drawArrays(e,i,t||a.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}}class wT{constructor(e=null){this.type=Wb.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}reset(){this.pooled&&(this.maskObject=null,this.type=Wb.NONE,this.autoDetect=!0),this._target=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}function TT(e,t,i){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),r}function CT(e,t,i,r){var n=TT(e,e.VERTEX_SHADER,t),a=TT(e,e.FRAGMENT_SHADER,i),o=e.createProgram();if(e.attachShader(o,n),e.attachShader(o,a),r)for(var s in r)e.bindAttribLocation(o,r[s],s);return e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||(console.warn(t),console.error(e.getShaderInfoLog(n))),e.getShaderParameter(a,e.COMPILE_STATUS)||(console.warn(i),console.error(e.getShaderInfoLog(a))),console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(o,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(o)),e.deleteProgram(o),o=null),e.deleteShader(n),e.deleteShader(a),o}function ST(e){for(var t=new Array(e),i=0;i<t.length;i++)t[i]=!1;return t}function IT(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return ST(2*t);case"bvec3":return ST(3*t);case"bvec4":return ST(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var xT,PT={},DT=PT;function RT(){if(DT===PT||DT&&DT.isContextLost()){var e,t=HE.createElement("canvas");e||((e=t.getContext("webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),DT=e}return DT}function OT(e,t,i){if("precision"!==e.substring(0,9)){var r=t;return t===Ub.HIGH&&i!==Ub.HIGH&&(r=Ub.MEDIUM),`precision ${r} float;\n${e}`}return i!==Ub.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var kT={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function MT(e){return kT[e]}var NT=null,LT={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function BT(e,t){if(!NT){var i=Object.keys(LT);NT={};for(var r=0;r<i.length;++r){var n=i[r];NT[e[n]]=LT[n]}}return NT[t]}var FT=[{test:e=>"float"===e.type&&1===e.size,code:e=>`\n            if(uv["${e}"] !== ud["${e}"].value)\n            {\n                ud["${e}"].value = uv["${e}"]\n                gl.uniform1f(ud["${e}"].location, uv["${e}"])\n            }\n            `},{test:e=>("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray,code:e=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${e}"], t);\n\n            if(ud["${e}"].value !== t)\n            {\n                ud["${e}"].value = t;\n                gl.uniform1i(ud["${e}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(e,t)=>"mat3"===e.type&&1===e.size&&void 0!==t.a,code:e=>`\n            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));\n            `},{test:(e,t)=>"vec2"===e.type&&1===e.size&&void 0!==t.x,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${e}"].location, v.x, v.y);\n                }`},{test:e=>"vec2"===e.type&&1===e.size,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);\n                }\n            `},{test:(e,t)=>"vec4"===e.type&&1===e.size&&void 0!==t.width,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)\n                }`},{test:e=>"vec4"===e.type&&1===e.size,code:e=>`\n                cv = ud["${e}"].value;\n                v = uv["${e}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])\n                }`}],UT={float:"\n    if(cv !== v)\n    {\n        cv.v = v;\n        gl.uniform1f(location, v)\n    }",vec2:"\n    if(cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",bool:"gl.uniform1i(location, v)",bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},WT={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var GT,VT=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function jT(e){for(var t="",i=0;i<e;++i)i>0&&(t+="\nelse "),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function HT(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=t.createShader(t.FRAGMENT_SHADER);;){var r=VT.replace(/%forloop%/gi,jT(e));if(t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}return e}var zT=0,YT={};class $T{constructor(e,t,i="pixi-shader"){this.id=zT++,this.vertexSrc=e||$T.defaultVertexSrc,this.fragmentSrc=t||$T.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),YT[i]?(YT[i]++,i+=`-${YT[i]}`):YT[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=OT(this.vertexSrc,Vb.PRECISION_VERTEX,Ub.HIGH),this.fragmentSrc=OT(this.fragmentSrc,Vb.PRECISION_FRAGMENT,function(){if(!xT){xT=Ub.MEDIUM;var e=RT();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);xT=t.precision?Ub.HIGH:Ub.MEDIUM}}return xT}())),this.extractData(this.vertexSrc,this.fragmentSrc),this.glPrograms={},this.syncUniforms=null}extractData(e,t){var i=RT();if(i){var r=CT(i,e,t);this.attributeData=this.getAttributeData(r,i),this.uniformData=this.getUniformData(r,i),i.deleteProgram(r)}else this.uniformData={},this.attributeData={}}getAttributeData(e,t){for(var i={},r=[],n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<n;a++){var o=t.getActiveAttrib(e,a),s=BT(t,o.type),l={type:s,name:o.name,size:MT(s),location:0};i[o.name]=l,r.push(l)}r.sort(((e,t)=>e.name>t.name?1:-1));for(var u=0;u<r.length;u++)r[u].location=u;return i}getUniformData(e,t){for(var i={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=0;n<r;n++){var a=t.getActiveUniform(e,n),o=a.name.replace(/\[.*?\]$/,""),s=a.name.match(/\[.*?\]$/),l=BT(t,a.type);i[o]={type:l,size:a.size,isArray:s,value:IT(l,a.size)}}return i}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,t,i){var r=e+t,n=LE[r];return n||(LE[r]=n=new $T(e,t,i)),n}}class qT{constructor(e,t){for(var i in this.program=e,this.uniformGroup=t?t instanceof cT?t:new cT(t):new cT({}),e.uniformData)this.uniformGroup.uniforms[i]instanceof Array&&(this.uniformGroup.uniforms[i]=new Float32Array(this.uniformGroup.uniforms[i]))}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(var i in t.uniforms){var r=t.uniforms[i];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){var r=$T.from(e,t);return new qT(r,i)}}class QT{constructor(){this.data=0,this.blendMode=xb.NORMAL,this.polygonOffset=0,this.blend=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==xb.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){var e=new QT;return e.depthTest=!1,e.blend=!0,e}}class ZT extends qT{constructor(e,t,i){super($T.from(e||ZT.defaultVertexSrc,t||ZT.defaultFragmentSrc),i),this.padding=0,this.resolution=Vb.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0,this.legacy=!!this.program.attributeData.aTextureCoord,this.state=new QT}apply(e,t,i,r,n){e.applyFilter(this,t,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}var KT=new nw;class XT{constructor(e,t){this._texture=e,this.mapCoord=new nw,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===t?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);for(var i=this.mapCoord,r=0;r<e.length;r+=2){var n=e[r],a=e[r+1];t[r]=n*i.a+a*i.c+i.tx,t[r+1]=n*i.b+a*i.d+i.ty}return t}update(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=t.orig,n=t.trim;n&&(KT.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(KT));var a=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/a.resolution,l=this.clampOffset;return o[0]=(t._frame.x+s+l)/a.width,o[1]=(t._frame.y+s+l)/a.height,o[2]=(t._frame.x+t._frame.width-s+l)/a.width,o[3]=(t._frame.y+t._frame.height-s+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0}}class JT extends ZT{constructor(e){var t=new nw;super("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n"),e.renderable=!1,this.maskSprite=e,this.maskMatrix=t}apply(e,t,i,r){var n=this.maskSprite,a=n._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new XT(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,i,r))}}class eC extends Gw{constructor(e){super(e),this.enableScissor=!1,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){var i=t;if(!i.isMaskData){var r=this.maskDataPool.pop()||new wT;r.pooled=!0,r.maskObject=t,i=r}switch(i.autoDetect&&this.detect(i),i.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),i._target=e,i.type){case Wb.SCISSOR:this.maskStack.push(i),this.renderer.scissor.push(i);break;case Wb.STENCIL:this.maskStack.push(i),this.renderer.stencil.push(i);break;case Wb.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i),this.maskStack.push(i)}}pop(e){var t=this.maskStack.pop();if(t&&t._target===e){switch(t.type){case Wb.SCISSOR:this.renderer.scissor.pop();break;case Wb.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Wb.SPRITE:this.popSpriteMask()}t.reset(),t.pooled&&this.maskDataPool.push(t)}}detect(e){var t=e.maskObject;if(t.isSprite)e.type=Wb.SPRITE;else if(e.type=Wb.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var i=t.worldTransform,r=Math.atan2(i.b,i.a),n=Math.atan2(i.d,i.c);r=Math.round(r*(180/Math.PI)*100),n=((n=Math.round(n*(180/Math.PI)*100)-r)%18e3+18e3)%18e3,0===(r=(r%9e3+9e3)%9e3)&&9e3===n&&(e.type=Wb.SCISSOR)}}pushSpriteMask(e){var{maskObject:t}=e,i=e._target,r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new JT(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t;var n=i.filterArea;i.filterArea=t.getBounds(!0),this.renderer.filter.push(i,r),i.filterArea=n,this.alphaMaskIndex++}popSpriteMask(){this.renderer.filter.pop(),this.alphaMaskIndex--}}class tC extends Gw{constructor(e){super(e),this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){var{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==i&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){super.destroy(),this.maskStack=null}}class iC extends tC{constructor(e){super(e),this.glConst=zE.SCISSOR_TEST}getStackLength(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}push(e){var t=e.maskObject;t.renderable=!0;var i=e._scissorRect,r=t.getBounds(!0),{gl:n}=this.renderer;t.renderable=!1,i?r.fit(i):n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=r,this._useCurrent()}pop(){var{gl:e}=this.renderer;this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){var e=this.maskStack[this.maskStack.length-1]._scissorRect,t=this.renderer.renderTexture.current,{transform:i,sourceFrame:r,destinationFrame:n}=this.renderer.projection,a=t?t.resolution:this.renderer.resolution,o=(e.x-r.x)*a+n.x,s=(e.y-r.y)*a+n.y,l=e.width*a,u=e.height*a;i&&(o+=i.tx*a,s+=i.ty*a),t||(s=this.renderer.height-u-s),this.renderer.gl.scissor(o,s,l,u)}}class rC extends tC{constructor(e){super(e),this.glConst=zE.STENCIL_TEST}getStackLength(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){var t=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.enable(i.STENCIL_TEST)),e._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,this._getBitwiseMask()),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent()}pop(e){var t=this.renderer.gl;0===this.getStackLength()?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent())}_useCurrent(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.getStackLength(),this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}_getBitwiseMask(){return(1<<this.getStackLength())-1}}class nC extends Gw{constructor(e){super(e),this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new nw,this.transform=null}update(e,t,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)}calculateProjection(e,t,i,r){var n=this.projectionMatrix,a=r?-1:1;n.identity(),n.a=1/t.width*2,n.d=a*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-a-t.y*n.d}setTransform(e){}}var aC=new KE,oC=new KE,sC=new KE;class lC extends Gw{constructor(e){super(e),this.clearColor=e._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new KE,this.destinationFrame=new KE}bind(e=null,t,i){var r,n,a,o=this.renderer;this.current=e,e?(a=(r=e.baseTexture).resolution,t||(aC.width=e.frame.width,aC.height=e.frame.height,t=aC),i||(oC.x=e.frame.x,oC.y=e.frame.y,oC.width=t.width,oC.height=t.height,i=oC),n=r.framebuffer):(a=o.resolution,t||(aC.width=o.screen.width,aC.height=o.screen.height,t=aC),i||((i=aC).width=t.width,i.height=t.height)),sC.x=i.x*a,sC.y=i.y*a,sC.width=i.width*a,sC.height=i.height*a,this.renderer.framebuffer.bind(n,sC),this.renderer.projection.update(i,t,a,!n),e?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.clearColor,this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t)}resize(){this.bind(null)}reset(){this.bind(null)}}class uC{}class cC{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.program=null}}var dC=0,hC={textureCount:0};class pC extends Gw{constructor(e){super(e),this.destroyed=!1,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this.id=dC++}systemCheck(){if(!function(){if("boolean"==typeof GT)return GT;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");GT=!0===e({a:"b"},"a","b")}catch(e){GT=!1}return GT}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.uniforms.globals=this.renderer.globalUniforms;var i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateShader(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),t||(hC.textureCount=0,this.syncUniformGroup(e.uniformGroup,hC)),r}setUniforms(e){var t=this.shader.program,i=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,t){var i=this.getglProgram();e.static&&e.dirtyId===i.uniformGroups[e.id]||(i.uniformGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){var t=this.getSignature(e,this.shader.program.uniformData);return this.cache[t]||(this.cache[t]=function(e,t){var i=["\n        var v = null;\n        var cv = null\n        var t = 0;\n        var gl = renderer.gl\n    "];for(var r in e.uniforms){var n=t[r];if(n){for(var a=e.uniforms[r],o=!1,s=0;s<FT.length;s++)if(FT[s].test(n,a)){i.push(FT[s].code(r,a)),o=!0;break}if(!o){var l=(1===n.size?UT:WT)[n.type].replace("location",`ud["${r}"].location`);i.push(`\n            cv = ud["${r}"].value;\n            v = uv["${r}"];\n            ${l};`)}}else e.uniforms[r].group&&i.push(`\n                    renderer.shader.syncUniformGroup(uv["${r}"], syncData);\n                `)}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}getSignature(e,t){var i=e.uniforms,r=[];for(var n in i)r.push(n),t[n]&&r.push(t[n].type);return r.join("-")}getglProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateShader(e){var t=this.gl,i=e.program,r={};for(var n in i.attributeData)r[n]=i.attributeData[n].location;var a=CT(t,i.vertexSrc,i.fragmentSrc,r),o={};for(var s in i.uniformData){var l=i.uniformData[s];o[s]={location:t.getUniformLocation(a,s),value:IT(l.type,l.size)}}var u=new cC(a,o);return i.glPrograms[this.renderer.CONTEXT_UID]=u,u}reset(){this.program=null,this.shader=null}destroy(){this.destroyed=!0}}class fC extends Gw{constructor(e){super(e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=xb.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.checks=[],this.defaultState=new QT,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=function(e,t=[]){return t[xb.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.ADD]=[e.ONE,e.ONE],t[xb.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.NONE]=[0,0],t[xb.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[xb.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[xb.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[xb.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[xb.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[xb.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[xb.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[xb.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[xb.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[xb.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[xb.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,i=0;t;)1&t&&this.map[i].call(this,!!(e.data&1<<i)),t>>=1,i++;this.stateId=e.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,e)}forceState(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var i=0;i<this.checks.length;i++)this.checks[i](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(fC.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(fC.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],i=this.gl;2===t.length?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){var i=this.checks.indexOf(e);t&&-1===i?this.checks.push(e):t||-1===i||this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}}class gC extends Gw{constructor(e){super(e),this.count=0,this.checkCount=0,this.maxIdle=Vb.GC_MAX_IDLE,this.checkCountMax=Vb.GC_MAX_CHECK_COUNT,this.mode=Vb.GC_MODE}postrender(){this.renderer.renderingToScreen&&(this.count++,this.mode!==Fb.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){for(var e=this.renderer.texture,t=e.managedTextures,i=!1,r=0;r<t.length;r++){var n=t[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[r]=null,i=!0)}if(i){for(var a=0,o=0;o<t.length;o++)null!==t[o]&&(t[a++]=t[o]);t.length=a}}unload(e){var t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}}class _C{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=6408,this.internalFormat=5121}}class mC extends Gw{constructor(e){super(e),this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Uw}contextChange(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new _C(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new _C(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var n=0;n<6;n++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var a=0;a<this.boundTextures.length;a++)this.bind(null,a)}bind(e,t=0){var{gl:i}=this;if(e){if((e=e.castToBaseTexture()).parentTextureArray)return;if(e.valid){e.touched=this.renderer.textureGC.count;var r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)),this.boundTextures[t]=e}}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){var{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(var n=0;n<i.length;n++)i[n]===e&&(this.currentLocation!==n&&(t.activeTexture(t.TEXTURE0+n),this.currentLocation=n),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[n]=null)}initTexture(e){var t=new _C(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){if(t.internalFormat=e.format,t.type=e.type,2===this.webGLVersion){var i=this.renderer.gl;e.type===i.FLOAT&&e.format===i.RGBA&&(t.internalFormat=i.RGBA32F),e.type===Ob.HALF_FLOAT&&(t.type=i.HALF_FLOAT),t.type===i.HALF_FLOAT&&e.format===i.RGBA&&(t.internalFormat=i.RGBA16F)}}updateTexture(e){var t=e._glTextures[this.CONTEXT_UID];if(t){var i=this.renderer;if(this.initTextureType(e,t),e.resource&&e.resource.upload(i,e,t));else{var r=e.realWidth,n=e.realHeight,a=i.gl;(t.width!==r||t.height!==n||t.dirtyId<0)&&(t.width=r,t.height=n,a.texImage2D(e.target,0,t.internalFormat,r,n,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}}destroyTexture(e,t){var{gl:i}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&OE(this.managedTextures,r,1)}}updateTextureStyle(e){var t=e._glTextures[this.CONTEXT_UID];t&&(e.mipmap!==Nb.POW2&&2===this.webGLVersion||e.isPowerOfTwo?t.mipmap=e.mipmap>=1:t.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?t.wrapMode=e.wrapMode:t.wrapMode=Mb.CLAMP,e.resource&&e.resource.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){var i=this.gl;if(t.mipmap&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===kb.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===kb.LINEAR){var n=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===kb.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===kb.LINEAR?i.LINEAR:i.NEAREST)}}var vC={FilterSystem:hT,BatchSystem:fT,ContextSystem:_T,FramebufferSystem:yT,GeometrySystem:ET,MaskSystem:eC,ScissorSystem:iC,StencilSystem:rC,ProjectionSystem:nC,RenderTextureSystem:lC,ShaderSystem:pC,StateSystem:fC,TextureGCSystem:gC,TextureSystem:mC},yC=new nw;class AC extends Qb{constructor(e=Sb.UNKNOWN,t){super(),(t=Object.assign({},Vb.RENDER_OPTIONS,t)).roundPixels&&(Vb.ROUND_PIXELS=t.roundPixels),this.options=t,this.type=e,this.screen=new KE(0,0,t.width,t.height),this.view=t.view||HE.createElement("canvas"),this.resolution=t.resolution||Vb.RESOLUTION,this.transparent=t.transparent,this.autoDensity=t.autoDensity||t.autoResize||!1,this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.clearBeforeRender=t.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,0],this._backgroundColorString="#000000",this.backgroundColor=t.backgroundColor||this._backgroundColor,this._lastObjectRendered=null,this.plugins={}}initPlugins(e){for(var t in e)this.plugins[t]=new e[t](this)}get width(){return this.view.width}get height(){return this.view.height}resize(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoDensity&&(this.view.style.width=`${e}px`,this.view.style.height=`${t}px`),this.emit("resize",e,t)}generateTexture(e,t,i,r){0===(r=r||e.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var n=Zw.create({width:0|r.width,height:0|r.height,scaleMode:t,resolution:i});return yC.tx=-r.x,yC.ty=-r.y,this.render(e,n,!1,yC,!!e.parent),n}destroy(e){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=Sb.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){this._backgroundColor=e,this._backgroundColorString=wE(e),EE(e,this._backgroundColorRgba)}}class bC extends AC{constructor(e){super(Sb.WEBGL,e),e=this.options,this.gl=null,this.CONTEXT_UID=0,this.runners={destroy:new Dw("destroy"),contextChange:new Dw("contextChange"),reset:new Dw("reset"),update:new Dw("update"),postrender:new Dw("postrender"),prerender:new Dw("prerender"),resize:new Dw("resize")},this.globalUniforms=new cT({projectionMatrix:new nw},!0),this.addSystem(eC,"mask").addSystem(_T,"context").addSystem(fC,"state").addSystem(pC,"shader").addSystem(mC,"texture").addSystem(ET,"geometry").addSystem(yT,"framebuffer").addSystem(iC,"scissor").addSystem(rC,"stencil").addSystem(nC,"projection").addSystem(gC,"textureGC").addSystem(hT,"filter").addSystem(lC,"renderTexture").addSystem(fT,"batch"),this.initPlugins(bC.__plugins),e.context?this.context.initFromContext(e.context):this.context.initFromOptions({alpha:!!this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:this.options.powerPreference}),this.renderingToScreen=!0,this.resize(this.options.width,this.options.height)}static create(e){return new bC(e)}addSystem(e,t){t||(t=e.name);var i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);for(var r in this[t]=i,this.runners)this.runners[r].add(i);return this}render(e,t,i,r,n){if(this.renderingToScreen=!t,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=r,!this.context.isLost){if(t||(this._lastObjectRendered=e),!n){var a=e.enableTempParent();e.updateTransform(),e.disableTempParent(a)}this.renderTexture.bind(t),this.batch.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this.renderTexture.clear(),e.render(this),this.batch.currentRenderer.flush(),t&&t.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}}resize(e,t){super.resize(e,t),this.runners.resize.emit(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e){for(var t in this.runners.destroy.emit(),this.runners)this.runners[t].destroy();super.destroy(e),this.gl=null}static registerPlugin(e,t){bC.__plugins=bC.__plugins||{},bC.__plugins[e]=t}}function EC(e){return bC.create(e)}var wC="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",TC="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n";class CC{constructor(){this.texArray=null,this.blend=0,this.type=Pb.TRIANGLES,this.start=0,this.size=0,this.data=null}}class SC{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class IC{constructor(e){this.rawBinaryData=new ArrayBuffer(e),this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class xC extends pT{constructor(e){super(e),this.shaderGenerator=null,this.geometryClass=null,this.vertexSize=null,this.state=QT.for2d(),this.size=4*Vb.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}contextChange(){var e=this.renderer.gl;Vb.PREFER_ENV===Cb.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Vb.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=HT(this.MAX_TEXTURES,e)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){for(var{_drawCallPool:e,_textureArrayPool:t}=xC,i=this.size/4,r=Math.floor(i/this.MAX_TEXTURES)+1;e.length<i;)e.push(new CC);for(;t.length<r;)t.push(new SC);for(var n=0;n<this.MAX_TEXTURES;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){var{_bufferedTextures:e,MAX_TEXTURES:t}=this,i=xC._textureArrayPool,r=this.renderer.batch,n=this._tempBoundTextures,a=this.renderer.textureGC.count,o=++Uw._globalBatch,s=0,l=i[0],u=0;r.copyBoundTextures(n,t);for(var c=0;c<this._bufferSize;++c){var d=e[c];e[c]=null,d._batchEnabled!==o&&(l.count>=t&&(r.boundArray(l,n,o,t),this.buildDrawCalls(l,u,c),u=c,l=i[++s],++o),d._batchEnabled=o,d.touched=a,l.elements[l.count++]=d)}l.count>0&&(r.boundArray(l,n,o,t),this.buildDrawCalls(l,u,this._bufferSize),++s,++o);for(var h=0;h<n.length;h++)n[h]=null;Uw._globalBatch=o}buildDrawCalls(e,t,i){var{_bufferedElements:r,_attributeBuffer:n,_indexBuffer:a,vertexSize:o}=this,s=xC._drawCallPool,l=this._dcIndex,u=this._aIndex,c=this._iIndex,d=s[l];d.start=this._iIndex,d.texArray=e;for(var h=t;h<i;++h){var p=r[h],f=p._texture.baseTexture,g=CE[f.alphaMode?1:0][p.blendMode];r[h]=null,t<h&&d.blend!==g&&(d.size=c-d.start,t=h,(d=s[++l]).texArray=e,d.start=c),this.packInterleavedGeometry(p,n,a,u,c),u+=p.vertexData.length/2*o,c+=p.indices.length,d.blend=g}t<i&&(d.size=c-d.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(e){for(var t=this.renderer.texture,i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){var{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;Vb.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){for(var e=this._dcIndex,{gl:t,state:i}=this.renderer,r=xC._drawCallPool,n=null,a=0;a<e;a++){var{texArray:o,type:s,size:l,start:u,blend:c}=r[a];n!==o&&(n=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,i.set(this.state),t.drawElements(s,l,t.UNSIGNED_SHORT,2*u)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.shader.bind(this._shader),Vb.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){var t=PE(Math.ceil(e/8)),i=RE(t),r=8*t;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new IC(r*this.vertexSize*4)),n}getIndexBuffer(e){var t=PE(Math.ceil(e/12)),i=RE(t),r=12*t;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n}packInterleavedGeometry(e,t,i,r,n){for(var{uint32View:a,float32View:o}=t,s=r/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,d=e._texture.baseTexture._batchLocation,h=Math.min(e.worldAlpha,1),p=h<1&&e._texture.baseTexture.alphaMode?SE(e._tintRGB,h):e._tintRGB+(255*h<<24),f=0;f<c.length;f+=2)o[r++]=c[f],o[r++]=c[f+1],o[r++]=l[f],o[r++]=l[f+1],a[r++]=p,o[r++]=d;for(var g=0;g<u.length;g++)i[n++]=s+u[g]}}xC._drawCallPool=[],xC._textureArrayPool=[];class PC{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){for(var t=new Int32Array(e),i=0;i<e;i++)t[i]=i;this.defaultGroupCache[e]=cT.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,`${e}`)).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new $T(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new nw,default:this.defaultGroupCache[e]};return new qT(this.programCache[e],n)}generateSampleSrc(e){var t="";t+="\n",t+="\n";for(var i=0;i<e;i++)i>0&&(t+="\nelse "),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n"}}class DC extends oT{constructor(e=!1){super(),this._buffer=new eT(null,e,!1),this._indexBuffer=new eT(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ob.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ob.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ob.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ob.FLOAT).addIndex(this._indexBuffer)}}var RC="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",OC="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n";class kC{static create(e){var{vertex:t,fragment:i,vertexSize:r,geometryClass:n}=Object.assign({vertex:RC,fragment:OC,geometryClass:DC,vertexSize:6},e);return class extends xC{constructor(e){super(e),this.shaderGenerator=new PC(t,i),this.geometryClass=n,this.vertexSize=r}}}static get defaultVertexSrc(){return RC}static get defaultFragmentTemplate(){return OC}}var MC=kC.create(),NC={AbstractBatchRenderer:xC,AbstractRenderer:AC,Attribute:Xw,BaseRenderTexture:Hw,BaseTexture:Uw,BatchDrawCall:CC,BatchGeometry:DC,BatchPluginFactory:kC,BatchRenderer:MC,BatchShaderGenerator:PC,BatchTextureArray:SC,Buffer:eT,Filter:ZT,FilterState:dT,Framebuffer:jw,GLFramebuffer:mT,GLProgram:cC,GLTexture:_C,Geometry:oT,IGLUniformData:uC,MaskData:wT,ObjectRenderer:pT,Program:$T,Quad:sT,QuadUv:lT,RenderTexture:Zw,RenderTexturePool:Kw,Renderer:bC,Shader:qT,SpriteMaskFilter:JT,State:QT,System:Gw,Texture:$w,TextureMatrix:XT,TextureUvs:zw,UniformGroup:cT,ViewableBuffer:IC,autoDetectRenderer:EC,checkMaxIfStatementsInShader:HT,defaultFilterVertex:TC,defaultVertex:wC,resources:Ww,systems:vC,uniformParsers:FT},LC=function(){function e(e,t,i){void 0===t&&(t=!1),this.next=null,this.prev=null,this.owner=null,this.fn=e,this.once=t,this.thisArg=i}return e.prototype.detach=function(){return null!==this.owner&&(this.owner.detach(this),!0)},e.prototype.dispose=function(){this.detach()},e}(),BC=function(){function e(){this._head=null,this._tail=null,this._filter=null}return e.prototype.handlers=function(){for(var e=this._head,t=[];e;)t.push(e),e=e.next;return t},e.prototype.hasAny=function(){return!!this._head},e.prototype.has=function(e){return e.owner===this},e.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=this._head;if(!i)return!1;if(this._filter&&!this._filter.apply(this,e))return!1;for(;i;)i.once&&this.detach(i),i.fn.apply(i.thisArg,e),i=i.next;return!0},e.prototype.add=function(e,t){return void 0===t&&(t=null),this._addMiniSignalBinding(new LC(e,!1,t))},e.prototype.once=function(e,t){return void 0===t&&(t=null),this._addMiniSignalBinding(new LC(e,!0,t))},e.prototype.detach=function(e){return e.owner!==this||(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e===this._head?(this._head=e.next,null===e.next&&(this._tail=null)):e===this._tail&&(this._tail=e.prev,this._tail&&(this._tail.next=null)),e.owner=null),this},e.prototype.detachAll=function(){var e=this._head;if(!e)return this;for(this._head=null,this._tail=null;e;)e.owner=null,e=e.next;return this},e.prototype.filter=function(e){this._filter=e},e.prototype.proxy=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];for(var r=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.dispatch.apply(e,t)},n=0;n<t.length;++n)t[n].add(r);return this},e.prototype._addMiniSignalBinding=function(e){return this._head?(this._tail&&(this._tail.next=e),e.prev=this._tail,this._tail=e):(this._head=e,this._tail=e),e.owner=this,e},e}(),FC=function(e){this.config=e,this.onError=new BC,this.onComplete=new BC,this.onProgress=new BC},UC=function(e,t){return(UC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function WC(e,t){function i(){this.constructor=e}UC(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function GC(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var r=Array(e),n=0;for(t=0;t<i;t++)for(var a=arguments[t],o=0,s=a.length;o<s;o++,n++)r[n]=a[o];return r}var VC,jC={0:"Unknown",1:"Buffer",2:"Blob",3:"Json",4:"Xml",5:"Image",6:"Audio",7:"Video",8:"Text",Unknown:0,Buffer:1,Blob:2,Json:3,Xml:4,Image:5,Audio:6,Video:7,Text:8},HC={0:"NotStarted",1:"Loading",2:"Complete",NotStarted:0,Loading:1,Complete:2},zC=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._boundOnLoad=t._onLoad.bind(t),t._boundOnError=t._onError.bind(t),t._boundOnTimeout=t._onTimeout.bind(t),t._element=t._createElement(),t._elementTimer=0,t}return WC(t,e),t.prototype.load=function(){var e=this.config;e.crossOrigin&&(this._element.crossOrigin=e.crossOrigin),e.bindingScreen&&(this._element.bindingScreen=e.bindingScreen),this._element.src=e.url,this._element.addEventListener("load",this._boundOnLoad,!1),this._element.addEventListener("error",this._boundOnError,!1),e.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,e.timeout))},t.prototype.abort=function(){this._clearEvents(),this._element.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",this._error("Image load aborted by the user.")},t.prototype._createElement=function(){return this.config.loadElement?this.config.loadElement:nb()},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this._element.removeEventListener("load",this._boundOnLoad,!1),this._element.removeEventListener("error",this._boundOnError,!1)},t.prototype._error=function(e){this._clearEvents(),this.onError.dispatch(e)},t.prototype._complete=function(){this._clearEvents(),this.onComplete.dispatch(jC.Image,this._element)},t.prototype._onLoad=function(){this._complete()},t.prototype._onError=function(){this._error("Image failed to load.")},t.prototype._onTimeout=function(){this._error("Image load timed out.")},t}(FC);function YC(e){var t="";if(0===e.indexOf("data:")){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var r=e.indexOf("?"),n=e.indexOf("#"),a=Math.min(r>-1?r:e.length,n>-1?n:e.length);t=(e=e.substring(0,a)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()}!function(e){e.Default="text",e.Buffer="arraybuffer",e.Blob="blob",e.Document="document",e.Json="json",e.Text="text"}(VC||(VC={}));var $C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._xhrType=VC.Default,t}return WC(t,e),t.prototype.load=function(){var e=this,t=this.config,i=YC(t.url);"string"!=typeof t.xhrType&&(t.xhrType=this._determineXhrType(i)),this._xhrType=t.xhrType||VC.Default;Na({data:"",url:t.url,success(t){var i=t.data;t.statusCode,t.header;if("string"!=typeof i&&!(i instanceof ArrayBuffer))try{i=JSON.stringify(i)}catch(e){i=i}e._onLoad(i)},fail(){}})},t.prototype.abort=function(){},t.prototype._determineXhrType=function(e){return t._xhrTypeMap[e]||VC.Default},t.prototype._error=function(e){this.onError.dispatch(e)},t.prototype._complete=function(e,t){this.onComplete.dispatch(e,t)},t.prototype._onLoad=function(e){switch(this._xhrType){case VC.Json:this._parseJson(e);break;case VC.Default:case VC.Text:this._complete(jC.Text,e)}},t.prototype._parseJson=function(e){try{var t=JSON.parse(e);this._complete(jC.Json,t)}catch(e){this._error(`Error trying to parse loaded json: ${e}`)}},t.setExtensionXhrType=function(e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t._xhrTypeMap[e]=i)},t.ResponseType=VC,t._xhrTypeMap={xhtml:VC.Document,html:VC.Document,htm:VC.Document,xml:VC.Document,tmx:VC.Document,svg:VC.Document,tsx:VC.Document,gif:VC.Blob,png:VC.Blob,bmp:VC.Blob,jpg:VC.Blob,jpeg:VC.Blob,tif:VC.Blob,tiff:VC.Blob,webp:VC.Blob,tga:VC.Blob,json:VC.Json,text:VC.Text,txt:VC.Text,ttf:VC.Buffer,otf:VC.Buffer},t}(FC),qC=function(e,t){t=t||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[t.strictMode?"strict":"loose"].exec(e),n={},a=14;a--;)n[i.key[a]]=r[a]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(e,t,r){t&&(n[i.q.name][t]=r)})),n};function QC(e){var t=e;return function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];if(null===t)throw new Error("Callback was already called.");var r=t;return t=null,r.apply(this,e)}}var ZC=function(){function e(e,t){if(void 0===t&&(t=1),this.worker=e,this.concurrency=t,this.workers=0,this.buffer=0,this.paused=!1,this._started=!1,this._tasks=[],this.onSaturated=new BC,this.onUnsaturated=new BC,this.onEmpty=new BC,this.onDrain=new BC,this.onError=new BC,0===t)throw new Error("Concurrency must not be zero");this.buffer=t/4}return Object.defineProperty(e.prototype,"started",{get(){return this._started},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.onDrain.detachAll(),this.workers=0,this._started=!1,this._tasks=[]},e.prototype.push=function(e,t){this._insert(e,!1,t)},e.prototype.unshift=function(e,t){this._insert(e,!0,t)},e.prototype.process=function(){for(;!this.paused&&this.workers<this.concurrency&&this._tasks.length;){var e=this._tasks.shift();0===this._tasks.length&&this.onEmpty.dispatch(),this.workers+=1,this.workers===this.concurrency&&this.onSaturated.dispatch(),this.worker(e.data,QC(this._next(e)))}},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},e.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var e=1;e<=this.concurrency;e++)this.process()}},e.prototype.getTask=function(e){return this._tasks[e]},e.prototype._insert=function(e,t,i){var r=this;if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(this._started=!0,null==e&&this.idle())setTimeout((function(){return r.onDrain.dispatch()}),1);else{var n={data:e,callback:i};t?this._tasks.unshift(n):this._tasks.push(n),setTimeout((function(){return r.process()}),1)}},e.prototype._next=function(e){var t=this;return function(i){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.workers-=1,e.callback&&e.callback.apply(e,GC([i],r)),i&&t.onError.dispatch(i,e.data),t.workers<=t.concurrency-t.buffer&&t.onUnsaturated.dispatch(),t.idle()&&t.onDrain.dispatch(),t.process()}},e}(),KC=function(){function e(t,i){if(this.children=[],this.onStart=new BC,this.onProgress=new BC,this.onComplete=new BC,this.onAfterMiddleware=new BC,this.data=null,this.type=jC.Unknown,this.error="",this.progressChunk=0,this._dequeue=function(){},this._onCompleteBinding=null,this._state=HC.NotStarted,this.name=t,this.metadata=i.metadata,this.bindingScreen=i.bindingScreen,"string"!=typeof i.crossOrigin&&(i.crossOrigin=this._determineCrossOrigin(i.url)),i.strategy&&"function"!=typeof i.strategy)this._strategy=i.strategy,this._strategy.config=i;else{var r=i.strategy;r||(r=e._loadStrategyMap[YC(i.url)]),r||(r=e._defaultLoadStrategy),this._strategy=new r(i)}this._strategy.onError.add(this._error,this),this._strategy.onComplete.add(this._complete,this),this._strategy.onProgress.add(this._progress,this)}return e.setDefaultLoadStrategy=function(t){e._defaultLoadStrategy=t},e.setLoadStrategy=function(t,i){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e._loadStrategyMap[t]=i)},Object.defineProperty(e.prototype,"strategy",{get(){return this._strategy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get(){return this._strategy.config.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get(){return this._state===HC.Loading},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get(){return this._state===HC.Complete},enumerable:!0,configurable:!0}),e.prototype.abort=function(){this._strategy.abort()},e.prototype.load=function(){this._state=HC.Loading,this.onStart.dispatch(this),this._strategy.load()},e.prototype._error=function(e){this._state=HC.Complete,this.error=e,this.onComplete.dispatch(this)},e.prototype._complete=function(e,t){this._state=HC.Complete,this.type=e,this.data=t,this.onComplete.dispatch(this)},e.prototype._progress=function(e){this.onProgress.dispatch(this,e)},e.prototype._determineCrossOrigin=function(e,t){return"anonymous"},e._tempAnchor=null,e._defaultLoadStrategy=$C,e._loadStrategyMap={gif:zC,png:zC,bmp:zC,jpg:zC,jpeg:zC,tif:zC,tiff:zC,webp:zC,tga:zC,svg:zC,"svg+xml":zC},e}();function XC(e,t,i,r){void 0===r&&(r=!1);var n=0,a=e.length;!function o(s){s||n===a?i&&i(s):r?setTimeout((function(){return t(e[n++],o)}),1):t(e[n++],o)}()}var JC=/(#[\w-]+)?$/,eS=function(){function e(t,i){void 0===t&&(t=""),void 0===i&&(i=10),this.progress=0,this.loading=!1,this.defaultQueryString="",this.resources={},this.onError=new BC,this.onLoad=new BC,this.onStart=new BC,this.onComplete=new BC,this.onProgress=new BC,this._baseUrl="",this._urlResolvers=[],this._middleware=[],this._resourcesParsing=[],this._boundLoadResource=this._loadResource.bind(this),this.baseUrl=t,this._queue=new ZC(this._boundLoadResource,i),this._queue.pause(),this._middleware=e._defaultMiddleware.slice()}return Object.defineProperty(e.prototype,"baseUrl",{get(){return this._baseUrl},set(e){for(;e.length&&"/"===e.charAt(e.length-1);)e=e.slice(0,-1);this._baseUrl=e},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){if(Array.isArray(e)){for(var i=0;i<e.length;++i)this.add(e[i]);return this}var r="",n="",a=this._baseUrl,o={url:""};if("object"==typeof e?(r=e.url,n=e.name||e.url,a=e.baseUrl||a,o=e):(n=e,r="string"==typeof t?t:n),!r)throw new Error("You must specify the `url` property.");if(this.loading&&!o.parentResource)throw new Error("Cannot add root resources while the loader is running.");if(this.resources[n])throw new Error(`Resource named "${n}" already exists.`);r=this._prepareUrl(r,a),o.url=r;var s=new KC(n,o);if(this.resources[n]=s,"function"==typeof o.onComplete&&s.onAfterMiddleware.once(o.onComplete),this.loading){var l=o.parentResource,u=[];for(i=0;i<l.children.length;++i)l.children[i].isComplete||u.push(l.children[i]);var c=l.progressChunk*(u.length+1)/(u.length+2);l.children.push(s),l.progressChunk=c;for(i=0;i<u.length;++i)u[i].progressChunk=c;s.progressChunk=c}return this._queue.push(s),this},e.prototype.use=function(t,i){return void 0===i&&(i=e.DefaultMiddlewarePriority),this._middleware.push({fn:t,priority:i}),this._middleware.sort((function(e,t){return e.priority-t.priority})),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.reset(),this._queue.pause(),this.resources){var t=this.resources[e];t&&(t._onCompleteBinding&&t._onCompleteBinding.detach(),t.isLoading&&t.abort())}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue.length(),i=0;i<this._queue.length();++i)this._queue.getTask(i).data.progressChunk=t;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get(){return this._queue.concurrency},set(e){this._queue.concurrency=e},enumerable:!0,configurable:!0}),e.prototype.addUrlResolver=function(e){return this._urlResolvers.push(e),this},e.prototype._prepareUrl=function(e,t){var i=qC(e,{strictMode:!0});if(this._urlResolvers.forEach((function(t){e=t(e,i),i=qC(e,{strictMode:!0})})),i.protocol||0===e.indexOf("//")||(e=t.length&&"/"!==e.charAt(0)?`${t}/${e}`:t+e),this.defaultQueryString){var r=JC.exec(e);if(r){var n=r[0];-1!==(e=e.substr(0,e.length-n.length)).indexOf("?")?e+=`&${this.defaultQueryString}`:e+=`?${this.defaultQueryString}`,e+=n}}return e},e.prototype._loadResource=function(e,t){e._dequeue=t,e._onCompleteBinding=e.onComplete.once(this._onLoad,this),e.load()},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onCompleteBinding=null,this._resourcesParsing.push(e),e._dequeue(),XC(this._middleware,(function(i,r){i.fn.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},e.use=function(t,i){return void 0===i&&(i=e.DefaultMiddlewarePriority),e._defaultMiddleware.push({fn:t,priority:i}),e._defaultMiddleware.sort((function(e,t){return e.priority-t.priority})),e},e.DefaultMiddlewarePriority=50,e._defaultMiddleware=[],e}();Object.defineProperties(eS,{AbstractLoadStrategy:{get:()=>FC},ImageLoadStrategy:{get:()=>zC},XhrLoadStrategy:{get:()=>$C},Resource:{get:()=>KC},ResourceType:{get:()=>jC},ResourceState:{get:()=>HC},async:{get:()=>({AsyncQueue:ZC,eachSeries:XC})},getExtension:{get:()=>YC}});var tS=KC,iS={Unknown:0,Buffer:1,Blob:2,Json:3,Xml:4,Image:5,Audio:6,Video:7,Text:8};class rS{static use(e,t){e.data&&e.type===iS.Image&&(e.texture=$w.fromLoader(e.data,e.url,e.name)),t()}}class nS extends eS{constructor(e,t){super(e,t);for(var i=0;i<nS._plugins.length;++i){var r=nS._plugins[i],{use:n}=r;n&&this.use(n)}this._protected=!1}destroy(){this._protected||this.reset()}static get shared(){var e=nS._shared;return e||((e=new nS)._protected=!0,nS._shared=e),e}static registerPlugin(e){return nS._plugins.push(e),e.add&&e.add(),nS}}nS._plugins=[],nS.registerPlugin(rS);class aS{constructor(e,t,i=null){this._texture=e instanceof $w?e:null,this.baseTexture=e instanceof Uw?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){var{scale:t}=this.data.meta,i=WE(e,null);return null===i&&(i=void 0!==t?parseFloat(t):1),1!==i&&this.baseTexture.setResolution(i),i}parse(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=aS.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()}_processFrames(e){for(var t=e,i=aS.BATCH_SIZE;t-e<i&&t<this._frameKeys.length;){var r=this._frameKeys[t],n=this._frames[r],a=n.frame;if(a){var o=null,s=null,l=!1!==n.trimmed&&n.sourceSize?n.sourceSize:n.frame,u=new KE(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=n.rotated?new KE(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new KE(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==n.trimmed&&n.spriteSourceSize&&(s=new KE(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[r]=new $w(this.baseTexture,o,u,s,n.rotated?2:0,n.anchor),$w.addToCache(this.textures[r],r)}t++}}_processAnimations(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var i=0;i<e[t].length;i++){var r=e[t][i];this.animations[t].push(this.textures[r])}}}_parseComplete(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*aS.BATCH_SIZE),this._batchIndex++,setTimeout((()=>{this._batchIndex*aS.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())}),0)}destroy(e=!1){var t;for(var i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(null===(t=this._texture)||void 0===t||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null}}aS.BATCH_SIZE=1e3;var oS=3;class sS{static use(e,t){var i=this,r=`${e.name}_image`;if(e.data&&e.type===oS&&e.data.frames&&!i.resources[r]){var n={name:r,url:sS.getResourcePath(e,i.baseUrl),crossOrigin:"anonymous",bindingScreen:e.bindingScreen,parentResource:e,onComplete:i=>{if(i.error)t(i.error);else{var r=new aS(i.texture,e.data,e.url);r.parse((()=>{e.spritesheet=r,e.textures=r.textures,t()}))}}};i.add(n)}else t()}static getResourcePath(e,t){var i=e.url.replace(t,"");return(i=i.slice(0,i.lastIndexOf("/")+1))+e.data.meta.image}}var lS=new iw,uS=new Uint16Array([0,1,2,0,2,3]);class cS extends Ew{constructor(e){super(),this._anchor=new rw(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=xb.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||$w.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=uS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Vb.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=kE(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=kE(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,i=t.a,r=t.b,n=t.c,a=t.d,o=t.tx,s=t.ty,l=this.vertexData,u=e.trim,c=e.orig,d=this._anchor,h=0,p=0,f=0,g=0;if(u?(h=(p=u.x-d._x*c.width)+u.width,f=(g=u.y-d._y*c.height)+u.height):(h=(p=-d._x*c.width)+c.width,f=(g=-d._y*c.height)+c.height),l[0]=i*p+n*g+o,l[1]=a*g+r*p+s,l[2]=i*h+n*g+o,l[3]=a*g+r*h+s,l[4]=i*h+n*f+o,l[5]=a*f+r*h+s,l[6]=i*p+n*f+o,l[7]=a*f+r*p+s,this._roundPixels)for(var _=Vb.RESOLUTION,m=0;m<l.length;++m)l[m]=Math.round((l[m]*_|0)/_)}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,i=e.orig,r=this._anchor,n=this.transform.worldTransform,a=n.a,o=n.b,s=n.c,l=n.d,u=n.tx,c=n.ty,d=-r._x*i.width,h=d+i.width,p=-r._y*i.height,f=p+i.height;t[0]=a*d+s*p+u,t[1]=l*p+o*d+c,t[2]=a*h+s*p+u,t[3]=l*p+o*h+c,t[4]=a*h+s*f+u,t[5]=l*f+o*h+c,t[6]=a*d+s*f+u,t[7]=l*f+o*d+c}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new KE),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,lS);var t=this._texture.orig.width,i=this._texture.orig.height,r=-t*this.anchor.x,n=0;return lS.x>=r&&lS.x<r+t&&(n=-i*this.anchor.y,lS.y>=n&&lS.y<n+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var t="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){var i=e instanceof $w?e:$w.from(e,t);return new cS(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.round(Math.abs(this.scale.x)*this._texture.orig.width*100)/100}set width(e){e=Math.round(100*e)/100;var t=kE(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.round(Math.abs(this.scale.y)*this._texture.orig.height*100)/100}set height(e){e=Math.round(100*e)/100;var t=kE(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||$w.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}var dS=new nw;yw.prototype._cacheAsBitmap=!1,yw.prototype._cacheData=null;class hS{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(yw.prototype,{cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new hS),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),yw.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},yw.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.batch.flush();var i=this.getLocalBounds(null,!0).clone();if(this.filters){var r=this.filters[0].padding;i.pad(r)}i.ceil(Vb.RESOLUTION);var n=e.renderTexture.current,a=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),s=e.projection.transform,l=Zw.create({width:i.width,height:i.height}),u=`cacheAsBitmap_${NE()}`;this._cacheData.textureCacheId=u,Uw.addToCache(l.baseTexture,u),$w.addToCache(l,u);var c=this.transform.localTransform.copyTo(dS).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,l,!0,c,!1),e.projection.transform=s,e.renderTexture.bind(n,a,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new cS(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-i.x/i.width,d.anchor.y=-i.y/i.height,d.alpha=t,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},yw.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},yw.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var r=e.context,n=e._projTransform;t.ceil(Vb.RESOLUTION);var a=Zw.create({width:t.width,height:t.height}),o=`cacheAsBitmap_${NE()}`;this._cacheData.textureCacheId=o,Uw.addToCache(a.baseTexture,o),$w.addToCache(a,o);var s=dS;this.transform.localTransform.copyTo(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,a,!0,s,!1),e.context=r,e._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var l=new cS(a);l.transform.worldTransform=this.transform.worldTransform,l.anchor.x=-t.x/t.width,l.anchor.y=-t.y/t.height,l.alpha=i,l._bounds=this._bounds,this._cacheData.sprite=l,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=l.containsPoint.bind(l)}},yw.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},yw.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},yw.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Uw.removeFromCache(this._cacheData.textureCacheId),$w.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},yw.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};var pS,fS,gS={float(e,t,i,r){i!==r&&(i.v=r,e.uniform1f(t,r))},vec2(e,t,i,r){i[0]===r[0]&&i[1]===r[1]||(i[0]=r[0],i[1]=r[1],e.uniform2f(t,r[0],r[1]))},vec3(e,t,i,r){i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]||(i[0]=r[0],i[1]=r[1],i[2]=r[2],e.uniform3f(t,r[0],r[1],r[2]))},int(e,t,i,r){e.uniform1i(t,r)},ivec2(e,t,i,r){e.uniform2i(t,r[0],r[1])},ivec3(e,t,i,r){e.uniform3i(t,r[0],r[1],r[2])},ivec4(e,t,i,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},bool(e,t,i,r){e.uniform1i(t,r)},bvec2(e,t,i,r){e.uniform2i(t,r[0],r[1])},bvec3(e,t,i,r){e.uniform3i(t,r[0],r[1],r[2])},bvec4(e,t,i,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},mat2(e,t,i,r){e.uniformMatrix2fv(t,!1,r)},mat3(e,t,i,r){e.uniformMatrix3fv(t,!1,r)},mat4(e,t,i,r){e.uniformMatrix4fv(t,!1,r)},sampler2D(e,t,i,r){e.uniform1i(t,r)},samplerCube(e,t,i,r){e.uniform1i(t,r)},sampler2DArray(e,t,i,r){e.uniform1i(t,r)}},_S={float(e,t,i,r){e.uniform1fv(t,r)},vec2(e,t,i,r){e.uniform2fv(t,r)},vec3(e,t,i,r){e.uniform3fv(t,r)},vec4(e,t,i,r){e.uniform4fv(t,r)},int(e,t,i,r){e.uniform1iv(t,r)},ivec2(e,t,i,r){e.uniform2iv(t,r)},ivec3(e,t,i,r){e.uniform3iv(t,r)},ivec4(e,t,i,r){e.uniform4iv(t,r)},bool(e,t,i,r){e.uniform1iv(t,r)},bvec2(e,t,i,r){e.uniform2iv(t,r)},bvec3(e,t,i,r){e.uniform3iv(t,r)},bvec4(e,t,i,r){e.uniform4iv(t,r)},sampler2D(e,t,i,r){e.uniform1iv(t,r)},samplerCube(e,t,i,r){e.uniform1iv(t,r)},sampler2DArray(e,t,i,r){e.uniform1iv(t,r)}};!function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"}(pS||(pS={})),function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"}(fS||(fS={}));var mS={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;var i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class vS{constructor(e={}){this.color=16777215,this.alpha=1,this.matrix=null,this.visible=!1,this.bindingScreen=e.bindingScreen,this.reset()}clone(){var e=new vS({bindingScreen:this.bindingScreen});return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=$w.getWHITE(this.bindingScreen),this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}var yS={build(e){e.points=e.shape.points.slice()},triangulate(e,t){var i=e.points,r=e.holes,n=t.points,a=t.indices;if(i.length>=6){for(var o=[],s=0;s<r.length;s++){var l=r[s];o.push(i.length/2),i=i.concat(l.points)}var u=Zb(i,o,2);if(!u)return;for(var c=n.length/2,d=0;d<u.length;d+=3)a.push(u[d]+c),a.push(u[d+1]+c),a.push(u[d+2]+c);for(var h=0;h<i.length;h++)n.push(i[h])}}},AS={build(e){var t,i,r=e.shape,n=e.points,a=r.x,o=r.y;if(n.length=0,e.type===VE.CIRC)t=r.radius,i=r.radius;else{var s=e.shape;t=s.width,i=s.height}if(0!==t&&0!==i){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(t+i));l/=2.3;for(var u=2*Math.PI/l,c=0;c<l-.5;c++)n.push(a+Math.sin(-u*c)*t,o+Math.cos(-u*c)*i);n.push(n[0],n[1])}},triangulate(e,t){var i=e.points,r=t.points,n=t.indices,a=r.length/2,o=a,s=e.shape,l=e.matrix,u=s.x,c=s.y;r.push(e.matrix?l.a*u+l.c*c+l.tx:u,e.matrix?l.b*u+l.d*c+l.ty:c);for(var d=0;d<i.length;d+=2)r.push(i[d],i[d+1]),n.push(a++,o,a)}},bS={build(e){var t=e.shape,i=t.x,r=t.y,n=t.width,a=t.height,o=e.points;o.length=0,o.push(i,r,i+n,r,i+n,r+a,i,r+a)},triangulate(e,t){var i=e.points,r=t.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function ES(e,t,i){return e+(t-e)*i}function wS(e,t,i,r,n,a,o=[]){for(var s=o,l=0,u=0,c=0,d=0,h=0,p=0,f=0,g=0;f<=20;++f)l=ES(e,i,g=f/20),u=ES(t,r,g),c=ES(i,n,g),d=ES(r,a,g),h=ES(l,c,g),p=ES(u,d,g),s.push(h,p);return s}var TS={build(e){var t=e.shape,i=e.points,r=t.x,n=t.y,a=t.width,o=t.height,s=Math.max(0,Math.min(t.radius,Math.min(a,o)/2));i.length=0,s?(wS(r,n+s,r,n,r+s,n,i),wS(r+a-s,n,r+a,n,r+a,n+s,i),wS(r+a,n+o-s,r+a,n+o,r+a-s,n+o,i),wS(r+s,n+o,r,n+o,r,n+o-s,i)):i.push(r,n,r+a,n,r+a,n+o,r,n+o)},triangulate(e,t){for(var i=e.points,r=t.points,n=t.indices,a=r.length/2,o=Zb(i,null,2),s=0,l=o.length;s<l;s+=3)n.push(o[s]+a),n.push(o[s+1]+a),n.push(o[s+2]+a);for(var u=0,c=i.length;u<c;u++)r.push(i[u],i[++u])}};function CS(e,t,i,r,n,a,o,s){var l,u;o?(l=r,u=-i):(l=-r,u=i);var c=e-i*n+l,d=t-r*n+u,h=e+i*a+l,p=t+r*a+u;return s.push(c,d),s.push(h,p),2}function SS(e,t,i,r,n,a,o,s){var l=i-e,u=r-t,c=Math.atan2(l,u),d=Math.atan2(n-e,a-t);s&&c<d?c+=2*Math.PI:!s&&c>d&&(d+=2*Math.PI);var h=c,p=d-c,f=Math.abs(p),g=Math.sqrt(l*l+u*u),_=1+(15*f*Math.sqrt(g)/Math.PI>>0),m=p/_;if(h+=m,s){o.push(e,t),o.push(i,r);for(var v=1,y=h;v<_;v++,y+=m)o.push(e,t),o.push(e+Math.sin(y)*g,t+Math.cos(y)*g);o.push(e,t),o.push(n,a)}else{o.push(i,r),o.push(e,t);for(var A=1,b=h;A<_;A++,b+=m)o.push(e+Math.sin(b)*g,t+Math.cos(b)*g),o.push(e,t);o.push(n,a),o.push(e,t)}return 2*_}function IS(e,t){e.lineStyle.native?function(e,t){var i=0,r=e.shape,n=e.points||r.points,a=r.type!==VE.POLY||r.closeStroke;if(0!==n.length){var o=t.points,s=t.indices,l=n.length/2,u=o.length/2,c=u;for(o.push(n[0],n[1]),i=1;i<l;i++)o.push(n[2*i],n[2*i+1]),s.push(c,c+1),c++;a&&s.push(c,u)}}(e,t):function(e,t){var i=e.shape,r=e.points||i.points.slice(),n=t.closePointEps;if(0!==r.length){var a=e.lineStyle,o=new iw(r[0],r[1]),s=new iw(r[r.length-2],r[r.length-1]),l=i.type!==VE.POLY||i.closeStroke,u=Math.abs(o.x-s.x)<n&&Math.abs(o.y-s.y)<n;if(l){r=r.slice(),u&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(o.x+s.x),d=.5*(s.y+o.y);r.unshift(c,d),r.push(c,d)}var h=t.points,p=r.length/2,f=r.length,g=h.length/2,_=a.width/2,m=_*_,v=a.miterLimit*a.miterLimit,y=r[0],A=r[1],b=r[2],E=r[3],w=0,T=0,C=-(A-E),S=y-b,I=0,x=0,P=Math.sqrt(C*C+S*S);C/=P,S/=P,C*=_,S*=_;var D=a.alignment,R=2*(1-D),O=2*D;l||(a.cap===fS.ROUND?f+=SS(y-C*(R-O)*.5,A-S*(R-O)*.5,y-C*R,A-S*R,y+C*O,A+S*O,h,!0)+2:a.cap===fS.SQUARE&&(f+=CS(y,A,C,S,R,O,!0,h))),h.push(y-C*R,A-S*R),h.push(y+C*O,A+S*O);for(var k=1;k<p-1;++k){y=r[2*(k-1)],A=r[2*(k-1)+1],b=r[2*k],E=r[2*k+1],w=r[2*(k+1)],T=r[2*(k+1)+1],C=-(A-E),S=y-b,C/=P=Math.sqrt(C*C+S*S),S/=P,C*=_,S*=_,I=-(E-T),x=b-w,I/=P=Math.sqrt(I*I+x*x),x/=P,I*=_,x*=_;var M=b-y,N=A-E,L=b-w,B=T-E,F=N*L-B*M,U=F<0;if(Math.abs(F)<.1)h.push(b-C*R,E-S*R),h.push(b+C*O,E+S*O);else{var W=(-C+y)*(-S+E)-(-C+b)*(-S+A),G=(-I+w)*(-x+E)-(-I+b)*(-x+T),V=(M*G-L*W)/F,j=(B*W-N*G)/F,H=(V-b)*(V-b)+(j-E)*(j-E),z=b+(V-b)*R,Y=E+(j-E)*R,$=b-(V-b)*O,q=E-(j-E)*O,Q=U?R:O;H<=Math.min(M*M+N*N,L*L+B*B)+Q*Q*m?a.join===pS.BEVEL||H/m>v?(U?(h.push(z,Y),h.push(b+C*O,E+S*O),h.push(z,Y),h.push(b+I*O,E+x*O)):(h.push(b-C*R,E-S*R),h.push($,q),h.push(b-I*R,E-x*R),h.push($,q)),f+=2):a.join===pS.ROUND?U?(h.push(z,Y),h.push(b+C*O,E+S*O),f+=SS(b,E,b+C*O,E+S*O,b+I*O,E+x*O,h,!0)+4,h.push(z,Y),h.push(b+I*O,E+x*O)):(h.push(b-C*R,E-S*R),h.push($,q),f+=SS(b,E,b-C*R,E-S*R,b-I*R,E-x*R,h,!1)+4,h.push(b-I*R,E-x*R),h.push($,q)):(h.push(z,Y),h.push($,q)):(h.push(b-C*R,E-S*R),h.push(b+C*O,E+S*O),a.join===pS.BEVEL||H/m>v||(a.join===pS.ROUND?f+=U?SS(b,E,b+C*O,E+S*O,b+I*O,E+x*O,h,!0)+2:SS(b,E,b-C*R,E-S*R,b-I*R,E-x*R,h,!1)+2:(U?(h.push($,q),h.push($,q)):(h.push(z,Y),h.push(z,Y)),f+=2)),h.push(b-I*R,E-x*R),h.push(b+I*O,E+x*O),f+=2)}}y=r[2*(p-2)],A=r[2*(p-2)+1],b=r[2*(p-1)],C=-(A-(E=r[2*(p-1)+1])),S=y-b,C/=P=Math.sqrt(C*C+S*S),S/=P,C*=_,S*=_,h.push(b-C*R,E-S*R),h.push(b+C*O,E+S*O),l||(a.cap===fS.ROUND?f+=SS(b-C*(R-O)*.5,E-S*(R-O)*.5,b-C*R,E-S*R,b+C*O,E+S*O,h,!1)+2:a.cap===fS.SQUARE&&(f+=CS(b,E,C,S,R,O,!1,h)));for(var Z=t.indices,K=mS.epsilon*mS.epsilon,X=g;X<f+g-2;++X)y=h[2*X],A=h[2*X+1],b=h[2*(X+1)],E=h[2*(X+1)+1],w=h[2*(X+2)],T=h[2*(X+2)+1],Math.abs(y*(E-T)+b*(T-A)+w*(A-E))<K||Z.push(X,X+1,X+2)}}(e,t)}class xS{static curveTo(e,t,i,r,n,a){var o=a[a.length-2],s=a[a.length-1]-t,l=o-e,u=r-t,c=i-e,d=Math.abs(s*c-l*u);if(d<1e-8||0===n)return a[a.length-2]===e&&a[a.length-1]===t||a.push(e,t),null;var h=s*s+l*l,p=u*u+c*c,f=s*u+l*c,g=n*Math.sqrt(h)/d,_=n*Math.sqrt(p)/d,m=g*f/h,v=_*f/p,y=g*c+_*l,A=g*u+_*s,b=l*(_+m),E=s*(_+m),w=c*(g+v),T=u*(g+v);return{cx:y+e,cy:A+t,radius:n,startAngle:Math.atan2(E-A,b-y),endAngle:Math.atan2(T-A,w-y),anticlockwise:l*u>c*s}}static arc(e,t,i,r,n,a,o,s,l){for(var u=o-a,c=mS._segmentsCount(Math.abs(u)*n,40*Math.ceil(Math.abs(u)/qE)),d=u/(2*c),h=2*d,p=Math.cos(d),f=Math.sin(d),g=c-1,_=g%1/g,m=0;m<=g;++m){var v=d+a+h*(m+_*m),y=Math.cos(v),A=-Math.sin(v);l.push((p*y+f*A)*n+i,(p*-A+f*y)*n+r)}}}class PS{static curveLength(e,t,i,r,n,a,o,s){for(var l=0,u=0,c=0,d=0,h=0,p=0,f=0,g=0,_=0,m=0,v=0,y=e,A=t,b=1;b<=10;++b)m=y-(g=(f=(p=(h=1-(u=b/10))*h)*h)*e+3*p*u*i+3*h*(c=u*u)*n+(d=c*u)*o),v=A-(_=f*t+3*p*u*r+3*h*c*a+d*s),y=g,A=_,l+=Math.sqrt(m*m+v*v);return l}static curveTo(e,t,i,r,n,a,o){var s=o[o.length-2],l=o[o.length-1];o.length-=2;var u=mS._segmentsCount(PS.curveLength(s,l,e,t,i,r,n,a)),c=0,d=0,h=0,p=0,f=0;o.push(s,l);for(var g=1,_=0;g<=u;++g)h=(d=(c=1-(_=g/u))*c)*c,f=(p=_*_)*_,o.push(h*s+3*d*_*e+3*c*p*i+f*n,h*l+3*d*_*t+3*c*p*r+f*a)}}class DS{static curveLength(e,t,i,r,n,a){var o=e-2*i+n,s=t-2*r+a,l=2*i-2*e,u=2*r-2*t,c=4*(o*o+s*s),d=4*(o*l+s*u),h=l*l+u*u,p=2*Math.sqrt(c+d+h),f=Math.sqrt(c),g=2*c*f,_=2*Math.sqrt(h),m=d/f;return(g*p+f*d*(p-_)+(4*h*c-d*d)*Math.log((2*f+m+p)/(m+_)))/(4*g)}static curveTo(e,t,i,r,n){for(var a=n[n.length-2],o=n[n.length-1],s=mS._segmentsCount(DS.curveLength(a,o,e,t,i,r)),l=0,u=0,c=1;c<=s;++c){var d=c/s;l=a+(e-a)*d,u=o+(t-o)*d,n.push(l+(e+(i-e)*d-l)*d,u+(t+(r-t)*d-u)*d)}}}class RS{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}var OS={[VE.POLY]:yS,[VE.CIRC]:AS,[VE.ELIP]:AS,[VE.RECT]:bS,[VE.RREC]:TS},kS=[],MS=[],NS={buildPoly:yS,buildCircle:AS,buildRectangle:bS,buildRoundedRectangle:TS,FILL_COMMANDS:OS,BATCH_POOL:kS,DRAW_CALL_POOL:MS,buildLine:IS,ArcUtils:xS,BezierUtils:PS,QuadraticUtils:DS,BatchPart:RS};class LS{constructor(e,t=null,i=null,r=null){this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=r,this.type=e.type,this.points=[],this.holes=[]}clone(){return new LS(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}var BS=new iw,FS=new vw;class US extends DC{constructor(){super(),this.uvsFloat32=null,this.indicesUint16=null,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.dirty=0,this.batchDirty=-1,this.cacheDirty=-1,this.clearDirty=0,this.drawCalls=[],this.batches=[],this.shapeIndex=0,this._bounds=new vw,this.boundsDirty=-1,this.boundsPadding=0,this.batchable=!1,this.indicesUint16=null,this.uvsFloat32=null,this.closePointEps=1e-4}get bounds(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),MS.push(this.drawCalls[e]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var i=this.batches[t];i.reset(),kS.push(i)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,r=null){var n=new LS(e,t,i,r);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;var i=new LS(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){for(var t=this.graphicsData,i=0;i<t.length;++i){var r=t[i];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(e,BS):BS.copyFrom(e),r.shape.contains(BS.x,BS.y)))){var n=!1;if(r.holes)for(var a=0;a<r.holes.length;a++){if(r.holes[a].shape.contains(BS.x,BS.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(e){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var t=this.uvs,i=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var a=this.shapeIndex;a<i.length;a++){this.shapeIndex++;var o=i[a],s=o.fillStyle,l=o.lineStyle;OS[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var c=0===u?s:l;if(c.visible){var d=c.texture.baseTexture,h=this.indices.length,p=this.points.length/2;d.wrapMode=Mb.REPEAT,0===u?this.processFill(o):this.processLine(o);var f=this.points.length/2-p;0!==f&&(r&&!this._compareStyles(n,c)&&(r.end(h,p),r=null),r||((r=kS.pop()||new RS).begin(c,h,p),this.batches.push(r),n=c),this.addUvs(this.points,t,c.texture,p,f,c.matrix))}}}var g=this.indices.length,_=this.points.length/2;if(r&&r.end(g,_),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var m=_>65535&&e;this.indicesUint16=m?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0}_compareStyles(e,t){return!(!e||!t)&&(e.texture.baseTexture===t.texture.baseTexture&&(e.color+e.alpha===t.color+t.alpha&&!!e.native==!!t.native))}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var i=this.graphicsData[e],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,i=e.length;t<i;t++)for(var r=e[t],n=0;n<r.size;n++){var a=r.start+n;this.indicesUint16[a]=this.indicesUint16[a]-r.attribStart}}isBatchable(){if(this.points.length>131070)return!1;for(var e=this.batches,t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*US.BATCHABLE_SIZE}buildDrawCalls(){for(var e=++Uw._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),MS.push(this.drawCalls[t]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=MS.pop();n||((n=new CC).texArray=new SC),n.texArray.count=0,n.start=0,n.size=0,n.type=Pb.TRIANGLES;var a=0,o=null,s=0,l=!1,u=Pb.TRIANGLES,c=0;this.drawCalls.push(n);for(var d=0;d<this.batches.length;d++){var h=this.batches[d],p=h.style,f=p.texture.baseTexture;l!==!!p.native&&(u=(l=!!p.native)?Pb.LINES:Pb.TRIANGLES,o=null,a=8,e++),o!==f&&(o=f,f._batchEnabled!==e&&(8===a&&(e++,a=0,n.size>0&&((n=MS.pop())||((n=new CC).texArray=new SC),this.drawCalls.push(n)),n.start=c,n.size=0,n.texArray.count=0,n.type=u),f.touched=1,f._batchEnabled=e,f._batchLocation=a,f.wrapMode=10497,n.texArray.elements[n.texArray.count++]=f,a++)),n.size+=h.size,c+=h.size,s=f._batchLocation,this.addColors(i,p.color,p.alpha,h.attribSize),this.addTextureIds(r,s,h.attribSize)}Uw._globalBatch=e,this.packAttributes()}packAttributes(){for(var e=this.points,t=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*e.length*4),a=new Float32Array(n),o=new Uint32Array(n),s=0,l=0;l<e.length/2;l++)a[s++]=e[2*l],a[s++]=e[2*l+1],a[s++]=t[2*l],a[s++]=t[2*l+1],o[s++]=i[l],a[s++]=r[l];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?(this.processHoles(e.holes),yS.triangulate(e,this)):OS[e.type].triangulate(e,this)}processLine(e){IS(e,this);for(var t=0;t<e.holes.length;t++)IS(e.holes[t],this)}processHoles(e){for(var t=0;t<e.length;t++){var i=e[t];OS[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){var e=this._bounds,t=FS,i=nw.IDENTITY;this._bounds.clear(),t.clear();for(var r=0;r<this.graphicsData.length;r++){var n=this.graphicsData[r],a=n.shape,o=n.type,s=n.lineStyle,l=n.matrix||nw.IDENTITY,u=0;if(s&&s.visible){var c=s.alignment;u=s.width,o===VE.POLY?u*=.5+Math.abs(.5-c):u*=Math.max(0,c)}if(i!==l&&(t.isEmpty()||(e.addBoundsMatrix(t,i),t.clear()),i=l),o===VE.RECT||o===VE.RREC){var d=a;t.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,u,u)}else if(o===VE.CIRC){var h=a;t.addFramePad(h.x,h.y,h.x,h.y,h.radius+u,h.radius+u)}else if(o===VE.ELIP){var p=a;t.addFramePad(p.x,p.y,p.x,p.y,p.width+u,p.height+u)}else{var f=a;e.addVerticesMatrix(i,f.points,0,f.points.length,u,u)}}t.isEmpty()||e.addBoundsMatrix(t,i),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(var i=0;i<e.length/2;i++){var r=e[2*i],n=e[2*i+1];e[2*i]=t.a*r+t.c*n+t.tx,e[2*i+1]=t.b*r+t.d*n+t.ty}}addColors(e,t,i,r){for(var n=SE((t>>16)+(65280&t)+((255&t)<<16),i);r-- >0;)e.push(n)}addTextureIds(e,t,i){for(;i-- >0;)e.push(t)}addUvs(e,t,i,r,n,a=null){for(var o=0,s=t.length,l=i.frame;o<n;){var u=e[2*(r+o)],c=e[2*(r+o)+1];if(a){var d=a.a*u+a.c*c+a.tx;c=a.b*u+a.d*c+a.ty,u=d}o++,t.push(u/l.width,c/l.height)}var h=i.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,i,s,n)}adjustUvs(e,t,i,r){for(var n=t.baseTexture,a=1e-6,o=i+2*r,s=t.frame,l=s.width/n.width,u=s.height/n.height,c=s.x/s.width,d=s.y/s.height,h=Math.floor(e[i]+a),p=Math.floor(e[i+1]+a),f=i+2;f<o;f+=2)h=Math.min(h,Math.floor(e[f]+a)),p=Math.min(p,Math.floor(e[f+1]+a));c-=h,d-=p;for(var g=i;g<o;g+=2)e[g]=(e[g]+c)*l,e[g+1]=(e[g+1]+d)*u}}US.BATCHABLE_SIZE=100;class WS extends vS{constructor(e={}){super(e),this.width=0,this.alignment=.5,this.native=!1,this.cap=fS.BUTT,this.join=pS.MITER,this.miterLimit=10}clone(){var e=new WS({bindingScreen:this.bindingScreen});return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}var GS,VS=new Float32Array(3),jS={};class HS extends Ew{constructor(e=null,t={}){super(),this._geometry=e||new US,this._geometry.refCount++,this.bindingScreen=t.bindingScreen,this.shader=null,this.state=QT.for2d(),this._fillStyle=new vS(t),this._lineStyle=new WS(t),this._matrix=null,this._holeMode=!1,this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this.pluginName="batch",this._transformID=-1,this.tint=16777215,this.blendMode=xb.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new HS(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(e){this._tint=e}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null){if("number"==typeof e){var t=arguments;e={width:t[0]||0,color:t[1]||0,alpha:void 0!==t[2]?t[2]:1,alignment:void 0!==t[3]?t[3]:.5,native:!!t[4]}}return this.lineTextureStyle(e)}lineTextureStyle(e){if("number"==typeof e){var[t,i,r,n,a,o,s]=arguments;e={width:t,texture:i,color:r,alpha:n,matrix:a,alignment:o,native:s},Object.keys(e).forEach((t=>void 0===e[t]&&delete e[t]))}e=Object.assign({width:0,texture:$w.getWHITE(this.bindingScreen),color:e&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:fS.BUTT,join:pS.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();var l=e.width>0&&e.alpha>0;return l?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:l},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new ew,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new ew,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===e&&n===t||i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),DS.curveTo(e,t,i,r,n),this}bezierCurveTo(e,t,i,r,n,a){return this._initCurve(),PS.curveTo(e,t,i,r,n,a,this.currentPath.points),this}arcTo(e,t,i,r,n){this._initCurve(e,t);var a=this.currentPath.points,o=xS.curveTo(e,t,i,r,n,a);if(o){var{cx:s,cy:l,radius:u,startAngle:c,endAngle:d,anticlockwise:h}=o;this.arc(s,l,u,c,d,h)}return this}arc(e,t,i,r,n,a=!1){if(r===n)return this;if(!a&&n<=r?n+=qE:a&&r<=n&&(r+=qE),0===n-r)return this;var o=e+Math.cos(r)*i,s=t+Math.sin(r)*i,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-o),d=Math.abs(u[u.length-1]-s);c<l&&d<l||u.push(o,s)}else this.moveTo(o,s),u=this.currentPath.points;return xS.arc(o,s,e,t,i,r,n,a,u),this}beginFill(e=0,t=1){return this.beginTextureFill({texture:$w.getWHITE(this.bindingScreen),color:e,alpha:t})}beginTextureFill(e){if(e instanceof $w){var[t,i,r,n]=arguments;e={texture:t,color:i,alpha:r,matrix:n},Object.keys(e).forEach((t=>void 0===e[t]&&delete e[t]))}e=Object.assign({texture:$w.getWHITE(this.bindingScreen),color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();var a=e.alpha>0;return a?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:a},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,r){return this.drawShape(new KE(e,t,i,r))}drawRoundedRect(e,t,i,r,n){return this.drawShape(new tw(e,t,i,r,n))}drawCircle(e,t,i){return this.drawShape(new XE(e,t,i))}drawEllipse(e,t,i,r){return this.drawShape(new JE(e,t,i,r))}drawPolygon(...e){var t,i=!0,r=e[0];r.points?(i=r.closeStroke,t=r.points):t=Array.isArray(e[0])?e[0]:e;var n=new ew(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===VE.RECT&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();var t=this._geometry,i=e.context.supports.uint32Indices;t.updateBatches(i),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){var e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(var r=0;r<i;r++){var n=e.batches[r],a=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),l={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*n.start,n.size),uvs:s,_batchRGB:EE(a),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=l}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,i=this.batches.length;t<i;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}_renderDirect(e){var t=this._resolveDirectShader(e),i=this._geometry,r=this.tint,n=this.worldAlpha,a=t.uniforms,o=i.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(r>>16&255)/255*n,a.tint[1]=(r>>8&255)/255*n,a.tint[2]=(255&r)/255*n,a.tint[3]=n,e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(var s=0,l=o.length;s<l;s++)this._renderDrawCallDirect(e,i.drawCalls[s])}_renderDrawCallDirect(e,t){for(var{texArray:i,type:r,size:n,start:a}=t,o=i.count,s=0;s<o;s++)e.texture.bind(i.elements[s],s);e.geometry.draw(r,n,a)}_resolveDirectShader(e){var t=this.shader,i=this.pluginName;if(!t){if(!jS[i]){for(var r=e.plugins.batch.MAX_TEXTURES,n=new Int32Array(r),a=0;a<r;a++)n[a]=a;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new nw,default:cT.from({uSamplers:n},!0)},s=e.plugins[i]._shader.program;jS[i]=new qT(s,o)}t=jS[i]}return t}_calculateBounds(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var{minX:t,minY:i,maxX:r,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,r,n)}}containsPoint(e){return this.worldTransform.applyInverse(e,HS._TEMP_POINT),this._geometry.containsPoint(HS._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var e=EE(this.tint,VS),t=0;t<this.batches.length;t++){var i=this.batches[t],r=i._batchRGB,n=(e[0]*r[0]*255<<16)+(e[1]*r[1]*255<<8)+(0|e[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}}calculateVertices(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,i=t.a,r=t.b,n=t.c,a=t.d,o=t.tx,s=t.ty,l=this._geometry.points,u=this.vertexData,c=0,d=0;d<l.length;d+=2){var h=l[d],p=l[d+1];u[c++]=i*h+n*p+o,u[c++]=a*p+r*h+s}}}closePath(){var e=this.currentPath;return e&&(e.closeStroke=!0),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}}HS._TEMP_POINT=new iw,function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(GS||(GS={}));var zS={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:GS.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"middle",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},YS=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],$S="";class qS{constructor(e){this.styleID=0,this.reset(),KS(this,e,e)}clone(){var e={};return KS(e,this,zS),new qS(e)}reset(){KS(this,zS,zS)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){var t=ZS(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){var t=ZS(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){var t=ZS(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){var e="number"==typeof this.fontSize?Math.round(10*this.fontSize)/10+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&YS.indexOf(r)<0&&(r=`"${r}"`),t[i]=r}var n=`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`;return $S&&n!==$S&&console.error("发现使用字体不一样，可能会导致在小游戏中增加内存使用，请尽可能使用同等大小的同种字体，用scale模拟字体大小，或者尽可能用图片代替"),$S=n,n}}function QS(e){return"number"==typeof e?wE(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function ZS(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=QS(e[t]);return e}return QS(e)}function KS(e,t,i){for(var r in i)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}class XS{constructor(e,t,i,r,n,a,o,s,l){this.text=e,this.style=t,this.width=i,this.height=r,this.lines=n,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=s,this.fontProperties=l}static measureText(e,t,i,r){i=null==i?t.wordWrap:i;var n=t.toFontString(),a=XS.measureFont(n);0===a.fontSize&&(a.fontSize=t.fontSize,a.ascent=t.fontSize),r||(XS._canvas||JS(),r=XS._canvas);var o=r.getContext("2d");o.font=n;for(var s=(i?XS.wordWrap(e,t,r):e).split(/(?:\r\n|\r|\n)/),l=new Array(s.length),u=0,c=0;c<s.length;c++){var d=YE(o,s[c])+(s[c].length-1)*t.letterSpacing;l[c]=d,u=Math.max(u,d)}var h=u+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);var p=t.lineHeight||a.fontSize+t.strokeThickness,f=Math.max(p,a.fontSize+t.strokeThickness)+(s.length-1)*(p+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new XS(e,t,h,f,s,l,p+t.leading,u,a)}static wordWrap(e,t,i){i||(XS._canvas||JS(),i=XS._canvas);for(var r=i.getContext("2d"),n=0,a="",o="",s=Object.create(null),{letterSpacing:l,whiteSpace:u}=t,c=XS.collapseSpaces(u),d=XS.collapseNewlines(u),h=!c,p=t.wordWrapWidth+l,f=XS.tokenize(e),g=0;g<f.length;g++){var _=f[g];if(XS.isNewline(_)){if(!d){o+=XS.addLine(a),h=!c,a="",n=0;continue}_=" "}if(c){var m=XS.isBreakingSpace(_),v=XS.isBreakingSpace(a[a.length-1]);if(m&&v)continue}var y=XS.getFromCache(_,l,s,r);if(y>p)if(XS.canBreakWords(_,t.breakWords))for(var A=XS.wordWrapSplit(_),b=0,E=0;E<A.length;E++){for(var w=A[E],T=1;A[E+T];){var C=A[E+T],S=w[w.length-1];if(XS.canBreakChars(S,C,_,E,t.breakWords))break;w+=C,T++}var I=XS.getFromCache(w,l,s,r);I+n>(t.firstLine&&0===b?p-t.firstLine:p)&&(o+=XS.addLine(a),b++,h=!1,a="",n=0),a+=w,n+=I}else{a.length>0&&(o+=XS.addLine(a),a="",n=0);var x=g===f.length-1;o+=XS.addLine(_,!x),h=!1,a="",n=0}else y+n>p&&(h=!1,o+=XS.addLine(a),a="",n=0),(a.length>0||!XS.isBreakingSpace(_)||h)&&(a+=_,n+=y)}return o+=XS.addLine(a,!1)}static addLine(e,t=!0){return e=XS.trimRight(e),e=t?`${e}\n`:e}static getFromCache(e,t,i,r){var n=i[e];if("number"!=typeof n){var a=e.length*t;n=YE(r,e)+a,i[e]=n}return n}static collapseSpaces(e){return"normal"===e||"pre-line"===e}static collapseNewlines(e){return"normal"===e}static trimRight(e){if("string"!=typeof e)return"";for(var t=e.length-1;t>=0;t--){var i=e[t];if(!XS.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return"string"==typeof e&&XS._newlines.indexOf(e.charCodeAt(0))>=0}static isBreakingSpace(e){return"string"==typeof e&&XS._breakingSpaces.indexOf(e.charCodeAt(0))>=0}static tokenize(e){var t=[],i="";if("string"!=typeof e)return t;for(var r=0;r<e.length;r++){var n=e[r];XS.isBreakingSpace(n)||XS.isNewline(n)?(""!==i&&(t.push(i),i=""),t.push(n)):i+=n}return""!==i&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,r,n){return!0}static wordWrapSplit(e){return[...e]}static measureFont(e){if(XS._fonts[e])return XS._fonts[e];var t={ascent:0,descent:0,fontSize:0};XS._canvas&&XS._context||JS();var i=XS._canvas,r=XS._context;r.font=e;var n="中文测试",a=Math.ceil(YE(r,n)),o=Math.ceil(YE(r,XS.BASELINE_SYMBOL)),s=2*o;o=o*XS.BASELINE_MULTIPLIER|0,i.width=a,i.height=s,r.fillStyle="#f00",r.fillRect(0,0,a,s),r.font=e,r.textBaseline="middle",r.fillStyle="#000",r.fillText(n,0,o);var l=r.getImageData(0,0,a,s).data,u=l.length,c=4*a,d=0,h=0,p=!1;for(d=0;d<o;++d){for(var f=0;f<c;f+=4)if(255!==l[h+f]){p=!0;break}if(p)break;h+=c}for(t.ascent=o-d,h=u-c,p=!1,d=s;d>o;--d){for(var g=0;g<c;g+=4)if(255!==l[h+g]){p=!0;break}if(p)break;h-=c}return t.descent=d-o,t.fontSize=t.ascent+t.descent,XS._fonts[e]=t,t}static clearMetrics(e=""){e?delete XS._fonts[e]:XS._fonts={}}}function JS(){var e=HE.createElement("canvas");e.width=e.height=10,XS._canvas=e,XS._context=e.getContext("2d")}XS._fonts={},XS.METRICS_STRING="|ÉqÅ",XS.BASELINE_SYMBOL="M",XS.BASELINE_MULTIPLIER=1.4,XS._newlines=[10,13],XS._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var eI={texture:!0,children:!1,baseTexture:!0};class tI extends cS{constructor(e,t,i){var r,n=!1;i&&"number"!=typeof i?r=i:((r=HE.createElement("canvas")).bindingScreen=i,n=!0),r.width=3,r.height=3;var a=$w.from(r);a.orig=new KE,a.trim=new KE,super(a),this._ownCanvas=n,this.canvas=r,this.context=this.canvas.getContext("2d"),this._resolution=Vb.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}updateText(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var i,r,n=!!t.groupText,a=this.context,o=XS.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=o.width,l=o.height,u=o.lines,c=o.lineHeight,d=o.fontProperties;if(n)for(var h=0;h<t.groupText.length;h++)s+=t.groupText[h].paddingLeft||0;this.canvas.width=Math.ceil((Math.max(1,s)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil((Math.max(1,l)+2*t.padding)*this._resolution),a.scale(this._resolution,this._resolution),a.clearRect(0,0,this.canvas.width,this.canvas.height),a.font=this._font,a.lineWidth=t.strokeThickness,a.textBaseline=t.textBaseline,a.lineJoin=t.lineJoin,a.miterLimit=t.miterLimit;for(var p=t.dropShadow?2:1,f=0;f<p;++f)for(var g=t.dropShadow&&0===f,_=(this.style.lineHeight-this.style.fontSize)/2,m=0,v=0;v<u.length;v++)if(i=t.strokeThickness/2,r=t.strokeThickness/2+v*c+_+d.ascent,n){for(var y=[],A=0,b=0,E=0,w=0;w<t.groupText.length;w++){var T=Math.max(0,t.groupText[w].length+E-m);E+=t.groupText[w].length;var C=u[v].slice(b,T);C.length>0&&(y.push({string:C,color:t.groupText[w].color,paddingLeft:t.groupText[w].paddingLeft||0,absolute:t.groupText[w].absolute,firstLine:t.groupText[w].firstLine||0}),b+=C.length)}for(var S=0;S<y.length;S++){var I=y[S];if(g){var x=t.dropShadowColor,P=EE("number"==typeof x?x:TE(x));a.fillStyle=`rgba(${255*P[0]},${255*P[1]},${255*P[2]},${t.dropShadowAlpha})`;var D=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,R=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+0;this.drawLetterSpacing(I.string,i+t.padding+(I.absolute?0:A)+I.paddingLeft+(0===v?I.firstLine:0)+D,r+t.padding-0+R)}a.fillStyle=I.color,A+=this.drawLetterSpacing(I.string,i+t.padding+(I.absolute?0:A)+I.paddingLeft+(0===v?I.firstLine:0),r+t.padding-0,!1,!0)}b-=m+=u[v].length}else{if(g){var O=t.dropShadowColor,k=EE("number"==typeof O?O:TE(O));a.fillStyle=`rgba(${255*k[0]},${255*k[1]},${255*k[2]},${t.dropShadowAlpha})`;var M=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,N=Math.sin(t.dropShadowAngle)*t.dropShadowDistance+0;this.drawLetterSpacing(u[v],i+t.padding+M,r+t.padding-0+N,!1)}a.fillStyle=this._generateFillStyle(t,u,o),this.drawLetterSpacing(u[v],i+t.padding,r+t.padding-0,!1)}this.updateTexture()}}drawLetterSpacing(e,t,i,r=!1,n=!1){var a=this._style.letterSpacing;if(0===a)return r?this.context.strokeText(e,t,i):this.context.fillText(e,t,i),n?YE(this.context,e):void 0;for(var o=t,s=Array.from?Array.from(e):e.split(""),l=YE(this.context,e),u=0,c=0;c<s.length;++c){var d=s[c];r?this.context.strokeText(d,o,i):this.context.fillText(d,o,i),o+=l-(u=YE(this.context,e.substring(c+1)))+a,l=u}}updateTexture(){var e=this.canvas,t=this._texture,i=this._style,r=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=Math.ceil(e.width/this._resolution),t.trim.height=t._frame.height=Math.ceil(e.height/this._resolution),t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-2*r,t.orig.height=t._frame.height-2*r,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),this._recursivePostUpdateTransform(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){var r,n=e.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var a=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,s=Math.ceil(this.canvas.width/this._resolution)-a-2*o,l=Math.ceil(this.canvas.height/this._resolution)-a-2*o,u=n.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var d=u.length+1,h=1;h<d;++h)c.push(h/d);if(u.unshift(n[0]),c.unshift(0),u.push(n[n.length-1]),c.push(1),e.fillGradientType===GS.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,o,s/2,l+o);for(var p=0,f=(i.fontProperties.fontSize+e.strokeThickness)/l,g=0;g<t.length;g++)for(var _=i.lineHeight*g,m=0;m<u.length;m++){var v=_/l+("number"==typeof c[m]?c[m]:m/u.length)*f,y=Math.max(p,v);y=Math.min(y,1),r.addColorStop(y,u[m]),p=y}}else{r=this.context.createLinearGradient(o,l/2,s+o,l/2);for(var A=u.length+1,b=1,E=0;E<u.length;E++){var w=void 0;w="number"==typeof c[E]?c[E]:b/A,r.addColorStop(w,u[E]),b++}}return r}destroy(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},eI,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.round(Math.abs(this.scale.x)*this._texture.orig.width*100)/100}set width(e){e=Math.round(100*e)/100,this.updateText(!0);var t=kE(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.round(Math.abs(this.scale.y)*this._texture.orig.height*100)/100}set height(e){e=Math.round(100*e)/100,this.updateText(!0);var t=kE(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},this._style=e instanceof qS?e:new qS(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(null==e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}}bC.registerPlugin("interaction",Pw),bC.registerPlugin("batch",MC),nS.registerPlugin(sS),function(e){var t;if(!(null===(t=null==e?void 0:e.systems)||void 0===t?void 0:t.ShaderSystem))throw new Error("Unable to patch ShaderSystem, class not found.");var{ShaderSystem:i}=e.systems,r=!1;try{i.prototype.systemCheck.call(null),r=!1}catch(e){r=!0}r&&Object.assign(i.prototype,{systemCheck(){},syncUniforms(e,t){var{shader:i,renderer:r}=this;!function(e,t,i,r,n){var a=0,o=null,s=null,l=n.gl;for(var u in e.uniforms){var c=t[u],d=r[u],h=i[u],p=e.uniforms[u];c?"float"===c.type&&1===c.size?d!==h.value&&(h.value=d,l.uniform1f(h.location,d)):"sampler2D"!==c.type&&"samplerCube"!==c.type&&"sampler2DArray"!==c.type||1!==c.size||c.isArray?"mat3"===c.type&&1===c.size?void 0!==p.a?l.uniformMatrix3fv(h.location,!1,d.toArray(!0)):l.uniformMatrix3fv(h.location,!1,d):"vec2"===c.type&&1===c.size?void 0!==p.x?(o=d,(s=h.value)[0]===o.x&&s[1]===o.y||(s[0]=o.x,s[1]=o.y,l.uniform2f(h.location,o.x,o.y))):(o=d,(s=h.value)[0]===o[0]&&s[1]===o[1]||(s[0]=o[0],s[1]=o[1],l.uniform2f(h.location,o[0],o[1]))):"vec4"===c.type&&1===c.size?void 0!==p.width?(o=d,(s=h.value)[0]===o.x&&s[1]===o.y&&s[2]===o.width&&s[3]===o.height||(s[0]=o.x,s[1]=o.y,s[2]=o.width,s[3]=o.height,l.uniform4f(h.location,o.x,o.y,o.width,o.height))):(o=d,(s=h.value)[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]&&s[3]===o[3]||(s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],l.uniform4f(h.location,o[0],o[1],o[2],o[3]))):(1===c.size?gS:_S)[c.type].call(null,l,h.location,h.value,d):(n.texture.bind(d,a),h.value!==a&&(h.value=a,l.uniform1i(h.location,a)),a++):p.group&&n.shader.syncUniformGroup(d)}}(e,i.program.uniformData,t.uniformData,e.uniforms,r)}})}(NC);var iI,rI,nI,aI,oI,sI,lI="5.3.9",uI={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}},cI="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},dI=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=cI()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var n=this._tweens[i[r]],a=!t;n&&!1===n.update(e,a)&&!t&&delete this._tweens[i[r]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),hI={Linear:function(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),a=hI.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[i],e[i-1],i-r):a(e[n],e[n+1>i?i:n+1],r-n)},Bezier:function(e,t){for(var i=0,r=e.length-1,n=Math.pow,a=hI.Utils.Bernstein,o=0;o<=r;o++)i+=n(1-t,r-o)*n(t,o)*e[o]*a(r,o);return i},CatmullRom:function(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),a=hI.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(n=Math.floor(r=i*(1+t))),a(e[(n-1+i)%i],e[n],e[(n+1)%i],e[(n+2)%i],r-n)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[i]-(a(e[i],e[i],e[i-1],e[i-1],r-i)-e[i]):a(e[n?n-1:0],e[n],e[i<n+1?i:n+1],e[i<n+2?i:n+2],r-n)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=hI.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:(iI=[1],function(e){var t=1;if(iI[e])return iI[e];for(var i=e;i>1;i--)t*=i;return iI[e]=t,t}),CatmullRom:function(e,t,i,r,n){var a=.5*(i-e),o=.5*(r-t),s=n*n;return(2*t-2*i+a+o)*(n*s)+(-3*t+3*i-2*a-o)*s+a*n+t}}},pI=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),fI=new dI,gI=function(){function e(e,t){void 0===t&&(t=fI),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=uI.Linear.None,this._interpolationFunction=hI.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=pI.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?cI()+parseFloat(e):e:cI(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,r){for(var n in i){var a=e[n],o=Array.isArray(a),s=o?"array":typeof a,l=!o&&Array.isArray(i[n]);if("undefined"!==s&&"function"!==s){if(l){var u=i[n];if(0===u.length)continue;u=u.map(this._handleRelativeValue.bind(this,a)),i[n]=[a].concat(u)}if("object"!==s&&!o||!a||l)void 0===t[n]&&(t[n]=a),o||(t[n]*=1),r[n]=l?i[n].slice().reverse():t[n]||0;else{for(var c in t[n]=o?[]:{},a)t[n][c]=a[c];r[n]=o?[]:{},this._setupProperties(a,t[n],i[n],r[n])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=cI()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=cI()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=cI()),void 0===t&&(t=!0),this._isPaused)return!0;var i,r,n=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>n)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||r>1?1:r;var a=this._easingFunction(r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,s=this._chainedTweens.length;o<s;o++)this._chainedTweens[o].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,r){for(var n in i)if(void 0!==t[n]){var a=t[n]||0,o=i[n],s=Array.isArray(e[n]),l=Array.isArray(o);!s&&l?e[n]=this._interpolationFunction(o,r):"object"==typeof o&&o?this._updateProperties(e[n],a,o,r):"number"==typeof(o=this._handleRelativeValue(a,o))&&(e[n]=a+(o-a)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),_I=pI.nextId,mI=fI,vI=mI.getAll.bind(mI),yI=mI.removeAll.bind(mI),AI=mI.add.bind(mI),bI=mI.remove.bind(mI),EI=mI.update.bind(mI),wI={Easing:uI,Group:dI,Interpolation:hI,now:cI,Sequence:pI,nextId:_I,Tween:gI,VERSION:"18.6.4",getAll:vI,removeAll:yI,add:AI,remove:bI,update:EI};!function(e){e[e.USER_ACTION_LOGIN=0]="USER_ACTION_LOGIN",e[e.USER_ACTION_APPLY_HEADIMG_NICKNAME=1]="USER_ACTION_APPLY_HEADIMG_NICKNAME",e[e.USER_ACTION_CLICK_CHAT_RANK_TAB=2]="USER_ACTION_CLICK_CHAT_RANK_TAB",e[e.USER_ACTION_APPLY_CHAT_SELF_RANK=3]="USER_ACTION_APPLY_CHAT_SELF_RANK"}(rI||(rI={})),function(e){e[e.WXAG_GAME_LOGIN_STATUS_GRANT_UKNOWN=0]="WXAG_GAME_LOGIN_STATUS_GRANT_UKNOWN",e[e.WXAG_GAME_LOGIN_STATUS_GRANT_ALL=1]="WXAG_GAME_LOGIN_STATUS_GRANT_ALL",e[e.WXAG_GAME_LOGIN_STATUS_GRANT_ONLY_ME=2]="WXAG_GAME_LOGIN_STATUS_GRANT_ONLY_ME"}(nI||(nI={})),function(e){e[e.WXAG_GAME_ACCOUNT_STATUS_GRANT_UNKNOWN=0]="WXAG_GAME_ACCOUNT_STATUS_GRANT_UNKNOWN",e[e.WXAG_GAME_ACCOUNT_STATUS_GRANT_ALL=1]="WXAG_GAME_ACCOUNT_STATUS_GRANT_ALL",e[e.WXAG_GAME_ACCOUNT_STATUS_GRANT_ONLY_ME=2]="WXAG_GAME_ACCOUNT_STATUS_GRANT_ONLY_ME",e[e.WXAG_GAME_ACCOUNT_STATUS_GRANT_DENY=3]="WXAG_GAME_ACCOUNT_STATUS_GRANT_DENY"}(aI||(aI={})),function(e){e[e.GAME_GRANT_SUBMIT_APPROVE=1]="GAME_GRANT_SUBMIT_APPROVE",e[e.GAME_GRANT_SUBMIT_DENY=2]="GAME_GRANT_SUBMIT_DENY"}(oI||(oI={})),function(e){e[e.GAME_INTERFACE_ITEM_ID_RELATION=1]="GAME_INTERFACE_ITEM_ID_RELATION",e[e.GAME_INTERFACE_ITEM_ID_ACCOUNT=2]="GAME_INTERFACE_ITEM_ID_ACCOUNT"}(sI||(sI={}));var TI=null;function CI(e,t,i=!1){if(null===TI){var r=i?1:2,n=e.body.item_list.flatMap((({status_list:e})=>e)),a=Object.fromEntries(n.map((({item_status_name:e,item_status_value:t})=>[t,e]))),o=Object.fromEntries(t.map((({item_id:e,item_status_value:t})=>[e,t])));__sclEngine__.initScl((t=>{RI({UIArea:0,PositionID:0,ActionID:1,ExternInfo:{source:r}}),(TI=t.mainRoot.append("game-grant-info",{config:e,infoMap:o,statusMap:a})).addListener("back",(()=>{TI&&(RI({UIArea:4502,PositionID:2,ActionID:2,FuncID:TI.data.selectItemId,ExternInfo:{source:r}}),TI.setData({page:"index",buttons:[{type:"default",text:"取消"},{type:"primary",text:"确定"}]}))})),TI.addListener("select",(e=>{if(TI){var t=e.detail.index,i=TI.data.selectItemId,n=TI.data.selections;TI.data.infoMap[i]=n[t].item_status_value,i===sI.GAME_INTERFACE_ITEM_ID_RELATION&&(TI.data.infoMap[sI.GAME_INTERFACE_ITEM_ID_ACCOUNT]=n[t].item_status_value),RI({UIArea:4502,PositionID:1,ActionID:2,ExternInfo:{menu:n[t].item_status_value,source:r},FuncID:i}),TI.setData({page:"index",infoMap:TI.data.infoMap,buttons:[{type:"default",text:"取消"},{type:"primary",text:"确定"}]})}})),TI.addListener("showAction",(t=>{var i,n,a;if(TI){var o=t.detail.id,s=null===(i=e.body.item_list.find((({item_id:e})=>o===e)))||void 0===i||null===(n=i.status_list)||void 0===n?void 0:n.filter((e=>!e.item_status_hide_if_list.some((({item_id:e,item_status_value:t})=>{var i;return(null===(i=TI)||void 0===i?void 0:i.data.infoMap[e])===t}))));RI({UIArea:4501,PositionID:o,ActionID:2,ExternInfo:{source:r}});var l=null!==(a=null==s?void 0:s.findIndex((({item_status_value:e})=>{var t;return e===(null===(t=TI)||void 0===t?void 0:t.data.infoMap[o])})))&&void 0!==a?a:0;TI.setData({page:"action",selections:s,selected:l,selectItemId:o,buttons:[]}),RI({UIArea:4502,PositionID:0,ActionID:1,FuncID:o,ExternInfo:{source:r}})}})),TI.addListener("destroy",(()=>{TI=null})),TI.addListener("submit",(()=>{TI&&(RI({UIArea:4501,ActionID:2,PositionID:20,ExternInfo:{logGrant:TI.data.infoMap[sI.GAME_INTERFACE_ITEM_ID_RELATION],roleGrant:TI.data.infoMap[sI.GAME_INTERFACE_ITEM_ID_ACCOUNT],source:r}}),PI({submit_value:oI.GAME_GRANT_SUBMIT_APPROVE,user_grant_info_list:Object.entries(TI.data.infoMap).map((([e,t])=>({item_id:+e,item_status_value:t})))}))})),TI.addListener("deny",(()=>{RI({UIArea:4501,ActionID:2,PositionID:21,ExternInfo:{source:r}}),PI({submit_value:oI.GAME_GRANT_SUBMIT_DENY,user_grant_info_list:[]})}))}))}}k.onReady((()=>{setTimeout((()=>{II({user_action:[rI.USER_ACTION_LOGIN]}).then((({need_pop_up_grant_window:e,interface_config:t,user_grant_info_list:i})=>{e&&CI(t,i,!0)})).catch((e=>{wxNativeConsole.error("getUserGrantInfo",e)}))}),3e3)}));var SI=Ei(ZA);function II(e){return xI.apply(this,arguments)}function xI(){return(xI=zo()((function*({user_action:e}){var t,i,r=null!==(t=null==k||null===(i=k.accountInfo)||void 0===i?void 0:i.appId)&&void 0!==t?t:"",{data:n}=yield SI({req_path:"gamewxagcdatawap_getusergrantinfo",json_data:JSON.stringify({appid:r,user_action:e})});return n.data}))).apply(this,arguments)}function PI(e){return DI.apply(this,arguments)}function DI(){return(DI=zo()((function*({submit_value:e,user_grant_info_list:t}){try{var i,r,n={appid:null!==(i=null==k||null===(r=k.accountInfo)||void 0===r?void 0:r.appId)&&void 0!==i?i:"",submit_value:e,user_grant_info_list:t};yield SI({req_path:"gamewxagcdatawap_setusergrantinfo",json_data:JSON.stringify(n)})}catch(e){wxNativeConsole.error(e)}}))).apply(this,arguments)}function RI({UIArea:e,PositionID:t,ActionID:i,ExternInfo:r,FuncID:n}){Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[$i(),k.appLaunchInfo.scene,0,45,e,t,i,"",0,/landscape/.test(k.deviceOrientation)?2:1,0,0,"","",0,"",0,0,n,0,0,0,r?encodeURIComponent(JSON.stringify(r)):""].join(",")})}var OI={Component:oA,getPrivateThis:rA,removePrivateThis:aA,create:nA,init:sA,webviewLayout:Xv,nativeviewLayout:Jv,xmlParser:Lg()},kI={getUserCloudStorage:Gg,getFriendCloudStorage:jg,getGroupCloudStorage:zg,getPotentialFriendList:Yg,getGroupInfo:qg,shareMessageToFriend:Gv,getUserCloudStorageKeys:Hv,modifyFriendInteractiveStorage:RA},MI=null,NI={Kanata:Kanata,get wxGA(){return null===MI&&(MI=Bg()),MI},__wxSourceMapRetrace__:"function"==typeof __wxSourceMapRetrace__?__wxSourceMapRetrace__:void 0,reportIDKey:({id:e,key:t,value:i})=>Reporter.reportIDKey({id:e,key:t,value:i}),reportKeyValue:function({key:e,value:t,immediately:i}){return"number"!=typeof e||Object.values(Fg).includes(e)?Reporter.reportKeyValue({key:e,value:t,immediately:i}):Reporter.reportKeyValue({key:e,value:t,immediately:i,number:!0})},getXLogManager:()=>wxNativeConsole,getUserInfo:jv,WebAssembly:jA,getGameLifeProfile:HA,getGreetingControlInfo:zA,interactGameLifeTag:YA,openGameLifeAccountInfo:({success:e,fail:t,complete:i,query:r}={})=>{$A({url:Pt("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html",r),success:e,fail:t,complete:i})},openGameLifeMiniGameTransfer:({success:e,fail:t,complete:i,query:r}={})=>{$A({url:Pt("https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html",r),success:e,fail:t,complete:i})},Function:Function.prototype.constructor,createCanvas:(...e)=>rx(...e),createScreenCanvas:(...e)=>sx(...e),createWebView:e=>new _l(e),navigateToMiniProgramDirectly:e=>au(e,e),privateOpenUrl:Qs,gameTransfer:QA,coverview:OI,launchApplicationDirectly:(e={})=>{Kt("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,B?Kt("launchApplicationDirectly")?it("launchApplication",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((()=>ut("launchApplicationDirectly",e,"no permission"))):it("launchApplicationDirectly",e,{})},encode:eb,decode:tb,PIXI:e,TWEEN:wI,onStoreEmoticonSelect:e=>im.on("onStoreEmoticonSelect",e),offStoreEmoticonSelect:e=>im.off("onStoreEmoticonSelect",e),onKeyboardHeightChange:e=>im.on("onKeyboardHeightChange",e),offKeyboardHeightChange:e=>im.off("onKeyboardHeightChange",e),showUserGrantInfoModal:CI},LI={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023,onStoreEmoticonSelect:1053,offStoreEmoticonSelect:1053,PIXI:1057,TWEEN:1058,onKeyboardHeightChange:1062,offKeyboardHeightChange:1062,showUserGrantInfoModal:1073,__wxSourceMapRetrace__:1074},BI={},FI=Object.values(LI);k.onReady((()=>{var e=Kt("engineOpenData");Object.assign(NI,e?kI:{}),!0===k.engine&&(MI=Bg())}));var UI=e=>{if(BI[e])return BI[e];var t={};it("getPluginPermissionBytes",{pluginList:[{indexes:FI,pluginId:e}],success(i){var r=i.pluginPermissionMap;if(r&&r[e])for(var n=0;n<r[e].length;n++){var a=FI[n];t[a]=1===r[e][n]}}});var i={platform:k.platform};for(var r in NI){var n=t[LI[r]];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||n)&&("createCanvas"===r&&(WI=!0),r in kI&&(WI=!0),i[r]=NI[r])}return BI[e]=i,BI[e]},WI=!1,GI=()=>WI,{Canvas:VI}=O.Z,jI=new WeakMap,HI=0,zI=e=>{if(null!=e)return jI.get(e)};function YI(e){Yo()&&it("removeImageView",{viewId:e,complete({errMsg:e}){}})}function $I(e){if(qo()){var t=e.getContext;e.getContext=(...i)=>{var r=t.call(e,...i),n=r.getSupportedExtensions,a=r.getExtension;return n&&(r.getSupportedExtensions=(...e)=>{var t=n.call(r,...e);if(Array.isArray(t)){var i=new Set(t);return i.delete("WEBGL_compressed_texture_etc1"),i.delete("WEBGL_compressed_texture_etc"),Array.from(i)}return t}),a&&(r.getExtension=e=>"WEBGL_compressed_texture_etc1"===e||"WEBGL_compressed_texture_etc"===e?null:a.call(r,e)),r}}}var qI,QI,ZI,KI=!1,XI=Object.defineProperty,JI=Object.getOwnPropertyDescriptor,ex=Object.prototype.hasOwnProperty,tx=["getContext","toDataURL"],ix=["width","height","tagName","nodeName"],rx=({secure:e=!1,isSharedCanvas:t=!1}={},i=!0)=>{var r=new VI,n=!!("string"==typeof(N?k.appConfig.subContext:k.subContext))&&i;if($I(r),N||H){var a=r.__proto__.__proto__;r.__proto__=new Proxy(r.__proto__,{setPrototypeOf:(e,t)=>(a=t,!0),getPrototypeOf:()=>a})}if(H||N||ex.call(r,"width")||(ix.forEach((e=>{for(var t=r;t;t=t.__proto__)if(ex.call(t,e)){XI(r,e,JI(t,e)),XI(r,e,{configurable:!1});break}})),XI(r,"style",{value:{},writable:!0}),qI||((qI={})[Symbol.toStringTag]="HTMLCanvasElement",tx.forEach((e=>{for(var t=r;t;t=t.__proto__)if(ex.call(t,e)){XI(qI,e,JI(t,e));break}}))),r.__proto__=qI),n)Object.setPrototypeOf(r,Mg()),"Object"===o(r)&&Object.defineProperty(Mg(),Symbol.toStringTag,{get:()=>"HTMLCanvasElement"});else if(H&&!KI){var s=r.getContext;r.getContext=(e,t)=>{var i=s.call(r,e,t);return O.Z.setLiveContext&&O.Z.setLiveContext(i,e,t),i}}void 0===r.__id&&(r.__id=HI++);var l,u=!1;KI||(KI=!0,u=!0),jI.set(r,{canvasId:r.__id,secure:e,isSharedCanvas:t,isScreenCanvas:u,flag:(l={},{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:l,currentFramebuffer:l})});try{delete r.__id}catch(e){}var c=N?r:(e=>{var{canvasId:t}=jI.get(e);return t})(r),d=t=>{if(e){var i=rc.set(t.tempFilePath);t.tempFilePath=i}YI(c)};return r.toTempFilePathSync=function(e={}){var t,i,r=jI.get(this),n=!!r&&r.isScreenCanvas;if(function(e){Yo()&&it("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete({errMsg:e}){}})}(c),it("canvasToTempFilePathSync",Object.assign({},e,{canvasId:c},{isScreenCanvas:n,success:e=>{t=e.tempFilePath},fail:e=>{i=e.errMsg}}),{beforeSuccess:d}),YI(c),i)throw new Error(i);return t},r.toTempFilePath=se(((e={})=>{var t=jI.get(r),i=!!t&&t.isScreenCanvas;it("canvasToTempFilePath",Object.assign({},e,{canvasId:c,isScreenCanvas:i}),{beforeSuccess:d})})),r},nx=()=>ZI;k.onReady((()=>{if(bi()){(i=k.plugins||k.gamePlugins)&&Object.keys(i).forEach((e=>{var t=i[e].provider;UI(t)}));var e=N?k.appConfig.subContext:k.subContext,t="string"==typeof e||GI();(e=>{if($o()){var t=e.getContext;e.getContext=(i,r,...n)=>{if("webgl"===i||"2d"===i){var a=Object.assign({},r);return a.preserveDrawingBuffer=!0,t.call(e,i,a,...n)}return t.call(e,i,r,...n)}}})(QI=rx({secure:t})),$I(QI),kg(),e?((ZI=rx({secure:t,isSharedCanvas:!0})).width=k.screenWidth,ZI.height=k.screenHeight):ZI={width:0,height:0,__proto__:{}}}var i}));var ax,ox=!1,sx=()=>new O.Z.ScreenCanvas,lx=()=>rx({secure:GI()}),ux=()=>QI,cx=O.Z.requestPointerLock,dx=O.Z.exitPointerLock,hx=O.Z.isPointerLocked,px=Ae("memoryWarning"),fx=px.onMethod,gx=px.offMethod,_x=(e,t=!1)=>{t?ax=e:fx(e)};ce("onMemoryWarningReceive",((e={})=>{L&&e.level<10||(px.getGlobalListeners().length?px.emitGlobal(e):"function"==typeof ax&&ax(e))}));var mx=Date.now(),vx=function(){O.Z.gc?O.Z.gc():function(){for(var e={},t=0;t<1e5;t++)e[t]=[];e=null}()};_x((()=>{Date.now()-mx>1e3&&vx(),mx=Date.now()}),!0);var yx=!1,Ax=!1,bx=JA,Ex="";T_(((e={})=>{var{scene:t}=e,{referrerInfo:i}=e;void 0!==t&&("string"==typeof t&&(t=parseInt(t,10)),i&&i.appId&&(Ex=i.appId),1036===t?(Ax=!0,bx=JA):1069===t?(Ax=!0,bx=XA):1089!==t&&1090!==t&&1038!==t&&(Ax=!1))})),ic.on("beforeTouchEnd",(()=>{yx=!0})),ic.on("afterTouchEnd",(()=>{yx=!1}));var Tx=new vi;ce("onDeviceOrientationChange",(e=>{e.value=e.value.toLowerCase(),/reverse/.test(e.value)&&(e.value="landscapeReverse"),Tx.emit("deviceOrientationChange",e)}));var Cx,Sx,Ix,xx,Px=e=>{it("enableDeviceOrientationChangeListening",{enable:!0}),Tx.on("deviceOrientationChange",e)},Dx=e=>{it("enableDeviceOrientationChangeListening",{enable:!1}),Tx.off("deviceOrientationChange",e)},Rx=__subContextEngine__.getGameOpenDataContext(),Ox=JSON.stringify,kx=e=>{Bx();try{Rx.postMessage({data:Ox(e)})}catch(e){throw new Mt(e.message)}},Mx=e=>{Bx(),Rx.onMessage(e)},Nx=!1,Lx=()=>{var e=N?k.appConfig.subContext:k.subContext;return e&&"string"==typeof e},Bx=()=>{!Nx&&Lx()&&(__subContextEngine__.createGameOpenDataContext(),Nx=!0)},Fx=null,Ux=()=>(Bx(),Fx||(Fx=nx()),Fx);try{N&&(Sx=document.createElement.bind(document),Ix=document.body.appendChild.bind(document.body),xx=null)}catch(e){}var Wx=1;k.onReady((()=>{try{"number"==typeof k.wxAppInfo.maxWorkerConcurrent&&(Wx=k.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));var Gx=function(e,t={}){var{useExperimentalWorker:i}=t,r={workerUrl:e,appid:k.accountInfo.appId,useExperimentalWorker:i&&Kt("WeAppWorker")},n="workers.js",a=hy,o=ii(this);if(o&&(n=St(`plugin-private://${o}/workers.js`),a=py,r.pluginId=o),gy.getSizeByType(a)>=Wx)throw new Error("createWorker: exceed max concurrent workers limit.");var{workerId:s,useWKWorker:l}=__safeway__.worker.create(n,r);if(setTimeout((()=>{Reporter.reportIDKey({key:l?"createWKWorker":"createNormalWorker"})}),0),s>0)return new Wy(s,e,{useWKWorker:l,contextType:a,pluginId:r.pluginId});throw-1===s?new Error(`createWorker: Worker "${e}" does not exists.`):new Error("createWorker: unknown error.")},Vx=null,jx=null,Hx=null,zx=null,Yx=new Promise((e=>{zx=e}));k.onReady((()=>{var e=e=>{jx=e,Hx=k,Vx=os(),zx()};new Promise(((e,t)=>{Vi({success(t){e(t.networkType)},fail(e){t(e)}})})).then((t=>{e(t)})).catch((()=>{e(null)}))}));var $x,qx=e=>{Hx?e():Yx.then(e)},Qx={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0},Zx=!1;function Kx(e,t){if(0===t)return!1;var i=Math.ceil(1/t);return e%i===parseInt(Date.now()/864e5,10)%i}function Xx(){var e="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],t=Vx&&Vx.brand,i=Vx&&Vx.model,r=Vx&&Vx.platform,n=Vx&&Vx.system,a=Hx&&Hx.appLaunchInfo&&Hx.appLaunchInfo.scene,o=Hx&&k.envVersion,s=Vx&&Vx.version,l=Vx&&Vx.SDKVersion,u=e.length>0&&e[e.length-1].__route__||"";return{platform:r,system:n,path:u=function(e){if(!e)return"";var t=e.indexOf("?");return t>-1?e.substring(0,t):e}(u),scene:a,brand:t,model:i,networkType:jx,envType:o,clientVersion:s,sdkVersion:l}}function Jx(e,t,i=[],r){var n=Object.create(null);n.key=e,n.value=t;var a=Xx(),o="";r?(o=r.pluginId,a.pluginCustomVersion=r.customVersion,a.path=__virtualDOM__.convertRouteToComponentAlias(a.path),a.path.indexOf("plugin")<0&&(a.path="")):o=Hx.accountInfo&&Hx.accountInfo.appId,function({appId:e,metrics:t={},dimensions:i=[]}={}){var r="";i.length>0&&(r="_"+i.join("_"));var n=Xx(),a=`${t.key}_${n.networkType}_${n.scene}${r}`;if(Object.keys(eP).length>Qx.bufferCapacity)return;eP[a]||(eP[a]={appId:e,key:t.key,valueSum:0,count:0,baseInfo:n,dimensions:i});var o=eP[a];o&&(o.valueSum+=t.value,o.count++)}({appId:o,metrics:n,dimensions:i}),$x&&$x.then((()=>{"release"===k.envVersion&&1!==Qx.sampleRate&&Qx.userUin&&!Kx(Qx.userUin,Qx.sampleRate)||Qx.enabled&&Qx.legacyReportEnabled&&oP({appId:o,metrics:n,baseInfo:a,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}var eP={};function tP(){var e=Object.keys(eP);if(!(e.length<=0)&&Qx.enabled&&("release"!==k.envVersion||1===Qx.sampleRate||!Qx.userUin||Kx(Qx.userUin,Qx.sampleRate))){var t="develop"===k.envVersion||"trial"===k.envVersion;for(var i of e){var r=eP[i],n={key:r.key,value:r.valueSum/r.count,num:r.count},a=r.baseInfo,o=r.dimensions;t?o.length>0?sP({appId:r.appId,metrics:n,baseInfo:a,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:o}):sP({appId:r.appId,metrics:n,baseInfo:a,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):o.length>0?oP({appId:r.appId,metrics:n,baseInfo:a,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:o}):oP({appId:r.appId,metrics:n,baseInfo:a,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete eP[i],Reporter.reportKeyValue({key:"PerfReport",value:[r.appId,a.platform,a.scene,a.brand,a.model,a.networkType,a.envType,n.key,n.value,n.num,parseInt(Date.now()/1e3,10)].join(",")})}}}var iP=null;function rP(){var e="develop"===k.envVersion||"trial"===k.envVersion?60:Qx.batchTime;iP&&clearInterval(iP),iP=setInterval(tP,1e3*e)}var nP=!1;function aP(){nP=!0,qx((()=>{setTimeout(tP,3e4),rP(),Ms((()=>{tP()})),Zo((()=>{rP()}))}))}function oP({appId:e,metrics:t={},baseInfo:i={},interfaces:r="",busid:n="",dimensions:a}={}){var o=JSON.stringify({appId:e,base:i,metrics:t,dimensions:a,time:parseInt(Date.now()/1e3,10)}),s=JSON.stringify({interface:r,busid:n,data:o});Ff(1002,s,!0)}function sP({appId:e,metrics:t={},baseInfo:i={},interfaces:r="",busid:n="",dimensions:a}={}){if(Qx.enabled){var o=JSON.stringify({appId:e,base:i,metrics:t,dimensions:a,time:parseInt(Date.now()/1e3,10)});ki({sdkApiName:"UploadByApi",apiName:"UploadByApi",reqData:{interface:r,busid:n,data:o}}).catch((()=>{}))}}var lP=4294967295;function uP(e,t,i,r){Qx.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=lP||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=lP?(void 0===i||Array.isArray(i)||(i=[String(i)]),Array.isArray(i)&&(i.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",i.length),0===(i=i.slice(0,2)).length&&(i[0]="",i[1]=""),1===i.length&&(i[1]=""),i=i.map((e=>e?String(e):"")).map((e=>e.substring(0,256)))),i&&Array.isArray(i)||(i=[]),Zx||(Zx=!0,$x=Vf().then((e=>{var t=e.data;if(t){var i=t.PerformaceGlobalConf,r=t.PerformacePersonalConf;i&&(void 0!==i.PerformanceOldReportOff&&(Qx.legacyReportEnabled=!(1===i.PerformanceOldReportOff)),void 0!==i.PerformanceReportMaxNum&&(Qx.bufferCapacity=parseInt(i.PerformanceReportMaxNum,10)),void 0!==i.PerformanceMiniprogramlibGatherTime&&(Qx.batchTime=60*parseInt(i.PerformanceMiniprogramlibGatherTime,10))),r&&(void 0!==r.PerformanceMiniprogramlibOff&&(Qx.enabled=!(1===r.PerformanceMiniprogramlibOff)),void 0!==r.PerformanceMiniprogramlibGatherTime&&(Qx.batchTime=60*parseInt(r.PerformanceMiniprogramlibGatherTime,10)),void 0!==r.PerformanceMiniprogramlibSamplingRatio&&(Qx.sampleRate=parseInt(r.PerformanceMiniprogramlibSamplingRatio,10)/100)),Qx.userUin=t.UserUin,300!==Qx.batchTime&&rP()}})).catch((e=>{}))),nP||aP(),qx((()=>{"release"===k.envVersion&&1!==Qx.sampleRate&&Qx.userUin&&!Kx(Qx.userUin,Qx.sampleRate)||Jx(e,t,i,r)}))):console.warn("[reportPerformance] value should be in range of",0," to",lP))}var cP=O.Z.createSignal||(()=>null),dP=null,hP=Ei(((e={})=>{var t=["release","develop","trial"];Li("CreateWxaShortLink","webapi_createwxashortlink",(e=>({wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)})),(e=>{e.shortLink=e.short_link,delete e.short_link}))(e)})),pP=Ei(((e={})=>{((e={})=>{e.keyPath="WxaAppVersionInfo.AppVersion",it("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data)}})})({success(t){ct({name:"getAppContact",args:e,res:t})},fail(t){((e={})=>{e.keyPath="WxaAppVersionInfo.VersionState",it("getAppContact",e,{beforeSuccess(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})})({success(t){ct({name:"getAppContact",args:e,res:t})},fail(t){ct({name:"getAppContact",args:e,res:t,success:!1})}})}})})),fP=e=>Hl({icon:"none",title:e}),gP=new Map,_P="请检查网络后重试",mP=0;ce("onCopyUrl",(e=>{var t=e.shortLinkEnable||!1,i=ke.lastRoute,r=ke.lastOpenType,n=JSON.parse(JSON.stringify(ke.lastRawQuery||{}));if("appLaunch"!==r&&"autoReLaunch"!==r)try{Object.keys(n).forEach((e=>{n[e]=decodeURIComponent(n[e])}))}catch(e){return void fP(_P)}var a=bi()?t?"":"index.html":`${i}.html`,o=Object.entries(n).map((e=>e.join("="))).join("&");if(t&&"function"==typeof dP)try{o=(dP()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}var s=o?`${a}?${o}`:a;if(t){gP.has(mP)&&gP.set(mP,!1);var l=++mP,u=!1;gP.set(l,!0);var c=e=>{!!gP.get(l)&&(fP(e),e===_P&&it("returnCopyUrl",{url:"",shortLinkEnable:t}),gP.set(l,!1))};setTimeout((()=>{u=!0,c(_P)}),1500);var d=k.page[`${i}.html`],h=d&&d.window||{},p=k.global&&k.global.window||{},f=h.navigationBarTitleText||p.navigationBarTitleText||"";pP().then((e=>{var i=e.data;return hP({appid:k.accountInfo.appId,envVersion:k.envVersion,path:s,title:bi()?"":f,version:i}).then((e=>(console.log("createWxaShortLinkAsync, ",e),!!gP.get(l)&&!u&&(it("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success(){fP("已复制")},fail(){fP(_P)}}),gP.set(l,!1)),null))).catch((e=>{c(_P),console.log("[onCopyUrl]:",e)})),null})).catch((e=>{c(_P),console.log("[onCopyUrl]: ",e)}))}else it("returnCopyUrl",{url:s,shortLinkEnable:t,success(){fP("已复制")},fail(){fP(_P)}})}));function vP(e){return parseInt(e)===e}function yP(e){if(!vP(e.length))return!1;for(var t=0;t<e.length;t++)if(!vP(e[t])||e[t]<0||e[t]>255)return!1;return!0}function AP(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!yP(e))throw new Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(vP(e.length)&&yP(e))return new Uint8Array(e);throw new Error("unsupported array-like object")}function bP(e){return new Uint8Array(e)}function EP(e,t,i,r,n){null==r&&null==n||(e=e.slice?e.slice(r,n):Array.prototype.slice.call(e,r,n)),t.set(e,i)}var wP,TP={toBytes:function(e){var t=[],i=0;for(e=encodeURI(e);i<e.length;){var r=e.charCodeAt(i++);37===r?(t.push(parseInt(e.substr(i,2),16)),i+=2):t.push(r)}return AP(t)},fromBytes:function(e){for(var t=[],i=0;i<e.length;){var r=e[i];r<128?(t.push(String.fromCharCode(r)),i++):r>191&&r<224?(t.push(String.fromCharCode((31&r)<<6|63&e[i+1])),i+=2):(t.push(String.fromCharCode((15&r)<<12|(63&e[i+1])<<6|63&e[i+2])),i+=3)}return t.join("")}},CP=(wP="0123456789abcdef",{toBytes:function(e){for(var t=[],i=0;i<e.length;i+=2)t.push(parseInt(e.substr(i,2),16));return t},fromBytes:function(e){for(var t=[],i=0;i<e.length;i++){var r=e[i];t.push(wP[(240&r)>>4]+wP[15&r])}return t.join("")}}),SP={16:10,24:12,32:14},IP=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],xP=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],PP=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],DP=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],RP=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],OP=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],kP=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],MP=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],NP=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],LP=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],BP=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],FP=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],UP=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],WP=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],GP=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function VP(e){for(var t=[],i=0;i<e.length;i+=4)t.push(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]);return t}var jP=function(e){if(!(this instanceof jP))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:AP(e,!0)}),this._prepare()};jP.prototype._prepare=function(){var e=SP[this.key.length];if(null==e)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var i,r=4*(e+1),n=this.key.length/4,a=VP(this.key);for(t=0;t<n;t++)i=t>>2,this._Ke[i][t%4]=a[t],this._Kd[e-i][t%4]=a[t];for(var o,s=0,l=n;l<r;){if(o=a[n-1],a[0]^=xP[o>>16&255]<<24^xP[o>>8&255]<<16^xP[255&o]<<8^xP[o>>24&255]^IP[s]<<24,s+=1,8!=n)for(t=1;t<n;t++)a[t]^=a[t-1];else{for(t=1;t<n/2;t++)a[t]^=a[t-1];o=a[n/2-1],a[n/2]^=xP[255&o]^xP[o>>8&255]<<8^xP[o>>16&255]<<16^xP[o>>24&255]<<24;for(t=n/2+1;t<n;t++)a[t]^=a[t-1]}for(t=0;t<n&&l<r;)u=l>>2,c=l%4,this._Ke[u][c]=a[t],this._Kd[e-u][c]=a[t++],l++}for(var u=1;u<e;u++)for(var c=0;c<4;c++)o=this._Kd[u][c],this._Kd[u][c]=FP[o>>24&255]^UP[o>>16&255]^WP[o>>8&255]^GP[255&o]},jP.prototype.encrypt=function(e){if(16!=e.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,i=[0,0,0,0],r=VP(e),n=0;n<4;n++)r[n]^=this._Ke[0][n];for(var a=1;a<t;a++){for(n=0;n<4;n++)i[n]=DP[r[n]>>24&255]^RP[r[(n+1)%4]>>16&255]^OP[r[(n+2)%4]>>8&255]^kP[255&r[(n+3)%4]]^this._Ke[a][n];r=i.slice()}var o,s=bP(16);for(n=0;n<4;n++)o=this._Ke[t][n],s[4*n]=255&(xP[r[n]>>24&255]^o>>24),s[4*n+1]=255&(xP[r[(n+1)%4]>>16&255]^o>>16),s[4*n+2]=255&(xP[r[(n+2)%4]>>8&255]^o>>8),s[4*n+3]=255&(xP[255&r[(n+3)%4]]^o);return s},jP.prototype.decrypt=function(e){if(16!=e.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,i=[0,0,0,0],r=VP(e),n=0;n<4;n++)r[n]^=this._Kd[0][n];for(var a=1;a<t;a++){for(n=0;n<4;n++)i[n]=MP[r[n]>>24&255]^NP[r[(n+3)%4]>>16&255]^LP[r[(n+2)%4]>>8&255]^BP[255&r[(n+1)%4]]^this._Kd[a][n];r=i.slice()}var o,s=bP(16);for(n=0;n<4;n++)o=this._Kd[t][n],s[4*n]=255&(PP[r[n]>>24&255]^o>>24),s[4*n+1]=255&(PP[r[(n+3)%4]>>16&255]^o>>16),s[4*n+2]=255&(PP[r[(n+2)%4]>>8&255]^o>>8),s[4*n+3]=255&(PP[255&r[(n+1)%4]]^o);return s};var HP=function(e){if(!(this instanceof HP))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new jP(e)};HP.prototype.encrypt=function(e){if((e=AP(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=bP(e.length),i=bP(16),r=0;r<e.length;r+=16)EP(e,i,0,r,r+16),EP(i=this._aes.encrypt(i),t,r);return t},HP.prototype.decrypt=function(e){if((e=AP(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=bP(e.length),i=bP(16),r=0;r<e.length;r+=16)EP(e,i,0,r,r+16),EP(i=this._aes.decrypt(i),t,r);return t};var zP=function(e,t){if(!(this instanceof zP))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=bP(16);this._lastCipherblock=AP(t,!0),this._aes=new jP(e)};zP.prototype.encrypt=function(e){if((e=AP(e)).length%16!=0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=bP(e.length),i=bP(16),r=0;r<e.length;r+=16){EP(e,i,0,r,r+16);for(var n=0;n<16;n++)i[n]^=this._lastCipherblock[n];this._lastCipherblock=this._aes.encrypt(i),EP(this._lastCipherblock,t,r)}return t},zP.prototype.decrypt=function(e){if((e=AP(e)).length%16!=0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=bP(e.length),i=bP(16),r=0;r<e.length;r+=16){EP(e,i,0,r,r+16),i=this._aes.decrypt(i);for(var n=0;n<16;n++)t[r+n]=i[n]^this._lastCipherblock[n];EP(e,this._lastCipherblock,0,r,r+16)}return t};var YP=function(e,t,i){if(!(this instanceof YP))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 size)")}else t=bP(16);i||(i=1),this.segmentSize=i,this._shiftRegister=AP(t,!0),this._aes=new jP(e)};YP.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var t,i=AP(e,!0),r=0;r<i.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var n=0;n<this.segmentSize;n++)i[r+n]^=t[n];EP(this._shiftRegister,this._shiftRegister,0,this.segmentSize),EP(i,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return i},YP.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,i=AP(e,!0),r=0;r<i.length;r+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var n=0;n<this.segmentSize;n++)i[r+n]^=t[n];EP(this._shiftRegister,this._shiftRegister,0,this.segmentSize),EP(e,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return i};var $P=function(e,t){if(!(this instanceof $P))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else t=bP(16);this._lastPrecipher=AP(t,!0),this._lastPrecipherIndex=16,this._aes=new jP(e)};$P.prototype.encrypt=function(e){for(var t=AP(e,!0),i=0;i<t.length;i++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[i]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},$P.prototype.decrypt=$P.prototype.encrypt;var qP=function(e){if(!(this instanceof qP))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=bP(16),this.setValue(e)):this.setBytes(e)};qP.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw new Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},qP.prototype.setBytes=function(e){if(16!=(e=AP(e,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},qP.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var QP=function(e,t){if(!(this instanceof QP))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof qP||(t=new qP(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new jP(e)};QP.prototype.encrypt=function(e){for(var t=AP(e,!0),i=0;i<t.length;i++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[i]^=this._remainingCounter[this._remainingCounterIndex++];return t},QP.prototype.decrypt=QP.prototype.encrypt;var ZP={request:Na,showToast:Hl,hideToast:zl,requestVirtualPayment:e=>{it("requestVirtualPayment",e)},requestPayment:Lu,getSystemInfo:ns,showModal:Ul,getNetworkType:Vi,aesjs:{AES:jP,Counter:qP,ModeOfOperation:{ecb:HP,cbc:zP,cfb:YP,ofb:$P,ctr:QP},utils:{hex:CP,utf8:TP},padding:{pkcs7:{pad:function(e){var t=16-(e=AP(e,!0)).length%16,i=bP(e.length+t);EP(e,i);for(var r=e.length;r<i.length;r++)i[r]=t;return i},strip:function(e){if((e=AP(e,!0)).length<16)throw new Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw new Error("PKCS#7 padding byte out of range");for(var i=e.length-t,r=0;r<t;r++)if(e[i+r]!==t)throw new Error("PKCS#7 invalid padding byte");var n=bP(i);return EP(e,n,0,0,i),n}}},_arrayTest:{coerceArray:AP,createArray:bP,copyArray:EP}}},KP=function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=80)}([function(e,t,i){var r=i(35);e.exports=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}},function(e,t,i){var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){function i(e,t){return(typeof t)[0]==e}function n(t,r,n,a,o){setTimeout((function(){try{a=o(a),o=a&&i("o",a)|i(e,a)&&a.then,i(e,o)?a==t?n(TypeError()):o.call(a,r,n):r(a)}catch(e){n(e)}}))}function a(e){return r((function(t){t(e)}))}(r=function(t,a){return(a=function o(s,l,u,c,d,h){function p(e){return function(t){d&&(d=0,o(i,e,t))}}if(c=o.q,s!=i)return r((function(e,t){c.push({p:this,r:e,j:t,1:s,0:l})}));if(u&&i(e,u)|i("o",u))try{d=u.then}catch(e){l=0,u=e}if(i(e,d))try{d.call(u,p(1),l=p(0))}catch(e){l(e)}else for(a=function(a,o){return i(e,a=l?a:o)?r((function(e,t){n(this,e,t,u,a)})):t},h=0;h<c.length;)d=c[h++],i(e,s=d[l])?n(d.p,d.r,d.j,u,s):(l?d.r:d.j)(u)}).q=[],t.call(t={then:function(e,t){return a(e,t)},catch:function(e){return a(0,e)},always:function(e){return a(e,(function(t){throw e(t),t}))},finally:function(e){return e||(e=function(){}),a((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))}))}},(function(e){a(i,1,e)}),(function(e){a(i,0,e)})),t}).resolve=a,r.reject=function(e){return r((function(t,i){i(e)}))},r.all=function(e){return r((function(t,i,r,n){n=[],r=e.length||t(n),e.map((function(e,o){a(e).then((function(e){n[o]=e,--r||t(n)}),i)}))}))},r.race=function(e){return r((function(t,i){e.map((function(e){a(e).then(t,i)}))}))}}("f"),t.default=r},function(e,t,i){(function(e){i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return s}));var r,n={SUCCESS:0,FAIL:-1,CANCEL:-2,INTERFACE_NOT_EXIST:-3,RISK_INTERCEPT:-4,UNKNOWN:-5,NOT_IMPLEMENTED:-6,PARAMS_ERROR:1e3},a=((r={})[n.SUCCESS]="支付成功",r[n.FAIL]="支付失败",r[n.CANCEL]="支付取消",r[n.PARAMS_ERROR]="参数错误",r[n.INTERFACE_NOT_EXIST]="接口不存在",r[n.RISK_INTERCEPT]="风控拦截",r[n.SIGN_SUCCESS]="签约成功",r[n.SIGN_FAIL]="签约失败",r.CHANNEL_NOT_SUPPORT="渠道不支持",r),o={FAIL:{ret:n.FAIL,msg:a[n.FAIL]},NOT_IMPLEMENTED:{ret:n.NOT_IMPLEMENTED,msg:"该 API 不支持"}},s=function(e){return{ret:e,msg:a[e]}}}).call(t,i(1).default)},function(e,t,i){function r(e,t){for(var i=arguments.length,r=new Array(i>2?i-2:0),n=2;n<i;n++)r[n-2]=arguments[n];setTimeout((function(){return e.apply(void 0,r)}),t)}function n(e){return Object(l.a)(e)?e:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.delay=r,t.debounce=function(e,t,i){var n,a,o=function(t,i){n=null,i&&(a=e.apply(t,i))},s=function(){n&&clearTimeout(n);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];if(i){var c=!n;n=setTimeout(o,t),c&&(a=e.apply(this,l))}else n=r(o,t,this,l);return a};return s.cancel=function(){clearTimeout(n),n=null},s},i.d(t,"scene",(function(){return f})),t.toArray=n,i.d(t,"timer",(function(){return _})),t.endsWith=function(e,t){var i=e.length-t.length;return t.split("").every((function(t,r){return e[i+r]===t}))},t.retry=function(e,t){var i,n=t.times,a=t.interval,o=void 0===a?0:a,s=t.abort;return new u.default((function(t,a){!function l(){i=Date.now(),e().then(t).catch((function(e){if(0==--n)return a(e);if(s(e))return e.aborted=!0,a(e);var t=Date.now();o=Math.max(o-(t-i),0),r(l,o)}))}()}))},t.camelize=function(e){var t=function(e){return e.replace(/_([a-z0-9])/g,(function(e,t){return t.toUpperCase()}))};if(Object(s.a)(e))return t(e);if(Object(o.a)(e)){var i={};return Object(a.a)(e,(function(e,r){i[t(r)]=e})),i}return e},t.compact=function(e){var t={};return Object(a.a)(e,(function(e,i){void 0!==e&&(t[i]=e)})),t},t.normalizeOptions=function(e){var t={};return Object(a.a)(e,(function(e,i){t[i]=decodeURIComponent(e)})),t},t.signWithMD5=function(e,t){var i=(t||Object.keys(e)).sort().map((function(t){return e[t]?t+"="+e[t]:""})).join("&");return Object(h.a)(i+p.a.md5Salt).toUpperCase()},t.flattenObject=function(e){return Object(o.a)(e)?function e(t,i,r,n){void 0===i&&(i=""),void 0===r&&(r=[]),void 0===n&&(n=[]);var a={},s=r.indexOf(t);return-1!==s?(a[i]="[Circular "+n[s]+"]",a):(r.push(t),n.push(i||"$root"),Object.keys(t).forEach((function(s){var l=t[s],u=i?i+"."+s:s;Object(o.a)(l)?Object.assign(a,e(l,u,r,n)):"function"!=typeof l&&(a[u]=l)})),a)}(e):e};var a=i(10),o=i(7),s=i(8),l=i(9),u=i(1);i.d(t,"each",(function(){return a.a}));var c=i(22);i.d(t,"addParam",(function(){return c.a}));var d=i(18);i.d(t,"pick",(function(){return d.a}));var h=i(41),p=i(11),f=function(){var e={isQQMp:"object"==typeof qq,isWxPlugin:!1,isComponent:!1,isOwnerMP:!1};try{e.isWxPlugin=WECHATAPP_PLUGIN}catch(e){}try{e.isOwnerMP=PLUGIN_OWNER_MP}catch(e){}return e}(),g={},_={start:function(e){(e=n(e)).forEach((function(e){g[e]=(new Date).getTime()}))},get:function(e,t){var i=(e=n(e)).map((function(e){var i=(new Date).getTime()-g[e];return t&&(g[e]=i),i}));return i.length>1?i:i[0]},stop:function(e){return _.get(e,!0)},clear:function(e){(e=n(e)).forEach((function(e){delete g[e]}))}}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,i){(function(e){var i=function(){function t(e){e instanceof t?(this.stack=e.stack,this.message=e.message,this.name=e.name,this.info=e.info):(this.stack=(new Error).stack,this.message=e.msg,this.name="PayError",this.info=e)}return t.except=function(e){throw new t(e)},t.reject=function(i){return e.reject(new t(i))},t.prototype.toString=function(){return"PayError: "+this.message},t}();t.a=i}).call(t,i(1).default)},function(e,t,i){var r=i(44),n=i(0),a=i.n(n),o=i(1),s=["showModal","hideModal","showToast","hideToast","getSystemInfo","getNetworkType","requestPayment","requestVirtualPayment","navigateTo","navigateToMiniProgram","openBusinessView"].reduce((function(e,t){return e[t]=function(e){return new o.default((function(i,r){try{ZP[t](a()({},e,{success:i,fail:r}))}catch(e){i(!0)}}))},e}),{}),l={onAppShow:[]};s.onAppShow=function(e){l.onAppShow.push(e),Object(r.a)((function(){return ZP.onAppShow(e)}))},s.offAllAppShow=function(){l.onAppShow.forEach((function(e){Object(r.a)((function(){return ZP.offAppShow(e)}))}))},t.a=s},function(e,t,i){t.a=function(e){return Object(r.a)("Object",e)&&null!==e};var r=i(13)},function(e,t,i){t.a=function(e){return Object(r.a)("String",e)};var r=i(13)},function(e,t,i){t.a=function(e){return Object(r.a)("Array",e)};var r=i(13)},function(e,t,i){t.a=function(e,t){var i,n=0;if(Object(r.a)(e)){var a=e.length;for(i=e[0];n<a&&!1!==t.call(i,i,n,e);i=e[++n]);}else for(var o in e)if(!1===t.call(e[o],e[o],o,e))break;return e};var r=i(9)},function(e,t,i){t.c=function(){return"2.3.8"},t.b=function(){return["pf_header","wcp","hide_offer_name"]},i.d(t,"a",(function(){return r}));var r={md5Salt:"TwDbiyLgv93ysymjH6sHujMTXs9ehwe1"}},function(e,t,i){var r=i(24),n=i(0),a=i.n(n),o=new(function(){function e(){}var t=e.prototype;return t.getSdkParam=function(e){return void 0===e?this._sdkParam:this._sdkParam[e]},t.setSdkParam=function(e){this.initSdkParam(e),this._sdkParam=a()({},this._sdkParam,e)},t.initSdkParam=function(e){e.retry_times=void 0===e.retry_times?5:e.retry_times},t.setInfo=function(e){this._info=e},t.getInfo=function(e){return void 0===e?this._info:Object(r.a)(this._info,e)},e}());t.a=o},function(e,t,i){t.a=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}},function(e,t,i){i.d(t,"a",(function(){return u}));var r=i(0),n=i.n(r),a=i(5),o=i(3),s=i(21),l=i(1),u=function(){function e(e,t,i){void 0===i&&(i={}),this.app=e,this.payMod=t,this.params=i,this.payMod.cgi.setChannel(this),this.name="",this.buyReportIformat="",this.payReportIformatPrefix=""}var t=e.prototype;return t.buildBuyParams=function(e){},t.beforeSave=function(){return l.default.resolve()},t.buyAndPay=function(e){var t=this;this.report(this.buyReportIformat);var i=this.buildBuyParams(e);return this.beforeSave().then((function(){return t.params.enablePayScore?t.payMod.enablePayScore():t.params.isFriendsPayOrder?t.payMod.friendsPayOrder():t.payMod.save(i)})).then((function(e){return t.params.isFriendsPayOrder&&(~~e.ret?a.a.except(e):a.a.except({info:e.info,msg:"FRIENDS_PAY_ORDER"})),e})).then((function(e){return t.beforePay(e)})).then((function(e){return t.pay(e,i)}))},t.beforePay=function(e){return o.timer.start(this.name+"pay"),e},t.pay=function(e,t){},t.getChannelName=function(){return""},t.constructResult=function(e,t){return void 0===t&&(t={channel:this.getChannelName()}),new s.a(e).setExtra(t).getResult()},t.reportPay=function(e,t){var i="fail"===e?{resultCode:-9999}:void 0;this.report(this.payReportIformatPrefix+"."+e+".callback",n()({},t,{times:o.timer.get(this.name+"pay")}),i)},t.report=function(e,t,i){this.app.report(e,t,i)},t.log=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(i))},e}();u.ResultAdapter=s.a},function(e,t,i){i.d(t,"a",(function(){return s}));var r=i(8),n=i(9),a=Object.prototype.hasOwnProperty,o=function(e,t){var i=function(e,t){if(!Object(n.a)(t))throw new Error("arr should be array! found: "+t);return t.filter((function(t){if(Object(r.a)(t))return!(a.call(e,t)&&""!==e[t]&&void 0!==e[t]&&null!==e[t]);if(Object(n.a)(t)){var i=t[0],o=t[1];return!(a.call(e,i)&&o(e[i]))}throw new Error("validate item should be string or array.")})).map((function(e){return Object(n.a)(e)?e[0]:e}))}(e,t);return 0===i.length?{status:!0,msg:""}:{status:!1,msg:i.join(", ")+" 错误"}},s=function(e,t){return void 0===t&&(t=[]),o(e,["offer_id","openid"].concat(t))}},function(e,t,i){t.a=function(e,t){if(void 0===t&&(t=!0),!Object(r.a)(e))return"";var i=[];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&null!==e[n]){var a=t?encodeURIComponent(n):n,o=t?encodeURIComponent(e[n]):e[n];i.push(a+"="+o)}return i.join("&")};var r=i(7)},function(e,t,i){t.a=function(e){if(!Object(n.a)(e))return[];var t=[];return Object(r.a)(e,(function(e,i){t.push(i)})),t};var r=i(10),n=i(7)},function(e,t,i){t.a=function(e,t){return t.reduce((function(t,i){return t[i]=e[i],t}),{})}},function(e,t,i){t.a=function(){}},function(e,t,i){t.a=function(e,t,i){void 0===e&&(e=location.href),void 0===t&&(t="&"),void 0===i&&(i="=");var n=e.replace(/.+?\?/,"").replace(/#.*/,""),a=n.split(t);return r[n]||(r[n]=a.reduce((function(e,t){var r=t.indexOf(i);if(r>-1){var n=t.substr(0,r);if(n){var a=t.substr(r+1);try{e[n]=decodeURIComponent(a)}catch(t){e[n]=a}}}return e}),{})),r[n]};var r={}},function(e,t,i){i.d(t,"a",(function(){return a}));var r=i(0),n=i.n(r),a=function(){function e(e){var t=e.ret,i=e.err_code,r=void 0===i?"":i,n=e.msg;this.result={resultCode:t,resultMsg:n,innerCode:r}}var t=e.prototype;return t.setExtra=function(e){return void 0===e&&(e={}),this.result=n()({},this.result,e),this},t.getResult=function(){return this.result},e}()},function(e,t,i){t.a=function(e,t){if(!Object(o.a)(e))return t;var i=Object(a.a)(e);if(0===i.length)return t;t=Object(n.a)(i,t);var s=Object(r.a)(e);return t+(/(\?|&)$/.test(t)?""+s:/\?/.test(t)?"&"+s:"?"+s)};var r=i(16),n=i(40),a=i(17),o=i(7)},function(e,t,i){t.a=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return Object(n.a)(e)?Object(r.a)(t[0])?e.call.apply(e,[null].concat(t[0])):e.call.apply(e,[null].concat(t)):null};var r=i(9),n=i(43)},function(e,t,i){function r(e,t){for(var i=0,r=t.split(".");e&&i<r.length;)e=e[r[i++]];return e}t.a=function(){var e=Array.prototype.slice.call(arguments);return r(e[0],e.slice(1).join("."))}},function(e,t,i){var r=i(47),n=i(48),a=i(49);i(50),t.a={wechat:function(e,t,i){return void 0===i&&(i={}),new r.a(e,t,i)},wechatapp:function(e,t,i){return void 0===i&&(i={}),new n.a(e,t,i)},qqwallet:function(e,t,i){return void 0===i&&(i={}),new a.a(e,t,i)},jifenWechat:function(e,t,i){void 0===i&&(i={})}}},function(e,t,i){t.a=function(e,t){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],n=0;if(t=t||i.length,e)for(n=0;n<e;n++)r[n]=i[0|Math.random()*t];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",n=0;n<36;n++)if(!r[n]){var a=0|16*Math.random();r[n]=i[19===n?3&a|8:a]}return r.join("")}},function(e,t,i){i.d(t,"a",(function(){return I}));var r,n,a,o,s=i(16),l=i(34),u=i(0),c=i.n(u),d=i(36),h=i(5),p=i(7),f=i(4),g=i.n(f),_=i(37),m=i.n(_),v=i(2),y=i(21),A=i(38),b=i(12),E=i(6),w=i(3),T=i(46),C=(i.n(T),i(32)),S=i(25),I=(r=Object(A.a)(),n=Object(A.b)(),a=Object(A.c)(),o=function(e){function t(t,i){var r;return(r=e.call(this)||this).opt=t||{},b.a.setSdkParam(r.opt),r.api=i,r.name="BaseApi",r.params=null,r.callback=null,r.AppClass=null,r.app=null,r.callbackInvoked=!1,E.a.offAllAppShow(),r.checkUpdate({silent:t.silent}),r}g()(t,e);var i=t.prototype;return i.launchPay=function(e,t){var i=this;if("function"!=typeof t)throw new Error("Callback must be a function.");if(this.callbackInvoked)throw new Error("Midas instance should be re-initialized before calling `launchPay`.");this.initLaunch(e,t),Object(p.a)(e.context)&&(e.context.__MIDAS_EXTEND__={report:this.app.report.bind(this.app),util:w}),this.app.pay().then((function(e){return i.constructResult(e)})).then((function(e){return i.invokeCallback(e)})).catch((function(e){return i.errorCallback(e)})).finally((function(){return i._destroy()}))},i.launchSign=function(e,t){return this.callback=t,"continuous_month"!==e.sign_type||Object(w.endsWith)(e.product_id,"continuous_month_pid")?this.launchPay(e,t):this.errorCallback(new h.a({ret:v.b.PARAMS_ERROR,msg:"product_id should ends with continuous_month_pid"}))},i.launchFeature=function(e,t){if("ask"===e.type)return e.goodstokenurl="/v1/r/"+e.offer_id+"/mobile_goods_info?friends_pay_msg="+e.order_id+"&token_store_type=1&friends_pay_source=mobile",delete e.order_id,delete e.type,this.launchPay(e,t);if("pay_score"===e.type)return Object(d.a)(e.direct_channel)&&(e.direct_channel="wechat"),e.enablePayScore=!0,this.launchPay(e,t);if("friends_pay_order"===e.type)return e.isFriendsPayOrder=!0,this.launchPay(e,t);throw new Error("type is not valid.")},i.launchDirectPay=function(e,t){var i=this;switch(this.initLaunch(e,t),e.pay_method){case"wechat":var r=S.a.wechat(this.app,this.app.payMod,e),n={wx_info:e.pay_info};r.beforePay(n),r.pay(n).then((function(e){return i.constructResult(e)})).then((function(e){return i.invokeCallback(e)})).catch((function(e){return i.errorCallback(e)})).finally((function(){return i._destroy()}));break;default:throw new Error("pay_method is not valid.")}},i.initLaunch=function(e,t){this.params=e||{},b.a.setSdkParam(this.params),this.callback=t,this.app=new this.AppClass({params:e,opt:this.opt,api:this}),this.app.report("payparams",c()({},e,this.opt))},i.cancel=function(){"function"==typeof this.launchPay.cancel&&this.launchPay.cancel()},i.constructResult=function(e){return void 0===e&&(e={}),new y.a(e).setExtra(e.extra).getResult()},i.errorCallback=function(e){var t=c()({},Object(l.a)(e.info,["ret","msg","err_code"]),e.extra);if("PayError"===e.name){var i=new y.a(e.info).setExtra(t).getResult();if("FRIENDS_PAY_ORDER"===i.resultMsg){var r=b.a.getInfo("info.rate"),n=this.params.buy_quantity;return i.info&&!i.info.price_level&&(i.info.price_level=Math.round(n/parseInt(r))),i.info.friends_pay_msg=i.info.token,delete i.info.token,this.invokeCallback({resultCode:0,resultMsg:"下单成功",extendInfo:{token:Object(s.a)(i.info),priceLevel:i.info.price_level}})}return this.invokeCallback(i)}if(e.msg&&e.ret){var a=new y.a(e).setExtra(t).getResult();return this.invokeCallback(a)}return this.app&&this.app.clientLog("JS ERROR: "+e.message+". stack: "+e.stack,239,"midaspay/api/base-api.js"),this.invokeCallback()},i.invokeCallback=function(e){if(this.app.report("invoke.callback",c()({},e,{invoked:this.callbackInvoked})),!this.callbackInvoked&&"function"==typeof this.callback){var t=e||this.constructResult(v.a.FAIL);this.callback(t),this.callbackInvoked=!0}},i.destroy=function(){},i._destroy=function(){E.a.offAllAppShow(),this.invokeCallback(),b.a.getSdkParam("hide_loading")||E.a.hideToast(),this.cancel();try{this.app&&this.app.destroy&&(this.app.destroy(),this.app=null),this.callback=null,this.api.instance=null}catch(e){}},i.checkUpdate=function(e){return Object(C.a)(e)},i.log=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(i))},t}(T.TinyEmitter),m()(o.prototype,"launchPay",[r,n,a],Object.getOwnPropertyDescriptor(o.prototype,"launchPay"),o.prototype),o);I.createApi=function(e){return{init:function(t){return void 0===t&&(t={}),this.instance=new e(t,this),this.instance},get:function(){if(!this.instance)throw new Error(e+" is not initialized.");return this.instance},destroy:function(){this.instance&&(this.instance.destroy(),this.instance=null)}}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var i,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)i=a[r],t.indexOf(i)>=0||(n[i]=e[i]);return n}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,i){i.d(t,"a",(function(){return y}));var r=i(19),n=i(5),a=i(9),o=i(24),s=i(23),l=i(0),u=i.n(l),c=i(25),d=i(3),h=i(6),p=i(1),f=i(51),g=i(2),_=i(15),m=i(52),v=i(12),y=function(){function e(e){var t=e.params,i=void 0===t?{}:t,r=e.opt,n=e.api;this.params=i,this.opt=r,this.env={},this.payMod=null,this.api=n,this.params=u()({},i,{env:~~r.env,bizAppId:this.getBizAppid(i)}),this.validator=_.a,this.reportObj=new f.a,this.reportObj.setDefaultParams(this.params)}var t=e.prototype;return t.beforePay=function(){if(d.timer.start(this.name+"paystart"),this.showPayLoading({title:this.params.sign_type?"跳转签约中...":"支付中..."}),"function"==typeof this.validator&&!this.params._skipValidation){this.validator=this.params.enablePayScore?m.a:this.validator;var e=this.validator(this.params);return e.status?this.checkEnv():this.paramsError(e.msg)}return this.checkEnv()},t.pay=function(){var e=this;return this.beforePay().then((function(){if(!e.params.direct_channel)return e.payMod.getInfo()})).then((function(t){return e.getPayChannel(t)})).then((function(t){return e.directPay(t)}))},t.checkEnv=function(){return this.reportObj.init()},t.report=function(e,t,i){void 0===i&&(i={}),this.reportObj.report(e,t,i)},t.clientLog=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),this.report("client.log",{msg:e,line:t,file:i})},t.getPayChannel=function(e){if(Object(s.a)(this.params.onPayInfo,e),this.params.direct_channel)return p.default.resolve(this.params.direct_channel);v.a.setInfo(e);var t=Object(o.a)(e,"info.channel");if(Object(a.a)(t)){var i=d.scene.isQQMp,r={qqwallet:i,wechat:!i,wechatapp:!i},l=t.filter((function(e){return r[e.name]}));if(l.length>0)return p.default.resolve(l[0].name)}return this.report("channel.info.exception",{},{resultCode:"-9999"}),n.a.reject({ret:g.b.FAIL,msg:g.d.CHANNEL_NOT_SUPPORT,err_code:t.map((function(e){return e.name})).join(", ")})},t.canDirectPay=function(e){return!(!e||!Object.prototype.hasOwnProperty.call(c.a,e))||(this.report("directpay.nosupport",{channel:e}),!1)},t.directPay=function(e){var t=this;return this.canDirectPay(e)?(this.report("directpay",{channel:e}),c.a[e](this,this.payMod,this.params).buyAndPay().then((function(e){return t.report("payduration",{time:d.timer.get(t.name+"paystart")}),e}))):n.a.reject({ret:g.b.FAIL,msg:g.d.CHANNEL_NOT_SUPPORT})},t.getBizAppid=function(e){return 1!==parseInt(this.opt.use_default_wxappid)?e.biz_appid||"1":""},t.paramsError=function(e){return void 0===e&&(e=""),n.a.reject({ret:g.b.PARAMS_ERROR,msg:e||g.d[g.b.FAIL]})},t.showPayLoading=function(e){var t=void 0===e?{}:e,i=t.duration,r=void 0===i?30:i,n=t.title,a=void 0===n?"支付中...":n;v.a.getSdkParam("hide_loading")||h.a.showToast({title:a,icon:"loading",mask:!0,duration:1e3*r})},t.hidePayLoading=function(){v.a.getSdkParam("hide_loading")||h.a.hideToast()},t.destroy=function(){this.callback=r.a,this.reportObj.destroy(),this.payMod.cgi.clearNetworkTask(),this.payMod=null},t.log=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(i))},e}()},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(5),n=i(53),a=i(0),o=i.n(a),s=i(20),l=i(8),u=i(11),c=(i(2),i(12)),d=i(3),h=i(54),p=i(55),f=function(){function e(e,t){this.app=e,this.name="BasePayMod",this.params=t,this.params.extend=t.extend||"",this.processType="",this.infoReportIformat={pv:"info.pv",status:"info.status"},this.saveReportIformat={pv:"save.pv",status:"save.status"},this.session=new h.a({openid:t.openid,openkey:t.openkey||"no_key",sessionid:t.session_id||"hy_gameid",sessiontype:t.session_type||"wc_actoken"}),this.cgi=new p.a({pf:t.pf,pfkey:t.pfkey||"pfkey",appid:t.offer_id,sandbox:~~t.env,sessionObj:this.session,app:this.app})}var t=e.prototype;return t.getInfoPublicParams=function(){var e={process_type:this.processType,page_type:"mall",wx_appid:this.params.login_wx_appid||""};return this.params.pf_header&&(e.pf_header=this.params.pf_header),e},t.beforeGetInfo=function(e){d.timer.start(this.name+"info"),this.report(this.infoReportIformat.pv,e)},t.buildInfoParams=function(){},t.getInfo=function(){},t.getAdditionalParams=function(){var e=this.params.additional;return e?Object(l.a)(e)?Object(s.a)(decodeURIComponent(e)):e:{}},t.getSavePublicParams=function(){var e=this,t=o()({},this.getAdditionalParams(),{process_type:this.processType,page_type:"order",from_https:"1",from_h5:"1",extend:encodeURIComponent(this.params.extend||""),provide_uin:this.params.provide_uin||"",wx_appid:this.params.login_wx_appid||""});if(this.params.context&&Object.assign(t,{cr_flex:"1",fk_tips:"1"}),Object(u.b)().forEach((function(i){e.params[i]&&(t[i]=e.params[i])})),this.params.groupid){var i={GamePayMod:"currency_group",GoodsPayMod:"goods_group",SubscribePayMod:"version=3.0&month_group"}[this.name];t.drm_info=i+"="+this.params.groupid}return this.params.sp_info&&(t.sp_info=this.params.sp_info),this.params.out_trade_no&&(t.out_trade_no=this.params.out_trade_no),t},t.getScorePayParams=function(){return o()({},this.getAdditionalParams(),{service_id:this.params.service_id})},t.getFriendsPayOrderParams=function(){var e=c.a.getInfo("info.rate"),t=this.params,i=t.zoneid,r=t.buy_quantity,n=t.currency_type,a=t.change_wx_openid,s=void 0===a?"":a,l=t.login_wx_appid,u=void 0===l?"":l,d=t.extend,h=void 0===d?"":d,p=Math.round(100*r/parseInt(e));return o()({},this.getAdditionalParams(),{zoneid:i,buy_quantity:r,currency_type:n,change_wx_openid:s,wx_appid:u,extend:h,wcp:"type="+n+"&amt="+p})},t.beforeSave=function(e){this.report(this.saveReportIformat.pv,e),d.timer.start(this.name+"save")},t.buildSaveParams=function(e){void 0===e&&(e={})},t.save=function(e){},t.getPayParams=function(){return this.params},t.getZoneid=function(e){return void 0===e&&(e={}),e.zoneid||this.params.zoneid||"1"},t.getCurrencyType=function(){return this.params.currency_type||""},t.needCurrencyType=function(e){return void 0===e&&(e=""),"wechat_app"===e&&!this.params.currency_type},t.querySignResult=function(e){var t=this;return Object(d.retry)((function(){return t.cgi.querySignResult({wx_serialno:e})}),{times:this.params.retry_times,interval:this.params.retry_interval?Math.max(this.params.retry_interval,1e3):2e3,abort:function(e){return e.info&&5===e.info.status}})},t.report=function(e,t,i){this.app.report(e,t,i)},t.enablePayScore=function(){this.beforeSave();var e=this.cgi.wxOpenBusiness(this.getScorePayParams(),{method:"POST"});return this.wrapSave(e)},t.friendsPayOrder=function(){this.beforeSave();var e=this.cgi.getToken(this.getFriendsPayOrderParams(),{method:"POST"});return this.wrapSave(e)},t.reportInfo=function(e){this.report(this.infoReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code||"",res:Object(n.a)(e),times:d.timer.get(this.name+"info")},{resultCode:e.ret})},t.wrapInfo=function(e){var t=this;return e.then((function(e){return t.reportInfo(e),e})).catch((function(e){if(e instanceof r.a)throw e;t.reportInfo(e),r.a.except(e)}))},t.reportSave=function(e){this.report(this.saveReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code,res:Object(n.a)(e),times:d.timer.get(this.name+"save")},{resultCode:e.ret})},t.wrapSave=function(e){var t=this;return e.then((function(e){return t.reportSave(e),e})).catch((function(e){if(e instanceof r.a)throw e;t.reportSave(e),r.a.except(e)}))},t.log=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(i))},e}()},function(e,t,i){t.a=function(e){void 0===e&&(e={});var t=!0,i=Object(a.c)();try{"devtools"!==ZP.getSystemInfoSync().platform&&(t=!1)}catch(e){t=!1}var o={shouldUpdate:!1,latestVersion:"unknown",currentVersion:i,updateAt:"unknown"};return t?new n.default((function(t){ZP.request({url:"http://r.tnpm.oa.com/@tencent/midas-mp-sdk",success:function(i){var n=i.data["dist-tags"].latest,o=new Date(i.data.time[n]).toLocaleString(),s=Object(a.c)(),l=Object(r.a)(n,s)>0,u={shouldUpdate:l,latestVersion:n,currentVersion:s,updateAt:o},c=console;return c.group("Midas SDK"),c.log(u),c.groupEnd("Midas SDK"),l&&!e.silent&&ZP.showModal({title:"Midas SDK",content:"米大师 SDK 有新版可用，详情请查看官网 http://midas.qq.com。如需屏蔽该消息，请在 init 时传入参数 silent: true。",showCancel:!1}),t(u)},fail:function(){return t(o)}})})):n.default.resolve(o)};var r=i(33),n=i(1),a=i(11)},function(e,t,i){t.a=function(e,t){if(!Object(r.a)(e))return-1;if(!Object(r.a)(t))return 1;for(var i=e.split("."),n=t.split("."),a=Math.min(i.length,n.length),o=0;o<a;o++){var s=Number(i[o]),l=Number(n[o]);if(s>l)return 1;if(l>s)return-1;if(!isNaN(s)&&isNaN(l))return 1;if(isNaN(s)&&!isNaN(l))return-1}return 0};var r=i(8)},function(e,t,i){t.a=function(e,t){if(!Object(n.a)(t)||0===t.length)return e;var i=t.reduce((function(e,t){return e[t]=!0,e}),{});return Object(r.a)(e).reduce((function(t,r){return i[r]||(t[r]=e[r]),t}),{})};var r=i(17),n=i(9)},function(e,t){e.exports=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},function(e,t,i){t.a=function(e){return void 0===e}},function(e,t){e.exports=function(e,t,i,r,n){var a={};return Object.keys(r).forEach((function(e){a[e]=r[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce((function(i,r){return r(e,t,i)||i}),a),n&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(n):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}},function(e,t,i){var r=i(39);i.d(t,"a",(function(){return r.a}));var n=i(42);i.d(t,"b",(function(){return n.a}));var a=i(45);i.d(t,"c",(function(){return a.a}))},function(e,t,i){var r=i(3);t.a=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=3e3),function(i,n,a){var o=a.value;return a.value=Object(r.debounce)(o,t,e),a}}},function(e,t,i){t.a=function(e,t){return void 0===t&&(t=location.href),e instanceof Array||(e=[e]),t=t.replace(/[\r\n]/g,""),Object(r.a)(e,(function(e){t=(t=t.replace(new RegExp("(?:&"+e+"=[^&]*)","g"),"")).replace(new RegExp("(?:\\?"+e+"=[^&]*&?)","g"),"?")})),t};var r=i(10)},function(e,t,i){function r(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function n(e,t,i,n,a,o){return r(function(e,t){return e<<t|e>>>32-t}(r(r(t,e),r(n,o)),a),i)}function a(e,t,i,r,a,o,s){return n(t&i|~t&r,e,t,a,o,s)}function o(e,t,i,r,a,o,s){return n(t&r|i&~r,e,t,a,o,s)}function s(e,t,i,r,a,o,s){return n(t^i^r,e,t,a,o,s)}function l(e,t,i,r,a,o,s){return n(i^(t|~r),e,t,a,o,s)}function u(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var i,n,u,c,d,h=1732584193,p=-271733879,f=-1732584194,g=271733878;for(i=0;i<e.length;i+=16)n=h,u=p,c=f,d=g,h=a(h,p,f,g,e[i],7,-680876936),g=a(g,h,p,f,e[i+1],12,-389564586),f=a(f,g,h,p,e[i+2],17,606105819),p=a(p,f,g,h,e[i+3],22,-1044525330),h=a(h,p,f,g,e[i+4],7,-176418897),g=a(g,h,p,f,e[i+5],12,1200080426),f=a(f,g,h,p,e[i+6],17,-1473231341),p=a(p,f,g,h,e[i+7],22,-45705983),h=a(h,p,f,g,e[i+8],7,1770035416),g=a(g,h,p,f,e[i+9],12,-1958414417),f=a(f,g,h,p,e[i+10],17,-42063),p=a(p,f,g,h,e[i+11],22,-1990404162),h=a(h,p,f,g,e[i+12],7,1804603682),g=a(g,h,p,f,e[i+13],12,-40341101),f=a(f,g,h,p,e[i+14],17,-1502002290),h=o(h,p=a(p,f,g,h,e[i+15],22,1236535329),f,g,e[i+1],5,-165796510),g=o(g,h,p,f,e[i+6],9,-1069501632),f=o(f,g,h,p,e[i+11],14,643717713),p=o(p,f,g,h,e[i],20,-373897302),h=o(h,p,f,g,e[i+5],5,-701558691),g=o(g,h,p,f,e[i+10],9,38016083),f=o(f,g,h,p,e[i+15],14,-660478335),p=o(p,f,g,h,e[i+4],20,-405537848),h=o(h,p,f,g,e[i+9],5,568446438),g=o(g,h,p,f,e[i+14],9,-1019803690),f=o(f,g,h,p,e[i+3],14,-187363961),p=o(p,f,g,h,e[i+8],20,1163531501),h=o(h,p,f,g,e[i+13],5,-1444681467),g=o(g,h,p,f,e[i+2],9,-51403784),f=o(f,g,h,p,e[i+7],14,1735328473),h=s(h,p=o(p,f,g,h,e[i+12],20,-1926607734),f,g,e[i+5],4,-378558),g=s(g,h,p,f,e[i+8],11,-2022574463),f=s(f,g,h,p,e[i+11],16,1839030562),p=s(p,f,g,h,e[i+14],23,-35309556),h=s(h,p,f,g,e[i+1],4,-1530992060),g=s(g,h,p,f,e[i+4],11,1272893353),f=s(f,g,h,p,e[i+7],16,-155497632),p=s(p,f,g,h,e[i+10],23,-1094730640),h=s(h,p,f,g,e[i+13],4,681279174),g=s(g,h,p,f,e[i],11,-358537222),f=s(f,g,h,p,e[i+3],16,-722521979),p=s(p,f,g,h,e[i+6],23,76029189),h=s(h,p,f,g,e[i+9],4,-640364487),g=s(g,h,p,f,e[i+12],11,-421815835),f=s(f,g,h,p,e[i+15],16,530742520),h=l(h,p=s(p,f,g,h,e[i+2],23,-995338651),f,g,e[i],6,-198630844),g=l(g,h,p,f,e[i+7],10,1126891415),f=l(f,g,h,p,e[i+14],15,-1416354905),p=l(p,f,g,h,e[i+5],21,-57434055),h=l(h,p,f,g,e[i+12],6,1700485571),g=l(g,h,p,f,e[i+3],10,-1894986606),f=l(f,g,h,p,e[i+10],15,-1051523),p=l(p,f,g,h,e[i+1],21,-2054922799),h=l(h,p,f,g,e[i+8],6,1873313359),g=l(g,h,p,f,e[i+15],10,-30611744),f=l(f,g,h,p,e[i+6],15,-1560198380),p=l(p,f,g,h,e[i+13],21,1309151649),h=l(h,p,f,g,e[i+4],6,-145523070),g=l(g,h,p,f,e[i+11],10,-1120210379),f=l(f,g,h,p,e[i+2],15,718787259),p=l(p,f,g,h,e[i+9],21,-343485551),h=r(h,n),p=r(p,u),f=r(f,c),g=r(g,d);return[h,p,f,g]}function c(e){var t,i="",r=32*e.length;for(t=0;t<r;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function d(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function h(e){var t,i,r="0123456789abcdef",n="";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n}function p(e){return unescape(encodeURIComponent(e))}function f(e){return function(e){return c(u(d(e),8*e.length))}(p(e))}function g(e,t){return function(e,t){var i,r,n=d(e),a=[],o=[];for(a[15]=o[15]=void 0,n.length>16&&(n=u(n,8*e.length)),i=0;i<16;i+=1)a[i]=909522486^n[i],o[i]=1549556828^n[i];return r=u(a.concat(d(t)),512+8*t.length),c(u(o.concat(r),640))}(p(e),p(t))}t.a=function(e,t,i){return t?i?g(t,e):function(e,t){return h(g(e,t))}(t,e):i?f(e):function(e){return h(f(e))}(e)}},function(e,t,i){var r=i(23),n=i(6);t.a=function(e){return function(t,i,a){if("launchPay"!==i||e)return a;var o=a.value;return a.value=function(){for(var e=this,t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];if(~~this.opt.env){if(this.opt.__unsafe_disable_sandbox_tips)return void o.apply(this,i);n.a.showModal({content:"温馨提示：您即将进入测试环境，任何充值都无法在真实环境中使用。若您不是测试人员，请勿充值。",showCancel:!1}).then((function(t){t.confirm?o.apply(e,i):Object(r.a)(a.value.cancel)}))}else o.apply(this,i)},a}}},function(e,t,i){t.a=function(e){return Object(r.a)("Function",e)};var r=i(13)},function(e,t,i){t.a=function(e,t){try{return e()}catch(e){return t?t(e):null}}},function(e,t,i){t.a=function(){return function(e,t,i){if(o.scene.isQQMp){var n=i.value;i.value=function(e,t){if(!e.useRequestMidasPayment)return n.call(this,e,t);var s=Object(o.camelize)(e),u=Object(o.compact)(a()({zoneId:s.zoneid||s.zoneId||"1"},Object(r.a)(s,["offerId","buyQuantity","isCanChange","discountId","aid","other"]),s._internal_qq_req_mdspay_param,{success:function(e){return t(l(e))},fail:function(e){return t(l(e))},complete:function(){return i.value.cancel&&i.value.cancel()}}));qq.requestMidasPayment(u)}}return i}};var r=i(18),n=i(0),a=i.n(n),o=i(3),s=i(2),l=function(e){var t={0:0,"-1":-1,2:-2,3:1e3},i=String(e.errCode||e.resultCode),r=e.errMsg||e.resultMsg||"";if(Object.prototype.hasOwnProperty.call(t,i))return{resultCode:t[i],resultMsg:r};var n=s.b.FAIL;return{resultCode:n,resultMsg:s.d[n]}}},function(e,t){function i(){}i.prototype={on:function(e,t,i){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:i}),this},once:function(e,t,i){function r(){n.off(e,r),t.apply(i,arguments)}var n=this;return r._=t,this.on(e,r,i)},emit:function(e){for(var t=[].slice.call(arguments,1),i=((this.e||(this.e={}))[e]||[]).slice(),r=0,n=i.length;r<n;r++)i[r].fn.apply(i[r].ctx,t);return this},off:function(e,t){var i=this.e||(this.e={}),r=i[e],n=[];if(r&&t)for(var a=0,o=r.length;a<o;a++)r[a].fn!==t&&r[a].fn._!==t&&n.push(r[a]);return n.length?i[e]=n:delete i[e],this}},e.exports=i,e.exports.TinyEmitter=i},function(e,t,i){i.d(t,"a",(function(){return _}));var r=i(20),n=i(5),a=i(18),o=i(0),s=i.n(o),l=i(4),u=i.n(l),c=i(3),d=i(1),h=i(2),p=i(14),f=i(6),g=i(12),_=function(e){function t(t,i,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,i,r)||this).name="WechatChannel",n.api=n.app.api,n.buyReportIformat="wechat.buy",n.payReportIformatPrefix="wechat_pay",n.buyParams={},n}u()(t,e);var i=t.prototype;return i.buildBuyParams=function(e){return this.buyParams=s()({wx_direct_pay:this.params.referer?3:0,wx_publice_pay:1,pay_method:"wechat"},e),"1"==this.payMod.getPayParams().change_wx_openid&&(this.buyParams.change_wx_openid="1"),this.buyParams},i.getChannelName=function(){return"wechat"},i.pay=function(e,t){if(e.wx_info=e.wx_info||{},e.info=e.info||{},this.report("wechat.handlebuy",e&&e.wx_info),f.a.hideToast(),c.scene.isOwnerMP||c.scene.isWxPlugin)return d.default.resolve({ret:0,extra:{wx_info:e.wx_info}});if(e.info.service_id)return this.payScore(e.info);var i=this.getSignUrl(e);return i?(this.wxSerialNo=e.wx_info?e.wx_info.wx_serialno:"",this.sign(i)):this.requestPayment(e)},i.payScore=function(e){var t=this;this.report("payscore.params",e);var i=function(){var e=g.a.getSdkParam("wx_api"),t="",i={};return"openBusinessView"===e?(t=e,i={businessType:"wxpayScoreEnable"}):(t="navigateToMiniProgram",i={appId:"wxd8f3793ea3b935b8",path:"pages/use/enable"}),{payScoreApi:t,payScoreParams:i}}(),r=i.payScoreApi,o=i.payScoreParams,l=g.a.getSdkParam("wx_extra")||{};return f.a[r](s()({},o,{extraData:Object(a.a)(e,["mch_id","service_id","out_request_no","timestamp","nonce_str","sign_type","sign"]),envVersion:g.a.getSdkParam("mp_env")},l)).then((function(){return n.a.except({ret:h.b.UNKNOWN,msg:"信用分开通结果未知，请从后台查询"})})).catch((function(e){if(e instanceof n.a)throw e;return t.report("payscore.navigate.error",e),n.a.except({ret:h.b.FAIL,msg:e.errMsg||"开通信用分失败"})}))},i.sign=function(e){var t=this,i=Object(r.a)(e);return this.report("sign.params",i),this.unknownError=new n.a({ret:h.b.UNKNOWN,msg:"签约结果未知"}),f.a.navigateToMiniProgram({appId:"wxbd687630cd02ce1d",path:"pages/index/index",extraData:i}).then((function(e){var i=new d.default((function(e,i){Object(c.delay)((function(){t.report("sign.timeout"),i(t.unknownError)}),15e3)}));return d.default.race([t.onNavigationSuccess(e,"wxbd687630cd02ce1d"),i])})).catch((function(e){if(e===t.unknownError)throw e;t.report("sign.navigate.error",e),n.a.except({ret:h.b.FAIL,msg:e.errMsg||"签约失败"})}))},i.onNavigationSuccess=function(e){var t=this;return this.report("sign.navigate.success",e),this.api.emit("navigateToSign"),new d.default((function(e,i){f.a.onAppShow((function(r){var a=r.referrerInfo||{},o=a.appId,s=a.extraData;if("wxbd687630cd02ce1d"===o){var l=s&&"SUCCESS"!==s.return_code,u={ret:h.b.SUCCESS,msg:"签约成功"};if(l)throw Error();return t.wxSerialNo&&t.params.retry_times>0?(t.app.showPayLoading({duration:10,title:"查询结果中..."}),t.payMod.querySignResult(t.wxSerialNo).then((function(i){return t.report("query.sign.success",i),e(u)})).catch((function(e){return t.report("query.sign.fail",e),i(e&&e.info&&5===e.info.status?new n.a({ret:h.b.FAIL,msg:"签约失败"}):t.unknownError)}))):i(t.unknownError)}}))}))},i.normalizePayParams=function(e){if(e.wx_package)return{timeStamp:e.wx_time,nonceStr:e.wx_noncenum,package:e.wx_package,signType:e.wx_signtype,paySign:e.wx_sign};if(e.sign)return s()({},Object(a.a)(e,["timeStamp","nonceStr","package","signType"]),{paySign:e.sign});throw new Error("Unknown pay info: "+JSON.stringify(e))},i.requestPayment=function(e){var t=this,i=this.normalizePayParams(e.wx_info);if(this.report("wechatpay.start.pv"),this.params.wx_h5pay){var a=Object(r.a)(i.paySign),o=e.info.portal_serial_no;return ZP.getSystemInfoSync().isQB&&this.params.referer?new d.default((function(i){ZP.requestPayment(s()({},a,{referer:t.params.referer,complete:function(){return i({ret:h.b.UNKNOWN,msg:"支付结果未知，请从后台查询",extra:{portalSerialNo:e.info.portal_serial_no}})}}))})):{ret:h.b.SUCCESS,msg:"",extra:s()({},a,{mweb_url:i.paySign,portalSerialNo:o})}}return f.a.requestPayment(i).then((function(e){return t.log("pay success",e),t.reportPay("success",e),{ret:h.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.log("pay fail ",e),t.reportPay("fail",e);var i=(e.errMsg||"").indexOf("cancel")>-1?h.b.CANCEL:h.b.FAIL,r=void 0===e.errCode?i:e.errCode,a=e.errMsg||h.d[r];n.a.except({ret:r,msg:a})}))},i.getSignUrl=function(e){return e.wx_info.wx_sign_url||decodeURIComponent(e.url||"")},t}(p.a)},function(e,t,i){i.d(t,"a",(function(){return h}));var r=i(0),n=i.n(r),a=i(5),o=i(4),s=i.n(o),l=i(2),u=i(1),c=i(14),d=i(6),h=function(e){function t(t,i,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,i,r)||this).name="WechatAppChannel",n.buyReportIformat="wechat_app.buy",n.payReportIformatPrefix="wechatapp_pay",n}s()(t,e);var i=t.prototype;return i.beforeSave=function(){return ZP&&ZP.requestVirtualPayment?u.default.resolve():(this.report("requestVirtualPayment.notexist"),a.a.reject({ret:l.b.INTERFACE_NOT_EXIST,msg:l.d[l.b.INTERFACE_NOT_EXIST]}))},i.buildBuyParams=function(e){if(this.payMod.needCurrencyType(this.getChannelName()))return this.app.paramsError("需要currency_type参数");var t=n()({currency_type:this.payMod.getCurrencyType(),pay_method:this.getChannelName()},e);return"1"==this.payMod.getPayParams().change_wx_openid&&(t.change_wx_openid="1"),t},i.getChannelName=function(){return"wechatapp"},i.decryptOrderId=function(e){if("string"!=typeof e)return"";var t=ZP.aesjs,i=e.split("_"),r=i[0],n=i[1];if(!r||!n)return"";var a=t.utils.hex.toBytes(r),o=this.payMod.cgi.sandbox?"0269bd8009164afc":"2Wozy2aksie1puXU",s=t.utils.utf8.toBytes(o),l=new t.ModeOfOperation.ecb(s).decrypt(a).slice(0,n);return t.utils.utf8.fromBytes(l)},i.pay=function(e){var t=this;return this.report("wechat_app.handlebuy",e&&e.wechatapp_info),d.a.hideToast(),new u.default((function(i,r){var o=e.wechatapp_info||{},s=o.price_level,u=o.orderid,c=o.orderid,d=o.desc,h=o.sign,p=o.ext_info,f=e.sp_info||{};t.report("wechatapp_pay.start.pv"),ZP.requestVirtualPayment({priceLevel:s,businessOrderId:u,outTradeNo:c,desc:d,virtualPaySign:h,extInfo:p,success:function(e){t.reportPay("success",e);var r=l.b.SUCCESS,n=e.errMsg;i({ret:r,msg:n})},fail:function(e){t.reportPay("fail",e);var i=e.errMsg||"",o=i.indexOf("cancel")>-1?l.b.CANCEL:l.b.FAIL,s=void 0===e.errCode?o:e.errCode,u=i||l.d[s],c={};f.channel_orderid&&(f.channel_orderid=t.decryptOrderId(f.channel_orderid),c.spInfo=f),r(new a.a(n()({ret:s,msg:u},c)))}})}))},t}(c.a)},function(e,t,i){i.d(t,"a",(function(){return d}));var r=i(5),n=i(0),a=i.n(n),o=i(4),s=i.n(o),l=i(2),u=i(14),c=i(6),d=function(e){function t(t,i,r){var n;return void 0===r&&(r={}),(n=e.call(this,t,i,r)||this).name="QQWalletChannel",n.api=n.app.api,n.buyReportIformat="qqwallet.buy",n.payReportIformatPrefix="qqwallet_pay",n.buyParams={},n}s()(t,e);var i=t.prototype;return i.buildBuyParams=function(e){return this.buyParams=a()({cft_type:"tokenid",pay_method:"qqwallet"},e),this.buyParams},i.getChannelName=function(){return"qqwallet"},i.pay=function(e){return e.qqwallet_info=e.qqwallet_info||{},this.report("qqwallet.handlebuy",e&&e.qqwallet_info),c.a.hideToast(),this.requestPayment(e.qqwallet_info)},i.requestPayment=function(e){var t=this,i=e||{},n=i.qqwallet_bargainorId,a=i.qqwallet_tokenId;return this.report("qqwalletpay.start.pv",e),c.a.requestPayment({bargainor_id:n,package:"prepay_id="+a}).then((function(e){return t.reportPay("success",e),{ret:l.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.report("fail",e);var i=(e.errMsg||"").indexOf("cancel")>-1?l.b.CANCEL:l.b.FAIL,n=void 0===e.errCode?i:e.errCode,a=e.errMsg||l.d[n];throw new r.a({ret:n,msg:a})}))},t}(u.a)},function(e,t,i){i(5);var r=i(0),n=(i.n(r),i(4)),a=(i.n(n),i(2),i(1),i(14));i(6);a.a},function(e,t,i){i.d(t,"a",(function(){return h}));var r=i(19),n=i(16),a=i(0),o=i.n(a),s=i(26),l=i(11),u=i(6),c=i(1),d=i(3),h=function(){function e(){this.reportQueue=[],this.pid=0,this.iformatPrefix="",this.env={},this.params={},this.transactionId=Object(s.a)()+"_"+(new Date).getTime(),this.handleReportComplete=this.handleReportComplete.bind(this),this.name="Report"}var t=e.prototype;return t.constructParams=function(e,t,i){void 0===i&&(i={});var r=o()({6:10,7:0,8:t?Object(n.a)(Object(d.flattenObject)(t)):"",13:this.pid++,21:[this.iformatPrefix,e].join("."),31:"midas_wx_sdk_"+Object(l.c)(),38:(new Date).getTime(),29:this.transactionId},i);return Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("|")},t.doSend=function(){var e,t=this,i=this.reportQueue[0]||{},r=i.iformat,n=i.resultInfo,a=i.opt;if(r){var o=ZP.request({url:"https://api.unipay.qq.com/v1/900/15499/log_data",method:"POST",data:{num:1,record0:this.constructParams(r,n,a),rr:Math.random()},header:{"content-type":"application/x-www-form-urlencoded"},complete:function(){clearTimeout(e),t.handleReportComplete()}});e=setTimeout((function(){try{o.abort()}catch(e){}}),3e3)}},t.handleReportComplete=function(){this.reportQueue.shift(),this.reportQueue.length>0&&this.doSend()},t.send=function(e,t,i){var r=this;void 0===i&&(i={}),this.reportQueue.push({iformat:e,resultInfo:t,opt:i}),1===this.reportQueue.length&&setTimeout((function(){r.doSend()}),0)},t.destroy=function(){},t.setIformatPrefix=function(e){this.iformatPrefix=e},t.setDefaultParams=function(e){this.params=e},t.init=function(){var e=this;if(this.report("before.checkenv"),this.env.model)return this.report("after.checkenv",this.env),this.env,c.default.resolve(this.env);var t=u.a.getSystemInfo().then((function(t){e.env=o()({},e.env,t)})).catch(r.a),i=u.a.getNetworkType().then((function(t){void 0===t&&(t={}),t.networkType,e.env.networkType=t.networkType})).catch(r.a);return c.default.all([t,i]).then((function(){e.report("after.checkenv",e.env),e.env}))},t.getPlatform=function(){var e=this.env;return e.model?e.model.indexOf("iPhone")>-1?"ios":"android":""},t.getLibVersion=function(){var e=this.env;return e&&e.version||""},t.report=function(e,t,i){void 0===i&&(i={}),this.iformatPrefix.split(".").slice(1).join("."),this.send(e,t,{3:this.params.openid||"",37:this.params.session_id||"",43:this.params.session_type||"",41:this.params.login_wx_appid||"",26:this.params.pf||"",7:i.resultCode||0,19:this.params.service_code||"",24:this.params.offer_id||"",50:this.getPlatform()+"_"+this.getLibVersion(),51:this.params.aid||""})},t.log=function(){for(var e,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(i))},e}()},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(15),n=function(e){return Object(r.a)(e,["pf","service_id"])}},function(e,t,i){function r(e){return Object(l.a)(e,(function(t,i){Object(n.a)(t)&&""===t&&delete e[i],Object(a.a)(t)&&0===t.length&&delete e[i],Object(o.a)(t)&&(r(t),0===Object(s.a)(t).length&&delete e[i])})),e}t.a=function(e){if(!Object(o.a)(e))return e.toString();try{var t=r(JSON.parse(JSON.stringify(e)));return JSON.stringify(t)}catch(t){return JSON.stringify(e)}};var n=i(8),a=i(9),o=i(7),s=i(17),l=i(10)},function(e,t,i){i.d(t,"a",(function(){return r}));var r=function(){function e(e){this.openid=e.openid.toString(),this.openkey=e.openkey||"",this.sessionid=e.sessionid,this.sessiontype=e.sessiontype}return e.prototype.getSessionParam=function(){return{openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),session_id:encodeURIComponent(this.sessionid),session_type:encodeURIComponent(this.sessiontype)}},e}()},function(e,t,i){i.d(t,"a",(function(){return p}));var r=i(5),n=i(0),a=i.n(n),o=i(56),s=i(26),l=i(11),u=i(2),c=i(1),d=i(57),h=i(3),p=function(){function e(e){void 0===e&&(e={}),this.pf=e.pf||"html5",this.pfkey=e.pfkey||"pfkey",this.appid=e.appid,this.sandbox=~~e.sandbox,this.sessionObj=e.sessionObj||null,this.domain=["","sandbox.","dev."][this.sandbox]+"api.unipay.qq.com",this.sessionToken=e.sessionToken||Object(s.a)()+(new Date).getTime(),e.extend&&(this.extend=e.extend),this.requestTasks={},this.taskId=0,this.channel=null}var t=e.prototype;return t.setChannel=function(e){this.channel=e},t._getCgiUrl=function(e,t,i){return void 0===t&&(t={}),void 0===i&&(i={}),Object(o.a)(e.url,a()({appid:this.appid,domain:"https://"+this.domain},t))},t._getSessionParam=function(){return a()({pf:this.pf,pfkey:this.pfkey,from_h5:1,session_token:this.sessionToken,r:Math.random()},this.sessionObj.getSessionParam())},t.wxOpenBusiness=function(t,i){var r=a()({sub_channel:2},t,this._getSessionParam(),{wechatapp_proxy_type:"wx_open_business"});return r.sig=Object(h.signWithMD5)(r,["openid","openkey","session_id","session_type","service_id"]),this.request(this._getCgiUrl(e.url.wechatAppProc),r,i)},t.getToken=function(t,i){var r=a()({action:"new_friends_pay",friends_pay_source:"wechatapp",type:"save"},t,this._getSessionParam(),{wechatapp_proxy_type:"get_token"});return this.request(this._getCgiUrl(e.url.wechatAppProc),r,i)},t.request=function(e,t,i){var r=this;if(void 0===t&&(t={}),void 0===i&&(i={}),!ZP)throw new Error("wx is not defined.");t.webversion="midaswxapp_"+Object(l.c)();var n,a=this.genTaskId();return(e.split("?")[0]||"").match(/(\w+)$/),new c.default((function(o,s){var l=ZP.request({url:e,method:i.method||"GET",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:t,success:function(e){void 0===e&&(e={});var i={ret:-9998,httpCode:e.statusCode,msg:"系统繁忙，请稍后再试！"};return e.statusCode>=200&&e.statusCode<=299?e.data&&0===e.data.ret?o(e.data):(e.data.ret||(e.data=i),e.data.msg=e.data.msg||i.msg,Object(d.a)(e,t,r.channel).then(o).catch(s)):s(i)},fail:function(e){var t=e.errMsg||"";return s({ret:-9999,msg:"请求超时！（"+t+"）"})},complete:function(){r.clearSingleNetworkTask(a),n=null}});n=setTimeout((function(){n=null;try{l.abort()}catch(e){}}),12e3),r.addNetworkTask(a,l,n)}))},t.mobileSaveGoods=function(t,i){void 0===t&&(t={});var r=t._params;delete t._url,delete t._mid,delete t._params;var n=a()({biz_appid:this.sessionObj.appid||""},this._getSessionParam(),t);return r&&(/\/mobile_goods_info\?/.test(r)?r=r.replace(/mobile_goods_info\?.*/,"wechatapp_proc"):/\/qz_goods_info\?/.test(r)&&(r=r.replace(/qz_goods_info\?.*/,"wechatapp_proc"))),this.request(this._getCgiUrl(e.url.mobileSaveGoods,{params:r}),n,i)},t.mobileGoodsInfo=function(t,i){void 0===t&&(t={});var r=t.params;delete t.params;var n=a()({},this._getSessionParam(),t);return r&&(/\/mobile_goods_info\?/.test(r)?r=r.replace(/mobile_goods_info\?.+/,"wechatapp_proc"):/\/qz_goods_info\?/.test(r)&&(r=r.replace(/qz_goods_info\?.+/,"wechatapp_proc"))),this.request(this._getCgiUrl(e.url.mobileGoodsInfo,{params:r}),n,i)},t.wechatAppProc=function(e,t){return this.commonEndpoint("wechatAppProc",e,t)},t.querySignResult=function(e,t){return this.commonEndpoint("wechatAppProc",a()({},e,{cmd:17,wechatapp_proxy_type:"wechat_query"}),t).then((function(e){if(4!==e.wx_order_status)throw new r.a({ret:u.b.FAIL,status:e.wx_order_status})}))},t.commonEndpoint=function(t,i,r){void 0===i&&(i={}),void 0===r&&(r={});var n=a()({},this._getSessionParam(),i);return this.request(this._getCgiUrl(e.url[t]),n,r)},t.addNetworkTask=function(e,t,i){this.requestTasks[e]={task:t,timeout:i}},t.clearNetworkTask=function(){var e=this;Object.keys(this.requestTasks).forEach((function(t){e.clearSingleNetworkTask(t)})),this.requestTasks={}},t.clearSingleNetworkTask=function(e){var t=this.requestTasks[e];try{t.timeout&&clearTimeout(t.timeout),t.task&&t.task.abort&&t.task.abort(),delete this.requestTasks[e]}catch(e){}},t.genTaskId=function(){return++this.taskId},e}();p.url={mobileGoodsInfo:{url:"$domain$$params$",https:!0},mobileSaveGoods:{url:"$domain$$params$",https:!0},wechatAppProc:{url:"$domain$/v1/r/$appid$/wechatapp_proc?",https:!0},wxOpenBusiness:{url:"$domain$/v1/r/$appid$/wx_open_business?",https:!0},getToken:{url:"$domain$/v1/r/$appid$/get_token?",https:!0}}},function(e,t,i){t.a=function(e,t){return Object(n.a)(e)&&Object(a.a)(t)?e.replace(/\$([a-zA-Z0-9_\.]*)\$/g,(function(e,i){if(-1!==i.indexOf(".")){i=i.split(/\./g);var n=t;return Object(r.a)(i,(function(e){n=n[e]})),n||""}return void 0!==t[i]?t[i]:""})):e};var r=i(10),n=i(8),a=i(7)},function(e,t,i){var r=i(19),n=i(5),a=i(22),o=i(7),s=i(0),l=i.n(s),u=i(8),c=i(1),d=i(6),h=i(2),p=i(12),f=i(3),g={5001:"buyQuantity参数错误，请参考虚拟支付教程中虚拟支付API接口说明",7007:"获取微信授权失败，请使用小游戏管理员账号重新授权登录",7006:"配置信息未发布沙箱，请在MP管理端将游戏币托管配置信息进行“沙箱发布”"},_=function(e){var t=l()({},e);if(1003===e.ret){var i=function(e){return Object(u.a)(e)&&e.split(/-+/)[1]||""}(e.err_code);g[i]&&(t.msg=g[i])}if(1138===e.ret){if(parseInt(p.a.getSdkParam("hide_risk_modal")))throw t;return function(e,t){var i=l()({},Object(h.c)(t),{err_code:e.err_code||"",extra:{resultInfo:e.msg}});return d.a.showModal({content:e.msg,showCancel:!1}).then((function(){return i})).catch((function(){return i}))}(t,h.b.RISK_INTERCEPT).then((function(e){throw e}))}throw t},m=function(e,t,i){if(2022===e.ret){var s=p.a.getSdkParam("context");if(!Object(o.a)(s))throw e;var u=l()({},e).flex_attack_info,g=void 0===u?{}:u,_=Object(f.pick)(t,["openid","openkey","session_id","session_type","from_h5","pf","pfkey","session_token","webversion","pay_method"]);"no_key"===_.openkey&&"wc_actoken"===_.session_type&&(_.session_type="st_dummy");var m=p.a.getSdkParam("hide_rc_switch"),v={hide_switch:void 0===m||m?1:"",amt:g.fk_amt,fk_info:encodeURIComponent(g.fk_info),from:"miniprogram",rcs_version:"1.0",r:Math.random(),type:"save",appid:p.a.getSdkParam("offer_id"),sandbox:p.a.getSdkParam("sandbox"),verify_url:g.verify_url},y=p.a.getSdkParam("rc_page")||"/pages/midas-rc/midas-rc",A=s.__MIDAS_EXTEND__,b=Object(a.a)(l()({},_,v),y);return new c.default((function(t,a){d.a.navigateTo({url:b}).catch((function(t){a(e)})),A.riskControlCallback=function(e,o){if(void 0===o&&(o={}),(e=e||{}).error&&!parseInt(p.a.getSdkParam("hide_risk_modal"))&&d.a.showModal({title:"提示",content:"对不起，目前不支持该验证方式，请选择其他验证方式并重试",showCancel:!1}),!o.fk_rc_token||e.error)return a(new n.a(Object(h.c)(h.b.RISK_INTERCEPT)));var s=i.buildBuyParams(o);i.payMod.save(s).then(t).catch(a),A.riskControlCallback=r.a}}))}throw e};t.a=function(e,t,i){void 0===e&&(e={});var r=null===i?"":i.getChannelName(),a=e.data||{},o={wechatapp:_,default:m},s="function"==typeof o[r]?o[r]:o.default;return c.default.resolve().then((function(){return s(a,t,i)})).catch((function(t){if(t instanceof n.a)throw t;throw Object(f.pick)(e.data,["msg","ret","err_code"])}))}},function(e,t,i){i.d(t,"a",(function(){return s}));var r=i(0),n=i.n(r),a=i(4),o=i.n(a),s=function(e){function t(t,i){var r;return(r=e.call(this,t,i)||this).name="GamePayMod",r.processType="save",r.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}o()(t,e);var i=t.prototype;return i.buildInfoParams=function(){return n()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"common",buy_quantity:this.params.buy_quantity||"1"})},i.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},i.buildSaveParams=function(e){return void 0===e&&(e={}),n()({},this.getSavePublicParams(),{buy_quantity:e.buy_quantity||this.params.buy_quantity||"1",zoneid:this.getZoneid(),accounttype:e.accounttype||"common",service_name:encodeURIComponent(this.params.service_name||""),discountid:this.params.discountid||""},e)},i.save=function(e){this.beforeSave();var t=this.cgi.wechatAppProc(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(i(31).a)},function(e,t,i){},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(15),n=function(e,t){return void 0===t&&(t=[]),Object(r.a)(e,["buy_quantity","pf","zoneid"].concat(t))}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),n=i.n(r),a=i(27),o=i(62),s=function(e){function t(t,i){var r;return void 0===t&&(t={}),(r=e.call(this,t,i)||this).name="GoodsApi",r.AppClass=o.a,r}return n()(t,e),t.prototype.launchSign=function(t,i){return"sign_only"!==t.sign_type||t.goodstokenurl||(t.goodstokenurl="/v1/r/"+t.offer_id+"/mobile_goods_info?page_type=sign",t.direct_channel="wechat"),e.prototype.launchSign.call(this,t,i)},t}(a.a);t.default=a.a.createApi(s)},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(0),n=i.n(r),a=i(28),o=i.n(a),s=i(29),l=i.n(s),u=i(4),c=i.n(u),d=i(30),h=i(63),p=i(64),f=function(e){function t(t){var i,r=t.params,a=void 0===r?{}:r,s=o()(t,["params"]);return(i=e.call(this,n()({params:a},s))||this).name="GoodsApp",i.iformatPrefix="midaswechatpay."+(i.isEnterprise()?"enterprise":"goods"),i.reportObj.setIformatPrefix(i.iformatPrefix),i.payMod=new h.a(l()(i),i.params),i.validator=p.a,i}return c()(t,e),t.prototype.isEnterprise=function(){return this.opt.isEnterprise},t}(d.a)},function(e,t,i){i.d(t,"a",(function(){return l}));var r=i(20),n=i(0),a=i.n(n),o=i(4),s=i.n(o),l=function(e){function t(t,i){var r;return(r=e.call(this,t,i)||this).name="GoodsPayMod",r.processType="bg",r.goodsInfo=null,r.infoReportIformat={pv:"goodsinfo.pv",status:"goodsinfo.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}s()(t,e);var i=t.prototype;return i.buildInfoParams=function(){return a()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),params:this.params.goodstokenurl},Object(r.a)(this.params.goodstokenurl))},i.getInfo=function(e){this.beforeGetInfo();var t=this.cgi.mobileGoodsInfo(this.buildInfoParams(),e);return this.wrapInfo(t)},i.buildSaveParams=function(e){void 0===e&&(e={});var t=a()({},this.getSavePublicParams(),{zoneid:this.getZoneid(),buy_quantity:this.params.buy_quantity||""},e,Object(r.a)(this.params.goodstokenurl),{_params:this.params.goodstokenurl});return"sign_only"===this.params.sign_type?a()({},t,{process_type:"month",page_type:"sign",type:"bg",contract_type:this.params.contract_type||"",ts:Math.round((new Date).getTime()/1e3)}):"pay_with_sign"===this.params.sign_type?a()({},t,{pay_with_contract:1}):t},i.save=function(e){this.beforeSave();var t=this.cgi.mobileSaveGoods(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(i(31).a)},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(15),n=function(e){return Object(r.a)(e,[["goodstokenurl",function(e){return/\d+\/[A-Za-z_-]+\?[A-Za-z_-]+=/.test(e)}],"zoneid","pf"])}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),n=i.n(r),a=i(27),o=i(66),s=function(e){function t(t,i){var r;return void 0===t&&(t={}),(r=e.call(this,t,i)||this).name="SubscribeApi",r.AppClass=o.a,r}return n()(t,e),t}(a.a);t.default=a.a.createApi(s)},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(0),n=i.n(r),a=i(28),o=i.n(a),s=i(29),l=i.n(s),u=i(4),c=i.n(u),d=i(30),h=i(67),p=i(68),f=function(e){function t(t){var i,r=t.params,a=void 0===r?{}:r,s=o()(t,["params"]);return(i=e.call(this,n()({params:a},s))||this).name="SubscribeApp",i.iformatPrefix="midaswechatpay.subscribe",i.reportObj.setIformatPrefix(i.iformatPrefix),i.payMod=new h.a(l()(i),i.params),i.validator=p.a,i}return c()(t,e),t}(d.a)},function(e,t,i){i.d(t,"a",(function(){return l}));var r=i(20),n=i(0),a=i.n(n),o=i(4),s=i.n(o),l=function(e){function t(t,i){var r;return(r=e.call(this,t,i)||this).name="SubscribePayMod",r.processType="unimonth",r.params.aid&&(r.params.appremark=encodeURIComponent("aid="+r.params.aid)),r.account=r.params.account||"wechat",r.infoReportIformat={pv:"monthinfo.pv",status:"monthinfo.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r.isContinuousMonth="continuous_month"===r.params.sign_type,r}s()(t,e);var i=t.prototype;return i.buildInfoParams=function(){return a()({},this.getInfoPublicParams(),{service_code:this.params.service_code,product_id:this.params.product_id,buy_quantity:this.params.buy_quantity||"1",provide_no_type:this.getProvideNoType(),query_scope:this.isContinuousMonth?"include_continuous":""})},i.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},i.buildSaveParams=function(e){void 0===e&&(e={});var t=a()({buy_quantity:e.buy_quantity||this.params.buy_quantity||1,service_code:this.params.service_code,product_id:e.product_id||this.params.product_id,appremark:this.params.appremark||"",provide_no_type:this.getProvideNoType(),service_name:this.params.service_name||"",continuous_month:this.isContinuousMonth?"1":""},this.getSavePublicParams(),e);return this.shouldAutoContinue()&&(t.auto_cont="1"),"wechatid"===this.getProvideNoType()&&delete t.provide_uin,"sign_only"===this.params.sign_type?a()({},t,{process_type:"month",page_type:"sign",type:"month",contract_type:this.params.contract_type||"",ts:Math.round((new Date).getTime()/1e3)}):t},i.save=function(e){var t=this.buildSaveParams(e);this.beforeSave({serviceCode:t.service_code,productId:t.product_id});var i=this.cgi.wechatAppProc(t,{method:"POST"});return this.wrapSave(i)},i.getProvideNoType=function(){return this.params.provide_uin?"uin":"wechatid"},i.shouldAutoContinue=function(){return this.params.extend?"1"===Object(r.a)(this.params.extend).auto_cont:1===parseInt(this.params.auto_cont)},t}(i(31).a)},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(15),n=function(e){return Object(r.a)(e,["pf","service_code"])}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),n=i.n(r),a=i(27),o=i(70),s=function(e){function t(t,i){var r;return void 0===t&&(t={}),(r=e.call(this,t,i)||this).name="GameApi",r.AppClass=o.a,r}return n()(t,e),t}(a.a);t.default=a.a.createApi(s)},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(0),n=i.n(r),a=i(28),o=i.n(a),s=i(29),l=i.n(s),u=i(4),c=i.n(u),d=i(30),h=i(58),p=i(60),f=function(e){function t(t){var i,r=t.params,a=void 0===r?{}:r,s=o()(t,["params"]);return(i=e.call(this,n()({params:a},s))||this).name="GameApp",i.iformatPrefix="midaswechatpay.game",i.reportObj.setIformatPrefix(i.iformatPrefix),i.payMod=new h.a(l()(i),i.params),i.validator=p.a,i}return c()(t,e),t}(d.a)},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),n=i.n(r),a=i(27),o=i(72),s=function(e){function t(t){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).name="PcGameApi",i.AppClass=o.a,i}return n()(t,e),t}(a.a);t.default=a.a.createApi(s)},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(0),n=i.n(r),a=i(28),o=i.n(a),s=i(29),l=i.n(s),u=i(4),c=i.n(u),d=i(30),h=i(73),p=i(74),f=function(e){function t(t){var i,r=t.params,a=void 0===r?{}:r,s=o()(t,["params"]);return(i=e.call(this,n()({params:a},s))||this).name="PcGameApp",i.iformatPrefix="midaswechatpay.pcgame",i.reportObj.setIformatPrefix(i.iformatPrefix),i.payMod=new h.a(l()(i),i.params),i.validator=p.a,i}return c()(t,e),t}(d.a)},function(e,t,i){i.d(t,"a",(function(){return a}));var r=i(4),n=i.n(r),a=function(e){function t(t,i){var r;return(r=e.call(this,t,i)||this).name="PcGamePayMod",r}return n()(t,e),t}(i(58).a)},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(15),n=function(e){return Object(r.a)(e,["buy_quantity","provide_uin"])}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(0),n=i.n(r),a=i(59),o=(i.n(a),i(61));t.default=n()({},o.default,{init:function(e){return void 0===e&&(e={}),e.isEnterprise=!0,o.default.init(e)}})},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),n=i.n(r),a=i(59),o=(i.n(a),i(27)),s=i(77),l=function(e){function t(t){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).name="QbApi",i.AppClass=s.a,i}return n()(t,e),t}(o.a);t.default=o.a.createApi(l)},function(e,t,i){i.d(t,"a",(function(){return f}));var r=i(0),n=i.n(r),a=i(28),o=i.n(a),s=i(29),l=i.n(s),u=i(4),c=i.n(u),d=i(30),h=i(78),p=i(79),f=function(e){function t(t){var i,r=t.params,a=void 0===r?{}:r,s=o()(t,["params"]);return(i=e.call(this,n()({params:a},s))||this).name="QbApp",i.iformatPrefix="midaswechatpay.qb",i.reportObj.setIformatPrefix(i.iformatPrefix),i.payMod=new h.a(l()(i),i.params),i.validator=p.a,a.service_name="充值Q币",i}return c()(t,e),t}(d.a)},function(e,t,i){i.d(t,"a",(function(){return s}));var r=i(0),n=i.n(r),a=i(4),o=i.n(a),s=function(e){function t(t,i){var r;return(r=e.call(this,t,i)||this).name="QbPayMod",r.processType="qb",r.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}o()(t,e);var i=t.prototype;return i.buildInfoParams=function(){return n()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"qb",buy_quantity:this.params.buy_quantity||"1"})},i.buildSaveParams=function(t){return void 0===t&&(t={}),n()({},e.prototype.buildSaveParams.call(this,t),{accounttype:"qb"})},t}(i(58).a)},function(e,t,i){i.d(t,"a",(function(){return n}));var r=i(60),n=function(e){return Object(r.a)(e,["provide_uin"])}},function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var r=i(59),n=(i.n(r),i(11));i.d(t,"getVersion",(function(){return n.c}));var a=i(32);i.d(t,"checkUpdate",(function(){return a.a}));var o=i(65);i.d(t,"subscribe",(function(){return o.default}));var s=i(69);i.d(t,"game",(function(){return s.default}));var l=i(71);i.d(t,"pcGame",(function(){return l.default}));var u=i(61);i.d(t,"goods",(function(){return u.default}));var c=i(75);i.d(t,"enterprise",(function(){return c.default}));var d=i(76);i.d(t,"recharge",(function(){return d.default}))}]);var XP=function(){return KP},JP={};Ee("onAppEnterForeground",(e=>{Object.assign(JP,e)})),k.onReady((()=>{Object.assign(JP,k.appLaunchInfo)}));var eD=Li("querySettlementMark","jsapi_querysettlementmark",(()=>({isWxHost:!k.host||"WeChat"===k.host.env,sdkAppId:k.host&&k.host.appId,scene:JP.scene,sceneNote:JP.scene_note||JP.sceneNote,sessionId:JP.sessionId||JP.sessionid}))),tD=()=>new Promise((e=>{eD({complete:({mark:t})=>e(t)})})),iD={offer_id:"offerId",currency_type:"currencyType",session_id:"sessionId",session_type:"sessionType",pf:"platform",login_wx_appid:"loginWXAppId",change_wx_openid:"changeWXOpenId",extend:"extend",product_id:"productId",service_code:"serviceCode",service_name:"serviceName",buy_quantity:"buyQuantity",aid:"aid",provide_uin:"provideUin",zoneid:"zoneId",goodstokenurl:"goodsTokenUrl"},rD=["offer_id","currency_type","session_id","session_type","pf","login_wx_appid","change_wx_openid","extend"];function nD(e){var t=[];return"subscribe"===e.mode?t=["product_id","service_code","service_name","buy_quantity","aid","provide_uin"]:"game"===e.mode||"pcGame"===e.mode?t=["buy_quantity","zoneid","provide_uin"]:"goods"===e.mode?t=["buy_quantity","zoneid","goodstokenurl"]:"enterprise"===e.mode&&(t=["zoneid","goodstokenurl"]),[...rD,...t].reduce(((t,i)=>(t[i]=e[iD[i]],"pf"===i&&"windows"===t.pf&&(t.pf="android",t.pf_header="wxgame_windows-2001"),t)),{})}var aD=wxNativeConsole.createLogger("common reportUserBehavior"),oD=Ei(Ul),sD=Ei(tn.readFile),lD=Ei(tn.writeFile),uD="wxfile://ad/verifystate.json",cD="game:verifystate",dD=null;function hD(){return(hD=zo()((function*(e){try{if(dD=e,aD.log("set verifydata",JSON.stringify(dD)),N)return;G||L?yield rt("setGlobalStorage",{key:cD,data:JSON.stringify(e)}):B&&(yield lD({filePath:uD,data:JSON.stringify(e),encoding:"utf8"}))}catch(e){aD.log("set cache fail",e.message)}}))).apply(this,arguments)}function pD(){return fD.apply(this,arguments)}function fD(){return(fD=zo()((function*(){try{if(N)return;if(G||L){var{data:e}=yield rt("getGlobalStorage",{key:cD});aD.log("get verifydata",e),dD=JSON.parse(e)}else if(B){var{data:t}=yield sD({filePath:uD,encoding:"utf8"});aD.log("get verifydata",t),dD=JSON.parse(t)}}catch(e){aD.log("get cache fail",e.message,e)}}))).apply(this,arguments)}var gD=!1,_D=0,mD=null,vD=0,yD=new tr("Verify",!0);function AD(e=!0){var t;null!==(t=dD)&&void 0!==t&&t.isSoftMode||(e&&(dD=null),mD&&(mD.des(),mD=null))}var bD=null;function ED(e){ct({args:bD,name:"getRealNameVerifyMethod",success:e}),bD=null}function wD(e,{ContentType:t,ContentID:i}={}){if(dD){var r=null;"function"==typeof e?r=e:bD=e;var{url:n,weapp:a,inlineCertMode:o}=dD.urlInfo,{isSoftMode:s,remainSeconds:l}=dD;if(o)return CD({UIArea:o===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:0,ActionID:1,Status:s?3:1,ContentType:t}),void HD({inlineCertMode:o,isSoftMode:s,remainSeconds:l,ContentType:t,ContentID:i});a?au({appId:a.appid,path:a.path,extraData:a.extraData,success:r}):n&&Qs({url:n,isNativeStyle:!0,success:r}),AD()}}var TD={INLINE_CERT_MODE_DIALOG:1,INLINE_CERT_MODE_HALF_SCREEN:2};function CD({UIArea:e,PositionID:t,ActionID:i,Status:r,ExpID:n="",ContentType:a=0,ContentID:o=0,ExternInfo:s,SourceID:l=_D}){Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[$i(),k.appLaunchInfo.scene,0,15,e,t,i,"",0,/landscape/.test(k.deviceOrientation)?2:1,r,l,"",n,0,"",vD,0,"",a,o,0,s?encodeURIComponent(JSON.stringify(s)):""].join(",")}),2===i&&(_D=e)}var SD,ID=0,xD="",PD="",DD={},RD=!1,OD=0,kD=null,MD=!1,ND=!1,LD=!1,BD=null,FD=null,UD=0,WD=3e5,GD=null;function VD(e,t,{coldBoot:i=!1,realnameInfo:r}={},{appType:n,deviceOrientation:a}=k){UD=Date.now();var o={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return gD?pD().then(s).then(l).catch((e=>{aD.error("report fail",e)})):JD.then(pD).then(s).then(l).catch((e=>{aD.error("report fail",e)}));function s(){var a={version:4,callbackData:SD,type:o[e],duration:t/1e3,scene_note:PD,scene:ID,realnameInfo:r,referrerInfo:{appId:xD,extraData:DD},appServiceType:n,isColdStart:i};return bi()||(a.isWxaAdultOnly=MD),ki({sdkApiName:"reportUserBehavior",apiName:"jsapi_reportuserbehav",reqData:a}).catch((e=>{var t;if(bi()&&1!==(null===(t=dD)||void 0===t?void 0:t.action))return{data:{action:3,alertMsg:"网络已断开，请检查网络状态后重试"}};throw e}))}function l(e){var t=e.data;!function(e){hD.apply(this,arguments)}(t);var{action:i,alertMsg:r,heartbeatInterval:n,jumpRule:o={},realnameResult:s}=t;if(o.gameStartRule&&(Ql.setShouldExecuteFirstSkipLimitStrategy(!0),Ql.setAttemptSkipMinTime(o.gameStartRule.blockJumpTimeInSeconds),Ql.setModalMessage2(o.gameStartRule.jumpInfo.desc),Ql.setModalConfirm2(o.gameStartRule.jumpInfo.jumpButtonLabel),Ql.setModalSkipLink2(o.gameStartRule.jumpInfo.url),Ql.setExpId2(o.gameStartRule.expId),Ql.resumeLimitTimer(!0)),o.cancelRule&&(Ql.setShouldExecuteSkipMaxLimitStrategy(!0),Ql.setAttemptSkipMaxThreshold(o.cancelRule.maxCancelCount),Ql.setModalMessage1(o.cancelRule.jumpInfo.desc),Ql.setModalConfirm1(o.cancelRule.jumpInfo.jumpButtonLabel),Ql.setModalSkipLink1(o.cancelRule.jumpInfo.url),Ql.setExpId1(o.cancelRule.expId)),SD=t.callbackData,n!==WD&&n>=1e4&&(WD=n,qD()),s){var{code:l,failReason:u,certRemainTimes:c}=s;if(0===l)BD.showSucc(),AD();else if(0===c)BD.showFail({failReason:u});else{var d;BD.showModal({title:u+c?`（剩余${c}次机会）`:""}),CD({ExpID:null==t||null===(d=t.urlInfo)||void 0===d?void 0:d.expId,UIArea:t.inlineCertMode===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:4,ActionID:4,Status:t.isSoftMode?3:1,ExternInfo:{number:c}})}}else switch(ED(1===i),i){case 1:break;case 2:setTimeout((()=>{CD({UIArea:1518,PositionID:0,ActionID:1}),oD({title:"提示",content:r,showCancel:!1}).then((()=>{CD({UIArea:1518,PositionID:1,ActionID:2})}))}),/landscape/.test(a)?500:0);break;case 3:if(RD)break;RD=!0;var h=setTimeout(qp,15e3);CD({UIArea:1517,PositionID:0,ActionID:1}),oD({title:"提示",content:r,showCancel:!1}).then((()=>{clearTimeout(h),RD=!1,CD({UIArea:1517,PositionID:1,ActionID:2}),qp()}));break;case 4:var{url:p,name:f,inlineCertMode:g,inlineUrl:_,expId:m}=t.urlInfo,{remainSeconds:v}=t;if(_&&bi()){!function({url:e,ExpId:t,DeviceModel:i,DeviceBrand:r,OsName:n}){var a,o;if(null!==FD)return;e=e.replace("#wechat_redirect","");var s=Object.entries({ExpId:t,DeviceModel:i,DeviceBrand:r,OsName:n,appid:k.accountInfo.appId,AppServiceType:null!==(a=k.appType)&&void 0!==a?a:4,versionType:null!==(o=k.versionType)&&void 0!==o?o:0}).map((([e,t])=>`${e}=${encodeURIComponent(t)}`)).join("&");(FD=new _l({src:`${e}?${s}#wechat_redirect`,style:{left:0,top:0,width:k.screenWidth,height:k.screenHeight},zIndex:2e6,__skipDomainCheck__:!0})).onmessage=function(e){aD.log("webview onMessage",e);var{type:t}=e;"success"===t?(FD.destroy(),FD=null):"exit"===t?(FD=null,qp()):"showModal"===t&&oD(e)}}({url:_,ExpId:m,DeviceModel:GD.model,DeviceBrand:GD.brand,OsName:GD.platform});break}if(g){CD({ExpID:m,UIArea:g===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:0,ActionID:1,Status:t.isSoftMode?3:1,ContentType:1,ContentID:4}),HD({alertMsg:r,inlineCertMode:g,isSoftMode:!1,remainSeconds:v,ContentType:1});break}var y=setTimeout(qp,15e3);!RD&&r&&p&&f&&(RD=!0,CD({ExpID:m,UIArea:1504,PositionID:0,ActionID:1,Status:1}),Ul({title:"提示",content:r,confirmText:f,cancelText:"退出游戏",success(e){clearTimeout(y),e.confirm?(CD({ExpID:m,UIArea:1504,PositionID:1,ActionID:2,Status:1}),wD((()=>{LD=!0}))):e.cancel&&(CD({ExpID:m,UIArea:1504,PositionID:2,ActionID:2,Status:1}),qp()),RD=!1},fail(e){aD.error("show modal fail=",e),clearTimeout(y),qp(),RD=!1}}));break;case 5:var A,{name:b,inlineCertMode:E}=t.urlInfo,{remainSeconds:w}=t;if(E){var T;CD({ExpID:null==t||null===(T=t.urlInfo)||void 0===T?void 0:T.expId,UIArea:E===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:0,ActionID:1,Status:t.isSoftMode?3:1,ContentType:1,ContentID:4}),HD({alertMsg:r,inlineCertMode:E,isSoftMode:!0,remainSeconds:w,ContentType:1});break}CD({ExpID:null==t||null===(A=t.urlInfo)||void 0===A?void 0:A.expId,UIArea:1505,PositionID:0,ActionID:0,Status:1}),setTimeout((()=>{RD||Ul({title:"提示",content:r,confirmText:b,cancelText:"继续游戏",success({confirm:e}){var i,r;e&&CD({ExpID:null==t||null===(i=t.urlInfo)||void 0===i?void 0:i.expId,UIArea:1505,PositionID:1,ActionID:2,Status:1}),e||CD({ExpID:null==t||null===(r=t.urlInfo)||void 0===r?void 0:r.expId,UIArea:1505,PositionID:2,ActionID:2,Status:1}),e&&wD((()=>{LD=!0}))},complete(){RD=!1}}),RD=!0}),/landscape/.test(a)?1e3:0);break;case 6:var C,S,{inlineCertMode:I}=t.urlInfo,{remainSeconds:x,needAlert:P,alertMsg:D,isSoftAlert:R,isSoftMode:O}=t;if(R&&yD.emit("notify",{alertMsg:D,remainSeconds:x,doVerify:()=>wD()}),P){HD({alertMsg:D,remainSeconds:x,isSoftMode:O,inlineCertMode:I,ContentType:1,ContentID:O?0===x?3:2:1});break}mD?null===(C=(S=mD).setData)||void 0===C||C.call(S,t):(mD=!0,setTimeout((()=>jD(t,{ContentType:0})),B?2e3:0))}}}function jD(e,{ContentID:t,ContentType:i}={}){null!==mD&&!0!==mD||function(e={},t){if(tm)return t&&t(tm);var{top:i}=em({height:20,width:180,align:"right"}),{right:r}=$p(),n=k.screenWidth-r,a=JSON.stringify(e);__sclEngine__.initScl((e=>{Y_({component:tm=e.mainRoot.append("verify-tip",{top:i,right:n,info:a}),getVisibleAera:e=>e.__wxSlotChildren[0].__wxSlotChildren[0].childNodes[0].getBoundingClientRect()}),tm.addListener("destroy",(()=>{$_(tm),tm=null})),t&&t(tm)}))}(e,(r=>{var n;mD=r,CD({ExpID:null==e||null===(n=e.urlInfo)||void 0===n?void 0:n.expId,UIArea:e.isSoftMode?1506:1501,PositionID:0,ActionID:1,Status:e.isSoftMode?3:1,ContentID:t,ContentType:i}),setTimeout((()=>{var r;return mD&&CD({ExpID:null==e||null===(r=e.urlInfo)||void 0===r?void 0:r.expId,UIArea:1502,PositionID:0,ActionID:1,Status:e.isSoftMode?3:1,ContentID:t,ContentType:i})}),1e4),mD.addListener("stop",(()=>{var r;(VD("heartbeat",OD=Date.now()-UD),e.isSoftMode)&&CD({ExpID:null==e||null===(r=e.urlInfo)||void 0===r?void 0:r.expId,UIArea:1506,PositionID:0,ActionID:1,Status:3,ContentID:t,ContentType:i});AD()})),mD.addListener("click",(()=>{var r,{showSeconds:n,remainSeconds:a}=mD.data;CD({ExpID:null==e||null===(r=e.urlInfo)||void 0===r?void 0:r.expId,UIArea:n?a?1502:1506:1501,PositionID:1,ActionID:2,Status:e.isSoftMode?3:1,ContentID:t,ContentType:i,Time:a}),wD((()=>{var e,t;LD=!(null===(e=dD)||void 0===e||null===(t=e.urlInfo)||void 0===t||!t.inlineCertMode)}),{ContentID:t,ContentType:i})}))}))}function HD({inlineCertMode:e,alertMsg:t,isSoftMode:i=!1,isPay:r=!1,remainSeconds:n=0,ContentType:a,ContentID:o}){var s;null===(s=mD)||void 0===s||s.des(),mD=null,null===BD&&setTimeout((()=>mm({alertMsg:t,hor:/landscape/.test(k.deviceOrientation),reportkv:t=>{var r,n;return CD(K()({UIArea:e===TD.INLINE_CERT_MODE_DIALOG?1507:1508,ExpID:null===(r=dD)||void 0===r||null===(n=r.urlInfo)||void 0===n?void 0:n.expId,Status:i?3:1,ContentType:a,ContentID:o},t))},remainSeconds:n,isSoftMode:i,isPay:r,half:e===TD.INLINE_CERT_MODE_HALF_SCREEN,confirm:({name:t,id:r,showModal:n})=>{var s,l;t?r?/(^\d{15}$)|(^\d{17}([0-9]|[xX])$)/.test(r)?(CD({ExpID:null===(s=dD)||void 0===s||null===(l=s.urlInfo)||void 0===l?void 0:l.expId,UIArea:e===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:2,ActionID:2,Status:i?3:1,ContentType:a,ContentID:o}),VD("retryLogin",OD=Date.now()-UD,{realnameInfo:{name:t,id:r}})):n({title:"身份证格式错误"}):n({title:"请输入身份证号"}):n({title:"请输入真实姓名"})},des(e){BD=null,("cancel"===e&&dD.isSoftMode||"fail"===e&&dD.isSoftMode)&&setTimeout((()=>jD(K()({},dD),{ContentID:o,ContentType:a})),0),ED("succ"===e)}},(e=>{BD=e}))),0)}var zD=ND,YD=ND,$D=ND||MD,qD=()=>{null!==kD&&(clearInterval(kD),QD())},QD=()=>{kD=setInterval((()=>{OD=Date.now()-UD,zD&&VD("heartbeat",OD)}),WD)},ZD=(e,{coldBoot:t=!1}={})=>{Ql.resumeLimitTimer(),PD=e.scene_note||"",OD=0,ID=e.scene,e.referrerInfo&&(xD=e.referrerInfo.appId,DD=e.referrerInfo.extraData),QD(),LD?(VD("retryLogin",OD),LD=!1):$D&&VD("onShow",OD,{coldBoot:t})},KD=()=>{Ql.pauseLimitTimer(),OD=Date.now()-UD,clearInterval(kD),kD=null,YD&&VD("onHide",OD)};k.onReady((()=>{var e=k.appLaunchInfo;GD=ys(!0);try{k.appContactInfo&&k.appContactInfo.operationInfo&&k.appContactInfo.operationInfo.jsonInfo&&k.appContactInfo.operationInfo.jsonInfo.op_info&&(MD=1===Number(k.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),ND=1===Number(k.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){aD.error("get op_info fail",e.message)}zD=bi()||ND,YD=bi()||ND,$D=bi()||ND||MD,ZD(e,{coldBoot:!0}),Ee("onAppEnterForeground",(t=>{ZD(e=t)})),Ee("onAppEnterBackground",(()=>{KD()})),Ee("onAppRoute",(t=>{"autoReLaunch"===t.openType&&(RD=!1,KD(),setTimeout((()=>{ZD(e)}),1e3))}))}));var XD=()=>{},JD=new Promise((e=>{XD=e})),eR=()=>{gD=!0,XD()};var tR=["begintime","endtime","amt","least_price","pay_amt"],iR=null;function rR(e){var t=new Date(1e3*+e);return`${t.getFullYear()}.${t.getMonth()+1}.${t.getDate()}`}function nR(e,t=0){return 0===e?(0).toFixed(t):(e<10?t=Math.max(t,2):e<100&&(t=Math.max(t,1)),(e/100).toFixed(t))}var aR=0;function oR({UIArea:e,SCeneID:t,PositionID:i,ActionID:r,Object:n=0,Status:a,ExpID:o="",ContentType:s=0,ContentID:l=0,ExternInfo:u,reportTime:c=0,SourceID:d=aR}){Reporter.reportKeyValue({key:"GameAdsSkipCard",value:[$i(),k.appLaunchInfo.scene,0,t,e,i,r,"",0,n,a,d,"",o,0,"",c,0,"",s,l,0,u?encodeURIComponent(JSON.stringify(u)):""].join(",")}),2===r&&(aR=e)}var sR=["subscribe","game","pcGame","goods","enterprise"],lR="requestMidasPayment";var uR=["game"],cR="requestMidasFriendPayment",dR=wxNativeConsole.createLogger("requestMidasFriendPayment");function hR({actionStatus:e,errType:t=0,orderNo:i="",orderNoForUrl:r=""}={}){var n=[0,3001,30,10,1,e,"",0,r,$i(),0,0,t,0,"",i,""].join(",");dR.log("[MidasFriendPayment reportValue]",n),Reporter.reportKeyValue({key:"MidasFriendPayment",value:n})}function pR(){return Kt("requestMidasFriendPayment")?Promise.resolve():(hR({actionStatus:0,errType:1}),Promise.reject({errCode:-15005,errMsg:"No MidasFriendPayment Permission"}))}function fR(){return Kt("requestVirtualPayment")?Promise.resolve():(hR({actionStatus:0,errType:2}),Promise.reject({errCode:-15005,errMsg:"No VirtualPayment Permission"}))}var gR=Li("checkIsSupportMidasFriendPayment","webapi_isaddpayfororderblocked",(()=>({})),(e=>(e.blocked=e.is_blocked,delete e.is_blocked,e)));var _R=()=>["nativeFunctionalized"].includes(oi().apiCategory)?"服务需要重启以使用最新功能":7===k.appType?"功能已更新，需重新加载后使用":"小程序需要重启以使用最新功能",mR=new _e;ce("onUpdateStatusChange",(e=>{var t,i=(e.state||"").toLowerCase();e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===i&&(console.info("[apply update before]"),L&&k.clientVersion<=654315263?it("updateApp",t):Ul({content:_R(),confirmText:"知道了",showCancel:!1,complete(){it("updateApp",t)}})):(delete e.state,mR.emit(i,e))}));var vR,yR=[];mR.on("updating",(()=>{vR={hasUpdate:!0},AR()})),mR.on("noupdate",(()=>{vR={hasUpdate:!1},AR()}));var AR=()=>{yR.forEach((e=>{"function"==typeof e&&e(vR)})),yR.length=0},bR=[],ER=!1,wR=!1;mR.on("updateready",(()=>{ER=!0,CR()}));var TR,CR=()=>{bR.forEach((e=>{"function"==typeof e&&e()})),bR.length=0},SR=[];mR.on("updatefailed",(()=>{TR={},IR()}));var IR=()=>{SR.forEach((e=>{"function"==typeof e&&e(TR)})),SR.length=0},xR={onCheckForUpdate:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),vR?"function"==typeof e&&e(vR):yR.push(e)},onUpdateReady:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),ER?"function"==typeof e&&e():bR.push(e)},onUpdateFailed:e=>{e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),TR?"function"==typeof e&&e(TR):SR.push(e)},applyUpdate:e=>{ER&&wR?ut("applyUpdate",e,"applyUpdate has been called"):ER?(wR=!0,L&&k.clientVersion<=654315263?it("updateApp",e):Ul({content:_R(),confirmText:"知道了",showCancel:!1,complete(){it("updateApp",e)}})):ut("applyUpdate",e,"update is not ready")}},PR={USER_DATA_PATH:null,CLIENT_DATA_PATH:null};k.onReady((()=>{"object"==typeof k.env&&Object.assign(PR,k.env)}));var DR=PR;class RR extends oA{constructor({template:e,style:t,event:i}={}){if(super(),e){var r=rA(this),{root:n}=Lg()(e);sA.call(this,n,t),Xv.add(r.container),this.initEvent(i)}!1===$h&&!1===qh&&(Yh(),qh=!0,Xd.emit({})),it("showShareMenu"),it("showShareTimelineMenu")}initEvent(e){if(e){var t=rA(this);this.event=e,Object.keys(e).forEach((i=>{var r=e[i];Object.keys(r).forEach((e=>{var n=r[e];t[i]&&t[i].on(e,n)}))}))}}unbundEvent(){if(this.event){var e=rA(this);Object.keys(this.event).forEach((t=>{var i=this.event[t];Object.keys(i).forEach((r=>{var n=i[r];e[t]&&e[t].off(r,n)}))}))}}destroy(){this.unbundEvent();var e=rA(this);Xv.remove(e.container),aA(this),Zu.showShareAppMessageMenu&&(Zu.withShareTicket?it("showShareMenuWithShareTicket",{withShareTicket:!0}):it("showShareMenu")),Zu.showShareTimelineMenu&&it("showShareTimelineMenu"),!1===$h&&!0===qh&&(qh=!1,th.emit({}))}}class OR extends RR{constructor({template:e,style:t}={}){super({template:e,style:t})}}var kR=!1,MR=0,NR=0,LR=0;function BR(e,t){var i=Math.max(MR,NR),r=Math.min(MR,NR);return t/e-(i-LR-44-8-44-8)/r>.1?(i-2*(LR+44))/i:(NR-20)/NR}k.onReady((()=>{kR="devtools"===k.platform,MR=k.screenHeight,NR=k.screenWidth,LR=k.statusBarHeight}));class FR extends OR{constructor({imageUrl:e}={}){var t=1,i=0,r=0,n=e.match(/size=(\d+)x(\d+)$/);n&&(t=BR(i=+n[1],r=+n[2])),super({template:`<view id="container">\n      <view id="imgWrp">\n        ${kR?`<image id="mainImage" src="${e}" />`:`<image-previewer id="mainImage" scale="${t}"></image-previewer>`}\n      </view>\n    </view>`,style:function(){var e=NR>MR?"landscape":"portrait";return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?NR:MR,height:"portrait"===e?MR:NR},imgWrp:{flexDirection:"row",justifyContent:"center"},mainImage:{left:0,top:kR?LR+44+8:0,width:"portrait"===e?NR:MR,height:"portrait"===e?MR:NR,objectFit:"contain"}}}()}),this.imageUrl=e,this.scale=t,this.width=i,this.height=r,this.sizeMatch=n,this.retried=[];var a=rA(this);kR||a.mainImage.onImageLoadFail((e=>{this.handleOnImageLoadFail(e)})),this.initImageInfo()}handleOnImageLoadFail(e){var t=this.retried;t.includes(e.url)?Ul({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((()=>{ql()}),500)}initImageInfo(){setTimeout((()=>{$l({title:"加载中",maskAll:!0})}),500),this.sizeMatch?this.downloadImage().then((e=>{this.showImage({width:this.width,height:this.height,url:e.tempFilePath,scale:this.scale})})):this.downloadImage().then((e=>{it("getImageInfo",{src:e.tempFilePath,success:t=>{var{width:i,height:r}=t,n=BR(i,r);this.showImage({width:i,height:r,url:e.tempFilePath,scale:n})},fail:()=>{this.handleOnImageLoadFail({url:e.tempFilePath})}})}))}downloadImage(){return new Promise((e=>{Ka({url:this.imageUrl,success:t=>{e(t)},fail:()=>{this.handleOnImageLoadFail({url:this.imageUrl})}})}))}showImage(e){var{width:t,height:i,url:r,scale:n}=e,a=rA(this);"portrait"===(t>i?"landscape":"portrait")?kR?a.mainImage.style.scale=n:a.mainImage.scale=n:(kR&&(a.mainImage.style.top=0),kR?(a.mainImage.style.scale=1,a.mainImage.style.top=0):a.mainImage.scale=1),a.mainImage.urls=[r],a.mainImage.update(),setTimeout((()=>{ql()}),500)}}var UR=0,WR=0,GR=0,VR=0,jR={};k.onReady((()=>{WR=k.screenHeight,GR=k.screenWidth,VR=k.statusBarHeight,jR=k.safeArea;var e=Math.max(WR,GR),t=e;jR&&jR.bottom&&(t=Math.max(jR.bottom,jR.right)),UR=e-t}));class HR extends OR{constructor({videoUrl:e,thumbUrl:t}={}){super({template:`\n    <view id="container">\n      <view id="imgWrp">\n        <video id="mainVideo" src="${e}" poster="${t}" controls="true" object-fit="contain" autoplay="false" z-index="2" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n      </view>\n    </view>`,style:function(){var e=GR>WR?"landscape":"portrait",t=VR+44+8,i=UR+44+8;return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?GR:WR,height:"portrait"===e?WR:GR},imgWrp:{flexDirection:"row",justifyContent:"center"},mainVideo:{position:"absolute",top:t,left:0,width:"portrait"===e?GR:WR,height:"portrait"===e?WR-t-i:GR-t-i}}}()}),this._handleVideoError(),this._playAtWIFI()}_handleVideoError(){rA(this).mainVideo.onError((()=>{Ul({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}_playAtWIFI(){if("wifi"===$i()){var e=rA(this);e.mainVideo.showCenterPlayBtn=!1,e.mainVideo.play()}}}var zR=new _e;ce("onLoadSubPackageTaskStateChange",(e=>{zR.emit(e.state,e.taskId,e)}));var YR={},$R=[],qR=new WeakMap,QR=new WeakMap,ZR=function(e){return YR[e]},KR=function(e){var t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},XR=function(e,t=!1){var i=e;"string"!=typeof i&&console.error("SubContext onSubPackageReady error: moduleName is empty"),i.endsWith(".js")||(i.endsWith("/")||(i=`${i}/`),i=`${i}game.js`);var r=l_.get();if(Pi()&&bi()&&!t&&!r)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(i)};zR.on("success",((e,t)=>{var i=ZR(e);delete YR[e],Array.isArray(i)&&i.forEach(function(){var e=zo()((function*(e){var i=t.moduleName,r=qR.get(e),n=KR(t);$R.push(i),yield XR(i,t.isMonkeyTest),n.errMsg="loadSubpackage:ok","function"==typeof r.success&&r.success(n),"function"==typeof r.complete&&r.complete(n)}));return function(t){return e.apply(this,arguments)}}())})),zR.on("fail",((e,t)=>{var i=ZR(e);delete YR[e],Array.isArray(i)&&i.forEach((e=>{var i=qR.get(e),r=KR(t);r.errMsg="loadSubpackage:fail module not found","function"==typeof i.fail&&i.fail(r),"function"==typeof i.complete&&i.complete(r)}))})),zR.on("progressUpdate",((e,t)=>{var i=ZR(e);Array.isArray(i)&&i.forEach((e=>{var i=QR.get(e),r=KR(t);"function"==typeof i&&i(r)}))}));var JR=function(){var e,t=qR.get(this);if($R.indexOf(t.name)>=0){var i={errMsg:"loadSubpackage:ok",moduleName:t.name};return"function"==typeof t.success&&t.success(i),void("function"==typeof t.complete&&t.complete(i))}if("__APP__"===t.name&&N&&Pi()&&bi()){$R.push(t.name),XR(t.name);var r={errMsg:"loadSubpackage:ok"};return"function"==typeof t.success&&t.success(r),void("function"==typeof t.complete&&t.complete(r))}if(it("createLoadSubPackageTask",{moduleName:t.name,success:e=>{void 0===YR[e.loadTaskId]?YR[e.loadTaskId]=[this]:YR[e.loadTaskId].push(this)},fail:i=>{e=i.errMsg,B&&(i.errMsg="loadSubpackage:fail module not found","function"==typeof t.fail&&__errorTracer__.surroundThirdByTryCatch(t.fail)(i),"function"==typeof t.complete&&__errorTracer__.surroundThirdByTryCatch(t.complete)(i))}}),e)throw new Error(e.replace(/createLoadSubPackageTask:fail[ :]/,""))};class eO{constructor(e){qR.set(this,e),["success","fail","complete"].forEach((t=>{"function"==typeof e[t]&&(e[t]=__errorTracer__.surroundThirdByTryCatch(e[t],`at api loadSubpackage ${t} callback function`))})),JR.call(this)}onProgressUpdate(e){QR.set(this,(t=>{void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}var tO,iO,rO,nO="GameReportKV",aO=!1,oO=0,sO=0,lO=-1,uO={},cO=0,dO=0,hO={},pO="",fO="",gO="",_O=(e={})=>{e=Object.assign({},uO,hO,e),hO=e;var t=e.query||k.appLaunchInfo.query,i=[];t&&"object"==typeof t&&Object.keys(t).forEach((e=>{i.push(`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`)}));var r=e.eventTime,n=e.clickTimestamp,a=r-(n=n<=9999999999?1e3*n:n),o=e.sessionid||e.sessionId,s=iO||iO===o?0:1;iO=o,1===e.eventId&&(cO=Date.now()-n,dO=e.isLaunch?1:2),e.sceneNote=e.scene_note||e.sceneNote||"",e.sessionId=o||"",e.usedState=e.usedstate||e.usedState,e.costTime=a,e.SDKVersion=Ko,e.presceneNote=e.prescene_note||e.presceneNote||"",e.isEntrance=s,e.queryArray=i,e.startCostTime=cO,e.startType=dO,fO=e.pagepath=e.path||k.appLaunchInfo.path;var l=[e.eventId,e.scene,e.sceneNote,e.sessionId,e.usedState,e.pagepath,e.networktype||"",e.costTime,e.stayTime||0,encodeURIComponent(e.referpagepath||""),e.targetAction||0,e.targetPagePath||"",e.clickTimestamp,e.SDKVersion,e.prescene,e.presceneNote,e.isEntrance,e.queryArray.join("&"),Reporter.getAppType(),0,"",0,e.clickTimestamp,"",0,e.startCostTime,e.startType,Date.now(),"number"==typeof e.staytimeFuncpageStart?e.staytimeFuncpageStart:0,k.host?k.host.appId:"",e.shortLink].map(encodeURIComponent).map(((e,t)=>-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e)).join(",");Reporter.reportKeyValue({key:"Display",value:l}),Reporter.submit(),((e={})=>{var t="",i=2;if(k){var r=k.accountInfo,n=k.envVersion;r&&(t=r.appId||""),"release"===n?i=1:"trial"===n&&(i=3)}pO||(pO=wx&&wx.version&&wx.version.version||"");var a={DeviceModel:rO.model||"",DeviceBrand:rO.brand||"",OsName:rO.platform||"",OsVersion:rO.system||"",LanguageVersion:rO.language||"",appid:t,appversion:pO,appstate:i,event_id:e.eventId,scene:e.scene,scene_note:e.sceneNote.substr(0,1024),sessionid:e.sessionId,usedstate:e.usedState,pagepath:(e.pagepath||"").substr(0,1024),networktype:e.networktype||"",costtime:e.costTime,staytime:e.stayTime||0,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction||0,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.SDKVersion,prescene:e.prescene,prescene_note:e.presceneNote,isentrance:e.isEntrance,query:e.queryArray.join("&").substr(0,1024),apptype:Reporter.getAppType(),pagetype:0,anchorTargetText:"",clickTime:e.clickTimestamp,anchorTargetRelatedText:"",orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:Date.now()};try{Ff(1e3,JSON.stringify(a),!0)}catch(e){}})(e)},mO=(e={},t={})=>{1===(e=e.isLaunch?Object.assign(t,e,uO):Object.assign(t,e)).eventId?(e.scene_note=e.scene_note||e.sceneNote||"",e.sessionid=e.sessionid||e.sessionId||"",e.prescene_note=e.prescene_note||e.presceneNote||"",e.targetPagePath=e.targetPagePath||"",e.referpagepath=e.referpagepath||"",e.clickTimestamp=e.clickTimestamp||Date.now(),e.stayTime=e.stayTime||0):2===e.eventId&&(e.targetAction=e.targetAction||0);var i=$i();"none"===i&&(i="offline"),e.networktype=i,_O(e)},vO=e=>{var t=parseInt((e.eventTime||0)/1e3,10);return[e.eventId,e.scene,t,e.stayTime||0,e.sessionId,k.host?k.host.appId:"",tO,e.instanceId].map(encodeURIComponent).join(",")},yO=_i((e=>{tO=Vt(),lO=e.scene,oO=Date.now(),gO=e.sessionid||e.sessionId||"";var t=e.scene,i=vO({eventId:1,scene:t,eventTime:oO,sessionId:tO,instanceId:gO});Reporter.reportKeyValue({key:nO,value:i}),mO(e,{eventId:1,eventTime:oO,staytimeFuncpageStart:0})}),"at private.reportEnterForeground","gameSDKScriptError"),AO=_i((e=>{var t=Date.now(),i=t-oO,r=0;0===sO?r=0:sO>0&&function(e=""){return new RegExp(`^${u_}/(${p_()})`).test(e)}(fO)?r=t-sO:sO>0&&/^index/.test(fO)&&(r=i);var n=lO,a=vO({eventId:2,scene:n,eventTime:t,stayTime:i,sessionId:tO,instanceId:gO});Reporter.reportKeyValue({key:nO,value:a}),mO(e,{eventId:2,scene:n,eventTime:t,stayTime:i,staytimeFuncpageStart:r})}),"at private.reportEnterBackground","gameSDKScriptError");function bO(e){sO="number"==typeof e?e:Date.now()}var EO=0,wO=0,TO=0,CO={};function SO(){return __subContextEngine__.getPool().length>0}k.onReady((()=>{wO=k.screenHeight,TO=k.screenWidth,CO=k.safeArea;var e=Math.max(wO,TO),t=e;CO&&CO.bottom&&(t=Math.max(CO.bottom,CO.right)),EO=e-t}));class IO extends RR{constructor({slotTemplate:e,slotStyle:t}={}){super({template:`\n    <view id="container">\n      <view id="wrp">\n        ${e}\n      </view>\n      <view id="footer">\n        <text id="playBtn" value="开始游戏" />\n      </view>\n    </view>`,style:Object.assign({container:{backgroundColor:"#000000",flexDirection:"column",width:TO,height:wO,zIndex:1000010},wrp:{flexDirection:"row",justifyContent:"center"},footer:{flexDirection:"row",justifyContent:"center",position:"absolute",paddingBottom:16+EO,paddingTop:12,bottom:0,left:0,width:TO,backgroundColor:"#000000"},playBtn:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#FA9D3B",width:184}},t),event:{playBtn:{click:()=>{this._handlePlayBtnClick()}}}}),SO()||setTimeout((()=>{this.preloadPackage()}),0),bO(0)}preloadPackage(){var e=l_.get().params,t="__APP__";if(e.userPath){var i=__subContextEngine__.isValidGameIndependentSubpackagePath(e.userPath,k.subPackages);if(i){var r=t=i.root;r.endsWith(".js")||(r.endsWith("/")||(r=`${r}/`),r=`${r}game.js`),__subContextEngine__.getGameContext().setEntry([r])}}this.loadTaskPromise=new Promise(((e,i)=>{new eO({name:t,success:e,fail:e=>{wxNativeConsole.error("createLoadSubPackageTask fail",e),i(),Ul({title:"提示",content:"加载游戏失败，请尝试重新打开游戏",showCancel:!1})}})}))}_handlePlayBtnClick(){this.runGame(1e3)}runGame(e=0){var t=y_(l_.get().query,"functionalpage-index.html");0===e&&(this.destroy(),l_.clear()),$l({title:"加载中",maskAll:!0});var i=new Promise((t=>{setTimeout((()=>{t()}),e)})),r=null,n=[i];SO()||(r=this.loadTaskPromise,n.push(r)),Promise.all(n).then((()=>{it("functionalPageStartGame",{url:t,fail(e){wxNativeConsole.error("functionalPageStartGame fail",e)}}),r&&__subContextEngine__.initGameJS(),ql(),e>0&&(this.destroy(),l_.clear()),I_(),bO(Date.now())}))}}var xO=0,PO=0,DO=0,RO={};function OO(e,t){var i=1;if("portrait"===(DO>PO?"landscape":"portrait")){i=(PO-2*(xO+16+40+12-16))/PO}else i=.95;if("portrait"===(e>t?"landscape":"portrait")){t/e-PO/DO>=0||(i=(DO-20)/DO)}return i}k.onReady((()=>{PO=k.screenHeight,DO=k.screenWidth,RO=k.safeArea;var e=Math.max(PO,DO),t=e;RO&&RO.bottom&&(t=Math.max(RO.bottom,RO.right)),xO=e-t}));class kO extends IO{constructor({imageUrl:e}={}){var t=1,i=0,r=0,n=e.match(/size=(\d+)x(\d+)$/);n&&(t=OO(i=+n[1],r=+n[2])),super({slotTemplate:`\n      <image-previewer id="mainImage" scale="${t}"></image-previewer>\n    `,slotStyle:{mainImage:{left:0,top:0,width:DO,height:"portrait"==(DO>PO?"landscape":"portrait")?PO:PO-(xO+16+40+12)}}}),this.imageUrl=e,this.scale=t,this.width=i,this.height=r,this.sizeMatch=n,this.retried=[],rA(this).mainImage.onImageLoadFail((e=>{this.handleOnImageLoadFail(e)})),this.initImageInfo()}handleOnImageLoadFail(e){var t=this.retried;t.includes(e.url)?Ul({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((()=>{ql()}),500)}initImageInfo(){$l({title:"加载中",maskAll:!0}),this.sizeMatch?this.downloadImage().then((e=>{this.showImage({width:this.width,height:this.height,url:e.tempFilePath,scale:this.scale})})):this.downloadImage().then((e=>{it("getImageInfo",{src:e.tempFilePath,success:t=>{var{width:i,height:r}=t,n=OO(i,r);this.showImage({width:i,height:r,url:e.tempFilePath,scale:n})},fail:()=>{this.handleOnImageLoadFail({url:e.tempFilePath})}})}))}downloadImage(){return new Promise((e=>{Ka({url:this.imageUrl,success:t=>{e(t)},fail:()=>{this.handleOnImageLoadFail({url:this.imageUrl})}})}))}showImage(e){var{width:t,height:i,url:r,scale:n}=e,a=rA(this);"portrait"===(t>i?"landscape":"portrait")&&(a.mainImage.scale=n),a.mainImage.urls=[r],a.mainImage.update(),setTimeout((()=>{ql()}),500)}}var MO=0,NO=0,LO=0,BO=0,FO={};k.onReady((()=>{NO=k.screenHeight,LO=k.screenWidth,BO=k.statusBarHeight,FO=k.safeArea;var e=Math.max(NO,LO),t=e;FO&&FO.bottom&&(t=Math.max(FO.bottom,FO.right)),MO=e-t}));class UO extends IO{constructor({videoUrl:e,thumbUrl:t}={}){super({slotTemplate:`\n      <video id="mainVideo" src="${e}" poster="${t}" controls="true" object-fit="contain" autoplay="false" z-index="1000011" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n    `,slotStyle:function(){var e=LO>NO?"landscape":"portrait",t=MO+16+12+40;return{mainVideo:{position:"absolute",top:"portrait"===e?BO+36:20,left:"portrait"===e?0:MO,width:"portrait"===e?LO:LO-2*MO,height:"portrait"===e?NO-(BO+36)-t:NO-20-t}}}()}),this._handleVideoError(),this._playAtWIFI()}_handleVideoError(){rA(this).mainVideo.onError((()=>{Ul({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}_playAtWIFI(){if("wifi"===$i()){var e=rA(this);e.mainVideo.showCenterPlayBtn=!1,e.mainVideo.play()}}}var WO=Ae("BottomBannerButtonClicked"),GO=WO.internalOnMethod;WO.internalOffMethod;function VO(){var e=function(){var e=O_().referrerInfo,t=e&&e.messageExtraData,i={};return"object"==typeof t&&null!==t&&(i=t),i}(),t=O_(),i=f_(t.path),r=l_.get();r&&r.page.destroy();var n=function(e){var{path:t,query:i,pageType:r,params:n,paramsString:a,mode:o}=e,s=null;switch(r){case c_.PLAY_PAGE_IMAGE:s="singlePage"===o?new FR({imageUrl:e.params.fileUrl}):new kO({imageUrl:e.params.fileUrl});break;case c_.PLAY_PAGE_VIDEO:s="singlePage"===o?new HR({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl}):new UO({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl});break;default:s=new FR({imageUrl:e.params.fileUrl}),wxNativeConsole.error("PAGE_TYPE invalid",e)}return{path:t,query:i,pageType:r,params:n,paramsString:a,page:s}}({path:i.path,query:t.query,pageType:i.functionalPageType,params:e,paramsString:JSON.stringify(e),mode:t.mode});l_.set(n)}Ee("onBottomBannerButtonClicked",((e={})=>{WO.emit(e)})),k.onReady((()=>{S_(((e={})=>{if(!e.isLaunch)try{var t=f_(e.path),i=l_.get();if(i){var r=function(){var e=O_().referrerInfo,t=e&&e.messageExtraData,i="";return"object"==typeof t&&null!==t&&(i=JSON.stringify(t)),i}();t.isFunctionalPage?d_.includes(e.scene)&&r!==i.paramsString&&(i.page.destroy(),l_.clear(),VO()):i.page.runGame(0)}else t.isFunctionalPage&&VO()}catch(e){wxNativeConsole.error("_onBaseFrameShow error",e)}})),GO((()=>{var e=l_.get().params,t=y_(e.userQuery,e.userPath);it("restart",{url:t,scene:1155,fail(e){wxNativeConsole.error("restart fail",e)}})}))}));var jO={parseCompletePath:f_,initFunctionalPage:VO,VALID_SCENE:d_};function HO(e,t,i,r=0){Reporter.reportKeyValue({key:"Handoff",value:[k.appType+1e3,k.appLaunchInfo.scene,e,t,i,r,$i(),""].join(",")})}var zO=!1;function YO(e={}){HO(2,2,2),((e={})=>{if(st("showAuthorize",e,{apply:""})){var t=k.accountInfo.nickname,i=k.accountInfo.icon,r=JSON.stringify({nickname:t,icon:i,apply:e.apply,overlay:e.overlay}),n=zs((e=>{[Ls.BottomBackButton,Ls.NavigationBackInterceptionType,Ls.NavigateBackCall].includes(e.type)&&V_&&(V_.handleCancel(),V_=null)}));__sclEngine__.initScl((t=>{(V_=t.mainRoot.append("authorize",{input:r})).addListener("confirm",(()=>{Ys(n),ct({name:"showAuthorize",args:e})})),V_.addListener("cancel",(()=>{Ys(n),ut("showAuthorize",e,"cancel")}))}))}})({apply:"在电脑端微信打开小游戏",success(){HO(2,2,1),it("startHandoff",Object.assign({},e,{actionId:2}),{beforeSuccess:()=>HO(2,1,1),beforeFail:({errCode:e})=>HO(2,1,0,e)})},fail(){HO(2,2,0),ut("startHandoff",e,"cancel")}})}ic.on("beforeTouchEnd",(()=>{zO=!0})),ic.on("afterTouchEnd",(()=>{zO=!1}));var $O="";var qO=null;ce("onStartHandoff",(()=>{var e={};"function"==typeof qO&&("object"!=typeof(e=qO({}))&&(e={}),e.path="string"==typeof e.path?e.path:"","string"==typeof e.query&&(e.path=e.path+"?"+e.query)),it("startHandoff",Object.assign({},e,{actionId:1}),{beforeSuccess:()=>HO(1,1,1),beforeFail:({errCode:e})=>HO(1,1,0,e)})}));var QO=[],ZO=[],KO=Li("setUserCloudStorage","webapi_setselfuserstorage",(({KVDataList:e=[]})=>{var t={kv_list:e};return u(k.disableSetUserStorageFromMiniProgram)&&(t.disable_set_user_storage_from_miniprogram=k.disableSetUserStorageFromMiniProgram),t})),XO=(e={})=>{Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((e=>{if("object"!=typeof e||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?ut("setUserCloudStorage",e,"invalid KVData item"):KO(e):ut("setUserCloudStorage",e,"KVDataList.length must greater than 0"):ut("setUserCloudStorage",e,"KVDataList must be an Array")},JO=Li("removeUserCloudStorage","webapi_removeselfuserstorage",(({keyList:e})=>({key:e}))),ek=e=>{var t=Ug(e.keyList);t?ut("removeUserCloudStorage",e,t):JO(e)},tk=102,ik=103,rk=104,nk=105,ak=106,ok=108,sk=111,lk=112,uk=1,ck=2,dk=4,hk=5,pk=6,fk=7,gk=8,_k=9,mk=10,vk=11,yk=12,Ak=13,bk=14,Ek=15,wk=21,Tk=22,Ck=23,Sk=1001,Ik=1004,xk=1005,Pk=1006,Dk=1007,Rk=1e5,Ok=100001,kk=2018,Mk=2019,Nk=2020,Lk=2021,Bk=2023,Fk=2024,Uk=3001,Wk=3002,Gk=3003,Vk=3004,jk=4001;function Hk(e){try{var t=JSON.parse(e);return!0===t.is_notify?function(e,t){var i;switch(t){case kk:i="broadcast";break;case Mk:i="roomInfoChange";break;case Nk:i="syncFrame";break;case Bk:i="gameStartEnd";break;case Lk:i="receiveMessage";break;case Fk:i="beKickedOut";break;case Uk:case Wk:case Gk:i="syncInfo";break;case Vk:i="friendMessage";break;case jk:i="gameMatched";break;default:i=""}return{type:i,data:e.data}}(t,t.notify_cmd):function(e){var t,{businessid:i,ts:r,data:n,ret:a}=e;switch(i){case tk:return{type:"active",ts:r,errCode:a};case ik:return{type:"heartBeat",ts:r,errCode:a};case rk:case nk:if(0!==a)return{type:`resp-${r}`,ts:r,errCode:a};var o=JSON.parse(n);return t={type:`resp-${r}`,ts:r,errCode:o.errcode,errMsg:o.errmsg},o.resp_data&&(t.data=JSON.parse(o.resp_data)),t;case ok:case sk:case lk:if(0!==a)return{type:`resp-${r}`,ts:r,errCode:a};var s=JSON.parse(n);return t={type:`resp-${r}`,ts:r,errCode:s.errcode,errMsg:s.errmsg},s.resp_data&&(t.data=JSON.parse(s.resp_data)),t;case ak:return 0!==a?{type:`resp-${r}`,ts:r,errCode:a}:t={type:`resp-${r}`,ts:r,errCode:0,data:{clientId:n}};default:wxNativeConsole.error("Unknown WebSocket Message:",e)}}(t)}catch(e){return{type:"error",data:e.message}}}var zk,Yk={webSocketState:0,roomAccessInfo:"",gameAccessInfo:"",clientId:0,sessionId:"",socketTask:null,lockStep:null,connectedToRoom:!1,connectedToGame:!1,hasGameStarted:!1,roomInfo:null,hasLoggedIn:!1,loginPromise:null},$k={getCredentialsFail:217,startLockStepFail:218,getLostFramesFail:219},qk=e=>{var t=$k[e];t?Reporter.reportIDKey({key:t}):wxNativeConsole.error(`invalid name "${e}"`)},Qk=new _e;class Zk{constructor(e,t={}){return this.options=Object.assign({heartBeat:!0,heartBeatInterval:15e3,heartBeatTimeout:3e4},t),this._emitter=new _e,this._setSocket(e),this._bindHandlers(),this}_setSocket(e){this._socketTask=e,this._socketTask.onOpen(this._emitter.emit.bind(this._emitter,"ws-open")),this._socketTask.onClose(this._emitter.emit.bind(this._emitter,"ws-close")),this._socketTask.onError(this._emitter.emit.bind(this._emitter,"ws-error")),this._socketTask.onMessage(this._emitter.emit.bind(this._emitter,"ws-message"))}_bindHandlers(){this._emitter.on("ws-open",(()=>{this._emitter.once("recv-active",(e=>{0===e.errCode?this._emitter.emit("open",e):this._emitter.emit("error",e)})),this._sendRawPacket(tk).catch((e=>{this._emitter.off("recv-active"),this._emitter.emit("error",e)}))})).on("ws-message",(e=>{var t=Hk(e.data);"error"===t.type&&wxNativeConsole.error("响应数据异常",t.data),this._emitter.emit(`recv-${t.type}`,t),Qk.emit(`recv-${t.type}`,t)})).on("open",(()=>{this._sendHeartBeat()})).on("error",(()=>{this._heartBeatTimer&&clearTimeout(this._heartBeatTimer)})).on("ws-error",(e=>{wxNativeConsole.error("socket error:",e),this._heartBeatTimer&&clearTimeout(this._heartBeatTimer)})).on("ws-close",(e=>{this._heartBeatTimer&&clearTimeout(this._heartBeatTimer),zk=void 0,Yk.hasLoggedIn=!1,Yk.loginPromise=null,this._emitter.emit("logout",e)})).on("heartBeat-error",(e=>{})).on("logout",(e=>{Qk.emit("logout",e)}))}_sendHeartBeat(){this.options.heartBeat&&(this._heartBeatTimer=setTimeout((()=>{this._sendRawPacket(ik).catch((e=>{this._emitter.emit("heartBeat-error",e)})),this._emitter.once("recv-heartBeat",(e=>{0===e.errCode?(this._emitter.emit("heartBeat-ok",e),this._heartBeatTimeout&&clearTimeout(this._heartBeatTimeout),this._sendHeartBeat()):this._emitter.emit("heartBeat-error",e)})),this._heartBeatTimeout=setTimeout((()=>{this._emitter.emit("logout")}),this.options.heartBeatTimeout)}),this.options.heartBeatInterval))}_sendRawPacket(e,t,i,r){return new Promise((e=>{zk?e(zk):Oi({apiName:"webapi_getlockstepticket",success:t=>{var i=t.data;zk=i.socket_key,e(zk),Yk.sessionId=zk},fail:e=>{qk($k.getCredentialsFail),wxNativeConsole.error("getCredentials",e.errMsg)}})})).then((n=>new Promise(((a,o)=>{var s={session_id:n,fast:1,businessid:e,data:t,access_info:i,ts:(r||Date.now())+""};e===rk&&delete s.session_id,this._socketTask.send({data:JSON.stringify(s),success:a,fail:o})}))))}_listenForResponse(e,t,i,r){this._emitter.once(`recv-resp-${e}`,(e=>{delete e.type,delete e.ts,r.beforeAll&&r.beforeAll(e),0===e.errCode?(r.beforeSuccess&&r.beforeSuccess(e),t(e),r.afterSuccess&&r.afterSuccess(e)):(r.beforeFail&&r.beforeFail(e),i(e),r.afterFail&&r.afterFail(e)),r.afterAll&&r.afterAll(e)}))}sendCommand(e,t,i){var r;switch(e){case ck:case hk:case dk:r=rk;break;case mk:r=ak;break;case Sk:case Ik:case xk:case Pk:case Dk:r=ok;break;case Rk:case Ok:r=sk;break;default:r=nk}return new Promise(((n,a)=>{var{content:o,accessInfo:s}=t,l=Date.now();this._listenForResponse(l,n,a,i),this._sendRawPacket(r,JSON.stringify({cmd:e,content:JSON.stringify(o)}),s,l).then((()=>{})).catch((e=>{a(e)}))}))}close(e){return this._socketTask.close(e)}onOpen(e){this._emitter.on("open",e)}onClose(e){this._emitter.on("close",e)}onError(e){this._emitter.on("error",e)}onMessage(e){this._emitter.on("recv-message",e)}}function Kk(e={}){return new Zk(function(e={}){var t=Object.assign({},e,{url:"wss://long.wxagame.weixin.qq.com"});return No().connectSocket(t)}(e),e)}function Xk(e){return"Object"===o(e)?Object.keys(e).reduce(((t,i)=>{var r;return e[i]=Xk(e[i]),t[(r=i,r.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]})))]=e[i],t}),{}):Array.isArray(e)?e.map(Xk):e}function Jk(e){return"Object"===o(e)?Object.keys(e).reduce(((t,i)=>{var r;return e[i]=Jk(e[i]),t[(r=i,r.split(/(?=[A-Z])/).join("_").toLowerCase())]=e[i],t}),{}):Array.isArray(e)?e.map(Jk):e}function eM(){var e={gameTick:33,UDPReliabilityStrategy:3,heartBeatTick:2e3,offlineTimeLength:15e3,dataType:"String"};return g(k.lockStepOptions)?(["gameTick","UDPReliabilityStrategy","heartBeatTick","offlineTimeLength"].forEach((t=>{l(k.lockStepOptions[t])?e[t]=k.lockStepOptions[t]:console.warn(`game.json: lockStepOptions.${t} is not a Number, using default value ${e[t]}`)})),["String","ArrayBuffer"].indexOf(k.lockStepOptions.dataType)&&console.warn('game.json: lockStepOptions.dataType "WXConfig.lockStepOptions.dataType" is invalid, using default value "String"'),e):(console.warn("game.json: lockStepOptions is not an Object, using default options.",e),e)}var tM=new _e;var iM=1,rM=0,nM=1,aM=2,oM=3,sM=4,lM=5,uM=6,cM=6;var dM=class{constructor(){if(O.Z.LockStep){this.emitter=new ge;try{this.nativeInstance=new O.Z.LockStep}catch(e){wxNativeConsole.warn(`[LockStep] new 失败 ${e.message}`)}wxNativeConsole.warn("[LockStep] new 成功",this.nativeInstance);var{heartBeatTick:e,offlineTimeLength:t,gameTick:i,UDPReliabilityStrategy:r,dataType:n}=eM(),a={heartBeatTick:e,offlineTimeLength:t,UDPReliabilityStrategy:r,gameTick:i,dataType:n,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn(`[LockStep.initialize]gameTick=${a.gameTick}, hearBeatTick=${a.heartBeatTick}, offlineTimeLength=${a.offlineTimeLength}, UDPReliabilityStrategy=${a.UDPReliabilityStrategy}, gameTick=${a.gameTick}, dataType=${n}, address=${a.address}, port=${a.port}`),this.nativeInstance.initialize(a),this.nativeInstance.onStatusChange=e=>{var{status:t}=e,{requestId:i}=e;if(delete e.status,i)this.emitter.emit(`${t}_${i}`,e);else{switch(t){case rM:this.emitter.emit("onDisconnect");break;case lM:this.emitter.emit("onError"),tM.emit("error",e)}this.emitter.emit(t,e)}},this.nativeInstance.onSyncFrame=e=>{this.emitter.emit("onSyncFrame",e)}}else wxNativeConsole.error("当前环境不支持 LockStep")}uploadFrame({actionList:e}){return new Promise(((t,i)=>{try{this.nativeInstance.uploadFrame({actionList:e}),t()}catch(e){wxNativeConsole.error(`[LockStep.uploadFrame][fail] errMsg=${e.message}`),i({errMsg:e.message})}}))}getLostFrames({beginFrameId:e,endFrameId:t}){var i=iM++;return new Promise(((r,n)=>{this.nativeInstance.getLostFrames({beginFrameId:e,endFrameId:t,requestId:i}),this.emitter.once(`${uM}_${i}`,r),this.emitter.once(`${cM}_${i}`,(e=>{qk($k.getLostFramesFail),wxNativeConsole.error(`[LockStep.getLostFrames][fail], errMsg=${e.errMsg}, errCode=${e.errCode}`),n(e)}))}))}reconnect({accessInfo:e,clientId:t,sessionId:i}){var r=iM++;return new Promise(((n,a)=>{this.nativeInstance.reconnect({accessInfo:e,clientId:t,sessionId:i,requestId:r}),this.emitter.once(`${oM}_${r}`,n),this.emitter.once(`${sM}_${r}`,a)}))}onSyncFrame(e){this.emitter.on("onSyncFrame",e)}offSyncFrame(e){this.emitter.off("onSyncFrame",e)}startLockStep({accessInfo:e,clientId:t,sessionId:i}){var r=iM++;return new Promise(((n,a)=>{this.nativeInstance.startLockStep({accessInfo:e,clientId:t,sessionId:i,requestId:r}),this.emitter.once(`${nM}_${r}`,n),this.emitter.once(`${aM}_${r}`,a)}))}stopLockStep(){var e=iM++;this.nativeInstance.stopLockStep({requestId:e})}onError(e){this.emitter.on("onError",e)}offError(e){this.emitter.off("onError",e)}onDisconnect(e){this.emitter.on("onDisconnect",e)}offDisconnect(e){this.emitter.off("onDisconnect",e)}},hM=["id","event"],pM=new ge;ce("onLockStepTaskEvent",(e=>{var{id:t,event:i}=e,r=q()(e,hM);pM.emit(`${t}_${i}`,r),tM.emit(i,r)}));var fM=class{constructor(){this._createLockStep(),this._initialize(),this._registerMethod(),this._registerEvent()}_createLockStep(){var e="createLockStep 没有同步回调";if(it("createLockStep",{success:({id:e})=>{this.id=e},fail(t){wxNativeConsole.error(`[createLockStep][fail]errMsg=${t.errMsg}`),e=t.errMsg}}),c(this.id))throw new Error(e)}_initialize(){var{heartBeatTick:e,offlineTimeLength:t,gameTick:i,UDPReliabilityStrategy:r,dataType:n}=eM(),a={heartBeatTick:e,offlineTimeLength:t,UDPReliabilityStrategy:r,gameTick:i,dataType:n,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn(`[LockStep.initialize]gameTick=${a.gameTick}, hearBeatTick=${a.heartBeatTick}, offlineTimeLength=${a.offlineTimeLength}, UDPReliabilityStrategy=${a.UDPReliabilityStrategy}, gameTick=${a.gameTick}, dataType=${a.dataType}, address=${a.address}, port=${a.port}`),this._invokeLockStepMethod("initialize",a)}_invokeLockStepMethod(e,t){it("invokeLockStepMethod",Object.assign({},t,{method:e,id:this.id}),{beforeAll(t){t.errMsg=t.errMsg.replace("invokeLockStepMethod",`GameServerManager.${e}`),delete t.id,delete t.cmdId}})}_registerMethod(){["uploadFrame","getLostFrames","reconnect","startLockStep","stopLockStep"].forEach((e=>{this[e]=t=>new Promise(((i,r)=>{this._invokeLockStepMethod(e,Object.assign({},t,{success:i,fail:r}))}))}))}_registerEvent(){["syncFrame","disconnect","error"].forEach((e=>{var t=Ae(`LockStep_${this.id}_${e}`);this[`on${wi(e)}`]=t.onMethod,this[`off${wi(e)}`]=t.offMethod,pM.on(`${this.id}_${e}`,((e={})=>{t.emit(e)}))}))}};var gM=class{constructor(){return N?new fM:new dM}};function _M(){}var mM=class{constructor({wsEventName:e,nativeEventName:t,needJSONParse:i=!1,beforeEvent:r=_M}){if(Object.assign(this,{wsEventName:e,nativeEventName:t,needJSONParse:i,beforeEvent:r}),this.hasListenedNativeEvent=!1,e)this.internalEventManager=Ae(`GSM-${this.wsEventName}`),this.initWSEvent();else{if(!t)throw new Error(`invalid wsEventName "${e}" and nativeEventName "${t}"`);this.internalEventManager=Ae(`GSM-${this.nativeEventName}`)}}initWSEvent(){Qk.on(this.wsEventName,(e=>{this.needJSONParse?e=Xk(JSON.parse(e.data)):e.data=Xk(e.data),this.beforeEvent(e),this.internalEventManager.emit(e)})),this.onMethod=this.internalEventManager.onMethod,this.offMethod=this.internalEventManager.offMethod}onMethod(e){this.hasListenedNativeEvent||(this.hasListenedNativeEvent=!0,Yk.lockStep||(Yk.lockStep=new gM),Yk.lockStep[this.nativeEventName](((e={})=>{this.beforeEvent(e),this.internalEventManager.emit(e)}))),this.internalEventManager.onMethod(e)}offMethod(e){this.internalEventManager.offMethod(e)}},vM=new mM({nativeEventName:"onDisconnect",beforeEvent(e){e.type="game",Yk.connectedToGame=!1}}),yM=vM.onMethod.bind(vM),AM=vM.offMethod.bind(vM),bM=vM.internalEventManager.emit,EM={errCode:1001,errMsg:"has not logged in to server"};function wM(){}var TM=class{constructor({command:e,nativeMethodName:t,expectedArgs:i={},beforeInvoke:r=wM,beforeSend:n=wM,beforeSuccess:a=wM,autoFillAccessInfo:o=!0,functionType:s=1}){this.command=e,this.nativeMethodName=t,this.expectedArgs=i,this.beforeInvoke=r,this.beforeSend=n,this.beforeSuccess=a,this.autoFillAccessInfo=o,this.functionType=s}checkType(e,t,i){var r=o(i);if(r!==t)throw new Error(`${e} should be ${t} instead of ${r}`)}assertType(e){if("Object"!==o(e))throw new Error(`args should be object instead of ${o(e)}`);for(var t in this.expectedArgs)this.checkType(t.type,e[this.expectedArg.name])}checkIsCallbackStyle(e={}){return"Function"===o(e.success)||"Function"===o(e.fail)||"Function"===o(e.complete)}sendCommand({rawArgs:e}){return Yk.hasLoggedIn?new Promise(((t,i)=>{var r={accessInfo:this.autoFillAccessInfo?Yk.roomAccessInfo:e.accessInfo,content:Jk(e)};delete r.content.access_info,this.beforeSend(r,e),Yk.socketTask.sendCommand(this.command,r,{}).then((e=>{e=Xk(e);var r=this.beforeSuccess(e);r instanceof Promise?r.then((()=>{t(e)})).catch((e=>{i(e)})):t(e)})).catch((e=>{i(e)}))})):Promise.reject(EM)}callNative({rawArgs:e}){var t=Object.assign({},e);return delete t.success,delete t.fail,delete t.complete,["login","reconnect"].includes(this.nativeMethodName)&&(t.sessionId=Yk.sessionId,t.clientId=Yk.clientId),Yk.lockStep||(Yk.lockStep=new gM),Yk.lockStep[this.nativeMethodName](t)}invokeMethod(e={}){this.assertType(e),this.beforeInvoke(e);var t,i=this.checkIsCallbackStyle(e);switch(this.functionType){case 1:t=this.sendCommand({rawArgs:e});break;case 2:t=this.callNative({rawArgs:e});break;default:throw new Error(`invalid function type: ${this.functionType}`)}return i?void t.then((t=>{e.success&&e.success(t),e.complete&&e.complete(t)})).catch((t=>{e.fail&&e.fail(t),e.complete&&e.complete(t)})):t}},CM=new TM({command:gk,beforeSend(e){var{gameTick:t,UDPReliabilityStrategy:i}=eM();e.content.udp_reliability_strategy=i,e.content.game_tick=t},beforeSuccess(e){Yk.gameAccessInfo&&Yk.lockStep.stopLockStep();var{accessInfo:t,clientId:i}=e.data;Yk.roomAccessInfo=t,Yk.gameAccessInfo="",Yk.connectedToRoom=!0,Yk.clientId=i}}),SM=CM.invokeMethod.bind(CM),IM=new TM({command:_k,autoFillAccessInfo:!1,beforeSend(e){this.tempAccessInfo=e.accessInfo},beforeSuccess(e){var{clientId:t}=e.data;Yk.roomAccessInfo=this.tempAccessInfo,Yk.gameAccessInfo="",Yk.connectedToRoom=!0,Yk.clientId=t}}),xM=IM.invokeMethod.bind(IM),PM=new TM({command:vk}),DM=PM.invokeMethod.bind(PM),RM=new TM({command:yk}),OM=RM.invokeMethod.bind(RM),kM=new TM({command:Ek}),MM=kM.invokeMethod.bind(kM),NM=new TM({command:pk}),LM=NM.invokeMethod.bind(NM),BM=new TM({command:bk,beforeSend(e){e.content.quit=!0},beforeSuccess(){Yk.gameAccessInfo&&Yk.lockStep.stopLockStep(),Yk.roomAccessInfo="",Yk.gameAccessInfo=""}}),FM=BM.invokeMethod.bind(BM),UM=new TM({command:Ak,beforeSuccess(){Yk.gameAccessInfo&&Yk.lockStep.stopLockStep(),Yk.roomAccessInfo="",Yk.gameAccessInfo=""}}),WM=UM.invokeMethod.bind(UM),GM=new TM({command:uk,beforeSend(e){e.content.use_udp_to_lockstep=!0}}),VM=GM.invokeMethod.bind(GM),jM=new TM({command:fk,beforeInvoke(){if(!Yk.gameAccessInfo)throw new Error("game has not started")},beforeSend(e){e.content.use_udp_to_lockstep=!0}}),HM=jM.invokeMethod.bind(jM),zM=new TM({functionType:2,nativeMethodName:"uploadFrame"}),YM=zM.invokeMethod.bind(zM),$M=new TM({functionType:2,nativeMethodName:"getLostFrames"}),qM=$M.invokeMethod.bind($M),QM=new mM({wsEventName:"recv-broadcast",needJSONParse:!0}),ZM=QM.onMethod,KM=QM.offMethod,XM=new mM({wsEventName:"recv-roomInfoChange",needJSONParse:!0,beforeEvent(e){Yk.roomInfo=e}}),JM=XM.onMethod,eN=XM.offMethod;new mM({wsEventName:"recv-gameStartEnd",needJSONParse:!0}).onMethod((({state:e,accessInfo:t})=>{switch(e){case 2:wxNativeConsole.warn(`[onGameStart] accessInfo=${t}`),Yk.gameAccessInfo=t,Yk.lockStep||(Yk.lockStep=new gM),Yk.lockStep.startLockStep({accessInfo:t,clientId:Yk.clientId,sessionId:Yk.sessionId}).then((()=>{Yk.connectedToGame=!0,Yk.hasGameStarted=!0,tN.emit({}),wxNativeConsole.warn("[onGameStart][LockStep.start][success]")})).catch((e=>{qk($k.startLockStepFail),wxNativeConsole.error("[onGameStart][LockStep.start][fail]",e)}));break;case 3:wxNativeConsole.warn("[onGameEnd]"),Yk.lockStep.stopLockStep(),Yk.hasGameStarted=!0,nN.emit({gameAccessInfo:Yk.gameAccessInfo}),Yk.gameAccessInfo=""}}));var tN=Ae("LockStepGameStart"),iN=tN.onMethod,rN=tN.offMethod,nN=Ae("LockStepGameEnd"),aN=nN.onMethod,oN=nN.offMethod,sN=new mM({nativeEventName:"onSyncFrame",beforeEvent(){Yk.hasGameStarted||(Yk.hasGameStarted=!0,Yk.connectedToGame=!0,tN.emit({}))}}),lN=sN.onMethod.bind(sN),uN=sN.offMethod.bind(sN),cN=(()=>{var e=new TM({command:mk,autoFillAccessInfo:!1});return e.invokeMethod.bind(e)})(),dN=(()=>{var e=new TM({functionType:2,nativeMethodName:"reconnect",beforeSuccess(){Yk.connectedToGame=!0}});return e.invokeMethod.bind(e)})();function hN(e){if(Yk.connectedToGame)return Promise.resolve({});switch(e.roomState){case 1:return Promise.resolve({});case 2:case 5:var{gameAccessInfo:t}=e;return Yk.gameAccessInfo=t,dN({accessInfo:t,clientId:Yk.clientId,sessionId:Yk.sessionId});case 3:return Promise.reject({errMsg:"the room state is ended."});case 4:return Promise.reject({errMsg:"the room state is destroyed"});default:return Promise.reject({errMsg:`invalid room state: ${e.roomState}`})}}var pN=new TM({command:wk}),fN=pN.invokeMethod.bind(pN),gN=new TM({command:Tk}),_N=gN.invokeMethod.bind(gN),mN=new mM({wsEventName:"recv-beKickedOut",needJSONParse:!1,beforeEvent(e){Yk.gameAccessInfo&&Yk.lockStep.stopLockStep(),Yk.roomAccessInfo="",Yk.gameAccessInfo="",wxNativeConsole.warn("[onBeKickedOut]",e)}}),vN=mN.onMethod.bind(mN),yN=mN.offMethod.bind(mN),AN=new TM({command:Ck}),bN=AN.invokeMethod.bind(AN),EN=new TM({command:Sk}),wN=EN.invokeMethod.bind(EN),TN=new TM({command:xk}),CN=TN.invokeMethod.bind(TN),SN="";var IN=new TM({command:Pk}),xN=IN.invokeMethod.bind(IN);var PN=new TM({command:Dk}),DN=PN.invokeMethod.bind(PN),RN=new mM({wsEventName:"recv-syncInfo",needJSONParse:!0}),ON=RN.onMethod,kN=RN.offMethod,MN=new _e;new mM({wsEventName:"recv-friendMessage",needJSONParse:!0}).onMethod((e=>{e.msg=JSON.parse(e.msg),MN.emit(e.msg.type,e)}));var NN=new WeakMap;var LN=Li("getFriendsStateData","webapi_opengameinfo_getfriendsuserdata",(()=>{}),(e=>{var{friend_data_list:t}=e;return e.list=t?t.map((({game_info:e,profile:t})=>({userState:e.user_state,sysState:e.sys_state,openId:e.open_id,nickName:t.nick_name,avatarUrl:t.avatar_url,gender:t.gender}))):[],delete e.friend_data_list,e})),BN=new TM({command:Rk}),FN=BN.invokeMethod.bind(BN),UN=new TM({command:Ok}),WN=UN.invokeMethod.bind(UN),GN=new mM({wsEventName:"recv-gameMatched",needJSONParse:!0}),VN=GN.onMethod,jN=GN.offMethod,HN={login:()=>(Yk.loginPromise||(Yk.loginPromise=new Promise(((e,t)=>{var i=e=>{wxNativeConsole.error("connectSocketError",e),t(e.errMsg)};Yk.socketTask=Kk(),Yk.socketTask._emitter.once("recv-active",(()=>{Yk.hasLoggedIn=!0,e(),Yk.socketTask._emitter.off("ws-error",i)})),Yk.socketTask._emitter.once("ws-error",i)}))),Yk.loginPromise),logout:()=>new Promise(((e,t)=>{if(!Yk.socketTask)return e();try{Yk.socketTask.close(),Yk.socketTask._emitter.once("ws-close",e),delete Yk.socketTask}catch(e){wxNativeConsole.error("GameServerManager.logout() fail",e.message),t(e.message)}})),onLogout:e=>{Qk.on("logout",(()=>{e(),Yk.roomAccessInfo&&bM({type:"room"})}))},offLogout:e=>{Qk.off("logout",e)},createRoom:SM,joinRoom:xM,updateReadyStatus:DM,changeSeat:OM,getRoomInfo:MM,broadcastInRoom:LM,ownerLeaveRoom:WM,memberLeaveRoom:FM,startGame:VM,endGame:HM,uploadFrame:YM,getLostFrames:qM,reconnect:e=>{return wxNativeConsole.warn("[reconnect][invoke]",e),(t=e.accessInfo,cN({accessInfo:t}).then((e=>(wxNativeConsole.warn(`[roomReconnect][success]accessInfo=${t}, clientId=${e.data.clientId}`),Yk.roomAccessInfo=t,Yk.connectedToRoom=!0,Yk.clientId=Number(e.data.clientId),MM()))).then((e=>(wxNativeConsole.warn("[getRoomInfo][success]",e),Yk.roomInfo=e.data.roomInfo,Yk.roomInfo.gameAccessInfo&&(Yk.gameAccessInfo=Yk.roomInfo.gameAccessInfo),Promise.resolve(Yk.roomInfo))))).then(hN);var t},getLastRoomInfo:fN,kickoutMember:_N,restart:bN,onBroadcast:ZM,offBroadcast:KM,onRoomInfoChange:JM,offRoomInfoChange:eN,onSyncFrame:lN,offSyncFrame:uN,onGameStart:iN,offGameStart:rN,onGameEnd:aN,offGameEnd:oN,onDisconnect:yM,offDisconnect:AM,onBeKickedOut:vN,offBeKickedOut:yN,onLockStepError:function(e){"function"==typeof e&&tM.on("error",e)},offLockStepError:function(e){"function"==typeof e?tM.off("error",e):tM.removeAllListeners("error")},startStateService:wN,endStateService:CN,setState:DN,setInviteData:function(e){return"string"==typeof e&&(SN=e,!0)},onInvite:function(e){var t=({srcProfile:t,msg:i})=>{var{data:r}=i,{nickName:n,openId:a}=t,o=a+"_"+Date.now(),s=[a,"",1,o].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:s}),Ul({confirmText:"加入",cancelText:"取消",content:`${n} 邀请你一起玩游戏，是否加入？`,success:t=>{t.confirm&&e({openId:a,data:r});var i=[a,"",t.confirm?2:3,o].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:i})}})};NN.set(e,t),MN.on("invite",t)},offInvite:function(e){MN.off("invite",NN.get(e)),NN.delete(e)},startMatch:FN,cancelMatch:WN,onMatch:VN,offMatch:jN},zN={inviteFriend:function({openId:e}){xN({target_openid_list:[e],msg:JSON.stringify({type:"invite",data:SN})})},onStateUpdate:ON,offStateUpdate:kN,getFriendsStateData:LN},YN=new WeakMap;class $N extends Number{}var qN=()=>new $N(9999);class QN{constructor(){YN.set(this,new WeakMap)}setTimeout(){var e=YN.get(this),t=O.Z.setTimeout.apply(void 0,arguments),i=qN();return e.set(i,t),i}clearTimeout(e){var t=YN.get(this).get(e);void 0!==t&&O.Z.clearTimeout(t)}setInterval(){var e=YN.get(this),t=O.Z.setInterval.apply(void 0,arguments),i=qN();return e.set(i,t),i}clearInterval(e){var t=YN.get(this).get(e);void 0!==t&&O.Z.clearInterval(t)}requestAnimationFrame(){var e=YN.get(this),t=O.Z.requestAnimationFrame.apply(void 0,arguments),i=qN();return e.set(i,t),i}cancelAnimationFrame(e){var t=YN.get(this).get(e);void 0!==t&&O.Z.cancelAnimationFrame(t)}}var ZN=()=>{var e=new QN;return{setTimeout:e.setTimeout.bind(e),clearTimeout:e.clearTimeout.bind(e),setInterval:e.setInterval.bind(e),clearInterval:e.clearInterval.bind(e),requestAnimationFrame:e.requestAnimationFrame.bind(e),cancelAnimationFrame:e.cancelAnimationFrame.bind(e)}};function KN(e,t={},i=!1){var r,{pluginId:n,contexts:a,path:o}=(e=>{var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error(`Plugin "${e}" has not registered.`);var i=t[1],r=t[2],n=k.plugins||k.gamePlugins,a=n&&n[i];if(void 0===a)throw new Error(`Plugin "${e}" has not registered.`);return{pluginId:a.provider,contexts:a.contexts,alias:i,path:r}})(e),s=`__plugin__/${n}`+(o?`/${o}`:"");if(((e=[])=>e.some((e=>"isolatedContext"===e.type)))(a)){var l=((e,{enableRequireHostModule:t,customEnv:i,subContext:r})=>{var n=UI(e);return n.customEnv=i,t&&(n.requireHostModule=r?__subContextEngine__.getGameOpenDataContext().contextGlobal.__require:__subContextEngine__.getGameContext().contextGlobal.__require),n})(n,K()(K()({},t),{},{subContext:i}));l.subContext=i,l.host=k.accountInfo.appId,r=__subContextEngine__.createIsolatedGamePlugin({provider:n,secure:!0,env:l,subContext:i,isPreload:!1})}else if(!i&&(e=>!e||e.some((e=>"gameContext"===e.type)))(a))r=__subContextEngine__.getGameContext().contextGlobal.__require;else{if(!i||!(e=>e.some((e=>"openDataContext"===e.type)))(a))throw new Error(`invalid context type: ${function(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}(a)}`);r=__subContextEngine__.getGameOpenDataContext().contextGlobal.__require}return r(s)}var XN=Li("routeJSServer","routeJsSvr",(({name:e="",arg:t=""})=>({json_args:JSON.stringify({data:JSON.stringify({arg:t,name:e})})})),(e=>{if(!e.rawDataObject)return e.errMsg,e;var{data:t,log:i}=e.rawDataObject;return e.data=JSON.parse(t),e.log=i,e.baseResp=JSON.parse(e.base_resp),e.baseResp.errCode=e.baseResp.errcode,e.baseResp.errMsg=e.baseResp.errmsg,delete e.base_resp,delete e.baseResp.errcode,delete e.baseResp.errmsg,e})),JN={createWorker:Gx},eL=({provider:e})=>{var t={};for(var i in((e,t)=>{Jt.set(e,t)})(t,{provider:e}),JN)t[i]=JN[i].bind(t);return t},tL=null,iL=null,rL=ZN(),nL={console:Y(),Reporter:Reporter,setTimeout:rL.setTimeout,clearTimeout:rL.clearTimeout,setInterval:rL.setInterval,clearInterval:rL.clearInterval,requestAnimationFrame:rL.requestAnimationFrame,cancelAnimationFrame:rL.cancelAnimationFrame,wxNativeConsole:wxNativeConsole,FunctionalPage:jO,requirePlugin:function(e,t){return KN(e,t)},WXWebAssembly:VA(),getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},_getCurrentNetworkType:$i},aL=ZN(),oL={WXConfig:k,log:O.Z.log,setTimeout:aL.setTimeout,clearTimeout:aL.clearTimeout,setInterval:aL.setInterval,clearInterval:aL.clearInterval,requestAnimationFrame:aL.requestAnimationFrame,cancelAnimationFrame:aL.cancelAnimationFrame,Canvas:function(){return rx()},Image:function(){var e=new mv;return function(e){if(!N&&!H&&!Av.call(e,"src")){var t=e.__proto__;_v||(_v={addEventListener(e,i){t.addEventListener.call(this,e,wv(i))},removeEventListener(e,i){t.removeEventListener.call(this,e,Ev.get(i)||i)}}),e.__proto__=_v,bv.forEach((i=>{for(var r=t;r&&(!Av.call(r,i)||"break"!==function(){var t=yv(r,i);if(/^on/.test(i)){var n=null;vv(e,i,{get:()=>n,set(i){n=i,t.set.call(e,wv(i))}})}else vv(e,i,t);return"break"}());r=r.__proto__);}))}}(e),e},Touch:ym,Audio:Ep,APIs:{getGroupUserGameData:({shareTicket:e,success:t,fail:i,complete:r}={})=>{setTimeout((()=>{var n=qt,a=e||n.lastShareTicket;if(a&&n.get(a)){var o=n.get(a),{shareKey:s,shareName:l}=o;Oi({sdkApiName:"getGroupUserGameData",apiName:"webapi_getgroupsnsdata",reqData:{share_key:s,share_name:l},success:e=>{var i=e.data,r=i.member_list||i.memberList||[];QO=r,"function"==typeof t&&t({errMsg:e.errMsg,data:r})},fail:i,complete:r})}else{var u={errMsg:"getGroupUserGameData:fail 当前小程序不是从群分享卡片打开"};"function"==typeof i&&i(u),"function"==typeof r&&r(u)}}),0)},getFriendUserGameData:({success:e,fail:t,complete:i}={})=>{setTimeout((()=>{Oi({sdkApiName:"getFriendUserGameData",apiName:"webapi_getfriendsnsdata",reqData:{},success:t=>{var i=t.data.friendList||[];ZO=i,"function"==typeof e&&e({errMsg:t.errMsg,data:i})},fail:t,complete:i})}),0)},getUserInfo:jv,getFriendCloudStorage:jg,getGroupInfo:qg,getGroupCloudStorage:zg,getUserCloudStorage:Gg,setUserCloudStorage:XO,getUserCloudStorageKeys:Hv,removeUserCloudStorage:ek,getGroupDataCache:()=>QO,getFriendDataCache:()=>ZO,getSystemInfo:ns,getSystemInfoSync:as,showModal:Wl,modifyFriendInteractiveStorage:RA,shareMessageToFriend:Gv,getPotentialFriendList:Yg,getGameServerManager:()=>zN,routeJSServer:XN,getCloudFileUrl:ac,checkHandoffEnabled:function(e={}){it("checkHandoffEnabled",Object.assign({},e,{showToast:!1}),{beforeSuccess:({isEnabled:e,errCode:t})=>HO(2,3,e?1:0,t)})},startHandoff:function(e={}){Kt("handoff")?zO?it("checkHandoffEnabled",{showToast:!0,success({isEnabled:t,errCode:i}){t?YO(Object.assign({},e,{path:$O})):(HO(2,1,0,i),ut("startHandoff",e,"low pc version or not login"))},fail({errMsg:t}){ut("startHandoff",e,t)}}):ut("startHandoff",e,"not in touchEnd"):ut("startHandoff",e,"no permission")}},checkPermissionSync:Kt,apiReport:Dr,Reporter:Reporter,wxNativeConsole:wxNativeConsole,requirePlugin:KN,getWxSourceMap(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap}};N&&(oL.console=console),H&&(oL.console=O.Z.console,oL.WXConfig.__wkrenderer_h5=!0);var sL=function(){if(tL)return tL;if(nL.sharedCanvas=nx(),oL.sharedCanvas=nx(),oL.originalProto=kg(),oL.WXConfig=k,nL.wx=wx,k.openDataContextExtension){var e=Object.assign({},wx,{getFileSystemManager:()=>en.opendata},jo.opendata);e.env={USER_DATA_PATH:rn()},oL.downloadFile=Ka,oL.wx=e,oL.NativeGlobal=O.Z}return tL={game:nL,gameOpenData:oL}},lL=function(){return iL||(iL={game:{wx:wx}})},uL=e=>{var{provider:t}=e;return{console:Y(),Reporter:Reporter,setTimeout:O.Z.setTimeout,clearTimeout:O.Z.clearTimeout,setInterval:O.Z.setInterval,clearInterval:O.Z.clearInterval,requestAnimationFrame:O.Z.requestAnimationFrame,cancelAnimationFrame:O.Z.cancelAnimationFrame,WXWebAssembly:VA({provider:t}),wx:eL({provider:t})}},cL=(e={})=>{it("uploadToCommonCDN",e,{})},dL=function(e,t,i){for(var r in t){if("exportToAppServiceSDK"===r)return;e[r]=t[r]}["onPageReload"].forEach((r=>{t[r]&&(e[r]=e=>{t[r].call(i,e)})}))},hL="1.9.91";class pL{constructor({traceid:e,aid:t,group_id:i,dest_type:r,dest_appid:n,watermark_type:a,url:o,rl:s,apurl:l,weapp_ghid:u,pt:c,title:d,imageUrl:h,width:p,height:f}){this.traceid=e,this.aid=t,this.group_id=i,this.dest_type=r,this.dest_appid=n,this.watermark_type=a,this.url=o,this.rl=s,this.apurl=l,this.weapp_ghid=u,this.pt=c,this.title=d,this.imageUrl=h,this.width=p,this.height=f}getConstant(){var e=["traceid","aid","group_id","weapp_ghid","pt"];return 1===this.dest_type&&(e=["traceid","aid","group_id","pt"]),Object.keys(this).filter((t=>-1!==e.indexOf(t))).reduce(((e,t)=>(e[t]=this[t],e)),{sdk_version:hL})}report(e,t,i,r){Oi({sdkApiName:"reportAdData",apiName:"advert_report",reqData:e,success:e=>{try{0!==(e=e.data).ret?"function"==typeof i&&i({errMsg:`reportAdData fail: ret ${e.ret}`}):"function"==typeof t&&t(e)}catch(e){"function"==typeof i&&i({errMsg:e.message})}},fail:i,complete:r})}reportExpose({viewable:e,screenCount:t=1,success:i,fail:r,complete:n}={}){var a=this.getConstant(),o={report_type:0,apurl:this.apurl,viewable:e,screen_cnt:t};this.report(Object.assign({},o,a),i,r,n)}reportClick({screenCount:e=1,absoluteX:t=0,absoluteY:i=0,pressInterval:r=0,relativeX:n=0,relativeY:a=0,realWidth:o,realHeight:s,success:l,fail:u,complete:c}={}){var d=this.getConstant(),h={report_type:1,rl:this.rl,screen_cnt:e,click_point:JSON.stringify({x:t,y:i}),press_interval:r,pos_x:n,pos_y:a,ad_w:o,ad_h:s,from_game:1};this.report(Object.assign({},h,d),l,u,c)}navigateTo({success:e,fail:t,complete:i}={}){1===this.dest_type?qs({url:this.url,success:e,fail:t,complete:i}):6===this.dest_type?it("navigateToMiniProgram",{appId:this.dest_appid,path:Ot(this.url).trim(),scene:1092,sourcetype:1,success:e,fail:t,complete:i}):"function"==typeof t&&t({errMsg:`dest_type ${this.dest_type} 是一个非法值`})}}var fL=new vi;var gL="",_L="",mL="{}",vL="",yL="",AL="{}";function bL(e=""){return new Promise(((t,i)=>{var r="",n="";L&&k.clientVersion>=654316032?it("getDeviceInfo",{waidPkg:e,success(e){r=e.waid||"",n=e.imei||"",t({waid:r,imei:n})},fail(e){i(e)}}):t({waid:r,imei:n})}))}var EL=e=>e&&"object"==typeof e&&!Array.isArray(e),wL=(e,...t)=>{if(!t.length)return e;var i=t.shift();if(EL(e)&&EL(i))for(var r in i)EL(i[r])?(e[r]||Object.assign(e,{[r]:{}}),wL(e[r],i[r])):Object.assign(e,{[r]:i[r]});return wL(e,...t)},TL=()=>{var e=new Date,t=e.getMonth()+1,i=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(i>9?"":"0")+i].join("")},CL=e=>{if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},SL=(e,t)=>{for(var i=0,r=0,n=0;n<e.length;n++)(i+=/[\u4e00-\u9fa5]/.test(e[n])?2:1)<t-1&&(r=n);return i>t?`${e.substring(0,r+1)}...`:e},IL=(e,t,i)=>{"string"==typeof t&&(t=t.split("."));for(var r=e,n=0;r&&n<t.length;)r=r[t[n]],n+=1;return r||i},xL=e=>{var t=0,i=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{it("measureText",Object.assign({},i,{complete(e){t=e.width||0}}))}catch(e){}return t},PL=il((({url:e,adInfo:t,adUxInfo:i,success:r,fail:n,complete:a})=>{var o={url:e,adInfo:t,success:r,fail:n,complete:a};i&&(o.adUxInfo=i),it("private_openUrl",o)})),DL=il((({canvasInfo:e,posType:t,success:i,fail:r,complete:n})=>{var a;it("openADCanvas",{canvasId:e.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:t}),adInfoXml:(a=e.ad_info_xml,0===(a=a||"").length?"":a.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g,"    ").replace(/&#039;|&#39;/g,"'").replace(/&#047;|&#47;/g,"/").replace(/&#092;|&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n")),openFirstSightVoice:1,success:i,fail:r,complete:n})})),RL=il((({appId:e,path:t,traceid:i,aid:r,adInfo:n,adUxInfo:a,success:o,fail:s,complete:l})=>{var u=`${i}:${r}`,c={appId:e,path:Ot(t).trim(),scene:1095,sourcetype:1,sceneNote:u,adInfo:n,success:o,fail:s,complete:l};a&&(c.adUxInfo=a),it("navigateToMiniProgram",c)})),OL=il(((e=!0,t,i=!1)=>(r={})=>{if(st("adOperateWXData",r,{apiName:""})){var n={data:{api_name:r.apiName,data:r.reqData||{},operate_directly:e},isImportant:!0===i,requestInQueue:!r.hasOwnProperty("requestInQueue")||Boolean(r.requestInQueue)};it("adOperateWXData",Object.assign({},n,r),{beforeAll(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess(e){L&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data?e.data=JSON.parse(e.data.data):e.data={}}})}})(!1,"adOperateWXDataForAd")),kL=(e={})=>ki(Object.assign({},e,{sdkApiName:"operateWXDataForAd"}));function ML(e){ot("showSplashAd",e)}function NL(e){ot("splashAdFirstStepViewLayoutStateChange",e)}function LL(e){ot("splashAdAllViewLayoutStateChange",e)}var BL=e=>Number(e).toString()===e,FL=(e,t)=>t.reduce(((t,i)=>(t[i]=e[i],t)),{}),UL=e=>e&&"object"==typeof e&&!Array.isArray(e);function WL(e,...t){if(!t.length)return e;var i=t.shift();if(UL(e)&&UL(i))for(var r of Object.keys(i))UL(i[r])?(e[r]||Object.assign(e,{[r]:{}}),WL(e[r],i[r])):Object.assign(e,{[r]:i[r]});return WL(e,...t)}var GL,VL,jL,HL,zL,YL,$L,qL,QL,ZL,KL,XL,JL,eB,tB,iB,rB,nB,aB,oB,sB,lB,uB=(e,t,i)=>{for(var r="string"==typeof t?t.split("."):t,n=e,a=0;n&&a<r.length;)n=n[r[a]],a+=1;return n||i},cB=e=>e.reduce(((e,t)=>(Array.isArray(t)?e.push(...cB(t)):e.push(t),e)),[]),dB=e=>JSON.parse(JSON.stringify(e)),hB=e=>{Object.freeze(e),Object.getOwnPropertyNames(e).forEach((t=>{var i;try{i=e[t]}catch(e){}"object"!=typeof i&&"function"!=typeof i||Object.isFrozen(i)||hB(i)}))};!function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic",e.EVALUATEEXPR="evaluateExpr"}(GL||(GL={})),function(e){e.TAP="tap",e.SLIDE="slide",e.ANIMATIONEND="animationend"}(VL||(VL={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(jL||(jL={})),function(e){e.BUTTONTAP="buttonTap"}(HL||(HL={})),function(e){e.RELATIONFETCHED="relationFetched"}(zL||(zL={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(YL||(YL={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}($L||($L={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(qL||(qL={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(QL||(QL={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(ZL||(ZL={})),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(KL||(KL={})),function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(XL||(XL={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(JL||(JL={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(eB||(eB={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(tB||(tB={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(iB||(iB={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(rB||(rB={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(nB||(nB={})),function(e){e[e.COMMON=1]="COMMON"}(aB||(aB={})),function(e){e[e.COMMON=1]="COMMON"}(oB||(oB={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(sB||(sB={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(lB||(lB={}));var pB,fB=(e,t)=>({idKey:e,idKeyGroup:t});!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD",e[e.CPSSHOPAD=1764]="CPSSHOPAD"}(pB||(pB={}));var gB,_B,mB=e=>fB(e,pB.COMMON),vB={AD_BANNER_LOAD_ERROR:mB(5),AD_VIDEO_LOAD_ERROR:mB(10),REWARDED_VIDEO_PARSE_ERROR:mB(11),REWARDED_VIDEO_RENDER_ERROR:mB(12),REWARDED_VIDEO_LOAD_ERROR:mB(13),REWARDED_VIDEO_FOLLOW_SUCCESS:mB(14),OPEN_URL_ERROR:mB(21),OPEN_WXAPP_ERROR:mB(22),OPEN_CANVAS_ERROR:mB(23),ADD_CONTACT_ERROR:mB(24),LAUNCH_APP_ERROR:mB(25),OPEN_WEBAPPSTORE_ERROR:mB(26),ADD_DOWNLOAD_TASK_ERROR:mB(28),CLICK_REPORT_ERROR:mB(32),EXPOSURE_REPORT_ERROR:mB(33),FOLLOW_REPORT_ERROR:mB(34),REWARDED_VIDEO_ANIMATE_ERROR:mB(35),INTERSTITIALAD_ANIMATE_ERROR:mB(36),AD_FOLLOWED:mB(37),AD_INSTALLED:mB(38),AD_INTERSTITIAL_LOAD_ERROR:mB(39),INTERSTITIAL_AD_RENDER_ERROR:mB(40),INTERSTITIAL_FOLLOW_SUCCESS:mB(41),INTERSTITIAL_SHOW_FAIL1:mB(42),INTERSTITIAL_SHOW_FAIL2:mB(43),INTERSTITIAL_SHOW_FAIL3:mB(44),INTERSTITIAL_SHOW_FAIL5:mB(45),INTERSTITIAL_SHOW_SUCCESS:mB(46),INTERSTITIAL_LIMIT_TIME:mB(49),REWARDED_VIDEO_INSTANCE_BROKEN:mB(50),PRELOAD_MINIENV_SUCCESS:mB(86),PRELOAD_MINIENV_ERROR:mB(87),AD_GRID_LOAD_SUCCESS:mB(88),AD_GRID_LOAD_COUNT_ERROR:mB(89),AD_GRID_LOAD_ERROR:mB(90),PREDOWNLOAD_SUCCESS:mB(96),PREDOWNLOAD_ERROR:mB(97),INTERSTITIAL_VIDEO_LOAD:mB(98),INTERSTITIAL_VIDEO_PLAY:mB(99),INTERSTITIAL_IMAGE_LOAD:mB(100),INTERSTITIAL_VIDEO_LOAD_ERROR:mB(101),INTERSTITIAL_VIDEO_REPORT_ERROR:mB(102),INTERSTITIAL_VIDEO_PLAY_SUCCESS:mB(103),INTERSTITIAL_VIDEO_PLAY_SUCCESS_END:mB(104),INTERSTITIAL_VIDEO_PRELOAD_SUCCESS:mB(106),REWARDED_VIDEO_OTHER_SHOW_ERROR:mB(105),INTERSTITIAL_VIDEO_PRELOAD_ERROR:mB(107),INTERSTITIAL_RENDER_SUCCESS:mB(108),INTERSTITIAL_RENDER_ERROR:mB(109),INTERSTITIAL_RENDER_ERROR_ALTERNATE:mB(110),BATCHLOAD_SUCCESS:mB(112),BATCHLOAD_ERROR:mB(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:mB(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:mB(115),INTERSTITIAL_RELATION_FETCH_ERROR:mB(116),BIND_GUIDE_SUCCESS:mB(119),BIND_GUIDE_ERROR:mB(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:mB(121),INTERSTITIAL_CROSSPAGE_MATERIAL_CLICK:mB(123),INTERSTITIAL_CROSSPAGE_CANCELBOX_CLICK:mB(124),INTERSTITIAL_NO_CONTAINER:mB(125),INTERSTITIAL_HIDE_ERROR:mB(126),RIGHTBUTTON_HIDE_ERROR:mB(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:mB(128),GET_DEVICEINFO_ERROR:mB(129),THIRD_ERROR:mB(130),GET_DEVICEINFO_SUCCESS:mB(131),GET_WAID_SUCCESS:mB(132),GET_WAID_ERROR:mB(133),READ_ADINFOS_ERROR:mB(134),AD_FETCH_SUCCESS:mB(135),REWARDED_VIDEO_PRELOAD_ERROR:mB(136),REWARDED_VIDEO_PRELOAD_SUCCESS:mB(137),READ_ADINFOS_SUCCESS:mB(138),ANALYSE_DEBUG_REPORT_ERROR:mB(139),PRELOAD_CALL_ERROR:mB(140),PRELOAD_LOAD_ERROR:mB(141),PRELOAD_LOAD_SUCCESS:mB(142),PRELOAD_USE_SUCCESS:mB(143),PRELOAD_USE_ERROR:mB(144),PRELOAD_DOWNLOAD_SUCCESS:mB(145),PRELOAD_DOWNLOAD_ERROR:mB(146),REPORT_VIDEO_FAILED:mB(147),REWARD_GAUSS_EXISTS:mB(148),REWARD_USE_GAUSS:mB(149),REWARD_USE_EXPAND_STYLE:mB(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:mB(151),REWARDED_VIDEO_KEEP_ALIVE:mB(152),INTERSTITIAL_KEEP_ALIVE:mB(153),REWARDED_VIDEO_END:mB(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:mB(156),OPEN_CHANNELS_ACTIVITY_FAILED:mB(157),OPEN_CHANNELS_LIVE_SUCCESS:mB(158),OPEN_CHANNELS_LIVE_FAILED:mB(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:mB(160),OPEN_CHANNELS_USER_PROFILE_FAILED:mB(161),REWARD_CHANNELS_CALLBACK_SUCCESS:mB(162),REWARD_CHANNELS_CALLBACK_FAILED:mB(163),H5_PRELOAD_CARD_CLICKED:mB(164),H5_PRELOAD_BUTTON_CLICKED:mB(165),H5_PRELOAD_SUCCESS:mB(166),H5_PRELOAD_FAILED:mB(167),H5_PRELOAD_PLAYABLE_CLICKED:mB(168),GET_CHANNELS_LIVE_STATUS_SUCCESS:mB(169),GET_CHANNELS_LIVE_STATUS_FAILED:mB(170),REWARDED_VIDEO_DURATION_ZERO:mB(171),REWARDED_VIDEO_SNS_SUPPLEMENTARY_DATA_ERROR:mB(173),INTERSTITIAL_TEMPLATE_RENDER_SUCCESS:mB(178),INTERSTITIAL_TEMPLATE_RENDER_FAILED:mB(179),INTERSTITIAL_SNS_SUPPLEMENTARY_DATA_ERROR:mB(180),OPEN_WEBSTORE_ERROR:mB(181),AD_FETCH_ERROR:mB(182),CHECK_FLOW_ERROR:mB(183),CHECK_AD_SKIP_CARD_SUCCESS:mB(188),COPY_GIFT_CODE_SUCCESS:mB(189),COPY_GIFT_CODE_FAIL:mB(190),OPEN_MACHINE_MKT_SUCCESS:mB(191),OPEN_MACHINE_MKT_ERROR:mB(192),OPEN_SHOP_SCHEME_SUCCESS:mB(193),OPEN_SHOP_SCHEME_ERROR:mB(194),UPDATE_ADINFOXML_ERROR:mB(195)},yB=e=>fB(e,pB.SPLASHAD),AB={dataLoadSuccess:yB(0),dataLoadFail:yB(1),dataPreloadSuccess:yB(2),dataPreloadFail:yB(3),handleDataFail:yB(4),launchAcceptShouldShow:yB(5),menuAcceptShouldShow:yB(6),readFileFail:yB(7),launchShowSplashAdSuccess:yB(8),menuShowSplashAdSuccess:yB(9),showSplashAdFail:yB(10),firstRenderFail:yB(11),firstInsertFail:yB(12),secondRenderFail:yB(13),secondInsertFail:yB(14),iosThirdInsertFail:yB(15),checkAdStateFail:yB(16),adOfflineClose:yB(17),readFileDataFail:yB(18),firstShowSuccess:yB(19),showSplashAdMenuSuccess:yB(20),showSplashAdMenuFail:yB(21),secondShowSuccess:yB(22),removeFileDataFail:yB(23),landingPageFail:yB(24),frequencyControlFail:yB(25),frequencyControlReturn:yB(26),bulkCopyFileFail:yB(27),getAdInfosFail:yB(28),getAidFail:yB(29),setExposureTagFail:yB(30),NO_ADINFOS:yB(31),NO_AID:yB(32),MATERIAL_NOT_READY:yB(33),CHECK_AD_STATUS_ERROR:yB(34),CRT_ORIENTATION_NOT_SURE:yB(35),EXPOSURE_TIMES_LIMIT:yB(36),START_CHECK_AD_STATUS:yB(37),CHECK_AD_STATUS_SUCCESS:yB(38),OTHER_ADS_EMIT_FETCH:yB(39),WRITE_ADINFOS_SUCCESS:yB(40),WRITE_ADINFOS_FAIL:yB(41)},bB=e=>fB(e,pB.CUSTOMAD),EB={LOAD_FAILED:bB(1),PRELOAD_SUCCESS:bB(2),PRELOAD_FAILED:bB(3),PARSE_FAILED:bB(4),TPL_RENDER_SUCCESS:bB(5),TPL_PARSE_FAILED:bB(6),TPL_LOAD_FAILED:bB(7),AD_LIMIT_TIME:bB(8),AD_LIMIT_BOUNDARY:bB(9),RELATION_FETCH_ERROR:bB(10),SHOW_FAILED1:bB(11),SHOW_FAILED2:bB(12),AD_VIDEO_LOAD_FAILED:bB(13),FOLLOW_SUCCESS:bB(14),FOLLOW_FAILED:bB(15),RENDER_SUCCESS:bB(16),RENDER_FAILED:bB(17),REFETCH_SUCCESS:bB(18),REFETCH_FAILED:bB(19),LOAD_SUCCESS:bB(20),WIDTH_GET_ERROR:bB(21),ORIGIN_EXPOSURE_ERROR:bB(22),VIEWABLE_EXPOSURE_ERROR:bB(23)},wB=e=>fB(e,pB.CPSSHOPAD),TB={PARSE_ERROR:wB(1),CALL_ERROR:wB(2),HAS_UUID:wB(3),EXPURL_ERROR:wB(4),EXPOSURE_NOFEEDBACK:wB(5),CLICK_NOFEEDBACK:wB(6),DEST_ERROR:wB(7),CLICK_INOF_ERROR:wB(8),CLICK_DATA:wB(9),EXPOSURE_DATA:wB(10)};!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(gB||(gB={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(_B||(_B={}));var CB,SB,IB,xB,PB,DB,RB,OB,kB,MB=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"];i(942),i(185);!function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(CB||(CB={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(SB||(SB={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_FINDER_FREE_TRADE=16]="POS_TYPE_FINDER_FREE_TRADE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(IB||(IB={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(xB||(xB={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_CARD_FULL_SHAKE_VIDEO=1814]="CRT_SIZE_CARD_FULL_SHAKE_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO",e[e.CRT_SIZE_SLIDER_CARD_VIDEO=1765]="CRT_SIZE_SLIDER_CARD_VIDEO",e[e.CRT_SIZE_SLIDER_CARD_IMAGE=1766]="CRT_SIZE_SLIDER_CARD_IMAGE",e[e.CRT_SIZE_FINDER_FREE_TRADE_EMPTY=1009]="CRT_SIZE_FINDER_FREE_TRADE_EMPTY"}(PB||(PB={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_CHANNELS_USER_PROFILE=60007]="PAGE_TYPE_CHANNELS_USER_PROFILE",e[e.PAGE_TYPE_CHANNELS_FOLLOW_CARD=60008]="PAGE_TYPE_CHANNELS_FOLLOW_CARD",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(DB||(DB={})),function(e){e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.PIC_TIME5=555]="PIC_TIME5",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_PIC_MOMENT=666]="CRT_SIZE_PIC_MOMENT",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_AMS_PIC_169=711]="CRT_SIZE_AMS_PIC_169",e[e.CRT_SIZE_AMS_PIC_916=712]="CRT_SIZE_AMS_PIC_916",e[e.CRT_SIZE_AMS_VIDEO_169=720]="CRT_SIZE_AMS_VIDEO_169",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916",e[e.CRT_SIZE_IN_TEXT_DESC_CARD=841]="CRT_SIZE_IN_TEXT_DESC_CARD",e[e.CRT_SIZE_VIDEO_TIME6=888]="CRT_SIZE_VIDEO_TIME6",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_BIG_PIC=998]="CRT_SIZE_BIG_PIC",e[e.CRT_SIZE_SPLASH_AD=1003]="CRT_SIZE_SPLASH_AD",e[e.CRT_SIZE_VERTICAL_VIDEO=1064]="CRT_SIZE_VERTICAL_VIDEO",e[e.CRT_SIZE_VERTICAL_VIDEO_916=1480]="CRT_SIZE_VERTICAL_VIDEO_916",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.CRT_SIZE_CARD_COMPT_IMAGE=1707]="CRT_SIZE_CARD_COMPT_IMAGE",e[e.CRT_SIZE_CARD_COMPT_VIDEO=1708]="CRT_SIZE_CARD_COMPT_VIDEO"}(RB||(RB={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(OB||(OB={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(kB||(kB={}));var NB,LB={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},BB={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},FB=[RB.CRT_SIZE_WX_APPLICATION,RB.CRT_SIZE_WX_APPLICATION_NEW,RB.CRT_SIZE_WX_APPLICATION_X,RB.CRT_SIZE_WX_APPLICATION_CARD,RB.CRT_SIZE_REWARD_VEDIO169,RB.CRT_SIZE_REWARD_VEDIO916,RB.CRT_SIZE_TABLE_SCREEN_IMAGE,RB.CRT_SIZE_AMS_PIC_169,RB.CRT_SIZE_AMS_PIC_916,RB.CRT_SIZE_AMS_VIDEO_169,RB.CRT_SIZE_REWARD_LANDINGPAGE,RB.CRT_SIZE_INSERT_VIDEO,RB.CRT_SIZE_MULTI_POS_NEW_PIC,RB.CRT_SIZE_MULTI_POS_VEDIO,RB.CRT_SIZE_MULTI_POS_GRID,RB.CRT_SIZE_BIG_PIC,RB.CRT_SIZE_SPLASH_AD,RB.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,RB.CRT_SIZE_VERTICAL_VIDEO_NEW_916,RB.APP_VIDEO,RB.CRT_SIZE_PIC_MOMENT,RB.CRT_SIZE_VIDEO_TIME6,RB.CRT_SIZE_VERTICAL_VIDEO,RB.CRT_SIZE_VERTICAL_VIDEO_916,RB.CRT_SIZE_CARD_COMPT_IMAGE,RB.CRT_SIZE_CARD_COMPT_VIDEO];!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(NB||(NB={}));var UB,WB,GB,VB,jB;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VIDEO=1]="VIDEO",e[e.LIVE=2]="LIVE"}(UB||(UB={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROOM=1]="ROOM",e[e.RESERVATION=2]="RESERVATION"}(WB||(WB={})),function(e){e[e.NONE=1]="NONE",e[e.ON_AIR=2]="ON_AIR",e[e.ENDED=3]="ENDED",e[e.IN_PREPARE=4]="IN_PREPARE"}(GB||(GB={})),function(e){e[e.NONE=0]="NONE",e[e.NICKNAME=1]="NICKNAME",e[e.LINK=2]="LINK",e[e.RESOURCE=3]="RESOURCE",e[e.ACTIONBUTTON=4]="ACTIONBUTTON",e[e.CANVASBUTTON=5]="CANVASBUTTON",e[e.TAGBUTTON=6]="TAGBUTTON"}(VB||(VB={})),function(e){e[e.WELFAREAD=3]="WELFAREAD"}(jB||(jB={}));var HB=RB,zB={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885",cpsShopAd:"4021337766924141"},YB={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},$B={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},qB={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},QB={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch",110380:"widget_gray_webstore",109764:"widget_gray_reward_use_gauss_blur_android_system_version",109766:"widget_gray_reward_use_gauss_blur_android_wechat_version",110106:"widget_gray_splash_check_and_fetch",110108:"widget_gray_splashad_show_duration",110422:"widget_gray_interstitialAd_insurance_tips",110562:"widget_gray_interstitial_template",112296:"widget_gray_banner_exposure_toggle",113524:"widget_gray_rewarded_video_effect_guide"},ZB={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},KB="wxfile://ad",XB="wxfile://ad/adinfos.txt",JB={splashAd:1288,customAd:1390},eF={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},tF={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,cpsShopAd:11,grid:13,splashAd:14},iF={click:1,exposure:0},rF={showed:0,viewable:1,incentiveVideoCard:2},nF={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},aF={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},oF={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"},sF=e=>{var t={};try{for(var i of e=JSON.parse(e))i.hasOwnProperty("exp_para")&&i.exp_para.forEach((e=>{BL(e.value)?t[e.name]=Number(e.value):t[e.name]=e.value}));for(var r in t)QB[r]&&(t[QB[r]]=t[r]);return t}catch(e){return{}}},lF=({aid:e,buttonText:t=""})=>kL({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:e.toString(),button_text:t})}}).then((e=>{if(!e.data)throw new Error("get_ad_metric no result");try{var{data:t}=e,i=JSON.parse(t.result),{ad_metric_count:r,desc_text:n}=i||{};return null==r||null==n||r<50?null:{count:(a=r,a<1e4?a.toString():`${(a/1e4).toFixed(1)}万`),descText:n}}catch(e){throw new Error("get_ad_metric invalid result")}var a})).catch((()=>{throw new Error("get_ad_metric request failed")})),uF={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"},{type:"string",key:"machine_brand",value:""},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}],23415:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"string",key:"adunitid",value:""},{type:"uint32",key:"button_type",value:"0"},{type:"uint64",key:"button_time",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint64",key:"ad_clk_time",value:"0"},{type:"uint64",key:"ad_exp_time",value:"0"},{type:"uint32",key:"ad_clk_x",value:"0"},{type:"uint32",key:"ad_clk_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"}]},cF=e=>{var t=uF[e.toString()];return t?t.concat([]):[]},dF=e=>{for(var t=Array.isArray(e)?e[0]:e;t.parent&&t.parent!==yU&&t.parent.referComponent;)t=t.parent;return t};class hF{constructor(e){this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._rootElement=void 0,this._elementMap={},this.props=void 0,this.parent=null,this.props=e}setState(e,t){var i=this;this._stateQueue=this._stateQueue||{};var r=!1;for(var n of Object.keys(e)){e[n]!==this.state[n]&&(r=!0)}r?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout(zo()((function*(){i._setStateTimer=null;var e=!1;for(var r of Object.keys(i._stateQueue)){var n=i._stateQueue[r];i.state[r]!==n&&(e=!0)}e&&(BF(i,"updateState",K()(K()({},i.state),i._stateQueue)),Object.assign(i.state,i._stateQueue),NF(i),oU(dF(i._rootElement)),yield yU.nextLayout(),null==t||t(i.state,i.props))})),0)):null==t||t(this.state,this.props)}ready(e){}updatedProps(){}render(){return""}_unmountComponent(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents))for(var e of this._subComponents)e._unmountComponent();BF(this,"destroy")}}getRootElement(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}getRootElements(){return this._rootElement}getRootComponent(){for(var e=this;e.parent;)e=e.parent;return e}getSubComponents(){return this._subComponents}getElementById(e){return this._elementMap[e]?this._elementMap[e]:null}getEventHandler(e){return this._eventHandler[e]}setStyle(e,t){var i=this;return zo()((function*(){var r=i.getElementById(e),n=i._manualStyle;e&&t&&(r&&Object.assign(r.style,t),n[e]=n[e]||{},Object.assign(n[e],t)),yield Promise.resolve();var a=i.getRootComponent();yield a.requestLayout()}))()}requestLayout(){var e=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((t=>{this._setStyleTimer&&clearTimeout(this._setStyleTimer),this._setStyleTimer=setTimeout((()=>{this._setStyleTimer=null,oU(dF(this._rootElement)),Promise.race([null==e?void 0:e.nextUpdate(),Js(200)].filter((e=>e))).then((()=>t()))}),0)}))}_bindEvent(e,t,i){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(i),i}_unbindEvent(e,t,i){var r,n;return!(null===(r=this._eventHandler[e])||void 0===r||null===(n=r[t])||void 0===n||!n.has(i))&&(this._eventHandler[e][t].delete(i),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}onClick(e,t){return this._bindEvent(e,"click",t)}offClick(e,t){return this._unbindEvent(e,"click",t)}onReady(e,t){return this._bindEvent(e,"ready",t)}offReady(e,t){return this._unbindEvent(e,"ready",t)}onTouchstart(e,t){return this._bindEvent(e,"touchstart",t)}offTouchstart(e,t){return this._unbindEvent(e,"touchstart",t)}onTouchmove(e,t){return this._bindEvent(e,"touchmove",t)}offTouchmove(e,t){return this._unbindEvent(e,"touchmove",t)}onTouchend(e,t){return this._bindEvent(e,"touchend",t)}offTouchend(e,t){return this._unbindEvent(e,"touchend",t)}onTouchcancel(e,t){return this._bindEvent(e,"touchcancel",t)}offTouchcancel(e,t){return this._unbindEvent(e,"touchcancel",t)}onWaiting(e,t){return this._bindEvent(e,"waiting",t)}offWaiting(e,t){return this._unbindEvent(e,"waiting",t)}onPlay(e,t){return this._bindEvent(e,"play",t)}offPlay(e,t){return this._unbindEvent(e,"play",t)}onPause(e,t){return this._bindEvent(e,"pause",t)}offPause(e,t){return this._unbindEvent(e,"pause",t)}onEnded(e,t){return this._bindEvent(e,"ended",t)}offEnded(e,t){return this._unbindEvent(e,"ended",t)}onTimeUpdate(e,t){return this._bindEvent(e,"timeUpdate",t)}offTimeUpdate(e,t){return this._unbindEvent(e,"timeUpdate",t)}onError(e,t){return this._bindEvent(e,"error",t)}offError(e,t){return this._unbindEvent(e,"error",t)}onProgress(e,t){return this._bindEvent(e,"progress",t)}offProgress(e,t){return this._unbindEvent(e,"progress",t)}onFullScreenChange(e,t){return this._bindEvent(e,"fullScreenChange",t)}offFullScreenChange(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}hF.isComponent=!0,hF.subComponents={};var pF;!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullscreenChange="fullscreenChange",e.loadedMetaData="loadedMetaData"}(pF||(pF={}));class fF extends hF{render(){var{props:{children:e}}=this;return e}}fF.isFragment=!0;var gF="Fragment",_F={view:zv,text:Yv,image:ey,video:uy},mF=e=>e.name[0]>="A"&&e.name[0]<="Z",vF=e=>Object.keys(e.children).map((t=>e.children[t])),yF=new WeakMap,AF=(e,t)=>{var{referComponent:i}=t,r={children:t.children},n="getSubComponentProps",a=[];if(e.getProps){var[o,...s]=e.getProps.split(":");n=o,a=s}for(var l of(Object.assign(r,BF(i,n,t.name,...a)||{}),Object.keys(e))){var u=e[l];["getProps","children"].includes(l)||(r[l]=u)}return r.children=t.children,r},bF=(e,t,i)=>{if(!i.isComponent)throw new Error(`class ${e.name} is not a component, please ensure extend BaseComponent`);return MF(i,AF(t,e),!1,e.referComponent)},EF=(e,t=wF(e))=>{var{referComponent:i}=e,{id:r}=t,n=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),a=K()({},t);r&&(a.name=r),delete a.id,a.style=_U({classList:n,name:r,referComponent:i});var o=null!=a.bubbleEvent,s=new(0,_F[e.name])(a);if(s.isBubbleEventSet=o,Object.assign(s,{classList:n,referComponent:i,key:t.key||null}),r&&i&&i.getEventHandler(r))for(var l of Object.keys(i.getEventHandler(r))){var u=i.getEventHandler(r)[l];if(l in pF){if("video"===e.name)for(var c of u){var d=s[`on${l[0].toUpperCase()}${l.slice(1)}`];null==d||d.call(s,c)}}else for(var h of u)s.on(l,h)}return null!=r&&(i._elementMap[r]=s),s},wF=e=>{var t={};for(var i of Object.keys(e.attributes)){var r=e.attributes[i],n=tl(i);t[n]=r,/\{\{.+\}\}/.test(r)||("true"===r?t[n]=!0:"false"===r?t[n]=!1:"id"===n?t.id=tl(r):t[n]=r)}return t},TF=e=>{var t=e.constructor.subComponents||[],i="function"==typeof t?t():t;return K()(K()({},i),{},{[gF]:fF})},CF=e=>{if(Array.isArray(e)){var t=e.map((e=>CF(e))),i={element:null,subComponents:[]};for(var{element:r,subComponents:n}of t)for(var a of(r&&(null===i.element&&(i.element=[]),Array.isArray(r)?i.element.push(...cB(r)):i.element.push(r)),n))i.subComponents.includes(a)||i.subComponents.push(a);return i}if(!e)return{element:null,subComponents:[]};var o,s=TF(e.referComponent),l=[],u=wF(e);if(mF(e)){if(!s[e.name])throw new Error(`component name ${e.name} does not exists`);var c=bF(e,u,s[e.name]);if(!(o=c.getRootElements()))return{element:null,subComponents:[]};l.push(c)}else{var d=EF(e,u);e.children.forEach((e=>{var{element:t,subComponents:i}=CF(e);if(t)if(l.push(...i),Array.isArray(t))for(var r of t)d.add(r);else d.add(t)})),o=d}return{element:o,subComponents:l}},SF=(e,t)=>{var i=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"],r=!1;for(var n of i)void 0===t[n]&&(t[n]=void 0);for(var a of Object.keys(t)){var o=t[a];i.includes(a)&&e[a]!==o&&(e[a]=o,r=!0)}return r},IF=(e,t,i=null)=>{var r=i;if(e!==t){if(!r){if(!e||!e.parent)throw new Error("can not find element tree without parent");r=e.parent}if(e&&r.remove(e),t)if(Array.isArray(t))for(var n of t)r.add(n);else r.add(t)}},xF=(e,t)=>_F[t.name]&&e?e.constructor===_F[t.name]:!(null==e||!e.isRootElementOfComponent||!e.referComponent)&&e.referComponent.constructor.name===t.name,PF=(e,t)=>{var i=wF(t),r=t.referComponent,n=TF(r),a=e&&xF(e,t);if(!mF(t)){if(!t.children||0===t.children.length)return e&&a?(SF(e,i),e):EF(t,i);if(e&&a)return SF(e,i),RF(vF(e),t.children),e;var{element:o,subComponents:s}=CF(t);return r.getSubComponents().push(...s),o}var l=null==e?void 0:e.referComponent,u=null==l?void 0:l.constructor;if(l&&u===n[t.name])return Object.assign(l.props,AF(i,t)),NF(l);var c=r.getSubComponents().indexOf(l);return c>-1&&r.getSubComponents().splice(c,1),l&&BF(l,"destroy"),null==e||e.remove(),bF(t,i,n[t.name]).getRootElements()},DF=e=>e.reduce(((e,t)=>(t.name===gF?e.push(...DF(t.children)):e.push(t),e)),[]),RF=(e,t)=>{var i=[],r={};for(var n of e)n.key?r[n.key]=n:i.push(n);for(var a of DF(t)){var{key:o}=a,s=null;if(o)r[o]&&(s=r[o],delete r[o]);else for(var l of Object.keys(i)){var u=i[+l];if(u&&xF(u,a)){s=u,i.splice(Number(l),1);break}}s||(s=i.shift()||null),e.length&&e[0].parent&&IF(s,PF(s,a),e[0].parent)}var c=Object.keys(r).reduce(((e,t)=>(e.push(r[t]),e)),[]);for(var d of[...i,...c])null==d||d.remove()},OF=(e,t)=>{Array.isArray(e)?e.forEach((e=>OF(e,t))):(t(e),e.children.forEach((e=>OF(e,t))))},kF=(e,t)=>{OF(e,(e=>{e.referComponent||(e.referComponent=t)}))},MF=(e,t,i=!0,r=null)=>{var n=new e(t);n.parent=r;var a=n.render(),o="string"==typeof a?Lg()(a).root:a;kF(o,n);var{element:s,subComponents:l}=CF(o);return n._subComponents=l,s&&(n._rootElement=s,Array.isArray(s)?s.forEach((e=>{e.isRootElementOfComponent=!0})):s.isRootElementOfComponent=!0),BF(n,"ready",s,l),i&&(s&&(Array.isArray(s)?s.forEach((e=>{yU.add(e),oU(e)})):(yU.add(s),oU(s))),yF.set(e,n)),n},NF=(e,t)=>{t&&Object.assign(e.props,t);var i=e.getRootElements(),r=e.render(),n="string"==typeof r?Lg()(r).root:r;return kF(n,e),Array.isArray(i)&&Array.isArray(n)?RF(i,n):Array.isArray(i)&&!Array.isArray(n)?RF(i,[n]):!Array.isArray(i)&&Array.isArray(n)?RF([i],n):Array.isArray(i)||Array.isArray(n)||IF(i,PF(i,n)),BF(e,"updatedProps"),i},LF=e=>{if(!e.isComponent)throw new Error("variable is not a component instance");var t=e.getRootElements();Array.isArray(t)?t.forEach((e=>yU.remove(e))):yU.remove(t),e._unmountComponent(),yF.delete(e.constructor)},BF=(e,t,...i)=>"function"==typeof e[t]?e[t](...i):null,FF=!1,UF={},WF={ACTION_TYPE_CLICK_GAME:1,ACTION_TYPE_CLICK_CLOSE_BTN:2,ACTION_TYPE_CLICK_HIDE:3,ACTION_TYPE_COMPLAINT:4,ACTION_TYPE_NOT_INTERESTED:5,ACTION_TYPE_INFLUEENCE_OPERATION:6},GF={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3},VF={reportId:1101,idkey:{BANNER_LOAD_ERROR:1,BANNER_RENDER_ERROR:2,PORTAL_LOAD_ERROR:3,PORTAL_RENDER_ERROR:14,LAUNCH_APP_ERROR:5,REPORT_ERROR:6,BANNER_TIMEOUT:7,BANNER_WXDATA_TIMEOUT:8,BANNER_TIMEOUT_RETRY_SUCCESS:9,BANNER_TIMEOUT_RETRY_FAIL:10,PORTAL_TIMEOUT:11,PORTAL_WXDATA_TIMEOUT:12,PORTAL_TIMEOUT_RETRY_SUCCESS:13,PORTAL_TIMEOUT_RETRY_FAIL:4,BANNER_DATA_INVALID:15,PORTAL_DATA_INVALID:16,BANNER_DATA_INVALID_RETRY_SUCCESS:17,BANNER_DATA_INVALID_RETRY_FAIL:18,PORTAL_DATA_INVALID_RETRY_SUCCESS:19,PORTAL_DATA_INVALID_RETRY_FAIL:20,ICON_LOAD_ERROR:21,ICON_TIMEOUT:22,ICON_WXDATA_TIMEOUT:23,ICON_TIMEOUT_RETRY_SUCCESS:24,ICON_TIMEOUT_RETRY_FAIL:25,ICON_DATA_INVALID:26,ICON_DATA_INVALID_RETRY_SUCCESS:27,ICON_DATA_INVALID_RETRY_FAIL:28,BANNER_PRELOAD_SUCCESS:29,BANNER_PRELOAD_FAIL:30,PORTAL_PRELOAD_SUCCESS:31,PORTAL_PRELOAD_FAIL:32,ICON_PRELOAD_SUCCESS:33,ICON_PRELOAD_FAIL:34},designWidth:375,TIMEOUT:15e3,ERRMSG:{NODATA:"no data available, please invoke load()",DUPLICATEWARN:"同一时刻只能展示一个同一类型的组件",NO_ADUNITID_WARN:"please pass in the adUnitId"},adType:GF,adTypeName:{[GF.AD_TYPE_BANNER]:"BANNER",[GF.AD_TYPE_PORTAL]:"PORTAL",[GF.AD_TYPE_ICON]:"ICON"},actionType:WF,feedbackList:[{name:"不感兴趣",actionType:WF.ACTION_TYPE_NOT_INTERESTED},{name:"影响操作",actionType:WF.ACTION_TYPE_INFLUEENCE_OPERATION}],presetChars:{0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625}},jF=VF.presetChars,HF=null;var zF=new class{constructor(){}getCharWidth(e,t){return(jF[e]?jF[e]:10)*t/10}limitString(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}getTextWidth(e,t){if(L)return this.getTextWidthInAndroid(e,t);var i=(()=>{if(HF)return HF;var e=new NativeGlobal.Canvas;return e.width=1,e.height=1,HF=e.getContext("2d")})();return t&&(i.font=`${t}px PingFangSC-Regular, SF Pro Display, SF Pro Text`),Math.ceil(i.measureText(e).width||0)+1}getTextWidthInAndroid(e,t){e=(e=String(e)).split("");var i=0;return e.forEach((e=>{var r=this.getCharWidth(e,t);i+=r})),i}getMaxWordLength(e,t,i,r=!0){e=(e=String(e)).split("");var n=0,a=0;r&&(i-=this.getTextWidth("...",t));for(var o=0;o<e.length;o++){var s=e[o],l=this.getCharWidth(s,t);if(n+l>i)break;a++,n+=l}return a}textMetrics(e,t){for(var{fontSize:i,maxWidth:r,maxLines:n=1}=t,a=[],o=0,s=e.substring(0,e.length);o<n;){var l=this.getMaxWordLength(s,i,r,!(o!==n-1)),u=o===n-1?this.limitString(s,l):s.substring(0,l);u&&a.push({text:u,width:this.getTextWidth(u,i)}),o++,s=s.substring(l,s.length)}return a}},YF=["width","height"],$F=(e="column",t)=>["row","column"].indexOf(e)===["width","height"].indexOf(t),qF=(e,t)=>Math.max(e,t),QF=(e,t)=>e+t,ZF=e=>({width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}),KF=e=>({width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}),XF=(e,t,i)=>e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+i:parseFloat(e.slice(0,-1))/100*t+i,JF=(e,t,i,r,n,a)=>{var o,s=e.parent,l=r[i],u=KF(e)[i],c=t,d=null,h=!1;if(!n&&a>0&&(null==c||a>c)&&(c=a),r.position&&"absolute"===r.position[1]&&null!=c&&(c+=a),l||null==c)l&&"percent"===l[0]&&null!=c?(d=c*l[1]-u,h=!0):l&&"digit"===l[0]&&(d=l[1]-u,h=!0);else if("auto"!==e.style[i])if("absolute"===(null===(o=r.position)||void 0===o?void 0:o[1])){var p=0,f=!1;for(var g of"width"===i?["left","right"]:["top","bottom"])null!=r[g]?"digit"===r[g][0]?p+=Number(r[g][1])||0:"percent"===r[g][0]&&(p+=(Number(r[g][1])||0)*c):f=!0;d=f?null:c-p}else if(n&&$F(s.style.flexDirection,i)&&e.style.flex>0)d=null;else{var _=$F(e.style.flexDirection,i);(e=>EU(e).some((e=>null!=e.style.flex&&e.style.flex>0)))(e)&&_&&(h=!0),d=c-u}return null!=d&&(e.autoFitSize[i].size=d),h},eU=(e,t)=>e.parent&&e.parent!==yU?e.parent.style[t]:"width"===t?UF.screenWidth:UF.screenHeight,tU=e=>{var t=AU(e),i=KF(e);e.autoFitSize={width:{size:null,margin:0,padding:i.width},height:{size:null,margin:0,padding:i.height}};var r=e.parent;if(t||r.autoFitSize){var n=vU(_U(e)),a={width:!1,height:!1},o={width:null,height:null};for(var s of YF){var l=n[s],u=t?eU(e,s):r.autoFitSize[s].size,c=t?0:r.autoFitSize[s].padding;!l&&t&&"height"===s&&(u=null),a[s]=JF(e,u,s,n,!0,c)}nU(e,n);var d=KF(e),h="wrap"===e.style.flexWrap,p=[];for(var f of EU(e)){tU(f);var g=ZF(f);if("absolute"!==f.style.position)for(var _ of YF){var m=$F(e.style.flexDirection,_);if(h){if(m){var v="width"===_?"height":"width";p.push([(f.autoFitSize[_].size||0)+f.autoFitSize[_].padding+g[_],(f.autoFitSize[v].size||0)+f.autoFitSize[v].padding+g[v]])}}else{var y=m?QF:qF;null==f.autoFitSize[_].size&&f.autoFitSize[_].padding<=0&&y===QF&&(a[_]=!0),o[_]=y((f.autoFitSize[_].size||0)+f.autoFitSize[_].padding+g[_],o[_]||0)}}}if(h){var A=0,b=0,E=0,w=0,T=$F(e.style.flexDirection,"width")?"width":"height",C="width"===T?"height":"width";for(var[S,I]of(w=a[T]&&null!=e.style[T]?e.style[T]:p.reduce(((e,[t])=>e+t),0),p))E=Math.max(E,I),S+A>w?(b+=E,E=I,A=S):A+=S;b+=E,o[T]=A,o[C]=b}if(e instanceof Yv){var x=!1;if("ellipsis"===e.style.textOverflow&&Number(e.style.lineClamp)>=1){var P=iU(e);null!=!e.autoFitSize.height.size&&a.height||(x=!0,P>1&&e.style.textAlignMultiline&&(e.style.textAlign=e.style.textAlignMultiline),Object.assign(e.autoFitSize.height,{size:(e.style.lineHeight||e.style.fontSize||0)*P,padding:d.height}))}null!=e.autoFitSize.height.size&&(a.height||x)||Object.assign(e.autoFitSize.height,{size:e.style.lineHeight||e.style.fontSize||0,padding:d.height}),null!=e.autoFitSize.width.size&&a.width||Object.assign(e.autoFitSize.width,{size:zF.getTextWidth(e.value,e.style.fontSize||14)+3,padding:d.width})}for(var D of YF)a[D]||null===o[D]?d[D]>0&&(e.autoFitSize[D].padding=d[D]):Object.assign(e.autoFitSize[D],{size:null!=o[D]?o[D]:null,padding:d[D]})}},iU=e=>{for(var{width:t}=e.style,i=Number(e.style.lineClamp),r=Number(e.style.fontSize),n=e.value||"",a=zF.getTextWidth("...",r),o=[""],s=0,l=0;s<i&&l<n.length;){var u=s+1===i,c=u?t-a:t;zF.getTextWidth(o[s]+n[l],r)+r<=c?o[s]+=n[l]:u?(o[s]+="...",s+=1):(s+=1,o.push(n[l])),l+=1}return e._hasEllipsis||(e._hasEllipsis=!0,e.value=o.join("")),o.length},rU=e=>{var t=EU(e);for(var i of YF){var r=$F(e.style.flexDirection,i),{size:n}=e.autoFitSize[i],{padding:a}=e.autoFitSize[i];if(null!=n||a){n=n||0;var o=0,s=0;for(var l of t){var{size:u,margin:c,padding:d}=l.autoFitSize[i];"absolute"!==l.style.position&&(null!=u?o+=u+d+c:l.style.flex&&l.style.flex>0&&(s+=Number(l.style.flex)))}for(var h of t){var p,f=vU(_U(h)),g=null;r?g=h.style.flex?(n-o)/qF(s,1)*h.style.flex:null:e.style.alignItems&&"stretch"!==e.style.alignItems||(g=n),null==h.autoFitSize[i].size&&g?JF(h,g,i,f,!1,a):"absolute"===(null===(p=f.position)||void 0===p?void 0:p[1])&&JF(h,n,i,f,!1,a)}}}for(var _ of t)rU(_);for(var m of YF){var{size:v,padding:y}=e.autoFitSize[m];null!=v&&e.style[m]!==v+y&&(e.style[m]=v+y)}e instanceof Yv&&null==e.style.lineHeight&&(e.style.lineHeight=e.style.height)},nU=(e,t)=>{var i=e.autoFitSize.width.size,r=e.autoFitSize.height.size;for(var n of Object.keys(t)){var a=t[n];"percent"===a[0]?"horizontal"===sU[n]&&null!=i?e.style[n]=a[1]*i:"vertical"===sU[n]&&null!=r&&(e.style[n]=a[1]*r):"normal"===a[0]&&(e.style[n]=a[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=XF(t.transform[1][0],i||0,e.style.left||0),e.style.top=XF(t.transform[1][1],r||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},aU=e=>{var t=[["width","left"],["height","top"]];for(var i of EU(e))for(var[r,n]of(aU(i),t)){var a;if((i.style.position||null!==(a=i.expandAbsoluteSize)&&void 0!==a&&a.has(r))&&"hidden"!==e.style.overflow){var o=(i.style[r]||0)+(i.style[n]||0);o>(e.style[r]||0)&&(e.style[r]=o,e.expandAbsoluteSize||(e.expandAbsoluteSize=new Set),e.expandAbsoluteSize.add(r))}}},oU=e=>{tU(e),rU(e),aU(e),(e=>{for(var t=[["width","left"],["height","top"]],i=e;i&&i!==yU&&i.parent!==yU;){var r=i.parent;if(i.style.hidden)break;for(var[n,a]of t){var o;if((i.style.position||null!==(o=i.expandAbsoluteSize)&&void 0!==o&&o.has(n))&&"hidden"!==e.style.overflow){var s=(i.style[n]||0)+(i.style[a]||0);s>(r.style[n]||0)&&(r.style[n]=s,r.expandAbsoluteSize||(r.expandAbsoluteSize=new Set),r.expandAbsoluteSize.add(n))}}i=r}})(e)},sU={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},lU=/^\s*#[0-9a-fA-F]{3}\s*$/,uU=/^\s*#[0-9a-fA-F]{3,6}\s*$/,cU=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,dU=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,hU=/px$/,pU=e=>"number"==typeof e?e:hU.test(e)?Number(e.replace(hU,""))||0:BL(e)?parseInt(e,10):e,fU=e=>{if("string"==typeof e&&lU.test(e)){var[t,i,r]=e.slice(1);return`#${t}${t}${i}${i}${r}${r}`}return e},gU=(e={})=>{var t={};for(var i of Object.keys(e)){var r=e[i];if(["padding","margin"].includes(i)){var n=Array.isArray(r)?r:(null==r?"":r).toString().split(/\s+/),a=null,o=null,s=null,l=null;switch(n.length){case 0:continue;case 1:[a]=n,[o]=n,[s]=n,[l]=n;break;case 2:[a,o]=n,[s,l]=n;break;case 3:[a,o,s]=n,l=o;break;case 4:[a,l,s,o]=n;break;default:continue}Object.assign(t,{[`${i}Top`]:pU(a),[`${i}Left`]:pU(o),[`${i}Bottom`]:pU(s),[`${i}Right`]:pU(l)})}else if("border"===i){var u=(r||"").toString().split(/\s+/);switch(u.length){case 0:continue;case 1:t.borderColor=fU(u[0]);continue;case 2:t.borderWidth=pU(u[0]),t.borderColor=fU(u[1]);continue;case 3:t.borderWidth=pU(u[0]),t.borderColor=fU(u[2]);continue;default:continue}}else if("background"===i&&uU.test(e[i]))t.backgroundColor=fU(e[i]);else if("background"===i&&(cU.test(e[i])||dU.test(e[i])))t.backgroundColor=e[i];else if("background"===i&&e[i].includes("linear-gradient"))t.backgroundColor=e[i];else if("color"===i&&"string"==typeof r&&dU.test(r)){var[c,d,h,p]=dU.exec(r).slice(1,5).map((e=>Number(e))),f=e=>e.toString(16);t.color=`#${f(c)}${f(d)}${f(h)}`,null==e.opacity&&(t.opacity=Number(p))}else if("display"===i)t.hidden="none"===e[i];else if("rotate"===i){var g=e[i];t.rotate="string"==typeof g?Number(g.replace("deg",""))||0:g}else t[i]=fU(pU(e[i]))}return t},_U=e=>{if(e._isTemplate)return e._manualStyle;var t=e.referComponent;if(!t)return Object.assign({},e.style||{});var i={},r=t.style||{};for(var n of e.classList||[])Object.assign(i,gU(r[n])),Object.assign(i,gU(r[`.${n}`]));return r[e.name]&&Object.assign(i,gU(r[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(i,gU(t._manualStyle[e.name])),i},mU={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},vU=e=>{var t={};for(var i of Object.keys(e)){var r=e[i];if(null!=r){var n=r.toString().trim();if((sU[i]||["width","height"].includes(i))&&mU.percent.test(n)){var a=parseFloat(n.slice(0,-1))/100;t[i]=["percent",a]}else if(BL(n))t[i]=["digit",Number(n)];else if("transform"===i&&n.includes("translate")){var o=mU.translate.exec(n);o&&(t[i]=["transform",o.slice(1,3)])}else t[i]="string"==typeof r?["normal",n]:["normal",r]}}return t},yU=Xv,AU=e=>{var t,i;return!(e.parent!==yU&&(null!==(t=e.parent)&&void 0!==t&&t.referComponent||null!==(i=e.parent)&&void 0!==i&&i._isTemplate))},bU=e=>Object.keys(e.children).map((t=>e.children[t])),EU=e=>bU(e).filter((e=>!0!==(null==e?void 0:e.style.hidden))),wU=(e,t,i="downward")=>{for(var r of("downward"===i&&t(e),bU(e)))wU(r,t,i);"upward"===i&&t(e)},TU=(e,t)=>{for(var{path:i,value:r,condition:n=!0}of t)if(n){var a=r||(i?uB(e,i):"");if(a)return a}return null},CU=63,SU=e=>{var t=e.toString(16).toUpperCase();return t.length<2?`%0${t}`:`%${t}`},IU=e=>{if(!e)return"";var t=String(e),i=[],r=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/;for(var n of t)if(n.match(r)){var a=n.codePointAt?n.codePointAt(0):n.charCodeAt(0);a<128?i.push(SU(a)):a<2048?i.push([SU(192+(a>>6)),SU(128+(a&CU))].join("")):a<65536?i.push([SU(224+(a>>12)),SU(128+(a>>6&CU)),SU(128+(a&CU))].join("")):a<2097152&&i.push([SU(240+(a>>18)),SU(128+(a>>12&CU)),SU(128+(a>>6&CU)),SU(128+(a&CU))].join(""))}else i.push(n);return i.join("")},xU=e=>{if(!e)return"";for(var t=e=>{if(!e)throw new Error("invalid text")},i=e=>String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e),r=e.replace(/%[a-fA-F0-9]{2}/gi,(e=>String.fromCharCode(parseInt(e.replace("%",""),16)))),n=0,a="";n<r.length;){var o=r.charCodeAt(n);if(o<128)a+=i(o),n+=1;else if(o>=192&&o<224){t(n+1<r.length),a+=i((31&o)<<6|r.charCodeAt(n+1)&CU),n+=2}else if(o<240){t(n+2<r.length);var s=r.charCodeAt(n+1),l=r.charCodeAt(n+2);a+=i((15&o)<<12|(s&CU)<<6|l&CU),n+=3}else{t(n+3<r.length);var u=r.charCodeAt(n+1),c=r.charCodeAt(n+2),d=r.charCodeAt(n+3);a+=i([(7&o)<<18,(u&CU)<<12,(c&CU)<<6,d&CU].reduce(((e,t)=>e|t),0)),n+=4}}return a},PU=e=>{var t={};if(e.indexOf("?")>-1){var i=e.indexOf("?")+1,r=e.substring(i);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));var n=r.split("&");for(var a of n){var[o,s]=a.split("=");t[o]=xU(s)}}return t},DU=(e,t)=>{if(!e)return"";if(!t)return e;var i=e.split("#"),r=i[0].indexOf("?")>-1?"&":"?",n="",a=Object.keys(t);if(a.length>0){for(var o of a)n=n.concat(`${o}=${IU(t[o])}&`);return n.length>0&&(n=n.substring(0,n.length-1)),i[0]+r+n+(i[1]?`#${i[1]}`:"")}return e},RU=()=>{var e=ps();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":k.deviceOrientation&&/^landscape/.test(k.deviceOrientation)?"landscape":k.deviceOrientation||"portrait"},OU=e=>e===UB.LIVE,kU="",MU=M,NU="",LU="",BU="",FU="",UU="",WU="",GU=!0,VU="";k.onReady((()=>{kU=RU()||"";var e=hs();NU=e.system,LU=e.version,BU=e.SDKVersion,UU=e.model,WU=e.brand,GU=bi();try{VU=k.accountInfo.appId,FU=__libVersionInfo__.updateTime}catch(e){}}));var jU=(e,t)=>{var i=cF(e);if(i&&0!==i.length)return t=Object.assign({publisher_appid:VU,appid:VU,orig_weapp_id:"",network_type:"",wechat_version:LU,platform:MU,system_version:NU,device_orientation:kU,wxapp_lib_version:BU,wxapp_lib_time:FU,machine_type:UU,ad_platform:GU?1:0},t),t=Object.assign({DeviceModel:UU,DeviceBrand:WU,OsName:MU,OsVersion:NU},t),i=i.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()}))),ki({sdkApiName:"advert_report",apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:i})}}).catch((e=>{}))},HU=(e,t,i)=>{(({key:e,id:t})=>{"object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),Reporter.reportIDKeyDirectly({id:t||924,key:e,force:!0})})({key:e}),(({key:e,id:t,extInfo:i,reportData:r})=>{if("object"==typeof e&&(!t&&(t=e.idKeyGroup),e=e.idKey),0===e&&(e="0"),r=r||{},i&&"string"!=typeof i)try{i=JSON.stringify(i)}catch(e){i=i.toString()}jU(16295,{id_key:e,id_key_group:t||924,report_time:+new Date,ad_pos_type:r.ad_pos_type||0,source_url:r.source_url||"",expand_feild:r.reportAdData||"",expand_feild2:i,aid:r.aid||0,traceid:r.traceid||"",ad_unit_id:r.ad_unit_id})})({key:e,extInfo:t,reportData:i})},zU=e=>jU(19213,e),YU=(e,t=!1)=>{var i=t?"<?xml version='1.0' encoding='utf-8' ?>":"";return i+=`<${e.name}>`,e.children.length>0?i+=(e=>e.children&&e.children.length>0?e.children.map((e=>YU(e))).join(""):"")(e):i+=`<![CDATA[${e.content.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}]]>`,i+=`</${e.name}>`},$U=e=>YU(e,!0),qU=new _e;ce("onPageReload",((e={},t=0)=>{e.webviewId=t,qU.emit("onPageReload",e)}));var QU={},ZU=0,KU=function(e,t,i){var r=i;r||(r=ZU++),((e,t)=>(QU[e]=QU[e]||{},!!QU[e][t]||(QU[e][t]=!0,!1)))(e,r)||qU.once(`onBeforeUnloadPage_${e}`,(e=>{"function"==typeof t&&t(e)}))},XU=["adinfos.txt","/adinfos.txt","/"],JU=0,eW=(e="")=>{if(e)return new Promise(((t,i)=>{tn.unlink({filePath:e,success:t,fail:e=>{e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||i(e)}})}))},tW=(e="")=>e?((e="")=>{if(e)return new Promise(((t,i)=>{tn.stat({path:e,recursive:!0,success:t,fail:i})}))})(e).then((e=>{var t=0,i=[],r=[],n=e.stats||[],a=+new Date;for(var o of n){t+=o.stats.size||0,XU.includes(o.path)||i.push(o.path),a-1e3*o.stats.lastAccessedTime>=6048e5&&!XU.includes(o.path)&&r.push(o.path)}return{totalSize:t,fileList:i,outedDateFileList:r}})):{totalSize:0,fileList:[],outedDateFileList:[]},iW=(e={},t="")=>t?xi()?Promise.resolve():L||B?new Promise(((i,r)=>{tn.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:i,fail:r})})):Promise.resolve():Promise.resolve(),rW=e=>e&&0!==e.length?((e="")=>{if(e)return new Promise(((t,i)=>{tn.readdir({dirPath:e,success:t,fail:i})}))})(KB).then((t=>{var i=t.files;e&&e.map((e=>{var{url:t,filePath:r,fileName:n}=e;return i.includes(n)?Promise.resolve():((e="",t="")=>{if(e&&t)return new Promise(((i,r)=>{Ka({url:e,filePath:t,success:i,fail:r})}))})(t,r)}))})):Promise.reject({errMsg:"无数据"}),nW=e=>{if(e&&"object"==typeof e&&!(JU>0)&&(JU+=1,!xi()&&(L||B)&&e&&e.widget_gray_unlimit_fetch_tag)){var t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{tn.stat({path:XB,success:e=>{var i;Date.now()-1e3*(null==e||null===(i=e.stats)||void 0===i?void 0:i.lastModifiedTime)>=t&&fL.emit("_onEmitSplashAdFetch")},fail:e=>{e.errMsg&&e.errMsg.indexOf("no such file")>-1&&iW({},XB)}})}catch(e){}}},aW="",oW=0,sW="index.html",lW=new vi,uW="_onWxAdUserCaptureScreen",cW={shareAppMessage:0,shareTimeline:3};k.onReady((()=>{aW=Ce()}));var dW={};try{Es((e=>{oW=e.webviewId,dW[oW]||(dW[oW]=!0,sW=e.path,KU(oW,(e=>{gW(e)})))}))}catch(e){}hd((()=>{var e=+new Date;aW&&zU({eventTimeStamp:e,scene:7,uxinfo:aW,url:sW}),lW.emit(uW,{eventTimeStamp:e,webviewId:oW,path:sW})}));var hW;hW=(e,t)=>{if(aW){var i="",r=cW[e]?cW[e]:0;"shareAppMessage"===e&&t.shareInfos&&(r=t.shareInfos.length>0?2:1,i=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===r&&"shareAppMessage"===e&&t.shareTickets&&(r=t.shareTickets.length>0?2:1),(e=>{jU(19214,e)})({eventTimeStamp:+new Date,shareType:r,tousername:i,uxinfo:aW,url:sW})}},Dv.push(hW);var pW,fW={},gW=e=>{if(fW[e]){for(var t in fW[e]){var i=fW[e][t];ki({sdkApiName:"advertReport",apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:i}}).catch((e=>{}))}delete fW[e]}},_W=Symbol("signExport"),mW=()=>(e,t)=>{e[_W]=e[_W]||new Set,e[_W].add(t)},vW=(e,t)=>{var i=Array.isArray(t)?t:[t];for(var r of i)if(!(r in e)||"function"!=typeof e[r])throw new Error(`${r} is not the function method of the class`);return i.map((t=>e[t]))},yW=(e,t=!1)=>(i,r,n)=>{var a=n.value,o=vW(i,e);n.value=t?function(){var e=zo()((function*(...e){var t=yield a.call(this,...e);for(var i of o)yield i.call(this,t);return t}));return function(){return e.apply(this,arguments)}}():function(...e){var t=a.call(this,...e);if(t instanceof Promise)return t.then((e=>{for(var t of o)t.call(this,e);return e}));for(var i of o)i.call(this,t);return t}},AW=(e,t=!1)=>(i,r,n)=>{var a=n.value,o=vW(i,e);n.value=t?function(){var e=zo()((function*(...e){try{return yield a.call(this,...e)}catch(e){for(var t of o)yield t.call(this,e);throw e}}));return function(){return e.apply(this,arguments)}}():function(...e){try{var t=a.call(this,...e);return t instanceof Promise&&t.catch((e=>{for(var t of o)t.call(this,e)})),t}catch(e){for(var i of o)i.call(this,e);throw e}}};!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(pW||(pW={}));var bW="REWARDED_DYNAMIC",EW=(e,t)=>!!t&&(e=>{var t={gauss:[RB.CRT_SIZE_REWARD_VEDIO169,RB.CRT_SIZE_REWARD_VEDIO916],native:[RB.CRT_SIZE_REWARD_VEDIO169,RB.CRT_SIZE_REWARD_VEDIO916,RB.CRT_SIZE_VERTICAL_VIDEO_NEW_916,RB.CRT_SIZE_AMS_VIDEO_169],landpage:[RB.CRT_SIZE_REWARD_LANDINGPAGE],sns:[RB.APP_VIDEO,RB.CRT_SIZE_VIDEO_TIME6,RB.CRT_SIZE_VERTICAL_VIDEO,RB.CRT_SIZE_VERTICAL_VIDEO_916,RB.CRT_SIZE_CARD_COMPT_VIDEO],portrait:[RB.APP_VIDEO,RB.CRT_SIZE_REWARD_VEDIO916,RB.CRT_SIZE_VERTICAL_VIDEO_NEW_916,RB.CRT_SIZE_VERTICAL_VIDEO,RB.CRT_SIZE_VERTICAL_VIDEO_916],landscape:[RB.CRT_SIZE_REWARD_VEDIO169,RB.CRT_SIZE_VIDEO_TIME6,RB.CRT_SIZE_CARD_COMPT_VIDEO,RB.CRT_SIZE_AMS_VIDEO_169]};switch(e){case"gauss":case"native":case"landpage":case"portrait":case"landscape":case"sns":return t[e];case"video":return[...t.native,...t.sns];case"all":default:return[...t.native,...t.landpage,...t.sns]}})(e).includes(Number(t)),wW={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:M,isWaGame:!0,isApp:!1,isIOS:B,isAndroid:L,isIPad:null,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},TW={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},CW=()=>FL(wW,["oaid","imei","idfa","common_device_id"]),SW=()=>{var e=as();return wW.screenWidth=e.screenWidth,wW.screenHeight=e.screenHeight,wW.deviceOrientation=wW.screenWidth>wW.screenHeight?"landscape":"portrait",wW.deviceOrientation},IW=()=>{},xW=()=>new Promise((e=>{IW=e})),PW=()=>new Promise((e=>{!function(e){gL?e&&e(gL):L&&k.clientVersion<654315827?it("getOAID",{success(t){/:ok/.test(t.errMsg)?(gL=t.result||"",e&&e(gL)):e&&e("")},fail(){e&&e("")}}):e&&e("")}((t=>{wW.oaid=t,e()}))})),DW=()=>new Promise((e=>{(function(e=""){return new Promise(((t,i)=>{L&&k.clientVersion>=654315827||B&&k.clientVersion>=385879808?it("getDeviceInfo",{waidPkg:e,success(e){gL=e.oaid||"",_L=e.imei||"",yL=e.waid||"",vL=e.ua||"",AL=e.devIdInfo||"{}";try{mL=JSON.stringify(K()(K()({},JSON.parse(AL)),vL?{ua:vL}:{}))}catch(e){i(e)}t({oaid:gL,imei:_L,commonid:mL,waid:yL})},fail(e){i(e)}}):t({oaid:gL,imei:_L,commonid:mL,waid:yL})}))})().then((({imei:t,oaid:i,commonid:r})=>{B?wW.idfa=t:L&&(wW.oaid=i,wW.imei=t),wW.common_device_id=r||"{}",e(),xW().then((()=>{HU(vB.GET_DEVICEINFO_SUCCESS)}))})).catch((t=>{e(),xW().then((()=>{HU(vB.GET_DEVICEINFO_ERROR,t)}))}))})),RW=new Promise((e=>{k.onReady((()=>{var t;wW.startTime=new Date,wW.deviceOrientation=RU()||"",wW.envVersion=k.envVersion;var i=hs(),r=ps();wW.screenWidth=r.screenWidth||0,wW.screenHeight=r.screenHeight||0,wW.systemVersion=i.system,wW.wechatVersion=i.version,wW.SDKVersion=i.SDKVersion,wW.brand=i.brand,wW.model=i.model,wW.isIPad=null===(t=i.model)||void 0===t?void 0:t.includes("iPad"),wW.isWaGame=bi(),wW.isApp=0===k.appType;try{wW.gameAppId=k.accountInfo.appId,wW.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([PW(),DW()]).then((()=>e(wW)))}))}));try{Es((({webviewId:e,openType:t,path:i})=>{wW.isWaGame||(TW.lastWebviewId=TW.currentWebviewId,TW.currentWebviewId=e||0,TW.currentOpenType=t,TW.weappPath=i)}))}catch(e){}T_((({scene:e})=>{TW.enterForegroundTime=new Date,TW.currentScene=e})),Xm((()=>{TW.gameDuration+=Date.now()-TW.enterForegroundTime.getTime()}));var OW,kW,MW,NW,LW,BW,FW,UW,WW,GW,VW,jW,HW,zW,YW,$W,qW,QW,ZW,KW,XW,JW,eG,tG,iG,rG,nG,aG,oG,sG,lG,uG,cG,dG,hG,pG,fG,gG,_G,mG,vG,yG,AG,bG,EG,wG,TG,CG,SG,IG,xG,PG,DG,RG,OG,kG,MG,NG,LG,BG,FG,UG=e=>{var t=/(\d+)(?:\.(\d+))?(?:\.(\d+))?(?:\.(\d+))?/.exec(e);return t?t.slice(1).filter((e=>null!=e)).join("."):null},WG=function(e){var t,i,r=GG(e),n="portrait"===wW.deviceOrientation,a=EW("portrait",e.crt_size);if(wW.isAndroid){var o,s,l=UG((null===(o=e.condition)||void 0===o?void 0:o.widget_gray_reward_use_gauss_blur_android_system_version)||""),u=UG((null===(s=e.condition)||void 0===s?void 0:s.widget_gray_reward_use_gauss_blur_android_wechat_version)||""),c=UG(wW.systemVersion),d=UG(wW.wechatVersion);if(l&&c&&jt(c,l)<0)return!1;if(u&&d&&jt(d,u)<0)return!1}return Boolean((null==e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==e||null===(i=e.gaussVideo)||void 0===i?void 0:i.src)&&n!==a&&EW("gauss",e.crt_size)&&(r||n))},GG=function(e){var{flooringPage:t}=e,i="portrait"===wW.deviceOrientation,r=EW("portrait",e.crt_size);return Boolean(i!==r&&EW("video",e.crt_size)&&!(EW("sns",e.crt_size)&&EW("landscape",e.crt_size))&&!wW.isIPad&&![2,3,4].includes((null==t?void 0:t.landpage_type)||0))},VG=(OW=mW(),kW=mW(),MW=mW(),NW=mW(),LW=mW(),BW=mW(),FW=mW(),UW=mW(),WW=mW(),GW=mW(),VW=mW(),jW=mW(),HW=mW(),zW=mW(),YW=mW(),$W=mW(),qW=mW(),QW=mW(),ZW=mW(),KW=mW(),XW=mW(),JW=mW(),eG=mW(),tG=mW(),iG=mW(),rG=mW(),nG=mW(),aG=mW(),oG=mW(),sG=class{constructor(e){this.adProxy=e,this.timePoints={},this.analyseBranchInfo=null}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get convertedAdData(){return this.adProxy.convertedAdData}get datas(){return this.adProxy.datas}get adUnitId(){return this.adProxy.getAdUnitId()}get pluginAppid(){return this.adProxy.getPluginAppid()}get lastClickTime(){return this.adProxy.getLastClickTime()}getTimePoint(e){return this.timePoints[e]?this.timePoints[e]:0}setTimePoint(e,t={}){if("splashAd"!==this.adType){["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});var{time:i}=t;this.timePoints[e]=i||Date.now()}else this.timePoints[e]=Date.now()}reportTimePoints({slotid:e,costtype:t,splash_instance_id:i="",scene:r=0,errCode:n=0,extInfo:a={}}){var o;if(["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType)){this.reportMMData(19837,K()({slotid:e,costtype:t,ext_info:JSON.stringify(Object.assign({},a,{adUnitId:this.adUnitId,is_game:!0})),instance_id:i,scene:r,crt_size:(null===(o=this.data)||void 0===o?void 0:o.crt_size)||0,error_code:n},this.timePoints))}}reportCloseAction(e){return this.reportMMData(16743,e)}reportAdEntranceExposure(e){return this.reportMMData(18988,e)}reportTouchClick(e){return this.reportMMData(16487,e)}reportCancelRewardPlayablePage(e){return this.reportMMData(20299,e)}formatMMData(e,t){var i,r=cF(e);if(!r||0===r.length)return null;var n=this.data||{aid:0,traceid:"",crt_size:0};if("grid"===this.adType&&-1!==[16139].indexOf(e))try{n=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:n.aid,traceid:n.traceid,crt_size:n.crt_size,slotid:zB[this.adType],report_time:Date.now(),ad_pos_type:null!==(i=YB[this.adType])&&void 0!==i?i:0,publisher_appid:this.pluginAppid?this.pluginAppid:wW.gameAppId,appid:this.pluginAppid?this.pluginAppid:wW.gameAppId,orig_weapp_id:this.pluginAppid?wW.gameAppId:"",network_type:wW.adNetworkType,wechat_version:wW.wechatVersion,platform:wW.platform,system_version:wW.systemVersion,device_orientation:wW.deviceOrientation,wxapp_lib_version:wW.SDKVersion,wxapp_lib_time:wW.SDKVersionTime,machine_type:wW.model,machine_brand:wW.brand,screen_width:wW.screenWidth,screen_height:wW.screenHeight,ad_platform:wW.isWaGame?1:0,ad_unit_id:this.adUnitId}),r.map((e=>({type:e.type,value:(t[e.key]||e.value).toString()})))}reportMMData(e,t){var i=this.formatMMData(e,t);return kL({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:i})}})}reportAbnormalDetect(e){var t={adunit_id:this.adUnitId,appid:wW.gameAppId};if(Object.assign(e,t),"object"==typeof e)return this.reportMMData(16139,e)}reportAdIDKey({key:e,id:t}){var i,r=t,n=e;"object"==typeof n&&(!r&&(r=n.idKeyGroup),n=n.idKey),r||(r=null!==(i=JB[this.adType])&&void 0!==i?i:924),0===n&&(n="0"),Reporter.reportIDKeyDirectly({id:r,key:n})}processStackMsg(e){var t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),i=e.toString();return t.indexOf(i)<0&&(t=`${i}@${t}`),t}reportAdIDKeyErrorData({key:e,id:t,extInfo:i=""}){var r,n,a=e,o=t,s=i;"object"==typeof a&&(!o&&(o=a.idKeyGroup),a=a.idKey),0===a&&(a="0");var l="",u="";try{var c,d;if(this.data){var h={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if(EW("native",this.data.crt_size)){var p=this.convertedAdData;p&&(h.is_gauss_blur=WG(p),h.is_expand_style=GG(p),u=h.is_gauss_blur?p.gaussVideo.src:p.shortVideo.src)}else this.adProxy.isBannerAd()&&(u=this.data.image_url);l=JSON.stringify(h)}if("cpsShopAd"===this.adType&&null!==(c=this.data)&&void 0!==c&&null!==(d=c.extBackComm)&&void 0!==d&&d.cpsProduct&&(l=JSON.stringify({trace_id:this.data.extBackComm.cpsProduct.trace_id,product_id:this.data.extBackComm.cpsProduct.product_id})),s&&"string"!=typeof s)try{s instanceof Error&&(s=this.processStackMsg(s)),s=JSON.stringify(s)}catch(e){s=s.toString()}}catch(e){var f;s=this.processStackMsg(e),u="",l=null===(f=this.data)||void 0===f?void 0:f.crt_size}return this.reportMMData(16295,{id_key:a,id_key_group:null!==(r=null!==(n=o)&&void 0!==n?n:JB[this.adType])&&void 0!==r?r:924,report_time:+new Date,source_url:u,expand_feild:l,expand_feild2:s,scene:this.adProxy.scene||0})}reportAdMonitorData(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}reportEndPage({slotid:e,costtype:t,isGame:i=0,posType:r,ace_type:n,exposure_duration:a=0}){return this.reportMMData(19002,{slotid:e,costtype:t,is_game:i,pos_type:r,ace_type:n,exposure_duration:a})}reportAdFeedbackData(e){var t,i,r={};if("grid"===this.adType){var n,a={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(n=this.datas)||void 0===n||n.forEach((e=>{e.extBackComm&&a.viewid.push(e.extBackComm.viewid),a.s_pt.push(e.pt),a.s_aid.push(e.aid),a.s_trace_id.push(e.traceid)})),r.grid_feedback_info=a}return this.reportMMData(17045,{appid:wW.gameAppId,weapp_path:TW.weappPath,ad_unit_id:this.adUnitId,device_type:wW.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:wW.screenHeight,screen_width:wW.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:zB[this.adType],service_type:wW.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(t=e.isClickAd)&&void 0!==t?t:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(i=e.clickAdTimeMs)&&void 0!==i?i:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(r)})}reportBehaviorButton({button:e,playDuration:t,preloadVideo:i,preloadVideoSuccess:r,videoFirstPlay:n,cardFirstShow:a,clickCard:o,pressInterval:s,currentPlayUrl:l,lastFetchUrl:u,isEnded:c,videoDuration:d}){return this.reportMMData(16e3,{click_button:e,play_duration:t,click_close_ts:+new Date,preload_video:i,preload_video_success:r,video_first_play_ts:n,card_first_show_ts:a,click_card_ts:o,press_interval:s,current_play_url:l,last_fetch_url:u,is_ended:c?1:0,video_duration:d})}reportVideoLoadTime({beginTime:e=0,endTime:t=0,departureTime:i=0,preloadVideo:r=0,preloadVideoSuccess:n=0,reportType:a=0}){var o=t-i-e;return o>0?this.reportMMData(15730,{load_begin_time:e,load_end_time:t,load_departure_time:i,load_cost_time:o,preload_video:r,preload_video_success:n,report_type:a}):Promise.resolve()}reportRepeatClick({slotId:e,costType:t,clkCnt:i,lastClkPeriod:r,retCode:n,costTime:a,pageStayTime:o,jsapiName:s}){return this.reportMMData(15979,{slotid:e,costtype:t,clkcnt:i,currenttime:+new Date,lastclkperiod:r,retcode:n,costtime:a,pagestaytime:o,jsapiname:s})}reportLandingTime({slotId:e,costType:t,openTime:i,closeTime:r,stayTime:n,jsapiName:a,clickTime:o,clkCnt:s,retCode:l,costTime:u,actTypeInt:c,actTypeStr:d}){return this.reportMMData(15980,{slotid:e,costtype:t,currenttime:o,opentime:i,closetime:r,staytime:n,jsapiname:a,clkcnt:s,retcode:l,costtime:u,act_type_int:c,act_type_str:d})}reportVideoLastClick({touchStartX:e,touchStartY:t,touchEndX:i,touchEndY:r,touchDuration:n,screenWidth:a,screenHeight:o}){return this.reportMMData(17035,{touch_start_x:e,touch_start_y:t,touch_end_x:i,touch_end_y:r,touch_duration:n,screenwidth:a,screenheight:o})}reportBannerLastClick({lastClickArr:e,top:t,left:i,width:r,height:n,expMs:a,clickMs:o,bannerClkScreenX:s,bannerClkScreenY:l,lastShowTime:u}){return this.reportMMData(18072,{last_clicks:e,banner_x:t,banner_y:i,banner_width:r,banner_height:n,exp_ms:a,clk_ms:o,banner_clk_screen_x:s,banner_clk_screen_y:l,last_show_time:u,slotid:zB[this.adType]})}reportRelationFetchDuration({startTime:e,showTime:t,endTime:i}){return this.reportMMData(19429,{start_time:e,show_time:t,end_time:i,show_delay_duration:0===t?0:i-t,fetch_duration:i-e})}reportMMClickPos({clickPos:e}){var t;return this.reportMMData(20480,{slotid:zB[this.adType],costtype:null!==(t=this.data)&&void 0!==t&&t.is_cpm?1:2,currenttime:Date.now(),click_pos:e})}reportADFunnelModel({adtype:e,stage:t}){var i=[e,t].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:i,force:!0,immediately:!0})}recordAnalyseBranchInfo({branchId:e,branchDim:t}){this.analyseBranchInfo={branchId:e,branchDim:t}}resetAnalyseBranchInfo(){this.analyseBranchInfo=null}reportAnalyseInfo(e){var t=$B[this.adType]||"viewable";if(wW.isWaGame&&e===t){var i=this.analyseBranchInfo;i&&("release"!==wW.envVersion&&this.adProxy.reportAnalyseDebugInfo(i),this.reportMMData(20317,{branch_id:i.branchId,branch_dim:i.branchDim}))}}reportRewardGaussVideo({useGaussVideo:e,useExpandStyle:t,videoUrl:i,gaussVideoUrl:r,expUseGaussVideo:n,expUseExpandStyle:a}){this.reportMMData(21644,{use_gauss_video:e?1:0,video_url:i,gauss_video_url:r,use_expand_style:t?1:0,exp_use_gauss_video:n,exp_use_expand_style:a})}reportPopupClickAction({buttonType:e,buttonTime:t,adClkTime:i,adExpTime:r,adClkX:n,adClkY:a,adWidth:o,adHeight:s,isGame:l,costtype:u}){this.reportMMData(23415,{adunitid:this.adUnitId,button_type:e,button_time:t,ad_clk_time:i,ad_exp_time:r,ad_clk_x:n,ad_clk_y:a,ad_width:o,ad_height:s,is_game:l,costtype:u})}},ao()(sG.prototype,"getTimePoint",[OW],Object.getOwnPropertyDescriptor(sG.prototype,"getTimePoint"),sG.prototype),ao()(sG.prototype,"setTimePoint",[kW],Object.getOwnPropertyDescriptor(sG.prototype,"setTimePoint"),sG.prototype),ao()(sG.prototype,"reportTimePoints",[MW],Object.getOwnPropertyDescriptor(sG.prototype,"reportTimePoints"),sG.prototype),ao()(sG.prototype,"reportCloseAction",[NW],Object.getOwnPropertyDescriptor(sG.prototype,"reportCloseAction"),sG.prototype),ao()(sG.prototype,"reportAdEntranceExposure",[LW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAdEntranceExposure"),sG.prototype),ao()(sG.prototype,"reportTouchClick",[BW],Object.getOwnPropertyDescriptor(sG.prototype,"reportTouchClick"),sG.prototype),ao()(sG.prototype,"reportCancelRewardPlayablePage",[FW],Object.getOwnPropertyDescriptor(sG.prototype,"reportCancelRewardPlayablePage"),sG.prototype),ao()(sG.prototype,"reportMMData",[UW],Object.getOwnPropertyDescriptor(sG.prototype,"reportMMData"),sG.prototype),ao()(sG.prototype,"reportAbnormalDetect",[WW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAbnormalDetect"),sG.prototype),ao()(sG.prototype,"reportAdIDKey",[GW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAdIDKey"),sG.prototype),ao()(sG.prototype,"processStackMsg",[VW],Object.getOwnPropertyDescriptor(sG.prototype,"processStackMsg"),sG.prototype),ao()(sG.prototype,"reportAdIDKeyErrorData",[jW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAdIDKeyErrorData"),sG.prototype),ao()(sG.prototype,"reportAdMonitorData",[HW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAdMonitorData"),sG.prototype),ao()(sG.prototype,"reportEndPage",[zW],Object.getOwnPropertyDescriptor(sG.prototype,"reportEndPage"),sG.prototype),ao()(sG.prototype,"reportAdFeedbackData",[YW],Object.getOwnPropertyDescriptor(sG.prototype,"reportAdFeedbackData"),sG.prototype),ao()(sG.prototype,"reportBehaviorButton",[$W],Object.getOwnPropertyDescriptor(sG.prototype,"reportBehaviorButton"),sG.prototype),ao()(sG.prototype,"reportVideoLoadTime",[qW],Object.getOwnPropertyDescriptor(sG.prototype,"reportVideoLoadTime"),sG.prototype),ao()(sG.prototype,"reportRepeatClick",[QW],Object.getOwnPropertyDescriptor(sG.prototype,"reportRepeatClick"),sG.prototype),ao()(sG.prototype,"reportLandingTime",[ZW],Object.getOwnPropertyDescriptor(sG.prototype,"reportLandingTime"),sG.prototype),ao()(sG.prototype,"reportVideoLastClick",[KW],Object.getOwnPropertyDescriptor(sG.prototype,"reportVideoLastClick"),sG.prototype),ao()(sG.prototype,"reportBannerLastClick",[XW],Object.getOwnPropertyDescriptor(sG.prototype,"reportBannerLastClick"),sG.prototype),ao()(sG.prototype,"reportRelationFetchDuration",[JW],Object.getOwnPropertyDescriptor(sG.prototype,"reportRelationFetchDuration"),sG.prototype),ao()(sG.prototype,"reportMMClickPos",[eG],Object.getOwnPropertyDescriptor(sG.prototype,"reportMMClickPos"),sG.prototype),ao()(sG.prototype,"reportADFunnelModel",[tG],Object.getOwnPropertyDescriptor(sG.prototype,"reportADFunnelModel"),sG.prototype),ao()(sG.prototype,"recordAnalyseBranchInfo",[iG],Object.getOwnPropertyDescriptor(sG.prototype,"recordAnalyseBranchInfo"),sG.prototype),ao()(sG.prototype,"resetAnalyseBranchInfo",[rG],Object.getOwnPropertyDescriptor(sG.prototype,"resetAnalyseBranchInfo"),sG.prototype),ao()(sG.prototype,"reportAnalyseInfo",[nG],Object.getOwnPropertyDescriptor(sG.prototype,"reportAnalyseInfo"),sG.prototype),ao()(sG.prototype,"reportRewardGaussVideo",[aG],Object.getOwnPropertyDescriptor(sG.prototype,"reportRewardGaussVideo"),sG.prototype),ao()(sG.prototype,"reportPopupClickAction",[oG],Object.getOwnPropertyDescriptor(sG.prototype,"reportPopupClickAction"),sG.prototype),sG),jG=1,HG=new Set,zG=(lG=mW(),uG=mW(),cG=mW(),dG=mW(),hG=mW(),pG=mW(),fG=mW(),gG=mW(),_G=mW(),mG=mW(),vG=mW(),yG=mW(),AG=mW(),bG=mW(),EG=mW(),wG=mW(),TG=mW(),CG=class{constructor(e){this.adProxy=e,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=void 0,this.index=jG,jG+=1,HG.add(this.adUnitId)}get adType(){return this.adProxy.getAdType()}get adUnitId(){return this.adProxy.getAdUnitId()}get slotData(){return this.adProxy.getSlotData()}get pluginAppid(){return this.adProxy.getPluginAppid()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}reset(){this.lastVideoReportTime=0}getLastClickTime(){return this.lastClickTime}getLastAdReqTs(){return this.lastAdReqTs}setLastExposureTime(e){this.lastExposureTime=e}setLastClickTime(e){this.lastClickTime=e}setLastAdReqTs(e){this.lastAdReqTs=e}reportFollow({result:e}){var t=5;return this.adProxy.isRewardedVideoAd()?t=6:[RB.CRT_SIZE_TABLE_SCREEN_IMAGE,RB.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(t=8),kL({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[e],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:t}}).catch((e=>{throw this.reportAdMonitorData(vB.FOLLOW_REPORT_ERROR,e),e}))}getExtraExpOrClkData(e){var t,i=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?i=e.multiList.map(((e,t)=>({idx:t,waid:this.datas[e].waid||""}))):this.data.waid&&(i=[{idx:0,waid:this.data.waid}]);var r=K()(K()({},CW()),{},{weapp_enter_scene:(null==k||null===(t=k.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(i)}),n=K()({},r),a=K()({},r);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var o,s={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(o=e.multiList)||void 0===o||o.forEach((e=>{var t=this.datas[e];t.extBackComm&&s.viewid.push(t.extBackComm.viewid),s.s_pt.push(t.pt),s.s_aid.push(t.aid),s.s_trace_id.push(t.traceid)})),n.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:s.viewid}),s_trace_id:JSON.stringify(s.s_trace_id),s_aid:JSON.stringify(s.s_aid),s_pt:JSON.stringify(s.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var l,u=this.adProxy.adDataIndex;a.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(l=this.data.extBackComm)||void 0===l?void 0:l.viewid,box_index:u}}if("customAd"===this.adType){var c,d=null===(c=this.data.extBackComm)||void 0===c?void 0:c.sub_templ_id;d&&(n.sub_templ_id=d,a.sub_templ_id=d)}if("incentive-video"===this.adType&&this.data.isPlayable&&(n.is_playable=1,a.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){var{currentTime:h,duration:p}=e.videoData;(h||p)&&(a.video_play_time=h,a.video_duration=p)}if("grid"===this.adType)if("exposure"===e.reportType){var f,g={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(f=this.datas)||void 0===f||f.forEach((e=>{e.extBackComm&&g.viewid.push(e.extBackComm.viewid),g.s_pt.push(e.pt),g.s_aid.push(e.aid),g.s_trace_id.push(e.traceid)})),n.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:g.viewid}),s_trace_id:JSON.stringify(g.s_trace_id),s_aid:JSON.stringify(g.s_aid),s_pt:JSON.stringify(g.s_pt)}}else if("click"===e.reportType){var _,m=e.clickAdIndex||0;a.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(_=this.data.extBackComm)||void 0===_?void 0:_.viewid,box_index:m}}return"exposure"===e.reportType&&e.extExposureComm&&(n=K()(K()({},n),e.extExposureComm)),"click"===e.reportType&&e.extClickComm&&(a=K()(K()({},a),e.extClickComm)),{extExposureComm:n,extClickComm:a}}reportExpOrClk(e){var t=3;if("exposure"===e.reportType?(t={showed:2,viewable:5,incentiveVideoCard:14}[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){var i=this.adProxy.adDataIndex;e.multiList.forEach((e=>{this.adProxy.setCurrentData(e),it("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})})})),this.adProxy.setCurrentData(i)}else it("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:t})});var{extExposureComm:r,extClickComm:n}=this.getExtraExpOrClkData(e),a=this.getExpOrClkCommonArgs(e),o="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(n)}:{exposure_type:rF[e.exposureType],ext_exposure_comm:JSON.stringify(r)};return kL({apiName:"advert_report",reqData:K()(K()(K()({},a),o),{},{report_type:iF[e.reportType],weapp_extra_data:JSON.stringify(a.weapp_extra_data),ad_group_id:a.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:a.weapp_gh_id})})}getExpOrClkCommonArgs(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:zB[this.adType],pos_type:tF[this.adType],sdk_version:wW.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:wW.startTime.valueOf(),wegame_enter_ts:TW.enterForegroundTime.valueOf(),wegame_user_duration:TW.gameDuration+(Date.now()-TW.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:K()(K()({},this.getWeappExtraData()),e.weappExtraData||{})}}reportClick(e){return this.lastClickTime=+new Date,this.reportExpOrClk(K()({reportType:"click"},e)).catch((e=>{throw this.reportAdMonitorData(vB.CLICK_REPORT_ERROR,e),e}))}reportExposure(e){return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(K()({reportType:"exposure"},e)).catch((e=>{throw this.reportAdMonitorData(vB.EXPOSURE_REPORT_ERROR,e),e}))}reportFlooringPage(e,t){var i={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:wW.gameAppId,orig_weapp_id:this.pluginAppid?wW.gameAppId:""},r=null==t?void 0:t.map((e=>K()(K()({},i),e))),n={};return 1===e?n.rewared_video_ending_page_a=r:2===e&&(n.rewared_video_ending_page_b=r),kL({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}reportAntifraud(e){var t=K()(K()({},e),{},{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:wW.gameAppId,orig_weapp_id:this.pluginAppid?wW.gameAppId:"",network_type:wW.adNetworkType,wechat_version:wW.wechatVersion,platform:wW.platform,system_version:wW.systemVersion,device_orientation:wW.deviceOrientation,wxapp_lib_version:wW.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:wW.brand||"",machine_type:wW.model||"",clientimptime:this.lastAdReqTs}),i={};return i.antifraud_table_screen_report=[t],kL({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(i)}})}reportVideo({playType:e,conditionType:t,muted:i,playDuration:r,videoDuration:n,rewardedTime:a,isRewarded:o}){var s="0",l=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(l)&&(s=/viewid=([^&]+)/.exec(l)[1]);var u=kL({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:s,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[e],play_duration:r-this.lastVideoReportTime,video_duration:n,auto_play:!0,muted:i,rewarded_time:a&&Math.min(a,n),is_rewarded:o},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[t]}});return this.lastVideoReportTime=r,u}getWxaReportDetail({top:e=0,left:t=0}){return{page_x:t||0,page_y:e||0,screen_x:t||0,screen_y:e||0,ad_number:jG-1,ad_unit_number:HG.size,ad_index:this.index,page_enter_time:TW.enterForegroundTime.valueOf(),phone_screen_width:wW.screenWidth,phone_screen_height:wW.screenHeight}}getWeappExtraData(){var e,t;return{weixin_version:wW.wechatVersion,os_version:wW.systemVersion,machine_brand:wW.brand||"",machine_type:wW.model,network_type:wW.adNetworkType,start_ts:wW.startTime.valueOf(),enter_ts:TW.enterForegroundTime.valueOf(),user_duration:TW.gameDuration+(Date.now()-TW.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=k.host)||void 0===e?void 0:e.env,app_appid:null===(t=k.host)||void 0===t?void 0:t.appId}}composeExposureCommonInfo({top:e=0,left:t=0,width:i=0,height:r=0,adType:n="incentive-video",inputWeappExtraData:a={}}){var o;try{o=this.data.weapp_info.original_id}catch(e){}var s=K()({},CW()),l=K()(K()({},this.getWeappExtraData()),a||{}),u=this.getWxaReportDetail({top:e,left:t}),c={report_type:0,pos_id:zB[this.adType],sdk_version:wW.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:o,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:i,ad_h:r,from_game:1,from_h5:0,wegame_start_ts:wW.startTime.valueOf(),wegame_enter_ts:TW.enterForegroundTime.valueOf(),wegame_user_duration:TW.gameDuration+(Date.now()-TW.enterForegroundTime.getTime()),pos_type:tF[n],wxa_report_detail:u,weapp_extra_data:JSON.stringify(l),ext_exposure_comm:JSON.stringify(s)};return JSON.stringify(c)}reportInstallFollow(e){var{condition:t}=this.data;t&&1===t.widget_gray_report_install_follow&&kL({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}reportAnalyseDebugInfo(e){var t=qB[this.adType];return t||this.reportAdMonitorData(vB.ANALYSE_DEBUG_REPORT_ERROR,new Error(`invalid reportType ${this.adType}`)),kL({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:t}]}}).catch((e=>{this.reportAdMonitorData(vB.ANALYSE_DEBUG_REPORT_ERROR,e)}))}reportIPV4(){setTimeout((()=>{try{var e,t=this.datas&&this.datas.length>0?this.datas[0]:this.data;null!=t&&null!==(e=t.extBackComm)&&void 0!==e&&e.ip_ping_url&&Na({url:Si(t.extBackComm.ip_ping_url)})}catch(e){}}),2e3)}},ao()(CG.prototype,"getLastClickTime",[lG],Object.getOwnPropertyDescriptor(CG.prototype,"getLastClickTime"),CG.prototype),ao()(CG.prototype,"getLastAdReqTs",[uG],Object.getOwnPropertyDescriptor(CG.prototype,"getLastAdReqTs"),CG.prototype),ao()(CG.prototype,"setLastExposureTime",[cG],Object.getOwnPropertyDescriptor(CG.prototype,"setLastExposureTime"),CG.prototype),ao()(CG.prototype,"setLastClickTime",[dG],Object.getOwnPropertyDescriptor(CG.prototype,"setLastClickTime"),CG.prototype),ao()(CG.prototype,"setLastAdReqTs",[hG],Object.getOwnPropertyDescriptor(CG.prototype,"setLastAdReqTs"),CG.prototype),ao()(CG.prototype,"reportFollow",[pG],Object.getOwnPropertyDescriptor(CG.prototype,"reportFollow"),CG.prototype),ao()(CG.prototype,"getExpOrClkCommonArgs",[fG],Object.getOwnPropertyDescriptor(CG.prototype,"getExpOrClkCommonArgs"),CG.prototype),ao()(CG.prototype,"reportClick",[gG],Object.getOwnPropertyDescriptor(CG.prototype,"reportClick"),CG.prototype),ao()(CG.prototype,"reportExposure",[_G],Object.getOwnPropertyDescriptor(CG.prototype,"reportExposure"),CG.prototype),ao()(CG.prototype,"reportFlooringPage",[mG],Object.getOwnPropertyDescriptor(CG.prototype,"reportFlooringPage"),CG.prototype),ao()(CG.prototype,"reportAntifraud",[vG],Object.getOwnPropertyDescriptor(CG.prototype,"reportAntifraud"),CG.prototype),ao()(CG.prototype,"reportVideo",[yG],Object.getOwnPropertyDescriptor(CG.prototype,"reportVideo"),CG.prototype),ao()(CG.prototype,"getWxaReportDetail",[AG],Object.getOwnPropertyDescriptor(CG.prototype,"getWxaReportDetail"),CG.prototype),ao()(CG.prototype,"composeExposureCommonInfo",[bG],Object.getOwnPropertyDescriptor(CG.prototype,"composeExposureCommonInfo"),CG.prototype),ao()(CG.prototype,"reportInstallFollow",[EG],Object.getOwnPropertyDescriptor(CG.prototype,"reportInstallFollow"),CG.prototype),ao()(CG.prototype,"reportAnalyseDebugInfo",[wG],Object.getOwnPropertyDescriptor(CG.prototype,"reportAnalyseDebugInfo"),CG.prototype),ao()(CG.prototype,"reportIPV4",[TG],Object.getOwnPropertyDescriptor(CG.prototype,"reportIPV4"),CG.prototype),CG);function YG(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}var $G=(SG=mW(),IG=mW(),xG=mW(),PG=mW(),DG=mW(),RG=mW(),OG=mW(),kG=mW(),MG=mW(),NG=mW(),LG=mW(),BG=mW(),FG=class{constructor(e){this.adProxy=e,this.isAppInstalled=!1}get adType(){return this.adProxy.getAdType()}get data(){return this.adProxy.data}get datas(){return this.adProxy.datas}get reportAdMonitorData(){return this.adProxy.reportAdMonitorData}get isValidCondition(){return this.adProxy.isValidCondition}getFullRl(){var{rl:e}=this.data;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+=`?viewid=${this.data.extBackComm.viewid}`:e+=`&viewid=${this.data.extBackComm.viewid}`)}catch(e){}return e}getFollowPageUrl(e,t){var i={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:wW.isWaGame?147:140};return DU(t,i)}getSkAdItem(){var e,t=null,i=this.data;if(null!=i&&null!==(e=i.extBackComm)&&void 0!==e&&e.sk_ad_items)try{t=JSON.parse(i.extBackComm.sk_ad_items)[0]}catch(e){}return t}isPrefetch(e){var t,i,r,n,a,o,s,l,u={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(t=this.data.crtInfo)||void 0===t||null===(i=t[0])||void 0===i||null===(r=i.wxgame_video_card)||void 0===r||null===(n=r.flooring_page)||void 0===n?void 0:n.page_url}[e],c={url:this.data.dest_type===xB.DEST_TYPE_OUTER,jump_url:(null===(a=this.data.button_action)||void 0===a?void 0:a.jump_type)===xB.DEST_TYPE_OUTER,playable_url:!0}[e];return u&&c&&Boolean(null===(o=this.data)||void 0===o||null===(s=o.extBackComm)||void 0===s||null===(l=s.material_handler_info)||void 0===l?void 0:l.h5_preload_info[e])}getTransmissionChainData({logtype:e=3}){var t={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:e};return Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")}setAppInstallState(e){this.isAppInstalled=e}land({isButton:e=!1,isAddContact:t=!1}={}){var i=this;return zo()((function*(){var{dest_type:r,product_type:n,url:a,extInfo:o}=i.data,s={isButton:e};try{var l;null!=o&&null!==(l=o.app_gift_pack_code)&&void 0!==l&&l.code&&(yield i.adProxy.setClipboardData({data:o.app_gift_pack_code.code}),Hl({duration:1500,title:"礼包码复制成功",icon:"success",mask:!1}),i.adProxy.reportAdMonitorData(vB.COPY_GIFT_CODE_SUCCESS))}catch(e){i.adProxy.reportAdMonitorData(vB.COPY_GIFT_CODE_FAIL)}if(!e){if(i.isPrefetch("url")&&i.adProxy.reportAdMonitorData(vB.H5_PRELOAD_CARD_CLICKED),[12,19].indexOf(n)>-1){var u,c,{app_info:{url_scheme:d}}=i.data;if(wW.isIOS)u=JSON.stringify({aid:i.data.aid,ad_uid:null===(c=i.data.extBackComm)||void 0===c?void 0:c.uid,scene_id:4001});var h=i.getSkAdItem();if(d&&d.trim().length>0){if(wW.isAndroid&&!i.isAppInstalled){try{return yield i.openMachineMarket()}catch(e){}return i.landPage(r,a,s)}return i.adProxy.launchApplication({schemeUrl:d,isIosDirect:wW.isIOS,appInfo:i.data.app_info,extraData:u,skAdItem:h}).catch((e=>(null!==h&&i.reportAdMonitorData(vB.OPEN_WEBSTORE_ERROR,e),i.landPage(r,a,s))))}try{return yield i.openMachineMarket()}catch(e){}return i.landPage(r,a,s)}if(n===OB.WE_CHAT_SHOP){try{return yield i.openShopScheme()}catch(e){}return i.landPage(r,a,s)}return i.landPage(r,a,s)}i.isPrefetch("jump_url")&&i.adProxy.reportAdMonitorData(vB.H5_PRELOAD_BUTTON_CLICKED);var{button_action:{jump_type:p,jump_url:f}}=i.data;if(n===OB.IOS)return i.openAppStore(p,f,s);if(n!==OB.WE_CHAT||!t){if(n===OB.WE_CHAT_SHOP){try{return yield i.openShopScheme()}catch(e){}return i.landPage(p,f,s)}try{return yield i.openMachineMarket()}catch(e){}return i.landPage(p,f,s)}var{biz_info:{user_name:g,is_subscribed:_}}=i.data;if(_)return 10===p?i.landPage(p,a,s):PL({url:i.getFollowPageUrl(i.data,f),adInfo:i.getTransmissionChainData({logtype:3})});try{var m,v=yield i.adProxy.addContact({username:g,isWaGame:wW.isWaGame}),{ext_info:y,uxinfo:A}=i.data;try{m=JSON.parse(y)}catch(e){}if(/ok|added/.test(v.errMsg)&&m&&m.guide_group_id&&A)try{yield(({guide_group_id:e,uxinfo:t})=>kL({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:e,uxinfo:t})}}).then((e=>"ok"===e.msg?Promise.resolve(e):Promise.reject(e))))({guide_group_id:m.guide_group_id,uxinfo:A}),i.adProxy.reportAdIDKey({key:vB.BIND_GUIDE_SUCCESS})}catch(e){i.reportAdMonitorData(vB.BIND_GUIDE_ERROR,e)}return v}catch(e){if(/cancel/.test(e.errMsg))return e;throw i.reportAdMonitorData(vB.ADD_CONTACT_ERROR,e),e}}))()}landPage(e,t,i){if(e===xB.DEST_TYPE_APPDETAIL&&wW.isIOS){var r,{app_info:{appinfo_url:n}}=this.data,a=JSON.stringify({aid:this.data.aid,ad_uid:null===(r=this.data.extBackComm)||void 0===r?void 0:r.uid,scene_id:4001}),o=this.getSkAdItem();return this.adProxy.launchApplication({schemeUrl:n,extraData:a,skAdItem:o}).catch((e=>(null!==o&&this.reportAdMonitorData(vB.OPEN_WEBSTORE_ERROR,e),PL({url:n,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_URL_ERROR,e),e})))))}if(e===xB.DEST_TYPE_BIZ)return PL({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_URL_ERROR,e),e}));if(e===xB.DEST_TYPE_WECHAT_APPLET){var{weapp_info:{appid:s},traceid:l,aid:u,uxinfo:c}=this.data;return RL({appId:s,path:t,traceid:l,aid:u,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:c}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_WXAPP_ERROR,e),e}))}if(e===xB.DEST_TYPE_CANVAS){var{canvas_info:d,pos_type:h}=this.data;return DL({canvasInfo:d,posType:h}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_CANVAS_ERROR,e),e}))}if(10===e){var{biz_info:{user_name:p}}=this.data;return this.adProxy.openProfile({username:p}).catch((e=>{throw e}))}return e===xB.DEST_TYPE_CHANNELS?this.jumpChannels("activity",i):e===xB.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live",i):e===xB.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile",i):PL({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_URL_ERROR,e),e}))}getChannelsExtraInfo(e){return JSON.stringify({sns_ad:{uxinfo:this.data.uxinfo||"",snsid:"",scene:e}}).replace(/,/g,";")}jumpChannels(e,{isButton:t}){var i=this;return zo()((function*(){var r,n=null===(r=i.data)||void 0===r?void 0:r.extBackComm.channels_info,{crt_size:a,apurl:o,rl:s}=i.data,l={feedId:n.id,nonceId:n.nonce_id,finderUserName:n.username,reportExtraInfo:i.getChannelsExtraInfo(t?VB.ACTIONBUTTON:VB.RESOURCE)},u={activity:vB.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:vB.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:vB.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],c={activity:vB.OPEN_CHANNELS_ACTIVITY_FAILED,live:vB.OPEN_CHANNELS_LIVE_FAILED,userProfile:vB.OPEN_CHANNELS_USER_PROFILE_FAILED}[e];if(n){if("activity"===e&&a===RB.CRT_SIZE_REWARD_LANDINGPAGE)try{var d=yield i.adProxy.openChannelsRewardedVideoAd(K()(K()({},l),{},{expReportLink:o,clkReportLink:s,reportInfo:i.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:wW.screenWidth,height:wW.screenHeight}),clickPosMap:{follow:NB.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:NB.MMOCAD_CLICKPOS_BIZ_LIKE,comment:NB.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:NB.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:NB.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:NB.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:i.getFeedbackUrl(wW.isWaGame?1003:1005)}));return i.reportAdMonitorData(u),d}catch(d){i.reportAdMonitorData(c,d)}try{switch(e){case"activity":yield i.adProxy.openChannelsRewardedVideoAd(K()(K()({},l),{},{adJSAPIType:1}));break;case"live":yield i.adProxy.openChannelsLive(l);break;case"userProfile":yield i.adProxy.openChannelsUserProfile(l)}return void i.reportAdMonitorData(u)}catch(e){i.reportAdMonitorData(c,e)}}i.reportAdMonitorData(c,new Error("channelsInfo is empty"))}))()}openAppStore(e,t,i){var r,{app_info:{appinfo_url:n,url_scheme:a},extBackComm:o}=this.data,s=JSON.stringify({aid:this.data.aid,ad_uid:null===(r=this.data.extBackComm)||void 0===r?void 0:r.uid,scene_id:4001}),l=this.getSkAdItem();return a&&a.trim().length>0?this.adProxy.launchApplication({schemeUrl:a,isIosDirect:!0,appInfo:this.data.app_info,extraData:s,skAdItem:l}).catch((()=>this.adProxy.launchApplication({schemeUrl:n,extraData:s,skAdItem:l}).catch((e=>(null!==l&&this.reportAdMonitorData(vB.OPEN_WEBSTORE_ERROR,e),PL({url:n,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_URL_ERROR,e),e}))))))):o.is_from_snsadinfo?this.landPage(e,t,i):this.adProxy.launchApplication({schemeUrl:n,extraData:s,skAdItem:l}).catch((()=>PL({url:n,adInfo:this.getTransmissionChainData({logtype:3})}).catch((e=>{throw this.reportAdMonitorData(vB.OPEN_URL_ERROR,e),e}))))}preloadLanding(){try{if(6===this.data.dest_type){var e=[],t=[];"grid"===this.adType?this.datas.forEach((i=>{var r;null!==(r=i.weapp_info)&&void 0!==r&&r.appid&&(e.push(i.weapp_info.appid),t.push(YG(i)))})):(e=[this.data.weapp_info.appid],t.push(YG(this.data))),it("batchGetContact",{appIds:e});var i="app";this.data.product_type===OB.MINI_GAME&&(i="game"),(wW.isAndroid||"app"===i)&&it("preloadMiniProgramEnv",{type:i,success:e=>{this.reportAdMonitorData(vB.PRELOAD_MINIENV_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(vB.PRELOAD_MINIENV_ERROR,e)}}),it("predownloadMiniProgramPackage",{username:`${this.data.weapp_info.original_id}@app`,path:this.data.url,scene:1,success:e=>{this.reportAdMonitorData(vB.PREDOWNLOAD_SUCCESS,e)},fail:e=>{this.reportAdMonitorData(vB.PREDOWNLOAD_ERROR,e)}})}}catch(e){}}checkFollow(e){return zo()((function*(){var{data:t}=yield kL({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});return 1===t.is_subscribed}))()}getFeedbackUrl(e){var t=this.data.material_id_list||[],i=encodeURIComponent(`[${t.toString()}]`)||"",r=DU("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:i||"",machine_type:wW.model,publisher_appid:wW.gameAppId});if("grid"===this.adType){var n=[],a=[],o=[];this.datas.forEach((e=>{n.push(e.traceid),a.push(e.material_id_list||[]),o.push(e.aid)}));var s={traceid:JSON.stringify(n),source:e,aid:JSON.stringify(o),material_id:JSON.stringify(a),machine_type:wW.model,publisher_appid:wW.gameAppId};r=DU("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",s)}return r}openFeedbackUrl(e){var t=this.getFeedbackUrl(e);return PL({url:t})}checkPreloadH5Page(){var e=this;return zo()((function*(){var t,i,r,n,a,o=new Set,{url:s}=e.data,l=null===(t=e.data.button_action)||void 0===t?void 0:t.jump_url,u=null===(i=e.data.crtInfo)||void 0===i||null===(r=i[0])||void 0===r||null===(n=r.wxgame_video_card)||void 0===n||null===(a=n.flooring_page)||void 0===a?void 0:a.page_url;e.isPrefetch("url")&&("1"!==PU(s).prefetch&&(s=DU(s,{prefetch:1}),e.data.url=s),o.add(s)),e.isPrefetch("jump_url")&&("1"!==PU(l).prefetch&&(l=DU(l,{prefetch:1}),e.data.button_action.jump_url=l),o.add(l)),e.isPrefetch("playable_url")&&("1"!==PU(u).prefetch&&(u=DU(u,{prefetch:1}),e.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=u),o.add(u));var c=[...o].map((e=>({url:e,bizScene:20002})));if(c.length)try{yield e.adProxy.preloadH5Page({urlList:c}),e.reportAdMonitorData(vB.H5_PRELOAD_SUCCESS)}catch(t){e.reportAdMonitorData(vB.H5_PRELOAD_FAILED,t)}}))()}openShopScheme(){var e=this;return zo()((function*(){var{app_info:{url_scheme:t},product_type:i}=e.data;if(!t||i!==OB.WE_CHAT_SHOP||!wW.isIOS&&!wW.isAndroid)throw"openShopScheme: fail no need";try{var r={schemeUrl:t};wW.isIOS&&(r.messageExt=t);var n=yield e.adProxy.launchApplicationOrigin(r);return e.reportAdMonitorData(vB.OPEN_SHOP_SCHEME_SUCCESS),n}catch(t){throw e.reportAdMonitorData(vB.OPEN_SHOP_SCHEME_ERROR,t),t}}))()}shouldOpenMachineMarket(){var{product_type:e,extBackComm:t}=this.data;return!this.adProxy.isSplashAd()&&wW.isAndroid&&e===OB.ANDROID&&!this.isAppInstalled&&(null==t?void 0:t.market_scheme)}openMachineMarket(){var e=this;return zo()((function*(){var{extBackComm:t}=e.data;if(!e.shouldOpenMachineMarket())throw"openMachineMarket: fail no need";try{var i=yield e.adProxy.launchApplicationOrigin({schemeUrl:t.market_scheme});return e.reportAdMonitorData(vB.OPEN_MACHINE_MKT_SUCCESS),i}catch(t){throw e.reportAdMonitorData(vB.OPEN_MACHINE_MKT_ERROR,t),t}}))()}},ao()(FG.prototype,"isPrefetch",[SG],Object.getOwnPropertyDescriptor(FG.prototype,"isPrefetch"),FG.prototype),ao()(FG.prototype,"getTransmissionChainData",[IG],Object.getOwnPropertyDescriptor(FG.prototype,"getTransmissionChainData"),FG.prototype),ao()(FG.prototype,"setAppInstallState",[xG],Object.getOwnPropertyDescriptor(FG.prototype,"setAppInstallState"),FG.prototype),ao()(FG.prototype,"land",[PG],Object.getOwnPropertyDescriptor(FG.prototype,"land"),FG.prototype),ao()(FG.prototype,"landPage",[DG],Object.getOwnPropertyDescriptor(FG.prototype,"landPage"),FG.prototype),ao()(FG.prototype,"getChannelsExtraInfo",[RG],Object.getOwnPropertyDescriptor(FG.prototype,"getChannelsExtraInfo"),FG.prototype),ao()(FG.prototype,"openAppStore",[OG],Object.getOwnPropertyDescriptor(FG.prototype,"openAppStore"),FG.prototype),ao()(FG.prototype,"preloadLanding",[kG],Object.getOwnPropertyDescriptor(FG.prototype,"preloadLanding"),FG.prototype),ao()(FG.prototype,"checkFollow",[MG],Object.getOwnPropertyDescriptor(FG.prototype,"checkFollow"),FG.prototype),ao()(FG.prototype,"getFeedbackUrl",[NG],Object.getOwnPropertyDescriptor(FG.prototype,"getFeedbackUrl"),FG.prototype),ao()(FG.prototype,"openFeedbackUrl",[LG],Object.getOwnPropertyDescriptor(FG.prototype,"openFeedbackUrl"),FG.prototype),ao()(FG.prototype,"checkPreloadH5Page",[BG],Object.getOwnPropertyDescriptor(FG.prototype,"checkPreloadH5Page"),FG.prototype),FG),qG=BabelRuntimeHelpers.initializerDefineProperty,QG=i.n(qG),ZG=(BabelRuntimeHelpers.initializerWarningHelper,Li("getChannelsLiveInfo","webapi_getfinderviewlastlive",(({feedId:e,finderUserName:t,jsapi:i})=>({jsapi:i,export_id:e,finder_username:t})),(e=>{e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info})));function KG(e){ZG(Object.assign({},e,{jsapi:"getChannelsLiveInfo"}))}var XG,JG,eV,tV,iV,rV,nV,aV,oV,sV,lV,uV,cV,dV,hV,pV,fV,gV,_V,mV,vV,yV,AV,bV,EV,wV,TV,CV,SV,IV,xV,PV,DV,RV,OV,kV,MV,NV,LV,BV,FV,UV,WV,GV,VV,jV,HV,zV,YV,$V,qV,QV,ZV,KV,XV,JV=Li("getChannelsLiveState","webapi_getfinderviewlivestate",(({feedId:e,finderUserName:t,finderNickName:i})=>({finder_username:t,finder_nickname:i,export_id:e})),(e=>{e.liveInfoList=(e.live_info_list||[]).map((e=>({feedId:e.export_id,coverUrl:e.cover_url,thumbUrl:e.thumb_url,description:e.description,nickname:e.nickname,headUrl:e.head_url,status:e.status,nonceId:e.nonce_id}))),delete e.live_info_list})),ej=Li("getChannelsLiveReservation","webapi_getfinderviewlivereservation",(({noticeId:e})=>({notice_id:e}))),tj=Li("getChannelsLiveNoticeInfo","webapi_getfinerviewnoticeinfo",(({noticeId:e,finderUserName:t})=>({finder_username:t,notice_id:e})),(e=>{var t,i=null===(t=e.record_list)||void 0===t?void 0:t[0];i&&(e.noticeId=i.notice_id,e.status=i.status,e.startTime=i.start_time,e.headUrl=i.head_url,e.nickname=i.nickname,e.reservable=i.can_reserve),delete e.record_list}));function ij(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function rj(e,t,i,r="",n=0,a="",o="",s=0){var l=[e||"",ij(),t,i,r,n,k.appType+1e3,a,o,s].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:l})}var{makeApiSign:nj}=__safeway__.apiSign,aj=e=>t=>new Promise(((i,r)=>{e(Object.assign({},t,{success:i,fail:r}))})),oj=(e,t,i)=>{var r;e.errMsg=e.errMsg||`${t}:ok`;var n,a=0===e.errMsg.indexOf(`${t}:ok`),o=0===e.errMsg.indexOf(`${t}:fail`);if(a)null==i||null===(n=i.success)||void 0===n||n.call(i,e);else if(o){var s;null==i||null===(s=i.fail)||void 0===s||s.call(i,e)}null==i||null===(r=i.complete)||void 0===r||r.call(i,e)},sj=({username:e,success:t,fail:i,complete:r})=>{it("profile",{username:e,scene:75,success:t,fail:i,complete:r})},lj=({username:e,isWaGame:t,success:i,fail:r,complete:n})=>{it("private_addContact",{username:e,scene:t?146:139,webtype:1,success:i,fail:r,complete:n})},uj=({schemeUrl:e,isIosDirect:t,appInfo:i,extraData:r,skAdItem:n,success:a,fail:o,complete:s})=>{var l={};t&&(l.appId=i.app_id,l.installSchemeUrl=i.appinfo_url,null!==n?(l.installAction=1,l.skAdItem=n):l.installAction=0),r&&(l.extraData=r),it("launchApplication",Object.assign(l,{schemeUrl:e,operateDirectly:1,success:a,fail:o,complete:s}))},cj=({schemeUrl:e,messageExt:t,success:i,fail:r,complete:n})=>{var a={};t&&(a.messageExt=t),it("launchApplication",Object.assign(a,{schemeUrl:e,operateDirectly:1,success:i,fail:r,complete:n}))},dj=({appUrl:e,extraData:t,skAdItem:i,success:r,fail:n,complete:a})=>{var o=nj("downloadAppInternal",{appUrl:e,extraData:t,skAdItem:i,operateDirectly:1,success:r,fail:n,complete:a});it("downloadAppInternal",o)},hj=({packageName:e,success:t,fail:i,complete:r})=>{var n=nj("getInstallState",{packageName:e,permissionBytes:[1,1,1],success:t,fail:i,complete:r});it("getInstallState",n)},pj=({downloadId:e,success:t,fail:i,complete:r})=>{it("queryDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:i,complete:r})},fj=({downloadId:e,success:t,fail:i,complete:r})=>{it("pauseDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:i,complete:r})},gj=({downloadId:e,success:t,fail:i,complete:r})=>{it("resumeDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:i,complete:r})},_j=({downloadId:e,success:t,fail:i,complete:r})=>{var n=nj("installDownloadTask",{downloadId:e,permissionBytes:[1,1,1],success:t,fail:i,complete:r});it("installDownloadTask",n)},mj=({isHide:e,success:t,fail:i,complete:r})=>{it("setNavigationBarRightButton",{hide:e,success:t,fail:i,complete:r})},vj=({isHide:e,success:t,fail:i,complete:r})=>{it("private_setNavigationBarRightButton",{hide:e,success:t,fail:i,complete:r})},yj=({resources:e,success:t,fail:i,complete:r})=>{it("loadVideoResource",{resources:e,success:t,fail:i,complete:r})},Aj=({orientation:e,success:t,fail:i,complete:r})=>{it("private_setPageOrientation",{orientation:e,success:t,fail:i,complete:r})},bj=({success:e,fail:t,complete:i}={})=>{it("hideVirtualBottomNavigationBar",{success:e,fail:t,complete:i})},Ej=({success:e,fail:t,complete:i}={})=>{it("showVirtualBottomNavigationBar",{success:e,fail:t,complete:i})},wj=({success:e,fail:t,complete:i}={})=>{it("showStatusBar",{success:e,fail:t,complete:i})},Tj=({success:e,fail:t,complete:i}={})=>{it("hideStatusBar",{success:e,fail:t,complete:i})},Cj=({success:e,fail:t,complete:i,feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o})=>{Se("openChannelsActivity",{feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o,permissionBytes:[1,1,1]},(r=>{oj(r,"openChannelsActivity",{success:e,fail:t,complete:i})}))},Sj=({success:e,fail:t,complete:i,feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o})=>{Se("openChannelsLive",{feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o,permissionBytes:[1,1,1]},(r=>{oj(r,"openChannelsLive",{success:e,fail:t,complete:i})}))},Ij=({success:e,fail:t,complete:i,finderUserName:r,reportExtraInfo:n})=>{Se("openChannelsUserProfile",{finderUserName:r,reportExtraInfo:n,permissionBytes:[1,1,1]},(r=>{oj(r,"openChannelsUserProfile",{success:e,fail:t,complete:i})}))},xj=({success:e,fail:t,complete:i,feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o,adJSAPIType:s,expReportLink:l,clkReportLink:u,reportInfo:c,clickPosMap:d,feedbackUrl:h})=>{it("openChannelsRewardedVideoAd",{feedId:r,nonceId:n,finderUserName:a,reportExtraInfo:o,adJSAPIType:s,expReportLink:l,clkReportLink:u,reportInfo:c,clickPosMap:d,feedbackUrl:h,success:e,fail:t,complete:i})},Pj=({mixWithOther:e=!0,obeyMuteSwitch:t=!0,success:i,fail:r,complete:n})=>{it("setInnerAudioOption",{mixWithOther:e,obeyMuteSwitch:t,success:i,fail:r,complete:n})},Dj=({urlList:e,success:t,fail:i,complete:r})=>{it("private_onWebPageUrlExposed",{urlList:e,success:t,fail:i,complete:r})},Rj=({data:e,success:t,fail:i,complete:r})=>{var n=nj("setClipboardData",{data:e,success:t,fail:i,complete:r});it("setClipboardData",n)},Oj=aj((({taskName:e,taskUrl:t,fileMd5:i,extInfo:r,success:n,fail:a,complete:o})=>{var s=nj("addDownloadTaskStraight",{taskName:e,taskUrl:t,fileMd5:i,extInfo:r,permissionBytes:[1,1,1],success:n,fail:a,complete:o});it("addDownloadTaskStraight",s)})),kj=(XG=mW(),JG=mW(),eV=mW(),tV=mW(),iV=mW(),rV=mW(),nV=mW(),aV=mW(),oV=mW(),sV=mW(),lV=mW(),uV=mW(),cV=mW(),dV=mW(),hV=mW(),pV=mW(),fV=mW(),gV=mW(),_V=mW(),mV=mW(),vV=mW(),yV=mW(),AV=mW(),bV=mW(),EV=mW(),wV=mW(),TV=mW(),CV=class{constructor(){QG()(this,"setNavigationBarRightButton",SV,this),QG()(this,"setMiniProgramNavigationBarRightButton",IV,this),QG()(this,"hideVirtualBottomNavigationBar",xV,this),QG()(this,"showVirtualBottomNavigationBar",PV,this),QG()(this,"showStatusBar",DV,this),QG()(this,"hideStatusBar",RV,this),QG()(this,"openProfile",OV,this),QG()(this,"addContact",kV,this),QG()(this,"downloadAppInternal",MV,this),QG()(this,"openChannelsActivity",NV,this),QG()(this,"openChannelsRewardedVideoAd",LV,this),QG()(this,"openChannelsLive",BV,this),QG()(this,"openChannelsUserProfile",FV,this),QG()(this,"setClipboardData",UV,this),QG()(this,"getChannelsLiveInfo",WV,this),QG()(this,"getNetworkType",GV,this),QG()(this,"preloadH5Page",VV,this),this.innerPreloadVideo=aj(yj),QG()(this,"preloadVideo",jV,this),QG()(this,"launchApplicationOrigin",HV,this),this.innerLaunchApplication=aj(uj),QG()(this,"launchApplication",zV,this),this.innerGetInstallState=aj(hj),QG()(this,"getInstallState",YV,this),this.innerQueryDownloadTask=aj(pj),QG()(this,"queryDownloadTask",$V,this),this.innerPauseDownloadTask=aj(fj),QG()(this,"pauseDownloadTask",qV,this),this.innerResumeDownloadTask=aj(gj),QG()(this,"resumeDownloadTask",QV,this),this.innerInstallDownloadTask=aj(_j),QG()(this,"installDownloadTask",ZV,this),this.innerSetPageOrientation=aj(Aj),QG()(this,"setPageOrientation",KV,this),this.innerSetInnerAudioOption=aj(Pj),QG()(this,"setInnerAudioOption",XV,this)}},SV=ao()(CV.prototype,"setNavigationBarRightButton",[XG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(mj)}}),IV=ao()(CV.prototype,"setMiniProgramNavigationBarRightButton",[JG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(vj)}}),xV=ao()(CV.prototype,"hideVirtualBottomNavigationBar",[eV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(bj)}}),PV=ao()(CV.prototype,"showVirtualBottomNavigationBar",[tV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Ej)}}),DV=ao()(CV.prototype,"showStatusBar",[iV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(wj)}}),RV=ao()(CV.prototype,"hideStatusBar",[rV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Tj)}}),OV=ao()(CV.prototype,"openProfile",[nV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(sj)}}),kV=ao()(CV.prototype,"addContact",[aV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(lj)}}),MV=ao()(CV.prototype,"downloadAppInternal",[oV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(dj)}}),NV=ao()(CV.prototype,"openChannelsActivity",[sV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Cj)}}),LV=ao()(CV.prototype,"openChannelsRewardedVideoAd",[lV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(xj)}}),BV=ao()(CV.prototype,"openChannelsLive",[uV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Sj)}}),FV=ao()(CV.prototype,"openChannelsUserProfile",[cV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Ij)}}),UV=ao()(CV.prototype,"setClipboardData",[dV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Rj)}}),WV=ao()(CV.prototype,"getChannelsLiveInfo",[hV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(KG)}}),GV=ao()(CV.prototype,"getNetworkType",[pV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Vi)}}),VV=ao()(CV.prototype,"preloadH5Page",[fV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(Dj)}}),jV=ao()(CV.prototype,"preloadVideo",[gV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPreloadVideo({resources:e})}}),HV=ao()(CV.prototype,"launchApplicationOrigin",[_V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return aj(cj)}}),zV=ao()(CV.prototype,"launchApplication",[mV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t="string"==typeof e?{schemeUrl:e}:e;return!B||null!=t&&t.isIosDirect||null===(null==t?void 0:t.skAdItem)?this.innerLaunchApplication(t):this.downloadAppInternal({appUrl:t.schemeUrl,extraData:null==t?void 0:t.extraData,skAdItem:null==t?void 0:t.skAdItem})}}}),YV=ao()(CV.prototype,"getInstallState",[vV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerGetInstallState({packageName:e})}}),$V=ao()(CV.prototype,"queryDownloadTask",[yV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerQueryDownloadTask({downloadId:e})}}),qV=ao()(CV.prototype,"pauseDownloadTask",[AV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerPauseDownloadTask({downloadId:e})}}),QV=ao()(CV.prototype,"resumeDownloadTask",[bV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerResumeDownloadTask({downloadId:e})}}),ZV=ao()(CV.prototype,"installDownloadTask",[EV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerInstallDownloadTask({downloadId:e})}}),KV=ao()(CV.prototype,"setPageOrientation",[wV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.innerSetPageOrientation({orientation:e})}}),XV=ao()(CV.prototype,"setInnerAudioOption",[TV],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>this.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:t})}}),CV),Mj=327,Nj=249,Lj=184,Bj=140,Fj=388,Uj=308,Wj=(e,t)=>!!t&&(e=>{var t={native:[RB.CRT_SIZE_TABLE_SCREEN_IMAGE,RB.CRT_SIZE_INSERT_VIDEO],sns:[RB.APP_VIDEO,RB.CRT_SIZE_PIC_MOMENT,RB.CRT_SIZE_VIDEO_TIME6,RB.CRT_SIZE_CARD_COMPT_IMAGE,RB.CRT_SIZE_CARD_COMPT_VIDEO],image:[RB.CRT_SIZE_TABLE_SCREEN_IMAGE,RB.CRT_SIZE_PIC_MOMENT,RB.CRT_SIZE_CARD_COMPT_IMAGE,RB.CRT_SIZE_AMS_PIC_169],video:[RB.CRT_SIZE_INSERT_VIDEO,RB.APP_VIDEO,RB.CRT_SIZE_VIDEO_TIME6,RB.CRT_SIZE_CARD_COMPT_VIDEO,RB.CRT_SIZE_AMS_VIDEO_169]};switch(e){case"native":case"sns":case"video":case"image":return t[e];case"all":default:return[...t.image,...t.video]}})(e).includes(Number(t)),Gj=Object.create,Vj=Object.defineProperty,jj=Object.getPrototypeOf,Hj=Object.prototype.hasOwnProperty,zj=Object.getOwnPropertyNames,Yj=Object.getOwnPropertyDescriptor,$j=Object.getOwnPropertySymbols,qj=Object.prototype.propertyIsEnumerable,Qj=(e,t,i)=>t in e?Vj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Zj=(e,t)=>{for(var i in t||(t={}))Hj.call(t,i)&&Qj(e,i,t[i]);if($j)for(var i of $j(t))qj.call(t,i)&&Qj(e,i,t[i]);return e},Kj=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Xj=e=>((e,t,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of zj(t))!Hj.call(e,r)&&"default"!==r&&Vj(e,r,{get:()=>t[r],enumerable:!(i=Yj(t,r))||i.enumerable});return e})((e=>Vj(e,"__esModule",{value:!0}))(Vj(null!=e?Gj(jj(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Jj=(e,t,i,r)=>{for(var n,a=r>1?void 0:r?Yj(t,i):t,o=e.length-1;o>=0;o--)(n=e[o])&&(a=(r?n(t,i,a):n(a))||a);return r&&a&&Vj(t,i,a),a},eH=(e,t,i)=>new Promise(((r,n)=>{var a=e=>{try{s(i.next(e))}catch(e){n(e)}},o=e=>{try{s(i.throw(e))}catch(e){n(e)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(a,o);s((i=i.apply(e,t)).next())})),tH=Kj(((e,t)=>{var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}t.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var o,s,l=a(e),u=1;u<arguments.length;u++){for(var c in o=Object(arguments[u]))r.call(o,c)&&(l[c]=o[c]);if(i){s=i(o);for(var d=0;d<s.length;d++)n.call(o,s[d])&&(l[s[d]]=o[s[d]])}}return l}})),iH=Kj((e=>{var t=tH(),i=60103,r=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var n=60109,a=60110,o=60112;e.Suspense=60113;var s=60115,l=60116;"function"==typeof Symbol&&Symbol.for&&(u=Symbol.for,i=u("react.element"),r=u("react.portal"),e.Fragment=u("react.fragment"),e.StrictMode=u("react.strict_mode"),e.Profiler=u("react.profiler"),n=u("react.provider"),a=u("react.context"),o=u("react.forward_ref"),e.Suspense=u("react.suspense"),s=u("react.memo"),l=u("react.lazy"));var u,c="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p={};function f(e,t,i){this.props=e,this.context=t,this.refs=p,this.updater=i||h}function g(){}function _(e,t,i){this.props=e,this.context=t,this.refs=p,this.updater=i||h}f.prototype.isReactComponent={},f.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},f.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=f.prototype;var m=_.prototype=new g;m.constructor=_,t(m,f.prototype),m.isPureReactComponent=!0;var v={current:null},y=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function b(e,t,r){var n,a={},o=null,s=null;if(null!=t)for(n in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)y.call(t,n)&&!A.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:i,type:e,key:o,ref:s,props:a,_owner:v.current}}function E(e){return"object"==typeof e&&null!==e&&e.$$typeof===i}var w=/\/+/g;function T(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,n,a,o){var s=typeof e;("undefined"===s||"boolean"===s)&&(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case i:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+T(l,0):a,Array.isArray(o)?(n="",null!=e&&(n=e.replace(w,"$&/")+"/"),C(o,t,n,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(w,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",Array.isArray(e))for(var u=0;u<e.length;u++){var h=a+T(s=e[u],u);l+=C(s,t,n,h,o)}else if("function"==typeof(h=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=c&&e[c]||e["@@iterator"])?e:null}(e)))for(e=h.call(e),u=0;!(s=e.next()).done;)l+=C(s=s.value,t,n,h=a+T(s,u++),o);else if("object"===s)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return l}function S(e,t,i){if(null==e)return e;var r=[],n=0;return C(e,r,"","",(function(e){return t.call(i,e,n++)})),r}function I(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var x={current:null};function P(){var e=x.current;if(null===e)throw Error(d(321));return e}var D={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:v,IsSomeRendererActing:{current:!1},assign:t};e.Children={map:S,forEach:function(e,t,i){S(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return S(e,(function(){t++})),t},toArray:function(e){return S(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error(d(143));return e}},e.Component=f,e.PureComponent=_,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,e.cloneElement=function(e,r,n){if(null==e)throw Error(d(267,e));var a=t({},e.props),o=e.key,s=e.ref,l=e._owner;if(null!=r){if(void 0!==r.ref&&(s=r.ref,l=v.current),void 0!==r.key&&(o=""+r.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in r)y.call(r,c)&&!A.hasOwnProperty(c)&&(a[c]=void 0===r[c]&&void 0!==u?u[c]:r[c])}var c=arguments.length-2;if(1===c)a.children=n;else if(1<c){u=Array(c);for(var h=0;h<c;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:i,type:e.type,key:o,ref:s,props:a,_owner:l}},e.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:a,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:n,_context:e},e.Consumer=e},e.createElement=b,e.createFactory=function(e){var t=b.bind(null,e);return t.type=e,t},e.createRef=function(){return{current:null}},e.forwardRef=function(e){return{$$typeof:o,render:e}},e.isValidElement=E,e.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:I}},e.memo=function(e,t){return{$$typeof:s,type:e,compare:void 0===t?null:t}},e.useCallback=function(e,t){return P().useCallback(e,t)},e.useContext=function(e,t){return P().useContext(e,t)},e.useDebugValue=function(){},e.useEffect=function(e,t){return P().useEffect(e,t)},e.useImperativeHandle=function(e,t,i){return P().useImperativeHandle(e,t,i)},e.useLayoutEffect=function(e,t){return P().useLayoutEffect(e,t)},e.useMemo=function(e,t){return P().useMemo(e,t)},e.useReducer=function(e,t,i){return P().useReducer(e,t,i)},e.useRef=function(e){return P().useRef(e)},e.useState=function(e){return P().useState(e)},e.version="17.0.2"})),rH=Kj(((e,t)=>{t.exports=iH()})),nH=Kj((e=>{var t,i,r,n,a,o,s,l,u,c,d,h,p,f,g,_,m,v,y,A;function b(e,t){var i=e.length;e.push(t);e:for(;;){var r=i-1>>>1,n=e[r];if(!(void 0!==n&&0<T(n,t)))break e;e[r]=t,e[i]=n,i=r}}function E(e){return void 0===(e=e[0])?null:e}function w(e){var t=e[0];if(void 0!==t){var i=e.pop();if(i!==t){e[0]=i;e:for(var r=0,n=e.length;r<n;){var a=2*(r+1)-1,o=e[a],s=a+1,l=e[s];if(void 0!==o&&0>T(o,i))void 0!==l&&0>T(l,o)?(e[r]=l,e[s]=i,r=s):(e[r]=o,e[a]=i,r=a);else{if(!(void 0!==l&&0>T(l,i)))break e;e[r]=l,e[s]=i,r=s}}}return t}return null}function T(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}"object"==typeof performance&&"function"==typeof performance.now?(a=performance,e.unstable_now=function(){return a.now()}):(o=Date,s=o.now(),e.unstable_now=function(){return o.now()-s}),"undefined"==typeof window||"function"!=typeof MessageChannel?(l=null,u=null,c=function(){if(null!==l)try{var t=e.unstable_now();l(!0,t),l=null}catch(e){throw setTimeout(c,0),e}},t=function(e){null!==l?setTimeout(t,0,e):(l=e,setTimeout(c,0))},i=function(e,t){u=setTimeout(e,t)},r=function(){clearTimeout(u)},e.unstable_shouldYield=function(){return!1},n=e.unstable_forceFrameRate=function(){}):(d=window.setTimeout,h=window.clearTimeout,"undefined"!=typeof console&&(p=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),f=!1,g=null,_=-1,m=5,v=0,e.unstable_shouldYield=function(){return e.unstable_now()>=v},n=function(){},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):m=0<e?Math.floor(1e3/e):5},y=new MessageChannel,A=y.port2,y.port1.onmessage=function(){if(null!==g){var t=e.unstable_now();v=t+m;try{g(!0,t)?A.postMessage(null):(f=!1,g=null)}catch(e){throw A.postMessage(null),e}}else f=!1},t=function(e){g=e,f||(f=!0,A.postMessage(null))},i=function(t,i){_=d((function(){t(e.unstable_now())}),i)},r=function(){h(_),_=-1});var C=[],S=[],I=1,x=null,P=3,D=!1,R=!1,O=!1;function k(e){for(var t=E(S);null!==t;){if(null===t.callback)w(S);else{if(!(t.startTime<=e))break;w(S),t.sortIndex=t.expirationTime,b(C,t)}t=E(S)}}function M(e){if(O=!1,k(e),!R)if(null!==E(C))R=!0,t(N);else{var r=E(S);null!==r&&i(M,r.startTime-e)}}function N(t,n){R=!1,O&&(O=!1,r()),D=!0;var a=P;try{for(k(n),x=E(C);null!==x&&(!(x.expirationTime>n)||t&&!e.unstable_shouldYield());){var o=x.callback;if("function"==typeof o){x.callback=null,P=x.priorityLevel;var s=o(x.expirationTime<=n);n=e.unstable_now(),"function"==typeof s?x.callback=s:x===E(C)&&w(C),k(n)}else w(C);x=E(C)}if(null!==x)var l=!0;else{var u=E(S);null!==u&&i(M,u.startTime-n),l=!1}return l}finally{x=null,P=a,D=!1}}var L=n;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){R||D||(R=!0,t(N))},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return E(C)},e.unstable_next=function(e){switch(P){case 1:case 2:case 3:var t=3;break;default:t=P}var i=P;P=t;try{return e()}finally{P=i}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=L,e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=P;P=e;try{return t()}finally{P=i}},e.unstable_scheduleCallback=function(n,a,o){var s=e.unstable_now();switch("object"==typeof o&&null!==o?o="number"==typeof(o=o.delay)&&0<o?s+o:s:o=s,n){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return n={id:I++,callback:a,priorityLevel:n,startTime:o,expirationTime:l=o+l,sortIndex:-1},o>s?(n.sortIndex=o,b(S,n),null===E(C)&&n===E(S)&&(O?r():O=!0,i(M,o-s))):(n.sortIndex=l,b(C,n),R||D||(R=!0,t(N))),n},e.unstable_wrapCallback=function(e){var t=P;return function(){var i=P;P=t;try{return e.apply(this,arguments)}finally{P=i}}}})),aH=Kj(((e,t)=>{t.exports=nH()})),oH=Kj(((e,t)=>{t.exports=function(e){var i={},r=tH(),n=rH(),a=aH();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=60103,u=60106,c=60107,d=60108,h=60114,p=60109,f=60110,g=60112,_=60113,m=60120,v=60115,y=60116,A=60121,b=60129,E=60130,w=60131;if("function"==typeof Symbol&&Symbol.for){var T=Symbol.for;l=T("react.element"),u=T("react.portal"),c=T("react.fragment"),d=T("react.strict_mode"),h=T("react.profiler"),p=T("react.provider"),f=T("react.context"),g=T("react.forward_ref"),_=T("react.suspense"),m=T("react.suspense_list"),v=T("react.memo"),y=T("react.lazy"),A=T("react.block"),T("react.scope"),b=T("react.debug_trace_mode"),E=T("react.offscreen"),w=T("react.legacy_hidden")}var C="function"==typeof Symbol&&Symbol.iterator;function S(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=C&&e[C]||e["@@iterator"])?e:null}function I(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case d:return"StrictMode";case _:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case p:return(e._context.displayName||"Context")+".Provider";case g:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return I(e.type);case A:return I(e._render);case y:t=e._payload,e=e._init;try{return I(e(t))}catch(e){}}return null}function x(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function P(e){if(x(e)!==e)throw Error(o(188))}function D(e){var t=e.alternate;if(!t){if(null===(t=x(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(r=n.return)){i=r;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===i)return P(n),e;if(a===r)return P(n),t;a=a.sibling}throw Error(o(188))}if(i.return!==r.return)i=n,r=a;else{for(var s=!1,l=n.child;l;){if(l===i){s=!0,i=n,r=a;break}if(l===r){s=!0,r=n,i=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===i){s=!0,i=a,r=n;break}if(l===r){s=!0,r=a,i=n;break}l=l.sibling}if(!s)throw Error(o(189))}}if(i.alternate!==r)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}function R(e){if(!(e=D(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function O(e,t){for(var i=e.alternate;null!==t;){if(t===e||t===i)return!0;t=t.return}return!1}var k,M=e.getPublicInstance,N=e.getRootHostContext,L=e.getChildHostContext,B=e.prepareForCommit,F=e.resetAfterCommit,U=e.createInstance,W=e.appendInitialChild,G=e.finalizeInitialChildren,V=e.prepareUpdate,j=e.shouldSetTextContent,H=e.createTextInstance,z=e.scheduleTimeout,Y=e.cancelTimeout,$=e.noTimeout,q=e.isPrimaryRenderer,Q=e.supportsMutation,Z=e.supportsPersistence,K=e.supportsHydration,X=e.getInstanceFromNode,J=e.makeOpaqueHydratingObject,ee=e.makeClientId,te=e.beforeActiveInstanceBlur,ie=e.afterActiveInstanceBlur,re=e.preparePortalMount,ne=e.supportsTestSelectors,ae=e.findFiberRoot,oe=e.getBoundingRect,se=e.getTextContent,le=e.isHiddenSubtree,ue=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,de=e.setupIntersectionObserver,he=e.appendChild,pe=e.appendChildToContainer,fe=e.commitTextUpdate,ge=e.commitMount,_e=e.commitUpdate,me=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,Ae=e.removeChildFromContainer,be=e.resetTextContent,Ee=e.hideInstance,we=e.hideTextInstance,Te=e.unhideInstance,Ce=e.unhideTextInstance,Se=e.clearContainer,Ie=e.cloneInstance,xe=e.createContainerChildSet,Pe=e.appendChildToContainerChildSet,De=e.finalizeContainerChildren,Re=e.replaceContainerChildren,Oe=e.cloneHiddenInstance,ke=e.cloneHiddenTextInstance,Me=e.canHydrateInstance,Ne=e.canHydrateTextInstance,Le=e.isSuspenseInstancePending,Be=e.isSuspenseInstanceFallback,Fe=e.getNextHydratableSibling,Ue=e.getFirstHydratableChild,We=e.hydrateInstance,Ge=e.hydrateTextInstance,Ve=e.getNextHydratableInstanceAfterSuspenseInstance,je=e.commitHydratedContainer,He=e.commitHydratedSuspenseInstance;function ze(e){if(void 0===k)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||""}return"\n"+k+e}var Ye=!1;function $e(e,t){if(!e||Ye)return"";Ye=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var n=e.stack.split("\n"),a=r.stack.split("\n"),o=n.length-1,s=a.length-1;1<=o&&0<=s&&n[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(n[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||n[o]!==a[s])return"\n"+n[o].replace(" at new "," at ")}while(1<=o&&0<=s);break}}}finally{Ye=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?ze(e):""}var qe=[],Qe=-1;function Ze(e){return{current:e}}function Ke(e){0>Qe||(e.current=qe[Qe],qe[Qe]=null,Qe--)}function Xe(e,t){Qe++,qe[Qe]=e.current,e.current=t}var Je={},et=Ze(Je),tt=Ze(!1),it=Je;function rt(e,t){var i=e.type.contextTypes;if(!i)return Je;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in i)a[n]=t[n];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function nt(e){return null!=(e=e.childContextTypes)}function at(){Ke(tt),Ke(et)}function ot(e,t,i){if(et.current!==Je)throw Error(o(168));Xe(et,t),Xe(tt,i)}function st(e,t,i){var n=e.stateNode;if(e=t.childContextTypes,"function"!=typeof n.getChildContext)return i;for(var a in n=n.getChildContext())if(!(a in e))throw Error(o(108,I(t)||"Unknown",a));return r({},i,n)}function lt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Je,it=et.current,Xe(et,e),Xe(tt,tt.current),!0}function ut(e,t,i){var r=e.stateNode;if(!r)throw Error(o(169));i?(e=st(e,t,it),r.__reactInternalMemoizedMergedChildContext=e,Ke(tt),Ke(et),Xe(et,e)):Ke(tt),Xe(tt,i)}var ct=null,dt=null;(0,a.unstable_now)();var ht=0,pt=8;function ft(e){if(0!=(1&e))return pt=15,1;if(0!=(2&e))return pt=14,2;if(0!=(4&e))return pt=13,4;var t=24&e;return 0!==t?(pt=12,t):0!=(32&e)?(pt=11,32):0!==(t=192&e)?(pt=10,t):0!=(256&e)?(pt=9,256):0!==(t=3584&e)?(pt=8,t):0!=(4096&e)?(pt=7,4096):0!==(t=4186112&e)?(pt=6,t):0!==(t=62914560&e)?(pt=5,t):67108864&e?(pt=4,67108864):0!=(134217728&e)?(pt=3,134217728):0!==(t=805306368&e)?(pt=2,t):0!=(1073741824&e)?(pt=1,1073741824):(pt=8,e)}function gt(e,t){var i=e.pendingLanes;if(0===i)return pt=0;var r=0,n=0,a=e.expiredLanes,o=e.suspendedLanes,s=e.pingedLanes;if(0!==a)r=a,n=pt=15;else if(0!==(a=134217727&i)){var l=a&~o;0!==l?(r=ft(l),n=pt):0!==(s&=a)&&(r=ft(s),n=pt)}else 0!==(a=i&~o)?(r=ft(a),n=pt):0!==s&&(r=ft(s),n=pt);if(0===r)return 0;if(r=i&((0>(r=31-bt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&o)){if(ft(t),n<=pt)return t;pt=n}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)n=1<<(i=31-bt(t)),r|=e[i],t&=~n;return r}function _t(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=vt(24&~t))?mt(10,t):e;case 10:return 0===(e=vt(192&~t))?mt(8,t):e;case 8:return 0===(e=vt(3584&~t))&&(0===(e=vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function vt(e){return e&-e}function yt(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function At(e,t,i){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-bt(t)]=i}var bt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(Et(e)/wt|0)|0},Et=Math.log,wt=Math.LN2;var Tt=a.unstable_runWithPriority,Ct=a.unstable_scheduleCallback,St=a.unstable_cancelCallback,It=a.unstable_shouldYield,xt=a.unstable_requestPaint,Pt=a.unstable_now,Dt=a.unstable_getCurrentPriorityLevel,Rt=a.unstable_ImmediatePriority,Ot=a.unstable_UserBlockingPriority,kt=a.unstable_NormalPriority,Mt=a.unstable_LowPriority,Nt=a.unstable_IdlePriority,Lt={},Bt=void 0!==xt?xt:function(){},Ft=null,Ut=null,Wt=!1,Gt=Pt(),Vt=1e4>Gt?Pt:function(){return Pt()-Gt};function jt(){switch(Dt()){case Rt:return 99;case Ot:return 98;case kt:return 97;case Mt:return 96;case Nt:return 95;default:throw Error(o(332))}}function Ht(e){switch(e){case 99:return Rt;case 98:return Ot;case 97:return kt;case 96:return Mt;case 95:return Nt;default:throw Error(o(332))}}function zt(e,t){return e=Ht(e),Tt(e,t)}function Yt(e,t,i){return e=Ht(e),Ct(e,t,i)}function $t(){if(null!==Ut){var e=Ut;Ut=null,St(e)}qt()}function qt(){if(!Wt&&null!==Ft){Wt=!0;var e=0;try{var t=Ft;zt(99,(function(){for(;e<t.length;e++){var i=t[e];do{i=i(!0)}while(null!==i)}})),Ft=null}catch(t){throw null!==Ft&&(Ft=Ft.slice(e+1)),Ct(Rt,$t),t}finally{Wt=!1}}}var Qt=s.ReactCurrentBatchConfig;var Zt="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},Kt=Object.prototype.hasOwnProperty;function Xt(e,t){if(Zt(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++)if(!Kt.call(t,i[r])||!Zt(e[i[r]],t[i[r]]))return!1;return!0}function Jt(e){switch(e.tag){case 5:return ze(e.type);case 16:return ze("Lazy");case 13:return ze("Suspense");case 19:return ze("SuspenseList");case 0:case 2:case 15:return e=$e(e.type,!1);case 11:return e=$e(e.type.render,!1);case 22:return e=$e(e.type._render,!1);case 1:return e=$e(e.type,!0);default:return""}}function ei(e,t){if(e&&e.defaultProps){for(var i in t=r({},t),e=e.defaultProps)void 0===t[i]&&(t[i]=e[i]);return t}return t}var ti=Ze(null),ii=null,ri=null,ni=null;function ai(){ni=ri=ii=null}function oi(e,t){e=e.type._context,q?(Xe(ti,e._currentValue),e._currentValue=t):(Xe(ti,e._currentValue2),e._currentValue2=t)}function si(e){var t=ti.current;Ke(ti),e=e.type._context,q?e._currentValue=t:e._currentValue2=t}function li(e,t){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)===t){if(null===i||(i.childLanes&t)===t)break;i.childLanes|=t}else e.childLanes|=t,null!==i&&(i.childLanes|=t);e=e.return}}function ui(e,t){ii=e,ni=ri=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Wr=!0),e.firstContext=null)}function ci(e,t){if(ni!==e&&!1!==t&&0!==t)if(("number"!=typeof t||1073741823===t)&&(ni=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ri){if(null===ii)throw Error(o(308));ri=t,ii.dependencies={lanes:0,firstContext:t,responders:null}}else ri=ri.next=t;return q?e._currentValue:e._currentValue2}var di=!1;function hi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gi(e,t){if(null!==(e=e.updateQueue)){var i=(e=e.shared).pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}}function _i(e,t){var i=e.updateQueue,r=e.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,a=null;if(null!==(i=i.firstBaseUpdate)){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};null===a?n=a=o:a=a.next=o,i=i.next}while(null!==i);null===a?n=a=t:a=a.next=t}else n=a=t;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function mi(e,t,i,n){var a=e.updateQueue;di=!1;var o=a.firstBaseUpdate,s=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var u=l,c=u.next;u.next=null,null===s?o=c:s.next=c,s=u;var d=e.alternate;if(null!==d){var h=(d=d.updateQueue).lastBaseUpdate;h!==s&&(null===h?d.firstBaseUpdate=c:h.next=c,d.lastBaseUpdate=u)}}if(null!==o){for(h=a.baseState,s=0,d=c=u=null;;){l=o.lane;var p=o.eventTime;if((n&l)===l){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(l=t,p=i,g.tag){case 1:if("function"==typeof(f=g.payload)){h=f.call(p,h,l);break e}h=f;break e;case 3:f.flags=-4097&f.flags|64;case 0:if(null==(l="function"==typeof(f=g.payload)?f.call(p,h,l):f))break e;h=r({},h,l);break e;case 2:di=!0}}null!==o.callback&&(e.flags|=32,null===(l=a.effects)?a.effects=[o]:l.push(o))}else p={eventTime:p,lane:l,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,u=h):d=d.next=p,s|=l;if(null===(o=o.next)){if(null===(l=a.shared.pending))break;o=l.next,l.next=null,a.lastBaseUpdate=l,a.shared.pending=null}}null===d&&(u=h),a.baseState=u,a.firstBaseUpdate=c,a.lastBaseUpdate=d,ca|=s,e.lanes=s,e.memoizedState=h}}function vi(e,t,i){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],n=r.callback;if(null!==n){if(r.callback=null,r=i,"function"!=typeof n)throw Error(o(191,n));n.call(r)}}}var yi=(new n.Component).refs;function Ai(e,t,i,n){i=null==(i=i(n,t=e.memoizedState))?t:r({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var bi={isMounted:function(e){return!!(e=e._reactInternals)&&x(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Na(),n=La(e),a=fi(r,n);a.payload=t,null!=i&&(a.callback=i),gi(e,a),Ba(e,n,r)},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Na(),n=La(e),a=fi(r,n);a.tag=1,a.payload=t,null!=i&&(a.callback=i),gi(e,a),Ba(e,n,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Na(),r=La(e),n=fi(i,r);n.tag=2,null!=t&&(n.callback=t),gi(e,n),Ba(e,r,i)}};function Ei(e,t,i,r,n,a,o){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xt(i,r)||!Xt(n,a))}function wi(e,t,i){var r=!1,n=Je,a=t.contextType;return"object"==typeof a&&null!==a?a=ci(a):(n=nt(t)?it:et.current,a=(r=null!=(r=t.contextTypes))?rt(e,n):Je),t=new t(i,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=bi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ti(e,t,i,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&bi.enqueueReplaceState(t,t.state,null)}function Ci(e,t,i,r){var n=e.stateNode;n.props=i,n.state=e.memoizedState,n.refs=yi,hi(e);var a=t.contextType;"object"==typeof a&&null!==a?n.context=ci(a):(a=nt(t)?it:et.current,n.context=rt(e,a)),mi(e,i,n,r),n.state=e.memoizedState,"function"==typeof(a=t.getDerivedStateFromProps)&&(Ai(e,t,a,i),n.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof n.getSnapshotBeforeUpdate||"function"!=typeof n.UNSAFE_componentWillMount&&"function"!=typeof n.componentWillMount||(t=n.state,"function"==typeof n.componentWillMount&&n.componentWillMount(),"function"==typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&bi.enqueueReplaceState(n,n.state,null),mi(e,i,n,r),n.state=e.memoizedState),"function"==typeof n.componentDidMount&&(e.flags|=4)}var Si=Array.isArray;function Ii(e,t,i){if(null!==(e=i.ref)&&"function"!=typeof e&&"object"!=typeof e){if(i._owner){if(i=i._owner){if(1!==i.tag)throw Error(o(309));var r=i.stateNode}if(!r)throw Error(o(147,e));var n=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===n?t.ref:((t=function(e){var t=r.refs;t===yi&&(t=r.refs={}),null===e?delete t[n]:t[n]=e})._stringRef=n,t)}if("string"!=typeof e)throw Error(o(284));if(!i._owner)throw Error(o(290,e))}return e}function xi(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Pi(e){function t(t,i){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=i,t.lastEffect=i):t.firstEffect=t.lastEffect=i,i.nextEffect=null,i.flags=8}}function i(i,r){if(!e)return null;for(;null!==r;)t(i,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=wo(e,t)).index=0,e.sibling=null,e}function a(t,i,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<i?(t.flags=2,i):r:(t.flags=2,i):i}function s(t){return e&&null===t.alternate&&(t.flags=2),t}function d(e,t,i,r){return null===t||6!==t.tag?((t=Io(i,e.mode,r)).return=e,t):((t=n(t,i)).return=e,t)}function h(e,t,i,r){return null!==t&&t.elementType===i.type?((r=n(t,i.props)).ref=Ii(e,t,i),r.return=e,r):((r=To(i.type,i.key,i.props,null,e.mode,r)).ref=Ii(e,t,i),r.return=e,r)}function p(e,t,i,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=xo(i,e.mode,r)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function f(e,t,i,r,a){return null===t||7!==t.tag?((t=Co(i,e.mode,r,a)).return=e,t):((t=n(t,i)).return=e,t)}function g(e,t,i){if("string"==typeof t||"number"==typeof t)return(t=Io(""+t,e.mode,i)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case l:return(i=To(t.type,t.key,t.props,null,e.mode,i)).ref=Ii(e,null,t),i.return=e,i;case u:return(t=xo(t,e.mode,i)).return=e,t}if(Si(t)||S(t))return(t=Co(t,e.mode,i,null)).return=e,t;xi(e,t)}return null}function _(e,t,i,r){var n=null!==t?t.key:null;if("string"==typeof i||"number"==typeof i)return null!==n?null:d(e,t,""+i,r);if("object"==typeof i&&null!==i){switch(i.$$typeof){case l:return i.key===n?i.type===c?f(e,t,i.props.children,r,n):h(e,t,i,r):null;case u:return i.key===n?p(e,t,i,r):null}if(Si(i)||S(i))return null!==n?null:f(e,t,i,r,null);xi(e,i)}return null}function m(e,t,i,r,n){if("string"==typeof r||"number"==typeof r)return d(t,e=e.get(i)||null,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case l:return e=e.get(null===r.key?i:r.key)||null,r.type===c?f(t,e,r.props.children,n,r.key):h(t,e,r,n);case u:return p(t,e=e.get(null===r.key?i:r.key)||null,r,n)}if(Si(r)||S(r))return f(t,e=e.get(i)||null,r,n,null);xi(t,r)}return null}return function(d,h,p,f){var v="object"==typeof p&&null!==p&&p.type===c&&null===p.key;v&&(p=p.props.children);var y="object"==typeof p&&null!==p;if(y)switch(p.$$typeof){case l:e:{for(y=p.key,v=h;null!==v;){if(v.key===y){switch(v.tag){case 7:if(p.type===c){i(d,v.sibling),(h=n(v,p.props.children)).return=d,d=h;break e}break;default:if(v.elementType===p.type){i(d,v.sibling),(h=n(v,p.props)).ref=Ii(d,v,p),h.return=d,d=h;break e}}i(d,v);break}t(d,v),v=v.sibling}p.type===c?((h=Co(p.props.children,d.mode,f,p.key)).return=d,d=h):((f=To(p.type,p.key,p.props,null,d.mode,f)).ref=Ii(d,h,p),f.return=d,d=f)}return s(d);case u:e:{for(v=p.key;null!==h;){if(h.key===v){if(4===h.tag&&h.stateNode.containerInfo===p.containerInfo&&h.stateNode.implementation===p.implementation){i(d,h.sibling),(h=n(h,p.children||[])).return=d,d=h;break e}i(d,h);break}t(d,h),h=h.sibling}(h=xo(p,d.mode,f)).return=d,d=h}return s(d)}if("string"==typeof p||"number"==typeof p)return p=""+p,null!==h&&6===h.tag?(i(d,h.sibling),(h=n(h,p)).return=d,d=h):(i(d,h),(h=Io(p,d.mode,f)).return=d,d=h),s(d);if(Si(p))return function(n,o,s,l){for(var u=null,c=null,d=o,h=o=0,p=null;null!==d&&h<s.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=_(n,d,s[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(n,d),o=a(f,o,h),null===c?u=f:c.sibling=f,c=f,d=p}if(h===s.length)return i(n,d),u;if(null===d){for(;h<s.length;h++)null!==(d=g(n,s[h],l))&&(o=a(d,o,h),null===c?u=d:c.sibling=d,c=d);return u}for(d=r(n,d);h<s.length;h++)null!==(p=m(d,n,h,s[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),o=a(p,o,h),null===c?u=p:c.sibling=p,c=p);return e&&d.forEach((function(e){return t(n,e)})),u}(d,h,p,f);if(S(p))return function(n,s,l,u){var c=S(l);if("function"!=typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,h=s,p=s=0,f=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=_(n,h,v.value,u);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(n,h),s=a(y,s,p),null===d?c=y:d.sibling=y,d=y,h=f}if(v.done)return i(n,h),c;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=g(n,v.value,u))&&(s=a(v,s,p),null===d?c=v:d.sibling=v,d=v);return c}for(h=r(n,h);!v.done;p++,v=l.next())null!==(v=m(h,n,p,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),s=a(v,s,p),null===d?c=v:d.sibling=v,d=v);return e&&h.forEach((function(e){return t(n,e)})),c}(d,h,p,f);if(y&&xi(d,p),void 0===p&&!v)switch(d.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,I(d.type)||"Component"))}return i(d,h)}}var Di=Pi(!0),Ri=Pi(!1),Oi={},ki=Ze(Oi),Mi=Ze(Oi),Ni=Ze(Oi);function Li(e){if(e===Oi)throw Error(o(174));return e}function Bi(e,t){Xe(Ni,t),Xe(Mi,e),Xe(ki,Oi),e=N(t),Ke(ki),Xe(ki,e)}function Fi(){Ke(ki),Ke(Mi),Ke(Ni)}function Ui(e){var t=Li(Ni.current),i=Li(ki.current);i!==(t=L(i,e.type,t))&&(Xe(Mi,e),Xe(ki,t))}function Wi(e){Mi.current===e&&(Ke(ki),Ke(Mi))}var Gi=Ze(0);function Vi(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||Le(i)||Be(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ji=null,Hi=null,zi=!1;function Yi(e,t){var i=bo(5,null,null,0);i.elementType="DELETED",i.type="DELETED",i.stateNode=t,i.return=e,i.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=i,e.lastEffect=i):e.firstEffect=e.lastEffect=i}function $i(e,t){switch(e.tag){case 5:return null!==(t=Me(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=Ne(t,e.pendingProps))&&(e.stateNode=t,!0);case 13:default:return!1}}function qi(e){if(zi){var t=Hi;if(t){var i=t;if(!$i(e,t)){if(!(t=Fe(i))||!$i(e,t))return e.flags=-1025&e.flags|2,zi=!1,void(ji=e);Yi(ji,i)}ji=e,Hi=Ue(t)}else e.flags=-1025&e.flags|2,zi=!1,ji=e}}function Qi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ji=e}function Zi(e){if(!K||e!==ji)return!1;if(!zi)return Qi(e),zi=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!j(t,e.memoizedProps))for(t=Hi;t;)Yi(e,t),t=Fe(t);if(Qi(e),13===e.tag){if(!K)throw Error(o(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));Hi=Ve(e)}else Hi=ji?Fe(e.stateNode):null;return!0}function Ki(){K&&(Hi=ji=null,zi=!1)}var Xi=[];function Ji(){for(var e=0;e<Xi.length;e++){var t=Xi[e];q?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}Xi.length=0}var er=s.ReactCurrentDispatcher,tr=s.ReactCurrentBatchConfig,ir=0,rr=null,nr=null,ar=null,or=!1,sr=!1;function lr(){throw Error(o(321))}function ur(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Zt(e[i],t[i]))return!1;return!0}function cr(e,t,i,r,n,a){if(ir=a,rr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,er.current=null===e||null===e.memoizedState?Lr:Br,e=i(r,n),sr){a=0;do{if(sr=!1,!(25>a))throw Error(o(301));a+=1,ar=nr=null,t.updateQueue=null,er.current=Fr,e=i(r,n)}while(sr)}if(er.current=Nr,t=null!==nr&&null!==nr.next,ir=0,ar=nr=rr=null,or=!1,t)throw Error(o(300));return e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ar?rr.memoizedState=ar=e:ar=ar.next=e,ar}function hr(){if(null===nr){var e=rr.alternate;e=null!==e?e.memoizedState:null}else e=nr.next;var t=null===ar?rr.memoizedState:ar.next;if(null!==t)ar=t,nr=e;else{if(null===e)throw Error(o(310));e={memoizedState:(nr=e).memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},null===ar?rr.memoizedState=ar=e:ar=ar.next=e}return ar}function pr(e,t){return"function"==typeof t?t(e):t}function fr(e){var t=hr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var r=nr,n=r.baseQueue,a=i.pending;if(null!==a){if(null!==n){var s=n.next;n.next=a.next,a.next=s}r.baseQueue=n=a,i.pending=null}if(null!==n){n=n.next,r=r.baseState;var l=s=a=null,u=n;do{var c=u.lane;if((ir&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,rr.lanes|=c,ca|=c}u=u.next}while(null!==u&&u!==n);null===l?a=r:l.next=s,Zt(r,t.memoizedState)||(Wr=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,i.lastRenderedState=r}return[t.memoizedState,i.dispatch]}function gr(e){var t=hr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,a=t.memoizedState;if(null!==n){i.pending=null;var s=n=n.next;do{a=e(a,s.action),s=s.next}while(s!==n);Zt(a,t.memoizedState)||(Wr=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),i.lastRenderedState=a}return[a,r]}function _r(e,t,i){var r=t._getVersion;r=r(t._source);var n=q?t._workInProgressVersionPrimary:t._workInProgressVersionSecondary;if(null!==n?e=n===r:(e=e.mutableReadLanes,(e=(ir&e)===e)&&(q?t._workInProgressVersionPrimary=r:t._workInProgressVersionSecondary=r,Xi.push(t))),e)return i(t._source);throw Xi.push(t),Error(o(350))}function mr(e,t,i,r){var n=ia;if(null===n)throw Error(o(349));var a=t._getVersion,s=a(t._source),l=er.current,u=l.useState((function(){return _r(n,t,i)})),c=u[1],d=u[0];u=ar;var h=e.memoizedState,p=h.refs,f=p.getSnapshot,g=h.source;h=h.subscribe;var _=rr;return e.memoizedState={refs:p,source:t,subscribe:r},l.useEffect((function(){p.getSnapshot=i,p.setSnapshot=c;var e=a(t._source);if(!Zt(s,e)){e=i(t._source),Zt(d,e)||(c(e),e=La(_),n.mutableReadLanes|=e&n.pendingLanes),e=n.mutableReadLanes,n.entangledLanes|=e;for(var r=n.entanglements,o=e;0<o;){var l=31-bt(o),u=1<<l;r[l]|=e,o&=~u}}}),[i,t,r]),l.useEffect((function(){return r(t._source,(function(){var e=p.getSnapshot,i=p.setSnapshot;try{i(e(t._source));var r=La(_);n.mutableReadLanes|=r&n.pendingLanes}catch(e){i((function(){throw e}))}}))}),[t,r]),Zt(f,i)&&Zt(g,t)&&Zt(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:pr,lastRenderedState:d}).dispatch=c=Mr.bind(null,rr,e),u.queue=e,u.baseQueue=null,d=_r(n,t,i),u.memoizedState=u.baseState=d),d}function vr(e,t,i){return mr(hr(),e,t,i)}function yr(e){var t=dr();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e}).dispatch=Mr.bind(null,rr,e),[t.memoizedState,e]}function Ar(e,t,i,r){return e={tag:e,create:t,destroy:i,deps:r,next:null},null===(t=rr.updateQueue)?(t={lastEffect:null},rr.updateQueue=t,t.lastEffect=e.next=e):null===(i=t.lastEffect)?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function br(e){return e={current:e},dr().memoizedState=e}function Er(){return hr().memoizedState}function wr(e,t,i,r){var n=dr();rr.flags|=e,n.memoizedState=Ar(1|t,i,void 0,void 0===r?null:r)}function Tr(e,t,i,r){var n=hr();r=void 0===r?null:r;var a=void 0;if(null!==nr){var o=nr.memoizedState;if(a=o.destroy,null!==r&&ur(r,o.deps))return void Ar(t,i,a,r)}rr.flags|=e,n.memoizedState=Ar(1|t,i,a,r)}function Cr(e,t){return wr(516,4,e,t)}function Sr(e,t){return Tr(516,4,e,t)}function Ir(e,t){return Tr(4,2,e,t)}function xr(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Pr(e,t,i){return i=null!=i?i.concat([e]):null,Tr(4,2,xr.bind(null,t,e),i)}function Dr(){}function Rr(e,t){var i=hr();t=void 0===t?null:t;var r=i.memoizedState;return null!==r&&null!==t&&ur(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function Or(e,t){var i=hr();t=void 0===t?null:t;var r=i.memoizedState;return null!==r&&null!==t&&ur(t,r[1])?r[0]:(e=e(),i.memoizedState=[e,t],e)}function kr(e,t){var i=jt();zt(98>i?98:i,(function(){e(!0)})),zt(97<i?97:i,(function(){var i=tr.transition;tr.transition=1;try{e(!1),t()}finally{tr.transition=i}}))}function Mr(e,t,i){var r=Na(),n=La(e),a={lane:n,action:i,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===rr||null!==o&&o===rr)sr=or=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,l=o(s,i);if(a.eagerReducer=o,a.eagerState=l,Zt(l,s))return}catch(e){}Ba(e,n,r)}}var Nr={readContext:ci,useCallback:lr,useContext:lr,useEffect:lr,useImperativeHandle:lr,useLayoutEffect:lr,useMemo:lr,useReducer:lr,useRef:lr,useState:lr,useDebugValue:lr,useDeferredValue:lr,useTransition:lr,useMutableSource:lr,useOpaqueIdentifier:lr,unstable_isNewReconciler:!1},Lr={readContext:ci,useCallback:function(e,t){return dr().memoizedState=[e,void 0===t?null:t],e},useContext:ci,useEffect:Cr,useImperativeHandle:function(e,t,i){return i=null!=i?i.concat([e]):null,wr(4,2,xr.bind(null,t,e),i)},useLayoutEffect:function(e,t){return wr(4,2,e,t)},useMemo:function(e,t){var i=dr();return t=void 0===t?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var r=dr();return t=void 0!==i?i(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Mr.bind(null,rr,e),[r.memoizedState,e]},useRef:br,useState:yr,useDebugValue:Dr,useDeferredValue:function(e){var t=yr(e),i=t[0],r=t[1];return Cr((function(){var t=tr.transition;tr.transition=1;try{r(e)}finally{tr.transition=t}}),[e]),i},useTransition:function(){var e=yr(!1),t=e[0];return br(e=kr.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,i){var r=dr();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:i},mr(r,e,t,i)},useOpaqueIdentifier:function(){if(zi){var e=!1,t=J((function(){throw e||(e=!0,i(ee())),Error(o(355))})),i=yr(t)[1];return 0==(2&rr.mode)&&(rr.flags|=516,Ar(5,(function(){i(ee())}),void 0,null)),t}return yr(t=ee()),t},unstable_isNewReconciler:!1},Br={readContext:ci,useCallback:Rr,useContext:ci,useEffect:Sr,useImperativeHandle:Pr,useLayoutEffect:Ir,useMemo:Or,useReducer:fr,useRef:Er,useState:function(){return fr(pr)},useDebugValue:Dr,useDeferredValue:function(e){var t=fr(pr),i=t[0],r=t[1];return Sr((function(){var t=tr.transition;tr.transition=1;try{r(e)}finally{tr.transition=t}}),[e]),i},useTransition:function(){var e=fr(pr)[0];return[Er().current,e]},useMutableSource:vr,useOpaqueIdentifier:function(){return fr(pr)[0]},unstable_isNewReconciler:!1},Fr={readContext:ci,useCallback:Rr,useContext:ci,useEffect:Sr,useImperativeHandle:Pr,useLayoutEffect:Ir,useMemo:Or,useReducer:gr,useRef:Er,useState:function(){return gr(pr)},useDebugValue:Dr,useDeferredValue:function(e){var t=gr(pr),i=t[0],r=t[1];return Sr((function(){var t=tr.transition;tr.transition=1;try{r(e)}finally{tr.transition=t}}),[e]),i},useTransition:function(){var e=gr(pr)[0];return[Er().current,e]},useMutableSource:vr,useOpaqueIdentifier:function(){return gr(pr)[0]},unstable_isNewReconciler:!1},Ur=s.ReactCurrentOwner,Wr=!1;function Gr(e,t,i,r){t.child=null===e?Ri(t,null,i,r):Di(t,e.child,i,r)}function Vr(e,t,i,r,n){i=i.render;var a=t.ref;return ui(t,n),r=cr(e,t,i,r,a,n),null===e||Wr?(t.flags|=1,Gr(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,cn(e,t,n))}function jr(e,t,i,r,n,a){if(null===e){var o=i.type;return"function"!=typeof o||Eo(o)||void 0!==o.defaultProps||null!==i.compare||void 0!==i.defaultProps?((e=To(i.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Hr(e,t,o,r,n,a))}return o=e.child,0==(n&a)&&(n=o.memoizedProps,(i=null!==(i=i.compare)?i:Xt)(n,r)&&e.ref===t.ref)?cn(e,t,a):(t.flags|=1,(e=wo(o,r)).ref=t.ref,e.return=t,t.child=e)}function Hr(e,t,i,r,n,a){if(null!==e&&Xt(e.memoizedProps,r)&&e.ref===t.ref){if(Wr=!1,0==(a&n))return t.lanes=e.lanes,cn(e,t,a);0!=(16384&e.flags)&&(Wr=!0)}return $r(e,t,i,r,a)}function zr(e,t,i){var r=t.pendingProps,n=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},za(t,i);else{if(0==(1073741824&i))return e=null!==a?a.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},za(t,e),null;t.memoizedState={baseLanes:0},za(t,null!==a?a.baseLanes:i)}else null!==a?(r=a.baseLanes|i,t.memoizedState=null):r=i,za(t,r);return Gr(e,t,n,i),t.child}function Yr(e,t){var i=t.ref;(null===e&&null!==i||null!==e&&e.ref!==i)&&(t.flags|=128)}function $r(e,t,i,r,n){var a=nt(i)?it:et.current;return a=rt(t,a),ui(t,n),i=cr(e,t,i,r,a,n),null===e||Wr?(t.flags|=1,Gr(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,cn(e,t,n))}function qr(e,t,i,r,n){if(nt(i)){var a=!0;lt(t)}else a=!1;if(ui(t,n),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),wi(t,i,r),Ci(t,i,r,n),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=i.contextType;"object"==typeof u&&null!==u?u=ci(u):u=rt(t,u=nt(i)?it:et.current);var c=i.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof o.getSnapshotBeforeUpdate;d||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ti(t,o,r,u),di=!1;var h=t.memoizedState;o.state=h,mi(t,r,o,n),l=t.memoizedState,s!==r||h!==l||tt.current||di?("function"==typeof c&&(Ai(t,i,c,r),l=t.memoizedState),(s=di||Ei(t,i,s,r,h,l,u))?(d||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4)):("function"==typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"==typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,pi(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ei(t.type,s),o.props=u,d=t.pendingProps,h=o.context,"object"==typeof(l=i.contextType)&&null!==l?l=ci(l):l=rt(t,l=nt(i)?it:et.current);var p=i.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s!==d||h!==l)&&Ti(t,o,r,l),di=!1,h=t.memoizedState,o.state=h,mi(t,r,o,n);var f=t.memoizedState;s!==d||h!==f||tt.current||di?("function"==typeof p&&(Ai(t,i,p,r),f=t.memoizedState),(u=di||Ei(t,i,u,r,h,f,l))?(c||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,f,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=f),o.props=r,o.state=f,o.context=l,r=u):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Qr(e,t,i,r,a,n)}function Qr(e,t,i,r,n,a){Yr(e,t);var o=0!=(64&t.flags);if(!r&&!o)return n&&ut(t,i,!1),cn(e,t,a);r=t.stateNode,Ur.current=t;var s=o&&"function"!=typeof i.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Di(t,e.child,null,a),t.child=Di(t,null,s,a)):Gr(e,t,s,a),t.memoizedState=r.state,n&&ut(t,i,!0),t.child}function Zr(e){var t=e.stateNode;t.pendingContext?ot(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ot(0,t.context,!1),Bi(e,t.containerInfo)}var Kr,Xr,Jr,en,tn={dehydrated:null,retryLane:0};function rn(e,t,i){var r,n=t.pendingProps,a=Gi.current,o=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(a|=1),Xe(Gi,1&a),null===e?(void 0!==n.fallback&&qi(t),e=n.children,a=n.fallback,o?(e=nn(t,e,a,i),t.child.memoizedState={baseLanes:i},t.memoizedState=tn,e):"number"==typeof n.unstable_expectedLoadTime?(e=nn(t,e,a,i),t.child.memoizedState={baseLanes:i},t.memoizedState=tn,t.lanes=33554432,e):((i=So({mode:"visible",children:e},t.mode,i,null)).return=t,t.child=i)):(e.memoizedState,o?(n=on(e,t,n.children,n.fallback,i),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:i}:{baseLanes:a.baseLanes|i},o.childLanes=e.childLanes&~i,t.memoizedState=tn,n):(i=an(e,t,n.children,i),t.memoizedState=null,i))}function nn(e,t,i,r){var n=e.mode,a=e.child;return t={mode:"hidden",children:t},0==(2&n)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=So(t,n,0,null),i=Co(i,n,r,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i}function an(e,t,i,r){var n=e.child;return e=n.sibling,i=wo(n,{mode:"visible",children:i}),0==(2&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=i}function on(e,t,i,r,n){var a=t.mode,o=e.child;e=o.sibling;var s={mode:"hidden",children:i};return 0==(2&a)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=s,null!==(o=i.lastEffect)?(t.firstEffect=i.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):i=wo(o,s),null!==e?r=wo(e,r):(r=Co(r,a,n,null)).flags|=2,r.return=t,i.return=t,i.sibling=r,t.child=i,r}function sn(e,t){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),li(e.return,t)}function ln(e,t,i,r,n,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n,o.lastEffect=a)}function un(e,t,i){var r=t.pendingProps,n=r.revealOrder,a=r.tail;if(Gr(e,t,r.children,i),0!=(2&(r=Gi.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&sn(e,i);else if(19===e.tag)sn(e,i);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Xe(Gi,r),0==(2&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===Vi(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),ln(t,!1,n,i,a,t.lastEffect);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Vi(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}ln(t,!0,i,null,a,t.lastEffect);break;case"together":ln(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cn(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),ca|=t.lanes,0!=(i&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=wo(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=wo(e,e.pendingProps)).return=t;i.sibling=null}return t.child}return null}function dn(e){e.flags|=4}if(Q)Kr=function(e,t){for(var i=t.child;null!==i;){if(5===i.tag||6===i.tag)W(e,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},Xr=function(){},Jr=function(e,t,i,r,n){if((e=e.memoizedProps)!==r){var a=t.stateNode,o=Li(ki.current);i=V(a,i,e,r,n,o),(t.updateQueue=i)&&dn(t)}},en=function(e,t,i,r){i!==r&&dn(t)};else if(Z){Kr=function(e,t,i,r){for(var n=t.child;null!==n;){if(5===n.tag){var a=n.stateNode;i&&r&&(a=Oe(a,n.type,n.memoizedProps,n)),W(e,a)}else if(6===n.tag)a=n.stateNode,i&&r&&(a=ke(a,n.memoizedProps,n)),W(e,a);else if(4!==n.tag){if(13===n.tag&&0!=(4&n.flags)&&(a=null!==n.memoizedState)){var o=n.child;if(null!==o&&(null!==o.child&&(o.child.return=o,Kr(e,o,!0,a)),null!==(a=o.sibling))){a.return=n,n=a;continue}}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};var hn=function(e,t,i,r){for(var n=t.child;null!==n;){if(5===n.tag){var a=n.stateNode;i&&r&&(a=Oe(a,n.type,n.memoizedProps,n)),Pe(e,a)}else if(6===n.tag)a=n.stateNode,i&&r&&(a=ke(a,n.memoizedProps,n)),Pe(e,a);else if(4!==n.tag){if(13===n.tag&&0!=(4&n.flags)&&(a=null!==n.memoizedState)){var o=n.child;if(null!==o&&(null!==o.child&&(o.child.return=o,hn(e,o,!0,a)),null!==(a=o.sibling))){a.return=n,n=a;continue}}if(null!==n.child){n.child.return=n,n=n.child;continue}}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xr=function(e){var t=e.stateNode;if(null!==e.firstEffect){var i=t.containerInfo,r=xe(i);hn(r,e,!1,!1),t.pendingChildren=r,dn(e),De(i,r)}},Jr=function(e,t,i,r,n){var a=e.stateNode,o=e.memoizedProps;if((e=null===t.firstEffect)&&o===r)t.stateNode=a;else{var s=t.stateNode,l=Li(ki.current),u=null;o!==r&&(u=V(s,i,o,r,n,l)),e&&null===u?t.stateNode=a:(a=Ie(a,u,i,o,r,t,e,s),G(a,i,r,n,l)&&dn(t),t.stateNode=a,e?dn(t):Kr(a,t,!1,!1))}},en=function(e,t,i,r){i!==r?(e=Li(Ni.current),i=Li(ki.current),t.stateNode=H(r,e,i,t),dn(t)):t.stateNode=e.stateNode}}else Xr=function(){},Jr=function(){},en=function(){};function pn(e,t){if(!zi)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fn(e,t,i){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return nt(t.type)&&at(),null;case 3:return Fi(),Ke(tt),Ke(et),Ji(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===e||null===e.child)&&(Zi(t)?dn(t):r.hydrate||(t.flags|=256)),Xr(t),null;case 5:Wi(t);var n=Li(Ni.current);if(i=t.type,null!==e&&null!=t.stateNode)Jr(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Li(ki.current),Zi(t)){if(!K)throw Error(o(175));e=We(t.stateNode,t.type,t.memoizedProps,n,e,t),t.updateQueue=e,null!==e&&dn(t)}else{var a=U(i,r,n,e,t);Kr(a,t,!1,!1),t.stateNode=a,G(a,i,r,n,e)&&dn(t)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)en(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(o(166));if(e=Li(Ni.current),n=Li(ki.current),Zi(t)){if(!K)throw Error(o(176));Ge(t.stateNode,t.memoizedProps,t)&&dn(t)}else t.stateNode=H(r,e,n,t)}return null;case 13:return Ke(Gi),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=i,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Zi(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Gi.current)?0===sa&&(sa=3):((0===sa||3===sa)&&(sa=4),null===ia||0==(134217727&ca)&&0==(134217727&da)||Ga(ia,na))),Z&&r&&(t.flags|=4),Q&&(r||n)&&(t.flags|=4),null);case 4:return Fi(),Xr(t),null===e&&re(t.stateNode.containerInfo),null;case 10:return si(t),null;case 17:return nt(t.type)&&at(),null;case 19:if(Ke(Gi),null===(r=t.memoizedState))return null;if(n=0!=(64&t.flags),null===(a=r.rendering))if(n)pn(r,!1);else{if(0!==sa||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=Vi(e))){for(t.flags|=64,pn(r,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,e=i,r=t.child;null!==r;)i=e,(n=r).flags&=2,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null,null===(a=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,i=a.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return Xe(Gi,1&Gi.current|2),t.child}e=e.sibling}null!==r.tail&&Vt()>ga&&(t.flags|=64,n=!0,pn(r,!1),t.lanes=33554432)}else{if(!n)if(null!==(e=Vi(a))){if(t.flags|=64,n=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),pn(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!zi)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Vt()-r.renderingStartTime>ga&&1073741824!==i&&(t.flags|=64,n=!0,pn(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=r.last)?e.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Vt(),e.sibling=null,t=Gi.current,Xe(Gi,n?1&t|2:1&t),e):null;case 23:case 24:return Ya(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function gn(e){switch(e.tag){case 1:nt(e.type)&&at();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fi(),Ke(tt),Ke(et),Ji(),0!=(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return Wi(e),null;case 13:return Ke(Gi),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Ke(Gi),null;case 4:return Fi(),null;case 10:return si(e),null;case 23:case 24:return Ya(),null;default:return null}}function _n(e,t){try{var i="",r=t;do{i+=Jt(r),r=r.return}while(r);var n=i}catch(e){n="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:n}}function mn(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}var vn="function"==typeof WeakMap?WeakMap:Map;function yn(e,t,i){(i=fi(-1,i)).tag=3,i.payload={element:null};var r=t.value;return i.callback=function(){ya||(ya=!0,Aa=r),mn(0,t)},i}function An(e,t,i){(i=fi(-1,i)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var n=t.value;i.payload=function(){return mn(0,t),r(n)}}var a=e.stateNode;return null!==a&&"function"==typeof a.componentDidCatch&&(i.callback=function(){"function"!=typeof r&&(null===ba?ba=new Set([this]):ba.add(this),mn(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),i}var bn="function"==typeof WeakSet?WeakSet:Set;function En(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){uo(e,t)}else t.current=null}function wn(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var i=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?i:ei(t.type,i),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(Q&&256&t.flags&&Se(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(o(163))}function Tn(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var i=t=t.next;do{if((i.tag&e)===e){var r=i.destroy;i.destroy=void 0,void 0!==r&&r()}i=i.next}while(i!==t)}}function Cn(e,t,i){switch(i.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=i.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var n=e;r=n.next,0!=(4&(n=n.tag))&&0!=(1&n)&&(oo(i,e),ao(i,e)),e=r}while(e!==t)}return;case 1:return e=i.stateNode,4&i.flags&&(null===t?e.componentDidMount():(r=i.elementType===i.type?t.memoizedProps:ei(i.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=i.updateQueue)&&vi(i,t,e));case 3:if(null!==(t=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 5:e=M(i.child.stateNode);break;case 1:e=i.child.stateNode}vi(i,t,e)}return;case 5:return e=i.stateNode,void(null===t&&4&i.flags&&ge(e,i.type,i.memoizedProps,i));case 6:case 4:case 12:return;case 13:return void(K&&null===i.memoizedState&&(i=i.alternate,null!==i&&(i=i.memoizedState,null!==i&&(i=i.dehydrated,null!==i&&He(i)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(o(163))}function Sn(e,t){if(Q)for(var i=e;;){if(5===i.tag){var r=i.stateNode;t?Ee(r):Te(i.stateNode,i.memoizedProps)}else if(6===i.tag)r=i.stateNode,t?we(r):Ce(r,i.memoizedProps);else if((23!==i.tag&&24!==i.tag||null===i.memoizedState||i===e)&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function In(e,t){if(dt&&"function"==typeof dt.onCommitFiberUnmount)try{dt.onCommitFiberUnmount(ct,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,n=r.destroy;if(r=r.tag,void 0!==n)if(0!=(4&r))oo(t,i);else{r=t;try{n()}catch(e){uo(r,e)}}i=i.next}while(i!==e)}break;case 1:if(En(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){uo(t,e)}break;case 5:En(t);break;case 4:Q?Mn(e,t):Z&&Z&&(t=t.stateNode.containerInfo,e=xe(t),Re(t,e))}}function xn(e,t){for(var i=t;;)if(In(e,i),null===i.child||Q&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function Pn(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Dn(e){return 5===e.tag||3===e.tag||4===e.tag}function Rn(e){if(Q){e:{for(var t=e.return;null!==t;){if(Dn(t))break e;t=t.return}throw Error(o(160))}var i=t;switch(t=i.stateNode,i.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&i.flags&&(be(t),i.flags&=-17);e:t:for(i=e;;){for(;null===i.sibling;){if(null===i.return||Dn(i.return)){i=null;break e}i=i.return}for(i.sibling.return=i.return,i=i.sibling;5!==i.tag&&6!==i.tag&&18!==i.tag;){if(2&i.flags||null===i.child||4===i.tag)continue t;i.child.return=i,i=i.child}if(!(2&i.flags)){i=i.stateNode;break e}}r?On(e,i,t):kn(e,i,t)}}function On(e,t,i){var r=e.tag,n=5===r||6===r;if(n)e=n?e.stateNode:e.stateNode.instance,t?ve(i,e,t):pe(i,e);else if(4!==r&&null!==(e=e.child))for(On(e,t,i),e=e.sibling;null!==e;)On(e,t,i),e=e.sibling}function kn(e,t,i){var r=e.tag,n=5===r||6===r;if(n)e=n?e.stateNode:e.stateNode.instance,t?me(i,e,t):he(i,e);else if(4!==r&&null!==(e=e.child))for(kn(e,t,i),e=e.sibling;null!==e;)kn(e,t,i),e=e.sibling}function Mn(e,t){for(var i,r,n=t,a=!1;;){if(!a){a=n.return;e:for(;;){if(null===a)throw Error(o(160));switch(i=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===n.tag||6===n.tag)xn(e,n),r?Ae(i,n.stateNode):ye(i,n.stateNode);else if(4===n.tag){if(null!==n.child){i=n.stateNode.containerInfo,r=!0,n.child.return=n,n=n.child;continue}}else if(In(e,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function Nn(e,t){if(Q){switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Tn(3,t);case 1:return;case 5:var i=t.stateNode;if(null!=i){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var n=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&_e(i,a,n,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(o(162));return i=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:i,i);case 3:return void(K&&(t=t.stateNode,t.hydrate&&(t.hydrate=!1,je(t.containerInfo))));case 12:return;case 13:return Ln(t),void Bn(t);case 19:return void Bn(t);case 17:return;case 23:case 24:return void Sn(t,null!==t.memoizedState)}throw Error(o(163))}switch(t.tag){case 0:case 11:case 14:case 15:case 22:return void Tn(3,t);case 12:return;case 13:return Ln(t),void Bn(t);case 19:return void Bn(t);case 3:K&&((i=t.stateNode).hydrate&&(i.hydrate=!1,je(i.containerInfo)));break;case 23:case 24:return}e:if(Z){switch(t.tag){case 1:case 5:case 6:case 20:break e;case 3:case 4:t=t.stateNode,Re(t.containerInfo,t.pendingChildren);break e}throw Error(o(163))}}function Ln(e){null!==e.memoizedState&&(fa=Vt(),Q&&Sn(e.child,!0))}function Bn(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var i=e.stateNode;null===i&&(i=e.stateNode=new bn),t.forEach((function(t){var r=ho.bind(null,e,t);i.has(t)||(i.add(t),t.then(r,r))}))}}function Fn(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Un=0,Wn=1,Gn=2,Vn=3,jn=4;if("function"==typeof Symbol&&Symbol.for){var Hn=Symbol.for;Un=Hn("selector.component"),Wn=Hn("selector.has_pseudo_class"),Gn=Hn("selector.role"),Vn=Hn("selector.test_id"),jn=Hn("selector.text")}function zn(e){var t=X(e);if(null!=t){if("string"!=typeof t.memoizedProps["data-testname"])throw Error(o(364));return t}if(null===(e=ae(e)))throw Error(o(362));return e.stateNode.current}function Yn(e,t){switch(t.$$typeof){case Un:if(e.type===t.value)return!0;break;case Wn:e:{t=t.value,e=[e,0];for(var i=0;i<e.length;){var r=e[i++],n=e[i++],a=t[n];if(5!==r.tag||!le(r)){for(;null!=a&&Yn(r,a);)a=t[++n];if(n===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,n),r=r.sibling}}t=!1}return t;case Gn:if(5===e.tag&&ue(e.stateNode,t.value))return!0;break;case jn:if((5===e.tag||6===e.tag)&&(null!==(e=se(e))&&0<=e.indexOf(t.value)))return!0;break;case Vn:if(5===e.tag&&("string"==typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(o(365,t))}return!1}function $n(e){switch(e.$$typeof){case Un:return"<"+(I(e.value)||"Unknown")+">";case Wn:return":has("+($n(e)||"")+")";case Gn:return'[role="'+e.value+'"]';case jn:return'"'+e.value+'"';case Vn:return'[data-testname="'+e.value+'"]';default:throw Error(o(365,e))}}function qn(e,t){var i=[];e=[e,0];for(var r=0;r<e.length;){var n=e[r++],a=e[r++],o=t[a];if(5!==n.tag||!le(n)){for(;null!=o&&Yn(n,o);)o=t[++a];if(a===t.length)i.push(n);else for(n=n.child;null!==n;)e.push(n,a),n=n.sibling}}return i}function Qn(e,t){if(!ne)throw Error(o(363));e=qn(e=zn(e),t),t=[],e=Array.from(e);for(var i=0;i<e.length;){var r=e[i++];if(5===r.tag)le(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Zn=null;var Kn=Math.ceil,Xn=s.ReactCurrentDispatcher,Jn=s.ReactCurrentOwner,ea=s.IsSomeRendererActing,ta=0,ia=null,ra=null,na=0,aa=0,oa=Ze(0),sa=0,la=null,ua=0,ca=0,da=0,ha=0,pa=null,fa=0,ga=1/0;function _a(){ga=Vt()+500}var ma,va=null,ya=!1,Aa=null,ba=null,Ea=!1,wa=null,Ta=90,Ca=[],Sa=[],Ia=null,xa=0,Pa=null,Da=-1,Ra=0,Oa=0,ka=null,Ma=!1;function Na(){return 0!=(48&ta)?Vt():-1!==Da?Da:Da=Vt()}function La(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===jt()?1:2;if(0===Ra&&(Ra=ua),0!==Qt.transition){0!==Oa&&(Oa=null!==pa?pa.pendingLanes:0),e=Ra;var t=4186112&~Oa;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=jt(),0!=(4&ta)&&98===e?e=mt(12,Ra):e=mt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),Ra),e}function Ba(e,t,i){if(50<xa)throw xa=0,Pa=null,Error(o(185));if(null===(e=Fa(e,t)))return null;At(e,t,i),e===ia&&(da|=t,4===sa&&Ga(e,na));var r=jt();1===t?0!=(8&ta)&&0==(48&ta)?Va(e):(Ua(e,i),0===ta&&(_a(),$t())):(0==(4&ta)||98!==r&&99!==r||(null===Ia?Ia=new Set([e]):Ia.add(e)),Ua(e,i)),pa=e}function Fa(e,t){e.lanes|=t;var i=e.alternate;for(null!==i&&(i.lanes|=t),i=e,e=e.return;null!==e;)e.childLanes|=t,null!==(i=e.alternate)&&(i.childLanes|=t),i=e,e=e.return;return 3===i.tag?i.stateNode:null}function Ua(e,t){for(var i=e.callbackNode,r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var l=31-bt(s),u=1<<l,c=a[l];if(-1===c){if(0==(u&r)||0!=(u&n)){c=t,ft(u);var d=pt;a[l]=10<=d?c+250:6<=d?c+5e3:-1}}else c<=t&&(e.expiredLanes|=u);s&=~u}if(r=gt(e,e===ia?na:0),t=pt,0===r)null!==i&&(i!==Lt&&St(i),e.callbackNode=null,e.callbackPriority=0);else{if(null!==i){if(e.callbackPriority===t)return;i!==Lt&&St(i)}15===t?(i=Va.bind(null,e),null===Ft?(Ft=[i],Ut=Ct(Rt,qt)):Ft.push(i),i=Lt):14===t?i=Yt(99,Va.bind(null,e)):i=Yt(i=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),Wa.bind(null,e)),e.callbackPriority=t,e.callbackNode=i}}function Wa(e){if(Da=-1,Oa=Ra=0,0!=(48&ta))throw Error(o(327));var t=e.callbackNode;if(no()&&e.callbackNode!==t)return null;var i=gt(e,e===ia?na:0);if(0===i)return null;var r=i,n=ta;ta|=16;var a=Qa();for((ia!==e||na!==r)&&(_a(),$a(e,r));;)try{Xa();break}catch(t){qa(e,t)}if(ai(),Xn.current=a,ta=n,null!==ra?r=0:(ia=null,na=0,r=sa),0!=(ua&da))$a(e,0);else if(0!==r){if(2===r&&(ta|=64,e.hydrate&&(e.hydrate=!1,Se(e.containerInfo)),0!==(i=_t(e))&&(r=Za(e,i))),1===r)throw t=la,$a(e,0),Ga(e,i),Ua(e,Vt()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=i,r){case 0:case 1:throw Error(o(345));case 2:to(e);break;case 3:if(Ga(e,i),(62914560&i)===i&&10<(r=fa+500-Vt())){if(0!==gt(e,0))break;if(((n=e.suspendedLanes)&i)!==i){Na(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=z(to.bind(null,e),r);break}to(e);break;case 4:if(Ga(e,i),(4186112&i)===i)break;for(r=e.eventTimes,n=-1;0<i;){var s=31-bt(i);a=1<<s,(s=r[s])>n&&(n=s),i&=~a}if(i=n,10<(i=(120>(i=Vt()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Kn(i/1960))-i)){e.timeoutHandle=z(to.bind(null,e),i);break}to(e);break;case 5:to(e);break;default:throw Error(o(329))}}return Ua(e,Vt()),e.callbackNode===t?Wa.bind(null,e):null}function Ga(e,t){for(t&=~ha,t&=~da,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-bt(t),r=1<<i;e[i]=-1,t&=~r}}function Va(e){if(0!=(48&ta))throw Error(o(327));if(no(),e===ia&&0!=(e.expiredLanes&na)){var t=na,i=Za(e,t);0!=(ua&da)&&(i=Za(e,t=gt(e,t)))}else i=Za(e,t=gt(e,0));if(0!==e.tag&&2===i&&(ta|=64,e.hydrate&&(e.hydrate=!1,Se(e.containerInfo)),0!==(t=_t(e))&&(i=Za(e,t))),1===i)throw i=la,$a(e,0),Ga(e,t),Ua(e,Vt()),i;return e.finishedWork=e.current.alternate,e.finishedLanes=t,to(e),Ua(e,Vt()),null}function ja(e,t){var i=ta;ta|=1;try{return e(t)}finally{0===(ta=i)&&(_a(),$t())}}function Ha(e,t){var i=ta;if(0!=(48&i))return e(t);ta|=1;try{if(e)return zt(99,e.bind(null,t))}finally{ta=i,$t()}}function za(e,t){Xe(oa,aa),aa|=t,ua|=t}function Ya(){aa=oa.current,Ke(oa)}function $a(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==$&&(e.timeoutHandle=$,Y(i)),null!==ra)for(i=ra.return;null!==i;){var r=i;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&at();break;case 3:Fi(),Ke(tt),Ke(et),Ji();break;case 5:Wi(r);break;case 4:Fi();break;case 13:case 19:Ke(Gi);break;case 10:si(r);break;case 23:case 24:Ya()}i=i.return}ia=e,ra=wo(e.current,null),na=aa=ua=t,sa=0,la=null,ha=da=ca=0}function qa(e,t){for(;;){var i=ra;try{if(ai(),er.current=Nr,or){for(var r=rr.memoizedState;null!==r;){var n=r.queue;null!==n&&(n.pending=null),r=r.next}or=!1}if(ir=0,ar=nr=rr=null,sr=!1,Jn.current=null,null===i||null===i.return){sa=1,la=t,ra=null;break}e:{var a=e,o=i.return,s=i,l=t;if(t=na,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var d=0!=(1&Gi.current),h=o;do{var p;if(p=13===h.tag){var f=h.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var g=h.memoizedProps;p=void 0!==g.fallback&&(!0!==g.unstable_avoidThisFallback||!d)}}if(p){var _=h.updateQueue;if(null===_){var m=new Set;m.add(u),h.updateQueue=m}else _.add(u);if(0==(2&h.mode)){if(h.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=fi(-1,1);v.tag=2,gi(s,v)}s.lanes|=1;break e}l=void 0,s=t;var y=a.pingCache;if(null===y?(y=a.pingCache=new vn,l=new Set,y.set(u,l)):void 0===(l=y.get(u))&&(l=new Set,y.set(u,l)),!l.has(s)){l.add(s);var A=co.bind(null,a,u,s);u.then(A,A)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);l=Error((I(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==sa&&(sa=2),l=_n(l,s),h=o;do{switch(h.tag){case 3:a=l,h.flags|=4096,t&=-t,h.lanes|=t,_i(h,yn(0,a,t));break e;case 1:a=l;var b=h.type,E=h.stateNode;if(0==(64&h.flags)&&("function"==typeof b.getDerivedStateFromError||null!==E&&"function"==typeof E.componentDidCatch&&(null===ba||!ba.has(E)))){h.flags|=4096,t&=-t,h.lanes|=t,_i(h,An(h,a,t));break e}}h=h.return}while(null!==h)}eo(i)}catch(e){t=e,ra===i&&null!==i&&(ra=i=i.return);continue}break}}function Qa(){var e=Xn.current;return Xn.current=Nr,null===e?Nr:e}function Za(e,t){var i=ta;ta|=16;var r=Qa();for(ia===e&&na===t||$a(e,t);;)try{Ka();break}catch(t){qa(e,t)}if(ai(),ta=i,Xn.current=r,null!==ra)throw Error(o(261));return ia=null,na=0,sa}function Ka(){for(;null!==ra;)Ja(ra)}function Xa(){for(;null!==ra&&!It();)Ja(ra)}function Ja(e){var t=ma(e.alternate,e,aa);e.memoizedProps=e.pendingProps,null===t?eo(e):ra=t,Jn.current=null}function eo(e){var t=e;do{var i=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(i=fn(i,t,aa)))return void(ra=i);if(24!==(i=t).tag&&23!==i.tag||null===i.memoizedState||0!=(1073741824&aa)||0==(4&i.mode)){for(var r=0,n=i.child;null!==n;)r|=n.lanes|n.childLanes,n=n.sibling;i.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(i=gn(t)))return i.flags&=2047,void(ra=i);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(ra=t);ra=t=e}while(null!==t);0===sa&&(sa=5)}function to(e){var t=jt();return zt(99,io.bind(null,e,t)),null}function io(e,t){do{no()}while(null!==wa);if(0!=(48&ta))throw Error(o(327));var i=e.finishedWork;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null;var r=i.lanes|i.childLanes,n=r,a=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var s=e.eventTimes,l=e.expirationTimes;0<a;){var u=31-bt(a),c=1<<u;n[u]=0,s[u]=-1,l[u]=-1,a&=~c}if(null!==Ia&&0==(24&r)&&Ia.has(e)&&Ia.delete(e),e===ia&&(ra=ia=null,na=0),1<i.flags?null!==i.lastEffect?(i.lastEffect.nextEffect=i,r=i.firstEffect):r=i:r=i.firstEffect,null!==r){n=ta,ta|=32,Jn.current=null,ka=B(e.containerInfo),Ma=!1,va=r;do{try{ro()}catch(e){if(null===va)throw Error(o(330));uo(va,e),va=va.nextEffect}}while(null!==va);ka=null,va=r;do{try{for(s=e;null!==va;){var d=va.flags;if(16&d&&Q&&be(va.stateNode),128&d){var h=va.alternate;if(null!==h){var p=h.ref;null!==p&&("function"==typeof p?p(null):p.current=null)}}switch(1038&d){case 2:Rn(va),va.flags&=-3;break;case 6:Rn(va),va.flags&=-3,Nn(va.alternate,va);break;case 1024:va.flags&=-1025;break;case 1028:va.flags&=-1025,Nn(va.alternate,va);break;case 4:Nn(va.alternate,va);break;case 8:l=s,a=va,Q?Mn(l,a):xn(l,a);var f=a.alternate;Pn(a),null!==f&&Pn(f)}va=va.nextEffect}}catch(e){if(null===va)throw Error(o(330));uo(va,e),va=va.nextEffect}}while(null!==va);Ma&&ie(),F(e.containerInfo),e.current=i,va=r;do{try{for(d=e;null!==va;){var g=va.flags;if(36&g&&Cn(d,va.alternate,va),128&g){h=void 0;var _=va.ref;if(null!==_){var m=va.stateNode;switch(va.tag){case 5:h=M(m);break;default:h=m}"function"==typeof _?_(h):_.current=h}}va=va.nextEffect}}catch(e){if(null===va)throw Error(o(330));uo(va,e),va=va.nextEffect}}while(null!==va);va=null,Bt(),ta=n}else e.current=i;if(Ea)Ea=!1,wa=e,Ta=t;else for(va=r;null!==va;)t=va.nextEffect,va.nextEffect=null,8&va.flags&&((g=va).sibling=null,g.stateNode=null),va=t;if(0===(r=e.pendingLanes)&&(ba=null),1===r?e===Pa?xa++:(xa=0,Pa=e):xa=0,i=i.stateNode,dt&&"function"==typeof dt.onCommitFiberRoot)try{dt.onCommitFiberRoot(ct,i,void 0,64==(64&i.current.flags))}catch(e){}if(Ua(e,Vt()),ya)throw ya=!1,e=Aa,Aa=null,e;return 0!=(8&ta)||$t(),null}function ro(){for(;null!==va;){var e=va.alternate;Ma||null===ka||(0!=(8&va.flags)?O(va,ka)&&(Ma=!0,te()):13===va.tag&&Fn(e,va)&&O(va,ka)&&(Ma=!0,te()));var t=va.flags;0!=(256&t)&&wn(e,va),0==(512&t)||Ea||(Ea=!0,Yt(97,(function(){return no(),null}))),va=va.nextEffect}}function no(){if(90!==Ta){var e=97<Ta?97:Ta;return Ta=90,zt(e,so)}return!1}function ao(e,t){Ca.push(t,e),Ea||(Ea=!0,Yt(97,(function(){return no(),null})))}function oo(e,t){Sa.push(t,e),Ea||(Ea=!0,Yt(97,(function(){return no(),null})))}function so(){if(null===wa)return!1;var e=wa;if(wa=null,0!=(48&ta))throw Error(o(331));var t=ta;ta|=32;var i=Sa;Sa=[];for(var r=0;r<i.length;r+=2){var n=i[r],a=i[r+1],s=n.destroy;if(n.destroy=void 0,"function"==typeof s)try{s()}catch(e){if(null===a)throw Error(o(330));uo(a,e)}}for(i=Ca,Ca=[],r=0;r<i.length;r+=2){n=i[r],a=i[r+1];try{var l=n.create;n.destroy=l()}catch(e){if(null===a)throw Error(o(330));uo(a,e)}}for(l=e.current.firstEffect;null!==l;)e=l.nextEffect,l.nextEffect=null,8&l.flags&&(l.sibling=null,l.stateNode=null),l=e;return ta=t,$t(),!0}function lo(e,t,i){gi(e,t=yn(0,t=_n(i,t),1)),t=Na(),null!==(e=Fa(e,1))&&(At(e,1,t),Ua(e,t))}function uo(e,t){if(3===e.tag)lo(e,e,t);else for(var i=e.return;null!==i;){if(3===i.tag){lo(i,e,t);break}if(1===i.tag){var r=i.stateNode;if("function"==typeof i.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ba||!ba.has(r))){var n=An(i,e=_n(t,e),1);if(gi(i,n),n=Na(),null!==(i=Fa(i,1)))At(i,1,n),Ua(i,n);else if("function"==typeof r.componentDidCatch&&(null===ba||!ba.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}i=i.return}}function co(e,t,i){var r=e.pingCache;null!==r&&r.delete(t),t=Na(),e.pingedLanes|=e.suspendedLanes&i,ia===e&&(na&i)===i&&(4===sa||3===sa&&(62914560&na)===na&&500>Vt()-fa?$a(e,0):ha|=i),Ua(e,t)}function ho(e,t){var i=e.stateNode;null!==i&&i.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===jt()?1:2:(0===Ra&&(Ra=ua),0===(t=vt(62914560&~Ra))&&(t=4194304))),i=Na(),null!==(e=Fa(e,t))&&(At(e,t,i),Ua(e,i))}ma=function(e,t,i){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||tt.current)Wr=!0;else{if(0==(i&r)){switch(Wr=!1,t.tag){case 3:Zr(t),Ki();break;case 5:Ui(t);break;case 1:nt(t.type)&&lt(t);break;case 4:Bi(t,t.stateNode.containerInfo);break;case 10:oi(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!=(i&t.child.childLanes)?rn(e,t,i):(Xe(Gi,1&Gi.current),null!==(t=cn(e,t,i))?t.sibling:null);Xe(Gi,1&Gi.current);break;case 19:if(r=0!=(i&t.childLanes),0!=(64&e.flags)){if(r)return un(e,t,i);t.flags|=64}var n=t.memoizedState;if(null!==n&&(n.rendering=null,n.tail=null,n.lastEffect=null),Xe(Gi,Gi.current),r)break;return null;case 23:case 24:return t.lanes=0,zr(e,t,i)}return cn(e,t,i)}Wr=0!=(16384&e.flags)}else Wr=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=rt(t,et.current),ui(t,i),n=cr(null,t,r,e,n,i),t.flags|=1,"object"==typeof n&&null!==n&&"function"==typeof n.render&&void 0===n.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(r)){var a=!0;lt(t)}else a=!1;t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,hi(t);var s=r.getDerivedStateFromProps;"function"==typeof s&&Ai(t,r,s,e),n.updater=bi,t.stateNode=n,n._reactInternals=t,Ci(t,r,e,i),t=Qr(null,t,r,!0,a,i)}else t.tag=0,Gr(null,t,n,i),t=t.child;return t;case 16:n=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"==typeof e)return Eo(e)?1:0;if(null!=e){if((e=e.$$typeof)===g)return 11;if(e===v)return 14}return 2}(n),e=ei(n,e),a){case 0:t=$r(null,t,n,e,i);break e;case 1:t=qr(null,t,n,e,i);break e;case 11:t=Vr(null,t,n,e,i);break e;case 14:t=jr(null,t,n,ei(n.type,e),r,i);break e}throw Error(o(306,n,""))}return t;case 0:return r=t.type,n=t.pendingProps,$r(e,t,r,n=t.elementType===r?n:ei(r,n),i);case 1:return r=t.type,n=t.pendingProps,qr(e,t,r,n=t.elementType===r?n:ei(r,n),i);case 3:if(Zr(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,n=null!==(n=t.memoizedState)?n.element:null,pi(e,t),mi(t,r,null,i),(r=t.memoizedState.element)===n)Ki(),t=cn(e,t,i);else{if((a=(n=t.stateNode).hydrate)&&(K?(Hi=Ue(t.stateNode.containerInfo),ji=t,a=zi=!0):a=!1),a){if(K&&null!=(e=n.mutableSourceEagerHydrationData))for(n=0;n<e.length;n+=2)a=e[n],s=e[n+1],q?a._workInProgressVersionPrimary=s:a._workInProgressVersionSecondary=s,Xi.push(a);for(i=Ri(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|1024,i=i.sibling}else Gr(e,t,r,i),Ki();t=t.child}return t;case 5:return Ui(t),null===e&&qi(t),r=t.type,n=t.pendingProps,a=null!==e?e.memoizedProps:null,s=n.children,j(r,n)?s=null:null!==a&&j(r,a)&&(t.flags|=16),Yr(e,t),Gr(e,t,s,i),t.child;case 6:return null===e&&qi(t),null;case 13:return rn(e,t,i);case 4:return Bi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Di(t,null,r,i):Gr(e,t,r,i),t.child;case 11:return r=t.type,n=t.pendingProps,Vr(e,t,r,n=t.elementType===r?n:ei(r,n),i);case 7:return Gr(e,t,t.pendingProps,i),t.child;case 8:case 12:return Gr(e,t,t.pendingProps.children,i),t.child;case 10:e:{if(r=t.type._context,n=t.pendingProps,s=t.memoizedProps,oi(t,a=n.value),null!==s){var l=s.value;if(0===(a=Zt(l,a)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(l,a):1073741823))){if(s.children===n.children&&!tt.current){t=cn(e,t,i);break e}}else for(null!==(l=t.child)&&(l.return=t);null!==l;){var u=l.dependencies;if(null!==u){s=l.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&a)){1===l.tag&&((c=fi(-1,i&-i)).tag=2,gi(l,c)),l.lanes|=i,null!==(c=l.alternate)&&(c.lanes|=i),li(l.return,i),u.lanes|=i;break}c=c.next}}else s=10===l.tag&&l.type===t.type?null:l.child;if(null!==s)s.return=l;else for(s=l;null!==s;){if(s===t){s=null;break}if(null!==(l=s.sibling)){l.return=s.return,s=l;break}s=s.return}l=s}}Gr(e,t,n.children,i),t=t.child}return t;case 9:return n=t.type,r=(a=t.pendingProps).children,ui(t,i),r=r(n=ci(n,a.unstable_observedBits)),t.flags|=1,Gr(e,t,r,i),t.child;case 14:return a=ei(n=t.type,t.pendingProps),jr(e,t,n,a=ei(n.type,a),r,i);case 15:return Hr(e,t,t.type,t.pendingProps,r,i);case 17:return r=t.type,n=t.pendingProps,n=t.elementType===r?n:ei(r,n),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,nt(r)?(e=!0,lt(t)):e=!1,ui(t,i),wi(t,r,n),Ci(t,r,n,i),Qr(null,t,r,!0,e,i);case 19:return un(e,t,i);case 23:case 24:return zr(e,t,i)}throw Error(o(156,t.tag))};var po={current:!1},fo=a.unstable_flushAllWithoutAsserting,go="function"==typeof fo;function _o(){if(void 0!==fo)return fo();for(var e=!1;no();)e=!0;return e}function mo(e){try{_o(),function(e){if(null===Zn)try{var i=("require"+Math.random()).slice(0,7);Zn=(t&&t[i]).call(t,"timers").setImmediate}catch(e){Zn=function(e){var t=new MessageChannel;t.port1.onmessage=e,t.port2.postMessage(void 0)}}Zn(e)}((function(){_o()?mo(e):e()}))}catch(t){e(t)}}var vo=0,yo=!1;function Ao(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,i,r){return new Ao(e,t,i,r)}function Eo(e){return!(!(e=e.prototype)||!e.isReactComponent)}function wo(e,t){var i=e.alternate;return null===i?((i=bo(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null),i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function To(e,t,i,r,n,a){var s=2;if(r=e,"function"==typeof e)Eo(e)&&(s=1);else if("string"==typeof e)s=5;else e:switch(e){case c:return Co(i.children,n,a,t);case b:s=8,n|=16;break;case d:s=8,n|=1;break;case h:return(e=bo(12,i,t,8|n)).elementType=h,e.type=h,e.lanes=a,e;case _:return(e=bo(13,i,t,n)).type=_,e.elementType=_,e.lanes=a,e;case m:return(e=bo(19,i,t,n)).elementType=m,e.lanes=a,e;case E:return So(i,n,a,t);case w:return(e=bo(24,i,t,n)).elementType=w,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case p:s=10;break e;case f:s=9;break e;case g:s=11;break e;case v:s=14;break e;case y:s=16,r=null;break e;case A:s=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=bo(s,i,t,n)).elementType=e,t.type=r,t.lanes=a,t}function Co(e,t,i,r){return(e=bo(7,e,r,t)).lanes=i,e}function So(e,t,i,r){return(e=bo(23,e,r,t)).elementType=E,e.lanes=i,e}function Io(e,t,i){return(e=bo(6,e,null,t)).lanes=i,e}function xo(e,t,i){return(t=bo(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Po(e,t,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=$,this.pendingContext=this.context=null,this.hydrate=i,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),K&&(this.mutableSourceEagerHydrationData=null)}function Do(e){var t=e._reactInternals;if(void 0===t)throw"function"==typeof e.render?Error(o(188)):Error(o(268,Object.keys(e)));return null===(e=R(t))?null:e.stateNode}function Ro(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Oo(e,t){Ro(e,t),(e=e.alternate)&&Ro(e,t)}function ko(e){return null===(e=R(e))?null:e.stateNode}function Mo(){return null}return i.IsThisRendererActing=po,i.act=function(e){function t(){vo--,ea.current=i,po.current=r}!1===yo&&(yo=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),vo++;var i=ea.current,r=po.current;ea.current=!0,po.current=!0;try{var n=ja(e)}catch(e){throw t(),e}if(null!==n&&"object"==typeof n&&"function"==typeof n.then)return{then:function(e,r){n.then((function(){1<vo||!0===go&&!0===i?(t(),e()):mo((function(i){t(),i?r(i):e()}))}),(function(e){t(),r(e)}))}};try{1!==vo||!1!==go&&!1!==i||_o(),t()}catch(e){throw t(),e}return{then:function(e){e()}}},i.attemptContinuousHydration=function(e){13===e.tag&&(Ba(e,67108864,Na()),Oo(e,67108864))},i.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=Na(),i=La(e);Ba(e,i,t),Oo(e,i)}},i.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.hydrate){var i=ft(t.pendingLanes);t.expiredLanes|=i&t.pendingLanes,Ua(t,Vt()),0==(48&ta)&&(_a(),$t())}break;case 13:var r=Na();Ha((function(){return Ba(e,1,r)})),Oo(e,4)}},i.attemptUserBlockingHydration=function(e){13===e.tag&&(Ba(e,4,Na()),Oo(e,4))},i.batchedEventUpdates=function(e,t){var i=ta;ta|=2;try{return e(t)}finally{0===(ta=i)&&(_a(),$t())}},i.batchedUpdates=ja,i.createComponentSelector=function(e){return{$$typeof:Un,value:e}},i.createContainer=function(e,t,i){return e=new Po(e,t,i),t=bo(3,null,null,2===t?7:1===t?3:0),e.current=t,t.stateNode=e,hi(t),e},i.createHasPsuedoClassSelector=function(e){return{$$typeof:Wn,value:e}},i.createPortal=function(e,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:u,key:null==r?null:""+r,children:e,containerInfo:t,implementation:i}},i.createRoleSelector=function(e){return{$$typeof:Gn,value:e}},i.createTestNameSelector=function(e){return{$$typeof:Vn,value:e}},i.createTextSelector=function(e){return{$$typeof:jn,value:e}},i.deferredUpdates=function(e){return zt(97,e)},i.discreteUpdates=function(e,t,i,r,n){var a=ta;ta|=4;try{return zt(98,e.bind(null,t,i,r,n))}finally{0===(ta=a)&&(_a(),$t())}},i.findAllNodes=Qn,i.findBoundingRects=function(e,t){if(!ne)throw Error(o(363));t=Qn(e,t),e=[];for(var i=0;i<t.length;i++)e.push(oe(t[i]));for(t=e.length-1;0<t;t--)for(var r=(i=e[t]).x,n=r+i.width,a=i.y,s=a+i.height,l=t-1;0<=l;l--)if(t!==l){var u=e[l],c=u.x,d=c+u.width,h=u.y,p=h+u.height;if(r>=c&&a>=h&&n<=d&&s<=p){e.splice(t,1);break}if(!(r!==c||i.width!==u.width||p<a||h>s)){h>a&&(u.height+=h-a,u.y=a),p<s&&(u.height=s-h),e.splice(t,1);break}if(!(a!==h||i.height!==u.height||d<r||c>n)){c>r&&(u.width+=c-r,u.x=r),d<n&&(u.width=n-c),e.splice(t,1);break}}return e},i.findHostInstance=Do,i.findHostInstanceWithNoPortals=function(e){return null===(e=function(e){if(!(e=D(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:20===e.tag?e.stateNode.instance:e.stateNode},i.findHostInstanceWithWarning=function(e){return Do(e)},i.flushControlled=function(e){var t=ta;ta|=1;try{zt(99,e)}finally{0===(ta=t)&&(_a(),$t())}},i.flushDiscreteUpdates=function(){0==(49&ta)&&(function(){if(null!==Ia){var e=Ia;Ia=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,Ua(e,Vt())}))}$t()}(),no())},i.flushPassiveEffects=no,i.flushSync=Ha,i.focusWithin=function(e,t){if(!ne)throw Error(o(363));for(t=qn(e=zn(e),t),t=Array.from(t),e=0;e<t.length;){var i=t[e++];if(!le(i)){if(5===i.tag&&ce(i.stateNode))return!0;for(i=i.child;null!==i;)t.push(i),i=i.sibling}}return!1},i.getCurrentUpdateLanePriority=function(){return ht},i.getFindAllNodesFailureDescription=function(e,t){if(!ne)throw Error(o(363));var i=0,r=[];e=[zn(e),0];for(var n=0;n<e.length;){var a=e[n++],s=e[n++],l=t[s];if((5!==a.tag||!le(a))&&(Yn(a,l)&&(r.push($n(l)),++s>i&&(i=s)),s<t.length))for(a=a.child;null!==a;)e.push(a,s),a=a.sibling}if(i<t.length){for(e=[];i<t.length;i++)e.push($n(t[i]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},i.getPublicRootInstance=function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return M(e.child.stateNode);default:return e.child.stateNode}},i.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ko,findFiberByHostInstance:e.findFiberByHostInstance||Mo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t.isDisabled&&t.supportsFiber)try{ct=t.inject(e),dt=t}catch(e){}e=!0}return e},i.observeVisibleRects=function(e,t,i,r){if(!ne)throw Error(o(363));e=Qn(e,t);var n=de(e,i,r).disconnect;return{disconnect:function(){n()}}},i.registerMutableSourceForHydration=function(e,t){var i=t._getVersion;i=i(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i)},i.runWithPriority=function(e,t){var i=ht;try{return ht=e,t()}finally{ht=i}},i.shouldSuspend=function(){return!1},i.unbatchedUpdates=function(e,t){var i=ta;ta&=-2,ta|=8;try{return e(t)}finally{0===(ta=i)&&(_a(),$t())}},i.updateContainer=function(e,t,i,r){var n=t.current,a=Na(),s=La(n);e:if(i){t:{if(x(i=i._reactInternals)!==i||1!==i.tag)throw Error(o(170));var l=i;do{switch(l.tag){case 3:l=l.stateNode.context;break t;case 1:if(nt(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break t}}l=l.return}while(null!==l);throw Error(o(171))}if(1===i.tag){var u=i.type;if(nt(u)){i=st(i,u,l);break e}}i=l}else i=Je;return null===t.context?t.context=i:t.pendingContext=i,(t=fi(a,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gi(n,t),Ba(n,s,a),s},i}})),sH=Kj(((e,t)=>{t.exports=oH()})),lH=Xj(rH()),uH=Xj(sH()),cH=/([+-]?\d+(?:\.\d+)?)apx/g,dH=/^\s*#[0-9a-fA-F]{3}\s*$/,hH=/^\s*#[0-9a-fA-F]{3,6}\s*$/,pH=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,fH=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,gH=/px$/,_H=(e,t)=>!1===t||"number"==typeof e?e:gH.test(e)?Number(e.replace(gH,""))||0:(e=>Number(e).toString()===e)(e)?parseInt(e,10):e,mH=e=>{if("string"==typeof e&&dH.test(e)){let[t,i,r]=e.slice(1);return`#${t}${t}${i}${i}${r}${r}`}return e},vH=(e={},{removePx:t,splitShorthand:i=!1,convertRgbaColor:r=!1,convertDisplayName:n=!1,convertRotate:a=!0}={})=>{let o={};for(let s of Object.keys(e)){let l=e[s];if(i&&["padding","margin"].includes(s)){let e=Array.isArray(l)?l:(null==l?"":l).toString().split(/\s+/),i=null,r=null,n=null,a=null;switch(e.length){case 0:continue;case 1:[i]=e,[r]=e,[n]=e,[a]=e;break;case 2:[i,r]=e,[n,a]=e;break;case 3:[i,r,n]=e,a=r;break;case 4:[i,a,n,r]=e;break;default:continue}Object.assign(o,{[`${s}Top`]:_H(i,t),[`${s}Left`]:_H(r,t),[`${s}Bottom`]:_H(n,t),[`${s}Right`]:_H(a,t)})}else if(i&&"border"===s){let e=(l||"").toString().split(/\s+/);switch(e.length){case 0:continue;case 1:o.borderColor=mH(e[0]);continue;case 2:o.borderWidth=_H(e[0],t),o.borderColor=mH(e[1]);continue;case 3:o.borderWidth=_H(e[0],t),o.borderColor=mH(e[2]);continue;default:continue}}else if(i&&"background"===s&&hH.test(e[s]))o.backgroundColor=mH(e[s]);else if(i&&"background"===s&&(pH.test(e[s])||fH.test(e[s])))o.backgroundColor=e[s];else if(i&&"background"===s&&e[s].includes("linear-gradient"))o.backgroundColor=e[s];else if(r&&"color"===s&&"string"==typeof l&&fH.test(l)){let[t,i,r,n]=fH.exec(l).slice(1,5).map((e=>Number(e))),a=e=>e.toString(16);o.color=`#${a(t)}${a(i)}${a(r)}`,null==e.opacity&&(o.opacity=Number(n))}else if(n&&"display"===s)o.hidden="none"===e[s];else if(a&&"rotate"===s){let t=e[s];o.rotate="string"==typeof t?Number(t.replace("deg",""))||0:t}else o[s]=mH(_H(e[s],t))}return o},yH=e=>(null==e?void 0:e.dataset)?["templateId","id","preventMask"].reduce(((t,i)=>(e.dataset[i]&&(t[i]=e.dataset[i]),t)),{}):{templateId:"",id:"",preventMask:!1},AH={type:"EOF"},bH=e=>{let t=new class{constructor(){this.token=[],this.tokens=[],this.state=null,this.state=this.start}isEOF(e){return e&&"object"==typeof e&&"EOF"===e.type}start(e){return this.isEOF(e)?(this.emmitToken("EOF",AH),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}inLogic(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}inNumber(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}inTplFunc(e){return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&(()=>{let e=0,t=0;for(let i=0,r=this.token.length;i<r;i++){let r=this.token[i];"("===r?e+=1:")"===r&&(t+=1)}return e===t})()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}inTplStr(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}inCompare(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}inQuoteStr(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}emmitToken(e,t){this.tokens.push({type:e,value:t})}push(e){this.state&&(this.state=this.state(e))}end(){this.state&&this.state(AH)}},i=0,r=e.length;for(;i<r;){let r=e[i];i+=1,t.push(r)}return t.end(),t.tokens},EH=e=>"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null,wH=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren),TH=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren),CH=e=>{let t;t="string"==typeof e?bH(e):e;let i=[EH({type:"ROOT"})],r=e=>{let t=e.priority;for(;wH(i[i.length-1])&&TH(i[i.length-2])&&t<=i[i.length-1].priority&&t<=i[i.length-2].priority;){let{children:e}=i[i.length-2];null==e||e.push(i.pop())}},n=e=>{let t=EH(e),n=i[i.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(wH(n))return;TH(n)?n.children.push(t):i.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?wH(n)&&(t.priority>n.priority?((e,t)=>{let r=t.children.pop();r&&e.children.push(r),i.push(e)})(t,n):(r(t),(e=>{let t=i.pop();t&&e.children.push(t),i.push(e)})(t))):"ROOT_END"===t.type&&(r(t),i.push(t))};for(let e=0,i=t.length;e<i;e++)n(t[e]);return i},SH=({type:e,children:t,operator:i},r,n={})=>{let a=e=>SH(t[e],r,n);if("COMPARE"===e){let e=i&&{">":()=>a(0)>a(1),"<":()=>a(0)<a(1),">=":()=>a(0)>=a(1),"<=":()=>a(0)<=a(1),"==":()=>a(0)==a(1),"!=":()=>a(0)!=a(1),"===":()=>a(0)===a(1)}[i];return e?e():null}if("LOGIC"===e){let e=i&&{"&&":()=>a(0)&&a(1),"||":()=>a(0)||a(1)}[i];return e?e():null}let o={NUMBER:()=>Number(t[0]),STR:()=>t[0],TPLSTR:()=>((e,t)=>{let i=e.split("."),r="";return i.forEach((e=>{""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r})(t[0],r),QUESTION:()=>a(0)?a(1):a(2),TPLFUNC:()=>((e,t,i)=>{let r=e.indexOf("("),n=e.substring(0,r),a=e.substring(r+1,e.length-1);if(!i[n])return null;let o=bH(a),s=[],l=[];for(let e=0,t=o.length;e<t;e++){let t=o[e];"COMMA"===t.type||"EOF"===t.type?(s.push(l),l=[]):l.push(t)}let u=[];return s.forEach((e=>{u.push(IH(e,t,i))})),i[n].apply(null,u)})(t[0],r,n)}[e]||null;return o?o():null},IH=(e,t,i)=>{try{let r=CH(e);return SH(r[1],t,Zj(Zj({},(e=>({"#scope":e=>e,"#no":e=>!e,"#bool":e=>!!e,"#add":(e,t)=>e+t,"#sub":(e,t)=>e-t,"#multi":(e,t)=>e*t,"#division":(e,t)=>e/t,"#mod":(e,t)=>e%t,"#toNumber":e=>Number(e),"#toString":e=>String(e),"#ceil":e=>Math.ceil(e),"#floor":e=>Math.floor(e),"#round":e=>Math.round(e),"#substring":(e,t,i)=>e.substring(t,i),"#like":(e,t)=>-1!==e.indexOf(t),"#toFixed":(e,t)=>parseFloat(e).toFixed(t),"#replace":(e,t,i)=>e.replace(t,i),"#replaceAll":(e,t,i)=>e.replaceAll(t,i),"#toLowerCase":e=>e.toLowerCase(),"#len":e=>e.length,"#hansLen":e=>{let t=0;for(let i of e)t+=/[\u4e00-\u9fa5]/.test(i)?2:1;return t/2},"#parse":e=>{try{return JSON.parse(e)}catch(e){return{}}},"#value":(e,t)=>e[t]||{},"#truncate":(e,t)=>{let i="",r=0;for(let n of e){if(r+=/[\u4e00-\u9fa5]/.test(n)?2:1,r>t){i+="...";break}i+=n}return i},"#concat":(...e)=>e.join(""),"#split":(e,t,i)=>null==e?void 0:e.split(t,i),"#abbrNum":e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,"#trimDigit":e=>{let t=e.toString().split(".");if(t.length<2)return e;let i=t.slice(-1)[0];for(;"0"===i[i.length-1];)i=i.slice(0,-1);return t.slice(0,-1).concat(i?[i]:[]).join(".")},"#append":(e,t,i=!1)=>(i&&e.indexOf(t)>-1||e.push(t),e),"#remove":(e,t)=>e.filter((e=>e!==t)),"#include":(e,t)=>e.indexOf(t)>-1,"#indexedArray":e=>{if(e<=0)return[];let t=[];for(let i=0;i<e;i+=1)t.push(i);return t},"#get":iz,"#slice":(e,t,i)=>e.slice(t,i),"#map":(t,i)=>t.map((t=>e.run(i,{$item:t}))),"#reduce":(t,i,r)=>t.reduce(((t,r)=>e.run(i,{$item1:t,$item2:r})),r)}))({run:(e,r={})=>IH(e,Zj(Zj({},t),r),i)})),i))}catch(e){}return null},xH=class extends _e{},PH=(e,t)=>t.reduce(((t,i)=>(t[i]=e[i],t)),{}),DH=e=>e&&"object"==typeof e&&!Array.isArray(e);function RH(e,...t){if(!t.length)return e;let i=t.shift();if(DH(e)&&DH(i))for(let t of Object.keys(i))DH(i[t])?(e[t]||Object.assign(e,{[t]:{}}),RH(e[t],i[t])):Object.assign(e,{[t]:i[t]});return RH(e,...t)}var OH,kH,MH,NH,LH,BH,FH,UH,WH,GH,VH,jH,HH,zH,YH,$H,qH,QH,ZH,KH,XH,JH,ez,tz,iz=(e,t,i)=>{let r="string"==typeof t?t.split("."):t,n=e,a=0;for(;n&&a<r.length;)n=n[r[a]],a+=1;return n||i},rz=(e,t)=>{for(let{path:i,value:r,condition:n=!0}of t){if(!n)continue;let t=r||(i?iz(e,i):"");if(t)return t}return null},nz=e=>e.replace(/[A-Z]/g,(e=>`-${e.toLowerCase()}`)),az=Xj(rH()),oz=Xj(rH()),sz=Xj(rH());(kH=OH||(OH={})).HIDEAD="hideAd",kH.SETSTYLE="setStyle",kH.REPORTIDKEY="reportIdKey",kH.TRIGGEREVENT="triggerEvent",kH.SETEXPRVARS="setExprVar",kH.BATCHSETEXPRVARS="batchSetExprVar",kH.VIDEOTOGGLEMUTED="videoToggleMuted",kH.VIDEOPLAY="videoPlay",kH.VIDEOPAUSE="videoPause",kH.VIDEOSTOP="videoStop",kH.BUTTONSETTEXT="buttonSetText",kH.RELOADAD="reloadAd",kH.REPORTMMDATA="reportMMData",kH.ENDPAGEHIDE="endPageHide",kH.IMAGESETSRC="imageSetSrc",kH.TEXTSETTEXT="textSetText",kH.ANIMATE="animate",kH.TRIGGERBTNCLICK="triggerBtnClick",kH.CHANGEMULTISHOW="changeMultiShow",kH.LANDAD="landAd",kH.EMITCUSTOMMESSAGE="emitCustomMessage",kH.SPLASHSKIPAD="splashSkipAd",kH.ADDCHILDREN="addChildren",kH.REPORTADMONITORDATA="reportAdMonitorData",kH.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic",kH.REPORTENDPAGE="reportEndPage",kH.SHOWANIMATEDONE="showAnimateDone",kH.HIDEANIMATEDONE="hideAnimateDone",kH.FORCEREBUILD="forceRebuild",function(e){e.TAP="tap",e.ANIMATIONEND="animationend",e.HOSTMESSAGE="hostMessage"}(MH||(MH={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SHOWANIMATE="showAnimate",e.HIDEANIMATE="hideAnimate",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView",e.INITIALTEMPLATE="initialTemplate",e.TEMPLATEWILLUPDATE="templateWillUpdate"}(NH||(NH={})),function(e){e.BUTTONTAP="buttonTap"}(LH||(LH={})),function(e){e.RELATIONFETCHED="relationFetched"}(BH||(BH={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(FH||(FH={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(UH||(UH={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(WH||(WH={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(GH||(GH={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(VH||(VH={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.FEEDBACKSINGLETAGTAP="feedbackSingleTagTap",e.SHOWFEEDBACK="showFeedback",e.CONTAINERTAP="containerTap",e.CHECKEXPOSURE="checkExposure",e.APPENTERBACKGROUND="appEnterBackground",e.APPENTERFOREGROUND="appEnterForeground",e.BTNTAP="btnTap",e.REPORTVIDEOPLAY="reportVideoPlay",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.ADVIDEOMUTECHANGE="adVideoMuteChange",e.ADVIDEOLOADFAILED="adVideoLoadFailed",e.ADVIDEOLOADEDMETADATA="adVideoLoadedMetaData",e.ADVIDEORESUMEBTNCLICK="adVideoResumeBtnClick",e.ADVIDEOTIMEUPDATE="adVideoTimeUpdate",e.ADVIDEOENDED="adVideoEnded",e.FETCHRELATIONTEXT="fetchRelationText",e.ENDPAGEINIT="endPageInit",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.FEEDBACKHIDE="feedbackHide",e.TRIGGEREVENT="triggerEvent",e.LANDAD="landAd",e.CHANGEMULTISHOW="changeMultiShow",e.REPORTMMDATA="reportMMData",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic",e.TEMPLATEMESSAGE="templateMessage",e.REPORTIDKEY="reportIdKey",e.CHANGEADBTNTEXT="changedAdBtnText",e.CHANGERELATIONTEXT="changeRelationText",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.SETSTYLE="setStyle",e.SETDARKMODE="setDarkMode",e.OPERATEADVIDEO="operateAdVideo",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.EXPOSURE="exposure",e.VIEWABLEEXPOSURE="viewableExposure",e.HOSTMESSAGE="hostMessage"}(jH||(jH={})),function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(HH||(HH={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(zH||(zH={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(YH||(YH={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}($H||($H={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(qH||(qH={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(QH||(QH={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE",e[e.SINGLETAG=3]="SINGLETAG"}(ZH||(ZH={})),function(e){e[e.COMMON=1]="COMMON"}(KH||(KH={})),function(e){e[e.COMMON=1]="COMMON"}(XH||(XH={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(JH||(JH={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(ez||(ez={})),function(e){e.BASE="base",e.COMPONENT="component",e.HOC="hoc"}(tz||(tz={}));var lz,uz,cz,dz,hz,pz,fz,gz,_z,mz,vz,yz,Az,bz,Ez,wz,Tz,Cz,Sz,Iz,xz,Pz,Dz,Rz=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"];!function(e){e.INNERSTYLE="innerStyle",e.STYLE="style"}(lz||(lz={})),function(e){e[e.kUnknown=0]="kUnknown",e[e.kVideo=1]="kVideo",e[e.kArticle=2]="kArticle"}(uz||(uz={})),function(e){e[e.EXPOSE=1]="EXPOSE",e[e.CLICK=2]="CLICK"}(cz||(cz={})),function(e){e[e.kDeviceUnknow=0]="kDeviceUnknow",e[e.kDeviceAndroid=1]="kDeviceAndroid",e[e.kDeviceIphone=2]="kDeviceIphone",e[e.kDeviceIpad=3]="kDeviceIpad",e[e.kDeviceTv=4]="kDeviceTv"}(dz||(dz={})),function(e){e[e.AppServiceType_NORMAL=1]="AppServiceType_NORMAL",e[e.AppServiceType_GAME=2]="AppServiceType_GAME"}(hz||(hz={})),function(e){e[e.AllOS=0]="AllOS",e[e.Ios=1]="Ios",e[e.Android=2]="Android",e[e.Winphone=3]="Winphone",e[e.JAVA=4]="JAVA",e[e.OS_UNKNOWN=5]="OS_UNKNOWN",e[e.SYMBIAN=6]="SYMBIAN",e[e.S40asha=7]="S40asha",e[e.Webwx=8]="Webwx",e[e.Blackberry=9]="Blackberry",e[e.Windows=10]="Windows"}(pz||(pz={})),function(e){e[e.kUnknownNetwork=0]="kUnknownNetwork",e[e.kWIFI=1]="kWIFI",e[e.k2G=2]="k2G",e[e.k3G=3]="k3G",e[e.k4G=4]="k4G",e[e.k5G=5]="k5G",e[e.kAll=10]="kAll"}(fz||(fz={})),function(e){e[e.kUnknownCarrier=0]="kUnknownCarrier",e[e.kCMCC=1]="kCMCC",e[e.kCUCC=2]="kCUCC",e[e.kCTCC=3]="kCTCC"}(gz||(gz={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CMNET=1]="CMNET",e[e.CMWAP=2]="CMWAP",e[e.THREEGNET=3]="THREEGNET",e[e.THREEGWAP=4]="THREEGWAP",e[e.UNINET=5]="UNINET",e[e.UNIWAP=6]="UNIWAP",e[e.WIFI=7]="WIFI",e[e.CTWAP=8]="CTWAP",e[e.CTNET=9]="CTNET",e[e.THREEGNET_UNINET=10]="THREEGNET_UNINET",e[e.THREEGWAP_UNIWAP=11]="THREEGWAP_UNIWAP",e[e.CTNET_CTWAP=12]="CTNET_CTWAP",e[e.THREEGNET_THREEGWAP_UNINET_UNIWAP=13]="THREEGNET_THREEGWAP_UNINET_UNIWAP",e[e.WIMAX=14]="WIMAX"}(_z||(_z={})),function(e){e[e.Default_Source=0]="Default_Source",e[e.MediaPlatform=1]="MediaPlatform",e[e.WeApp=2]="WeApp",e[e.Moments=3]="Moments",e[e.BizTimeLine=4]="BizTimeLine"}(mz||(mz={})),function(e){e[e.JSON=0]="JSON",e[e.XML=1]="XML"}(vz||(vz={})),function(e){e[e.Unknown_sys=-1]="Unknown_sys",e[e.Windows=0]="Windows",e[e.Ios=1]="Ios",e[e.Android=2]="Android"}(yz||(yz={})),function(e){e[e.Unknown_type=0]="Unknown_type",e[e.Wifi=1]="Wifi",e[e.TwoG=2]="TwoG",e[e.TreeG=3]="TreeG",e[e.FourG=4]="FourG",e[e.FiveG=5]="FiveG",e[e.Ethernet=6]="Ethernet"}(Az||(Az={})),function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(bz||(bz={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(Ez||(Ez={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(wz||(wz={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS"}(Tz||(Tz={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO"}(Cz||(Cz={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(Sz||(Sz={})),function(e){e[e.PRODUCTTYPE_UNKNOWN=0]="PRODUCTTYPE_UNKNOWN",e[e.PRODUCTTYPE_OPEN_PLATFORM_APP_MOB=12]="PRODUCTTYPE_OPEN_PLATFORM_APP_MOB",e[e.PRODUCTTYPE_APPLE_APP_STORE=19]="PRODUCTTYPE_APPLE_APP_STORE",e[e.PRODUCTTYPE_WECHAT=23]="PRODUCTTYPE_WECHAT",e[e.PRODUCTTYPE_JD_URL=25]="PRODUCTTYPE_JD_URL",e[e.PRODUCTTYPE_DP_SHOP=26]="PRODUCTTYPE_DP_SHOP",e[e.PRODUCTTYPE_WECHAT_ARTICLE=29]="PRODUCTTYPE_WECHAT_ARTICLE",e[e.PRODUCTTYPE_WECHAT_SHOP=30]="PRODUCTTYPE_WECHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_URL=31]="PRODUCTTYPE_WECHAT_URL",e[e.PRODUCTTYPE_WECHAT_CARD=36]="PRODUCTTYPE_WECHAT_CARD",e[e.PRODUCTTYPE_WECHAT_LBS=37]="PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_WECHAT_APP=38]="PRODUCTTYPE_WECHAT_APP",e[e.GDT_PRODUCTTYPE_WECHAT_LBS=39]="GDT_PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_LEAD_AD=43]="PRODUCTTYPE_LEAD_AD",e[e.PRODUCTTYPE_WECHAT_MINI_GAME=46]="PRODUCTTYPE_WECHAT_MINI_GAME",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.PRODUCTTYPE_MINI_PROGRAM_WECHAT=52]="PRODUCTTYPE_MINI_PROGRAM_WECHAT"}(Iz||(Iz={})),function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_IN_TEXT_DESC_CARD=841]="CRT_SIZE_IN_TEXT_DESC_CARD",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(xz||(xz={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.CHANNELS=51]="CHANNELS",e[e.JD_URL=25]="JD_URL"}(Pz||(Pz={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(Dz||(Dz={}));var Oz={},kz=class extends sz.Component{constructor(e,t){super(e),this.style={},this.templateStyle={},this.dynamicStyle={},this.adCustomListeners=new Set,this.mounted=!1,this.handleStyleType=[lz.INNERSTYLE],this.componentBehavior=tz.COMPONENT,this.state={},this.handleAdCustomAction=e=>{e.targetid===this.id&&this.doCommonAction(e)},this.adCustomId=e.adCustomId,this.adData=e.adData,this.adDatas=e.adDatas,this.emitter=e.emitter,this.idPrefix=e.idPrefix||"",this.forType=e.forType||JH.NONE,this.forItem=e.forItem,this.forIndex=e.forIndex,this.hostContext=e.hostContext,this.renderContext=e.renderContext,(null==t?void 0:t.componentBehavior)&&(this.componentBehavior=t.componentBehavior);let i=e.template||{};this.template=i,this.id=`${this.adCustomId}-${this.idPrefix}${this.template.id}`;let r=i.options||{};this.options=r,this.data=r.data||{},this.events=r.events||{},this.lifecycle=r.lifecycle||{},this.innerStyles=r.innerStyles||{},this.animations=r.animations||{},this.bubbleEvent=void 0===r.bubbleEvent||r.bubbleEvent;let n=this.getDataValue("_bubbleEvent");void 0!==n&&(this.bubbleEvent=n),this.bindCommonEvents()}componentDidMount(){this.mounted=!0,this.emitComponentLifeCycle("onInit")}componentWillUnmount(){this.emitComponentLifeCycle("onDestroy"),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}bindCommonEvents(){[tz.COMPONENT,tz.BASE].includes(this.componentBehavior)&&this.emitter.on("adCustomAction",this.handleAdCustomAction),this.componentBehavior===tz.COMPONENT&&this.addAdCustomListener((e=>{if(e.action===jH.SETSTYLE){let{id:t,targetid:i,style:r}=e.value||{};i===this.id&&this.setStyle(t,r,{isDynamic:!0,force:!0})}else e.action===jH.HOSTMESSAGE&&this.emitComponentEvent(MH.HOSTMESSAGE,e.value)}))}getCommonSubComponentProps(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adData:this.adData,adDatas:this.adDatas,systemInfo:this.props.systemInfo,isMulti:this.props.isMulti,darkMode:this.props.darkMode,hostContext:this.props.hostContext,renderContext:this.renderContext,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,extraScope:this.props.extraScope}}getDataValue(e,t,i){let r=t||this.data,n=r[`${e}Expr`];return n?this.run(n,null==i?void 0:i.args):r[e]}getDataValueWithDefault(e,t,i,r){let n=i?this.getDataValue(e,i,r):this.getDataValue(e);return void 0===n?t:n}getAdData(){return this.forType===JH.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}getAdDatas(){return this.adDatas||[]}addAdCustomListener(e){let t=t=>{t.adCustomId===this.adCustomId&&(null==e||e(t))};this.adCustomListeners.add(t),this.emitter.on("adCustomEvent",t)}removeAdCustomListener(){for(let e of this.adCustomListeners)this.emitter.off("adCustomEvent",e),this.adCustomListeners.delete(e)}emitAdCustomEvent(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}emitComponentEvent(e,t){let i=this.events[e];(null==i?void 0:i.length)&&this.doActions(i,t||{})}emitComponentLifeCycle(e,t){let i=this.lifecycle[e];(null==i?void 0:i.length)&&this.doActions(i,t)}doActions(e=[],t={}){for(let i of e)i.force&&!i.targetid?this.doCommonAction({args:t,payload:i}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:i.targetid?`${this.adCustomId}-${i.targetid}`:this.id,args:t,payload:i})}doCommonAction(e){let{payload:t,args:i}=e,{delay:r=null,expr:n}=t,a=()=>{var r,a;if(!n||this.run(n,i)){if(this.componentBehavior===tz.BASE)return void("doAction"in this&&"function"==typeof this.doAction&&this.doAction(e));switch(t.action){case OH.SETSTYLE:{let{value:e}=t;if(e.styleExpr)for(let t of Object.keys(e.styleExpr))e.style[t]=this.run(e.styleExpr[t],i);let n=null==(r=e.force)||r;e.forceExpr&&(n=null==(a=this.run(e.forceExpr,i))||a),this.setStyle(e.id,e.style,{isDynamic:!0,force:n});break}case OH.SETEXPRVARS:{let{key:e}=t.value,i=this.getDataValue("value",t.value);this.getExprInnerVars()[e]=i;break}case OH.REPORTIDKEY:{let{id:e,key:i}=t.value;this.emitAdCustomEvent(jH.REPORTIDKEY,{id:e,key:i});break}case OH.BATCHSETEXPRVARS:{let{list:e}=t.value;for(let t of e){let{key:e}=t,i=this.getDataValue("value",t);this.getExprInnerVars()[e]=i}break}case OH.TRIGGEREVENT:{let{detail:e={},eventName:r}=t.value;try{if((null==i?void 0:i.event)&&(e.rawDetail=JSON.stringify(i.event)),t.value.detailExpr)for(let r of Object.keys(t.value.detailExpr)){let n=t.value.detailExpr[r];e[r]=this.run(n,i)}}catch(e){}this.emitAdCustomEvent(jH.TRIGGEREVENT,{eventName:r,detail:e});break}case OH.REPORTMMDATA:{let{data:e,dataExpr:r,id:n}=t.value;if(r)for(let t of Object.keys(r)){let n=r[t];e[t]=this.run(n,i)}this.emitAdCustomEvent(jH.REPORTMMDATA,{id:n,data:e});break}case OH.ANIMATE:{let{id:e,animation:i}=t.value;this.doAnimation({id:e,animationName:i});break}case OH.TRIGGERBTNCLICK:{let e=null==i?void 0:i.event;e&&this.emitAdCustomEvent(jH.BTNTAP,{event:e});break}case OH.LANDAD:{let e=null==i?void 0:i.event;e&&this.emitAdCustomEvent(jH.LANDAD,{index:this.getDataValueWithDefault("index",0,t.value,{args:i}),event:e});break}case OH.SPLASHSKIPAD:{let e=null==i?void 0:i.event;e&&this.emitAdCustomEvent(jH.SPLASHSKIPAD,{event:e});break}case OH.REPORTADMONITORDATA:{let{id:e,key:i,extInfo:r}=t.value;this.emitAdCustomEvent(jH.REPORTADMONITORDATA,{id:e,key:i,extInfo:r});break}case OH.REWARDEDVIDEODYNAMIC:{let{list:e}=t.value;this.emitAdCustomEvent(jH.REWARDEDVIDEODYNAMIC,{list:e});break}case OH.EMITCUSTOMMESSAGE:{let{message:e,args:r}=t.value;e&&this.emitAdCustomEvent(jH.TEMPLATEMESSAGE,{message:e,args:r,actionArgs:i});break}case OH.REPORTENDPAGE:{let{data:e}=t.value;this.emitAdCustomEvent(jH.REPORTENDPAGE,{data:e});break}default:"doAction"in this&&"function"==typeof this.doAction&&this.doAction(e)}}};null!=r?setTimeout(a,r):a()}run(e,t){let i=this.getInnerFunction(),r=Zj(Zj({},this.getScope()),i);return IH(e,t?Zj({$args:t},r):r,i)}getElementById(e){var t;let{renderContext:{hostContainer:i,getRootElement:r},hostContext:{getPropertyOfElement:n}}=this,a=r(this);if(!a)return null;if(!e){let e=null!=(t=n(a,"parent"))?t:null;return e===i?a:e}return"$$"===e?a:this.travelAndFindElementById(e,a)}travelAndFindElementById(e,t){let{getPropertyOfElement:i}=this.hostContext,r=yH(t);if(r.templateId!==this.id)return null;if(r.id===e)return t;let n=i(t,"children");for(let t of n){let i=this.travelAndFindElementById(e,t);if(i)return i}return null}travelAndFindElementByIdDeeply(e,t,i){if(!i)return null;let{getPropertyOfElement:r}=this.hostContext,n=yH(i);if(`${this.adCustomId}-${this.idPrefix}${e}`===n.templateId&&(!t||n.id===t))return i;let a=r(i,"children");for(let i of a){let r=this.travelAndFindElementByIdDeeply(e,t,i);if(r)return r}return null}doAnimation(e){return eH(this,arguments,(function*({id:e,emitEvent:t=!0,animationName:i,animation:r}){let{animate:n}=this.hostContext,a=!r&&i?this.animations[i]:r,o=this.getElementById(e);if(!a||!o)return;let{keys:s,duration:l,easing:u}=a;if(((null==s?void 0:s.length)||0)<2)return;let c=0;for(let t of Object.keys(s)){let i=s[+t],{offset:r,opacity:a,left:d,top:h,rotate:p,scaleX:f,scaleY:g}=i,_=l*r,m={opacity:a,left:d,top:h,rotate:p,scaleWidth:f,scaleHeight:g};if(_<=0)this.setStyle(e,m,{isDynamic:!0,force:!0});else{let t=Zj(Zj({},m),{easing:u,duration:_-c});t.left=m.left,t.top=m.top,yield null==n?void 0:n(o,t),c=_,this.setStyle(e,m,{isDynamic:!0,force:!0})}}i&&t&&(yield this.emitComponentEvent(MH.ANIMATIONEND,{animation:i}))}))}updateInnerStyle(){var e;if(this.innerStyles)for(let t of Object.keys(this.innerStyles)){let i=this.innerStyles[t];if(i.expr&&!this.run(i.expr))continue;let r=Zj({},i.style||{});(null!=(e=this.state.darkMode)?e:this.props.darkMode)&&Object.assign(r,i.darkModeStyle||{}),this.updateStyle(r,t)}}updateOuterStyle(){var e;let t=Zj({},this.template.style||{});(null!=(e=this.state.darkMode)?e:this.props.darkMode)&&Object.assign(t,this.template.darkModeStyle||{}),this.updateStyle(t,"container")}setStyle(e,t,{isDynamic:i,force:r}={isDynamic:!1,force:!1}){let n=i?this.dynamicStyle:this.templateStyle,a=this.getDataValue("_useApx")?this.convertToApxRatio(t):t,{getRootElement:o}=this.renderContext,s=e,l=!1;if("$$"===s){let e=o(this);if(!e)return;s=yH(e).id}if(a){for(let e of Object.keys(a))a[e]=this.convertApxStyle(a[e]);if(s){n[s]||(n[s]={});for(let e of Object.keys(a))null!=a[e]?(a[e]!==n[e]&&(l=!0),n[s][e]=a[e]):delete n[s][e]}}this.mounted&&l&&i&&r&&this.forceUpdate()}convertApxStyle(e){let{renderContext:{ratio:t}}=this;return((e,t)=>(null==e?void 0:e.replace)?e.replace(cH,((e,i)=>`${Number(i*t)}px`)):e)(e,t)}updateStyle(e,t){if(e)for(let i of Object.keys(e)){let r=i,n=e[i];if(i.includes("Expr")){let e=i.split("Expr");2===e.length&&([r]=e,n=this.run(n))}this.setStyle(t,{[r]:n})}}getScope(){var e,t;let{ratio:i}=this.renderContext;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null==(e=this.props)?void 0:e.systemInfo)||{},darkMode:(null==(t=this.props)?void 0:t.darkMode)||!1,ua:"",ratio:i,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:this.props.extraScope||{}}}getExprInnerVars(){return void 0===Oz[this.adCustomId]&&(Oz[this.adCustomId]={}),Oz[this.adCustomId]}getInnerFunction(){let e=this.getExprInnerVars(),{hostContext:t}=this;return{"#getVar":t=>e[t],"#measureText":(e,i)=>"function"==typeof t.getTextWidth?t.getTextWidth(e,i):0}}checkUseApx(){if(this.getDataValue("_useApx"))for(let e of Object.keys(this.style))this.style[e]=this.convertToApxRatio(this.style[e])}convertToApxRatio(e){var t;let{ratio:i}=this.renderContext,r=/(\d+)px/g,n={};for(let a of Object.keys(e))if(null==(t=Rz)?void 0:t.includes(a)){let t=e[a],o=t;"number"==typeof t?o=t*i:"string"==typeof t?o=t.replace(r,((e,t)=>{let r=Number(t);return Number.isNaN(r)?e:r*i+"px"})):Array.isArray(t)&&(null==t?void 0:t.every((e=>"number"==typeof e)))&&(o=t.map((e=>e*i))),n[a]=o}else n[a]=e[a];return n}},Mz=Xj(rH()),Nz=(e,t,i)=>{var r,n,a,o,s,l,u;if(!t)return t;let c={},d=null;if(null==(r=null==t?void 0:t.props)?void 0:r.className){let i=t.props.className.split(/\s+/).filter(Boolean);for(let t of i)e[`.${t}`]&&Object.assign(c,e[`.${t}`])}if((null==(n=null==t?void 0:t.props)?void 0:n.style)&&Object.assign(c,t.props.style),null==(a=null==t?void 0:t.props)?void 0:a.id){let i=(e=>e.split("-").map(((e,t)=>0===t?e:e[0].toUpperCase()+e.slice(1))).join(""))(t.props.id);d=i,e[i]&&Object.assign(c,e[i])}let h=null!=(s=null==(o=t.props)?void 0:o.children)?s:null;null!=h&&"string"!=typeof h&&(h=Mz.default.Children.map(h,(t=>Nz(e,t,i))));let p=Zj({style:vH(c,i.styleOptions)},d?{id:d,uniqueId:`${i.templateInfo.templateId}${i.isItem?"__item":""}-${d}`}:{}),f=Zj(Zj({},i.templateInfo),{preventMask:String(null!=(u=null==(l=t.props)?void 0:l.preventMask)&&u),id:d||""});for(let e of Object.keys(f))p[`data-${nz(e)}`]=f[e];!i.useTextTag&&"text"===t.type&&null!=t.props.value&&null===h&&(h=t.props.value);let g=Array.isArray(h)?h:[h];return null==h?Mz.default.cloneElement(t,p):Mz.default.cloneElement(t,p,g)},Lz=()=>e=>{if(e.prototype.render){let t=e.prototype.render;e.prototype.render=function(){let e=t.call(this);this.handleStyleType.includes(lz.STYLE)&&this.updateOuterStyle(),this.handleStyleType.includes(lz.INNERSTYLE)&&this.updateInnerStyle();let{style:i,templateStyle:r,dynamicStyle:n,renderContext:{styleOptions:a,useTextTag:o}}=this;return Nz((e=>{let t={};for(let i of e)for(let e of Object.keys(i))t[e]||(t[e]={}),Object.assign(t[e],i[e]||{});return t})([i,r,n]),e,{styleOptions:a,isItem:this.componentBehavior===tz.BASE,useTextTag:o,templateInfo:{templateId:this.id}})}}return e},Bz=class extends kz{constructor(e){var t;if(super(e,{componentBehavior:tz.BASE}),this.style={blank:{width:0,height:0},container:{position:"relative"},mask:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},this.handleStyleType=[lz.STYLE],this.isLinearGradient=!1,this.isLinearGradientReverse=!1,this.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",this.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,this.state={showMask:!1,randomKey:""},this.handleCommonClick=e=>{!1===this.bubbleEvent&&(null==e||e.stopPropagation()),this.doActions(this.events.tap,{event:e})},this.isShow=this.getDataValueWithDefault("_isShow",!0),this.state.randomKey=Math.random().toString(16).slice(2,10),this.isShow&&(null==(t=this.template.style)?void 0:t.background)){let e=this.linearGradientRe.exec(this.template.style.background.replace(/ /g,""));if(e){let[t,i]=e.slice(1);this.isLinearGradient=!0,Number(t)>Number(i)&&(this.isLinearGradientReverse=!0)}}this.bindEvents()}bindEvents(){this.addAdCustomListener((e=>{if(e.action===jH.SETSTYLE){let{id:t,targetid:i,style:r}=e.value||{};i===this.id&&!t&&this.setStyle("container",r,{isDynamic:!0,force:!0})}}))}getRandomKey(){return Math.random().toString(16).slice(2,10)}doAction(e){e.payload.action===OH.FORCEREBUILD&&this.setState({randomKey:this.getRandomKey()})}render(){let{renderContext:{isFlattenLayer:e}}=this,{template:t}=this.props,{randomKey:i}=this.state,r=Zj({},this.getCommonSubComponentProps());if(r.randomKey=i,"for"===t.type)return oz.default.createElement(NY,Zj({},r));let n={layout:oz.default.createElement(dY,Zj({},r)),image:oz.default.createElement(mY,Zj({},r)),text:oz.default.createElement(fY,Zj({},r)),feedback:oz.default.createElement(SY,Zj({},r)),button:oz.default.createElement(AY,Zj({},r)),video:oz.default.createElement(wY,Zj({},r)),end:oz.default.createElement(OY,Zj({},r)),carousel:oz.default.createElement(FY,Zj({},r)),countdown:oz.default.createElement(PY,Zj({},r))}[t.type]||null;if(!this.isShow||null===n)return oz.default.createElement("div",{id:"blank"});let a=this.isLinearGradient?oz.default.createElement("img",{id:"linear-gradient",className:this.isLinearGradientReverse?"reverse":"",src:this.linearGradientSrc}):null;if(n&&e()){let e=Array.isArray(n.props.children)?n.props.children:[n.props.children];return(0,oz.cloneElement)(n,{handleCommonClick:this.handleCommonClick},...e)}return oz.default.createElement("div",{id:"container",onClick:this.handleCommonClick},a,n)}},Fz=Bz=Jj([Lz()],Bz),Uz=class extends kz{constructor(e){var t,i,r;super(e),this.style={body:{zIndex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:"48px",width:"122px",lineHeight:"48px",backgroundColor:"#4C4C4C",borderRadius:"12px",fontSize:"17px",color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:"12px",minHeight:"50px"},".full-card-container":{zIndex:1000100,display:"flex",flexDirection:"column",background:"#ffffff",borderRadius:"7px"},".no-interest-logo":{backgroundImage:"url(\"data:image/svg+xml,%3Csvg width='96' height='91' xmlns='http://www.w3.org/2000/svg'%3E %3Cg fill='none' fill-rule='evenodd'%3E %3Cpath d='M-327-540h750V666h-750z'/%3E %3Cpath d='M0-2h96v96H0z'/%3E %3Cpath d='M20 59v5l-8.89 5.927A2 2 0 0 1 8 68.263V18a6 6 0 0 1 6-6h56a6 6 0 0 1 6 6v2h-4v-2a2 2 0 0 0-2-2H14a2 2 0 0 0-2 2v46l8-5zm4 0h2.298v5H24v-5zm48-35h4v2.62h-4V24z' fill='%2307C160'/%3E %3Cpath d='M30 24h54a6 6 0 0 1 6 6v48.263a2 2 0 0 1-3.11 1.664L78 74H30a6 6 0 0 1-6-6V30a6 6 0 0 1 6-6zm0 4a2 2 0 0 0-2 2v38a2 2 0 0 0 2 2h50l6 4V30a2 2 0 0 0-2-2H30z' fill='%2307C160'/%3E %3Cpath d='M53.172 54.485l14.142-14.142 2.828 2.829L56 57.314l-2.828 2.828-11.314-11.314L44.686 46l8.486 8.485z' fill='%2307C160' fill-rule='nonzero'/%3E %3C/g%3E %3C/svg%3E\")",backgroundSize:"cover",width:"48px",height:"45.5px",marginBottom:"24px"},".full-card-feedback-title":{fontSize:"17px",lineHeight:"17px",color:"#2e2e2e",marginBottom:"14px"},".full-card-feedback-tips":{color:"#acacac",lineHeight:"12px",fontSize:"12px"}},this.state={hidden:!1,showFeedback:!1,darkMode:!1},this.handleStyleType=[lz.STYLE,lz.INNERSTYLE],this.handleAdCustomEvent=e=>{switch(e.action){case jH.SETDARKMODE:{let{darkMode:t}=e.value;this.state.darkMode!==t&&this.setState({darkMode:t});break}case jH.HIDEAD:this.hide();break;case jH.ADSHOWHALF:this.emitComponentEvent(NH.SHOWHALF);break;case jH.ADHIDEHALF:this.emitComponentEvent(NH.HIDEHALF);break;case jH.BTNTAP:this.emitComponentEvent(NH.ADBUTTONTAP);break;case jH.EXPOSURE:"value"in e?this.emitComponentEvent(NH.EXPOSURE,e.value):this.emitComponentEvent(NH.EXPOSURE);break;case jH.VIEWABLEEXPOSURE:"value"in e?this.emitComponentEvent(NH.VIEWABLEEXPOSURE,e.value):this.emitComponentEvent(NH.VIEWABLEEXPOSURE);break;case jH.SHOWFEEDBACK:this.showFeedback()}},this.show=e=>new Promise((t=>{this.useAnimate&&!e?this.setState({hidden:!1},(()=>{this.emitComponentEvent(NH.SHOWANIMATE),t()})):this.useAnimate&&e?(this.emitAdCustomEvent(jH.CHECKEXPOSURE),t()):this.setState({hidden:!1},(()=>{this.emitAdCustomEvent(jH.CHECKEXPOSURE),t()}))})),this.hide=e=>new Promise((t=>{this.useAnimate&&!e?(this.emitComponentEvent(NH.HIDEANIMATE),t()):this.setState({hidden:!0},(()=>{this.emitAdCustomEvent(jH.CHECKEXPOSURE),t()}))})),this.showFeedback=()=>{let{useDefaultFeedback:e,useFullAreaFeedBack:t}=this;e&&(this.setState({showFeedback:!0}),setTimeout((()=>{this.setState({showFeedback:!1})}),3e3)),t&&this.setState({showFeedback:!0})},this.handleEnterForeground=()=>{this.emitComponentEvent(NH.APPENTERFOREGROUND),this.emitAdCustomEvent(jH.APPENTERFOREGROUND)},this.handleEnterBackground=()=>{this.emitComponentEvent(NH.APPENTERBACKGROUND),this.emitAdCustomEvent(jH.APPENTERBACKGROUND)},this.handleContainerClick=e=>{this.props.isMulti||this.disableContainerTap||(null==e||e.stopPropagation(),this.emitComponentEvent(NH.CONTAINERTAP),this.emitAdCustomEvent(jH.CONTAINERTAP,{event:e}))},this.useDefaultFeedback=this.getDataValueWithDefault("useDefaultFeedback",!0),this.isFullScreen=this.getDataValueWithDefault("isFullScreen",!1),this.isWidthRequired=this.getDataValueWithDefault("isWidthRequired",!1),this.useStyleHidden=this.getDataValueWithDefault("useStyleHidden",!1),this.isMulti=null!=(i=null==(t=this.template.tplConfig)?void 0:t.isMulti)&&i,this.useAnimate=this.getDataValueWithDefault("useAnimate",!1),this.disableContainerTap=this.getDataValueWithDefault("disableContainerTap",!1),this.state.hidden=!this.getDataValueWithDefault("_isShow",!0),this.state.darkMode=null!=(r=this.props.darkMode)&&r,this.useFullAreaFeedBack=this.getDataValueWithDefault("useFullAreaFeedBack",!1),this.bindEvents(),this.emitComponentEvent(NH.INITIALTEMPLATE)}componentWillUnmount(){super.componentWillUnmount(),this.unbindEvents()}bindEvents(){let{hostContext:e}=this.props;e.onAppEnterForeground(this.handleEnterForeground),e.onAppEnterBackground(this.handleEnterBackground),this.addAdCustomListener(this.handleAdCustomEvent)}unbindEvents(){let{hostContext:e}=this.props;e.offAppEnterForeground(this.handleEnterForeground),e.offAppEnterBackground(this.handleEnterBackground)}getRootData(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1);case"flattenLayer":return this.getDataValueWithDefault("flattenLayer",!1);case"exportAid":return this.getDataValueWithDefault("exportAid",!1);case"enableTimer":return this.getDataValueWithDefault("enableTimer",!0);case"exposureUntilVideoPlay":return this.getDataValueWithDefault("exposureUntilVideoPlay",!1);case"hideAfterLanding":return this.getDataValueWithDefault("hideAfterLanding",!1);case"multiShowList":return this.getDataValueWithDefault("multiShowList",[]);case"hasVideoElement":return this.getDataValueWithDefault("hasVideoElement",!1)}return null}doAction({payload:e,args:t}){var i,r;e.action===OH.HIDEAD?(this.hide(),"value"in e&&e.value.preventClose):e.action===OH.CHANGEMULTISHOW?(null==(i=e.value)?void 0:i.listExpr)?this.emitAdCustomEvent(jH.CHANGEMULTISHOW,{list:this.run(e.value.listExpr,t)}):(null==(r=e.value)?void 0:r.list)?this.emitAdCustomEvent(jH.CHANGEMULTISHOW,{list:e.value.list}):(null==t?void 0:t.list)&&this.emitAdCustomEvent(jH.CHANGEMULTISHOW,{list:t.list}):e.action===OH.SHOWANIMATEDONE?this.show(!0):e.action===OH.HIDEANIMATEDONE&&this.hide(!0)}isShow(){return!this.state.hidden}render(){let{props:{template:e,adPosition:t,systemInfo:i},state:{hidden:r,showFeedback:n,darkMode:a}}=this;this.emitComponentEvent(NH.TEMPLATEWILLUPDATE);let o={display:r?"none":""},s=["left","top"];return"miniprogram"===this.props.systemInfo.hostEnv&&s.push("fixed"),this.isWidthRequired&&s.push("width"),this.isFullScreen?Object.assign(o,{width:i.screenWidth,height:i.screenHeight}):Object.assign(o,PH(t||{},s)),r&&!this.useStyleHidden?az.default.createElement("div",null):az.default.createElement("div",{id:"body",style:o,className:this.isFullScreen?"full-size":""},e&&az.default.createElement("div",{id:"container",className:"wx-ad-custom "+(this.isFullScreen?"full full-size":""),onClick:this.handleContainerClick},e.children.map((e=>az.default.createElement(Fz,Zj(Zj({key:e.id},this.getCommonSubComponentProps()),{template:e,darkMode:a}))))),this.useFullAreaFeedBack&&n&&az.default.createElement("div",{id:"full-card-container",className:"tip-container full-card-container"},az.default.createElement("div",{className:"no-interest-logo"}),az.default.createElement("div",{id:"full-card-feedback-title",className:"full-card-feedback-title"},"感谢你的反馈"),az.default.createElement("div",{id:"full-card-feedback-tips",className:"full-card-feedback-tips"},"我们会努力为你推荐更优质的广告")),this.useDefaultFeedback&&n&&az.default.createElement("div",{id:"tip-container",className:"tip-container"},az.default.createElement("text",{id:"close-tip",className:"video-close-tip",value:"感谢反馈"})))}},Wz=Uz=Jj([Lz()],Uz),Gz=Xj(rH()),Vz=Xj(rH());function jz(e){class t extends kz{constructor(e){super(e,{componentBehavior:tz.HOC}),this.style={mask:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}},this.state={showMask:!1},this.handleStyleType=[],this.containerRef=(0,Vz.createRef)(),this.handleTouchStart=e=>{let{getPropertyOfElement:t}=this.hostContext;if(e._isHandleMaskClick||!this.useMask||!this.containerRef.current)return;let i=e.target,r=this.containerRef.current;for(;i&&i!==r;){let{preventMask:e}=yH(i);if("true"===e)return;i=t(i,"parent")}this.setState({showMask:!0}),e._isHandleMaskClick=!0},this.handleTouchEnd=()=>{this.setState({showMask:!1})},this.eventDelegator=this.renderContext.globalEventDelegator,this.useMask=this.getDataValueWithDefault("_useMask",!1),this.bindEvents()}componentWillUnmount(){this.unbindEvents(),super.componentWillUnmount()}bindEvents(){this.addAdCustomListener((e=>{if(e.action===jH.SETSTYLE){let{id:t,targetid:i,style:r}=e.value||{};i===this.id&&!t&&this.setStyle("container",r,{isDynamic:!0,force:!0})}})),this.eventDelegator.on("touchstart",`${this.id}-container`,this.handleTouchStart),this.eventDelegator.onGlobal("touchend",this.handleTouchEnd),this.eventDelegator.onGlobal("touchcancel",this.handleTouchEnd)}unbindEvents(){this.eventDelegator.off("touchstart",`${this.id}-container`,this.handleTouchStart),this.eventDelegator.offGlobal("touchend",this.handleTouchEnd),this.eventDelegator.offGlobal("touchcancel",this.handleTouchEnd)}getMaskStyle(){let{showMask:e}=this.state;return Zj(Zj({position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.05)"},this.getDataValueWithDefault("_maskStyle",{})),{display:this.useMask&&e?"":"none"})}render(){let{props:t}=this,{forwardedRef:i}=t,r={};return this.useMask&&Object.assign(r,{maskContainerRef:this.containerRef,renderMask:()=>Vz.default.createElement("div",{id:"mask",style:this.getMaskStyle()})}),Vz.default.createElement(e,Zj(Zj(Zj({},t),r),{ref:i}))}}return(0,Vz.forwardRef)(((e,i)=>Vz.default.createElement(t,Zj(Zj({},e),{forwardedRef:i}))))}var Hz,zz,Yz,$z,qz,Qz,Zz,Kz,Xz,Jz,eY,tY,iY,rY,nY,aY,oY,sY,lY,uY,cY=class extends kz{constructor(e){super(e),this.style={".layout-row":{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{display:"flex",position:"absolute",width:"100%",height:"100%"}},this.state={children:[]},this.classRow=!1,this.classColumn=!1,this.containerStyle={},this.baseType=this.options.baseType||zH.COMMON,this.baseType===zH.ROW?this.classRow=!0:this.baseType===zH.COLUMN?this.classColumn=!0:(this.baseType,zH.PROPORTION),this.state.children=this.template.children||[]}doAction({payload:e}){if(e.action===OH.ADDCHILDREN){let{value:t}=e,i=Array.isArray(t)?t:[t],r=[...this.state.children,...i];this.setState({children:r})}}render(){let{children:e}=this.state,{renderMask:t,maskContainerRef:i,handleCommonClick:r,randomKey:n}=this.props,a=["layout"];return this.classRow&&a.push("layout-row"),this.classColumn&&a.push("layout-column"),Gz.default.createElement("div",Zj(Zj({id:"container",className:a.join(" "),ref:i},r?{onClick:r}:{}),{style:this.containerStyle,key:n||""}),e.map((e=>Gz.default.createElement(Fz,Zj(Zj({key:e.id},this.getCommonSubComponentProps()),{template:e})))),null==t?void 0:t())}},dY=jz(cY=Jj([Lz()],cY)),hY=Xj(rH()),pY=class extends kz{constructor(e){super(e),this.style={".text":{color:"#000",fontSize:"14px",wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},this.state={text:""},this.classEllipsis=!1;let t=this.options.baseType||$H.NICKNAME;t===$H.COMMON?this.initCommonComponent():t===$H.NICKNAME?this.initNickNameComponent():t===$H.DESC?this.initDescComponent():t===$H.RELATION&&this.initRelationComponent(),this.classEllipsis=this.getDataValueWithDefault("isEllipsis",!0),this.maxLen=this.getDataValueWithDefault("maxLen",null)}componentDidMount(){super.componentDidMount(),this.options.baseType===$H.RELATION&&this.emitAdCustomEvent(jH.FETCHRELATIONTEXT,{targetid:this.id})}initCommonComponent(){this.state.text=this.getDataValueWithDefault("text","")}initRelationComponent(){this.state.text="",this.addAdCustomListener((e=>{if(e.action===jH.CHANGERELATIONTEXT){let{targetid:t,text:i}=e.value;t===this.id&&this.setState({text:i})}}))}initNickNameComponent(){let e=this.getAdData(),t=[Pz.IOS,Pz.ANDROID].includes(null==e?void 0:e.product_type),i=[Pz.CHANNELS].includes(null==e?void 0:e.product_type),r=e.crt_size===xz.CRT_SIZE_MULTI_POS_GRID,n=[Pz.WE_CHAT_ARTICLE,Pz.GDT_WE_CHAT_ARTICLE].includes(null==e?void 0:e.product_type),a=[Pz.WE_CHAT_SHOP,Pz.JD_URL].includes(null==e?void 0:e.product_type),o=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:r},{path:["crtInfo","0","wxgame_video_card","title"],condition:[xz.CRT_SIZE_REWARD_VEDIO169,xz.CRT_SIZE_REWARD_VEDIO916,xz.CRT_SIZE_VERTICAL_VIDEO_NEW_916,xz.CRT_SIZE_MULTI_POS_VEDIO].includes(null==e?void 0:e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["app_info","app_name"],condition:t},{path:["crtInfo","card_info","title"],condition:i},{path:["biz_info","nick_name"]},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:n},{value:"电商推广",condition:a},{value:"活动推广"}];this.state.text=rz(e,o)}initDescComponent(){let e=this.getAdData(),t=[Pz.IOS,Pz.ANDROID].includes(e.product_type),i=[xz.CRT_SIZE_REWARD_VEDIO169,xz.CRT_SIZE_REWARD_VEDIO916,xz.CRT_SIZE_VERTICAL_VIDEO_NEW_916,xz.CRT_SIZE_MULTI_POS_VEDIO].includes(e.crt_size),r=e.product_type===Pz.MINI_GAME,n=e.product_type===Pz.WE_CHAT,a=[Pz.WE_CHAT_ARTICLE,Pz.GDT_WE_CHAT_ARTICLE].includes(e.product_type),o=[Pz.WE_CHAT_SHOP,Pz.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:i},{path:["wording"],condition:[xz.CRT_SIZE_MULTI_POS_NEW_PIC,xz.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:a},{value:"今日商品推荐",condition:o},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:n},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=rz(e,s)}doAction({payload:e}){e.action===OH.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",e.value)})}render(){let{classEllipsis:e}=this,{renderMask:t,maskContainerRef:i,randomKey:r}=this.props,{text:n}=this.state;return this.classEllipsis&&null!==this.maxLen&&n&&(n=((e,t)=>{let i=0,r=0;for(let n=0;n<e.length;n++)i+=/[\u4e00-\u9fa5]/.test(e[n])?2:1,i<t-1&&(r=n);return i>t?`${e.substring(0,r+1)}...`:e})(n,2*this.maxLen)),hY.default.createElement("div",{id:"container",ref:i,onClick:this.props.handleCommonClick,key:r||""},hY.default.createElement("text",{id:"text",className:"text "+(e?"text-ellipsis":""),value:n}),null==t?void 0:t())}},fY=jz(pY=Jj([Lz()],pY)),gY=Xj(rH()),_Y=class extends kz{constructor(e){super(e),this.style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:"5px"},".image-img-icon":{borderRadius:"50%"}},this.state={imgUrl:""},this.classAppIcon=!1,this.classIcon=!1,this.useBgMode=!1,this.useBgMode=this.getDataValueWithDefault("useBgMode",!1);let t=this.options.baseType||YH.ICON;switch(this.baseType=t,t){case YH.COMMON:this.initCommonComponent();break;case YH.AD:this.initADComponent();break;case YH.ICON:this.initIconComponent()}this.useBgMode}initCommonComponent(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}initIconComponent(){let e=this.getAdData(),t=[Pz.IOS,Pz.ANDROID].includes(e.product_type),i=[Pz.CHANNELS].includes(e.product_type),r=e.crt_size===xz.CRT_SIZE_MULTI_POS_GRID,n=[Pz.WE_CHAT_SHOP,Pz.JD_URL].includes(e.product_type),a=[xz.CRT_SIZE_REWARD_VEDIO169,xz.CRT_SIZE_REWARD_VEDIO916,xz.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;let o=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:r},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:a},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["app_info","icon_url"],condition:t},{path:["crtInfo","card_info","thumb"],condition:i},{path:["biz_info","head_img"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:n},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=rz(e,o)}initADComponent(){var e;let t=this.getAdData(),i=t.image_url;if(!i.startsWith("http"))try{i=(null==(e=t.crtInfo[0])?void 0:e.image_url)||t.crtInfo.image_url||i}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||i}doAction({payload:e}){e.action===OH.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",e.value)})}render(){let{classAppIcon:e,classIcon:t}=this,{renderMask:i,maskContainerRef:r,randomKey:n}=this.props,a=this.baseType===YH.AD,{imgUrl:o}=this.state,s=["image-img"];return e&&s.push("image-img-appicon"),t&&s.push("image-img-icon"),gY.default.createElement("div",{id:"container",className:"image",ref:r,onClick:this.props.handleCommonClick,key:n||""},gY.default.createElement("img",Zj(Zj({id:"img"},a?{"bubble-event":!1}:{}),{className:s.join(" "),src:o})),null==i?void 0:i())}},mY=jz(_Y=Jj([Lz()],_Y)),vY=Xj(rH()),yY=class extends kz{constructor(e){super(e),this.style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:"3px",overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:"16px"},".button-icon":{width:"12px",height:"11px",marginRight:6,backgroundSize:"100% 100%",backgroundPosition:"0 0"}},this.state={buttonText:""},this.isShowIcon=!1,this.handleAdCustomEvent=e=>{e.action===jH.CHANGEADBTNTEXT&&e.value.text&&this.setState({buttonText:e.value.text})},this.handleButtonClick=e=>{null==e||e.stopPropagation(),this.emitAdCustomEvent(jH.BTNTAP,{event:e}),this.emitComponentEvent(LH.BUTTONTAP,{event:e})};let t=this.options.baseType||qH.LOGICCOMMON;this.isShowIcon=this.getDataValueWithDefault("isShowIcon",!1),t===qH.COMMON?this.initCommonComponent():t===qH.LOGICCOMMON&&this.initLogicCommonComponent()}componentWillUnmount(){super.componentWillUnmount()}initCommonComponent(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}initLogicCommonComponent(){var e;let t=this.getAdData(),i=this.getDataValue("buttonText");i?this.state.buttonText=i:t.product_type===Pz.WE_CHAT?this.state.buttonText=(null==(e=null==t?void 0:t.biz_info)?void 0:e.is_subscribed)?"查看":t.button_action.button_text:this.state.buttonText=t.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent)}doAction({payload:e}){e.action===OH.BUTTONSETTEXT&&this.setText(e.value)}setText(e){this.setState({buttonText:this.getDataValue("text",e)})}render(){let{renderMask:e,maskContainerRef:t,randomKey:i}=this.props;return vY.default.createElement("div",{id:"container",className:"button",ref:t,onClick:this.handleButtonClick,key:i||""},this.isShowIcon&&vY.default.createElement("div",{id:"button-icon",className:"button-icon"}),vY.default.createElement("text",{id:"button-text",className:"button-text",value:this.state.buttonText}),null==e?void 0:e())}},AY=jz(yY=Jj([Lz()],yY)),bY=Xj(rH()),EY=class extends kz{constructor(e){super(e),this.style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:"6px",width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:"24px",height:"24px"},".video-voice-box-topleft":{top:"10px",left:"10px"},".video-voice-box-topright":{top:"10px",right:"10px"},".video-voice-box-bottomleft":{bottom:"10px",left:"10px"},".video-voice-box-bottomright":{bottom:"10px",right:"10px"},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:"12px",width:"32px",height:"16px",lineHeight:"16px"},".video-count-down-topleft":{top:"10px",left:"10px"},".video-count-down-topright":{top:"10px",right:"10px"},".video-count-down-bottomleft":{bottom:"10px",left:"10px"},".video-count-down-bottomright":{bottom:"10px",right:"10px"},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:"3px",backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:"3px",backgroundColor:"#07c160"},".video-resume-container":{position:"absolute",top:0,left:0,height:"100%",width:"100%",display:"flex",alignItems:"center",background:"rgba(0,0,0,0.5)",borderRadius:"8px"},".video-resume-btn":{position:"absolute",left:"50%",top:"50%",zIndex:10,MsTransform:"translate(-50%, -50%)",transform:"translate(-50%, -50%)",WebkitTransform:"translate(-50%, -50%)",textAlign:"center",borderRadius:0,MozBorderRadius:0,WebkitBorderRadius:0,color:"#fff",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",zoom:"0.8"},".video-resume-icon":{display:"inline-block",fontSize:0,width:0,height:0,marginTop:"25px",marginLeft:"25px",marginBottom:"25px",borderWidth:"14px 25px",overflow:"hidden",borderColor:"transparent transparent transparent #fff",borderStyle:" dotted dotted dotted solid"}},this.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1,isShowResumeBtn:!1},this.src="",this.poster="",this.isShowVoice=!0,this.isShowProgress=!0,this.isShowCountDown=!1,this.isShowEndPage=!1,this.voicePlacement=null,this.countDownPlacement=null,this.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",this.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",this.currentTime=0,this.videoRef=bY.default.createRef(),this.videoDuration=0,this.objectFit="contain",this.playsInline=!1,this.useResumeBtn=!1,this.toggleMuted=e=>{let t=!this.state.muted;null==e||e.stopPropagation(),this.setState({muted:t}),this.emitComponentEvent(FH.MUTEDCHANGE,{muted:t}),this.emitAdCustomEvent(jH.ADVIDEOMUTECHANGE,{muted:t})},this.handleCustomEvent=e=>{var t;switch(e.action){case jH.APPENTERBACKGROUND:{let i=Math.min(this.currentTime,this.videoDuration);"value"in e&&(null==(t=e.value)?void 0:t.inAdDetail)?this.reportVideoPlay("partial","app_exit",i):this.reportVideoPlay("partial","exit",i);break}case jH.ENDPAGEINIT:this.isShowEndPage=this.getDataValueWithDefault("isShowEndPage",!1),this.isShowEndPage&&this.setState({loop:!1});break;case jH.ENDPAGEHIDE:this.isShowEndPage&&(this.setState({isEndPageShowing:!1}),this.operateVideoPlay("play"));break;case jH.ENDPAGESHOW:this.isShowEndPage&&this.setState({isEndPageShowing:!0});break;case jH.BTNTAP:this.reportVideoPlay(this.currentTime<this.videoDuration?"partial":"complete","land",this.videoDuration);break;case jH.OPERATEADVIDEO:{let{type:t}=e.value;["play","pause","stop"].includes(t)&&this.operateVideoPlay(t);break}}},this.handleError=e=>{this.useResumeBtn&&this.setState({isShowResumeBtn:!0}),this.emitAdCustomEvent(jH.ADVIDEOLOADFAILED,e)},this.handleTimeUpdate=e=>{var t,i;let r=e.duration||(null==(t=e.target)?void 0:t.duration),n=e.position||(null==(i=e.target)?void 0:i.currentTime);if(null==r||null==n)return;let a=Math.min(1,n/r);this.setStyle("videoProgressPlayed",{width:100*a+"%"}),this.isShowCountDown&&this.setState({countDownNumber:`${Math.ceil(r-n)}s`}),this.emitComponentEvent(FH.VIDEOTIMEUPDATE,{event:e,rate:a}),this.emitAdCustomEvent(jH.ADVIDEOTIMEUPDATE,{duration:r,position:n}),this.currentTime=1e3*n,this.videoDuration||(this.videoDuration=1e3*r)},this.handleEnded=e=>{this.emitComponentEvent(FH.VIDEOENDED,{event:e}),this.emitAdCustomEvent(jH.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:this.baseType}}),this.emitAdCustomEvent(jH.ADVIDEOENDED),this.reportVideoPlay("complete","end",this.videoDuration),this.currentTime=0,this.isShowEndPage&&this.emitAdCustomEvent(jH.SHOWENDPAGE,{videoId:this.id}),this.setState({countDownNumber:null})},this.handlePlay=e=>{this.emitComponentEvent(FH.VIDEOPLAY,{event:e}),this.emitAdCustomEvent(jH.ADVIDEOPLAY,{currentTime:this.currentTime,videoDuration:this.videoDuration}),this.reportVideoPlay("partial","start",Math.min(this.currentTime,this.videoDuration))},this.handlePause=e=>{this.emitComponentEvent(FH.VIDEOPAUSE,{event:e}),this.emitAdCustomEvent(jH.ADVIDEOPAUSE,{currentTime:this.currentTime,videoDuration:this.videoDuration}),this.reportVideoPlay("partial","close",Math.min(this.currentTime,this.videoDuration))},this.handleLoadedMetaData=e=>{this.emitAdCustomEvent(jH.ADVIDEOLOADEDMETADATA),this.emitComponentEvent(FH.VIDEOLOADEDMETADATA,{event:e,time:Date.now()})},this.handleResume=e=>{null==e||e.stopPropagation(),this.emitAdCustomEvent(jH.ADVIDEORESUMEBTNCLICK)},this.baseType=this.options.baseType||QH.AD,this.baseType===QH.COMMON?this.initCommonComponent():this.baseType===QH.AD&&this.initADComponent(),this.isShowVoice=this.getDataValueWithDefault("isShowVoice",!0),this.voicePlacement=this.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),this.state.muted=this.getDataValueWithDefault("muted",!0),this.state.loop=this.getDataValueWithDefault("loop",!0),this.isShowProgress=this.getDataValueWithDefault("isShowProgress",!0),this.isShowCountDown=this.getDataValueWithDefault("isShowCountDown",!1),this.countDownPlacement=this.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),this.objectFit=this.getDataValueWithDefault("objectFit","contain"),this.playsInline=this.getDataValueWithDefault("playsInline",!1),this.useResumeBtn=this.getDataValueWithDefault("useResumeBtn",!1),this.useClickMask=this.getDataValueWithDefault("useClickMask",!1),setTimeout((()=>{this.emitComponentEvent(FH.MUTEDCHANGE,{muted:this.state.muted})}),0)}initCommonComponent(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}initADComponent(){let e=this.getAdData();this.src=this.getDataValue("src")||rz(e,[{path:["video_info","videoUrl"]},{path:["video_info","video_url"]}]),this.poster=this.getDataValue("poster")||rz(e,[{path:["video_info","thumbUrl"]},{path:["video_info","thumb_url"]}]),this.videoDuration=1e3*rz(e,[{path:["wx_game_video","short_video","video_duration"]},{path:["crtInfo","0","short_video","video_duration"]}]),this.addAdCustomListener(this.handleCustomEvent),this.emitAdCustomEvent(jH.REPORTTIMEPOINT,{key:"p8"})}doAction({payload:e}){switch(e.action){case OH.VIDEOTOGGLEMUTED:this.toggleMuted();break;case OH.VIDEOPLAY:this.operateVideoPlay("play");break;case OH.VIDEOPAUSE:this.operateVideoPlay("pause");break;case OH.VIDEOSTOP:this.operateVideoPlay("stop")}}operateVideoPlay(e){let{hostContext:{operateVideo:t}}=this;["play","pause","stop","seek"].includes(e)&&(this.setState({isShowResumeBtn:"pause"===e}),this.videoRef.current&&(null==t||t(this.videoRef.current,e)))}reportVideoPlay(e,t,i=0){this.baseType===QH.AD&&this.emitAdCustomEvent(jH.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:i,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}render(){let{src:e,poster:t,isShowVoice:i,mutedIconSrc:r,voiceIconSrc:n,voicePlacement:a,countDownPlacement:o,isShowProgress:s,isShowCountDown:l,objectFit:u,playsInline:c,useResumeBtn:d,useClickMask:h}=this,{muted:p,loop:f,autoplay:g,countDownNumber:_,isEndPageShowing:m,isShowResumeBtn:v}=this.state,{renderMask:y,maskContainerRef:A,randomKey:b}=this.props,E=["video-voice-box"],w=["video-count-down"];return E.push(`video-voice-box-${a}`),w.push(`video-count-down-${o}`),bY.default.createElement("div",{id:"container",className:"video",ref:A,onClick:this.props.handleCommonClick,key:b||""},bY.default.createElement("video",{id:"video",className:"video-context",ref:this.videoRef,src:e,poster:t,controls:!1,muted:p,loop:f,autoPlay:g,autoInsert:!1,playsInline:c,underGameView:!1,showProgress:!1,showPlayBtn:!1,showCenterPlayBtn:!1,showFullscreenBtn:!1,enableProgressGesture:!1,objectFit:u,onTimeUpdate:this.handleTimeUpdate,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onError:this.handleError,onLoadedMetadata:this.handleLoadedMetaData},h&&bY.default.createElement("div",{className:"video-click-mask",id:"video-click-mask"})),d&&v&&bY.default.createElement("div",{className:"video-resume-container",onClick:this.handleResume},bY.default.createElement("a",{className:"video-resume-btn",id:"video-resume-btn"},bY.default.createElement("i",{id:"video-resume-icon",className:"video-resume-icon"}," "))),!m&&i&&bY.default.createElement("div",{id:"videovoicebox",className:E.join(" "),onClick:this.toggleMuted,preventMask:!0},bY.default.createElement("img",{src:p?r:n,id:"video-voice-img",className:"video-voice-icon"})),s&&bY.default.createElement("div",{id:"video-progress",className:"video-progress"},bY.default.createElement("div",{id:"video-progress-played",className:"video-progress-played"})),!m&&l&&_&&bY.default.createElement("text",{id:"video-count-down",className:w.join(" "),value:_}),null==y?void 0:y())}},wY=jz(EY=Jj([Lz()],EY)),TY=Xj(rH()),CY=class extends kz{constructor(e){super(e),this.style={".feedback-icon":{width:"6px",height:"4px",marginLeft:"2px",position:"relative"},".close-icon":{width:"6px",height:"6px",marginLeft:"2px",position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".show":{display:""},".hide":{display:"none"},".feedback-hot-click":{display:"none"},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:"2px"},".feedback-tag-text":{fontSize:"10px",height:"12px",lineHeight:"12px",color:"#fff"},".feedback-list":{position:"absolute",width:"134px",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:"1px",borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:"4px",zIndex:1000011},".feedback-list-bottomleft":{top:"26px",left:"6px"},".feedback-list-bottomright":{top:"26px",right:"6px"},".feedback-list-topleft":{bottom:"26px",left:"6px"},".feedback-list-topright":{bottom:"26px",right:"6px"},".feedback-btn":{position:"relative",width:"132px",height:"32px",lineHeight:"32px",color:"#566a97",fontSize:"12px",opacity:.9,textAlign:"center",zIndex:1000012},".feedback-title":{color:"#000",zIndex:1000012},".feedback-line":{width:"100px",height:"1px",opacity:.03,backgroundColor:"#000",zIndex:1000012}},this.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},this.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",this.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",this.handleTagClick=e=>{if(null==e||e.stopPropagation(),this.baseType===ZH.SIMPLE)return this.handleSimpleTagClick(e);if(this.baseType===ZH.SINGLETAG)return this.handleSingleTagClick(e);let{isShowFeedback:t,isShowFeedbackMenu:i}=this.state;t||i?this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(this.setState({isShowFeedback:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitAdCustomEvent(jH.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),this.emitComponentEvent(UH.TAGTAP,{event:e}))},this.handleDislikeClick=e=>{null==e||e.stopPropagation(),this.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitComponentEvent(UH.DISLIKETAP,{event:e}),this.emitAdCustomEvent(jH.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"不感兴趣"})},this.handleFeedbackBtnClick=e=>{null==e||e.stopPropagation(),this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(UH.FEEDBACKBTNTAP,{event:e}),this.emitAdCustomEvent(jH.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),this.emitAdCustomEvent(jH.FEEDBACKBTNTAP)},this.handleAdCustomEvent=e=>{e.action===jH.FEEDBACKHIDE&&this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1})},this.checkUseApx(),this.baseType=this.options.baseType||ZH.COMMON,this.isShowFeedbackTitle=this.getDataValueWithDefault("isShowFeedbackTitle",!0),this.useStyleHidden=this.getDataValueWithDefault("useStyleHidden",!1),this.addAdCustomListener(this.handleAdCustomEvent)}updateMenuPosition(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}handleSimpleTagClick(e){this.emitAdCustomEvent(jH.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(jH.HIDEAD),this.emitComponentEvent(UH.TAGTAP,{event:e})}handleSingleTagClick(e){this.emitAdCustomEvent(jH.FEEDBACKSINGLETAGTAP,{event:e,tagElement:this.getElementById("feedbackTagContainer"),feedbackMenuStyle:this.options.feedbackMenuStyle})}handleDislikeReasonClick(e,t){null==t||t.stopPropagation(),this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(UH.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(jH.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});let i=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===i?this.emitAdCustomEvent(jH.SHOWFEEDBACK):"hide"===i&&this.emitAdCustomEvent(jH.HIDEAD)}render(){let{isShowFeedback:e,isShowFeedbackMenu:t,position:i}=this.state,{useStyleHidden:r}=this,{renderMask:n,maskContainerRef:a,randomKey:o}=this.props,s=["feedback-list"],l=["feedback-list"];i&&(s.push(`feedback-list-${i.toLowerCase()}`),l.push(`feedback-list-${i.toLowerCase()}`)),r&&(s.push(e?"show":"hide"),l.push(t?"show":"hide"));let u=this.getDataValue("feedbackIcon")||(this.baseType===ZH.SIMPLE?this.closeIconSrc:this.feedbackIconSrc),c=this.baseType===ZH.SIMPLE?"close-icon":"feedback-icon";return TY.default.createElement("div",{id:"container",className:"feedback","bubble-event":"false",ref:a,onClick:this.props.handleCommonClick,key:o||""},TY.default.createElement("div",{id:"feedback-tag-container",className:"feedback-tag-container",onClick:this.handleTagClick,preventMask:!0},TY.default.createElement("div",{id:"feedback-hot-click",className:"feedback-hot-click"}),TY.default.createElement("text",{id:"feedback-tag",className:"feedback-tag-text",value:"广告"}),TY.default.createElement("img",{id:"feedback-icon",className:c,src:u})),(e||r)&&TY.default.createElement("div",{id:"menu1",key:"menu1",className:s.join(" ")},this.isShowFeedbackTitle&&TY.default.createElement("text",{className:"feedback-btn feedback-title",value:"由赞助商提供的内容"}),TY.default.createElement("div",{className:"feedback-line"}),TY.default.createElement("text",{id:"dislike",className:"feedback-btn",onClick:this.handleDislikeClick,value:"不感兴趣",preventMask:!0}),TY.default.createElement("div",{className:"feedback-line"}),TY.default.createElement("text",{id:"feedback-btn",className:"feedback-btn",onClick:this.handleFeedbackBtnClick,value:"投诉",preventMask:!0})),(t||r)&&TY.default.createElement("div",{id:"menu2",key:"menu2",className:l.join(" ")},TY.default.createElement("text",{id:"isdismatch",className:"feedback-btn",onClick:this.handleDislikeReasonClick.bind(this,1),value:"与我无关",preventMask:!0}),TY.default.createElement("div",{className:"feedback-line"}),TY.default.createElement("text",{id:"isduplicate",className:"feedback-btn",onClick:this.handleDislikeReasonClick.bind(this,5),value:"重复收到多次",preventMask:!0}),TY.default.createElement("div",{className:"feedback-line"}),TY.default.createElement("text",{id:"isbadad",className:"feedback-btn",onClick:this.handleDislikeReasonClick.bind(this,4),value:"内容太差",preventMask:!0})),null==n?void 0:n())}},SY=jz(CY=Jj([Lz()],CY)),IY=Xj(rH()),xY=class extends kz{constructor(e){super(e),this.style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},this.state={countdownValue:"5"},this.children=[],this.handleAdCustomEvent=e=>{if(e.action===jH.CHANGECOUNTDOWN){let t=2===e.value.value.toString().length?18:11;this.setStyle("countdownvalue",{width:t}),this.setState({countdownValue:e.value.value})}},this.children=this.getChildren(),this.updateInnerStyle(),this.addAdCustomListener(this.handleAdCustomEvent)}getChildren(){let e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];let t=this.getAdData(),i={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:OH.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},i)}}],dislikeReasonTap:[{action:OH.TRIGGEREVENT,value:{eventName:WH.VIDEODISLIKE}}]},data:{}}};let n=this.getDataValue("childrenConf");if(n)for(let e of Object.keys(n))r[e]&&RH(r[e],n[e]);let a=[];return a=[r.feedBack],3===e?a.concat(this.template.children||[]):a}render(){let{children:e,state:{countdownValue:t}}=this,{renderMask:i,maskContainerRef:r,randomKey:n}=this.props;return IY.default.createElement("div",{id:"container",className:"countdown",ref:r,onClick:this.props.handleCommonClick,key:n||""},e.map((e=>IY.default.createElement(Fz,Zj(Zj({},this.getCommonSubComponentProps()),{template:e})))),IY.default.createElement("div",{className:"countdown-right"},IY.default.createElement("div",{id:"split-line",className:"split-line"}),IY.default.createElement("div",{id:"countdown-container",className:"countdown-container"},IY.default.createElement("text",{className:"countdown-value",id:"countdownvalue",value:t}),IY.default.createElement("text",{className:"countdown-text",value:"秒"}))),null==i?void 0:i())}},PY=jz(xY=Jj([Lz()],xY)),DY=Xj(rH()),RY=class extends kz{constructor(e){super(e),this.style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5},".refresh-play":{fontSize:"14px",height:"18px",lineHeight:"18px",display:"none",color:"#d8d8d8"}},this.state={isShowEndPage:!1},this.children=[],this.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",this.showTime=0,this.backgroundImage="",this.exposured=!1,this.viewableExposured=!1,this.viewableExposureTimer=null,this.useEndDefaultFeedback=!0,this.handleAdCustomListener=e=>eH(this,[e],(function*({action:e}){switch(e){case jH.SHOWENDPAGE:yield this.setState({isShowEndPage:!0}),this.emitAdCustomEvent(jH.ENDPAGESHOW),this.showTime=Date.now(),!this.exposured&&this.reportEndPageExposure(),this.exposured=!0,this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)),this.emitComponentEvent(WH.SHOW);break;case jH.APPENTERBACKGROUND:this.state.isShowEndPage&&this.reportEndPageDuration();break;case jH.APPENTERFOREGROUND:this.state.isShowEndPage&&(this.showTime=Date.now());break;case jH.ADSHOWHALF:this.state.isShowEndPage&&(this.showTime=Date.now(),this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)));break;case jH.ADHIDEHALF:this.state.isShowEndPage&&(this.reportEndPageDuration(),this.viewableExposureTimer&&(clearTimeout(this.viewableExposureTimer),this.viewableExposureTimer=null))}})),this.handleReplay=e=>{null==e||e.stopPropagation(),this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(jH.ENDPAGEHIDE),this.emitComponentEvent(WH.HIDE),this.reportEndPage({act_type:1003}),this.emitComponentEvent(WH.REPLAY)},this.handleContainerClick=e=>{var t,i;this.reportEndPage({act_type:1002}),null==(i=(t=this.props).handleCommonClick)||i.call(t,e)};let t=this.getAdData();this.cardInfo=iz(t,["crtInfo",0,"card_info"],"")||iz(t,["crtInfo","card_info"],"")||{},this.showFreshIcon=this.getDataValueWithDefault("showFreshIcon",!0);let{end_page_type:i}=this.cardInfo;!i&&!this.getDataValueWithDefault("forceEnabled",!1)||(this.backgroundImage=this.cardInfo.head_bg_img,this.refreshIconSrc=this.getDataValueWithDefault("refreshIconSrc","https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png"),this.useEndDefaultFeedback=this.getDataValueWithDefault("useEndDefaultFeedback",!0),this.setStyle("refresh",{padding:"13apx 12apx"}),this.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),this.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),this.children=this.getChildren(),this.bindEvent(),setTimeout((()=>{this.emitAdCustomEvent(jH.ENDPAGEINIT)}),0))}bindEvent(){this.addAdCustomListener(this.handleAdCustomListener)}componentWillUnmount(){super.componentWillUnmount(),this.removeAdCustomListener()}reportEndPageDuration(){!this.showTime||(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}reportEndPageExposure(e=!1){let t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}reportEndPage(e){this.emitAdCustomEvent(jH.REPORTENDPAGE,{data:e})}doAction({payload:e}){e.action===OH.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(jH.ENDPAGEHIDE),this.emitComponentEvent(WH.HIDE))}getChildren(){let e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];let t=this.getAdData(),i={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},n=this.template.id;r.feedBack={type:"feedback",id:`${n}_endPageFeedback`,style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:OH.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},i)}}],dislikeReasonTap:[{action:OH.TRIGGEREVENT,value:{eventName:WH.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:`${n}_endPageIconBig`,style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:`${n}_endPageNickBig`,style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:`${n}_endPageDescSmall`,style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:`${n}_endPageButton`,style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:OH.REPORTENDPAGE,value:{data:{act_type:1001}}}]}}},r.iconSmall={type:"image",id:`${n}_endPageIconSmall`,style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:`${n}_endPageNickSmall`,style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:`${n}_endPageLayoutSmall`,style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:`${n}_endPageDescBig`,style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};let a=this.getDataValue("childrenConf");if(a)for(let e of Object.keys(a))r[e]&&RH(r[e],a[e]);let o=[];return this.useEndDefaultFeedback&&o.push(r.feedBack),o=2===this.cardInfo.end_page_type?o.concat([r.layoutSmall,r.descBig,r.button]):o.concat([r.iconBig,r.nickBig,r.descSmall,r.button]),3===e?o.concat(this.template.children||[]):o}render(){let{backgroundImage:e,children:t,refreshIconSrc:i,showFreshIcon:r,state:{isShowEndPage:n}}=this,{renderMask:a,maskContainerRef:o,randomKey:s}=this.props;return DY.default.createElement("div",{id:"container",className:"end",onClick:this.handleContainerClick,ref:o,key:s||"",style:{display:n?"flex":"none"}},e&&DY.default.createElement("img",{id:"backgroundImage",src:e}),t.map((e=>DY.default.createElement(Fz,Zj(Zj({key:e.id},this.getCommonSubComponentProps()),{template:e})))),r&&DY.default.createElement("div",{id:"refresh",className:"end-refresh",onClick:this.handleReplay},DY.default.createElement("img",{id:"refresh-icon",className:"end-refresh-icon",src:i}),DY.default.createElement("div",{id:"refresh-play",className:"refresh-play"},"重播")),null==a?void 0:a())}},OY=RY=Jj([Lz()],RY),kY=Xj(rH()),MY=class extends kz{constructor(e){super(e),this.forType=this.options.baseType||JH.COMMON,this.forArr=this.getDataValueWithDefault("forArr",[]),this.forType===JH.ADS&&(this.forArr=this.getAdDatas())}render(){let{template:e}=this.props,t=this.forArr.map(((t,i)=>e.children.map((r=>kY.default.createElement(Fz,Zj(Zj({},this.getCommonSubComponentProps()),{key:`${r.id}-${i}`,idPrefix:this.idPrefix+(e.id||"")+i.toString(),forType:this.forType,forItem:t,template:r,forIndex:i})))))).reduce(((e,t)=>[...e,...t]),[]);return kY.default.createElement(kY.default.Fragment,null,t)}},NY=MY=Jj([Lz()],MY),LY=Xj(rH()),BY=class extends kz{constructor(e){super(e),this.style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},this.isViewable=!1,this.isPlaying=!1,this.animated=!1,this.timerSet=new Set,this.handleMaskClick=e=>{null==e||e.stopPropagation();let t,i=null!=this.moveTime?(Date.now()-this.moveTime)/this.duration*this.size:0;t=this.animated?-this.animateCount*this.size+i:-i;let r=(this.isCol?e.pageY:e.pageX)-t,n=Math.floor(r/this.size);this.emitComponentEvent(GH.UNITTAP,{index:n,event:e})},this.handleAdCustomEvent=({action:e})=>{[jH.ADSHOWHALF].includes(e)?(this.isViewable=!0,this.autoplay()):[jH.ADHIDEHALF].includes(e)&&(this.isViewable=!1,this.clearTimers())},this.moveTime=null,this.baseType=this.options.baseType||ez.ROWLOOP,this.showCount=this.getDataValueWithDefault("showCount",0),this.allCount=this.getDataValueWithDefault("allCount",0),this.animateCount=this.allCount-this.showCount,this.size=Number(this.convertApxStyle(this.getDataValueWithDefault("size","0px")).replace("px",""))||0,this.duration=this.getDataValueWithDefault("duration",1500),this.disabled=this.getDataValueWithDefault("disabled",!1),this.allIndexList=Array.from({length:this.allCount}).map(((e,t)=>t)),this.isCol=this.baseType===ez.COLUMNLOOP,this.baseType===ez.ROWLOOP?this.initCarousel("width"):this.baseType===ez.COLUMNLOOP&&this.initCarousel("height")}componentWillUnmount(){super.componentWillUnmount(),this.clearTimers(),this.isViewable=!1}initCarousel(e){this.setStyle("container",{[e]:this.showCount*this.size}),this.setStyle("list",{[e]:this.allCount*this.size}),this.addAdCustomListener(this.handleAdCustomEvent)}clearTimers(){for(let e of this.timerSet)clearTimeout(e)}autoplay(){return eH(this,null,(function*(){if(!this.isViewable||this.isPlaying)return;let e=this.baseType===ez.ROWLOOP?"left":"top";if(this.disabled)this.emitComponentEvent(GH.SHOWCHANGE,{list:this.allIndexList.slice(0,this.showCount)||[]}),this.isPlaying=!1;else if(this.animateCount<=0)this.emitComponentEvent(GH.SHOWCHANGE,{list:this.allIndexList||[]}),this.isPlaying=!1;else{this.isPlaying=!0;for(let e=0;e<this.animateCount;e+=1){let{animated:t}=this,i=setTimeout((()=>{this.timerSet.delete(i);let r=t?this.allIndexList.slice(this.allCount-e-this.showCount,this.allCount-e):this.allIndexList.slice(e,e+this.showCount);this.emitComponentEvent(GH.SHOWCHANGE,{list:r})}),e*this.duration);this.timerSet.add(i)}this.moveTime=Date.now();try{yield this.doAnimation({id:"list",emitEvent:!1,animation:{keys:[{offset:0,[e]:this.animated?-1*this.animateCount*this.size:0},{offset:1,[e]:this.animated?0:-1*this.animateCount*this.size}],duration:this.duration*this.animateCount,easing:"linear"}})}catch(e){}this.animated=!this.animated,this.isPlaying=!1,this.moveTime=null;let t=setTimeout((()=>{this.timerSet.delete(t),this.autoplay()}),this.duration/4);this.timerSet.add(t)}}))}render(){let{template:{children:e}}=this.props,{renderMask:t,maskContainerRef:i,randomKey:r}=this.props,{baseType:n,allCount:a,showCount:o}=this;if(!(e&&e.length&&a&&o))return LY.default.createElement("div",{id:"blank"});let s=["carousel-list",n===ez.ROWLOOP?"carousel-row":"carousel-col"];return LY.default.createElement("div",{id:"container",className:"carousel",ref:i,onClick:this.props.handleCommonClick,key:r||""},LY.default.createElement("div",{id:"mask",className:"carousel-mask",onClick:this.handleMaskClick}),LY.default.createElement("div",{id:"list",className:s.join(" ")},e.map((e=>LY.default.createElement(Fz,Zj(Zj({key:e.id},this.getCommonSubComponentProps()),{template:e}))))),null==t?void 0:t())}},FY=jz(BY=Jj([Lz()],BY)),UY=Xj(rH()),WY=()=>UY.default.createElement("div",null),GY=class{constructor(e){var t;this.adCustomIdInc=0,this.containerMap=new WeakMap,"renderer"in e?(((e,t)=>{if(!e)throw new Error(t)})(((e,t)=>{for(let i of t)if(null==(null==e?void 0:e[i]))return!1;return!0})(e.renderer,["render","unmount","findDOMNode"]),"options.renderer achieved uncompletely"),this.renderer=e.renderer):this.renderer=new class{constructor(e){this.presetHostConfig={shouldSetTextContent:()=>!1,getRootHostContext:()=>null,getChildHostContext:e=>e,getPublicInstance:e=>e,prepareForCommit:()=>null,resetAfterCommit:()=>{},preparePortalMount:()=>{},supportsMutation:!0,now:Date.now,scheduleTimeout:(e,t)=>setTimeout(e,t),cancelTimeout:e=>clearTimeout(e),noTimeout:-1,isPrimaryRenderer:!1,commitMount:()=>{}},this.renderer=(0,uH.default)(Zj(Zj({},this.presetHostConfig),e))}render(e,t){return new Promise(((i,r)=>{try{t._rootContainer||(t._rootContainer=this.renderer.createContainer(t,!1,!1)),this.renderer.updateContainer(e,t._rootContainer,null,(()=>i()))}catch(e){r(e)}}))}unmount(e){return new Promise(((t,i)=>{if(e._rootContainer){try{this.renderer.updateContainer(null,e._rootContainer,null,(()=>t()))}catch(e){i(e)}delete e._rootContainer}}))}findDOMNode(e){return null==e?null:this.renderer.findHostInstance(e)}}(e.hostConfig),this.hostContext=e.hostContext,this.useTextTag=null==(t=e.useTextTag)||t,this.globalEventDelegator=new class{constructor(e){this.options=e,this.handlers={},this.sep="<^.^>",this.handleEvent=e=>t=>{if(!t.target||!this.options.getPropertyOfElement)return;let i=!1,r=!1,n=Zj(Zj({},t),{stopPropagation:()=>{i=!0},stopImmediatePropagation:()=>{r=!0}}),a=t.target;for(;a&&!i;){let{templateId:t,id:i}=yH(a),o=`${e}${this.sep}${t}-${i}`;if(this.handlers[o])for(let e of this.handlers[o])r||e(n);a=this.options.getPropertyOfElement(a,"parent")}let o=`${e}${this.sep}__global`;if(this.handlers[o]&&!i)for(let e of this.handlers[o])r||e(n)},this.handleTouchStart=this.handleEvent("touchstart"),this.handleTouchMove=this.handleEvent("touchmove"),this.handleTouchEnd=this.handleEvent("touchend"),this.handleTouchCancel=this.handleEvent("touchcancel"),this.handleClick=this.handleEvent("click"),e.onGlobalEvent&&e.getPropertyOfElement&&(e.onGlobalEvent("touchstart",this.handleTouchStart),e.onGlobalEvent("touchmove",this.handleTouchMove),e.onGlobalEvent("touchend",this.handleTouchEnd),e.onGlobalEvent("touchcancel",this.handleTouchCancel),e.onGlobalEvent("click",this.handleClick))}on(e,t,i){var r;let n=`${e}${this.sep}${t}`;(r=this.handlers)[n]||(r[n]=new Set),this.handlers[n].add(i)}onGlobal(e,t){var i;let r=`${e}${this.sep}__global`;(i=this.handlers)[r]||(i[r]=new Set),this.handlers[r].add(t)}off(e,t,i){let r=`${e}${this.sep}${t}`;this.handlers[r]&&this.handlers[r].delete(i)}offGlobal(e,t){let i=`${e}${this.sep}__global`;this.handlers[i]&&this.handlers[i].delete(t)}destroy(){this.options.offGlobalEvent&&(this.options.offGlobalEvent("touchstart",this.handleTouchStart),this.options.offGlobalEvent("touchmove",this.handleTouchMove),this.options.offGlobalEvent("touchend",this.handleTouchEnd),this.options.offGlobalEvent("touchcancel",this.handleTouchCancel),this.options.offGlobalEvent("click",this.handleClick)),this.handlers={}}}({onGlobalEvent:e.hostContext.onGlobalEvent,offGlobalEvent:e.hostContext.offGlobalEvent,getPropertyOfElement:e.hostContext.getPropertyOfElement})}generateCustomId(){return this.adCustomIdInc+=1,`AD_CUSTOM_${this.adCustomIdInc}`}getConvertRatio(e,t=0,i){let{width:r}=i||{};null==r&&(r=t),r=Number(r);let n=e.minWidth||0,a=e.maxWidth||0,o=e.baseWidth||375,s=Math.min(t,Math.max(n,r));return a&&(s=Math.min(s,a)),0===s?{ratio:1,width:null}:{ratio:s/o,width:s}}render(e){return eH(this,null,(function*(){if("isEmpty"in e&&e.isEmpty)return this.renderer.render(lH.default.createElement(WY,null),e.hostContainer);let{hostContainer:t,adData:i,template:r,position:n,systemInfo:a,isMulti:o,darkMode:s,adCustomId:l,styleOptions:u,flattenLayer:c,ref:d,extraScope:h}=e,{adDatas:p}=e,{hostContext:f}=this,g=l||this.generateCustomId(),_=new xH({maxListeners:1e3}),m=lH.default.createRef(),{ratio:v,width:y}=this.getConvertRatio(r.tplConfig||{},a.screenWidth,n);p||(p=[i]),null!=y&&null!=(null==n?void 0:n.width)&&(n.width=y),null==d||d({emitEvent:(e,t)=>{_.emit("adCustomEvent",Zj({adCustomId:g,action:e},t?{value:t}:{}))},onEvent:e=>(_.on("adCustomEvent",e),e),offEvent:e=>{_.off("adCustomEvent",e)},getRootData:e=>{var t;return null==(t=m.current)?void 0:t.getRootData(e)},getCustomId:()=>g,getElementById:(e,t)=>m.current&&m.current.travelAndFindElementByIdDeeply(e,t,this.renderer.findDOMNode(m.current))||null,update:e=>eH(this,null,(function*(){let i=(e=>Object.keys(e).reduce(((t,i)=>Zj(Zj({},t),null==e[i]?{}:{[i]:e[i]})),{}))(PH(e,["adData","adDatas","template","position","systemInfo","isMulti","darkMode","extraScope"]));m.current&&(yield this.renderer.render(lH.default.createElement(Wz,Zj({},Zj(Zj(Zj({},m.current.props),{ref:m}),i))),t))})),getRootElement:()=>m.current?this.renderer.findDOMNode(m.current):null,show:()=>eH(this,null,(function*(){var e;yield null==(e=m.current)?void 0:e.show()})),hide:()=>eH(this,null,(function*(){var e;yield null==(e=m.current)?void 0:e.hide()})),isShow:()=>{var e;return(null==(e=m.current)?void 0:e.isShow())||!1}}),this.containerMap.set(t,{emitter:_}),yield this.renderer.render(lH.default.createElement(Wz,Zj({},{adData:i,adDatas:p,isMulti:o||!1,systemInfo:a,position:n,adCustomId:g,darkMode:s,template:r,emitter:_,hostContext:f,extraScope:h,ref:m,renderContext:{hostContainer:t,ratio:v,useTextTag:this.useTextTag,isFlattenLayer:()=>{var e,t;return null!=c?c:"root"===r.type&&null!=(null==(t=null==(e=null==r?void 0:r.options)?void 0:e.data)?void 0:t.flattenLayer)&&r.options.data.flattenLayer},styleOptions:u||{},getRootElement:e=>this.renderer.findDOMNode(e),globalEventDelegator:this.globalEventDelegator}})),t)}))}unmount(e){let{hostContainer:t}=e;if(!this.containerMap.has(t))return;let{emitter:i}=this.containerMap.get(t);return i.removeAllListeners(),this.renderer.unmount(t)}destroy(){this.globalEventDelegator.destroy()}};!function(e){e.opacity="opacity",e.left="left",e.top="top"}(Hz||(Hz={})),function(e){e.rotate="rotate",e.scaleX="scaleX",e.scaleY="scaleY"}(zz||(zz={}));var VY,jY=!1,HY=(Yz=yW("handleAdDataDone"),$z=AW("handleAdDataError"),qz=yW("handleAdDataDone"),Qz=AW("handleAdDataError"),Zz=yW("handleAdDataDone"),Kz=AW("handleAdDataError"),Xz=yW("handleAdDataDone"),Jz=AW("handleAdDataError"),eY=yW("handleAdDataDone"),tY=AW("handleAdDataError"),iY=yW("handleAdDataDone"),rY=AW("handleAdDataError"),nY=yW("handleAdDataDone"),aY=AW("handleAdDataError"),oY=yW("handleAdDataDone"),sY=AW("handleAdDataError"),lY=(e,t,i)=>{var r=i.value;i.value=function(...e){var t=e=>{VY&&VY in this&&"function"==typeof this[VY]&&this[VY](e)};try{var i=r.call(this,...e);return i instanceof Promise?i.catch((e=>t(e))):i}catch(e){t(e)}}},uY=class{constructor({adUnitId:e,adType:t,pluginAppid:i=""}){this.adUnitId=void 0,this.adType=void 0,this.pluginAppid=void 0,this.slotData={},this.lastAdRetCode=0,this.lastAdRespone="fetch",this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=TW.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.rawAdInfoXml="",this.handledInNewFetch=!1,this.nativeMethodInvoker=new kj,this.mmReporter=void 0,this.cgiReporter=void 0,this.lander=void 0,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==t&&IW(),this.adUnitId=e,this.adType=t,this.pluginAppid=wW.isWaGame?"":i,this.mmReporter=new VG(this),this.cgiReporter=new zG(this),this.lander=new $G(this),this.bindProxyMethods(),this.setTimePoint("p1"),(e=>{"function"==typeof e&&lW.on("_onWxAdUserCaptureScreen",e)})((e=>{if(e.webviewId===TW.currentWebviewId&&this.data&&this.isViewable){var{uxinfo:t}=this.data;zU({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:4,uxinfo:t,url:e.path?e.path:"index.html"})}}))}bindProxyMethods(){var e=this,t=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander],i=function(t){var i=(e=>{for(var t=new Set,i=e;i;){for(var r of Object.getOwnPropertyNames(i))t.add(r);i=Object.getPrototypeOf(i)}return[...t]})(t),r=function(i){((e,t)=>{var i;return null===(i=e&&e[_W])||void 0===i?void 0:i.has(t)})(t,i)&&(e[i]=(...e)=>t[i](...e))};for(var n of i)r(n)};for(var r of t)i(r)}isLimitRequest(){return"checkAd"!==this.lastAdRespone&&0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}convertTestAdData(e){try{var t,i=dB(e),r=JSON.parse(i.crt_exp_info);if(i.crtExpInfo=r,1002===r.exp_type){if(null!==(t=i.wx_game_video)&&void 0!==t&&t.wxgame_video_card){var n=JSON.parse(r.exp_data);i.wx_game_video.wxgame_video_card.flooring_page=n}}else if(1001===r.exp_type){i.profile_exp=!0;var a=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;i.dest_type=a.dest_type;var o={};if(i.button_action)try{o=JSON.parse(e.button_action)}catch(e){}o.jump_type=a.jump_type,i.button_action=JSON.stringify(o)}else if(105===r.exp_type)i.ad_style_data=r.exp_data;else if(106===r.exp_type){WL(i,r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data),i.common_exp=!0}else if(r.exp_type&&[108,109,2001].includes(r.exp_type))i.ad_dynamic_list=r.exp_data;else if(r.crt_size&&[RB.CRT_SIZE_WX_APPLICATION_NEW,RB.CRT_SIZE_WX_APPLICATION_X].includes(r.crt_size)){if(i.crt_size=r.crt_size,i.ad_width=r.width,i.material_width=r.width,i.ad_height=r.height,i.material_height=r.height,i.image_url=r.image_url,r.dest_url&&i.url&&[1,3,6].includes(i.dest_type)){var s=PU(i.url),l={};s.weixinadkey&&(l.weixinadkey=s.weixinadkey),s.ticket&&(l.ticket=s.ticket),s.gdt_vid&&(l.gdt_vid=s.gdt_vid),s.weixinadinfo&&(l.weixinadinfo=s.weixinadinfo),i.url=DU(r.dest_url,l)}i.watermark_text=r.watermark||""}else if(r.landpage_type){var u;null!==(u=i.wx_game_video)&&void 0!==u&&u.wxgame_video_card&&(i.wx_game_video.wxgame_video_card.flooring_page=r)}return i}catch(t){return e}}getFetchArgs({isAdInterval:e},t){var i,r,n={scene_type:TW.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:wW.gameAppId,orig_weapp_id:this.pluginAppid?wW.gameAppId:"",weapp_path:TW.weappPath,pos_id:"",network_type:wW.adNetworkType,orientation:{landscape:1,portrait:2}[wW.deviceOrientation],sdk_version:wW.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:wW.startTime.valueOf(),wxa_enter_ts:TW.enterForegroundTime.valueOf(),weixin_version:wW.wechatVersion,os_version:wW.systemVersion,machine_type:wW.model,is_ad_interval:!!e,env:null===(i=k.host)||void 0===i?void 0:i.env,app_appid:null===(r=k.host)||void 0===r?void 0:r.appId})};n.pos_id=zB[this.adType];var a={};return"grid"===this.adType?a.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(a.splash_ad={count:String(5)},a.weapp_enter_scene=(null==t?void 0:t.weappEnterScene)||0,a.request_type=(null==t?void 0:t.requestType)||1,a.check_ad_is_online_ads=(null==t?void 0:t.preloadAds)||[],delete n.appid):"customAd"===this.adType?a={is_adunit_tmpl:!0}:"incentive-video"===this.adType?null!=t&&t.requestType&&(a.request_type=t.requestType):"cpsShopAd"===this.adType&&(a.cps_shop_req_info=t.cpsShopReqInfo||{},a.is_adunit_tmpl=t.isAdunitTmpl||!1),xi()&&(a.in_3rd_app=1),a.machine_brand=wW.brand||(null==k?void 0:k.brand),n.ext_slot_custom_comm=JSON.stringify(a),n}validateFetchEnv(){if(xi()&&this.reportAdMonitorData(vB.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}validateFetchRes(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,this.lastAdRespone="fetch",!this.isCheckAdIsOnlineRequest(e)){if(!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}}validateCrtSize(e){var{crt_size:t}=e;if(!FB.includes(t)&&!this.isCpsShopAd())throw{errMsg:`unexpected advertisement crt_size ${t}`}}handleAdDataDone(){this.reportAdMonitorData(vB.AD_FETCH_SUCCESS),this.reportIPV4()}handleAdDataError(e){this.reportAdMonitorData(vB.AD_FETCH_ERROR,e)}handleWaidForList(e=[]){var t={};if(e.length<1)return Promise.resolve(t);var i=[];return null==e||e.forEach((e=>{i.push(bL(e.apkName).then((t=>K()(K()({},t),{},{aid:e.aid}))))})),Promise.race([Promise.all(i).then((e=>(e.forEach((({waid:e,aid:i=""})=>{e&&i&&(t[i]=e)})),t))).catch((e=>(this.reportAdMonitorData(vB.READ_ADINFOS_ERROR,e),t))),Js(2e3).then((()=>t))])}handleBulkSaveMaterials(e){var t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?rW(t):Promise.resolve()}getSplashAdMaterialList(e){var t,i,r=[],n=(null==e?void 0:e.crtInfo[0])||{},a=e.rerankingExtInfo.material_hash||"",o=(null==n?void 0:n.image_url)||"",s=(null==n||null===(t=n.card_info)||void 0===t?void 0:t.pure_color_url)||"",l=(null==n||null===(i=n.card_info)||void 0===i?void 0:i.material_blur_url)||"",u=`wxfile://ad/${e.aid}_${a}.png`;if(a&&r.push({url:o,fileName:`${e.aid}_${a}.png`,filePath:u}),s){var c=`wxfile://ad/${e.aid}_${a}_pure_color.png`;a&&r.push({url:s,fileName:`${e.aid}_${a}_pure_color.png`,filePath:c})}if(l){var d=`wxfile://ad/${e.aid}_${a}_blur.png`;a&&r.push({url:l,fileName:`${e.aid}_${a}_blur.png`,filePath:d})}if(null!=e&&e.adDynamicList||null!=e&&e.template)try{var h=null==e?void 0:e.adDynamicList;null!=e&&e.template&&(h=e.template);var{tplConfig:p}=h,f=null==p?void 0:p.cacheFile;if(f&&Object.keys(f).length>0)for(var g of Object.keys(f)){var _=`wxfile://ad/${e.aid}_${a}_${g}.png`;r.push({url:f[g],fileName:`${e.aid}_${a}_${g}.png`,filePath:_})}}catch(e){this.reportAdMonitorData({idKey:34,idKeyGroup:1646},e)}return r}handleAdInfosIndexCache(e,t,i){var r=this;return zo()((function*(){var n;try{n=yield r.handleWaidForList(e)}catch(e){}t.deviceInfo=CW(),t.waidMap=n,r.reportAdMonitorData(vB.READ_ADINFOS_SUCCESS,{adInfos:t});try{return yield iW(t,i),r.reportAdMonitorData(AB.WRITE_ADINFOS_SUCCESS,{adInfos:t})}catch(e){var a=e instanceof Error?r.processStackMsg(e):e;return r.reportAdMonitorData(AB.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:a})}}))()}isCheckAdIsOnlineRequest(e){return this.isSplashAd()&&1010===e.ret&&e.advertisement_extra_info}isCheckAdIsOnlineResp(e){return!("traceid"in e)}handleCheckAdIsOnlineResp(e){var t,i=null===(t=JSON.parse(e.advertisement_extra_info))||void 0===t?void 0:t.check_ad_resp;return this.lastAdRespone=this.isCheckAdIsOnlineResp(i)?"checkAd":"fetch",i}handleSplashAd(e){var t=this;return zo()((function*(){if(t.isCheckAdIsOnlineRequest(e))return t.handleCheckAdIsOnlineResp(e);t.reportAdMonitorData(AB.dataLoadSuccess);var i=0,r=[],n=[],a=[],o=`${TL()}_exposure_times`,s={slot_id:zB[t.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0,[o]:0,requestInQueue:"true",totalSizeUsed:0},l=yield tW(KB);s.totalSizeUsed=l.totalSize;var u=l.outedDateFileList||[];u=u.length<21&&l.totalSize>20971520?l.fileList:u;try{yield((e="",t=[])=>{if(!e||0===t.length)return Promise.resolve();var i=[];for(var r of t){var n=`${e}/${r}`;i.push(eW(n))}return Promise.all(i)})(KB,u)}catch(e){t.reportAdMonitorData(AB.removeFileDataFail,e)}try{var c=e.advertisement_info.length>0&&e.advertisement_info.map(((e,l)=>{var u,c,d=t.handleAdData(e),h=d.rerankingExtInfo.material_hash||"",p={material_hash:d.rerankingExtInfo.material_hash||"",tid:d.rerankingExtInfo.tid.toString()||"",aid:d.aid,trace_id:d.traceid};s.ads.push(p),s.total_exposure_times=d.rerankingExtInfo.total_exposure_times||0,s[o]=d.rerankingExtInfo[o]||0;var f=null===(u=d.condition)||void 0===u?void 0:u.widget_gray_splash_data_channel_parallel;s.requestInQueue=f?"false":"true",s.isCheckAndFetch=(null===(c=d.condition)||void 0===c?void 0:c.widget_gray_splash_check_and_fetch)||0,s.materialHashMap[d.aid]=h;var g=d.crtInfo[0]||{};if(d.crtInfo){s.crtSizeMap[d.aid]=g.width>=g.height?"landscape":"portrait";var{extBackComm:_}=d,{card_info:m}=g;_.is_from_snsadinfo&&d.ad_desc&&!m.description&&(m.description=d.ad_desc)}var v=t.getSplashAdMaterialList(d);n=n.concat(v),i+=0===l?v.length:0;var y=`wxfile://ad/${d.aid}.txt`;if(r.push(iW(d,y)),d.product_type===OB.ANDROID){var A,b=null===(A=d.appInfo)||void 0===A?void 0:A.apkName;a.push({apkName:b,aid:d.aid})}return d}));t.datas=c}catch(e){throw t.reportAdMonitorData(AB.handleDataFail,e),e}var d=n.slice(0,i);return yield rW(d),r.push(rW(n)),r.push(t.handleAdInfosIndexCache(a,s,"wxfile://ad/adinfos.txt")),Promise.all(r).then((()=>t.reportAdMonitorData(AB.dataPreloadSuccess))).catch((e=>{throw t.reportAdMonitorData(AB.dataPreloadFail,e),e})),t.datas[0]}))()}handleCustomAd(e){var t=e.advertisement_info.map(((e,t)=>{var i,r,n,a=e=>{if(0===t)throw e},o=null,s=this.handleAdData(e),{crtInfo:l,button_action:u,product_type:c,dest_type:d,crt_size:h}=s;if(s.reranking_ext_info&&s.reranking_ext_info.refresh_time)n=s.reranking_ext_info.refresh_time;else if(s.reranking_ext_info&&"string"==typeof s.reranking_ext_info)try{var p=JSON.parse(s.reranking_ext_info);p.refresh_time&&(n=p.refresh_time)}catch(e){}if(null!=s&&null!==(i=s.extBackComm)&&void 0!==i&&i.tmpl_info)try{var f=JSON.parse(s.extBackComm.tmpl_info);o=JSON.parse(f.tmpl_content),r=Number(s.extBackComm.sub_templ_id)}catch(e){this.reportAdMonitorData(EB.TPL_PARSE_FAILED),a({errMsg:"custom template error",errCode:gB.ERR_TPL_PARSE})}else this.reportAdMonitorData(EB.TPL_LOAD_FAILED),a({errMsg:"no custom template",errCode:gB.ERR_TPL_NONE});return K()(K()({},e),{},{crtInfo:l,button_action:u,product_type:c,dest_type:d,crt_size:h,condition:s.condition,template:o,subTemplId:r,refreshTime:n,aid:s.aid,app:s.app,appInfo:s.appInfo,extBackComm:s.extBackComm,wording:s.hint_txt,card_info:s.card_info,video_info:s.video_info,image_url:s.image_url,weapp_info:s.weapp_info,wx_game_video:s.wx_game_video})}));return this.reportAdMonitorData(EB.LOAD_SUCCESS),t.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=t,this.setCurrentData(0),t[0]}handleCpsShopAd(e){var t=e.advertisement_info.map((e=>{var t=this.handleAdData(e);return K()(K()({},t),{},{extBackComm:K()(K()({},t.extBackComm),{},{cpsProduct:t.extBackComm.cps_weapp_shop_ad_info})})}));return this.datas||(this.datas=[]),this.datas=this.datas.concat(t),this.setCurrentData(0),t}handleGridAd(e){if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(vB.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};var t=e.advertisement_info.map(((e,t)=>{var i=this.handleAdData(e);return i._isGrid=!0,i._gridInfo={row:5===this.slotData.gridCount?1:2,column:5===this.slotData.gridCount?5:4,index:t},i}));for(var i of(this.datas=t,this.setCurrentData(0),this.fetchRetryCount=0,this.datas))if(i.crt_size!==RB.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:`unexpected advertisement crt_size ${i.crt_size}`};return this.reportAdMonitorData(vB.AD_GRID_LOAD_SUCCESS),this.datas}handleInterstitialAd(e){var t,{crtInfo:i,extBackComm:r}=e;if(!i[0])throw{errMsg:"unexpected addata"};(t=i[0]).card_info||(t.card_info={});var n=K()(K()(K()({},i[0]),FL(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo","extBackComm","template","poi"])),{},{useTemplate:!!e.template||e.crt_size===RB.CRT_SIZE_AMS_PIC_169}),a=i[0].card_info;if(r.is_from_snsadinfo){if(!a)throw this.reportAdMonitorData(vB.INTERSTITIAL_SNS_SUPPLEMENTARY_DATA_ERROR),{errMsg:"unexpected adData"};a.head_bg_img&&(a.bg_img=a.head_bg_img)}return e.ad_desc&&!a.description&&(a.description=e.ad_desc),null!=a&&a.desc&&null!=a&&a.description&&(a.description=""),this.convertedAdData=n,n}getRewardedVideoData(e){var t=e.crtInfo&&Array.isArray(e.crtInfo)?e.crtInfo:[],{extBackComm:i,canvas_info:r,ad_desc:n}=e;if(i.is_from_snsadinfo){var a,o,s=null==t||null===(a=t[0])||void 0===a?void 0:a.card_info,l=null==t||null===(o=t[0])||void 0===o?void 0:o.short_video;if(l&&l.video_duration<1e3&&(l.video_duration*=1e3),!s)throw this.reportAdMonitorData(vB.REWARDED_VIDEO_SNS_SUPPLEMENTARY_DATA_ERROR),{errMsg:"unexpected adData"};var{head_bg_img:u,thumb:c="",title:d=""}=s;return{crtInfo:t,headBgImg:u,mpTagType:0,gaussVideo:null,shortVideo:l,showTime:0,icon:c,name:d,wording:n.replace(/\n/g," "),flooringPage:null}}0===t.length&&t.push({wxgame_video_card:{}});var[{wxgame_video_card:{head_bg_img:h,mp_tag_type:p},wxgame_gauss_video:f}]=t,{wx_game_video:{short_video:g,wxgame_video_card:{show_time:_,thumb:m,title:v,desc:y,flooring_page:A}}}=e;return{crtInfo:t,headBgImg:h,mpTagType:p,gaussVideo:f,canvasInfo:r,shortVideo:g,showTime:_,icon:m,name:v,wording:y,flooringPage:A}}handleRewardedVideoAd(e){var t,i,r,n;e.crt_size===RB.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);var{crtInfo:a,headBgImg:o,mpTagType:s,gaussVideo:l,canvasInfo:u,shortVideo:c,showTime:d,icon:h,name:p,wording:f,flooringPage:g}=this.getRewardedVideoData(e),_=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)_=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{var m=JSON.parse(e.reranking_ext_info);m.rewarded_time&&(_=m.rewarded_time)}catch(e){}_=Math.floor(1e3*_),g&&[3,4].indexOf(g.landpage_type)>-1&&(this.data.isPlayable=!0);var v=K()({crtInfo:a[0],canvas_info:u,type:LB[e.pt],shortVideo:this.mapRewardVideoFields(c),gaussVideo:l?this.mapRewardVideoFields(K()(K()({},l),{},{video_duration:l.video_duration_ms})):null,rewardedTime:_,card:{icon:h,name:p,wording:f,headBgImg:o,mpTagType:s,showTime:d},flooringPage:g},FL(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo","extBackComm"]));this.convertedAdData=v;var y=WG(v),A=GG(v);return this.reportRewardGaussVideo({useGaussVideo:y,useExpandStyle:A,expUseGaussVideo:null!==(t=null===(i=e.condition)||void 0===i?void 0:i.widget_gray_reward_use_gauss_blur)&&void 0!==t?t:0,expUseExpandStyle:1,videoUrl:null!==(r=null==c?void 0:c.video_url)&&void 0!==r?r:"",gaussVideoUrl:null!==(n=null==l?void 0:l.video_url)&&void 0!==n?n:""}),null!=l&&l.video_url&&this.reportAdMonitorData(vB.REWARD_GAUSS_EXISTS),y&&A?this.reportAdMonitorData(vB.REWARD_USE_GAUSS_AND_EXPAND_STYLE):y?this.reportAdMonitorData(vB.REWARD_USE_GAUSS):A&&this.reportAdMonitorData(vB.REWARD_USE_EXPAND_STYLE),v}mapRewardVideoFields(e){var{thumb_url:t,video_url:i,video_duration:r,thumb_width:n,thumb_height:a}=e;return{poster:t,src:i,duration:r,width:n,height:a}}handleRewardedLandingPage(e){var t,i=wW.isAndroid&&k.clientVersion>=654315008||wW.isIOS&&k.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&i)try{var{canvas_info:r}=e,{root:n}=Lg()(r.ad_info_xml),a=CL(e),o=this.composeExposureCommonInfo({top:0,left:0,width:wW.screenWidth,height:wW.screenHeight});n.children.push({name:"viewid",children:[],attributes:{},content:a},{name:"commInfo",children:[],attributes:{},content:o});var s=$U(n);this.rawAdInfoXml=this.data.canvas_info.ad_info_xml,this.data.canvas_info.ad_info_xml=s,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}UpdateRewardedLandingPageData(e){try{if(this.checkCanvasXmlState()&&this.rawAdInfoXml){var{root:t}=Lg()(this.rawAdInfoXml),i=CL(this.data),r=this.composeExposureCommonInfo({top:0,left:0,width:wW.screenWidth,height:wW.screenHeight,inputWeappExtraData:e.weappExtraData||{}});t.children.push({name:"viewid",children:[],attributes:{},content:i},{name:"commInfo",children:[],attributes:{},content:r});var n=$U(t);this.data.canvas_info.ad_info_xml=n}}catch(e){this.reportAdMonitorData(vB.UPDATE_ADINFOXML_ERROR,e)}}handleBannerAd(e){var t,{extBackComm:i,crtInfo:r,pt:n,crt_size:a,image_url:o,material_width:s,material_height:l,ad_width:u,ad_height:c,use_style_data:d,hint_txt:h,watermark_type:p}=e,{antifraud_popup:f}=i;void 0===f&&(f=!1);var g,_,m=LB[n];d?(g=u,_=c):[RB.CRT_SIZE_WX_APPLICATION,RB.CRT_SIZE_WX_APPLICATION_NEW,RB.CRT_SIZE_WX_APPLICATION_X].includes(a)?(g=(u||s)/2,_=(c||l)/2):a===RB.CRT_SIZE_WX_APPLICATION_CARD&&(g=u,_=c);var v=K()(K()({antifraudPopup:f,type:m,crt_size:a,useStyleData:d,watermark:BB[p],width:g,height:_,image:{src:o,width:s,height:l},wording:h},FL(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo","crtInfo","template"])),{},{useTemplate:!!e.template||e.crt_size===RB.CRT_SIZE_CARD_COMPT_IMAGE}),y=(null==r||null===(t=r[0])||void 0===t?void 0:t.card_info)||{};if(i.is_from_snsadinfo&&!y)throw{errMsg:"unexpected adData"};return i.is_from_snsadinfo&&e.ad_desc&&!y.description&&(y.description=e.ad_desc),null!=y&&y.desc&&null!=y&&y.description&&(y.description=""),this.convertedAdData=v,v}extractJson(e,t,i,r){var n=null!=i?i:t;if(e[n]&&"string"==typeof e[n])try{e[t]=JSON.parse(e[n])}catch(i){e[t]=null!=r?r:{}}else null!=r&&(e[t]=r)}buildWechatInfo(e){if(e.product_type===OB.WE_CHAT){var{biz_appid:t,biz_info:{nick_name:i,is_subscribed:r,head_img:n,biz_uin:a}}=e;return{icon:n,nickname:i,uin:a,isFollowed:r,biz_appid:t}}return{}}buildAppInfo(e){var t=e.product_type;if([OB.ANDROID,OB.IOS].includes(t)){var{app_info:{app_name:i,apk_name:r,apk_url:n,app_md5:a,icon_url:o,url_scheme:s,version_code:l,channel_id:u,desc:c}}=e;return{appName:i,apkName:r,apkUrl:n,appMd5:a,iconUrl:o,urlScheme:s,versionCode:l,channelId:u,desc:c}}return{}}handleAdData(e){var t,i,r,n,a;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};var o,s,l,u=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):dB(e),c=u;(u.crt_size&&(c.crt_size=Number(u.crt_size)),this.extractJson(c,"crtInfo","crt_info"),this.extractJson(c,"extBackComm","ext_back_comm"),this.extractJson(c,"button_action","button_action",{}),this.extractJson(c,"adStyleData","ad_style_data",""),this.extractJson(c,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(c,"extInfo","ext_info"),this.extractJson(c,"adDynamicList","ad_dynamic_list"),null!==(t=c.crtInfo)&&void 0!==t&&null!==(i=t[0])&&void 0!==i&&null!==(r=i.card_info)&&void 0!==r&&r.sns_to_mp_supplementary)&&Object.assign(c.crtInfo[0].card_info,null===(o=c.crtInfo)||void 0===o||null===(s=o[0])||void 0===s||null===(l=s.card_info)||void 0===l?void 0:l.sns_to_mp_supplementary);if(u.flow_exp_info)try{c.condition=sF(u.flow_exp_info),this.isSplashAd()||this.handleSplashAdFetchLog(c.condition)}catch(e){}if(c.adStyleData&&EW("native",c.crt_size)){c.use_style_data=!0;var{adStyleData:d}=c;u.ad_width=d.width,u.ad_height=d.height,d.widgets.forEach((e=>{var t=u.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(c);var h=u.button_action;if(h.button_text=h.button_text||"查看",u.watermark_text=u.watermark_text||"去逛逛",18001===(null==c||null===(n=c.extInfo)||void 0===n?void 0:n.page_type)){var p={gdt_vid:u.traceid||"",uxinfo:u.uxinfo||"",ad_token:u.ad_token||"",rl:u.rl||""};u.url=DU(u.url,p)}if(null!=c&&null!==(a=c.extBackComm)&&void 0!==a&&a.ad_template_info)try{c.template=JSON.parse(c.extBackComm.ad_template_info)}catch(e){c.template=null}var f=this.buildWechatInfo(c),g=this.buildAppInfo(c);return u.product_type===OB.ANDROID&&bL(g.apkName).then((({waid:e})=>{c.waid=e,this.reportAdMonitorData(vB.GET_WAID_SUCCESS)})).catch((e=>{this.reportAdMonitorData(vB.GET_WAID_ERROR,e)})),K()(K()({},c),{},{app:f,appInfo:g})}handleSplashAdFetchLog(e){this.handledInNewFetch||(this.handledInNewFetch=!0,nW(e))}handleOperateWXData(e){var t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?OL(t):kL(t)}processFetch(e,t,i){var r=this;return zo()((function*(){if(r.validateFetchEnv(),Object.keys(t).length>0)(e=>{var t=Object.keys(e);for(var i of t)wW[i]=e[i]})(t);else{wW.deviceOrientation=SW();var{networkType:n}=yield r.getNetworkType();wW.adNetworkType=n}var a=r.getFetchArgs({isAdInterval:e},i);r.setLastAdReqTs(+new Date),r.setLastExposureTime(0),r.setLastClickTime(0),r.setTimePoint("p2");try{var o=yield r.handleOperateWXData(a);if(r.fetchPromise=null,r.fetchRetryCount=0,r.handledInNewFetch=!1,r.setTimePoint("p3"),o=o.data,r.validateFetchRes(o),r.isSplashAd())return r.handleSplashAd(o);if(r.isGridAd())return r.handleGridAd(o);if(r.isCustomAd())return r.handleCustomAd(o);if(r.isCpsShopAd())return r.handleCpsShopAd(o);var s=r.handleAdData(o.advertisement_info[0]);return r.data=s,r.checkDuplicateRecommendedAds(s.product_type,s.app,s.appInfo),r.isInterstitialAd(s)?r.handleInterstitialAd(s):r.isRewardedVideoAd(s)?r.handleRewardedVideoAd(s):r.handleBannerAd(s)}catch(t){var l="";try{l=JSON.parse(t).errMsg}catch(e){}if(r.fetchPromise=null,0===l.indexOf("getAdData:fail")&&r.fetchRetryCount<1)return r.fetchRetryCount+=1,r.fetch(e);throw r.isBannerAd()?r.reportAdMonitorData(vB.AD_BANNER_LOAD_ERROR,t):r.isRewardedVideoAd()?r.reportAdMonitorData(vB.AD_VIDEO_LOAD_ERROR,t):r.isInterstitialAd()?r.reportAdMonitorData(vB.AD_INTERSTITIAL_LOAD_ERROR,t):r.isGridAd()?r.reportAdMonitorData(vB.AD_GRID_LOAD_ERROR,t):r.isCustomAd()?r.reportAdMonitorData(EB.LOAD_FAILED,t):r.isSplashAd()&&r.reportAdMonitorData(AB.dataLoadFail,t),t}}))()}checkDuplicateRecommendedAds(e,t,i){var r=this;return zo()((function*(){var n=[],a="0",o=decodeURIComponent(r.data.apurl);/viewid=([^&]+)/.test(o)&&(a=RegExp.$1);var s={conv_status:n},l={},{imei:u,idfa:c}=yield RW,d={viewid:a,app_status:0,follow_status:0,imei:u,idfa:c};if(e===OB.WE_CHAT){if(l.ad_type=1,l.ad_id=t.biz_appid,d.follow_status=t.isFollowed?2:1,t.isFollowed)return r.reportAdMonitorData(vB.AD_FOLLOWED,{adInfo:l})}else if(e===OB.ANDROID){var{apkName:h,versionCode:p}=i;try{var f=yield r.getInstallState(h),g=f.isInstalled&&(void 0===f.versionCode||f.versionCode>=p);l.ad_type=2,l.ad_id=h,d.app_status=g?2:1,g&&r.reportAdMonitorData(vB.AD_INSTALLED,{adInfo:l})}catch(e){d.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0})}}n.push(d),r.reportInstallFollow(s)}))()}getAdType(){return this.adType}getAdUnitId(){return this.adUnitId}getPluginAppid(){return this.pluginAppid}getSlotData(){return this.slotData}getDeviceInfo(){return wW}isBannerAd(){return"banner"===this.adType}isRewardedVideoAd(e){return"incentive-video"===this.adType&&(!e||EW("all",e.crt_size))}isInterstitialAd(e){return"interstitialAd"===this.adType&&(!e||Wj("all",e.crt_size))}isGridAd(){return"grid"===this.adType}isCustomAd(){return"customAd"===this.adType}isSplashAd(){return"splashAd"===this.adType}isCpsShopAd(){return"cpsShopAd"===this.adType}getProgramStartTime(){return wW.startTime}getWebviewInfo(){return{createWebviewId:this.webviewId,lastWebviewId:TW.lastWebviewId,currentWebviewId:TW.currentWebviewId,openType:TW.currentOpenType}}setSlotData(e){this.slotData=Object.assign(this.slotData,e||{})}reset(){this.adDataIndex=0,this.cgiReporter.reset(),this.rawAdInfoXml=""}fetch(e=!1,t={},i={}){return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t,i)),this.fetchPromise}setRightButtonHide(e){var t=()=>wW.isWaGame?this.setNavigationBarRightButton({isHide:e}):this.setMiniProgramNavigationBarRightButton({isHide:e});return t().catch((i=>(this.reportAdMonitorData(vB.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:this.processStackMsg(i)}),t().catch((t=>{throw this.reportAdMonitorData(vB.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:this.processStackMsg(t)}),t})))))}addDownloadTaskStraight(e,t,i,r){return Oj({taskName:e,taskUrl:t,fileMd5:i,extInfo:r}).catch((e=>(this.reportAdMonitorData(vB.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e))))}operateFullscreen(e){if(!e)return Promise.reject();var t=[this.setRightButtonHide("hide"===e)];return wW.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!wW.isWaGame&&wW.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}isTriggerClick(e){var t=e.absoluteX,i=e.absoluteY,r=e.absoluteEndX,n=e.absoluteEndY,a=e.pressInterval,o=!1;return Math.abs(n-i)<30&&Math.abs(r-t)<30&&a<300&&(o=!0),o}isValidCondition(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}setCurrentData(e){var t;this.adDataIndex=e,null!==(t=this.datas)&&void 0!==t&&t[e]&&(this.data=this.datas[e])}checkCanvasXmlState(){return this.isCanvasXmlHook}handleRewardedVideoPlayableLand(e,t){var i,r,n=null==this||null===(i=this.data)||void 0===i||null===(r=i.extBackComm)||void 0===r?void 0:r.uid,a={};4===t?a.xj_scene=6:(a.gdt_vid=this.data.traceid||"",a.uxinfo=this.data.uxinfo||"",a.reward=1),a.rl=this.data.rl||"",a.ad_token=this.data.ad_token||"",wW.isIOS&&(a.uid=n||"");var o=DU(e,a);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(vB.H5_PRELOAD_BUTTON_CLICKED),PL({url:o})}setDeviceInfo(e){Object.assign(wW,e)}setSplashAdShowStatus(){jY=!0}getSplashAdShowStatus(){return jY}getChannelsLiveStatus(){var e=this;return zo()((function*(){var{dest_type:t,extBackComm:{channels_info:i,live_video_mode:r,live_video_sub_mode:n}}=e.data;if(!i||null==r||null==n)return"none";if(((e,t)=>OU(e)&&t===WB.ROOM)(r,n)&&t===xB.DEST_TYPE_CHANNELS_LIVE){var{id:a,username:o}=i;if(!a||!o)return"none";try{var{status:s}=yield e.getChannelsLiveInfo({feedId:a,finderUserName:o});if([GB.NONE,GB.IN_PREPARE].includes(s))return"none";if(s===GB.ON_AIR)return"onlive";if(s===GB.ENDED)return"end";e.reportAdIDKey({key:vB.GET_CHANNELS_LIVE_STATUS_SUCCESS})}catch(t){e.reportAdMonitorData(vB.GET_CHANNELS_LIVE_STATUS_FAILED,{id:a,username:o,errMsg:t})}}else if(((e,t)=>OU(e)&&t===WB.RESERVATION)(r,n)&&t===xB.DEST_TYPE_CANVAS)return"reserve";return"none"}))()}handleAdTemplateEvent(e){switch(e.action){case jH.FEEDBACKBTNTAP:return this.openFeedbackUrl(wW.isWaGame?1003:1005),!0;case jH.REPORTTIMEPOINT:return e.value.key&&this.setTimePoint(e.value.key),!0;case jH.REPORTMMDATA:return e.value.id&&e.value.data&&this.reportMMData(parseInt(e.value.id,10),e.value.data),!0;case jH.REPORTADMONITORDATA:var{id:t,key:i,extInfo:r}=e.value,n=t?{idKeyGroup:t,idKey:i}:i;return this.reportAdMonitorData(n,r),!0}return!1}isOriginExposureArea(e){if(!e)return!1;var{left:t,top:i,width:r,height:n}=e;return i+n>=1&&i<=wW.screenHeight-1&&t+r>=1&&t<=wW.screenWidth-1}isViewableExposureArea(e){if(!e)return!1;var{left:t,top:i,width:r,height:n}=e,a=t+r<=wW.screenWidth?t+r:wW.screenWidth-t,o=i+n<=wW.screenHeight?i+n:wW.screenHeight-i;return(a=a>r?r:a)*(o=o>n?n:o)/(r*n)>=.5}},ao()(uY.prototype,"handleCheckAdIsOnlineResp",[Yz,$z],Object.getOwnPropertyDescriptor(uY.prototype,"handleCheckAdIsOnlineResp"),uY.prototype),ao()(uY.prototype,"handleSplashAd",[qz,Qz],Object.getOwnPropertyDescriptor(uY.prototype,"handleSplashAd"),uY.prototype),ao()(uY.prototype,"handleCustomAd",[Zz,Kz],Object.getOwnPropertyDescriptor(uY.prototype,"handleCustomAd"),uY.prototype),ao()(uY.prototype,"handleCpsShopAd",[Xz,Jz],Object.getOwnPropertyDescriptor(uY.prototype,"handleCpsShopAd"),uY.prototype),ao()(uY.prototype,"handleGridAd",[eY,tY],Object.getOwnPropertyDescriptor(uY.prototype,"handleGridAd"),uY.prototype),ao()(uY.prototype,"handleInterstitialAd",[iY,rY],Object.getOwnPropertyDescriptor(uY.prototype,"handleInterstitialAd"),uY.prototype),ao()(uY.prototype,"handleRewardedVideoAd",[nY,aY],Object.getOwnPropertyDescriptor(uY.prototype,"handleRewardedVideoAd"),uY.prototype),ao()(uY.prototype,"handleBannerAd",[oY,sY],Object.getOwnPropertyDescriptor(uY.prototype,"handleBannerAd"),uY.prototype),ao()(uY.prototype,"checkDuplicateRecommendedAds",[lY],Object.getOwnPropertyDescriptor(uY.prototype,"checkDuplicateRecommendedAds"),uY.prototype),uY),zY=function(e,t,i){return sA.call(this,e,(e=>{var t={};for(var i of Object.keys(e||{}))e[i]&&(t[i]=Object.assign({},e[i]),e[i].landscape&&!e[i].landscapeLeft&&(t[i].landscapeLeft=Object.assign({},e[i].landscape)),e[i].landscape&&!e[i].landscapeRight&&(t[i].landscapeRight=Object.assign({},e[i].landscape)));return t})(t),i)},YY={type:"EOF"};class $Y{constructor(){this.token=[],this.tokens=[],this.state=null,this.state=this.start}isEOF(e){return e&&"object"==typeof e&&"EOF"===e.type}start(e){return this.isEOF(e)?(this.emmitToken("EOF",YY),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}inLogic(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}inNumber(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}inTplFunc(e){return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&(()=>{for(var e=0,t=0,i=0,r=this.token.length;i<r;i++){var n=this.token[i];"("===n?e+=1:")"===n&&(t+=1)}return e===t})()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}inTplStr(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}inCompare(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}inQuoteStr(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}emmitToken(e,t){this.tokens.push({type:e,value:t})}push(e){this.state&&(this.state=this.state(e))}end(){this.state&&this.state(YY)}}var qY=e=>{for(var t=new $Y,i=0,r=e.length;i<r;){var n=e[i];i+=1,t.push(n)}return t.end(),t.tokens},QY=e=>"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null,ZY=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren),KY=e=>0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren),XY=e=>{var t;t="string"==typeof e?qY(e):e;for(var i=[QY({type:"ROOT"})],r=e=>{for(var t=e.priority;ZY(i[i.length-1])&&KY(i[i.length-2])&&t<=i[i.length-1].priority&&t<=i[i.length-2].priority;){var{children:r}=i[i.length-2];null==r||r.push(i.pop())}},n=e=>{var t=QY(e),n=i[i.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(ZY(n))return;KY(n)?n.children.push(t):i.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?ZY(n)&&(t.priority>n.priority?((e,t)=>{var r=t.children.pop();r&&e.children.push(r),i.push(e)})(t,n):(r(t),(e=>{var t=i.pop();t&&e.children.push(t),i.push(e)})(t))):"ROOT_END"===t.type&&(r(t),i.push(t))},a=0,o=t.length;a<o;a++)n(t[a]);return i},JY=({type:e,children:t,operator:i},r,n={})=>{var a=e=>JY(t[e],r,n);if("COMPARE"===e){var o=i&&{">":()=>a(0)>a(1),"<":()=>a(0)<a(1),">=":()=>a(0)>=a(1),"<=":()=>a(0)<=a(1),"==":()=>a(0)==a(1),"!=":()=>a(0)!=a(1),"===":()=>a(0)===a(1)}[i];return o?o():null}if("LOGIC"===e){var s=i&&{"&&":()=>a(0)&&a(1),"||":()=>a(0)||a(1)}[i];return s?s():null}var l={NUMBER:()=>Number(t[0]),STR:()=>t[0],TPLSTR:()=>((e,t)=>{var i=e.split("."),r="";return i.forEach((e=>{""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r})(t[0],r),QUESTION:()=>a(0)?a(1):a(2),TPLFUNC:()=>((e,t,i)=>{var r=e.indexOf("("),n=e.substring(0,r),a=e.substring(r+1,e.length-1);if(!i[n])return null;for(var o=qY(a),s=[],l=[],u=0,c=o.length;u<c;u++){var d=o[u];"COMMA"===d.type||"EOF"===d.type?(s.push(l),l=[]):l.push(d)}var h=[];return s.forEach((e=>{h.push(t$(e,t,i))})),i[n].apply(null,h)})(t[0],r,n)}[e]||null;return l?l():null},e$={"#scope":e=>e,"#no":e=>!e,"#bool":e=>!!e,"#add":(e,t)=>e+t,"#sub":(e,t)=>e-t,"#multi":(e,t)=>e*t,"#division":(e,t)=>e/t,"#negative":e=>-e,"#toNumber":e=>Number(e),"#toString":e=>String(e),"#toArray":(...e)=>e,"#ceil":e=>Math.ceil(e),"#floor":e=>Math.floor(e),"#round":e=>Math.round(e),"#substring":(e,t,i)=>e.substring(t,i),"#like":(e,t)=>-1!==e.indexOf(t),"#toFixed":(e,t)=>parseFloat(e).toFixed(t),"#replace":(e,t,i)=>e.replace(t,i),"#replaceAll":(e,t,i)=>e.replaceAll(t,i),"#toLowerCase":e=>e.toLowerCase(),"#toUpperCase":e=>e.toUpperCase(),"#len":e=>e.length,"#hansLen":e=>{var t=0;for(var i of e)t+=/[\u4e00-\u9fa5]/.test(i)?2:1;return t/2},"#parse":e=>{try{return JSON.parse(e)}catch(e){return{}}},"#value":(e,t)=>e[t]||{},"#truncate":(e,t)=>{var i="",r=0;for(var n of e){if((r+=/[\u4e00-\u9fa5]/.test(n)?2:1)>t){i+="...";break}i+=n}return i},"#concat":(...e)=>e.join(""),"#split":(e,t,i)=>null==e?void 0:e.split(t,i),"#abbrNum":e=>e<1e4?e.toString():`${(e/1e4).toFixed(1)}万`,"#trimDigit":e=>{var t=e.toString().split(".");if(t.length<2)return e;for(var i=t.slice(-1)[0];"0"===i[i.length-1];)i=i.slice(0,-1);return t.slice(0,-1).concat(i?[i]:[]).join(".")},"#append":(e,t,i=!1)=>(i&&e.indexOf(t)>-1||e.push(t),e),"#remove":(e,t)=>e.filter((e=>e!==t)),"#include":(e,t)=>e.indexOf(t)>-1,"#mod":(e,t)=>e%t,"#indexedArray":e=>{if(e<=0)return[];for(var t=[],i=0;i<e;i+=1)t.push(i);return t},"#get":uB,"#slice":(e,t,i)=>e.slice(t,i),"#compareVersion":(e,t)=>jt(e,t)},t$=(e,t,i)=>{try{var r=XY(e);return JY(r[1],t,Object.assign({},e$,i))}catch(e){}return null},i$={},r$=M;class n$ extends hF{constructor(e,{autoRegister:t=!0}={}){super(e),this.adCustomId=void 0,this.adProxy=void 0,this.adData=void 0,this.adDatas=void 0,this.template=void 0,this.manager=void 0,this.reporter=void 0,this.emitter=void 0,this.id=void 0,this.options=void 0,this.data=void 0,this.events=void 0,this.lifecycle=void 0,this.innerStyles=void 0,this.animations=void 0,this.idPrefix=void 0,this.forType=void 0,this.forItem=void 0,this.forIndex=void 0,this.ratio=1,this.tplConfig=null,this.bubbleEvent=void 0,this.adCustomListener=null,this.clickCallbackMap=new WeakMap,this.handleCommonClick=e=>{this.doActions(this.events.tap,{event:e})},this.touchInfo=null,this.handleCommonTouchStart=e=>{this.touchInfo=e},this.handleCommonTouchEnd=e=>{if(this.touchInfo){var t=Math.abs(e.x-this.touchInfo.x),i=Math.abs(e.y-this.touchInfo.y),r="none";(t>=20||i>=20)&&(t>=i&&e.x>this.touchInfo.x?r="right":t>=i&&e.x<this.touchInfo.x?r="left":i>=t&&e.y>this.touchInfo.y?r="bottom":i>=t&&e.y<this.touchInfo.y&&(r="top")),this.emitComponentEvent(VL.SLIDE,{direction:r,startEvent:this.touchInfo,endEvent:e})}this.touchInfo=null},this.handleAdCustomAction=e=>{e.targetid===this.id&&this.doCommonAction(e)},this.adCustomId=e.adCustomId,this.adProxy=e.adProxy,this.adData=e.adData,this.adDatas=e.adDatas,this.manager=e.manager,this.reporter=e.reporter,this.emitter=e.emitter,this.idPrefix=e.idPrefix||"",this.forType=e.forType||sB.NONE,this.forItem=e.forItem,this.forIndex=e.forIndex,e.ratio&&(this.ratio=e.ratio),this.checkSize();var i=e.template||{};this.template=i,this.id=`${this.adCustomId}-${this.idPrefix}${this.template.id}`;var r=i.options||{};this.options=r,this.data=r.data||{},this.events=r.events||{},this.lifecycle=r.lifecycle||{},this.innerStyles=r.innerStyles||{},this.animations=r.animations||{},this.bubbleEvent=void 0===r.bubbleEvent||r.bubbleEvent;var n=this.getDataValue("_bubbleEvent");void 0!==n&&(this.bubbleEvent=n),t&&this.bindCommonEvents()}ready(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}updatedProps(){this.updateBubbleEvent()}destroy(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.offTouchstart("container",this.handleCommonTouchStart),this.offTouchend("container",this.handleCommonTouchEnd),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}bindCommonEvents(){this.onClick("container",this.handleCommonClick),this.onTouchstart("container",this.handleCommonTouchStart),this.onTouchend("container",this.handleCommonTouchEnd),this.emitter.on("adCustomAction",this.handleAdCustomAction)}getCommonSubComponentProps(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope,innerFunctions:this.props.innerFunctions}}getDataValue(e,t,i){var r=t||this.data,n=r[`${e}Expr`];return n?this.run(n,null==i?void 0:i.args):r[e]}getDataValueWithDefault(e,t,i,r){var n=i?this.getDataValue(e,i,r):this.getDataValue(e);return void 0===n?t:n}getAdData(){return this.forType===sB.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}getAdDatas(){return this.adDatas||[]}addAdCustomListener(e){this.removeAdCustomListener(),this.adCustomListener=t=>{t.adCustomId===this.adCustomId&&(null==e||e(t))},this.emitter.on("adCustomEvent",this.adCustomListener)}removeAdCustomListener(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}setRatio(e){this.ratio=e}checkSize(){var e,t,{template:i}=this;if(!i||"root"===i.type){this.tplConfig=(null==i?void 0:i.tplConfig)||{};var r=this.props.adPosition||{};if(this.tplConfig){var n,a,{tplConfig:o}=this,{width:s}=this.props.adPosition||{};if(null==s)s=(null===(n=this.props)||void 0===n||null===(a=n.systemInfo)||void 0===a?void 0:a.screenWidth)||wW.screenWidth;s=Number(s);var l=o.minWidth||0,u=o.maxWidth||0,c=o.baseWidth||375,d=Math.min((null===(e=this.props)||void 0===e||null===(t=e.systemInfo)||void 0===t?void 0:t.screenWidth)||wW.screenWidth,Math.max(l,s));u&&(d=Math.min(d,u)),0===d&&this.setRatio(c/c),r.width=d,this.setRatio(d/c)}}}emitAdCustomEvent(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}emitComponentEvent(e,t){var i=this.events[e];null!=i&&i.length&&this.doActions(i,t||{})}emitComponentLifeCycle(e,t){var i=this.lifecycle[e];null!=i&&i.length&&this.doActions(i,t)}doActions(e=[],t={}){for(var i of e)i.force&&!i.targetid?this.doCommonAction({args:t,payload:i}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:i.targetid?`${this.adCustomId}-${i.targetid}`:this.id,args:t,payload:i})}doCommonAction(e){var{payload:t,args:i}=e,{delay:r=0,expr:n}=t,a=()=>{if(!n||this.run(n,i))switch(t.action){case GL.SETSTYLE:var{value:r}=t;if(r.styleExpr)for(var a of Object.keys(r.styleExpr))r.style[a]=this.run(r.styleExpr[a],i);this.setStyle(r.id,r.style);break;case GL.SETEXPRVARS:var{key:o}=t.value,s=this.getDataValue("value",t.value);this.getExprInnerVars()[o]=s;break;case GL.REPORTIDKEY:break;case GL.TRIGGEREVENT:var{detail:l={},eventName:u}=t.value;try{if(null!=i&&i.event&&(l.rawDetail=JSON.stringify(i.event)),t.value.detailExpr)for(var c of Object.keys(t.value.detailExpr)){var d=t.value.detailExpr[c];l[c]=this.run(d,i)}}catch(e){}this.emitAdCustomEvent(KL.TRIGGEREVENT,{eventName:u,detail:l});break;case GL.REPORTMMDATA:var{data:h,dataExpr:p,id:f}=t.value;if(p)for(var g of Object.keys(p)){var _=p[g];h[g]=this.run(_,i)}this.emitAdCustomEvent(KL.REPORTMMDATA,{id:f,data:h});break;case GL.ANIMATE:var{id:m,animation:v}=t.value;this.doAnimation({id:m,animationName:v});break;case GL.TRIGGERBTNCLICK:var y,A=null==i?void 0:i.event;if(A)this.emitAdCustomEvent(KL.BTNTAP,{event:A,isHandleDownload:(null===(y=t.value)||void 0===y?void 0:y.isHandleDownload)||!1});break;case GL.LANDAD:var b=null==i?void 0:i.event,{isButton:E}=(null==t?void 0:t.value)||{};"value"in t&&(b=this.getDataValue("event",t.value,{args:i||{}})||b),this.emitAdCustomEvent(KL.LANDAD,{index:"value"in t?this.getDataValueWithDefault("index",0,t.value,{args:i}):0,event:b,isButton:E});break;case GL.SPLASHSKIPAD:var w=null==i?void 0:i.event;w&&this.emitAdCustomEvent(KL.SPLASHSKIPAD,{event:w});break;case GL.REPORTADMONITORDATA:var{id:T,key:C}=t.value,S=this.getDataValue("extInfo",t.value,{args:i});this.emitAdCustomEvent(KL.REPORTADMONITORDATA,{id:T,key:C,extInfo:S});break;case GL.REWARDEDVIDEODYNAMIC:var{list:I}=t.value;this.emitAdCustomEvent(KL.REWARDEDVIDEODYNAMIC,{list:I});break;case GL.EVALUATEEXPR:var{expr:x}=t.value;x&&this.run(x);break;default:"doAction"in this&&"function"==typeof this.doAction&&this.doAction(e)}};r?setTimeout(a,r):a()}run(e,t){var i=this.getInnerFunction(),r=K()(K()({},this.getScope()),i);return t$(e,t?K()({$args:t},r):r,i)}getElementById(e){if(!e){var t,i,r=null!==(t=null===(i=this.getRootElement())||void 0===i?void 0:i.parent)&&void 0!==t?t:null;return r===yU?this.getRootElement():r}return"$$"===e?this.getRootElement():super.getElementById(e)}static animate(e,t){var{left:i,top:r,scaleWidth:n,scaleHeight:a,opacity:o,rotate:s=0,easing:l="ease-in",duration:u=500}=t,c=new Promise(((t,c)=>{it("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:u,finalStyle:{left:i,top:r,opacity:o,rotate:s,scaleX:n,scaleY:a},success:t,fail:c})}));return"devtools"===r$&&(c=Promise.all([c,Js(u)])),c}doAnimation({id:e,emitEvent:t=!0,animationName:i,animation:r}){var n=this;return zo()((function*(){var a=!r&&i?n.animations[i]:r,o=n.getElementById(e);if(a&&o){var{keys:s,duration:l,easing:u,setInitialStyle:c=!0}=a;if(!(((null==s?void 0:s.length)||0)<2)){var d=0;for(var h of Object.keys(s)){var p=s[+h],f=n.getDataValue("offset",p),g=n.getDataValue("opacity",p),_=n.getDataValue("left",p),m=n.getDataValue("top",p),v=n.getDataValue("rotate",p),y=n.getDataValue("scaleX",p),A=n.getDataValue("scaleY",p),b=l*f,E=gU({opacity:g,left:_,top:m,rotate:v,scaleWidth:y,scaleHeight:A});if(b<=0)c&&(yield n.setStyle(e,E));else{var w=K()(K()({},E),{},{easing:u,duration:b-d});w.left=E.left,w.top=E.top,yield n$.animate(o,w),d=b}}i&&t&&(yield n.emitComponentEvent(VL.ANIMATIONEND,{animation:i}))}}}))()}updateInnerStyle(){if(this.innerStyles)for(var e of Object.keys(this.innerStyles)){var t=this.innerStyles[e];t.expr&&!this.run(t.expr)||this.updateStyle(t.style,e)}}setStyle(e,t){var i=()=>super.setStyle,r=this;return zo()((function*(){var n,a=r.getDataValue("_useApx")?r.convertToApxRatio(t):t,o=e;"$$"===o&&(o=null===(n=r.getRootElement())||void 0===n?void 0:n.name);if(a){for(var s of Object.keys(a))a[s]=r.convertApxStyle(a[s]);var l;if(o)yield i().call(r,o,a);else null===(l=r.parent)||void 0===l||l.setStyle("container",a)}}))()}convertApxStyle(e){return e&&"string"==typeof e?e.replace(/([+-]?\d+(?:\.\d+)?)apx/g,((e,t)=>`${Number(t*this.ratio)}px`)):e}updateStyle(e,t){if(e)for(var i of Object.keys(e)){var r=i,n=e[i];if(i.includes("Expr")){var a=i.split("Expr");2===a.length&&([r]=a,n=this.run(n))}this.setStyle(t,{[r]:n})}}removeInnerStyle(){if(this.innerStyles)for(var e of Object.keys(this.innerStyles)){var t=this.innerStyles[e];this.removeStyle(t.style,e)}}removeStyle(e,t){if(e)for(var i of Object.keys(e))this.setStyle(t,{[i]:null})}getScope(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}getExprInnerVars(){return void 0===i$[this.adCustomId]&&(i$[this.adCustomId]={}),i$[this.adCustomId]}getInnerFunction(){var e=this.getExprInnerVars();return K()({"#getVar":t=>e[t],"#measureText":(e,t)=>zF.getTextWidth(e,t)},this.props.innerFunctions||{})}updateBubbleEvent(){var e=this.getRootElement();e&&wU(e,(e=>{if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){var t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}onClick(e,t,{handleTriggerClick:i=!0,handleClickLimit:r=!0,isReport:n=!1,clickType:a=0}={}){var o=e=>{null!==this.reporter&&(i&&!this.reporter.judgeTriggerClick(e,n)||r&&this.reporter.isClickLimit(e,a))||t(e)};return this.clickCallbackMap.set(t,o),super.onClick(e,o)}offClick(e,t){return this.clickCallbackMap.has(t)?super.offClick(e,this.clickCallbackMap.get(t)):super.offClick(e,t)}checkUseApx(){if(this.getDataValue("_useApx"))for(var e of Object.keys(this.style))this.style[e]=this.convertToApxRatio(this.style[e])}convertToApxRatio(e){var{ratio:t}=this,i=/(\d+)px/g,r={};for(var n of Object.keys(e))if(null!=MB&&MB.includes(n)){var a=e[n],o=a;"number"==typeof a?o=a*t:"string"==typeof a?o=a.replace(i,((e,i)=>{var r=Number(i);return Number.isNaN(r)?e:r*t+"px"})):Array.isArray(a)&&null!=a&&a.every((e=>"number"==typeof e))&&(o=a.map((e=>e*t))),r[n]=o}else r[n]=e[n];return r}}class a$ extends n${getSubComponentProps(){return this.getCommonSubComponentProps()}constructor(e){var t;if((super(e,{autoRegister:!1}),this.style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},this.isShow=void 0,this.isLinearGradient=!1,this.isLinearGradientReverse=!1,this.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",this.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,this.isShow=this.getDataValueWithDefault("_isShow",!0),this.isShow)&&("feedback"===this.template.type?this.setStyle("container",{display:"inline-block"}):"end"===this.template.type&&this.setStyle("container",{display:"none"}),this.updateStyle(this.template.style||{},"container"),null!==(t=this.template.style)&&void 0!==t&&t.background)){var i=this.linearGradientRe.exec(this.template.style.background.replace(/ /g,""));if(i){var[r,n]=i.slice(1);this.isLinearGradient=!0,Number(r)>Number(n)&&(this.isLinearGradientReverse=!0)}}}render(){var{template:e}=this.props,t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t=`Custom${e.type[0].toUpperCase()}${e.type.slice(1)}`),this.isShow&&t?`\n      <view id="container">\n        ${this.isLinearGradient?`\n          <image id="linear-gradient" class="${this.isLinearGradientReverse?"reverse":""}" src="${this.linearGradientSrc}"></image>\n        `:""}\n        <${t}></${t}>\n      </view>\n    `:'<view id="blank"></view>')}}a$.subComponents=()=>({CustomLayout:s$,CustomText:l$,CustomImage:u$,CustomButton:c$,CustomVideo:p$,CustomFeedback:f$,CustomEnd:g$,CustomFor:_$,CustomCarousel:E$,CustomCountdown:w$});class o$ extends n${constructor(e){var t,i,r;super(e),this.style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},this.state={hidden:!0},this.isFullScreen=void 0,this.useDefaultFeedback=void 0,this.exposureUntilVideoPlay=void 0,this.exportAid=void 0,this.enableTimer=void 0,this.hideAfterLanding=void 0,this.isMulti=void 0,this.isWidthRequired=void 0,this.multiShowList=void 0,this.show=()=>{this.setStyle("body",{hidden:!1,opacity:1}),this.emitAdCustomEvent(KL.CHECKEXPOSURE)},this.hide=()=>{this.setStyle("body",{hidden:!0,opacity:0}),this.emitAdCustomEvent(KL.CHECKEXPOSURE)},this.showFeedback=()=>{var{useDefaultFeedback:e}=this;e&&(this.setStyle("tipContainer",{hidden:!1}),setTimeout((()=>{this.setStyle("tipContainer",{hidden:!0})}),3e3))},this.handleEnterForeground=()=>{this.emitComponentEvent(jL.APPENTERFOREGROUND),this.emitAdCustomEvent(KL.APPENTERFOREGROUND)},this.handleEnterBackground=()=>{this.emitComponentEvent(jL.APPENTERBACKGROUND),this.emitAdCustomEvent(KL.APPENTERBACKGROUND)},this.handleContainerClick=e=>{var t,i;null!==(t=this.manager)&&void 0!==t&&t.isMulti||(this.emitComponentEvent(jL.CONTAINERTAP),null===(i=this.reporter)||void 0===i||i.handleClick(e,2))},this.isFullScreen=this.getDataValueWithDefault("isFullScreen",!1),this.enableTimer=this.getDataValueWithDefault("enableTimer",!0),this.useDefaultFeedback=this.getDataValueWithDefault("useDefaultFeedback",!0),this.exposureUntilVideoPlay=this.getDataValueWithDefault("exposureUntilVideoPlay",!1),this.hideAfterLanding=this.getDataValueWithDefault("hideAfterLanding",!1),this.exportAid=this.getDataValueWithDefault("exportAid",!1),this.isMulti=null!==(t=null===(i=this.template)||void 0===i||null===(r=i.tplConfig)||void 0===r?void 0:r.isMulti)&&void 0!==t&&t,this.isWidthRequired=this.getDataValueWithDefault("isWidthRequired",!1),this.multiShowList=this.getDataValue("multiShowList"),this.bindEvent(),this.updateInnerStyle(),this.updateStyle(this.template.style||{},"container");var n=["left","top"];!wW.isWaGame&&n.push("fixed"),this.isWidthRequired&&n.push("width"),!this.isFullScreen&&e.adPosition&&this.setStyle("body",FL(e.adPosition,n))}destroy(){super.destroy(),this.unbindEvent()}ready(e){super.ready(e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}getCustomItemProps(e,t){return K()(K()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}bindEvent(){T_(this.handleEnterForeground),Xm(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}unbindEvent(){C_(this.handleEnterForeground),Jm(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}getRootData(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}doAction({payload:e,args:t}){var i,r;if(e.action===GL.HIDEAD)"value"in e&&e.value.preventClose?null===(i=this.manager)||void 0===i||i.hide(!0):null===(r=this.manager)||void 0===r||r.hide();else if(e.action===GL.RELOADAD){var n;null===(n=this.manager)||void 0===n||n.reload()}else e.action===GL.CHANGEMULTISHOW&&(e.value.listExpr?this.emitAdCustomEvent(KL.CHANGEMULTISHOW,{list:this.run(e.value.listExpr,t)}):e.value.list?this.emitAdCustomEvent(KL.CHANGEMULTISHOW,{list:e.value.list}):null!=t&&t.list&&this.emitAdCustomEvent(KL.CHANGEMULTISHOW,{list:t.list}))}isShow(){var e,t=this.getElementById("body");return null!==(e=!(null!=t&&t.style.hidden))&&void 0!==e&&e}render(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';var{template:e}=this.props,{isFullScreen:t}=this,{useDefaultFeedback:i}=this;return`\n      <view id="body" class="${t?"full-size":""}">\n        ${e?`\n          <view id="container" class="wx-ad-custom ${t?"full full-size":""}">\n            ${e.children.map(((e,t)=>`\n              <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n            `)).join("\n")}\n          </view>\n          ${i?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':""}\n        `:""}\n      </view>\n    `}}o$.subComponents={CustomItem:a$};class s$ extends n${constructor(e){super(e),this.state={children:[]},this.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},this.baseType=void 0,this.classRow=!1,this.classColumn=!1,this.baseType=this.options.baseType||JL.COMMON,this.baseType===JL.ROW?this.classRow=!0:this.baseType===JL.COLUMN?this.classColumn=!0:(this.baseType,JL.PROPORTION),this.state.children=this.template.children||[],this.updateInnerStyle()}doAction({payload:e}){if(e.action===GL.ADDCHILDREN){var{value:t}=e,i=Array.isArray(t)?t:[t],r=[...this.state.children,...i];this.setState({children:r})}}ready(e){super.ready(e),this.initProportionComponent()}initProportionComponent(){var e=this.getDataValue("mProportion");if(e){var t=this.getRootElement().layoutBox;if(t.width/t.height>e){var i=Math.round(t.height*e);this.setStyle("container",{width:i,left:(t.width-i)/2,top:0})}else{var r=Math.round(t.width/e);this.setStyle("container",{height:r,top:(t.height-r)/2,left:0})}}}getSubComponentProps(e,t){return K()(K()({},this.getCommonSubComponentProps()),{},{template:this.state.children[parseInt(t,10)]})}render(){var{children:e}=this.state,t=["layout"];return this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column"),`\n      <view\n        id="container"\n        class="${t.join(" ")}"\n      >\n      ${e.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n      `)).join("\n")}\n      </view>\n    `}}s$.subComponents=()=>({CustomItem:a$});class l$ extends n${constructor(e){super(e),this.style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},this.state={text:""},this.baseType=void 0,this.classEllipsis=!1,this.maxLen=void 0;var t=this.options.baseType||tB.NICKNAME;this.baseType=t,t===tB.COMMON?this.initCommonComponent():t===tB.NICKNAME?this.initNickNameComponent():t===tB.DESC&&this.initDescComponent(),this.classEllipsis=this.getDataValueWithDefault("isEllipsis",!0),this.maxLen=this.getDataValueWithDefault("maxLen",null),this.updateInnerStyle()}ready(e){super.ready(e),this.baseType===tB.RELATION&&this.initRelationComponent()}initCommonComponent(){this.state.text=this.getDataValueWithDefault("text","")}initNickNameComponent(){var e=this.getAdData(),t=[ZB.APPLE_APP_STORE,ZB.OPEN_PLATFORM_APP_MOB].includes(e.product_type),i=EW("video",e.crt_size),r=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:e.crt_size===HB.CRT_SIZE_GRID},{path:["crtInfo","0","wxgame_video_card","title"],condition:i},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:[ZB.WE_CHAT_ARTICLE,ZB.GDT_WE_CHAT_ARTICLE].includes(e.product_type)},{value:"电商推广",condition:[ZB.WE_CHAT_SHOP,ZB.JD_URL].includes(e.product_type)},{value:"活动推广"}];this.state.text=TU(e,r)}initDescComponent(){var e=this.getAdData(),t=[ZB.APPLE_APP_STORE,ZB.OPEN_PLATFORM_APP_MOB].includes(e.product_type),i=EW("video",e.crt_size),r=e.product_type===ZB.MINI_GAME,n=e.product_type===ZB.WECHAT,a=[ZB.WE_CHAT_ARTICLE,ZB.GDT_WE_CHAT_ARTICLE].includes(e.product_type),o=[ZB.WE_CHAT_SHOP,ZB.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:i},{path:["wording"],condition:[HB.CRT_SIZE_MULTI_POS_NEW_PIC,HB.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:a},{value:"今日商品推荐",condition:o},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:n},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=TU(e,s)}initRelationComponent(){var e=this;return zo()((function*(){var t=e.getAdData();if(8===uB(t,["crtInfo","0","card_info","mp_tag_type"])){var{aid:i}=t,r=Date.now(),n=uB(t,["button_action","button_text"],"");try{var a,o=yield lF({aid:i,buttonText:n}),s=Date.now();e.adProxy.reportRelationFetchDuration({startTime:r,endTime:s,showTime:(null===(a=e.manager)||void 0===a?void 0:a.showDetailTime)||0});var l="";if(o){var{count:u,descText:c}=o;l=e.getDataValueWithDefault("text","",void 0,{args:{count:u,descText:c}}),e.emitComponentEvent(zL.RELATIONFETCHED,{count:u,descText:c})}e.setState({text:l})}catch(t){e.setState({text:""}),e.adProxy.reportAdMonitorData(EB.RELATION_FETCH_ERROR,t)}}}))()}doAction({payload:e}){e.action===GL.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",e.value)})}render(){var{classEllipsis:e}=this,{text:t}=this.state;return this.classEllipsis&&null!==this.maxLen&&t&&(t=SL(t,2*this.maxLen)),`\n      <view id="container">\n        <text\n          id="text"\n          class="text ${e?"text-ellipsis":""}"\n          value="${t}"\n        ></text>\n      </view>\n    `}}class u$ extends n${constructor(e){super(e),this.style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},this.state={imgUrl:""},this.classAppIcon=!1,this.classIcon=!1,this.useBgMode=!1,this.baseType=void 0,this.useBgMode=this.getDataValueWithDefault("useBgMode",!1);var t=this.options.baseType||eB.ICON;switch(this.baseType=t,t){case eB.COMMON:this.initCommonComponent();break;case eB.AD:this.initADComponent();break;case eB.ICON:this.initIconComponent()}this.useBgMode,this.updateInnerStyle()}initCommonComponent(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}initIconComponent(){var e=this.getAdData(),t=[ZB.APPLE_APP_STORE,ZB.OPEN_PLATFORM_APP_MOB].includes(e.product_type),i=e.crt_size===RB.CRT_SIZE_MULTI_POS_GRID,r=[ZB.WE_CHAT_SHOP,ZB.JD_URL].includes(e.product_type),n=EW("video",e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;var a=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:i},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:n},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:r},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=TU(e,a)}initADComponent(){var e=this.getAdData(),t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}doAction({payload:e}){e.action===GL.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",e.value)})}render(){var{classAppIcon:e,classIcon:t}=this,i=this.baseType===eB.AD,{imgUrl:r}=this.state,n=["image-img"];return e&&n.push("image-img-appicon"),t&&n.push("image-img-icon"),`\n      <view id="container" class="image">\n        <image\n          id="img"\n          ${i?'bubble-event="false"':""}\n          class="${n.join(" ")}"\n          src="${r}"\n        >\n      </view>\n    `}}class c$ extends n${constructor(e){super(e),this.style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},this.state={buttonText:""},this.downloadProgress=0,this.isHandleDownload=!1,this.handleAdCustomEvent=({action:e,value:t={}})=>{e===KL.CHANGEADBTNTEXT&&t.text&&(this.setState({buttonText:t.text}),t.progress&&(this.downloadProgress=t.progress))},this.handleButtonClick=e=>{this.emitAdCustomEvent(KL.BTNTAP,{event:e,isHandleDownload:this.isHandleDownload}),this.emitComponentEvent(HL.BUTTONTAP,{event:e})};var t=this.options.baseType||iB.LOGICCOMMON;t===iB.COMMON?this.initCommonComponent():t===iB.LOGICCOMMON&&this.initLogicCommonComponent(),this.updateInnerStyle(),this.setStyle("downloadProgressBar",{width:`${this.downloadProgress}%`}),this.setStyle("downloadTextContainer",{width:1e4/this.downloadProgress+"%"}),this.onClick("container",this.handleButtonClick,{isReport:!0,clickType:1})}destroy(){super.destroy(),this.offClick("container",this.handleButtonClick)}getButtonText(){return this.state.buttonText}initCommonComponent(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}initLogicCommonComponent(){var e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===OB.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}doAction({payload:e}){e.action===GL.BUTTONSETTEXT&&this.setText(e.value)}setText(e){this.setState({buttonText:this.getDataValue("text",e)})}render(){var{isHandleDownload:e}=this,{buttonText:t}=this.state;return`\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="${t}"></text>\n        ${e?`\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="${t}"></text>\n            </view>\n          </view>\n        `:""}\n      </view>\n    `}}var d$={videoDataMap:{}},h$=(e,t={})=>{e&&(d$.videoDataMap[e]=t)};class p$ extends n${constructor(e){super(e),this.style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},this.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},this.src="",this.poster="",this.isShowVoice=!0,this.isShowProgress=!0,this.isShowCountDown=!1,this.isShowEndPage=!1,this.voicePlacement=null,this.countDownPlacement=null,this.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",this.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",this.currentTime=0,this.videoDuration=0,this.objectFit="contain",this.baseType=void 0,this.toggleMuted=()=>{this.setState({muted:!this.state.muted}),this.emitComponentEvent(YL.MUTEDCHANGE,{muted:this.state.muted})},this.handleCustomEvent=({action:e,value:t={}})=>{switch(e){case KL.ADSHOWHALF:this.state.isEndPageShowing||this.operateVideoPlay("play");break;case KL.ADHIDEHALF:this.state.isEndPageShowing||this.operateVideoPlay("pause");break;case KL.APPENTERBACKGROUND:var i=Math.min(this.currentTime,this.videoDuration);t.inAdDetail?this.reportVideoPlay("partial","exit",i):this.reportVideoPlay("partial","app_exit",i);break;case KL.ENDPAGEINIT:this.isShowEndPage=this.getDataValueWithDefault("isShowEndPage",!1),this.isShowEndPage&&this.setState({loop:!1});break;case KL.ENDPAGEHIDE:this.isShowEndPage&&(this.setState({isEndPageShowing:!1}),this.operateVideoPlay("play"));break;case KL.ENDPAGESHOW:this.isShowEndPage&&this.setState({isEndPageShowing:!0});break;case KL.BTNTAP:this.reportVideoPlay(this.currentTime<this.videoDuration?"partial":"complete","land",this.videoDuration)}},this.handleError=e=>{this.adProxy.reportAdMonitorData(EB.AD_VIDEO_LOAD_FAILED,e)},this.handleTimeUpdate=e=>{var t,{duration:i,position:r}=e;if(null!=i&&null!=r){var n=Math.min(1,r/i);this.setStyle("videoProgressPlayed",{width:100*n+"%"}),this.isShowCountDown&&this.setState({countDownNumber:`${Math.ceil(i-r)}s`}),this.emitComponentEvent(YL.VIDEOTIMEUPDATE,{event:e,rate:n}),this.currentTime=1e3*r,this.videoDuration||(this.videoDuration=1e3*i);var a={currentTime:this.currentTime,duration:this.videoDuration},o=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;h$(o,a)}},this.handleEnded=e=>{var t;this.emitComponentEvent(YL.VIDEOENDED,{event:e}),this.emitAdCustomEvent(KL.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:this.baseType}}),this.reportVideoPlay("viewable","end",this.videoDuration),B&&this.reportVideoPlay("partial","start");var i={currentTime:this.videoDuration,duration:this.videoDuration},r=(null===(t=this.manager)||void 0===t?void 0:t.adCustomId)||this.adCustomId;h$(r,i),this.currentTime=0,this.isShowEndPage&&this.emitAdCustomEvent(KL.SHOWENDPAGE,{videoId:this.id}),this.setState({countDownNumber:null})},this.handlePlay=e=>{this.emitComponentEvent(YL.VIDEOPLAY,{event:e}),this.emitAdCustomEvent(KL.ADVIDEOPLAY),this.reportVideoPlay("partial","start",Math.min(this.currentTime,this.videoDuration))},this.handlePause=e=>{this.emitComponentEvent(YL.VIDEOPAUSE,{event:e}),this.emitAdCustomEvent(KL.ADVIDEOPAUSE),this.reportVideoPlay("partial","close",Math.min(this.currentTime,this.videoDuration))},this.baseType=this.options.baseType||rB.AD,this.baseType===rB.COMMON?this.initCommonComponent():this.baseType===rB.AD&&this.initADComponent(),this.isShowVoice=this.getDataValueWithDefault("isShowVoice",!0),this.voicePlacement=this.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),this.state.muted=this.getDataValueWithDefault("muted",!0),this.state.loop=this.getDataValueWithDefault("loop",!0),this.isShowProgress=this.getDataValueWithDefault("isShowProgress",!0),this.isShowCountDown=this.getDataValueWithDefault("isShowCountDown",!1),this.countDownPlacement=this.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),this.objectFit=this.getDataValueWithDefault("objectFit","contain"),this.updateInnerStyle(),this.bindEvent(),setTimeout((()=>{this.emitComponentEvent(YL.MUTEDCHANGE,{muted:this.state.muted})}),0)}destroy(){super.destroy(),this.unbindEvent(),this.removeAdCustomListener()}bindEvent(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}unbindEvent(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}initCommonComponent(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}initADComponent(){var e,t=this.getAdData();this.src=this.getDataValue("src")||uB(t,["video_info","videoUrl"])||uB(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||uB(t,["video_info","thumbUrl"])||uB(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=uB(t,["wx_game_video","short_video","video_duration"])||uB(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;var i={currentTime:0,duration:this.videoDuration},r=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;h$(r,i),this.emitAdCustomEvent(KL.REPORTTIMEPOINT,{key:"p8"})}doAction({payload:e}){switch(e.action){case GL.VIDEOTOGGLEMUTED:this.toggleMuted();break;case GL.VIDEOPLAY:this.operateVideoPlay("play");break;case GL.VIDEOPAUSE:this.operateVideoPlay("pause");break;case GL.VIDEOSTOP:this.operateVideoPlay("stop")}}operateVideoPlay(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});var t=this.getElementById("video");null!=t&&t[e]&&t[e]()}}reportVideoPlay(e,t,i=0){this.baseType===rB.AD&&this.emitAdCustomEvent(KL.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:i,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}render(){var{src:e,poster:t,isShowVoice:i,mutedIconSrc:r,voiceIconSrc:n,voicePlacement:a,countDownPlacement:o,isShowProgress:s,isShowCountDown:l,objectFit:u}=this,{muted:c,loop:d,autoplay:h,countDownNumber:p,isEndPageShowing:f}=this.state,g=["video-voice-box"],_=["video-count-down"];return g.push(`video-voice-box-${a}`),_.push(`video-count-down-${o}`),`\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="${e}"\n          poster="${t}"\n          controls="false"\n          muted="${c}"\n          loop="${d}"\n          autoplay="${h}"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="${u}"\n        >\n          ${!f&&i?`\n            <view id="videovoicebox" bubble-event="false" class="${g.join(" ")}">\n              <image\n                src="${c?r:n}"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          `:""}\n          ${s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':""}\n          ${!f&&l&&p?`\n            <text id="video-count-down" class="${_.join(" ")}" value="${p}"></text>\n          `:""}\n        </video>\n      </view>\n    `}}class f$ extends n${constructor(e){super(e),this.style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},this.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},this.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",this.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",this.dislikeReasonHandlers={},this.baseType=void 0,this.handleTagClick=e=>{if(this.baseType===nB.SIMPLE)return this.handleSimpleTagClick(e);var{isShowFeedback:t,isShowFeedbackMenu:i}=this.state;t||i?this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(this.setState({isShowFeedback:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitAdCustomEvent(KL.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),this.emitComponentEvent($L.TAGTAP,{event:e}))},this.handleDislikeClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),this.updateMenuPosition(),this.updateInnerStyle(),this.emitComponentEvent($L.DISLIKETAP,{event:e})},this.handleFeedbackBtnClick=e=>{this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent($L.FEEDBACKBTNTAP,{event:e}),this.emitAdCustomEvent(KL.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),this.emitAdCustomEvent(KL.FEEDBACKBTNTAP)},this.checkUseApx(),this.baseType=this.options.baseType||nB.COMMON,this.bindEvent(),this.updateInnerStyle()}destroy(){super.destroy(),this.unbindEvent()}bindEvent(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}unbindEvent(){for(var e of(this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick),Object.keys(this.dislikeReasonHandlers))){var t=this.dislikeReasonHandlers[e];this.offClick(e,t)}}updateMenuPosition(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}handleSimpleTagClick(e){this.emitAdCustomEvent(KL.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(KL.HIDEAD),this.emitComponentEvent($L.TAGTAP,{event:e})}handleDislikeReasonClick(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent($L.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(KL.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});var i=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===i?this.emitAdCustomEvent(KL.SHOWFEEDBACK):"hide"===i&&this.emitAdCustomEvent(KL.HIDEAD)}render(){var{isShowFeedback:e,isShowFeedbackMenu:t,position:i}=this.state,r=["feedback-list"],n=["feedback-list"];i&&(r.push(`feedback-list-${i.toLowerCase()}`),n.push(`feedback-list-${i.toLowerCase()}`));var a=this.baseType===nB.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return`\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="${this.baseType===nB.SIMPLE?"close-icon":"feedback-icon"}" src="${a}"></image>\n        </view>\n        ${e?`\n          <view id="menu1" key="menu1" class="${r.join(" ")}">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        `:""}\n        ${t?`\n          <view id="menu2" key="menu2" class="${n.join(" ")}">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        `:""}\n      </view>\n    `}}class g$ extends n${constructor(e){super(e),this.style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},this.state={isShowEndPage:!1},this.children=[],this.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",this.showTime=0,this.cardInfo=void 0,this.backgroundImage="",this.exposured=!1,this.viewableExposured=!1,this.viewableExposureTimer=null,this.handleAdCustomListener=({action:e})=>{switch(e){case KL.SHOWENDPAGE:this.setState({isShowEndPage:!0}),this.emitAdCustomEvent(KL.ENDPAGESHOW),this.showTime=Date.now(),!this.exposured&&this.reportEndPageExposure(),this.exposured=!0,this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)),this.emitComponentEvent(qL.SHOW);break;case KL.APPENTERBACKGROUND:this.state.isShowEndPage&&this.reportEndPageDuration();break;case KL.APPENTERFOREGROUND:this.state.isShowEndPage&&(this.showTime=Date.now());break;case KL.ADSHOWHALF:this.state.isShowEndPage&&(this.showTime=Date.now(),this.viewableExposured||(this.viewableExposureTimer=setTimeout((()=>{!this.viewableExposured&&this.reportEndPageExposure(!0)}),1e3)));break;case KL.ADHIDEHALF:this.state.isShowEndPage&&(this.reportEndPageDuration(),this.viewableExposureTimer&&(clearTimeout(this.viewableExposureTimer),this.viewableExposureTimer=null))}},this.handleReplay=()=>{this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(KL.ENDPAGEHIDE),this.emitComponentEvent(qL.HIDE),this.reportEndPage({act_type:1003}),this.emitComponentEvent(qL.REPLAY)},this.handleContainerClick=e=>{var t;this.reportEndPage({act_type:1002}),null===(t=this.reporter)||void 0===t||t.handleClick(e,2)};var t=this.getAdData();this.cardInfo=IL(t,["crtInfo",0,"card_info"],{});var{end_page_type:i}=this.cardInfo;i&&(this.backgroundImage=this.cardInfo.head_bg_img,this.setStyle("refresh",{padding:"13apx 12apx"}),this.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),this.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),this.children=this.getChildren(),this.bindEvent(),this.updateInnerStyle(),setTimeout((()=>{this.emitAdCustomEvent(KL.ENDPAGEINIT)}),0))}updateState(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}getSubComponentProps(e,t){return K()(K()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}bindEvent(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}destroy(){super.destroy(),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}reportEndPageDuration(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}reportEndPageExposure(e=!1){var t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}reportEndPage(e){this.emitAdCustomEvent(KL.REPORTENDPAGE,{data:e})}doAction({payload:e}){e.action===GL.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(KL.ENDPAGEHIDE),this.emitComponentEvent(qL.HIDE))}getChildren(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),i={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},n=this.template.id;r.feedBack={type:"feedback",id:`${n}_endPageFeedback`,style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:GL.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},i)}}],dislikeReasonTap:[{action:GL.TRIGGEREVENT,value:{eventName:qL.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:`${n}_endPageIconBig`,style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:`${n}_endPageNickBig`,style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:`${n}_endPageDescSmall`,style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:`${n}_endPageButton`,style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:GL.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},i)}}]}}},r.iconSmall={type:"image",id:`${n}_endPageIconSmall`,style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:`${n}_endPageNickSmall`,style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:`${n}_endPageLayoutSmall`,style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:`${n}_endPageDescBig`,style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};var a=this.getDataValue("childrenConf");if(a)for(var o of Object.keys(a))r[o]&&wL(r[o],a[o]);var s=[];return s=2===this.cardInfo.end_page_type?[r.feedBack,r.layoutSmall,r.descBig,r.button]:[r.feedBack,r.iconBig,r.nickBig,r.descSmall,r.button],3===e?s.concat(this.template.children||[]):s}render(){var{backgroundImage:e,children:t,refreshIconSrc:i}=this;return`\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        ${e?`<image src="${e}"></image>`:""}\n        ${t.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src=${i}></image>\n        </view>\n      </view>\n    `}}g$.subComponents=()=>({CustomItem:a$});class _$ extends n${constructor(e){super(e,{autoRegister:!1}),this.forArr=void 0,this.forType=this.options.baseType||sB.COMMON,this.forArr=this.getDataValueWithDefault("forArr",[]),this.forType===sB.COMMON?this.forArr=this.getDataValueWithDefault("forArr",[]):this.forType===sB.ADS&&(this.forArr=this.getAdDatas())}getSubComponentProps(e,t,i){var{template:r,forArr:n}=this;return K()(K()({},this.getCommonSubComponentProps()),{},{idPrefix:this.idPrefix+(r.id||"")+t,forType:this.forType,forItem:n[Number(t)],template:r.children[Number(i)],forIndex:Number(t)})}render(){var{template:e}=this.props;return`<Fragment>${this.forArr.map(((t,i)=>e.children.map(((e,t)=>`\n        <CustomItem get-props="getSubComponentProps:${i}:${t}"></CustomItem>\n      `)).join("\n"))).join("\n")}</Fragment>`}}_$.subComponents=()=>({CustomItem:a$});var m$=1,v$=(e,t)=>{m$=e/t},y$=/([+-]?\d+(?:\.\d+)?)apx/g,A$=/([+-]?\d+(?:\.\d+)?)rpx/g,b$=e=>null!=e&&e.replace?e.replace(A$,((e,t)=>`${(e=>{if(0===e)return 0;var{screenWidth:t}=UF,i=e/750*t;return i<0&&(i=-i),i=Math.floor(i+1e-4),e<0?-i:i})(Number(t))}px`)):e;class E$ extends n${constructor(e){super(e),this.style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},this.baseType=void 0,this.showCount=void 0,this.allCount=void 0,this.animateCount=void 0,this.allIndexList=void 0,this.size=void 0,this.duration=void 0,this.isViewable=!1,this.isPlaying=!1,this.animated=!1,this.timerSet=new Set,this.disabled=void 0,this.isCol=void 0,this.handleMaskClick=e=>{var t,i=null!=this.moveTime?(Date.now()-this.moveTime)/this.duration*this.size:0;t=this.animated?-this.animateCount*this.size+i:-i;var r=(this.isCol?e.relativeY:e.relativeX)-t,n=Math.floor(r/this.size);this.emitComponentEvent(QL.UNITTAP,{index:n,event:e})},this.handleAdCustomEvent=({action:e})=>{[KL.ADSHOWHALF].includes(e)?(this.isViewable=!0,this.autoplay()):[KL.ADHIDEHALF].includes(e)&&(this.isViewable=!1,this.clearTimers())},this.moveTime=null,this.baseType=this.options.baseType||lB.ROWLOOP,this.showCount=this.getDataValueWithDefault("showCount",0),this.allCount=this.getDataValueWithDefault("allCount",0),this.animateCount=this.allCount-this.showCount,this.size=((e,t=!0)=>{var i=t?b$(e):e;return i&&"string"==typeof i?i.replace(y$,((e,t)=>`${Number(t*m$)}px`)):i})(this.getDataValueWithDefault("size","0px")).replace("px",""),this.duration=this.getDataValueWithDefault("duration",1500),this.disabled=this.getDataValueWithDefault("disabled",!1),this.allIndexList=Array.from({length:this.allCount}).map(((e,t)=>t)),this.isCol=this.baseType===lB.COLUMNLOOP,this.onClick("mask",this.handleMaskClick),this.baseType===lB.ROWLOOP?this.initCarousel("width"):this.baseType===lB.COLUMNLOOP&&this.initCarousel("height"),this.updateInnerStyle()}destroy(){super.destroy(),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}initCarousel(e){this.setStyle("container",{[e]:this.showCount*this.size}),this.setStyle("list",{[e]:this.allCount*this.size}),this.addAdCustomListener(this.handleAdCustomEvent)}clearTimers(){for(var e of this.timerSet)clearTimeout(e)}autoplay(){var e=this;return zo()((function*(){if(e.isViewable&&!e.isPlaying){var t=e.baseType===lB.ROWLOOP?"left":"top";if(e.disabled)e.emitComponentEvent(QL.SHOWCHANGE,{list:e.allIndexList.slice(0,e.showCount)||[]}),e.isPlaying=!1;else if(e.animateCount<=0)e.emitComponentEvent(QL.SHOWCHANGE,{list:e.allIndexList||[]}),e.isPlaying=!1;else{e.isPlaying=!0;for(var i=function(t){var{animated:i}=e,r=setTimeout((()=>{e.timerSet.delete(r);var n=i?e.allIndexList.slice(e.allCount-t-e.showCount,e.allCount-t):e.allIndexList.slice(t,t+e.showCount);e.emitComponentEvent(QL.SHOWCHANGE,{list:n})}),t*e.duration);e.timerSet.add(r)},r=0;r<e.animateCount;r+=1)i(r);e.moveTime=Date.now();try{yield e.doAnimation({id:"list",emitEvent:!1,animation:{keys:[{offset:0,[t]:e.animated?-1*e.animateCount*e.size:0},{offset:1,[t]:e.animated?0:-1*e.animateCount*e.size}],duration:e.duration*e.animateCount,easing:"linear"}})}catch(e){}e.animated=!e.animated,e.isPlaying=!1,e.moveTime=null;var n=setTimeout((()=>{e.timerSet.delete(n),e.autoplay()}),e.duration/4);e.timerSet.add(n)}}}))()}getCustomItemProps(e,t){return K()(K()({},this.getCommonSubComponentProps()),{},{template:this.props.template.children[parseInt(t,10)]})}render(){var{template:{children:e}}=this.props,{baseType:t,allCount:i,showCount:r}=this;return e&&e.length&&i&&r?`\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="${["carousel-list",t===lB.ROWLOOP?"carousel-row":"carousel-col"].join(" ")}">\n          ${e.map(((e,t)=>`\n            <CustomItem get-props="getCustomItemProps:${t}"></CustomItem>\n          `)).join("\n")}\n        </view>\n      </view>\n    `:"<view></view>"}}E$.subComponents=()=>({CustomItem:a$});class w$ extends n${constructor(e){super(e),this.style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},this.state={countdownValue:""},this.children=[],this.handleAdCustomEvent=({action:e,value:t={}})=>{if(e===KL.CHANGECOUNTDOWN){var i=this.getElementById("countdownvalue"),r=2===t.value.toString().length?18:11;this.setStyle("countdownvalue",{width:r}),i&&(i.value=t.value)}},this.children=this.getChildren(),this.updateInnerStyle(),this.addAdCustomListener(this.handleAdCustomEvent)}destroy(){super.destroy()}getSubComponentProps(e,t){return K()(K()({},this.getCommonSubComponentProps()),{},{template:this.children[parseInt(t,10)]})}getChildren(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),i={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:GL.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},i)}}],dislikeReasonTap:[{action:GL.TRIGGEREVENT,value:{eventName:qL.VIDEODISLIKE}}]},data:{}}};var n=this.getDataValue("childrenConf");if(n)for(var a of Object.keys(n))r[a]&&wL(r[a],n[a]);var o=[];return o=[r.feedBack],3===e?o.concat(this.template.children||[]):o}render(){var{children:e}=this;return`\n      <view id="container" class="countdown" bubble-event="false">\n        ${e.map(((e,t)=>`\n          <CustomItem get-props="getSubComponentProps:${t}"></CustomItem>\n        `))}\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    `}}w$.subComponents=()=>({CustomItem:a$});var T$=o$;class C$ extends ty{}var S$,I$={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},x$=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),P$={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'},D$=0,R$=0,O$=0,k$=0,M$=0,N$=0,L$=0,B$=0,F$=!1,U$=!1,W$=!1,G$="",V$="",j$="",H$="",z$={},Y$="wxfile://ad/adinfos.txt",$$=L?200:400,q$=2e3,Q$=function(e,t=!0){var i=rA(this).adProxy.isTriggerClick(e),r=i?0:1;return t&&Z$.call(this,e,r),i},Z$=function(e,t=0){var i,r=rA(this);if(r.container&&r.container.layoutBox){var{width:n,height:a}=r.container.layoutBox,o=0;[0,2,3].includes(t)&&(r.clickCount+=1,o=r.clickCount);var s={slotid:zB[r.adType],costtype:null!==(i=r.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,click_time:Date.now(),click_cnt:o,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(n,10)||0,ad_height:parseInt(a,10)||0,press_interval:e.pressInterval,block_click:t};return r.adProxy.reportTouchClick(s)}},K$=function(){var e=rA(this),t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},X$=function(e,t){var i,r=rA(this),{width:n,height:a}=r.container.style,o={click_button:e,cost_type:null!==(i=r.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,slotid:zB[r.adType],is_game:F$?1:0,pageentertime:+new Date(r.adProxy.getProgramStartTime()),ad_width:parseInt(n,10)||0,ad_height:parseInt(a,10)||0,clientexptime:r.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:D$,screen_height:R$};return r.adProxy.reportAntifraud(o)},J$=function(e){var t,i=rA(this),r=+new Date,n={slotid:zB[i.adType],is_game:F$?1:0,costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,close_type:e,exposure_duration:r-i.startExposureTime-i.hideDuration,start_time:i.startExposureTime,close_time:r};return i.adProxy.reportCloseAction(n)},eq=function(e){var t,i=rA(this),r={slotid:zB[i.adType],is_game:F$?1:0,costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,button_type:e};return i.adProxy.reportAdEntranceExposure(r)},tq=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){var a=rA(this);e&&!i&&(a.clickFirstGradeTime=+new Date),a.adProxy.reportAdFeedbackData({adWidth:D$,adHeight:R$,adPosX:0,adPosY:0,expTime:a.startExposureTime,slotId:zB[a.adType],firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?a.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?+new Date:0,feedbackReason:n})},iq=function(e=!1){var t=rA(this);if(!t.isShowed)return Promise.resolve();if(!t.data||!t.container.layoutBox)return Js(100).then((()=>iq.call(this,e)));var{left:i,top:r,width:n,height:a}=t.container.layoutBox;if(!t.isShowedExposureReported)if(t.isShowedExposureReported=!0,t.startExposureTime=+new Date,t.adProxy.setTimePoint("p6"),L&&k.clientVersion>=671092224&&k.clientVersion<=671092533){t.adProxy.reportExposure({left:i,top:r,width:n,height:a,exposureType:"showed",source:t.source});var o="launch"===t.source?eF.firstShowSuccess:eF.secondShowSuccess;t.adProxy.reportAdMonitorData(o),t.adProxy.setSplashAdShowStatus()}else k.onReady((()=>{t.adProxy.reportExposure({left:i,top:r,width:n,height:a,exposureType:"showed",source:t.source});var e="launch"===t.source?eF.firstShowSuccess:eF.secondShowSuccess;t.adProxy.reportAdMonitorData(e),t.adProxy.setSplashAdShowStatus()}));if(!t.isViewableExposureReported){if(!e)return Js(1e3).then((()=>iq.call(this,!0)));t.adProxy.setTimePoint("p7"),t.isViewableExposureReported=!0,t.adProxy.isViewable=!0;t.adProxy.reportExposure({left:i,top:r,width:n,height:a,exposureType:"viewable",source:t.source})}return Promise.resolve()},rq=function(e){var t=rA(this);if(t.container&&t.container.layoutBox){var{left:i,top:r,width:n,height:a}=t.container.layoutBox,o=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-i,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,left:i,top:r,width:n,height:a,source:t.source});return o}},nq=function(e,t,i=!1){var r=rA(this),{appInfo:{apkName:n,channelId:a,urlScheme:o},product_type:s,dest_type:l}=r.data;if(12===s&&L&&4===r.androidAppState&&o&&o.trim().length>0)rq.call(this,e),X$.call(this,t,e),r.adProxy.launchApplication(o).catch((()=>{})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(12===s&&L&&r.isYYBInstalled){rq.call(this,e),X$.call(this,t,e);var{aid:u,traceid:c,apurl:d}=r.adProxy.data,h=["ANDROIDWX.YYB.WX.ADVERTISE",c,u,n.replace(/\./g,"_"),"0",15,d.indexOf("ad.wx.com")>-1?1:0].join("."),p=`tmast://download?oplist=1,2&pname=${n}&channelid=${a}&via=${h}`;r.adProxy.launchApplication(p).catch((()=>{aq.call(this,{isButton:i})})),r.lastJsapiName="launchApplication",r.isLandingPage=!0}else B&&46===s&&6===l?Promise.race([rq.call(this,e),Js(500)]).then((()=>{X$.call(this,t,e),aq.call(this,{isButton:i})})).catch((()=>{X$.call(this,t,e),aq.call(this,{isButton:i})})):(rq.call(this,e),X$.call(this,t,e),aq.call(this,{isButton:i}))},aq=function(e={}){var t=rA(this),i=t.adProxy.land(e);return i.then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(eF.landingPageFail,{source:t.source,msg:e})})),i},oq=function(e){var t=rA(this);for(var i of e)t[i]&&clearTimeout(t[i])},sq=function(){var e,t=rA(this);t.eventsMap={},null!==(e=t.appInfo)&&void 0!==e&&e.style&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.isCheckAdRequest=!0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",oq.call(this,["countTimer"]),k.onReady((()=>{var e,i,r;t.adProxy.reportTimePoints({slotid:zB[t.adType],costtype:null!==(e=t.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,splash_instance_id:null===(i=t.showInfo)||void 0===i?void 0:i.instanceId,scene:null===(r=t.showInfo)||void 0===r?void 0:r.scene,extInfo:{adInfos:t.adInfos}})}))},lq=function(e={},t){t&&J$.call(this,t),function(e){ot("closeSplashAd",e)}(e)},uq=function(e={},t={}){return rA(this).adProxy.fetch(!1,e,t)},cq=function(){var e=rA(this);if((L||B)&&!W$)try{e.adFetchResult=uq.call(this).catch((()=>{})),e.adProxy.reportAdMonitorData(eF.OTHER_ADS_EMIT_FETCH)}catch(e){}},dq=function(){var e,t=rA(this).data||{},i={};if(null!==(e=t.crtInfo)&&void 0!==e&&e.card_info)i=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){var r=t.crtInfo?t.crtInfo[0]:{};i=null!=r&&r.card_info?r.card_info:{}}return i},hq=function(){var e,t,i=rA(this),r=+new Date-i.startExposureTime-i.hideDuration,n=5e3;(null==i||null===(e=i.data)||void 0===e||null===(t=e.condition)||void 0===t?void 0:t.widget_gray_splashad_show_duration)>=n&&(n=i.data.condition.widget_gray_splashad_show_duration);var a=n-r;if(a>=0){var o=Math.ceil(a/1e3).toString();i.countDown&&(i.countDown.value=o),i.tplComponent&&i.tplComponent.emitAdCustomEvent(KL.CHANGECOUNTDOWN,{value:o}),i.countTimer&&clearTimeout(i.countTimer),i.countTimer=setTimeout((()=>{hq.call(this)}),1e3)}else"launch"===i.source&&i.isShowedExposureReported&&(i.isDynamic&&i.tplComponent.hide(),lq.call(this,{source:i.source,animated:!0},12))},pq=function(){var e=rA(this);if("launch"===e.source)e.topBar&&k$&&(e.topBar.style.top=k$,e.adFeedbackMenu.style.top=k$+34,e.adFeedbackList.style.top=k$+34),e.closeContainer&&(e.closeContainer.style.marginTop=M$-68),e.appInfo&&(e.appInfo.style.height=N$,e.appInfo.style.width=D$,e.isDarkMode&&(e.appInfo.style.backgroundColor="#191919",e.container.style.backgroundColor="#191919")),e.appIcon&&(e.appIcon.src=e.showInfo.appIcon,e.appIcon.style.marginTop=F$?16:28),e.appName&&(e.appName.value=e.showInfo.appName,e.appName.style.width=D$,e.appName.style.color=e.isDarkMode?"#ffffff":"#000000"),e.tipsContainer&&(e.tipsContainer.style.height=32,e.tipsContainer.style.width=D$,e.tipsLineOne.style.width=D$,e.tipsLineOne.style.color=e.isDarkMode?"#ffffff":"#000000",e.tipsLineTwo.style.color=e.isDarkMode?"#ffffff":"#000000"),e.adCloseTips&&(e.adCloseTips.style.height=R$-N$,e.adCloseTips.style.width=D$);else if("menu"===e.source){var t;if(!e.data)return;var{data:i}=e,r=dq.call(this),n=as();e.adIcon.src=r.thumb,e.adName.value=r.title,null!==(t=i.button_action)&&void 0!==t&&t.button_text&&(e.button.value=i.button_action.button_text),n.screenTop&&n.screenTop>0?O$=n.screenTop:O$&&0!==O$||(O$=88*R$/812),e.navigator.style.height=O$,e.navigator.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff",e.card.style.width=D$,e.card.style.height=N$-O$,e.adName.style.color=e.isDarkMode?"#ffffff":"#000000",e.adWording.style.color=e.isDarkMode?"#ffffff":"#000000",e.mediaBottom&&(e.mediaBottom.style.marginTop=M$-12,e.mediaBottom.style.width=D$,e.mediaBottom.style.backgroundColor=e.isDarkMode?"#191919":"#ffffff")}if("landscape"===e.crtOrientation){var a=e.data||{},o=dq.call(this);if(o&&e.adHeadInfo&&(e.adHeadIcon.src=o.thumb||"",e.adversName.value=o.title||"",e.adHeadInfo.style.width=D$/375*311,e.adversName.style.width=D$/375*311),a.hint_txt&&e.adTitle&&a.crt_size!==HB.CRT_SIZE_BIG_PIC?(e.adTitle.value=a.hint_txt,e.adTitle.style.width=D$/375*311):o.description&&e.adTitle?(e.adTitle.value=o.description,e.adTitle.style.width=D$/375*311):e.adTitle&&a.product_type&&oF[a.product_type]&&(e.adTitle.value=`今日${oF[a.product_type]}推荐`,e.adTitle.style.width=D$/375*311),a.button_action&&e.adButtonContainer){e.adButton.value=a.button_action.button_text,e.adButtonContainer.style.width=D$,e.closeContainer&&(e.closeContainer.style.marginTop=M$-132);var s={text:a.button_action.button_text,fontSize:17},l=xL(s)||80;e.adButton.style.width=l+8,e.adButton.style.width+12>100&&(e.adButton.style.width=e.adButton.style.width+12)}}},fq=function(e){var t,i,r,n,a=rA(this);if(a.dynamicElems||(a.dynamicElems={}),a.dynamicEmitter||Aq.call(this),!a.dynamicElems.root){var o=null==a||null===(t=a.data)||void 0===t?void 0:t.adDynamicList;null!=a&&null!==(i=a.data)&&void 0!==i&&i.template&&(o=a.data.template),z$=null===(r=o)||void 0===r||null===(n=r.tplConfig)||void 0===n?void 0:n.cacheFile;var s={};if(z$&&Object.keys(z$).length>0){var l,u,c,d=(null==a||null===(l=a.data)||void 0===l||null===(u=l.rerankingExtInfo)||void 0===u?void 0:u.material_hash)||"",h=(null===(c=a.data)||void 0===c?void 0:c.aid)||"";Object.keys(z$).forEach((e=>{try{var t=`wxfile://ad/${h}_${d}_${e}.png`;tn.accessSync(t),s=K()(K()({},s),{},{[e]:t})}catch(e){a.adProxy.reportAdMonitorData({idKey:33,idKeyGroup:1646},e)}}))}var p=mq.call(this,{tpl:o,source:e,cacheLocalFile:s}),f=p.getRootElement();a.dynamicElems.root=f,a.container.add(a.dynamicElems.root),p.show(),a.tplComponent=p,a.tplComponent.emitComponentEvent(jL.SPLASHADFIRSTRENDER)}},gq=function(){var e="",t=rA(this).adProxy.data,i=dq.call(this);return t.hint_txt&&t.crt_size!==HB.CRT_SIZE_BIG_PIC?e=t.hint_txt:i.description?e=i.description:t.product_type&&oF[t.product_type]&&(e=`今日${oF[t.product_type]}推荐`),e},_q=function(){var e="",t=rA(this).adProxy.data;return t.product_type&&oF[t.product_type]&&(e=`今日${oF[t.product_type]}推荐`),e},mq=function({tpl:e,source:t,cacheLocalFile:i}){var r=rA(this),n=r.adProxy.data,a=gq.call(this),o=dq.call(this),s=_q.call(this);return MF(o$,{manager:null,reporter:null,emitter:r.dynamicEmitter,adProxy:r.adProxy,template:e,systemInfo:{screenWidth:D$,screenHeight:R$},adData:n,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:k$||40,source:t,screenTop:O$||88*R$/812,isDarkMode:r.isDarkMode,adTitle:a||"",adSubTitle:s||"",cardInfo:o,materialFile:G$,materialBgFile:j$,materialBlurFile:H$,private:r,appIcon:r.showInfo.appIcon,appName:r.showInfo.appName,cacheLocalFile:i}},!1)},vq=function(e){var t=rA(this);Q$.call(this,e,!1)&&(K$.call(this)||"launch"===t.source&&lq.call(this,{source:t.source,animated:!0},11))},yq=function(e){var t=rA(this);switch(e.action){case KL.LANDAD:var{event:i,index:r,isButton:n}=e.value,a=r;if(!Q$.call(this,i,13===a))return;13===a&&nq.call(this,i,a,n),lq.call(this,{source:t.source,animated:!1},a),16===a&&(t.isLandingPage=!0,Js($$).then((()=>nq.call(this,i,a,n))));break;case KL.CHECKEXPOSURE:t.dynamicRendered=!0,t.isShowedExposureReported||iq.call(this),t.countTimer||hq.call(this);break;case KL.FEEDBACKREPORT:tq.call(this,e.value);break;case KL.FEEDBACKBTNTAP:t.data&&t.adProxy.openFeedbackUrl(1014);break;case KL.REPORTMMDATA:e.value.id&&e.value.data&&t.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case KL.SPLASHSKIPAD:var{event:o}=e.value;vq.call(this,o);break;case KL.REPORTADMONITORDATA:var s=null==e?void 0:e.value,{id:l,key:u,extInfo:c}=s,d=l?{idKeyGroup:l,idKey:u}:u;t.adProxy.reportAdMonitorData(d,c)}},Aq=function(){var e=rA(this);e.dynamicEmitter=new C$,e.dynamicEmitter.on("adCustomEvent",(e=>{yq.call(this,e)}))},bq=function(e,t=!1){var i=rA(this);e.forEach((e=>{var{root:t}=Lg()(P$[e.name]),r=nA.call(this,t);i[e.parent].add(r)})),i.componentsRenderred=!0,pq.call(this),t&&Eq.call(this)},Eq=function(){var e=rA(this);e.adFeedback&&!e.eventsMap.adFeedback&&e.adFeedback.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||tq.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),e.adFeedbackBtn&&!e.eventsMap.adFeedbackBtn&&e.adFeedbackBtn.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,tq.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===e.source&&lq.call(this,{source:e.source,animated:!0},17),e.data&&e.adProxy.openFeedbackUrl(1014))})),e.adDislikeBtn&&!e.eventsMap.adDislikeBtn&&e.adDislikeBtn.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,tq.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),e.adQualityBtn&&!e.eventsMap.adQualityBtn&&e.adQualityBtn.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,tq.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===e.source&&lq.call(this,{source:e.source,animated:!0},17))})),e.adDuplicateBtn&&!e.eventsMap.adDuplicateBtn&&e.adDuplicateBtn.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,tq.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===e.source&&lq.call(this,{source:e.source,animated:!0},17))})),e.adDismatchBtn&&!e.eventsMap.adDismatchBtn&&e.adDismatchBtn.on("click",(t=>{Q$.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,tq.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===e.source&&lq.call(this,{source:e.source,animated:!0},17))})),e.closeContainer&&!e.eventsMap.closeContainer&&e.closeContainer.on("click",(t=>{Q$.call(this,t,!1)&&(K$.call(this)||"launch"===e.source&&lq.call(this,{source:e.source,animated:!0},11))})),e.adMedia&&!e.eventsMap.adMedia&&e.adMedia.on("click",(e=>{wq.call(this,e,"adMedia")})),e.adButtonContainer&&!e.eventsMap.adButtonContainer&&e.adButtonContainer.on("click",(e=>{wq.call(this,e,"button")})),e.buttonContainer&&!e.eventsMap.buttonContainer&&e.buttonContainer.on("click",(t=>{if(Q$.call(this,t,!1))return e.data?(lq.call(this,{source:e.source,animated:!1},16),e.isLandingPage=!0,Js($$).then((()=>nq.call(this,t,16)))):void 0}));for(var t of["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"])e[t]&&!e.eventsMap[t]&&(e.eventsMap[t]=!0)},wq=function(e,t=""){var i,r,n=rA(this);if((!((null==n||null===(i=n.data)||void 0===i||null===(r=i.condition)||void 0===r?void 0:r.widget_gray_splash_click_area_switch)||0)||"button"===t)&&Q$.call(this,e,!1))return n.data&&"launch"===n.source?!F$||L?(nq.call(this,e,13),Js(200).then((()=>lq.call(this,{source:n.source,animated:!1},13)))):(lq.call(this,{source:n.source,animated:!1},13),nq.call(this,e,13)):void 0},Tq=function(){var e,t=rA(this);if(t.data){var i=dq.call(this);i&&"launch"===t.source&&(e={showMenu:!0,title:i.title,icon:i.thumb,success:()=>{t.adProxy.reportAdMonitorData(eF.showSplashAdMenuSuccess)},fail:e=>{t.adProxy.reportAdMonitorData(eF.showSplashAdMenuFail,{msg:e})}},ot("showSplashAdMenu",e))}},Cq=function(){var e=rA(this);try{var t,i=(null===(t=e.data)||void 0===t?void 0:t.aid)||"";e.adProxy.data&&e.adInfos&&e.adInfos.waidMap&&(e.adProxy.data.waid=e.adInfos.waidMap[i])}catch(e){}},Sq=function(){var e=rA(this);if(!e.data||""===e.data||"object"!=typeof e.data){var t=tn.readFileSync(V$,"utf-8");try{var i=JSON.parse(t);e.data=i,e.adProxy.data=i}catch(t){k.onReady((()=>{e.adProxy.reportAdMonitorData(eF.readFileDataFail,{source:e.source,msg:t})}))}}},Iq=function(){var e=rA(this);if("launch"===e.source){bq.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0}},xq=function(){var e=rA(this);if("launch"===e.source){var t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(L||k$>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),bq.call(this,t,!0),LL({state:0}),Jv.layout().then((()=>{LL({state:1}),Jv.auto=!0})).catch((t=>{k.onReady((()=>{e.adProxy.reportAdMonitorData(eF.secondInsertFail,{source:e.source,msg:t})}))}))}},Pq=function(){var e=rA(this);N$=Math.max(160,160*R$/812),M$=R$-N$,e.adMedia.style.width=D$,e.adMedia.style.height=M$;var t=9*R$/16;e.adMaterial.style.width=t,e.adMaterial.style.height=R$,e.adMaterial.style.left=t>D$?(D$-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=G$:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=D$,e.adMaterial.style.height=M$,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=D$,e.adMaterialContainer.style.height=M$,e.adMaterialBg.style.width=.45*R$*16/9,e.adMaterialBg.style.height=.45*R$,e.adMaterialBg.style.left=-(.45*R$*16/9-D$)/2,e.adMaterialLandscape.style.width=D$/375*311,e.adMaterialLandscape.style.height=D$/375*175,e.adMaterialBg.src=G$,e.adMaterialLandscape.src=G$,e.adCardInfo.style.width=D$/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=R$/1920},Dq=function(e){var t,i,r=rA(this);r.showInfo=e,r.source=e.source,r.isDarkMode=e.isDarkMode||!1,e.isGame&&(F$=e.isGame);var n=as();if(D$=e.screenWidth,R$=Math.max(n.screenHeight,e.screenHeight),Sq.call(this),null!=r&&null!==(t=r.data)&&void 0!==t&&t.adDynamicList||null!=r&&null!==(i=r.data)&&void 0!==i&&i.template){var{root:a}=Lg()('\n  <view id="container">\n  </view>\n');zY.call(this,a,I$),r.isDynamic=!0,fq.call(this,e.source)}else zY.call(this,(()=>{if(!S$){var{root:e}=Lg()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n');S$=e}return S$})(),x$),Pq.call(this);if(r.container.style.width=D$,r.container.style.height=R$,r.container.style.backgroundColor=r.isDarkMode?"#191919":"#ffffff",Jv.add(r.container),!r.isDynamic)try{tn.access({path:H$,success:()=>{r.adMaterialBg.src=H$}}),tn.access({path:j$,success:()=>{r.adMaterial.src=j$},fail:()=>{r.adMaterial.style.backgroundColor="#333333"}})}catch(e){}var o=[];"menu"!==r.source||r.isDynamic||(Sq.call(this),o=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===r.crtOrientation&&(o=o.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),r.navigator.style.hidden=!1,bq.call(this,o,!0)),NL({state:0}),Jv.layout().then((()=>{if(r.firstInserted=!0,r.isShowed=!0,NL({state:1}),"launch"!==r.source||r.isDynamic)Jv.auto=!0,r.container.requestLayout();else try{xq.call(this)}catch(e){k.onReady((()=>{r.adProxy.reportAdMonitorData(eF.secondRenderFail,{source:r.source,msg:e})}))}})).catch((e=>{k.onReady((()=>{r.adProxy.reportAdMonitorData(eF.firstInsertFail,{source:r.source,msg:e})}))}))},Rq=function(e,t={},i,r){var n=rA(this),a=B$+aF[r],o=eF[r];return k.onReady((()=>{var i;n.adProxy.reportAdMonitorData(o,t),n.adProxy.reportTimePoints({slotid:zB[n.adType],costtype:null!==(i=n.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,splash_instance_id:e.instanceId,errCode:a,scene:e.scene,extInfo:t})})),ML({adCallTime:Date.now(),errCode:a,show:!1,eventReceivedTime:i.startInit,cgiFetchStart:i.startFetchTime||0,cgiFetchCallBack:i.fetchCallbackTime||0})};class Oq extends oA{constructor(){super();var e=rA(this);e.canShowed=!1,e.today=TL(),e.countTimer=null,e.componentsRenderred=!1,e.isShowed=!1,e.firstInserted=!1,e.adFeedbackInserted=!1,e.isDynamic=!1,e.isShowedExposureReported=!1,e.startExposureTime=0,e.isViewableExposureReported=!1,e.isCheckAdRequest=!0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.isClosing=!1,e.isShowCloseTip=!1,e.clickFirstGradeTime=0,e.eventsMap={},e.source="",e.crtOrientation="portrait",e.adType="splashAd",e.adProxy=new HY({adUnitId:"",adType:e.adType}),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null,function(e){ce("onSplashAdButtonClicked",e)}((t=>{"close"===t.buttonType&&"launch"===t.source?(J$.call(this,10),oq.call(this,["countTimer"])):"close"===t.buttonType&&"menu"===t.source?J$.call(this,14):"back"!==t.buttonType||"menu"!==t.source||e.isLandingPage?"menu"===t.buttonType&&eq.call(this,1):J$.call(this,15)})),function(e){ce("onSplashAdWillLayout",e)}((t=>{if(t.menuViewFrame&&("launch"===t.source?(k$=t.menuViewFrame.y||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&k$&&e.tplComponent.emitComponentEvent(jL.SPLASHADMENUVIEW,{countdownTop:k$})):"menu"===t.source&&(O$=t.menuViewFrame.height||0,e.dynamicEmitter&&e.isDynamic&&e.tplComponent&&O$&&e.tplComponent.emitComponentEvent(jL.SPLASHADMENUVIEW,{navHeight:O$,menuHeight:172-O$})),B&&e.firstInserted&&!e.adFeedbackInserted))try{Iq.call(this)}catch(t){k.onReady((()=>{e.adProxy.reportAdMonitorData(eF.iosThirdInsertFail,{source:e.source,msg:t})}))}})),function(e){ce("onSplashAdShow",e)}((()=>{e.adProxy.setTimePoint("p5"),"launch"!==e.source||e.isDynamic||(Sq.call(this),pq.call(this)),Tq.call(this),Cq.call(this),e.hideTime>0&&(e.hideDuration=+new Date-e.hideTime),iq.call(this),"launch"===e.source&&e.isShowedExposureReported&&hq.call(this),e.isLandingPage&&(e.isLandingPage=!1)})),function(e){ce("onSplashAdHide",e)}((()=>{e.hideTime=+new Date,oq.call(this,["countTimer"])})),function(e){ce("onSplashAdClose",e)}((()=>{U$||(U$=!0),B&&e.startExposureTime>0&&+new Date-e.startExposureTime>1e3&&iq.call(this,!0),e.container&&(e.isDynamic&&(e.tplComponent&&LF(e.tplComponent),e.dynamicElems={},e.dynamicEmitter=null,e.tplComponent=null),Jv.remove(e.container)),sq.call(this)}))}otherAdsEmitFetch(){cq.call(this)}show(e){W$=!0;var t=rA(this);t.showInfo=e,t.adProxy.scene=e.scene,t.adProxy.setTimePoint("p14");var i=t.adProxy.getTimePoint("p14");if(k.onReady((()=>{setTimeout((()=>{var i="launch"===e.source?eF.launchAcceptShouldShow:eF.menuAcceptShouldShow;t.adProxy.reportAdMonitorData(i)}),q$)})),"launch"!==e.source)return this.showDetail(e);var r={};try{var n=tn.readFileSync(Y$,"utf-8");r.adInfos=n||{},t.adInfos=JSON.parse(n)}catch(e){t.adInfos={},r.errMsg=t.adProxy.processStackMsg(e),r.fileName=Y$}if(0===Object.keys(t.adInfos).length)B$=1e4,L$=aF.NO_ADINFOS,this.showAdByRealtimeFetch(e,i);else{var a;L&&k.clientVersion>=671092224&&k.clientVersion<=671092533?setTimeout((()=>{t.isCheckAdRequest&&(t.adFetchResult=uq.call(this).catch((()=>{})))}),q$):k.onReady((()=>{setTimeout((()=>{t.isCheckAdRequest&&(t.adFetchResult=uq.call(this).catch((()=>{})))}),q$)}));var o=t.adInfos.ads||[],s=(null===(a=t.adInfos)||void 0===a?void 0:a.isCheckAndFetch)||0;for(var l of(s?(B$=2e4,this.showAdByRealtimeFetch(e,i,o)):this.showAdByCheckAdsOnline(e,i),t.adDatas={},o))try{var u=`wxfile://ad/${l.aid}.txt`,c=tn.readFileSync(u,"utf-8"),d=JSON.parse(c);t.adDatas[l.aid]=d}catch(e){}}try{var h,p=(null===(h=t.adInfos)||void 0===h?void 0:h.deviceInfo)||{};t.adProxy.setDeviceInfo(p)}catch(e){}}showAdByRealtimeFetch(e,t,i=[]){var r=rA(this),n={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:Ko,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:B,isAndroid:L,adNetworkType:e.networkType},a={weappEnterScene:e.scene,requestType:2,preloadAds:i};return r.adProxy.setTimePoint("p15"),k.onReady((()=>{setTimeout((()=>{r.adProxy.reportAdMonitorData(eF.START_CHECK_AD_STATUS)}),q$)})),uq.call(this,n,a).then((t=>{k.onReady((()=>{setTimeout((()=>{r.adProxy.reportAdMonitorData(eF.CHECK_AD_STATUS_SUCCESS)}),q$)})),r.adProxy.setTimePoint("p16");var i=!1;"fetch"===r.adProxy.lastAdRespone&&(r.isCheckAdRequest=!1,r.data=t,r.adProxy.data=t,i=!0,B$=1e4===B$?1e4:3e4),this.showDetail(e,{aid:Number(t.aid)},i)})).catch((i=>(r.adProxy.setTimePoint("p16"),Rq.call(this,e,{msg:i},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showAdByCheckAdsOnline(e,t){var i=rA(this),r=i.adInfos.requestInQueue&&"true"===i.adInfos.requestInQueue,n=JSON.stringify({weapp_enter_scene:e.scene||0}),a={slot_id:zB[i.adType],publisher_appid:e.appId,network_type:nF[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:Ko,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:i.adInfos.ads||[],ext_check_ads_weapp:n};i.adProxy.setTimePoint("p15"),k.onReady((()=>{setTimeout((()=>{i.adProxy.reportAdMonitorData(eF.START_CHECK_AD_STATUS)}),1500)})),((e={},t=!0)=>OL({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t}))(a,r).then((t=>{k.onReady((()=>{setTimeout((()=>{i.adProxy.reportAdMonitorData(eF.CHECK_AD_STATUS_SUCCESS)}),1500)})),i.adProxy.setTimePoint("p16");var r=t.data;this.showDetail(e,r)})).catch((r=>(i.adProxy.setTimePoint("p16"),Rq.call(this,e,{msg:r},{startInit:t},"CHECK_AD_STATUS_ERROR"))))}showDetail(e,t={aid:0},i=!1){var r=this;return zo()((function*(){Jv.style.width=e.screenWidth,Jv.style.height=e.screenHeight,Jv.auto=!1;var n=rA(r),a={startInit:n.adProxy.getTimePoint("p14"),startFetchTime:n.adProxy.getTimePoint("p15"),fetchCallbackTime:n.adProxy.getTimePoint("p16")},o=[],{aid:s}=t;if("launch"===e.source&&i){var l,u,c,d=(null==n||null===(l=n.data)||void 0===l||null===(u=l.rerankingExtInfo)||void 0===u?void 0:u.material_hash)||"";G$=`wxfile://ad/${s}_${d}.png`,j$=`wxfile://ad/${s}_${d}_pure_color.png`,H$=`wxfile://ad/${s}_${d}_blur.png`,o.push(G$),n.crtOrientation="portrait";var h=(null==n||null===(c=n.data)||void 0===c?void 0:c.crtInfo[0])||{};if(Object.keys(h).length>0){var{width:p,height:f}=h;n.crtOrientation=p>=f?"landscape":"portrait"}"landscape"===n.crtOrientation&&o.push(j$)}else if("launch"!==e.source||i){if("menu"===e.source){var g,_,m={};null!==(g=n.data)&&void 0!==g&&g.crtInfo&&n.data.crtInfo.length>0?[m]=n.data.crtInfo:null!==(_=n.data)&&void 0!==_&&_.crtInfo&&(m=n.data.crtInfo),Object.keys(m).length>0&&!n.crtOrientation&&(n.crtOrientation=n.data.crtInfo.width>n.data.crtInfo.height?"landscape":"portrait"),eq.call(r,2)}}else{var v,y,A,b;if(!s||"0"===s)return Rq.call(r,e,{adInfos:n.adInfos,checkAdStatus:t},a,"NO_AID");if(s&&null!=n&&null!==(v=n.adDatas)&&void 0!==v&&v[s]&&(n.data=n.adDatas[s],n.adProxy.data=n.adDatas[s]),n.crtOrientation=s?null==n||null===(y=n.adInfos)||void 0===y||null===(A=y.crtSizeMap)||void 0===A?void 0:A[s]:"",!n.crtOrientation)return Rq.call(r,e,{adInfos:n.adInfos,checkAdStatus:t},a,"CRT_ORIENTATION_NOT_SURE");var E=s?null==n||null===(b=n.adInfos)||void 0===b?void 0:b.materialHashMap[s]:"";V$=`wxfile://ad/${s}.txt`,G$=`wxfile://ad/${s}_${E}.png`,j$=`wxfile://ad/${s}_${E}_pure_color.png`,H$=`wxfile://ad/${s}_${E}_blur.png`,o.push(V$),o.push(G$),"landscape"===n.crtOrientation&&o.push(j$)}try{"launch"===e.source&&o.forEach((e=>{tn.accessSync(e)}))}catch(i){L$=aF.MATERIAL_NOT_READY;var w=n.adProxy.processStackMsg(i),T=!1;if(n.data)try{yield n.adProxy.handleBulkSaveMaterials(n.data),T=!0}catch(e){}if(!T)return Rq.call(r,e,{adInfos:n.adInfos,checkAdStatus:t,msg:w},a,"MATERIAL_NOT_READY")}n.adProxy.setTimePoint("p17"),"launch"===e.source&&ML({showMenu:!0,show:!0,errCode:L$+B$,adCallTime:n.adProxy.getTimePoint("p17"),eventReceivedTime:a.startInit,cgiFetchStart:a.startFetchTime,cgiFetchCallBack:a.fetchCallbackTime,success:()=>{n.adProxy.setTimePoint("p18"),k.onReady((()=>{n.adProxy.reportAdMonitorData(eF.launchShowSplashAdSuccess)}))},fail:e=>{n.adProxy.setTimePoint("p18"),k.onReady((()=>{n.adProxy.reportAdMonitorData(eF.showSplashAdFail,{adInfos:n.adInfos,checkAdStatus:t,msg:e})})),sq.call(r),n.container&&Jv.remove(n.container)}});try{n.adProxy.setTimePoint("p4"),Dq.call(r,e)}catch(t){lq.call(r,{source:e.source,animated:!1},19),sq.call(r),k.onReady((()=>{n.adProxy.reportAdMonitorData(eF.firstRenderFail,{adInfos:n.adInfos,source:e.source,msg:t})}))}}))()}}var kq=new ty,Mq="SHOW_REWARD",Nq="HIDE_REWARD",Lq={banner:"SHOW_BANNER","incentive-video":Mq,grid:"SHOW_GRID"},Bq={banner:"HIDE_BANNER","incentive-video":Nq,grid:"HIDE_GRID"};class Fq{constructor({adUnitId:e,adType:t="banner"}){this.adUnitId=e,this.adType=t}show(){var e=Lq[this.adType];e&&kq.emit(e,{adUnitId:this.adUnitId})}hide(){var e=Bq[this.adType];e&&kq.emit(e,{adUnitId:this.adUnitId})}on(e,t){kq.on(e,(e=>{e.adUnitId!==this.adUnitId&&t(e)}))}}var Uq,Wq,Gq={container:{position:"absolute",hidden:!0,overflow:"hidden"},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},tag:{width:63,height:18,right:0,bottom:0,position:"absolute"},tagView:{hidden:!0,right:0,bottom:0,position:"absolute",flexDirection:"row"},tagBeforeContainer:{width:6,height:18,overflow:"hidden"},tagBefore:{width:12,height:24,borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.2)"},tagContent:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)"},tagMiniapp:{hidden:!0,width:11,height:12,marginRight:1},tagLabel:{height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},Vq={container:{flexDirection:"row",justifyContent:"space-between",position:"absolute",hidden:!0,overflow:"hidden",backgroundColor:"#ffffff"},appContainer:{flex:1,flexDirection:"column",backgroundColor:"#ffffff",alignItems:"center",paddingTop:12.5,paddingBottom:12.5},appIcon:{width:37,height:37,borderRadius:18.5},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},appName:{height:13,fontSize:11,lineHeight:13,color:"#888888",marginTop:5,marginBottom:15,textAlign:"center"},appButton:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadButton:{width:60,height:27,hidden:!0},downloadButtonText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},jq={1:function(e){var t=zq(e.id),i='<text id="{id}" value="{value}" bubble-event="true"></text>';i=Yq(i,"id",t),i=Yq(i,"value",e.content);var r={};return r[t]={position:"absolute",overflow:"hidden",left:e.left,top:e.top,width:e.width,height:e.height,fontSize:e.font_size,lineHeight:e.line_height,fontWeight:e.font_weight||"normal",color:e.font_color||"#000000",textAlign:e.align||"left",lineBreak:1===e.nowrap?"clip":"break-word"},{widgetTmpl:i,widgetStyle:r,scaleDoms:[t]}},2:function(e){var t=zq(e.id),i='<image id="{id}" src="{src}" bubble-event="true"></image>';i=Yq(i,"id",t),i=Yq(i,"src",e.image_url);var r={};return r[t]={position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height},{widgetTmpl:i,widgetStyle:r,scaleDoms:[t]}},3:function(){},4:function(e){var t='\n  <view id="downloadButton" click-state="true">\n    <text id="downloadButtonText" value="{value}" bubble-event="true"></text>\n    <text id="downloadProgress" bubble-event="true">\n      <text id="downloadProgressText" bubble-event="true"></text>\n    </text>\n  </view>\n  <text id="appButton" value="{value}" click-state="true"></text>\n';return{widgetTmpl:t=Yq(t,"value",e.title),widgetStyle:{appButton:{position:"absolute",textAlign:"center",left:e.left,top:e.top,width:e.width,height:e.height,lineHeight:e.height,fontSize:e.font_size,color:e.font_color||"#000000",fontWeight:e.font_weight||"normal",backgroundColor:e.background_color||"transparent",borderColor:e.border_color||"transparent",borderWidth:1,borderRadius:e.border_radius},downloadButton:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,hidden:!0},downloadButtonText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:e.font_color||"#04be02",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:"#ffffff",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:e.border_color||"#04be02"}},scaleDoms:["appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]}},5:function(e,t){var i=zq(e.id),r=zq(e.id),n=zq(e.id),a='\n  <view id="{wrapId}" bubble-event="true">\n    <image id="{headerId}" src="{header}" bubble-event="true"></image>\n    <text id="{labelId}" value="{label}" bubble-event="true"></text>\n  </view>\n';a=Yq(a,"wrapId",i),a=Yq(a,"headerId",r),a=Yq(a,"header",e.head_url),a=Yq(a,"labelId",n),a=Yq(a,"label",e.nick_name);var o={},s=120/690*t.width;o[i]={position:"absolute",left:e.left,top:e.top,width:s,overflow:"hidden",flex:1,flexDirection:"column",alignItems:"center"};var l=70/690*t.width;o[r]={width:l,height:l,borderRadius:1===e.head_type?l/5:l/2,marginBottom:10/690*t.width};var u=24/690*t.width;return o[n]={fontSize:u,color:"#888888",width:s,height:u+5,lineHeight:u+5,textAlign:"center",lineBreak:"ellipsis"},{widgetTmpl:a,widgetStyle:o,scaleDoms:[i,r,n]}},6:function(e){var t=zq(e.id),i=zq(e.id),r=zq(e.id),n=zq(e.id),a=zq(e.id),o='\n  <view id="{tagViewId}" bubble-event="true">\n    <image id="{tagBeforeId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgm1whMrNszgO3SgLoE6tlNzpKQQm4ubB6PeOLWL30sIWR7Sfsiakp1Ouw/0?wx_fmt=png"></image>\n    <view id="{tagContentId}" bubble-event="true">\n      <image id="{tagMiniappId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgmCKiaGzo9XUvxlDiaibHqzSO9BqvH74E0m5ibptJHaMAxicKvxXmM4LjMicaA/0?wx_fmt=png"></image>\n      <text id="{tagLabelId}" value="{label}" bubble-event="true"></text>\n    </view>\n  </view>\n';o=Yq(o,"tagViewId",t),o=Yq(o,"tagBeforeId",i),o=Yq(o,"tagContentId",r),o=Yq(o,"tagMiniappId",n),o=Yq(o,"tagLabelId",a),o=Yq(o,"label",e.watermark_text);var s={};s[t]={right:0,bottom:0,position:"absolute",flexDirection:"row"},s[i]={width:14,height:18},s[r]={flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.6)"},s[n]={hidden:1===e.watermark_icon,width:11,height:12,marginRight:1},s[a]={width:11*e.watermark_text.length+6,height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11};return{widgetTmpl:o,widgetStyle:s,scaleDoms:[]}}},Hq=1,zq=function(e){return["wdgt",e,Hq+=1].join("__")},Yq=function(e,t,i){return e.replace(RegExp(`\\{${t}\\}`,"gi"),i)},$q={adFeedback:{width:46,height:15,backgroundColor:"rgba(40, 40, 40, 0.6)",borderRadius:12,"ios-portrait":{borderRadius:7},"ios-landscape":{borderRadius:7},"iphone x-portrait":{borderRadius:7},"iphone x-landscape":{borderRadius:7},color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:11,left:4,top:1.5,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5},position:"absolute"},rectangle:{top:7,left:32,width:7.2,height:4.2,position:"absolute"},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},Qq=(e,t)=>{var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var n of i)if("render"!==n){if("children"!==n&&e[n]!==t[n]){if("object"==typeof e[n]&&"object"==typeof t[n]&&Qq(e[n],t[n]))continue;return!1}if("children"===n&&("string"==typeof e[n]||"string"==typeof t[n]))return e[n]===t[n]}else if(!e[n]!=!t[n])return!1;return!0},Zq={view:"view",div:"view",span:"view",text:"text",image:"image",img:"image",video:"video"},Kq={view:zv,text:Yv,image:ey,video:uy},Xq={text:["value"],image:["src"],view:[],video:["src","poster","referrerPolicy","referrer","initialTime","playbackRate","live","objectFit","controls","showProgress","showProgressInControlMode","autoplay","muted","loop","enableProgressGesture","enablePlayGesture","showCenterPlayBtn","autoInsert","scene","preLoad","obeyMuteSwitch","underGameView","playerHint","autoPauseIfOpenNative","autoPauseIfNavigate"],common:["autoInsert","eventType","bubbleEvent","clickState"]},Jq={eventType:"touch",clickState:!1,bubbleEvent:!1,autoInsert:!1},eQ=["click","touchstart","touchmove","touchend"],tQ=e=>[...Xq[e]||[],...Xq.common],iQ=e=>{var t=[];for(var i of Object.keys(e))e[i]&&0===i.indexOf("on")&&t.push(i);return t},rQ=(e,t)=>{var i=Zq[e]||"view",r=Kq[i],n=FL(K()(K()({},Jq),t),tQ(i));t.id&&(n.name=t.id),t.style&&(n.style=t.style);var a=new r(n);for(var o of(a._sourceHandlers=new Map,a._handlers=new Map,a._type=i,a._isTemplate=!0,a.dataset={},iQ(t))){var s,l=o[2].toLowerCase()+o.slice(3);if(l in pF){if("video"===i)null===(s=a[o])||void 0===s||s.call(a,t[o])}else a._handlers.set(l,t[o])}for(var u of eQ){var c=nQ(a,u);a._sourceHandlers.has(u)||(a._sourceHandlers.set(u,c),a.on(u,c))}for(var d of(t.uniqueId&&(a.adId=t.uniqueId),a._manualStyle=t.style,Object.keys(t)))if(0===d.indexOf("data-")){var h=tl(d.slice(5));a.dataset[h]=t[d]}return a},nQ=function(e,t){return i=>{for(var r=!1,n=K()(K()({},i),{},{target:e,currentTarget:e,stopPropagation:()=>{r=!0}}),a=e;!r&&a&&a!==yU;){var o=a._handlers.get(t);null==o||o.call(e,n),a=a.parent}}},aQ=(e,t)=>{var i=!1;for(var r of Object.keys(t))t[r]!==e[r]&&(e[r]=t[r],i=!0);return i},oQ=e=>{for(var[t,i]of(e._handlers.clear(),e._sourceHandlers))e.off(t,i);e._sourceHandlers.clear()},sQ={createInstance:(e,t)=>rQ(e,t),createTextInstance:e=>rQ("text",{value:e}),appendInitialChild(e,t){e.add(t)},finalizeInitialChildren:(e,t,i,r)=>(e._rootContainer=r,!0),prepareUpdate:(e,t,i,r)=>!Qq(i,r),appendChild(e,t){e.add(t),lQ(e)},appendChildToContainer(e,t){e.add(t),lQ(t)},insertBefore(e,t,i){e.add(t)},insertInContainerBefore(e,t,i){e.add(t)},removeChild(e,t){e.remove(t),oQ(t),lQ(e)},removeChildFromContainer(e,t){e.remove(t),oQ(t),lQ(e)},resetTextContent(e){e.value=""},commitTextUpdate(e,t,i){e.value=i},commitMount(e){},commitUpdate(e,t,i,r,n){((e,t,i)=>{var r=FL(K()(K()({},Jq),i),tQ(e._type)),n=FL(K()(K()({},Jq),t),tQ(e._type)),a=i.style,o=t.style,s=iQ(i),l=iQ(t),u=!1;for(var c of Object.keys(o))c in a||(a[c]=null);var d=aQ(e.style,a);for(var h of(u||(u=d),e._manualStyle=a,Object.keys(n)))h in r||(e[h]=null);for(var p of(d=aQ(e,r),u||(u=d),l)){var f,g=p[2].toLowerCase()+p.slice(3);s.includes(p)||(g in pF?"video"===e._type&&(null===(f=e[p.replace(/^on/,"off")])||void 0===f||f.call(e,t[p])):e._handlers.delete(p))}for(var _ of s){var m;_[2].toLowerCase()+_.slice(3)in pF?"video"===e._type&&(null===(m=e[_])||void 0===m||m.call(e,i[_]),u=!0):(e._handlers.has(_)&&e._handlers.delete(_),e._handlers.set(_,i[_]),u=!0)}a.fontSize===o.fontSize&&r.value===n.value||(e._hasEllipsis=!1),u&&lQ(e)})(e,r,n)},hideInstance(e){e.style.hidden=!0},hideTextInstance(e){e.style.hidden=!0},unhideInstance(e){e.style.hidden=!1},unhideTextInstance(e){e.style.hidden=!1},clearContainer(e){Object.keys(e.children).forEach((t=>{var i=e.children[t];e.remove(i)}))}},lQ=(()=>{var e=new Set,t=null;return i=>{e.add(i),t&&clearTimeout(t),t=setTimeout((()=>{var t=[];for(var i of e){for(var r=i.parent,n=!0;r;)e.has(r)&&(n=!1),r=r.parent;n&&t.push(i)}for(var a of t)oU(a);e.clear()}))}})();!function(e){e[e.AD_BUTTON=1]="AD_BUTTON",e[e.AD_MATERIAL=2]="AD_MATERIAL",e[e.CLOSE_BUTTON=3]="CLOSE_BUTTON",e[e.MASK=4]="MASK",e[e.AD_DESC=5]="AD_DESC",e[e.TIMEOUT=6]="TIMEOUT",e[e.LANDPAGE_BACK=7]="LANDPAGE_BACK",e[e.FEEDBACK_DISLIKE=8]="FEEDBACK_DISLIKE"}(Uq||(Uq={})),function(e){e[e.CLOSE_BUTTON=1]="CLOSE_BUTTON",e[e.MASK=2]="MASK",e[e.TIMEOUT=3]="TIMEOUT",e[e.LANDPAGE_BACK=4]="LANDPAGE_BACK",e[e.ONSHOW=5]="ONSHOW",e[e.CRASH=6]="CRASH",e[e.SWITCH_PAGE_FREQUENTLY=7]="SWITCH_PAGE_FREQUENTLY",e[e.FEEDBACK_DISLIKE=8]="FEEDBACK_DISLIKE"}(Wq||(Wq={}));var uQ,cQ,dQ=e=>rA(e),hQ=()=>{if(!cQ){var{root:e}=Lg()('\n  <view id="container" click-state="false">\n    <image id="image" bubble-event="true">\n        <view id="ad-feedback" click-state="true">\n            <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n            <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n            <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        </view>\n        <view id="ad-feedback-list">\n          <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n          <text id="ad-close-btn" click-state="true" value="关闭"></text>\n          <view id="ad-close-btn-line-dislike"></view>\n          <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n          <view id="ad-close-btn-line-affect"></view>\n          <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n        </view>\n        <view id="ad-feedback-menu">\n          <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n          <view id="ad-close-btn-line"></view>\n          <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n          <view id="ad-close-btn-line0"></view>\n          <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n        </view>\n    </image>\n    <view id="app-container" bubble-event="true">\n      <image id="app-icon" bubble-event="true"></image>\n      <text id="app-name" bubble-event="true"></text>\n      <view id="download-button" click-state="true">\n        <text id="download-button-text" bubble-event="true"></text>\n        <text id="download-progress" bubble-event="true">\n          <text id="download-progress-text" bubble-event="true"></text>\n        </text>\n      </view>\n      <text id="app-button" click-state="true"></text>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n');cQ=e}return cQ},pQ=M,fQ=B,gQ=L,_Q={},mQ=[],vQ=[];k.onReady((()=>{wW.isWaGame&&(bm.onTouchStart((e=>{var t;(null==e||null===(t=e.changedTouches)||void 0===t?void 0:t.length)>0&&((_Q={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),_Q.touchStartPosY=Math.round(e.changedTouches[0].clientY),_Q.touchEndPosX=0,_Q.touchEndPosY=0,_Q.touchStartTime=+new Date,_Q.touchInterval=0)})),bm.onTouchEnd((e=>{var t;if((null==e||null===(t=e.changedTouches)||void 0===t?void 0:t.length)>0){var i;_Q.touchEndPosX=Math.round(e.changedTouches[0].clientX),_Q.touchEndPosY=Math.round(e.changedTouches[0].clientY);var r=(null===(i=_Q)||void 0===i?void 0:i.touchStartTime)||0;_Q.touchInterval=+new Date-r,mQ.length>=10&&mQ.shift(),mQ.push(_Q)}})))}));var yQ=1e3,AQ=1,bQ=2,EQ=3,wQ=function(){var e=zo()((function*(){var e=dQ(this);if(!aZ.call(this)&&e.data)try{var t;e.tmplContainer||(e.tmplContainer=new zv({name:"bannerTemplContainer"})),yU.children[e.tmplContainer.id]||yU.add(e.tmplContainer);var{left:i,top:r}=this.style,{inner:n,scale:a}=KQ.call(this),o=a,s=(o=o<.8?.8:o)*(347/120/(960/334));e.tmplContainer.style.position="absolute",e.tmplContainer.style.top=r,e.tmplContainer.style.left=i,e.tmplContainer.style.width=n.width,e.tmplContainer.style.height=n.height,e.tmplContainer.style.hidden=!0;var l=192*n.width/345,u=108*n.height/120,c=123*n.width/345;yield e.adTemplate.render({isEmpty:void 0,systemInfo:{screenWidth:wW.screenWidth,screenHeight:wW.screenHeight,deviceOrientation:wW.deviceOrientation,platform:L?"android":"ios",hostEnv:"minigame"},hostContainer:e.tmplContainer,template:e.data.template,adData:e.adProxy.data,adCustomId:"BANNER",styleOptions:{removePx:!0,splitShorthand:!0,convertRgbaColor:!0,convertDisplayName:!0,convertRotate:!0},extraScope:{private:e,adMaterialWidth:l,adMaterialHeight:u,adWordingWidth:c,feedbackScale:s},ref:t=>{e.adTemplateRef=t,t.onEvent(e.handleAdTemplateEvent)}}),e.data.product_type===OB.ANDROID&&(e.adProxy.setAppInstallState(!1),GQ.call(this)),e.adProxy.preloadLanding(),e.emitter.emit("load"),yield null===(t=e.adTemplateRef.getRootElement())||void 0===t?void 0:t.ready(),e.emitter.emit("ready")}catch(t){e.emitter.emit("_error",{errMsg:"banner render failed (internal)"})}}));return function(){return e.apply(this,arguments)}}(),TQ=function(){var e=zo()((function*(){var e=dQ(this);!aZ.call(this)&&e.adTemplateRef&&(yield e.adTemplateRef.update({systemInfo:{screenWidth:wW.screenWidth,screenHeight:wW.screenHeight,deviceOrientation:wW.deviceOrientation,platform:L?"android":"ios",hostEnv:"minigame"}}))}));return function(){return e.apply(this,arguments)}}(),CQ=function(){var e=zo()((function*(){var e;if(aZ.call(this))throw{errMsg:oZ};var t=dQ(this);t.tmplContainer&&(t.tmplContainer.style.hidden=!1),yield TQ.call(this),yield null===(e=t.adTemplateRef)||void 0===e?void 0:e.show()}));return function(){return e.apply(this,arguments)}}(),SQ=function(){var e=zo()((function*(){if(!aZ.call(this)){var e=dQ(this);if(e.adTemplateRef){e.tmplContainer&&(e.tmplContainer.style.hidden=!0);try{var t;e.adTemplateRef.hide(),yield null===(t=e.adTemplateRef.getRootElement())||void 0===t?void 0:t.ready(),e.isClosed=!1}catch(t){e.isClosed=!1}}}}));return function(){return e.apply(this,arguments)}}(),IQ=function(){var e=zo()((function*(){var e,t,i=dQ(this);null===(e=i.adTemplateRef)||void 0===e||e.offEvent(i.handleAdTemplateEvent),null===(t=i.adTemplateRef)||void 0===t||t.hide(),yield i.adTemplate.unmount({hostContainer:i.tmplContainer}),yU.remove(i.tmplContainer),i.tmplContainer=null}));return function(){return e.apply(this,arguments)}}(),xQ=function(e){var t=dQ(this);if(!aZ.call(this)&&t.data&&t.adTemplateRef)switch(e.action){case jH.TRIGGEREVENT:["error"].includes(e.value.eventName)&&t.emitter.emit(e.value.eventName,e.value.detail||{});break;case jH.HIDEAD:break;case jH.ADSHOWHALF:t.isShow=!0;break;case jH.ADHIDEHALF:t.isShow=!1;break;case jH.CHECKEXPOSURE:ZQ.call(this);break;case jH.FEEDBACKREPORT:if(zQ.call(this,e.value),"secondGradeId"in e.value){var{secondGradeId:i,secondGradeDesc:r,feedbackReason:n}=e.value;HQ.call(this,i,r,n)}break;case jH.TEMPLATEMESSAGE:var a;"posClick"===e.value.message&&null!==(a=e.value.actionArgs)&&void 0!==a&&a.event&&PQ.call(this,e.value.actionArgs.event);break;default:t.adProxy.handleAdTemplateEvent(e)}},PQ=function(){var e=zo()((function*(e){OQ.call(this,e,!1)&&(yield MQ.call(this,e))}));return function(t){return e.apply(this,arguments)}}(),DQ=function(){var e,t=dQ(this);return null!==(e=t.data)&&void 0!==e&&e.useTemplate?t.tmplContainer:t.container},RQ=function({type:e}){return VQ.call(this).then((()=>{var t,i,r=dQ(this),n=DQ.call(this);if(null!=n&&n.layoutBox){var{left:a,top:o}=n.layoutBox;return r.adProxy.reportAbnormalDetect({slotid:"8040321819858439",ScreenHeight:wW.screenHeight,ScreenWidth:wW.screenWidth,PageY:o,PageX:a,costtype:null!=r&&null!==(t=r.adProxy)&&void 0!==t&&null!==(i=t.data)&&void 0!==i&&i.is_cpm?1:2,TimeMs:+new Date,type:e})}}))},OQ=function(e,t=!0){var i=dQ(this).adProxy.isTriggerClick(e),r=i?0:1;return t&&$Q.call(this,e,r),i},kQ=function(e){var t=dQ(this),i=DQ.call(this);if(null==i||!i.layoutBox)return!0;var r,n,{left:a,top:o,width:s,height:l}=i.layoutBox,u=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*((null===(r=t.data)||void 0===r||null===(n=r.condition)||void 0===n?void 0:n.widget_gray_time_limit)||1));c>0&&+new Date-t.showedExposureTime<c&&(u=!0,t.adProxy.reportAdMonitorData(48));var d,h=0;t.adProxy.isValidCondition("widget_gray_banner_limit_click")&&(h=100*((null===(d=t.data)||void 0===d?void 0:d.condition.widget_gray_banner_limit_click)||5));h>0&&+new Date-t.lastShowTime<h&&(u=!0,t.adProxy.reportAdMonitorData(155));var p,f=0;t.adProxy.isValidCondition("widget_gray_bd_limit")&&(f=(null===(p=t.data)||void 0===p?void 0:p.condition.widget_gray_bd_limit)||10);return e&&f>0&&(e.absoluteEndX-a<f||a+s-e.absoluteEndX<f||e.absoluteEndY-o<f||o+l-e.absoluteEndY<f)&&(u=!0,t.adProxy.reportAdMonitorData(47)),u},MQ=function(e,t={}){var i=dQ(this),{antifraudPopup:r}=i.data;if(i.clickTime=Date.now(),r)return NQ.call(this,e,t);LQ.call(this,e,t)},NQ=function(e,t={}){var i=dQ(this);iZ.call(this),Ul({content:"即将打开广告详情页",confirmText:"打开",success:r=>{r.confirm?(LQ.call(this,e,t,1),qQ.call(this,e,{buttonType:1,buttonTime:Date.now()}),i.adProxy.reportAdMonitorData(176)):r.cancel&&(QQ.call(this,e,2),qQ.call(this,e,{buttonType:2,buttonTime:Date.now()}),tZ.call(this),i.adProxy.reportAdMonitorData(177)),i.adProxy.reportAdMonitorData(174)},fail:()=>{LQ.call(this,e,t),qQ.call(this,e,{buttonType:0,buttonTime:Date.now()}),i.adProxy.reportAdMonitorData(175)}})},LQ=function(e,t={},i=0){var r=dQ(this),{product_type:n,button_action:{jump_type:a}}=r.data;fQ&&46===n&&6===a?Promise.race([QQ.call(this,e,i),Js(500)]).then((()=>{XQ.call(this,t)})).catch((()=>{XQ.call(this,t)})):(QQ.call(this,e,i),XQ.call(this,t))},BQ=function(){var e=dQ(this),{scale:t}=KQ.call(this),{crt_size:i,useStyleData:r,ad_style_data:n,dest_type:a,product_type:o}=e.data;if(r){var{template:s,style:l,scaleDoms:u}=function(e){var t="",i={container:{hidden:!0,position:"absolute",overflow:"hidden",backgroundColor:e.background_color||"#FFFFFF",width:e.width,height:e.height}},r=[];return t+='<view id="container" click-state="false">',e.widgets.forEach(((n,a)=>{var o=jq[n.type];if(o){var{widgetTmpl:s,widgetStyle:l,scaleDoms:u}=o(n,a,e);t+=s,i=Object.assign(i,l),r=r.concat(u)}})),t+='\n  <view id="adFeedback" click-state="true">\n    <text id="adText" value="广告" click-state="true" bubble-event="true"></text>\n    <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <text id="ad-close-btn" click-state="true" value="关闭"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    <view id="ad-close-btn-line-affect"></view>\n    <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line0"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="ad-close-tip">\n    <view id="ad-close-tip-wrap">\n      <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n      <view id="ad-close-tip-text" bubble-event="true">\n        <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n        <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n      </view>\n    </view>\n  </view>\n',i=Object.assign(i,$q),{template:t+="</view>",style:i,scaleDoms:r}}(n),{root:c}=Lg()(s);zY.call(this,c,l),e.scaleDoms=u,e.scaleDoms.forEach((i=>{e[i].style.scale=t})),e.appButton&&([12,19].indexOf(o)>-1?UQ.call(this):e.appButton.on("click",(e=>{if(OQ.call(this,e)&&!kQ.call(this,e))return MQ.call(this,e,{isButton:!0})}))),e.container.on("click",(e=>{if(OQ.call(this,e)&&!kQ.call(this,e))return MQ.call(this,e)}))}else if([532,608,567].indexOf(i)>-1){zY.call(this,(()=>{if(!uQ){var{root:e}=Lg()('\n  <image id="container" click-state="false">\n    <view id="ad-feedback" click-state="true">\n        <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <text id="ad-close-btn" click-state="true" value="关闭"></text>\n      <view id="ad-close-btn-line-dislike"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-affect"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line0"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n    <image id="tag" bubble-event="true"></image>\n    <view id="tagView" bubble-event="true">\n      <view id="tagBeforeContainer">\n        <view id="tagBefore" bubble-event="true"></view>\n      </view>\n      <view id="tagContent" bubble-event="true">\n        <image id="tagMiniapp" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/mini_program_v2.png"></image>\n        <text id="tagLabel" value="" bubble-event="true"></text>\n      </view>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </image>\n');uQ=e}return uQ})(),Gq);var{image:{src:d},watermark_text:h}=e.data;e.container.src=d,e.tag.style.hidden=!0,e.tagView.style.hidden=!1,e.tagLabel.value=h,e.tagLabel.style.width=11*e.data.watermark_text.length+6,6===e.adProxy.data.dest_type&&(e.tagMiniapp.style.hidden=!1),12===o&&(e.adProxy.setAppInstallState(!1),GQ.call(this)),e.container.on("click",(e=>{if(OQ.call(this,e)&&!kQ.call(this,e)){var t=3===a?{toOfficalAccountDetail:!0}:{};return MQ.call(this,e,t)}}))}else if(556===i){if([12,19].indexOf(o)>-1){zY.call(this,hQ(),Vq);var{width:p,image:{src:f,width:g},appInfo:{appName:_,iconUrl:m}}=e.data;e.image.style.width=239,e.image.style.height=120,e.image.src=f,e.appIcon.src=m,e.appName.value=el(_,16),p&&(e.appName.style.width=p-g),e.image.style.scale=t,e.appContainer.style.scale=t,e.appIcon.style.scale=t,e.appIcon.style.borderRadius=4,e.appName.style.scale=t,e.downloadButtonText.style.scale=t,e.downloadProgress.style.scale=t,e.downloadProgressText.style.scale=t,e.downloadButton.style.scale=t,UQ.call(this)}else{zY.call(this,hQ(),Vq);var{width:v,image:{src:y,width:A},app:{icon:b,isFollowed:E,nickname:w},button_action:T}=e.data;e.image.style.width=239,e.image.style.height=120,e.image.src=y,e.appIcon.src=b,e.appName.value=el(w,16),v&&(e.appName.style.width=v-A),e.image.style.scale=t,e.appContainer.style.scale=t,e.appIcon.style.scale=t,e.appName.style.scale=t,e.appButton.style.scale=t,e.appButton.value=23===o&&E?"查看":T.button_text,e.appButton.on("click",(e=>{OQ.call(this,e)&&(kQ.call(this,e)||(QQ.call(this,e),iZ.call(this),XQ.call(this,{isButton:!0})))}))}e.container.on("click",(e=>{if(OQ.call(this,e)&&!kQ.call(this,e))return MQ.call(this,e)}))}e.container||e.adProxy.reportAdMonitorData(7)},FQ=function(){var e=zo()((function*(){var e=dQ(this);if(aZ.call(this)||!e.data)return Promise.resolve();try{var{left:t,top:i}=this.style,{inner:r}=KQ.call(this),{useTemplate:n}=e.data;if(n)return void(yield wQ.call(this));BQ.call(this),e.adFeedback.style.hidden=!1,e.adFeedback.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||zQ.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),e.adFeedbackBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adProxy.openFeedbackUrl(1002),e.adFeedbackList.style.hidden=!0,zQ.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}))})),e.adCloseBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,HQ.call(this))})),e.adDislikeBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,HQ.call(this,2,"不感兴趣"))})),e.adQualityBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,HQ.call(this,2,"不感兴趣",4))})),e.adDuplicateBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,HQ.call(this,2,"不感兴趣",5))})),e.adDismatchBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackMenu.style.hidden=!0,HQ.call(this,2,"不感兴趣",1))})),e.adAffectBtn.on("click",(t=>{OQ.call(this,t,!1)&&(e.adFeedbackList.style.hidden=!0,HQ.call(this,3,"影响操作"))})),e.adProxy.isValidCondition("widget_gray_close_v2")?(e.adCloseBtnLineDislike.style.hidden=!1,e.adCloseBtnLineAffect.style.hidden=!1,e.adDislikeBtn.style.hidden=!1,e.adAffectBtn.style.hidden=!1,e.rectangle.style.hidden=!1,e.rectangleClose.style.hidden=!0,e.adCloseBtn.style.hidden=!0,jQ.call(this)):(e.adFeedbackList.style.height=64,e.adCloseBtnLine.style.hidden=!1,e.adCloseBtn.style.hidden=!1),e.adProxy.preloadLanding(),e.container.style.left=t,e.container.style.top=i,e.container.style.width=r.width,e.container.style.height=r.height,e.adCloseTip.style.width=r.width,e.adCloseTip.style.height=r.height,yU.add(e.container),e.emitter.emit("load"),e.container.ready().then((()=>{e.emitter.emit("ready")})).then((()=>{RQ.call(this,{type:1})}))}catch(t){return e.adProxy.reportAdMonitorData(6,t),Promise.reject({})}}));return function(){return e.apply(this,arguments)}}(),UQ=function(){var e=dQ(this),{appInfo:{appName:t,apkName:i,apkUrl:r,appMd5:n,urlScheme:a}}=e.data;e.downloadButton.style.hidden=!1,e.appButton.style.hidden=!0,fQ?(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadButton.on("click",(e=>{if(OQ.call(this,e)&&!kQ.call(this,e))return MQ.call(this,e,{isButton:!0})}))):gQ&&(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadProgressText.value=e.data.button_action.button_text,GQ.call(this),e.downloadButton.on("click",(o=>{if(OQ.call(this,o)&&!kQ.call(this,o)){QQ.call(this,o);var s,l,{aid:u,traceid:c,apurl:d}=e.adProxy.data,h=0,p="";if(e.landingCount+=1,e.lastLandingTime=+new Date,e.lastJsapiStatus=0,e.lastJsapiCostTime=0,4===e.androidAppState)e.adProxy.launchApplication(a).catch((()=>{})),e.lastJsapiName="launchApplication",e.isLandingPage=!0;else if(0===e.androidAppState){var f=[u,c,i.replace(/./g,"_"),0,20,d.indexOf("ad.wx.com")>-1?1:0].join(".");e.adProxy.addDownloadTaskStraight(t,r,n,f).then((t=>{iZ.call(this),e.androidDownloadId=t.downloadId,setTimeout(WQ.bind(this),yQ)})).catch((()=>{XQ.call(this,{isButton:!0})})),e.lastJsapiName="addDownloadTaskStraight",h=4,p="下载"}else e.androidAppState===AQ?(e.adProxy.pauseDownloadTask(e.androidDownloadId).catch((()=>{})),e.downloadButtonText.value="继续",e.downloadProgressText.value="继续",e.androidAppState=bQ,e.lastJsapiName="pauseDownloadTask",h=5,p="暂停"):e.androidAppState===bQ?(e.adProxy.resumeDownloadTask(e.androidDownloadId).then((()=>{setTimeout(WQ.bind(this),yQ)})).catch((()=>{})),e.downloadButtonText.value="暂停",e.downloadProgressText.value="暂停",e.androidAppState=AQ,e.lastJsapiName="resumeDownloadTask",h=6,p="继续"):e.androidAppState===EQ&&(e.adProxy.installDownloadTask(e.androidDownloadId).catch((()=>{})),e.lastJsapiName="installDownloadTask",h=7,p="安装");if(h>0)e.adProxy.reportLandingTime({slotId:8040321819858439,costType:null!==(s=e.adProxy)&&void 0!==s&&null!==(l=s.data)&&void 0!==l&&l.is_cpm?1:2,openTime:e.lastLandingTime,clickTime:e.lastLandingTime,clkCnt:e.landingCount,jsapiName:e.lastJsapiName,actTypeInt:h,actTypeStr:p})}})))},WQ=function(e=3){var t=dQ(this);t.adProxy.queryDownloadTask(t.androidDownloadId).then((e=>{"download_succ"===e.state?(t.downloadButtonText.value="安装",t.downloadProgressText.value="安装",t.downloadProgress.style.width=t.downloadButton.style.width,t.androidAppState=EQ,tZ.call(this)):"downloading"===e.state?(t.downloadButtonText.value="暂停",t.downloadProgressText.value="暂停",t.downloadProgress.style.width=t.downloadButton.style.width*parseInt(e.progress,10)/100,t.androidAppState=AQ):"download_fail"===e.state&&(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,t.downloadProgress.style.width=0,t.androidAppState=0,tZ.call(this)),"downloading"!==e.state&&"default"!==e.state||setTimeout(WQ.bind(this),yQ)})).catch((()=>{if(e>0){var t=e-1;WQ.call(this,t)}}))},GQ=function(){var e=dQ(this),{appInfo:{apkName:t,versionCode:i,urlScheme:r}}=e.data;e.adProxy.getInstallState(t).then((t=>{t.isInstalled&&(void 0===t.versionCode||t.versionCode>=i)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),e.downloadButtonText&&(e.downloadButtonText.value="已安装",e.downloadProgressText.value="已安装",r&&r.trim().length>0&&(e.downloadButtonText.value="进入",e.downloadProgressText.value="进入")),e.tagLabel&&r&&r.trim().length>0&&(e.tagLabel.value="进入应用",e.tagLabel.style.width=50))})).catch((()=>{}))},VQ=function(){return new Promise((e=>{var t=dQ(this);t.isReady?e():t.emitter.on("ready",e)}))},jQ=function(){var e=dQ(this),{scale:t}=KQ.call(this);t=t<.8?.8:t;var i=347/120/(e.adProxy.data.ad_width/e.adProxy.data.ad_height);["adFeedbackBtn","adDislikeBtn","adAffectBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn"].forEach((r=>{e[r].style.height=32*t*i,e[r].style.lineHeight=32*t*i,e[r].style.fontSize=12*t*i})),e.adFeedbackList.style.height=98*t*i,e.adFeedbackMenu.style.height=98*t*i},HQ=function(e,t,i=0){var r=dQ(this);r.isClosed=!0,r.lastClosedAction="",r.closeAdTime=+new Date,e?(zQ.call(this,{secondGradeId:e,secondGradeDesc:t,feedbackReason:i}),(2===e||i)&&Js(2e3).then((()=>{this.hide(),r.emitter.emit("close")}))):(zQ.call(this,{firstGradeId:0,firstGradeDesc:""}),this.hide(),r.emitter.emit("close"))},zQ=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){var a=dQ(this),o=DQ.call(this);if(null!=o&&o.layoutBox){var{left:s,top:l,width:u,height:c}=o.layoutBox;e&&!i&&(a.clickFirstGradeTime=+new Date),a.adProxy.reportAdFeedbackData({adWidth:Math.round(u),adHeight:Math.round(c),adPosX:Math.round(s),adPosY:Math.round(l),expTime:a.showedExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?a.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?+new Date:0,feedbackReason:n})}},YQ=function(){var e=dQ(this),{left:t,top:i}=this.style,{inner:r,scale:n}=KQ.call(this),{crt_size:a,product_type:o,useStyleData:s}=e.data;Object.assign(e.container.style,r,{left:t,top:i});var l=[];return s?l=e.scaleDoms:[532,608,567].indexOf(a)>-1?l=[]:556===a&&23===o?l=["image","appContainer","appIcon","appName","appButton"]:556===a&&[12,19].indexOf(o)>-1&&(l=["image","appContainer","appIcon","appName","appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]),l.forEach((t=>{e[t].style.scale=n})),jQ.call(this),e.container.nextUpdate().then((()=>Promise.resolve()))},$Q=function(e,t=0){var i,r,n=dQ(this),a=DQ.call(this);if(!aZ.call(this)&&a&&a.layoutBox){var{width:o,height:s}=a.layoutBox,l=0;return[0,2,3].includes(t)&&(n.clickCount+=1,l=n.clickCount),n.adProxy.reportTouchClick({slotid:"8040321819858439",costtype:null!==(i=n.adProxy)&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.is_cpm?1:2,click_time:+new Date,click_cnt:l,start_posx:Math.floor(e.relativeX)||0,start_posy:Math.floor(e.relativeY)||0,end_posx:Math.floor(e.relativeEndX)||0,end_posy:Math.floor(e.relativeEndY)||0,ad_width:Math.floor(o)||0,ad_height:Math.floor(s)||0,press_interval:e.pressInterval,block_click:t})}},qQ=function(e,t={}){var i,r,n=dQ(this),a=DQ.call(this);if(null!=a&&a.layoutBox){var{width:o,height:s}=a.layoutBox;return n.adProxy.reportPopupClickAction({buttonType:t.buttonType||0,buttonTime:t.buttonTime||0,adClkTime:n.clickTime,adExpTime:n.showedExposureTime,adClkX:Math.floor(e.absoluteX)||0,adClkY:Math.floor(e.absoluteY)||0,adWidth:Math.floor(o)||0,adHeight:Math.floor(s)||0,isGame:wW.isWaGame?1:0,costtype:null!==(i=n.adProxy)&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.is_cpm?1:2})}},QQ=function(e,t=0){var i=dQ(this),r=DQ.call(this);if(!aZ.call(this)&&r&&r.layoutBox){var{left:n,top:a,width:o,height:s}=r.layoutBox,l=Object.keys(_Q).length?{pos_x:_Q.touchStartPosX,pos_y:_Q.touchStartPosY,time:_Q.touchStartTime}:{pos_x:0,pos_y:0,time:0},u=i.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-a,pressInterval:e.pressInterval,left:n,top:a,width:o,height:s,weappExtraData:{show_time:i.lastShowTime,last_click:l,popup_click_type:t}});return rZ.call(this,{stage:1002}),vQ=mQ.map((e=>`[${[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")}]`)),i.adProxy.reportBannerLastClick({lastClickArr:`[${vQ.join(",")}]`,expMs:i.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:n,top:a,width:o,height:s,lastShowTime:i.lastShowTime}),mQ=[],vQ=[],u}},ZQ=function(e=!1){var t,i,r,n,a,o,s,l,u=dQ(this);if(aZ.call(this))return Promise.resolve();var c=DQ.call(this);if(null==c||!c.layoutBox)return Js(0).then((()=>ZQ.call(this,e)));var{left:d,top:h,width:p,height:f}=c.layoutBox,g=u.adProxy.isOriginExposureArea(c.layoutBox),_=h<=wW.screenHeight-1;if(!(null!==(t=u.data)&&void 0!==t&&null!==(i=t.condition)&&void 0!==i&&i.widget_gray_banner_exposure_toggle?g:_))return Promise.resolve();var m,v=u.data.useTemplate?null===(r=u.adTemplateRef)||void 0===r?void 0:r.isShow():!1===(null===(n=u.container)||void 0===n?void 0:n.style.hidden);if(u.adProxy.isViewable=!!v,!u.isShowedExposureReported&&v){u.isShowedExposureReported=!0,u.showedExposureTime=+new Date;u.adProxy.reportExposure({left:d,top:h,width:p,height:f,exposureType:"showed"})}if(null!==(a=u.adTemplateRef)&&void 0!==a&&a.isShow()&&!u.hasEmitShowHalf)u.hasEmitShowHalf=!0,u.hasEmitHideHalf=!1,null===(m=u.adTemplateRef)||void 0===m||m.emitEvent(jH.ADSHOWHALF);else if(!(null!==(o=u.adTemplateRef)&&void 0!==o&&o.isShow()||u.hasEmitHideHalf)){var y;u.hasEmitShowHalf=!1,u.hasEmitHideHalf=!0,null===(y=u.adTemplateRef)||void 0===y||y.emitEvent(jH.ADHIDEHALF)}var A=u.adProxy.isViewableExposureArea(c.layoutBox),b=h+f/2<=wW.screenHeight;if((null!==(s=u.data)&&void 0!==s&&null!==(l=s.condition)&&void 0!==l&&l.widget_gray_banner_exposure_toggle?A:b)&&!u.isViewableExposureReported&&v){if(!e)return Js(1e3).then((()=>ZQ.call(this,!0)));u.isViewableExposureReported=!0;u.adProxy.reportExposure({left:d,top:h,width:p,height:f,exposureType:"viewable"})}return Promise.resolve()},KQ=function(){var e=dQ(this),{width:t,height:i}=e.data,{crt_size:r,useStyleData:n}=e.data;n||(532===r?(t=345,i=99):[608,567,556,1707].indexOf(r)>-1&&(t=345,i=120));var{width:a,height:o}=this.style;n&&i&&t?(a=a||345,o=o||i/t*690/2):t&&i&&(a=a||t,o=o||i);var s=Xs({outer:{width:a,height:o},inner:{width:t,height:i},minScale:300/t,maxScale:wW.screenWidth/t,side:"width"}),l=e.lastRealWidth!==s.inner.width||e.lastRealHeight!==s.inner.height;return this.style.realWidth=s.inner.width,e.lastRealWidth=s.inner.width,this.style.realHeight=s.inner.height,e.lastRealHeight=s.inner.height,l&&e.emitter.emit("resize",s.inner),s},XQ=function(e){var t,i,r,n,a=dQ(this);(a.landingCount+=1,a.landingCount>1)&&a.adProxy.reportRepeatClick({slotId:8040321819858439,costType:null!==(r=a.adProxy)&&void 0!==r&&null!==(n=r.data)&&void 0!==n&&n.is_cpm?1:2,clkCnt:a.landingCount,lastClkPeriod:+new Date-a.lastLandingTime,retCode:a.lastJsapiStatus,costTime:a.lastJsapiCostTime,pageStayTime:a.landingPageCostTime,jsapiName:a.lastJsapiName});a.lastLandingTime=+new Date,a.lastJsapiStatus=2,a.lastJsapiCostTime=0,a.isLandingPage=!1,a.landingPageCostTime=0;var o=23===a.data.product_type&&e&&(null==e?void 0:e.isButton)&&!(null!==(t=a.adProxy.data)&&void 0!==t&&null!==(i=t.biz_info)&&void 0!==i&&i.is_subscribed);e.isAddContact=o;var s=a.adProxy.land(e);23===a.data.product_type&&e&&e.isButton&&!a.adProxy.data.biz_info.is_subscribed?(s.then((e=>{var t=/ok/.test(e.errMsg);t&&(a.appButton.value="查看",a.adProxy.data.biz_info&&(a.adProxy.data.biz_info.is_subscribed=1),a.adProxy.reportAdIDKey({key:9})),e.errMsg&&(a.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i,r,n=+new Date;(a.lastJsapiStatus=0,a.lastJsapiCostTime=n-a.lastLandingTime,"private_addContact"===a.lastJsapiName)&&a.adProxy.reportLandingTime({slotId:8040321819858439,costType:null!==(i=a.adProxy)&&void 0!==i&&null!==(r=i.data)&&void 0!==r&&r.is_cpm?1:2,openTime:a.lastLandingTime,closeTime:n,stayTime:a.lastJsapiCostTime,jsapiName:a.lastJsapiName,clickTime:a.lastLandingTime,clkCnt:a.landingCount,retCode:a.lastJsapiStatus,costTime:a.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"});tZ.call(this)})).catch((()=>{a.lastJsapiStatus=1})),JQ.call(this,s)):s.then((e=>{e.errMsg&&(a.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===a.lastJsapiName||"navigateToMiniProgram"===a.lastJsapiName||"openADCanvas"===a.lastJsapiName||"launchApplication"===a.lastJsapiName?a.isLandingPage=!0:a.lastJsapiStatus=0,a.lastJsapiCostTime=+new Date-a.lastLandingTime})).catch((()=>{a.lastJsapiStatus=1}))},JQ=function(e){var t=dQ(this);e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>t.adProxy.reportFollow({result:"fail"})))},eZ=function(e){var t=this;if(!aZ.call(this)){var i=dQ(this);i.isClosed||i.adProxy.fetch(e).then((e=>{if(!aZ.call(this))return VQ.call(this).then((()=>{var e;null!==(e=i.data)&&void 0!==e&&e.useTemplate&&i.adTemplateRef?SQ.call(this):i.container.style.hidden=!0})).then(zo()((function*(){var e;if(i.isReady=!1,null===(e=i.data)||void 0===e||!e.useTemplate||!i.adTemplateRef)return yU.remove(i.container);yield IQ.call(t)}))).then(zo()((function*(){return i.data=e,i.isViewableExposureReported=!1,i.adProxy.isViewable=!1,i.isShowedExposureReported=!1,i.showedExposureTime=0,yield FQ.call(t),VQ.call(t)}))).then((()=>aZ.call(this)||"hide"===i.lastClosedAction?VQ.call(this):i.isHideBYCover?(i.lastDisplayAction="show",VQ.call(this)):(i.isShow=!0,rZ.call(this,{stage:1001}),Promise.resolve().then((()=>{var e;null!==(e=i.data)&&void 0!==e&&e.useTemplate&&i.adTemplateRef?CQ.call(this):(i.container.style.hidden=!1,i.container.nextLayout((()=>ZQ.call(this)))),tZ.call(this)}))))).catch((e=>i.emitter.emit("_error",e)))})).catch((e=>i.emitter.emit("_error",e)))}},tZ=function(){var e=dQ(this);if(e.adIntervals>=30&&e.adIntervals<=3600){e.adTimer&&clearTimeout(e.adTimer);var t=1e3*e.adIntervals;e.adTimer=setTimeout((()=>eZ.call(this,!0)),t)}},iZ=function(){if(!aZ.call(this)){var e=dQ(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},rZ=function({stage:e}){var t={adtype:1,stage:e};dQ(this).adProxy.reportADFunnelModel(t)},nZ=function(){var e=this;if(!aZ.call(this)){var t=dQ(this);iZ.call(this),this._destroyed=!0,RQ.call(this,{type:2}),VQ.call(this).then((()=>t.updateResult)).then(zo()((function*(){C_(t.checkAdState),Jm(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),t.data.useTemplate&&t.adTemplateRef?yield IQ.call(e):yU.remove(t.container),aA(e)})))}},aZ=function(){return this._destroyed},oZ="banner-ad has been destroyed";class sZ extends oA{constructor({adUnitId:e,style:t={left:0,top:0,width:0,height:0},adIntervals:i=0}){super(),this._destroyed=void 0,this.style=void 0;var r=dQ(this);r.emitter=new ty,r.adProxy=new HY({adUnitId:e,adType:"banner"}),r.adTemplate=new GY({hostConfig:sQ,hostContext:{onAppEnterForeground:T_,offAppEnterForeground:C_,onAppEnterBackground:Xm,offAppEnterBackground:Jm,getPropertyOfElement:(e,t)=>"parent"===t?e.parent:vF(e),getBoundingClientRect:e=>e.layoutBox,getTextWidth:(e,t)=>zF.getTextWidth(e,t),onGlobalEvent:()=>{},offGlobalEvent:()=>{},operateVideo:()=>{},animate:()=>{}}}),r.androidAppState=0,r.androidDownloadId=0,r.clickTime=0,r.clickCount=0,r.landingCount=0,r.lastLandingTime=0,r.lastJsapiName="",r.lastJsapiStatus=0,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0,r.hideTime=0,r.isShowedExposureReported=!1,r.isViewableExposureReported=!1,r.isReady=!1,r.isShow=!1,r.emitter.on("ready",(()=>r.isReady=!0)),r.isHideBYCover=!1,r.adCover=new Fq({adUnitId:e,adType:"banner"}),r.adIntervals="number"==typeof i?i:0,r.adTimer=null,r.isClosed=!1,r.closeAdTime=0,r.showedExposureTime=0,r.lastShowTime=0,r.clickFirstGradeTime=0,r.handleAdTemplateEvent=e=>{xQ.call(this,e)},r.adCover.on(Mq,(()=>{aZ.call(this)||VQ.call(this).then((()=>{var e;r.isShow&&!aZ.call(this)&&(null!==(e=r.data)&&void 0!==e&&e.useTemplate&&r.adTemplateRef?SQ.call(this):r.container.style.hidden=!0);r.isHideBYCover=!0,r.lastDisplayAction=""})).catch((()=>{}))})),r.adCover.on(Nq,(()=>{aZ.call(this)||VQ.call(this).then((()=>{r.isShow&&!aZ.call(this)&&(r.container.style.hidden=!1),r.isHideBYCover=!1,"show"===r.lastDisplayAction?this.show():"hide"===r.lastDisplayAction&&this.hide()})).catch((()=>{}))})),r.lastRealWidth=0,r.lastRealHeight=0,r.updateResult=Promise.resolve(),this.style={top:0,left:0,width:0,height:0},this._destroyed=!1;var n=null;Object.keys(t).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:i=>{aZ.call(this)||i!==t[e]&&(t[e]=i,r.updateResult=new Promise((e=>{clearTimeout(n),n=setTimeout(e,0)})).then((()=>VQ.call(this))).then((()=>Promise.all([YQ.call(this),r.container.nextLayout().then((()=>ZQ.call(this)))]))))}})})),this.style.realWidth=this.style.width,this.style.realHeight=this.style.height;var a=r.adProxy.fetch();a.catch((e=>r.emitter.emit("_error",e))),r.adFetchResult=a,r.adFetchResult.then((e=>{(r.emitter.emitter._events?Object.keys(r.emitter.emitter._events):[]).includes("_error")||"devtools"!==pQ?(r.data=e,FQ.call(this)):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),r.checkAdState=()=>{r.adFetchResult.then((()=>{if(r.appButton&&23===r.data.product_type?r.adProxy.checkFollow(r.data.app.uin).then((e=>{var{button_text:t}=r.data.button_action;r.appButton.value=e?"查看":t,r.adProxy.data.biz_info&&(r.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===r.data.product_type&&GQ.call(this),r.isLandingPage){var e,t;r.lastJsapiStatus=0,r.isLandingPage=!1;var i=+new Date;r.landingPageCostTime=i-r.hideTime,r.adProxy.reportLandingTime({slotId:8040321819858439,costType:null!==(e=r.adProxy)&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.is_cpm?1:2,openTime:r.hideTime,closeTime:i,stayTime:r.landingPageCostTime,jsapiName:r.lastJsapiName,clickTime:r.lastLandingTime,clkCnt:r.landingCount,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,actTypeInt:1})}})).then((()=>{!r.isShow||r.adTimer||[AQ,bQ,EQ].includes(r.androidAppState)||tZ.call(this)})).catch((()=>{})),!aZ.call(this)&&r.isClosed&&r.closeAdTime&&+new Date-r.closeAdTime>60*(r.data.condition.widget_gray_close_v2||3)*1e3&&VQ.call(this).then((()=>{r.isClosed=!1,r.closeAdTime=0,eZ.call(this)}))},T_(r.checkAdState),r.onHide=()=>{iZ.call(this),r.hideTime=+new Date},Xm(r.onHide)}show(e){var t;if(aZ.call(this))return Promise.reject({errMsg:oZ});var i,r=dQ(this);return r.isClosed?(r.lastClosedAction="show",Promise.reject({errMsg:"banner-ad has been closed"})):r.isHideBYCover?(r.lastDisplayAction="show",null!==(i=r.data)&&void 0!==i&&i.useTemplate?CQ.call(this):VQ.call(this)):(r.isShow=!0,r.lastShowTime=+new Date,rZ.call(this,{stage:1001}),null!=e&&e.branchId?r.adProxy.recordAnalyseBranchInfo(e):r.adProxy.resetAnalyseBranchInfo(),null!==(t=r.data)&&void 0!==t&&t.useTemplate?CQ.call(this).then((()=>(tZ.call(this),Promise.resolve()))):VQ.call(this).then((()=>{r.adFeedbackList.style.hidden=!0,r.adFeedbackMenu.style.hidden=!0,r.container.style.hidden=!1,r.container.nextLayout((()=>ZQ.call(this))),tZ.call(this)})))}hide(){if(!aZ.call(this)){var e=dQ(this);return e.isClosed&&(e.lastClosedAction="hide"),e.isHideBYCover?(e.lastDisplayAction="hide",VQ.call(this)):(e.isShow=!1,e.adProxy.isViewable=!1,VQ.call(this).then((()=>{var t;null!==(t=e.data)&&void 0!==t&&t.useTemplate&&e.adTemplateRef?SQ.call(this):e.container.style.hidden=!0,iZ.call(this)})))}}destory(){nZ.call(this)}destroy(){nZ.call(this)}onResize(e){aZ.call(this)||dQ(this).emitter.on("resize",e)}offResize(e){aZ.call(this)||dQ(this).emitter.off("resize",e)}onError(e){aZ.call(this)||dQ(this).emitter.on("_error",e)}offError(e){aZ.call(this)||dQ(this).emitter.off("_error",e)}onLoad(e){aZ.call(this)||dQ(this).emitter.on("load",e)}offLoad(e){aZ.call(this)||dQ(this).emitter.off("load",e)}onClose(e){aZ.call(this)||dQ(this).emitter.on("close",e)}offClose(e){aZ.call(this)||dQ(this).emitter.off("close",e)}}var lZ={},uZ=function(e,t,i){lZ.hasOwnProperty(e)||(lZ[e]={}),lZ[e][t]=i},cZ=function(e,t){if(lZ.hasOwnProperty(e))return lZ[e][t]},dZ=Ae("AppRouteDone"),hZ=dZ.internalOnMethod;dZ.internalOffMethod;var pZ={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,lineBreak:"ellipsis",fontWeight:500,opacity:1}},fZ={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,lineBreak:"ellipsis",opacity:1}},gZ=K()(K()(K()(K()(K()(K()(K()({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineBreak:"ellipsis",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderWidth:.5,justifyContent:"center",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,fontSize:14},countDownAppend:{height:32,lineHeight:32,fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderWidth:.5,flexDirection:"row",alignItems:"center"},close:{width:29,height:32,lineHeight:32,fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8},sound:{width:20,height:20},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:12,height:12,marginLeft:2},rectangleLight:{width:12,height:12,marginLeft:2},splitLineLeft:{width:1,height:18.5,marginLeft:10,marginRight:10},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",lineBreak:"ellipsis",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),{pendantContainer:{hidden:!0,position:"absolute"}}),_Z=K()({},{count:{borderColor:"rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.15)"},countDown:{color:"#000000"},countDownAppend:{color:"#000000"},barRight:{borderColor:"rgba(0, 0, 0, 0.3)",backgroundColor:"rgba(255, 255, 255, 0.15)"},close:{color:"#000000"},splitLine:{backgroundColor:"rgba(0, 0, 0, 0.25)"},adText:{color:"#000000"},rectangle:{hidden:!0},rectangleLight:{hidden:!1},splitLineLeft:{backgroundColor:"rgba(0, 0, 0, 0.25)"}}),mZ=K()({},{count:{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(0, 0, 0, 0.15)"},countDown:{color:"#ffffff"},countDownAppend:{color:"#ffffff"},barRight:{borderColor:"rgba(255, 255, 255, 0.3)",backgroundColor:"rgba(0, 0, 0, 0.15)"},close:{color:"#ffffff"},splitLine:{backgroundColor:"rgba(255, 255, 255, 0.25)"},adText:{color:"#ffffff"},rectangle:{hidden:!1},rectangleLight:{hidden:!0},splitLineLeft:{backgroundColor:"rgba(255, 255, 255, 0.25)"}}),vZ=[{op:"insert",id:"innerPendant",parent:"pendantContainer",tpl:{type:"image",id:"innerPendantImage",style:{width:80,height:60},options:{baseType:1,data:{imgUrlExpr:"$scope.private.data.crtInfo.wxgame_video_card.pendant_img"},events:{rewardedVideoPlay:[{action:"rewardedVideoDynamic",expr:"$scope.private.pendantContainer.style.hidden == $const.true",value:{list:[{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth < $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#sub($const.systemInfo.screenWidth, 92)",bottomExpr:"#rewardedVideoIsExpandStyle() ? #add(12, #multi(1032, #division($const.systemInfo.screenWidth, 960))) : 150"}},{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth > $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#rewardedVideoIsExpandStyle() ? #sub(#sub(#division($const.systemInfo.screenWidth, 2), #division($const.systemInfo.screenHeight, 6)), 92)  : #sub($const.systemInfo.screenWidth, 92)",bottom:20}}]}}],tap:[{action:"landAd"},{action:"reportAdMonitorData",value:{id:924,key:172,extInfo:"pendant-click"}}]}}}}],yZ=!1,AZ=null;k.onReady((()=>{setTimeout((()=>{Oi({apiName:"webapi_getadcardbalance",success({data:e}){yZ=!e.errCode}})}),3e3)}));var bZ,EZ=zB["incentive-video"],wZ=e=>rA(e),TZ="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",CZ="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",SZ="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",IZ=1e3,xZ=2e3,PZ=!1,DZ="portrait",RZ=0,OZ=0,kZ=0,MZ=0,NZ=0,LZ=0,BZ={};k.onReady((()=>{BZ=k.safeArea||{};try{k.global.window.pageOrientation&&(DZ=k.global.window.pageOrientation)}catch(e){}wW.isIOS?PZ=!0===k.showStatusBar:wW.isAndroid&&(PZ=!0===k.showStatusBar||"true"===k.showStatusBar),wW.isWaGame&&(bm.onTouchStart((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&(RZ=Math.round(e.changedTouches[0].clientX),OZ=Math.round(e.changedTouches[0].clientY),kZ=0,MZ=0,LZ=0,NZ=+new Date)})),bm.onTouchEnd((e=>{null!=e&&e.changedTouches&&e.changedTouches.length>0&&(kZ=Math.round(e.changedTouches[0].clientX),MZ=Math.round(e.changedTouches[0].clientY),LZ=+new Date-NZ)})))}));var FZ=(e,t)=>{var i=e.touchendTimeStamp-e.touchstartTimeStamp;e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&i>=0&&jU(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:i,screenwidth:wW.screenWidth,screenheight:wW.screenHeight,device_orientation:wW.deviceOrientation})},UZ=function(){var e=wZ(this);try{if(wW.isIOS&&wW.isApp&&e.adProxy.isValidCondition("widget_gray_measure_text")){var t;it("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&(it("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{var i=zF.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=i),!1===e.downloadButton.style.hidden&&(i=zF.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=i+2,e.downloadButtonText.style.width=i,e.downloadProgressText.style.width=i),e.data.flooringPage&&2===e.pageType&&(i=zF.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=i)}}catch(e){}},WZ="video-ad has been destroyed",GZ=function(){var e=wZ(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((()=>{var t="即将跳转试玩";t=wW.isIOS?`${t} `:t;var i=xL({text:t,fontSize:12})||72,r=xL({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=i,e.playableGiveUp.style.width=r,e.playableTipsWrap.style.width=i+r+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=i+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=r+20,Js(300).then((()=>e.playableTipsWrap.animate({left:0,duration:200})))}))},VZ=function(e){if(!QK.call(this)){var t=wZ(this);if("object"==typeof e&&e.length>0)for(var i of e)t[i]&&(t[i].style.width=wW.screenWidth,t[i].style.height=wW.screenHeight)}},jZ=function(){if(QK.call(this))return Promise.reject({errMsg:WZ});var e=wZ(this);return zZ.call(this,"hide").then((()=>{wW.isWaGame||(e.adProxy.setPageOrientation(wW.deviceOrientation),wW.isAndroid&&(e.updateScreenInfoTimer&&(clearTimeout(e.updateScreenInfoTimer),e.updateScreenInfoTimer=null),e.updateScreenInfoTimer=setTimeout((()=>{var{screenWidth:t,screenHeight:i}=wW;SW();var r=!1,n=0;wW.screenHeight===i&&wW.screenWidth===t||(r=!0,n=wW.screenHeight-i),n&&(e.cardContainer.style.top+=n);var a=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];XK.call(this)&&a.push("video"),VZ.call(this,a),r&&XK.call(this)&&(QZ.call(this,!0),aX.call(this),cX.call(this))}),1e3)))}))},HZ=function(){if(QK.call(this))return Promise.reject({errMsg:WZ});var e=wZ(this);return zZ.call(this,"show").then((()=>{wW.isWaGame||e.adProxy.setPageOrientation(DZ)})).catch((t=>{throw e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},zZ=function(e){var t=wZ(this);return eX.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},YZ=function(e,t=!0){if(QK.call(this))return!1;var i=wZ(this).adProxy.isTriggerClick(e),r=i?0:1;return t&&xK.call(this,e,r),i},$Z=function(){if(!QK.call(this)){var e=wZ(this),{product_type:t,button_action:i,card:{icon:r,name:n,wording:a,showTime:o,headBgImg:s,mpTagType:l},app:u,flooringPage:c}=e.data,d=tX.call(this);e.cardShowTime=o,e.appIcon.src=r,e.appName.value=el(n,20),e.appWording.value=a,e.appIcon.style.borderRadius=10,-1===[12,19].indexOf(t)&&("portrait"===wW.deviceOrientation?e.appIcon.style.borderRadius=27:"landscape"===wW.deviceOrientation&&(e.appIcon.style.borderRadius=22)),e.button.value=i.button_text,i.button_text||(12===t?e.button.value="下载":19===t&&(e.button.value="查看")),23===t&&e.adProxy.checkFollow(e.data.app.uin).then((t=>{QK.call(this)&&e.adProxy.reportAdMonitorData(vB.CHECK_FLOW_ERROR);var r=t?"查看公众号":i.button_text||"关注公众号";e.button.value=r,UZ.call(this),e.data.flooringPage&&1===e.pageType&&0===e.buttonTextType?e.pageButton.value=r:e.data.flooringPage&&2===e.pageType&&0===e.buttonTextType?e.pageCardButton.value=r:e.pageType||(e.defaultPageButton.value=r),e.expandCardButton.value=r,TK.call(this,KL.CHANGEADBTNTEXT,{text:r})})).catch((()=>{var t=u.isFollowed?"查看公众号":i.button_text||"关注公众号";e.button.value=t,UZ.call(this),TK.call(this,KL.CHANGEADBTNTEXT,{text:t})})),1===e.buttonTextType&&(e.button.value=i.button_text,TK.call(this,KL.CHANGEADBTNTEXT,{text:i.button_text})),UZ.call(this),e.pageType=null!=c&&c.landpage_type?c.landpage_type:0,hK.call(this),d&&(e.expandCardAppIcon.bubbleEvent=!1),e.expandCardAppIcon.src=r,e.expandCardAppName.value=el(n,20),e.expandCardAppWording.value=a,e.expandCardButton.value=e.button.value;var{screenWidth:h,screenHeight:p}=wW,f=e.expandCardInfoContainer.style;if("portrait"===wW.deviceOrientation?(f.width=h,f.justifyContent="flex-start",f.paddingLeft=0,f.paddingTop=48,f.height=400/375*h,f.bottom=0,f.position="absolute"):(f.justifyContent="center",f.paddingLeft=.672*p,f.width=f.paddingLeft+300,f.paddingTop=0,f.height=p,f.bottom=null,f.position=null),!d){var g=zF.getTextWidth(el(n,20),17);for(var _ of(e.expandCardAppIcon.style.left=134-g/2,Object.keys(fZ))){var m=fZ[_];e[_]&&Object.assign(e[_].style,m)}}if(e.expandCardAppIcon.style.borderRadius=d?8:3,-1===[ZB.OPEN_PLATFORM_APP_MOB,ZB.APPLE_APP_STORE].indexOf(t)&&(e.expandCardAppIcon.style.borderRadius=d?32:12),c&&1===e.pageType&&"portrait"===wW.deviceOrientation)e.pageAppIcon.src=r,e.pageAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageAppName.value=el(n,20),e.pageAppWording.value=a,e.pageButton.value=e.button.value,e.imgBaseName="pageImg",e.pageImgContainer.style.width=h,e.pageImgContainer.style.height=h,e.pageImgBox.style.width=3*h,e.pageImgBox.style.height=h,e.pageImgBox.style.left=0,e.pageInfoContainer.style.width=h,e.pageInfoContainer.style.height=p-h,e.pageInfoContainer.style.top=h,e.pageImgTips.style.top=h-20,e.pageImgTips.style.left=h/2-17.5,wW.isIOS&&(e.pageImgIcon0.style.borderRadius=4,e.pageImgIcon1.style.borderRadius=4,e.pageImgIcon2.style.borderRadius=4),e.pageImgIcon0.style.backgroundColor="#ffffff",e.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",e.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",cK.call(this),QZ.call(this);else if(c&&2===e.pageType&&"portrait"===wW.deviceOrientation)e.pageCardContainer.style.width=h,e.pageCardAppIcon.src=r,e.pageCardAppIcon.style.borderRadius=e.appIcon.style.borderRadius,e.pageCardAppName.value=el(n,20),e.pageCardAppWording.value=a,e.pageCardButton.value=e.button.value,e.pageCard.style.width=h,e.pageCardSplitLine.style.width=h-20,e.pageCardHotArea.style.width=h,e.pageCardImgContainer.style.width=h-20,e.pageCardImgBox.style.width=lK.call(this,{padding:10}),e.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",e.video.style.padding=0,e.video.style.paddingBottom=0,e.imgBaseName="pageCardImg",cK.call(this),QZ.call(this),e.pageHandler.style.hidden=!1;else if(c&&[3,4].indexOf(e.pageType)>-1){var v="视频结束后可试玩";v=wW.isIOS?`${v} `:v;var y=xL({text:v,fontSize:12})||100;e.playableTipsContent.style.width=y,e.playableTipsWrap.style.width=y+24,e.cardContainer.style.top-=32}else if(!e.pageType){if(d&&(e.defaultPageAppIcon.bubbleEvent=!1),e.defaultPageAppIcon.src=r,e.defaultPageAppName.value=el(n,20),e.defaultPageAppWording.value=a,e.defaultPageButton.value=e.button.value,!d){var A=zF.getTextWidth(el(n,20),17);for(var b of(e.defaultPageAppIcon.style.left=134-A/2,Object.keys(pZ))){var E=pZ[b];e[b]&&Object.assign(e[b].style,E)}}e.defaultPageAppIcon.style.borderRadius=d?8:3,-1===[ZB.OPEN_PLATFORM_APP_MOB,ZB.APPLE_APP_STORE].indexOf(t)&&(e.defaultPageAppIcon.style.borderRadius=d?32:12),e.defaultPageBackgroundImage.src=s||"",aX.call(this)}if(8===l){var w=+new Date;lF({buttonText:e.button.value,aid:e.adProxy.data.aid}).then((t=>{var i=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:w,endTime:i,showTime:e.showDetailTime||0}),t){var{count:r,descText:n}=t,a=`- 最近已有${r}人${n} -`;e.pageType?1===e.pageType&&(e.pageAppConversion.value=a,e.pageAppConversion.style.hidden=!1):(e.defaultPageAppConversion.value=a,e.defaultPageAppConversion.style.hidden=!1),e.expandCardAppConversion.value=a,e.expandCardAppConversion.style.hidden=!1}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.value="",e.defaultPageAppConversion.style.hidden=!0,e.expandCardAppConversion.style.hidden=!0})).catch((t=>{e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.defaultPageAppConversion.value="",e.expandCardAppConversion.style.hidden=!0,e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_RELATION_FETCH_ERROR,t)}))}else e.pageAppConversion.style.hidden=!0,e.defaultPageAppConversion.style.hidden=!0,e.defaultPageAppConversion.value="",e.expandCardAppConversion.style.hidden=!0;e.androidAppState=0,e.button.style.hidden=!1,e.pageButton.style.hidden=!1,e.defaultPageButton.style.hidden=!1,e.expandCardButton.style.hidden=!1,e.downloadButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!0,12===t&&e.adProxy.isValidCondition("widget_gray_video_download_v2")&&(e.button.style.hidden=!0,e.downloadButton.style.hidden=!1,e.downloadButtonText.value=i.button_text,e.downloadProgressText.value=i.button_text,UZ.call(this),1===e.pageType&&(e.pageButton.style.hidden=!0,e.pageDownloadButton.style.hidden=!1,e.pageDownloadButtonText.value=i.button_text,e.pageDownloadProgressText.value=i.button_text))}},qZ=function(e={}){if(QK.call(this))return!1;var t=wZ(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){var{y:i}=e,r=t.flooringPageIsShow?t.video.style.height-180:0,n=t.flooringPageIsShow?t.video.style.height:0;return!!(i>r&&i<n)}if("top"===e.direction){var{y:a}=e,o=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(a>0&&a<o)}}return!1},QZ=function(e=!1){if(!QK.call(this)){var t,{screenWidth:i,screenHeight:r}=wW,n=wZ(this),a="",o="",s=0,l=0,u=0,c=0,d=(r-n.video.style.height)/2;1===n.pageType?(n.pageHandler.style.width=i,n.pageHandler.style.height=i,a="pageImgBox",l=i/4,s=3*i/4-n.pageImgBox.style.width,t={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-i,-2*i]}):2===n.pageType&&(n.pageHandler.style.width=i,n.pageHandler.style.height=n.video.style.height,n.pageHandler.style.top=(r-n.video.style.height)/2,(r!==n.video.style.height||e)&&(n.pageMask.style.hidden=!1,n.pageMask.style.width=i,n.pageMask.style.height=(r-n.video.style.height)/2,n.pageMask.style.top=(r+n.video.style.height)/2),a="pageCardImgBox",o="pageCardBody",s=i-(l=60)-n.pageCardImgBox.style.width,u=n.video.style.height-n.pageCardBody.style.height+10,!wW.isWaGame&&wW.isAndroid&&(u=n.video.style.height-n.pageCardBody.style.height+d+10),c=u+180,n.pageCardBody.style.top=c,t={yRevise:!0,directionMap:{up:u,down:c},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:i-n.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),n.flooringPageInfos={xMin:s,xMax:l,yMin:u,yMax:c,xContainer:a,yContainer:o,infos:t}}},ZZ=function(e={}){if(!QK.call(this)){var t=wZ(this),i=!0===t.flooringPageIsShow?e.max:e.min;return t.pageCardBody.animate({top:i,duration:50}).then((()=>_K.call(this,e))).then((()=>JZ.call(this)))}},KZ=function(e={}){if(!QK.call(this)){var t=wZ(this),i=e.event?e.event:{};if(eK.call(this,i))if(t.flooringPageIsShow){var r=t.pageCard.getAbsolutePosition(),n=r.top,a=r.top+e.cardHeight,o=t.pageCardImgContainer.getAbsolutePosition().top;if(i.y>n&&i.y<a){var s=t.pageCardButton.getAbsolutePosition(),l=s.top,u=s.top+e.buttonHeight,c=s.left,d=s.left+e.buttonWidth;i.y>l&&i.y<u&&i.x>c&&i.x<d?tK.call(this,i,"button",pW.REWARD_PAGE_BUTTON):tK.call(this,i,"card",pW.REWARD_PAGE_CARD)}else i.y>=o&&i.y<=t.video.style.height?tK.call(this,i,"img",pW.REWARD_PAGE_IMAGE):ZZ.call(this,e)}else{var h=t.pageCard.getAbsolutePosition(),p=h.top,f=h.top+e.cardHeight,g=t.pageCardButton.getAbsolutePosition(),_=g.top,m=g.top+e.buttonHeight,v=g.left,y=g.left+e.buttonWidth;i.y>p&&i.y<f?i.y>_&&i.y<m&&i.x>v&&i.x<y?tK.call(this,i,"button",pW.REWARD_PAGE_BUTTON):tK.call(this,i,"card",pW.REWARD_PAGE_CARD):ZZ.call(this,e)}}},XZ=function(e={}){if(!QK.call(this)){var t=wZ(this),i=e.imgBox?e.imgBox:"",r=e.xMin?e.xMin:0,n=e.xMax?e.xMax:0,a=e.xHead?e.xHead:0,o=e.xTail?e.xTail:0;return t[i].nextLayout((()=>{var e=t[i].style.left,s=e;if(e>a&&e<=n?s=a:e>=r&&e<o&&(s=o),s!==e)return t[i].animate({left:s,duration:50})}))}},JZ=function(){if(!QK.call(this)){var e=wZ(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)}},eK=function(e){if(!QK.call(this)){var t=wZ(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)}},tK=function(e,t="",i){QK.call(this)||eK.call(this,e)&&iK.call(this,e,t,i)},iK=function(e,t="",i){if(!QK.call(this)){var r=wZ(this);if([1,2].includes(r.pageType)&&fK.call(this,e,t),wW.isAndroid&&12===r.data.product_type&&1===r.pageType&&r.adProxy.isValidCondition("widget_gray_video_download_v2"))jK.call(this);else if(wW.isIOS&&46===r.data.product_type&&6===r.data.dest_type)Promise.race([PK.call(this,e,i),Js(500)]).then((()=>{RK.call(this,{button:5},e),WK.call(this)})).catch((()=>{RK.call(this,{button:5},e),WK.call(this)}));else{PK.call(this,e,i),RK.call(this,{button:5},e);var n={},{extBackComm:a}=r.data;(23===r.data.product_type||a.is_from_snsadinfo)&&(n["button"===t?"isButton":"toOfficalAccountDetail"]=!0),WK.call(this,n)}}},rK=function(e={}){if(!QK.call(this)){var t=wZ(this),i=e.container?e.container:"",r=e.event?e.event:{},n=t[i].getAbsolutePosition();return{x:n.left+r.x,y:n.top+r.y}}},nK=function(e=!1,t={}){if(!QK.call(this)){var i=wZ(this);i.isPress=e,i.startPosX=null!=t&&t.x?t.x:0,i.startPosY=null!=t&&t.y?t.y:0,i.lastPosX=null!=t&&t.x?t.x:0,i.lastPosY=null!=t&&t.y?t.y:0,i.lastSecondPosX=null!=t&&t.x?t.x:0,i.lastSecondPosY=null!=t&&t.y?t.y:0,i.direction="",i.startTime=e?+new Date:0,e&&i.throttleTimer&&clearTimeout(i.throttleTimer),i.throttleTimer=null,i.timeStamp=0,i.callCount=0,i.distanceList=[]}},aK=function(){if(!QK.call(this))for(var e=wZ(this),t=e.imgBaseName,i=0;i<3;i++){var r=e[t+i].getAbsolutePosition();e[`pageImgIcon${i}`].style.backgroundColor=0===r.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},oK=function(e={}){if(!QK.call(this)){var t=wZ(this),i=e.event?e.event:{},r=e.direction?e.direction:"left",n="top"===r?i.y-t.lastPosY:i.x-t.lastPosX;wW.isAndroid&&(n="top"===r?i.y-t.lastSecondPosY:i.x-t.lastSecondPosX);var a=e.critical?e.critical:0;return"top"===r?n<0&&Math.abs(n)>=a?"up":"down":n<0&&Math.abs(n)>=a?"right":"left"}},sK=function(e={}){if(QK.call(this))return Promise.reject({errMsg:WZ});var t=wZ(this),i=e.direction?e.direction:"left",r=e.imgBox?e.imgBox:"",n="top"===i?e.event.y:e.event.x,a=oK.call(this,e),o=e.directionMap?e.directionMap:{},s=e.posQueue?e.posQueue:[],l=null;if(Object.keys(o).length>0)l=o[a]?o[a]:0;else{n=t[r].style[i],s.sort(((e,t)=>e-t));for(var u=0,c=s.length-1;u<c;){var d=Math.floor((u+c)/2),h=c-u,p=s[d];if(n===p){l=p;break}if(n>p?u=d:c=d,h<=1)break}if(!l)if(e.decideByDirection)l=s[a]||("right"===a?s[u]:s[c]);else{var f=s[c],g=s[u];l=Math.abs(n-f)>=Math.abs(n-g)?g:f}}return Promise.resolve().then((()=>{t[r].style[i]=l})).then((()=>{if(e.logPagePull)return _K.call(this,e);nK.call(this)})).then((()=>{if(e.showTips)return JZ.call(this)})).then((()=>{if(e.setImgTips)return t[r].nextLayout((()=>{aK.call(this)}))}))},lK=function(e={}){if(!QK.call(this)){var t=wZ(this);if(e&&"object"==typeof e&&t.data.flooringPage){var i=e.padding?e.padding:0,{pageType:r}=t,n=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];n="string"==typeof n?JSON.parse(n):n;var a=0;return n.forEach(((e,t)=>{var{width:n}=uK.call(this,{pageType:r,width:e.width,height:e.height});a+=0===t?n:i+n})),a}}},uK=function(e){if(!QK.call(this)){var t={},{screenWidth:i}=wW;if(!e||"object"!=typeof e)return t;var{pageType:r,width:n,height:a}=e;return 1!==r&&r?2===r&&n===a?(t.scale=150/n,t.width=150,t.height=150):2===r&&n!==a&&(t.scale=150/a,t.width=150*n/a,t.height=150):(t.scale=i/n,t.width=i,t.height=i),t}},cK=function(){if(!QK.call(this)){var e=wZ(this);if(e.data.flooringPage){var{pageType:t}=e,i=e.data.flooringPage.img_list?e.data.flooringPage.img_list:[];i="string"==typeof i?JSON.parse(i):i;var r=e.imgBaseName?e.imgBaseName:"";i.forEach(((i,n)=>{var a=r+n,{width:o,height:s,scale:l}=uK.call(this,{pageType:t,width:i.width,height:i.height});e[a].scale=l,e[a].style.width=o,e[a].style.height=s,e[a].src=i.image_url}))}}},dK=function(){if(QK.call(this))return Promise.resolve();var e=wZ(this);CK.call(this,ZL.REWARDEDVIDEOSHOWFLOORINGPAGE);var{yMin:t,yMax:i}=e.flooringPageInfos;return 2===e.pageType&&!e.flooringPageIsShow&&e.data.flooringPage?e.pageCardBody.animate({top:t,duration:50}).then((()=>(e.flooringPageAutoShow=!0,_K.call(this,{min:t,max:i})))).then((()=>JZ.call(this))):1===e.pageType&&e.data.flooringPage?e.pageContainer.animate({left:0,duration:300}).then((()=>_K.call(this))):e.pageType?Promise.resolve():(e.cardContainer.animate({opacity:0,duration:280}),e.defaultPageContainer.animate({opacity:1,duration:280}).then((()=>_K.call(this))))},hK=function(){if(!QK.call(this)){var e=wZ(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(var t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState[`img${t}`]={exposure:0,click:0}}}},pK=function(){if(!QK.call(this)){var e=wZ(this);if(wW.isIOS){for(var t=0;t<3;t++)e[`pageImg${t}`].src=SZ,e[`pageCardImg${t}`].src=SZ;e.pageCardImg3.src=SZ,e.pageAppIcon.src=SZ,e.pageCardAppIcon.src=SZ,e.pageCardTipIcon.src=SZ}}},fK=function(e={},t=""){if(!QK.call(this)){var i=wZ(this);if("img"===t)for(var r=i.imgBaseName,n=0;n<=3&&(3!==n||2===i.pageType);n++){var a=i[r+n].getAbsolutePosition(),{width:o}=i[r+n].style,{height:s}=i[r+n].style,l=a.left,u=a.left+o,c=a.top,d=a.top+s;e.x>=l&&e.x<=u&&e.y>=c&&e.y<=d&&(i.flooringPageState[`img${n}`].click+=1)}else["card","button"].includes(t)&&(i.flooringPageState[t].click+=1)}},gK=function(e=!1){if(!QK.call(this)){var t=wZ(this);if(e){if(t.pageType)for(var i=t.imgBaseName,r=0;r<=3&&(3!==r||2===t.pageType);r++){var n=t[i+r].getAbsolutePosition(),{width:a}=t[i+r].style,o=-a/2,s=wW.screenWidth-a/2;n.left>o&&n.left<s&&(t.flooringPageState[`img${r}`].exposure+=1)}}else t.exposureTimer&&(clearTimeout(t.exposureTimer),t.exposureTimer=null),t.exposureTimer=setTimeout((()=>gK.call(this,!0)),1e3)}},_K=function(e={}){if(!QK.call(this)){var t=wZ(this);if(2===t.pageType){var i=e.min?e.min:0,r=e.max?e.max:0;t.pageCardBody.style.top!==i||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===r&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,mK.call(this,{type:2,staytime:0,componentsstartstr:""}),mK.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,hK.call(this)):t.pageCardBody.style.top===i&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,mK.call(this,{type:4,staytime:0,componentsstartstr:""}),gK.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,mK.call(this,{type:5,staytime:0,componentsstartstr:""}),mK.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,hK.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,mK.call(this,{type:1,staytime:0,componentsstartstr:""}),gK.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,mK.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,hK.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,mK.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),gK.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,mK.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,hK.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,mK.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),gK.call(this)))}},mK=function(e){if(!QK.call(this)){var t=wZ(this);1===t.pageType&&delete e.type;var i=[];return i.push(e),t.adProxy.reportFlooringPage(t.pageType,i)}},vK=function(){if(QK.call(this))return Promise.reject({errMsg:WZ});var e=wZ(this),t={};return null!==e.adRequestType&&(t.requestType=e.adRequestType),e.adProxy.fetch(!1,{},t).then((t=>{try{e.adProxy.setTimePoint("p4");var i=Object.keys(e.emitter.emitter).includes("_events")?Object.keys(e.emitter.emitter._events):[];return"devtools"!==wW.platform||i.includes("_error")?(e.data=t,e.isData=!0,yK.call(this),e.adProxy.preloadLanding(),e.emitter.emit("load"),void e.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(t){throw e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_PARSE_ERROR,t),{}}}))},yK=function(){if(!QK.call(this)){var e=wZ(this),{data:t}=e,{deviceOrientation:i,screenWidth:r,screenHeight:n}=wW;if(e.container.style.left=0,MK.call(this,e.darkMode),wW.isIOS){var a="portrait"===i?BZ.top?44:12:10,o="portrait"===i?BZ.top?78:46:44;e.topBar.style.top=a,e.adFeedbackList.style.top=o,e.adFeedbackMenu.style.top=o}e.container.style.top=n,e.video.style.padding=8,e.video.style.paddingBottom=16;if(VZ.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),r<n)e.cardContainer.style.width=r-16,e.cardContainer.style.top=n-130,e.cardContainer.style.left=8,e.topBar.style.left=0,e.topBar.style.width=r,e.card.style.height=90;else if(r>=n){var s=BZ.top||0;e.cardContainer.style.width=348,e.cardContainer.style.top=n-104,e.cardContainer.style.left=s+18,e.topBar.style.width=r-2*s-16,e.topBar.style.left=s+8,e.card.style.height=72}if(PZ&&(e.topBar.style.top=e.topBar.style.top+30,e.adFeedbackList.style.top=e.adFeedbackList.style.top+30,e.adFeedbackMenu.style.top=e.adFeedbackMenu.style.top+30),wW.isWaGame?e.container.style.fixed&&delete e.container.style.fixed:e.container.style.fixed=!0,e.dialog.style.top=n>138?(n-138)/2:0,e.dialog.style.left=r>300?(r-300)/2:0,e.dialogCloseTip.style.top=(n-36)/2,e.dialogCloseTip.style.left=(r-124)/2,JK.call(this))e.cardContainer.style.hidden=!0,e.container.style.backgroundColor="rgba(0, 0, 0, 0)",e.topBar.style.hidden=!0,e.video.style.hidden=!0,e.video.src&&(e.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{var l,u,c,d;e.container.style.backgroundColor="#000000";var{product_type:h}=t,{src:p,poster:f,duration:g}=lX.call(this);e.cardContainer.style.hidden=sX.call(this),e.expandCardContainer.style.hidden=!sX.call(this),wW.isIOS&&e.video.src===p&&e.video.seek(0),wW.isIOS?(e.video.poster=f,Js(500).then((()=>{e.video.src=p}))):(e.video.src=p,e.video.poster=f),e.adProxy.setTimePoint("p8"),e.buttonTextType=e.data.button_action.text_type||0,cX.call(this),wW.isAndroid&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([p]).catch((t=>{e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_PRELOAD_ERROR,t)})));var{rewardedTime:_}=e.data,m=Math.ceil((g>_?_:g)/1e3).toString();e.countDown.value=m,e.countDownAppend.value="秒后可获得奖励",e.countDown.style.width=2===m.length?19:12,e.countDownAppend.style.width=100,$Z.call(this),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedback.style.hidden=!1,e.close.value="关闭",e.close.style.width=29),null!==(l=e.data)&&void 0!==l&&null!==(u=l.condition)&&void 0!==u&&u.widget_gray_rewarded_video_effect_guide&&(e.video.autoPauseIfOpenNative=!1,e.video.autoPauseIfNavigate=!1,e.isPlayBackgroundSupported=!0),12===h&&(e.adProxy.setAppInstallState(!1),VK.call(this));var v=[];(null===(c=e.data.crtInfo)||void 0===c||null===(d=c.wxgame_video_card)||void 0===d?void 0:d.pendant_img)&&(v=v.concat(vZ));var{adDynamicList:y}=e.adProxy.data,A=null!=y&&y.length?v.concat(y):v;EK.call(this,A)}}},AK=function(e){var t=wZ(this);return t$(e,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:K()({},wW),time:Date.now()},$scope:{private:t,safeArea:BZ}},{"#rewardedVideoIsExpandStyle":()=>sX.call(this),"#setDarkMode":e=>MK.call(this,e)})},bK=null,EK=function(e){var t=wZ(this);null!=e&&e.length&&(t.dynamicElems||(t.dynamicElems={}),t.dynamicOldStyle||(t.dynamicOldStyle={}),t.dynamicEmitter||wK.call(this),e.forEach((e=>{var{op:i,expr:r}=e;if(!r||AK.call(this,r))if("insert"===i){var n,{id:a,parent:o,tpl:s,bubbleEvent:l}=e;if(null!==(n=t.dynamicElems)&&void 0!==n&&n[a]){var u,c,d;if(wW.screenWidth===bK)return;null===(u=(c=t.dynamicElems[a]).remove)||void 0===u||u.call(c),LF(null===(d=t.dynamicElems[a])||void 0===d?void 0:d.referComponent)}var h=MF(a$,{manager:null,reporter:null,emitter:t.dynamicEmitter,adProxy:t.adProxy,template:s,systemInfo:K()({},wW),scope:{private:t,safeArea:BZ},adData:t.adProxy.data,adDatas:t.adProxy.datas,adCustomId:bW,isEmpty:!1,innerFunctions:{"#rewardedVideoIsExpandStyle":()=>sX.call(this),"#setDarkMode":e=>MK.call(this,e)}},!1);!1!==l&&h.updateBubbleEvent(),t.dynamicElems[a]=h.getRootElement(),t[o]&&t[o].add(t.dynamicElems[a])}else if("setStyle"===i){var{id:p,style:f}=e,g=t[p]||t.dynamicElems[p]||null;if(g){var _=!1;for(var m of(t.dynamicOldStyle&&!t.dynamicOldStyle[p]&&(_=!0,t.dynamicOldStyle[p]={}),Object.keys(f))){var v=m,y=f[m];if(m.includes("Expr")){var A=m.split("Expr");2===A.length&&([v]=A,y=AK.call(this,y))}_&&(t.dynamicOldStyle[p][v]=g.style[v]),g.style[v]=y}}}else if("animate"===i){var{id:b,options:E}=e,w=t[b]||t.dynamicElems[b]||null;w&&w.animate(E)}else if("setAttrs"===i){var{id:T,attrs:C}=e,S=t[T]||t.dynamicElems[T]||null;if(S)for(var I of Object.keys(C))S[I]=C[I]}})),bK=wW.screenWidth),CK.call(this,ZL.REWARDEDVIDEOHANDLEDYNAMICDONE)},wK=function(){var e=wZ(this);e.dynamicEmitter=new C$,e.dynamicEmitter.on("adCustomEvent",(t=>{var{action:i,adCustomId:r,value:n}=t;if(r===bW)if(i===KL.LANDAD){var a,o=null===(a=t.value)||void 0===a?void 0:a.event;if(!o)return void WK.call(this);if(!YZ.call(this,o))return;iK.call(this,o,"",pW.REWARD_DYNAMIC_CONTENT)}else if(i===KL.BTNTAP){var s,l=null===(s=t.value)||void 0===s?void 0:s.event;if(!YZ.call(this,l))return;iK.call(this,l,"button",pW.REWARD_DYNAMIC_BUTTON)}else if(i===KL.REPORTADMONITORDATA){var{id:u,key:c,extInfo:d}=n,h=u?{idKeyGroup:u,idKey:c}:c;e.adProxy.reportAdMonitorData(h,d)}else if(i===KL.REWARDEDVIDEODYNAMIC){var{list:p}=n;SW(),EK.call(this,p)}}))},TK=function(e,t){var i=wZ(this);if(null!=i&&i.dynamicElems){var r=[];for(var n of Object.keys(i.dynamicElems))r.push(i.dynamicElems[n].ready());Promise.all(r).then((()=>{i.dynamicEmitter&&i.dynamicEmitter.emit("adCustomEvent",{adCustomId:bW,action:e,value:t})}))}},CK=function(e,t){var i=wZ(this);if(i.dynamicElems)for(var r of Object.keys(i.dynamicElems)){var n,a=null===(n=i.dynamicElems[r])||void 0===n?void 0:n.referComponent;a&&a.emitComponentEvent(e,t)}},SK=function(){var e=wZ(this);IK.call(this);var t=lX.call(this);e.keepAliveTimer=setTimeout((()=>{e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:t.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},IK=function(){var e=wZ(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},xK=function(e,t=0){var i;if(QK.call(this))return Promise.reject({errMsg:WZ});var r=wZ(this),{width:n,height:a}=2===r.pageType?r.pageCard.layoutBox:r.card.layoutBox;[0,2,3].includes(t)&&(r.clickCount+=1);var o={slotid:EZ,costtype:null!==(i=r.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(n)||0,ad_height:Number(a)||0,press_interval:e.pressInterval,block_click:t};return r.adProxy.reportTouchClick(o)},PK=function(e,t){if(QK.call(this))return Promise.reject({errMsg:WZ});var i=wZ(this),r=lX.call(this),n=Promise.resolve(),a={currentTime:i.currentTime,duration:r.duration},o=i.card,{absoluteX:s,absoluteY:l}=e;2===i.pageType?(o=i.pageCardContainer,s=Math.round(e.x),l=Math.round(e.y)):o=[pW.REWARD_CARD_BUTTON,pW.REWARD_CARD].indexOf(t)>-1?i.card:i.container;var{left:u,top:c}=o.getAbsolutePosition(),{width:d,height:h}=o.layoutBox;return n=i.adProxy.reportClick({clickAbsoluteLeft:s,clickAbsoluteTop:l,clickRelativeLeft:s-u,clickRelativeTop:l-c,pressInterval:e.pressInterval,left:u,top:c,width:d,height:h,videoData:a,weappExtraData:K()({},i.adWelfareData||{})}),iX.call(this,t),OK.call(this,{stage:1002}),n},DK=function({playType:e,conditionType:t}){if(QK.call(this))return Promise.reject({errMsg:WZ});var i=wZ(this),r=lX.call(this);return i.adProxy.reportVideo({playType:e,conditionType:t,playDuration:i.currentTime,videoDuration:r.duration,muted:i.video.muted,rewardedTime:i.data.rewardedTime,isRewarded:i.isRewarded})},RK=function({button:e},t={}){var i;if(QK.call(this))return Promise.reject({errMsg:WZ});var r=wZ(this),n=lX.call(this),a=5===e?+new Date:0,o=t?t.pressInterval:0;return r.adProxy.reportBehaviorButton({button:e,isEnded:r.isEnded,playDuration:r.currentTime,videoDuration:null!==(i=null==n?void 0:n.duration)&&void 0!==i?i:0,preloadVideo:r.preloadVideo?1:0,preloadVideoSuccess:r.preloadVideoSuccess?1:0,videoFirstPlay:r.videoFirstPlayTime,cardFirstShow:r.cardFirstShowTime,clickCard:a,pressInterval:o,currentPlayUrl:r.video.src,lastFetchUrl:n?n.src:""})},OK=function({stage:e}){if(QK.call(this))return Promise.reject({errMsg:WZ});var t={adtype:2,stage:e};return wZ(this).adProxy.reportADFunnelModel(t)},kK=e=>{Ll(e?Tl:Cl)},MK=function(e){if(!QK.call(this)){var t=wZ(this);t.darkMode=e;var i=e?mZ:_Z;for(var r of Object.keys(i))t[r]&&Object.assign(t[r].style,i[r])}},NK=function(e=0){var t;if(!QK.call(this)){var i=wZ(this);i.adProxy.reportTimePoints({slotid:EZ,costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,extInfo:{preloadVideoSuccess:i.preloadVideoSuccess?1:0}});var r,n=i.isRewarded;i.sound.style.hidden=!1,i.splitLine.style.hidden=!1,i.video.autoPauseIfNavigate=!0,i.video.autoPauseIfOpenNative=!0,i.isPlayBackgroundSupported=!1,i.videoMutedStatus=!1,i.landingCount=0,i.clickCount=0,i.isPlaying=!1,i.isVideoCalledPlay=!1,i.isFirstPlaySuccess=!1,i.isShowed=!1,i.isRewarded=!1,i.isEnded=!1,i.isData=!1,i.disableGaussBlur=!1;try{var a;if(i.dynamicElems)for(var o of Object.keys(i.dynamicElems)){var s=i.dynamicElems[o];null!=s&&s.remove&&s.remove(),s.referComponent&&LF(s.referComponent)}if(i.dynamicOldStyle)for(var l of Object.keys(i.dynamicOldStyle)){var u,c=i[l]||(null===(u=i.dynamicElems)||void 0===u?void 0:u[l])||null,d=i.dynamicOldStyle[l];for(var h of Object.keys(d))c.style[h]=d[h]}i.dynamicElems=null,i.dynamicOldStyle=null,null!==(a=i.dynamicEmitter)&&void 0!==a&&a.off&&i.dynamicEmitter.off("adCustomEvent"),i.dynamicEmitter=null}catch(e){}if(i.isCancelPlayablePage=!1,i.isLandingPlayblePage=!1,i.playableTipsContent.value="视频结束后可试玩",i.playableGiveUp.value="放弃",i.playableGiveUp.style.color="#07C160",i.playableGiveUp.style.opacity=1,i.playableTipsWrap.style.width=132,i.playableTipsWrap.style.left=0,i.playableTipsWrap.style.hidden=!0,i.cardContainer.style.hidden=!0,i.playableTipsContent.style.width=120,i.playableGiveUp.style.hidden=!0,i.playableCancelBox.style.hidden=!0,i.cardContainer.style.opacity=1,i.rewardPageCostTime=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.adProxy.isViewable=!0,wW.isWaGame||(i.isFullscreen=!1),i.downloadProgress.style.width=0,i.pageDownloadProgress.style.width=0,MK.call(this,!0),2!==e)wW.isWaGame||!wW.isIOS&&!EW("landpage",null===(r=i.data)||void 0===r?void 0:r.crt_size)?(i.emitter.emit("close",{isEnded:n}),kK(n)):Js(100).then((()=>{i.emitter.emit("close",{isEnded:n}),kK(n)}));i.adProxy.reset();var p=vK.call(this);p.catch((()=>{})),i.adFetchResult=p,i.container.style.hidden=!0,i.adCover.hide(),n?OK.call(this,{stage:1005}):OK.call(this,{stage:1006}),1===i.pageType?i.pageContainer.style.hidden=!0:2===i.pageType?(i.pageHandler.style.hidden=!0,i.pageCardBody.style.hidden=!0,i.pageMask.style.hidden=!0,i.pageCardTip.style.hidden=!0,i.video.style.padding=8,i.video.style.paddingBottom=16):i.pageType||(i.defaultPageContainer.style.hidden=!0),i.pageHandler.style.hidden=!0,_K.call(this,{isClose:!0}),wW.isAndroid&&i.adProxy.setInnerAudioOption(!0).catch((()=>{})),i.showTipsTimer&&clearTimeout(i.showTipsTimer),i.exposureTimer&&clearTimeout(i.exposureTimer),i.updateScreenInfoTimer&&clearTimeout(i.updateScreenInfoTimer),i.layoutTimer&&clearTimeout(i.layoutTimer),i.rewardPageTimer&&clearTimeout(i.rewardPageTimer),i.reportDurationTimer&&clearTimeout(i.reportDurationTimer),i.pageType=0,i.imgBaseName="",uZ("show",i.adType,0),uZ("close",i.adType,+new Date)}},LK=function(e=0){if(QK.call(this))return Promise.reject({errMsg:WZ});var t=wZ(this);return JK.call(this)||eX.call(this)?BK.call(this,e):(DK.call(this,{playType:t.isEnded?"complete":"partial",conditionType:"close"}),1===e?(NK.call(this),Promise.resolve()):[2,3].includes(e)?Promise.all([HZ.call(this),NK.call(this,e)]):t.container.animate({top:wW.screenHeight,duration:500}).then((()=>HZ.call(this))).then((()=>NK.call(this))))},BK=function(e){if(QK.call(this))return Promise.reject({errMsg:WZ});var t=wZ(this);return eX.call(this)||(t.container.style.top=wW.screenHeight,t.topBar.style.hidden=!0,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(NK.call(this),Promise.resolve()):Promise.all([HZ.call(this),NK.call(this,e)])},FK=function(){if(!QK.call(this)){var e=wZ(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,LK.call(this),RK.call(this,{button:4});else{e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续浏览页面",e.adProxy.setRightButtonHide(!0).catch((()=>{}))}}},UK=function(){if(!QK.call(this)){var e=wZ(this);if(IK.call(this),e.isRewarded)LK.call(this),RK.call(this,{button:4});else{e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续观看视频",uX.call(this,"pause"),e.isPause=!0}}},WK=function(e={}){if(!QK.call(this)){var t,i=wZ(this),r=lX.call(this);if(i.notReportExit=!0,i.landingCount+=1,i.landingCount>1)i.adProxy.reportRepeatClick({slotId:EZ,costType:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,clkCnt:i.landingCount,lastClkPeriod:+new Date-i.lastLandingTime,retCode:i.lastJsapiStatus,costTime:i.lastJsapiCostTime,pageStayTime:i.landingPageCostTime,jsapiName:i.lastJsapiName});i.lastLandingTime=+new Date,i.lastJsapiStatus=2,i.lastJsapiCostTime=0,i.isLandingPage=!1,i.landingPageCostTime=0;var n=23===i.data.product_type&&e&&e.isButton&&!i.adProxy.data.biz_info.is_subscribed;e.isAddContact=n;var a=i.adProxy.land(e);if(23===i.data.product_type&&e&&e.isButton&&!i.adProxy.data.biz_info.is_subscribed?(a.then((e=>{var t=/ok/.test(e.errMsg);t&&(0===i.buttonTextType&&(i.button.value="查看公众号",UZ.call(this),TK.call(this,KL.CHANGEADBTNTEXT,{text:"查看公众号"})),i.data.flooringPage&&1===i.pageType&&0===i.buttonTextType?i.pageButton.value="查看公众号":i.data.flooringPage&&2===i.pageType&&0===i.buttonTextType?i.pageCardButton.value="查看公众号":i.pageType||(i.defaultPageButton.value="查看公众号"),i.expandCardButton.value="查看公众号",i.adProxy.data.biz_info&&(i.adProxy.data.biz_info.is_subscribed=1),i.adProxy.reportAdIDKey({key:vB.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(i.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r,n=+new Date;(i.lastJsapiStatus=0,i.lastJsapiCostTime=n-i.lastLandingTime,"private_addContact"===i.lastJsapiName)&&i.adProxy.reportLandingTime({slotId:EZ,costType:null!==(r=i.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:i.lastLandingTime,closeTime:n,stayTime:i.lastJsapiCostTime,jsapiName:i.lastJsapiName,clickTime:i.lastLandingTime,clkCnt:i.landingCount,retCode:i.lastJsapiStatus,costTime:i.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"});wW.isWaGame||!wW.isAndroid||eX.call(this)||setTimeout((()=>{i.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),i.container.forceUpdate()}),250)})).catch((()=>{i.lastJsapiStatus=1})),GK.call(this,a)):(i.flooringPageCloseTime=(new Date).getTime(),a.then((e=>{e.errMsg&&(i.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===i.lastJsapiName||"navigateToMiniProgram"===i.lastJsapiName||"openADCanvas"===i.lastJsapiName||"launchApplication"===i.lastJsapiName?(i.isLandingPage=!0,i.isPlayBackgroundSupported&&(i.videoMutedStatus=i.video.muted,i.video.muted=!0),IK.call(this),i.flooringPageIsShow&&(mK.call(this,{type:3,staytime:i.flooringPageCloseTime-i.flooringPageShowTime,componentsstartstr:JSON.stringify(i.flooringPageState)}),i.flooringPageShowTime=0,i.flooringPageCloseTime=0,hK.call(this))):i.lastJsapiStatus=0,i.lastJsapiCostTime=+new Date-i.lastLandingTime})).catch((()=>{i.lastJsapiStatus=1}))),JK.call(this)||eX.call(this)){setTimeout((()=>{i.notReportExit=!1}),1e3);i.adProxy.reportVideo({playType:i.isPlaying?"partial":"complete",conditionType:"land",playDuration:i.currentTime,videoDuration:r.duration,muted:i.video.muted})}return a}},GK=function(e){if(!QK.call(this)){var t=wZ(this),i=e.then((e=>/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve())).catch((()=>t.adProxy.reportFollow({result:"fail"})));return i}},VK=function(){if(!QK.call(this)){var e=wZ(this),{appInfo:{apkName:t,versionCode:i,urlScheme:r}}=e.data;e.adProxy.getInstallState(t).then((t=>{if(t.isInstalled&&(void 0===t.versionCode||t.versionCode>=i)){if(e.adProxy.setAppInstallState(!0),e.androidAppState=4,e.button&&r&&r.trim().length>0){if(e.button.value="进入应用",e.pageCardButton.value="进入应用",e.pageButton.value="进入应用",e.defaultPageButton.value="进入应用",e.expandCardButton.value="进入应用",TK.call(this,KL.CHANGEADBTNTEXT,{text:"进入应用"}),1===e.buttonTextType){var n=e.data.button_action.button_text;e.button.value=n,e.pageCardButton.value=n,e.pageButton.value=n,e.defaultPageButton.value=n,e.expandCardButton.value=n,TK.call(this,KL.CHANGEADBTNTEXT,{text:n})}UZ.call(this)}if(e.adProxy.isValidCondition("widget_gray_video_download_v2")&&e.downloadButtonText&&r&&r.trim().length>0){if(e.downloadButtonText.value="进入应用",e.downloadProgressText.value="进入应用",1===e.buttonTextType){var a=e.data.button_action.button_text;e.downloadButtonText.value=a,e.downloadProgressText.value=a}if(1===e.pageType&&(e.pageDownloadButtonText.value="进入应用",e.pageDownloadProgressText.value="进入应用",1===e.buttonTextType)){var o=e.data.button_action.button_text;e.pageDownloadButtonText.value=o,e.pageDownloadProgressText.value=o}UZ.call(this)}}else e.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===e.androidAppState&&(e.downloadButtonText.value=e.data.button_action.button_text,e.downloadProgressText.value=e.data.button_action.button_text,UZ.call(this),1===e.pageType&&(e.pageDownloadButtonText.value=e.data.button_action.button_text,e.pageDownloadProgressText.value=e.data.button_action.button_text),e.androidAppState=0)})).catch((()=>{}))}},jK=function(e={}){if(!QK.call(this)){var t=wZ(this);PK.call(this,e,pW.REWARD_DOWNLOAD);var i,{appInfo:{appName:r,apkName:n,apkUrl:a,appMd5:o,urlScheme:s}}=t.data,{aid:l,traceid:u,apurl:c}=t.adProxy.data,d=0,h="";if(t.landingCount+=1,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4===t.androidAppState)t.adProxy.launchApplication(s).catch((()=>{WK.call(this,{isButton:!0})})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0===t.androidAppState){var p=[l,u,n.replace(/./g,"_"),0,20,c.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(r,a,o,p).then((e=>{t.androidDownloadId=e.downloadId,setTimeout(HK.bind(this),IZ)})).catch((()=>{WK.call(this,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",d=4,h="下载"}else 1===t.androidAppState?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((()=>{})),t.downloadButtonText.value="继续下载",t.downloadProgressText.value="继续下载",1===t.pageType&&(t.pageDownloadButtonText.value="继续下载",t.pageDownloadProgressText.value="继续下载"),UZ.call(this),t.androidAppState=2,t.lastJsapiName="pauseDownloadTask",d=5,h="暂停"):2===t.androidAppState?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((()=>{setTimeout(HK.bind(this),IZ)})).catch((()=>{})),t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载"),UZ.call(this),t.androidAppState=1,t.lastJsapiName="resumeDownloadTask",d=6,h="继续"):3===t.androidAppState&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((()=>{})),t.lastJsapiName="installDownloadTask",d=7,h="安装");if(d>0)t.adProxy.reportLandingTime({slotId:EZ,costType:null!==(i=t.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:d,actTypeStr:h})}},HK=function(e=3){if(!QK.call(this)){var t=wZ(this);t.adProxy.queryDownloadTask(t.androidDownloadId).then((e=>{if("download_succ"===e.state)t.downloadButtonText.value="安装应用",t.downloadProgressText.value="安装应用",t.downloadProgress.style.width=t.downloadButton.style.width,1===t.pageType&&(t.pageDownloadButtonText.value="安装应用",t.pageDownloadProgressText.value="安装应用",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width),t.androidAppState=3,UZ.call(this);else if("downloading"===e.state)t.downloadButtonText.value="暂停下载",t.downloadProgressText.value="暂停下载",t.downloadProgress.style.width=t.downloadButton.style.width*parseInt(e.progress,10)/100,1===t.pageType&&(t.pageDownloadButtonText.value="暂停下载",t.pageDownloadProgressText.value="暂停下载",t.pageDownloadProgress.style.width=t.pageDownloadButton.style.width*parseInt(e.progress,10)/100),t.androidAppState=1,UZ.call(this);else if("download_fail"===e.state){if(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,t.downloadProgress.style.width=0,1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text,t.pageDownloadProgress.style.width=0,1===t.buttonTextType)){var i=t.data.button_action.button_text;t.pageDownloadButtonText.value=i}t.androidAppState=0,UZ.call(this)}"downloading"!==e.state&&"default"!==e.state||setTimeout(HK.bind(this),IZ)})).catch((()=>{e>0&&HK.call(this,e-1)}))}},zK=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){if(!QK.call(this)){var a=wZ(this);e&&!i&&(a.clickFirstGradeTime=+new Date),a.adProxy.reportAdFeedbackData({adWidth:wW.screenWidth,adHeight:wW.screenHeight,adPosX:0,adPosY:0,expTime:a.startExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?a.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?+new Date:0,feedbackReason:n})}},YK=function(e){var t=wZ(this),i={adWidth:wW.screenWidth,adHeight:wW.screenHeight,adPosX:0,adPosY:0},r={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e))for(var{type:n,expTime:a,isClickAd:o,clickAdTimeMs:s,feedbackTimeMs:l}of e)if("good"!==n){var u=r[n]||{};t.adProxy.reportAdFeedbackData(K()(K()(K()({},i),u),{},{expTime:a||0,isClickAd:o,clickAdTimeMs:s||0,secondGradeTime:l||0}))}},$K=function(){var e=wZ(this),t=wW.isWaGame?"count":`count_${e.adProxy.getWebviewInfo().currentWebviewId}`,i=cZ(t,e.adType)||0;uZ(t,e.adType,i>0?i-1:0),C_(e.onShow),Jm(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Xv.remove(e.container),aA(this)},qK=function(){if(!QK.call(this)){var e=wZ(this),t=Promise.resolve();e.isShowed&&(t=HZ.call(this).then((()=>{e.adCover.hide(),wW.isAndroid&&e.adProxy.setInnerAudioOption(!0).catch((()=>{})),uZ("show",e.adType,0),uZ("close",e.adType,+new Date)}))),t.then((()=>{$K.call(this)})).catch((()=>{$K.call(this)})),this._destroyed=!0}},QK=function(){return this._destroyed},ZK=function(e){var t=wZ(this);t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:wW.screenWidth,height:wW.screenHeight,weappExtraData:K()({},t.adWelfareData||{})});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0)},KK=function(){var e=wZ(this);return eX.call(this)||(e.container.style.hidden=!1,e.container.style.top=0,e.adCover.show()),e.container.nextLayout().then((()=>QK.call(this)?Promise.reject({errMsg:WZ}):(jZ.call(this).then((()=>{wW.isWaGame||(e.isFullscreen=!0)})).catch((t=>{e.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,t)})),WK.call(this)))).then((t=>{if(eX.call(this)){t?e.adProxy.reportAdMonitorData(vB.REWARD_CHANNELS_CALLBACK_SUCCESS,t):e.adProxy.reportAdMonitorData(vB.REWARD_CHANNELS_CALLBACK_FAILED);var{rewardedDuration:i,feedbackInfo:r}=t||{},n=null!=i&&i>=15;e.isEnded=n,e.isRewarded=n,LK.call(this),RK.call(this,{button:n?4:1}),YK.call(this,r)}})).catch((t=>{throw uZ("show",e.adType,0),t}))},XK=function(){var e,t=wZ(this);return EW("video",null===(e=t.data)||void 0===e?void 0:e.crt_size)},JK=function(){var e,t,i=wZ(this);return EW("landpage",null===(e=i.data)||void 0===e?void 0:e.crt_size)&&(null===(t=i.data)||void 0===t?void 0:t.dest_type)!==xB.DEST_TYPE_CHANNELS},eX=function(){var e,t,i=wZ(this);return EW("landpage",null===(e=i.data)||void 0===e?void 0:e.crt_size)&&(null===(t=i.data)||void 0===t?void 0:t.dest_type)===xB.DEST_TYPE_CHANNELS},tX=function(){var e=wZ(this),{product_type:t}=e.data;return[ZB.OPEN_PLATFORM_APP_MOB,ZB.APPLE_APP_STORE,ZB.WECHAT,ZB.MINI_GAME].includes(t)||!e.expandCardUseLogoStrategy},iX=function(e){var t=wZ(this),{adProxy:i}=t;i.reportMMClickPos({clickPos:e})},rX=function(){var e=wZ(this);if(oX.call(this)){e.disableGaussBlur=!0;var{poster:t,src:i}=lX.call(this);e.video.poster!==t&&(e.video.poster=t),e.video.src!==i&&(e.video.src=i,setTimeout((()=>{e.isVideoCalledPlay&&uX.call(this,"play")}),0)),e.video.style.width=wW.screenWidth,e.video.style.height=wW.screenHeight,nX.call(this)}},nX=function(){var e=wZ(this);"portrait"===wW.deviceOrientation?e.video.style.bottom=217*wW.screenWidth/160-wW.screenHeight/2:e.video.style.left=43*-wW.screenHeight/96},aX=function(){var e=wZ(this),{deviceOrientation:t,screenWidth:i,screenHeight:r}=wW,n="portrait"===t,a=n?r:i,o=n?i:r;e.defaultPageBackgroundImage.style.width=a,e.defaultPageBackgroundImage.style.height=a;var s=(a-o)/-2;n?(e.defaultPageBackgroundImage.style.left=s,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=s)},oX=function(){var e=wZ(this);return!(!e.data||e.disableGaussBlur)&&WG(e.data)},sX=function(){var e=wZ(this);return!!e.data&&GG(e.data)},lX=function(){var e,t,i=wZ(this);return oX.call(this)&&null!==(e=i.data)&&void 0!==e&&e.gaussVideo?i.data.gaussVideo:(null==i||null===(t=i.data)||void 0===t?void 0:t.shortVideo)||null},uX=function(e){var t=wZ(this),{video:i}=t;i&&("play"===e?(t.isVideoCalledPlay=!0,i.play()):"pause"===e?(t.isVideoCalledPlay=!1,i.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,i.stop()))},cX=function(){var e=wZ(this),{deviceOrientation:t,screenWidth:i,screenHeight:r}=wW,{width:n,height:a}=lX.call(this);if(e.video.style.width=i,e.video.style.height=r,e.video.style.left=0,e.video.style.bottom=0,oX.call(this)){if("portrait"===t&&n<a)e.video.style.height=Math.floor(i/n*a),e.video.style.width=i;else if("landscape"===t&&n>a){var o=Math.floor(r*n/a);e.video.style.width=o,e.video.style.height=r,e.video.style.left=(i-o)/2}}else sX.call(this)&&nX.call(this)};class dX extends oA{constructor({adUnitId:e,multiton:t=!1,pluginId:i="",requestType:r=null}){super(),this._destroyed=void 0;var n=wZ(this);n.emitter=new C$,n.androidAppState=0,n.androidDownloadId=0,n.adUnitId=e,n.adType="incentive-video",n.adProxy=new HY({adUnitId:e,adType:"incentive-video",pluginAppid:i}),n.adCover=new Fq({adUnitId:e,adType:"incentive-video"}),n.adRequestType=r,n.adWelfareData={},n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isCardExposureReported=!1,n.dynamicElems=null,n.dynamicOldStyle=null,n.dynamicEmitter=null,n.expandCardUseLogoStrategy=!1,n.rewardPageCostTime=0,n.rewardPageTimer=null,n.showDialogContainer=!1,n.isData=!1,n.isFirstPlay=!1,n.isFirstPlaySuccess=!1,n.isPlaying=!1,n.isVideoCalledPlay=!1,n.isRewarded=!1,n.isEnded=!1,n.isPause=!1,n.currentTime=0,n.cardShowTime=0,n.videoFirstPlayTime=0,n.preloadVideo=!1,n.preloadVideoSuccess=!1,n.cardFirstShowTime=0,n.clickCount=0,n.landingCount=0,n.lastLandingTime=0,n.lastJsapiName="",n.lastJsapiStatus=0,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0,n.hideTime=0,n.showTime=0,n.startExposureTime=0,n.clickFirstGradeTime=0,n.flooringPageIsShow=!1,n.flooringPageShowTime=0,n.flooringPageCloseTime=0,n.flooringPageState={},n.flooringPageAutoShow=!1,n.showTipsTimer=null,n.exposureTimer=null,n.isCancelPlayablePage=!1,n.isLandingPlayblePage=!1,n.buttonTextType=0,n.isPress=!1,n.startPosX=0,n.startPosY=0,n.lastPosX=0,n.lastPosY=0,n.lastSecondPosX=0,n.lastSecondPosY=0,n.direction="",n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[],n.startTime=0,n.lastStartTime=0,n.lastMoveTime=0,n.flooringPageInfos={},n.weappTouchEventHandler=null,n.updateScreenInfoTimer=null,n.layoutTimer=null,n.closeEventCount=0,n.reportDurationTimer=null,n.disableGaussBlur=!1,this._destroyed=!1,zY.call(this,(()=>{if(!bZ){var{root:e}=Lg()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad" player-hint="supportSoftDecode,mp4Only" auto-pause-if-navigate="true" auto-pause-if-open-native="true">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="pendant-container"></view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="https://wxa.wxs.qq.com/images/wxapp/dropdown-arrow-white.png" bubble-event="true"></image>\n          <image id="rectangle-light" src="https://wxa.wxs.qq.com/images/wxapp/dropdown-arrow-black.png" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n');bZ=e}return bZ})(),gZ),MK.call(this,!0);var{deviceOrientation:a,screenWidth:o,screenHeight:s}=wW;n.container.style.width=o,n.container.style.height=s,n.container.style.top=s,n.container.style.hidden=!0,n.topBar.style.width=o,n.sound.src=CZ,n.appIcon.src=SZ,pK.call(this),wW.isIOS&&(n.video.obeyMuteSwitch=!0),Xv.add(n.container),PZ&&(n.topBar.style.top=n.topBar.style.top+30,n.adFeedbackList.style.top=n.adFeedbackList.style.top+30,n.adFeedbackMenu.style.top=n.adFeedbackMenu.style.top+30);VZ.call(this,["dialogContainer","dialogMask"]),n.dialog.style.top=s>138?(s-138)/2:0,n.dialog.style.left=o>300?(o-300)/2:0,wW.isWaGame||(n.container.fullscreen=!0,n.isFullscreen=!1);var l=vK.call(this);l.catch((()=>{})),n.adFetchResult=l,n.isSwitched=!1,wW.isWaGame||hZ((()=>{if(!QK.call(this)){var{openType:e,createWebviewId:t,lastWebviewId:i}=n.adProxy.getWebviewInfo();if(["navigateTo","switchTab"].includes(e)&&t===i&&(n.isSwitched=!0),["navigateBack","navigateTo"].includes(e)&&t===i&&n.isShowed&&n.isData){var r=n.isFullscreen?3:1;RK.call(this,{button:6}),LK.call(this,r)}}})),n.close.on("click",(e=>{YZ.call(this,e,!1)&&UK.call(this)})),n.dialogClose.on("click",(e=>{YZ.call(this,e,!1)&&(n.dialogContainer.style.hidden=!0,LK.call(this),RK.call(this,{button:1}))})),n.dialogCancel.on("click",(e=>{YZ.call(this,e,!1)&&(n.dialogContainer.style.hidden=!0,JK.call(this)?(n.showDialogContainer=!1,WK.call(this)):(uX.call(this,"play"),SK.call(this)),RK.call(this,{button:2}))})),n.sound.on("click",(e=>{YZ.call(this,e,!1)&&(n.video.muted=!n.video.muted,n.sound.src=n.video.muted?CZ:TZ)})),n.adFeedback.on("click",(e=>{YZ.call(this,e,!1)&&(n.adFeedbackList.style.hidden=!n.adFeedbackMenu.style.hidden||!n.adFeedbackList.style.hidden,n.adFeedbackList.style.hidden||zK.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),n.adFeedbackBtn.on("click",(e=>{YZ.call(this,e,!1)&&(n.adProxy.openFeedbackUrl(wW.isWaGame?1003:1005),n.adFeedbackList.style.hidden=!0,zK.call(this,{secondGradeId:1,secondGradeDesc:"投诉"}))})),n.adDislikeBtn.on("click",(e=>{YZ.call(this,e,!1)&&(zK.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"}),n.adFeedbackList.style.hidden=!0,n.adFeedbackMenu.style.hidden=!1)})),n.adQualityBtn.on("click",(e=>{YZ.call(this,e,!1)&&(n.adFeedbackMenu.style.hidden=!0,zK.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),n.dialogCloseTip.style.hidden=!1,Js(xZ).then((()=>{n.dialogCloseTip.style.hidden=!0})))})),n.adDuplicateBtn.on("click",(e=>{YZ.call(this,e,!1)&&(n.adFeedbackMenu.style.hidden=!0,zK.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),n.dialogCloseTip.style.hidden=!1,Js(xZ).then((()=>{n.dialogCloseTip.style.hidden=!0})))})),n.adDismatchBtn.on("click",(e=>{YZ.call(this,e,!1)&&(n.adFeedbackMenu.style.hidden=!0,zK.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),n.dialogCloseTip.style.hidden=!1,Js(xZ).then((()=>{n.dialogCloseTip.style.hidden=!0})))})),n.video.onTimeUpdate((e=>{var t=Number(e.duration),i=Number(e.position);try{if(QK.call(this)||!n.isShowed)return;if(SK.call(this),n.isFirstPlay){var r=0;n.showTime>n.videoFirstPlayTime&&(r=n.showTime-n.videoFirstPlayTime),n.adProxy.setTimePoint("p21",{time:Date.now()-1e3*i}),n.adProxy.reportVideoLoadTime({beginTime:n.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*i),departureTime:r,preloadVideo:n.preloadVideo?1:0,preloadVideoSuccess:n.preloadVideoSuccess?1:0,reportType:1}),n.isFirstPlay=!1,OK.call(this,{stage:1004})}if(n.isPlaying=!0,i>0&&(n.currentTime=1e3*i),i>=1&&!n.isViewableExposureReported){var{width:o,height:s}=n.video.style;n.isViewableExposureReported=!0,n.adProxy.isViewable=!0;n.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:o,height:s,weappExtraData:K()({},n.adWelfareData||{})})}Math.ceil(t-i)<=6&&[3,4].indexOf(n.pageType)>-1&&n.playableGiveUp.style.hidden&&GZ.call(this);var{rewardedTime:l}=n.data,{duration:u}=lX.call(this),c=t>l/1e3?l/1e3:t||u/1e3,d=Math.ceil((u>l?l:u)/1e3);if(0===t&&(n.reportDurationTimer&&clearTimeout(n.reportDurationTimer),n.reportDurationTimer=setTimeout((()=>{n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_DURATION_ZERO,{duration:t,durationFromAd:u,rewardedTime:l})}),1e3)),c>i){var h=Math.ceil(c-i);h>d&&(h=d),n.countDown.value=h.toString(),n.countDownAppend.value="秒后可获得奖励",n.countDown.style.width=2===h.toString().length?19:12,n.countDownAppend.style.width=100}else n.countDown.style.hidden=!0,n.sound.style.hidden=!0,n.splitLine.style.hidden=!0,n.countDownAppend.value="已获得奖励",n.countDownAppend.style.width=72,n.isRewarded=!0;if((1e3*i>=n.cardShowTime||1e3*i>0)&&n.card.style.hidden){if(n.data.flooringPage&&2===n.pageType&&"portrait"===a?n.pageCardBody.style.hidden=!1:(n.playableTipsWrap.style.hidden=!(n.data.flooringPage&&[3,4].indexOf(n.pageType)>-1),n.card.style.hidden=!1),n.isCardExposureReported)return;n.card.nextLayout((()=>{var{left:e,top:t}=n.card.getAbsolutePosition(),{width:i,height:r}=n.card.layoutBox;n.isCardExposureReported=!0;n.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:e,top:t,width:i,height:r,weappExtraData:K()({},n.adWelfareData||{})});n.cardFirstShowTime=(new Date).getTime(),n.data.flooringPage&&2===n.pageType&&(n.showTipsTimer=setTimeout((()=>{JZ.call(this)}),3e3))}))}CK.call(this,ZL.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_RENDER_ERROR,e)}})),n.video.onEnded((()=>{var e,t;if(!QK.call(this)&&n.isShowed){n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_END),IK.call(this),n.countDown.style.hidden=!0,n.sound.style.hidden=!0,n.splitLine.style.hidden=!0,n.countDownAppend.value="已获得奖励",n.countDownAppend.style.width=72,n.isRewarded=!0,n.isPlaying=!1,n.isVideoCalledPlay=!1,n.isEnded=!0,n.isPause=!1;var{duration:i}=lX.call(this);n.currentTime=i;var r=null===(e=n.data)||void 0===e||null===(t=e.card)||void 0===t?void 0:t.headBgImg;n.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:n.currentTime,videoDuration:i,muted:n.video.muted});if(n.data.flooringPage&&1===n.pageType&&"portrait"===a)n.pageContainer.style.width=o,n.pageContainer.style.height=s,n.pageContainer.style.left=o,n.pageContainer.style.hidden=!1,n.pageHandler.style.hidden=!1,n.card.style.hidden=!0,n.pageHandler.style.zIndex=1000003,n.topBar.style.zIndex=1000004,n.pageImgTips.style.zIndex=1000004,n.pageContainer.nextLayout((()=>{dK.call(this)}));else if(n.data.flooringPage&&2===n.pageType&&"portrait"===a)dK.call(this);else if(n.data.flooringPage&&[3,4].indexOf(n.pageType)>-1&&!n.isCancelPlayablePage){var l=n.data.flooringPage.page_url||"";if(!l&&n.data.crtInfo)try{var{wxgame_video_card:{flooring_page:u}}=n.data.crtInfo;l=u.page_url||""}catch(e){}n.adProxy.handleRewardedVideoPlayableLand(l,n.pageType).then((()=>{n.isLandingPlayblePage=!0}))}else!n.pageType&&r&&(n.defaultPageContainer.style.hidden=!1,n.defaultPageContainer.style.opacity=0,n.defaultPageContainer.nextLayout((()=>{dK.call(this)})))}})),n.video.onError((e=>{n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_LOAD_ERROR,e),IK.call(this),oX.call(this)&&rX.call(this)})),n.playableCancelBox.on("click",(e=>{var t;if(YZ.call(this,e)&&!n.isCancelPlayablePage){n.isCancelPlayablePage=!0,n.playableGiveUp.value="已放弃",n.playableGiveUp.style.color="#ffffff",n.playableGiveUp.style.opacity=.6;var i=xL({text:"已放弃",fontSize:12})||36;n.playableGiveUp.style.width=i,n.playableTipsWrap.style.width=n.playableTipsContent.style.width+i+32,n.adProxy.reportCancelRewardPlayablePage({costtype:null!==(t=n.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,slotid:EZ,is_reward:1,is_cancel:1})}})),n.pageButton.on("click",(e=>{YZ.call(this,e)&&iK.call(this,e,"button",pW.REWARD_OLD_ENDPAGE_BUTTON)}));var u=e=>t=>{if(YZ.call(this,t)){var i=tX.call(this);if(!(i&&"wrapper"===e||!i&&["logo","wording"].includes(e))){var r=[[pW.REWARD_ENDPAGE_HEAD_IMG,i&&"logo"===e],[pW.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,i&&["wording","wrapper"].includes(e)],[pW.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!i&&["wording","wrapper"].includes(e)],[pW.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,i&&"button"===e],[pW.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!i&&"button"===e]].find((([,e])=>e))[0];iK.call(this,t,"button"===e?"button":"",r)}}},c=e=>t=>{if(YZ.call(this,t)){var i=tX.call(this);if(!(i&&"wrapper"===e||!i&&["logo","wording"].includes(e))){var r=[[pW.REWARD_EXPAND_CARD_HEAD_IMG,i&&"logo"===e],[pW.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,i&&["wording","wrapper"].includes(e)],[pW.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!i&&["wording","wrapper"].includes(e)],[pW.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,i&&"button"===e],[pW.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!i&&"button"===e]].find((([,e])=>e))[0];iK.call(this,t,"button"===e?"button":"",r)}}};if(n.defaultPageButton.on("click",u("button")),n.defaultPageAppIcon.on("click",u("logo")),n.defaultPageAppName.on("click",u("wording")),n.defaultPageAppWording.on("click",u("wording")),n.defaultPageWordingWrapper.on("click",u("wrapper")),n.expandCardButton.on("click",c("button")),n.expandCardAppIcon.on("click",c("logo")),n.expandCardAppName.on("click",c("wording")),n.expandCardAppWording.on("click",c("wording")),n.expandCardWordingWrapper.on("click",c("wrapper")),n.pageDownloadButton.on("click",(e=>{YZ.call(this,e)&&jK.call(this,e)})),n.button.on("click",(e=>{var t;if(YZ.call(this,e)){var{extBackComm:i}=n.data,r=Boolean(23===(null===(t=n.data)||void 0===t?void 0:t.product_type)||i.is_from_snsadinfo);wW.isIOS&&46===n.data.product_type&&6===n.data.dest_type?Promise.race([PK.call(this,e,pW.REWARD_CARD_BUTTON),Js(500)]).then((()=>{RK.call(this,{button:5},e),WK.call(this,{isButton:r})})).catch((()=>{RK.call(this,{button:5},e),WK.call(this,{isButton:r})})):(PK.call(this,e,pW.REWARD_CARD_BUTTON),RK.call(this,{button:5},e),WK.call(this,{isButton:r}))}})),n.downloadButton.on("click",(e=>{YZ.call(this,e)&&jK.call(this,e)})),n.card.on("click",(e=>{YZ.call(this,e)&&(wW.isIOS&&46===n.data.product_type&&6===n.data.dest_type?Promise.race([PK.call(this,e,pW.REWARD_CARD),Js(500)]).then((()=>{RK.call(this,{button:5},e),WK.call(this)})).catch((()=>{RK.call(this,{button:5},e),WK.call(this)})):(PK.call(this,e,pW.REWARD_CARD),RK.call(this,{button:5},e),WK.call(this)))})),n.pageHandler.on("touchstart",(e=>{if(!QK.call(this)){var t=rK.call(this,{event:e,container:"pageHandler"});n.startPosX=t.x,n.startPosY=t.y,n.lastPosX=t.x,n.lastPosY=t.y,n.lastStartTime=(new Date).getTime()}})),n.pageHandler.on("touchmove",(e=>{if(!QK.call(this)){var t=n.pageHandler.getAbsolutePosition(),i=t.left+e[0].x,r=t.top+e[0].y,{xMin:a,xMax:o,yMin:s,yMax:l,xContainer:u,yContainer:c}=n.flooringPageInfos;if(i-n.lastPosX!=0&&u&&qZ.call(this,{x:i,y:r,direction:"left"})){var d=n[u].style.left;(d+=i-n.lastPosX)>=a&&d<=o&&(n[u].style.left=d,n.lastSecondPosX=n.lastPosX,n.lastPosX=i,n.direction="left",n.lastMoveTime=(new Date).getTime())}if(r-n.lastPosY!=0&&c&&qZ.call(this,{x:i,y:r,direction:"top"})){var h=n[c].style.top;(h+=r-n.lastPosY)>=s&&h<=l&&(n[c].style.top=h,n.lastSecondPosY=n.lastPosY,n.lastPosY=r,n.direction="top")}}})),n.pageHandler.on("touchend",(e=>{if(!QK.call(this)){var t=rK.call(this,{event:e,container:"pageHandler"}),{xMin:i,xMax:r,yMin:a,yMax:o,xContainer:s,yContainer:l,infos:u}=n.flooringPageInfos;if(u.event=t,u.event&&(u.event.pressInterval=(new Date).getTime()-n.lastStartTime),u.touchClick&&KZ.call(this,Object.assign({},u,{event:t,max:o,min:a})),"top"===n.direction&&u.yRevise)sK.call(this,Object.assign({},u,{max:o,min:a,direction:"top",imgBox:l}));else if("left"===n.direction&&u.xRevise)sK.call(this,Object.assign({},u,{max:r,min:i,direction:"left",imgBox:s})),gK.call(this);else if("left"===n.direction&&u.xInertia){var c=t.x-n.lastPosX,d=n[s].style.left+5*c;d>=u.xHead&&d<=u.xTail?n[s].style.left=d:XZ.call(this,Object.assign({},u,{xMax:r,xMin:i,imgBox:s})),gK.call(this)}else n.startPosX=0,n.startPosY=0,n.lastPosX=0,n.lastPosY=0,n.lastSecondPosX=0,n.lastSecondPosY=0,n.direction="";n.direction=""}})),n.onShow=()=>{if(!QK.call(this)&&(n.adProxy.setTimePoint("p11"),[3,4].indexOf(n.pageType)>-1&&n.isLandingPlayblePage&&LK.call(this),!eX.call(this))){if(JK.call(this)&&n.isShowed&&!n.showDialogContainer)return n.rewardPageTimer&&clearTimeout(n.rewardPageTimer),n.rewardPageCostTime+=+new Date-n.hideTime-400,FK.call(this),setTimeout((()=>{n.lastJsapiStatus=0,n.isLandingPage=!1}),10),void(wW.isWaGame||!wW.isAndroid||eX.call(this)||(n.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),n.layoutTimer=setTimeout((()=>{n.container.forceUpdate()}),250)));!n.isShowed||n.isEnded||n.isPause||setTimeout((()=>{!n.isShowed||n.isEnded||n.isPause||(uX.call(this,"play"),SK.call(this))}),1e3),n.data&&23===n.data.product_type?n.adProxy.checkFollow(n.data.app.uin).then((e=>{QK.call(this)&&n.adProxy.reportAdMonitorData(vB.CHECK_FLOW_ERROR);var t=n.data.button_action.button_text;0===n.buttonTextType&&(n.button.value=e?"查看公众号":t,UZ.call(this),TK.call(this,KL.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),n.data.flooringPage&&2===n.pageType&&0===n.buttonTextType?n.pageCardButton.value=e?"查看公众号":t:n.data.flooringPage&&1===n.pageType&&0===n.buttonTextType?n.pageButton.value=e?"查看公众号":t:n.pageType||(n.defaultPageButton.value=e?"查看公众号":t),n.expandCardButton.value=e?"查看公众号":t,n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=e?1:0)})):n.data&&12===n.data.product_type&&VK.call(this),n.showTime=+new Date,setTimeout((()=>{var e;(n.flooringPageIsShow&&(n.flooringPageShowTime=+new Date,gK.call(this)),n.isLandingPage)&&(n.lastJsapiStatus=0,n.isLandingPage=!1,n.landingPageCostTime=n.showTime-n.hideTime,n.isPlayBackgroundSupported&&!n.isEnded&&(n.video.muted=n.videoMutedStatus),n.adProxy.reportLandingTime({slotId:EZ,costType:null!==(e=n.adProxy.data)&&void 0!==e&&e.is_cpm?1:2,openTime:n.hideTime,closeTime:n.showTime,stayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.landingCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:1}),wW.isWaGame||!wW.isAndroid||eX.call(this)||(n.adProxy.hideVirtualBottomNavigationBar().catch((()=>{})),n.layoutTimer=setTimeout((()=>{n.container.forceUpdate()}),250)),n.adProxy.setRightButtonHide(!0).catch((()=>{})))}),10)}},T_(n.onShow),n.onHide=()=>{if(!QK.call(this)){var e=lX.call(this);if(n.hideTime=+new Date,JK.call(this)&&n.isShowed){var t=n.adProxy.checkCanvasXmlState();return!t&&!n.isShowedExposureReported&&ZK.call(this,"showed"),!t&&!n.isViewableExposureReported&&ZK.call(this,"viewable")}if(!n.notReportExit&&n.isShowed){IK.call(this);n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"exit",playDuration:n.currentTime,videoDuration:e.duration,muted:n.video.muted});n.flooringPageIsShow&&(n.flooringPageCloseTime=(new Date).getTime(),mK.call(this,{type:6,staytime:n.flooringPageCloseTime-n.flooringPageShowTime,componentsstartstr:JSON.stringify(n.flooringPageState)}),n.flooringPageShowTime=0,n.flooringPageCloseTime=0,hK.call(this))}}},Xm(n.onHide),ce("onVideoResourceLoad",(e=>{!n.isShowed&&n.video&&n.video.src===e.resource&&(n.preloadVideoSuccess=!0,n.video.src=e.resource,n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===t){var d=wW.isWaGame?"count":`count_${n.adProxy.getWebviewInfo().currentWebviewId}`,h=(cZ(d,n.adType)||0)+1;uZ(d,n.adType,h),h>=5&&(console.warn(`系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响${wW.isWaGame?"小游戏":"小程序"}性能，请减少实例创建数量或调用destroy方法销毁无用的实例`),5===h&&n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_INSTANCE_BROKEN))}}load(){if(QK.call(this))return Promise.reject({errMsg:WZ});var e=wZ(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();var t=vK.call(this);return e.adFetchResult=t.catch((t=>{var i=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",i),i})),e.adFetchResult}show({branchId:e,branchDim:t,welfareData:i}={}){var r=this;return zo()((function*(){if(QK.call(r))return Promise.reject({errMsg:WZ});var n=wZ(r);if(n.isShowed)return Promise.resolve();if(!n.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});var a=!1;try{a=(yield new Promise(((e,t)=>{yZ||t(),yZ&&(AZ=setTimeout(t,3e3)),yZ&&Oi({apiName:"webapi_getadcardbalance",success({data:i}){var{errCode:r,balance:n}=i;!r&&n?(AZ&&clearTimeout(AZ),Ul({title:"是否使用广告跳过卡",content:`当前还有${n}张`,confirmText:"使用",cancelText:"继续看",success({confirm:i}){i?Oi({apiName:"webapi_payadcardskiprewardedad",reqData:{outTradeNo:`${Date.now()+Math.random()}`},success({data:i}){var{errCode:r}=i;r?(Hl({title:"使用广告卡失败",icon:"error"}),t()):(Hl({title:"消耗一张广告卡"}),e({isUseAdSkipCard:!0}))},fail:t}):t()},fail:t})):t()},fail:t})}))).isUseAdSkipCard}catch(e){}if(a)return n.emitter.emit("close",{isEnded:!0}),n.adProxy.reportAdMonitorData(vB.CHECK_AD_SKIP_CARD_SUCCESS),n.emitter.emit("load"),Promise.resolve();if(1===(cZ("show",n.adType)||0))return n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});OK.call(r,{stage:1001});var o=(new Date).getTime();return n.isSwitched=!1,uZ("show",n.adType,1),n.adProxy.setTimePoint("p19"),e?n.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):n.adProxy.resetAnalyseBranchInfo(),null!=i&&i.welfare_id&&null!=i&&i.welfare_trace?(n.adWelfareData={welfare_id:i.welfare_id,welfare_trace:i.welfare_trace},(JK.call(r)||eX.call(r))&&n.adProxy.UpdateRewardedLandingPageData({weappExtraData:K()({},n.adWelfareData||{})})):n.adWelfareData={},n.adFetchResult.then((()=>{if(QK.call(r))return Promise.reject({errMsg:WZ});SW(),yK.call(r);var e,{screenWidth:t,screenHeight:i}=wW;return wW.isWaGame?n.adProxy.reportVideoLastClick({touchStartX:Math.round(RZ),touchStartY:Math.round(OZ),touchEndX:Math.round(kZ),touchEndY:Math.round(MZ),touchDuration:LZ,screenWidth:t,screenHeight:i}):(n.weappTouchEventHandler&&(e=n.weappTouchEventHandler,lW.off("_onWeappTouchEvent",e)),n.weappTouchEventHandler=((e,t)=>{var i=!1;if("function"==typeof e){var r=r=>{!i&&e(r,t),i=!0};return lW.on("_onWeappTouchEvent",r),r}return null})(FZ,{aid:n.adProxy.data.aid,traceid:n.adProxy.data.traceid})),n.adProxy.reportVideoLoadTime({beginTime:o,endTime:(new Date).getTime(),reportType:2}),n.isShowed=!0,n.startExposureTime=0,n.isShowedExposureReported=!1,n.isViewableExposureReported=!1,n.isCardExposureReported=!1,n.adProxy.isViewable=!1,JK.call(r)||eX.call(r)?KK.call(r):(n.adProxy.isValidCondition("widget_gray_video_sound")?(Yh(),n.video.muted=!1,wW.isIOS&&(n.video.obeyMuteSwitch=!0),n.sound.src=TZ):(n.video.muted=!0,n.sound.src=CZ),n.count.style.hidden=!1,n.countDown.style.hidden=!1,n.splitLineLeft.style.hidden=!1,n.card.style.hidden=!0,n.container.style.hidden=!1,n.adFeedbackList.style.hidden=!0,n.adCover.show(),n.adProxy.setTimePoint("p15"),n.container.nextLayout().then((()=>Js(500))).then((()=>{if(QK.call(r))return Promise.reject({errMsg:WZ});if(n.isSwitched)return LK.call(r,1);jZ.call(r).then((()=>{n.topBar.style.hidden=!1,wW.isWaGame||(n.isFullscreen=!0)})).catch((()=>{n.topBar.style.hidden=!0}));var e={top:0,duration:500};return n.container.animate(e).then((()=>{Ll(wl);var{width:e,height:t}=n.video.style;n.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:e,height:t,weappExtraData:K()({},n.adWelfareData||{})});return n.startExposureTime=+new Date,Js(500).then((()=>{n.isFirstPlay=!0,n.videoFirstPlayTime=(new Date).getTime(),n.adProxy.setTimePoint("p20"),uX.call(r,"play"),SK.call(r),CK.call(r,ZL.REWARDEDVIDEOPLAY)}))})).then((()=>{n.isFirstPlaySuccess=!0;var e=lX.call(r);n.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.duration,muted:n.video.muted})})).catch((e=>{var t={errMsg:e,isSwitched:n.isSwitched};return n.adProxy.reportAdMonitorData(vB.REWARDED_VIDEO_ANIMATE_ERROR,t),LK.call(r,2)}))})).catch((e=>{throw uZ("show",n.adType,0),e})))})).catch((e=>{throw uZ("show",n.adType,0),e}))}))()}isReady(){return!QK.call(this)&&wZ(this).isData}destory(){qK.call(this)}destroy(){qK.call(this)}onError(e){QK.call(this)||wZ(this).emitter.on("_error",e)}offError(e){QK.call(this)||wZ(this).emitter.off("_error",e)}onLoad(e){QK.call(this)||wZ(this).emitter.on("load",e)}offLoad(e){QK.call(this)||wZ(this).emitter.off("load",e)}onClose(e){if(!QK.call(this)){var t=wZ(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}}offClose(e){if(!QK.call(this)){var t=wZ(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}}var hX,pX,fX={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},gX={zIndex:1000009,position:"absolute",top:8,right:6,width:60,height:20,color:"#ffffff",fontSize:11,lineHeight:20,borderRadius:4,textAlign:"center"},_X={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:Mj,height:36},landscape:{width:Nj,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:Mj,height:Fj},landscape:{width:Nj,height:Uj}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:Mj,height:Fj},landscape:{marginTop:70,width:Nj,height:Uj},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:Mj,height:Fj},landscape:{width:Nj,height:Uj},hidden:!0},adContent:{zIndex:1000008,portrait:{width:Mj,height:204},landscape:{width:Nj,height:168},flexDirection:"column",alignItems:"center"},adChannelsLiveReserve:K()(K()({},gX),{},{hidden:!0,backgroundColor:"#959FC1"}),adChannelsLive:K()(K()({},gX),{},{hidden:!0,backgroundColor:"#FF6146",flexDirection:"row",alignItems:"center",justifyContent:"flex-start"}),adChannelsLiveIcon:{width:12,height:12,marginRight:4,marginLeft:4},adChannelsLiveText:{width:33,height:20,color:"#ffffff",fontSize:11,lineHeight:20,marginRight:8,textAlign:"center"},adChannelsLiveEnd:K()(K()({},gX),{},{hidden:!0,backgroundColor:"#959FC1"}),adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:fX,wordingLine1:fX,wordingLine2:fX,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:6,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:Mj,height:400},landscape:{width:Nj,height:Uj}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},mX={adMedia:{zIndex:1000008,portrait:{width:Mj,height:Lj},landscape:{width:Nj,height:Bj}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:Mj,height:Lj},landscape:{width:Nj,height:Bj},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:Mj,height:Lj},landscape:{width:Nj,height:Bj}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:Mj,height:Lj},landscape:{width:Nj,height:Bj}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:Mj},landscape:{fontSize:11,width:Nj},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},vX={adMedia:{zIndex:1000008,portrait:{width:Mj,height:Lj},landscape:{width:Nj,height:Bj}}},yX='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',AX=`\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        \n    <text id="ad-video-Count-Down">\n    </text>\n  \n        \n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  \n        \n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  \n        ${yX}\n      </video>\n    </view>\n  `,bX=`\n    <image id="ad-media">\n      ${yX}\n    </image>\n  `,EX={wordingLineTmpl:'\n  <text bubble-event="true"></text>\n'};!function(e){e[e.AD_BUTTON=1]="AD_BUTTON",e[e.AD_MATERIAL=2]="AD_MATERIAL",e[e.CLOSE_BUTTON=3]="CLOSE_BUTTON",e[e.MASK=4]="MASK",e[e.AD_DESC=5]="AD_DESC",e[e.TIMEOUT=6]="TIMEOUT",e[e.LANDPAGE_BACK=7]="LANDPAGE_BACK",e[e.FEEDBACK_DISLIKE=8]="FEEDBACK_DISLIKE"}(hX||(hX={})),function(e){e[e.CLOSE_BUTTON=1]="CLOSE_BUTTON",e[e.MASK=2]="MASK",e[e.TIMEOUT=3]="TIMEOUT",e[e.LANDPAGE_BACK=4]="LANDPAGE_BACK",e[e.ONSHOW=5]="ONSHOW",e[e.CRASH=6]="CRASH",e[e.SWITCH_PAGE_FREQUENTLY=7]="SWITCH_PAGE_FREQUENTLY",e[e.FEEDBACK_DISLIKE=8]="FEEDBACK_DISLIKE"}(pX||(pX={}));var wX=e=>rA(e),TX="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png",CX=0,SX=0,IX=B,xX=L,PX="",DX=!0,RX="image",OX="video";k.onReady((()=>{PX=RU();var e=ps();CX=e.screenWidth||0,SX=e.screenHeight||0,DX=bi()}));var kX="3030046789020061",MX="interstitial-ad has been destroyed",NX=function(e,t=!0){if(yJ.call(this))return!1;var i=wX(this).adProxy.isTriggerClick(e),r=i?0:1;return t&&FX.call(this,e,r),i},LX=function(e,t=0){var i=wX(this);if(yJ.call(this)||!i.data)return!1;var r=!1,n=0;return i.adProxy.isValidCondition("widget_gray_time_limit_2")&&(n=100*(i.data.condition.widget_gray_time_limit_2||5)),n>0&&(0===i.startExposureTime||+new Date-i.startExposureTime<n)&&(r=!0,i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_LIMIT_TIME,{clickType:t})),i.isShow||(r=!1),r},BX=function(){var e,t=wX(this);return null!==(e=t.data)&&void 0!==e&&e.useTemplate?t.tmplContainer:t.container},FX=function(e,t=0){var i;if(!yJ.call(this)){var r=wX(this),n=BX.call(this);if(null!=n&&n.layoutBox){var{width:a,height:o}=n.layoutBox,s=0;return[0,2,3].includes(t)&&(r.clickCount+=1,s=r.clickCount),r.adProxy.reportTouchClick({slotid:kX,costtype:null!==(i=r.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,click_time:+new Date,click_cnt:s,start_posx:Math.round(e.relativeX)||0,start_posy:Math.round(e.relativeY)||0,end_posx:Math.round(e.relativeEndX)||0,end_posy:Math.round(e.relativeEndY)||0,ad_width:Math.round(a)||0,ad_height:Math.round(o)||0,press_interval:e.pressInterval,block_click:t})}}},UX=function(e){if(!yJ.call(this)){var t=wX(this),i=BX.call(this);if(null!=i&&i.layoutBox){var{left:r,top:n,width:a,height:o}=i.layoutBox,s={currentTime:t.videoCurrentTime,duration:t.videoDuration},l=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-n,pressInterval:e.pressInterval,left:r,top:n,width:a,height:o,videoData:s});return WX.call(this,{stage:1002}),l}}},WX=function({stage:e}){yJ.call(this)||wX(this).adProxy.reportADFunnelModel({adtype:3,stage:e})},GX=function(e=!1){var t,i,r,n,a=wX(this);if(yJ.call(this)||!a.data)return Promise.resolve();var o=BX.call(this);if(null==o||!o.layoutBox)return Js(0).then((()=>GX.call(this,e)));var s,{left:l,top:u,width:c,height:d}=o.layoutBox,h=a.data.useTemplate?null===(t=a.adTemplateRef)||void 0===t?void 0:t.isShow():!1===(null===(i=a.container)||void 0===i?void 0:i.style.hidden);if(!a.isShowedExposureReported&&h){a.isShowedExposureReported=!0,a.startExposureTime=+new Date,EJ.call(this);a.adProxy.reportExposure({left:l,top:u,width:c,height:d,exposureType:"showed"})}if(null!==(r=a.adTemplateRef)&&void 0!==r&&r.isShow()&&!a.hasEmitShowHalf)a.hasEmitShowHalf=!0,a.hasEmitHideHalf=!1,null===(s=a.adTemplateRef)||void 0===s||s.emitEvent(jH.ADSHOWHALF);else if(!(null!==(n=a.adTemplateRef)&&void 0!==n&&n.isShow()||a.hasEmitHideHalf)){var p;a.hasEmitShowHalf=!1,a.hasEmitHideHalf=!0,null===(p=a.adTemplateRef)||void 0===p||p.emitEvent(jH.ADHIDEHALF)}if(!a.isViewableExposureReported&&h&&a.ad_type===RX){if(!e)return Js(1e3).then((()=>GX.call(this,!0)));a.isViewableExposureReported=!0,a.adProxy.isViewable=!0;a.adProxy.reportExposure({left:l,top:u,width:c,exposureType:"viewable"})}return Promise.resolve()},VX=function(e){var t;if(!yJ.call(this)){var i=wX(this),r=+new Date;return i.adProxy.reportCloseAction({slotid:kX,is_game:DX?1:0,costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,close_type:e,exposure_duration:r-i.startExposureTime-i.hideDuration,start_time:i.startExposureTime,close_time:r})}},jX=function(e,t={}){var i,r,n,a,o=wX(this);if(!yJ.call(this)&&o.data){var{width:s,height:l}=(o.data.useTemplate?null===(i=o.adTemplateRef)||void 0===i||null===(r=i.getElementById("adContainer"))||void 0===r?void 0:r.style:null===(n=o.adContainer)||void 0===n?void 0:n.style)||{width:0,height:0};return o.adProxy.reportAntifraud({click_button:e,cost_type:null!==(a=o.adProxy.data)&&void 0!==a&&a.is_cpm?1:2,slotid:kX,is_game:DX?1:0,pageentertime:+new Date(o.adProxy.getProgramStartTime()),ad_width:Math.round(s)||0,ad_height:Math.round(l)||0,clientexptime:o.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX)||0,pos_y:Math.round(t.absoluteY)||0,screen_width:CX,screen_height:SX})}},HX=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){if(!yJ.call(this)){var a=wX(this);e&&!i&&(a.clickFirstGradeTime=+new Date),a.adProxy.reportAdFeedbackData({adWidth:CX,adHeight:SX,adPosX:0,adPosY:0,expTime:a.startExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?a.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?+new Date:0,feedbackReason:n})}},zX=function(e={}){if(!yJ.call(this)){var t=wX(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)}},YX=function(){if(!yJ.call(this)){var e=as();CX=e.screenWidth,SX=e.screenHeight,PX=CX>SX?"landscape":"portrait"}},$X=function(){if(!yJ.call(this)){var e=wX(this),t=e.adProxy.fetch();return t.catch((t=>e.emitter.emit("_error",t))),e.adFetchResult=t,e.adFetchResult.then((t=>(e.isData=!0,e.data=t||{},e.ad_type=Wj("video",t.crt_size)?OX:RX,e.autoCloseTime=t.card_info&&t.card_info.auto_close_time||15,e.launchTime=t.card_info&&t.card_info.launch_time||15,e.frequencyTime=t.card_info&&t.card_info.frequency_time||15,iJ.call(this),tJ.call(this))))}},qX=function(){var e=wX(this),{template:t,style:i}=(e=>({template:`\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        ${"video"===e?AX:bX}\n        <text id="ad-channels-live-reserve" value="直播预约"></text>\n        <view id="ad-channels-live">\n          <image id="ad-channels-live-icon" src="https://wxa.wxs.qq.com/images/wxapp/live_icon_1.png"></image>\n          <text id="ad-channels-live-text" value="直播中"></text>\n        </view>\n        <text id="ad-channels-live-end" value="直播结束"></text>\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  `,style:K()(K()({},_X),"video"===e?mX:vX)}))(e.ad_type);e.cardStyle=i,e.cardXOM=Lg()(t).root,zY.call(this,e.cardXOM,i),yU.add(e.body),e.container.on("click",(t=>{if(NX.call(this,t,!1)&&!LX.call(this,t,4))return e.isClosing||(pJ.call(this,1),jX.call(this,4,t)),Promise.resolve()})),e.cancelBox.on("click",(t=>(e.isShow||e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_CROSSPAGE_CANCELBOX_CLICK,{isClosing:e.isClosing}),NX.call(this,t,!1)?(LX.call(this,t,3)||e.isClosing||(pJ.call(this,0),jX.call(this,3,t)),Promise.resolve()):Promise.resolve()))),e.adFeedbackContainer.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||HX.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),e.adFeedbackBtn.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adProxy.openFeedbackUrl(DX?1007:1006),e.adFeedbackList.style.hidden=!0,HX.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})))})),e.adDislikeBtn.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,HX.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),e.adQualityBtn.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,HX.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),pJ.call(this,7),jX.call(this,8,t)))})),e.adDuplicateBtn.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,HX.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),pJ.call(this,7),jX.call(this,8,t)))})),e.adDismatchBtn.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,HX.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),pJ.call(this,7),jX.call(this,8,t)))})),e.adButton.on("click",(e=>{NX.call(this,e)&&(LX.call(this,e,1)||_J.call(this,e,1))})),e.adWording.on("click",(e=>{jX.call(this,5,e)})),e.ad_type===RX&&e.adMedia.on("click",(t=>{e.adProxy.isValidCondition("widget_gray_optimizedstyle")?NX.call(this,t)&&(LX.call(this,t,2)||_J.call(this,t,2)):jX.call(this,2,t)})),e.ad_type===OX&&(e.adVideoClickMask.on("click",(e=>{NX.call(this,e)&&(LX.call(this,e,2)||_J.call(this,e,2))})),e.adVideoAfter.on("click",(e=>{NX.call(this,e)&&(LX.call(this,e,2)||_J.call(this,e,2))})),e.adVideoAudioBox.on("click",(t=>{NX.call(this,t,!1)&&(LX.call(this,t,1)||(e.adMedia.muted=!e.adMedia.muted,e.adVideoAudioIcon.src=e.adMedia.muted?TX:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),e.adMedia.onTimeUpdate((e=>QX.call(this,e))),e.adMedia.onEnded((()=>ZX.call(this))),e.adMedia.onError((e=>KX.call(this,e))))},QX=function(e){var{duration:t,position:i}=e,r=wX(this);if(!yJ.call(this)&&r.data){var n=SJ.call(this);if(AJ.call(this),r.data.useTemplate||(n.autoplay=!1),i>0&&(r.videoCurrentTime=1e3*i),r.videoDuration=1e3*t,r.isFirstPlay){r.adProxy.setTimePoint("p21",{time:Date.now()-1e3*i});var a=0;r.showTime>r.videoFirstPlayTime&&(a=r.showTime-r.videoFirstPlayTime),r.adProxy.reportVideoLoadTime({beginTime:r.videoFirstPlayTime,endTime:(new Date).getTime()-Math.round(1e3*i),departureTime:a,reportType:1,preloadVideo:r.preloadVideo?1:0,preloadVideoSuccess:r.preloadVideoSuccess?1:0}),r.isFirstPlay=!1,WX.call(this,{stage:1004}),r.isFirstPlaySuccess=!0,r.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_VIDEO_PLAY_SUCCESS})}if(i>=1&&!r.isViewableExposureReported){var{width:o,height:s}=n.style;r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;r.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:o,height:s})}if(!r.data.useTemplate){var l=Math.ceil(t-i);r.adVideoCountDown.value=`${l.toString()}s`,IX&&t-i<.6&&r.adVideoAfter.style.hidden&&(r.adVideoAfter.style.hidden=!1,r.adVideoAfter.animate({opacity:1,duration:350}),r.adVideoAudioBox.style.hidden=!0,r.adVideoCountDown.style.hidden=!0)}}},ZX=function(){var e=wX(this);if(!yJ.call(this)&&e.data){e.videoCurrentTime=e.videoDuration,e.isEnded=!0,e.isPlaying=!1,bJ.call(this);e.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:e.videoCurrentTime,videoDuration:e.videoDuration,muted:IJ.call(this)});e.data.useTemplate||(e.adVideoAfter.style.hidden=!1,e.adVideoAudioBox.style.hidden=!0,e.adVideoCountDown.style.hidden=!0,xX&&e.adVideoAfter.animate({opacity:1,duration:300})),e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_VIDEO_PLAY_SUCCESS_END)}},KX=function(e){var t=wX(this);yJ.call(this)||(bJ.call(this),t.adProxy.reportAdMonitorData(vB.INTERSTITIAL_VIDEO_LOAD_ERROR,e))},XX=function(){var e=wX(this);if(yJ.call(this)||!e.data)return Promise.resolve();if(!e.cardStyle)return Promise.resolve();var{width:t,height:i}=e.data,r="portrait"===PX?Fj/i:Uj/i,n="portrait"===PX?CX/375:SX/375,a=e.cardStyle,o=Object.keys(a);o.forEach((t=>{if(a[t][PX]){var i=a[t][PX];Object.keys(i).forEach((r=>{var n;null!==(n=e[t])&&void 0!==n&&n.style&&(e[t].style[r]=i[r],a[t][r]=i[r])}))}}));var s=t*r;a.adBackground.width=s,e.adBackground.style.width=s,"portrait"===PX?(a.adMedia.width=Mj,e.adMedia.style.width=Mj,a.adMedia.height=Lj,e.adMedia.style.height=Lj,a.adBackground.height=Fj,e.adBackground.style.height=Fj,a.adBackground.left=0-(s-Mj)/2,e.adBackground.style.left=0-(s-Mj)/2):"landscape"===PX&&(e.adMedia.style.width=Nj,a.adMedia.width=Nj,e.adMedia.style.height=Bj,a.adMedia.height=Bj,e.adBackground.style.height=Uj,a.adBackground.height=Uj,e.adBackground.style.left=0-(s-Nj)/2,a.adBackground.left=0-(s-Nj)/2);var l=["width","height","fontSize","lineHeight","borderRadius"];return o.forEach((t=>{if(!["container","mask","body"].includes(t))if(l.forEach((i=>{var r,o;null!==(r=e[t])&&void 0!==r&&null!==(o=r.style)&&void 0!==o&&o[i]&&(e[t].style[i]=a[t][i]*n)})),"adWording"===t)e[t].style.marginTop=a[t].marginTop*n;else if("adButton"===t)e[t].style.marginBottom=a[t].marginBottom*n;else if("adVideoAfterIcon"===t)e[t].style.marginTop=a[t].marginTop*n,e[t].style.marginBottom=a[t].marginBottom*n;else if(0===t.indexOf("wordingLine")){var i,r="portrait"===PX?Mj:Nj;null!==(i=e[t])&&void 0!==i&&i.style&&(e[t].style.width=r*n)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=CX,e.container.style.height=SX,e.body.style.width=CX,e.body.style.height=SX,e.mask.style.width=CX,e.mask.style.height=SX,e.container.nextLayout().then((()=>{if(!DX&&IX)return e.container.forceUpdate()}))},JX=function(){var e=zo()((function*(){var e=wX(this);if(!yJ.call(this)&&e.data)try{var t;e.tmplContainer||(e.tmplContainer=new zv({name:"interstitialTemplContainer"})),yU.children[e.tmplContainer.id]||(yU.add(e.tmplContainer),e.tmplContainer.fullscreen=!0,DX||(e.tmplContainer.style.fixed=!0),e.tmplContainer.style.position="absolute",e.tmplContainer.style.left=0,e.tmplContainer.style.top=0),yield e.adTemplate.render({isEmpty:void 0,systemInfo:{screenWidth:CX,screenHeight:SX,deviceOrientation:PX,platform:L?"android":"ios",hostEnv:"minigame"},hostContainer:e.tmplContainer,template:e.data.template,adData:e.adProxy.data,adCustomId:"INTERSTITIAL",styleOptions:{removePx:!0,splitShorthand:!0,convertRgbaColor:!0,convertDisplayName:!0,convertRotate:!0},extraScope:{private:e,cancelBoxIcon:"http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=0a13bee70ecfda3093ad0e183cc2576a&filekey=3033020101041f301d02016d0402534804100a13bee70ecfda3093ad0e183cc2576a0202105c040d00000004627466730000000131&hy=SH&storeid=32303138313232393033353031333030303365356565313336666664393336663561333230613030303030303664&bizid=1023"},ref:t=>{e.adTemplateRef=t,t.onEvent(e.handleAdTemplateEvent)}}),e.showDetailTime=+new Date,e.buttonTextType=e.data.button_action.text_type||0,e.data.product_type===OB.ANDROID?(e.adProxy.setAppInstallState(!1),oJ.call(this)):e.data.product_type===OB.WE_CHAT&&e.data.app.isFollowed&&0===e.buttonTextType&&aJ.call(this,"查看公众号"),e.adProxy.preloadLanding(),e.emitter.emit("load"),yield null===(t=e.adTemplateRef.getRootElement())||void 0===t?void 0:t.ready(),e.emitter.emit("ready"),e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_TEMPLATE_RENDER_SUCCESS)}catch(t){e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_TEMPLATE_RENDER_FAILED,t),e.emitter.emit("_error",{errMsg:"interstitial render failed (internal)"})}}));return function(){return e.apply(this,arguments)}}(),eJ=function(){var e=zo()((function*(){var e=wX(this);!yJ.call(this)&&e.adTemplateRef&&(YX.call(this),yield e.adTemplateRef.update({systemInfo:{screenWidth:CX,screenHeight:SX,deviceOrientation:PX,platform:L?"android":"ios",hostEnv:"minigame"}}),e.showDetailTime=+new Date)}));return function(){return e.apply(this,arguments)}}(),tJ=function(){var e=zo()((function*(){var e=wX(this);if(yJ.call(this)||!e.data)return Promise.resolve();try{var t,i,{app:r,product_type:n,crtInfo:a,useTemplate:o,button_action:s,image_url:l,card_info:{bg_color:u,font_color:c,bg_img:d,desc:h,thumb:p,title:f},extBackComm:g}=e.data;if(o)return void(yield JX.call(this));var _,m=null==a||null===(t=a[0])||void 0===t||null===(i=t.card_info)||void 0===i?void 0:i.mp_tag_type;if(e.body&&yU.remove(e.body),qX.call(this),e.body.fullscreen=!0,DX||(e.body.style.fixed=!0),e.ad_type===OX){var{short_video:{thumb_url:v,video_url:y}}=e.data;e.adMask.style.hidden=!0,e.adBackground.style.hidden=!0,e.adVideoAfter.style.hidden=!0,e.adVideoAudioIcon.src=TX,e.adVideoAfter.src=d,e.adVideoAfterIcon.src=p,e.adVideoAfterText.value=f,e.adMedia.autoplay=!1,IX&&e.adMedia.src===y&&e.adMedia.seek(0),IX?(e.adMedia.poster=v,Js(500).then((()=>{e.adMedia.src=y,e.adProxy.setTimePoint("p8")}))):(e.adProxy.setTimePoint("p8"),e.adMedia.src=y,e.adMedia.poster=v),e.adProxy.reportVideoLoadTime({beginTime:e.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_VIDEO_LOAD})}else e.ad_type===RX&&(e.adMedia.src=l,e.adMask.style.hidden=!1,e.adBackground.style.hidden=!1,e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_IMAGE_LOAD}));if(u?(e.adMask.style.opacity=1,e.adMask.style.backgroundColor=u,_=c,e.relationLine.style.color=c,e.adButton.style.color=c,e.adButton.style.borderColor=c,e.adButtonText.style.color=c,e.adBackground.style.hidden=!0):e.adProxy.isValidCondition("widget_gray_optimizedstyle")?(e.adContainer.style.borderRadius=8,e.adContent.style.backgroundColor="#ffffff",_="#000000",e.relationLine.style.color="#b3b3b3",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#07c160",e.adButton.style.backgroundColor="#07c160",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===OX):(e.adMask.style.opacity=.5,e.adMask.style.backgroundColor="#000000",_="#ffffff",e.relationLine.style.color="#ffffff",e.adButton.style.color="#ffffff",e.adButton.style.borderColor="#ffffff",e.adButtonText.style.color="#ffffff",e.adBackground.style.hidden=e.ad_type===OX,e.adBackground.src=d),h.forEach(((t,i)=>{var r=`wordingLine${i}`,{root:n}=Lg()(EX.wordingLineTmpl);n.attributes.id=r;var a=nA.call(this,n);a.value=t,a.style.color=_,e.adWording.add(a)})),e.adButtonText.value=s.button_text,21474837086===g.ams_second_industry_id&&(e.adButtonText.value="点击跳转广告详情页",e.adButtonText.style.width=218,e.adButton.style.width=218),e.buttonTextType=s.text_type||0,m===kB.MP_TAG_TYPE_CONVERTION){var A=+new Date;lF({buttonText:s.button_text,aid:e.adProxy.data.aid}).then((t=>{var i=+new Date;if(e.adProxy.reportRelationFetchDuration({startTime:A,endTime:i,showTime:e.showDetailTime||0}),t){var{count:r,descText:n}=t,a=`— 最近已有${r}人${n} —`;e.relationLine.value=a}else e.relationLine.value=""})).catch((t=>{e.relationLine.value="",e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_RELATION_FETCH_ERROR,t)}))}n===OB.ANDROID?(e.adProxy.setAppInstallState(!1),oJ.call(this)):n===OB.WE_CHAT&&r.isFollowed&&0===e.buttonTextType&&aJ.call(this,"查看公众号"),e.adProxy.preloadLanding(),e.emitter.emit("load"),e.container.ready().then((()=>{e.emitter.emit("ready")})),e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_RENDER_SUCCESS})}catch(t){return e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_RENDER_ERROR_ALTERNATE}),e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_AD_RENDER_ERROR,t),e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_RENDER_ERROR}),Promise.reject(t)}return Promise.resolve()}));return function(){return e.apply(this,arguments)}}(),iJ=function(){var e=wX(this);if(!yJ.call(this)&&e.ad_type===OX&&e.data){var{video_url:t,video_duration:i}=e.data.short_video;e.videoDuration=1e3*i,xX&&(e.preloadVideo=!0,e.preloadVideoSuccess=!1,e.adProxy.preloadVideo([t]).catch((t=>{e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_VIDEO_PRELOAD_ERROR,t)})))}},rJ=function(e){var t=wX(this);if(!yJ.call(this)&&t.data){var i;if(t.clickCount>1)t.adProxy.reportRepeatClick({slotId:kX,costType:null!==(i=t.adProxy.data)&&void 0!==i&&i.is_cpm?1:2,clkCnt:t.clickCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName});if(t.adProxy.land(e).then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?(t.isLandingPage=!0,bJ.call(this)):t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((()=>{t.lastJsapiStatus=1})),t.ad_type===OX)t.adProxy.reportVideo({playType:t.isPlaying?"partial":"complete",conditionType:"land",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:IJ.call(this)})}},nJ=function(){var e=wX(this);if(!yJ.call(this)&&e.data)return Js(10).then((()=>e.adFetchResult.then((()=>{if(e.data&&e.isLandingPage){var t;e.lastJsapiStatus=0,e.isLandingPage=!1;var i=+new Date;e.landingPageCostTime=i-e.hideTime,e.adProxy.reportLandingTime({slotId:kX,costType:null!==(t=e.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,openTime:e.hideTime,closeTime:i,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),pJ.call(this,3)}})).catch((()=>{}))))},aJ=function(){var e=zo()((function*(e){var t,i=wX(this);!yJ.call(this)&&i.data&&(yield sJ.call(this),i.data.useTemplate?null===(t=i.adTemplateRef)||void 0===t||t.emitEvent(jH.CHANGEADBTNTEXT,{text:e}):i.adButtonText.value=e)}));return function(t){return e.apply(this,arguments)}}(),oJ=function(){var e=zo()((function*(){var e=wX(this);if(!yJ.call(this)&&e.data){var{appInfo:{apkName:t,versionCode:i,urlScheme:r}}=e.data;try{var n=yield e.adProxy.getInstallState(t);n.isInstalled&&(void 0===n.versionCode||n.versionCode>=i)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),r&&r.trim().length>0?aJ.call(this,"进入应用"):aJ.call(this,"查看应用"),1===e.buttonTextType&&aJ.call(this,e.data.button_action.button_text))}catch(e){}}}));return function(){return e.apply(this,arguments)}}(),sJ=function(e){if(!e||"function"!=typeof e)return new Promise((e=>sJ.call(this,e)));var t=wX(this);return t.isReady?e():t.emitter.on("ready",e),Promise.resolve()},lJ=function(){var e=zo()((function*(){var e;if(yJ.call(this))throw{errMsg:MX};var t=wX(this);yield eJ.call(this),yield null===(e=t.adTemplateRef)||void 0===e?void 0:e.show()}));return function(){return e.apply(this,arguments)}}(),uJ=function(){if(yJ.call(this))return Promise.reject({errMsg:MX});var e=wX(this);return e.onceSwitched=!1,e.startShow=+new Date,e.body.style.width=CX,e.body.style.height=SX,!DX&&IX&&(e.body.style.hidden=!1),Promise.resolve().then((()=>{if(YX.call(this),yJ.call(this))throw{errMsg:MX};if(e.isShow=!0,e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!0,e.ad_type===OX){e.videoFirstPlayTime=(new Date).getTime(),e.adProxy.setTimePoint("p20"),AJ.call(this),e.adMedia.play(),e.adMedia.autoplay=!0,e.isFirstPlay=!0;e.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:e.videoDuration,muted:e.adMedia.muted});e.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_VIDEO_PLAY})}return XX.call(this).then((()=>(e.body.style.hidden&&(e.body.style.hidden=!1),e.container.style.hidden=!1,e.isSwitched?pJ.call(this,6):e.container.animate({opacity:1,duration:300}).then((()=>(e.showDetailTime=+new Date,e.container.nextLayout((()=>GX.call(this)))))).catch((t=>{var i={errMsg:t,isSwitched:e.isSwitched,onceSwitched:e.onceSwitched,startShow:e.startShow,enterRoute:e.enterRoute,enterTime:e.enterTime,outRoute:e.outRoute,outTime:e.outTime,lastRoute:e.lastRoute};return e.adProxy.reportAdMonitorData(vB.INTERSTITIALAD_ANIMATE_ERROR,i),pJ.call(this,6).then((()=>Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})))})))))}))},cJ=function({branchId:e,branchDim:t}={}){if(yJ.call(this))return Promise.reject({errMsg:MX});var i=wX(this);if(1===(function(){if(lZ.hasOwnProperty("show")){var e=Object.keys(lZ.show).map((e=>lZ.show[e]));return Math.max(...e)}}()||0))return i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_SHOW_FAIL3,zX.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});var{createWebviewId:r,currentWebviewId:n}=i.adProxy.getWebviewInfo();return r!==n?(i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_SHOW_FAIL5,zX.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(i.adProxy.setTimePoint("p19"),i.isSwitched=!1,uZ("show",i.adType,1),i.showTime=+new Date,i.fetchBeginTime=(new Date).getTime(),e?i.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):i.adProxy.resetAnalyseBranchInfo(),i.adFetchResult.catch((()=>Promise.reject({errMsg:"no ad data"}))).then((()=>{var e=+new Date-+new Date(i.adProxy.getProgramStartTime());if(e<=1e3*i.launchTime)return i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_SHOW_FAIL1,zX.call(this,{startInterval:e})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});var t=function(){if(lZ.hasOwnProperty("close")){var e=Object.keys(lZ.close).map((e=>lZ.close[e]));return Math.max(...e)}}()||0,r=+new Date-t;return r<=1e3*i.frequencyTime?(i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_SHOW_FAIL2,zX.call(this,{closeInterval:r})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(WX.call(this,{stage:1001}),sJ.call(this).then((()=>i.data.useTemplate?lJ.call(this):uJ.call(this))).then((()=>{i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_SHOW_SUCCESS,zX.call(this))})))})).catch((e=>(uZ("show",i.adType,0),Promise.reject(e)))))},dJ=function(){var e=zo()((function*(){var e;if(!yJ.call(this)){var t=wX(this);t.androidAppState=0,t.data=null,t.isData=!1,t.isShow=!1,t.cardXOM=null,t.cardStyle=null,t.startExposureTime=0,t.isShowedExposureReported=!1,t.isViewableExposureReported=!1,t.adProxy.isViewable=!1,t.lastCloseTime=0,t.buttonTextType=0,t.startExposureTime=0,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.showTime=0,t.isClosing=!1,t.clickFirstGradeTime=0,t.body&&(t.body.style.hidden=!0),t.container&&(t.container.style.hidden=!0),t.isReady=!1,t.hasEmitShowHalf=!1,t.hasEmitHideHalf=!0,t.videoFirstPlayTime=0,t.isEnded=!1,t.fetchBeginTime=0,t.videoCurrentTime=0,t.videoDuration=0,t.isPlaying=!1,t.isFirstPlay=!1,t.isFirstPlaySuccess=!1,t.preloadVideo=!1,t.preloadVideoSuccess=!1,t.keepAliveTimer=null,t.isSwitched=!1,t.onceSwitched=!1,t.startShow=0,t.showDetailTime=0,t.tmplContainer=null,t.handleAdTemplateEvent&&(null===(e=t.adTemplateRef)||void 0===e||e.offEvent(t.handleAdTemplateEvent)),t.adTemplateRef=null,t.isEnded?WX.call(this,{stage:1005}):WX.call(this,{stage:1006}),uZ("show",t.adType,0),uZ("close",t.adType,+new Date),wJ.call(this,"none"),!DX&&IX?Js(100).then((()=>{t.emitter.emit("close")})):t.emitter.emit("close"),yield gJ.call(this),t.adProxy.reset()}}));return function(){return e.apply(this,arguments)}}(),hJ=function(){var e=zo()((function*(e){var t;if(yJ.call(this))return Promise.resolve();var i=wX(this);i.adProxy.reportTimePoints({slotid:kX,costtype:null!==(t=i.adProxy.data)&&void 0!==t&&t.is_cpm?1:2,extInfo:{preloadVideoSuccess:i.preloadVideoSuccess?1:0}}),[4,6].includes(e)||(yield i.container.animate({opacity:0,duration:300})),VX.call(this,e),2===e?jX.call(this,6):3===e&&jX.call(this,7),yield dJ.call(this),4!==e&&(yield $X.call(this))}));return function(t){return e.apply(this,arguments)}}(),pJ=function(e){var t=wX(this);return yJ.call(this)||!t.data?Promise.resolve():t.data.useTemplate?fJ.call(this,e):t.isClosing?Promise.resolve():t.container?(t.isClosing=!0,t.ad_type===OX&&(t.adProxy.reportVideo({playType:t.isEnded?"complete":"partial",conditionType:"close",playDuration:t.videoCurrentTime,videoDuration:t.videoDuration,muted:t.adMedia.muted}),t.adMedia.autoplay=!1,t.adMedia.pause(),bJ.call(this),t.adMedia.muted=!0,t.adVideoAfter.style.opacity=0),t.container.ready().then((()=>hJ.call(this,e))).then((()=>t.isClosing=!1)).catch((e=>{t.isClosing=!1,t.adProxy.reportAdMonitorData(vB.INTERSTITIAL_HIDE_ERROR,e)}))):(t.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_NO_CONTAINER}),Promise.resolve())},fJ=function(){var e=zo()((function*(e){if(!yJ.call(this)){var t=wX(this);if(t.adTemplateRef){t.isClosing=!0;try{var i,r,n;t.adTemplateRef.hide(),null===(i=t.adTemplateRef)||void 0===i||i.emitEvent(jH.ADHIDEHALF),t.adProxy.reportTimePoints({slotid:kX,costtype:null!==(r=t.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,extInfo:{preloadVideoSuccess:t.preloadVideoSuccess?1:0}}),VX.call(this,e),2===e?jX.call(this,6):3===e&&jX.call(this,7),yield dJ.call(this),4!==e&&(yield $X.call(this)),yield null===(n=t.adTemplateRef.getRootElement())||void 0===n?void 0:n.ready(),t.isClosing=!1}catch(e){t.isClosing=!1,t.adProxy.reportAdMonitorData(vB.INTERSTITIAL_HIDE_ERROR,e)}}}}));return function(t){return e.apply(this,arguments)}}(),gJ=function(){var e=zo()((function*(){var e,t,i=wX(this);null===(e=i.adTemplateRef)||void 0===e||e.offEvent(i.handleAdTemplateEvent),null===(t=i.adTemplateRef)||void 0===t||t.hide(),yield Js(2100),yield i.adTemplate.unmount({hostContainer:i.tmplContainer})}));return function(){return e.apply(this,arguments)}}(),_J=function(e,t){var i=wX(this);if(i.isShow||i.adProxy.reportAdMonitorData(vB.INTERSTITIAL_CROSSPAGE_MATERIAL_CLICK,t.toString()),!yJ.call(this)&&i.data){var{appInfo:{urlScheme:r},product_type:n,dest_type:a,extBackComm:o}=i.data,s={isButton:Boolean(o.is_from_snsadinfo&&t===hX.AD_BUTTON)};12===n&&xX&&4===i.androidAppState&&r&&r.trim().length>0?(UX.call(this,e),jX.call(this,t,e),i.adProxy.launchApplication(r).catch((()=>{})),i.lastJsapiName="launchApplication",i.isLandingPage=!0):IX&&46===n&&6===a?Promise.race([UX.call(this,e),Js(500)]).then((()=>{jX.call(this,t,e),rJ.call(this,s)})).catch((()=>{jX.call(this,t,e),rJ.call(this,s)})):(UX.call(this,e),jX.call(this,t,e),rJ.call(this,s))}},mJ=function(){var e=wX(this);C_(e.handleEnterForeground),Jm(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),yU.remove(e.body),aA(this)},vJ=function(){yJ.call(this)||(sJ.call(this).then((()=>{var e=wX(this);e.isShow&&(uZ("show",e.adType,0),uZ("close",e.adType,+new Date)),mJ.call(this)})),this._destroyed=!0)},yJ=function(){return this._destroyed},AJ=function(){var e=wX(this);bJ.call(this),e.keepAliveTimer=setTimeout((()=>{var t;e.adProxy.reportAdMonitorData(vB.INTERSTITIAL_KEEP_ALIVE,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:(null===(t=SJ.call(this))||void 0===t?void 0:t.src)||"",preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},bJ=function(){var e=wX(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},EJ=function(){var e=zo()((function*(){var e=wX(this);if(e.ad_type===RX){var t=yield e.adProxy.getChannelsLiveStatus();wJ.call(this,t)}}));return function(){return e.apply(this,arguments)}}(),wJ=function(e){var t=wX(this);if(!yJ.call(this)&&t.data){var i={adChannelsLiveReserve:!1,adChannelsLive:!1,adChannelsLiveEnd:!1};for(var r of("onlive"===e?i.adChannelsLive=!0:"end"===e?i.adChannelsLiveEnd=!0:"reserve"===e&&(i.adChannelsLiveReserve=!0),Object.keys(i))){var n;t.data.useTemplate&&t.adTemplateRef?t.adTemplateRef.emitEvent(jH.SETSTYLE,{targetid:`${t.adTemplateRef.getCustomId()}-${r}`,style:{display:i[r]?"":"none"}}):null!==(n=t[r])&&void 0!==n&&n.style&&(t[r].style.hidden=!i[r])}}},TJ=function(e){var t,i,r=wX(this);if(!yJ.call(this)&&r.data&&r.adTemplateRef)switch(e.action){case jH.TRIGGEREVENT:["error"].includes(e.value.eventName)&&r.emitter.emit(e.value.eventName,e.value.detail||{});break;case jH.HIDEAD:pJ.call(this,0);break;case jH.ADSHOWHALF:r.isShow=!0,null===(t=r.adTemplateRef)||void 0===t||t.emitEvent(jH.OPERATEADVIDEO,{type:"play"});break;case jH.ADHIDEHALF:r.isShow=!1,null===(i=r.adTemplateRef)||void 0===i||i.emitEvent(jH.OPERATEADVIDEO,{type:"pause"});break;case jH.CHECKEXPOSURE:GX.call(this);break;case jH.FEEDBACKREPORT:HX.call(this,e.value);break;case jH.ADVIDEOPLAY:r.videoFirstPlayTime=(new Date).getTime(),r.adProxy.setTimePoint("p20"),AJ.call(this),r.isFirstPlay=!0,r.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_VIDEO_PLAY});break;case jH.ADVIDEOTIMEUPDATE:QX.call(this,e.value);break;case jH.ADVIDEOENDED:ZX.call(this);break;case jH.ADVIDEOLOADFAILED:KX.call(this,"videoError");break;case jH.REPORTVIDEOPLAY:var{playType:n,conditionType:a,videoInfo:{playDuration:o,videoDuration:s,isMuted:l}}=e.value;r.adProxy.reportVideo({playType:n,conditionType:a,playDuration:o,videoDuration:s,muted:l});break;case jH.FETCHRELATIONTEXT:var u,c,{targetid:d}=e.value,{crtInfo:h,button_action:p}=r.data;if(8===(null==h||null===(u=h[0])||void 0===u||null===(c=u.card_info)||void 0===c?void 0:c.mp_tag_type)){var f=+new Date;lF({buttonText:p.button_text,aid:r.adProxy.data.aid}).then((e=>{var t=+new Date;if(r.adProxy.reportRelationFetchDuration({startTime:f,endTime:t,showTime:r.showDetailTime||0}),e){var i,{count:n,descText:a}=e,o=`— 最近已有${n}人${a} —`;null===(i=r.adTemplateRef)||void 0===i||i.emitEvent(jH.CHANGERELATIONTEXT,{targetid:d,text:o}),r.relationLine.value=o}})).catch((e=>{r.adProxy.reportAdMonitorData(vB.INTERSTITIAL_RELATION_FETCH_ERROR,e)}))}break;case jH.TEMPLATEMESSAGE:var g,_;"posClick"===e.value.message&&null!==(g=e.value.actionArgs)&&void 0!==g&&g.event&&null!==(_=e.value.args)&&void 0!==_&&_.pos&&CJ.call(this,e.value.actionArgs.event,e.value.args.pos);break;default:r.adProxy.handleAdTemplateEvent(e)}},CJ=function(){var e=zo()((function*(e,t){var i={judgeClick:!1,clickLimit:null,closeType:null,clickType:null,reportFraudType:null};switch(t){case"mask":Object.assign(i,{clickLimit:hX.MASK,closeType:pX.MASK,reportFraudType:hX.MASK});break;case"cancelBox":Object.assign(i,{clickLimit:hX.CLOSE_BUTTON,closeType:pX.CLOSE_BUTTON,reportFraudType:hX.CLOSE_BUTTON});break;case"adImage":case"adVideo":case"videoAfter":Object.assign(i,{judgeClick:!0,clickLimit:hX.AD_MATERIAL,clickType:hX.AD_MATERIAL});break;case"adButton":Object.assign(i,{judgeClick:!0,clickLimit:hX.AD_BUTTON,clickType:hX.AD_BUTTON});break;case"wording":i.reportFraudType=hX.AD_DESC;break;case"afterDislike":Object.assign(i,{closeType:pX.FEEDBACK_DISLIKE,reportFraudType:hX.FEEDBACK_DISLIKE})}NX.call(this,e,i.judgeClick)&&(i.clickLimit&&LX.call(this,e,i.clickLimit)||(i.clickType&&(yield _J.call(this,e,i.clickType)),i.reportFraudType&&jX.call(this,i.reportFraudType,e),i.closeType&&(yield pJ.call(this,i.closeType))))}));return function(t,i){return e.apply(this,arguments)}}(),SJ=function(){var e,t=wX(this);return yJ.call(this)||!t.data?null:t.data.useTemplate?(null===(e=t.adTemplateRef)||void 0===e?void 0:e.getElementById("adVideo","video"))||null:t.adMedia},IJ=function(){var e;return(null===(e=SJ.call(this))||void 0===e?void 0:e.muted)||!1};class xJ extends oA{constructor({adUnitId:e,pluginId:t=""}){super(),this._destroyed=!1;var i=wX(this);i.adUnitId=e,i.adType="interstitialAd",i.cardXOM=null,i.cardStyle=null,i.ad_type="image",i.emitter=new C$,i.adProxy=new HY({adUnitId:e,adType:"interstitialAd",pluginAppid:t}),i.adTemplate=new GY({hostConfig:sQ,hostContext:{onAppEnterForeground:T_,offAppEnterForeground:C_,onAppEnterBackground:Xm,offAppEnterBackground:Jm,getPropertyOfElement:(e,t)=>"parent"===t?e.parent:vF(e),getBoundingClientRect:e=>e.layoutBox,operateVideo:(e,t)=>{["play","pause","stop"].includes(t)&&e[t]()},animate:(e,t)=>Promise.all([e.animate(t),Js(t.duration)]),getTextWidth:(e,t)=>zF.getTextWidth(e,t),onGlobalEvent:()=>{},offGlobalEvent:()=>{}}}),i.androidAppState=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.isReady=!1,i.isShow=!1,i.emitter.on("ready",(()=>i.isReady=!0)),i.lastCloseTime=0,i.autoCloseTime=15,i.launchTime=15,i.frequencyTime=15,i.startExposureTime=0,i.clickCount=0,i.lastLandingTime=0,i.lastJsapiName="",i.lastJsapiStatus=0,i.lastJsapiCostTime=0,i.isLandingPage=!1,i.landingPageCostTime=0,i.hideTime=0,i.showTime=0,i.hideDuration=0,i.isClosing=!1,i.clickFirstGradeTime=0,i.videoFirstPlayTime=0,i.isEnded=!1,i.fetchBeginTime=0,i.videoCurrentTime=0,i.videoDuration=0,i.isPlaying=!1,i.isFirstPlay=!1,i.preloadVideo=!1,i.preloadVideoSuccess=!1,i.keepAliveTimer=null,i.hasEmitShowHalf=!1,i.hasEmitHideHalf=!0,i.tmplContainer=null,i.isData=!1,i.isSwitched=!1,i.onceSwitched=!1,i.startShow=0;var{openType:r,createWebviewId:n,lastWebviewId:a,currentWebviewId:o}=i.adProxy.getWebviewInfo(),s=[r,a,o,n];i.outRoute="",i.lastRoute="",i.enterTime=0,i.outTime=0,n===o&&(i.enterRoute=s.join("|"),i.enterTime=+new Date,i.lastRoute="enter"),n===a&&(i.outRoute=s.join("|"),i.outTime=+new Date,i.lastRoute="out"),i.handleAdTemplateEvent=e=>{TJ.call(this,e)},$X.call(this),DX||(Es((e=>{if(!yJ.call(this)){var{createWebviewId:t,lastWebviewId:r,currentWebviewId:n}=i.adProxy.getWebviewInfo(),a=[e.openType,r,n,t];t===n&&(i.enterRoute=a.join("|"),i.enterTime=+new Date,i.onceSwitched=!0,i.lastRoute="enter"),t===r&&(i.outRoute=a.join("|"),i.outTime=+new Date,i.onceSwitched=!0,i.lastRoute="out"),i.isShow&&["navigateBack"].includes(e.openType)&&t===r&&pJ.call(this,4)}})),hZ((()=>{if(!yJ.call(this)){var{openType:e,createWebviewId:t,currentWebviewId:r}=i.adProxy.getWebviewInfo();["navigateTo","navigateBack","switchTab"].includes(e)&&t===r&&(i.isSwitched=!0,i.isShow&&pJ.call(this,4))}})),vA((e=>{!yJ.call(this)&&i.isShow&&i.data&&e.size&&(SX=e.size.screenHeight,CX=e.size.screenWidth,PX=e.deviceOrientation,i.data.useTemplate?eJ.call(this).then((()=>{i.adTemplateRef.emitEvent(jH.HOSTMESSAGE,{message:"screenResize"})})):XX.call(this))}))),i.handleEnterForeground=()=>{if(!yJ.call(this)&&i.data){i.ad_type===OX&&i.isShow&&AJ.call(this);var e=PX;YX.call(this),e!==PX&&i.isShow&&(i.data.useTemplate?eJ.call(this):XX.call(this)),i.hideTime>0&&i.isShow&&(i.hideDuration+=+new Date-i.hideTime),nJ.call(this)}},i.handleEnterBackground=()=>{if(!yJ.call(this)&&i.isShow&&(i.hideTime=+new Date,i.ad_type===OX)){bJ.call(this);i.adProxy.reportVideo({playType:i.isPlaying?"partial":"complete",conditionType:"exit",playDuration:i.videoCurrentTime,videoDuration:i.videoDuration,muted:IJ.call(this)})}},T_(i.handleEnterForeground),Xm(i.handleEnterBackground),ce("onVideoResourceLoad",(e=>{!i.isShow&&i.ad_type===OX&&i.adMedia&&i.adMedia.src===e.resource&&(i.adProxy.reportAdIDKey({key:vB.INTERSTITIAL_VIDEO_PRELOAD_SUCCESS}),i.preloadVideoSuccess=!0,i.adMedia.src=e.resource)}))}load(){if(yJ.call(this))return Promise.reject({errMsg:MX});var e=wX(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():$X.call(this)}show(e){return yJ.call(this)?Promise.reject({errMsg:MX}):cJ.call(this,e)}destory(){vJ.call(this)}destroy(){vJ.call(this)}onError(e){yJ.call(this)||wX(this).emitter.on("_error",e)}offError(e){yJ.call(this)||wX(this).emitter.off("_error",e)}onLoad(e){yJ.call(this)||wX(this).emitter.on("load",e)}offLoad(e){yJ.call(this)||wX(this).emitter.off("load",e)}onClose(e){yJ.call(this)||wX(this).emitter.on("close",e)}offClose(e){yJ.call(this)||wX(this).emitter.off("close",e)}getSplashAdShowStatus(){return wX(this).adProxy.getSplashAdShowStatus()}}var PJ=e=>!(e.isDestroyed()||!IL(e,["rootElement","layoutBox"]));class DJ{constructor({manager:e,adProxy:t,emitter:i}){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.adProxy=void 0,this.manager=void 0,this.emitter=void 0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.landManager=void 0,this.handleEnterForeground=()=>{var{rootComponent:e}=this.manager;!this.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(jL.SHOWHALF),e.emitAdCustomEvent(KL.ADSHOWHALF)))},this.handleEnterBackground=()=>{var{rootComponent:e}=this.manager;!this.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(jL.HIDEHALF),e.emitAdCustomEvent(KL.ADHIDEHALF)))},this.handleAdCustomEvent=e=>{switch(e.action){case KL.ADVIDEOPLAY:this.checkVideoViewableExposure(!0);break;case KL.ADVIDEOPAUSE:this.checkVideoViewableExposure(!1);break;case KL.REPORTVIDEOPLAY:this.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case KL.FEEDBACKREPORT:this.reportAdFeedbackData(e.value);break;case KL.REPORTENDPAGE:this.reportEndPage(e.value.data);break;case KL.REPORTMMDATA:e.value.id&&e.value.data&&this.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case KL.BTNTAP:this.manager.rootComponent&&this.manager.rootComponent.emitComponentEvent(jL.ADBUTTONTAP),this.handleClick(e.value.event,1,!0);break;case KL.CHANGEMULTISHOW:this.multiShowList=e.value.list,this.checkExposure()}},this.manager=e,this.adProxy=t,this.emitter=i,this.bindEvent()}setMultiShowList(e=[]){this.multiShowList=[...e]}destroy(){this.unbindEvent()}reset(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}bindEvent(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),T_(this.handleEnterForeground),Xm(this.handleEnterBackground)}unbindEvent(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),C_(this.handleEnterForeground),Jm(this.handleEnterBackground)}judgeTriggerClick(e,t=!0){if(this.manager.isDestroyed())return!1;var i=this.adProxy.isTriggerClick(e),r=i?0:1;return t&&this.reportTouchClick(e,r),i}reportTouchClick(e,t){if(PJ(this.manager)){var{width:i,height:r}=this.manager.rootElement.layoutBox,n=0;[0,2,3].includes(t)&&(this.clickCount+=1,n=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:IL(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:n,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:i||0,ad_height:r||0,press_interval:e.pressInterval,block_click:t})}}handleClick(e,t,i=!1){if(!this.manager.isDestroyed()&&this.manager.adData){var{appInfo:{urlScheme:r},product_type:n,dest_type:a}=this.manager.adData;this.manager.clearAdTimer(),n===ZB.OPEN_PLATFORM_APP_MOB&&L&&this.landManager.downloadState===_B.INSTALLED&&r&&r.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(r).catch((()=>{})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):B&&n===OB.MINI_GAME&&6===a?Promise.race([this.reportClick(e),Js(500)]).then((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:i})})).catch((()=>{this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:i})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:i}))}}reportClick(e){if(PJ(this.manager)){var{left:t,top:i,width:r,height:n}=this.manager.rootElement.layoutBox,{adCustomId:a}=this.manager,o=(e=>d$.videoDataMap[e]||{})(a);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-t,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:t,top:i,width:r,height:n,videoData:o})}}isClickLimit(e,t=0){var{adProxy:i,manager:{rootElement:r}}=this;if(!r)return!1;var{width:n,height:a}=r.layoutBox,{left:o,top:s}=r.getAbsolutePosition(),l=!1,u=0;i.isValidCondition("widget_gray_time_limit")&&(u=100*(this.manager.adData.condition.widget_gray_time_limit||1)),u>0&&Date.now()-this.showedExposureTime<u&&(l=!0,i.reportAdMonitorData(EB.AD_LIMIT_TIME,{clickType:t}));var c=0;return i.isValidCondition("widget_gray_bd_limit")&&(c=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==M&&e&&c>0&&(e.absoluteEndX-o<c||o+n-e.absoluteEndX<c||e.absoluteEndY-s<c||s+a-e.absoluteEndY<c)&&(l=!0,i.reportAdMonitorData(EB.AD_LIMIT_BOUNDARY)),l}reportExposure({isViewable:e}){var t=this;return zo()((function*(){if(PJ(t.manager)){var{rootElement:i,rootComponent:r,isMulti:n}=t.manager,{left:a,top:o,width:s,height:l}=i.layoutBox,u={left:a,top:o,width:s,height:l};t.adProxy.isOriginExposureArea(u)||t.adProxy.reportAdMonitorData(EB.ORIGIN_EXPOSURE_ERROR);var c=t.adProxy.isViewableExposureArea(u);if(e&&!c&&t.adProxy.reportAdMonitorData(EB.VIEWABLE_EXPOSURE_ERROR),n){var d=e?t.multiViewableExposureList:t.multiExposureList,h=t.multiShowList.filter((e=>!d.has(e)));h.length&&(h.forEach(d.add,d),r.emitComponentEvent(e?jL.VIEWABLEEXPOSURE:jL.EXPOSURE,{exposureList:h}),yield t.adProxy.reportExposure(K()(K()({},u),{},{multiList:h,isMulti:n,exposureType:e?"viewable":"showed"})))}else e?r.emitComponentEvent(jL.VIEWABLEEXPOSURE):r.emitComponentEvent(jL.EXPOSURE),yield t.adProxy.reportExposure(K()(K()({},u),{},{exposureType:e?"viewable":"showed"}))}}))()}checkExposure(){var e=this;return zo()((function*(){if(!e.manager.isDestroyed()){if(!PJ(e.manager))return yield Js(0),void(yield e.checkExposure());var{rootComponent:t,isMulti:i}=e.manager,r=t.isShow(),{exposureUntilVideoPlay:n}=t;(i||!e.isExposured&&r)&&(e.isExposured=!0,e.showedExposureTime=Date.now(),e.reportExposure({isViewable:!1})),r&&!e.hasEmitShowHalf?(e.hasEmitShowHalf=!0,t.emitComponentEvent(jL.SHOWHALF),t.emitAdCustomEvent(KL.ADSHOWHALF)):r||(e.hasEmitShowHalf=!1,t.emitComponentEvent(jL.HIDEHALF),t.emitAdCustomEvent(KL.ADHIDEHALF)),n||(r?e.exposureTimer=setTimeout((()=>{var r=t.isShow();(i||!e.isViewableExposured&&r)&&(e.isViewableExposured=!0,e.adProxy.isViewable=!0,e.reportExposure({isViewable:!0}))}),1e3):e.exposureTimer&&clearTimeout(e.exposureTimer))}}))()}checkVideoViewableExposure(e){var{rootElement:t,rootComponent:i}=this.manager;if(!this.manager.isDestroyed()&&t&&i){var r=i.isShow(),{exposureUntilVideoPlay:n}=i,{left:a,top:o,width:s,height:l}=t.layoutBox;n&&(r&&e?this.exposureTimer=setTimeout((()=>{this.isViewableExposured||(this.isViewableExposured=!0,this.adProxy.isViewable=!0,this.adProxy.reportExposure({left:a,top:o,width:s,height:l,exposureType:"viewable"}),i.emitComponentEvent(jL.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}}reportAntifraud(e,t){var i=this;return zo()((function*(){var r;if(yield i.manager.ready(),PJ(i.manager)){var{width:n,height:a}=i.manager.rootElement.layoutBox;i.adProxy.reportAntifraud({click_button:e,cost_type:null!==(r=i.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,slotid:i.manager.getSlotId(),is_game:UF.isWaGame?1:0,pageentertime:+new Date(i.adProxy.getProgramStartTime()),ad_width:n||0,ad_height:a||0,clientexptime:i.showedExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX||0),pos_y:Math.round(t.absoluteY||0),screen_width:UF.screenWidth,screen_height:UF.screenHeight})}}))()}reportCloseAction(e){if(!this.manager.isDestroyed()){var t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:UF.isWaGame?1:0,costtype:IL(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}}reportAdFeedbackData({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){this.manager.isDestroyed()||(e&&!i&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:UF.screenWidth,adHeight:UF.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?this.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?Date.now():0,feedbackReason:n}))}reportFollow(e){if(!this.manager.isDestroyed())return e.then((e=>/ok/.test(e.errMsg)?this.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?this.adProxy.reportFollow({result:"cancel"}):void 0)).catch((()=>this.adProxy.reportFollow({result:"fail"})))}reportVideoPlay(e,t,{playDuration:i,isMuted:r,videoDuration:n}){this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:i,videoDuration:n,muted:r})}reportEndPage({ace_type:e,exposure_duration:t=0}={}){this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:IL(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:UF.isWaGame?1:0,ace_type:e,exposure_duration:t})}reportTimePoints(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:IL(this.adProxy,["adData","data","is_cpm"])?1:2})}}class RJ{constructor({manager:e,reporter:t}){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=_B.DEFAULT,this.downloadProgress=0,this.manager=void 0,this.reporter=void 0,this.adProxy=void 0,this.manager=e,this.adProxy=e.adProxy,this.reporter=t}reset(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}checkAdState(){var e=this;return zo()((function*(){if(!e.manager.isDestroyed()){if(yield Js(10),e.isLandingPage){var t;e.adProxy.setTimePoint("p11"),e.lastJsapiStatus=0,e.isLandingPage=!1;var i=Date.now();e.landingPageCostTime=e.hideTime?i-e.hideTime:0,e.adProxy.reportLandingTime({slotId:e.manager.getSlotId(),costType:uB(e.adProxy,["adData","data","is_cpm"])?1:2,openTime:e.hideTime,closeTime:i,stayTime:e.landingPageCostTime,jsapiName:e.lastJsapiName,clickTime:e.lastLandingTime,clkCnt:e.reporter.clickCount,retCode:e.lastJsapiStatus,costTime:e.lastJsapiCostTime,actTypeInt:1}),null!==(t=e.manager.rootComponent)&&void 0!==t&&t.hideAfterLanding&&e.manager.hide()}e.manager.isShow&&e.manager.setAdTimer()}}))()}checkFollow(){var e=this;return zo()((function*(){var{adData:t}=e.manager,i=uB(t,["button_action","text_type"],0),r=yield e.adProxy.checkFollow(t.app.uin);0===i&&e.manager.updateButtonText({text:r?"查看":t.button_action.button_text}),e.adProxy.data.biz_info&&(e.adProxy.data.biz_info.is_subscribed=r?1:0)}))()}checkAppInstallState(){var e=this;return zo()((function*(){if(!e.manager.isDestroyed()){var{appInfo:{apkName:t,versionCode:i,urlScheme:r}}=e.manager.adData;try{var n=yield e.adProxy.getInstallState(t);n.isInstalled&&(void 0===n.versionCode||n.versionCode>=i)&&(e.downloadState=_B.INSTALLED,e.downloadProgress=0,e.adProxy.setAppInstallState(!0),r&&r.trim().length>0?e.manager.updateButtonText({text:"进入应用"}):e.manager.updateButtonText({text:"查看应用"}))}catch(e){}}}))()}landing(e){if(!this.manager.isDestroyed()){this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:uB(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});var t=this.adProxy.land(e),i=uB(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===ZB.WECHAT&&uB(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(t.then((e=>{var t=/ok/.test(e.errMsg);t&&0===i&&(this.manager.updateButtonText({text:"查看公众号"}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=1),this.adProxy.reportAdIDKey({key:EB.FOLLOW_SUCCESS})),e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r,n=Date.now();(this.lastJsapiStatus=0,this.lastJsapiCostTime=n-this.lastLandingTime,"private_addContact"===this.lastJsapiName)&&this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:null!==(r=this.adProxy.data)&&void 0!==r&&r.is_cpm?1:2,openTime:this.lastLandingTime,closeTime:n,stayTime:this.lastJsapiCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"});this.manager.isShow&&this.manager.setAdTimer()})).catch((()=>{this.lastJsapiStatus=1})),this.reporter.reportFollow(t)):t.then((e=>{e.errMsg&&(this.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(this.lastJsapiName)?this.isLandingPage=!0:this.lastJsapiStatus=0,this.lastJsapiCostTime=Date.now()-this.lastLandingTime})).catch((()=>{this.lastJsapiStatus=1}))}}}var OJ=new WeakMap,kJ=e=>OJ.get(e);var MJ="customAd has been destroyed",NJ=1;class LJ{constructor({adUnitId:e,adIntervals:t=0,left:i,top:r,width:n,height:a,fixed:o,style:s}){if(this.adUnitId=void 0,this.adCustomId=void 0,this.adProxy=void 0,this.reporter=void 0,this.landManager=void 0,this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new C$,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.slotId=void 0,this.adIntervals=void 0,this.adTimer=null,this.readyResolve=new Set,this.adPosition=void 0,this.isMulti=!1,this.handleReady=()=>{if(!this.isReady){for(var e of this.readyResolve)e();this.readyResolve.clear(),this.isReady=!0}},this.handleEnterBackground=()=>{this.landManager.hideTime=Date.now(),this.clearAdTimer()},this.handleEnterForeground=()=>{this.landManager.checkAdState(),this.landManager.hideTime&&(this.reporter.hideDuration+=Date.now()-this.landManager.hideTime)},this.handleAdCustomEvent=e=>{var t;switch(e.action){case KL.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&this.emitter.emit(e.value.eventName,e.value.detail||{});break;case KL.SHOWFEEDBACK:null===(t=this.rootComponent)||void 0===t||t.showFeedback();break;case KL.FEEDBACKBTNTAP:this.adProxy.openFeedbackUrl(wW.isWaGame?1003:1005);break;case KL.HIDEAD:this.hide();break;case KL.REPORTTIMEPOINT:e.value.key&&this.adProxy.setTimePoint(e.value.key);break;case KL.ADSHOWHALF:this.isShow=!0;break;case KL.ADHIDEHALF:this.isShow=!1;break;case KL.CHECKEXPOSURE:this.reporter.checkExposure();break;case KL.LANDAD:var{index:i,event:r}=e.value;if(this.reporter.isClickLimit(r))return;this.isMulti&&this.adProxy.setCurrentData(i),this.reporter.handleClick(r,1,!1)}},this.handleLoad=e=>this.emitCallback("load",e),this.handleError=e=>this.emitCallback("error",e),this.handleClose=()=>this.emitCallback("close"),this.handleHide=()=>this.emitCallback("hide"),this.handleVideoDislike=()=>this.emitCallback("videodislike"),this.onLoad=e=>this.callbacks.load.push(e),this.onError=e=>this.callbacks.error.push(e),this.onClose=e=>this.callbacks.close.push(e),this.onHide=e=>this.callbacks.hide.push(e),this.onVideoDislike=e=>this.callbacks.videoDislike.push(e),this.offLoad=e=>this.removeCallback("load",e),this.offError=e=>this.removeCallback("error",e),this.offClose=e=>this.removeCallback("close",e),this.offHide=e=>this.removeCallback("hide",e),this.offVideoDislike=e=>this.removeCallback("videodislike",e),e||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=e,this.slotId="4071202390577885",this.adCustomId=`AD_CUSTOM_${NJ}`,NJ+=1,this.adPosition={left:i,top:r,width:n,height:a,fixed:o},s&&"object"==typeof s){for(var l of["left","top","width","height","fixed"])null!=s[l]&&(this.adPosition[l]=s[l])}bi()&&delete this.adPosition.fixed,this.adProxy=new HY({adUnitId:e,adType:this.adType}),this.reporter=new DJ({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new RJ({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof t?t:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}getSlotId(){return this.slotId}bindEvent(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),T_(this.handleEnterForeground),Xm(this.handleEnterBackground)}unbindEvent(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),C_(this.handleEnterForeground),Jm(this.handleEnterBackground)}fetchAndRender({isAdInterval:e=!1,autoUnmount:t=!1}={}){var i=this;return zo()((function*(){try{var r,n,[a,o]=yield Promise.all([i.adProxy.fetch(e),i.getSystemInfo(),FF?Promise.resolve(UF):new Promise((e=>{k.onReady((()=>{FF=!0,UF.deviceOrientation=RU();var t=ps();UF.screenWidth=t.screenWidth||0,UF.screenHeight=t.screenHeight||0,UF.isWaGame=bi(),e(UF)}))}))]);t&&i.resetState(),i.systemInfo=o,i.adData=a,i.adDatas=i.adProxy.datas||[],i.template=i.getTemplateFromAdData(a),i.tplConfig=(null===(r=i.template)||void 0===r?void 0:r.tplConfig)||{},i.checkSize(),yield i.render(),i.adProxy.reportAdMonitorData(EB.RENDER_SUCCESS);var s={errMsg:"load advertisement success"};null!==(n=i.rootComponent)&&void 0!==n&&n.exportAid&&(s.aid=i.adData.aid),i.emitter.emit("load",s),i.fetchedError=null,i.adProxy.preloadLanding()}catch(e){i.adProxy.reportAdMonitorData(EB.RENDER_FAILED,e);var l=null!=e&&e.errCode?e:{errCode:gB.ERR_RENDER,errMsg:"customAd render failed"};i.fetchedError=l,i.emitter.emit("error",l)}}))()}getTemplateFromAdData(e){return e.template}checkSize(){if(this.tplConfig){var{tplConfig:e}=this,{width:t}=this.adPosition;null==t&&(t=wW.screenWidth),t=Number(t);var i=e.minWidth||0,r=e.maxWidth||0,n=e.baseWidth||375,a=Math.min(wW.screenWidth,Math.max(i,t));r&&(a=Math.min(a,r)),0===a&&(this.adProxy.reportAdMonitorData(EB.WIDTH_GET_ERROR,{unitId:this.adUnitId}),v$(n,n)),this.adPosition.width=a,v$(a,n)}}reload(){}updateButtonText({text:e,progress:t}){var i;null===(i=this.rootComponent)||void 0===i||i.emitAdCustomEvent(KL.CHANGEADBTNTEXT,{text:e||"",progress:t||0})}getSystemInfo(){return wW}ready(){return new Promise(((e,t)=>{var i=()=>{this.fetchedError?t(this.fetchedError):e()};this.isReady?i():this.readyResolve.add(i)}))}removeCallback(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((e=>e!==t)):[])}emitCallback(e,t){if(this.callbacks[e])for(var i of this.callbacks[e])"function"==typeof i&&i(t)}show({branchId:e,branchDim:t}={}){var i=this;return zo()((function*(){if(i.isDestroyed())throw{errMsg:MJ};if(i.isShow||i.isShowing)throw{errMsg:"the advertisement has shown"};i.isShowing=!0,e?i.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):i.adProxy.resetAnalyseBranchInfo();try{yield i.ready(),i.rootComponent&&i.rootComponent.show(),i.setAdTimer()}finally{i.isShowing=!1}}))()}setAdTimer(){var e,t;this.rootComponent&&!this.rootComponent.enableTimer||(t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:null!==(e=this.adData)&&void 0!==e&&e.refreshTime?1e3*this.adData.refreshTime:null)&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((()=>this.refetch(!0)),t))}clearAdTimer(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}refetch(e=!1){var t=this;return zo()((function*(){if(!t.isDestroyed()&&t.isShow)try{yield t.fetchAndRender({isAdInterval:e,autoUnmount:!0}),yield t.show(),t.adProxy.reportAdMonitorData(EB.REFETCH_SUCCESS),t.rootElement&&(yield t.rootElement.nextLayout(),t.reporter.checkExposure())}catch(e){t.adProxy.reportAdMonitorData(EB.REFETCH_FAILED,e);var i={errCode:gB.ERR_RENDER,errMsg:"customAd render failed"};t.emitter.emit("error",i)}}))()}hide(e=!1){var t=this;return zo()((function*(){var i;if(t.isDestroyed())throw{errMsg:MJ};if(t.isShow&&!t.isHiding){if(t.isHiding=!0,null===(i=t.rootComponent)||void 0===i||i.hide(),t.clearAdTimer(),e)t.emitter.emit("hide");else{t.isReady=!1,t.emitter.emit("close"),t.resetState(),t.adProxy.setTimePoint("p14"),t.reporter.reportTimePoints();var r=!1;t.rootComponent&&(r=t.rootComponent.getRootData("refetchable")),r?(t.unmount(),yield t.fetchAndRender()):yield t.destroy()}t.isHiding=!1}}))()}destroy(){var e=this;return zo()((function*(){if(!e.isDestroyed()){e.isDestroy=!0;try{yield e.ready()}catch(e){}e.clearAdTimer(),e.unbindEvent(),e.resetState(),e.callbacks={load:[],error:[],close:[]},e.reporter.destroy()}}))()}isDestroyed(){return this.isDestroy}canHideAd(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}resetState(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}emitRender(e){return this.rootComponent?(NF(this.rootComponent,e),this.rootComponent):MF(T$,e)}render(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(EB.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}initialMultiLists(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){var{multiShowList:e}=this.rootComponent;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((e=>+e)))}}unmount(){this.rootComponent&&(LF(this.rootComponent),this.rootElement=null,this.rootComponent=null)}renderEmpty(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),yU.nextLayout()}}var BJ=e=>kJ(e);class FJ extends class{constructor(e,...t){var i=new e(...t);OJ.set(this,i)}}{constructor(e){super(LJ,e),this.isDestroy=!1}destroy(){var e=this;return zo()((function*(){var t;e.isDestroy||(yield BJ(e).destroy(),t=e,OJ.delete(t),e.isDestroy=!0)}))()}hide(){var e=this;return zo()((function*(){var t=BJ(e);if(!t.canHideAd())throw{errMsg:"the advertisement don't support hide"};yield t.hide(!0)}))()}isShow(){return BJ(this).isShow}}((e,t)=>{var i=function(t){e.prototype[t]=function(...e){return kJ(this)[t](...e)}};for(var r of t)i(r)})(FJ,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]);var UJ=i(725),WJ=0,GJ=0,VJ=M,jJ=B,HJ={},zJ=[],YJ=!0,$J=7070083760581921;k.onReady((()=>{var e=ps();WJ=e.screenWidth,GJ=e.screenHeight,(YJ=bi())&&(bm.onTouchStart((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&((HJ={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),HJ.touchStartPosY=Math.round(e.changedTouches[0].clientY),HJ.touchEndPosX=0,HJ.touchEndPosY=0,HJ.touchStartTime=+new Date,HJ.touchInterval=0)})),bm.onTouchEnd((e=>{e&&e.changedTouches&&e.changedTouches.length>0&&(HJ.touchEndPosX=Math.round(e.changedTouches[0].clientX),HJ.touchEndPosY=Math.round(e.changedTouches[0].clientY),HJ.touchInterval=+new Date-HJ.touchStartTime,zJ.length>=10&&zJ.shift(),zJ.push(HJ))})))}));var qJ,QJ=5,ZJ=8,KJ=function(e){return a0.call(this).then((()=>{var t=rA(this),{left:i,top:r,width:n,height:a}=t.container.layoutBox,o={slotid:$J,ScreenHeight:GJ,ScreenWidth:WJ,PageY:r,PageX:i,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,TimeMs:+new Date};return e=Object.assign({},o,e),t.adProxy.reportAbnormalDetect(e)}))},XJ=function(e,t=!0){var i=rA(this).adProxy.isTriggerClick(e),r=i?0:1;return t&&l0.call(this,e,r),i},JJ=function(e){var t=rA(this),{left:i,top:r,width:n,height:a}=t.container.layoutBox,o=!1,s=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(s=100*(t.data.condition.widget_gray_time_limit||1)),s>0&&+new Date-t.showedExposureTime<s&&(o=!0,t.adProxy.reportAdMonitorData(48,{slotid:$J}));var l=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(l=t.data.condition.widget_gray_bd_limit||10),e&&l>0&&(e.absoluteEndX-i<l||i+n-e.absoluteEndX<l||e.absoluteEndY-r<l||r+a-e.absoluteEndY<l)&&(o=!0,t.adProxy.reportAdMonitorData(47,{slotid:$J})),o},e0=function(e,t,i){for(var r=rA(this),n=0;n<r.gridCount;n++)"item"===e?r[`gridItem${n}`].style[t]=i:"icon"===e?r[`gridItemIcon${n}`].style[t]=i:"name"===e&&(r[`gridItemName${n}`].style[t]=i)},t0=function(){var e=rA(this);return Promise.resolve().then((()=>{e.animateDoms.forEach((t=>{e[t].animate({scaleWidth:1,scaleHeight:1,duration:400}).catch((i=>{e[t].style.scaleWidth=1,e[t].style.scaleHeight=1}))}))}))},i0=function(e,t){return i=>{var r=rA(this);if(r.adProxy.setCurrentData(e),XJ.call(this,i)&&!JJ.call(this,i)){var n=r.adProxy.data,{product_type:a,dest_type:o}=n;jJ&&46===a&&6===o?Promise.race([c0.call(this,i,e,t),Js(500)]).then((()=>{g0.call(this)})).catch((()=>{g0.call(this)})):(c0.call(this,i,e,t),g0.call(this))}}},r0=function(){var e=rA(this),{outer:t,inner:i,scale:r}=f0.call(this),n=e.datas.map(((e,t)=>{var i=e.weapp_info||{};return{name:SL(i.nick_name,10),url:i.head_img||""}})),{template:a,style:o,scaleDoms:s,animateDoms:l}=((e,t)=>{var i={container:{position:"absolute",overflow:"hidden",borderRadius:8,hidden:!0},topContainer:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:24,paddingLeft:12,paddingRight:12,paddingTop:8},gridTitle1:{width:36,height:16,lineHeight:16,fontSize:12},gridTitle2:{width:24,height:16,lineHeight:16,fontSize:12},gridTitleSplitLine:{width:2,height:16,lineHeight:16,fontSize:10,textAlign:"center",paddingRight:8,paddingLeft:8},gridContentContainerMask:{position:"absolute",top:0,left:0,right:0,bottom:0},gridFeedbackIconWarp:{display:"flex",height:8,width:16,flexDirection:"row",justifyContent:"center",alignItems:"center"},gridFeedbackIcon:{width:10,height:6},gridFeedbackArea:{display:"flex",height:16,width:50,flexDirection:"row",justifyContent:"start",alignItems:"center"},adFeedbackList:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adAffectBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:92,height:1,backgroundColor:"#E0E0E0"}},r=[],n=[],a=[],o=(t,o)=>{r.push(`<view id="grid-item${t}">\n        <image src="${o.url}" id="grid-item-icon${t}"></image>\n        <text id="grid-item-name${t}" value="${o.name}"></text>\n      </view>`),a.push(`gridItem${t}`),a.push(`gridItemIcon${t}`),a.push(`gridItemName${t}`),n.push(`gridItem${t}`),n.push(`gridItemIcon${t}`),n.push(`gridItemName${t}`),i[`gridItem${t}`]={display:"flex",flexDirection:"column",alignItems:"center",width:5===e?60:70},i[`gridItemIcon${t}`]={width:48,height:48,borderRadius:6},i[`gridItemName${t}`]={marginTop:5===e?8:6,fontSize:5===e?12:14,lineHeight:5===e?16:18,height:5===e?16:18,width:5===e?60:70,textAlign:"center",overflow:"hidden"}};if(r.push('<view id="container" click-state="false">'),r.push('<view id="grid-content-container-mask"></view>'),r.push('<view id="top-container" bubble-event="true">\n                      <text id="grid-title1" value="小游戏"></text>\n                      <text id="grid-title-split-line" value="|"></view>\n                      <view id="grid-feedback-area">\n                        <text id="grid-title2" value="广告" bubble-event="true"></text>\n                        <view id="grid-feedback-icon-warp" bubble-event="true">\n                          <image id="grid-feedback-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon.png"></image>\n                        </view>\n                      </view>\n                    </view>'),n.push("topContainer"),n.push("gridTitle1"),n.push("gridTitle2"),n.push("gridTitleSplitLine"),n.push("gridFeedbackIconWarp"),n.push("gridFeedbackArea"),n=[...n,"adFeedbackMenu","adDislikeBtn","adFeedbackBtn","adAffectBtn","adFeedbackList","adDismatchBtn","adDuplicateBtn","adQualityBtn"],5===e){r.push('<view id="grid-content-container">'),i.gridContentContainer={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:12,paddingLeft:10.5,paddingRight:10.5,paddingBottom:12},n.push("gridContentContainer");for(var s=0;s<e;s++)o(s,t[s]);r.push("</view>")}else if(8===e){r.push('<view id="grid-content-container">'),i.gridContentContainer={position:"relative",paddingTop:16,paddingLeft:14,paddingRight:14,paddingBottom:16};for(var l=0;l<2;l++){r.push(`<view id="grid-count8-line${l}">`),i[`gridCount8Line${l}`]={display:"flex",flexDirection:"row",justifyContent:"space-between"};for(var u=0;u<4;u++){var c=4*l+u;o(c,t[c])}r.push("</view>")}i.gridCount8Line0.marginBottom=16,n.push("gridCount8Line0"),r.push("</view>")}return r.push('\n     <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  '),r.push("</view>"),{template:r.join(""),style:i,scaleDoms:n,animateDoms:a}})(e.gridCount,n),{root:u}=UJ(a);zY.call(this,u,o),"white"===this.adTheme?(e.gridContentContainerMask.style.backgroundColor="#ffffff",e.gridTitle1.style.color="#7F7F7F",e.gridTitle2.style.color="#7F7F7F",e.gridTitleSplitLine.style.color="#7F7F7F",e0.call(this,"name","color","#191919")):"black"===this.adTheme&&(e.gridContentContainerMask.style.backgroundColor="#1A1A1A",e.gridTitle1.style.color="#8c8c8c",e.gridTitle2.style.color="#8c8c8c",e.gridTitleSplitLine.style.color="#8c8c8c",e.gridFeedbackIcon.src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon_white.png",e0.call(this,"name","color","#FFFFFF")),e.scaleDoms=s,e.scaleDoms.forEach((t=>{e[t].style.scale=r})),e.animateDoms=l,e.animateDoms.forEach((t=>{e[t].style.scaleWidth=.7,e[t].style.scaleHeight=.7})),e.container.on("click",(e=>{}));for(var c=0;c<e.gridCount;c++)e[`gridItemIcon${c}`]&&e[`gridItemIcon${c}`].on("click",i0.call(this,c,"icon")),e[`gridItemName${c}`]&&e[`gridItemName${c}`].on("click",i0.call(this,c,"name"));e.gridFeedbackArea.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackList.style.hidden=!e.adFeedbackMenu.style.hidden||!e.adFeedbackList.style.hidden,e.adFeedbackMenu.style.hidden=!0,e.adFeedbackList.style.hidden||h0.call(this,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),e.adFeedbackBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adProxy.openFeedbackUrl(YJ?1007:1006),e.adFeedbackList.style.hidden=!0,h0.call(this,{secondGradeId:1,secondGradeDesc:"投诉"})))})),e.adDislikeBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackList.style.hidden=!0,e.adFeedbackMenu.style.hidden=!1,h0.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),e.adQualityBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,h0.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),d0.call(this)))})),e.adDuplicateBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,h0.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),d0.call(this)))})),e.adDismatchBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackMenu.style.hidden=!0,h0.call(this,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),d0.call(this)))})),e.adAffectBtn.on("click",(t=>{XJ.call(this,t,!1)&&(JJ.call(this,t)||(e.adFeedbackList.style.hidden=!0,h0.call(this,{secondGradeId:3,secondGradeDesc:"影响操作"}),d0.call(this)))})),e.container||e.adProxy.reportAdMonitorData(92),e.adProxy.setSlotData({gridScale:r})},n0=function(){var e=rA(this);try{var{left:t,top:i}=this.style,{outer:r,inner:n,scale:a}=f0.call(this),{type:o}=e.data;r0.call(this),e.adProxy.preloadLanding(),e.container.style.left=t,e.container.style.top=i,e.container.style.width=n.width,e.container.style.height=n.height,o0.call(this),Xv.add(e.container),e.emitter.emit("load"),e.container.ready().then((()=>{e.emitter.emit("ready")})).then((()=>{KJ.call(this,{type:1})}))}catch(t){return e.adProxy.reportAdMonitorData(91,t),Promise.reject({})}},a0=function(e){if(!e||"function"!=typeof e)return new Promise((e=>a0.call(this,e)));var t=rA(this);t.isReady?e():t.emitter.on("ready",e)},o0=function(){var e=rA(this),{opacity:t}=this.style;.5<=t&&t<=1?(this.style.opacity=t,e.gridContentContainerMask.style.opacity=t,e.gridFeedbackIcon.style.opacity=t):this.style.opacity=1},s0=function(){var e=rA(this),{left:t,top:i}=this.style,{inner:r,scale:n}=f0.call(this),{type:a,crt_size:o,product_type:s,use_style_data:l}=e.data;return this.style.width,this.style.height,Object.assign(e.container.style,r,{left:t,top:i}),e.scaleDoms.forEach((t=>{e[t].style.scale=n})),o0.call(this),e.container.nextUpdate().then((()=>Promise.resolve()))},l0=function(e,t=0){var i=rA(this);if(!b0.call(this)&&i.container&&i.container.layoutBox){var{width:r,height:n}=i.container.layoutBox,a=0;[0,2,3].includes(t)&&(i.clickCount++,a=i.clickCount);var o={slotid:$J,costtype:i.adProxy.data&&i.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(r,10)||0,ad_height:parseInt(n,10)||0,press_interval:e.pressInterval,block_click:t};return i.adProxy.reportTouchClick(o)}},u0=function(e){var t=rA(this),i=0,r=0,{slotData:n}=t.adProxy;try{if(5===n.gridCount)i=Math.round((61*e+40.5)*n.gridScale),r=Math.round(60*n.gridScale);else if(8===n.gridCount){var a=Math.floor(e/4),o=e%4;i=Math.round((77*o+44)*n.gridScale),r=Math.round((64+88*a)*n.gridScale)}}catch(e){}return{x:i,y:r}},c0=function(e,t,i){var r=rA(this);if(!b0.call(this)&&r.container&&r.container.layoutBox){var{left:n,top:a,width:o,height:s}=r.container.layoutBox,l=u0.call(this,t),u=r.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-a,pressInterval:e.pressInterval,left:n,top:a,width:o,height:s,clickAdIndex:t,clickAdPos:i,weappExtraData:{box_center_x:l.x,box_center_y:l.y,box_aid_list:r.adProxy.datas.map((e=>e.aid)),click_pos:i}});return y0.call(this,{stage:1002}),zJ=zJ.map((e=>`[${[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")}]`)),r.adProxy.reportBannerLastClick({lastClickArr:`[${zJ.join(",")}]`,expMs:r.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:n,top:a,width:o,height:s}),zJ=[],u}},d0=function(){this.hide(),_private.emitter.emit("close")},h0=function({firstGradeId:e=1,firstGradeDesc:t="广告角标",secondGradeId:i=0,secondGradeDesc:r="",feedbackReason:n=0}){if(!b0.call(this)){var a=rA(this),{left:o,top:s,width:l,height:u}=a.container.layoutBox;e&&!i&&(a.clickFirstGradeTime=+new Date),a.adProxy.reportAdFeedbackData({adWidth:WJ,adHeight:GJ,adPosX:0,adPosY:0,expTime:a.showedExposureTime,slotId:$J,firstGradeId:e,firstGradeDesc:t,firstGradeTime:e?a.clickFirstGradeTime:0,secondGradeId:i,secondGradeDesc:r,secondGradeTime:i?+new Date:0,feedbackReason:n})}},p0=function(e=!1){var t=rA(this);if(b0.call(this))return Promise.resolve();if(!t.container.layoutBox)return Js(0).then((()=>p0.call(this,e)));var{left:i,top:r,width:n,height:a}=t.container.layoutBox;if(r>GJ-1)return Promise.resolve();var o=!1===t.container.style.hidden;if(t.adProxy.isViewable=!!o,!t.isShowedExposureReported&&o){t.isShowedExposureReported=!0,t.showedExposureTime=+new Date;t.adProxy.reportExposure({left:i,top:r,width:n,height:a,isMulti:!0,multiList:Object.keys(t.datas).map((e=>+e)),exposureType:"showed"});t0.call(this)}if(r+a/2<=GJ&&!t.isViewableExposureReported&&o){if(!e)return Js(1e3).then((()=>p0.call(this,!0)));t.isViewableExposureReported=!0;t.adProxy.reportExposure({left:i,top:r,width:n,height:a,isMulti:!0,multiList:Object.keys(t.datas).map((e=>+e)),exposureType:"viewable"})}return Promise.resolve()},f0=function(){var e,t,i=rA(this);i.gridCount===QJ?t=(e=Math.min(345,WJ))/345*120:i.gridCount===ZJ&&(t=(e=Math.min(343,WJ))/343*216);var{width:r,height:n}=this.style,a=Xs({outer:{width:r=r||e,height:n=n||t},inner:{width:e,height:t},minScale:.8,maxScale:WJ/e,side:"width"}),o=i.lastRealWidth!==a.inner.width||i.lastRealHeight!==a.inner.height;return this.style.realWidth=i.lastRealWidth=a.inner.width,this.style.realHeight=i.lastRealHeight=a.inner.height,o&&i.emitter.emit("resize",a.inner),a},g0=function(e){var t=rA(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:$J,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.adProxy.land(e).then((e=>{e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((e=>{t.lastJsapiStatus=1}))},_0=function(e){if(!b0.call(this)){var t=rA(this);t.isClosed||t.adProxy.fetch(e).then((e=>(t.datas=e,t.data=t.adProxy.data,a0.call(this).then((()=>{t.container.style.hidden=!0})).then((()=>(t.isReady=!1,Xv.remove(t.container)))).then((()=>(t.isViewableExposureReported=!1,t.isShowedExposureReported=!1,t.showedExposureTime=0,t.adProxy.isViewable=!1,n0.call(this),a0.call(this)))).then((()=>b0.call(this)?a0.call(this):t.isHideBYCover?(t.lastDisplayAction="show",a0.call(this)):(t.isShow=!0,y0.call(this,{stage:1001}),Promise.resolve().then((()=>{t.container.style.hidden=!1,t.container.nextLayout((()=>p0.call(this))),m0.call(this)}))))).catch((e=>t.emitter.emit("_error",e)))))).catch((e=>t.emitter.emit("_error",e)))}},m0=function(){var e=rA(this);if(e.adIntervals>=30&&e.adIntervals<=3600){e.adTimer&&clearTimeout(e.adTimer);var t=1e3*e.adIntervals;e.adTimer=setTimeout((()=>_0.call(this,!0)),t)}},v0=function(){if(!b0.call(this)){var e=rA(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},y0=function({stage:e}){var t={adtype:4,stage:e};rA(this).adProxy.reportADFunnelModel(t)},A0=function(){if(!b0.call(this)){var e=rA(this);v0.call(this),this._destroyed=!0,KJ.call(this,{type:2}),a0.call(this).then((()=>e.updateResult)).then((()=>{C_(e.checkAdState),Jm(e.onHide),e.emitter.off("resize"),e.emitter.off("_error"),e.emitter.off("load"),Xv.remove(e.container),aA(this)}))}},b0=function(){return this._destroyed};class E0 extends oA{constructor({adUnitId:e,style:t={left:0,top:0,width:0,height:0,opacity:1},adIntervals:i=0,adTheme:r="white",gridCount:n=5}={}){super(),console.warn("格子广告位计划在2021年5月内下线，请尽快接入原生模板广告位替换，详情可查看MP流量主公告消息。");var a=rA(this);if(a.emitter=new ty,a.adProxy=new HY({adUnitId:e,adType:"grid"}),a.clickCount=0,a.landingCount=0,a.lastLandingTime=0,a.lastJsapiName="",a.lastJsapiStatus=0,a.lastJsapiCostTime=0,a.isLandingPage=!1,a.landingPageCostTime=0,a.hideTime=0,a.isShowedExposureReported=!1,a.isViewableExposureReported=!1,a.isReady=!1,a.isShow=!1,a.emitter.on("ready",(()=>a.isReady=!0)),a.isHideBYCover=!1,a.adCover=new Fq({adUnitId:e,adType:"grid"}),a.adIntervals="number"==typeof i?i:0,a.adTimer=null,a.showedExposureTime=0,a.clickFirstGradeTime=0,a.adCover.on(Mq,(()=>{b0.call(this)||a0.call(this).then((()=>{a.isShow&&!b0.call(this)&&(a.container.style.hidden=!0),a.isHideBYCover=!0,a.lastDisplayAction=""})).catch((e=>{}))})),a.adCover.on(Nq,(()=>{b0.call(this)||a0.call(this).then((()=>{a.isShow&&!b0.call(this)&&(a.container.style.hidden=!1),a.isHideBYCover=!1,"show"==a.lastDisplayAction?this.show():"hide"==a.lastDisplayAction&&this.hide()})).catch((e=>{}))})),a.lastRealWidth=0,a.lastRealHeight=0,a.updateResult=Promise.resolve(),this.adUnitId=e,-1!==[QJ,ZJ].indexOf(n))if(a.gridCount=n,-1!==["white","black"].indexOf(r)){this.adTheme=r,this.style={},this._destroyed=!1;var o=null;Object.keys(t).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:i=>{b0.call(this)||i!==t[e]&&(t[e]=i,a.updateResult=new Promise((e=>{clearTimeout(o),o=setTimeout(e,0)})).then((()=>a0.call(this))).then((()=>Promise.all([s0.call(this),a.container.nextLayout().then((()=>p0.call(this)))]))))}})})),this.style.realWidth=this.style.width,this.style.realHeight=this.style.height,a.adProxy.setSlotData({gridCount:n,adTheme:r,gridOpacity:this.style.opacity});var s=a.adProxy.fetch();s.catch((e=>a.emitter.emit("_error",e))),a.adFetchResult=s,a.adFetchResult.then((e=>{(a.emitter.emitter._events?Object.keys(a.emitter.emitter._events):[]).includes("_error")||"devtools"!==VJ?(a.datas=e,a.data=a.adProxy.data,n0.call(this)):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),a.checkAdState=()=>{a.adFetchResult.then((()=>{if(a.isLandingPage){a.lastJsapiStatus=0,a.isLandingPage=!1;var e=+new Date;a.landingPageCostTime=e-a.hideTime,a.adProxy.reportLandingTime({slotId:$J,costType:a.adProxy.data&&a.adProxy.data.is_cpm?1:2,openTime:a.hideTime,closeTime:e,stayTime:a.landingPageCostTime,jsapiName:a.lastJsapiName,clickTime:a.lastLandingTime,clkCnt:a.landingCount,retCode:a.lastJsapiStatus,costTime:a.lastJsapiCostTime,actTypeInt:1})}})).then((()=>{a.isShow&&!a.adTimer&&m0.call(this)})).catch((()=>{}))},T_(a.checkAdState),a.onHide=e=>{v0.call(this),a.hideTime=+new Date},Xm(a.onHide)}else console.error("您设置的adTheme参数有误");else console.error("您设置的gridCount参数有误")}show({branchId:e,branchDim:t}={}){if(b0.call(this))return Promise.reject({errMsg:"grid-ad has been destroyed"});var i=rA(this);return i.isHideBYCover?(i.lastDisplayAction="show",a0.call(this)):(i.isShow=!0,y0.call(this,{stage:1001}),e?i.adProxy.recordAnalyseBranchInfo({branchId:e,branchDim:t}):i.adProxy.resetAnalyseBranchInfo(),a0.call(this).then((()=>{i.container.style.hidden=!1,i.container.nextLayout((()=>p0.call(this))),m0.call(this)})))}hide(){if(!b0.call(this)){var e=rA(this);return e.isHideBYCover?(e.lastDisplayAction="hide",a0.call(this)):(e.isShow=!1,e.adProxy.isViewable=!1,a0.call(this).then((()=>{e.container.style.hidden=!0,v0.call(this)})))}}destory(){A0.call(this)}destroy(){A0.call(this)}onResize(e){b0.call(this)||rA(this).emitter.on("resize",e)}offResize(e){b0.call(this)||rA(this).emitter.off("resize",e)}onError(e){b0.call(this)||rA(this).emitter.on("_error",e)}offError(e){b0.call(this)||rA(this).emitter.off("_error",e)}onLoad(e){b0.call(this)||rA(this).emitter.on("load",e)}offLoad(e){b0.call(this)||rA(this).emitter.off("load",e)}}!function(e){e.self="self",e.native="native"}(qJ||(qJ={}));var w0;!function(e){e.hasDestroyed="cpsShopAd has been destroyed",e.renderModeSelf="cpsShopAd render-mode should be self",e.doExposureArgsTypeError="doExposure argument should be an object",e.exposureTypeError="exposureType should be showed or viewable",e.adListTypeError="adList should be an array",e.exposureUUIDError="uuid is unavailable or exposured",e.doClickArgsTypeError="doClick argument should be an object",e.clickUUIDError="uuid is unavailable",e.showFeedbackArgsError="showFeedback argument should be an object",e.showFeedbackDataError="no ad data, please invoke load before showFeedback"}(w0||(w0={}));var T0={type:"feedback",id:"cpsFeedback",options:{baseType:2,innerStyles:{container:{style:{padding:"0px 0px 0px 0px"}},feedbackTagContainer:{style:{padding:"1px 2px 1px 2px"}},feedbackTag:{style:{lineHeight:"10px",height:"10px",fontSize:"8px",textAlign:"center"}},feedbackIcon:{style:{hidden:!0,marginLeft:0}}}},style:{position:"absolute"}},C0=1,S0=e=>rA(e),I0=function(){return this._destroyed},x0=function(e){I0.call(this)||S0(this).adProxy.reportAdMonitorData(TB.CALL_ERROR,e);return Promise.reject({errMsg:e})},P0=function(){if(I0.call(this))return Promise.reject({errMsg:w0.hasDestroyed});var e=S0(this);return e.adProxy.fetch(!1,{},{cpsShopReqInfo:K()({},e.query),isAdunitTmpl:e.renderMode!==qJ.self}).then((t=>{try{var i=Object.keys(e.emitter.emitter).includes("_events")?Object.keys(e.emitter.emitter._events):[];if("devtools"===wW.platform&&!i.includes("_error"))return void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。");for(var r of t)void 0!==r.extBackComm.cpsProduct.uuid&&e.adProxy.reportAdMonitorData(TB.HAS_UUID),r.extBackComm.cpsProduct.uuid=C0,C0+=1;if(e.datas=e.adProxy.datas,e.renderMode===qJ.self){var n=t.map((e=>{var t=dB(e.extBackComm.cpsProduct);return t.exp_url&&delete t.exp_url,t.click_url&&delete t.click_url,hB(t),t}));return e.emitter.emit("load",n),n}return void e.emitter.emit("load")}catch(t){throw e.adProxy.reportAdMonitorData(TB.PARSE_ERROR,t),{}}}))},D0=function(e){var t=S0(this).datas.find((t=>t.extBackComm.cpsProduct.uuid===e));return null==t?void 0:t.extBackComm.cpsProduct},R0=function(e){return S0(this).datas.findIndex((t=>t.extBackComm.cpsProduct.uuid===e))},O0=function(e){var t;if(I0.call(this))return x0.call(this,w0.hasDestroyed);var i=S0(this);if(i.renderMode!==qJ.self)return x0.call(this,w0.renderModeSelf);if(!UL(e))return x0.call(this,w0.doExposureArgsTypeError);var{exposureType:r,adList:n}=e;if(!["showed","viewable"].includes(r))return x0.call(this,w0.exposureTypeError);if(!Array.isArray(n))return x0.call(this,w0.adListTypeError);var a=[];for(var o of n){var s=D0.call(this,o.uuid);s&&("showed"!==r||s.isShowedExposure?"viewable"!==r||s.isViewableExposure||(a.push(s),s.isViewableExposure=!0):(a.push(s),s.isShowedExposure=!0))}if(!a.length)return x0.call(this,w0.exposureUUIDError);var l={};try{l.s_cps_shop_exp_url=JSON.stringify(a.map((e=>e.exp_url)))}catch(e){return i.adProxy.reportAdMonitorData(TB.EXPURL_ERROR,e),Promise.resolve()}return i.adProxy.reportExposure({exposureType:r,extExposureComm:l}),setTimeout((()=>{try{i.adProxy.reportAdMonitorData(TB.EXPOSURE_DATA,{adList:n,reportList:a.map((e=>({uuid:e.uuid,trace_id:e.trace_id,product_id:e.product_id})))})}catch(e){}}),500),0===(null===(t=i.feedbackElements)||void 0===t?void 0:t.length)&&i.adProxy.reportAdMonitorData(TB.EXPOSURE_NOFEEDBACK),Promise.resolve()},k0=function(e){var t,i,r,n;if(I0.call(this))return x0.call(this,w0.hasDestroyed);var a=S0(this);if(a.renderMode!==qJ.self)return x0.call(this,w0.renderModeSelf);if(!UL(e))return x0.call(this,w0.doClickArgsTypeError);if(void 0===e.rect||void 0===e.click_pos){if("devtools"===wW.platform)return console.error("参数错误，当调用doClick时，需要传递`rect`和`click_pos`"),Promise.resolve();a.adProxy.reportAdMonitorData(TB.CLICK_INOF_ERROR)}var o=R0.call(this,e.uuid);if(-1===o)return x0.call(this,w0.clickUUIDError);a.adProxy.setCurrentData(o);var s=null===(t=a.adProxy.data)||void 0===t||null===(i=t.extBackComm)||void 0===i?void 0:i.cpsProduct;return s?(a.adProxy.reportClick({extClickComm:{cps_shop_click_url:s.click_url}}),null!==(r=s.wechat_app_info)&&void 0!==r&&r.app_id?(a.adProxy.data.weapp_info={appid:s.wechat_app_info.app_id},a.adProxy.landPage(xB.DEST_TYPE_WECHAT_APPLET,s.wechat_app_info.app_path,{isButton:!1})):s.h5_page?a.adProxy.landPage(xB.DEST_TYPE_OUTER,s.h5_page,{isButton:!1}):a.adProxy.reportAdMonitorData(TB.DEST_ERROR),0===(null===(n=a.feedbackElements)||void 0===n?void 0:n.length)&&a.adProxy.reportAdMonitorData(TB.CLICK_NOFEEDBACK),a.adProxy.reportAdMonitorData(TB.CLICK_DATA,{rect:e.rect||{},click_pos:e.click_pos||{}}),Promise.resolve()):x0.call(this,w0.clickUUIDError)},M0=1,N0=function(e){var t;if(I0.call(this))return x0.call(this,w0.hasDestroyed);var i=S0(this);if(i.renderMode!==qJ.self)return x0.call(this,w0.renderModeSelf);if(!UL(e))return x0.call(this,w0.showFeedbackArgsError);if(0===(null===(t=i.datas)||void 0===t?void 0:t.length))return x0.call(this,w0.showFeedbackDataError);var r=MF(a$,{manager:null,reporter:null,emitter:i.feedbackEmitter,adProxy:i.adProxy,template:T0,systemInfo:{},scope:{private:i},adData:i.adProxy.data,adDatas:i.adProxy.datas,adCustomId:`CPSFEEDBACK-${M0}`,isEmpty:!1},!1);M0+=1;var n=r.getRootElement();return n.style.left=e.left||0,n.style.top=e.top||0,i.feedbackElements.push(n),yU.add(n),yU.nextLayout()},L0=function(){if(!I0.call(this)){var e=S0(this);if(e.feedbackElements.length){for(var t of e.feedbackElements)t.referComponent&&LF(t.referComponent);e.feedbackElements=[]}}},B0=function(){if(!I0.call(this)){var e=S0(this);e.emitter.off("_error"),e.emitter.off("load"),L0.call(this),this._destroyed=!0,aA(this)}};class F0 extends oA{constructor({adUnitId:e,pluginId:t="",query:i={},renderMode:r=qJ.self}){super(),this._destroyed=void 0;var n=S0(this);n.emitter=new C$,this._destroyed=!1,n.adType="cpsShopAd",n.adUnitId=e,n.renderMode=r,n.query=i,n.isLoading=!1,n.adProxy=new HY({adUnitId:e,adType:"cpsShopAd",pluginAppid:t}),n.feedbackEmitter=new C$,n.feedbackElements=[]}load(){if(I0.call(this))return Promise.reject({errMsg:w0.hasDestroyed});var e=S0(this);if(e.isLoading)return Promise.reject({errMsg:"CpsShopAd is loading"});e.isLoading=!0;var t=P0.call(this);return e.adFetchResult=t.then((t=>(e.isLoading=!1,t))).catch((t=>{e.isLoading=!1;var i=-12001===t.errCode?{errMsg:"CpsShopAd fail no permission"}:t;throw e.emitter.emit("_error",i),i})),e.adFetchResult}onLoad(e){I0.call(this)||S0(this).emitter.on("load",e)}offLoad(e){I0.call(this)||S0(this).emitter.off("load",e)}onError(e){I0.call(this)||S0(this).emitter.on("_error",e)}offError(e){I0.call(this)||S0(this).emitter.off("_error",e)}doExposure(e){return O0.call(this,e)}doClick(e){return k0.call(this,e)}showFeedback(e){return N0.call(this,e)}hideFeedback(){return L0.call(this)}destroy(){B0.call(this)}}var U0,W0;!function(e){e.onError="rewardedVideoOnError",e.onClose="rewardedVideoOnClose",e.onShowSuccess="rewardedVideoOnShowSuccess",e.onShowFail="rewardedVideoOnShowFail"}(U0||(U0={})),(e=>{"function"==typeof e&&fL.on("_onEmitSplashAdFetch",e)})((()=>{W0||(W0=new Oq),W0.otherAdsEmitFetch()}));var G0=null,V0=e=>{var t=K()({},e);return delete t.pluginId,(e=>e&&!0===e.multiton?new dX(e):(G0||(G0=new dX(e)),G0))(t)},j0=new WeakMap;class H0{constructor({type:e="text",style:t={},text:i="",image:r="",onTapCallback:n=(()=>Promise.resolve())}){var a={};j0.set(this,a),a.emitter=new ty,a.onTapCallback=n,t=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},t,{position:"absolute"}),this.style={},a.button="text"===e?new Yv({style:t,value:i,eventType:"click"}):new ey({style:t,src:r,eventType:"click"}),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:()=>i,set:e=>{i=e,a.button.value=e}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:()=>r,set:e=>{r=e,a.button.src=e}}),Object.keys(t).forEach((e=>{"position"!==e&&Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>t[e],set:i=>{t[e]=i,a.button.style[e]=i}})})),a.button.on("click",(()=>{a.onTapCallback().then((e=>a.emitter.emit("tap",e))).catch((e=>a.emitter.emit("tap",e)))})),Xv.add(a.button)}onTap(e){j0.get(this).emitter.on("tap",e)}offTap(e){j0.get(this).emitter.off("tap",e)}show(){j0.get(this).button.style.hidden=!1}hide(){j0.get(this).button.style.hidden=!0}destroy(){var e=j0.get(this);Xv.remove(e.button)}}var z0=il((({withCredentials:e=!0,lang:t="en",success:i,fail:r}={})=>{var n=wx&&wx.version&&wx.version.version||"";Oi({apiName:"webapi_getuserinfo",sdkApiName:"getUserInfo",fromComponent:!0,withCredentials:e,reqData:{lang:t,version:n},complete(){II({user_action:[rI.USER_ACTION_APPLY_HEADIMG_NICKNAME]}).then((({need_pop_up_grant_window:e,interface_config:t,user_grant_info_list:i})=>{e&&CI(t,i,!0)})).catch((e=>wxNativeConsole.error(e)))},success:e=>{e.userInfo=e.data,e.rawData=JSON.stringify(e.data),delete e.data,i(e)},fail:r})}));class Y0 extends H0{constructor({type:e="text",style:t,image:i,text:r="获取用户信息",withCredentials:n,lang:a}={}){super({type:e,style:t,image:i,text:r,onTapCallback:()=>z0({withCredentials:n,lang:a})})}}var $0={green:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHroMcjTH0DGy1sGwV95nfxnBialPaFEXZG5B1iarolFC6Uic4BRlTlsR0Q/0?wx_fmt=png",white:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH8hmRP9YkP3WHQ9gKcXR4oKD0rwZxFojibQDMfjgwa3foAtjZH7Ce9Xg/0?wx_fmt=png",light:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHlGKmb23Js82NJ4dH3b3BoUNe74Tvk2Q4ZVfzD8ibwJicgs1czbYd6Qtw/0?wx_fmt=png",dark:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH6RhR996JZgib3RG3AtyO1OgnR6FibX7DPsBKQAJd5miaYcwyslLR7F6KQ/0?wx_fmt=png"},q0={appid:"",ssid:1037},Q0={appid:"",ssid:30,wechat_pkgid:"circlecenter_mixed_circle"};k.onReady((()=>{q0.appid=k.accountInfo.appId,Q0.appid=k.accountInfo.appId}));var Z0=il((({success:e,fail:t,extra:i})=>{if(Ll(Pl),Kt("openH5GameClub")){var r=function(e){return`https://game.weixin.qq.com/cgi-bin/h5/static/circlecenter/mixed_circle.html?${Object.keys(e).map((t=>{try{return`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`}catch(e){return""}})).join("&")}#wechat_redirect`}(Object.assign({},i,Q0));it("private_openUrl",{url:r,isNativeStyle:!0,success:e,fail:t})}else{var n=function(e,t){return`${e}?${Object.keys(t).map((e=>{try{return`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`}catch(e){return""}})).join("&")}`}("pages/club_index/club_index.html",Object.assign({},i,q0));it("navigateToMiniProgram",{appId:"wxff3bb5c177303374",path:n,scene:37,sourcetype:3,success:e,fail:t})}}));class K0 extends H0{constructor({style:e,icon:t="green",type:i="image",image:r,text:n="打开游戏圈",extra:a}={}){"bindGroup"===i?(i="text",n="关联群聊",a=Object.assign({},a,{action:"bindGroup"})):"joinGroup"===i&&(i="text",n="进入群聊",a=Object.assign({},a,{action:"joinGroup"})),super({type:i,style:e,image:r||$0[t],text:n,onTapCallback:()=>Z0({extra:a})}),"image"===i&&Object.defineProperty(this,"icon",{configurable:!0,enumerable:!0,get:()=>t,set:e=>{t=e,_private.button.src=$0[t]}})}}var X0=il(Mc);class J0 extends H0{constructor({type:e="text",style:t,image:i,text:r="打开设置"}){super({type:e,style:t,image:i,text:r,onTapCallback:()=>X0().then((()=>{Yt({name:"openSetting",scene:1})}))})}}var e1="";try{k.onReady((()=>{e1=k.accountInfo.appId}))}catch(e){}var t1=il((({success:e,fail:t})=>{it("private_openUrl",{url:`https://mp.weixin.qq.com/mp/wapreportwxadevlog?action=get_page&appid=${e1}#wechat_redirect`,isNativeStyle:!0,success:e,fail:t})}));class i1 extends H0{constructor({type:e="text",style:t,image:i,text:r="打开意见反馈页面"}){super({type:e,style:t,image:i,text:r,onTapCallback:()=>t1()})}}function r1(e,t){if(function(e,t){var{toString:i}=Object.prototype;return"Null"===t&&null===e||"Undefined"===t&&void 0===e||i.call(e).slice(8,-1)===t}(t,"String")){var i=t.split(".");return i.reduce(((e,t,r)=>r===i.length-1?e[t]:e[t]||{}),e)}}function n1(){var e=rA(this),t=new Date;return ki({sdkApiName:"compload",apiName:"webapi_compload",reqData:{act_id:e.act_id,comp_id:e.comp_id}}).catch((i=>{throw e.reporter.reportKeyValue({action:h1.actionMap.getJSON,execTime:new Date-t,externInfo:JSON.stringify(i),isSuccess:0}),e.config={flows:[]},e.emitter.emit("error",i),new Error(l1(i))})).then((i=>{e.reporter.reportKeyValue({action:h1.actionMap.getJSON,execTime:new Date-t,isSuccess:1}),i||(i={});var r=i.data||{},{sign:n,config:a}=r;e.sign=n,e.config=a,e.config}))}function a1(){var e=rA(this);this.isDestroyed=!0,this.ready=!1,e.emitter.off("_error"),e.emitter.off("load"),e.pages.forEach((e=>{Xv.remove(e)}))}function o1(){var e=rA(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{a1.call(this),t()})).catch((()=>{a1.call(this),t()})):(a1.call(this),t())}))),e.destroyPromise}function s1(){var e=rA(this);return e.fetchPromise=n1.call(this).then((()=>{if(this.isDestroyed)throw new Error("组件已经被销毁");return e.uiEngine.init()})),e.fetchPromise}function l1(e){var t;try{t=JSON.stringify(e)}catch(e){t="{}"}return t}function u1(e){return JSON.parse(JSON.stringify(e))}function c1(e,t){var i;e=e||"{}";try{i=JSON.parse(e)}catch(e){i=t||{}}return i}var d1={appid:"",scene:0};k.onReady((()=>{var e=k.appLaunchInfo||{},t=k.accountInfo||{};d1.scene=e.scene||0,d1.appid=t.appId||"",d1.SDKVersion=k.SDKVersion}));class h1{constructor(e){this._private=e}reportKeyValue({action:e,execTime:t=0,externInfo:i="",isSuccess:r=1,flowid:n=""}){var a=[d1.scene,this._private.act_id,this._private.comp_id,d1.SDKVersion,$i(),e,r,t,i,n].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameComponent",value:a,force:!0,immediately:!0})}}h1.actionMap={getJSON:1,execFlow:2,execModelAction:3,shareAppMessage:4,launchGameWithShare:5,broadcastEvent:6,closeComponent:7,exposure:8,createRewardedVideoAd:9,createAndShowRewardedVideoAdSuccess:10,createAndShowRewardedVideoAdFail:11,confirmRewardVideo:12,cancelRewardVideo:13,destroyRewardedVideoAd:14,videoOnError:15,showModal:16,confirmModal:17};var p1=/\$(.+)\$/,f1={},g1={},_1={launchInfo:{query:g1.query||{}}};Object.defineProperty(_1,"network_type",{configurable:!0,enumerable:!0,get:()=>$i()}),k.onReady((()=>{g1=k.appLaunchInfo,Object.assign(_1.launchInfo.query,g1.query||{}),wx.onShow((e=>{Object.assign(_1.launchInfo.query,e.query||{})}))}));var m1={String:"",Unit32:"0",Boolean:"true"},v1={String:String,Uint32:String,Boolean:Boolean};var y1=/\$\((.+)\)/;function A1(e,t,i,r){return"Variable"===t?r1(_1,i):"datasetValue"===t?function(e,t,i){var r=t.split("."),n=r[0];if(y1.test(n)){var a=y1.exec(n)[1],o="this"===a?i:e.uiEngine.getElementById(a);return o&&r1(o.dataset,r.slice(1).join("."))}}(e,i,r):i}function b1(e,t,i=null){return Object.keys(t&&t.inputs||{}).reduce(((r,n)=>{var a,o,s=t.inputs[n];return r[n]=(a={value:A1(e,s.parse,s.value,i),format:s.format},void 0===(o=u1(a)).value&&(o.value=m1[o.format]),"Boolean"!==o.format?o.value=v1[o.format]&&v1[o.format](o.value)||o.value:o.value="true"===o.value,o),r}),{})}var E1=new class{getCgi(e,t={},i){var{channel:r,id:n}=t,a={act_id:e.act_id,flow_id:n,sign:e.sign,inputs:b1(e,r,i)};return function(e,{act_id:t,flow_id:i,inputs:r,sign:n}){var a=new Date;return ki({sdkApiName:"compflowinvoke",apiName:"webapi_compflowinvoke",reqData:{act_id:t,flow_id:i,inputs:r,sign:n}}).catch((t=>{throw e.reporter.reportKeyValue({action:h1.actionMap.execFlow,execTime:new Date-a,externInfo:l1(t),isSuccess:0,flowid:i}),new Error(t.errMsg||"")})).then((t=>(e.reporter.reportKeyValue({action:h1.actionMap.execFlow,execTime:new Date-a,isSuccess:1,flowid:i}),t)))}(e,a).then((t=>{t||(t={});var{data:i}=t;i.models;var{models:r=[]}=i,n="minigame_component_post";e.uiEngine.modelsHandler(i.models.filter((e=>e.id!==n)));var a=r.find((e=>e.id===n));if(a&&a.extra&&a.extra.action)return c1(a.extra.action)}))}closeComponent(e){var t=e.pages.map((e=>(e.style.hidden=!0,e.nextLayout())));return e.reporter.reportKeyValue({action:h1.actionMap.closeComponent,isSuccess:1}),Promise.all(t).then((()=>{e.emitter.emit("close")}))}shareAppMessage(e,t,i){var r=i&&i.dataset||{},n=r.share_params||{},a="";Object.keys(n).forEach(((e,t)=>{a+=`${e}=${n[e]}`,t<Object.keys(n).length-1&&(a+="&")})),e.reporter.reportKeyValue({action:h1.actionMap.shareAppMessage,isSuccess:1,externInfo:l1({title:r.title||"",query:a,imageUrl:r.image_url||""})}),Fv({title:r.title||"",query:a,imageUrl:r.image_url||""})}broadcastEvent(e,t){var{channel:i}=t,r=b1(e,i);r.eventName&&r.eventName.value&&(e.emitter.emit(r.eventName.value,{errcode:Number(r.errcode&&r.errcode.value||0),errMsg:r.errMsg&&r.errMsg.value||""}),e.reporter.reportKeyValue({action:h1.actionMap.broadcastEvent,isSuccess:1,externInfo:l1(r)}))}showModal(e,t){var{channel:i}=t,r=b1(e,i),n=r.title&&r.title.value||"提示",a=r.content&&r.content.value||"温馨提示",o=r.cancelText&&r.cancelText.value||"取消",s=r.cancelColor&&r.cancelColor.value||"#000000",l=r.confirmText&&r.confirmText.value||"确定",u=r.confirmColor&&r.confirmColor.value||"#576B95",c=r.showCancel&&r.showCancel.value;return c=void 0===c||c,e.reporter.reportKeyValue({action:h1.actionMap.showModal,isSuccess:1,externInfo:l1(r)}),new Promise((t=>{Wl({title:n,content:a,showCancel:c,cancelText:o,cancelColor:s,confirmText:l,confirmColor:u,success(i){i.confirm?(e.reporter.reportKeyValue({action:h1.actionMap.confirmModal,isSuccess:1,externInfo:l1(r)}),t()):i.cancel}})}))}showLoading(e,t){var{channel:i}=t,r=b1(e,i),n=r.title&&r.title.value||"加载中...",a=r.mask&&r.mask.value||!1;return new Promise((e=>{$l({title:n,mask:a,complete:e})}))}showToast(e,t){var{channel:i}=t,r=b1(e,i),n=r.duration&&r.duration.value||2e3;return new Promise((e=>{Hl({title:r.title&&r.title.value||"",icon:r.type&&r.type.value||"none",duration:n,complete:e})}))}actionFlow(e,t,i){t.id;var{channel:r={},conditions:n={}}=t,a=b1(e,r,i),{models:o=[]}=r;return new Promise((t=>{var r=a.cond_key&&void 0!==a.cond_key.value?a.cond_key.value:void 0;if(void 0!==r&&Object.keys(n).find((e=>e===`${r}`))){var s=n[r],{channel:l={}}=s,{models:u=[]}=l;e.uiEngine.modelsHandler(u)}var c=o.map((e=>{var t=u1(e);t.attributes||(t.attributes={});var{attributes:r={}}=t,n=c1(r.dataset);for(var a in n){var o=p1.test(n[a]),s=p1.exec(n[a]);if(o){var l=s[1],u=r1(i,l);n[a]=n[a].replace(p1,u)}}return t.attributes.dataset=l1(n),t}));c.length&&e.uiEngine.modelsHandler(c),t()}))}createRewardedVideoAd(e,t,i){var{dataset:r}=i,{adUnitId:n}=r;return e.reporter.reportKeyValue({action:h1.actionMap.createRewardedVideoAd,externInfo:n}),new Promise(((t,i)=>{if(n||(ql(),i(new Error("广告id参数必填"))),f1[n])t(f1[n]);else{var r=V0({adUnitId:n,multiton:!0});f1[n]=r,r.onError((t=>{t.adUnitId=n,e.reporter.reportKeyValue({action:h1.actionMap.videoOnError,externInfo:l1(t),isSuccess:0})})),t(r)}}))}createAndShowRewardedVideoAd(e,t,i){return $l({title:"加载视频中..."}),new Promise(((r,n)=>{this.createRewardedVideoAd(e,t,i).then((t=>(t.load().then((i=>{t.show().then((()=>{e.reporter.reportKeyValue({action:h1.actionMap.createAndShowRewardedVideoAdSuccess,externInfo:t.adUnitId}),ql()}))})).catch((i=>{ql(),Hl({title:"无可观看视频",icon:"none"}),e.reporter.reportKeyValue({action:h1.actionMap.createAndShowRewardedVideoAdFail,externInfo:t.adUnitId}),n(i)})),t.closeCbk&&t.offClose(t.closeCbk),t.closeCbk=i=>{i&&i.isEnded||void 0===i?(e.reporter.reportKeyValue({action:h1.actionMap.confirmRewardVideo,externInfo:t.adUnitId}),r()):(e.reporter.reportKeyValue({action:h1.actionMap.cancelRewardVideo,externInfo:t.adUnitId}),Hl({title:"领取失败",icon:"none"}))},t.onClose(t.closeCbk),t.load())))}))}destroyRewardedVideoAd(e,t){var{channel:i}=t,r=b1(e,i),n=r.id&&r.id.value,a=f1.get(n);return new Promise(((t,i)=>{n&&a?(e.reporter.reportKeyValue({action:h1.actionMap.destroyRewardedVideoAd,externInfo:n,isSuccess:1}),a.destroy(),f1.delete(n),t()):(e.reporter.reportKeyValue({action:h1.actionMap.destroyRewardedVideoAd,externInfo:n,isSuccess:0}),i(new Error("组件不存在")))}))}flowParser(e,t={},i){var r,n=t.type||t.flow_type;return r=this[n]?this[n](e,t,i):Promise.reject(),t.next?r.then((()=>this.flowParser(e,t.next,i))):r}};function w1(e={},t){var i;return e.id===t&&(i=e),(e.items||[]).forEach((e=>{i=w1(e,t)||i})),i}function T1(e={},t,i){return i||(i=[]),(function(e){var{attributes:t={}}=e,{dataset:i="{}"}=t;return c1(i)}(e).className||"").split(/\s+/).find((e=>e===t))&&i.push(e),(e.items||[]).forEach((e=>T1(e,t,i))),i}function C1(e,t){if(e.value&&(t.value=e.value),e.attributes){if(t.attributes||(t.attributes={}),e.attributes.dataset){var i=Object.assign(c1(t.attributes.dataset||""),c1(e.attributes.dataset));t.attributes.dataset=l1(i)}if(e.attributes.style){var r=Object.assign(c1(t.attributes.style||""),c1(e.attributes.style));t.attributes.style=l1(r)}}}function S1(e={}){var{flows:t=[]}=e,i=t.find((e=>"init"===e.id));if(i){var{channel:r={}}=i,{models:n=[]}=r,{model:a={}}=e;n.forEach((e=>{var{extra:t={}}=e;if(t.action){var i=c1(t.action);if("execModelAction"===i.actionType){var r=i.model_actions||[];if("string"==typeof r)try{r=JSON.parse(r)}catch(e){r=[]}r.forEach((e=>{if(e.id){var t=w1(a,e.id);t&&C1(e,t)}else if(e.class){T1(a,e.class).forEach((t=>{C1(e,t)}))}}))}}}))}}var I1=/(.+)\((.+)\)/,x1=/\$(.+)\$/,P1=/\$\((.+)\)/,D1={view:zv,text:Yv,image:ey};function R1(e,t){Object.keys(t.query||{}).find((e=>e.indexOf("minigame_component")>-1))&&(t.query,e.reporter.reportKeyValue({action:h1.actionMap.launchGameWithShare,isSuccess:1,externInfo:l1(t.query)}))}function O1(e,t){for(var i in e.style.scale=t,e.children)O1(e.children[i],t)}class k1{constructor(e,t){this._private=e,this.componentInstance=t,this.id=1}oneFlowExec(e,t){var{_private:i}=this,r=i.config&&i.config.flows.find((t=>t.id===e));return r&&E1.flowParser(i,r,t)}oneModelActionExec(e,t,i){var{_private:r}=this,n=r.config.model_actions.find((t=>t.name===e));if("$this"===t)this.updateOneElement(n,i);else{var a=t.split(":");if("$class"===a[0])this.getElementsByClassName(a[1]).forEach((e=>{this.updateOneElement(n,e)}));else if("$id"===a[0]){var o=this.getElementById(a[1]);o&&this.updateOneElement(n,o)}}}eventReigster(e,t){var{dataset:i}=t.attributes;i.click&&e.on("click",(t=>{(e.id,!e.disabled&&function(e){var t=e.absoluteX,i=e.absoluteY,r=e.absoluteEndX,n=e.absoluteEndY,a=e.pressInterval,o=!1;return Math.abs(n-i)<30&&Math.abs(r-t)<30&&a<300&&(o=!0),o}(t))&&i.click.split(";").forEach((t=>{if("execFlow"===t&&i.flowid)i.flowid.split(";").forEach((t=>{this.oneFlowExec(t,e)}));else if("execModelAction"===t&&i.action){i.action.split(";").filter((e=>e&&e.match(I1))).forEach((t=>{var i=I1.exec(t),r=i[1],n=i[2];this.oneModelActionExec(r,n,e)}))}}))}))}create(e,t){var{_private:i}=this,{attributes:r,component:n,value:a}=e;r.style=c1(r.style);var o=c1(r.dataset);r.dataset=o,r.value=a,r.src=a,r.bubbleEvent=!0;var s=new(0,D1[n])(r);if("list"===o.type&&o.listlength&&e.items.length){var l=e.items[0];e.items=[];for(var u=0;u<o.listlength;u++){var c=u1(l);o.defaultvalue&&(c.value=o.defaultvalue,c.src=o.defaultvalue);var d=c1(c.attributes.dataset);d.idprefix&&(d.idName=d.idprefix+u,c.attributes.dataset=l1(d)),e.items.push(c)}}s.dataset=o,o.if&&(s.style.hidden=!0,setTimeout((()=>{if(o.if&&P1.test(o.if)){var e=o.if.split("."),t=P1.exec(o.if)[1],i=this.getElementById(t),r=e.slice(1).join("."),n=`${r}__bridge`;i.dataset[n]=i.dataset[r],void 0!==i.dataset[r]&&(s.style.hidden=!i.dataset[r]),Object.defineProperty(i.dataset,r,{configurable:!0,enumerable:!0,get:()=>i.dataset[n],set:e=>{void 0!==e&&(s.style.hidden=!e),i.dataset[n]=e}})}}),0)),e.items.forEach((e=>{var i=this.create(e,t);s.add(i)})),this.eventReigster.call(this,s,e);var h=o.idName||this.id++;return i[`${t}Container`][h]=s,s}init(){var{_private:e}=this;S1(e.config);var t=as();e.pages=[],e.pageContainers={},e.root=new zv({}),e.root.dataset={};var i=e.config.model;i.items.forEach((r=>{var{id:n}=r,a=`${n}Container`;e[a]={},e.pageContainers[a]=e[a];var{attributes:o={}}=r,s=c1(o.style);s.hidden=!0,"singlePage"!==i.label&&(s.width=t.windowWidth,s.height=t.windowHeight),o.style=l1(s),this.create(r,n);var l=e[a][n];if(e[n]=l,e[n].isPage=!0,e.pages.push(l),Xv.add(l),"singlePage"===i.label){var{style:u}=l;this.componentInstance.style={width:u.width||0,height:u.height||0,left:0,top:0};["width","height","left","top"].forEach((e=>{Object.defineProperty(this.componentInstance.style,e,{configurable:!0,enumerable:!0,get:()=>l.computedStyle[e],set:t=>{if("width"===e||"height"===e)throw new Error("can not set width and height");t!==u[e]&&(u[e]=t)}})})),Object.keys(e.style).forEach((t=>{"left"!==t&&"top"!==t||(this.componentInstance.style[t]=e.style[t])}))}})),this.componentInstance.ready=!0,e.emitter.emit("load"),R1(e,a_()),T_((t=>{R1(e,t)}))}updateListTreeChild(e,t){var{dataset:i}=e;if(i.origin&&x1.test(i.origin)){var r=r1({item:t},x1.exec(i.origin)[1]);i.origin_source=r}if(i.render&&x1.test(i.render)){var n=r1({item:t},x1.exec(i.render)[1]);n&&(e.value=n,e.src=n)}if(i.if&&x1.test(i.if)){var a=r1({item:t},x1.exec(i.if)[1]);void 0!==a&&(e.style.hidden=!a)}for(var o in e.children)this.updateListTreeChild(e.children[o],t)}updateListTree(e,t){var i=c1(t.value,[]),r=Object.keys(e.children).map((t=>e.children[t]));i.forEach(((e,t)=>{this.updateListTreeChild(r[t],e)}))}updateList(e,t){var{dataset:i}=e,r=c1(t.value);if(e&&"list"===e.dataset.type&&t.value_filter_name){var n=Object.keys(e.children).map((t=>e.children[t])),a=t.value_filter_name.split(".");if(a[0].indexOf("[]")>-1){var o=r[a[0].replace("[]","")];if(o){var s=a[1];n.forEach(((e,t)=>{if(o[t]&&o[t][s]){var r=o[t][s];"avatar_url"===s&&(r+="/0"),e.src=r,e.value=r}else i.defaultvalue&&(e.src=i.defaultvalue,e.value=i.defaultvalue)}))}}}}getElementsByClassName(e){var{_private:t}=this,i=[];return Object.keys(t.pageContainers).forEach((r=>{var n=t.pageContainers[r],a=Object.keys(n);i=i.concat(a.map((t=>!!(n[t].dataset.className||"").split(/\s+/).find((t=>t===e))&&n[t])).filter((e=>e)))})),i}getElementById(e){var t,{_private:i}=this;return"root"===e?i.root:(Object.keys(i.pageContainers).forEach((r=>{var n=i.pageContainers[r],a=Object.keys(n).find((t=>n[t].dataset.idName===e));a&&n[a]&&(t=n[a])})),t)}updateOneElement(e,t){var{_private:i}=this,r=t||this.getElementById(e.id),{attributes:n={},value:a}=e;if(r){if(void 0!==n.hide&&(r.style.hidden=n.hide,!1===r.style.hidden&&r.isPage&&i.reporter.reportKeyValue({action:h1.actionMap.exposure,isSuccess:1,externInfo:l1(r.dataset)})),a&&r.value&&(r.value=a),a&&r.src&&(r.src=a),n.dataset&&(r.dataset=Object.assign(r.dataset,c1(n.dataset))),n.style)try{var o=c1(n.style);Object.assign(r.style,o),void 0!==o.scale&&O1(r,o.scale)}catch(e){}void 0!==n.disabled&&(r.disabled=n.disabled),this.updateList(r,e),"list"!==r.dataset.type||e.value_filter_name||this.updateListTree(r,e)}e.items&&e.items.length&&e.items.forEach((e=>{this.updateOneElement(e)}))}modelsHandler(e){e.forEach((e=>{this.updateOneElement(e)})),e.filter((e=>"root"===e.id)).forEach(this.rootHandler.bind(this))}rootHandler(e){var{_private:t}=this,{extra:i={}}=e,r=c1(i.action);if("execFlow"===r.actionType)E1.flowParser(t,r);else if("execConfigFlow"===r.actionType){var{type:n,channel:a}=r,o=t.config.flows.find((e=>e.id===n));if(o){var s=u1(o);s.channel=a||s.channel,E1.actionFlow(t,s)}}else if("execModelAction"===r.actionType){var l=r.model_actions||[];"string"==typeof l&&(l=c1(l,[])),l.forEach((e=>{if(!e.name&&e.id)this.updateOneElement(e);else if(!e.name&&e.class)this.getElementsByClassName(e.class).forEach((t=>{this.updateOneElement(e,t)}));else{var i=u1(t.config.model_actions.find((t=>t.name===e.name)));i.id=e.id,this.updateOneElement(i)}}))}}}const M1=[/\ufe0e/,/\ufe0f/,/\u20e3/],N1=[/\ud83c[\udde6-\uddff]\ud83c[\udde6-\uddff]/,/\ud83c\udff4(?:\udb40[\udc20-\udc7e])+?\udb40\udc7f/,/[\ud800-\udbff][\udc00-\udfff]/,new RegExp(`.(?:${M1.map((e=>e.source)).join("|")})+`),/[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55\u00A9\u00AE\u203C\u2049\u2122\u2139\u2194\u2195\u2196\u2197\u2198\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263a\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u26F9\u2702\u2708\u2709\u270C\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2b07\u3030\u303D\u3297\u3299\u261D\u26F9\u270A-\u270d]/],L1=[/\ud83c[\udffb-\udfff]/].concat(M1),B1="text",F1=new RegExp(`^${/\u200d/.source}`),U1=new RegExp(`^(?:${N1.map((e=>e.source)).join("|")})`),W1=new RegExp(`(?:${N1.map((e=>e.source)).join("|")})`),G1=new RegExp(`${U1.source}(?:${L1.map((e=>`(?:${e.source})`)).join("|")})*`),V1=new RegExp(`${W1.source}(?:${L1.map((e=>`(?:${e.source})`)).join("|")})*`);function j1(e,t=!0){let i="";if((t?U1:W1).test(e)){const r=t?G1:V1,n=e.match(r);n&&(i+=n[0],i+=function(e){let t="";const i=e.match(F1);return i&&(t+=i[0],t+=j1(e=e.substr(i[0].length))),t}(e=e.substr(e.indexOf(i)+n[0].length)))}return i}function H1(e=""){const t=[];for(;e.length>0;){const i=j1(e,!1);if(i){const r=e.indexOf(i);r>0&&t.push({text:e.slice(0,r),type:B1}),t.push({text:i,type:"other"}),e=e.slice(r+i.length)}else t.push({text:e,type:B1}),e=""}return t}function z1(e="",t=0,i=1/0){const r=Y1(e);return t<0&&(t=r.length+t),r.slice(t,t+i).join("")}function Y1(e=""){let t=[];const i=H1(e);for(let e=0;e<i.length;e++)i[e].type===B1?t=t.concat(i[e].text.split("")):t.push(i[e].text);return t}var $1;function q1(e){if(e.indexOf("回复")>-1)return e;var t=Y1(e);return t.length>6?`${t.slice(0,6).join("")}...`:t.join("")}var Q1={ready:!1,position:{x:0,y:0},scale:1,pixelRatio:3,IS_DEVTOOLS:!1,designSize:{width:0,height:0},maxSize:{width:0,height:0},lockSize:{width:0,height:0},toolWidth:0,screenWidth:0,screenHeight:0,headerHeight:0,device:{width:0,height:0},padding:{left:0,top:0},initPosition:{x:16,y:16}},Z1={commonStyle:{},dataStyle:{},listStyle:{},tipsStyle:{},linkStyle:{},userNameStyle:{},contextStyle:{},joinStyle:{},giftStyle:{},titleStyle:{},shareTitleStyle:{},timeStyle:{},tipStyle:{},newMessageStyle:{},toastStyle:{}};function K1(){return new Promise((e=>{Q1.ready?e(Q1):new Promise((e=>{e($1||($1=as()))})).then((t=>{Q1.ready=!0;var{pixelRatio:i,screenWidth:r,screenHeight:n,platform:a,safeArea:o}=t;Q1.IS_DEVTOOLS="devtools"===a,Q1.IS_DEVTOOLS?(Q1.padding.left=0,Q1.padding.top=0):(Q1.position.x=Q1.initPosition.x+o.left+Q1.padding.left,Q1.position.y=Q1.initPosition.y+o.top+Q1.padding.top,r>n&&("ios"!==a||Q1.IS_DEVTOOLS||(Q1.position.x=Q1.initPosition.x+o.top+Q1.padding.left,Q1.position.y=Q1.initPosition.y+o.left+Q1.padding.top),Q1.position.y+=16)),Q1.screenWidth=r,Q1.screenHeight=n,Q1.scale=Math.min(1,r/414);var s=Math.round(i*Q1.scale*1e3)/1e3;Q1.pixelRatio=s,Q1.designSize={width:300*s,height:170*s},Q1.maxSize={width:300*s,height:170*s},Q1.lockSize={width:300*s,height:112*s},Q1.toolWidth=32*s,Q1.headerHeight=48*s,Q1.device={width:Q1.designSize.width,height:Q1.designSize.height},function(e,t){var i={fill:16777215,fontSize:12*e.pixelRatio,whiteSpace:"normal",textBaseline:"middle",lineHeight:16*e.pixelRatio,dropShadow:!0,dropShadowColor:"rgba(0, 0, 0, 0.8)",dropShadowDistance:1*e.pixelRatio},r=Object.assign({},i,{fill:14737632,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-72*e.pixelRatio}),n=Object.assign({},i,{fill:14737632,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-72*e.pixelRatio}),a=Object.assign({},r,{fill:10592673}),o=Object.assign({},r,{fill:8425639}),s=Object.assign({},i,{fill:14737632}),l=Object.assign({},i,{breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-48*e.pixelRatio}),u=Object.assign({},i,{lineHeight:20*e.pixelRatio,breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-56*e.pixelRatio}),c=Object.assign({},i,{fill:9621832}),d=Object.assign({},i,{breakWords:!0,wordWrap:!0,wordWrapWidth:e.device.width-184*e.pixelRatio,dropShadow:!1}),h=Object.assign({},i,{dropShadow:!1}),p=Object.assign({},i,{lineHeight:14*e.pixelRatio,dropShadow:!1}),f=Object.assign({},p,{fill:10592673}),g=Object.assign({},p,{fill:0,lineHeight:12*e.pixelRatio}),_=Object.assign({},i,{fill:16777215,lineHeight:20*e.pixelRatio,dropShadow:!1});t.commonStyle=i,t.dataStyle=r,t.tipsStyle=a,t.linkStyle=o,t.userNameStyle=s,t.contextStyle=l,t.joinStyle=u,t.giftStyle=c,t.titleStyle=d,t.shareTitleStyle=h,t.timeStyle=p,t.tipStyle=f,t.newMessageStyle=g,t.toastStyle=_,t.listStyle=n}(Q1,Z1),e(Q1)}))}))}class X1{constructor(e,t){this.canvas=null,this.realX=0,this.realY=0,this.realWidth=0,this.realHeight=0,this.realZIndex="1",this.pixelRatio=1,this.pixelRatio=t,this.canvas=e(),this.canvas.getBoundingClientRect=()=>({x:this.x,y:this.y,left:this.x,top:this.y,width:this.width/this.pixelRatio,height:this.height/this.pixelRatio})}set x(e){this.realX=e,this.canvas&&(this.canvas.style.left=`${e}px`)}get x(){return this.realX}set y(e){this.realY=e,this.canvas&&(this.canvas.style.top=`${e}px`)}get y(){return this.realY}set width(e){this.realWidth=e,this.canvas&&(this.canvas.width=e,this.canvas.style.width=e/this.pixelRatio+"px")}get width(){return this.realWidth}set height(e){this.realHeight=e,this.canvas&&(this.canvas.height=e,this.canvas.style.height=e/this.pixelRatio+"px")}get height(){return this.realHeight}set zIndex(e){this.realZIndex=e,this.canvas&&(this.canvas.style.zIndex=e)}get zIndex(){return this.realZIndex}set bindingScreen(e){this.canvas&&(this.canvas.bindingScreen=e)}get bindingScreen(){var e,t;return null!==(t=null===(e=this.canvas)||void 0===e?void 0:e.bindingScreen)&&void 0!==t?t:0}remove(){var e;null===(e=this.canvas)||void 0===e||e.remove(),this.canvas=null}}function J1(e,t,i){return!!e.find((e=>t>=e.left&&t<=e.left+e.width&&i>=e.top&&i<=e.top+e.height))}class e2{constructor(e=null){this.dragParams={flag:!1,canOutScreen:!1,pageX:0,pageY:0,startLeft:0,startTop:0,currentLeft:0,currentTop:0},this.disabled=!1,this.innerDragArea=[],this.innerPreventArea=[],e&&(this.dragParams.canOutScreen=e.canOutScreen)}get dragArea(){return this.innerDragArea}set dragArea(e){this.innerDragArea=e}get preventArea(){return this.innerPreventArea}set preventArea(e){this.innerPreventArea=e}inDragArea(e,t){return 0!==this.dragArea.length&&J1(this.dragArea,e,t)}inPreventArea(e,t){return 0!==this.preventArea.length&&J1(this.preventArea,e,t)}enable(){this.disabled=!1}disable(){this.disabled=!0}}function t2(){}function i2(e,t,i){return Math.max(t,Math.min(e,i))}class r2{constructor(e){this.target=null,this.currentTarget=[],this.touches=[],this.targetTouches=[],this.changedTouches=[],this.timeStamp=0,this.type=e}preventDefault(){}stopPropagation(){}}function n2(e,t){const i=new r2("touch");let r=t.touches,n=t.changedTouches;return t.target&&(r=Object.values(t.touches),n=Object.values(t.changedTouches)),i.touches=r,i.targetTouches=Array.prototype.slice.call(r),i.changedTouches=n,i.timeStamp=t.timeStamp,i.target=e.canvas,i}let a2;const o2=()=>a2;a2=e;var s2,l2,u2,c2,d2,h2,p2,f2,{padding:g2}=Q1,_2={width:300+g2.left,height:170+g2.top},m2=[{left:0,top:0,width:32+g2.left,height:_2.height},{left:0,top:0,width:_2.width,height:50+g2.top}],v2=[{left:0,top:0,width:_2.width,height:_2.height}],y2=[{left:g2.left+32-4,top:g2.top-4,width:g2.left+32+8,height:g2.top+32+8}],A2=new e2,b2=()=>{A2.dragArea=m2,A2.preventArea=v2},E2=null,w2=null,T2=null,C2=null,S2=null,I2=0,x2=()=>{E2||((E2=new X1(sx,Q1.pixelRatio)).width=(Q1.maxSize.width+Q1.padding.left*Q1.pixelRatio)*Q1.scale,E2.height=(Q1.maxSize.height+Q1.padding.top*Q1.pixelRatio)*Q1.scale,E2.x=Q1.position.x-Q1.padding.left,E2.y=Q1.position.y-Q1.padding.top,E2.zIndex="100")},P2=()=>{if(E2||x2(),E2){C2=new bC({view:E2.canvas,antialias:!1,transparent:!0,width:(Q1.maxSize.width/Q1.pixelRatio+Q1.padding.left)*Q1.pixelRatio,height:(Q1.maxSize.height/Q1.pixelRatio+Q1.padding.top)*Q1.pixelRatio,clearBeforeRender:!1,preserveDrawingBuffer:!0}),S2=new Ew,T2=()=>{(I2+=1)%2==0&&C2&&(C2.clear(),C2.render(S2)),wI.update()},(w2=new _w).add(T2),w2.start();var e=function(e,t){return{start:i=>{const{event:r}=i;e.plugins.interaction.onPointerDown(n2(t,r),"touchstart")},move:i=>{const{event:r}=i;e.plugins.interaction.onPointerMove(n2(t,r),"touchmove")},end:i=>{const{event:r}=i;e.plugins.interaction.onPointerUp(n2(t,r),"touchend")}}}(C2,E2);!function(e){const{screenCanvas:t,touchEventManager:i,systemInfo:r,handlers:n}=e;if(!r)return void console.error("缺少参数systemInfo");if(!t)return void console.error("缺少参数screenCanvas");if(!t.canvas)return void console.error("screenCanvas缺少参数canvas");let a=i;a||(a=new e2);const{screenWidth:o,screenHeight:s,pixelRatio:l,platform:u}=r,c=e=>{const i=e.changedTouches[0]||e.touches[0],{dragParams:r,disabled:o}=a,{pageX:s,pageY:l}=i;let{offsetX:c,offsetY:d}=i;"devtools"===u&&(c=s-t.x,d=l-t.y);const h=a.inPreventArea(c,d);return!h||(o?h:(a.inDragArea(c,d)&&(r.flag=!0,r.pageX=s,r.pageY=l,r.startLeft=t.x,r.startTop=t.y,r.currentLeft=t.x,r.currentTop=t.y),n&&n.start&&n.start({event:e,isPrevent:h,isDraging:r.flag}),!h))},d=e=>{const r=e.changedTouches[0]||e.touches[0],{dragParams:c,disabled:d}=i,{pageX:h,pageY:p}=r;let{offsetX:f,offsetY:g}=r;"devtools"===u&&(f=h-t.x,g=p-t.y);const _=a.inPreventArea(f,g);if(d)return _;if(c.flag){const e=h-c.pageX,i=p-c.pageY;let r=t.x+e,n=t.y+i;a.dragParams.canOutScreen||(r=i2(r,0,o-t.width/l),n=i2(n,0,s-t.height/l)),t.x=r,t.y=n,c.pageX=h,c.pageY=p,c.currentLeft=r,c.currentTop=n}else n&&n.move&&n.move({event:e,isPrevent:_,isDraging:c.flag});return!_},h=e=>{const r=e.changedTouches[0]||e.touches[0],{dragParams:o,disabled:s}=i,{pageX:l,pageY:c}=r;let{offsetX:d,offsetY:h}=r;"devtools"===u&&(d=l-t.x,h=c-t.y);const p=a.inPreventArea(d,h);return s?p:(o.flag=!1,n&&n.end&&n.end({event:e,isPrevent:p,isDraging:o.flag}),!p)};t.canvas&&("devtools"===u?(t.canvas.addEventListener("touchstart",c),t.canvas.addEventListener("touchmove",d),t.canvas.addEventListener("touchend",h),t.canvas.addEventListener("touchcancel",h)):(t.canvas.ontouchstart=c,t.canvas.ontouchmove=d,t.canvas.ontouchend=h,t.canvas.ontouchcancel=h))}({screenCanvas:E2,touchEventManager:A2,systemInfo:$1||($1=as()),handlers:e}),Q1.device.width=Q1.designSize.width,Q1.device.height=Q1.designSize.height}},D2=()=>E2?E2.bindingScreen:0;function R2(e,t=null){const i=new(o2().Point);return t?(i.x=t.x+e.x,i.y=t.y+e.y):(i.x=e.x,i.y=e.y),e.parent&&R2(e.parent,i),i}!function(e){e[e.Unknown=0]="Unknown",e[e.Anchor_Notice=1]="Anchor_Notice",e[e.Audience_Comment=2]="Audience_Comment",e[e.Audience_Join=3]="Audience_Join",e[e.Top=4]="Top",e[e.Official=5]="Official",e[e.Official_BanComment=6]="Official_BanComment",e[e.Official_OpenComment=7]="Official_OpenComment",e[e.Official_ConnectMic=8]="Official_ConnectMic",e[e.Official_LiveRewardEnable=9]="Official_LiveRewardEnable",e[e.ComboLiveReward=10]="ComboLiveReward",e[e.RewardRankingNotice=11]="RewardRankingNotice",e[e.Official_Location=12]="Official_Location",e[e.RedPacket_Sent=13]="RedPacket_Sent",e[e.RedPacket_Received=14]="RedPacket_Received",e[e.Official_PureAudioMode=15]="Official_PureAudioMode",e[e.First_Notice=16]="First_Notice"}(s2||(s2={})),function(e){e[e.Unkown=0]="Unkown",e[e.WeAppMenu=1]="WeAppMenu",e[e.WeAppExit=2]="WeAppExit",e[e.JsApi=3]="JsApi",e[e.Finder=4]="Finder"}(l2||(l2={})),function(e){e[e.Unknown=0]="Unknown",e[e.Info=1]="Info",e[e.DisableInfo=2]="DisableInfo",e[e.GetCurrentRoomMemberInfo=3]="GetCurrentRoomMemberInfo",e[e.GetCurrentRoomInfo=4]="GetCurrentRoomInfo",e[e.EnableMic=5]="EnableMic",e[e.DisableMic=6]="DisableMic",e[e.GetCurrentMicState=7]="GetCurrentMicState",e[e.EnableMicInfo=8]="EnableMicInfo",e[e.DisableMicInfo=8]="DisableMicInfo"}(u2||(u2={})),function(e){e[e.End=0]="End",e[e.Start=1]="Start",e[e.PreStart=2]="PreStart",e[e.Cancel=3]="Cancel"}(c2||(c2={})),function(e){e[e.TRTCQuality_Unknown=0]="TRTCQuality_Unknown",e[e.TRTCQuality_Excellent=1]="TRTCQuality_Excellent",e[e.TRTCQuality_Good=2]="TRTCQuality_Good",e[e.TRTCQuality_Poor=3]="TRTCQuality_Poor",e[e.TRTCQuality_Bad=4]="TRTCQuality_Bad",e[e.TRTCQuality_Vbad=5]="TRTCQuality_Vbad",e[e.TRTCQuality_Down=6]="TRTCQuality_Down"}(d2||(d2={})),function(e){e[e.unknow=0]="unknow",e[e.friend=1]="friend",e[e.timeline=2]="timeline"}(h2||(h2={})),function(e){e.lock="lock",e.unlock="unlock"}(p2||(p2={})),function(e){e[e.screenCanvasInitErr=0]="screenCanvasInitErr",e[e.resourceLoadError=1]="resourceLoadError",e[e.jsAPIInvokeError=2]="jsAPIInvokeError"}(f2||(f2={}));var O2={};function k2(e){e.interactive=!0,e.on("pointerup",(()=>{e.alpha=1})),e.on("pointerdown",(()=>{e.alpha=.5})),e.on("pointerupoutside",(()=>{e.alpha=1}))}function M2(e,t,i){var r=R2(e);O2[t]={x:r.x+Q1.padding.left*Q1.pixelRatio,y:r.y+Q1.padding.top*Q1.pixelRatio,width:e.width,height:e.height,check:i}}k.onReady((()=>{K1().then((e=>{O2.canvas={width:e.device.width+e.padding.left*e.pixelRatio,height:e.device.height+e.padding.top*e.pixelRatio,check:()=>!1}}))}));var N2,L2,B2=[];function F2(e,t,i=2e3,r=null){B2[e]?(wI.remove(B2[e]),t.alpha=1,B2[e]=new wI.Tween(t).delay(i).to({alpha:0},300).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{B2[e]=null,r&&r()})).start()):(t.alpha=0,B2[e]=new wI.Tween(t).to({alpha:1},300).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{B2[e]=new wI.Tween(t).delay(i).to({alpha:0},300).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{B2[e]=null,r&&r()})).start()})).start())}function U2(e,t,i,r,n,a=0,o){let s;s="number"==typeof a?{tl:a,tr:a,br:a,bl:a}:a,e.beginFill(o.fill,o.alpha),e.moveTo(t+s.tl,i),e.lineTo(t+r-s.tr,i),e.quadraticCurveTo(t+r,i,t+r,i+s.tr),e.lineTo(t+r,i+n-s.br),e.quadraticCurveTo(t+r,i+n,t+r-s.br,i+n),e.lineTo(t+s.bl,i+n),e.quadraticCurveTo(t,i+n,t,i+n-s.bl),e.lineTo(t,i+s.tl),e.quadraticCurveTo(t,i,t+s.tl,i),e.endFill()}!function(e){e.STRING="STRING",e.LONGLONG="LONGLONG",e.UINT="UINT",e.INT="INT"}(N2||(N2={})),function(e){e.SvrReport="SvrReport",e.KvStat="KvStat"}(L2||(L2={}));const W2={[N2.STRING]:e=>"string"==typeof e&&e.length<=1024,[N2.LONGLONG]:e=>"number"==typeof e&&Math.floor(e)===e,[N2.UINT]:e=>"number"==typeof e&&Math.floor(e)===e&&e>=0,[N2.INT]:e=>"number"==typeof e&&Math.floor(e)===e};let G2="";const V2={wifi:"0",unknown:"1",none:"1","2g":"2","3g":"3","4g":"4","5g":"5"};var j2=1;class H2 extends class extends class{constructor({logid:e,schemas:t={},base:i,debug:r=!1}){this.debug=!1,this.base={},this.asyncGetBase=()=>Promise.resolve({}),this.logid=e,this.schemas=t,i&&this.setBase(i),this.debug=r}setBase(e){this.validate(e),this.base=Object.assign(Object.assign({},this.base),e)}validate(e){if(Object.keys(this.schemas).length)for(const[t,i]of Object.entries(e)){if(void 0===i)continue;const e=this.schemas[t];e?this.validateColumn(e,i)||console.error(`SchemaValidator: logid ${this.logid}: ${t} should be ${e}, but now ${i}`):console.warn(`SchemaValidator: logid${this.logid}: ${t} 缺少类型定义`)}}validateColumn(e,t){return W2[e](t)}}{constructor({reportFunc:e,logid:t,protocolParams:i,schemas:r,base:n,asyncGetBase:a=(()=>Promise.resolve({})),debug:o}){super({logid:t,schemas:r,base:n,debug:o}),this.asyncGetBase=a,e||console.error("未传入上报函数!!!"),this.reportFunc=e||function(){},this.protocolParams=i,this.sendCbk=null}send(e,t){let i;i=Array.isArray(e)?e:[e],this.asyncGetBase().then((e=>{this.setBase(e),i.forEach((e=>{const i=Object.assign(Object.assign({},this.base),e);this.validate(i);const r=[];this.protocolParams.forEach((e=>{const t=void 0!==i[e]?i[e]:"";r.push(t)})),this.reportFunc({key:this.logid,value:r.map(encodeURIComponent).join(","),immediately:!0});const n=t||this.sendCbk;n&&n(this.logid,r.map(encodeURIComponent).join(",")),this.debug&&console.log(`[minigamefe: ${this.logid} keyValueReport report]: ${r.map(encodeURIComponent).join(",")}`)}))}))}}{constructor(){super({reportFunc:Reporter.reportKeyValue,logid:20267,protocolParams:["NetworkType","SSID","ToUin","SceneID","UIArea","PositionID","ActionID","ActionStatus","OpType","Object","Status","SourceID","Allpath","ExpID","LogType","ErrType","Time","FuncType","FuncID","ContentType","ContentID","ReasonID","ExternInfo"],schemas:{AppId:N2.STRING,NetworkType:N2.STRING,SSID:N2.UINT,ToUin:N2.STRING,SceneID:N2.LONGLONG,UIArea:N2.LONGLONG,PositionID:N2.LONGLONG,ActionID:N2.LONGLONG,ActionStatus:N2.STRING,OpType:N2.LONGLONG,Object:N2.STRING,Status:N2.STRING,SourceID:N2.LONGLONG,Allpath:N2.STRING,ExpID:N2.LONGLONG,Time:N2.LONGLONG,FuncType:N2.LONGLONG,FuncID:N2.STRING,ReasonID:N2.LONGLONG,ExternInfo:N2.STRING,ErrType:N2.STRING},base:{SceneID:36}}),1!==j2?this.setBase({NetworkType:j2}):k.onReady((()=>{!function(e,t,i){G2?e&&e(G2):(t({success:t=>{G2=t.networkType,e&&e(G2)}}),i((t=>{G2=t.networkType,t.isConnected||(G2="none"),e&&e(G2)})))}((e=>{V2[e]&&(j2=V2[e]),this.setBase({NetworkType:j2})}),Vi,ji)}))}}var z2=new H2;function Y2(e,t,i){if(i!==e[`_${t}`]){var r=function(e){return e<1e3?`${e}`:e>=1e3&&e<1e4?`${parseFloat(e/1e3).toFixed(1)}k`:e>1e4&&e<1e5?`${parseFloat(e/1e4).toFixed(1)}w`:"10w+"}(i);r!==e[t]&&(e[`inner${t}`]=i,e[`inner${t}Str`]=r)}}class $2 extends $E.EventEmitter{constructor(){super(),this.lastEvent=null,this.msgList=[],this.liveId=0,this.liveStartTime=Math.round(Date.now()/1e3),this.liveMemberList=[],this.account=null,this.isHide=!1,this.innerCurrLikeCount=0,this.innerCurrLikeCountStr="0",this.innerCurrOnlineCount=0,this.innerCurrOnlineCountStr="0",this.innerTotalRewardCount=0,this.innerTotalRewardCountStr="0",this.innerTotalViewCount=0,this.innerTotalViewCountStr="0",this.innerReadyToStart=!1,this.innerNetThresholdCount=0,this.innerNetToasted=!1,this.init()}reset(){this.lastEvent=null,this.innerCurrLikeCount=0,this.innerCurrLikeCountStr="0",this.innerCurrOnlineCount=0,this.innerCurrOnlineCountStr="0",this.innerTotalRewardCount=0,this.innerTotalRewardCountStr="0",this.innerTotalViewCount=0,this.innerTotalViewCountStr="0",this.msgList=[]}bindHideAndShowEvent(){var e=()=>{this.isHide=!1,this.innerReadyToStart&&(this.innerReadyToStart=!1,this.emit("liveStart")),this.msgList.length&&(this.emit("msgListChange",this.msgList),this.msgList=[])};Jd((()=>{this.isHide=!0})),ih((()=>{e()})),Xm((()=>{this.isHide=!0})),T_((()=>{e()}))}init(){this.bindHideAndShowEvent(),WeixinJSBridge.on("onGameLiveInfo",this.gameLiveInfoEventHandler.bind(this)),WeixinJSBridge.on("onGameLiveNetStateChange",this.gameLiveNetStateEventHandler.bind(this)),uv(this.gameLiveStateChagneHandler.bind(this)),WeixinJSBridge.on("onGameLiveMicStateChange",this.micStateChangeHandler.bind(this))}destroy(){this.reset(),q2.off("micStateChange"),q2.off("msgListChange"),q2.off("roomInfoChange")}gameLiveNetStateEventHandler(e){var{quality:t,threshold:i}=e;this.innerNetToasted||(t>=i?(this.innerNetThresholdCount+=1,this.innerNetThresholdCount>3&&(Hl({icon:"none",title:"当前网络信号差"}),this.innerNetToasted=!0,setTimeout((()=>{this.innerNetToasted=!1}),6e4))):this.innerNetThresholdCount=0)}micStateChangeHandler(e){this.emit("micStateChange",e)}gameLiveStateChagneHandler(e){e.event===c2.End?this.emit("liveEnd",e):e.event===c2.Start?(e.extra&&(this.account=e.extra,this.liveId=this.account.liveId,z2.setBase({FuncID:`${this.account.finderUsername}:${this.liveId}`})),this.getRoomInfo(),this.isHide?this.innerReadyToStart=!0:this.emit("liveStart")):e.event===c2.PreStart&&this.emit("livePreStart");var t,i=JSON.parse(JSON.stringify(e));delete i.extra,t=i,z2.send({UIArea:0,PositionID:1,ActionID:28,ExternInfo:"string"==typeof t?encodeURIComponent(t):encodeURIComponent(JSON.stringify(t))})}gameLiveInfoEventHandler(e){this.lastEvent=e;var{msgList:t=[]}=e;if(this.isHide)this.msgList.push(...t);else{t.length&&this.emit("msgListChange",t);var i=!1;e.currLikeCount===this.innerCurrLikeCount&&e.currOnlineCount===this.innerCurrOnlineCount&&e.totalRewardCount===this.innerTotalRewardCount&&e.totalViewCount===this.innerTotalViewCount||(i=!0),this.innerCurrOnlineCount===e.currOnlineCount&&this.innerTotalRewardCount===e.totalRewardCount||this.emit("roomListChange"),this.currLikeCount=e.currLikeCount||0,this.currOnlineCount=e.currOnlineCount||0,this.totalRewardCount=e.totalRewardCount||0,this.totalViewCount=e.totalViewCount||0,i&&this.emit("roomInfoChange",this.roomInfo)}}getCurrentRoomMemberInfo(){return Q2.gameLiveInfoControl(u2.GetCurrentRoomMemberInfo).then((e=>{this.liveMemberList=e&&e.memberList||[]}))}getRoomInfo(){return Q2.gameLiveInfoControl(u2.GetCurrentRoomInfo).then((e=>{e.errMsg.indexOf(":ok")>-1&&e&&e.startTime&&(this.liveStartTime=e&&e.startTime)}))}get roomInfo(){return`${this.currLikeCount}喝彩·${this.totalViewCount}人看过·${this.currOnlineCount}人在线·${this.totalRewardCount}热度`}get currLikeCount(){return this.innerCurrLikeCountStr}set currLikeCount(e){Y2(this,"CurrLikeCount",e)}get currOnlineCount(){return this.innerCurrOnlineCountStr}set currOnlineCount(e){Y2(this,"CurrOnlineCount",e)}get totalRewardCount(){return this.innerTotalRewardCountStr}set totalRewardCount(e){Y2(this,"TotalRewardCount",e)}get totalViewCount(){return this.innerTotalViewCountStr}set totalViewCount(e){Y2(this,"TotalViewCount",e)}}var q2=new $2;var Q2=new class{shareToFriend(e=!1){!function(e=!1){z2.send({UIArea:e?3606:3605,PositionID:e?1:2,ActionID:2})}(e),WeixinJSBridge.invoke("shareGameLive",{type:h2.friend},(t=>{!function(e,t,i=!1){z2.send({UIArea:i?3606:3605,PositionID:i?1:2,ActionID:10,ActionStatus:e?"1":"2",Object:t})}(!!(t.errMsg.indexOf("ok")>-1&&(t.singleChat||t.groupChat)),`singleChat=${t.singleChat||0}:groupChat=${t.groupChat||0}`,e)}))}shareToTimeline(e=!1){!function(e=!1){z2.send({UIArea:e?3606:3605,PositionID:e?2:3,ActionID:2})}(e),WeixinJSBridge.invoke("shareGameLive",{type:h2.timeline},(t=>{!function(e,t=!1){z2.send({UIArea:t?3606:3605,PositionID:t?2:3,ActionID:10,ActionStatus:e?"1":"2"})}(!!(t.errMsg.indexOf("ok")>-1),e)}))}exitGameLive(e=t2){var t;t=Math.round(Date.now()/1e3)-q2.liveStartTime,z2.send({UIArea:3605,PositionID:1,ActionID:2,Time:t}),WeixinJSBridge.invoke("exitGameLive",{},(t=>{e(t)}))}enterGameLiveRoom(e=t2){z2.send({UIArea:3605,PositionID:5,ActionID:2}),WeixinJSBridge.invoke("enterGameLiveRoom",{},(t=>{e(t)}))}minimizeGameLive(e=t2){z2.send({UIArea:3602,PositionID:4,ActionID:2}),WeixinJSBridge.invoke("minimizeGameLive",{},(t=>{e(t)}))}gameLiveInfoControl(e){return new Promise((t=>{WeixinJSBridge.invoke("gameLiveInfoControl",{action:e},(e=>{t(e)}))}))}micOp(e,t=t2){var i=e?u2.EnableMic:u2.DisableMic;e?z2.send({UIArea:3605,PositionID:4,ActionID:2,OpType:3}):z2.send({UIArea:3605,PositionID:4,ActionID:2,OpType:7}),WeixinJSBridge.invoke("gameLiveInfoControl",{action:i},(e=>{t(e)}))}getMicState(e=t2){WeixinJSBridge.invoke("gameLiveInfoControl",{action:u2.GetCurrentMicState},(t=>{e(t)}))}},Z2=i(878);class K2 extends Ew{constructor(e){super(),this.enabled=!0,this.scrollHeight=0,this.scrollWidth=0,this.locked=!1,this.contentWidth=void 0,this.contentHeight=void 0,this.content=void 0,this.getY=0,this.scrollContainer=void 0,this.maskTexture=void 0;var{width:t,height:i,maskTexture:r,bottomCbk:n,scrollerOptions:a={}}=e;this.contentWidth=t,this.contentHeight=i,this.maskTexture=r,this.init(n,a),this.initMask()}init(e,t={}){this.content=new Ew,this.addChild(this.content);var i=K()({scrollingY:!0,scrollingX:!1},t);this.scrollContainer=new Z2.Scroller(((t,r)=>{var n=this.isBottom();i.scrollingY&&(this.content.position.y=-r),i.scrollingX&&(this.content.position.x=-t),e&&!n&&this.isBottom()&&e()}),i),this.update(),this.eventDispatch()}eventDispatch(){this.interactive=!0,this.on("pointerdown",(e=>{if(this.enabled){var t=e.data.originalEvent;this.scrollContainer.doTouchStart(t.changedTouches||t.touches,t.timeStamp)}})),this.on("pointermove",(e=>{if(this.enabled){var t=e.data.originalEvent;this.scrollContainer.doTouchMove(t.changedTouches||t.touches,t.timeStamp),this.emit("scrollevent")}})),this.on("pointerup",(e=>{if(this.enabled){var t=e.data.originalEvent;this.scrollContainer.doTouchEnd(t.timeStamp)}})),this.on("pointerupoutside",(e=>{if(this.enabled){var t=e.data.originalEvent;this.scrollContainer.doTouchEnd(t.timeStamp)}}))}enable(){this.enabled=!0}disable(){this.enabled=!1}setScrollHeight(e=0,t=0){this.scrollHeight=Math.round(100*e)/100||this.contentHeight,this.scrollWidth=Math.round(100*t)/100||this.contentWidth,this.scrollContainer.setDimensions(this.contentWidth,this.contentHeight,this.scrollWidth,this.scrollHeight)}initMask(){var e;this.maskTexture?((e=new cS(this.maskTexture)).width=this.contentWidth,e.height=this.contentHeight):((e=new HS(null,{bindingScreen:D2()})).beginFill(16777215,1),e.drawRect(0,0,this.contentWidth,this.contentHeight),e.endFill()),this.addChild(e),this.mask=e}updateContentHeight(e){this.contentHeight=e;var t=this.mask;this.maskTexture?t.height=this.contentHeight:(t.clear(),t.beginFill(16777215,1),t.drawRect(0,0,this.contentWidth,this.contentHeight),t.endFill())}isBottom(){return this.content.position.y<=Math.ceil(Math.min(this.contentHeight-this.scrollHeight,0))}scrollTo(e,t=!1){this.scrollContainer.scrollTo(0,-e,t)}scrollToBottom(){this.scrollTo(Math.ceil(Math.min(this.contentHeight-this.scrollHeight,0)),!1)}update(){this.scrollHeight=this.content.height,this.scrollContainer.setDimensions(this.contentWidth,this.contentHeight,this.contentWidth,this.scrollHeight)}}var X2,J2={debug:!1,icons:"https://res.wx.qq.com/wechatgame/product/minigamelive/20210810f5f50/icons.json",MAX_MESSAGE_LENGTH:20,MAX_USER_LENGTH:20,ENTER_ANIMATE_ID:0,TOAST_ANIMATE_ID:1,USE_TEXT_GROUP:!0,RANK_COLORS:["#E1B363","#B6C8CD","#DFB599","#E0E0E0"]};class e3 extends Ew{constructor(e){super(),this.app=void 0,this.animating=!1,this.renderY=0,this.viewerData=[],this.scrollBox=void 0,this.viewerText=void 0,this.giftText=void 0,this.rankBackground=void 0,this.rankList=void 0,this.shareText=void 0,this.tipsText=void 0,this.hasScrollReport=!1,this.overTips=void 0,this.autoTicker=void 0,this.app=e,this.init(),this.visible=!1}init(){this.position.set(Q1.toolWidth,Q1.headerHeight),this.initMask(),this.scrollBox=new K2({width:Q1.device.width-Q1.toolWidth,height:Q1.device.height-Q1.headerHeight,scrollerOptions:{scrollingX:!1,scrollingY:!0}}),this.scrollBox.on("scrollevent",(()=>{this.hasScrollReport||(this.hasScrollReport=!0,z2.send({UIArea:3604,PositionID:1,ActionID:21}))}));this.viewerText=new tI(`在线观众 (${this.viewerData.length}人)`,Z1.dataStyle,D2()),this.viewerText.position.set(8*Q1.pixelRatio,0),this.giftText=new tI("贡献热度",Z1.dataStyle,D2()),this.giftText.position.set(Q1.device.width-Q1.toolWidth-this.giftText.width-8*Q1.pixelRatio,0),this.giftText.cacheAsBitmap=!0,this.tipsText=new tI("暂无在线观众，",Z1.tipsStyle,D2()),this.tipsText.position.set(56*Q1.pixelRatio,52*Q1.pixelRatio+0),this.tipsText.visible=!1,this.tipsText.cacheAsBitmap=!0,this.shareText=new tI("邀请朋友观看",Z1.linkStyle,D2()),this.shareText.position.set(56*Q1.pixelRatio+this.tipsText.width,52*Q1.pixelRatio+0),this.shareText.visible=!1,this.shareText.cacheAsBitmap=!0,k2(this.shareText),this.shareText.on("pointertap",(()=>{Q2.shareToFriend()})),this.rankBackground=new HS(null,{bindingScreen:D2()}),this.rankBackground.position.set(0,0),this.rankList=new Ew,this.rankList.position.set(0,26*Q1.pixelRatio+0),this.scrollBox.content.addChild(this.rankBackground,this.viewerText,this.giftText,this.rankList,this.tipsText,this.shareText),this.addChild(this.scrollBox),M2(this.shareText,"userShare",(()=>!this.app.animating&&this.visible)),this.renderList()}initMask(){var e=new HS(null,{bindingScreen:D2()});e.beginFill(16777215,1),U2(e,0,4*Q1.pixelRatio-Q1.headerHeight,Q1.device.width-Q1.toolWidth-4*Q1.pixelRatio,162*Q1.pixelRatio,{tl:4*Q1.pixelRatio,tr:4*Q1.pixelRatio,br:4*Q1.pixelRatio,bl:4*Q1.pixelRatio},{fill:16777215,alpha:1}),e.endFill(),this.addChild(e),this.mask=e,this.mask.scale.y=0}renderRankBackground(){this.rankBackground.clear(),this.rankBackground.beginFill(16777215,.1);for(var e=50*Q1.pixelRatio,t=Math.min(J2.MAX_USER_LENGTH,this.viewerData.length),i=0;i<t;i++)this.rankBackground.drawRect(24*Q1.pixelRatio,e,Q1.device.width-Q1.toolWidth-24*Q1.pixelRatio,1*Q1.pixelRatio),e+=32*Q1.pixelRatio;this.rankBackground.endFill()}renderList(){var e=[];if(this.rankList.children.length>0&&(e=this.rankList.removeChildren()),0===this.viewerData.length)this.tipsText.visible=!0,this.shareText.visible=!0,this.viewerText.visible=!1,this.giftText.visible=!1,this.rankBackground.clear();else{this.renderY=0,e.forEach(((e,t)=>{e.visible=!1,t>this.viewerData.length&&e.destroy({children:!0,texture:!0,baseTexture:!0})}));for(var t=Math.min(J2.MAX_USER_LENGTH,this.viewerData.length),i=0;i<t;i++){var r=this.viewerData[i];r.rank=i+1,this.renderItem(r,e[i])}this.tipsText.visible=!1,this.shareText.visible=!1,this.viewerText.visible=!0,this.giftText.visible=!0,this.viewerText.text=`在线观众 (${this.viewerData.length}人)`,this.renderRankBackground(),this.renderTips(),this.scrollBox.setScrollHeight(this.rankList.y+this.rankList.height+16*Q1.pixelRatio)}}renderTips(){this.viewerData.length>J2.MAX_USER_LENGTH?this.overTips?this.overTips.visible=!0:(this.overTips=new tI(`只展示前${J2.MAX_MESSAGE_LENGTH}位在线观众，完整列表请进视频号查看。`,Z1.tipStyle,D2()),this.overTips.position.set((Q1.device.width-Q1.toolWidth-this.overTips.width)/2,this.rankList.y+this.rankList.height+16*Q1.pixelRatio),this.overTips.cacheAsBitmap=!0,this.scrollBox.content.addChild(this.overTips)):this.overTips&&(this.overTips.visible=!1)}renderItem(e,t=null){var i=`${e.amount||0}`,r=J2.RANK_COLORS[3];if(e.rank<4&&i&&(r=J2.RANK_COLORS[e.rank-1]),J2.USE_TEXT_GROUP){var n=t;n?(n.style.groupText=!1,n.text=i,n.visible=!0):n=new tI(i,Z1.contextStyle,D2());var a=q1(e.nickname);n.style.groupText=[{length:`${e.rank}`.length,color:r,paddingLeft:8*Q1.pixelRatio,absolute:!0},{length:a.length,color:"#ffffff",paddingLeft:24*Q1.pixelRatio,absolute:!0},{length:`${i}`.length,color:"#ffffff",paddingLeft:Q1.device.width-Q1.toolWidth-8*Q1.pixelRatio-n.width,absolute:!0}],n.text=`${(i?e.rank:"-")+a+i}`,n.position.set(0,this.renderY),this.rankList.addChild(n)}else{var o=new tI(i?`${e.rank}`:"-",Object.assign({},Z1.giftStyle,{fill:r}),D2()),s=new tI(e.nickname,Z1.contextStyle,D2()),l=new tI(i,Z1.contextStyle,D2());o.position.set(8*Q1.pixelRatio,this.renderY),s.position.set(24*Q1.pixelRatio,this.renderY),l.position.set(Q1.device.width-Q1.toolWidth-8*Q1.pixelRatio-l.width,this.renderY),this.rankList.addChild(o,s,l)}this.renderY+=32*Q1.pixelRatio}updateViewData(e){this.viewerData=e,this.renderList()}show(){var e;this.animating||(this.animating=!0,this.autoTicker&&(clearTimeout(this.autoTicker),this.autoTicker=null),this.scrollBox.enable(),null===(e=this.scrollBox)||void 0===e||e.scrollTo(0),this.alpha=1,this.visible=!0,this.mask&&new wI.Tween(this.mask.scale).to({y:1},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start(),z2.send({UIArea:3604,PositionID:0,ActionID:1}))}hide(e=!1){this.animating||(this.animating=!0,this.scrollBox.disable(),e&&new wI.Tween(this).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.visible=!1})).start(),this.mask&&new wI.Tween(this.mask.scale).to({y:0},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1,this.visible=!1})).start(),this.autoDestroy())}autoDestroy(){this.autoTicker=setTimeout((()=>{this.rankList.removeChildren().forEach((e=>{e.destroy({children:!0,texture:!0,baseTexture:!0})})),this.autoTicker=null}),5e3)}}function t3(e,t){if(0===e.length)return e;const i=o2();let r=e,n=i.TextMetrics.measureText(r,t,!0);for(;n.lines.length>1;){let e=n.lines[0];e=z1(e,0,Y1(e).length-2),r=`${e}…`,n=i.TextMetrics.measureText(r,t,!0)}return r}function i3(e,t,i,r,n,a=null,o){const s=!a;let l,u,c;const d=o2();return a?(c=a,l=c.children[0],u=c.children[1]):(c=new d.Container,l=new d.Graphics(null,{bindingScreen:o}),u=new d.Text(e,t,o)),u.text=e,u.position.set(i.left,i.top),l.clear(),l.beginFill(r.fill,r.alpha),l.drawRoundedRect(0,0,u.width+i.left+(i.right||0),u.height+i.top+(i.bottom||0),n),l.endFill(),s&&c&&c.addChild(l,u),{labelContainer:c,labelBackground:l,labelText:u}}class r3 extends Ew{constructor(e){super(),this.app=void 0,this.liveData={headerUrl:"https://mmgame.qpic.cn/image/33e09bb06dc27e8aa876d96d003b3a2f1941346190bc1db68f6735bcdecf65f5/0",nickname:"用户昵称"},this.liveIcon=void 0,this.liveName=void 0,this.liveTime=void 0,this.liveTimeIcon=void 0,this.buttonMic=void 0,this.buttonMicRedTex=void 0,this.buttonMicGrayTex=void 0,this.liveTimeTicker=void 0,this.toastNode=null,this.app=e,this.init(),this.initMask(),this.visible=!1}init(){this.setData(),this.position.set(Q1.toolWidth,0);var e=4*Q1.pixelRatio,t=new HS(null,{bindingScreen:D2()});U2(t,0,4*Q1.pixelRatio,Q1.device.width-Q1.toolWidth-4*Q1.pixelRatio,Q1.maxSize.height-8*Q1.pixelRatio,{tl:8*Q1.pixelRatio,tr:8*Q1.pixelRatio,br:8*Q1.pixelRatio,bl:8*Q1.pixelRatio},{fill:2894892,alpha:1}),t.beginFill(16777215,.1),t.drawRect(0,e+47*Q1.pixelRatio,Q1.device.width-Q1.toolWidth,1),t.endFill();var i=new HS(null,{bindingScreen:D2()});this.liveIcon=cS.from(this.liveData.headerUrl||$w.getWHITE(D2()),{bindingScreen:D2()}),this.liveIcon.width=32*Q1.pixelRatio,this.liveIcon.height=32*Q1.pixelRatio,this.liveIcon.position.set(8*Q1.pixelRatio,e+8*Q1.pixelRatio),i.beginFill(16777215,1),i.drawCircle(24*Q1.pixelRatio,e+24*Q1.pixelRatio,16*Q1.pixelRatio),i.endFill(),this.liveIcon.mask=i;var r=new qS(Z1.titleStyle),n=t3(this.liveData.nickname,r);this.liveName=new tI(n,r,D2()),this.liveName.position.set(48*Q1.pixelRatio,e+8*Q1.pixelRatio);var a=3*Q1.pixelRatio;this.liveTimeIcon=new HS(null,{bindingScreen:D2()}),this.liveTimeIcon.beginFill(16777215,.5),this.liveTimeIcon.drawCircle(48*Q1.pixelRatio+a,e+30*Q1.pixelRatio+a,a),this.liveTimeIcon.endFill(),this.liveTimeIcon.cacheAsBitmap=!0,this.liveTime=new tI("",Z1.timeStyle,D2()),this.liveTime.position.set(58*Q1.pixelRatio,e+26*Q1.pixelRatio),this.liveTime.scale.set(10/12,10/12),this.liveTime.pivot.set(0,-5),this.liveTime.alpha=.5;var o=new cS(this.app.images["more/exit.png"]);o.width=70*Q1.pixelRatio,o.height=32*Q1.pixelRatio,o.position.set(Q1.device.width-Q1.toolWidth-80*Q1.pixelRatio,e+8*Q1.pixelRatio),o.hitArea=new KE(-10*Q1.pixelRatio,-10*Q1.pixelRatio,90*Q1.pixelRatio,52*Q1.pixelRatio);var s=new Ew;s.position.set(0*Q1.pixelRatio,e+48*Q1.pixelRatio);var l=18*Q1.pixelRatio,u=12*Q1.pixelRatio,c=18*Q1.pixelRatio,d=64*Q1.pixelRatio,h=58*Q1.pixelRatio,p=new cS(this.app.images["more/button_share.png"]);p.width=d,p.height=h,p.position.set(l,u);var f=new cS(this.app.images["more/button_timeline.png"]);f.width=d,f.height=h,f.position.set(l+d+c,u),this.buttonMicRedTex=this.app.images["more/button_mic-red.png"],this.buttonMicGrayTex=this.app.images["more/button_mic-gray.png"],this.buttonMic=new cS(this.buttonMicRedTex),this.buttonMic.width=d,this.buttonMic.height=h,this.buttonMic.position.set(l+2*(d+c),u),s.addChild(f,p,this.buttonMic),k2(f),f.on("pointertap",(()=>{Q2.shareToTimeline()})),k2(p),p.on("pointertap",(()=>{Q2.shareToFriend()})),k2(o),o.on("pointertap",(()=>{Q2.exitGameLive()})),k2(this.buttonMic),this.buttonMic.on("pointertap",(()=>{this.showToast("麦克风已打开"),Q2.getMicState((e=>{var t=!!e.mute;Q2.micOp(t,(t=>{t.errMsg.indexOf("ok")>-1&&(!e.mute?(this.buttonMic.texture=this.buttonMicRedTex,this.showToast("麦克风已关闭")):(this.buttonMic.texture=this.buttonMicGrayTex,this.showToast("麦克风已打开")))}))}))}));var g=new cS(this.app.images["more/tips.png"]);g.width=268*Q1.pixelRatio,g.height=26*Q1.pixelRatio,g.position.set(0,132*Q1.pixelRatio);var _=new HS(null,{bindingScreen:D2()});_.beginFill(3355443,.3),_.drawRect(0,0,86*Q1.pixelRatio,38*Q1.pixelRatio),_.hitArea=new KE(-10*Q1.pixelRatio,-10*Q1.pixelRatio,106*Q1.pixelRatio,58*Q1.pixelRatio),_.endFill(),_.alpha=.3,_.interactive=!0,_.on("pointerup",(()=>{_.alpha=.3})),_.on("pointerdown",(()=>{_.alpha=1})),_.on("pointerupoutside",(()=>{_.alpha=.3})),_.on("pointertap",(()=>{Q2.enterGameLiveRoom()})),_.x=172*Q1.pixelRatio,_.y=132*Q1.pixelRatio,this.addChild(t,this.liveName,this.liveTime,this.liveTimeIcon,s,g,o,_,this.liveIcon,i),M2(f,"moreTimeline",(()=>!this.app.animating&&this.visible)),M2(p,"moreShare",(()=>!this.app.animating&&this.visible)),M2(o,"moreExit",(()=>!this.app.animating&&this.visible)),M2(this.buttonMic,"moreMic",(()=>!this.app.animating&&this.visible)),M2(_,"moreReturn",(()=>!this.app.animating&&this.visible))}setData(){q2.account&&(this.liveData.headerUrl===q2.account.headerUrl&&this.liveData.nickname===q2.account.nickname||(this.liveData=q2.account,this.liveIcon&&(this.liveIcon.texture=new $w(new Uw(this.liveData.headerUrl))),this.liveName&&(this.liveName.text=this.liveData.nickname)))}refreshTime(){var e=Math.round(Date.now()/1e3)-q2.liveStartTime,t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),r=e-3600*t-60*i;t<10&&(t=`0${t}`),i<10&&(i=`0${i}`),r<10&&(r=`0${r}`),this.liveTime&&(this.liveTime.text=`${t}:${i}:${r}`)}initMask(){var e=new HS(null,{bindingScreen:D2()});e.beginFill(16777215,1),e.drawRect(0,0,Q1.device.width-Q1.toolWidth,Q1.device.height),e.endFill(),this.addChild(e),this.mask=e,this.mask.scale.x=0}showToast(e){var t,i=64*Q1.pixelRatio,r=69*Q1.pixelRatio,n={top:6*Q1.pixelRatio,bottom:6*Q1.pixelRatio,left:12*Q1.pixelRatio,right:12*Q1.pixelRatio},a=4*Q1.pixelRatio,o=i3(e,Z1.toastStyle,n,{fill:1710618,alpha:1},a,this.toastNode,D2());this.toastNode||(this.toastNode=o.labelContainer,this.addChild(this.toastNode)),null===(t=this.toastNode)||void 0===t||t.position.set(i,r),F2(J2.TOAST_ANIMATE_ID,this.toastNode)}show(){z2.send({UIArea:3605,PositionID:0,ActionID:1}),this.alpha=1,this.visible=!0,this.liveTimeFade(),Q2.getMicState((e=>{e.mute?this.buttonMic.texture=this.buttonMicRedTex:this.buttonMic.texture=this.buttonMicGrayTex})),this.mask&&new wI.Tween(this.mask.scale).to({x:1},500).easing(wI.Easing.Quadratic.InOut).start(),this.refreshTime()}hide(e=!1){e&&new wI.Tween(this).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).start(),this.mask?new wI.Tween(this.mask.scale).to({x:0},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.close()})).start():this.close()}close(){this.visible=!1,this.liveTimeTicker&&(wI.remove(this.liveTimeTicker),this.liveTimeTicker=null)}liveTimeFade(){this.liveTimeTicker&&(wI.remove(this.liveTimeTicker),this.liveTimeTicker=null),this.liveTimeIcon.alpha=1,this.liveTimeTicker=new wI.Tween(this.liveTimeIcon).to({alpha:0},500).yoyo(!0).easing(wI.Easing.Quadratic.InOut).repeat(1/0).onRepeat((()=>{this.refreshTime()})).start()}}class n3 extends Ew{constructor(e){super(),this.app=void 0,this.newMessageCount=0,this.hasScrollReport=!1,this.scrollBox=void 0,this.enterBox=void 0,this.newMessage=void 0,this.chatBox=void 0,this.overTips=void 0,this.app=e,this.init()}init(){this.scrollBox=new K2({width:Q1.designSize.width-Q1.toolWidth,height:Q1.designSize.height-Q1.headerHeight,maskTexture:this.app.images["mask/rect.png"],bottomCbk:this.hideNewNessage.bind(this),scrollerOptions:{scrollingX:!1,scrollingY:!0}}),this.scrollBox.position.set(Q1.toolWidth,Q1.headerHeight),this.scrollBox.getY=2*Q1.pixelRatio,this.scrollBox.on("scrollevent",(()=>{this.hasScrollReport||(this.hasScrollReport=!0,z2.send({UIArea:3603,PositionID:1,ActionID:21}))})),this.chatBox=new Ew,this.scrollBox.content.addChild(this.chatBox),this.enterBox=new Ew,this.enterBox.position.set(Q1.toolWidth,Q1.headerHeight+2*Q1.pixelRatio),this.addChild(this.scrollBox,this.enterBox),z2.send({UIArea:3603,PositionID:0,ActionID:1})}updateMessage(e){e&&(e.msgType===s2.Audience_Join?this.renderEnterMessage(e):this.renderMessage(e))}renderNewMessage(){var e=`${Math.min(this.newMessageCount,J2.MAX_MESSAGE_LENGTH)}条新消息`,t=Q1.toolWidth+8*Q1.pixelRatio,i=Q1.device.height-20*Q1.pixelRatio-8*Q1.pixelRatio,r={top:6*Q1.pixelRatio,bottom:6*Q1.pixelRatio,left:8*Q1.pixelRatio,right:8*Q1.pixelRatio+12*Q1.pixelRatio+4*Q1.pixelRatio},n={fill:16777215,alpha:1},a=12*Q1.pixelRatio;if(this.newMessage){var o=this.newMessage.children[1],s=this.newMessage.children[2];i3(e,Z1.newMessageStyle,r,n,a,this.newMessage,D2()),this.newMessage.position.set(t,i),s.position.x=8*Q1.pixelRatio+o.width+4*Q1.pixelRatio}else{var l=i3(e,Z1.newMessageStyle,r,n,a,null,D2());this.newMessage=l.labelContainer,this.newMessage.position.set(t,i),k2(this.newMessage),this.newMessage.on("pointertap",(()=>{this.scrollBox.scrollToBottom()})),this.addChild(this.newMessage),M2(this.newMessage,"chatNew",(()=>!this.app.animating&&this.visible&&this.newMessage.visible));var u=new cS(this.app.images["icon/arrow-outlined.png"]);u.position.set(8*Q1.pixelRatio+l.labelText.width+4*Q1.pixelRatio,6*Q1.pixelRatio),u.width=12*Q1.pixelRatio,u.height=12*Q1.pixelRatio,this.newMessage.addChild(u);var c=new cS($w.EMPTY);c.width=2*this.newMessage.width,c.height=3*this.newMessage.height,c.position.set(-c.width/8,-c.height/2),this.newMessage.addChild(c)}this.newMessage.visible=!0}hideNewNessage(){this.newMessage&&(this.newMessage.visible=!1),this.newMessageCount=0}renderEnterMessage(e){var t=`${q1(e.senderNickName)} ${e.content}`,i=8*Q1.pixelRatio,r={top:0,bottom:0,left:8*Q1.pixelRatio,right:8*Q1.pixelRatio},n=12*Q1.pixelRatio,a=this.enterBox.children[0],o=i3(t,Z1.joinStyle,r,{fill:3355443,alpha:1},n,a,D2());a||(a=o.labelContainer,this.enterBox.addChild(a)),a.position.set(i,0),F2(J2.ENTER_ANIMATE_ID,a)}renderMessage(e){var t,i,r=8*Q1.pixelRatio,n=!(e.msgType!==s2.ComboLiveReward),a=!(e.msgType!==s2.RewardRankingNotice),o=!!e.rankingPosition,s=!(e.msgType!==s2.First_Notice),l=this.chatBox.children.length>=J2.MAX_MESSAGE_LENGTH,u=0;l?([t]=this.chatBox.children,u=t.contentHeight,t.removeChildren(),this.renderTips()):t=new Ew,t.position.set(0,this.scrollBox.getY);var c=0;(n||a||o||s)&&(n?i=new cS(this.app.images["label/label_gift.png"]):s||a?i=new cS(this.app.images["label/label_notice.png"]):o&&(i=new cS(this.app.images[`label/label_${e.rankingPosition}.png`])),i&&(i.width=i.width/3*Q1.pixelRatio,i.height=i.height/3*Q1.pixelRatio,i.position.set(r,0),t.addChild(i),t.label=i,r+=i.width+4*Q1.pixelRatio,c=i.width+4*Q1.pixelRatio));var d,h=0,p=q1(e.senderNickName);if(d=p&&!n?`${p}：`:p&&n?`${p} `:"",J2.USE_TEXT_GROUP){var f;if((f=l?t.messageNode:new tI("",Z1.contextStyle,D2())).style.firstLine=c,f.style.groupText=[{length:d.length,color:"#e0e0e0",paddingLeft:c},{length:(e.content||"").length,color:"#ffffff",firstLine:c}],f.text=d+e.content,f.position.set(8*Q1.pixelRatio,0),t.addChild(f),n){var g;t.gift?(g=t.gift).texture=$w.from(e.rewardThumbUrl,{bindingScreen:D2()}):((g=cS.from(e.rewardThumbUrl||$w.EMPTY,{bindingScreen:D2()})).width=16*Q1.pixelRatio,g.height=16*Q1.pixelRatio),g.position.set(8*Q1.pixelRatio+f.width,0),t.addChild(g),t.gift=g;var _=`x${e.comboRewardCount||1}`;f.style.groupText.push({length:_.length,color:"#ffffff",paddingLeft:c+18*Q1.pixelRatio}),f.text=d+e.content+_}h=f.height+4*Q1.pixelRatio,t.messageNode=f}else{var m;(m=l?t.userName:new tI("",Z1.userNameStyle,D2())).text=d,m.position.set(r,0),t.addChild(m),t.userName=m,d.length>0&&(r+=m.width),Z1.contextStyle.wordWrapWidth=Q1.device.width-40*Q1.pixelRatio-r;var v=XS.measureText(e.content||"",new qS(Z1.contextStyle));if(v.lines.length>1){var y,A,{lines:b}=v,E=b[0],w=b.slice(1).join("");l?((y=t.firstRowContent).text=E,y.style.wordWrapWidth=Z1.contextStyle.wordWrapWidth):y=new tI(E,Z1.contextStyle,D2()),y.position.set(r,0),Z1.contextStyle.wordWrapWidth=Q1.device.width-48*Q1.pixelRatio,l&&t.otherRowContent?((A=t.otherRowContent).text=w,A.style.wordWrapWidth=Z1.contextStyle.wordWrapWidth):A=new tI(w,Z1.contextStyle,D2()),A.position.set(8*Q1.pixelRatio,Z1.contextStyle.lineHeight),t.addChild(y,A),t.firstRowContent=y,t.otherRowContent=A,h=y.height+A.height+4*Q1.pixelRatio}else{var T,C,S=new tI(e.content||"",Z1.contextStyle,D2());if(S.position.set(r,0),t.addChild(S),t.firstRowContent=S,h=S.height+4*Q1.pixelRatio,r+=S.width,n)t.gift?((T=t.gift).texture=new $w(new Uw(e.rewardThumbUrl)),C=t.giftText):(T=cS.from(e.rewardThumbUrl||$w.EMPTY,{bindingScreen:D2()}),C=new tI("",Z1.contextStyle,D2())),T.width=16*Q1.pixelRatio,T.height=16*Q1.pixelRatio,T.position.set(r,0),C.text=`x${e.comboRewardCount||1}`,C.position.set(r+T.width,0),t.addChild(T,C),t.gift=T,t.giftText=C}}t.contentHeight=h,this.chatBox.addChild(t),l&&(this.chatBox.children.forEach((e=>{e.y-=u})),this.scrollBox.getY-=u),this.scrollBox.getY+=h;var I=this.scrollBox.isBottom();this.scrollBox.setScrollHeight(this.chatBox.height+8*Q1.pixelRatio),I||this.app.locked?this.scrollBox.scrollToBottom():(this.newMessageCount+=1,this.renderNewMessage(),this.scrollBox.content.y=Math.min(this.scrollBox.content.y+u,0))}renderTips(){this.overTips||(this.overTips=new tI(`只展示最新的${J2.MAX_MESSAGE_LENGTH}条消息，更多请进视频号查看`,Z1.tipStyle,D2()),this.overTips.position.set((Q1.device.width-Q1.toolWidth-this.overTips.width)/2,-8*Q1.pixelRatio-this.overTips.height),this.overTips.cacheAsBitmap=!0,this.scrollBox.content.addChild(this.overTips))}lock(){this.hideNewNessage(),this.scrollBox.disable();var e={height:Q1.designSize.height-Q1.headerHeight};new wI.Tween(e).to({height:Q1.lockSize.height-Q1.headerHeight},500).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.scrollBox.updateContentHeight(e.height),this.scrollBox.setScrollHeight(this.chatBox.height+8*Q1.pixelRatio),this.scrollBox.scrollToBottom()})).start()}unlock(){this.scrollBox.enable();var e={height:Q1.lockSize.height-Q1.headerHeight};new wI.Tween(e).to({height:Q1.designSize.height-Q1.headerHeight},500).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.scrollBox.updateContentHeight(e.height),this.scrollBox.setScrollHeight(this.chatBox.height+8*Q1.pixelRatio),this.scrollBox.scrollToBottom()})).start()}disableInteractive(){this.scrollBox.interactive=!1}enableInteractive(){this.scrollBox.interactive=!0}}class a3 extends Ew{constructor(e,t={}){super(),this.needBg=!1,this.volumnBg=void 0,this.innerMute=!1,this.app=void 0,this.micMask=void 0,this.volumnGraphics=void 0,this.innerVolumn=void 0,this.bgOpen=void 0,this.bgClose=void 0,this.volumnDefaultY=0,this.muteTicker=null,this.volumnTicker=null,this.app=e,this.init(t)}init(e){var t=32*Q1.pixelRatio,i=32*Q1.pixelRatio,{width:r=t,needBg:n=!1}=e,a=r/t;this.needBg=n;var o=t*a,s=i*a;this.bgOpen=new cS(this.app.images["mic/open.png"]),this.bgOpen.width=o,this.bgOpen.height=s,this.bgClose=new cS(this.app.images["mic/close.png"]),this.bgClose.width=o,this.bgClose.height=s,this.bgClose.visible=!1,this.micMask=new cS(this.app.images["mic/mask.png"]),this.micMask.width=8*Q1.pixelRatio*a,this.micMask.height=16*Q1.pixelRatio*a,this.micMask.position.set(12*Q1.pixelRatio*a,4*Q1.pixelRatio*a),this.volumnDefaultY=4*Q1.pixelRatio*a+this.micMask.height,this.volumnGraphics=new cS($w.getWHITE(D2())),this.volumnGraphics.position.set(12*Q1.pixelRatio*a,this.volumnDefaultY),this.volumnGraphics.width=this.micMask.width,this.volumnGraphics.height=this.micMask.height,this.volumnGraphics.mask=this.micMask,this.addChild(this.bgOpen,this.bgClose,this.volumnGraphics,this.micMask),this.volumn=0}calRenderHeight(e){return e<10?0:(Math.sin(Math.PI/100*e-Math.PI/2)/2+.5)*this.micMask.height}get volumn(){return this.innerVolumn}set volumn(e){var t=i2(e,0,100);if(t!==this.volumn){this.innerVolumn=t;var i=this.calRenderHeight(t);0!==i?(this.volumnStopAnimate(),this.volumnGraphics.position.y=this.volumnDefaultY-i):this.volumnStartAnimate()}}get mute(){return this.innerMute}set mute(e){e?(this.micMask.visible=!1,this.volumnGraphics.visible=!1,this.bgOpen.visible=!1,this.bgClose.visible=!0,this.muteStartAnimate()):(this.micMask.visible=!0,this.volumnGraphics.visible=!0,this.volumn=0,this.bgOpen.visible=!0,this.bgClose.visible=!1,this.muteStopAnimate()),this.innerMute=e}muteStopAnimate(){this.muteTicker&&(wI.remove(this.muteTicker),this.muteTicker=null)}muteStartAnimate(){this.muteStopAnimate(),this.bgClose.alpha=1,this.muteTicker=new wI.Tween(this.bgClose).to({alpha:0},1e3).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.muteTicker=new wI.Tween(this.bgClose).to({alpha:1},500).easing(wI.Easing.Quadratic.Out).onComplete((()=>{this.muteStartAnimate()})).start()})).start()}volumnStopAnimate(){this.volumnTicker&&(wI.remove(this.volumnTicker),this.volumnTicker=null)}volumnStartAnimate(){this.volumnTicker||(this.volumnGraphics.position.y=this.volumnDefaultY,this.volumnTicker=new wI.Tween(this.volumnGraphics.position).to({y:this.volumnDefaultY-.2*this.micMask.height},400).yoyo(!0).easing(wI.Easing.Quadratic.InOut).repeat(1/0).start())}}class o3 extends Ew{constructor(e){super(),this.app=void 0,this.innerHeight=40*Q1.pixelRatio,this.dataBackground=void 0,this.dataText=void 0,this.dataArrow=void 0,this.listText=void 0,this.mic=void 0,this.micStateChangeHandler=void 0,this.cacheList=[],this.app=e,this.init()}init(){this.position.set(Q1.toolWidth,0),this.interactive=!0,this.on("pointerdown",(()=>{this.dataArrow.alpha=.5})),this.on("pointerup",(()=>{this.dataArrow.alpha=1})),this.on("pointerupoutside",(()=>{this.dataArrow.alpha=1})),this.on("pointertap",(()=>{this.app.toggleGiftView()})),this.dataBackground=new HS(null,{bindingScreen:D2()}),U2(this.dataBackground,0,4*Q1.pixelRatio,Q1.device.width-Q1.toolWidth-4*Q1.pixelRatio,this.innerHeight,{tl:8*Q1.pixelRatio,tr:8*Q1.pixelRatio,br:8*Q1.pixelRatio,bl:8*Q1.pixelRatio},{fill:2894892,alpha:1}),this.dataText=new tI("",Z1.dataStyle,D2()),this.dataText.position.set(8*Q1.pixelRatio,16*Q1.pixelRatio),this.listText=new tI("",Z1.listStyle,D2()),this.listText.position.set(8*Q1.pixelRatio,24*Q1.pixelRatio),this.listText.visible=!1,this.mic=new a3(this.app,{width:12*Q1.pixelRatio,needBg:!0}),this.mic.visible=!1,this.dataArrow=new cS(this.app.images["icon/arrow.png"]),this.dataArrow.anchor.set(.5),this.dataArrow.width=16*Q1.pixelRatio,this.dataArrow.height=8*Q1.pixelRatio,this.dataArrow.position.set(Q1.device.width-Q1.toolWidth-24*Q1.pixelRatio+8*Q1.pixelRatio,22*Q1.pixelRatio),this.addChild(this.dataBackground,this.dataText,this.listText,this.mic,this.dataArrow),M2(this,"infobar",(()=>this.visible&&!this.app.locked&&!this.app.animating)),this.updateData()}updateMicPosition(){this.listText.visible?this.mic.position.set(this.dataText.position.x+this.dataText.width+4*Q1.pixelRatio,10*Q1.pixelRatio):this.mic.position.set(this.dataText.position.x+this.dataText.width+4*Q1.pixelRatio,18*Q1.pixelRatio)}updateViewData(e=null){if(e&&(this.cacheList=e),this.cacheList.length>0&&!this.dataArrow.rotation){this.dataText.position.set(8*Q1.pixelRatio,8*Q1.pixelRatio),this.listText.visible=!0;var t="",i=[];this.cacheList.forEach(((e,r)=>{var n=e.amount||0,a=J2.RANK_COLORS[3];r<4&&n&&(a=J2.RANK_COLORS[r]);var o=q1(e.nickname);t+=`• ${o} `,i.push({length:`${o}`.length+3,color:a})})),this.listText.style.groupText=i,this.listText.text=t3(t,this.listText.style)}else this.dataText.position.set(8*Q1.pixelRatio,16*Q1.pixelRatio),this.listText.visible=!1;this.updateMicPosition()}updateData(){try{this.dataText&&this.dataText.style||(this.dataText.style=new qS(Z1.dataStyle))}catch(e){}this.dataText.text=t3(q2.roomInfo,this.dataText.style),this.updateMicPosition()}micStateChange(e){new wI.Tween(this.mic).to({volumn:e.micVolume},200).easing(wI.Easing.Quadratic.InOut).start()}show(){this.dataArrow.rotation=Math.PI,this.updateViewData(),new wI.Tween(this).to({innerHeight:162*Q1.pixelRatio},500).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.dataBackground.clear(),U2(this.dataBackground,0,4*Q1.pixelRatio,Q1.device.width-Q1.toolWidth-4*Q1.pixelRatio,this.innerHeight,{tl:8*Q1.pixelRatio,tr:8*Q1.pixelRatio,br:8*Q1.pixelRatio,bl:8*Q1.pixelRatio},{fill:2894892,alpha:1})})).start()}hide(){this.dataArrow.rotation=0,new wI.Tween(this).to({innerHeight:40*Q1.pixelRatio},500).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.dataBackground.clear(),U2(this.dataBackground,0,4*Q1.pixelRatio,Q1.device.width-Q1.toolWidth-4*Q1.pixelRatio,this.innerHeight,{tl:8*Q1.pixelRatio,tr:8*Q1.pixelRatio,br:8*Q1.pixelRatio,bl:8*Q1.pixelRatio},{fill:2894892,alpha:1})})).onComplete((()=>{this.updateViewData()})).start()}lock(){new wI.Tween(this.dataBackground).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).start(),new wI.Tween(this.dataArrow).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).start(),this.dataText.style.wordWrapWidth-=this.mic.width+4*Q1.pixelRatio,this.updateData(),this.mic.visible=!0,Q2.getMicState((e=>{e.mute?this.mic.mute=!0:this.mic.mute=!1})),this.micStateChangeHandler||(this.micStateChangeHandler=this.micStateChange.bind(this)),q2.on("micStateChange",this.micStateChangeHandler),new wI.Tween(this.position).delay(500).to({x:2*Q1.toolWidth},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.dataBackground.visible=!1,this.dataArrow.visible=!1})).start()}unlock(){new wI.Tween(this.position).to({x:Q1.toolWidth},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.dataBackground.visible=!0,this.dataArrow.visible=!0,new wI.Tween(this.dataBackground).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).start(),new wI.Tween(this.dataArrow).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).start()})).start(),this.dataText.style.wordWrapWidth+=this.mic.width+4*Q1.pixelRatio,this.updateData(),this.micStateChangeHandler||(this.micStateChangeHandler=this.micStateChange.bind(this)),q2.off("micStateChange",this.micStateChangeHandler),this.mic.visible=!1}}class s3 extends Ew{constructor(e){super(),this.app=void 0,this.locked=!1,this.animating=!1,this.background=void 0,this.name="Lock",this.color=255,this.lockUp=void 0,this.lockDown=void 0,this.app=e,this.init()}init(){this.background=new cS(this.app.images["tool/lock-background.png"]),this.lockUp=new cS(this.app.images["tool/lock-up.png"]),this.lockDown=new cS(this.app.images["tool/lock-down.png"]),this.background.width=32*Q1.pixelRatio,this.background.height=32*Q1.pixelRatio,this.background.alpha=0,this.lockUp.width=6*Q1.pixelRatio,this.lockUp.height=6*Q1.pixelRatio,this.lockUp.position.set(8*Q1.pixelRatio,9*Q1.pixelRatio),this.lockUp.tint=16777215,this.lockDown.width=10*Q1.pixelRatio,this.lockDown.height=8*Q1.pixelRatio,this.lockDown.position.set(11*Q1.pixelRatio,14*Q1.pixelRatio),this.lockDown.tint=16777215,this.addChild(this.background,this.lockUp,this.lockDown)}unlock(){this.locked=!1,this.animating=!0,new wI.Tween(this.background).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).start(),new wI.Tween(this).to({color:255},250).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.color=Math.round(this.color),this.lockUp.tint=$E.rgb2hex([this.color/255,this.color/255,this.color/255]),this.lockDown.tint=$E.rgb2hex([this.color/255,this.color/255,this.color/255])})).start(),new wI.Tween(this.lockUp.position).to({y:9*Q1.pixelRatio},100).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{new wI.Tween(this.lockUp.position).to({x:8*Q1.pixelRatio},150).easing(wI.Easing.Quadratic.InOut).start()})).start(),new wI.Tween(this.position).to({x:0},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start()}lock(){this.locked=!0,this.animating=!0,new wI.Tween(this.background).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).start(),new wI.Tween(this).to({color:128},250).easing(wI.Easing.Quadratic.InOut).onUpdate((()=>{this.color=Math.round(this.color),this.lockUp.tint=$E.rgb2hex([this.color/255,this.color/255,this.color/255]),this.lockDown.tint=$E.rgb2hex([this.color/255,this.color/255,this.color/255])})).start(),new wI.Tween(this.lockUp.position).to({x:13*Q1.pixelRatio},150).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{new wI.Tween(this.lockUp.position).to({y:10*Q1.pixelRatio},100).easing(wI.Easing.Quadratic.InOut).start()})).start(),new wI.Tween(this.position).delay(500).to({x:38*Q1.pixelRatio},500).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.animating=!1})).start()}}class l3 extends Ew{constructor(e){super(),this.app=void 0,this.toolLock=void 0,this.toolMore=void 0,this.toolSmall=void 0,this.textureBack=void 0,this.textureMore=void 0,this.app=e,this.init()}init(){this.toolLock=new s3(this.app),k2(this.toolLock),this.toolLock.position.set(0,8*Q1.pixelRatio);var e=0,t=0;this.toolLock.on("pointertap",(()=>{e+=1,this.app.toggleLock(),e>=2&&this.app.autoShowGiftView(),t&&clearTimeout(t),t=setTimeout((()=>{e=0,t=0}),300)})),this.textureMore=this.app.images["tool/share.png"],this.textureBack=this.app.images["tool/back.png"],this.toolMore=new cS(this.textureMore),this.toolMore.width=32*Q1.pixelRatio,this.toolMore.height=32*Q1.pixelRatio,this.toolMore.position.set(0,56*Q1.pixelRatio),k2(this.toolMore),this.toolMore.on("pointertap",(()=>{this.app.toggleMoreView()})),this.toolSmall=new cS(this.app.images["tool/small.png"]),this.toolSmall.width=32*Q1.pixelRatio,this.toolSmall.height=32*Q1.pixelRatio,this.toolSmall.position.set(0,104*Q1.pixelRatio),k2(this.toolSmall),this.toolSmall.on("pointertap",(()=>{Q2.minimizeGameLive()})),this.addChild(this.toolLock,this.toolMore,this.toolSmall),M2(this.toolLock,"toolLock",(()=>!this.app.animating&&!this.app.locked)),M2({x:this.toolLock.x+38*Q1.pixelRatio,y:this.toolLock.y,width:this.toolLock.width,height:this.toolLock.height},"toolUnLock",(()=>!this.app.animating&&this.app.locked)),M2(this.toolMore,"toolMore",(()=>!this.app.animating&&!this.app.locked)),M2(this.toolSmall,"toolSmall",(()=>!this.app.animating&&!this.app.locked))}openMore(){this.toolMore.texture=this.textureBack}closeMore(){this.toolMore.texture=this.textureMore}lock(){this.toolLock.lock(),this.toolMore.interactive=!1,new wI.Tween(this.toolMore).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.toolMore.visible=!1})).start(),this.toolSmall.interactive=!1,new wI.Tween(this.toolSmall).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.toolSmall.visible=!1})).start()}unlock(){this.toolLock.unlock(),this.toolMore.interactive=!0,new wI.Tween(this.toolMore).delay(500).onStart((()=>{this.toolMore.visible=!0})).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).start(),this.toolSmall.interactive=!0,new wI.Tween(this.toolSmall).delay(500).onStart((()=>{this.toolSmall.visible=!0})).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).start()}}class u3{constructor(e){this.locked=!1,this.images=void 0,this.animating=!1,this.lockAnimating=!1,this.view=void 0,this.chatView=void 0,this.giftView=void 0,this.moreView=void 0,this.infobar=void 0,this.toolbar=void 0,this.background=void 0,this.autoLockTicker=0,this.msgListenerFn=void 0,this.roomListenerFn=void 0,this.autoShowGift=!1,this.roomList=[],e&&e.textures&&(this.images=e.textures,this.view=S2,this.init(),b2(),this.autoLock())}init(){if(this.view){if(this.view.x=Q1.padding.left*Q1.pixelRatio,this.view.y=Q1.padding.top*Q1.pixelRatio,this.background=new HS(null,{bindingScreen:D2()}),this.renderBackground(),this.toolbar=new l3(this),this.infobar=new o3(this),this.chatView=new n3(this),this.giftView=new e3(this),this.moreView=new r3(this),this.view.addChild(this.background,this.chatView,this.infobar,this.giftView,this.toolbar,this.moreView),q2.account){var e={msgType:s2.First_Notice,content:q2.account.joinLiveTips,comboRewardCount:0,msgCreateTime:0,msgSeq:0,rankingPosition:0,senderHeadImgUrl:"",senderNickName:""};this.updateMessage(e)}this.msgListenerFn=e=>{e.forEach((e=>{this.updateMessage(e)}))},this.roomListenerFn=()=>{var e;null===(e=this.infobar)||void 0===e||e.updateData()},q2.on("msgListChange",this.msgListenerFn),q2.on("roomInfoChange",this.roomListenerFn),q2.on("roomListChange",(()=>{this.getCurrentRoomMemberInfo()})),z2.send({UIArea:0,PositionID:0,ActionID:1,OpType:1}),this.getCurrentRoomMemberInfo()}}autoLock(){if(this.view){this.autoLockTicker=setTimeout((()=>{z2.send({UIArea:0,PositionID:3,ActionID:3}),this.lock()}),3e3);var e=()=>{this.view&&(this.view.interactive=!1,this.autoLockTicker&&(clearTimeout(this.autoLockTicker),this.autoLockTicker=0),z2.send({UIArea:0,PositionID:3,ActionID:7}),this.view.off("pointerdown",e))};this.view.interactive=!0,this.view.on("pointerdown",e)}}renderBackground(){this.background&&(this.background.clear(),this.background.beginFill(0,.9),this.background.drawRoundedRect(0,0,Q1.device.width,Q1.device.height,12*Q1.pixelRatio),this.background.beginFill(16777215,.25),this.background.drawRoundedRect(0,0,Q1.device.width,Q1.device.height,12*Q1.pixelRatio),this.background.endFill())}updateMessage(e){var t;null===(t=this.chatView)||void 0===t||t.updateMessage(e)}autoShowGiftView(){this.autoShowGift=!0}toggleGiftView(){var e;this.locked||(null!==(e=this.giftView)&&void 0!==e&&e.visible?this.closeGiftView():this.openGiftView())}getCurrentRoomMemberInfo(){q2.getCurrentRoomMemberInfo().then((()=>{this.roomList=q2.liveMemberList,this.renderRoomList()}))}renderRoomList(){this.giftView&&this.giftView.visible&&this.giftView.updateViewData(this.roomList),this.infobar&&this.infobar.visible&&this.infobar.updateViewData(this.roomList)}openGiftView(){var e,t,i;this.animating||(this.animating=!0,null===(e=this.chatView)||void 0===e||e.disableInteractive(),z2.send({UIArea:3602,PositionID:3,ActionID:2,OpType:3}),setTimeout((()=>{this.animating=!1,this.chatView&&(this.chatView.visible=!1)}),500),null===(t=this.infobar)||void 0===t||t.show(),null===(i=this.giftView)||void 0===i||i.show(),this.getCurrentRoomMemberInfo())}closeGiftView(){var e,t;this.animating||(this.animating=!0,z2.send({UIArea:3602,PositionID:3,ActionID:2,OpType:7}),this.chatView&&(this.chatView.enableInteractive(),this.chatView.visible=!0),setTimeout((()=>{this.animating=!1}),500),null===(e=this.infobar)||void 0===e||e.hide(),null===(t=this.giftView)||void 0===t||t.hide(this.locked))}toggleMoreView(){!this.locked&&this.moreView&&(this.moreView.visible?this.closeMoreView():this.openMoreView())}openMoreView(){var e;!this.animating&&this.view&&this.moreView&&(this.animating=!0,this.view.addChild(this.moreView),null===(e=this.toolbar)||void 0===e||e.openMore(),this.moreView.show(),z2.send({UIArea:3602,PositionID:2,ActionID:2,OpType:3}),q2.getRoomInfo(),setTimeout((()=>{this.animating=!1,this.chatView&&(this.chatView.visible=!1),this.infobar&&(this.infobar.visible=!1)}),500))}closeMoreView(){var e,t;this.animating||(this.animating=!0,null===(e=this.toolbar)||void 0===e||e.closeMore(),this.infobar&&(this.infobar.visible=!0),null===(t=this.moreView)||void 0===t||t.hide(this.locked),z2.send({UIArea:3602,PositionID:2,ActionID:2,OpType:7}),this.chatView&&this.giftView&&!this.giftView.visible&&(this.chatView.visible=!0),setTimeout((()=>{this.animating=!1}),500))}toggleLock(){this.locked?this.unlock():this.lock()}lock(){var e,t,i,r,n;this.lockAnimating||this.animating||this.locked||(this.lockAnimating=!0,this.locked=!0,null!==(e=this.giftView)&&void 0!==e&&e.visible&&(this.animating=!1,this.closeGiftView()),null!==(t=this.moreView)&&void 0!==t&&t.visible&&(this.animating=!1,this.closeMoreView()),null===(i=this.toolbar)||void 0===i||i.lock(),new wI.Tween(this.background).to({alpha:0},250).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.background&&(this.background.visible=!1)})).start(),null===(r=this.infobar)||void 0===r||r.lock(),null===(n=this.chatView)||void 0===n||n.lock(),z2.send({UIArea:3602,PositionID:1,ActionID:2,OpType:7}),setTimeout((()=>{A2.dragArea=y2,A2.preventArea=y2,this.lockAnimating=!1}),1e3))}unlock(){var e,t,i;this.lockAnimating||this.animating||!this.locked||(this.lockAnimating=!0,this.autoShowGift=!1,null===(e=this.toolbar)||void 0===e||e.unlock(),null===(t=this.infobar)||void 0===t||t.unlock(),null===(i=this.chatView)||void 0===i||i.unlock(),setTimeout((()=>{this.background&&(this.background.visible=!0,new wI.Tween(this.background).to({alpha:1},250).easing(wI.Easing.Quadratic.InOut).onComplete((()=>{this.lockAnimating=!1,this.locked=!1})).start(),z2.send({UIArea:3602,PositionID:1,ActionID:2,OpType:3}),b2(),this.autoShowGift&&(this.autoShowGift=!1,this.openGiftView(),z2.send({UIArea:3602,PositionID:1,ActionID:30,OpType:3})))}),500))}destroy(){var e;this.msgListenerFn=null,this.roomListenerFn=null,null===(e=this.view)||void 0===e||e.destroy({children:!0,texture:!0,baseTexture:!0}),$E.destroyTextureCache(),$E.clearTextureCache(),this.chatView=null,this.giftView=null,this.moreView=null,this.infobar=null,this.toolbar=null,this.background=null,this.view=null,this.autoLockTicker&&(clearTimeout(this.autoLockTicker),this.autoLockTicker=0)}}class c3{constructor(){this.app=null,this.renderer=null,this.images=void 0,this.loaded=!1,this.loadRetryCount=3,this.ready=!1,this.inited=!1,this.startMessage=void 0,this.stopMessage=void 0}load(){if(!this.loaded){this.loaded=!0,H||x2();var e=new nS;e.add({name:"icons",bindingScreen:D2(),url:J2.icons}).load((t=>{if(!t.resources.icons||!t.resources.icons_image||t.resources.icons&&t.resources.icons.error)return this.loadRetryCount-=1,this.loaded=!1,void(this.loadRetryCount>0?this.load():(i=f2.resourceLoadError,r={errMsg:"资源加载失败"},z2.send({UIArea:0,PositionID:2,ActionID:29,ErrType:i,ExternInfo:"string"==typeof r?encodeURIComponent(r):encodeURIComponent(JSON.stringify(r))})));var i,r;this.images=t.resources.icons,this.ready&&this.init(),e.destroy()}))}}init(){this.ready,this.ready=!0,this.images?this.inited||(this.inited=!0,P2(),this.app=new u3(this.images)):this.load()}reload(){this.destroy(),setTimeout((()=>{this.load(),this.init()}),1e3)}destroy(){this.stopMessage&&this.stopMessage(),w2&&T2&&(w2.remove(T2),w2.destroy(),w2=null,T2=null,I2=0),C2&&(C2.destroy(),C2=null),S2&&(S2.destroy(),S2=null),this.app&&(this.app.destroy(),this.app=null),E2&&(E2.remove(),E2=null),wI.removeAll(),q2.destroy(),this.inited=!1,this.loaded=!1,this.images=void 0,this.ready=!1,this.loadRetryCount=3}}k.onReady((()=>{K1().then((()=>{var e=new c3;q2.on("livePreStart",(()=>{e.load()})),q2.on("liveReload",(()=>{e.reload()})),J2.debug&&(e.load(),e.init()),q2.on("liveStart",(()=>{e.loaded||e.load(),e.init()})),q2.on("liveEnd",(()=>{Object.keys(O2).forEach((e=>{delete O2[e]})),e.destroy()}))}))})),function(e){e[e.none=0]="none",e[e.iconMore=1]="iconMore",e[e.gameMore=2]="gameMore",e[e.iconOnly=3]="iconOnly"}(X2||(X2={}));var d3=new H2;function h3(e,t){d3.send({SceneID:14,UIArea:1401,PositionID:e,ActionID:1,Object:t,SourceID:1301})}var p3,f3,g3=i(463),_3=i.n(g3);function m3(){return new Promise((e=>{e(p3||(p3=as()))}))}function v3(){return f3||(f3=$p()),f3}var y3=il(Vi),A3=1,b3=2,E3=3,w3=1,T3=2,C3=3,S3=1,I3=2,x3=3,P3=null;function D3(e){return(P3?Promise.resolve(P3):U3().then((e=>{var t=e.info;return P3={session_id:e.sessionid||"",device_brand:t.brand||"",device_model:t.model||"",version:t.version||"",sdk_version:t.SDKVersion||"",system:t.system||"",screen_width:t.screenHeight||0,screen_height:t.screenWidth||0,appid:e.appid}}))).then((()=>y3())).then((({networkType:t})=>{var i=(Array.isArray(e)?e:[e]).map((e=>{var{type:i,params:r}=e;return r.network_type=t,{[i]:r}}));return ki({sdkApiName:"webapi_game_ad_report",apiName:"webapi_game_ad_report",reqData:{base_info:P3,data_list:i}}).catch((e=>Promise.reject(e)))}))}function R3(e,t){return e[t]?e[t]*(e.scale||1):0}function O3(e){var t=rA(this),{load_type:i,open_time:r,cost_time:n,result:a,layout:o}=e,s={load_type:i,ad_type:t.adType,open_time:r,cost_time:n,result:a,trace_id:t.trace_id};i===E3&&(s.serving_list=[],t.data.game_ad_list.forEach(((e,t)=>{s.serving_list.push({ad_pos_id:t+1,serving_id:e.serving_id||""})})));var l=function(e){var t={};if(e&&e.layoutBox){var i=e.layoutBox||{},r=e.style||{};return t.ad_x=Math.round(i.left||R3(r,"left")||0),t.ad_y=Math.round(i.top||R3(r,"top")||0),t.ad_w=Math.round(i.width||R3(r,"width")||0),t.ad_h=Math.round(i.height||R3(r,"height")||0),t}}(o);return l&&Object.assign(s,l),s}function k3(e){var t=rA(this),i=[],r={type:"component_load",params:O3.call(this,{load_type:E3,open_time:t.exposure_time.s,cost_time:0,layout:e,result:0})};i.push(r),t.data.game_ad_list.forEach(((e,r)=>{i.push({type:"game_exposure",params:{ad_type:t.adType,ad_pos_id:r+1,trace_id:t.trace_id||"",serving_id:e.serving_id||"",exposure_time:t.exposure_time.s}})})),D3(i)}function M3(e){var{event:t={},ad_pos_id:i,action_type:r,layout:n,serving_id:a}=e,o=rA(this),s=n.layoutBox||{},l={action_type:r,ad_x:s.left||0,ad_y:s.top||0,ad_w:s.width||0,ad_h:s.height||0,ad_type:o.adType,exposure_time:o.exposure_time.s||V3().s,stay_time:V3().ms-o.exposure_time.ms};return o.trace_id&&(l.trace_id=o.trace_id),a&&(l.serving_id=a),t&&(l.click_x=t.absoluteX||0,l.click_y=t.absoluteY||0),i&&(l.ad_pos_id=i),l}function N3(e){var{key:t}=e;return function(e){Reporter.reportIDKeyDirectly({id:VF.reportId,key:e})}(t),function({key:e=1,error_detail:t="",adUnitId:i="",adType:r=1}={}){var n={};if(W3(t,"Object"))try{t=JSON.stringify(t)}catch(e){t=""}return U3().then((e=>(n=e,L3()))).then((({networkType:a})=>({type:"error",params:{key:e,error_detail:t,appid:n.appid,ad_type:r,ad_unit_id:i,session_id:n.sessionid,network_type:a}})))}(e).then((e=>D3(e)))}var L3=il(Vi),B3=VF.adTypeName,F3={screenWidth:0,screenHeight:0,platform:"",isIOS:!1,isAndroid:!1,sessionid:"",deviceOrientation:"",info:{},appid:"",sessionStartTime:V3(),sessionStayTime:0,maxGameCount:3,enterScene:0};function U3(){return new Promise((e=>{F3.screenWidth?(F3.sessionStayTime=V3().ms-F3.sessionStartTime.ms,e(F3)):k.onReady((()=>{var t=os();F3.info=t||{},F3.screenWidth=t.screenWidth,F3.screenHeight=t.screenHeight,F3.platform=t.platform,F3.isIOS="ios"===F3.platform,F3.isAndroid="android"===F3.platform;var i=k.deviceOrientation||"";F3.deviceOrientation=i||(t.deviceOrientation||""),e(F3)}))}))}function W3(e,t){var i=Object.prototype.toString;return"Null"===t&&null===e||"Undefined"===t&&undefined===e||i.call(e).slice(8,-1)===t}function G3({appid:e,adType:t,serving_id:i}){var r=rA(this);U3().then((n=>{var a=`${n.appid}:${n.sessionid}:${i}:${t}`;it("navigateToMiniProgram",{appId:e,path:"",scene:1139,sourcetype:1,sceneNote:a,success:()=>{},fail:e=>{N3.call(this,{key:VF.idkey.LAUNCH_APP_ERROR,adType:r.adType,adUnitId:r.adUnitId,error_detail:e})}})}))}function V3(){var e=new Date;return{s:parseInt(e.getTime()/1e3),ms:e.getTime()}}function j3(e,t,i,r){return"left"===t&&i<0?0:"left"===t&&i+r.width>e.screenWidth?e.screenWidth-r.width:"top"===t&&i<0?0:"top"===t&&i+r.height>e.screenHeight?e.screenHeight-r.height:i}function H3(e){var t=e.absoluteX,i=e.absoluteY,r=e.absoluteEndX,n=e.absoluteEndY,a=e.pressInterval,o=!1;return Math.abs(n-i)<30&&Math.abs(r-t)<30&&a<300&&(o=!0),o}function z3(e=0){return new Promise((t=>{setTimeout((()=>{t({message:"timeout trigger success"})}),e)}))}function Y3(e){var t={};return e.errMsg&&(t.errMsg=e.errMsg),e.errCode&&(t.errCode=e.errCode),t}function $3(e,t,i){return e<t?t:e>i?i:e}k.onReady((()=>{F3.sessionStartTime=V3(),F3.enterScene=k.appLaunchInfo&&k.appLaunchInfo.scene||0,F3.appid=k.accountInfo&&k.accountInfo.appId||"",F3.sessionid=k.appLaunchInfo.sessionid||k.appLaunchInfo.sessionId||""})),T_((e=>{F3.sessionid=e.sessionid||e.sessionId||""}));var q3={appType:1004,path:""};function Q3(e=[]){var t=rA(this),i=e.map((e=>{var t=e.pre_load_param||{},i=JSON.parse(JSON.stringify(q3));return i.appId=e.appid,i.openRate=t.score||0,i})).filter((e=>0!==e.openRate));i.length&&U3().then((e=>{it("batchPreloadMiniProgram",{openParams:{visitScene:e.enterScene,businessScene:2,innerScene:1139},preloadList:i,success:e=>{N3.call(this,{key:VF.idkey[`${B3[t.adType]}_SUCCESS_FAIL`],adType:t.adType,adUnitId:t.adUnitId,error_detail:e})},fail:e=>{N3.call(this,{key:VF.idkey[`${B3[t.adType]}_PRELOAD_FAIL`],adType:t.adType,adUnitId:t.adUnitId,error_detail:e})}})}))}function Z3(e){e.content.style.hidden&&m3().then((t=>{var i=v3();e.icon.style.opacity=0,setTimeout((()=>{e.body.style.width=t.screenWidth,e.body.style.height=t.screenHeight,e.body.style.left=0,e.body.style.top=0,e.icon.style.left=i.left-i.height-8,e.icon.style.top=i.top,e.content.style.hidden=!1,e.mask.style.hidden=!1,e.icon.style.opacity=1}),0),e.content.nextLayout().then((()=>{e.content.animate({opacity:1,duration:300}),e.mask.animate({opacity:.1,duration:300})})),d3.send({SceneID:14,UIArea:1401,PositionID:0,ActionID:1,SourceID:1301});for(var r=1;r<=e.gameData.length;r++){h3(r,e.gameData[r-1].app_info.base.appid)}}))}function K3(e){e.content.style.opacity<1||(e.content.animate({opacity:0,duration:300}),e.mask.animate({opacity:0,duration:300}),e.content.nextLayout().then((()=>{var t=v3();e.body.style.width=t.height,e.body.style.height=t.height,e.body.style.left=t.left-t.height-8,e.body.style.top=t.top,e.icon.style.left=0,e.icon.style.top=0,e.content.style.hidden=!0,e.mask.style.hidden=!0})),d3.send({SceneID:14,UIArea:1401,PositionID:100,ActionID:2,SourceID:1301}))}function X3(e){Qs({url:`https://game.weixin.qq.com/cgi-bin/minigame/static/portal/index.html?appid=${k.accountInfo.appId}&ssid=1199&source_id=${e}&source=in_minigame_entry#wechat_redirect`})}function J3(e,t){e.on("touchstart",(()=>{e.style.opacity=.5})),e.on("touchend",(()=>{e.style.opacity=1})),e.on("click",(e=>{H3(e)&&t()}))}function e4(e){J3(e.icon,(()=>{e.renderMode===X2.iconMore?(Z3(e),d3.send({SceneID:13,UIArea:1301,PositionID:0,ActionID:2})):e.renderMode===X2.iconOnly&&(X3(1303),d3.send({SceneID:13,UIArea:1303,PositionID:0,ActionID:2}))})),e.mask.on("click",(()=>{K3(e)}));for(var t=function(t){e[`gameItem${t}`]&&J3(e[`gameItem${t}`],(()=>{var i=e.gameData[t-1].app_info.base.appid;au({appId:i,path:"/",success(){}}),function(e,t){d3.send({SceneID:14,UIArea:1401,PositionID:e,ActionID:6,Object:t,SourceID:1301})}(t,i)}))},i=1;i<=e.gameData.length;i++)t(i);e.moreGame&&J3(e.moreGame,(()=>{X3(1302),d3.send({SceneID:13,UIArea:1302,PositionID:0,ActionID:2})})),e.gameMore&&J3(e.gameMore,(()=>{X3(1401),d3.send({SceneID:14,UIArea:1401,PositionID:99,ActionID:2,SourceID:1301})}))}var t4;function i4(){var e=rA(this),{template:t,style:i}=((e,t)=>{var i=v3(),r=as(),{top:n}=em({width:80,height:20,align:"right"}),a=Math.min(412,r.screenWidth-16),o={width:i.height,height:i.height,top:i.top,left:i.left-i.height-8},s={width:80,height:20,top:n,left:i.left+(i.width-80)/2},l={body:{position:"absolute",zIndex:1e6},icon:{position:"absolute",width:i.height,height:i.height,hidden:!0},moreGame:{position:"absolute",width:80,height:20,hidden:!0},mask:{position:"absolute",backgroundColor:"#000000",opacity:0,width:r.screenWidth,height:r.screenHeight,hidden:!0},content:{position:"absolute",width:a,height:149,top:i.top+i.height+16-8,left:r.screenWidth-a-8,hidden:!0,opacity:0},contentBox:{position:"absolute",backgroundColor:"#ffffff",width:a,height:141,top:8,left:0,borderRadius:4},contentInner:{width:a,paddingLeft:4,paddingRight:4,height:105,flexDirection:"row",alignItems:"center"},contentTitle:{marginLeft:16,marginTop:16,width:200,height:20,lineHeight:20,fontSize:14,color:"#000000",opacity:.9},contentArrow:{position:"absolute",left:i.left-(r.screenWidth-a-8)-(i.height/2+8)-6,top:0,width:12,height:8},gameItem1:{width:(a-8)/4,hegiht:73},gameItem2:{width:(a-8)/4,hegiht:73},gameItem3:{width:(a-8)/4,hegiht:73},gameMore:{width:(a-8)/4,hegiht:73},gameIcon:{width:48,height:48,marginLeft:((a-8)/4-48)/2},gameName:{width:(a-8)/4,lineHeight:17,height:17,textAlign:"center",fontSize:12,color:"#000000",opacity:.5,marginTop:8,lineBreak:"break-all"}};switch(t){case X2.iconMore:l.icon.hidden=!1,l.body=Object.assign(l.body,o);break;case X2.gameMore:l.moreGame.hidden=!1,l.body=Object.assign(l.body,s);break;case X2.iconOnly:l.icon.hidden=!1,l.body=Object.assign(l.body,o)}var u="";if(e&&e.length>0){for(var[c,d]of(u+='<view id="content">\n    <image id="content-arrow" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210427/205100/arrow.png"></image>\n    <view id="content-box">\n      <text id="content-title" value="更多来自此开发者的游戏"></text>\n      <view id="content-inner">',Object.entries(e))){var h=zF.textMetrics(d.app_info.base.appname,{maxWidth:a/4,maxLines:1,fontSize:l.gameName.fontSize})[0].text;u+=`<view id="game-item${+c+1}">\n        <image id="game-icon" bubble-event="true" src="${d.app_info.base.icon_url}"></image>\n        <text id="game-name" bubble-event="true" value="${h}"></text>\n      </view>`}u+='<view id="game-more">\n        <image id="game-icon" bubble-event="true" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210426/175420/more.png"></image>\n        <text id="game-name" bubble-event="true" value="更多游戏"></text>\n      </view>',u+="</view></view></view>"}return{template:`\n    <view id="body">\n        <image id="icon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210427/204917/minigame.png"></image>\n        <image id="more-game" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20210429/120001/moreGame.png"></image>\n        <view id="mask" bubble-event="true"></view>\n        ${u}\n    </view>\n    `,style:l}})(e.gameData,e.renderMode),{root:r}=_3()(t);return sA.call(this,r,i),Xv.add(e.body),e4(e),e.body.ready()}class r4 extends oA{constructor(){super();var e=rA(this);e.renderMode=X2.none,e.xom="",e.style="",e.state="",e.gameData=[],e.destroyPromise=null,new Promise(((e,t)=>{ZA({req_path:"gamewxagcdatawap_getportalinfo",json_data:JSON.stringify({appid:k.accountInfo.appId}),success(t){var{data:i}=t;e(i)},fail(e){t(e)}})})).then((t=>{if(t.data&&t.data.exp_id){switch(e.renderMode=t.data.exp_id,e.renderMode){case X2.iconMore:d3.send({SceneID:13,UIArea:1301,PositionID:0,ActionID:1});break;case X2.gameMore:d3.send({SceneID:13,UIArea:1302,PositionID:0,ActionID:1});break;case X2.iconOnly:d3.send({SceneID:13,UIArea:1303,PositionID:0,ActionID:1})}e.gameData=t.data.owner_game_info.game_info_list.slice(0,3),i4.call(this).then((()=>{Y_({component:this,getVisibleAera:()=>e.style.body})}))}else e.renderMode=X2.none})).catch((()=>{e.renderMode=X2.none}))}destroy(){$_(this),aA(this)}}var n4=function(){return t4||(t4=new r4)};k.onReady((e=>{m3().then((t=>{if("windows"!==t.platform)if("portrait"!==e.deviceOrientation){var i=function(){setTimeout((()=>{n4()}),1e3),Dx(i)};Px(i)}else"ios"===t.platform&&jt(t.version,"8.0.5")>=0?WeixinJSBridge.on("onGameViewReady",(()=>{n4()})):setTimeout((()=>{n4()}),1500)}))}));class a4 extends oA{constructor({id:e,name:t,style:i={}}={}){super();var r=rA(this);r.style=i,r.uiEngine=new k1(r,this),r.act_id=e,r.comp_id=t,r.emitter=new ty,r.destroyPromise=null,r.reporter=new h1(r),this.isDestroyed=!1,this.ready=!1,this.id=e,this.name=t,s1.call(this).catch((()=>{}))}offClose(e){this.isDestroyed||rA(this).emitter.off("close",e)}onClose(e){this.isDestroyed||rA(this).emitter.on("close",e)}destroy(){return o1.call(this)}onLoad(e){this.isDestroyed||rA(this).emitter.on("load",e)}onError(e){this.isDestroyed||rA(this).emitter.on("error",e)}offLoad(e){this.isDestroyed||rA(this).emitter.off("load",e)}onMessage(e,t){rA(this).emitter.on(e,t)}offMessage(e,t){rA(this).emitter.off(e,t)}invoke(e={}){if(this.isDestroyed)return Promise.reject(new Error("组件已经被销毁"));var t=rA(this),{action:i}=e;return t.config&&t.config.flows&&t.config.flows.find((e=>e.id===i))?i&&t.uiEngine.oneFlowExec(i):Promise.reject(new Error(`action ${i} is not exist`))}}globalThis.setTimeout=O.Z.setTimeout,globalThis.clearTimeout=O.Z.clearTimeout,globalThis.setInterval=O.Z.setInterval,globalThis.clearInterval=O.Z.clearInterval,globalThis.requestAnimationFrame=O.Z.requestAnimationFrame,globalThis.cancelAnimationFrame=O.Z.cancelAnimationFrame,globalThis.GameGlobal=globalThis,GameGlobal.__isAdapterInjected=!1,Object.defineProperty(globalThis,"sharedCanvas",{get:()=>Ux()});var o4=k.accountInfo?k.accountInfo:{};k.onReady((()=>{o4=k.accountInfo}));var s4=!1;ic.once("beforeTouchStart",(()=>{s4=!0}));var l4=(e={})=>{var t=Object.assign({},e);if(st("loadSubPackage",t,{name:""})){var i=k.subPackages||k.subpackages;if(i){i.forEach((e=>{t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));var r="__APP__"===t.name||"__GAME__"===t.name;r||t.name.startsWith("/")||(t.name=`/${t.name}`),r||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name=`${t.name}/`),"__GAME__"===t.name&&(t.name="__APP__");try{return new eO(t)}catch(e){return void ut("loadSubpackage",t,e.message)}}else ut("loadSubpackage",t,"Your subpackages configuration is invalid.")}},u4={};function c4(e={}){if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));var t=e.packages.filter((e=>!(e in u4)));return("all"!==e.network?new Promise(((e,t)=>{var i=$i();i?e(i):Vi({success(i){i.networkType?e(i.networkType):t(new Error("get network type failed."))},fail:t})})).then((e=>{if("wifi"!==e.toLowerCase())return Promise.reject(new Error(`network type does not match, '${e}' !== 'wifi'`))}),(()=>Promise.reject(new Error("get network type failed.")))):Promise.resolve()).then((()=>Promise.all(t.map((e=>new Promise((i=>{l4({name:e,success(){u4[e]=!0,i(t)},fail(t){var r=new Error(t.errMsg.replace("loadSubpackage:fail",""));r.packageName=e,i(r)}})}))))).then((e=>{if((e=e.filter((e=>e instanceof Error))).length>0){var t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))))}k.onReady((()=>{hZ((({path:e})=>{if(k.preloadRule&&k.preloadRule[e])return c4(k.preloadRule[e]).then((()=>{console.info("preloadSubpackages: success")}),(e=>{e._detail?(console.group(`preloadSubpackages fail: ${e.message}`),e._detail.forEach((e=>{console.warn(`${e.packageName}: ${e.message}`)})),console.groupEnd()):console.warn(`preloadSubpackages fail: ${e.message}`)}))}))}));var d4=Ei(Ul),h4="RefreshRuntimeSession",p4=e=>{var t=0,i=0,r=()=>{++t>=e&&ki({apiName:h4,sdkApiName:h4,reqData:{}}).then((e=>{var{errMsg:t,respData:i}=e;if(0!==i.err_no)throw t;iu(r)})).catch((e=>{++i>=2&&iu(r)}))};tu(r)},f4=e=>new Promise((t=>setTimeout(t,e)));class g4{constructor(e,t=!1){var i=286;this.orientation=e,this.animating=!1;var{screenWidth:r}=as(),n=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=t;var a=new zv({id:n,style:{position:"absolute",left:(r-i)/2,top:this.getTop(),width:i,height:38,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!bi()}}),o=new Yv({id:n+1,style:{left:0,top:0,width:i,height:38,textAlign:"center",lineHeight:38,fontSize:15,color:"#ffffff"},value:`该${bi()?"小游戏":"小程序"}业务及数据已由新开发者承接`});a.add(o),Xv.add(a),this.banner=a,this.bannerWidth=i}show(){this.banner.ready().then((()=>(this.animating=!0,this.banner.animate({top:this.getTop(),opacity:.7,duration:300})))).then((()=>(this.animating=!1,f4(5e3)))).then((()=>(this.animating=!0,this.banner.animate({top:this.getTop()-14,opacity:0,duration:300})))).then((()=>f4(3e3))).then((()=>Xv.remove(this.banner))).catch((()=>{}))}getTop(){var{screenHeight:e}=as();return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}setOrientation(e){if(!this.animating){this.orientation=e;var{screenWidth:t}=as();this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}var _4=!1;k.onReady((()=>{try{_4=k.appContactInfo.operationInfo.jsonInfo.misc_ban_info.minigame_freeze_status}catch(e){}_4?ki({sdkApiName:"informFreezed",apiName:"webapi_wxacloseinfo",reqData:{}}).then((e=>{var t=e.data;if(t.need_show&&t.svr_stoptimestamp){t.svr_stoptimestamp;var i=t.svr_stoptimestamp,r=new Date(1e3*i),n=r.getFullYear(),a=r.getMonth()+1,o=r.getDate();return d4({title:"提示",content:`本小游戏计划于 ${n}-${a}-${o} 下架，请及时处理充值所得道具，注意保护自身合法权益`,showCancel:!1})}})).catch((e=>{e.errMsg})).then((()=>eR())):eR(),setTimeout((()=>{var e,t;e=k.deviceOrientation,t=!0,ki({sdkApiName:"getSubjectalterInfo",apiName:"getSubjectalterInfo",reqData:{}}).then((i=>{var r=JSON.parse(i.rawData),{need_show:n,runtime_refresh_clicks:a}=r;if(a&&xi()&&p4(a),n){var o=new g4(e,t);return o.show(),o}})).catch((()=>{}))}),2e3)}));var m4=!1,v4=0;ic.on("setLastTapTime",(e=>{v4=e})),ic.on("beforeTouchStart",(()=>{m4=!0,Ql.startLimitCount||Ql.allowStartLimitCount(),v4=Date.now()})),Xm((()=>{m4=!1,v4=0}));var y4=!0,A4={muteMicrophone:!1,muteEarphone:!1};function b4(e){return g(e)?(u(e.muteMicrophone)&&(A4.muteMicrophone=e.muteMicrophone),u(e.muteEarphone)&&(A4.muteEarphone=e.muteEarphone),A4):A4}var E4=Ae("voIPChatMembersChanged"),w4=E4.onMethod,T4=E4.offMethod;ce("onVoIPChatMembersChanged",(e=>{e.errCode=0,e.errMsg=e.errMsg||"ok",E4.emit(e)}));var C4=Ae("VoIPChatInterrupted"),S4=e=>{e.errCode||(e.errCode=((e="")=>e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3)(e.reason)),C4.emit(e)};ce("onVoIPChatInterrupted",(e=>{S4(e)})),ce("onVoIPChatInterruptedJsEvent",(e=>{S4(e)}));var I4=C4.onMethod,x4=C4.offMethod,P4=Ae("VoIPVideoMembersChanged"),D4=P4.onMethod,R4=P4.offMethod;ce("onVoIPVideoMembersChanged",((e={})=>{P4.emit(e)}));var O4=Ae("voIPChatStateChanged"),k4=O4.onMethod,M4=O4.offMethod;ce("onVoIPChatStateChanged",(e=>{e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",O4.emit(e)}));var N4=1;k.onReady((()=>{["close","error","listening","message"].forEach((e=>{ce(`onUDPSocket${wi(e)}`,(t=>{var{socketId:i}=t;delete t.socketId,wi(e),Ae(`jsapi-udp-${i}-${e}`).emit(t)}))}))}));class L4{constructor(e){var t;if(this._id=N4++,it("createUDPSocket",{socketId:this._id,type:"udp6"===e?"IPv6":"IPv4",fail(e){e.errMsg,t=e.errMsg}}),t)throw new Error(t);["close","error","listening","message"].forEach((e=>{var t=Ae(`jsapi-udp-${this._id}-${e}`);this[`on${wi(e)}`]=t.onMethod,this[`off${wi(e)}`]=t.offMethod}))}bind(e){var t,i;if(it("bindUDPSocket",{port:e,socketId:this._id,success(e){t=e.port},fail(e){i=e.errMsg}}),i)throw new Error(i);return t}setTTL(e){var t;if(it("setUDPSocketTTL",{ttl:e,socketId:this._id,fail(e){t=e.errMsg}}),t)throw new Error(t)}send(e={}){var t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,it("sendUDPSocketMessage",Object.assign({},e,{socketId:this._id,message:t,success(e){},fail:({errMsg:e})=>{Ae(`jsapi-udp-${this._id}-error`).emit({errMsg:`send: fail ${e}`})}}))}connect(){}write(e){this.send(e)}close(){var e;if(it("closeUDPSocket",{socketId:this._id,fail(t){e=t.errMsg}}),e)throw new Error(e)}}var B4=O.Z.UDP,F4=new WeakMap,U4=new WeakMap,W4=new WeakMap,G4=1;class V4{constructor(e){if(!B4)return null;var t=new B4;if(null===t)return null;var i=G4++;["close","error","listening","message"].forEach((e=>{var r=Ae(`jsbinding-udp-${i}-${e}`);t[`on${e}`]=function(...t){"message"===e&&t[0].remoteInfo&&(t[0].localInfo={address:t[0].remoteInfo.localaddress,family:t[0].remoteInfo.localfamily,port:t[0].remoteInfo.localport},delete t[0].remoteInfo.localaddress,delete t[0].remoteInfo.localfamily,delete t[0].remoteInfo.localport),r.emit(...t),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},this[`on${wi(e)}`]=r.onMethod,this[`off${wi(e)}`]=r.offMethod})),F4.set(this,t),U4.set(this,i),W4.set(this,"udp6"===e?"IPv6":"IPv4")}bind(e){return er("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),F4.get(this).bind({port:e,type:W4.get(this)})}setTTL(e){if(Number.isNaN(Number(e))){Ae(`jsbinding-udp-${U4.get(this)}-error`).emit({errMsg:"set ttl fail: ttl must be a number.",errCode:-4})}else{var t=F4.get(this);"IPv6"===W4.get(this)?(t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_UNICAST_HOPS"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVHOPLIMIT"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IPV6"),option:t.getMacro("IPV6_RECVPKTINFO"),optionval:1})):t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_TTL"),optionval:Number(e)}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_PKTINFO"),optionval:1}),t.setopt({level:t.getMacro("IPPROTO_IP"),option:t.getMacro("IP_RECVTTL"),optionval:Number(e)})}}send(e={}){if(Kt("UDP")){var t,i=`udp://${e.address}`;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,F4.get(this).send(Object.assign({},e,{message:t})),Math.random()>.99&&er("sendUDP",i,1,0,"","",!1,yi(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}else{Ae(`jsbinding-udp-${U4.get(this)}-error`).emit({errMsg:"send socket fail: no permission",errCode:-3})}}connect(e={}){var t=F4.get(this);"function"==typeof t.connect&&t.connect(e)}write(e={}){if(Kt("UDP")){var t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;var i=F4.get(this);"function"==typeof i.write?i.write(Object.assign({},e,{message:t})):this.send(e)}else{Ae(`jsbinding-udp-${U4.get(this)}-error`).emit({errMsg:"write socket fail: no permission",errCode:-3})}}onConnect(e){F4.get(this).onconnect=e}close(){return F4.get(this).close()}}var j4=!1,H4=null,z4=null;Es((()=>{j4=!0})),hZ((()=>{j4=!1,H4&&(Y4(H4),H4=null),z4&&($4(z4),z4=null)}));var Y4=e=>{st("addCard",e,{cardList:[]})&&(j4?H4=e:it("addCard",e))},$4=e=>{st("openCard",e,{cardList:[]})&&(j4?z4=e:it("openCard",e))},q4=function(e,t,i){var r,n,a,o=null,s=0;i||(i={});var l=function(){s=!1===i.leading?0:Date.now(),o=null,a=e.apply(r,n),o||(r=n=null)};return function(){var u=Date.now();s||!1!==i.leading||(s=u);var c=t-(u-s);return r=this,n=arguments,c<=0||c>t?(clearTimeout(o),o=null,s=u,a=e.apply(r,n),o||(r=n=null)):o||!1===i.trailing||(o=setTimeout(l,c)),a}}((e=>{if(Qc)ut("requestSubscribeMessage",e,"last call has not ended");else{if(!st("requestSubscribeMessage",e,{tmplIds:[]}))return;Qc=!0,B&&k.clientVersion<385877504||L&&k.clientVersion<654313216||N?Kc(e):Zc(e)}}),1e3),Q4="requestSubscribeSystemMessage",Z4=!1;function K4(e){var t=e.msgTypeList;return new Promise(((e,i)=>{if(Array.isArray(t)&&t.length>0){var r=t.reduce(((e,t)=>{var i=function(e){return Dc[e]}(t);return i&&e.push(i),e}),[]);r.length>0?e(r):i({errMsg:"invalid arguments:msgTypeList"})}else i({errMsg:"invalid arguments:msgTypeList"})}))}function X4(e){return new Promise(((t,i)=>{Oi({sdkApiName:Q4,apiName:"webapi_getsyssubscribemsgtemplateinfo",reqData:{msg_type_list:e},success(e){t(e)},fail(e){i({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}})}))}function J4(e){return new Promise(((t,i)=>{var r=e.data;r&&r.msg_info_list?t(r.msg_info_list):i({errMsg:"data error"})}))}function e5(e){return new Promise(((t,i)=>{var r,n,a=e.map((e=>e.template_id));r={tmplIds:a,success(i){var r={};e.forEach((e=>{var t=Oc(e.msg_type);r[t]=i[e.template_id]})),t(r)},fail(e){i({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}},(n=Object.assign({},r)).tmplIds=Array.from(new Set(r.tmplIds)),it("requestSubscribeMessage",n)}))}var t5="getWhatsNewSubscriptionsSetting",i5=(e={})=>{var{success:t,fail:i,failWithMsg:r}=dt(e,t5);Kt("requestSubscribeWhatsNew")?Oi({sdkApiName:t5,apiName:"webapi_game_query_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success(e){t({status:e.data.status})},fail:i}):r({code:4,msg:""})},r5=({action:e})=>{var t=O_(),i=[t.scene||"",t.scene_note||"",t.sessionid||t.sessionId||"",e].join(",");Reporter.reportKeyValue({key:"GameWhatsNew",value:i})},n5="requestSubscribeWhatsNew",a5=!1;function o5(){return new Promise((e=>{r5({action:2});var t=EA({title:"接收游戏更新提醒",content:`${k.accountInfo.nickname}更新时，你将收到微信小游戏的提醒`,confirmText:"接收",cancelText:"取消",confirm(){t.destroy(),e({confirm:!0}),r5({action:4})},cancel(){t.destroy(),e({confirm:!1}),r5({action:3})},style:{title:{fontSize:17,color:"#1b1b1b"},content:{fontSize:14,color:"#d4d4d4",lineHeight:19.6,marginTop:16,marginBottom:0},confirm:{backgroundColor:"#FA9D3B"},cancel:{color:"#FA9D3B"}}})}))}var s5,l5={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},u5=Object.keys(l5).reduce(((e,t)=>{var i=parseInt(t.replace(/\s/g,""),10);return e[l5[t]]=i,e}),{}),c5=(e,t)=>{var i,r={};return e&&s(e.template)&&(i=e.data,g(i)&&!d(i))&&(r.desc_template_data={name:e.template,data_list:Object.keys(e.data).map((t=>({key:t,value:e.data[t]})))}),t&&s(t.template)&&(r.launch_desc_template=t.template),ki({sdkApiName:"getplaybackinfo",apiName:"webapi_getplaybackinfo",reqData:r}).then((e=>({shareTitle:(e=e.data).title,shareDesc:e.desc,buttonText:e.launch_desc,videoDesc:e.playback_desc})))},d5=null,h5=(e,{shareTitle:t="",sharePath:i="",useBgm:r=!1,useTimeRange:n=!1,useAtempo:a=!1,atempo:o=1,hookBgm:s=!0}={})=>(d5||(d5=ki({sdkApiName:"getplaybackconfig",apiName:"webapi_getplaybackconfig"}).then((e=>(e=e.data).enable_share_to_haowan)).catch((()=>!1)))).then((l=>{var u=l?2:1,c=O_(),d=[c.scene||"",c.scene_note||"",c.sessionid||c.sessionId||"",e,u,t,i,k.appType+1e3,r,n,a,o,s].join(",");Reporter.reportKeyValue({key:"GameRecorder",value:d})})),p5=["start","stop","pause","resume","abort","timeUpdate","error"].reduce(((e,t)=>(e[t]={internal:Ae(`GameRecorder-internal-${t}`),external:Ae(`GameRecorder-external-${t}`)},e)),{}),f5=!1,g5=!1,_5=!1,m5=!1,v5=()=>{if(!s5){var{version:e,system:t}=hs(),i=t.split(" ")[1],r=L&&-1===Ti(i,"5.0"),n=B&&-1===Ti(e,"7.0.8");"7.0.5"===e||r||n||it("isGameRecorderSupported",{success(e){f5=e.isFrameSupported,g5=e.isSoundSupported,_5=e.isVolumeSupported,m5=e.isAtempoSupported}}),s5=!0}},y5=e=>{var t={101:{code:u5.GameRecorder_StartDurationInvalid,message:"GameRecorder.start:fail duration invalid"},103:{code:u5.GameRecorder_StartWhileAlreadyStartRecording,message:"GameRecorder.start:fail start while already start recording"},104:{code:u5.GameRecorder_StartWhilePaused,message:"GameRecorder.start:fail start while paused"},106:{code:u5.GameRecorder_StartBitRateInvalid,message:"GameRecorder.start:fail bitrate invalid"},107:{code:u5.GameRecorder_StartFPSInvalid,message:"GameRecorder.start:fail fps invalid"},108:{code:u5.GameRecorder_StartGOPInvalid,message:"GameRecorder.start:fail gop invalid"},112:{code:u5.GameRecorder_UnknownError,message:"GameRecorder.start:fail 小游戏直播中，暂不支持录制"},201:{code:u5.GameRecorder_PauseWhileNotStartRecording,message:"GameRecorder.pause:fail pause while not start recording"},202:{code:u5.GameRecorder_PauseWhileAlreadyPaused,message:"GameRecorder.pause:fail pause while already paused"},301:{code:u5.GameRecorder_ResumeWhileNotStartRecording,message:"GameRecorder.resume:fail resume while not start recording"},302:{code:u5.GameRecorder_ResumeWhileRecording,message:"GameRecorder.resume:fail resume while recording"},401:{code:u5.GameRecorder_AbortWhileNotStartRecording,message:"GameRecorder.abort:fail abort while not start recording"},501:{code:u5.GameRecorder_StopWhileNotStartRecording,message:"GameRecorder.stop:fail stop while not start recording"},503:{code:u5.Global_FileStorageNotEnough,message:"GameRecorder.stop:fail file storage not enough"}};return t[e]?t[e]:[102,110,111,502,710,810].includes(e)?{code:u5.GameRecorder_InternalFailed,message:"GameRecorder:fail internal failed"}:{code:u5.GameRecorder_UnknownError,message:"GameRecorder:fail unknown error"}};k.onReady((()=>{ce("onGameRecorderStateChange",(e=>{var t=e.state;if(delete e.state,"stop"===t)p5[t].internal.emit(e),p5[t].external.emit({duration:Math.floor(e.duration/1e3)});else if("timeUpdate"===t)p5[t].internal.emit(e),p5[t].external.emit({currentTime:e.currentTime});else if("error"===t){var i=y5(e.errCode);p5[t].external.emit({error:i})}else p5[t].external.emit()}))}));var A5=null;class b5{constructor(){p5.stop.internal.onMethod((e=>{A5=e.tempFilePath})),this._operatePromise=Promise.resolve()}isFrameSupported(){return v5(),f5}isSoundSupported(){return v5(),g5}isVolumeSupported(){return v5(),_5}isAtempoSupported(){return v5(),m5}_operate(e,t){return this._operatePromise=this._operatePromise.then((()=>this.__operate(e,t))).catch((()=>this.__operate(e,t))),this._operatePromise}__operate(e="start",t={}){if(!f5){var i=`GameRecorder.${e}:fail frame not supported`;return Promise.reject({errMsg:i,error:{message:i,code:u5.GameRecorder_NotSupported}})}var r=!0;return new Promise(((i,n)=>{it("operateGameRecorder",Object.assign({operationType:e,success:()=>{"start"===e?h5(1,{hookBgm:t.hookBgm}):"stop"===e&&h5(2),i({errMsg:`GameRecorder.${e}:ok`,error:{code:u5.OK,message:`GameRecorder.${e}:ok`}}),r=!1},fail:e=>{var t=y5(e.errCode);n({errMsg:t.message,error:t}),r=!1},complete:t=>{if(r)if(0!==t.errCode){var a=y5(t.errCode);a?n({errMsg:a.message,error:a}):(n({errMsg:`GameRecorder: ${e} unknow error`}),console.error(t))}else i()}},t))}))}start({fps:e=24,bitrate:t=1e3,gop:i=12,duration:r=7200,hookBgm:n=!0}={}){return r="number"==typeof r?Math.min(7200,Math.max(5,r)):7200,t="number"==typeof t?Math.min(3e3,Math.max(600,t)):1e3,"boolean"!=typeof n&&(n=!0),this._operate("start",{fps:e,bitrate:t,gop:i,duration:r,hookBgm:n,audioBitrate:128,width:k.screenWidth+4-k.screenWidth%4,height:k.screenHeight+4-k.screenHeight%4,cumulativeStamp:!0,notifyVideoKeyFrame:!0,timeUpdateInterval:30})}stop(){return this._operate("stop")}pause(){return this._operate("pause")}resume(){return this._operate("resume")}abort(){return this._operate("abort")}on(e,t){p5[e].external.onMethod(t)}off(e,t){p5[e].external.offMethod(t)}}var E5=null,w5=null;var T5=null,C5=null;S_((()=>{C5&&C5()}));var S5=function({query:e="",path:t="",title:i,button:r,bgm:n="",timeRange:a=[],volume:o=1,atempo:s=1,audioMix:l=!1}={}){var u=A5;if(!u){var c="GamaRecorder.share:fail no recorded video";return Promise.reject({errMsg:c,error:{code:u5.GameRecorder_NoVideo,message:c}})}var d=(e=>"number"==typeof e&&e>=0&&e<=1?Number(e.toFixed(2)):(console.warn(`GameRecorder:volume invalid ${JSON.stringify(e)}.It has been corrected to 1`),1))(o),h=(e=>"number"==typeof e&&[.3,.5,1,1.5,2,2.5,3].includes(e)?e:(console.warn(`GameRecorder:atempo invalid ${JSON.stringify(e)}.It has been corrected to 1`),1))(s),p=((e,t)=>{var i=6e4*t,r=0;Array.isArray(e)||(n=[[0,i]],console.warn(`GameRecorder:time range invalid ${JSON.stringify(e)}.It has been corrected to [[0, ${i}]] under x${t} atempo`));var n=e.reduce(((e,t,n)=>{if(Array.isArray(t)&&2===t.length){var[a,o]=t,s=f(a)&&f(o),l=a<o&&(!e[n-1]||a>=e[n-1][1]);s&&l&&r+o-a<=i&&(e.push([a,o]),r+=o-a)}return e}),[]);return 0===n.length&&(n=[[0,i]],console.warn(`GameRecorder:time range invalid ${JSON.stringify(e)}.It has been corrected to [[0, ${i}]] under x${t} atempo`)),n})(a,h);if(p.reduce(((e,t)=>e+t[1]-t[0]),0)<2e3*h){var g=`GamaRecorder.share:fail time range too short.It should be longer than ${2e3*h}ms under x${h} atempo.`;return Promise.reject({errMsg:g,error:{code:u5.GameRecorder_TimeRangeTooShort,message:g}})}return Promise.all([c5(i,r),w5||(w5=ki({sdkApiName:"getplaybackconfig",apiName:"webapi_getplaybackconfig",reqData:{appServiceType:k.appType}}).then((e=>e.data)))]).then((([t,i])=>{var r={videoSrc:u,timeRange:p,bgmSrc:n,volume:d,atempo:h,shareOptions:[{id:1,name:"发送给好友",needExtUrl:!1}],audioMix:!!l};return i.enable_share_to_haowan,i.enable_share_to_timeline&&r.shareOptions.push({id:3,name:"分享到朋友圈"}),new Promise(((i,o)=>{T5=new Promise((e=>{C5=e})),it("editGameRecorderVideo",Object.assign(r,{success:r=>{h5(5,{shareTitle:t.shareTitle,sharePath:`?${e}`,useBgm:!!n,useTimeRange:Array.isArray(a)&&a.length>0,useAtempo:[.3,.5,1.5,2,2.5,3].includes(s),atempo:s,audioMix:!!l}),i(Object.assign(r,t))},fail:e=>{if(804===e.errCode||803===e.errCode)return i();var t={0:{code:u5.OK,message:"GamaRecorder.share:ok"},801:{code:u5.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"},802:{code:u5.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"}};o({errMsg:e.errMsg.replace("editGameRecorderVideo","shareGameVideo"),error:t[e.errCode]||{code:u5.GameRecorder_UnknownError,message:`GamaRecorder.share:fail unknow error code ${e.errCode}`}})}}))}))})).then((e=>T5.then((()=>e)))).then((i=>{T5=null,C5=null;var r=t;if(void 0!==i){if(2===i.chosenId&&"string"==typeof i.extUrl)h5(7),it("private_openUrl",{url:i.extUrl});else if(1===i.chosenId||0===i.chosenId){var n=h_({pageType:c_.PLAY_PAGE_VIDEO,query:e});h5(6,{shareTitle:i.shareTitle,sharePath:n}),Uv({filePath:i.videoPath,thumbFilePath:i.thumbPath,title:i.shareTitle,query:e,path:n,userPath:r}).then((()=>{h5(8,{shareTitle:i.shareTitle,sharePath:i.path})}))}else if(3===i.chosenId){var a=h_({pageType:c_.PLAY_PAGE_VIDEO,query:e});h5(9,{shareTitle:i.shareTitle,sharePath:a}),(o={filePath:i.videoPath,thumbFilePath:i.thumbPath,title:i.shareTitle,query:e,userPath:r},$l({title:"请稍等"}),k_({filePath:o.filePath,thumbFilePath:o.thumbFilePath,fileType:20302,appType:213}).then((e=>(ql(),e))).then((e=>{var t=h_({pageType:c_.PLAY_PAGE_VIDEO,query:o.query});return Vm(e,{title:o.title,path:t,imageUrl:e.thumbUrl},c_.PLAY_PAGE_VIDEO,o)})).catch((e=>{ql(),Wm.error("fail",e)}))).then((()=>{h5(10,{shareTitle:i.shareTitle,sharePath:a})}))}var o;return{errMsg:"GamaRecorder.share:ok",error:{code:u5.OK,message:"GamaRecorder.share:ok"}}}})).catch((e=>{wxNativeConsole.error(e)}))},I5=["left","top","height","paddingLeft","paddingRight","backgroundColor","borderColor","borderWidth","borderRadius"],x5=["fontSize","color"],P5=new WeakMap,D5=null,R5=(e,t)=>{var i=(()=>{if(D5)return D5;var e=new O.Z.Canvas;return e.width=1,e.height=1,D5=e.getContext("2d")})();return t&&(i.font=`${t}px sans-serif`),i.measureText(e).width};class O5{constructor({style:e={},image:t="",icon:i="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht7bQQ8PW9rXljICmxVsZbEwrJgsCiaWWGm6YibFoxibLwX5UvINt8owvFnBibrv2uDgqvw/0?wx_fmt=png",text:r="分享游戏时刻",share:n={}}){var a={};P5.set(this,a),a.emitter=new ty,e=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},e);var o=Object.keys(e).filter((e=>I5.includes(e))).reduce(((t,i)=>(t[i]=e[i],t)),{});o.paddingLeft=o.paddingLeft||16,o.paddingLeft=Math.max(o.paddingLeft,16),o.paddingRight=o.paddingRight||16,o.paddingRight=Math.max(o.paddingRight,16),o.position="absolute",o.flexDirection="row",o.justifyContent="center",o.alignItems="center",o.backgroundColor=o.backgroundColor||"#09bb07",o.borderRadius=o.borderRadius||3;var s=Object.keys(e).filter((e=>x5.includes(e))).reduce(((t,i)=>(t[i]=e[i],t)),{});s.color=s.color||"#ffffff",s.fontSize=s.fontSize||17,s.lineHeight=24*s.fontSize/17,s.width=R5(r,s.fontSize),s.height=s.lineHeight,a.button=new ey({style:o,src:t,clickState:!0}),a.icon=new ey({style:{width:24,height:16,marginRight:e.iconMarginRight||8},src:i}),a.text=new Yv({style:s,value:r,bubbleEvent:!0}),a.button.add(a.icon),a.button.add(a.text),Xv.add(a.button),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:()=>r,set:e=>{r=e,a.text.value=e,a.text.style.width=R5(r,a.text.style.fontSize)}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:()=>t,set:e=>{t=e,a.button.src=e}}),this.style={};var l={};I5.forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>l[e],set:t=>{"height"===e?t=Math.max(t,40):"paddingLeft"!==e&&"paddingRight"!==e||(t=Math.max(t,16)),l[e]=t,a.button.style[e]=t}})})),x5.forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>l[e],set:t=>{"fontSize"===e&&(t=Math.min(Math.max(t,17),22),a.text.style.width=R5(r,t),a.text.style.height=24*t/17,a.text.style.lineHeight=24*t/17),l[e]=t,a.text.style[e]=t}})})),Object.defineProperty(this.style,"iconMarginRight",{configurable:!0,enumerable:!0,get:()=>l.iconMarginRight,set:e=>{l.iconMarginRight=e,a.icon.style.marginRight=e}}),this.share=n,a.button.on("click",(()=>{h5(3),S5(this.share).catch((e=>{a.emitter.emit("tap",e),p5.error.external.emit(e)}))})),h5(4)}onTap(e){P5.get(this).emitter.on("tap",e)}offTap(e){P5.get(this).emitter.off("tap",e)}show(){var e=P5.get(this);e.button.style.hidden&&(e.button.style.hidden=!1,h5(4))}hide(){P5.get(this).button.style.hidden=!0}}var k5=null;var M5=new class{constructor(){this.map=Object.keys(VF.adType).reduce(((e,t)=>{var i=VF.adType[t];return e[i]={total_open:0,total_click:0,ad_type:i},e}),{})}openAdd(e){this.map[e].total_open+=1}clickAdd(e){this.map[e].total_click+=1}},N5=VF.adTypeName;var L5,B5=class{constructor({adUnitId:e,adType:t,maxGameCount:i}){this.adUnitId=e,this.adType=t,this.maxGameCount=i,this.fetchPromise=null}getFetchParams(){return U3().then((e=>({place_id:this.adUnitId,context:{total_stay:e.sessionStayTime,enter_scene:e.enterScene,ad_type_stat_list:Object.keys(M5.map).map((e=>M5.map[e]))},limit:this.maxGameCount||e.maxGameCount,ad_type:this.adType})))}fetch(){if(this.fetchPromise)return this.fetchPromise;var e=new Date;return this.fetchPromise=this.getFetchParams().then((t=>ki({sdkApiName:"webapi_game_ad_load",apiName:"webapi_game_ad_load",reqData:t}).catch((i=>{var r=new Date-e;if(r>VF.TIMEOUT){W3(i,"Object")&&(i.time=r,i.step=1),N3.call(this,{key:VF.idkey[`${N5[this.adType]}_TIMEOUT`],adType:this.adType,adUnitId:this.adUnitId,error_detail:i});var n=new Date;return ki({sdkApiName:"webapi_game_ad_load",apiName:"webapi_game_ad_load",reqData:t}).catch((e=>{var t=new Date-n;return W3(e,"Object")&&(e.firstTime=r,e.retryTime=t,e.step=2),N3.call(this,{key:VF.idkey[`${N5[this.adType]}_TIMEOUT_RETRY_FAIL`],adType:this.adType,adUnitId:this.adUnitId,error_detail:e}),Promise.reject(e)})).then((e=>(N3.call(this,{key:VF.idkey[`${N5[this.adType]}_TIMEOUT_RETRY_SUCCESS`],adType:this.adType,adUnitId:this.adUnitId,error_detail:{firstTime:r,retryTime:new Date-n,step:3}}),e)))}return W3(i,"Object")&&(i.time=r,i.step=4),N3.call(this,{key:VF.idkey[`${N5[this.adType]}_LOAD_ERROR`],adType:this.adType,adUnitId:this.adUnitId,error_detail:i}),Promise.reject(i)})).then((t=>{this.fetchPromise=null;var i=t.data,r=new Date-e;return r>VF.TIMEOUT&&(W3(t,"Object")&&(t.time=r,t.step=4),N3.call(this,{key:VF.idkey[`${N5[this.adType]}_WXDATA_TIMEOUT`],adType:this.adType,adUnitId:this.adUnitId,error_detail:t})),0===i.errcode&&i.game_ad_list&&!i.game_ad_list.length?Promise.reject({errCode:i.errcode||1004}):0!==i.errcode?Promise.reject({errCode:i.errcode}):t})))),this.fetchPromise}},F5=i(423),U5='\n    {{? it.showFeedback !== false && it.feedbackList }}\n        <view id="feedback">\n            <text value="广告" id="feedbackTitle" bubbleEvent="true"></text>\n            <image src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png" id="feedbackImg" bubbleEvent="true"></image>\n        </view>\n\n        <view id="feedbackList">\n            {{~it.feedbackList:feedbackItem:index}}\n                <text id="feedbackItem__{{=index}}" class="feedbackItem" value="{{=feedbackItem.name}}"></text>\n\n                {{? index < it.feedbackList.length - 1 }}\n                    <view id="feedbackItemSplit"></view>\n                {{?}}\n            {{~}}\n        </view>\n    {{?}}\n';function W5(){var e=rA(this),t=e.feedbackList;t&&(e.feedback.on("click",(i=>{H3(i)&&(t.style.hidden=!t.style.hidden,e.feedbackImg.src=t.style.hidden?"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png":"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrowup.png")})),e.data.feedbackList.forEach(((t,i)=>{e["feedbackItem__"+i].on("click",(i=>{if(H3(i)){var r=e.adType===VF.adType.AD_TYPE_BANNER?e.container:e.gameboxwrap;D3({type:"game_click",params:M3.call(this,{event:i,action_type:t.actionType,layout:r})}),e.container.style.hidden=!0,e.feedbackList.style.hidden=!0,e.emitter.emit("close"),e.adType===VF.adType.AD_TYPE_PORTAL&&Xv.remove(e.container)}}))})))}function G5(){return L5||(L5=F5.Z.template(`\n    <view id="container">\n      <view id="mask"></view>\n      <view id="wrapper">\n          {{? it.deviceOrientation === 'portrait'}}\n              <view id="closeIconBox" class="closeIconBoxVer">\n                  <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n              </view>\n          {{?}}\n          <view id="gameboxwrap">\n              <view id="gamebox">\n                  <view id="gameAdList">\n                      {{~it.game_ad_list :game:index}}\n                          <view class="gameinfo" id="gameinfo__{{=index}}" bubble-event="true">\n                              <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n  \n                              <view id="gameinfoBox" bubble-event="true">\n                                  <view id="gameinfoTitle" bubble-event="true">\n                                      <text id="gameName__{{=index}}" class="gameName {{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n                                      {{? game.is_original_game }}\n                                          <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                                      {{?}}\n                                  </view>\n  \n                                  {{? game.brief_intro}}\n                                      {{~game.brief_intro_lines :line:lineIndex}}\n                                          <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                                      {{~}}\n                                  {{?}}\n  \n                                  \x3c!-- 竖屏 - 2个 or 3个游戏，展示2行描述，不展示标签 --\x3e\n                                  {{? it.deviceOrientation !== 'portrait' || (it.deviceOrientation === 'portrait' && it.game_ad_list.length === 1)}}\n                                      <view id="gameTagList" bubble-event="true">\n                                          {{~game.tag_list :tag:tagIndex}}\n                                              <text id="gameTagItem" class="{{=game.tag_classlist[tagIndex]}}" value="{{=tag}}" bubble-event="true"></text>\n                                          {{~}}\n                                      </view>\n                                  {{?}}\n  \n                                  \x3c!-- 竖屏多游戏或者横屏模式下才出现 --\x3e\n                                  {{? it.game_ad_list.length > 1 || it.deviceOrientation !== 'portrait' }}\n                                      <text id="btnGrayBg" class="portalBtn {{=game.btnClassName || '' }}" value="立即玩"  bubble-event="true"></text>\n                                  {{?}}\n  \n                                  {{? index < it.game_ad_list.length - 1}}\n                                      <view class="gameinfoBorder" id="gameinfoBorder__{{=index}}"></view>\n                                  {{?}}\n  \n                                  {{? index === it.game_ad_list.length - 1 && it.game_ad_list.length > 1}}\n                                      <view id="gameinfoBorderLast"></view>\n                                  {{?}}\n                              </view>\n                          </view>\n                      {{~}}\n  \n                      {{? it.game_ad_list.length === 1 && it.game_ad_list[0].banner_url }}\n                          <image id="gamepic" src="{{=it.game_ad_list[0].banner_url}}" bubble-event="true"></image>\n                      {{?}}\n  \n                      {{? it.game_ad_list.length === 1 && !it.game_ad_list[0].banner_url && it.deviceOrientation !== 'portrait'  }}\n                          <view id="emptyBlock"></view>\n                      {{?}}\n  \n                      {{? it.game_ad_list.length === 1 && it.deviceOrientation === 'portrait' }}\n                          <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n                      {{?}}\n                  </view>\n  \n                  <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n                  ${U5}\n              </view>\n  \n              {{? it.deviceOrientation !== 'portrait'}}\n                  <view id="closeIconBox" class="closeIconBoxHor">\n                      <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n                  </view>\n              {{?}}\n          </view>\n      </view>\n    </view>\n  `)),L5}function V5(e,t){var i=rA(this);if(H3(e)){M5.clickAdd(i.adType);var r=D3({type:"game_click",params:M3.call(this,{event:e,ad_pos_id:1,action_type:S3,layout:i.gameboxwrap,serving_id:t.serving_id||""})});Promise.race([r,z3(500)]).then((()=>{G3.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})})).catch((()=>{G3.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})}))}}function j5(){var e=rA(this);if(W5.call(this),e.closeIconBox.on("click",(t=>{H3(t)&&(D3({type:"game_click",params:M3.call(this,{event:t,action_type:I3,layout:e.gameboxwrap})}),e.container.style.hidden=!0,Xv.remove(e.container),e.emitter.emit("close"))})),1===e.data.game_ad_list.length){var t=e.data.game_ad_list[0];e.gameAdList.on("click",(e=>{V5.call(this,e,t)}))}else e.data.game_ad_list.forEach(((t,i)=>{e["gameinfo__"+i].on("click",(e=>{V5.call(this,e,t)}))}))}function H5(e){var t=rA(this);return t.data=e,t.data.dataBackTime=new Date,e.feedbackList=VF.feedbackList,U3().then((i=>{t.data.deviceOrientation=i.deviceOrientation,function(e,t,i){"landscape"===t.deviceOrientation&&(e.gamebox.width=465,e.gameDesc.width=308),e.container.width=t.screenWidth,e.container.height=t.screenHeight,e.mask.width=t.screenWidth,e.mask.height=t.screenHeight,e.wrapper.width=t.screenWidth,e.wrapper.height=t.screenHeight,e.closeIconBoxVer.marginRight=(t.screenWidth-e.gamebox.width)/2,i.deviceOrientation=t.deviceOrientation;var r=function(e,t){return"portrait"===e.deviceOrientation&&t.game_ad_list.length>1?{appname:144,desc:172}:"portrait"===e.deviceOrientation&&1===t.game_ad_list.length?{appname:214,desc:239}:"portrait"!==e.deviceOrientation?{appname:280,desc:308}:void 0}(t,i),n=r.appname,a=r.desc,o=i.game_ad_list.length;i.game_ad_list.forEach((i=>{if("portrait"!==t.deviceOrientation&&1===o&&(i.btnClassName="btnGreenBg"),i.appname){var r=zF.textMetrics(i.appname,{maxWidth:n-5,maxLines:1,fontSize:e.gameName.fontSize})[0];i.appname=r.text,i.className=`width_${r.width}`,e[i.className]={width:r.width}}var s="portrait"===t.deviceOrientation&&o>1?2:1;if(i.brief_intro){var l=zF.textMetrics(i.brief_intro,{maxWidth:a-5,maxLines:s,fontSize:e.gameDesc.fontSize});l.forEach((t=>{t.className=`width_${a}`,e[t.className]={width:a}})),i.brief_intro_lines=l}i.tag_classlist=[],i.tag_list&&i.tag_list.length&&i.tag_list.forEach(((t,r)=>{var n=zF.getTextWidth(t,e.gameTagItem.fontSize)+12;i.tag_classlist[r]=`width_${n}`,e[i.tag_classlist[r]]={width:n}}))}));var s=1;("portrait"===t.deviceOrientation&&t.screenWidth<VF.designWidth||"portrait"!==t.deviceOrientation&&t.screenHeight<VF.designWidth)&&(s="portrait"===t.deviceOrientation?t.screenWidth/VF.designWidth:t.screenHeight/VF.designWidth),"portrait"!==t.deviceOrientation&&t.screenWidth-230<(e.gamebox.width+44)*s&&(s*=(t.screenWidth-230)/((e.gamebox.width+44)*s)),1!==s&&Object.keys(e).forEach((t=>{"container"!==t&&"mask"!==t&&"wrapper"!==t&&(e[t].scale=s)}))}(style,i,e);var{root:r}=Lg()(G5()(e));return sA.call(this,r,style),Xv.add(t.container),t.container||N3.call(this,{key:VF.idkey.PORTAL_RENDER_ERROR,adType:t.adType,adUnitId:t.adUnitId,error_detail:{msg:"Layout.add error"}}),j5.call(this),t.container.ready()}))}var z5=new class{constructor(){for(var e in this.map={},VF.adType)this.map[VF.adType[e]]={current:null}}show(e,t){this.map[e].current=t}hide(e,t){this.map[e].current===t&&(this.map[e].current=null)}};function Y5(e,t){D3({type:"component_load",params:O3.call(this,{load_type:A3,open_time:e.s,cost_time:V3().ms-e.ms,result:t})})}function $5(){var e=rA(this);function t(t){var i=(t=t||{}).data;e.trace_id=i.trace_id,Y5.call(this,e.open_time,parseInt(i.errcode));var r=V3();return H5.call(this,i).then((()=>{e.hasData=!0,e.emitter.emit("load"),D3({type:"component_load",params:O3.call(this,{load_type:b3,open_time:r.s,layout:e.gameboxwrap,cost_time:V3().ms-r.ms,result:0})}),e.emitter.emit("ready")}))}return e.open_time=V3(),e.fetchPromise=e.proxy.fetch().then((e=>t.call(this,e))).catch((t=>(e.fetchPromise=null,Y5.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}function q5(){var e=rA(this);e.isShowed=!1,e.hasData=!1,e.exposure_time=V3(),e.open_time=V3(),e.trace_id="",e.fetchPromise=null,e.showPromise=null,z5.hide(e.adType,e)}function Q5(){var e=rA(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),z5.hide(e.adType,e),e.container&&Xv.remove(e.container)}function Z5(){var e=rA(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{Q5.call(this),t()})).catch((()=>{Q5.call(this),t()})):(Q5.call(this),t())}))),e.destroyPromise}class K5 extends oA{constructor(e={}){super();var{adUnitId:t}=e;if(!t)throw new Mt("[GamePortal]:"+VF.ERRMSG.NO_ADUNITID_WARN);this.isDestroyed=!1;var i=rA(this);i.adUnitId=t||"",i.adType=T3,i.emitter=new ty,i.proxy=new B5({adUnitId:t,adType:i.adType}),i.destroyPromise=null,i.isReady=!1,q5.call(this),i.emitter.on("ready",(()=>i.isReady=!0)),i.emitter.on("close",(()=>{q5.call(this),this.load()})),this.load()}load(){var e=rA(this);return e.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):e.isShowed?Promise.reject({errMsg:"can't invoke load() while GamePortal is showed"}):e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Xv.remove(e.container),N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),$5.call(this).catch((t=>(N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),e.emitter.emit("_error",Y3(t)),Promise.reject(t)))).then((t=>(N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),t)))):e.fetchPromise?e.fetchPromise:$5.call(this).catch((t=>(e.emitter.emit("_error",Y3(t)),Promise.reject(t))))}offClose(e){this.isDestroyed||rA(this).emitter.off("close",e)}offError(e){this.isDestroyed||rA(this).emitter.off("_error",e)}offLoad(e){this.isDestroyed||rA(this).emitter.off("load",e)}onClose(e){this.isDestroyed||rA(this).emitter.on("close",e)}onError(e){this.isDestroyed||rA(this).emitter.on("_error",e)}onLoad(e){this.isDestroyed||rA(this).emitter.on("load",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var e=rA(this),t=z5.map[e.adType].current;return t&&t!==e?Promise.reject({errMsg:VF.ERRMSG.DUPLICATEWARN}):(z5.show(e.adType,e),e.showPromise?e.showPromise:e.hasData?e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Xv.remove(e.container),N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),$5.call(this).catch((t=>(e.emitter.emit("_error",Y3(t)),z5.hide(e.adType,e),N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"show"}}),Promise.reject(t)))).then((()=>(N3.call(this,{key:VF.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"show"}}),e.container.style.hidden=!1,e.showPromise=e.container.nextLayout().then((()=>{e.isShowed=!0,e.exposure_time=V3(),k3.call(this,e.gameboxwrap),M5.openAdd(e.adType),Q3.call(this,e.data.game_ad_list)})),e.showPromise)))):(e.container.style.hidden=!1,e.showPromise=e.container.nextLayout().then((()=>{e.isShowed=!0,e.exposure_time=V3(),k3.call(this,e.gameboxwrap),M5.openAdd(e.adType),Q3.call(this,e.data.game_ad_list)})),e.showPromise):(z5.hide(e.adType,e),Promise.reject({errMsg:VF.ERRMSG.NODATA})))}destroy(){return Z5.call(this)}}var X5,J5,e6,t6,i6=function(){return{bottomIcon:{position:"absolute",right:0,bottom:0,width:72,height:16},btnGreenBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#ffffff",fontSize:16,backgroundColor:"#07C160",fontWeight:500},btnGrayBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#07C160",fontSize:16,backgroundColor:"rgba(0,0,0,0.05)",fontWeight:500},gameinfoIcon:{width:48,height:48,borderRadius:24,borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:.5},gameNameTagWithoutBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:2,marginLeft:4,marginTop:3},gameNameTagWithBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:1,position:"absolute",right:0,bottom:0,borderWidth:1,borderColor:"#ffffff"},feedback:{position:"absolute",left:6,top:6,width:46,height:16,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},feedbackTitle:{width:22,fontSize:10,height:16,lineHeight:16,color:"#ffffff",marginLeft:8},feedbackImg:{top:7,left:32,width:6,height:3,position:"absolute"},feedbackList:{hidden:!0,height:36,borderRadius:4,backgroundColor:"#4C4C4C",position:"absolute",left:6,top:28,flexDirection:"row",zIndex:2,alignItems:"center"},feedbackItem:{width:78,height:36,lineHeight:36,color:"#ffffff",fontSize:14,textAlign:"center"},feedbackItemSplit:{width:.5,height:24,backgroundColor:"rgba(0, 0, 0, 0.2)"}}};function r6(){return`\n        <view id="container">\n            <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n\n            <view id="gameinfoBox" bubble-event="true">\n                <view id="gameinfoTitle" bubble-event="true">\n                    <text id="gameName" class="{{=it.game.className}}" value="{{=it.game.appname}}" bubble-event="true"></text>\n                    {{? it.game.is_original_game }}\n                        <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                \x3c!-- 换行 --\x3e\n                {{? it.game.brief_intro}}\n                    {{~it.game.brief_intro_lines :line:lineIndex}}\n                        <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                    {{~}}\n                {{?}}\n            </view>\n            <text id="btnGreenBg" value="立即玩"  bubble-event="true"></text>\n            <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n            ${U5}\n        </view>\n    `}function n6(e,t,i){i.game=i.game_ad_list[0],i.game_ad_list.forEach((t=>{if(t.appname){var i=zF.textMetrics(t.appname,{maxWidth:145,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=i.text,t.className=`width_${i.width}`,e[t.className]={width:i.width}}if(t.brief_intro){var r=zF.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-10,maxLines:2,fontSize:e.gameDesc.fontSize});r.forEach((t=>{t.className=`width_${e.gameDesc.width}`,e[t.className]={width:e.gameDesc.width}})),t.brief_intro_lines=r,2===r.length&&(e.container.height=120)}}))}function a6(){return`\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n\n                <text id="gameName" class="{{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n\n                {{? game.brief_intro }}\n                    <text class="gameFriendValue" value="{{=game.brief_intro}}" id="gameFriendValue__{{=index}}" bubble-event="true"></text>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${U5}\n    </view>\n`}function o6(e,t,i){e.container.height=i.game_ad_list.find((e=>e.brief_intro))?120:102,2===i.game_ad_list.length&&(e.gameFriendValue.width=130,e.gameName.width=130),i.game_ad_list.forEach((t=>{if(t.appname){var i=zF.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=i.text}if(t.brief_intro=t.tag_list.slice(0,2).join("丨"),t.brief_intro){var r=zF.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=r.text}}))}function s6(){return`\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                <view id="gameinfoBox" bubble-event="true">\n                    <text id="gameName" value="{{=game.appname}}" bubble-event="true"></text>\n\n                    {{? game.brief_intro }}\n                        <text id="gameFriendValue" value="{{=game.brief_intro}}" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                {{? index < it.game_ad_list.length - 1}}\n                    <view id="gameItemRightBorder"></view>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${U5}\n    </view>\n`}function l6(e,t,i){e.container.width=167*i.game_ad_list.length,i.game_ad_list.forEach((t=>{if(t.appname){var i=zF.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=i.text}if(t.brief_intro=t.tag_list.slice(0,1).join("丨"),t.brief_intro){var r=zF.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=r.text}}))}function u6(e,t,i){i.game=i.game_ad_list[0],i.game_ad_list.forEach((t=>{if(t.appname){var i=zF.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=i.text}if(t.brief_intro=t.tag_list.slice(0,3).join("丨"),t.brief_intro){var r=zF.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-5,maxLines:1,fontSize:e.gameDesc.fontSize})[0];t.brief_intro=r.text}}))}var c6=i(725);function d6(e,t){var i=rA(this);if(H3(e)){var r=D3({type:"game_click",params:M3.call(this,{event:e,ad_pos_id:1,action_type:S3,layout:i.container,serving_id:t.serving_id||""})});M5.clickAdd(i.adType),wxNativeConsole.info(`clickReportBeforeNavigateToMiniProgram_${t.appid}_${t.serving_id}`),Promise.race([r,z3(500)]).then((()=>{G3.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})})).catch((()=>{G3.call(this,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})}))}}function h6(){var e=rA(this),t=e.data.game;W5.call(this),1===e.data.game_ad_list.length?e.container.on("click",(e=>{d6.call(this,e,t)})):e.data.game_ad_list.forEach(((t,i)=>{e["gameinfo__"+i].on("click",(e=>{d6.call(this,e,t)}))}))}function p6(e,t){var i=rA(this);i.globalScale=1;var r=1;e.screenWidth<VF.designWidth&&(r=e.screenWidth/VF.designWidth,i.globalScale=r,Object.keys(t).forEach((e=>{t[e].scale=r})));var n={width:t.container.width*r,height:t.container.height*r},a=(e.screenHeight-n.height-31)/r,o=(e.screenWidth-n.width)/2/r,s=i.devStyle;s.left&&(o=j3(e,"left",s.left,n)/r),s.top&&(a=j3(e,"top",s.top,n)/r),t.container.top=a,t.container.left=o}function f6(e,t){var i=t.game_ad_list||[];return"portrait"===e.deviceOrientation?1===i.length?{template:r6(),style:Object.assign(i6(),{container:{width:343,height:108,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,zIndex:1,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16},gamebox:{},gameinfoBox:{paddingLeft:8},gameinfoTitle:{flexDirection:"row"},gameName:{height:22,overflow:"visible",width:68,fontSize:17,color:"#000000",opacity:.9},gameDesc:{width:190,height:17,fontSize:14,marginTop:3,color:"#000000",opacity:.5,overflow:"hidden"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.3,width:177,marginTop:5,height:14}}),tplFn:(X5||(X5=F5.Z.template(r6())),X5),styleFilter:n6}:{template:a6(),style:Object.assign(i6(),{container:{width:343,position:"absoulte",overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:18,paddingRight:18,paddingTop:12,paddingBottom:20,flexDirection:"row",justifyContent:"center",zIndex:1},gameItem:{width:167,alignItems:"center",flex:1},gameIconBox:{width:53,heigth:48,overflow:"visible"},gameName:{height:20,width:105,fontSize:14,marginTop:6,textAlign:"center"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:105,height:15,textAlign:"center"}}),tplFn:(J5||(J5=F5.Z.template(a6())),J5),styleFilter:o6}:1===i.length?{template:`\n    <view id="container">\n        <view id="gameIconBox" bubble-event="true">\n            <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n            {{? it.game.is_original_game }}\n                <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <view id="gameinfoBox" bubble-event="true">\n            <view id="gameinfoTitle" bubble-event="true">\n                <text id="gameName" class="{{=it.game.className }}" value="{{=it.game.appname}}" bubble-event="true"></text>\n            </view>\n            {{? it.game.brief_intro}}\n                <text id="gameDesc" value="{{=it.game.brief_intro}}" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        ${U5}\n    </view>\n`,style:Object.assign(i6(),{container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:16,paddingRight:16,flexDirection:"row",alignItems:"center",zIndex:1},gameIconBox:{width:53,heigth:48},gameinfoBox:{paddingLeft:4},gameinfoTitle:{flexDirection:"row",height:17},gameName:{height:17,width:170,fontSize:14},gameDesc:{width:180,height:14,fontSize:12,marginTop:4,color:"#000000",opacity:.5,overflow:"hidden"},gameBtnText:{width:67,height:28,lineHeight:28,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#06AE56",fontSize:17,backgroundColor:"#f2f2f2"}}),tplFn:(t6||(t6=F5.Z.template(template)),t6),styleFilter:u6}:{template:s6(),style:Object.assign(i6(),{container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,flexDirection:"row",alignItems:"center",zIndex:1},gameItem:{width:167,flex:1,flexDirection:"row",alignItems:"center"},gameItemRightBorder:{width:1,backgroundColor:"#e5e5e5",height:70},gameIconBox:{width:53,heigth:48,marginLeft:16},gameinfoBox:{paddingLeft:4,width:95},gameName:{height:20,width:88,fontSize:14},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:88,marginTop:0,height:15,textAlign:"left"}}),tplFn:(e6||(e6=F5.Z.template(s6())),e6),styleFilter:l6}}function g6(e){var t=rA(this);return t.data=e,t.data.dataBackTime=new Date,e.feedbackList=VF.feedbackList,U3().then((i=>{var{template:r,style:n,tplFn:a,styleFilter:o}=f6(i,e);o.call(this,n,i,e),p6.call(this,i,n),r=a(t.data);var{root:s}=c6(r);return sA.call(this,s,n),Xv.add(t.container),t.container||N3.call(this,{key:VF.idkey.BANNER_RENDER_ERROR,adType:t.adType,adUnitId:t.adUnitId,error_detail:{msg:"Layout.add error"}}),h6.call(this),t.container.nextLayout()}))}function _6(e,t){D3({type:"component_load",params:O3.call(this,{load_type:A3,open_time:e.s,cost_time:V3().ms-e.ms,result:t})})}function m6(){var e=rA(this),t=e.container.style,i=e.globalScale||1;e.devStyle.left=t.left,e.devStyle.top=t.top,this.style.width=Math.round(t.width*i),this.style.height=Math.round(t.height*i),e.emitter.emit("resize",{width:Math.round(t.width*i),height:Math.round(t.height*i),left:Math.round(t.left*i),top:Math.round(t.top*i)})}function v6(e){var t=rA(this);return g6.call(this,e).then((()=>{m6.call(this),setTimeout((()=>{t.emitter.emit("ready")}),0)}))}var y6,A6=function(){var e=rA(this);return new Promise((t=>{e.isReady?t():e.emitter.on("ready",t)}))};function b6(){var e=rA(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),z5.hide(e.adType,e),e.container&&Xv.remove(e.container)}function E6(){var e=rA(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{b6.call(this),t()})).catch((()=>{b6.call(this),t()})):(b6.call(this),t())}))),e.destroyPromise}function w6(){var e=rA(this);function t(t){e.emitter.emit("load");var i=(t=t||{}).data;e.trace_id=i.trace_id,_6.call(this,e.open_time,parseInt(i.err_code||i.errcode||i.errCode||0));var r=V3();return v6.call(this,i).then((()=>{e.hasData=!0,D3({type:"component_load",params:O3.call(this,{load_type:b3,open_time:r.s,layout:e.container,cost_time:V3().ms-r.ms,result:0})})}))}return e.open_time=V3(),e.fetchPromise=e.proxy.fetch().then((e=>{if(!this.isDestroyed)return t.call(this,e)})).catch((t=>(_6.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}function T6(e,t){return U3().then((i=>{var r=rA(this),n={width:r.container.style.width*r.globalScale||1,height:r.container.style.height*r.globalScale||1};return j3(i,e,t,n)/(r.globalScale||1)}))}class C6 extends oA{constructor(e={}){super();var{adUnitId:t,style:i={left:0,top:0}}=e;if(!t)throw new Mt("[GameBanner]:"+VF.ERRMSG.NO_ADUNITID_WARN);i.left||(i.left=0),i.top||(i.top=0),this.isDestroyed=!1,this.style={width:0,height:0};var r=rA(this);r.emitter=new ty,r.adType=w3,r.proxy=new B5({adUnitId:t,adType:r.adType}),r.destroyPromise=null,r.isShowed=!1,r.hasData=!1,r.trace_id="",r.globalScale=1,r.devStyle=i,Object.keys(i).forEach((e=>{Object.defineProperty(this.style,e,{configurable:!0,enumerable:!0,get:()=>Math.round(r.devStyle[e]*r.globalScale),set:t=>{this.isDestroyed||t!==r.devStyle[e]&&A6.call(this).then((()=>{T6.call(this,e,t).then((t=>{t!==r.devStyle[e]&&(r.devStyle[e]=t,Object.assign(r.container.style,{left:r.devStyle.left,top:r.devStyle.top}),m6.call(this))}))}))}})})),r.isReady=!1,r.emitter.on("ready",(()=>r.isReady=!0)),r.emitter.on("close",(()=>{r.isShowed=!1,z5.hide(r.adType,r)})),w6.call(this).catch((e=>{r.emitter.emit("_error",Y3(e))}))}offClose(e){this.isDestroyed||rA(this).emitter.off("close",e)}offError(e){this.isDestroyed||rA(this).emitter.off("_error",e)}offLoad(e){this.isDestroyed||rA(this).emitter.off("load",e)}onError(e){this.isDestroyed||rA(this).emitter.on("_error",e)}onLoad(e){this.isDestroyed||rA(this).emitter.on("load",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var e=rA(this),t=z5.map[e.adType].current;return t&&t!==e?Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"}):(z5.show(e.adType,e),e.isShowed?Promise.resolve():(e.isShowed=!0,e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()&&(e.container&&Xv.remove(e.container),N3.call(this,{key:VF.idkey.BANNER_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),w6.call(this).catch((t=>{z5.hide(e.adType,e),e.emitter.emit("_error",Y3(t))}))),e.fetchPromise.then((()=>(e.container.style.hidden=!1,e.exposure_time=V3(),k3.call(this,e.container),M5.openAdd(e.adType),Q3.call(this,e.data.game_ad_list),e.container.nextLayout()))).catch((t=>(z5.hide(e.adType,e),Promise.reject(t))))))}destroy(){return E6.call(this)}hide(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var e=rA(this);return e.isShowed?(e.isShowed=!1,A6.call(this).then((()=>(e.container.style.hidden=!0,e.container.nextLayout().then((()=>{z5.hide(e.adType,e),D3({type:"game_click",params:M3.call(this,{action_type:x3,layout:e.container})})})))))):Promise.resolve()}onResize(e){this.isDestroyed||rA(this).emitter.on("resize",e)}offResize(e){this.isDestroyed||rA(this).emitter.off("resize",e)}}function S6(e,t,i){var r=rA(this);if(H3(e)){var n=D3({type:"game_click",params:M3.call(this,{event:e,ad_pos_id:i+1,action_type:S3,layout:r.gameIconBox0,serving_id:t.serving_id||""})});M5.clickAdd(r.adType),Promise.race([n,z3(500)]).then((()=>{G3.call(this,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})})).catch((()=>{G3.call(this,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})}))}}function I6(){var e=rA(this);e.data.game_ad_list.forEach(((t,i)=>{e["gameIconBox"+i].on("click",(e=>{S6.call(this,e,t,i)}))}))}function x6(e,t){var i=rA(this);return i.data=e,i.data.dataBackTime=new Date,U3().then((r=>{var n={iconcontainer:{width:700,height:1e3},gameIconBoxContainer:{width:72,height:90,alignItems:"center",position:"absolute",hidden:!0},gameIcon:{marginTop:8},gameName:{fontSize:12,height:20,width:72,textAlign:"center",marginTop:4}};i.data.deviceOrientation=r.deviceOrientation,function(e,t,i,r){var n=i.game_ad_list||[];r.forEach(((t,i)=>{var r={};e["gameIconBox"+i]=r,r.left=t.left,r.top=t.top;var a={};e["gameIcon"+i]=a;var o=$3(t.size,32,64),s=$3(t.borderWidth,0,10);a.width=o,a.height=o,a.borderColor=t.borderColor,a.borderWidth=s,a.borderRadius=a.width/2;var l={};if(e["gameName"+i]=l,l.color=t.color,l.hidden=t.appNameHidden,r.height=t.appNameHidden?64:90,n[i]&&n[i].appname){var u=zF.textMetrics(n[i].appname,{maxWidth:e.gameName.width,maxLines:1,fontSize:e.gameName.fontSize})[0];n[i].appname=u.text}}))}(n,0,e,t);for(var{root:a}=Lg()((y6||(y6=F5.Z.template('\n        <view>\n            {{~it.game_ad_list :game:index}}\n                <view id="gameIconBox{{= index}}" class="gameIconBoxContainer" bubble-event="true">\n                    <image id="gameIcon{{= index}}" class="gameIcon" src="{{= game.icon_url}}" bubble-event="true"></image>\n                    <text id="gameName{{= index}}" class="gameName" value="{{= game.appname}}" bubble-event="true"></text>\n                </view>\n            {{~}}\n        </view>\n    ')),y6)(e)),o=0;o<this.icons.length;o++)i["gameIconBox"+o]&&Xv.remove(i["gameIconBox"+o]);for(var s=0;s<a.children.length;s++)sA.call(this,a.children[s],n),Xv.add(i["gameIconBox"+s]);I6.call(this);var l=[...Array(e.game_ad_list.length)].map(((e,t)=>i["gameIconBox"+t].ready()));return Promise.all(l)}))}function P6(e,t){D3({type:"component_load",params:O3.call(this,{load_type:A3,open_time:e.s,cost_time:V3().ms-e.ms,result:t})})}function D6(){rA(this).emitter.emit("resize",this.icons.slice(0,this.iconCount))}function R6(){var e=rA(this);function t(t){e.emitter.emit("load");var i=(t=t||{}).data;this.iconCount=i.game_ad_list.length,e.trace_id=i.trace_id,P6.call(this,e.open_time,parseInt(i.err_code||i.errcode||i.errCode||0));var r=V3();return x6.call(this,i,e.icons).then((()=>{D6.call(this),setTimeout((()=>{e.emitter.emit("ready")}),0),D3({type:"component_load",params:O3.call(this,{load_type:b3,open_time:r.s,layout:e.gameIconBox0,cost_time:V3().ms-r.ms,result:0})})}))}return e.open_time=V3(),e.fetchPromise=e.proxy.fetch().then((e=>{if(!this.isDestroyed)return t.call(this,e)})).catch((t=>(e.fetchPromise=null,P6.call(this,e.open_time,parseInt(t.errCode||t.err_code||-1)),Promise.reject(t)))),e.fetchPromise}var O6=function(){var e=rA(this);return new Promise((t=>{e.isReady?t():e.emitter.on("ready",t)}))};function k6(){var e=rA(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),z5.hide(e.adType,e),M6.call(this).forEach((e=>e&&Xv.remove(e)))}function M6(){for(var e=rA(this),t=[],i=0;i<this.iconCount;i++)t.push(e["gameIconBox"+i]);return t}function N6(){var e=rA(this);return e.destroyPromise||(e.destroyPromise=new Promise((t=>{e.fetchPromise?e.fetchPromise.then((()=>{k6.call(this),t()})).catch((()=>{k6.call(this),t()})):(k6.call(this),t())}))),e.destroyPromise}function L6(){for(var e=this,t=rA(this),i=function(i){e.icons[i]={},Object.keys(t.icons[i]).forEach((r=>{Object.defineProperty(e.icons[i],r,{configurable:!0,enumerable:!0,get:()=>"width"!==r&&"height"!==r||!t["gameIconBox"+i]?t.icons[i][r]:t["gameIconBox"+i].style[r],set:n=>{if(!e.isDestroyed){if("width"===r||"height"===r)return console.error("组件的宽高不可设置");if(n!==t.icons[i][r]){var a=t["gameIconBox"+i],o=t["gameIcon"+i],s=t["gameName"+i];if(a){var l=n;O6.call(e).then((()=>{"left"===r||"top"===r?a.style[r]=l:"size"===r?(l=$3(l,32,64),o.style.width=o.style.height=l):"borderColor"===r?o.style[r]=l:"borderWidth"===r?(l=$3(l,0,10),o.style[r]=l):"color"===r?s.style.color=l:"appNameHidden"===r&&(s.style.hidden=l,a.style.height=l?64:84),t.icons[i][r]=l,D6.call(e)}))}}}}})}))},r=0;r<t.count;r++)i(r)}class B6 extends oA{constructor(e={}){super();var{adUnitId:t,count:i,style:r}=e;if(!t)throw new Mt("[GameIcon]:"+VF.ERRMSG.NO_ADUNITID_WARN);if(!W3(i,"Number")||i<1||i>9)throw new Mt("[GameIcon]: count字段必须是1-9的数字");if(r&&(!W3(r,"Array")||r.find((e=>!W3(e,"Object")))))throw new Mt("[GameIcon]: style必须是由对象组成的数组");r||(r=[]);var n=rA(this);this.isDestroyed=!1,this.iconCount=0,this.icons=[],n.count=i,n.icons=[];for(var a=10,o=0,s=0;s<i;s++)s>0&&s%3==0&&(a=10,o+=84),n.icons[s]=Object.assign({left:a,top:o,appNameHidden:!1,color:"#000000",size:48,borderWidth:0,borderColor:"#FFF8D5",width:64,height:84},r[s]||{}),a+=82;n.emitter=new ty,n.adType=C3,n.proxy=new B5({adUnitId:t,adType:n.adType,maxGameCount:i}),n.destroyPromise=null,n.isShowed=!1,n.trace_id="",n.isReady=!1,n.emitter.on("ready",(()=>n.isReady=!0)),L6.call(this),R6.call(this).catch((e=>{n.emitter.emit("_error",Y3(e))}))}load(){var e=rA(this);return e.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()?(e.container&&Xv.remove(e.container),N3.call(this,{key:VF.idkey.ICON_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),R6.call(this).catch((t=>(N3.call(this,{key:VF.idkey.ICON_DATA_INVALID_RETRY_FAIL,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),e.emitter.emit("_error",Y3(t)),Promise.reject(t)))).then((t=>(N3.call(this,{key:VF.idkey.ICON_DATA_INVALID_RETRY_SUCCESS,adType:e.adType,adUnitId:e.adUnitId,error_detail:{type:"load"}}),t)))):e.fetchPromise?e.fetchPromise:(e.isReady=!1,R6.call(this).catch((t=>(e.emitter.emit("_error",Y3(t)),Promise.reject(t)))).then((t=>e.isShowed?(e.isShowed=!1,z5.hide(e.adType,e),this.show()):Promise.resolve(t))))}onLoad(e){this.isDestroyed||rA(this).emitter.on("load",e)}offLoad(e){this.isDestroyed||rA(this).emitter.off("load",e)}offError(e){this.isDestroyed||rA(this).emitter.off("_error",e)}onError(e){this.isDestroyed||rA(this).emitter.on("_error",e)}show(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var e=rA(this),t=z5.map[e.adType].current;if(t&&t!==e)return Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"});if(z5.show(e.adType,e),e.isShowed)return Promise.resolve();if(e.isShowed=!0,e.data&&(new Date).toDateString()!==e.data.dataBackTime.toDateString()&&(M6.call(this).forEach((e=>e&&Xv.remove(e))),N3.call(this,{key:VF.idkey.ICON_DATA_INVALID,adType:e.adType,adUnitId:e.adUnitId,error_detail:{dataBackTime:e.data.dataBackTime.getTime()}}),R6.call(this).catch((t=>{z5.hide(e.adType,e),e.emitter.emit("_error",Y3(t))}))),!e.fetchPromise){e.exposure_time=V3(),k3.call(this,e.gameIconBox0),M5.openAdd(e.adType);for(var i=[],r=0;r<this.iconCount;r++){var n=e["gameIconBox"+r];n.style.hidden=!1,i.push(n.nextLayout())}return Promise.all(i)}return e.fetchPromise.then((()=>{e.fetchPromise=null,e.exposure_time=V3(),k3.call(this,e.gameIconBox0),M5.openAdd(e.adType);for(var t=[],i=0;i<this.iconCount;i++){var r=e["gameIconBox"+i];r.style.hidden=!1,t.push(r.nextLayout())}return Q3.call(this,e.data.game_ad_list),Promise.all(t)})).catch((t=>(z5.hide(e.adType,e),Promise.reject(t))))}destroy(){return N6.call(this)}hide(){if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var e=rA(this);return e.isShowed?(e.isShowed=!1,O6.call(this).then((()=>{var t=[];return M6.call(this).forEach((e=>{e.style.hidden=!0,t.push(e.nextLayout())})),Promise.all(t).then((()=>{z5.hide(e.adType,e),D3({type:"game_click",params:M3.call(this,{action_type:x3,layout:e.gameIconBox0})})}))}))):Promise.resolve()}onResize(e){this.isDestroyed||rA(this).emitter.on("resize",e)}offResize(e){this.isDestroyed||rA(this).emitter.off("resize",e)}}var F6=Li("getUserInteractiveStorage","webapi_getuserinteractivedata",(({keyList:e=[]})=>({key:e}))),U6=(Li("scanItem","ProductLogic",(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.errcode,e.products=(e.products||[]).map((e=>({info:{title:e.info.title,category:e.info.category.map((e=>({name:e.name})))}})))})),Li("scanItem","ProductLogic",(e=>({method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})})),(e=>{delete e.errcode,e.products=e.products||[]})),()=>{if(!k.ext)return{};try{return JSON.parse(JSON.stringify(k.ext))}catch(e){return{}}}),W6=function(){return{miniProgram:{appId:k.accountInfo&&k.accountInfo.appId||"",envVersion:k.envVersion||"release",version:k.appContactInfo&&k.appContactInfo.user_version||""}}},G6=i(926),V6=i.n(G6),j6=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestSubscribeDeviceMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","isBluetoothDevicePaired","setBLEMTU","getBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts","publishWeChatState","chooseLicensePlate","openSystemBluetoothSetting","openAppAuthorizeSetting","openEmbeddedMiniProgram"],H6={};function z6(e,t=!0){Reporter.reportKeyValue({key:"MidasFriendPayment",value:[H6.scene,1,31,t?1:2,0,"1","",0,"",$i(),0,0,0,0,0,H6.scene_note,encodeURIComponent(JSON.stringify({label:e.mark_type,report_info:e.report_info,sessionId:H6.sessionid||H6.sessionId}))].join(",")})}k.onReady((()=>{H6=k.appLaunchInfo||{},function(){var e=(H6.referrerInfo||{}).messageExtraData||{};Oi({apiName:"webapi_game_getsharemarkingame",reqData:{lib_version:Ko,scene:H6.scene,launch_with_share_mark:!!e.shareCardMarker},success:({data:e})=>{e&&(e.mark_list||[]).forEach(((e,t)=>setTimeout((()=>{z6(e),function({label:e,icon:t,tag:i,data:r,more:n=!1}){Pv({label:e,icon:t,tag:i,more:n,background:"transparent",base64:L}).then((t=>{var i=new ey({src:t,autoInsert:!0,style:{left:0,width:210,height:40,opacity:0,top:/landscape/.test(k.deviceOrientation)?48:104}}),a=!1;n&&i.on("click",(()=>{a=!0,Oi({apiName:"webapi_game_getfriendsscore",success:({data:t})=>{var i=t.friend_score_list||[];!function(e={}){__sclEngine__.initScl((t=>{t.mainRoot.append("game-ranklist",e)}))}({title:e,list:i})}}),z6(r,!1),i.destroy()})),it("animateCoverView",{viewId:i.id,finalStyle:{opacity:1},duration:250,easing:"ease-out"}),setTimeout((()=>{setTimeout((()=>a||i.destroy()),300),a||it("animateCoverView",{viewId:i.id,finalStyle:{opacity:0},duration:200,easing:"ease-in"})}),5250)}))}({data:e,label:e.wording,icon:e.head_img_url,tag:e.mark_word,more:6===e.mark_type})}),2e3+4500*t)))}})}()}));var Y6=null,$6=!1,q6=()=>!0===$6||("function"!=typeof getProfiler?(void 0!==O.Z.Profiler&&(Y6=O.Z.Profiler,$6=!0),!0):((Y6=getProfiler())&&($6=!0),!0)),Q6=!1,Z6=()=>(q6(),Y6?(Q6||(Q6=!0,Y6.startCpuProfiling()),!0):null),K6=()=>{if(q6(),!Y6)return null;if(Q6){Q6=!1;var e=Y6.stopCpuProfiling();return e}return null};function X6(e){for(var t="",i=0;i<e.length;){var r=e[i],n=0;r>>>7==0?(t+=String.fromCharCode(e[i]),i+=1):252==(252&r)?(n=(3&e[i])<<30,n|=(63&e[i+1])<<24,n|=(63&e[i+2])<<18,n|=(63&e[i+3])<<12,n|=(63&e[i+4])<<6,n|=63&e[i+5],t+=String.fromCharCode(n),i+=6):248==(248&r)?(n=(7&e[i])<<24,n|=(63&e[i+1])<<18,n|=(63&e[i+2])<<12,n|=(63&e[i+3])<<6,n|=63&e[i+4],t+=String.fromCharCode(n),i+=5):240==(240&r)?(n=(15&e[i])<<18,n|=(63&e[i+1])<<12,n|=(63&e[i+2])<<6,n|=63&e[i+3],t+=String.fromCharCode(n),i+=4):224==(224&r)?(n=(31&e[i])<<12,n|=(63&e[i+1])<<6,n|=63&e[i+2],t+=String.fromCharCode(n),i+=3):192==(192&r)?(n=(63&e[i])<<6,n|=63&e[i+1],t+=String.fromCharCode(n),i+=2):(t+=String.fromCharCode(e[i]),i+=1)}return t}var J6="STOP_CPU_PROFILE",e8="TAKE_HEAP_SNAPSHOT",t8="PERFDOG_METHOD",i8="PERFDOG_METHOD_CALLBACK",r8="LAN_DEBUG_GET_DEVICE_INFO",n8="LAN_DEBUG_PLUGIN_GET_DEVICE_INFO",a8="OPEN",o8="CLOSED",s8="ERROR",l8="CONNECTING",u8="LAN_DEBUG_STATUS_CHANGE",c8=!1;function d8(e,t){var{model:i,version:r,system:n,SDKVersion:a}=hs(),{accountInfo:o,isDevEdition:s}=k,{appId:l,nickname:u}=o,c={model:i,wechatVersion:r,system:n,SDKVersion:a,appId:l,nickname:u,isDevEdition:!!s};t(e,JSON.stringify(c))}function h8(e,t,r){c8||(c8=!0,function(e){var t=i.g.LanDebug;t&&(bi||delete i.g.LanDebug,t.registerCallback?t.registerCallback(t8,((t,i)=>{e(i8,i)})):t.registerCallback)}(t),e(r8,(()=>{d8(r8,t)})),e(n8,(()=>{d8(n8,t)})),e(t8,(e=>{var i="undefined"!=typeof getPerfDog?getPerfDog():void 0,r="PerfDog not found";i&&i.handle&&(r=i.handle(t8,e)),t(i8,r)})),e("START_CPU_PROFILE",(()=>{Z6()})),e(J6,(()=>{var e=K6();L&&e&&(e.constructor.toString().includes("ArrayBuffer")?e=X6(new Uint8Array(e)):"object"==typeof e&&(e=JSON.stringify(e))),t(J6,e||"")})),e(e8,(()=>{setTimeout((()=>{var e=(q6(),Y6?Y6.takeHeapSnapshot():null);if(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"start"})),!e)return t(e8,""),t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),!1;if(e.on){var i=r(e8),n=!1;e.on("data",(e=>{n||(t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"data"})),n=!0),i.send(e.slice())})),e.on("end",(()=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"end"})),i.end(new ArrayBuffer(0))})),e.on("error",(e=>{t("TAKE_HEAP_SNAPSHOT:PROGRESS",JSON.stringify({data:"error"})),i.end(new ArrayBuffer(0))})),e.flush()}return!0}),100)})))}var p8=0,f8=No(),g8=null,_8=()=>g8||(g8=V6()()("\n  message LanDebugHeader {\n    required int32 version = 0;         // 版本，用于升级时兼容用\n    required string method = 1;         // 命令字，代表该包行为\n    required int32 id = 2;              // 命令序号，client端每次给server发命令可以弄一个自增序号，这样方便server处理isEnd。\n    required bool isString = 3;         // 若开发者传输的原始数据是string，需要标识，用于服务端处理\n    required string clientId = 4;       // 客户端会唯一生成一个ID\n    optional bool notEnd = 5;           // 若isEnd为true，代表这次命令已经发送完毕\n    optional string options = 6;        // 预留字段，后续可能会有一些用\n  }\n")),m8=((e=6)=>{(e>=13||e<0)&&(e=13);for(var t=`${Date.now()}`.slice(-e).split(""),i=0;i<Math.floor(e/2);i++){var r=Math.floor(10*Math.random());t[i]="abcdefghij"[r]}return t.join("")})(),v8=new _e,y8=null,A8=o8,b8="",E8=-1,w8=!1,T8=null,C8=null,S8=[],I8=[],x8=[];function P8(e){var t;try{if("object"!=typeof e)return Promise.resolve(!1);if("string"!=typeof e.ip||"string"!=typeof e.token)return Promise.resolve(!1);t=e}catch(e){return Promise.resolve(!1)}if(A8===a8&&C8)return Promise.resolve(C8);if(A8===l8)return y8;var{ip:i,port:r,token:n,useStaticServer:a=!1,mode:o}=t;w8=a,b8=i,E8=r,A8=l8;var s="mpHelper"===o?"MPHELPER":"LANDEBUG",l=hs();return h8(M8,O8,k8),y8=new Promise((e=>{(C8=f8.connectSocket({url:`ws://${i}:${r}`,protocols:[`${encodeURI(`${s}#${l.system}_v${l.version}_${m8}`)}||${n}`]})).onOpen((()=>{C8.send({data:"ping",success(){S8.forEach((e=>{N8(e)}))},fail(e){}}),A8=a8,v8.emit(u8,A8),e(C8)})),C8.onMessage((e=>{if(e.data&&"pong"===e.data)return wxConsole.info("[LAN DEBUG] hand shake success");if(!(e.data.length<4||"string"==typeof e.data)){var t,i=new Uint8Array(e.data),r=i.slice(0,4),n=new Uint32Array(r)[0],a=i.slice(4,4+n);try{t=_8().LanDebugHeader.decode(a)}catch(e){return e.message,void e.stack}var o,{isString:s,method:l}=t;if(s)o=X6(i.slice(4+n));else o=i.slice(4+n).buffer;v8.emit(l,o)}})),C8.onClose((()=>{D8(o8),x8.forEach((e=>{B8(e)}))})),C8.onError((e=>{D8(s8),T8=e,I8.forEach((e=>{L8(e)}))}))}))}function D8(e){A8=e,v8.emit(u8,A8),b8="",E8=-1,w8=!1,C8=null}function R8(e,t,i="",r){if(void 0===i||"string"!=typeof i&&!i.constructor.toString().includes("ArrayBuffer"))return!1;var n=!1;return y8?("string"==typeof i&&(n=!0,i=function(e){for(var t,i=[],r=e.length,n=0;n<r;n++)(t=e.charCodeAt(n))>=65536&&t<=1114111?(i.push(t>>18&7|240),i.push(t>>12&63|128),i.push(t>>6&63|128),i.push(63&t|128)):t>=2048&&t<=65535?(i.push(t>>12&15|224),i.push(t>>6&63|128),i.push(63&t|128)):t>=128&&t<=2047?(i.push(t>>6&31|192),i.push(63&t|128)):i.push(255&t);for(var a=new Int8Array(i.length),o=0;o<i.length;o++)a[o]=i[o];return a.buffer}(i)),y8.then((a=>new Promise((o=>{if(!a)return o({errMsg:"sendSocketMessage:fail no client"});var s=_8().LanDebugHeader.encode(Object.assign({version:2,method:t,id:e,isString:n,clientId:m8,options:JSON.stringify({isDevEdition:k.isDevEdition})},r?{notEnd:!0}:{})),l=new Uint32Array([s.length]);a.send({data:new Uint8Array([...new Uint8Array(l.buffer),...new Uint8Array(s.buffer),...new Uint8Array(i)]).buffer,success(e){o(e)},fail(e){o(e)}})}))))):Promise.resolve({errMsg:"sendSocketMessage:failed"})}var O8=function(e,t){return R8(p8++,e,t)},k8=function(e){var t=p8++;return{send:i=>R8(t,e,i,!0),end:(i=new ArrayBuffer(0))=>R8(t,e,i)}},M8=function(e,t){v8.on(e,t)},N8=function(e){try{e()}catch(e){e.message,e.stack}},L8=function(e){try{e(T8)}catch(e){e.message,e.stack}},B8=function(e){try{e(T8)}catch(e){e.message,e.stack}},F8={sendPackage:O8,sendStream:k8,onMessage:M8,offMessage:function(e,t){v8.off(e,t)},onReady:function(e){"function"==typeof e&&(A8===a8?N8(e):S8.push(e))},onError:function(e){"function"==typeof e&&(A8===s8?L8(e):I8.push(e))},onClose:function(e){"function"==typeof e&&(A8===s8?B8(e):x8.push(e))},get status(){return A8},get ip(){return b8},get port(){return E8},get useStaticServer(){return w8}};Object.defineProperty(F8,"_start",{get:()=>(...e)=>P8(...e)});var U8,W8;T_((()=>{(e=>{setTimeout((()=>{var{ip:t,port:i,token:r,useStaticServer:n,useLanDebug:a}=(e.debugLaunchInfo||{}).lanDebugInfo||{};if((e.isDevEdition||a)&&(e.debugLaunchInfo,e.isDevEdition,t&&i&&r))return P8({ip:t,port:i,token:r,useStaticServer:n})}),500)})(k)}));var G8=!1,V8={},j8=JSON.parse,H8="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",z8="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function Y8(){if("string"==typeof k.opConfig){var e;try{e=j8(k.opConfig)}catch(e){}return e&&e.expt_info}return k.opConfig&&k.opConfig.expt_info}function $8(){var e,t=Y8();return t&&G8?(e=1,U8=t,Reporter.reportIDKey({key:"useLaunchExptInfo"})):t?(e=2,U8=t,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(e=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:U8,jsDataType:e}}function q8(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof H8&&(H8=H8.replace(" ","")),"string"==typeof z8&&(z8=z8.replace(" ","-")),Ee("onAppEnterForeground",(e=>{Object.assign(V8,e),W8=V8.sessionid||V8.sessionId})),Fi((e=>{Y8()&&(G8=!0)})),k.onReady((()=>{Object.assign(V8,k.appLaunchInfo);var e=Y8();e?U8=e:k.appContactInfo&&k.appContactInfo.passThroughInfo&&(U8=k.appContactInfo.passThroughInfo.expt_info)}));var Q8=Li("getExptInfo","webapi_wxaexpt_hit",(({keyList:e})=>({param_name_list:e})),(e=>(e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((t=>{e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,e)));var Z8=!1;ic.on("beforeTouchEnd",(()=>{Z8=!0})),ic.on("afterTouchEnd",(()=>{Z8=!1})),Xm((()=>{Z8=!1}));var K8=(e,t)=>i=>{Z8?t(i):ut(e,i,"require user interaction (only in touchend event)")},X8=K8("openChannelsLive",(function(e={}){7!==k.appType?ZG(Object.assign({},e,{jsapi:"openChannelsLive",success({nickname:t,feedId:i,nonceId:r}){Ul({title:`即将打开${t?`“${t}”`:""}视频号直播`,confirmText:"允许",cancelText:"取消",success({confirm:t}){if(t){var n=2;"release"===k.envVersion&&(n=1),"trial"===k.envVersion&&(n=3),it("openChannelsLive",Object.assign({},e,{feedId:i,nonceId:r,sceneNote:{scene:7,appid:k.accountInfo.appId,version_type:n}}),{beforeAll({errMsg:t}){rj(e.finderUserName,1,/^\w+:ok/.test(t)?1:0,t,4,e.feedId)}})}else rj(e.finderUserName,1,0,"cancel",5,e.feedId),ut("openChannelsLive",e,"cancel")}})},fail({errMsg:t,errCode:i}){rj(e.finderUserName,1,0,t,4,e.feedId),ut("openChannelsLive",e,t,i)},complete:null})):function(e={}){it("openChannelsLive",e)}(e)})),J8=K8("openChannelsActivity",(function(e={}){7!==k.appType?ZG(Object.assign({},e,{jsapi:"openChannelsActivity",success({nickname:t,nonceId:i}){Ul({title:`即将打开${t?`“${t}”`:""}视频号视频`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?it("openChannelsActivity",Object.assign({},e,{nonceId:i}),{beforeAll({errMsg:t}){rj(e.finderUserName,3,/^\w+:ok/.test(t)?1:0,t,4,e.feedId)}}):(rj(e.finderUserName,3,0,"cancel"),ut("openChannelsActivity",e,"cancel",5,e.feedId))}})},fail({errMsg:t,errCode:i}){rj(e.finderUserName,3,0,t,4,e.feedId),ut("openChannelsActivity",e,t,i)},complete:null})):function(e={}){it("openChannelsActivity",e)}(e)})),e7=K8("openChannelsUserProfile",(function(e={}){7!==k.appType?ZG(Object.assign({},e,{jsapi:"openChannelsUserProfile",success({nickname:t}){Ul({title:`即将打开${t?`“${t}”`:""}视频号`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?it("openChannelsUserProfile",e,{beforeAll({errMsg:t}){rj(e.finderUserName,2,/^\w+:ok/.test(t)?1:0,t,4)}}):(rj(e.finderUserName,2,0,"cancel",5),ut("openChannelsUserProfile",e,"cancel"))}})},fail({errMsg:t,errCode:i}){rj(e.finderUserName,2,0,t,4),ut("openChannelsUserProfile",e,t,i)},complete:null})):function(e={}){it("openChannelsUserProfile",e)}(e)})),t7=K8("openChannelsLiveCollection",(function(e={}){var t=2;"release"===k.envVersion&&(t=1),"trial"===k.envVersion&&(t=3),it("openChannelsLiveCollection",Object.assign({},e,{entryScene:15,requestScene:4===k.appType?5:4,pageTitle:4===k.appType?"小游戏直播":void 0,byPass:JSON.stringify({appId:k.accountInfo.appId,appType:k.appType,versionType:t,openIds:e.openIds})}),{beforeAll({errMsg:e}){rj("",5,/^\w+:ok/.test(e)?1:0,e,4)}})})),i7=K8("openChannelsEvent",(function(e={}){Promise.all([ki({sdkApiName:"getChannelsInfo",apiName:"webapi_getfinderinfo",reqData:{finder_username:e.finderUserName}}),ki({sdkApiName:"checkChannelsEvent",apiName:"webapi_checkfinderevent",reqData:{finder_username:e.finderUserName,event_id:e.eventId}})]).then((([{data:t}])=>{var i=null!=t&&t.nickname?`“${t.nickname}”`:"";Ul({title:`即将打开${i}视频号活动`,confirmText:"允许",cancelText:"取消",success({confirm:t}){t?it("openChannelsTopic",Object.assign({},e,{topicType:7,eventEncryptedTopicId:e.eventId}),{beforeAll(e){e.errMsg=e.errMsg.replace("openChannelsTopic","openChannelsEvent")}}):ut("openChannelsEvent",e,"cancel")}})})).catch((({errMsg:t,errno:i})=>{ut("openChannelsEvent",e,i||t)}))})),r7=K8("reserveChannelsLive",(function(e={}){it("reserveChannelsLive",Object.assign({},e,{wxData:{appid:k.accountInfo.appId,apptype:k.appType,notice_id:e.noticeId}}),{beforeAll({state:t,errMsg:i}){rj("",4,/^\w+:ok/.test(i)?1:0,i,2,"",e.noticeId,t)}})})),n7="navigateToUserCenter",a7=Ei(Qs),o7=null,s7=!1,l7=()=>(o7?Promise.resolve(o7):new Promise(((e,t)=>{Oi({sdkApiName:n7,apiName:"webapi_getadcardrechargeinfo",reqData:{},success(i){var r=i.data;r.rechargeUrl?e(o7=r):t(r)},fail:t})}))).then((e=>{var t=e.rechargeUrl;return a7({url:t,isNativeStyle:!0})})),u7="requestConsumeAdsSkipCard",c7=Ei(Ul),d7=!1;function h7({amount:e,subactionID:t}){Reporter.reportKeyValue({key:"MidasFriendPayment",value:["",1,10,18,t,"","","","",$i(),"","","","","","",encodeURIComponent(JSON.stringify({num:e}))].join(",")})}function p7(e){var{amount:t}=e;return h7({subactionID:1}),c7({content:`使用 ${t} 张广告跳过卡`,confirmText:"确认",cancelText:"取消"}).then((i=>{if(i.confirm)return e;throw h7({amount:t,subactionID:7}),{errMsg:"cancel"}}))}function f7({token:e,amount:t}){return ki({sdkApiName:"consume",apiName:"webapi_payadcardcostorder",reqData:{token:e}}).then((e=>{var i=e.data,{errMsg:r,errCode:n}=i;if(0===n)return h7({amount:t,subactionID:3}),Hl({icon:"none",title:`已消耗${t}张广告跳过卡`,duration:1e3}),i;throw h7({amount:t,subactionID:4}),Hl({icon:"none",title:"广告跳过卡使用失败，请重试",duration:2500}),{errMsg:r,errCode:n}})).catch((e=>{throw h7({amount:t,subactionID:4}),e}))}var g7=Li("getAdsSkipCardSharePresentQuota","webapi_getadcardsharepresentquota",(()=>({})),(e=>{delete e.clientInfo})),_7="getLatestUserKey",m7={},v7=null;var y7={getLatestUserKey:function(e){(m7.expireTime&&m7.expireTime<Date.now()?Promise.resolve(m7):v7||(v7=ki({apiName:"webapi_getuserencryptkey",reqData:{}}).then((e=>{var{encrypt_key:t,version:i,expire_in:r,iv:n}=e.data;return m7={encryptKey:t,version:i,expireTime:Date.now()+1e3*r,iv:n},v7=null,m7})).catch((e=>{throw v7=null,e})))).then((t=>(ct({name:_7,args:e,res:t}),null))).catch((t=>{ut(_7,e,t.message||t.errMsg)}))},getRandomValues:(e={})=>{st("getRandomValues",e,{length:0})&&((!Number.isInteger(e.length)||e.length<=0||e.length>1048576)&&ut("getRandomValues",e,"invalid length"),it("getRandomValues",e))}};var A7=!1;uv((e=>{var{event:t}=e;1===t?A7=!0:0===t&&(A7=!1)}));var b7=()=>({isLive:A7}),E7="getUserRecentGameLiveInfo",w7="getUserCurrentGameliveInfo",T7="getUserGameLiveDetails";aO||(aO=!0,k.onReady((()=>{bi()&&(setTimeout((()=>{var e=uO=Object.assign({},k.appLaunchInfo||{},a_()||{});yO({scene:e.scene||-1,isLaunch:!0,sessionId:e.sessionid||e.sessionId||""}),S_(yO),ev(AO)}),0),rO=ys(!0))}))),ce("onCanvasReportEventSampleConfigReceived",(e=>{var t=JSON.parse(e.keyEventSampleConfig);Array.isArray(t.sample_event_list)&&(Ml.sampleEventList=t.sample_event_list,Ml.sampleEventList.forEach((e=>{Nl.set(e,0)})),function(){var e=Ml.sampleEventList.find((e=>e.event===Rl));if(e){var t=6e3,i=6,r=0;l(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),l(e.sample_cnt)&&(i=e.sample_cnt),setTimeout((()=>{Ll(Rl),r++}),1e3);var n=setInterval((()=>{r>i?clearInterval(n):setTimeout((()=>{Ll(Rl),r++}),500)}),t)}}(),function(){var e=Ml.sampleEventList.find((e=>e.event===Ol));if(e){var t=6e3,i=6,r=0;l(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),l(e.sample_cnt)&&(i=e.sample_cnt),setTimeout((()=>{ml().forEach((e=>{Ll(Ol,e)})),r++}),1e3);var n=setInterval((()=>{r>i?clearInterval(n):setTimeout((()=>{ml().forEach((e=>{Ll(Ol,e)})),r++}),500)}),t)}}())})),ce("onStartReportCanvasData",(({event:e})=>{e===kl?ml().forEach((t=>{Ll(e,t)})):Ll(e)}));var C7=bm,S7=Cm,I7=Pm,x7=Mm,P7=Nm,D7=Lm,R7=Bm,O7=e=>{Fm=__errorTracer__.surroundThirdByTryCatch(e,"at onShareAppMessage callback function")},k7=()=>{Fm=null},M7=e=>{Ym=__errorTracer__.surroundThirdByTryCatch(e,"at onShareTimeline callback function")},N7=()=>{Ym=null},L7=()=>{ec("onLaunch"),console.warn("onLaunch 已废弃，请使用 wx.getLaunchOptionsSync()。")},B7=()=>{ec("offLaunch"),console.warn("offLaunch 已废弃")},F7=E_,U7=w_,W7=Zm,G7=Km,V7=()=>{ec("onStickyStatusChange"),console.warn("wx.onStickyStatusChange 已废弃，请勿继续使用")},j7=()=>{ec("offStickyStatusChange"),console.warn("wx.offStickyStatusChange 已废弃，请勿继续使用")},H7=e=>{gv=e},z7=()=>{gv=null},Y7=function(e){fv.on("down",e)},$7=function(e){fv.off("down",e)},q7=function(e){fv.on("up",e)},Q7=function(e){fv.off("up",e)},Z7=nm,K7=am,X7=om,J7=sm,e9=e=>rm.on("onKeyboardComplete",e),t9=e=>rm.off("onKeyboardComplete",e),i9=e=>Rm.on("Wheel",e),r9=e=>Rm.off("Wheel",e),n9=e=>{ic.on("onWindowResize",e)},a9=e=>{ic.off("onWindowResize",e)},o9=e=>{cv=__errorTracer__.surroundThirdByTryCatch(e,"at onGameLiveStateChange callback function")},s9=()=>{cv=null},{onTouchStart:l9,offTouchStart:u9,onTouchMove:c9,offTouchMove:d9,onTouchEnd:h9,offTouchEnd:p9,onTouchCancel:f9,offTouchCancel:g9}=C7,{onMouseDown:_9,offMouseDown:m9,onMouseMove:v9,offMouseMove:y9,onMouseUp:A9,offMouseUp:b9}=S7,{onPointerLockChange:E9,offPointerLockChange:w9,onPointerLockError:T9,offPointerLockError:C9}=I7,{setStorage:S9,setStorageSync:I9,getStorage:x9,getStorageSync:P9,getStorageInfo:D9,getStorageInfoSync:R9,removeStorage:O9,removeStorageSync:k9,clearStorage:M9,clearStorageSync:N9}=jo.game;Protect.hijack(!0,!1);var L9=Mo.connectSocket,B9=Mo.closeSocket,F9=Mo.sendSocketMessage,U9=Mo.onSocketOpen,W9=Mo.onSocketClose,G9=Mo.onSocketMessage,V9=Mo.onSocketError,j9=(e={})=>{var t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],i=[];if(t.includes("shareAppMessage")){Zu.showShareAppMessageMenu=!0;var r=new Promise(((t,i)=>{!0===e.withShareTicket?(Zu.withShareTicket=!0,it("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:i,beforeAll(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail(e){e.errMsg+=", with arg withShareTicket: true"}})):(Zu.withShareTicket=!1,it("showShareMenu",{success:t,fail:i}))}));i.push(r)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){Zu.showShareTimelineMenu=!0;var n=new Promise(((e,t)=>{it("showShareTimelineMenu",{success:e,fail:t})}));i.push(n)}Promise.all(i).then((()=>{ct({name:"showShareMenu",args:e})})).catch((t=>{var i=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");ut("showShareMenu",e,i,t.errCode)}))},H9=(e={})=>{Promise.all([Ku(e),Xu(e),Ju(e)]).then((t=>{"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((t=>{void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))},z9={request:Ma,downloadFile:Xa,uploadFile:io,addNativeDownloadTask:(e={})=>{B?ut("addNativeDownloadTask",e,"iOS not supported"):it("addNativeDownloadTask",e,{})},calRqt:(e={})=>{st("calRqt",e,{rqt:""})&&it("calRqt",e)},connectSocket:L9,closeSocket:B9,sendSocketMessage:F9,onSocketOpen:U9,onSocketClose:W9,onSocketMessage:G9,onSocketError:V9,getNetworkType:Vi,onNetworkStatusChange:ji,offNetworkStatusChange:Hi,onNetworkWeakChange:zi,offNetworkWeakChange:Yi,openDocument:e=>{st("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,it("openDocument",e))},setStorage:S9,setStorageSync:I9,getStorage:x9,getStorageSync:P9,getStorageInfo:D9,getStorageInfoSync:R9,removeStorage:O9,removeStorageSync:k9,clearStorage:M9,clearStorageSync:N9,authorize:(e={})=>{Ec({args:e})},checkSession:e=>{uc&&clearTimeout(uc),it("refreshSession",e,{beforeSuccess:e=>{uc=setTimeout((()=>{it("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:e=>{e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},getUserInfo:(e={})=>{var t=wx&&wx.version&&wx.version.version||"",i=!0===Ai("getUserInfo")||"unknown"===Ai("getUserInfo"),{success:r,fail:n}=dt(e,"getUserInfo");Oi({sdkApiName:"getUserInfo",apiName:"webapi_getuserinfo",reqData:{lang:e.lang||"en",version:t},withCredentials:"boolean"!=typeof e.withCredentials||e.withCredentials,showConfirm:i,success:e=>{var{cloudID:t,encryptedData:i,iv:n,signature:a,data:o}=e;r({cloudID:t,encryptedData:i,iv:n,signature:a,userInfo:o,rawData:JSON.stringify(e.data)})},fail:e=>{e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny"),n(e)}})},getUserProfile:(e={})=>{if(st("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)ut("getUserProfile",e,"desc length does not meet the requirements");else{var i=k.accountInfo.nickname,r=k.accountInfo.icon||"https://res.wx.qq.com/op_res/yytAZD8UVkSQiY3p1COF23jOcEEUXzIgkoz1dEMh7AaDptVrldnHP_Vw24igHeMwpbwo-RRtTJ-_9hk9BBDqHQ";((e={})=>{Li("getUserAvatarInfo","webapi_getuseravatarpopupinfo")(e)})({success(t){if(t&&t.avatar_info){var n="number"==typeof e.showType?e.showType:t.show_type,a=t.avatar_info.is_ban_modify_avatar,o=t.avatar_info.default_headimg_url,s=t.avatar_info.default_headimg_fileid,l=t.avatar_info.default_avatar_id,u=(t.avatar_info.avatar_list||[]).map((e=>({id:e.id,avatar:e.avatarurl,nickname:e.nickname,desc:e.desc||""}))),c=t.avatar_info.avatar_limit;if(0!==n){if(1===n){c+=1;var d={id:-100,avatar:o,nickname:"微信用户",desc:"临时头像昵称"};u.splice(1,0,d)}var h=JSON.stringify({appName:i,appIcon:r,infoList:u,showType:n,selected:l,limit:c,isBanModifyAvatar:a}),p=zs((e=>{[Ls.BottomBackButton,Ls.NavigationBackInterceptionType,Ls.NavigateBackCall].includes(e.type)&&Pc&&Pc.handleCancel()}));__sclEngine__.initScl((t=>{(Pc=t.mainRoot.append("user-profile",{input:h})).addListener("confirm",(t=>{Ys(p),xc({avatar_id:t.detail.selected,opt:1,lang:e.lang||"en",success(t){ct({name:"getUserProfile",args:e,res:t})},fail(){ut("getUserProfile",e,"confirmAvatarInfo fail")},complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),Pc=null})),Pc.addListener("cancel",(()=>{Ys(p),ut("getUserProfile",e,"cancel"),xc({avatar_id:-100,opt:2,lang:e.lang||"en",complete(e){console.log("[user-profile] confirmAvatarInfo: ",e)}}),Pc=null})),Pc.addListener("create",(()=>{((e={})=>{it("createVestUser",e,{beforeSuccess(e){e.userInfo&&(e.userInfo.avatar=e.userInfo.headImg,e.userInfo.desc=e.userInfo.desc||"",delete e.userInfo.headImg)}})})({sessionId:Math.floor(Date.now()/1e3),defaultAvatarUrl:o,defaultAvatarFileId:s,complete(e){e.userInfo&&(u.push(e.userInfo),console.log("[user-profile] createVestUser: ",e,u),Pc.setData({infoList:u})),Pc.setData({hide:!1})}})}))}))}else Ic(e)}else ut("getUserProfile",e,"getUserAvatarInfo fail")},fail(){ut("getUserProfile",e,"getUserAvatarInfo fail")}})}}},login:e=>{it("login",Rt(e,{requestInQueue:!1}))},openSetting:(e={})=>{var t=oi().apiCategory;if(["nativeFunctionalized"].includes(t))return ut("openSetting",e,`not supported in ${t} apiCategory.`),void Hl({icon:"none",title:"暂不支持当前功能"});Mc(e)},getSetting:kc,sendGroupMessage:(e={})=>{ec("sendGroupMessage"),ut("sendGroupMessage",e,"sendGroupMessage 接口已废弃")},reportGroupShare:function(e){Oi({apiName:"webapi_reportgroupshare",reqData:e})},operateWXData:Lc,getWeRunData:(e={})=>{it("openWeRunSetting",{checkSupport:!0,success(){var{success:t,fail:i}=dt(e);Oi({apiName:"webapi_getwerunstep_history",sdkApiName:"getWeRunData",reqData:{},success:t,fail:i})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},uploadWeRunData:(e={})=>{"number"!=typeof e.step||e.step<0?ut("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):it("openWeRunSetting",{checkSupport:!1,success(){it("uploadWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},addWeRunData:(e={})=>{"number"!=typeof e.step||e.step<0?ut("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):it("openWeRunSetting",{checkSupport:!1,success(){it("addWeRunData",e,{})},fail(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},getGroupMsgTicket:e=>{var t=qt.get(e.shareTicket);t&&t.shareKey?Kg(Object.assign({},e,{shareKey:t.shareKey})):ut("getGroupMsgTicket",e,"invalid shareTicket")},removeUserCloudStorage:ek,setUserCloudStorage:XO,openCustomerServiceConversation:(e={})=>{s4?(Ll(xl),Ul({content:`即将进入“${o4.nickname}”客服会话`,confirmText:"确认",cancelText:"取消",success(t){t.confirm?it("enterContact",e,{}):ut("openCustomerServiceConversation",e,"cancel")},fail(){ut("openCustomerServiceConversation",e,"showModal fail")}})):ut("openCustomerServiceConversation",e,"require user interaction")},sendRedPacket:(e={})=>{it("sendRedPacket",e,{})},openRedPacket:(e={})=>{it("openRedPacket",e,{})},sendBizRedPacket:(e={})=>{if(Kt("sendBizRedPacketForOpen")){var t=ai().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){var i=`sendBizRedPacket:fail scene ${t} not support.`;return e.fail&&e.fail({errMsg:i}),void(e.complete&&e.complete({errMsg:i}))}}it("sendBizRedPacket",e,{})},showRedPackage:(e={})=>{var{url:t}=e;if(st("showRedPackage",e,{url:""}))if(0===t.indexOf("https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket"))if(Kt("showRedPackage")){var i=Object.assign({},e,{url:t,isNativeStyle:!0});it("private_openUrl",i,{beforeAll(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})}else ut("showRedPackage",e,"no permission");else ut("showRedPackage",e,"url is invalid")},reportAnalytics:(e,t)=>{var i="undefined"!=typeof __appServiceEngine__&&void 0!==__appServiceEngine__.getCurrentPagesByDomain&&__appServiceEngine__.getCurrentPagesByDomain(""),r=i&&i.pop&&i.pop(),n={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:r&&r.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:wx&&wx.version&&wx.version.version||0};N||(console.info("[自定义分析] 上报成功"),console.info(n)),it("reportRealtimeAction",{actionData:JSON.stringify(n)})},reportMonitor:(e,t)=>{if(e)if(void 0===t&&(t=1),"number"==typeof t){var i=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});it("reportRealtimeAction",{actionData:i})}else console.error("wx.reportMonitor: 'value' argument must be a Number.");else console.error("wx.reportMonitor: require 'name' argument.")},requestSubscribeMessage:e=>{iv()?q4(e):ut("requestSubscribeMessage",e,"require user interaction (only in touchend event)")},requestSubscribeSystemMessage:function(e={}){Z4?ut(Q4,e,"please invoke after last subscription ended"):(Z4=!0,rv().then((()=>K4(e))).then(X4).then(J4).then(e5).then((t=>{ct({name:Q4,args:e,res:t}),Z4=!1})).catch((t=>{ut(Q4,e,t.errMsg||t.message,t.errCode||t.err_code),Z4=!1})))},requestSubscribeWhatsNew:function(e={}){a5?ut(n5,e,"please invoke after last subscription ended"):(a5=!0,rv().then((()=>function(e={}){return new Promise(((t,i)=>{r5({action:1}),Kt("requestSubscribeWhatsNew")?i5({msgType:e.msgType,success(e){1===e.status?t():i({errCode:e.status})},fail(e){i(e)}}):i({errCode:4})}))}(e))).then(o5).then((t=>t.confirm?function(e={}){return new Promise(((t,i)=>{Oi({apiName:"webapi_game_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success(e){var r=e.data,{errcode:n}=r;0===n?t({confirm:!0}):i({errCode:n})},fail(e){i({errCode:e.errcode||e.errCode,errMsg:e.errMsg})}})}))}(e):t)).then((t=>{ct({name:n5,args:e,res:t}),a5=!1})).catch((t=>{ut(n5,e,t.errMsg||t.message,+(t.errCode||t.err_code)),a5=!1})))},getWhatsNewSubscriptionsSetting:i5,getUserGameLabel:Bc,reportUserBehaviorBranchAnalytics:function(e={}){"string"!=typeof e.branchId?ut("reportUserBehaviorBranchAnalytics",e,"branchId must be a string"):e.branchDim&&"string"!=typeof e.branchDim?ut("reportUserBehaviorBranchAnalytics",e,"branchDim is an optional string"):1!==e.eventType&&2!==e.eventType?ut("reportUserBehaviorBranchAnalytics",e,"eventType must be 1 or 2"):(Fc(e),Wc({branchId:e.branchId,branchDim:e.branchDim,reportType:e.eventType}))},publishWeChatState:(e={})=>{var{scene:t}=ai();[1011,1025,1047,1124].indexOf(t)<0&&console.log(`enter scene must be one of [1011, 1025, 1047, 1124], current is ${t}`);var i=Object.assign({},e);if("string"==typeof i.url){var r=td("publishWeChatState",i,!1);if(!r)return;i.url=r,i.url=function(e){if("string"==typeof e){var t=e.split("?"),i=t[0],r=(t[1]||"").split("&").reduce(((e,t)=>{if("string"==typeof t&&t.length>0){var i=t.split("="),r=i[0],n=i[1];e[r]=n}return e}),{}),n=[];for(var a in r)bt(r,a)&&n.push(`${a}=${encodeURIComponent(r[a])}`);return n.length>0?`${i}?${n.join("&")}`:e}return e}(i.url)}it("publishWeChatState",i)},addCard:Y4,openCard:$4,saveFile:nn,getFileInfo:un,getSavedFileList:on,getSavedFileInfo:sn,removeSavedFile:ln,readFile(e){ec("readFile"),console.warn("wx.readFile 即将废弃，请使用 wx.getFileSystemManager().readFile"),cn(e)},writeFile(e){ec("writeFile"),console.warn("wx.writeFile 即将废弃，请使用 wx.getFileSystemManager().writeFile"),hn(e)},access(e){ec("access"),console.warn("wx.access 即将废弃，请使用 wx.getFileSystemManager().access"),An(e)},unlink(e){ec("unlink"),console.warn("wx.unlink 即将废弃，请使用 wx.getFileSystemManager().unlink"),En(e)},stat(e){ec("stat"),console.warn("wx.stat 即将废弃，请使用 wx.getFileSystemManager().stat"),Tn(e)},mkdir(e){ec("mkdir"),console.warn("wx.mkdir 即将废弃，请使用 wx.getFileSystemManager().mkdir"),fn(e)},readdir(e){ec("readdir"),console.warn("wx.readdir 即将废弃，请使用 wx.getFileSystemManager().readdir"),vn(e)},rmdir(e){ec("rmdir"),console.warn("wx.rmdir 即将废弃，请使用 wx.getFileSystemManager().rmdir"),_n(e)},getFileSystemManager:()=>en.game,saveFileToDisk:(e={})=>{it("saveFileToDisk",e,{})},startAccelerometer:(e={})=>{var t={fast:0,game:20,ui:60,normal:200},i=Rt(e,{interval:void 0!==t[e.interval]?t[e.interval]:t.normal,enable:!0});it("enableAccelerometer",i,{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),id=!0},stopAccelerometer:(e={})=>{it("enableAccelerometer",Rt(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),id=!1},onAccelerometerChange:e=>{id||(it("enableAccelerometer",{enable:!0}),id=!0),nd(e)},offAccelerometerChange:ad,scanCode:(e={})=>{st("scanCode",e,{})&&it("scanCode",e,{beforeSuccess(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},startCompass:(e={})=>{it("enableCompass",Rt(e,{enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),od=!0},stopCompass:(e={})=>{it("enableCompass",Rt(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),od=!1},onCompassChange:e=>{od||(it("enableCompass",{enable:!0}),od=!0),ld(e)},offCompassChange:ud,startDeviceMotionListening:(e={})=>{var t={fast:0,game:20,ui:60,normal:200},i=t[e.interval]||t.normal;it("enableDeviceMotionChangeListening",Rt(e,{interval:i,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},stopDeviceMotionListening:(e={})=>{it("enableDeviceMotionChangeListening",Rt(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},onDeviceMotionChange:Zd,offDeviceMotionChange:Kd,startGyroscope:(e={})=>{var t={fast:0,game:20,ui:60,normal:200},i=t[e.interval]||t.normal;it("enableGyroscope",Rt(e,{interval:i,enable:!0}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},stopGyroscope:(e={})=>{it("enableGyroscope",Rt(e,{enable:!1}),{beforeAll:e=>{e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},onGyroscopeChange:$d,offGyroscopeChange:qd,setScreenBrightness:(e={})=>{it("setScreenBrightness",e,{})},getScreenBrightness:(e={})=>{it("getScreenBrightness",e,{})},setKeepScreenOn:(e={})=>{st("setKeepScreenOn",e,{keepScreenOn:!0})&&it("setKeepScreenOn",e,{})},captureScreen:(e={})=>{it("captureScreen",e,{})},vibrateShort:(e={})=>{var t=Object.assign({},e);t.style=t.type,it("vibrateShort",t,{})},vibrateLong:(e={})=>{it("vibrateLong",e,{})},getClipboardData:(e={})=>{it("getClipboardData",cd("getClipboardData",e),{beforeSuccess(e){if(e.data&&7!==k.appType){var{system:t,accountInfo:i}=k;if(k.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){var r=i?i.nickname:"小程序";Hl({icon:"none",title:`“${r}”读取了你的剪切板内容`})}}}})},setClipboardData:(e={})=>{if(st("setClipboardData",e,{data:""})){var t=cd("setClipboardData",e);it("setClipboardData",t,{beforeSuccess(){ot("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1})}})}},makeBluetoothPair:(e={})=>{if(st("makeBluetoothPair",e,{deviceId:""})){var t=Object.assign({},e);v(e.pin||null)&&(t.pin=Ut(e.pin)),it("makeBluetoothPair",t)}},isBluetoothDevicePaired:(e={})=>{st("isBluetoothDevicePaired",e,{deviceId:""})&&it("isBluetoothDevicePaired",e)},openBluetoothAdapter:(e={})=>{it("openBluetoothAdapter",e,{})},closeBluetoothAdapter:(e={})=>{it("closeBluetoothAdapter",e,{})},getBluetoothAdapterState:(e={})=>{it("getBluetoothAdapterState",e,{})},onBluetoothAdapterStateChange:e=>{gd.removeAllListeners("onBluetoothAdapterStateChange"),gd.on("onBluetoothAdapterStateChange",(t=>{__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function")(t)}))},offBluetoothAdapterStateChange:()=>{gd.removeAllListeners("onBluetoothAdapterStateChange")},startBluetoothDevicesDiscovery:(e={})=>{if(e.services){if(!Array.isArray(e.services))return void ut("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((e=>"string"==typeof e&&t.test(e))))return void ut("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((e=>(L&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e)))}}it("startBluetoothDevicesDiscovery",e,{})},stopBluetoothDevicesDiscovery:(e={})=>{it("stopBluetoothDevicesDiscovery",e,{})},getBluetoothDevices:(e={})=>{it("getBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((e=>{if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Wt(e.advertisData)),e.serviceData){var t=e.serviceData;Object.keys(t).forEach((e=>{t[e]&&(t[e]=Wt(t[e]))}))}return e}))}})},getConnectedBluetoothDevices:(e={})=>{if(e.services){if(!Array.isArray(e.services))return void ut("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.services.some((e=>"string"==typeof e&&t.test(e))))return void ut("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((e=>(L&&(e=e.toUpperCase()),4===e.length?`0000${e}-0000-1000-8000-00805F9B34FB`:8===e.length?`${e}-0000-1000-8000-00805F9B34FB`:e)))}}it("getConnectedBluetoothDevices",e,{beforeSuccess(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((e=>(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Wt(e.advertisData)),e)))}})},createBLEConnection:(e={})=>{st("createBLEConnection",e,{deviceId:""})&&it("createBLEConnection",e,{})},closeBLEConnection:(e={})=>{st("closeBLEConnection",e,{deviceId:""})&&it("closeBLEConnection",e,{})},getBLEDeviceServices:(e={})=>{st("getBLEDeviceServices",e,{deviceId:""})&&it("getBLEDeviceServices",e,{beforeSuccess(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},getBLEDeviceRSSI:(e={})=>{st("getBLEDeviceRSSI",e,{deviceId:""})&&it("getBLEDeviceRSSI",e)},setBLEMTU:(e={})=>{L?st("setBLEMTU",e,{deviceId:"",mtu:0})&&it("setBLEMTU",e,{}):ut("setBLEMTU",e,"can only be invoked on android")},getBLEMTU:(e={})=>{if(st("getBLEMTU",e,{deviceId:""}))if(L){var t=md[e.deviceId];Xe({mtu:t?t.mtu:23},"getBLEMTU",e,{})}else{if(e.writeType&&"write"!==e.writeType&&"writeNoResponse"!==e.writeType)throw new Error('writeType only accept "write" or "writeNoResponse"');it("getBLEMTU",e,{})}},getBLEDeviceCharacteristics:(e={})=>{st("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&it("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:L?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},createBLEPeripheralServer:(e={})=>{it("createBLEPeripheralServer",e,{beforeSuccess(e){var t=e.serverId,i=new Dd(t);delete e.serverId,e.server=i}})},onBLEPeripheralConnectionStateChanged:Od,offBLEPeripheralConnectionStateChanged:kd,notifyBLECharacteristicValueChanged:(e={})=>{st("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&it("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:L?e.serviceId.toUpperCase():e.serviceId,characteristicId:L?e.characteristicId.toUpperCase():e.characteristicId}),{})},notifyBLECharacteristicValueChange:(e={})=>{st("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&it("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:L?e.serviceId.toUpperCase():e.serviceId,characteristicId:L?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},readBLECharacteristicValue:(e={})=>{st("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&it("readBLECharacteristicValue",Object.assign({},e,{serviceId:L?e.serviceId.toUpperCase():e.serviceId,characteristicId:L?e.characteristicId.toUpperCase():e.characteristicId}),{})},writeBLECharacteristicValue:(e={})=>{st("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&it("writeBLECharacteristicValue",Object.assign({},e,{value:Ut(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:L?e.characteristicId.toUpperCase():e.characteristicId}),{})},onBluetoothDeviceFound:e=>{ce("onBluetoothDeviceFound",((t={})=>{var i=[];Array.isArray(t.devices)?i=t.devices:i.push(t),i=i.map((e=>{try{e.advertisData=Wt(e.advertisData)}catch(e){}try{var t=e.serviceData||{};Object.keys(t).forEach((e=>{t[e]&&(t[e]=Wt(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:i})}))},offBluetoothDeviceFound:()=>{ce("onBluetoothDeviceFound",(()=>{}))},onBLEMTUChange:e=>{_d.removeAllListeners("onBLEMTUChange"),_d.on("onBLEMTUChange",(t=>{__errorTracer__.surroundThirdByTryCatch(e,"at onBLEMTUChange callback function")(t)}))},offBLEMTUChange:()=>{_d.removeAllListeners("onBLEMTUChange")},onBLEConnectionStateChanged:e=>{ce("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},onBLEConnectionStateChange:e=>{fd.removeAllListeners("onBLEConnectionStateChanged"),fd.on("onBLEConnectionStateChanged",(t=>{__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function")(t)}))},onBLECharacteristicValueChange:e=>{ce("onBLECharacteristicValueChange",((t={})=>{"string"==typeof t.value&&(t.value=Wt(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},offBLEConnectionStateChanged:()=>{ce("onBLEConnectionStateChanged",(()=>{}))},offBLEConnectionStateChange:()=>{fd.removeAllListeners("onBLEConnectionStateChanged")},offBLECharacteristicValueChange:()=>{ce("onBLECharacteristicValueChange",(()=>{}))},startBeaconDiscovery:(e={})=>{if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);if(!e.uuids.some((e=>"string"==typeof e&&t.test(e))))return void ut("startBeaconDiscovery",e,"invalid service uuid")}it("startBeaconDiscovery",e)}else ut("startBeaconDiscovery",e,"uuid must be an Array");else ut("startBeaconDiscovery",e,"must have uuid")},stopBeaconDiscovery:(e={})=>{it("stopBeaconDiscovery",e)},getBeacons:(e={})=>{it("getBeacons",e)},onBeaconUpdate:e=>{st("onBeaconUpdate",e,ne)&&ce("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},offBeaconUpdate:()=>{ce("onBeaconUpdated",(()=>{}))},onBeaconServiceChange:e=>{st("onBeaconServiceChange",e,ne)&&ce("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},offBeaconServiceChange:()=>{ce("onBeaconServiceChanged",(()=>{}))},getLocation:(e={})=>{"gcj02"!==e.type&&(e.type="wgs84");var t=Date.now(),i=Cp[e.type],r=Tp[e.type];t-r>=1e4||!i?((e={},t={})=>{it("getLocation",e,Object.assign({beforeSuccess(t){e.altitude||delete t.altitude}},t))})(e,{afterSuccess(i){Tp[e.type]=t,Cp[e.type]=i}}):wp?ut("getLocation",e,"频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化"):ct({name:"getLocation",success:i.errMsg&&0===i.errMsg.indexOf("getLocation:ok"),args:e,errMsg:i.errMsg,res:i})},createInnerAudioContext:Ep,getAvailableAudioSources:e=>{it("getAvailableAudioSources",e)},setInnerAudioOption:e=>{it("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},createVideoDecoder:function(){return new zp},createMediaAudioPlayer:()=>O.Z.MediaToolKit&&O.Z.MediaToolKit.audioCreate?new Np:new Op,createWebAudioContext:()=>{var{system:e}=os();L&&-1===zt(e,"6.0.0")&&console.error("Error: WebAudio don't support android system under 6!");var t=new oh;O.Z&&O.Z.WXAUDIO&&t&&"function"==typeof t.create&&t.create();var i=[];return["close","resume","suspend"].forEach((e=>{var r=t[e];Object.defineProperty(t,e,{configurable:!1,get:()=>function(){return r.call(t),new Promise((e=>{i.push(e);var n=t.onstatechange;t.onstatechange=()=>{"function"==typeof n&&n();var e=i.pop();e&&e(),t.onstatechange=n},r.call(t)}))}.bind(t)})})),t},getRecorderManager:()=>Pp,chooseImage:function(e={}){nt(ti(this))("chooseImage",Rt({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((e=>e)).map(((t,i)=>({path:t,size:e.tempFileSizes[i]}))):e.tempFiles=(e.tempFiles||[]).filter((e=>e.path&&"number"==typeof e.size)),delete e.tempFileSizes}})},previewImage:(e={})=>{if(st("previewImage",e,{urls:[""]})){var t=k.version,i=k.system,r="7.0.12"===t&&i.indexOf("iOS 13.4")>=0;for(var n of e.urls)if(/^\s*data:image\//.test(n)&&r)return void ut("previewImage",e,"url can not be base64 on iOS 13.4");var a=Object.assign({},e);a.urls=a.urls.slice(),a.referrerPolicy=a.referrerPolicy||"origin",ac(a.urls,"image",(e=>{var t=a.urls;if(a.urls=[...e.data.map((e=>e.url))],a.current){var i=t.indexOf(a.current);i>=0&&(a.current=a.urls[i])}a.urls&&(a.urls=a.urls.map((e=>rc.get(e)||e))),it("previewImage",a)}))}},previewMedia:function(e={}){if(st("previewMedia",e,{sources:[]}))if(e.sources.length>50)ut("previewMedia",e,"maximum length of sources is 50");else{var t=ti(this),i=e=>"string"!=typeof t||"/"!==e[0]?e:St(`plugin-private://${t}${e}`),r=JSON.parse(JSON.stringify(e.sources)),n=[],a=[];r.forEach(((e,t)=>{e.type=e.type||"image",e.index=t,e.url=e.url?rc.get(e.url)||e.url:"","image"===e.type?n.push(e):"video"===e.type&&a.push(e)}));var o=n.map((e=>e.url||"")).map((e=>i(e))),s=a.map((e=>e.url||"")).map((e=>i(e)));ac(o,"image",(t=>{var i=t.data.map((e=>e.url));ac(s,"video",(t=>{var o=t.data.map((e=>e.url));i.forEach(((e,t)=>{var i=n[t].index;r[i].url=e})),o.forEach(((e,t)=>{var i=a[t].index;r[i].url=e}));var s=Object.assign({current:0},e,{sources:r});it("previewMedia",s)}))}))}},saveImageToPhotosAlbum:(e={})=>{e.filePath=rc.get(e.filePath)||e.filePath,it("saveImageToPhotosAlbum",e,{})},joinVoIPChat:function(e){if(st("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""})){var t="video"===e.roomType?1:2,i=Object.assign({},e,{muteConfig:b4(e.muteConfig),handsFree:!u(e.handsFree)||e.handsFree,roomType:t}),r=ti(this);i.privateData=JSON.stringify({pluginId:r}),nt(r)("joinVoIPChat",i,{beforeSuccess(e){e.errCode=0},beforeFail(e){void 0===e.errCode&&(e.errCode=(e=>{var t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;var i=parseInt(t[1],10),r=parseInt(t[2],10);if(-10086!==i&&-10087!==i)return-1e3;switch(r){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}})(e.errMsg))}})}},exitVoIPChat:function(e){try{var t=ti(this);nt(t)("exitVoIPChat",Object.assign({},e,{success(t){var i=t.errMsg||"ok";ct({name:"exitVoIPChat",args:e,errMsg:i,errCode:0,res:t})},fail(t){var i=t.errCode||-1,r=t.errMsg||"unknown error";ct({name:"exitVoIPChat",args:e,success:!1,errMsg:r,errCode:i,res:t})},complete(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:`exitVoIPChat:fail ${t.message}`}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:`exitVoIPChat:complete ${t.message}`})}},updateVoIPChatMuteConfig:function(e){if(st("updateVoIPChatMuteConfig",e,{muteConfig:{}})){var t=ti(this);nt(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:b4(e.muteConfig),handsFree:!u(e.handsFree)||e.handsFree}))}},onVoIPChatMembersChanged:w4,onVoIPChatSpeakersChanged:e=>{try{ce("onVoIPChatSpeakersChanged",(t=>{t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},onVoIPChatInterrupted:I4,offVoIPChatMembersChanged:T4,offVoIPChatSpeakersChanged:()=>{ce("onVoIPChatSpeakersChanged",(()=>{}))},offVoIPChatInterrupted:x4,subscribeVoIPVideoMembers:(e={})=>{st("subscribeVoIPVideoMembers",e,{openIdList:[]})&&it("subscribeVoIPMembers",e,{beforeAll(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},onVoIPVideoMembersChanged:D4,offVoIPVideoMembersChanged:R4,onVoIPChatStateChanged:k4,offVoIPChatStateChanged:M4,createCanvas:()=>ox?rx({secure:GI()}):(ox=!0,QI),createOffScreenCanvas:lx,createImage:Tv,onTouchStart:l9,offTouchStart:u9,onTouchMove:c9,offTouchMove:d9,onTouchEnd:h9,offTouchEnd:p9,onTouchCancel:f9,offTouchCancel:g9,onWheel:i9,offWheel:r9,onMouseDown:_9,offMouseDown:m9,onMouseMove:v9,offMouseMove:y9,onMouseUp:A9,offMouseUp:b9,onKeyDown:Y7,offKeyDown:$7,onKeyUp:q7,offKeyUp:Q7,onPointerLockChange:E9,offPointerLockChange:w9,onPointerLockError:T9,offPointerLockError:C9,onKeyboardInput:Z7,offKeyboardInput:K7,onKeyboardConfirm:X7,offKeyboardConfirm:J7,onKeyboardComplete:e9,offKeyboardComplete:t9,onWindowResize:n9,offWindowResize:a9,onGameLiveStateChange:o9,offGameLiveStateChange:s9,startGameLive:(e={})=>{av?ut(nv,e,"please invoke after last invoke ended"):(av=!0,rv().then((()=>new Promise(((e,t)=>{it("getGameLivePermission",{success(i){1===i.status&&Kt("startGameLiveDirectly")?e():t({errMsg:"not support",errCode:i.errCode})},fail:t})})))).then((()=>((e={})=>{var t=ov(e);return new Promise(((e,i)=>{it("startGameLive",{path:t,reportInfo:JSON.stringify({scene:5}),success:e,fail:i})}))})(e))).then((t=>(ct({name:nv,args:e,res:t}),av=!1,sv({actionStatus:1}),null))).catch((t=>{sv({actionStatus:0,errType:t.errCode}),ut(nv,e,t.errMsg||t.message,t.errCode||t.err_code),av=!1})))},checkGameLiveEnabled:function(e={}){it("getGameLivePermission",Object.assign({},e),{beforeSuccess(e){e.isEnabled=1!==e.errCode,delete e.status,delete e.errCode},beforeAll(e){e.errMsg=e.errMsg.replace("getGameLivePermission","checkGameLiveEnabled")}})},getGameLiveState:b7,getUserRecentGameLiveInfo:(e={})=>{var{success:t,fail:i,failWithMsg:r}=dt(e,E7);Kt(E7)?Oi({sdkApiName:E7,apiName:"webapi_getuserrecentgameliveinfolist",reqData:{},success(e){var{feedIdList:i,errCode:n,errMsg:a}=e.data;Number.isInteger(n)&&0!==n?r({msg:a,code:n}):t({feedIdList:i||[]})},fail:i}):r({msg:"no permission"})},getUserCurrentGameliveInfo:(e={})=>{var{success:t,fail:i,failWithMsg:r}=dt(e,w7);b7().isLive?Kt("getUserRecentGameLiveInfo")?Oi({sdkApiName:w7,apiName:"webapi_getusercurrentgameliveinfo",reqData:{},success(e){var{errCode:i,errMsg:n,feedId:a}=e.data;Number.isInteger(i)&&0!==i?r({msg:n,code:i}):t({feedId:a})},fail:i}):r({msg:"no permission"}):r({msg:"no live"})},getUserGameLiveDetails:(e={})=>{var{success:t,fail:i,failWithMsg:r}=dt(e,T7);Kt("getUserRecentGameLiveInfo")?Oi({sdkApiName:T7,apiName:"webapi_getusergamelivedetailinfo",reqData:{feedIdList:Array.isArray(e.feedIdList)?e.feedIdList:[]},success(e){var{data:i,iv:n,encryptedData:a,cloudID:o}=e,{errCode:s,errMsg:l}=i;Number.isInteger(s)&&0!==s?r({msg:l,code:s}):t({iv:n,encryptedData:a,cloudID:o})},fail:i}):r({msg:"no permission"})},getShareInfo:(e={})=>{var t=qt.get(e.shareTicket),{success:i,fail:r,failWithMsg:n}=dt(e,Qu);t?Oi({sdkApiName:Qu,apiName:"webapi_getshareinfo",reqData:{share_key:t.shareKey,share_name:t.shareName},success(e){var{data:t}=e;t.roomTopic&&(e.roomTopic=t.roomTopic),delete e.data,i(e)},fail:r}):n({msg:"invalid shareTicket"})},authPrivateMessage:function(e={}){var{success:t,fail:i,failWithMsg:r}=dt(e,tc),n=qt.get(e.shareTicket);n&&n.shareKey?Kt("authShareRelationship")?Oi({sdkApiName:tc,apiName:"webapi_authmgr",reqData:{share_key:n.shareKey},success(e){var{iv:i,encrypt_activity_id:r,res:n}=e.data;t({iv:i,encryptedData:r,valid:1===n})},fail:i}):r({msg:"no permission"}):r({msg:"invalid shareTicket"})},showShareMenu(e){setTimeout(j9.bind(this,e),0)},hideShareMenu:(e={})=>{var t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],i=[];function r(){return new Promise(((e,t)=>{it("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(Zu.showShareTimelineMenu=!1,i.push(r())),t.includes("shareAppMessage")){Zu.showShareAppMessageMenu=!1,0===i.length&&i.push(r());var n=new Promise(((e,t)=>{it("hideShareMenu",{success:e,fail:t})}));i.push(n)}Promise.all(i).then((()=>{ct({name:"hideShareMenu",args:e})})).catch((t=>{var i=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");ut("hideShareMenu",e,i,t.errCode)}))},updateShareMenu(e){setTimeout(H9.bind(this,e),0)},onShareAppMessage:O7,offShareAppMessage:k7,onShareTimeline:M7,offShareTimeline:N7,shareAppMessage:Fv,showUpdatableMessageSubscribeButton:()=>{ec("showUpdatableMessageSubscribeButton"),console.warn("wx.showUpdatableMessageSubscribeButton 此接口已废弃")},setMessageToFriendQuery:function(e={}){var t=e.shareMessageToFriendScene;return"number"==typeof t&&(t>=0&&t<=50&&(Wv={shareMessageToFriendScene:t},!0))},onShareMessageToFriend:e=>{Rv.on("callback",e)},onAddToFavorites:H7,offAddToFavorites:z7,showShareImageMenu:Ac,onCopyUrl:e=>{dP=e},offCopyUrl:()=>{dP=null},setWindowSize:(e={})=>{ut("setWindowSize",e,"deprecated")},setTopBarText:(e={})=>{e.text?Date.now()-Yp<5e3?ut("setTopBarText",e,"invoke too frequently"):it("setTopBarText",e,{beforeSuccess(){Yp=Date.now()}}):ut("setTopBarText",e,"invalid text")},showToast:Hl,hideToast:zl,showLoading:$l,hideLoading:ql,showModal:Wl,showActionSheet:(e={})=>{var t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};delete(t=Nt(t,e)).cancelText,delete t.cancelColor,st("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?ut("showActionSheet",e,"parameter error: itemList should not be large than 6"):it("showActionSheet",t,{beforeAll:e=>{(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&Tu(),Fl=!0},afterAll:()=>{Fl=!1}}))},setMenuStyle:e=>{"dark"===e.style||"light"===e.style?it("setMenuStyle",e):ut("setMenuStyle",e,`invalid style "${e.style}"`)},setStatusBarStyle:e=>{st("setStatusBarStyle",e,{style:""})&&("white"===e.style||"black"===e.style?it("setStatusBarStyle",Object.assign({},e,{color:e.style})):ut("setStatusBarStyle",e,`invalid style "${e.style}"`))},getMenuButtonBoundingClientRect:$p,hideSplashScreen:e=>{it("hideSplashScreen",e)},onError:x7,offError:P7,onUnhandledRejection:D7,offUnhandledRejection:R7,onLaunch:L7,offLaunch:B7,onShow:F7,offShow:U7,onHide:W7,offHide:G7,onStickyStatusChange:V7,offStickyStatusChange:j7,onAudioInterruptionBegin:Jd,offAudioInterruptionBegin:eh,onAudioInterruptionEnd:ih,offAudioInterruptionEnd:rh,getSystemInfo:ns,getSystemInfoSync:as,getBatteryInfo:(e={})=>{setTimeout((()=>{it("getBatteryInfo",e)}),0)},getBatteryInfoSync:()=>{var e={level:100,isCharging:!0};if(it("getBatteryInfo",{complete:t=>e=t}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e},getLaunchOptionsSync:n_,getEnterOptionsSync:function(){return R_||n_()},setPreferredFramesPerSecond:e=>{"function"==typeof O.Z.setPreferredFramesPerSecond?O.Z.setPreferredFramesPerSecond(e):console.warn("当前版本暂不支持设置帧率")},loadFont:e=>"function"==typeof O.Z.loadFont?(B&&"string"==typeof e&&"/"===e[0]&&(e=e.slice(1)),O.Z.loadFont(e)):(console.warn("当前版本暂不支持此加载自定义字体"),null),setCursor:(e,t,i)=>"function"==typeof O.Z.setCursor?O.Z.setCursor(e,t,i):(console.warn("当前版本暂不支持加载自定义光标"),!1),requestPointerLock:cx,exitPointerLock:dx,isPointerLocked:hx,getTextLineHeight:({fontStyle:e="normal",fontWeight:t="normal",fontSize:i=16,fontFamily:r,text:n=""}={})=>{if(N)return xx||((xx=Sx("div")).style.opacity=0,Ix(xx)),xx.style.fontStyle=e,xx.style.fontWeight=t,xx.style.fontSize=i+"px",xx.style.fontFamily=r,xx.innerHTML=n||"ajghl~!",xx.clientHeight;var a=`${e} ${t} ${i}px ${r}`;return O.Z.getTextLineHeight(a,n)},requestMidasPayment:(e={})=>{if(Ll(Il),B)ut(lR,e,701001);else if(function(){var e,t;if(!dD)return!0;if(dD.isSoftMode)return!0;if(dD.action<=3)return!0;var i,r,{inlineCertMode:n}=null!==(e=null===(t=dD)||void 0===t?void 0:t.urlInfo)&&void 0!==e?e:{};return n?(CD({ExpID:null===(i=dD)||void 0===i||null===(r=i.urlInfo)||void 0===r?void 0:r.expId,UIArea:n===TD.INLINE_CERT_MODE_DIALOG?1507:1508,PositionID:0,ActionID:1,Status:1,ContentType:3}),HD({inlineCertMode:n,isSoftMode:!0,isPay:!0,ContentType:3}),!1):(CD({UIArea:1503,PositionID:0,ActionID:1,Status:1}),Ul({title:"提示",cancelText:"返回",content:"当前账号尚未实名，完成实名认证后才可进行充值",confirmText:dD.urlInfo.name,success({confirm:e}){var t,i,r,n;e&&wD(),e&&CD({ExpID:null===(t=dD)||void 0===t||null===(i=t.urlInfo)||void 0===i?void 0:i.expId,UIArea:1503,PositionID:1,ActionID:2,Status:1}),e||CD({ExpID:null===(r=dD)||void 0===r||null===(n=r.urlInfo)||void 0===n?void 0:n.expId,UIArea:1503,PositionID:2,ActionID:2,Status:1})}}),!1)}())if(-1!==sR.indexOf(e.mode)){e=Object.assign({zoneId:"1"},e);var{env:t,offerId:i,buyQuantity:r,zoneId:n}=e;(function({offerid:e,buy_quantity:t,zoneid:i,env:r}){return null!==iR?Promise.resolve({status:"fail"}):new Promise((n=>{G?n({status:"success"}):ki({apiName:"wxaapi_midasgetcoupons",sdkApiName:"useCoupon",reqData:{offerid:e,buy_quantity:t,zoneid:i,env:r}}).then((({data:e})=>{var t,i=e.mp_info.unicoupon_mpinfo.coupons.flatMap((e=>{var t,i;return null!==(t=null===(i=e.card_info)||void 0===i?void 0:i.map((t=>{var i,r;return null!==(i=null==t||null===(r=t.batch_info)||void 0===r?void 0:r.map((i=>K()(K()(K()({},e),t),i))))&&void 0!==i?i:[]})))&&void 0!==t?t:[]})).filter(Boolean).flat().map((t=>{var{begintime:i,endtime:r,amt:n,least_price:a,pay_amt:o}=t,s=q()(t,tR);return K()({disabled:+e.pay_ori_amt==+o,begintime:rR(i),endtime:rR(r),amt:nR(n),least_price:nR(a),pay_amt:nR(o,2)},s)})).sort(((e,t)=>e.disabled||t.disabled?e.disabled&&t.disabled?+t.amt-+e.amt:e.disabled?1:-1:+e.pay_amt-+t.pay_amt)),r={accountInfo:k.accountInfo,pay_ori_amt:nR(e.pay_ori_amt,2),amount:i.reduce(((e,{amt:t})=>e+ +t),0),selectedCoupon:0===i.length||null!==(t=i[0])&&void 0!==t&&t.disabled?{}:i[0],coupons:i,IS_ANDROID:L,IS_PC:G};__sclEngine__.initScl((e=>{iR=e.mainRoot.append("use-coupon-modal",{data:JSON.stringify(r)}),oR({SCeneID:43,UIArea:0,PositionID:0,ActionID:1}),oR({SCeneID:43,UIArea:4301,PositionID:1,ActionID:1}),iR.addListener("click",(()=>{oR({UIArea:4301,PositionID:1,ActionID:2}),oR({SCeneID:32,UIArea:0,PositionID:0,ActionID:1,Object:3}),oR({SCeneID:32,UIArea:0,PositionID:0,ActionID:1})})),iR.addListener("destroy",(({detail:e})=>{var t,i,r,a,o,s,l,u,c,d,h,p,f,g,_,m,v,y,A,b,E,w,T;if("cancel"===e.reason)return n({status:"cancel"}),void(iR=null);oR({SCeneID:43,UIAera:4302,PositionID:1,ActionID:2,ExternInfo:{pay:null!==(t=null!==(i=null===(r=iR)||void 0===r||null===(a=r.data)||void 0===a||null===(o=a.selectedCoupon)||void 0===o?void 0:o.pay_amt)&&void 0!==i?i:null===(s=iR)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.pay_ori_amt)&&void 0!==t?t:0,coupon:null!==(u=null===(c=iR)||void 0===c||null===(d=c.data)||void 0===d||null===(h=d.selectedCoupon)||void 0===h?void 0:h.amt)&&void 0!==u?u:0,coupon_use:null!==(p=iR)&&void 0!==p&&null!==(f=p.data)&&void 0!==f&&null!==(g=f.selectedCoupon)&&void 0!==g&&g.amt?1:2}}),n({status:"success",code_id:null===(_=iR)||void 0===_||null===(m=_.data)||void 0===m||null===(v=m.selectedCoupon)||void 0===v?void 0:v.code_id,batch_id:null===(y=iR)||void 0===y||null===(A=y.data)||void 0===A||null===(b=A.selectedCoupon)||void 0===b?void 0:b.batch_id,billno_while_using:null===(E=iR)||void 0===E||null===(w=E.data)||void 0===w||null===(T=w.selectedCoupon)||void 0===T?void 0:T.billno_while_using}),iR=null}))}))})).catch((()=>{n({status:"success"})}))}))})({offerid:i,env:t,buy_quantity:r,zoneid:n}).then(function(){var r=zo()((function*(r){var{status:a,batch_id:o,code_id:s,billno_while_using:l}=r;if("success"===a){var{openId:u,appId:c}=yield Jg();XP()[e.mode].destroy();var d=XP()[e.mode].init({env:t}),h=nD(e);h.openid=u,h.login_wx_appid=c||e.loginWXAppId;var p=yield tD();if(p){var f=`settlement_mark=${encodeURIComponent(p)}`;h.additional={remark:encodeURIComponent(f)}}if(h.additional,s&&o){h.sp_info=`${s},${o}`;var g=0;function _(){return m.apply(this,arguments)}function m(){return(m=zo()((function*(){yield ki({apiName:"wxaapi_midasusesoupon",sdkApiName:"requestMidasPayment",reqData:{env:t,offerid:i,batch_id:o,code_id:s,zoneid:n}}).catch((e=>{++g<=3&&_()}))}))).apply(this,arguments)}_()}var{resultCode:v,resultMsg:y,spInfo:A}=yield function(e,t){return new Promise((i=>{e.launchPay(t,(e=>{i(e)}))}))}(d,h);if(0!==v){y=y.replace("requestVirtualPayment:fail","");var b="requestVirtualPayment:fail PAY_LIMIT";if(-15009===v)Ul({title:"提示",content:y,showCancel:!1,success(){ut(lR,e,b,v)},fail(){ut(lR,e,b,v)}});else if(1===v){if(null!=A&&A.channel_orderid&&null!=A&&A.out_trade_no){var{channel_orderid:E,out_trade_no:w}=A;yield ki({apiName:"wxaapi_midascouponsrollback",sdkApiName:"requestMidasPayment",reqData:{billno_while_using:l,offerid:i,env:t,channel_orderid:E,out_trade_no:w}})}ut(lR,e,y,v)}else ut(lR,e,y,v);return}ct({name:lR,args:e})}else"cancel"===a?ut(lR,e,"用户取消支付",1):"fail"===a&&ut(lR,e,"支付中",1)}));return function(e){return r.apply(this,arguments)}}()).catch((t=>{"object"==typeof t&&JSON.stringify(t),"object"==typeof t?ut(lR,e,null==t?void 0:t.errMsg,null==t?void 0:t.errCode):ut(lR,e,t,-1)}))}else ut(lR,e,"mode错误",1e3);else ut(lR,e,701002)},requestMidasFriendPayment:function(e={}){st(cR,e,{mode:"",offerId:"",currencyType:"",buyQuantity:0,outTradeNo:"",nonceStr:"",timeStamp:0,signature:""})?($l({title:"加载中"}),function(e={}){return new Promise(((t,i)=>{-1===uR.indexOf(e.mode)?i({errCode:1e3,errMsg:"mode错误"}):t()}))}(e).then(pR).then(fR).then((()=>function(e={}){return Jg().then((({openId:t,appId:i})=>new Promise(((r,n)=>{var{mode:a,env:o,offerId:s,currencyType:l,zoneId:u,outTradeNo:c,platform:d,buyQuantity:h,nonceStr:p,timeStamp:f,signature:g}=e;XP()[a].destroy();var _=XP()[a].init({env:o,hide_loading:!0}),m=nD(e);m.openid=t,m.login_wx_appid=i||e.loginWXAppId,m.type="friends_pay_order",m.pf=d||"android",dR.info("[transedArgs]",m),_.launchFeature(m,function(){var t=zo()((function*({resultCode:t,resultMsg:i,extendInfo:d}){if(dR.info("[instance.launchFeature success]",{resultCode:t,resultMsg:i,extendInfo:d}),0===t){var _=d.token,v=d.priceLevel,y={offerId:s,currencyType:l,priceLevel:v,token:_,env:o,zoneId:u,busiOrderNo:c,mode:a,buyQuantity:h,nonceStr:p,timeStamp:f,signature:g,platform:m.pf};["session_id","session_type","login_wx_appid","change_wx_openid","extend","product_id","service_code","service_name","aid","provide_uin","goodstokenurl"].forEach((t=>{void 0!==e[iD[t]]&&(y[iD[t]]=m[t])})),y.settlementMark=yield tD(),dR.info("reqData",y),Oi({apiName:"webapi_addpayfororder",reqData:y,success(e){dR.info("[operateWXData success]",e);var t=e.data;Number.isInteger(t.errCode)&&0!==t.errCode?(dR.error("[operateWXData fail]",t),n({errCode:t.errCode,errMsg:t.errMsg}),hR({actionStatus:0,errType:5})):r(e)},fail(e){dR.error("[operateWXData fail]",e),n(e),hR({actionStatus:0,errType:4})}})}else n({errMsg:i,errCode:t}),Reporter.reportIDKey({key:"midasLaunchFeatureFail"}),hR({actionStatus:0,errType:3})}));return function(e){return t.apply(this,arguments)}}())}))))}(e))).then((e=>(ql(),function(e={}){var t=e.data;return new Promise((i=>{var r=Ai("h5PayDisableForward");it("shareAppMessageDirectly",{type:"h5",title:t.title,desc:t.desc,imageUrl:t.imageUrl,useDefaultSnapshot:!1,disableForward:r,link:t.link,success(){i({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),hR({actionStatus:1,orderNo:t.orderNo,orderNoForUrl:t.orderNoForUrl})},fail(){i({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),hR({actionStatus:0,errType:6,orderNo:t.orderNo,orderNoForUrl:t.orderNoForUrl})}})}))}(e)))).then((t=>{ct({name:cR,args:e,res:t})})).catch((t=>{ql(),dR.error("fail:",t),ut(cR,e,t.errMsg,+(t.errCode||t.err_code))}))):hR({actionStatus:0,errType:7})},checkIsSupportMidasFriendPayment:function(e={}){Promise.resolve().then(pR).then(fR).then((()=>gR(e))).catch((({errMsg:t,errCode:i,err_code:r})=>{ut("checkIsSupportMidasFriendPayment",e,t,+(i||r))}))},gameLoginReport:function(){ec("gameLoginReport"),console.warn("wx.gameLoginReport 已经废弃")},gameLogoutReport:function(){ec("gameLogoutReport"),console.warn("wx.gameLogoutReport 已经废弃")},exitMiniProgram:qp,launchApp:function(e={}){if(Kt("launchApp"))if(yx)if(Ax){var t=Object.assign({},e,{appId:Ex});bx===XA?t.extraData=e.appParameter:(t.messageExt=e.appParameter,t.extInfo=e.appParameter),bx(t)}else ut("launchApp",e,"invalid scene");else ut("launchApp",e,"not in touchEnd");else ut("launchApp",e,"no permission")},showKeyboard:(e={})=>{if(e.defaultValue&&e.maxLength){var t=parseInt(e.maxLength,10);Number.isNaN(t)||(t=Math.max(0,t),e.defaultValue=e.defaultValue.toString().slice(0,t))}it("showKeyboard",e)},hideKeyboard:(e={})=>{it("hideKeyboard",e)},updateKeyboard:(e={})=>{it("updateKeyboard",e)},getExtConfig:(e={})=>{setTimeout((()=>{var t={errMsg:"getExtConfig: ok",extConfig:U6()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},getExtConfigSync:U6,bindGroup:(e={})=>{it("bindGroup",e)},joinGroup:(e={})=>{L&&k.clientVersion<654316032||B?Oi({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success(e){var t=e.data;it("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail({errMsg:e}){Hl({title:e.replace(/^\w+:fail\s+/,""),icon:"none"})},complete(){ct({name:"joinGroup",args:e})}}):it("joinGroup",e)},getAccountInfoSync:W6,encode:eb,decode:tb,parseXML:e=>{N?it("parseXML",e):(new O.Z.XMLReader).parse(e.xml,(t=>{/ok/.test(t.errMsg)?"function"==typeof e.success&&e.success(t):"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}))},createVideo:(e={})=>{var t=Object.assign({},e);return l(t.zIndex)?t.zIndex=Math.min(0,t.zIndex):c(t.zIndex)||(t.zIndex=0),new uy(t)},createCamera:e=>new jy(e),createLivePlayer:e=>new Yy(e),createLivePusher:e=>new Xy(e),createWebView:e=>{if(Kt("createWebView"))return new _l(Object.assign({},e,{__skipDomainCheck__:!1}));throw new Error("createWebView:fail no permission")},onDeviceOrientationChange:Px,offDeviceOrientationChange:Dx,onUserCaptureScreen:e=>{pd=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},offUserCaptureScreen:()=>{pd=null},postMessage:kx,onMessage:Mx,getOpenDataContext:()=>Cx||(Lx()||console.warn("getOpenDataContext:fail no openDataContext target file"),Cx={postMessage(e){kx(e)},onMessage(e){Mx(e)},get canvas(){return Ux()}}),createUserGameData:(e={})=>{ut("createUserGameData",e,"createUserGameData 接口已废弃")},updateUserGameData:(e={})=>{ut("updateUserGameData",e,"updateUserGameData 接口已废弃")},getPerformance:rb,setEnableDebug:(e={})=>{st("setEnableDebug",e,{enableDebug:!0})&&(it("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))},triggerGC:vx,onMemoryWarning:_x,offMemoryWarning:(e,t=!1)=>{t?ax=null:gx(e)},reportPerformance:function(e,t,i){uP(e,t,i)},testApiCallTime:(e={})=>{var t=e.type;if(1===t)it("testApiCallTime",e);else if(2===t)es(0,e,void 0,(t=>{Xe(t,"testApiCallTime",e,{})}));else{if(3!==t)return{directInvokeJs:k.directInvokeJs};es(0,e,void 0,(t=>{Xe(t,"testApiCallTime",e,{})}))}},createWorker:Gx,createSharedArrayBuffer:e=>new wy(e),checkIsUserAdvisedToRest:e=>{st("checkIsUserAdvisedToRest",e,{todayPlayedTime:0})&&Gc(e)},getUpdateManager:()=>xR,updateWeChatApp:(e={})=>{var t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});Qs(t)},getAd:({scene:e,adId:t,success:i,fail:r,complete:n}={})=>new Promise(((e,t)=>{wx.getNetworkType({success:t=>{e(t.networkType)},fail:e=>{t(e)}})})).then((a=>Oi({sdkApiName:"getAdData",apiName:"webapi_getadvert",reqData:{scene_type:e,ad_unit_id:t,weapp_path:"index.html",sdk_version:hL,network_type:a},success:e=>{if(-201828!==(e=e.data).ret)if(e.ret&&0!==parseInt(e.ret,10))"function"==typeof r&&r(e);else if(0!==e.advertisement_num)try{var t=e.advertisement_info[0],n={traceid:t.traceid,aid:t.aid,group_id:t.group_id,dest_type:t.dest_type,watermark_type:t.watermark_type,url:t.url,rl:t.rl,apurl:t.apurl,pt:t.pt,title:t.hint_txt,imageUrl:t.image_url,width:t.material_width,height:t.material_height};6===t.dest_type&&(n.weapp_ghid=t.weapp_info.original_id,n.dest_appid=t.weapp_info.appid);var a=new pL(n);"function"==typeof i&&i(a)}catch(e){"function"==typeof r&&r({errMsg:e.message})}else"function"==typeof r&&r({errMsg:"no advertisement"});else"function"==typeof r&&r({errMsg:"getAd: fail no permission"})},fail:r,complete:n}))),openTencentGameContract:({success:e,fail:t,complete:i}={})=>{$A({url:"http://game.qq.com/contract.shtml",success:e,fail:t,complete:i})},openTencentPrivacyContract:({success:e,fail:t,complete:i}={})=>{$A({url:"https://game.qq.com/privacy_guide.shtml",success:e,fail:t,complete:i})},openUrl:({url:e,success:t,fail:i,complete:r})=>{it("openUrl",{url:e,success:t,fail:i,complete:r})},openTencentBoardGameContract:({success:e,fail:t,complete:i}={})=>{$A({url:"http://huanle.qq.com/cp/a20170209notice/",success:e,fail:t,complete:i})},openTencentChildrenGuideContract:({success:e,fail:t,complete:i}={})=>{$A({url:"https://game.qq.com/privacy_guide_children.shtml",success:e,fail:t,complete:i})},openTencentAccountCancelContract:({success:e,fail:t,complete:i}={})=>{$A({url:"https://game.qq.com/game_account_cancellation_agreement.shtml",success:e,fail:t,complete:i})},createRewardedVideoAd:V0,createIncentiveVideoAd:V0,createBannerAd:e=>new sZ(e),createInterstitialAd:e=>{var t=K()({},e);return delete t.pluginId,new xJ(t)},createCustomAd:e=>{var t=K()({},e);return delete t.pluginId,new FJ(t)},createGridAd:e=>new E0(e),createCpsAd:e=>new F0(e),createUserInfoButton:(e={})=>new Y0(e),createGameClubButton:(e={})=>new K0(e),createOpenSettingButton:(e={})=>new J0(e),createFeedbackButton:(e={})=>new i1(e),loadSubpackage:l4,navigateToMiniProgram:e=>{if(y4){Kl.navigateCount++;var t=Ql.allowSkip;if(Yt({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===v4?-2:Date.now()-v4}),3===t)m4?(Ll(Sl),bu(e)):ut("navigateToMiniProgram",e,"require user interaction");else{y4=!1,Kl.bannedCount++;var{modalMessage:i,modalConfirm:r,constant:{modalCancel:n}}=Ql;Ul({__sdk_inner_allowShowMoreLength__:!0,content:i,confirmText:r,cancelText:n,success(t){y4=!0,t.confirm?(Ql.reportModalConfirm(),Qs({url:Ql.modalSkipLink}),ut("navigateToMiniProgram",e,"navigate ability banned!")):(Ql.reportModalCancel(),ut("navigateToMiniProgram",e,"navigate ability banned!"))},fail(e){y4=!0,e.errMsg}})}}},createUDPSocket:(e="udp4")=>N?new L4(e):new V4(e),markScene:(e={})=>{it("markScene",e)},createGamePortal:e=>new K5(e),createGameBanner:e=>new C6(e),createGameIcon:e=>new B6(e),getUserInteractiveStorage:e=>{var t=Ug(e.keyList);t?ut("getUserInteractiveStorage",e,t):(Reporter.reportIDKey({key:"getUserInteractiveStorage"}),F6(e))},onInteractiveStorageModified:e=>{wA.on("modified",e)},offInteractiveStorageModified:e=>{wA.off("modified",e)},env:DR,getLogManager:function(e={}){return xf||(Tt(Sf)(),xf=!0),"number"==typeof e.level&&(If.level=e.level),1===If.level?If.logApiInvoke=!1:0===If.level&&(If.logApiInvoke=!0),If},getRealtimeLogManager:e=>{e=e||{};var t="develop"===k.envVersion||"trial"===k.envVersion;return e.isClientReport=!t,ug(e)},error:u5,isSystemError:e=>e.toString().endsWith(1),isSDKError:e=>e.toString().endsWith(2),isThirdError:e=>e.toString().endsWith(3),getGameRecorder:()=>E5||(E5=new b5),createGameRecorderShareButton:(e={})=>k5||(k5=new O5(e)),cloud:__cloudSDK__.getCloudAPI(),serviceMarket:__cloudSDK__.getServiceMarketAPI(),version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:__libVersionInfo__,getGameServerManager:()=>HN,getBox2D:()=>O.Z.Box2D,protobuf:(...e)=>V6()()(...e),createGameComponent:e=>new a4(e),getGroupEnterInfo:(e={})=>{var{success:t,fail:i,failWithMsg:r}=dt(e,ed);Jc?Kt("getGroupToolbarInfo")?Oi({sdkApiName:ed,apiName:"webapi_swapopengid",reqData:{chatroom_name:Jc},success:t,fail:i}):r({msg:"no permission"}):r({msg:"invalid scene"})},onHandoff:function(e){qO=e},offHandoff:function(){qO=null},setHandoffQuery:function(e){return"string"==typeof e&&($O="?"===e[0]?e:"?"+e,!0)},faceDetect:function(e={}){it("faceDetect",e)},initFaceDetect:function(e={}){it("faceProcessInit",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(e={}){it("faceProcessStop",e,{beforeAll:e=>{e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:e=>{var t=O.Z.createBufferURL(e)||(()=>"");return nr.add(t,e),t},revokeBufferURL:e=>(nr.off(e),O.Z.revokeBufferURL(e)||(()=>!1)),createSignal:cP,startLocalServiceDiscovery:(e={})=>{it("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")})},stopLocalServiceDiscovery:(e={})=>{it("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery"),beforeFail:e=>e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")})},onLocalServiceFound:Fd,offLocalServiceFound:Ud,onLocalServiceLost:Wd,offLocalServiceLost:Gd,onLocalServiceDiscoveryStop:Vd,offLocalServiceDiscoveryStop:jd,onLocalServiceResolveFail:Hd,offLocalServiceResolveFail:zd,getLocalIPAddress:e=>{B||L?it("getIPAddress",e,{beforeAll(e){e.errMsg=e.errMsg.replace("getIPAddress","getLocalIPAddress")}}):it("getLocalIPAddress",e)},startCPUProfiling:Z6,stopCPUProfiling:K6,getExptInfo:Q8,getExptInfoSync:function(e){var t={},{exptInfo:i,jsDataType:r}=$8();return i&&Array.isArray(i.expt_param_list)&&(Array.isArray(e)||(e=i.expt_param_list.map((e=>e.param_name))),i.expt_param_list.forEach((i=>{-1!==e.indexOf(i.param_name)&&(t[i.param_name]=i.param_value,function(e,t,i){Reporter.reportKeyValue({key:"ExptHit",value:[H8,z8,e,encodeURIComponent(JSON.stringify(t)),0,"",i].join(",")})}(i.expt_group_id,i,r))}))),t},reportEvent:function(e,t={}){setTimeout((()=>function(e,t){var i=2,{accountInfo:r,envVersion:n}=k||{},a=r?r.appId:"";"release"===n?i=1:"trial"===n&&(i=3);var o=ys(!0),s=V8.sessionid||V8.sessionId,l=V8.usedstate||V8.usedState;Ff(1005,JSON.stringify({appid:a,app_state:i,appversion:W6().miniProgram.version,enter_scene:V8.scene,scene_note:V8.scene_note||V8.sceneNote,prescene:V8.prescene,prescene_note:V8.prescene_note||V8.presceneNote,sessionid:s,add_state:l,page_path:q8()||V8.path,page_query:JSON.stringify(V8.query||{}),referpagepath:V8.referpagepath,isentrance:W8||W8===s?0:1,event_time:Date.now(),sdk_version:Ko,devicemodel:o.model,devicebrand:o.brand,os_name:o.platform,os_version:o.system,language_version:o.language,networktype:$i(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:k.screenWidth,screen_height:k.screenHeight,open_source:k.host&&k.host.appId?2:1,host_appid:k.host?k.host.appId:""}),"immediate")}(e,t))),Reporter.reportIDKey({key:"reportEventInvoke"})},getChannelsLiveInfo:KG,getChannelsLiveState:JV,getChannelsLiveReservation:ej,getChannelsLiveNoticeInfo:tj,openChannelsLive:X8,openChannelsActivity:J8,openChannelsUserProfile:e7,openChannelsLiveCollection:t7,openChannelsEvent:i7,reserveChannelsLive:r7,lanDebug:F8,onVerifyNotify:function(e){yD.on("notify",e)},offVerifyNotify:function(e){yD.off("notify",e)},navigateToUserCenter:(e={})=>{s7?ut(n7,e,"please invoke after last navigate ended"):(s7=!0,rv().then((()=>((e={})=>{var{type:t}=e;switch(t){case"adsSkipCard":return l7();default:return Promise.reject(new Error("invalid type"))}})(e))).then((()=>(ct({name:n7,args:e,res:{}}),s7=!1,null))).catch((t=>{ut(n7,e,t.errMsg||t.message,t.errCode||t.err_code),s7=!1})))},requestConsumeAdsSkipCard:function(e={}){d7?ut(u7,e,"please invoke after last request ended"):st(u7,e,{orderNo:""})&&(d7=!0,function(e={}){return ki({sdkApiName:"check",apiName:"webapi_getadcardcostorderpaypackage",reqData:{orderNo:e.orderNo}}).then((e=>{var{token:t,errCode:i,errMsg:r,amount:n}=e.data;if(t)return{token:t,amount:n};throw{errCode:i,errMsg:r}}))}(e).then(p7).then(f7).then((()=>{d7=!1,ct({name:u7,args:e,res:{}})})).catch((t=>{d7=!1,void 0!==t.errCode||void 0!==t.err_code?ut(u7,e,t.errMsg||t.message,+(t.errCode||t.err_code||0)):ut(u7,e,t.errMsg||t.message)})))},getAdsSkipCardSharePresentQuota:g7,getAdsSkipCardQuestInfo:(e={})=>{var{success:t,failWithMsg:i,fail:r}=dt(e,"getAdsSkipCardQuestInfo");Oi({reqData:{},apiName:"webapi_getadcardquestinfo",sdkApiName:"getAdsSkipCardQuestInfo",success(e){var{data:r}=e,{errCode:n,errMsg:a,balance:o,questInfoList:s}=r;0===n?t({balance:o,questInfoList:s}):i({msg:a,code:n})},fail:r})},getUserCryptoManager:()=>y7,dumpGameLivePanelUI:e=>e&&e.isLibTest?(Object.keys(O2).forEach((e=>{O2[e].clickable=O2[e].check()})),O2):{},getDebuggerMessager:()=>i.g.__debuggerMessager__?i.g.__debuggerMessager__:{},getRealNameVerifyMethod:function(){return!1}};for(var Y9 of j6)if("function"==typeof z9[Y9]){var $9=z9[Y9];z9[Y9]=se($9)}["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((e=>{var t=z9[e];z9[e]=se(((e={})=>{((e,t)=>{var i=t.timeout;if("number"==typeof i){var r=!1,n=setTimeout((()=>{var e={errMsg:"request timeout"};r=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),i),a=["success","fail","complete"].reduce(((e,i)=>(e[i]=e=>{r||(clearTimeout(n),"function"==typeof t[i]&&t[i](e))},e)),{});e(Object.assign({},t,a))}else e(t)})(t,e)}))})),Reporter.setAsGame(),Dr(z9);var q9={wx:((e,t)=>{var i={};for(var r in e)mi(i,e,r,t);return i})(z9,"gameSDKScriptError")};dL(q9,n,z9),dL(q9,t,z9);var Q9=q9})(),__appServiceSDK__=r.default})();var wx=__appServiceSDK__.wx;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.wx=wx);;console.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);wxNativeConsole.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);if (typeof __passWAGameGlobal__ === 'function') {
  var __WAGameGlobal__ = {}
  __WAGameGlobal__.JSContext = JSContext
  __WAGameGlobal__.Protect = Protect
  __WAGameGlobal__.__cloudSDK__ = __cloudSDK__
  __WAGameGlobal__.__subContextEngine__ = __subContextEngine__
  __WAGameGlobal__.Safeway = Safeway
  __WAGameGlobal__.Reporter = Reporter
  __WAGameGlobal__.__appServiceSDK__ = __appServiceSDK__
  __WAGameGlobal__.WeixinJSBridge = WeixinJSBridge
  __WAGameGlobal__.WeixinWorker = WeixinWorker
  __WAGameGlobal__.wxNativeConsole = wxNativeConsole
  __passWAGameGlobal__(__WAGameGlobal__)
};;global.wx=wx;global.requirePlugin=requirePlugin;__subContextEngine__.initGameRelatedContexts();})(this);var __WAGameEndTime__ = Date.now();
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
