var __wxLibrary={fileName: 'WAGame.js', envType: 'Service', contextType: 'Game:Uncertain', execStart: Date.now()}
;var __WAGameStartTime__ = Date.now();(function(global){;var __libVersionInfo__ = {"updateTime":"2021.4.28 16:10:21","version":"2.17.0","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"injectAppSeparatedPlugin":true,"nativeTrans":true}};;var __Function__ = global.Function; var Function = __Function__;!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(e){var t=!1;if(e.__wxConfig&&"string"==typeof e.__wxConfig.platform)"ios"===e.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var r=navigator.userAgent.toLowerCase();(r.indexOf("iphone")>=0||r.indexOf("ipad")>=0)&&(t=!0)}var i=[];t&&(e.Promise=void 0,i.push("Promise")),n(2)({usePolyfill:i,useNative:["WeakMap"]}),n(22)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(3),i=n(6),o=n(8),a=n(10),s=o.data,c=o.normalize,u="USE_FUNCTION_CONSTRUCTOR",l="AsyncIteratorPrototype",d=function(e,t){if(i(e))for(var n=0;n<e.length;n++)s[c(e[n])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,o.NATIVE),d(e.usePolyfill,o.POLYFILL),d(e.useFeatureDetection,null),r(e,u)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),r(e,l)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},function(e,t,n){var r=n(4),i={}.hasOwnProperty;e.exports=function(e,t){return i.call(r(e),t)}},function(e,t,n){var r=n(5);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(7);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9),i=/#|\.prototype\./,o=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=o.normalize=function(e){return String(e).replace(i,".").toLowerCase()},s=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";e.exports=o},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(11),i=n(12),o="__core-js_shared__",a=r[o]||i(o,{});e.exports=a},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(1))},function(e,t,n){var r=n(11),i=n(13);e.exports=function(e,t){try{i(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(14),i=n(15),o=n(21);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(14),i=n(16),o=n(19),a=n(20),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(o(e),t=a(t,!0),o(n),i)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(14),i=n(9),o=n(17);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(11),i=n(18),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(18);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";n.r(t);n(23),n(50),n(59),n(64),n(65),n(80),n(83),n(84),n(85),n(86),n(87),n(88),n(97),n(99),n(100),n(104),n(106),n(107),n(115),n(116),n(117),n(128),n(129),n(133),n(134),n(144),n(146),n(147),n(148),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(169),n(171),n(173),n(175),n(177),n(180);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},function(e,t,n){"use strict";var r=n(24),i=n(14),o=n(11),a=n(3),s=n(18),c=n(15).f,u=n(38),l=o.Symbol;if(i&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var h=p.toString,g="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=g?t.slice(7,-1):t.replace(v,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){var r=n(11),i=n(25).f,o=n(13),a=n(29),s=n(12),c=n(38),u=n(8);e.exports=function(e,t){var n,l,d,f,p,h=e.target,g=e.global,v=e.stat;if(n=g?r:v?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=i(n,l))&&p.value:n[l],!u(g?l:h+(v?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&o(f,"sham",!0),a(n,l,f,e)}}},function(e,t,n){var r=n(14),i=n(26),o=n(21),a=n(27),s=n(20),c=n(3),u=n(16),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return o(!i.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(28),i=n(5);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(9),i=n(7),o="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?o.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(11),i=n(13),o=n(3),a=n(12),s=n(30),c=n(31),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||o(n,"name")||i(n,"name",t),(c=l(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:i(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){var r=n(10),i=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return i.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r,i,o,a=n(32),s=n(11),c=n(18),u=n(13),l=n(3),d=n(10),f=n(33),p=n(37),h="Object already initialized",g=s.WeakMap;if(a){var v=d.state||(d.state=new g),_=v.get,y=v.has,m=v.set;r=function(e,t){if(y.call(v,e))throw new TypeError(h);return t.facade=e,m.call(v,e,t),t},i=function(e){return _.call(v,e)||{}},o=function(e){return y.call(v,e)}}else{var b=f("state");p[b]=!0,r=function(e,t){if(l(e,b))throw new TypeError(h);return t.facade=e,u(e,b,t),t},i=function(e){return l(e,b)?e[b]:{}},o=function(e){return l(e,b)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(11),i=n(30),o=r.WeakMap;e.exports="function"==typeof o&&/native code/.test(i(o))},function(e,t,n){var r=n(34),i=n(36),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t,n){var r=n(35),i=n(10);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.11.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(3),i=n(39),o=n(25),a=n(15);e.exports=function(e,t){for(var n=i(t),s=a.f,c=o.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(40),i=n(42),o=n(49),a=n(19);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(41),i=n(11),o=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e])||o(i[e]):r[e]&&r[e][t]||i[e]&&i[e][t]}},function(e,t,n){var r=n(11);e.exports=r},function(e,t,n){var r=n(43),i=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(3),i=n(27),o=n(44).indexOf,a=n(37);e.exports=function(e,t){var n,s=i(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var r=n(27),i=n(45),o=n(47),a=function(e){return function(t,n,a){var s,c=r(t),u=i(c.length),l=o(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(46),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(46),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){n(51)("asyncIterator")},function(e,t,n){var r=n(41),i=n(3),o=n(52),a=n(15).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});i(t,e)||a(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(53);t.f=r},function(e,t,n){var r=n(11),i=n(34),o=n(3),a=n(36),s=n(54),c=n(58),u=i("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){return o(u,e)&&(s||"string"==typeof u[e])||(s&&o(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){var r=n(55),i=n(56),o=n(9);e.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(r?38===i:i>37&&i<41)}))},function(e,t,n){var r=n(7),i=n(11);e.exports="process"==r(i.process)},function(e,t,n){var r,i,o=n(11),a=n(57),s=o.process,c=s&&s.versions,u=c&&c.v8;u?i=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=r[1]),e.exports=i&&+i},function(e,t,n){var r=n(40);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(54);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(24),i=n(60),o=n(4),a=n(45),s=n(46),c=n(63);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=a(t.length),r=c(t,0);return r.length=i(r,t,t,n,0,void 0===e?1:s(e)),r}})},function(e,t,n){"use strict";var r=n(6),i=n(45),o=n(61),a=function(e,t,n,s,c,u,l,d){for(var f,p=c,h=0,g=!!l&&o(l,d,3);h<s;){if(h in n){if(f=g?g(n[h],h,t):n[h],u>0&&r(f))p=a(e,t,f,i(f.length),p,u-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=f}p++}h++}return p};e.exports=a},function(e,t,n){var r=n(62);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(18),i=n(6),o=n(53)("species");e.exports=function(e,t){var n;return i(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!i(n.prototype)?r(n)&&null===(n=n[o])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(24),i=n(60),o=n(4),a=n(45),s=n(62),c=n(63);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=o(this),r=a(n.length);return s(e),(t=c(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){"use strict";var r=n(27),i=n(66),o=n(71),a=n(31),s=n(72),c="Array Iterator",u=a.set,l=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var r=n(53),i=n(67),o=n(15),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r,i=n(19),o=n(68),a=n(48),s=n(37),c=n(70),u=n(17),l=n(33),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=i(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(14),i=n(15),o=n(19),a=n(69);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),s=r.length,c=0;s>c;)i.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(43),i=n(48);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(40);e.exports=r("document","documentElement")},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(24),i=n(73),o=n(75),a=n(78),s=n(77),c=n(13),u=n(29),l=n(53),d=n(35),f=n(71),p=n(74),h=p.IteratorPrototype,g=p.BUGGY_SAFARI_ITERATORS,v=l("iterator"),_="keys",y="values",m="entries",b=function(){return this};e.exports=function(e,t,n,l,p,w,O){i(n,t,l);var E,S,T,I=function(e){if(e===p&&P)return P;if(!g&&e in k)return k[e];switch(e){case _:case y:case m:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",C=!1,k=e.prototype,x=k[v]||k["@@iterator"]||p&&k[p],P=!g&&x||I(p),D="Array"==t&&k.entries||x;if(D&&(E=o(D.call(new e)),h!==Object.prototype&&E.next&&(d||o(E)===h||(a?a(E,h):"function"!=typeof E[v]&&c(E,v,b)),s(E,A,!0,!0),d&&(f[A]=b))),p==y&&x&&x.name!==y&&(C=!0,P=function(){return x.call(this)}),d&&!O||k[v]===P||c(k,v,P),f[t]=P,p)if(S={values:I(y),keys:w?P:I(_),entries:I(m)},O)for(T in S)(g||C||!(T in k))&&u(k,T,S[T]);else r({target:t,proto:!0,forced:g||C},S);return S}},function(e,t,n){"use strict";var r=n(74).IteratorPrototype,i=n(67),o=n(21),a=n(77),s=n(71),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,u,!1,!0),s[u]=c,e}},function(e,t,n){"use strict";var r,i,o,a=n(9),s=n(75),c=n(13),u=n(3),l=n(53),d=n(35),f=l("iterator"),p=!1;[].keys&&("next"in(o=[].keys())?(i=s(s(o)))!==Object.prototype&&(r=i):p=!0);var h=null==r||a((function(){var e={};return r[f].call(e)!==e}));h&&(r={}),d&&!h||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var r=n(3),i=n(4),o=n(33),a=n(76),s=o("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=i(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(9);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(15).f,i=n(3),o=n(53)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(19),i=n(79);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,o){return r(n),i(o),t?e.call(n,o):n.__proto__=o,n}}():void 0)},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(24),i=n(81).left,o=n(82),a=n(56),s=n(55);r({target:"Array",proto:!0,forced:!o("reduce")||!s&&a>79&&a<83},{reduce:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(62),i=n(4),o=n(28),a=n(45),s=function(e){return function(t,n,s,c){r(n);var u=i(t),l=o(u),d=a(u.length),f=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=p;break}if(f+=p,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=p)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(9);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(24),i=n(81).right,o=n(82),a=n(56),s=n(55);r({target:"Array",proto:!0,forced:!o("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return i(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(24),i=n(6),o=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),o.call(this)}})},function(e,t,n){"use strict";var r=n(24),i=n(62),o=n(4),a=n(9),s=n(82),c=[],u=c.sort,l=a((function(){c.sort(void 0)})),d=a((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||!f},{sort:function(e){return void 0===e?u.call(o(this)):u.call(o(this),i(e))}})},function(e,t,n){n(66)("flat")},function(e,t,n){n(66)("flatMap")},function(e,t,n){"use strict";var r=n(24),i=n(11),o=n(89),a=n(96),s="ArrayBuffer",c=o.ArrayBuffer;r({global:!0,forced:i.ArrayBuffer!==c},{ArrayBuffer:c}),a(s)},function(e,t,n){"use strict";var r=n(11),i=n(14),o=n(90),a=n(13),s=n(91),c=n(9),u=n(92),l=n(46),d=n(45),f=n(93),p=n(94),h=n(75),g=n(78),v=n(42).f,_=n(15).f,y=n(95),m=n(77),b=n(31),w=b.get,O=b.set,E="ArrayBuffer",S="DataView",T="Wrong index",I=r.ArrayBuffer,A=I,C=r.DataView,k=C&&C.prototype,x=Object.prototype,P=r.RangeError,D=p.pack,R=p.unpack,j=function(e){return[255&e]},N=function(e){return[255&e,e>>8&255]},M=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},L=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return D(e,23,4)},F=function(e){return D(e,52,8)},U=function(e,t){_(e.prototype,t,{get:function(){return w(this)[t]}})},W=function(e,t,n,r){var i=f(n),o=w(e);if(i+t>o.byteLength)throw P(T);var a=w(o.buffer).bytes,s=i+o.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,i,o){var a=f(n),s=w(e);if(a+t>s.byteLength)throw P(T);for(var c=w(s.buffer).bytes,u=a+s.byteOffset,l=r(+i),d=0;d<t;d++)c[u+d]=l[o?d:t-d-1]};if(o){if(!c((function(){I(1)}))||!c((function(){new I(-1)}))||c((function(){return new I,new I(1.5),new I(NaN),I.name!=E}))){for(var G,H=(A=function(e){return u(this,A),new I(f(e))}).prototype=I.prototype,z=v(I),Y=0;z.length>Y;)(G=z[Y++])in A||a(A,G,I[G]);H.constructor=A}g&&h(k)!==x&&g(k,x);var q=new C(new A(2)),K=k.setInt8;q.setInt8(0,2147483648),q.setInt8(1,2147483649),!q.getInt8(0)&&q.getInt8(1)||s(k,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else A=function(e){u(this,A,E);var t=f(e);O(this,{bytes:y.call(new Array(t),0),byteLength:t}),i||(this.byteLength=t)},C=function(e,t,n){u(this,C,S),u(e,A,S);var r=w(e).byteLength,o=l(t);if(o<0||o>r)throw P("Wrong offset");if(o+(n=void 0===n?r-o:d(n))>r)throw P("Wrong length");O(this,{buffer:e,byteLength:n,byteOffset:o}),i||(this.buffer=e,this.byteLength=n,this.byteOffset=o)},i&&(U(A,"byteLength"),U(C,"buffer"),U(C,"byteLength"),U(C,"byteOffset")),s(C.prototype,{getInt8:function(e){return W(this,1,e)[0]<<24>>24},getUint8:function(e){return W(this,1,e)[0]},getInt16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=W(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return L(W(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return L(W(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return R(W(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return R(W(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,j,t)},setUint8:function(e,t){V(this,1,e,j,t)},setInt16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,N,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,M,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});m(A,E),m(C,S),e.exports={ArrayBuffer:A,DataView:C}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(29);e.exports=function(e,t,n){for(var i in t)r(e,i,t[i],n);return e}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(46),i=n(45);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=i(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t){var n=Math.abs,r=Math.pow,i=Math.floor,o=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var c,u,l,d=new Array(s),f=8*s-t-1,p=(1<<f)-1,h=p>>1,g=23===t?r(2,-24)-r(2,-77):0,v=e<0||0===e&&1/e<0?1:0,_=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,c=p):(c=i(o(e)/a),e*(l=r(2,-c))<1&&(c--,l*=2),(e+=c+h>=1?g/l:g*r(2,1-h))*l>=2&&(c++,l/=2),c+h>=p?(u=0,c=p):c+h>=1?(u=(e*l-1)*r(2,t),c+=h):(u=e*r(2,h-1)*r(2,t),c=0));t>=8;d[_++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;d[_++]=255&c,c/=256,f-=8);return d[--_]|=128*v,d},unpack:function(e,t){var n,i=e.length,o=8*i-t-1,a=(1<<o)-1,s=a>>1,c=o-7,u=i-1,l=e[u--],d=127&l;for(l>>=7;c>0;d=256*d+e[u],u--,c-=8);for(n=d&(1<<-c)-1,d>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),d-=s}return(l?-1:1)*n*r(2,d-t)}}},function(e,t,n){"use strict";var r=n(4),i=n(47),o=n(45);e.exports=function(e){for(var t=r(this),n=o(t.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:i(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(40),i=n(15),o=n(53),a=n(14),s=o("species");e.exports=function(e){var t=r(e),n=i.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(24),i=n(9),o=n(89),a=n(19),s=n(47),c=n(45),u=n(98),l=o.ArrayBuffer,d=o.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:i((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),i=s(void 0===t?n:t,n),o=new(u(this,l))(c(i-r)),p=new d(this),h=new d(o),g=0;r<i;)h.setUint8(g++,p.getUint8(r++));return o}})},function(e,t,n){var r=n(19),i=n(62),o=n(53)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r=n(24),i=Math.hypot,o=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!i&&i(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,i=0,s=0,c=arguments.length,u=0;s<c;)u<(n=o(arguments[s++]))?(i=i*(r=u/n)*r+1,u=n):i+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*a(i)}})},function(e,t,n){var r=n(24),i=n(101);r({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},function(e,t,n){var r=n(11),i=n(102).trim,o=n(103),a=r.parseFloat,s=1/a(o+"-0")!=-1/0;e.exports=s?function(e){var t=i(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},function(e,t,n){var r=n(5),i="["+n(103)+"]",o=RegExp("^"+i+i+"*"),a=RegExp(i+i+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(24),i=n(14),o=n(105),a=n(4),s=n(62),c=n(15);i&&r({target:"Object",proto:!0,forced:o},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(35),i=n(11),o=n(9);e.exports=r||!o((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete i[e]}))},function(e,t,n){"use strict";var r=n(24),i=n(14),o=n(105),a=n(4),s=n(62),c=n(15);i&&r({target:"Object",proto:!0,forced:o},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(24),i=n(108),o=n(114);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,n){o(t,e,n)}),{AS_ENTRIES:!0}),t}})},function(e,t,n){var r=n(19),i=n(109),o=n(45),a=n(61),s=n(110),c=n(113),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,p,h,g,v,_=n&&n.that,y=!(!n||!n.AS_ENTRIES),m=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),w=a(t,_,1+y+b),O=function(e){return l&&c(l),new u(!0,e)},E=function(e){return y?(r(e),b?w(e[0],e[1],O):w(e[0],e[1])):b?w(e,O):w(e)};if(m)l=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(i(d)){for(f=0,p=o(e.length);p>f;f++)if((h=E(e[f]))&&h instanceof u)return h;return new u(!1)}l=d.call(e)}for(g=l.next;!(v=g.call(l)).done;){try{h=E(v.value)}catch(e){throw c(l),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},function(e,t,n){var r=n(53),i=n(71),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(111),i=n(71),o=n(53)("iterator");e.exports=function(e){if(null!=e)return e[o]||e["@@iterator"]||i[r(e)]}},function(e,t,n){var r=n(112),i=n(7),o=n(53)("toStringTag"),a="Arguments"==i(function(){return arguments}());e.exports=r?i:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?n:a?i(t):"Object"==(r=i(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r={};r[n(53)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(19);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,n){"use strict";var r=n(20),i=n(15),o=n(21);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){"use strict";var r=n(24),i=n(14),o=n(105),a=n(4),s=n(20),c=n(75),u=n(25).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.get}while(n=c(n))}})},function(e,t,n){"use strict";var r=n(24),i=n(14),o=n(105),a=n(4),s=n(20),c=n(75),u=n(25).f;i&&r({target:"Object",proto:!0,forced:o},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.set}while(n=c(n))}})},function(e,t,n){"use strict";var r,i,o,a,s=n(24),c=n(35),u=n(11),l=n(40),d=n(118),f=n(29),p=n(91),h=n(77),g=n(96),v=n(18),_=n(62),y=n(92),m=n(30),b=n(108),w=n(119),O=n(98),E=n(120).set,S=n(122),T=n(124),I=n(126),A=n(125),C=n(127),k=n(31),x=n(8),P=n(53),D=n(55),R=n(56),j=P("species"),N="Promise",M=k.get,L=k.set,B=k.getterFor(N),F=d,U=u.TypeError,W=u.document,V=u.process,G=l("fetch"),H=A.f,z=H,Y=!!(W&&W.createEvent&&u.dispatchEvent),q="function"==typeof PromiseRejectionEvent,K="unhandledrejection",J=x(N,(function(){if(!(m(F)!==String(F))){if(66===R)return!0;if(!D&&!q)return!0}if(c&&!F.prototype.finally)return!0;if(R>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[j]=t,!(e.then((function(){}))instanceof t)})),X=J||!w((function(e){F.all(e).catch((function(){}))})),$=function(e){var t;return!(!v(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;S((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var a,s,c,u=n[o++],l=i?u.ok:u.fail,d=u.resolve,f=u.reject,p=u.domain;try{l?(i||(2===e.rejection&&ne(e),e.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(U("Promise-chain cycle")):(s=$(a))?s.call(a,d,f):d(a)):f(r)}catch(e){p&&!c&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Q=function(e,t,n){var r,i;Y?((r=W.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!q&&(i=u["on"+e])?i(r):e===K&&I("Unhandled promise rejection",n)},ee=function(e){E.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=C((function(){D?V.emit("unhandledRejection",r,n):Q(K,n,r)})),e.rejection=D||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){E.call(u,(function(){var t=e.facade;D?V.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},ie=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Z(e,!0))},oe=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw U("Promise can't be resolved itself");var r=$(t);r?S((function(){var n={done:!1};try{r.call(t,re(oe,n,e),re(ie,n,e))}catch(t){ie(n,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){ie({done:!1},t,e)}}};J&&(F=function(e){y(this,F,N),_(e),r.call(this);var t=M(this);try{e(re(oe,t),re(ie,t))}catch(e){ie(t,e)}},(r=function(e){L(this,{type:N,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(F.prototype,{then:function(e,t){var n=B(this),r=H(O(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=D?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new r,t=M(e);this.promise=e,this.resolve=re(oe,t),this.reject=re(ie,t)},A.f=H=function(e){return e===F||e===o?new i(e):z(e)},c||"function"!=typeof d||(a=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return T(F,G.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:J},{Promise:F}),h(F,N,!1,!0),g(N),o=l(N),s({target:N,stat:!0,forced:J},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:N,stat:!0,forced:c||J},{resolve:function(e){return T(c&&this===o?F:this,e)}}),s({target:N,stat:!0,forced:X},{all:function(e){var t=this,n=H(t),r=n.resolve,i=n.reject,o=C((function(){var n=_(t.resolve),o=[],a=0,s=1;b(e,(function(e){var c=a++,u=!1;o.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,o[c]=e,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,i=C((function(){var i=_(t.resolve);b(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}})},function(e,t,n){var r=n(11);e.exports=r.Promise},function(e,t,n){var r=n(53)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var r,i,o,a=n(11),s=n(9),c=n(61),u=n(70),l=n(17),d=n(121),f=n(55),p=a.location,h=a.setImmediate,g=a.clearImmediate,v=a.process,_=a.MessageChannel,y=a.Dispatch,m=0,b={},w="onreadystatechange",O=function(e){if(b.hasOwnProperty(e)){var t=b[e];delete b[e],t()}},E=function(e){return function(){O(e)}},S=function(e){O(e.data)},T=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};h&&g||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return b[++m]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(m),m},g=function(e){delete b[e]},f?r=function(e){v.nextTick(E(e))}:y&&y.now?r=function(e){y.now(E(e))}:_&&!d?(o=(i=new _).port2,i.port1.onmessage=S,r=c(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(T)?(r=T,a.addEventListener("message",S,!1)):r=w in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),O(e)}}:function(e){setTimeout(E(e),0)}),e.exports={set:h,clear:g}},function(e,t,n){var r=n(57);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){var r,i,o,a,s,c,u,l,d=n(11),f=n(25).f,p=n(120).set,h=n(121),g=n(123),v=n(55),_=d.MutationObserver||d.WebKitMutationObserver,y=d.document,m=d.process,b=d.Promise,w=f(d,"queueMicrotask"),O=w&&w.value;O||(r=function(){var e,t;for(v&&(e=m.domain)&&e.exit();i;){t=i.fn,i=i.next;try{t()}catch(e){throw i?a():o=void 0,e}}o=void 0,e&&e.enter()},h||v||g||!_||!y?b&&b.resolve?(u=b.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=v?function(){m.nextTick(r)}:function(){p.call(d,r)}:(s=!0,c=y.createTextNode(""),new _(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=O||function(e){var t={fn:e,next:void 0};o&&(o.next=t),i||(i=t,a()),o=t}},function(e,t,n){var r=n(57);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(19),i=n(18),o=n(125);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(62),i=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new i(e)}},function(e,t,n){var r=n(11);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){"use strict";var r=n(24),i=n(35),o=n(118),a=n(9),s=n(40),c=n(98),u=n(124),l=n(29);r({target:"Promise",proto:!0,real:!0,forced:!!o&&a((function(){o.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),i||"function"!=typeof o||o.prototype.finally||l(o.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){"use strict";var r=n(24),i=n(130).end;r({target:"String",proto:!0,forced:n(132)},{padEnd:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(45),i=n(131),o=n(5),a=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(o(t)),d=l.length,f=void 0===s?" ":String(s),p=r(n);return p<=d||""==f?l:(c=p-d,(u=i.call(f,a(c/f.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,n){"use strict";var r=n(46),i=n(5);e.exports=function(e){var t=String(i(this)),n="",o=r(e);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(t+=t))1&o&&(n+=t);return n}},function(e,t,n){var r=n(57);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){"use strict";var r=n(24),i=n(130).start;r({target:"String",proto:!0,forced:n(132)},{padStart:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(135),i=n(19),o=n(45),a=n(46),s=n(5),c=n(140),u=n(142),l=n(143),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,g=p?"$":"$0";return[function(n,r){var i=s(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!p&&h||"string"==typeof r&&-1===r.indexOf(g)){var s=n(t,e,this,r);if(s.done)return s.value}var v=i(e),_=String(this),y="function"==typeof r;y||(r=String(r));var m=v.global;if(m){var b=v.unicode;v.lastIndex=0}for(var w=[];;){var O=l(v,_);if(null===O)break;if(w.push(O),!m)break;""===String(O[0])&&(v.lastIndex=c(_,o(v.lastIndex),b))}for(var E,S="",T=0,I=0;I<w.length;I++){O=w[I];for(var A=String(O[0]),C=d(f(a(O.index),_.length),0),k=[],x=1;x<O.length;x++)k.push(void 0===(E=O[x])?E:String(E));var P=O.groups;if(y){var D=[A].concat(k,C,_);void 0!==P&&D.push(P);var R=String(r.apply(void 0,D))}else R=u(A,_,C,k,P,r);C>=T&&(S+=_.slice(T,C)+R,T=C+A.length)}return S+_.slice(T)}]}))},function(e,t,n){"use strict";n(136);var r=n(29),i=n(9),o=n(53),a=n(13),s=o("species"),c=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),l=o("replace"),d=!!/./[l]&&""===/./[l]("a","$0"),f=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var p=o(e),h=!i((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=h&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!g||"replace"===e&&(!c||!u||d)||"split"===e&&!f){var v=/./[p],_=n(p,""[e],(function(e,t,n,r,i){return t.exec===RegExp.prototype.exec?h&&!i?{done:!0,value:v.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),y=_[0],m=_[1];r(String.prototype,e,y),r(RegExp.prototype,p,2==t?function(e,t){return m.call(e,this,t)}:function(e){return m.call(e,this)})}l&&a(RegExp.prototype[p],"sham",!0)}},function(e,t,n){"use strict";var r=n(24),i=n(137);r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},function(e,t,n){"use strict";var r,i,o=n(138),a=n(139),s=n(34),c=RegExp.prototype.exec,u=s("native-string-replace",String.prototype.replace),l=c,d=(r=/a/,i=/b*/g,c.call(r,"a"),c.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||f)&&(l=function(e){var t,n,r,i,a=this,s=f&&a.sticky,l=o.call(a),h=a.source,g=0,v=e;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),v=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(h="(?: "+h+")",v=" "+v,g++),n=new RegExp("^(?:"+h+")",l)),p&&(n=new RegExp("^"+h+"$(?!\\s)",l)),d&&(t=a.lastIndex),r=c.call(s?n:a,v),s?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:d&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),p&&r&&r.length>1&&u.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),e.exports=l},function(e,t,n){"use strict";var r=n(19);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(9);function i(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(141).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(46),i=n(5),o=function(e){return function(t,n){var o,a,s=String(i(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}};e.exports={codeAt:o(!1),charAt:o(!0)}},function(e,t,n){var r=n(4),i=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var d=n+e.length,f=c.length,p=s;return void 0!==u&&(u=r(u),p=a),o.call(l,p,(function(r,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=u[o.slice(1,-1)];break;default:var s=+o;if(0===s)return r;if(s>f){var l=i(s/10);return 0===l?r:l<=f?void 0===c[l-1]?o.charAt(1):c[l-1]+o.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},function(e,t,n){var r=n(7),i=n(137);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var o=n.call(e,t);if("object"!=typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(e,t)}},function(e,t,n){"use strict";var r=n(24),i=n(102).trim;r({target:"String",proto:!0,forced:n(145)("trim")},{trim:function(){return i(this)}})},function(e,t,n){var r=n(9),i=n(103);e.exports=function(e){return r((function(){return!!i[e]()||"​᠎"!="​᠎"[e]()||i[e].name!==e}))}},function(e,t,n){"use strict";var r=n(24),i=n(102).end,o=n(145)("trimEnd"),a=o?function(){return i(this)}:"".trimEnd;r({target:"String",proto:!0,forced:o},{trimEnd:a,trimRight:a})},function(e,t,n){"use strict";var r=n(24),i=n(102).start,o=n(145)("trimStart"),a=o?function(){return i(this)}:"".trimStart;r({target:"String",proto:!0,forced:o},{trimStart:a,trimLeft:a})},function(e,t,n){n(149)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(24),i=n(11),o=n(14),a=n(150),s=n(151),c=n(89),u=n(92),l=n(21),d=n(13),f=n(45),p=n(93),h=n(152),g=n(20),v=n(3),_=n(111),y=n(18),m=n(67),b=n(78),w=n(42).f,O=n(154),E=n(155).forEach,S=n(96),T=n(15),I=n(25),A=n(31),C=n(156),k=A.get,x=A.set,P=T.f,D=I.f,R=Math.round,j=i.RangeError,N=c.ArrayBuffer,M=c.DataView,L=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,F=s.TypedArray,U=s.TypedArrayPrototype,W=s.aTypedArrayConstructor,V=s.isTypedArray,G="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var n=0,r=t.length,i=new(W(e))(r);r>n;)i[n]=t[n++];return i},Y=function(e,t){P(e,t,{get:function(){return k(this)[t]}})},q=function(e){var t;return e instanceof N||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},K=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},J=function(e,t){return K(e,t=g(t,!0))?l(2,e[t]):D(e,t)},X=function(e,t,n){return!(K(e,t=g(t,!0))&&y(n)&&v(n,"value"))||v(n,"get")||v(n,"set")||n.configurable||v(n,"writable")&&!n.writable||v(n,"enumerable")&&!n.enumerable?P(e,t,n):(e[t]=n.value,e)};o?(L||(I.f=J,T.f=X,Y(U,"buffer"),Y(U,"byteOffset"),Y(U,"byteLength"),Y(U,"length")),r({target:"Object",stat:!0,forced:!L},{getOwnPropertyDescriptor:J,defineProperty:X}),e.exports=function(e,t,n){var o=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,g=i[s],v=g,_=v&&v.prototype,T={},I=function(e,t){P(e,t,{get:function(){return function(e,t){var n=k(e);return n.view[c](t*o+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var i=k(e);n&&(r=(r=R(r))<0?0:r>255?255:255&r),i.view[l](t*o+i.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};L?a&&(v=t((function(e,t,n,r){return u(e,v,s),C(y(t)?q(t)?void 0!==r?new g(t,h(n,o),r):void 0!==n?new g(t,h(n,o)):new g(t):V(t)?z(v,t):O.call(v,t):new g(p(t)),e,v)})),b&&b(v,F),E(w(g),(function(e){e in v||d(v,e,g[e])})),v.prototype=_):(v=t((function(e,t,n,r){u(e,v,s);var i,a,c,l=0,d=0;if(y(t)){if(!q(t))return V(t)?z(v,t):O.call(v,t);i=t,d=h(n,o);var g=t.byteLength;if(void 0===r){if(g%o)throw j(H);if((a=g-d)<0)throw j(H)}else if((a=f(r)*o)+d>g)throw j(H);c=a/o}else c=p(t),i=new N(a=c*o);for(x(e,{buffer:i,byteOffset:d,byteLength:a,length:c,view:new M(i)});l<c;)I(e,l++)})),b&&b(v,F),_=v.prototype=m(U)),_.constructor!==v&&d(_,"constructor",v),B&&d(_,B,s),T[s]=v,r({global:!0,forced:v!=g,sham:!L},T),G in v||d(v,G,o),G in _||d(_,G,o),S(s)}):e.exports=function(){}},function(e,t,n){var r=n(11),i=n(9),o=n(119),a=n(151).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!o((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||i((function(){return 1!==new c(new s(2),1,void 0).length}))},function(e,t,n){"use strict";var r,i=n(90),o=n(14),a=n(11),s=n(18),c=n(3),u=n(111),l=n(13),d=n(29),f=n(15).f,p=n(75),h=n(78),g=n(53),v=n(36),_=a.Int8Array,y=_&&_.prototype,m=a.Uint8ClampedArray,b=m&&m.prototype,w=_&&p(_),O=y&&p(y),E=Object.prototype,S=E.isPrototypeOf,T=g("toStringTag"),I=v("TYPED_ARRAY_TAG"),A=i&&!!h&&"Opera"!==u(a.opera),C=!1,k={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},x={BigInt64Array:8,BigUint64Array:8},P=function(e){if(!s(e))return!1;var t=u(e);return c(k,t)||c(x,t)};for(r in k)a[r]||(A=!1);if((!A||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},A))for(r in k)a[r]&&h(a[r],w);if((!A||!O||O===E)&&(O=w.prototype,A))for(r in k)a[r]&&h(a[r].prototype,O);if(A&&p(b)!==O&&h(b,O),o&&!c(O,T))for(r in C=!0,f(O,T,{get:function(){return s(this)?this[I]:void 0}}),k)a[r]&&l(a[r],I,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:C&&I,aTypedArray:function(e){if(P(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(S.call(w,e))return e}else for(var t in k)if(c(k,r)){var n=a[t];if(n&&(e===n||S.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in k){var i=a[r];i&&c(i.prototype,e)&&delete i.prototype[e]}O[e]&&!n||d(O,e,n?t:A&&y[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(h){if(n)for(r in k)(i=a[r])&&c(i,e)&&delete i[e];if(w[e]&&!n)return;try{return d(w,e,n?t:A&&_[e]||t)}catch(e){}}for(r in k)!(i=a[r])||i[e]&&!n||d(i,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(k,t)||c(x,t)},isTypedArray:P,TypedArray:w,TypedArrayPrototype:O}},function(e,t,n){var r=n(153);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(46);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(4),i=n(45),o=n(110),a=n(109),s=n(61),c=n(151).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,d,f,p=r(e),h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,_=o(p);if(null!=_&&!a(_))for(f=(d=_.call(p)).next,p=[];!(l=f.call(d)).done;)p.push(l.value);for(v&&h>2&&(g=s(g,arguments[2],2)),n=i(p.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=v?g(p[t],t):p[t];return u}},function(e,t,n){var r=n(61),i=n(28),o=n(4),a=n(45),s=n(63),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,p=5==e||d;return function(h,g,v,_){for(var y,m,b=o(h),w=i(b),O=r(g,v,3),E=a(w.length),S=0,T=_||s,I=t?T(h,E):n||f?T(h,0):void 0;E>S;S++)if((p||S in w)&&(m=O(y=w[S],S,b),e))if(t)I[S]=m;else if(m)switch(e){case 3:return!0;case 5:return y;case 6:return S;case 2:c.call(I,y)}else switch(e){case 4:return!1;case 7:c.call(I,y)}return d?-1:u||l?l:I}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t,n){var r=n(18),i=n(78);e.exports=function(e,t,n){var o,a;return i&&"function"==typeof(o=t.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(e,a),e}},function(e,t,n){n(149)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(149)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(150);(0,n(151).exportTypedArrayStaticMethod)("from",n(154),r)},function(e,t,n){"use strict";var r=n(151),i=n(150),o=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(o(this))(t);t>e;)n[e]=arguments[e++];return n}),i)},function(e,t,n){var r=n(11),i=n(168),o=n(65),a=n(13),s=n(53),c=s("iterator"),u=s("toStringTag"),l=o.values;for(var d in i){var f=r[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(e){p[c]=l}if(p[u]||a(p,u,d),i[d])for(var h in o)if(p[h]!==o[h])try{a(p,h,o[h])}catch(e){p[h]=o[h]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){n(170)},function(e,t,n){"use strict";var r=n(24),i=n(75),o=n(78),a=n(67),s=n(13),c=n(21),u=n(108),l=function(e,t){var n=this;if(!(n instanceof l))return new l(e,t);o&&(n=o(new Error(void 0),i(n))),void 0!==t&&s(n,"message",String(t));var r=[];return u(e,r.push,{that:r}),s(n,"errors",r),n};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),r({global:!0},{AggregateError:l})},function(e,t,n){n(172)},function(e,t,n){n(24)({global:!0},{globalThis:n(11)})},function(e,t,n){n(174)},function(e,t,n){"use strict";var r=n(24),i=n(62),o=n(125),a=n(127),s=n(108);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=o.f(t),r=n.resolve,c=n.reject,u=a((function(){var n=i(t.resolve),o=[],a=0,c=1;s(e,(function(e){var i=a++,s=!1;o.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,o[i]={status:"fulfilled",value:e},--c||r(o))}),(function(e){s||(s=!0,o[i]={status:"rejected",reason:e},--c||r(o))}))})),--c||r(o)}));return u.error&&c(u.value),n.promise}})},function(e,t,n){n(176)},function(e,t,n){"use strict";var r=n(24),i=n(62),o=n(40),a=n(125),s=n(127),c=n(108),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),r=n.resolve,l=n.reject,d=s((function(){var n=i(t.resolve),a=[],s=0,d=1,f=!1;c(e,(function(e){var i=s++,c=!1;a.push(void 0),d++,n.call(t,e).then((function(e){c||f||(f=!0,r(e))}),(function(e){c||f||(c=!0,a[i]=e,--d||l(new(o("AggregateError"))(a,u)))}))})),--d||l(new(o("AggregateError"))(a,u))}));return d.error&&l(d.value),n.promise}})},function(e,t,n){n(178)},function(e,t,n){"use strict";var r=n(24),i=n(73),o=n(5),a=n(45),s=n(62),c=n(19),u=n(7),l=n(179),d=n(138),f=n(13),p=n(9),h=n(53),g=n(98),v=n(140),_=n(31),y=n(35),m=h("matchAll"),b="RegExp String",w="RegExp String Iterator",O=_.set,E=_.getterFor(w),S=RegExp.prototype,T=S.exec,I="".matchAll,A=!!I&&!p((function(){"a".matchAll(/./)})),C=i((function(e,t,n,r){O(this,{type:w,regexp:e,string:t,global:n,unicode:r,done:!1})}),b,(function(){var e=E(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return T.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=v(n,a(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),k=function(e){var t,n,r,i,o,s,u=c(this),l=String(e);return t=g(u,RegExp),void 0===(n=u.flags)&&u instanceof RegExp&&!("flags"in S)&&(n=d.call(u)),r=void 0===n?"":String(n),i=new t(t===RegExp?u.source:u,r),o=!!~r.indexOf("g"),s=!!~r.indexOf("u"),i.lastIndex=a(u.lastIndex),new C(i,l,o,s)};r({target:"String",proto:!0,forced:A},{matchAll:function(e){var t,n,r,i=o(this);if(null!=e){if(l(e)&&!~String(o("flags"in S?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(A)return I.apply(i,arguments);if(void 0===(n=e[m])&&y&&"RegExp"==u(e)&&(n=k),null!=n)return s(n).call(e,i)}else if(A)return I.apply(i,arguments);return t=String(i),r=new RegExp(e,"g"),y?k.call(r,t):r[m](t)}}),y||m in S||f(S,m,k)},function(e,t,n){var r=n(18),i=n(7),o=n(53)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){n(181)},function(e,t,n){"use strict";var r=n(24),i=n(5),o=n(179),a=n(138),s=n(142),c=n(53),u=n(35),l=c("replace"),d=RegExp.prototype,f=Math.max,p=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,c,h,g,v,_,y,m=i(this),b=0,w=0,O="";if(null!=e){if((n=o(e))&&!~String(i("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[l]))return r.call(e,m,t);if(u&&n)return String(m).replace(e,t)}for(c=String(m),h=String(e),(g="function"==typeof t)||(t=String(t)),v=h.length,_=f(1,v),b=p(c,h,0);-1!==b;)y=g?String(t(h,b,c)):s(h,c,b,[],void 0,t),O+=c.slice(w,b)+y,w=b+v,b=p(c,h,b+_);return w<c.length&&(O+=c.slice(w)),O}})}]);var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"EventEmitter",(function(){return i}));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var t,n,i;return t=e,(n=[{key:"emit",value:function(e,t){if(this.listeners[e]&&this.listeners[e].length>0){var n=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(n=!0)})),n&&(this.listeners[e]=this.listeners[e].filter((function(e){return 0!==e.count}))),!0}return!1}},{key:"many",value:function(e,t,n){if(!t)return this;var r={count:n,cb:t};return this.listeners[e]?this.listeners[e].push(r):this.listeners[e]=[r],this}},{key:"on",value:function(e,t){this.many(e,t,-1)}},{key:"once",value:function(e,t){this.many(e,t,1)}},{key:"off",value:function(e,t){for(var n=0;n<this.listeners[e].length;n++){var r=this.listeners[e][n];if(r.cb===t)return void(r.count=0)}}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";n.r(t),function(e){var n=e.__wxLibrary,r=e.__wxConfig,i=n.envType,o=n.contextType,a="Service"===i,s="WebView"===i,c="Worker"===i,u="Widget"===i,l=s||a&&0===o.indexOf("App:"),d=a&&0===o.indexOf("Game:"),f=c&&"function"==typeof e.workerInvokeJsApi,p=!!r.isIsolateContext,h=a&&(p&&o.indexOf("Uncertain")>=0||o.indexOf("MainContext")>=0),g=a&&o.indexOf("SubContext")>=0,v=h||g,_=s||h,y="wxlib"===r.workerContentType,m=function(){var e=r.platform;if(!e&&s){var t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),b="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version;t.default={platform:m,SDKVersion:b,isIsolateContext:v,isGame:d,isApp:l,isMainContext:h,isSubContext:g,isSafeEnv:_,isService:a,isWebView:s,isWorker:c,isWidget:u,isSupportWorkerAPI:f,typeStr:i,isWXLibWorker:y}}.call(this,n(1))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o}).apply(null,arguments)}n.r(t),n.d(t,"default",(function(){return o}))},function(e,t,n){"use strict";n.r(t),function(e){var r=n(4),i=n(2),o=n(0),a=n(3),s=new o.EventEmitter,c={},u="configReady",l="libraryReady";function d(e,t){e in c?t(c[e]):h.once("lifeCycle:"+e,t)}function f(e,t){return!(e in c)&&(c[e]=t,h.emit("lifeCycle:"+e,t))}var p=e,h={EventEmitter:o.EventEmitter,on:s.on.bind(s),emit:s.emit.bind(s),once:s.once.bind(s),onConfigReady:d.bind(null,u),emitConfigReady:f.bind(null,u),get isConfigReady(){return u in c},onLibraryReady:d.bind(null,l),emitLibraryReady:f.bind(null,l),get isLibraryReady(){return l in c},onBridgeReady:function(e){void 0!==WeixinJSBridge?e():"object"===("undefined"==typeof document?"undefined":Object(i.default)(document))&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:a.default,global:p};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return p}:Object(r.default)(__Function__,Array.prototype.slice.call(arguments))},Function.prototype=__Function__.prototype),e.__wxLibrary.onEnd=function(){h.emitLibraryReady({})},t.default=h}.call(this,n(1))}]).default,nativeTrans=function(e){var t="webViewCreated",n="nativeTransFail",r="nativeTransReady";console;if("object"!=typeof e.ntrans)return e.__nativeTransEnabled__=!1,{enabled:!1,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n};e.__nativeTransEnabled__=!0;var i=e.ntrans,o=i.id,a=o===i.serviceId,s={};function c(e){a?e(i.serviceId):Foundation.onConfigReady((function(){e(i.serviceId)}))}function u(e,t){var n=s[e]=s[e]||{connectedTime:0,dataQueue:[],initTime:Date.now()};return"number"==typeof t&&(n.id=t),s[e]}function l(e,t){return{event:e,param:t,id:o,sendTime:Date.now()}}return c((function(){delete e.ntrans})),{enabled:!0,publishToTargetWithQueue:function(e,t,n){var r=u(e),o=l(t,n);r.connectedTime?i.postMessage(r.id,o):Date.now()-r.initTime>3e5?r.dataQueue=[]:r.dataQueue.push(o)},packMessage:l,broadcastMessage:function(e,t){i.broadcastMessage(e,t)},onMessage:function(e,t){t!==o&&(i.setMessageListener(),o=t),i.setMessageListener(t,(function(t){"function"==typeof e&&e(t.event,t.param,t.id,t.sendTime)}))},registerTarget:function(e,t){var n=u(e,t);n.connectedTime=Date.now(),i.postMessage(n.id,l(r)),n.dataQueue.forEach((function(e){e.sendTime=Date.now(),i.postMessage(n.id,e)})),n.dataQueue=[]},onceServiceConfirmed:c,revertTargets:function(){for(var e in s)s[e].dataQueue.forEach((function(t){WeixinJSBridge.publish(t.event,t.param,[e])})),s[e].dataQueue=[];s={}},isService:a,get id(){return o},SERVICE_TAG:"AppService",EVT_NTRANS_READY:r,EVT_WV_CREATED:t,EVT_NTRANS_FAIL:n,version:i.version,addGroup:i.addGroup.bind(i)}}(this),WeixinJSBridge=function(e){"function"==typeof logxx&&logxx("jsbridge start");var t="undefined"!=typeof __devtoolssubcontext&&__devtoolssubcontext;if(e.navigator&&e.navigator.userAgent){var n=e.navigator.userAgent;(n.indexOf("appservice")>-1||n.indexOf("wechatdevtools")>-1)&&(t=!0)}if(t&&!Foundation.env.isWorker||e.useGlobalJSBridge){var r=e.WeixinJSBridge;return delete e.WeixinJSBridge,r}if(e.OSUseGlobalJSBridge)return r=e.WeixinJSBridge;var i=e.__wxConfig||{},o=i.isWK,a={},s=0,c={},u={},l="custom_event_",d={},f=e.webkit,p=e.WeixinJSCore;"object"==typeof p&&"function"!=typeof p.publishHandler&&(p.publishHandler=function(){}),Foundation.env.isWorker&&Foundation.env.isSupportWorkerAPI&&(p={invokeHandler:e.workerInvokeJsApi},s=1<<25),delete e.webkit,e.WeixinJSCore={invokeHandler:function(){},publishHandler:function(){},setTimerHandler:function(){},clearTimerHandler:function(){}};var h=JSON.parse,g=JSON.stringify,v=function(e,t){if(void 0!==e&&"function"==typeof a[t]&&""!==e&&null!==e){if("string"==typeof e)try{e=h(e),e=WeixinNativeBuffer.unpack(e)}catch(t){e={}}var n=a[t];delete a[t],"function"==typeof n&&n(e)}},_=function(e,t,n,r=!1){var i=t;r||(t=WeixinNativeBuffer.pack(t),i=g(t||{}));var c=++s;a[c]=n,function(e,t,n){if(p)i=p.invokeHandler(e,t,n),v(i,n);else{var r={event:e,paramsString:t,callbackId:n};if(o){var i=prompt("webgame_invoke",g(r));v(i,n)}else f.messageHandlers.invokeHandler.postMessage(r)}}(e,i,c)},y=function(e,t){t=WeixinNativeBuffer.unpack(t);var n=a[e];delete a[e],"function"==typeof n&&n(t)},m=function(e,t){c[e]=t},b=function(e,t,n){!function(e,t,n){p?p.publishHandler(e,g(t),g(n)):f.messageHandlers.publishHandler.postMessage({event:e,paramsString:g(t),webviewIds:g(n)})}(l+e,t,n)},w=function(e,t){d[l+e]=t},O=function(e,t,n,r){var i,o;t=WeixinNativeBuffer.unpack(t),-1!=e.indexOf(l)?i=d[e]:(i=c[e],o=u[e]),"function"==typeof i&&i(t,n,r),o&&o.forEach((e=>e(t,n,r)))};return e.WeixinJSBridge={get invokeCallbackHandler(){return y},get subscribeHandler(){return O}},i&&i.clientDebug&&(e.WeixinJSBridge={on:m,publish:b,invoke:_,subscribe:w,get invokeCallbackHandler(){return y},get subscribeHandler(){return O}}),{on:m,publish:b,invoke:_,subscribe:w,loadJsFiles:function(e,t){_("loadJsFiles",{paths:e},t)},addEventListener:function(e,t){u[e]?u[e].add(t):u[e]=new Set([t])},removeEventListener:function(e,t){u[e]&&(t?u[e].delete(t):delete u[e])},get invokeCallbackHandler(){return y},get subscribeHandler(){return O}}}(this);Foundation.onBridgeReady((function(){var e,t=String.prototype.replace,n=WeixinJSBridge.publish,r=[];WeixinJSBridge.publish=function(i,o,a){var s;Foundation.isConfigReady||nativeTrans.enabled?(a=function(e){if(Array.isArray(e)){var t=e.filter((function(e){return null!=e}));if(0===e.length||0!==t.length)return t}}(a||[]))&&(s=i||"",i=t.call(s,/["'\\]/g,""),e&&e(i,o,a)||n.call(WeixinJSBridge,i,o,a)):r.push([i,o,a])},Foundation.onConfigReady((function(){r.forEach((function(e){WeixinJSBridge.publish.apply(WeixinJSBridge,e)})),r=[]})),WeixinJSBridge.setCustomPublishHandler=function(t){e=t}})),function(e){var t=JSON.parse,n=JSON.stringify,r=Object.defineProperty,i=Foundation.env.isSubContext,o=Foundation.env.isSafeEnv,a={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function c(e,t,n,i){r(e,n,{configurable:!0,enumerable:!0,get:function(){if(n in t)return t[n];try{(new Error).stack,"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+n,force:!0})}catch(e){}try{return"function"!=typeof i?i:i()}catch(e){return}},set:function(e){t[n]=e}})}function u(e){return t(n(e))}var l=!0===(__wxConfig=void 0!==e.__wxConfig?o?Object.assign({},e.__wxConfig):u(e.__wxConfig):{}).preload,d=!1,f=[],p=[],h=Foundation.env.typeStr;Foundation.env.isSubContext&&(h="SubContext");function g(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var v=function(e){p.push(e)},_=function(e){d?void 0!==__wxConfig&&g(e,__wxConfig):"function"==typeof e&&f.push(e)},y=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var n=t.subPackages||t.subpackages;return n&&n.length>0&&(n.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=n),d&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(i||(__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,a[e+".html"]=u(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},m=function(e){return e.onReady=_,e.beforeReady=v,i||(e.preload=l),e.isReady=d,e.isSubContext=i,e.envTag=h,e.isSafeContext=o,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},b=function(){void 0===e.__wxConfig||d||(d=!0,Object.assign(__wxConfig,o?e.__wxConfig:u(e.__wxConfig)),__wxConfig=m(__wxConfig),__wxConfig=y(__wxConfig),function(e){if(!p.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(p).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),p=[]}((function(){__wxConfig.onReadyStart=Date.now(),f.forEach((function(e){g(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),f=[],function(){if(!o){var t=e.__wxConfig,n={},r={};a=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(a={});try{c(r,n,"deprecated",!0),s.forEach((function(e){if(e in t){var i=t[e];switch(e){case"page":c(r,n,e,a);break;case"env":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:i.USER_DATA_PATH}}));break;case"accountInfo":c(r,n,e,{appId:i.appId,icon:i.icon,nickname:i.nickname});break;case"appLaunchInfo":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":c(r,n,e,{maxRequestConcurrent:i.maxRequestConcurrent,maxUploadConcurrent:i.maxUploadConcurrent,maxDownloadConcurrent:i.maxDownloadConcurrent,maxWorkerConcurrent:i.maxWorkerConcurrent,maxWebsocketConnect:i.maxWebsocketConnect});break;default:c(r,n,e,i)}}})),e.__wxConfig=r}catch(n){e.__wxConfig=t}}}()})))};function w(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=m(__wxConfig),__wxConfig=y(__wxConfig),Foundation.onConfigReady((function(){b()})),i?__wxConfig.__readyHandler=w:l?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",w)})):Foundation.onLibraryReady(w)}(this),function(e){function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var n,r,i=(n=[],r=[],{set:function(e,t){n.push(e),r.push(t)},get:function(e){var t=n.indexOf(e);if(-1!==t)return r[t]},delete:function(e){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),r.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},"android"===__wxConfig.platform?function(e){var n=i.get(e.promise);if(n)n.event=e;else{var r={event:e};setTimeout((function(){0===r.event.type&&t(r.event),i.delete(r.event.promise)}),0),i.set(e.promise,r)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var NativeBuffer=function(e){var t=e.WeixinNativeBuffer,n=e.getNativeBufferId,r=e.setNativeBuffer,i=e.getNativeBuffer,o=__wxConfig||{},a=!1;"android"===o.platform||"windows"===o.platform||"mina"===o.platform?a="function"==typeof n&&"function"==typeof r&&"function"==typeof i&&o.nativeBufferEnabled:"ios"!==o.platform&&"mac"!==o.platform||(a=null!=t);var s=function(e){var i={};return a?i.id=function(e){var i=e.__proto__;e.__proto__=ArrayBuffer.prototype;var o=-1;return t?o=t.new(e):"function"==typeof n&&"function"==typeof r&&(o=n(),r(o,e)),e.__proto__=i,o}(e):i.base64=f(e),i},c=function(e){var n;if(null!=e)return a&&void 0!==e.id?(n=e.id,t?t.get(n):"function"==typeof i?i(n):void 0):void 0!==e.base64?p(e.base64):void 0},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=l||function(e){for(var t,n,r=String(e),i="",o=0,a=u;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if((n=r.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return i},d=d||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,i,o=0,a=0;i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=u.indexOf(i);return n},f=function(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return l(t)},p=function(e){for(var t=d(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer},h=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]};return delete e.WeixinNativeBuffer,delete e.getNativeBufferId,delete e.setNativeBuffer,delete e.getNativeBuffer,{new:s,get:c,useCompatibleMode:function(e){t&&t.useCompatibleMode(e)},pack:function(e){if(null==e)return e;var t=[];for(var n in e){var r=e[n];if(void 0!==r&&"ArrayBuffer"===h(r)&&void 0!==r.byteLength)(o=s(r)).key=n,t.push(o)}if(t.length>0){for(var i=0;i<t.length;i++){var o;delete e[(o=t[i]).key]}e.__nativeBuffers__=t}return e},unpack:function(e){if(null==e||null==e.__nativeBuffers__)return e;var t=e.__nativeBuffers__;delete e.__nativeBuffers__;for(var n=0;n<t.length;n++){var r=t[n];if(null!=r){var i=c(r);void 0!==i&&"ArrayBuffer"===h(i)&&(e[r.key]=i)}}return e},packWithBase64:function(e){if(null==e)return e;var t=[];for(var n in e){var r=e[n];if(void 0!==r&&"ArrayBuffer"===h(r)&&void 0!==r.byteLength)(o={base64:f(r)}).key=n,t.push(o)}if(t.length>0){for(var i=0;i<t.length;i++){var o;delete e[(o=t[i]).key]}e.__nativeBuffers__=t}return e}}}(this),WeixinNativeBuffer=NativeBuffer;NativeBuffer=null;var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var s=Foundation,c=s.onConfigReady,u=s.env,l=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function d(e,t){this.num=e,this.type=t}var f,p,h,g,v,_,y={ALL:new d(Number.MIN_VALUE,"ALL"),DEBUG:new d(5e3,"DEBUG"),LOG:new d(1e4,"LOG"),INFO:new d(2e4,"INFO"),WARN:new d(3e4,"WARN"),ERROR:new d(4e4,"ERROR"),OFF:new d(Number.MAX_VALUE,"OFF")},m=function(e,t){return{debug:e(y.DEBUG,t),log:e(y.LOG,t),info:e(y.INFO,t),warn:e(y.WARN,t),error:e(y.ERROR,t)}},b=y.INFO;if(u.isWorker||u.isWidget){l=Object.assign({createLogger:function(){return wxConsole}},wxConsole)}else u.isSubContext&&u.isIsolateContext?(f=[],p=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];f.push({level:e,logs:r,category:t})}},c((function e(){setTimeout((function(){var t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(f),f=[]):e()}),1e3)})),l=a(a({},m(p)),{},{createLogger:function(e){return m(p,"string"==typeof e?e:"default")},__isFromMainContext:!1})):(h=__wxConfig.platform,g=[],v=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2),a=("00"+e.getMilliseconds()).slice(-3),s=e.getFullYear()+"-"+t+"-"+n,c=r+":"+i+":"+o+"."+a;return"ios"===h?s+" "+c+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):s+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c},_=function(e,t){var n=e.type;return function(){for(var r,o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];if(t&&Array.prototype.unshift.call(a,"["+t+"]"),(r=wxConsole[n.toLowerCase()]).call.apply(r,[wxConsole].concat(a)),e.num>=b.num){var c=new Date,u=Array.prototype.slice.call(a).map((function(e){switch(i(e)){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}})).join(" ");g&&g.length>1024&&g.shift(),g.push({date:c,type:n,content:u})}}},c((function(){setTimeout((function e(){var t;setTimeout(e,3e3),0!==g.length&&(t=g,"ios"===h?WeixinJSBridge.invoke("systemLog",{dataArray:t.map((function(e){return{message:"\n"+v(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===h&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+v(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),g=[])}),3e3)})),l=a(a({},m(_)),{},{createLogger:function(e){return m(_,"string"==typeof e?e:"default")},__mergeSubContextLogs:function(e){Array.isArray(e)&&e.forEach((function(e){var t=e.level,n=e.logs,r=e.category;_(t,r)(n)}))},__isFromMainContext:!0}));t.default=l}]).default,WeixinWorker=function(e){var t=["request","createSocketTask","operateSocketTask","onSocketTaskStateChange","createRequestTask","createRequestTaskAsync","operateRequestTask","onRequestTaskStateChange","createDownloadTask","createDownloadTaskAsync","operateDownloadTask","onDownloadTaskStateChange","createUploadTask","createUploadTaskAsync","operateUploadTask","onUploadTaskStateChange","getNetworkType","createAudioInstance","createAudioInstanceAsync","operateAudio","destroyAudioInstance","getAudioState","setAudioState","onAudioStateChange","uploadFile","downloadFile","saveFile","getFileInfo","getSavedFileInfo","getSavedFileList","removeSavedFile","readFile","writeFile","mkdir","readdir","rmdir","access","unlink","stat","copyFile","rename","fs_appendFile","fs_appendFileSync","fs_copyFile","fs_copyFileSync","fs_rename","fs_renameSync","getABTestConfig","reportKeyValue","reportIDKey"],n=!1;if(e.navigator&&e.navigator.userAgent){var r=e.navigator.userAgent;(r.indexOf("appservice")>-1||r.indexOf("wechatdevtools")>-1)&&(n=!0)}var i=e.WeAppWorker,o=e.WeixinWorker,a=[],s=[],c=[],u=[],l=[],d={},f=function(e){return d[e]},p=function(e,t){d[e]=t},h=function(e){e=WeixinNativeBuffer.unpack(e),s.forEach((function(t){"function"==typeof t&&t(e)}))},g=function(e,t){t=WeixinNativeBuffer.unpack(t),a.forEach((function(n){"function"==typeof n&&n(e,t)}))},v=function(e,t){c.forEach((function(n){"function"==typeof n&&n(e,t)}))},_=function(e){u.forEach((function(t){"function"==typeof t&&t(e)}))};Foundation.on("error",_),Foundation.on("unhandledRejection",(function(e){l.forEach((function(t){"function"==typeof t&&t(e)}))}));var y={get appServiceMsgHandler(){return h},get workerMsgHandler(){return g},get workerCreatedHandler(){return v},get errorHandler(){return _},get __workerId__(){return o.__workerId__}},m={create:function(e,n){var r,a,s=!(!(n=n||{}).useExperimentalWorker||!i);if(s?(a=i,r=JSON.stringify(n)):(a=o,r={APIList:t}),"function"==typeof a.create){var c=a.create.call(a,e,r);return p(c,a),{workerId:c,useWKWorker:s}}},createWXLibWorker:function(e,n){var r={APIList:t};n.APIList&&(r.APIList=t.concat(n.APIList)),n.type&&(r.type=n.type);var i=o;if("function"==typeof i.createWXLibWorker){var a=i.createWXLibWorker.call(i,e,JSON.stringify(r));return p(a,i),{workerId:a}}},terminate:function(e){var t=f(e);if("function"==typeof t.terminate)return function(e){delete d[e]}(e),t.terminate.call(t,e)},postMsgToAppService:function(e,t){try{!1!==t&&(e="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(e):WeixinNativeBuffer.pack(e),e=JSON.stringify(e)),o.postMsgToAppService(e)}catch(e){console.error(e)}},postMsgToWorker:function(e,t,n){var r=f(e);try{!1!==n&&(t="android"===__wxConfig.platform&&(__wxConfig.clientVersion>=671088640&&__wxConfig.clientVersion<671088697||__wxConfig.clientVersion>=671088704&&__wxConfig.clientVersion<41943120||__wxConfig.clientVersion>=671088736&&__wxConfig.clientVersion<671088896)?WeixinNativeBuffer.packWithBase64(t):WeixinNativeBuffer.pack(t),t=JSON.stringify(t)),r.postMsgToWorker(e,t)}catch(e){console.error(e)}},onWorkerMsg:function(e){a.push(e)},onWorkerCreated:function(e){c.push(e)},onAppServiceMsg:function(e){s.push(e)},onError:function(e){u.push(e)},onUnhandledRejection:function(e){l.push(e)},get WebAssembly(){return o.WebAssembly}};return n&&(m.appServiceMsgHandler=y.appServiceMsgHandler,m.workerMsgHandler=y.workerMsgHandler,m.errorHandler=y.errorHandler,m.__workerId__=y.__workerId__),e.WeixinWorker=y,e.WeAppWorker=y,m}(this),__wxModule__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=void 0;var r=n(6);t.requirePlugin=r.requirePlugin},,,,function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/^plugin:\/\/([A-Za-z0-9_-]+)[\/]?(.*)/;t.parseSchema=function(e){var t=e.match(n);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},t.getModKey=function(e){return e.pluginId+"/"+e.version},t.getModDir=function(e){var t=e.match(/(.*)\/([^\/]+)?$/);return t&&t[1]?t[1]:"./"},t.checkWxConfig=function(){if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")},t.checkSchema=function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")},t.getSchemaFromConfig=function(e){var t=e.match(/([^\/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'+e+'" has not registered.');var n=t[1],r=t[2],i=(__wxConfig.plugins||__wxConfig.gamePlugins)[n];if(void 0===i)throw new Error('Plugin "'+e+'" has not registered.');return{pluginId:i.provider,version:"0",path:r}},t.isAppId=function(e){return null!==e.match(/^wx[0-9a-f]{16}$/)}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=void 0;var r=n(4);t.requirePlugin=function(e){(0,r.checkWxConfig)(),(0,r.checkSchema)(e);var t=function(e){var t="__plugin__/"+e.pluginId;return e.path&&(t+="/"+e.path),t}((0,r.getSchemaFromConfig)(e)),n=requireMiniProgramFile(t);if(void 0===n)throw new Error('Plugin "'+t+'" is not defined.');return n}}]),definePlugin=__wxModule__.definePlugin,requirePlugin=__wxModule__.requirePlugin;!function(e){var t={},n={};define=function(e,n){if(t[e]&&t[e].factory){var r=t[e],i=n.toString();r.factoryString||(r.factoryString=r.factory.toString()),i!==r.factoryString&&(t[e]={status:1,factory:n,factoryString:i})}else t[e]={status:1,factory:n}};var r=function(e){if(e&&__wxConfig.subPackages)for(var t=0,n=__wxConfig.subPackages.length;t<n;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},i=function(e){for(var t=[],n=e.split("/"),r=0,i=n.length;r<i;++r){var o=n[r];if(""!=o&&"."!=o)if(".."==o){if(0==t.length){t=null;break}t.pop()}else r+1<i&&".."==n[r+1]?r++:t.push(o)}return t},o=function(e){var n=i(e+"/index.js").join("/");return t[n]?n:(n=i(e).join("/"),/\.js$/.test(n)||(n+=".js"),t[n]?n:"")},a=function(e){var n=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(e);return function(a){if("string"!=typeof a)throw new Error("require args must be a string");var s=i(n+"/"+a);if("/__wx__/private-api"===a&&(s=i(a)),!s)throw new Error("can not find module : "+a);try{var c=s.join("/");c=function(e,n,r){var a=e;if(/\.js$/.test(a)||(a+=".js"),"string"==typeof a&&t[a])return a;var s=i(n);if(!s)throw new Error("can not find module : "+r);for(var c,u=e.substring(s.join("/").length);s.length;){var l=s.join("/")+"/miniprogram_npm"+u;if(c=o(l))break;s.pop()}return c||(u="/"===u[0]?u:"/"+u,c=o(l="miniprogram_npm"+u)),c||e}(c,n,a);var u=function(e){return"functional-pages"===i(e)[0]};if(u(c)!==u(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+a+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages){var l=r(c),d=r(e);if(l&&l!==d)throw new Error("should not require "+a+" in "+e+" because they are in diffrent subPackages")}return require(c)}catch(e){throw e}}};require=function(r,i){if(void 0===i&&(i=!0),"string"!=typeof r)throw new Error("require args must be a string");var o=t[r];if(!o){var s=-1===r.indexOf("/")?r+"/index.js":r;/\.js$/.test(s="miniprogram_npm/"+s)||(s+=".js"),o=t[s]}if(r.endsWith(".js")||(r+=".js"),!o){var c="/"+r.substr(0,r.length-3)+".appservice.js",u={__wxRoute:e.__wxRoute,__wxAppCurrentFile__:e.__wxAppCurrentFile__,__wxRouteBegin:e.__wxRouteBegin};__subContextEngine__.loadJsFiles([c]),function(t){e.__wxRoute=t.__wxRoute,e.__wxAppCurrentFile__=t.__wxAppCurrentFile__,e.__wxRouteBegin=t.__wxRouteBegin}(u),o=t[r]}if(!o)throw new Error('module "'+r+'" is not defined');var l={exports:{}},d=o.factory;if(!i||n[r])return delete o.exports,o.status=1,n[r]=!0,d&&d(a(r),l,l.exports),l.exports;if(1===o.status){o.exports=l.exports,o.status=2;var f=void 0;try{d&&(f=d(a(r),l,l.exports))}catch(e){throw o.status=1,e}o.exports=void 0!==l.exports?l.exports:f}return o.exports},requireOnce=function(e){return require(e,!1)},e.__modules__=t}(this);var requireMiniProgramFile=require,defineMiniProgramFile=define,JSContext=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.r(t),n.d(t,"ObjDefProp",(function(){return s})),n.d(t,"getDataType",(function(){return c})),n.d(t,"getAllPropertyDescs",(function(){return u}));var r=Object.prototype.toString,i=Object.getPrototypeOf,o=Object.getOwnPropertyNames,a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,c=function(e){return r.call(e).split(" ")[1].split("]")[0]},u=function(e){for(var t=[],n=function(e){o(e).forEach((function(n){var r=a(e,n);void 0!==r&&(r.name=n,t.push(r))}))},r=e;r;r=i(r))n(r);return t}},function(e,t,n){"use strict";n.r(t);var r,i=n(0),o={},a={subscribeHandler:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==e&&e===r){t=t.valueOf();var i=o[t];"function"==typeof i&&i(n)}}},s={__init__:function(e,t){void 0===r&&void 0!==e&&(r=e).register(e,a,t)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(i.getDataType)(t);if("Object"!==n&&"Undefined"!==n)throw new Error("params should be an object.");var o=e.valueOf(),s=t||{};r&&"function"==typeof r.subscribeHandler&&r.subscribeHandler(r,a,o,s)},subscribe:function(e,t){o[e]=t},invokeMainContextMethodSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=Object(i.getDataType)(t);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");var a,s=e.valueOf();return a=n?t||{}:void 0===t?{}:t,r.syncMethodHandler(r,s,a,n)}};t.default=s},function(e,t,n){"use strict";n.r(t),t.default={alloc:function(){return-9999},create:function(){return-9999},destroy:function(){return-9999},publish:function(){},subscribe:function(){},supportAlloc:function(){}}},function(e,t,n){"use strict";n.r(t);var r,i,o,a,s,c,u=n(0),l=["constructor","__proto__","__defineGetter__","__defineSetter__"],d="undefined"!=typeof WeakMap?new WeakMap:{},f="undefined"!=typeof WeakMap?new WeakMap:{},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f.get(e);return void 0!==n||(n=function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0;o<r.length;o++){var a=r[o];r[o]=g(a)}var s=t?d.get(this):void 0,c=e.call.apply(e,[s].concat(r));return g(c)},f.set(e,n)),n},h=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(g(r))}return t},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(u.getDataType)(e);return"String"===n||"Number"===n||"Boolean"===n?e.valueOf():"Object"===n?new b(e):"Array"===n?h(e):"Function"===n?p(e,t):"Undefined"!==n&&"Null"===n?null:void 0},v=function(e){return function(){var t=d.get(this);if(void 0!==t){if(null===t)return null;var n=t[e];return g(n,!0)}}},_=function(e){return function(t){var n=d.get(this);if(void 0!==n)return null===n?null:void(n[e]=g(t))}},y=function(e){for(var t=0;t<l.length;t++){if(l[t]===e)return!0}return!1},m=function(){for(var e=d.get(this),t=Object(u.getAllPropertyDescs)(e),n=0;n<t.length;n++){var r=t[n],i=r.name;y(i)||(i in this||(delete r.value,delete r.writable,Object(u.ObjDefProp)(this,i,Object.assign(r,{get:v(i),set:_(i)}))))}},b=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.set(this,t),m.call(this)},w=b,O={},E={},S=[],T=0,I=[],A=function(e,t,n){if(void 0!==t&&void 0!==e&&e===r){var i=void 0!==n?n:++T;return E[i]=t,S.push(i),I.forEach((function(e){"function"==typeof e&&e(i)})),i}},C=function(e,t,n,i){if(void 0!==e&&e===r){var o=function(e){for(var t=S.length,n=0;n<t;n++){var r=S[n];if(E[r]===e)return r}}(t);if(void 0!==o){var a=O[n];"function"==typeof a&&a(i,o)}}},k={},x=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e&&e===r){i||(t=t.valueOf(),n=new w(n));var o=k[t];return"function"==typeof o?o(n):void 0}},P={__init__:function(e){void 0===r&&void 0!==e&&((r=e).register=A,r.subscribeHandler=C,r.syncMethodHandler=x,i=r.alloc,o=r.create,a=r.destroy,s=r.evaluateScriptFile,c=r.loadJsFiles,delete r.alloc,delete r.create,delete r.destroy,delete r.evaluateScriptFile,delete r.loadJsFiles)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=Object(u.getDataType)(t);if("Object"!==i&&"Undefined"!==i)throw new Error("params should be an object.");n.forEach((function(n){var i=E[n];i&&i.subscribeHandler(r,e,t)}))},subscribe:function(e,t){O[e]=t},onRegister:function(e){I.push(e)},evaluateScriptFile:function(e,t,n){return s(e,t,n)},batchLoadJsFiles:function(e,t){if(void 0===c||"function"!=typeof c)return"failed: loadJsFiles not supported";try{return c(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:function(e,t){return"function"==typeof i?i.call(r,e,t):-9999},create:function(e,t){return"function"==typeof o?o.call(r,e,t):-9999},destroy:function(e,t){return"function"==typeof a?a(e,t):-9999},isAsync:function(){return r&&!0===r.async},supportAlloc:function(){return"function"==typeof i},registerSyncMethod:function(e,t){k[e]=t}};t.default=P},function(e,t,n){"use strict";n.r(t),function(e){var r,i=n(3),o=n(1),a=n(2);if(void 0===e)throw new Error("js-context: global is undefined");void 0!==e.WeixinJSContext?(r=Object.getPrototypeOf(e.WeixinJSContext)===Object.prototype?i.default:o.default).__init__(WeixinJSContext,e.WeixinJSContextId):r=a.default;delete r.__init__,delete e.WeixinJSContext,delete e.WeixinJSContextId,t.default=r}.call(this,n(5))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]).default,Protect=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){(function(t){var r=n(5),i=n(6).reportDeprecatedAPI,o=Function;e.exports={hijack:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==t.Function){var i=function(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return n?o:{}}},o={};i.prototype=t.Function.prototype,t.Function.prototype.constructor=i,t.Function=i}var a=globalThis;if("undefined"!=typeof eval&&(eval=void 0),"undefined"!=typeof setTimeout&&e){var s=setTimeout;setTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("function"!=typeof e)throw new TypeError("setTimeout expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setTimeout callback function"),i=[].slice.call(arguments,2);return s((function(){n.apply(a,i)}),t)};var c=setInterval;setInterval=function(e,t){if("function"!=typeof e)throw new TypeError("setInterval expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),i=[].slice.call(arguments,2);return c((function(){n.apply(a,i)}),t)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((function(e){if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:function(){return i("globalWa"),t},set:function(t){Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}},originFunction:o}}).call(this,n(3))},function(e,t,n){n.r(t),function(e){n.d(t,"doNotWriteObj",(function(){return o}));var r=n(0),i=e.Object.setPrototypeOf,o=function e(t,n,o,a){if(t&&n&&-1===n.indexOf("constructor")){var s;try{s=t[n]}catch(e){return}if(s){var c=Object.getOwnPropertyDescriptor(t,n);if(a||c||"__proto__"===n){c=c||{enumerable:!!a,configurable:!0};var u=Object(r.default)(s);if(s&&("function"===u||"object"===u)&&(c.configurable&&Object.defineProperty(t,n,{get:function(){return s},set:function(c){if(this!==t)return e(this,n,o,!0),void(this[n]=c);if(s!==c)if(a)try{s=c,"__proto__"===n&&i(this,c)}catch(e){}else console.error("[non-writable] modification of global variable '"+o+"' is not allowed when using plugins at app.json."),"object"===(void 0===Reporter?"undefined":Object(r.default)(Reporter))&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:o}),Reporter.reportIDKey({key:"global_objs_readonly"}))},enumerable:c.enumerable,configurable:!!a&&c.configurable}),!a&&"__proto__"!==n)){var l=Object.getOwnPropertyNames(s);"object"===Object(r.default)(s)&&e(s,"__proto__",o+".__proto__",!1);for(var d=0;d<l.length;++d){var f=l[d];e(s,f,o+"."+f,!1)}}}}}}}.call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){if("undefined"==typeof navigator){try{new Function("const GeneratorFunction = Object.getPrototypeOf(function *() {}).constructor; const f = new GeneratorFunction('', 'console.log(0)'); f().__proto__.__proto__.next = () => {};")()}catch(e){}try{new Function("const AsyncFunctionProto = Object.getPrototypeOf(async function() {}); Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function(){} });")()}catch(e){}try{new Function("const AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function *() {}); Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function(){} });")()}catch(e){}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"reportDeprecatedAPI",(function(){return r}));var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},function(e,t,n){n.r(t),n.d(t,"overwriteSetPrototypeOf",(function(){return s})),n.d(t,"doNotWriteGlobalObjs",(function(){return c})),n.d(t,"doNotWriteObj",(function(){return u})),n.d(t,"globalEsObjs",(function(){return r})),n.d(t,"hijack",(function(){return l.hijack})),n.d(t,"hijackWasm",(function(){return l.hijackWasm}));var r=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==__wxConfig.JSEngineName&&r.push("Error");var i=globalThis,o=n(2),a=r.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),s=function(){Object.defineProperty(i.Object,"setPrototypeOf",{value:function(e,t){return e.__proto__=t,e},configurable:!0})},c=function(){try{new Date;for(var e=0;e<a.length;++e){var t=a[e];if(i[t]){new Date;Object(o.doNotWriteObj)(i,t,t,!1),new Date}}new Date}catch(e){}},u=function(e,t,n){return Object(o.doNotWriteObj)(e,t,n,!1)},l=(n(4),n(1))}]),__cloudSDK__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=67)}([function(e,t,n){n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return g})),n.d(t,"__spreadArrays",(function(){return v})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return y})),n.d(t,"__asyncDelegator",(function(){return m})),n.d(t,"__asyncValues",(function(){return b})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return O})),n.d(t,"__importDefault",(function(){return E})),n.d(t,"__classPrivateFieldGet",(function(){return S})),n.d(t,"__classPrivateFieldSet",(function(){return T}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){Object.defineProperty(this,"constructor",{value:e})}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function v(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function y(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof _?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function m(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function T(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){n.r(t),n.d(t,"CloudSDKError",(function(){return a})),n.d(t,"isSDKError",(function(){return s})),n.d(t,"returnAsCloudSDKError",(function(){return c})),n.d(t,"returnAsFinalCloudSDKError",(function(){return u})),n.d(t,"toSDKError",(function(){return l})),n.d(t,"isGenericError",(function(){return d})),n.d(t,"TimeoutError",(function(){return f})),n.d(t,"isTimeoutError",(function(){return p})),n.d(t,"CancelledError",(function(){return h})),n.d(t,"isCancelledError",(function(){return g}));var r=n(0),i=n(2),o=n(3),a=function(e){function t(t){var n=e.call(this,t.errMsg)||this;return n.errCode=-1,Object.defineProperties(n,{message:{get:function(){return"errCode: "+this.errCode+" "+(o.ERR_CODE[this.errCode]||"")+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e}}}),n.errCode=t.errCode||-1,n.errMsg=t.errMsg,n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return"errCode: "+this.errCode+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e},enumerable:!1,configurable:!0}),t}(Error);function s(e){return e&&e instanceof Error&&Object(i.isString)(e.errMsg)}function c(e,t){if(void 0===t&&(t=""),e){if(s(e))return t&&(e.errMsg+="; "+t),e;var n=e?e.errCode:void 0,r=(e&&e.errMsg||e.toString()||"unknown error")+"; "+t;return new a({errCode:n,errMsg:r})}return new a({errMsg:t})}function u(e,t){return l(e,t)}function l(e,t){if(e){if(s(e))return e;var n,r=t+":fail ";if(e instanceof Error)e.message=""+r+e.message,e.stack=e.stack?e.stack.slice(0,7)+r+e.stack.slice(7):e.stack,(n=e).errCode=-1;else if("string"==typeof e)(n=new Error(""+r+e)).errCode=-1;else{var i=e.errMsg||"";(n=new Error(t+":fail "+e.errCode+" "+(o.ERR_CODE[e.errCode]||"")+". "+i)).errCode=e.errCode||-1}return n.errMsg=n.message+"",n}var a=new Error(t+":fail");return a.errCode=-1,a.errMsg=a.message+"",a}var d=function(e){return e.generic},f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="timeout",r.generic=!0,r.payload=n,r}return Object(r.__extends)(t,e),t}(Error),p=function(e){return"timeout"===e.type},h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="cancelled",r.generic=!0,r.payload=n,r}return Object(r.__extends)(t,e),t}(Error),g=function(e){return"cancelled"===e.type}},function(e,t,n){n.r(t),n.d(t,"getType",(function(){return r})),n.d(t,"isObject",(function(){return i})),n.d(t,"isString",(function(){return o})),n.d(t,"isNumber",(function(){return a})),n.d(t,"isPromise",(function(){return s})),n.d(t,"isFunction",(function(){return c})),n.d(t,"isArray",(function(){return u})),n.d(t,"isDate",(function(){return l})),n.d(t,"isRegExp",(function(){return d})),n.d(t,"isInternalObject",(function(){return f})),n.d(t,"isPlainObject",(function(){return p}));var r=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},i=function(e){return"object"===r(e)},o=function(e){return"string"===r(e)},a=function(e){return"number"===r(e)},s=function(e){return"promise"===r(e)},c=function(e){return"function"==typeof e},u=function(e){return Array.isArray(e)},l=function(e){return"date"===r(e)},d=function(e){return"regexp"===r(e)},f=function(e){return e&&"symbol"===r(e._internalType)},p=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){n.r(t),n.d(t,"ERR_CODE",(function(){return r}));var r={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002}},function(e,t,n){n.r(t),n.d(t,"init",(function(){return f})),n.d(t,"reportAPISpeed",(function(){return h})),n.d(t,"reportIDKey",(function(){return g})),n.d(t,"wrapTiming",(function(){return v})),n.d(t,"socketOnMessageSamplePicker",(function(){return _}));var r,i,o=n(0),a=n(14),s=n(8),c=n(2),u=!1,l=[],d="unknown",f=function(){if(!u)try{var e=Object(s.getSDK)();e.wx.getNetworkType({success:function(e){d=e.networkType},complete:function(){u=!0,p()}}),e.wx.onNetworkStatusChange((function(e){u||(u=!0,p()),d=e.networkType}))}catch(e){0}},p=function(){var e,t;try{for(var n=Object(o.__values)(l),r=n.next();!r.done;r=n.next()){var i=r.value;try{i()}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}l=[]},h=function(e){setTimeout((function(){try{if(!function(e){return!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime))}(e))return;if(!u&&l.length<100)return void l.push(h.bind(null,e));var t=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,r=[0,e.apiName,t,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,d,e.tunnelTimeNoCSNetCost?t-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0];a.default.reportKeyValue({key:"CloudReport",value:r.join(","),force:!0})}catch(e){}}))},g=function(e,t,n,r){a.default.reportIDKeyDirectly({id:e,key:t,force:n,immediately:r})},v=function(e,t){var n=Object(c.isFunction)(e);function r(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(t.samplePicker&&!t.samplePicker.next())return n?e.apply(this,r):e;var a=Date.now(),s=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return n?e.apply(this,r):e;var u=void 0;if(n){var l=e.apply(this,r);if(!Object(c.isPromise)(l))return s=!1,l;u=l}else u=e;return u.then((function(){return i(a)})).catch((function(){return i(a)})),u}catch(e){throw s=!1,e}finally{s||i(a)}}function i(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&h(Object(o.__assign)(Object(o.__assign)({},t.timing),{apiName:t.autoReport}))}return n?r:r()},_=(r=10,i=!0,function(){var e,t;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:e=function(){return parseInt(Math.round(2*Math.random()*r),10)},t=i?0:e(),n.label=1;case 1:return t>0?(t--,[4,!1]):[3,3];case 2:return n.sent(),[3,5];case 3:return t=e(),[4,!0];case 4:n.sent(),n.label=5;case 5:return[3,1];case 6:return[2]}}))})()},function(e,t,n){n.r(t),n.d(t,"invokeSuccessCallback",(function(){return o})),n.d(t,"invokeFailCallback",(function(){return a})),n.d(t,"invokeCompleteCallback",(function(){return s})),n.d(t,"invokeSuccessCompleteCallbacks",(function(){return c})),n.d(t,"invokeFailCompleteCallbacks",(function(){return u})),n.d(t,"hasAPICallback",(function(){return l}));var r=n(2),i=n(19);function o(e,t,n){t.success&&Object(r.isFunction)(t.success)&&Object(i.wrapWithTryCatch)(t.success,"at api "+e+" success callback function;")(n)}function a(e,t,n){t.fail&&Object(r.isFunction)(t.fail)&&Object(i.wrapWithTryCatch)(t.fail,"at api "+e+" fail callback function;")(n)}function s(e,t,n){t.complete&&Object(r.isFunction)(t.complete)&&Object(i.wrapWithTryCatch)(t.complete,"at api "+e+" complete callback function;")(n)}function c(e,t,n){o(e,t,n),s(e,t,n)}function u(e,t,n){a(e,t,n),s(e,t,n)}function l(e){return e&&(e.success||e.fail||e.complete)}},function(e,t,n){n.r(t),function(e,r){n.d(t,"isDevTools",(function(){return a})),n.d(t,"isMINA",(function(){return s}));var i,o=n(0);try{__wxConfig.platform,i=Object(o.__assign)({},__wxConfig),__wxConfig.onReady((function(){i=Object.assign(i,__wxConfig)}))}catch(t){i={platform:"ios",appLaunchInfo:{mode:""},onReady:function(e){setTimeout((function(){e()}))}},e.env.TEST&&(r.__wxConfig=i)}t.default=i;var a=function(){return"devtools"===i.platform},s=function(){return"mina"===i.platform}}.call(this,n(54),n(27))},function(e,t,n){n.r(t),function(e){n.d(t,"sleep",(function(){return a})),n.d(t,"nextLoop",(function(){return s})),n.d(t,"autoCount",(function(){return u})),n.d(t,"getWXVersion",(function(){return l})),n.d(t,"getNetworkStatus",(function(){return p})),n.d(t,"throwErrorIfNetworkOffline",(function(){return h})),n.d(t,"onceNetworkOnline",(function(){return g})),n.d(t,"onAppVisibilityChange",(function(){return y})),n.d(t,"offAppVisibilityChange",(function(){return m})),n.d(t,"tryJSONParse",(function(){return b})),n.d(t,"arrayBufferToBase64",(function(){return O})),n.d(t,"base64ToArrayBuffer",(function(){return E})),n.d(t,"arrayBufferToString",(function(){return S})),n.d(t,"stringToArrayBuffer",(function(){return T}));var r,i=n(0),o=n(8),a=function(e){return void 0===e&&(e=0),new Promise((function(t){return setTimeout(t,e)}))},s=function(){return new Promise((function(t){return e(t)}))},c={},u=function(e){return void 0===e&&(e="any"),c[e]||(c[e]=0),c[e]++},l=function(){var e,t,n=Object(o.getSDK)().wx;if(n&&n.version){e=n.version.version,t=n.version.updateTime;var r=n.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:r?r[1]+"-"+r[2]+"-"+r[3]:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}},d=!1,f=[],p=function(){return new Promise((function(e,t){if(r)e(r);else{0;try{Object(o.getSDK)().wx.getNetworkType({success:function(t){r={networkType:t.networkType,isConnected:"none"!==t.networkType},e(r),d||(Object(o.getSDK)().wx.onNetworkStatusChange((function(e){if(r.networkType=e.networkType,r.isConnected=e.isConnected,e.isConnected&&f.length)for(;f.length;)try{f.shift()()}catch(e){}})),d=!0)},fail:t})}catch(e){t(e)}}}))},h=function(){return new Promise((function(e,t){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,p()];case 1:return n.sent().isConnected?e():t("network offline"),[3,3];case 2:return n.sent(),e(),[3,3];case 3:return[2]}}))}))}))},g=function(){return new Promise((function(e){r&&r.isConnected?e():f.push(e)}))};var v=!1,_=new Set;function y(e){Object(o.getSDK)().wx.onAppShow&&(v||(!function(){var e=Object(o.getSDK)().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((function(){var e,t;"visible";try{for(var n=Object(i.__values)(_),r=n.next();!r.done;r=n.next()){var o=r.value;try{o("show")}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})),e.onAppHide((function(){var e,t;"hidden";try{for(var n=Object(i.__values)(_),r=n.next();!r.done;r=n.next()){var o=r.value;try{o("hide")}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})))}(),v=!0),_.size>50&&_.clear(),_.add(e))}function m(e){_.delete(e)}function b(e){try{return JSON.parse(e)}catch(t){return e}}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function O(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return function(e){for(var t=String(e),n="",r=void 0,i=void 0,o=0,a=w;t.charAt(0|o)||(a="=",o%1);n+=a.charAt(63&r>>8-o%1*8)){if((i=t.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');r=r<<8|i}return n}(t)}function E(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r=0,i=void 0,o=void 0,a=0;o=t.charAt(a++);~o&&(i=r%4?64*i+o:o,r++%4)?n+=String.fromCharCode(255&i>>(-2*r&6)):0)o=w.indexOf(o);return n}(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function S(e){return function(e){var t,n,r=e.length,i="",o=0;for(;o<r;){var a=e[o++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:i+=String.fromCharCode(a);break;case 12:case 13:t=e[o++],i+=String.fromCharCode((31&a)<<6|63&t);break;case 14:t=e[o++],n=e[o++],i+=String.fromCharCode((15&a)<<12|(63&t)<<6|(63&n)<<0)}}return i}(new Uint8Array(e))}function T(e){var t,n,r=e.split(""),o=[];try{for(var a=Object(i.__values)(r),s=a.next();!s.done;s=a.next()){var c=s.value;o.push(c.charCodeAt(0))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return new Uint8Array(o).buffer}}.call(this,n(61).setImmediate)},function(e,t,n){n.r(t),n.d(t,"getSDK",(function(){return a})),n.d(t,"setSDK",(function(){return s})),n.d(t,"setDefaultSDK",(function(){return c}));var r,i=new WeakMap;function o(){return null!=r?r:void 0!==__appServiceSDK__?__appServiceSDK__:void 0}var a=function(e){if(!e)return o();var t=i.get(e);return t&&t||o()},s=function(e,t){i.set(e,t)},c=function(e){r=e}},function(e,t,n){n.r(t);var r=n(44),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.default||i||Function("return this")();t.default=o},function(e,t,n){n.r(t),t.default=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){n.r(t),t.default=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){n.r(t);var r=Array.isArray;t.default=r},function(e,t,n){var r,i=n(28),o=n(9).default["__core-js_shared__"],a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var s=function(e){return!!a&&a in e},c=n(10),u=n(21),l=/^\[object .+?Constructor\]$/,d=Function.prototype,f=Object.prototype,p=d.toString,h=f.hasOwnProperty,g=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var v=function(e){return!(!Object(c.default)(e)||s(e))&&(Object(i.default)(e)?g:l).test(Object(u.default)(e))};var _=function(e,t){return null==e?void 0:e[t]};t.default=function(e,t){var n=_(e,t);return v(n)?n:void 0}},function(e,t,n){n.r(t);var r,i=n(19),o={surroundThirdByTryCatch:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Object(i.tryCatch)((function(){try{return e.apply(e,n)}catch(n){throw console.error(JSON.stringify(n)+"; "+t+"\n"+n.stack),console.error(e.toString()),n}}),t)}},reportIDKey:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},reportIDKeyDirectly:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},reportKeyValue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},a=!1,s=10;function c(){try{return a?Reporter:s<=0?r:(s--,Reporter.surroundThirdByTryCatch,a=!0,r=Reporter)}catch(e){return r=o}}t.default={surroundThirdByTryCatch:function(e,t){return c().surroundThirdByTryCatch(e,t)},reportIDKey:function(e){return c().reportIDKey(e)},reportIDKeyDirectly:function(e){return c().reportIDKeyDirectly(e)},reportKeyValue:function(e){return c().reportKeyValue(e)}}},function(e,t,n){var r=n(16),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.default?r.default.toStringTag:void 0;var c=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i},u=Object.prototype.toString;var l=function(e){return u.call(e)},d=r.default?r.default.toStringTag:void 0;t.default=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?c(e):l(e)}},function(e,t,n){n.r(t);var r=n(9).default.Symbol;t.default=r},function(e,t,n){n.r(t);var r=n(34),i=n(29);t.default=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=o?o(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?Object(i.default)(n,u,l):Object(r.default)(n,u,l)}return n}},function(e,t,n){var r=n(53),i=n(10),o=n(31);var a=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},s=Object.prototype.hasOwnProperty;var c=function(e){if(!Object(i.default)(e))return a(e);var t=Object(o.default)(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n},u=n(23);t.default=function(e){return Object(u.default)(e)?Object(r.default)(e,!0):c(e)}},function(e,t,n){n.r(t),n.d(t,"tryCatch",(function(){return a})),n.d(t,"wrapWithTryCatch",(function(){return s})),n.d(t,"wrapParamCallbacksWithTryCatch",(function(){return c}));var r=n(1),i=n(2),o=n(14);function a(e,t){void 0===t&&(t="");try{return e()}catch(e){if(Object(r.isSDKError)(e))return e.errMsg+=t,e;var n=(e?e.toString():"")+t;return new r.CloudSDKError({errMsg:n})}}function s(e,t){return void 0===t&&(t=""),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return a((function(){return e.apply(e,n)}),t)}}function c(e){var t=e.param;t&&(t.success&&Object(i.isFunction)(t.success)&&(t.success=o.default.surroundThirdByTryCatch(t.success,"at api "+e.apiName+" success callback function")),t.fail&&Object(i.isFunction)(t.fail)&&(t.fail=o.default.surroundThirdByTryCatch(t.fail,"at api "+e.apiName+" fail callback function")),t.complete&&Object(i.isFunction)(t.complete)&&(t.complete=o.default.surroundThirdByTryCatch(t.complete,"at api "+e.apiName+" complete callback function")))}},function(e,t,n){n.r(t),function(e){var r=n(44),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.default.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.default=s}.call(this,n(55)(e))},function(e,t,n){n.r(t);var r=Function.prototype.toString;t.default=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){n.r(t),t.default=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){n.r(t);var r=n(28),i=n(49);t.default=function(e){return null!=e&&Object(i.default)(e.length)&&!Object(r.default)(e)}},function(e,t,n){var r=function(){this.__data__=[],this.size=0},i=n(22);var o=function(e,t){for(var n=e.length;n--;)if(Object(i.default)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)};var c=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]};var u=function(e){return o(this.__data__,e)>-1};var l=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=c,d.prototype.has=u,d.prototype.set=l;t.default=d},function(e,t,n){n.r(t);var r=n(13),i=n(9),o=Object(r.default)(i.default,"Map");t.default=o},function(module,exports,__webpack_require__){(function(global,Buffer){module.exports=function(exports){var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,n,r,i,o,a;inited||init();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Arr(3*s/4-o),r=o>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)i=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],a[c++]=i>>16&255,a[c++]=i>>8&255,a[c++]=255&i;return 2===o?(i=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,a[c++]=255&i):1===o&&(i=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,a[c++]=i>>8&255,a[c++]=255&i),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(tripletToBase64(r));return i.join("")}function fromByteArray(e){var t;inited||init();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,c=n-r;s<c;s+=a)o.push(encodeChunk(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],i+=lookup[t>>2],i+=lookup[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=lookup[t>>10],i+=lookup[t>>4&63],i+=lookup[t<<2&63],i+="="),o.push(i),o.join("")}function read(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)}function write(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}var toString={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},INSPECT_MAX_BYTES=50;Buffer$1.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer$1.prototype:(null===e&&(e=new Buffer$1(t)),e.length=t),e}function Buffer$1(e,t,n){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,r):"string"==typeof t?fromString(e,t,n):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromString(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer$1.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),i=(e=createBuffer(e,r)).write(t,n);return i!==r&&(e=e.slice(0,i)),e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Buffer$1.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer$1.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer$1.alloc(+e)}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=Buffer$1.from(t,r)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,i);if("number"==typeof t)return t&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(asciiToBytes(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return decodeCodePointsArray(r)}Buffer$1.poolSize=8192,Buffer$1._augment=function(e){return e.__proto__=Buffer$1.prototype,e},Buffer$1.from=function(e,t,n){return from(null,e,t,n)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array),Buffer$1.alloc=function(e,t,n){return alloc(null,e,t,n)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer$1.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!internalIsBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer$1.prototype.compare=function(e,t,n,r,i){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n),l=0;l<s;++l)if(c[l]!==u[l]){o=c[l],a=u[l];break}return o<a?-1:a<o?1:0},Buffer$1.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer$1.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer$1.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=toHex(e[o]);return i}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,i,o){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function checkIEEE754(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,i){return i||checkIEEE754(e,t,n,4,34028234663852886e22,-34028234663852886e22),write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,i){return i||checkIEEE754(e,t,n,8,17976931348623157e292,-17976931348623157e292),write(e,t,n,r,52,8),n+8}Buffer$1.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer$1.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer$1.prototype;else{var i=t-e;n=new Buffer$1(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},Buffer$1.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},Buffer$1.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},Buffer$1.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},Buffer$1.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},Buffer$1.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer$1.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer$1.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer$1.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);checkInt(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer$1.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer$1.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer$1.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer$1.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},Buffer$1.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer$1.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=internalIsBuffer(e)?e:utf8ToBytes(new Buffer$1(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function utf16leToBytes(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer:Buffer$1,SlowBuffer:SlowBuffer,isBuffer:isBuffer}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=Map,long_1=Long,wasm=null;function Long(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var n,r,i;return t?(i=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(n=fromBits(e,(0|e)<0?-1:0,!0),i&&(UINT_CACHE[e]=n),n):(i=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(n=fromBits(e,e<0?-1:0,!1),i&&(INT_CACHE[e]=n),n)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,n){return new Long(e,t,n)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return fromString$1(e.substring(1),t,n).neg();for(var i=fromNumber(pow_dbl(n,8)),o=ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var u=fromNumber(pow_dbl(n,s));o=o.mul(u).add(fromNumber(c))}else o=(o=o.mul(i)).add(fromNumber(c))}return o.unsigned=t,o}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString$1(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString$1,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=fromNumber(pow_dbl(e,6),this.unsigned),o=this,a="";;){var s=o.div(i),c=(o.sub(s.mul(i)).toInt()>>>0).toString(e);if((o=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,u=0,l=0,d=0;return l+=(d+=i+(65535&e.low))>>>16,u+=(l+=r+s)>>>16,c+=(u+=n+a)>>>16,c+=t+o,fromBits((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=65535&e.low,u=0,l=0,d=0,f=0;return d+=(f+=i*c)>>>16,l+=(d+=r*c)>>>16,d&=65535,l+=(d+=i*s)>>>16,u+=(l+=n*c)>>>16,l&=65535,u+=(l+=r*s)>>>16,l&=65535,u+=(l+=i*a)>>>16,u+=t*c+n*s+r*a+i*o,fromBits((d&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,n,r;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=ZERO}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var i=Math.ceil(Math.log(t)/Math.LN2),o=i<=48?1:pow_dbl(2,i-48),a=fromNumber(t),s=a.mul(e);s.isNegative()||s.gt(n);)s=(a=fromNumber(t-=o,this.unsigned)).mul(e);a.isZero()&&(a=ONE),r=r.add(a),n=n.sub(s)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,n){return n?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},long_1.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},long_1.fromExtendedJSON=function(e,t){var n=long_1.fromString(e.$numberLong);return t&&t.relaxed?n.toNumber():n},Object.defineProperty(long_1.prototype,"_bsontype",{value:"Long"});var long_1$1=long_1;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Double=function(){function e(t){_classCallCheck(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Double.prototype,"_bsontype",{value:"Double"});var double_1=Double;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Timestamp=function(e){function t(e,n){var r;return _classCallCheck$1(this,t),r=long_1$1.isLong(e)?_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.low,e.high,!0)):_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,!0)),_possibleConstructorReturn(r)}return _inherits(t,e),_createClass$1(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(long_1$1.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(long_1$1.fromNumber(e,!0))}},{key:"fromBits",value:function(e,n){return new t(e,n)}},{key:"fromString",value:function(e,n){return new t(long_1$1.fromString(e,n,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(long_1$1);Object.defineProperty(Timestamp.prototype,"_bsontype",{value:"Timestamp"}),Timestamp.MAX_VALUE=Timestamp.MAX_UNSIGNED_VALUE;var timestamp=Timestamp,require$$0={};function normalizedFunctionString(e){return e.toString().replace("function(","function (")}function insecureRandomBytes(e){for(var t=new Uint8Array(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t}var randomBytes=insecureRandomBytes;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}"function"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits;inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var inherits$1=inherits;function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var formatRegExp=/%[sdj%]/g;function format(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(formatRegExp,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<i;a=r[++n])isNull(a)||!isObject(a)?o+=" "+a:o+=" "+inspect(a);return o}function deprecate(e,t){if(isUndefined(global.process))return function(){return deprecate(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return isString(r)||(r=formatValue(e,r,n)),r}var i=formatPrimitive(e,t);if(i)return i;var o=Object.keys(t),a=arrayToHash(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),isError(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return formatError(t);if(0===o.length){if(isFunction(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var c,u="",l=!1,d=["{","}"];(isArray$1(t)&&(l=!0,d=["[","]"]),isFunction(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return isRegExp(t)&&(u=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(u=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(u=" "+formatError(t)),0!==o.length||l&&0!=t.length?n<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=l?formatArray(e,t,n,a,o):o.map((function(r){return formatProperty(e,t,n,a,r,l)})),e.seen.pop(),reduceToSingleString(c,u,d)):d[0]+u+d[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?o.push(formatProperty(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(formatProperty(e,t,n,r,i,!0))})),o}function formatProperty(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=isNull(n)?formatValue(e,c.value,null):formatValue(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===_typeof$1(e)}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===_typeof$1(e)&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===_typeof$1(e)||void 0===e}function isBuffer$1(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp$1(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],t].join(" ")}function log(){console.log("%s - %s",timestamp$1(),format.apply(null,arguments))}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer$1,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray$1,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}var Buffer$2=bufferEs6.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$2&&Buffer$2.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?"0":"")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$2;function convertToHex(e){return e.toString("hex")}function makeObjectIdError(e,t){var n=e[t];return new TypeError('ObjectId string "'.concat(e,'" contains invalid character "').concat(n,'" with character code (').concat(e.charCodeAt(t),"). All character codes for a non-hex string must be less than 256."))}var ObjectId=function(){function e(t){if(_classCallCheck$2(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"==typeof t&&24===t.length&&hasBufferType)return new e(Buffer$2.from(t,"hex"));if(n&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return _createClass$2(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return t=convertToHex(this.id),e.cacheHexString&&(this.__id=t),t;for(var n=0;n<this.id.length;n++){var r=hexTable[this.id.charCodeAt(n)];if("string"!=typeof r)throw makeObjectIdError(this.id,n);t+=r}return e.cacheHexString&&(this.__id=t),t}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),r=Buffer$2.alloc(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=PROCESS_UNIQUE[0],r[5]=PROCESS_UNIQUE[1],r[6]=PROCESS_UNIQUE[2],r[7]=PROCESS_UNIQUE[3],r[8]=PROCESS_UNIQUE[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var n=Buffer$2.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,new e(n)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new e(Buffer$2.from(t,"hex"));for(var n=new _Buffer(12),r=0,i=0;i<24;)n[r++]=decodeLookup[t.charCodeAt(i++)]<<4|decodeLookup[t.charCodeAt(i++)];return new e(n)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof e||(t instanceof _Buffer&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e}();ObjectId.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.getInc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.generate=deprecate$1((function(e){return ObjectId.generate(e)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ObjectId.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ObjectId.prototype[util.inspect.custom||"inspect"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,"_bsontype",{value:"ObjectID"});var objectid=ObjectId;function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),n&&_defineProperties$3(e,n),e}function alphabetize(e){return e.split("").sort().join("")}var BSONRegExp=function(){function e(t,n){_classCallCheck$3(this,e),this.pattern=t||"",this.options=n?alphabetize(n):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("The regular expression option [".concat(this.options[r],"] is not supported"))}return _createClass$3(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),e}();Object.defineProperty(BSONRegExp.prototype,"_bsontype",{value:"BSONRegExp"});var regexp=BSONRegExp;function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),e}var BSONSymbol=function(){function e(t){_classCallCheck$4(this,e),this.value=t}return _createClass$4(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(BSONSymbol.prototype,"_bsontype",{value:"Symbol"});var symbol=BSONSymbol;function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$5(e,t,n){return t&&_defineProperties$5(e.prototype,t),n&&_defineProperties$5(e,n),e}var Int32=function(){function e(t){_classCallCheck$5(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass$5(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(Int32.prototype,"_bsontype",{value:"Int32"});var int_32=Int32;function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$6(e,t,n){return t&&_defineProperties$6(e.prototype,t),n&&_defineProperties$6(e,n),e}var Code=function(){function e(t,n){_classCallCheck$6(this,e),this.code=t,this.scope=n}return _createClass$6(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Code.prototype,"_bsontype",{value:"Code"});var code=Code,Buffer$3=bufferEs6.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/;function isDigit(e){return!isNaN(parseInt(e,10))}function divideu128(e){var t=long_1$1.fromNumber(1e9),n=long_1$1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new long_1$1(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function multiply64x2(e,t){if(!e&&!t)return{high:long_1$1.fromNumber(0),low:long_1$1.fromNumber(0)};var n=e.shiftRightUnsigned(32),r=new long_1$1(e.getLowBits(),0),i=t.shiftRightUnsigned(32),o=new long_1$1(t.getLowBits(),0),a=n.multiply(i),s=n.multiply(o),c=r.multiply(i),u=r.multiply(o);return a=a.add(s.shiftRightUnsigned(32)),s=new long_1$1(s.getLowBits(),0).add(c).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new long_1$1(u.getLowBits(),0))}}function lessThan(e,t){var n=e.high>>>0,r=t.high>>>0;return n<r||n===r&&e.low>>>0<t.low>>>0}function invalidErr(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}function Decimal128(e){this.bytes=e}Decimal128.fromString=function(e){var t,n=!1,r=!1,i=!1,o=0,a=0,s=0,c=0,u=0,l=[0],d=0,f=0,p=0,h=0,g=0,v=0,_=[0,0],y=[0,0],m=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var b=e.match(PARSE_STRING_REGEXP),w=e.match(PARSE_INF_REGEXP),O=e.match(PARSE_NAN_REGEXP);if(!b&&!w&&!O||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(b){var E=b[2],S=b[4],T=b[5],I=b[6];S&&void 0===I&&invalidErr(e,"missing exponent power"),S&&void 0===E&&invalidErr(e,"missing exponent base"),void 0===S&&(T||I)&&invalidErr(e,"missing e before exponent")}if("+"!==e[m]&&"-"!==e[m]||(n="-"===e[m++]),!isDigit(e[m])&&"."!==e[m]){if("i"===e[m]||"I"===e[m])return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===e[m])return new Decimal128(Buffer$3.from(NAN_BUFFER))}for(;isDigit(e[m])||"."===e[m];)"."!==e[m]?(d<34&&("0"!==e[m]||i)&&(i||(u=a),i=!0,l[f++]=parseInt(e[m],10),d+=1),i&&(s+=1),r&&(c+=1),a+=1,m+=1):(r&&invalidErr(e,"contains multiple periods"),r=!0,m+=1);if(r&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[m]||"E"===e[m]){var A=e.substr(++m).match(EXPONENT_REGEX);if(!A||!A[2])return new Decimal128(Buffer$3.from(NAN_BUFFER));g=parseInt(A[0],10),m+=A[0].length}if(e[m])return new Decimal128(Buffer$3.from(NAN_BUFFER));if(p=0,d){if(h=d-1,1!==(o=s))for(;"0"===e[u+o-1];)o-=1}else p=0,h=0,l[0]=0,s=1,d=1,o=0;for(g<=c&&c-g>16384?g=EXPONENT_MIN:g-=c;g>EXPONENT_MAX;){if((h+=1)-p>MAX_DIGITS){if(l.join("").match(/^0+$/)){g=EXPONENT_MAX;break}invalidErr(e,"overflow")}g-=1}for(;g<EXPONENT_MIN||d<s;){if(0===h&&o<d){g=EXPONENT_MIN,o=0;break}if(d<s?s-=1:h-=1,g<EXPONENT_MAX)g+=1;else{if(l.join("").match(/^0+$/)){g=EXPONENT_MAX;break}invalidErr(e,"overflow")}}if(h-p+1<o){var C=a;r&&(u+=1,C+=1),n&&(u+=1,C+=1);var k=parseInt(e[u+h+1],10),x=0;if(k>=5&&(x=1,5===k))for(x=l[h]%2==1,v=u+h+2;v<C;v++)if(parseInt(e[v],10)){x=1;break}if(x)for(var P=h;P>=0;P--)if(++l[P]>9&&(l[P]=0,0===P)){if(!(g<EXPONENT_MAX))return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));g+=1,l[P]=1}}if(_=long_1$1.fromNumber(0),y=long_1$1.fromNumber(0),0===o)_=long_1$1.fromNumber(0),y=long_1$1.fromNumber(0);else if(h-p<17){var D=p;for(y=long_1$1.fromNumber(l[D++]),_=new long_1$1(0,0);D<=h;D++)y=(y=y.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[D]))}else{var R=p;for(_=long_1$1.fromNumber(l[R++]);R<=h-17;R++)_=(_=_.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[R]));for(y=long_1$1.fromNumber(l[R++]);R<=h;R++)y=(y=y.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[R]))}var j=multiply64x2(_,long_1$1.fromString("100000000000000000"));j.low=j.low.add(y),lessThan(j.low,y)&&(j.high=j.high.add(long_1$1.fromNumber(1))),t=g+EXPONENT_BIAS;var N={low:long_1$1.fromNumber(0),high:long_1$1.fromNumber(0)};j.high.shiftRightUnsigned(49).and(long_1$1.fromNumber(1)).equals(long_1$1.fromNumber(1))?(N.high=N.high.or(long_1$1.fromNumber(3).shiftLeft(61)),N.high=N.high.or(long_1$1.fromNumber(t).and(long_1$1.fromNumber(16383).shiftLeft(47))),N.high=N.high.or(j.high.and(long_1$1.fromNumber(0x7fffffffffff)))):(N.high=N.high.or(long_1$1.fromNumber(16383&t).shiftLeft(49)),N.high=N.high.or(j.high.and(long_1$1.fromNumber(562949953421311)))),N.low=j.low,n&&(N.high=N.high.or(long_1$1.fromString("9223372036854775808")));var M=Buffer$3.alloc(16);return m=0,M[m++]=255&N.low.low,M[m++]=N.low.low>>8&255,M[m++]=N.low.low>>16&255,M[m++]=N.low.low>>24&255,M[m++]=255&N.low.high,M[m++]=N.low.high>>8&255,M[m++]=N.low.high>>16&255,M[m++]=N.low.high>>24&255,M[m++]=255&N.high.low,M[m++]=N.high.low>>8&255,M[m++]=N.high.low>>16&255,M[m++]=N.high.low>>24&255,M[m++]=255&N.high.high,M[m++]=N.high.high>>8&255,M[m++]=N.high.high>>16&255,M[m++]=N.high.high>>24&255,new Decimal128(M)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var e,t,n,r,i,o,a=0,s=new Array(36),c=0;c<s.length;c++)s[c]=0;var u,l,d,f,p,h=0,g=!1,v={parts:new Array(4)},_=[];h=0;var y=this.bytes;if(r=y[h++]|y[h++]<<8|y[h++]<<16|y[h++]<<24,n=y[h++]|y[h++]<<8|y[h++]<<16|y[h++]<<24,t=y[h++]|y[h++]<<8|y[h++]<<16|y[h++]<<24,e=y[h++]|y[h++]<<8|y[h++]<<16|y[h++]<<24,h=0,{low:new long_1$1(r,n),high:new long_1$1(t,e)}.high.lessThan(long_1$1.ZERO)&&_.push("-"),(i=e>>26&COMBINATION_MASK)>>3==3){if(i===COMBINATION_INFINITY)return _.join("")+"Infinity";if(i===COMBINATION_NAN)return"NaN";o=e>>15&EXPONENT_MASK,d=8+(e>>14&1)}else d=e>>14&7,o=e>>17&EXPONENT_MASK;if(u=o-EXPONENT_BIAS,v.parts[0]=(16383&e)+((15&d)<<14),v.parts[1]=t,v.parts[2]=n,v.parts[3]=r,0===v.parts[0]&&0===v.parts[1]&&0===v.parts[2]&&0===v.parts[3])g=!0;else for(p=3;p>=0;p--){var m=0,b=divideu128(v);if(v=b.quotient,m=b.rem.low)for(f=8;f>=0;f--)s[9*p+f]=m%10,m=Math.floor(m/10)}if(g)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((l=a-1+u)>=34||l<=-7||u>0){if(a>34)return _.push(0),u>0?_.push("E+"+u):u<0&&_.push("E"+u),_.join("");_.push(s[h++]),(a-=1)&&_.push(".");for(var w=0;w<a;w++)_.push(s[h++]);_.push("E"),l>0?_.push("+"+l):_.push(l)}else if(u>=0)for(var O=0;O<a;O++)_.push(s[h++]);else{var E=a+u;if(E>0)for(var S=0;S<E;S++)_.push(s[h++]);else _.push("0");for(_.push(".");E++<0;)_.push("0");for(var T=0;T<a-Math.max(E-1,0);T++)_.push(s[h++])}return _.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(e){return Decimal128.fromString(e.$numberDecimal)},Object.defineProperty(Decimal128.prototype,"_bsontype",{value:"Decimal128"});var decimal128=Decimal128;function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$7(e,t,n){return t&&_defineProperties$7(e.prototype,t),n&&_defineProperties$7(e,n),e}var MinKey=function(){function e(){_classCallCheck$7(this,e)}return _createClass$7(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MinKey.prototype,"_bsontype",{value:"MinKey"});var min_key=MinKey;function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$8(e,t,n){return t&&_defineProperties$8(e.prototype,t),n&&_defineProperties$8(e,n),e}var MaxKey=function(){function e(){_classCallCheck$8(this,e)}return _createClass$8(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MaxKey.prototype,"_bsontype",{value:"MaxKey"});var max_key=MaxKey;function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$9(e,t,n){return t&&_defineProperties$9(e.prototype,t),n&&_defineProperties$9(e,n),e}var DBRef=function(){function e(t,n,r,i){_classCallCheck$9(this,e);var o=t.split(".");2===o.length&&(r=o.shift(),t=o.shift()),this.collection=t,this.oid=n,this.db=r,this.fields=i||{}}return _createClass$9(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var n=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete n[e]})),new e(t.$ref,t.$id,t.$db,n)}}]),e}();Object.defineProperty(DBRef.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(DBRef.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$a(e,t,n){return t&&_defineProperties$a(e.prototype,t),n&&_defineProperties$a(e,n),e}var Buffer$4=bufferEs6.Buffer,Binary=function(){function e(t,n){if(_classCallCheck$a(this,e),!(null==t||"string"==typeof t||Buffer$4.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?BSON_BINARY_SUBTYPE_DEFAULT:n,this.position=0,null==t||t instanceof Number)void 0!==Buffer$4?this.buffer=Buffer$4.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof t)if(void 0!==Buffer$4)this.buffer=Buffer$4.from(t);else{if("undefined"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(t)}else this.buffer=t;this.position=t.length}}return _createClass$a(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)){var r=Buffer$4.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}else{var i=null;i=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var o=0;o<this.buffer.length;o++)i[o]=this.buffer[o];this.buffer=i,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))n=Buffer$4.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var r=0;r<this.position;r++)n[r]=this.buffer[r]}this.buffer=n}if(void 0!==Buffer$4&&Buffer$4.isBuffer(e)&&Buffer$4.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$4&&"string"==typeof e&&Buffer$4.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(isUint8Array(e)||Array.isArray(e)&&"string"!=typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e[i];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e.charCodeAt(o);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)n[r]=this.buffer[e++];return n}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=Buffer$4.isBuffer(this.buffer)?this.buffer.toString("base64"):Buffer$4.from(this.buffer).toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}}],[{key:"fromExtendedJSON",value:function(t,n){var r,i;return(n=n||{}).legacy?(i=t.$type?parseInt(t.$type,16):0,r=Buffer$4.from(t.$binary,"base64")):(i=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=Buffer$4.from(t.$binary.base64,"base64")),new e(r,i)}}]),e}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function writeStringToArray(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function convertArraytoUtf8BinaryString(e,t,n){for(var r="",i=t;i<n;i++)r+=String.fromCharCode(e[i]);return r}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,"_bsontype",{value:"Binary"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1$1,$minKey:min_key,$maxKey:max_key,$regex:regexp,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(e,t,n,r){if("number"==typeof n){if(r.relaxed||r.legacy)return n;if(Math.floor(n)===n){if(n>=BSON_INT32_MIN&&n<=BSON_INT32_MAX)return new int_32(n);if(n>=BSON_INT64_MIN&&n<=BSON_INT64_MAX)return new long_1$1.fromNumber(n)}return new double_1(n)}if(null==n||"object"!==_typeof$2(n))return n;if(n.$undefined)return null;for(var i=Object.keys(n).filter((function(e){return e.startsWith("$")&&null!=n[e]})),o=0;o<i.length;o++){var a=keysToCodecs[i[o]];if(a)return a.fromExtendedJSON(n,r)}if(null!=n.$date){var s=n.$date,c=new Date;return r.legacy?"number"==typeof s?c.setTime(s):"string"==typeof s&&c.setTime(Date.parse(s)):"string"==typeof s?c.setTime(Date.parse(s)):long_1$1.isLong(s)?c.setTime(s.toNumber()):"number"==typeof s&&r.relaxed&&c.setTime(s),c}if(null!=n.$code){var u=Object.assign({},n);return n.$scope&&(u.$scope=deserializeValue(e,null,n.$scope)),code.fromExtendedJSON(n)}if(null!=n.$ref||null!=n.$dbPointer){var l=n.$ref?n:n.$dbPointer;if(l instanceof db_ref)return l;var d=Object.keys(l).filter((function(e){return e.startsWith("$")})),f=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(f=!1)})),f)return db_ref.fromExtendedJSON(l)}return n}function parse(e,t){var n=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,r){return deserializeValue(n,e,r,t)}))}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(e,t,n,r){null!=n&&"object"===_typeof$2(n)&&(r=n,n=0),null==t||"object"!==_typeof$2(t)||Array.isArray(t)||(r=t,t=null,n=0),r=Object.assign({},{relaxed:!0,legacy:!1},r);var i=Array.isArray(e)?serializeArray(e,r):serializeDocument(e,r);return JSON.stringify(i,t,n)}function serialize(e,t){return t=t||{},JSON.parse(stringify(e,t))}function deserialize(e,t){return t=t||{},parse(JSON.stringify(e),t)}function serializeArray(e,t){return e.map((function(e){return serializeValue(e,t)}))}function getISOString(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function serializeValue(e,t){if(Array.isArray(e))return serializeArray(e,t);if(void 0===e)return null;if(e instanceof Date){var n=e.getTime(),r=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&r?{$date:e.getTime()}:{$date:getISOString(e)}:t.relaxed&&r?{$date:getISOString(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var i=e>=BSON_INT64_MIN&&e<=BSON_INT64_MAX;if(e>=BSON_INT32_MIN&&e<=BSON_INT32_MAX)return{$numberInt:e.toString()};if(i)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var o=e.flags;return void 0===o&&(o=e.toString().match(/[gimuy]*$/)[0]),new regexp(e.source,o).toExtendedJSON(t)}return null!=e&&"object"===_typeof$2(e)?serializeDocument(e,t):e}var BSON_TYPE_MAPPINGS={Binary:function(e){return new binary(e.value(),e.subtype)},Code:function(e){return new code(e.code,e.scope)},DBRef:function(e){return new db_ref(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new decimal128(e.bytes)},Double:function(e){return new double_1(e.value)},Int32:function(e){return new int_32(e.value)},Long:function(e){return long_1$1.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(e){return new objectid(e)},ObjectId:function(e){return new objectid(e)},BSONRegExp:function(e){return new regexp(e.pattern,e.options)},Symbol:function(e){return new symbol(e.value)},Timestamp:function(e){return timestamp.fromBits(e.low,e.high)}};function serializeDocument(e,t){if(null==e||"object"!==_typeof$2(e))throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var r={};for(var i in e)r[i]=serializeValue(e[i],t);return r}if("string"==typeof n){var o=e;if("function"!=typeof o.toExtendedJSON){var a=BSON_TYPE_MAPPINGS[n];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+n);o=a(o)}return"Code"===n&&o.scope?o=new code(o.code,serializeValue(o.scope,t)):"DBRef"===n&&o.oid&&(o=new db_ref(o.collection,serializeValue(o.oid,t),o.db,o.fields)),o.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+_typeof$2(n))}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(e,t,n){for(var r=0,i=t;i<n;i+=1){var o=e[i];if(r){if((o&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;r-=1}else if(o&FIRST_BIT)if((o&FIRST_THREE_BITS)===TWO_BIT_CHAR)r=1;else if((o&FIRST_FOUR_BITS)===THREE_BIT_CHAR)r=2;else{if((o&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;r=3}}return!r}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$5=bufferEs6.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1$1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1$1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(e,t,n){var r=(t=null==t?{}:t)&&t.index?t.index:0,i=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(i<5)throw new Error("bson size must be >= 5, is ".concat(i));if(t.allowObjectSmallerThanBufferSize&&e.length<i)throw new Error("buffer length ".concat(e.length," must be >= bson size ").concat(i));if(!t.allowObjectSmallerThanBufferSize&&e.length!==i)throw new Error("buffer length ".concat(e.length," must === bson size ").concat(i));if(i+r>e.length)throw new Error("(bson size ".concat(i," + options.index ").concat(r," must be <= buffer length ").concat(Buffer$5.byteLength(e),")"));if(0!==e[r+i-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,r,t,n)}function deserializeObject(e,t,n,r){var i=null!=n.evalFunctions&&n.evalFunctions,o=null!=n.cacheFunctions&&n.cacheFunctions,a=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!a)var s=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,u=null!=n.raw&&n.raw,l="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,d=null!=n.promoteBuffers&&n.promoteBuffers,f=null==n.promoteLongs||n.promoteLongs,p=null==n.promoteValues||n.promoteValues,h=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var g=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(g<5||g>e.length)throw new Error("corrupt bson message");for(var v=r?[]:{},_=0;;){var y=e[t++];if(0===y)break;for(var m=t;0!==e[m]&&m<e.length;)m++;if(m>=Buffer$5.byteLength(e))throw new Error("Bad BSON Document: illegal CString");var b=r?_++:e.toString("utf8",t,m);if(t=m+1,y===constants.BSON_DATA_STRING){var w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(w<=0||w>e.length-t||0!==e[t+w-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+w-1))throw new Error("Invalid UTF-8 string in BSON document");var O=e.toString("utf8",t,t+w-1);v[b]=O,t+=w}else if(y===constants.BSON_DATA_OID){var E=Buffer$5.alloc(12);e.copy(E,0,t,t+12),v[b]=new objectid(E),t+=12}else if(y===constants.BSON_DATA_INT&&!1===p)v[b]=new int_32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(y===constants.BSON_DATA_INT)v[b]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(y===constants.BSON_DATA_NUMBER&&!1===p)v[b]=new double_1(e.readDoubleLE(t)),t+=8;else if(y===constants.BSON_DATA_NUMBER)v[b]=e.readDoubleLE(t),t+=8;else if(y===constants.BSON_DATA_DATE){var S=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,T=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;v[b]=new Date(new long_1$1(S,T).toNumber())}else if(y===constants.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");v[b]=1===e[t++]}else if(y===constants.BSON_DATA_OBJECT){var I=t,A=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(A<=0||A>e.length-t)throw new Error("bad embedded document length in bson");v[b]=u?e.slice(t,t+A):deserializeObject(e,I,n,!1),t+=A}else if(y===constants.BSON_DATA_ARRAY){var C=t,k=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,x=n,P=t+k;if(c&&c[b]){for(var D in x={},n)x[D]=n[D];x.raw=!0}if(v[b]=deserializeObject(e,C,x,!0),0!==e[(t+=k)-1])throw new Error("invalid array terminator byte");if(t!==P)throw new Error("corrupted array bson")}else if(y===constants.BSON_DATA_UNDEFINED)v[b]=void 0;else if(y===constants.BSON_DATA_NULL)v[b]=null;else if(y===constants.BSON_DATA_LONG){var R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,j=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,N=new long_1$1(R,j);v[b]=f&&!0===p&&N.lessThanOrEqual(JS_INT_MAX_LONG)&&N.greaterThanOrEqual(JS_INT_MIN_LONG)?N.toNumber():N}else if(y===constants.BSON_DATA_DECIMAL128){var M=Buffer$5.alloc(16);e.copy(M,0,t,t+16),t+=16;var L=new decimal128(M);v[b]=L.toObject?L.toObject():L}else if(y===constants.BSON_DATA_BINARY){var B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,F=B,U=e[t++];if(B<0)throw new Error("Negative binary type element size found");if(B>Buffer$5.byteLength(e))throw new Error("Binary type size larger than document size");if(null!=e.slice){if(U===binary.SUBTYPE_BYTE_ARRAY){if((B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>F-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<F-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}v[b]=d&&p?e.slice(t,t+B):new binary(e.slice(t,t+B),U)}else{var W="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(B)):new Array(B);if(U===binary.SUBTYPE_BYTE_ARRAY){if((B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>F-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<F-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(m=0;m<B;m++)W[m]=e[t+m];v[b]=d&&p?W:new binary(W,U)}t+=B}else if(y===constants.BSON_DATA_REGEXP&&!1===l){for(m=t;0!==e[m]&&m<e.length;)m++;if(m>=e.length)throw new Error("Bad BSON Document: illegal CString");var V=e.toString("utf8",t,m);for(m=t=m+1;0!==e[m]&&m<e.length;)m++;if(m>=e.length)throw new Error("Bad BSON Document: illegal CString");var G=e.toString("utf8",t,m);t=m+1;var H=new Array(G.length);for(m=0;m<G.length;m++)switch(G[m]){case"m":H[m]="m";break;case"s":H[m]="g";break;case"i":H[m]="i"}v[b]=new RegExp(V,H.join(""))}else if(y===constants.BSON_DATA_REGEXP&&!0===l){for(m=t;0!==e[m]&&m<e.length;)m++;if(m>=e.length)throw new Error("Bad BSON Document: illegal CString");var z=e.toString("utf8",t,m);for(m=t=m+1;0!==e[m]&&m<e.length;)m++;if(m>=e.length)throw new Error("Bad BSON Document: illegal CString");var Y=e.toString("utf8",t,m);t=m+1,v[b]=new regexp(z,Y)}else if(y===constants.BSON_DATA_SYMBOL){var q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(q<=0||q>e.length-t||0!==e[t+q-1])throw new Error("bad string length in bson");v[b]=e.toString("utf8",t,t+q-1),t+=q}else if(y===constants.BSON_DATA_TIMESTAMP){var K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,J=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;v[b]=new timestamp(K,J)}else if(y===constants.BSON_DATA_MIN_KEY)v[b]=new min_key;else if(y===constants.BSON_DATA_MAX_KEY)v[b]=new max_key;else if(y===constants.BSON_DATA_CODE){var X=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(X<=0||X>e.length-t||0!==e[t+X-1])throw new Error("bad string length in bson");var $=e.toString("utf8",t,t+X-1);if(i)if(o){var Z=a?s($):$;v[b]=isolateEvalWithHash(functionCache,Z,$,v)}else v[b]=isolateEval($);else v[b]=new code($);t+=X}else if(y===constants.BSON_DATA_CODE_W_SCOPE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<13)throw new Error("code_w_scope total size shorter minimum expected length");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error("bad string length in bson");var te=e.toString("utf8",t,t+ee-1),ne=t+=ee,re=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,ie=deserializeObject(e,ne,n,!1);if(t+=re,Q<8+re+ee)throw new Error("code_w_scope total size is to short, truncating scope");if(Q>8+re+ee)throw new Error("code_w_scope total size is to long, clips outer document");if(i){if(o){var oe=a?s(te):te;v[b]=isolateEvalWithHash(functionCache,oe,te,v)}else v[b]=isolateEval(te);v[b].scope=ie}else v[b]=new code(te,ie)}else{if(y!==constants.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+y.toString(16)+' for fieldname "'+b+'", are you using the latest BSON parser?');var ae=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ae<=0||ae>e.length-t||0!==e[t+ae-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+ae-1))throw new Error("Invalid UTF-8 string in BSON document");var se=e.toString("utf8",t,t+ae-1);t+=ae;var ce=Buffer$5.alloc(12);e.copy(ce,0,t,t+12);var ue=new objectid(ce);t+=12,v[b]=new db_ref(se,ue)}}if(g!==t-h){if(r)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var le=Object.keys(v).filter((function(e){return e.startsWith("$")})),de=!0;if(le.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(de=!1)})),!de)return v;if(null!=v.$id&&null!=v.$ref){var fe=Object.assign({},v);return delete fe.$ref,delete fe.$id,delete fe.$db,new db_ref(v.$ref,v.$id,v.$db||null,fe)}return v}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval("value = "+functionString),value}var deserializer=deserialize$1;function readIEEE754(e,t,n,r,i){var o,a,s="big"===n,c=8*i-r-1,u=(1<<c)-1,l=u>>1,d=-7,f=s?0:i-1,p=s?1:-1,h=e[t+f];for(f+=p,o=h&(1<<-d)-1,h>>=-d,d+=c;d>0;o=256*o+e[t+f],f+=p,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+f],f+=p,d-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)}function writeIEEE754(e,t,n,r,i,o){var a,s,c,u="big"===r,l=8*o-i-1,d=(1<<l)-1,f=d>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=u?o-1:0,g=u?-1:1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=d?(s=0,a=d):a+f>=1?(s=(t*c-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0)),isNaN(t)&&(s=0);i>=8;)e[n+h]=255&s,h+=g,s/=256,i-=8;for(a=a<<i|s,isNaN(t)&&(a+=8),l+=i;l>0;)e[n+h]=255&a,h+=g,a/=256,l-=8;e[n+h-g]|=128*v}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Buffer$6=bufferEs6.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,ignoreKeys=new Set(["$db","$ref","$id","$clusterTime"]),isDate$1=function(e){return"object"===_typeof$3(e)&&"[object Date]"===Object.prototype.toString.call(e)},isRegExp$1=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)};function serializeString(e,t,n,r,i){e[r++]=constants.BSON_DATA_STRING;var o=i?e.write(t,r,"ascii"):e.write(t,r,"utf8");e[(r=r+o+1)-1]=0;var a=e.write(n,r+4,"utf8");return e[r+3]=a+1>>24&255,e[r+2]=a+1>>16&255,e[r+1]=a+1>>8&255,e[r]=a+1&255,r=r+4+a,e[r++]=0,r}function serializeNumber(e,t,n,r,i){if(Math.floor(n)===n&&n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX)if(n>=constants.BSON_INT32_MIN&&n<=constants.BSON_INT32_MAX)e[r++]=constants.BSON_DATA_INT,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255;else if(n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX){e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8}else{e[r++]=constants.BSON_DATA_LONG,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=long_1$1.fromNumber(n),a=o.getLowBits(),s=o.getHighBits();e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255}else e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8;return r}function serializeNull(e,t,n,r,i){return e[r++]=constants.BSON_DATA_NULL,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeBoolean(e,t,n,r,i){return e[r++]=constants.BSON_DATA_BOOLEAN,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=n?1:0,r}function serializeDate(e,t,n,r,i){e[r++]=constants.BSON_DATA_DATE,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=long_1$1.fromNumber(n.getTime()),a=o.getLowBits(),s=o.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r}function serializeRegExp(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_REGEXP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.source&&null!=n.source.match(regexp$1))throw Error("value "+n.source+" must not contain null bytes");return r+=e.write(n.source,r,"utf8"),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function serializeBSONRegExp(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_REGEXP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,null!=n.pattern.match(regexp$1))throw Error("pattern "+n.pattern+" must not contain null bytes");return r+=e.write(n.pattern,r,"utf8"),e[r++]=0,r+=e.write(n.options.split("").sort().join(""),r,"utf8"),e[r++]=0,r}function serializeMinMax(e,t,n,r,i){return null===n?e[r++]=constants.BSON_DATA_NULL:"MinKey"===n._bsontype?e[r++]=constants.BSON_DATA_MIN_KEY:e[r++]=constants.BSON_DATA_MAX_KEY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeObjectId(e,t,n,r,i){if(e[r++]=constants.BSON_DATA_OID,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,"string"==typeof n.id)e.write(n.id,r,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,r,0,12)}return r+12}function serializeBuffer(e,t,n,r,i){e[r++]=constants.BSON_DATA_BINARY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.length;return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,r,0,o),r+=o}function serializeObject(e,t,n,r,i,o,a,s,c,u){for(var l=0;l<u.length;l++)if(u[l]===n)throw new Error("cyclic dependency detected");u.push(n),e[r++]=Array.isArray(n)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var d=serializeInto(e,n,i,r,o+1,a,s,u);return u.pop(),d}function serializeDecimal128(e,t,n,r,i){return e[r++]=constants.BSON_DATA_DECIMAL128,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.bytes.copy(e,r,0,16),r+16}function serializeLong(e,t,n,r,i){e[r++]="Long"===n._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.getLowBits(),a=n.getHighBits();return e[r++]=255&o,e[r++]=o>>8&255,e[r++]=o>>16&255,e[r++]=o>>24&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,r}function serializeInt32(e,t,n,r,i){return e[r++]=constants.BSON_DATA_INT,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r}function serializeDouble(e,t,n,r,i){return e[r++]=constants.BSON_DATA_NUMBER,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n.value,r,"little",52,8),r+=8}function serializeFunction(e,t,n,r,i,o,a){e[r++]=constants.BSON_DATA_CODE,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s=normalizedFunctionString$1(n),c=e.write(s,r+4,"utf8")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r}function serializeCode(e,t,n,r,i,o,a,s,c){if(n.scope&&"object"===_typeof$3(n.scope)){e[r++]=constants.BSON_DATA_CODE_W_SCOPE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var u=r,l="string"==typeof n.code?n.code:n.code.toString();r+=4;var d=e.write(l,r+4,"utf8")+1;e[r]=255&d,e[r+1]=d>>8&255,e[r+2]=d>>16&255,e[r+3]=d>>24&255,e[r+4+d-1]=0,r=r+d+4;var f=serializeInto(e,n.scope,i,r,o+1,a,s);r=f-1;var p=f-u;e[u++]=255&p,e[u++]=p>>8&255,e[u++]=p>>16&255,e[u++]=p>>24&255,e[r++]=0}else{e[r++]=constants.BSON_DATA_CODE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var h=n.code.toString(),g=e.write(h,r+4,"utf8")+1;e[r]=255&g,e[r+1]=g>>8&255,e[r+2]=g>>16&255,e[r+3]=g>>24&255,r=r+4+g-1,e[r++]=0}return r}function serializeBinary(e,t,n,r,i){e[r++]=constants.BSON_DATA_BINARY,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=n.value(!0),a=n.position;return n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a+=4),e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=n.sub_type,n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a-=4,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255),o.copy(e,r,0,n.position),r+=n.position}function serializeSymbol(e,t,n,r,i){e[r++]=constants.BSON_DATA_SYMBOL,r+=i?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var o=e.write(n.value,r+4,"utf8")+1;return e[r]=255&o,e[r+1]=o>>8&255,e[r+2]=o>>16&255,e[r+3]=o>>24&255,r=r+4+o-1,e[r++]=0,r}function serializeDBRef(e,t,n,r,i,o,a){e[r++]=constants.BSON_DATA_OBJECT,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s,c=r,u={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(u.$db=n.db);var l=(s=serializeInto(e,u=Object.assign(u,n.fields),!1,r,i+1,o))-c;return e[c++]=255&l,e[c++]=l>>8&255,e[c++]=l>>16&255,e[c++]=l>>24&255,s}function serializeInto(e,t,n,r,i,o,a,s){r=r||0,(s=s||[]).push(t);var c=r+4;if(Array.isArray(t))for(var u=0;u<t.length;u++){var l=""+u,d=t[u];if(d&&d.toBSON){if("function"!=typeof d.toBSON)throw new TypeError("toBSON is not a function");d=d.toBSON()}var f=_typeof$3(d);if("string"===f)c=serializeString(e,l,d,c,!0);else if("number"===f)c=serializeNumber(e,l,d,c,!0);else if("boolean"===f)c=serializeBoolean(e,l,d,c,!0);else if(d instanceof Date||isDate$1(d))c=serializeDate(e,l,d,c,!0);else if(void 0===d)c=serializeNull(e,l,d,c,!0);else if(null===d)c=serializeNull(e,l,d,c,!0);else if("ObjectId"===d._bsontype||"ObjectID"===d._bsontype)c=serializeObjectId(e,l,d,c,!0);else if(Buffer$6.isBuffer(d))c=serializeBuffer(e,l,d,c,!0);else if(d instanceof RegExp||isRegExp$1(d))c=serializeRegExp(e,l,d,c,!0);else if("object"===f&&null==d._bsontype)c=serializeObject(e,l,d,c,n,i,o,a,!0,s);else if("object"===f&&"Decimal128"===d._bsontype)c=serializeDecimal128(e,l,d,c,!0);else if("Long"===d._bsontype||"Timestamp"===d._bsontype)c=serializeLong(e,l,d,c,!0);else if("Double"===d._bsontype)c=serializeDouble(e,l,d,c,!0);else if("function"==typeof d&&o)c=serializeFunction(e,l,d,c,n,i,o,!0);else if("Code"===d._bsontype)c=serializeCode(e,l,d,c,n,i,o,a,!0);else if("Binary"===d._bsontype)c=serializeBinary(e,l,d,c,!0);else if("Symbol"===d._bsontype)c=serializeSymbol(e,l,d,c,!0);else if("DBRef"===d._bsontype)c=serializeDBRef(e,l,d,c,i,o,!0);else if("BSONRegExp"===d._bsontype)c=serializeBSONRegExp(e,l,d,c,!0);else if("Int32"===d._bsontype)c=serializeInt32(e,l,d,c,!0);else if("MinKey"===d._bsontype||"MaxKey"===d._bsontype)c=serializeMinMax(e,l,d,c,!0);else if(void 0!==d._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+d._bsontype)}else if(t instanceof map)for(var p=t.entries(),h=!1;!h;){var g=p.next();if(!(h=g.done)){var v=g.value[0],_=g.value[1],y=_typeof$3(_);if("string"==typeof v&&!ignoreKeys.has(v)){if(null!=v.match(regexp$1))throw Error("key "+v+" must not contain null bytes");if(n){if("$"===v[0])throw Error("key "+v+" must not start with '$'");if(~v.indexOf("."))throw Error("key "+v+" must not contain '.'")}}if("string"===y)c=serializeString(e,v,_,c);else if("number"===y)c=serializeNumber(e,v,_,c);else if("boolean"===y)c=serializeBoolean(e,v,_,c);else if(_ instanceof Date||isDate$1(_))c=serializeDate(e,v,_,c);else if(null===_||void 0===_&&!1===a)c=serializeNull(e,v,_,c);else if("ObjectId"===_._bsontype||"ObjectID"===_._bsontype)c=serializeObjectId(e,v,_,c);else if(Buffer$6.isBuffer(_))c=serializeBuffer(e,v,_,c);else if(_ instanceof RegExp||isRegExp$1(_))c=serializeRegExp(e,v,_,c);else if("object"===y&&null==_._bsontype)c=serializeObject(e,v,_,c,n,i,o,a,!1,s);else if("object"===y&&"Decimal128"===_._bsontype)c=serializeDecimal128(e,v,_,c);else if("Long"===_._bsontype||"Timestamp"===_._bsontype)c=serializeLong(e,v,_,c);else if("Double"===_._bsontype)c=serializeDouble(e,v,_,c);else if("Code"===_._bsontype)c=serializeCode(e,v,_,c,n,i,o,a);else if("function"==typeof _&&o)c=serializeFunction(e,v,_,c,n,i,o);else if("Binary"===_._bsontype)c=serializeBinary(e,v,_,c);else if("Symbol"===_._bsontype)c=serializeSymbol(e,v,_,c);else if("DBRef"===_._bsontype)c=serializeDBRef(e,v,_,c,i,o);else if("BSONRegExp"===_._bsontype)c=serializeBSONRegExp(e,v,_,c);else if("Int32"===_._bsontype)c=serializeInt32(e,v,_,c);else if("MinKey"===_._bsontype||"MaxKey"===_._bsontype)c=serializeMinMax(e,v,_,c);else if(void 0!==_._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+_._bsontype)}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==_typeof$3(t))throw new TypeError("toBSON function did not return an object")}for(var m in t){var b=t[m];if(b&&b.toBSON){if("function"!=typeof b.toBSON)throw new TypeError("toBSON is not a function");b=b.toBSON()}var w=_typeof$3(b);if("string"==typeof m&&!ignoreKeys.has(m)){if(null!=m.match(regexp$1))throw Error("key "+m+" must not contain null bytes");if(n){if("$"===m[0])throw Error("key "+m+" must not start with '$'");if(~m.indexOf("."))throw Error("key "+m+" must not contain '.'")}}if("string"===w)c=serializeString(e,m,b,c);else if("number"===w)c=serializeNumber(e,m,b,c);else if("boolean"===w)c=serializeBoolean(e,m,b,c);else if(b instanceof Date||isDate$1(b))c=serializeDate(e,m,b,c);else if(void 0===b)!1===a&&(c=serializeNull(e,m,b,c));else if(null===b)c=serializeNull(e,m,b,c);else if("ObjectId"===b._bsontype||"ObjectID"===b._bsontype)c=serializeObjectId(e,m,b,c);else if(Buffer$6.isBuffer(b))c=serializeBuffer(e,m,b,c);else if(b instanceof RegExp||isRegExp$1(b))c=serializeRegExp(e,m,b,c);else if("object"===w&&null==b._bsontype)c=serializeObject(e,m,b,c,n,i,o,a,!1,s);else if("object"===w&&"Decimal128"===b._bsontype)c=serializeDecimal128(e,m,b,c);else if("Long"===b._bsontype||"Timestamp"===b._bsontype)c=serializeLong(e,m,b,c);else if("Double"===b._bsontype)c=serializeDouble(e,m,b,c);else if("Code"===b._bsontype)c=serializeCode(e,m,b,c,n,i,o,a);else if("function"==typeof b&&o)c=serializeFunction(e,m,b,c,n,i,o);else if("Binary"===b._bsontype)c=serializeBinary(e,m,b,c);else if("Symbol"===b._bsontype)c=serializeSymbol(e,m,b,c);else if("DBRef"===b._bsontype)c=serializeDBRef(e,m,b,c,i,o);else if("BSONRegExp"===b._bsontype)c=serializeBSONRegExp(e,m,b,c);else if("Int32"===b._bsontype)c=serializeInt32(e,m,b,c);else if("MinKey"===b._bsontype||"MaxKey"===b._bsontype)c=serializeMinMax(e,m,b,c);else if(void 0!==b._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+b._bsontype)}}s.pop(),e[c++]=0;var O=c-r;return e[r++]=255&O,e[r++]=O>>8&255,e[r++]=O>>16&255,e[r++]=O>>24&255,c}var serializer=serializeInto;function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Buffer$7=bufferEs6.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(e){return"object"===_typeof$4(e)&&"[object Date]"===Object.prototype.toString.call(e)}function calculateObjectSize(e,t,n){var r=5;if(Array.isArray(e))for(var i=0;i<e.length;i++)r+=calculateElement(i.toString(),e[i],t,!0,n);else for(var o in e.toBSON&&(e=e.toBSON()),e)r+=calculateElement(o,e[o],t,!1,n);return r}function calculateElement(e,t,n,r,i){switch(t&&t.toBSON&&(t=t.toBSON()),_typeof$4(t)){case"string":return 1+Buffer$7.byteLength(e,"utf8")+1+4+Buffer$7.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=constants.JS_INT_MIN&&t<=constants.JS_INT_MAX&&t>=constants.BSON_INT32_MIN&&t<=constants.BSON_INT32_MAX?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+5:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;case"undefined":return r||!i?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||isDate$2(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if(void 0!==Buffer$7&&Buffer$7.isBuffer(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+6+t.length;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1+calculateObjectSize(t.scope,n,i):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+Buffer$7.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var o=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(o.$db=t.db),(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+calculateObjectSize(o,n,i)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.pattern,"utf8")+1+Buffer$7.byteLength(t.options,"utf8")+1:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+calculateObjectSize(t,n,i)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1+calculateObjectSize(t.scope,n,i);if(n)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1}return 0}var calculate_size=calculateObjectSize,Buffer$8=bufferEs6.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$8)return e;if(e instanceof Uint8Array)return Buffer$8.from(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$9=bufferEs6.Buffer,MAXSIZE=17825792,buffer=Buffer$9.alloc(MAXSIZE);function setInternalBufferSize(e){buffer.length<e&&(buffer=Buffer$9.alloc(e))}function serialize$1(e,t){var n="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,r="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,o="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer.length<o&&(buffer=Buffer$9.alloc(o));var a=serializer(buffer,e,n,0,0,r,i,[]),s=Buffer$9.alloc(a);return buffer.copy(s,0,0,s.length),s}function serializeWithBufferAndIndex(e,t,n){var r="boolean"==typeof(n=n||{}).checkKeys&&n.checkKeys,i="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,a="number"==typeof n.index?n.index:0,s=serializer(buffer,e,r,0,0,i,o);return buffer.copy(t,a,0,s),a+s-1}function deserialize$2(e,t){return e=ensure_buffer(e),deserializer(e,t)}function calculateObjectSize$1(e,t){var n="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,r="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,n,r)}function deserializeStream(e,t,n,r,i,o){o=Object.assign({allowObjectSmallerThanBufferSize:!0},o),e=ensure_buffer(e);for(var a=t,s=0;s<n;s++){var c=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;o.index=a,r[i+s]=deserializer(e,o),a+=c}return a}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1$1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;return exports.default=bson,exports.BSON_INT32_MAX=bson_1,exports.BSON_INT32_MIN=bson_2,exports.BSON_INT64_MAX=bson_3,exports.BSON_INT64_MIN=bson_4,exports.JS_INT_MAX=bson_5,exports.JS_INT_MIN=bson_6,exports.BSON_DATA_NUMBER=bson_7,exports.BSON_DATA_STRING=bson_8,exports.BSON_DATA_OBJECT=bson_9,exports.BSON_DATA_ARRAY=bson_10,exports.BSON_DATA_BINARY=bson_11,exports.BSON_DATA_UNDEFINED=bson_12,exports.BSON_DATA_OID=bson_13,exports.BSON_DATA_BOOLEAN=bson_14,exports.BSON_DATA_DATE=bson_15,exports.BSON_DATA_NULL=bson_16,exports.BSON_DATA_REGEXP=bson_17,exports.BSON_DATA_DBPOINTER=bson_18,exports.BSON_DATA_CODE=bson_19,exports.BSON_DATA_SYMBOL=bson_20,exports.BSON_DATA_CODE_W_SCOPE=bson_21,exports.BSON_DATA_INT=bson_22,exports.BSON_DATA_TIMESTAMP=bson_23,exports.BSON_DATA_LONG=bson_24,exports.BSON_DATA_DECIMAL128=bson_25,exports.BSON_DATA_MIN_KEY=bson_26,exports.BSON_DATA_MAX_KEY=bson_27,exports.BSON_BINARY_SUBTYPE_DEFAULT=bson_28,exports.BSON_BINARY_SUBTYPE_FUNCTION=bson_29,exports.BSON_BINARY_SUBTYPE_BYTE_ARRAY=bson_30,exports.BSON_BINARY_SUBTYPE_UUID=bson_31,exports.BSON_BINARY_SUBTYPE_MD5=bson_32,exports.BSON_BINARY_SUBTYPE_USER_DEFINED=bson_33,exports.Code=bson_34,exports.BSONSymbol=bson_35,exports.DBRef=bson_36,exports.Binary=bson_37,exports.ObjectId=bson_38,exports.Long=bson_39,exports.Timestamp=bson_40,exports.Double=bson_41,exports.Int32=bson_42,exports.MinKey=bson_43,exports.MaxKey=bson_44,exports.BSONRegExp=bson_45,exports.Decimal128=bson_46,exports.serialize=bson_47,exports.serializeWithBufferAndIndex=bson_48,exports.deserialize=bson_49,exports.calculateObjectSize=bson_50,exports.deserializeStream=bson_51,exports.setInternalBufferSize=bson_52,exports.ObjectID=bson_53,exports.EJSON=bson_54,exports}({})}).call(this,__webpack_require__(27),__webpack_require__(63).Buffer)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t);var r=n(15),i=n(10);t.default=function(e){if(!Object(i.default)(e))return!1;var t=Object(r.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){n.r(t);var r=n(37);t.default=function(e,t,n){"__proto__"==t&&r.default?Object(r.default)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){n.r(t);var r=n(48),i=Object(r.default)(Object.getPrototypeOf,Object);t.default=i},function(e,t,n){n.r(t);var r=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){n.r(t),function(e){var r=n(9),i=n(58),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.default.Buffer:void 0,c=(s?s.isBuffer:void 0)||i.default;t.default=c}.call(this,n(55)(e))},function(e,t,n){n.r(t),t.default=function(e){return function(t){return e(t)}}},function(e,t,n){n.r(t);var r=n(29),i=n(22),o=Object.prototype.hasOwnProperty;t.default=function(e,t,n){var a=e[t];o.call(e,t)&&Object(i.default)(a,n)&&(void 0!==n||t in e)||Object(r.default)(e,t,n)}},function(e,t,n){n.r(t);var r=/^(?:0|[1-9]\d*)$/;t.default=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(9).default.Uint8Array;t.default=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){n.r(t);var r=n(13),i=function(){try{var e=Object(r.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.default=i},function(e,t,n){n.r(t),n.d(t,"tunnel",(function(){return s})),n.d(t,"constructTunnelReq",(function(){return c})),n.d(t,"getBoundTunnelRequest",(function(){return u}));var r=n(0),i=n(1),o=n(8),a=new(function(){function e(){this._running=0,this._onIdleCallbacks=[]}return Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!1,configurable:!0}),e.prototype.incrementRunning=function(e){void 0===e&&(e=1),this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)},e.prototype.decrementRunning=function(e){var t=this;void 0===e&&(e=1),this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((function(){if(t._idleTriggerTimer=null,t._onIdleCallbacks.length){var e=t._onIdleCallbacks.shift();e&&e()}}),50))},e.prototype.onceIdle=function(e){this._running>0?this._onIdleCallbacks.push(e):e()},e}());function s(e,t){var n=this;if(void 0===t&&(t={}),t.fireOnIdle&&a.running>0)return new Promise((function(i,o){a.onceIdle((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s(e,t)];case 1:return n=r.sent(),i(n),[3,3];case 2:return a=r.sent(),o(a),[3,3];case 3:return[2]}}))}))}))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise((function(n,s){var c,u,l,d,f;a.incrementRunning(),Object(o.getSDK)((e.cloud||t.cloud||{}).identifiers)._operateWXData({appid:null===(u=null===(c=e.cloud)||void 0===c?void 0:c.instanceOptions)||void 0===u?void 0:u.resourceAppid,accessToken:null===(d=null===(l=e.cloud)||void 0===l?void 0:l.authStorage)||void 0===d?void 0:d.getItem("access_token"),webRequest:null===(f=e.cloud)||void 0===f?void 0:f.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:function(e){var o=Object(r.__assign)(Object(r.__assign)({},e),{data:e.rawData});if(e.rawData)try{var a=JSON.parse(e.rawData);if(a.baseresponse&&0!==a.baseresponse.errcode){var c=new i.CloudSDKError({errCode:a.baseresponse.errcode,errMsg:a.baseresponse.errmsg});return void s(c)}o=Object(r.__assign)(Object(r.__assign)({},e),{data:a})}catch(e){c=new i.CloudSDKError({errMsg:e&&e.toString()});return void s(c)}else if(t&&t.requireDataNotEmpty){c=new i.CloudSDKError({errCode:e.errCode,errMsg:"error empty internal server response, "+e.errMsg});return void s(c)}n(o)},fail:function(e){if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{t=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}s(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),a.decrementRunning()}})}))}function c(e){var t=e.cloud;return{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:+new Date+"_"+Math.random()},cloud:t}}function u(e){var t=e.cloud;return function(e){var n=t.isInstance?{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}:{env:e.env};return s({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:n,qbase_meta:t.getMetaData(),cli_req_id:+new Date+"_"+Math.random()},cloud:t})}}t.default=s},function(e,t){e.exports={}},function(e,t,n){n.r(t),n.d(t,"getRuntimeInfo",(function(){return i}));n(39);var r={env:"",platform:""},i=function(){return r};if(void 0!==__wxConfig)r.env="miniprogram",r.platform=__wxConfig.platform;else if(r.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)r.platform="miniprogram";else{var o=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(o)&&(r.platform="wxweb")}},function(e,t,n){var r=n(13),i=Object(r.default)(Object,"create");var o=function(){this.__data__=i?i(null):{},this.size=0};var a=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s=Object.prototype.hasOwnProperty;var c=function(e){var t=this.__data__;if(i){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0},u=Object.prototype.hasOwnProperty;var l=function(e){var t=this.__data__;return i?void 0!==t[e]:u.call(t,e)};var d=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=i&&void 0===t?"__lodash_hash_undefined__":t,this};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=o,f.prototype.delete=a,f.prototype.get=c,f.prototype.has=l,f.prototype.set=d;var p=f,h=n(24),g=n(25);var v=function(){this.size=0,this.__data__={hash:new p,map:new(g.default||h.default),string:new p}};var _=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var y=function(e,t){var n=e.__data__;return _(t)?n["string"==typeof t?"string":"hash"]:n.map};var m=function(e){var t=y(this,e).delete(e);return this.size-=t?1:0,t};var b=function(e){return y(this,e).get(e)};var w=function(e){return y(this,e).has(e)};var O=function(e,t){var n=y(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function E(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}E.prototype.clear=v,E.prototype.delete=m,E.prototype.get=b,E.prototype.has=w,E.prototype.set=O;t.default=E},function(e,t,n){var r=n(15),i=n(11);var o=function(e){return Object(i.default)(e)&&"[object Arguments]"==Object(r.default)(e)},a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return Object(i.default)(e)&&s.call(e,"callee")&&!c.call(e,"callee")};t.default=u},function(e,t,n){n.r(t),n.d(t,"serverConfigurable",(function(){return r})),n.d(t,"clientConfigDefaults",(function(){return i}));var r={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4},i={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0};t.default=r},function(e,t,n){n.r(t),function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.default=n}.call(this,n(27))},function(e,t,n){n.r(t),function(e){var r=n(9),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.default.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.default=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}.call(this,n(55)(e))},function(e,t,n){n.r(t);var r=n(36);t.default=function(e,t){var n=t?Object(r.default)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){n.r(t),t.default=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){n.r(t),t.default=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){n.r(t);t.default=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(24);var i=function(){this.__data__=new r.default,this.size=0};var o=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},c=n(25),u=n(41);var l=function(e,t){var n=this.__data__;if(n instanceof r.default){var i=n.__data__;if(!c.default||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.default(i)}return n.set(e,t),this.size=n.size,this};function d(e){var t=this.__data__=new r.default(e);this.size=t.size}d.prototype.clear=i,d.prototype.delete=o,d.prototype.get=a,d.prototype.has=s,d.prototype.set=l;t.default=d},function(e,t,n){var r=n(10),i=Object.create,o=function(){function e(){}return function(t){if(!Object(r.default)(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),a=n(30),s=n(31);t.default=function(e){return"function"!=typeof e.constructor||Object(s.default)(e)?{}:o(Object(a.default)(e))}},function(e,t,n){var r=n(15),i=n(49),o=n(11),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return Object(o.default)(e)&&Object(i.default)(e.length)&&!!a[Object(r.default)(e)]},c=n(33),u=n(20),l=u.default&&u.default.isTypedArray,d=l?Object(c.default)(l):s;t.default=d},function(e,t,n){var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},i=n(42),o=n(12),a=n(32),s=n(35),c=n(52),u=Object.prototype.hasOwnProperty;t.default=function(e,t){var n=Object(o.default)(e),l=!n&&Object(i.default)(e),d=!n&&!l&&Object(a.default)(e),f=!n&&!l&&!d&&Object(c.default)(e),p=n||l||d||f,h=p?r(e.length,String):[],g=h.length;for(var v in e)!t&&!u.call(e,v)||p&&("length"==v||d&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||Object(s.default)(v,g))||h.push(v);return h}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){var r=n(50),i=n(29),o=n(22);var a=function(e,t,n){(void 0!==n&&!Object(o.default)(e[t],n)||void 0===n&&!(t in e))&&Object(i.default)(e,t,n)};var s=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}(),c=n(45),u=n(46),l=n(47),d=n(51),f=n(42),p=n(12),h=n(23),g=n(11);var v=function(e){return Object(g.default)(e)&&Object(h.default)(e)},_=n(32),y=n(28),m=n(10),b=n(15),w=n(30),O=Function.prototype,E=Object.prototype,S=O.toString,T=E.hasOwnProperty,I=S.call(Object);var A=function(e){if(!Object(g.default)(e)||"[object Object]"!=Object(b.default)(e))return!1;var t=Object(w.default)(e);if(null===t)return!0;var n=T.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&S.call(n)==I},C=n(52);var k=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},x=n(17),P=n(18);var D=function(e){return Object(x.default)(e,Object(P.default)(e))};var R=function(e,t,n,r,i,o,s){var h=k(e,n),g=k(t,n),b=s.get(g);if(b)a(e,n,b);else{var w=o?o(h,g,n+"",e,t,s):void 0,O=void 0===w;if(O){var E=Object(p.default)(g),S=!E&&Object(_.default)(g),T=!E&&!S&&Object(C.default)(g);w=g,E||S||T?Object(p.default)(h)?w=h:v(h)?w=Object(l.default)(h):S?(O=!1,w=Object(c.default)(g,!0)):T?(O=!1,w=Object(u.default)(g,!0)):w=[]:A(g)||Object(f.default)(g)?(w=h,Object(f.default)(h)?w=D(h):Object(m.default)(h)&&!Object(y.default)(h)||(w=Object(d.default)(g))):O=!1}O&&(s.set(g,w),i(w,g,r,o,s),s.delete(g)),a(e,n,w)}};var j=function e(t,n,i,o,c){t!==n&&s(n,(function(s,u){if(c||(c=new r.default),Object(m.default)(s))R(t,n,u,i,e,o,c);else{var l=o?o(k(t,u),s,u+"",t,n,c):void 0;void 0===l&&(l=s),a(t,u,l)}}),P.default)};var N=function(e){return e};var M=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},L=Math.max;var B=function(e,t,n){return t=L(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=L(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),M(e,this,s)}};var F=function(e){return function(){return e}},U=n(37),W=U.default?function(e,t){return Object(U.default)(e,"toString",{configurable:!0,enumerable:!1,value:F(t),writable:!0})}:N,V=Date.now;var G=function(e){var t=0,n=0;return function(){var r=V(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(W);var H=function(e,t){return G(B(e,t,N),e+"")},z=n(35);var Y=function(e,t,n){if(!Object(m.default)(n))return!1;var r=typeof t;return!!("number"==r?Object(h.default)(n)&&Object(z.default)(t,n.length):"string"==r&&t in n)&&Object(o.default)(n[t],e)};var q=function(e){return H((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Y(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}((function(e,t,n){j(e,t,n)}));t.default=q},function(e,t,n){n.r(t),function(e){n.d(t,"getCloudInstance",(function(){return _})),n.d(t,"getCloudAPI",(function(){return y})),n.d(t,"DefaultCloud",(function(){return m})),n.d(t,"InstanceCloud",(function(){return b}));var r=n(0),i=n(56),o=n(60),a=n(39),s=n(1),c=n(2),u=n(38),l=n(3),d=n(8),f=n(6),p=n(4),h=n(43),g=n(40),v=n(59),_=function(e){void 0===e&&(e={});var t=e.sdk,n=e.identifiers||{};return t&&Object(d.setSDK)(n,t),new m(n,!1)},y=function(e){return void 0===e&&(e={}),_(e).exportAPI},m=function(){function t(t,n){var i=this;this.inited=!1,this.services={},this.apiServiceMap={},this.debug=!1,this.testSpeed=function(){return Object(r.__awaiter)(i,void 0,void 0,(function(){var e,t,n;return Object(r.__generator)(this,(function(r){return e=+new Date,t=e,n=Object(u.constructTunnelReq)({cloud:this,apiName:"tcbapi_testspeed",serializedReqData:null}),[2,Object(u.tunnel)(n,{fireOnIdle:!0,onFire:function(){e=+new Date,t=e}}).then((function(n){Object(p.reportAPISpeed)({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:e,tunnelEndTime:+new Date,tunnelStartTime:t,tunnelTimeNoCSNetCost:n.data.baseresponse.stat.qbase_cost_time})})).catch((function(e){0}))]}))}))},this.identifiers=t,this.isInstance=n,this.runtimeInfo=Object(g.getRuntimeInfo)(),this.serviceEndpoint=new v.ServiceEndpoint,this.request=Object(u.getBoundTunnelRequest)({cloud:this});var a=this;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(e){return new b(t,a,e).exportAPI}),Object(o.registerServices)(this),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:w()},this.appConfig=Object(r.__assign)({},h.default),this.apiPermissions={};try{f.default.onReady((function(){setTimeout((function(){Object(p.init)()}),2e3)})),e.env.TEST&&(this.exportAPI.getCloudInstance=function(){return i})}catch(e){}}return t.prototype.getMetaData=function(){var t;if(!this.meta.sdk_version){var n=Object(d.getSDK)(this.identifiers);if(n){var r=n.wx;r&&r.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version="wx-miniprogram-sdk/"+r.version.version+" ("+Date.parse(r.version.updateTime+" GMT+0800")+")":this.meta.sdk_version="wx-web-sdk/"+e.env.SDKVERSION+" ("+Date.parse(e.env.SDKVERSION_UPDATETIME+" GMT+0800")+")")}}return this.meta.filter_user_info="singlePage"===(null===(t=f.default.appLaunchInfo)||void 0===t?void 0:t.mode),this.meta},t.prototype.getConfig=function(){return this.config},t.prototype.getEnvForService=function(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(Object(c.getType)(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}},t.prototype.checkAPIPermission=function(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]},t.prototype.init=function(e){var t=this;return void 0===e&&(e={}),this.inited=!0,this.initConfig(e),Promise.all([this.sendInitRequest().then((function(){t.testSpeed()}))]).then((function(){}))},t.prototype.initConfig=function(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=Object(i.default)(this.config.database,w()):this.config.database=w()},t.prototype.sendInitRequest=function(){var e=this,t="string"==typeof this.config.env?this.config.env:void 0,n=JSON.stringify({trace_user:!1!==this.config.traceUser,env:t}),i=+new Date,o=i;return this.request({apiName:"tcbapi_init",serializedReqData:n,env:t}).then((function(t){var n=+new Date,a=t.data;e.appConfig=Object(r.__assign)(Object(r.__assign)({},e.appConfig),a.config);for(var s=a.tcb_api_list||[],c=0,u=s.length;c<u;c++)e.apiPermissions[s[c].apiname]=s[c].status;Object(p.reportAPISpeed)({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:i,tunnelEndTime:n,tunnelStartTime:o,tunnelTimeNoCSNetCost:a.baseresponse.stat.qbase_cost_time})})).catch((function(e){console.error("cloud init error: ",e)}))},t.prototype.registerService=function(e){this.services[e.name]=e;var t=e.getAPIs();for(var n in t)if(this.apiServiceMap[n]=e.name,"function"==typeof t[n])this.registerFunction(n,!0,t[n]);else{var r=t[n],i=r.initRequired,o=r.fn;this.registerFunction(n,i,o)}},t.prototype.registerFunction=function(e,t,n){var r=this;this.exportAPI[e]=t?function(){if(!r.inited)throw new s.CloudSDKError({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!r.checkAPIPermission(e))throw new s.CloudSDKError({errCode:l.ERR_CODE.SDK_API_PERMISSION_DENIED,errMsg:l.ERR_CODE[l.ERR_CODE.SDK_API_PERMISSION_DENIED]});return n.apply(r,arguments)}:n},t.prototype.toJSON=function(){},t}(),b=function(e){function t(t,n,r){var o=e.call(this,t,!0)||this;if("web"===o.runtimeInfo.env){if(!r.identityless&&!r.appid)throw new Error("appid must be provided");if(!r.resourceAppid)throw new Error("resourceAppid must be provided")}if(!r.resourceEnv)throw new Error("resourceEnv must be provided");if(r.config||(r.config={}),o.defaultInstance=n,o.instanceOptions=JSON.parse(JSON.stringify(r)),o.meta=n.meta,o.apiPermissions=n.apiPermissions,o.instanceOptions.config.database=Object(i.default)(w(),o.instanceOptions.config.database||{}),"web"===o.runtimeInfo.env){if(o.exportAPI.init=o.webInit.bind(o),o.webRequest=Object(a.getBoundAuthRequest)(o),o.registerService(Object(a.createWebService)(o)),!o.instanceOptions.identityless&&(o.authStorage=o.defaultInstance.authStorage,!o.authStorage))throw new Error("authStorage not found")}else o.exportAPI.init=o.miniprogramInit.bind(o);return o.instanceOptions.resourceAppid&&(o.exportAPI.refreshAuth=o.refreshAuth.bind(o)),o}return Object(r.__extends)(t,e),t.prototype.miniprogramInit=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.inited?[2]:this.instanceOptions.resourceAppid?[4,this.refreshAuth()]:[3,2];case 1:return t=r.sent(),0===(n=t.data.env_auth_info).errCode?(e.prototype.init.call(this),[2,{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}]):[2,{errCode:n.errCode,errMsg:n.errMsg}];case 2:return e.prototype.init.call(this),[2]}}))}))},t.prototype.webInit=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,i=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.inited?[2]:this.instanceOptions.identityless?[3,2]:[4,this.refreshAuth()];case 1:return t=r.sent(),0===(n=t.data.env_auth_info).errCode?(this.sendInitRequest().then((function(){i.testSpeed()})),e.prototype.init.call(this),[2,{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}]):[2,{errCode:n.errCode,errMsg:n.errMsg}];case 2:return this.inited=!0,[2]}}))}))},t.prototype.webRefreshToken=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return this._webCurrentRefreshTokenPromise||(this._webCurrentRefreshTokenPromise=new Promise((function(t,n){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,i,o;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,this.webRequest({url:"/refresh_token",method:"POST",json:{appid:this.instanceOptions.appid,refresh_token:this.authStorage.getItem("refreshToken")}})];case 1:return e=r.sent(),i=e.data,this.authStorage.setItem("appid",i.access_token),t(),[3,4];case 2:return o=r.sent(),n(o),[3,4];case 3:return this._webCurrentRefreshTokenPromise=void 0,[7];case 4:return[2]}}))}))}))),[2,this._webCurrentRefreshTokenPromise]}))}))},t.prototype.refreshAuth=function(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,n=t,r=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return r.then((function(e){var r=+new Date;Object(p.reportAPISpeed)({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:r,tunnelStartTime:n})})),r},t}(m);function w(){return{realtime:{maxReconnect:h.clientConfigDefaults.REALTIME_DB_MAX_RECONNECT,reconnectInterval:h.clientConfigDefaults.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:h.clientConfigDefaults.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}}.call(this,n(54))},function(e,t,n){n.r(t),t.default=function(){return!1}},function(e,t,n){n.r(t),n.d(t,"ServiceEndpoint",(function(){return c}));var r=n(0),i=n(38),o={},a={},s={},c=function(){function e(){}return e.prototype.setMetaData=function(e){this._meta=e},e.prototype.setTunnelRequest=function(e){this._tunnelRequest=e},e.prototype.getEndpoint=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(n){return(null==(t=o[e])?void 0:t.url)&&(null==t?void 0:t.expiresTs)&&Date.now()<t.expiresTs?[2,t]:[2,this.refreshContainerServiceEndpoint()]}))}))},e.prototype.refreshContainerServiceEndpoint=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return a.container||(clearTimeout(s.container),a.container=new Promise((function(t,n){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,c,u,l,d,f,p,h=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:e=[],c=0,r.label=1;case 1:if(!(c<3))return[3,9];r.label=2;case 2:return r.trys.push([2,7,,8]),u=Date.now(),this._tunnelRequest?[4,this._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:"{}"})]:[3,4];case 3:return l=r.sent(),[3,6];case 4:return[4,Object(i.default)({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:"{}",qbase_options:{},qbase_meta:this._meta,cli_req_id:+new Date+"_"+Math.random()}})];case 5:l=r.sent(),r.label=6;case 6:return d=l.data,Date.now()-u>1e3*d.expires_in?(e.push("result already expired (startTs "+u+" resultTs "+Date.now()+")"),[3,8]):(f=Date.now()+1e3*d.expires_in-(Date.now()-u),o.container={url:d.service_url,expiresTs:f},t(o.container),delete a.container,clearTimeout(s.container),s.container=setTimeout((function(){h.refreshContainerServiceEndpoint()}),.8*(f-Date.now())),[2]);case 7:return p=r.sent(),e.push(p+""),[3,8];case 8:return c++,[3,1];case 9:return n("get container service endpoints errors: "+e.join("\n")),delete a.container,[2]}}))}))}))),[2,a.container]}))}))},e}()},function(e,t,n){var r={};n.r(r),n.d(r,"__safe_props__",(function(){return Rt})),n.d(r,"Point",(function(){return yt})),n.d(r,"GeoPoint",(function(){return mt})),n.d(r,"MultiPoint",(function(){return bt})),n.d(r,"GeoMultiPoint",(function(){return wt})),n.d(r,"LineString",(function(){return Ot})),n.d(r,"GeoLineString",(function(){return Et})),n.d(r,"MultiLineString",(function(){return St})),n.d(r,"GeoMultiLineString",(function(){return Tt})),n.d(r,"Polygon",(function(){return It})),n.d(r,"GeoPolygon",(function(){return At})),n.d(r,"MultiPolygon",(function(){return Ct})),n.d(r,"GeoMultiPolygon",(function(){return kt}));var i={};n.r(i),n.d(i,"extractQueryOptions",(function(){return sn})),n.d(i,"getProjectionDefinition",(function(){return un})),n.d(i,"OperatorMap",(function(){return Ro})),n.d(i,"AggregateOperatorMap",(function(){return jo})),n.d(i,"operatorToString",(function(){return Mo})),n.d(i,"aggregateOperatorToString",(function(){return Lo})),n.d(i,"QuerySerializer",(function(){return Wo})),n.d(i,"encode",(function(){return Vo})),n.d(i,"UpdateSerializer",(function(){return qo})),n.d(i,"ProjectionSerializer",(function(){return Xo})),n.d(i,"Decoder",(function(){return $o})),n.d(i,"AggregateSerializer",(function(){return Fo})),n.d(i,"flattenQueryObject",(function(){return en})),n.d(i,"flattenObject",(function(){return tn})),n.d(i,"mergeConditionAfterEncode",(function(){return nn})),n.d(i,"isConversionRequired",(function(){return rn})),n.d(i,"encodeInternalDataType",(function(){return on})),n.d(i,"decodeInternalDataType",(function(){return an}));var o=n(0),a=n(5),s=n(2),c=n(1),u=n(3);function l(e,t,n,r){void 0===n&&(n="parameter"),void 0===r&&(r=c.CloudSDKError);var i=function(e,t,n){void 0===n&&(n="parameter");var r=function e(t,n,r){var i=Object(s.getType)(t),o=Object(s.getType)(n);if("string"===o)return i!==n?r+" should be "+n+" instead of "+i+";":"";if(i!==o)return r+" should be "+o+" instead of "+i+"; ";var a="";switch(i){case"object":for(var c in n)a+=e(t[c],n[c],r+"."+c);break;case"array":for(var u=0;u<n.length;u++)a+=e(t[u],n[u],r+"["+u+"]")}return a}(e,t,n);return{passed:!r,reason:r}}(e,t,n);if(!i.passed)throw new r({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:i.reason})}function d(e,t,n,r){if(void 0===r&&(r=c.CloudSDKError),null==e)throw new r({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter "+t+" of function "+n+" must be provided"})}function f(e){var t=e.name,n=e.input,r=e.max,i=e.maxWording,o=void 0===i?"":i,a=e.ErrorClass,s=void 0===a?c.CloudSDKError:a;if(n.length>r)throw new s({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:t+" size must be less than "+(o||r)})}function p(e){var t=e.target,n=e.name,r=e.ErrorClass,i=void 0===r?c.CloudSDKError:r;if(0===Object.keys(t).length)throw new i({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:n+" must not be empty"})}var h=n(19);function g(e,t){if(void 0===t&&(t=!1),t)return function(e){switch(Object(s.getType)(e)){case"object":return Object(o.__assign)({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if(Object(s.isPlainObject)(e))return Object(o.__assign)({},e);switch(Object(s.getType)(e)){case"object":return e;case"array":return e.slice();default:return e}}var v=n(4);function _(e){return e+":ok"}function y(e,t){return JSON.stringify(e,(function(e,n){if(t&&t.has(n))return t.get(n);switch(Object(s.getType)(n)){case"arraybuffer":var r=new Uint8Array(n);return{type:"Buffer",data:Object(o.__spread)(r)}}return n}))}function m(e){return b(JSON.parse(e))}function b(e){switch(Object(s.getType)(e)){case"object":return w(e);case"array":return e.map(b);default:return e}}function w(e){var t=e,n=O(t);if(t!==n)return n;for(var r in t){var i=t[r];switch(Object(s.getType)(i)){case"object":var o=O(i);t[r]=o!==i?o:w(t[r]);break;case"array":(o=b(i))!==i&&(t[r]=o);break;default:continue}}return t}function O(e){for(var t in e)switch(t){case"type":switch(e.type){case"Buffer":if(Object(s.isArray)(e.data)&&Object(s.isNumber)(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}var E=n(8),S=Symbol.for("CLOUD_ID"),T=Symbol("CDN");function I(e){var t=[];for(var n in e)Object(s.isObject)(e[n])&&e[n]._internalType===S&&t.push({key:n,cloudID:e[n].cloudID});return t}function A(e){return function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){function n(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(n){return[2,new Promise((function(n,i){r(t,e.appConfig.maxPollRetry||50,n,i)}))]}))}))}function r(t,n,i,a){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(o){return Object(E.getSDK)(e.identifiers)._requestSkipCheckDomain({url:t,success:function(e){try{if(200!==e.statusCode)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:"polling status code "+e.statusCode},U));var o=e.data;if(!o)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},U));if(o.base_resp&&0===o.base_resp.ret){if(0!==o.status){if(1===o.status){if(0!==o.service_errcode){var s=Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"requestID "+o.func_req_id+", cloud function service error code "+(o.service_errcode||"unknown")+", error message "+(o.service_errmsg||"unknown")},U);return s.requestID=o.func_req_id,a(s)}var l=o.content;try{l=m(l)}catch(e){try{l=JSON.parse(l)}catch(e){}}return i({result:l,requestID:o.func_req_id})}return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},U))}if(!(n>=0))return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},U));r(t,n-1,i,a)}else{if(!o.base_resp)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},U));if(0!==o.base_resp.ret)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.ret "+o.base_resp.ret},U))}}catch(e){a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: "+e},U))}},fail:function(e){a(Object(c.returnAsFinalCloudSDKError)(e,U))}}),[2]}))}))}var i,a,s,l,d,p,h,g,v,b,w,O,S,T,A,C;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:if(i=Object(o.__assign)({},t.data),(a=I(i).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length)try{for(s=Object(o.__values)(a),l=s.next();!l.done;l=s.next())d=l.value,delete i[d.key_name]}catch(e){A={error:e}}finally{try{l&&!l.done&&(C=s.return)&&C.call(s)}finally{if(A)throw A.error}}return[4,t.cdnMapPromise];case 1:return p=r.sent(),f({input:h=y(i,p),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"}),g={function_name:t.name,data:h,cloudid_list:a},v=y(g),t.context.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:v,env:t.config&&t.config.env||e.env})];case 2:if(b=r.sent(),t.context.tunnelEndTime=+new Date,!(w=b.data))throw Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},U);if(w.event_id,!w.poll_url)throw Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_URL]},U);return w.poll_url.indexOf("?")>-1?w.poll_url+="&devtools_ignore=true&skip_domain_check=true":w.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date,[4,n(w.poll_url)];case 3:return O=r.sent(),S=O.result,T=O.requestID,t.context.pollEndTime=+new Date,[2,{errMsg:_(U),result:S,requestID:T}]}}))}))}}var C=n(7),k=n(6),x=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},P=function(e){return e.join("->")};function D(e){return function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){function n(t,n,i,a){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(o){return[2,new Promise((function(o,s){var c=[x("start")],u=function(e,t,n){var r=function(t){e.push(x("app "+t))};return Object(C.onAppVisibilityChange)(r),{resolve:function(e){Object(C.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(C.offAppVisibilityChange)(r),n(e)}}}(c,o,s),l=u.resolve,d=u.reject;r({param:t,functionName:t.name,data:n,cloudIDList:i,callID:a,action:j.CALL,scene:N.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:c,resolve:l,reject:d})}))]}))}))}function r(n){return Object(o.__awaiter)(this,void 0,void 0,(function(){function i(e){try{if(S)return;I(),R(e);var t=e.data;if(!t)return g.push(x("empty resp")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT},U));if(!t.baseresponse||0!==t.baseresponse.errcode)return t.baseresponse?0!==t.baseresponse.errcode?w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode "+t.baseresponse.errcode+" errmsg "+t.baseresponse.errmsg+" (callId: "+d+")"},U)):w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp "+JSON.stringify(t.baseresponse)+" (callId: "+d+")"},U)):w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},U));if(0!==t.status){if(1===t.status){if(0!==t.service_errcode){if(t.service_errcode===u.ERR_CODE.TCB_FUNCTIONS_EXEC_FAIL){var i=t.service_errmsg||"";try{for(var a=i.split("\n"),s=[],l=0;l<a.length;l++)a[l].startsWith("Error: ")&&s.push([a[l],l]);if(s.length%2==1){var f=s[Math.floor(s.length/2)][1];i=a.slice(f).join("\n")}}catch(e){}return(p=Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"云函数执行错误\n云端堆栈信息(error stack)("+(t.func_request_id?"requestId "+t.func_request_id+", ":"")+"callid "+d+"):\n"+i},U)).stack="Error: "+p.message,p.requestID=t.func_request_id,w(p)}var p;return(p=Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"\n云函数调用失败("+(t.func_request_id?"requestId "+t.func_request_id+", ":"")+"callid "+d+"):\n"+t.service_errcode+" "+t.service_errmsg},U)).stack="Error: "+p.message,p.requestID=t.func_request_id,w(p)}var v=t.data;try{v=m(v)}catch(e){try{v=JSON.parse(v)}catch(e){}}return b({result:v,requestID:t.func_request_id})}return g.push(x("poll result expired")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: "+d+") (trace: "+P(g)+")"},U))}if(!(h>=0))return g.push(x("too many polls, abort")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: "+d+") (trace: "+P(g)+")"},U));g.push(x("normal poll")),r(Object(o.__assign)(Object(o.__assign)({},n),{action:j.POLL,scene:N.NORMAL_POLL_RETRY,tryCount:h-1}))}catch(e){w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: "+e+" (callId: "+d+")"},U))}}var s,l,d,f,p,h,g,v,_,b,w,O,E,S,T,I,A,D,R,M=this;return Object(o.__generator)(this,(function(m){return s=n.functionName,l=n.data,d=n.callID,f=n.action,p=n.scene,h=n.tryCount,g=n.trace,v=n.systemErrorRetry,_=n.timeoutErrorRetry,b=n.resolve,w=n.reject,O={function_name:s,data:f===j.CALL?l:void 0,action:f,scene:p,call_id:d,cloudid_list:f===j.CALL?a:[]},E=y(O),S=!1,T=!1,I=function(){clearTimeout(D),T=!0},A=+new Date,D=setTimeout((function(){return Object(o.__awaiter)(M,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return t=e.appConfig.clientPollTimeout||2e4,+new Date-A>t?[4,Object(C.sleep)()]:[3,2];case 1:if(i.sent(),T)return[2];i.label=2;case 2:return!Object(k.isDevTools)()&&+new Date-A>e.appConfig.maxStartRetryGap?(g.push(x("timeout, exceed max retry gap")),[2,w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+d+") (trace: "+P(g)+")"},U))]):(S=!0,n.timeoutErrorRetry>0?(g.push(x("timeout, retry")),r(Object(o.__assign)(Object(o.__assign)({},n),{scene:N.TIMEOUT_RETRY,tryCount:h-1,timeoutErrorRetry:_-1}))):(g.push(x("timeout, abort")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: "+d+") (trace: "+P(g)+")"},U))),[2])}}))}))}),e.appConfig.clientPollTimeout||2e4),R=function(e){var n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time))},e.request({apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:E,env:t.config&&t.config.env||e.env}).then(i).catch((function(e){S||(I(),e&&e.operateWXDataFail&&v>0?(g.push(x("system error ("+e+"), retry")),r(Object(o.__assign)(Object(o.__assign)({},n),{scene:N.SYSTEM_ERROR_RETRY,tryCount:h-1,systemErrorRetry:v-1}))):(g.push(x("system error ("+e+"), abort")),w(Object(c.toSDKError)(e+" (callId: "+d+") (trace: "+P(g)+")",U))))})),[2]}))}))}var i,a,s,l,d,p,h,g,v,b,w,O,E;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:if(i=Object(o.__assign)({},t.data),(a=I(i).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length)try{for(s=Object(o.__values)(a),l=s.next();!l.done;l=s.next())d=l.value,delete i[d.key_name]}catch(e){O={error:e}}finally{try{l&&!l.done&&(E=s.return)&&E.call(s)}finally{if(O)throw O.error}}return[4,t.cdnMapPromise];case 1:return p=r.sent(),f({input:h=y(i,p),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"}),g=+new Date+"-"+Math.random(),t.context.tunnelStartTime=+new Date,[4,n(t,h,a,g)];case 2:return v=r.sent(),b=v.result,w=v.requestID,t.context.tunnelEndTime=+new Date,[2,{errMsg:_(U),result:b,requestID:w}]}}))}))}}function R(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return t=new WeakMap,n=[],e?(JSON.stringify(e,(function(e,r){return r&&r._internalType===T?void n.push(new Promise((function(e,n){var i,a={appType:301,fileType:20303,fileKey:"file_"+Math.random()},c=r;switch(Object(s.getType)(c.target)){case"object":if(!c.target.filePath)throw new Error("filePath must be provided");a.filePath=c.target.filePath;break;default:a.fileData=c.target}e((i=a,new Promise((function(e,t){var n=Object(o.__assign)(Object(o.__assign)({},i),{appType:i.appType||301,fileType:i.fileType||20303,fileKey:i.fileKey||"file_"+Math.random()});Object(E.getSDK)().uploadToCommonCDN(Object(o.__assign)(Object(o.__assign)({},n),{success:e,fail:t}))}))).then((function(e){t.set(r,e.fileUrl)})))}))):r})),[4,Promise.all(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2,t]}}))}))}var j,N,M,L=function(e){return Object(o.__assign)(Object(o.__assign)({},e),{errMsg:void 0})},B=function(e){try{Object(k.isDevTools)()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(Object(o.__assign)(Object(o.__assign)({},e),{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},F=function(e,t){try{if(Object(k.isDevTools)()&&"undefined"!=typeof __global&&__global.networkLog){var n=t(),r=Math.random()+"-"+ +new Date,i=n.console||!1,a=n.resultGetter||L;B({reqId:r,type:"requestWillBeSent",url:n.url,headers:n.headers||{},body:n.reqBody,console:i,callFramesIgnoreLength:2,timestampMs:n.timestampMs}),e.then((function(e){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(void 0===n&&(n=0),new Promise((function(e){return setTimeout(e,n)})))];case 1:return t.sent(),B({reqId:r,type:"loadingFinished",body:JSON.stringify(a(e),null,2),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()}),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}var n}))}))})).catch((function(e){try{B({reqId:r,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:Object(s.isObject)(e)?e.errMsg||JSON.stringify(e):e.toString(),console:i,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(j||(j={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(N||(N={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(M||(M={}));var U="cloud.callFunction";function W(e){var t,n,r;function i(){return r||(r=function(e){return function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a,s;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n={function_name:t.name,data:y(t.data),cloudid_list:[]},r=y(n),[4,e.request({apiName:"tcbapi_callfunction",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:if(i=o.sent(),a=i.data,s=a&&a.data)try{s=JSON.parse(s)}catch(e){}return[2,{errMsg:_(U),result:s}]}}))}))}}(e)),r}return function(e){var t=+new Date;l(e,"object");var n=g(e);return n.data||(n.data={}),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,Object(a.hasAPICallback)(n)?function(e){Object(h.wrapParamCallbacksWithTryCatch)({apiName:U,param:e}),s(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(U,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(U,e,t)}))}(n):s(n)};function s(r){return Object(o.__awaiter)(this,void 0,void 0,(function(){function a(){return 1===r.version}var s,u,d;return Object(o.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,5,6,7]),function(e){l(e,{name:"string"}),e.data&&l(e.data,"object"),e.config&&e.config.env&&l(e.config.env,"string")}(r),r.cdnMapPromise=R(r.data),s=a()?(t||(t=A(e)),t)(r):(n||(n=D(e)),n)(r),Object(k.isDevTools)()&&(u=Date.now(),r.cdnMapPromise.then((function(t){F(s,(function(){var n;return{url:"wx.cloud.callFunction."+r.name,headers:{Env:e.isInstance?e.env:(null===(n=r.config)||void 0===n?void 0:n.env)||e.env},reqBody:y(r.data,t),timestampMs:u,console:e.debug}}))})).catch((function(){F(s,(function(){var t;return{url:"wx.cloud.callFunction."+r.name,headers:{Env:e.isInstance?e.env:(null===(t=r.config)||void 0===t?void 0:t.env)||e.env},reqBody:y(r.data),timestampMs:u,console:e.debug}}))}))),[4,s];case 1:return[2,f.sent()];case 2:return[4,i()(r)];case 3:return[2,f.sent()];case 4:return[3,7];case 5:throw d=f.sent(),Object(c.returnAsFinalCloudSDKError)(d,U);case 6:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r.context),{apiEndTime:+new Date,apiName:a()?U:"cloud.callFunction_real_v2"})),[7];case 7:return[2]}}))}))}}function V(e){return{callFunction:W(e)}}var G="functions";function H(e){e.registerService(function(e){var t={name:G,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(G)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:G,context:t,getAPIs:V.bind(null,t)}}(e))}var z,Y,q,K,J="cloud.callContainer";function X(e){return function(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n;return Object(o.__generator)(this,(function(r){return n=Date.now(),[2,Promise.all([t.cdnMapPromise,e.serviceEndpoint.getEndpoint("container")]).then((function(r){var i=Object(o.__read)(r,2),a=i[0],s=i[1];return t.endpointCost=Date.now()-n,t.shouldSerialize&&(t.data=y(t.data,a)),function(t,n){return Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(r){return[2,new Promise((function(r,i){var a,s=Object(E.getSDK)(e.identifiers),c=Object(o.__assign)(Object(o.__assign)({},n.header),{"X-WX-ENV":e.isInstance?e.env:(null===(a=n.config)||void 0===a?void 0:a.env)||e.env,"X-WX-CONTAINER-PATH":n.path,"X-WX-CALL-ID":Math.random()+"_"+Date.now(),"X-WX-TEST":"1"});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid),s._requestSkipCheckDomain({url:t,method:n.method,header:c,data:n.data,dataType:n.dataType,responseType:n.responseType,enableHttp2:!0,timeout:n.timeout,success:function(e){r(Object(o.__assign)(Object(o.__assign)({},e),{errMsg:J+":ok"}))},fail:function(e){i(Object(o.__assign)(Object(o.__assign)({},e),{errMsg:e.errMsg.replace(/^request/,J)}))}})}))]}))}))}(s.url,t)}))]}))}))}}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(z||(z={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(Y||(Y={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(q||(q={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(K||(K={}));var $=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},Z=function(e){return e.join("->")},Q=1e5,ee="cloud.callContainer";function te(e){return function(t){var n,r;return Object(o.__awaiter)(this,void 0,void 0,(function(){function i(t,n,r,i){return Object(o.__awaiter)(this,void 0,void 0,(function(){var s,c,u;return Object(o.__generator)(this,(function(o){return s=!1,t.hasOwnProperty("timeout")&&(c=new Promise((function(e,n){setTimeout((function(){s=!0,n("timeout (options.timeout == "+t.timeout+")")}),t.timeout)}))),u=new Promise((function(o,u){var l=[$("start")],d=function(e,t,n){var r=function(t){e.push($("app "+t))};return Object(C.onAppVisibilityChange)(r),{resolve:function(e){Object(C.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(C.offAppVisibilityChange)(r),n(e)}}}(l,o,u),f=d.resolve,p=d.reject;a({param:t,data:n,dataType:r,callID:i,action:z.CALL,retryType:Y.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!c&&s}},trace:l,resolve:f,reject:p})})),[2,c?Promise.race([u,c]):u]}))}))}function a(n){return Object(o.__awaiter)(this,void 0,void 0,(function(){function r(r){return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,s,d,f,g,v;return Object(o.__generator)(this,(function(y){switch(y.label){case 0:return y.trys.push([0,13,,14]),I||_.reached?[2]:(x(),R(r),(i=r.data)?i.baseresponse&&0===i.baseresponse.errcode?0!==i.status?[3,1]:p>=0?(h.push($("normal poll")),a(Object(o.__assign)(Object(o.__assign)({},n),{action:z.POLL,retryType:Y.None,tryCount:p-1})),[3,10]):(h.push($("too many polls, abort")),[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: "+l+") (trace: "+Z(h)+")"},ee))]):[3,11]:(h.push($("empty resp")),[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_CALL_RESULT},ee))]));case 1:return 1!==i.status?[3,9]:(s=void 0,i.data_type!==q.BASE64?[3,2]:(s=Object(C.base64ToArrayBuffer)(i.data),"json"===t.dataType?s=Object(C.tryJSONParse)(Object(C.arrayBufferToString)(s)):"arraybuffer"!==t.responseType&&(s=Object(C.arrayBufferToString)(s)),[3,8]));case 2:if(i.data_type!==q.CDN_URL)return[3,7];y.label=3;case 3:return y.trys.push([3,5,,6]),d=Object(E.getSDK)(e.identifiers),[4,new Promise((function(e,n){d._requestSkipCheckDomain({url:i.data,dataType:t.dataType,responseType:t.responseType,success:function(t){200!==t.statusCode?n("download response status code "+t.statusCode):e(t)},fail:function(e){n(e)}})}))];case 4:return f=y.sent(),s=f.data,[3,6];case 5:return g=y.sent(),[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:"error: "+g+" \n (callId: "+l+") (trace: "+Z(h)+")"},ee))];case 6:return[3,8];case 7:s=i.data,"arraybuffer"===t.responseType?s=Object(C.stringToArrayBuffer)(s):"json"===t.dataType&&(s=Object(C.tryJSONParse)(s)),y.label=8;case 8:return[2,m({result:{data:s,statusCode:i.http_code,header:i.headers.reduce((function(e,t){return e[t.k]=t.v,e}),{})}})];case 9:return h.push($("poll result expired")),[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: "+l+") (trace: "+Z(h)+")"},ee))];case 10:return[3,12];case 11:return i.baseresponse?0!==i.baseresponse.errcode?[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode "+i.baseresponse.errcode+" errmsg "+i.baseresponse.errmsg+" (callId: "+l+")"},ee))]:[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp "+JSON.stringify(i.baseresponse)+" (callId: "+l+")"},ee))]:[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},ee))];case 12:return[3,14];case 13:return v=y.sent(),b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_ERROR,errMsg:"polling catch error: "+v+" (callId: "+l+")"},ee)),[3,14];case 14:return[2]}}))}))}var i,s,l,d,f,p,h,g,v,_,m,b,w,O,S,T,I,A,x,P,D,R,j=this;return Object(o.__generator)(this,(function(E){for(O in i=n.data,s=n.dataType,l=n.callID,d=n.action,f=n.retryType,p=n.tryCount,h=n.trace,g=n.systemErrorRetry,v=n.timeoutErrorRetry,_=n.userTimeout,m=n.resolve,b=n.reject,w=[],t.header)w.push({k:O,v:t.header[O]});return S=d===z.CALL?{method:t.method||"GET",headers:w,data:d===z.CALL?i:void 0,data_type:s,action:d,retryType:f,call_id:l}:{call_id:l,action:d,retryType:f},T=y(S),I=!1,A=!1,x=function(){clearTimeout(D),A=!0},P=+new Date,D=setTimeout((function(){return Object(o.__awaiter)(j,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return t=e.appConfig.clientPollTimeout||2e4,+new Date-P>t?[4,Object(C.sleep)()]:[3,2];case 1:if(r.sent(),A)return[2];r.label=2;case 2:return _.reached?[2]:!Object(k.isDevTools)()&&+new Date-P>e.appConfig.maxStartRetryGap?(h.push($("timeout, exceed max retry gap")),[2,b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+l+") (trace: "+Z(h)+")"},ee))]):(I=!0,n.timeoutErrorRetry>0?(h.push($("timeout, retry")),a(Object(o.__assign)(Object(o.__assign)({},n),{retryType:Y.Timeout,tryCount:p-1,timeoutErrorRetry:v-1}))):(h.push($("timeout, abort")),b(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: "+l+") (trace: "+Z(h)+")"},ee))),[2])}}))}))}),e.appConfig.clientPollTimeout||2e4),R=function(e){var n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time)},_.reached||e.request({apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:T,env:t.config&&t.config.env||e.env}).then(r).catch((function(e){I||_.reached||(x(),e&&e.operateWXDataFail&&g>0?(h.push($("system error ("+e+"), retry")),a(Object(o.__assign)(Object(o.__assign)({},n),{retryType:Y.Error,tryCount:p-1,systemErrorRetry:g-1}))):(h.push($("system error ("+e+"), abort")),b(Object(c.toSDKError)(e+" (callId: "+l+") (trace: "+Z(h)+")",ee))))})),[2]}))}))}var l,d,f,p,h,g,v,m,b,w,O;return Object(o.__generator)(this,(function(a){switch(a.label){case 0:return t.shouldSerialize?[4,t.cdnMapPromise]:[3,2];case 1:l=a.sent(),t.data=y(t.data,l),a.label=2;case 2:if(d=q.RAW,f=(null===(n=t.method)||void 0===n?void 0:n.toUpperCase())||"GET",!t.data||!/^(POST|PUT|PATCH)$/.test(f))return[3,8];if("object"!==(p=Object(s.getType)(t.data)))return[3,3];if(t.isReqHeaderContentTypeJSON)t.data=JSON.stringify(t.data);else{if(!t.isReqHeaderContentTypeURLEncoded)throw new Error("input data cannnot be serialized");for(b in h="",t.data)h+=(h.length?"&":"")+encodeURIComponent(b)+"="+encodeURIComponent(t.data[b]);t.data=h}return[3,7];case 3:if("arraybuffer"!==p&&"string"!==p)return[3,6];if(g=!1,"string"===p?g=t.data.length>Q:t.data.byteLength>Q||(v=Object(C.arrayBufferToBase64)(t.data)).length>Q?g=!0:(t.data=v,d=q.BASE64),!g)return[3,5];throw new Error("input data size too large (> 100KB)");case 4:m=a.sent(),t.data=m.fileUrl,d=q.CDN_URL,a.label=5;case 5:return[3,7];case 6:throw new Error("input data type is not supported: "+p);case 7:return[3,9];case 8:t.data=void 0,a.label=9;case 9:for(b in t.header=Object(o.__assign)(Object(o.__assign)({},t.header),{"X-WX-ENV":e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.header)null!==t.header[b]&&void 0!==t.header[b]&&(t.header[b]+="");return w=+new Date+"-"+Math.random(),t.context.tunnelStartTime=+new Date,[4,i(t,t.data,d,w)];case 10:return O=a.sent().result,t.context.tunnelEndTime=+new Date,[2,Object(o.__assign)(Object(o.__assign)({},O),{errMsg:_(ee),callID:w})]}}))}))}}var ne="cloud.callContainer";function re(e){var t,n;return function(e){var t=+new Date;l(e,"object");var n=g(e);return n.data||(n.data={}),n.dataType||(n.dataType="json"),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,Object(a.hasAPICallback)(n)?function(e){Object(h.wrapParamCallbacksWithTryCatch)({apiName:ne,param:e}),r(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(ne,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(ne,e,t)}))}(n):r(n)};function r(r){return Object(o.__awaiter)(this,void 0,void 0,(function(){var i,a,u,d,f,p;return Object(o.__generator)(this,(function(h){switch(h.label){case 0:for(a in h.trys.push([0,2,3,4]),function(t){var n;if(l(t,{path:"string"}),e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null===(n=t.config)||void 0===n?void 0:n.env)l(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}(r),r.header||(r.header={}),r.dataType||(r.dataType="json"),r.responseType||(r.responseType="text"),i=!1,r.header)"content-type"===a.toLowerCase()&&(i=!0,"application/json"===r.header[a]&&(r.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===r.header[a]&&(r.isReqHeaderContentTypeURLEncoded=!0));return i||(r.header["content-type"]="application/json",r.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(r.method||"")&&r.data&&r.isReqHeaderContentTypeJSON&&(u=Object(s.getType)(r.data),r.shouldSerialize="string"!==u),r.cdnMapPromise=r.shouldSerialize?R(r.data):Promise.resolve(new Map),d=Date.now(),f=function(e){return 1===e.apiVersion}(r)?(t||(t=X(e)),t)(r):(n||(n=te(e)),n)(r),r.cdnMapPromise.then((function(t){try{F(f,(function(){var n;return{url:"wx.cloud.callContainer"+r.path,headers:{Env:e.isInstance?e.env:(null===(n=r.config)||void 0===n?void 0:n.env)||e.env},reqBody:y(r.data,t),timestampMs:d,console:e.debug}}))}catch(t){F(f,(function(){var t;return{url:"wx.cloud.callContainer"+r.path,headers:{Env:e.isInstance?e.env:(null===(t=r.config)||void 0===t?void 0:t.env)||e.env},reqBody:y(r.data),timestampMs:d,console:e.debug}}))}})),[4,f];case 1:return[2,h.sent()];case 2:throw p=h.sent(),Object(c.returnAsFinalCloudSDKError)(p,ne);case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r.context),{apiEndTime:+new Date,apiName:ne})),[7];case 4:return[2]}}))}))}}function ie(e){return{callContainer:re(e)}}var oe="container";function ae(e){e.registerService(function(e){var t={name:oe,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(oe)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:oe,context:t,getAPIs:ie.bind(null,t)}}(e))}var se=n(40),ce="cloud.uploadFile";function ue(e){return function(e){if(e=g(e),Object(a.hasAPICallback)(e))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),i={apiStartTime:+new Date};return t(Object(o.__assign)(Object(o.__assign)({},e),{context:n,timing:i,uploadTaskAgent:r})).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(ce,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(ce,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(Object(o.__assign)(Object(o.__assign)({},e),{timing:n}))};function t(t){var r=this;return new Promise((function(i,a){return Object(o.__awaiter)(r,void 0,void 0,(function(){var r,s;return Object(o.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,3,4]),function(e){l(e,{cloudPath:"string"}),"miniprogram"===Object(se.getRuntimeInfo)().env?l(e,{filePath:"string"}):d(e,"file","uploadFile")}(t),t.filePath&&function(t){Object(o.__awaiter)(this,void 0,void 0,(function(){return Object(o.__generator)(this,(function(n){return[2,new Promise((function(n,r){wx.getFileInfo?wx.getFileInfo({filePath:t,success:function(t){t.size>e.appConfig.uploadMaxFileSize?r(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:"exceed max upload file size: "+e.appConfig.uploadMaxFileSize/1024/1024+" MB"})):n()},fail:function(){n()}}):n()}))]}))}))}(t.filePath),t.context&&(t.context.abort=function(){a(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce))},t.context.aborted)?[2,a(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce))]:[4,n(t)];case 1:return r=f.sent(),i(r),[3,4];case 2:return s=f.sent(),a(Object(c.returnAsFinalCloudSDKError)(s,ce)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},t.timing),{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"})),[7];case 4:return[2]}}))}))}))}function n(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(o.__generator)(this,(function(a){switch(a.label){case 0:return n=Object(E.getSDK)(e.identifiers),[4,r(t)];case 1:return i=a.sent(),[2,new Promise((function(e,r){if(t.context&&t.context.aborted)return r(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce));var a,u;if("web"===Object(se.getRuntimeInfo)().env){var l=new FormData;l.append("key",t.cloudPath),l.append("signature",i.authorization),l.append("x-cos-security-token",i.token),l.append("x-cos-meta-fileid",i.cos_file_id),l.append("file",t.file),a={url:i.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:l}}else a={url:i.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:i.authorization,"x-cos-security-token":i.token,"x-cos-meta-fileid":i.cos_file_id}};(u=n._uploadFileSkipCheckDomain(Object(o.__assign)(Object(o.__assign)({},a),{success:function(t){try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:_(ce),fileID:i.file_id,statusCode:t.statusCode});else{var n=new c.CloudSDKError({errMsg:"status "+t.statusCode+", error: "+t.data+";"});r(n)}}catch(n){var o=new c.CloudSDKError({errMsg:"Error : "+t.data+";"});r(o)}},fail:function(e){r(e)}})))&&(u.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&Object(s.isFunction)(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=u.abort.bind(u)))}))]}}))}))}function r(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n=JSON.stringify({path:t.cloudPath}),r=+new Date,[4,e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})];case 1:if(i=o.sent(),a=i.data,t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.url)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return[2,a]}}))}))}}var le="cloud.downloadFile";function de(e){return function(e){if(e=g(e),Object(a.hasAPICallback)(e))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),i={apiStartTime:+new Date};return t(Object(o.__assign)(Object(o.__assign)({},e),{context:n,timing:i,downloadTaskAgent:r})).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(le,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(le,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(Object(o.__assign)(Object(o.__assign)({},e),{timing:n}))};function t(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(o.__generator)(this,(function(r){return[2,new Promise((function(r,i){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,a;return Object(o.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),function(e){l(e,{fileID:"string"}),e.config&&e.config.env&&l(e.config.env,"string")}(e),e.context&&(e.context.abort=function(){i(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le))},e.context.aborted)?[2,i(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le))]:[4,n(e)];case 1:return t=s.sent(),r(t),[3,4];case 2:return a=s.sent(),i(Object(c.returnAsFinalCloudSDKError)(a,le)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},e.timing),{apiEndTime:+new Date,apiName:le})),[7];case 4:return[2]}}))}))}))]}))}))}function n(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,i;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n=Object(E.getSDK)(e.identifiers),[4,r(t)];case 1:return i=o.sent(),[2,new Promise((function(e,r){if(t.context&&t.context.aborted)return r(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le));var o=n._downloadFileSkipCheckDomain({url:i,success:function(t){e(t)},fail:function(e){r(e)}});o&&(o.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&Object(s.isFunction)(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=o.abort.bind(o)))}))]}}))}))}function r(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n=JSON.stringify({fileid:t.fileID}),r=+new Date,[4,e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})];case 1:if(i=o.sent(),a=i.data,t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.download_url)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return a.download_url.indexOf("?")>-1?a.download_url+="&skip_domain_check=true":a.download_url+="?skip_domain_check=true",[2,a.download_url]}}))}))}}var fe="cloud.getTempFileURL";function pe(e){return function(e){var n=g(e);return n.timing={apiStartTime:+new Date},Object(a.hasAPICallback)(n)?function(e){t(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(fe,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(fe,e,t)}))}(n):t(n)};function t(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var r;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),function(t){if(l(t,{fileList:"array"}),t.config&&t.config.env&&l(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length "+e.appConfig.getTempFileURLMaxReq})}(t),t.fileList.length?[4,n(t)]:[2,{errMsg:_(fe),fileList:[]}];case 1:return[2,i.sent()];case 2:throw r=i.sent(),Object(c.returnAsFinalCloudSDKError)(r,fe);case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},t.timing),{apiEndTime:+new Date,apiName:fe})),[7];case 4:return[2]}}))}))}function n(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n={file_list:t.fileList.map((function(e){return Object(s.isString)(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}}))},r=JSON.stringify(n),t.timing.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:return i=o.sent(),t.timing.tunnelEndTime=+new Date,a=i.data,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,[2,{errMsg:_(fe),fileList:a.download_list.map((function(e){return{fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg}}))}]}}))}))}}var he="cloud.deleteFile";function ge(e){return function(e){var n=g(e);return n.timing={apiStartTime:+new Date},Object(a.hasAPICallback)(n)?function(e){t(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(he,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(he,e,t)}))}(n):t(n)};function t(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var r;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),function(t){l(t,{fileList:"array"}),t.config&&t.config.env&&l(t.config.env,"string");for(var n=0,r=t.fileList.length;n<r;n++)l(t.fileList[n],"string","parameter.fileList["+n+"]");if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length "+e.appConfig.getTempFileURLMaxReq})}(t),t.fileList.length?[4,n(t)]:[2,{errMsg:_(he),fileList:[]}];case 1:return[2,i.sent()];case 2:throw r=i.sent(),Object(c.returnAsFinalCloudSDKError)(r,he);case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},t.timing),{apiEndTime:+new Date,apiName:he})),[7];case 4:return[2]}}))}))}function n(t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return n={fileid_list:t.fileList},r=JSON.stringify(n),t.timing.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:return i=o.sent(),t.timing.tunnelEndTime=+new Date,a=i.data,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,[2,{errMsg:_(he),fileList:a.delete_list.map((function(e){return{fileID:e.fileid,status:e.status,errMsg:e.errmsg}}))}]}}))}))}}function ve(e){return{uploadFile:ue(e),downloadFile:de(e),getTempFileURL:pe(e),deleteFile:ge(e)}}var _e="storage";function ye(e){e.registerService(function(e){var t={name:_e,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(_e)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:_e,context:t,getAPIs:ve.bind(null,t)}}(e))}var me,be=Symbol.for("UNSET_FIELD_NAME"),we=Symbol.for("AGGREGATE"),Oe=Symbol.for("AGGREGATE_PIPELINE"),Ee=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Se=Symbol.for("UPDATE_COMMAND"),Te=Symbol.for("QUERY_COMMAND"),Ie=Symbol.for("LOGIC_COMMAND"),Ae=Symbol.for("AGGREGATE_COMMAND"),Ce=Symbol.for("PROJECT_COMMAND"),ke=Symbol.for("GEO_POINT"),xe=Symbol.for("GEO_LINESTRING"),Pe=Symbol.for("GEO_POLYGON"),De=Symbol.for("GEO_MULTIPOINT"),Re=Symbol.for("GEO_MULTILINESTRING"),je=Symbol.for("GEO_MULTIPOLYGON"),Ne=Symbol.for("SERVER_DATE"),Me=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(me||(me={}));var Le=[me.AND,me.OR,me.NOT,me.NOR],Be=new Set(Le),Fe=function(){function e(e,t,n){this._internalType=Ie,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||be}return e.prototype._setFieldName=function(t){var n=this.operands.map((function(e){return e===me.AND||e===me.OR?e._setFieldName(t):e}));return new e(this.operator,n,t)},e.prototype.and=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","and");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(me.AND,r,this.fieldName)},e.prototype.or=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","or");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(me.OR,r,this.fieldName)},e.prototype.nor=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","nor");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(me.NOR,r,this.fieldName)},e.prototype.not=function(t){return d(t,"expression","not"),new e(me.NOT,[t],this.fieldName)},e.prototype.toJSON=function(){},e}();function Ue(e){return e&&e instanceof Fe&&e._internalType===Ie}var We;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(We||(We={}));var Ve=[We.EQ,We.NEQ,We.GT,We.GTE,We.LT,We.LTE,We.IN,We.NIN,We.GEO_NEAR,We.GEO_WITHIN,We.GEO_INTERSECTS,We.EXISTS,We.MOD,We.ALL,We.ELEM_MATCH,We.SIZE],Ge=new Set(Ve),He=(new Set(Object(o.__spread)(Ge,Be)),function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.operator=t,i._internalType=Te,i}return Object(o.__extends)(t,e),t.prototype._setFieldName=function(e){return new t(this.operator,this.operands,e)},t.prototype.eq=function(e){var n=new t(We.EQ,[e],this.fieldName);return this.and(n)},t.prototype.neq=function(e){var n=new t(We.NEQ,[e],this.fieldName);return this.and(n)},t.prototype.gt=function(e){var n=new t(We.GT,[e],this.fieldName);return this.and(n)},t.prototype.gte=function(e){var n=new t(We.GTE,[e],this.fieldName);return this.and(n)},t.prototype.lt=function(e){var n=new t(We.LT,[e],this.fieldName);return this.and(n)},t.prototype.lte=function(e){var n=new t(We.LTE,[e],this.fieldName);return this.and(n)},t.prototype.in=function(e){l(e,"array");var n=new t(We.IN,e,this.fieldName);return this.and(n)},t.prototype.nin=function(e){l(e,"array");var n=new t(We.NIN,e,this.fieldName);return this.and(n)},t.prototype.geoNear=function(e){var n=new t(We.GEO_NEAR,[e],this.fieldName);return this.and(n)},t.prototype.geoWithin=function(e){var n=new t(We.GEO_WITHIN,[e],this.fieldName);return this.and(n)},t.prototype.geoIntersects=function(e){var n=new t(We.GEO_INTERSECTS,[e],this.fieldName);return this.and(n)},t.prototype.exists=function(e){var n=new t(We.EXISTS,[e],this.fieldName);return this.and(n)},t.prototype.mod=function(e,n){var r=new t(We.MOD,[e,n],this.fieldName);return this.and(r)},t.prototype.all=function(e){var n=new t(We.ALL,e,this.fieldName);return this.and(n)},t.prototype.elemMatch=function(e){var n=new t(We.ELEM_MATCH,[e],this.fieldName);return this.and(n)},t.prototype.size=function(e){var n=new t(We.SIZE,[e],this.fieldName);return this.and(n)},t}(Fe));function ze(e){return e&&e instanceof He&&e._internalType===Te}var Ye;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(Ye||(Ye={}));new Set([Ye.SET,Ye.REMOVE,Ye.INC,Ye.MUL,Ye.MIN,Ye.MAX,Ye.RENAME,Ye.BIT,Ye.PUSH,Ye.POP,Ye.SHIFT,Ye.UNSHIFT,Ye.ADD_TO_SET,Ye.PULL,Ye.PULL_ALL]);var qe=function(){function e(e,t,n){this._internalType=Se,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||be}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e.prototype.toJSON=function(){},e}();function Ke(e){return e&&e instanceof qe&&e._internalType===Se}var Je;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(Je||(Je={}));Je.ABS,Je.ADD,Je.ADDTOSET,Je.ALLELEMENTSTRUE,Je.AND,Je.ANYELEMENTTRUE,Je.ARRAYELEMAT,Je.ARRAYTOOBJECT,Je.AVG,Je.CEIL,Je.CMP,Je.CONCAT,Je.CONCATARRAYS,Je.COND,Je.CONVERT,Je.DATEFROMPARTS,Je.DATETOPARTS,Je.DATEFROMSTRING,Je.DATETOSTRING,Je.DAYOFMONTH,Je.DAYOFWEEK,Je.DAYOFYEAR,Je.DIVIDE,Je.EQ,Je.EXP,Je.FILTER,Je.FIRST,Je.FLOOR,Je.GT,Je.GTE,Je.HOUR,Je.IFNULL,Je.IN,Je.INDEXOFARRAY,Je.INDEXOFBYTES,Je.INDEXOFCP,Je.ISARRAY,Je.ISODAYOFWEEK,Je.ISOWEEK,Je.ISOWEEKYEAR,Je.LAST,Je.LET,Je.LITERAL,Je.LN,Je.LOG,Je.LOG10,Je.LT,Je.LTE,Je.LTRIM,Je.MAP,Je.MAX,Je.MERGEOBJECTS,Je.META,Je.MIN,Je.MILLISECOND,Je.MINUTE,Je.MOD,Je.MONTH,Je.MULTIPLY,Je.NEQ,Je.NOT,Je.OBJECTTOARRAY,Je.OR,Je.POW,Je.PUSH,Je.RANGE,Je.REDUCE,Je.REVERSEARRAY,Je.RTRIM,Je.SECOND,Je.SETDIFFERENCE,Je.SETEQUALS,Je.SETINTERSECTION,Je.SETISSUBSET,Je.SETUNION,Je.SIZE,Je.SLICE,Je.SPLIT,Je.SQRT,Je.STDDEVPOP,Je.STDDEVSAMP,Je.STRCASECMP,Je.STRLENBYTES,Je.STRLENCP,Je.SUBSTR,Je.SUBSTRBYTES,Je.SUBSTRCP,Je.SUBTRACT,Je.SUM,Je.SWITCH,Je.TOBOOL,Je.TODATE,Je.TODECIMAL,Je.TODOUBLE,Je.TOINT,Je.TOLONG,Je.TOOBJECTID,Je.TOSTRING,Je.TOLOWER,Je.TOUPPER,Je.TRIM,Je.TRUNC,Je.TYPE,Je.WEEK,Je.YEAR,Je.ZIP;var Xe=function(){function e(e,t,n){this._internalType=Ae,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||be}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e}();function $e(e){return e&&e instanceof Xe&&e._internalType===Ae}var Ze;!function(e){e.SLICE="slice"}(Ze||(Ze={}));new Set([Ze.SLICE]);var Qe=function(){function e(e,t,n){this._internalType=Ce,this.operator=e,this.operands=t,this.fieldName=n||be}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e}();function et(e){return e&&e instanceof Qe&&e._internalType===Ce}var tt,nt,rt;function it(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,r,i,a,s,c,u,l,d,f,p;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.collectionName,r=e.query,i=e.options,a=e.instanceContext,s=e.timing,c=e.env,u=Object(k.isDevTools)()?e.explain:void 0,l=i&&i.multi,d=JSON.stringify({collection_name:t,query:JSON.stringify(r),multi:l,query_type:l?tt.WHERE:tt.DOC,explain:u}),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:c||a.serviceContext.env})];case 1:return f=o.sent(),s.tunnelEndTime=+new Date,u?[2,n(26).EJSON.deserialize(f.data)]:(p=f.data,s.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,[2,{removed:p.deleted}])}}))}))}function ot(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,r,i,a,s,c,u,l,d,f,p,h,g,v;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,r=e.collectionName,i=e.query,a=e.options,s=void 0===a?{}:a,c=e.instanceContext,u=e.timing,l=e.queryType,d=Object(k.isDevTools)()?e.explain:void 0,f={collection_name:r,query:JSON.stringify(i),query_type:l,explain:d},s.offset&&(f.offset=s.offset),s.limit&&(f.limit=s.limit),s.order&&(f.order=s.order),s.projection&&(f.projection=JSON.stringify(s.projection)),p=JSON.stringify(f),u.tunnelStartTime=+new Date,[4,c.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:c.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||c.serviceContext.env})];case 1:return h=o.sent(),u.tunnelEndTime=+new Date,d?[2,n(26).EJSON.deserialize(h.data)]:(g=h.data,u.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,v=g.data_list?JSON.parse(g.data_list):[],[2,{list:v=c.engine.Decoder.decode(v),offset:g.offset,limit:g.limit,total:g.total}])}}))}))}function at(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,r,i,a,s,c,u,l,d,p,h,g,v,_,y;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,r=e.collectionName,i=e.query,a=e.data,s=e.options,c=void 0===s?{}:s,u=e.instanceContext,l=e.timing,d=e.queryType,p=Object(k.isDevTools)()?e.explain:void 0,f({input:h=JSON.stringify(a),max:u.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:(u.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),(g={collection_name:r,query:JSON.stringify(i),data:h,query_type:d,explain:p}).multi=!1!==c.multi,g.merge=!1!==c.merge,c.upsert&&(g.upsert=c.upsert),v=JSON.stringify(g),l.tunnelStartTime=+new Date,[4,u.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:u.serviceContext.name,serializedReqData:v,requireDataNotEmpty:!0,env:t||u.serviceContext.env})];case 1:return _=o.sent(),l.tunnelEndTime=+new Date,p?[2,n(26).EJSON.deserialize(_.data)]:(y=_.data,l.tunnelTimeNoCSNetCost=y.baseresponse.stat.qbase_cost_time,[2,{updated:y.updated}])}}))}))}function st(e,t){return Object(o.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(o.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})];case 1:return n=i.sent(),[2,{envId:(r=n.data).env_id,secretVersion:r.secret_version,signStr:r.sign_str,wsUrl:r.ws_url}]}}))}))}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(tt||(tt={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(nt||(nt={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(rt||(rt={}));var ct=function(e){return function(t){function r(e,n){var r=t.call(this,n)||this;return r._internalType=we,r.collection=e,r}return Object(o.__extends)(r,t),r.prototype.pushStage=function(e,t){return new r(this.collection,Object(o.__spread)(this._stages,[new ut(e,t)]))},r.prototype.end=function(t){var r=this;void 0===t&&(t={});var i="collection.aggregate",s={apiStartTime:+new Date},u=function(){return function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,r,i,a,s,c,u,l,d,f,p;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,r=e.collectionName,i=e.stages,a=e.instanceContext,s=e.timing,c=Object(k.isDevTools)()?e.explain:void 0,u={collection_name:r,stages:i.map((function(e){for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error("empty encoded stage ("+JSON.stringify(e)+")")})),explain:c},l=JSON.stringify(u),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:a.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return d=o.sent(),s.tunnelEndTime=+new Date,c?[2,n(26).EJSON.deserialize(d.data)]:(f=d.data,s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,p=n(26).EJSON,[2,{list:JSON.parse(f.list).map((function(e){return p.parse(e)}))}])}}))}))}({env:e.database.config.env,collectionName:r.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(r._stages),instanceContext:e,timing:s,explain:t.explain})};var l=Object(a.hasAPICallback)(t),d=new Promise((function(e,n){return Object(o.__awaiter)(r,void 0,void 0,(function(){var r,a;return Object(o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),[4,u()];case 1:return r=l.sent(),t.explain&&Object(k.isDevTools)()?[2,e(r)]:(e({list:r.list,errMsg:_(i)}),[3,4]);case 2:return a=l.sent(),n(Object(c.returnAsFinalCloudSDKError)(a,i)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},s),{apiEndTime:+new Date,apiName:"cloud.db."+i})),[7];case 4:return[2]}}))}))}));if(!l)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(i,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(i,t,e)}))},r}(lt)},ut=function(e,t){this._internalType=Ee,this.stage=e,this.val=t},lt=function(){function e(e){this._internalType=Oe,this._stages=e}return e.prototype.pushStage=function(t,n){return new e(Object(o.__spread)(this._stages,[new ut(t,n)]))},e.prototype.addFields=function(e){return this.pushStage("addFields",e)},e.prototype.bucket=function(e){return this.pushStage("bucket",e)},e.prototype.bucketAuto=function(e){return this.pushStage("bucketAuto",e)},e.prototype.collStats=function(e){return this.pushStage("collStats",e)},e.prototype.count=function(e){return this.pushStage("count",e)},e.prototype.facet=function(e){return this.pushStage("facet",e)},e.prototype.geoNear=function(e){return this.pushStage("geoNear",e)},e.prototype.graphLookup=function(e){return this.pushStage("graphLookup",e)},e.prototype.group=function(e){return this.pushStage("group",e)},e.prototype.indexStats=function(){return this.pushStage("indexStats",{})},e.prototype.limit=function(e){return this.pushStage("limit",e)},e.prototype.lookup=function(e){return this.pushStage("lookup",e)},e.prototype.match=function(e){return this.pushStage("match",e)},e.prototype.out=function(e){return this.pushStage("out",e)},e.prototype.project=function(e){return this.pushStage("project",e)},e.prototype.redact=function(e){return this.pushStage("redact",e)},e.prototype.replaceRoot=function(e){return this.pushStage("replaceRoot",e)},e.prototype.sample=function(e){return this.pushStage("sample",e)},e.prototype.skip=function(e){return this.pushStage("skip",e)},e.prototype.sort=function(e){return this.pushStage("sort",e)},e.prototype.sortByCount=function(e){return this.pushStage("sortByCount",e)},e.prototype.unwind=function(e){return this.pushStage("unwind",e)},e.prototype.end=function(){},e}(),dt=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t)||this;return r._sealed=n,r}return Object(o.__extends)(t,e),t.prototype.pushStage=function(e,n){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new t(Object(o.__spread)(this._stages,[new ut(e,n)]))},t.prototype.done=function(){return new t(this._stages,!0)},t}(lt),ft=function(e){return e&&e._internalType===Oe},pt=function(e){return e&&e._internalType===Ee},ht=new Set(["each","position","slice","sort"]),gt={eq:function(e){return new He(We.EQ,[e])},neq:function(e){return new He(We.NEQ,[e])},lt:function(e){return new He(We.LT,[e])},lte:function(e){return new He(We.LTE,[e])},gt:function(e){return new He(We.GT,[e])},gte:function(e){return new He(We.GTE,[e])},in:function(e){return new He(We.IN,e)},nin:function(e){return new He(We.NIN,e)},geoNear:function(e){return new He(We.GEO_NEAR,[e])},geoWithin:function(e){return new He(We.GEO_WITHIN,[e])},geoIntersects:function(e){return new He(We.GEO_INTERSECTS,[e])},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(me.AND,n)},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(me.OR,n)},nor:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(me.NOR,n)},not:function(e){return new Fe(me.NOT,[e])},exists:function(e){return new He(We.EXISTS,[e])},mod:function(e,t){return new He(We.MOD,[e,t])},all:function(e){return new He(We.ALL,e)},elemMatch:function(e){return new He(We.ELEM_MATCH,[e])},size:function(e){return new He(We.SIZE,[e])},expr:function(e){return new He(We.EXPR,[e])},set:function(e){return new qe(Ye.SET,[e])},remove:function(){return new qe(Ye.REMOVE,[])},inc:function(e){return new qe(Ye.INC,[e])},mul:function(e){return new qe(Ye.MUL,[e])},min:function(e){return new qe(Ye.MIN,[e])},max:function(e){return new qe(Ye.MAX,[e])},rename:function(e){return new qe(Ye.RENAME,[e])},bit:function(e){return new qe(Ye.BIT,[e])},push:function(e){var t,n,r={};if(Object(s.isArray)(e))r.each=e;else if(Object(s.isObject)(e)&&Object(s.isArray)(e.each)){var i=Object.keys(e);if(1===i.length)r=e;else{var a=!1;try{for(var c=Object(o.__values)(i),u=c.next();!u.done;u=c.next()){var l=u.value;if(!ht.has(l)){a=!0;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}r=a?[e]:e}}else r.each=[e];return new qe(Ye.PUSH,[r])},pop:function(){return new qe(Ye.POP,[])},shift:function(){return new qe(Ye.SHIFT,[])},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new qe(Ye.UNSHIFT,n)},addToSet:function(e){return new qe(Ye.ADD_TO_SET,[e])},pull:function(e){return new qe(Ye.PULL,[e])},pullAll:function(e){return new qe(Ye.PULL_ALL,[e])},project:{slice:function(e){return new Qe(Ze.SLICE,[e])}},aggregate:{pipeline:function(){return new dt([])},abs:function(e){return new Xe(Je.ABS,[e])},add:function(e){return new Xe(Je.ADD,[e])},addToSet:function(e){return new Xe(Je.ADDTOSET,[e])},allElementsTrue:function(e){return new Xe(Je.ALLELEMENTSTRUE,[e])},and:function(e){return new Xe(Je.AND,[e])},anyElementTrue:function(e){return new Xe(Je.ANYELEMENTTRUE,[e])},arrayElemAt:function(e){return new Xe(Je.ARRAYELEMAT,[e])},arrayToObject:function(e){return new Xe(Je.ARRAYTOOBJECT,[e])},avg:function(e){return new Xe(Je.AVG,[e])},ceil:function(e){return new Xe(Je.CEIL,[e])},cmp:function(e){return new Xe(Je.CMP,[e])},concat:function(e){return new Xe(Je.CONCAT,[e])},concatArrays:function(e){return new Xe(Je.CONCATARRAYS,[e])},cond:function(e){return new Xe(Je.COND,[e])},convert:function(e){return new Xe(Je.CONVERT,[e])},dateFromParts:function(e){return new Xe(Je.DATEFROMPARTS,[e])},dateToParts:function(e){return new Xe(Je.DATETOPARTS,[e])},dateFromString:function(e){return new Xe(Je.DATEFROMSTRING,[e])},dateToString:function(e){return new Xe(Je.DATETOSTRING,[e])},dayOfMonth:function(e){return new Xe(Je.DAYOFMONTH,[e])},dayOfWeek:function(e){return new Xe(Je.DAYOFWEEK,[e])},dayOfYear:function(e){return new Xe(Je.DAYOFYEAR,[e])},divide:function(e){return new Xe(Je.DIVIDE,[e])},eq:function(e){return new Xe(Je.EQ,[e])},exp:function(e){return new Xe(Je.EXP,[e])},filter:function(e){return new Xe(Je.FILTER,[e])},first:function(e){return new Xe(Je.FIRST,[e])},floor:function(e){return new Xe(Je.FLOOR,[e])},gt:function(e){return new Xe(Je.GT,[e])},gte:function(e){return new Xe(Je.GTE,[e])},hour:function(e){return new Xe(Je.HOUR,[e])},ifNull:function(e){return new Xe(Je.IFNULL,[e])},in:function(e){return new Xe(Je.IN,[e])},indexOfArray:function(e){return new Xe(Je.INDEXOFARRAY,[e])},indexOfBytes:function(e){return new Xe(Je.INDEXOFBYTES,[e])},indexOfCP:function(e){return new Xe(Je.INDEXOFCP,[e])},isArray:function(e){return new Xe(Je.ISARRAY,[e])},isoDayOfWeek:function(e){return new Xe(Je.ISODAYOFWEEK,[e])},isoWeek:function(e){return new Xe(Je.ISOWEEK,[e])},isoWeekYear:function(e){return new Xe(Je.ISOWEEKYEAR,[e])},last:function(e){return new Xe(Je.LAST,[e])},let:function(e){return new Xe(Je.LET,[e])},literal:function(e){return new Xe(Je.LITERAL,[e])},ln:function(e){return new Xe(Je.LN,[e])},log:function(e){return new Xe(Je.LOG,[e])},log10:function(e){return new Xe(Je.LOG10,[e])},lt:function(e){return new Xe(Je.LT,[e])},lte:function(e){return new Xe(Je.LTE,[e])},ltrim:function(e){return new Xe(Je.LTRIM,[e])},map:function(e){return new Xe(Je.MAP,[e])},max:function(e){return new Xe(Je.MAX,[e])},mergeObjects:function(e){return new Xe(Je.MERGEOBJECTS,[e])},meta:function(e){return new Xe(Je.META,[e])},min:function(e){return new Xe(Je.MIN,[e])},millisecond:function(e){return new Xe(Je.MILLISECOND,[e])},minute:function(e){return new Xe(Je.MINUTE,[e])},mod:function(e){return new Xe(Je.MOD,[e])},month:function(e){return new Xe(Je.MONTH,[e])},multiply:function(e){return new Xe(Je.MULTIPLY,[e])},neq:function(e){return new Xe(Je.NEQ,[e])},not:function(e){return new Xe(Je.NOT,[e])},objectToArray:function(e){return new Xe(Je.OBJECTTOARRAY,[e])},or:function(e){return new Xe(Je.OR,[e])},pow:function(e){return new Xe(Je.POW,[e])},push:function(e){return new Xe(Je.PUSH,[e])},range:function(e){return new Xe(Je.RANGE,[e])},reduce:function(e){return new Xe(Je.REDUCE,[e])},reverseArray:function(e){return new Xe(Je.REVERSEARRAY,[e])},rtrim:function(e){return new Xe(Je.RTRIM,[e])},second:function(e){return new Xe(Je.SECOND,[e])},setDifference:function(e){return new Xe(Je.SETDIFFERENCE,[e])},setEquals:function(e){return new Xe(Je.SETEQUALS,[e])},setIntersection:function(e){return new Xe(Je.SETINTERSECTION,[e])},setIsSubset:function(e){return new Xe(Je.SETISSUBSET,[e])},setUnion:function(e){return new Xe(Je.SETUNION,[e])},size:function(e){return new Xe(Je.SIZE,[e])},slice:function(e){return new Xe(Je.SLICE,[e])},split:function(e){return new Xe(Je.SPLIT,[e])},sqrt:function(e){return new Xe(Je.SQRT,[e])},stdDevPop:function(e){return new Xe(Je.STDDEVPOP,[e])},stdDevSamp:function(e){return new Xe(Je.STDDEVSAMP,[e])},strcasecmp:function(e){return new Xe(Je.STRCASECMP,[e])},strLenBytes:function(e){return new Xe(Je.STRLENBYTES,[e])},strLenCP:function(e){return new Xe(Je.STRLENCP,[e])},substr:function(e){return new Xe(Je.SUBSTR,[e])},substrBytes:function(e){return new Xe(Je.SUBSTRBYTES,[e])},substrCP:function(e){return new Xe(Je.SUBSTRCP,[e])},subtract:function(e){return new Xe(Je.SUBTRACT,[e])},sum:function(e){return new Xe(Je.SUM,[e])},switch:function(e){return new Xe(Je.SWITCH,[e])},toBool:function(e){return new Xe(Je.TOBOOL,[e])},toDate:function(e){return new Xe(Je.TODATE,[e])},toDecimal:function(e){return new Xe(Je.TODECIMAL,[e])},toDouble:function(e){return new Xe(Je.TODOUBLE,[e])},toInt:function(e){return new Xe(Je.TOINT,[e])},toLong:function(e){return new Xe(Je.TOLONG,[e])},toObjectId:function(e){return new Xe(Je.TOOBJECTID,[e])},toString:function(e){return new Xe(Je.TOSTRING,[e])},toLower:function(e){return new Xe(Je.TOLOWER,[e])},toUpper:function(e){return new Xe(Je.TOUPPER,[e])},trim:function(e){return new Xe(Je.TRIM,[e])},trunc:function(e){return new Xe(Je.TRUNC,[e])},type:function(e){return new Xe(Je.TYPE,[e])},week:function(e){return new Xe(Je.WEEK,[e])},year:function(e){return new Xe(Je.YEAR,[e])},zip:function(e){return new Xe(Je.ZIP,[e])}}};function vt(e){return new _t(e)}var _t=function(){function e(e){void 0===e&&(e={offset:0}),l(e,"object","serverDate.options"),this.options=e}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return Ne},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{$date:this.options}},e}();function yt(e,t){return Ut(e)?jt(e):new mt(e,t)}var mt=function(){function e(e,t){this._internalType=ke,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var n=e,r=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){if(l(e,"number","longitude"),e>180||e<-180)throw new c.CloudSDKError({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){if(l(e,"number","latitude"),e>90||e<-90)throw new c.CloudSDKError({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=n,this.latitude=r}return e.prototype.toJSON=function(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function bt(e){return Wt(e)?Nt(e):new wt(e)}var wt=function(){function e(e){this._internalType=De,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}return e.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function Ot(e){return Vt(e)?Mt(e):new Et(e)}var Et=function(){function e(e){this._internalType=xe,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}return e.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function St(e){return Gt(e)?Lt(e):new Tt(e)}var Tt=function(){function e(e){this._internalType=Re,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}return e.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function It(e){return Ht(e)?Bt(e):new At(e)}var At=function(){function e(e){this._internalType=Pe,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}return e.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function Ct(e){return zt(e)?Ft(e):new kt(e)}var kt=function(){function e(e){this._internalType=je,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}return e.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map((function(e){return e.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();var xt,Pt,Dt,Rt=undefined;function jt(e){return yt(e.coordinates[0],e.coordinates[1])}function Nt(e){return bt(e.coordinates.map((function(e){return yt(e[0],e[1])})))}function Mt(e){return Ot(e.coordinates.map((function(e){return yt(e[0],e[1])})))}function Lt(e){return St(e.coordinates.map((function(e){return Ot(e.map((function(e){return yt(e[0],e[1])})))})))}function Bt(e){return It(e.coordinates.map((function(e){return Ot(e.map((function(e){return yt(e[0],e[1])})))})))}function Ft(e){return Ct(e.coordinates.map((function(e){return It(e.map((function(e){return Ot(e.map((function(e){return yt(e[0],e[1])})))})))})))}function Ut(e){return Object(s.isObject)(e)&&Yt(e.coordinates)}function Wt(e){return Object(s.isObject)(e)&&qt(e.coordinates)}function Vt(e){return Object(s.isObject)(e)&&Kt(e.coordinates)}function Gt(e){return Object(s.isObject)(e)&&Jt(e.coordinates)}function Ht(e){return Object(s.isObject)(e)&&Xt(e.coordinates)}function zt(e){return Object(s.isObject)(e)&&(t=e.coordinates,Object(s.isArray)(t)&&t.every(Xt));var t}function Yt(e){return Object(s.isArray)(e)&&Object(s.isNumber)(e[0])&&Object(s.isNumber)(e[1])}function qt(e){return Object(s.isArray)(e)&&e.every(Yt)}function Kt(e){return qt(e)}function Jt(e){return Object(s.isArray)(e)&&e.every(Kt)}function Xt(e){return Jt(e)}function $t(e){return Zt(e,[e])}function Zt(e,t){if(!Object(s.isInternalObject)(e)){if(Object(s.isDate)(e))return{$date:+e};if(Object(s.isRegExp)(e))return{$regex:e.source,$options:e.flags};if(Object(s.isArray)(e))return e.map((function(e){if(t.indexOf(e)>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Zt(e,Object(o.__spread)(t,[e]))}));if(Object(s.isObject)(e)){var n=Object(o.__assign)({},e);for(var r in n){if(t.indexOf(n[r])>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});n[r]=Zt(n[r],Object(o.__spread)(t,[n[r]]))}return n}return e}switch(e._internalType){case ke:case De:case xe:case Re:case Pe:case je:return e.toJSON();case Ne:return{$date:e.options};case Me:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function Qt(e,t,n,r){var i=Object(o.__assign)({},e);for(var a in e)if(!/^\$/.test(a)){var l=e[a];if(l&&Object(s.isObject)(l)&&!t(l)){if(r.indexOf(l)>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var d=Qt(l,t,Object(o.__spread)(n,[a]),Object(o.__spread)(r,[l]));i[a]=d;var f=!1;for(var p in d)/^\$/.test(p)?f=!0:(i[a+"."+p]=d[p],delete i[a][p]);f||delete i[a]}}return i}function en(e){return Qt(e,rn,[],[e])}function tn(e){return Qt(e,(function(e){return!1}),[],[e])}function nn(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?Object(s.isArray)(e[r])?e[r].push(t[r]):Object(s.isObject)(e[r])?Object(s.isObject)(t[r])?Object.assign(e[r],t[r]):(console.warn("unmergable condition, query is object but condition is "+Object(s.getType)(t)+", can only overwrite",t,n),e[r]=t[r]):(console.warn("to-merge query is of type "+Object(s.getType)(e)+", can only overwrite",e,t,n),e[r]=t[r]):e[r]=t[r]}function rn(e){return Object(s.isInternalObject)(e)||Object(s.isDate)(e)||Object(s.isRegExp)(e)}function on(e){return $t(e)}function an(e){return function(e){var t=Object(o.__assign)({},e);for(var n in t)switch(n){case"$date":switch(Object(s.getType)(t[n])){case"number":return new Date(t[n]);case"object":return vt(t[n])}break;case"type":switch(t.coordinates,t.type){case"Point":if(Ut(t))return jt(t);break;case"MultiPoint":if(Wt(t))return Nt(t);break;case"LineString":if(Vt(t))return Mt(t);break;case"MultiLineString":if(Gt(t))return Lt(t);break;case"Polygon":if(Ht(t))return Bt(t);break;case"MultiPolygon":if(zt(t))return Ft(t)}}return e}(e)}function sn(e,t){return{limit:e._query.limit,offset:e._query.offset,order:cn(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function cn(e){return e.map((function(e){return{field:e.fieldPath,direction:e.order===bo.DESC?rt.DESC:rt.ASC}}))}function un(e){var t=tn(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:delete t[n];return t}!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Pt||(Pt={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(Dt||(Dt={}));var ln=((xt={})[Pt.DISCONNECTED]={transitions:[{accept:Dt.CONNECTION_START,to:Pt.CONNECTING}]},xt[Pt.CONNECTING]={transitions:[{accept:Dt.CONNECTION_SUCCESS,to:Pt.CONNECTED},{accept:Dt.CONNECTION_FAIL,to:Pt.DISCONNECTED},{accept:Dt.DISCONNECT,to:Pt.DISCONNECTED}]},xt[Pt.CONNECTED]={transitions:[{accept:Dt.DISCONNECT,to:Pt.DISCONNECTED},{accept:Dt.CONNECTION_FAIL,to:Pt.DISCONNECTED}]},xt),dn=n(34),fn=n(12),pn=n(15),hn=n(11);var gn=function(e){return"symbol"==typeof e||Object(hn.default)(e)&&"[object Symbol]"==Object(pn.default)(e)},vn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_n=/^\w*$/;var yn=function(e,t){if(Object(fn.default)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!gn(e))||(_n.test(e)||!vn.test(e)||null!=t&&e in Object(t))},mn=n(41);function bn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(bn.Cache||mn.default),n}bn.Cache=mn.default;var wn=bn;var On=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,En=/\\(\\)?/g,Sn=function(e){var t=wn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(On,(function(e,n,r,i){t.push(r?i.replace(En,"$1"):n||e)})),t})),Tn=n(16);var In=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},An=Tn.default?Tn.default.prototype:void 0,Cn=An?An.toString:void 0;var kn=function e(t){if("string"==typeof t)return t;if(Object(fn.default)(t))return In(t,e)+"";if(gn(t))return Cn?Cn.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var xn=function(e){return null==e?"":kn(e)};var Pn=function(e,t){return Object(fn.default)(e)?e:yn(e,t)?[e]:Sn(xn(e))},Dn=n(35),Rn=n(10);var jn=function(e){if("string"==typeof e||gn(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Nn=function(e,t,n,r){if(!Object(Rn.default)(e))return e;for(var i=-1,o=(t=Pn(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var c=jn(t[i]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=Object(Rn.default)(l)?l:Object(Dn.default)(t[i+1])?[]:{})}Object(dn.default)(s,c,u),s=s[c]}return e};var Mn=function(e,t,n){return null==e?e:Nn(e,t,n)};var Ln=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Bn=function(e,t){for(var n=0,r=(t=Pn(t,e)).length;null!=e&&n<r;)e=e[jn(t[n++])];return n&&n==r?e:void 0};var Fn=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var Un=function(e,t){return t.length<2?e:Bn(e,Fn(t,0,-1))};var Wn=function(e,t){return t=Pn(t,e),null==(e=Un(e,t))||delete e[jn(Ln(t))]};var Vn=function(e,t){return null==e||Wn(e,t)},Gn=n(50);var Hn=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},zn=n(17),Yn=n(53),qn=n(31),Kn=n(48),Jn=Object(Kn.default)(Object.keys,Object),Xn=Object.prototype.hasOwnProperty;var $n=function(e){if(!Object(qn.default)(e))return Jn(e);var t=[];for(var n in Object(e))Xn.call(e,n)&&"constructor"!=n&&t.push(n);return t},Zn=n(23);var Qn=function(e){return Object(Zn.default)(e)?Object(Yn.default)(e):$n(e)};var er=function(e,t){return e&&Object(zn.default)(t,Qn(t),e)},tr=n(18);var nr=function(e,t){return e&&Object(zn.default)(t,Object(tr.default)(t),e)},rr=n(45),ir=n(47);var or=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var ar=function(){return[]},sr=Object.prototype.propertyIsEnumerable,cr=Object.getOwnPropertySymbols,ur=cr?function(e){return null==e?[]:(e=Object(e),or(cr(e),(function(t){return sr.call(e,t)})))}:ar;var lr=function(e,t){return Object(zn.default)(e,ur(e),t)};var dr=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},fr=n(30),pr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)dr(t,ur(e)),e=Object(fr.default)(e);return t}:ar;var hr=function(e,t){return Object(zn.default)(e,pr(e),t)};var gr=function(e,t,n){var r=t(e);return Object(fn.default)(e)?r:dr(r,n(e))};var vr=function(e){return gr(e,Qn,ur)};var _r=function(e){return gr(e,tr.default,pr)},yr=n(13),mr=n(9),br=Object(yr.default)(mr.default,"DataView"),wr=n(25),Or=Object(yr.default)(mr.default,"Promise"),Er=Object(yr.default)(mr.default,"Set"),Sr=Object(yr.default)(mr.default,"WeakMap"),Tr=n(21),Ir="[object Map]",Ar="[object Promise]",Cr="[object Set]",kr="[object WeakMap]",xr="[object DataView]",Pr=Object(Tr.default)(br),Dr=Object(Tr.default)(wr.default),Rr=Object(Tr.default)(Or),jr=Object(Tr.default)(Er),Nr=Object(Tr.default)(Sr),Mr=pn.default;(br&&Mr(new br(new ArrayBuffer(1)))!=xr||wr.default&&Mr(new wr.default)!=Ir||Or&&Mr(Or.resolve())!=Ar||Er&&Mr(new Er)!=Cr||Sr&&Mr(new Sr)!=kr)&&(Mr=function(e){var t=Object(pn.default)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(Tr.default)(n):"";if(r)switch(r){case Pr:return xr;case Dr:return Ir;case Rr:return Ar;case jr:return Cr;case Nr:return kr}return t});var Lr=Mr,Br=Object.prototype.hasOwnProperty;var Fr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Br.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Ur=n(36);var Wr=function(e,t){var n=t?Object(Ur.default)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Vr=/\w*$/;var Gr=function(e){var t=new e.constructor(e.source,Vr.exec(e));return t.lastIndex=e.lastIndex,t},Hr=Tn.default?Tn.default.prototype:void 0,zr=Hr?Hr.valueOf:void 0;var Yr=function(e){return zr?Object(zr.call(e)):{}},qr=n(46);var Kr=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Object(Ur.default)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Wr(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(qr.default)(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Gr(e);case"[object Set]":return new r;case"[object Symbol]":return Yr(e)}},Jr=n(51),Xr=n(32);var $r=function(e){return Object(hn.default)(e)&&"[object Map]"==Lr(e)},Zr=n(33),Qr=n(20),ei=Qr.default&&Qr.default.isMap,ti=ei?Object(Zr.default)(ei):$r;var ni=function(e){return Object(hn.default)(e)&&"[object Set]"==Lr(e)},ri=Qr.default&&Qr.default.isSet,ii=ri?Object(Zr.default)(ri):ni,oi="[object Arguments]",ai="[object Function]",si="[object Object]",ci={};ci[oi]=ci["[object Array]"]=ci["[object ArrayBuffer]"]=ci["[object DataView]"]=ci["[object Boolean]"]=ci["[object Date]"]=ci["[object Float32Array]"]=ci["[object Float64Array]"]=ci["[object Int8Array]"]=ci["[object Int16Array]"]=ci["[object Int32Array]"]=ci["[object Map]"]=ci["[object Number]"]=ci["[object Object]"]=ci["[object RegExp]"]=ci["[object Set]"]=ci["[object String]"]=ci["[object Symbol]"]=ci["[object Uint8Array]"]=ci["[object Uint8ClampedArray]"]=ci["[object Uint16Array]"]=ci["[object Uint32Array]"]=!0,ci["[object Error]"]=ci[ai]=ci["[object WeakMap]"]=!1;var ui=function e(t,n,r,i,o,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!Object(Rn.default)(t))return t;var d=Object(fn.default)(t);if(d){if(s=Fr(t),!c)return Object(ir.default)(t,s)}else{var f=Lr(t),p=f==ai||"[object GeneratorFunction]"==f;if(Object(Xr.default)(t))return Object(rr.default)(t,c);if(f==si||f==oi||p&&!o){if(s=u||p?{}:Object(Jr.default)(t),!c)return u?hr(t,nr(s,t)):lr(t,er(s,t))}else{if(!ci[f])return o?t:{};s=Kr(t,f,c)}}a||(a=new Gn.default);var h=a.get(t);if(h)return h;a.set(t,s),ii(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):ti(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var g=l?u?_r:vr:u?tr.default:Qn,v=d?void 0:g(t);return Hn(v||t,(function(i,o){v&&(i=t[o=i]),Object(dn.default)(s,o,e(i,n,r,o,t,a))})),s};var li,di,fi,pi=function(e){return ui(e,5)};!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(di||(di={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(fi||(fi={}));var hi={accept:fi.CLOSE,to:di.CLOSED},gi={accept:fi.WS_DISCONNECTED,to:di.CLOSED},vi={accept:fi.WS_DISCONNECTED,to:di.PAUSED},_i=((li={})[di.UNINIT]={transitions:[{accept:fi.LOGIN_START,to:di.INIT_LOGGING_IN},gi,hi]},li[di.CLOSED]={transitions:[hi]},li[di.INIT_LOGGING_IN]={transitions:[{accept:fi.LOGIN_FAIL,to:di.INIT_LOGIN_FAIL},{accept:fi.LOGIN_SUCCESS,to:di.INIT_LOGGED_IN},gi,hi]},li[di.INIT_LOGIN_FAIL]={transitions:[{accept:fi.LOGIN_START,to:di.INIT_LOGGING_IN},gi,hi]},li[di.INIT_LOGGED_IN]={transitions:[{accept:fi.INIT_WATCH_START,to:di.INIT_WATCH_PENDING},gi,hi]},li[di.INIT_WATCH_PENDING]={transitions:[{accept:fi.INIT_WATCH_FAIL,to:di.INIT_WATCH_FAIL},{accept:fi.INIT_WATCH_SUCCESS,to:di.INIT_WATCH_SUCCESS},gi,hi]},li[di.INIT_WATCH_FAIL]={transitions:[{accept:fi.LOGIN_START,to:di.INIT_LOGGING_IN},gi,hi]},li[di.INIT_WATCH_SUCCESS]={transitions:[{accept:fi.WS_DISCONNECTED,to:di.PAUSED},{accept:fi.NEED_REBUILD_WATCH,to:di.ABNORMAL_WATCH_STATUS},vi,hi]},li[di.PAUSED]={transitions:[{accept:fi.LOGIN_START,to:di.REBUILD_LOGGING_IN},vi,hi]},li[di.ABNORMAL_WATCH_STATUS]={transitions:[{accept:fi.LOGIN_START,to:di.REBUILD_LOGGING_IN},vi,hi]},li[di.REBUILD_LOGGING_IN]={transitions:[{accept:fi.LOGIN_FAIL,to:di.REBUILD_LOGIN_FAIL},{accept:fi.LOGIN_SUCCESS,to:di.REBUILD_LOGGED_IN},vi,hi]},li[di.REBUILD_LOGIN_FAIL]={transitions:[{accept:fi.LOGIN_START,to:di.REBUILD_LOGGING_IN},vi,hi]},li[di.REBUILD_LOGGED_IN]={transitions:[{accept:fi.REBUILD_WATCH_START,to:di.REBUILD_WATCH_PENDING},vi,hi]},li[di.REBUILD_WATCH_PENDING]={transitions:[{accept:fi.REBUILD_WATCH_FAIL,to:di.REBUILD_WATCH_FAIL},{accept:fi.REBUILD_WATCH_SUCCESS,to:di.REBUILD_WATCH_SUCCESS},vi,hi]},li[di.REBUILD_WATCH_FAIL]={transitions:[{accept:fi.LOGIN_START,to:di.REBUILD_LOGGING_IN},vi,hi]},li[di.REBUILD_WATCH_SUCCESS]={transitions:[{accept:fi.NEED_REBUILD_WATCH,to:di.ABNORMAL_WATCH_STATUS},vi,hi]},li),yi=function(){function e(e){for(var t in this.listeners=new Set,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((function(e){return[e.accept,e.to]})))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}return e.prototype.transition=function(e,t){var n=this;if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new mi("current state ("+this.currentState+") != expected from state ("+(t instanceof Set?JSON.stringify(Object(o.__spread)(t)):t)+")","unexpectedFromState");var r="string"==typeof e?{type:e}:e,i=this.states.get(this.currentState),a=i.transitions.get(r.type);if(!a)throw new mi("current state ("+this.currentState+') does not accept "'+r.type+'"',"unexpectedInput");this.currentState=a,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((function(e){try{e({event:r,from:i.name,to:n.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))},e.prototype.canAccept=function(e){return this.states.get(this.currentState).transitions.has(e)},e.prototype.subscribe=function(e){this.listeners.add(e)},e.prototype.unsubscribe=function(e){this.listeners.delete(e)},e.prototype.getHistoryRepresentation=function(e){return this.history.options.enable?"states: "+(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((function(e){var t=e.state,n=e.event;return(n?"-("+n+")->":"")+t})).join(""):""},e}(),mi=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.type="transition",i.generic=!0,i.subtype=n,i.payload=r,i}return Object(o.__extends)(t,e),t}(Error);function bi(e){return void 0===e&&(e=""),(e?e+"_":"")+ +new Date+"_"+Math.random()}var wi=n(14),Oi=1128,Ei=1,Si=2,Ti=3,Ii=4,Ai=5,Ci=6,ki=7,xi=8,Pi=9,Di=10,Ri=11,ji=12,Ni=13,Mi=14,Li=15,Bi=16,Fi=17,Ui=18,Wi=30,Vi=31,Gi=32,Hi=33,zi=34,Yi=35,qi=36,Ki=37,Ji=38,Xi=39,$i=40,Zi=50,Qi=51,eo=52,to=53,no=54,ro=55,io=56,oo=57,ao=58,so=59,co=60,uo=function(e){this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return e.virtualClient}})},lo=function(e){var t=e.id,n=e.docChanges,r=e.docs,i=e.type,o=(e.EJSON,e.requestId),a=e.watchId;Object.defineProperties(this,{id:{get:function(){return t},enumerable:!0},docChanges:{get:function(){return n},enumerable:!0},docs:{get:function(){return r},enumerable:!0},type:{get:function(){return i},enumerable:!0}}),this.requestId=o,this.watchId=a},fo=function(e){function t(t){var n=e.call(this,"Watch Error "+JSON.stringify(t.msgData)+" (requestid: "+t.requestId+")")||this;return n.isRealtimeErrorMessageError=!0,n.payload=t,n}return Object(o.__extends)(t,e),t}(Error),po=function(e){return e&&e.isRealtimeErrorMessageError},ho=new Set([di.REBUILD_LOGGING_IN,di.INIT_LOGGING_IN]),go=function(e){0},vo=function(){function e(e){var t=this;this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this._loginInvalidated=!1,this._errors=[],this._snapshotHistory=[],this._login=function(e){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:this._fsm.transition(fi.LOGIN_START),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.login(this.envId,e||this._loginInvalidated,this.timing)];case 2:return t=r.sent(),this.envId||(this.envId=t.envId),this._fsm.transition(fi.LOGIN_SUCCESS,ho),this._loginInvalidated=!1,[3,4];case 3:n=r.sent(),this._errors.push(n),this._loginInvalidated=!0;try{this._fsm.transition(fi.LOGIN_FAIL,ho)}catch(e){console.warn("[realtime]",e)}return[3,4];case 4:return[2]}}))}))},this.initWatch=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e,t,n,r,i,a,s,c,u,l,d,f,p,h,g=this;return Object(o.__generator)(this,(function(_){switch(_.label){case 0:e=Date.now(),t=bi(),_.label=1;case 1:return _.trys.push([1,3,,4]),this._fsm.transition(fi.INIT_WATCH_START,di.INIT_LOGGED_IN),n=this.envId,r={watchId:this.watchId,requestId:t,msgType:"INIT_WATCH",msgData:{envId:n,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy,queryType:this.queryType}},[4,this.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4})];case 2:if(i=_.sent(),this.assertAsyncTaskStatus(),a=i.msgData,s=a.events,c=a.currEvent,this.sessionInfo={queryID:i.msgData.queryID,currentEventId:c-1,currentDocs:[],currentEventTS:Date.now()},s.length>0){try{for(u=Object(o.__values)(s),l=u.next();!l.done;l=u.next())l.value.ID=c}catch(e){p={error:e}}finally{try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(p)throw p.error}}this.handleServerEvents(i)}else this.sessionInfo.currentEventId=c,d=new lo({id:c,docChanges:[],docs:[],type:"init",EJSON:this.getEJSON(),requestId:i.requestId,watchId:this.watchId}),wi.default.surroundThirdByTryCatch((function(){return g.listener.onChange(d)}))(),this.scheduleSendACK(),this.debug&&this._snapshotHistory.push(d);return this.onWatchStart(this,this.sessionInfo.queryID),this._availableRetries.INIT_WATCH=2,this._wsDisconnectionTS=void 0,Object(v.reportIDKey)(Oi,Ai,!0),Object(v.reportAPISpeed)({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),this._fsm.transition(fi.INIT_WATCH_SUCCESS),[3,4];case 3:return f=_.sent(),Object(v.reportAPISpeed)({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),this.handleWatchEstablishmentError(f,{operationName:"INIT_WATCH",requestId:t}),[3,4];case 4:return[2]}}))}))},this.rebuildWatch=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e,t,n,r,i,a;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:e=Date.now(),t=bi(),o.label=1;case 1:if(o.trys.push([1,4,,5]),this._fsm.transition(fi.REBUILD_WATCH_START,di.REBUILD_LOGGED_IN),n=this.envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(this._wsDisconnectionTS&&Date.now()-this._wsDisconnectionTS>.9*this.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new c.TimeoutError("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});return r={watchId:this.watchId,requestId:t,msgType:"REBUILD_WATCH",msgData:{envId:n,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4})];case 2:return i=o.sent(),this.assertAsyncTaskStatus(),[4,this.handleServerEvents(i)];case 3:return o.sent(),this._availableRetries.REBUILD_WATCH=2,this._wsDisconnectionTS=void 0,Object(v.reportIDKey)(Oi,ki,!0),Object(v.reportAPISpeed)({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),this._fsm.transition(fi.REBUILD_WATCH_SUCCESS),[3,5];case 4:return a=o.sent(),Object(v.reportAPISpeed)({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),this.handleWatchEstablishmentError(a,{operationName:"REBUILD_WATCH",requestId:t}),[3,5];case 5:return[2]}}))}))},this.handleWatchEstablishmentError=function(e,n){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,r,i=this;return Object(o.__generator)(this,(function(o){return t="INIT_WATCH"===n.operationName,r=function(r){var o=(r||e)+" ("+(t?"initWatch":"rebuildWatch")+" requestId "+n.requestId+")";if(i.closeWithError(new c.CloudSDKError({errCode:t?u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:o})),Object(v.reportIDKey)(Oi,t?Ci:xi,!0),!po(e)){if(Object(c.isTimeoutError)(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Object(v.reportIDKey)(Oi,t?no:ro,!0);break;case"queryEventCacheClientTimeout":t||Object(v.reportIDKey)(Oi,io,!0)}return}return Object(c.isCancelledError)(e)?void Object(v.reportIDKey)(Oi,t?oo:ao,!0):void Object(v.reportIDKey)(Oi,t?so:co,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Object(v.reportIDKey)(Oi,t?Zi:Qi,!0);break;default:Object(v.reportIDKey)(Oi,t?eo:to,!0)}},this._errors.push(e),this.handleCommonError(e,{onSignError:function(){i._loginInvalidated=!0,i._fsm.transition(i.initialized?fi.REBUILD_WATCH_FAIL:fi.INIT_WATCH_FAIL)},onTimeoutError:function(e){e.payload&&!e.payload.retryable?r(e):i._fsm.transition(i.initialized?fi.REBUILD_WATCH_FAIL:fi.INIT_WATCH_FAIL)},onNotRetryableError:r,onCancelledError:function(e){i._fsm.transition(i.initialized?fi.REBUILD_WATCH_FAIL:fi.INIT_WATCH_FAIL)},onUnknownError:function(){i._fsm.transition(i.initialized?fi.REBUILD_WATCH_FAIL:fi.INIT_WATCH_FAIL)}}),[2]}))}))},this.closeWatch=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e,t;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:if(this.closeWatchInvoked=!0,e=this.sessionInfo?this.sessionInfo.queryID:"",this._fsm.currentState===di.CLOSED)return[2];n.label=1;case 1:return n.trys.push([1,3,4,5]),this._fsm.transition(fi.CLOSE),[4,this.sendCloseWatch()];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),console.warn("[realtime] non-fatal error while closing watch: "+t),[3,5];case 4:return this.sessionInfo=void 0,this.onWatchClose(this,e),this._cleanup(),[7];case 5:return[2]}}))}))},this.sendCloseWatch=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return e={watchId:this.watchId,requestId:bi(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:e})];case 1:return t.sent(),[2]}}))}))},this.scheduleSendACK=function(){t.clearACKSchedule(),t._ackTimeoutId=setTimeout((function(){t._waitExpectedTimeoutId?t.scheduleSendACK():t.sendACK()}),1e4)},this.clearACKSchedule=function(){t._ackTimeoutId&&clearTimeout(t._ackTimeoutId)},this.sendACK=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e,t,n;return Object(o.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this._fsm.currentState!==di.INIT_WATCH_SUCCESS&&this._fsm.currentState!==di.REBUILD_WATCH_SUCCESS?(this.scheduleSendACK(),[2]):this.sessionInfo?(e={watchId:this.watchId,requestId:bi(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:e})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return r.sent(),this.scheduleSendACK(),[3,3];case 2:if(t=r.sent(),po(t))switch((n=t.payload).msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this._loginInvalidated=!0,this._fsm.currentState!==di.INIT_WATCH_SUCCESS&&this._fsm.currentState!==di.REBUILD_WATCH_SUCCESS||this._fsm.transition(fi.NEED_REBUILD_WATCH),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code})),[2]}return this._availableRetries.CHECK_LAST&&this._availableRetries.CHECK_LAST>0?(this._availableRetries.CHECK_LAST--,this.scheduleSendACK()):this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:t})),[3,3];case 3:return[2]}}))}))},this.handleCommonError=function(e,t){if(po(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(Object(c.isTimeoutError)(e))return void t.onTimeoutError(e);if(Object(c.isCancelledError)(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId="watchid_"+ +new Date+"_"+Math.random(),this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new yi({initialState:di.UNINIT,states:_i,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new uo({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Pt.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}return Object.defineProperty(e.prototype,"initialized",{get:function(){return Boolean(this.sessionInfo)},enumerable:!1,configurable:!0}),e.prototype._cleanup=function(){this._parentFSM.unsubscribe(this._parentFSMListener)},e.prototype._subscribeParentFSMEvents=function(){var e=this;this._parentFSMListener=function(t){var n=t.event;t.from,t.to;if(e._fsm.currentState!==di.CLOSED)if(n.type===Dt.DISCONNECT||n.type===Dt.CONNECTION_FAIL)switch(e._fsm.currentState){case di.UNINIT:case di.INIT_LOGGING_IN:case di.INIT_LOGIN_FAIL:case di.INIT_LOGGED_IN:case di.INIT_WATCH_PENDING:case di.INIT_WATCH_FAIL:e.closeWithError(n.error||new Error("websocket connection fail"),!1);break;default:n.type===Dt.DISCONNECT?(e._wsDisconnectionTS||(e._wsDisconnectionTS=Date.now()),e._fsm.transition(fi.WS_DISCONNECTED)):e.closeWithError(n.error||new Error("websocket connection fail"),!1)}else if(n.type===Dt.CONNECTION_SUCCESS)switch(e._fsm.currentState){case di.UNINIT:case di.PAUSED:e._login();break;case di.CLOSED:break;default:console.warn("[realtime] current state should not be "+e._fsm.currentState+" (parent event "+n+")")}},this._parentFSM.subscribe(this._parentFSMListener)},e.prototype._subscribeFSMEvents=function(){var e=this;this._FSMListener=function(t){var n=t.event,r=t.from;t.to;switch(n.type){case fi.WS_CONNECTED:e._login().catch(go);break;case fi.LOGIN_SUCCESS:r===di.INIT_LOGGING_IN?e.initWatch().catch(go):r===di.REBUILD_LOGGING_IN?e.rebuildWatch().catch(go):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event "+n.type+" from "+r}));break;case fi.LOGIN_FAIL:r===di.INIT_LOGGING_IN?e.useRetryTicket("INIT_WATCH")?e._login().catch(go):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"login fail "+e._errors[e._errors.length-1]})):r===di.REBUILD_LOGGING_IN?e.useRetryTicket("REBUILD_WATCH")?e._login().catch(go):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"login fail "+e._errors[e._errors.length-1]})):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event "+n.type+" from "+r}));break;case fi.INIT_WATCH_SUCCESS:e._availableRetries.INIT_WATCH=2,e._errors=[];break;case fi.INIT_WATCH_FAIL:e.useRetryTicket("INIT_WATCH")?e._login().catch(go):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"init watch fail "+e._errors[e._errors.length-1]}));break;case fi.REBUILD_WATCH_SUCCESS:e._availableRetries.REBUILD_WATCH=2,e._errors=[];break;case fi.REBUILD_WATCH_FAIL:e.useRetryTicket("REBUILD_WATCH")?e._login().catch(go):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"init watch fail "+e._errors[e._errors.length-1]}));break;case fi.NEED_REBUILD_WATCH:e._login().catch(go)}},this._fsm.subscribe(this._FSMListener)},e.prototype.useRetryTicket=function(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)},e.prototype.assertAsyncTaskStatus=function(){if(this.closeWatchInvoked)throw new c.CancelledError("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case di.PAUSED:throw new c.CancelledError("pause",{subtype:"pause"});case di.CLOSED:throw new c.CancelledError("close",{subtype:"close"})}},e.prototype.handleServerEvents=function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this._handleServerEvents(e)];case 1:return n.sent(),this._postHandleServerEventsValidityCheck(e),[3,3];case 2:throw t=n.sent(),Object(v.reportIDKey)(Oi,Hi,!0),t;case 3:return[2]}}))}))},e.prototype._handleServerEvents=function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,a,s,l,d,f,p,h=this;return Object(o.__generator)(this,(function(g){if(t=e.requestId,!(n=e.msgData.events).length||!this.sessionInfo)return[2];r=this.sessionInfo;try{i=n.map(_o)}catch(e){return this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e})),[2]}for(a=Object(o.__spread)(r.currentDocs),s=!1,l=function(n,l){var f,p,g=i[n];if(r.currentEventId>=g.id)return!i[n-1]||g.id>i[n-1].id?Object(v.reportIDKey)(Oi,zi,!0):(console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId "+t+")"),Object(v.reportIDKey)(Oi,Yi,!0)),"continue";if(r.currentEventId===g.id-1){switch(g.dataType){case"update":if(!g.doc)switch(g.queueType){case"update":case"dequeue":if(O=a.find((function(e){return e._id===g.docId}))){var _=pi(O);if(g.updatedFields)for(var y in g.updatedFields)Mn(_,y,g.updatedFields[y]);if(g.removedFields)try{for(var m=(f=void 0,Object(o.__values)(g.removedFields)),b=m.next();!b.done;b=m.next()){y=b.value;Vn(_,y)}}catch(e){f={error:e}}finally{try{b&&!b.done&&(p=m.return)&&p.call(m)}finally{if(f)throw f.error}}g.doc=_}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Object(v.reportIDKey)(Oi,qi,!0);break;case"enqueue":var w=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '+e.requestId+")"});throw d.closeWithError(w),w}break;case"limit":if(!g.doc)switch(g.queueType){case"dequeue":var O;(O=a.find((function(e){return e._id===g.docId})))?g.doc=O:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!g.doc){w=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '+e.requestId+")"});throw d.closeWithError(w),w}break;case"remove":(_=a.find((function(e){return e._id===g.docId})))?g.doc=_:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Object(v.reportIDKey)(Oi,Ki,!0))}switch(g.queueType){case"init":s?a.push(g.doc):(s=!0,a=[g.doc]);break;case"enqueue":a.push(g.doc);break;case"dequeue":(E=a.findIndex((function(e){return e._id===g.docId})))>-1?a.splice(E,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Object(v.reportIDKey)(Oi,Ji,!0));break;case"update":var E;(E=a.findIndex((function(e){return e._id===g.docId})))>-1?a[E]=g.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Object(v.reportIDKey)(Oi,Xi,!0))}if(n===l-1||i[n+1]&&i[n+1].id!==g.id){var S=Object(o.__spread)(a),T=i.slice(0,n+1).filter((function(e){return e.id===g.id}));d.sessionInfo.currentEventId=g.id,d.sessionInfo.currentDocs=a,d.sessionInfo.currentEventTS=Date.now();var I=new lo({id:g.id,type:"init"===T[0].queueType?"init":void 0,docChanges:d.getEJSON().deserialize(T),docs:d.getEJSON().deserialize(S),EJSON:d.getEJSON(),requestId:t,watchId:d.watchId});wi.default.surroundThirdByTryCatch((function(){return h.listener.onChange(I)}))(),d.debug&&d._snapshotHistory.push(I)}}else Object(v.reportIDKey)(Oi,$i,!0),d._fsm.transition(fi.NEED_REBUILD_WATCH)},d=this,f=0,p=i.length;f<p;f++)l(f,p);return[2]}))}))},e.prototype._postHandleServerEventsValidityCheck=function(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn("[realtime listener] internal non-fatal error: client eventId "+this.sessionInfo.currentEventId+" does not match with server event id after server event handling "+e.msgData.currEvent+" (requestId "+e.requestId+")")):console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId "+e.requestId+")")},e.prototype.clearWaitExpectedEvent=function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)},e.prototype.onMessage=function(e){var t=this;switch(this._fsm.currentState){case di.INIT_WATCH_SUCCESS:case di.REBUILD_WATCH_SUCCESS:break;case di.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received while state is "+this._fsm.currentState)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((function(){t._fsm.transition(fi.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:e.msgData.code+" - "+e.msgData.message}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")},e.prototype.closeWithError=function(e,t){var n=this;if(void 0===t&&(t=!0),this._fsm.currentState!==di.CLOSED&&this._fsm.transition(fi.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});Object(c.isSDKError)(e)?(e.errMsg+="\nhistory "+r,e.history=r):e&&((e=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:e+" \nhistory "+r})).history=r),this.clearACKSchedule(),wi.default.surroundThirdByTryCatch((function(){return n.listener.onError(e)}))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(go),this.sessionInfo=void 0}},e}();function _o(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var yo,mo={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(yo||(yo={}));var bo,wo=function(e,t){var n=mo[e],r=n?n.name+", code "+e+", reason "+(t||n.description):"code "+e;return new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})},Oo=1,Eo=function(){function e(e){var t=this;this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._pingFailed=0,this._pongMissed=0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this.initWebSocketConnection=function(e,r){return void 0===r&&(r=t._maxReconnect),Object(o.__awaiter)(t,void 0,void 0,(function(){var t,r,i,a,s,l,d,f,p,h=this;return Object(o.__generator)(this,(function(g){switch(g.label){case 0:if(this._EJSON||(t=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(o.__generator)(this,(function(r){return e=Date.now(),t=n(26),Object(v.reportAPISpeed)({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),[2,t.EJSON]}))}))}().then((function(e){return h._EJSON=e}))),this._fsm.currentState!==Pt.DISCONNECTED)return[2];this._fsm.transition(Dt.CONNECTION_START),this._logins=new Map,this._wsResponseWait=new Map,r=!1,i=[],a=!1,!this._totalConnectionTimeoutId&&this._totalConnectionTimeout&&this._totalConnectionTimeout!==1/0&&(s=this._totalConnectionTimeout,this._totalConnectionTimeoutId=setTimeout((function(){a=!0,h._totalConnectionTimeoutId=void 0;var e=new c.TimeoutError("reconnect timeout (reach totalConnectionTimeout "+s+"s)",{subtype:"totalConnectionTimeout",retryable:!1});Object(v.reportIDKey)(Oi,Fi,!0),h._fsm.transition({type:Dt.CONNECTION_FAIL,error:e})}),1e3*s)),l=function(n){var s,c,l,f;return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,11,,17]),[4,Object(C.getNetworkStatus)()];case 1:return n.sent().isConnected?[3,5]:e?[3,2]:(d._fsm.transition({type:Dt.CONNECTION_FAIL,error:new Error("network offline")}),[2,{value:void 0}]);case 2:return[4,Object(C.onceNetworkOnline)()];case 3:return n.sent(),0===d._virtualWSClient.size?(d.clearTotalReconnectTimeout(),[2,{value:void 0}]):Object(k.isDevTools)()?[4,Object(C.sleep)(100)]:[3,5];case 4:n.sent(),n.label=5;case 5:return a?[2,{value:void 0}]:[4,d.getSignature(d._connectionEnvId)];case 6:return s=n.sent(),a?[2,{value:void 0}]:(c=Date.now(),[4,new Promise((function(e,t){h._ws=Object(E.getSDK)(h._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:s.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:t})}))]);case 7:return n.sent(),a?[2,{value:void 0}]:(Object(v.reportAPISpeed)({apiName:"_realtime.connectSocket",apiStartTime:c,apiEndTime:Date.now()}),[4,d.initWebSocketEvent()]);case 8:return n.sent(),a?[2,{value:void 0}]:t?[4,t]:[3,10];case 9:if(n.sent(),a)return[2,{value:void 0}];n.label=10;case 10:return r=!0,[2,"break"];case 11:return l=n.sent(),i.unshift(l),l.errCode===u.ERR_CODE.TCB_PERMISSION_DENIED?[2,"break"]:[4,Object(C.getNetworkStatus)()];case 12:return f=n.sent().isConnected,a?[2,{value:void 0}]:f?[4,Object(C.sleep)(d._reconnectInterval)]:[3,14];case 13:if(n.sent(),a)return[2,{value:void 0}];n.label=14;case 14:return Object(k.isDevTools)()?[4,Object(C.sleep)(0)]:[3,16];case 15:if(n.sent(),a)return[2,{value:void 0}];n.label=16;case 16:return[3,17];case 17:return[2]}}))},d=this,f=this._maxReconnect,g.label=1;case 1:return f>=0?[5,l(f)]:[3,4];case 2:if("object"==typeof(p=g.sent()))return[2,p.value];if("break"===p)return[3,4];g.label=3;case 3:return f--,[3,1];case 4:return r?(this.clearTotalReconnectTimeout(),Object(v.reportIDKey)(Oi,e?Ti:Ei,!0),this._fsm.transition(Dt.CONNECTION_SUCCESS),[2]):(this.clearTotalReconnectTimeout(),Object(v.reportIDKey)(Oi,e?Ii:Si,!0),e?this._fsm.transition({type:Dt.CONNECTION_FAIL,error:new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): "+JSON.stringify(i.map((function(e){return e+""})))})}):this._fsm.transition({type:Dt.CONNECTION_FAIL,error:new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): "+JSON.stringify(i.map((function(e){return e+""})))})}),[2])}}))}))},this.initWebSocketEvent=function(){return new Promise((function(e,n){if(!t._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;t._ws.onOpen((function(n){t._context.debug&&console.warn("[realtime] ws event: open",n),r=!0,e()}));var i=null;t._ws.onError((function(e){i=e,t._logins=new Map,r?(t._context.debug&&console.error("[realtime] ws event: error",e),t.clearHeartbeat(),Object(v.reportIDKey)(Oi,Di,!0)):(t._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),n(e),Object(v.reportIDKey)(Oi,Pi,!0))})),t._ws.onClose((function(e){t._logins=new Map,t.clearHeartbeat();var n=i||wo(e.code);switch(e.code){case yo.ReconnectOnServerUpgrade:case yo.ReconnectWebSocket:case yo.NoRealtimeListeners:t._fsm.transition({type:Dt.DISCONNECT,error:n});break;case yo.HeartbeatPingError:case yo.HeartbeatPongTimeoutError:case yo.NormalClosure:case yo.AbnormalClosure:t._maxReconnect>0?(t._fsm.transition({type:Dt.DISCONNECT,error:n}),t.initWebSocketConnection(!0)):t._fsm.transition({type:Dt.CONNECTION_FAIL,error:n}),e.code===yo.HeartbeatPingError?Object(v.reportIDKey)(Oi,ji,!0):e.code===yo.HeartbeatPongTimeoutError?Object(v.reportIDKey)(Oi,Ni,!0):Object(v.reportIDKey)(Oi,Mi,!0);break;case yo.UnauthenticatedIdleConnection:t._fsm.transition({type:Dt.CONNECTION_FAIL,error:wo(e.code,e.reason)}),Object(v.reportIDKey)(Oi,Li,!0);break;case yo.ServerUpgrade:t._fsm.transition({type:Dt.DISCONNECT,error:n}),t.initWebSocketConnection(!0),Object(v.reportIDKey)(Oi,Ui,!0);break;default:t._maxReconnect>0?(t._fsm.transition({type:Dt.DISCONNECT,error:n}),t.initWebSocketConnection(!0)):t._fsm.transition({type:Dt.CONNECTION_FAIL,error:wo(e.code,e.reason)}),Object(v.reportIDKey)(Oi,Bi,!0)}Object(v.reportIDKey)(Oi,Ri,!0)}));var o={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:v.socketOnMessageSamplePicker,autoReport:"_realtime.onSocketMessage"};t._ws.onMessage(Object(v.wrapTiming)(t.onSocketMessage,o)),t.heartbeat()}))},this.isWSConnected=function(){return Boolean(t._ws&&t._ws.readyState===Oo)},this.onSocketMessage=function(e){var n,r=e.data;t.heartbeat();try{n=JSON.parse(r)}catch(e){throw new Error("[realtime] onMessage parse res.data error: "+e)}t._context.debug&&console.log("[realtime] onMessage "+n.msgType+" ("+(new Date).toLocaleString()+")",n);var i=t._wsResponseWait.get(n.requestId);if(i){try{"ERROR"===n.msgType?i.reject(new fo(n)):i.resolve(n)}catch(e){t._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{t._wsResponseWait.delete(n.requestId)}if(i.skipOnMessage)return}if("PONG"!==n.msgType){var o=n.watchId&&t._watchIdClientMap.get(n.watchId);if(o)o.onMessage(n);else switch(n.watchId?t._closedWatches.has(n.watchId)?Object(v.reportIDKey)(Oi,Wi,!0):Object(v.reportIDKey)(Oi,Vi,!0):Object(v.reportIDKey)(Oi,Gi,!0),n.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(o=t._queryIdClientMap.get(n.msgData.queryID))&&o.onMessage(n)}}else if(t._lastPingSendTS){var a=Date.now()-t._lastPingSendTS;if(a>1e4)return void(t._context.debug&&console.warn("[realtime] untrusted rtt observed: "+a));t._rttObserved.length>=3&&t._rttObserved.splice(0,t._rttObserved.length-3+1),t._rttObserved.push(a)}},this.login=function(e,n,r){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,i,a,s,c,u,l,d,f=this;return Object(o.__generator)(this,(function(p){switch(p.label){case 0:if(e=e||this._context.env||this._defaultEnvId,!n)if(e){if(t=this._logins.get(e)){if(t.loggedIn&&t.loginResult)return[2,t.loginResult];if(t.loggingInPromise)return[2,t.loggingInPromise]}}else if((i=this._logins.get(""))&&i.loggingInPromise)return[2,i.loggingInPromise];0,a=new Promise((function(t,i){return Object(o.__awaiter)(f,void 0,void 0,(function(){var a,s,c,u,l;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,r?Object(v.wrapTiming)(this.getSignature(e,n),{timing:r,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):this.getSignature(e,n)];case 1:return a=o.sent(),s=Object(C.getWXVersion)(),c={watchId:void 0,requestId:bi(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:5e3})];case 2:return(u=o.sent()).msgData.code?i(new Error(u.msgData.code+" "+u.msgData.message)):t({envId:a.envId}),[3,4];case 3:return l=o.sent(),i(l),[3,4];case 4:return[2]}}))}))})),s=e&&this._logins.get(e),c=Date.now(),s?(s.loggedIn=!1,s.loggingInPromise=a,s.loginStartTS=c):(s={loggedIn:!1,loggingInPromise:a,loginStartTS:c},this._logins.set(e||"",s)),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a];case 2:if(u=p.sent(),(l=this._logins.get(e||""))&&l===s&&l.loginStartTS===c)return s.loggedIn=!0,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=u,[2,u];if(l){if(l.loggedIn&&l.loginResult)return[2,l.loginResult];if(l.loggingInPromise)return[2,l.loggingInPromise];throw new Error("ws unexpected login info")}throw new Error("ws login info reset");case 3:throw d=p.sent(),s.loggedIn=!1,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=void 0,d;case 4:return[2]}}))}))},this.getSignature=function(e,n){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,r,i,a;return Object(o.__generator)(this,(function(s){switch(s.label){case 0:if(e=e||this._context.env||this._defaultEnvId,!n&&e&&this._signatures.has(e)){if(t=this._signatures.get(e),Date.now()<t.expireTS)return[2,t]}else 0;return r=Date.now()+6e4,[4,st(this._context,e)];case 1:return i=s.sent(),Date.now()-r>6e4?[2,this.getSignature(e,n)]:(a=Object(o.__assign)(Object(o.__assign)({},i),{expireTS:r}),this._signatures.set(a.envId,a),e||(this._defaultEnvId=a.envId),[2,a])}}))}))},this.getWaitExpectedTimeoutLength=function(){return t._rttObserved.length?t._rttObserved.reduce((function(e,t){return e+t}))/t._rttObserved.length*1.5:5e3},this.ping=function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e;return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return e={watchId:void 0,requestId:bi(),msgType:"PING",msgData:null},[4,this.send({msg:e})];case 1:return t.sent(),this._context.debug&&console.log("ping sent"),[2]}}))}))},this.send=function(e){return new Promise((function(n,r){return Object(o.__awaiter)(t,void 0,void 0,(function(){var t,i,a,s,u,l=this;return Object(o.__generator)(this,(function(d){if(this._fsm.currentState!==Pt.CONNECTED)return[2,r(new Error("websocket not connected"))];i=!1,a=!1,s=function(e){i=!0,t&&clearTimeout(t),n(e)},u=function(e){a=!0,t&&clearTimeout(t),r(e)},e.timeout&&(t=setTimeout((function(){return Object(o.__awaiter)(l,void 0,void 0,(function(){return Object(o.__generator)(this,(function(e){switch(e.label){case 0:return i&&a?[3,2]:[4,Object(C.sleep)(0)];case 1:e.sent(),i&&a||u(new c.TimeoutError("wsclient.send timedout")),e.label=2;case 2:return[2]}}))}))}),e.timeout));try{if(this._context.debug&&console.log("[realtime] ws send "+e.msg.msgType+" ("+(new Date).toLocaleString()+"): ",e),!this._ws)return u(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this._ws.readyState!==Oo)return u(new Error("ws readyState invalid: "+this._ws.readyState+", can not send message")),[2];e.waitResponse&&this._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:u,skipOnMessage:e.skipOnMessage}),this._ws.send({data:JSON.stringify(e.msg),success:function(t){e.waitResponse||s(t)},fail:function(t){u(t),e.waitResponse&&l._wsResponseWait.delete(e.msg.requestId)}})}catch(e){u(e)}return[2]}))}))}))},this.onWatchStart=function(e,n){t._queryIdClientMap.set(n,e)},this.onWatchClose=function(e,n){n&&t._queryIdClientMap.delete(n),t._watchIdClientMap.delete(e.watchId),t._virtualWSClient.delete(e),t._closedWatches.add(e.watchId),t._virtualWSClient.size||t.close(yo.NoRealtimeListeners)},this.getEJSON=function(){return t._EJSON},this._fsm=new yi({initialState:Pt.DISCONNECTED,states:ln}),this._serviceContext=e.serviceContext}return Object.defineProperty(e.prototype,"_context",{get:function(){return this._serviceContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_maxReconnect",{get:function(){return this._context.appConfig.realtimeMaxReconnect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reconnectInterval",{get:function(){return this._context.appConfig.realtimeReconnectInterval},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_totalConnectionTimeout",{get:function(){return this._context.appConfig.realtimeTotalConnectionTimeout},enumerable:!1,configurable:!0}),e.prototype.heartbeat=function(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout((function(){return Object(o.__awaiter)(t,void 0,void 0,(function(){var e=this;return Object(o.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this._ws&&this._ws.readyState===Oo?(this._lastPingSendTS=Date.now(),[4,this.ping()]):[2];case 1:return t.sent(),this._pingFailed=0,this._pongTimeoutId=setTimeout((function(){e._context.debug&&console.error("pong timed out"),e._pongMissed<2?(e._pongMissed++,e.heartbeat(!0)):e.close(yo.HeartbeatPongTimeoutError)}),this._context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return t.sent(),this._pingFailed<2?(this._pingFailed++,this.heartbeat()):this.close(yo.HeartbeatPingError),[3,3];case 3:return[2]}}))}))}),e?0:this._context.appConfig.realtimePingInterval)},e.prototype.clearHeartbeat=function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)},e.prototype.clearTotalReconnectTimeout=function(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)},e.prototype.close=function(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:mo[e].name}),this._ws=void 0)},e.prototype.watch=function(e){var t=this,n={apiStartTime:Date.now()},r=!1,i=function(){Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},n),{apiName:e.reportAPIName}))},a=e.onChange,s=e.onError;this._fsm.currentState===Pt.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var c=new vo(Object(o.__assign)(Object(o.__assign)({},e),{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:function(){return t._context},onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:n,debug:this._context.debug,wsclient:this,onChange:l,onError:d}));this._virtualWSClient.add(c),this._watchIdClientMap.set(c.watchId,c);var u=c.listener;return u;function l(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];r||(r=!0,n.apiEndTime=Date.now(),i()),f(),wi.default.surroundThirdByTryCatch((function(){return u.onChange.apply(e,t)}))()}function d(){for(var e=this,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];r||(r=!0,n.apiEndTime=Date.now(),i()),f(),wi.default.surroundThirdByTryCatch((function(){return u.onError.apply(e,t)}))()}function f(){u.onChange===l&&(u.onChange=a),u.onError===d&&(u.onError=s)}},e}();!function(e){e.ASC="asc",e.DESC="desc"}(bo||(bo={}));var So=function(e){var t=function(){function t(t,n){var i=this;if(this.watch=function(t){return l(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Eo({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(Object(o.__assign)(Object(o.__assign)({},t),{envId:e.database.config.env||e.serviceContext.env,collectionName:i.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(i._query.where||{})),limit:i._query.limit,orderBy:i._query.order?i._query.order.reduce((function(e,t){return e[t.fieldPath]=t.order,e}),{}):void 0,queryType:tt.WHERE,reportAPIName:"cloud.db.collection.watch"}))},!t)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new r(n),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=n&&n.field||{}}return t.prototype.field=function(e){return d(e,"object","field"),new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{field:e}))},t.prototype.where=function(e){return d(e,"condition","where"),this._query.where?new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{where:gt.and(this._query.where,e)})):new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{where:e}))},t.prototype.orderBy=function(e,n){return d(e,"fieldPath","orderBy"),d(n,"order","orderBy"),new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{order:Object(o.__spread)(this._query.order||[],[{fieldPath:e,order:n}])}))},t.prototype.limit=function(e){return d(e,"max","limit"),new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{limit:e}))},t.prototype.skip=function(e){return d(e,"offset","skip"),new t(this.collectionName,Object(o.__assign)(Object(o.__assign)({},this._query.getProperties()),{offset:e}))},t.prototype.get=function(t){var n=this,r="collection.get",i={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(o.__awaiter)(n,void 0,void 0,(function(){var u,l;return Object(o.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),[4,ot({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),queryType:tt.WHERE,options:sn(n,e),instanceContext:e,timing:i,explain:null==t?void 0:t.explain})];case 1:return u=d.sent(),(null==t?void 0:t.explain)&&Object(k.isDevTools)()?(a(u),[2]):(a({data:u.list,errMsg:_(r)}),[3,4]);case 2:return l=d.sent(),s(Object(c.returnAsFinalCloudSDKError)(l,r)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},i),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.update=function(t){var n=this,r="collection.update",i={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(o.__awaiter)(n,void 0,void 0,(function(){var u,f;return Object(o.__generator)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,3,4]),function(){if(d(t,"options","update"),l(t,{data:"object"}),!n._query.where)throw new c.CloudSDKError({errCode:-1,errMsg:"query condition must be provided"})}(),[4,at({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:tt.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:i,explain:t.explain})];case 1:return u=p.sent(),(null==t?void 0:t.explain)&&Object(k.isDevTools)()?[2,a(u)]:(a({stats:{updated:u.updated},errMsg:_(r)}),[3,4]);case 2:return f=p.sent(),s(Object(c.returnAsFinalCloudSDKError)(f,r)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},i),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.remove=function(t){var n=this,r="collection.remove",i={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(o.__awaiter)(n,void 0,void 0,(function(){var u,l;return Object(o.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),function(){if(!n._query.where||0===Object.keys(n._query.where).length)throw new c.CloudSDKError({errCode:-1,errMsg:"query condition must be provided and not be empty"})}(),[4,it({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),queryType:tt.WHERE,options:{multi:!0},instanceContext:e,timing:i,explain:null==t?void 0:t.explain})];case 1:return u=d.sent(),(null==t?void 0:t.explain)&&Object(k.isDevTools)()?[2,a(u)]:(a({stats:{removed:u.removed||0},errMsg:_(r)}),[3,4]);case 2:return l=d.sent(),s(Object(c.returnAsFinalCloudSDKError)(l,r)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},i),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.count=function(t){var r=this,i="collection.count",s={apiStartTime:+new Date},u=function(){return function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,r,i,a,s,c,u,l,d,f;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,r=e.collectionName,i=e.query,a=e.instanceContext,s=e.timing,c=Object(k.isDevTools)()?e.explain:void 0,u={collection_name:r,query:JSON.stringify(i),query_type:tt.WHERE,explain:c},l=JSON.stringify(u),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:a.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return d=o.sent(),s.tunnelEndTime=+new Date,c?[2,n(26).EJSON.deserialize(d.data)]:(f=d.data,s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,[2,{total:f.total}])}}))}))}({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),queryType:tt.WHERE,instanceContext:e,timing:s,explain:null==t?void 0:t.explain})};var l=Object(a.hasAPICallback)(t),d=new Promise((function(e,n){return Object(o.__awaiter)(r,void 0,void 0,(function(){var r,a;return Object(o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),[4,u()];case 1:return r=l.sent(),(null==t?void 0:t.explain)&&Object(k.isDevTools)()?[2,e(r)]:(e({total:r.total,errMsg:_(i)}),[3,4]);case 2:return a=l.sent(),n(Object(c.returnAsFinalCloudSDKError)(a,i)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},s),{apiEndTime:+new Date,apiName:"cloud.db."+i})),[7];case 4:return[2]}}))}))}));if(!l)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(i,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(i,t,e)}))},t.prototype.toJSON=function(){},t}(),r=function(){function e(e){this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}return e.prototype.getProperties=function(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}},e}();return t},To="document.get",Io="document.update",Ao="document.set",Co="document.remove",ko=function(e){return function(){function t(t,n){var r=this;if(this.watch=function(t){return l(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Eo({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(Object(o.__assign)(Object(o.__assign)({},t),{envId:e.database.config.env||e.serviceContext.env,collectionName:r.collection.collectionName,query:JSON.stringify({_id:r._id}),queryType:tt.DOC,reportAPIName:"cloud.db.document.watch"}))},this.collection=t,this._id=n,null==n)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}return t.prototype.field=function(e){return d(e,"object","field"),l(e,"object","field"),this._field=e,this},t.prototype.get=function(t){var n=this,r={apiStartTime:+new Date};var i=Object(a.hasAPICallback)(t),s=new Promise((function(t,i){return Object(o.__awaiter)(n,void 0,void 0,(function(){var a,s,u;return Object(o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),a=this._id,[4,ot({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),options:{projection:e.engine.ProjectionSerializer.encode(n._field)},queryType:tt.DOC,instanceContext:e,timing:r})];case 1:if(!(s=l.sent()).list||!s.list.length)throw new Error("cannot find document with _id "+a+", please make sure that the document exists and you have the corresponding access permission");return t({data:s.list[0],errMsg:_(To)}),[3,4];case 2:return u=l.sent(),i(Object(c.returnAsFinalCloudSDKError)(u,To)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.get"})),[7];case 4:return[2]}}))}))}));if(!i)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(To,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(To,t,e)}))},t.prototype.set=function(t){var n=this,r={apiStartTime:+new Date},i=function(){return function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,a,c,u,l,d,p,h,g;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,n=e.collectionName,r=e._id,i=e.data,e.options,a=e.instanceContext,c=e.timing,f({input:u=JSON.stringify(i),max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),l=Object(s.isNumber)(r),d={collection_name:n,_id_type:l?nt.NUMBER:nt.STRING,data:u},l?d._id_number=r:d._id=r,p=JSON.stringify(d),c.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return h=o.sent(),c.tunnelEndTime=+new Date,g=h.data,c.tunnelTimeNoCSNetCost=g.baseresponse.stat.qbase_cost_time,[2,{_id:g._id_type===nt.NUMBER?g._id_number:g._id,updated:g._id?0:1,created:g._id?1:0}]}}))}))}({env:e.database.config.env,collectionName:n.collection.collectionName,_id:n._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:r})};var u=Object(a.hasAPICallback)(t),d=new Promise((function(e,a){return Object(o.__awaiter)(n,void 0,void 0,(function(){var n,s;return Object(o.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,3,4]),l(t,{data:"object"}),p({name:"options.data",target:t.data}),[4,i()];case 1:return n=u.sent(),e({_id:n._id,errMsg:_(Ao),stats:{updated:n.updated,created:n.created}}),[3,4];case 2:return s=u.sent(),a(Object(c.returnAsFinalCloudSDKError)(s,Ao)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.set"})),[7];case 4:return[2]}}))}))}));if(!u)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Ao,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Ao,t,e)}))},t.prototype.update=function(t){var n=this,r={apiStartTime:+new Date};var i=Object(a.hasAPICallback)(t),s=new Promise((function(i,a){return Object(o.__awaiter)(n,void 0,void 0,(function(){var s,u;return Object(o.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),l(t,{data:"object"}),p({name:"options.data",target:t.data}),[4,at({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:tt.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:r})];case 1:return s=d.sent(),i({stats:{updated:s.updated},errMsg:_(Io)}),[3,4];case 2:return u=d.sent(),a(Object(c.returnAsFinalCloudSDKError)(u,Io)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.update"})),[7];case 4:return[2]}}))}))}));if(!i)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Io,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Io,t,e)}))},t.prototype.remove=function(t){var n=this,r={apiStartTime:+new Date};var i=Object(a.hasAPICallback)(t),s=new Promise((function(t,i){return Object(o.__awaiter)(n,void 0,void 0,(function(){var a,s,u;return Object(o.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),a=this._id,[4,it({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),queryType:tt.DOC,options:{},instanceContext:e,timing:r})];case 1:if(0===(s=l.sent()).removed)throw new Error("cannot remove document with _id "+a+", please make sure that the document exists and you have the corresponding Write permission");return t({stats:{removed:s.removed||0},errMsg:_(Co)}),[3,4];case 2:return u=l.sent(),i(Object(c.returnAsFinalCloudSDKError)(u,Co)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.remove"})),[7];case 4:return[2]}}))}))}));if(!i)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Co,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Co,t,e)}))},t.prototype.toJSON=function(){},t}()},xo=function(e){var t=So(e),n=ko(e),r=ct(e);return function(t){function i(e){var n=t.call(this,e)||this;return n.collectionName=e,n}return Object(o.__extends)(i,t),i.prototype.doc=function(e){if(null==e)throw Object(c.returnAsFinalCloudSDKError)({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new n(this,e)},i.prototype.add=function(t){var n=this,r="collection.add",i={apiStartTime:+new Date},s=function(){return function(e){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,a,s,c,u,l,d;return Object(o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.env,n=e.collectionName,r=e.data,i=e.instanceContext,a=e.timing,f({input:s=JSON.stringify(r),max:i.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:(i.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),c={collection_name:n,data:s},u=JSON.stringify(c),a.tunnelStartTime=+new Date,[4,i.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:i.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||i.serviceContext.env})];case 1:return l=o.sent(),a.tunnelEndTime=+new Date,d=l.data,a.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time,[2,{_id:d._id_type===nt.NUMBER?d._id_number:d._id}]}}))}))}({env:e.database.config.env,collectionName:n.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:i})};var u=Object(a.hasAPICallback)(t),d=new Promise((function(e,a){return Object(o.__awaiter)(n,void 0,void 0,(function(){var n,u;return Object(o.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),l(t,{data:"object"}),[4,s()];case 1:return n=d.sent(),e({_id:n._id,errMsg:_(r)}),[3,4];case 2:return u=d.sent(),a(Object(c.returnAsFinalCloudSDKError)(u,r)),[3,4];case 3:return Object(v.reportAPISpeed)(Object(o.__assign)(Object(o.__assign)({},i),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!u)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},i.prototype.aggregate=function(){return new r(this,[])},i}(t)},Po=function(e){return new Do(e)},Do=function(){function e(e){l(e,{regexp:"string"},"RegExp options"),e.options&&l(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return Me},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{$regex:this.regexp,$options:this.options}},e}(),Ro={},jo={};for(var No in We)Ro[We[No]]="$"+We[No];for(var No in me)Ro[me[No]]="$"+me[No];for(var No in Ye)Ro[Ye[No]]="$"+Ye[No];for(var No in Je)jo[Je[No]]="$"+Je[No];function Mo(e){return Ro[e]||"$"+e.toLowerCase()}function Lo(e){return jo[e]||"$"+e.toLowerCase()}Ro[We.NEQ]="$ne",Ro[Ye.REMOVE]="$unset",Ro[Ye.SHIFT]="$pop",Ro[Ye.UNSHIFT]="$push",Ro[We.GEO_NEAR]="$nearSphere",Ro[We.GEO_WITHIN]="$geoWithin",Ro[We.GEO_INTERSECTS]="$geoIntersects";var Bo,Fo=function(){function e(){}return e.encodeStages=function(e){return(new Uo).encodeStages(e)},e.encode=function(e){return(new Uo).encodeAny(e)},e}(),Uo=function(){function e(){}return e.prototype.encodeStages=function(e){var t=this;return e.map((function(e){return t.encodePipelineStage(e)}))},e.prototype.encodeAny=function(e){var t=this;return rn(e)?ft(e)?this.encodePipeline(e):pt(e)?this.encodePipelineStage(e):$e(e)?this.encodeAggregateCommand(e):on(e):Object(s.isObject)(e)?this.encodeObject(e):Object(s.isArray)(e)?e.map((function(e){return t.encodeAny(e)})):e},e.prototype.encodeObject=function(e){var t={};for(var n in e)t[n]=this.encodeAny(e[n]);return t},e.prototype.encodePipeline=function(e){var t=this;return e._stages.map((function(e){return t.encodeAny(e)}))},e.prototype.encodePipelineStage=function(e){var t,n,r="$"+e.stage;switch(e.stage){case"match":return(t={})[r]=Wo.encode(e.val),t;default:return(n={})[r]=this.encodeAny(e.val),n}},e.prototype.encodeAggregateCommand=function(e){var t;return(t={})[Lo(e.operator)]=this.encodeAny(e.operands[0]),t},e}(),Wo=function(){function e(){}return e.encode=function(e){return Vo(e)},e}(),Vo=function(e){return Ue(e)?Ho(e):ze(e)?zo(e):ft(e)||$e(e)||pt(e)?Fo.encode(e):Object(s.isObject)(e)?Go(e):on(e)},Go=function(e){var t,n=en(e),r=[],i=((t={})[me.OR]=0,t[me.NOR]=0,t[me.AND]=0,t[me.NOT]=0,t),o=function(e){var t,o,a,s,c,u=n[e];if(Ue(u))switch(u.operator){case me.OR:case me.NOR:case me.AND:i[u.operator]++,r.push(((t={})[Mo(u.operator)]=u.operands.map((function(t){var n;return Vo(((n={})[e]=t,n))})),t));break;case me.NOT:var l=u.operands[0];if(Ue(l))switch(l.operator){case me.AND:i[me.OR]++,r.push(Ho(new Fe(me.OR,l.operands.map((function(t){var n;return(n={})[e]=new Fe(me.NOT,[t]),n})))));break;case me.OR:i[me.NOR]++,r.push(Ho(new Fe(me.NOR,l.operands.map((function(t){var n;return(n={})[e]=t,n})))));break;case me.NOR:i[me.OR]++,r.push(Ho(new Fe(me.OR,l.operands.map((function(t){var n;return(n={})[e]=t,n})))));break;case me.NOT:r.push(Vo(((o={})[e]=l.operands[0],o)))}else r.push(((a={})[e]=Ho(u),a))}else ze(u)?r.push(((s={})[e]=zo(u),s)):r.push(((c={})[e]=on(u),c))};for(var a in n)o(a);return Yo(r)},Ho=function(e){var t,n,r,i,a,s;switch(e.operator){case me.AND:if(e.operands.every((function(e){return ze(e)}))){var c={};try{for(var u=Object(o.__values)(e.operands),l=u.next();!l.done;l=u.next()){var d=l.value;Object.assign(c,zo(d))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return c}var f=Mo(e.operator),p=e.operands.map(Vo);return(r={})[f]=p,r;case me.OR:case me.NOR:f=Mo(e.operator),p=e.operands.map(Vo);return(i={})[f]=p,i;case me.NOT:f=Mo(e.operator),d=e.operands[0];return(a={})[f]=Vo(d),a;default:f=Mo(e.operator),p=e.operands.map(Vo);return(s={})[f]=p,s}},zo=function(e){var t,n,r,i,o,a,s,c,u=Mo(e.operator);switch(e.operator){case We.EQ:case We.NEQ:case We.LT:case We.LTE:case We.GT:case We.GTE:case We.EXISTS:case We.SIZE:return(t={})[u]=on(e.operands[0]),t;case We.IN:case We.NIN:case We.MOD:return(n={})[u]=on(e.operands),n;case We.ALL:return(r={})[u]=e.operands.map(Vo),r;case We.ELEM_MATCH:case We.EXPR:return(i={})[u]=Vo(e.operands[0]),i;case We.GEO_NEAR:return(o={})[u]={$geometry:on(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance},o;case We.GEO_WITHIN:var l={};return e.operands[0].geometry&&(l.$geometry=on(e.operands[0].geometry)),e.operands[0].centerSphere&&(l.$centerSphere=on(e.operands[0].centerSphere)),(a={})[u]=l,a;case We.GEO_INTERSECTS:return(s={})[u]={$geometry:on(e.operands[0].geometry)},s;default:return(c={})[u]=e.operands.length>1?e.operands.map(Vo):Vo(e.operands[0]),c}},Yo=function(e){var t,n,r,i,a={$and:0,$or:0,$nor:0};try{for(var s=Object(o.__values)(e),c=s.next();!c.done;c=s.next()){(h=c.value).$and&&a.$and++,h.$or&&a.$or++,h.$nor&&a.$nor++}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var u=a.$and>1||a.$or>1||a.$nor>1,l=!1,d={};try{for(var f=Object(o.__values)(e),p=f.next();!p.done;p=f.next()){var h=p.value;for(var g in h){var v=h[g];u?l?d.$and.push(h):"$and"===g||"$or"===g||"$nor"===g?(l=!0,d.$and=[h]):d[g]=v:d[g]=v}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d},qo=function(){function e(){}return e.encode=function(e){return Ko(e)},e}(),Ko=function(e){return Jo(e)},Jo=function(e){var t=en(e),n={};for(var r in t){var i=t[r];if(Ke(i)){var o=Mo(i.operator);switch(n[o]||(n[o]={}),i.operator){case Ye.SET:case Ye.INC:case Ye.MUL:case Ye.MIN:case Ye.MAX:case Ye.RENAME:case Ye.BIT:n[o][r]=on(i.operands[0]);break;case Ye.REMOVE:n[o][r]="";break;case Ye.PUSH:var a=void 0;a=1===i.operands.length&&Object(s.isObject)(i.operands[0])?{$each:i.operands[0].each.map(on),$position:i.operands[0].position,$slice:i.operands[0].slice,$sort:i.operands[0].sort}:{$each:i.operands.map(on)},n[o][r]=a;break;case Ye.UNSHIFT:a={$each:i.operands.map(on),$position:0};n[o][r]=a;break;case Ye.POP:n[o][r]=1;break;case Ye.SHIFT:n[o][r]=-1;break;case Ye.ADD_TO_SET:n[o][r]=Object(s.isObject)(i.operands[0])&&i.operands[0].each?{$each:i.operands[0].each}:i.operands[0];break;case Ye.PULL:n[o][r]=Wo.encode(i.operands[0]);break;case Ye.PULL_ALL:default:n[o][r]=on(i.operands[0])}}else n.$set||(n.$set={}),n.$set[r]=on(i)}return n},Xo=function(){function e(){}return e.encode=function(t){return(new e).encodeProjection(t)},e.prototype.encodeProjection=function(e){return et(e)?this.encodeProjectionCommand(e):"object"===Object(s.getType)(e)?this.encodeProjectionObject(e):e},e.prototype.encodeProjectionCommand=function(e){var t,n=Mo(e.operator);switch(e.operator){case Ze.SLICE:default:return(t={})[n]=e.operands[0],t}},e.prototype.encodeProjectionObject=function(e){var t=en(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:et(t[n])?t[n]=this.encodeProjectionCommand(t[n]):delete t[n];return t},e}(),$o=function(){function e(){}return e.decode=function(t){return(new e).decodeData(t)},e.prototype.decodeData=function(e){var t=this;switch(Object(s.getType)(e)){case"object":return this.decodeObject(e);case"array":return e.map((function(e){if(Object(s.isObject)(e)){var n=an(e);return n!==e?n:t.decodeObject(e)}return e}));default:return e}},e.prototype.decodeObject=function(e){var t=Object(o.__assign)({},e);for(var n in t){var r=t[n];switch(Object(s.getType)(r)){case"object":var i=an(r);t[n]=i!==r?i:this.decodeObject(t[n]);break;case"array":(i=this.decodeData(r))!==r&&(t[n]=i);break;default:continue}}return t},e}();!function(e){e[e.DEFAULT=0]="DEFAULT"}(Bo||(Bo={}));var Zo=function(e,t){return new(ea(e.identifiers||{}))({context:e,config:t})};function Qo(e){return e.debug}var ea=function(e){var t,n;return function(){function o(o){var a,s=o.config,c=o.context;this.identifiers=e,this.config=s||{},t={database:this,serviceContext:c,engine:(void 0===a&&(a=Bo.DEFAULT),i)},n=xo(t),s&&s.env&&l(s.env,"string"),this.command=gt,this.Geo=r,this.serverDate=vt,this.RegExp=Po,s&&s.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get:function(){return Qo((e=t).database)?e.engine.QuerySerializer:void 0;var e},set:function(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get:function(){return Qo((e=t).database)?e.engine.UpdateSerializer:void 0;var e},set:function(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get:function(){return Qo((e=t).database)?e.engine.ProjectionSerializer:void 0;var e},set:function(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get:function(){return Qo((e=t).database)?e.engine.AggregateSerializer:void 0;var e},set:function(){}},Decoder:{enumerable:!1,configurable:!1,get:function(){return Qo((e=t).database)?e.engine.Decoder:void 0;var e},set:function(){}}})}return o.prototype.collection=function(e){return new n(e)},o.prototype.toJSON=function(){},o}()};function ta(e){return{database:Zo.bind(null,e)}}var na="database";function ra(e){e.registerService(function(e){var t={name:na,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(na)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:na,context:t,getAPIs:ta.bind(null,t)}}(e))}function ia(e){return{CloudID:(n=function(){function e(e){this._internalType=S,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return e.prototype.toJSON=function(){return this.cloudID},e.prototype.toString=function(){return this.cloudID},e}(),function(e){return new n(e)}),CDN:(t=function(){function e(e){this._internalType=T,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return e.prototype.toString=function(){return JSON.stringify({target:this.target})},e}(),function(e){return new t(e)})};var t,n}var oa="utils";function aa(e){e.registerService(function(e){var t={name:oa,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:oa,context:t,getAPIs:ia.bind(null,t)}}(e))}function sa(e){H(e),ye(e),ra(e),aa(e),ae(e)}n.d(t,"registerServices",(function(){return sa}))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(62),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(27))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[c]=i,r(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(27),n(54))},function(e,t,n){(function(e){var r=n(64),i=n(65),o=n(66);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return G(W(t,e.length-n),e,n,r)}function w(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return G(V(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:W(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(27))},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(57),i=n(5),o=n(6),a=n(0),s=n(8),c=Symbol("CDN"),u=function(e){this.symbol=c,this.options=e};function l(e){return new Promise((function(t,n){Object(s.getSDK)().uploadToCommonCDN(Object(a.__assign)(Object(a.__assign)({},e),{success:t,fail:n}))}))}function d(e){return new Promise((function(t,n){Object(s.getSDK)()._operateWXData(Object(a.__assign)(Object(a.__assign)({},e),{success:t,fail:n}))}))}var f,p,h,g=function(e){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,i,o,s,u,f,p,h,g;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");return t=new WeakMap,n=[],e.data&&JSON.stringify(e.data,(function(e,r){return r&&r.symbol===c?void n.push(new Promise((function(e,n){var i,o={appType:301,fileType:20303,fileKey:"file_"+Math.random()},a=r;switch(i=a.options,Object.prototype.toString.call(i).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");o.filePath=a.options.filePath;break;default:o.fileData=a.options}e(l(o).then((function(e){t.set(r,e.fileUrl)})))}))):r})),[4,Promise.all(n)];case 1:return a.sent(),r=JSON.stringify(e.data,(function(e,n){return n&&n.symbol===c&&t.has(n)?t.get(n):n})),[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:r,client_msg_id:Math.random()+"_"+Date.now(),version:1}})];case 2:i=a.sent().rawData,o=void 0,s=void 0,u=void 0;try{f=JSON.parse(i),o=f.request_id,0===f.errcode?s=JSON.parse(f.data):(h="invokeService:fail "+f.errcode+" "+f.errmsg+" (requestId: "+o+")",(u=new Error(h)).errCode=f.errcode,u.errMsg=h,u.requestId=o)}catch(e){h="invokeService:fail inner protocol parse failed (requestId: "+(o||"empty")+")",(u=new Error(h)).errCode=-1,u.errMsg=h,u.requestId=o}if(u)throw u;return[2,{errMsg:"invokeService:ok",data:s,requestId:o}];case 3:throw p=a.sent(),h="invokeService:fail ",p&&p.errMsg&&p.err_code?(h+=p.errMsg,(g=new Error(h+"(err_code "+p.err_code+")")).errCode=p.err_code,g):p&&p.errMsg&&p.errCode?p:new Error("invokeService:fail "+p);case 4:return[2]}}))}))};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(f||(f={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(p||(p={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(h||(h={}));var v,_=n(7),y=n(1),m={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},b="exceed max timeout retry",w="empty call result",O="exceed max poll retry",E="invokeService";!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(v||(v={}));var S=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},T=function(e){return e.join("->")},I=function(e){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){function t(e,t,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(i){return[2,new Promise((function(i,o){var a=[S("start")],s=function(e,t,n){var r=function(t){e.push(S("app "+t))};return Object(_.onAppVisibilityChange)(r),{resolve:function(e){Object(_.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(_.offAppVisibilityChange)(r),n(e)}}}(a,i,o),c=s.resolve,u=s.reject;n({param:e,data:t,callID:r,scene:f.CALL,retryReason:p.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:a,resolve:c,reject:u})}))]}))}))}function n(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,r,i,s,c,u,l,h,g,v,I,A,C,k,x,P,D,R,j,N,M,L,B,F=this;return Object(a.__generator)(this,(function(U){switch(U.label){case 0:t=e.param,r=e.data,i=e.callID,s=e.scene,c=e.retryReason,u=e.tryCount,l=e.trace,h=e.systemErrorRetry,g=e.timeoutErrorRetry,v=e.resolve,I=e.reject,A={service_id:t.service,api_name:t.api,data:s===f.CALL?r:void 0,client_msg_id:Math.random()+"_"+Date.now(),version:2,call_id:i,scene:s,retry_reason:c},C=!1,k=!1,x=function(){clearTimeout(D),k=!0},P=+new Date,D=setTimeout((function(){return Object(a.__awaiter)(F,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return 2e4,+new Date-P>2e4?[4,Object(_.sleep)()]:[3,2];case 1:if(t.sent(),k)return[2];t.label=2;case 2:return!Object(o.isDevTools)()&&+new Date-P>60?(l.push(S("timeout, exceed max retry gap")),[2,I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+i+") (trace: "+T(l)+")"},E))]):(C=!0,e.timeoutErrorRetry>0?(l.push(S("timeout, retry")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:s,retryReason:p.Timeout,tryCount:u-1,timeoutErrorRetry:g-1}))):(l.push(S("timeout, abort")),I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:b+" (callId: "+i+") (trace: "+T(l)+")"},E))),[2])}}))}))}),2e4),U.label=1;case 1:return U.trys.push([1,3,,4]),new Date,[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:A})];case 2:R=U.sent();try{if(new Date,C)return[2];if(x(),R.rawData,!(j=JSON.parse(R.rawData)))return l.push(S("empty resp")),[2,I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_EMPTY_CALL_RESULT,errMsg:w},E))];if(j.scene!==f.PreResp){if(j.scene===f.FinalResp){if(0!==j.errcode)return(N=Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_PROVIDER_EXECUTION_ERROR,errMsg:"requestID "+j.request_id+", error message "+(j.provider_errmsg||"unknown")+" (callid "+i+")"},E)).requestID=j.request_id,[2,I(N)];M=j.data;try{M=JSON.parse(M)}catch(e){}return[2,v({result:M,requestID:j.request_id})]}return l.push(S("unexpected scene")),[2,I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_UNKNOWN_SCENE,errMsg:"unknown scene "+j.scene+" (callId: "+i+") (trace: "+T(l)+")"},E))]}if(!(u>=0))return l.push(S("too many polls, abort")),[2,I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_EXCEED_MAX_POLL_RETRY,errMsg:O+" (callId: "+i+") (trace: "+T(l)+")"},E))];l.push(S("normal poll")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:f.POLL,retryReason:p.None,tryCount:u-1}))}catch(e){I(Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_POLL_ERROR,errMsg:"polling catch error: "+e+" (callId: "+i+")"},E))}return[3,4];case 3:return L=U.sent(),new Date,C?[2]:(x(),B=L instanceof Error?L:JSON.stringify(L),L&&L.operateWXDataFail&&h>0?(l.push(S("system error ("+B+"), retry")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:s,retryReason:p.SysErr,tryCount:u-1,systemErrorRetry:h-1}))):(l.push(S("system error ("+B+"), abort")),I(Object(y.returnAsFinalCloudSDKError)(B+" (callId: "+i+") (trace: "+T(l)+")",E))),[3,4]);case 4:return[2]}}))}))}var r,i,s,u,g,v,I,A,C,k,x,P,D;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:if(n.trys.push([0,6,,7]),!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");return r=new WeakMap,i=[],e.data&&JSON.stringify(e.data,(function(e,t){return t&&t.symbol===c?void i.push(new Promise((function(e,n){var i,o={appType:301,fileType:20303,fileKey:"file_"+Math.random()},a=t;switch(i=a.options,Object.prototype.toString.call(i).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");o.filePath=a.options.filePath;break;default:o.fileData=a.options}e(l(o).then((function(e){r.set(t,e.fileUrl)})))}))):t})),[4,Promise.all(i)];case 1:return n.sent(),s=JSON.stringify(e.data,(function(e,t){return t&&t.symbol===c&&r.has(t)?r.get(t):t})),u=Math.random()+"_"+Date.now(),e.async?[3,3]:[4,t(e,s,u)];case 2:return g=n.sent(),v=g.result,I=g.requestID,[2,{errMsg:"invokeService:ok",data:v,requestId:I}];case 3:return[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:s,client_msg_id:Math.random()+"_"+Date.now(),version:2,call_id:u,scene:f.CALL,retry_reason:p.None,req_type:h.LongAsync}})];case 4:if(A=n.sent(),(C=JSON.parse(A.rawData)).scene===f.FinalResp&&0===C.errcode)return[2,{errMsg:"invokeService:ok",requestId:C.request_id}];throw(k=Object(y.returnAsFinalCloudSDKError)({errCode:m.SM_SYSTEM_ERROR,errMsg:"requestID "+C.request_id+", error message "+(C.errmsg||"unknown")+" (callid "+u+")"},E)).requestID=C.request_id,k;case 5:return[3,7];case 6:throw x=n.sent(),P="invokeService:fail ",x&&x.errMsg&&x.err_code?(P+=x.errMsg,(D=new Error(P+"(err_code "+x.err_code+")")).errCode=x.err_code,D):x&&x.errMsg&&x.errCode?x:new Error("invokeService:fail "+x);case 7:return[2]}}))}))};function A(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,d({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}})];case 1:if(t=i.sent(),0===(n=JSON.parse(t.rawData)).errcode)return n.provider_errmsg?[2,{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:n.status,providerErrMsg:n.provider_errmsg,requestId:n.request_id}]:[2,{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(n.data),status:n.status,requestId:n.request_id}];throw(r=new Error("getAsyncResult:fail requestID "+n.request_id+", error message "+(n.errmsg||"unknown"))).errCode=n.errcode,r.errMsg=n.errmsg,r}}))}))}var C="invokeService",k="getAsyncResult",x=function(e){(Object(o.isDevTools)()&&!e.async?g(e):I(e)).then((function(t){Object(i.invokeSuccessCompleteCallbacks)(C,e,t)})).catch((function(t){Object(i.invokeFailCompleteCallbacks)(C,e,t)}))},P=function(e){A(e).then((function(t){Object(i.invokeSuccessCompleteCallbacks)(k,e,t)})).catch((function(t){Object(i.invokeFailCompleteCallbacks)(k,e,t)}))},D={invokeService:function(e){return Object(i.hasAPICallback)(e)?x(e):Object(o.isDevTools)()&&!e.async?g(e):I(e)},getAsyncResult:function(e){return Object(i.hasAPICallback)(e)?P(e):A(e)},CDN:u};n.d(t,"getCloudInstance",(function(){return r.getCloudInstance})),n.d(t,"getCloudAPI",(function(){return r.getCloudAPI})),n.d(t,"DefaultCloud",(function(){return r.DefaultCloud})),n.d(t,"InstanceCloud",(function(){return r.InstanceCloud})),n.d(t,"serviceMarket",(function(){return D}))}]),__subContextEngine__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){n.r(t),n.d(t,"currentGlobal",(function(){return s})),n.d(t,"deepFreeze",(function(){return c})),n.d(t,"isIsolateContext",(function(){return u})),n.d(t,"freezeGlobal",(function(){return l})),n.d(t,"callInitFunc",(function(){return d})),n.d(t,"handleThirdError",(function(){return f})),n.d(t,"surroundByTryCatchFactory",(function(){return p})),n.d(t,"executeOnlyOnce",(function(){return h})),n.d(t,"isDevtools",(function(){return g})),n.d(t,"isIOS",(function(){return v})),n.d(t,"accessSync",(function(){return _})),n.d(t,"readFileSync",(function(){return y})),n.d(t,"isValidGameIndependentSubpackagePath",(function(){return m})),n.d(t,"isValidGameIndependentSubpackageScene",(function(){return b}));var r=n(1),i=n.n(r),o=n(2),a=n(3),s=function(){return this}();function c(e){e===s&&g()||(Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n;try{n=e[t]}catch(e){}"object"!==Object(a.default)(n)&&"function"!=typeof n||Object.isFrozen(n)||c(n)})))}var u=function(){return void 0!==__wxConfig&&__wxConfig.isIsolateContext},l=function(){var e=s;Protect.globalEsObjs.concat(["console"]).forEach((function(t){e[t]&&(c(e[t]),Object.defineProperty(e,t,{value:e[t],configurable:!1,writable:!1}))}))},d=function(){var e=Object(o.default)(i.a.mark((function e(t,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Reporter.reportIDKey({key:n}),e.prev=1,e.next=4,t();case 4:e.next=11;break;case 6:e.prev=6,e.t0=e.catch(1),Reporter.reportIDKey({key:n+"_fail",force:!0}),r=n.indexOf("initGame")>=0?"gameSDKScriptError":"appServiceSDKScriptError",Reporter.errorReport({key:r,error:e.t0,extend:""});case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}(),f=function(e,t,n){void 0!==n?Reporter.thirdErrorReport({error:e,isUnhandledRejection:!0,promise:n,extend:t}):Reporter.thirdErrorReport({error:e,isUnhandledRejection:!1,extend:t})},p=function(e,t){return function(){try{return t.apply(t,arguments)}catch(t){Reporter.errorReport({key:e,error:t,extend:""})}}},h=function(e){var t=!1;return function(){return!t&&(t=!0,e.apply(void 0,arguments))}},g=function(){return"devtools"===__wxConfig.platform},v=function(){return"ios"===__wxConfig.platform},_=function(e){var t;if(WeixinJSBridge.invoke("accessSync",{path:e},(function(e){/:fail/.test(e.errMsg)&&(t=e.errMsg)})),t)throw new Error(t)},y=function(e){var t,n;if(WeixinJSBridge.invoke("readFileSync",{filePath:e,encoding:"utf-8"},(function(e){/:fail/.test(e.errMsg)?n=e.errMsg:t=e.data})),n)throw new Error(n);return t},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e&&"string"==typeof e&&!/^index/.test(e);if(n){var r=e.replace(/(^\/+)|(\/+$)/g,"").split("/"),i=t.find((function(t){if(t.independent){var n=t.root||"",i=t.alias||"",o=n.replace(/(^\/+)|(\/+$)/g,"").split("/");if(r.length>=o.length){var a=o.every((function(e,t){return e===r[t]}));if(a)return a}if(i&&0===e.indexOf(i))return!0}return!1}));if(i)return i}return!1},b=function(e){var t=[1001,1011,1007,1008,1074,1088,1044,1010,1096,1014,1043,1107,1155].indexOf(e)>=0;return t}},function(e,t,n){e.exports=n(6)},function(e,t,n){function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,"default",(function(){return i}))},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t);var r=n(3);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=n(1),s=n.n(a),c=n(2);function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l,d=n(0),f={},p={},h={},g={},v={},_={},y=wxNativeConsole.createLogger("SubContext"),m=0;JSContext.subscribe("subContextMessage",(function(e,t){var n=h[t];n&&n.__onMessageHandler(e)})),JSContext.subscribe("subContextReady",(function(e,t){Object(d.isDevtools)()||JSContext.isAsync()?h[t].__onReadyHandler(t,e):l&&(l.__onReadyHandler(t,e),l=void 0)})),JSContext.subscribe("subContextLibVarReady",(function(e,t){h[t].__onLibVarReadyHandler(e)}));var b=function(e){var t=JSContext.create(e);return t<=0&&setTimeout((function(){}),0),f[this.__guid__]=t,t},w=function(e){var t=Object(d.isDevtools)()||JSContext.isAsync()?JSContext.alloc(e):JSContext.alloc();return t<=0&&setTimeout((function(){}),0),(Object(d.isDevtools)()||JSContext.isAsync())&&(h[t]=this),f[this.__guid__]=t,t},O=function(e,t){Object.defineProperty(this,e,{value:t,writable:!1,configurable:!1})},E=function(){var e=this;void 0!==p[this.__guid__]&&(_[this.__guid__].forEach((function(t){e.postMessage(t)})),_[this.__guid__]=[])},S=function(){function e(t){var n=t.name,r=t.secure,i=void 0===r||r,o=t.env,a=void 0===o?{}:o,s=t.entry,c=void 0===s?[]:s,u=t.injectAfterAlloc,l=void 0===u||u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O.call(this,"__name__",n),O.call(this,"__guid__",m++),O.call(this,"__secure__",i),O.call(this,"__entry__",c),O.call(this,"__injectAfterAlloc__",l),this.contextGlobal=function(){return this}(),this.alreadyLoadedJsFiles=new Set,this.setExportEnv(a),v[this.__guid__]=[],_[this.__guid__]=[]}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;if(l=this,!JSContext.supportAlloc())return b.call(this,this.__entry__);if(w.call(this,this.__name__),this.__injectAfterAlloc__){if((Object(d.isDevtools)()||JSContext.isAsync())&&Object(d.isIsolateContext)())return Object(c.default)(s.a.mark((function t(){var n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=0,r=e.__entry__.length;case 1:if(!(n<r)){t.next=7;break}return t.next=4,e.evaluateScriptFile(e.__entry__[n]);case 4:n++,t.next=1;break;case 7:case"end":return t.stop()}}),t)})))();this.__entry__.forEach((function(t){return e.evaluateScriptFile(t)}))}}},{key:"unShiftEntries",value:function(e){var t;y.log("unShiftEntries",e),(t=this.__entry__).unshift.apply(t,o(e))}},{key:"onMessage",value:function(e){var t=this;this.__onMsgCallback=e,"function"==typeof this.__onMsgCallback&&(v[this.__guid__].forEach((function(e){t.__onMsgCallback(e)})),v[this.__guid__]=[])}},{key:"postMessage",value:function(e){var t=p[this.__guid__];void 0!==t?JSContext.publish("mainContextMessage",e,[t]):_[this.__guid__].push(e)}},{key:"onInitReady",value:function(e){this.__onInitReadyCallbacks=this.__onInitReadyCallbacks||[],this.__onInitReadyCallbacks.push(e)}},{key:"setExportEnv",value:function(e){e.contextName=this.__name__,e.contextSecure=this.__secure__,g[this.__guid__]=e}},{key:"setEntry",value:function(e){var t;this.__entry__.splice(0,this.__entry__.length),(t=this.__entry__).push.apply(t,o(e))}},{key:"getEntry",value:function(){return this.__entry__}},{key:"refreshExportEnv",value:function(e){var t=this;return new Promise((function(n){if(!e)throw Error("refreshExportEnv: missing arguments.");t.setExportEnv(e);var r=g[t.__guid__],i=p[t.__guid__];JSContext.publish("subContextEnvReady",r,[i],!0),JSContext.subscribe("subContextRefreshEnvReady",(function(e,t){i===t&&n()}))}))}},{key:"refreshWxConfig",value:function(e,t){var n=p[this.__guid__];JSContext.publish("subContextRefreshWxConfig",{key:e,value:t},[n])}},{key:"dynamicExportGlobal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"",value:"",needCondom:!0},n=arguments.length>1?arguments[1]:void 0,r=f[this.__guid__],i=function(){var r=p[e.__guid__];JSContext.publish("exportGlobalRequire",t,[r]),n&&n()};void 0!==r?i():this.onInitReady(i)}},{key:"evaluateScriptFile",value:function(e){y.log("evaluateScriptFile, scriptFilePath="+e),y.log("evaluateScriptFile, clientIds",f),y.log("evaluateScriptFile, __guid__="+this.__guid__,Object(r.default)(this.__guid__));var t=f[this.__guid__];if(y.log("evaluateScriptFile, clientId="+t+", __guid__="+this.__guid__+", "+f[this.__guid__],f),void 0!==t){if((Object(d.isDevtools)()||JSContext.isAsync())&&Object(d.isIsolateContext)())return y.log("evaluateScriptFile, (isDevtools || JSContext.isAsync) && isIsolatedContext"),new Promise((function(n){var r=JSContext.evaluateScriptFile(t,e,(function(){return n(r)}));if(y.log("JSContext.evaluateScriptFile ret="+r),1!==r)throw new Error('SubContext evaluateScriptFile "'+e+'" failed: error code '+r)}));var n=JSContext.evaluateScriptFile(t,e);if(y.log("JSContext.evaluateScriptFile ret="+n),1!==n)throw new Error('SubContext evaluateScriptFile "'+e+'" failed: error code '+n)}}},{key:"loadJsFiles",value:function(e){var t=this,n=f&&f[this.__guid__];if(e=e.filter((function(e){return!t.alreadyLoadedJsFiles.has(e)})),void 0!==n&&JSContext&&JSContext.batchLoadJsFiles)try{JSContext.batchLoadJsFiles(n,e),e.forEach((function(e){return t.alreadyLoadedJsFiles.add(e)}))}catch(t){throw new Error('SubContext loadJsFiles "'+e+'" failed: error '+t)}}},{key:"destroy",value:function(){var e=f[this.__guid__],t=p[this.__guid__];e>0&&(JSContext.publish("subContextDestroy",{},[t]),JSContext.destroy(e)),delete h[t],delete f[this.__guid__],delete p[this.__guid__],delete g[this.__guid__],delete v[this.__guid__],delete _[this.__guid__],delete this.__guid__,delete this.contextGlobal}},{key:"__onMessageHandler",value:function(e){"function"==typeof this.__onMsgCallback?this.__onMsgCallback(e):v[this.__guid__].push(e)}},{key:"__onReadyHandler",value:function(e,t){h[e]=this,p[this.__guid__]=e,this.contextGlobal=t.contextGlobal;var n=g[this.__guid__];n&&JSContext.publish("subContextEnvReady",n,[e],!0),this.__onInitReadyCallbacks&&(this.__onInitReadyCallbacks.forEach((function(e){e(t)})),delete this.__onInitReadyCallbacks),delete this.__onReadyHandler,E.call(this)}}])&&u(t.prototype,n),i&&u(t,i),e}();t.default=S},function(e,t,n){n.r(t),function(e){n.d(t,"initAppContext",(function(){return v})),n.d(t,"getAppContext",(function(){return _}));var r=n(4),i=n(0),o="app-service.js",a="appservice.app.js",s="common.app.js",c="appservice.js",u=new r.default({name:"app",secure:!1,entry:[o],injectAfterAlloc:!1}),l=new Set;__wxConfig.onReady((function(){"develop"!==__wxConfig.envVersion&&"tiral"!==__wxConfig.envVersion||(l.add("wx0354ba48aadc0ab2"),l.add("wxfa43a4a7041a84de"))}));var d,f=new Set,p=function(e,t){f.has(e)||(f.add(e),__wxConfig.onReady((function(){if(__wxConfig.isLazyLoad,__wxConfig.isLazyLoad){console.info("Lazy code loading is enabled. Only injecting required components.");var n=[];t.forEach((function(t){var r=(e+t.prefix_path+"/").replace(/\/\/$/,"/");t.prefix_path||(r+="__extended__/"+t.plugin_id+"/",l.add(t.plugin_id));try{Object(i.accessSync)(r+s),n.push(r+s,r+a),t.prefix_path||function(e,t){var n=Object(i.readFileSync)(t);if(n){var r;try{r=JSON.parse(n)}catch(e){r={}}(__wxConfig.subPackages||[]).forEach((function(t){"/"+t.root===e&&t.useExtendedLib&&r.allExtendedComponents&&(t.allExtendedComponents=r.allExtendedComponents)})),u.refreshWxConfig("subPackages",__wxConfig.subPackages)}}(e,r+"plugin.json")}catch(e){n.push(r+c)}})),wxNativeConsole.info("[injectEntryFile] using separated plugins:",n),n.push(e+s,e+a),u.loadJsFiles(n)}else{var r=t.map((function(t){var n=(e+t.prefix_path+"/").replace(/\/\/$/,"/");return t.prefix_path||(n+="__extended__/"+t.plugin_id+"/",l.add(t.plugin_id)),n+c}));wxNativeConsole.info("[injectEntryFile] using separated plugins:",r),r.push(e+o),r.forEach((function(e){u.evaluateScriptFile(e)}))}u.refreshWxConfig("extendedLibList",Array.from(l))})))},h={setReceiver:function(e){d=e},send:function(e){"function"==typeof d&&d(e)}},g=Object(i.surroundByTryCatchFactory)("appServiceSDKScriptError",(function(e,t){var n=t.moduleName,r="__APP__"===n,i=t.separatedPlugins||[];"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith("/")||(n+="/");var o=Date.now();p(r?"":n,i),h.send({type:"evaluateScript",moduleName:n,startTime:o,endTime:Date.now()})})),v=function(){var t,n=new Safeway(u),r={wxLibVersion:(null===(t=__libVersionInfo__)||void 0===t?void 0:t.version)||"9.9.9",console:Object.assign({group:function(){},groupEnd:function(){}},console),setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,safeway:n,__wxConfig:__wxConfig,Reporter:Reporter,BaseConsole:__appServiceConsole__.BaseConsole,NativeGlobal:e.NativeGlobal,WeixinCanvas:e.WeixinCanvas,WeixinArrayBuffer:e.WeixinArrayBuffer,wxNativeConsole:wxNativeConsole,getWxSourceMap:function(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},Canvas:e.Canvas,Image:e.Image,ImageData:e.ImageData,Path2D:e.Path2D,SkiaCanvasExternalTexture:e.SkiaCanvasExternalTexture,skiacanvasLoadNewFont:e.skiacanvasLoadNewFont,SkiaCanvas:NativeGlobal.SkiaCanvas,SkiaCanvasRequestAnimationFrame:NativeGlobal.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame:NativeGlobal.SkiaCanvasCancelAnimationFrame,SkiaImageData:NativeGlobal.SkiaImageData,HTMLCanvasView:NativeGlobal.HTMLCanvasView,HTMLCanvasElement:NativeGlobal.HTMLCanvasElement,SkiaImage:NativeGlobal.SkiaImages,SkiaPath2D:NativeGlobal.SkiaPath2D,SkiaCanvasLoadNewFont:NativeGlobal.SkiaCanvasLoadNewFont,performanceChannel:h,__sclEngine__:__sclEngine__};n.onSubpackageReady(g),u.setExportEnv(r),u.init()},_=function(){return u}}.call(this,n(7))},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function v(){}function _(){}function y(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(k([])));w&&w!==n&&r.call(w,o)&&(m=w);var O=y.prototype=v.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return _.prototype=O.constructor=y,y.constructor=_,_.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),c(O,s,"Generator"),O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"initAppRelatedContexts",(function(){return L})),n.d(t,"initGameRelatedContexts",(function(){return B})),n.d(t,"getAppContext",(function(){return u.getAppContext})),n.d(t,"getGameContext",(function(){return h})),n.d(t,"createGameOpenDataContext",(function(){return V})),n.d(t,"getGameOpenDataContext",(function(){return y})),n.d(t,"createIsolatedGamePlugin",(function(){return x})),n.d(t,"injectGamePlugin",(function(){return P})),n.d(t,"getGamePlugins",(function(){return R})),n.d(t,"isIsolateContext",(function(){return a.isIsolateContext})),n.d(t,"initGameJS",(function(){return U})),n.d(t,"initFunctionalPage",(function(){return F})),n.d(t,"getPool",(function(){return O})),n.d(t,"loadJsFiles",(function(){return N})),n.d(t,"isValidGameIndependentSubpackagePath",(function(){return a.isValidGameIndependentSubpackagePath}));var r=n(1),i=n.n(r),o=n(2),a=n(0);function s(e){e=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}(e),Object(a.isIsolateContext)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught FrameworkError","\n",e.message,"\n",e.stack)):Object(a.handleThirdError)(e,"")}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.isIsolateContext)()?("function"==typeof __wxSourceMapRetrace__&&(e=__wxSourceMapRetrace__(e)),console.error("Uncaught (in promise) FrameworkError","\n",e.reason)):Object(a.handleThirdError)(e.reason,"",e.promise||null)}void 0!==WeixinJSBridge&&(WeixinJSBridge.on("onError",s),WeixinJSBridge.on("unhandledRejection",c)),Foundation.on("error",s),Foundation.on("unhandledRejection",c);var u=n(5),l=n(4),d=new l.default({name:"game",secure:!1,entry:["game.js"]}),f=wxNativeConsole.createLogger("initGameContext");function p(){__appServiceSDK__.getABTestConfig({experimentId:Object(a.isIOS)()?"clicfg_appbrand_ios_game_split_multi_plugincode":"clicfg_appbrand_game_split_multi_plugincode",experimentType:"Expt",success:function(e){f.log("testConfig result="+e.testConfig),e&&1===Number(e.testConfig)&&function(){var e=__wxConfig.plugins||__wxConfig.gamePlugins;if(f.log("plugins",e),e){var t=Object.keys(e).filter((function(t){var n=e[t].contexts;return f.log("contexts",n),!n||n.some((function(e){return"gameContext"===e.type}))})).map((function(t){return e[t]}));f.log("gameContextPlugins",t),d.unShiftEntries(t.map((function(e){var t="__plugin__/"+e.provider+"/plugin.js";return f.log("evaluate game plugin script file: "+t),t})))}}()},fail:function(e){f.error("getABTestConfig fail",e)}})}var h=function(){return d},g=new l.default({name:"gameOpenData",secure:!0,entry:["subContext.js"]}),v=wxNativeConsole.createLogger("initOpenDataContext");var _=function(e){return e.__wxConfig=__wxConfig,g.setExportEnv(e),Object(a.isDevtools)()||JSContext.isAsync()||function(){var e=__wxConfig.plugins||__wxConfig.gamePlugins;if(v.log("plugins",e),e){var t=Object.keys(e).filter((function(t){var n=e[t].contexts;return v.log("contexts",n),!!n&&n.some((function(e){return"openDataContext"===e.type}))})).map((function(t){return e[t]}));v.log("gameContextPlugins",t),g.unShiftEntries(t.map((function(e){var t="__plugin__/"+e.provider+"/plugin.js";return v.log("evaluate opendata plugin script file: "+t),t})))}}(),g.init()},y=function(){return g};function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=[],w=function(e){b.push(e)},O=function(){return b},E=n(3),S=function(e){return"gamePlugin"===e?{console:Object.assign({},console),Reporter:Reporter,setTimeout:NativeGlobal.setTimeout,clearTimeout:NativeGlobal.clearTimeout,setInterval:NativeGlobal.setInterval,clearInterval:NativeGlobal.clearInterval,requestAnimationFrame:NativeGlobal.requestAnimationFrame,cancelAnimationFrame:NativeGlobal.cancelAnimationFrame}:"object"!==(void 0===__appServiceSDK__?"undefined":Object(E.default)(__appServiceSDK__))?{}:__appServiceSDK__.getGameRelatedContextsExports()[e]||{}};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A={},C={isolatedContext:{},gameContext:{},gameOpenDataContext:{},unknown:{}},k=function(e){return"__plugin__/"+e+"/plugin.js"},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{provider:"",secure:!0,env:null,isPreload:!1},t=e.env,n=e.provider,r=e.secure,s=e.isPreload;if(!1===Object(a.isIsolateContext)())throw new Error("isn't isolateContext mode!");var c,u=A[n];if(u)return c=u.contextGlobal.__require,!0===u.__isCompleted||!1===u.__isCompleted&&(u.dynamicExportGlobal({name:"pluginEnv",value:t}),C.isolatedContext[n]=c),c;var d="gamePlugin_"+n,f=k(n),p=new l.default({name:d,secure:r,entry:[f]}),h=function(e){return e.__wxConfig=__wxConfig,p.setExportEnv(I(I({},e),{},{pluginEnv:t})),p.init()};return(Object(a.isDevtools)()||JSContext.isAsync())&&!0===s?Object(o.default)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.callInitFunc)(Object(o.default)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(p),e.next=3,h(S("gamePlugin"));case 3:c=p.contextGlobal.__require,p.__isCompleted=!1,A[n]=p;case 7:case"end":return e.stop()}}),e)}))),"initGamePluginContext");case 2:return e.abrupt("return",c);case 3:case"end":return e.stop()}}),e)})))():(Object(a.callInitFunc)((function(){w(p),h(S("gamePlugin")),c=p.contextGlobal.__require,p.__isCompleted=!0,A[n]=p}),"initGamePluginContext"),C.isolatedContext[n]=c,c)},P=function(e,t,n){var r=wxNativeConsole.createLogger("injectGamePlugin"),s=e.__name__,c=k(t),u="game"===s?"gameContext":"gameOpenData"===s?"gameOpenDataContext":"unknown";return r.log("invoke, provider="+t+", isPreload="+n+", contextName="+s+", entry="+c+", contextType="+u),r.log("invoke, provider="+t+", isPreload="+n+", contextName="+s+", entry="+c+", contextType="+u),(Object(a.isDevtools)()||JSContext.isAsync())&&!0===n?(r.log("(isDevtools || JSContext.isAsync) && isPreload"),Object(o.default)(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.evaluateScriptFile(c);case 2:return C[u][t]=e.contextGlobal.__require,n.abrupt("return",{provider:t,requireFunc:e.contextGlobal.__require,contextType:u});case 4:case"end":return n.stop()}}),n)})))()):(r.log("will evaluateScriptFile"),e.evaluateScriptFile(c),C[u][t]=e.contextGlobal.__require,{provider:t,requireFunc:e.contextGlobal.__require,contextType:u})},D=function(){var e=Object(o.default)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=__wxConfig.gamePlugins||__wxConfig.plugins||{},t=[];return Object.keys(e).forEach((function(n){e[n].contexts?e[n].contexts.forEach((function(r){t.push(I(I({},e[n]),{},{context:r,contexts:null}))})):t.push(I(I({},e[n]),{},{context:{type:"gameContext"},contexts:null}))})),t}(),n=function(e,t){return e.getEntry().unshift(t)},e.abrupt("return",Promise.all(t.map((function(e){var t=e.provider,r=e.context;switch(r.type){case"isolatedContext":return x(I(I({},e),{},{isPreload:!0}));case"gameContext":return n(h(),k(t));case"openDataContext":return n(y(),k(t));default:throw new Error("pluginConf error: invalid context name: "+r.type)}}))));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){return C},j=Object(u.getAppContext)(),N=function(e){return j.loadJsFiles(e)};JSContext&&JSContext.registerSyncMethod&&JSContext.registerSyncMethod("loadJsFiles",(function(e){return N(e.paths)})),__wxConfig.onReady((function(){"undefined"!=typeof __wxSourceMap&&(__wxSourceMap.get=function(e){if(__wxSourceMap[e])return __wxSourceMap[e];for(var t=O(),n=0;n<t.length;n++){var r=t[n].contextGlobal.__wxSourceMap;if("object"===Object(E.default)(r)&&r[e]){var i=void 0;try{i=JSON.parse(JSON.stringify(r[e]))}catch(e){console.error("[SourceMap] clone soucemap failed.")}return i}}})}));var M=Object.keys,L=function(e){Object(a.isIsolateContext)();for(var t=M(e),n=0;n<t.length;n++){var r=t[n];a.currentGlobal[r]=e[r]}Object(a.isIsolateContext)()&&Object(a.callInitFunc)((function(){Object(a.freezeGlobal)(),w(Object(u.getAppContext)()),Object(u.initAppContext)(e)}),"initAppIsolatedContext"),__wxConfig.onReady((function(){!Object(a.isIsolateContext)()&&__wxConfig.plugins&&(Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs())}))},B=function(){__wxConfig.onReady(Object(o.default)(i.a.mark((function e(){var t,n,r,o,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=__appServiceSDK__.getGameRelatedContextsExports(),!Object(a.isDevtools)()&&!JSContext.isAsync()||!Object(a.isIsolateContext)()){e.next=5;break}return e.next=5,D();case 5:Object(a.isIsolateContext)(),n=t.game.FunctionalPage,r=__wxConfig.appLaunchInfo,n.parseCompletePath(r.path).isFunctionalPage&&n.VALID_SCENE.includes(r.scene)?F(t):Object(a.isValidGameIndependentSubpackageScene)(r.scene)&&(o=Object(a.isValidGameIndependentSubpackagePath)(r.path,__wxConfig.subPackages))?(s=h(),(c=o.root).endsWith(".js")||(c.endsWith("/")||(c+="/"),c+="game.js"),wxNativeConsole.info("[Independent subPackagePath]",c),s.setEntry([c]),W(t,(function(e){e&&(console.error(e),console.error("then load main package"),wxNativeConsole.error("run game independent subpackage fail",e),s.evaluateScriptFile("game.js"),Reporter.reportIDKey({key:"loadGameIndependentSubPackageFail"}))}))):W(t);case 12:case"end":return e.stop()}}),e)}))))};function F(e){(e=e||__appServiceSDK__.getGameRelatedContextsExports()).game.FunctionalPage.initFunctionalPage()}function U(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),O().length>0||W(e)}function W(e,t){e=e||__appServiceSDK__.getGameRelatedContextsExports(),Object(a.isIsolateContext)()&&Object(a.callInitFunc)(Object(o.default)(i.a.mark((function n(){var r;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(a.freezeGlobal)(),w(h()),n.prev=2,n.next=5,(i=e.game).__wxConfig=__wxConfig,d.setExportEnv(i),f.log("__appServiceSDK__",__appServiceSDK__),Object(a.isDevtools)()||JSContext.isAsync()||p(),d.init();case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),r=n.t0;case 10:"function"==typeof t&&t(r);case 11:case"end":return n.stop()}var i}),n,null,[[2,7]])}))),"initGameIsolatedContext")}function V(e){e=e||__appServiceSDK__.getGameRelatedContextsExports(),Object(a.callInitFunc)(Object(o.default)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w(y()),t.prev=1,t.next=4,_(e.gameOpenData);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),t.t0;case 9:case"end":return t.stop()}}),t,null,[[1,6]])}))),"initGameOpenDataContext")}}]),Safeway=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e){e.exports=JSON.parse('{"invokes":{"createRequestTask":["__skipDomainCheck__","url"],"installDownloadTask":["downloadId"],"downloadAppInternal":["appUrl"],"addDownloadTaskStraight":["taskName","taskUrl","fileMd5"],"getInstallState":["packageName","packageNameArray"],"setClipboardData":["data"],"getClipboardData":[],"navigateBackApplication":[]}}')},function(e,t,n){n.r(t),function(e){n.d(t,"createSafeSha1",(function(){return i}));var r=n(0);function i(){var t,n,i=Function.prototype.call.bind(String.prototype.charAt),o=Function.prototype.call.bind(String.prototype.indexOf),a=(t=Function.prototype.call.bind(String.fromCharCode),n=String,function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.apply(void 0,[n].concat(r))});return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==Object(r.default)(e)&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(t,n,r){"use strict";r.r(n),r.d(n,"memory",(function(){return p})),r.d(n,"sha1",(function(){return h})),r.d(n,"setSalt",(function(){return g})),r.d(n,"main",(function(){return v})),r.d(n,"__wbindgen_malloc",(function(){return _})),r.d(n,"__wbindgen_realloc",(function(){return y})),r.d(n,"__wbindgen_free",(function(){return m})),r.d(n,"__wbindgen_start",(function(){return b}));var s=new ArrayBuffer(8),c=new Int32Array(s);new Float32Array(s),new Float64Array(s);var u,l=new ArrayBuffer(1114112),d=(u=new Uint8Array(l),function(t,n){var r,s;if(void 0===e)for(r=function(e){for(var t,n,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;u<e.length;)t=o(s,i(e,u++))<<18|o(s,i(e,u++))<<12|(n=o(s,i(e,u++)))<<6|(r=o(s,i(e,u++))),c+=64===n?a(t>>16&255):64===r?a(t>>16&255,t>>8&255):a(t>>16&255,t>>8&255,255&t);return c}(n),s=0;s<r.length;s++)u[t+s]=r.charCodeAt(s);else for(r=e.from(n,"base64"),s=0;s<r.length;s++)u[t+s]=r[s]});d(1048576,"VHJpZWQgdG8gc2hyaW5rIHRvIGEgbGFyZ2VyIGNhcGFjaXR5c3JjL2xpYmFsbG9jL3Jhd192ZWMucnMAAAAQACQAAAAkABAAFwAAAF0CAAAJAAAAaW50ZXJuYWwgZXJyb3I6IGVudGVyZWQgdW5yZWFjaGFibGUgY29kZVQAEAAoAAAAJAAQABcAAAAKAgAAJwAAADAAAAAxAAAAMgAAADMAAAA0AAAANQAAADYAAAA3AAAAOAAAADkAAABhAAAAYgAAAGMAAABkAAAAZQAAAGYAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNhc3NlcnRpb24gZmFpbGVkOiBgKGxlZnQgPT0gcmlnaHQpYAogIGxlZnQ6IGBgLAogcmlnaHQ6IGBgOiDsABAALQAAABkBEAAMAAAAJQEQAAMAAABkZXN0aW5hdGlvbiBhbmQgc291cmNlIHNsaWNlcyBoYXZlIGRpZmZlcmVudCBsZW5ndGhzQAEQADQAAADUABAAGAAAAFoIAAAJAAAAY2Fubm90IGFjY2VzcyBhIFRMUyB2YWx1ZSBkdXJpbmcgb3IgYWZ0ZXIgaXQgaXMgZGVzdHJveWVkYWxyZWFkeSBib3Jyb3dlZGFscmVhZHkgbXV0YWJseSBib3Jyb3dlZAAAAAUAAAAAAAAAAQAAAAYAAAAHAAAAAAAAAAEAAAAIAAAACQAAAAAAAAABAAAACgAAACACEAAAAAAAIAIQAAAAAAAMAAAAMAAAADEAAAAyAAAAMwAAADQAAAA1AAAANgAAADcAAAA4AAAAOQAAAGEAAABiAAAAYwAAAGQAAABlAAAAZgAAAA0AAAAIAAAABAAAAA4AAAAPAAAAEAAAAAgAAAAEAAAAEQAAABIAAAAAAAAAAQAAABMAAABydXN0LWNyeXB0by9zcmMvY3J5cHRvdXRpbC5ycwAAAKgCEAAdAAAALAAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgPT0gNKgCEAAdAAAAQQAAAAUAAABhc3NlcnRpb24gZmFpbGVkOiBkc3QubGVuKCkgKiA0ID09IGlucHV0LmxlbigpAACoAhAAHQAAAFIAAAAFAAAAYXNzZXJ0aW9uIGZhaWxlZDogZHN0LmxlbigpID49IHNyYy5sZW4oKagCEAAdAAAAowAAAAkAAABOdW1lcmljIG92ZXJmbG93IG9jY3VyZWQuAAAAAAAAAHJ1c3QtY3J5cHRvL3NyYy9jcnlwdG91dGlsLnJzAAAAoAMQAB0AAABNAQAACQAAAKgCEAAdAAAAMQEAAAEAAABhc3NlcnRpb24gZmFpbGVkOiBpZHggPj0gc2VsZi5idWZmZXJfaWR4YXNzZXJ0aW9uIGZhaWxlZDogc2VsZi5idWZmZXJfaWR4ID09IDY0cnVzdC1jcnlwdG8vc3JjL3NoYTEucnMAAC8EEAAXAAAAhAAAAA4AAAB1bmtub3duIGljb3Nhcm91bmQgaW5kZXhAAAAAYXNzZXJ0aW9uIGZhaWxlZDogYChsZWZ0ID09IHJpZ2h0KWAKICBsZWZ0OiBgYCwKIHJpZ2h0OiBgYAAAdAQQAC0AAAChBBAADAAAAK0EEAABAAAALwQQABcAAABdAQAABQAAAC8EEAAXAAAAZAEAAAUAAABhc3NlcnRpb24gZmFpbGVkOiAoIXN0LmNvbXB1dGVkKRUAAAAXAAAABAAAAAQAAAAYAAAAGQAAABoAAAAbAAAAAAAAAAEAAAAcAAAAY2FsbGVkIGBPcHRpb246OnVud3JhcCgpYCBvbiBhIGBOb25lYCB2YWx1ZXNyYy9saWJjb3JlL29wdGlvbi5yczQFEAArAAAAXwUQABUAAAB6AQAAFQAAAEFjY2Vzc0Vycm9yAB0AAAAQAAAABAAAAB4AAAAfAAAAIAAAAAwAAAAEAAAAIQAAACIAAAAEAAAABAAAACMAAAAkAAAAJQ=="),d(1050080,"L3J1c3RjLzQ1NjBlYTc4OGNiNzYwZjBhMzQxMjcxNTZjNzhlMjU1Mjk0OWY3MzQvc3JjL2xpYmNvcmUvZm10L21vZC5ycwAA4AUQAEYAAABjAQAAEwAAACYAAAAAAAAAAQAAACcAAABzcmMvbGliYWxsb2MvcmF3X3ZlYy5yc2NhcGFjaXR5IG92ZXJmbG93XwYQABEAAABIBhAAFwAAAAkDAAAFAAAAYSBmb3JtYXR0aW5nIHRyYWl0IGltcGxlbWVudGF0aW9uIHJldHVybmVkIGFuIGVycm9yQm9ycm93RXJyb3JCb3Jyb3dNdXRFcnJvciwAAAAAAAAAAQAAAC0AAABpbmRleCBvdXQgb2YgYm91bmRzOiB0aGUgbGVuIGlzICBidXQgdGhlIGluZGV4IGlzIAAA5AYQACAAAAAEBxAAEgAAAGNhbGxlZCBgT3B0aW9uOjp1bndyYXAoKWAgb24gYSBgTm9uZWAgdmFsdWVzcmMvbGliY29yZS9vcHRpb24ucnMoBxAAKwAAAFMHEAAVAAAAegEAABUAAAC7BhAAAAAAAFMHEAAVAAAApgQAAAUAAAA6IAAAuwYQAAAAAACYBxAAAgAAAHNyYy9saWJjb3JlL3Jlc3VsdC5ycwAAAKwHEAAVAAAAjQQAAAUAAABzcmMvbGliY29yZS9zbGljZS9tb2QucnNpbmRleCAgb3V0IG9mIHJhbmdlIGZvciBzbGljZSBvZiBsZW5ndGgg7AcQAAYAAADyBxAAIgAAANQHEAAYAAAAGQoAAAUAAABzbGljZSBpbmRleCBzdGFydHMgYXQgIGJ1dCBlbmRzIGF0IAA0CBAAFgAAAEoIEAANAAAA1AcQABgAAAAfCgAABQAAADB4MDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTl9IH0="),d(1050960,"c3JjL2xpYmNvcmUvZm10L21vZC5ycwAAUAkQABYAAABWBAAAKAAAAFAJEAAWAAAAYgQAABEAAABFcnJvcg==");var f=function(e,t,n){var r=new e.Int8Array(n),i=(new e.Int16Array(n),new e.Int32Array(n)),o=new e.Uint8Array(n),a=(new e.Uint16Array(n),new e.Uint32Array(n)),s=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),u=(e.Math.fround,e.Math.abs,e.Math.clz32),l=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,t.abort),d=(e.NaN,e.Infinity,1048576),f=0;function p(e){var t=0,n=0,r=0,o=0,s=0,c=0,l=0,d=0,f=0,p=0,h=0,g=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(d=i[262772]))break n;s=0-o|0,l=0,(e>>>=8)&&(l=31,o>>>0>16777215||(l=62+((o>>>(6-(e=u(e))&31)&1)-(e<<1)|0)|0));r:{i:{if(e=i[1051356+(l<<2)>>2]){for(r=o<<(31==(0|l)?0:25-(l>>>1)&31);;){if(!((n=-8&i[e+4>>2])>>>0<o>>>0||(n=n-o|0)>>>0>=s>>>0||(c=e,s=n,n))){s=0;break i}if(n=i[e+20>>2],e=i[16+((r>>>29&4)+e|0)>>2],t=n&&(0|n)!=(0|e)?n:t,r<<=1,!e)break}if(t){e=t;break i}if(c)break r}if(c=0,!(e=d&(0-(e=2<<(31&l))|e)))break n;if(!(e=i[1051356+(Oe(e&0-e)<<2)>>2]))break n}for(;c=(t=(n=(t=-8&i[e+4>>2])-o|0)>>>0<s>>>0&t>>>0>=o>>>0)?e:c,s=t?n:s,e=(t=i[e+16>>2])||i[e+20>>2];);if(!c)break n}if(s>>>0>=(e=i[262871])-o>>>0&&e>>>0>=o>>>0)break n;E(c);r:if(s>>>0>=16){if(i[c+4>>2]=3|o,i[4+(r=o+c|0)>>2]=1|s,i[s+r>>2]=s,s>>>0>=256){w(r,s);break r}n=1051092+((e=s>>>3)<<3)|0,t=i[262771],e=1<<(31&e),l=i[n+8>>2],t&e||(i[262771]=e|t,l=n),e=l,i[n+8>>2]=r,i[e+12>>2]=r,i[r+12>>2]=n,i[r+8>>2]=e}else e=o+s|0,i[c+4>>2]=3|e,i[4+(e=e+c|0)>>2]=1|i[e+4>>2];return c+8|0}r:{i:{if(!(3&(n=(r=i[262771])>>>(t=31&(e=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=a[262871])break n;if(n)break i;if(!(e=i[262772]))break n;for(t=i[1051356+(Oe(e&0-e)<<2)>>2],s=(-8&i[t+4>>2])-o|0,r=t;;){if(!(e=i[t+16>>2])&&!(e=i[t+20>>2]))break r;s=(n=(t=(-8&i[e+4>>2])-o|0)>>>0<s>>>0)?t:s,r=n?e:r,t=e}}s=(c=i[16+(e=1051084+((n=e+(1&(-1^n))|0)<<3)|0)>>2])+8|0,(0|(t=i[c+8>>2]))==(0|(e=e+8|0))?(h=1051084,g=Ee(-2,n)&r,i[h>>2]=g):(i[t+12>>2]=e,i[e+8>>2]=t),e=n<<3,i[c+4>>2]=3|e,i[4+(e=e+c|0)>>2]=1|i[e+4>>2];break t}return c=Oe(0-(e=(0-(e=2<<t)|e)&n<<t)&e),d=i[16+(e=1051084+(c<<3)|0)>>2],(0|(t=i[d+8>>2]))==(0|(e=e+8|0))?(h=1051084,g=Ee(-2,c)&r,i[h>>2]=g):(i[t+12>>2]=e,i[e+8>>2]=t),i[d+4>>2]=3|o,c=(e=c<<3)-o|0,i[4+(n=o+d|0)>>2]=1|c,i[e+d>>2]=c,(e=i[262871])&&(s=i[262873],r=1051092+((e>>>=3)<<3)|0,t=i[262771],e=1<<(31&e),l=i[r+8>>2],t&e||(i[262771]=e|t,l=r),e=l,i[r+8>>2]=s,i[e+12>>2]=s,i[s+12>>2]=r,i[s+8>>2]=e),i[262873]=n,i[262871]=c,d+8|0}return E(r),s>>>0>=16?(i[r+4>>2]=3|o,i[4+(n=o+r|0)>>2]=1|s,i[n+s>>2]=s,(e=i[262871])&&(d=i[262873],c=1051092+((e>>>=3)<<3)|0,t=i[262771],e=1<<(31&e),l=i[c+8>>2],t&e||(i[262771]=e|t,l=c),e=l,i[c+8>>2]=d,i[e+12>>2]=d,i[d+12>>2]=c,i[d+8>>2]=e),i[262873]=n,i[262871]=s):(e=o+s|0,i[r+4>>2]=3|e,i[4+(e=e+r|0)>>2]=1|i[e+4>>2]),r+8|0}n:{r:{i:{o:{if((n=i[262871])>>>0<o>>>0){if((e=i[262872])>>>0>o>>>0)break e;if(s=0,-1==(0|(e=Te((t=o+65583|0)>>>16))))break t;if(!(f=e<<16))break t;if(t=(d=-65536&t)+i[262875]|0,i[262875]=t,e=i[262876],i[262876]=e>>>0>t>>>0?e:t,!(p=i[262874]))break o;for(e=1051508;;){if((0|f)==((n=i[e>>2])+(t=i[e+4>>2])|0))break i;if(!(e=i[e+8>>2]))break}break r}return c=i[262873],(t=n-o|0)>>>0<=15?(i[262873]=0,i[262871]=0,i[c+4>>2]=3|n,o=4+(e=n+c|0)|0,s=1|i[e+4>>2]):(i[262871]=t,e=o+c|0,i[262873]=e,i[e+4>>2]=1|t,i[n+c>>2]=t,s=3|o,o=c+4|0),i[o>>2]=s,c+8|0}for((e=i[262882])>>>0<=f>>>0&&e||(i[262882]=f),i[262883]=4095,i[262877]=f,e=0,i[262880]=0,i[262878]=d;t=8+(n=e+1051084|0)|0,i[n+16>>2]=t,i[n+20>>2]=t,256!=(0|(e=e+8|0)););i[262874]=f,e=d+-40|0,i[262872]=e,i[f+4>>2]=1|e,i[4+(e+f|0)>>2]=40,i[262881]=2097152;break n}if(!(i[e+12>>2]|f>>>0<=p>>>0|n>>>0>p>>>0)){i[e+4>>2]=t+d,n=(c=i[262874])+15&-8,i[262874]=n+-8,e=8+((t=d+i[262872]|0)+(c-n|0)|0)|0,i[262872]=e,i[n+-4>>2]=1|e,i[4+(t+c|0)>>2]=40,i[262881]=2097152;break n}}e=i[262882],i[262882]=e>>>0<f>>>0?e:f,r=d+f|0,e=1051508;r:{for(;;){if((0|r)!=i[e>>2]){if(e=i[e+8>>2])continue;break r}break}if(!i[e+12>>2]){i[e>>2]=f,i[e+4>>2]=d+i[e+4>>2],i[f+4>>2]=3|o,s=o+f|0,o=(r-f|0)-o|0;i:{o:{if((0|r)!=i[262874]){if(i[262873]==(0|r))break o;if(1==(3&(c=i[r+4>>2]))&&((n=-8&c)>>>0>=256?E(r):(0|(t=i[r+12>>2]))==(0|(e=i[r+8>>2]))?(h=1051084,g=i[262771]&Ee(-2,c>>>3),i[h>>2]=g):(i[e+12>>2]=t,i[t+8>>2]=e),o=n+o|0,r=n+r|0),i[r+4>>2]=-2&i[r+4>>2],i[s+4>>2]=1|o,i[o+s>>2]=o,o>>>0>=256){w(s,o);break i}n=1051092+((e=o>>>3)<<3)|0,t=i[262771],e=1<<(31&e),r=i[n+8>>2],t&e||(i[262771]=e|t,r=n),e=r,i[n+8>>2]=s,i[e+12>>2]=s,i[s+12>>2]=n,i[s+8>>2]=e;break i}i[262874]=s,e=i[262872]+o|0,i[262872]=e,i[s+4>>2]=1|e;break i}i[262873]=s,e=i[262871]+o|0,i[262871]=e,i[s+4>>2]=1|e,i[e+s>>2]=e}return f+8|0}}for(e=1051508;!((t=i[e>>2])>>>0<=p>>>0&&(r=t+i[e+4>>2]|0)>>>0>p>>>0);)e=i[e+8>>2];for(i[262874]=f,e=d+-40|0,i[262872]=e,i[f+4>>2]=1|e,i[4+(e+f|0)>>2]=40,i[262881]=2097152,i[(l=(e=(r+-32&-8)-8|0)>>>0<p+16>>>0?p:e)+4>>2]=27,c=i[262877],n=i[262878],t=i[262880],i[(e=l+16|0)>>2]=i[262879],i[e+4>>2]=t,i[l+8>>2]=c,i[l+12>>2]=n,i[262880]=0,i[262878]=d,i[262877]=f,i[262879]=l+8,e=l+28|0;i[e>>2]=7,r>>>0>(e=e+4|0)>>>0;);(0|l)!=(0|p)&&(i[l+4>>2]=-2&i[l+4>>2],e=l-p|0,i[p+4>>2]=1|e,i[l>>2]=e,e>>>0>=256?w(p,e):(n=1051092+((e>>>=3)<<3)|0,t=i[262771],e=1<<(31&e),r=i[n+8>>2],t&e||(i[262771]=e|t,r=n),e=r,i[n+8>>2]=p,i[e+12>>2]=p,i[p+12>>2]=n,i[p+8>>2]=e))}if(!((e=i[262872])>>>0<=o>>>0))break e}return s}return t=e-o|0,i[262872]=t,e=(n=i[262874])+o|0,i[262874]=e,i[e+4>>2]=1|t,i[n+4>>2]=3|o,n+8|0}function h(e,t,n){var a,s=0,c=0,u=0,f=0,p=0,h=0,g=0;d=a=d+-64|0,i[a+36>>2]=t,s=i[n+20>>2],i[a+52>>2]=s,r[a+56|0]=3,c=i[n+16>>2],i[a+44>>2]=c+(s<<3),i[a+8>>2]=0,i[a+12>>2]=32,i[a+32>>2]=e,i[a+24>>2]=0,i[a+16>>2]=0,i[a+48>>2]=c,i[a+40>>2]=c;e:{t:{n:{r:{if(!(u=i[n+8>>2])){if(p=i[n>>2],!(u=s>>>0>(h=i[n+4>>2])>>>0?h:s))break r;if(s=1,Se[i[t+12>>2]](e,i[p>>2],i[p+4>>2]))break e;for(n=p+12|0,f=1;;){if(Se[i[c+4>>2]](i[c>>2],a+8|0))break e;if(f>>>0>=u>>>0)break r;if(e=n+-4|0,t=i[n>>2],n=n+8|0,c=c+8|0,f=f+1|0,Se[i[i[a+36>>2]+12>>2]](i[a+32>>2],i[e>>2],t))break}break e}if(p=i[n>>2],h=i[n+4>>2],g=(n=i[n+12>>2])>>>0>h>>>0?h:n){if(s=1,Se[i[t+12>>2]](e,i[p>>2],i[p+4>>2]))break e;for(n=p+12|0,c=u+16|0,f=1;;){i[a+12>>2]=i[c+-8>>2],r[a+56|0]=o[c+16|0],i[a+8>>2]=i[c+-4>>2],t=0,s=0;i:{o:switch(i[c+8>>2]-1|0){default:e=i[c+12>>2],s=1;break i;case 0:if((u=i[c+12>>2])>>>0<(s=i[a+52>>2])>>>0){if(s=0,u=i[a+48>>2]+(u<<3)|0,41!=i[u+4>>2])break i;e=i[i[u>>2]>>2],s=1;break i}x(1051e3,u,s),l();case 1:break o;case 2:break i}(0|(u=i[a+40>>2]))!=i[a+44>>2]&&(i[a+40>>2]=u+8,41==i[u+4>>2]&&(e=i[i[u>>2]>>2],s=1))}i[a+20>>2]=e,i[a+16>>2]=s;i:{o:{a:{s:{c:{u:switch(i[c>>2]-1|0){case 1:if((0|(e=i[a+40>>2]))!=i[a+44>>2])break c;break i;case 2:break i;case 0:break u;default:break a}if((e=i[c+4>>2])>>>0>=(s=i[a+52>>2])>>>0)break s;if(e=i[a+48>>2]+(e<<3)|0,41!=i[e+4>>2])break i;s=i[i[e>>2]>>2];break o}if(i[a+40>>2]=e+8,41!=i[e+4>>2])break i;s=i[i[e>>2]>>2];break o}x(1051e3,e,s),l()}s=i[c+4>>2]}t=1}if(i[a+28>>2]=s,i[a+24>>2]=t,1==i[c+-16>>2]){if((e=i[c+-12>>2])>>>0>=(t=i[a+52>>2])>>>0)break t;s=i[a+48>>2]+(e<<3)|0}else{if((0|(s=i[a+40>>2]))==i[a+44>>2])break n;i[a+40>>2]=s+8}if(Se[i[s+4>>2]](i[s>>2],a+8|0)){s=1;break e}if(f>>>0>=g>>>0)break r;if(e=n+-4|0,t=i[n>>2],n=n+8|0,c=c+36|0,s=1,f=f+1|0,Se[i[i[a+36>>2]+12>>2]](i[a+32>>2],i[e>>2],t))break}break e}}if(h>>>0>f>>>0&&(s=1,e=(f<<3)+p|0,Se[i[i[a+36>>2]+12>>2]](i[a+32>>2],i[e>>2],i[e+4>>2])))break e;s=0;break e}N(1050472),l()}x(1050984,e,t),l()}return d=a- -64|0,s}function g(e,t,n){var a=0,s=0,c=0,u=0,l=0,d=0,f=0,p=0,h=0,g=0,v=0,_=0;a=i[e+16>>2];e:{t:{n:{r:{if(1!=(0|(g=i[e+8>>2]))){if(a)break r;a=0|Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],t,n);break t}if(!a)break n}r:if(n){for(l=t+n|0,p=i[e+20>>2]+1|0,v=a=t;;){c=a+1|0;i:{o:{if((0|(s=r[0|a]))<=-1){if((0|c)!=(0|l)?(f=63&o[a+1|0],a=c=a+2|0):(f=0,a=l),d=(h=31&s)<<6|f,(_=255&s)>>>0<=223)break o;if((0|a)!=(0|l)?(d=63&o[0|a],s=c=a+1|0):(d=0,s=l),d=(f=f<<6|d)|h<<12,_>>>0<240)break o;if((0|s)!=(0|l)?(a=s+1|0,s=63&o[0|s]):(a=c,s=0),1114112!=(0|(s=s|h<<18&1835008|f<<6)))break i;break r}d=255&s}s=d,a=c}if(p=p+-1|0){if(u=(u-v|0)+a|0,v=a,(0|a)!=(0|l))continue;break r}break}1114112!=(0|s)&&(s=u,c=n,!(!u|(0|n)==(0|u))&&(a=0,r[t+u|0]<-64|u>>>0>=n>>>0)||(a=t),n=a?s:c,t=a||t)}else n=0;if(!g)break e}if(c=0,n)for(s=n,a=t;c=(128==(192&o[0|a]))+c|0,a=a+1|0,s=s+-1|0;);if(n-c>>>0>=(l=i[e+12>>2])>>>0)break e;if(u=0,c=0,n)for(s=n,a=t;c=(128==(192&o[0|a]))+c|0,a=a+1|0,s=s+-1|0;);s=l+(c-n|0)|0;n:{r:{i:switch((3==(0|(a=o[e+48|0]))?0:a)-1|0){case 1:break r;case 0:case 2:break i;default:break n}u=s,s=0;break n}u=s>>>1,s=s+1>>>1}a=u+1|0;n:{for(;;){if(!(a=a+-1|0))break n;if(Se[i[i[e+28>>2]+16>>2]](i[e+24>>2],i[e+4>>2]))break}return 1}if(c=i[e+4>>2],a=1,!Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],t,n)){for(a=s+1|0,t=i[e+28>>2],e=i[e+24>>2];;){if(!(a=a+-1|0))return 0;if(Se[i[t+16>>2]](e,c))break}return 1}}return a}return 0|Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],t,n)}function v(e){var t=0,n=0,r=0,o=0,a=0,s=0,c=0;n=(t=e+-8|0)+(e=-8&(o=i[e+-4>>2]))|0;e:{t:{n:{r:if(!(1&o)){if(!(3&o))break n;if(e=(o=i[t>>2])+e|0,(0|(t=t-o|0))==i[262873]){if(3!=(3&i[n+4>>2]))break r;return i[262871]=e,i[n+4>>2]=-2&i[n+4>>2],i[t+4>>2]=1|e,void(i[e+t>>2]=e)}o>>>0>=256?E(t):(0|(r=i[t+8>>2]))==(0|(a=i[t+12>>2]))?(s=1051084,c=i[262771]&Ee(-2,o>>>3),i[s>>2]=c):(i[r+12>>2]=a,i[a+8>>2]=r)}if(2&(o=i[n+4>>2]))i[n+4>>2]=-2&o,i[t+4>>2]=1|e,i[e+t>>2]=e;else{r:{if(i[262874]!=(0|n)){if((0|n)!=i[262873])break r;return i[262873]=t,e=i[262871]+e|0,i[262871]=e,i[t+4>>2]=1|e,void(i[e+t>>2]=e)}if(i[262874]=t,e=i[262872]+e|0,i[262872]=e,i[t+4>>2]=1|e,(0|t)==i[262873]&&(i[262871]=0,i[262873]=0),(n=i[262881])>>>0>=e>>>0)break n;if(!(e=i[262874]))break n;i:if(!((o=i[262872])>>>0<41))for(t=1051508;;){if((r=i[t>>2])+i[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break i;if(!(t=i[t+8>>2]))break}if(r=4095,e=i[262879]){for(t=0;t=t+1|0,e=i[e+8>>2];);r=t>>>0>4095?t:4095}if(i[262883]=r,o>>>0<=n>>>0)break n;return void(i[262881]=-1)}if(e=(r=-8&o)+e|0,r>>>0>=256?E(n):(0|(r=i[n+12>>2]))==(0|(n=i[n+8>>2]))?(s=1051084,c=i[262771]&Ee(-2,o>>>3),i[s>>2]=c):(i[n+12>>2]=r,i[r+8>>2]=n),i[t+4>>2]=1|e,i[e+t>>2]=e,i[262873]==(0|t)){i[262871]=e;break n}}if(e>>>0<256)break t;if(w(t,e),e=i[262883]+-1|0,i[262883]=e,!e){if(e=i[262879])break e;return void(i[262883]=4095)}}return}return e=1051092+((n=e>>>3)<<3)|0,o=i[262771],n=1<<(31&n),r=i[e+8>>2],o&n||(i[262771]=n|o,r=e),n=r,i[e+8>>2]=t,i[n+12>>2]=t,i[t+12>>2]=e,void(i[t+8>>2]=n)}for(t=0;t=t+1|0,e=i[e+8>>2];);i[262883]=t>>>0>4095?t:4095}function _(e,t,n,a,s){var c,u,l=0,d=0,f=0,p=0;if(c=(l=1&(u=i[e>>2]))?43:1114112,p=s+l|0,4&u){if(n)for(f=n,l=t;d=(128==(192&o[0|l]))+d|0,l=l+1|0,f=f+-1|0;);p=(n+p|0)-d|0}else t=0;e:{t:{if(1!=i[e+8>>2]){if(L(e,c,t,n))break t;break e}if((l=i[e+12>>2])>>>0<=p>>>0){if(L(e,c,t,n))break t;break e}n:{if(!(8&u)){d=l-p|0,l=0;r:{i:{o:switch((3==(0|(f=o[e+48|0]))?1:f)-1|0){case 1:break i;case 0:case 2:break o;default:break r}l=d,d=0;break r}l=d>>>1,d=d+1>>>1}for(l=l+1|0;;){if(!(l=l+-1|0))break n;if(Se[i[i[e+28>>2]+16>>2]](i[e+24>>2],i[e+4>>2]))break}return 1}if(r[e+48|0]=1,i[e+4>>2]=48,L(e,c,t,n))break t;d=l-p|0,l=0;r:{i:{o:switch((3==(0|(t=o[e+48|0]))?1:t)-1|0){case 1:break i;case 0:case 2:break o;default:break r}l=d,d=0;break r}l=d>>>1,d=d+1>>>1}l=l+1|0;r:{for(;;){if(!(l=l+-1|0))break r;if(Se[i[i[e+28>>2]+16>>2]](i[e+24>>2],i[e+4>>2]))break}return 1}if(t=i[e+4>>2],Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],a,s))break t;for(d=d+1|0,n=i[e+28>>2],e=i[e+24>>2];;){if(!(d=d+-1|0))return 0;if(Se[i[n+16>>2]](e,t))break}break t}if(l=i[e+4>>2],!L(e,c,t,n)&&!Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],a,s))for(d=d+1|0,t=i[e+28>>2],e=i[e+24>>2];;){if(!(d=d+-1|0))return 0;if(Se[i[t+16>>2]](e,l))break}}return 1}return 0|Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],a,s)}function y(e,t,n,r){var o,a=0,s=0,c=0,u=0,f=0,p=0;d=o=d-32|0;e:{t:{n:{r:{i:{if((r&=255)>>>0<=3)switch(r-1|0){case 2:break t;case 1:break n;case 0:break r;default:break i}Z(1049688,24,1049672),l()}c=Ee(a=i[t>>2],5),s=i[t+12>>2],r=i[t+8>>2],t=i[t+4>>2],u=Ee(c=1518500249+((c+i[n>>2]|0)+((s^r)&t^s)|0)|0,30),i[e+12>>2]=u,s=1518500249+(((s+(r^a&((t=Ee(t,30))^r))|0)+i[n+4>>2]|0)+Ee(c,5)|0)|0,f=e,p=Ee(s,30),i[f+8>>2]=p,a=1518500249+(((r+i[n+8>>2]|0)+(t^c&((r=Ee(a,30))^t))|0)+Ee(s,5)|0)|0,i[e+4>>2]=a,f=e,p=1518500249+(((t+i[n+12>>2]|0)+(r^s&(r^u))|0)+Ee(a,5)|0)|0,i[f>>2]=p;break e}s=i[4+(a=t+8|0)>>2],i[(r=o+8|0)>>2]=i[a>>2],i[r+4>>2]=s,r=i[t+4>>2],i[o>>2]=i[t>>2],i[o+4>>2]=r,i[o+28>>2]=i[n+12>>2]+1859775393,i[o+24>>2]=i[n+8>>2]+1859775393,i[o+20>>2]=i[n+4>>2]+1859775393,i[o+16>>2]=i[n>>2]+1859775393,I(e,o,o+16|0);break e}c=Ee(a=i[t>>2],5),s=i[t+12>>2],r=i[t+8>>2],t=i[t+4>>2],u=Ee(c=((c+i[n>>2]|0)+((s^r)&t^r&s)|0)-1894007588|0,30),i[e+12>>2]=u,s=(((s+(a&((t=Ee(t,30))^r)^t&r)|0)+i[n+4>>2]|0)+Ee(c,5)|0)-1894007588|0,f=e,p=Ee(s,30),i[f+8>>2]=p,a=(((r+i[n+8>>2]|0)+(c&((r=Ee(a,30))^t)^t&r)|0)+Ee(s,5)|0)-1894007588|0,i[e+4>>2]=a,f=e,p=(((t+i[n+12>>2]|0)+(s&(r^u)^r&u)|0)+Ee(a,5)|0)-1894007588|0,i[f>>2]=p;break e}s=i[4+(a=t+8|0)>>2],i[(r=o+8|0)>>2]=i[a>>2],i[r+4>>2]=s,r=i[t+4>>2],i[o>>2]=i[t>>2],i[o+4>>2]=r,i[o+28>>2]=i[n+12>>2]+-899497514,i[o+24>>2]=i[n+8>>2]+-899497514,i[o+20>>2]=i[n+4>>2]+-899497514,i[o+16>>2]=i[n>>2]+-899497514,I(e,o,o+16|0)}d=o+32|0}function m(e,t){var n=0,r=0,o=0,a=0,s=0,c=0;n=e+t|0;e:{t:{n:if(!(1&(r=i[e+4>>2]))){if(!(3&r))break t;if(t=(r=i[e>>2])+t|0,(0|(e=e-r|0))==i[262873]){if(3!=(3&i[n+4>>2]))break n;return i[262871]=t,i[n+4>>2]=-2&i[n+4>>2],i[e+4>>2]=1|t,void(i[n>>2]=t)}r>>>0>=256?E(e):(0|(o=i[e+8>>2]))==(0|(a=i[e+12>>2]))?(s=1051084,c=i[262771]&Ee(-2,r>>>3),i[s>>2]=c):(i[o+12>>2]=a,i[a+8>>2]=o)}if(2&(r=i[n+4>>2])){i[n+4>>2]=-2&r,i[e+4>>2]=1|t,i[e+t>>2]=t;break e}n:{if(i[262874]!=(0|n)){if((0|n)!=i[262873])break n;return i[262873]=e,t=i[262871]+t|0,i[262871]=t,i[e+4>>2]=1|t,void(i[e+t>>2]=t)}if(i[262874]=e,t=i[262872]+t|0,i[262872]=t,i[e+4>>2]=1|t,i[262873]!=(0|e))break t;return i[262871]=0,void(i[262873]=0)}if(t=(o=-8&r)+t|0,o>>>0>=256?E(n):(0|(o=i[n+12>>2]))==(0|(n=i[n+8>>2]))?(s=1051084,c=i[262771]&Ee(-2,r>>>3),i[s>>2]=c):(i[n+12>>2]=o,i[o+8>>2]=n),i[e+4>>2]=1|t,i[e+t>>2]=t,i[262873]!=(0|e))break e;i[262871]=t}return}t>>>0>=256?w(e,t):(t=1051092+((n=t>>>3)<<3)|0,r=i[262771],n=1<<(31&n),o=i[t+8>>2],r&n||(i[262771]=n|r,o=t),n=o,i[t+8>>2]=e,i[n+12>>2]=e,i[e+12>>2]=t,i[e+8>>2]=n)}function b(e,t){var n=0,r=0,o=0,a=0,s=0;return-65587-(e=e>>>0>16?e:16)>>>0<=t>>>0||(n=p(12+((o=t>>>0<11?16:t+11&-8)+e|0)|0))&&(t=n+-8|0,(r=e+-1|0)&n?(r=(-8&(s=i[(a=n+-4|0)>>2]))-(n=(e=(n=(n+r&0-e)-8|0)-t>>>0>16?n:e+n|0)-t|0)|0,3&s?(i[e+4>>2]=r|1&i[e+4>>2]|2,i[4+(r=e+r|0)>>2]=1|i[r+4>>2],i[a>>2]=n|1&i[a>>2]|2,i[e+4>>2]=1|i[e+4>>2],m(t,n)):(t=i[t>>2],i[e+4>>2]=r,i[e>>2]=t+n)):e=t,3&(t=i[e+4>>2])&&((n=-8&t)>>>0<=o+16>>>0||(i[e+4>>2]=o|1&t|2,t=e+o|0,o=n-o|0,i[t+4>>2]=3|o,i[4+(n=e+n|0)>>2]=1|i[n+4>>2],m(t,o))),r=e+8|0),r}function w(e,t){var n=0,r=0,o=0,a=0;i[e+16>>2]=0,i[e+20>>2]=0,a=e,r=0,(n=t>>>8)&&(r=31,t>>>0>16777215||(r=62+((t>>>(6-(n=u(n))&31)&1)-(n<<1)|0)|0)),o=r,i[a+28>>2]=o,a=1051356+(o<<2)|0;e:{t:{n:{r:{if((r=1<<(31&o))&(n=i[262772])){if(n=i[a>>2],(-8&i[n+4>>2])!=(0|t))break r;r=n;break n}i[262772]=n|r,i[a>>2]=e,i[e+24>>2]=a;break e}for(o=t<<(31==(0|o)?0:25-(o>>>1)&31);;){if(!(r=i[(a=16+((o>>>29&4)+n|0)|0)>>2]))break t;if(o<<=1,(-8&i[(n=r)+4>>2])==(0|t))break}}return t=i[r+8>>2],i[t+12>>2]=e,i[r+8>>2]=e,i[e+24>>2]=0,i[e+12>>2]=r,void(i[e+8>>2]=t)}i[a>>2]=e,i[e+24>>2]=n}i[e+12>>2]=e,i[e+8>>2]=e}function O(e,t,n){var a,s=0,c=0;d=a=d-80|0,o[e+96|0]||(i[a+76>>2]=e+8,function(e,t){var n;if(d=n=d-16|0,F(n+8|0,e,1),i[n+12>>2])return r[i[n+8>>2]]=128,64-i[e>>2]>>>0<8&&(R(e,64),M(n,e),T(i[t>>2],i[n>>2],i[n+4>>2])),R(e,56),void(d=n+16|0);x(1049536,0,0),l()}(s=e+28|0,a+76|0),F(a- -64|0,s,4),B(i[a+64>>2],i[a+68>>2],i[e+4>>2]),F(a+56|0,s,4),B(i[a+56>>2],i[a+60>>2],i[e>>2]),c=i[a+76>>2],M(a+48|0,s),T(c,i[a+48>>2],i[a+52>>2]),r[e+96|0]=1),V(a+40|0,t,n,0,4),B(i[a+40>>2],i[a+44>>2],i[e+8>>2]),V(a+32|0,t,n,4,8),B(i[a+32>>2],i[a+36>>2],i[e+12>>2]),V(a+24|0,t,n,8,12),B(i[a+24>>2],i[a+28>>2],i[e+16>>2]),V(a+16|0,t,n,12,16),B(i[a+16>>2],i[a+20>>2],i[e+20>>2]),V(a+8|0,t,n,16,20),B(i[a+8>>2],i[a+12>>2],i[e+24>>2]),d=a+80|0}function E(e){var t,n=0,r=0,o=0,a=0,s=0,c=0;t=i[e+24>>2];e:{t:{if((0|e)==(0|(n=i[e+12>>2]))){if(o=i[(n=e+20|0)>>2],r=i[(o?20:16)+e>>2])break t;n=0;break e}r=i[e+8>>2],i[r+12>>2]=n,i[n+8>>2]=r;break e}for(o=o?n:e+16|0;a=o,(r=i[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=i[n+16>>2]),r;);i[a>>2]=0}e:if(t){r=1051356+(i[e+28>>2]<<2)|0;t:{if((0|e)==i[r>>2]){if(i[r>>2]=n,n)break t;return s=1051088,c=i[262772]&Ee(-2,i[e+28>>2]),void(i[s>>2]=c)}if(i[(i[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}i[n+24>>2]=t,(r=i[e+16>>2])&&(i[n+16>>2]=r,i[r+24>>2]=n),(e=i[e+20>>2])&&(i[n+20>>2]=e,i[e+24>>2]=n)}}function S(e,t,n,r){var o,a,s=0,c=0,u=0;d=o=d+-64|0,c=1,s=i[r+12>>2],u=i[r+8>>2],a=i[r+4>>2],r=i[r>>2];e:{t:{if(1==i[262884]){if(c=i[262885]+1|0,i[262885]=c,c>>>0>2)break t}else i[262884]=1,i[262885]=1;if(ee(o+48|0,r,a,u,s),s=i[4+(r=o+56|0)>>2],i[(u=o+36|0)>>2]=i[r>>2],i[u+4>>2]=s,i[o+24>>2]=n,i[o+20>>2]=1049892,i[o+16>>2]=1,n=i[o+52>>2],i[o+28>>2]=i[o+48>>2],i[o+32>>2]=n,!((0|(n=i[262768]))<=-1)&&(n=n+1|0,i[262768]=n,(r=i[262770])&&(n=i[262769],Se[i[t+16>>2]](o+8|0,e),s=i[o+12>>2],i[o+16>>2]=i[o+8>>2],i[o+20>>2]=s,Se[i[r+12>>2]](n,o+16|0),n=i[262768]),i[262768]=n+-1,c>>>0<=1))break e}l()}d=n=d-16|0,i[n+12>>2]=t,i[n+8>>2]=e,l()}function T(e,t,n){var r;if(d=r=d-96|0,i[r+4>>2]=n,64==(0|n))return $(r+32|0,64),function(e,t){var n=0,r=0;for(r=16;r;)n=o[0|t]|o[t+1|0]<<8|o[t+2|0]<<16|o[t+3|0]<<24,i[e>>2]=n<<24|n<<8&16711680|n>>>8&65280|n>>>24,r=r+-1|0,t=t+4|0,e=e+4|0}(r+32|0,t),function(e,t){var n,r=0,o=0,a=0,s=0,c=0,u=0,l=0,f=0,p=0,h=0,g=0,v=0,_=0,m=0,b=0,w=0,O=0,E=0,S=0,T=0,I=0,A=0,C=0,k=0,x=0;d=n=d+-64|0,p=i[t>>2],c=i[t+4>>2],u=i[t+8>>2],l=i[t+12>>2],_=i[e>>2],h=i[e+8>>2],f=i[e+4>>2],i[n+44>>2]=i[e+12>>2],i[n+36>>2]=f,i[n+40>>2]=h,i[n+32>>2]=_,i[n+60>>2]=l,i[n+56>>2]=u,i[n+52>>2]=c,i[n+48>>2]=p+i[e+16>>2],y(n,n+32|0,n+48|0,0),m=i[t+16>>2],g=i[t+20>>2],S=i[t+24>>2],b=i[t+28>>2],a=i[4+(f=n+8|0)>>2],i[(o=h=n+40|0)>>2]=i[f>>2],i[o+4>>2]=a,o=i[n+4>>2],i[n+32>>2]=i[n>>2],i[n+36>>2]=o,i[n+60>>2]=b,i[n+56>>2]=S,i[n+52>>2]=g,k=n,x=Ee(_,30)+m|0,i[k+48>>2]=x,y(n+16|0,n+32|0,n+48|0,0),s=i[n+16>>2],_=i[n+20>>2],o=i[n+24>>2],a=i[t+32>>2],w=i[t+36>>2],O=i[t+40>>2],E=i[t+44>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=_,i[n+40>>2]=o,i[n+32>>2]=s,i[n+60>>2]=E,i[n+56>>2]=O,i[n+52>>2]=w,k=n,x=Ee(i[n>>2],30)+a|0,i[k+48>>2]=x,y(n+16|0,n+32|0,n+48|0,0),v=i[4+(o=_=n+24|0)>>2],T=i[o>>2],i[f>>2]=T,i[f+4>>2]=v,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,A=i[t+48>>2],o=i[t+52>>2],C=i[t+56>>2],t=i[t+60>>2],i[h>>2]=T,i[h+4>>2]=v,i[n+32>>2]=I,i[n+36>>2]=r,i[n+60>>2]=t,i[n+56>>2]=C,i[n+52>>2]=o,k=n,x=Ee(s,30)+A|0,i[k+48>>2]=x,y(n+16|0,n+32|0,n+48|0,0),v=i[n+16>>2],s=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=s,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),p=Ee(o^a^p^u,1),i[n+48>>2]=r+p,s=Ee(p^E^l^g,1),i[n+60>>2]=s,u=Ee(t^O^u^m,1),i[n+56>>2]=u,l=Ee(C^w^c^l,1),i[n+52>>2]=l,y(n+16|0,n+32|0,n+48|0,0),c=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=c,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=c,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),m=Ee(l^A^m^S,1),i[n+48>>2]=r+m,S=Ee(s^C^a^S,1),i[n+56>>2]=S,c=Ee(m^t^b^w,1),i[n+60>>2]=c,g=Ee(u^o^g^b,1),i[n+52>>2]=g,y(n+16|0,n+32|0,n+48|0,1),v=i[n+16>>2],b=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=b,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),a=Ee(g^p^a^O,1),i[n+48>>2]=r+a,O=Ee(c^u^O^A,1),i[n+56>>2]=O,b=Ee(a^s^o^E,1),i[n+60>>2]=b,w=Ee(S^l^E^w,1),i[n+52>>2]=w,y(n+16|0,n+32|0,n+48|0,1),E=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=E,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=E,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),E=Ee(w^m^C^A,1),i[n+48>>2]=r+E,C=Ee(b^S^p^C,1),i[n+56>>2]=C,A=Ee(E^c^t^l,1),i[n+60>>2]=A,t=Ee(O^g^t^o,1),i[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,1),v=i[n+16>>2],o=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=o,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),o=Ee(t^a^p^u,1),i[n+48>>2]=r+o,p=Ee(o^b^s^g,1),i[n+60>>2]=p,u=Ee(A^O^u^m,1),i[n+56>>2]=u,s=Ee(C^w^s^l,1),i[n+52>>2]=s,y(n+16|0,n+32|0,n+48|0,1),l=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=l,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=l,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),l=Ee(s^E^m^S,1),i[n+48>>2]=r+l,m=Ee(p^C^a^S,1),i[n+56>>2]=m,S=Ee(l^A^c^w,1),i[n+60>>2]=S,c=Ee(u^t^c^g,1),i[n+52>>2]=c,y(n+16|0,n+32|0,n+48|0,1),v=i[n+16>>2],g=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=g,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),a=Ee(c^o^a^O,1),i[n+48>>2]=r+a,O=Ee(S^u^E^O,1),i[n+56>>2]=O,g=Ee(a^p^t^b,1),i[n+60>>2]=g,w=Ee(m^s^b^w,1),i[n+52>>2]=w,y(n+16|0,n+32|0,n+48|0,2),b=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=b,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=b,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),E=Ee(w^l^C^E,1),i[n+48>>2]=r+E,C=Ee(g^m^o^C,1),i[n+56>>2]=C,b=Ee(E^S^s^A,1),i[n+60>>2]=b,t=Ee(O^c^t^A,1),i[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,2),v=i[n+16>>2],A=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=A,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),o=Ee(t^a^o^u,1),i[n+48>>2]=r+o,A=Ee(o^g^c^p,1),i[n+60>>2]=A,u=Ee(b^O^l^u,1),i[n+56>>2]=u,p=Ee(C^w^s^p,1),i[n+52>>2]=p,y(n+16|0,n+32|0,n+48|0,2),s=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=s,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=s,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),s=Ee(p^E^l^m,1),i[n+48>>2]=r+s,l=Ee(A^C^a^m,1),i[n+56>>2]=l,m=Ee(s^b^S^w,1),i[n+60>>2]=m,S=Ee(u^t^c^S,1),i[n+52>>2]=S,y(n+16|0,n+32|0,n+48|0,2),v=i[n+16>>2],c=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=c,i[n+40>>2]=r,i[n+32>>2]=v,r=Ee(i[n>>2],30),a=Ee(S^o^a^O,1),i[n+48>>2]=r+a,O=Ee(m^u^E^O,1),i[n+56>>2]=O,c=Ee(a^A^t^g,1),i[n+60>>2]=c,w=Ee(l^p^g^w,1),i[n+52>>2]=w,y(n+16|0,n+32|0,n+48|0,2),g=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=g,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=g,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(v,30),E=Ee(w^s^C^E,1),i[n+48>>2]=r+E,C=Ee(c^l^o^C,1),i[n+56>>2]=C,g=Ee(E^m^p^b,1),i[n+60>>2]=g,t=Ee(O^S^t^b,1),i[n+52>>2]=t,y(n+16|0,n+32|0,n+48|0,3),b=i[n+16>>2],v=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=v,i[n+40>>2]=r,i[n+32>>2]=b,r=Ee(i[n>>2],30),o=Ee(t^a^o^u,1),i[n+48>>2]=r+o,v=Ee(o^c^S^A,1),i[n+60>>2]=v,u=Ee(g^O^s^u,1),i[n+56>>2]=u,A=Ee(C^w^p^A,1),i[n+52>>2]=A,y(n+16|0,n+32|0,n+48|0,3),p=i[_+4>>2],T=i[_>>2],i[f>>2]=T,i[f+4>>2]=p,r=i[n+20>>2],I=i[n+16>>2],i[n>>2]=I,i[n+4>>2]=r,i[h>>2]=T,i[h+4>>2]=p,i[n+32>>2]=I,i[n+36>>2]=r,r=Ee(b,30),p=Ee(A^E^s^l,1),i[n+48>>2]=r+p,s=Ee(v^C^a^l,1),i[n+56>>2]=s,l=Ee(p^g^m^w,1),i[n+60>>2]=l,m=Ee(u^t^m^S,1),i[n+52>>2]=m,y(n+16|0,n+32|0,n+48|0,3),S=i[n+16>>2],b=i[n+20>>2],r=i[n+24>>2],i[n+44>>2]=i[n+28>>2],i[n+36>>2]=b,i[n+40>>2]=r,i[n+32>>2]=S,r=Ee(i[n>>2],30),a=Ee(m^o^a^O,1),i[n+48>>2]=r+a,O=Ee(l^u^E^O,1),i[n+56>>2]=O,u=Ee(a^v^t^c,1),i[n+60>>2]=u,w=Ee(s^A^c^w,1),i[n+52>>2]=w,y(n+16|0,n+32|0,n+48|0,3),a=i[_+4>>2],_=i[_>>2],i[f>>2]=_,i[f+4>>2]=a,f=i[n+20>>2],c=i[n+16>>2],i[n>>2]=c,i[n+4>>2]=f,i[h>>2]=_,i[h+4>>2]=a,i[n+32>>2]=c,i[n+36>>2]=f,h=Ee(w^p^C^E,1),k=n,x=Ee(h^l^g^A,1),i[k+60>>2]=x,k=n,x=Ee(u^s^o^C,1),i[k+56>>2]=x,k=n,x=Ee(O^m^t^g,1),i[k+52>>2]=x,k=n,x=Ee(S,30)+h|0,i[k+48>>2]=x,y(n+16|0,n+32|0,n+48|0,3),t=i[n+28>>2],h=i[n+24>>2],f=i[n+20>>2],i[e>>2]=i[e>>2]+i[n+16>>2],i[e+4>>2]=f+i[e+4>>2],i[e+8>>2]=h+i[e+8>>2],i[e+12>>2]=t+i[e+12>>2],k=e,x=i[e+16>>2]+Ee(i[n>>2],30)|0,i[k+16>>2]=x,d=n- -64|0}(e,r+32|0),void(d=r+96|0);i[r+20>>2]=1,i[r+52>>2]=2,i[r+36>>2]=3,i[r+40>>2]=0,i[r+32>>2]=1049776,i[r+12>>2]=1,i[r+24>>2]=r+4,i[r+28>>2]=1049712,i[r+48>>2]=r+8,i[r+16>>2]=r+28,i[r+8>>2]=r+24,function(e){var t,n,r,o;d=t=d-48|0,ee(t+32|0,i[262450],i[262451],i[262452],i[262453]),o=i[4+(n=t+40|0)>>2],i[(r=t+20|0)>>2]=i[n>>2],i[r+4>>2]=o,i[t+8>>2]=e,i[t+4>>2]=1049892,i[t>>2]=1,e=i[t+36>>2],i[t+12>>2]=i[t+32>>2],i[t+16>>2]=e,k(t),l()}(r+32|0),l()}function I(e,t,n){var r,o,a=0,s=0,c=0,u=0,l=0;r=(((s=i[t+12>>2])^(a=i[t+8>>2])^(c=i[t+4>>2]))+Ee(t=i[t>>2],5)|0)+i[n>>2]|0,o=Ee(r,30),i[e+12>>2]=o,s=((s+(a^(c=Ee(c,30))^t)|0)+i[n+4>>2]|0)+Ee(r,5)|0,u=e,l=Ee(s,30),i[u+8>>2]=l,a=((a=a+i[n+8>>2]|0)+((t=Ee(t,30))^c^r)|0)+Ee(s,5)|0,i[e+4>>2]=a,u=e,l=((c+i[n+12>>2]|0)+(s^t^o)|0)+Ee(a,5)|0,i[u>>2]=l}function A(e,t){var n=0,r=0;e:{t:{if((n=i[e+4>>2])-(r=i[e+8>>2])>>>0<t>>>0){if((t=t+r|0)>>>0<r>>>0)break e;if((0|(t=(r=n<<1)>>>0>t>>>0?r:t))<0)break e;if(!(n=n?ie(i[e>>2],n,1,t):ce(t,1)))break t;i[e+4>>2]=t,i[e>>2]=n}return}pe(t,1),l()}ge(),l()}function C(e,t,n,r){var o;d=o=d+-64|0,i[o+12>>2]=t,i[o+8>>2]=e,i[o+20>>2]=r,i[o+16>>2]=n,i[o+44>>2]=2,i[o+60>>2]=43,i[o+28>>2]=2,i[o+32>>2]=0,i[o+24>>2]=1050524,i[o+52>>2]=42,i[o+40>>2]=o+48,i[o+56>>2]=o+16,i[o+48>>2]=o+8,G(o+24|0,1050564),l()}function k(e){var t,n,r,o,a=0,s=0;d=t=d-48|0,n=ae(e+12|0),r=ae(i[e+8>>2]),s=i[n+4>>2],i[(a=t+8|0)>>2]=i[n>>2],i[a+4>>2]=s,s=i[t+12>>2],a=i[t+8>>2],o=i[n+8>>2],i[t+28>>2]=i[n+12>>2],i[t+24>>2]=o,i[t+16>>2]=a,i[t+20>>2]=s,i[t+36>>2]=0,i[t+32>>2]=r,S(t+32|0,1050008,i[e+8>>2],t+16|0),l()}function x(e,t,n){var r;d=r=d-48|0,i[r+4>>2]=n,i[r>>2]=t,i[r+28>>2]=2,i[r+44>>2]=40,i[r+12>>2]=2,i[r+16>>2]=0,i[r+8>>2]=1050392,i[r+36>>2]=40,i[r+24>>2]=r+32,i[r+40>>2]=r,i[r+32>>2]=r+4,G(r+8|0,e),l()}function P(e,t){var n;d=n=d-48|0,i[n+4>>2]=t,i[n>>2]=e,i[n+28>>2]=2,i[n+44>>2]=40,i[n+12>>2]=2,i[n+16>>2]=0,i[n+8>>2]=1050644,i[n+36>>2]=40,i[n+24>>2]=n+32,i[n+40>>2]=n+4,i[n+32>>2]=n,G(n+8|0,1050660),l()}function D(e,t){var n;d=n=d-48|0,i[n+4>>2]=t,i[n>>2]=e,i[n+28>>2]=2,i[n+44>>2]=40,i[n+12>>2]=2,i[n+16>>2]=0,i[n+8>>2]=1050712,i[n+36>>2]=40,i[n+24>>2]=n+32,i[n+40>>2]=n+4,i[n+32>>2]=n,G(n+8|0,1050728),l()}function R(e,t){var n,r;if(d=n=d-16|0,(r=i[e>>2])>>>0<=t>>>0)return V(n+8|0,e+4|0,64,r,t),$(i[n+8>>2],i[n+12>>2]),i[e>>2]=t,void(d=n+16|0);Z(1049568,40,1049552),l()}function j(e){var t;for(d=t=d-32|0,i[t+24>>2]=e;U(t+16|0,t+24|0),1&r[t+16|0];);ue(t+8|0,i[e>>2],i[e+4>>2]),e=i[t+12>>2],i[t+24>>2]=i[t+8>>2],i[t+28>>2]=e,te(t+24|0),d=t+32|0}function N(e){var t,n,r,o,a,s;d=t=d-48|0,n=i[e+8>>2],r=i[e+12>>2],o=i[e+16>>2],a=i[e+20>>2],s=i[e>>2],e=i[e+4>>2],i[t+16>>2]=4,i[t+20>>2]=0,i[t+4>>2]=1,i[t+8>>2]=0,i[t+24>>2]=s,i[t+28>>2]=e,i[t>>2]=t+24,i[t+40>>2]=o,i[t+44>>2]=a,i[t+32>>2]=n,i[t+36>>2]=r,G(t,t+32|0),l()}function M(e,t){var n;if(d=n=d-16|0,64==i[t>>2])return i[t>>2]=0,J(n+8|0,t+4|0,64,64),t=i[n+12>>2],i[e>>2]=i[n+8>>2],i[e+4>>2]=t,void(d=n+16|0);Z(1049608,39,1049552),l()}function L(e,t,n,r){var o=0;if(1114112==(0|t)||(o=1,!Se[i[i[e+28>>2]+16>>2]](i[e+24>>2],t))){if(!n)return 0;o=0|Se[i[i[e+28>>2]+12>>2]](i[e+24>>2],n,r)}return o}function B(e,t,n){if(4==(0|t))return t=n<<8&16711680|n<<24|n>>>8&65280|n>>>24,r[0|e]=t,r[e+1|0]=t>>>8,r[e+2|0]=t>>>16,void(r[e+3|0]=t>>>24);Z(1049304,32,1049288),l()}function F(e,t,n){var r,o=0;d=r=d-16|0,o=(o=n)+(n=i[t>>2])|0,i[t>>2]=o,V(r+8|0,t+4|0,64,n,o),t=i[r+12>>2],i[e>>2]=i[r+8>>2],i[e+4>>2]=t,d=r+16|0}function U(e,t){var n=0,a=0;t=i[t>>2],a=0,(0|(n=i[t+8>>2]))!=i[t+12>>2]&&(i[t+8>>2]=n+1,t=o[0|n],a=1),n=a,r[e+1|0]=t,r[0|e]=n}function W(e,t,n){var o;d=o=d-16|0,i[o+8>>2]=0,i[o>>2]=1,i[o+4>>2]=0,de(o,n-t>>>2),function(e,t,n){var o,a=0,s=0,c=0;for(d=o=d-16|0;(0|e)!=(0|t);)a=e+4|0,(e=i[e>>2])>>>0>=128?(i[o+12>>2]=0,s=n,c=o+12|0,e>>>0<=2047?(r[o+13|0]=63&e|128,r[o+12|0]=e>>>6&31|192,e=2):e>>>0<=65535?(r[o+14|0]=63&e|128,r[o+13|0]=e>>>6&63|128,r[o+12|0]=e>>>12&15|224,e=3):(r[o+15|0]=63&e|128,r[o+12|0]=e>>>18|240,r[o+14|0]=e>>>6&63|128,r[o+13|0]=e>>>12&63|128,e=4),se(s,c,e),e=a):(i[n+8>>2]==i[n+4>>2]&&de(n,1),r[i[n>>2]+i[n+8>>2]|0]=e,i[n+8>>2]=i[n+8>>2]+1,e=a);d=o+16|0}(t,n,o),i[e+8>>2]=i[o+8>>2],t=i[o+4>>2],i[e>>2]=i[o>>2],i[e+4>>2]=t,d=o+16|0}function V(e,t,n,r,o){e:{if(o>>>0>=r>>>0){if(n>>>0<o>>>0)break e;return i[e+4>>2]=o-r,void(i[e>>2]=t+r)}D(r,o),l()}P(o,n),l()}function G(e,t){var n,r,o,a,s;d=n=d-32|0,o=i[t>>2],a=i[t+4>>2],s=i[t+12>>2],i[(r=n+20|0)>>2]=i[t+8>>2],i[r+4>>2]=s,i[n+12>>2]=o,i[n+16>>2]=a,i[n+8>>2]=e,i[n+4>>2]=1050324,i[n>>2]=1,k(n),l()}function H(e){var t,n;e|=0,d=t=d-16|0,function(e){var t,n=0;d=t=d-32|0,i[4+(n=t+8|0)>>2]=0,i[n>>2]=1,i[t+24>>2]=0,n=i[t+12>>2],i[t+16>>2]=i[t+8>>2],i[t+20>>2]=n,se(t+16|0,1049136,0),i[e+8>>2]=i[t+24>>2],n=i[t+20>>2],i[e>>2]=i[t+16>>2],i[e+4>>2]=n,d=t+32|0}(t),i[e>>2]=0,n=i[t+4>>2],i[e+4>>2]=i[t>>2],i[e+8>>2]=n,i[e+12>>2]=i[t+8>>2],d=t+16|0}function z(e,t,n,r,o){e:{if(n>>>0>=t>>>0){if(o>>>0>=n>>>0)break e;P(n,o),l()}D(t,n),l()}i[e+4>>2]=n-t,i[e>>2]=t+r}function Y(e,t,n){var r;d=r=d-32|0,re(r+16|0,t,n,n),K(r+8|0,r+16|0),t=i[r+12>>2],i[e>>2]=i[r+8>>2],i[e+4>>2]=t,d=r+32|0}function q(e,t,n){var i=0;if(n)for(i=e;r[0|i]=o[0|t],i=i+1|0,t=t+1|0,n=n+-1|0;);return e}function K(e,t){var n,r;d=n=d-16|0,(0|(r=i[t+8>>2]))!=i[t+4>>2]&&function(e,t){var n=0;e:{t:{n:{if((n=i[e+4>>2])>>>0>=t>>>0){if(t){if((0|t)==(0|n))break e;if(n=ie(i[e>>2],n,1,t))break n;pe(t,1),l()}te(e),i[e>>2]=1,t=0;break t}N(1048636),l()}i[e>>2]=n}i[e+4>>2]=t}}(t,r),function(e,t,n){var r;d=r=d-16|0,i[r+12>>2]=n,i[r+8>>2]=t,i[e>>2]=i[r+8>>2],i[e+4>>2]=i[r+12>>2],d=r+16|0}(n+8|0,i[t>>2],i[t+4>>2]),t=i[n+12>>2],i[e>>2]=i[n+8>>2],i[e+4>>2]=t,d=n+16|0}function J(e,t,n,r){var o;d=o=d-16|0,z(o+8|0,0,r,t,n),t=i[o+12>>2],i[e>>2]=i[o+8>>2],i[e+4>>2]=t,d=o+16|0}function X(e,t,n){var r;return t|=0,n|=0,A(e=i[(e|=0)>>2],n),r=i[e+8>>2],i[e+8>>2]=r+n,q(i[e>>2]+r|0,t,n),0}function $(e,t){if(t)for(;r[0|e]=0,e=e+1|0,t=t+-1|0;);}function Z(e,t,n){var r;d=r=d-16|0,i[r+12>>2]=t,i[r+8>>2]=e,S(r+8|0,1049204,0,n),l()}function Q(e,t,n,r){r>>>0>=t>>>0?q(n,e,t):(Z(1049416,40,1049400),l())}function ee(e,t,n,r,o){i[e+12>>2]=o,i[e+8>>2]=r,i[e+4>>2]=n,i[e>>2]=t}function te(e){i[e+4>>2]&&v(i[e>>2])}function ne(e){i[4+(e|=0)>>2]=0,i[e+8>>2]=0,i[e>>2]=4,i[(e=e+12|0)>>2]=0,i[e+4>>2]=0}function re(e,t,n,r){i[e+8>>2]=n,i[e+4>>2]=r,i[e>>2]=t}function ie(e,t,n,r){return function(e,t,n,r){e:{if(8<n>>>0){if(n=8<n>>>0?b(n,r):p(r))break e;return 0}return function(e,t){var n=0,r=0,o=0,a=0,s=0,c=0,u=0,l=0,d=0,f=0;t:if(!(t>>>0>4294901708)){n=t>>>0<11?16:t+11&-8,r=-8&(c=i[(s=e+-4|0)>>2]);n:{r:{i:{o:{a:{s:{if(3&c){if(a=r+(u=e+-8|0)|0,r>>>0>=n>>>0)break s;if((0|a)==i[262874])break a;if((0|a)==i[262873])break o;if(2&(c=i[a+4>>2]))break n;if((r=r+(l=-8&c)|0)>>>0>=n>>>0)break i;break n}if(n>>>0<256|r>>>0<(4|n)>>>0|r-n>>>0>=131073)break n;break r}if((t=r-n|0)>>>0<16)break r;i[s>>2]=n|1&c|2,i[4+(o=n+u|0)>>2]=3|t,i[a+4>>2]=1|i[a+4>>2],m(o,t);break r}if((r=r+i[262872]|0)>>>0<=n>>>0)break n;i[s>>2]=n|1&c|2,o=r-n|0,i[4+(t=n+u|0)>>2]=1|o,i[262872]=o,i[262874]=t;break r}if((r=r+i[262871]|0)>>>0<n>>>0)break n;(t=r-n|0)>>>0<=15?(i[s>>2]=r|1&c|2,i[4+(t=r+u|0)>>2]=1|i[t+4>>2],t=0):(i[s>>2]=n|1&c|2,i[4+(o=n+u|0)>>2]=1|t,i[(n=r+u|0)>>2]=t,i[n+4>>2]=-2&i[n+4>>2]),i[262873]=o,i[262871]=t;break r}t=r-n|0,l>>>0>=256?E(a):(0|(o=i[a+12>>2]))==(0|(a=i[a+8>>2]))?(d=1051084,f=i[262771]&Ee(-2,c>>>3),i[d>>2]=f):(i[a+12>>2]=o,i[o+8>>2]=a),t>>>0>=16?(i[s>>2]=n|1&i[s>>2]|2,i[4+(o=n+u|0)>>2]=3|t,i[4+(n=r+u|0)>>2]=1|i[n+4>>2],m(o,t)):(i[s>>2]=r|1&i[s>>2]|2,i[4+(t=r+u|0)>>2]=1|i[t+4>>2])}o=e;break t}if(n=p(t))return t=q(n,e,(o=(-8&(o=i[s>>2]))-(3&o?4:8)|0)>>>0>t>>>0?t:o),v(e),t}return o}(e,r)}return t=q(n,e,t>>>0>r>>>0?r:t),v(e),t}(e,t,n,r)}function oe(e,t){i[e+4>>2]=i[t+8>>2],i[e>>2]=i[t>>2]}function ae(e){return e||(N(1049972),l()),e}function se(e,t,n){!function(e,t,n){var r,o;d=r=d-16|0,de(e,n=n-t|0),o=i[e+8>>2],i[e+8>>2]=n+o,oe(r+8|0,e),function(e,t,n,r){var o;if(d=o=d-112|0,i[o+24>>2]=t,i[o+28>>2]=r,(0|t)==(0|r))return q(e,n,t),void(d=o+112|0);i[o+80>>2]=o+24,i[o+84>>2]=o+28,i[o+104>>2]=4,i[o+108>>2]=0,i[o+92>>2]=1,i[o+96>>2]=0,i[o+88>>2]=1048948,ue(o+16|0,o+80|0,1),e=i[o+20>>2],t=i[o+16>>2],ue(o+8|0,o+84|0,1),i[o+76>>2]=2,i[o+52>>2]=3,i[o+56>>2]=t,i[o+60>>2]=e,i[o+36>>2]=3,i[o+40>>2]=0,i[o+32>>2]=1048872,e=i[o+12>>2],i[o+64>>2]=i[o+8>>2],i[o+68>>2]=e,i[o+72>>2]=o+88,i[o+48>>2]=o+56,G(o+32|0,1048956),l()}(i[r+8>>2]+o|0,i[r+12>>2]-o|0,t,n),d=r+16|0}(e,t,t+n|0)}function ce(e,t){return 8<t>>>0?b(t,e):p(e)}function ue(e,t,n){i[e+4>>2]=n,i[e>>2]=t}function le(e,t,n){T(i[i[e>>2]>>2],t,n)}function de(e,t){!function(e,t,n){var r;d=r=d-16|0,function(e,t,n,r){var o,a=0;d=o=d-48|0,i[t+4>>2]-n>>>0>=r>>>0||(function(e,t,n,r){var o,a;d=o=d-16|0,a=e,(r=n+r|0)>>>0<n>>>0?(ue(o+8|0,r,0),n=i[o+8>>2],i[e+8>>2]=i[o+12>>2],t=1):(n=(t=i[t+4>>2]<<1)>>>0>r>>>0?t:r,t=0),i[a>>2]=t,i[e+4>>2]=n,d=o+16|0}(o+32|0,t,n,r),a=1,n=i[o+36>>2],1!=i[o+32>>2]?(0|n)<=-1?(ue(o+8|0,o,0),t=i[o+12>>2],i[e+4>>2]=i[o+8>>2],i[e+8>>2]=t):(r=o+16|0,a=i[t+4>>2],i[r>>2]=a,i[r+4>>2]=0!=(0|a),(r=(r=i[o+20>>2])?ie(i[t>>2],i[o+16>>2],r,n):ce(n,1))||(pe(n,1),l()),i[t+4>>2]=n,i[t>>2]=r,a=0):(ue(o,n,i[o+40>>2]),t=i[o+4>>2],i[e+4>>2]=i[o>>2],i[e+8>>2]=t)),i[e>>2]=a,d=o+48|0}(r,e,t,n);e:{if(1==i[r>>2]){if(!i[r+8>>2])break e;N(1048700),l()}return void(d=r+16|0)}ge(),l()}(e,i[e+8>>2],t)}function fe(e,t){return t|=0,0|function(e,t){var n,i=0,a=0,c=0,u=0,l=0,p=0,h=0,g=0,v=0;if(d=n=d-48|0,a=39,e>>>0<1e4)i=e;else for(;i=we(e,u),v=c=f,h=(l=(n+9|0)+a|0)-4|0,c=e-be(i,c)|0,p=o[0|(p=1050746+((g=((65535&c)>>>0)/100|0)<<1)|0)]|o[p+1|0]<<8,r[0|h]=p,r[h+1|0]=p>>>8,l=l+-2|0,c=1050746+((c-s(g,100)&65535)<<1)|0,c=o[0|c]|o[c+1|0]<<8,r[0|l]=c,r[l+1|0]=c>>>8,a=a+-4|0,c=!u&e>>>0>99999999|u>>>0>0,e=i,u=v,c;);return(0|i)>99&&(u=(a=a+-2|0)+(n+9|0)|0,e=1050746+(((e=i)-s(i=((65535&e)>>>0)/100|0,100)&65535)<<1)|0,e=o[0|e]|o[e+1|0]<<8,r[0|u]=e,r[u+1|0]=e>>>8),(0|i)>=10?(e=(a=a+-2|0)+(n+9|0)|0,i=o[0|(i=1050746+(i<<1)|0)]|o[i+1|0]<<8,r[0|e]=i,r[e+1|0]=i>>>8):r[(a=a+-1|0)+(n+9|0)|0]=i+48,e=_(t,1050299,0,(n+9|0)+a|0,39-a|0),d=n+48|0,e}(i[(e|=0)>>2],t)}function pe(e,t){var n;n=e,e=i[262767],Se[e||22](n,t),l()}function he(e,t,n){return g(n,e,t)}function ge(){N(1050224),l()}function ve(e){return f=1468863706,-1546811115}function _e(e){}function ye(){}function me(e,t){var n,r;n=0|e,r=0|t,c[0]=n,c[1]=r}function be(e,t){var n,r=0,i=0;return n=s(r=e>>>16,0),e=65535&(i=(i=s(r,1e4))+((r=s(65535&e,1e4))>>>16)|0),f=((n+s(t,1e4)|0)+(i>>>16)|0)+(e>>>16)|0,65535&r|e<<16}function we(e,t){var n=0,r=0,i=0,o=0,a=0,c=0,l=0;if(!t)return me((t=e)-s(e=(e>>>0)/1e4|0,1e4)|0,0),f=0,e;if(i=0-(a=51-u(t)|0)|0,n=31&(r=63&a),32<=r>>>0?(r=0,o=t>>>n):(r=t>>>n,o=((1<<n)-1&t)<<32-n|e>>>n),n=31&(i&=63),32<=i>>>0?(t=e<<n,e=0):(t=(1<<n)-1&e>>>32-n|t<<n,e<<=n),a)for(;i=r<<1|o>>>31,o=(r=o<<1|t>>>31)-(n=1e4&(c=(o=0-(i+(9999<r>>>0)|0)|0)>>31))|0,r=i-(r>>>0<n>>>0)|0,t=t<<1|e>>>31,e=l|e<<1,l=c&=1,a=a+-1|0;);return me(o,r),f=t<<1|e>>>31,c|e<<1}function Oe(e){return e?31-u(e+-1^e)|0:32}function Ee(e,t){var n=0;return(-1>>>(n=31&t)&e)<<n|((n=e)&-1<<(e=0-t&31))>>>e}var Se=[null,function(e,t){return t|=0,e=i[(e|=0)>>2],(16&o[0|t])>>>4?0|function(e,t){var n,o=0,a=0;for(d=n=d-128|0,o=i[e>>2],e=0;a=15&o,r[127+(e+n|0)|0]=a>>>0<10?48|a:a+87|0,e=e+-1|0,o>>>=4;);return(o=e+128|0)>>>0>=129&&(D(o,128),l()),e=_(t,1050744,2,128+(e+n|0)|0,0-e|0),d=n+128|0,e}(e,t):(32&o[0|t])>>>5?0|function(e,t){var n,o=0,a=0;for(d=n=d-128|0,o=i[e>>2],e=0;a=15&o,r[127+(e+n|0)|0]=a>>>0<10?48|a:a+55|0,e=e+-1|0,o>>>=4;);return(o=e+128|0)>>>0>=129&&(D(o,128),l()),e=_(t,1050744,2,128+(e+n|0)|0,0-e|0),d=n+128|0,e}(e,t):0|fe(e,t)},function(e,t){e|=0;var n,r,o=0,a=0,s=0;return d=n=d-32|0,r=i[28+(t|=0)>>2],t=i[t+24>>2],s=i[4+(a=e+16|0)>>2],i[(o=n+24|0)>>2]=i[a>>2],i[o+4>>2]=s,s=i[4+(a=e+8|0)>>2],i[(o=n+16|0)>>2]=i[a>>2],i[o+4>>2]=s,o=i[e+4>>2],i[n+8>>2]=i[e>>2],i[n+12>>2]=o,e=h(t,r,n+8|0),d=n+32|0,0|e},function(e,t){return t|=0,0|he(i[(e|=0)>>2],i[e+4>>2],t)},function(e,t){var n;return t|=0,d=n=d-16|0,oe(n+8|0,i[(e|=0)>>2]),e=he(i[n+8>>2],i[n+12>>2],t),d=n+16|0,0|e},_e,function(e,t){return e|=0,d=e=d-16|0,function(e,t){var n;n=0|Se[i[i[t+28>>2]+12>>2]](i[t+24>>2],1049996,11),r[e+5|0]=0,r[e+4|0]=n,i[e>>2]=t}(e+8|0,t|=0),t=function(e){var t=0,n=0,a=0;return t=o[e+4|0],o[e+5|0]&&(n=255&t,a=e,t=1,n||(t=i[e>>2],n=i[i[t+28>>2]+12>>2],e=i[t+24>>2],t=4&o[0|t]?0|Se[n](e,1050946,1):0|Se[n](e,1050947,2)),r[a+4|0]=t),0!=(255&t)}(e+8|0),d=e+16|0,0|t},_e,function(e,t){return 0|Se[i[i[28+(t|=0)>>2]+12>>2]](i[t+24>>2],1050299,11)},_e,function(e,t){return 0|Se[i[i[28+(t|=0)>>2]+12>>2]](i[t+24>>2],1050310,14)},H,function(){return 0|(i[262757]?1051024:function(){var e,t,n=0,r=0,o=0;return d=e=d-32|0,H(e),o=i[262759],i[(n=e+24|0)>>2]=i[262758],i[n+4>>2]=o,o=i[262756],n=i[262757],r=i[e+4>>2],i[262756]=i[e>>2],i[262757]=r,t=i[4+(r=e+8|0)>>2],i[262758]=i[r>>2],i[262759]=t,i[e+16>>2]=o,i[e+20>>2]=n,i[e+20>>2]&&te(e+16|4),d=e+32|0,1051024}())},_e,function(e,t){e|=0;var n=0,r=0,o=0;n=i[(t|=0)>>2],i[t>>2]=0;e:{if(r=e,n){if(o=i[t+4>>2],!(t=ce(8,4)))break e;i[t+4>>2]=o,i[t>>2]=n,n=1049224}else t=1,n=1049240;return i[r+4>>2]=n,void(i[e>>2]=t)}pe(8,4),l()},function(e,t){var n;e|=0,n=i[(t|=0)>>2],i[e+4>>2]=n?1049224:1049240,i[e>>2]=n?t:1},_e,function(e){return f=286299353,1890621284},_e,function(e){return f=1757840133,-801715452},ne,function(){return 0|(i[262762]?1051048:function(){var e,t,n=0,r=0,o=0;return d=e=d-48|0,ne(e),i[e+40>>2]=i[262766],n=i[262765],i[(r=e+32|0)>>2]=i[262764],i[r+4>>2]=n,n=i[262762],r=i[262763],o=i[e+4>>2],i[262762]=i[e>>2],i[262763]=o,t=i[4+(o=e+8|0)>>2],i[262764]=i[o>>2],i[262765]=t,i[262766]=i[e+16>>2],i[e+24>>2]=n,i[e+28>>2]=r,n&&i[4+(n=e+24|0)>>2]&&v(i[n>>2]),d=e+48|0,1051048}())},function(e,t){},_e,X,function(e,t){t|=0;var n,o=0;d=n=d-16|0,o=e=i[(e|=0)>>2];e:{t:{n:{if(t>>>0>=128){if(i[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){r[n+14|0]=63&t|128,r[n+13|0]=t>>>6&63|128,r[n+12|0]=t>>>12&15|224,t=3;break t}r[n+15|0]=63&t|128,r[n+12|0]=t>>>18|240,r[n+14|0]=t>>>6&63|128,r[n+13|0]=t>>>12&63|128,t=4;break t}(0|(o=i[e+8>>2]))==i[e+4>>2]&&(A(e,1),o=i[e+8>>2]),r[o+i[e>>2]|0]=t,i[e+8>>2]=i[e+8>>2]+1;break e}r[n+13|0]=63&t|128,r[n+12|0]=t>>>6&31|192,t=2}A(o,t),o=i[e+8>>2],i[e+8>>2]=o+t,q(o+i[e>>2]|0,n+12|0,t)}return d=n+16|0,0},function(e,t){e|=0,t|=0;var n,r=0,o=0;return d=n=d-32|0,i[n+4>>2]=i[e>>2],o=i[4+(r=t+16|0)>>2],i[(e=n+24|0)>>2]=i[r>>2],i[e+4>>2]=o,o=i[4+(r=t+8|0)>>2],i[(e=n+16|0)>>2]=i[r>>2],i[e+4>>2]=o,e=i[t+4>>2],i[n+8>>2]=i[t>>2],i[n+12>>2]=e,e=h(n+4|0,1049868,n+8|0),d=n+32|0,0|e},_e,ve,function(e){var t;!(t=i[4+(e|=0)>>2])|!i[e+8>>2]||v(t)},function(e,t){e|=0;var n,r=0,o=0,a=0,s=0;d=n=d+-64|0,(r=i[4+(t|=0)>>2])||(r=i[t>>2],i[n+32>>2]=0,i[n+24>>2]=1,i[n+28>>2]=0,i[n+36>>2]=n+24,a=i[4+(o=r+16|0)>>2],i[(s=n+56|0)>>2]=i[o>>2],i[s+4>>2]=a,a=i[4+(o=r+8|0)>>2],i[(s=n+48|0)>>2]=i[o>>2],i[s+4>>2]=a,o=i[r+4>>2],i[n+40>>2]=i[r>>2],i[n+44>>2]=o,h(n+36|0,1049868,n+40|0),i[(o=n+16|0)>>2]=i[n+32>>2],r=i[n+28>>2],i[n+8>>2]=i[n+24>>2],i[n+12>>2]=r,!(r=i[t+4>>2])|!i[t+8>>2]||v(r),a=i[n+12>>2],i[(r=t+4|0)>>2]=i[n+8>>2],i[r+4>>2]=a,i[r+8>>2]=i[o>>2],r=i[r>>2]),i[t+4>>2]=1,o=i[t+12>>2],a=i[(t=t+8|0)>>2],i[t>>2]=0,i[t+4>>2]=0,(t=ce(12,4))||(pe(12,4),l()),i[t+8>>2]=o,i[t+4>>2]=a,i[t>>2]=r,i[e+4>>2]=1050028,i[e>>2]=t,d=n- -64|0},function(e,t){e|=0;var n,r,o=0,a=0,s=0,c=0;d=n=d+-64|0,r=4+(t|=0)|0,i[t+4>>2]||(a=i[t>>2],i[n+32>>2]=0,i[n+24>>2]=1,i[n+28>>2]=0,i[n+36>>2]=n+24,c=i[4+(o=a+16|0)>>2],i[(s=n+56|0)>>2]=i[o>>2],i[s+4>>2]=c,c=i[4+(o=a+8|0)>>2],i[(s=n+48|0)>>2]=i[o>>2],i[s+4>>2]=c,o=i[a+4>>2],i[n+40>>2]=i[a>>2],i[n+44>>2]=o,h(n+36|0,1049868,n+40|0),i[(a=n+16|0)>>2]=i[n+32>>2],o=i[n+28>>2],i[n+8>>2]=i[n+24>>2],i[n+12>>2]=o,!(o=i[t+4>>2])|!i[t+8>>2]||v(o),t=i[n+12>>2],i[r>>2]=i[n+8>>2],i[r+4>>2]=t,i[r+8>>2]=i[a>>2]),i[e+4>>2]=1050028,i[e>>2]=r,d=n- -64|0},te,function(e){return f=-679582923,428379921},_e,X,function(e,t){return t|=0,function(e,t){var n,o=0;d=n=d-16|0,o=e;e:{t:{n:{if(t>>>0>=128){if(i[n+12>>2]=0,t>>>0<2048)break n;if(t>>>0<65536){r[n+14|0]=63&t|128,r[n+13|0]=t>>>6&63|128,r[n+12|0]=t>>>12&15|224,t=3;break t}r[n+15|0]=63&t|128,r[n+12|0]=t>>>18|240,r[n+14|0]=t>>>6&63|128,r[n+13|0]=t>>>12&63|128,t=4;break t}(0|(o=i[e+8>>2]))==i[e+4>>2]&&(A(e,1),o=i[e+8>>2]),r[o+i[e>>2]|0]=t,i[e+8>>2]=i[e+8>>2]+1;break e}r[n+13|0]=63&t|128,r[n+12|0]=t>>>6&31|192,t=2}A(o,t),o=i[e+8>>2],i[e+8>>2]=o+t,q(o+i[e>>2]|0,n+12|0,t)}d=n+16|0}(i[(e|=0)>>2],t),0},function(e,t){e|=0,t|=0;var n,r=0,o=0;return d=n=d-32|0,i[n+4>>2]=i[e>>2],o=i[4+(r=t+16|0)>>2],i[(e=n+24|0)>>2]=i[r>>2],i[e+4>>2]=o,o=i[4+(r=t+8|0)>>2],i[(e=n+16|0)>>2]=i[r>>2],i[e+4>>2]=o,e=i[t+4>>2],i[n+8>>2]=i[t>>2],i[n+12>>2]=e,e=h(n+4|0,1050044,n+8|0),d=n+32|0,0|e},_e,function(e,t){return 0|Se[i[i[28+(t|=0)>>2]+12>>2]](i[t+24>>2],1051016,5)},fe,fe,function(e,t){return 0|g(t|=0,i[(e|=0)>>2],i[e+4>>2])},function(e,t){return t|=0,0|Se[i[i[4+(e|=0)>>2]+12>>2]](i[e>>2],t)},_e,ve];function Te(t){t|=0;var c=0|n.byteLength/65536,u=c+t|0;if(c<u&&u<65536){var l=new ArrayBuffer(s(u,65536)),d=new e.Int8Array(l);d.set(r),r=d,r=new e.Int8Array(l),new e.Int16Array(l),i=new e.Int32Array(l),o=new e.Uint8Array(l),new e.Uint16Array(l),a=new e.Uint32Array(l),new e.Float32Array(l),new e.Float64Array(l),n=l}return c}return{memory:Object.create(Object.prototype,{grow:{value:Te},buffer:{get:function(){return n}}}),sha1:function(e,t,n){var r;e|=0,d=r=d-80|0,Y(r+24|0,t|=0,n|=0),function(e,t,n){var r;d=r=d-16|0,i[r+12>>2]=n,i[r+8>>2]=t,function(e,t){var n;d=n=d-32|0,function(e,t){var n,r,a=0;d=n=d-176|0,(r=0|Se[i[262284]]())?(function(e){var t;i[e+8>>2]=1732584193,i[e+12>>2]=-271733879,i[e>>2]=0,i[e+4>>2]=0,i[e+24>>2]=-1009589776,i[(t=e+16|0)>>2]=-1732584194,i[t+4>>2]=271733878,$(e+28|0,69)}(n+8|0),(0|(a=i[r>>2]+1|0))<=0&&(C(1049045,24,n+128|0,1049088),l()),i[r>>2]=a,i[n+164>>2]=3,i[n+148>>2]=2,i[n+132>>2]=2,i[n+136>>2]=0,i[n+128>>2]=1049120,i[n+172>>2]=r,i[n+168>>2]=r+4,i[n+160>>2]=t,i[n+156>>2]=4,i[n+144>>2]=n+152,i[n+152>>2]=n+168,function(e,t){var n,r,o=0,a=0,s=0,c=0;if(d=n=d-48|0,c=i[t>>2],a=(r=i[t+4>>2])<<3)for(o=c+4|0;s=i[o>>2]+s|0,o=o+8|0,a=a+-8|0;);e:{t:{n:{r:{if(i[t+20>>2]){if(r||(x(1050152,0,0),l()),!i[c+4>>2]&&s>>>0<=15||!((o=s+s|0)>>>0>=s>>>0)){a=1,o=0,s=n+8|0;break r}}else o=s;if((0|o)<=-1)break n;if(s=n+8|0,o){if(!(a=ce(o,1)))break t}else a=1,o=0}if(i[n+16>>2]=0,i[n+12>>2]=o,i[n+8>>2]=a,i[n+20>>2]=n+8,a=i[4+(o=t+16|0)>>2],i[(c=n+40|0)>>2]=i[o>>2],i[c+4>>2]=a,a=i[4+(o=t+8|0)>>2],i[(c=n+32|0)>>2]=i[o>>2],i[c+4>>2]=a,o=i[t+4>>2],i[n+24>>2]=i[t>>2],i[n+28>>2]=o,h(n+20|0,1050044,n+24|0))break e;return t=i[s+4>>2],i[e>>2]=i[s>>2],i[e+4>>2]=t,i[e+8>>2]=i[s+8>>2],void(d=n+48|0)}ge(),l()}pe(o,1),l()}C(1050248,51,n+24|0,1050168),l()}(n+112|0,n+128|0),oe(n,n+112|0),function(e,t,n){var r,a,s;d=r=d-16|0,o[e+96|0]&&(Z(1049832,32,1049816),l()),a=e,s=function(e,t,n){var r,o,a=0;if(r=1+(a=(n>>>29)+t|0)|0,o=a,!((0|(n=(a=(n<<=3)+e|0)>>>0<n>>>0?r:o))==(0|t)&a>>>0<e>>>0|n>>>0<t>>>0))return f=n,a;(function(){var e;d=e=d-48|0,i[e+12>>2]=25,i[e+8>>2]=1049472,i[e+36>>2]=1,i[e+20>>2]=1,i[e+24>>2]=0,i[e+16>>2]=1050496,i[e+44>>2]=42,i[e+32>>2]=e+40,i[e+40>>2]=e+8,G(e+16|0,1050504),l()})(),l()}(i[e>>2],i[e+4>>2],n),i[a>>2]=s,i[e+4>>2]=f,i[r+12>>2]=e+8,function(e,t,n,r){var o,a=0,s=0,c=0;d=o=d+-64|0,i[o+60>>2]=r;e:{if(r=i[e>>2]){if((a=64-r|0)>>>0>n>>>0){V(o+32|0,e+4|0,64,r,n+r|0),Q(t,n,i[o+32>>2],i[o+36>>2]);break e}J(o+48|0,t,n,a),r=i[o+52>>2],s=i[o+48>>2],V(o+40|0,c=e+4|0,64,i[e>>2],64),Q(s,r,i[o+40>>2],i[o+44>>2]),i[e>>2]=0,le(o+60|0,c,64)}for(r=n-a|0;!(r>>>0<=63);)z(o+8|0,s=a,a=a- -64|0,t,n),le(o+60|0,i[o+8>>2],i[o+12>>2]),r=r+-64|0;z(o+24|0,a,n,t,n),t=i[o+28>>2],n=i[o+24>>2],V(o+16|0,e+4|0,64,0,r),Q(n,t,i[o+16>>2],i[o+20>>2]),n=r}i[e>>2]=i[e>>2]+n,d=o- -64|0}(e+28|0,t,n,r+12|0),d=r+16|0}(n+8|0,i[n>>2],i[n+4>>2]),te(n+112|0),t=i[n+172>>2],i[t>>2]=i[t>>2]+-1,function(e,t){var n,r,a=0;d=n=d-48|0,function(e,t){var n;d=n=d-16|0,i[n+8>>2]=0,i[n>>2]=1,i[n+4>>2]=0,function(e,t){var n,r=0;de(e,t),n=i[e>>2],t&&($(n+(r=i[e+8>>2])|0,t),i[e+8>>2]=t+r)}(n,t),i[e+8>>2]=i[n+8>>2],t=i[n+4>>2],i[e>>2]=i[n>>2],i[e+4>>2]=t,d=n+16|0}(n+16|0,20),oe(n+8|0,n+16|0),O(t,i[n+8>>2],i[n+12>>2]),i[(t=n+40|0)>>2]=i[n+24>>2],a=i[n+20>>2],i[n+32>>2]=i[n+16>>2],i[n+36>>2]=a,a=i[n+36>>2],r=i[t>>2],t=i[n+32>>2],i[n+44>>2]=r+t,i[n+40>>2]=t,i[n+36>>2]=a,i[n+32>>2]=t,function(e,t){var n,r=0,a=0,s=0;d=n=d+-64|0,a=i[4+(r=t+8|0)>>2],s=n+8|0,r=i[r>>2],i[s>>2]=r,i[s+4>>2]=a,a=i[t+4>>2],i[n>>2]=i[t>>2],i[n+4>>2]=a;e:{t:{if(i[n+12>>2]!=(0|r)){if(i[n+8>>2]=r+1,function(e,t){var n;d=n=d-16|0,i[n+12>>2]=i[1048724+((15&t)<<2)>>2],i[n+8>>2]=i[1048724+((240&t)>>>2)>>2],W(e,n+8|0,n+16|0),d=n+16|0}(n+16|0,o[0|r]),i[n+16>>2])break t}else i[n+16>>2]=0;if(i[e+8>>2]=0,i[e>>2]=1,i[e+4>>2]=0,j(n),!i[n+16>>2])break e;te(n+16|0);break e}i[(t=n+40|0)>>2]=i[n+24>>2],r=i[n+20>>2],i[n+32>>2]=i[n+16>>2],i[n+36>>2]=r,a=i[4+(r=n+8|0)>>2],i[(s=n+56|0)>>2]=i[r>>2],i[s+4>>2]=a,r=i[n+4>>2],i[n+48>>2]=i[n>>2],i[n+52>>2]=r,function(e,t){var n,r,a,s=0;d=n=d-16|0,a=i[4+(r=t+8|0)>>2],i[(s=n+8|0)>>2]=i[r>>2],i[s+4>>2]=a,s=i[t+4>>2],i[n>>2]=i[t>>2],i[n+4>>2]=s,function(e,t){var n,r,a,s=0;for(d=n=d+-64|0,a=i[4+(s=e+8|0)>>2],i[(r=n+24|0)>>2]=i[s>>2],i[r+4>>2]=a,s=i[e+4>>2],i[n+16>>2]=i[e>>2],i[n+20>>2]=s,e=n+56|0;(0|(s=i[n+24>>2]))!=i[n+28>>2];)i[n+24>>2]=s+1,s=o[0|s],i[n+52>>2]=i[1049140+((15&s)<<2)>>2],i[n+48>>2]=i[1049140+(s>>>2&60)>>2],W(n+32|0,n+48|0,e),i[e>>2]=i[n+40>>2],s=i[n+36>>2],i[n+48>>2]=i[n+32>>2],i[n+52>>2]=s,oe(n+8|0,n+48|0),se(t,i[n+8>>2],i[n+12>>2]),te(n+48|0);j(n+16|0),d=n- -64|0}(n,e),d=n+16|0}(n+32|0,n+48|0),i[e+8>>2]=i[t>>2],t=i[n+36>>2],i[e>>2]=i[n+32>>2],i[e+4>>2]=t}d=n- -64|0}(e,n+32|0),d=n+48|0}(e,n+8|0)):i[e>>2]=0,d=n+176|0}(n+8|0,t),i[n+8>>2]||(C(1048972,57,n+24|0,1049072),l()),t=i[n+12>>2],i[e>>2]=i[n+8>>2],i[e+4>>2]=t,i[e+8>>2]=i[n+16>>2],d=n+32|0}(e,r+8|0),d=r+16|0}(r+32|0,t=i[r+24>>2],n=i[r+28>>2]),n&&v(t),i[(t=r+56|0)>>2]=i[r+40>>2],n=i[r+36>>2],i[r+48>>2]=i[r+32>>2],i[r+52>>2]=n,oe(r+16|0,r+48|0),i[r+72>>2]=i[t>>2],t=i[r+52>>2],i[r+64>>2]=i[r+48>>2],i[r+68>>2]=t,K(r+8|0,r- -64|0),t=i[r+12>>2],i[e>>2]=i[r+8>>2],i[e+4>>2]=t,d=r+80|0},setSalt:function(e,t){var n;d=n=d-48|0,Y(n+8|0,e|=0,t|=0),e=i[n+12>>2],re(n+16|0,i[n+8>>2],e,e),i[n+40>>2]=i[n+24>>2],e=i[n+20>>2],i[n+32>>2]=i[n+16>>2],i[n+36>>2]=e,function(e){var t,n;d=t=d-16|0,i[t+8>>2]=i[e+8>>2],n=i[e+4>>2],i[t>>2]=i[e>>2],i[t+4>>2]=n,function(e){var t,n;d=t=d-32|0,i[t+16>>2]=i[e+8>>2],n=i[e+4>>2],i[t+8>>2]=i[e>>2],i[t+12>>2]=n,function(e){var t,n,r=0,o=0;return d=n=d-32|0,(t=0|Se[i[262284]]())?(i[(r=n+16|0)>>2]=i[e+8>>2],o=i[e+4>>2],i[n+8>>2]=i[e>>2],i[n+12>>2]=o,i[t>>2]&&(C(1049029,16,n+24|0,1049104),l()),i[t>>2]=-1,te(t+4|0),i[t+12>>2]=i[r>>2],e=i[n+12>>2],i[t+4>>2]=i[n+8>>2],i[t+8>>2]=e,i[t>>2]=i[t>>2]+1,e=0):(te(e),e=1),d=n+32|0,e}(t+8|0)&&(C(1048972,57,t+24|0,1049072),l()),d=t+32|0}(t),d=t+16|0}(n+32|0),d=n+48|0},main:ye,__wbindgen_malloc:function(e){if(!((e|=0)>>>0>4294967292)){if(!e)return 4;if(e=ce(e,(e>>>0<4294967293)<<2))return 0|e}l()},__wbindgen_realloc:function(e,t,n){if(e|=0,!((t|=0)>>>0>4294967292)&&(e=ie(e,t,4,n|=0)))return 0|e;l()},__wbindgen_free:function(e,t){(t|=0)&&v(e|=0)},__wbindgen_start:ye}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},{abort:function(){throw new Error("abort")}},l),p=f.memory,h=f.sha1,g=f.setSalt,v=f.main,_=f.__wbindgen_malloc,y=f.__wbindgen_realloc,m=f.__wbindgen_free,b=f.__wbindgen_start},function(e,t,n){"use strict";function r(){}function i(){}n.r(t),r.prototype.encode=function(e){for(var t=[],n=e.length,r=0;r<n;){var i=e.codePointAt(r),o=0,a=0;for(i<=127?(o=0,a=0):i<=2047?(o=6,a=192):i<=65535?(o=12,a=224):i<=2097151&&(o=18,a=240),t.push(a|i>>o),o-=6;o>=0;)t.push(128|i>>o&63),o-=6;r+=i>=65536?2:1}return t},i.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var r=e[n],i=0,o=0;if(r<=127?(i=0,o=255&r):r<=223?(i=1,o=31&r):r<=239?(i=2,o=15&r):r<=244&&(i=3,o=7&r),e.length-n-i>0)for(var a=0;a<i;)o=o<<6|63&(r=e[n+a+1]),a+=1;else o=65533,i=e.length-n;t+=String.fromCodePoint(o),n+=i+1}return t},n.d(t,"sha1",(function(){return p})),n.d(t,"setSalt",(function(){return h})),n.d(t,"main",(function(){return g})),n.d(t,"memory",(function(){return _}));var o=0,a=new r("utf-8"),s="function"==typeof a.encodeInto?function(e,t){return a.encodeInto(e,t)}:function(e,t){var n=a.encode(e);return t.set(n),{read:e.length,written:n.length}},c=null;function u(){return null!==c&&c.buffer===v.memory.buffer||(c=new Uint8Array(v.memory.buffer)),c}function l(e){for(var t=e.length,n=v.__wbindgen_malloc(t),r=u(),i=0;i<t;i++){var a=e.charCodeAt(i);if(a>127)break;r[n+i]=a}if(i!==t){0!==i&&(e=e.slice(i)),n=v.__wbindgen_realloc(n,t,t=i+3*e.length);var c=u().subarray(n+i,n+t);i+=s(e,c).written}return o=i,n}var d=null,f=new i("utf-8",{ignoreBOM:!0,fatal:!0});function p(e){v.sha1(8,l(e),o);var t,n,r=(null!==d&&d.buffer===v.memory.buffer||(d=new Int32Array(v.memory.buffer)),d),i=(t=r[2],n=r[3],f.decode(u().subarray(t,t+n))).slice();return v.__wbindgen_free(r[2],1*r[3]),i}function h(e){v.setSalt(l(e),o)}function g(){v.main()}f.decode();var v=n(0),_=v.memory;v.__wbindgen_start()}])}}.call(this,n(3).Buffer)},function(e,t,n){(function(e){var r=n(5),i=n(6),o=n(7);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return G(W(t,e.length-n),e,n,r)}function w(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return G(V(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:W(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(4))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t);var i=n(0),o=null,a=function(){return null!==o},s=[];WeixinJSBridge.subscribe("batchGetPluginPermissionBytes",(function(e){o=e.data.pluginPermissionBytes,s.forEach((function(e){return e()})),s=[]}));var c=function(e){return e.split("/",1)[0]};function u(e,t){if(delete t.permissionBytes,void 0===t.pluginId)return t;var n=function(e,t){e=c(e);var n=o&&o[e]&&o[e][t];return null==n?n=[0,0,0]:"object"!==Object(i.default)(n)&&(n=[n,n,n]),n}(t.pluginId,e);return t.permissionBytes=n,t.privateData=JSON.stringify({pluginId:t.pluginId}),t}function l(e,t,n,r){n=parseInt(n,10),f(e,t,(function(e){r(e[0]===n)}))}function d(e,t,n,r){n=parseInt(n,10),f(e,t,(function(e){r(e[0]!==n)}))}function f(e,t,n){var r;r=function(){e=c(e);var r=o&&o[e]&&o[e][t];null==r?r=[0,0,0]:"object"!==Object(i.default)(r)&&(r=[r,r,r]),n(r)},a()?r():s.push(r)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h,g=n(2),v=Function.prototype.call,_=v.bind(String.prototype.indexOf),y=v.bind(String.prototype.slice),m=v.bind(Array.prototype.sort),b=v.bind(Number.prototype.toString),w=v.bind(Object.prototype.toString),O=Object.keys,E=Array.isArray||function(e){return"[object Array]"===w(e)},S=function e(t){if("string"==typeof t)return t;if("number"==typeof t){var n=b(t,10),r=_(n,".");return r>0&&(n=y(n,0,r+5)),n}if("boolean"==typeof t)return!0===t?"true":"false";if(E(t)){for(var o="",a=0;a<t.length;a++)o+=e(t[a])+";";return"["+o+"]"}if("object"===Object(i.default)(t)){var s="",c=O(t);m(c);for(var u=0;u<c.length;++u)s+=c[u]+":"+e(t[c[u]])+";";return"{"+s+"}"}return""},T=function(e){for(var t=e.apiName,n=e.args,r=e.argsList,i=e.seq,o=t,a=0;a<r.length;a++)o+="|"+S(n[r[a]]);return o+=i},I=n(1);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var C,k=Math.floor,x=Math.random,P=Object(g.createSafeSha1)();C=function(e){for(var t=e.bits,n=e.PRNG,r=void 0===n?x:n,i=k(t/16),o="",a=0;a<i;++a)o+="0123456789abcdef"[k(16*r())];return o}({bits:256}),P.setSalt(C);var D=function(e){return I.invokes[e]},R=0,j=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t);if(void 0!==n.apiSignature)return n;if(void 0===D(e))return n;var r=T({apiName:e,args:n,argsList:I.invokes[e],seq:R});return n.apiSignature=P.sha1(r),n.apiSigningSeq=R,n.apiSignature,R+=1,n},N=0,M=1,L=2,B=3,F=(p(h={},M,"sign error"),p(h,L,"sign seq error"),p(h,B,"sign missing"),h),U=new Set,W=Function.prototype.call,V=W.bind(Set.prototype.has),G=W.bind(Set.prototype.add);function H(e,t,n,r){var i="api sign failed: "+F[e]+"; apiName: "+t+"; args: "+JSON.stringify(n)+"; signature: "+r;throw new Error(i)}function z(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var q=Object.create(null);function K(){return{invoke:function(e,t,n,r){if(function(e,t){if(void 0===D(e))return N;null!==t.apiSigningSeq&&void 0!==t.apiSigningSeq&&null!==t.apiSignature&&void 0!==t.apiSignature||H(B,e,t,"not checked"),t.apiSigningSeq=parseInt(t.apiSigningSeq,10),V(U,t.apiSigningSeq)&&H(L,e,t,"not checked"),G(U,t.apiSigningSeq);var n=T({apiName:e,args:t,argsList:I.invokes[e],seq:t.apiSigningSeq}),r=P.sha1(n);r!==t.apiSignature&&H(M,e,t,r)}(e,t),void 0===t.pluginId)return WeixinJSBridge.invoke(e,t,n,r);if(a()){var i=u(e,t);return WeixinJSBridge.invoke(e,i,n,r)}return function(e,t,n){delete t.permissionBytes,void 0===t.pluginId&&n(t),f(t.pluginId,e,(function(e){t.permissionBytes=e,t.privateData=JSON.stringify({pluginId:t.pluginId}),n(t)}))}(t,(function(t){WeixinJSBridge.invoke(e,t,n,r)}))},on:function(e,t){return q[e]instanceof Array?(q[e].push(t),null):(q[e]=null,WeixinJSBridge.on(e,t))},publish:function(e,t,n){return WeixinJSBridge.publish(e,t,n)},subscribe:function(e,t){return WeixinJSBridge.subscribe(e,t)}}}var J=!1,X=[],$=function(e){X.push(e),J||(this.bridge.on("onSubPackageReady",(function(e){X.forEach((function(t){"function"==typeof t&&t(void 0,e)}))})),J=!0)};function Z(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}var Q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.stringify,r=void 0===n?JSON.stringify:n,o=t.parse,a=void 0===o?JSON.parse:o,s=t.arrayBufferProto,c=void 0===s?ArrayBuffer.prototype:s;if(!e)return e;var u=Object(i.default)(e);if("function"===u)throw new Error("[Safeway] not allow to pass function.");if("object"!==u)return e.valueOf();for(var l,d=Object.keys(e),f={},p=0;p<d.length;p++){var h=d[p],g=e[h];void 0!==g&&"ArrayBuffer"===Z(g)&&void 0!==g.byteLength&&(Object.setPrototypeOf(g,c),f[h]=g)}try{l=a(r(e))}catch(e){throw new Error("[Safeway] data clone error "+e.toString())}for(var v=Object.keys(f),_=0;_<v.length;_++){var y=v[_];l[y]=f[y]}return l};function ee(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=Q(r<0||arguments.length<=r?void 0:arguments[r],{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto});t.apply(this,n)}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.cloneArgs,i=void 0===r||r;return function(){for(var n=[],r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];for(var s=0;s<o.length;s++)"function"==typeof o[s]?n[s]=new ee(e,o[s]):n[s]=i?Q(o[s],{parse:JSON.parse,stringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}):o[s];var c=t.apply(this,n);return Q(c,{parse:e.contextGlobal.jsonParse,stringify:e.contextGlobal.jsonStringify,arrayBufferProto:e.contextGlobal.arrayBufferProto})}}function ne(e,t,n){for(var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Object.keys(e),a=0;a<o.length;a++){var s=o[a],c=e[s];if("function"!=typeof c)throw new Error("Export value of Safeway must be a function, key "+s+" func "+Object(i.default)(c));n&&void 0!==__subContextEngine__&&__subContextEngine__.isIsolateContext()?t[s]=new te(n,c,{cloneArgs:r}):t[s]=c}}function re(e){var t=K(),n={create:function(e,t){return WeixinWorker.create(e,t)},onWorkerMsg:function(e){return WeixinWorker.onWorkerMsg(e)},postMsgToWorker:function(e,t,n){return WeixinWorker.postMsgToWorker(e,t,n)},terminate:function(e){return WeixinWorker.terminate(e)}},r={makeApiSign:j},i={ifIs:l,ifIsNot:d};ne(t,t,e,{cloneArgs:!1}),ne(n,n,e),ne(i,i,e),this.bridge=t,this.worker=n,this.apiSign=r,this.pluginPermissionBytes=i,ne({onSubpackageReady:$},this,e)}var ie=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re.call(this,t)}var t,n,i;return t=e,i=[{key:"splitOnBridgeListener",value:function(e){return function(e){return null===q[e]?(console.error("`splitOnBridgeListener` should be called before any listeners attached to it. Ignored."),null):(q[e]=[],WeixinJSBridge.on(e,(function(){var t,n=z(q[e]);try{for(n.s();!(t=n.n()).done&&!1!==t.value.apply(void 0,arguments););}catch(e){n.e(e)}finally{n.f()}})),function(t){q[e].unshift(t)})}(e)}}],(n=null)&&r(t.prototype,n),i&&r(t,i),e}();t.default=ie}]).default,__safeway__=new Safeway,__exparserSclEngine__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"exparser",(function(){return r})),n.d(t,"onThemeChange",(function(){return g})),n.d(t,"onViewportResize",(function(){return v})),n.d(t,"timestamp",(function(){return y})),n.d(t,"timestampMs",(function(){return m})),n.d(t,"getEngineConfig",(function(){return b})),n.d(t,"getWindowWidth",(function(){return w})),n.d(t,"getWindowHeight",(function(){return O})),n.d(t,"getTheme",(function(){return E})),n.d(t,"getDevicePixelRatio",(function(){return S})),n.d(t,"getSafeArea",(function(){return T})),n.d(t,"invoke",(function(){return I})),n.d(t,"subscribe",(function(){return A})),n.d(t,"timeoutCallback",(function(){return C}));var r=n(2);r.globalOptions.publicProperties=!0,r.globalOptions.renderingMode="full",r.globalOptions.classPrefix="";var i=WeixinJSBridge,o=[],a=[],s=0,c=0,u=0,l=null,d=null,f={};["onViewDidResize","onAppRouteResized","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onTextViewDrag","onImageViewLoad","onScrollViewScroll","onThemeChange"].forEach((function(e){f[e]=Safeway.splitOnBridgeListener(e)}));var p=function(e){return e?{left:e.left,top:e.top,right:Math.max(s-e.right,0),bottom:Math.max(c-e.bottom,0)}:e},h=function(e){s=e.size.framesetWidth||e.size.screenWidth,c=e.size.framesetHeight||e.size.screenHeight,i.invoke("getSystemInfo",{},(function(e){d=p(e.safeArea),o.forEach((function(t){t(e)}))}))};f.onViewDidResize(h),f.onAppRouteResized(h),f.onThemeChange((function(t){l!==t.theme&&e.__wxConfig.darkmode&&(l=t.theme,r.triggerRender((function(){a.forEach((function(e){return e({theme:l})}))})))}));var g=function(e){a.push(e)},v=function(e){o.push(e)},_=function(){u&&s&&c||i.invoke("getSystemInfo",{},(function(e){u=e.pixelRatio,s&&c||(s=e.framesetWidth||e.screenWidth,c=e.framesetHeight||e.screenHeight),d=p(e.safeArea)}))},y=function(){return Math.floor(Date.now()/1e3)},m=function(){return Date.now()%1e3},b=function(){return{relativeToParentContent:!1}},w=function(){return _(),s},O=function(){return _(),c},E=function(){return function(){if(!l){var t=e.__wxConfig,n=t.darkmode;l=n?t.theme:"light"}}(),l||"light"},S=function(){return u},T=function(){return d},I=function(e,t,n){i.invoke(e,t,(function(e){n&&n.exec(e)}))},A=function(e,t){f[e]((function(e){if(t)return t.exec(e)}))},C=function(e,t){t&&setTimeout((function(e){t.exec(e)}),e)}}.call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1),i=n(3),o=n(5),a=n(6),s=n(7),c=n(8),u=n(9),l=n(15),d=n(12),f=n(17),p=n(18),h=n(19),g=n(16),v=n(10),_=n(20),y=n(14),m=n(21),b=n(4),w=n(13),O=n(22);t.FreeTmpl=O,t.precompileTemplate=O.precompiler?O.precompiler.compile:null,t.precompiler=O.precompiler?O.precompiler:null,t.HtmlLLParser=O.htmlParser?O.htmlParser:null,t.LLParser=r,t.dataPath=s,t.dataUtils=o,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=f,t.VirtualNode=p,t.ShadowRoot=h,t.Behavior=c,t.Component=l,t.Observer=v,t.DataGroup=g,t.ElementIterator=_,t.FakeDomElement=y,t.registerBehavior=c.create,t.registerElement=l.register,t.createElement=l.create,t.createTextNode=d.create,t.createVirtualNode=p.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.triggerRender=m.triggerRender,t.safeCallback=i.safeCallback,t.addGlobalErrorListener=i.addGlobalErrorListener,t.removeGlobalErrorListener=i.removeGlobalErrorListener,t.addGlobalWarningListener=i.addGlobalWarningListener,t.removeGlobalWarningListener=i.removeGlobalWarningListener,t.globalOptions=b,t.globalState=w,l._setDefaultTemplateEngine(O);var E=t.updateDefaultComponent=function(){delete l._list[""],l.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})};E(),t.initBackend=function(){E()};var S=function(e){var t="";if(e instanceof exparser.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),"dom"===b.documentBackend&&e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof exparser.VirtualNode)return t;if(e instanceof exparser.Component)return l.listPublicProperties(e).forEach((function(n){t+=" "+n+"="+JSON.stringify(e[n])})),t;for(var n=e.attributes,r=0;r<n.length;r++)t+=" "+n[r].name+'="'+n[r].value+'"';return t},T=t.dumpElementToString=function(e,t,n){var r=null;"dom"===b.documentBackend&&(r=window);var i=0,o="";for(i=n=n||0;i;i--)o+="  ";var a="";if(e instanceof exparser.Element)a+=o+"<"+("dom"===b.documentBackend&&e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+S(e)+">",a+=e instanceof exparser.VirtualNode?" [Exp-Virtual]":e instanceof exparser.NativeNode?" [Exp-Native]":" [Exp-Component]",a+="\n"+T(t?e.__wxSlotChildren:e.childNodes,t,n+1);else if(e instanceof exparser.TextNode)a+=o+e.textContent+" [Exp-Text]\n";else if(r&&r.HTMLElement&&e instanceof r.HTMLElement)a+=o+"<"+e.tagName.toLowerCase()+S(e)+"> [DOM-Element]",a+="\n"+T(t&&e.__wxSlotChildren||e.childNodes,t,n+1);else if(r&&r.Text&&e instanceof r.Text)a+=o+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(i=0;i<e.length;i++)a+=T(e[i],t,n);else a=o+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(T(e,t))}},function(e,t,n){var r=null,i=function(){},o=i.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var n=r.llparser_create_descriptor(e,0),i=!1;"^"===t[0]&&(i=!0);for(var o=i?1:0;o<t.length;o++){var a=t.charCodeAt(o);if("-"===t[o+1]){var s=t.charCodeAt(o+2);a<=s?(r.llparser_descriptor_add_range(n,a,s),o+=2):r.llparser_descriptor_add_char(n,a)}else r.llparser_descriptor_add_char(n,a)}return i&&r.llparser_descriptor_revert(n),n};i.create=function(e,t,o){r||(r=n(2));var c=new i;o=o||16384;var u=c._llp=r.llparser_create(o,128,128),l={},d={},f="";for(f in l.ALL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_all(l.ALL),l.NULL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_nil(l.NULL),e)l[f]=a(u);for(f in e)for(var p=e[f],h=l[f],g=0;g<p.length;g++){for(var v=p[g].id,_=p[g].states,y=[],m=0;m<_.length;m++){var b=_[m];l[b]||(l[b]=s(u,b)),y.push(l[b])}var w=0;"_raw"===v?w=1:"_jump"===v?w=65536:"_blank"===v&&(w=65537);var O=r.llparser_add_rule(u,w,h,y.length,y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7]);0===w&&(d[O]=t[v])}return r.llparser_prepare(u),c._inputPtr=r.llparser_get_input_buffer(u),c._resultPtr=r.llparser_get_result(u),c._stateIdMap=l,c._ruleCbMap=d,c._charCountLimit=o,c};i.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,r){for(var i=r>e.length?e.length:r,o=0;o<i;o++)t[n+o]=e.charCodeAt(o);t[n+i]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),o.copyIn=o.copyIn+Date.now()-n,n=Date.now();var i=r.llparser_parse(this._llp,this._stateIdMap[e]);if(o.parse=o.parse+Date.now()-n,n=Date.now(),i)throw new Error("Parsing failed at character position "+(i-1)+' near "'+t.slice(i-20,i)+'"');var a=function(e,t,n,r,i){for(var o=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=i.pos,u=!1,l=!1,d=!1;;){var f=t[c],p=t[c+1];if(p<0?(l=!0,p=-p-1):l=!1,f>=0){d=!0;var h=n.slice(f,p);s.c.push(h),u=l}else{if(-1===f&&0===p)break;d=!1;var g=-f,v=p,_={i:s.c.length-(u?1:0),r:g,n:l,cc:v,c:[]};if(u){var y=s.c.length-1,m=s.c[y];_.c.push(m),s.c[y]=_}else s.c.push(_);o.push(s),s=_,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var b=o.pop();if(b.c[s.i]=r[s.r].call(e,s.c),s=b,u)break}c+=2}return a.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return o.constructOut=o.constructOut+Date.now()-n,a},i.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=i},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(t){return e[t]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return _.llparser_create(e,t,n)}function i(e){_.llparser_destroy(e)}function o(e,t){return _.llparser_create_descriptor(e,t)}function a(e){_.llparser_descriptor_set_all(e)}function s(e){_.llparser_descriptor_set_nil(e)}function c(e,t){_.llparser_descriptor_add_char(e,t)}function u(e,t,n){_.llparser_descriptor_add_range(e,t,n)}function l(e){_.llparser_descriptor_revert(e)}function d(e,t,n,r,i,o,a,s,c,u,l,d){return _.llparser_add_rule(e,t,n,r,i,o,a,s,c,u,l,d)}function f(e){_.llparser_prepare(e)}function p(e,t){return _.llparser_parse(e,t)}function h(e){return _.llparser_get_input_buffer(e)}function g(e){return _.llparser_get_result(e)}function v(){_.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return r})),n.d(t,"llparser_destroy",(function(){return i})),n.d(t,"llparser_create_descriptor",(function(){return o})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return u})),n.d(t,"llparser_descriptor_revert",(function(){return l})),n.d(t,"llparser_add_rule",(function(){return d})),n.d(t,"llparser_prepare",(function(){return f})),n.d(t,"llparser_parse",(function(){return p})),n.d(t,"llparser_get_input_buffer",(function(){return h})),n.d(t,"llparser_get_result",(function(){return g})),n.d(t,"wasm_main",(function(){return v})),n.d(t,"memory",(function(){return y}));var _=n(1),y=_.memory;_.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return o})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return u})),n.d(t,"llparser_create_descriptor",(function(){return l})),n.d(t,"llparser_descriptor_set_all",(function(){return d})),n.d(t,"llparser_descriptor_set_nil",(function(){return f})),n.d(t,"llparser_descriptor_add_char",(function(){return p})),n.d(t,"llparser_descriptor_add_range",(function(){return h})),n.d(t,"llparser_descriptor_revert",(function(){return g})),n.d(t,"llparser_add_rule",(function(){return v})),n.d(t,"llparser_prepare",(function(){return _})),n.d(t,"llparser_parse",(function(){return y})),n.d(t,"llparser_get_input_buffer",(function(){return m})),n.d(t,"llparser_get_result",(function(){return b})),n.d(t,"wasm_main",(function(){return w})),n.d(t,"__wbindgen_start",(function(){return O}));var r=new ArrayBuffer(1114112),i=function(e,t,n){function r(e){var t=0,n=0,r=0,i=0,o=0,c=0,u=0;n=(t=e+-8|0)+(e=-8&(i=h[e+-4>>2]))|0;e:{t:{n:{r:{i:if(!(1&i)){if(!(3&i))break r;if(e=(i=h[t>>2])+e|0,(0|(t=t-i|0))==h[262246]){if(3!=(3&h[n+4>>2]))break i;return h[262244]=e,h[n+4>>2]=-2&h[n+4>>2],h[t+4>>2]=1|e,void(h[e+t>>2]=e)}i>>>0>=256?s(t):(0|(r=h[t+8>>2]))==(0|(o=h[t+12>>2]))?(c=1048576,u=h[262144]&d(i>>>3),h[c>>2]=u):(h[r+12>>2]=o,h[o+8>>2]=r)}if(2&(i=h[n+4>>2]))h[n+4>>2]=-2&i,h[t+4>>2]=1|e,h[e+t>>2]=e;else{i:{if(h[262247]!=(0|n)){if((0|n)!=h[262246])break i;return h[262246]=t,e=h[262244]+e|0,h[262244]=e,h[t+4>>2]=1|e,void(h[e+t>>2]=e)}if(h[262247]=t,e=h[262245]+e|0,h[262245]=e,h[t+4>>2]=1|e,(0|t)==h[262246]&&(h[262244]=0,h[262246]=0),(n=h[262254])>>>0>=e>>>0)break r;if(!(e=h[262247]))break r;o:if(!((i=h[262245])>>>0<41))for(t=1049e3;;){if((r=h[t>>2])+h[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break o;if(!(t=h[t+8>>2]))break}if(r=4095,e=h[262252]){for(t=0;t=t+1|0,e=h[e+8>>2];);r=t>>>0>4095?t:4095}if(h[262256]=r,i>>>0<=n>>>0)break r;return void(h[262254]=-1)}if(e=(r=-8&i)+e|0,r>>>0>=256?s(n):(0|(r=h[n+12>>2]))==(0|(n=h[n+8>>2]))?(c=1048576,u=h[262144]&d(i>>>3),h[c>>2]=u):(h[n+12>>2]=r,h[r+8>>2]=n),h[t+4>>2]=1|e,h[e+t>>2]=e,h[262246]==(0|t)){h[262244]=e;break r}}if(e>>>0<256)break n;if(a(t,e),e=h[262256]+-1|0,h[262256]=e,!e){if(e=h[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,i=h[262144],n=1<<(31&n),r=h[e+8>>2],i&n||(h[262144]=n|i,r=e),n=r,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,void(h[t+8>>2]=n)}for(t=0;t=t+1|0,e=h[e+8>>2];);e=t>>>0>4095?t:4095}h[262256]=e}function i(e,t,n,r,o){var a;if(b=a=b-48|0,h[a+44>>2]=e,h[a+40>>2]=t,h[a+36>>2]=n,h[a+32>>2]=r,h[a+28>>2]=o,h[h[a+40>>2]>>2]!=h[a+36>>2])for(h[h[a+40>>2]>>2]=h[a+36>>2],h[a+24>>2]=h[h[a+40>>2]+136>>2],h[a+20>>2]=1&(0!=h[a+28>>2]^-1^-1);h[a+24>>2];){for(h[a+20>>2]||(h[a+28>>2]=h[a+24>>2]),h[a+16>>2]=h[h[h[a+24>>2]>>2]+8>>2],1==h[h[a+16>>2]+4>>2]&&i(h[a+44>>2],h[a+16>>2],h[a+36>>2],h[a+32>>2],h[a+28>>2]),h[a+12>>2]=0;!(h[a+12>>2]>=128);)g[h[a+12>>2]+(h[a+16>>2]+8|0)|0]&&(_[h[a+28>>2]>>2]>=_[h[a+32>>2]+(h[a+12>>2]<<2)>>2]&&h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]||(h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]=h[h[a+28>>2]>>2])),h[a+12>>2]=h[a+12>>2]+1;h[a+24>>2]=h[h[a+24>>2]+4>>2]}b=a+48|0}function o(e,t,n,r){var i;for(h[44+(i=b-48|0)>>2]=e,h[i+40>>2]=t,h[i+36>>2]=n,h[i+32>>2]=r,h[i+28>>2]=h[h[i+40>>2]+136>>2];h[i+28>>2];){if(h[i+24>>2]=h[h[h[i+28>>2]>>2]+8>>2],h[i+24>>2]==h[i+40>>2])for(h[i+20>>2]=h[h[h[i+28>>2]>>2]+12>>2],h[i+16>>2]=0;!(h[i+16>>2]>=128);){e:{if(1!=h[h[i+20>>2]+4>>2]){if(!g[h[i+16>>2]+(h[i+20>>2]+8|0)|0])break e}else if(h[i+12>>2]=h[h[i+44>>2]+32>>2]+((h[i+20>>2]-h[h[i+44>>2]+24>>2]|0)/140<<9),!h[h[i+12>>2]+(h[i+16>>2]<<2)>>2])break e;_[h[i+28>>2]>>2]>=_[h[i+32>>2]+(h[i+16>>2]<<2)>>2]&&h[h[i+32>>2]+(h[i+16>>2]<<2)>>2]||(h[h[i+32>>2]+(h[i+16>>2]<<2)>>2]=h[h[i+28>>2]>>2])}h[i+16>>2]=h[i+16>>2]+1}h[i+28>>2]=h[h[i+28>>2]+4>>2]}}function a(e,t){var n=0,r=0,i=0,o=0;h[e+16>>2]=0,h[e+20>>2]=0,i=e,n=0,(r=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(r=m(r))&31)&1)-(r<<1)|0)|0)),h[i+28>>2]=n,i=1048848+(n<<2)|0;e:{t:{n:{r:{if((o=h[262145])&(r=1<<(31&n))){if(r=h[i>>2],(-8&h[r+4>>2])!=(0|t))break r;n=r;break n}h[262145]=r|o,h[i>>2]=e,h[e+24>>2]=i;break e}for(i=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=h[(o=16+((i>>>29&4)+r|0)|0)>>2]))break t;if(i<<=1,r=n,(-8&h[n+4>>2])==(0|t))break}}return t=h[n+8>>2],h[t+12>>2]=e,h[n+8>>2]=e,h[e+24>>2]=0,h[e+12>>2]=n,void(h[e+8>>2]=t)}h[o>>2]=e,h[e+24>>2]=r}h[e+12>>2]=e,h[e+8>>2]=e}function s(e){var t,n=0,r=0,i=0,o=0,a=0,s=0;t=h[e+24>>2];e:{t:{if((0|e)==(0|(n=h[e+12>>2]))){if(i=h[(n=e+20|0)>>2],r=h[(i?20:16)+e>>2])break t;n=0;break e}r=h[e+8>>2],h[r+12>>2]=n,h[n+8>>2]=r;break e}for(i=i?n:e+16|0;o=i,(r=h[(i=(n=r)+20|0)>>2])||(i=n+16|0,r=h[n+16>>2]),r;);h[o>>2]=0}e:if(t){r=1048848+(h[e+28>>2]<<2)|0;t:{if((0|e)==h[r>>2]){if(h[r>>2]=n,n)break t;return a=1048580,s=h[262145]&d(h[e+28>>2]),void(h[a>>2]=s)}if(h[(h[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}h[n+24>>2]=t,(r=h[e+16>>2])&&(h[n+16>>2]=r,h[r+24>>2]=n),(e=h[e+20>>2])&&(h[n+20>>2]=e,h[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,r=0,i=0,o=0,c=0,u=0,p=0,g=0,v=0,y=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(i=-8&(e=e+11|0),!(p=h[262145]))break n;n=0-i|0,u=0,(e>>>=8)&&(u=31,i>>>0>16777215||(u=62+((i>>>(6-(e=m(e))&31)&1)-(e<<1)|0)|0));r:{i:{if(e=h[1048848+(u<<2)>>2]){for(o=i<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((c=-8&h[e+4>>2])>>>0<i>>>0||(c=c-i|0)>>>0>=n>>>0||(r=e,n=c))){n=0;break i}if(c=h[e+20>>2],e=h[16+((o>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,o<<=1,!e)break}if(t){e=t;break i}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&u))|e)&p))break n;if(!(e=h[1048848+(l(e&0-e)<<2)>>2]))break n}for(;r=(c=(o=(t=-8&h[e+4>>2])-i|0)>>>0<n>>>0&t>>>0>=i>>>0)?e:r,n=c?o:n,e=(t=h[e+16>>2])||h[e+20>>2];);if(!r)break n}if(n>>>0>=(e=h[262244])-i>>>0&&e>>>0>=i>>>0)break n;s(r);r:if(n>>>0>=16){if(h[r+4>>2]=3|i,h[4+(t=r+i|0)>>2]=1|n,h[t+n>>2]=n,n>>>0>=256){a(t,n);break r}e=1048584+((n>>>=3)<<3)|0,o=h[262144],n=1<<(31&n),u=h[e+8>>2],o&n||(h[262144]=n|o,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n}else e=n+i|0,h[r+4>>2]=3|e,h[4+(e=e+r|0)>>2]=1|h[e+4>>2];return r+8|0}r:{i:{if(!(3&(e=(t=h[262144])>>>(r=31&(n=(i=e>>>0<11?16:e+11&-8)>>>3))))){if(i>>>0<=_[262244])break n;if(e)break i;if(!(e=h[262145]))break n;for(t=h[1048848+(l(e&0-e)<<2)>>2],n=(-8&h[t+4>>2])-i|0,o=t;;){if(!(e=h[t+16>>2])&&!(e=h[t+20>>2]))break r;n=(t=(r=(-8&h[e+4>>2])-i|0)>>>0<n>>>0)?r:n,o=t?e:o,t=e}}n=(e=h[1048592+(c=(r=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(o=h[e+8>>2]))==(0|(c=c+1048584|0))?(v=1048576,y=d(r)&t,h[v>>2]=y):(h[o+12>>2]=c,h[c+8>>2]=o),t=r<<3,h[e+4>>2]=3|t,h[4+(e=e+t|0)>>2]=1|h[e+4>>2];break t}return r=l(0-(e=(n=e<<r)&(0-(e=2<<r)|e))&e),e=h[1048592+(o=r<<3)>>2],(0|(n=h[e+8>>2]))==(0|(o=o+1048584|0))?(v=1048576,y=d(r)&t,h[v>>2]=y):(h[n+12>>2]=o,h[o+8>>2]=n),o=e+8|0,h[e+4>>2]=3|i,n=(t=r<<3)-i|0,h[4+(c=e+i|0)>>2]=1|n,h[e+t>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n,o}return s(o),n>>>0>=16?(h[o+4>>2]=3|i,h[4+(c=i+o|0)>>2]=1|n,h[n+c>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],i=h[262144],r=1<<(31&r),u=h[e+8>>2],i&r||(h[262144]=r|i,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n):(e=n+i|0,h[o+4>>2]=3|e,h[4+(e=e+o|0)>>2]=1|h[e+4>>2]),o+8|0}n:{r:{i:{o:{if((t=h[262244])>>>0<i>>>0){if((e=h[262245])>>>0>i>>>0)break e;if(n=0,-1==(0|(t=f((e=i+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(o=-65536&e)+h[262248]|0,h[262248]=e,t=h[262249],h[262249]=t>>>0>e>>>0?t:e,!(n=h[262247]))break o;for(e=1049e3;;){if((0|r)==((t=h[e>>2])+(c=h[e+4>>2])|0))break i;if(!(e=h[e+8>>2]))break}break r}return e=h[262246],(r=t-i|0)>>>0<=15?(h[262246]=0,h[262244]=0,h[e+4>>2]=3|t,i=4+(t=e+t|0)|0,n=1|h[t+4>>2]):(h[262244]=r,n=e+i|0,h[262246]=n,h[n+4>>2]=1|r,h[e+t>>2]=r,n=3|i,i=e+4|0),h[i>>2]=n,e+8|0}for((e=h[262255])>>>0<=r>>>0&&e||(h[262255]=r),e=0,h[262256]=4095,h[262251]=o,h[262250]=r,h[262253]=0;t=e+1048584|0,h[e+1048592>>2]=t,h[e+1048596>>2]=t,256!=(0|(e=e+8|0)););h[262247]=r,e=o+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}if(!(h[e+12>>2]|r>>>0<=n>>>0|t>>>0>n>>>0)){h[e+4>>2]=o+c,t=(e=h[262247])+15&-8,h[262247]=t+-8,n=8+((r=o+h[262245]|0)+(e-t|0)|0)|0,h[262245]=n,h[t+-4>>2]=1|n,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}}e=h[262255],h[262255]=e>>>0<r>>>0?e:r,t=r+o|0,e=1049e3;r:{for(;;){if((0|t)!=h[e>>2]){if(e=h[e+8>>2])continue;break r}break}if(!h[e+12>>2]){h[e>>2]=r,h[e+4>>2]=o+h[e+4>>2],h[r+4>>2]=3|i,o=r+i|0,i=(t-r|0)-i|0;i:{o:{if((0|t)!=h[262247]){if(h[262246]==(0|t))break o;if(1==(3&(e=h[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=h[t+12>>2]))==(0|(u=h[t+8>>2]))?(v=1048576,y=h[262144]&d(e>>>3),h[v>>2]=y):(h[u+12>>2]=c,h[c+8>>2]=u),i=n+i|0,t=t+n|0),h[t+4>>2]=-2&h[t+4>>2],h[o+4>>2]=1|i,h[i+o>>2]=i,i>>>0>=256){a(o,i);break i}e=1048584+((t=i>>>3)<<3)|0,n=h[262144],t=1<<(31&t),u=h[e+8>>2],n&t||(h[262144]=t|n,u=e),n=u,h[e+8>>2]=o,h[n+12>>2]=o,h[o+12>>2]=e,h[o+8>>2]=n;break i}h[262247]=o,e=h[262245]+i|0,h[262245]=e,h[o+4>>2]=1|e;break i}h[262246]=o,e=h[262244]+i|0,h[262244]=e,h[o+4>>2]=1|e,h[e+o>>2]=e}return r+8|0}}for(e=1049e3;!((t=h[e>>2])>>>0<=n>>>0&&(c=t+h[e+4>>2]|0)>>>0>n>>>0);)e=h[e+8>>2];for(h[262247]=r,e=o+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152,h[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=h[262250],u=h[262251],g=h[262253],h[(p=t+16|0)>>2]=h[262252],h[p+4>>2]=g,h[t+8>>2]=e,h[t+12>>2]=u,h[262251]=o,h[262250]=r,h[262252]=t+8,h[262253]=0,e=t+28|0;h[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(h[t+4>>2]=-2&h[t+4>>2],e=t-n|0,h[n+4>>2]=1|e,h[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,r=h[262144],t=1<<(31&t),u=h[e+8>>2],r&t||(h[262144]=t|r,u=e),t=u,h[e+8>>2]=n,h[t+12>>2]=n,h[n+12>>2]=e,h[n+8>>2]=t))}if(n=0,!((e=h[262245])>>>0<=i>>>0))break e}return n}return t=e-i|0,h[262245]=t,r=(e=h[262247])+i|0,h[262247]=r,h[r+4>>2]=1|t,h[e+4>>2]=3|i,e+8|0}(e))|!(3&g[t+-4|0])||function(e,t){if(t)for(;p[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(y(e|=0,t|=0))}function u(){}function l(e){return e?31-m(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function f(t){t|=0;var r=0|n.byteLength/65536,i=r+t|0;if(r<i&&i<65536){var o=new ArrayBuffer(y(i,65536)),a=new e.Int8Array(o);a.set(p),p=a,p=new e.Int8Array(o),new e.Int16Array(o),h=new e.Int32Array(o),g=new e.Uint8Array(o),v=new e.Uint16Array(o),_=new e.Uint32Array(o),new e.Float32Array(o),new e.Float64Array(o),n=o}return r}var p=new e.Int8Array(n),h=(new e.Int16Array(n),new e.Int32Array(n)),g=new e.Uint8Array(n),v=new e.Uint16Array(n),_=new e.Uint32Array(n),y=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),m=(e.Math.fround,e.Math.abs,e.Math.clz32),b=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:f},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var r,i,o;return b=r=b-32|0,h[r+28>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,e=r,t=h[r+28>>2]?h[r+28>>2]:256,h[e+28>>2]=t,e=r,t=h[r+24>>2]?h[r+24>>2]:256,h[e+24>>2]=t,e=r,t=h[r+20>>2]?h[r+20>>2]:256,h[e+20>>2]=t,i=r,o=c(((((((y(h[r+24>>2],140)+52|0)+y(h[r+20>>2],44)|0)+(h[r+24>>2]<<9)|0)+(h[r+24>>2]<<9)|0)+y(h[r+20>>2],h[r+24>>2]<<3)|0)+(h[r+28>>2]<<1)|0)+(h[r+28>>2]<<3)|0,1),h[i+16>>2]=o,h[h[r+16>>2]+12>>2]=h[r+28>>2],h[h[r+16>>2]+16>>2]=h[r+24>>2],h[h[r+16>>2]+20>>2]=h[r+20>>2],h[h[r+16>>2]+4>>2]=0,h[h[r+16>>2]>>2]=0,h[h[r+16>>2]+8>>2]=0,h[r+12>>2]=h[r+16>>2]+52,h[h[r+16>>2]+24>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+y(h[r+24>>2],140),h[h[r+16>>2]+28>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+y(h[r+20>>2],44),h[h[r+16>>2]+32>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+36>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+40>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+y(h[r+20>>2],h[r+24>>2]<<3),h[h[r+16>>2]+44>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+28>>2]<<1),h[h[r+16>>2]+48>>2]=h[r+12>>2],b=r+32|0,h[r+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;b=t=b-16|0,h[t+12>>2]=e,r(h[t+12>>2]),b=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,r;return h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,t=h[h[n+12>>2]+24>>2],r=h[n+12>>2],e=h[r+4>>2],h[r+4>>2]=e+1,h[n+4>>2]=t+y(e,140),h[h[n+4>>2]+4>>2]=h[n+8>>2]?1:0,h[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-1,p[h[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-2,p[h[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;h[12+(n=b-16|0)>>2]=e,h[n+8>>2]=t,p[h[n+8>>2]+(h[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var r;for(h[12+(r=b-16|0)>>2]=e,h[r+8>>2]=t,h[r+4>>2]=n,h[r>>2]=h[r+8>>2];!(h[r>>2]>h[r+4>>2]);)p[h[r>>2]+(h[r+12>>2]+8|0)|0]=1,h[r>>2]=h[r>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(h[12+(t=b-16|0)>>2]=e,h[t+8>>2]=1;!(h[t+8>>2]>=127);)p[h[t+8>>2]+(h[t+12>>2]+8|0)|0]=1&(0!=g[h[t+8>>2]+(h[t+12>>2]+8|0)|0]^-1),h[t+8>>2]=h[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,r,i,o,a,s,c,u,l,d){return 0|function(e,t,n,r,i,o,a,s,c,u,l,d){var f;return b=f=b+-64|0,h[f+60>>2]=e,h[f+56>>2]=t,h[f+52>>2]=n,h[f+48>>2]=r,h[f+44>>2]=i,h[f+40>>2]=o,h[f+36>>2]=a,h[f+32>>2]=s,h[f+28>>2]=c,h[f+24>>2]=u,h[f+20>>2]=l,h[f+16>>2]=d,t=h[h[f+60>>2]+28>>2],n=h[f+60>>2],e=h[n>>2],h[n>>2]=e+1,h[f+12>>2]=t+y(e,44),h[h[f+12>>2]>>2]=h[f+52>>2],h[h[f+12>>2]+4>>2]=h[f+48>>2],h[f+48>>2]>0&&(h[h[f+12>>2]+8>>2]=h[f+44>>2]),h[f+48>>2]>1&&(h[h[f+12>>2]+12>>2]=h[f+40>>2]),h[f+48>>2]>2&&(h[h[f+12>>2]+16>>2]=h[f+36>>2]),h[f+48>>2]>3&&(h[h[f+12>>2]+20>>2]=h[f+32>>2]),h[f+48>>2]>4&&(h[h[f+12>>2]+24>>2]=h[f+28>>2]),h[f+48>>2]>5&&(h[h[f+12>>2]+28>>2]=h[f+24>>2]),h[f+48>>2]>6&&(h[h[f+12>>2]+32>>2]=h[f+20>>2]),h[f+48>>2]>7&&(h[h[f+12>>2]+36>>2]=h[f+16>>2]),h[h[f+12>>2]+40>>2]=h[f+56>>2],h[f+48>>2]>0&&function(e,t,n){var r;h[28+(r=b-32|0)>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,h[r+16>>2]=(h[r+20>>2]-h[h[r+28>>2]+24>>2]|0)/140,1==h[h[r+20>>2]+4>>2]&&(t=h[h[r+28>>2]+40>>2],n=h[r+28>>2],e=h[n+8>>2],h[n+8>>2]=e+1,h[r+12>>2]=t+(e<<3),h[h[r+12>>2]>>2]=h[r+24>>2],h[h[r+12>>2]+4>>2]=h[h[r+20>>2]+136>>2],h[h[r+20>>2]+136>>2]=h[r+12>>2])}(h[f+60>>2],h[f+12>>2],h[f+52>>2]),b=f- -64|0,h[f+12>>2]}(e|=0,t|=0,n|=0,r|=0,i|=0,o|=0,a|=0,s|=0,c|=0,u|=0,l|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(b=t=b-32|0,h[t+28>>2]=e,h[t+24>>2]=0;!(h[t+24>>2]>=h[h[t+28>>2]+4>>2]);)h[t+20>>2]=h[h[t+28>>2]+24>>2]+y(h[t+24>>2],140),1==h[h[t+20>>2]+4>>2]&&i(h[t+28>>2],h[t+20>>2],h[t+20>>2],h[h[t+28>>2]+32>>2]+(h[t+24>>2]<<9)|0,0),h[t+24>>2]=h[t+24>>2]+1;for(h[t+16>>2]=0;!(h[t+16>>2]>=h[h[t+28>>2]+4>>2]);)h[t+12>>2]=h[h[t+28>>2]+24>>2]+y(h[t+16>>2],140),1==h[h[t+12>>2]+4>>2]&&(h[h[t+12>>2]>>2]=0,o(h[t+28>>2],h[t+12>>2],h[t+12>>2],h[h[t+28>>2]+36>>2]+(h[t+16>>2]<<9)|0)),h[t+16>>2]=h[t+16>>2]+1;b=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,r,i;return b=n=b-32|0,h[n+24>>2]=e,h[n+20>>2]=t,h[n+16>>2]=0,h[n+12>>2]=0,r=n,i=function e(t,n,r,i,o,a,s){var c,u=0,l=0;b=c=b-96|0,h[c+88>>2]=t,h[c+84>>2]=n,h[c+80>>2]=r,h[c+76>>2]=i,h[c+72>>2]=o,h[c+68>>2]=a,h[c+64>>2]=s,h[c+60>>2]=v[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1);e:if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0))h[c+92>>2]=-1;else if(1==h[h[c+84>>2]+4>>2])if(h[c+56>>2]=h[h[c+76>>2]>>2],h[c+52>>2]=h[h[c+72>>2]>>2],h[c+48>>2]=0,h[c+44>>2]=0,h[c+40>>2]=h[h[c+88>>2]+32>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+36>>2]=0,!h[h[c+40>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+40>>2]+508>>2]?h[h[c+40>>2]>>2]&&(h[c+36>>2]=h[h[c+40>>2]>>2]):h[c+36>>2]=h[h[c+40>>2]+508>>2]:h[c+36>>2]=h[h[c+40>>2]+(h[c+60>>2]<<2)>>2],h[c+36>>2]){for(h[c+68>>2]||h[h[c+36>>2]+40>>2]||(h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2),h[c+32>>2]=0;h[c+32>>2]<h[h[c+36>>2]+4>>2];){if(h[c+28>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+36>>2]+40>>2]|h[h[c+36>>2]+40>>2]==(h[c+32>>2]+65536|0)||(h[c+28>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+36>>2]+8|0)+(h[c+32>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+28>>2],h[c+64>>2]),h[u+24>>2]=l,h[c+24>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+36>>2]+40>>2]!=(h[c+32>>2]+65536|0)||(h[c+44>>2]=h[c+24>>2]),h[c+32>>2]=h[c+32>>2]+1}for(h[c+68>>2]||(h[h[c+36>>2]+40>>2]?1==h[h[c+36>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+36>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+36>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1));;){if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0)){h[c+92>>2]=-1;break e}if(h[c+20>>2]=h[h[c+88>>2]+36>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+16>>2]=0,h[c+60>>2]=v[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1),!h[h[c+20>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+20>>2]+508>>2]||(h[c+16>>2]=h[h[c+20>>2]+508>>2]):h[c+16>>2]=h[h[c+20>>2]+(h[c+60>>2]<<2)>>2],!h[c+16>>2])break;for(h[c+68>>2]||(h[h[c+16>>2]+40>>2]?65536!=h[h[c+16>>2]+40>>2]&&(h[h[c+72>>2]>>2]=h[c+52>>2]):(h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]=(0-h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]|0)-1,h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2)),h[c+12>>2]=1;h[c+12>>2]<h[h[c+16>>2]+4>>2];){if(h[c+8>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+16>>2]+40>>2]|h[h[c+16>>2]+40>>2]==(h[c+12>>2]+65536|0)||(h[c+8>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+16>>2]+8|0)+(h[c+12>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+8>>2],h[c+64>>2]),h[u+4>>2]=l,h[c+4>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+16>>2]+40>>2]!=(h[c+12>>2]+65536|0)||(h[c+44>>2]=h[c+4>>2]),h[c+12>>2]=h[c+12>>2]+1}h[c+68>>2]||(h[h[c+16>>2]+40>>2]?1==h[h[c+16>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+16>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+16>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1))}h[c+92>>2]=h[c+44>>2]}else h[c+92>>2]=-1;else{if(h[c+60>>2]&&(-1==h[h[c+84>>2]+4>>2]&&(t=h[c+76>>2],h[t>>2]=h[t>>2]+1),!h[h[c+84>>2]+4>>2])){if(!g[h[c+60>>2]+(h[c+84>>2]+8|0)|0]){h[c+92>>2]=-1;break e}t=h[c+76>>2],h[t>>2]=h[t>>2]+1}h[c+68>>2]||(n=h[h[c+76>>2]>>2],r=h[h[c+84>>2]+4>>2],i=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[i+(t<<2)>>2]=n-(-2==(0|r)?0:1),n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[r+(t<<2)>>2]=n),h[c+92>>2]=h[h[c+72>>2]>>2]-1}return b=c+96|0,h[c+92>>2]}(h[n+24>>2],h[n+20>>2],h[h[n+24>>2]+44>>2],n+12|0,n+16|0,0,h[h[n+24>>2]+12>>2]<<1),h[r+8>>2]=i,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=-1,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=0,v[h[h[n+24>>2]+44>>2]+(h[n+12>>2]<<1)>>1]|h[n+8>>2]<0?h[n+28>>2]=h[n+12>>2]+1:h[n+28>>2]=0,b=n+32|0,h[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,h[12+(t=b-16|0)>>2]=e,h[h[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),o=i.memory,a=i.rust_calloc,s=i.rust_free,c=i.llparser_create,u=i.llparser_destroy,l=i.llparser_create_descriptor,d=i.llparser_descriptor_set_all,f=i.llparser_descriptor_set_nil,p=i.llparser_descriptor_add_char,h=i.llparser_descriptor_add_range,g=i.llparser_descriptor_revert,v=i.llparser_add_rule,_=i.llparser_prepare,y=i.llparser_parse,m=i.llparser_get_input_buffer,b=i.llparser_get_result,w=i.wasm_main,O=i.__wbindgen_start}])},function(e,t,n){var r=n(4),i=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};i.create=function(e){return new i(e)},i.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},i.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var r=t[n].func;if(r===e)return t.splice(n,1),this.empty=!t.length,r}else for(n=0;n<t.length;n++)if(t[n].id===e){var i=t[n].func;return t.splice(n,1),this.empty=!t.length,i}return null},i.prototype.call=function(e,t,n){for(var r=this._arr,i=!1,o=0;o<r.length;o++){!1===a(this._type,r[o].func,e,t,n)&&(i=!0)}if(i)return!1};var o=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},a=i.safeCallback=function(e,t,n,r,i){try{return t.apply(n,r)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),i&&i.triggerLifeTime("error",[s]),o(s,{message:a,type:e,element:n,method:t,args:r})}},s=i.create();i.addGlobalErrorListener=function(e){return s.add(e)},i.removeGlobalErrorListener=function(e){return s.remove(e)};var c=null;i.addGlobalWarningListener=function(e){return(c=i.create()).add(e)},i.removeGlobalWarningListener=function(e){if(c){var t=c.remove(e);return c.empty&&(c=null),t}return null},i.hasGlobalWarningListeners=function(){return!!c},i.triggerWarning=function(e){var t="[Exparser] [Warning] [Component] "+e;c.call(null,[t],null)},e.exports=i},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document),customContext:null};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=function(e,t){var i=typeof e;if("object"===i&&null!==e){var o=t?t.get(e):void 0;if(void 0!==o)return o;if(e instanceof Array){o=[],t&&t.set(e,o);for(var a=0;a<e.length;a++)o[a]=r(e[a],t)}else for(var s in o={},t&&t.set(e,o),e)n.call(e,s)&&(o[s]=r(e[s],t));return o}if("symbol"!==i)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,n)}},function(e,t,n){var r=n(3),i=(Object.prototype.hasOwnProperty,function(){});i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}});var o=null;i._setElementSystem=function(e){o=e,i._setElementSystem=null};var a=null;i._setComponent=function(e){a=e,i._setComponent=null};var s=Date.now();i.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},i.getInitTimeStamp=function(e){return s},i.create=function(e,t,n){var r=(n=n||{}).originalEvent,o=n.extraFields||{},a=Date.now()-s,c=new i;for(var u in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=r,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,o)c[u]=o[u];return c},i.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.__stopped=!0},i.prototype.isStopped=function(){return!!this.__stopped},i.prototype.markMutated=function(){this.__mutatedMarked=!0},i.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,r){for(var i=e,a=e instanceof o?e.collectMarks():{},s=[],c=[],u=e;u;){if(i!==u&&(s.push(e),e=u,c.push(a),a=e instanceof o?e.collectMarks():{}),i=u.parentNode,!1===r(u,e,a))return;if(u.__wxHost){if(n)break;e=s.pop()||u.__wxHost,a=c.pop()||(e instanceof o?e.collectMarks():{}),i=u=u.__wxHost}else{var l=!0;u instanceof o&&(l=!1),u=l||n?u.parentNode:u.__wxSlotParent}}};i.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof o&&(e=e.shadowRoot)),t.target=e instanceof o?e.__methodCaller:e;var n=function(e,n,r){if(!(n&&n.length&&t.mutatedMarked())){var i=t.currentTarget=r instanceof o?r.__methodCaller:r,s=e.call(i,[t],r instanceof a?r:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,i=!t.composed;if(t.__hasCapture){var s=[];c(e,0,i,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,n]),!0}));for(var u=s.length-1;u>=0;u--){var l=s[u],d=l[0],f=l[1];t.target=f instanceof o?f.__methodCaller:f,t.mark=l[2];var p=d.__wxCaptureMutated&&d.__wxCaptureMutated[r];if(n(d.__wxCaptureEvents[r],p,d),t.__stopped)break}}if(t.target=e instanceof o?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;c(e,0,i,(function(e,i,a){t.target=i instanceof o?i.__methodCaller:i,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&n(e.__wxEvents[r],s,e),!h&&!t.__stopped}))}}},i.triggerEvent=function(e,t,n,r){var o=i.create(t,n,r);i.dispatchEvent(e,o)},i.addListenerToElement=function(e,t,n,i){var o=i&&i.mutated;if(o){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return i&&(i.useCapture||i.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),o&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),c=e.__wxEvents[t].add(n),o&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,i]),c},i.removeListenerFromElement=function(e,t,n,r){var i=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(i=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(o=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(o,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(i=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var o;-1!==(o=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(o,1)}i&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,i,r])},e.exports=i},function(e,t,n){var r=n(1),i=" \n\r\t\f",o=null;t.parseMultiPaths=function(e){return o||(o=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",i]}],VAR_NAME:[{id:"_blank",states:[i,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",i]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[i,"INT"]},{id:"_jump",states:["INT",i]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),o.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],r="",i=0,o=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,o=!1}else if("]"===c){if(!o)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(i),i=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);o=!0,i=10*i+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var r=n(3),i=n(4),o=n(7),a=["created","ready","cacheAttached","attached","moved","detached","route","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},u=o.parseMultiPaths,l=function(){};l.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(null===t||t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0};var d=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t},f=function(e){var t={};for(var n in e)t[n]=e[n];return t},p=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?(r.hasGlobalWarningListeners()&&"_"===n.charAt(0)&&r.triggerWarning('data field "'+n+'" from different behaviors is overriding or merging.'),"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=d(e[n]):e[n]=f(e[n]),p(e[n],t[n]))):e[n]=t[n]};l.create=function(e){var t=new l;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:i.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:i.lazyRegistration)||l.prepare(t),e.is&&(l._list[e.is]=t),t},l.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,i="",o=0;for(o=0;o<(t.behaviors||[]).length;o++){var d=t.behaviors[o],f=d;for(i in"string"==typeof f&&(f=l._list[d],r.hasGlobalWarningListeners()&&(f instanceof l||r.triggerWarning('behavior "'+d+'" is not found (when preparing behavior "'+e.is+'").'))),f._unprepared&&l.prepare(f),"object"==typeof f.data&&(null===e.data?e.data=f.data:p(e.data,f.data)),f.generics){var h=f.generics[i];"object"!=typeof h&&(h={}),e.generics[i]={default:h.default}}for(i in f.properties)r.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&void 0!==e.properties[i]&&r.triggerWarning('property "'+i+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.properties[i]=f.properties[i];for(i in f.relations)e.relations[i]=f.relations[i];for(i in f.methods)r.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&e.methods[i]&&r.triggerWarning('method "'+i+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[i]=f.methods[i];for(var g=0;g<f.ancestors.length;g++)n.indexOf(f.ancestors[g])<0&&n.push(f.ancestors[g])}for(i in"object"==typeof t.data&&(null===e.data?e.data=t.data:p(e.data,t.data)),t.properties){r.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&void 0!==e.properties[i]&&r.triggerWarning('property "'+i+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").');var v=t.properties[i];s.indexOf(v)>=0?v={type:v}:s.indexOf(v.type)<0&&v.optionalTypes&&v.optionalTypes.length>0&&(v.type=v.optionalTypes[0]),r.hasGlobalWarningListeners()&&s.indexOf(v.type)<0&&r.triggerWarning('the type of property "'+i+'" is illegal (when preparing behavior "'+e.is+'").'),void 0===v.value&&(v.type===String?v.value="":v.type===Number?v.value=0:v.type===Boolean?v.value=!1:v.type===Array?v.value=[]:v.value=null),e.properties[i]={type:v.type,optionalTypes:v.optionalTypes,value:v.value,filter:v.filter,observer:v.observer,public:!!(void 0===v.public?e.options.publicProperties:v.public),availability:v.availability,observeAssignments:!!v.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(i in t.lifetimes)e.lifetimes[i]=t.lifetimes[i];for(o=0;o<a.length;o++)void 0===e.lifetimes[a[o]]&&(e.lifetimes[a[o]]=t[a[o]]);for(i in t.listeners)e.listeners[i]=t.listeners[i];var _=t.observers;if(_ instanceof Array)for(o=0;o<_.length;o++){var y=_[o];e.observers.push({paths:u(y.fields||"**"),observer:y.observer})}else for(i in _)e.observers.push({paths:u(i),observer:_[i]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(i in t.pageLifetimes)e.pageLifetimes[i]=t.pageLifetimes[i];for(i in t.relations){var m=t.relations[i];e.relations[i]={target:m.target||i,type:m.type,linked:m.linked||c,linkChanged:m.linkChanged||c,unlinked:m.unlinked||c,linkFailed:m.linkFailed||c}}for(i in t.methods)"function"==typeof t.methods[i]&&(r.hasGlobalWarningListeners()&&"_"===i.charAt(0)&&e.methods[i]&&r.triggerWarning('method "'+i+'" from different behaviors is overriding (when preparing behavior "'+e.is+'").'),e.methods[i]=t.methods[i]);n.push(e)}},l._list=Object.create(null),l.prototype.hasBehavior=function(e){this._unprepared&&l.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof l){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===l._list[e])return!0;return!1},l.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=this.ancestors[n];for(var i in r.listeners)Object.prototype.hasOwnProperty.call(e,i)?e[i].push(r.listeners[i]):e[i]=[r.listeners[i]]}return e},l.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var r=this.ancestors[n].observers,i=0;i<r.length;i++){var o=r[i];e.addObserver(o.observer,o.paths)}},l.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var i=t[n];for(var o in i.lifetimes)i.lifetimes[o]&&(e[o]||(e[o]=r.create("Lifetime Method")),e[o].add(i.lifetimes[o]))}return e},l.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var i=t[n];for(var o in i.pageLifetimes)i.pageLifetimes[o]&&(e[o]||(e[o]=r.create("Page Lifetime Method")),e[o].add(i.pageLifetimes[o]))}return e},l.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?l._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=l},function(e,t,n){var r=n(3),i=n(6),o=n(10),a=n(11),s=n(12),c=n(14),u=n(4),l=n(13),d=function(e){f(this,e||null)};d.prototype=Object.create(Object.prototype,{constructor:{value:d,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&("dom"===u.documentBackend?this.__domElement.id=t:"custom"===u.documentBackend&&this.__domElement.setId(t))}u.writeExtraInfoToAttr&&this.__domElement&&"dom"===u.documentBackend&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){if(e=String(e),this.__slot!==e){if(this.__inheritSlots)return void(r.hasGlobalWarningListeners()&&r.triggerWarning('slots-inherited nodes do not support "slot" attribute.'));this.__slot=e,w(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})}},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return k.call(this,e)},configurable:!0}}),i._setElementSystem(d),a._setElementSystem(d);var f=d.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=t,e.__autoDestroy=!0,e.$$=t,t&&(t.__wxElement=e)};d._clone=function(e,t,n,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var i in t.__marks)e.__marks[i]=t.__marks[i];for(var o in e.__attributes=Object.create(null),t.__attributes)e.__attributes[o]=t.__attributes[o];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=l.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)},d.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},d.prototype.destroy=function(){"custom"!==u.documentBackend||this.__virtual||(this.__domElement.release(),this.__domElement=null)};var p=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof d){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof d&&t(e.shadowRoot);for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r])}};t(e)}},h=function(e){if(e.__attached){var t=function(e){if(e instanceof d){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__attached=!1,e.__autoDestroy&&e.destroy(),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}else e.__autoDestroy&&e.destroy()};t(e)}},g=function(e){if(!e.__attached)return p(e);var t=function(e){if(e instanceof d){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof d&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},v=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,i=[n];r="add"===t?{type:"childList",target:e,addedNodes:i}:"remove"===t?{type:"childList",target:e,removedNodes:i}:{type:"childList",target:e,addedNodes:i,removedNodes:i},o._callObservers(e,"__childObservers",r)}},_=function(e,t){if(e instanceof d&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,i=0;i<r.length;i++){var o=r[i];o instanceof d&&n(o)}};n(e)}};d._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),r=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,i=0;i<t.length;i++)t[i]instanceof d&&r(t[i])};r(t)}};var y=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,i=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var o=function(e){void 0!==e.__slotName&&(i[e.__slotName]?r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+e.__slotName+'" duplication is found under a single shadow root. The first one was accepted.'):i[e.__slotName]=e);for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof d&&o(t[n])};o(e),void 0!==n.__singleSlot?n.__singleSlot!==i[""]&&(i[""]&&(i[""].__wxSlotChildren=n.childNodes),m(n,i,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=i[""]||null):(m(n,i,t,!1),n.__slots=i)}},m=function(e,t,n,r){var i=e.childNodes,o=0;if(r){var a=t[""];if(a)for(;o<i.length;o++)O(a,i[o],null,!1,!1,!1,-1);else if(a=n[""])for(;o<i.length;o++)O(a,null,i[o],!0,!1,!1,o)}else{var s=function(e){for(var r=0;r<e.length;r++){var i=e[r],o=i.__slot||"",a=t[o];a?O(a,i,null,!1,!0,!0):(a=n[o])&&O(a,null,i,!0,!0,!0),i.__inheritSlots&&s(i.childNodes)}};s(i)}},b=function(e,t,n,r){for(var i=function(e,t,r){var o=e.childNodes,a=0;for(t&&(a=o.indexOf(t)+(r?0:1));a<o.length;a++){var s=o[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=i(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var o=i(t.parentNode,t,r);if(o)return o;r=!1}return null},w=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",i=t.__slots[n];if(i){var o=b(t,e,n,!1);O(i,e,o,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+n+'" is not found.'),(i=e.__wxSlotParent)&&O(i,null,e,!0,!0,!0)}},O=function(e,t,n,r,i,o,a){if(r&&(n.__wxSlotParent=null),i&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&o){var c=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(c,1),s===e&&c<a&&a--}}var l=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(l=!0),"dom"===u.documentBackend?l||function(e,t,n,r,i){var o=e;if(o instanceof d){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(o);n=a.__wxSlotChildren[s+1]}o=a}o instanceof d&&(o=o.__domElement)}if(o){var c=r,u=null,l=null;if(t)if(t.__virtual){var f=document.createDocumentFragment(),p=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?p(n):f.appendChild(n.__domElement)}};p(t),u=f}else u=t.__domElement;if(n)if(n.__virtual){var h=e,g=0;if(r){var v=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?v(n):o.removeChild(n.__domElement)}};v(n),c=!1,g=i+1}else h=n.__wxSlotParent,g=n===t?i:h.__wxSlotChildren.indexOf(n);if(t){var _=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=_(n,0);if(r)return r}};n=null;for(var y=h;!(n=_(y,g))&&y.__virtual;y=y.__wxSlotParent)g=y.__wxSlotParent.__wxSlotChildren.indexOf(y)+1;n&&(l=n.__domElement)}}else l=n.__domElement;c?u?o.replaceChild(u,l):o.removeChild(l):u&&(l?o.insertBefore(u,l):o.appendChild(u))}else if(t&&t.__wxSlotParent){var m=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)m(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};m(t)}}(e,t,n,r,a):"custom"===u.documentBackend&&function(e,t,n,r,i){var o=e;if(o instanceof d){for(;o.__virtual;){var a=o.__wxSlotParent;if(!a){o=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(o);n=a.__wxSlotChildren[s+1]}o=a}o instanceof d&&(o=o.__domElement)}if(o)if(!t||n||t.__virtual){var c=u.customContext.createElement("fragment",""),l=0,f=-1;if(t){var p=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];p(n)}else c.appendChild(e.__domElement)};p(t)}if(n){var h=e,g=0,v=null;if(r){var _=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=_(e.__wxSlotChildren[n]);return t}return v||(v=e),1};l=_(n),g=i+1}else h=n.__wxSlotParent,g=n===t?i:h.__wxSlotChildren.indexOf(n);if(t&&!v)for(var y=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=y(n,0);if(r)return r}return null},m=h;!(v=y(m,g))&&m.__virtual;m=m.__wxSlotParent)g=m.__wxSlotParent.__wxSlotChildren.indexOf(m)+1;v&&(f=o.findChildPosition(v.__domElement))}o.splice(f,l,c),c.release()}else o.appendChild(t.__domElement);else if(t&&t.__wxSlotParent){for(var b=t.__wxSlotParent;b.__virtual&&(b=b.__wxSlotParent););if(b){var w=null,O=function(e){if(e.__virtual){for(var t=0,n=0;n<e.__wxSlotChildren.length;n++)t+=O(e.__wxSlotChildren[n]);return t}return w||(w=e),1};b.__domElement.splice(b.__domElement.findChildPosition(w.__domElement),O(t),null)}}}(e,t,n,r,a),u.writeExtraInfoToAttr&&"dom"===u.documentBackend&&(r&&n instanceof d&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof d&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),i&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,r?1:0,t):e.__wxSlotChildren.splice(a,r?1:0))},E=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var i=n[r];t(e,i),i.__inheritSlots&&E(i,t)}},S=d.insertChildToElement=function(e,t,n,i){if(void 0!==e.__slotName)return!1;var a=n>=0?e.childNodes[n]:null;i&&t===a&&(i=!1);var s=null,c=e,u=e;if(t){s=t.parentNode,t.parentNode=e;var l=e.__subtreeObserversCount;if(s){var d=s.childNodes.indexOf(t);s.childNodes.splice(d,1),s===e&&d<n&&n--,l-=s.__subtreeObserversCount}l&&o._updateSubtreeCaches(t,l)}for(var f=e;f&&f.__inheritSlots;)f=f.parentNode;for(var m=!f||!f.__slots,w=!m||e.__inheritSlots,S=s;S&&S.__inheritSlots;)S=S.parentNode;var T=!S||!S.__slots,I=!T||s&&s.__inheritSlots;if(m)void 0!==e.__singleSlot&&(c=u=e.__singleSlot,r.hasGlobalWarningListeners()&&(c||r.triggerWarning("slot is not found."))),c?O(c,t,a,i,w,I,n):t.__wxSlotParent&&O(t.__wxSlotParent,null,t,!0,I,!1),t&&!T&&t.__inheritSlots&&E(t,(function(e,t){O(e,t,null,!1,!0,!0,-1)}));else{var A="";if(t&&(A=t.__slot||"",c=f.__slots[A]||null,r.hasGlobalWarningListeners()&&(c||r.triggerWarning('slot "'+A+'" is not found.'))),a&&(u=f.__slots[a.__slot||""]||null),a&&u&&i&&O(u,null,a,i,!0,!1),t)if(c){var C=a?b(f,a,A,!i):b(f,e,A,!1);O(c,t,C,!1,!0,I)}else t.__wxSlotParent&&O(t.__wxSlotParent,null,t,!0,I,!1);a&&i&&a.__inheritSlots&&E(a,(function(e,t){O(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&E(t,(function(t,n){var o=n.__slot||"",s=f.__slots[o]||null;if(s){var c=a?b(f,a,o,!i):b(f,e,o,!1);O(s,n,c,!1,!0,!0)}else r.hasGlobalWarningListeners()&&r.triggerWarning('slot "'+o+'" is not found.'),n.__wxSlotParent&&O(n.__wxSlotParent,null,n,!0,!0,!1)}))}return i&&(e.__subtreeObserversCount&&o._updateSubtreeCaches(a,-e.__subtreeObserversCount),a.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,i?1:0,t):e.childNodes.splice(n,i?1:0),e.ownerShadowRoot&&(i&&_(a,e.ownerShadowRoot),t&&_(t,e.ownerShadowRoot),y(e.ownerShadowRoot)),i&&(h(a),v(e,"remove",a)),t&&(s?g(t):p(t),s===e?v(e,"move",t):(s&&v(s,"remove",t),v(e,"add",t))),!0},T=function(e,t,n,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var i=r?n:t,o=-1;return n&&(o=e.childNodes.indexOf(n))<0?null:S(e,t,o,r)?i:null};d._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],O(t,e,null,!1,!1,0),e.__hostAssociated=!0,y(e)},d.appendChild=function(e,t){return T(e,t,null,!1)},d.insertBefore=function(e,t,n){return T(e,t,n,!1)},d.removeChild=function(e,t){return T(e,null,t,!0)},d.replaceChild=function(e,t,n){return T(e,t,n,!0)},d.prototype.appendChild=function(e){return T(this,e,null,!1)},d.prototype.insertBefore=function(e,t){return T(this,e,t,!1)},d.prototype.removeChild=function(e){return T(this,null,e,!0)},d.prototype.replaceChild=function(e,t){return T(this,e,t,!0)};var I=function(e){var t=!0,n=!0;if(e instanceof d?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof s&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var i=e.__wxSlotChildren[r];I(i)}else if(n&&e.childNodes)for(var o=0;o<e.childNodes.length;o++)I(e.childNodes[o])};d.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return I(e),t};var A=function(e,t){if(!t){var n=c.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=c.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},C=function(e,t,n){var r=e instanceof d&&e.__virtual,i=t?t.childNodes[n]:void 0,o=!0,a=!0,c=null;if(e instanceof d)e.__backendExtracted=!1,r||(c=A(e,i)),a=!1;else if(e instanceof s)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,i),o=!1,a=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,i&&i.childNodes)for(;i.childNodes.length;)u.appendChild(i.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,i),e=u}c?(t.appendChild(c),i=c):i=t?t.childNodes[n]:void 0;var l=0;if(o&&e.__wxSlotChildren)for(var f=0;f<e.__wxSlotChildren.length;f++){var p=e.__wxSlotChildren[f];if(r)n=C(p,t,n);else if(p.asShadowRoot){for(var h=0;h<p.asShadowRoot.childNodes.length;h++)l=C(p.asShadowRoot.childNodes[h],i,l);e.shadowRoot=i,i.__wxHost=e,e.__wxSlotChildren[0]=i,i.__wxSlotParent=e,e.__singleSlot===p&&(e.__singleSlot=i)}else l=C(p,i,l)}else if(a&&e.childNodes)for(var g=0;g<e.childNodes.length;g++)l=C(e.childNodes[g],i,l);if(r)return n;for(;i.childNodes.length>l;)i.removeChild(i.childNodes[l]);return n+1};d.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),C(e,n,0)}},d.prototype.triggerEvent=function(e,t,n){i.triggerEvent(this,e,t,n)},d.prototype.dispatchEvent=function(e){i.dispatchEvent(this,e)},d.prototype.addListener=function(e,t,n){i.addListenerToElement(this,e,t,n)},d.prototype.removeListener=function(e,t,n){i.removeListenerFromElement(this,e,t,n)},d.setMethodCaller=function(e,t){e.__methodCaller=t},d.getMethodCaller=function(e){return e.__methodCaller},d.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},d.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute&&this.__domElement.setAttribute(e,t)},d.prototype.setStyle=function(e){this.__domElement&&"custom"===u.documentBackend&&this.__domElement.setStyle(e)},d.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&"dom"===u.documentBackend&&this.__domElement.removeAttribute(e))},d.prototype.getBoundingClientRect=function(){return this.__domElement?this.__domElement.getBoundingClientRect():{left:0,top:0,width:0,height:0}},d.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},d.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var k=d.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void("dom"===u.documentBackend?this.__domElement.setAttribute("style",r.call(this,n)):"custom"===u.documentBackend&&this.__domElement.setStyle(r.call(this,n)))}this.__domElement&&("dom"===u.documentBackend?this.__domElement.setAttribute("style",n):"custom"===u.documentBackend&&this.__domElement.setStyle(n)),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};d.replaceDocumentElement=function(e,t,n){e.__attached||("dom"===u.documentBackend?t.parentNode.replaceChild(e.__domElement,t):"custom"===u.documentBackend&&t.replaceChild(e.__domElement,n),p(e))},d.pretendAttached=function(e){e.__attached||p(e)},d.pretendDetached=function(e){e.__attached&&h(e)},d.isAttached=function(e){return e.__attached},d.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,y(e.ownerShadowRoot))},d.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},d.getInheritSlots=function(e){return e.__inheritSlots};var x=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var r=n[1].slice(1),i=n[2].split(".");return i.shift(),r||i.length?{id:r,classes:i,relation:t||""}:null},P=d.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],r=!1,i=0;i<t.length;i++){for(var o=t[i].split(/( |\t|>+)/g),a=[],s="",c=0;c<o.length;c++){var u=o[c];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var l=x(u,s);if(s="",!l)break;a.push(l)}else{if(""!==s)break;s=u,">>>"===u&&(r=!0)}}c===o.length&&a.length&&n.push(a)}return n.length?{crossShadow:r,union:n}:null},D=function(e,t,n,r,i){if(t===e)return!1;var o=n[r],a=!0;o.id&&o.id!==t.__id&&(a=!1);for(var s=o.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===i)return!1;var u=t;if(a&&0===r){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==i)return!1;u=t,a=!1}var l=a?o.relation:i;do{u.parentNode?u=u.parentNode:">>>"===l?u=u.__wxHost:">>>"===i?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&u.__virtual);if(!u)return!1;if(a){if(D(e,u,n,r-1,l))return!0;if(">>>"!==i)return!1}return D(e,u,n,r,i)},R=function(e,t,n){if(n.__virtual)return!1;for(var r=e.union,i=0;i<r.length;i++){var o=r[i];if(D(t,n,o,o.length-1,">"))return!0}return!1},j=function(e,t,n,r,i){if(R(t,n,r)&&(e.push(r),i))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:u.domain)===r.__componentOptions.domain&&j(e,t,n,r.shadowRoot,i)&&i))return!0;for(var o=r.childNodes,a=0;a<o.length;a++)if(o[a]instanceof d&&j(e,t,n,o[a],i)&&i)return!0;return!1};d.prototype.querySelector=function(e){var t="object"==typeof e?e:P(e);if(!t)return null;var n=[];return j(n,t,this,this,!0),n[0]||null},d.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:P(e),n=[];return t?(j(n,t,this,this,!1),n):[]},d.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&R(n,null,t)},d.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&R(n,this,t)},e.exports=d},function(e,t,n){var r=n(3),i=function(){};i.prototype=Object.create(Object.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),i.create=function(e){var t=new i;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},i.prototype.observe=function(e,t){var n=0,i=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(i),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(i),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(i),subtree:t.subtree?e:null}),n++),t.subtree&&o(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(i),subtree:null}))},i.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&o(n.subtree,-1)}this._binded=[]};var o=i._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var r=0;r<n.length;r++)o(n[r],t)};i._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},i._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=i},function(e,t,n){var r=n(4),i=function(){},o=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,a=null;i._setElementSystem=function(e){a=e,i._setElementSystem=null};var s=Object.prototype.hasOwnProperty;i.create=function(e,t){var n=new i;for(var r in n._prefix="",n._addOriginalClass=!1,n._alias=t,n._resolvedAlias={},t)n._resolvedAlias[r]="";return n._rawNames=[],n._elem=e,n._owner=null,n};var c=function(e){var t="",n=e._rawNames,r=e._prefix,i=e._owner?e._owner._resolvedAlias:null,o=e._addOriginalClass;r&&(r+="--");for(var a=0;a<n.length;a++){var c=n[a];if(a&&(t+=" "),i&&s.call(i,c))t+=i[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var u=e._owner||null;"^"===c[0];)c=c.slice(1),u=u?u._owner:null;var l=u?u._prefix:"";l&&(l+="--"),t+=l+c}else o&&(t+=c+" "),t+=r+c}return t},u=function(e){var t=e._elem.__domElement;if(t){var n=c(e);"dom"===r.documentBackend?n?t.setAttribute("class",n):t.removeAttribute("class"):"custom"===r.documentBackend&&t.setClass(n)}},l=function(e){var t=e.classList;t instanceof i&&(t._alias&&d(t),u(t));for(var n=e.childNodes,r=0;r<n.length;r++)n[r]instanceof a&&l(n[r])},d=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var r in e._alias){var i=e._alias[r],o=[];if(i)for(var c=0;c<i.length;c++){var u=i[c];if(s.call(t._alias,u)){var d=t._resolvedAlias[u];o.push(d)}else{var f=e._prefix&&u?e._prefix+"--"+u:u;o.push(f)}}var p=o.join(" ");e._resolvedAlias[r]!==p&&(n=!0,e._resolvedAlias[r]=p)}n&&e._elem.shadowRoot instanceof a&&l(e._elem.shadowRoot)};i.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),u(this)):n>=0&&(this._rawNames.splice(n,1),u(this))},i.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var r=t[n];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var i=1;"^"===r[i];)i++;if(r.slice(i)===e)return!0}else if(r===e)return!0}return!1},i.prototype._setOwnerOptions=function(e,t,n){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&d(this),u(this))},i.prototype._setAlias=function(e,t){var n=this._owner,r=String(t).match(o);this._alias[e]=r;var i=[];if(r)for(var a=0;a<r.length;a++){var c=r[a];n&&s.call(n._alias,c)?i.push(n._resolvedAlias[c]):i.push(this._prefix?this._prefix+"--"+c:c)}this._resolvedAlias[e]=i.join(" "),l(this._elem.shadowRoot)},i.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(o)||[],u(this)},i.prototype.getClassNames=function(){return c(this)},i.prototype.getPrefix=function(){return this._prefix},i.prototype.getAddOriginalClass=function(){return this._addOriginalClass},e.exports=i},function(e,t,n){var r=n(10),i=n(4),o=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var r=null;return o.backendExtractedDefault||"dom"!==i.documentBackend?"custom"===i.documentBackend?((r=i.customContext.createElement("text","")).setText(e||""),r.textContent=e,r.__wxElement=n):n.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=r,n.__backendExtracted=o.backendExtractedDefault,n.__subtreeObserversCount=0,n.__autoDestroy=!0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},a.prototype.setAutoDestroy=function(e){this.__autoDestroy=!!e},a.prototype.destroy=function(){"custom"===i.documentBackend&&(this.__domElement.release(),this.__domElement=null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?(this.__domElement.textContent=e,"custom"===i.documentBackend&&this.__domElement.setText(e)):this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var r=e.attributes,i=0;i<r.length;i++)t.attrs[r[i].name]=r[i].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var r=n(3),i=n(5),o=n(16),a=n(6),s=n(8),c=n(9),u=n(17),l=n(10),d=n(11),f=n(14),p=n(4),h=n(13),g=n(7),v=a.addListenerToElement,_=g.parseSinglePath,y=i.deepCopy,m=function(){};m.prototype=Object.create(c.prototype,{constructor:{value:m,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var b=function(){};b.prototype=Object.create(Object.prototype),a._setComponent(m);var w=null;m._setDefaultTemplateEngine=function(e){w=e,m._setDefaultTemplateEngine=null};var O=function(e,t,n){if(n)for(var i=0;i<n.length;i++)if(s.matchTypeWithValue(n[i],e))return e;return t===String?null==e?(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <String> but get null value. Used empty string instead."),""):(r.hasGlobalWarningListeners()&&"object"==typeof e&&r.triggerWarning("property received type-uncompatible value: expected <String> but got object-typed value. Forcely converted."),String(e)):t===Number?isFinite(e)?Number(e):(r.hasGlobalWarningListeners()&&("number"==typeof e?r.triggerWarning("property received type-uncompatible value: expected <Number> but got NaN or Infinity. Used 0 instead."):r.triggerWarning("property received type-uncompatible value: expected <Number> but got non-number value. Used 0 instead.")),0):t===Boolean?!!e:t===Array?e instanceof Array?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Array> but got non-array value. Used empty array instead."),[]):t===Object?"object"==typeof e?e:(r.hasGlobalWarningListeners()&&r.triggerWarning("property received type-uncompatible value: expected <Object> but got non-object value. Used null instead."),null):void 0===e?null:e};o.setPropUpdater((function(e,t,n,i){var o=e[0],a=this.__propData[o];if(n=O(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,i){var o=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,i?void 0:n];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,o,e)}(this,t.availability,n,i)))return r.hasGlobalWarningListeners()&&r.triggerWarning('the new value for property "'+o+'" in component "'+(this.is||"")+'" is currently not available. The value is not changed.'),a;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,i?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[o]&&function(e,t,n){if("dom"===p.documentBackend){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),i=typeof n;"boolean"===i?n?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===i?e.__domElement.setAttribute(r,JSON.stringify(n)):e.__domElement.setAttribute(r,n)}}(this,o,n),n})),o.setPropObserver((function(e,t,n,i,o,a){if(i.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),i.observer&&r.safeCallback("Property Observer",i.observer,this.__methodCaller,o?[]:[e,t,n],this),i.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&l._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var E=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[n]=[],i=0;i<e.length;i++)r.push(null)},S=function(e,t,n,i,o){for(var a=m.prototype.hasBehavior,c="parent"===i,u="shadowHost"===i,l=0;l<e.length;l++){var d,f=e[l];if(d="object"!=typeof f.target?s._list[f.target]:f.target){var p=t[l],h=null;if(!o)for(var g=u?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;g;g=u?g.ownerShadowRoot&&g.ownerShadowRoot.__wxHost:g.parentNode)if(!g.__virtual){if(a.call(g,d)){var v;v=c?g.__relationMap.child:u?g.__relationMap.shadowContent:g.__relationMap.descendant;for(var _=0;_<v.length;_++){var y,b=v[_];if((y="object"!=typeof b.target?s._list[b.target]:b.target)&&a.call(n,y)){h={parent:g,relation:b};break}}}if(c||h)break}t[l]=h,!p||h&&p.parent===h.parent||(r.safeCallback("Relation Unlinked Callback",p.relation.unlinked,p.parent.__methodCaller,[n.__methodCaller],p.parent),r.safeCallback("Relation Unlinked Callback",f.unlinked,n.__methodCaller,[p.parent.__methodCaller],n)),!h||p&&p.parent===h.parent||(r.safeCallback("Relation Linked Callback",h.relation.linked,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Linked Callback",f.linked,n.__methodCaller,[h.parent.__methodCaller],n)),p&&h&&p.parent===h.parent&&(r.safeCallback("Relation Link Changed Callback",h.relation.linkChanged,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Link Changed Callback",f.linkChanged,n.__methodCaller,[h.parent.__methodCaller],n)),o||h||r.safeCallback("Relation Link Failed Callback",f.linkFailed,n.__methodCaller,[],n)}}},T=function(e,t,n){if(e instanceof c){var r=0,i=null;if(e instanceof m){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),i=e.childNodes,r=0;r<i.length;r++)T(i[r],t,n);e=e.shadowRoot}for(i=e.childNodes,r=0;r<i.length;r++)T(i[r],t,n)}};m._list={},m.register=function(e){var t=e.options||{},n=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:p.classPrefix;null!=r||(r=n.is||"");var i=new b;return i._unprepared=n,i.is=e.is||"",i.behavior=n,i.protoFunc=null,i.props=null,i.template=null,i.innerEvents=null,i.generics=n.generics,i.initiator=n.initiator||null,i.options={availability:t.availability||p.availability,domain:t.domain||p.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:p.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:p.allowInWriteOnly),classPrefix:r,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:p.addGlobalClass),templateEngine:t.templateEngine||p.templateEngine||w,renderingMode:t.renderingMode||p.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:p.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:p.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:p.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:p.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:p.separateInnerData),innerDataExclude:t.innerDataExclude||p.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:p.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:p.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:p.virtualHost)},n._unprepared||m.prepare(i),void 0!==e.is&&(m._list[n.is]=i),i},m.isPrepared=function(e){return!e._unprepared},m.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,i={};t._unprepared&&s.prepare(t),n.writeOnly&&(i.data={value:null});var a=e.props={};Object.keys(t.properties).forEach((function(e){var r=t.properties[e];a[e]={type:r.type,optionalTypes:r.optionalTypes,value:r.value,filter:"function"==typeof r.filter?r.filter:null==r.filter?null:t.methods[r.filter],observer:"function"==typeof r.observer?r.observer:null==r.observer?null:t.methods[r.observer],public:r.public,availability:r.availability,observeAssignments:r.observeAssignments},n.writeFieldsToNode&&(i[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var c=function(){};e.protoFunc=c;var u=c.prototype=Object.create(m.prototype,i);if(u.is=e.is,u.__componentOptions=n,u.__using=t.using,e.dataGroupObserverTree=o._createObserverTree(a),t._addObserversToDataProxy(e.dataGroupObserverTree),u.__behavior=t,n.writeFieldsToNode)for(var l in t.methods)u[l]=t.methods[l];u.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),u.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var d=t.relations,f=u.__relationMap={};for(var p in d){var h=d[p],g=h.type;f[g]?f[g].push(h):f[g]=[h]}var v=[];f.parent&&v.push((function(e){S(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),f.ancestor&&v.push((function(e){S(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),f.shadowHost&&v.push((function(e){S(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<v.length;t++)v[t].call(this,e)};var _={},y={},b=t.data,w="";for(w in b)y[w]=b[w];for(w in a){var O=a[w];r.hasGlobalWarningListeners()&&void 0!==y[w]&&r.triggerWarning('data field "'+w+'" is overwritten by property with the same name.'),y[w]=O.value,_[w]=O.public}var E=y,T=n.separateInnerData,I=n.innerDataExclude;if(I){for(var A in E={},y)I.test(A)||(E[A]=y[A]);T||(y=E)}var C=n.templateEngine;e.template=C.create(t,y,E,n),u.__propPublic=_;var k=t._getAllListeners(),x=e.innerEvents=[];for(var P in k){for(var D=k[P],R=P.indexOf("."),j=P.slice(R+1),N=R<1?"":P.slice(0,R),M=[],L=0;L<D.length;L++){var B=D[L];"function"!=typeof B&&(B=null==B?null:t.methods[B]),M.push(B)}x.push({id:N,name:j,funcs:M})}}};var I=1,A=Object.prototype.hasOwnProperty,C=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},k=m._advancedCreate=function(e,t,n,i,a){var s=t;s._unprepared&&m.prepare(s);var u=s.options;!u.availability||function(e,t,n){var i=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",n,e,i)}(s,n,u.availability)||(r.hasGlobalWarningListeners()&&r.triggerWarning('the component "'+(s.is||"")+'" is currently not available. The default component is used instead.'),s=m._list[""]);var l=new(0,s.protoFunc),g=s.generics;l.__generics=g?function(e,t,n){var i={};for(var o in e){var a=e[o],s=t[o];"object"!=typeof s&&(s=m._list[s]),"object"!=typeof s&&null!=a.default&&(s=m._list[a.default]),r.hasGlobalWarningListeners()&&(s||r.triggerWarning('generic "'+o+'" is not instantiated. The default component is used instead.')),s&&(i[o]=s)}if(r.hasGlobalWarningListeners())for(var c in t)void 0===e[c]&&r.triggerWarning('generic "'+c+'" is not defined. It will be ignored.');return i}(g,i||{}):{};var _=null,b=p.documentBackend;if(u.virtualHost){_=null;"dom"===p.documentBackend&&(_=void 0),c.initialize(l,_,n),l.__virtual=!0}else"dom"===b?(_=h.backendExtractedDefault?new f(e):document.createElement(e),c.initialize(l,_,n)):"custom"===b?(_=p.customContext.createElement("empty",e),c.initialize(l,_,n)):c.initialize(l,null,n);var w=0,O=l.__externalClassAlias={};if(s.behavior.externalClasses){var S=s.behavior.externalClasses;for(w=0;w<S.length;w++)O[S[w]]=null}if(l.classList=d.create(l,O),n){var T=n.__wxHost;l.classList._setOwnerOptions(T.classList,T.__componentOptions.classPrefix,T.__componentOptions.addGlobalClass),p.writeExtraInfoToAttr&&_&&_.setAttribute("exparser:info-class-prefix",T.__componentOptions.classPrefix&&T.__componentOptions.classPrefix+"--")}"dom"===b&&p.writeExtraInfoToAttr&&_&&(l.__componentInstanceId=I++,_.setAttribute("exparser:info-component-id",l.__componentInstanceId));var A=l.__templateInstance=s.template.createInstance(l,a);l.__propData=A.data;var k=u.separateInnerData;l.__innerData=k?y(l.__propData):null;var x=u.innerDataExclude;if(k&&x){var P={};for(var D in l.__innerData)x.test(D)||(P[D]=l.__innerData[D]);l.__innerData=P}l.__dataProxy=o._advancedCreate(l,l.__propData,l.__innerData,x,s.dataGroupObserverTree,(function(e,t,n,r){l.__templateInstance.updateValues(l,k?l.__innerData:l.__propData,e,t,n,r)})),A.beforeMergeValues&&l.__dataProxy.setBeforeMergeCb((function(e,t,n){l.__templateInstance.beforeMergeValues(e,t,n)})),A.beforeUpdateValues&&l.__dataProxy.setBeforeUpdateCb((function(e){l.__templateInstance.beforeUpdateValues(l,k?l.__innerData:l.__propData,e)})),u.writeOnly&&l.__dataProxy.setHidingValue(!0),l.__idCacheDirty=!1,l.__idCache=A.idMap,null===A.slots[""]&&(A.slots[""]=_),s.options.multipleSlots?l.__slots=A.slots:(l.__singleSlot=A.slots[""]||null,l.__singleSlot&&(l.__singleSlot.__wxSlotChildren=l.childNodes)),A.shadowRoot instanceof c?(l.shadowRoot=A.shadowRoot,c._attachShadowRoot(A.shadowRoot)):_ instanceof f?(l.shadowRoot=_,_.__wxHost=l,l.__domElement.asShadowRoot=A.shadowRoot,l.__wxSlotChildren=[_],_.__wxSlotParent=l):(l.shadowRoot=_,_.__wxHost=l,""!==p.documentBackend&&l.__domElement.appendChild(A.shadowRoot),l.__wxSlotChildren=[_],_.__wxSlotParent=l);for(var R=A.listeners,j=0;j<R.length;j++){var N=R[j];v(N.target,N.name,C(N.func,l))}var M=s.innerEvents;for(w=0;w<M.length;w++){var L=M[w],B=L.id?"this"===L.id?l:l.__idCache[L.id]:l.shadowRoot;if(B)for(var F=L.name,U=L.funcs,W=0;W<U.length;W++)v(B,F,C(U[W],l))}var V=l.__relationMap;return V.parent&&(E(V.parent,l,"parent"),l.__relationHandler=s.relationHandler),V.ancestor&&(E(V.ancestor,l,"ancestor"),l.__relationHandler=s.relationHandler),V.shadowHost&&(E(V.shadowHost,l,"shadowHost"),l.__relationHandler=s.relationHandler),l.__propertyChangeListeners=null,"custom"===b&&_&&_.associateComponent(l),s.initiator&&r.safeCallback("Component Initiator",s.initiator,l.__methodCaller,[],l),l.__lifeTimeFuncs.created.call(l.__methodCaller,[],l),l};m.createWithGenerics=function(e,t,n,i){return"object"==typeof e?k(e.is,e,null,n,i):e?e.indexOf("-")<0&&!t?u.create(e):(r.hasGlobalWarningListeners()&&(t||A.call(m._list,e)||"virtual"===e||r.triggerWarning('component "'+e+'" is not found. The default component is used instead.')),k(e.toLowerCase(),t||A.call(m._list,e)&&m._list[e]||m._list[""],null,n,i)):k("virtual",m._list[""],null,n,i)},m.create=function(e,t,n){return m.createWithGenerics(e,t,null,n)},m.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},m.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},m.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},m.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},m.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},m.getMethod=function(e,t){return e.__behavior.methods[t]},m.getComponentOptions=function(e){return e.__componentOptions},m.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},m.prototype.triggerPageLifeTime=function(e,t){T(this,e,t)},m.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},m.prototype.getRootBehavior=function(){return this.__behavior},m.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],r=0;r<n.length&&n[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var n=[],r=t.type,i="child"===r,o="shadowContent"===r,a=function(r){for(var s=r.childNodes,u=0;u<s.length;u++){var l=s[u];if(l instanceof c)if(l.__virtual)a(l);else{var d;if(l.__relationLinks)if(d=i?l.__relationLinks.parent:o?l.__relationLinks.shadowHost:l.__relationLinks.ancestor)for(var f=0;f<d.length;f++){var p=d[f];if(p&&p.parent===e&&p.relation===t){n.push(l);break}}o&&l instanceof m&&a(l.shadowRoot),i||a(l)}}};return a(o?e.shadowRoot:e),n}(this,t)},m.prototype.hasExternalClass=function(e){return A.call(this.__externalClassAlias,e)},m.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},m.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},m.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},m.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},m.getInnerData=function(e){return e.__innerData},m.getDataProxy=function(e){return e.__dataProxy},m.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},m.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},m.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(_(n),e[n]);t.doUpdates()},e.exports=m},function(e,t,n){var r=n(3),i=n(5),o=null,a=null,s=Object.prototype.hasOwnProperty,c=i.deepCopy,u=function(e,t,n,r,i,o){this._data=t,this._innerData=n,this._innerDataExclude=r,this._comp=e,this._updateCb=o,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=i._propFields,this._observers=i._observers,this._observerTree=i._observerTree,this._relatedObserverTreeObj=i,this._observerStatus=[]};u._advancedCreate=function(e,t,n,r,i,o){return new u(e,t,n,r,i,o)};var l=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new l(e)},u.create=function(e,t,n){var r=new l({});return new u({__methodCaller:e},t,null,null,r,n)},u.setPropUpdater=function(e){o=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,n){for(var i=e,o=0;o<t.length;o++){var a=t[o];if("**"===a)return r.hasGlobalWarningListeners()&&o!==t.length-1&&r.triggerWarning('"**" can only be used at the end of a path descriptor.'),i["**"]||(i["**"]=[]),void i["**"].push(n);i[a]||(i[a]={}),i=i[a]}i["~"]||(i["~"]=[]),i["~"].push(n)},f=function(e,t,n){for(var r=0;r<t.length;r++)d(e,t[r],n)},p=function(e,t,n){for(var r=e,i=0,o="";i<t.length&&"**"!==(o=t[i]);i++){if(!r)return;r=r[o]}var a="**"===o?r["**"]:r["~"];if(a)for(i=0;i<a.length;i++)if(a[i]===n){a.splice(i,1);break}},h=function(e,t,n){for(var r=0;r<t.length;r++)p(e,t[r],n)};l.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},f(this._observerTree,t,n),n},l.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},l.prototype.moveObserver=function(e,t){var n=this._observers[e];h(this._observerTree,n.pathObj,e),n.pathObj=t,f(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var g=function(e,t,n){for(var i=[],o=n.pathObj,a=0;a<o.length;a++){for(var s=o[a],c=t,u=0;u<s.length;u++){var l=s[u];if("**"===l)break;if("object"!=typeof c){c=void 0;break}c=c[l]}i[a]=c}r.safeCallback("Data Observer",n.func,e.__methodCaller,i,e)},v=function(e,t){var n=null,r=0;for(var i in e)if("~"!==i)if("**"!==i)v(e[i],t);else for(n=e["**"],r=0;r<n.length;r++)t[n[r]]=!0;else for(n=e["~"],r=0;r<n.length;r++)t[n[r]]=!0},_=function(e,t,n){for(var r=e,i=0;i<n.length;i++){if(r["**"])for(var o=r["**"],a=0;a<o.length;a++){t[o[a]]=!0}var c=n[i];if("number"==typeof c){if(!s.call(r,c)){r=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(r,c)){r=null;break}r=r[c]}r&&v(r,t)},y=function(e,t,n,r,i){for(var o=0;o<e.length;o++){var a=e[o],s=t[o];s&&s&&(t[o]=!1,g(n,i?void 0:r,a))}};u.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var n=this._propFields,r=this._comp,i=this._hidingValue,u=this._innerDataExclude,l=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,f=null,p=null,h=null;d?(l||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),f=this._doingUpdates.changedPaths,p=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(f=[],p=[],h=[]);var g=this._changes;this._changes=[];var v=[];this._beforeMergeCb&&this._beforeMergeCb(g,v,e);for(var m=0;m<g.length;m++){var b=g[m],w=b[0],O=b[1],E=O,S=void 0,T=w[0],I=!!u&&u.test(T),A=n[T];if(A&&1===w.length)S=this._data[T],O=o.call(this._comp,w,A,O,this._hidingValue),I||(this._innerData?(E=c(O),v[m]||(this._innerData[T]=E)):E=O,b[1]=E),I&&!this._innerData||(this._data[T]=O);else{var C=this._data,k=T,x=null,P=1;if(!I||this._innerData){for(;P<w.length;P++)"number"==typeof(x=w[P])&&isFinite(x)?s.call(C,k)&&C[k]instanceof Array||(C[k]=[]):(!s.call(C,k)||null===C[k]||"object"!=typeof C[k]||C[k]instanceof Array)&&(C[k]={}),C=C[k],k=x;C[k]=O}if(this._innerData&&(C=this._innerData,k=T,!I)){for(P=1;P<w.length;P++)"number"==typeof(x=w[P])&&isFinite(x)?s.call(C,k)&&C[k]instanceof Array||(C[k]=[]):(!s.call(C,k)||null===C[k]||"object"!=typeof C[k]||C[k]instanceof Array)&&(C[k]={}),C=C[k],k=x;E=c(O),v[m]||(C[k]=E),b[1]=E}}_(this._observerTree,this._observerStatus,w),I||(f.push(w),p.push([E,S,O]),h.push(b)),d&&(this._doingUpdates.changesTotal+=1)}if(!l){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var D=0;do{D=this._doingUpdates.changesTotal,y(this._observers,this._observerStatus,r,this._data,i)}while(D!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(f,p,h,e);for(var R=0;R<p.length;R++){var j=p[R];if(j){var N=f[R],M=n[N[0]];M&&a.call(r,j[2],j[1],N,M,i,t)}}}},e.exports=u},function(e,t,n){var r=n(9),i=n(11),o=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(r.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var u=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend?u=s.backendExtractedDefault?new o(e):document.createElement(e):"custom"===a.documentBackend&&(u=a.customContext.createElement("image"===e?e:"empty",e)),r.initialize(n,u,t),n.classList=i.create(n,null),"custom"===a.documentBackend&&u.associateComponent(n),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return u(e,null)};var l=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var u=null;if(e.__domElement&&("dom"===a.documentBackend?u=e.__domElement instanceof o?s.backendExtractedDefault?e.__domElement.cloneNode():o.toElement(e.__domElement):s.backendExtractedDefault?o.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1):"custom"===a.documentBackend&&(u=e.__domElement.cloneNode())),r._clone(n,e,u,t),n.classList=i.create(n,null),"custom"===a.documentBackend&&u.associateComponent(n),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return l(e,null)},e.exports=c},function(e,t,n){var r=n(9),i=n(4),o=function(e,t){a(this,e,t)};o.prototype=Object.create(r.prototype);var a=o.initialize=function(e,t,n){e.is=t||"";var o=null;"dom"!==i.documentBackend&&"custom"!==i.documentBackend||(o=void 0),r.initialize(e,o,n),e.__virtual=!0};o._advancedCreate=function(e,t){return new o(e,t)},o.create=function(e){return new o(e,null)},e.exports=o},function(e,t,n){var r=n(9),i=n(15),o=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,u=function(e){o.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(o.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return o._advancedCreate(e,this)},u.prototype.createComponent=function(e,t,n,r){var o=null;o=void 0===t?e:t;var a=this.__wxHost;return"object"!=typeof o&&(c.call(a.__using,o)?o=a.__using[o]:c.call(a.__generics,o)&&(o=a.__generics[o]),"object"!=typeof o&&(o=i._list[o]||i._list[""])),n&&(n=function(e,t){var n={};for(var r in e){var o=e[r];"object"!=typeof o&&(c.call(t.__using,o)?o=t.__using[o]:c.call(t.__generics,o)&&(o=t.__generics[o]||i._list[""]),n[r]=o)}return n}(n,a)),"object"==typeof e&&(e=o.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),a.__componentOptions.writeOnly&&!o.options.allowInWriteOnly&&(o=i._list[""]),i._advancedCreate(e,o,this,n,r)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!c.call(t.__using,e)||!!c.call(t.__generics,e)},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,n){var r=n(9),i=n(12),o=function(){};o.create=function(e,t,n){var a=new o;if(!(e instanceof r||e instanceof i))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||r;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,r,i){if(r<0&&e instanceof t&&!1===i(e))return!1;var o=n&&e.__wxSlotChildren||e.childNodes;if(o)for(var s=0;s<o.length;s++)if(!1===a(o[s],t,n,r,i))return!1;return!(r>0&&e instanceof t&&!1===i(e))};o.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,r){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=o},function(e,t,n){var r=n(4),i=n(3),o=!1,a=[],s=function(e){var t=a;a=[],o=!0,r.customContext.render((function(){o=!1,a.length&&(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16));for(var e=0;e<t.length;e++)"function"==typeof t[e]&&i.safeCallback("render",t[e],null,[])}))};t.triggerRender=function(e){"custom"===r.documentBackend&&(a.push(e||null),o||1!==a.length||(r.hasDOMBackend&&"function"==typeof requestAnimationFrame?requestAnimationFrame(s):setTimeout(s,16)))}},function(e,t,n){(function(t){var r=n(4),i=n(3),o=n(9),a=n(17),s=n(12),c=n(19),u=n(15),l=n(24),d=n(25),f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h,g=null;g=n(34),h=n(35),f.precompiler=g,f.htmlParser=h;var v=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},_=Object.prototype.hasOwnProperty,y=function(e,t){if(null!==e&&"object"==typeof e&&_.call(e,t))return e[t]},m=function(e,t,n,r){if(_.call(t,n)){var o=t[n];if("function"==typeof o)return i.safeCallback("Template Method",o,e,r)}},b={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,n){e.classList.toggle(t,!!n)},O=function(e,t,n){e[t]=n},E=function(e,t,n){var r=e.__dataProxy;r.scheduleReplace([t],n),r.doUpdates()},S=function(e,t,n){e.class=n},T=function(e,t,n){"dom"===r.documentBackend?e.setAttribute("style",n):"custom"===r.documentBackend&&e.setStyle(n)},I=function(e,t,n){e.setAttribute("class",n)},A=function(e,t,n){e.textContent=n},C=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},k={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":O,c:w,s:function(e,t,n){var r=e.style;r&&(r[t]=n)},d:C},x=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};f.create=function(e,n,r,o){var a=void 0===e.template?x:e.template,s=a;if("function"!=typeof a)if(g&&"undefined"!=typeof window&&"undefined"!=typeof document){var c="__exparserFreeTmpl",u=g.compile(a),l=document.createElement("script");l.type="text/javascript",l.innerHTML="window."+c+"="+u,document.head.appendChild(l),document.head.removeChild(l),s=window[c],window[c]=null}else if(void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node)s=f.precompileAndGetCreator(a);else if(g){var d=g.compile(a);s=new Function("return "+d)()}else i.hasGlobalWarningListeners()&&i.triggerWarning("Non-precompiled template is not usable in this environment. Empty template is used instead."),s=x;var p=Object.create(f.prototype);return p._initValuesJSON=JSON.stringify(r),p._dataJSON=n!==r?JSON.stringify(n):null,p._tagTreeRoot=P(s,r,e.methods,o),p._renderingMode=o.renderingMode,p};var P=function(e,t,n,i){var o="native"===i.renderingMode,s=o,c=!1,u=Object.create(null);o&&!r.hasDOMBackend&&(e=x);var l={},f=e(y,m,n),p=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(3!==i.t){var u=i.n,f=!(o||"string"==typeof u&&u.indexOf("-")<0);"slot"===u&&""===i.sn&&(c=!0),i.n=u;var h=i.st;h&&h.e&&(h.o=T,s&&(h.v=h.e(t,l,null)));var g=i.cl;g&&g.e&&(g.o=o?I:S,s&&(g.v=g.e(t,l,null)));var _=null;f||(i.p=_=o?document.createElement(i.n):a.create(i.n),h&&void 0!==h.v&&("dom"===r.documentBackend?_.setAttribute("style",h.v):"custom"===r.documentBackend&&_.__domElement.setStyle(h.v)),o&&g&&void 0!==g.v&&_.setAttribute("class",g.v));for(var y=i.a,m=0;m<y.length;m++){var b=y[m];if(b.d)o||d[b.n].register(b.n,b,i);else{o||("bind"===b.n.slice(0,4)?(b.evCatch=!1,b.ev=v(b.n.slice(4)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))):"catch"===b.n.slice(0,5)&&(b.evCatch=!0,b.ev=v(b.n.slice(5)),":"===b.ev[0]&&(b.ev=b.ev.slice(1))));var C=b.o;if(f)C?b.o="&"===C?k[":"]:k[C]:(b.o=k[":"],b.n=v(b.n)),b.o===O&&(b.o=E),s&&b.e&&(b.v=b.e(t,l,null));else if(!b.ev){var x=k;b.o=C?"&"===C?x[":"]:x[C]:x.$,s?(b.e&&(b.v=b.e(t,l,null)),(b.o!==w||o)&&b.o(_,b.n,b.v)):b.e||b.o(_,b.n,b.v)}}}p(i.c),o&&(1!==i.c.length||void 0===i.c[0].sn||i.c[0].compressed||(i.sn=i.c[0].sn,i.compressed=!0,i.c.pop()))}else i.e&&(i.o=A,i.c=s?i.e(t,l,null):"")}};return p(f,u,!0),o&&(c||f.push(b),1!==f.length||""!==f[0].sn||f[0].compressed||f.pop()),f},D=function(e,t){return function(n){if(this[e](n),t)return!1}},R=function(e,t,n,i,a,s,c,f){for(var p=null,h=0,g=null,v=0;v<e.length;v++){var _=c,y=e[v];if(3===y.t)p=y.e?t.createTextNode(y.e(i,a,null)):t.createTextNode(y.c),y.e&&l.addBindings(s,_,y.b,p,y),o.appendChild(n,p);else{var m=y.cl,b=y.st,S=y.a,T=!1;for(h=0;h<S.length;h++)if((g=S[h]).d){var I=d[g.n].create(g.n,g,y,i,a,s,_,f,t,R,n);if(d[g.n].requireBlock){p=I,o.appendChild(n,p),T=!0;break}}if(T)continue;if(y.v)p=t.createVirtualNode(y.n);else if(y.p){for(p=t.cloneNativeNode(y.p),h=0;h<S.length;h++)(g=S[h]).d||(g.ev?f(p,g.ev,g.v,g.evCatch):g.o===O?p.__domElement&&(g.o(p.__domElement,g.n,g.e(i,a,null)),l.addBindings(s,_,g.b,p.__domElement,g)):(g.e&&g.o(p,g.n,g.e(i,a,null)),(g.e||g.o===w||g.o===C)&&l.addBindings(s,_,g.b,p,g)));b&&b.e&&("dom"===r.documentBackend?p.setAttribute("style",b.e(i,a,null)):"custom"===r.documentBackend&&p.__domElement.setStyle(b.e(i,a,null)),l.addBindings(s,_,b.b,p,b))}else{if(y.cpf){var A={},k=t.__wxHost;for(var x in y.cpf)!function(e){var t=y.cpf[e];A[e]=k.__behavior.methods[t]}(x);t.__childrenPropsFilter=A}for(p=t.createComponent(y.n,void 0,y.g,void 0),h=0;h<S.length;h++)if(!(g=S[h]).d){var P=g.v;g.o===E&&u.hasPublicProperty(p,g.n)?(g.e&&(P=g.e(i,a,null),l.addBindings(s,_,g.b,p,g)),g.e?E(p,g.n,P):p.__behavior.properties[g.n].type===Boolean?E(p,g.n,!0):E(p,g.n,P)):g.ev?f(p,g.ev,P,g.evCatch):g.o!==E&&(g.e&&(P=g.e(i,a,null),l.addBindings(s,_,g.b,p,g)),g.o(p,g.n,P))}b&&(b.e?("dom"===r.documentBackend?p.__domElement.setAttribute("style",b.e(i,a,null)):"custom"===r.documentBackend&&p.__domElement.setStyle(b.e(i,a,null)),l.addBindings(s,_,b.b,p.__domElement,b)):"dom"===r.documentBackend?p.__domElement.setAttribute("style",b.v):"custom"===r.documentBackend&&p.__domElement.setStyle(b.v))}y.id&&(p.id=y.id),m&&(m.e?p.class=m.e(i,a,null):p.class=m.v,m.o&&l.addBindings(s,_,m.b,p,m)),y.sl&&(p.slot=y.sl),void 0!==y.sn&&o.setSlotName(p,y.sn),o.appendChild(n,p),R(y.c,t,p,i,a,s,_,f)}}},j=function(e,t,n){for(var r=e.childNodes,i=0;i<r.length;i++){var o=r[i];o instanceof s||(o.__id&&(t[o.__id]=o),void 0!==o.__slotName&&(n[o.__slotName]=o),j(o,t,n))}},N=function(e,t,n,r,i,o){for(var a=null,s=0,c=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&l.addBindings(i,o,d.b,a,d),t.appendChild(a);else{var f=d.cl,p=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(c=h[s]).e&&l.addBindings(i,o,c.b,a,c);t.appendChild(a),d.id&&(n[d.id]=a),f&&f.e&&l.addBindings(i,o,f.b,a,f),p&&p.e&&l.addBindings(i,o,p.b,a,p),void 0!==d.sn&&(r[d.sn]=a),N(d.c,a,n,r,i,o)}}};f.prototype.createInstance=function(e){var t=Object.create(p.prototype),n=JSON.parse(this._initValuesJSON),i=null===this._dataJSON?n:JSON.parse(this._dataJSON),o=Object.create(null),a=Object.create(null),s=[],u=l.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(d=document.createDocumentFragment()),N(this._tagTreeRoot,d,o,a,u,{}),a[""]||(a[""]=null);else{if(d=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var f in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[f]||(d.__childrenPropsFilter[f]=e.ownerShadowRoot.__childrenPropsFilter[f]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;R(this._tagTreeRoot,d,d,n,{},u,{},(function(e,t,n,r){d.__wxHost?e.addListener(t,D(n,r).bind(d.__wxHost)):s.push({target:e,name:t,func:D(n,r)})})),j(d,o,a)}return t.data=i,t.shadowRoot=d,t.idMap=o,t.slots=a,t.listeners=s,t._topScope=u,t},p.prototype.updateValues=function(e,t,n){for(var r=o.getMethodCaller(e),i=0;i<n.length;i++){var a=n[i];l.updateBinding(this._topScope,a,t,{},r)}},e.exports=f}).call(t,n(23))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function o(){h&&f&&(h=!1,f.length?p=f.concat(p):g=-1,p.length&&a())}function a(){if(!h){var e=i(o);h=!0;for(var t=p.length;t;){for(f=p,p=[];++g<t;)f&&f[g].run();g=-1,t=p.length}f=null,h=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var u,l,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],h=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||h||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,i,o,a,s){for(var c={inc:1,name:e,exp:i,lp:o,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var l=a[u];null===l[0]?r(t,l,null,c):r(n[l[0]],l,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=n.addBinding=function(e,t,n,r){for(var i=e,o=1;o<t.length;o++){var a=t[o];i.children||(i.children=Object.create(null));var s=i.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),i=s[a]}var c=e.inc++;return n?i.targets[c]=[n,r]:(i.scopes[c]=r,r.__scopeBinded.push([i,c])),c};n.addBindings=function(e,t,n,i,o){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,i,o):r(e,s,i,o)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var r=t[n];delete r[0].scopes[r[1]]}};var i=function(e,t,n,r,i){if(e.linked)o(e,t,n,r,i);else{var a=r[e.name];r[e.name]=e.exp(n,r,i),o(e,t,n,r,i),r[e.name]=a}},o=n.updateBinding=function(e,t,n,r,o){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)i(a.scopes[s],t,n,r,o);var u=t[c];if(!a.children)return;var l=a.children;if(!l[u])return;a=l[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,r,o))}for(s in e.scopes)i(e.scopes[s],[],n,r,o);for(s in e.children)d(e.children[s])};d(a)};e.exports=n},function(e,t,n){e.exports={if:n(26),elif:n(26),else:n(26),for:n(29),key:n(30),"for-index":n(31),"for-item":n(32),alias:n(33)}},function(e,t,n){var r=n(24),i=n(27).RUNTIME_NAMES,o=n(28),a=i.TOP_SCOPE+","+i.SUB_SCOPE+","+i.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,n){if("else"===e)return{s:[],d:"true"};var r=t.match(/^\{\{(.+)\}\}$/);if(!r)throw new Error("Illegal expression is found in wx:"+e+".");var i=o.parse(r[1]),s=o.searchBindingPaths([i],n);return{s:[],d:"function("+a+"){return "+o.stringify(i,n)+"}",b:s}},register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l,d){var f=u.createVirtualNode("wx:"+e);f.__wxIfCondValue=!0,f.__wxIfNextNode=null,f.__wxIfHasTrueCond=!0;var p=null;"if"!==e&&("wx:if"!==(p=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==p.is?p=null:p.__wxIfNextNode=f),n.id&&(f.id=n.id);var h=f.__wxIfUpdateNode=function(){var e=f.__wxIfCondValue;if(p&&p.__wxIfHasTrueCond&&(e=!1),e&&!f.childNodes.length){var t=r.proxyTopScope(a),d=r.proxySubScopes(s);f.__wxTopScope=t,f.__wxSubScopes=d,l(n.c,u,f,i,o,t,d,c)}else if(!e&&f.childNodes.length){for(var h in r.removeBindingsForScope(f.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(f.__wxSubScopes[h]);for(;f.childNodes.length;)f.removeChild(f.childNodes[0])}f.__wxIfNextNode&&f.__wxIfNextNode.__wxIfUpdateNode()},g=function(e){f.__wxIfCondValue=!!e,f.__wxIfHasTrueCond=f.__wxIfCondValue||p&&p.__wxIfHasTrueCond,h()};return"else"===e?g(!0):(r.addBindings(a,s,t.b,f,{e:t.d,o:function(e,t,n){g(n)}}),g(t.d(i,o,null))),f}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},i="";for(var o in n)r[n[o]]=o,i+=n[o];t.STRING_ESCAPE_REGEXP=new RegExp("["+i+"]","g")},function(e,t,n){var r=n(1),i=n(27).RUNTIME_NAMES,o=n(27).STRING_UNESCAPE_MAP,a=n(27).STRING_ESCAPE_MAP,s=n(27).STRING_ESCAPE_REGEXP,c=null,u=" \n\r\t\f",l=["true","false","null","undefined"];t.parse=function(e){return c||(c=r.create({VARIABLE:[{id:"_concat",states:["a-zA-Z_$","VARIABLE_AFTER"]}],VARIABLE_AFTER:[{id:"_concat",states:["a-zA-Z_$0-9","VARIABLE_AFTER"]},{id:"_null",states:["NULL"]}],STRING:[{id:"str^",states:["'","STRING_INNER_1","'"]},{id:"str^",states:['"',"STRING_INNER_2",'"']}],STRING_INNER_1:[{id:"_concat",states:["STRING_INNER_1","STRING_INNER_1_CHAR"]},{id:"_jump",states:["STRING_INNER_1_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_1_CHAR:[{id:"_jump",states:["^'\\"]},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],STRING_INNER_2:[{id:"_concat",states:["STRING_INNER_2","STRING_INNER_2_CHAR"]},{id:"_jump",states:["STRING_INNER_2_CHAR"]},{id:"_jump",states:["NULL"]}],STRING_INNER_2_CHAR:[{id:"_jump",states:['^"\\']},{id:"str\\",states:["\\","nrbftv'\"\\\r\n"]}],NUMBER:[{id:"_concat",states:["NUMBER_BEFORE_E","NUMBER_E"]}],NUMBER_E:[{id:"_concat",states:["e","NUMBER_AFTER_E"]},{id:"_null",states:["NULL"]}],NUMBER_AFTER_E:[{id:"_concat",states:["-","NUMBER_AFTER_E-INT"]},{id:"_jump",states:["NUMBER_AFTER_E-INT"]}],"NUMBER_AFTER_E-INT":[{id:"_concat",states:["NUMBER_AFTER_E-INT","0-9"]},{id:"_jump",states:["0-9"]}],NUMBER_BEFORE_E:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0","NUMBER_AFTER_ZERO"]},{id:"_concat",states:["1-9","NUMBER_AFTER_NON_ZERO"]}],NUMBER_AFTER_ZERO:[{id:"_concat",states:["x","NUMBER_BASE_16"]},{id:"_jump",states:["NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_BASE_16:[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]}],"NUMBER_BASE_16-AFTER":[{id:"_concat",states:["0-9a-fA-F","NUMBER_BASE_16-AFTER"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_NON_ZERO:[{id:"_concat",states:[".","NUMBER_AFTER_DOT"]},{id:"_concat",states:["0-9","NUMBER_AFTER_NON_ZERO"]},{id:"_null",states:["NULL"],overwrite:!0}],NUMBER_AFTER_DOT:[{id:"_concat",states:["NUMBER_AFTER_DOT","0-9"]},{id:"_jump",states:["0-9"]}],VALUE:[{id:"_blank",states:[u,"VALUE"],overwrite:!0},{id:"_jump",states:["VALUE_NOSPACE"]}],VALUE_NOSPACE:[{id:"_jump",states:["VALUE_NOSPACE",u]},{id:"var",states:["VARIABLE"]},{id:"str",states:["STRING"]},{id:"num",states:["NUMBER"]},{id:"()",states:["(","COMMA",")"]},{id:"al",states:["[","ARRAY_ITEMS","]"]},{id:"ol",states:["{","OBJECT_ITEMS","}"]}],ARRAY_ITEMS:[{id:"_blank",states:[u,"ARRAY_ITEMS"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEMS_NOSPACE"]}],ARRAY_ITEMS_NOSPACE:[{id:"_join",states:["ARRAY_ITEMS_NOSPACE",",","ARRAY_ITEM"]},{id:"_jump",states:["ARRAY_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],ARRAY_ITEM:[{id:"_blank",states:[u,"ARRAY_ITEM"],overwrite:!0},{id:"_jump",states:["ARRAY_ITEM_NOSPACE"]}],ARRAY_ITEM_NOSPACE:[{id:"ai",states:["CONDITIONAL"]},{id:"aie",states:["NULL"],overwrite:!0}],OBJECT_ITEMS:[{id:"_join",states:["OBJECT_ITEMS",",","OBJECT_ITEM_AFTER_COMMA"]},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM_AFTER_COMMA:[{id:"_blank",states:[u,"OBJECT_ITEM_AFTER_COMMA"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM"]},{id:"_empty",states:["NULL"],overwrite:!0}],OBJECT_ITEM:[{id:"_blank",states:[u,"OBJECT_ITEM"],overwrite:!0},{id:"_jump",states:["OBJECT_ITEM_NOSPACE"]}],OBJECT_ITEM_NOSPACE:[{id:"_jump",states:["OBJECT_ITEM_NOSPACE",u]},{id:"onv",states:["VARIABLE","OBJECT_ITEM_AFTER"]},{id:"ons",states:["STRING","OBJECT_ITEM_AFTER"]},{id:"onn",states:["NUMBER","OBJECT_ITEM_AFTER"]}],OBJECT_ITEM_AFTER:[{id:"_blank",states:[u,"OBJECT_ITEM_AFTER"],overwrite:!0},{id:"ov",states:[":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],MEMBER:[{id:"_jump",states:["MEMBER",u]},{id:"_op2",states:["MEMBER",".","VARIABLE_WITH_BLACK"]},{id:"[]",states:["MEMBER","[","CONDITIONAL","]"]},{id:"f()",states:["MEMBER","(","FUNCARGS",")"]},{id:"_jump",states:["VALUE"]}],VARIABLE_WITH_BLACK:[{id:"_blank",states:[u,"VARIABLE_WITH_BLACK"],overwrite:!0},{id:"_jump",states:["VARIABLE"]}],FUNCARGS:[{id:"_blank",states:[u,"FUNCARGS"],overwrite:!0},{id:"_join",states:["FUNCARGS",",","CONDITIONAL"]},{id:"fa",states:["CONDITIONAL"]},{id:"_empty",states:["NULL"],overwrite:!0}],LOGICAL:[{id:"_blank",states:[u,"LOGICAL"],overwrite:!0},{id:"_jump",states:["LOGICAL_NOSPACE"]}],LOGICAL_NOSPACE:[{id:"!",states:["!","LOGICAL"]},{id:"!",states:["+","LOGICAL"]},{id:"!",states:["-","LOGICAL"]},{id:"_jump",states:["MEMBER"]}],MULTIPLY:[{id:"_op2",states:["MULTIPLY","*","LOGICAL"]},{id:"_op2",states:["MULTIPLY","/","LOGICAL"]},{id:"_op2",states:["MULTIPLY","%","LOGICAL"]},{id:"_jump",states:["LOGICAL"]}],ADDITION:[{id:"_op2",states:["ADDITION","+","MULTIPLY"]},{id:"_op2",states:["ADDITION","-","MULTIPLY"]},{id:"_jump",states:["MULTIPLY"]}],COMPARISON:[{id:"<>",states:["COMPARISON","<","COMPARISON_AFTER"]},{id:"<>",states:["COMPARISON",">","COMPARISON_AFTER"]},{id:"_jump",states:["ADDITION"]}],COMPARISON_AFTER:[{id:"a=",states:["=","ADDITION"]},{id:"_jump",states:["ADDITION"]}],EQUALITY:[{id:"=!",states:["EQUALITY","=","=","EQUALITY_AFTER"]},{id:"=!",states:["EQUALITY","!","=","EQUALITY_AFTER"]},{id:"_jump",states:["COMPARISON"]}],EQUALITY_AFTER:[{id:"a=",states:["=","COMPARISON"]},{id:"_jump",states:["COMPARISON"]}],LOGICAL_AND:[{id:"&&||",states:["LOGICAL_AND","&","&","EQUALITY"]},{id:"_jump",states:["EQUALITY"]}],LOGICAL_OR:[{id:"&&||",states:["LOGICAL_OR","|","|","LOGICAL_AND"]},{id:"_jump",states:["LOGICAL_AND"]}],CONDITIONAL:[{id:"?",states:["LOGICAL_OR","CONDITIONAL_AFTER"]}],CONDITIONAL_AFTER:[{id:"?:",states:["?","LOGICAL_OR",":","CONDITIONAL"]},{id:"_null",states:["NULL"]}],COMMA:[{id:",",states:["COMMA",",","CONDITIONAL"]},{id:"_jump",states:["CONDITIONAL"]}]},{_null:function(e){},_empty:function(e){return[]},_jump:function(e){return e[0]},_concat:function(e){return(e[0]||"")+(e[1]||"")},_blank:function(e){return e[1]},"str^":function(e){return e[1]},"str\\":function(e){if(!o[e[1]])throw new Error('String escaping "\\'+e[1]+'" is currently not supported.');return o[e[1]]},var:function(e){return{p:"var",v:e[0]}},str:function(e){return{p:"str",v:e[0]}},num:function(e){return{p:"num",v:Number(e[0])}},"()":function(e){return{p:"()",v:e[1]}},al:function(e){return e[1].forEach((function(t,n){null===t&&(n!==e[1].length-1?e[1][n]={p:"var",v:"undefined"}:e[1].pop())})),{p:"arr",v:e[1]}},ai:function(e){return[e[0]]},aie:function(e){return[null]},_join:function(e){return e[0].concat(e[2])},ol:function(e){for(var t={},n=e[1],r=0;r<n.length;r++)t[n[r].n]=n[r].v;return{p:"obj",v:t}},onv:function(e){return[{n:e[0],v:e[1]||{p:"var",v:e[0]}}]},ons:function(e){return[{n:e[0],v:e[1]||{p:"str",v:e[0]}}]},onn:function(e){return[{n:e[0],v:e[1]||{p:"num",v:Number(e[0])}}]},ov:function(e){return e[1]},"!":function(e){return{p:e[0]+"n",v:e[1]}},_op1:function(e){return{p:e[0],v:e[1]}},_op2:function(e){return{p:e[1],v:[e[0],e[2]]}},"f()":function(e){return{p:"f()",v:[e[0],e[2]]}},fa:function(e){return[e[0]]},"[]":function(e){return{p:"[]",v:[e[0],e[2]]}},"<>":function(e){return"a="===e[2].p?{p:e[1]+"=",v:[e[0],e[2].v]}:{p:e[1],v:[e[0],e[2]]}},"a=":function(e){return{p:"a=",v:e[1]}},"=!":function(e){return"a="===e[3].p?{p:e[1]+"==",v:[e[0],e[3].v]}:{p:e[1]+"=",v:[e[0],e[3]]}},"&&||":function(e){return{p:e[1]+e[2],v:[e[0],e[3]]}},"?":function(e){return e[1]?{p:"?:",v:[e[0],e[1][0],e[1][1]]}:e[0]},"?:":function(e){return[e[1],e[3]]},",":function(e){return{p:",",v:[e[0],e[2]]}}})),c.parse("COMMA",e)};var d=t.stringify=function(e,t){var n=function(e){var r=[];switch(e.p){case"var":return l.indexOf(e.v)>=0?e.v:t.indexOf(e.v)>=0?i.SUB_SCOPE+"."+e.v:i.TOP_SCOPE+"."+e.v;case"str":return'"'+e.v.replace(s,(function(e){return"\\"+a[e]}))+'"';case"num":return e.v;case"arr":return e.v.forEach((function(e){r.push(n(e))})),"["+r.join(",")+"]";case"obj":for(var o in e.v){var c='"'+o.replace(s,(function(e){return"\\"+a[e]}))+'"';r.push(c+":"+n(e.v[o]))}return"{"+r.join(",")+"}";case"()":return"("+n(e.v)+")";case".":return i.MEMBER+"("+n(e.v[0])+',"'+e.v[1]+'")';case"[]":return i.MEMBER+"("+n(e.v[0])+","+n(e.v[1])+")";case"f()":if("var"!==e.v[0].p)throw new Error("The function name could only be a variable identifier.");return e.v[1].forEach((function(e){r.push(n(e))})),i.CALL+"("+i.CALLER+","+i.METHODS+',"'+e.v[0].v+'",['+r.join(",")+"])";case"!n":case"+n":case"-n":return"("+e.p[0]+n(e.v)+")";case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return n(e.v[0])+e.p+n(e.v[1]);case"?:":return n(e.v[0])+"?"+n(e.v[1])+":"+n(e.v[2]);default:throw new Error("The AST is illegal.")}};return"("+n(e)+")"};t.lvalueStringify=function(e,t){for(var n=[],r=e;r;){if("var"===r.p)return l.indexOf(r.v)>=0?null:t.indexOf(r.v)>=0?'["'+r.v+'",'+n.join(",")+"]":"[null,"+n.join(",")+"]";if("."!==r.p)if("[]"!==r.p){if("()"!==r.p)return null;r=r.v}else n.unshift(d(r.v[1],t)),r=r.v[0];else n.unshift('"'+r.v[1]+'"'),r=r.v[0]}return null},t.searchBindingPaths=function(e,t){var n=[],r="",i=function(e,o,a){if(a>1)throw new Error("Dynamical binding paths are not supported.");switch(e.p){case"var":if(o){if(l.indexOf(e.v)>=0)return;return t.indexOf(e.v)>=0?['"'+e.v+'"']:['null,"'+e.v+'"']}if(a>=1)throw new Error("Dynamical binding paths are not supported.");if(l.indexOf(e.v)>=0)return;return void(t.indexOf(e.v)>=0?n.push('["'+e.v+'"]'):n.push('[null,"'+e.v+'"]'));case"str":case"num":case"arr":case"obj":return;case"()":return i(e.v,o,a);case".":if(o){if(!(r=i(e.v[0],!0,a)))return;return r.push('"'+e.v[1]+'"'),r}if(!(r=i(e.v[0],!0,a+1)))return;return r.push('"'+e.v[1]+'"'),void n.push("["+r.join(",")+"]");case"[]":if(o){if(!(r=i(e.v[0],!0,a)))return;return i(e.v[1],!0,a),r.push(d(e.v[1])),r}if(!(r=i(e.v[0],!0,a+1)))return;return i(e.v[1],!0,a+1),r.push(d(e.v[1])),void n.push("["+r.join(",")+"]");case"f()":return i(e.v[0],!1,a),void e.v[1].forEach((function(e){i(e,!1,a)}));case"!n":case"+n":case"-n":return void i(e.v,!1,a);case"+":case"-":case"*":case"/":case"%":case">":case"<":case">=":case"<=":case"==":case"!=":case"===":case"!==":case"&&":case"||":case",":return i(e.v[0],!1,a),void i(e.v[1],!1,a);case"?:":return i(e.v[0],!1,a),i(e.v[1],!1,a),void i(e.v[2],!1,a);default:throw new Error("The AST is illegal.")}};return e.forEach((function(e){i(e,!1,0)})),"["+n.join(",")+"]"}},function(e,t,n){var r=(n(18),n(24)),i=n(27).RUNTIME_NAMES,o=n(28),a=i.TOP_SCOPE+","+i.SUB_SCOPE+","+i.CALLER;e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],precompile:function(e,t,n){var r=t.match(/^\{\{(.+)\}\}$/);if(!r)throw new Error("Illegal expression is found in wx:for.");var i=o.parse(r[1]),s=o.lvalueStringify(i,n),c=o.searchBindingPaths([i],n);return{s:[],d:"function("+a+"){return "+o.stringify(i,n)+"}",l:s,b:c}},register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l){var d=n._wxForIndex||"index",f=n._wxForItem||"item",p=n._wxKey,h=u.createVirtualNode("wx:for:list");n.id&&(h.id=n.id),r.create("",a,s,(function(e,n,r){var i=t.d(e,n,null);return m(i,e,n,r),i}),t.l,t.b);var g=function(e,t,i,o,p){var g=u.createVirtualNode("wx:for:item"),v=r.proxyTopScope(a),_=r.proxySubScopes(s);g.__wxTopScope=v,g.__wxSubScopes=_,g.__wxForToRemove=!1,g.__wxForKeyStr="";var y=r.create(d,v,_,null,null,[]),m=r.create(f,v,_,null,[i],[]);return _[d]=y,_[f]=m,t[d]=i,t[f]=o,l(n.c,u,g,e,t,v,_,c),void 0===p?h.appendChild(g):h.insertBefore(g,p),g},v=function(e,t,n,o,a,s){var c=e.__wxSubScopes[f];r.updateLvaluePath(c,[o]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];n[d]=o,r.updateBinding(u,[],i,n,t)},_=function(e,t,n,i,o,a){i[f]=o,r.updateBinding(e.__wxSubScopes[f],t,n,i,a)},y=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},m=function(e,t,n,r){var i="",o=e;"object"==typeof e&&null!==e||(o=[]);var a={};for(i in n)a[i]=n[i];var s=0;if(p){var c=[],u=e instanceof Array,l=[];if(!u){var d=o;for(i in o=[],d)o.push(d[i]),l.push(i)}for(s=0;s<o.length;s++)c.push(String(o[s][p]));if(0===o.length)for(;h.childNodes.length;)y(h.childNodes[0]);else{var f=Object.create(null),m=Object.create(null),b=h.childNodes,w=null,O="";for(s=0;s<b.length;s++)f[O=(w=b[s]).__wxForKeyStr]>=0?(y(w),s--):(f[O]=s,m[O]=w,w.__wxForToRemove=!0);var E=-1,S=0,T=1,I=[];for((S=f[o[0][p]])>=0||(S=-1),b[S]&&(b[S].__wxForToRemove=!1),s=1;s<o.length;s++)(T=f[o[s][p]])>=0&&(E<S&&(S<T||E>T)&&(I.push(b[S]),E=S),b[S=T]&&(b[S].__wxForToRemove=!1));for(E<S&&I.push(b[S]),s=0;s<b.length;s++)(w=b[s]).__wxForToRemove&&(y(w),s--);var A=I.shift(),C=0;for(s=0;s<o.length;s++){var k=o[s],x=m[k[p]];if(m[k[p]]=null,x){var P=!0;if(x===A){for(;b[C]!==A;)C++;C++,A=I.shift(),P=!1}v(w=x,r,a,u?s:l[s],P,b[C]),P&&b[C]===w&&C++,_(w,[],t,a,o[s],r)}else w=g(t,a,u?s:l[s],o[s],b[C]),C++,w.__wxForKeyStr=String(k[p])}}}else{for(;h.childNodes.length;)y(h.childNodes[0]);if(e instanceof Array)for(s=0;s<o.length;s++)g(t,a,s,o[s]);else for(i in o)g(t,a,i,o[i])}};return m(t.d(i,o,null),i,o,null),h}}},function(e,t){e.exports={attachedToBlock:!0,precompile:function(e,t,n){var r=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!r)throw new Error("Illegal variable name is found in wx:for-key.");return{s:[],d:'"'+r[1]+'"'}},register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",precompile:function(e,t,n,r){var i=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!i)throw new Error("Illegal variable name is found in wx:for-index.");return{s:[i[1]],d:'"'+i[1]+'"'}},register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",precompile:function(e,t,n){var r=t.match(/^\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*$/);if(!r)throw new Error("Illegal variable name is found in wx:for-item.");return{s:[r[1]],d:'"'+r[1]+'"'}},register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var r=n(24),i=n(27).RUNTIME_NAMES,o=n(28),a=i.TOP_SCOPE+","+i.SUB_SCOPE+","+i.CALLER;e.exports={requireBlock:!0,precompile:function(e,t,n){var r=t.match(/^\{\{\s*([$_a-zA-Z][$_a-zA-Z0-9]*)\s*=(.+)\}\}$/);if(!r)throw new Error("Illegal expression is found in wx:alias.");var i=r[1],s=o.parse(r[2]),c=o.lvalueStringify(s,n),u=o.searchBindingPaths([s],n);return{s:[i],d:"function("+a+"){return "+o.stringify(s,n)+"}",l:c,b:u}},register:function(e,t,n){},create:function(e,t,n,i,o,a,s,c,u,l){var d=t.s[0],f=r.create(d,a,s,t.d,t.l,t.b),p={},h="";for(h in s)p[h]=s[h];p[d]=f;var g={};for(h in o)g[h]=o[h];g[d]=t.d(i,o,null);var v=u.createVirtualNode("wx:alias");return n.id&&(v.id=n.id),l(n.c,u,v,i,g,a,p,c),v}}},function(e,t,n){var r=n(1),i=n(35),o=n(28),a=n(25),s=n(27).STRING_ESCAPE_REGEXP,c=n(27).STRING_ESCAPE_MAP,u=n(27).RUNTIME_NAMES;t.LLParser=r,t.htmlParser=i,t.expParser=o;var l=u.TOP_SCOPE+","+u.SUB_SCOPE+","+u.CALLER,d=u.MEMBER+","+u.CALL+","+u.METHODS,f=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},p=function(e){return'"'+e.replace(s,(function(e){return"\\"+c[e]}))+'"'},h=function(e){return"["+e.join(",")+"]"},g=function(e){var t=[];for(var n in e)void 0!==e[n]&&(/^[_a-z]+$/i.test(n)?t.push(n+":"+e[n]):t.push(p(n)+":"+e[n]));return"{"+t.join(",")+"}"},v=function(e,t){for(var n=e.split(/\{\{(.*?)\}\}/),r=[],i=[],a=null,s=0;s<n.length;s++){var c=n[s];if(s%2){var u=o.parse(c);a=o.lvalueStringify(u,t),r.push(o.stringify(u,t)),i.push(u)}else r.push(p(c))}if(1===r.length)return{c:r[0]};var d=o.searchBindingPaths(i,t);return'""'===r[r.length-1]&&r.pop(),2===r.length&&'""'===r[0]?{c:void 0,e:"function("+l+"){return "+r[1]+"}",l:a,b:d}:{c:void 0,e:"function("+l+"){return "+r.join("+")+"}",l:null,b:d}},_=function(e,t){var n=v(e.c,t);return n.t=3,n.l=void 0,n.c=n.c||'""',g(n)},y=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(3!==i.t){var o=i.a,s=i.c,c={t:1,n:'"'+i.n+'"',g:void 0,v:void 0,id:void 0,cl:void 0,cpf:void 0,st:void 0,sl:void 0,sn:void 0,a:"",c:""};"slot"===i.n?(c.v=!0,c.sn='""',s=[]):"block"!==i.n&&"virtual"!==i.n||(c.v=!0);var u=0,l=null,d=[],m=null,b=!1,w=!1,O=!1,E=!1,S=Object.create(null),T=[],I=Object.create(null),A=Object.create(null);if(o){for(var C=0;C<o.length;C++){var k=o[C],x=k.n;if(!S[x])if(S[x]=!0,"id"===x)c.id=p(k.v);else if("class"===x||"class$"===x||"class:"===x)(m=v(k.v,t)).e&&(O=!0),c.cl=g({v:m.c,e:m.e,l:void 0,b:m.b});else if("style"===x||"style$"===x||"style:"===x)(m=v(k.v,t)).e&&(E=!0),c.st=g({v:m.c,e:m.e,l:void 0,b:m.b});else if("slot"===x)c.sl=p(k.v);else if("name"===x&&"slot"===i.n)c.sn=p(k.v);else if("generic:"===x.slice(0,8))c.g="",I[x.slice(8)]=p(k.v);else if("filter:"===x.slice(0,7))c.cpf="",A[x.slice(7)]=p(k.v);else if("wx:"===x.slice(0,3)){var P=x.slice(3);if(!Object.prototype.hasOwnProperty.call(a,P))throw new Error('Directive "'+P+'" is not found.');var D=a[P].precompile(P,k.v,t);u+=D.s.length,t=t.concat(D.s);var R=g({s:JSON.stringify(D.s),n:'"'+P+'"',d:D.d,l:D.l,b:D.b}),j=a[P].addDefaultAttrs;if(j&&o.push.apply(o,j),a[P].attachedToBlock)d.push(R);else if(a[P].requireBlock){if(null!==l)throw new Error("Uncompatible directives are used in a single element.");l=R}else T.push(R)}else{var N={n:'"'+k.n+'"',v:p(k.v),o:void 0,e:void 0,l:void 0,b:void 0};if("$"===x.slice(-1)?(N.o='"$"',N.n='"'+x.slice(0,-1)+'"'):":"===x.slice(-1)?(N.o='":"',N.n='"'+f(x.slice(0,-1))+'"'):"&"===x.slice(-1)?(N.o='"&"',N.n='"'+f(x.slice(0,-1))+'"'):"class."===x.slice(0,6)?(N.o='"c"',N.n='"'+x.slice(6)+'"',b=!0):"style."===x.slice(0,6)?(N.o='"s"',N.n='"'+x.slice(6)+'"',w=!0):"data-"===x.slice(0,5)&&(N.o='"d"',N.n='"'+f(x.slice(5))+'"'),"id"===N.n||"slot"===N.n)throw new Error('"id" and "slot" do not support dynamic binding symbol.');m=v(k.v,t),N.v=m.c,N.e=m.e,N.l=m.l,N.b=m.b,T.push(g(N))}}if(O&&b)throw new Error("Class bindings cannot be used with dynamic class property.");if(E&&w)throw new Error("Style bindings cannot be used with dynamic style property.");c.a=h(T),c.c=y(s,t),""===c.g&&(c.g=g(I)),""===c.cpf&&(c.cpf=g(A)),l?'"block"'===c.n&&"[]"===c.a?(c.a="["+d.concat(l).join(",")+"]",n.push(g(c))):n.push(g({t:1,n:'"block"',v:!0,a:"["+d.concat(l).join(",")+"]",c:"["+g(c)+"]"})):n.push(g(c)),t.splice(t.length-u,u)}}else n.push(_(i,t))}return h(n)};t.compile=function(e){var t=i.parse(e),n=y(t,[]);return"function("+d+"){return "+n+"}"}},function(e,t,n){var r=n(1),i=n(27).TAG_TYPES,o=n(4),a={amp:"&",gt:">",lt:"<",nbsp:" ",quot:'"',apos:"'"},s=" \n\r\t\f",c=/^[ \n\r\t\f]+|[ \n\r\t\f]+$/g,u={};["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"].forEach((function(e){u[e]=!0}));var l=o.hasDOMBackend?document.createElement("div"):null,d=function(e){return e.replace(/&(([a-zA-Z]+)|(#x{0,1}[\da-zA-Z]+));/gi,(function(e,t){return a[t]?a[t]:/^#[0-9]{1,4}$/.test(t)?String.fromCharCode(t.slice(1)):/^#x[0-9a-f]{1,4}$/i.test(t)?String.fromCharCode("0"+t.slice(1)):o.hasDOMBackend?function(e){return l?(l.innerHTML=e,l.innerText||l.textContent):e}(e):e}))},f=null,p=null,h=function(e){return r.create({HTML:[{id:"tag",states:["HTML","TAG"]},{id:"text",states:["HTML","TEXT"]},{id:"tag1",states:["TAG"]},{id:"text1",states:["TEXT"]},{id:"_null",states:["NULL"],overwrite:!0}],TEXT:[{id:"_raw",states:["TEXT","^<"]},{id:"_jump",states:["^<"]},{id:"_jump",states:["NULL"]}],TAG:[{id:"_blank",states:["<","TAG_START"]}],TAG_END:[{id:"_blankConcat",states:["/","TAG_END_NAME",">"]},{id:"_jump",states:[">"]}],TAG_START:[{id:"comment",states:["!","-","-","COMMENT_CONTENT"]},{id:"endTag",states:["/","TAG_END_NAME",">"]},{id:"startTag",states:["TAG_START_NAME","ATTRS","TAG_END"]},{id:"_blank",states:[s,"TAG_START"]}],TAG_START_NAME:[{id:"_raw",states:["TAG_START_NAME","^>/"+s]},{id:"_jump",states:["^>/"+s]}],TAG_END_NAME:[{id:"_raw",states:["TAG_END_NAME","^>"]},{id:"_jump",states:["^>"]},{id:"_jump",states:["NULL"]}],ATTRS:[{id:"_blank",states:[s,"ATTRS"]},{id:"_jump",states:["ATTRS",s]},{id:"attrs",states:["ATTR","ATTRS"]},{id:"_null",states:["NULL"],overwrite:!0}],ATTR:[{id:"attr",states:["ATTR_NAME","ATTR_NAME_AFTER"]}],ATTR_NAME:[{id:"_raw",states:["ATTR_NAME","^=>/"+s]},{id:"_jump",states:["^=>/"+s]}],ATTR_NAME_AFTER:[{id:"_blank",states:[s,"ATTR_NAME_AFTER"]},{id:"_blank",states:["=","ATTR_VALUE"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE:[{id:"_blank",states:[s,"ATTR_VALUE"]},{id:"_blank",states:['"',"ATTR_VALUE_INNER_1",'"']},{id:"_blank",states:["'","ATTR_VALUE_INNER_2","'"]},{id:"_jump",states:["ATTR_VALUE_INNER_3"]},{id:"_empty",states:["NULL"]}],ATTR_VALUE_INNER_1:[{id:"_raw",states:["ATTR_VALUE_INNER_1",'^"']},{id:"_jump",states:['^"']},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_2:[{id:"_raw",states:["ATTR_VALUE_INNER_2","^'"]},{id:"_jump",states:["^'"]},{id:"_jump",states:["NULL"]}],ATTR_VALUE_INNER_3:[{id:"_raw",states:["ATTR_VALUE_INNER_3","^>"+s]},{id:"_jump",states:["^>"+s]},{id:"_jump",states:["NULL"]}],COMMENT_CONTENT:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_1"]}],COMMENT_CONTENT_DASH_1:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]}],COMMENT_CONTENT_DASH_2:[{id:"_concat",states:["ALL","COMMENT_CONTENT"]},{id:"_concat",states:["-","COMMENT_CONTENT_DASH_2"]},{id:"_jump",states:[">"]}]},{_null:function(){},_empty:function(){return""},_jump:function(e){return e[0]},_raw:function(e){return e[0]+e[1]},_concat:function(e){return e[0]+e[1]},_blankConcat:function(e){return e[0]+e[2]},_blank:function(e){return e[1]},attr:function(e){return[{n:e[0],v:d(e[1])}]},attrs:function(e){return e[1]?e[0].concat(e[1]):e[0]},startTag:function(e){var t=e[0].toLowerCase();return{t:i.TAG_START,n:t,a:e[1]||[],selfClose:"/>"===e[2]||u[t]}},endTag:function(e){return{t:i.TAG_END,n:e[1].toLowerCase()}},comment:function(e){return{t:i.COMMENT,c:e[3].slice(0,-3)}},tag1:function(e){return[e[0]]},text1:function(e){return[{t:i.TEXT,c:e[0]}]},tag:function(e){return e[0].push(e[1]),e[0]},text:function(e){var t=e[0];return t[t.length-1].t===i.TEXT?t[t.length-1].c+=e[1]:t.push({t:i.TEXT,c:e[1]}),t}},e)},g=function(e,t){for(var n={c:[]},r=n,o=[],a=null,s=0;s<e.length;s++){var u=e[s];if(u.t===i.TAG_START)a={t:i.TAG_START,n:u.n,a:u.a,c:[]},r.c.push(a),u.selfClose||(o.push(r),r=a);else if(u.t===i.TAG_END){var l=o.length-1,f=!0;for(a=r;u.n!==a.n;)if(!(a=o[l--])){f=!1;break}if(f)for(;o.length>l;)r=o.pop()}else u.t===i.TEXT&&(u.c=d(t?u.c:u.c.replace(c,"")),u.c&&r.c.push(u))}return n};t.TAG_TYPES=i,t.decodeEntities=d,t.parse=function(e,t){var n=null;e.length<=65536?(f||(f=h(65536)),n=f):(p||(p=h(1048576)),n=p);var r=n.parse("HTML",e)||[];return g(r,t).c}}])}]),__sclEngine__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";n.r(t),n.d(t,"styles",(function(){return r}));var r=[]},function(e,t,n){"use strict";(function(e){n(25);var t=__exparserSclEngine__.exparser,r=3;t.registerElement({is:"game-ranklist",options:{classPrefix:"game-ranklist",writeIdToDOM:!0},template:'\n    <wx-view class="root">\n      <wx-view class="content">\n        <wx-view class="head">\n          <wx-image class="close" src="'.concat("http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png",'" bind:tap="close"></wx-image>\n          <wx-view class="title">{{title}}</wx-view>\n          <wx-view class="close"></wx-view>\n        </wx-view>\n        <wx-view class="line"></wx-view>\n        <wx-view class="body">\n          <wx-view wx:for="{{show}}" wx:key="index">\n            <wx-view class="item">\n              <wx-image class="icon" src="{{item.head_img_url}}"></wx-image>\n              <wx-view class="name">{{item.user_name}}</wx-view>\n              <wx-view class="score">{{item.score_desc}}</wx-view>\n            </wx-view>\n            <wx-view class="line"></wx-view>\n          </wx-view>\n        </wx-view>\n        <wx-view class="buttons">\n          <wx-view class="button" bind:tap="left">\n            <wx-image class="btn-icon {{canl ? \'\' : \'disabled\'}}" src="').concat("https://res.wx.qq.com/a/fed_upload/d71d0af9-0fb5-4fd6-aa3c-f9ff1494435e/left.png",'"></wx-image>\n          </wx-view>\n          <wx-view class="button" bind:tap="right">\n            <wx-image class="btn-icon {{canr ? \'\' : \'disabled\'}}" src="').concat("https://res.wx.qq.com/a/fed_upload/dfbbd68d-9cfc-4ddc-a77a-3f049f3757f5/right.png",'"></wx-image>\n          </wx-view>\n        </wx-view>\n      </wx-view>\n    </wx-view>\n  '),properties:{title:{type:String,value:""},list:{type:Array,value:[]}},data:{page:0,canl:!1,canr:!1,show:[],all:[]},observers:{list:function(t){r="portrait"===e.__wxConfig.deviceOrientation?5:3,Array.isArray(t)&&this.setData({page:0,all:t,canr:t.length>r,show:t.slice(0,r)})}},methods:{left:function(){if(this.data.canl){var e=this.data.page-1;this.setData({page:e,canl:e>0,canr:this.data.all.length>r*(e+1),show:this.data.all.slice(r*e,r*(e+1))})}},right:function(){if(this.data.canr){var e=this.data.page+1;this.setData({page:e,canl:e>0,canr:this.data.all.length>r*(e+1),show:this.data.all.slice(r*e,r*(e+1))})}},close:function(){this.triggerEvent("destroy")}}})}).call(this,n(24))},function(e,t,n){var r=n(4);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".__wx_scl__root_node{width:100vw}.__wx_scl__layer{-wx-partial-z-index:1001}.root{height:100vh;display:flex;background:rgba(32,32,32,.75);overflow:hidden;font-size:16px;opacity:.1;transition:opacity .2s ease-out}.root-in{opacity:1}.content{background:#f8f8f8;color:#444;border-radius:10px;transition:transform .2s ease-out;padding-bottom:10px;display:flex;flex-direction:column;text-align:center}@media(orientation: portrait){.root{flex-direction:column-reverse}.content{height:310px;transform:translateY(310px)}.content-in{transform:translateY(10px)}}@media(orientation: landscape){.root{flex-direction:row-reverse}.content{height:100vh;width:410px;transform:translateX(410px)}.content-in{transform:translateX(10px)}}.title{font-weight:bold;font-size:1.5em;line-height:2em}.body{flex:1;font-size:1.2em;padding-top:50px}.buttons{font-size:1.2em;display:flex;flex-direction:row;justify-content:center;padding-bottom:50px}.button{width:120px;padding:.5em .1em;background:#fff;margin:0 20px;border-radius:4px;border:1px solid #ccc}.ok{background:#00ffd2;border:1px solid #0ca}.ok-hover{background:#0ca}.deny-hover{background:#ccc}",""]),t.default=i},function(e,t){var n=__exparserSclEngine__,r=n.exparser,i=[];n.onThemeChange((function(e){i.forEach((function(t){return t(e)}))})),r.registerBehavior({is:"wx-theme",data:{theme:"light"},created:function(){this._onThemeChange({theme:n.getTheme()})},attached:function(){this.__onThemeChange=this._onThemeChange.bind(this),i.push(this.__onThemeChange)},detached:function(){i.splice(i.indexOf(this.__onThemeChange),1)},methods:{_onThemeChange:function(e){var t=e.theme;this.setData({theme:t})}}})},function(e,t,n){var r=n(7);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".mp-bubble-action-sheet--menu{background-color:#ededed;position:relative;top:0;right:0;height:138px;width:100%;padding:24px;display:flex;flex-direction:row;justify-content:space-evenly}.mp-bubble-action-sheet--cell{position:relative}.mp-bubble-action-sheet--cell-img-container{width:56px;height:56px;padding:12px;background-color:#fff;border:0px;border-radius:12px}.mp-bubble-action-sheet--cell__hover .mp-bubble-action-sheet--cell-img-container{background-color:#ececec}.mp-bubble-action-sheet--cell-img{width:32px;height:32px}.mp-bubble-action-sheet--cell-desc{font-size:10px;color:rgba(0,0,0,.5);text-align:center;margin-top:8px}.mp-bubble-action-sheet--foot{position:relative;width:100%}.mp-bubble-action-sheet--button{position:relative;padding-bottom:env(safe-area-inset-bottom);background-color:#fff}.mp-bubble-action-sheet--button__before{position:absolute;top:0;left:0;right:0;height:1px;background-color:rgba(0,0,0,.1);transform-origin:0 0;transform:scaleY(0.5)}.mp-bubble-action-sheet--button__content{padding:0 16px;text-align:center;font-size:17px;line-height:56px;vertical-align:middle;color:rgba(0,0,0,.9);height:56px}.mp-bubble-action-sheet--button__hover{background-color:#ececec}@media(orientation: portrait){.mp-bubble-action-sheet--content{width:100vw}}@media(orientation: landscape){.mp-bubble-action-sheet--content{width:100vh}}@media(prefers-color-scheme: dark){.mp-bubble-action-sheet--menu{background-color:#111}.mp-bubble-action-sheet--cell-img-container{background-color:#1f1f1f}.mp-bubble-action-sheet--cell__hover .mp-bubble-action-sheet--cell-img-container{background-color:#373737}.mp-bubble-action-sheet--cell-desc{color:rgba(255,255,255,.5)}.mp-bubble-action-sheet--button{background-color:#1f1f1f}.mp-bubble-action-sheet--button__before{background-color:rgba(255,255,255,.05)}.mp-bubble-action-sheet--button__content{color:rgba(255,255,255,.8)}.mp-bubble-action-sheet--button__hover{background-color:#373737}}",""]),t.default=i},function(e,t,n){var r=n(9);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".mp-dialog--root{height:100vh;width:100vw;display:flex;font-size:16px;overflow:hidden;flex-direction:column;align-items:center;-wx-partial-z-index:1001}.mp-dialog--mask{position:absolute;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.6);opacity:0;transition:opacity .2s ease-in}.mp-dialog--mask__in{opacity:1}.mp-dialog--container{position:absolute;top:0;right:0;left:0;bottom:0;display:flex;justify-content:center;align-items:center}.mp-dialog--content{background-color:#fff;text-align:center;border-radius:8px;overflow:hidden;display:flex;flex-direction:column;width:320px;opacity:0;transition:opacity .2s ease-in}.mp-dialog--content__in{opacity:1}.mp-dialog--head{margin-top:32px;margin-left:24px;margin-bottom:0;margin-right:24px;height:24px}.mp-dialog--title{font-weight:bold;font-size:17px;line-height:1.4}.mp-dialog--body{padding-left:24px;padding-right:24px;font-size:17px;line-height:1.4;color:rgba(0,0,0,.5)}.mp-dialog--foot{display:flex}.mp-dialog--foot{position:relative;height:56px;line-height:56px;font-size:17px}.mp-dialog--foot__after{position:absolute;left:0;top:0;right:0;height:1px;background-color:rgba(0,0,0,.1);transform-origin:0 0;transform:scaleY(0.5)}.mp-dialog--button{display:block;flex:1;color:#576b95;font-weight:bold;text-decoration:none;position:relative}.mp-dialog--button__active{background-color:#ececec}.mp-dialog--button__after{position:absolute;left:0;top:1px;width:1px;bottom:0;background-color:rgba(0,0,0,.1);transform-origin:0 0;transform:scaleX(0.5)}.mp-dialog--button__first-child__after{display:none}.mp-dialog--button__default{color:rgba(0,0,0,.9)}@media(prefers-color-scheme: dark){.mp-dialog--content{background-color:#1e1e1e;color:#fff}.mp-dialog--body{background-color:#1e1e1e;color:rgba(255,255,255,.5)}.mp-dialog--button{color:#7d90a9}.mp-dialog--button__default{color:rgba(255,255,255,.6)}.mp-dialog--button__active{background-color:#373737}.mp-dialog--foot__after,.mp-dialog--button__after{background-color:rgba(255,255,255,.05)}}",""]),t.default=i},function(e,t,n){var r=n(11);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".mp-half-screen-dialog--content{margin-bottom:env(safe-area-inset-bottom);text-align:center;padding:24px;width:100%}.mp-half-screen-dialog--head{margin-top:8px;max-height:48px;color:rgba(0,0,0,.9)}.mp-half-screen-dialog--title{font-weight:bold;font-size:17px;line-height:1.4}.mp-half-screen-dialog--body{padding-left:24px;padding-right:24px;font-size:17px;line-height:1.4;color:rgba(0,0,0,.9)}.mp-half-screen-dialog--foot{display:flex;position:relative;margin-top:24px;font-size:17px;justify-content:center}.mp-half-screen-dialog--button{height:40px;width:120px;line-height:40px;border-radius:4px;background:#f2f2f2;display:block;color:#06ae56;font-weight:bold;text-decoration:none;position:relative;letter-spacing:1px;text-align:center;margin-left:8px;margin-right:8px}.mp-half-screen-dialog--button.mp-half-screen-dialog--button__active{background-color:#e6e6e6}.mp-half-screen-dialog--button__primary{background:#07c160;color:#fff}.mp-half-screen-dialog--button__primary.mp-half-screen-dialog--button__active{background-color:#06ae56}@media(prefers-color-scheme: dark){.mp-half-screen-dialog--head{color:rgba(255,255,255,.8)}.mp-half-screen-dialog--body{color:rgba(255,255,255,.8)}.mp-half-screen-dialog--button{background:rgba(255,255,255,.08);color:#d6d6d6}.mp-half-screen-dialog--button.mp-half-screen-dialog--button__active{background-color:rgba(255,255,255,.126)}.mp-half-screen-dialog--button__primary{background:#07c160;color:#fff}.mp-half-screen-dialog--button__primary.mp-half-screen-dialog--button__active{background-color:rgba(6,174,86,.6)}}",""]),t.default=i},function(e,t,n){var r=n(13);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".mp-half-screen-popup--root{height:100vh;width:100vw;font-size:16px;overflow:hidden;-wx-partial-z-index:1001}.mp-half-screen-popup--mask{position:absolute;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.6);opacity:0;transition:opacity .2s ease-in}.mp-half-screen-popup--mask__in{opacity:1}.mp-half-screen-popup--container{position:absolute;transition:transform .2s linear;width:100%;top:100%;left:0;right:0;transform:translateY(0%);display:flex;flex-direction:row;justify-content:center}.mp-half-screen-popup--container__in{transform:translateY(-100%)}.mp-half-screen-popup--content{width:100vw;background-color:#fff;color:#000;border-radius:12px;position:relative;margin-bottom:-12px;padding-bottom:12px;overflow:hidden}@media(orientation: portrait){.mp-half-screen-popup--content{width:100vw}}@media(orientation: landscape){.mp-half-screen-popup--content{width:100vh}}@media(prefers-color-scheme: dark){.mp-half-screen-popup--content{background-color:#191919;color:#fff}}",""]),t.default=i},function(e,t,n){var r=n(15);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".mp-horizonal-bubble--root{height:100vh;width:100vw;font-size:16px;overflow:hidden;-wx-partial-z-index:1001}.mp-horizonal-bubble--mask{position:absolute;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.85);opacity:0;transition:opacity .2s ease-in}.mp-horizonal-bubble--mask__in{opacity:1}.mp-horizonal-bubble--content{display:flex;height:100vh;width:100vw}.mp-horizonal-bubble--close-container{position:relative;height:100vh;transition:transform .2s linear;transform:translateX(-100%)}.mp-horizonal-bubble--close-container__in{transform:translateX(0%)}.mp-horizonal-bubble--close-btn{position:absolute;left:76px;bottom:37px;height:32px;width:32px;padding:4px;border-radius:16px;overflow:hidden;background-color:#3e3c3f}.mp-horizonal-bubble--close-btn-img{height:24px;width:24px}.mp-horizonal-bubble--close-btn__hover{background-color:#373737}.mp-horizonal-bubble--content-container{height:100vh}.mp-horizonal-bubble--menu-container{height:100vh;transition:transform .2s linear;transform:translateX(100%)}.mp-horizonal-bubble--menu-container__in{transform:translateX(0%)}.mp-horizonal-bubble--menu{height:100%;display:flex;flex-direction:row}.mp-horizonal-bubble--menu-before{flex-grow:1}.mp-horizonal-bubble--menu-inner{flex-grow:0;height:100%;display:flex;flex-direction:column;justify-content:space-between}.mp-horizonal-bubble--menu-after{flex-grow:3}.mp-horizonal-bubble--cell{position:relative}.mp-horizonal-bubble--cell-img-container{width:56px;height:56px;padding:12px;background-color:#fff;border:0px;border-radius:12px}.mp-horizonal-bubble--cell__hover .mp-horizonal-bubble--cell-img-container{background-color:#ececec}.mp-horizonal-bubble--cell-img{width:32px;height:32px}.mp-horizonal-bubble--cell-desc{font-size:10px;color:rgba(255,255,255,.5);text-align:center;margin-top:8px;height:14px}.mp-horizonal-bubble--cell-img-container{background-color:#1f1f1f}.mp-horizonal-bubble--cell__hover .mp-horizonal-bubble--cell-img-container{background-color:#373737}.mp-horizonal-bubble--cell-desc{color:rgba(255,255,255,.5)}@media(min-height: 350px){.mp-horizonal-bubble--menu-inner{padding-top:68px;padding-bottom:24px}}@media(max-height: 350px){.mp-horizonal-bubble--menu-inner{padding-top:44px;padding-bottom:24px}}@media(min-width: 667px){.mp-horizonal-bubble--close-container,.mp-horizonal-bubble--menu-container{flex-grow:1;flex-basis:0}.mp-horizonal-bubble--content-container{width:350px}}@media(max-width: 667px){.mp-horizonal-bubble--close-container,.mp-horizonal-bubble--menu-container{width:158px;flex-grow:0}.mp-horizonal-bubble--content-container{flex-grow:1;flex-basis:0}}",""]),t.default=i},function(e,t,n){var r=n(17);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".werun--root{height:100vh;width:100vw;display:flex;font-size:16px;overflow:hidden;flex-direction:column;align-items:center;-wx-partial-z-index:1001}.werun--mask{width:100%;height:100%;background:#000;opacity:0;transition:opacity .2s linear}.werun--mask-in{opacity:.4}.werun--container{overflow:hidden;height:100%;position:absolute;left:50%;bottom:-12px;transform:translateX(-50%)}.werun--content{display:flex;flex-direction:column;transition:transform .2s linear;width:100%;height:358px;border-radius:12px;background:#fff;position:absolute;top:100%;left:0}.werun--content-in{transform:translateY(-100%)}.werun--note-content{position:absolute;bottom:0;left:100%;width:100%;height:338px;background:#fff;border-radius:12px;display:flex;flex-direction:column;transition:transform .2s ease-out}.werun--note-content-in{transform:translateX(-100%)}.werun--note-back{display:inline-block;width:11px;height:24px}.werun--note-back-wrp{position:absolute;left:0;top:0;width:41px;height:64px;display:flex;justify-content:center;align-items:center}.werun--note-title{opacity:.9;font-size:15px;width:100%;height:21px;line-height:21px;color:#000;text-align:center;font-weight:bold}.werun--note-detail{font-size:14px;height:46px;margin:12px 0 20px 0;padding-left:24px;padding-right:24px;color:rgba(0,0,0,.9)}.werun--note-guide{width:280px;height:118px}.werun--note-guide-wrap{height:118px;width:100%;display:flex;justify-content:center}.werun--head{height:64px;display:flex;align-items:center}.werun--title{margin-left:24px;opacity:.9;color:#000;font-size:15px;font-weight:bold;height:21px;line-height:21px;flex-grow:1}.werun--info{display:inline-block;width:20px;height:20px}.werun--info-wrp{position:absolute;right:0;top:0;padding:10px;width:48px;height:100%;display:flex;align-items:center}.werun--body{flex:1;flex-direction:column}.werun--sport-list{display:flex;margin:4px 0 0 20px;flex-direction:column;color:rgba(0,0,0,.5);font-size:14px}.werun--sport-item{margin-bottom:8px;height:20px;line-height:20px}.werun--buttons{width:100%;height:40px;position:absolute;bottom:78px;left:0;font-size:17px;font-weight:bold;display:flex;flex-direction:row;justify-content:center}.werun--button{width:120px;height:40px;line-height:40px;text-align:center;margin:0 8px;border-radius:4px}.werun--cancel{background:#f2f2f2;color:#07c160}.werun--confirm{background:#04c160;color:#fff}@media(orientation: portrait){.werun--container{width:100vw}}@media(orientation: landscape){.werun--container{width:100vh}}@media(prefers-color-scheme: dark){.werun--content{background:#2c2c2c}.werun--note-content{background:#2c2c2c}.werun--title{opacity:.8;color:#fff}.werun--note-title{opacity:.8;color:#fff}.werun--note-detail{opacity:.8;color:#fff}.werun--sport-list{color:rgba(255,255,255,.5)}.werun--cancel{background:rgba(255,255,255,.08);color:#fff}}",""]),t.default=i},function(e,t,n){var r=n(19);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".authorize--root{height:100vh;width:100vw;display:flex;font-size:16px;overflow:hidden;flex-direction:column;align-items:center;-wx-partial-z-index:1001}.authorize--mask{width:100%;height:100%;background:#000;opacity:0;transition:opacity .2s linear}.authorize--mask-in{opacity:.4}.authorize--container{overflow:hidden;height:100%;position:absolute;left:50%;bottom:-12px;transform:translateX(-50%)}.authorize--content{display:flex;flex-direction:column;transition:transform .2s linear;padding:0 24px;width:100%;height:250px;border-radius:12px;background:#fff;position:absolute;top:100%;left:0}.authorize--content-in{transform:translateY(-100%)}.authorize--head{height:64px;display:flex;align-items:center}.authorize--icon{width:24px;height:24px}.authorize--title{margin-left:8px;opacity:.9;color:#000;font-size:15px;font-weight:bold;height:21px;line-height:21px;flex-grow:1}.authorize--body{flex:1;flex-direction:column;margin-top:4px}.authorize--apply-info{opacity:.9;font-size:17px;color:#000;font-weight:bold;height:23.8px;line-height:23.8px}.authorize--buttons{width:100%;height:40px;position:absolute;bottom:78px;left:0;font-size:17px;font-weight:bold;display:flex;flex-direction:row;justify-content:center}.authorize--button{width:120px;height:40px;line-height:40px;text-align:center;margin:0 8px;border-radius:4px}.authorize--cancel{background:#f2f2f2;color:#07c160}.authorize--confirm{background:#04c160;color:#fff}@media(orientation: portrait){.authorize--container{width:100vw}}@media(orientation: landscape){.authorize--container{width:100vh}}@media(prefers-color-scheme: dark){.authorize--content{background:#2c2c2c}.authorize--title{opacity:.8;color:#fff}.authorize--apply-info{opacity:.8;color:#fff}.authorize--cancel{background:rgba(255,255,255,.08);color:#fff}}",""]),t.default=i},function(e,t,n){var r=n(21);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".navigate-to-mp--body{display:flex;padding-top:24px;padding-bottom:12px;flex-direction:column;align-items:center}.navigate-to-mp--body-placeholder{padding-top:16px}.navigate-to-mp--logo{flex:none;height:48px;width:48px;margin-bottom:8px;border-radius:24px;overflow:hidden}.navigate-to-mp--name{flex:auto;display:block;color:rgba(0,0,0,.9);font-size:17px;line-height:22px;margin-top:8px;height:22px;width:100%}.navigate-to-mp--desc{flex:auto;display:block;color:rgba(0,0,0,.3);font-size:14px;line-height:20px;height:20px;width:100%}@media(prefers-color-scheme: dark){.navigate-to-mp--name{color:rgba(255,255,255,.9)}.navigate-to-mp--desc{color:rgba(255,255,255,.3)}}",""]),t.default=i},function(e,t,n){var r=n(23);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".frameset--hidden{visibility:hidden}.frameset--root{display:flex;height:100vh}.frameset--tabs{width:60px;overflow:hidden}.frameset--panels{flex:1;display:flex}.frameset--left-panel{width:414px;margin:0 1px}.frameset--left-page{position:absolute;left:0;top:0;width:100%;height:100%}.frameset--right-panel{flex:1}.frameset--right-placeholder{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%)}.frameset--right-page{position:absolute;left:0;top:0;width:100%;height:100%;transform:translateX(100%);transition:transform 400ms ease-out}.frameset--right-page-in{transform:translateX(0)}@media(max-width: 669px){.frameset--left-panel{width:auto}.frameset--right-panel{position:absolute;left:0;top:0;width:100%;height:100%}}",""]),t.default=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(26);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".game-ranklist--root{height:100vh;width:100vw;display:flex;font-size:16px;overflow:hidden;flex-direction:column;align-items:center;justify-content:space-around;-wx-partial-z-index:1001;width:100%;height:100%;background:rgba(0,0,0,.5)}.game-ranklist--content{border-radius:4px;background:#fff}.game-ranklist--line{height:1px;background:rgba(0,0,0,.05)}.game-ranklist--head{height:45px;display:flex;align-items:center;justify-content:space-between;padding:0 20px}.game-ranklist--close{width:16px;height:16px;opacity:.5}.game-ranklist--title{color:rgba(0,0,0,.9);font-size:14px;font-weight:bold;height:20px;line-height:20px;width:80%;text-align:center}.game-ranklist--body{padding:0 16px}.game-ranklist--item{height:70px;display:flex;flex-direction:row;align-items:center}.game-ranklist--icon{width:40px;height:40px;border-radius:4px}.game-ranklist--name{width:50%;margin:12px;font-size:17px;height:24px;line-height:24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;color:rgba(0,0,0,.9)}.game-ranklist--score{flex-grow:1;font-size:14px;height:20px;line-height:20px;color:rgba(0,0,0,.5);text-align:right}.game-ranklist--buttons{height:44px;display:flex;flex-direction:row;align-items:center;justify-content:space-around;background:#f7f7f7;padding:0 20%}.game-ranklist--button{width:24px;height:24px;border-radius:12px;display:flex;align-items:center;justify-content:center;background:#eaeaea}.game-ranklist--btn-icon{width:6px;height:12px}.game-ranklist--disabled{opacity:.5}@media(orientation: portrait){.game-ranklist--content{width:85vw}}@media(orientation: landscape){.game-ranklist--content{width:85vh}}",""]),t.default=i},function(e,t,n){var r=n(28);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".share-image--mask{position:absolute;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.85);opacity:0;transition:opacity .2s ease-in}.share-image--mask__in{opacity:1}.share-image--container,.share-image--landscape-container{opacity:0;transition:opacity .2s ease-in;display:flex;flex-direction:row;justify-content:center}.share-image--container__in,.share-image--landscape-container__in{opacity:1}.share-image--container{position:absolute;top:0;left:env(safe-area-inset-left);bottom:env(safe-area-inset-bottom);right:env(safe-area-inset-right);padding-bottom:194px}.share-image--landscape-container{width:100%;height:100%}.share-image--scroller-container{width:100%;padding:0;margin:0;display:flex;flex-direction:column;justify-content:center}.share-image--scroller{width:100%;max-height:100%;padding:0;margin:0}.share-image--scroller::-webkit-scrollbar{display:none}.share-image--img{border-radius:12px;overflow:hidden}.share-image--img-wrapper{padding-top:44px;padding-bottom:32px;padding-left:32px;padding-right:32px;width:100%}@media(orientation: landscape){.share-image--container{padding-bottom:0;bottom:0}.share-image--scroller{width:100%}.share-image--img-wrapper{padding-top:24px;padding-bottom:24px;padding-left:0;padding-right:0;width:100%}}",""]),t.default=i},function(e,t,n){var r=n(30);r&&r.__esModule&&(r=r.default),n(1).styles.push(r.toString())},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r)()((function(e){return e[1]}));i.push([e.i,".toast--root{width:100vw;height:100vh;display:flex;align-items:center;justify-content:center}.toast--content{height:44px;padding:0 20px;border-radius:8px;background:#4c4c4c;align-items:center;display:flex}.toast--loading{width:16px;height:16px;margin-right:4px}.toast--title{opacity:.9;font-size:14px;color:#fff}",""]),t.default=i},function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){var r=null;"undefined"!=typeof NativeGlobal&&void 0!==NativeGlobal.WebAssembly?r=NativeGlobal.WebAssembly:"undefined"!=typeof WebAssembly&&(r=WebAssembly),t.wasm_initialize=function(e,i){var o=e.bin,a=new r.Memory({initial:16}),s={js:{mem:a},"./exparser_scl_backend_bg.js":n(3)},c=function(e){for(var n in e.instance.exports)t[n]=e.instance.exports[n];t.memory||(t.memory=a),t.wasm_initialize=null,i(t)},u=r.instantiate(o,s);"function"==typeof u.then?u.then(c):c(u)}},function(e,t,n){"use strict";function r(){}function i(){}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i})),r.prototype.encode=function(e){for(var t=[],n=e.length,r=0;r<n;){var i=e.codePointAt(r),o=0,a=0;for(i<=127?(o=0,a=0):i<=2047?(o=6,a=192):i<=65535?(o=12,a=224):i<=2097151&&(o=18,a=240),t.push(a|i>>o),o-=6;o>=0;)t.push(128|i>>o&63),o-=6;r+=i>=65536?2:1}return t},i.prototype.decode=function(e){if(void 0===e)return"";for(var t="",n=0;n<e.length;){var r=e[n],i=0,o=0;if(r<=127?(i=0,o=255&r):r<=223?(i=1,o=31&r):r<=239?(i=2,o=15&r):r<=244&&(i=3,o=7&r),e.length-n-i>0)for(var a=0;a<i;)o=o<<6|63&(r=e[n+a+1]),a+=1;else o=65533,i=e.length-n;t+=String.fromCodePoint(o),n+=i+1}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){void 0!==Reporter&&Reporter.errorReport?Reporter.errorReport({key:"exparserScriptError",error:new Error(e)}):console.error(e)}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"wasm_main",(function(){return P})),n.d(t,"BoundingClientRect",(function(){return D})),n.d(t,"Callback",(function(){return R})),n.d(t,"Context",(function(){return j})),n.d(t,"Element",(function(){return N})),n.d(t,"Listener",(function(){return M})),n.d(t,"ScrollPosition",(function(){return L})),n.d(t,"StyleSheetGroup",(function(){return B})),n.d(t,"__wbindgen_object_drop_ref",(function(){return F})),n.d(t,"__wbg_triggerEvent_fe8e7714c046228c",(function(){return U})),n.d(t,"__wbg_triggerRender_8291f7e41c9ba309",(function(){return W})),n.d(t,"__wbg_getWindowWidth_5d3459d21d0fb732",(function(){return V})),n.d(t,"__wbg_getWindowHeight_5055bbf1cbab7ad7",(function(){return G})),n.d(t,"__wbg_getSafeArea_e02a51c464e82ae4",(function(){return H})),n.d(t,"__wbg_getTheme_6ee867e661a1fe00",(function(){return z})),n.d(t,"__wbg_getEngineConfig_d071336fb0f35c81",(function(){return Y})),n.d(t,"__wbg_getDevicePixelRatio_bad18211fbb2a2d3",(function(){return q})),n.d(t,"__wbg_setTimeout_73cd22a52998d9f8",(function(){return K})),n.d(t,"__wbindgen_object_clone_ref",(function(){return J})),n.d(t,"__wbg_timeoutCallback_5a0fccae410eec7e",(function(){return X})),n.d(t,"__wbg_instanceof_ExparserElement_74ace43f429ed53b",(function(){return $})),n.d(t,"__wbg_invoke_e595dd16845dff2f",(function(){return Z})),n.d(t,"__wbg_subscribe_76e57ecbbf87c182",(function(){return Q})),n.d(t,"__wbindgen_json_parse",(function(){return ee})),n.d(t,"__wbindgen_json_serialize",(function(){return te})),n.d(t,"__wbg_new_59cb74e423758ede",(function(){return ne})),n.d(t,"__wbg_stack_558ba5917b466edd",(function(){return re})),n.d(t,"__wbg_error_4bb6c2a97407129a",(function(){return ie})),n.d(t,"__wbindgen_string_new",(function(){return oe})),n.d(t,"__wbg_debug_71c3576093c70eeb",(function(){return ae})),n.d(t,"__wbg_error_20ef23c2407793d3",(function(){return se})),n.d(t,"__wbg_info_117ff5fa76cbb0fa",(function(){return ce})),n.d(t,"__wbg_log_eb1108411ecc4a7f",(function(){return ue})),n.d(t,"__wbg_warn_0361b900e14db42e",(function(){return le})),n.d(t,"__wbindgen_debug_string",(function(){return de})),n.d(t,"__wbindgen_throw",(function(){return fe}));var r=n(1),i=n(2),o=n(0);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=new Array(32).fill(void 0);function d(e){return l[e]}l.push(void 0,null,!0,!1);var f=l.length;function p(e){var t=d(e);return function(e){e<36||(l[e]=f,f=e)}(e),t}function h(e){f===l.length&&l.push(l.length+1);var t=f;return f=l[t],l[t]=e,t}var g=new(void 0===r.a?(0,e.require)("util").TextDecoder:r.a)("utf-8",{ignoreBOM:!0,fatal:!0});g.decode();var v=null;function _(){return null!==v&&v.buffer===o.memory.buffer||(v=new Uint8Array(o.memory.buffer)),v}function y(e,t){return g.decode(_().subarray(e,e+t))}var m=0,b=new(void 0===r.b?(0,e.require)("util").TextEncoder:r.b)("utf-8"),w="function"==typeof b.encodeInto?function(e,t){return b.encodeInto(e,t)}:function(e,t){var n=b.encode(e);return t.set(n),{read:e.length,written:n.length}};function O(e,t,n){if(void 0===n){var r=b.encode(e),i=t(r.length);return _().subarray(i,i+r.length).set(r),m=r.length,i}for(var o=e.length,a=t(o),s=_(),c=0;c<o;c++){var u=e.charCodeAt(c);if(u>127)break;s[a+c]=u}if(c!==o){0!==c&&(e=e.slice(c)),a=n(a,o,o=c+3*e.length);var l=_().subarray(a+c,a+o);c+=w(e,l).written}return m=c,a}var E=null;function S(){return null!==E&&E.buffer===o.memory.buffer||(E=new Int32Array(o.memory.buffer)),E}function T(e,t){if(!(e instanceof t))throw new Error("expected instance of ".concat(t.name));return e.ptr}function I(e){return null==e}var A=32;function C(e){if(1==A)throw new Error("out of js stack");return l[--A]=e,A}function k(e){return function(){throw new Error("".concat(e," is not defined"))}}function x(e){return function(){try{return e.apply(this,arguments)}catch(e){o.__wbindgen_exn_store(h(e))}}}function P(){o.wasm_main()}var D=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_boundingclientrect_free(e)}},{key:"left",get:function(){return o.__wbg_get_boundingclientrect_left(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_left(this.ptr,e)}},{key:"top",get:function(){return o.__wbg_get_boundingclientrect_top(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_top(this.ptr,e)}},{key:"width",get:function(){return o.__wbg_get_boundingclientrect_width(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_width(this.ptr,e)}},{key:"height",get:function(){return o.__wbg_get_boundingclientrect_height(this.ptr)},set:function(e){o.__wbg_set_boundingclientrect_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),R=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_callback_free(e)}},{key:"exec",value:function(e){try{var t=this.ptr;this.ptr=0,o.callback_exec(t,C(e))}finally{l[A++]=void 0}}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),j=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_context_free(e)}},{key:"getWindowWidth",value:function(){return o.context_getWindowWidth(this.ptr)}},{key:"getWindowHeight",value:function(){return o.context_getWindowHeight(this.ptr)}},{key:"getDevicePixelRatio",value:function(){return o.context_getDevicePixelRatio(this.ptr)}},{key:"getTheme",value:function(){try{o.context_getTheme(8,this.ptr);var e=S()[2],t=S()[3];return y(e,t)}finally{o.__wbindgen_free(e,t)}}},{key:"appendStyleSheet",value:function(e){var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;return o.context_appendStyleSheet(this.ptr,t,n)>>>0}},{key:"replaceStyleSheet",value:function(e,t){var n=O(t,o.__wbindgen_malloc,o.__wbindgen_realloc),r=m;o.context_replaceStyleSheet(this.ptr,e,n,r)}},{key:"clearStyleSheets",value:function(){o.context_clearStyleSheets(this.ptr)}},{key:"render",value:function(e){try{o.context_render(this.ptr,C(e))}finally{l[A++]=void 0}}},{key:"bindRootNode",value:function(e){T(e,N),o.context_bindRootNode(this.ptr,e.ptr)}},{key:"getRootNode",value:function(){var e=o.context_getRootNode(this.ptr);return 0===e?void 0:N.__wrap(e)}},{key:"createElement",value:function(e,t){var n=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=m,i=O(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=m,s=o.context_createElement(this.ptr,n,r,i,a);return N.__wrap(s)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}},{key:"create",value:function(){var t=o.context_create();return e.__wrap(t)}},{key:"getNodeUnderPoint",value:function(e,t){var n=o.context_getNodeUnderPoint(e,t);return N.__wrap(n)}},{key:"getExparserElementByViewId",value:function(e){return p(o.context_getExparserElementByViewId(e))}}]),e}(),N=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_element_free(e)}},{key:"release",value:function(){var e=this.ptr;this.ptr=0,o.element_release(e)}},{key:"associateComponent",value:function(e){o.element_associateComponent(this.ptr,h(e))}},{key:"cloneNode",value:function(){var t=o.element_cloneNode(this.ptr);return e.__wrap(t)}},{key:"equal",value:function(t){return T(t,e),0!==o.element_equal(this.ptr,t.ptr)}},{key:"getParentNode",value:function(){var t=o.element_getParentNode(this.ptr);return 0===t?void 0:e.__wrap(t)}},{key:"getChildNode",value:function(t){var n=o.element_getChildNode(this.ptr,t);return 0===n?void 0:e.__wrap(n)}},{key:"appendChild",value:function(t){T(t,e),o.element_appendChild(this.ptr,t.ptr)}},{key:"insertChild",value:function(t,n){T(t,e),o.element_insertChild(this.ptr,t.ptr,n)}},{key:"removeChild",value:function(e){o.element_removeChild(this.ptr,e)}},{key:"replaceChild",value:function(t,n){T(t,e),o.element_replaceChild(this.ptr,t.ptr,n)}},{key:"splice",value:function(t,n,r){T(r,e),o.element_splice(this.ptr,t,n,r.ptr)}},{key:"findChildPosition",value:function(t){return T(t,e),o.element_findChildPosition(this.ptr,t.ptr)}},{key:"length",value:function(){return o.element_length(this.ptr)>>>0}},{key:"getBoundingClientRect",value:function(){var e=o.element_getBoundingClientRect(this.ptr);return 0===e?void 0:D.__wrap(e)}},{key:"getScrollPosition",value:function(){var e=o.element_getScrollPosition(this.ptr);return L.__wrap(e)}},{key:"setScrollPosition",value:function(e,t,n){o.element_setScrollPosition(this.ptr,!I(e),I(e)?0:e,!I(t),I(t)?0:t,!I(n),I(n)?0:n)}},{key:"setId",value:function(e){var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;o.element_setId(this.ptr,t,n)}},{key:"setClass",value:function(e){var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;o.element_setClass(this.ptr,t,n)}},{key:"setStyle",value:function(e){var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;o.element_setStyle(this.ptr,t,n)}},{key:"setAttribute",value:function(e,t){var n=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),r=m,i=O(t,o.__wbindgen_malloc,o.__wbindgen_realloc),a=m;o.element_setAttribute(this.ptr,n,r,i,a)}},{key:"getAttribute",value:function(e){try{var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;o.element_getAttribute(8,this.ptr,t,n);var r=S()[2],i=S()[3];return y(r,i)}finally{o.__wbindgen_free(r,i)}}},{key:"setText",value:function(e){var t=O(e,o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;o.element_setText(this.ptr,t,n)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),M=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_listener_free(e)}},{key:"exec",value:function(e){try{return 0!==o.listener_exec(this.ptr,C(e))}finally{l[A++]=void 0}}},{key:"release",value:function(){var e=this.ptr;this.ptr=0,o.listener_release(e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),L=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_scrollposition_free(e)}},{key:"scroll_left",get:function(){return o.__wbg_get_scrollposition_scroll_left(this.ptr)},set:function(e){o.__wbg_set_scrollposition_scroll_left(this.ptr,e)}},{key:"scroll_top",get:function(){return o.__wbg_get_scrollposition_scroll_top(this.ptr)},set:function(e){o.__wbg_set_scrollposition_scroll_top(this.ptr,e)}},{key:"scroll_width",get:function(){return o.__wbg_get_scrollposition_scroll_width(this.ptr)},set:function(e){o.__wbg_set_scrollposition_scroll_width(this.ptr,e)}},{key:"scroll_height",get:function(){return o.__wbg_get_scrollposition_scroll_height(this.ptr)},set:function(e){o.__wbg_set_scrollposition_scroll_height(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),B=function(){function e(){a(this,e)}return c(e,[{key:"free",value:function(){var e=this.ptr;this.ptr=0,o.__wbg_stylesheetgroup_free(e)}}]),e}(),F=function(e){p(e)},U=function(e,t,n,r,i){__exparserSclEngine__.exparser.triggerEvent(d(e),y(t,n),p(r),p(i))},W="function"==typeof __exparserSclEngine__.exparser.triggerRender?__exparserSclEngine__.exparser.triggerRender:k("__exparserSclEngine__.exparser.triggerRender"),V="function"==typeof __exparserSclEngine__.getWindowWidth?__exparserSclEngine__.getWindowWidth:k("__exparserSclEngine__.getWindowWidth"),G="function"==typeof __exparserSclEngine__.getWindowHeight?__exparserSclEngine__.getWindowHeight:k("__exparserSclEngine__.getWindowHeight"),H=function(){return h(__exparserSclEngine__.getSafeArea())},z=function(e){var t=O(__exparserSclEngine__.getTheme(),o.__wbindgen_malloc,o.__wbindgen_realloc),n=m;S()[e/4+1]=n,S()[e/4+0]=t},Y=function(){return h(__exparserSclEngine__.getEngineConfig())},q="function"==typeof __exparserSclEngine__.getDevicePixelRatio?__exparserSclEngine__.getDevicePixelRatio:k("__exparserSclEngine__.getDevicePixelRatio"),K=function(e,t){return setTimeout(d(e),t>>>0)},J=function(e){return h(d(e))},X=function(e,t){__exparserSclEngine__.timeoutCallback(e>>>0,R.__wrap(t))},$=function(e){return d(e)instanceof __exparserSclEngine__.exparser.Element},Z=x((function(e,t,n,r){__exparserSclEngine__.invoke(y(e,t),p(n),0===r?void 0:R.__wrap(r))})),Q=x((function(e,t,n){__exparserSclEngine__.subscribe(y(e,t),0===n?void 0:M.__wrap(n))})),ee=function(e,t){return h(JSON.parse(y(e,t)))},te=function(e,t){var n=d(t),r=O(JSON.stringify(void 0===n?null:n),o.__wbindgen_malloc,o.__wbindgen_realloc),i=m;S()[e/4+1]=i,S()[e/4+0]=r},ne=function(){return h(new Error)},re=function(e,t){var n=O(d(t).stack,o.__wbindgen_malloc,o.__wbindgen_realloc),r=m;S()[e/4+1]=r,S()[e/4+0]=n},ie=function(e,t){try{Object(i.a)(y(e,t))}finally{o.__wbindgen_free(e,t)}},oe=function(e,t){return h(y(e,t))},ae=function(e){console.debug(d(e))},se=function(e){Object(i.a)(d(e))},ce=function(e){console.info(d(e))},ue=function(e){console.log(d(e))},le=function(e){console.warn(d(e))},de=function(e,t){var n=O(function e(t){var n=u(t);if("number"==n||"boolean"==n||null==t)return"".concat(t);if("string"==n)return'"'.concat(t,'"');if("symbol"==n){var r=t.description;return null==r?"Symbol":"Symbol(".concat(r,")")}if("function"==n){var i=t.name;return"string"==typeof i&&i.length>0?"Function(".concat(i,")"):"Function"}if(Array.isArray(t)){var o=t.length,a="[";o>0&&(a+=e(t[0]));for(var s=1;s<o;s++)a+=", "+e(t[s]);return a+"]"}var c,l=/\[object ([^\]]+)\]/.exec(toString.call(t));if(!(l.length>1))return toString.call(t);if("Object"==(c=l[1]))try{return"Object("+JSON.stringify(t)+")"}catch(e){return"Object"}return t instanceof Error?"".concat(t.name,": ").concat(t.message,"\n").concat(t.stack):c}(d(t)),o.__wbindgen_malloc,o.__wbindgen_realloc),r=m;S()[e/4+1]=r,S()[e/4+0]=n},fe=function(e,t){throw new Error(y(e,t))}}.call(this,n(5)(e))},function(e,t,n){var r=n(0);e.exports=n(3);var i=function(){e.exports.memory=r.memory,"function"==typeof r.__wbindgen_start?r.__wbindgen_start():"function"==typeof r.wasm_main&&r.wasm_main()},o=null;e.exports.wasm_initialize=function(e,t){void 0===t&&(t=e,e=void 0),r.wasm_initialize?o?o.push(t):(o=[t],r.wasm_initialize(e,(function(){i();var e=o;o=null,e.forEach((function(e){e()}))}))):t&&setTimeout(t,0)},r.wasm_initialize||i()},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}])},function(e,t,n){"use strict";n.r(t),n.d(t,"getMainRoot",(function(){return R})),n.d(t,"onViewportResize",(function(){return j})),n.d(t,"initScl",(function(){return N})),n.d(t,"getExparserElementByViewId",(function(){return M})),n.d(t,"triggerRender",(function(){return L}));n(3),n(5),n(6),__exparserSclEngine__.exparser.registerElement({is:"mp-bubble-action-sheet",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"mp-bubble-action-sheet",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"mp-half-screen-popup",a:[{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"mask",e:function(e,t,n){return e.mask},l:[null],b:[[null,"mask"]]},{n:"mask-closable",e:function(e,t,n){return e.maskClosable},l:[null],b:[[null,"maskClosable"]]},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"}],c:[{t:1,n:"block",v:!0,sl:"mask",a:[],c:[{t:1,n:"slot",v:!0,sn:"mask",a:[],c:[]}]},{t:1,n:"wx-view",cl:{v:"content"},a:[],c:[{t:1,n:"wx-view",cl:{v:"menu"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return"light"===e.theme},b:[[null,"theme"]]}],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"key",d:"index"},{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.actions},l:[null],b:[[null,"actions"]]}],c:[{t:1,n:"wx-view",cl:{v:"cell"},a:[{n:"hover-class",v:"cell__hover"},{n:"index",o:"d",e:function(e,t,n){return t.index},l:["index"],b:[["index"]]},{n:"bind:tap",v:"buttonTap"}],c:[{t:1,n:"wx-view",cl:{v:"cell-img-container"},a:[],c:[{t:1,n:"wx-image",cl:{v:"cell-img"},a:[{n:"src",e:function(t,n,r){return e(n.item,"imageSrc")},l:["item","imageSrc"],b:[["item","imageSrc"]]}],c:[]}]},{t:1,n:"wx-view",cl:{v:"cell-desc"},a:[],c:[{c:"",e:function(t,n,r){return e(n.item,"text")},b:[["item","text"]],t:3}]}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"elif",d:function(e,t,n){return"dark"===e.theme},b:[[null,"theme"]]}],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"key",d:"index"},{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.actions},l:[null],b:[[null,"actions"]]}],c:[{t:1,n:"wx-view",cl:{v:"cell"},a:[{n:"hover-class",v:"cell__hover"},{n:"index",o:"d",e:function(e,t,n){return t.index},l:["index"],b:[["index"]]},{n:"bind:tap",v:"buttonTap"}],c:[{t:1,n:"wx-view",cl:{v:"cell-img-container"},a:[],c:[{t:1,n:"wx-image",cl:{v:"cell-img"},a:[{n:"src",e:function(t,n,r){return e(n.item,"imageDarkSrc")},l:["item","imageDarkSrc"],b:[["item","imageDarkSrc"]]}],c:[]}]},{t:1,n:"wx-view",cl:{v:"cell-desc"},a:[],c:[{c:"",e:function(t,n,r){return e(n.item,"text")},b:[["item","text"]],t:3}]}]}]}]}]},{t:1,n:"wx-view",cl:{v:"foot"},a:[],c:[{t:1,n:"wx-view",cl:{v:"button"},a:[{n:"hover-class",v:"button__hover"},{n:"bind:tap",v:"handleClose"}],c:[{t:1,n:"wx-view",cl:{v:"button__before"},a:[],c:[]},{t:1,n:"wx-view",cl:{v:"button__content"},a:[],c:[{c:"",e:function(e,t,n){return e.cancelText},b:[[null,"cancelText"]],t:3}]}]}]}]}]}]},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},methods:{buttonTap:function(e){var t=e.currentTarget.dataset.index;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose:function(){this.triggerEvent("close",{},{})},handleClosed:function(){this.triggerEvent("closed",{},{})},stopEvent:function(){}}}),n(8),__exparserSclEngine__.exparser.registerElement({is:"mp-dialog",options:{multipleSlots:!0,classPrefix:"mp-dialog",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"wx-view",cl:{v:"root"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.mask},b:[[null,"mask"]]}],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"mask "+(e.show?"mask__in":"")},b:[[null,"show"]]},a:[{n:"bind:tap",v:"handleClose"}],c:[]}]},{t:1,n:"wx-view",cl:{v:"container"},a:[{n:"bind:tap",v:"handleClose"}],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"content "+(e.show?"content__in":"")},b:[[null,"show"]]},a:[{n:"catch:tap",v:"stopEvent"}],c:[{t:1,n:"wx-view",cl:{v:"head"},a:[],c:[{t:1,n:"wx-view",cl:{v:"title"},a:[],c:[{t:1,n:"slot",v:!0,sn:"title",a:[],c:[]}]}]},{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"slot",v:!0,sn:"body",a:[],c:[]}]},{t:1,n:"wx-view",cl:{v:"foot"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(t,n,r){return t.innerButtons&&e(t.innerButtons,"length")},b:[[null,"innerButtons"],[null,"innerButtons","length"]]}],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"key",d:"index"},{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.innerButtons},l:[null],b:[[null,"innerButtons"]]}],c:[{t:1,n:"wx-view",cl:{e:function(t,n,r){return"button "+e(n.item,"className")},b:[["item","className"]]},a:[{n:"hover-class",v:"button__active"},{n:"index",o:"d",e:function(e,t,n){return t.index},l:["index"],b:[["index"]]},{n:"bind:tap",v:"buttonTap"}],c:[{c:"",e:function(t,n,r){return e(n.item,"text")},b:[["item","text"]],t:3},{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return t.index>0},b:[["index"]]}],c:[{t:1,n:"wx-view",cl:{v:"button__after"},a:[],c:[]}]}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"else",d:!0}],c:[{t:1,n:"slot",v:!0,sn:"footer",a:[],c:[]}]},{t:1,n:"wx-view",cl:{v:"foot__after"},a:[],c:[]}]}]}]}]}]},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerButtons:[]},attached:function(){this.attached=!0},observers:{buttons:function(e){var t=e.length;this.setData({innerButtons:e.map((function(e,n){var r=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})},show:function(e){var t=this;this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((function(){t.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((function(){t.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap:function(e){var t=e.currentTarget.dataset.index;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose:function(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent:function(){}}}),n(10),__exparserSclEngine__.exparser.registerElement({is:"mp-half-screen-dialog",options:{multipleSlots:!0,classPrefix:"mp-half-screen-dialog",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"mp-half-screen-popup",a:[{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"mask",e:function(e,t,n){return e.mask},l:[null],b:[[null,"mask"]]},{n:"mask-closable",e:function(e,t,n){return e.maskClosable},l:[null],b:[[null,"maskClosable"]]},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"}],c:[{t:1,n:"wx-view",cl:{v:"content"},a:[],c:[{t:1,n:"wx-view",cl:{v:"head"},a:[],c:[{t:1,n:"wx-view",cl:{v:"title"},a:[],c:[{t:1,n:"slot",v:!0,sn:"title",a:[],c:[]}]}]},{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"slot",v:!0,sn:"body",a:[],c:[]}]},{t:1,n:"wx-view",cl:{v:"foot"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(t,n,r){return t.innerButtons&&e(t.innerButtons,"length")},b:[[null,"innerButtons"],[null,"innerButtons","length"]]}],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"key",d:"index"},{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.innerButtons},l:[null],b:[[null,"innerButtons"]]}],c:[{t:1,n:"wx-view",cl:{e:function(t,n,r){return"button "+e(n.item,"className")},b:[["item","className"]]},a:[{n:"hover-class",v:"button__active"},{n:"index",o:"d",e:function(e,t,n){return t.index},l:["index"],b:[["index"]]},{n:"bind:tap",v:"buttonTap"}],c:[{c:"",e:function(t,n,r){return e(n.item,"text")},b:[["item","text"]],t:3}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"else",d:!0}],c:[{t:1,n:"slot",v:!0,sn:"footer",a:[],c:[]}]}]}]}]}]},properties:{title:{type:String,value:""},maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},buttons:{type:Array,value:[]}},data:{innerShow:!1,innerButtons:[]},observers:{buttons:function(e){var t=e.length;this.setData({innerButtons:e.map((function(e,n){var r=e.type||(t>=1&&0===n?"default":"primary");return{className:(e.className||"")+" button__"+r,text:e.text}}))})}},methods:{buttonTap:function(e){var t=e.currentTarget.dataset.index;this.triggerEvent("buttontap",{index:t,item:this.data.buttons[t]},{})},handleClose:function(){this.triggerEvent("close",{},{})},handleClosed:function(){this.triggerEvent("closed",{},{})},stopEvent:function(){}}}),n(12),__exparserSclEngine__.exparser.registerElement({is:"mp-half-screen-popup",options:{multipleSlots:!0,classPrefix:"mp-half-screen-popup",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"wx-view",cl:{v:"root"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.mask},b:[[null,"mask"]]}],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"mask "+(e.show?"mask__in":"")},b:[[null,"show"]]},a:[{n:"bind:tap",v:"handleClose"}],c:[]}]},{t:1,n:"slot",v:!0,sn:"mask",a:[],c:[]},{t:1,n:"wx-view",cl:{e:function(e,t,n){return"container "+(e.show?"container__in":"")},b:[[null,"show"]]},a:[{n:"bind:tap",v:"handleClose"}],c:[{t:1,n:"wx-view",cl:{v:"content"},a:[{n:"catch:tap",v:"stopEvent"}],c:[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]}]}]}]},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1}},attached:function(){this.attached=!0},observers:{show:function(e){var t=this;this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((function(){t.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((function(){t.triggerEvent("closed",{},{})}),200))}},methods:{handleClose:function(){this.data.maskClosable&&this.triggerEvent("close",{},{})},stopEvent:function(){}}}),n(14);var r=__exparserSclEngine__.exparser,i=(r.registerElement({is:"mp-horizonal-bubble",options:{multipleSlots:!0,classPrefix:"mp-horizonal-bubble",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"wx-view",cl:{v:"root"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.mask},b:[[null,"mask"]]}],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"mask "+(e.show?"mask__in":"")},b:[[null,"show"]]},a:[],c:[]}]},{t:1,n:"wx-view",cl:{v:"content"},a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"close-container "+(e.show?"close-container__in":"")},b:[[null,"show"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"close-btn"},a:[{n:"hover-class",v:"close-btn__hover"},{n:"bind:tap",v:"handleClose"}],c:[{t:1,n:"wx-image",cl:{v:"close-btn-img"},a:[{n:"src",e:function(e,t,n){return e.closeBtn},l:[null],b:[[null,"closeBtn"]]}],c:[]}]}]},{t:1,n:"wx-view",cl:{v:"content-container"},a:[],c:[{t:1,n:"slot",v:!0,sn:"content",a:[],c:[]}]},{t:1,n:"wx-view",cl:{e:function(e,t,n){return"menu-container "+(e.show?"menu-container__in":"")},b:[[null,"show"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"menu"},a:[],c:[{t:1,n:"wx-view",cl:{v:"menu-before"},a:[],c:[]},{t:1,n:"wx-view",cl:{v:"menu-inner"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"key",d:"index"},{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.actions},l:[null],b:[[null,"actions"]]}],c:[{t:1,n:"wx-view",cl:{v:"cell"},a:[{n:"hover-class",v:"cell__hover"},{n:"index",o:"d",e:function(e,t,n){return t.index},l:["index"],b:[["index"]]},{n:"bind:tap",v:"buttonTap"}],c:[{t:1,n:"wx-view",cl:{v:"cell-img-container"},a:[],c:[{t:1,n:"wx-image",cl:{v:"cell-img"},a:[{n:"src",e:function(t,n,r){return e(n.item,"imageDarkSrc")},l:["item","imageDarkSrc"],b:[["item","imageDarkSrc"]]}],c:[]}]},{t:1,n:"wx-view",cl:{v:"cell-desc"},a:[],c:[{c:"",e:function(t,n,r){return e(n.item,"text")},b:[["item","text"]],t:3}]}]}]}]},{t:1,n:"wx-view",cl:{v:"menu-after"},a:[],c:[]}]}]}]}]}]},properties:{maskClosable:{type:Boolean,value:!0},mask:{type:Boolean,value:!0},show:{type:Boolean,value:!1},cancelText:{type:String,value:"取消"},actions:{type:Array,value:[]}},attached:function(){var e=this;this.attached=!0,r.triggerRender((function(){e.setData({closeBtn:"https://res.wx.qq.com/op_res/hlMx1wXYJya8ib3DpW10m6aLCGf7RoluABX1QvNEAxVIyhhGuY0iI62dzv56y5rq9nBrd-H44CqoH5dM9JTr0g"})}))},observers:{show:function(e){var t=this;this.attached&&(clearTimeout(this.closeTimeout),clearTimeout(this.showTimeout),e?this.showTimeout=setTimeout((function(){t.triggerEvent("showed",{},{})}),200):this.closeTimeout=setTimeout((function(){t.triggerEvent("closed",{},{})}),200))}},methods:{buttonTap:function(e){var t=e.currentTarget.dataset.index;this.triggerEvent("buttontap",{index:t,item:this.data.actions[t]},{})},handleClose:function(){this.triggerEvent("close",{},{})},stopEvent:function(){}}}),__exparserSclEngine__.exparser),o=(i.registerElement({is:"wx-view",template:function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]},properties:{hoverClass:String},listeners:{"this.touchstart":function(){this.hoverStart()},"this.touchend":function(){this.hoverEnd()},"this.canceltap":function(){this.hoverEnd()}},methods:{hoverStart:function(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!0),i.triggerRender())},hoverEnd:function(){this.data.hoverClass&&(this.classList.toggle(this.data.hoverClass,!1),i.triggerRender())}}}),__exparserSclEngine__.exparser.registerElement({is:"wx-image",template:function(e,t,n){return[{t:1,n:"image",st:{v:"width: 100%; height: 100%;"},a:[{n:"src",e:function(e,t,n){return e.src},l:[null],b:[[null,"src"]]}],c:[]}]},properties:{src:{type:String,public:!0}}}),__exparserSclEngine__.exparser.registerElement({is:"wx-adaptive-image",template:function(e,t,n){return[{t:1,n:"wx-view",id:"wrapper",st:{v:"width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center;"},a:[],c:[{t:1,n:"image",st:{e:function(e,t,n){return"width: "+e.imgStyleWidth+"px; height: "+e.imgStyleHeight+"px;"},b:[[null,"imgStyleWidth"],[null,"imgStyleHeight"]]},a:[{n:"src",e:function(e,t,n){return e.src},l:[null],b:[[null,"src"]]}],c:[]}]}]},properties:{src:{type:String,public:!0},srcWidth:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"},srcHeight:{type:Number,public:!0,value:0,observer:"_onSrcSizeChange"}},data:{imgStyleWidth:0,imgStyleHeight:0},attached:function(){this.attached=!0,this._onSrcSizeChange()},detached:function(){this.attached=!1},methods:{_onSrcSizeChange:function(){if(this.attached){var e=this.$$.getBoundingClientRect(),t=Math.min(e.width,this.data.srcWidth),n=t*this.data.srcHeight/this.data.srcWidth;this.setData({imgStyleWidth:t,imgStyleHeight:n})}}}}),__exparserSclEngine__.exparser.registerElement({is:"wx-scroll-view",template:function(e,t,n){return[{t:1,n:"scrollview",a:[{n:"scroll-x",e:function(e,t,n){return e.scrollX},l:[null],b:[[null,"scrollX"]]},{n:"scroll-y",e:function(e,t,n){return e.scrollY},l:[null],b:[[null,"scrollY"]]}],c:[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]}]},properties:{scrollX:{type:Boolean,public:!0,value:!1},scrollY:{type:Boolean,public:!0,value:!1}}}),__exparserSclEngine__.exparser),a=(o.registerElement({is:"example",template:function(e,t,n){return[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return!e.hidden},b:[[null,"hidden"]]}],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"root "+(e.contentIn?"root-in":"")},b:[[null,"contentIn"]]},a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"content "+(e.contentIn?"content-in":"")},b:[[null,"contentIn"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"title"},a:[],c:[{c:"弹框标题",t:3}]},{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{c:"小程序需要访问你的用户信息",t:3}]},{t:1,n:"wx-view",cl:{v:"buttons"},a:[],c:[{t:1,n:"wx-view",cl:{v:"button ok"},a:[{n:"hover-class",v:"ok-hover"},{n:"bind:tap",v:"hide"}],c:[{c:"允许",t:3}]},{t:1,n:"wx-view",cl:{v:"button deny"},a:[{n:"hover-class",v:"deny-hover"},{n:"bind:tap",v:"hide"}],c:[{c:"拒绝",t:3}]}]}]}]}]}]},attached:function(){var e=this;o.triggerRender((function(){e.setData({contentIn:!0})}))},methods:{hide:function(){this.triggerEvent("destroy")}}}),__exparserSclEngine__.exparser),s=(a.registerElement({is:"drag",template:function(e,t,n){return[{t:1,n:"view",id:"inner",cl:{v:"button ok"},st:{e:function(e,t,n){return"width: 200px; height: 100px; padding: 20px; -wx-engine-touch-event: none; transform: translate("+e.dx+"px, "+e.dy+"px)"},b:[[null,"dx"],[null,"dy"]]},a:[{n:"draggable",v:"1"},{n:"bind:tap",v:"hide"},{n:"bind:dragstart",v:"dragStart"},{n:"bind:dragmove",v:"dragMove"},{n:"bind:dragend",v:"dragEnd"}],c:[{t:1,n:"view",st:{v:"background: yellow; width: 150px; height: 40px;"},a:[{n:"bind:touchstart",v:"hoverStart"},{n:"bind:touchend",v:"hoverEnd"}],c:[{c:"可拖动按钮",t:3}]}]}]},attached:function(){},data:{dx:0,dy:0},methods:{hide:function(){this.triggerEvent("destroy")},dragStart:function(){console.warn("dragStart")},dragMove:function(){console.warn("dragMove")},dragEnd:function(e){console.warn("dragEnd"),this.setData({dx:e.detail.draggedLeft-e.detail.originalLeft,dy:e.detail.draggedTop-e.detail.originalTop})},hoverStart:function(){console.warn("hoverStart"),this.$.inner.classList.toggle("ok-hover",!0),a.triggerRender()},hoverEnd:function(){console.warn("hoverEnd"),this.$.inner.classList.toggle("ok-hover",!1),a.triggerRender()}}}),__exparserSclEngine__.exparser.registerElement({is:"scroll",template:function(e,t,n){return[{t:1,n:"scrollview",st:{v:"height: 200px; width: 50%; background: yellow"},a:[{n:"scroll-y",v:"1"}],c:[{t:1,n:"wx-view",a:[],c:[{t:1,n:"block",v:!0,a:[{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.list},l:[null],b:[[null,"list"]]}],c:[{t:1,n:"wx-view",st:{v:"height: 40px; background: rgba(0, 255, 0, 0.1)"},a:[],c:[{c:"",e:function(e,t,n){return"AAA "+t.index},b:[["index"]],t:3}]}]}]}]}]},data:{list:[1,2,3,4,5,6,7,8,9,10]},attached:function(){},methods:{hide:function(){this.triggerEvent("destroy")}}}),__exparserSclEngine__.exparser),c=s.registerElement({template:function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]},methods:{append:function(e,t){var n=this,r=this.shadowRoot.createComponent(e);return r.classList.toggle("__wx_scl__layer",!0),r.addListener("destroy",(function(e){e.target===r&&n.remove(r)})),t&&r.setData(t),this.shadowRoot.appendChild(r),s.triggerRender(),r},remove:function(e){e.is,this.shadowRoot.removeChild(e)}}}),u=(n(16),"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFSnFBqI0TCnqPr9BWu0PoOWibkNvL6TVxte3E8icyiaVGJqkWEGytEVb9A/0?wx_fmt=png"),l="http://mmbiz.qpic.cn/sz_mmbiz_jpg/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFiawcLL2BcFTKggEbIdxtwdK6pmOgfVhErWicRib2huw7Z5zadjVtJVQJQ/0?wx_fmt=jpeg",d="http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFLT4OSfr939t6n2t2uLIvhprQIEsnS4F73XToyIDQYaKCmw4tAv212w/0?wx_fmt=png";function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=__exparserSclEngine__.exparser,v=(g.registerElement({is:"werun",options:{classPrefix:"werun",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"wx-view",cl:{v:"root"},a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"mask "+(e.enter?"mask-in":"")},b:[[null,"enter"]]},a:[],c:[]},{t:1,n:"wx-view",cl:{v:"container"},a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"content "+(e.enter?"content-in":"")},b:[[null,"enter"]]},st:{e:function(e,t,n){return"height: "+e.contentHeight+"px"},b:[[null,"contentHeight"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"head"},a:[],c:[{t:1,n:"wx-view",cl:{v:"title"},a:[],c:[{c:"",e:function(e,t,n){return e.title},b:[[null,"title"]],t:3}]},{t:1,n:"wx-view",cl:{v:"info-wrp"},a:[{n:"bind:tap",v:"showNote"}],c:[{t:1,n:"wx-image",cl:{v:"info"},a:[{n:"src",e:function(e,t,n){return e.iconInfo},l:[null],b:[[null,"iconInfo"]]}],c:[]}]}]},{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"wx-view",cl:{v:"sport-list"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:["index"],n:"for-index",d:"index"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.sport_name},l:[null],b:[[null,"sport_name"]]}],c:[{t:1,n:"wx-view",cl:{v:"sport-item"},a:[],c:[{c:"",e:function(e,t,n){return"・ "+t.item},b:[["item"]],t:3}]}]}]}]},{t:1,n:"wx-view",cl:{v:"buttons"},a:[],c:[{t:1,n:"wx-view",cl:{v:"button cancel"},a:[{n:"bind:tap",v:"handleCancel"}],c:[{c:"取消",t:3}]},{t:1,n:"wx-view",cl:{v:"button confirm"},a:[{n:"bind:tap",v:"handleConfirm"}],c:[{c:"确定",t:3}]}]}]},{t:1,n:"wx-view",cl:{e:function(e,t,n){return"note-content "+(e.noteEnter?"note-content-in":"")},b:[[null,"noteEnter"]]},st:{e:function(e,t,n){return"height: "+e.noteContentHeight+"px"},b:[[null,"noteContentHeight"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"head"},a:[],c:[{t:1,n:"wx-view",cl:{v:"note-title"},a:[],c:[{c:"",e:function(e,t,n){return e.note_title},b:[[null,"note_title"]],t:3}]},{t:1,n:"wx-view",cl:{v:"note-back-wrp"},a:[{n:"bind:tap",v:"hideNote"}],c:[{t:1,n:"wx-image",cl:{v:"note-back"},a:[{n:"src",e:function(e,t,n){return e.iconBack},l:[null],b:[[null,"iconBack"]]}],c:[]}]}]},{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"wx-view",cl:{v:"note-detail"},a:[],c:[{c:"",e:function(e,t,n){return e.note_detail},b:[[null,"note_detail"]],t:3}]},{t:1,n:"wx-view",cl:{v:"note-guide-wrap"},a:[],c:[{t:1,n:"wx-image",cl:{v:"note-guide"},a:[{n:"src",e:function(e,t,n){return e.iconGuide},l:[null],b:[[null,"iconGuide"]]}],c:[]}]}]}]}]}]}]},properties:{title:{type:String,value:"将本次健身数据分享到微信运动"},sport_name:{type:Array,value:[]},note_detail:{type:String,value:"分享后，朋友将可以在微信运动排行榜上看到你的身体情况。"},note_title:{type:String,value:"数据分享说明"},theme:{type:String,value:"light"},input:{type:String,value:""}},data:{enter:!1,noteEnter:!1,dark:!1,duration:300,contentHeight:358,noteContentHeight:338,clickMoreCount:0,iconInfo:d,iconBack:u,iconGuide:l},observers:{dark:function(e){var t=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFicwaUzmY9aicOlBBB48mlqnBBZpiaApuc0A0JictujwKmRMFhznZ4icRxIQ/0?wx_fmt=png":d,n=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFGTakK9zJelrNNu9dwibzP7pibT397icnFKwvccOcicGst5z6Ja0btqpELA/0?wx_fmt=png":u,r=e?"http://mmbiz.qpic.cn/sz_mmbiz_png/icTdbqWNOwNTztib4GFrge85XvmH8WVOMFmG4UmtBrK7zrJZ2oFicwTBXY81xn0GprVhSp5rMYEicXjYJEBRV9IQMg/0?wx_fmt=png":l;this.setData({iconInfo:t,iconBack:n,iconGuide:r})},theme:function(e){this.setData({dark:"dark"===e})},input:function(e){if(e){var t=JSON.parse(e),n=358-28*(5-t.sport_name.length),r=Math.max(n,338);this.setData(p(p({},t),{},{contentHeight:n,noteContentHeight:r}))}}},attached:function(){var e=this;g.triggerRender((function(){e.setData({enter:!0})}))},methods:{showNote:function(){var e=this;this.data.clickMoreCount++,g.triggerRender((function(){e.setData({noteEnter:!0})}))},hideNote:function(){var e=this;g.triggerRender((function(){e.setData({noteEnter:!1})}))},handleCancel:function(){this.triggerEvent("cancel",{clickMoreCount:this.data.clickMoreCount}),this.destory()},handleConfirm:function(){this.triggerEvent("confirm",{clickMoreCount:this.data.clickMoreCount}),this.destory()},destory:function(){var e=this;this.setData({enter:!1}),setTimeout((function(){e.triggerEvent("destroy")}),this.data.duration)}}}),n(18),__exparserSclEngine__.exparser),_=(v.registerElement({is:"authorize",options:{classPrefix:"authorize",writeIdToDOM:!0},template:'\n    <wx-view class="root">\n      <wx-view wx:if="{{overlay}}" class="mask {{enter ? \'mask-in\' : \'\'}}"></wx-view>\n      <wx-view class="container">\n        <wx-view class="content {{enter ? \'content-in\' : \'\'}}">\n          <wx-view class="head">\n            <wx-image class="icon" src="{{icon}}"></wx-image>\n            <wx-view class="title">{{nickname}} 申请</wx-view>\n          </wx-view>\n          <wx-view class="body">\n            <wx-view class="apply-info">{{apply}}</wx-view>\n          </wx-view>\n          <wx-view class="buttons">\n            <wx-view class="button cancel" bind:tap="handleCancel">拒绝</wx-view>\n            <wx-view class="button confirm" bind:tap="handleConfirm">允许</wx-view>\n          </wx-view>\n        </wx-view>\n      </wx-view>\n    </wx-view>\n  ',properties:{nickname:{type:String,value:""},icon:{type:String,value:""},overlay:{type:Boolean,value:!0},apply:{type:String,value:""},input:{type:String,value:""}},data:{enter:!1,duration:300},observers:{input:function(e){if(e){var t=JSON.parse(e);this.setData(t)}}},attached:function(){var e=this;v.triggerRender((function(){e.setData({enter:!0})}))},methods:{handleCancel:function(){this.triggerEvent("cancel"),this.destory()},handleConfirm:function(){this.triggerEvent("confirm"),this.destory()},destory:function(){var e=this;this.setData({enter:!1}),setTimeout((function(){e.triggerEvent("destroy")}),this.data.duration)}}}),n(20),__exparserSclEngine__.exparser);_.registerElement({is:"navigateToMp",options:{classPrefix:"navigate-to-mp",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return 1===e.type},b:[[null,"type"]]}],c:[{t:1,n:"mp-dialog",a:[{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"buttons",e:function(e,t,n){return e.buttons},l:[null],b:[[null,"buttons"]]},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"},{n:"bind:buttontap",v:"handleTapButton"},{n:"mask-closable",e:function(e,t,n){return!1},l:null,b:[]}],c:[{t:1,n:"wx-view",cl:{v:"title"},sl:"title",a:[],c:[{c:"",e:function(e,t,n){return e.title},b:[[null,"title"]],t:3}]},{t:1,n:"block",v:!0,sl:"body",a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.logo||e.name},b:[[null,"logo"],[null,"name"]]}],c:[{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.logo},b:[[null,"logo"]]}],c:[{t:1,n:"wx-image",cl:{v:"logo"},a:[{n:"src",e:function(e,t,n){return e.logo},l:[null],b:[[null,"logo"]]}],c:[]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.name},b:[[null,"name"]]}],c:[{t:1,n:"wx-view",cl:{v:"name"},a:[],c:[{c:"",e:function(e,t,n){return e.name},b:[[null,"name"]],t:3}]}]},{t:1,n:"wx-view",cl:{v:"desc"},a:[],c:[{c:"",e:function(e,t,n){return e.desc},b:[[null,"desc"]],t:3}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"else",d:!0}],c:[{t:1,n:"wx-view",cl:{v:"body-placeholder"},a:[],c:[]}]}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"elif",d:function(e,t,n){return 2===e.type},b:[[null,"type"]]}],c:[{t:1,n:"mp-half-screen-dialog",a:[{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"buttons",e:function(e,t,n){return e.buttons},l:[null],b:[[null,"buttons"]]},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"},{n:"bind:buttontap",v:"handleTapButton"},{n:"mask-closable",e:function(e,t,n){return!1},l:null,b:[]}],c:[{t:1,n:"wx-view",cl:{v:"title"},sl:"title",a:[],c:[{c:"",e:function(e,t,n){return e.title},b:[[null,"title"]],t:3}]},{t:1,n:"block",v:!0,sl:"body",a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.logo||e.name},b:[[null,"logo"],[null,"name"]]}],c:[{t:1,n:"wx-view",cl:{v:"body"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.logo},b:[[null,"logo"]]}],c:[{t:1,n:"wx-image",cl:{v:"logo"},a:[{n:"src",e:function(e,t,n){return e.logo},l:[null],b:[[null,"logo"]]}],c:[]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.name},b:[[null,"name"]]}],c:[{t:1,n:"wx-view",cl:{v:"name"},a:[],c:[{c:"",e:function(e,t,n){return e.name},b:[[null,"name"]],t:3}]}]},{t:1,n:"wx-view",cl:{v:"desc"},a:[],c:[{c:"",e:function(e,t,n){return e.desc},b:[[null,"desc"]],t:3}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"else",d:!0}],c:[{t:1,n:"wx-view",cl:{v:"body-placeholder"},a:[],c:[]}]}]}]}]}]},properties:{type:{type:Number},title:{type:String,value:"即将打开以下小程序"},logo:{type:String,value:""},name:{type:String,value:""},desc:{type:String,value:""},confirmText:{type:String,value:"允许"},cancelText:{type:String,value:"取消"},maskClosable:{type:Boolean,value:!1}},observers:{confirmText:function(e){this.setData({buttons:this.getButtons(e,this.data.cancelText)})},cancelText:function(e){this.setData({buttons:this.getButtons(this.data.confirmText,e)})}},data:{show:!1,buttons:[]},attached:function(){var e=this;_.triggerRender((function(){e.setData({buttons:e.getButtons(e.data.confirmText,e.data.cancelText),show:!0})}))},methods:{getButtons:function(e,t){return[{type:"default",text:t},{type:"primary",text:e}]},handleTapButton:function(e){1===e.detail.index?this.handleConfirm():this.handleCancel()},handleClose:function(){this.handleCancel()},handleCancel:function(){this.triggerEvent("cancel"),this.triggerDestroy()},handleConfirm:function(){this.triggerEvent("confirm"),this.triggerDestroy()},handleClosed:function(){this.triggerEvent("destroy")},triggerDestroy:function(){this.setData({show:!1})}}}),n(22);function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=__exparserSclEngine__.exparser,b=function(e){return e.split("?",2)[0]},w=function(e){return".html"===e.slice(-5)?e.slice(0,-5):e},O=function(e,t){return"/"!==(e=w(e))[0]&&(e="/"+e),w(e)===w(b(t))},E=(m.registerElement({is:"frameset",options:{classPrefix:"frameset",virtualHost:!0},template:function(e,t,n){return[{t:1,n:"virtuallayout",cl:{v:"root"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.hasTabs},b:[[null,"hasTabs"]]}],c:[{t:1,n:"tabbar",cl:{v:"tabs"},a:[{n:"direction",v:"vertical"}],c:[]}]},{t:1,n:"virtuallayout",cl:{v:"panels"},a:[],c:[{t:1,n:"virtuallayout",cl:{v:"left-panel"},a:[],c:[{t:1,n:"block",v:!0,id:"tabList",a:[{s:["tab"],n:"for-item",d:"tab"},{s:["tabIndex"],n:"for-index",d:"tabIndex"},{s:[],n:"key",d:"i"},{s:[],n:"for",d:function(e,t,n){return e.tabs},l:[null],b:[[null,"tabs"]]}],c:[{t:1,n:"block",v:!0,a:[{s:["item"],n:"for-item",d:"item"},{s:["index"],n:"for-index",d:"index"},{s:[],n:"key",d:"i"},{s:[],n:"for",d:function(t,n,r){return e(n.tab,"pages")},l:["tab","pages"],b:[["tab","pages"]]}],c:[{t:1,n:"frame",cl:{e:function(t,n,r){return"left-page "+(e(n.tab,"hidden")?"hidden":"")},b:[["tab","hidden"]]},a:[{n:"back-button",e:function(e,t,n){return t.index>0?"true":""},l:null,b:[["index"]]},{n:"url",e:function(t,n,r){return e(n.item,"url")},l:["item","url"],b:[["item","url"]]},{n:"margin-left",v:"1"},{n:"margin-right",v:"1"},{n:"side",o:"d",e:function(e,t,n){return"left"},l:null,b:[]},{n:"bind:navigateBack",v:"navigateBack"},{n:"bind:resize",v:"triggerPageOnResize"}],c:[]}]}]}]},{t:1,n:"virtuallayout",cl:{v:"right-panel"},a:[],c:[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return e.placeholderImage},b:[[null,"placeholderImage"]]}],c:[{t:1,n:"image",cl:{v:"right-placeholder"},a:[{n:"src",e:function(e,t,n){return e.placeholderImage},l:[null],b:[[null,"placeholderImage"]]}],c:[]}]},{t:1,n:"block",v:!0,id:"pageList",a:[{s:["index"],n:"for-index",d:"index"},{s:[],n:"key",d:"i"},{s:["item"],n:"for-item",d:"item"},{s:[],n:"for",d:function(e,t,n){return e.mainPages},l:[null],b:[[null,"mainPages"]]}],c:[{t:1,n:"frame",cl:{e:function(t,n,r){return"right-page "+(e(n.item,"aniIn")?"right-page-in":"")},b:[["item","aniIn"]]},a:[{n:"back-button",v:"true"},{n:"url",e:function(t,n,r){return e(n.item,"url")},l:["item","url"],b:[["item","url"]]},{n:"side",o:"d",e:function(e,t,n){return"right"},l:null,b:[]},{n:"bind:navigateBack",v:"navigateBack"},{n:"bind:resize",v:"triggerPageOnResize"}],c:[]}]}]}]}]}]},lifetimes:{route:function(e){var t=e.method,n=e.url,r=e.args;this[t](n,r)}},data:{hasTabs:!1,tabs:[],mainPages:[]},created:function(){this.globalShowStatus=!0,this.shownTabDepths=[],this.shownMainPagesDepth=-1,this.pageLifeTimeCallback=function(){}},observers:{"hasTabs, tabs.**, mainPages.**":function(){this.triggerShowHideEvents()}},methods:{normalizeUrl:function(e){return"/"!==e[0]&&(e="/"+e),function(e){var t=e.indexOf("?");return-1===t?e+".html":e.slice(0,t)+".html"+e.slice(t)}(e)},appLaunch:function(e,t){var n=t.tabBarConfig,r=t.entryPagePath,i=n&&n.list&&n.list.length>0&&!n.custom,o=this.normalizeUrl(e),a=null;if(i)n.list.forEach((function(e){O(e.pagePath,o)&&(a=o)}));else{if(!O(r,o))return;a=this.normalizeUrl(w(r))}null===a?this.setData({hasTabs:i,tabs:[{i:0,hidden:!1,pages:[{i:0,url:this.normalizeUrl(w(r))}]}],mainPages:[{i:0,url:o,aniIn:!0}]}):this.setData({hasTabs:i,tabs:[{i:0,hidden:!1,pages:[{i:0,url:a}]}],mainPages:[]})},reLaunch:function(e){e=this.normalizeUrl(e),this.setData({tabs:[{i:0,hidden:!1,pages:[{i:0,url:e}]}],mainPages:[]})},switchTab:function(e){e=this.normalizeUrl(e);var t=!1;this.data.tabs.forEach((function(n){b(n.pages[0].url)===b(e)?(n.hidden=!1,t=!0):n.hidden=!0})),t||this.data.tabs.push({i:this.data.tabs.length,hidden:!1,pages:[{i:0,url:e}]}),this.setData({tabs:this.data.tabs,mainPages:[]})},navigateBack:function(e){var t=this,n="right";e&&(n=e.currentTarget.dataset.side),"left"===n?(this.data.tabs.forEach((function(e){!e.hidden&&e.pages.length>1&&e.pages.pop()})),this.setData({tabs:this.data.tabs})):(this.aniOut(),setTimeout((function(){t.setData({mainPages:t.data.mainPages.slice(0,-1)})}),500))},navigateTo:function(e){e=this.normalizeUrl(e);var t=this.data.mainPages.length;this.setData({mainPages:this.data.mainPages.concat([{i:t,url:e}])}),this.aniIn()},redirectTo:function(e){e=this.normalizeUrl(e);var t=this.data.mainPages.length-1;this.setData({mainPages:this.data.mainPages.slice(0,-1).concat([{i:t,url:e}])}),this.aniIn()},aniIn:function(){var e=this,t=this.data.mainPages.length-1;m.triggerRender((function(){e.setData(y({},"mainPages[".concat(t,"].aniIn"),!0))}))},aniOut:function(){var e=this.data.mainPages.length-1;this.setData(y({},"mainPages[".concat(e,"].aniIn"),!1))},setPlaceholderImage:function(e){this.setData({placeholderImage:e})},triggerShowHideEvents:function(){var e=this,t=this.data.tabs.map((function(t){var n=t.pages;return t.hidden||!e.globalShowStatus?-1:n.length-1})),n=this.globalShowStatus?this.data.mainPages.length-1:-1;if(t.forEach((function(t,n){var r=e.shownTabDepths[n]||0;if(r<t&&r>=0){var i=e.$.tabList.childNodes[n].querySelector(".left-page")[r].$$.getAttribute("-view-id");e.pageLifeTimeCallback(i,"Hide")}else if(t<r&&t>=0){var o=e.$.tabList.childNodes[n].querySelector(".left-page")[t].$$.getAttribute("-view-id");e.pageLifeTimeCallback(o,"Show")}})),this.shownMainPagesDepth<n&&this.shownMainPagesDepth>=0){var r=this.$.pageList.childNodes[this.shownMainPagesDepth].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(r,"Hide")}else if(n<this.shownMainPagesDepth&&n>=0){var i=this.$.pageList.childNodes[n].querySelector(".right-page").$$.getAttribute("-view-id");this.pageLifeTimeCallback(i,"Show")}this.shownTabDepths=t,this.shownMainPagesDepth=n},setGlobalShowStatus:function(e){this.globalShowStatus!==e&&(this.globalShowStatus=e,this.triggerShowHideEvents())},triggerPageOnResize:function(e){var t=e.detail,n=t.viewId,r=t.size;this.pageLifeTimeCallback(n,"Resize",{size:r})},setPageLifeTimeCallback:function(e){this.pageLifeTimeCallback=e}}}),n(2),n(27),__exparserSclEngine__),S=E.exparser,T=[];E.onViewportResize((function(e){T.forEach((function(t){return t(e)}))}));S.registerElement({is:"share-image",behaviors:["wx-theme"],options:{multipleSlots:!0,classPrefix:"share-image",writeIdToDOM:!0},template:function(e,t,n){return[{t:1,n:"block",v:!0,a:[{s:[],n:"if",d:function(e,t,n){return"portrait"===e.orientation},b:[[null,"orientation"]]}],c:[{t:1,n:"mp-bubble-action-sheet",a:[{n:"actions",e:function(e,t,n){return e.actionsArr},l:[null],b:[[null,"actionsArr"]]},{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"mask",e:function(e,t,n){return!1},l:null,b:[]},{n:"bind:buttontap",v:"onButtonTap"},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"}],c:[{t:1,n:"block",v:!0,sl:"mask",a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"mask "+(e.show?"mask__in":"")},b:[[null,"show"]]},a:[],c:[]},{t:1,n:"wx-view",cl:{e:function(e,t,n){return"container "+(e.show?"container__in":"")},b:[[null,"show"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"scroller-container"},a:[],c:[{t:1,n:"scrollview",cl:{v:"scroller"},a:[{n:"scroll-y",v:"1"}],c:[{t:1,n:"wx-view",cl:{v:"img-wrapper"},a:[],c:[{t:1,n:"wx-adaptive-image",cl:{v:"img"},a:[{n:"src",e:function(e,t,n){return e.imgPath},l:[null],b:[[null,"imgPath"]]},{n:"srcHeight",e:function(e,t,n){return e.height},l:[null],b:[[null,"height"]]},{n:"srcWidth",e:function(e,t,n){return e.width},l:[null],b:[[null,"width"]]}],c:[]}]}]}]}]}]}]}]},{t:1,n:"block",v:!0,a:[{s:[],n:"else",d:!0}],c:[{t:1,n:"mp-horizonal-bubble",a:[{n:"actions",e:function(e,t,n){return e.actionsArr},l:[null],b:[[null,"actionsArr"]]},{n:"show",e:function(e,t,n){return e.show},l:[null],b:[[null,"show"]]},{n:"bind:buttontap",v:"onButtonTap"},{n:"bind:close",v:"handleClose"},{n:"bind:closed",v:"handleClosed"}],c:[{t:1,n:"block",v:!0,sl:"content",a:[],c:[{t:1,n:"wx-view",cl:{e:function(e,t,n){return"landscape-container "+(e.show?"container__in":"")},b:[[null,"show"]]},a:[],c:[{t:1,n:"wx-view",cl:{v:"scroller-container"},a:[],c:[{t:1,n:"scrollview",cl:{v:"scroller"},a:[{n:"scroll-y",v:"1"}],c:[{t:1,n:"wx-view",cl:{v:"img-wrapper"},a:[],c:[{t:1,n:"wx-adaptive-image",cl:{v:"img"},a:[{n:"src",e:function(e,t,n){return e.imgPath},l:[null],b:[[null,"imgPath"]]},{n:"srcHeight",e:function(e,t,n){return e.height},l:[null],b:[[null,"height"]]},{n:"srcWidth",e:function(e,t,n){return e.width},l:[null],b:[[null,"width"]]}],c:[]}]}]}]}]}]}]}]}]},properties:{imgPath:{type:String,public:!0,value:""},height:{type:Number,public:!0,value:0},width:{type:Number,public:!0,value:0},actions:{type:String,public:!0,value:"[]"}},data:{show:!1,actionsArr:[],imgHeight:0,imgWidth:0,orientation:"portrait"},observers:{actions:function(){this.getActions(this.data.actions)}},created:function(){this.onViewportResize()},attached:function(){var e=this;S.triggerRender((function(){e.setData({show:!0})})),this._onViewportResize=this.onViewportResize.bind(this),T.push(this._onViewportResize)},detached:function(){T.splice(T.indexOf(this._onViewportResize),1)},methods:{onViewportResize:function(){var e=E.getWindowWidth(),t=E.getWindowHeight();this.updateOrientation(e,t)},updateOrientation:function(e,t){this.setData({orientation:e<=t?"portrait":"landscape"})},getActions:function(e){var t=JSON.parse(e);this.setData({actionsArr:t})},onButtonTap:function(e){var t=e.detail.item;this.triggerEvent(t.action),this.triggerDestroy()},handleClose:function(){this.data.show&&(this.triggerEvent("cancel"),this.triggerDestroy())},handleClosed:function(){this.triggerEvent("destroy")},triggerDestroy:function(){this.setData({show:!1})}}}),n(29),__exparserSclEngine__.exparser.registerElement({is:"toast",options:{classPrefix:"toast",writeIdToDOM:!0},template:'<wx-view class="root">\n    <wx-view class="content">\n      <wx-image src="'.concat("https://res.wx.qq.com/op_res/4gTGxmOnjTG1Pmsfj7JwUaZHfOb677UMxDEVI8p20yTosmcwujlY9-UEvMZm0ePGFGKS_PoQJNEN_S9YFfGTWA",'" class="loading" wx:if="{{loading}}"></wx-image>\n      <wx-view class="title">{{title}}</wx-view>\n    </wx-view>\n  </wx-view>'),properties:{loading:{type:Boolean,value:!1},title:{type:String}},methods:{close:function(){this.triggerEvent("destroy")}}});var I=n(1),A=n(31),C=__exparserSclEngine__.exparser,k=null,x=null,P=[],D=function(e){P?(P.push(e),1===P.length&&WeixinJSBridge.invoke("loadWAFile",{filename:"WASclBackend.wasm"},(function(e){A.wasm_initialize({bin:e.arrayBuffer},(function(){var e=P;P=null,e.forEach((function(e){return e()}))}))}))):e()},R=function(){return x},j=function(e){__exparserSclEngine__.onViewportResize(e)},N=function(e){var t=function(){e({mainRoot:x})};if(k)setTimeout(t,0);else{D((function(){j((function(){C.triggerRender()}));var e=A.Context.create();k=e.createElement("empty","virtuallayout"),e.bindRootNode(k),k.setClass("__wx_scl__root_node"),C.globalOptions.documentBackend="custom",C.globalOptions.customContext=e,C.initBackend(),e.appendStyleSheet(I.styles.join(""));var n=e.createElement("empty","virtuallayout");k.appendChild(n),n.release(),(x=C.createElement("virtuallayout",c)).classList.toggle("__wx_scl__main_root",!0),C.Element.replaceDocumentElement(x,k,0),setTimeout(t,0)}))}},M=function(e){return C.globalOptions.customContext.constructor.getExparserElementByViewId(e)},L=function(){C.triggerRender()};void 0!==__wxConfig&&"ios"!==__wxConfig.platform&&"function"==typeof __wxConfig.onReady?__wxConfig.onReady((function(){setTimeout((function(){__wxConfig.platform,D((function(){}))}),3e3)})):__wxConfig.platform}]),__errorTracer__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t),n.d(t,"callSystemFunction",(function(){return u})),n.d(t,"wrapSystemFunction",(function(){return l})),n.d(t,"callMiniProgramOrPluginFunction",(function(){return d})),n.d(t,"callThirdPartyFunction",(function(){return f})),n.d(t,"wrapMiniProgramOrPluginFunction",(function(){return p})),n.d(t,"wrapThirdPartyFunction",(function(){return h})),n.d(t,"surroundThirdByTryCatch",(function(){return g}));var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,i=[];function o(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var n=t,r=i.length-1,o=0;o>=0&&r>=0;){var s=n.length,c=0;for(var u in a)if(a[u]){var l=n.indexOf(a[u],o);l<0||s<=l||(s=l,c=a[u].length)}if(s>=n.length)break;var d="at <"+i[r--].description+">";n=n.slice(0,s)+d+n.slice(s+c),o=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:n,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function s(e){var t=((new Error).stack||"").match(/.+/gm),n="",i=0;t&&t.forEach((function(e){if(r.test(e)&&2===(i+=1)){var t=e.match(/^(\s*)at /),o=t?t[1].length:0;return n=e.slice(o),!1}return!0})),a[e]=n}function c(){for(var e="",t=i.length-1;t>=0;t--)i[t].pluginAppId&&(e=i[t].pluginAppId);return e}function u(e,t,n,r,u){var d,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===a.wrapSystemFunction&&(a.wrapSystemFunction="",l("","",s)("wrapSystemFunction")),i.push({description:t});try{d=n.apply(r,u)}catch(t){if(o(t)){if("AppServiceSdkKnownError"===t.type)throw i.pop(),t;if("ThirdScriptError"===t.type){var p=c();Reporter.thirdErrorReport({error:t,source:p,triggerErrorCallback:!f})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!f})}if(f)throw i.pop(),t}return i.pop(),d}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return u(e,t,n,this,o,r)}}function d(e,t,n,r,c){var u,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",p("","",s)("wrapMiniProgramOrPluginFunction")),i.push({description:t,pluginAppId:e});try{u=n.apply(r,c)}catch(t){if(o(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!l}),l)throw i.pop(),t}return i.pop(),u}function f(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return d(c(),e,t,n,r,i)}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return d(e,t,n,this,o,r)}}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return d(c(),e,t,this,i,n)}}function g(e,t){var n=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),r=n?n[1]:"",i=e||function(){};return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(c(),r,i,i,t,!1)}}}]),Reporter=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){n.r(t),function(e){n.d(t,"getDataType",(function(){return i})),n.d(t,"safeInstanceOf",(function(){return o})),n.d(t,"isString",(function(){return a})),n.d(t,"isNumber",(function(){return s})),n.d(t,"isBoolean",(function(){return c})),n.d(t,"isUndefined",(function(){return u})),n.d(t,"isNull",(function(){return l})),n.d(t,"isNaN",(function(){return d})),n.d(t,"isFinite",(function(){return f})),n.d(t,"isInfinity",(function(){return p})),n.d(t,"isInteger",(function(){return h})),n.d(t,"isObject",(function(){return g})),n.d(t,"isNonNullObject",(function(){return v})),n.d(t,"isJustObject",(function(){return _})),n.d(t,"isArray",(function(){return y})),n.d(t,"isFunction",(function(){return m})),n.d(t,"isDate",(function(){return b})),n.d(t,"isRegExp",(function(){return w})),n.d(t,"isError",(function(){return O})),n.d(t,"isSymbol",(function(){return E})),n.d(t,"isMap",(function(){return S})),n.d(t,"isWeakMap",(function(){return T})),n.d(t,"isSet",(function(){return I})),n.d(t,"isWeakSet",(function(){return A})),n.d(t,"isPromise",(function(){return C})),n.d(t,"isEmptyObject",(function(){return k})),n.d(t,"isArrayBuffer",(function(){return x})),n.d(t,"isDataView",(function(){return P})),n.d(t,"isTypedArray",(function(){return D})),n.d(t,"isVirtualNode",(function(){return R})),n.d(t,"isVirtualText",(function(){return j})),n.d(t,"paramCheck",(function(){return N})),n.d(t,"safelyToString",(function(){return M}));var r=Object.prototype.toString;function i(e){return r.call(e).slice(8,-1)}function o(e,t){return null!=e&&(e instanceof t||null!=e.constructor&&e.constructor.name===t.name)}var a=function(e){return"String"===i(e)},s=function(e){return"Number"===i(e)},c=function(e){return!0===e||!1===e||"Boolean"===i(e)},u=function(e){return void 0===e},l=function(e){return null===e},d=Number.isNaN||function(e){return e!=e},f=Number.isFinite||function(t){return s(t)&&e.isFinite(t)},p=function(e){return s(e)&&Math.abs(e)===1/0},h=function(e){return f(e)&&Math.floor(e)===e},g=function(e){return"Object"===i(e)},v=function(e){return g(e)&&!l(e)},_=function(e){return"Object"===i(e)},y=Array.isArray||function(e){return"Array"===i(e)},m=function(e){return"function"==typeof e},b=function(e){return"Date"===i(e)},w=function(e){return"RegExp"===i(e)},O=function(e){return"Error"===i(e)},E=function(e){return"Symbol"===i(e)},S=function(e){return"Map"===i(e)},T=function(e){return"WeakMap"===i(e)},I=function(e){return"Set"===i(e)},A=function(e){return"WeakSet"===i(e)},C=function(e){return"Promise"===i(e)},k=function(e){for(var t in e)return!1;return!0},x=function(e){return"ArrayBuffer"===i(e)},P=function(e){return"DataView"===i(e)},D=function(e){return ArrayBuffer.isView(e)&&!P(e)},R=function(e){return e&&"WxVirtualNode"===e.type},j=function(e){return e&&"WxVirtualText"===e.type};function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",r=i(t),o=i(e);if(o!==r)return n+" should be "+r+" instead of "+o+";";var a="";switch(r){case"Object":Object.keys(t).forEach((function(r){a+=N(e[r],t[r],n+"."+r)}));break;case"Array":if(e.length<t.length)return n+" should have at least "+t.length+" item;";for(var s=0;s<t.length;++s)a+=N(e[s],t[s],n+"["+s+"]")}return a}function M(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}}.call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s;n.r(t);var c={APP:0,WIDGET:1,GAME:2,GAME_SUBCONTEXT:3},u={login:1,login_cancel:2,login_fail:3,request_fail:4,connectSocket_fail:5,closeSocket_fail:6,sendSocketMessage_fail:7,uploadFile_fail:8,downloadFile_fail:9,redirectTo_fail:10,navigateTo_fail:11,navigateBack_fail:12,appServiceSDKScriptError:13,webviewSDKScriptError:14,jsEnginScriptError:15,thirdScriptError:16,webviewScriptError:17,exparserScriptError:18,widgetEnginScriptError:113,widgetThirdScriptError:114,gameSDKScriptError:135,gameSubContextSDKScriptError:136,gameThirdScriptError:137,gameSubContextThirdScriptError:138,startRecord:19,startRecord_fail:20,getLocation:21,getLocation_fail:22,chooseLocation:23,chooseLocation_fail:24,openAddress:25,openAddress_fail:26,openLocation:27,openLocation_fail:28,makePhoneCall:29,makePhoneCall_fail:30,operateWXData:31,operateWXData_fail:32,checkLogin:33,checkLogin_fail:34,refreshSession:35,refreshSession_fail:36,chooseVideo:37,chooseVideo_fail:38,chooseImage:39,chooseImage_fail:40,verifyPaymentPassword:41,verifyPaymentPassword_fail:42,requestPayment:43,requestPayment_fail:44,bindPaymentCard:45,bindPaymentCard_fail:46,requestPaymentToBank:47,requestPaymentToBank_fail:48,openDocument:49,openDocument_fail:50,chooseContact:51,chooseContact_fail:52,operateMusicPlayer:53,operateMusicPlayer_fail:54,getMusicPlayerState_fail:55,playVoice_fail:56,setNavigationBarTitle_fail:57,switchTab_fail:58,getImageInfo_fail:59,enableCompass_fail:60,enableAccelerometer_fail:61,getStorage_fail:62,setStorage_fail:63,clearStorage_fail:64,removeStorage_fail:65,getStorageInfo_fail:66,getStorageSync_fail:67,setStorageSync_fail:68,addCard_fail:69,openCard_fail:70,openSetting_fail:71,reLaunch_fail:72,getClipboardData_fail:73,setClipboardData_fail:74,showShareMenu_fail:75,hideShareMenu_fail:76,showToast_fail:77,hideToast_fail:78,openBluetoothAdapter_fail:79,closeBluetoothAdapter_fail:80,getBluetoothAdapterState_fail:81,startBluetoothDevicesDiscovery_fail:82,stopBluetoothDevicesDiscovery_fail:83,getBluetoothDevices_fail:84,getConnectedBluetoothDevices_fail:85,createBLEConnection_fail:86,closeBLEConnection_fail:87,getBLEDeviceServices_fail:88,getBLEDeviceCharacteristics_fail:89,notifyBLECharacteristicValueChanged_fail:90,readBLECharacteristicValue_fail:91,checkIsSupportFacialRecognition_fail:92,startFacialRecognitionVerify_fail:93,startFacialRecognitionVerifyAndUploadVideo_fail:94,startBeaconDiscovery_fail:95,stopBeaconDiscovery_fail:96,getBeacons_fail:97,getSetting_fail:98,setScreenBrightness_fail:99,getScreenBrightness_fail:100,vibrateShort_fail:101,vibrateLong_fail:102,shareAppMessage:103,shareAppMessage_fail:104,shareAppMessage_cancel:105,shareAppMessageDirectly:106,shareAppMessageDirectly_fail:107,shareAppMessageDirectly_cancel:108,sendBizRedPacket_fail:109,addPhoneContact_fail:110,saveImageToPhotosAlbum_fail:111,saveVideoToPhotosAlbum_fail:112,setTopBarText_fail:115,setNavigationBarRightButton_fail:116,setEnableDebug_fail:117,captureScreen_fail:118,setKeepScreenOn_fail:119,createRequestTask:120,createRequestTask_fail:121,createDownloadTask:122,createDownloadTask_fail:123,createUploadTask:124,createUploadTask_fail:125,checkIsSupportSoterAuthentication_fail:126,startSoterAuthentication_fail:127,navigateToMiniProgram_fail:128,navigateBackMiniProgram_fail:129,openDeliveryList_fail:130,setNavigationBarColor_fail:131,setStatusBarStyle_fail:132,getFileInfo_fail:133,global_objs_readonly:134,writeBLECharacteristicValue_fail:206,adData_error:140,adExposureReport_fail:141,adClickReport_fail:142,adNavigateToMiniProgram_fail:143,adOpenUrl_fail:144,initGameIsolatedContext:145,initGameIsolatedContext_fail:146,initGameOpenDataContext:147,initGameOpenDataContext_fail:148,initAppIsolatedContext:149,initAppIsolatedContext_fail:150,adFollowReport_fail:151,adAddContact_fail:152,adDownloadAppInternal_fail:153,adGetInstallState_fail:154,adQueryDownloadTask_fail:155,adAddDownloadTaskStraight_fail:156,adPauseDownloadTask_fail:157,adResumeDownloadTask_fail:158,adInstallDownloadTask_fail:159,pluginDisplayInPage:160,functionalPageSuccess:161,functionalPageFail:162,functionalPageReject:163,insertInputToWebLayer_fail:166,insertVideoToWebLayer_fail:167,insertInputToWebLayer_succ:168,insertVideoToWebLayer_succ:169,insertMapToWebLayer_fail:171,insertMapToWebLayer_succ:172,insertLiveToWebLayer_fail:178,insertLiveToWebLayer_succ:179,insertCanvas2dToWebLayer_fail:180,insertCanvas2dToWebLayer_succ:181,insertWebGLToWebLayer_fail:187,insertWebGLToWebLayer_succ:186,insertVideo2ToWebLayer_fail:182,insertVideo2ToWebLayer_succ:183,insertCameraToWebLayer_fail:184,insertCameraToWebLayer_succ:185,insertTextareaToWebLayer_fail:189,insertTextareaToWebLayer_succ:188,audioInstancesCountReach1024:170,bindUDP:173,sendUDPMessage:174,receiveUDPMessage:175,UDPError:176,sendUDPMessageToInvalidAddress:177,clientRestoreWebview_fail:200,clientLibVersionNotMatch:205,subContextLibVersionNotMatch:207,oaAddContact_fail:201,oaReportBehavior_fail:202,oaGetContactData_fail:203,demoEnterHomePage:210,demoConfigRepeat:211,getUserInteractiveStorage:212,modifyFriendInteractiveStorage:213,modifyFriendInteractiveStorageShowModal:214,modifyFriendInteractiveStorageConfirm:215,modifyFriendInteractiveStorageCancel:216,disableLivePlayer:220,disableLivePusher:221,disableVideo:222,asyncApiCost:226,asyncApiCount:227,requestSubscribeMessageWithNative:230,requestSubscribeMessageWithNativeSuccess:231,requestSubscribeMessageWithNativeFail:232,tradeServiceGetPermissionBytesSuccess:235,tradeServiceGetPermissionBytesFail:236,tradeServiceCanUse:237,tradeServiceCanNotUse:238,tradeServiceTapCard:239,midasLaunchFeatureFail:240,createNormalWorker:241,createWKWorker:242,onWorkerWebViewTerminate:244,loadGameIndependentSubPackageFail:243,requestPaymentCheckTicketCount:245,requestPaymentCheckTicketFail:246,requestPaymentCheckTicketTimeout:247,useLaunchExptInfo:249,useOriginLaunchExptInfo:250,useContactExptInfo:251},l={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267},d={webview2AppService:1,appService2Webview:2,funcReady:3,firstGetData:4,firstRenderTime:5,reRenderTime:6,forceUpdateRenderTime:7,appRoute2newPage:8,newPage2pageReady:9,thirdScriptRunTime:10,pageframe:11,WAWebview:12,WAWidget:13,widgetCanvasReady:14,widgetFirstDataPush:15},f={apiCallback:1,pageInvoke:2,widgetInvoke:3},p={appServiceSDKScriptError:1,webviewSDKScriptError:2,jsEnginScriptError:3,thirdScriptError:4,webviewScriptError:5,exparserScriptError:6,widgetEnginScriptError:7,widgetThirdScriptError:8,gameSDKScriptError:10,gameSubContextSDKScriptError:12,gameThirdScriptError:13,gameSubContextThirdScriptError:14},h=(a(s={},c.APP,"thirdScriptError"),a(s,c.WIDGET,"widgetThirdScriptError"),a(s,c.GAME,"gameThirdScriptError"),a(s,c.GAME_SUBCONTEXT,"gameSubContextThirdScriptError"),s),g=__wxConfig,v=(g.platform,"devtools"===g.platform),_=(g.platform,"ios"===g.platform);g.platform,g.platform,g.platform;var y=g.host||{},m=(y.env,y.env,y.env,y.forceUseNativeMap,n(0)),b=[],w=[],O=[],E=0,S=0,T=0,I=0,A=0,C={},k={},x={};function P(e){void 0!==WeixinJSBridge?e():"undefined"!=typeof document&&document.addEventListener("WeixinJSBridgeReady",e,!1)}function D(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];P((function(){var e;(e=WeixinJSBridge).invoke.apply(e,t)}))}function R(){!b||b.length<=0||(D("reportKeyValue",{dataArray:b.slice(0,500)}),b=b.slice(500))}function j(){!w||w.length<=0||(D("reportIDKey",{dataArray:w.slice(0,500)}),w=w.slice(500))}function N(){!O||O.length<=0||(D("systemLog",{dataArray:O}),O=[])}var M=function(){},L=function(){},B=function(){},F=function(){},U="",W={},V=-1,G=0,H=c.APP,z="";"function"==typeof g.onReady&&g.onReady((function(){void 0!==g.appType&&(V=g.appType),"object"===o(g.appLaunchInfo)&&(G=g.appLaunchInfo.scene),setTimeout((function(){WeixinJSBridge.invoke("getNetworkType",{},(function(e){e&&e.networkType&&(z=e.networkType)}))}),0),"function"==typeof WeixinJSBridge.addEventListener&&WeixinJSBridge.addEventListener("onNetworkStatusChange",(function(e){z=e.networkType}))}));var Y={surroundThirdByTryCatch:__errorTracer__.surroundThirdByTryCatch,slowReport:function(e){var t=e.key,n=e.cost,r=e.extend,i=e.force,o=f[t],a=Date.now();if(o&&(i||!(a-A<500))&&!(Object.keys(x).length>50||(x[r]||(x[r]=0),x[r]++,x[r]>3))){A=a;var s=n+","+encodeURIComponent(r)+","+o+","+Y.getAppType();Y.reportKeyValue({key:"Slow",value:s})}},speedReport:function(e){var t=e.key,n=e.data,r=e.timeMark,i=e.force,o=d[t],a=Date.now(),s=0,c=r.nativeTime;if(o&&(i||!(a-(C[o]||0)<500))&&r.startTime&&r.endTime&&(1!==o&&2!==o||c)){n&&(s=JSON.stringify(n).length),C[o]=a;var u=o+","+r.startTime+","+c+","+c+","+r.endTime+","+s+","+Y.getAppType();Y.reportKeyValue({key:"Speed",value:u})}},reportQualityData:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];D("reportKeyValue",{version:2,dataArray:[{key:l[e],value:[n-t,G,t,n].concat(i(r)).join(",")}]})},reportKeyValue:function(e){var t=e.key,n=e.value,r=e.immediately,i=void 0!==r&&r,o=e.number,a=void 0!==o&&o;if(a||l[t]){for(i?b.unshift({key:a?t:l[t],value:n}):b.push({key:a?t:l[t],value:n});b.length>5e3;)b.pop();(Date.now()-E>5e3||i)&&(E=Date.now(),R())}},reportIDKey:function(e){var t=e.id,n=e.key,r=e.value,i=void 0===r?1:r;if(u[n]){for(w.push({id:t||(_?"356":"358"),key:u[n],value:i});w.length>5e3;)w.pop();Date.now()-S>5e3&&(S=Date.now(),j())}},reportIDKeyDirectly:function(e){var t=e.id,n=e.key,r=e.immediately,i=void 0!==r&&r;if(n&&"356"!==t&&"358"!==t){for(w.push({id:t,key:n,value:1});w.length>5e3;)w.pop();(Date.now()-S>5e3||i)&&(S=Date.now(),j())}},thirdErrorReport:function(e){var t=e.key,n=void 0===t?H:t,r=e.error,i=e.triggerErrorCallback,o=void 0===i||i,a=e.isUnhandledRejection,s=void 0!==a&&a,c=e.promise,u=e.source,l=void 0===u?"":u;Y.errorReport({key:h[n],error:r,triggerErrorCallback:o,isThirdScriptError:!0,isUnhandledRejection:s,promise:c,source:l})},errorReport:function(e){var t=e.key,n=e.error,r=e.isThirdScriptError,a=void 0!==r&&r,s=e.triggerErrorCallback,u=void 0===s||s,l=e.isUnhandledRejection,d=void 0!==l&&l,f=e.promise,h=e.source,_=void 0===h?"":h;if(p[t]&&null!=n){var y,b;"function"==typeof __wxSourceMapRetrace__&&(n=__wxSourceMapRetrace__(n)),"object"===o(n)&&(n.message||n.stack)?(y=n.message,b=n.stack):(y=Object(m.safelyToString)(n),b=Object(m.getDataType)(n));var w=a?"MiniProgramError":"SystemError ("+t+")",O=y,E="";n.name&&0!==b.indexOf(n.name)&&(E="\n"+n.name+": "+O);var S=w+"\n"+O+E+"\n"+b;if(v){var T=new Error(w+"\n"+O);"object"===o(n)&&void 0!==n.name&&(T.name=n.name),"object"===o(n)&&void 0!==n.stack&&(T.stack=b),console.error(T)}else d?console.error("(in promise) "+S):console.error(S);if(!(S.indexOf("subContext.js")>=0)&&("undefined"!=typeof window&&void 0!==window.__webviewId__?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];P((function(){var e;(e=WeixinJSBridge).publish.apply(e,t)}))}("WEBVIEW_ERROR_MSG",{data:{msg:S},options:{timestamp:Date.now()}}):u&&(Y.triggerErrorMessage(S,d,n,f),a&&Y.triggerThirdErrorMessage(S,d,n,f)),!(Object.keys(k).length>50)&&(!d||Object(m.isError)(n)))){var I="",A="";H!==c.APP&&H!==c.GAME||(I=U,A=function(e){var t="";return Object.keys(e).forEach((function(n,r){0!==r&&(t+="&");try{t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n])}catch(e){}})),t}(W));var C=_.match(/wx[0-9a-f]{16}/)?function(e){var t=g&&g.appContactInfo&&g.appContactInfo.call_plugin_info;if(!t||!Array.isArray(t))return 0;var n=t.find((function(t){return t.plugin_id===e}));return n&&void 0!==n.inner_version?n.inner_version:0}(_):0;if(4===g.appType)try{z=__appServiceSDK__.getGameRelatedContextsExports().game._getCurrentNetworkType()}catch(T){}var x=[p[t],n.name].concat(i([O,b,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.version||"",Y.getAppType(),I,A,"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.updateTime||"","",d?1:0,_,C,z].map((function(e){var t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})))).join(",");k[x]||(k[x]=0),k[x]++,a&&k[x]>3||k[x]>3||(Y.reportIDKey({key:t}),Y.reportKeyValue({key:"Error",value:x}),j(),R(),N())}}},log:function(e,t){e&&"string"==typeof e&&(!t&&Date.now()-T<50||(T=Date.now(),O.push(e+""),O.length>=50&&N()))},submit:function(){Date.now()-I<50||(I=Date.now(),j(),R(),N())},registerErrorListener:function(e){"function"==typeof e&&(M=e)},registerThirdErrorListener:function(e){"function"==typeof e&&(L=e)},registerUnhandledRejectionListener:function(e){"function"==typeof e&&(B=e)},registerThirdUnhandledRejectionListener:function(e){"function"==typeof e&&(F=e)},triggerErrorMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;setTimeout((function(){try{t?B(n,r):M(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},triggerThirdErrorMessage:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;setTimeout((function(){try{t?F(n,r):L(e)}catch(e){console.error(e.message,"at onError callback function")}}),0)},setAsWidget:function(){H=c.WIDGET},setAsGame:function(){H=c.GAME},setAsGameSubContext:function(){H=c.GAME_SUBCONTEXT},getAppType:function(){return-1===V?0:V+1e3}},q={};function K(e){Object.defineProperty(q,e,{get:function(){return t=Y[e],function(){try{for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(t,n)}catch(e){return void console.error("reporter error:"+e.message,e.stack)}};var t},configurable:!0,enumerable:!0})}Object.keys(Y).forEach((function(e){K(e)})),Object.defineProperty(q,"__route__",{set:function(e){U=e}}),Object.defineProperty(q,"__method__",{set:function(){}}),Object.defineProperty(q,"__query__",{set:function(e){W=e}}),q.RunType=c,"undefined"!=typeof window&&(window.onbeforeunload=function(){Y.submit()});t.default=q}]).default,wgfx=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importStar(n(2));t.default=r},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return v})),n.d(t,"__spreadArrays",(function(){return _})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return O})),n.d(t,"__makeTemplateObject",(function(){return E})),n.d(t,"__importStar",(function(){return T})),n.d(t,"__importDefault",(function(){return I})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function p(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return S(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))}]).default,wxGA=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([,function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__createBinding",(function(){return f})),n.d(t,"__exportStar",(function(){return p})),n.d(t,"__values",(function(){return h})),n.d(t,"__read",(function(){return g})),n.d(t,"__spread",(function(){return v})),n.d(t,"__spreadArrays",(function(){return _})),n.d(t,"__spreadArray",(function(){return y})),n.d(t,"__await",(function(){return m})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return w})),n.d(t,"__asyncValues",(function(){return O})),n.d(t,"__makeTemplateObject",(function(){return E})),n.d(t,"__importStar",(function(){return T})),n.d(t,"__importDefault",(function(){return I})),n.d(t,"__classPrivateFieldGet",(function(){return A})),n.d(t,"__classPrivateFieldSet",(function(){return C}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var f=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function p(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||f(t,e,n)}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function _(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof m?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(e){l(o[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:m(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function O(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=h(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var S=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function T(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&f(t,e,n);return S(t,e),t}function I(e){return e&&e.__esModule?e:{default:e}}function A(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function C(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnumPixelType=t.EnumAction=t.EnumColorMask=t.EnumBlendOp=t.EnumBlendFactor=t.EnumStencilOp=t.EnumCompareFunc=t.EnumFaceWinding=t.EnumCullMode=t.EnumUniformType=t.EnumVertexStep=t.EnumVertexFormat=t.EnumWrap=t.EnumFilter=t.EnumPrimitiveType=t.EnumPixelFormat=t.EnumShaderStage=t.EnumCubeFace=t.EnumImageType=t.EnumIndexType=t.EnumBufferType=t.EnumUsage=t.EnumFeature=void 0,function(e){e[e.INSTANCING=0]="INSTANCING",e[e.TEXTURE_COMPRESSION_DXT=1]="TEXTURE_COMPRESSION_DXT",e[e.TEXTURE_COMPRESSION_PVRTC=2]="TEXTURE_COMPRESSION_PVRTC",e[e.TEXTURE_COMPRESSION_ATC=3]="TEXTURE_COMPRESSION_ATC",e[e.TEXTURE_COMPRESSION_ETC2=4]="TEXTURE_COMPRESSION_ETC2",e[e.TEXTURE_FLOAT=5]="TEXTURE_FLOAT",e[e.TEXTURE_HALF_FLOAT=6]="TEXTURE_HALF_FLOAT",e[e.ORIGIN_BOTTOM_LEFT=7]="ORIGIN_BOTTOM_LEFT",e[e.ORIGIN_TOP_LEFT=8]="ORIGIN_TOP_LEFT",e[e.MSAA_RENDER_TARGETS=9]="MSAA_RENDER_TARGETS",e[e.PACKED_VERTEX_FORMAT_10_2=10]="PACKED_VERTEX_FORMAT_10_2",e[e.MULTIPLE_RENDER_TARGET=11]="MULTIPLE_RENDER_TARGET",e[e.IMAGETYPE_3D=12]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=13]="IMAGETYPE_ARRAY"}(t.EnumFeature||(t.EnumFeature={})),function(e){e[e.IMMUTABLE=1]="IMMUTABLE",e[e.DYNAMIC=2]="DYNAMIC",e[e.STREAM=3]="STREAM"}(t.EnumUsage||(t.EnumUsage={})),function(e){e[e.VERTEXBUFFER=1]="VERTEXBUFFER",e[e.INDEXBUFFER=2]="INDEXBUFFER"}(t.EnumBufferType||(t.EnumBufferType={})),function(e){e[e.NONE=1]="NONE",e[e.UINT16=2]="UINT16",e[e.UINT32=3]="UINT32"}(t.EnumIndexType||(t.EnumIndexType={})),function(e){e[e.IMAGETYPE_2D=1]="IMAGETYPE_2D",e[e.IMAGETYPE_CUBE=2]="IMAGETYPE_CUBE",e[e.IMAGETYPE_3D=3]="IMAGETYPE_3D",e[e.IMAGETYPE_ARRAY=4]="IMAGETYPE_ARRAY"}(t.EnumImageType||(t.EnumImageType={})),function(e){e[e.POS_X=0]="POS_X",e[e.NEG_X=1]="NEG_X",e[e.POS_Y=2]="POS_Y",e[e.NEG_Y=3]="NEG_Y",e[e.POS_Z=4]="POS_Z",e[e.NEG_Z=5]="NEG_Z",e[e.NUM=6]="NUM"}(t.EnumCubeFace||(t.EnumCubeFace={})),function(e){e[e.VS=0]="VS",e[e.FS=1]="FS"}(t.EnumShaderStage||(t.EnumShaderStage={})),function(e){e[e.NONE=1]="NONE",e[e.RGBA8=2]="RGBA8",e[e.RGB8=3]="RGB8",e[e.RGBA4=4]="RGBA4",e[e.R5G6B5=5]="R5G6B5",e[e.R5G5B5A1=6]="R5G5B5A1",e[e.R10G10B10A2=7]="R10G10B10A2",e[e.RGBA32F=8]="RGBA32F",e[e.RGBA16F=9]="RGBA16F",e[e.R32F=10]="R32F",e[e.R16F=11]="R16F",e[e.L8=12]="L8",e[e.DXT1=13]="DXT1",e[e.DXT3=14]="DXT3",e[e.DXT5=15]="DXT5",e[e.DEPTH=16]="DEPTH",e[e.DEPTHSTENCIL=17]="DEPTHSTENCIL",e[e.PVRTC2_RGB=18]="PVRTC2_RGB",e[e.PVRTC4_RGB=19]="PVRTC4_RGB",e[e.PVRTC2_RGBA=20]="PVRTC2_RGBA",e[e.PVRTC4_RGBA=21]="PVRTC4_RGBA",e[e.ETC2_RGB8=22]="ETC2_RGB8",e[e.ETC2_SRGB8=23]="ETC2_SRGB8",e[e.ETC1_RGB8=24]="ETC1_RGB8",e[e.PIXELFORMAT_PVR_CCZ=25]="PIXELFORMAT_PVR_CCZ",e[e.PIXELFORMAT_PVR_GZ=26]="PIXELFORMAT_PVR_GZ",e[e.PIXELFORMAT_ETC2_RGBA8=27]="PIXELFORMAT_ETC2_RGBA8",e[e.ASTC=28]="ASTC"}(t.EnumPixelFormat||(t.EnumPixelFormat={})),function(e){e[e.POINTS=1]="POINTS",e[e.LINES=2]="LINES",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP"}(t.EnumPrimitiveType||(t.EnumPrimitiveType={})),function(e){e[e.NEAREST=1]="NEAREST",e[e.LINEAR=2]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR"}(t.EnumFilter||(t.EnumFilter={})),function(e){e[e.REPEAT=1]="REPEAT",e[e.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=3]="MIRRORED_REPEAT"}(t.EnumWrap||(t.EnumWrap={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.BYTE4=5]="BYTE4",e[e.BYTE4N=6]="BYTE4N",e[e.UBYTE4=7]="UBYTE4",e[e.UBYTE4N=8]="UBYTE4N",e[e.SHORT2=9]="SHORT2",e[e.SHORT2N=10]="SHORT2N",e[e.SHORT4=11]="SHORT4",e[e.SHORT4N=12]="SHORT4N",e[e.UINT10_N2=13]="UINT10_N2"}(t.EnumVertexFormat||(t.EnumVertexFormat={})),function(e){e[e.PER_VERTEX=1]="PER_VERTEX",e[e.PER_INSTANCE=2]="PER_INSTANCE"}(t.EnumVertexStep||(t.EnumVertexStep={})),function(e){e[e.INVALID=0]="INVALID",e[e.FLOAT=1]="FLOAT",e[e.FLOAT2=2]="FLOAT2",e[e.FLOAT3=3]="FLOAT3",e[e.FLOAT4=4]="FLOAT4",e[e.MAT4=5]="MAT4"}(t.EnumUniformType||(t.EnumUniformType={})),function(e){e[e.NONE=1]="NONE",e[e.FRONT=2]="FRONT",e[e.BACK=3]="BACK"}(t.EnumCullMode||(t.EnumCullMode={})),function(e){e[e.CCW=1]="CCW",e[e.CW=2]="CW"}(t.EnumFaceWinding||(t.EnumFaceWinding={})),function(e){e[e.NEVER=1]="NEVER",e[e.LESS=2]="LESS",e[e.EQUAL=3]="EQUAL",e[e.LESS_EQUAL=4]="LESS_EQUAL",e[e.GREATER=5]="GREATER",e[e.NOT_EQUAL=6]="NOT_EQUAL",e[e.GREATER_EQUAL=7]="GREATER_EQUAL",e[e.ALWAYS=8]="ALWAYS"}(t.EnumCompareFunc||(t.EnumCompareFunc={})),function(e){e[e.KEEP=1]="KEEP",e[e.ZERO=2]="ZERO",e[e.REPLACE=3]="REPLACE",e[e.INCR_CLAMP=4]="INCR_CLAMP",e[e.DECR_CLAMP=5]="DECR_CLAMP",e[e.INVERT=6]="INVERT",e[e.INCR_WRAP=7]="INCR_WRAP",e[e.DECR_WRAP=8]="DECR_WRAP"}(t.EnumStencilOp||(t.EnumStencilOp={})),function(e){e[e.ZERO=1]="ZERO",e[e.ONE=2]="ONE",e[e.SRC_COLOR=3]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=4]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=5]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=6]="ONE_MINUS_SRC_ALPHA",e[e.DST_COLOR=7]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=8]="ONE_MINUS_DST_COLOR",e[e.DST_ALPHA=9]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=10]="ONE_MINUS_DST_ALPHA",e[e.SRC_ALPHA_SATURATED=11]="SRC_ALPHA_SATURATED",e[e.BLEND_COLOR=12]="BLEND_COLOR",e[e.ONE_MINUS_BLEND_COLOR=13]="ONE_MINUS_BLEND_COLOR",e[e.BLEND_ALPHA=14]="BLEND_ALPHA",e[e.ONE_MINUS_BLEND_ALPHA=15]="ONE_MINUS_BLEND_ALPHA"}(t.EnumBlendFactor||(t.EnumBlendFactor={})),function(e){e[e.ADD=1]="ADD",e[e.SUBTRACT=2]="SUBTRACT",e[e.REVERSE_SUBTRACT=3]="REVERSE_SUBTRACT"}(t.EnumBlendOp||(t.EnumBlendOp={})),function(e){e[e.NONE=16]="NONE",e[e.R=1]="R",e[e.G=2]="G",e[e.B=4]="B",e[e.A=8]="A",e[e.RGB=7]="RGB",e[e.RGBA=15]="RGBA"}(t.EnumColorMask||(t.EnumColorMask={})),function(e){e[e.CLEAR=1]="CLEAR",e[e.LOAD=2]="LOAD",e[e.DONTCARE=3]="DONTCARE"}(t.EnumAction||(t.EnumAction={})),function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.FLOAT=5126]="FLOAT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1"}(t.EnumPixelType||(t.EnumPixelType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(4),o=n(6),a=r.__importDefault(n(30)),s=r.__importDefault(n(79)),c=r.__importDefault(n(80)),u=r.__importStar(n(78)),l=function(){function e(){var e=this;if(this.enumComponentType=o.enumComponentType,this.enumModelType=o.enumModelType,this.isNativeValueNative=!1,this.isEngineNative=!1,this.isPhysicsNative=!1,this.isWeakRefNative=!1,this.isCreateNativeUUMap=!1,this.isCreateNativeSUMap=!1,this.isCreateNativeULUMap=!1,this.hasNewWeakRef=!1,this.heatProtect=60,"undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator)this.worker=new NativeGlobal.GameAccelerator,this.isEngineNative=!!this.worker.getEngine,this.isPhysicsNative=!!NativeGlobal.Phys3D,this.isRenderNative=!!this.worker.getRenderer,this.isNativeValueNative=!!this.worker.createNativeValue,this.isWeakRefNative=!!this.worker.createWeakRef,this.hasNewWeakRef=!!this.worker.createNewWeakRef,this.gaVersion=this.worker.getVersion?this.worker.getVersion():{version:"0"},this.isCreateNativeUUMap=!!this.worker.createNativeUUMap,this.isCreateNativeSUMap=!!this.worker.createNativeSUMap,this.isCreateNativeULUMap=!!this.worker.createNativeULUMap;else{this.worker=i.wxMockGA,this.isEngineNative=this.isPhysicsNative=this.isRenderNative=!1;try{var t=u.default("ga-logic");t&&"function"==typeof t.getEngine&&"function"==typeof t.getVersion&&(console.log("ga-logic process id:"+u.pid),this.worker.getEngine=function(){return t.getEngine()},this.worker.getVersion=function(){return t.getVersion()},this.isEngineNative=!0)}catch(e){}this.gaVersion=this.worker.getVersion()}var n=parseInt(this.gaVersion.version),r=NaN===n||n<100?0:n;this.gaVersion.versionNumber=r,this.config={isNativeValueNative:this.isNativeValueNative,isEngineNative:this.isEngineNative,isPhysicsNative:this.isPhysicsNative,isRenderNative:this.isRenderNative,isWeakRefNative:this.isWeakRefNative,gaVersion:this.gaVersion},setTimeout((function(){"undefined"!=typeof NativeGlobal&&NativeGlobal.GameAccelerator,e.isRenderNative,e.isEngineNative&&e.config.gaVersion.versionNumber,e.isNativeValueNative}),100)}return e.prototype.heatProtectPromiseFactory=function(){return new Promise((function(e){e(60)}))},e.prototype.createWeakRef=function(e){return(this.isWeakRefNative?this.worker:i.wxMockGA).createWeakRef(e)},e.prototype.createAutoRef=function(e){return(this.isWeakRefNative?this.worker:i.wxMockGA).createAutoRef(e)},e.prototype.createNewWeakRef=function(e){if(!e._wr_entry_)throw new Error("createNewWeakRef Error: is not a WeakRefSentry");return(this.isWeakRefNative?this.worker:i.wxMockGA).createNewWeakRef(e)},e.prototype.createNewWeakRefSentry=function(){var e=(this.isWeakRefNative?this.worker:i.wxMockGA).createNewWeakRefSentry();return e._wr_entry_=!0,e},e.prototype.NativeGlobalStartProfile=function(){return NativeGlobal.startProfile()},e.prototype.NativeGlobalStopProfile=function(){return NativeGlobal.stopProfile()},e.prototype.getNativeGlobalProfileResult=function(){return NativeGlobal.getProfileResult()},e.prototype.LogicAcceleratorStartProfile=function(){return this.worker.startProfile()},e.prototype.LogicAcceleratorStopProfile=function(){return this.worker.stopProfile()},e.prototype.getLogicAcceleratorProfileResult=function(){return this.worker.getProfileResult()},e.prototype.createNativeValue=function(e){var t=(this.isNativeValueNative?this.worker:i.wxMockGA).createNativeValue(e);return new s.default(t)},e.prototype.getRenderer=function(e){var t=this.isRenderNative?this.worker:i.wxMockGA,n=this.isRenderNative?e.gfx:e,r=t.getRenderer(n);return new c.default(r,this.config)},e.prototype.getEngine=function(){var e=(this.isEngineNative?this.worker:i.wxMockGA).getEngine();return new a.default(e,this.config)},e.prototype.getGAVersion=function(){return this.gaVersion},e.prototype.createNativeUUMap=function(){return(this.isCreateNativeUUMap?this.worker:i.wxMockGA).createNativeUUMap()},e.prototype.createNativeSUMap=function(){return(this.isCreateNativeSUMap?this.worker:i.wxMockGA).createNativeSUMap()},e.prototype.createNativeULUMap=function(){return(this.isCreateNativeULUMap?this.worker:i.wxMockGA).createNativeULUMap()},e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wxMockGA=void 0;var r=n(1),i=r.__importDefault(n(5)),o=n(13),a=r.__importDefault(n(14)),s=function(){function e(){this.key1toKey2=new Map,this.key2toValue=new Map}return e.prototype.set=function(e,t,n){this.key1toKey2.set(e,t),this.key2toValue.set(t,n)},e.prototype.get=function(e,t){if(this.key1toKey2.get(e)===t)return this.key2toValue.get(t)},e.prototype.del=function(e,t){this.key1toKey2.delete(e),this.key2toValue.delete(t)},e}(),c=function(){function e(){this.map=new Map}return e.prototype.set=function(e,t){this.map.set(e,t)},e.prototype.get=function(e){return this.map.get(e)},e.prototype.del=function(e){this.map.delete(e)},e}(),u=function(){function e(){}return e.prototype.createNativeValue=function(e){return new o.NativeValueNative(this._gfx,e)},e.prototype.getRenderer=function(e){return this._gfx=e,new a.default(e)},e.prototype.getEngine=function(){return new i.default},e.prototype.getVersion=function(){return{version:"mock"}},e.prototype.createWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createAutoRef=function(e){if("function"==typeof WeakRef)var t=new WeakRef(e);return{makeRef:function(){return"function"==typeof WeakRef?t.deref():e}}},e.prototype.createNewWeakRef=function(e){return"function"==typeof WeakRef?new WeakRef(e):{deref:function(){return e}}},e.prototype.createNewWeakRefSentry=function(){return{__mockGA__:!0}},e.prototype.createNativeUUMap=function(){return new c},e.prototype.createNativeSUMap=function(){return new c},e.prototype.createNativeULUMap=function(){return new s},e.prototype.startProfile=function(){},e.prototype.stopProfile=function(){},e.prototype.getProfileResult=function(){return{}},e}(),l=new u;t.wxMockGA=l,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(6),o=r.__importDefault(n(7)),a=r.__importDefault(n(9)),s=r.__importDefault(n(10)),c=r.__importDefault(n(11)),u=r.__importDefault(n(12)),l=n(8),d=1024,f=function(){function e(){this.dirtyEntities=new ArrayBuffer(d),this.entityCommands=new ArrayBuffer(d),this.cullingResult=new ArrayBuffer(d)}return e.prototype.createEntity=function(e,t){if(t&&t>0){var n=0;return n=e===i.enumEntityType.Entity3D?4*i.ENTITY3D_SIZE:4*i.ENTITY2D_SIZE,new u.default(n,t)}return new c.default(e)},e.prototype.createComponent=function(e,t,n){if(e===i.enumComponentType.Cullable&&t&&t>0){var r=4*i.CULLABLECOMPONENT_SIZE;return new u.default(r,t)}return new o.default(e,t,n)},e.prototype.createDataModel=function(e,t){return new s.default(e,t)},e.prototype.createDataBuffer=function(e){return new a.default(e)},e.prototype.createAnimatorControllerStateModel=function(e){return{id:l.requestAccelerateObjectID(),buffer:new ArrayBuffer(5*e*4+12)}},e.prototype.refreshWorldTransform=function(){},e.prototype.frustumCulling=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.orthoCulling=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g){return{hash:0,objects:new ArrayBuffer(0),distances:new ArrayBuffer(0)}},e.prototype.addDirtyEntity=function(){},e.prototype.frameStart=function(){},e}();t.default=f},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CULLABLECOMPONENT_SIZE=t.CULLABLECOMPONENT_OFFSET=t.ENTITY3D_SIZE=t.ENTITY3D_OFFSET=t.ENTITY2D_SIZE=t.ENTITY2D_OFFSET=t.POOLINDEX_AND=t.POOLID_AND=t.componentType2SharedBufferSize=t.enumEntityType=t.enumEntityCommandType=t.enumModelType=t.enumComponentType=void 0,function(e){e[e.Undefined=0]="Undefined",e[e.Cullable=1]="Cullable",e[e.Animator=2]="Animator",e[e.SkinnedSkeleton=3]="SkinnedSkeleton"}(r=t.enumComponentType||(t.enumComponentType={})),function(e){e[e.Undefined=0]="Undefined",e[e.AnimationClipModel=1]="AnimationClipModel",e[e.SkeletonBoneInverseModel=2]="SkeletonBoneInverseModel"}(t.enumModelType||(t.enumModelType={})),function(e){e[e.SetRootEntity=1]="SetRootEntity",e[e.AddChild=2]="AddChild",e[e.AddChildAtIndex=3]="AddChildAtIndex",e[e.RemoveFromParent=4]="RemoveFromParent",e[e.DisperseSubTree=5]="DisperseSubTree",e[e.BindToBone=6]="BindToBone",e[e.BindToBones=7]="BindToBones",e[e.UnBindFromBone=8]="UnBindFromBone",e[e.UnBindFromBones=9]="UnBindFromBones",e[e.EntityCommandActive=10]="EntityCommandActive",e[e.EntityCommandInActive=11]="EntityCommandInActive"}(t.enumEntityCommandType||(t.enumEntityCommandType={})),function(e){e[e.Entity2D=0]="Entity2D",e[e.Entity3D=1]="Entity3D"}(t.enumEntityType||(t.enumEntityType={})),t.componentType2SharedBufferSize={},t.componentType2SharedBufferSize[r.Cullable]=24,t.componentType2SharedBufferSize[r.Animator]=4,t.componentType2SharedBufferSize[r.SkinnedSkeleton]=72,t.POOLID_AND=4294963200,t.POOLINDEX_AND=4095,t.ENTITY2D_OFFSET={},t.ENTITY2D_OFFSET.OFFSET_ROTATION=0,t.ENTITY2D_OFFSET.OFFSET_POSITION=1,t.ENTITY2D_OFFSET.OFFSET_SCALE=3,t.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX=5,t.ENTITY2D_SIZE=14,t.ENTITY3D_OFFSET={},t.ENTITY3D_OFFSET.DF_ROTATIONTYPE=1,t.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE=0,t.ENTITY3D_OFFSET.OFFSET_ROTATION=1,t.ENTITY3D_OFFSET.OFFSET_POSITION=5,t.ENTITY3D_OFFSET.OFFSET_SCALE=8,t.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX=11,t.ENTITY3D_SIZE=27,t.CULLABLECOMPONENT_OFFSET={},t.CULLABLECOMPONENT_OFFSET.DF_ACTIVE=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE=0,t.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK=1,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER=2,t.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS=5,t.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID=6,t.CULLABLECOMPONENT_SIZE=7},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(8),o=function(e,t,n){switch(this.size=0,this.id=i.requestAccelerateObjectID(),e){case r.enumComponentType.Cullable:this.size=r.componentType2SharedBufferSize[e];break;case r.enumComponentType.Animator:this.size=r.componentType2SharedBufferSize[e]*t*n;break;case r.enumComponentType.SkinnedSkeleton:this.size=r.componentType2SharedBufferSize[e]*t}this.buffer=new ArrayBuffer(this.size)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyMixins=t.requestAcceleratePoolID=t.requestAccelerateObjectID=void 0;var r=0;t.requestAccelerateObjectID=function(){return r++};var i=4096;t.requestAcceleratePoolID=function(){var e=i;return i+=4096,e},t.applyMixins=function(e,t){t.forEach((function(t){Object.getOwnPropertyNames(t.prototype).forEach((function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=n(8),o=function(e){this.id=i.requestAccelerateObjectID(),e===r.enumEntityType.Entity3D?this.size=108:this.size=56,this.buffer=new ArrayBuffer(this.size)};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),i=function(e,t){this.id=r.requestAcceleratePoolID(),this.size=e*t,this.buffer=new ArrayBuffer(this.size)};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeValueNative=void 0;var r=!1;void 0!==__wxConfig&&__wxConfig.jitMode&&(r=!0);var i=function(e,t){r?(this.nativeBuffer=new Float32Array(t/4),this.data=this.nativeBuffer.buffer):(this.nativeBuffer=e.createNativeBuffer(t),this.data=this.nativeBuffer.data),this._f32View=new Float32Array(this.data)};t.NativeValueNative=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(15)),o=r.__importDefault(n(16)),a=n(25),s=r.__importDefault(n(26)),c=n(17),u=n(27),l=n(23),d=n(28),f=n(29),p=function(){function e(e){this._decoder=new s.default;var t=new o.default(e);this._executor=t,this._decoder._setCommandExecutor(t),this._gfx=e}return e.prototype.createCommandBuffer=function(e){return new i.default(this)},e.prototype.createRect=function(e,t,n,r){return new a.RectNative(e,t,n,r)},e.prototype.createRenderDraw=function(){return new c.RenderDrawNative},e.prototype.createVertexLayout=function(e){var t=JSON.parse(e);return new l.VertexLayoutNative(t,this._gfx)},e.prototype.createView=function(e,t,n,r){return new u.RenderViewNative(e,t,n,r)},e.prototype._executeCommandBuffer=function(e){this._decoder.decodeAndExecCommandBuffer(e),this._executor.endFrame()},e.prototype.executeCommandBuffer=function(e){},e.prototype.createBatchableVertexBuffer=function(e,t){return new d.BatchableVertexBufferNative(e,t)},e.prototype.createBatchableIndexBuffer=function(e){return new f.BatchableIndexBufferNative(e)},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._array=[],this._renderer=e}return e.prototype.extend=function(t){return new e(this._renderer)},e.prototype.putRenderDraw=function(e){this._array.push(e)},e.prototype.batchPutRenderDraw=function(e){this._array=this._array.concat(e)},e.prototype.putSubCommandBuffer=function(e){this._array.push(e)},e.prototype.reset=function(){this._array.length=0},e.prototype.execute=function(){this._renderer._executeCommandBuffer(this)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(23),o=function(){function e(e){this.renderDraw2Bindings=new WeakMap,this.pipelineMap={},this._renderDrawList=[],this._batchedRenderDrawList=[],this.gfx=e}return e.prototype.drawRenderDraw=function(e){this._renderDrawList.push(e)},e.prototype.endFrame=function(){for(var e=0,t=i.createdVertexLayout;e<t.length;e++){t[e]._getBatcher().reset()}for(var n=0,r=this._renderDrawList;n<r.length;n++){var o=r[n];this.doRenderDrawBatch(o)}this._flushRenderDrawBatch();for(var a=0,s=i.createdVertexLayout;a<s.length;a++){s[a]._getBatcher().uploadBuffer()}for(var c=0,u=this._batchedRenderDrawList;c<u.length;c++){o=u[c];this.doDrawRenderDraw(o)}this.lastView&&(this.gfx.endPass(),this.lastView=null),this.gfx.commit(),this._renderDrawList.length=0,this._batchedRenderDrawList.length=0},e.prototype.doRenderDrawBatch=function(e){if(!e.batchable)return this._flushRenderDrawBatch(),void this._batchedRenderDrawList.push(e);this._startBatchedRenderDraw&&!this._compareMaterial(this._startBatchedRenderDraw,e)&&this._flushRenderDrawBatch();var t=e.vertexBuffers[0],n=e.indexBuffer;if(e.renderDataDirty){t._cloneBuffer();for(var r=t._positionViews,i=t._worldPositionViews,o=e._worldTransformMatrix,a=0;a<r.length;a++){var s=r[a],c=i[a];o.transformPoint(s,c)}}var u=e.vertexLayout._getBatcher(),l=u._ibCount;this._startBatchedRenderDraw||(this._startBatchedRenderDraw=e,this._vertexBatcher=u,this._startIBCount=l),u.batchMesh(t,n,e.baseElement,e.numElements)},e.prototype._flushRenderDrawBatch=function(){if(this._startBatchedRenderDraw){var e=new r.RenderDrawNative;Object.assign(e,this._startBatchedRenderDraw),e.indexBuffer=this._vertexBatcher._indexBuffer,e.vertexBuffers=[this._vertexBatcher._vertexBuffer],e.batchable=!1,e.baseElement=this._startIBCount,e.numElements=this._vertexBatcher._ibCount-this._startIBCount,this._batchedRenderDrawList.push(e),this._startBatchedRenderDraw=null,this._vertexBatcher=null}},e.prototype._compareMaterial=function(e,t){var n=e.raster===t.raster&&e.rgba===t.rgba&&e.shader===t.shader&&e.vertexLayout===t.vertexLayout&&e.view===t.view&&e.stencilDepth===t.stencilDepth&&e.stencilOpTest===t.stencilOpTest&&e.blend===t.blend,r=e.images.length,i=e.nativeValues.length;if(!(n=n&&r==t.images.length&&i==t.nativeValues.length))return n;for(var o=0;o<r;o++)n=n&&e.images[o]===t.images[o];for(o=0;o<i;o++)n=n&&e.nativeValues[o]===t.nativeValues[o];return n},e.prototype.doDrawRenderDraw=function(e){var t=e.view;this.lastView!==t&&(this.lastView&&this.gfx.endPass(),t._isDefaultView?"undefined"==typeof __IDE?this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):"undefined"!=typeof __gameContextWindow&&void 0!==__gameContextWindow.__IDE&&void 0!==__gameContextWindow.__IDE.realCanvas?this.gfx.beginDefaultPass(t._passAction,__gameContextWindow.__IDE.realCanvas.width,__gameContextWindow.__IDE.realCanvas.height):this.gfx.beginDefaultPass(t._passAction,t._viewport._width,t._viewport._height):this.gfx.beginPass(t._pass,t._passAction),this.gfx.applyViewport(t._viewport._x,t._viewport._y,t._viewport._width,t._viewport._height,!1),this.gfx.applyScissorRect(t._scissor._x,t._scissor._y,t._scissor._width,t._scissor._height,!1),this.lastView=e.view),this.gfx.applyPipeline(this.getPipeline(e)),this.gfx.applyBindings(this.getBindings(e));for(var n=0;n<e.nativeValues.length;n++){var r=e.nativeValues[n].nativeBuffer;this.gfx.applyUniforms(wgfx.EnumShaderStage.VS,n,r)}this.gfx.draw(e.baseElement,e.numElements,1)},e.prototype.getBindings=function(e){return this.gfx.makeBindings({vertex_buffers:e.vertexBuffers,index_buffer:e.indexBuffer,vs_images:e.images})},e.prototype.getPipeline=function(e){var t=e._hashForPipeline;if(!this.pipelineMap[t]){var n=this.gfx.makePipeline({layout:e.vertexLayout._config.layout,shader:e.shader,index_type:e._getIndexType(),primitive_type:e._getPrimitiveType(),depth_stencil:{stencil_front:{fail_op:e._getStencilFrontFailOp(),depth_fail_op:e._getStencilFrontDepthFailOp(),pass_op:e._getStencilFrontPassOp(),compare_func:e._getStencilFrontCompareFunc()},stencil_back:{fail_op:e._getStencilBackFailOp(),depth_fail_op:e._getStencilBackDepthFailOp(),pass_op:e._getStencilBackPassOp(),compare_func:e._getStencilBackCompareFunc()},depth_compare_func:e._getDepthCompareFunc(),depth_write_enabled:e._getDepthWriteEnable(),stencil_enabled:e._getStencilEnable(),stencil_read_mask:e._getStencilRead(),stencil_write_mask:e._getStencilWrite(),stencil_ref:e._getStencilRef()},blend:{enabled:e._getBlendEnable(),src_factor_rgb:e._getBlendSrcFactorRGB(),dst_factor_rgb:e._getBlendDstFactorRGB(),op_rgb:e._getBlendOpRGB(),src_factor_alpha:e._getBlendSrcFactorAlpha(),dst_factor_alpha:e._getBlendDstFactorAlpha(),op_alpha:e._getBlendOpAlpha(),color_write_mask:e._getBlendColorMask(),color_format:e._getColorFormat(),depth_format:e._getDepthFormat()},rasterizer:{cull_mode:e._getCullMode(),face_winding:e._getFaceWinding()}});this.pipelineMap[t]=n}return this.pipelineMap[t]},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDrawNative=void 0;var r=n(1),i=r.__importDefault(n(18)),o=r.__importDefault(n(19)),a=r.__importDefault(n(21));var s=function(){function e(){this.blend=0,this.rgba=0,this.stencilOpTest=0,this.stencilDepth=0,this.raster=0,this._hashForPipeline=""}return e.prototype.applyUpdate=function(){var e=[this.blend,this.rgba,this.stencilDepth,this.stencilOpTest,this.raster,this.vertexLayout._id,this.shader.id];this._hashForPipeline=e.join("_"),this.worldTransform&&this.batchable&&(this._worldTransformMatrix=new a.default(this.worldTransform._f32View))},e.prototype._getBlendEnable=function(){return!!i.default.WRITE_GET(this.blend,i.default.BLEND_ENABLE_MASK,i.default.BLEND_ENABLE_SHIFT)},e.prototype._getBlendOpAlpha=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_OP_ALPHA_MASK,i.default.BLEND_OP_ALPHA_SHIFT)},e.prototype._getBlendDstFactorAlpha=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_DST_FACTOR_ALPHA_MASK,i.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendSrcFactorAlpha=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_SRC_FACTOR_ALPHA_MASK,i.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)},e.prototype._getBlendOpRGB=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_OP_RGB_MASK,i.default.BLEND_OP_RGB_SHIFT)},e.prototype._getBlendDstFactorRGB=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_DST_FACTOR_RGB_MASK,i.default.BLEND_DST_FACTOR_RGB_SHIFT)},e.prototype._getBlendSrcFactorRGB=function(){return i.default.WRITE_GET(this.blend,i.default.BLEND_SRC_FACTOR_RGB_MASK,i.default.BLEND_SRC_FACTOR_RGB_SHIFT)},e.prototype._getBlendColorMask=function(){return i.default.WRITE_GET(this.blend,i.default.COLOR_WRITE_MASK,i.default.COLOR_WRITE_SHIFT)},e.prototype._getBlendRGBA=function(){var e=o.default.fromHex(this.rgba);return[e.r/255,e.g/255,e.b/255,e.a/255]},e.prototype._getStencilFrontFailOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_FRONT_FAIL_OP_MASK,i.default.STENCIL_FRONT_FAIL_OP_SHIFT)},e.prototype._getStencilFrontDepthFailOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,i.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilFrontPassOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_FRONT_PASS_OP_MASK,i.default.STENCIL_FRONT_PASS_OP_SHIFT)},e.prototype._getStencilFrontCompareFunc=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_FRONT_COMPARE_FUN_MASK,i.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)},e.prototype._getStencilBackFailOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_BACK_FAIL_OP_MASK,i.default.STENCIL_BACK_FAIL_OP_SHIFT)},e.prototype._getStencilBackDepthFailOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,i.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)},e.prototype._getStencilBackPassOp=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_BACK_PASS_OP_MASK,i.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype._getStencilBackCompareFunc=function(){return i.default.WRITE_GET(this.stencilOpTest,i.default.STENCIL_BACK_COMPARE_FUN_MASK,i.default.STENCIL_BACK_COMPARE_FUN_SHIFT)},e.prototype._getStencilRef=function(){return i.default.WRITE_GET(this.stencilDepth,i.default.STENCIL_REF_MASK,i.default.STENCIL_REF_SHIFT)},e.prototype._getStencilWrite=function(){return i.default.WRITE_GET(this.stencilDepth,i.default.STENCIL_WRITE_MASK,i.default.STENCIL_WRITE_SHIFT)},e.prototype._getStencilRead=function(){return i.default.WRITE_GET(this.stencilDepth,i.default.STENCIL_READ_MASK,i.default.STENCIL_READ_SHIFT)},e.prototype._getDepthCompareFunc=function(){return i.default.WRITE_GET(this.stencilDepth,i.default.DEPTH_COMPARE_FUNC_MASK,i.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype._getDepthWriteEnable=function(){return!!i.default.WRITE_GET(this.stencilDepth,i.default.DEPTH_WRITE_ENABLE_FUNC_MASK,i.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)},e.prototype._getStencilEnable=function(){return!!i.default.WRITE_GET(this.stencilDepth,i.default.STENCIL_ENABLE_FUNC_MASK,i.default.STENCIL_ENABLE_FUNC_SHIFT)},e.prototype._getColorAttachCount=function(){return i.default.WRITE_GET(this.raster,i.default.COLOR_ATTACHMENT_COUNT_MASK,i.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype._getColorFormat=function(){return i.default.WRITE_GET(this.raster,i.default.COLOR_FORMAT_MASK,i.default.COLOR_FORMAT_SHIFT)},e.prototype._getDepthFormat=function(){return i.default.WRITE_GET(this.raster,i.default.DEPTH_FORMAT_MASK,i.default.DEPTH_FORMAT_SHIFT)},e.prototype._getCullMode=function(){return i.default.WRITE_GET(this.raster,i.default.CULL_MODE_MASK,i.default.CULL_MODE_SHIFT)},e.prototype._getFaceWinding=function(){return i.default.WRITE_GET(this.raster,i.default.FACE_WINDING_MASK,i.default.FACE_WINDING_SHIFT)},e.prototype._getSampleCount=function(){return i.default.WRITE_GET(this.raster,i.default.SAMPLE_COUNT_MASK,i.default.SAMPLE_COUNT_SHIFT)},e.prototype._getPrimitiveType=function(){return i.default.WRITE_GET(this.raster,i.default.PRIMITIVE_TYPE_MASK,i.default.PRIMITIVE_TYPE_SHIFT)},e.prototype._getIndexType=function(){return i.default.WRITE_GET(this.raster,i.default.INDEX_TYPE_MASK,i.default.INDEX_TYPE_SHIFT)},e.prototype._getAlphaToCoverageEnable=function(){return i.default.WRITE_GET(this.raster,i.default.ALPHA_TO_COVERAGE_ENABLE_MASK,i.default.ALPHA_TO_COVERAGE_ENABLE_SHIFT)},e}();t.RenderDrawNative=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={WRITE_GET:function(e,t,n){return(e&t)>>n},WRITE_SET:function(e,t,n){return e<<n&t},WRITE_SET_SAFE:function(e,t,n){return e<<n>>>0&t},COLOR_WRITE_SHIFT:0,COLOR_WRITE_MASK:15,BLEND_SRC_FACTOR_RGB_SHIFT:4,BLEND_SRC_FACTOR_RGB_MASK:240,BLEND_DST_FACTOR_RGB_SHIFT:8,BLEND_DST_FACTOR_RGB_MASK:3840,BLEND_OP_RGB_SHIFT:12,BLEND_OP_RGB_MASK:61440,BLEND_SRC_FACTOR_ALPHA_SHIFT:16,BLEND_SRC_FACTOR_ALPHA_MASK:983040,BLEND_DST_FACTOR_ALPHA_SHIFT:20,BLEND_DST_FACTOR_ALPHA_MASK:15728640,BLEND_OP_ALPHA_SHIFT:24,BLEND_OP_ALPHA_MASK:251658240,BLEND_ENABLE_SHIFT:28,BLEND_ENABLE_MASK:4026531840,BLEND_RGBA_R_SHIFT:0,BLEND_RGBA_R_MASK:255,BLEND_RGBA_G_SHIFT:8,BLEND_RGBA_G_MASK:65280,BLEND_RGBA_B_SHIFT:16,BLEND_RGBA_B_MASK:16711680,BLEND_RGBA_A_SHIFT:24,BLEND_RGBA_A_MASK:4278190080,STENCIL_FRONT_FAIL_OP_SHIFT:0,STENCIL_FRONT_FAIL_OP_MASK:15,STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT:4,STENCIL_FRONT_DEPTH_FAIL_OP_MASK:240,STENCIL_FRONT_PASS_OP_SHIFT:8,STENCIL_FRONT_PASS_OP_MASK:3840,STENCIL_FRONT_COMPARE_FUN_SHIFT:12,STENCIL_FRONT_COMPARE_FUN_MASK:61440,STENCIL_BACK_FAIL_OP_SHIFT:16,STENCIL_BACK_FAIL_OP_MASK:983040,STENCIL_BACK_DEPTH_FAIL_OP_SHIFT:20,STENCIL_BACK_DEPTH_FAIL_OP_MASK:15728640,STENCIL_BACK_PASS_OP_SHIFT:24,STENCIL_BACK_PASS_OP_MASK:251658240,STENCIL_BACK_COMPARE_FUN_SHIFT:28,STENCIL_BACK_COMPARE_FUN_MASK:4026531840,STENCIL_REF_SHIFT:0,STENCIL_REF_MASK:255,STENCIL_WRITE_SHIFT:8,STENCIL_WRITE_MASK:65280,STENCIL_READ_SHIFT:16,STENCIL_READ_MASK:16711680,DEPTH_COMPARE_FUNC_SHIFT:24,DEPTH_COMPARE_FUNC_MASK:251658240,DEPTH_WRITE_ENABLE_FUNC_SHIFT:28,DEPTH_WRITE_ENABLE_FUNC_MASK:805306368,STENCIL_ENABLE_FUNC_SHIFT:30,STENCIL_ENABLE_FUNC_MASK:3221225472,COLOR_ATTACHMENT_COUNT_SHIFT:0,COLOR_ATTACHMENT_COUNT_MASK:15,COLOR_FORMAT_SHIFT:4,COLOR_FORMAT_MASK:1008,DEPTH_FORMAT_SHIFT:10,DEPTH_FORMAT_MASK:64512,BLEND_PART_MASK:65535,CULL_MODE_SHIFT:16,CULL_MODE_MASK:196608,FACE_WINDING_SHIFT:18,FACE_WINDING_MASK:786432,SAMPLE_COUNT_SHIFT:20,SAMPLE_COUNT_MASK:15728640,PRIMITIVE_TYPE_SHIFT:24,PRIMITIVE_TYPE_MASK:117440512,INDEX_TYPE_SHIFT:27,INDEX_TYPE_MASK:939524096,ALPHA_TO_COVERAGE_ENABLE_SHIFT:30,ALPHA_TO_COVERAGE_ENABLE_MASK:3221225472,RASTER_PART_MASK:4294901760}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlendType=void 0;var r,i=n(20);!function(e){e[e.Alpha=0]="Alpha",e[e.RGB=1]="RGB",e[e.RGBA=2]="RGBA",e[e.None=3]="None"}(r=t.BlendType||(t.BlendType={}));var o=function(){function e(e,t,n,r){e=e||0,t=t||0,n=n||0,r="number"==typeof r?r:255,this._value32=(r<<24>>>0)+(n<<16)+(t<<8)+e}return Object.defineProperty(e.prototype,"r",{get:function(){return 255&this._value32},set:function(e){e=i.mathClamp(e,0,255),this._value32=(4294967040&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return(65280&this._value32)>>>8},set:function(e){e=i.mathClamp(e,0,255)<<8,this._value32=(4294902015&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return(16711680&this._value32)>>>16},set:function(e){e=i.mathClamp(e,0,255)<<16,this._value32=(4278255615&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"a",{get:function(){return(4278190080&this._value32)>>>24},set:function(e){e=i.mathClamp(e,0,255)<<24,this._value32=(16777215&this._value32|e)>>>0},enumerable:!1,configurable:!0}),Object.defineProperty(e,"WHITE",{get:function(){return new e(255,255,255,255)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"BLACK",{get:function(){return new e(0,0,0,255)},enumerable:!1,configurable:!0}),e.fromHex=function(t){var n=new e(0,0,0,0);return n._value32=t,n},e.fromFloatArray=function(t){return new e(Math.ceil(255*(t[0]||0)),Math.ceil(255*(t[1]||0)),Math.ceil(255*(t[2]||0)),t.length>=4?Math.ceil(255*(t[3]||0)):255)},e.prototype.clone=function(){var t=new e(0,0,0,0);return t._value32=this._value32,t},e.prototype.equals=function(e){return e._value32===this._value32},e.prototype.set=function(e){this._value32=e._value32},e.prototype.setRGBA=function(e,t,n,r){this._value32=(r<<24>>>0)+(n<<16)+(t<<8)+e},e.prototype.setValue32=function(e){this._value32=e},e.prototype.toNormalizedArray=function(){return[this.r/255,this.g/255,this.b/255,this.a/255]},e.prototype.toRGBAString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a/255+")"},e.prototype.mix=function(t,n){return n?(n.r=this.r*t.r/255,n.g=this.g*t.g/255,n.b=this.b*t.b/255,n.a=this.a*t.a/255,n):new e(this.r*t.r/255,this.g*t.g/255,this.b*t.b/255,this.a*t.a/255)},e.blendColorHex=function(e,t,n){var i;switch(void 0===n&&(n=r.None),n){case r.Alpha:i=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(16777215&e);break;case r.RGB:i=(4278190080&e)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case r.RGBA:i=(((4278190080&e)>>>24)*((4278190080&t)>>>24)/255<<24>>>0)+(((16711680&e)>>>16)*((16711680&t)>>>16)/255<<16)+(((65280&e)>>>8)*((65280&t)>>>8)/255<<8)+(255&e)*(255&t)/255;break;case r.None:default:i=e}return i},e.getValue32FromRGBA=function(e,t,n,r){return(r<<24>>>0)+(n<<16)+(t<<8)+e},e.randomMix=function(e,t){var n=255&e,r=(65280&e)>>>8,i=(16711680&e)>>>16,o=(4278190080&e)>>>24,a=255&t,s=(65280&t)>>>8,c=(16711680&t)>>>16,u=(4278190080&t)>>>24,l=Math.random(),d=Math.abs(n-a)*l+Math.min(n,a),f=Math.abs(r-s)*l+Math.min(r,s),p=Math.abs(i-c)*l+Math.min(i,c),h=Math.abs(o-u)*l+Math.min(o,u);return this.getValue32FromRGBA(d,f,p,h)},e.BlendType=r,e}();t.default=o},function(e,t,n){"use strict";function r(e,t){return 0===e?1===t?Math.PI/2:-Math.PI/2:e>0?Math.atan(t/e):e<0?t>0?Math.atan(t/e)+Math.PI:Math.atan(t/e)-Math.PI:0}function i(e){return!(e&e-1)}function o(e,t){return Math.abs(e-t)<1e-6}function a(e,t,n){return(e=e>t?e:t)<n?e:n}Object.defineProperty(t,"__esModule",{value:!0}),t.m4Helper=t.m3Helper=t.quatHelper=t.v4Helper=t.v3Helper=t.v2Helper=t.mathHelper=t.mathClamp=t.nearEqual=t.isPowOf2=t.arcTanAngle=void 0,t.arcTanAngle=r,t.isPowOf2=i,t.nearEqual=o,t.mathClamp=a,t.mathHelper={arcTanAngle:r,isPowOf2:i,nearEqual:o,mathClamp:a},t.v2Helper={equal:function(e,t,n,r){return o(e[t],n[r])&&o(e[t+1],n[r+1])},add:function(e,t,n,r,i,o){i[o]=e[t]+n[r],i[o+1]=e[t+1]+n[r+1]},sub:function(e,t,n,r,i,o){i[o]=e[t]-n[r],i[o+1]=e[t+1]-n[r+1]},length:function(e,t){var n=e[t],r=e[t+1];return Math.sqrt(n*n+r*r)},normalize:function(e,n,r,i){var o=t.v2Helper.length(e,n);0===o?(r[i]=0,r[i+1]=0):(r[i]=e[n]/o,r[i+1]=e[n+1]/o)},scale:function(e,t,n,r,i){r[i]=e[t]*n,r[i+1]=e[t+1]*n},lerp:function(e,t,n,r,i,o,a){var s=1-i;o[a]=e[t]*s+n[r]*i,o[a+1]=e[t+1]*s+n[r+1]*i},dot:function(e,t,n,r){return e[t]*n[r]+e[t+1]*n[r+1]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)},getAngle:function(e,t){var n=180*Math.atan2(e[t+1],e[t])/Math.PI;return(360+Math.round(n))%360},distance:function(e,t,n,r){var i=e[t]-n[r],o=e[t+1]-n[r+1];return Math.sqrt(i*i+o*o)},copy:function(e,t,n,r){n[r+0]=e[t+0],n[r+1]=e[t+1]}},t.v3Helper={equal:function(e,t,n,r){return o(e[t],n[r])&&o(e[t+1],n[r+1])&&o(e[t+2],n[r+2])},add:function(e,t,n,r,i,o){i[o]=e[t]+n[r],i[o+1]=e[t+1]+n[r+1],i[o+2]=e[t+2]+n[r+2]},sub:function(e,t,n,r,i,o){i[o]=e[t]-n[r],i[o+1]=e[t+1]-n[r+1],i[o+2]=e[t+2]-n[r+2]},length:function(e,t){var n=e[t],r=e[t+1],i=e[t+2];return Math.sqrt(n*n+r*r+i*i)},normalize:function(e,n,r,i){var o=t.v3Helper.length(e,n);0===o?(r[i]=0,r[i+1]=0,r[i+2]=0):(r[i]=e[n]/o,r[i+1]=e[n+1]/o,r[i+2]=e[n+2]/o)},scale:function(e,t,n,r,i){r[i]=e[t]*n,r[i+1]=e[t+1]*n,r[i+2]=e[t+2]*n},lerp:function(e,t,n,r,i,o,a){var s=1-i;o[a]=e[t]*s+n[r]*i,o[a+1]=e[t+1]*s+n[r+1]*i,o[a+2]=e[t+2]*s+n[r+2]*i},dot:function(e,t,n,r){return e[t]*n[r]+e[t+1]*n[r+1]+e[t+2]*n[r+2]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)&&o(e[t+2],0)},cross:function(e,t,n,r,i,o){i[o]=e[t+1]*n[r+2]-n[r+1]*e[t+2],i[o+1]=e[t+2]*n[r]-n[r+2]*e[t],i[o+2]=e[t]*n[r+1]-n[r]*e[t+1]},distance:function(e,t,n,r){var i=e[t]-n[r],o=e[t+1]-n[r+1],a=e[t+2]-n[r+2];return Math.sqrt(i*i+o*o+a*a)},angleTo:function(e,n,i,o,a,c){var u=s;t.v3Helper.sub(i,o,e,n,u,0),t.v3Helper.normalize(u,0,u,0),a[c]=Math.asin(u[1]),a[c+1]=r(-u[2],-u[0]),a[c+2]=0},copy:function(e,t,n,r){n[r+0]=e[t+0],n[r+1]=e[t+1],n[r+2]=e[t+2]}},t.v4Helper={equal:function(e,t,n,r){return o(e[t],n[r])&&o(e[t+1],n[r+1])&&o(e[t+2],n[r+2])&&o(e[t+3],n[r+3])},add:function(e,t,n,r,i,o){i[o]=e[t]+n[r],i[o+1]=e[t+1]+n[r+1],i[o+2]=e[t+2]+n[r+2],i[o+3]=e[t+3]+n[r+3]},sub:function(e,t,n,r,i,o){i[o]=e[t]-n[r],i[o+1]=e[t+1]-n[r+1],i[o+2]=e[t+2]-n[r+2],i[o+3]=e[t+3]-n[r+3]},scale:function(e,t,n,r,i){r[i]=e[t]*n,r[i+1]=e[t+1]*n,r[i+2]=e[t+2]*n,r[i+3]=e[t+3]*n},lerp:function(e,t,n,r,i,o,a){var s=1-i;o[a]=e[t]*s+n[r]*i,o[a+1]=e[t+1]*s+n[r+1]*i,o[a+2]=e[t+2]*s+n[r+2]*i,o[a+3]=e[t+3]*s+n[r+3]*i},dot:function(e,t,n,r){return e[t]*n[r]+e[t+1]*n[r+1]+e[t+2]*n[r+2]+e[t+3]*n[r+3]},isZero:function(e,t){return o(e[t],0)&&o(e[t+1],0)&&o(e[t+2],0)&&o(e[t+3],0)},copy:function(e,t,n,r){4===e.length?n.set(e,r):(n[r+0]=e[t+0],n[r+1]=e[t+1],n[r+2]=e[t+2],n[r+3]=e[t+3])}},t.quatHelper={multiply:function(e,t,n,r,i,o){var a=e[t+0],s=e[t+1],c=e[t+2],u=e[t+3],l=n[r+0],d=n[r+1],f=n[r+2],p=n[r+3],h=s*f-c*d,g=c*l-a*f,v=a*d-s*l,_=a*l+s*d+c*f;i[o]=a*p+l*u+h,i[o+1]=s*p+d*u+g,i[o+2]=c*p+f*u+v,i[o+3]=u*p-_},invert:function(e,t,n,r){var i=e[t+0],o=e[t+1],a=e[t+2],s=e[t+3],c=i*i+o*o+a*a+s*s,u=c?1/c:0;n[r]=-i*u,n[r+1]=-o*u,n[r+2]=-a*u,n[r+3]=s*u},toMatrix4:function(e,t,n,r){var i=e[t],o=e[t+1],a=e[t+2],s=e[t+3],c=i+i,u=o+o,l=a+a,f=i*c,p=o*c,h=o*u,g=a*c,v=a*u,_=a*l,y=s*c,m=s*u,b=s*l;n.set(d,r),n[r]=1-h-_,n[r+1]=p+b,n[r+2]=g-m,n[r+4]=p-b,n[r+5]=1-f-_,n[r+6]=v+y,n[r+8]=g+m,n[r+9]=v-y,n[r+10]=1-f-h},fromMatrix4:function(e,t,n,r){var i,o,a=e,s=t,c=l,u=a[s+0]+a[s+5]+a[s+10];u>0?(i=Math.sqrt(u+1),c[3]=.5*i,i=.5/i,c[0]=(a[s+6]-a[s+9])*i,c[1]=(a[s+8]-a[s+2])*i,c[2]=(a[s+1]-a[s+4])*i):a[s+0]>=a[s+5]&&a[s+0]>=a[s+10]?(o=.5/(i=Math.sqrt(1+a[s+0]-a[s+5]-a[s+10])),c[0]=.5*i,c[1]=(a[s+1]+a[s+4])*o,c[2]=(a[s+2]+a[s+8])*o,c[3]=(a[s+6]-a[s+9])*o):a[s+5]>a[s+10]?(o=.5/(i=Math.sqrt(1+a[s+5]-a[s+0]-a[s+10])),c[0]=(a[s+4]+a[s+1])*o,c[1]=.5*i,c[2]=(a[s+9]+a[s+6])*o,c[3]=(a[s+8]-a[s+2])*o):(o=.5/(i=Math.sqrt(1+a[s+10]-a[s+0]-a[s+5])),c[0]=(a[s+8]+a[s+2])*o,c[1]=(a[s+9]+a[s+6])*o,c[2]=.5*i,c[3]=(a[s+1]-a[s+4])*o),n.set(c,r)},fromEulerAngles:function(e,n,r,i){t.quatHelper.fromYawRawPitch(e[n+1],e[n],e[n+2],r,i)},fromYawRawPitch:function(e,t,n,r,i){var o=.5*n,a=.5*t,s=.5*e,c=Math.sin(o),u=Math.cos(o),l=Math.sin(a),d=Math.cos(a),f=Math.sin(s),p=Math.cos(s);r[i]=p*l*u+f*d*c,r[i+1]=f*d*u-p*l*c,r[i+2]=p*d*c-f*l*u,r[i+3]=p*d*u+f*l*c},toEulerAngles:function(e,n,r,i){t.quatHelper.toYawRawPitch(e,n,r,i)},toYawRawPitch:function(e,n,i,o){t.quatHelper.transformDirection(e,n,h,0,s,0),t.quatHelper.transformDirection(e,n,g,0,c,0);var a=c;t.v3Helper.angleTo(v,0,s,0,u,0);var l=u;l[0]===Math.PI/2?(l[1]=r(a[2],a[0]),l[2]=0):l[0]===-Math.PI/2?(l[1]=r(-a[2],-a[0]),l[2]=0):(t.m4Helper.yRotation(-l[1],_,0),t.m4Helper.xRotation(-l[0],y,0),t.m4Helper.transformPoint(_,0,c,0,c,0),t.m4Helper.transformPoint(y,0,c,0,c,0),l[2]=r(a[1],-a[0])),l[1]<=-Math.PI&&(l[1]=Math.PI),l[2]<=-Math.PI&&(l[2]=Math.PI),l[1]>=Math.PI&&l[2]>=Math.PI&&(l[1]=0,l[2]=0,l[0]=Math.PI-l[0]),i.set(l,o)},slerp:function(e,t,n,r,i,o,a){var s,c,u,l,d,f=e[t+0],p=e[t+1],h=e[t+2],g=e[t+3],v=n[r+0],_=n[r+1],y=n[r+2],m=n[r+3];return(c=f*v+p*_+h*y+g*m)<0&&(c=-c,v=-v,_=-_,y=-y,m=-m),1-c>1e-6?(s=Math.acos(c),u=Math.sin(s),l=Math.sin((1-i)*s)/u,d=Math.sin(i*s)/u):(l=1-i,d=i),o[a]=l*f+d*v,o[a+1]=l*p+d*_,o[a+2]=l*h+d*y,o[a+3]=l*g+d*m,o},transformDirection:function(e,t,n,r,i,o){var a=n[r],s=n[r+1],c=n[r+2],u=e[t],l=e[t+1],d=e[t+2],f=e[t+3],p=f*a+l*c-d*s,h=f*s+d*a-u*c,g=f*c+u*s-l*a,v=-u*a-l*s-d*c;i[o]=p*f+v*-u+h*-d-g*-l,i[o+1]=h*f+v*-l+g*-u-p*-d,i[o+2]=g*f+v*-d+p*-l-h*-u}},t.m3Helper={translate:function(e,t,n,r,i,o){var a=e[t+0],s=e[t+1],c=e[t+2],u=e[t+3+0],l=e[t+3+1],d=e[t+3+2],f=e[t+6+0],p=e[t+6+1],h=e[t+6+2];9===e.length?i.set(e,o):i===e&&o===t||(i[o]=a,i[o+1]=s,i[o+2]=c,i[o+3]=u,i[o+4]=l,i[o+5]=d),i[o+6]=a*n+u*r+f,i[o+7]=s*n+l*r+p,i[o+8]=c*n+d*r+h},scale:function(e,t,n,r,i,o){i[o+0]=n*e[t+0],i[o+1]=n*e[t+1],i[o+3]=r*e[t+3],i[o+4]=r*e[t+4],i===e&&o===t||(i[o+6]=e[t+6],i[o+7]=e[t+7],i[o+8]=e[t+8])},rotate:function(e,t,n,r,i){var o=e[t+0],a=e[t+1],s=e[t+2],c=e[t+3],u=e[t+4],l=e[t+5],d=Math.cos(n),f=Math.sin(n);r[i+0]=d*o-f*c,r[i+1]=d*a-f*u,r[i+2]=d*s-f*l,r[i+3]=d*c+f*o,r[i+4]=d*u+f*a,r[i+5]=d*l+f*s,r===e&&i===t||(r[i+6]=e[t+6],r[i+7]=e[t+7],r[i+8]=e[t+8])},inverse:function(e,t,n,r){var i=e[t+0+0],o=e[t+0+1],a=e[t+0+2],s=e[t+3+0],c=e[t+3+1],u=e[t+3+2],l=e[t+6+0],d=e[t+6+1],f=e[t+6+2],p=c*f-u*d,h=o*f-a*d,g=o*u-a*c,v=1/(i*p-s*h+l*g);n[r+0]=v*p,n[r+1]=-v*h,n[r+2]=v*g,n[r+3]=-v*(s*f-u*l),n[r+4]=v*(i*f-a*l),n[r+5]=-v*(i*u-a*s),n[r+6]=v*(s*d-c*l),n[r+7]=-v*(i*d-o*l),n[r+8]=v*(i*c-o*s)},multiply:function(e,t,n,r,i,o){var a=e[t+0+0],s=e[t+0+1],c=e[t+0+2],u=e[t+3+0],l=e[t+3+1],d=e[t+3+2],f=e[t+6+0],p=e[t+6+1],h=e[t+6+2],g=n[r+0+0],v=n[r+0+1],_=n[r+0+2],y=n[r+3+0],m=n[r+3+1],b=n[r+3+2],w=n[r+6+0],O=n[r+6+1],E=n[r+6+2];i[o+0]=g*a+v*u+_*f,i[o+1]=g*s+v*l+_*p,i[o+2]=g*c+v*d+_*h,i[o+3]=y*a+m*u+b*f,i[o+4]=y*s+m*l+b*p,i[o+5]=y*c+m*d+b*h,i[o+6]=w*a+O*u+E*f,i[o+7]=w*s+O*l+E*p,i[o+8]=w*c+O*d+E*h},transformPoint:function(e,t,n,r,i,o){var a=n[r+0],s=n[r+1],c=a*e[t+0+2]+s*e[t+3+2]+e[t+6+2];i[o+0]=(a*e[t+0+0]+s*e[t+3+0]+e[t+6+0])/c,i[o+1]=(a*e[t+0+1]+s*e[t+3+1]+e[t+6+1])/c},decomposeScale:function(e,t,n,r){var i=e[t+0],o=e[t+1],a=e[t+3],s=e[t+4];n[r]=Math.sqrt(i*i+o*o),n[r+1]=Math.sqrt(a*a+s*s)},copy:function(e,t,n,r){if(9===e.length)n.set(e,r);else for(var i=0;i<9;i++)n[r+i]=e[t+i]}},t.m4Helper={lookAt:function(e,n,r,i,o,a,l,f){var p=s,h=c,g=u;t.v3Helper.sub(e,n,r,i,p,0),t.v3Helper.normalize(p,0,p,0),t.v3Helper.cross(o,a,p,0,h,0),t.v3Helper.normalize(h,0,h,0),t.v3Helper.cross(p,0,h,0,g,0),t.v3Helper.normalize(g,0,g,0),l.set(d,f),l[f]=h[0],l[f+1]=h[1],l[f+2]=h[2],l[f+4]=g[0],l[f+5]=g[1],l[f+6]=g[2],l[f+8]=p[0],l[f+9]=p[1],l[f+10]=p[2],l[f+12]=e[n],l[f+13]=e[n+1],l[f+14]=e[n+2]},perspective:function(e,t,n,r,i,o){var a=Math.tan(.5*Math.PI-.5*e),s=1/(n-r);i.set(f,o),i[o]=a/t,i[o+5]=a,i[o+10]=(n+r)*s,i[o+14]=n*r*s*2},orthographic:function(e,t,n,r,i,o,a,s){a.set(p,s),a[s]=2/(t-e),a[s+5]=2/(r-n),a[s+10]=2/(i-o),a[s+12]=(e+t)/(e-t),a[s+13]=(n+r)/(n-r),a[s+14]=(i+o)/(i-o)},xRotation:function(e,t,n){var r=Math.cos(e),i=Math.sin(e);t.set(d,n),t[n+5]=r,t[n+6]=i,t[n+9]=-i,t[n+10]=r},yRotation:function(e,t,n){var r=Math.cos(e),i=Math.sin(e);t.set(d,n),t[n]=r,t[n+2]=-i,t[n+8]=i,t[n+10]=r},zRotation:function(e,t,n){var r=Math.cos(e),i=Math.sin(e);t.set(d,n),t[n]=r,t[n+1]=i,t[n+4]=-i,t[n+5]=r},axisRotation:function(e,t,n,r,i){var o=e[t],a=e[t+1],s=e[t+2],c=Math.sqrt(o*o+a*a+s*s),u=(o/=c)*o,l=(a/=c)*a,f=(s/=c)*s,p=Math.cos(n),h=Math.sin(n),g=1-p;return r.set(d,i),r[i]=u+(1-u)*p,r[i+1]=o*a*g+s*h,r[i+2]=o*s*g-a*h,r[i+4]=o*a*g-s*h,r[i+5]=l+(1-l)*p,r[i+6]=a*s*g+o*h,r[i+8]=o*s*g+a*h,r[i+9]=a*s*g-o*h,r[i+10]=f+(1-f)*p,r},composeTRS:function(e,t,n,r,i,o,a,s){16===n.length?a.set(n,s):(a[s+3]=0,a[s+7]=0,a[s+11]=0,a[s+15]=0);var c=i[o],u=i[o+1],l=i[o+2];a[s+0]=n[r+0]*c,a[s+1]=n[r+1]*c,a[s+2]=n[r+2]*c,a[s+4]=n[r+4]*u,a[s+5]=n[r+5]*u,a[s+6]=n[r+6]*u,a[s+8]=n[r+8]*l,a[s+9]=n[r+9]*l,a[s+10]=n[r+10]*l,a[s+12]=e[t],a[s+13]=e[t+1],a[s+14]=e[t+2]},composeTQS:function(e,n,r,i,o,a,s,c){t.quatHelper.toMatrix4(r,i,_,0),t.m4Helper.composeTRS(e,n,_,0,o,a,s,c)},translate:function(e,t,n,r,i,o,a){var s=e[t+0],c=e[t+1],u=e[t+2],l=e[t+3],d=e[t+4+0],f=e[t+4+1],p=e[t+4+2],h=e[t+4+3],g=e[t+8+0],v=e[t+8+1],_=e[t+8+2],y=e[t+8+3],m=e[t+12+0],b=e[t+12+1],w=e[t+12+2],O=e[t+12+3];16===e.length?o.set(e,a):o===e&&a===t||(o[a]=s,o[a+1]=c,o[a+2]=u,o[a+3]=l,o[a+4]=d,o[a+5]=f,o[a+6]=p,o[a+7]=h,o[a+8]=g,o[a+9]=v,o[a+10]=_,o[a+11]=y),o[a+12]=s*n+d*r+g*i+m,o[a+13]=c*n+f*r+v*i+b,o[a+14]=u*n+p*r+_*i+w,o[a+15]=l*n+h*r+y*i+O},scale:function(e,t,n,r,i,o,a){o[a+0]=n*e[t+0+0],o[a+1]=n*e[t+0+1],o[a+2]=n*e[t+0+2],o[a+3]=n*e[t+0+3],o[a+4]=r*e[t+4+0],o[a+5]=r*e[t+4+1],o[a+6]=r*e[t+4+2],o[a+7]=r*e[t+4+3],o[a+8]=i*e[t+8+0],o[a+9]=i*e[t+8+1],o[a+10]=i*e[t+8+2],o[a+11]=i*e[t+8+3],o===e&&a===t||(o[a+12]=e[t+12],o[a+13]=e[t+13],o[a+14]=e[t+14],o[a+15]=e[t+15])},xRotate:function(e,t,n,r,i){16===e.length?r.set(e,i):r===e&&i===t||(r[i+0]=e[t+0],r[i+1]=e[t+1],r[i+2]=e[t+2],r[i+3]=e[t+3],r[i+12]=e[t+12],r[i+13]=e[t+13],r[i+14]=e[t+14],r[i+15]=e[t+15]);var o=e[t+4],a=e[t+5],s=e[t+6],c=e[t+7],u=e[t+8],l=e[t+9],d=e[t+10],f=e[t+11],p=Math.cos(n),h=Math.sin(n);r[i+4]=p*o+h*u,r[i+5]=p*a+h*l,r[i+6]=p*s+h*d,r[i+7]=p*c+h*f,r[i+8]=p*u-h*o,r[i+9]=p*l-h*a,r[i+10]=p*d-h*s,r[i+11]=p*f-h*c},yRotate:function(e,t,n,r,i){16===e.length?r.set(e,i):r===e&&i===t||(r[i+4]=e[t+4],r[i+5]=e[t+5],r[i+6]=e[t+6],r[i+7]=e[t+7],r[i+12]=e[t+12],r[i+13]=e[t+13],r[i+14]=e[t+14],r[i+15]=e[t+15]);var o=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],u=e[t+8+0],l=e[t+8+1],d=e[t+8+2],f=e[t+8+3],p=Math.cos(n),h=Math.sin(n);r[i+0]=p*o-h*u,r[i+1]=p*a-h*l,r[i+2]=p*s-h*d,r[i+3]=p*c-h*f,r[i+8]=p*u+h*o,r[i+9]=p*l+h*a,r[i+10]=p*d+h*s,r[i+11]=p*f+h*c},zRotate:function(e,t,n,r,i){16===e.length?r.set(e,i):r===e&&i===t||(r[i+8]=e[t+8],r[i+9]=e[t+9],r[i+10]=e[t+10],r[i+11]=e[t+11],r[i+12]=e[t+12],r[i+13]=e[t+13],r[i+14]=e[t+14],r[i+15]=e[t+15]);var o=e[t+0+0],a=e[t+0+1],s=e[t+0+2],c=e[t+0+3],u=e[t+4+0],l=e[t+4+1],d=e[t+4+2],f=e[t+4+3],p=Math.cos(n),h=Math.sin(n);r[i+0]=p*o+h*u,r[i+1]=p*a+h*l,r[i+2]=p*s+h*d,r[i+3]=p*c+h*f,r[i+4]=p*u-h*o,r[i+5]=p*l-h*a,r[i+6]=p*d-h*s,r[i+7]=p*f-h*c},axisRotate:function(e,t,n,r,i,o,a){var s=n[r],c=n[r+1],u=n[r+2],l=Math.sqrt(s*s+c*c+u*u),d=(s/=l)*s,f=(c/=l)*c,p=(u/=l)*u,h=Math.cos(i),g=Math.sin(i),v=1-h,_=d+(1-d)*h,y=s*c*v+u*g,m=s*u*v-c*g,b=s*c*v-u*g,w=f+(1-f)*h,O=c*u*v+s*g,E=s*u*v+c*g,S=c*u*v-s*g,T=p+(1-p)*h,I=e[t+0],A=e[t+1],C=e[t+2],k=e[t+3],x=e[t+4],P=e[t+5],D=e[t+6],R=e[t+7],j=e[t+8],N=e[t+9],M=e[t+10],L=e[t+11];o[a+0]=_*I+y*x+m*j,o[a+1]=_*A+y*P+m*N,o[a+2]=_*C+y*D+m*M,o[a+3]=_*k+y*R+m*L,o[a+4]=b*I+w*x+O*j,o[a+5]=b*A+w*P+O*N,o[a+6]=b*C+w*D+O*M,o[a+7]=b*k+w*R+O*L,o[a+8]=E*I+S*x+T*j,o[a+9]=E*A+S*P+T*N,o[a+10]=E*C+S*D+T*M,o[a+11]=E*k+S*R+T*L,o===e&&a===t||(o[a+12]=e[t+12],o[a+13]=e[t+13],o[a+14]=e[t+14],o[a+15]=e[t+15])},multiply:function(e,t,n,r,i,o){var a=n[r+0+0],s=n[r+0+1],c=n[r+0+2],u=n[r+0+3],l=n[r+4+0],d=n[r+4+1],f=n[r+4+2],p=n[r+4+3],h=n[r+8+0],g=n[r+8+1],v=n[r+8+2],_=n[r+8+3],y=n[r+12+0],m=n[r+12+1],b=n[r+12+2],w=n[r+12+3],O=e[t+0+0],E=e[t+0+1],S=e[t+0+2],T=e[t+0+3],I=e[t+4+0],A=e[t+4+1],C=e[t+4+2],k=e[t+4+3],x=e[t+8+0],P=e[t+8+1],D=e[t+8+2],R=e[t+8+3],j=e[t+12+0],N=e[t+12+1],M=e[t+12+2],L=e[t+12+3];i[o+0]=a*O+s*I+c*x+u*j,i[o+1]=a*E+s*A+c*P+u*N,i[o+2]=a*S+s*C+c*D+u*M,i[o+3]=a*T+s*k+c*R+u*L,i[o+4]=l*O+d*I+f*x+p*j,i[o+5]=l*E+d*A+f*P+p*N,i[o+6]=l*S+d*C+f*D+p*M,i[o+7]=l*T+d*k+f*R+p*L,i[o+8]=h*O+g*I+v*x+_*j,i[o+9]=h*E+g*A+v*P+_*N,i[o+10]=h*S+g*C+v*D+_*M,i[o+11]=h*T+g*k+v*R+_*L,i[o+12]=y*O+m*I+b*x+w*j,i[o+13]=y*E+m*A+b*P+w*N,i[o+14]=y*S+m*C+b*D+w*M,i[o+15]=y*T+m*k+b*R+w*L},transformVector:function(e,t,n,r,i,o){for(var a=0,s=0,c=0;c<4;++c){s=t+c,i[a=o+c]=0;for(var u=0;u<4;++u)i[a]+=n[r+u]*e[s+4*u]}},transformDirection:function(e,t,n,r,i,o){var a=n[r+0],s=n[r+1],c=n[r+2];i[o+0]=a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0],i[o+1]=a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1],i[o+2]=a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]},transformPoint:function(e,t,n,r,i,o){var a=n[r+0],s=n[r+1],c=n[r+2],u=a*e[t+0+3]+s*e[t+4+3]+c*e[t+8+3]+e[t+12+3];i[o+0]=(a*e[t+0+0]+s*e[t+4+0]+c*e[t+8+0]+e[t+12+0])/u,i[o+1]=(a*e[t+0+1]+s*e[t+4+1]+c*e[t+8+1]+e[t+12+1])/u,i[o+2]=(a*e[t+0+2]+s*e[t+4+2]+c*e[t+8+2]+e[t+12+2])/u},decomposeTransRotMatScale:function(e,n,r,i,o,a,l,f){r[i+0]=e[n+12],r[i+1]=e[n+13],r[i+2]=e[n+14];var p=e[n+0],h=e[n+1],g=e[n+2],v=e[n+4],_=e[n+5],y=e[n+6],m=e[n+8],b=e[n+9],w=e[n+10],O=l[f+0]=Math.sqrt(p*p+h*h+g*g),E=l[f+1]=Math.sqrt(v*v+_*_+y*y),S=l[f+2]=Math.sqrt(m*m+b*b+w*w);if(o.set(d,a),0===O||0===E||0===S)return!1;var T=s;T[0]=m/S,T[1]=b/S,T[2]=w/S;var I=c;I[0]=p/O,I[1]=h/O,I[2]=g/O;var A=u;t.v3Helper.cross(T,0,I,0,A,0);var C=I;return t.v3Helper.cross(A,0,T,0,C,0),o.set(C,a),o.set(A,a+4),o.set(T,a+8),o[a+0]*p+o[a+1]*h+o[a+2]*g<0&&(l[f+0]=-O),o[a+4]*v+o[a+5]*_+o[a+6]*y<0&&(l[f+1]=-E),o[a+8]*m+o[a+9]*b+o[a+10]*w<0&&(l[f+2]=-S),!0},inverse:function(e,t,n,r){var i=e[t+0+0],o=e[t+0+1],a=e[t+0+2],s=e[t+0+3],c=e[t+4+0],u=e[t+4+1],l=e[t+4+2],d=e[t+4+3],f=e[t+8+0],p=e[t+8+1],h=e[t+8+2],g=e[t+8+3],v=e[t+12+0],_=e[t+12+1],y=e[t+12+2],m=e[t+12+3],b=h*m,w=y*g,O=l*m,E=y*d,S=l*g,T=h*d,I=a*m,A=y*s,C=a*g,k=h*s,x=a*d,P=l*s,D=f*_,R=v*p,j=c*_,N=v*u,M=c*p,L=f*u,B=i*_,F=v*o,U=i*p,W=f*o,V=i*u,G=c*o,H=b*u+E*p+S*_-(w*u+O*p+T*_),z=w*o+I*p+k*_-(b*o+A*p+C*_),Y=O*o+A*u+x*_-(E*o+I*u+P*_),q=T*o+C*u+P*p-(S*o+k*u+x*p),K=1/(i*H+c*z+f*Y+v*q);n[r+0]=K*H,n[r+1]=K*z,n[r+2]=K*Y,n[r+3]=K*q,n[r+4]=K*(w*c+O*f+T*v-(b*c+E*f+S*v)),n[r+5]=K*(b*i+A*f+C*v-(w*i+I*f+k*v)),n[r+6]=K*(E*i+I*c+P*v-(O*i+A*c+x*v)),n[r+7]=K*(S*i+k*c+x*f-(T*i+C*c+P*f)),n[r+8]=K*(D*d+N*g+M*m-(R*d+j*g+L*m)),n[r+9]=K*(R*s+B*g+W*m-(D*s+F*g+U*m)),n[r+10]=K*(j*s+F*d+V*m-(N*s+B*d+G*m)),n[r+11]=K*(L*s+U*d+G*g-(M*s+W*d+V*g)),n[r+12]=K*(j*h+L*y+R*l-(M*y+D*l+N*h)),n[r+13]=K*(U*y+D*a+F*h-(B*h+W*y+R*a)),n[r+14]=K*(B*l+G*y+N*a-(V*y+j*a+F*l)),n[r+15]=K*(V*h+M*a+W*l-(U*l+G*h+L*a))},transpose:function(e,t,n,r){n[r+0]=e[t+0],n[r+1]=e[t+4],n[r+2]=e[t+8],n[r+3]=e[t+12],n[r+4]=e[t+1],n[r+5]=e[t+5],n[r+6]=e[t+9],n[r+7]=e[t+13],n[r+8]=e[t+2],n[r+9]=e[t+6],n[r+10]=e[t+10],n[r+11]=e[t+14],n[r+12]=e[t+3],n[r+13]=e[t+7],n[r+14]=e[t+11],n[r+15]=e[t+15]},composeRST3toRST4:function(e,t,n,r){n.set(d,r),n[r+0]=e[t+0],n[r+1]=e[t+1],n[r+4]=e[t+3],n[r+5]=e[t+4],n[r+10]=1,n[r+12]=e[t+6],n[r+13]=e[t+7],n[r+15]=e[t+8]},copy:function(e,t,n,r){if(16===e.length)n.set(e,r);else for(var i=0;i<16;i++)n[r+i]=e[t+i]}};var s=new Float32Array(3),c=new Float32Array(3),u=new Float32Array(3),l=new Float32Array(4),d=new Float32Array(16);d.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var f=new Float32Array(16).fill(0);f[11]=-1;var p=new Float32Array(16).fill(0);p[15]=1;var h=new Float32Array([0,0,-1]),g=new Float32Array([0,1,0]),v=new Float32Array([0,0,0]),_=new Float32Array(16),y=new Float32Array(16)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importDefault(n(22)),i=n(20),o=new Float32Array(9);o.set([1,0,0,0,1,0,0,0,1],0);var a=function(){function e(e,t){this._raw=e||new Float32Array(9),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(o),t},enumerable:!1,configurable:!0}),e.createFromArray=function(t){if(9!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){if(void 0===n&&(n=0),t.length-n<9)throw new Error("create Matrix Error:array length is wrong");return new e(t,n)},Object.defineProperty(e.prototype,"raw",{get:function(){return this.__raw||(this.__raw=new Float32Array(this._raw.buffer,4*this._offset,9)),this.__raw},enumerable:!1,configurable:!0}),e.prototype.toArray=function(){for(var e=new Array(9),t=0;t<9;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,n,r){return r=r||new e,i.m3Helper.translate(this._raw,this._offset,t,n,r._raw,r._offset),r},e.prototype.scale=function(t,n,r){return r=r||new e,i.m3Helper.scale(this._raw,this._offset,t,n,r._raw,r._offset),r},e.prototype.rotate=function(t,n){return n=n||new e,i.m3Helper.rotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.inverse=function(t){return t=t||new e,i.m3Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,n){return n=n||new e,i.m3Helper.multiply(this._raw,this._offset,t._raw,t._offset,n._raw,n._offset),n},e.prototype.transformPoint=function(e,t){return t=t||r.default.ZERO,i.m3Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=function(){function e(e,t){this._raw=e||new Float32Array(2),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n){var r=new Float32Array(2);return r[0]=t||0,r[1]=n||0,new e(r)},e.createFromArray=function(t){return 2!==t.length&&(t=new Array(2).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<2&&(t=new Float32Array(2).fill(0),n=0),new e(t,n)},e.prototype.toArray=function(){return[this._raw[this._offset],this._raw[this._offset+1]]},e.prototype.equal=function(e){return r.v2Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){if(2===e._raw.length)this._raw.set(e._raw,this._offset);else for(var t=0;t<2;t++)this._raw[this._offset+t]=e._raw[e._offset+t]},e.prototype.setValue=function(e,t){return this._raw[this._offset]=e,this._raw[this._offset+1]=t,this},e.prototype.add=function(t,n){return n=n||new e,r.v2Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,r.v2Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.normalize=function(t){return t=t||new e,r.v2Helper.normalize(this._raw,this._offset,o._raw,o._offset),t.set(o),t},e.prototype.scale=function(t,n){return n=n||new e,r.v2Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.lerp=function(t,n,i){return i=i||new e,r.v2Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),i.set(o),i},e.prototype.dot=function(e){return r.v2Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return r.v2Helper.length(this._raw,this._offset)},e.prototype.clone=function(){return e.createFromNumber(this._raw[this._offset+0],this._raw[this._offset+1])},e.prototype.isZero=function(){return r.v2Helper.isZero(this._raw,this._offset)},e.prototype.getAngle=function(){return r.v2Helper.getAngle(this._raw,this._offset)},e}();t.default=i;var o=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VertexLayoutNative=t.createdVertexLayout=void 0;var r=n(1),i=n(2),o=r.__importDefault(n(24)),a=0;var s={};s[i.EnumVertexFormat.BYTE4]=4,s[i.EnumVertexFormat.BYTE4N]=4,s[i.EnumVertexFormat.FLOAT]=4,s[i.EnumVertexFormat.FLOAT2]=8,s[i.EnumVertexFormat.FLOAT3]=12,s[i.EnumVertexFormat.FLOAT4]=16,s[i.EnumVertexFormat.SHORT2]=4,s[i.EnumVertexFormat.SHORT2N]=4,s[i.EnumVertexFormat.SHORT4]=8,s[i.EnumVertexFormat.SHORT4N]=8,s[i.EnumVertexFormat.UBYTE4]=4,s[i.EnumVertexFormat.UBYTE4N]=4,t.createdVertexLayout=[];var c=function(){function e(e,n){this._id=a++,this._gfx=n,this._config=e,this._calStride(),this._batcher=new o.default(this._gfx),t.createdVertexLayout.push(this)}return e.prototype._calStride=function(){for(var e=0,t=0,n=this._config.layout.attrs;t<n.length;t++){var r=n[t];e+=s[r.format]}this._stride=e},e.prototype._getBatcher=function(){return this._batcher},e}();t.VertexLayoutNative=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=2048e3,i=1228800,o=function(){function e(e){this._vbOffset=0,this._ibCount=0,this._iBase=0,this._inited=!1,this._gfx=e}return e.prototype.init=function(){var e={type:wgfx.EnumBufferType.VERTEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:r};this._vertexBuffer=this._gfx.makeBuffer(e);var t={type:wgfx.EnumBufferType.INDEXBUFFER,usage:wgfx.EnumUsage.DYNAMIC,size:i};this._indexBuffer=this._gfx.makeBuffer(t),this._vbView=new Uint8Array(r),this._ibView=new Uint16Array(614400),this._inited=!0},e.prototype.reset=function(){this._vbOffset=0,this._ibCount=0,this._iBase=0},e.prototype.batchMesh=function(e,t,n,r){void 0===r&&(r=t._dataView.length),this._inited||this.init(),this._vbView.set(e._finalBufferView,this._vbOffset),this._vbOffset+=e._finalBufferView.byteLength;for(var i=this._ibCount,o=t._dataView,a=this._iBase,s=n,c=r;s<c;s++)this._ibView[i+s]=a+o[s];this._iBase+=e._count,this._ibCount+=r},e.prototype.uploadBuffer=function(){this._inited&&(this._gfx.updateBuffer(this._vertexBuffer,0,this._vbView,0,this._vbOffset),this._gfx.updateBuffer(this._indexBuffer,0,this._ibView,0,2*this._ibCount))},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RectNative=void 0;var r=function(e,t,n,r){this._x=e,this._y=t,this._width=n,this._height=r};t.RectNative=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importDefault(n(15)),i=function(){function e(){this.bufferStack=[]}return e.prototype._setCommandExecutor=function(e){this._executor=e},e.prototype.decodeAndExecCommandBuffer=function(e){this.bufferStack.push(e);for(var t=0,n=e._array;t<n.length;t++){var i=n[t];if(i instanceof r.default){if(this.bufferStack.indexOf(i)>-1)return void console.warn("execute command buffer error: has infinite loop");this.decodeAndExecCommandBuffer(i)}else this.drawRenderDraw(i)}this.bufferStack.pop()},e.prototype.drawRenderDraw=function(e){this._executor.drawRenderDraw(e)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderViewNative=void 0;var r=function(e,t,n,r){this._pass=e,this._passAction=t,this._viewport=n,this._scissor=r,this._isDefaultView=0===this._pass.id};t.RenderViewNative=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableVertexBufferNative=void 0;var r=n(1).__importDefault(n(22)),i=function(){function e(e,t){if(this._count=e,e){var n=e*t._stride;this.data=new ArrayBuffer(n),this._finalBuffer=new ArrayBuffer(n),this._dataView=new Uint8Array(this.data),this._finalBufferView=new Uint8Array(this._finalBuffer),this._calPositionOffset(t)}else this.data=null}return e.prototype._cloneBuffer=function(){this._finalBufferView.set(this._dataView)},e.prototype._calPositionOffset=function(e){for(var t=0,n=e._config.layout.attrs;t<n.length;t++){var i=n[t];"a_position"==i.name&&(this._positionOffset=i.offset)}this._positionViews=[],this._worldPositionViews=[];for(var o=0;o<this._count;o++){var a=new r.default(new Float32Array(this.data,o*e._stride+this._positionOffset,2));this._positionViews.push(a);var s=new r.default(new Float32Array(this._finalBuffer,o*e._stride+this._positionOffset,2));this._worldPositionViews.push(s)}},e}();t.BatchableVertexBufferNative=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BatchableIndexBufferNative=void 0;var r=function(e,t){this._count=e,this._dataView=new Uint16Array(e),this.data=this._dataView.buffer};t.BatchableIndexBufferNative=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(5)),o=n(31),a=n(65),s=n(33),c=n(6),u=r.__importDefault(n(48)),l=r.__importDefault(n(49)),d=r.__importDefault(n(76)),f=r.__importDefault(n(77)),p=function(){function e(e,t){if(this.config=t,this.isEngineNative=t.isEngineNative,this.isPhysicsNative=t.isPhysicsNative,this.gaVersion=t.gaVersion,this.isEngineNative){this.worker=e;var n=new o.AccelerateManager(this.worker,t);this.manager=n,this.createEntity3D=n.createEntity3D.bind(n),this.createEntity2D=n.createEntity2D.bind(n),this._createCullableComponent=n.createCullableComponent.bind(n),this._createAnimatorComponent=n.createAnimatorComponent.bind(n),this._createSkinnedSkeletonComponent=n.createSkinnedSkeletonComponent.bind(n),this.createEntity2DGroup=n.createEntity2DGroup.bind(n),this.createEntity3DGroup=n.createEntity3DGroup.bind(n),this.createDataBuffer=n.createDataBuffer.bind(n),this.createDataModel=n.createDataModel.bind(n),this.createAnimationClipBinding=n.createAnimationClipBinding.bind(n),this.createAnimatorController=n.createAnimatorController.bind(n),this.createAnimatorControllerStateModel=n.createAnimatorControllerStateModel.bind(n),this.entityAddChild=n.entityAddChild.bind(n),this.entityAddChildAtIndex=n.entityAddChildAtIndex.bind(n),this.entityRemoveFromParent=n.entityRemoveFromParent.bind(n),this.entityDestroy=n.entityDestroy.bind(n),this.entityClear=n.entityClear.bind(n),this.entitySetActive=n.entitySetActive.bind(n),this.entitySetLocalMatrixDirty=n.entitySetLocalMatrixDirty.bind(n),this.entitiesSetLocalMatrixDirty=n.entitiesSetLocalMatrixDirty.bind(n),this.entitiesSetLocalMatrixDirtyById=n.entitiesSetLocalMatrixDirtyById.bind(n),this.entityGroupAddChild=n.entityGroupAddChild.bind(n),this.entityGroupAddChildAtIndex=n.entityGroupAddChildAtIndex.bind(n),this.entityGroupRemoveFromParent=n.entityGroupRemoveFromParent.bind(n),this.entityGroupDestroy=n.entityGroupDestroy.bind(n),this.entityGroupClear=n.entityGroupClear.bind(n),this.entityGroupSetActive=n.entityGroupSetActive.bind(n),this.entityGroupSetLocalMatrixDirty=n.entityGroupSetLocalMatrixDirty.bind(n),this.entityGroupSetLocalMatrixDirtyAll=n.entityGroupSetLocalMatrixDirtyAll.bind(n),this.componentBindEntity=n.componentBindEntity.bind(n),this.componentUnbindEntity=n.componentUnbindEntity.bind(n),this.setRootEntity=n.setRootEntity.bind(n),this.updateAnimator=n.updateAnimator.bind(n),this.updateAnimators=n.updateAnimators.bind(n),this.updateAnimatorControllers=n.updateAnimatorControllers.bind(n),this.updateSkinningMatrix=n.updateSkinningMatrix.bind(n),this.updateSkinningMatrices=n.updateSkinningMatrices.bind(n),this.bindEntitiesToBones=n.bindEntitiesToBones.bind(n),this.unbindEntitiesFromBones=n.unbindEntitiesFromBones.bind(n),this.bindEntitiesToBonesWithIndex=n.bindEntitiesToBonesWithIndex.bind(n),this.unbindEntitiesFromBonesWithIndex=n.unbindEntitiesFromBonesWithIndex.bind(n),this.refreshWorldTransform=n.refreshWorldTransform.bind(n),this.frameStart=n.frameStart.bind(n),this.cullWithCameraPerspective=n.cullWithCameraPerspective.bind(n),this.cullWithCameraOrthographic=n.cullWithCameraOrthographic.bind(n),this.worker.cullingResult&&(this.initCullingArrayBuffer=n.initCullingArrayBuffer.bind(n),this.cullWithCameraPerspectiveByArrayBuffer=n.cullWithCameraPerspectiveV2.bind(n),this.cullWithCameraOrthographicByArrayBuffer=n.cullWithCameraOrthographicV2.bind(n))}else{this.mockWorker=e;var r=this._getMockAccelerateWorker();this.createEntity3D=r.createEntity3D.bind(r),this.createEntity2D=r.createEntity2D.bind(r),this._createCullableComponent=r.createCullableComponent.bind(r),this._createAnimatorComponent=r.createAnimatorComponent.bind(r),this._createSkinnedSkeletonComponent=r.createSkinnedSkeletonComponent.bind(r),this.createEntity2DGroup=r.createEntity2DGroup.bind(r),this.createEntity3DGroup=r.createEntity3DGroup.bind(r),this.createDataModel=r.createDataModel.bind(r),this.createDataBuffer=r.createDataBuffer.bind(r),this.createAnimationClipBinding=r.createAnimationClipBinding.bind(r),this.createAnimatorController=r.createAnimatorController.bind(r),this.createAnimatorControllerStateModel=r.createAnimatorControllerStateModel.bind(r),this.entityAddChild=r.entityAddChild.bind(r),this.entityAddChildAtIndex=r.entityAddChildAtIndex.bind(r),this.entityRemoveFromParent=r.entityRemoveFromParent.bind(r),this.entityDestroy=r.entityDestroy.bind(r),this.entityClear=r.entityClear.bind(r),this.entitySetActive=r.entitySetActive.bind(r),this.entitySetLocalMatrixDirty=r.entitySetLocalMatrixDirty.bind(r),this.entitiesSetLocalMatrixDirty=r.entitiesSetLocalMatrixDirty.bind(r),this.entitiesSetLocalMatrixDirtyById=r.entitiesSetLocalMatrixDirtyById.bind(r),this.entityGroupAddChild=r.entityGroupAddChild.bind(r),this.entityGroupAddChildAtIndex=r.entityGroupAddChildAtIndex.bind(r),this.entityGroupRemoveFromParent=r.entityGroupRemoveFromParent.bind(r),this.entityGroupDestroy=r.entityGroupDestroy.bind(r),this.entityGroupClear=r.entityGroupClear.bind(r),this.entityGroupSetActive=r.entityGroupSetActive.bind(r),this.entityGroupSetLocalMatrixDirty=r.entityGroupSetLocalMatrixDirty.bind(r),this.entityGroupSetLocalMatrixDirtyAll=r.entityGroupSetLocalMatrixDirtyAll.bind(r),this.componentBindEntity=r.componentBindEntity.bind(r),this.componentUnbindEntity=r.componentUnbindEntity.bind(r),this.setRootEntity=r.setRootEntity.bind(r),this.cullWithCameraPerspective=r.cullWithCameraPerspective.bind(r),this.cullWithCameraOrthographic=r.cullWithCameraOrthographic.bind(r),this.updateAnimator=r.updateAnimator.bind(r),this.updateAnimators=r.updateAnimators.bind(r),this.updateAnimatorControllers=r.updateAnimatorControllers.bind(r),this.updateSkinningMatrix=r.updateSkinningMatrix.bind(r),this.updateSkinningMatrices=r.updateSkinningMatrices.bind(r),this.bindEntitiesToBones=r.bindEntitiesToBones.bind(r),this.unbindEntitiesFromBones=r.unbindEntitiesFromBones.bind(r),this.bindEntitiesToBonesWithIndex=r.bindEntitiesToBonesWithIndex.bind(r),this.unbindEntitiesFromBonesWithIndex=r.unbindEntitiesFromBonesWithIndex.bind(r),this.refreshWorldTransform=r.refreshWorldTransform.bind(r),this.frameStart=r.frameStart.bind(r)}if(this.isPhysicsNative){(i=NativeGlobal.Phys3D)&&(this.phys3D=new d.default(i,this,this.isEngineNative))}else{var i=void 0;try{i=f.default().Phys3D}catch(e){}i&&(this.phys3D=new d.default(i,this,this.isEngineNative))}}return e.prototype.createComponent=function(e){if(!s.componentType2Ctor[e])return console.warn("can not support dataModel ["+e+"]"),null;switch(e){case c.enumComponentType.Cullable:return this._createCullableComponent();case c.enumComponentType.Animator:return this._createAnimatorComponent();case c.enumComponentType.SkinnedSkeleton:return this._createSkinnedSkeletonComponent()}return null},e.prototype.composeRawBufferEntity2D=function(e,t,n){var r=new ArrayBuffer(4*u.default.ENTITY2D_SIZE),i=new Float32Array(r);return i[u.default.OFFSET_ROTATION]=e,i[u.default.OFFSET_POSITION]=t[0],i[u.default.OFFSET_POSITION+1]=t[1],i[u.default.OFFSET_SCALE]=n[0],i[u.default.OFFSET_SCALE+1]=n[1],i},e.prototype.composeRawBufferEntity3D=function(e,t,n,r){var i=new ArrayBuffer(4*(l.default.ENTITY3D_SIZE-16)),o=new Uint32Array(i),a=new Float32Array(i);return o[l.default.OFFSET_ROTATIONTYPE]=e?0:1,a.set(t,l.default.OFFSET_ROTATION),a.set(n,l.default.OFFSET_POSITION),a.set(r,l.default.OFFSET_SCALE),a},e.prototype.composeRawBufferEntity3DWhole=function(e,t,n,r){var i=new ArrayBuffer(4*l.default.ENTITY3D_SIZE),o=new Uint32Array(i),a=new Float32Array(i);return o[l.default.OFFSET_ROTATIONTYPE]=e?0:1,a.set(t,l.default.OFFSET_ROTATION),a.set(n,l.default.OFFSET_POSITION),a.set(r,l.default.OFFSET_SCALE),a},e.prototype.composeRawBufferEntity2DGroup=function(e){for(var t=new ArrayBuffer(4*u.default.ENTITY2D_SIZE*e.length),n=new Float32Array(t),r=0;r<e.length;r++){var i=e[r];n[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_ROTATION]=i.rotation,n[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_POSITION]=i.position[0],n[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_POSITION+1]=i.position[1],n[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_SCALE]=i.scale[0],n[r*u.default.ENTITY2D_SIZE+u.default.OFFSET_SCALE+1]=i.scale[1]}return n},e.prototype.composeRawBufferEntity3DGroup=function(e){for(var t=new ArrayBuffer(4*l.default.ENTITY3D_SIZE*e.length),n=new Uint32Array(t),r=new Float32Array(t),i=0;i<e.length;i++){var o=e[i];n[l.default.OFFSET_ROTATIONTYPE]=o.useEuler?0:1,r.set(o.rotation,i*l.default.ENTITY3D_SIZE+l.default.OFFSET_ROTATION),r.set(o.position,i*l.default.ENTITY3D_SIZE+l.default.OFFSET_POSITION),r.set(o.scale,i*l.default.ENTITY3D_SIZE+l.default.OFFSET_SCALE)}return r},e.prototype.getAccObjNumber=function(){return{entity2D:this.manager.poolManager._entity2DPoolUsedLength}},e.prototype._getMockAccelerateWorker=function(){return this.logicManager||(this.mockWorker||(this.mockWorker=new i.default),this.logicManager=new a.LogicManager(this.mockWorker,this.config)),this.logicManager},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccelerateManager=void 0;var r=n(1),i=n(32),o=n(33),a=r.__importStar(n(35)),s=r.__importStar(n(34)),c=r.__importDefault(n(37)),u=r.__importStar(n(47)),l=n(39),d=n(6),f=r.__importStar(n(48)),p=r.__importStar(n(49)),h=n(50),g=r.__importDefault(n(51)),v=r.__importDefault(n(52)),_=r.__importStar(n(53)),y=r.__importStar(n(55)),m=r.__importDefault(n(56)),b=r.__importDefault(n(57)),w=r.__importDefault(n(58)),O=n(60),E=n(62),S=r.__importDefault(n(63)),T=n(64),I=function(){function e(e,t){this.worker=e,this.config=t,this.poolManager=new w.default(this.worker),this.dirtyEntitiesCommand=new y.default(this.worker.dirtyEntities),this.entityCommand=new _.default(e.entityCommands),this.animatorCommand=new m.default,this.animatorControllerCommand=new S.default,this.skinningMatrixCommand=new b.default,f.staticInitEntity2D(this),p.staticInitEntity3D(this),h.staticInitEntityGroup(this),s.staticInitAnimatorComponent(this),a.staticInitCullableComponent(this),i.staticInitNativeObject(this.worker),O.staticInitAnimatorController(this),T.staticInitAnimationClipBinding(this),E.staticInitAnimatorControllerLayerBlend(this.worker),l.staticInitAccelerateModel(this.worker),u.staticInitAccelerateDataBuffer(this.worker),_.staticInitAccelerateEntityCommand(this.worker),y.staticInitAccelerateDirtiesCommand(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new p.default(e,this.poolManager.entity3DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new f.default(e,this.poolManager.entity2DPools);return t.isUsing=!0,this.entitySetActive(t,!0),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity2D,e);return new g.default(t,e)},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(d.enumEntityType.Entity3D,e);return new v.default(t,e)},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new a.default(e,this.poolManager.cullableComponentPools);return t.isUsing=!0,t.setActive(!0),t},e.prototype.createCullableComponentSingle=function(){var e=this.poolManager.getCullableComponentSingle(),t=new a.default(e,this.poolManager.cullableComponentPools);return t.setActive(!0),t},e.prototype.createAnimatorComponent=function(){return new s.default},e.prototype.createSkinnedSkeletonComponent=function(){return new c.default},e.prototype.createDataModel=function(e){var t=o.dataModel2Ctor[e];return t?new t:(console.warn("can not support dataModel ["+e+"]"),null)},e.prototype.createDataBuffer=function(e){var t=this.worker.createDataBuffer(e);return new u.default(t)},e.prototype.createAnimationClipBinding=function(e,t,n,r,i,o,a,s){return new T.AnimationClipBinding(e,t,n,r,i,o,a,s)},e.prototype.createAnimatorControllerStateModel=function(e){return new E.AnimatorControllerState(e)},e.prototype.createAnimatorController=function(e){return new O.AnimatorController(e)},e.prototype.entityAddChild=function(e,t){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityAddChildAtIndex=function(e,t,n){this.entityCommand.addChildAtIndex(e.id,t.id,n)},e.prototype.entityRemoveFromParent=function(e){this.entityCommand.removeFromParent(e.id)},e.prototype.entityDestroy=function(e){this.entityCommand.removeFromParent(e.id),e instanceof f.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){this.entityCommand.disperseSubTree(e.id)},e.prototype.entitySetActive=function(e,t){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entitySetLocalMatrixDirty=function(e){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntities(e,t)},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){this.dirtyEntitiesCommand.addDirtyEntitiesById(e,t)},e.prototype.componentBindEntity=function(e,t){e.bindEntityNative(t)},e.prototype.componentUnbindEntity=function(e){this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){this.entityCommand.setRootEntity(e.id)},e.prototype.entityGroupAddChild=function(e,t,n,r){this.entityCommand.addChild(e.id,t.id)},e.prototype.entityGroupAddChildAtIndex=function(e,t,n,r,i){this.entityCommand.addChildAtIndex(e.id,t.id,n)},e.prototype.entityGroupRemoveFromParent=function(e,t){this.entityCommand.removeFromParent(e.id)},e.prototype.entityGroupDestroy=function(e,t){this.entityCommand.removeFromParent(e.id),e instanceof f.default?this.poolManager.disposeEntity2D(e):e instanceof p.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){this.entityCommand.disperseSubTree(e.id)},e.prototype.entityGroupSetActive=function(e,t,n){t?this.entityCommand.entityCommandActive(e.id):this.entityCommand.entityCommandInActive(e.id)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){this.dirtyEntitiesCommand.addDirtyEntity(e)},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){this.dirtyEntitiesCommand.addDirtyEntityGroupAll(e)},e.prototype.componentBindEntityGroup=function(e,t,n,r){e.bindEntityNative(t)},e.prototype.componentUnbindEntityGroup=function(e,t){e.unbindEntityNative(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){this.entityCommand.setRootEntity(e.id)},e.prototype.componentUnbindEntitySingle=function(e){e.unbindEntityNative(),this.poolManager.disposeCullableComponentSingle(e)},e.prototype.refreshWorldTransform=function(){this.worker.refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p){var h=this.worker.frustumCulling(e,t,n,r,i,o,a,s,c,u,l,d,f,p);return h?{hash:h.hash,objects:new Uint32Array(h.objects),distances:new Float32Array(h.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g){var v=this.worker.orthoCulling(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g);return v?{hash:v.hash,objects:new Uint32Array(v.objects),distances:new Float32Array(v.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.initCullingArrayBuffer=function(){var e=this.worker.cullingResult;return{u32View:new Uint32Array(e),f32View:new Float32Array(e)}},e.prototype.cullWithCameraPerspectiveV2=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p){return!!this.worker.frustumCullingV2(e,t,n,r,i,o,a,s,c,u,l,d,f,p)},e.prototype.cullWithCameraOrthographicV2=function(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g){return!!this.worker.orthoCullingV2(e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g)},e.prototype.updateAnimator=function(e){this.worker.updateAnimator(e.id)},e.prototype.updateAnimators=function(e,t){this.animatorCommand.updateAnimators(e,t),this.worker.updateAnimators(this.animatorCommand.buffer)},e.prototype.updateAnimatorControllers=function(e,t){this.animatorControllerCommand.updateAnimatorControllers(e,t),this.worker.updateAnimatorControllers(this.animatorControllerCommand.buffer)},e.prototype.updateSkinningMatrix=function(e){this.worker.updateSkinningMatrix(e.id)},e.prototype.updateSkinningMatrices=function(e,t){this.skinningMatrixCommand.updateSkinningMatrices(e,t),this.worker.updateSkinningMatrices(this.skinningMatrixCommand.buffer)},e.prototype.bindEntitiesToBones=function(e,t){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){this.entityCommand.unBindFromBones(e)},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,n,r){this.entityCommand.bindToBones(e,t)},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){this.entityCommand.unBindFromBones(e)},e.prototype.frameStart=function(){this.worker.frameStart()},e.prototype.setEntityName=function(e,t){this.worker.setEntityName(e,t)},e}();t.AccelerateManager=I},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitNativeObject=void 0,t.staticInitNativeObject=function(e){r=e};var i=function(){function e(){}return e.prototype._init=function(e){this._fastInit(e),this._initU32View()},e.prototype._fastInit=function(e){this._nativeObj=e;var t=e.id,n=e.buffer,r=n.byteLength;this._id=t,this._bufferLength=r,this._byteOffset=0,this._buffer=n,this._f32view=new Float32Array(n,0,r/4),this.id=this._id},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._createNativeComponent=function(e,t,n){var i=r.createComponent(e,t,n);return i.id<0||!i.buffer?null:(this._init(i),i)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataModel2CtorMock=t.dataModel2Ctor=t.componentType2Ctor=void 0;var r=n(1),i=r.__importDefault(n(34)),o=r.__importDefault(n(35)),a=r.__importDefault(n(37)),s=n(6),c=r.__importDefault(n(38)),u=r.__importDefault(n(40)),l=r.__importDefault(n(41)),d=r.__importDefault(n(43));t.componentType2Ctor={},t.componentType2Ctor[s.enumComponentType.Undefined]=null,t.componentType2Ctor[s.enumComponentType.Cullable]=o.default,t.componentType2Ctor[s.enumComponentType.SkinnedSkeleton]=a.default,t.componentType2Ctor[s.enumComponentType.Animator]=i.default,t.dataModel2Ctor={},t.dataModel2Ctor[s.enumModelType.SkeletonBoneInverseModel]=u.default,t.dataModel2Ctor[s.enumModelType.AnimationClipModel]=c.default,t.dataModel2CtorMock={},t.dataModel2CtorMock[s.enumModelType.SkeletonBoneInverseModel]=d.default,t.dataModel2CtorMock[s.enumModelType.AnimationClipModel]=l.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAnimatorComponent=void 0;var r=n(1),i=r.__importDefault(n(32)),o=n(6),a=!1,s=!1;t.staticInitAnimatorComponent=function(e){var t=e.config.gaVersion.versionNumber;a=t>=120,s=t<120};var c=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t}return r.__extends(t,e),t.prototype.bindAnimations=function(e,t,n){this._animationClipCount=e.length;var r=t.length;for(var i in t)r+=t[i].length;if(this._nodeCount=r,this._createNativeComponent(o.enumComponentType.Animator,e.length,r),this._nativeObj){for(i=0;i<e.length;i++)this._u32view[3*i]=e[i].id;this._offsetEntityIds=3*e.length;var a,c=0;for(i=0;i<t.length;i++){for(var u=0;u<t[i].length;u++)null!=t[i][u]?(this._u32view[this._offsetEntityIds+c+u]=t[i][u].id,a||(a=t[i][u].id)):this._u32view[this._offsetEntityIds+c+u]=4294967295,this._u32view[this._offsetEntityIds+c+u]=null!=t[i][u]?t[i][u].id:4294967295;c+=t[i].length}s&&4294967295===this._u32view[this._offsetEntityIds]&&(null!=n&&n.id?this._u32view[this._offsetEntityIds]=n.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,n){if(this._nativeObj){var r=3*e;a?this._f32view[r+1]=t:this._u32view[r+1]=Math.round(t),this._f32view[r+2]=n}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParamater=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(i.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitCullableComponent=void 0;var r,i=n(1),o=n(6),a=i.__importDefault(n(36));t.staticInitCullableComponent=function(e){r=e};var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.entityOffset=r._poolIndex*o.CULLABLECOMPONENT_SIZE,r._activeOffset=r.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_ACTIVE,r._cullmaskOffset=r.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_CULLMASK,r._boundingBallCenterOffset=r.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_CENTER,r._boundingBallRadiusOffset=r.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_BOUDINGBALL_RADIUS,r._entityIdOffset=r.entityOffset+o.CULLABLECOMPONENT_OFFSET.OFFSET_ENTITYID,r}return i.__extends(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},t.prototype.getCullMask=function(){return this._nativePool._u32view[this._cullmaskOffset]},t.prototype.setCullMask=function(e){this._nativePool._u32view[this._cullmaskOffset]=e},t.prototype.bindEntityNative=function(e){this._nativePool._u32view[this._entityIdOffset]=e.id},t.prototype.unbindEntityNative=function(){this._nativePool._u32view[this._entityIdOffset]=0},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},Object.defineProperty(t.prototype,"active",{get:function(){return 0!=(this._nativePool._u32view[this._activeOffset]&o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE)},set:function(e){e?this._nativePool._u32view[this._activeOffset]|=o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE:this._nativePool._u32view[this._activeOffset]&=~o.CULLABLECOMPONENT_OFFSET.DF_ACTIVE},enumerable:!1,configurable:!0}),t.prototype.bindEntity=function(e){r.componentBindEntity(this,e)},t.prototype.unbindEntity=function(){r.componentUnbindEntity(this)},t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=function(){function e(e,t){this._nativeId=e,this._poolId=e&r.POOLID_AND,this._poolIndex=e&r.POOLINDEX_AND,this._nativePool=t[this._poolId],this.float32View=this._nativePool._f32view,this.uint32View=this._nativePool._u32view,this.id=this._nativeId,this.poolId=this._poolId,this.poolIndex=this._poolIndex}return e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(32)),o=n(6),a=function(e){function t(){var t=e.call(this)||this;return t._boneNum=0,t}return r.__extends(t,e),t.prototype.setBoneMatrix=function(e,t,n,r){if(n.length===t&&r.length===t){if(this._boneNum=t,this._createNativeComponent(o.enumComponentType.SkinnedSkeleton,t),this._nativeObj){for(var i=[],a=0;a<t;a++)i.push(r[a].id);this._u32view[0]=e.id,this._u32view.set(n,1);var s=1+t;this._u32view.set(i,s),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(1+2*t),16*t)}}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(i.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(39)),o=n(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.setAnimationClip=function(e){this._createNativeModel(o.enumModelType.AnimationClipModel,e)},t}(i.default);t.default=a},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateModel=void 0,t.staticInitAccelerateModel=function(e){r=e};var i=function(){function e(){}return e.prototype._createNativeModel=function(e,t){var n=r.createDataModel(e,t);this._nativeObj=n,this._id=n?n.id:0,this.id=this._id},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(39)),o=n(6),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e),this._createNativeModel(o.enumModelType.SkeletonBoneInverseModel,t.buffer)},t}(i.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42),i=function(){function e(e){this.contentoffset=0,this.frameRate=0,this.frameLength=0,this.totalSampleGroup=0,this.nodes={},this.nodesLength=0,this._id=e,this.id=this._id}return e.prototype.setAnimationClip=function(e){this._f32View=new Float32Array(e),this._u32View=new Uint32Array(e),this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3],this.nodes={},this._initAnimationClipNodes(),this.nodesLength=Object.keys(this.nodes).length},e.prototype._initAnimationClipNodes=function(){if(this._f32View&&this._u32View){this.contentoffset=this._u32View[0],this.frameRate=this._f32View[1],this.frameLength=this._u32View[2],this.totalSampleGroup=this._u32View[3];for(var e=0,t=0;t<this.totalSampleGroup;t++){for(var n=this._u32View[4+3*t+0],i=this._u32View[4+3*t+1],o=this._u32View[4+3*t+2],a=this.nodes[n]||new r.TransformCurve(this.frameRate,this.frameLength,r.CurveMode.Hermite),s=0;s<o;s++){var c=this._u32View[4+3*this.totalSampleGroup+4*e+0],u=this._f32View[4+3*this.totalSampleGroup+4*e+1],l=this._f32View[4+3*this.totalSampleGroup+4*e+2],d=this._f32View[4+3*this.totalSampleGroup+4*e+3];c>=this.frameLength&&console.error("Index out of range: ",c,this.frameLength),e++,a.addKeyFrame({index:c,value:u,inTangent:l,outTangent:d},i)}this.nodes[n]=a}this.nodesLength=Object.keys(this.nodes).length}},e.prototype.evaluate=function(e){for(;e>this.frameLength-1;)e-=this.frameLength-1;var t=e,n=Object.create(null);for(var r in this.nodes)n[r]=this.nodes[r].evaluate(t);return n},e}();t.default=i},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TransformCurve=t.TransformCurveRotationMode=t.TransformCurveType=t.Curve=t.CurveMode=void 0,function(e){e[e.Hermite=0]="Hermite"}(r=t.CurveMode||(t.CurveMode={}));var i,o,a=function(){function e(e,t,n,i){void 0===i&&(i=r.Hermite),this.keyFrames=e,this.fps=t,this.frameCount=n,this.mode=i}return e.prototype.evaluate=function(e,t){return void 0===t&&(t=!1),this.mode===r.Hermite?this._evaluate(e,t):null},Object.defineProperty(e.prototype,"keyCount",{get:function(){return this.keyFrames.length},enumerable:!1,configurable:!0}),e.prototype.addKeyFraem=function(e){var t=this._findKeyIndex(e.index);this.keyFrames.splice(t,0,e)},e.prototype._evaluate=function(e,t){if(!this.keyFrames.length)return null;var n=this._findKeyIndex(e);if(this.keyFrames[n]&&this.keyFrames[n].index===e)return this.keyFrames[n].value;if(0===n||n===this.keyFrames.length){if(t){if(this.mode===r.Hermite){var i=this.keyFrames[this.keyFrames.length-1],o=this.keyFrames[0],a=(this.frameCount-1-i.index+e)/this.fps;return(2*(u=(c=(s=(0===n?e-i.index+e:e-o.index)/(o.index-i.index))*s)*s)-3*c+1)*i.value+(u-2*c+s)*a*i.outTangent+(-2*u+3*c)*o.value+(u-c)*a*o.inTangent}return null}return this.mode===r.Hermite?this.keyFrames[0===n?0:this.keyFrames.length-1].value:null}if(this.mode===r.Hermite){i=this.keyFrames[n-1],a=((o=this.keyFrames[n]).index-i.index)/this.fps;var s,c,u=(c=(s=(e-i.index)/(o.index-i.index))*s)*s;return Number.isFinite(i.outTangent)&&Number.isFinite(o.inTangent)?(2*u-3*c+1)*i.value+(u-2*c+s)*a*i.outTangent+(-2*u+3*c)*o.value+(u-c)*a*o.inTangent:i.value}return null},e.prototype._findKeyIndex=function(e){for(var t=0,n=this.keyFrames.length,r=Math.floor((t+n)/2);t<n;)r=Math.floor((t+n)/2),this.keyFrames[r].index>=e?n=r:t=r+1;return t},e}();t.Curve=a,function(e){e[e.TranslateX=1]="TranslateX",e[e.TranslateY=2]="TranslateY",e[e.TranslateZ=3]="TranslateZ",e[e.ScaleX=4]="ScaleX",e[e.ScaleY=5]="ScaleY",e[e.ScaleZ=6]="ScaleZ",e[e.QuaternionX=7]="QuaternionX",e[e.QuaternionY=8]="QuaternionY",e[e.QuaternionZ=9]="QuaternionZ",e[e.QuaternionW=10]="QuaternionW",e[e.EulerX=11]="EulerX",e[e.EulerY=12]="EulerY",e[e.EulerZ=13]="EulerZ"}(i=t.TransformCurveType||(t.TransformCurveType={})),function(e){e[e.None=0]="None",e[e.Euler=1]="Euler",e[e.Quaternion=2]="Quaternion"}(o=t.TransformCurveRotationMode||(t.TransformCurveRotationMode={}));var s=function(){function e(e,t,n){void 0===n&&(n=r.Hermite),this.fps=e,this.frameLength=t,this.mode=n,this._rotationMode=o.None,this._translateX=new a([],e,t,n),this._translateY=new a([],e,t,n),this._translateZ=new a([],e,t,n),this._scaleX=new a([],e,t,n),this._scaleY=new a([],e,t,n),this._scaleZ=new a([],e,t,n),this._rotationX=new a([],e,t,n),this._rotationY=new a([],e,t,n),this._rotationZ=new a([],e,t,n),this._rotationW=new a([],e,t,n)}return Object.defineProperty(e.prototype,"rotationMode",{get:function(){return this._rotationMode},enumerable:!1,configurable:!0}),e.prototype.addKeyFrame=function(e,t){switch(t){case i.TranslateX:this._translateX.addKeyFraem(e);break;case i.TranslateY:this._translateY.addKeyFraem(e);break;case i.TranslateZ:this._translateZ.addKeyFraem(e);break;case i.ScaleX:this._scaleX.addKeyFraem(e);break;case i.ScaleY:this._scaleY.addKeyFraem(e);break;case i.ScaleZ:this._scaleZ.addKeyFraem(e);break;case i.QuaternionX:case i.EulerX:this._rotationX.addKeyFraem(e);break;case i.QuaternionY:case i.EulerY:this._rotationY.addKeyFraem(e);break;case i.QuaternionZ:case i.EulerZ:this._rotationZ.addKeyFraem(e);break;case i.QuaternionW:this._rotationW.addKeyFraem(e)}},e.prototype.evaluate=function(e){var t=Object.create(null);if(t.tx=this._translateX.evaluate(e),t.ty=this._translateY.evaluate(e),t.tz=this._translateZ.evaluate(e),t.sx=this._scaleX.evaluate(e),t.sy=this._scaleY.evaluate(e),t.sz=this._scaleZ.evaluate(e),t.rx=this._rotationX.evaluate(e),t.ry=this._rotationY.evaluate(e),t.rz=this._rotationZ.evaluate(e),t.rw=this._rotationW.evaluate(e),t.rw)if(null===t.rx||null===t.ry||null===t.rz)t.rx=t.ry=t.rz=t.rw=null,t.use_quaternion=!1;else{var n=Math.sqrt(t.rx*t.rx+t.ry*t.ry+t.rz*t.rz+t.rw*t.rw);t.rx/=n,t.ry/=n,t.rz/=n,t.rw/=n,t.use_quaternion=!0}else t.use_quaternion=!1;return t},e.TransformCurveRotationMode=o,e.TransformCurveType=i,e}();t.TransformCurve=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importDefault(n(44)),i=function(){function e(e){this.boneNum=0,this.inverseMatrixs=[],this._id=e,this.id=this._id}return e.prototype.setBoneInverseMatrix=function(e){var t=new Float32Array(e.length);t.set(e);var n=t.buffer;this.inverseMatrixs=[];for(var i=this.boneNum=n.byteLength/64,o=0;o<i;o++)this.inverseMatrixs.push(r.default.createFromTypedArray(new Float32Array(n,64*o,16)))},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(20),o=r.__importDefault(n(45)),a=r.__importDefault(n(46)),s=new Float32Array(16);s.set([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0);var c=function(){function e(e,t){this._raw=e||new Float32Array(16),this._offset=t||0}return Object.defineProperty(e,"IDENTITY",{get:function(){var t=new e;return t._raw.set(s),t},enumerable:!1,configurable:!0}),e.lookAt=function(t,n,r,o){return o=o||new e,i.m4Helper.lookAt(t._raw,t._offset,n._raw,n._offset,r._raw,r._offset,o._raw,o._offset),o},e.perspective=function(t,n,r,o,a){return a=a||new e,i.m4Helper.perspective(t,n,r,o,a._raw,a._offset),a},e.orthographic=function(t,n,r,o,a,s,c){return c=c||new e,i.m4Helper.orthographic(t,n,r,o,a,s,c._raw,c._offset),c},e.fromQuaternion=function(t,n){return n=n||new e,i.quatHelper.toMatrix4(t._raw,t._offset,n._raw,n._offset),n},e.createFromArray=function(t){if(16!==t.length)throw new Error("create Matrix Error:array length is wrong");return new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){if(void 0===n&&(n=0),t.length-n<16)throw new Error("create Matrix Error:array length is wrong");return new e(t,n)},e.createRotationX=function(t,n){return n=n||new e,i.m4Helper.xRotation(t,n._raw,n._offset),n},e.createRotationY=function(t,n){return n=n||new e,i.m4Helper.yRotation(t,n._raw,n._offset),n},e.createRotationZ=function(t,n){return n=n||new e,i.m4Helper.zRotation(t,n._raw,n._offset),n},e.createRotationAxis=function(t,n,r){return r=r||new e,i.m4Helper.axisRotation(t._raw,t._offset,n,r._raw,r._offset),r},e.composeTRS=function(t,n,r,o){return o=o||new e,i.m4Helper.composeTRS(t._raw,t._offset,n._raw,n._offset,r._raw,r._offset,o._raw,o._offset),o},e.composeTQS=function(t,n,r,i){return i=e.fromQuaternion(n,i),e.composeTRS(t,i,r,i),i},e.composeFromRST3=function(t,n){return n=n||new e,i.m4Helper.composeRST3toRST4(t._raw,t._offset,n._raw,n._offset),n},e.prototype.toArray=function(){for(var e=new Array(16),t=0;t<16;t++)e[t]=this._raw[this._offset+t];return e},e.prototype.translate=function(t,n,r,o){return o=o||new e,i.m4Helper.translate(this._raw,this._offset,t,n,r,o._raw,o._offset),o},e.prototype.scale=function(t,n,r,o){return o=o||new e,i.m4Helper.scale(this._raw,this._offset,t,n,r,o._raw,o._offset),o},e.prototype.xRotate=function(t,n){return n=n||new e,i.m4Helper.xRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.yRotate=function(t,n){return n=n||new e,i.m4Helper.yRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.zRotate=function(t,n){return n=n||new e,i.m4Helper.zRotate(this._raw,this._offset,t,n._raw,n._offset),n},e.prototype.axisRotate=function(t,n,r){return r=r||new e,i.m4Helper.axisRotate(this._raw,this._offset,t._raw,t._offset,n,r._raw,r._offset),r},e.prototype.rotateByQuaternion=function(t,n){n=n||new e;var r=u;return e.fromQuaternion(t,r),this.multiply(r,n),n},e.prototype.inverse=function(t){return t=t||new e,i.m4Helper.inverse(this._raw,this._offset,t._raw,t._offset),t},e.prototype.transpose=function(t){return t=t||new e,i.m4Helper.transpose(this._raw,this._offset,t._raw,t._offset),t},e.prototype.multiply=function(t,n){return n=n||new e,i.m4Helper.multiply(this._raw,this._offset,t._raw,t._offset,n._raw,n._offset),n},e.prototype.transformVector=function(e,t){return t=t||new a.default,i.m4Helper.transformVector(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformDirection=function(e,t){return t=t||o.default.ZERO,i.m4Helper.transformDirection(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.transformPoint=function(e,t){return t=t||o.default.ZERO,i.m4Helper.transformPoint(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset),t},e.prototype.set=function(e){return i.m4Helper.copy(e._raw,e._offset,this._raw,this._offset),this},e.prototype.clone=function(){var t=new e;return i.m4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.decomposeTransRotMatScale=function(e,t,n){return i.m4Helper.decomposeTransRotMatScale(this._raw,this._offset,e._raw,e._offset,t._raw,t._offset,n._raw,n._offset)},e.prototype.setValue=function(e,t,n){return this._raw[this._offset+4*t+n]=e,this},e.prototype.getValue=function(e,t){return this._raw[this._offset+4*e+t]},e.prototype.setColumn=function(e,t){var n=this._offset+4*t;return this._raw[n]=e.x,this._raw[n+1]=e.y,this._raw[n+2]=e.z,this._raw[n+3]=e.w,this},e.prototype.getColumn=function(e,t){t=t||new a.default;var n=this._offset+4*e;return t.setValue(this._raw[n],this._raw[n+1],this._raw[n+2],this._raw[n+3]),t},e.prototype.setRow=function(e,t){var n=this._offset+t;return this._raw[n]=e.x,this._raw[n+4]=e.y,this._raw[n+8]=e.z,this._raw[n+12]=e.w,this},e.prototype.getRow=function(e,t){t=t||new a.default;var n=this._offset+e;return t.setValue(this._raw[n],this._raw[n+4],this._raw[n+8],this._raw[n+12]),t},e}();t.default=c;var u=new c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=function(){function e(e,t){this._raw=e||new Float32Array(3),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){return new e(new Float32Array([0,0,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ONE",{get:function(){return new e(new Float32Array([1,1,1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Up",{get:function(){return new e(new Float32Array([0,1,0]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardRH",{get:function(){return new e(new Float32Array([0,0,-1]))},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ForwardLH",{get:function(){return new e(new Float32Array([0,0,1]))},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n,r){var i=new Float32Array(3);return i[0]=t,i[1]=n,i[2]=r,new e(i)},e.createFromArray=function(t){return 3!==t.length&&(t=new Array(3).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<3&&(t=new Float32Array(3).fill(0),n=0),new e(t,n)},e.transformQuat=function(t,n,i){return i=i||e.ZERO,r.quatHelper.transformDirection(n._raw,n._offset,t._raw,t._offset,o._raw,o._offset),i.set(o),i},e.transformCoordinate=function(e,t,n){return n=t.transformPoint(e,n)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset],e[this._offset+1],e[this._offset+2]]},e.prototype.equal=function(e){return r.v3Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){r.v3Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n){var r=this._raw;return r[this._offset]=e,r[this._offset+1]=t,r[this._offset+2]=n,this},e.prototype.add=function(t,n){return n=n||new e,r.v3Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,r.v3Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.cross=function(t,n){return n=n||new e,r.v3Helper.cross(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.normalize=function(t){return t=t||new e,r.v3Helper.normalize(this._raw,this._offset,o._raw,o._offset),t.set(o),t},e.prototype.scale=function(t,n){return n=n||new e,r.v3Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.scaleXYZ=function(t,n,r,i){i=i||new e;var o=this._raw;return i.setValue(o[this._offset]*t,o[this._offset+1]*n,o[this._offset+2]*r),i},e.prototype.lerp=function(t,n,i){return i=i||new e,r.v3Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),i.set(o),i},e.prototype.dot=function(e){return r.v3Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.length=function(){return r.v3Helper.length(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return r.v3Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return r.v3Helper.isZero(this._raw,this._offset)},e.prototype.distanceTo=function(e){return r.v3Helper.distance(this._raw,this._offset,e._raw,e._offset)},e.prototype.angleTo=function(t,n){return n=n||e.ZERO,r.v3Helper.angleTo(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.setFromMatrixColumn=function(e,t){return this.fromArray(e._raw,4*t)},e.prototype.fromArray=function(e,t){void 0===t&&(t=0);var n=this._raw;return n[this._offset]=e[t],n[this._offset+1]=e[t+1],n[this._offset+2]=e[t+2],this},e.prototype.setFromMatrixScale=function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length(),i=this._raw;return i[this._offset]=t,i[this._offset+1]=n,i[this._offset+2]=r,this},e.prototype.setFromMatrixPosition=function(e){var t=e._raw,n=this._raw;return n[this._offset]=t[e._offset+12],n[this._offset+1]=t[e._offset+13],n[this._offset+2]=t[e._offset+14],this},e.prototype.applyMatrix4=function(t){return e.transformCoordinate(this,t,this)},e.prototype.transformDirection=function(e){var t=this._raw,n=t[this._offset],r=t[this._offset+1],i=t[this._offset+2],o=e._raw;return t[this._offset]=o[e._offset]*n+o[e._offset+4]*r+o[e._offset+8]*i,t[this._offset+1]=o[e._offset+1]*n+o[e._offset+5]*r+o[e._offset+9]*i,t[this._offset+2]=o[e._offset+2]*n+o[e._offset+6]*r+o[e._offset+10]*i,this.normalize()},e}();t.default=i;var o=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(20),i=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"ZERO",{get:function(){var t=new Float32Array(4);return t.fill(0),new e(t)},enumerable:!1,configurable:!0}),e.createFromNumber=function(t,n,r,i){var o=new Float32Array(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,new e(o)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<4&&(t=new Float32Array(4).fill(0),n=0),new e(t)},e.prototype.toArray=function(){var e=this._raw;return[e[this._offset+0],e[this._offset+1],e[this._offset+2],e[this._offset+3]]},e.prototype.equal=function(e){return r.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e.prototype.set=function(e){r.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n,r){var i=this._raw;return i[this._offset+0]=e,i[this._offset+1]=t,i[this._offset+2]=n,i[this._offset+3]=r,this},e.prototype.add=function(t,n){return n=n||new e,r.v4Helper.add(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.sub=function(t,n){return n=n||new e,r.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,o._raw,o._offset),n.set(o),n},e.prototype.scale=function(t,n){return n=n||new e,r.v4Helper.scale(this._raw,this._offset,t,o._raw,o._offset),n.set(o),n},e.prototype.lerp=function(t,n,i){return i=i||new e,r.v4Helper.lerp(this._raw,this._offset,t._raw,t._offset,n,o._raw,o._offset),i.set(o),i},e.prototype.dot=function(e){return r.v4Helper.dot(this._raw,this._offset,e._raw,e._offset)},e.prototype.isZero=function(){return r.v4Helper.isZero(this._raw,this._offset)},e.prototype.clone=function(){var t=new e;return r.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e}();t.default=i;var o=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDataBuffer=void 0;var r=n(1),i=r.__importDefault(n(32));t.staticInitAccelerateDataBuffer=function(e){e};var o=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return r.__extends(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(i.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity2D=void 0;var r,i=n(1),o=n(6),a=i.__importDefault(n(36));t.staticInitEntity2D=function(e){r=e};var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.entityOffset=r._poolIndex*o.ENTITY2D_SIZE,r.localRotationOffset=r.entityOffset+o.ENTITY2D_OFFSET.OFFSET_ROTATION,r.localPositionOffset=r.entityOffset+o.ENTITY2D_OFFSET.OFFSET_POSITION,r.localScaleOffset=r.entityOffset+o.ENTITY2D_OFFSET.OFFSET_SCALE,r.worldMatrixOffset=r.entityOffset+o.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,r}return i.__extends(t,e),Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,2)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotationView",{get:function(){return this._localRotationView||(this._localRotationView=new Float32Array(this._nativePool._buffer,4*this.localRotationOffset,1)),this._localRotationView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,2)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,9)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){r.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){r.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){r.entityRemoveFromParent(this)},t.prototype.destroy=function(){r.entityRemoveFromParent(this)},t.prototype.clear=function(){r.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){r.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){r.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.OFFSET_ROTATION=o.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=o.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=o.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=o.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t.ENTITY2D_SIZE=o.ENTITY2D_SIZE,t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntity3D=void 0;var r,i=n(1),o=n(6),a=i.__importDefault(n(36));t.staticInitEntity3D=function(e){r=e};var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.entityOffset=r._poolIndex*o.ENTITY3D_SIZE,r.localRotationTypeOffset=r.entityOffset+o.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,r.localQuaternionOffset=r.entityOffset+o.ENTITY3D_OFFSET.OFFSET_ROTATION,r.localPositionOffset=r.entityOffset+o.ENTITY3D_OFFSET.OFFSET_POSITION,r.localScaleOffset=r.entityOffset+o.ENTITY3D_OFFSET.OFFSET_SCALE,r.worldMatrixOffset=r.entityOffset+o.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,r}return i.__extends(t,e),t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~o.ENTITY3D_OFFSET.DF_ROTATIONTYPE:this._nativePool._u32view[this.localRotationTypeOffset]|=o.ENTITY3D_OFFSET.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&o.ENTITY3D_OFFSET.DF_ROTATIONTYPE)},Object.defineProperty(t.prototype,"localPositionView",{get:function(){return this._localPositionView||(this._localPositionView=new Float32Array(this._nativePool._buffer,4*this.localPositionOffset,3)),this._localPositionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternionView",{get:function(){return this._localQuaternionView||(this._localQuaternionView=new Float32Array(this._nativePool._buffer,4*this.localQuaternionOffset,4)),this._localQuaternionView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScaleView",{get:function(){return this._localScaleView||(this._localScaleView=new Float32Array(this._nativePool._buffer,4*this.localScaleOffset,3)),this._localScaleView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrixView",{get:function(){return this._worldMatrixView||(this._worldMatrixView=new Float32Array(this._nativePool._buffer,4*this.worldMatrixOffset,16)),this._worldMatrixView},enumerable:!1,configurable:!0}),t.prototype.addChild=function(e){r.entityAddChild(this,e)},t.prototype.addChildAtIndex=function(e,t){r.entityAddChildAtIndex(this,e,t)},t.prototype.removeFromParent=function(){r.entityRemoveFromParent(this)},t.prototype.destroy=function(){r.entityRemoveFromParent(this)},t.prototype.clear=function(){r.entityClear(this)},t.prototype.setLocalMatrixDirty=function(){r.entitySetLocalMatrixDirty(this)},Object.defineProperty(t.prototype,"active",{set:function(e){r.entitySetActive(this,e)},enumerable:!1,configurable:!0}),t.prototype.setEntityDebugName=function(e){r.setEntityName(this.id,e)},t.OFFSET_ROTATIONTYPE=o.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=o.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=o.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=o.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=o.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t.DF_ROTATIONTYPE=o.ENTITY3D_OFFSET.DF_ROTATIONTYPE,t.ENTITY3D_SIZE=o.ENTITY3D_SIZE,t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitEntityGroup=void 0;var r,i=n(1),o=i.__importDefault(n(32));t.staticInitEntityGroup=function(e){r=e};var a=function(e){function t(t,n){var r=e.call(this)||this;return r._init(t),r.entityLength=n,r}return i.__extends(t,e),t.prototype.getEntityIdByIndex=function(e){return this._id+e},t.prototype.getEntityOffsetByIndex=function(e){return e*this.objectSize},t.prototype.setRawBuffer=function(e,t){void 0===t&&(t=0),this._f32view.set(e,t)},t.prototype.setLocalMatrixDirtyAll=function(){r.entityGroupSetLocalMatrixDirtyAll(this)},t}(o.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(6),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.objectSize=i.ENTITY2D_SIZE,r}return r.__extends(t,e),t.OFFSET_ROTATION=i.ENTITY2D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=i.ENTITY2D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=i.ENTITY2D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=i.ENTITY2D_OFFSET.OFFSET_WORLDMATRIX,t}(r.__importDefault(n(50)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n(6),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.objectSize=i.ENTITY3D_SIZE,r}return r.__extends(t,e),t.OFFSET_ROTATIONTYPE=i.ENTITY3D_OFFSET.OFFSET_ROTATIONTYPE,t.OFFSET_ROTATION=i.ENTITY3D_OFFSET.OFFSET_ROTATION,t.OFFSET_POSITION=i.ENTITY3D_OFFSET.OFFSET_POSITION,t.OFFSET_SCALE=i.ENTITY3D_OFFSET.OFFSET_SCALE,t.OFFSET_WORLDMATRIX=i.ENTITY3D_OFFSET.OFFSET_WORLDMATRIX,t}(r.__importDefault(n(50)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateEntityCommand=void 0;var r,i=n(1),o=i.__importStar(n(54)),a=n(6);t.staticInitAccelerateEntityCommand=function(e){r=e};var s=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.prototype._checkBufferSize=function(e){o.SIZE_UINT32+this._u32view[o.OFFSET_COMMANDLENGTH]+e>this._bufferSize&&r.refreshWorldTransform()},t.prototype.setRootEntity=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.SetRootEntity,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.addChild=function(e,t){var n=3*o.SIZE_UINT32;this._checkBufferSize(n);var r=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[r]=a.enumEntityCommandType.AddChild,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t.prototype.addChildAtIndex=function(e,t,n){var r=4*o.SIZE_UINT32;this._checkBufferSize(r);var i=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[i]=a.enumEntityCommandType.AddChildAtIndex,this._u32view[i+1]=e,this._u32view[i+2]=t,this._u32view[i+3]=n,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+r)},t.prototype.removeFromParent=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.RemoveFromParent,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.disperseSubTree=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.DisperseSubTree,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBone=function(e,t){var n=3*o.SIZE_UINT32;this._checkBufferSize(n);var r=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[r]=a.enumEntityCommandType.BindToBone,this._u32view[r+1]=e,this._u32view[r+2]=t,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t.prototype.unBindFromBone=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.UnBindFromBone,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandActive=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.EntityCommandActive,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.entityCommandInActive=function(e){var t=2*o.SIZE_UINT32;this._checkBufferSize(t);var n=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[n]=a.enumEntityCommandType.EntityCommandInActive,this._u32view[n+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+t)},t.prototype.bindToBones=function(e,t){var n=e.length,r=(2+2*n)*o.SIZE_UINT32;this._checkBufferSize(r);var i=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[i]=a.enumEntityCommandType.BindToBones,this._u32view[i+1]=n;for(var s=0;s<n;s++){var c=e[s],u=t[s];this._u32view[i+2+s]=c.id,this._u32view[i+2+n+s]=u.id}this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+r)},t.prototype.unBindFromBones=function(e){var t=e.length,n=(2+t)*o.SIZE_UINT32;this._checkBufferSize(n);var r=this._u32view[o.OFFSET_COMMANDLENGTH]/o.SIZE_UINT32+1;this._u32view[r]=a.enumEntityCommandType.UnBindFromBones,this._u32view[r+1]=t;for(var i=0;i<t;i++){var s=e[i];this._u32view[r+2+i]=s.id}this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)},t}(o.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OFFSET_COMMANDLENGTH=t.SIZE_UINT32=void 0;t.SIZE_UINT32=4,t.OFFSET_COMMANDLENGTH=0;var r=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[t.OFFSET_COMMANDLENGTH]=e},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticInitAccelerateDirtiesCommand=void 0;var r,i=n(1),o=i.__importStar(n(54));t.staticInitAccelerateDirtiesCommand=function(e){r=e};var a=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t.prototype._checkBufferSize=function(e){this._u32view[o.OFFSET_COMMANDLENGTH]+e+1>this._u32view.length&&r.refreshWorldTransform()},t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[o.OFFSET_COMMANDLENGTH]+1]=e.id,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[o.OFFSET_COMMANDLENGTH]+1]=e,this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,r=t-(this._u32view.length-1),i=0;i<r;i++)this._u32view[n+i]=e[i].id;var a=t-r;for(i=r;i<a;i++)this.addDirtyEntityId(e[i].id)}else{for(r=t,n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,i=0;i<r;i++)this._u32view[n+i]=e[i].id;this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+r)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,r=t-(this._u32view.length-1),i=0;i<r;i++)this._u32view[n+i]=e[i];var a=t-r;for(i=r;i<a;i++)this.addDirtyEntityId(e[i])}else{for(r=t,n=this._u32view[o.OFFSET_COMMANDLENGTH]+1,i=0;i<r;i++)this._u32view[n+i]=e[i];this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+r)}},t.prototype.addDirtyEntityGroupAll=function(e){if(this._checkBufferSize(e.entityLength),e.entityLength>this._u32view.length){for(var t=this._u32view[o.OFFSET_COMMANDLENGTH]+1,n=e.entityLength-(this._u32view.length-1),r=0;r<n;r++)this._u32view[t+r]=e.getEntityIdByIndex(r);var i=e.entityLength-n;for(r=n;r<i;r++)this.addDirtyEntityId(e.getEntityIdByIndex(r))}else{for(n=e.entityLength,t=this._u32view[o.OFFSET_COMMANDLENGTH]+1,r=0;r<n;r++)this._u32view[t+r]=e.getEntityIdByIndex(r);this.setCommandSize(this._u32view[o.OFFSET_COMMANDLENGTH]+n)}},t}(o.default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(i.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(i.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scaleNumberArray=t.NativePools=void 0;var r=n(1),i=n(6),o=r.__importDefault(n(59)),a=4e3,s=function(){};t.NativePools=s;var c=new Float32Array(new ArrayBuffer(4*i.ENTITY2D_SIZE));c.set([0,0,0,1,1],0);var u=new Uint32Array(new ArrayBuffer(4*i.ENTITY3D_SIZE)),l=new Float32Array(u.buffer);u[0]=1,l.set([0,0,0,1],1),l.set([0,0,0],5),l.set([1,1,1],8);var d=new Uint32Array(new ArrayBuffer(4*i.CULLABLECOMPONENT_SIZE)),f=new Float32Array(d.buffer),p=function(){function e(e){this._index=0,this._size=null!=e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}();t.scaleNumberArray=p;var h=function(){function e(e){this.worker=e,this.entity2DPools={},this._entity2DPoolIndex=0,this._entity2DPoolUsedLength=0,this._entity2DPoolLength=0,this._entity2DDisposedIds=new p,this.entity3DPools={},this._entity3DPoolIndex=0,this._entity3DPoolUsedLength=0,this._entity3DPoolLength=0,this._entity3DDisposedIds=new p,this.cullableComponentPools={},this._cullableComponentPoolIndex=0,this._cullableComponentPoolUsedLength=0,this._cullableComponentPoolLength=0,this._cullableComponentDisposedIds=new p}return e.prototype._enlargeEntity2DPool=function(e){var t=this.worker.createEntity(i.enumEntityType.Entity2D,e),n=new o.default(t);this._entity2DPoolIndex=n.id,this.entity2DPools[n.id]=n,this._entity2DPoolLength+=e},e.prototype._enlargeEntity3DPool=function(e){var t=this.worker.createEntity(i.enumEntityType.Entity3D,e),n=new o.default(t);this._entity3DPoolIndex=n.id,this.entity3DPools[n.id]=n,this._entity3DPoolLength+=e},e.prototype._enlargeCullableComponentPool=function(e){var t=this.worker.createComponent(i.enumComponentType.Cullable,e),n=new o.default(t);this._cullableComponentPoolIndex=n.id,this.cullableComponentPools[n.id]=n,this._cullableComponentPoolLength+=e},e.prototype.getEntity2D=function(){if(this._entity2DDisposedIds.size()>0)return this._entity2DPoolUsedLength++,this._entity2DDisposedIds.pop();this._entity2DPoolUsedLength>=this._entity2DPoolLength&&this._enlargeEntity2DPool(a);var e=this._entity2DPoolIndex;return this._entity2DPoolIndex+=1,this._entity2DPoolUsedLength++,e},e.prototype.disposeEntity2D=function(e){e.isUsing&&(this._entity2DDisposedIds.push(e.id),this._entity2DPoolUsedLength--,e.setRawBuffer(c),e.isUsing=!1)},e.prototype.getEntity3D=function(){if(this._entity3DDisposedIds.size()>0)return this._entity3DPoolUsedLength++,this._entity3DDisposedIds.pop();this._entity3DPoolUsedLength>=this._entity3DPoolLength&&this._enlargeEntity3DPool(a);var e=this._entity3DPoolIndex;return this._entity3DPoolIndex+=1,this._entity3DPoolUsedLength++,e},e.prototype.disposeEntity3D=function(e){e.isUsing&&(this._entity3DDisposedIds.push(e.id),this._entity3DPoolUsedLength--,e.setRawBuffer(l),e.isUsing=!1)},e.prototype.getCullableComponent=function(){if(this._cullableComponentDisposedIds.size()>0)return this._cullableComponentPoolUsedLength++,this._cullableComponentDisposedIds.pop();this._cullableComponentPoolUsedLength>=this._cullableComponentPoolLength&&this._enlargeCullableComponentPool(a);var e=this._cullableComponentPoolIndex;return this._cullableComponentPoolIndex+=1,this._cullableComponentPoolUsedLength++,e},e.prototype.disposeCullableComponent=function(e){e.isUsing&&(this._cullableComponentDisposedIds.push(e.id),this._cullableComponentPoolUsedLength--,e.setRawBuffer(f),e.isUsing=!1)},e.prototype.getCullableComponentSingle=function(){return this._enlargeCullableComponentPool(1),this._cullableComponentPoolIndex},e.prototype.disposeCullableComponentSingle=function(e){this.cullableComponentPools[e.id]=null},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return r.__extends(t,e),t}(r.__importDefault(n(32)).default);t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerMock=t.AnimatorController=t.AnimatorControllerModelMock=t.staticInitAnimatorController=void 0;var r,i=n(1),o=n(8),a=i.__importDefault(n(45)),s=i.__importDefault(n(61)),c=i.__importDefault(n(46));t.staticInitAnimatorController=function(e){r=e};var u,l=new a.default,d=new s.default,f=new s.default,p=new c.default,h=new c.default,g=function(){function e(e){this.layerCount=e,this.id=o.requestAccelerateObjectID(),this.masks=[],this.buffer=new ArrayBuffer(4+12*e),this.uint32=new Uint32Array(this.buffer);for(var t=0;t<e;t++)this.masks.push(null)}return e.prototype.setMaskAtIndex=function(e,t,n,r){if(this.masks[e]=[],t)for(var i=new Float32Array(t,n,2*r),o=new Uint32Array(t,n,2*r),a=0;a<r;a++)this.masks[e].push({entity:o[2*a],weight:i[2*a+1]})},e}();t.AnimatorControllerModelMock=g,function(e){e[e.Override=0]="Override",e[e.Additive=1]="Additive"}(u||(u={}));var v=function(){this.tx=[0,0],this.ty=[0,0],this.tz=[0,0],this.sx=[0,0],this.sy=[0,0],this.sz=[0,0],this.use_quaternion=!0,this.r_weight=0,this.rx=0,this.ry=0,this.rz=0,this.rw=0},_=function(){function e(e){this.layerCount=e,this.nativeObject=r.worker.createAnimatorControllerModel(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){this.nativeObject.update()},e}();function y(e,t,n,r){var i=!1;return e.use_quaternion?null!==e.rx&&null!==e.ry&&null!==e.rz&&null!==e.rw?(i=!0,r[0]=e.rx,r[1]=e.ry,r[2]=e.rz,r[3]=e.rw):i=!1:null!==e.rx&&null!==e.ry&&null!==e.rz?(i=!0,l.setValue(e.rx,e.ry,e.rz),s.default.fromEulerAngles(l,d),r[0]=d.x,r[1]=d.y,r[2]=d.z,r[3]=d.w):t&&n?(i=!0,l.setValue(null===e.rx?n.getEuler()[0]:e.rx,null===e.ry?n.getEuler()[1]:e.ry,null===e.rz?n.getEuler()[2]:e.rz),s.default.fromEulerAngles(l,d),r[0]=d.x,r[1]=d.y,r[2]=d.z,r[3]=d.w):i=!1,i}t.AnimatorController=_;var m=function(){function e(e){this.layerCount=e,this.binding=null,this._blendMap=new Map,this.nativeObject=new g(e),this._uint32View=new Uint32Array(this.nativeObject.buffer),this._f32View=new Float32Array(this.nativeObject.buffer);for(var t=0;t<e;t++)this._uint32View[1+3*t]=1,this._f32View[1+3*t+1]=0,this._f32View[1+3*t+2]=4294967295}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.setAnimationClipBinding=function(e){this._uint32View[0]=e?e.id:4294967295,this.binding=e},e.prototype.setLayerBlendType=function(e,t){this._uint32View[1+3*e]=t},e.prototype.setLayerWeight=function(e,t){this._f32View[1+3*e+1]=t},e.prototype.setLayerBlend=function(e,t){this._uint32View[1+3*e+2]=t?t.id:4294967295,t&&this._blendMap.set(t.id,t)},e.prototype.setLayerMask=function(e,t){this.nativeObject.setMaskAtIndex(e,t.buffer,t.offset,t.length)},e.prototype.update=function(){var e=this;if(this.binding){for(var t=[],n=this.binding.defaultValues,r=function(r){var o=new Map,a=i._uint32View[1+3*r];if(a!==u.Override&&a!==u.Additive)return t.push(o),"continue";var s=a===u.Additive,c=i._uint32View[1+3*r+2],l=i._blendMap.get(c);if(!l)return t.push(o),"continue";for(var d=[];l;)l.weight&&d.push(l),l=l.nextState;for(var f=function(e){var t=i._blendState(d[e],s,i.nativeObject.masks[r]),n=d[e].weight;t.forEach((function(e,t){if(!o.has(t)){var r=new v;r.tx[1]=NaN,r.ty[1]=NaN,r.tz[1]=NaN,r.sx[1]=NaN,r.sy[1]=NaN,r.sz[1]=NaN,r.r_weight=NaN,o.set(t,r)}var i=o.get(t);if(isNaN(e.tx[1])||0===e.tx[1]||(isNaN(i.tx[1])&&(i.tx[1]=0),i.tx[0]+=e.tx[0]*n,i.tx[1]+=e.tx[1]*n),isNaN(e.ty[1])||0===e.ty[1]||(isNaN(i.ty[1])&&(i.ty[1]=0),i.ty[0]+=e.ty[0]*n,i.ty[1]+=e.ty[1]*n),isNaN(e.tz[1])||0===e.tz[1]||(isNaN(i.tz[1])&&(i.tz[1]=0),i.tz[0]+=e.tz[0]*n,i.tz[1]+=e.tz[1]*n),isNaN(e.sx[1])||0===e.sx[1]||(isNaN(i.sx[1])&&(i.sx[1]=0),i.sx[0]+=e.sx[0]*n,i.sx[1]+=e.sx[1]*n),isNaN(e.sy[1])||0===e.sy[1]||(isNaN(i.sy[1])&&(i.sy[1]=0),i.sy[0]+=e.sy[0]*n,i.sy[1]+=e.sy[1]*n),isNaN(e.sz[1])||0===e.sz[1]||(isNaN(i.sz[1])&&(i.sz[1]=0),i.sz[0]+=e.sz[0]*n,i.sz[1]+=e.sz[1]*n),!isNaN(e.r_weight)&&0!==e.r_weight){isNaN(i.r_weight)&&(i.r_weight=0);var a=p;a.setValue(i.rx,i.ry,i.rz,i.rw);var s=h;s.setValue(e.rx,e.ry,e.rz,e.rw),a.add(s.scale(a.dot(s)<0?-e.r_weight*n:e.r_weight*n,s),a),i.rx=a.x,i.ry=a.y,i.rz=a.z,i.rw=a.w,i.r_weight+=e.r_weight*n}}))},g=0;g<d.length;g++)f(g);s?o.forEach((function(e,t){if(!isNaN(e.r_weight)){var n=p;n.setValue(e.rx*e.r_weight,e.ry*e.r_weight,e.rz*e.r_weight,e.rw);var r=n.dot(n);r>0&&n.scale(1/Math.sqrt(r),n),e.rx=n.x,e.ry=n.y,e.rz=n.z,e.rw=n.w}})):o.forEach((function(t,r){var i=e.binding.entities.get(r),o=n.get(i);if(!isNaN(t.tx[1])&&t.tx[1]<1&&(t.tx[0]+=(1-t.tx[1])*o.position[0]),!isNaN(t.ty[1])&&t.ty[1]<1&&(t.ty[0]+=(1-t.ty[1])*o.position[1]),!isNaN(t.tz[1])&&t.tz[1]<1&&(t.tz[0]+=(1-t.tz[1])*o.position[2]),!isNaN(t.sx[1])&&t.sx[1]<1&&(t.sx[0]+=(1-t.sx[1])*o.scale[0]),!isNaN(t.sy[1])&&t.sy[1]<1&&(t.sy[0]+=(1-t.sy[1])*o.scale[1]),!isNaN(t.sz[1])&&t.sz[1]<1&&(t.sz[0]+=(1-t.sz[1])*o.scale[2]),!isNaN(t.r_weight)&&t.r_weight<1){var a=o.getQuaternion(),s=p;s.setValue(t.rx,t.ry,t.rz,t.rw),(c=h).setValue(a[0],a[1],a[2],a[3]),s.add(c.scale(s.dot(c)<0?-(1-t.r_weight):1-t.r_weight,c),s),t.rx=s.x,t.ry=s.y,t.rz=s.z,t.rw=s.w}if(!isNaN(t.r_weight)){var c;(c=p).setValue(t.rx,t.ry,t.rz,t.rw);var u=c.dot(c);u>0&&c.scale(1/Math.sqrt(u),c),t.rx=c.x,t.ry=c.y,t.rz=c.z,t.rw=c.w}})),t.push(o)},i=this,o=0;o<this.layerCount;o++)r(o);var a=new Map,s=function(r){var i=c._uint32View[1+3*r]===u.Additive,o=c._f32View[1+3*r+1];t[r].forEach((function(t,s){if(!a.has(s)){var c=new v;c.tx[1]=NaN,c.ty[1]=NaN,c.tz[1]=NaN,c.sx[1]=NaN,c.sy[1]=NaN,c.sz[1]=NaN,c.r_weight=NaN,a.set(s,c)}var u=a.get(s);if(i){if(0===r){var l=n.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=l.position[0]+t.tx[0]*o),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=l.position[1]+t.ty[0]*o),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=l.position[2]+t.tz[0]*o),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=l.scale[0]*(1-o)+t.sx[0]*o),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=l.scale[1]*(1-o)*t.sy[0]*o),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=l.scale[2]*(1-o)*t.sz[0]*o),!isNaN(t.r_weight)){isNaN(u.r_weight)&&(u.r_weight=0);var g=l.getQuaternion(),_=p;_.setValue(g[0],g[1],g[2],g[3]),(m=d).setValue(_.x,_.y,_.z,_.w),(S=h).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(T=S.dot(S))>=0&&S.scale(1/Math.sqrt(T),S),(y=f).setValue(S.x,S.y,S.z,S.w),y.multiply(m,y),u.rx=y.x,u.ry=y.y,u.rz=y.z,u.rw=y.w}}else if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]+=t.tx[0]*o),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]+=t.ty[0]*o),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]+=t.tz[0]*o),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]+=t.sx[0]*o),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]+=t.sy[0]*o),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]+=t.sz[0]*o),!isNaN(t.r_weight)){if(isNaN(u.r_weight)){u.r_weight=0;g=(l=n.get(e.binding.entities.get(s))).getQuaternion();u.rx=g[0],u.ry=g[1],u.rz=g[2],u.rw=g[3]}var y,m;(S=h).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(T=S.dot(S))>=0&&S.scale(1/Math.sqrt(T),S),(y=f).setValue(S.x,S.y,S.z,S.w),(m=d).setValue(u.rx,u.ry,u.rz,u.rw),y.multiply(m,y),u.rx=y.x,u.ry=y.y,u.rz=y.z,u.rw=y.w}}else if(o<1){l=n.get(e.binding.entities.get(s));if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=l.position[0]*(1-o)+t.tx[0]*o),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=l.position[1]*(1-o)+t.ty[0]*o),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=l.position[2]*(1-o)+t.tz[0]*o),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=l.scale[0]*(1-o)+t.sx[0]*o),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=l.scale[1]*(1-o)+t.sy[0]*o),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=l.scale[2]*(1-o)+t.sz[0]*o),!isNaN(t.r_weight)){isNaN(u.r_weight)&&(u.r_weight=0);g=l.getQuaternion();var b=p;b.setValue(g[0],g[1],g[2],g[3]);var w=h;w.setValue(t.rx,t.ry,t.rz,t.rw);var O=w.dot(b)>=0?1:-1,E=w.scale(O).sub(b).scale(o).add(b);(T=E.dot(E))>=0&&E.scale(1/Math.sqrt(T),E),u.rx=E.x,u.ry=E.y,u.rz=E.z,u.rw=E.w}}else{var S,T;if(isNaN(t.tx[1])||(isNaN(u.tx[1])&&(u.tx[1]=0),u.tx[0]=t.tx[0]*o),isNaN(t.ty[1])||(isNaN(u.ty[1])&&(u.ty[1]=0),u.ty[0]=t.ty[0]*o),isNaN(t.tz[1])||(isNaN(u.tz[1])&&(u.tz[1]=0),u.tz[0]=t.tz[0]*o),isNaN(t.sx[1])||(isNaN(u.sx[1])&&(u.sx[1]=0),u.sx[0]=t.sx[0]*o),isNaN(t.sy[1])||(isNaN(u.sy[1])&&(u.sy[1]=0),u.sy[0]=t.sy[0]*o),isNaN(t.sz[1])||(isNaN(u.sz[1])&&(u.sz[1]=0),u.sz[0]=t.sz[0]*o),!isNaN(t.r_weight))isNaN(u.r_weight)&&(u.r_weight=0),(S=h).setValue(t.rx*o,t.ry*o,t.rz*o,t.rw),(T=S.dot(S))>=0&&S.scale(1/Math.sqrt(T),S),u.rx=S.x,u.ry=S.y,u.rz=S.z,u.rw=S.w}}))},c=this;for(o=0;o<t.length;o++)s(o);a.forEach((function(t,n){var r=e.binding.entities.get(n);isNaN(t.tx[1])||(r.localPositionView[0]=t.tx[0]),isNaN(t.ty[1])||(r.localPositionView[1]=t.ty[0]),isNaN(t.tz[1])||(r.localPositionView[2]=t.tz[0]),isNaN(t.sx[1])||(r.localScaleView[0]=t.sx[0]),isNaN(t.sy[1])||(r.localScaleView[1]=t.sy[0]),isNaN(t.sz[1])||(r.localScaleView[2]=t.sz[0]),isNaN(t.r_weight)||(r.localQuaternionView.set([t.rx,t.ry,t.rz,t.rw]),r.setUsingEuler(!1)),r.setLocalMatrixDirty()}))}},e.prototype._blendState=function(e,t,n){var r=new Map;if(!this.binding)return r;for(var i=this.binding.defaultValues,o=e.count,a=e.useDefault,s=0;s<o;s++){var c={clip:e.clipsMap.get(e._uint32View[3+5*s]),frameIndex:e._f32View[3+5*s+1],weight:e._f32View[3+5*s+2],additiveReferenceClip:e.clipsMap.get(e._uint32View[3+5*s+3]),additiveFrameIndex:e._f32View[3+5*s+4]};if(c.weight&&c.clip&&this.binding.clipBinding.has(c.clip)){var u=c.clip.evaluate(c.frameIndex),l=c.weight,g={};if(t){var _=c.additiveReferenceClip?c.additiveReferenceClip:c.clip,m=c.additiveReferenceClip?c.additiveFrameIndex:0;this.binding.clipBinding.has(_)||(_=c.clip,m=0);var b=_.evaluate(m);for(var w in b){var O=this.binding.clipBinding.get(_);if(O[+w])(S=this.binding.entities.get(O[+w].id))&&(g[S.id]=b[w])}}for(var E in u){var S;if(S=this.binding.clipBinding.get(c.clip)[+E]){var T=1;if(n.length){for(var I=NaN,A=0;A<n.length;A++)if(n[A]&&n[A].entity===S.id){I=n[A].weight;break}if(!isNaN(I)){if(0===I)continue;T=I}}var C=i.get(S);if(C){var k=l*T,x=[0,0,0,0],P=y(u[E],0!==a,C,x);if(t){var D=g[S.id];if(!D)continue;var R=[0,0,0,0],j=y(D,0!==a,C,R);if(null!==u[E].tx&&null!==D.tx&&(u[E].tx-=D.tx),null!==u[E].ty&&null!==D.ty&&(u[E].ty-=D.ty),null!==u[E].tz&&null!==D.tz&&(u[E].tz-=D.tz),null!==u[E].sx&&null!==D.sx&&(u[E].sx-=D.sx),null!==u[E].sy&&null!==D.sy&&(u[E].sy-=D.sy),null!==u[E].sz&&null!==D.sz&&(u[E].sz-=D.sz),P&&j){var N=d;N.setValue(R[0],R[1],R[2],R[3]);var M=f;M.setValue(x[0],x[1],x[2],x[3]),M.multiply(N.invert(N),M),x[0]=u[E].rx=M.x,x[1]=u[E].ry=M.y,x[2]=u[E].rz=M.z,x[3]=u[E].rw=M.w}}if(!r.has(S.id)){var L=new v;L.tx[1]=NaN,L.ty[1]=NaN,L.tz[1]=NaN,L.sx[1]=NaN,L.sy[1]=NaN,L.sz[1]=NaN,L.r_weight=NaN,r.set(S.id,L)}var B=r.get(S.id);if(null!==u[E].tx&&(isNaN(B.tx[1])&&(B.tx[1]=0),B.tx[0]+=u[E].tx*k,B.tx[1]+=k),null!==u[E].ty&&(isNaN(B.ty[1])&&(B.ty[1]=0),B.ty[0]+=u[E].ty*k,B.ty[1]+=k),null!==u[E].tz&&(isNaN(B.tz[1])&&(B.tz[1]=0),B.tz[0]+=u[E].tz*k,B.tz[1]+=k),null!==u[E].sx&&(isNaN(B.sx[1])&&(B.sx[1]=0),B.sx[0]+=u[E].sx*k,B.sx[1]+=k),null!==u[E].sy&&(isNaN(B.sy[1])&&(B.sy[1]=0),B.sy[0]+=u[E].sy*k,B.sy[1]+=k),null!==u[E].sz&&(isNaN(B.sz[1])&&(B.sz[1]=0),B.sz[0]+=u[E].sz*k,B.sz[1]+=k),P){isNaN(B.r_weight)&&(B.r_weight=0),B.r_weight+=k;var F=p;F.setValue(B.rx,B.ry,B.rz,B.rw);var U=h;U.setValue(x[0],x[1],x[2],x[3]),F.add(U.scale(F.dot(U)<0?-k:k,U),F),B.rx=F.x,B.ry=F.y,B.rz=F.z,B.rw=F.w}}}}}}return t||0===a||i.forEach((function(e,t){if(n.length)for(var i=0;i<n.length;i++)if(n[i]&&n[i].entity===t.id){if(n[i]&&0===n[i].weight)return;break}r.has(t.id)||r.set(t.id,new v)})),r},e}();t.AnimatorControllerMock=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(44)),o=r.__importDefault(n(45)),a=n(20),s=function(){function e(e,t){this._raw=e||new Float32Array(4),this._offset=t||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._raw[this._offset]},set:function(e){this._raw[this._offset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._raw[this._offset+1]},set:function(e){this._raw[this._offset+1]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._raw[this._offset+2]},set:function(e){this._raw[this._offset+2]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"w",{get:function(){return this._raw[this._offset+3]},set:function(e){this._raw[this._offset+3]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT",{get:function(){return e.createFromNumber(0,0,0,1)},enumerable:!1,configurable:!0}),e.fromEulerAngles=function(t,n){return n=n||e.DEFAULT,a.quatHelper.fromEulerAngles(t._raw,t._offset,l._raw,l._offset),n.set(l),n},e.createFromMatrix4=function(t,n){return n=n||new e,a.quatHelper.fromMatrix4(t._raw,t._offset,l._raw,l._offset),n.set(l),n},e.createFromAxisAngle=function(t,n,r){return r=r||new e,i.default.createRotationAxis(t,n,c),e.createFromMatrix4(c,r),r},e.lookRotation=function(t,n,r){return r=r||new e,i.default.lookAt(o.default.ZERO,t,n,c),e.createFromMatrix4(c,r),r},e.createFromNumber=function(t,n,r,i){var o=new Float32Array(4);return o[0]=t,o[1]=n,o[2]=r,o[3]=i,new e(o)},e.createFromArray=function(t){return 4!==t.length&&(t=new Array(4).fill(0)),new e(new Float32Array(t))},e.createFromTypedArray=function(t,n){return void 0===n&&(n=0),t.length-n<4&&(t=new Float32Array(4).fill(0)),new e(t,n)},e.prototype.set=function(e){a.v4Helper.copy(e._raw,e._offset,this._raw,this._offset)},e.prototype.setValue=function(e,t,n,r){var i=this._raw;return i[this._offset+0]=e,i[this._offset+1]=t,i[this._offset+2]=n,i[this._offset+3]=r,this},e.prototype.slerp=function(t,n,r){return r=r||new e,a.quatHelper.slerp(this._raw,this._offset,t._raw,t._offset,n,l._raw,l._offset),r.set(l),r},e.prototype.invert=function(t){return t=t||new e,a.quatHelper.invert(this._raw,this._offset,l._raw,l._offset),t.set(l),t},e.prototype.add=function(t,n){return n=n||e.DEFAULT,a.v4Helper.add(this._raw,this._offset,t._raw,t._offset,l._raw,l._offset),n.set(l),n},e.prototype.sub=function(t,n){return n=n||e.DEFAULT,a.v4Helper.sub(this._raw,this._offset,t._raw,t._offset,l._raw,l._offset),n.set(l),n},e.prototype.multiply=function(t,n){return n=n||e.DEFAULT,a.quatHelper.multiply(this._raw,this._offset,t._raw,t._offset,l._raw,l._offset),n.set(l),n},e.prototype.clone=function(){var t=new e;return a.v4Helper.copy(this._raw,this._offset,t._raw,t._offset),t},e.prototype.isZero=function(){return a.v4Helper.isZero(this._raw,this._offset)},e.prototype.isDefault=function(){return a.v4Helper.equal(this._raw,this._offset,u._raw,u._offset)},e.prototype.toEulerAngles=function(e){return e=e||o.default.ZERO,a.quatHelper.toEulerAngles(this._raw,this._offset,d._raw,d._offset),e.set(d),e},e.prototype.equal=function(e){return a.v4Helper.equal(this._raw,this._offset,e._raw,e._offset)},e}();t.default=s;var c=new i.default,u=s.DEFAULT,l=new s,d=new o.default},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AnimatorControllerStateMock=t.AnimatorControllerState=t.staticInitAnimatorControllerLayerBlend=void 0,t.staticInitAnimatorControllerLayerBlend=function(e){r=e};var i=function(){function e(e){this.count=e,this._index=0,this._native=r.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0},e.prototype.setNextState=function(e){this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,n,r,i){return!(this._index>=this.count)&&(this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=n,this._uint32View[5*this._index+3+3]=r?r.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=i,this._index++,!0)},e}();t.AnimatorControllerState=i;var o=function(){function e(e){this.count=e,this.clipsMap=new Map,this._index=0,this._native=r.createAnimatorControllerStateModel(e),this._f32View=new Float32Array(this._native.buffer),this._uint32View=new Uint32Array(this._native.buffer);for(var t=0;t<e;t++)this._uint32View[5*t+3]=4294967295,this._f32View[5*t+3+1]=0,this._f32View[5*t+3+2]=0,this._uint32View[5*t+3+3]=4294967295,this._f32View[5*t+3+4]=0}return Object.defineProperty(e.prototype,"id",{get:function(){return this._native.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._f32View[0]},set:function(e){this._f32View[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"useDefault",{get:function(){return this._f32View[1]},set:function(e){this._f32View[1]=e},enumerable:!1,configurable:!0}),e.prototype.resetBlendInfo=function(){for(var e=0;e<this.count;e++)this._f32View[5*e+3+1]=0,this._f32View[5*e+3+2]=0;this._index=0,this.clipsMap.clear()},e.prototype.setNextState=function(e){this.nextState=e,this._uint32View[2]=e?e.id:4294967295},e.prototype.setBlendInfo=function(e,t,n,r,i){return!(this._index>=this.count)&&(this.clipsMap.set(e.id,e),this._uint32View[5*this._index+3]=e.id,this._f32View[5*this._index+3+1]=t,this._f32View[5*this._index+3+2]=n,this._uint32View[5*this._index+3+3]=r?r.id:this._uint32View[5*this._index+3],this._f32View[5*this._index+3+4]=i,r&&this.clipsMap.set(r.id,r),this._index++,!0)},e}();t.AnimatorControllerStateMock=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(54)),o=function(e){function t(){return e.call(this)||this}return r.__extends(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimatorControllers=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;this.setCommandSize(t)},t}(i.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationClipBindingMock=t.AnimationClipBinding=t.staticInitAnimationClipBinding=t.Entity3DValue=void 0;var r,i,o,a,s=n(1),c=n(8),u=s.__importDefault(n(61)),l=s.__importDefault(n(45)),d=new u.default,f=new l.default,p=function(){function e(e){this.position=[e.localPositionView[0],e.localPositionView[1],e.localPositionView[2]],this.scale=[e.localScaleView[0],e.localScaleView[1],e.localScaleView[2]],e.isUsingEuler()?(this._euler=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2]],this.useQuaternion=!1,this._quaternionInitialized=!1,this._eulerInitialized=!0):(this.useQuaternion=!0,this._quaternionInitialized=!0,this._quaternion=[e.localQuaternionView[0],e.localQuaternionView[1],e.localQuaternionView[2],e.localQuaternionView[3]],this._eulerInitialized=!1)}return e.prototype.getEuler=function(){return this._eulerInitialized||(this._eulerInitialized=!0,d.setValue(this._quaternion[0],this._quaternion[1],this._quaternion[2],this._quaternion[3]),d.toEulerAngles(f),this._euler=[f.x,f.y,f.z]),this._euler},e.prototype.getQuaternion=function(){return this._quaternionInitialized||(this._quaternionInitialized=!0,f.setValue(this._euler[0],this._euler[1],this._euler[2]),u.default.fromEulerAngles(f,d),this._quaternion=[d.x,d.y,d.z,d.w]),this._quaternion},e.prototype.syncValue=function(e){e.localPositionView.set(this.position),e.localScaleView.set(this.scale),this.useQuaternion?(e.localQuaternionView.set(this._quaternion),e.setUsingEuler(!1)):(e.localQuaternionView.set(this._euler),e.setUsingEuler(!0)),e.setLocalMatrixDirty()},e}();t.Entity3DValue=p,t.staticInitAnimationClipBinding=function(e){r=e},function(e){e[e.Ignore=0]="Ignore",e[e.Refresh=1]="Refresh"}(i||(i={})),function(e){e[e.Keep=0]="Keep",e[e.Refresh=1]="Refresh",e[e.WriteBack=2]="WriteBack"}(o||(o={})),function(e){e[e.Keep=0]="Keep",e[e.Clear=1]="Clear",e[e.WriteBack=2]="WriteBack"}(a||(a={}));var h=function(){function e(e,t,n,i,o,a,s,c){for(var u=Math.min(i.length-o,a),l=Math.min(e.length-t,n),d=new ArrayBuffer(4*(u+l)),f=new Uint32Array(d),p=0,h=t;h<l;h++)f[p++]=e[h]?e[h].id:4294967295;for(h=o;h<u;h++)f[p++]=null===i[h]?4294967295:"number"==typeof i[h]?i[h]:i[h].id;this.nativeObject=r.worker.createAnimationClipBinding(d,0,l,u,s,c.id)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.nativeObject.id},enumerable:!1,configurable:!0}),e.prototype.updateBinding=function(e,t,n,r,i,o,a,s,c,u){for(var l=Math.min(r.length-i,o),d=Math.min(e.length-t,n),f=new ArrayBuffer(4*(l+d)),p=new Uint32Array(f),h=0,g=t;g<d;g++)p[h++]=e[g]?e[g].id:4294967295;for(g=i;g<l;g++)p[h++]=null===r[g]?4294967295:"number"==typeof r[g]?r[g]:r[g].id;return this.nativeObject.updateBinding(f,0,d,l,a,s,c,u.id)},e.prototype.writeDefaultValues=function(){this.nativeObject.writeDefaultValues()},e}();t.AnimationClipBinding=h;var g=function(){function e(e,t,n,r,o,a,s,u){this.clipBinding=new Map,this.defaultValues=new Map,this.id=c.requestAccelerateObjectID(),this._root=null,this.clipModels=new Map,this.entities=new Map;var l=[];if(this._updateBinding(e,t,n,r,o,a,l)&&s===i.Refresh)for(var d=0,f=l;d<f.length;d++){var h=f[d];this.defaultValues.set(h,new p(h))}}return e.prototype.updateBinding=function(e,t,n,r,s,c,u,l,d,f){var h=this,g=[];if(!this._updateBinding(e,t,n,r,s,c,g))return!1;var v=this.defaultValues;this.defaultValues=new Map;var _,y,m=u;m&a.WriteBack?(y=!0,_=m&~a.WriteBack):(y=!1,_=m);var b,w,O=l;O&o.WriteBack?(w=!0,b=O&~o.WriteBack):(w=!1,b=O);for(var E=d,S=new Set,T=new Set,I=new Set,A=0,C=g;A<C.length;A++){var k=C[A];v.has(k)?S.add(k):T.add(k)}return v.forEach((function(e,t){g.indexOf(t)<0&&I.add(t)})),y&&I.forEach((function(e){v.get(e).syncValue(e)})),_===a.Keep&&I.forEach((function(e){var t=v.get(e);h.defaultValues.set(e,t)})),b===o.Refresh&&S.forEach((function(e){h.defaultValues.set(e,new p(e))})),w&&S.forEach((function(e){v.get(e).syncValue(e)})),b===o.Keep&&S.forEach((function(e){var t=v.get(e);h.defaultValues.set(e,t)})),E===i.Refresh&&T.forEach((function(e){h.defaultValues.set(e,new p(e))})),!0},e.prototype.writeDefaultValues=function(){this.defaultValues.forEach((function(e,t){e.syncValue(t)}))},e.prototype.getRoot=function(){return this._root},e.prototype._getRoot=function(){if(!this.clipBinding.size)return null;var e=null;return this.clipBinding.forEach((function(t,n){!e&&t.length&&(e=t[0])})),e},e.prototype._updateBinding=function(e,t,n,r,i,o,a){n=Math.min(e.length-t,n),o=Math.min(r.length-i,o);for(var s=0,c=new Map,u=t;u<n;u++){var l=e[u],d=[],f=r[s++];if("number"!=typeof f)return!1;if(s>=o)return!1;for(var p=0;p<f;p++){if(s>=o)return!1;if("number"==typeof(v=r[i+s]))return!1;v?(a.push(v),d.push(v)):d.push(null),s++}c.set(l,d)}this.clipBinding=c,this.entities.clear();for(var h=0,g=a;h<g.length;h++){var v=g[h];this.entities.set(v.id,v)}return this._root=this._getRoot(),!0},e}();t.AnimationClipBindingMock=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogicManager=void 0;var r=n(1),i=n(32),o=r.__importDefault(n(44)),a=r.__importDefault(n(61)),s=r.__importDefault(n(45)),c=n(6),u=n(33),l=r.__importDefault(n(66)),d=r.__importStar(n(48)),f=r.__importStar(n(49)),p=r.__importDefault(n(67)),h=r.__importDefault(n(69)),g=r.__importStar(n(50)),v=r.__importDefault(n(51)),_=r.__importDefault(n(52)),y=r.__importDefault(n(70)),m=r.__importDefault(n(72)),b=r.__importDefault(n(73)),w=r.__importDefault(n(74)),O=r.__importStar(n(35)),E=r.__importDefault(n(75)),S=r.__importDefault(n(47)),T=n(8),I=r.__importDefault(n(58)),A=r.__importDefault(n(46)),C=n(64),k=n(60),x=n(62),P=function(){function e(e,t){this.config=t,this.entity2mock=new WeakMap,this.entityGroup2mock=new WeakMap,this.cullableComponent2mock=new WeakMap,this._entitySystem=null,this._modelMap={},this._dataBufferMap={},this.worker=e,this.poolManager=new I.default(this.worker),d.staticInitEntity2D(this),f.staticInitEntity3D(this),g.staticInitEntityGroup(this),O.staticInitCullableComponent(this),i.staticInitNativeObject(this.worker),k.staticInitAnimatorController(this),C.staticInitAnimationClipBinding(this),x.staticInitAnimatorControllerLayerBlend(this.worker)}return e.prototype.createEntity3D=function(){var e=this.poolManager.getEntity3D(),t=new f.default(e,this.poolManager.entity3DPools);t.isUsing=!0,this.entitySetActive(t,!0);var n=new h.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,n),t},e.prototype.createEntity2D=function(){var e=this.poolManager.getEntity2D(),t=new d.default(e,this.poolManager.entity2DPools);t.isUsing=!0,this.entitySetActive(t,!0);var n=new p.default(t.float32View,t.uint32View,t.entityOffset);return this.entity2mock.set(t,n),t},e.prototype.createEntity2DGroup=function(e){var t=this.worker.createEntity(c.enumEntityType.Entity2D,e),n=new v.default(t,e),r=new y.default(n);return this.entityGroup2mock.set(n,r),n},e.prototype.createEntity3DGroup=function(e){var t=this.worker.createEntity(c.enumEntityType.Entity3D,e),n=new _.default(t,e),r=new m.default(n);return this.entityGroup2mock.set(n,r),n},e.prototype.createCullableComponent=function(){var e=this.poolManager.getCullableComponent(),t=new O.default(e,this.poolManager.cullableComponentPools);t.isUsing=!0,t.setActive(!0);var n=new E.default(t);return this.cullableComponent2mock.set(t,n),t},e.prototype.createAnimatorComponent=function(){return new b.default},e.prototype.createSkinnedSkeletonComponent=function(){return new w.default},e.prototype.createDataModel=function(e){var t=u.dataModel2CtorMock[e];if(!t)return console.warn("can not support dataModel ["+e+"]"),null;var n=T.requestAccelerateObjectID(),r=new t(n);return this._modelMap[n]=r,r},e.prototype.createDataBuffer=function(e){var t=T.requestAccelerateObjectID(),n={buffer:new ArrayBuffer(e),id:t,byteSize:e},r=new S.default(n);return this._dataBufferMap[t]=r,r},e.prototype.createAnimationClipBinding=function(e,t,n,r,i,o,a,s){return new C.AnimationClipBindingMock(e,t,n,r,i,o,a,s)},e.prototype.createAnimatorController=function(e){return new k.AnimatorControllerMock(e)},e.prototype.createAnimatorControllerStateModel=function(e){return new x.AnimatorControllerStateMock(e)},e.prototype.entityAddChild=function(e,t){var n=this.entity2mock.get(e),r=this.entity2mock.get(t);n&&r&&n.addChild(r)},e.prototype.entityAddChildAtIndex=function(e,t,n){var r=this.entity2mock.get(e),i=this.entity2mock.get(t);r&&i&&r.addChildAtIndex(i,n)},e.prototype.entityRemoveFromParent=function(e){var t=this.entity2mock.get(e);t&&t.removeFromParent()},e.prototype.entityDestroy=function(e){var t=this.entity2mock.get(e);t&&t.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof f.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityClear=function(e){var t=this.entity2mock.get(e);t&&t.clear()},e.prototype.entitySetActive=function(e,t){var n=this.entity2mock.get(e);n&&(n.active=t)},e.prototype.entitySetLocalMatrixDirty=function(e){var t=this.entity2mock.get(e);t&&t.setLocalMatrixDirty()},e.prototype.entitiesSetLocalMatrixDirty=function(e,t){for(var n=0;n<t;n++){var r=e[n],i=this.entity2mock.get(r);i&&i.setLocalMatrixDirty()}},e.prototype.entitiesSetLocalMatrixDirtyById=function(e,t){},e.prototype.componentBindEntity=function(e,t){var n=this.cullableComponent2mock.get(e),r=this.entity2mock.get(t);n&&r&&n.bindEntity(r)},e.prototype.componentUnbindEntity=function(e){var t=this.cullableComponent2mock.get(e);t&&t.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntity=function(e){var t=this.entity2mock.get(e);t&&(t instanceof h.default?this._getEntitySystem().setEntityRoot3D(t):this._getEntitySystem().setEntityRoot2D(t))},e.prototype.entityGroupAddChild=function(e,t,n,r){var i,o;e instanceof g.default?i=this.entityGroup2mock.get(e).entitis[n]:i=this.entity2mock.get(e);t instanceof g.default?o=this.entityGroup2mock.get(t).entitis[r]:o=this.entity2mock.get(t);i&&o&&i.addChild(o)},e.prototype.entityGroupAddChildAtIndex=function(e,t,n,r,i){var o,a;e instanceof g.default?o=this.entityGroup2mock.get(e).entitis[r]:o=this.entity2mock.get(e);t instanceof g.default?a=this.entityGroup2mock.get(t).entitis[i]:a=this.entity2mock.get(t);o&&a&&o.addChildAtIndex(a,n)},e.prototype.entityGroupRemoveFromParent=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.removeFromParent()},e.prototype.entityGroupDestroy=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.destroy(),e instanceof d.default?this.poolManager.disposeEntity2D(e):e instanceof f.default&&this.poolManager.disposeEntity3D(e)},e.prototype.entityGroupClear=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.clear()},e.prototype.entityGroupSetActive=function(e,t,n){var r;e instanceof g.default?r=this.entityGroup2mock.get(e).entitis[n]:r=this.entity2mock.get(e);r&&(r.active=t)},e.prototype.entityGroupSetLocalMatrixDirty=function(e,t){var n;e instanceof g.default?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&n.setLocalMatrixDirty()},e.prototype.entityGroupSetLocalMatrixDirtyAll=function(e){var t=this.entityGroup2mock.get(e);t&&t.setLocalMatrixDirtyAll()},e.prototype.componentBindEntityWithIndex=function(e,t,n,r){var i,o=this.cullableComponent2mock.get(e);t instanceof g.default?i=this.entityGroup2mock.get(t).entitis[r]:i=this.entity2mock.get(t);o&&i&&o.bindEntity(i)},e.prototype.componentUnbindEntityWithIndex=function(e,t){var n=this.cullableComponent2mock.get(e);n&&n.unbindEntity(),this.poolManager.disposeCullableComponent(e)},e.prototype.setRootEntityGroup=function(e,t){var n;(void 0===t&&(t=0),e instanceof g.default)?n=this.entityGroup2mock.get(e).entitis[t]:n=this.entity2mock.get(e);n&&(n instanceof h.default?this._getEntitySystem().setEntityRoot3D(n):this._getEntitySystem().setEntityRoot2D(n))},e.prototype.refreshWorldTransform=function(){this._getEntitySystem().refreshWorldTransform()},e.prototype.cullWithCameraPerspective=function(e,t,n,r,i,o,a,c,u,l,d,f,p,h){var g=this._getEntitySystem().root3D,v=[],_=[],y=s.default.createFromNumber(t,n,r),m=s.default.createFromNumber(i,o,a),b=s.default.createFromNumber(c,u,l),w=p*Math.tan(d/2),O=w*f,E=y.sub(m).normalize(),S=b.cross(E).normalize(),T=E.cross(S),I=y,A=I.sub(E.scale(p)),C=I.sub(E.scale(h)),k=[];k[0]={},k[0].point=A,k[0].normal=E.scale(-1),k[0].distance=k[0].point.dot(k[0].normal.scale(-1)),k[1]={},k[1].point=C,k[1].normal=E,k[1].distance=k[1].point.dot(k[1].normal.scale(-1)),k[2]={},k[2].point=A.add(T.scale(w)),k[2].normal=k[2].point.sub(I).normalize().cross(S),k[2].distance=k[2].point.dot(k[2].normal.scale(-1)),k[3]={},k[3].point=A.sub(T.scale(w)),k[3].normal=S.cross(k[3].point.sub(I).normalize()),k[3].distance=k[3].point.dot(k[3].normal.scale(-1)),k[4]={},k[4].point=A.sub(S.scale(O)),k[4].normal=k[4].point.sub(I).normalize().cross(T),k[4].distance=k[4].point.dot(k[4].normal.scale(-1)),k[5]={},k[5].point=A.add(S.scale(O)),k[5].normal=T.cross(k[5].point.sub(I).normalize()),k[5].distance=k[5].point.dot(k[5].normal.scale(-1)),g&&g.travelChild((function(t){for(var n=0,r=t._cullableComps;n<r.length;n++){var i=r[n];if(!i||!i.active||i.entity!==t||!t.active)return!0;if(!(e&i.cullMask))return!0;var o=!1,a=t.worldMatrix,c=a._raw,u=a._offset,l=s.default.createFromNumber(c[u+0+0],c[u+0+1],c[u+0+2]).length(),d=s.default.createFromNumber(c[u+4+0],c[u+4+1],c[u+4+2]).length(),f=s.default.createFromNumber(c[u+8+0],c[u+8+1],c[u+8+2]).length(),p=l>d?l:d;p=p>f?p:f;for(var h=a.transformPoint(s.default.createFromTypedArray(i.boundingBallCenter)),g=i.boundingBallRadius*p,y=0;y<6;y++){if(k[y].normal.dot(h)+k[y].distance<-g){o=!0;break}}o||(v.push(i._componetModel.id),_.push(0))}}));var x={objects:new Uint32Array(v).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(_).buffer};return x?{hash:x.hash,objects:new Uint32Array(x.objects),distances:new Float32Array(x.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.cullWithCameraOrthographic=function(e,t,n,r,i,o,a,c,u,l,d,f,p,h,g,v){var _=this._getEntitySystem().root3D,y=[],m=[],b=s.default.createFromNumber(t,n,r),w=s.default.createFromNumber(i,o,a),O=s.default.createFromNumber(c,u,l),E=b.sub(w).normalize(),S=O.cross(E).normalize(),T=E.cross(S),I=b,A=I.sub(E.scale(g)),C=I.sub(E.scale(v)),k=[];k[0]={},k[0].point=A,k[0].normal=E.scale(-1),k[0].distance=k[0].point.dot(k[0].normal.scale(-1)),k[1]={},k[1].point=C,k[1].normal=E,k[1].distance=k[1].point.dot(k[1].normal.scale(-1)),k[2]={},k[2].point=A.add(T.scale(h)),k[2].normal=T.scale(-1),k[2].distance=k[2].point.dot(k[2].normal.scale(-1)),k[3]={},k[3].point=A.add(T.scale(p)),k[3].normal=T,k[3].distance=k[3].point.dot(k[3].normal.scale(-1)),k[4]={},k[4].point=A.add(S.scale(d)),k[4].normal=S,k[4].distance=k[4].point.dot(k[4].normal.scale(-1)),k[5]={},k[5].point=A.add(S.scale(f)),k[5].normal=S.scale(-1),k[5].distance=k[5].point.dot(k[5].normal.scale(-1)),_&&_.travelChild((function(t){for(var n=0,r=t._cullableComps;n<r.length;n++){var i=r[n];if(!i||!i.active||i.entity!==t||!t.active)return!0;if(!(e&i.cullMask))return!0;var o=!1,a=t.worldMatrix,c=a._raw,u=a._offset,l=s.default.createFromNumber(c[u+0+0],c[u+0+1],c[u+0+2]).length(),d=s.default.createFromNumber(c[u+4+0],c[u+4+1],c[u+4+2]).length(),f=s.default.createFromNumber(c[u+8+0],c[u+8+1],c[u+8+2]).length(),p=l>d?l:d;p=p>f?p:f;for(var h=a.transformPoint(s.default.createFromTypedArray(i.boundingBallCenter)),g=i.boundingBallRadius*p,v=0;v<6;v++){if(k[v].normal.dot(h)+k[v].distance<-g){o=!0;break}}o||(y.push(i._componetModel.id),m.push(0))}}));var x={objects:new Uint32Array(y).buffer,hash:Math.ceil(1e6*Math.random()),distances:new Float32Array(m).buffer};return x?{hash:x.hash,objects:new Uint32Array(x.objects),distances:new Float32Array(x.distances)}:{hash:0,objects:[],distances:[]}},e.prototype.SyncValuesToEntity3D=function(e,t){null!==e.tx&&(t.float32View[t.localPositionOffset]=e.tx),null!==e.ty&&(t.float32View[t.localPositionOffset+1]=e.ty),null!==e.tz&&(t.float32View[t.localPositionOffset+2]=e.tz),null!==e.sx&&(t.float32View[t.localScaleOffset+0]=e.sx),null!==e.sy&&(t.float32View[t.localScaleOffset+1]=e.sy),null!==e.sz&&(t.float32View[t.localScaleOffset+2]=e.sz),null!==e.rw?(t.setUsingEuler(!1),t.float32View[t.localQuaternionOffset+0]=e.rx,t.float32View[t.localQuaternionOffset+1]=e.ry,t.float32View[t.localQuaternionOffset+2]=e.rz,t.float32View[t.localQuaternionOffset+3]=e.rw):null!==e.rx||null!==e.ry||e.rz,this.entitySetLocalMatrixDirty(t)},e.prototype.updateAnimator=function(e){if(this._updateAnimator(e),e){var t=this.entity2mock.get(e.culEntity3DTreeNode);t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.updateAnimatorController=function(e){if(e&&e.binding&&e.binding.getRoot()){e.update();var t=this.entity2mock.get(e.binding.getRoot());t&&this.computeRootWorldMatrixRecursive(t)}},e.prototype.computeRootWorldMatrixRecursive=function(e){var t=e.parent;t?this.computeRootWorldMatrixRecursive(t):e!=this._getEntitySystem().root3D&&e._computeWorldMatrixRecursive(!1)},e.prototype._updateAnimator=function(e){if(e){for(var t=[],n=0,i=0;i<e.animationClipCount;i++){var o=e.getAnimationParamater(i);if(void 0!==o.percentage){var s=r.__assign({},o);s.nodeIndex=n,t.push(s)}n+=this._modelMap[o.animationClipId].nodesLength}if(0!==t.length){var c=this._modelMap[t[0].animationClipId];if(void 0!==c)if(1===t.length){var u=c.evaluate(t[0].frameIndex);for(var i in u){if(g=e.getEntity(Number(i)+t[0].nodeIndex)){var l=u[i];delete(_=r.__assign({},u[i])).use_quaternion,this.SyncValuesToEntity3D(l,g)}}}else{var d={},f=e,p=t;for(i=0;i<p.length;i++)if(this._modelMap[p[i].animationClipId]){u=this._modelMap[p[i].animationClipId].evaluate(p[i].frameIndex);for(var h in u){var g;if(g=f.getEntity(Number(h)+p[i].nodeIndex)){var v=g.id,_=r.__assign({},u[h]),y=r.__assign({},u[h]);for(var m in delete _.use_quaternion,delete y.use_quaternion,_)null!==_[m]&&(y[m]=p[i].percentage);d[v]||(d[v]={entity:g,transforms:[],percentages:[]}),d[v].transforms.push(_),d[v].percentages.push(y)}}}else console.log("Fail to get native animation-clip resource.");var b={},w={};for(var v in d){b[v]={tx:[],ty:[],tz:[],sx:[],sy:[],sz:[],rx:[],ry:[],rz:[],rw:[]};var O=d[v].transforms.length;for(i=0;i<O;i++){_=d[v].transforms[i],y=d[v].percentages[i];for(var E in y)null!==y[E]&&b[v][E].push({value:_[E],percentage:y[E]})}}for(var v in b){w[v]={tx:null,ty:null,tz:null,sx:null,sy:null,sz:null,rx:null,ry:null,rz:null,rw:null,use_quaternion:!0};var S=b[v];for(var E in S)if(S[E].length&&["tx","ty","tz","sx","sy","sz"].indexOf(E)>=0){null===w[v][E]&&(w[v][E]=0);for(var T=0;T<S[E].length;T++){var I=S[E][T];w[v][E]+=I.value*I.percentage}}if(S.rx.length&&S.rx.length===S.ry.length&&S.rx.length===S.rz.length&&S.rx.length===S.rw.length)if(2!==S.rx.length){for(var C=new A.default,k=0;k<S.rx.length;k++){var x=S.rx[k].percentage,P=A.default.createFromNumber(S.rx[k].value,S.ry[k].value,S.rz[k].value,S.rw[k].value);C.add(C.dot(P)<0?P.scale(-x):P.scale(x),C)}C.scale(1/Math.sqrt(C.dot(C)),C),w[v].rx=C.x,w[v].ry=C.y,w[v].rz=C.z,w[v].rw=C.w}else{var D=new a.default;D.setValue(S.rx[0].value,S.ry[0].value,S.rz[0].value,S.rw[0].value);var R=new a.default;R.setValue(S.rx[1].value,S.ry[1].value,S.rz[1].value,S.rw[1].value),D.slerp(R,S.rx[1].percentage/(S.rx[0].percentage+S.rx[1].percentage),D),w[v].rx=D.x,w[v].ry=D.y,w[v].rz=D.z,w[v].rw=D.w}}for(var v in w)this.SyncValuesToEntity3D(w[v],d[v].entity)}else console.log("AnimationClipModel not found")}}},e.prototype.updateAnimators=function(e){for(var t=0;t<e.length;t++)this.updateAnimator(e[t])},e.prototype.updateAnimatorControllers=function(e,t){for(var n=0;n<t;n++)this.updateAnimatorController(e[n])},e.prototype.updateSkinningMatrix=function(e){if(e)for(var t=this._modelMap[e.getBoneInverseModelId()],n=0;n<e.getBoneNum();n++){var r=e.getBoneIndices(n),i=e.getBoneEntity(n),a=o.default.createFromTypedArray(i.float32View,i.worldMatrixOffset),s=t.inverseMatrixs[r];a.multiply(s,e.outputBoneInverseMatrixs[n])}},e.prototype.updateSkinningMatrices=function(e){for(var t=0;t<e.length;t++)this.updateSkinningMatrix(e[t])},e.prototype.bindEntitiesToBones=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t[n],o=this.entity2mock.get(r),a=this.entity2mock.get(i);o&&a&&(o._linkBoneEntity=a,a._linkEntity=o)}},e.prototype.unbindEntitiesFromBones=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.entity2mock.get(n);r&&r._linkBoneEntity&&(r._linkBoneEntity._linkEntity=null,r._linkEntity=null)}},e.prototype.bindEntitiesToBonesWithIndex=function(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i],a=t[i],s=this.entity2mock.get(o),c=this.entity2mock.get(a);s&&c&&(s._linkBoneEntity=c,c._linkEntity=s)}},e.prototype.unbindEntitiesFromBonesWithIndex=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=this.entity2mock.get(r);i&&i._linkBoneEntity&&(i._linkBoneEntity._linkEntity=null,i._linkEntity=null)}},e.prototype._getEntitySystem=function(){return this._entitySystem||(this._entitySystem=new l.default(this)),this._entitySystem},e.prototype.frameStart=function(){},e.prototype.setEntityName=function(e,t){},e}();t.LogicManager=P},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.root3D=null,this.root3Ds=[],this.root2Ds=[],this._manager=e}return e.prototype.refreshWorldTransform=function(){this.root3D._computeWorldMatrixRecursive(!0),this.root2Ds.forEach((function(e){e._computeWorldMatrixRecursive(!0)}))},e.prototype.setEntityRoot3D=function(e){this.root3D=e,this.root3Ds.push(e)},e.prototype.setEntityRoot2D=function(e){this.root2Ds.push(e)},e.prototype.entityAddChild=function(e,t){e.addChild(t)},e.prototype.entityAddChildAtIndex=function(e,t,n){e.addChildAtIndex(t,n)},e.prototype.entityRemoveFromParent=function(e){e.parent&&e.parent.removeChild(e)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(21)),o=r.__importDefault(n(22)),a=r.__importDefault(n(48)),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o._localMatrix=i.default.IDENTITY,o._raw=t,o._rawU32=n,o._offset=r,o.localRotationOffset=o._offset+a.default.OFFSET_ROTATION,o.localPositionOffset=o._offset+a.default.OFFSET_POSITION,o.localScaleOffset=o._offset+a.default.OFFSET_SCALE,o.worldMatrixOffset=o._offset+a.default.OFFSET_WORLDMATRIX,o}return r.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=o.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localRotation",{get:function(){return this._raw[this.localRotationOffset]},set:function(e){this._raw[this.localRotationOffset]=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=o.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=i.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),n=e||t;if(n){var r=this.parent;r?r.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset)}this._isWorldMatrixDirty=!0;for(var i=0,o=this.children;i<o.length;i++){var a=o[i];a.active&&a._computeWorldMatrixRecursive(n)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){var t=this.localPosition,n=this.localRotation,r=this.localScale;i.default.IDENTITY.translate(t.x,t.y,this._localMatrix).rotate(n,this._localMatrix).scale(r.x,r.y,this._localMatrix),this._isLocalMatrixDirty=!1}return e},t}(r.__importDefault(n(68)).default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.children=[],this.parent=null,this.components=[],this.id=0,this.active=!0,this._isLocalMatrixDirty=!1,this._isWorldMatrixDirty=!1}return e.prototype.setLocalMatrixDirty=function(){this._isLocalMatrixDirty=!0},e.prototype._computeWorldMatrixRecursive=function(e){},e.prototype.bindComponet=function(e){this.components.push(e),e.entity=this,e._onAdd()},e.prototype.unbindComponent=function(e){var t=this.components.indexOf(e);(e.entity||-1!==t)&&(this.components.splice(t,1),e.entity=null,e._onDestroy())},e.prototype.getComponent=function(e){var t=this.getAllComponents(e);return t.length?t[0]:void 0},e.prototype.getAllComponents=function(e){return this.components.filter((function(t){return t instanceof e}))||[]},e.prototype.travelChild=function(e){e(this);for(var t=0;t<this.children.length;t++)this.children[t].travelChild(e)},e.prototype.addChild=function(e){this.addChildAtIndex(e,this.children.length)},e.prototype.addChildAtIndex=function(e,t){e.parent&&e.parent.removeChild(e),-1===this.children.indexOf(e)&&(t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),e.parent=this)},e.prototype.removeChild=function(e){var t=this.children.indexOf(e);t>-1&&this.children.splice(t,1)},e.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},e.prototype.destroy=function(){for(var e=0,t=this.components;e<t.length;e++){var n=t[e];n._onDestroy(),n.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null},e.prototype.clear=function(){for(var e=0,t=this.components;e<t.length;e++){var n=t[e];n._onDestroy(),n.entity=null}this.components=[],this.parent&&this.parent.removeChild(this),this.parent=null;for(var r=0,i=this.children;r<i.length;r++){i[r].clear()}},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(44)),o=r.__importDefault(n(61)),a=r.__importDefault(n(45)),s=r.__importDefault(n(68)),c=r.__importDefault(n(49)),u=function(e){function t(t,n,r){var o=e.call(this)||this;return o._localMatrix=i.default.IDENTITY,o._cullableComps=[],o._linkEntity=null,o._linkBoneEntity=null,o._raw=t,o._rawU32=n,o._offset=r,o.localRotationTypeOffset=o._offset+c.default.OFFSET_ROTATIONTYPE,o.localQuaternionOffset=o._offset+c.default.OFFSET_ROTATION,o.localPositionOffset=o._offset+c.default.OFFSET_POSITION,o.localScaleOffset=o._offset+c.default.OFFSET_SCALE,o.worldMatrixOffset=o._offset+c.default.OFFSET_WORLDMATRIX,o}return r.__extends(t,e),Object.defineProperty(t.prototype,"localPosition",{get:function(){return this._localPosition||(this._localPosition=a.default.createFromTypedArray(this._raw,this.localPositionOffset)),this._localPosition},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localQuaternion",{get:function(){return this._localQuaternion||(this._localQuaternion=new o.default(this._raw,this.localQuaternionOffset)),this._localQuaternion},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localScale",{get:function(){return this._localScale||(this._localScale=a.default.createFromTypedArray(this._raw,this.localScaleOffset)),this._localScale},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldMatrix",{get:function(){return this._worldMatrix||(this._worldMatrix=i.default.createFromTypedArray(this._raw,this.worldMatrixOffset)),this._worldMatrix},enumerable:!1,configurable:!0}),t.prototype._refreshWorldTransform=function(){var e=this.parent;e&&e._refreshWorldTransform();this._culLocalTransform();e?e.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._isWorldMatrixDirty=!0},t.prototype._computeWorldMatrixRecursive=function(e){var t=this._culLocalTransform(),n=e||t;if(n){var r=this.parent;r?r.worldMatrix.multiply(this._localMatrix,this.worldMatrix):this.worldMatrix._raw.set(this._localMatrix._raw,this.worldMatrix._offset),this._linkEntity&&this._SyncTransform(),this._isWorldMatrixDirty=!0}for(var i=0,o=this.children;i<o.length;i++){var a=o[i];a.active&&a._computeWorldMatrixRecursive(n)}},t.prototype._culLocalTransform=function(){var e=this._isLocalMatrixDirty;if(e){if(this.isUsingEuler());else{var t=this.localPosition,n=this.localQuaternion,r=this.localScale;i.default.composeTQS(t,n,r,this._localMatrix)}this._isLocalMatrixDirty=!1}return e},t.prototype._SyncTransform=function(){var e=this.worldMatrix,t=a.default.ZERO,n=a.default.ZERO,r=i.default.IDENTITY;if(e.decomposeTransRotMatScale(t,r,n),this._linkEntity){this._linkEntity.localPosition.set(t),this._linkEntity.localScale.set(n);var s=o.default.createFromMatrix4(r);this._linkEntity.isUsingEuler()||this._linkEntity.localQuaternion.set(s),this._linkEntity._isLocalMatrixDirty=!0}},t.prototype.setUsingEuler=function(e){e?this._rawU32[this.localRotationTypeOffset]&=~c.default.DF_ROTATIONTYPE:this._rawU32[this.localRotationTypeOffset]|=c.default.DF_ROTATIONTYPE},t.prototype.isUsingEuler=function(){return 0==(this._rawU32[this.localRotationTypeOffset]&c.default.DF_ROTATIONTYPE)},t}(s.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(67)),o=function(e){function t(t){var n=e.call(this,t)||this;n.entitis=[];for(var r=0;r<t.entityLength;r++){var o=new i.default(t._f32view,t._u32view,r*t.objectSize);n.entitis.push(o)}return n}return r.__extends(t,e),t}(r.__importDefault(n(71)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.entitis=[]}return e.prototype.setLocalMatrixDirtyAll=function(){for(var e=0;e<this.entitis.length;e++){this.entitis.length[e].setLocalMatrixDirty()}},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(69)),o=function(e){function t(t){var n=e.call(this,t)||this;n.entitis=[];for(var r=0;r<t.entityLength;r++){var o=new i.default(t._f32view,t._u32view,r*t.objectSize);n.entitis.push(o)}return n}return r.__extends(t,e),t}(r.__importDefault(n(71)).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this._animationClipCount=0,this._nodeCount=0,this._animationClipModels=[],this._frameIndexs=[],this._blendWeight=[],this._entityIds={}}return e.prototype._getNeedMemorySize=function(){return 4*this.nodeCount*this.animationClipCount},Object.defineProperty(e.prototype,"animationClipCount",{get:function(){return this._animationClipCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeCount",{get:function(){return this._nodeCount},enumerable:!1,configurable:!0}),e.prototype.getAnimationParamater=function(e){return{animationClipId:this._animationClipModels[e].id,frameIndex:this._frameIndexs[e],percentage:this._blendWeight[e]}},e.prototype.bindAnimations=function(e,t,n){this._entityIds={},this._animationClipModels=e,this._frameIndexs=new Array(e.length),this._blendWeight=new Array(e.length);var r=t.length;for(var i in t)r+=t[i].length;this._animationClipCount=e.length,this._nodeCount=r;var o,a=0;for(i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)t[i][s]&&(this._entityIds[a+s]=t[i][s],o||(o=t[i][s]));a+=t[i].length}null!=n&&n.id?this.culEntity3DTreeNode=n:o&&(this.culEntity3DTreeNode=o)},e.prototype.setClipParams=function(e,t,n){this._frameIndexs[e]=t,this._blendWeight[e]=n},e.prototype.getEntity=function(e){return this._entityIds[e]},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1).__importDefault(n(44)),i=function(){function e(){this._boneInverseModelId=0,this._boneNum=0}return e.prototype._getNeedMemorySize=function(){return 18*this._boneNum*4},e.prototype.setBoneMatrix=function(e,t,n,i){if(n.length===t&&i.length===t){this._boneInverseModelId=e.id,this._boneNum=t,this.boneIndices=n,this.boneEntities=i;var o=new ArrayBuffer(this._getNeedMemorySize());this.outputBoneInverseMatrixs=new Array(t);for(var a=0;a<t;a++){var s=new Float32Array(o,2*t*4+64*a,16);this.outputBoneInverseMatrixs[a]=r.default.createFromTypedArray(s)}this._boneOffsetMatrices=new Float32Array(o,2*this._boneNum*4,16*this._boneNum)}else console.warn("setBoneMatrix Error")},e.prototype.getBoneNum=function(){return this._boneNum},e.prototype.getBoneInverseModelId=function(){return this._boneInverseModelId},e.prototype.getBoneIndices=function(e){return this.boneIndices[e]},e.prototype.getBoneEntity=function(e){return this.boneEntities[e]},e.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.entity=null,this._componetModel=e}return e.prototype.destroy=function(){if(this.entity){var e=this.entity,t=e.components.indexOf(this);t>-1&&(e.components.splice(t,1),this._onDestroy())}},e.prototype._onAdd=function(){this.entity._cullableComps.push(this)},e.prototype._onDestroy=function(){if(this.entity){var e=this.entity._cullableComps,t=e.indexOf(this);-1!==t&&e.splice(t,1)}},Object.defineProperty(e.prototype,"active",{get:function(){return this._componetModel.getActive()},set:function(e){this._componetModel.setActive(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cullMask",{get:function(){return this._componetModel.getCullMask()},set:function(e){this._componetModel.setCullMask(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallCenter",{get:function(){return this._componetModel.getBoundingBallCenter()},set:function(e){this._componetModel.setBoundingBallCenter(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"boundingBallRadius",{get:function(){return this._componetModel.getBoundingBallRadius()},set:function(e){this._componetModel.setBoundingBallRadius(e)},enumerable:!1,configurable:!0}),e.prototype.bindEntity=function(e){this.entity=e,this.entity.bindComponet(this)},e.prototype.unbindEntity=function(){this.entity.unbindComponent(this)},e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(44)),o=r.__importDefault(n(45)),a=r.__importDefault(n(61)),s=function(e,t){Object.defineProperty(e,t,{get:function(){return this._phys3D[t]},set:function(){}})};function c(e,t,n){return void 0===n&&(n=1e-5),Math.abs(e-t)<n}var u=function(){function e(e,t,n){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet=new Set,this._phys3D=e,this._ga=t,this._isNative=n,this._isNative||(this._mock=t._getMockAccelerateWorker())}return e.prototype.clear=function(){this._reverseBindMap=new WeakMap,this._bindMap=new WeakMap,this._colliderToEntityMap=new WeakMap,this._ccReverseBindMap=new WeakMap,this._ccbindMap=new WeakMap,this._colliderSet.clear()},e.prototype.bindRigidbodyToEntity=function(e,t,n){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var r=this._mock.entity2mock.get(t);this._bindMap.set(e,r),this._reverseBindMap.set(r,e)}},e.prototype.bindColliderToEntity=function(e,t){if(!this._isNative){var n=this._mock.entity2mock.get(t);this._colliderToEntityMap.set(e,n),this._colliderSet.add(e)}},e.prototype.bindCCToEntity=function(e,t){if(this._isNative)e.AttachToEntity(t._nativePool._nativeObj,t._nativeId);else{var n=this._mock.entity2mock.get(t);this._ccbindMap.set(e,n),this._ccReverseBindMap.set(n,e),this._alignCCWithEntity(e,n)}},e.prototype.unbindCCT=function(e){if(!this._isNative){var t=this._ccbindMap.get(e);t&&this._ccReverseBindMap.delete(t),this._ccbindMap.delete(e)}},e.prototype._alignCCWithEntity=function(e,t){var n=t.worldMatrix,r=o.default.ZERO,s=o.default.ZERO,c=i.default.IDENTITY;n.decomposeTransRotMatScale(r,c,s);a.default.createFromMatrix4(c);e.position=new this._phys3D.RawVec3f(r.x,r.y,r.z)},e.prototype._alignRigidbodyWithEntity=function(e,t){var n=t.worldMatrix,r=o.default.ZERO,s=o.default.ZERO,c=i.default.IDENTITY;n.decomposeTransRotMatScale(r,c,s);var u=a.default.createFromMatrix4(c);e.position=new this._phys3D.RawVec3f(r.x,r.y,r.z),e.rotation=new this._phys3D.RawQuaternion(u.x,u.y,u.z,u.w)},e.prototype.alignRigidbodyWithEntity=function(e,t){var n=this._mock.entity2mock.get(t);this._alignRigidbodyWithEntity(e,n)},e.prototype.unbindRigidbody=function(e){if(this._isNative)e.Detach();else{var t=this._bindMap.get(e);t&&this._reverseBindMap.delete(t),this._bindMap.delete(e)}},e.prototype.unbindCollider=function(e){this._isNative||(this._colliderSet.delete(e),this._colliderToEntityMap.delete(e))},e.prototype._syncForward=function(){this.syncEntityScaleToPhysic(),this.recursivelySyncForwardEntity(this._mock._getEntitySystem().root3D)},e.prototype.syncEntityScaleToPhysic=function(){var e=this;this._colliderSet.forEach((function(t){var n=e._colliderToEntityMap.get(t);if(n._isWorldMatrixDirty){var r=n.worldMatrix,a=o.default.ZERO,s=o.default.ZERO,u=i.default.IDENTITY;r.decomposeTransRotMatScale(a,u,s);var l=t.scale;c(l.x,s.x)&&c(l.y,s.y)&&c(l.z,s.z)||(t.scale=new e._phys3D.RawVec3f(s.x,s.y,s.z))}}))},e.prototype.recursivelySyncForwardEntity=function(e){var t=this;if(e._isWorldMatrixDirty){var n=this._ccReverseBindMap.get(e),r=this._reverseBindMap.get(e);n&&this._alignCCWithEntity(n,e),r&&this._alignRigidbodyWithEntity(r,e),e._isWorldMatrixDirty=!1}e.children.forEach((function(e){t.recursivelySyncForwardEntity(e)}))},e.prototype._syncBack=function(){this.recursivelySyncBackEntity(this._mock._getEntitySystem().root3D,!1)},e.prototype.recursivelySyncCCBackEntity=function(e,t){var n=this;if(void 0===t&&(t=!1),!this._isNative){var r=this._mock.entity2mock.get(e),s=this._ccReverseBindMap.get(r);if(s){var c=s.position,u=(s.center,r.parent?r.parent.worldMatrix:i.default.IDENTITY),l=o.default.createFromNumber(c.x,c.y,c.z),d=r.localQuaternion,f=i.default.composeTQS(l,d,r.localScale),p=u.inverse().multiply(f),h=i.default.IDENTITY;p.decomposeTransRotMatScale(r.localPosition,h,o.default.ONE);var g=a.default.createFromMatrix4(h);r.localQuaternion.set(g),r.worldMatrix.set(f),i.default.composeTQS(r.localPosition,r.localQuaternion,r.localScale,r._localMatrix),t=!0}else if(t){u=r.parent?r.parent.worldMatrix:i.default.IDENTITY;r.worldMatrix.set(u.multiply(r._localMatrix))}r.children.forEach((function(e){n.recursivelySyncBackEntity(e,t)}))}},e.prototype.recursivelySyncBackEntity=function(e,t){var n=this,r=this._reverseBindMap.get(e);if(r){var s=e.parent?e.parent.worldMatrix:i.default.IDENTITY,c=o.default.createFromNumber(r.position.x,r.position.y,r.position.z),u=a.default.createFromNumber(r.rotation.x,r.rotation.y,r.rotation.z,r.rotation.w),l=i.default.composeTQS(c,u,e.localScale),d=s.inverse().multiply(l),f=i.default.IDENTITY;d.decomposeTransRotMatScale(e.localPosition,f,o.default.ONE);var p=a.default.createFromMatrix4(f);e.localQuaternion.set(p),e.worldMatrix.set(l),i.default.composeTQS(e.localPosition,e.localQuaternion,e.localScale,e._localMatrix),t=!0}else if(t){s=e.parent?e.parent.worldMatrix:i.default.IDENTITY;e.worldMatrix.set(s.multiply(e._localMatrix))}e._isWorldMatrixDirty=!1,e._isLocalMatrixDirty=!1,e.children.forEach((function(e){n.recursivelySyncBackEntity(e,t)}))},Object.defineProperty(e.prototype,"PhysSystem",{get:function(){var e=this;return function(t){var n;return n=t?new e._phys3D.PhysSystem(t):new e._phys3D.PhysSystem,e._isNative||(n._Simulate=n.Simulate,n.Simulate=function(t){e._syncForward(),n._Simulate(t),e._syncBack()}),n}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"DynamicRigidbody",{get:function(){var e=this;return function(t){var n=new e._phys3D.DynamicRigidbody(t);return e._isNative||(n._isAttached=n.isAttached,n.isAttached=function(){return e._bindMap.has(n)}),n}},enumerable:!1,configurable:!0}),r.__decorate([s],e.prototype,"RawVec3f",void 0),r.__decorate([s],e.prototype,"RawVec2f",void 0),r.__decorate([s],e.prototype,"PhysMesh",void 0),r.__decorate([s],e.prototype,"Collider",void 0),r.__decorate([s],e.prototype,"MeshCollider",void 0),r.__decorate([s],e.prototype,"CombineMode",void 0),r.__decorate([s],e.prototype,"Material",void 0),r.__decorate([s],e.prototype,"CapsuleCollider",void 0),r.__decorate([s],e.prototype,"Joint",void 0),r.__decorate([s],e.prototype,"ContactPoint",void 0),r.__decorate([s],e.prototype,"Collision",void 0),r.__decorate([s],e.prototype,"SphereCollider",void 0),r.__decorate([s],e.prototype,"Bounds",void 0),r.__decorate([s],e.prototype,"StaticRigidbody",void 0),r.__decorate([s],e.prototype,"RawQuaternion",void 0),r.__decorate([s],e.prototype,"BoxCollider",void 0),r.__decorate([s],e.prototype,"RaycastHit",void 0),r.__decorate([s],e.prototype,"CharacterController",void 0),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1).__importDefault(n(78));t.default=function(){if(r)return r;var e=i.default("phye");return e&&e.Phys3D&&(r=e),r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pid=void 0;var r=null,i=null;t.pid=0;var o=!1;function a(e){var t=i.readFileSync(e),n=r("crypto").createHash("md5");return n.update(t),n.digest("hex")}function s(e,t){return!!t&&function(e,t){var n=window.Buffer.from(t,"base64"),i=r("crypto").createVerify("RSA-SHA1");return i.update(e),!!i.verify("-----BEGIN PUBLIC KEY-----\nMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCIfocuCk0FdG9zN9C6GqhJRVNG\n1FbJa8aUAZDawoCcwowIc/zMHRCl3srHUOQi3fjZpSObiVbvLidlWDSOw/rdBxbU\nG/4BqJFuIUQziCnqdRiCyYV2w9Z29/qNcKbr1gxmqXVgo0WRbkKlIFKGvSXFiVM3\nn49RQm2mgWsvqXn2vQIDAQAB\n-----END PUBLIC KEY-----",n)}(a(e),t)}function c(e){if(!r)return null;var t,n=!1,i=window.__devtoolsConfig||window.top.__devtoolsConfig||{};if(i.__runtimeLibConfigPath&&(t=i.__runtimeLibConfigPath,n=i.appConfig.isDev),!t)throw new Error("cannot find runtimeLibConfigPath");var o=r(t);if(!o)throw new Error("connot find lib config");if(!Object.keys(o).includes(e))throw new Error("the mod cannot be require");var c=o[e],u=c.path,l=c.signature,d=c.distMd5;if(!n){var f=!1;if(l?f=s(u,l):d&&(f=function(e,t){return!!t&&a(e)===t}(u,d)),!f)throw new Error("node addon is not safe!")}return r(u)}t.default=function(e){return console.log("require module: "+e),function(){if(!o&&(o=!0,window.__global&&window.__global.require))try{if(r=window.__global.require,delete window.__global.require,!(i=r("fs"))||!i.readFileSync)throw new Error;t.pid=r("process").pid}catch(e){i=null,r=null}}(),c(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.nativeValue2Native=void 0,t.nativeValue2Native=new WeakMap;var r=function(e){this._native=e,this.data=this._native.data,t.nativeValue2Native.set(this,e)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=r.__importDefault(n(81)),o=r.__importDefault(n(87)),a=r.__importStar(n(89)),s=r.__importDefault(n(82)),c=r.__importDefault(n(88)),u=r.__importDefault(n(83)),l=r.__importStar(n(84)),d=r.__importDefault(n(85)),f=r.__importDefault(n(86)),p=function(){function e(e,t){this._native=e,t.isRenderNative?(this.createRenderDraw=this.createRenderDrawAccelerate.bind(this),this.createCommandBuffer=this.createCommandBufferAccelerate.bind(this)):(this.createRenderDraw=this.createRenderDrawLocal.bind(this),this.createCommandBuffer=this.createCommandBufferLocal.bind(this))}return e.prototype.createCommandBufferAccelerate=function(e,t){return new o.default(this._native,e,t)},e.prototype.createCommandBufferLocal=function(){var e=this._native.createCommandBuffer();return new i.default(e)},e.prototype.createRect=function(e,t,n,r){var i=this._native.createRect(e,t,n,r);return new a.default(i)},e.prototype.createRenderDrawLocal=function(){var e=this._native.createRenderDraw();return new s.default(e)},e.prototype.createRenderDrawAccelerate=function(){var e=this._native.createRenderDraw();return new c.default(e)},e.prototype.createVertexLayout=function(e){var t=this._native.createVertexLayout(JSON.stringify(e));return new l.default(t)},e.prototype.createRenderView=function(e,t,n,r){var i=e||0,o=this._native.createView(i,t,a.rect2Native.get(n),a.rect2Native.get(r));return new u.default(o)},e.prototype.createBatchableVertexBuffer=function(e,t){var n=this._native.createBatchableVertexBuffer(e,l.vertexLayout2Native.get(t));return new d.default(n)},e.prototype.createBatchableIndexBuffer=function(e){var t=this._native.createBatchableIndexBuffer(e);return new f.default(t)},e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.commandBuffer2Native=void 0;var r=n(82);t.commandBuffer2Native=new WeakMap;var i=function(){function e(e){this._native=e,t.commandBuffer2Native.set(this,e)}return e.prototype.putRenderDraw=function(e){this._native.putRenderDraw(r.renderDraw2Native.get(e))},e.prototype.batchPutRenderDraw=function(e,t){t=void 0!==t?t:e.length;for(var n=0;n<t;n++){var i=e[n];this._native.putRenderDraw(r.renderDraw2Native.get(i))}},e.prototype.putSubCommandBuffer=function(e){this._native.putSubCommandBuffer(e._native)},e.prototype.reset=function(){this._native.reset()},e.prototype.execute=function(){this._native.execute()},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var r=n(1),i=n(79),o=r.__importDefault(n(18)),a=n(83),s=n(84),c=n(85),u=n(86);t.renderDraw2Native=new WeakMap;var l={raster:o.default.WRITE_SET(wgfx.EnumIndexType.UINT16,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumCullMode.BACK,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)|o.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumFaceWinding.CW,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT),stencilDepth:o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|o.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},d=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),Object.assign(this._native,l)}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._native.view=a.renderView2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._native.shader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._native.vertexLayout=s.vertexLayout2Native.get(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._native.indexBuffer=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._native.vertexBuffers=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];t.push(i.nativeValue2Native.get(o))}this._native.nativeValues=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._native.images=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._native.baseElement=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._native.numElements=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){this._native.applyUpdate()},e.prototype.setBlendOn=function(e){this._native.blend&=~o.default.BLEND_ENABLE_MASK,e&&(this._native.blend|=o.default.WRITE_SET(1,o.default.BLEND_ENABLE_MASK,o.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,n){this.setBlendModeSeparate(e,e,t,t,n,n)},e.prototype.setBlendModeSeparate=function(e,t,n,r,i,a){this._native.blend&=~(o.default.BLEND_OP_RGB_MASK|o.default.BLEND_OP_ALPHA_MASK|o.default.BLEND_SRC_FACTOR_RGB_MASK|o.default.BLEND_SRC_FACTOR_ALPHA_MASK|o.default.BLEND_DST_FACTOR_RGB_MASK|o.default.BLEND_DST_FACTOR_ALPHA_MASK),this._native.blend|=o.default.WRITE_SET(i,o.default.BLEND_OP_RGB_MASK,o.default.BLEND_OP_RGB_SHIFT)|o.default.WRITE_SET(a,o.default.BLEND_OP_ALPHA_MASK,o.default.BLEND_OP_ALPHA_SHIFT)|o.default.WRITE_SET(e,o.default.BLEND_SRC_FACTOR_RGB_MASK,o.default.BLEND_SRC_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(t,o.default.BLEND_SRC_FACTOR_ALPHA_MASK,o.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|o.default.WRITE_SET(n,o.default.BLEND_DST_FACTOR_RGB_MASK,o.default.BLEND_DST_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(r,o.default.BLEND_DST_FACTOR_ALPHA_MASK,o.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._native.blend&=~o.default.COLOR_WRITE_MASK,this._native.blend|=o.default.WRITE_SET(e,o.default.COLOR_WRITE_MASK,o.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._native.stencilDepth&=~o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._native.stencilDepth&=~o.default.DEPTH_COMPARE_FUNC_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._native.stencilDepth&=~o.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._native.stencilDepth|=o.default.WRITE_SET(1,o.default.STENCIL_ENABLE_FUNC_MASK,o.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._native.stencilDepth&=~o.default.STENCIL_WRITE_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_WRITE_MASK,o.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._native.stencilDepth&=~o.default.STENCIL_READ_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_READ_MASK,o.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._native.stencilDepth&=~o.default.STENCIL_REF_MASK,this._native.stencilDepth|=o.default.WRITE_SET(e,o.default.STENCIL_REF_MASK,o.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,n,r){var i=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(r,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT);this._native.stencilOpTest=i+(i<<16>>>0)},e.prototype.setStencilTestModeSeparate=function(e,t,n,r,i,a,s,c){this._native.stencilOpTest=0,this._native.stencilOpTest=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(r,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT)|o.default.WRITE_SET_SAFE(i,o.default.STENCIL_BACK_COMPARE_FUN_MASK,o.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(a,o.default.STENCIL_BACK_FAIL_OP_MASK,o.default.STENCIL_BACK_FAIL_OP_SHIFT)|o.default.WRITE_SET(s,o.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,o.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(c,o.default.STENCIL_BACK_PASS_OP_MASK,o.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._native.raster&=~o.default.CULL_MODE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._native.raster&=~o.default.FACE_WINDING_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._native.raster&=~o.default.PRIMITIVE_TYPE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._native.raster&=~o.default.INDEX_TYPE_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._native.raster&=~o.default.DEPTH_FORMAT_MASK,this._native.raster|=o.default.WRITE_SET(e,o.default.DEPTH_FORMAT_MASK,o.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._native.raster&=~(o.default.COLOR_ATTACHMENT_COUNT_MASK|o.default.COLOR_FORMAT_MASK),this._native.raster|=o.default.WRITE_SET(e,o.default.COLOR_FORMAT_MASK,o.default.COLOR_FORMAT_SHIFT)|o.default.WRITE_SET(t,o.default.COLOR_ATTACHMENT_COUNT_MASK,o.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._native.batchable=!1,this._native.renderDataDirty=!1},e.prototype.setBatchable=function(e,t,n){this._native.batchable=!0,this._native.renderDataDirty=!0,this._native.vertexBuffers=[c.batchableVertexBuffer2Native.get(e)],this._native.indexBuffer=u.batchableIndexBuffer2Native.get(t),this._native.worldTransform=i.nativeValue2Native.get(n)},e.prototype.setBatchableRenderDataDirty=function(){this._native.renderDataDirty=!0},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderView2Native=void 0,t.renderView2Native=new WeakMap;var r=function(e){this._native=e,t.renderView2Native.set(this,e)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertexLayout2Native=void 0,t.vertexLayout2Native=new WeakMap;var r=function(e){this._native=e,t.vertexLayout2Native.set(this,e)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableVertexBuffer2Native=void 0,t.batchableVertexBuffer2Native=new WeakMap;var r=function(e){this._native=e,this.data=e.data,t.batchableVertexBuffer2Native.set(this,e)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.batchableIndexBuffer2Native=void 0,t.batchableIndexBuffer2Native=new WeakMap;var r=function(e){this._native=e,this.data=e.data,t.batchableIndexBuffer2Native.set(this,e)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(88);!function(e){e[e.CommandRenderDraw=1]="CommandRenderDraw",e[e.CommandSubBuffer=2]="CommandSubBuffer"}(r||(r={}));var o=function(){function e(e,t,n){if(this._bufferSize=0,this._renderer=e,t&&0!=t||n&&0!=n){var r=t||0,i=n||0;this._initCommandBuffer(4*(2*r+2*i))}else this._initCommandBuffer(1024)}return e.prototype.batchPutRenderDraw=function(e,t){var n=2*(t=void 0!==t?t:e.length)*4;this._checkSize(n);for(var o=this._u32view[0]/4+1,a=0;a<t;a++){var s=e[a];this._u32view[o]=r.CommandRenderDraw,this._u32view[o+1]=i.renderDraw2Native.get(s).id,o+=2}for(var c=0,u=e;c<u.length;c++)s=u[c];this.setCommandSize(this._u32view[0]+n)},e.prototype.putSubCommandBuffer=function(e){this._checkSize(8);var t=this._u32view[0]/4+1;this._u32view[t]=r.CommandSubBuffer,this._u32view[t+1]=e._native.id,this.setCommandSize(this._u32view[0]+8)},e.prototype.reset=function(){this.setCommandSize(0)},e.prototype.execute=function(){this._native.execute()},e.prototype._initCommandBuffer=function(e){this._native=this._renderer.createCommandBuffer(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._extendCommandBuffer=function(e){this._native.extend(e),this._u32view=new Uint32Array(this._native.data,0,this._native.data.byteLength/4),this._bufferSize=e},e.prototype._checkSize=function(e){if(4+this._u32view[0]+e>this._bufferSize){var t=2*(4+this._u32view[0]+e);this._extendCommandBuffer(t)}},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.renderDraw2Native=void 0;var r=n(1),i=n(79),o=r.__importDefault(n(18)),a=n(83),s=n(84),c=n(85),u=n(86);t.renderDraw2Native=new WeakMap;var l=o.default.WRITE_SET(wgfx.EnumIndexType.UINT16,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumCullMode.BACK,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)|o.default.WRITE_SET(wgfx.EnumPrimitiveType.TRIANGLES,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)|o.default.WRITE_SET(wgfx.EnumFaceWinding.CW,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT),d=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT)|o.default.WRITE_SET(wgfx.EnumCompareFunc.LESS_EQUAL,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT),f=new ArrayBuffer(200),p=new Uint32Array(f);p[8]=l,p[7]=d;var h=function(){function e(e){this._native=e,t.renderDraw2Native.set(this,e),this._u8view=new Uint8Array(this._native.data),this._u32View=new Uint32Array(this._native.data),this.clear()}return Object.defineProperty(e.prototype,"renderView",{set:function(e){this._u32View[0]=a.renderView2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shader",{set:function(e){this._u32View[2]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexLayout",{set:function(e){this._u32View[3]=s.vertexLayout2Native.get(e).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexBuffer",{set:function(e){this._u32View[9]=e.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vertexBuffers",{set:function(e){this._u32View.fill(0,10,14);for(var t=0;t<e.length;t++)this._u32View[10+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nativeValues",{set:function(e){this._u32View.fill(0,14,30);for(var t=0;t<e.length;t++)this._u32View[14+t]=i.nativeValue2Native.get(e[t]).id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"images",{set:function(e){this._u32View.fill(0,30,46);for(var t=0;t<e.length;t++)this._u32View[30+t]=e[t].id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseElement",{set:function(e){this._u32View[46]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numElements",{set:function(e){this._u32View[47]=e},enumerable:!1,configurable:!0}),e.prototype.applyUpdate=function(){},e.prototype.clear=function(){this._u32View.set(p)},e.prototype.setBlendOn=function(e){this._u32View[4]&=~o.default.BLEND_ENABLE_MASK,e&&(this._u32View[4]|=o.default.WRITE_SET(1,o.default.BLEND_ENABLE_MASK,o.default.BLEND_ENABLE_SHIFT))},e.prototype.setBlendMode=function(e,t,n){this.setBlendModeSeparate(e,e,t,t,n,n)},e.prototype.setBlendModeSeparate=function(e,t,n,r,i,a){this._u32View[4]&=~(o.default.BLEND_OP_RGB_MASK|o.default.BLEND_OP_ALPHA_MASK|o.default.BLEND_SRC_FACTOR_RGB_MASK|o.default.BLEND_SRC_FACTOR_ALPHA_MASK|o.default.BLEND_DST_FACTOR_RGB_MASK|o.default.BLEND_DST_FACTOR_ALPHA_MASK),this._u32View[4]|=o.default.WRITE_SET(i,o.default.BLEND_OP_RGB_MASK,o.default.BLEND_OP_RGB_SHIFT)|o.default.WRITE_SET(a,o.default.BLEND_OP_ALPHA_MASK,o.default.BLEND_OP_ALPHA_SHIFT)|o.default.WRITE_SET(e,o.default.BLEND_SRC_FACTOR_RGB_MASK,o.default.BLEND_SRC_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(t,o.default.BLEND_SRC_FACTOR_ALPHA_MASK,o.default.BLEND_SRC_FACTOR_ALPHA_SHIFT)|o.default.WRITE_SET(n,o.default.BLEND_DST_FACTOR_RGB_MASK,o.default.BLEND_DST_FACTOR_RGB_SHIFT)|o.default.WRITE_SET(r,o.default.BLEND_DST_FACTOR_ALPHA_MASK,o.default.BLEND_DST_FACTOR_ALPHA_SHIFT)},e.prototype.setColorMask=function(e){this._u32View[4]&=~o.default.COLOR_WRITE_MASK,this._u32View[4]|=o.default.WRITE_SET(e,o.default.COLOR_WRITE_MASK,o.default.COLOR_WRITE_SHIFT)},e.prototype.setDepthWriteOn=function(e){this._u32View[7]&=~o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=o.default.WRITE_SET(1,o.default.DEPTH_WRITE_ENABLE_FUNC_MASK,o.default.DEPTH_WRITE_ENABLE_FUNC_SHIFT))},e.prototype.setDepthTest=function(e){this._u32View[7]&=~o.default.DEPTH_COMPARE_FUNC_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.DEPTH_COMPARE_FUNC_MASK,o.default.DEPTH_COMPARE_FUNC_SHIFT)},e.prototype.setStencilTestOn=function(e){this._u32View[7]&=~o.default.STENCIL_ENABLE_FUNC_MASK,e&&(this._u32View[7]|=o.default.WRITE_SET(1,o.default.STENCIL_ENABLE_FUNC_MASK,o.default.STENCIL_ENABLE_FUNC_SHIFT))},e.prototype.setStencilWriteMask=function(e){this._u32View[7]&=~o.default.STENCIL_WRITE_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_WRITE_MASK,o.default.STENCIL_WRITE_SHIFT)},e.prototype.setStencilReadMask=function(e){this._u32View[7]&=~o.default.STENCIL_READ_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_READ_MASK,o.default.STENCIL_READ_SHIFT)},e.prototype.setStencilRef=function(e){this._u32View[7]&=~o.default.STENCIL_REF_MASK,this._u32View[7]|=o.default.WRITE_SET(e,o.default.STENCIL_REF_MASK,o.default.STENCIL_REF_SHIFT)},e.prototype.setStencilTestMode=function(e,t,n,r){this.setStencilTestModeSeparate(e,t,n,r,e,t,n,r)},e.prototype.setStencilTestModeSeparate=function(e,t,n,r,i,a,s,c){this._u32View[6]=0,this._u32View[6]=o.default.WRITE_SET(e,o.default.STENCIL_FRONT_COMPARE_FUN_MASK,o.default.STENCIL_FRONT_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(t,o.default.STENCIL_FRONT_FAIL_OP_MASK,o.default.STENCIL_FRONT_FAIL_OP_SHIFT)|o.default.WRITE_SET(n,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_MASK,o.default.STENCIL_FRONT_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(r,o.default.STENCIL_FRONT_PASS_OP_MASK,o.default.STENCIL_FRONT_PASS_OP_SHIFT)|o.default.WRITE_SET(i,o.default.STENCIL_BACK_COMPARE_FUN_MASK,o.default.STENCIL_BACK_COMPARE_FUN_SHIFT)|o.default.WRITE_SET(a,o.default.STENCIL_BACK_FAIL_OP_MASK,o.default.STENCIL_BACK_FAIL_OP_SHIFT)|o.default.WRITE_SET(s,o.default.STENCIL_BACK_DEPTH_FAIL_OP_MASK,o.default.STENCIL_BACK_DEPTH_FAIL_OP_SHIFT)|o.default.WRITE_SET(c,o.default.STENCIL_BACK_PASS_OP_MASK,o.default.STENCIL_BACK_PASS_OP_SHIFT)},e.prototype.setCullMode=function(e){this._u32View[8]&=~o.default.CULL_MODE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.CULL_MODE_MASK,o.default.CULL_MODE_SHIFT)},e.prototype.setFaceWinding=function(e){this._u32View[8]&=~o.default.FACE_WINDING_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.FACE_WINDING_MASK,o.default.FACE_WINDING_SHIFT)},e.prototype.setPrimitiveType=function(e){this._u32View[8]&=~o.default.PRIMITIVE_TYPE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.PRIMITIVE_TYPE_MASK,o.default.PRIMITIVE_TYPE_SHIFT)},e.prototype.setIndexType=function(e){this._u32View[8]&=~o.default.INDEX_TYPE_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.INDEX_TYPE_MASK,o.default.INDEX_TYPE_SHIFT)},e.prototype.setPassDepthFormat=function(e){this._u32View[8]&=~o.default.DEPTH_FORMAT_MASK,this._u32View[8]|=o.default.WRITE_SET(e,o.default.DEPTH_FORMAT_MASK,o.default.DEPTH_FORMAT_SHIFT)},e.prototype.setPassColorFormat=function(e,t){this._u32View[8]&=~(o.default.COLOR_ATTACHMENT_COUNT_MASK|o.default.COLOR_FORMAT_MASK),this._u32View[8]|=o.default.WRITE_SET(e,o.default.COLOR_FORMAT_MASK,o.default.COLOR_FORMAT_SHIFT)|o.default.WRITE_SET(t,o.default.COLOR_ATTACHMENT_COUNT_MASK,o.default.COLOR_ATTACHMENT_COUNT_SHIFT)},e.prototype.setUnBatchable=function(){this._u8view[192]=0,this._u8view[193]=0},e.prototype.setBatchable=function(e,t,n){this._u8view[192]=1,this._u8view[193]=1,this._u32View[10]=c.batchableVertexBuffer2Native.get(e).id,this._u32View[11]=0,this._u32View[9]=u.batchableIndexBuffer2Native.get(t).id,this._u32View[49]=i.nativeValue2Native.get(n).id},e.prototype.setBatchableRenderDataDirty=function(){this._u8view[193]=1},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rect2Native=void 0,t.rect2Native=new WeakMap;var r=function(e){this._native=e,t.rect2Native.set(this,e)};t.default=r}]).default;!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).Kanata={})}(this,(function(e){"use strict";var t,n,r,i,o,a,s,c,u,l,d,f,p,h,g,v,_,y,m,b,w,O,E,S,T;e.EVertexFormat=void 0,(t=e.EVertexFormat||(e.EVertexFormat={}))[t.FLOAT=0]="FLOAT",t[t.FLOAT2=1]="FLOAT2",t[t.FLOAT3=2]="FLOAT3",t[t.FLOAT4=3]="FLOAT4",t[t.BYTE4=4]="BYTE4",t[t.BYTE4N=5]="BYTE4N",t[t.UBYTE4=6]="UBYTE4",t[t.UBYTE4N=7]="UBYTE4N",t[t.SHORT2=8]="SHORT2",t[t.SHORT2N=9]="SHORT2N",t[t.SHORT4=10]="SHORT4",t[t.SHORT4N=11]="SHORT4N",t[t.UINT10_N2=12]="UINT10_N2",e.EVertexStep=void 0,(n=e.EVertexStep||(e.EVertexStep={}))[n.PER_VERTEX=0]="PER_VERTEX",n[n.PER_INSTANCE=1]="PER_INSTANCE",e.EIndexType=void 0,(r=e.EIndexType||(e.EIndexType={}))[r.NONE=1]="NONE",r[r.UINT16=2]="UINT16",r[r.UINT32=3]="UINT32",e.ETextureType=void 0,(i=e.ETextureType||(e.ETextureType={}))[i.D2=0]="D2",i[i.Cube=1]="Cube",i[i.D2Array=2]="D2Array",i[i.D3=3]="D3",e.ETextureFormat=void 0,(o=e.ETextureFormat||(e.ETextureFormat={}))[o.RGBA8=0]="RGBA8",o[o.SRGBA8=1]="SRGBA8",o[o.RGB10A2=2]="RGB10A2",o[o.RG8=3]="RG8",o[o.R8=4]="R8",o[o.RGBA32F=5]="RGBA32F",o[o.RGBA16F=6]="RGBA16F",o[o.RG11B10F=7]="RG11B10F",o[o.Depth_Low=20]="Depth_Low",o[o.Depth_High=21]="Depth_High",o[o.Depth_Stencil=22]="Depth_Stencil",o[o.RGBA4=23]="RGBA4",o[o.RGB565=24]="RGB565",o[o.RGB5A1=25]="RGB5A1",o[o.ETC1RGB8=100]="ETC1RGB8",o[o.ETC2RGB8=110]="ETC2RGB8",o[o.PVRTC2RGBV1=120]="PVRTC2RGBV1",o[o.PVRTC4RGBV1=121]="PVRTC4RGBV1",o[o.PVRTC2RGBAV1=122]="PVRTC2RGBAV1",o[o.PVRTC4RGBAV1=123]="PVRTC4RGBAV1",o[o.ASTC4x4=140]="ASTC4x4",o[o.ASTC5x5=141]="ASTC5x5",o[o.ASTC6x6=142]="ASTC6x6",o[o.ASTC8x6=143]="ASTC8x6",o[o.ASTC8x8=144]="ASTC8x8",e.EWrapMode=void 0,(a=e.EWrapMode||(e.EWrapMode={}))[a.REPEAT=1]="REPEAT",a[a.CLAMP_TO_EDGE=2]="CLAMP_TO_EDGE",a[a.MIRRORED_REPEAT=3]="MIRRORED_REPEAT",e.EFilterMode=void 0,(s=e.EFilterMode||(e.EFilterMode={}))[s.NEAREST=1]="NEAREST",s[s.LINEAR=2]="LINEAR",s[s.NEAREST_MIPMAP_NEAREST=3]="NEAREST_MIPMAP_NEAREST",s[s.NEAREST_MIPMAP_LINEAR=4]="NEAREST_MIPMAP_LINEAR",s[s.LINEAR_MIPMAP_NEAREST=5]="LINEAR_MIPMAP_NEAREST",s[s.LINEAR_MIPMAP_LINEAR=6]="LINEAR_MIPMAP_LINEAR",e.EUniformType=void 0,(c=e.EUniformType||(e.EUniformType={}))[c.FLOAT=0]="FLOAT",c[c.FLOAT2=1]="FLOAT2",c[c.FLOAT3=2]="FLOAT3",c[c.FLOAT4=3]="FLOAT4",c[c.MAT2=4]="MAT2",c[c.MAT3=5]="MAT3",c[c.MAT4=6]="MAT4",c[c.SAMPLER=7]="SAMPLER",e.ECullMode=void 0,(u=e.ECullMode||(e.ECullMode={}))[u.NONE=0]="NONE",u[u.FRONT=1]="FRONT",u[u.BACK=2]="BACK",e.EFaceWinding=void 0,(l=e.EFaceWinding||(e.EFaceWinding={}))[l.CCW=1]="CCW",l[l.CW=2]="CW",e.ECompareFunc=void 0,(d=e.ECompareFunc||(e.ECompareFunc={}))[d.LESS=1]="LESS",d[d.LEQUAL=2]="LEQUAL",d[d.EQUAL=3]="EQUAL",d[d.GEQUAL=4]="GEQUAL",d[d.GREATER=5]="GREATER",d[d.NOTEQUAL=6]="NOTEQUAL",d[d.NEVER=7]="NEVER",d[d.ALWAYS=8]="ALWAYS",e.EStencilOp=void 0,(f=e.EStencilOp||(e.EStencilOp={}))[f.ZERO=0]="ZERO",f[f.KEEP=1]="KEEP",f[f.REPLACE=2]="REPLACE",f[f.INCR_WRAP=3]="INCR_WRAP",f[f.INCR=4]="INCR",f[f.DECR_WRAP=5]="DECR_WRAP",f[f.DECR=6]="DECR",f[f.INVERT=7]="INVERT",e.EBlendFactor=void 0,(p=e.EBlendFactor||(e.EBlendFactor={}))[p.ZERO=0]="ZERO",p[p.ONE=1]="ONE",p[p.SRC_COLOR=2]="SRC_COLOR",p[p.ONE_MINUS_SRC_COLOR=3]="ONE_MINUS_SRC_COLOR",p[p.SRC_ALPHA=4]="SRC_ALPHA",p[p.ONE_MINUS_SRC_ALPHA=5]="ONE_MINUS_SRC_ALPHA",p[p.DST_ALPHA=6]="DST_ALPHA",p[p.ONE_MINUS_DST_ALPHA=7]="ONE_MINUS_DST_ALPHA",p[p.DST_COLOR=8]="DST_COLOR",p[p.ONE_MINUS_DST_COLOR=9]="ONE_MINUS_DST_COLOR",p[p.SRC_ALPHA_SATURATE=10]="SRC_ALPHA_SATURATE",p[p.CONSTANT_COLOR=11]="CONSTANT_COLOR",p[p.ONE_MINUS_CONSTANT_COLOR=12]="ONE_MINUS_CONSTANT_COLOR",e.EBlendEquation=void 0,(h=e.EBlendEquation||(e.EBlendEquation={}))[h.FUNC_ADD=0]="FUNC_ADD",h[h.FUNC_SUBTRACT=1]="FUNC_SUBTRACT",h[h.FUNC_REVERSE_SUBTRACT=2]="FUNC_REVERSE_SUBTRACT",h[h.MIN=3]="MIN",h[h.MAX=4]="MAX",e.EColorMask=void 0,(g=e.EColorMask||(e.EColorMask={}))[g.NONE=16]="NONE",g[g.R=1]="R",g[g.G=2]="G",g[g.B=4]="B",g[g.A=8]="A",g[g.RGB=7]="RGB",g[g.RGBA=15]="RGBA",e.EPixelType=void 0,(v=e.EPixelType||(e.EPixelType={}))[v.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",v[v.FLOAT=5126]="FLOAT",v[v.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",v[v.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",v[v.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e.ELoadAction=void 0,(_=e.ELoadAction||(e.ELoadAction={}))[_.CLEAR=0]="CLEAR",_[_.LOAD=1]="LOAD",_[_.DONTCARE=2]="DONTCARE",e.EComponentType=void 0,(y=e.EComponentType||(e.EComponentType={}))[y.Undefined=0]="Undefined",y[y.Culling=1]="Culling",y[y.Animator=2]="Animator",y[y.SkinnedSkeleton=3]="SkinnedSkeleton",e.EDataModelType=void 0,(m=e.EDataModelType||(e.EDataModelType={}))[m.AnimationClip=1]="AnimationClip",m[m.SkeletonBoneInverse=2]="SkeletonBoneInverse",e.EMeshRenderType=void 0,(b=e.EMeshRenderType||(e.EMeshRenderType={}))[b.UnKnown=0]="UnKnown",b[b.Static3D=1]="Static3D",b[b.Skinned3D=2]="Skinned3D",b[b.UI=3]="UI",e.EPrimitiveType=void 0,(w=e.EPrimitiveType||(e.EPrimitiveType={}))[w.TRIANGLES=0]="TRIANGLES",w[w.TRIANGLE_STRIP=1]="TRIANGLE_STRIP",w[w.LINES=2]="LINES",w[w.LINE_STRIP=3]="LINE_STRIP",w[w.POINTS=4]="POINTS",w[w.ZERO=5]="ZERO",e.ELightMode=void 0,(O=e.ELightMode||(e.ELightMode={}))[O.UnKnown=0]="UnKnown",O[O.ForwardBase=1]="ForwardBase",O[O.ShadowCaster=2]="ShadowCaster",O[O.PostProcess=3]="PostProcess",e.EShadowMode=void 0,(E=e.EShadowMode||(e.EShadowMode={}))[E.None=0]="None",E[E.OneCascade_PCF=1]="OneCascade_PCF",E[E.TwoCascade_PCF=2]="TwoCascade_PCF",E[E.FourCascade_PCF=3]="FourCascade_PCF",e.EShadowFitMode=void 0,(S=e.EShadowFitMode||(e.EShadowFitMode={}))[S.FitFrustum=0]="FitFrustum",S[S.FitObjects=1]="FitObjects",e.EVertexLayoutUsage=void 0,(T=e.EVertexLayoutUsage||(e.EVertexLayoutUsage={}))[T.CUSTOM=0]="CUSTOM",T[T.POSITION=1]="POSITION",T[T.NORMAL=2]="NORMAL",T[T.TANGENT=3]="TANGENT",T[T.UV0=4]="UV0",T[T.UV1=5]="UV1",T[T.UV2=6]="UV2",T[T.COLOR=7]="COLOR",T[T.BONEINDEX=8]="BONEINDEX",T[T.BONEWEIGHT=9]="BONEWEIGHT";var I,A={0:"UnKnown",1:"ForwardBase",2:"ShadowCaster",3:"PostProcess"},C=65472,k={size:14,rotation:0,position:1,scale:3,worldMatrix:5},x={size:27,dfRotationType:1,rotationType:0,rotation:1,position:5,scale:8,worldOffset:11},P={size:7,active:0,dfActive:1,cullMask:1,boundingBallCenter:2,boundingBallRadius:5,entityId:6},D={size:114,view:0,depth:1,active:2,fov:3,aspect:4,near:5,far:6,up:7,eye:10,orthoSize:13,isProjection:14,cullingMask:15,canvasSizeY:16,targetTransform:17,viewMatrix:18,projectionMatrix:34,viewMatrixInverse:50,viewMatrix2D:66,projectionMatrix2D:82,viewMatrixInverse2D:98},R={size:8,viewId:0,depth:1,active:2,shadowDistance:3,shadowFilterMode:4,lightDir:5},j={active:0,skinHandle:1,castShadow:2,bindTarget:3,start:4,size:21,materialId:0,vertexBufferId:1,indexBufferId:2,startIndex:3,numIndices:4,shaderStart:5},N={size:7,lightMode:0,useMaterialStates:1,fstencil:2,bstencil:3,blendRGBA:4,colorDepth:5,state:6},M={size:13,renderQueue:0,effect:1,uniformBlock:2,fstencilMask:3,bstencilMask:4,blendRGBAMask:5,colorDepthMask:6,stateMask:7,fstencil:8,bstencil:9,blendRGBA:10,colorDepth:11,state:12},L={boneInverseModelId:0,boneIndices:1,perBoneIndices:1,perBoneEntityId:1,perBoneMatrix:16};e.EEventType=void 0,(I=e.EEventType||(e.EEventType={}))[I.SetRootEntity=1]="SetRootEntity",I[I.AddChild=2]="AddChild",I[I.AddChildAtIndex=3]="AddChildAtIndex",I[I.RemoveFromParent=4]="RemoveFromParent",I[I.DisperseSubTree=5]="DisperseSubTree",I[I.BindToBone=6]="BindToBone",I[I.BindToBones=7]="BindToBones",I[I.UnBindFromBone=8]="UnBindFromBone",I[I.UnBindFromBones=9]="UnBindFromBones",I[I.EntityCommandActive=10]="EntityCommandActive",I[I.EntityCommandInActive=11]="EntityCommandInActive";var B=(NativeGlobal||{}).puppet,F=B||{};function U(){return!!B}var W=new(function(){function e(e){this._queues=[],this._end=0,this._end=e;for(var t=0;t<=e;t+=1)this._queues.push([])}return e.prototype.add=function(e){this._queues[0].push(e)},e.prototype.step=function(){var e=this._queues[this._end];e.splice(0,e.length);for(var t=this._end;t>0;t-=1)this._queues[t]=this._queues[t-1];this._queues[0]=e},e}())(5),V={REAL_DOWNLOADER:null,LOAD:function(e){return V.REAL_DOWNLOADER.load(e)}},G=function(e,t){return(G=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function H(e,t){function n(){this.constructor=e}G(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var z=function(){function e(e){this._bufferSize=0,e&&(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){this._u32view[0]+e+1>this._u32view.length&&F.refreshNodesWorldTransform()},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),Y=function(t){function n(){return t.call(this,F.eventBusSM)||this}return H(n,t),n.prototype.setRootEntity=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.SetRootEntity,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.addChild=function(t,n){this._checkBufferSize(12);var r=this._u32view[0]/4+1;this._u32view[r]=e.EEventType.AddChild,this._u32view[r+1]=t,this._u32view[r+2]=n,this.setCommandSize(this._u32view[0]+12)},n.prototype.addChildAtIndex=function(t,n,r){this._checkBufferSize(16);var i=this._u32view[0]/4+1;this._u32view[i]=e.EEventType.AddChildAtIndex,this._u32view[i+1]=t,this._u32view[i+2]=n,this._u32view[i+3]=r,this.setCommandSize(this._u32view[0]+16)},n.prototype.removeFromParent=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.RemoveFromParent,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.disperseSubTree=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.DisperseSubTree,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.bindToBone=function(t,n){this._checkBufferSize(12);var r=this._u32view[0]/4+1;this._u32view[r]=e.EEventType.BindToBone,this._u32view[r+1]=t,this._u32view[r+2]=n,this.setCommandSize(this._u32view[0]+12)},n.prototype.unBindFromBone=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.UnBindFromBone,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.entityCommandActive=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.EntityCommandActive,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.entityCommandInActive=function(t){this._checkBufferSize(8);var n=this._u32view[0]/4+1;this._u32view[n]=e.EEventType.EntityCommandInActive,this._u32view[n+1]=t,this.setCommandSize(this._u32view[0]+8)},n.prototype.bindToBones=function(t,n){var r=t.length,i=4*(2+2*r);this._checkBufferSize(i);var o=this._u32view[0]/4+1;this._u32view[o]=e.EEventType.BindToBones,this._u32view[o+1]=r;for(var a=0;a<r;a++){var s=t[a],c=n[a];this._u32view[o+2+a]=s.id,this._u32view[o+2+r+a]=c.id}this.setCommandSize(this._u32view[0]+i)},n.prototype.unBindFromBones=function(t){var n=t.length,r=4*(2+n);this._checkBufferSize(r);var i=this._u32view[0]/4+1;this._u32view[i]=e.EEventType.UnBindFromBones,this._u32view[i+1]=n;for(var o=0;o<n;o++){var a=t[o];this._u32view[i+2+o]=a.id}this.setCommandSize(this._u32view[0]+r)},n}(z),q=function(e){function t(){return e.call(this,F.dirtyNodesSM)||this}return H(t,e),t.prototype.addDirtyEntity=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntityId=function(e){this._checkBufferSize(1),this._u32view[this._u32view[0]+1]=e,this.setCommandSize(this._u32view[0]+1)},t.prototype.addDirtyEntities=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[0]+1,r=t-(this._u32view.length-1),i=0;i<r;i++)this._u32view[n+i]=e[i];var o=t-r;for(i=r;i<o;i++)this.addDirtyEntityId(e[i])}else{for(r=t,n=this._u32view[0]+1,i=0;i<r;i++)this._u32view[n+i]=e[i];this.setCommandSize(this._u32view[0]+r)}},t.prototype.addDirtyEntitiesById=function(e,t){if(this._checkBufferSize(t),t>this._u32view.length){for(var n=this._u32view[0]+1,r=t-(this._u32view.length-1),i=0;i<r;i++)this._u32view[n+i]=e[i];var o=t-r;for(i=r;i<o;i++)this.addDirtyEntityId(e[i])}else{for(r=t,n=this._u32view[0]+1,i=0;i<r;i++)this._u32view[n+i]=e[i];this.setCommandSize(this._u32view[0]+r)}},t}(z),K=function(e){function t(){var n=e.call(this,F.uiRenderList)||this;return n.uiRenderListLength=0,n._idx=0,U()&&(n.uiRenderListLength=n._u32view.length,t.RESET_BUFFER=new Uint32Array(new ArrayBuffer(n.buffer.byteLength))),n}return H(t,e),t.prototype.reset=function(){this._idx=0,this._u32view.set(t.RESET_BUFFER)},t.prototype.addUIComponent=function(e){this.checkUIRenderListLength(1),this._u32view[this._idx]=e.id,this._idx++},t.prototype.end=function(){this.checkUIRenderListLength(1),this._u32view[this._idx+1]=0},t.prototype.checkUIRenderListLength=function(e){this._idx+e>=this.uiRenderListLength&&this.enlargeList()},t.prototype.enlargeList=function(){F.enlargeUIRenderList(),this.buffer=F.uiRenderList,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength,this.uiRenderListLength=this._u32view.length,t.RESET_BUFFER=new Uint32Array(new ArrayBuffer(this.buffer.byteLength))},t}(z),J=new Y,X=new q,$=new K,Z=new(function(){function e(){}return e.prototype.entityAddChild=function(e,t){J.addChild(e,t)},e.prototype.entityAddChildAtIndex=function(e,t,n){J.addChildAtIndex(e,t,n)},e.prototype.entityRemoveFromParent=function(e){J.removeFromParent(e)},e.prototype.entityClear=function(e){J.disperseSubTree(e)},e.prototype.entitySetActive=function(e,t){t?J.entityCommandActive(e):J.entityCommandInActive(e)},e.prototype.entitySetLocalMatrixDirty=function(e){X.addDirtyEntity(e)},e.prototype.uiRenderListReset=function(){$.reset()},e.prototype.uiRenderListEnd=function(){$.end()},e.prototype.uiRenderListAddUIComponent=function(e){$.addUIComponent(e)},e.prototype.setRootEntity=function(e){J.setRootEntity(e)},e.prototype.refreshWorldTransform=function(){F.refreshNodesWorldTransform()},e.prototype.bindEntitiesToBones=function(e,t){J.bindToBones(e,t)},e.prototype.unbindEntitiesFromBones=function(e){J.unBindFromBones(e)},e}()),Q=function(){function e(e){this._bufferSize=0,e?(this.buffer=e,this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=this.buffer.byteLength):(this.buffer=new ArrayBuffer(1024),this._u32view=new Uint32Array(this.buffer,0,this.buffer.byteLength/4),this._bufferSize=1024)}return Object.defineProperty(e.prototype,"commandOffset",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"commandOffsetUint32",{get:function(){return this._u32view[0]/4},enumerable:!1,configurable:!0}),e.prototype._checkBufferSize=function(e){},e.prototype.setCommandSize=function(e){this._u32view[0]=e},e}(),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateSkinningMatrices=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;return this.setCommandSize(t),this._u32view},t}(Q),te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype._checkBufferSize=function(e){if(4+e>this._bufferSize){var t=2*(4+e);this.buffer=new ArrayBuffer(t),this._u32view=new Uint32Array(this.buffer,0,t/4),this._bufferSize=t}},t.prototype.updateAnimators=function(e,t){this._checkBufferSize(4*t);for(var n=0;n<t;n++)this._u32view[1+n]=e[n].id;return this.setCommandSize(t),this._u32view},t}(Q),ne=new ee,re=new te,ie=function(){function e(){this.premultiplyAlpha=!1}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this._src},set:function(e){var t=this;this._src=e,V.LOAD({src:this._src,encoding:void 0,onLoad:function(n){F.decodeImage(n.data,(function(n,r,i){n?(t._data=n,t._width=r,t._height=i,t.onload&&t.onload()):t.onerror&&t.onerror(new Error("Decode Image error: '"+e+"'"))}),t.premultiplyAlpha),W.add(n.data)},onError:function(e){t.onerror&&t.onerror(e)}})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e}(),oe={downloader:V,eventBridge:Z,update:function(e){W.step()},createNodePool:function(e,t){return F.createNodePool(e,t)},createVertexLayout:function(e){return F.createVertexLayout(JSON.stringify(e))},createVertexBuffer:function(e,t){return W.add(e),F.createVertexBuffer(e,t.id)},updateVertexBuffer:function(e,t,n){return W.add(t),F.updateVertexBuffer(e.id,t,n)},createIndexBuffer:function(e){return W.add(e),F.createIndexBuffer(e)},updateIndexBuffer:function(e,t,n){return W.add(t),F.updateIndexBuffer(e.id,t,n)},createVertexData:function(e,t){return F.createVertexData(e.id,t)},createIndexData:function(e){return F.createIndexData(e)},createTexture:function(e,t,n,r,i,o,a,s,c){return W.add(s),F.createTexture(e,t,n,r,i,o,a,s,c)},updateTexture:function(e,t,n,r,i,o,a,s,c){return W.add(c),F.updateTexture(e.id,t,n,r,i,o,a,s,c)},updateFlags:function(e,t){return F.updateFlags(e.id,t)},createShader:function(e,t){return F.createShader(e,t)},createUniformBlockDescriptor:function(e){return F.createUniformBlockDescriptor(JSON.stringify(e))},createUniformBlock:function(e){return F.createUniformBlock(e.id)},createEffect:function(e){return F.createEffect(e)},createMaterial:function(e){return F.createMaterial(e?e.id:0)},createView:function(e){var t={pass:e.pass?e.pass.id:0,passAction:e.passAction,viewport:e.viewport,scissor:e.scissor};return F.createView(JSON.stringify(t))},updateViewRect:function(e,t){return F.updateViewRect(e.id,t)},updateViewScissor:function(e,t){return F.updateViewScissor(e.id,t)},createRenderPass:function(e){var t=e;return t.colors.forEach((function(e){e.texture=e.texture.id})),t.depth.texture=t.depth.texture.id,t.stencil.texture=t.stencil.texture.id,F.createRenderPass(JSON.stringify(e))},createCullingComponentPool:function(e){return F.createCullingComponentPool(e)},createRenderComponent:function(e,t,n,r,i){return F.createRenderComponent(e,t.id,n,r,i)},createAnimator:function(e,t){return F.createAnimator(e,t)},updateAnimators:function(e,t){var n=re.updateAnimators(e,t);return W.add(n),F.updateAnimators(n)},createSkinning:function(e){return F.createSkinning(e)},updateSkinnings:function(e,t){var n=ne.updateSkinningMatrices(e,t);return W.add(n),F.updateSkinnings(n)},createRenderCamera:function(e,t,n,r){return F.createRenderCamera(e.id,t,n,r)},createLightCamera:function(e,t,n){return F.createLightCamera(e.id,t,n.id)},createAnimationClipModel:function(e){return W.add(e),F.createAnimationClipModel(e)},createBoneInverseModel:function(e){return W.add(e),F.createBoneInverseModel(e)},loadTTFFont:function(e,t){V.LOAD({src:e,encoding:void 0,onLoad:function(e){var n=e.data;W.add(n);var r=F.loadTTFFont(n);t(r)},onError:function(){t("Arial")}})},getGlyphInfo:function(e,t){var n=e.italic?" Italic":"",r=e.bold?" Bold":"";return F.getGlyphInfo(""+e.fontFamily+r+n+" "+Math.floor(e.size)+"px",t)},refreshNodesWorldTransform:function(){return F.refreshNodesWorldTransform()},drawDefaultScene:function(){return F.drawDefaultScene()},registerCullingCallback:function(e){return F.registerCullingCallback(e)},createWeakRef:function(e){return F.createWeakRef(e)},createAutoRef:function(e){return F.createAutoRef(e)},createWeakRefSentry:function(){return F.createWeakRefSentry()},createNativeUUMap:function(){return F.createNativeUUMap()},createNativeSUMap:function(){return F.createNativeSUMap()},createNativeULUMap:function(){return F.createNativeULUMap()},setNodeName:function(e,t){return F.setNodeName(e,t)},setRenderComponentName:function(e,t){return F.setRenderComponentName(e.id,t)},debugPrint:function(e){return F.debugPrint(e)}},ae={};ae.IS_VALID=U,ae.worker=oe,ae.Image=ie;var se=function(){function e(){}return Object.defineProperty(e.prototype,"__handle",{get:function(){return this._handle},enumerable:!1,configurable:!0}),e.prototype._init=function(e){this._fastInit(e)},e.prototype._fastInit=function(e){this._handle=e,this._handle.__feObj=this;var t=e.id,n=e.data,r=n.byteLength;this._bufferLength=r,this._byteOffset=0,this._buffer=n,this.id=t,this._f32view=new Float32Array(n,0,r/4)},e.prototype._initU32View=function(){this._u32view=new Uint32Array(this._buffer,this._byteOffset,this._bufferLength/4)},e.prototype._initPropertyView=function(e,t){return new Float32Array(this._buffer,this._byteOffset+4*e,t)},e.prototype.setRawBuffer=function(e){this._f32view.set(e)},e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),ce=ae.worker,ue=function(e){function t(n,r,i){var o=e.call(this)||this,a=o._createNativeObj(n,r);return a.id<0||!a.data||(o._init(a),o._initU32View(),o._meshCount=r.meshCount,o._runtimeRender=i,o._uniforms=r.uniformBlock,t.TABLE[o._handle.id]=o),o}return H(t,e),t.CREATE_FAKE=function(e,t){return new le(e,t,null)},Object.defineProperty(t.prototype,"runtimeRender",{get:function(){return this._runtimeRender},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"meshCount",{get:function(){return this._meshCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"castShadow",{get:function(){return!!this._u32view[j.castShadow]},set:function(e){this._u32view[j.castShadow]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return!!this._u32view[j.active]},set:function(e){this._u32view[j.active]=e?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skinSkeleton",{set:function(e){this._u32view[j.skinHandle]=e.id,this._skinSkeleton=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bindTarget",{set:function(e){this._u32view[j.bindTarget]=e?e.id:0,this._bindTarget=e},enumerable:!1,configurable:!0}),t.prototype._createNativeObj=function(e,t){return ce.createRenderComponent(t.meshCount,t.uniformBlock.__handle,e.id,t.culling?t.culling.id:0,t.renderType)},t.prototype.getStartIndex=function(e){return this._u32view[j.start+j.size*e+j.startIndex]},t.prototype.setStartIndex=function(e,t){this._u32view[j.start+j.size*e+j.startIndex]=t},t.prototype.getNumIndices=function(e){return this._u32view[j.start+j.size*e+j.numIndices]},t.prototype.setNumIndices=function(e,t){this._u32view[j.start+j.size*e+j.numIndices]=t},t.prototype.getVertexBuffer=function(e){return this._vertexes[e]},t.prototype.setVertexBuffer=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexBuffer=function(e){return this._indexes[e]},t.prototype.setIndexBuffer=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getVertexData=function(e){return this._vertexes[e]},t.prototype.setVertexData=function(e,t){this._vertexes||(this._vertexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.vertexBufferId]=t.id,this._vertexes[e]=t},t.prototype.getIndexData=function(e){return this._indexes[e]},t.prototype.setIndexData=function(e,t){this._indexes||(this._indexes=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.indexBufferId]=t.id,this._indexes[e]=t},t.prototype.getMaterial=function(e){return this._materials[e]},t.prototype.setMaterial=function(e,t){this._materials||(this._materials=new Array(this._meshCount)),this._u32view[j.start+j.size*e+j.materialId]=t.id,this._materials[e]=t,this.setShaders(e,t.shaders)},t.prototype.setShaders=function(e,t){var n=this;t.forEach((function(t,r){n.setShader(e,r,t)}))},t.prototype.setShader=function(e,t,n){n&&(this._u32view[j.start+j.size*e+j.shaderStart+t]=n.id)},t.prototype.fastSet=function(e,t,n,r,i){this._vertexes=e,this._indexes=t,this._materials=n;for(var o=0;o<this._meshCount;o+=1)this.setVertexBuffer(o,e[o]),this.setIndexBuffer(o,t[o]),this.setMaterial(o,n[o]),this.setStartIndex(o,r[o]),this.setNumIndices(o,i[o])},t.prototype.setDirty=function(){this._handle.setSharedDirty&&this._handle.setSharedDirty()},t.prototype.copyStates=function(e){e._u32view.length<this._u32view.length?this._u32view.set(e._u32view,0):this._u32view.set(new Uint32Array(e._u32view.buffer,0,this._u32view.length),0),this._materials=e._materials,this._vertexes=e._vertexes,this._indexes=e._indexes},t.prototype.destroy=function(){e.prototype.destroy.call(this),this._runtimeRender=null,t.TABLE[this.id]&&delete t.TABLE[this.id]},t.TABLE={},t.OFFSETS=j,t}(se),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype._createNativeObj=function(e,t){return{id:0,data:new ArrayBuffer(4*(j.start+j.size*t.meshCount)),setSharedDirty:function(){}}},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._uniforms=e},enumerable:!1,configurable:!0}),t}(ue),de=ae.worker,fe=function(t){function n(r,i,o){var a=t.call(this)||this,s=de.createRenderCamera(i.uniformBlock.__handle,e.ELightMode[i.lightMode],r.id,i.isUI||!1);return s.id<0||!s.data||(a._init(s),a._initU32View(),a.isProjection=!0,a._uniforms=i.uniformBlock,a._runtimeCamera=o,n.TABLE[a.id]=a),a}return H(n,t),Object.defineProperty(n.prototype,"runtimeCamera",{get:function(){return this._runtimeCamera},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return!!this._u32view[D.active]},set:function(e){this._u32view[D.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this._u32view[D.depth]},set:function(e){this._u32view[D.depth]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isProjection",{get:function(){return!!this._u32view[D.isProjection]},set:function(e){this._u32view[D.isProjection]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"view",{get:function(){return this._view},set:function(e){this._view=e,this._u32view[D.view]=e.id,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"fov",{get:function(){return this._f32view[D.fov]},set:function(e){this._f32view[D.fov]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"aspect",{get:function(){return this._f32view[D.aspect]},set:function(e){this._f32view[D.aspect]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"near",{get:function(){return this._f32view[D.near]},set:function(e){this._f32view[D.near]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"far",{get:function(){return this._f32view[D.far]},set:function(e){this._f32view[D.far]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"orthoSize",{get:function(){return this._f32view[D.orthoSize]},set:function(e){this._f32view[D.orthoSize]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cullingMask",{get:function(){return this._u32view[D.cullingMask]},set:function(e){this._u32view[D.cullingMask]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canvasSizeY",{get:function(){return this._f32view[D.canvasSizeY]},set:function(e){this._f32view[D.canvasSizeY]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"targetTransform",{get:function(){return this._u32view[D.targetTransform]},set:function(e){this._u32view[D.targetTransform]=e,this._setDirty()},enumerable:!1,configurable:!0}),n.prototype._setDirty=function(){this._handle.setSharedDirty()},n.prototype.updateMatrix=function(){this._handle.updateMatrices()},n.prototype.destroy=function(){t.prototype.destroy.call(this),delete n.TABLE[this.id],this._runtimeCamera=null},n.OFFSETS=D,n.TABLE={},n}(se),pe=ae.worker,he=function(e){function t(){var t=e.call(this)||this;return t._offsetEntityIds=0,t._animationClipCount=0,t._nodeCount=0,t._handle={id:0},t}return H(t,e),t.UPDATE_ANIMATORS=function(e,t){pe.updateAnimators(e,t)},t.prototype.bindAnimations=function(e,t,n){this.animationClipModels=e,this._animationClipCount=e.length;var r=t.length;for(var i in t)r+=t[i].length;this._nodeCount=r;var o=pe.createAnimator(e.length,r);if(!(o.id<0)&&o.data){this._init(o),this._initU32View();for(i=0;i<e.length;i++)this._u32view[3*i]=e[i].id;this._offsetEntityIds=3*e.length;var a,s=0;for(i=0;i<t.length;i++){for(var c=0;c<t[i].length;c++)null!=t[i][c]?(this._u32view[this._offsetEntityIds+s+c]=t[i][c].id,a||(a=t[i][c].id)):this._u32view[this._offsetEntityIds+s+c]=0,this._u32view[this._offsetEntityIds+s+c]=null!=t[i][c]?t[i][c].id:4294967295;s+=t[i].length}0===this._u32view[this._offsetEntityIds]&&(null!=n&&n.id?this._u32view[this._offsetEntityIds]=n.id:a&&(this._u32view[this._offsetEntityIds]=a))}},t.prototype.setClipParams=function(e,t,n){if(this._handle){var r=3*e;this._f32view[r+1]=Math.round(t),this._f32view[r+2]=n}},t.prototype.getAnimationClipCount=function(){return this._animationClipCount},t.prototype.getNodeCount=function(){return this._nodeCount},t.prototype.getAnimationParameter=function(e){var t=3*e;return{animationClipId:this._u32view[t],frameIndex:this._f32view[t+1],percentage:this._f32view[t+2]}},t.prototype.getEntity=function(e){return this._u32view[this._offsetEntityIds+e]},t}(se),ge=ae.worker,ve=function(t){function n(n,r){var i=t.call(this)||this,o=ge.createLightCamera(r.uniformBlock.__handle,e.ELightMode[r.lightMode],n);return o.id<0||!o.data||(i._init(o),i._initU32View(),i._uniforms=r.uniformBlock),i}return H(n,t),Object.defineProperty(n.prototype,"view",{get:function(){return this._view},set:function(e){this._u32view[R.viewId]=e.id,this._view=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"active",{get:function(){return!!this._u32view[R.active]},set:function(e){this._u32view[R.active]=e?1:0,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depth",{get:function(){return this._u32view[R.depth]},set:function(e){this._u32view[R.depth]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uniforms",{get:function(){return this._uniforms},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shadowDistance",{get:function(){return this._f32view[R.shadowDistance]},set:function(e){this._f32view[R.shadowDistance]=e,this._setDirty()},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"shadowFilterMode",{get:function(){return this._u32view[R.shadowFilterMode]},set:function(e){this._u32view[R.shadowFilterMode]=e,this._setDirty()},enumerable:!1,configurable:!0}),n.prototype.setLightDir=function(e,t,n){this._f32view[R.lightDir]=e,this._f32view[R.lightDir+1]=t,this._f32view[R.lightDir+2]=n,this._setDirty()},n.prototype._setDirty=function(){this._handle.setSharedDirty()},n.OFFSETS=R,n}(se),_e=function(){function e(){}return Object.defineProperty(e.prototype,"float32View",{get:function(){return this._nativePool._f32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint32View",{get:function(){return this._nativePool._u32view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._nativeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolId",{get:function(){return this._poolId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"poolIndex",{get:function(){return this._poolIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isUsing",{get:function(){return this._using},set:function(e){this._using=e},enumerable:!1,configurable:!0}),e.prototype._init=function(e,t){this._nativeId=e,this._poolId=-65473&e,this._poolIndex=e&C,this._nativePool=t[this._poolId]},e.prototype.setRawBuffer=function(e){this._nativePool._f32view.set(e,this.entityOffset)},e}(),ye=function(){function e(e){this._index=0,this._size=null!=e?e:500,this._array=new Array(this._size)}return e.prototype.push=function(e){this._index>=this._size&&(this._size*=2,this._array.length=this._size),this._array[this._index]=e,this._index++},e.prototype.pop=function(){return this._index--,this._array[this._index]},e.prototype.getByIndex=function(e){return e>=this._index?-1:this._array[e]},e.prototype.size=function(){return this._index},e.prototype.clear=function(){this._index=0},e}(),me=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n._initU32View(),n}return H(t,e),t}(se),be=function(){function e(e,t,n){this.pools={},this._poolIndex=0,this._poolUsedLength=0,this._poolLength=0,this._disposedIds=new ye,this._template=e,this._templateView=t,this._allocateFunc=n}return e.prototype._enlargePool=function(e){var t=this._allocateFunc(e),n=new me(t);this._poolIndex=n.id,this.pools[n.id]=n,this._poolLength+=e},e.prototype.allocateOne=function(){if(this._disposedIds.size()>0)return this._poolUsedLength++,this._disposedIds.pop();this._poolUsedLength>=this._poolLength&&this._enlargePool(1024);var e=this._poolIndex;return this._poolIndex+=64,this._poolUsedLength++,e},e.prototype.dispose=function(e){e.isUsing&&(this._disposedIds.push(e.id),this._poolUsedLength--,e.setRawBuffer(this._templateView),e.isUsing=!1)},e}(),we=ae.worker,Oe=new Uint32Array(new ArrayBuffer(4*P.size)),Ee=new Float32Array(Oe.buffer),Se=function(e){function t(n){var r=e.call(this)||this,i=t.POLL_MANAGER.allocateOne();return r._init(i,t.POLL_MANAGER.pools),r.entityOffset=(r._poolIndex>>6)*P.size,r._activeOffset=r.entityOffset+P.active,r._cullmaskOffset=r.entityOffset+P.cullMask,r._boundingBallCenterOffset=r.entityOffset+P.boundingBallCenter,r._boundingBallRadiusOffset=r.entityOffset+P.boundingBallRadius,r._entityIdOffset=r.entityOffset+P.entityId,r}return H(t,e),t.prototype.getActive=function(){return 0!=(this._nativePool._u32view[this._activeOffset]&P.dfActive)},t.prototype.setActive=function(e){e?this._nativePool._u32view[this._activeOffset]|=P.dfActive:this._nativePool._u32view[this._activeOffset]&=~P.dfActive},t.prototype.getCullMask=function(){return this._nativePool._u32view[this._cullmaskOffset]},t.prototype.setCullMask=function(e){this._nativePool._u32view[this._cullmaskOffset]=e},t.prototype.getBoundingBallCenter=function(){return this._boundingBallCenter||(this._boundingBallCenter=new Float32Array(this._nativePool._buffer,4*this._boundingBallCenterOffset,3)),this._boundingBallCenter},t.prototype.setBoundingBallCenter=function(e,t){void 0===t&&(t=0),e[t]===this._nativePool._f32view[this._boundingBallCenterOffset]&&e[t+1]===this._nativePool._f32view[this._boundingBallCenterOffset+1]&&e[t+2]===this._nativePool._f32view[this._boundingBallCenterOffset]+3||(3===e.length?this._nativePool._f32view.set(e,this._boundingBallCenterOffset):(this._nativePool._f32view[this._boundingBallCenterOffset]=e[t],this._nativePool._f32view[this._boundingBallCenterOffset+1]=e[t+1],this._nativePool._f32view[this._boundingBallCenterOffset+2]=e[t+2]))},t.prototype.getBoundingBallRadius=function(){return this._nativePool._f32view[this._boundingBallRadiusOffset]},t.prototype.setBoundingBallRadius=function(e){this._nativePool._f32view[this._boundingBallRadiusOffset]=e},t.prototype.bindEntity=function(e){this._bindEntityNative(e)},t.prototype.destroy=function(){this._unbindEntityNative(),t.POLL_MANAGER.dispose(this)},t.prototype._bindEntityNative=function(e){this.uint32View[this._entityIdOffset]=e.id},t.prototype._unbindEntityNative=function(){this.uint32View[this._entityIdOffset]=0},t.POLL_MANAGER=new be(Oe,Ee,(function(e){return we.createCullingComponentPool(e)})),t}(_e),Te=ae.worker,Ie=function(e){function t(t){var n=e.call(this)||this;n._boneNum=0,n._boneNum=t;var r=Te.createSkinning(t);return r.id<0||!r.data||(n._init(r),n._initU32View()),n}return H(t,e),t.UPDATE_MATS=function(e,t){Te.updateSkinnings(e,t)},Object.defineProperty(t.prototype,"boneNum",{get:function(){return this._boneNum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneInverseModel",{get:function(){return this._boneInverseModel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"boneOffsetMatrices",{get:function(){return this._boneOffsetMatrices},enumerable:!1,configurable:!0}),t.prototype.setBoneMatrix=function(e,t,n){var r=this._boneNum;if(t.length===r&&n.length===r){for(var i=[],o=0;o<r;o++)i.push(n[o].id);this._u32view[L.boneInverseModelId]=e.id,this._u32view.set(t,L.boneIndices);var a=L.boneIndices+r*L.perBoneIndices;this._u32view.set(i,a),this._boneOffsetMatrices=new Float32Array(this._buffer,this._byteOffset+4*(L.boneIndices+r*(L.perBoneIndices+L.perBoneEntityId)),r*L.perBoneMatrix),this._boneInverseModel=e}else console.warn("setBoneMatrix Error")},t.prototype.getBoneNum=function(){return this._boneNum},t.prototype.getBoneOffsetMatrices=function(){return this._boneOffsetMatrices},t}(se),Ae=ae.worker,Ce=new Float32Array(new ArrayBuffer(4*k.size));Ce.set([0,0,0,1,1],0);var ke=function(e){function t(){var n=e.call(this)||this,r=t.POLL_MANAGER.allocateOne();return n._init(r,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*k.size,n.localRotationOffset=n.entityOffset+k.rotation,n.localPositionOffset=n.entityOffset+k.position,n.localScaleOffset=n.entityOffset+k.scale,n.worldMatrixOffset=n.entityOffset+k.worldMatrix,n.active=!0,n}return H(t,e),t.prototype.addChild=function(e){Ae.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){Ae.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){Ae.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){Ae.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){Ae.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){Ae.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){Ae.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new be(Ce,Ce,(function(e){return Ae.createNodePool(e,!1)})),t.OFFSETS=k,t}(_e),xe=ae.worker,Pe=new Uint32Array(new ArrayBuffer(4*x.size)),De=new Float32Array(Pe.buffer);Pe[0]=1,De.set([0,0,0,1],1),De.set([0,0,0],5),De.set([1,1,1],8);var Re=function(e){function t(){var n=e.call(this)||this,r=t.POLL_MANAGER.allocateOne();return n._init(r,t.POLL_MANAGER.pools),n.entityOffset=(n._poolIndex>>6)*x.size,n.localRotationTypeOffset=n.entityOffset+x.rotationType,n.localQuaternionOffset=n.entityOffset+x.rotation,n.localPositionOffset=n.entityOffset+x.position,n.localScaleOffset=n.entityOffset+x.scale,n.worldMatrixOffset=n.entityOffset+x.worldOffset,n.active=!0,n}return H(t,e),t.prototype.setUsingEuler=function(e){e?this._nativePool._u32view[this.localRotationTypeOffset]&=~x.dfRotationType:this._nativePool._u32view[this.localRotationTypeOffset]|=x.dfRotationType},t.prototype.isUsingEuler=function(){return 0==(this._nativePool._u32view[this.localRotationTypeOffset]&x.dfRotationType)},t.prototype.addChild=function(e){xe.eventBridge.entityAddChild(this.id,e.id)},t.prototype.addChildAtIndex=function(e,t){xe.eventBridge.entityAddChildAtIndex(this.id,e.id,t)},t.prototype.removeFromParent=function(){xe.eventBridge.entityRemoveFromParent(this.id)},t.prototype.setAsRoot=function(){xe.eventBridge.setRootEntity(this.id)},t.prototype.destroy=function(){this.removeFromParent(),t.POLL_MANAGER.dispose(this)},t.prototype.clear=function(){xe.eventBridge.entityClear(this.id)},t.prototype.setLocalMatrixDirty=function(){xe.eventBridge.entitySetLocalMatrixDirty(this.id)},Object.defineProperty(t.prototype,"active",{set:function(e){xe.eventBridge.entitySetActive(this.id,e)},enumerable:!1,configurable:!0}),t.POLL_MANAGER=new be(Pe,De,(function(e){return xe.createNodePool(e,!0)})),t.OFFSETS=x,t}(_e),je=function(){function e(){}return Object.defineProperty(e.prototype,"_handle",{get:function(){return this.__handle},set:function(e){this.__handle=e,this.id=e.id,this.__handle.__feObj=this},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._handle.destroy&&this._handle.destroy()},e}(),Ne=ae.worker,Me=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype._createNativeModel=function(t,n){var r;t===e.EDataModelType.AnimationClip?r=Ne.createAnimationClipModel(n):t===e.EDataModelType.SkeletonBoneInverse&&(r=Ne.createBoneInverseModel(n)),this._handle=r},n}(je),Le=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.setAnimationClip=function(t){this._createNativeModel(e.EDataModelType.AnimationClip,t)},n}(Me),Be=function(e){function t(t){var n=e.call(this)||this;return n._init(t),n}return H(t,e),Object.defineProperty(t.prototype,"dataLength",{get:function(){return this._u32view[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"byteOffset",{get:function(){return this._byteOffset+4},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"arrayBuffer",{get:function(){return this._buffer},enumerable:!1,configurable:!0}),t}(se),Fe=16384,Ue=32768,We=393216,Ve=15728640;function Ge(e,t){return-8&e|t<<0}function He(e,t){return-57&e|t<<3}function ze(e,t){return-449&e|t<<6}function Ye(e,t){return-3585&e|t<<9}function qe(e,t){return-12289&e|t<<12}function Ke(e,t){return t?e|Fe:-16385&e}function Je(e,t){return-393217&e|(1===t?0:t<<17)}function Xe(e,t){return-15728641&e|t<<19}function $e(e,t){return t?e|Ue:-32769&e}var Ze=2147483648;function Qe(e,t){return t?e|Ze:2147483647&e}function et(e){return!!(e&Ze)}var tt=1073741824;function nt(e,t){return t?e|tt:-1073741825&e}function rt(e){return!!(e&tt)}var it=16776960;function ot(e,t){return 4294963455&e|t<<8}function at(e,t){return 4294905855&e|t<<8<<4}function st(e,t){return 4293984255&e|t<<8<<8}function ct(e,t){return 4279238655&e|t<<8<<12}function ut(e){return(e&it)>>8&15}function lt(e){return(e&it)>>8>>4&15}function dt(e){return(e&it)>>8>>8&15}function ft(e){return(e&it)>>8>>12&15}var pt=1056964608;function ht(e,t){return 4043309055&e|t<<24}function gt(e,t){return 3489660927&e|t<<24<<3}function vt(e){return(e&pt)>>24&7}var _t=240;function yt(e,t){return-241&e|t<<4}function mt(e){return 0!=(e&_t)}function bt(e){return(e&_t)>>4}var wt=255;function Ot(e,t){return-256&e|t<<0}function Et(e){return(e&wt)>>0}var St=65280;function Tt(e,t){return-65281&e|t<<8}function It(e){return(e&St)>>8}var At=983040;function Ct(e,t){return-983041&e|t<<16}function kt(e){return 0!=(e&At)}function xt(e){return(e&At)>>16}var Pt=20,Dt=4293918720;function Rt(e,t){return 4279238655&e|t<<Pt}function jt(e,t){return 4043309055&e|t<<Pt<<4}function Nt(e,t){return 268435455&e|t<<Pt<<8}function Mt(e){return(e&Dt)>>Pt&15}function Lt(e){return(e&Dt)>>Pt>>4&15}function Bt(e){return(e&Dt)>>Pt>>8&15}var Ft=255;function Ut(e,t){return-256&e|t<<0}function Wt(e){return e&Ft}var Vt=768;function Gt(e,t){return-769&e|t<<8}function Ht(e){return(e&Vt)>>8}function zt(e){return!!(e&Vt)}var Yt=14336;function qt(e,t){return-14337&e|t<<11}function Kt(e){return(e&Yt)>>11}var Jt=ae.worker,Xt=function(t){function n(e){var n,r=t.call(this)||this,i=Jt.createEffect(e);if(i.id<0||!i.data)return r;r._handle=i,r._init(i),r._initU32View();for(var o=0;o<e;o+=1){var a=o*N.size+N.colorDepth;r._u32view[a]=(n=r._u32view[a],!0?15|n:-16&n)}return r._passCount=e,r}return H(n,t),Object.defineProperty(n.prototype,"passCount",{get:function(){return this._passCount},enumerable:!1,configurable:!0}),n.prototype.getLightMode=function(e){return A[this._u32view[e*N.size+N.lightMode]]},n.prototype.setLightMode=function(t,n){this._u32view[t*N.size+N.lightMode]=e.ELightMode[n]},n.prototype.getUseMaterialStates=function(e){return!!this._u32view[e*N.size+N.useMaterialStates]},n.prototype.setUseMaterialStates=function(e,t){this._u32view[e*N.size+N.useMaterialStates]=t?1:0},n.prototype.getBlendOn=function(e){return rt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendOn=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=nt(this._u32view[n],t)},n.prototype.getBlendSrc=function(e){return ut(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendSrc=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=ot(this._u32view[n],t),this._u32view[n]=st(this._u32view[n],t)},n.prototype.getBlendDst=function(e){return lt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendDst=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=at(this._u32view[n],t),this._u32view[n]=ct(this._u32view[n],t)},n.prototype.getBlendSrcRGB=function(e){return ut(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendSrcRGB=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=ot(this._u32view[n],t)},n.prototype.getBlendSrcAlpha=function(e){return dt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendSrcAlpha=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=st(this._u32view[n],t)},n.prototype.getBlendDstRGB=function(e){return lt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendDstRGB=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=at(this._u32view[n],t)},n.prototype.getBlendDstAlpha=function(e){return ft(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendDstAlpha=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=ct(this._u32view[n],t)},n.prototype.getBlendFunc=function(e){return vt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setBlendFunc=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=ht(this._u32view[n],t),this._u32view[n]=gt(this._u32view[n],t)},n.prototype.getDepthTestOn=function(e){return mt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setDepthTestOn=function(t,n){var r=t*N.size+N.colorDepth;this._u32view[r]=yt(this._u32view[r],n?e.ECompareFunc.LEQUAL:0)},n.prototype.getDepthTestComp=function(e){return bt(this._u32view[e*N.size+N.colorDepth])},n.prototype.setDepthTestComp=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=yt(this._u32view[n],t)},n.prototype.getDepthWrite=function(e){return et(this._u32view[e*N.size+N.colorDepth])},n.prototype.setDepthWrite=function(e,t){var n=e*N.size+N.colorDepth;this._u32view[n]=Qe(this._u32view[n],t)},n.prototype.getCullFace=function(e){return Ht(this._u32view[e*N.size+N.state])},n.prototype.setCullFace=function(e,t){var n=e*N.size+N.state;this._u32view[n]=Gt(this._u32view[n],t)},n.prototype.getCullOn=function(e){return zt(this._u32view[e*N.size+N.state])},n.prototype.setCullOn=function(t,n){var r=t*N.size+N.state;this._u32view[r]=Gt(this._u32view[r],n?e.ECullMode.BACK:e.ECullMode.NONE)},n.prototype.getPrimitiveType=function(e){return Kt(this._u32view[e*N.size+N.state])},n.prototype.setPrimitiveType=function(e,t){var n=e*N.size+N.state;this._u32view[n]=qt(this._u32view[n],t)},n.prototype.getStencilTestOn=function(e){return kt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilTestOn=function(t,n){var r=t*N.size+N.bstencil,i=Ct(this._u32view[r],n?e.ECompareFunc.LEQUAL:0);this._u32view[r]=i,r=t*N.size+N.fstencil,this._u32view[r]=i},n.prototype.getStencilComp=function(e){return xt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilComp=function(e,t){var n=e*N.size+N.bstencil,r=Ct(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilPass=function(e){return Bt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilPass=function(e,t){var n=e*N.size+N.bstencil,r=Nt(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilFail=function(e){return Mt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilFail=function(e,t){var n=e*N.size+N.bstencil,r=Rt(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilZFail=function(e){return Lt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilZFail=function(e,t){var n=e*N.size+N.bstencil,r=jt(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilWriteMask=function(e){return Wt(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilWriteMask=function(e,t){var n=e*N.size+N.bstencil,r=Ut(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilReadMask=function(e){return Et(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilReadMask=function(e,t){var n=e*N.size+N.bstencil,r=Ot(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.getStencilRef=function(e){return It(this._u32view[e*N.size+N.fstencil])},n.prototype.setStencilRef=function(e,t){var n=e*N.size+N.bstencil,r=Tt(this._u32view[n],t);this._u32view[n]=r,n=e*N.size+N.fstencil,this._u32view[n]=r},n.prototype.showDebugInfo=function(){for(var t="",n=0;n<this._passCount;n+=1)t+="Pass: "+n+":\nLightMode("+e.ELightMode[this.getLightMode(n)]+"), PrimitiveType("+e.EPrimitiveType[this.getPrimitiveType(n)]+"),\nBlendOn("+this.getBlendOn(n)+"), BlendSrc("+e.EBlendFactor[this.getBlendSrcRGB(n)]+","+e.EBlendFactor[this.getBlendSrcAlpha(n)]+"), BlendDst("+e.EBlendFactor[this.getBlendDstRGB(n)]+","+e.EBlendFactor[this.getBlendDstAlpha(n)]+"), BlendFunc("+e.EBlendEquation[this.getBlendFunc(n)]+"),\nDepthTestOn("+this.getDepthTestOn(n)+"), DepthTestComp("+e.ECompareFunc[this.getDepthTestComp(n)]+"), DepthWrite("+this.getDepthWrite(n)+"),\nCullOn("+this.getCullOn(n)+"), CullFace("+e.ECullMode[this.getCullFace(n)]+"),\nStencilTestOn("+this.getStencilTestOn(n)+"), StencilComp("+e.ECompareFunc[this.getStencilComp(n)]+"), StencilPass("+e.EStencilOp[this.getStencilPass(n)]+"), StencilFail("+e.EStencilOp[this.getStencilFail(n)]+"), StencilZFail("+e.EStencilOp[this.getStencilZFail(n)]+"),\nStencilWriteMask("+this.getStencilWriteMask(n)+"), StencilReadMask("+this.getStencilReadMask(n)+"), StencilRef("+this.getStencilRef(n)+")\n      ";return t},n.OFFSETS=N,n}(se),$t=ae.worker,Zt=function(t){function n(n,r){var i=t.call(this)||this,o=$t.createMaterial(r);return o.id<0||!o.data||(i._handle=o,i._init(o),i._initU32View(),i.blendSrcAlpha=e.EBlendFactor.ZERO,i.blendDstAlpha=e.EBlendFactor.ONE,i.renderQueue=2e3,n&&(i.effect=n),r&&(i.uniforms=r)),i}return H(n,t),Object.defineProperty(n.prototype,"shaders",{get:function(){return this._shaders},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"effect",{get:function(){return this._effect},set:function(e){this._shaders=new Array(e.passCount),this._u32view[M.effect]=e.id,this._effect=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"uniforms",{get:function(){return this._uniforms},set:function(e){this._u32view[M.uniformBlock]=e.id,this._uniforms=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"renderQueue",{get:function(){return this._u32view[M.renderQueue]},set:function(e){this._u32view[M.renderQueue]=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendOn",{get:function(){return rt(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=nt(this._u32view[t],e),this._u32view[M.colorDepthMask]|=tt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendSrcRGB",{get:function(){return ut(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=ot(this._u32view[t],e),this._u32view[M.colorDepthMask]|=3840},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendSrcRGBChanged",{get:function(){return!!(3840&this._u32view[M.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendSrcAlpha",{get:function(){return dt(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=st(this._u32view[t],e),this._u32view[M.colorDepthMask]|=983040},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendSrc",{set:function(e){this.blendSrcRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendDstRGB",{get:function(){return lt(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=at(this._u32view[t],e),this._u32view[M.colorDepthMask]|=61440},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendDstRGBChanged",{get:function(){return!!(61440&this._u32view[M.colorDepthMask])},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendDstAlpha",{get:function(){return ft(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=ct(this._u32view[t],e),this._u32view[M.colorDepthMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendDst",{set:function(e){this.blendDstRGB=e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"blendFunc",{get:function(){return vt(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=ht(this._u32view[t],e),this._u32view[t]=gt(this._u32view[t],e),this._u32view[M.colorDepthMask]|=pt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTestOn",{get:function(){return mt(this._u32view[M.colorDepth])},set:function(t){var n=M.colorDepth;this._u32view[n]=yt(this._u32view[n],t?e.ECompareFunc.LEQUAL:0),this._u32view[M.colorDepthMask]|=_t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthTestComp",{get:function(){return bt(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=yt(this._u32view[t],e),this._u32view[M.colorDepthMask]|=_t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"depthWrite",{get:function(){return et(this._u32view[M.colorDepth])},set:function(e){var t=M.colorDepth;this._u32view[t]=Qe(this._u32view[t],e),this._u32view[M.colorDepthMask]|=Ze},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cullFace",{get:function(){return Ht(this._u32view[M.state])},set:function(e){var t=M.state;this._u32view[t]=Gt(this._u32view[t],e),this._u32view[M.stateMask]|=Vt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cullOn",{get:function(){return zt(this._u32view[M.state])},set:function(t){var n=M.state;this._u32view[n]=Gt(this._u32view[n],t?e.ECullMode.BACK:e.ECullMode.NONE),this._u32view[M.stateMask]|=Vt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"primitiveType",{get:function(){return Kt(this._u32view[M.state])},set:function(e){var t=M.state;this._u32view[t]=qt(this._u32view[t],e),this._u32view[M.stateMask]|=Yt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilTestOn",{get:function(){return kt(this._u32view[M.fstencil])},set:function(t){var n=M.bstencil,r=Ct(this._u32view[n],t?e.ECompareFunc.LEQUAL:0);this._u32view[n]=r,n=M.fstencil,this._u32view[n]=r,this._u32view[M.bstencilMask]|=At,this._u32view[M.fstencilMask]|=At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilComp",{get:function(){return xt(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=Ct(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=At,this._u32view[M.fstencilMask]|=At},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilPass",{get:function(){return Bt(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=Nt(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=4026531840,this._u32view[M.fstencilMask]|=4026531840},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilFail",{get:function(){return Mt(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=Rt(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=15728640,this._u32view[M.fstencilMask]|=15728640},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilZFail",{get:function(){return Lt(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=jt(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=251658240,this._u32view[M.fstencilMask]|=251658240},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilWriteMask",{get:function(){return Wt(this._u32view[M.fstencil])},set:function(e){var t=M.state,n=Ut(this._u32view[t],e);this._u32view[t]=n,t=M.state,this._u32view[t]=n,this._u32view[M.stateMask]|=Ft,this._u32view[M.stateMask]|=Ft},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilReadMask",{get:function(){return Et(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=Ot(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=wt,this._u32view[M.fstencilMask]|=wt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"stencilRef",{get:function(){return It(this._u32view[M.fstencil])},set:function(e){var t=M.bstencil,n=Tt(this._u32view[t],e);this._u32view[t]=n,t=M.fstencil,this._u32view[t]=n,this._u32view[M.bstencilMask]|=St,this._u32view[M.fstencilMask]|=St},enumerable:!1,configurable:!0}),n.prototype.setShader=function(e,t){this._shaders[e]=t},n.prototype.getShader=function(e){return this._shaders[e]},n.prototype.clone=function(e){var t=new n(this._effect);return t._f32view.set(this._f32view),t.uniforms=e||this._uniforms.clone(),t},n.prototype.copyState=function(e){var t=this._f32view[M.effect];this._f32view.set(e._f32view),this._f32view[M.effect]=t},n.prototype.showDebugInfo=function(){var t="";return t+="RenderQueue("+this.renderQueue+"), PrimitiveType("+e.EPrimitiveType[this.primitiveType]+"),\nOverwrite("+this._u32view[M.fstencilMask].toString(16)+", "+this._u32view[M.bstencilMask].toString(16)+", "+this._u32view[M.blendRGBAMask].toString(16)+", "+this._u32view[M.colorDepthMask].toString(16)+", "+this._u32view[M.stateMask].toString(16)+"),\nBlendOn("+this.blendOn+"), BlendSrc("+e.EBlendFactor[this.blendSrcRGB]+","+e.EBlendFactor[this.blendSrcAlpha]+"), BlendDst("+e.EBlendFactor[this.blendDstRGB]+","+e.EBlendFactor[this.blendDstAlpha]+"), BlendFunc("+e.EBlendEquation[this.blendFunc]+"),\nDepthTestOn("+this.depthTestOn+"), DepthTestComp("+e.ECompareFunc[this.depthTestComp]+"), DepthWrite("+this.depthWrite+"),\nCullOn("+this.cullOn+"), CullFace("+e.ECullMode[this.cullFace]+"),\nStencilTestOn("+this.stencilTestOn+"), StencilComp("+e.ECompareFunc[this.stencilComp]+"), StencilComp("+e.EStencilOp[this.stencilPass]+"), StencilFail("+e.EStencilOp[this.stencilFail]+"), StencilZFail("+e.EStencilOp[this.stencilZFail]+"),\nStencilWriteMask("+this.stencilWriteMask+"), StencilReadMask("+this.stencilReadMask+"), StencilRef("+this.stencilRef+")\n      "},n.OFFSETS=M,n}(se),Qt=ae.worker,en=function(e){function t(t){var n=e.call(this)||this,r=t;return r.colors.forEach((function(e,t){e.texture=e.texture.__handle})),r.depth.texture=r.depth.texture.__handle,t.stencil?r.stencil.texture=r.stencil.texture.__handle:r.stencil=r.depth,n._handle=Qt.createRenderPass(r),n}return H(t,e),t}(je),tn=ae.worker,nn=function(e){function t(n,r,i){var o=e.call(this)||this;return i&&t.CACHE[i]?t.CACHE[i]:(o._handle=tn.createShader(n,r),i&&(t.CACHE[i]=o),o)}return H(t,e),t.CACHE={},t}(je),rn=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return H(n,t),n.prototype.setBoneInverseMatrix=function(t){var n=new Float32Array(t.length);n.set(t),this._createNativeModel(e.EDataModelType.SkeletonBoneInverse,n.buffer)},n}(Me),on=ae.worker,an=ae.Image,sn=function(t){function n(n){var r=t.call(this)||this;r._width=n.width,r._height=n.height,r._type=n.type||e.ETextureType.D2,r._slice=n.slices||0,r._mips=n.mips||0,r._pixelFormat=n.pixelFormat||e.ETextureFormat.RGBA8,r._flags=r._buildFlags(n);var i=n.buffer instanceof an?n.buffer.data:void 0===n.buffer?null:n.buffer;if(r._handle=on.createTexture(r._type,r._width,r._height,r._slice,r._mips,r._pixelFormat,r._flags,n.offsets?null:i),r._handle){if(n.offsets)for(var o=n.offsets.length/2,a=0;a<o;a+=1){var s=n.offsets[2*a],c=n.offsets[2*a+1];r.update({level:a,buffer:new Uint8Array(i instanceof ArrayBuffer?i:i.buffer,s,c)})}}else r._handle={id:0};return r}return H(n,t),Object.defineProperty(n.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"slice",{get:function(){return this._slice},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"mips",{get:function(){return this._mips},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"pixelFormat",{get:function(){return this._pixelFormat},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wrapU",{get:function(){return(7&this._flags)>>0},set:function(e){on.updateFlags(this.__handle,Ge(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wrapV",{get:function(){return(56&this._flags)>>3},set:function(e){on.updateFlags(this.__handle,He(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"wrapW",{get:function(){return(448&this._flags)>>6},set:function(e){on.updateFlags(this.__handle,ze(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"magFilter",{get:function(){return(12288&this._flags)>>12},set:function(e){on.updateFlags(this.__handle,qe(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minFilter",{get:function(){return(3584&this._flags)>>9},set:function(e){on.updateFlags(this.__handle,Ye(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"anisoLevel",{get:function(){return(this._flags&Ve)>>21},set:function(e){on.updateFlags(this.__handle,Xe(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampleCount",{get:function(){return(this._flags&We)>>17},set:function(e){on.updateFlags(this.__handle,Je(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"generateMipmaps",{get:function(){return!!(this._flags&Fe)},set:function(e){on.updateFlags(this.__handle,Ke(this._flags,e))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRenderTarget",{get:function(){return!!(this._flags&Ue)},set:function(e){on.updateFlags(this.__handle,$e(this._flags,e))},enumerable:!1,configurable:!0}),n.prototype.update=function(e){var t=e.level||0;on.updateTexture(this.__handle,t,e.slice||0,e.xoffset||0,e.yoffset||0,e.zoffset||0,e.width||this.width>>t||1,e.height||this.height>>t||1,e.buffer)},n.prototype._buildFlags=function(e){var t;return this._flags=Ge(0,e.wrapU),this._flags=He(this._flags,e.wrapV),this._flags=ze(this._flags,e.warpW),this._flags=qe(this._flags,e.magFilter),this._flags=Ye(this._flags,e.minFilter),this._flags=Xe(this._flags,e.anisoLevel),this._flags=Je(this._flags,e.sampleCount),this._flags=Ke(this._flags,e.generateMipmaps),this._flags=$e(this._flags,e.isRenderTarget),this._flags=(t=this._flags,e.isWriteOnly?65536|t:-65537&t),this._flags},n.prototype.showDebugInfo=function(){var t="";return t+="type("+e.ETextureType[this.type]+"), format("+e.ETextureFormat[this.pixelFormat]+"),\nwidth("+this.width+"), height("+this.height+"), slice("+this.slice+"), mips("+this.mips+"),\nwrapU("+e.EWrapMode[this.wrapU]+"), wrapV("+e.EWrapMode[this.wrapV]+"), wrapW("+e.EWrapMode[this.wrapW]+"),\nmagFilter("+e.EFilterMode[this.magFilter]+"), minFilter("+e.EFilterMode[this.minFilter]+"),\nanisoLevel("+this.anisoLevel+"), sampleCount("+this.sampleCount+"), generateMipmaps("+this.generateMipmaps+")\n    "},n}(je),cn=ae.worker,un=function(t){function n(e){var n=t.call(this)||this;return n._handle=n._createNativeObj(e),n._handle.data&&(n._f32View=new Float32Array(n._handle.data),n._u32View=new Uint32Array(n._handle.data)),n._descriptor=e,n}return H(n,t),n.CREATE_FAKE=function(e){return new ln(e)},Object.defineProperty(n.prototype,"_dataView",{get:function(){return this._f32View},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"descriptor",{get:function(){return this._descriptor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"textures",{get:function(){return this._textures},enumerable:!1,configurable:!0}),n.prototype._createNativeObj=function(e){return cn.createUniformBlock(e.__handle)||{id:0}},n.prototype.hasKey=function(e){return this._descriptor.hasKey(e)},n.prototype.setUniform=function(t,n){var r=this._descriptor.layout[t];r&&(r[0]===e.EUniformType.SAMPLER&&(n instanceof sn?(this._textures=this._textures||{},this._textures[t]=n,n=n.id):this._textures&&(this._textures[t]=void 0)),this._descriptor.setUniform(t,n,this._f32View,this._u32View))},n.prototype.getUniform=function(e){return this._descriptor.getUniform(e,this._f32View,this._u32View)},n.prototype._getFloatOffset=function(e){return this._descriptor._getFloatOffset(e)},n.prototype.setAllData=function(e){this._f32View.set(e,0)},n.prototype.clone=function(){var e=new n(this._descriptor);return this._textures&&(e._textures=Object.assign({},this._textures)),e._f32View.set(this._f32View),e},n.prototype.copy=function(e){var t=e.descriptor.layout;for(var n in t)if(this.hasKey(n)){var r=e.getUniform(n);this.setUniform(n,r),e._textures&&e._textures[n]&&(this._textures=this._textures||{},this._textures[n]=e._textures[n])}},n.prototype.showDebugInfo=function(){var e=this,t="";return Object.keys(this._descriptor.layout).forEach((function(n){var r=e._descriptor.getUniform(n,e._f32View,e._u32View);t+=n+": ["+("number"==typeof r?[r]:r).join(",")+"]\n"})),t},n}(je),ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return H(t,e),t.prototype._createNativeObj=function(e){return{id:0,data:new ArrayBuffer(4*e.size)}},t}(un),dn=ae.worker,fn=function(t){function n(n){var r=t.call(this)||this;r._layout={};var i=0;return n.uniforms.forEach((function(t){var n=t.type;t.type===e.EUniformType.MAT4&&(t.type=e.EUniformType.FLOAT4,t.num=4*(t.num||1));var o=void 0!==t.num?t.num:1,a=r._getLength(t.type),s=i+a*o;r._layout[t.name]=[t.type,i,o,a,n],i=s})),r._size=i,r._handle=dn.createUniformBlockDescriptor(n)||{id:0},r}return H(n,t),Object.defineProperty(n.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),n.prototype._getLength=function(t){var n=0;switch(t){case e.EUniformType.FLOAT:n=1;break;case e.EUniformType.FLOAT2:n=2;break;case e.EUniformType.FLOAT3:n=3;break;case e.EUniformType.FLOAT4:n=4;case e.EUniformType.MAT2:n=4;break;case e.EUniformType.MAT3:n=9;break;case e.EUniformType.MAT4:n=16;break;case e.EUniformType.SAMPLER:n=1}return n},n.prototype.hasKey=function(e){return void 0!==this._layout[e]},n.prototype.setUniform=function(t,n,r,i){var o=this._layout[t];if(o){var a=o[0],s=o[1];switch(a){case e.EUniformType.FLOAT:case e.EUniformType.FLOAT2:case e.EUniformType.FLOAT3:case e.EUniformType.FLOAT4:case e.EUniformType.MAT2:case e.EUniformType.MAT3:case e.EUniformType.MAT4:this._setFloatArray(s,n,r);break;case e.EUniformType.SAMPLER:this._setTexture(s,n,i)}}},n.prototype._setFloatArray=function(e,t,n){n.set(t,e)},n.prototype._setTexture=function(e,t,n){n[e]=t},n.prototype.getUniform=function(t,n,r){var i=this._layout[t];if(!i)return null;var o=i[0],a=i[1],s=i[2],c=i[3];switch(o){case e.EUniformType.FLOAT:case e.EUniformType.FLOAT2:case e.EUniformType.FLOAT3:case e.EUniformType.FLOAT4:case e.EUniformType.MAT2:case e.EUniformType.MAT3:case e.EUniformType.MAT4:return new Float32Array(n.buffer,4*a,s*c);case e.EUniformType.SAMPLER:return r[a]}},n.prototype._getFloatOffset=function(e){var t=this._layout[e];return t?t[1]:-1},n}(je),pn=ae.worker,hn=function(e){function t(t){var n=e.call(this)||this;return n._handle=pn.createIndexBuffer(t)||{id:0},n._byteSize=t.byteLength,n}return H(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){pn.updateIndexBuffer(this.__handle,e,t)},t}(je),gn=ae.worker,vn=function(e){function t(t){var n=e.call(this)||this;return n._handle=gn.createIndexData(t),n}return H(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(je),_n=ae.worker,yn=function(e){function t(t,n){var r=e.call(this)||this;return r._handle=_n.createVertexBuffer(t,n.__handle)||{id:0},r._layout=n,r._byteSize=t.byteLength,r}return H(t,e),Object.defineProperty(t.prototype,"byteSize",{get:function(){return this._byteSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),t.prototype.update=function(e,t){_n.updateVertexBuffer(this.__handle,e,t)},t}(je),mn=ae.worker,bn=function(e){function t(t,n){var r=e.call(this)||this;return r._handle=mn.createVertexData(t.__handle,n),r._layout=t,r}return H(t,e),Object.defineProperty(t.prototype,"layout",{get:function(){return this._layout},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._handle.data},enumerable:!1,configurable:!0}),t}(je),wn=ae.worker,On=function(e){function t(t){var n=e.call(this)||this;return n._attributes={},n._usages={},n._options=t,t.attributes.forEach((function(e){n._attributes[e.name]=e,n._usages[e.usage]=e})),n._handle=wn.createVertexLayout(t),n}return H(t,e),Object.defineProperty(t.prototype,"stride",{get:function(){return this._options.stride},enumerable:!1,configurable:!0}),t.prototype.getConfigByName=function(e){return this._attributes[e]},t.prototype.getConfigByUsage=function(e){return this._usages[e]},t}(je),En=ae.worker,Sn=function(e){function t(t){var n=e.call(this)||this,r={pass:t.pass?t.pass.__handle:{id:0},passAction:t.passAction,viewport:t.viewport,scissor:t.scissor};return n._handle=En.createView(r),n._renderPass=t.pass,n}return H(t,e),Object.defineProperty(t.prototype,"renderToScreen",{get:function(){return!this._renderPass},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderPass",{get:function(){return this._renderPass},enumerable:!1,configurable:!0}),t}(je),Tn=ae.worker,In=ae.IS_VALID,An=ae.Image,Cn=Tn.downloader;Object.defineProperty("undefined"==typeof module?e:module.exports,"IS_VALID",{get:function(){return In()}});var kn=Tn.drawDefaultScene,xn=Tn.createWeakRef,Pn=Tn.createAutoRef,Dn=Tn.createWeakRefSentry,Rn=Tn.createNativeUUMap,jn=Tn.createNativeSUMap,Nn=Tn.createNativeULUMap,Mn=Tn.loadTTFFont,Ln=Tn.getGlyphInfo,Bn=Tn.refreshNodesWorldTransform,Fn=Tn.update;var Un=Tn.eventBridge,Wn={uiRenderListReset:Un.uiRenderListReset.bind(Un),uiRenderListEnd:Un.uiRenderListEnd.bind(Un),uiRenderListAddUIComponent:function(e){return 0!==e.id&&Un.uiRenderListAddUIComponent(e.__handle)},bindEntitiesToBones:Un.bindEntitiesToBones.bind(Un),unbindEntitiesFromBones:Un.unbindEntitiesFromBones.bind(Un)},Vn=(NativeGlobal||{}).Puppet;e.AnimationClipModel=Le,e.AnimatorComponent=he,e.CAMERA_COMPONENT_OFFSETS=D,e.CULLING_COMPONENT_OFFSETS=P,e.CameraComponent=fe,e.CullingComponent=Se,e.DataBuffer=Be,e.DataModel=Me,e.Downloader=Cn,e.EFFECT_OFFSETS=N,e.ENTITY2D_OFFSETS=k,e.ENTITY3D_OFFSETS=x,e.Effect=Xt,e.Entity2D=ke,e.Entity3D=Re,e.Image=An,e.IndexBuffer=hn,e.IndexData=vn,e.LIGHT_CAMERA_COMPONENT_OFFSETS=R,e.LIGHT_MODES_B=A,e.LightCameraComponent=ve,e.MATERIAL_OFFSETS=M,e.MESH_RENDER_COMPONENT_OFFSETS=j,e.Material=Zt,e.MeshRendererComponent=ue,e.POOL_SUB_ID_MASK=C,e.POOL_SUB_ID_SHIT=6,e.Puppet=Vn,e.RenderPass=en,e.SKINNED_SKELETON_OFFSETS=L,e.Shader=nn,e.SkeletonBoneInverseModel=rn,e.SkinnedSkeletonComponent=Ie,e.Texture=sn,e.UniformBlock=un,e.UniformDescriptor=fn,e.VERSION="0.8.8",e.VertexBuffer=yn,e.VertexData=bn,e.VertexLayout=On,e.View=Sn,e.composeRawBufferEntity2D=function(e,t,n){var r=new ArrayBuffer(4*k.size),i=new Float32Array(r);return i[k.rotation]=e,i[k.position]=t[0],i[k.position+1]=t[1],i[k.scale]=n[0],i[k.scale+1]=n[1],i},e.composeRawBufferEntity3D=function(e,t,n,r){var i=new ArrayBuffer(4*(x.size-16)),o=new Uint32Array(i),a=new Float32Array(i);return o[x.rotationType]=e?0:1,a.set(t,x.rotation),a.set(n,x.position),a.set(r,x.scale),a},e.composeRawBufferEntity3DWhole=function(e,t,n,r){var i=new ArrayBuffer(4*x.size),o=new Uint32Array(i),a=new Float32Array(i);return o[x.rotationType]=e?0:1,a.set(t,x.rotation),a.set(n,x.position),a.set(r,x.scale),a},e.createAutoRef=Pn,e.createNativeSUMap=jn,e.createNativeULUMap=Nn,e.createNativeUUMap=Rn,e.createWeakRef=xn,e.createWeakRefSentry=Dn,e.debugPrint=function(e){},e.drawDefaultScene=kn,e.eventBridge=Wn,e.getGlyphInfo=Ln,e.loadTTFFont=Mn,e.refreshNodesWorldTransform=Bn,e.registerUnknownRenderTypeCallback=function(e){In()&&Tn.registerCullingCallback((function(t,n){e(new Uint32Array(n),ue.TABLE,fe.TABLE[t])}))},e.setNodeName=function(e,t){},e.setRenderComponentName=function(e,t){},e.update=Fn,Object.defineProperty(e,"__esModule",{value:!0})}));var __appServiceSDK__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=222)}([function(e,t,n){n.r(t),n.d(t,"publish",(function(){return r.publish})),n.d(t,"subscribe",(function(){return i.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return o.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return o.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return o.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return o.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return o.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return o.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return o._invokeMethod})),n.d(t,"onMethod",(function(){return a.onMethod})),n.d(t,"beforeInvoke",(function(){return u})),n.d(t,"beforeInvokePromise",(function(){return l})),n.d(t,"beforeInvokeFail",(function(){return d})),n.d(t,"beforeInvokeComplete",(function(){return f})),n.d(t,"beforeInvokeCallback",(function(){return p})),n.d(t,"invoke",(function(){return h.invoke})),n.d(t,"on",(function(){return g.on})),n.d(t,"baseOperateWXData",(function(){return k}));var r=n(157),i=n(159),o=n(142),a=n(162),s=n(33),c=n(10);function u(e,t,n){var r=Object(c.paramCheck)(t,n);return!r||(d(e,t,"parameter error: "+r),!1)}function l(e,t){var n=Object(c.paramCheck)(e,t);if(n)throw new Error("parameter error: "+n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;p({name:e,args:t,errMsg:n,errCode:r,success:!1})}function f(e){var t=e.name,n=e.args,r=void 0===n?{}:n,i=e.errMsg,o=void 0===i?"":i,a=e.res,c=void 0===a?{}:a;r=r||{};var u=t+":"+o,l=__errorTracer__.surroundThirdByTryCatch(r.complete||s.noop,"at api "+t+" complete callback function");c.errMsg=u,l(c)}function p(e){var t=e.name,n=e.args,r=void 0===n?{}:n,i=e.success,o=void 0===i||i,a=e.errMsg,u=void 0===a?"":a,l=e.errCode,d=e.res,f=void 0===d?{}:d;r=r||{};var p=o?t+":ok":t+":fail "+u,h=__errorTracer__.surroundThirdByTryCatch((o?r.success:r.fail)||s.noop,"at api "+t+" "+(o?"success":"fail")+" callback function"),g=__errorTracer__.surroundThirdByTryCatch(r.complete||s.noop,"at api "+t+" complete callback function");f.errMsg=p,Object(c.isNumber)(l)&&(f.errCode=l),h(f),g(f)}var h=n(161),g=n(163),v=(n(158),n(160),n(17)),_=n(1),y=n(12),m="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",b="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function w(e){return function(t){return Object(c.isString)(t)&&t.length>e?t.substr(0,e):t}}function O(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(c.getDataType)(e);switch(n){case"Number":case"Boolean":return e;case"String":return w(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:"+O(e.message)+"|"+O(e.stack)+"]";case"Object":return t?Object.keys(e).map((function(t){return O(t)+"="+O(e[t],!1)})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"["+n+"]";default:return"["+n+"]"}}function E(e){var t=e.WXDataApiName,n=e.argument,r=e.isSuccess,i=e.invokeTime,o=e.costTime,a=e.result,s=e.errMsg,c=e.isConfirm,u=e.queueLength,l=e.wxdataQueueTimestamp,d=e.wxdataDequeueTimestamp,f=e.beginCGITimestamp,p=e.CGICallbackTimestamp,h=e.beginCGITimestampAfterConfirm,g=e.CGICallbackTimestampAfterConfirm,v=e.wxlibCallbackTimestamp,E=e.requestInQueue,S=e.requestingCount,T=e.cost1,I=e.cost2,A=e.cost3,C=e.cost4,k=e.cost5,x=e.cost6;Math.random()<.05&&setTimeout((function(){var e=y.default.currentNetworkType,P=_.default.appType+1e3,D=_.default.appLaunchInfo&&void 0!==_.default.appLaunchInfo.scene?_.default.appLaunchInfo.scene:0,R=[t,O(JSON.stringify(n)),r?1:0,i,o,e,O(a),P,D,m,b,s&&O(s)||"",c?1:0,u,T,I,A,C,k,x,0,E?1:0,S,i,l,d,f,p,h,g,v].map(w(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:R})}),0)}Object(c.isString)(m)&&(m=m.replace(" ","")),Object(c.isString)(b)&&(b=b.replace(" ","-"));var S=0,T=wxNativeConsole.createLogger("baseOperateWXData"),I=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],A=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],C=["qbase_commapi","webapi_botdemo"];function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);n._isFromBaseOperateWXData=!0;var r=t.beforeAll,i=t.beforeSuccess,a=t.beforeFail,s=n.data&&n.data.api_name;I.includes(s)?n.requestInQueue=!0:n.requestInQueue=!1,A.includes(s)?n.isImportant=!0:n.isImportant=!1,C.includes(n.data&&n.data.api_name)&&(n.keepAlive=!0);var c={WXDataApiName:s,argument:n,invokeTime:Date.now(),requestInQueue:n.requestInQueue,requestingCount:++S};T.info(n.data.api_name+" _options.requestInQueue",n.requestInQueue);for(var u=arguments.length,l=new Array(u>2?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];o.invokeMethod.apply(void 0,["operateWXData",n,{beforeAll:function(e){var n=Date.now();S--,c.costTime=n-c.invokeTime;try{if(e&&e.data&&e.data.data?c.result=JSON.stringify(e.data):c.result=e.data,e.clientInfo&&"object"===Object(v.default)(e.clientInfo)){var i=e.clientInfo;Object.keys(i).forEach((function(e){c[e]=i[e]})),c.cost1=i.wxdataQueueTimestamp-c.invokeTime,c.cost2=i.wxdataDequeueTimestamp-i.wxdataQueueTimestamp,c.cost3=i.beginCGITimestamp-i.wxdataDequeueTimestamp,c.cost4=i.CGICallbackTimestamp-i.beginCGITimestamp,c.cost5=i.wxlibCallbackTimestamp-i.CGICallbackTimestamp,c.cost6=n-i.wxlibCallbackTimestamp}}catch(e){T.error(e)}"function"==typeof r&&r.call(t,e)},beforeSuccess:function(e){c.isSuccess=!0,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof i&&i.call(t,e),E(c)},beforeFail:function(e){c.isSuccess=!1,c.errMsg=e.errMsg,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof a&&a.call(t,e),E(c)}}].concat(l))}},function(e,t,n){n.r(t);var r=__wxConfig;t.default=r},function(e,t,n){n.r(t),n.d(t,"PLATFORM",(function(){return i})),n.d(t,"IS_DEVTOOLS",(function(){return o})),n.d(t,"IS_ANDROID",(function(){return a})),n.d(t,"IS_IOS",(function(){return s})),n.d(t,"IS_WINDOWS",(function(){return c})),n.d(t,"IS_MAC",(function(){return u})),n.d(t,"IS_MINA",(function(){return l})),n.d(t,"IS_PC",(function(){return d})),n.d(t,"debugEnabled",(function(){return f})),n.d(t,"HOST",(function(){return p})),n.d(t,"IS_HOST_SDK",(function(){return h})),n.d(t,"IS_HOST_WMPF",(function(){return g})),n.d(t,"IS_HOST_WECHAT",(function(){return v})),n.d(t,"IS_USE_NATIVE_MAP",(function(){return _}));var r=n(1),i=r.default.platform,o="devtools"===r.default.platform,a="android"===r.default.platform,s="ios"===r.default.platform,c="windows"===r.default.platform,u="mac"===r.default.platform,l="mina"===r.default.platform,d=c||u;function f(){if(r.default&&"debug"in r.default&&void 0!==r.default.debug)return!!r.default.debug}var p=r.default.host||{},h="SDK"===p.env,g="WMPF"===p.env,v="WeChat"===p.env,_=p.forceUseNativeMap||!1},function(e,t,n){n.r(t),n.d(t,"Component",(function(){return l})),n.d(t,"getPrivateThis",(function(){return s})),n.d(t,"removePrivateThis",(function(){return u})),n.d(t,"init",(function(){return d})),n.d(t,"create",(function(){return c}));var r=n(4),i=n(22),o=n(14),a=new WeakMap,s=function(e){return a.get(e)},c=function e(t){var n=this,r=s(this),a={view:i.View,text:i.Text,image:i.Image,video:i.Video,"image-previewer":i.ImagePreviewer}[t.name],c="";t.attributes.id?c=Object(o.splitLineToCamelCase)(t.attributes.id):wxNativeConsole.error(t.name+" 缺少id");var u=Object.keys(t.attributes).reduce((function(e,n){var i=t.attributes[n],a=Object(o.splitLineToCamelCase)(n);return"id"===n?(e.style=Object.assign(e.style||{},r.style[c]),e):"class"===n?(e.style=i.split(/\s+/).reduce((function(e,t){return Object.assign(e,r.style[t])}),e.style||{}),e):(/\{\{.+\}\}/.test(i)||(e[a]=""===i||"true"===i||"false"!==i&&i),e)}),{});u.name=c;var l=new a(u);return r[c]=l,t.children.forEach((function(t){var r=e.call(n,t);l.add(r)})),l},u=function(e){a.delete(e)},l=function e(){Object(r.default)(this,e);a.set(this,{})},d=function(e,t,n){var r=s(this);r.xom=e,r.style=t,r.state=n,c.call(this,e)}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",(function(){return i}))},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return v})),n.d(t,"getRealRoute",(function(){return _})),n.d(t,"convertProtocolPath",(function(){return y})),n.d(t,"getRealRouteWithProtocol",(function(){return m})),n.d(t,"getRouteDomain",(function(){return b})),n.d(t,"routesHaveSameDomain",(function(){return w})),n.d(t,"urlEncodeFormData",(function(){return O})),n.d(t,"getQueryString",(function(){return E})),n.d(t,"addQueryStringToUrl",(function(){return S})),n.d(t,"validateUrl",(function(){return T})),n.d(t,"assign",(function(){return I})),n.d(t,"encodeUrlQuery",(function(){return A})),n.d(t,"transWxmlToHtml",(function(){return C})),n.d(t,"removeHtmlSuffixFromUrl",(function(){return k})),n.d(t,"AppServiceSdkKnownError",(function(){return x})),n.d(t,"ThirdScriptError",(function(){return P})),n.d(t,"extend",(function(){return D})),n.d(t,"arrayBufferToBase64",(function(){return M})),n.d(t,"base64ToArrayBuffer",(function(){return L})),n.d(t,"blobToArrayBuffer",(function(){return B})),n.d(t,"convertObjectValueToString",(function(){return F})),n.d(t,"guid",(function(){return U})),n.d(t,"checkClientVersion",(function(){return V})),n.d(t,"renameProperty",(function(){return G})),n.d(t,"compareVersion",(function(){return H})),n.d(t,"successCallback",(function(){return z})),n.d(t,"successWithMessage",(function(){return Y})),n.d(t,"failWithMessage",(function(){return q}));var r=n(4),i=n(15),o=n(18),a=n(9),s=n(154),c=n(17),u=n(1),l=n(10),d=n(2),f=n(79);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(a.default)(e);if(t){var i=Object(a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}n.d(t,"paramCheck",(function(){return l.paramCheck})),n.d(t,"getDataType",(function(){return l.getDataType})),n.d(t,"isObject",(function(){return l.isObject}));var h=/^[-+a-zA-Z0-9]+:\/\//,g=/^__[-+a-zA-Z0-9]+__\//;function v(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function _(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n&&(t=C(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return _(e,t.substr(2),!1);var r,i,o=t.split("/");for(r=0,i=o.length;r<i&&".."===o[r];r++);o.splice(0,r);var a=e.length>0?e.split("/"):[];a.splice(a.length-r-1,r+1);var s=a.concat(o),c=s.join("/");return c}function y(e){var t=e.match(h);if(!t)return e;var n=t[0];if("plugin://"===n){var r=n.length,i=e.indexOf("/",r);if(i>=0){var o=e.slice(r,i),a=u.default.plugins&&u.default.plugins[o]?u.default.plugins[o].provider:o;e=e.slice(0,r)+a+e.slice(i)}var s=e.indexOf("?");s<0&&(s=e.length);var c=e.slice(0,s),l=exparser.Component._list[c];if(!l)throw new x('Page "'+c+'" is not found');e=l.is+e.slice(s)}else if("plugin-private://"===n){var d=e.indexOf("?");d<0&&(d=e.length);var f=e.slice(0,d);e="/"+__appServiceEngine__.convertComponentAliasToRoute(f)+e.slice(d)}else{if("wx://"!==n)throw new x('Unknown URL protocol "'+n+'"');e="/__wx__/"+e.slice(5)}return e}function m(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];h.test(t);)t=y(t);return _(e,t,n)}function b(e){var t=e.match(h),n=e.match(g),r="";if(t){var i=t[0];if("plugin://"===i){var o=i.length,a=e.indexOf("/",o);if(a>=0){var s=e.slice(o,a);r=u.default.plugins&&u.default.plugins[s]?u.default.plugins[s].provider:s}}else if("plugin-private://"===i){var c=i.length,l=e.indexOf("/",c);if(l>=0)r=e.slice(c,l)}else"wx://"===i&&(r="//")}if(n){var d=n[0];if("__plugin__/"===d){var f=d.length,p=e.indexOf("/",f);if(p>=0)r=e.slice(f,p)}else"__wx__/"===d&&(r="//")}return r}function w(e,t){var n=b(t);return!n||b(__virtualDOM__.convertRouteToComponentAlias(e))===n}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!==Object(c.default)(e))return e;var n=[];for(var r in e)if(Object(f.hasOwnProperty)(e,r))if(t)try{n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}catch(t){n.push(r+"="+e[r])}else n.push(r+"="+e[r]);return n.join("&")}function E(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);if(r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#"))),!r)return t;for(var i=r.split("&"),o=0;o<i.length;o++){var a=i[o].split("=");t[a[0]]=a[1]}}return t}function S(e,t){if("string"==typeof e&&"object"===Object(c.default)(t)&&null!==t&&Object.keys(t).length>0){var n=e.split("?");return n[0]+"?"+O(I((n[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],i=n[1];e[r]=i}return e}),{}),Object.keys(t).reduce((function(e,n){return"object"===Object(c.default)(t[n])?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e}),{})))}return e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http";return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)e[n]=t[n];return e}),{})}function A(e){if("string"==typeof e){var t=e.split("?"),n=t[0],r=(t[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],i=n[1];e[r]=i}return e}),{}),i=[];for(var o in r)Object(f.hasOwnProperty)(r,o)&&i.push(o+"="+encodeURIComponent(r[o]));return i.length>0?n+"?"+i.join("&"):e}return e}function C(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}function k(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}var x=function(e){Object(i.default)(n,e);var t=p(n);function n(e){var i;return Object(r.default)(this,n),(i=t.call(this,"APP-SERVICE-SDK:"+e)).type="AppServiceSdkKnownError",i}return n}(Object(s.default)(Error)),P=function(e){Object(i.default)(n,e);var t=p(n);function n(e){var i;return Object(r.default)(this,n),(i=t.call(this,""+e)).type="ThirdScriptError",i}return n}(Object(s.default)(Error));function D(e,t){for(var n in t)e[n]=t[n];return e}var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",j=j||function(e){for(var t,n,r=String(e),i="",o=0,a=R;r.charAt(0|o)||(a="=",o%1);i+=a.charAt(63&t>>8-o%1*8)){if((n=r.charCodeAt(o+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return i},N=N||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,i,o=0,a=0;i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?n+=String.fromCharCode(255&r>>(-2*o&6)):0)i=R.indexOf(i);return n};function M(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return j(t)}function L(e){for(var t=N(e),n=t.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer}function B(e,t){var n=new FileReader;n.onload=function(){t(this.result)},n.readAsArrayBuffer(e)}function F(e){return Object.keys(e).reduce((function(t,n){return"string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t}),{})}function U(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var W=u.default.clientVersion||1;function V(e,t){switch(d.PLATFORM){case"devtools":return!0;case"ios":return W>e;case"android":return W>t;default:return!1}}function G(e,t,n){!1!==Object(l.isObject)(e)&&t!==n&&Object(f.hasOwnProperty)(e,t)&&(e[n]=e[t],delete e[t])}function H(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var i=parseInt(e[r],10),o=parseInt(t[r],10);if(i>o)return 1;if(i<o)return-1}return 0}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){var r;n.r(t),n.d(t,"ACTIONS",(function(){return r})),n.d(t,"COMMON_EVENT",(function(){return g.COMMON_EVENT})),n.d(t,"ROOT_EVENT",(function(){return g.ROOT_EVENT})),n.d(t,"BUTTON_EVENT",(function(){return g.BUTTON_EVENT})),n.d(t,"TEXT_EVENT",(function(){return g.TEXT_EVENT})),n.d(t,"VIDEO_EVENT",(function(){return g.VIDEO_EVENT})),n.d(t,"FEEDBACK_EVENT",(function(){return g.FEEDBACK_EVENT})),n.d(t,"ENDPAGE_EVENT",(function(){return g.ENDPAGE_EVENT})),n.d(t,"CAROUSEL_EVENT",(function(){return g.CAROUSEL_EVENT})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return g.REWARDEDVIDEO_EVENT})),n.d(t,"CUSTOM_EVENT",(function(){return v.CUSTOM_EVENT})),n.d(t,"ROOT_TYPES",(function(){return i})),n.d(t,"LAYOUT_TYPES",(function(){return o})),n.d(t,"IMAGE_TYPES",(function(){return a})),n.d(t,"TEXT_TYPES",(function(){return s})),n.d(t,"BUTTON_TYPES",(function(){return c})),n.d(t,"VIDEO_TYPES",(function(){return u})),n.d(t,"FEEDBACK_TYPES",(function(){return l})),n.d(t,"COUNTDOWN_TYPES",(function(){return d})),n.d(t,"ENDPAGE_TYPES",(function(){return f})),n.d(t,"FOR_TYPES",(function(){return p})),n.d(t,"CAROUSEL_TYPES",(function(){return h})),n.d(t,"IDKEY",(function(){return m.CUSTOMAD_IDKEY})),n.d(t,"ERROR_CODE",(function(){return _})),n.d(t,"DOWNLOAD_STATE",(function(){return y})),n.d(t,"AD_TYPE_IMAGE",(function(){return b})),n.d(t,"AD_TYPE_VIDEO",(function(){return w})),n.d(t,"scalableStyles",(function(){return O})),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}));var i,o,a,s,c,u,l,d,f,p,h,g=n(131),v=n(95);!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(i||(i={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(o||(o={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(a||(a={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(p||(p={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(h||(h={}));var _,y,m=n(156);!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(_||(_={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(y||(y={}));var b="image",w="video",O=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},function(e,t,n){function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),function(e){n.d(t,"getDataType",(function(){return i})),n.d(t,"safeInstanceOf",(function(){return o})),n.d(t,"isString",(function(){return a})),n.d(t,"isNumber",(function(){return s})),n.d(t,"isBoolean",(function(){return c})),n.d(t,"isUndefined",(function(){return u})),n.d(t,"isNull",(function(){return l})),n.d(t,"isNaN",(function(){return d})),n.d(t,"isFinite",(function(){return f})),n.d(t,"isInfinity",(function(){return p})),n.d(t,"isInteger",(function(){return h})),n.d(t,"isObject",(function(){return g})),n.d(t,"isNonNullObject",(function(){return v})),n.d(t,"isJustObject",(function(){return _})),n.d(t,"isArray",(function(){return y})),n.d(t,"isFunction",(function(){return m})),n.d(t,"isDate",(function(){return b})),n.d(t,"isRegExp",(function(){return w})),n.d(t,"isError",(function(){return O})),n.d(t,"isSymbol",(function(){return E})),n.d(t,"isMap",(function(){return S})),n.d(t,"isWeakMap",(function(){return T})),n.d(t,"isSet",(function(){return I})),n.d(t,"isWeakSet",(function(){return A})),n.d(t,"isPromise",(function(){return C})),n.d(t,"isEmptyObject",(function(){return k})),n.d(t,"isArrayBuffer",(function(){return x})),n.d(t,"isDataView",(function(){return P})),n.d(t,"isTypedArray",(function(){return D})),n.d(t,"isVirtualNode",(function(){return R})),n.d(t,"isVirtualText",(function(){return j})),n.d(t,"paramCheck",(function(){return N})),n.d(t,"safelyToString",(function(){return M}));var r=Object.prototype.toString;function i(e){return r.call(e).slice(8,-1)}function o(e,t){return null!=e&&(e instanceof t||null!=e.constructor&&e.constructor.name===t.name)}var a=function(e){return"String"===i(e)},s=function(e){return"Number"===i(e)},c=function(e){return!0===e||!1===e||"Boolean"===i(e)},u=function(e){return void 0===e},l=function(e){return null===e},d=Number.isNaN||function(e){return e!=e},f=Number.isFinite||function(t){return s(t)&&e.isFinite(t)},p=function(e){return s(e)&&Math.abs(e)===1/0},h=function(e){return f(e)&&Math.floor(e)===e},g=function(e){return"Object"===i(e)},v=function(e){return g(e)&&!l(e)},_=function(e){return"Object"===i(e)},y=Array.isArray||function(e){return"Array"===i(e)},m=function(e){return"function"==typeof e},b=function(e){return"Date"===i(e)},w=function(e){return"RegExp"===i(e)},O=function(e){return"Error"===i(e)},E=function(e){return"Symbol"===i(e)},S=function(e){return"Map"===i(e)},T=function(e){return"WeakMap"===i(e)},I=function(e){return"Set"===i(e)},A=function(e){return"WeakSet"===i(e)},C=function(e){return"Promise"===i(e)},k=function(e){for(var t in e)return!1;return!0},x=function(e){return"ArrayBuffer"===i(e)},P=function(e){return"DataView"===i(e)},D=function(e){return ArrayBuffer.isView(e)&&!P(e)},R=function(e){return e&&"WxVirtualNode"===e.type},j=function(e){return e&&"WxVirtualText"===e.type};function N(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",r=i(t),o=i(e);if(o!==r)return n+" should be "+r+" instead of "+o+";";var a="";switch(r){case"Object":Object.keys(t).forEach((function(r){a+=N(e[r],t[r],n+"."+r)}));break;case"Array":if(e.length<t.length)return n+" should have at least "+t.length+" item;";for(var s=0;s<t.length;++s)a+=N(e[s],t[s],n+"["+s+"]")}return a}function M(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}}.call(this,n(74))},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return d})),n.d(t,"surroundWXByTryCatch",(function(){return p})),n.d(t,"timeout",(function(){return h})),n.d(t,"deepFreeze",(function(){return g})),n.d(t,"EventEmitter",(function(){return v})),n.d(t,"getDataLength",(function(){return _})),n.d(t,"checkAPIAvailable",(function(){return y})),n.d(t,"isGame",(function(){return m})),n.d(t,"isApp",(function(){return b})),n.d(t,"promisify",(function(){return w})),n.d(t,"transformToCamelCaseVar",(function(){return O})),n.d(t,"transformToUnderScoreCaseVar",(function(){return E})),n.d(t,"capitalizeFirstLetter",(function(){return S})),n.d(t,"skipURLCheck",(function(){return T})),n.d(t,"versionCompare",(function(){return I})),n.d(t,"executeOnlyOnce",(function(){return A})),n.d(t,"filterObject",(function(){return C})),n.d(t,"hideInnerRequest",(function(){return k})),n.d(t,"isSinglePageMode",(function(){return x})),n.d(t,"isIn3rdApp",(function(){return P})),n.d(t,"isIsolateContext",(function(){return D})),n.d(t,"compareClientVersion",(function(){return R}));var r=n(4),i=n(5),o=n(17),a=n(30),s=n(1),c=n(31),u=n(2),l=n(10);function d(e,t,n){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:n,error:e,extend:t})}}}}function f(e,t,n,r){Object.defineProperty(e,n,{get:function(){var e=this;return"function"==typeof t[n]?d((function(){return Object(c.checkWxInterfaceSupported)(n),Object(c.wrappedByCheckPermissionInTap)(n,t[n]).apply(e,arguments)}),"wx."+n,r):t[n]},enumerable:!0,configurable:!0})}var p=function(e,t){var n={};for(var r in e)f(n,e,r,t);return n},h=function(e,t){var n=t.timeout;if("number"==typeof n){var r=!1,i=setTimeout((function(){var e={errMsg:"request timeout"};r=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),o=["success","fail","complete"].reduce((function(e,n){return e[n]=function(e){r||(clearTimeout(i),"function"==typeof t[n]&&t[n](e))},e}),{});e(Object.assign({},t,o))}else e(t)};function g(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n;try{n=e[t]}catch(e){}"object"!==Object(o.default)(n)&&"function"!=typeof n||Object.isFrozen(n)||g(n)})),e}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxListeners:2e3};Object(r.default)(this,e),this.emitter=new a.default(t),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}return Object(i.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r)}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}},{key:"listeners",value:function(e){return this.emitter.listeners(e)}}]),e}();function _(e){return"string"==typeof e?e.length:"object"===Object(o.default)(e)&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function y(e){var t="unknown";if(s.default.appContactInfo&&s.default.appContactInfo.operationInfo&&s.default.appContactInfo.operationInfo.jsonInfo&&s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable){var n=s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable;"number"==typeof n[e]&&(t=1===n[e])}return t}function m(){return 4===s.default.appType}function b(){return 0===s.default.appType}function w(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}}function O(e){return e.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]}))}function E(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function S(e){return e.charAt(0).toUpperCase()+e.slice(1)}function T(){return u.IS_DEVTOOLS?!s.default.urlCheck:!0===s.default.debug}function I(e,t){var n,r=String(e).split(".").map((function(e){return parseInt(e,10)})),i=String(t).split(".").map((function(e){return parseInt(e,10)})),o=Math.max(r.length,i.length);if(null!=e&&null!=t){if(0===e.length&&0===t.length)return 0;if(0===e.length)return-1;if(0===t.length)return 1;for(var a=0;a<o&&0===(n=s(r[a],i[a]));a++);return n}function s(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e>t?1:e<t?-1:0}console.error("versionCompare()参数格式错误")}function A(e){var t=!1;return function(){if(!t)return t=!0,e.apply(void 0,arguments)}}function C(e,t){return t.reduce((function(t,n){return Object(l.isUndefined)(e[n])||(t[n]=e[n]),t}),{})}function k(e){if(!u.IS_DEVTOOLS||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){var t=e.split("?"),n=t[1]||"",r=n.length>0?"&":"";e=t[0]+"?"+n+r+"devtools_ignore=true"}return e}function x(){return s.default.appLaunchInfo&&"singlePage"===s.default.appLaunchInfo.mode}function P(){var e=s.default.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}var D=function(){return s.default.isIsolateContext};function R(e,t){var n=function(e){if("string"==typeof e){for(var t=e.split(".").map((function(e){return parseInt(e,10)}));t.length<4;)t.push(0);return function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=n<<8|e[r];return n}(t.slice(0,4))}return"number"==typeof e?268435455&e:e};return(e=n(e))>(t=n(t))?1:e<t?-1:0}},function(e,t,n){n.r(t);var r=n(93);t.default={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:r.AppStatus.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},function(e,t,n){e.exports=n(205)},function(e,t,n){n.r(t),n.d(t,"contain",(function(){return i})),n.d(t,"timeout",(function(){return o})),n.d(t,"logReport",(function(){return a})),n.d(t,"log",(function(){return s})),n.d(t,"truncate",(function(){return c})),n.d(t,"splitLineToCamelCase",(function(){return u})),n.d(t,"filterUndefined",(function(){return d})),n.d(t,"hex",(function(){return f})),n.d(t,"promisify",(function(){return l})),n.d(t,"throttle",(function(){return p}));var r=n(17),i=function(e){var t,n,r,i=e.outer,o=void 0===i?{width:0,height:0}:i,a=e.inner,s=void 0===a?{width:0,height:0}:a,c=e.maxScale,u=void 0===c?1e3:c,l=e.minScale,d=void 0===l?0:l,f=e.side,p=o.width/o.height,h=s.width/s.height,g=o.width/s.width,v=o.height/s.height,_=p>h?v:g;return"width"===f?_=g:"height"===f&&(_=v),t=_,n=d,r=u,_=Math.min(Math.max(n,t),r),s.width*=_,s.height*=_,o.width=Math.max(o.width,s.width),o.height=Math.max(o.height,s.height),{scale:_,outer:o,inner:s}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))},a=function(){},s=function(){},c=function(e,t){for(var n="",r=0,i=0;i<e.length;i++){if((r+=/[\u4e00-\u9fa5]/.test(e[i])?2:1)>t){n+="...";break}n+=e[i]}return n},u=function(e){return e.split("-").map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join("")},l=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}},d=function e(t){return Object.keys(t).reduce((function(n,i){var o=t[i],a=Object(r.default)(o);return"object"===a&&null!==o?n[i]=e(o):"undefined"!==a&&(n[i]=t[i]),n}),{})},f=function(e){var t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e})).join(""):"#00000000":e},p=function(e,t,n){var r,i,o,a=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(r,i),a||(r=i=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var l=t-(u-s);return r=this,i=arguments,l<=0||l>t?(clearTimeout(a),a=null,s=u,o=e.apply(r,i),a||(r=i=null)):a||!1===n.trailing||(a=setTimeout(c,l)),o}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(127);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.default)(e,t)}},function(e,t,n){n.r(t);var r="undefined"!=typeof NativeGlobal?NativeGlobal:{};t.default=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(17),i=n(7);function o(e,t){return!t||"object"!==Object(r.default)(t)&&"function"!=typeof t?Object(i.default)(e):t}},function(e,t,n){n.r(t),n.d(t,"CRT_SIZE",(function(){return i})),n.d(t,"POS_ID_MAP",(function(){return o})),n.d(t,"POS_TYPE_MAP",(function(){return a})),n.d(t,"EXPOSURE_TYPE_MAP",(function(){return s})),n.d(t,"ANALYSE_INFO_DEBUG_TYPE",(function(){return c})),n.d(t,"FLOW_EXP_MAP",(function(){return u})),n.d(t,"PRODUCT_TYPE",(function(){return l})),n.d(t,"WX_AD_PATH",(function(){return d})),n.d(t,"SPLASHAD_FETCH_LOG",(function(){return f})),n.d(t,"ID_KEY_MAP",(function(){return p})),n.d(t,"SPLASHAD_IDKEY",(function(){return h})),n.d(t,"AD_TYPE_MAP",(function(){return g})),n.d(t,"REPORT_TYPE_MAP",(function(){return v})),n.d(t,"REPORT_EXPOSURE_TYPE_MAP",(function(){return _})),n.d(t,"NET_TYPE_MAP",(function(){return y})),n.d(t,"SPLASHAD_ERROR_CODE",(function(){return m})),n.d(t,"BIG_PIC_TITLE_MAP",(function(){return b}));var r=n(8);n.d(t,"CUSTOMAD_IDKEY",(function(){return r.IDKEY})),n.d(t,"CUSTOMAD_ERROR_CODE",(function(){return r.ERROR_CODE}));var i={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},o={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},a={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},u={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch"},l={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},d="wxfile://ad",f=d+"/adinfos.txt",p={splashAd:1288,customAd:1390},h={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},g={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},v={click:1,exposure:0},_={showed:0,viewable:1,incentiveVideoCard:2},y={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},m={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},b={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"getEventManager",(function(){return c}));var r=n(17),i=n(30),o=new i.default({maxListeners:20,newListener:!1}),a=new i.default({maxListeners:20,newListener:!1});var s={};function c(e){if(e=e[0].toUpperCase()+e.slice(1),!s[e]){var t=new WeakMap;s[e]={getGlobalListeners:function(){return o.listeners(e)},getInternalListeners:function(){return a.listeners(e)},emit:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,[e].concat(n)),o.emit.apply(o,[e].concat(n))},emitGlobal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];o.emit.apply(o,[e].concat(n))},emitInternal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,[e].concat(n))},internalOnMethod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof t&&(n.prepend?n.once?a.prependOnceListener(e,t):a.prependListener(e,t):n.once?a.once(e,t):a.on(e,t))},internalOffMethod:function(t){"function"==typeof t&&a.off(e,t)},onMethod:function(n){var i=function(e,t){return"function"!=typeof t?(console.error("on"+e+" should accept a function instead of "+Object(r.default)(t)),null):__errorTracer__.surroundThirdByTryCatch(t,"at api on"+e+" callback function")}(e,n);i&&(t.set(n,i),o.on(e,i))},offMethod:function(n){if(function(e,t){return!t||"function"==typeof t||(console.error("off"+e+" should accept a function instead of "+Object(r.default)(t)),!1)}(e,n))if(n){if(t.has(n)){var i=t.get(n);t.delete(n),o.off(e,i)}}else t=new WeakMap,o.removeAllListeners(e)}}}return s[e]}},function(e,t,n){n.r(t),n.d(t,"View",(function(){return p})),n.d(t,"Text",(function(){return g})),n.d(t,"Image",(function(){return I})),n.d(t,"Video",(function(){return W})),n.d(t,"Camera",(function(){return J})),n.d(t,"LivePlayer",(function(){return ee})),n.d(t,"LivePusher",(function(){return se})),n.d(t,"WebView",(function(){return ue.WebView})),n.d(t,"getWebViewIdList",(function(){return ue.getWebViewIdList})),n.d(t,"ImagePreviewer",(function(){return fe})),n.d(t,"webviewLayout",(function(){return O})),n.d(t,"nativeviewLayout",(function(){return E}));var r=n(4),i=n(5),o=n(42),a=n(15),s=n(18),c=n(9),u=n(0),l=n(68),d=n(14);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var p=function(e){Object(a.default)(n,e);var t=f(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.id,a=i.parentId,s=i.style,c=i.props,u=void 0===c?{}:c,l=i.type,d=void 0===l?"text":l,f=i.name,p=void 0===f?"":f,h=i.autoInsert,g=void 0!==h&&h,v=i.eventType,_=void 0===v?"touch":v,y=i.clickState,m=void 0!==y&&y,b=i.bubbleEvent,w=void 0!==b&&b;Object(r.default)(this,n),(e=t.call(this,{id:o,style:s,props:Object.assign(u,{fullscreen:!1}),name:p,parentId:a})).type="text"===d?"TextView":"ImageView",e.eventType=_,e.autoInsert=g,e.bubbleEvent=w,"touch"===e.eventType&&m&&e.ready().then((function(){e.mask=new n({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),e.mask.name="mask",e.add(e.mask)})).catch((function(){}));var O=Date.now(),E={x:0,y:0};e.on("touchstart",(function(t){m&&e.mask&&(e.mask.style.hidden=!1),O=Date.now(),E=t}));var S=function(t){m&&e.mask&&(e.mask.style.hidden=!0);var n={x:0,y:0};try{n=e.getAbsolutePosition()}catch(e){}var r={x:0,y:0};Array.isArray(t)?r=t.pop():t.x&&t.y&&(r=t);var i={absoluteX:n.left+E.x,absoluteY:n.top+E.y,relativeX:E.x,relativeY:E.y,absoluteEndX:n.left+r.x,absoluteEndY:n.top+r.y,relativeEndX:r.x,relativeEndY:r.y,pressInterval:Date.now()-O};e.emit("click",i)};return e.on("touchend",S),e.on("touchcancel",S),e.autoInsert&&e.insert(),e}return Object(i.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&t.push("objectFit");var n=t.reduce((function(t,n){return t[n]=e.computedStyle[n],"borderColor"===n&&(t[n]=Object(d.hex)(e.computedStyle[n])),t}),{});n.bgColor=Object(d.hex)(this.computedStyle.backgroundColor),n.scaleX=this.computedStyle.scaleWidth,n.scaleY=this.computedStyle.scaleHeight;var r={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};return this.layoutBox&&(r={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(r.width=0,r.height=0),this.mask&&(this.mask.style.width=r.width,this.mask.style.height=r.height),n.padding=[0,0,0,0],void 0!==n.borderRadius&&n.borderRadius||(n.borderRadius=0),{parentId:this.parentId,dest:this.dest,viewId:this.id,position:r,hide:this.computedStyle.hidden,style:n,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:n.fixed}}},{key:"insert",value:function(){var e=this,t=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise((function(n,r){Object(u.invokeMethod)("insert"+e.type,Object.assign(t,{success:function(t){Object(d.log)(e.name,e.id,"ready"),e.emit("ready"),n(t)},fail:r}))}))}},{key:"update",value:function(){var e=this;this.shouldUpdate=!1;var t=this.toNativeData();return new Promise((function(n,r){Object(u.invokeMethod)("update"+e.type,Object.assign(t,{success:n,fail:r}))}))}},{key:"destroy",value:function(){var e=this;Object(o.default)(Object(c.default)(n.prototype),"destroy",this).call(this);var t={dest:this.dest,viewId:this.id};return new Promise((function(n,r){Object(u.invokeMethod)("remove"+e.type,Object.assign(t,{success:n,fail:r}))}))}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.left,r=t.top,i=t.opacity,o=t.scaleWidth,a=t.scaleHeight,s=t.rotate,c=void 0===s?0:s,l=t.duration,d=void 0===l?500:l,f={dest:this.dest,viewId:this.id,easing:"ease-in",duration:d,finalStyle:{left:n,top:r,opacity:i,rotate:c,scaleX:o,scaleY:a}};return new Promise((function(e,t){Object(u.invokeMethod)("animateCoverView",Object.assign(f,{success:e,fail:t}))})).then((function(t){return void 0!==n&&(e.style.left=n),void 0!==r&&(e.style.top=r),void 0!==o&&(e.style.scaleWidth=o),void 0!==a&&(e.style.scaleHeight=a),void 0!==i&&(e.style.opacity=i),void 0!==c&&(e.style.rotate=c),t}))}}]),n}(l.Element);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var g=function(e){Object(a.default)(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,o=e.style,a=e.value,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(r.default)(this,n),t.call(this,{id:i,style:o,props:{value:s},type:"text",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(i.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce((function(t,n){return t[n]=e.computedStyle[n],t}),{});return Object.assign(Object(o.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{label:Object.assign(t,{content:this.value})})}}]),n}(p),v=function(){var e,t="inherit",n="row",r="row-reverse",i="column",o="column-reverse",a="flex-start",s="center",c="flex-start",u="center",l="flex-end",d="stretch",f="relative",p="absolute",h={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},g={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},v={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},_={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function y(e){return void 0===e}function m(e){return e===n||e===r}function b(e,t){if(void 0!==e.style.marginStart&&m(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function w(e,t){if(void 0!==e.style.marginEnd&&m(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function O(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&m(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function E(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&m(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function S(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&m(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+O(e,t)}function T(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&m(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+E(e,t)}function I(e,t){return O(e,t)+E(e,t)}function A(e,t){return b(e,t)+w(e,t)}function C(e,t){return S(e,t)+T(e,t)}function k(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function x(e,t){if("rtl"===t){if(e===n)return r;if(e===r)return n}return e}function P(e,t){return function(e){return e===i||e===o}(e)?x(n,t):i}function D(e){return e.style.position?e.style.position:"relative"}function R(e){return D(e)===f&&e.style.flex>0}function j(e,t){return e.layout[_[t]]+A(e,t)}function N(e,t){return void 0!==e.style[_[t]]&&e.style[_[t]]>=0}function M(e,t){return void 0!==e.style[t]}function L(e,t){return void 0!==e.style[t]?e.style[t]:0}function B(e,t,n){var r={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],i={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],o=n;return void 0!==i&&i>=0&&o>i&&(o=i),void 0!==r&&r>=0&&o<r&&(o=r),o}function F(e,t){return e>t?e:t}function U(e,t){void 0===e.layout[_[t]]&&N(e,t)&&(e.layout[_[t]]=F(B(e,t,e.style[_[t]]),C(e,t)))}function W(e,t,n){t.layout[g[n]]=e.layout[_[n]]-t.layout[_[n]]-t.layout[v[n]]}function V(e,t){return void 0!==e.style[h[t]]?L(e,h[t]):-L(e,g[t])}function G(E,G,z){var Y=function(e,n){var r;return(r=e.style.direction?e.style.direction:t)===t&&(r=void 0===n?"ltr":n),r}(E,z),q=x(function(e){return e.style.flexDirection?e.style.flexDirection:i}(E),Y),K=P(q,Y),J=x(n,Y);U(E,q),U(E,K),E.layout.direction=Y,E.layout[h[q]]+=b(E,q)+V(E,q),E.layout[g[q]]+=w(E,q)+V(E,q),E.layout[h[K]]+=b(E,K)+V(E,K),E.layout[g[K]]+=w(E,K)+V(E,K);var X=E.children.length,$=C(E,J);if(function(e){return void 0!==e.style.measure}(E)){var Z=!y(E.layout[_[J]]),Q=e;Q=N(E,J)?E.style.width:Z?E.layout[_[J]]:G-A(E,J),Q-=$;var ee=!N(E,J)&&!Z,te=!N(E,i)&&y(E.layout[_.column]);if(ee||te){var ne=E.style.measure(Q);ee&&(E.layout.width=ne.width+$),te&&(E.layout.height=ne.height+C(E,i))}if(0===X)return}var re,ie,oe,ae,se=function(e){return"wrap"===e.style.flexWrap}(E),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(E),ue=S(E,q),le=S(E,K),de=C(E,q),fe=C(E,K),pe=!y(E.layout[_[q]]),he=!y(E.layout[_[K]]),ge=m(q),ve=null,_e=null,ye=e;pe&&(ye=E.layout[_[q]]-de);for(var me=0,be=0,we=0,Oe=0,Ee=0,Se=0;be<X;){var Te,Ie=0,Ae=0,Ce=0,ke=0,xe=pe&&ce===a||!pe&&ce!==s,Pe=xe?X:me,De=!0,Re=X,je=null,Ne=null,Me=ue,Le=0;for(re=me;re<X;++re){if((oe=E.children[re]).lineIndex=Se,oe.nextAbsoluteChild=null,oe.nextFlexChild=null,(Ye=k(E,oe))===d&&D(oe)===f&&he&&!N(oe,K))oe.layout[_[K]]=F(B(oe,K,E.layout[_[K]]-fe-A(oe,K)),C(oe,K));else if(D(oe)===p)for(null===ve&&(ve=oe),null!==_e&&(_e.nextAbsoluteChild=oe),_e=oe,ie=0;ie<2;ie++)ae=0!==ie?n:i,!y(E.layout[_[ae]])&&!N(oe,ae)&&M(oe,h[ae])&&M(oe,g[ae])&&(oe.layout[_[ae]]=F(B(oe,ae,E.layout[_[ae]]-C(E,ae)-A(oe,ae)-L(oe,h[ae])-L(oe,g[ae])),C(oe,ae)));var Be=0;if(pe&&R(oe)?(Ae++,Ce+=oe.style.flex,null===je&&(je=oe),null!==Ne&&(Ne.nextFlexChild=oe),Ne=oe,Be=C(oe,q)+A(oe,q)):(Te=e,ge||(Te=N(E,J)?E.layout[_[J]]-$:G-A(E,J)-$),0===we&&H(oe,Te,Y),D(oe)===f&&(ke++,Be=j(oe,q))),se&&pe&&Ie+Be>ye&&re!==me){ke--,we=1;break}xe&&(D(oe)!==f||R(oe))&&(xe=!1,Pe=re),De&&(D(oe)!==f||Ye!==d&&Ye!==c||y(oe.layout[_[K]]))&&(De=!1,Re=re),xe&&(oe.layout[v[q]]+=Me,pe&&W(E,oe,q),Me+=j(oe,q),Le=F(Le,B(oe,K,j(oe,K)))),De&&(oe.layout[v[K]]+=Oe+le,he&&W(E,oe,K)),we=0,Ie+=Be,be=re+1}var Fe=0,Ue=0,We=0;if(We=pe?ye-Ie:F(Ie,0)-Ie,0!==Ae){var Ve,Ge,He=We/Ce;for(Ne=je;null!==Ne;)(Ve=He*Ne.style.flex+C(Ne,q))!==(Ge=B(Ne,q,Ve))&&(We-=Ge,Ce-=Ne.style.flex),Ne=Ne.nextFlexChild;for((He=We/Ce)<0&&(He=0),Ne=je;null!==Ne;)Ne.layout[_[q]]=B(Ne,q,He*Ne.style.flex+C(Ne,q)),Te=e,N(E,J)?Te=E.layout[_[J]]-$:ge||(Te=G-A(E,J)-$),H(Ne,Te,Y),oe=Ne,Ne=Ne.nextFlexChild,oe.nextFlexChild=null}else ce!==a&&(ce===s?Fe=We/2:"flex-end"===ce?Fe=We:"space-between"===ce?(We=F(We,0),Ue=Ae+ke-1!=0?We/(Ae+ke-1):0):"space-around"===ce&&(Fe=(Ue=We/(Ae+ke))/2));for(Me+=Fe,re=Pe;re<be;++re)D(oe=E.children[re])===p&&M(oe,h[q])?oe.layout[v[q]]=L(oe,h[q])+O(E,q)+b(oe,q):(oe.layout[v[q]]+=Me,pe&&W(E,oe,q),D(oe)===f&&(Me+=Ue+j(oe,q),Le=F(Le,B(oe,K,j(oe,K)))));var ze=E.layout[_[K]];for(he||(ze=F(B(E,K,Le+fe),fe)),re=Re;re<be;++re)if(D(oe=E.children[re])===p&&M(oe,h[K]))oe.layout[v[K]]=L(oe,h[K])+O(E,K)+b(oe,K);else{var Ye,qe=le;if(D(oe)===f)if((Ye=k(E,oe))===d)y(oe.layout[_[K]])&&(oe.layout[_[K]]=F(B(oe,K,ze-fe-A(oe,K)),C(oe,K)));else if(Ye!==c){var Ke=ze-fe-j(oe,K);qe+=Ye===u?Ke/2:Ke}oe.layout[v[K]]+=Oe+qe,he&&W(E,oe,K)}Oe+=Le,Ee=F(Ee,Me),Se+=1,me=be}if(Se>1&&he){var Je=E.layout[_[K]]-fe,Xe=Je-Oe,$e=0,Ze=le,Qe=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(E);Qe===l?Ze+=Xe:Qe===u?Ze+=Xe/2:Qe===d&&Je>Oe&&($e=Xe/Se);var et=0;for(re=0;re<Se;++re){var tt=et,nt=0;for(ie=tt;ie<X;++ie)if(D(oe=E.children[ie])===f){if(oe.lineIndex!==re)break;y(oe.layout[_[K]])||(nt=F(nt,oe.layout[_[K]]+A(oe,K)))}for(et=ie,nt+=$e,ie=tt;ie<et;++ie)if(D(oe=E.children[ie])===f){var rt=k(E,oe);if(rt===c)oe.layout[v[K]]=Ze+b(oe,K);else if(rt===l)oe.layout[v[K]]=Ze+nt-w(oe,K)-oe.layout[_[K]];else if(rt===u){var it=oe.layout[_[K]];oe.layout[v[K]]=Ze+(nt-it)/2}else rt===d&&(oe.layout[v[K]]=Ze+b(oe,K))}Ze+=nt}}var ot=!1,at=!1;if(pe||(E.layout[_[q]]=F(B(E,q,Ee+T(E,q)),de),q!==r&&q!==o||(ot=!0)),he||(E.layout[_[K]]=F(B(E,K,Oe+fe),fe),K!==r&&K!==o||(at=!0)),ot||at)for(re=0;re<X;++re)oe=E.children[re],ot&&W(E,oe,q),at&&W(E,oe,K);for(_e=ve;null!==_e;){for(ie=0;ie<2;ie++)ae=0!==ie?n:i,!y(E.layout[_[ae]])&&!N(_e,ae)&&M(_e,h[ae])&&M(_e,g[ae])&&(_e.layout[_[ae]]=F(B(_e,ae,E.layout[_[ae]]-I(E,ae)-A(_e,ae)-L(_e,h[ae])-L(_e,g[ae])),C(_e,ae))),M(_e,g[ae])&&!M(_e,h[ae])&&(_e.layout[h[ae]]=E.layout[_[ae]]-_e.layout[_[ae]]-L(_e,g[ae]));oe=_e,_e=_e.nextAbsoluteChild,oe.nextAbsoluteChild=null}}function H(e,t,n){e.shouldUpdate=!0;var r=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===r?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=r,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),G(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:G,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var y=function e(t,n){var r=!1;n.layoutBox=n.layoutBox||{},["left","top","width","height"].forEach((function(e){r=r||n.layoutBox[e]!==t.layout[e],n.layoutBox[e]=t.layout[e]})),n.shouldUpdate=n.shouldUpdate||r,t.children.forEach((function(t){var r=n.children[t.id];r&&e(t,r)}))},m=function e(t){var n=Promise.resolve();return t.isInserted?t.shouldUpdate&&(n=t.update()):n=t.insert(),n.then((function(){return Promise.all(Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)})))}))},b=function e(t){t.isInserted?t.shouldUpdate&&t.update():t.insert(),Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)}))},w=function(e){Object(a.default)(n,e);var t=_(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=i.name,s=i.auto,c=void 0===s||s;Object(r.default)(this,n),e=t.call(this,{style:o,id:0,name:a});var u=null;return e.auto=c,e.on("layout",(function(){e.auto&&(clearTimeout(u),u=setTimeout((function(){return e.layout()}),0))})),e.onebyone=!0,e}return Object(i.default)(n,[{key:"layout",value:function(){var e,t=this,n={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return e=n,v.fillNodes(e),v.computeLayout(e),y(n,this),this.onebyone?m(this).then((function(){return t.emit("update-done")})):(b(this),Promise.resolve().then((function(){return t.emit("update-done")})))}}]),n}(l.Element),O=new w({name:"webview-layout"});O.dest=0;var E=new w({name:"nativeview-layout",auto:!1});E.onebyone=!1,E.dest=1;var S=n(11);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var I=function(e){Object(a.default)(n,e);var t=T(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id,o=e.style,a=e.src,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(r.default)(this,n),t.call(this,{id:i,style:o,props:{src:s},type:"image",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(i.default)(n,[{key:"toNativeData",value:function(){return Object.assign(Object(o.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{iconPath:Object(S.hideInnerRequest)(this.src)})}}]),n}(p),A=n(7),C=n(55),k=n(34),x=n(2),P=n(1),D=n(36),R={video:1,"live-player":2,"live-pusher":3,image:4,audio:5},j=0,N={};P.default.onReady((function(){j=P.default.appType+1e3,N=P.default.appLaunchInfo}));var M={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92};function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var B={},F=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];x.IS_ANDROID&&F.push("onVideoFullScreenChange");var U=function(e,t,n){"ad"!==e.scene&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.component,n=e.eventName,r=e.eventData,i=e.src,o=void 0===i?"":i,a=Object(D._getCurrentNetworkType)(),s=wx&&wx.version&&wx.version.version||"",c=Object.keys(N.query||{}).map((function(e){return e+"="+N.query[e]})).join(",");c=encodeURIComponent(c);var u="";switch(n){case"onLoad":u=[r.duration,r.controls?2:1].join(";");break;case"onWaiting":u=[r.position,r.buffered].join(";");break;case"onError":u=r.errMsg.replace(","," ");break;case"onFullScreenChange":u=r.fullScreen?2:1;break;case"onTimeUpdate":u=[r.position,r.buffered].join(";");break;case"onImageLoad":u=[r.isLazyLoad?2:1,r.size,r.loadTime,r.width,r.height,r.originalWidth,r.originalHeight].join(";");break;case"onImageError":u=[r.isLazyLoad?2:1].join(";")}var l=[Math.round(Date.now()/1e3),N.scene,"",N.sessionid||N.sessionId,N.path,c,a,s,R[t],M[n],u,encodeURIComponent(o.substring(0,1024)).substring(0,1024),j].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})}({component:"video",eventName:t,eventData:n,src:e.src})},W=function(e){Object(a.default)(n,e);var t=L(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=void 0===o?{}:o,s=i.name,c=i.x,u=void 0===c?0:c,l=i.y,d=void 0===l?0:l,f=i.width,p=void 0===f?300:f,h=i.height,g=void 0===h?200:h,v=i.hide,_=void 0!==v&&v,y=i.src,m=i.poster,b=i.referrerPolicy,w=void 0===b?"no-referrer":b,O=i.initialTime,E=void 0===O?0:O,S=i.playbackRate,T=void 0===S?1:S,I=i.live,k=void 0!==I&&I,x=i.objectFit,P=void 0===x?"contain":x,D=i.controls,R=void 0===D||D,j=i.showProgress,N=void 0===j||j,M=i.showProgressInControlMode,L=void 0===M?N:M,U=i.autoplay,W=void 0!==U&&U,V=i.muted,G=void 0!==V&&V,H=i.loop,z=void 0!==H&&H,Y=i.enableProgressGesture,q=void 0===Y||Y,K=i.enablePlayGesture,J=void 0!==K&&K,X=i.showCenterPlayBtn,$=void 0===X||X,Z=i.autoInsert,Q=void 0===Z||Z,ee=i.scene,te=void 0===ee?"default":ee,ne=i.preLoad,re=void 0!==ne&&ne,ie=i.obeyMuteSwitch,oe=void 0!==ie&&ie,ae=i.underGameView,se=void 0!==ae&&ae,ce=i.backgroundColor,ue=void 0===ce?"#000000":ce,le=i.zIndex;Object(r.default)(this,n),(e=t.call(this,{style:a,name:s})).isSrcChanged=!1,e.autoInsert=Q,e.scene=te,e.preLoad=re,e.underGameView=se,e.zIndex=le,B[e.id]=Object(A.default)(e);var de=null;e.emitter=new C.default,e.deferred=[],e._buffered=0,e._position=0;var fe={x:u,y:d,width:p,height:g,hide:_,src:y,poster:m,initialTime:E,playbackRate:T,live:k,objectFit:P,controls:R,showProgress:N,showProgressInControlMode:L,backgroundColor:ue,autoplay:W,muted:G,loop:z,enableProgressGesture:q,enablePlayGesture:J,showCenterPlayBtn:$,obeyMuteSwitch:oe,referrerPolicy:w};return Object.keys(fe).forEach((function(t){Object.defineProperty(Object(A.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return fe[t]},set:function(n){"src"!==t&&fe[t]===n||(fe[t]=n,e.isInserted?("src"===t&&(e.isSrcChanged=!0),"poster"===t&&(e.isPosterChanged=!0),"playbackRate"===t?e.operate("playbackRate",[n]):(clearTimeout(de),de=setTimeout((function(){return e.update()}),0))):e.deferred.push({type:"property",property:t,value:n}))}})})),F.forEach((function(t){var n=t.toLowerCase().replace("video","");e[n]=function(){},e.emitter.on(t,(function(t){e[n](t)}))})),e.autoInsert&&e.insert().then((function(){e.playbackRate&&1!==e.playbackRate&&e.operate("playbackRate",[e.playbackRate])})).then((function(){e.deferred.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))})),e}return Object(i.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return this.isInserted=!0,U(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("insertVideoPlayer",Object.assign(e.toNativeData(),{data:JSON.stringify({id:e.id}),filePath:Object(S.hideInnerRequest)(e.src),scene:e.scene,preLoad:e.preLoad,underGameView:e.underGameView,referrerPolicy:e.referrerPolicy,zIndex:e.zIndex,success:function(n){e.emit("ready"),t(n)},fail:n}))}))}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){x.IS_IOS?setTimeout((function(){Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n})}),0):Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n}),F.forEach((function(t){var n=t.replace("Video","").replace("on","off");"function"==typeof e[n]&&e[n]()})),delete B[e.id]}))}},{key:"toNativeData",value:function(){this.layoutBox;var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=Object(S.hideInnerRequest)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=Object(S.hideInnerRequest)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}},{key:"update",value:function(){this.shouldUpdate=!1;var e=this.toNativeData();return e.filePath&&U(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(e+" can't be invoked when video is hidden")):new Promise((function(r,i){Object(u.invokeMethod)("operateVideoPlayer",{videoPlayerId:t.id,type:e,data:n,success:r,fail:i})}));this.deferred.push({type:"method",method:e,args:n})}},{key:"play",value:function(){return this.operate("play")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"seek",value:function(e){return this.operate("seek",[e])}},{key:"requestFullScreen",value:function(e){return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}}]),n}(l.Element);F.forEach((function(e){var t=e.replace("Video","");W.prototype[t]=function(t){this.emitter.on(e,t)};var n=t.replace("on","off");W.prototype[n]=function(t){this.emitter.off(e,t)}})),F.forEach((function(e){Object(k.onNativeEvent)(e,(function(t){var n=t.videoPlayerId||JSON.parse(t.data).id,r=B[n];if(r)if(r.emitter.emit(e,t),"onVideoProgress"!==e){var i=t;"onVideoTimeUpdate"===e?(r._position=t.position,i={position:t.position,buffered:r._buffered}):"onVideoWaiting"===e&&(i={position:r._position,buffered:r._buffered}),U(r,e.replace("Video",""),i)}else r._buffered=t.buffered}))}));var V=n(30),G=n(62),H=n(27),z=n(180);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var q=new V.default,K={},J=function(e){Object(a.default)(n,e);var t=Y(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=i.name,s=i.x,c=void 0===s?0:s,l=i.y,d=void 0===l?0:l,f=i.width,p=void 0===f?300:f,h=i.height,g=void 0===h?200:h,v=i.devicePosition,_=void 0===v?"back":v,y=i.flash,m=void 0===y?"auto":y,b=i.size,w=void 0===b?"small":b,O=i.autoInsert,E=void 0===O||O,S=i.success,T=i.fail,I=i.complete;Object(r.default)(this,n),(e=t.call(this,{style:o,name:a})).size=w,K[e.id]=Object(A.default)(e);var C=null;e.deferred=[];var k={x:c,y:d,width:p,height:g,devicePosition:_,flash:m};Object.keys(k).forEach((function(t){Object.defineProperty(Object(A.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return k[t]},set:function(n){if(k[t]!==n){if(k[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(C),C=setTimeout((function(){return e.update()}),0)}}})})),q.on("onInit",(function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))}));var x={success:S,fail:T,complete:I};return E&&e.insert().then((function(t){e.frameWidth=t.width,e.frameHeight=t.height,Object(u.beforeInvokeCallback)({name:"createCamera",args:x})})).catch((function(){Object(u.beforeInvokeFail)("createCamera",x)})),e}return Object(i.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,i){Object(u.invokeMethod)("operateCamera",Object.assign(n,{cameraId:t.id,type:e,fail:i,success:function(n){if(r(n),"listenFrameChange"===e){if(!G.default)throw new Error("device not supported");n.data=G.default.get(n.bufferId),n.data.__proto__=ArrayBuffer.prototype,t._frame=n}}}))})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return this.operate("takePhoto",{quality:e})}},{key:"startRecord",value:function(){return this.operate("startRecord")}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.operate("stopRecord",{compressed:e})}},{key:"onAuthCancel",value:function(e){q.on("onAuthCancel",e)}},{key:"onStop",value:function(e){q.on("onStop",e)}},{key:"onCameraFrame",value:function(e){var t=this;"function"==typeof e&&q.on("onCameraFrame",(function(){t._frame&&e({data:t._frame.data,width:t._frame.width,height:t._frame.height})}))}},{key:"listenFrameChange",value:function(e){var t=e?Object(z.getWorkerId)(e):void 0,n={size:this.size};return void 0!==t&&Object(H.checkPermissionSync)("listenFrameChangeInWorker")?(n.workerId=t,this.operate("listenFrameChange",n)):this.operate("listenFrameChange",n)}},{key:"closeFrameChange",value:function(){return this._frame=null,this.operate("closeFrameChange")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete K[e.id],q.removeAllListeners("onInit"),q.removeAllListeners("onAuthCancel"),q.removeAllListeners("onStop"),q.removeAllListeners("onCameraFrame"),Object(u.invokeMethod)("removeCamera",{cameraId:e.id,success:t,fail:n})}))}}]),n}(l.Element);Object(k.onNativeEvent)("onCameraInitDone",(function(){return q.emit("onInit")})),Object(k.onNativeEvent)("onCameraNeedAuthCancel",(function(){return q.emit("onAuthCancel")})),Object(k.onNativeEvent)("onCameraStop",(function(){return q.emit("onStop")})),Object(k.onNativeEvent)("onCameraFrame",(function(){return q.emit("onCameraFrame")}));var X=n(54);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var Z={},Q=new X.Emitter("LivePlayer",!0),ee=function(e){Object(a.default)(n,e);var t=$(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=i.name,s=i.x,c=void 0===s?0:s,l=i.y,d=void 0===l?0:l,f=i.width,p=void 0===f?300:f,h=i.height,g=void 0===h?200:h,v=i.src,_=i.mode,y=void 0===_?"live":_,m=i.autoplay,b=void 0!==m&&m,w=i.muted,O=void 0!==w&&w,E=i.orientation,S=void 0===E?"vertical":E,T=i.objectFit,I=void 0===T?"contain":T,C=i.minCache,k=void 0===C?1:C,x=i.maxCache,P=void 0===x?3:x,D=i.soundMode,R=void 0===D?"speaker":D,j=i.autoPauseIfOpenNative,N=void 0===j||j,M=i.autoInsert,L=void 0===M||M,B=i.success,F=i.fail,U=i.complete;Object(r.default)(this,n),e=t.call(this,{style:o,name:a}),Z[e.id]=Object(A.default)(e);var W=null;e.deferred=[];var V={x:c,y:d,width:p,height:g,src:v,mode:y,autoplay:b,muted:O,orientation:S,objectFit:I,minCache:k,maxCache:P,soundMode:R,autoPauseIfOpenNative:N};Object.keys(V).forEach((function(t){Object.defineProperty(Object(A.default)(e),t,{enumerable:!0,get:function(){return V[t]},set:function(n){if(V[t]!==n){if(V[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(W),W=setTimeout((function(){return e.update()}),0)}}})}));var G={success:B,fail:F,complete:U};return L&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePlayer",args:G})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePlayer",G,t)})),e}return Object(i.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.isInserted?new Promise((function(r,i){Object(u.invokeMethod)("operateLivePlayer",{livePlayerId:t.id,type:e,data:n,quality:n.quality,fail:i,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"play",value:function(){return this.operate("play")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"mute",value:function(){return this.operate("mute")}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";return this.operate("snapshot",{quality:e})}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete Z[e.id],Q.off("state-"+e.id),Q.off("fs-"+e.id),Q.off("net-"+e.id),Q.off("audio-"+e.id),Object(u.invokeMethod)("removeLivePlayer",{livePlayerId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){Q.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){Q.off("state-"+this.id,e)}},{key:"onFullScreenChange",value:function(e){Q.on("fs-"+this.id,e)}},{key:"offFullScreenChange",value:function(e){Q.off("fs-"+this.id,e)}},{key:"onNetStatus",value:function(e){Q.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){Q.off("net-"+this.id,e)}},{key:"onAudioVolumeNotify",value:function(e){Q.on("audio-"+this.id,e)}},{key:"offAudioVolumeNotify",value:function(e){Q.off("audio-"+this.id,e)}}]),n}(l.Element),te=function(e,t){return Object(k.onNativeEvent)(e,(function(e){return t(e||{})}))};function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}te("onLivePlayerEvent",(function(e){var t=e.livePlayerId,n=e.errCode,r=e.errMsg;Q.emit("state-"+t,{code:n,message:r})})),te("onLivePlayerFullScreenChange",(function(e){var t=e.livePlayerId,n=e.fullScreen,r=e.direction;Q.emit("fs-"+t,{fullScreen:n,direction:r})})),te("onLivePlayerNetStatus",(function(e){var t=e.livePlayerId,n=e.info;n&&Q.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),te("onLivePlayerAudioVolume",(function(e){var t=e.livePlayerId,n=e.volume;Q.emit("audio-"+t,{volume:n})}));var re={},ie=new X.Emitter("LivePusher",!0);function oe(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function ae(e){switch(e){case"3:14":return 1;default:return 2}}var se=function(e){Object(a.default)(n,e);var t=ne(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=i.name,s=i.x,c=void 0===s?0:s,l=i.y,d=void 0===l?0:l,f=i.width,p=void 0===f?300:f,h=i.height,g=void 0===h?200:h,v=i.url,_=i.mode,y=void 0===_?"RTC":_,m=i.autopush,b=void 0!==m&&m,w=i.muted,O=void 0!==w&&w,E=i.enableCamera,S=void 0===E||E,T=i.autoFocus,I=void 0===T||T,C=i.orientation,k=void 0===C?"vertical":C,x=i.beauty,P=void 0===x?0:x,D=i.whiteness,R=void 0===D?0:D,j=i.aspect,N=void 0===j?"9:16":j,M=i.minBitrate,L=void 0===M?200:M,B=i.maxBitrate,F=void 0===B?1e3:B,U=i.audioQuality,W=void 0===U?"high":U,V=i.waitingImage,G=i.waitingImageHash,H=i.zoom,z=void 0!==H&&H,Y=i.devicePosition,q=void 0===Y?"front":Y,K=i.remoteMirror,J=void 0!==K&&K,X=i.localMirror,$=void 0===X?"auto":X,Z=i.audioReverbType,Q=void 0===Z?0:Z,ee=i.enableMic,te=void 0===ee||ee,ne=i.enableAgc,ie=void 0!==ne&&ne,oe=i.enableAns,ae=void 0!==oe&&oe,se=i.audioVolumeType,ce=void 0===se?"voicecall":se,ue=i.videoWidth,le=void 0===ue?360:ue,de=i.videoHeight,fe=void 0===de?640:de,pe=i.autoInsert,he=void 0===pe||pe,ge=i.success,ve=i.fail,_e=i.complete;Object(r.default)(this,n),e=t.call(this,{style:o,name:a}),re[e.id]=Object(A.default)(e);var ye=null;e.deferred=[];var me={x:c,y:d,width:p,height:g,url:v,mode:y,autopush:b,muted:O,enableCamera:S,autoFocus:I,orientation:k,beauty:P,whiteness:R,aspect:N,minBitrate:L,maxBitrate:F,audioQuality:W,waitingImage:V,waitingImageHash:G,zoom:z,devicePosition:q,remoteMirror:J,localMirror:$,audioReverbType:Q,enableMic:te,enableAgc:ie,enableAns:ae,audioVolumeType:ce,videoWidth:le,videoHeight:fe};Object.keys(me).forEach((function(t){Object.defineProperty(Object(A.default)(e),t,{enumerable:!0,get:function(){return me[t]},set:function(n){if(me[t]!==n){if(me[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(ye),ye=setTimeout((function(){return e.update()}),0)}}})}));var be={success:ge,fail:ve,complete:_e};return he&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePusher",args:be})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePusher",be,t)})),e}return Object(i.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,i){Object(u.invokeMethod)("operateLivePusher",{livePusherId:t.id,type:e,url:n.url,volume:n.volume,quality:n.quality,fail:i,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:oe(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:ae(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"start",value:function(){return this.operate("start")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"playBGM",value:function(e){return this.operate("playBGM",{url:e})}},{key:"stopBGM",value:function(){return this.operate("stopBGM")}},{key:"pauseBGM",value:function(){return this.operate("pauseBGM")}},{key:"resumeBGM",value:function(){return this.operate("resumeBGM")}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setBGMVolume",{volume:e})}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setMICVolume",{volume:e})}},{key:"startPreview",value:function(){return this.operate("startPreview")}},{key:"stopPreview",value:function(){return this.operate("stopPreview")}},{key:"snapshot",value:function(e){return this.operate("snapshot",{quality:e})}},{key:"switchCamera",value:function(){return this.operate("switchCamera")}},{key:"toggleTorch",value:function(){return this.operate("toggleTorch")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete re[e.id],ie.off("state-"+e.id),ie.off("net-"+e.id),ie.off("start-"+e.id),ie.off("progress-"+e.id),ie.off("complete-"+e.id),ie.off("error-"+e.id),Object(u.invokeMethod)("removeLivePusher",{livePusherId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){ie.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){ie.off("state-"+this.id,e)}},{key:"onNetStatus",value:function(e){ie.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){ie.off("net-"+this.id,e)}},{key:"onBGMStart",value:function(e){ie.on("start-"+this.id,e)}},{key:"offBGMStart",value:function(e){ie.off("start-"+this.id,e)}},{key:"onBGMProgress",value:function(e){ie.on("progress-"+this.id,e)}},{key:"offBGMProgress",value:function(e){ie.off("progress-"+this.id,e)}},{key:"onBGMComplete",value:function(e){ie.on("complete-"+this.id,e)}},{key:"offBGMComplete",value:function(e){ie.off("complete-"+this.id,e)}},{key:"onError",value:function(e){ie.on("error-"+this.id,e)}},{key:"offError",value:function(e){ie.off("error-"+this.id,e)}}]),n}(l.Element),ce=function(e,t){return Object(k.onNativeEvent)(e,(function(e){return t(e||{})}))};ce("onLivePusherEvent",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg;ie.emit("state-"+t,{code:n,message:r})})),ce("onLivePusherNetStatus",(function(e){var t=e.livePusherId,n=e.info;n&&ie.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),ce("onLivePusherBGMStart",(function(e){var t=e.livePusherId;ie.emit("start-"+t)})),ce("onLivePusherBGMProgress",(function(e){var t=e.livePusherId,n=e.progress,r=e.duration;ie.emit("progress-"+t,{progress:n,duration:r})})),ce("onLivePusherBGMComplete",(function(e){var t=e.livePusherId,n=e.errCode;ie.emit("complete-"+t,{errCode:n})})),ce("onLivePusherError",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg,i=e.data;ie.emit("error-"+t,{errCode:n,errMsg:r,data:i})}));var ue=n(115);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var de={},fe=function(e){Object(a.default)(n,e);var t=le(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.style,a=void 0===o?{}:o,s=i.name,c=i.x,u=void 0===c?0:c,l=i.y,d=void 0===l?0:l,f=i.width,p=void 0===f?300:f,h=i.height,g=void 0===h?200:h,v=i.url,_=void 0===v?"":v,y=i.urls,m=void 0===y?[]:y,b=i.scale,w=void 0===b?1:b,O=i.autoInsert,E=void 0===O||O,S=i.hide,T=void 0!==S&&S,I=i.zIndex,C=void 0===I?0:I;if(Object(r.default)(this,n),(e=t.call(this,{style:a,name:s})).x=u,e.y=d,e.width=p,e.height=g,e.scale=+w,e.hide=T,e.autoInsert=E,e.url=_,e.zIndex=C,e.emitter=new X.Emitter("ImagePreviewer",!0),de[e.id]=Object(A.default)(e),"string"==typeof m)try{e.urls=JSON.parse(m)}catch(t){e.urls=[]}else e.urls=m;return e._insertPromise=new Promise((function(t,n){e._insertPromiseResolve=t,e._insertPromiseReject=n})),e}return Object(i.default)(n,[{key:"insert",value:function(){var e=this;return this.toNativeData(),Object(u.invokeMethod)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:function(t){e._insertPromiseResolve(t)},fail:function(t){e._insertPromiseReject(t)}})),this._insertPromise}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){e._insertPromise.then((function(){e.toNativeData(),Object(u.invokeMethod)("updateImagePreviewer",Object.assign(e.toNativeData(),{success:function(e){t(e)},fail:function(e){n(e)}}))})).catch(n)}))}},{key:"destroy",value:function(){var e=this;return this.id,new Promise((function(t,n){setTimeout((function(){Object(u.invokeMethod)("removeImagePreviewer",{viewId:e.id,success:t,fail:n}),e.offImageLoadFail(),delete de[e.id]}),0)}))}},{key:"toNativeData",value:function(){this.layoutBox;var e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}},{key:"onImageLoadFail",value:function(e){this.emitter.on("onImageLoadFail",e)}},{key:"offImageLoadFail",value:function(e){this.emitter.off("onImageLoadFail",e)}}]),n}(l.Element);Object(k.onNativeEvent)("onImagePreviewerLoadFail",(function(e){de[e.viewId].emitter.emit("onImageLoadFail",e)}))},function(e,t,n){n.r(t),n.d(t,"showToast",(function(){return m})),n.d(t,"hideToast",(function(){return b})),n.d(t,"showLoading",(function(){return O})),n.d(t,"hideLoading",(function(){return E})),n.d(t,"_showModal",(function(){return p})),n.d(t,"showModal",(function(){return h})),n.d(t,"showActionSheet",(function(){return S})),n.d(t,"showShareActionSheet",(function(){return T})),n.d(t,"_checkIsInteracting",(function(){return I}));var r=n(0),i=n(6),o=n(12),a=n(104),s=n(2),c=n(11),u=n(49),l=n(56),d=n(165),f=!1,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:s.IS_MINA?"#fff":"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:s.IS_MINA?"#07C160":"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=Object(i.extend)(t,e),Object(r.beforeInvoke)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?Object(r.beforeInvokeFail)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?Object(r.beforeInvokeFail)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):Object(r.invokeMethod)("showModal",t,{beforeSuccess:function(e){e.confirm=Boolean(e.confirm),s.IS_IOS||s.IS_MAC?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),Object(a._setWxIsInvokeInTapForNavToMiniProgram)()},beforeAll:function(){f=!0},afterAll:function(){f=!1}}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(e),Object(c.isGame)()&&Object(u.reportCanvasData)(u.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_MODAL)},g={},v={};Object(l.onAppRoute)((function(e){v[e.webviewId]=[]})),Object(d.onDomReady)((function(e){setTimeout((function(){var t=e.webviewId,n=v[t]||[];g[t]=!0,n.length>0&&(y=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args,i=/hideLoading/.test(t.errMsg)?{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};Object(r.invokeMethod)("hideToast",n,i)}))),delete v[t]}),100)}));var _=1,y=!1,m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={duration:1500,title:"",icon:"success",mask:!1};if(t=Object(i.extend)(t,e),e.image&&(t.image=Object(i.getRealRoute)(o.default.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),Object(r.beforeInvoke)("showToast",t,{duration:1,title:"",icon:""})){var n=v[o.default.currentWebviewId]||[];n.length>0&&(y=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete v[o.default.currentWebviewId]),y=_++,setTimeout((function(){y=!1}),t.duration),t.maskAll=!1,Object(r.invokeMethod)("showToast",t)}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&w&&(!y||y<w))return y=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");o.default.currentWebviewId;y=!1,Object(r.invokeMethod)("hideToast",e)},w=!1,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",icon:"loading",mask:!1,duration:1e8};if((t=Object(i.extend)(t,e)).icon="loading",delete t.image,Object(r.beforeInvoke)("showLoading",t,{duration:1,title:""})){var n=v[o.default.currentWebviewId]||[];n.length>0&&(y=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete v[o.default.currentWebviewId]),w=_++,t.maskAll=!1,Object(r.invokeMethod)("showToast",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&y&&(!w||w<y))return w=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");o.default.currentWebviewId;w=!1,Object(r.invokeMethod)("hideToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};delete(t=Object(i.extend)(t,e)).cancelText,delete t.cancelColor,Object(r.beforeInvoke)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?Object(r.beforeInvokeFail)("showActionSheet",e,"parameter error: itemList should not be large than 6"):Object(r.invokeMethod)("showActionSheet",t,{beforeAll:function(e){(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&Object(a._setWxIsInvokeInTapForNavToMiniProgram)(),f=!0},afterAll:function(){f=!1}}))},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("showShareActionSheet",e)},I=function(){return f}},function(e,t,n){n.r(t),n.d(t,"operateWXData",(function(){return a})),n.d(t,"_operateWXData",(function(){return s})),n.d(t,"constructOperateWXData",(function(){return o})),n.d(t,"_pluginOperateWXData",(function(){return c}));var r=n(0),i=n(2),o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("operateWXData",a,{apiName:""})){if("operateWXData"===t);var s={api_name:a.apiName,data:a.reqData||{},operate_directly:e};n&&(s.plugin_appid=a.pluginId);var c={data:s,isImportant:!0===o,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};Object(r.baseOperateWXData)(Object.assign({},c,a),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){i.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}},a=o(!0),s=o(!1),c=o(!0,void 0,!0)},function(e,t,n){n.r(t),n.d(t,"getSystemInfo",(function(){return h})),n.d(t,"getSystemInfoSync",(function(){return g})),n.d(t,"getSystemInfoAsync",(function(){return v})),n.d(t,"getStaticSystemInfoSync",(function(){return _})),n.d(t,"getStableSystemInfo",(function(){return E})),n.d(t,"getInitScreenSize",(function(){return S})),n.d(t,"private_getUserAgent",(function(){return k}));var r=n(0),i=n(34),o=n(78),a=n(1),s=n(2),c=n(11),u=n(58),l=wxNativeConsole.createLogger("systemInfo"),d=null,f=function(e){l.info("[before process]",e);var t=s.PLATFORM;s.IS_IOS&&(e.brand="iPhone"),s.IS_DEVTOOLS&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=o.SDKVersion,e.enableDebug=Boolean(a.default.debug),a.default.devicePixelRatio&&(e.devicePixelRatio=a.default.devicePixelRatio),a.default.theme&&(e.theme=a.default.theme),a.default.host&&(e.host=a.default.host),s.IS_ANDROID&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),delete(d=Object.assign({},e)).errMsg,Object(c.isSinglePageMode)()&&4!==a.default.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),l.info("[after process]",e)},p=function(){a.default.isReady||(new Error).stack},h=function(e){p();Object(r.invokeMethod)("getSystemInfo",e,{beforeSuccess:f})},g=function(){var e={};return h({success:function(t){delete t.errMsg,e=t,d=Object.assign({},e)}}),e},v=function(e){a.default.supportAsyncGetSystemInfo||(console.info('Current Wechat version do not support asynchronous getSystemInfo. "wx.getSystemInfoAsync" will be finished by synchronous implementation.'),p());var t=a.default.supportAsyncGetSystemInfo?"getSystemInfoAsync":"getSystemInfo";Object(r.invokeMethod)(t,e,{beforeSuccess:f})},_=function(){return d||g()},y=null,m=0,b=0,w=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];a.default.onReady((function(){y={};for(var e=0;e<w.length;e++){if(!(w[e]in a.default)){y=_();break}y[w[e]]=a.default[w[e]]}if(a.default.screenHeight&&a.default.screenWidth)m=a.default.screenWidth,b=a.default.screenHeight;else{var t=_();m=t.screenWidth,b=t.screenHeight}}));var O,E=function(){return a.default.isReady?Object.assign({},y):((new Error).stack,{})},S=function(){return a.default.isReady?{screenWidth:m,screenHeight:b,deviceOrientation:m>b?"landscape":"portrait"}:((new Error).stack,{})},T=!1,I=new Set;Object(i.onNativeEvent)("onAppRouteDone",(function(){T=!0,I.forEach((function(e){return e()})),I.clear()}));var A=new Set,C=function(){Object(u.invokeWebviewMethod)("getUserAgent",{},void 0,(function(e){O=e,A.forEach((function(t){try{t(e)}catch(e){}})),A.clear()}))},k=function(e){O?e(O):T?(A.add(e),C()):(I.has(C)||I.add(C),A.add(e))}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(0),i=n(2);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=a(c),Object(r.baseOperateWXData)(Object.assign({},c,{data:Object.assign({api_name:t},o,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll:function(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess:function(e){if(i.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.data){e.rawData=e.data.data;var t=JSON.parse(e.data.data);e=Object.assign(e,t)}e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data,e=s(e)}})}}},function(e,t,n){n.r(t),n.d(t,"checkPermissionSync",(function(){return c}));var r=n(0),i=n(10),o=n(1),a={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021},s={};o.default.onReady((function(){var e=Object.keys(a).map((function(e){return a[e]}));Object(r.invokeMethod)("getPermissionBytes",{indexes:e,success:function(t){if(t.permissionBytes)for(var n=0;n<t.permissionBytes.length;n++){var r=e[n];s[r]=1===t.permissionBytes[n]}},fail:function(e){}})}));var c=function(e){var t=a[e];if("number"!=typeof t)return!1;if(!Object(i.isUndefined)(s[t]))return s[t];var n=!1;return Object(r.invokeMethod)("getPermissionBytes",{indexes:[t],success:function(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n}},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return r.pick})),n.d(t,"omit",(function(){return r.omit})),n.d(t,"isObject",(function(){return r.isObject})),n.d(t,"mergeDeep",(function(){return r.mergeDeep})),n.d(t,"getMembers",(function(){return r.getMembers})),n.d(t,"get",(function(){return r.get})),n.d(t,"flatten",(function(){return r.flatten})),n.d(t,"cloneDeep",(function(){return r.cloneDeep})),n.d(t,"isRootElement",(function(){return s})),n.d(t,"getChildren",(function(){return c})),n.d(t,"getVisibleChildren",(function(){return u})),n.d(t,"traverseElement",(function(){return l})),n.d(t,"getDataFromPaths",(function(){return d})),n.d(t,"urlEncode",(function(){return _})),n.d(t,"urlDecode",(function(){return y})),n.d(t,"getQueryString",(function(){return m})),n.d(t,"addUrlParam",(function(){return b})),n.d(t,"allSettled",(function(){return w})),n.d(t,"getInitDeviceOrientation",(function(){return S}));var r=n(172),i=n(61);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t;return e.parent===i.Layout||!(null===(t=e.parent)||void 0===t?void 0:t.referComponent)},c=function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))},u=function(e){return c(e).filter((function(e){return!0!==(null==e?void 0:e.style.hidden)}))},l=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"downward";"downward"===r&&n(t);var i,a=o(c(t));try{for(a.s();!(i=a.n()).done;){var s=i.value;e(s,n,r)}}catch(e){a.e(e)}finally{a.f()}"upward"===r&&n(t)},d=function(e,t){var n,i=o(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,s=a.path,c=a.value,u=a.condition;if(void 0===u||u){var l=c||(s?Object(r.get)(e,s):"");if(l)return l}}}catch(e){i.e(e)}finally{i.f()}return null},f=n(43);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=63,v=function(e){var t=e.toString(16).toUpperCase();return t.length<2?"%0"+t:"%"+t},_=function(e){if(!e)return"";var t,n=[],r=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/,i=p(String(e));try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.match(r)){var a=o.codePointAt?o.codePointAt(0):o.charCodeAt(0);a<128?n.push(v(a)):a<2048?n.push([v(192+(a>>6)),v(128+(a&g))].join("")):a<65536?n.push([v(224+(a>>12)),v(128+(a>>6&g)),v(128+(a&g))].join("")):a<2097152&&n.push([v(240+(a>>18)),v(128+(a>>12&g)),v(128+(a>>6&g)),v(128+(a&g))].join(""))}else n.push(o)}}catch(e){i.e(e)}finally{i.f()}return n.join("")},y=function(e){if(!e)return"";for(var t=function(e){if(!e)throw new Error("invalid text")},n=function(e){return String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e)},r=e.replace(/%[a-fA-F0-9]{2}/gi,(function(e){return String.fromCharCode(parseInt(e.replace("%",""),16))})),i=0,o="";i<r.length;){var a=r.charCodeAt(i);if(a<128)o+=n(a),i+=1;else if(a>=192&&a<224){t(i+1<r.length),o+=n((31&a)<<6|r.charCodeAt(i+1)&g),i+=2}else if(a<240){t(i+2<r.length);var s=r.charCodeAt(i+1),c=r.charCodeAt(i+2);o+=n((15&a)<<12|(s&g)<<6|c&g),i+=3}else{t(i+3<r.length);var u=r.charCodeAt(i+1),l=r.charCodeAt(i+2),d=r.charCodeAt(i+3);o+=n([(7&a)<<18,(u&g)<<12,(l&g)<<6,d&g].reduce((function(e,t){return e|t}),0)),i+=4}}return o},m=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));var i,o=p(r.split("&"));try{for(o.s();!(i=o.n()).done;){var a=i.value.split("="),s=Object(f.default)(a,2),c=s[0],u=s[1];t[c]=y(u)}}catch(e){o.e(e)}finally{o.f()}}return t},b=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?",i="",o=Object.keys(t);if(o.length>0){var a,s=p(o);try{for(s.s();!(a=s.n()).done;){var c=a.value;i=i.concat(c+"="+_(t[c])+"&")}}catch(e){s.e(e)}finally{s.f()}return i.length>0&&(i=i.substring(0,i.length-1)),n[0]+r+i+(n[1]?"#"+n[1]:"")}return e},w=function(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))},O=n(25),E=n(1),S=function(){var e=Object(O.getInitScreenSize)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":E.default.deviceOrientation&&/^landscape/.test(E.default.deviceOrientation)?"landscape":E.default.deviceOrientation||"portrait"}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(143);var i=n(175),o=n(125);function a(e){return function(e){if(Array.isArray(e))return Object(r.default)(e)}(e)||Object(i.default)(e)||Object(o.default)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){n.r(t),n.d(t,"EventEmitter2",(function(){return c}));var r=n(17),i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function s(e,t){console.warn("[Event] "+e+" listeners of event "+t+" have been added, possibly causing memory leak.")}function c(e){this._events={},this._newListener=!1,this._removeListener=!1,a.call(this,e)}c.prototype.delimiter=".",c.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},c.prototype.event="",c.prototype.once=function(e,t){return this._once(e,t,!1)},c.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},c.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},c.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},c.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},c.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},c.prototype.emit=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=new Array(s),i=0;i<s;i++)t[i]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if("function"==typeof(a=this._events[e])){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];a.apply(this,t)}return!0}if(a&&(a=a.slice()),a&&a.length){if(s>3)for(t=new Array(s-1),i=1;i<s;i++)t[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},c.prototype.emitAsync=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,a,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if("function"==typeof(a=this._events[e]))switch(this.event=e,c){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];s.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},c.prototype.on=function(e,t){return this._on(e,t,!1)},c.prototype.prependListener=function(e,t){return this._on(e,t,!0)},c.prototype.onAny=function(e){return this._onAny(e,!1)},c.prototype.prependAny=function(e){return this._onAny(e,!0)},c.prototype.addListener=c.prototype.on,c.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},c.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||o.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this},c.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,o=[];if(!this._events[e])return this;n=this._events[e],o.push({_listeners:n});for(var a=0;a<o.length;a++){if(n=o[a]._listeners,i(n)){for(var s=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){s=c;break}if(s<0)continue;return this._events[e].splice(s,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var i in n){var o=n[i],a=t[o];a instanceof Function||"object"!==Object(r.default)(a)||null===a||(Object.keys(a).length>0&&e(t[o]),0===Object.keys(a).length&&delete t[o])}}}(this.listenerTree),this},c.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||o.call(this),this):(this._events&&(this._events[e]=null),this)},c.prototype.listeners=function(e){return this._events||o.call(this),this._events[e]||(this._events[e]=[]),i(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},c.prototype.eventNames=function(){return Object.keys(this._events)},c.prototype.listenerCount=function(e){return this.listeners(e).length},c.prototype.listenersAny=function(){return this._all?this._all:[]},t.default=c},function(e,t,n){n.r(t),n.d(t,"publish",(function(){return d.publish})),n.d(t,"subscribe",(function(){return d.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return d.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return d.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return d.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return d.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return d.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return d.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return d._invokeMethod})),n.d(t,"onMethod",(function(){return d.onMethod})),n.d(t,"beforeInvoke",(function(){return d.beforeInvoke})),n.d(t,"beforeInvokePromise",(function(){return d.beforeInvokePromise})),n.d(t,"beforeInvokeFail",(function(){return d.beforeInvokeFail})),n.d(t,"beforeInvokeComplete",(function(){return d.beforeInvokeComplete})),n.d(t,"beforeInvokeCallback",(function(){return d.beforeInvokeCallback})),n.d(t,"invoke",(function(){return d.invoke})),n.d(t,"on",(function(){return d.on})),n.d(t,"baseOperateWXData",(function(){return d.baseOperateWXData})),n.d(t,"operateWXDataFactory",(function(){return f.default})),n.d(t,"noop",(function(){return p})),n.d(t,"checkUrlInConfig",(function(){return h})),n.d(t,"setWxInterfaceDisabled",(function(){return v})),n.d(t,"checkWxInterfacePermission",(function(){return _})),n.d(t,"checkWxInterfaceSupported",(function(){return y})),n.d(t,"setWxInterfaceIsInvokeInTap",(function(){return b})),n.d(t,"unsetWxInterfaceIsInvokeInTap",(function(){return w})),n.d(t,"wrappedByCheckPermissionInTap",(function(){return S}));var r=n(17),i=n(6),o=n(2),a=n(100),s={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:0,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},c=function(e,t){return s[t][e]},u=n(1),l=n(11),d=n(0),f=n(26);function p(){}function h(e,t,n){var r=t.replace(/\.html\?.*|\.html$/,"");return!!__appServiceEngine__.hasPageRoute(r)||(Object(d.beforeInvokeFail)(e,n,'page "'+Object(i.removeHtmlSuffixFromUrl)(t)+'" is not found'),!1)}var g=!1;function v(e){g=!!e.state,e.success&&e.success({state:g})}function _(e,t){y(e);var n=c(e,"ui");if(n>0&&g)return!1;if(n>=20)if("undefined"==typeof __appServiceEngine__){if(t)return!1}else{var r=__appServiceEngine__.getCurrentRoute()||"";if(/^\/?__wx__\//.test(r))return!1;var i=r.match(/(?:^|\/)__plugin__\/(.*?)\//);if((i?i[1]:"")!==t&&n>=30)return!1}var o=c(e,"singlePage");return!((!o||1===o)&&Object(l.isSinglePageMode)())||(1===o&&E()&&Object(d.invokeMethod)("showToast",{icon:"",title:"请前往小程序使用完整服务",duration:2500}),!1)}function y(e){var t=c(e,"thirdApp");return 0!==t&&1!==t||!Object(l.isIn3rdApp)()||1===t&&E()&&Object(d.invokeMethod)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500}),!0}var m=!1;function b(e){m="tap"===e}function w(){setTimeout((function(){m=!1}),0)}function O(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(4===u.default.appType)return b("tap"),e.apply(t,r),void w();__virtualDOM__.wrapTapMark((function(){e.apply(t,r)}))}}function E(){return 4===u.default.appType?m:m||__virtualDOM__.checkTapMark()}function S(e,t){return function(n){var i=this,s=c(e,"tap"),f=E(),p=n;if(10!==s||f||(Object(a.reportRecycledAPI)({name:e,scene:0,strategy:1}),!o.IS_DEVTOOLS&&Object(l.checkAPIAvailable)(e))){if((20===s&&f||30===s)&&("function"==typeof n?p=O.call(this,n):"object"===Object(r.default)(n)&&(p=Object.assign({},n),["success","fail","complete"].forEach((function(e){"function"==typeof p[e]&&(p[e]=O.call(i,p[e]))})))),40!==s||4===u.default.appType||f){for(var h=arguments.length,g=new Array(h>1?h-1:0),v=1;v<h;v++)g[v-1]=arguments[v];var _=t.apply(this,[p].concat(g));return 4===u.default.appType&&[10,30,40].includes(s)&&w(),_}n&&(n.fail||n.complete)&&setTimeout((function(){Object(d.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}else n&&(n.fail||n.complete)&&setTimeout((function(){Object(d.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}}},function(e,t,n){n.r(t);var r,i=n(20),o={ACTION_TYPE_CLICK_GAME:1,ACTION_TYPE_CLICK_CLOSE_BTN:2,ACTION_TYPE_CLICK_HIDE:3,ACTION_TYPE_COMPLAINT:4,ACTION_TYPE_NOT_INTERESTED:5,ACTION_TYPE_INFLUEENCE_OPERATION:6},a={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3};t.default={reportId:1101,idkey:{BANNER_LOAD_ERROR:1,BANNER_RENDER_ERROR:2,PORTAL_LOAD_ERROR:3,PORTAL_RENDER_ERROR:14,LAUNCH_APP_ERROR:5,REPORT_ERROR:6,BANNER_TIMEOUT:7,BANNER_WXDATA_TIMEOUT:8,BANNER_TIMEOUT_RETRY_SUCCESS:9,BANNER_TIMEOUT_RETRY_FAIL:10,PORTAL_TIMEOUT:11,PORTAL_WXDATA_TIMEOUT:12,PORTAL_TIMEOUT_RETRY_SUCCESS:13,PORTAL_TIMEOUT_RETRY_FAIL:4,BANNER_DATA_INVALID:15,PORTAL_DATA_INVALID:16,BANNER_DATA_INVALID_RETRY_SUCCESS:17,BANNER_DATA_INVALID_RETRY_FAIL:18,PORTAL_DATA_INVALID_RETRY_SUCCESS:19,PORTAL_DATA_INVALID_RETRY_FAIL:20,ICON_LOAD_ERROR:21,ICON_TIMEOUT:22,ICON_WXDATA_TIMEOUT:23,ICON_TIMEOUT_RETRY_SUCCESS:24,ICON_TIMEOUT_RETRY_FAIL:25,ICON_DATA_INVALID:26,ICON_DATA_INVALID_RETRY_SUCCESS:27,ICON_DATA_INVALID_RETRY_FAIL:28,BANNER_PRELOAD_SUCCESS:29,BANNER_PRELOAD_FAIL:30,PORTAL_PRELOAD_SUCCESS:31,PORTAL_PRELOAD_FAIL:32,ICON_PRELOAD_SUCCESS:33,ICON_PRELOAD_FAIL:34},designWidth:375,TIMEOUT:15e3,ERRMSG:{NODATA:"no data available, please invoke load()",DUPLICATEWARN:"同一时刻只能展示一个同一类型的组件",NO_ADUNITID_WARN:"please pass in the adUnitId"},adType:a,adTypeName:(r={},Object(i.default)(r,a.AD_TYPE_BANNER,"BANNER"),Object(i.default)(r,a.AD_TYPE_PORTAL,"PORTAL"),Object(i.default)(r,a.AD_TYPE_ICON,"ICON"),r),actionType:o,feedbackList:[{name:"不感兴趣",actionType:o.ACTION_TYPE_NOT_INTERESTED},{name:"影响操作",actionType:o.ACTION_TYPE_INFLUEENCE_OPERATION}],presetChars:{0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625}}},function(e,t,n){n.r(t),n.d(t,"guid",(function(){return u})),n.d(t,"surroundByTryCatchFactory",(function(){return l})),n.d(t,"noop",(function(){return d})),n.d(t,"anyTypeToString",(function(){return f})),n.d(t,"stringToAnyType",(function(){return p})),n.d(t,"surroundByPromiseFactory",(function(){return h})),n.d(t,"promised",(function(){return g})),n.d(t,"asyncPromised",(function(){return v})),n.d(t,"invoke2Async",(function(){return y})),n.d(t,"async2Invoke",(function(){return m})),n.d(t,"async2InvokeWithPromise",(function(){return b}));var r=n(113),i=n(20),o=n(10),a=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function l(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function d(){}var f=l((function(e){var t=Object(o.getDataType)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");var p=l((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function h(e){return function(){for(var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=n=n||{},s=a.success,c=a.fail,u=a.complete;return s||c||u?e.apply(this,[n].concat(i)):new Promise((function(r,o){var a=Object.assign({success:r,fail:o},n);e.apply(t,[a].concat(i))}))}}function g(e,t,n){var r=h(n.value);return n.value=function(){return r.apply(this,arguments)},n}function v(e,t,n){var r=n.value,i=h(m(t,r));return n.value=function(){return i.apply(this,arguments)},n}var _=Symbol("ErrorInfosSymbol"),y=function(e){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return new Promise((function(n,o){return e.apply(void 0,[c(c({},t),{},{success:n,fail:function(e){var t=e.errMsg,n=Object(r.default)(e,["errMsg"]),i=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(i,n),i[_]=n,o(i)},complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errMsg,n=Object(r.default)(e,["errMsg"]);if(t&&!/^\w+:(ok|fail)/.test(t)){var i=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(i,n),i[_]=n,i._complete_hook=!0,o(i)}}})].concat(i))}))}},m=function(e,t){return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.success,o=n.fail,s=n.complete,c=Object(r.default)(n,["success","fail","complete"]),u={success:i,fail:o,complete:s},l=arguments.length,d=new Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];t.apply(void 0,[c].concat(d)).then((function(t){return Object(a.beforeInvokeCallback)({name:e,args:u,success:!0,res:t})}),(function(t){t._complete_hook?Object(a.beforeInvokeComplete)({name:e,args:u,errMsg:t.message,res:t[_]||{}}):Object(a.beforeInvokeCallback)({name:e,args:u,success:!1,errMsg:t.message,res:t[_]||{}})}))}},b=function(e,t){return h(m(e,t))}},function(e,t,n){n.r(t),n.d(t,"onNativeEvent",(function(){return a})),n.d(t,"offNativeEvent",(function(){return s}));var r=n(162),i=n(21),o={},a=function(e,t){var n=Object(i.getEventManager)("WeixinJSBridge-"+e);o[e]||(Object(r.onMethod)(e,(function(){n.emit.apply(n,arguments)})),o[e]=!0),n.internalOnMethod(t)},s=function(e,t){Object(i.getEventManager)("WeixinJSBridge-"+e).internalOffMethod(t)}},function(e,t,n){n.r(t),n.d(t,"ImageData",(function(){return u})),n.d(t,"concatId",(function(){return l})),n.d(t,"subscribeOnce",(function(){return d})),n.d(t,"uint8ClampedArrayToBase64",(function(){return f})),n.d(t,"base64ToUint8ClampedArray",(function(){return v})),n.d(t,"getImageRealPath",(function(){return _})),n.d(t,"getImageRealPathForDevtools",(function(){return y})),n.d(t,"wrapImageObject",(function(){return m})),n.d(t,"normalizeTouch",(function(){return b})),n.d(t,"injectExtraTouchInfo",(function(){return w})),n.d(t,"pipe",(function(){return O})),n.d(t,"shouldUseOldCanvas",(function(){return S}));var r=n(0),i=n(6),o=n(12),a=n(1),s=n(2),c=n(11),u=void 0!==u?u:function(e,t,n){"[object Uint8ClampedArray]"===Object.prototype.toString.call(e)?(Object.defineProperty(this,"data",{value:e,enumerable:!0}),Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"height",{value:n,enumerable:!0}),this.constructor.prototype.constructor=function(){},this.__proto__&&"undefined"!=typeof Symbol&&(this.__proto__[Symbol.toStringTag]="ImageData")):console.error("parameter 1 is not of type 'Uint8ClampedArray'")};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="canvas_"+e+"_"+t+"_"+n+"_";return r&&r!==__virtualDOM__.getRootNodeId(e)&&(i+=r),i}function d(e){var t=[],n=1;return Object(r.subscribe)(e,(function(e){for(var n=-1,r=0;r<t.length;r++){var i=t[r],o=i[0],a=i[1];if(o.cid===e.cid&&o.canvasId===e.canvasId){n=r,a(e);break}}n>=0&&t.splice(n,1)})),function(e,r){e.cid=n++,t.push([e,r])}}function f(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return(window.__global||window).btoa(t)}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,g="undefined"!=typeof window&&window.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!h.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,i="",o=0;o<e.length;)t=p.indexOf(e.charAt(o++))<<18|p.indexOf(e.charAt(o++))<<12|(n=p.indexOf(e.charAt(o++)))<<6|(r=p.indexOf(e.charAt(o++))),i+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return i};function v(e){for(var t=g(e),n=t.length,r=new Uint8ClampedArray(n),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function _(e,t,n,r){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;if(!/wxfile:\/\//.test(e))if(n||t){n=n.split("/")[0];var a=__virtualDOM__.getNodeById(t,r),s=a&&a.is||"";e=n?0===e.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(i.getRealRoute)(s,e,!1).replace(/\.html$/,""):Object(i.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(s),e,!1).replace(/\.html$/,""):Object(i.getRealRoute)(s,e,!1).replace(/\.html$/,"")}else e=Object(i.getRealRoute)(o.default.lastRoute,e,!1).replace(/.html$/,"");return e}function y(e,t,n,r){return/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e?e:"/__pageframe__/"+_(e,t,n,r)}function m(e,t){var n=e.setSrc.bind(e),r=e.getSrc.bind(e),i=e.getReferrerPolicy?e.getReferrerPolicy.bind(e):function(){},o=e.setReferrerPolicy?e.setReferrerPolicy.bind(e):function(){};return delete e.getSrc,delete e.setSrc,delete e.getReferrerPolicy,delete e.setReferrerPolicy,Object.defineProperty(e,"src",{enumerable:!0,set:function(e){var r=_(e,t.nodeId,t.pluginId,t.webviewId);n(r)},get:function(){return r()}}),Object.defineProperty(e,"referrerPolicy",{enumerable:!0,set:function(e){o(e)},get:function(){return i()}}),e}function b(e){return e&&e.length>0&&e.forEach((function(e){e.x=e.clientX||e.pageX,e.y=e.clientY||e.pageY,delete e.target})),e}function w(e){return e&&e.length>0&&e.forEach((function(e){e.clientX=e.x,e.clientY=e.y,e.pageX=e.x,e.pageY=e.y})),e}function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0;o<t.length;++o){var a=t[o];"function"==typeof a&&(e=0===o?a.apply(null,r):a.call(null,e))}return e}}var E=!1;function S(){if(s.IS_IOS&&Object(c.isIn3rdApp)()){var e=255&Number(a.default.host.version);if(e>=16&&e<=31)return!0}return a.default.clientVersion>=385881088&&a.default.clientVersion<=385881343&&E}a.default.onReady((function(){Object(r.invokeMethod)("getPermissionBytes",{indexes:[977],success:function(e){e.permissionBytes&&1===e.permissionBytes[0]&&(E=!0)}})}))},function(e,t,n){n.r(t),n.d(t,"getNetworkType",(function(){return u})),n.d(t,"onNetworkStatusChange",(function(){return l})),n.d(t,"offNetworkStatusChange",(function(){return d})),n.d(t,"_getCurrentNetworkType",(function(){return f}));var r=n(0),i=n(21),o=n(1),a=n(12),s="",c=Object(i.getEventManager)("networkstatusChange"),u=function(e){Object(r.invokeMethod)("getNetworkType",e)},l=c.onMethod,d=c.offMethod,f=function(){return s};Object(r.onMethod)("onNetworkStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=e.networkType,a.default.currentNetworkType=s,c.emit(e),Object(r.publish)("onNetworkStatusChange",e)})),o.default.onReady((function(){u({success:function(e){s=e.networkType,a.default.currentNetworkType=s}})}))},function(e,t,n){function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,"default",(function(){return i}))},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return l})),n.d(t,"openADCanvas",(function(){return d})),n.d(t,"navigateToMiniProgram",(function(){return f})),n.d(t,"operateWXData",(function(){return h})),n.d(t,"adOperateWXData",(function(){return p})),n.d(t,"showSplashAd",(function(){return g})),n.d(t,"closeSplashAd",(function(){return v})),n.d(t,"showSplashAdMenu",(function(){return _})),n.d(t,"splashAdFirstStepViewLayoutStateChange",(function(){return y})),n.d(t,"splashAdAllViewLayoutStateChange",(function(){return m})),n.d(t,"fs",(function(){return u._fs}));var r=n(0),i=n(14),o=n(46),a=n(6),s=n(24),c=n(2),u=n(81),l=Object(i.promisify)((function(e){var t=e.url,n=e.adInfo,i=e.adUxInfo,o={url:t,adInfo:n,success:e.success,fail:e.fail,complete:e.complete};i&&(o.adUxInfo=i),Object(r.invokeMethod)("private_openUrl",o)})),d=Object(i.promisify)((function(e){var t=e.canvasInfo,n=e.posType,i=e.success,a=e.fail,s=e.complete;Object(r.invokeMethod)("openADCanvas",{canvasId:t.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:n}),adInfoXml:Object(o.htmlDecode)(t.ad_info_xml),openFirstSightVoice:1,success:i,fail:a,complete:s})})),f=Object(i.promisify)((function(e){var t=e.appId,n=e.path,i=e.traceid,o=e.aid,s=e.adInfo,c=e.adUxInfo,u=e.success,l=e.fail,d=e.complete,f=i+":"+o,p={appId:t,path:Object(a.transWxmlToHtml)(n).trim(),scene:1095,sourcetype:1,sceneNote:f,adInfo:s,success:u,fail:l,complete:d};c&&(p.adUxInfo=c),Object(r.invokeMethod)("navigateToMiniProgram",p)})),p=Object(i.promisify)(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("adOperateWXData",i,{apiName:""})){var o={api_name:i.apiName,data:i.reqData||{},operate_directly:e},a={data:o,isImportant:!0===n,requestInQueue:!i.hasOwnProperty("requestInQueue")||Boolean(i.requestInQueue)};Object(r.invokeMethod)("adOperateWXData",Object.assign({},a,i),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess:function(e){c.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})}}}(!1,"adOperateWXDataForAd")),h=Object(i.promisify)(Object(s.constructOperateWXData)(!1,"operateWXDataForAd"));function g(e){Object(r._invokeMethod)("showSplashAd",e)}function v(e){Object(r._invokeMethod)("closeSplashAd",e)}function _(e){Object(r._invokeMethod)("showSplashAdMenu",e)}function y(e){Object(r._invokeMethod)("splashAdFirstStepViewLayoutStateChange",e)}function m(e){Object(r._invokeMethod)("splashAdAllViewLayoutStateChange",e)}},function(e,t,n){n.r(t),n.d(t,"error",(function(){return i})),n.d(t,"isSystemError",(function(){return o})),n.d(t,"isSDKError",(function(){return a})),n.d(t,"isThirdError",(function(){return s}));var r={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},i=Object.keys(r).reduce((function(e,t){var n=parseInt(t.replace(/\s/g,""),10);return e[r[t]]=n,e}),{}),o=function(e){return e.toString().endsWith(1)},a=function(e){return e.toString().endsWith(2)},s=function(e){return e.toString().endsWith(3)}},function(e,t,n){n.r(t),n.d(t,"GlobalEmitter",(function(){return o})),n.d(t,"FakeTempFilePathMap",(function(){return a}));var r=n(30),i=n(33),o=new r.default,a={map:{},set:function(e){var t=Object(i.guid)();return this.map[t]=e,t},get:function(e){var t=this;return e?this.map[e]:Object.keys(this.map).map((function(e){return t.map[e]}))}}},function(e,t,n){n.r(t),n.d(t,"login",(function(){return Ht})),n.d(t,"logout",(function(){return Yt})),n.d(t,"checkSession",(function(){return zt})),n.d(t,"authorize",(function(){return Jt})),n.d(t,"_authorize",(function(){return Xt})),n.d(t,"getUserInfo",(function(){return $t})),n.d(t,"getUserProfile",(function(){return Zt})),n.d(t,"_getNativeUserInfo",(function(){return Qt})),n.d(t,"chooseAddress",(function(){return en})),n.d(t,"_chooseAddressForPlugin",(function(){return tn})),n.d(t,"_requestPaymentForPlugin",(function(){return nn})),n.d(t,"getSetting",(function(){return un})),n.d(t,"transformGetSettingResponse",(function(){return cn})),n.d(t,"openSetting",(function(){return fn})),n.d(t,"_openSetting",(function(){return dn})),n.d(t,"_openSettingForPlugin",(function(){return pn})),n.d(t,"getWeRunData",(function(){return hn})),n.d(t,"uploadWeRunData",(function(){return gn})),n.d(t,"addWeRunData",(function(){return vn})),n.d(t,"chooseInvoiceTitle",(function(){return _n})),n.d(t,"operateWXData",(function(){return O.operateWXData})),n.d(t,"_operateWXData",(function(){return O._operateWXData})),n.d(t,"constructOperateWXData",(function(){return O.constructOperateWXData})),n.d(t,"_pluginOperateWXData",(function(){return O._pluginOperateWXData})),n.d(t,"getOpenDeviceId",(function(){return yn})),n.d(t,"getUserGameLabel",(function(){return mn})),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return bn.reportUserBehaviorBranchAnalytics})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return bn.reportUserBehaviorBranchAnalyticsForDebug})),n.d(t,"shareToWeRun",(function(){return kn})),n.d(t,"sendGroupMessage",(function(){return xn})),n.d(t,"reportGroupShare",(function(){return Pn})),n.d(t,"payment",(function(){return r})),n.d(t,"share",(function(){return i})),n.d(t,"card",(function(){return ht})),n.d(t,"soter",(function(){return o})),n.d(t,"redPacket",(function(){return a})),n.d(t,"facialRecognition",(function(){return s})),n.d(t,"trafficCard",(function(){return c})),n.d(t,"favorites",(function(){return u})),n.d(t,"checkIsUserAdvisedToRest",(function(){return Rn})),n.d(t,"chooseInvoice",(function(){return Nn})),n.d(t,"faceVerifyForPay",(function(){return Mn})),n.d(t,"openOfficialAccountProfile",(function(){return Ln})),n.d(t,"openMiniProgramProfile",(function(){return Bn})),n.d(t,"openUserProfile",(function(){return Fn})),n.d(t,"preventApplePayUI",(function(){return Un})),n.d(t,"getWxSecData",(function(){return Wn})),n.d(t,"requestSubscribeMessage",(function(){return zn})),n.d(t,"openMiniProgramSearch",(function(){return Jn})),n.d(t,"openMiniProgramHistoryList",(function(){return Xn})),n.d(t,"openMiniProgramStarList",(function(){return $n})),n.d(t,"batchGetContactDirectly",(function(){return Zn})),n.d(t,"preloadMiniProgramEnvDirectly",(function(){return Qn})),n.d(t,"predownloadMiniProgramPackageDirectly",(function(){return er})),n.d(t,"requestBizSplitBillPayment",(function(){return tr})),n.d(t,"getGroupEnterInfo",(function(){return ar}));var r={};n.r(r),n.d(r,"requestPayment",(function(){return H})),n.d(r,"verifyPaymentPassword",(function(){return Z})),n.d(r,"bindPaymentCard",(function(){return Q})),n.d(r,"requestPaymentToBank",(function(){return ee})),n.d(r,"requestVirtualPayment",(function(){return te})),n.d(r,"openOfflinePayView",(function(){return ne})),n.d(r,"openWCPayCardList",(function(){return re})),n.d(r,"requestMallPayment",(function(){return ie})),n.d(r,"setCurrentPaySpeech",(function(){return oe})),n.d(r,"loadPaySpeechDialectConfig",(function(){return ae})),n.d(r,"requestJointPayment",(function(){return se})),n.d(r,"getWCPayOverseaPrepayRequest",(function(){return ce})),n.d(r,"requestH5Transaction",(function(){return ue})),n.d(r,"openWCPayOverseaPaymentReceive",(function(){return le})),n.d(r,"handleWCPayOverseaWalletBuffer",(function(){return de})),n.d(r,"requestVerifyUserIdentity",(function(){return fe})),n.d(r,"openSelectPayment",(function(){return pe})),n.d(r,"requestEntrustAuthorization",(function(){return he})),n.d(r,"requestFacetoFacePayment",(function(){return ge})),n.d(r,"phoneBindCardVerifySms",(function(){return _e})),n.d(r,"requestQueryCashier",(function(){return ye})),n.d(r,"requestPersonalPay",(function(){return ve})),n.d(r,"requestOrderPayment",(function(){return Ae}));var i={};n.r(i),n.d(i,"getShareInfo",(function(){return xe})),n.d(i,"showShareMenu",(function(){return De})),n.d(i,"hideShareMenu",(function(){return Re})),n.d(i,"updateShareMenu",(function(){return Le})),n.d(i,"showUpdatableMessageSubscribeButton",(function(){return Fe})),n.d(i,"shareAppMessageForFakeNative",(function(){return Ge})),n.d(i,"shareFileMessage",(function(){return qe})),n.d(i,"shareVideoMessage",(function(){return Xe})),n.d(i,"ShareInfoStorage",(function(){return Ce.default})),n.d(i,"authPrivateMessage",(function(){return et})),n.d(i,"userShareMenuState",(function(){return Pe.userShareMenuState})),n.d(i,"showShareImageMenu",(function(){return pt}));var o={};n.r(o),n.d(o,"checkIsSupportSoterAuthentication",(function(){return gt})),n.d(o,"startSoterAuthentication",(function(){return vt})),n.d(o,"checkIsSoterEnrolledInDevice",(function(){return _t}));var a={};n.r(a),n.d(a,"openGoldenRedPacketDetail",(function(){return yt})),n.d(a,"sendGoldenRedPacket",(function(){return mt})),n.d(a,"sendBizRedPacket",(function(){return wt})),n.d(a,"sendRedPacket",(function(){return Ot})),n.d(a,"openRedPacket",(function(){return Et})),n.d(a,"showRedPackage",(function(){return Tt}));var s={};n.r(s),n.d(s,"checkIsSupportFacialRecognition",(function(){return It})),n.d(s,"startFacialRecognitionVerify",(function(){return Ct})),n.d(s,"startCustomFacialRecognitionVerify",(function(){return kt})),n.d(s,"startFacialRecognitionVerifyAndUploadVideo",(function(){return xt})),n.d(s,"startCustomFacialRecognitionVerifyAndUploadVideo",(function(){return Pt}));var c={};n.r(c),n.d(c,"checkTrafficCardConditions",(function(){return Dt})),n.d(c,"queryTrafficCardInfo",(function(){return Rt})),n.d(c,"issueTrafficCard",(function(){return jt})),n.d(c,"rechargeTrafficCard",(function(){return Nt})),n.d(c,"setDefaultTrafficCard",(function(){return Mt}));var u={};n.r(u),n.d(u,"addFileToFavorites",(function(){return Ft})),n.d(u,"addVideoToFavorites",(function(){return Gt}));var l=n(113),d=n(13),f=n.n(d),p=n(20),h=n(37),g=n(0),v=n(58),_=n(23),y=n(1);function m(e){var t=y.default.accountInfo&&y.default.accountInfo.appId||"noAppId";Object(v.invokeWebviewMethod)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}function b(e,t){var n=y.default.accountInfo&&y.default.accountInfo.appId||"noAppId";e&&Object(v.invokeWebviewMethod)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}var w=n(134),O=n(24),E=n(104),S=n(126),T=n(2),I=n(10),A=n(11),C=n(118),k=n(33),x=n(25),P=n(75);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j,N,M,L,B=0,F=1,U=2,W=3,V=4,G=(Object(P.onAppEnterForeground)((function(e){j=+e.scene||0,N=e.scene_note||e.sceneNote||"",M=+e.prescene||0,L=e.prescene_note||e.presceneNote||""})),y.default.onReady((function(){var e;e=y.default.appLaunchInfo||{},j=e.scene||0,N=e.scene_note||e.sceneNote||"",M=e.prescene||0,L=e.prescene_note||e.presceneNote||""})),function(){return{scene:j,scene_note:N,prescene:M,prescene_note:L}}),H=Object(k.async2Invoke)("requestPayment",function(){var e=Object(h.default)(f.a.mark((function e(t){var n,r,i,o,a,s,c,u,l,d,p,h;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Object(I.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=3;break}throw new Error("parameter error: "+n);case 3:if(t=Object.assign({},t),r=Object(C.getShouldCheckTicketBeforePayment)(),i=r.deprecated,o=!1,!(o="develop"===y.default.envVersion||"trial"===y.default.envVersion?y.default.usingShopPlugin||!1:Object(C.getShouldCheckTicketBeforePayment)().shouldCheck||!1)){e.next=35;break}if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),!i){e.next=11;break}throw new Error("deprecated for shop plugin");case 11:return a=B,s=t.ticket||"",e.prev=13,c=Object(C.getShouldCheckTicketBeforePayment)().timeout||500,e.prev=15,e.next=18,Promise.race([K(R({ticket:s,prepay_id:t.package.replace("prepay_id=","")},G())),J("timeout",c)]);case 18:u=e.sent,l=u.is_authorized,a=l?W:V,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),e.t0,wxNativeConsole.error("[paymentCheckTicket] fail",e.t0),a=e.t0&&"timeout"===e.t0.message?U:F;case 29:if(a!==V){e.next=31;break}throw new Error("check ticket rejected");case 31:return e.prev=31,X({ticket:s,checkTicketStatus:a}),e.finish(31);case 35:return d=Se.NONE,e.prev=36,e.next=39,$(t);case 39:return h=e.sent,d=Se.SUCCESS,e.abrupt("return",h);case 44:throw e.prev=44,e.t1=e.catch(36),d=Se.FAILED,p=e.t1.message,e.t1;case 49:return e.prev=49,o&&Ie({prepayId:(t.package||"").replace("prepay_id=",""),requestPaymentStatus:d,requestPaymentErrmsg:p}),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[13,,31,35],[15,24],[36,44,49,52]])})));return function(t){return e.apply(this,arguments)}}()),z=function(){var e=Object(h.default)(f.a.mark((function e(){var t,n,r,i,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){m((function(t){var n=!1,r="",i=y.default&&y.default.appContactInfo&&y.default.appContactInfo.operationInfo&&y.default.appContactInfo.operationInfo.jsonInfo&&y.default.appContactInfo.operationInfo.jsonInfo.warning_info&&y.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];i&&i.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,r=e.wording)})),e({time:t,isRistWarning:n,wording:r})}))}));case 2:if(t=e.sent,n=t.time,r=t.isRistWarning,i=t.wording,o=(+new Date-(n||0))/1e3/60,!(r&&o>30)){e.next=10;break}return e.next=10,new Promise((function(e,t){Object(_._showModal)({content:i,confirmText:"继续支付",cancelText:"取消",success:function(n){n.confirm?(b(+new Date),e()):t(new Error("cancel"))}})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=Object(k.invoke2Async)(g.invokeMethod.bind(null,"requestPayment")),q=Object(k.invoke2Async)(O._operateWXData),K=function(){var e=Object(h.default)(f.a.mark((function e(){var t,n,r,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,q({apiName:"webapi_openproductcheckticket",reqData:R({},t)});case 3:return n=e.sent,r=n.respData,e.abrupt("return",JSON.parse(r.data));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=function(e,t){return new Promise((function(n,r){return setTimeout((function(){return r(new Error(e))}),t)}))},X=function(e){var t=e.ticket,n=e.checkTicketStatus,r=y.default.appLaunchInfo||{},i=G(),o=[r.sessionid||r.sessionId||"",i.scene,i.scene_note,i.prescene,i.prescene_note,n||0,t||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:o})},$=function(){var e=Object(h.default)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:return n=Object(w.getPayCookieString)(),t.passCookies&&"string"==typeof t.passCookies?t.cookie=n?t.passCookies+";; "+n:t.passCookies:n?t.cookie=n:delete t.cookie,delete t.passCookies,r=Object(S.getAdUxInfo)(),e.next=8,Y(R(R({adUxInfo:r},t),{},{grantMessageQuota:!0}));case 8:return i=e.sent,Object(O._operateWXData)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:t.package.replace("prepay_id=","")}}),Object(v.invokeWebviewMethod)("reportPaymentFormId",{packageStr:t.package}),Object(E._setWxIsInvokeInTapForNavToMiniProgram)(),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){Object(g.invokeMethod)("verifyPaymentPassword",e)},Q=function(e){Object(g.invokeMethod)("bindPaymentCard",e)},ee=function(e){Object(g.invokeMethod)("requestPaymentToBank",e)},te=function(e){Object(g.invokeMethod)("requestVirtualPayment",e)},ne=function(e){Object(g.invokeMethod)("openOfflinePayView",e)},re=function(e){Object(g.invokeMethod)("openWCPayCardList",e)},ie=function(e){Object(g.invokeMethod)("requestMallPayment",e)},oe=function(e){Object(g.invokeMethod)("setCurrentPaySpeech",e)},ae=function(e){Object(g.invokeMethod)("loadPaySpeechDialectConfig",e)},se=function(e){Object(g.invokeMethod)("requestJointPayment",e)},ce=function(e){Object(g.invokeMethod)("getWCPayOverseaPrepayRequest",e)},ue=function(e){Object(g.invokeMethod)("requestH5Transaction",e)},le=function(e){Object(g.invokeMethod)("openWCPayOverseaPaymentReceive",e)},de=function(e){Object(g.invokeMethod)("handleWCPayOverseaWalletBuffer",e)},fe=function(e){Object(g.invokeMethod)("requestVerifyUserIdentity",e)},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openSelectPayment",e)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("requestEntrustAuthorization",e)},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("requestFacetoFacePayment",e)},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("requestPersonalPay",e)},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.15")>=0||T.IS_IOS&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.13")>=0?Object(g.invokeMethod)("phoneBindCardVerifySms",e):Object(g.beforeInvokeFail)("phoneBindCardVerifySms",e,"not yet supported")},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.beforeInvoke)("requestQueryCashier",e,{timeStamp:0,nonceStr:"",package:"",signType:"",paySign:""})&&Object(g.invokeMethod)("requestQueryCashier",e)},me=0,be=1,we=2,Oe=3,Ee=4,Se={NONE:0,SUCCESS:1,FAILED:2},Te=function(){var e=Object(h.default)(f.a.mark((function e(){var t,n,r,i,o,a,s,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.extUserUin,r=t.prepayId,i=t.orderInfo,o=y.default.appLaunchInfo||{},e.next=4,q({apiName:"webapi_openproductaddorder",reqData:{ext_info:R({ext_useruin:n,ext_appid:y.default.host&&y.default.host.appId,session_id:o.sessionid||o.sessionId||""},G()),prepay_id:r,order_info:i}});case 4:return a=e.sent,s=a.respData,e.abrupt("return",JSON.parse(s.data));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(h.default)(f.a.mark((function e(t){var n,r,i,o,a,s,c,u,l,d;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.extUserUin,r=t.addOrderStatus,i=t.requestPaymentStatus,o=t.requestPaymentErrmsg,a=t.prepayId,s=t.outOrderId,c=Object(x.getSystemInfoSync)(),u=y.default.appLaunchInfo||{},e.next=5,q({apiName:"webapi_openproductreportorder",reqData:{ext_info:R(R({ext_useruin:n,ext_appid:y.default.host&&y.default.host.appId,session_id:u.sessionid||u.sessionId||""},G()),{},{add_order_status:r,request_payment_status:i,request_payment_errmsg:o,model:c.model,brand:c.brand,version:c.version,system:c.system,platform:c.platform,sdk_version:c.SDKVersion}),prepay_id:a,order_info:{out_order_id:s}}});case 5:return l=e.sent,d=l.respData,e.abrupt("return",JSON.parse(d.data));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=Object(k.async2Invoke)("requestOrderPayment",Object(h.default)(f.a.mark((function e(){var t,n,r,i,o,a,s,c,u,d,p,h,g,v,_,y,m=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:{},!(n=Object(I.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=4;break}throw new Error("parameter error: "+n);case 4:return r=t.orderInfo,i=void 0===r?{}:r,o=t.extUserUin,a=Object(l.default)(t,["orderInfo","extUserUin"]),s=(t.package||"").replace("prepay_id=",""),c=Object(C.getShouldCheckTicketBeforePayment)().timeout||500,u=(t.orderInfo||{}).out_order_id,d=me,h=Se.NONE,e.prev=10,e.prev=11,e.next=14,Promise.race([Te({extUserUin:o,prepayId:s,orderInfo:i}),J("timeout",c)]);case 14:v=e.sent,_=v.errcode,y=v.errmsg,d=0===_?be:Ee,p=y,e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),e.t0,d=e.t0&&"timeout"===e.t0.message?Oe:we;case 26:if(d!==Ee){e.next=28;break}throw new Error(p||"addOrder failed");case 28:return e.prev=28,e.next=31,$(a);case 31:h=Se.SUCCESS,e.next=39;break;case 34:throw e.prev=34,e.t1=e.catch(28),g=e.t1.message||"unknown",h=Se.FAILED,e.t1;case 39:return e.prev=39,Ie({extUserUin:o,addOrderStatus:d,requestPaymentStatus:h,requestPaymentErrmsg:g,prepayId:s,outOrderId:u}),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[10,,39,42],[11,22],[28,34]])})))),Ce=n(99),ke=n(6),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ce.default.get(e.shareTicket);t?Object(g.baseOperateWXData)(Object(ke.assign)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:function(e){T.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{var t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):Object(g.beforeInvokeFail)("getShareInfo",e,"invalid shareTicket")},Pe=n(64),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){Pe.userShareMenuState.showShareAppMessageMenu=!0;var r=new Promise((function(t,n){!0===e.withShareTicket?(Pe.userShareMenuState.withShareTicket=!0,Object(g.invokeMethod)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll:function(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail:function(e){e.errMsg+=", with arg withShareTicket: true"}})):(Pe.userShareMenuState.withShareTicket=!1,Object(g.invokeMethod)("showShareMenu",{success:t,fail:n}))}));n.push(r)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){Pe.userShareMenuState.showShareTimelineMenu=!0;var i=new Promise((function(e,t){Object(g.invokeMethod)("showShareTimelineMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){Object(g.beforeInvokeCallback)({name:"showShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");Object(g.beforeInvokeFail)("showShareMenu",e,n,t.errCode)}))},Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function r(){return new Promise((function(e,t){Object(g.invokeMethod)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(Pe.userShareMenuState.showShareTimelineMenu=!1,n.push(r())),t.includes("shareAppMessage")){Pe.userShareMenuState.showShareAppMessageMenu=!1,0===n.length&&n.push(r());var i=new Promise((function(e,t){Object(g.invokeMethod)("hideShareMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){Object(g.beforeInvokeCallback)({name:"hideShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");Object(g.beforeInvokeFail)("hideShareMenu",e,n,t.errCode)}))};function je(e){return new Promise((function(t,n){"boolean"==typeof e.withShareTicket?Object(g.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll:function(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail:function(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function Ne(e){return new Promise((function(t,n){if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){var r=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});Object(g.invokeMethod)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:r,success:t,fail:n}),!0===e.isPrivateMessage?Pe.userShareMenuState.isPrivateMessage=!0:!1===e.isPrivateMessage&&(Pe.userShareMenuState.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function Me(e){return new Promise((function(t,n){"string"==typeof e.toDoActivityId?(Object(g.invokeMethod)("updateShareMenuUpdatable",{updatable:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),Object(g.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),Object(g.invokeMethod)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:function(e){wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:function(e){wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}var Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([je(e),Ne(e),Me(e)]).then((function(t){"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((function(t){void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))},Be=n(51),Fe=function(){Object(Be.reportDeprecatedAPI)("showUpdatableMessageSubscribeButton"),console.warn("wx.showUpdatableMessageSubscribeButton 此接口已废弃")},Ue=n(12),We=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(ke.getRealRoute)(Ue.default.lastRoute,e,t)},Ve=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("shareAppMessageForFakeNative",e,{title:"",bizType:0})){var t=Object.assign({useDefaultSnapshot:!0,disableForward:!1},e);if(e.path&&"string"==typeof e.path)t.path=Ve(__appServiceEngine__.convertComponentAliasToRoute(e.path));else{var n=Object.keys(Ue.default.query).map((function(e){return e+"="+Ue.default.query[e]})).join("&"),r=Ue.default.lastRoute+"?"+n;t.path=Ve(__appServiceEngine__.convertComponentAliasToRoute(r))}e.imageUrl&&"string"==typeof e.imageUrl&&(/^(http|https|wxfile):\/\//.test(e.imageUrl)?t.imageUrl=e.imageUrl:t.imageUrl=We(e.imageUrl,!1));var i=y.default.accountInfo.appId;"wx60422b707e49ff2e"!==i&&(delete t.bizSourceName,delete t.bizSourceIconUrl),Object(g.invokeMethod)("shareAppMessageForFakeNative",t)}},He=function(e){if(e&&"string"==typeof e)if(/^\w+:\/\//.test(e)){if(!/^wxfile:\/\//.test(e)&&!/^http:\/\/tmp\//.test(e))throw new Error("invalid path")}else if(e)return We(e,!1);return e};function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){Object(p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qe=Object(k.async2Invoke)("shareFileMessage",Object(h.default)(f.a.mark((function e(){var t,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},Object(g.beforeInvokePromise)(t,{filePath:""}),n=He(t.filePath),e.prev=3,e.next=6,Object(g.invokeMethodAsync)("shareFileMessage",Ye(Ye({},t),{},{filePath:n}));case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"cancel"===e.t0.message){e.next=12;break}throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))));function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Object(p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xe=Object(k.async2Invoke)("shareVideoMessage",Object(h.default)(f.a.mark((function e(){var t,n,r,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},Object(g.beforeInvokePromise)(t,{videoPath:""}),n=He(t.videoPath),r=He(t.thumbPath),e.prev=6,e.next=9,Object(g.invokeMethodAsync)("shareVideoMessage",Je(Je({},t),{},{videoPath:n,thumbPath:r}));case 9:e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(6),"cancel"===e.t0.message){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[6,11]])})))),$e=n(27),Ze="authPrivateMessage",Qe=Object(O.constructOperateWXData)(!1,Ze);function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ce.default.get(e.shareTicket);t&&t.shareKey?Object($e.checkPermissionSync)("authShareRelationship")?Qe({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success:function(t){wxNativeConsole.info("webapi_authmgr res",t);var n=JSON.parse(t.respData.data),r={};r.iv=n.iv,r.encryptedData=n.encrypt_activity_id,r.valid=1===n.res,Object(g.beforeInvokeCallback)({name:Ze,args:e,res:r})},fail:e.fail}):Object(g.beforeInvokeFail)(Ze,e,"no permission"):Object(g.beforeInvokeFail)(Ze,e,"invalid shareTicket")}var tt=n(31),nt=n(123),rt=n(52),it=Object(k.invoke2Async)(nt.getImageInfo),ot=1,at=3,st=4,ct=5,ut=6,lt=7,dt=function(e){var t=e.action,n=y.default.appLaunchInfo||{},r=[y.default.appType+1e3,t,n.sessionid||n.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:r})},ft=function(){var e=Object(h.default)(f.a.mark((function e(t){var n,r,i,o,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return __sclEngine__.initScl((function(t){return e(t.mainRoot)}))}));case 2:return n=e.sent,r=n.append("share-image",{imgPath:t.imgPath,height:t.height,width:t.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA",imageDarkSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),i=Object(rt.setNavigateBackInterception)((function(e){[rt.NavigationBackTypes.BottomBackButton,rt.NavigationBackTypes.NavigationBackInterceptionType,rt.NavigationBackTypes.NavigateBackCall].includes(e.type)&&r.handleClose()})),e.next=7,new Promise((function(e){["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((function(t){r.addListener(t,(function(){return e({action:t})}))}))}));case 7:return o=e.sent,a=o.action,Object(rt.stopNavigateBackInterception)(i),e.abrupt("return",{action:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pt=Object(k.async2Invoke)("showShareImageMenu",Object(h.default)(f.a.mark((function e(){var t,n,r,i,o,a,s,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},Object($e.checkPermissionSync)("showShareImageMenu")){e.next=3;break}throw new Error("no permission");case 3:if(Object(tt.beforeInvokePromise)(t,{path:""}),n=t.path,!/^\w+:\/\//.test(n)){e.next=10;break}if(/^wxfile:\/\//.test(n)||/^http:\/\/tmp\//.test(n)){e.next=8;break}throw new Error("invalid path");case 8:e.next=11;break;case 10:n="/"+We(n,!1);case 11:return e.next=13,it({src:n});case 13:return r=e.sent,i=r.height,o=r.width,e.next=18,ft({imgPath:n,height:i,width:o});case 18:a=e.sent,s=a.action,dt({action:ot}),e.t0=s,e.next="shareToFriend"===e.t0?24:"addToFavorites"===e.t0?37:"saveToAlbum"===e.t0?41:(e.t0,46);break;case 24:return e.prev=24,e.next=27,Object(tt.invokeMethodAsync)("shareImageMessage",{imagePath:n});case 27:dt({action:at}),e.next=36;break;case 30:if(e.prev=30,e.t1=e.catch(24),"cancel"!==e.t1.message){e.next=35;break}return dt({action:st}),e.abrupt("return");case 35:throw e.t1;case 36:return e.abrupt("return");case 37:return dt({action:ct}),e.next=40,Object(tt.invokeMethodAsync)("addImageToFavorites",{url:n});case 40:return e.abrupt("return");case 41:return dt({action:ut}),e.next=44,Object(tt.invokeMethodAsync)("saveImageToPhotosAlbum",{filePath:n});case 44:return T.IS_IOS&&Object(_.showToast)({icon:"success",title:"已保存"}),e.abrupt("return");case 46:throw dt({action:lt}),new Error("cancel");case 48:case"end":return e.stop()}}),e,null,[[24,30]])})))),ht=n(141),gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("checkIsSupportSoterAuthentication",e,{})},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("startSoterAuthentication",e,{challenge:""})){var t=e.success;Object(g.invokeMethod)("startSoterAuthentication",Object.assign({},e,{success:function(n){0!==n.errCode?"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api startSoterAuthentication fail callback function")(n):"function"==typeof t&&__errorTracer__.surroundThirdByTryCatch(t,"at api startSoterAuthentication success callback function")(n)}}),{beforeSuccess:function(e){"number"==typeof e.errCode&&0!==e.errCode&&(e.errMsg="startSoterAuthentication:fail")}})}},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.beforeInvoke)("checkIsSoterEnrolledInDevice",e,{checkAuthMode:""})&&Object(g.invokeMethod)("checkIsSoterEnrolledInDevice",e,{})},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openGoldenRedPacketDetail",e,{})},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("sendGoldenRedPacket",e,{})},bt=n(91),wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object($e.checkPermissionSync)("sendBizRedPacketForOpen")){var t=Object(bt.getEnterOptionsSync)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){var n="sendBizRedPacket:fail scene "+t+" not support.";return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}Object(g.invokeMethod)("sendBizRedPacket",e,{})},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("sendRedPacket",e,{})},Et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openRedPacket",e,{})},St="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket",Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("showRedPackage",e,{url:""}))if(0===e.url.indexOf(St)){var t=Object.assign({isNativeStyle:!0},e);Object(g.invokeMethod)("private_openUrl",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})}else Object(g.beforeInvokeFail)("showRedPackage",e,"url is invalid")},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("checkIsSupportFacialRecognition",e,{})},At=function(e){return JSON.stringify({name:e.name,id_card_number:e.idCardNumber,mobile:e.mobile,outer_verify_id:e.outerVerifyId,user_id_key:e.userIdKey})},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=At(e);Object(g.invokeMethod)("startFacialRecognitionVerify",Object(ke.assign)(e,{requestVerifyPreInfo:t}),{})},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=At(e);Object(g.invokeMethod)("startCustomFacialRecognitionVerify",Object(ke.assign)(e,{requestVerifyPreInfo:t}),{})},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=At(e);Object(g.invokeMethod)("startFacialRecognitionVerifyAndUploadVideo",Object(ke.assign)(e,{requestVerifyPreInfo:t}),{})},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=At(e);Object(g.invokeMethod)("startCustomFacialRecognitionVerifyAndUploadVideo",Object(ke.assign)(e,{requestVerifyPreInfo:t}),{})},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.18")>=0?Object(g.invokeMethod)("checkTrafficCardConditions",e):Object(g.beforeInvokeFail)("checkTrafficCardConditions",e,"not yet supported")},Rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.18")>=0?Object(g.invokeMethod)("queryTrafficCardInfo",e):Object(g.beforeInvokeFail)("queryTrafficCardInfo",e,"not yet supported")},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.18")>=0?Object(g.invokeMethod)("issueTrafficCard",e):Object(g.beforeInvokeFail)("issueTrafficCard",e,"not yet supported")},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.18")>=0?Object(g.invokeMethod)("rechargeTrafficCard",e):Object(g.beforeInvokeFail)("rechargeTrafficCard",e,"not yet supported")},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T.IS_ANDROID&&Object(A.compareClientVersion)(y.default.clientVersion,"7.0.18")>=0?Object(g.invokeMethod)("setDefaultTrafficCard",e):Object(g.beforeInvokeFail)("setDefaultTrafficCard",e,"not yet supported")};function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){Object(p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("addFileToFavorites",e,{filePath:""})){var t=He(e.filePath);Object(g.invokeMethod)("addFileToFavorites",Bt(Bt({},e),{},{filePath:t}))}};function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){Object(p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt,Gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("addVideoToFavorites",e,{videoPath:""})){var t=He(e.videoPath),n=He(e.thumbPath);Object(g.invokeMethod)("addVideoToFavorites",Wt(Wt({},e),{},{videoPath:t,thumbPath:n}))}},Ht=function(e){Object(g.invokeMethod)("login",Object(ke.assign)(e,{requestInQueue:!1}))},zt=function(e){Vt&&clearTimeout(Vt),Object(g.invokeMethod)("refreshSession",e,{beforeSuccess:function(e){Vt=setTimeout((function(){Object(g.invokeMethod)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:function(e){e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},Yt=function(){Object(g.invokeMethod)("logout",{})};function qt(e){return"scope.userInfo"!==e||(Object(A.checkAPIAvailable)("getUserInfo")||Object(A.checkAPIAvailable)("authorize"))}var Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.innerContext,n=void 0===t?{}:t,r=e.args,i=void 0===r?{}:r;Object(g.beforeInvoke)("authorize",i,{scope:""})&&(qt(i.scope)?Object(g.invokeMethod)("authorize",Object(ke.assign)(i,{scope:[i.scope],requestInQueue:!n.hasOwnProperty("requestInQueue")||Boolean(n.requestInQueue)}),{beforeAll:function(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):Object(g.beforeInvokeFail)("authorize",i,"scope unauthorized"))},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Kt({args:e})},Xt=Kt,$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wx&&wx.version&&wx.version.version||"",n=!0===Object(A.checkAPIAvailable)("getUserInfo")||"unknown"===Object(A.checkAPIAvailable)("getUserInfo");Object(g.baseOperateWXData)(Object(ke.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",version:t}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){T.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(g.beforeInvoke)("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)Object(g.beforeInvokeFail)("getUserProfile",e,"desc length does not meet the requirements");else{var n=!0===Object(A.checkAPIAvailable)("getUserProfile")||"unknown"===Object(A.checkAPIAvailable)("getUserProfile");Object(g.baseOperateWXData)(Object(ke.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){T.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})}}},Qt=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i.apiName="webapi_getuserinfo",Object(g.beforeInvoke)("operateWXData",i,{apiName:""})){var o=wx&&wx.version&&wx.version.version||"",a={api_name:i.apiName,from_component:!0,data:i.reqData||{},operate_directly:e};a.data.version=o,n&&(a.plugin_appid=i.pluginId);var s={data:a,isImportant:!0===r,requestInQueue:!i.hasOwnProperty("requestInQueue")||Boolean(i.requestInQueue)};new Date,new Date,Object(g.baseOperateWXData)(Object.assign({},s,i),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){new Date,new Date,T.IS_ANDROID&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}}(!1,void 0,!0),en=function(e){Object(g.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(ke.renameProperty)(e,"addressPostalCode","postalCode"),Object(ke.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(ke.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(ke.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(ke.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddress"),delete e.err_msg}})},tn=function(e){Object(g.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(ke.renameProperty)(e,"addressPostalCode","postalCode"),Object(ke.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(ke.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(ke.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(ke.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddressForPlugin"),delete e.err_msg}})},nn=function(e){m((function(t){var n=(+new Date-(t||0))/1e3/60,r=!1,i="",o=y.default&&y.default.appContactInfo&&y.default.appContactInfo.operationInfo&&y.default.appContactInfo.operationInfo.jsonInfo&&y.default.appContactInfo.operationInfo.jsonInfo.warning_info&&y.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];o&&o.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(r=!0,i=e.wording)})),r&&n>30?Object(_._showModal)({content:i,confirmText:"继续支付",cancelText:"取消",success:function(t){t.confirm&&(b(+new Date),rn(e))}}):rn(e)}))},rn=function(e){if(Object(g.beforeInvoke)("requestPayment",e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""})){e=Object.assign({},e);var t=Object(w.getPayCookieString)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,Object(g.invokeMethod)("requestPayment",Object.assign({},e,{grantMessageQuota:!0}),{beforeSuccess:function(){Object(v.invokeWebviewMethod)("reportPaymentFormId",{packageStr:e.package}),Object(E._setWxIsInvokeInTapForNavToMiniProgram)()}})}},on=n(26),an=n(148),sn=wxNativeConsole.createLogger("getSetting");function cn(e){if(sn.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}):e.authSetting={},void 0!==e.sub_msg_switch){var t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){sn.info("sub_msg_list",e.sub_msg_list);var n=e.sub_msg_list.reduce((function(e,t){var n=t.template_id;return t.sys_msg_type>0&&(n=Object(an.mapSysMsgTypeNumToName)(t.sys_msg_type)),t.ban_flag?e[n]="ban":e[n]=t.setting_status?"accept":"reject",e}),{});sn.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}var un=Object(on.default)("getSetting","webapi_getuserallappauth",{},{},(function(e){var t=wx&&wx.version&&wx.version.version||"",n=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete n.withSubscriptions,n}),cn),ln=function(e){return{2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[e]},dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];if(e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}),e.subscriptionsSetting){var n={};if(n.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){var r=e.subscriptionsSetting.templatesInfo;n.itemSettings=r.reduce((function(e,t){var n=ln(t.tid),r={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=r[t.status]:e[t.templateId]=r[t.status],e}),{})}e.subscriptionsSetting=n}}})},fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};dn(e)},pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{})}})},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openWeRunSetting",{checkSupport:!0,success:function(){Object(g.baseOperateWXData)(Object(ke.assign)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess:function(e){T.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(g.beforeInvokeFail)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(g.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(g.invokeMethod)("uploadWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(g.beforeInvokeFail)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(g.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(g.invokeMethod)("addWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("chooseInvoiceTitle",e,{beforeSuccess:function(e){var t=e.invoiceTitleInfo||e.choose_invoice_title_info;if(t)try{var n=JSON.parse(t);delete e.invoiceTitleInfo,delete e.choose_invoice_title_info,e=Object.assign(e,n)}catch(e){}}})},yn=Object(on.default)("getOpenDeviceId","webapi_getdeviceinfo"),mn=Object(on.default)("getUserGameLabel","webapi_getgameplayerlabel",{},{},(function(){}),(function(e){return delete e.rawData,e})),bn=n(166),wn=n(112),On=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{sport_type_id:e.typeId,sport_time:e.time||0,sport_distance:e.distance||0,sport_number:e.number||0,sport_calorie:e.calorie||0,sport_url:e.url||""}}))},En=Object(A.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(on.default)("checkWxaSportRecord","webapi_checkwxasportrecord",{},{},(function(e){return{sport_record_list:On(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),Sn=Object(A.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(on.default)("reportWxaSportRecord","webapi_reportwxasportrecord",{},{},(function(e){return{sport_record_list:On(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),Tn=function(e){var t=e.show,n=void 0===t?0:t,r=e.statusCancel,i=void 0===r?0:r,o=e.statusConfirm,a=void 0===o?0:o,s=e.clickMoreCount,c=[n,i,a,void 0===s?0:s];Reporter.reportKeyValue({key:"ShareToWeRun",value:c.join(","),immediately:!0})},In=null;Object(wn.onThemeChange)((function(e){var t=e.theme;In&&In.setData({theme:t})}));var An=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=Object(rt.setNavigateBackInterception)((function(e){[rt.NavigationBackTypes.BottomBackButton,rt.NavigationBackTypes.NavigationBackInterceptionType,rt.NavigationBackTypes.NavigateBackCall].includes(e.type)&&In&&(In.handleCancel(),In=null)}));__sclEngine__.initScl((function(r){var i=r.mainRoot.append("werun",{input:e});In=i,i.addListener("confirm",(function(e){var r=e.detail.clickMoreCount;Tn({show:1,statusCancel:0,statusConfirm:1,clickMoreCount:r}),Object(rt.stopNavigateBackInterception)(n),Sn({recordList:t.recordList}).then((function(){return Object(g.beforeInvokeCallback)({name:"shareToWeRun",args:t})})).catch((function(e){return Object(g.beforeInvokeFail)("shareToWeRun",t,e.errMsg,+e.err_code)}))})),i.addListener("cancel",(function(e){var r=e.detail.clickMoreCount;Tn({show:1,statusCancel:1,statusConfirm:0,clickMoreCount:r}),Object(g.beforeInvokeFail)("shareToWeRun",t,"cancel"),Object(rt.stopNavigateBackInterception)(n)}))}))},kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.beforeInvoke)("shareToWeRun",e,{recordList:[]})&&(Object($e.checkPermissionSync)("shareDataToWeRun")?En({recordList:e.recordList}).then((function(t){var n=t.wording||{},r=An(n,["title","sport_name","note_title","note_detail"]);r.theme=Object(x.getSystemInfoSync)().theme||"light";var i=JSON.stringify(r);Cn(i,e)}),(function(t){Tn({show:0,statusCancel:0,statusConfirm:0,clickMoreCount:0}),Object(g.beforeInvokeFail)("shareToWeRun",e,t.errMsg,+t.err_code)})):Object(g.beforeInvokeFail)("shareToWeRun",e,"has no permission",-100004))},xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Be.reportDeprecatedAPI)("sendGroupMessage"),Object(g.beforeInvokeFail)("sendGroupMessage",e,"sendGroupMessage 接口已废弃")},Pn=function(e){Object(O._operateWXData)({apiName:"webapi_reportgroupshare",reqData:e})},Dn=Object(on.default)("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",{},{},(function(e){var t=e.todayPlayedTime;return{today_played_seconds:void 0===t?0:t}}),(function(e){e.result=!e.is_healthy,delete e.is_healthy})),Rn=function(e){Object(g.beforeInvoke)("checkIsUserAdvisedToRest",e,{todayPlayedTime:0})&&Dn(e)},jn=parseInt(Date.now()/1e3,10),Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("chooseInvoice",Object.assign({},e,{timeStamp:jn,nonceStr:jn+""}),{beforeSuccess:function(){}})},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("faceVerifyForPay",e)},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{scene:151});delete t.profileReportInfo,Object(g.invokeMethod)("openBizProfile",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("openBizProfile","openOfficialAccountProfile")}})},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openWeAppProfile",e)},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);delete t.profileReportInfo,Object(g.invokeMethod)("openUserProfile",t)},Un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(tt.invokeMethod)("preventApplePayUI",e)},Wn=Object(on.default)("getWxSecData","getWxSecData",{},{},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(function(e){return e})),Vn=n(181),Gn=Object(O.constructOperateWXData)(!1,"requestSubscribeMessage"),Hn=!1;Object(wn.onAppRoute)((function(){Hn=!1})),Object(wn.onAppEnterBackground)((function(){Hn=!1}));var zn=function(e){if(Hn)Object(g.beforeInvokeFail)("requestSubscribeMessage",e,"last call has not ended");else{if(!Object(g.beforeInvoke)("requestSubscribeMessage",e,{tmplIds:[]}))return;Hn=!0,T.IS_IOS&&y.default.clientVersion<385877504||T.IS_ANDROID&&y.default.clientVersion<654313216||T.IS_DEVTOOLS?qn(e):Yn(e)}},Yn=function(e){Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});var t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),Object(g.invokeMethod)("requestSubscribeMessage",t,{beforeAll:function(){Hn=!1},beforeSuccess:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),Hn=!1},beforeFail:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},qn=function(e){var t,n,r=e.tmplIds||[];if(0===r.length?(t="TmplIds can't be empty",n=10001):r.length>=4?(t="Templates count out of max bounds",n=20003):""===r[0]?(t="No template data return, verify the template id exist",n=20001):"string"!=typeof r[0]&&(t="Invalid template id",n=10004),t)return Hn=!1,void Object(g.beforeInvokeFail)("requestSubscribeMessage",e,t,n);var i=r.map((function(e){return{TemplateId:e}}));Gn({apiName:"webapi_subscribe_msg",reqData:{AppId:y.default.accountInfo.appId,ActionType:1,ItemList:i},success:function(t){var n=(JSON.parse(t.respData.data).InfoList||[])[0]||{};if(n.TemplateId!==r[0])return Hn=!1,void Object(g.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:Object(p.default)({},r[0],"ban")});var i="订阅一次以下消息通知";3===n.TemplateType&&(i="长期订阅以下消息通知"),Object(_.showModal)({title:i,content:n.Title||"",confirmText:"允许",cancelText:"取消",success:function(t){Hn=!1,Kn(e,t)},fail:function(t){Hn=!1,Object(g.beforeInvokeFail)("requestSubscribeMessage",e,t.errMsg)}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(g.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code),Hn=!1}})},Kn=function(e,t){var n=e.tmplIds[0];Gn({apiName:"webapi_subscribe_msg",reqData:{AppId:y.default.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success:function(){var r={};r[""+n]=t.confirm?"accept":"reject",Object(g.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:r}),Object(Vn.reportApiUse)({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(g.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code)}})},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openWeAppSearch",e)},Xn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openWeAppHistoryList",e)},$n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.invokeMethod)("openWeAppStarList",e)},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object($e.checkPermissionSync)("batchGetContactDirectly"))Object(g.invokeMethod)("batchGetContact",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("batchGetContact","batchGetContactDirectly")}});else{var t="batchGetContactDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object($e.checkPermissionSync)("preloadMiniProgramEnvDirectly"))Object(g.invokeMethod)("preloadMiniProgramEnv",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("preloadMiniProgramEnv","preloadMiniProgramEnvDirectly")}});else{var t="preloadMiniProgramEnvDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},er=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object($e.checkPermissionSync)("predownloadMiniProgramPackageDirectly"))Object(g.invokeMethod)("predownloadMiniProgramPackage",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("predownloadMiniProgramPackage","predownloadMiniProgramPackageDirectly")}});else{var t="predownloadMiniProgramPackageDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},tr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(tt.beforeInvoke)("requestBizSplitBillPayment",e,{orderNo:""})&&Object(tt.invokeMethod)("requestBizSplitBillPayment",e)},nr=n(34),rr="";y.default.onReady((function(){rr=y.default.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",rr)})),Object(nr.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rr=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",rr)}));var ir="getGroupEnterInfo",or=Object(O.constructOperateWXData)(!1,ir),ar=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rr?Object($e.checkPermissionSync)("getGroupToolbarInfo")?or({apiName:"webapi_swapopengid",reqData:{chatroom_name:rr},success:function(t){wxNativeConsole.info("webapi_swapopengid res",t);var n=t.respData,r={};r.iv=n.iv,r.encryptedData=n.encryptedData,n.cloud_id&&(r.cloudID=n.cloud_id),Object(g.beforeInvokeCallback)({name:ir,args:e,res:r})},fail:e.fail}):Object(g.beforeInvokeFail)(ir,e,"no permission"):Object(g.beforeInvokeFail)(ir,e,"invalid scene")}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(9);function i(e,t,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.default)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(173);var i=n(125),o=n(174);function a(e,t){return Object(r.default)(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||Object(i.default)(e,t)||Object(o.default)()}},function(e,t,n){n.r(t),n.d(t,"PREFIX",(function(){return r})),n.d(t,"PAGE_TYPE",(function(){return i})),n.d(t,"VALID_SCENE",(function(){return o}));var r="__wx__/functional-page",i={PLAY_PAGE_IMAGE:"play_page_image",PLAY_PAGE_VIDEO:"play_page_video"},o=[1154,1007,1008,1074,1088,1044,1045,1046,1010,1096]},function(e,t,n){n.r(t),n.d(t,"createCanvas",(function(){return j})),n.d(t,"_createCanvas",(function(){return P})),n.d(t,"createScreenCanvas",(function(){return N})),n.d(t,"getCanvasIdByCanvas",(function(){return y})),n.d(t,"getCanvasConfig",(function(){return m})),n.d(t,"_createSharedCanvas",(function(){return D})),n.d(t,"gameCreateOffScreenCanvas",(function(){return M})),n.d(t,"openDataCreateOffScreenCanvas",(function(){return L})),n.d(t,"_getScreenCanvas",(function(){return B}));var r=n(16),i=n(33),o=n(0),a=n(40),s=n(140),c=n(1),u=n(11),l=n(2),d=n(149),f=n(110),p=n(120),h=n(10),g=r.default.Canvas,v=new WeakMap,_=0,y=function(e){return v.get(e).canvasId},m=function(e){if(null!=e)return v.get(e)};function b(e){Object(f.checkNeedInsertImageViewPatch)()&&Object(o.invokeMethod)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete:function(e){e.errMsg}})}function w(e){Object(f.checkNeedInsertImageViewPatch)()&&Object(o.invokeMethod)("removeImageView",{viewId:e,complete:function(e){e.errMsg}})}var O,E,S,T=!1,I=Object.defineProperty,A=Object.getOwnPropertyDescriptor,C=Object.prototype.hasOwnProperty,k=["getContext","toDataURL"],x=["width","height","tagName","nodeName"],P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secure,n=void 0!==t&&t,r=e.isSharedCanvas,u=void 0!==r&&r,f=new g,p=l.IS_DEVTOOLS?c.default.appConfig.subContext:c.default.subContext,m="string"==typeof p;if(l.IS_DEVTOOLS){var E=f.__proto__.__proto__;f.__proto__=new Proxy(f.__proto__,{setPrototypeOf:function(e,t){return E=t,!0},getPrototypeOf:function(){return E}})}l.IS_DEVTOOLS||C.call(f,"width")||(x.forEach((function(e){for(var t=f;t;t=t.__proto__)if(C.call(t,e)){I(f,e,A(t,e)),I(f,e,{configurable:!1});break}})),I(f,"style",{value:{},writable:!0}),O||(O={},k.forEach((function(e){for(var t=f;t;t=t.__proto__)if(C.call(t,e)){I(O,e,A(t,e));break}}))),f.__proto__=O),m&&(Object.setPrototypeOf(f,Object(s.getLimitedCanvasProto)()),"Object"===Object(h.getDataType)(f)&&Object.defineProperty(Object(s.getLimitedCanvasProto)(),Symbol.toStringTag,{get:function(){return"HTMLCanvasElement"}})),f.__id=f.__id||_++;var S=!1;T||(T=!0,S=!0),v.set(f,{canvasId:f.__id,secure:n,isSharedCanvas:u,isScreenCanvas:S,flag:Object(d.createFlag)()}),delete f.__id;var P=l.IS_DEVTOOLS?f:y(f),D=function(e){if(n){var t=a.FakeTempFilePathMap.set(e.tempFilePath);e.tempFilePath=t}w(P)};return f.toTempFilePathSync=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=v.get(this),i=!!r&&r.isScreenCanvas;if(b(P),Object(o.invokeMethod)("canvasToTempFilePathSync",Object.assign({},n,{canvasId:P},{isScreenCanvas:i,success:function(t){e=t.tempFilePath},fail:function(e){t=e.errMsg}}),{beforeSuccess:D}),w(P),t)throw new Error(t);return e},f.toTempFilePath=Object(i.surroundByPromiseFactory)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v.get(f),n=!!t&&t.isScreenCanvas;Object(o.invokeMethod)("canvasToTempFilePath",Object.assign({},e,{canvasId:P,isScreenCanvas:n}),{beforeSuccess:D})})),f},D=function(){return S};c.default.onReady((function(){if(Object(u.isGame)()){Object(p.preGetPluginEnv)();var e="string"==typeof(l.IS_DEVTOOLS?c.default.appConfig.subContext:c.default.subContext)||Object(p.getShouldMakeCanvasSecure)();(function(e){if(Object(f.checkNeedPreserveDrawingBufferPatch)()){var t=e.getContext;e.getContext=function(n,r){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];if("webgl"===n||"2d"===n){var s=Object.assign({},r);return s.preserveDrawingBuffer=!0,t.call.apply(t,[e,n,s].concat(o))}return t.call.apply(t,[e,n,r].concat(o))}}})(E=P({secure:e})),Object(s.getOriginalProto)(),(S=P({secure:e,isSharedCanvas:!0})).width=c.default.screenWidth,S.height=c.default.screenHeight}}));var R=!1,j=function(){return R?P({secure:Object(p.getShouldMakeCanvasSecure)()}):(R=!0,E)},N=function(){return new r.default.ScreenCanvas},M=function(){return P({secure:Object(p.getShouldMakeCanvasSecure)()})},L=function(){return P()},B=function(){return E}},function(e,t,n){n.r(t),n.d(t,"htmlDecode",(function(){return s})),n.d(t,"getQueryString",(function(){return c})),n.d(t,"addUrlParam",(function(){return u})),n.d(t,"getFollowPageUrl",(function(){return l})),n.d(t,"isObject",(function(){return d})),n.d(t,"mergeDeep",(function(){return f})),n.d(t,"getTodayFormat",(function(){return p})),n.d(t,"convertTenThousand",(function(){return v})),n.d(t,"getAdDataViewId",(function(){return h})),n.d(t,"truncate",(function(){return g})),n.d(t,"pick",(function(){return _})),n.d(t,"get",(function(){return y})),n.d(t,"measureText",(function(){return m}));var r=n(20),i=n(17),o=n(0),a=n(14);n.d(t,"timeout",(function(){return a.timeout}));var s=function(e){return 0===(e=e||"").length?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g,"    ").replace(/&#039;|&#39;/g,"'").replace(/&#047;|&#47;/g,"/").replace(/&#092;|&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n")},c=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));for(var i=r.split("&"),o=0;o<i.length;o++){var a=i[o].split("=");t[a[0]]=a[1]}}return t},u=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?",i="",o=Object.keys(t);if(o.length>0){for(var a=0;a<o.length;a++)i=i.concat(o[a]+"="+t[o[a]]+"&");return i.length>0&&(i=i.substring(0,i.length-1)),n[0]+r+i+(n[1]?"#"+n[1]:"")}return e},l=function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type};return u(t,n)},d=function(e){return e&&"object"===Object(i.default)(e)&&!Array.isArray(e)},f=function e(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(!i.length)return t;var a=i.shift();if(d(t)&&d(a))for(var s in a)d(a[s])?(t[s]||Object.assign(t,Object(r.default)({},s,{})),e(t[s],a[s])):Object.assign(t,Object(r.default)({},s,a[s]));return e.apply(void 0,[t].concat(i))},p=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},h=function(e){if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},g=function(e,t){for(var n=0,r=0,i=0;i<e.length;i++)(n+=/[\u4e00-\u9fa5]/.test(e[i])?2:1)<t-1&&(r=i);return n>t?e.substring(0,r+1)+"...":e},v=function(e){return e<1e4?e.toString():(e/1e4).toFixed(1)+"万"},_=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},y=function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var r=e,i=0;r&&i<t.length;)r=r[t[i]],i+=1;return r||n},m=function(e){var t=0,n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{Object(o.invokeMethod)("measureText",Object.assign({},n,{complete:function(e){t=e.width||0}}))}catch(e){}return t}},function(e,t,n){n.r(t),n.d(t,"generateFunctionalPagePath",(function(){return c})),n.d(t,"isFunctionalPagePath",(function(){return u})),n.d(t,"parseCompletePath",(function(){return d})),n.d(t,"getFunctionalPageEnterParams",(function(){return f})),n.d(t,"getFunctionalPageEnterParamsString",(function(){return p})),n.d(t,"generateShareDataFromFunctionalPage",(function(){return h})),n.d(t,"mapPageTypeToCardSubType",(function(){return g})),n.d(t,"isAtFunctionalPage",(function(){return v})),n.d(t,"generateGameIndexPath",(function(){return y}));var r=n(20),i=n(17),o=n(72),a=n(60),s=n(44);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageType,n=void 0===t?"":t,r=e.query,o="";return"string"==typeof r?o=r:r&&"object"===Object(i.default)(r)&&(o=_(r)),s.PREFIX+"/"+n+"?"+o.replace(/^\?/,"")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp("^"+s.PREFIX+"/("+l()+")").test(e)}function l(){return Object.keys(s.PAGE_TYPE).map((function(e){return s.PAGE_TYPE[e]})).join("|")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("?"),n="",r="";t>=0?(n=e.slice(0,t),r=e.slice(t+1)):n=e;var i=new RegExp("^"+s.PREFIX+"/("+l()+")"),o=e.match(i),a="";return o&&(a=o[1]),{path:n,query:r,functionalPageType:a,isFunctionalPage:!!a}}function f(){var e=Object(o._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n={};return"object"===Object(i.default)(t)&&null!==t&&(n=t),n}function p(){var e=Object(o._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n="";return"object"===Object(i.default)(t)&&null!==t&&(n=JSON.stringify(t)),n}function h(e){var t={},n=a.pageStorage.get();if(n.pageType===s.PAGE_TYPE.PLAY_PAGE_IMAGE){var r=c({pageType:s.PAGE_TYPE.PLAY_PAGE_IMAGE,query:n.query});t={title:n.params.title||e.title,path:r,imageUrl:n.params.imageUrl||n.params.fileUrl,messageExtraData:Object.assign({},n.params,{pageType:s.PAGE_TYPE.PLAY_PAGE_IMAGE}),cardSubType:g(s.PAGE_TYPE.PLAY_PAGE_IMAGE)}}else if(n.pageType===s.PAGE_TYPE.PLAY_PAGE_VIDEO){var i=c({pageType:s.PAGE_TYPE.PLAY_PAGE_VIDEO,query:n.query});t={title:n.params.title||e.title,path:i,imageUrl:n.params.thumbUrl,messageExtraData:Object.assign({},n.params,{pageType:s.PAGE_TYPE.PLAY_PAGE_VIDEO}),cardSubType:g(s.PAGE_TYPE.PLAY_PAGE_VIDEO)}}return t}function g(e){var t;return(t={},Object(r.default)(t,s.PAGE_TYPE.PLAY_PAGE_IMAGE,0),Object(r.default)(t,s.PAGE_TYPE.PLAY_PAGE_VIDEO,1),t)[e]}function v(){return!!a.pageStorage.get()}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,n){return""+t+n+"="+e[n]+"&"}),"");return t=t.replace(/&$/,"")}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index.html",n="";"string"==typeof e?n=e:e&&"object"===Object(i.default)(e)&&(n=_(e));var r=t+"?"+n;return r}},function(e,t,n){n.r(t),n.d(t,"saveFile",(function(){return a})),n.d(t,"saveFileSync",(function(){return s})),n.d(t,"getSavedFileList",(function(){return c})),n.d(t,"getSavedFileInfo",(function(){return u})),n.d(t,"removeSavedFile",(function(){return l})),n.d(t,"getFileInfo",(function(){return d})),n.d(t,"readFile",(function(){return f})),n.d(t,"readFileSync",(function(){return p})),n.d(t,"writeFile",(function(){return h})),n.d(t,"writeFileSync",(function(){return g})),n.d(t,"mkdir",(function(){return v})),n.d(t,"mkdirSync",(function(){return _})),n.d(t,"rmdir",(function(){return y})),n.d(t,"rmdirSync",(function(){return m})),n.d(t,"readdir",(function(){return b})),n.d(t,"readdirSync",(function(){return w})),n.d(t,"access",(function(){return O})),n.d(t,"accessSync",(function(){return E})),n.d(t,"unlink",(function(){return S})),n.d(t,"unlinkSync",(function(){return T})),n.d(t,"stat",(function(){return I})),n.d(t,"statSync",(function(){return A})),n.d(t,"unzip",(function(){return C})),n.d(t,"copyFile",(function(){return k})),n.d(t,"copyFileSync",(function(){return x})),n.d(t,"rename",(function(){return P})),n.d(t,"renameSync",(function(){return D})),n.d(t,"appendFile",(function(){return R})),n.d(t,"appendFileSync",(function(){return j}));var r=n(81),i=n(109);n.d(t,"openDocument",(function(){return i.openDocument}));var o=r.default.app,a=o.saveFile,s=o.saveFileSync,c=o.getSavedFileList,u=o.getSavedFileInfo,l=o.removeSavedFile,d=o.getFileInfo,f=o.readFile,p=o.readFileSync,h=o.writeFile,g=o.writeFileSync,v=o.mkdir,_=o.mkdirSync,y=o.rmdir,m=o.rmdirSync,b=o.readdir,w=o.readdirSync,O=o.access,E=o.accessSync,S=o.unlink,T=o.unlinkSync,I=o.stat,A=o.statSync,C=o.unzip,k=o.copyFile,x=o.copyFileSync,P=o.rename,D=o.renameSync,R=o.appendFile,j=o.appendFileSync},function(e,t,n){n.r(t),n.d(t,"ReportCanvasDataEventType",(function(){return a})),n.d(t,"initReportCanvasData",(function(){return u})),n.d(t,"reportCanvasData",(function(){return l}));var r=n(0),i=n(10),o=n(115),a={EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18},s={sampleEventList:[]},c=new Map;function u(){Object(r.onMethod)("onCanvasReportEventSampleConfigReceived",(function(e){var t=JSON.parse(e.keyEventSampleConfig);Array.isArray(t.sample_event_list)&&(s.sampleEventList=t.sample_event_list,s.sampleEventList.forEach((function(e){c.set(e,0)})),function(){var e=s.sampleEventList.find((function(e){return e.event===a.EVENT_CANVAS_SAMPLE_BY_TIME}));if(e){var t=6e3,n=6,r=0;Object(i.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(i.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){l(a.EVENT_CANVAS_SAMPLE_BY_TIME),r++}),1e3);var o=setInterval((function(){r>n?clearInterval(o):setTimeout((function(){l(a.EVENT_CANVAS_SAMPLE_BY_TIME),r++}),500)}),t)}}(),function(){var e=s.sampleEventList.find((function(e){return e.event===a.EVENT_CANVAS_WEBVIEW_TIMING}));if(e){var t=6e3,n=6,r=0;Object(i.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(i.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){Object(o.getWebViewIdList)().forEach((function(e){l(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),r++}),1e3);var c=setInterval((function(){r>n?clearInterval(c):setTimeout((function(){Object(o.getWebViewIdList)().forEach((function(e){l(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),r++}),500)}),t)}}())})),Object(r.onMethod)("onStartReportCanvasData",(function(e){var t=e.event;t===a.EVENT_CANVAS_WEBVIEW_BEFORE_JUMP?Object(o.getWebViewIdList)().forEach((function(e){l(t,e)})):l(t)}))}function l(e,t){var n=function(e){return s.sampleEventList.find((function(t){return e===t.event}))}(e);if(n){var i=Date.now(),o=c.get(n);if(n.sample_interval_seconds,(i-o)/1e3<n.sample_interval_seconds)return;Object(r.invokeMethod)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success:function(){c.set(n,i)},fail:function(e){e.errMsg}})}}},function(e,t,n){n.r(t),n.d(t,"skiaCanvasMappings",(function(){return m})),n.d(t,"canvasMap",(function(){return b})),n.d(t,"skiaCanvasInfo",(function(){return w})),n.d(t,"canvasRefMapById",(function(){return O})),n.d(t,"skiaCanvasInsert",(function(){return S})),n.d(t,"skiaCanvasRemove",(function(){return T})),n.d(t,"getSkiaCanvasById",(function(){return I})),n.d(t,"CanvasFontManager",(function(){return A})),n.d(t,"SkiaCanvas",(function(){return C}));var r=n(7),i=n(15),o=n(18),a=n(9),s=n(29),c=n(4),u=n(5),l=n(21),d=n(35),f=n(182),p=n(69),h=n(169);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(a.default)(e);if(t){var i=Object(a.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y={},m={},b=new WeakMap,w={},O={},E=Object(l.getEventManager)("skiaCanvasLoadFontFace");function S(e,t){var n=Object(d.concatId)(t,e.canvasNumber);m[n]={top:e.position.top,left:e.position.left,width:e.position.width,height:e.position.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},w[e.canvasNumber]={lastTouches:[],data:e.data,compPath:e.compPath};var r=y[n];"function"==typeof r&&(r.call(),delete y[n]),Object(p.onBeforeUnloadPage)(t,(function(){T(e,t)}))}function T(e,t){var n=Object(d.concatId)(t,e.canvasNumber);delete y[n],delete m[n],delete O[n],delete w[e.canvasNumber]}function I(e,t){var n=Object(d.concatId)(e,t),r=O[n];return r||null}var A=function(){function e(){Object(c.default)(this,e),this._fontAssets=[],this.loadFontFace(h.nativeFontAssets),this.subscribeFontLoadEvent()}return Object(u.default)(e,[{key:"loadFontFace",value:function(e){var t;(t=this._fontAssets).push.apply(t,Object(s.default)(e))}},{key:"subscribeFontLoadEvent",value:function(){var e=this;E.internalOnMethod((function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nativeFontAssets,i=[],o=v(r);try{var a=function(){var n=t.value;e._fontAssets.find((function(e){return e.src===n.src||e.originalSrc===n.originalSrc}))||i.push(n)};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}i.length>0&&e.loadFontFace(i)}))}}],[{key:"initialize",value:function(e){this.fontManagerInstance||(this.fontManagerInstance=new e)}}]),e}();A.fontManagerInstance=null;var C=function(e){Object(i.default)(n,e);var t=g(n);function n(e,i,o,a){var s;return Object(c.default)(this,n),(s=t.call(this))._webviewId=e,s._canvasId=Object(d.concatId)(e,i),s._nodeId=a,s._nodeCanvasId=o,O[s._canvasId]=Object(r.default)(s),s}return Object(u.default)(n,[{key:"_init",value:function(){var e=m[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();t.width=300,t.height=150,b.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){b.get(e)||e._init(),t()};m[this._canvasId]?n():y[this._canvasId]=n}},{key:"getContext",value:function(e,t){if("2d"===e){var n=b.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=b.get(this);return e&&e.width},set:function(e){var t=b.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=b.get(this);return e&&e.height},set:function(e){var t=b.get(this);t&&(t.height=e)}},{key:"createImageData",value:function(){}},{key:"createPath2D",value:function(e){}},{key:"requestAnimationFrame",value:function(e){}},{key:"cancelAnimationFrame",value:function(){}},{key:"toDataURL",value:function(e,t){var n=b.get(this);return n?n.toDataURL(e,t):""}}]),n}(f.CanvasInterface)},function(e,t,n){n.r(t),n.d(t,"reportDeprecatedAPI",(function(){return r}));var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},function(e,t,n){n.r(t),n.d(t,"NavigationBackTypes",(function(){return p})),n.d(t,"_setNavigateBackInterception",(function(){return m})),n.d(t,"_stopNavigateBackInterception",(function(){return w})),n.d(t,"_onNavigateBackIntercept",(function(){return O})),n.d(t,"_offNavigateBackIntercept",(function(){return E})),n.d(t,"setNavigateBackInterception",(function(){return S})),n.d(t,"stopNavigateBackInterception",(function(){return T}));var r=n(13),i=n.n(r),o=n(37),a=n(20),s=n(33),c=n(0),u=n(21);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(u.getEventManager)("navigateBackIntercept"),p={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},h=[p.SlideBack,p.BottomBackButton,p.NavigationBarBack,p.NavigateBackCall],g=[],v=0;Object(c.onMethod)("onNavigateBackIntercept",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g[g.length-1]||{},n=t.id;f.emit(d(d({},e),{},{id:n})),Object(c.publish)("onNavigateBackIntercept",d(d({},e),{},{id:n}))}));var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scopes,n=new Set(t||[]),r={scopes:h.map((function(e){return{type:e,interception:n.has(e)}}))};return Object(c.invokeMethodAsync)("setNavigateBackInterception",r)},y=function(){var e=Object(o.default)(i.a.mark((function e(){var t,n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(d({},n=o.length>0&&void 0!==o[0]?o[0]:{}),{},{scopes:null!==(t=n.scopes)&&void 0!==t?t:h}),e.next=4,_(n);case 4:return r=++v,g.push({id:r,options:n}),e.abrupt("return",{id:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=Object(s.async2Invoke)("setNavigateBackInterception",y),b=function(){var e=Object(o.default)(i.a.mark((function e(){var t,n,r,o,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.id,!((r=g.findIndex((function(e){return e.id===n})))<0)){e.next=4;break}return e.abrupt("return");case 4:if(r!==g.length-1){e.next=8;break}return o=g.length>1?g[g.length-2].options:{scope:[]},e.next=8,_(o);case 8:g.splice(r,1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(s.async2Invoke)("stopNavigateBackInterception",b),O=f.internalOnMethod,E=f.internalOffMethod,S=function(){var e=Object(o.default)(i.a.mark((function e(t){var n,r,o,a,s=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:h,e.next=3,y({scopes:n});case 3:return r=e.sent,o=r.id,O(a=function(e){e.id===o&&t(e)}),e.abrupt("return",{id:o,handler:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.default)(i.a.mark((function e(t){var n,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,r=n.id,o=n.handler,e.next=10,b({id:r});case 10:E(o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){n.r(t);var r=n(4),i=n(5),o=n(32),a=n(2),s=n(11),c=o.default.presetChars,u=null,l=function(){if(u)return u;if(Object(s.isGame)()){var e=new NativeGlobal.Canvas;e.width=1,e.height=1,u=e.getContext("2d")}else u=wx.createCanvasContext();return u},d=function(){function e(){Object(r.default)(this,e)}return Object(i.default)(e,[{key:"getCharWidth",value:function(e,t){return(c[e]?c[e]:10)*t/10}},{key:"limitString",value:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}},{key:"getTextWidth",value:function(e,t){if(a.IS_ANDROID)return this.getTextWidthInAndroid(e,t);var n=l();return t&&(n.font=t+"px PingFangSC-Regular, SF Pro Display, SF Pro Text"),Math.ceil(n.measureText(e).width||0)+1}},{key:"getTextWidthInAndroid",value:function(e,t){var n=this;e=(e=String(e)).split("");var r=0;return e.forEach((function(e){var i=n.getCharWidth(e,t);r+=i})),r}},{key:"getMaxWordLength",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(e=String(e)).split("");var i=0,o=0;r&&(n-=this.getTextWidth("...",t));for(var a=0;a<e.length;a++){var s=e[a],c=this.getCharWidth(s,t);if(i+c>n)break;o++,i+=c}return o}},{key:"textMetrics",value:function(e,t){for(var n=t.fontSize,r=t.maxWidth,i=t.maxLines,o=void 0===i?1:i,a=[],s=0,c=e.substring(0,e.length);s<o;){var u=this.getMaxWordLength(c,n,r,!(s!==o-1)),l=s===o-1?this.limitString(c,u):c.substring(0,u);l&&a.push({text:l,width:this.getTextWidth(l,n)}),s++,c=c.substring(u,c.length)}return a}}]),e}();t.default=new d},function(e,t,n){n.r(t),n.d(t,"Emitter",(function(){return a}));var r=n(4),i=n(5),o=n(10),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.default)(this,e),this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=t,this.surround=n}return Object(i.default)(e,[{key:"on",value:function(e,t){if(Object(o.isFunction)(t)){var n,r,i=t;this.surround&&(n=t,r="at "+this.type+e+" callback function",i=void 0!==__errorTracer__?__errorTracer__.surroundThirdByTryCatch(n,r):void 0!==__subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(n,r):function(){try{return n.apply(void 0,arguments)}catch(e){return void console.error("thirdScriptError\n"+e.message+";"+r+"\n",e)}},this.callbackMap.set(t,i),this.originalCallbackMap.set(i,t)),this.eventMap.has(e)?this.eventMap.get(e).add(i):this.eventMap.set(e,new Set([i]))}else console.error("emitter.on fail: callback must be a function")}},{key:"off",value:function(e,t){var n=this,r=this.eventMap.get(e);if(r)if("function"!=typeof t)r.forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),r.clear();else if(this.surround){var i=this.callbackMap.get(t);r.delete(i),this.callbackMap.delete(t),this.originalCallbackMap.delete(i)}else r.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.eventMap.has(e)){var i=new Set(this.eventMap.get(e));i.forEach((function(e){return e.apply(void 0,n)}))}}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"getListenersLength",value:function(e){var t=this.eventMap.get(e);return t?t.size:0}}]),e}()},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(4),i=n(5),o=n(30),a=function(){function e(){Object(r.default)(this,e),this.emitter=new o.default({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}return Object(i.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);"function"==typeof r&&(this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r))}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}]),e}()},function(e,t,n){n.r(t),n.d(t,"onAppRoute",(function(){return g})),n.d(t,"offAppRoute",(function(){return v}));var r=n(0),i=n(34),o=n(110),a=n(80),s=n(6),c=n(21),u=n(179),l=n(1),d=n(57),f=n(12),p=n(102),h=Object(c.getEventManager)("AppRoute"),g=h.internalOnMethod,v=h.internalOffMethod;Object(i.onNativeEvent)("onAppRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d.nativeConsole.log("received onAppRoute, res=",JSON.stringify(e)),p.webviewAnimation.appRoute=!0,p.webviewAnimation.appRouteDone=!1;var n=Object(u.handleRewriteRoute)(e,t);if(!n){if(e.path=Object(s.removeHtmlSuffixFromUrl)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(f.default.lastRoute=e.path||"",f.default.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),f.default.lastOpenType=e.openType,"appLaunch"!==e.openType&&"autoReLaunch"!==e.openType)for(var i in e.query)try{e.query[i]=decodeURIComponent(e.query[i])}catch(e){}if("dismissPip"!==e.openType&&(f.default.query=e.query,f.default.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){var c=e.preloadRule||l.default._preloadRule&&l.default._preloadRule[e.path],g=e.page||l.default._page&&l.default._page[e.path+".html"];if(c&&(l.default.updatePreloadRule(e.path,c),e.preloadRule,l.default.preloadRule),g){var v=l.default.global&&l.default.global.window||{};g.window=Object.assign({},v,g.window),l.default.updatePage(e.path,g),e.page,l.default.page}}Object(r.publish)("onAppRoute",e,[]),Object(o.checkNeedAppEnterForegroundPatch)()&&a.default.emitter.emit("onAppRoute"),h.emit(e)}}))},function(e,t,n){n.r(t),n.d(t,"nativeConsole",(function(){return c}));var r=n(0),i=__wxConfig.platform,o=[],a=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c=e.getFullYear()+"-"+t+"-"+n,u=r+":"+o+":"+a+"."+s;return"ios"===i?c+" "+u+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):c+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+u},s=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map((function(e){switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");o.push({date:new Date,type:e,content:i})}};__wxConfig.onReady((function(){setTimeout((function e(){var t;(setTimeout(e,2e3),0!==o.length)&&(t=o.slice(),"ios"===i&&"function"==typeof systemLog?systemLog({dataArray:t.map((function(e){return"\n"+a(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}))}):"ios"===i||"windows"===i?Object(r.invokeMethod)("systemLog",{dataArray:t.map((function(e){return{message:"\n"+a(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}}))}):"android"===i&&Object(r.invokeMethod)("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+a(e.date)+"][weapplib] "+e.content}))).join("\n")}),o=[])}),2e3)}));var c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},function(e,t,n){n.r(t),n.d(t,"invokeWebviewMethod",(function(){return c})),n.d(t,"advancedInvokeWebviewMethod",(function(){return u}));var r=n(0),i=n(10),o=n(12),a=0,s=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,c=a++;s[c]=i,Object(r.publish)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[o.default.currentWebviewId]:n)};Object(r.subscribe)("callbackWebviewMethod",(function(e){var t=e.res,n=e.callbackId,r=s[n];delete s[n],r&&r(t)}));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(i.isObject)(t)||(t={}),t=Object.assign({},t);var o=Object(r.getSurroundedCallbacks)(t,e);c(e,t,void 0,(function(t){Object(r.callbackInvoke)(t,e,o,n)}))}},function(e,t,n){n.r(t),n.d(t,"downloadFile",(function(){return N})),n.d(t,"_downloadFileSkipCheckDomain",(function(){return j}));var r=n(0),i=n(16),o=n(2),a=n(1),s=n(84),c=n(27),u=n(4),l=n(15),d=n(18),f=n(9),p=n(90);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.default)(e);if(t){var i=Object(f.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(d.default)(this,n)}}Object(p.registerTaskType)("Download",{maxTaskCount:10,functionName:"downloadFile"}),a.default.onReady((function(){try{"number"==typeof a.default.wxAppInfo.maxDownloadConcurrent&&Object(p.registerTaskType)("Download",{maxTaskCount:a.default.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));var g=function(e){Object(l.default)(n,e);var t=h(n);function n(e){return Object(u.default)(this,n),t.call(this,e,{taskType:"Download",beforeSend:function(t){return t.filePath=e.filePath,t},beforeSuccess:function(e){return delete e.timeInterval,e}})}return n}(p.NetworkTask),v=n(5),_=n(30),y=n(11),m=n(178),b=i.default.Download,w=new WeakMap,O=new WeakMap,E=new WeakMap,S=[],T=0,I=10;function A(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(e&&(w.delete(e),O.delete(e),E.delete(e),T--);S.length>0&&T<I;){var t=S.shift(),n=w.get(t),r=O.get(t);n&&r&&(n.start(r),T++)}}a.default.onReady((function(){a.default.wxAppInfo&&a.default.wxAppInfo.maxDownloadConcurrent&&(I=a.default.wxAppInfo.maxDownloadConcurrent)}));var C=function(){function e(t){var n=this;Object(u.default)(this,e);var i=new b,o=new _.default;w.set(this,i),E.set(this,o),O.set(this,Object(y.filterObject)(t,["url","header","filePath","enableProfile"])),i.onfail=function(e){Object(r.beforeInvokeFail)("downloadFile",t,e),A(!0)},i.onsuccess=function(e){Object(r.beforeInvokeCallback)({name:"downloadFile",args:t,res:e}),A(!0)},i.onheader=function(e){return o.emit("header",{header:e})},i.onprogress=function(e,t,n){return o.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:n})},Object(m.checkNetworkAPIURL)({api:"downloadFile",url:t.url}).then((function(e){t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost?(S.push(n),A()):Object(r.beforeInvokeFail)("downloadFile",t,"invalid url")})).catch((function(){Object(r.beforeInvokeFail)("downloadFile",t,"url validate error")}))}return Object(v.default)(e,[{key:"abort",value:function(){var e=w.get(this);e&&e.abort()}},{key:"onHeadersReceived",value:function(e){var t=E.get(this);t&&t.on("header",e)}},{key:"onProgressUpdate",value:function(e){var t=E.get(this);t&&t.on("progress",e)}},{key:"offHeadersReceived",value:function(e){var t=E.get(this);t&&t.off("header",e)}},{key:"offProgressUpdate",value:function(e){var t=E.get(this);t&&t.off("progress",e)}}]),e}(),k=!1;function x(e){return k?new C(e):new g(e)}i.default.Download&&a.default.onReady((function(){var e=!1,t=o.IS_IOS?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";Object(s._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=Object(c.checkPermissionSync)("bindingDownload");k=e||n}));var P=n(81),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{var n=new x(t);return n}catch(e){return void Object(r.beforeInvokeFail)("downloadFile",t,e.message)}}}},R=D(),j=D({__skipDomainCheck__:!0}),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.filePath||!e.filePath.startsWith(Object(P.getOpenDataDir)()))return R(e);Object(r.beforeInvokeFail)("downloadFile",e,"permission denied")}},function(e,t,n){n.r(t),n.d(t,"pageStorage",(function(){return i}));var r={},i={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return r[e]},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";r[t]=e},clear:function(){r={}}}},function(e,t,n){n.r(t),n.d(t,"render",(function(){return q})),n.d(t,"updateRender",(function(){return K})),n.d(t,"unmount",(function(){return J})),n.d(t,"emitComponentProperty",(function(){return X})),n.d(t,"percentProperties",(function(){return me})),n.d(t,"convertStyle",(function(){return Ae})),n.d(t,"mergeStyles",(function(){return Ce})),n.d(t,"convertComputableStyle",(function(){return xe})),n.d(t,"calculateDynamicStyle",(function(){return ge})),n.d(t,"VideoEventType",(function(){return m})),n.d(t,"Component",(function(){return y})),n.d(t,"innerUsage",(function(){return b})),n.d(t,"Layout",(function(){return Pe}));var r=n(22),i=n(20),o=n(29),a=n(138),s=n(76),c=n.n(s),u=n(14),l=n(13),d=n.n(l),f=n(4),p=n(5);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_=function(e){for(var t=Array.isArray(e)?e[0]:e;t.parent&&t.parent!==Pe&&t.parent.referComponent;)t=t.parent;return t},y=function(){function e(t){Object(f.default)(this,e),this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._elementMap={},this.parent=null,this.props=t}return Object(p.default)(e,[{key:"setState",value:function(e,t){var n=this;this._stateQueue=this._stateQueue||{};for(var r=!1,i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];e[a]!==this.state[a]&&(r=!0)}r?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout((function(){return v(n,void 0,void 0,d.a.mark((function e(){var n,r,i,o,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this._setStateTimer=null,n=!1,r=0,i=Object.keys(this._stateQueue);r<i.length;r++)o=i[r],a=this._stateQueue[o],this.state[o]!==a&&(n=!0);if(n){e.next=5;break}return e.abrupt("return");case 5:return X(this,"updateState",Object.assign(Object.assign({},this.state),this._stateQueue)),Object.assign(this.state,this._stateQueue),K(this),ge(_(this._rootElement)),e.next=11,Pe.nextLayout();case 11:null==t||t(this.state,this.props);case 12:case"end":return e.stop()}}),e,this)})))}),0)):null==t||t(this.state,this.props)}},{key:"ready",value:function(e){}},{key:"updatedProps",value:function(){}},{key:"render",value:function(){return""}},{key:"_unmountComponent",value:function(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents)){var e,t=h(this._subComponents);try{for(t.s();!(e=t.n()).done;){e.value._unmountComponent()}}catch(e){t.e(e)}finally{t.f()}}X(this,"destroy")}}},{key:"getRootElement",value:function(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}},{key:"getRootElements",value:function(){return this._rootElement}},{key:"getRootComponent",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getSubComponents",value:function(){return this._subComponents}},{key:"getElementById",value:function(e){return this._elementMap[e]?this._elementMap[e]:null}},{key:"getEventHandler",value:function(e){return this._eventHandler[e]}},{key:"setStyle",value:function(e,t){return v(this,void 0,void 0,d.a.mark((function n(){var r,i,o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.getElementById(e),i=this._manualStyle,e&&t&&(r&&Object.assign(r.style,t),i[e]=i[e]||{},Object.assign(i[e],t)),n.next=5,Promise.resolve();case 5:return o=this.getRootComponent(),n.next=8,o.requestLayout();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"requestLayout",value:function(){var e=this,t=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((function(n){e._setStyleTimer&&clearTimeout(e._setStyleTimer),e._setStyleTimer=setTimeout((function(){e._setStyleTimer=null,ge(_(e._rootElement)),Promise.race([null==t?void 0:t.nextUpdate(),Object(u.timeout)(200)].filter((function(e){return e}))).then((function(){return n()}))}),0)}))}},{key:"_bindEvent",value:function(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}},{key:"_unbindEvent",value:function(e,t,n){var r,i;return!!(null===(i=null===(r=this._eventHandler[e])||void 0===r?void 0:r[t])||void 0===i?void 0:i.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}},{key:"onClick",value:function(e,t){return this._bindEvent(e,"click",t)}},{key:"offClick",value:function(e,t){return this._unbindEvent(e,"click",t)}},{key:"onReady",value:function(e,t){return this._bindEvent(e,"ready",t)}},{key:"offReady",value:function(e,t){return this._unbindEvent(e,"ready",t)}},{key:"onTouchstart",value:function(e,t){return this._bindEvent(e,"touchstart",t)}},{key:"offTouchstart",value:function(e,t){return this._unbindEvent(e,"touchstart",t)}},{key:"onTouchmove",value:function(e,t){return this._bindEvent(e,"touchmove",t)}},{key:"offTouchmove",value:function(e,t){return this._unbindEvent(e,"touchmove",t)}},{key:"onTouchend",value:function(e,t){return this._bindEvent(e,"touchend",t)}},{key:"offTouchend",value:function(e,t){return this._unbindEvent(e,"touchend",t)}},{key:"onTouchcancel",value:function(e,t){return this._bindEvent(e,"touchcancel",t)}},{key:"offTouchcancel",value:function(e,t){return this._unbindEvent(e,"touchcancel",t)}},{key:"onWaiting",value:function(e,t){return this._bindEvent(e,"waiting",t)}},{key:"offWaiting",value:function(e,t){return this._unbindEvent(e,"waiting",t)}},{key:"onPlay",value:function(e,t){return this._bindEvent(e,"play",t)}},{key:"offPlay",value:function(e,t){return this._unbindEvent(e,"play",t)}},{key:"onPause",value:function(e,t){return this._bindEvent(e,"pause",t)}},{key:"offPause",value:function(e,t){return this._unbindEvent(e,"pause",t)}},{key:"onEnded",value:function(e,t){return this._bindEvent(e,"ended",t)}},{key:"offEnded",value:function(e,t){return this._unbindEvent(e,"ended",t)}},{key:"onTimeUpdate",value:function(e,t){return this._bindEvent(e,"timeUpdate",t)}},{key:"offTimeUpdate",value:function(e,t){return this._unbindEvent(e,"timeUpdate",t)}},{key:"onError",value:function(e,t){return this._bindEvent(e,"error",t)}},{key:"offError",value:function(e,t){return this._unbindEvent(e,"error",t)}},{key:"onProgress",value:function(e,t){return this._bindEvent(e,"progress",t)}},{key:"offProgress",value:function(e,t){return this._unbindEvent(e,"progress",t)}},{key:"onFullScreenChange",value:function(e,t){return this._bindEvent(e,"fullScreenChange",t)}},{key:"offFullScreenChange",value:function(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}]),e}();y.isComponent=!0,y.subComponents={};var m,b=function(e){return e},w=n(172);!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(m||(m={}));var O=n(15),E=n(18),S=n(9);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(S.default)(e);if(t){var i=Object(S.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(E.default)(this,n)}}var I=function(e){Object(O.default)(n,e);var t=T(n);function n(){return Object(f.default)(this,n),t.apply(this,arguments)}return Object(p.default)(n,[{key:"render",value:function(){return this.props.children}}]),n}(y);function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}I.isFragment=!0;var k="Fragment",x={view:r.View,text:r.Text,image:r.Image,video:r.Video},P=function(e){return e.name[0]>="A"&&e.name[0]<="Z"},D=new WeakMap,R=function(e,t){var n=t.referComponent,r={children:t.children},i="getSubComponentProps",s=[];if(e.getProps){var c=e.getProps.split(":"),u=Object(a.default)(c);i=u[0],s=u.slice(1)}Object.assign(r,X.apply(void 0,[n,i,t.name].concat(Object(o.default)(s)))||{});for(var l=0,d=Object.keys(e);l<d.length;l++){var f=d[l],p=e[f];["getProps","children"].includes(f)||(r[f]=p)}return r.children=t.children,r},j=function(e,t,n){if(!n.isComponent)throw new Error("class "+e.name+" is not a component, please ensure extend BaseComponent");return q(n,R(t,e),!1,e.referComponent)},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M(e),n=e.referComponent,r=t.id,i=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),o=Object.assign({},t);r&&(o.name=r),delete o.id,o.style=Ce({classList:i,name:r,referComponent:n});var a=null!=o.bubbleEvent,s=x[e.name],c=new s(o);if(c.isBubbleEventSet=a,Object.assign(c,{classList:i,referComponent:n,key:t.key||null}),r&&n&&n.getEventHandler(r))for(var u=0,l=Object.keys(n.getEventHandler(r));u<l.length;u++){var d=l[u],f=n.getEventHandler(r)[d];if(d in m){if("video"===e.name){var p,h=A(f);try{for(h.s();!(p=h.n()).done;){var g=p.value,v="on"+d[0].toUpperCase()+d.slice(1),_=c[v];null==_||_.call(c,g)}}catch(e){h.e(e)}finally{h.f()}}}else{var y,w=A(f);try{for(w.s();!(y=w.n()).done;){var O=y.value;c.on(d,O)}}catch(e){w.e(e)}finally{w.f()}}}return null!=r&&(b(n)._elementMap[r]=c),c},M=function(e){for(var t={},n=0,r=Object.keys(e.attributes);n<r.length;n++){var i=r[n],o=e.attributes[i],a=Object(u.splitLineToCamelCase)(i);t[a]=o,/\{\{.+\}\}/.test(o)||("true"===o?t[a]=!0:"false"===o?t[a]=!1:"id"===a?t.id=Object(u.splitLineToCamelCase)(o):t[a]=o)}return t},L=function(e){var t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return Object.assign(Object.assign({},n),Object(i.default)({},k,I))},B=function e(t){if(Array.isArray(t)){var n,r={element:null,subComponents:[]},i=A(t.map((function(t){return e(t)})));try{for(i.s();!(n=i.n()).done;){var a,s=n.value,c=s.element,u=s.subComponents;if(c)if(null===r.element&&(r.element=[]),Array.isArray(c))(a=r.element).push.apply(a,Object(o.default)(Object(w.flatten)(c)));else r.element.push(c);var l,d=A(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;r.subComponents.includes(f)||r.subComponents.push(f)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){i.e(e)}finally{i.f()}return r}if(!t)return{element:null,subComponents:[]};var p,h=L(t.referComponent),g=[],v=M(t);if(P(t)){if(!h[t.name])throw new Error("component name "+t.name+" does not exists");var _=j(t,v,h[t.name]);if(!(p=_.getRootElements()))return{element:null,subComponents:[]};g.push(_)}else{var y=N(t,v);t.children.forEach((function(t){var n=e(t),r=n.element,i=n.subComponents;if(r)if(g.push.apply(g,Object(o.default)(i)),Array.isArray(r)){var a,s=A(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;y.add(c)}}catch(e){s.e(e)}finally{s.f()}}else y.add(r)})),p=y}return{element:p,subComponents:g}},F=function(e,t){for(var n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"],r=!1,i=0,o=n;i<o.length;i++){var a=o[i];void 0===t[a]&&(t[a]=void 0)}for(var s=0,c=Object.keys(t);s<c.length;s++){var u=c[s],l=t[u];n.includes(u)&&e[u]!==l&&(e[u]=l,r=!0)}return r},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n;if(e!==t){if(!r){if(!e||!e.parent)throw new Error("can not find element tree without parent");r=e.parent}if(e&&r.remove(e),t)if(Array.isArray(t)){var i,o=A(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;r.add(a)}}catch(e){o.e(e)}finally{o.f()}}else r.add(t)}},W=function(e,t){return x[t.name]&&e?e.constructor===x[t.name]:!(!(null==e?void 0:e.isRootElementOfComponent)||!e.referComponent)&&e.referComponent.constructor.name===t.name},V=function(e,t){var n=M(t),r=t.referComponent,i=L(r),a=e&&W(e,t);if(!P(t)){var s;if(!t.children||0===t.children.length)return e&&a?(F(e,n),e):N(t,n);if(e&&a)return F(e,n),H(function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))}(e),t.children),e;var c=B(t),u=c.element,l=c.subComponents;return(s=r.getSubComponents()).push.apply(s,Object(o.default)(l)),u}var d=null==e?void 0:e.referComponent,f=null==d?void 0:d.constructor;if(d&&f===i[t.name])return Object.assign(b(d).props,R(n,t)),K(d);var p=r.getSubComponents().indexOf(d);return p>-1&&r.getSubComponents().splice(p,1),d&&X(d,"destroy"),null==e||e.remove(),j(t,n,i[t.name]).getRootElements()},G=function e(t){return t.reduce((function(t,n){return n.name===k?t.push.apply(t,Object(o.default)(e(n.children))):t.push(n),t}),[])},H=function(e,t){var n,r=[],i={},a=A(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.key?i[s.key]=s:r.push(s)}}catch(e){a.e(e)}finally{a.f()}var c,u=A(G(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,d=l.key,f=null;if(d)i[d]&&(f=i[d],delete i[d]);else for(var p=0,h=Object.keys(r);p<h.length;p++){var g=h[p],v=r[+g];if(v&&W(v,l)){f=v,r.splice(Number(g),1);break}}f||(f=r.shift()||null),e.length&&e[0].parent&&U(f,V(f,l),e[0].parent)}}catch(e){u.e(e)}finally{u.f()}for(var _=Object.keys(i).reduce((function(e,t){return e.push(i[t]),e}),[]),y=0,m=[].concat(r,Object(o.default)(_));y<m.length;y++){var b=m[y];null==b||b.remove()}},z=function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):(n(t),t.children.forEach((function(t){return e(t,n)})))},Y=function(e,t){z(e,(function(e){e.referComponent||(e.referComponent=t)}))},q=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=new e(t);i.parent=r;var o=i.render(),a="string"==typeof o?c()(o).root:o;Y(a,i);var s=B(a),u=s.element,l=s.subComponents;return b(i)._subComponents=l,u&&(b(i)._rootElement=u,Array.isArray(u)?u.forEach((function(e){e.isRootElementOfComponent=!0})):u.isRootElementOfComponent=!0),X(i,"ready",u,l),n&&(u&&(Array.isArray(u)?u.forEach((function(e){Pe.add(e),ge(e)})):(Pe.add(u),ge(u))),D.set(e,i)),i},K=function(e,t){t&&Object.assign(b(e).props,t);var n=e.getRootElements(),r=e.render(),i="string"==typeof r?c()(r).root:r;return Y(i,e),Array.isArray(n)&&Array.isArray(i)?H(n,i):Array.isArray(n)&&!Array.isArray(i)?H(n,[i]):!Array.isArray(n)&&Array.isArray(i)?H([n],i):Array.isArray(n)||Array.isArray(i)||U(n,V(n,i)),X(e,"updatedProps"),n},J=function(e){if(!b(e).isComponent)throw new Error("variable is not a component instance");var t=e.getRootElements();Array.isArray(t)?t.forEach((function(e){return Pe.remove(e)})):Pe.remove(t),b(e)._unmountComponent(),D.delete(e.constructor)},X=function(e,t){if("function"==typeof e[t]){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e[t].apply(e,r)}return null},$=n(43),Z=n(73),Q=n(28),ee=n(53);function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=["width","height"],ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"column",t=arguments.length>1?arguments[1]:void 0;return["row","column"].indexOf(e)===["width","height"].indexOf(t)},oe=function(e,t){return Math.max(e,t)},ae=function(e,t){return e+t},se=function(e){return{width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}},ce=function(e){return{width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}},ue=function(e,t,n){return e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n},le=function(e,t,n,r,i,o){var a,s=e.parent,c=r[n],u=ce(e)[n],l=t,d=null,f=!1;if(!i&&o>0&&(null==l||o>l)&&(l=o),r.position&&"absolute"===r.position[1]&&null!=l&&(l+=o),c||null==l)c&&"percent"===c[0]&&null!=l?(d=l*c[1]-u,f=!0):c&&"digit"===c[0]&&(d=c[1]-u,f=!0);else if("auto"!==e.style[n])if("absolute"===(null===(a=r.position)||void 0===a?void 0:a[1])){for(var p=0,h=!1,g=0,v="width"===n?["left","right"]:["top","bottom"];g<v.length;g++){var _=v[g];null!=r[_]?"digit"===r[_][0]?p+=Number(r[_][1])||0:"percent"===r[_][0]&&(p+=(Number(r[_][1])||0)*l):h=!0}d=h?null:l-p}else i&&ie(s.style.flexDirection,n)&&e.style.flex>0?d=null:(function(e){return Object(Q.getVisibleChildren)(e).some((function(e){return null!=e.style.flex&&e.style.flex>0}))}(e)&&(f=!0),d=l-u);return null!=d&&(e.autoFitSize[n].size=d),f},de=function e(t){var n=Object(Q.isRootElement)(t),i=ce(t);t.autoFitSize={width:{size:null,margin:0,padding:i.width},height:{size:null,margin:0,padding:i.height}};var o,a=t.parent,s=xe(Ce(t)),c={width:!1,height:!1},u={width:null,height:null},l=te(re);try{for(l.s();!(o=l.n()).done;){var d=o.value,f=s[d],p=n?"width"===d?Z.deviceInfo.screenWidth:Z.deviceInfo.screenHeight:a.autoFitSize[d].size,h=n?0:a.autoFitSize[d].padding;!f&&n&&"height"===d&&(p=null),c[d]=le(t,p,d,s,!0,h)}}catch(e){l.e(e)}finally{l.f()}pe(t,s);var g,v=ce(t),_="wrap"===t.style.flexWrap,y=[],m=te(Object(Q.getVisibleChildren)(t));try{for(m.s();!(g=m.n()).done;){var b=g.value;e(b);var w=se(b);if("absolute"!==b.style.position){var O,E=te(re);try{for(E.s();!(O=E.n()).done;){var S=O.value,T=ie(t.style.flexDirection,S);if(_){if(T){var I="width"===S?"height":"width";y.push([(b.autoFitSize[S].size||0)+b.autoFitSize[S].padding+w[S],(b.autoFitSize[I].size||0)+b.autoFitSize[I].padding+w[I]])}}else{var A=T?ae:oe;null==b.autoFitSize[S].size&&b.autoFitSize[S].padding<=0&&A===ae&&(c[S]=!0),u[S]=A((b.autoFitSize[S].size||0)+b.autoFitSize[S].padding+w[S],u[S]||0)}}}catch(e){E.e(e)}finally{E.f()}}}}catch(e){m.e(e)}finally{m.f()}if(_){var C=0,k=0,x=0,P=0,D=ie(t.style.flexDirection,"width")?"width":"height",R="width"===D?"height":"width";P=c[D]&&null!=t.style[D]?t.style[D]:y.reduce((function(e,t){return e+Object($.default)(t,1)[0]}),0);var j,N=te(y);try{for(N.s();!(j=N.n()).done;){var M=Object($.default)(j.value,2),L=M[0],B=M[1];x=Math.max(x,B),L+C>P?(k+=x,x=B,C=L):C+=L}}catch(e){N.e(e)}finally{N.f()}k+=x,u[D]=C,u[R]=k}t instanceof r.Text&&(null!=t.autoFitSize.height.size&&c.height||Object.assign(t.autoFitSize.height,{size:t.style.lineHeight||t.style.fontSize||0,padding:v.height}),null!=t.autoFitSize.width.size&&c.width||Object.assign(t.autoFitSize.width,{size:ee.default.getTextWidth(t.value,t.style.fontSize||14)+3,padding:v.width}));var F,U=te(re);try{for(U.s();!(F=U.n()).done;){var W=F.value;c[W]||null===u[W]?v[W]>0&&(t.autoFitSize[W].padding=v[W]):Object.assign(t.autoFitSize[W],{size:null!=u[W]?u[W]:null,padding:v[W]})}}catch(e){U.e(e)}finally{U.f()}},fe=function e(t){var n,i,o=Object(Q.getVisibleChildren)(t),a=te(re);try{for(a.s();!(i=a.n()).done;){var s=i.value,c=ie(t.style.flexDirection,s),u=t.autoFitSize[s].size,l=t.autoFitSize[s].padding;if(null!=u||l){u=u||0;var d,f=0,p=0,h=te(o);try{for(h.s();!(d=h.n()).done;){var g=d.value,v=g.autoFitSize[s],_=v.size,y=v.margin,m=v.padding;"absolute"!==g.style.position&&(null!=_?f+=_+m+y:g.style.flex&&g.style.flex>0&&(p+=Number(g.style.flex)))}}catch(e){h.e(e)}finally{h.f()}var b,w=te(o);try{for(w.s();!(b=w.n()).done;){var O=b.value,E=xe(Ce(O)),S=null;c?S=O.style.flex?(u-f)/oe(p,1)*O.style.flex:null:t.style.alignItems&&"stretch"!==t.style.alignItems||(S=u),null==O.autoFitSize[s].size&&S?le(O,S,s,E,!1,l):"absolute"===(null===(n=E.position)||void 0===n?void 0:n[1])&&le(O,u,s,E,!1,l)}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){a.e(e)}finally{a.f()}var T,I=te(o);try{for(I.s();!(T=I.n()).done;){e(T.value)}}catch(e){I.e(e)}finally{I.f()}var A,C=te(re);try{for(C.s();!(A=C.n()).done;){var k=A.value,x=t.autoFitSize[k],P=x.size,D=x.padding;null!=P&&t.style[k]!==P+D&&(t.style[k]=P+D)}}catch(e){C.e(e)}finally{C.f()}t instanceof r.Text&&null==t.style.lineHeight&&(t.style.lineHeight=t.style.height)},pe=function(e,t){for(var n=e.autoFitSize.width.size,r=e.autoFitSize.height.size,i=0,o=Object.keys(t);i<o.length;i++){var a=o[i],s=t[a];"percent"===s[0]?"horizontal"===me[a]&&null!=n?e.style[a]=s[1]*n:"vertical"===me[a]&&null!=r&&(e.style[a]=s[1]*r):"normal"===s[0]&&(e.style[a]=s[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=ue(t.transform[1][0],n||0,e.style.left||0),e.style.top=ue(t.transform[1][1],r||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},he=function e(t){var n,r,i=[["width","left"],["height","top"]],o=te(Object(Q.getVisibleChildren)(t));try{for(o.s();!(r=o.n()).done;){var a=r.value;e(a);var s,c=te(i);try{for(c.s();!(s=c.n()).done;){var u=Object($.default)(s.value,2),l=u[0],d=u[1];if((a.style.position||(null===(n=a.expandAbsoluteSize)||void 0===n?void 0:n.has(l)))&&"hidden"!==t.style.overflow){var f=(a.style[l]||0)+(a.style[d]||0);f>(t.style[l]||0)&&(t.style[l]=f,t.expandAbsoluteSize=t.expandAbsoluteSize||new Set,t.expandAbsoluteSize.add(l))}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){o.e(e)}finally{o.f()}},ge=function(e){de(e),fe(e),he(e)};function ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(e){return Number(e).toString()===e},me={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},be=/^\s*#[0-9a-fA-F]{3}\s*$/,we=/^\s*#[0-9a-fA-F]{3,6}\s*$/,Oe=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,Ee=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,Se=/px$/,Te=function(e){return"number"==typeof e?e:Se.test(e)?Number(e.replace(Se,""))||0:ye(e)?parseInt(e,10):e},Ie=function(e){if("string"==typeof e&&be.test(e)){var t=e.slice(1),n=Object($.default)(t,3),r=n[0],i=n[1],o=n[2];return"#"+r+r+i+i+o+o}return e},Ae=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],a=e[o];if(["padding","margin"].includes(o)){var s,c=Array.isArray(a)?a:(null==a?"":a).toString().split(/\s+/),u=null,l=null,d=null,f=null;switch(c.length){case 0:continue;case 1:var p=Object($.default)(c,1);u=p[0];var h=Object($.default)(c,1);l=h[0];var g=Object($.default)(c,1);d=g[0];var v=Object($.default)(c,1);f=v[0];break;case 2:var _=Object($.default)(c,2);u=_[0],l=_[1];var y=Object($.default)(c,2);d=y[0],f=y[1];break;case 3:var m=Object($.default)(c,3);u=m[0],l=m[1],d=m[2],f=l;break;case 4:var b=Object($.default)(c,4);u=b[0],f=b[1],d=b[2],l=b[3];break;default:continue}Object.assign(t,(s={},Object(i.default)(s,o+"Top",Te(u)),Object(i.default)(s,o+"Left",Te(l)),Object(i.default)(s,o+"Bottom",Te(d)),Object(i.default)(s,o+"Right",Te(f)),s))}else if("border"===o){var w=(a||"").toString().split(/\s+/);switch(w.length){case 0:continue;case 1:t.borderColor=Ie(w[0]);continue;case 2:t.borderWidth=Te(w[0]),t.borderColor=Ie(w[1]);continue;case 3:t.borderWidth=Te(w[0]),t.borderColor=Ie(w[2]);continue;default:continue}}else if("background"===o&&we.test(e[o]))t.backgroundColor=Ie(e[o]);else if("background"===o&&(Oe.test(e[o])||Ee.test(e[o])))t.backgroundColor=e[o];else if("background"===o&&e[o].includes("linear-gradient"))t.backgroundColor=e[o];else if("color"===o&&"string"==typeof a&&Ee.test(a)){var O=Ee.exec(a).slice(1,5).map((function(e){return Number(e)})),E=Object($.default)(O,4),S=E[0],T=E[1],I=E[2],A=E[3],C=function(e){return e.toString(16)};t.color="#"+C(S)+C(T)+C(I),null==e.opacity&&(t.opacity=Number(A))}else if("display"===o&&"none"===e[o])t.hidden=!0;else if("rotate"===o){var k=e[o];t.rotate="string"==typeof k?Number(k.replace("deg",""))||0:k}else t[o]=Ie(Te(e[o]))}return t},Ce=function(e){var t=b(e.referComponent);if(!t)return Object.assign({},e.style||{});var n,r={},i=t.style||{},o=ve(e.classList||[]);try{for(o.s();!(n=o.n()).done;){var a=n.value;Object.assign(r,Ae(i[a])),Object.assign(r,Ae(i["."+a]))}}catch(e){o.e(e)}finally{o.f()}return i[e.name]&&Object.assign(r,Ae(i[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(r,Ae(t._manualStyle[e.name])),r},ke={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},xe=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],o=e[i];if(null!=o){var a=o.toString().trim();if((me[i]||["width","height"].includes(i))&&ke.percent.test(a)){var s=parseFloat(a.slice(0,-1))/100;t[i]=["percent",s]}else if(ye(a))t[i]=["digit",Number(a)];else if("transform"===i&&a.includes("translate")){var c=ke.translate.exec(a);c&&(t[i]=["transform",c.slice(1,3)])}else t[i]="string"==typeof o?["normal",a]:["normal",o]}}return t},Pe=r.webviewLayout},function(e,t,n){n.r(t),function(e){var n=e.WeixinArrayBuffer;delete e.WeixinArrayBuffer,t.default=n}.call(this,n(74))},function(e,t,n){n.r(t),n.d(t,"getCloudFileUrl",(function(){return s})),n.d(t,"getCloudFileInfo",(function(){return u}));var r,i,o=n(26),a=(r="getCloudFileUrl",i="qbase_commapi",Object(o.default)(r,i,{},{},(function(e){var t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:+new Date+"_"+Math.random()}}),(function(e){return e})));var s=function(e,t,n){u({fileIds:e,type:t,success:n})},c=new Map,u=function(e){var t=e.fileIds,n=e.type,r=e.success,i=new Map,o=[],s=!1;if(t.forEach((function(e){var t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(i.has(e)||(i.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&o.push(e)})),0!==o.length){var u=0,d=function(e,t){for(var n=[],r=Math.ceil(e.length/t),i=0;i<r;i++)n.push(e.slice(i*t,(i+1)*t));return n}(t,50);Promise.all(d.map((function(e){return new Promise((function(t){a({data:{fileid_list:e,type:n},requestInQueue:!1,success:function(n){var r=JSON.parse(n.rawData);if(r.baseresponse&&0===r.baseresponse.errcode?r.download_list.forEach((function(e){i.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):r.baseresponse?e.forEach((function(e){i.set(e,{download_url:e,service_errcode:r.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+r.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((function(e){i.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time){var o=r.baseresponse.stat.qbase_cost_time;o>u&&(u=o)}t()},fail:function(){t()},complete:function(e){}})}))}))).then((function(){l(t,i,u,r)})).catch((function(e){"function"==typeof r&&r({data:t.map((function(t){return{url:t,service_errcode:-1,errmsg:e+""}}))})}))}else s?l(t,i,0,r):"function"==typeof r&&r({data:t.map((function(e){return{url:e}}))})};function l(e,t,n,r){var i=[];e.forEach((function(e){if(/^(cloud):\/\//.test(e)){var n=t.get(e);n?0===n.service_errcode?i.push({url:n.download_url}):i.push({url:e,code:n.service_errcode,msg:n.errmsg}):i.push({url:e,code:-1,msg:"NO_RESULT"})}else i.push({url:e})})),"function"==typeof r&&r({data:i,cost:n})}},function(e,t,n){n.r(t),n.d(t,"userShareMenuState",(function(){return r}));var r={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1}},function(e,t,n){n.r(t),n.d(t,"getShareImageMap",(function(){return d})),n.d(t,"checkCanUseCustomImageUrl",(function(){return f})),n.d(t,"generateUrlWithSize",(function(){return p})),n.d(t,"getLocalImageInfo",(function(){return h})),n.d(t,"uploadLocalImage",(function(){return g})),n.d(t,"checkImageFileSizeAvailable",(function(){return v}));var r=n(1),i=n(26),o=n(11),a=n(130),s=n(0),c=n(176),u=!0,l={};r.default.onReady((function(){Object(o.checkAPIAvailable)("shareCustomImageUrl")||(Object(i.default)("getShareConfig","webapi_getshareconf")({success:function(e){Array.isArray(e.share_link_list)&&(l=e.share_link_list.reduce((function(e,t){return e[t.id]=t.url,e}),{}))},fail:function(e){}}),u=!1)}));var d=function(){return l},f=function(){return u},p=function(e,t,n){return e+"?size="+t+"x"+n},h=function(e){return new Promise((function(t,n){Object(s.invokeMethod)("getImageInfo",{src:e,success:t,fail:n})}))};function g(e){return Object(a.uploadFile)({filePath:e,fileType:20301,appType:215})}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1048576;return new Promise((function(n,r){Object(c.getFileInfo)({filePath:e,success:function(e){e.size<=t?n(e):r(e)},fail:r})}))}},function(e,t,n){n.r(t),n.d(t,"onAppEnterBackground",(function(){return s}));var r=n(0),i=n(34),o=n(21),a=Object(o.getEventManager)("AppEnterBackground"),s=a.internalOnMethod;Object(i.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.emit(e),Object(r.publish)("onAppEnterBackground",e)}))},function(e,t,n){n.r(t),n.d(t,"onShow",(function(){return g})),n.d(t,"offShow",(function(){return v})),n.d(t,"_onShow",(function(){return _})),n.d(t,"_offShow",(function(){return y})),n.d(t,"emitGameOnshow",(function(){return w})),n.d(t,"_onBaseFrameShow",(function(){return m})),n.d(t,"_offBaseFrameShow",(function(){return b}));var r=n(17),i=n(71),o=n(21),a=n(1),s=n(77),c=n(2),u=n(34),l=n(144),d=n(47),f=n(10),p=Object(o.getEventManager)("Show"),h=Object(o.getEventManager)("BaseFrameShow"),g=p.onMethod,v=p.offMethod,_=p.internalOnMethod,y=p.internalOffMethod,m=h.internalOnMethod,b=h.internalOffMethod;function w(e,t){e=e||Object(i.getLaunchOptionsSync)(),t=t||Object(i._getLaunchOptionsSync)(),Reporter.__query__=e.query,l.default.query=e.query,p.emitInternal(t),p.emitGlobal(e)}function O(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),h.emitInternal(e)}function E(e){var t=e.split("?")[1],n={};if(t)try{n=t.split("&").reduce((function(e,t){var n=t.split("="),r=n[0],i=n.slice(1).join("=");return e[r]=i,e}),{})}catch(e){n={}}return n}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path;c.IS_ANDROID&&Object(f.isObject)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=E(t));var n=Object(i.formatLaunchInfo)(e),o=n.publicLaunchInfo,a=n.appLaunchInfo,u=a.shareInfo;O(a),setTimeout((function(){Object(d.isAtFunctionalPage)()||w(o,a),"object"===Object(r.default)(u)&&null!==u&&Object(s.showUpdatableMessageSubscribeButton)(u.shareKey)}),0)})),a.default.onReady((function(){var e=Object(i.getLaunchOptionsSync)(),t=Object(i._getLaunchOptionsSync)();Reporter.__query__=e.query,l.default.query=e.query,c.IS_DEVTOOLS||(O(t),setTimeout((function(){Object(d.isAtFunctionalPage)()||w(e,t)}),0))}))},function(e,t,n){n.r(t),n.d(t,"Element",(function(){return v}));var r=n(4),i=n(5),o=n(30),a=n(25),s=n(89),c=n(14),u=n(1),l=n(34),d=new o.default({maxListeners:2e5}),f=32768,p="portrait",h="";u.default.onReady((function(){p=u.default.deviceOrientation||p,h=Object(a.getStableSystemInfo)().model||""}));var g=function(e,t){return-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?"element-"+t+"-"+e:-1!==["layout"].indexOf(e)?e:void 0},v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.parentId,o=void 0===i?0:i,a=n.id,l=void 0===a?f++:a,d=n.style,g=void 0===d?{}:d,v=n.props,_=void 0===v?{}:v,y=n.name,m=void 0===y?"":y;Object(r.default)(this,e);var b=u.default.platform;this.parentId=o,this.dest=0,this.id=l,this.name=m,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((function(e){t.on("ready",e)})),g=Object.assign(Object(s.getDefaultStyle)(),g),Object.assign(g,g[p]);var w=/iphone x/.test(h.toLowerCase())?"iphone x":b;Object.assign(g,g[w]),Object.assign(g,g[w+"-"+p]),this.style={},this.computedStyle=Object.assign({},g),this.lastComputedStyle=Object.assign({},g),this.layoutBox=null,Object.keys(g).forEach((function(e){Object.defineProperty(t.style,e,{configurable:!0,enumerable:!0,get:function(){return g[e]},set:function(n){if(n!==g[e]&&void 0!==n){if(g[e]=n,t.computedStyle[e]=n,t.lastComputedStyle[e]=n,-1!==s.scalableStyles.indexOf(e)&&t.style.scale){var r=n*t.style.scale;t.computedStyle[e]=r,t.lastComputedStyle[e]=r}"scale"===e&&s.scalableStyles.forEach((function(e){g[e]&&(t.computedStyle[e]=g[e]*n,t.lastComputedStyle[e]=g[e]*n)})),t.shouldUpdate=!0,"hidden"===e&&(n?(Object(c.log)(t.id,t.name,"隐藏, 保存宽高",t.computedStyle.width,t.computedStyle.height),s.layoutAffectedStyles.forEach((function(e){t.computedStyle[e]=0}))):(Object(c.log)(t.id,t.name,"显示, 设置回来",t.lastComputedStyle.width,t.lastComputedStyle.height),s.layoutAffectedStyles.forEach((function(e){t.computedStyle[e]=t.lastComputedStyle[e]})))),t.requestLayout()}}})})),s.scalableStyles.forEach((function(e){if(t.style[e]&&t.style.scale){var n=t.style[e]*t.style.scale;t.computedStyle[e]=n,t.lastComputedStyle[e]=n}})),g.hidden&&s.layoutAffectedStyles.forEach((function(e){t.computedStyle[e]=0})),Object.keys(_).forEach((function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return _[e]},set:function(n){n!==_[e]&&(_[e]=n,t.shouldUpdate=!0,t.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){t.on(e,(function(n){if(t.bubbleEvent&&t.parent){var r=0,i=0;try{r=t.layoutBox.left,i=t.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){var o=Object.assign({},n);o.x+=r,o.y+=i,t.parent.emit(e,o)}else{var a=n.map((function(e){return{x:e.x+r,y:e.y+i}}));t.parent.emit(e,a)}}}))}))}return Object(i.default)(e,[{key:"getChildren",value:function(){var e=this;return Object.keys(this.children).map((function(t){var n=e.children[t];return n.dest=e.dest,{id:n.id,name:n.name,style:n.computedStyle,children:n.getChildren()}}))}},{key:"getAbsolutePosition",value:function(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};var t=this.getAbsolutePosition(e.parent),n=t.left,r=t.top;return{left:n+e.layoutBox.left,top:r+e.layoutBox.top}}},{key:"add",value:function(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}},{key:"remove",value:function(e){var t=this;e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((function(e){t.children[e].remove(),delete t.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}},{key:"emit",value:function(e,t){d.emit(g(e,this.id),t)}},{key:"on",value:function(e,t){d.on(g(e,this.id),t)}},{key:"once",value:function(e,t){d.once(g(e,this.id),t)}},{key:"off",value:function(e,t){d.off(g(e,this.id),t)}},{key:"nextLayout",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextLayout(e)}));setTimeout(e,250)}},{key:"nextUpdate",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextUpdate(e)}));this.once("update-done",e)}},{key:"ready",value:function(){var e=this,t=Object.keys(this.children).map((function(t){return e.children[t].ready()}));return Promise.all(t.concat(this.readyResult))}},{key:"requestLayout",value:function(){this.emit("layout")}},{key:"forceUpdate",value:function(){var e=this,t=this.isInserted?this.update():this.insert(),n=Object.keys(this.children).map((function(t){return e.children[t].forceUpdate()}));return t.then((function(){return Promise.all(n)}))}},{key:"insert",value:function(){return Promise.resolve()}},{key:"update",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){var e=this;["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((function(t){var n=g(t,e.id);d.removeAllListeners(n)}))}}]),e}(),_=function(e){var t=JSON.parse(e.data).id;d.emit(g("click",t))};Object(l.onNativeEvent)("onTextViewClick",_),Object(l.onNativeEvent)("onImageViewClick",_),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((function(e){var t=e.replace(/^on/,"").toLowerCase();Object(l.onNativeEvent)(e,(function(e){try{var n=JSON.parse(e.data).id;d.emit(g(t,n),e.touch||e.touches)}catch(e){}}))}))},function(e,t,n){n.r(t),n.d(t,"onPageReload",(function(){return s})),n.d(t,"triggerBeforeUnloadPage",(function(){return c})),n.d(t,"onBeforeUnloadPage",(function(){return u})),n.d(t,"triggerBeforeShareAppMessage",(function(){return l})),n.d(t,"onBeforeShareAppMessage",(function(){return d}));var r=n(30),i=n(0),o=n(6),a=new r.default;Object(i.onMethod)("onPageReload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.webviewId=t,a.emit("onPageReload",e)}));var s=function(e){a.on("onPageReload",(function(t){t.path&&(t.path=Object(o.removeHtmlSuffixFromUrl)(t.path)),"function"==typeof e&&e(t)}))},c=function(e){a.emit("onBeforeUnloadPage_"+e,e),a.removeAllListeners("onBeforeShareAppMessage_"+e)},u=function(e,t){a.once("onBeforeUnloadPage_"+e,(function(e){"function"==typeof t&&t(e)}))},l=function(e){a.emit("onBeforeShareAppMessage_"+e,e)},d=function(e,t){a.on("onBeforeShareAppMessage_"+e,(function(e){"function"==typeof t&&t(e)}))}},function(e,t,n){n.r(t),function(e){n.d(t,"SkiaImageProxy",(function(){return s})),n.d(t,"decorateContextForImageProxy",(function(){return d}));var r=n(4),i=n(5),o=n(197),a=n(2),s=function(){function e(t){Object(r.default)(this,e),Object.defineProperty(this,"_ptr",{value:t,writable:!1,configurable:!1,enumerable:!1})}return Object(i.default)(e,[{key:"src",get:function(){return this._ptr.src},set:function(e){var t=this;/^(http|https):\/\//.test(e)&&(e=encodeURI(e));var n=function(e){return function(){setTimeout((function(){e()}),0)}};this._ptr.onload=n((function(){"function"==typeof t.__onload&&t.__onload.apply(t)})),this._ptr.onerror=n((function(){"function"==typeof t.__onerror&&t.__onerror.apply(t)})),this._ptr.src=e}},{key:"referrerPolicy",get:function(){return this._ptr.referrerPolicy},set:function(e){"string"==typeof e&&(this._ptr.referrerPolicy=e)}},{key:"onload",get:function(){return this._ptr.onload},set:function(e){Object.defineProperty(this,"__onload",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"onerror",get:function(){return this.__onload},set:function(e){Object.defineProperty(this,"__onerror",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"complete",get:function(){return this._ptr.complete}},{key:"width",get:function(){return this._ptr.width}},{key:"height",get:function(){return this._ptr.height}}]),e}(),c=new WeakMap,u=e.SkiaCanvasExternalTexture;function l(e,t){return a.IS_DEVTOOLS?Object(o.getVideoElementByContext)(e):new u(t,e._videoId,"video")}function d(e,t){if(!e)return e;var n=e.drawImage.bind(e),r=e.createPattern.bind(e);return e.drawImage=function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];if(e instanceof s)return n.apply(void 0,[e._ptr].concat(i));if(e instanceof o.VideoContext){var u=e,d=u._videoId;if("number"!=typeof d)throw new Error("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided video context is invalid, make sure that comes from 'createSelectQuery.context'.");var f=c.get(u)||{};f[t]?e=f[t]:(e=l(u,t),f[t]=e,c.set(u,f))}return n.apply(void 0,[e].concat(i))},e.createPattern=function(e,t){return r(e instanceof s?e._ptr:e,t)},e}delete e.SkiaCanvasExternalTexture}.call(this,n(74))},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return d})),n.d(t,"_getLaunchOptionsSync",(function(){return f})),n.d(t,"formatLaunchInfo",(function(){return p}));var r,i,o=n(17),a=n(41),s=n(1),c=n(27),u=n(150),l=a.share.ShareInfoStorage;s.default.onReady((function(){var e=p(s.default.appLaunchInfo||{});r=e.appLaunchInfo,i=e.publicLaunchInfo}));var d=function(){return i},f=function(){return r};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareInfo,n=e.scene,r=e.query||{};"object"===Object(o.default)(t)&&null!==t&&(e.shareTicket=l.set(t.shareKey,t.shareName),l.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(r=e.query={}),!1===e.reLaunch&&(r={}),Object(u.getLastOnHideMode)(),void 0===e.reLaunch&&"hide"===Object(u.getLastOnHideMode)()&&(r={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!Object(c.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008);var i={scene:n,query:r,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return s.default.debugLaunchInfo&&s.default.debugLaunchInfo.lanDebugInfo&&(i.lanDebugInfo=s.default.debugLaunchInfo.lanDebugInfo),{publicLaunchInfo:i,appLaunchInfo:e}}},function(e,t,n){n.r(t),n.d(t,"_getEnterOptionsSync",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l}));var r=n(1),i=n(11),o=n(67),a=n(71),s={},c=null;function u(){return s}function l(){return c||Object(a.getLaunchOptionsSync)()}r.default.onReady((function(){s=r.default.appLaunchInfo,Object(i.isGame)()&&(Object(o._onBaseFrameShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);s.referrerInfo=Object.assign({},s.referrerInfo,t.referrerInfo),delete t.referrerInfo,s=Object.assign({},s,t)})),Object(o.onShow)((function(e){c=e})))}))},function(e,t,n){n.r(t),n.d(t,"deviceInfo",(function(){return c})),n.d(t,"deviceReady",(function(){return u}));var r=n(1),i=n(11),o=n(28),a=n(25),s=!1,c={},u=function(){return s?Promise.resolve(c):new Promise((function(e){r.default.onReady((function(){s=!0,c.deviceOrientation=Object(o.getInitDeviceOrientation)();var t=Object(a.getInitScreenSize)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=Object(i.isGame)(),e(c)}))}))}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"onAppEnterForeground",(function(){return h}));var r=n(0),i=n(80),o=n(110),a=n(94),s=n(91),c=n(21),u=n(34),l=n(11),d=n(12),f=n(1);f.default.onReady((function(){d.default.scene=f.default.appLaunchInfo.scene}));var p=Object(c.getEventManager)("AppEnterForeground"),h=p.internalOnMethod;function g(e){if(!Object(l.isGame)()){e=Object(a.filterInfo)(e,!1),Object(s.setInnerEnterOptions)(e);var t=Object(a.filterPublicInfo)(e);e.__public=Object(a.isolateInfo)(t,""),Object(s.setEnterOptions)(t),p.emit(e),d.default.scene=e.scene}}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!Object(o.checkNeedAppEnterForegroundPatch)()||1!==e.reLaunch&&!0!==e.reLaunch?g(e):i.default.emitter.once("onAppRoute",(function(){g(e)})),Object(r.publish)("onAppEnterForeground",e)}))},function(e,t,n){var r=n(212)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(o(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=i();if(!t)return e;e.attributes[t.name]=t.value}return o(/\?>\s*/),e}}function n(){r("tag %j",e);var t=o(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var l=i();if(!l)return u;u.attributes[l.name]=l.value}if(o(/^\s*\/>\s*/))return u;for(o(/\??>\s*/),u.content=function(){r("content %j",e);var t=o(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return o(/^<\/[\w-:.]+>\s*/),u}}function i(){r("attribute %j",e);var t,n=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function o(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t),n.d(t,"_shareAppMessage",(function(){return B})),n.d(t,"_beforeShareAppMessageSuccessFactory",(function(){return L})),n.d(t,"_doShareAppMessage",(function(){return F})),n.d(t,"shareAppMessage",(function(){return U})),n.d(t,"onShareMessageToFriend",(function(){return W})),n.d(t,"showUpdatableMessageSubscribeButton",(function(){return M})),n.d(t,"getMessageExtraData",(function(){return j})),n.d(t,"shareVideoAppMessage",(function(){return V}));var r=n(20),i=n(30),o=n(0),a=n(41),s=n(40),c=n(188),u=n(11),l=n(100),d=n(2),f=n(1),p=n(23),h=n(129),g=n(36),v=n(17),_={};function y(e){var t=e.result,n=e.shareType,r=e.canUseCustomImageUrl,i=e.imageUrlId,o=void 0===i?"":i,a=e.transformedImageUrl,s=void 0===a?"":a,c=_.query,u=[],l=f.default.accountInfo&&f.default.accountInfo.nickname||"";if(c&&"object"===Object(v.default)(c))for(var d in c)u.push(encodeURIComponent(d)+"="+encodeURIComponent(c[d]));var p=[_.scene,_.scene_note,_.sessionid,"",l,Reporter.getAppType(),t,0,u.join("&"),n,r?1:2,o,s,f.default.host?f.default.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:p}),Reporter.submit()}var m=n(49),b=n(27),w=n(63),O=n(72),E=n(130),S=n(47),T=n(44),I=n(107),A=n(65),C=n(166);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=new i.default,D=null,R=null,j=function(){return R};f.default.onReady((function(){Object(u.isGame)()&&n(67)._onShow((function(e){if(R={},e.referrerInfo&&e.referrerInfo.messageExtraData){var t=R=e.referrerInfo.messageExtraData,n=t.userInfo,r=t.shareType;if(r&&n){var i=[Reporter.getAppType(),r,n.openID,e.path||"",Object(g._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:i})}}}))}));var N=a.share.ShareInfoStorage,M=function(e){Object(o.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:e})},L=function(e){return function(t,n){var r=t.shareInfos;if(delete t.shareInfos,void 0!==r&&r.length>0)if(r=r.filter((function(e){return e.shareKey&&e.shareName})),t.shareTickets=r.map((function(e){return M(e.shareKey),N.set(e.shareKey,e.shareName)})),d.IS_DEVTOOLS)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(r.map((function(e){return new Promise((function(t){var n=e.shareKey;Object(c.gameGetGroupMsgTicket)({shareKey:n,success:function(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail:function(){t({groupMsgTicket:""})}})}))}))).then((function(e){return t.groupMsgInfos=e,n()})).catch((function(){}));n()}else n()}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=Object(A.checkCanUseCustomImageUrl)(),a=Object(A.getShareImageMap)(),c="string"==typeof e.path?e.path:"",f="string"==typeof e.query?e.query:"",h="",g=0;switch(t){case"shareAppMessage":g=1;break;case"shareAppMessageDirectly":g=2;break;case"shareAppMessageToSpecificContactDirectly":g=3}if(f.length>2e3&&(console.warn('shareAppMessage: query exceed max length limit 2000: "'+f.length+'"'),f=f.substr(0,2e3)),f&&(c=c+"?"+f),e.imageUrl=s.FakeTempFilePathMap.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!i){if(!a[e.imageUrlId])return e.imageUrlId,Object(p.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void v(2);h=e.imageUrl=a[e.imageUrlId]}function v(t){y({result:t,shareType:g,canUseCustomImageUrl:i,imageUrlId:e.imageUrlId,transformedImageUrl:h})}Object(o.invokeMethod)(t,Object.assign(n,e,{path:c,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:g,userInfo:D},e.extra),success:function(t){Object(I.reportShareAppMessage)("shareAppMessage",t),(r||!d.IS_DEVTOOLS&&Object(u.checkAPIAvailable)("share"))&&Object(o.beforeInvokeCallback)({name:"shareAppMessage",args:e,res:t}),v(1),setTimeout((function(){Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500)},fail:function(t){var n=t.errMsg.replace("shareAppMessage:fail","");(r||!d.IS_DEVTOOLS&&Object(u.checkAPIAvailable)("share"))&&Object(o.beforeInvokeFail)("shareAppMessage",e,n),v(-1!==n.indexOf("cancel")?3:2)},cancel:function(){setTimeout((function(){Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:function(t){var n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),r=!n||"shareMessageToFriend:ok"===n;Object(b.checkPermissionSync)("shareCallback")&&3===g&&(P.emit("callback",{errMsg:n,success:r}),Object(o.beforeInvokeCallback)({name:"shareMessageToFriend",errMsg:n,success:r,args:e}))}}),{beforeSuccess:L(e),beforeAll:function(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((function(t){return"function"==typeof e[t]}))&&Object(l.reportRecycledAPI)({name:t,strategy:1}),Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_SHARE)},F=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=function(){var e=t[0].imageUrl;Object(w.getCloudFileUrl)([e],"image",(function(r){/^(cloud):\/\//.test(e)&&(e=r.data[0].url),t[0].imageUrl=e,Object(u.isGame)()?n(195).addLabelToShareArgs(t[0]).catch(wxConsole.warn).then((function(){return B.apply(void 0,t)})):B.apply(void 0,t)}))};D?i():Object(h._getIAPInfo)({success:function(e){D=e},complete:function(){return i()}})},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:e.title||f.default.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path},n=Object(O._getEnterOptionsSync)(),r=n.scene,i=n.chatroomUsername,o="shareAppMessageDirectly",a=e.toCurrentGroup;(a=1158===r?"boolean"!=typeof a||a:"boolean"==typeof a&&a)&&1158===r&&(t.chatroomUsername=i,o="shareAppMessageToSpecificContactDirectly"),F(t,o),Object(C.reportUserBehaviorBranchAnalyticsForDebug)({reportType:8,query:e.query})},W=function(e){P.on("callback",e)};function V(e){return Object(p.showLoading)({title:"请稍等"}),Object(E.uploadFile)({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((function(e){return Object(p.hideLoading)(),e})).then((function(t){var n=Object(S.generateFunctionalPagePath)({pageType:T.PAGE_TYPE.PLAY_PAGE_VIDEO,query:e.query});return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,a){var s={title:t.title,path:t.path,imageUrl:e.thumbUrl,cardSubType:Object(S.mapPageTypeToCardSubType)(n),messageExtraData:x({title:t.title,imageUrl:e.fileUrl,pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl},r)};Object(o.invokeMethod)("shareAppMessageDirectly",x(x({},s),{},{success:i,fail:a}))}))}(t,{title:e.title,path:n,imageUrl:t.thumbUrl},T.PAGE_TYPE.PLAY_PAGE_VIDEO,e)})).catch((function(e){Object(p.hideLoading)(),wxNativeConsole.error("fail",e)}))}},function(e,t,n){n.r(t),n.d(t,"SDKVersion",(function(){return r}));var r="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.r(t),n.d(t,"hasOwnProperty",(function(){return r}))},function(e,t,n){n.r(t);var r=n(30),i=n(99),o=new r.default,a={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:i.default,emitter:o};t.default=a},function(e,t,n){n.r(t),n.d(t,"_fs",(function(){return D})),n.d(t,"getOpenDataDir",(function(){return F}));var r,i=n(29),o=n(109),a=n(176),s=n(145),c=n(0),u=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"],l=n(40),d=n(1),f=n(2),p=f.IS_DEVTOOLS?"http://":"wxfile://",h=[],g=!1;f.IS_IOS?r=new RegExp("^"+p+"tmp_"):f.IS_ANDROID&&(r=new RegExp("^tmp_")),d.default.onReady((function(){f.IS_ANDROID||f.IS_IOS?Object(c.invokeMethod)("readdir",{dirPath:p,success:function(e){var t=e.files||[];h=t.filter((function(e){return r.test(e)})),g=!0}}):g=!0}));var v=function(e,t){if(/^wxfile:\/\/(tmp\/?)?$/.test(t)){var n=l.FakeTempFilePathMap.get();e.files=e.files.filter((function(e){return new RegExp("^"+t).test(e)||(e=""+t+e),-1===n.indexOf(e)})).filter((function(e){return g?-1===h.indexOf(e):!r.test(e)}))}};var _=n(146),y=n(4),m=n(5),b=function(){function e(t){var n=t.mode,r=t.size,i=t.lastAccessedTime,o=t.lastModifiedTime;Object(y.default)(this,e),this.mode=n,this.size=r,this.lastAccessedTime=i,this.lastModifiedTime=o}return Object(m.default)(e,[{key:"_checkModeProperty",value:function(e){return(61440&this.mode)===e}},{key:"isDirectory",value:function(){return this._checkModeProperty(16384)}},{key:"isFile",value:function(){return this._checkModeProperty(32768)}}]),e}(),w=function(e,t){var n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((function(t){n=n&&void 0!==e[t]})),n)e.stats=new b(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new b(e.stats[""]);else{var r=[],i=e.stats;f.IS_ANDROID&&(i=e,r.push({path:"/",stats:O(t)})),Object.keys(i).forEach((function(e){if("errMsg"!==e){var t=i[e];""===e&&(e="/"),r.push({path:e,stats:new b(t)}),delete i[e]}})),e.stats=r}},O=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("path must be a string");if(Object(c.invokeMethod)("statSync",{path:e,recursive:r,success:function(n){w(n,e),t=n.stats},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t},E=n(147),S=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"],T=n(6),I=n(10),A=n(20),C=n(62);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(A.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=n(11),D={saveFile:o.saveFile,saveFileSync:o.saveFileSync,getSavedFileList:o.getSavedFileList,getSavedFileInfo:o.getSavedFileInfo,removeSavedFile:o.removeSavedFile,getFileInfo:a.getFileInfo,readFile:s.readFile,readFileSync:s.readFileSync,writeFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("writeFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("writeFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("writeFile",e,{}))},writeFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var r;if(Object(c.invokeMethod)("writeFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},mkdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("mkdir",e,{dirPath:""})&&Object(c.invokeMethod)("mkdir",e)},mkdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");if(Object(c.invokeMethod)("mkdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},rmdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rmdir",e,{dirPath:""})&&Object(c.invokeMethod)("rmdir",e)},rmdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");if(Object(c.invokeMethod)("rmdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},readdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("readdir",e,{dirPath:""})&&Object(c.invokeMethod)("readdir",e,{beforeSuccess:function(t){v(t,e.dirPath)}})},readdirSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var t,n;if(Object(c.invokeMethod)("readdirSync",{dirPath:e,success:function(e){t=e.files},fail:function(e){n=e.errMsg}},{beforeSuccess:function(t){v(t,e)}}),n)throw new Error(n);return t},access:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("access",e,{path:""})&&Object(c.invokeMethod)("access",e)},accessSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("path must be a string");var t;if(Object(c.invokeMethod)("accessSync",{path:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},unlink:_.unlink,unlinkSync:_.unlinkSync,stat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("stat",e,{path:""})&&Object(c.invokeMethod)("stat",e,{beforeSuccess:function(t){w(t,e.path)}})},statSync:O,unzip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("unzip",e,{zipFilePath:""})&&Object(c.invokeMethod)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:E.copyFile,copyFileSync:E.copyFileSync,rename:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rename",e,{oldPath:"",newPath:""})&&Object(c.invokeMethod)("fs_rename",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");var n;if(Object(c.invokeMethod)("fs_renameSync",{oldPath:e,newPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("appendFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("appendFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("fs_appendFile",e,{}))},appendFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var r;if(Object(c.invokeMethod)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);Object(c.beforeInvoke)("open",e,{filePath:""})&&(void 0===e.flag||S.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),Object(c.invokeMethod)("open",t)):Object(c.beforeInvokeFail)("open",e,'invalid flag "'+e.flag+'"'))},openSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.filePath,i=n.flag;if(!r||"string"!=typeof r)throw new TypeError("filePath must be a string");if(void 0!==i&&!S.includes(i))throw new T.ThirdScriptError("invalid flag: "+i);if(void 0===i&&(i="r"),Object(c.invokeMethod)("openSync",{filePath:r,flag:i,fail:function(e){t=e.errMsg},success:function(t){e=t.fd}}),t)throw new Error(t);return e},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("close",e,{fd:""})&&Object(c.invokeMethod)("close",e)},closeSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd;if(!n||"string"!=typeof n)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("closeSync",{fd:n,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},fstat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("fstat",e,{fd:""})&&Object(c.invokeMethod)("fstat",e,{beforeSuccess:function(e){var t=e.mode,n=e.size,r=e.lastAccessedTime,i=e.lastModifiedTime;r>1617e9&&(r=Math.floor(r/1e3)),i>1617e9&&(i=Math.floor(i/1e3)),e.stats=new b({mode:t,size:n,lastAccessedTime:r,lastModifiedTime:i}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("fstatSync",{fd:r,fail:function(e){t=e.errMsg},success:function(t){var n=t.mode,r=t.size,i=t.lastAccessedTime,o=t.lastModifiedTime;i>1617e9&&(i=Math.floor(i/1e3)),o>1617e9&&(o=Math.floor(o/1e3)),e=new b({mode:n,size:r,lastAccessedTime:i,lastModifiedTime:o})}}),t)throw new Error(t);return e},write:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if(Object(c.beforeInvoke)("write",t,{fd:""}))if(t.encoding&&-1===u.indexOf(t.encoding))Object(c.beforeInvokeFail)("write",t,'invalid encoding "'+t.encoding+'"');else{if(Object(I.isArrayBuffer)(t.data)){if(t.data.byteLength>10485760)return void Object(c.beforeInvokeFail)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!Object(I.isString)(t.data))return void Object(c.beforeInvokeFail)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),Object(c.invokeMethod)("write",t)}},writeSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd,i=n.data,o=n.offset,a=n.length,s=n.encoding,l=n.position;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if(s&&-1===u.indexOf(s))throw new T.ThirdScriptError('invalid encoding "'+s+'"');if(Object(I.isArrayBuffer)(i)){if(i.byteLength>10485760)throw new T.ThirdScriptError("ArrayBuffer exceed size limit (10M)");("number"!=typeof o||o<0)&&(o=0),("number"!=typeof a||a<0)&&(a=i.byteLength-o)}else if(!Object(I.isString)(i))throw new TypeError("data must be a string or ArrayBuffer");if("number"!=typeof l&&(l=void 0),Object(c.invokeMethod)("writeSync",{fd:r,data:i,offset:o,length:a,encoding:s,position:l,fail:function(t){e=t.errMsg},success:function(e){t={bytesWritten:e.bytesWritten}}}),e)throw new Error(e);return t},read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.beforeInvoke)("read",e,{fd:""}))if(Object(I.isArrayBuffer)(e.arrayBuffer)){var t=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(t.arrayBufferId=C.default.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),Object(I.isNumber)(t.position)&&t.position<0?t.position=0:Object(I.isUndefined)(t.position)||Object(I.isNull)(t.position)?t.position=null:Object(I.isNumber)(t.position)||(t.position=0);var n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;var r=Number(t.offset);Number.isNaN(r)?t.offset=0:t.offset=r,Object(c.invokeMethod)("read",t,{beforeSuccess:function(t){t.arrayBuffer=e.arrayBuffer},afterAll:function(){f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(t.arrayBufferId)}})}else Object(c.beforeInvokeFail)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer")},readSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fd,n=e.arrayBuffer;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!Object(I.isArrayBuffer)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");var r=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(r.arrayBufferId=C.default.trace(r.arrayBuffer,"rw"),delete r.arrayBuffer),Object(I.isNumber)(r.position)&&r.position<0?r.position=0:Object(I.isUndefined)(r.position)||Object(I.isNull)(r.position)?r.position=null:Object(I.isNumber)(r.position)||(r.position=0);var i=Number(r.length);Number.isNaN(i)?r.length=0:r.length=i;var o,a,s=Number(r.offset);if(Number.isNaN(s)?r.offset=0:r.offset=s,Object(c.invokeMethod)("readSync",x(x({},r),{},{fail:function(e){a=e.errMsg},success:function(e){o={bytesRead:e.bytesRead,arrayBuffer:n}}})),f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(r.arrayBufferId),a)throw new Error(a);return o},truncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("truncate",e,{}))},truncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filePath,r=t.length;if(!n||"string"!=typeof n)throw new Error("filePath must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),Object(c.invokeMethod)("truncateSync",{filePath:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},ftruncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("ftruncate",e))},ftruncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd,r=t.length;if(!n||"string"!=typeof n)throw new Error("fd must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),Object(c.invokeMethod)("ftruncateSync",{fd:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}},R="",j="";d.default.onReady((function(){try{R=d.default.env.USER_DATA_PATH,j=d.default.env.OPEN_DATA_PATH,delete d.default.env.OPEN_DATA_PATH}catch(e){}}));var N={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},M=function(e){"string"==typeof e&&e.startsWith(R+"/__plugins__")&&Reporter.reportKeyValue({key:"Error",value:[1,"FrameworkError","Warning: MiniProgram is using reserved plugin path",e,__libVersionInfo__.version,0,"","",__libVersionInfo__.updateTime,"",0,"",0].map(encodeURIComponent).join(",")})},L=function(e,t){return"string"!=typeof e||!e.startsWith("wxfile://ad")&&((!Object(P.isSinglePageMode)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?R:j))},B=function(e){var t={};return Object.keys(D).forEach((function(n){var r=D[n];t[n]=function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];if(!N[n])return r.apply(void 0,Object(i.default)(o));N[n].forEach((function(e){var t=n.endsWith("Sync")?o:o[0];M(t[e])}));var s=N[n].every((function(t){var r=n.endsWith("Sync")?o:o[0];return L(r[t],e)}));if(s)return r.apply(void 0,Object(i.default)(o));if(n.endsWith("Sync"))throw new Error(n+":fail permission denied");o=o[0]||{},Object(c.beforeInvokeFail)(n,o,"permission denied")}})),t};t.default={app:B("app"),game:B("game"),opendata:B("opendata")};function F(){return j}},function(e,t,n){n.r(t),n.d(t,"getPluginId",(function(){return a})),n.d(t,"getPluginVersion",(function(){return s})),n.d(t,"getPluginInfo",(function(){return c})),n.d(t,"getPluginInfoForWebview",(function(){return u})),n.d(t,"checkDomains",(function(){return l})),n.d(t,"parsePluginInfo",(function(){return d})),n.d(t,"replaceErrMsgApiName",(function(){return f}));var r=n(196),i={emitter:new(n(30).default),puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}},o=function(e){for(var t in i.puidToPluginWX)if(i.puidToPluginWX[t]===e)return t},a=function(e){return i.pluginIDs[o(e)]},s=function(e){return i.pluginVersions[o(e)]},c=function(e){var t=a(e);if(void 0!==t)return i.pluginInfos[t]},u=function(e){e.success(i.pluginInfos[e.pluginId])},l=function(e,t){if(void 0===t||void 0===e)return!1;for(var n=Object(r.parse)(e||""),i=0;i<t.length;i++){var o=t[i]||"",a=Object(r.parse)(o);if(a.protocol===n.protocol&&a.hostname===n.hostname&&a.port===n.port)return!0}return!1},d=function(e){return null==e?{}:{id:e.plugin_id,hostSign:{noncestr:e.noncestr||"",timestamp:e.timestamp||"",signature:e.host_sign||""},domains:{request:e.request_domain||[],uploadFile:e.upload_domain||[],downloadFile:e.download_domain||[]}}},f=function(e,t,n){var r=new RegExp("^"+t+":"),i={};return["success","fail","complete"].forEach((function(t){"function"==typeof e[t]&&(i[t]=function(i){i.errMsg=i.errMsg.replace(r,n+":"),e[t](i)})})),Object.assign({},e,i)}},function(e,t,n){n.r(t),n.d(t,"decycleAndToJSONable",(function(){return s})),n.d(t,"transformLogArgs",(function(){return c})),n.d(t,"LOG_LEVEL",(function(){return u})),n.d(t,"LOG_LEVEL_TEXT",(function(){return l})),n.d(t,"getNativeGlobalLog",(function(){return p})),n.d(t,"getWorkerLog",(function(){return h}));var r=n(43),i=n(10);var o={String:0,NaN:"<NaN>",Infinity:function(e){return e>0?"<Infinity>":"<-Infinity>"},Number:0,Boolean:0,Null:0,Undefined:"<Undefined>",Function:function(e){return""===e.name?"<Function>":"<Function: "+e.name+">"},Date:function(e){return"<Date: "+e.toJSON()+">"},RegExp:function(e){return"<RegExp: "+e.toString()+">"},Error:function(e){return"<"+e.name+": "+e.message+">"},Symbol:function(e){return"<Symbol: "+e.toString()+">"},Promise:"<Promise>",Map:function(e){return"<Map: size="+e.size+">"},WeakMap:"<WeakMap>",Set:function(e){return"<Set: size="+e.size+">"},WeakSet:"<WeakSet>",ArrayBuffer:function(e){return"<ArrayBuffer: byteLength="+e.byteLength+">"},DataView:function(e){return"<DataView: byteLength="+e.byteLength+", byteOffset="+e.byteOffset+">"},TypedArray:function(e){return"<"+(e.constructor&&e.constructor.name?e.constructor.name:"TypedArray")+": byteLength="+e.byteLength+", length="+e.length+">"}};function a(e){var t=function(e){var t=Object(i.getDataType)(e);if("Number"===t){if(Object(i.isNaN)(e))return"NaN";if(Object(i.isInfinity)(e))return"Infinity"}else if("Object"===t){if(Object(i.isNull)(e))return"Null"}else if(t.endsWith("Array")&&"Array"!==t&&Object(i.isTypedArray)(e))return"TypedArray";return t}(e);return t in o?o[t]?Object(i.isFunction)(o[t])?[o[t](e),!0]:[o[t],!0]:[e,!0]:[null,!1]}function s(e){var t=new WeakMap,n=0;return function e(o,s){var c,u=a(o),l=Object(r.default)(u,2),d=l[0];return l[1]?d:n>3e3?"<Hidden>":t.has(o)?"<Circular: "+t.get(o)+">":(t.set(o,s),n++,Object(i.isArray)(o)?o.map((function(t,n){return e(t,s+"["+n+"]")})):(c={},Object.keys(o).forEach((function(t){c[t]=e(o[t],s+"."+t)})),c))}(e,"@")}function c(e){try{return(e=Array.prototype.slice.call(e)).map(s)}catch(e){return void console.warn("[console] This object can not be logged")}}var u={LOG:0,INFO:1,WARNING:2,ERROR:3,DEBUG:4,TIME:5,TIME_END:5},l={LOG:"log",INFO:"info",WARNING:"warn",ERROR:"error",DEBUG:"debug",TIME:"time",TIME_END:"timeEnd"},d=1048576,f=2097152;function p(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n||e===u.WARNING||e===u.ERROR)try{var r=c(t);if(void 0===r)return;var i=JSON.stringify({level:e,logs:r});return i.length>d&&!n||i.length>f&&n?JSON.stringify({level:e,logs:["<LOG_EXCEED_MAX_LENGTH>"]}):i}catch(e){return void console.warn("[console] This object can not be logged")}}function h(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n||e===l.WARNING||e===l.ERROR){var r=c(t);if(void 0!==r)return{level:e,logs:r,__log__:!0}}}},function(e,t,n){n.r(t),n.d(t,"_getABTestConfig",(function(){return o})),n.d(t,"getABTestConfig",(function(){return a}));var r=n(1),i=n(0),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i.invokeMethod)("getABTestConfig",e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};7===r.default.appType?Object(i.invokeMethod)("getABTestConfig",e):Object(i.beforeInvokeFail)("getABTestConfig",e,"permission denied",1)}},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return s})),n.d(t,"privateOpenUrl",(function(){return c}));var r=n(0),i=n(6),o=n(12),a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!0!==o.default.openUrlLock)if(t.url=t.url||"",Object(i.validateUrl)(t.url))o.default.openUrlLock=!0,Object(r.invokeMethod)(e,t,{afterAll:function(){o.default.openUrlLock=!1}});else{console.error("invalid url",t.url);var n={errMsg:e+': invalid url "'+t.url+'"'};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}}},s=a("openUrl"),c=a("private_openUrl")},function(e,t,n){n.r(t),n.d(t,"onAppRouteDone",(function(){return d})),n.d(t,"offAppRouteDone",(function(){return f}));var r=n(0),i=n(34),o=n(12),a=n(21),s=n(1),c=n(10),u=n(102),l=Object(a.getEventManager)("AppRouteDone"),d=l.internalOnMethod,f=l.internalOffMethod;function p(e,t){if(0===s.default.appType&&e&&t&&!o.default.navigationBarTitleMap[e]){var n="";s.default.page[t]&&s.default.page[t].window&&Object(c.isString)(s.default.page[t].window.navigationBarTitleText)?n=s.default.page[t].window.navigationBarTitleText:s.default.global&&s.default.global.window&&Object(c.isString)(s.default.global.window.navigationBarTitleText)&&(n=s.default.global.window.navigationBarTitleText),o.default.navigationBarTitleMap[e]=n}}Object(i.onNativeEvent)("onAppRouteDone",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.webviewAnimation.appRoute=!1,u.webviewAnimation.appRouteDone=!0,Object(u.clearDelayedInvoke)();var n="";o.default.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==o.default.lastOpenType&&(o.default.lastRoute=e.path||""),l.emit(e),Object(r.publish)("onAppRouteDone",{frameset:e.frameset},[t]),e.path,p(e.path,n)}))},function(e,t,n){n.r(t),function(e){var r,i={name:"doT",version:"1.1.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1,doNotSkipEncoded:!1},template:void 0,compile:void 0,log:!0};i.encodeHTMLSource=function(e){var t={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},n=e?/[&<>"'\/]/g:/&(?!#?\w+;)|<|>|"|'|\//g;return function(e){return e?e.toString().replace(n,(function(e){return t[e]||e})):""}},r=globalThis,e.exports?e.exports=i:"function"==typeof define&&n(219)?define((function(){return i})):r.doT=i;var o={append:{start:"'+(",end:")+'",startencode:"'+encodeHTML("},split:{start:"';out+=(",end:");out+='",startencode:"';out+=encodeHTML("}},a=/$^/;function s(e,t,n){return("string"==typeof t?t:t.toString()).replace(e.define||a,(function(t,r,i,o){return 0===r.indexOf("def.")&&(r=r.substring(4)),r in n||(":"===i?(e.defineParams&&o.replace(e.defineParams,(function(e,t,i){n[r]={arg:t,text:i}})),r in n||(n[r]=o)):new Function("def","def['"+r+"']="+o)(n)),""})).replace(e.use||a,(function(t,r){e.useParams&&(r=r.replace(e.useParams,(function(e,t,r,i){if(n[r]&&n[r].arg&&i){var o=(r+":"+i).replace(/'|\\/g,"_");return n.__exp=n.__exp||{},n.__exp[o]=n[r].text.replace(new RegExp("(^|[^\\w$])"+n[r].arg+"([^\\w$])","g"),"$1"+i+"$2"),t+"def.__exp['"+o+"']"}})));var i=new Function("def","return "+r)(n);return i?s(e,i,n):i}))}function c(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}i.template=function(e,t,n){var u,l,d=(t=t||i.templateSettings).append?o.append:o.split,f=0,p=t.use||t.define?s(t,e,n||{}):e;p=("var out='"+(t.strip?p.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):p).replace(/'|\\/g,"\\$&").replace(t.interpolate||a,(function(e,t){return d.start+c(t)+d.end})).replace(t.encode||a,(function(e,t){return u=!0,d.startencode+c(t)+d.end})).replace(t.conditional||a,(function(e,t,n){return t?n?"';}else if("+c(n)+"){out+='":"';}else{out+='":n?"';if("+c(n)+"){out+='":"';}out+='"})).replace(t.iterate||a,(function(e,t,n,r){return t?(f+=1,l=r||"i"+f,t=c(t),"';var arr"+f+"="+t+";if(arr"+f+"){var "+n+","+l+"=-1,l"+f+"=arr"+f+".length-1;while("+l+"<l"+f+"){"+n+"=arr"+f+"["+l+"+=1];out+='"):"';} } out+='"})).replace(t.evaluate||a,(function(e,t){return"';"+c(t)+"out+='"}))+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),u&&(t.selfcontained||!r||r._encodeHTML||(r._encodeHTML=i.encodeHTMLSource(t.doNotSkipEncoded)),p="var encodeHTML = typeof _encodeHTML !== 'undefined' ? _encodeHTML : ("+i.encodeHTMLSource.toString()+"("+(t.doNotSkipEncoded||"")+"));"+p);try{return new Function(t.varname,p)}catch(e){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+p),e}},i.compile=function(e,t){return i.template(e,null,t)},t.default=i}.call(this,n(218)(e))},function(e,t,n){n.r(t),n.d(t,"reportNetworkAPI",(function(){return d}));var r=n(36),i=n(0),o=n(11),a=n(144),s=0,c=[],u=function(){var e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:c,appType:Reporter.getAppType()},null,2);Object(i.invokeMethod)("reportRealtimeAction",{actionData:e}),c=[]},l=function(e){var t="";return Object.keys(e).forEach((function(n,r){try{var i=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);0!==r&&(t+="&"),t+=i}catch(e){}})),t},d=function(e,t,n,i,d,f,p){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,g=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,v=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},_="",y="";Object(o.isGame)()&&(y=l(a.default.query));var m=[e,t,n,i,d,Reporter.getAppType(),f,h,Object(r._getCurrentNetworkType)(),_,y,g,l(v)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:m}),Reporter.reportIDKey({key:e+"_"+(1===n?"ok":"fail")}),c.push([e,t,n,f||"",i,d,Object(r._getCurrentNetworkType)(),p?"1":"0",Reporter.getAppType(),h].map((function(e){var t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-s>=6e4&&(s=Date.now(),setTimeout(u,6e4))}},function(e,t,n){n.r(t),n.d(t,"getDefaultStyle",(function(){return a})),n.d(t,"scalableStyles",(function(){return i})),n.d(t,"textStyles",(function(){return r})),n.d(t,"layoutAffectedStyles",(function(){return o}));var r=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"],i=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],o=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],a=function(){return{left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0}}},function(e,t,n){n.r(t),n.d(t,"NetworkTask",(function(){return D})),n.d(t,"registerTaskType",(function(){return W}));var r=n(43),i=n(17),o=n(20),a=n(4),s=n(5),c=n(31),u=n(88),l=n(54),d=n(11),f=n(10),p=n(48);var h=n(2),g=n(177),v=n(1),_=Object(d.promisify)(p.stat),y=0,m=new WeakMap,b=new WeakMap,w=new WeakMap,O=new WeakMap,E=new WeakMap,S=new WeakMap,T=new WeakMap,I=new WeakMap,A=new WeakMap,C=new WeakMap,k={},x=new l.Emitter("Network",!0),P=wxNativeConsole.createLogger("NetworkTask"),D=function(){function e(t,n){var r=this,i=n.taskType,o=n.beforeSend,s=n.beforeSuccess,c=n.beforeFail;Object(a.default)(this,e);var u=y++;m.set(this,u),w.set(this,"waiting"),O.set(this,t),E.set(this,i),T.set(this,o),I.set(this,s),Object(f.isFunction)(c)&&A.set(this,c);var l=!1;h.IS_ANDROID&&v.default.clientVersion>=654315008&&("Download"!==i&&"Request"!==i||Object.keys(v.default.gamePlugins||v.default.plugins||{}).forEach((function(e){var t=(v.default.gamePlugins||v.default.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(l=!0)}))),C.set(this,l),this.promise=new g.WxPromise((function(e,t){r.resolve=e,r.reject=t}));var d=function(){F.call(r)?k[i].taskQueue.push({id:u,item:r}):j.call(r)};Object(f.isFunction)(t.customCheck)?t.customCheck(t,(function(e){e?R(i,t,e):d()})):d()}return Object(s.default)(e,[{key:"abort",value:function(){var e=this;if(P.info("["+E.get(this)+"]["+m.get(this)+"]abort()"),"waiting"===w.get(this)){P.info("["+E.get(this)+"]["+m.get(this)+"] waiting=true");var t=k[E.get(this)].taskQueue.findIndex((function(t){return t.id===m.get(e)}));t>-1&&(k[E.get(this)].taskQueue.splice(t,1),Object(c.beforeInvokeFail)(k[E.get(this)].functionName,O.get(this),"abort")),w.set(this,"done")}else this.promise.then((function(){var t;Object(c.invokeMethod)("operate"+E.get(e)+"Task",(t={},Object(o.default)(t,E.get(e).toLowerCase()+"TaskId",b.get(e)),Object(o.default)(t,"operationType","abort"),t))}))}},{key:"onProgressUpdate",value:function(e){var t=this;this.promise.then((function(){x.on(""+E.get(t)+b.get(t)+"progressUpdate",e)}))}},{key:"offProgressUpdate",value:function(e){var t=this;this.promise.then((function(){x.off(""+E.get(t)+b.get(t)+"progressUpdate",e)}))}},{key:"onHeadersReceived",value:function(e){var t=this;this.promise.then((function(){x.on(""+E.get(t)+b.get(t)+"headersReceived",e)}))}},{key:"offHeadersReceived",value:function(e){var t=this;this.promise.then((function(){x.off(""+E.get(t)+b.get(t)+"headersReceived",e)}))}}]),e}();function R(e,t,n){Object(c.beforeInvokeCallback)({name:k[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function j(){var e=this,t=O.get(this),n=E.get(this),r=C.get(this);w.set(this,"sending"),S.set(this,Date.now());var i=N.call(this);r?this.promise.then((function(){M.call(e)})).catch((function(e){R(n,t,e)})):i?R(n,t,i):M.call(this)}function N(){var e,t=this,n=E.get(this),r=O.get(this);k[n].currentTaskCount++;var i={data:r.data,url:r.url,header:r.header,method:r.method,timeout:Object(f.isNumber)(r.timeout)?r.timeout:0,enableHttp2:!!Object(f.isBoolean)(r.enableHttp2)&&r.enableHttp2,enableQuic:!!Object(f.isBoolean)(r.enableQuic)&&r.enableQuic,enableCache:!!Object(f.isBoolean)(r.enableCache)&&r.enableCache,enableProfile:!Object(f.isBoolean)(r.enableProfile)||r.enableProfile,__skipDomainCheck__:r.__skipDomainCheck__,success:function(e){var r=e[n.toLowerCase()+"TaskId"];b.set(t,r),k[n].taskIdMap[r]=t,t.resolve()},fail:function(i){k[n].currentTaskCount--;var o=i[n.toLowerCase()+"TaskId"];e=i.errMsg,L.call(t,{taskType:n,options:r,errMsg:e,success:!1}),t.reject(e),P.error("["+n+"][createTask][Fail] taskId="+o)},complete:function(){w.set(t,"done")}},o=C.get(this),a="create"+n+"Task"+(o?"Async":"");return Object(c.invokeMethod)(a,T.get(this)(i)),e}function M(){var e=this,t=b.get(this),n=O.get(this),r=E.get(this),i=k[r].functionName;x.on(""+r+t+"success",(function(t){I.get(e).call(e,t),Object(c.beforeInvokeCallback)({name:i,args:{success:n.success,fail:n.fail,complete:n.complete},res:t})})),x.on(""+r+t+"fail",(function(t){var r=A.get(e);r&&r.call(e,t),Object(c.beforeInvokeCallback)({name:i,args:{success:n.success,fail:n.fail,complete:n.complete},success:!1,errMsg:t.errMsg})}))}function L(e){var t=e.taskType,n=e.options,r=e.errMsg,i=e.success,o=void 0===i||i,a=e.dataLength,s=void 0===a?0:a,c=e.statusCode,l=void 0===c?"":c,d=e.responseDataLength,f=void 0===d?0:d,p=e.profile,h=void 0===p?{}:p,g=n.url,v=o?1:2,_=Date.now()-S.get(this),y=n.__skipDomainCheck__;_>=6e4&&P.error("reportTask costTime too long: "+_+"ms, taskId="+b.get(this)),Object(u.reportNetworkAPI)(k[t].functionName,g,v,_,r,l,y,s,f,h)}function B(e,t){var n,o=t.toLowerCase()+"TaskId",a=e[o],s=e.state,c=e.header;if(delete e.state,delete e[o],e.cookies=c&&(n=c["Set-Cookie"]||c["set-cookie"])?Array.isArray(n)?n:n.split(",").reduce((function(e,t){return/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e}),[]).map((function(e){return e.trim()})):[],x.emit(""+t+a+s,e),"success"===s||"fail"===s){var u=k[t].taskIdMap[a],l=O.get(u);if(!u)return;k[t].currentTaskCount-=1,k[t].taskQueue.length>0&&j.call(k[t].taskQueue.shift().item);var f=Promise.resolve(Object(d.getDataLength)(l.data));if("Upload"===t){var p=0;"object"===Object(i.default)(l.formData)&&null!==l.formData&&(p=JSON.stringify(l.formData).length),f=_({path:l.filePath}).then((function(e){return p+e.stats.size})).catch((function(){return p}))}var h=Promise.resolve(Object(d.getDataLength)(e.data));if("Download"===t){var g=e.dataLength;h="number"==typeof g?Promise.resolve(g):_({path:e.filePath||e.tempFilePath||""}).then((function(e){return e.stats.size})).catch((function(){return 0}))}Promise.all([f,h]).then((function(n){var i=Object(r.default)(n,2),o=i[0],a=i[1];L.call(u,{taskType:t,options:l,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===s,dataLength:o,responseDataLength:a,profile:e.profile})})),U.call(u)}}function F(){var e=E.get(this);return k[e].currentTaskCount>=k[e].maxTaskCount}function U(){var e=E.get(this),t=b.get(this);delete k[e].taskIdMap[t],x.removeAllListeners(""+e+t+"success"),x.removeAllListeners(""+e+t+"fail"),x.removeAllListeners(""+e+t+"complete")}function W(e,t){var n=this,r=k[e]?k[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};Object(c.onMethod)("on"+e+"TaskStateChange",(function(t){B.call(n,t,e)})),k[e]=Object.assign(r,t)}},function(e,t,n){n.r(t),n.d(t,"setEnterOptions",(function(){return c})),n.d(t,"setInnerEnterOptions",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l})),n.d(t,"getInnerEnterOptionsSync",(function(){return d}));var r=n(94),i=n(82),o=n(0),a={},s={};function c(e){a=e}function u(e){s=e}function l(){var e=Object(i.getPluginId)(this)||"";return Object(r.isolateInfo)(a,e)}function d(){return s}Object(o.subscribe)("getEnterAppInfo",(function(e,t){var n=e.callbackId;Object(o.publish)("appEnterInfoGot",{res:d(),callbackId:n},[t])}))},function(e,t,n){var r=n(215)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(o(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=i();if(!t)return e;e.attributes[t.name]=t.value}return o(/\?>\s*/),e}}function n(){r("tag %j",e);var t=o(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var l=i();if(!l)return u;u.attributes[l.name]=l.value}if(o(/^\s*\/>\s*/))return u;for(o(/\??>\s*/),u.content=function(){r("content %j",e);var t=o(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return o(/^<\/[\w-:.]+>\s*/),u}}function i(){r("attribute %j",e);var t,n=o(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function o(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t),n.d(t,"LOG_LIMIT",(function(){return r})),n.d(t,"AppStatus",(function(){return i})),n.d(t,"BackgroudAPIBlackList",(function(){return o})),n.d(t,"NotActiveAPIBlackList",(function(){return a}));var r=1024,i={FORE_GROUND:0,BACK_GROUND:1,LOCK:2},o=[],a=[]},function(e,t,n){n.r(t),n.d(t,"filterInfo",(function(){return d})),n.d(t,"filterPublicInfo",(function(){return f})),n.d(t,"isolateInfo",(function(){return p})),n.d(t,"setPrivateExtraData",(function(){return h}));var r,i=n(17),o=n(80),a=n(6),s=n(12),c=n(0),u=n(1),l=n(27);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:s.default.query)||{},e.path=t?Object(a.removeHtmlSuffixFromUrl)(e.path):Object(a.removeHtmlSuffixFromUrl)(s.default.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?s.default.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:s.default.lastShareInfo=void 0),o.default.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(o.default.appId=e.referrerInfo.appId),"object"===Object(i.default)(e.shareInfo)&&null!==e.shareInfo){var n=e.shareInfo;n.shareKey&&n.shareName&&(Object(c.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:n.shareKey}),e.shareTicket=o.default.ShareInfoStorage.set(n.shareKey,n.shareName),o.default.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;0===(e=Object.assign({},e)).scene?e.scene=r:r=e.scene;var n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!Object(l.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);var i=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(i.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;var o=Object.keys(e.referrerInfo.privateExtraData);0===o.length&&delete e.referrerInfo.privateExtraData}var a={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:i};e.chatroomUsername&&1156===n&&(a.chatroomUsername=e.chatroomUsername);var s=e.nativeExtraData||{};return s.location&&(a.locationInfo=s.location),7!==u.default.appType&&10!==u.default.appType||(e.nativeExtraData&&(a.nativeExtraData=e.nativeExtraData),a.sessionId=e.sessionid||e.sessionId,a.isLaunch=e.isLaunch,e.isLaunch&&(a.prerender=!!u.default.prerender),a.clickTimestamp=e.clickTimestamp,a.preloadType=t),e.mode&&(a.mode=e.mode),1173===n&&(s.mimeType?a.forwardMaterials=[{type:s.mimeType,path:s.materialPath,name:s.materialName,size:s.materialSize}]:Array.isArray(s.materials)&&(a.forwardMaterials=s.materials)),a}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(a.getRouteDomain)(e.path||"");if(n!==t){var r={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(r.mode=e.mode),10===u.default.appType&&(e.nativeExtraData&&(r.nativeExtraData=e.nativeExtraData),r.sessionId=e.sessionId,r.isLaunch=e.isLaunch,e.isLaunch&&(r.prerender=e.prerender),r.clickTimestamp=e.clickTimestamp,r.preloadType=e.preloadType),r}return e}function h(e){try{__appServiceEngine__.setPrivateExtraData(e.privateExtraData),e.success()}catch(t){e.fail(t)}}},function(e,t,n){var r;n.r(t),n.d(t,"CUSTOM_EVENT",(function(){return r})),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}))},function(e,t,n){n.r(t),n.d(t,"emitSplashAdFetch",(function(){return o})),n.d(t,"onEmitSplashAdFetch",(function(){return a})),n.d(t,"onShouldShowSplashAd",(function(){return s})),n.d(t,"onSplashAdShow",(function(){return c})),n.d(t,"onSplashAdHide",(function(){return u})),n.d(t,"onSplashAdClose",(function(){return l})),n.d(t,"onSplashAdWillLayout",(function(){return d})),n.d(t,"onSplashAdButtonClicked",(function(){return f}));var r=n(0),i=new(n(11).EventEmitter),o=function(){i.emit("_onEmitSplashAdFetch")},a=function(e){"function"==typeof e&&i.on("_onEmitSplashAdFetch",e)};function s(e){Object(r.onMethod)("shouldShowSplashAd",e)}function c(e){Object(r.onMethod)("onSplashAdShow",e)}function u(e){Object(r.onMethod)("onSplashAdHide",e)}function l(e){Object(r.onMethod)("onSplashAdClose",e)}function d(e){Object(r.onMethod)("onSplashAdWillLayout",e)}function f(e){Object(r.onMethod)("onSplashAdButtonClicked",e)}},function(e,t,n){n.r(t),n.d(t,"getBanRuleIndexByPath",(function(){return m})),n.d(t,"getBanRuleIndexForPage",(function(){return b})),n.d(t,"needReport",(function(){return v})),n.d(t,"banAPISet",(function(){return _})),n.d(t,"ruleList",(function(){return y})),n.d(t,"checkAPIAvailableForCurrentPage",(function(){return O})),n.d(t,"reportAPIBanForPage",(function(){return E})),n.d(t,"ReportCheckScene",(function(){return h})),n.d(t,"ReportBlockStatus",(function(){return p}));var r=n(29),i=n(1),o=n(10),a=n(12),s=n(0),c=n(24),u=n(2),l=0,d=1,f=2,p={OK:1,BLOCK:2,NO_BLOCK:3},h={NAVIGATE_TO:1,SWITCH_TAB:2,REDIRECT_TO:3,API:4,RE_LAUNCH:5},g=wxNativeConsole.createLogger("BanForPage"),v=!1,_=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),y=[];function m(e){if(!e)return-1;var t=-1;try{t=y.findIndex((function(t){return Object(o.isString)(t.path_rule)&&new RegExp(t.path_rule).test(e)}))}catch(e){g.log("[getBanRuleIndexByPath] error: "+e.message)}return g.log('[getBanRuleIndexByPath] path="'+e+'", index='+t),t}function b(e,t,n){for(var r=-1,i=0;i<y.length;i++){var a=y[i];if((!Object(o.isString)(a.path_rule)||!a.path_rule||new RegExp(a.path_rule).test(t))&&(!Object(o.isString)(a.title_rule)||!a.title_rule||new RegExp(a.title_rule).test(n))){r=i;break}}return g.log("[getBanRuleIndexForPage] banRuleIndex="+r),r}function w(e,t,n){g.log("[checkAPIAvailableForPage] APIName="+e+", path="+t+", title="+n);var r=b(0,t,n);if(-1===r)return E(e,p.OK,h.API,e),!0;var i=y[r];return g.log("[checkAPIAvailableForPage], found rule:",i),function(e,t){var n,r,i=e.ban_jsapi_list.find((function(e){return e.jsapi_name===t}));if(!i)return g.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;if(g.log("[checkAPIAvailableForPageByRule], found APIItem:",i),i.state===l)n=!1;else if(i.state===d)n=!0;else if(i.state===f&&(n=!0,1===e.is_valid)){var o=i.toast_wording||"该功能暂时无法使用";Object(s._invokeMethod)("showToast",{title:o,icon:"none"})}return r=n?e.is_valid?p.BLOCK:p.NO_BLOCK:p.OK,E(t,r,h.API,t),1!==e.is_valid||!n}(i,e)}function O(e){var t=Object.keys(a.default.query).reduce((function(e,t){return[].concat(Object(r.default)(e),[t+"="+a.default.query[t]])}),[]).join("&"),n=a.default.lastRoute+(t?"?"+t:""),i=a.default.navigationBarTitleMap[a.default.lastRoute]||"";return g.log("[checkAPIAvailableForCurrentPage] APIName="+e+", path="+n+", title="+i),w(e,n,i)}function E(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(g.log("[reportAPIBanForPage] APIName="+e+", blockType="+t+", checkScene="+n+", extraInfo="+r+", needReport="+v),v){var s=i.default.appLaunchInfo,u=Object.keys(a.default.query).map((function(e){return e+"="+a.default.query[e]})).join("&"),l={session_id:s.sessionid||s.sessionId,cur_path:a.default.lastRoute+(u?"?"+u:""),title:a.default.navigationBarTitleMap[a.default.lastRoute],check_scene:n,block_status:t,extra_info:r,launch_scene:s.scene,launch_path:s.path,target_path:o};g.log("[reportAPIBanForPage], reqData:",l),Object(c._operateWXData)({reqData:l,apiName:"webapi_reportnvgcheckinfo",complete:function(e){g.log("[reportAPIBanForPage], res.errMsg="+e.errMsg)}})}}i.default.onReady((function(){if(!u.IS_DEVTOOLS)try{var e=i.default.appContactInfo.operationInfo.jsonInfo.navigate_ban_info,t=e.do_report,n=e.navigate_ban_rule_list;y=n,v=1===t,_=new Set(n.reduce((function(e,t){return[].concat(Object(r.default)(e),Object(r.default)(t.ban_jsapi_list))}),_)),g.log("[BanForPage][init] needReport="+v),g.log("[BanForPage][init] ruleList:",y),g.log("[BanForPage][init] banAPISet:",_)}catch(e){g.error("[BanForPage][init] fail, errMsg="+e.message)}}))},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return c})),n.d(t,"openTencentGameContract",(function(){return l})),n.d(t,"openTencentPrivacyContract",(function(){return d})),n.d(t,"openTencentBoardGameContract",(function(){return f})),n.d(t,"openTencentChildrenGuideContract",(function(){return p})),n.d(t,"openTencentAccountCancelContract",(function(){return h})),n.d(t,"openGameLifeAccountInfo",(function(){return g})),n.d(t,"openGameLifeMiniGameTransfer",(function(){return v})),n.d(t,"createWebView",(function(){return s})),n.d(t,"getWebViewIdList",(function(){return o.getWebViewIdList}));var r=n(6),i=n(0),o=n(22),a=n(27),s=function(e){if(Object(a.checkPermissionSync)("createWebView"))return new o.WebView(Object.assign({},e,{__skipDomainCheck__:!1}));throw new Error("createWebView:fail no permission")},c=function(e){var t=e.url,n=e.success,r=e.fail,o=e.complete;Object(i.invokeMethod)("openUrl",{url:t,success:n,fail:r,complete:o})},u=function(e){var t=e.url,n=e.success,r=e.fail,o=e.complete;Object(i.invokeMethod)("private_openUrl",{url:t,isNativeStyle:!0,success:n,fail:r,complete:o})},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;u({url:"http://game.qq.com/contract.shtml",success:t,fail:n,complete:r})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;u({url:"https://game.qq.com/privacy_guide.shtml",success:t,fail:n,complete:r})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;u({url:"http://huanle.qq.com/cp/a20170209notice/",success:t,fail:n,complete:r})},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;u({url:"https://game.qq.com/privacy_guide_children.shtml",success:t,fail:n,complete:r})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;u({url:"https://game.qq.com/game_account_cancellation_agreement.shtml",success:t,fail:n,complete:r})},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,i=e.complete,o=e.query,a="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html";u({url:Object(r.addQueryStringToUrl)(a,o),success:t,fail:n,complete:i})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,i=e.complete,o=e.query,a="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html";u({url:Object(r.addQueryStringToUrl)(a,o),success:t,fail:n,complete:i})}},function(e,t,n){n.r(t);var r=n(6),i={},o={lastShareTicket:null,get:function(e){return i[e]},set:function(e,t){var n=Object(r.guid)();return i[n]={shareKey:e,shareName:t},n}};t.default=o},function(e,t,n){n.r(t),n.d(t,"reportRecycledAPI",(function(){return i}));var r=n(12),i=function(e){var t,n=e.name,i=e.scene,o=e.strategy,a=e.timeDiffToLastTap,s=void 0===a?0:a;"undefined"!=typeof __appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===r.default.currentWebviewId}))||{});var c=[n,i,Reporter.getAppType(),t?t.route:"",o||0,s].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:c})}},function(e,t,n){function r(e){if(!Array.isArray(e)||e.some((function(e){return"string"!=typeof e||0===e.length})))return"invalid keyList"}n.r(t),n.d(t,"checkKeyList",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"UI_JSAPI",(function(){return i})),n.d(t,"webviewAnimation",(function(){return a})),n.d(t,"clearDelayedInvoke",(function(){return s})),n.d(t,"registerDelayedInvoke",(function(){return c}));var r=n(0),i=["startPullDownRefresh"],o=[],a={appRoute:!1,appRouteDone:!1},s=function(){o.forEach((function(e){var t=e.name,n=e.args,i=e.option;Object(r.mainInvokeMethod)(t,n,i)})),o=[]},c=function(e,t,n){var i=a.appRoute,s=a.appRouteDone;!i&&s?Object(r.mainInvokeMethod)(e,t,n):o.push({name:e,args:t,option:n})}},function(e,t,n){n.r(t),n.d(t,"saveAdDataToFile",(function(){return _})),n.d(t,"saveAdMaterialData",(function(){return y})),n.d(t,"removeOutdatedData",(function(){return v})),n.d(t,"handleSplashAdFetchLog",(function(){return b})),n.d(t,"bulkSaveMaterials",(function(){return m}));var r=n(17),i=n(59),o=n(38),a=n(19),s=n(2),c=n(96),u=n(11);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=6048e5,p=0,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){o.fs.stat({path:e,recursive:!0,success:t,fail:n})}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){o.fs.unlink({filePath:e,success:t,fail:function(e){e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return Promise.resolve();var t=[];return h(e).then((function(n){var r,i=n.stats||[],o=+new Date,a=l(i);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(o-1e3*s.stats.lastAccessedTime>=f&&!["adinfos.txt","/"].includes(s.path)){var c=e+"/"+s.path;t.push(g(c))}}}catch(e){a.e(e)}finally{a.f()}return Promise.all(t)}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?Object(u.isIn3rdApp)()?Promise.resolve():s.IS_ANDROID||s.IS_IOS?new Promise((function(n,r){o.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:r})})):Promise.resolve():Promise.resolve()},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t)return new Promise((function(n,r){Object(i._downloadFileSkipCheckDomain)({url:e,filePath:t,success:n,fail:r})}))},m=function(e){return e&&0!==e.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){o.fs.readdir({dirPath:e,success:t,fail:n})}))}(a.WX_AD_PATH).then((function(t){var n=t.files;e&&e.map((function(e){var t=e.url,r=e.filePath,i=e.fileName;return n.includes(i)?Promise.resolve():y(t,r)}))})):Promise.reject({errMsg:"无数据"})},b=function(e){if(e&&"object"===Object(r.default)(e)&&!(p>0)&&(p+=1,!Object(u.isIn3rdApp)()&&(s.IS_ANDROID||s.IS_IOS)&&e&&e.widget_gray_unlimit_fetch_tag)){var t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{o.fs.stat({path:a.SPLASHAD_FETCH_LOG,success:function(e){var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&Object(c.emitSplashAdFetch)()},fail:function(e){e.errMsg&&e.errMsg.indexOf("no such file")>-1&&_({},a.SPLASHAD_FETCH_LOG)}})}catch(e){}}}},function(e,t,n){n.r(t),n.d(t,"_setWxIsInvokeInTapForNavToMiniProgram",(function(){return G})),n.d(t,"_navigateToMiniProgram",(function(){return U})),n.d(t,"_checkBeforeNavigateToMiniProgram",(function(){return F})),n.d(t,"_doNavigateToMiniProgram",(function(){return A})),n.d(t,"navigateToMiniProgram",(function(){return H})),n.d(t,"navigateToMiniProgramDirectly",(function(){return z}));var r=n(20),i=n(13),o=n.n(i),a=n(37),s=n(31),c=n(6),u=n(134),l=n(66),d=n(100),f=n(1),p=n(24),h=n(11),g=n(2),v=n(27),_=n(57),y=n(84),m=n(52),b=n(33),w=n(85),O=n(36);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T,I=Object(b.invoke2Async)(p._operateWXData),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JSON.stringify(e),JSON.stringify(t),JSON.stringify(n),_.nativeConsole.log("[_doNavigateToMiniProgram], args="+JSON.stringify(e)+", privateArgs="+JSON.stringify(t)+", ext="+JSON.stringify(n));var r=Object.assign({},e);delete r.sourcetype,delete r.preScene,delete r.preSceneNote,7!==f.default.appType&&(delete r.scene,delete r.sceneNote);var i,o=Object(u.getPassCookieString)();if(o?(r.privateExtraData=r.privateExtraData||{},r.privateExtraData.cookies=o):r.privateExtraData&&delete r.privateExtraData.cookies,i="string"==typeof r.path&&r.path.trim().length>0?Object.assign({},r,t,{path:Object(c.transWxmlToHtml)(r.path).trim()}):Object.assign({},r,t,{path:void 0}),JSON.stringify(i),_.nativeConsole.log("[_doNavigateToMiniProgram], finalArgs="+JSON.stringify(i)),i.needTransferToWeChat&&Object(h.isIn3rdApp)())return Object(s.beforeInvokeCallback)({name:"navigateToMiniProgram",args:i}),delete i.success,delete i.fail,delete i.complete,void Object(s.invokeMethod)("sdk_navigateToMiniProgram",i,n);Object(s.invokeMethod)("navigateToMiniProgram",i,n)},C=function(e,t,n,r){var i=[e,t,f.default.appType+1e3,n+1e3,r].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:i})},k=function(){return T||(T=new Promise((function(e){__sclEngine__.initScl((function(t){return e(t.mainRoot)}))}))),T},x=function(){var e=Object(a.default)(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:n=e.sent,e.t0=D,e.next=e.t0===P.HALF_SCREEN_DIALOG_WITHOUT_LOGO?6:e.t0===P.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?8:e.t0===P.HALF_SCREEN_DIALOG_WITH_SCORE?11:14;break;case 6:return r=n.append("navigateToMp",{title:t.oldWording,logo:"",name:"",type:P.HALF_SCREEN_DIALOG}),e.abrupt("break",16);case 8:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:P.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.used_friend_cnt_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 11:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:P.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.score_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 14:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:D}),e.abrupt("break",16);case 16:return i=Object(m.setNavigateBackInterception)((function(e){[m.NavigationBackTypes.BottomBackButton,m.NavigationBackTypes.NavigationBackInterceptionType,m.NavigationBackTypes.NavigateBackCall].includes(e.type)&&r.handleCancel()})),e.next=19,new Promise((function(e){r.addListener("confirm",(function(){e({confirm:!0})})),r.addListener("cancel",(function(){e({confirm:!1})}))}));case 19:return a=e.sent,Object(m.stopNavigateBackInterception)(i),e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5},D=P.DEFAULT;f.default.onReady((function(){Object(y._getABTestConfig)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:function(e){JSON.stringify(e),e&&void 0!==e.testConfig&&(D=Number(e.testConfig)||P.DEFAULT,Object.values(P).includes(D)||(D=P.DEFAULT))}})}));var R,j=function(e,t,n,r,i,o){if(1===t)return Promise.resolve();var a=D!==P.DEFAULT&&void 0!==__sclEngine__&&(g.IS_DEVTOOLS||g.IS_IOS||g.IS_ANDROID)&&i,c=a?D:P.DEFAULT;return Promise.resolve().then((function(){return a?x(S(S({},i),{},{oldWording:e,expensiveWording:o})):new Promise((function(t,n){Object(s.invokeMethod)("showModal",{title:"",content:e,confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA",success:function(e){t(e)},fail:function(e){n(e)}})}))})).then((function(e){if(!e.confirm)throw C(2,n,r,c),{errMsg:"cancel"};C(1,n,r,c)}),(function(e){throw C(3,n,r,c),e}))},N=1,M=2,L=function(){var e=Object(a.default)(o.a.mark((function e(t){var n,r,i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=D,e.next=e.t0===P.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?4:e.t0===P.HALF_SCREEN_DIALOG_WITH_SCORE?6:8;break;case 4:return n.push(M),e.abrupt("break",9);case 6:return n.push(N),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:if(n.length){e.next=11;break}return e.abrupt("return",{});case 11:return t.appId,_.nativeConsole.log("[_getNavigateWxAppDescInfo] appId="+t.appId),e.prev=13,e.next=16,I({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:t.appId,desc_type_list:n}});case 16:return r=e.sent,(i=r.respData).data,a=JSON.parse(i.data),e.abrupt("return",a);case 23:return e.prev=23,e.t1=e.catch(13),e.t1.message,e.abrupt("return",{});case 27:case"end":return e.stop()}}),e,null,[[13,23]])})));return function(t){return e.apply(this,arguments)}}(),B=(R=[],f.default.onReady((function(){Array.isArray(f.default.navigateToMiniProgramAppIdList)&&(R=f.default.navigateToMiniProgramAppIdList,Object(v.checkPermissionSync)("openWxappLimit5")&&R.splice(5))})),function(e,t){return new Promise((function(n,r){var i=Object(h.checkAPIAvailable)("navigateToMiniProgramConfig");!1===i||g.IS_DEVTOOLS?t?n():R.indexOf(e)>-1?n({sourcetype:4}):r({errMsg:'appId "'+e+'" is not in navigateToMiniProgramAppIdList'}):!0===i?n():"unknown"===i&&n({sourcetype:4})}))}),F=function(e){e.appId,_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram] appId="+e.appId);var t="_checkBeforeNavigateToMiniProgram",n=function(e){return new Promise((function(t,n){e.appId,_.nativeConsole.log("[_getNavigateWxAppInfo] appId="+e.appId),Object(p._operateWXData)({apiName:"webapi_getnavigatewxaappinfo",reqData:{target_appid:e.appId},success:function(e){var n=JSON.parse(e.respData.data),r=n.action_code,i=n.skip_local_check,o=Boolean(n.runtime_sdk_whitelist);t({actionCode:r,skipLocalCheck:i,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:o}),e.respData.data},fail:function(e){n(e),e.errMsg}})}))}(e),r=L(e);return D!==P.DEFAULT&&k(),new Promise((function(i,o){n.then((function(n){var a=n.actionCode,c=n.skipLocalCheck,u=n.reason,l=n.wording,d=n.appType,p=n.newWording,h=n.popupInfo,g=n.needTransferToWeChat;_.nativeConsole.log("[_getNavigateWxAppInfo][resolve] actionCode="+a+", skipLocalCheck="+c+", reason="+u+", wording="+l),1!==a&&2!==a?(h?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,0,1,u,"跳转跳出",Object(O._getCurrentNetworkType)()].join(",")}),Object(s.invokeMethod)("showModal",{showCancel:!0,content:h.desc,confirmText:h.confirm_wording,cancelText:h.cancel_wording,success:function(e){var t=e.confirm,n=h.confirm_url;t&&Object(w.privateOpenUrl)({url:n}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,t?1:2,2,u,"跳转跳出",Object(O._getCurrentNetworkType)()].join(",")})}})):l&&Object(s.invokeMethod)("showModal",{content:l,showCancel:!1}),Object(s.beforeInvokeFail)(t,e,u),o({errMsg:u})):B(e.appId,c).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return j(l,a,e.appId,d,p,r).then((function(){Object(s.beforeInvokeCallback)({name:t,args:e,res:{sourcetype:n.sourcetype}}),i(S(S({},n),{},{needTransferToWeChat:g}))}))})).catch((function(n){var r=n.errMsg||n.message;Object(s.beforeInvokeFail)(t,e,r),o(n)}))}),(function(n){Object(s.beforeInvokeCallback)({name:t,args:e}),i(),n.errMsg}))}))},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.beforeInvoke)("navigateToMiniProgram",e,{appId:""})&&(e.appId,_.nativeConsole.log("[_navigateToMiniProgram] appId="+e.appId),F({appId:e.appId}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};JSON.stringify(t),_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][resolve], res="+JSON.stringify(t)),A(e,{sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(function(t){var n=t.errMsg||t.message;_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][reject], errMsg="+n),Object(s.beforeInvokeFail)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})})))},W=!1,V=0;Object(s.subscribe)("tapAnyWhere",(function(e){V=e.timeStamp,W=!0})),Object(l.onAppEnterBackground)((function(){V=0,W=!1}));var G=function(){V=Date.now(),W=!0},H=function(e){var t=f.default.accountInfo.appId;0===f.default.appType&&"wx308bd2aeb83d3345"!==t&&"wxc98889eca359c1e5"!==t?W?(U(e),Object(d.reportRecycledAPI)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===V?-2:Date.now()-V})):Object(s.beforeInvokeFail)("navigateToMiniProgram",e,"can only be invoked by user TAP gesture."):U(e)},z=function(e){Object(v.checkPermissionSync)("navigateToMiniProgramDirectly")?A(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}}):Object(s.beforeInvokeFail)("navigateToMiniProgramDirectly",e,"no permission")}},function(e,t,n){n.r(t),n.d(t,"apiReport",(function(){return k})),n.d(t,"setApiVersion",(function(){return x}));var r=n(1),i=n(34),o=n(36),a=n(10);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=0,l="",d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",f="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function p(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}Object(a.isString)(d)&&(d=d.replace(" ","")),Object(a.isString)(f)&&(f=f.replace(" ","-")),r.default.onReady((function(){u=r.default.appLaunchInfo.scene,l=r.default.appLaunchInfo.sessionid||r.default.appLaunchInfo.sessionId,Object(i.onNativeEvent)("onAppEnterForeground",(function(e){e&&e.scene&&(u=e.scene),e&&(e.sessionid||e.sessionId)&&(l=e.sessionid||e.sessionId)}))}));var h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],g=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],v=new WeakSet,_=[];function y(){return 1e4*Date.now()+Math.round(9999*Math.random())}function m(e,t,n){return!(!t||"_"===t[0])&&(!h.includes(t)&&(!(n&&!g.includes(t))&&!!Object(a.isFunction)(e[t])))}function b(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Object(a.isFunction)(e)&&e.apply(void 0,n)}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.getDataType)(e);switch(n){case"Number":case"Boolean":return e;case"String":return O(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:"+w(e.message)+"|"+w(e.stack)+"]";case"Object":return t?Object.keys(e).map((function(t){return w(t)+"="+w(e[t],!1)})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"["+n+"]";default:return"["+n+"]"}}function O(e){return function(t){return Object(a.isString)(t)&&t.length>e?t.substr(0,e):t}}function E(e,t,n,i,o,a,s,c,h,g){var v=0;_.forEach((function(t){var n=t.match,r=t.version;"string"==typeof n?e===n&&(v=r):n instanceof RegExp&&n.test(e)&&(v=r)})),"connectWifi"===e&&(n="");var y=[e,t,w(n),i,o,Date.now()-o,a,s,w(c),r.default.appType+1e3,u,d,f,v,h,p(),l].map(O(1024)).join(",");g||1!==s||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-o})),Reporter.reportKeyValue({key:g?"WeAppInvoke2":"WeAppInvoke",value:y})}var S=Map,T=Math.random;function I(e,t,n,r,i){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(Object(a.isObject)(t)){var u,l=new S,d=s(Object.getOwnPropertyNames(t));try{for(d.s();!(u=d.n()).done;){var f=u.value;Object.getOwnPropertyDescriptor(t,f).get||m(t,f,c)&&l.set(f,t[f])}}catch(e){d.e(e)}finally{d.f()}var p,h=s(Object.getOwnPropertyNames(Object.getPrototypeOf(t)));try{for(h.s();!(p=h.n()).done;){var g=p.value;Object.getOwnPropertyDescriptor(t.__proto__,g).get||m(t,g,c)&&l.set(g,Object.getPrototypeOf(t)[g])}}catch(e){h.e(e)}finally{h.f()}l.forEach((function(s,u){t[u]=function(l){for(var d=""+e+u,f=arguments.length,p=new Array(f>1?f-1:0),h=1;h<f;h++)p[h-1]=arguments[h];if(T()>r){var g=s.call.apply(s,[t,l].concat(p));return n&&Object(a.isObject)(g)&&!v.has(g)&&(I(d+".",g,!1,r,i,c),v.add(g)),g}var _=Object(o._getCurrentNetworkType)(),m=Date.now(),w=y();try{var O=s.call.apply(s,[t,Object(a.isObject)(l)&&("success"in l||"fail"in l||"complete"in l)?Object.assign({},l,{success:function(e){E(d,w,l,1,m,_,1,e,i,c),b(l.success,e)},fail:function(e){E(d,w,l,0,m,_,1,e,i,c),b(l.fail,e)}}):l].concat(p));return E(d,w,l,null===O?0:1,m,_,0,O,i,c),n&&Object(a.isObject)(O)&&!v.has(O)&&(I(d+".",O,!1,r,i,c),v.add(O)),O}catch(e){throw E(d,w,l,0,m,_,0,e,i,c),e}}}))}}var A=!1;function C(e){if(e.createCanvas){var t=e.createCanvas;e.createCanvas=function(){var n=t.call(e);if(n&&n.getContext){var r=n.getContext;n.getContext=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=r.call.apply(r,[n].concat(t));if(a&&a.compressedTexImage2D){var s=a.compressedTexImage2D;a.compressedTexImage2D=function(){A||(A=!0,E("WebGLRenderingContext.compressedTexImage2D",y(),{},1,Date.now(),Object(o._getCurrentNetworkType)(),0,void 0));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.call.apply(s,[a].concat(t))}}return a}}return n}}}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;I("",e,!0,.05,t),I("",e,!0,1,t,!0),I("cloud.",e.cloud,!0,.05,t),C(e)}function x(e,t){_.push({match:e,version:t})}},function(e,t,n){n.r(t),n.d(t,"temporarilyPatchContext",(function(){return i}));var r=n(17);function i(e){if(!e)return e;var t=e.fill.bind(e),n=e.putImageData.bind(e);return e.fill=function(e){return e?t(e,e):t()},e.putImageData=function(e){if(0===e||"object"!==Object(r.default)(e))return null;for(var t=arguments.length,i=new Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return n.apply(void 0,[e].concat(i))},e}},function(e,t,n){n.r(t),n.d(t,"onWxAdUserCaptureScreen",(function(){return O})),n.d(t,"reportShareAppMessage",(function(){return E})),n.d(t,"onWeappTouchEvent",(function(){return I})),n.d(t,"offWeappTouchEvent",(function(){return A})),n.d(t,"onceWeappTouchEvent",(function(){return C}));var r=n(168),i=n(1),o=n(126),a=n(151),s=n(0),c=n(56),u=n(11),l=n(69),d=n(24),f=n(14),p=n(103),h=Object(f.promisify)(Object(d.constructOperateWXData)(!1,"advertReport")),g="",v=0,_="index.html",y=new u.EventEmitter,m="_onWxAdUserCaptureScreen",b={shareAppMessage:0,shareTimeline:3};i.default.onReady((function(){g=Object(o.getAdUxInfo)()}));var w={};try{Object(c.onAppRoute)((function(e){v=e.webviewId,w[v]||(w[v]=!0,_=e.path,Object(l.onBeforeUnloadPage)(v,(function(e){T(e)})))}))}catch(e){}Object(r._onUserCaptureScreen)((function(){var e=+new Date;g&&Object(a.reportUserCaptureScreen)({eventTimeStamp:e,scene:7,uxinfo:g,url:_}),v&&Object(s.publish)(m,{eventTimeStamp:e,path:_},[v]),y.emit(m,{eventTimeStamp:e,webviewId:v,path:_})}));var O=function(e){"function"==typeof e&&y.on("_onWxAdUserCaptureScreen",e)},E=function(e,t){if(g){var n="",r=b[e]?b[e]:0;"shareAppMessage"===e&&t.shareInfos&&(r=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===r&&"shareAppMessage"===e&&t.shareTickets&&(r=t.shareTickets.length>0?2:1),Object(a.reportLandingPageShare)({eventTimeStamp:+new Date,shareType:r,tousername:n,uxinfo:g,url:_})}},S={};Object(s.subscribe)("wxAdDelayReport",(function(e,t){S[t]||(S[t]={}),e.key&&e.value&&(S[t][e.key]=e.value)}));var T=function(e){if(S[e]){for(var t in S[e]){var n=S[e][t];h({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((function(e){}))}delete S[e]}};Object(s.subscribe)("checkWxAdFetchLog",(function(e){Object(p.handleSplashAdFetchLog)(e)})),Object(s.subscribe)("weappTouchEvent",(function(e){y.emit("_onWeappTouchEvent",e)}));var I=function(e,t){if("function"==typeof e){var n=function(n){e(n,t)};return y.on("_onWeappTouchEvent",n),n}return null},A=function(e){y.off("_onWeappTouchEvent",e)},C=function(e,t){var n=!1;if("function"==typeof e){var r=function(r){!n&&e(r,t),n=!0};return y.on("_onWeappTouchEvent",r),r}return null}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(127);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return(o=i()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&Object(r.default)(o,n.prototype),o}).apply(null,arguments)}},function(e,t,n){n.r(t),n.d(t,"saveFile",(function(){return i})),n.d(t,"saveFileSync",(function(){return o})),n.d(t,"getSavedFileList",(function(){return s})),n.d(t,"getSavedFileInfo",(function(){return c})),n.d(t,"removeSavedFile",(function(){return u})),n.d(t,"openDocument",(function(){return a}));var r=n(0),i=function(e){Object(r.beforeInvoke)("saveFile",e,{tempFilePath:""})&&Object(r.invokeMethod)("saveFile",e)},o=function(e,t){if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");var n,i;if(Object(r.invokeMethod)("saveFileSync",{tempFilePath:e,filePath:t,success:function(e){i=e.savedFilePath},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return i},a=function(e){Object(r.beforeInvoke)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,Object(r.invokeMethod)("openDocument",e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("getSavedFileList",e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("getSavedFileInfo",e,{filePath:""})&&Object(r.invokeMethod)("getSavedFileInfo",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("removeSavedFile",e,{filePath:""})&&Object(r.invokeMethod)("removeSavedFile",e)}},function(e,t,n){n.r(t),n.d(t,"checkNeedAppEnterForegroundPatch",(function(){return a})),n.d(t,"checkNeedInsertImageViewPatch",(function(){return s})),n.d(t,"checkNeedPreserveDrawingBufferPatch",(function(){return c}));var r,i=n(1),o=n(2),a=(r=!1,(o.IS_IOS||o.IS_ANDROID&&i.default.clientVersion>=637865520)&&(r=!0),function(){return r}),s=function(){var e=!1;return o.IS_IOS&&i.default.clientVersion>=385877248&&(e=!0),function(){return e}}(),c=function(){var e=!1;return o.IS_IOS&&i.default.clientVersion>=385878314&&(e=!0),function(){return e}}()},function(e,t,n){n.r(t),n.d(t,"reportAdMonitorData",(function(){return S})),n.d(t,"reportMMData",(function(){return E}));var r=n(17),i=n(189),o=n(11),a=n(24),s=n(14),c=n(25),u=n(2),l=n(28),d=n(1),f=Object(s.promisify)(Object(a.constructOperateWXData)(!1,"advert_report")),p="",h=u.PLATFORM,g="",v="",_="",y="",m="",b="",w=!0,O="";d.default.onReady((function(){p=Object(l.getInitDeviceOrientation)()||"";var e=Object(c.getStableSystemInfo)();g=e.system,v=e.version,_=e.SDKVersion,m=e.model,b=e.brand,w=Object(o.isGame)();try{O=d.default.accountInfo.appId,y=__libVersionInfo__.updateTime}catch(e){}}));var E=function(e,t){var n=Object(i.getMMDataProto)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:O,appid:O,orig_weapp_id:"",network_type:"",wechat_version:v,platform:h,system_version:g,device_orientation:p,wxapp_lib_version:_,wxapp_lib_time:y,machine_type:m,ad_platform:w?1:0},t),t=Object.assign({DeviceModel:m,DeviceBrand:b,OsName:h,OsVersion:g},t),n=n.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}})),f({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((function(e){}))},S=function(e,t,n){!function(e){var t=e.key,n=e.id;"object"===Object(r.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),Reporter.reportIDKeyDirectly({id:n||924,key:t,force:!0})}({key:e}),function(e){var t=e.key,n=e.id,i=e.extInfo,o=e.reportData;if("object"===Object(r.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),o=o||{},i&&"string"!=typeof i)try{i=JSON.stringify(i)}catch(e){i=i.toString()}E(16295,{id_key:t,id_key_group:n||924,report_time:+new Date,ad_pos_type:o.ad_pos_type||0,source_url:o.source_url||"",expand_feild:o.reportAdData||"",expand_feild2:i,aid:o.aid||0,traceid:o.traceid||"",ad_unit_id:o.ad_unit_id})}({key:e,extInfo:t,reportData:n})}},function(e,t,n){n.r(t),n.d(t,"getAccountInfoSync",(function(){return R.getAccountInfoSync})),n.d(t,"getLaunchOptionsSync",(function(){return j.getLaunchOptionsSync})),n.d(t,"_getLaunchOptionsSync",(function(){return j._getLaunchOptionsSync})),n.d(t,"onAppEnterBackground",(function(){return r.onAppEnterBackground})),n.d(t,"onAppEnterForeground",(function(){return i.onAppEnterForeground})),n.d(t,"onAppRunningStatusChange",(function(){return M})),n.d(t,"_onAppUnhang",(function(){return h})),n.d(t,"onAppUnhang",(function(){return g})),n.d(t,"onAppHide",(function(){return c})),n.d(t,"offAppHide",(function(){return u})),n.d(t,"_onAppHide",(function(){return l})),n.d(t,"emitIsloatedAppHide",(function(){return d})),n.d(t,"onAppShow",(function(){return o.onAppShow})),n.d(t,"offAppShow",(function(){return o.offAppShow})),n.d(t,"_onAppShow",(function(){return o._onAppShow})),n.d(t,"emitIsloatedAppShow",(function(){return o.emitIsloatedAppShow})),n.d(t,"onError",(function(){return F})),n.d(t,"offError",(function(){return U})),n.d(t,"onUnhandledRejection",(function(){return W})),n.d(t,"offUnhandledRejection",(function(){return V})),n.d(t,"onAppRoute",(function(){return G.onAppRoute})),n.d(t,"offAppRoute",(function(){return G.offAppRoute})),n.d(t,"onAppRouteDone",(function(){return H.onAppRouteDone})),n.d(t,"offAppRouteDone",(function(){return H.offAppRouteDone})),n.d(t,"onAppRouteResized",(function(){return K})),n.d(t,"offAppRouteResized",(function(){return J})),n.d(t,"onPageNotFound",(function(){return ee})),n.d(t,"offPageNotFound",(function(){return te})),n.d(t,"saveExitState",(function(){return oe})),n.d(t,"loadExitState",(function(){return ae})),n.d(t,"_onThemeChange",(function(){return ue})),n.d(t,"onThemeChange",(function(){return ce})),n.d(t,"offThemeChange",(function(){return le})),n.d(t,"getEnterOptionsSync",(function(){return de.getEnterOptionsSync})),n.d(t,"getInnerEnterOptionsSync",(function(){return de.getInnerEnterOptionsSync})),n.d(t,"onCopyUrl",(function(){return T})),n.d(t,"offCopyUrl",(function(){return I}));var r=n(66),i=n(75),o=n(122),a=n(21),s=Object(a.getEventManager)("AppHide"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(){s.emitGlobal()}Object(r.onAppEnterBackground)((function(e){s.emitInternal(e)}));var f=n(0),p=Object(a.getEventManager)("AppUnhang"),h=p.internalOnMethod,g=p.onMethod;Object(f.onMethod)("onAppUnhang",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.emit(e)}));var v=n(93),_=n(12);_.default.appStatus=v.AppStatus.FORE_GROUND,_.default.hanged=!1,Object(o._onAppShow)((function(e){Date.now()})),l((function(e){Date.now()})),Object(i.onAppEnterForeground)((function(){_.default.appStatus=v.AppStatus.FORE_GROUND})),Object(r.onAppEnterBackground)((function(e){"hide"===e.mode?_.default.appStatus=v.AppStatus.LOCK:_.default.appStatus=v.AppStatus.BACK_GROUND,"close"===e.mode?_.default.hanged=!1:"hang"===e.mode&&(_.default.hanged=!0)})),g((function(){_.default.hanged=!1}));var y=n(26),m=n(23),b=n(11),w=n(1),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.AppVersion",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data)}})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.VersionState",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})},S=null,T=function(e){S=e},I=function(){S=null},A=Object(b.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["release","develop","trial"],n=Object(y.default)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(function(e){return{wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)}}),(function(e){delete e.rawData,e.shortLink=e.short_link,delete e.short_link}));n(e)})),C=Object(b.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){E({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),k=function(e){return Object(m.showToast)({icon:"none",title:e})},x=new Map,P="请检查网络后重试",D=0;Object(f.onMethod)("onCopyUrl",(function(e){if(!Object(b.isGame)()&&e.webviewId!==_.default.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void k("请检查网络后重试");var t=e.shortLinkEnable||!1,n=_.default.lastRoute,r=_.default.lastOpenType,i=JSON.parse(JSON.stringify(_.default.lastRawQuery||{}));if("appLaunch"!==r&&"autoReLaunch"!==r)try{Object.keys(i).forEach((function(e){i[e]=decodeURIComponent(i[e])}))}catch(e){return void k(P)}var o=Object(b.isGame)()?t?"":"index.html":n+".html",a=Object.entries(i).map((function(e){return e.join("=")})).join("&");if(t&&"function"==typeof S)try{a=(S()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}var s=a?o+"?"+a:o;if(t){x.has(D)&&x.set(D,!1);var c=++D,u=!1;x.set(c,!0);var l=function(e){!!x.get(c)&&(k(e),e===P&&Object(f.invokeMethod)("returnCopyUrl",{url:"",shortLinkEnable:t}),x.set(c,!1))};setTimeout((function(){u=!0,l(P)}),1500);var d=w.default.page[n+".html"],p=d&&d.window||{},h=w.default.global&&w.default.global.window||{},g=p.navigationBarTitleText||h.navigationBarTitleText||"";C().then((function(e){var n=e.data;return A({appid:w.default.accountInfo.appId,envVersion:w.default.envVersion,path:s,title:Object(b.isGame)()?"":g,version:n}).then((function(e){return console.log("createWxaShortLinkAsync, ",e),!!x.get(c)&&!u&&(Object(f.invokeMethod)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success:function(){k("已复制")},fail:function(){k(P)}}),x.set(c,!1)),null})).catch((function(e){l(P),console.log("[onCopyUrl]:",e)})),null})).catch((function(e){l(P),console.log("[onCopyUrl]: ",e)}))}else Object(f.invokeMethod)("returnCopyUrl",{url:s,shortLinkEnable:t,success:function(){k("已复制")},fail:function(){k(P)}})}));var R=n(124),j=n(164),N=Object(a.getEventManager)("AppRunningStatusChange"),M=N.internalOnMethod;Object(f.onMethod)("onAppRunningStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.default.runningStatus=e.status,N.emit(e)}));var L=Object(a.getEventManager)("AppService-Error"),B=Object(a.getEventManager)("AppService-UnhandledRejection"),F=L.onMethod,U=L.offMethod,W=B.onMethod,V=B.offMethod;Reporter.registerThirdErrorListener((function(e){L.emit(e)})),Reporter.registerThirdUnhandledRejectionListener((function(e,t){B.emit({reason:e,promise:t})}));var G=n(56),H=n(86),z=n(17),Y=n(167),q=Object(a.getEventManager)("AppRouteResized"),K=q.internalOnMethod,J=q.internalOffMethod;Object(f.onMethod)("onAppRouteResized",(function(e){"object"===Object(z.default)(e)&&null!==e&&Object(Y.updateWindowSizeStatus)(e),q.emit({})}));var X=n(6),$=n(179),Z=n(57),Q=Object(a.getEventManager)("PageNotFound"),ee=Q.onMethod,te=Q.offMethod;function ne(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var i=n[r].split("=");if(i.length>1)try{t[i[0]]=decodeURIComponent(i[1])}catch(e){}}return t}var re={page:void 0,time:Date.now(),count:0};Object(f.onMethod)("onPageNotFound",(function(){Z.nativeConsole.info("Ignored onPageNotFound.")})),Object($.onAppRoutePageNotFound)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Z.nativeConsole.info("Page not found, webviewId="+t),_.default.lastRoute="",e&&"string"==typeof e.path&&e.path.endsWith(".html")&&(e.path=Object(X.removeHtmlSuffixFromUrl)(e.path)),e&&"string"==typeof e.query&&(e.query=ne(e.query)),re.page&&re.page===e.path?re.count++:re={page:e.path,time:Date.now(),count:1};var n=!0;Date.now()-re.time<=3e3&&re.count>3?(n=!1,console.error('onPageNotFound error: page "'+e.path+'" is not found.')):Q.emit(e);var r=Q.getGlobalListeners().length>0&&n;r||Reporter.thirdErrorReport({error:new Error('onPageNotFound error: page "'+e.path+'" is not found.'),extend:" at onPageNotFound"}),Object(f.invokeMethod)("pageNotFoundCallback",{hasHandler:r,webviewId:t})}));var ie=n(58),oe=function(e,t,n){var r=w.default.global&&w.default.global.window&&w.default.global.window.restartStrategy,i=w.default.page&&w.default.page[e+".html"]&&w.default.page[e+".html"].window&&w.default.page[e+".html"].window.restartStrategy,o=String(i||r||"");if(o){var a={type:o,path:t,extraData:n?n.data:void 0,expireTimeStamp:(n?n.expireTimeStamp:0)||Date.now()+864e5};w.default.accountInfo.appId,Object(ie.invokeWebviewMethod)("saveExitState",{appId:w.default.accountInfo.appId,data:a},[_.default.currentWebviewId],(function(e){}))}},ae=function(e){Object(ie.invokeWebviewMethod)("loadExitState",{appId:w.default.accountInfo.appId},[_.default.currentWebviewId],(function(t){return t&&t.expireTimeStamp>Date.now()?e(t.type,t.path,t.extraData):e()}))},se=Object(a.getEventManager)("ThemeChange"),ce=se.onMethod,ue=se.internalOnMethod,le=se.offMethod;Object(f.onMethod)("onThemeChange",(function(e){void 0!==w.default.theme&&(w.default.theme=e.theme,se.emit({theme:e.theme}))}));var de=n(91)},function(e,t,n){function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"emitter2",(function(){return u}));var r=n(16),i=n(54),o=n(40),a=n(31),s=n(10),c=new i.Emitter("touch",!0),u=new i.Emitter("touch",!0),l={};["start","move","end","cancel"].forEach((function(e){if("start"===e){r.default.EventHandler["ontouch"+e]=function(t){o.GlobalEmitter.emit("beforeTouchStart",t),o.GlobalEmitter.emit("setLastTapTime",Date.now()),Object(a.setWxInterfaceIsInvokeInTap)("tap"),c.emit(e,t),u.emit(e,t)}}else if("end"===e){r.default.EventHandler["ontouch"+e]=function(t){o.GlobalEmitter.emit("beforeTouchEnd"),c.emit(e,t),u.emit(e,t),o.GlobalEmitter.emit("afterTouchEnd")}}else r.default.EventHandler["ontouch"+e]=function(t){c.emit(e,t),u.emit(e,t)};l["onTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t,n){Object(s.isObject)(n)&&(r.default.EventHandler["ontouch"+e+"Dst"]=n),c.on(e,t)},l["offTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t){c.off(e,t)}})),t.default=l},function(e,t,n){n.r(t),n.d(t,"WebView",(function(){return b})),n.d(t,"getWebViewIdList",(function(){return w}));var r=n(29),i=n(4),o=n(5),a=n(7),s=n(15),c=n(18),u=n(9),l=n(68),d=n(0),f=n(34),p=n(1);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.default)(e);if(t){var i=Object(u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.default)(this,n)}}var g=new Map,v=new WeakMap,_=new WeakMap,y=new WeakMap;function m(e){var t=this;return new Promise((function(n,r){var i=_.get(t);Object(d.invokeMethod)("insertHTMLWebView",{htmlId:t.id,position:i,src:v.get(t),zIndex:y.get(t),backgroundColor:i.backgroundColor,__skipDomainCheck__:e,success:n,fail:r})}))}var b=function(e){Object(s.default)(n,e);var t=h(n);function n(e){var r,o=e.src,s=e.zIndex,c=e.style,u=void 0===c?{}:c,l=e.__skipDomainCheck__;return Object(i.default)(this,n),r=t.call(this,{style:u}),g.set(r.id,Object(a.default)(r)),v.set(Object(a.default)(r),o),_.set(Object(a.default)(r),u),y.set(Object(a.default)(r),s),m.call(Object(a.default)(r),l),r}return Object(o.default)(n,[{key:"src",get:function(){return v.get(this)},set:function(e){v.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,src:e})}},{key:"style",get:function(){return _.get(this)},set:function(e){this.style||_.set(this,{});var t=Object.assign(this.style,e);Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}},{key:"zIndex",get:function(){return y.get(this)},set:function(e){y.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}},{key:"destroy",value:function(){g.delete(this.id),Object(d.invokeMethod)("removeHTMLWebView",{htmlId:this.id})}}]),n}(l.Element);function w(){return Object(r.default)(g.keys())}function O(e){var t=e.htmlId,n=g.get(t);n&&n.onload&&setTimeout(n.onload)}function E(e){var t=e.name,n=e.arg,r=e.htmlId;"postMessage"===t&&g.forEach((function(e,t){var i=e.onmessage;r&&r!==t||i&&setTimeout((function(){return i(n)}))}))}p.default.onReady((function(){4===p.default.appType&&(Object(f.onNativeEvent)("onWebviewFinishLoad",O),Object(f.onNativeEvent)("onWebInvokeAppService",E),Object(f.onNativeEvent)("WEB_INVOKE_APPSERVICE",E))}))},function(e,t,n){n.r(t),n.d(t,"shareMessageToFriend",(function(){return a}));var r=n(77);n.d(t,"getMessageExtraData",(function(){return r.getMessageExtraData}));var i=n(190),o=n(1);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={openId:e.openId,title:e.title||o.default.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=Object(i.getMessageToFriendQuery)(),Object(r._doShareAppMessage)(t,"shareAppMessageToSpecificContactDirectly")}},function(e,t,n){n.r(t),n.d(t,"modifyFriendInteractiveStorage",(function(){return E})),n.d(t,"onInteractiveStorageModified",(function(){return S})),n.d(t,"offInteractiveStorageModified",(function(){return T}));var r=n(54),i=n(26),o=n(23),a=n(152),s=n(0),c=n(1),u=n(133),l=n(11),d=n(10),f=n(83),p=n(116),h=n(71);function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=new r.Emitter("InteractiveStorageModified",!0),y={add:1},m=Object(l.promisify)(u.getUserInfo);var b=function(e){var t=e.actionId,n=e.actId,r=void 0===n?0:n,i=e.receiverOpenId,o=e.detail,a=e.opNum,s=void 0===a?0:a,c=e.operationType,u=[t,r,0,o,s,void 0===c?0:c,i].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:u})},w=function(e){Reporter.reportIDKey({key:e})},O=Object(i.default)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(function(e){var t=e.key,n=e.operation,r=e.opNum,i=e.toUser;return{key:t,operation:n,debug:e.debug,opNum:r,toUser:i,action:e.action,object:e.object,ratio:e.ratio,quiet:!!e.quiet,op_num:r,to_user:i,random_number:Date.now(),randomNumber:Date.now()}}),(function(e){var t,n,r=e.json_resp,i=e.inner_errcode,o=e.inner_errmsg,a="modifyFriendInteractiveStorage:fail ";e.errMsg,delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{t=JSON.parse(r)}catch(e){t={},e.message}if((n=t.log)&&n.split("\n").map(decodeURIComponent).forEach((function(e){var t=parseInt(e.substr(0,1),10),n="[JSServer]"+e.substr(1);switch(t){case f.LOG_LEVEL.LOG:console.log(n);break;case f.LOG_LEVEL.WARNING:console.warn(n);break;case f.LOG_LEVEL.ERROR:console.error(n)}})),!Object(d.isUndefined)(i)&&0!==i)return e.errMsg=""+a+o,void(e.errCode=i);try{var s=JSON.parse(t.base_resp);if(0!==s.errcode)return e.errCode=s.errmsg,void(e.errMsg=""+a+s.errmsg);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=""+a+t.message,t.message}})),E=function(e){w("modifyFriendInteractiveStorage");var t=Object.assign({},e,{success:function(t){Object(s.beforeInvokeCallback)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||_.emit("modified",""+e.key)}});t.quiet?function(e){var t=Object(h._getLaunchOptionsSync)(),n=Object(p.getMessageExtraData)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?O(Object.assign(e,{toUser:n.userInfo.openID})):Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")}(t):t.toUser?c.default.modifyFriendInteractiveStorageTemplates?function(e){m({openIdList:[e.toUser]}).then((function(t){var n,r,i,o,u=t.data[0].nickName,l=parseInt(e.key,10),d=e.toUser,f=e.opNum,h=y[e.operation],v=g(c.default.modifyFriendInteractiveStorageTemplates);try{for(v.s();!(o=v.n()).done;)if((i=o.value).key===e.key){var _=i.ratio?" x"+f*i.ratio+" ？":"？";n="确认"+i.action+" "+u+" "+i.object+_,r=encodeURIComponent(n);break}}catch(e){v.e(e)}finally{v.f()}if(!n)throw new Error("invalid key");var m={actId:l,receiverOpenId:d,detail:r,opNum:f,operationType:h};b(Object.assign({actionId:1},m)),w("modifyFriendInteractiveStorageShowModal");var E=Object(a.showPopup)({content:n,title:""+i.action+i.object,confirmText:"确认"+i.action,confirm:function(){E.destroy(),O(Object.assign({action:i.action,object:i.object,ratio:i.ratio},e,{success:function(t){if(e.success&&e.success(t),!t.errCode)var n="string"==typeof e.title,r=Object(a.showPopup)({title:""+i.action+i.object,icon:!0,content:n?"已"+i.action+"，马上告诉微信好友？":"已"+i.action,cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel:function(){r.destroy()},confirm:function(){r.destroy(),Object(p.shareMessageToFriend)({openId:d,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),b(Object.assign({actionId:2},m)),w("modifyFriendInteractiveStorageConfirm")},cancel:function(){E.destroy(),Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),b(Object.assign({actionId:3},m)),w("modifyFriendInteractiveStorageCancel")}})})).catch((function(t){var n=t.errMsg,r=t.message;Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n||r)}))}(t):c.default.modifyFriendInteractiveStorageConfirmWording?function(e){m({openIdList:[e.toUser]}).then((function(t){var n=t.data[0].nickName,r=c.default.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),i={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(r),opNum:e.opNum,operationType:y[e.operation]};b(Object.assign({actionId:1},i)),w("modifyFriendInteractiveStorageShowModal"),Object(o._showModal)({content:r,confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(O(e),b(Object.assign({actionId:2},i)),w("modifyFriendInteractiveStorageConfirm")):(Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),b(Object.assign({actionId:3},i)),w("modifyFriendInteractiveStorageCancel"))}})})).catch((function(t){var n=t.errMsg;Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n)}))}(t):Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):Object(s.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},S=function(e){_.on("modified",e)},T=function(e){_.off("modified",e)}},function(e,t,n){n.r(t),n.d(t,"informSubjectChange",(function(){return v})),n.d(t,"getShouldCheckTicketBeforePayment",(function(){return g}));var r=n(4),i=n(5),o=n(24),a=n(11),s=n(25),c=n(22),u=Object(a.promisify)(Object(o.constructOperateWXData)(!1,"getSubjectalterInfo")),l=function(e){return new Promise((function(t){return setTimeout(t,e)}))},d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.default)(this,e);var i=286,o=38;this.orientation=t,this.animating=!1;var u=Object(s.getSystemInfoSync)(),l=u.screenWidth,d=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=n;var f=new c.View({id:d,style:{position:"absolute",left:(l-i)/2,top:this.getTop(),width:i,height:o,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!Object(a.isGame)()}}),p=new c.Text({id:d+1,style:{left:0,top:0,width:i,height:o,textAlign:"center",lineHeight:o,fontSize:15,color:"#ffffff"},value:"该"+(Object(a.isGame)()?"小游戏":"小程序")+"业务及数据已由新开发者承接"});f.add(p),c.webviewLayout.add(f),this.banner=f,this.bannerWidth=i}return Object(i.default)(e,[{key:"show",value:function(){var e=this;this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop(),opacity:.7,duration:300})})).then((function(){return e.animating=!1,l(5e3)})).then((function(){return e.animating=!0,e.banner.animate({top:e.getTop()-14,opacity:0,duration:300})})).then((function(){return l(3e3)})).then((function(){return c.webviewLayout.remove(e.banner)})).catch((function(){}))}},{key:"getTop",value:function(){var e=Object(s.getSystemInfoSync)().screenHeight;return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}},{key:"setOrientation",value:function(e){if(!this.animating){this.orientation=e;var t=Object(s.getSystemInfoSync)().screenWidth;this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}]),e}(),f=!1,p=500,h=!1,g=function(){return{shouldCheck:f,timeout:p,deprecated:h}},v=function(e,t){return u({apiName:"getSubjectalterInfo",reqData:{}}).then((function(n){var r=JSON.parse(n.rawData);if(r.need_show){var i=new d(e,t);return i.show(),i}void 0!==r.openproduct_checkticket&&(f=!!r.openproduct_checkticket),void 0!==r.openproduct_checktickettimeout&&(p=parseInt(r.openproduct_checktickettimeout,10)),void 0!==r.openproduct_checkticket_deprecated&&(h=!!r.openproduct_checkticket_deprecated)})).catch((function(){}))}},function(e,t,n){n.r(t),n.d(t,"navigateBackApplication",(function(){return c})),n.d(t,"launchApplication",(function(){return u})),n.d(t,"launchApplicationForNative",(function(){return l})),n.d(t,"launchApplicationDirectly",(function(){return d}));var r=n(0),i=n(27),o=n(2),a=n(24),s=__safeway__.apiSign.makeApiSign,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s("navigateBackApplication",e);Object(r.invokeMethod)("navigateBackApplication",t,{})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.launchAppid&&"string"==typeof e.launchAppid?Object(a._operateWXData)({apiName:"wxaapi_verify_jump",reqData:{appid:e.launchAppid},success:function(t){"ok"===JSON.parse(t.rawData).res?Object(r.invokeMethod)("launchApplication",Object.assign(e,{appId:e.launchAppid,operateDirectly:!0})):Object(r.beforeInvokeFail)("launchApplication",e,"no permission")},fail:function(t){wxNativeConsole.error("[launchApplication][wxaapi_verify_jump] fail",t),Object(r.beforeInvokeFail)("launchApplication",e,"no permission")}}):(delete e.operateDirectly,Object(r.invokeMethod)("launchApplication",e,{}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete e.operateDirectly,Object(r.invokeMethod)("launchApplicationForNative",e,{})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.checkPermissionSync)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,o.IS_IOS?Object(i.checkPermissionSync)("launchApplicationDirectly")?Object(r.invokeMethod)("launchApplication",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((function(){return Object(r.beforeInvokeFail)("launchApplicationDirectly",e,"no permission")})):Object(r.invokeMethod)("launchApplicationDirectly",e,{})}},function(e,t,n){n.r(t),n.d(t,"getEnv",(function(){return K})),n.d(t,"preGetPluginEnv",(function(){return J})),n.d(t,"getShouldMakeCanvasSecure",(function(){return $}));var r,i=n(1),o=n(0),a=wxGA,s=n(20),c=0,u=1,l=2,d=3,f={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267};r={},Object(s.default)(r,c,"thirdScriptError"),Object(s.default)(r,u,"widgetThirdScriptError"),Object(s.default)(r,l,"gameThirdScriptError"),Object(s.default)(r,d,"gameSubContextThirdScriptError");var p=n(57),h=n(27),g=n(183),v=n(184),_=n(185),y=n(186),m=n(187),b=n(116),w=n(133),O=n(191),E=n(117),S=n(194),T=n(26),I=Object(T.default)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),A=Object(T.default)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),C=Object(T.default)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),k=n(98),x=n(193),P=n(45),D=n(153),R=n(22),j=n(3),N=n(92),M=n.n(N),L=Object(T.default)("gameTransfer","webapi_game_transfer",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),B=n(119),F=n(139),U={Component:j.Component,getPrivateThis:j.getPrivateThis,removePrivateThis:j.removePrivateThis,create:j.create,init:j.init,webviewLayout:R.webviewLayout,nativeviewLayout:R.nativeviewLayout,xmlParser:M.a},W={Kanata:Kanata,wxGA:a,reportIDKey:function(e){var t=e.id,n=e.key,r=e.value;return Reporter.reportIDKey({id:t,key:n,value:r})},reportKeyValue:function(e){var t=e.key,n=e.value,r=e.immediately;return"number"!=typeof t||Object.values(f).includes(t)?Reporter.reportKeyValue({key:t,value:n,immediately:r}):Reporter.reportKeyValue({key:t,value:n,immediately:r,number:!0})},getXLogManager:function(){return p.nativeConsole},getUserCloudStorage:g.getUserCloudStorage,getFriendCloudStorage:v.getFriendCloudStorage,getGroupCloudStorage:_.getGroupCloudStorage,getPotentialFriendList:y.getPotentialFriendList,getGroupInfo:m.getGroupInfo,shareMessageToFriend:b.shareMessageToFriend,getUserInfo:w.getUserInfo,getUserCloudStorageKeys:O.getUserCloudStorageKeys,modifyFriendInteractiveStorage:E.modifyFriendInteractiveStorage,WebAssembly:S._WebAssembly,getGameLifeProfile:I,getGreetingControlInfo:A,interactGameLifeTag:C,openGameLifeAccountInfo:k.openGameLifeAccountInfo,openGameLifeMiniGameTransfer:k.openGameLifeMiniGameTransfer,Function:Function.prototype.constructor,createCanvas:function(){return P._createCanvas.apply(void 0,arguments)},createScreenCanvas:function(){return P.createScreenCanvas.apply(void 0,arguments)},createWebView:function(e){return new R.WebView(e)},navigateToMiniProgramDirectly:function(e){return Object(x._doNavigateToMiniProgram)(e,e)},privateOpenUrl:D.privateOpenUrl,gameTransfer:L,coverview:U,launchApplicationDirectly:B.launchApplicationDirectly,encode:F.encode,decode:F.decode},V={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},G=Object.keys(V).map((function(e){return V[e]})),H={},z=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],Y={},q=function(e){return function(e){if(Y[e])return Y[e];H[e]={},Object(o.invokeMethod)("getPluginPermissionBytes",{pluginList:[{indexes:G,pluginId:e}],success:function(t){var n=t.pluginPermissionMap;if(n&&n[e])for(var r=0;r<n[e].length;r++){var i=G[r];H[e][i]=1===n[e][r]}}});var t={platform:i.default.platform};for(var n in W){var r=V[n],a=H[e][r];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||a)&&("createCanvas"===n&&(X=!0),-1===z.indexOf(n)?t[n]=W[n]:Object(h.checkPermissionSync)("engineOpenData")&&(X=!0,t[n]=W[n]))}return Y[e]=t,Y[e]}(e)},K=function(e,t){var n=t.enableRequireHostModule,r=t.customEnv,i=q(e);return i.customEnv=r,n&&(i.requireHostModule=__subContextEngine__.getGameContext().contextGlobal.__require),i},J=function(){var e=i.default.plugins||i.default.gamePlugins;e&&Object.keys(e).forEach((function(t){var n=e[t].provider;q(n)}))},X=!1,$=function(){return X}},function(e,t,n){n.r(t),function(e){n.d(t,"skiaCanvasInsert",(function(){return p})),n.d(t,"skiaCanvasRemove",(function(){return h})),n.d(t,"getOrCreateCanvas",(function(){return g})),n.d(t,"SkiaCanvas",(function(){return _}));var r=n(138),i=n(29),o=n(4),a=n(5),s=n(0),c=n(35),u=n(6),l=n(2),d={},f={};function p(e,t){var n=e.canvasId,r=e.viewId,i=e.canvasNumber,o=e.pluginId,a=e.position,s=e.nodeId,u=Object(c.concatId)(t,n,o,s),l=g(u);l.context&&(l=v(u)),l.context||l.init(i,a.width,a.height,r,t)}function h(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,i=e.viewId,o=e.webviewId,a=Object(c.concatId)(o,t,n,r);delete d[a],delete f[i]}function g(e){return d[e]?d[e]:v(e)}function v(e){var t=new _(e);return d[e]=t,t}l.IS_ANDROID&&Object(s.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),Object(s.subscribe)("skiaCanvasSizeChanged",(function(e,t){var n=e.canvasId,r=e.pluginId,i=e.nodeId,o=e.position,a=Object(c.concatId)(t,n,r,i),s=d[a];0===o.width&&0===o.height||!s||s.width===o.width&&s.height===o.height||(s.width=o.width,s.height=o.height,s.canvas&&s.context&&(s.canvas.width=o.width,s.canvas.height=o.height,s.needsReplay()&&s.replayActions()))}));var _=function(){function t(e){var n=this;Object(o.default)(this,t),this.id=e,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((function(e){n._resolveContext=e}))}return Object(a.default)(t,[{key:"init",value:function(t,n,r,i){this.width=n,this.height=r,l.IS_IOS&&(this.canvas=new e.Canvas(t),this.context=this.canvas.getContext("2d")),l.IS_ANDROID&&(this.canvasView=HTMLCanvasView.createView(i),f[i]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}},{key:"preloadImage",value:function(t){var n=this;t.forEach((function(t){var r="",i=t.method,o=t.data;"drawImage"===i?r=o[0]:"setFillStyle"===i&&"pattern"===o[0]&&(r=o[1]),r&&!n._images[r]&&(l.IS_IOS?(n._images[r]=new e.Image,n._images[r].onload=function(){n._images[r].ready=!0}):l.IS_ANDROID&&(n._images[r]=new SkiaImage,n._images[r].onload=function(){n._images[r].ready=!0}),n._images[r].setSrc(r))}))}},{key:"checkImageLoaded",value:function(e,t,n){var r=this,i=this._images[e];return i.ready?(n(i),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,i.onload=function(){i.ready=!0,n(i),r._actionsWaiting=!1;var e=r._actionsDefer.slice(0);r._actionsDefer=[];for(var t=e.shift();t;)r.draw(t[0],t[1],t[2],r._webviewId,r._nodeId,r._pluginId),t=e.shift()},!1)}},{key:"draw",value:function(e,t,n,r,i,o){var a=this;this._webviewId=r,this._nodeId=i,this._pluginId=o,this.context?this._draw(e,t,n,r,i,o):this._contextPromise.then((function(){return a._draw(e,t,n,r,i,o),null})).catch((function(){}))}},{key:"_draw",value:function(e,t,n,o,a,s){var c=this,u=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(u.fillStyle="#000000",u.strokeStyle="#000000",u.shadowColor="#000000",u.shadowBlur=0,u.shadowOffsetX=0,u.shadowOffsetY=0,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.width,this.height)),this.preloadImage(e,o,a,s),u.save();for(var d=function(t){var n=e[t],o=n.method,a=n.data;if(/^set/.test(o)&&"setTransform"!==o){var s=o[3].toLowerCase()+o.slice(4),l=void 0;if("fillStyle"===s||"strokeStyle"===s){if("normal"===a[0])l=a[1];else if("linear"===a[0])l=u.createLinearGradient.apply(u,Object(i.default)(a[1])),a[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}));else if("radial"===a[0]){var d=a[1][0],f=a[1][1],p=[d,f,0,d,f,a[1][2]];l=u.createRadialGradient.apply(u,p),a[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}))}else if("pattern"===a[0]){return c.checkImageLoaded(a[1],e.slice(t+1),(function(e){e&&(u[s]=u.createPattern(e,a[2]))}))?"continue":"break"}u[s]=l}else if("globalAlpha"===s)u[s]=a[0]/255;else if("shadow"===s){var h=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];a.forEach((function(e,t){u[h[t]]=e}))}else"fontSize"===s?u.font=u.font.replace(/\d+\.?\d*px/,a[0]+"px"):"lineDash"===s?(u.setLineDash(a[0]),u.lineDashOffset=a[1]||0):"textBaseline"===s?("normal"===a[0]&&(a[0]="alphabetic"),u[s]=a[0]):u[s]=a[0]}else if("fillPath"===o||"strokePath"===o)o=o.replace(/Path/,""),u.beginPath(),a.forEach((function(e){u[e.method].apply(u,Object(i.default)(e.data))})),u[o]();else if("fillText"===o){var g=Object(r.default)(a),v=g[0],_=g.slice(1);_&&_.map&&(_=_.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u.fillText.apply(u,[v].concat(Object(i.default)(_)))}else if("drawImage"===o){var y=Object(r.default)(a),m=y[0],b=y.slice(1);if(c._images=c._images||{},b&&b.map&&(b=b.map((function(e){return"string"==typeof e?parseFloat(e):e}))),!c.checkImageLoaded(m,e.slice(t+1),(function(e){e&&u.drawImage.apply(u,[e].concat(Object(i.default)(b.slice(4,8)),Object(i.default)(b.slice(0,4))))})))return"break"}else if("clip"===o)a.forEach((function(e){u[e.method].apply(u,Object(i.default)(e.data))})),u.clip();else if("arcTo"===o||"rotate"===o){var w=a;a&&a.map&&(w=a.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[o].apply(u,Object(i.default)(w))}else if("strokeText"===o){var O=Object(r.default)(a),E=O[0],S=O.slice(1);S&&S.map&&(S=S.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[o].apply(u,[E].concat(Object(i.default)(S)))}else u[o].apply(u,Object(i.default)(a))},f=0;f<e.length;f++){var p=d(f);if("break"===p)break}u.restore(),l.IS_ANDROID&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._getImageData(t):this._contextPromise.then((function(){return e._getImageData(t),null})).catch((function(){}))}},{key:"_getImageData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n=t||{},r=n.x,i=n.y,o=n.width,a=n.height;e=this.context.getImageData(r,i,o,a)}catch(e){return void Object(u.failWithMessage)(t,e)}if(e){var s={width:e.width,height:e.height,data:e.data};Object(u.successCallback)(t,s)}else Object(u.failWithMessage)("canvasGetImageData:fail")}},{key:"putImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._putImageData(t):this._contextPromise.then((function(){return e._putImageData(t),null})).catch((function(){}))}},{key:"_putImageData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n,r=t||{},i=r.x,o=r.y,a=r.width,s=r.height,c=r.data;l.IS_IOS?n=new e.ImageData(c,a,s):l.IS_ANDROID&&(n=new SkiaImageData(c,a,s)),l.IS_ANDROID&&this.canvasView.prepareDraw(),this.context.putImageData(n,i,o),l.IS_ANDROID&&this.canvasView.present()}catch(e){return void Object(u.failWithMessage)(t,e)}Object(u.successWithMessage)(t,"canvasPutImageData:ok")}},{key:"replayActions",value:function(){var e=this,t=function(){};this._actionsQueue.forEach((function(n){e.draw(n.actions,n.reserve,t,e._webviewId,e._nodeId,e._pluginId)}))}},{key:"needsReplay",value:function(){return this._actionsQueue.length>0}},{key:"_flushQueue",value:function(){this._actionsQueue=[]}},{key:"_enqueue",value:function(e){this._actionsQueue.push(e)}}]),t}()}.call(this,n(74))},function(e,t,n){n.r(t),n.d(t,"onAppShow",(function(){return c})),n.d(t,"offAppShow",(function(){return u})),n.d(t,"_onAppShow",(function(){return l})),n.d(t,"emitIsloatedAppShow",(function(){return d}));var r=n(75),i=n(21),o=n(164),a=n(56),s=Object(i.getEventManager)("AppShow"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(e){s.emitGlobal(e)}Object(r.onAppEnterForeground)((function(e){s.emitInternal(e)})),Object(a.onAppRoute)((function e(t){if("appLaunch"===t.openType){var n=Object(o._getLaunchOptionsSync)();s.emitInternal(n),Object(a.offAppRoute)(e)}}))},function(e,t,n){n.r(t),n.d(t,"chooseImage",(function(){return p})),n.d(t,"previewImage",(function(){return h})),n.d(t,"_getImageInfoWithDownloadFile",(function(){return v})),n.d(t,"getImageInfo",(function(){return g})),n.d(t,"saveImageToPhotosAlbum",(function(){return _})),n.d(t,"compressImage",(function(){return y}));var r=n(29),i=n(0),o=n(6),a=n(12),s=n(59),c=n(40),u=n(63),l=n(1);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.invokeMethod)("chooseImage",Object(o.assign)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess:function(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((function(e){return e})).map((function(t,n){return{path:t,size:e.tempFileSizes[n]}})):e.tempFiles=(e.tempFiles||[]).filter((function(e){return e.path&&"number"==typeof e.size})),delete e.tempFileSizes}})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(i.beforeInvoke)("previewImage",e,{urls:[""]})){var t,n=l.default.version,o=l.default.system,a="7.0.12"===n&&o.indexOf("iOS 13.4")>=0,s=d(e.urls);try{for(s.s();!(t=s.n()).done;){var f=t.value;if(/^\s*data:image\//.test(f)&&a)return void Object(i.beforeInvokeFail)("previewImage",e,"url can not be base64 on iOS 13.4")}}catch(e){s.e(e)}finally{s.f()}var p=Object.assign({},e);p.urls=p.urls.slice(),p.referrerPolicy=p.referrerPolicy||"origin",Object(u.getCloudFileUrl)(p.urls,"image",(function(e){var t=p.urls;if(p.urls=Object(r.default)(e.data.map((function(e){return e.url}))),p.current){var n=t.indexOf(p.current);n>=0&&(p.current=p.urls[n])}p.urls&&(p.urls=p.urls.map((function(e){return c.FakeTempFilePathMap.get(e)||e}))),Object(i.invokeMethod)("previewImage",p)}))}},g=function(e){var t=Object.assign({},e),n=[t.src];Object(u.getCloudFileUrl)(n,"image",(function(e){return t.src=e.data[0].url,v(t,s.downloadFile)}))},v=function(e,t){Object(i.beforeInvoke)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?Object(i.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success:function(t){404!==t.statusCode?(e.src=t.tempFilePath,Object(i.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})):Object(i.beforeInvokeFail)("getImageInfo",e,"image not found (404)")},fail:function(t){Object(i.beforeInvokeFail)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=Object(o.getRealRoute)(a.default.lastRoute,e.src,!1),Object(i.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.filePath=c.FakeTempFilePathMap.get(e.filePath)||e.filePath,Object(i.invokeMethod)("saveImageToPhotosAlbum",e,{})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={src:"",quality:80};t=Object(o.extend)(t,e),Object(i.beforeInvoke)("compressImage",t,{src:"",quality:80})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/(tmp|store)\//.test(e.src)||(t.src=Object(o.getRealRoute)(a.default.lastRoute,t.src,!1)),Object(i.invokeMethod)("compressImage",t))}},function(e,t,n){n.r(t),n.d(t,"getAccountInfoSync",(function(){return i}));var r=n(1),i=function(){return{miniProgram:{appId:r.default.accountInfo&&r.default.accountInfo.appId||"",envVersion:r.default.envVersion||"release",version:r.default.appContactInfo&&r.default.appContactInfo.user_version||""}}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(143);function i(e,t){if(e){if("string"==typeof e)return Object(r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.default)(e,t):void 0}}},function(e,t,n){n.r(t),n.d(t,"getAdUxInfo",(function(){return u}));var r=n(34),i=n(1),o=n(157),a=n(159),s="",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};void 0!==__safeway__&&(i.default.onReady((function(){c(i.default.appLaunchInfo)})),Object(r.onNativeEvent)("onAppEnterForeground",(function(e){c(e)})),Object(r.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"back"!==e.mode&&"close"!==e.mode||(s="")})),Object(a.subscribe)("getAdUxInfo",(function(e,t){Object(o.publish)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));var u=function(){return s}},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"canvasMap",(function(){return p})),n.d(t,"OffscreenSkiaCanvas",(function(){return h}));var r=n(20),i=n(4),o=n(5),a=n(15),s=n(18),c=n(9),u=n(182);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var p=new WeakMap,h=function(e){Object(a.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.default)(this,n);var o=d({id:-1,width:1,height:1,top:0,left:0,nodeId:"",pluginId:""},r),a=o.id,s=o.width,c=o.height,u=o.top,l=o.left,f=o.nodeId,p=o.pluginId;return(e=t.call(this)).id=a,e._top=u,e._left=l,e._width=s,e._height=c,e._nodeId=f,e._pluginId=p,e._onReady(),e}return Object(o.default)(n,[{key:"_init",value:function(){if(this.id){var e=this._initCanvasInstance();e.width=this._width,e.height=this._height,p.set(this,e)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){p.get(e)||e._init(),t()};n()}},{key:"getContext",value:function(e,t){if("2d"===e){var n=p.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=p.get(this);return e&&e.width},set:function(e){var t=p.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=p.get(this);return e&&e.height},set:function(e){var t=p.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){}},{key:"createImageData",value:function(){}}]),n}(u.CanvasInterface)},function(e,t,n){n.r(t),n.d(t,"_getIAPInfo",(function(){return o})),n.d(t,"default",(function(){return a}));var r,i=n(26),o=Object(i.default)("getIAPInfo","webapi_getiapinfo");function a(){return new Promise((function(e,t){r?e(r):o({success:function(t){r={openId:t.openID,appId:t.appId},e(r)},fail:function(e){t(e.errMsg)}})}))}},function(e,t,n){n.r(t),n.d(t,"uploadFile",(function(){return o}));var r=n(0),i=n(40);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filePath,n=e.thumbFilePath,o=e.fileType,a=e.appType;return new Promise((function(e,s){if(!/wxfile:\/\//.test(t)&&!/http:\/\//.test(t)){var c=i.FakeTempFilePathMap.get(t);t=c}Object(r.invokeMethod)("uploadToCommonCDN",{filePath:t,thumbFilePath:n,fileType:o,appType:a,isStorageMode:!0,snsUploadVersion:0,directReturnInDevtools:!0,success:e,fail:s})}))}},function(e,t,n){var r,i,o,a,s,c,u,l,d;n.r(t),n.d(t,"COMMON_EVENT",(function(){return r})),n.d(t,"ROOT_EVENT",(function(){return i})),n.d(t,"BUTTON_EVENT",(function(){return o})),n.d(t,"TEXT_EVENT",(function(){return a})),n.d(t,"VIDEO_EVENT",(function(){return s})),n.d(t,"FEEDBACK_EVENT",(function(){return c})),n.d(t,"ENDPAGE_EVENT",(function(){return u})),n.d(t,"CAROUSEL_EVENT",(function(){return l})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return d})),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(r||(r={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(i||(i={})),function(e){e.BUTTONTAP="buttonTap"}(o||(o={})),function(e){e.RELATIONFETCHED="relationFetched"}(a||(a={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(u||(u={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(l||(l={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(d||(d={}))},function(e,t,n){n.r(t),n.d(t,"createImage",(function(){return f}));var r,i=n(2),o=n(16).default.Image,a=Object.defineProperty,s=Object.getOwnPropertyDescriptor,c=Object.prototype.hasOwnProperty,u=["src","width","height","naturalWidth","naturalHeight","complete","tagName","nodeName","onerror","onload"],l=new WeakMap;function d(e){return"function"!=typeof e?null:(l.set(e,(function(t){var n=t.type,r=t.target,i=t.timeStamp;return e&&e({type:n,target:r,currentTarget:r,timestamp:1e6*i})})),l.get(e))}var f=function(){var e=new o;return function(e){if(!i.IS_DEVTOOLS&&!c.call(e,"src")){var t=e.__proto__;r||(r={addEventListener:function(e,n){t.addEventListener.call(this,e,d(n))},removeEventListener:function(e,n){t.removeEventListener.call(this,e,l.get(n)||n)}}),e.__proto__=r,u.forEach((function(n){for(var r=t;r&&(!c.call(r,n)||"break"!==function(){var t=s(r,n);if(/^on/.test(n)){var i=null;a(e,n,{get:function(){return i},set:function(n){i=n,t.set.call(e,d(n))}})}else a(e,n,t);return"break"}());r=r.__proto__);}))}}(e),e}},function(e,t,n){n.r(t),n.d(t,"getUserInfo",(function(){return o}));var r=n(24),i=Object(r.constructOperateWXData)(!1,"getUserInfo",!1,!0),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openIdList,n=void 0===t?[]:t,r=e.lang,o=void 0===r?"en":r,a=e.success,s=e.fail,c=e.complete;i({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:n,lang:o},success:function(e){var t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof a&&a({errMsg:e.errMsg,data:t})},fail:s,complete:c})}},function(e,t,n){n.r(t),n.d(t,"SET_COOKIES_INDEX",(function(){return h})),n.d(t,"GET_COOKIES_INDEX",(function(){return g})),n.d(t,"initCheckCookies",(function(){return w})),n.d(t,"getPassCookieString",(function(){return E})),n.d(t,"getPayCookieString",(function(){return S})),n.d(t,"getShareCookieString",(function(){return T})),n.d(t,"setCookiesWithoutPermission",(function(){return I})),n.d(t,"getCookiesWithoutPermission",(function(){return A})),n.d(t,"setCookies",(function(){return C})),n.d(t,"getCookies",(function(){return k}));var r=n(20),i=n(75),o=n(56),a=n(58),s=n(1),c=n(2),u=n(122),l=n(27),d=[],f=[],p=["expires","domain","path","busid","indate","receivetime","spread"],h=502,g=503,v={scene:-1,sceneNote:"",sessionId:""};function _(e){return c.IS_DEVTOOLS||Object(l.checkPermissionSync)(e)}function y(e){var t,n;t=function(t){t&&b(t,!1,d),e&&e()},n=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",Object(a.invokeWebviewMethod)("getCookiesFromGlobalStorage",{appId:n},void 0,t)}function m(){var e=Date.now(),t=[];d.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;if(r&&1e3*r>e){var i=[];for(var o in n)p.indexOf(o)>=0&&i.push(encodeURIComponent(o)+"="+encodeURIComponent(n[o]));i.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value)),t.push(i.join("; "))}}));var n,r,i,o=t.join(";; ");o.length>=4096||(n=o,r=function(){},i=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",n&&n.trim()&&Object(a.invokeWebviewMethod)("setCookiesToGlobalStorage",{cookies:n,appId:i},void 0,r))}function b(e,t,n){if("string"==typeof e){var r=Date.now();e.split(";;").forEach((function(e){var i;if(e.split(";").forEach((function(e){i=i||{};var t=(e=e.split("="))[0].trim(),n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(p.indexOf(t)>=0?i[decodeURIComponent(t)]=decodeURIComponent(n):(i.name=decodeURIComponent(t),i.value=decodeURIComponent(n)))})),i){t&&(i.receivetime=~~(r/1e3)),void 0===i.expires&&void 0!==i.indate&&i.receivetime&&(i.__wxprivate_calc_expires__=+i.receivetime+ +i.indate);var o=i.expires||i.__wxprivate_calc_expires__;o&&!(1e3*o>r)||function(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];if(e.busid===i.busid&&e.name===i.name)return!0}return!1}(i,n)||n.push(i),s.default.accountInfo&&s.default.accountInfo.appId&&i.spread&&(i.spread="*"===i.spread?"":i.spread+":",i.spread+=s.default.accountInfo.appId)}}))}}Object(u._onAppShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};v.scene=e.scene,v.sceneNote=e.scene_note,v.sessionId=e.sessionid}));var w=function(){Object(o.onAppRoute)((function(){var e=s.default.appLaunchInfo||{},t=+s.default.appLaunchInfo.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,i=n&&n.cookies||r&&r.cookies;"string"==typeof i&&b(i,1037!==t,d),y(m)})),Object(i.onAppEnterForeground)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=+e.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,i=n&&n.cookies||r&&r.cookies;(1037===t||i&&"string"==typeof i||1===e.reLaunch||!0===e.reLaunch)&&(d=[],f=[]),"string"==typeof i&&b(i,1037!==t,d),y(m)}))};function O(e){var t=[];for(var n in e)p.indexOf(n)>=0&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)),t.join("; ")}var E=function(e){var t=Date.now(),n=[];d.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!r||1e3*r>t)&&n.push(O(e))}));var r=n.join(";; ");return e&&e.success&&e.success({cookies:r}),r},S=function(e){var t=Date.now(),n=[];d.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;(!r||1e3*r>t)&&n.push(e)}));var r=s.default&&s.default.accountInfo&&s.default.accountInfo.appId||"",i=v.scene||"",o=v.sceneNote||"",a=v.sessionId||"";n.push({name:"appid",value:r,busid:"wxapp"},{name:"sessionid",value:a,busid:"wxapp"},{name:"scene",value:i,busid:"wxapp"},{name:"scene_note",value:o,busid:"wxapp"});var c=e&&e.pluginInfo?e.pluginInfo:{},u=c.hostAppId,l=c.pluginAppId;if(void 0!==u&&void 0!==l){var f=n.find((function(e){return"appid"===e.name}));f&&(f.value=u),n.push({name:"plugin_appid",value:l,busid:"wxapp"})}var p=s.default.host||{};"SDK"===p.env&&n.push({name:"sdk_host_appid",value:p.appId,busid:"wxapp"});var h=n.map(O).join(";; ");return e&&e.success&&e.success({cookies:h}),h},T=function(){var e=Date.now(),t=[];return f.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;(!r||1e3*r>e)&&t.push(O(n))})),t.join(";; ")},I=function(e){var t=Date.now(),n=e.cookies||[],r=e.isTemporary;if(n instanceof Array){var i=r?f:d,o=[],a={},c={},u=s.default.accountInfo&&s.default.accountInfo.appId||"";if(n.forEach((function(e){if(e.key&&"string"==typeof e.key){var n=+e.expires;if(!e.value||n&&1e3*n<t)a[e.key]={name:e.key,busid:e.busid};else{var i={name:e.key,value:e.value};p.forEach((function(t){var n=e[t];"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),"spread"===t&&n&&!r&&u&&(i.spread="*"===n?"":n+":",i.spread+=u),"receivetime"!==t&&"spread"!==t&&void 0!==n&&(i[t]=n)})),c[e.key]=i,o.push(i)}}})),i.forEach((function(e){var n=a[e.name];if(!n||(n.busid||e.busid)&&n.busid!==e.busid){var r=c[e.name];if(!r||(r.busid||e.busid)&&r.busid!==e.busid){var i=e.expires||e.__wxprivate_calc_expires__;i&&1e3*i<t||o.push(e)}}})),function(e){var t=[];return e.forEach((function(e){t.push(O(e))})),t.join(";; ")}(o).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";r?f=o:(d=o,m())}},A=function(e){var t=Date.now(),n=e.keys||[],i=e.busid,o=e.isTemporary;if(n instanceof Array){var a=[];return(o?f:d).forEach((function(e){var o=e.expires||e.__wxprivate_calc_expires__;if((!o||1e3*o>t)&&n.indexOf(e.name)>=0&&(!i||i&&i===e.busid)){var s=Object(r.default)({},e.name,e.value);Object.keys(e).forEach((function(t){p.indexOf(t)>=0&&(s[t]=e[t]),"indate"!==t&&"expires"!==t||(s[t]=+s[t])})),a.push(s)}})),a}},C=function(e){var t="setCookies:ok";if(_("setCookies")){var n=I(e);n?(t=n,"function"==typeof e.fail&&e.fail({errMsg:t})):"function"==typeof e.success&&e.success({errMsg:t})}else t="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})},k=function(e){var t="getCookies:ok";if(_("getCookies")){var n=A(e);"function"==typeof e.success&&e.success({errMsg:t,cookies:n})}else t="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})}},function(e,t,n){n.r(t);var r=[],i={add:function(e){e&&r.indexOf(e)<0&&r.push(e)},remove:function(e){var t=r.indexOf(e);t>=0&&r.splice(t,1)},get size(){return r.length}};t.default=i},function(e,t,n){n.r(t),function(e){n.d(t,"wxSAB",(function(){return h})),n.d(t,"createSharedArrayBuffer",(function(){return v})),n.d(t,"getSharedArrayBuffer",(function(){return _})),n.d(t,"SharedArrayBuffer",(function(){return g})),n.d(t,"unpackSharedArrayBuffer",(function(){return y}));var r=n(4),i=n(5),o=n(10),a=n(6),s="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,c=0,u=1,l=2,d=new WeakMap,f=new Map,p=ArrayBuffer,h="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?p=__global.SharedArrayBuffer:e.SharedArrayBuffer&&(p=e.SharedArrayBuffer));var g=function(){function e(t,n){if(Object(r.default)(this,e),s.log("constructor length="+t+", sabId="+n),!Object(o.isNumber)(t)||t<0)throw new a.ThirdScriptError("Invalid array buffer length "+t);if(Object(o.isNumber)(n)){var i;s.info("get buffer with sabId: "+n);try{i=h.get(n)}catch(e){throw s.error("WeixinSharedBuffer.get"+n+" fail: "+e.message),new Error("WeixinSharedBuffer.get"+n+" fail: "+e.message)}Object.defineProperty(this,"buffer",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:n,enumerable:!0,writable:!1})}else{s.info("new ArrayBuffer with length: "+t),Object.defineProperty(this,"buffer",{value:new p(t),writable:!1,enumerable:!0});var u=h.new(this.buffer);s.info("sabId: "+u),Object.defineProperty(this,"_sabId",{value:u,enumerable:!0,writable:!1})}var l={writeStatus:c,readStatus:c,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};d.set(this,l),f.set(this._sabId,this),s.log("["+this._sabId+"] created:",this.buffer)}return Object(i.default)(e,[{key:"destroy",value:function(){s.warn("["+this._sabId+"][destroy()]");var e=d.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],f.delete(this._sabId),d.get(this).destroyed=!0,this.unlock(),h.destroy(this._sabId)}},{key:"lock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!0;var n=d.get(this),r=n.destroyed,i=n.writeStatus,c=n.readStatus,f=n.writeLockCallbacks,p=n.readLockCallbacks;if(r)throw new a.ThirdScriptError("SharedArrayBuffer has been destroyed");if(!Object(o.isFunction)(e))throw new a.ThirdScriptError("callback must be a function");if(i!==l)if(t)f.push(e),i===u||(n.writeStatus=u,n.writeLockId=h.Lock(this._sabId,(function(){f.forEach((function(e){return e()})),p.forEach((function(e){return e()})),n.writeStatus=l,n.writeLockCallbacks=[],n.readLockCallbacks=[]})));else{if(c===l)return s.info("["+this._sabId+"][lock()] readStatus is locked, callback immediately"),void e();p.push(e),c===u||i===u||(n.readLockId=h.Lock(this._sabId,(function(){p.forEach((function(e){return e()})),n.readStatus=l,n.readLockCallbacks=[]})),n.readStatus=u)}else e()}},{key:"unlock",value:function(){var e=d.get(this),t=e.writeLockId,n=e.readLockId,r=e.writeStatus,i=e.readStatus;e.destroyed?console.warn("unlock: SharedArrayBuffer has been destroyed"):(r!==u&&r!==l||(h.Unlock(this._sabId,t),e.writeStatus=c,e.writeLockId=void 0,e.writeLockCallbacks=[]),i!==u&&i!==l||(h.Unlock(this._sabId,n),e.readStatus=c,e.readLockId=void 0,e.readLockCallbacks=[]))}}]),e}(),v=function(e){return new g(e)},_=function(e){return s.info("[getSharedArrayBuffer] sabId="+e),f.has(e)?(s.info("[getSharedArrayBuffer] return existed object"),f.get(e)):(s.info("[getSharedArrayBuffer] return new object"),new g(0,e))},y=function e(t){return s.log("[unpackSharedArrayBuffer]",t),Object(o.isObject)(t)?(s.log("[unpackSharedArrayBuffer] isObject"),Object(o.isNumber)(t._sabId)?(s.info("[unpackSharedArrayBuffer] sabId is number"),_(t._sabId)):Object.keys(t).reduce((function(n,r){var i=t[r];return n[r]=e(i),n}),{})):Object(o.isArray)(t)?t.map(e):t}}.call(this,n(74))},function(e,t,n){n.r(t),function(e){function r(){return e.WeixinCanvas}n.d(t,"getWeixinCanvas",(function(){return r}))}.call(this,n(74))},function(e,t,n){n.r(t),n.d(t,"default",(function(){return s}));var r=n(173),i=n(175),o=n(125),a=n(174);function s(e){return Object(r.default)(e)||Object(i.default)(e)||Object(o.default)(e)||Object(a.default)()}},function(e,t,n){n.r(t),n.d(t,"encode",(function(){return a})),n.d(t,"decode",(function(){return s}));var r=n(16),i=n(0),o=n(2),a=function(e){if(o.IS_DEVTOOLS){var t=null;return Object(i.invokeMethod)("encodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.buffer},fail:function(){}})),t}return r.default.encodeArrayBuffer(e.data,e.format)},s=function(e){if(o.IS_DEVTOOLS){var t="";return Object(i.invokeMethod)("decodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.result},fail:function(){}})),t}return r.default.decodeArrayBuffer(e.data,e.format)}},function(e,t,n){n.r(t),n.d(t,"getLimitedCanvasProto",(function(){return T})),n.d(t,"getOriginalProto",(function(){return S}));var r=n(16),i=n(45),o=n(149),a=n(1),s=n(27),c=n(51),u=n(11),l=function(e){return!Object(i.getCanvasConfig)(e).secure},d=function(e,t){var n=Object(i.getCanvasConfig)(t);if(!n)return!0;var r=n.secure;return!(!Object(i.getCanvasConfig)(e).secure&&r)},f=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){var t=Object(i.getCanvasConfig)(this.canvas),n=t.flag,r=n.textures,o=n.currentTextureIndex,a=r[o];if(a&&"WeixinCanvasTexture"===a.type)return void console.warn("在调用 wxBindCanvasTexture() 向 "+o+" 号纹理单元提交纹理后，不能再调用 "+e+"() 向该纹理单元提交纹理")}var s=this.canvas,c=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(d(s,c))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 "+e+" 不能传入安全 Canvas")}},p=!1,h="unknown";a.default.onReady((function(){p=Object(s.checkPermissionSync)("screenCanvasReadPixels"),h=Object(u.checkAPIAvailable)("screenCanvasReadPixelsFreely")}));var g,v={toDataURL:function(){return!!l(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!l(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:f("createPattern"),drawImage:f("drawImage"),texImage2D:f("texImage2D"),texSubImage2D:f("texSubImage2D"),wxBindCanvasTexture:f("wxBindCanvasTexture"),readPixels:function(){if(!Object(i.getCanvasConfig)(this.canvas).secure)return!0;if(Object(c.reportDeprecatedAPI)("WebGLRenderingContext.readPixels"),p){var e=Object(i.getCanvasConfig)(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer;if(!t.has(n)||(Object(c.reportDeprecatedAPI)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==h))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}else Object(c.reportDeprecatedAPI)("screenCanvasReadPixelsNoPermission")}},_=r.default.Canvas,y=r.default.Image,m={"2d":null,webgl:null},b={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},w=new WeakMap;function O(){var e=new _;return e.width=1,e.height=1,e}function E(e){var t={};return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof r.value)r.get||r.set?Object.defineProperty(t,n,{get:function(){if(r.get)return r.get.call(this)},set:function(e){r.set&&r.set.call(this,e)}}):Object.defineProperty(t,n,r);else{var i=e[n];t[n]=function(){if("function"==typeof v[n]){var e=v[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof o.tracker[n]&&o.tracker[n].apply(this,arguments),i.apply(this,arguments)}}})),t}function S(){return Object.keys(b).forEach((function(e){if(!b[e]){var t=O(),n=t.getContext("2d");if("Canvas"===e)b[e]=Object.getPrototypeOf(t);else if("Image"===e)b[e]=Object.getPrototypeOf(new y);else if("CanvasRenderingContext2D"===e)b[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){var r=n.createPattern(t,"repeat");b[e]=Object.getPrototypeOf(r)}else if("CanvasGradient"===e){var i=n.createLinearGradient(0,0,100,100);b[e]=Object.getPrototypeOf(i)}else if("ImageData"===e){var o=n.getImageData(0,0,10,10);b[e]=Object.getPrototypeOf(o)}else if("TextMetrics"===e){var a=n.measureText("123");b[e]=Object.getPrototypeOf(a)}}})),b}var T=function(){if(g)return g;var e=O(),t=E(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){if(Object(i.getCanvasConfig)(this).isSharedCanvas)return{};var r=n.call(this,e,t);return null===r||(/2d|webgl/.test(e)&&Object.setPrototypeOf(r,function(e){if(m[e])return m[e];var t=O().getContext(e),n=E(Object.getPrototypeOf(t));return m[e]=n,m[e]}(e)),w.set(r,this),Object.defineProperty(r,"canvas",{value:this,configurable:!1,writeable:!1})),r},g=t,t}},function(e,t,n){n.r(t),n.d(t,"addCard",(function(){return u})),n.d(t,"openCard",(function(){return l}));var r=n(0),i=n(86),o=n(56),a=!1,s=null,c=null;Object(o.onAppRoute)((function(){a=!0})),Object(i.onAppRouteDone)((function(){a=!1,s&&(u(s),s=null),c&&(l(c),c=null)}));var u=function(e){Object(r.beforeInvoke)("addCard",e,{cardList:[]})&&(a?s=e:Object(r.invokeMethod)("addCard",e))},l=function(e){Object(r.beforeInvoke)("openCard",e,{cardList:[]})&&(a?c=e:Object(r.invokeMethod)("openCard",e))}},function(e,t,n){n.r(t),n.d(t,"getSurroundedCallbacks",(function(){return m})),n.d(t,"callbackInvoke",(function(){return w})),n.d(t,"mainInvokeMethod",(function(){return E})),n.d(t,"invokeMethod",(function(){return S})),n.d(t,"invokeMethodAsync",(function(){return T})),n.d(t,"invokeMethodWithPlugin",(function(){return I})),n.d(t,"_invokeMethod",(function(){return C}));var r=n(161),i=n(0),o={},a={},s={},c=0,u=function(e,t){return Object.keys(t).map((function(n){return Object.keys(t[n]).map((function(r){return{func:n,result:e,errMsg:r,count:t[n][r]}}))}))},l=function(){var e=u(1,o),t=u(2,a),n=u(3,s),r=[].concat(e,t,n);0!==r.length&&Object(i.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:r,appType:Reporter.getAppType()})}),o={},a={},s={}},d=n(33),f=n(97),p=n(1),h=n(10),g=n(102),v=n(2),_=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"],y=function(e){return v.IS_ANDROID&&_.includes(e)};function m(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=__errorTracer__.surroundThirdByTryCatch(e[r],"at api "+t+" "+r+" callback function"),delete e[r]),n}),{})}function b(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=Object(d.surroundByTryCatchFactory)(e[r],"at api "+t+" "+r+" callback function"),n[r]._argumentsLength=e[r].length),n}),{})}function w(e,t,n,r){e.errMsg=e.errMsg||t+":ok";var i=0===e.errMsg.indexOf(t+":ok"),u=new RegExp(t+":(fail |fail:)?cancel").test(e.errMsg),d=0===e.errMsg.indexOf(t+":fail");"function"==typeof r.beforeAll&&r.beforeAll(e),i?function(e,t,n){var r=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,r):(n.beforeSuccess(t),r()):r()}(n,e,r):u?function(e,t,n,r){var i=new RegExp(t+":(fail |fail:)?cancel");e.errMsg=e.errMsg.replace(i,t+":fail cancel"),"function"==typeof n.fail&&n.fail(e),"function"==typeof r.beforeCancel&&r.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof r.afterCancel&&r.afterCancel(e)}(e,t,n,r):d&&function(e,t,n,r){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof r.fail&&r.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),Object(h.isFunction)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:t+"_fail"})}(r,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof r.afterAll&&r.afterAll(e),function(e,t,n,r,i){var u;(u=t?o:n?a:s)[e]=u[e]||{},u[e][i]=(u[e][i]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(l,6e4))}(t,i,d,0,e.errMsg)}function O(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";Object(h.isObject)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;var a=m(n,t);if(n=Object.assign({},n),i=b(i,t),Reporter.reportIDKey({key:t}),!e){if(0===p.default.appType&&f.banAPISet.has(t)&&!Object(f.checkAPIAvailableForCurrentPage)(t))return void w({errMsg:t+":fail API has been banned"},t,a,i);delete n.pluginId,delete n.permissionBytes,"/"!==o&&(n.pluginId=o)}var s=y(t);Object(r.invoke)(t,n,(function(e){w(e,t,a,i)}),s)}}var E=O(!1),S=function(e,t,n){g.UI_JSAPI.indexOf(e)<0?E(e,t,n):Object(g.registerDelayedInvoke)(e,t,n)},T=function(e,t,n){return Object(d.invoke2Async)((function(t){return S(e,t,n)}))(t)},I=function(e){return e?function(t,n,r){E(t,n,r,e)}:S},A=O(!0),C=function(e,t,n){A(e,t,n)}},function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),t.default={query:{}}},function(e,t,n){n.r(t),n.d(t,"readFile",(function(){return h})),n.d(t,"readFileSync",(function(){return g}));var r=n(0),i=n(27),o=n(16),a=n(2),s=n(1),c=n(84),u=n(105),l=n(10),d=n(6),f=o.default.fs,p=!1;f&&f.FileReader&&s.default.onReady((function(){var e=!1,t=a.IS_IOS?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";Object(c._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(Object(u.setApiVersion)(/readFile(?:Sync)?$/,1),e=!0)},fail:function(e){}});var n=Object(i.checkPermissionSync)("bindingReadFile");p=e||n}));var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("readFile",e,{filePath:""}))if(Object(l.isUndefined)(e.encoding)||Object(l.isString)(e.encoding))if(Object(l.isUndefined)(e.position)||Object(l.isNumber)(e.position))if(Object(l.isUndefined)(e.length)||Object(l.isNumber)(e.length))if(p){var t=new f.FileReader;t.onerror=function(t){return Object(r.beforeInvokeFail)("readFile",e,t)},t.onread=function(t){return Object(r.beforeInvokeCallback)({name:"readFile",args:e,res:{data:t}})},t.read(e.filePath,e.encoding)}else Object(r.invokeMethod)("readFile",e);else Object(r.beforeInvokeFail)("readFile",e,"invalid length: "+e.length);else Object(r.beforeInvokeFail)("readFile",e,"invalid position: "+e.position);else Object(r.beforeInvokeFail)("readFile",e,"invalid encoding: "+e.encoding)},g=function(e,t,n,i){if(!e||!Object(l.isString)(e))throw new d.ThirdScriptError("invalid filePath: "+e);if(!Object(l.isUndefined)(t)&&!Object(l.isString)(t))throw new d.ThirdScriptError("invalid encoding: "+t);if(!Object(l.isUndefined)(n)&&!Object(l.isNumber)(n))throw new d.ThirdScriptError("invalid position: "+n);if(!Object(l.isUndefined)(i)&&!Object(l.isNumber)(i))throw new d.ThirdScriptError("invalid length: "+i);if(p)try{return f.readFileSync(e,t)}catch(a){throw new Error(a)}var o,a;if(Object(r.invokeMethod)("readFileSync",{filePath:e,encoding:t,position:n,length:i,success:function(e){o=e.data},fail:function(e){a=e.errMsg}}),a)throw new Error(a);return o}},function(e,t,n){n.r(t),n.d(t,"unlink",(function(){return i})),n.d(t,"unlinkSync",(function(){return o}));var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("unlink",e,{filePath:""})&&Object(r.invokeMethod)("unlink",e)},o=function(e){if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var t;if(Object(r.invokeMethod)("unlinkSync",{filePath:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)}},function(e,t,n){n.r(t),n.d(t,"copyFile",(function(){return i})),n.d(t,"copyFileSync",(function(){return o}));var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("copyFile",e,{srcPath:"",destPath:""})&&Object(r.invokeMethod)("fs_copyFile",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},o=function(e,t){if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");var n;if(Object(r.invokeMethod)("fs_copyFileSync",{srcPath:e,destPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)}},function(e,t,n){n.r(t),n.d(t,"mapSysMsgTypeNameToNum",(function(){return o})),n.d(t,"mapSysMsgTypeNumToName",(function(){return a}));var r={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},i=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(r);function o(e){return r[e]}function a(e){return i[e]}},function(e,t,n){n.r(t),n.d(t,"tracker",(function(){return u})),n.d(t,"createFlag",(function(){return a}));var r=n(17),i=n(45),o=function(e){return"object"===Object(r.default)(e)&&null!==e},a=function(){var e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},s=function(){var e=arguments[arguments.length-1],t=Object(i.getCanvasConfig)(e),n=Object(i.getCanvasConfig)(this.canvas).flag,r=n.textures,a=n.currentTextureIndex,s=n.dirtyTextureMap,c=r[a];o(c)&&(t&&t.isSharedCanvas?s.set(c,!0):s.has(c)&&s.delete(c))},c=function(){var e=Object(i.getCanvasConfig)(this.canvas).flag,t=e.textures,n=e.currentFramebuffer,r=e.dirtyFramebufferMap,a=e.framebufferTextureMap,s=e.dirtyTextureMap,c=e.framebufferRenderbufferMap,u=e.dirtyRenderbufferMap;if(t.some((function(e){return s.has(e)}))){r.set(n,!0);var l=a.get(n);o(l)&&s.set(l,!0);var d=c.get(n);o(d)&&u.set(d,!0)}},u={activeTexture:function(e){var t=e-this.TEXTURE0;Object(i.getCanvasConfig)(this.canvas).flag.currentTextureIndex=t},bindTexture:function(e,t){var n=Object(i.getCanvasConfig)(this.canvas).flag;n.textures[n.currentTextureIndex]=t},wxBindCanvasTexture:function(e,t){var n=Object(i.getCanvasConfig)(this.canvas).flag,r=n.textures,a=n.currentTextureIndex,s=n.dirtyTextureMap;if(o(t)){var c=Object(i.getCanvasConfig)(t),u={type:"WeixinCanvasTexture"};r[a]=u,c&&c.isSharedCanvas?s.set(u,!0):s.has(u)&&s.delete(u)}else r[a]=null},texImage2D:s,texSubImage2D:s,bindFramebuffer:function(e,t){var n=Object(i.getCanvasConfig)(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D:function(e,t,n,r){var o=Object(i.getCanvasConfig)(this.canvas).flag,a=o.framebufferTextureMap,s=o.currentFramebuffer;a.set(s,r)},framebufferRenderbuffer:function(e,t,n,r){var o=Object(i.getCanvasConfig)(this.canvas).flag,a=o.dirtyRenderbufferMap,s=o.dirtyFramebufferMap,c=o.framebufferRenderbufferMap,u=o.currentFramebuffer;a.has(r)&&s.set(u,!0),c.set(u,r)},copyTexImage2D:function(){var e=Object(i.getCanvasConfig)(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer,r=e.textures,a=e.currentTextureIndex,s=e.dirtyTextureMap;if(t.has(n)){var c=r[a];o(c)&&s.set(c,!0)}},drawArrays:c,drawElements:c}},function(e,t,n){var r;function i(e){r=e}function o(){return r}n.r(t),n.d(t,"setLastOnHideMode",(function(){return i})),n.d(t,"getLastOnHideMode",(function(){return o}))},function(e,t,n){n.r(t),n.d(t,"reportUserCaptureScreen",(function(){return i})),n.d(t,"reportLandingPageShare",(function(){return o}));var r=n(111),i=function(e){return Object(r.reportMMData)(19213,e)},o=function(e){return Object(r.reportMMData)(19214,e)}},function(e,t,n){n.r(t),n.d(t,"showPopup",(function(){return E}));var r=n(4),i=n(5),o=n(7),a=n(15),s=n(18),c=n(9),u=n(92),l=n.n(u),d=n(22),f=n(3),p=n(25),h=n(192),g=n(1);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var _="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png",y="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png",m=0,b=0;g.default.onReady((function(){var e=Object(p.getInitScreenSize)();m=e.screenWidth,b=e.screenHeight,Object(h.onWindowResize)((function(e){m=e.windowWidth,b=e.windowHeight}))}));var w=function(e){var t=e.cancelText,n=e.confirmText,r=e.icon,i=m>b;return{mask:{width:m,height:b,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:i?(m-b)/2:0,width:i?b:m},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:i?(m-b)/2:0,width:i?b:m},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:i?b:m},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:i?b:m},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:r?0:64,marginBottom:r?0:15,width:i?.9*b:.9*m},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:i?b:m},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:n?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:t?120:184}}},O=function(e){Object(a.default)(n,e);var t=v(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.title,s=i.content,c=i.icon,u=i.confirmText,p=i.cancelText,h=i.confirm,g=i.cancel,v=i.style,m=void 0===v?{}:v;Object(r.default)(this,n),e=t.call(this);var b=Object(f.getPrivateThis)(Object(o.default)(e)),O='<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="'+_+'" />\n          <text id="title" value="'+a+'" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          '+(c?'<image id="icon" src="'+(!0===c?y:c)+'" />':"")+'\n          <text id="content" value="'+s+'" />\n        </view>\n        <view id="footer">\n          '+(p?'<text id="cancel" value="'+p+'" />':"")+"\n          "+(u?'<text id="confirm" value="'+u+'" />':"")+"\n        </view>\n      </view>\n    </view>",E=l()(O),S=E.root,T=w(arguments[0]);return Object.keys(m).forEach((function(e){T[e]&&Object.assign(T[e],m[e])})),f.init.call(Object(o.default)(e),S,T),d.webviewLayout.add(b.container),b.close&&b.close.on("click",(function(){"function"==typeof g&&g()})),b.cancel&&b.cancel.on("click",(function(){"function"==typeof g&&g()})),b.confirm&&b.confirm.on("click",(function(){"function"==typeof h&&h()})),e}return Object(i.default)(n,[{key:"destroy",value:function(){var e=Object(f.getPrivateThis)(this);d.webviewLayout.remove(e.container),Object(f.removePrivateThis)(this)}}]),n}(f.Component);function E(e){return new O(e)}},function(e,t,n){n.r(t),n.d(t,"openDeliveryList",(function(){return i})),n.d(t,"openUrl",(function(){return o.openUrl})),n.d(t,"privateOpenUrl",(function(){return o.privateOpenUrl})),n.d(t,"sendDataToH5",(function(){return u})),n.d(t,"onH5Data",(function(){return p}));var r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("openDeliveryList",e,{})},o=n(85),a=n(17),s=!1,c=[],u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.webviewId||!t.data){console.error("invalid arguments");var n={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof t.fail&&t.fail(n),void("function"==typeof t.complete&&t.complete(n))}"object"===Object(a.default)(t.data)&&(t.data=JSON.stringify(t.data)),s?c.push(t):(s=!0,Object(r.invokeMethod)("sendDataToH5",t,{afterAll:function(){if(s=!1,c.length){var t=c.shift();e(t)}}}))},l=!1,d=[];function f(e){for(var t=0;t<d.length;t++)d[t](e)}var p=function(e){if("function"==typeof e){d.push((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),l||(Object(r.onMethod)("onH5Data",f),l=!0)}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(9),i=n(127);var o=n(108);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return Object(o.default)(e,arguments,Object(r.default)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(i.default)(a,e)})(e)}},function(e,t,n){n.r(t),n.d(t,"OffscreenCanvas",(function(){return ge})),n.d(t,"createOffscreenCanvas",(function(){return ve}));var r=n(15),i=n(18),o=n(9),a=n(20),s=n(17),c=n(4),u=n(5),l=n(16),d=n(137),f=n(0),p=n(2),h=n(12),g=n(35),v=n(201),_=n(203),y=n(42),m=n(128),b=n(70);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(o.default)(e);if(t){var a=Object(o.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}var O=function(e){Object(r.default)(n,e);var t=w(n);function n(){return Object(c.default)(this,n),t.apply(this,arguments)}return Object(u.default)(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this.id,e}},{key:"getContext",value:function(e,t){return Object(g.pipe)(b.decorateContextForImageProxy)(Object(y.default)(Object(o.default)(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(g.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}}]),n}(m.OffscreenSkiaCanvas),E=n(50),S=n(6),T=n(79),I=n(1),A=n(69),C=(n(25),n(121)),k=p.IS_ANDROID&&I.default.useXWebCanvas,x=p.IS_IOS&&I.default.useSkiaCanvas,P=(p.IS_ANDROID&&I.default.useNewXWebCanvasToTFP,k||x),D={},R={},j={},N={},M=0,L=0,B=4500,F=Date.now,U=(Object(g.subscribeOnce)("onCanvasMethodCallback"),Object(g.subscribeOnce)("onDrawCanvas"));function W(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,i=e.viewId,o=e.webviewId,a=Object(g.concatId)(o,t,n,r);j[a]&&delete j[a],P&&Object(C.skiaCanvasRemove)({webviewId:o,canvasId:t,pluginId:n,nodeId:r,viewId:i})}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;if(p.IS_DEVTOOLS||p.IS_WINDOWS||p.IS_MAC||p.IS_MINA){var s={actions:t,reserve:n,canvasId:e};U(s,(function(e){"function"==typeof a&&a({errMsg:e.errMsg})})),Object(f.publish)("canvasActionsChanged",s)}else Object(f.invokeMethod)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:r,actions:t,success:i,fail:o,complete:a})}function G(e){var t=e.isWidgetCanvas,n=e.canvasId,r=e.actions,i=e.reserve,o=e.useHardwareAccelerate,a=e.success,s=e.fail,c=e.complete,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.default.currentWebviewId,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",p=F();if(Array.isArray(r)){if(t){if(p-M<B){var v={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return(L+=1)>500&&(L=0,console.warn(v.errMsg)),void("function"==typeof s&&s(v))}return M=p,void Object(f.invokeMethod)("drawCanvas",{canvasId:void 0,reserve:i,actions:r,success:a,fail:s,complete:c})}var _=Object(g.concatId)(u,n,l,d);if(P){var y=Object(C.getOrCreateCanvas)(_);y.draw(r,i,c,u,d,l)}else if("number"==typeof j[_]){var m=j[_];V(m,r,i,o,a,s,c)}else N[_]=N[_]||[],N[_]=N[_].concat({actions:r,reserve:i,useHardwareAccelerate:o,success:a,fail:s,complete:c})}}"undefined"!=typeof __widgetConfig__&&(B="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),Object(f.subscribe)("canvasInsert",(function(e,t){var n=e.canvasId,r=e.viewId,i=e.canvasNumber,o=e.pluginId,a=e.data,s=e.position,c=e.nodeId,u=e.compPath;P&&Object(C.skiaCanvasInsert)({canvasId:n,viewId:r,canvasNumber:i,pluginId:o,position:s,nodeId:c},t);var l=Object(g.concatId)(t,n,o,c);D[i]={lastTouches:[],data:a,compPath:u},j[l]=i,R[i]=s,Array.isArray(N[l])&&(N[l].forEach((function(e){V(i,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete N[l]),Object(A.onBeforeUnloadPage)(t,(function(){W({canvasId:n,pluginId:o,nodeId:c,viewId:r,webviewId:t})}))})),Object(f.subscribe)("canvasUpdate",(function(e){var t=e.canvasNumber,n=e.position;Object(T.hasOwnProperty)(R,t)&&(R[t]=n)})),Object(f.subscribe)("canvasRemove",(function(e,t){W({canvasId:e.canvasId,pluginId:e.pluginId,nodeId:e.nodeId,viewId:e.viewId,webviewId:t})}));var H={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"},z={},Y={};function q(e){return"number"==typeof e}function K(e){var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e)))return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255];if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){var n=t[1].slice(0,1),r=t[1].slice(1,2),i=t[1].slice(2,3);return[n=parseInt(n+n,16),r=parseInt(r+r,16),i=parseInt(i+i,16),255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));var o=e.toLowerCase();if(Object(T.hasOwnProperty)(H,o)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(H[o]);var a=parseInt(t[1].slice(0,2),16),s=parseInt(t[1].slice(2,4),16),c=parseInt(t[1].slice(4,6),16),u=parseInt(t[1].slice(6,8),16);return[a,s,c,u=u>=0?u:255]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function J(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push(J(e))})),t}if("object"===Object(s.default)(e)){var n={};for(var r in e)n[r]=J(e[r]);return n}return e}function X(e,t){if(!(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){var n=e.pluginId.split("/")[0],r=__virtualDOM__.getNodeById(e.nodeId,e.webviewId),i=r&&r.is||"";t=n?0===t.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(S.getRealRoute)(i,t,!1).replace(/\.html$/,""):Object(S.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(i),t,!1).replace(/\.html$/,""):Object(S.getRealRoute)(i,t,!1).replace(/\.html$/,"")}else t=Object(S.getRealRoute)(h.default.lastRoute,t,!1).replace(/.html$/,"");return t}var $=function(){function e(t,n){Object(c.default)(this,e),this.type=t,this.data=n,this.colorStop=[]}return Object(u.default)(e,[{key:"addColorStop",value:function(e,t){P?this.colorStop.push([e,t]):this.colorStop.push([e,K(t)])}}]),e}(),Z=function e(t){Object(c.default)(this,e),this.width=t},Q=function e(t,n){Object(c.default)(this,e),this.image=t,this.repetition=n},ee=function(){function e(t,n,r,i){if(Object(c.default)(this,e),this.actions=[],this.path=[],this.subpath=[],this.webviewId=t,this.canvasId=n,this.pluginId=i,this.useHardwareAccelerate=!0,this.nodeId=r,this._id=Object(g.concatId)(t,n,i,r),this.drawingState=z[this._id]=z[this._id]||[],this.state=Y[this._id]=Y[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:P?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},p.IS_DEVTOOLS||p.IS_PC){var o=document.createElement("canvas");this._context=o.getContext("2d")}}return Object(u.default)(e,[{key:"getActions",value:function(){var e=J(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}},{key:"clearActions",value:function(){this.actions=[],this.path=[],this.subpath=[]}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this.canvasId,r=J(this.actions),i=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?G({isWidgetCanvas:!0,actions:r,reserve:e}):G({canvasId:n,actions:r,reserve:e,useHardwareAccelerate:i,complete:t},this.webviewId,this.pluginId,this.nodeId)}},{key:"createLinearGradient",value:function(e,t,n,r){return new $("linear",[e,t,n,r])}},{key:"createCircularGradient",value:function(e,t,n){return new $("radial",[e,t,n])}},{key:"createPattern",value:function(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:X(this,e),new Q(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}},{key:"measureText",value:function(e){var t;return p.IS_DEVTOOLS||p.IS_PC?(this._context.font=this.state.font,t=this._context.measureText(e)):Object(f.invokeMethod)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete:function(e){t={width:e.width||0}}}),new Z(t.width||0)}},{key:"save",value:function(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}},{key:"restore",value:function(){this.actions.push({method:"restore",data:[]}),this.state=Y[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:P?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}},{key:"getLineDash",value:function(){return this.state.lineDash}},{key:"beginPath",value:function(){this.path=[],this.subpath=[],(p.IS_DEVTOOLS||P)&&this.path.push({method:"beginPath",data:[]})}},{key:"moveTo",value:function(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}},{key:"closePath",value:function(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}},{key:"lineTo",value:function(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}},{key:"quadraticCurveTo",value:function(e,t,n,r){this.path.push({method:"quadraticCurveTo",data:[e,t,n,r]}),this.subpath.push([n,r])}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){this.path.push({method:"bezierCurveTo",data:[e,t,n,r,i,o]}),this.subpath.push([i,o])}},{key:"arc",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!p.IS_ANDROID||P)return this.path.push({method:"arc",data:[e,t,n,r,i,o]}),void this.subpath.push([e,t]);var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n;if(this.subpath.push([a,s]),o&&r-i>=2*Math.PI||!o&&i-r>=2*Math.PI)this.subpath.push([a,s]);else{var c=e+Math.cos(i)*n,u=t+Math.sin(i)*n;this.subpath.push([c,u])}this.path.push({method:"arc",data:[e,t,n,r,i,o]})}},{key:"rect",value:function(e,t,n,r){this.path.push({method:"rect",data:[e,t,n,r]}),this.subpath=[[e,t]],p.IS_ANDROID&&!P&&this.path.push({method:"closePath",data:[]})}},{key:"arcTo",value:function(e,t,n,r,i,o){if((!p.IS_ANDROID||P)&&!o)return this.path.push({method:"arcTo",data:[e,t,n,r,i]}),void this.subpath.push([n,r]);var a=this.subpath[this.subpath.length-1],s=a[0],c=a[1];if(s===e&&c===t||e===n&&t===r||0===i)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(s===e&&s===n||c===t&&c===r)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);var u,l,d,f,h,g,v=Math.sqrt,_=Math.acos,y=Math.sin,m=Math.tan,b=Math.atan,w=Math.PI,O=function(e){return Math.pow(e,2)},E=s-e,S=c-t,T=n-e,I=r-t,A=_((E*T+S*I)/(v(O(E)+O(S))*v(O(T)+O(I))))/2,C=Math.round(i/y(A)*1e6)/1e6,k=Math.round(i/m(A)*1e6)/1e6;if(s-e==0)u=e,l=c-t>0?t+k:t-k;else if(c-t==0)u=s-e>0?e+k:e-k,l=t;else{var x=(c-t)/(s-e),D=c-x*s;l=x*(u=(v(O(E)+O(S))*k+E*e+S*t-D*S)/(E+x*S))+D}if(n-e==0)d=e,f=r-t>0?t+k:t-k;else if(r-t==0)d=n-e>0?e+k:e-k,f=t;else{var R=(r-t)/(n-e),j=r-R*n;f=R*(d=(v(O(T)+O(T))*k+T*e+I*t-j*I)/(T+R*I))+j}var N=(u+d)/2-e,M=(l+f)/2-t;if(0===M)h=e,g=M>0?t+C:t-C;else{var L=M/N,B=t-L*e;g=L*(h=(v(O(N)+O(M))*C+e*N+t*M-B*M)/(N+L*M))+B}h=Math.round(1e6*h)/1e6;var F=l-(g=Math.round(1e6*g)/1e6),U=u-h,W=w-2*A,V=b(F/U);0===F&&U<0&&(V=Math.PI);var G=(u-h)*(f-g)-(l-g)*(d-h);this.path.push({method:"arc",data:[h,g,i,V,G>0?V+W:V-W,G<0]}),this.subpath.push([d,f])}},{key:"getTransform",value:function(){return this._transform}},{key:"clip",value:function(){this.actions.push({method:"clip",data:J(this.path)})}},{key:"lineDashOffset",set:function(e){if(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)this.actions.push({method:"setLineDashOffset",data:[e]});else{var t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}},{key:"globalCompositeOperation",set:function(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}},{key:"shadowBlur",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}},{key:"shadowColor",set:function(e){var t;p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowColor",data:[e]}):(t=P?e:p.IS_IOS&&0===this.state.shadowBlur?[]:K(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t)}},{key:"shadowOffsetX",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}},{key:"shadowOffsetY",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}},{key:"font",get:function(){return this.state.font},set:function(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var r=n[1].trim().split(/\s/),i=parseFloat(n[3]),o=n[7],a=[],s="",c=this;if(r.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(a.push({method:"setFontStyle",data:["normal"]}),c.state.fontStyle="normal"):1===n&&u()})),1===r.length&&u(),s=a.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=i,this.state.fontFamily=o,p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)return s=s+" "+i+"px "+o,void this.actions.push({method:"setFont",data:[s]});this.actions.push.apply(this.actions,a),this.actions.push({method:"setFontSize",data:[i]},{method:"setFontFamily",data:[o]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function u(){a.push({method:"setFontWeight",data:["normal"]}),c.state.fontWeight="normal"}}},{key:"fillStyle",set:function(e){te(this,"setFillStyle",e)}},{key:"strokeStyle",set:function(e){te(this,"setStrokeStyle",e)}},{key:"globalAlpha",set:function(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}},{key:"textAlign",set:function(e){this.actions.push({method:"setTextAlign",data:[e]})}},{key:"lineCap",set:function(e){this.actions.push({method:"setLineCap",data:[e]})}},{key:"lineJoin",set:function(e){this.actions.push({method:"setLineJoin",data:[e]})}},{key:"lineWidth",set:function(e){this.actions.push({method:"setLineWidth",data:[e]})}},{key:"miterLimit",set:function(e){this.actions.push({method:"setMiterLimit",data:[e]})}},{key:"textBaseline",set:function(e){this.actions.push({method:"setTextBaseline",data:[e]})}}]),e}();function te(e,t,n){"string"==typeof n?P?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",K(n)]}):"object"===Object(s.default)(n)&&n instanceof $?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof Q&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){ee.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:J(this.path)})}:"fillRect"===e?function(e,t,n,r){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,r]}]})}:"strokeRect"===e?function(e,t,n,r){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,r]}]})}:"fillText"===e||"strokeText"===e?function(t,n,r,i){var o=[t.toString(),n,r];"number"==typeof i&&o.push(i),this.actions.push({method:e,data:o})}:"drawImage"===e?function(t,n,r,i,o,a,s,c,u){var l;t=t._src?t._src:X(this,t),void 0===u&&(a=n,s=r,c=i,u=o,n=void 0,r=void 0,i=void 0,o=void 0),l=q(n)&&q(r)&&q(i)&&q(o)?[t,a,s,c,u,n,r,i,o]:q(c)&&q(u)?[t,a,s,c,u]:[t,a,s],this.actions.push({method:e,data:l})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,r,i,o,a){this._transform={a:t,b:n,c:r,d:i,e:o,f:a},this.actions.push({method:e,data:[t,n,r,i,o,a]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?ee.prototype[e]=function(){var t=arguments[0];te(this,e,t)}:"setGlobalAlpha"===e?ee.prototype[e]=function(){var t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?ee.prototype[e]=function(){var t=[].slice.apply(arguments,[0,4]);P||(t[3]=p.IS_IOS&&0===t[2]?[]:K(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?ee.prototype[e]=function(){var t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?ee.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:ee.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}));var ne=n(59);function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(o.default)(e);if(t){var a=Object(o.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}var ie={};function oe(e,t){var n=Object(g.concatId)(t,e.canvasNumber),r=ie[n];delete ie[n],r&&r.dispose()}I.default.onReady((function(){Object(g.shouldUseOldCanvas)()&&(Object(f.subscribe)("skiaCanvasInsert",(function(e,t){Object(E.skiaCanvasInsert)(e,t),Object(A.onBeforeUnloadPage)(t,(function(){oe(e,t)}))})),Object(f.subscribe)("skiaCanvasRemove",(function(e,t){Object(E.skiaCanvasRemove)(e,t),oe(e,t),Object(f.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(f.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(g.concatId)(t,e.canvasNumber),r=E.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})))}));var ae=function(){function e(){Object(c.default)(this,e)}return Object(u.default)(e,[{key:"width",get:function(){return this._w},set:function(e){this._w=e}},{key:"height",get:function(){return this._h},set:function(e){this._h=e}}]),e}(),se=function(){function e(){Object(c.default)(this,e),this._src=null,this._referrerPolicy=""}return Object(u.default)(e,[{key:"setSrc",value:function(e){var t=this;this._src=e,/^(http|https):\/\//.test(e)?Object(ne._downloadFileSkipCheckDomain)({url:e,success:function(e){t._src=e.tempFilePath,"function"==typeof t.onload&&t.onload()},fail:this.onerror||function(){}}):"function"==typeof this.onload&&this.onload()}},{key:"getSrc",value:function(){return this._src}},{key:"getReferrerPolicy",value:function(){return this._referrerPolicy}},{key:"setReferrerPolicy",value:function(e){this._referrerPolicy=e}}]),e}(),ce=function(){function e(){Object(c.default)(this,e)}return Object(u.default)(e,[{key:"sync",value:function(e){var t=this;this.t=setTimeout((function n(){e(),t.t=setTimeout(n,1e3/60)}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),ue={offset:Date.now(),now:function(){return Date.now()-this.offset}},le=function(){function e(t){var n=this;Object(c.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new ce,this.vSync.sync((function(){var e=new Map(n.callbacks);if(n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[ue.now()])})),n.canvasView.actions.length>0){for(var t=!0,r=n.canvasView.actions,i=0;i<r.length;i++)"clearRect"===r[i].method&&(t=!1);n.canvasView.draw(t)}}))}return Object(u.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),de=function(e){Object(r.default)(n,e);var t=re(n);function n(){return Object(c.default)(this,n),t.apply(this,arguments)}return Object(u.default)(n,[{key:"_initCanvasInstance",value:function(){return this._context=new ee(this._webviewId,this._nodeCanvasId,this._nodeId,""),this._scheduler=new le(this._context),ie[this._canvasId]=this._scheduler,new ae}},{key:"getContext",value:function(){return Object(g.pipe)(b.decorateContextForImageProxy)(this._context,this.id)}},{key:"width",get:function(){var e=E.canvasMap.get(this);return e&&e.width},set:function(e){e!==this._width&&(this._context._ignoreScale=!0);var t=E.canvasMap.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=E.canvasMap.get(this);return e&&e.height},set:function(e){e!==this._height&&(this._context._ignoreScale=!0);var t=E.canvasMap.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){var e=new se,t=Object(g.wrapImageObject)(e,E.skiaCanvasMappings[this._canvasId]);return new b.SkiaImageProxy(t)}},{key:"createImageData",value:function(){return null}},{key:"createPath2D",value:function(){return null}},{key:"requestAnimationFrame",value:function(e){return this._scheduler.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){this._scheduler.cancelAnimationFrame(e)}}]),n}(E.SkiaCanvas);function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(o.default)(e);if(t){var a=Object(o.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=function(){function e(t){var n=t.id,r=t.width,i=t.height,o=t.nodeId,a=t.pluginId;Object(c.default)(this,e),this._id=n,this._width=r,this._height=i,this._nodeId=o,this._pluginId=a}return Object(u.default)(e,[{key:"id",get:function(){return this._id}},{key:"_offscreenCanvasId",get:function(){return null}},{key:"createImage",value:function(){}},{key:"getContext",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}();function ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="object"===Object(s.default)(e)?e:{width:e,height:t,compInst:n},i=he({type:"webgl",width:1,height:1,compInst:null,pluginId:""},r),o=i.type,a=i.width,c=i.height,u=i.compInst,l=i.pluginId;switch(o){case"2d":return _e(a,c,u,l);case"webgl":return ye(a,c,u,l);default:throw new Error('unknown type "'+o+'"')}}function _e(e,t,n,r){var i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,r){var i=-1*be();return new Oe({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):p.IS_ANDROID?function(e,t,n,r){var i=-1*be();return new Se({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):p.IS_DEVTOOLS?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var i=-1*be();return new Ie({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):void 0}function ye(e,t,n,r){var i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,r){var i=-1*be();return new we({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):p.IS_ANDROID?function(e,t,n,r){var i=-1*be();return new Ee({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):p.IS_DEVTOOLS?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var i=-1*be();return new Te({id:i,width:e,height:t,nodeId:n,pluginId:r})}(e,t,i,r):void 0}var me={},be=function(){for(;;){var e=Math.floor(32767*Math.random());if(!me[e])return me[e]=!0,e}},we=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u})).__id=-h.default.currentWebviewId||r.id,Object(f.invokeMethod)("insertWebGLCanvas",{position:{top:-100,left:-100,width:1,height:1},canvasId:r.__id,keepAlive:!0,fail:function(){}});var l=Object(d.getWeixinCanvas)();return r.canvas=l.createOffscreenCanvas(r.__id,o,a),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=Object(d.getWeixinCanvas)().createImage(this.__id);return Object(g.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(ge),Oe=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u})).canvas=Object(g.shouldUseOldCanvas)()?new de(h.default.currentWebviewId,i):new v.OffscreenSkiaCanvasIOS({id:i,width:o,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}console.warn("can only create 2d context")}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(ge);var Ee=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u})).canvas=new l.default.OffscreenCanvas(o,a),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=new l.default.Image;return Object(g.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(ge),Se=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u})).canvas=Object(g.shouldUseOldCanvas)()?new de(h.default.currentWebviewId,i):new _.OffscreenSkiaCanvasAndroid({id:i,width:o,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(ge);var Te=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u});var l=document.createElement("canvas");return l.width=o,l.height=a,r.canvas=l,r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(g.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(ge),Ie=function(e){Object(r.default)(n,e);var t=fe(n);function n(e){var r,i=e.id,o=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:i,width:o,height:a,nodeId:s,pluginId:u})).canvas=new O({id:i,width:o,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(ge)},function(e,t,n){n.r(t),n.d(t,"encodeIdKey",(function(){return i})),n.d(t,"IDKEY_GROUP",(function(){return r})),n.d(t,"IDKEY",(function(){return a})),n.d(t,"SPLASHAD_IDKEY",(function(){return c})),n.d(t,"CUSTOMAD_IDKEY",(function(){return l}));var r,i=function(e,t){return{idKey:e,idKeyGroup:t}};!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(r||(r={}));var o=function(e){return i(e,r.COMMON)},a={AD_BANNER_LOAD_ERROR:o(5),AD_VIDEO_LOAD_ERROR:o(10),REWARDED_VIDEO_PARSE_ERROR:o(11),REWARDED_VIDEO_RENDER_ERROR:o(12),REWARDED_VIDEO_LOAD_ERROR:o(13),REWARDED_VIDEO_FOLLOW_SUCCESS:o(14),OPEN_URL_ERROR:o(21),OPEN_WXAPP_ERROR:o(22),OPEN_CANVAS_ERROR:o(23),ADD_CONTACT_ERROR:o(24),LAUNCH_APP_ERROR:o(25),OPEN_WEBAPPSTORE_ERROR:o(26),ADD_DOWNLOAD_TASK_ERROR:o(28),CLICK_REPORT_ERROR:o(32),EXPOSURE_REPORT_ERROR:o(33),FOLLOW_REPORT_ERROR:o(34),REWARDED_VIDEO_ANIMATE_ERROR:o(35),AD_FOLLOWED:o(37),AD_INSTALLED:o(38),AD_INTERSTITIAL_LOAD_ERROR:o(39),REWARDED_VIDEO_INSTANCE_BROKEN:o(50),PRELOAD_MINIENV_SUCCESS:o(86),PRELOAD_MINIENV_ERROR:o(87),AD_GRID_LOAD_SUCCESS:o(88),AD_GRID_LOAD_COUNT_ERROR:o(89),AD_GRID_LOAD_ERROR:o(90),PREDOWNLOAD_SUCCESS:o(96),PREDOWNLOAD_ERROR:o(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:o(105),BATCHLOAD_SUCCESS:o(112),BATCHLOAD_ERROR:o(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:o(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:o(115),BIND_GUIDE_SUCCESS:o(119),BIND_GUIDE_ERROR:o(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:o(121),RIGHTBUTTON_HIDE_ERROR:o(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:o(128),GET_DEVICEINFO_ERROR:o(129),THIRD_ERROR:o(130),GET_DEVICEINFO_SUCCESS:o(131),GET_WAID_SUCCESS:o(132),GET_WAID_ERROR:o(133),READ_ADINFOS_ERROR:o(134),AD_FETCH_SUCCESS:o(135),REWARDED_VIDEO_PRELOAD_ERROR:o(136),REWARDED_VIDEO_PRELOAD_SUCCESS:o(137),READ_ADINFOS_SUCCESS:o(138),ANALYSE_DEBUG_REPORT_ERROR:o(139),PRELOAD_CALL_ERROR:o(140),PRELOAD_LOAD_ERROR:o(141),PRELOAD_LOAD_SUCCESS:o(142),PRELOAD_USE_SUCCESS:o(143),PRELOAD_USE_ERROR:o(144),PRELOAD_DOWNLOAD_SUCCESS:o(145),PRELOAD_DOWNLOAD_ERROR:o(146),REPORT_VIDEO_FAILED:o(147),REWARD_GAUSS_EXISTS:o(148),REWARD_USE_GAUSS:o(149),REWARD_USE_EXPAND_STYLE:o(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:o(151),REWARDED_VIDEO_KEEP_ALIVE:o(152),REWARDED_VIDEO_END:o(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:o(156),OPEN_CHANNELS_ACTIVITY_FAILED:o(157),OPEN_CHANNELS_LIVE_SUCCESS:o(158),OPEN_CHANNELS_LIVE_FAILED:o(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:o(160),OPEN_CHANNELS_USER_PROFILE_FAILED:o(161),REWARD_CHANNELS_CALLBACK_SUCCESS:o(162),REWARD_CHANNELS_CALLBACK_FAILED:o(163),H5_PRELOAD_CARD_CLICKED:o(164),H5_PRELOAD_BUTTON_CLICKED:o(165),H5_PRELOAD_SUCCESS:o(166),H5_PRELOAD_FAILED:o(167),H5_PRELOAD_PLAYABLE_CLICKED:o(168)},s=function(e){return i(e,r.SPLASHAD)},c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},u=function(e){return i(e,r.CUSTOMAD)},l={LOAD_FAILED:u(1),PRELOAD_SUCCESS:u(2),PRELOAD_FAILED:u(3),PARSE_FAILED:u(4),TPL_RENDER_SUCCESS:u(5),TPL_PARSE_FAILED:u(6),TPL_LOAD_FAILED:u(7),AD_LIMIT_TIME:u(8),AD_LIMIT_BOUNDARY:u(9),RELATION_FETCH_ERROR:u(10),SHOW_FAILED1:u(11),SHOW_FAILED2:u(12),AD_VIDEO_LOAD_FAILED:u(13),FOLLOW_SUCCESS:u(14),FOLLOW_FAILED:u(15),RENDER_SUCCESS:u(16),RENDER_FAILED:u(17),REFETCH_SUCCESS:u(18),REFETCH_FAILED:u(19),LOAD_SUCCESS:u(20),WIDTH_GET_ERROR:u(21)}},function(e,t,n){n.r(t),n.d(t,"publish",(function(){return i}));var r=n(158);function i(e,t,n){var i={data:t,options:{timestamp:Date.now()}};Object(r.publish)(e,i,n)}},function(e,t,n){function r(e,t,n){__safeway__.bridge.publish(e,t,n)}n.r(t),n.d(t,"publish",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"subscribe",(function(){return i}));var r=n(160);function i(e,t){Object(r.subscribe)(e,(function(e,n){var r=e.data,i=e.options,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i&&i.timestamp||0,s=Date.now();Reporter.speedReport({key:"webview2AppService",data:r||{},timeMark:{startTime:a,endTime:s,nativeTime:o.nativeTime||0}}),"function"==typeof t&&t(r,n)}))}},function(e,t,n){function r(e,t){__safeway__.bridge.subscribe(e,t)}n.r(t),n.d(t,"subscribe",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"invoke",(function(){return i}));var r=n(126);function i(e,t,n,i){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||Object(r.getAdUxInfo)()),__safeway__.bridge.invoke(e,t,n,i)}},function(e,t,n){n.r(t),n.d(t,"onMethod",(function(){return o}));var r=n(163),i=n(33);function o(e,t){Object(r.on)(e,Object(i.surroundByTryCatchFactory)(t,"at api "+e+" callback function"))}},function(e,t,n){function r(e,t){__safeway__.bridge.on(e,t)}n.r(t),n.d(t,"on",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return f})),n.d(t,"_getLaunchOptionsSync",(function(){return p}));var r,i,o=n(0),a=n(80),s=n(94),c=n(91),u=n(1),l=n(82),d=n(11);function f(){if(!r)throw new Error("getLaunchOptionsSync:fail get launch options");var e=Object(l.getPluginId)(this)||"";return Object(s.isolateInfo)(r||{},e)}function p(){if(!i)throw new Error("getLaunchOptionsSync:fail get launch options");return i||{}}Object(o.subscribe)("getLaunchAppInfo",(function(e,t){var n=e.callbackId;Object(o.publish)("appLaunchInfoGot",{res:{sceneHistory:a.default.sceneHistory,appId:a.default.appId},callbackId:n},[t])})),u.default.onReady((function(){if(!Object(d.isGame)()){var e=u.default.appLaunchInfo||{};Object.assign(e,u.default.debugLaunchInfo||{}),a.default.appLaunchInfo=e,a.default.appLaunchShareInfo=e.shareInfo,Object(c.setInnerEnterOptions)(e),i=Object(s.filterInfo)(e,!0),r=Object(s.filterPublicInfo)(i,u.default.preloadType),i.__public=Object(s.isolateInfo)(r,""),Object(c.setEnterOptions)(r)}}))},function(e,t,n){n.r(t),n.d(t,"onDomReady",(function(){return f})),n.d(t,"onWebviewEvent",(function(){return p}));var r=n(0),i=n(6),o=n(12),a=n(2),s=n(21),c=Object(s.getEventManager)("XWebTextareaSupportedEvent"),u=!1;Object(r.subscribe)("xWebTextareaSupported",(function(e){var t=e.canInsert2XWeb;u=t,c.emit({canInsert2XWeb:t})})),(a.IS_DEVTOOLS||a.IS_WINDOWS||a.IS_MAC||a.IS_ANDROID||a.IS_MINA)&&Object(r.subscribe)("SPECIAL_PAGE_EVENT",(function(e){var t=e.data,n=e.eventName,s=e.ext,c=e.nodeId,l=e.instanceId,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((!a.IS_ANDROID||u)&&(t&&"input"===t.type&&s&&s.modelValueName&&__virtualDOM__.setModelValueData(t.detail.value,s.modelValueName,d,c),t&&"input"===t.type&&"function"==typeof o.default.webviewEventCallback)){var f=o.default.webviewEventCallback({data:t,eventName:n,webviewId:d,nodeId:c}),p=t.detail.value;if(s&&s.setKeyboardValue)if(void 0===f);else if("Object"===Object(i.getDataType)(f)){var h={};l&&(h.instanceId=l),p!==f.value&&(h.value=f.value+""),Number.isNaN(parseInt(f.cursor,10))||(h.cursor=parseInt(f.cursor,10)),Object(r.publish)("setKeyboardValue",h,[d])}else p!==f&&Object(r.publish)("setKeyboardValue",{value:f+"",cursor:-1,instanceId:l},[d])}}));var l="__DOMReady",d=Object(s.getEventManager)("DomReady"),f=d.internalOnMethod,p=function(e){o.default.webviewEventCallback=e,Object(r.subscribe)("PAGE_EVENT",(function(t){var n=t.data,r=t.eventName,i=t.nodeId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r===l&&d.emit({data:n,eventName:r,webviewId:o,nodeId:i}),e({data:n,eventName:r,webviewId:o,nodeId:i})}))}},function(e,t,n){n.r(t),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return u})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return c}));var r=n(26),i=n(0),o=n(1),a=Object(r.default)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,eventType:e.eventType}]}})),s=Object(r.default)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:e.reportType,query:e.query}]}}));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"release"!==o.default.envVersion&&s(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"!=typeof e.branchId?Object(i.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchId must be a string"):e.branchDim&&"string"!=typeof e.branchDim?Object(i.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchDim is an optional string"):1!==e.eventType&&2!==e.eventType?Object(i.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"eventType must be 1 or 2"):(a(e),c({branchId:e.branchId,branchDim:e.branchDim,reportType:e.eventType}))}},function(e,t,n){n.r(t),n.d(t,"updateWindowSizeStatus",(function(){return p})),n.d(t,"onWindowResize",(function(){return h})),n.d(t,"offWindowResize",(function(){return g}));var r=n(0),i=[],o=null,a=null,s=!1,c=[],u=!1,l="",d=0,f=0,p=function(e){e.deviceOrientation&&(l=e.deviceOrientation),d=e.size.windowWidth,f=e.size.windowHeight};Object(r.onMethod)("onViewDidResize",(function(e){!function(e){o=e;var t=!1,n=!0;e.deviceOrientation!==l&&(t=!0),e.size.windowWidth!==d&&(t=!0),e.size.windowHeight!==f&&(t=!0),p(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(u=!0),"auto"===e.pageOrientation.originalPageOrientation||u||(t=!1,n=!1)),"undefined"!=typeof __appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(n=!1),t&&(s=!0);var r=e.changedWebviewIds;n&&r&&r.forEach((function(e){c.indexOf(e)<0&&c.push(e)})),a||(a=setTimeout((function(){a=null;var e=s;s=!1;var t=c;c=[];var n={deviceOrientation:o.deviceOrientation,size:o.size};e&&i.forEach((function(e){__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((function(e){var t="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((function(){t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))}(e)}));var h=function(e){i.push(e)},g=function(e){i.splice(i.indexOf(e),1)}},function(e,t,n){n.r(t),n.d(t,"onUserCaptureScreen",(function(){return u})),n.d(t,"offUserCaptureScreen",(function(){return l})),n.d(t,"_onUserCaptureScreen",(function(){return a})),n.d(t,"_offUserCaptureScreen",(function(){return s}));var r=n(0),i=n(21),o=Object(i.getEventManager)("userCaptureScreen"),a=o.onMethod,s=o.offMethod,c=null;Object(r.onMethod)("onUserCaptureScreen",(function(e){"function"==typeof c&&c(e),o.emit(e)}));var u=function(e){c=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},l=function(){c=null}},function(e,t,n){n.r(t),n.d(t,"nativeFontAssets",(function(){return m})),n.d(t,"loadFontFace",(function(){return E})),n.d(t,"fontFaceRecords",(function(){return f}));var r=n(20),i=n(21),o=n(40),a=n(0),s=n(12),c=n(181),u=n(59);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=[],p=new Map,h=0,g=/url\((.*)\)/i,v=/([^.]*)(\..*)?/i;Object(a.subscribe)("loadedFontFace",(function(e){var t=e.callbackId,n=e.errMsg,r=void 0===n?"":n;if(p.has(t)){var i=p.get(t);p.delete(t);var o=i.success,a=i.fail,s=i.complete,c=0===r.indexOf("loadFontFace:ok"),u={status:c?"loaded":"error",errMsg:r};c?"function"==typeof o&&o(u):"function"==typeof a&&a(u),"function"==typeof s&&s(u)}}));var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h++;var t=e.success,n=e.fail,r=e.complete;delete e.success,delete e.fail,delete e.complete,e.callbackId=h,p.set(h,{success:t,fail:n,complete:r});var i=e.global||!1;if(i){var o=encodeURIComponent(JSON.stringify(e));f.indexOf(o)<0&&f.push(o),Object(a.publish)("loadFontFace",e)}else Object(a.publish)("loadFontFace",e,[s.default.currentWebviewId])},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){_(d(d({},e),{},{success:function(e){t(e)},fail:function(e){n(e)}}))}))},m=[],b=Object(i.getEventManager)("skiaCanvasLoadFontFace");function w(e){m.push(e),b.emit({nativeFontAssets:m})}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=e.source.match(g);return n.length>=2&&(t=(t=n[1]).substring(1,t.length-1)),new Promise((function(n,r){Object(u._downloadFileSkipCheckDomain)({url:t,timeout:2e4,success:function(t){w({originalSrc:e.source,src:t.tempFilePath,family:e.family,style:e.desc&&e.desc.style,weight:e.desc&&e.desc.weight,variant:e.desc&&e.desc.variant});var r=(t.tempFilePath||"").replace(v,(function(){return arguments.length<=1?void 0:arguments[1]}));o.FakeTempFilePathMap.set(r),n()},fail:function(){r()}})}))},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("loadFontFace",e,{family:"",source:""})){var t="";if(""===e.family&&(t="parameter error: family can not be empty string"),""===e.source&&(t="parameter error: source can not be empty string"),t)Object(a.beforeInvokeFail)("loadFontFace",e,t);else{g.test(e.source)||(e.source='url("'+e.source+'")'),e.scopes||(e.scopes=["webview"]),Object(c.reportApiUse)({name:"loadFontFace",data:{family:e.family,source:encodeURIComponent(e.source),global:Boolean(e.global),scopes:e.scopes}});var n=[];if(e.scopes.indexOf("webview")>=0){var r=y(e);n.push(r)}if(e.scopes.indexOf("native")>=0){var i=O(e);n.push(i)}Promise.all(n).then((function(){Object(a.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!0,errMsg:"",res:{status:"loaded"}})})).catch((function(){Object(a.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!1,errMsg:"",res:{status:"error"}})}))}}}},function(e,t,n){n.r(t),n.d(t,"setTopBarText",(function(){return o}));var r=n(0),i=0,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.text?Date.now()-i<5e3?Object(r.beforeInvokeFail)("setTopBarText",e,"invoke too frequently"):Object(r.invokeMethod)("setTopBarText",e,{beforeSuccess:function(){i=Date.now()}}):Object(r.beforeInvokeFail)("setTopBarText",e,"invalid text")}},function(e,t,n){n.r(t),n.d(t,"getMenuButtonBoundingClientRect",(function(){return o}));var r=n(0),i=n(6),o=function(){var e,t={};if(Object(r.invokeMethod)("getMenuButtonBoundingClientRect",{success:function(e){Object.assign(t,e),delete t.errMsg},fail:function(t){e=t.errMsg}}),e)throw new i.ThirdScriptError(e);return t}},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return c})),n.d(t,"omit",(function(){return u})),n.d(t,"isObject",(function(){return l})),n.d(t,"mergeDeep",(function(){return d})),n.d(t,"getMembers",(function(){return f})),n.d(t,"get",(function(){return p})),n.d(t,"flatten",(function(){return h})),n.d(t,"cloneDeep",(function(){return g}));var r=n(29),i=n(20),o=n(17);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},u=function(e,t){return c(e,Object.keys(e).filter((function(e){return!t.includes(e)})))},l=function(e){return e&&"object"===Object(o.default)(e)&&!Array.isArray(e)};function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();if(l(e)&&l(o))for(var a=0,s=Object.keys(o);a<s.length;a++){var c=s[a];l(o[c])?(e[c]||Object.assign(e,Object(i.default)({},c,{})),d(e[c],o[c])):Object.assign(e,Object(i.default)({},c,o[c]))}return d.apply(void 0,[e].concat(n))}var f=function(e){for(var t=new Set,n=e;n;){var i,o=a(Object.getOwnPropertyNames(n));try{for(o.s();!(i=o.n()).done;){var s=i.value;t.add(s)}}catch(e){o.e(e)}finally{o.f()}n=Object.getPrototypeOf(n)}return Object(r.default)(t)},p=function(e,t,n){for(var r="string"==typeof t?t.split("."):t,i=e,o=0;i&&o<r.length;)i=i[r[o]],o+=1;return i||n},h=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?t.push.apply(t,Object(r.default)(e(n))):t.push(n),t}),[])},g=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){function r(e){if(Array.isArray(e))return e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"getFileInfo",(function(){return o}));var r=n(0),i=n(10),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){var t=Object(i.paramCheck)(e,{digestAlgorithm:""});if(t)return void Object(r.beforeInvokeFail)("getFileInfo",e,"parameter error: "+t);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void Object(r.beforeInvokeFail)("getFileInfo",e,'parameter error: invalid digestAlgorithm "'+e.digestAlgorithm+'"')}Object(r.invokeMethod)("getFileInfo",e,{})}}},function(e,t,n){n.r(t),n.d(t,"WxPromise",(function(){return o}));var r=n(4),i=n(5),o=function(){function e(t){var n=this;if(Object(r.default)(this,e),this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof t)throw new TypeError("Promise resolver is not a function");try{t((function(e){"pending"===n._status&&(n._status="then",n._return=e,n._consume())}),(function(e){"pending"===n._status&&(n._status="catch",n._return=e,n._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}return Object(i.default)(e,[{key:"_consume",value:function(){if("pending"!==this._status){var e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}}},{key:"then",value:function(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}},{key:"catch",value:function(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}}],[{key:"resolve",value:function(t){return new e((function(e){return e(t)}))}},{key:"reject",value:function(t){return new e((function(){throw t}))}}]),e}()},function(e,t,n){n.r(t),n.d(t,"checkNetworkAPIURL",(function(){return o}));var r=n(0),i=n(11),o=function(e){var t=e.api,n=e.url;return Object(i.skipURLCheck)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!1}):new Promise((function(e,i){Object(r.invokeMethod)("checkNetworkAPIURL",{api:t,url:n,success:e,fail:i})}))}},function(e,t,n){n.r(t),n.d(t,"handleRewriteRoute",(function(){return v})),n.d(t,"handlePluginProtocol",(function(){return g})),n.d(t,"onAppRoutePageNotFound",(function(){return u})),n.d(t,"offAppRoutePageNotFound",(function(){return l})),n.d(t,"emitAppRoutePageNotFound",(function(){return d}));var r=n(142),i=n(21),o=n(6),a=n(57),s=Object.hasOwnProperty,c=Object(i.getEventManager)("AppRouteNotFound"),u=c.onMethod,l=c.offMethod,d=c.emit,f=function(e,t){a.nativeConsole.info("[rewriteRoute] (webviewId="+t+") "+e)},p={},h=function(e,t){var n=0;if(s.call(e,"originalWebviewId"))n=e.originalWebviewId,f("Found originalWebviewId="+n,t);else{if(1!==Object.keys(p).length)return f("No originalWebviewId found and we have "+Object.keys(p).length+" backup data, guess failed, cleaning backups and giving up",t),p={},e;n=Object.keys(p)[0],f("No originalWebviewId found and guess it="+n,t)}var r=p[n];return delete p[n],["openType","wxMaterial","location","prerender"].forEach((function(t){e[t]=r[t]})),e},g=function(e,t){var n=t.needHtmlSuffix,r=e.replace(/\.html(\?|$)/i,(function(e){return e.slice(5)})),i=Object(o.convertProtocolPath)(r);if("/"===i[0]&&(i=i.slice(1)),!n)return i;var a=i.indexOf("?");return a<0&&(a=i.length),i.slice(0,a)+".html"+i.slice(a)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=h(e,t)),!e.notFound)return!1;for(var n=!1,i=e.rawPath;/^[-_+a-z]+:\/\//i.test(i);){f(i+" has protocol, try rewriting",t);try{i=g(i,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),Object(r.invokeMethod)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(p[t]=e,f('rewriteRoute from "'+e.rawPath+'" to "'+i+'"',t),Object(r.invokeMethod)("rewriteRoute",{url:i,webviewId:t}),!0):(d(e,t),!1)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return I})),n.d(t,"getWorkerId",(function(){return A}));var r=n(4),i=n(5),o=n(29),a=n(135),s=n(136),c=n(1),u=n(81),l=n(0),d=new WeakMap,f=new WeakMap,p=new WeakMap,h={},g={},v={},_=new WeakMap,y=new WeakMap,m=0,b={};function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++m;return v[e]?(b[e]||(b[e]=[]),b[e].push({id:n,callback:t})):(v[e]=n,t()),n}function O(e,t){if(v[e]===t&&(delete v[e],b[e]&&b[e].length)){var n=b[e].shift(),r=n.id;w(e,n.callback,r)}}if(!s.wxSAB.new){var E=0;Object.assign(s.wxSAB,{new:function(e){var t=++E;return g[t]=e,Object.keys(h).forEach((function(n){var r=d.get(h[n]);__safeway__.worker.postMsgToWorker(r,{__cmd__:"setSharedBuffer",__buffer__:e,__id__:t},!1)})),t},get:function(e){return g[e]},destroy:function(e){delete g[e]},Lock:w,Unlock:O})}__safeway__.worker.onWorkerMsg((function(e,t){var n=h[e],r=f.get(n),i=y.get(n);if(t.__log__&&t.logs)(a=t).__isNativeConsole__?(c=wxNativeConsole)[a.level].apply(c,Object(o.default)(a.logs)):(l=console)[a.level].apply(l,Object(o.default)(a.logs));else{var a,c,l;if("setSharedBuffer"===t.__cmd__)return g[t.__id__]=t.__buffer__,void Object.keys(h).forEach((function(n){var r=d.get(h[n]);r!==e&&__safeway__.worker.postMsgToWorker(r,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof r)if(i&&i.useWKWorker){if("requireScriptSuccess"===t.__cmd__){var p=_.get(n);return void(p&&p.evaluateWorkerScriptPromiseResolve&&p.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void u._fs.readFile({filePath:t.filePath,success:function(n){var r=n.data;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode.apply(String,Object(o.default)(new Uint16Array(r)))})},fail:function(n){var r=n.errMsg;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:r})}});r(t.data)}else r(Object(s.unpackSharedArrayBuffer)(t))}else O(t.__sid__,t.__lid__);else w(t.__sid__,(function(){return n.postMessage(t)}),t.__lid__)}}));var S=function(e){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:d.get(this)})},T=function(){var e,t=new Promise((function(t){e=t}));_.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})},I=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{useWKWorker:!1};Object(r.default)(this,e),d.set(this,t),y.set(this,i),h[t]=this,this._id=t,i.useWKWorker?T.call(this):S.call(this,n),a.default.add(this)}return Object(i.default)(e,[{key:"postMessage",value:function(e){var t=d.get(this),n=_.get(this),r=y.get(this);r&&r.useWKWorker&&n?n.evaluateWorkerScriptPromise.then((function(){__safeway__.worker.postMsgToWorker(t,{data:e,appid:c.default.accountInfo.appId})})):__safeway__.worker.postMsgToWorker(t,e)}},{key:"onMessage",value:function(e){f.set(this,e)}},{key:"terminate",value:function(){var e=d.get(this),t=y.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:c.default.accountInfo.appId}):__safeway__.worker.terminate(e),a.default.remove(this),d.delete(this),f.delete(this),_.delete(this),p.delete(this),y.delete(this),delete h[e]}},{key:"onProcessKilled",value:function(e){p.set(this,e)}}]),e}();Object(l.onMethod)("onWorkerWebViewTerminate",(function(){Object.keys(h).forEach((function(e){var t=h[e],n=y.get(t);if(n&&n.useWKWorker){var r=p.get(t);a.default.remove(t),d.delete(t),f.delete(t),_.delete(t),p.delete(t),y.delete(t),delete h[e],"function"==typeof r&&__errorTracer__.surroundThirdByTryCatch(r,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));var A=function(e){if(e._id>=0&&h[e._id])return e._id}},function(e,t,n){n.r(t),n.d(t,"reportApiUse",(function(){return u})),n.d(t,"WHITELIST",(function(){return c}));var r=n(1),i=n(36),o=0,a={};r.default.onReady((function(){o=r.default.appType,a=r.default.appLaunchInfo}));var s=function(e,t){var n=[];return t.forEach((function(t){var r=e[t];"boolean"==typeof r&&(r=r?1:0),n.push(t+":"+r)})),n.join("|")},c=["getAccountInfoSync","getLaunchOptionsSync","arrayBufferToBase64","base64ToArrayBuffer","getExtConfig","getExtConfigSync","canIUse","setPageStyle","onError","offError"],u=function(e){var t=e.name,n=e.data,r="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],c=r.length>0&&r[r.length-1].__route__||"",u=Object(i._getCurrentNetworkType)(),l=wx&&wx.version&&wx.version.version||"",d="";switch(t){case"loadFontFace":d=s(n,["family","source","global","scopes"]);break;case"requestSubscribeMessage":d=s(n,["templateCount","templateType","operationType"])}var f=[Math.round(Date.now()/1e3),a.scene,a.sessionid||a.sessionId,c,u,l,t,d,o,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:f,immediately:!0})}},function(e,t,n){n.r(t),n.d(t,"CanvasInterface",(function(){return o}));var r=n(4),i=n(5),o=function(){function e(){Object(r.default)(this,e)}return Object(i.default)(e,[{key:"_init",value:function(){}},{key:"_onReady",value:function(){}},{key:"_initCanvasInstance",value:function(){}},{key:"getContext",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}()},function(e,t,n){n.r(t),n.d(t,"getUserCloudStorage",(function(){return s}));var r=n(101),i=n(26),o=n(0),a=Object(i.default)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e})),s=function(e){var t=Object(r.checkKeyList)(e.keyList);t?Object(o.beforeInvokeFail)("getUserCloudStorage",e,t):a(e)}},function(e,t,n){n.r(t),n.d(t,"getFriendCloudStorage",(function(){return s}));var r=n(0),i=n(101),o=n(26),a=Object(o.default)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(i.checkKeyList)(e.keyList);t?Object(r.beforeInvokeFail)("getFriendCloudStorage",e,t):a(e)}},function(e,t,n){n.r(t),n.d(t,"getGroupCloudStorage",(function(){return l}));var r=n(41),i=n(0),o=n(101),a=n(26),s=r.share.ShareInfoStorage,c=wxNativeConsole.createLogger("getGroupCloudStorage"),u=Object(a.default)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(function(e){var t=e.keyList,n=void 0===t?[]:t,r=e.shareTicket,i=s.get(r),o=i.shareKey,a=i.shareName;return c.info("shareTicket=",r),c.info("shareInfo=",JSON.stringify(i)),{key:n,share_key:o,share_name:a}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),l=function(e){var t=Object(o.checkKeyList)(e.keyList);t?Object(i.beforeInvokeFail)("getGroupCloudStorage",e,t):setTimeout((function(){e.shareTicket?s.get(e.shareTicket)?(c.info("use args.shareTicket",e.shareTicket),u(e)):Object(i.beforeInvokeFail)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):s.lastShareTicket&&s.get(s.lastShareTicket)?(c.info("use lastShareTicket",s.lastShareTicket),u(Object.assign({shareTicket:s.lastShareTicket},e))):Object(i.beforeInvokeFail)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)}},function(e,t,n){n.r(t),n.d(t,"getPotentialFriendList",(function(){return i}));var r=n(26),i=Object(r.default)("getPotentialFriendList","webapi_game_potential_friends",{},{},(function(){}),(function(e){return e.list=e.friend_list,delete e.friend_list,delete e.rawData,e}))},function(e,t,n){n.r(t),n.d(t,"getGroupInfo",(function(){return a}));var r=n(0),i=n(26),o=Object(i.default)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(function(e){return{opengid_list:[e.openGId]}}),(function(e){return e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e}));function a(e){setTimeout((function(){o(Object.assign({},e,{success:function(t){return Object(r.beforeInvokeCallback)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}}))}))}},function(e,t,n){n.r(t),n.d(t,"appGetGroupMsgTicket",(function(){return s})),n.d(t,"gameGetGroupMsgTicket",(function(){return c}));var r=n(0),i=n(12),o=n(2),a=function(e){Object(r.baseOperateWXData)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success:function(t){o.IS_ANDROID&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));var n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,Object(r.beforeInvokeCallback)({name:"getGroupMsgTicket",args:e,res:t})):Object(r.beforeInvokeFail)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail:function(t){Object(r.beforeInvokeFail)("getGroupMsgTicket",e,t.errMsg,-1)}}))},s=function(e){if(i.default.lastShareInfo){var t=i.default.lastShareInfo.query?"?"+Object.keys(i.default.lastShareInfo.query).map((function(e){return e+"="+i.default.lastShareInfo.query[e]})).join("&"):"",n=i.default.lastShareInfo.shareInfo.shareKey,o=""+i.default.lastShareInfo.path+t;a(Object.assign({},e,{shareKey:n,path:o}))}else Object(r.beforeInvokeFail)("getGroupMsgTicket",e,"不是从群分享进入",1)},c=function(e){a(e)}},function(e,t,n){n.r(t),n.d(t,"getMMDataProto",(function(){return i}));var r={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}]},i=function(e){var t=r[e.toString()];return t?t.concat([]):[]}},function(e,t,n){n.r(t),n.d(t,"setMessageToFriendQuery",(function(){return i})),n.d(t,"getMessageToFriendQuery",(function(){return o}));var r={};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareMessageToFriendScene;return"number"==typeof t&&(t>=0&&t<=50&&(r={shareMessageToFriendScene:t},!0))}function o(){return Object.keys(r).map((function(e){return e+"="+r[e]})).join("&")}},function(e,t,n){n.r(t),n.d(t,"getUserCloudStorageKeys",(function(){return i}));var r=n(26),i=Object(r.default)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(function(){}),(function(e){return e.keys=e.data_key,delete e.data_key,delete e.rawData,e}))},function(e,t,n){n.r(t),n.d(t,"interaction",(function(){return s})),n.d(t,"navigationBar",(function(){return r})),n.d(t,"topBar",(function(){return P})),n.d(t,"tabBar",(function(){return a})),n.d(t,"route",(function(){return i})),n.d(t,"event",(function(){return o})),n.d(t,"pageScrollTo",(function(){return we})),n.d(t,"startPullDownRefresh",(function(){return Oe})),n.d(t,"stopPullDownRefresh",(function(){return Ee})),n.d(t,"setPageStyle",(function(){return Ae})),n.d(t,"hideKeyboard",(function(){return Pe})),n.d(t,"onKeyboardHeightChange",(function(){return De})),n.d(t,"offKeyboardHeightChange",(function(){return Re})),n.d(t,"createAnimation",(function(){return Ne})),n.d(t,"updateWindowSizeStatus",(function(){return Me.updateWindowSizeStatus})),n.d(t,"onWindowResize",(function(){return Me.onWindowResize})),n.d(t,"offWindowResize",(function(){return Me.offWindowResize})),n.d(t,"setPageOrientation",(function(){return Le})),n.d(t,"setBackgroundColor",(function(){return Fe})),n.d(t,"setBackgroundTextStyle",(function(){return Ue})),n.d(t,"enableAlertBeforeUnload",(function(){return Ve})),n.d(t,"disableAlertBeforeUnload",(function(){return Ge})),n.d(t,"getMenuButtonBoundingClientRect",(function(){return He.getMenuButtonBoundingClientRect})),n.d(t,"getSelectedTextRange",(function(){return Ke})),n.d(t,"setNavigateBackInterception",(function(){return Je.setNavigateBackInterception})),n.d(t,"stopNavigateBackInterception",(function(){return Je.stopNavigateBackInterception}));var r={};n.r(r),n.d(r,"setNavigationBarTitle",(function(){return v})),n.d(r,"showNavigationBarLoading",(function(){return _})),n.d(r,"hideNavigationBarLoading",(function(){return y})),n.d(r,"_onNavigationBarTitleUpdate",(function(){return g})),n.d(r,"setNavigationBarAlpha",(function(){return T})),n.d(r,"setNavigationBarColor",(function(){return S})),n.d(r,"_getNavigationBarColor",(function(){return I})),n.d(r,"setNavigationBarRightButton",(function(){return A})),n.d(r,"onTapNavigationBarRightButton",(function(){return C})),n.d(r,"hideHomeButton",(function(){return x}));var i={};n.r(i),n.d(i,"navigateToWithRelatedInfo",(function(){return $})),n.d(i,"navigateTo",(function(){return X})),n.d(i,"redirectTo",(function(){return K})),n.d(i,"switchTab",(function(){return Z})),n.d(i,"navigateBack",(function(){return Q})),n.d(i,"reLaunch",(function(){return J})),n.d(i,"createRouter",(function(){return ee})),n.d(i,"onPageReload",(function(){return ne})),n.d(i,"_triggerBeforeUnloadPage",(function(){return re})),n.d(i,"_triggerBeforeShareAppMessage",(function(){return ie}));var o={};n.r(o),n.d(o,"onDomReady",(function(){return oe.onDomReady})),n.d(o,"onWebviewEvent",(function(){return oe.onWebviewEvent})),n.d(o,"onNativeEvent",(function(){return ae}));var a={};n.r(a),n.d(a,"setTabBarBadge",(function(){return ce})),n.d(a,"removeTabBarBadge",(function(){return ue})),n.d(a,"showTabBarRedDot",(function(){return le})),n.d(a,"hideTabBarRedDot",(function(){return de})),n.d(a,"showTabBar",(function(){return pe})),n.d(a,"hideTabBar",(function(){return he})),n.d(a,"setTabBarStyle",(function(){return ve})),n.d(a,"setTabBarItem",(function(){return ye})),n.d(a,"_isTabBar",(function(){return ge}));var s=n(23),c=n(20),u=n(0),l=n(21),d=n(12);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){Object(c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(l.getEventManager)("NavigationBarTitleUpdate"),g=h.internalOnMethod,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.beforeInvoke)("setNavigationBarTitle",e,{title:""})&&(d.default.navigationBarTitleMap[d.default.lastRoute]=e.title,d.default.lastRoute,e.title,Object(u.invokeMethod)("setNavigationBarTitle",e,{beforeAll:function(t){h.emitInternal(p({title:e.title},t))}}))},_=function(e){Object(u.invokeMethod)("showNavigationBarLoading",e)},y=function(e){Object(u.invokeMethod)("hideNavigationBarLoading",e)},m=n(56),b=n(1),w="#000000",O="#ffffff";function E(e){var t=(b.default.appContactInfo||{}).operationInfo||{};if(t.jsonInfo&&t.jsonInfo.op_info&&1===Number(t.jsonInfo.op_info.gray_flag)&&0===b.default.appType){var n=/^#([0-9|A-F|a-f]{6})$/.exec(e);if(null!=n){var r=parseInt(n[1].slice(0,2),16),i=parseInt(n[1].slice(2,4),16),o=parseInt(n[1].slice(4),16),a=Math.round(.299*r+.587*i+.114*o).toString(16).toUpperCase();Object(u.invokeMethod)("setNavigationBarColor",{frontColor:O,backgroundColor:"#"+a+a+a})}}}b.default.onReady((function(){Object(m.onAppRoute)((function(){if(void 0!==b.default&&b.default.global&&b.default.global.window){var e=b.default.global.window;w=e.navigationBarBackgroundColor||w,O="black"===e.navigationBarTextStyle?"#000000":"#ffffff"}var t=d.default.lastRoute+".html";if(void 0!==b.default&&b.default.page&&b.default.page[t]&&b.default.page[t].window){var n=b.default.page[t].window;w=n.navigationBarBackgroundColor||w,O="black"===n.navigationBarTextStyle?"#000000":"#ffffff"}E(w)}))}));var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setNavigationBarColor",e,{frontColor:"",backgroundColor:""}))if(-1!==["#ffffff","#000000"].indexOf(e.frontColor)){"#ffffff"===e.frontColor?Object(u.invokeMethod)("setStatusBarStyle",{color:"white"}):"#000000"===e.frontColor&&Object(u.invokeMethod)("setStatusBarStyle",{color:"black"});var t=Object.assign({},e);w=e.backgroundColor,O=e.frontColor,Object(u.invokeMethod)("setNavigationBarColor",t),E(w)}else Object(u.beforeInvokeFail)("setNavigationBarColor",e,'invalid frontColor "'+e.frontColor+'"')},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.backgroundColor=w,Object(u.invokeMethod)("setNavigationBarColor",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setNavigationBarColor","setNavigationBarAlpha")}})},I=function(){return{backgroundColor:w,frontColor:O}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.beforeInvoke)("setNavigationBarRightButton",e,{hide:!0})&&Object(u.invokeMethod)("setNavigationBarRightButton",e,{})},C=function(e){Object(u.onMethod)("onCustomRightButtonClick",__errorTracer__.surroundThirdByTryCatch(e,"at onTapNavigationBarRightButton callback function"))},k=n(2),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(k.IS_ANDROID&&b.default.clientVersion<654313216||k.IS_IOS&&b.default.clientVersion<385877760){var t={errMsg:"hideHomeButton:ok"};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}else Object(u.invokeMethod)("hideHomeButton",e,{})},P=n(170),D=n(31),R=n(6),j=n(58),N=n(97),M=n(11),L=n(29),B=n(4),F=n(5);function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var V={},G=function(){function e(){Object(B.default)(this,e),this.listener={},this.emitCache={}}return Object(F.default)(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!this.listener[e])return this.emitCache[e]||(this.emitCache[e]=[]),void this.emitCache[e].push(r);var o=function(){var n,i=U(t.listener[e]);try{for(i.s();!(n=i.n()).done;){var o,a=n.value;(o=a.fn).call.apply(o,[a.fn].concat(r))}}catch(e){i.e(e)}finally{i.f()}t.listener[e]=t.listener[e].filter((function(e){return"once"!==e.type}))};o.call(this)}},{key:"_clearCache",value:function(e){if(this.emitCache[e])for(;this.emitCache[e].length>0;)this.emit.apply(this,[e].concat(Object(L.default)(this.emitCache[e].shift())))}},{key:"on",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at on "+e+" callback function");this._addListener(e,"on",n),this._clearCache(e)}},{key:"once",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at once "+e+" callback function");this._addListener(e,"once",n),this._clearCache(e)}},{key:"off",value:function(e,t){if(this.listener[e])if(t){var n=t.toString();for(var r in this.listener[e])for(var i=0;!(i>=this.listener[e].length);)n===this.listener[e][i].fn.toString()&&(this.listener[e].splice(i,1),i--),i++}else this.listener[e]=[],delete this.listener[e]}},{key:"_addListener",value:function(e,t,n){this.listener[e]||(this.listener[e]=[]),this.listener[e].push({fn:n,type:t})}}]),e}();var H=Object(l.getEventManager)("AppPerfRouteNavigation");function z(e,t,n){var r=void 0===n._relativePath?d.default.lastRoute:n._relativePath;return!Object(R.routesHaveSameDomain)(r,t)||/^__wx__\//.test(t)||Object(D.checkUrlInConfig)(e,t,n)}function Y(e,t,n){var r=void 0===t._relativePath?d.default.lastRoute:t._relativePath;try{return Object(R.getRealRouteWithProtocol)(r,t.url,!n)}catch(i){if(!(i instanceof R.AppServiceSdkKnownError))throw i;if(!n){if(!Object(R.routesHaveSameDomain)(r,t.url))return t.url;Object(u.beforeInvokeFail)(e,t,i.message)}}return""}function q(e,t){var n=Y(e,t,!0);if(!n)return!0;var r=Object(N.getBanRuleIndexByPath)(n),i=N.ReportCheckScene[Object(M.transformToUnderScoreCaseVar)(e).toUpperCase()],o=!0,a="",s=N.ReportBlockStatus.OK;if(r>-1){var c=N.ruleList[r];(a=c.redirect_url)&&1===c.is_valid?(Object(u.beforeInvokeFail)(e,t,"url has been banned"),Object(j.invokeWebviewMethod)("openUrl",{url:a}),s=N.ReportBlockStatus.BLOCK,o=!1):a&&1!==c.is_valid&&(s=N.ReportBlockStatus.NO_BLOCK)}return Object(N.reportAPIBanForPage)(e,s,i,a,n),o}var K=function(e){if(Object(u.beforeInvoke)("redirectTo",e,{url:""})&&q("redirectTo",e)){var t=Y("redirectTo",e,!1);t&&(e.url=t,e.url=Object(R.encodeUrlQuery)(e.url),z("redirectTo",e.url,e)&&(d.default.navigatorLock=!0,Object(u.invokeMethod)("redirectTo",e,{afterFail:function(){d.default.navigatorLock=!1}}),H.emit({type:"redirectTo",start:Date.now()})))}},J=function(e){if("active"===d.default.runningStatus||"ios"!==k.PLATFORM){if(Object(u.beforeInvoke)("reLaunch",e,{url:""})&&q("reLaunch",e)){var t=Y("reLaunch",e,!1);t&&(e.url=t,e.url=Object(R.encodeUrlQuery)(e.url),z("reLaunch",e.url,e)&&(d.default.navigatorLock=!0,Object(u.invokeMethod)("reLaunch",e,{afterFail:function(){d.default.navigatorLock=!1}}),H.emit({type:"reLaunch",start:Date.now()})))}}else Object(u.beforeInvokeFail)("reLaunch",e,"can not invoke reLaunch in background")},X=function(e){if(Object(u.beforeInvoke)("navigateTo",e,{url:""})&&q("navigateTo",e)){var t=Y("navigateTo",e,!1);if(t&&(e.url=t,e.url=Object(R.encodeUrlQuery)(e.url),z("navigateTo",e.url,e))){var n=function(){for(var e=new G,t=new G,n={},r=["listener","emit","on","once","off","_addListener"],i=0,o=r;i<o.length;i++){var a=o[i];"emit"===a?n[a]=t[a].bind(t):"function"==typeof e[a]?n[a]=e[a].bind(e):n[a]=e[a]}for(var s=0,c=r;s<c.length;s++){var u=c[s];"emit"===u?V[u]=e[u].bind(e):"function"==typeof t[u]?V[u]=t[u].bind(t):V[u]=t[u]}return n}();if(e.events)for(var r in e.events)n.on(r,e.events[r]);d.default.navigatorLock=!0,Object(u.invokeMethod)("navigateTo",e,{afterFail:function(){d.default.navigatorLock=!1},beforeSuccess:function(e){e.eventChannel=n}}),H.emit({type:"navigateTo",start:Date.now()})}}},$=function(e){__appServiceEngine__.DisplayReporter.setEventRelatedInfo(e._relatedInfo),X(e)},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("switchTab",e,{url:""})&&(/\?.*$/.test(e.url)&&(console.warn("wx.switchTab: url 不支持 queryString"),e.url=e.url.replace(/\?.*$/,"")),q("switchTab",e))){var t=Y("switchTab",e,!1);t&&(e.url=t,e.url=Object(R.encodeUrlQuery)(e.url),z("switchTab",e.url,e)&&(d.default.navigatorLock=!0,Object(u.invokeMethod)("switchTab",e,{afterFail:function(){d.default.navigatorLock=!1}}),H.emit({type:"switchTab",start:Date.now()})))}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e=Object.assign({},e))._webviewId;if(void 0!==t){e.delta=void 0;var n=__appServiceEngine__.getPageMetaByWebviewId(t);if(n){var r=n.framesetViewId;e.viewId=r}}if("number"!=typeof e.delta?e.delta=1:(e.delta=parseInt(e.delta,10),e.delta<1&&(e.delta=1)),"function"==typeof __appServiceEngine__.getCurrentPagesByDomain){var i=__appServiceEngine__.getCurrentPagesByDomain("");if(i.length<=1)return void Object(u.beforeInvokeFail)("navigateBack",e,"cannot navigate back at first page.")}Object(u.invokeMethod)("navigateBack",e),H.emit({type:"navigateBack",start:Date.now()})},ee=function(e,t){var n={_relativePath:e,_webviewId:t};return{navigateTo:function(e){X(Object.assign({},e,n))},redirectTo:function(e){K(Object.assign({},e,n))},switchTab:function(e){Z(Object.assign({},e,n))},navigateBack:function(e){Q(Object.assign({},e,n))},reLaunch:function(e){J(Object.assign({},e,n))}}},te=n(69),ne=te.onPageReload,re=te.triggerBeforeUnloadPage,ie=te.triggerBeforeShareAppMessage,oe=n(165),ae=function(e){["onCanvasTouchStart","onCanvasTouchMove","onCanvasTouchEnd"].forEach((function(t){Object(u.onMethod)(t,(function(n,r){e({data:n,eventName:t,webviewId:r})}))}))},se=n(79),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0,text:""})){var t=Object.assign({},e);t.badgeValue=t.text,t.type="text",n(t.badgeValue)>4&&(t.badgeValue="..."),Object(u.invokeMethod)("setTabBarBadge",t)}function n(e){return null==e?0:("string"!=typeof e&&(e+=""),e.replace(/[^\x00-\xff]/g,"01").length)}},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","removeTabBarBadge")}})}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="redDot",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","showTabBarRedDot")}})}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","hideTabBarRedDot")}})}},fe=!1;Object(m.onAppRoute)((function(e){try{fe=b.default.tabBar.list.some((function(t){return t.pagePath.startsWith(e.path)}))}catch(e){}}));var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),Object(u.beforeInvoke)("showTabBar",e,{animation:!0})&&Object(u.invokeMethod)("showTabBar",e,{beforeSuccess:function(){return fe=!0}})},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),Object(u.beforeInvoke)("hideTabBar",e,{animation:!0})&&Object(u.invokeMethod)("hideTabBar",e,{beforeSuccess:function(){return fe=!1}})},ge=function(){return fe},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.invokeMethod)("setTabBarStyle",e)},_e=null;b.default.onReady((function(){_e=b.default.tabBar&&b.default.tabBar.list||[]}));var ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarItem",e,{index:0}))if(0!==(e.iconPath||"").indexOf("."))if(0!==(e.selectedIconPath||"").indexOf(".")){try{Object(se.hasOwnProperty)(e,"text")||(e.text=_e[e.index].text||""),_e[e.index].text=e.text}catch(e){e.message}Object(u.invokeMethod)("setTabBarItem",e)}else Object(u.beforeInvokeFail)("setTabBarItem",e,"selectedIconPath invalid, require absolute path");else Object(u.beforeInvokeFail)("setTabBarItem",e,"iconPath invalid, require absolute path")},me=1,be={};Object(u.subscribe)("pageScrollDone",(function(e){if(!(e.callbackId<0||void 0===be[e.callbackId])){var t=be[e.callbackId];delete be[e.callbackId],delete e.callbackId;var n="pageScrollTo";e.errMsg=e.errMsg||"scrollWebviewTo:ok",e.errMsg=e.errMsg.replace("scrollWebviewTo",n);var r=0===e.errMsg.indexOf(n+":ok"),i=0===e.errMsg.indexOf(n+":fail");r?"function"==typeof t.success&&t.success(e):i&&"function"==typeof t.fail&&t.success(e),"function"==typeof t.complete&&t.complete(e)}}));var we=function(e){var t=__appServiceEngine__.getCurrentPagesByDomain(""),n=t[t.length-1].__wxWebviewId__;Object(se.hasOwnProperty)(e,"page")&&Object(se.hasOwnProperty)(e.page,"__wxWebviewId__")&&(n=e.page.__wxWebviewId__);var r={};for(var i in e)"function"==typeof e[i]&&(r[i]=e[i],delete e[i]);e.callbackId=me,be[me]=r,me++,Object(u.publish)("pageScrollTo",e,[n])},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.invokeMethod)("startPullDownRefresh",e,{})},Ee=function(e){Object(u.invokeMethod)("stopPullDownRefresh",e)},Se=n(17),Te=0,Ie={},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ie[Te]={success:e.success,fail:e.fail,complete:e.complete},Object(u.publish)("setPageStyle",{callbackId:Te,style:e.style},[d.default.currentWebviewId]),Te+=1};Object(u.subscribe)("callbackSetPageStyle",(function(e){var t=e.res,n=e.callbackId,r=t.errMsg,i=0===r.indexOf("setPageStyle:ok"),o=0===r.indexOf("setPageStyle:fail"),a=Ie[n];delete Ie[n],"object"===Object(Se.default)(a)&&(i?"function"==typeof a.success&&a.success(t):o&&"function"==typeof a.fail&&a.fail(t),"function"==typeof a.complete&&a.complete(t))}));var Ce=-1;function ke(){return Ce}Object(u.subscribe)("xWebTextareaFocusChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus,n=arguments.length>1?arguments[1]:void 0;Ce=t?n:-1}));var xe=!1;Object(l.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;xe=t}));var Pe=function(e){if(k.IS_DEVTOOLS||k.IS_WINDOWS||k.IS_MINA)Object(u.publish)("hideKeyboard",{});else{var t=ke();k.IS_ANDROID&&xe&&t===d.default.currentWebviewId?(Object(u.publish)("hideXWebKeyboard",{},[t]),e&&"function"==typeof e.success&&e.success({errMsg:"hideKeyboard:ok"}),e&&"function"==typeof e.complete&&e.complete({errMsg:"hideKeyboard:ok"})):Object(u.invokeMethod)("hideKeyboard",e)}},De=function(e){Object(u.onMethod)("onKeyboardHeightChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__errorTracer__.surroundThirdByTryCatch(e,"at onKeyboardHeightChange callback function")(t)}))},Re=function(){Object(u.onMethod)("onKeyboardHeightChange",(function(){}))},je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(B.default)(this,e),this.actions=[],this.currentTransform=[],this.currentStepAnimates=[],this.option={transition:{duration:void 0!==t.duration?t.duration:400,timingFunction:void 0!==t.timingFunction?t.timingFunction:"linear",delay:void 0!==t.delay?t.delay:0},transformOrigin:t.transformOrigin||"50% 50% 0"}}return Object(F.default)(e,[{key:"export",value:function(){var e=this.actions;return this.actions=[],{actions:e}}},{key:"step",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.currentStepAnimates.forEach((function(t){"style"!==t.type?e.currentTransform[t.type]=t:e.currentTransform[t.type+"."+t.args[0]]=t})),this.actions.push({animates:Object.keys(this.currentTransform).reduce((function(t,n){return[].concat(Object(L.default)(t),[e.currentTransform[n]])}),[]),option:{transformOrigin:void 0!==t.transformOrigin?t.transformOrigin:this.option.transformOrigin,transition:{duration:void 0!==t.duration?t.duration:this.option.transition.duration,timingFunction:void 0!==t.timingFunction?t.timingFunction:this.option.transition.timingFunction,delay:void 0!==t.delay?t.delay:this.option.transition.delay}}}),this.currentStepAnimates=[],this}},{key:"matrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return this.currentStepAnimates.push({type:"matrix",args:[e,t,n,r,i,o]}),this}},{key:"matrix3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,g=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.currentStepAnimates.push({type:"matrix3d",args:[e,t,n,r,i,o,a,s,c,u,l,d,f,p,h,g]}),this.stepping=!1,this}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotate",args:[e]}),this}},{key:"rotate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.currentStepAnimates.push({type:"rotate3d",args:[e,t,n,r]}),this.stepping=!1,this}},{key:"rotateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateX",args:[e]}),this.stepping=!1,this}},{key:"rotateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateY",args:[e]}),this.stepping=!1,this}},{key:"rotateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateZ",args:[e]}),this.stepping=!1,this}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return t=void 0!==t?t:e,this.currentStepAnimates.push({type:"scale",args:[e,t]}),this}},{key:"scale3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.currentStepAnimates.push({type:"scale3d",args:[e,t,n]}),this}},{key:"scaleX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleX",args:[e]}),this}},{key:"scaleY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleY",args:[e]}),this}},{key:"scaleZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleZ",args:[e]}),this}},{key:"skew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"skew",args:[e,t]}),this}},{key:"skewX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewX",args:[e]}),this}},{key:"skewY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewY",args:[e]}),this}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"translate",args:[e,t]}),this}},{key:"translate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.currentStepAnimates.push({type:"translate3d",args:[e,t,n]}),this}},{key:"translateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateX",args:[e]}),this}},{key:"translateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateY",args:[e]}),this}},{key:"translateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateZ",args:[e]}),this}},{key:"opacity",value:function(e){return this.currentStepAnimates.push({type:"style",args:["opacity",e]}),this}},{key:"backgroundColor",value:function(e){return this.currentStepAnimates.push({type:"style",args:["background-color",e]}),this}},{key:"width",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["width",e]}),this}},{key:"height",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["height",e]}),this}},{key:"left",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["left",e]}),this}},{key:"right",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["right",e]}),this}},{key:"top",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["top",e]}),this}},{key:"bottom",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["bottom",e]}),this}}]),e}(),Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("createAnimation",e,{}))return new je(e)},Me=n(167),Le=function(e){Object(u.invokeMethod)("setPageOrientation",e)},Be=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).backgroundColor&&!Be(e.backgroundColor)&&delete e.backgroundColor,e.backgroundColorTop&&!Be(e.backgroundColorTop)&&delete e.backgroundColorTop,e.backgroundColorBottom&&!Be(e.backgroundColorBottom)&&delete e.backgroundColorBottom,(e.backgroundColor||e.backgroundColorTop||e.backgroundColorBottom)&&Object(u.invokeMethod)("setBackgroundColor",e)},Ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};-1!==["dark","light"].indexOf(e.textStyle)?Object(u.invokeMethod)("setBackgroundTextStyle",e):Object(u.beforeInvokeFail)("setBackgroundTextStyle",e,'invalid textStyle "'+e.textStyle+'"')},We=function(){};function Ve(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="enableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||We,"at api "+t+" success callback function"),r=Reporter.surroundThirdByTryCatch(e.fail||We,"at api "+t+" fail callback function"),i=Reporter.surroundThirdByTryCatch(e.complete||We,"at api "+t+" complete callback function"),o="string"==typeof e.message?e.message:void 0;Object(u.invokeMethod)("setNavigateBackConfirmDialog",{enable:!0,content:o,success:n,fail:r,complete:i},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})}function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="disableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||We,"at api "+t+" success callback function"),r=Reporter.surroundThirdByTryCatch(e.fail||We,"at api "+t+" fail callback function"),i=Reporter.surroundThirdByTryCatch(e.complete||We,"at api "+t+" complete callback function");Object(u.invokeMethod)("setNavigateBackConfirmDialog",{enable:!1,success:n,fail:r,complete:i},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})}var He=n(171),ze=!1;Object(l.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;ze=t}));var Ye=0,qe={};Object(u.subscribe)("onGetXWebSelectedTextRange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.focus,r=e.start,i=e.end,o=qe[t];o&&(n?("function"==typeof o.success&&o.success({errMsg:"getSelectedTextRange:ok",start:r,end:i}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:ok",start:r,end:i})):("function"==typeof o.fail&&o.fail({errMsg:"getSelectedTextRange:fail:no focused input"}),"function"==typeof o.complete&&o.complete({errMsg:"getSelectedTextRange:fail:no focused input"}))),delete qe[t]}));var Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=ke();if(k.IS_ANDROID&&ze&&t===d.default.currentWebviewId)return Object(u.publish)("xWebGetSelectedTextRange",{taskId:Ye}),void(qe[Ye++]=e);Object(j.invokeWebviewMethod)("getSelectedTextRange",{},[d.default.currentWebviewId],(function(t){0===t.errMsg.indexOf("getSelectedTextRange:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))},Je=n(52)},function(e,t,n){n.r(t),n.d(t,"navigateBackMiniProgram",(function(){return s})),n.d(t,"_setWxIsInvokeInTapForNavToMiniProgram",(function(){return c._setWxIsInvokeInTapForNavToMiniProgram})),n.d(t,"_navigateToMiniProgram",(function(){return c._navigateToMiniProgram})),n.d(t,"_checkBeforeNavigateToMiniProgram",(function(){return c._checkBeforeNavigateToMiniProgram})),n.d(t,"_doNavigateToMiniProgram",(function(){return c._doNavigateToMiniProgram})),n.d(t,"navigateToMiniProgram",(function(){return c.navigateToMiniProgram})),n.d(t,"navigateToMiniProgramDirectly",(function(){return c.navigateToMiniProgramDirectly})),n.d(t,"doNavigateToDevMiniProgram",(function(){return d})),n.d(t,"navigateToDevMiniProgram",(function(){return f})),n.d(t,"launchMiniProgram",(function(){return p})),n.d(t,"launchDevMiniProgram",(function(){return h}));var r=n(0),i=n(75),o=n(1),a=!1;o.default.onReady((function(){a=a||1037===(o.default.appLaunchInfo||{}).scene})),Object(i.onAppEnterForeground)((function(e){a=a||1037===e.scene}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a?Object(r.invokeMethod)("navigateBackMiniProgram",e,{}):Object(r.beforeInvokeFail)("navigateBackMiniProgram",e,"not MiniProgram can navigate back.")},c=n(104),u=n(17),l=n(6),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";if(Object(r.beforeInvoke)("navigateToDevMiniProgram",e,{appId:""}))if(["undefined","string"].includes(Object(u.default)(e.relativeURL))){var n=Object.assign({},e);"string"==typeof n.path&&void 0===n.relativeURL&&(n.relativeURL=Object(l.transWxmlToHtml)(n.path)),Object(r.invokeMethodWithPlugin)(t)("navigateToDevMiniProgram",n,{})}else Object(r.beforeInvokeFail)("navigateToDevMiniProgram",e,"relativeURL should be string or undefined")},f=function(e){d(e,"/")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.path&&(t.path=Object(l.transWxmlToHtml)(t.path)),Object(r.invokeMethod)("launchMiniProgram",t)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("launchDevMiniProgram",e,{appId:""})){var t=Object.assign({},e);t.path=Object(l.transWxmlToHtml)(t.path),"string"==typeof t.path&&void 0===t.relativeURL&&(t.relativeURL=t.path),Object(r.invokeMethod)("launchDevMiniProgram",t,{})}}},function(e,t,n){n.r(t),n.d(t,"WebAssembly",(function(){return d})),n.d(t,"_WebAssembly",(function(){return f}));var r=n(16),i=n(2),o=n(145),a=n(0),s=n(10),c=(n(6),r.default.fs,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.beforeInvoke)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&Object(a.invokeMethod)("readCompressedFile",e)}),u=globalThis,l={};void 0!==r.default.WebAssembly?l=r.default.WebAssembly:void 0!==u.WebAssembly&&(l=u.WebAssembly);var d={Table:l.Table,Memory:l.Memory,Global:l.Global,Instance:l.Instance,instantiate:function(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(i.IS_IOS||i.IS_ANDROID){var n=l.instantiate(e,t);return"Promise"===Object(s.getDataType)(n)?n:Promise.resolve(n)}var r=o.readFile;return i.IS_DEVTOOLS&&/\.br$/.test(e)&&(r=c),new Promise((function(n,i){r({compressionAlgorithm:"br",filePath:e,success:function(e){n(l.instantiate(e.data,t))},fail:function(e){var t=e.errMsg;i(new Error(t.replace(/^\w+:fail\s*/,"")))}})}))}};u.WXWebAssembly=d,delete u.WebAssembly;var f=l},function(e,t,n){n.r(t),n.d(t,"drawLabel",(function(){return g})),n.d(t,"addLabelToShareArgs",(function(){return v}));var r=n(13),i=n.n(r),o=n(37),a=n(1),s=n(78),c=n(132),u=n(45),l=n(24),d=1,f=!1;function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.font=t+"px -apple-system",n?e.measureText(n).width:0}a.default.onReady((function(){d=a.default.pixelRatio,Object(l._operateWXData)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:s.SDKVersion},success:function(e){var t=JSON.parse(e.rawData);f=t.is_enabled}})}));var h=function(e){return new Promise((function(t){if(e)if("transparent"===e)t({width:0,height:0});else{var n=Object(c.createImage)();n.onload=function(){return t(n)},n.onerror=function(){return t()},n.src=e}else t()}))},g=function(){var e=Object(o.default)(i.a.mark((function e(t){var n,r,o,a,s,c,l,f,g,v,_,y,m,b,w,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.background,r=t.label,o=t.icon,a=t.tag,s=t.more,c=void 0!==s&&s,l=t.base64,f=void 0!==l&&l,n){e.next=3;break}return e.abrupt("return",n);case 3:return g=Object(u.gameCreateOffScreenCanvas)(),v=g.getContext("2d"),g.width=210*d,g.height=168*d,"transparent"===n&&(g.height=40*d),v.fillStyle="rgba(255, 255, 255, 0)",v.fillRect(0,0,g.width,g.height),e.next=12,h(n);case 12:if(_=e.sent){e.next=15;break}return e.abrupt("return",n);case 15:if(_.width/_.height>=1.25?v.drawImage(_,0,0,1.25*_.height,_.height,0,0,g.width,g.height):_.width/_.height<1.25&&v.drawImage(_,0,0,_.width,.8*_.width,0,0,g.width,g.height),y=p(v,12*d,r),!a){e.next=45;break}m=p(v,10*d,a),v.fillStyle="rgba(0, 0, 0, 0.5)",v.beginPath(),v.moveTo(0,8*d),v.lineTo(y+m+12*d,8*d),v.arc(y+m+12*d,20*d,12*d,1.5*Math.PI,2.5*Math.PI),v.lineTo(0,32*d),v.closePath(),v.fill(),v.fillStyle="#F36D00",v.beginPath(),v.moveTo(4*d,14*d),v.arc(6*d,14*d,2*d,Math.PI,1.5*Math.PI),v.lineTo(m+10*d,12*d),v.arc(m+10*d,14*d,2*d,1.5*Math.PI,2*Math.PI),v.lineTo(m+12*d,26*d),v.arc(m+10*d,26*d,2*d,2*Math.PI,2.5*Math.PI),v.lineTo(6*d,28*d),v.arc(6*d,26*d,2*d,.5*Math.PI,Math.PI),v.closePath(),v.fill(),v.fillStyle="#FFFFFF",v.fillText(a,8*d,23.5*d),p(v,12*d),v.fillText(r,m+16*d,24*d),e.next=79;break;case 45:if(!o){e.next=68;break}return e.next=48,h(c&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg==");case 48:return b=e.sent,w=b?10*d:0,v.fillStyle="rgba(0, 0, 0, 0.5)",v.beginPath(),v.moveTo(0,8*d),v.lineTo(y+w+22*d,8*d),v.arc(y+w+22*d,20*d,12*d,1.5*Math.PI,2.5*Math.PI),v.lineTo(0,32*d),v.closePath(),v.fill(),e.next=60,h(o);case 60:(O=e.sent)&&O.width&&O.height&&v.drawImage(O,6*d,12*d,16*d,16*d),b&&b.width&&b.height&&v.drawImage(b,y+30*d,14*d,6*d,12*d),v.fillStyle="#FFFFFF",p(v,12*d),v.fillText(r,26*d,24*d),e.next=79;break;case 68:v.fillStyle="rgba(0, 0, 0, 0.5)",v.beginPath(),v.moveTo(0,8*d),v.lineTo(y+2*d,8*d),v.arc(y+2*d,20*d,12*d,1.5*Math.PI,2.5*Math.PI),v.lineTo(0,32*d),v.closePath(),v.fill(),v.fillStyle="#FFFFFF",p(v,12*d),v.fillText(r,6*d,24*d);case 79:return e.abrupt("return",f?g.toDataURL():g.toTempFilePathSync());case 80:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(e){return new Promise((function(t){f&&e.imageUrl?Object(l._operateWXData)({apiName:"webapi_game_getsharemark",reqData:{lib_version:s.SDKVersion},success:function(n){var r=n.rawData,i=JSON.parse(r);(i=(i.mark_list||[])[0])||t(e),i&&g({background:e.imageUrl,label:i.wording,icon:i.head_img_url,tag:i.mark_word}).then((function(n){e.imageUrl=n,e.extra={shareCardMarker:{label:i.mark_type}},t(e)})).catch((function(){return t(e)}))},fail:function(){return t(e)}}):t(e)}))}},function(e,t,n){var r=n(206),i=n(208);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=m,t.resolve=function(e,t){return m(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?m(e,!1,!0).resolveObject(t):t},t.format=function(e){i.isString(e)&&(e=m(e));return e instanceof o?e.format():o.prototype.format.call(e)},t.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(209);function m(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var m=e=u.join(s);if(m=m.trim(),!n&&1===e.split("#").length){var b=c.exec(m);if(b)return this.path=m,this.href=m,this.pathname=b[1],b[2]?(this.search=b[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(m);if(w){var O=(w=w[0]).toLowerCase();this.protocol=O,m=m.substr(w.length)}if(n||w||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var E="//"===m.substr(0,2);!E||w&&v[w]||(m=m.substr(2),this.slashes=!0)}if(!v[w]&&(E||w&&!_[w])){for(var S,T,I=-1,A=0;A<f.length;A++){-1!==(C=m.indexOf(f[A]))&&(-1===I||C<I)&&(I=C)}-1!==(T=-1===I?m.lastIndexOf("@"):m.lastIndexOf("@",I))&&(S=m.slice(0,T),m=m.slice(T+1),this.auth=decodeURIComponent(S)),I=-1;for(A=0;A<d.length;A++){var C;-1!==(C=m.indexOf(d[A]))&&(-1===I||C<I)&&(I=C)}-1===I&&(I=m.length),this.host=m.slice(0,I),m=m.slice(I),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var x=this.hostname.split(/\./),P=(A=0,x.length);A<P;A++){var D=x[A];if(D&&!D.match(p)){for(var R="",j=0,N=D.length;j<N;j++)D.charCodeAt(j)>127?R+="x":R+=D[j];if(!R.match(p)){var M=x.slice(0,A),L=x.slice(A+1),B=D.match(h);B&&(M.push(B[1]),L.unshift(B[2])),L.length&&(m="/"+L.join(".")+m),this.hostname=M.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==m[0]&&(m="/"+m))}if(!g[O])for(A=0,P=l.length;A<P;A++){var W=l[A];if(-1!==m.indexOf(W)){var V=encodeURIComponent(W);V===W&&(V=escape(W)),m=m.split(W).join(V)}}var G=m.indexOf("#");-1!==G&&(this.hash=m.substr(G),m=m.slice(0,G));var H=m.indexOf("?");if(-1!==H?(this.search=m.substr(H),this.query=m.substr(H+1),t&&(this.query=y.parse(this.query)),m=m.slice(0,H)):t&&(this.search="",this.query={}),m&&(this.pathname=m),_[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var z=this.search||"";this.path=F+z}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(m(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||v[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var m=n.pathname&&"/"===n.pathname.charAt(0),b=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=b||m||n.host&&e.pathname,O=w,E=n.pathname&&n.pathname.split("/")||[],S=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(S&&(n.hostname="",n.port=null,n.host&&(""===E[0]?E[0]=n.host:E.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===E[0])),b)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,E=h;else if(h.length)E||(E=[]),E.pop(),E=E.concat(h),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(S)n.hostname=n.host=E.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!E.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=E.slice(-1)[0],I=(n.host||e.host||E.length>1)&&("."===T||".."===T)||""===T,A=0,C=E.length;C>=0;C--)"."===(T=E[C])?E.splice(C,1):".."===T?(E.splice(C,1),A++):A&&(E.splice(C,1),A--);if(!w&&!O)for(;A--;A)E.unshift("..");!w||""===E[0]||E[0]&&"/"===E[0].charAt(0)||E.unshift(""),I&&"/"!==E.join("/").substr(-1)&&E.push("");var k,x=""===E[0]||E[0]&&"/"===E[0].charAt(0);S&&(n.hostname=n.host=x?"":E.length?E.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift()));return(w=w||n.host&&E.length)&&!x&&E.unshift(""),E.length?n.pathname=E.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){n.r(t),n.d(t,"createVideoContext",(function(){return V})),n.d(t,"createSQVideoContext",(function(){return G})),n.d(t,"VideoContext",(function(){return M})),n.d(t,"getVideoElementByContext",(function(){return W})),n.d(t,"playerInfo",(function(){return P})),n.d(t,"pipInfo",(function(){return E}));var r=n(15),i=n(18),o=n(9),a=n(20),s=n(5),c=n(4),u=n(30),l=n(0),d=n(6),f=n(93),p=n(69),h=n(12),g=n(1),v=n(2);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(o.default)(e);if(t){var a=Object(o.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=v.IS_DEVTOOLS||v.IS_WINDOWS||v.IS_MAC||v.IS_MINA,w={},O={},E={},S=new u.EventEmitter2,T={},I=new WeakMap,A={},C={},k=["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback","hidePoster"],x={},P={},D=g.default.useXWebVideo,R=!0,j=Object.keys;function N(e){T[e]||(T[e]=!0,Object(p.onBeforeUnloadPage)(e,(function(e){delete T[e],j(w).concat(j(O)).forEach((function(t){new RegExp("^"+e).test(t)&&delete w[t]})),j(A).forEach((function(t){(new RegExp("^api_"+e).test(t)||new RegExp("^SQ_"+e).test(t))&&delete A[t]})),v.IS_MINA&&Object(l.invokeMethod)("setKeepScreenOn",{keepScreenOn:!1},{})})))}Object(l.subscribe)("updateVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;E.webviewId=t,E.playerId=e.playerId})),Object(l.subscribe)("videoAdPlay",(function(e,t){var n=e.videoPlayerId,r=e.type;C[t+"_"+n]=r})),Object(l.subscribe)("videoPlayerInsert",(function(e,t){var n=e.domId,r=e.videoPlayerId,i=e.pluginId,o=e.nodeId,a=e.nodeInfo,s=e.data,c=t+"_"+i+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(c+=o),w[c]=r,function(e,t,n){if(!v.IS_DEVTOOLS)return;var r=document.createElement("video");e.elem=r,O[n+"_"+t]=e,r.controls=!1,r.preload="auto",r.muted=!0,r.autoplay=e.autoplay,r.style.width=e.width+"px",r.style.height=e.height+"px"}(a,r,t),S.emit("videoPlayerInsert"),N(t),P[t+"_"+r]=s||{}})),Object(l.subscribe)("xWebVideoInserted",(function(e,t){var n=e.domId,r=e.viewId,i=e.pluginId,o=e.nodeId,a=e.data,s=t+"_"+i+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(s+=o),w[s]=r,P[t+"_"+r]=a||{},S.emit("videoPlayerInsert"),N(t)})),Object(l.subscribe)("videoPlayerUpdated",(function(e,t){var n=e.action,r=e.value;U({_videoId:e.videoPlayerId,_webviewId:t},n,r)})),Object(l.subscribe)("videoPlayerRemoved",(function(e,t){var n=e.domId,r=e.videoPlayerId,i=e.pluginId,o=e.nodeId,a=t+"_"+i+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(a+=o),delete w[a],function(e,t){delete O[t+"_"+e]}(r,t);var s="api_"+t+"_"+i+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(s+=o);var c="SQ_"+t+"_"+r;delete A[s],delete A[c],delete P[t+"_"+r]})),Object(l.subscribe)("xWebVideoRemoved",(function(e,t){var n=e.domId,r=e.pluginId,i=e.nodeId,o=t+"_"+r+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(o+=i);var a=w[o];delete w[o],delete P[t+"_"+a]})),Object(l.subscribe)("xWebVideoSupported",(function(e){var t=e.isXWebSupported;D=D&&t})),Object(l.subscribe)("insertVideoToWebLayerStateChanged",(function(e,t){var n=e.viewId,r=e.inserted;x[t+"_"+n]=r})),g.default.onReady((function(){g.default.global&&g.default.global.window&&"seperated"===g.default.global.window.renderingMode&&(R=!1,D=!1)}));var M=function e(){Object(c.default)(this,e)},L=function(){function e(t,n){var r=this;Object(c.default)(this,e);var i=this.exportContext=new M;k.forEach((function(e){i[e]=r[e].bind(r)})),i._videoId=t,i._webviewId=n}return Object(s.default)(e,[{key:"play",value:function(){var e=this._getAppStatus();e===f.AppStatus.BACK_GROUND||e===f.AppStatus.LOCK||this._invokeMethod("play")}},{key:"pause",value:function(){this._invokeMethod("pause")}},{key:"stop",value:function(){this._invokeMethod("stop")}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accurate";if("accurate"!==t&&"inaccurate"!==t)throw new d.ThirdScriptError("Parameter 2 must either be `accurate` or be `inaccurate`");this._invokeMethod("seek",[e,t])}},{key:"sendDanmu",value:function(e){var t=e.text,n=e.color;this._invokeMethod("sendDanmu",[t,n])}},{key:"playbackRate",value:function(e){.5!==(e=parseFloat(e.toFixed(2)))&&.8!==e&&1!==e&&1.25!==e&&1.5!==e&&2!==e||this._invokeMethod("playbackRate",[e])}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction;[0,90,-90].indexOf(t)>-1?this._invokeMethod("requestFullScreen",[t]):this._invokeMethod("requestFullScreen"),I.set(this,!0)}},{key:"exitFullScreen",value:function(){this._invokeMethod("exitFullScreen"),this.showStatusBar(),I.set(this,!1)}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.invokeMethod)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(v.IS_ANDROID){var t="hideStatusBar:ok";return"function"==typeof e.success&&e.success({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}if(!I.get(this)){var n="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:n}),void("function"==typeof e.complete&&e.complete({errMsg:n}))}Object(l.invokeMethod)("hideStatusBar",e)}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(E){var t=E.playerId;v.IS_IOS?Object(l.invokeMethod)("operateVideoPlayer",m(m({},e),{},{videoPlayerId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateVideoPlayer","exitPictureInPicture")}}):v.IS_ANDROID&&Object(l.invokeMethod)("operateXWebVideo",m(m({},e),{},{viewId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebVideo","exitPictureInPicture")}})}}},{key:"requestBackgroundPlayback",value:function(){this._invokeMethod("requestBackgroundPlayback",[])}},{key:"exitBackgroundPlayback",value:function(){this._invokeMethod("exitBackgroundPlayback",[])}},{key:"hidePoster",value:function(){this._invokeMethod("hidePoster")}},{key:"_invokeMethodWithId",value:function(e,t,n){var r=this;"number"==typeof e?function(){if("begin"!==C[this.webviewId+"_"+e])if(R&&(v.IS_ANDROID&&D||v.IS_IOS&&x[this.webviewId+"_"+e])&&["requestFullScreen","exitFullScreen","sendDanmu","seek","stop","play"].indexOf(t)>-1)Object(l.publish)("video_"+this.webviewId+"_"+e+"_actionChanged",{method:t,data:n},[this.webviewId]);else{var r=this._getAppStatus();if(!b&&r===f.AppStatus.BACK_GROUND&&"stop"===t){var i="operateVideoPlayerBackground";return v.IS_ANDROID&&D&&(i="operateXWebVideoBackground"),void Object(l.invokeMethod)(i,{viewId:e,videoPlayerId:e,type:t})}b?(this._sendAction(e,{method:t,data:n}),["play","pause","stop","seek","playbackRate"].indexOf(t)>-1&&U(this.exportContext,t,n&&n[0])):v.IS_ANDROID&&D?Object(l.invokeMethod)("operateXWebVideo",{viewId:e,type:t,data:n}):Object(l.invokeMethod)("operateVideoPlayer",{data:n,videoPlayerId:e,type:t})}else console.error(t+":fail cannot operate video while ad playing.")}.apply(this):S.once("videoPlayerInsert",(function(){r._invokeMethod(t,n)}))}},{key:"_sendActionWithEvnetName",value:function(e,t){Object(l.publish)(e,t,[this.webviewId])}},{key:"_getAppStatus",value:function(){return h.default.appStatus}},{key:"_getHanged",value:function(){return h.default.hanged}}]),e}(),B=function(e){Object(r.default)(n,e);var t=_(n);function n(e,r,i,o){var a;if(Object(c.default)(this,n),a=t.call(this),"string"!=typeof e)throw new d.ThirdScriptError("Parameter 1 should be a string");return a.domId=e,a.webviewId=r,a.pluginId=o,a.nodeId=i,a}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,r=w[n];this._invokeMethodWithId(r,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L),F=function(e){Object(r.default)(n,e);var t=_(n);function n(e,r){var i;return Object(c.default)(this,n),(i=t.call(this,e,r)).videoPlayerId=e,i.webviewId=r,i}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.videoPlayerId;this._invokeMethodWithId(n,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L);function U(e,t,n){if(v.IS_DEVTOOLS&&void 0!==e._webviewId){var r=O[e._webviewId+"_"+e._videoId].elem;switch(t){case"setSrc":r.src=n;break;case"play":r.play();break;case"pause":case"stop":r.pause();break;case"seek":0===r.readyState||1===r.readyState?r.oncanplay=function(){r.currentTime=n,r.oncanplay=null}:r.currentTime=n;break;case"playbackRate":r.playbackRate=n}}}function W(e){return O[e._webviewId+"_"+e._videoId].elem}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i="api_"+t+"_"+r+"_"+e+"_";if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(i+=n),A[i])return A[i].exportContext;var o=new B(e,t,n,r);return A[i]=o,o.exportContext}function G(e,t){var n="SQ_"+t+"_"+e;if(A[n])return A[n].exportContext;var r=new F(e,t);return A[n]=r,r.exportContext}},function(e,t,n){n.r(t),function(e){n.d(t,"createVideoDecoder",(function(){return T}));var r=n(13),i=n.n(r),o=n(4),a=n(5),s=n(20),c=n(37),u=n(30),l=n(0),d=n(62),f=n(2);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=new u.default,v=new WeakMap,_=new WeakMap;Object(l.onMethod)("onCanvasPlayerStateChange",(function(e){var t=e.state;"playEnd"===t?g.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?g.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&g.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));var y=!1;function m(e){return b.apply(this,arguments)}function b(){return(b=Object(c.default)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(l.invokeMethodAsync)("operateCanvasPlayer",h(h({},n),{},{containerId:e.id||0,operationType:t}))}function O(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(i,o){e.NativeGlobal.MediaToolKit[n](h(h({},r),{},{containerId:t.id||0}),(function(e){if(0!==e.errCode){var t=new Error(e.errMsg||n+" failed");return Object.assign(t,e),void o(t)}i(e)}))}))}function E(e,t,n){var r=v.get(e);r&&r.emit(t,n)}var S=function(){function t(){var n=this;Object(o.default)(this,t);var r=new u.default;v.set(this,r);var a=Object(c.default)(i.a.mark((function t(){var o,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f.IS_ANDROID){t.next=8;break}return f.IS_ANDROID&&(y||(y=!0,e.NativeGlobal.MediaToolKit.addEventListener("onPlayerBuffSize",(function(e){g.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),e.NativeGlobal.MediaToolKit.addEventListener("onPlayerPlayEnd",(function(e){g.emit(e.containerId,{event:"ended",data:{}})})))),t.next=4,new Promise((function(t,n){e.NativeGlobal.MediaToolKit.playerCreate({},(function(e){if(0!==e.errCode){var r=new Error(e.errMsg||"create failed");return Object.assign(r,e),void n(r)}t(e)}))}));case 4:o=t.sent,n.id=o.containerId,t.next=12;break;case 8:return t.next=10,Object(l.invokeMethodAsync)("operateCanvasPlayer",{operationType:"create"});case 10:a=t.sent,n.id=a.containerId;case 12:g.on(n.id,(function(e){var t=e.event,n=e.data;return r.emit(t,n)}));case 13:case"end":return t.stop()}}),t)})))();_.set(this,a)}var n,r,s,p,h;return Object(a.default)(t,[{key:"start",value:(h=Object(c.default)(i.a.mark((function e(){var t,n,r,o,a,s,c=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,m(this);case 3:if(!f.IS_ANDROID){e.next=21;break}if(r=t.source,t.source&&/^(http|https):\/\/.*/i.test(t.source)){e.next=10;break}return e.next=8,Object(l.invokeMethodAsync)("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:t.source});case 8:o=e.sent,r=o.filePath;case 10:return e.next=12,O(this,"playerStart",{filePath:r,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 12:a=e.sent,n=Object.assign({},a.video),this.width=n.width||0,this.height=n.height||0,this.buffer=new ArrayBuffer(this.width*this.height*4),n.video=a.video,n.audio=a.audio,e.next=30;break;case 21:return e.next=23,w(this,"start",{source:t.source,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 23:s=e.sent,n=Object.assign({},s.video),this.buffId=s.buffId,this.width=n.width||0,this.height=n.height||0,n.video=s.video,n.audio=s.audio;case 30:return E(this,"start",n),e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"seek",value:(p=Object(c.default)(i.a.mark((function e(t){var n,r,o=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"inaccurate",e.next=3,m(this);case 3:if(r="accurate"===n,!f.IS_ANDROID){e.next=9;break}return e.next=7,O(this,"playerSeek",{seekStamp:t,seekByStamp:r});case 7:e.next=11;break;case 9:return e.next=11,w(this,"seek",{seekStamp:t,seekByStamp:r});case 11:return E(this,"seek",{position:t}),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"wait",value:(s=Object(c.default)(i.a.mark((function e(){var t,n=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,m(this);case 3:if(!f.IS_ANDROID){e.next=8;break}return e.next=6,O(this,"playerWait",{wait:t});case 6:e.next=10;break;case 8:return e.next=10,w(this,"wait",{wait:t});case 10:E(this,"wait",{});case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"stop",value:(r=Object(c.default)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(this);case 2:if(!f.IS_ANDROID){e.next=7;break}return e.next=5,O(this,"playerStop",{});case 5:e.next=9;break;case 7:return e.next=9,w(this,"stop",{});case 9:E(this,"stop",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"remove",value:(n=Object(c.default)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(this);case 2:if(this.id&&(g.removeAllListeners(this.id),(t=v.get(this)).eventNames().forEach((function(e){return t.removeAllListeners(e)}))),!f.IS_ANDROID){e.next=8;break}return e.next=6,O(this,"playerRemove",{});case 6:e.next=10;break;case 8:return e.next=10,w(this,"remove",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFrameData",value:function(){var t,n,r,i,o,a,s=this;if(f.IS_ANDROID?e.NativeGlobal.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(function(e){e.got&&(t=s.buffer),n=e.pts,r=e.pk_pts,i=e.dts,o=e.pk_dts})):Object(l.invokeMethod)("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:function(e){e.got&&(t=d.default.get(s.buffId))&&(t.__proto__=ArrayBuffer.prototype),n=e.pts,r=e.pk_pts,i=e.dts,o=e.pk_dts},fail:function(e){a=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(a,e)}}),a)throw a;return t?{width:this.width,height:this.height,data:t,pts:n,pkPts:r,dts:i,pkDts:o}:null}},{key:"on",value:function(e,t){v.get(this).on(e,t)}},{key:"off",value:function(e,t){v.get(this).off(e,t)}},{key:"videoDecoderId",get:function(){return this.id}}]),t}();function T(){return new S}}.call(this,n(74))},function(e,t,n){n.r(t),function(e){n.d(t,"createMediaRecorder",(function(){return D}));var r=n(13),i=n.n(r),o=n(4),a=n(5),s=n(20),c=n(37),u=n(30),l=n(0),d=n(39),f=n(1),p=n(155),h=n(2);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new u.default,y=new WeakMap,m=new WeakMap,b=new WeakMap,w=new WeakMap,O=new Map,E=new Map,S=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function T(e){return I.apply(this,arguments)}function I(){return(I=Object(c.default)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,i){e.NativeGlobal.MediaToolKit[t](n,(function(e){if(e&&e.errCode&&0!==e.errCode){var n=new Error(e.errMsg||t+" failed");return Object.assign(n,e),void i(n)}r(e)}))}))}function C(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=m.get(e),i=r.id,o=0;return r instanceof p.OffscreenCanvas&&(i=r.__id,o=r._offscreenCanvasId),Object(l.invokeMethodAsync)("operateMediaRecorder",v(v({},n),{},{canvasId:i,offScreenCanvasId:o,operationType:t}))}Object(l.onMethod)("onMediaRecorderStateChange",(function(e){var t,n,r=e.state,i=e.canvasId<<0;if(i=O.has(i)?O.get(i):i,delete e.state,"timeUpdate"===r)_.emit(i,{event:"timeupdate",data:{currentTime:e.currentTime}});else if("error"===r){var o=(t=e.errCode,(n={101:{code:d.error.MediaRecorder_StartDurationInvalid,message:"MediaRecorder.start:fail duration invalid"},103:{code:d.error.MediaRecorder_StartWhileAlreadyStartRecording,message:"MediaRecorder.start:fail start while already start recording"},104:{code:d.error.MediaRecorder_StartWhilePaused,message:"MediaRecorder.start:fail start while paused"},106:{code:d.error.MediaRecorder_StartBitRateInvalid,message:"MediaRecorder.start:fail bitrate invalid"},107:{code:d.error.MediaRecorder_StartFPSInvalid,message:"MediaRecorder.start:fail fps invalid"},108:{code:d.error.MediaRecorder_StartGOPInvalid,message:"MediaRecorder.start:fail gop invalid"},201:{code:d.error.MediaRecorder_PauseWhileNotStartRecording,message:"MediaRecorder.pause:fail pause while not start recording"},202:{code:d.error.MediaRecorder_PauseWhileAlreadyPaused,message:"MediaRecorder.pause:fail pause while already paused"},301:{code:d.error.MediaRecorder_ResumeWhileNotStartRecording,message:"MediaRecorder.resume:fail resume while not start recording"},302:{code:d.error.MediaRecorder_ResumeWhileRecording,message:"MediaRecorder.resume:fail resume while recording"},401:{code:d.error.MediaRecorder_AbortWhileNotStartRecording,message:"MediaRecorder.abort:fail abort while not start recording"},501:{code:d.error.MediaRecorder_StopWhileNotStartRecording,message:"MediaRecorder.stop:fail stop while not start recording"},503:{code:d.error.Global_FileStorageNotEnough,message:"MediaRecorder.stop:fail file storage not enough"}})[t]?n[t]:[102,110,111,502,710,810].includes(t)?{code:d.error.MediaRecorder_InternalFailed,message:"MediaRecorder:fail internal failed"}:{code:d.error.MediaRecorder_UnknownError,message:"MediaRecorder:fail unknown error"});_.emit(i,{event:"error",data:{error:o}})}}));var k=!1;function x(){h.IS_ANDROID&&(k||(k=!0,e.NativeGlobal.MediaToolKit.addEventListener("onRecorderTimeUpdate",(function(e){if(E.has(e.containerId)){var t=E.get(e.containerId);_.emit(t,{event:"timeupdate",data:{currentTime:e.stamp}})}}))))}var P=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.default)(this,t),m.set(this,e);var a=new u.default;y.set(this,a),_.on(e.id,(function(e){var t=e.event,n=e.data;return a.emit(t,n)})),"number"==typeof r.duration?this.duration=Math.min(7200,Math.max(5,r.duration)):this.duration=7200,"number"==typeof r.videoBitsPerSecond?this.videoBitsPerSecond=Math.min(3e3,Math.max(600,r.videoBitsPerSecond)):this.videoBitsPerSecond=1e3,this.fps=r.fps||24,this.gop=r.gop||12,this.timeUpdateInterval=r.timeUpdateInterval||this.gop,this.audioPlayerId=r.audioPlayerId;var s=Object(c.default)(i.a.mark((function t(){var r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.IS_ANDROID){t.next=9;break}return x(),t.next=4,A("recorderCreate",{});case 4:r=t.sent,n._containerId=r.containerId,E.set(n._containerId,e.id),t.next=12;break;case 9:return t.next=11,C(n,"create",{});case 11:e instanceof p.OffscreenCanvas&&O.set(e.__id,e.id);case 12:a.emit("create",{});case 13:case"end":return t.stop()}}),t)})))();w.set(this,s)}var n,r,s,d,g,v;return Object(a.default)(t,[{key:"pause",value:(v=Object(c.default)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(this);case 2:if(t=y.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,A("recorderUpdate",{containerId:this._containerId,pause:!0});case 6:n=e.sent,t.emit("pause",n),e.next=13;break;case 10:return e.next=12,C(this,"pause",{});case 12:t.emit("pause");case 13:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"resume",value:(g=Object(c.default)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(this);case 2:if(t=y.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,A("recorderUpdate",{containerId:this._containerId,pause:!1});case 6:n=e.sent,t.emit("resume",n),e.next=13;break;case 10:return e.next=12,C(this,"resume");case 12:t.emit("resume");case 13:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"start",value:(d=Object(c.default)(i.a.mark((function e(){var t,n,r,o,a,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(this);case 2:if(t=y.get(this),n=m.get(this),r={width:n.width,height:n.height,fps:this.fps,bitrate:this.videoBitsPerSecond,gop:this.gop,duration:this.duration,timeUpdateInterval:this.timeUpdateInterval,audioPlayerId:this.audioPlayerId,cumulativeStamp:!0},h.IS_IOS&&f.default.clientVersion<385879296?r.duration=Math.floor(this.duration):r.duration=Math.floor(1e3*this.duration),!h.IS_ANDROID){e.next=24;break}return e.next=9,Object(l.invokeMethodAsync)("private_fileSystemConvert",{operationType:"getWxFilePath",fileName:""+Date.now(),mimeType:"mp4",autoDeleteIfExists:!0});case 9:return o=e.sent,this.tempFilePath=o.localId,this._absoluteFilePath=o.filePath,a=n.id,n instanceof p.OffscreenCanvas&&(a=n._offscreenCanvasId),r.containerId=this._containerId,r.canvasId=a,r.notifyVideoKeyFrame=!0,r.filePath=o.filePath,e.next=20,A("recorderStart",r);case 20:s=e.sent,t.emit("start",s),e.next=27;break;case 24:return e.next=26,C(this,"start",r);case 26:t.emit("start");case 27:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"stop",value:(s=Object(c.default)(i.a.mark((function e(){var t,n,r,o,a,s,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(this);case 2:if(t=y.get(this),!h.IS_ANDROID){e.next=12;break}return e.next=6,A("recorderStop",{containerId:this._containerId});case 6:return e.next=8,A("analysis",{filePath:this._absoluteFilePath});case 8:r=e.sent,n={duration:r.duration,tempFilePath:this.tempFilePath,fileSize:r.size},e.next=20;break;case 12:return e.next=14,C(this,"stop");case 14:o=e.sent,a=o.tempFilePath,s=o.tempThumbPath,c=o.fileSize,u=o.duration,n={tempFilePath:a,tempThumbPath:s,fileSize:c,duration:u};case 20:return t.emit("stop",n),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"requestFrame",value:(r=Object(c.default)(i.a.mark((function t(){var n,r,o,a,s=this,c=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:function(){},t.next=3,T(this);case 3:if(r=m.get(this),!h.IS_ANDROID){t.next=18;break}return t.next=7,new Promise((function(t){e.NativeGlobal.MediaToolKit.recorderCapture({containerId:s._containerId},t)}));case 7:if(o=t.sent,a=1e3/this.fps,o.got){t.next=16;break}return t.next=12,S(a);case 12:return t.next=14,this.requestFrame(n);case 14:t.next=17;break;case 16:n();case 17:return t.abrupt("return");case 18:if(!(r instanceof p.OffscreenCanvas)){t.next=22;break}setTimeout((function(){n(),e.WeixinCanvas.recordFrame(r.__id,r._offscreenCanvasId)})),t.next=25;break;case 22:return t.next=24,new Promise((function(e){return r.requestAnimationFrame(e)}));case 24:n();case 25:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"on",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),y.get(this).on(e,t)}},{key:"off",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),y.get(this).off(e,t)}},{key:"destroy",value:(n=Object(c.default)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.get(this),_.removeAllListeners(t.id),(n=y.get(this)).eventNames().forEach((function(e){return n.removeAllListeners(e)})),!h.IS_ANDROID){e.next=12;break}return e.next=7,T(this);case 7:return E.delete(this._containerId),e.next=10,A("recorderRemove",{containerId:this._containerId});case 10:e.next=14;break;case 12:return e.next=14,C(this,"remove");case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}();function D(e,t){if(b.get(e))throw new Error("Already created by the same canvas node.");if(!e||"function"!=typeof e.getContext||!e.getContext("webgl"))throw new Error("Cannot get webgl context from target.");var n=new P(e,t);return b.set(e,n),n}}.call(this,n(74))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasIOS",(function(){return g}));var r=n(4),i=n(5),o=n(42),a=n(15),s=n(18),c=n(9),u=n(35),l=n(50),d=n(202),f=n(70),p=n(106);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var g=function(t){Object(a.default)(s,t);var n=h(s);function s(){return Object(r.default)(this,s),n.apply(this,arguments)}return Object(i.default)(s,[{key:"_initCanvasInstance",value:function(){return l.CanvasFontManager.initialize(d.CanvasFontManagerIOS),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(u.pipe)(f.decorateContextForImageProxy,p.temporarilyPatchContext)(Object(o.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image;return Object(u.wrapImageObject)(t,{nodeId:this.nodeId,pluginId:this.pluginId,webviewId:""})}}]),s}(n(128).OffscreenSkiaCanvas)}.call(this,n(74))},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerIOS",(function(){return y})),n.d(t,"SkiaCanvasIOS",(function(){return m}));var r=n(108),i=n(4),o=n(5),a=n(42),s=n(15),c=n(18),u=n(9),l=n(0),d=n(35),f=n(2),p=n(50),h=n(70),g=n(106),v=n(137);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.default)(e);if(t){var i=Object(u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.default)(this,n)}}f.IS_IOS&&(Object(l.subscribe)("skiaCanvasInsert",(function(e,t){Object(p.skiaCanvasInsert)(e,t)})),Object(l.subscribe)("skiaCanvasRemove",(function(e,t){Object(p.skiaCanvasRemove)(e,t),Object(l.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(l.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(d.concatId)(t,e.canvasNumber),r=p.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})));var y=function(t){Object(s.default)(r,t);var n=_(r);function r(){return Object(i.default)(this,r),n.apply(this,arguments)}return Object(o.default)(r,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(a.default)(Object(u.default)(r.prototype),"loadFontFace",this).call(this,t);var n=e.skiacanvasLoadNewFont;if("function"==typeof n){var i=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(i)}}}]),r}(p.CanvasFontManager),m=function(t){Object(s.default)(c,t);var n=_(c);function c(){return Object(i.default)(this,c),n.apply(this,arguments)}return Object(o.default)(c,[{key:"_initCanvasInstance",value:function(){return p.CanvasFontManager.initialize(y),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(d.pipe)(h.decorateContextForImageProxy,g.temporarilyPatchContext)(Object(a.default)(Object(u.default)(c.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image,n=Object(d.wrapImageObject)(t,p.skiaCanvasMappings[this._canvasId]);return new h.SkiaImageProxy(n)}},{key:"createImageData",value:function(t,n,r){return t?(n=parseFloat(n),r=parseFloat(r),new e.ImageData(t,n,r)):null}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?new Path2D:1===t.length?Object(r.default)(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return Object(v.getWeixinCanvas)().requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return Object(v.getWeixinCanvas)().cancelAnimationFrame(e)}}]),c}(p.SkiaCanvas)}.call(this,n(74))},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasAndroid",(function(){return v}));var r=n(4),i=n(5),o=n(42),a=n(15),s=n(18),c=n(9),u=n(16),l=n(35),d=n(50),f=n(204),p=n(70),h=n(106);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var i=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var v=function(t){Object(a.default)(s,t);var n=g(s);function s(){return Object(r.default)(this,s),n.apply(this,arguments)}return Object(i.default)(s,[{key:"_initCanvasInstance",value:function(){d.CanvasFontManager.initialize(f.CanvasFontManagerAndroid);var t=(u.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id);return(u.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t)}},{key:"getContext",value:function(e,t){return Object(l.pipe)(p.decorateContextForImageProxy,h.temporarilyPatchContext)(Object(o.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(u.default.SkiaImages||SkiaImage),t=Object(l.wrapImageObject)(e,{nodeId:this._nodeId,pluginId:this._pluginId,webviewId:""});return new p.SkiaImageProxy(t)}}]),s}(n(128).OffscreenSkiaCanvas)}.call(this,n(74))},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerAndroid",(function(){return T})),n.d(t,"SkiaCanvasAndroid",(function(){return I}));var r=n(108),i=n(42),o=n(15),a=n(18),s=n(9),c=n(4),u=n(5),l=n(1),d=n(16),f=n(0),p=n(2),h=n(35),g=n(50),v=n(70),_=n(106),y=n(69);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.default)(e);if(t){var i=Object(s.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(a.default)(this,n)}}var b={};function w(e,t){var n=Object(h.concatId)(t,e.canvasNumber),r=b[n];delete b[n],r&&r.dispose()}p.IS_ANDROID&&(Object(f.subscribe)("skiaCanvasInsert",(function(e,t){Object(g.skiaCanvasInsert)(e,t),Object(y.onBeforeUnloadPage)(t,(function(){w(e,t)}))})),Object(f.subscribe)("skiaCanvasRemove",(function(e,t){Object(g.skiaCanvasRemove)(e,t),w(e,t),Object(f.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(f.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(h.concatId)(t,e.canvasNumber),r=g.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})),Object(f.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(h.concatId)(t,e.viewId),r=g.canvasRefMapById[n];r&&"function"==typeof r._swap&&r._swap()})));var O=function(){function e(){Object(c.default)(this,e)}return Object(u.default)(e,[{key:"sync",value:function(e){this.t=setInterval((function(){e()}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),E={offset:Date.now(),now:function(){return Date.now()-this.offset}},S=function(){function e(t){var n=this;Object(c.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new O,this.vSync.sync((function(){var e=new Map(n.callbacks);n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[E.now()])})),n.canvasView.present()}))}return Object(u.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),T=function(t){Object(o.default)(r,t);var n=m(r);function r(){return Object(c.default)(this,r),n.apply(this,arguments)}return Object(u.default)(r,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(i.default)(Object(s.default)(r.prototype),"loadFontFace",this).call(this,t);var n=d.default.SkiaCanvasLoadNewFont||e.SkiaCanvasLoadNewFont;if("function"==typeof n){var o=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(o)}}}]),r}(g.CanvasFontManager),I=function(t){Object(o.default)(a,t);var n=m(a);function a(){return Object(c.default)(this,a),n.apply(this,arguments)}return Object(u.default)(a,[{key:"_initCanvasInstance",value:function(){g.CanvasFontManager.initialize(T);var t=(d.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id),n=(d.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t);return this._scheduler=new S(t),b[this._canvasId]=this._scheduler,this._swap=function(){t.swapSurface()},n}},{key:"getContext",value:function(e,t){return Object(h.pipe)(v.decorateContextForImageProxy,_.temporarilyPatchContext)(Object(i.default)(Object(s.default)(a.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(d.default.SkiaImages||SkiaImage),t=Object(h.wrapImageObject)(e,g.skiaCanvasMappings[this._canvasId]);return new v.SkiaImageProxy(t)}},{key:"createImageData",value:function(t,n,r){return t?(n=parseFloat(n),r=parseFloat(r),new(d.default.SkiaImageData||e.SkiaImageData)(t,n,r)):null}},{key:"createPath2D",value:function(){for(var t=d.default.SkiaPath2D||e.SkiaPath2D,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return 0===i.length?new t:1===i.length?Object(r.default)(t,i):null}},{key:"requestAnimationFrame",value:function(t){return l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasRequestAnimationFrame||e.SkiaCanvasRequestAnimationFrame)(t):this._scheduler.requestAnimationFrame(t)}},{key:"cancelAnimationFrame",value:function(t){l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasCancelAnimationFrame||e.SkiaCanvasCancelAnimationFrame)(t):this._scheduler.cancelAnimationFrame(t)}}]),a}(g.SkiaCanvas)}.call(this,n(74))},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=d;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return x()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",g={};function v(){}function _(){}function y(){}var m={};m[o]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(k([])));w&&w!==n&&r.call(w,o)&&(m=w);var O=y.prototype=v.prototype=Object.create(m);function E(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(i,o,a,s){var c=l(e[i],e,o);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function T(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,T(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:x}}function x(){return{value:t,done:!0}}return _.prototype=O.constructor=y,y.constructor=_,_.displayName=c(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(S.prototype),S.prototype[a]=function(){return this},e.AsyncIterator=S,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new S(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),c(O,s,"Generator"),O[o]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(function(e,r){var i;!function(o){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,u=36,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,g=String.fromCharCode;function v(e){throw new RangeError(p[e])}function _(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function y(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+_((e=e.replace(f,".")).split("."),t).join(".")}function m(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function b(e){return _(e,(function(e){var t="";return e>65535&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=g(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=u)e=h(e/35);return h(r+36*e/(e+38))}function E(e){var t,n,r,i,o,a,s,l,d,f,p,g=[],_=e.length,y=0,m=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&v("not-basic"),g.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=y,a=1,s=u;i>=_&&v("invalid-input"),((l=(p=e.charCodeAt(i++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||l>h((c-y)/a))&&v("overflow"),y+=l*a,!(l<(d=s<=w?1:s>=w+26?26:s-w));s+=u)a>h(c/(f=u-d))&&v("overflow"),a*=f;w=O(y-o,t=g.length+1,0==o),h(y/t)>c-m&&v("overflow"),m+=h(y/t),y%=t,g.splice(y++,0,m)}return b(g)}function S(e){var t,n,r,i,o,a,s,l,d,f,p,_,y,b,E,S=[];for(_=(e=m(e)).length,t=128,n=0,o=72,a=0;a<_;++a)(p=e[a])<128&&S.push(g(p));for(r=i=S.length,i&&S.push("-");r<_;){for(s=c,a=0;a<_;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>h((c-n)/(y=r+1))&&v("overflow"),n+=(s-t)*y,t=s,a=0;a<_;++a)if((p=e[a])<t&&++n>c&&v("overflow"),p==t){for(l=n,d=u;!(l<(f=d<=o?1:d>=o+26?26:d-o));d+=u)E=l-f,b=u-f,S.push(g(w(f+E%b,0))),l=h(E/b);S.push(g(w(l,0))),o=O(n,y,r==i),n=0,++r}++n,++t}return S.join("")}s={version:"1.4.1",ucs2:{decode:m,encode:b},decode:E,encode:S,toASCII:function(e){return y(e,(function(e){return d.test(e)?"xn--"+S(e):e}))},toUnicode:function(e){return y(e,(function(e){return l.test(e)?E(e.slice(4).toLowerCase()):e}))}},void 0===(i=function(){return s}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(207)(e),n(74))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(210),t.encode=t.stringify=n(211)},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;o&&"number"==typeof o.maxKeys&&(c=o.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,f,p,h,g=e[l].replace(s,"%20"),v=g.indexOf(n);v>=0?(d=g.substr(0,v),f=g.substr(v+1)):(d=g,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(a,p)?i(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(213)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(200))},function(e,t,n){var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(214),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,a=365.25*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,o,"day")||s(c,i,"hour")||s(c,r,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(216)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(200))},function(e,t,n){var r;function i(e){function n(){if(n.enabled){var e=n,i=+new Date,o=i-(r||i);e.diff=o,e.prev=r,e.curr=i,r=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"==typeof i){var o=a[c];n=i.call(e,o),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=i.debug=i.default=i).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(e=n[i].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(217),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,i=60*r,o=24*i,a=365.25*o;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,o,"day")||s(c,i,"hour")||s(c,r,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t,n){(function(t){var r=n(221),i=n(51).reportDeprecatedAPI,o=Function;e.exports={hijack:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==t.Function){var i=function(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return n?o:{}}},o={};i.prototype=t.Function.prototype,t.Function.prototype.constructor=i,t.Function=i}var a=globalThis;if("undefined"!=typeof eval&&(eval=void 0),"undefined"!=typeof setTimeout&&e){var s=setTimeout;setTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("function"!=typeof e)throw new TypeError("setTimeout expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setTimeout callback function"),i=[].slice.call(arguments,2);return s((function(){n.apply(a,i)}),t)};var c=setInterval;setInterval=function(e,t){if("function"!=typeof e)throw new TypeError("setInterval expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),i=[].slice.call(arguments,2);return c((function(){n.apply(a,i)}),t)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((function(e){if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:function(){return i("globalWa"),t},set:function(t){Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}},originFunction:o}}).call(this,n(74))},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){n.r(t);var r={};n.r(r),n.d(r,"getBatteryInfo",(function(){return nt})),n.d(r,"getBatteryInfoSync",(function(){return rt}));var i={};n.r(i),n.d(i,"startAccelerometer",(function(){return st})),n.d(i,"stopAccelerometer",(function(){return ct})),n.d(i,"onAccelerometerChange",(function(){return dt})),n.d(i,"offAccelerometerChange",(function(){return lt}));var o={};n.r(o),n.d(o,"startCompass",(function(){return ht})),n.d(o,"stopCompass",(function(){return gt})),n.d(o,"onCompassChange",(function(){return yt})),n.d(o,"offCompassChange",(function(){return _t}));var a={};n.r(a),n.d(a,"getClipboardData",(function(){return Tt})),n.d(a,"setClipboardData",(function(){return It}));var s={};n.r(s),n.d(s,"startBeaconDiscovery",(function(){return At})),n.d(s,"stopBeaconDiscovery",(function(){return Ct})),n.d(s,"getBeacons",(function(){return kt})),n.d(s,"onBeaconUpdate",(function(){return xt})),n.d(s,"offBeaconUpdate",(function(){return Pt})),n.d(s,"onBeaconServiceChange",(function(){return Dt})),n.d(s,"offBeaconServiceChange",(function(){return Rt}));var c={};n.r(c),n.d(c,"captureScreen",(function(){return jt})),n.d(c,"onUserCaptureScreen",(function(){return Nt.onUserCaptureScreen})),n.d(c,"offUserCaptureScreen",(function(){return Nt.offUserCaptureScreen})),n.d(c,"_onUserCaptureScreen",(function(){return Nt._onUserCaptureScreen})),n.d(c,"_offUserCaptureScreen",(function(){return Nt._offUserCaptureScreen})),n.d(c,"getScreenBrightness",(function(){return Mt})),n.d(c,"setScreenBrightness",(function(){return Lt})),n.d(c,"setKeepScreenOn",(function(){return Bt}));var u={};n.r(u),n.d(u,"vibrateShort",(function(){return Ft})),n.d(u,"vibrateLong",(function(){return Ut}));var l={};n.r(l),n.d(l,"openBluetoothAdapter",(function(){return Ht})),n.d(l,"closeBluetoothAdapter",(function(){return zt})),n.d(l,"getBluetoothAdapterState",(function(){return Yt})),n.d(l,"startBluetoothDevicesDiscovery",(function(){return qt})),n.d(l,"stopBluetoothDevicesDiscovery",(function(){return Kt})),n.d(l,"getBluetoothDevices",(function(){return Jt})),n.d(l,"getBLEDeviceRSSI",(function(){return Xt})),n.d(l,"getConnectedBluetoothDevices",(function(){return $t})),n.d(l,"createBLEConnection",(function(){return Zt})),n.d(l,"closeBLEConnection",(function(){return Qt})),n.d(l,"getBLEDeviceServices",(function(){return en})),n.d(l,"getBLEDeviceCharacteristics",(function(){return tn})),n.d(l,"notifyBLECharacteristicValueChanged",(function(){return nn})),n.d(l,"notifyBLECharacteristicValueChange",(function(){return rn})),n.d(l,"readBLECharacteristicValue",(function(){return on})),n.d(l,"writeBLECharacteristicValue",(function(){return an})),n.d(l,"onBLEConnectionStateChanged",(function(){return sn})),n.d(l,"offBLEConnectionStateChanged",(function(){return cn})),n.d(l,"onBLEConnectionStateChange",(function(){return un})),n.d(l,"offBLEConnectionStateChange",(function(){return ln})),n.d(l,"onBLECharacteristicValueChange",(function(){return dn})),n.d(l,"offBLECharacteristicValueChange",(function(){return fn})),n.d(l,"onBluetoothDeviceFound",(function(){return pn})),n.d(l,"offBluetoothDeviceFound",(function(){return hn})),n.d(l,"onBluetoothAdapterStateChange",(function(){return gn})),n.d(l,"offBluetoothAdapterStateChange",(function(){return vn})),n.d(l,"setBLEMTU",(function(){return _n})),n.d(l,"createBLEPeripheralServer",(function(){return kn})),n.d(l,"onBLEPeripheralConnectionStateChanged",(function(){return Pn})),n.d(l,"offBLEPeripheralConnectionStateChanged",(function(){return Dn})),n.d(l,"makeBluetoothPair",(function(){return Rn}));var d={};n.r(d),n.d(d,"startLocalServiceDiscovery",(function(){return zn})),n.d(d,"stopLocalServiceDiscovery",(function(){return Yn})),n.d(d,"onLocalServiceFound",(function(){return qn})),n.d(d,"offLocalServiceFound",(function(){return Kn})),n.d(d,"onLocalServiceLost",(function(){return Jn})),n.d(d,"offLocalServiceLost",(function(){return Xn})),n.d(d,"onLocalServiceDiscoveryStop",(function(){return $n})),n.d(d,"offLocalServiceDiscoveryStop",(function(){return Zn})),n.d(d,"onLocalServiceResolveFail",(function(){return Qn})),n.d(d,"offLocalServiceResolveFail",(function(){return er}));var f={};n.r(f),n.d(f,"startGyroscope",(function(){return nr})),n.d(f,"stopGyroscope",(function(){return rr})),n.d(f,"onGyroscopeChange",(function(){return ir})),n.d(f,"offGyroscopeChange",(function(){return or}));var p={};n.r(p),n.d(p,"startDeviceMotionListening",(function(){return sr})),n.d(p,"stopDeviceMotionListening",(function(){return cr})),n.d(p,"onDeviceMotionChange",(function(){return ur})),n.d(p,"offDeviceMotionChange",(function(){return lr}));var h={};n.r(h),n.d(h,"getRecorderManager",(function(){return yr})),n.d(h,"startRecord",(function(){return mr})),n.d(h,"stopRecord",(function(){return br}));var g={};n.r(g),n.d(g,"getGameRelatedContextsExports",(function(){return zh})),n.d(g,"getABTestConfig",(function(){return x._getABTestConfig}));var v={};n.r(v),n.d(v,"_operateWXData",(function(){return et._operateWXData})),n.d(v,"_requestSkipCheckDomain",(function(){return Z})),n.d(v,"_uploadFileSkipCheckDomain",(function(){return ie})),n.d(v,"_downloadFileSkipCheckDomain",(function(){return Q._downloadFileSkipCheckDomain})),n.d(v,"_socketSkipCheckDomainFactory",(function(){return Fe})),n.d(v,"uploadToCommonCDN",(function(){return k})),n.d(v,"private_getUserAgent",(function(){return tt.private_getUserAgent}));var _=n(83),y=n(16),m=n(2);if(!m.IS_DEVTOOLS&&!m.IS_PC&&!m.IS_MINA){var b=function(e,t){var n=Object(_.getNativeGlobalLog)(e,t,Object(m.debugEnabled)());n&&y.default.log(n)};globalThis.console={log:function(){b(_.LOG_LEVEL.LOG,arguments)},info:function(){b(_.LOG_LEVEL.INFO,arguments)},warn:function(){b(_.LOG_LEVEL.WARNING,arguments)},error:function(){b(_.LOG_LEVEL.ERROR,arguments)},debug:function(){b(_.LOG_LEVEL.DEBUG,arguments)},time:function(){b(_.LOG_LEVEL.TIME,arguments)},timeEnd:function(){b(_.LOG_LEVEL.TIME_END,arguments)},group:function(){},groupEnd:function(){}}}var w=n(1),O=n(0),E=n(21),S=Object(E.getEventManager)("UpdateWXConfig"),T=S.onMethod;S.offMethod;Object(O.onMethod)("onUpdateWXConfig",(function(e){wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((function(t){w.default[t]=e[t]})),S.emit(e)}));var I=n(33),A=n(11),C=n(27),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("uploadToCommonCDN",e,{})},x=n(84),P=n(105),D=[{APINames:[/^connectSocket/],ios:{app:"clicfg_wegame_ios_use_wcwss",game:"clicfg_wegame_ios_use_wcwss"},android:{app:"clicfg_appbrand_socket_wcwss",game:"clicfg_appbrand_game_socket_wcwss"},version:1},{APINames:[/^request/,/^downloadFile/],ios:{app:"clicfg_wegame_ios_use_cronet_request",game:"clicfg_wegame_ios_use_cronet_request"},android:{app:"clicfg_appbrand_request_cdn",game:"clicfg_appbrand_game_request_cdn"},version:1},{APINames:[/^downloadFile/],ios:{app:"clicfg_appbrand_ios_native_download",game:"clicfg_appbrand_ios_native_download"},android:{app:"",game:""},version:2},{APINames:[/^connectSocket/],ios:{app:"clicfg_appbrand_ios_native_socket_wcwss",game:"clicfg_appbrand_ios_native_socket_wcwss"},android:{app:"clicfg_appbrand_native_socket_wcwss",game:"clicfg_appbrand_native_socket_wcwss"},version:2}];w.default.onReady((function(){if(Object(A.isGame)()||Object(A.isApp)()){var e=Object(A.isGame)()?"game":"app";D.forEach((function(t){var n=t.APINames,r=t.version,i=t[m.PLATFORM];i&&i[e]&&function(e,t,n){JSON.stringify(t),Object(x._getABTestConfig)({experimentId:e,experimentType:"Expt",success:function(e){var r=e.testConfig;JSON.stringify(t),1===Number(r)&&t.forEach((function(e){Object(P.setApiVersion)(e,n)}))}})}(i[e],n,r)}))}}));var R=n(17),j=n(6),N=n(4),M=n(15),L=n(18),B=n(9),F=n(90),U=n(10),W=n(12),V="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",G="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function H(e){var t=e.isSuccess,n=e.invokeTime,r=e.costTime,i=e.wxdataQueueTimestamp,o=e.wxdataDequeueTimestamp,a=e.beginCGITimestamp,s=e.CGICallbackTimestamp,c=e.wxlibCallbackTimestamp,u=e.requestingCount,l=e.cost1,d=e.cost2,f=e.cost3,p=e.cost4,h=e.cost5,g=e.cost6,v=e.JSApiType;Math.random()<.002&&setTimeout((function(){var e,_=W.default.currentNetworkType,y=w.default.appType+1e3,m=w.default.appLaunchInfo&&void 0!==w.default.appLaunchInfo.scene?w.default.appLaunchInfo.scene:0,b=["","",t?1:0,n,r,_,"",y,m,V,G,"",0,0,l,d,f,p,h,g,0,0,u,n,i,o,a,s,0,0,c,v].map((e=1024,function(t){return Object(U.isString)(t)&&t.length>e?t.substr(0,e):t})).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:b})}),0)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}Object(U.isString)(V)&&(V=V.replace(" ","")),Object(U.isString)(G)&&(G=G.replace(" ","-"));var Y=0;function q(e,t,n){var r=Date.now();if(Y--,t.costTime=r-t.invokeTime,e.clientInfo&&"object"===Object(R.default)(e.clientInfo)){var i=e.clientInfo;t.wxdataQueueTimestamp=i.invokeTime,t.wxdataDequeueTimestamp=i.invokeTime,t.beginCGITimestamp=i.beginCGITimestamp,t.CGICallbackTimestamp=i.CGICallbackTimestamp,t.wxlibCallbackTimestamp=i.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=r-t.wxlibCallbackTimestamp,n&&n.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,H(t)}}Object(F.registerTaskType)("Request",{maxTaskCount:10,functionName:"request"}),w.default.onReady((function(){try{"number"==typeof w.default.wxAppInfo.maxRequestConcurrent&&Object(F.registerTaskType)("Request",{maxTaskCount:w.default.wxAppInfo.maxRequestConcurrent})}catch(e){}}));var K=function(e){Object(M.default)(n,e);var t=z(n);function n(e){Object(N.default)(this,n);var r={JSApiType:1,invokeTime:Date.now(),requestingCount:++Y};return t.call(this,e,{taskType:"Request",beforeSend:function(t){return t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t},beforeSuccess:function(t){return r.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(t),function(e){e.statusCode=parseInt(e.statusCode,10)}(t),function(e){"object"===Object(R.default)(e.header)&&(e.header=Object.keys(e.header).reduce((function(t,n){return Array.isArray(e.header[n])?t[n]=e.header[n].join(","):"string"==typeof e.header[n]&&(t[n]=e.header[n]),t}),{}))}(t),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(t),q(t,r,e),t},beforeFail:function(t){return r.isSuccess=!1,q(t,r,e),t}})}return n}(F.NetworkTask),J=__safeway__.apiSign.makeApiSign,X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("request",t,{url:""}))if(!1!==Object(j.validateUrl)(t.url)){try{JSON.stringify(t.data)}catch(e){return void Object(O.beforeInvokeFail)("request",t,"fail to stringify data")}if("function"!=typeof t.data){var n=Object(j.getDataType)(t.header);t.header=t.header||{},t.header=Object(j.convertObjectValueToString)(t.header),"Undefined"!==n&&"Object"!==n&&(console.warn("wx.request: header must be an object"),t.header={}),t.header=Object.keys(t.header).reduce((function(e,n){return"content-type"===n.toLowerCase()?e[n.toLowerCase()]=t.header[n]:e[n]=t.header[n],e}),{});var r="text";t.responseType&&(r=t.responseType.toLowerCase());var i,o=t.header||{},a="GET";"string"==typeof t.method&&(a=t.method.toUpperCase()),t.dataType=t.dataType||"json",o["content-type"]=o["content-type"]||"application/json",i=void 0===t.data?"":"string"!=typeof t.data&&"ArrayBuffer"!==Object(j.getDataType)(t.data)?o["content-type"].indexOf("application/x-www-form-urlencoded")>-1?Object(j.urlEncodeFormData)(t.data,!0):o["content-type"].indexOf("application/json")>-1||"object"===Object(R.default)(t.data)?JSON.stringify(t.data):i.toString():t.data,"GET"===a&&(t.url=Object(j.addQueryStringToUrl)(t.url,t.data));try{var s=new K(Object.assign({},t,{header:o,method:a,responseType:r,data:i},J("createRequestTask",{url:t.url,__skipDomainCheck__:e.__skipDomainCheck__})));return s}catch(e){return void Object(O.beforeInvokeFail)("request",t,e.message)}}else Object(O.beforeInvokeFail)("request",t,"data should not be Function")}else Object(O.beforeInvokeFail)("request",t,'invalid url "'+t.url+'"')}},$=X(),Z=X({__skipDomainCheck__:!0}),Q=n(59);function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}Object(F.registerTaskType)("Upload",{maxTaskCount:10,functionName:"uploadFile"}),w.default.onReady((function(){try{"number"==typeof w.default.wxAppInfo.maxUploadConcurrent&&Object(F.registerTaskType)("Upload",{maxTaskCount:w.default.wxAppInfo.maxUploadConcurrent})}catch(e){}}));var te=function(e){Object(M.default)(n,e);var t=ee(n);function n(e){return Object(N.default)(this,n),t.call(this,e,{taskType:"Upload",beforeSend:function(t){return t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t},beforeSuccess:function(e){return e}})}return n}(F.NetworkTask),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("uploadFile",t,{url:"",filePath:"",name:""})){"object"!==Object(R.default)(t.header)&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!==Object(R.default)(t.formData)&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);var n={},r={};t.header&&(n=Object(j.convertObjectValueToString)(t.header)),t.formData&&(r=Object(j.convertObjectValueToString)(t.formData));try{var i=new te(Object.assign({},t,{header:n,formData:r,__skipDomainCheck__:e.__skipDomainCheck__}));return i}catch(e){return void Object(O.beforeInvokeFail)("uploadFile",t,e.message)}}}},re=ne(),ie=ne({__skipDomainCheck__:!0}),oe=n(5);function ae(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}var se,ce=n(54),ue=n(88),le=0,de=new WeakMap,fe=new WeakMap,pe=new WeakMap,he=new WeakMap,ge={},ve=new ce.Emitter;Object(O.onMethod)("onSocketTaskStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.socketTaskId,r=ge[n];if(r){var i=de.get(r);if(delete e.state,delete e.socketTaskId,r){if("open"===t){r.readyState=r.OPEN;var o=pe.get(r).url,a=1,s=Date.now()-he.get(r),c="",u=e.statusCode,l=pe.get(r).__skipDomainCheck__,d=0,f=e.profile;Object(ue.reportNetworkAPI)("connectSocket",o,a,s,c,u,l,d,0,f)}else"close"!==t&&"error"!==t||(r.readyState=r.CLOSED);ve.emit(""+i+t,e),ve.emit("onSocket"+(t[0].toUpperCase()+t.substr(1)),e,r),"close"===t&&(delete ge[n],ve.removeAllListeners(i+"open"),ve.removeAllListeners(i+"close"),ve.removeAllListeners(i+"error"),ve.removeAllListeners(i+"message"))}}}));var _e=function(e,t){ve.on(""+de.get(this)+e,__errorTracer__.surroundThirdByTryCatch(t,"at socketTask.on"+e+" callback function"))},ye=(ae((se=function(){function e(t,n){var r=this;Object(N.default)(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;var i,o=le++;de.set(this,o),pe.set(this,n),Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((function(e){"function"==typeof n[e]&&(n[e]=__errorTracer__.surroundThirdByTryCatch(n[e],"at api connectSocket "+e+" callback function"))})),he.set(this,Date.now()),Object(U.isNumber)(n.timeout)||(n.timeout=0);var a=function(){Object(O.invokeMethod)("createSocketTask",n,{beforeAll:function(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:function(e){fe.set(r,e.socketTaskId),ge[e.socketTaskId]=r},beforeFail:function(e){var t=n.url,o=Date.now()-he.get(r),a=n.__skipDomainCheck__;i=e.errMsg,Object(ue.reportNetworkAPI)("connectSocket",t,2,o,i,"",a,0)}}),i&&(r.readyState=r.CLOSED,setTimeout((function(){ve.emit(o+"error",{errMsg:i})}),0))};Object(U.isFunction)(n.customCheck)?n.customCheck(n,(function(e){e?(Object(O.beforeInvokeFail)("connectSocket",n,e),r.readyState=r.CLOSED,setTimeout((function(){ve.emit(o+"error",{errMsg:e})}),0)):a()})):a()}return Object(oe.default)(e,[{key:"send",value:function(e){var t=this;if(this.readyState===this.OPEN){var n=Date.now();Object(O.invokeMethod)("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:fe.get(this)}),{beforeAll:function(r){if(r.errMsg=r.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){var i=pe.get(t).url,o=r.errMsg.indexOf("ok")>-1?1:2,a=Date.now()-n,s=r.errMsg,c=pe.get(t).__skipDomainCheck__,u=Object(A.getDataLength)(e.data);Object(ue.reportNetworkAPI)("sendSocketMessage",i,o,a,s,"",c,u)}}})}else Object(O.beforeInvokeFail)("SocketTask.send",e,"SocketTask.readyState is not OPEN")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:fe.get(this)}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}},{key:"onOpen",value:function(e){_e.call(this,"open",e)}},{key:"onClose",value:function(e){_e.call(this,"close",e)}},{key:"onMessage",value:function(e){_e.call(this,"message",e)}},{key:"onError",value:function(e){_e.call(this,"error",e)}}]),e}()).prototype,"send",[I.promised],Object.getOwnPropertyDescriptor(se.prototype,"send"),se.prototype),ae(se.prototype,"close",[I.promised],Object.getOwnPropertyDescriptor(se.prototype,"close"),se.prototype),se),me=n(178),be=5;w.default.onReady((function(){w.default.wxAppInfo&&w.default.wxAppInfo.maxWebsocketConnect&&(be=w.default.wxAppInfo.maxWebsocketConnect)}));var we=y.default.WSS,Oe=new WeakMap,Ee=new WeakMap,Se=new WeakMap,Te={},Ie=new ce.Emitter,Ae=0,Ce=0;function ke(e,t,n){t.errMsg=t.errMsg||"ok";var r="ok"===t.errMsg;Object(O.beforeInvokeCallback)({name:e,args:n,success:r,errMsg:t.errMsg})}var xe=function(){function e(t,n){var r=this;Object(N.default)(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1});var i=Ae++,o=new we;Oe.set(this,n),Ee.set(this,o),Se.set(this,i);var a=Date.now();o.onopen=function(e,t){r.readyState!==r.CLOSED&&(Ce++,r.readyState=r.OPEN,Ie.emit(i+"open",{header:e,profile:t}),Ie.emit("onSocketOpen",{header:e,profile:t},r),Object(ue.reportNetworkAPI)("connectSocket",n.url,1,Date.now()-a,"","",n.__skipDomainCheck__,0,0,t))},o.onclose=function(e,t){Ce--,r.readyState=r.CLOSED,Ie.emit(i+"close",{code:e,reason:t}),Ie.emit("onSocketClose",{code:e,reason:t},r)},o.onmessage=function(e){r.readyState!==r.CLOSED&&(Object(U.isArrayBuffer)(e)&&(e.__proto__=ArrayBuffer.prototype),Ie.emit(i+"message",{data:e}),Ie.emit("onSocketMessage",{data:e},r))},o.onerror=function(e,t){Ce--,r.readyState=r.CLOSED,setTimeout((function(){Ie.emit(i+"error",{errCode:e,errMsg:t}),Ie.emit("onSocketError",{errCode:e,errMsg:t},r)}),0)};var s=function(){var e={errMsg:""};Ce>=be?(r.readyState=r.CLOSED,e.errMsg="fail reach max websocket connect count "+be):(e.errMsg=o.connect(Object(A.filterObject)(n,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),e.errMsg,"ok"===e.errMsg&&(Te[i]=r),ke("connectSocket",e,n)};Object(U.isFunction)(n.customCheck)?n.customCheck(n,(function(e){e?ke("connectSocket",{errMsg:e},n):s()})):(s(),Object(me.checkNetworkAPIURL)({api:"websocket",url:n.url}).then((function(e){if(n.url,!(n.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((function(e){r.readyState=r.CLOSED;var t=e.message||e.errMsg;Ie.emit(i+"error",{errMsg:t}),Ie.emit("onSocketError",{errMsg:t},r)})))}return Object(oe.default)(e,[{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errMsg:Ee.get(this).send(e.data)};if(ke("sendSocketMessage",t,e),Math.random()<.01){var n=Oe.get(this).url,r=-1===t?2:1,i=0,o="",a="",s=Oe.get(this).__skipDomainCheck__,c=Object(A.getDataLength)(e.data);Object(ue.reportNetworkAPI)("sendSocketMessage",n,r,i,o,a,s,c)}}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.readyState;var t={errMsg:Ee.get(this).close(Object(U.isNumber)(e.code)?e.code:1e3,e.reason)};ke("closeSocket",t,e)}},{key:"onOpen",value:function(e){Ie.on(Se.get(this)+"open",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}},{key:"onClose",value:function(e){Ie.on(Se.get(this)+"close",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}},{key:"onMessage",value:function(e){Ie.on(Se.get(this)+"message",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}},{key:"onError",value:function(e){Ie.on(Se.get(this)+"error",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}]),e}(),Pe=ye,De=ge;y.default.WSS&&w.default.onReady((function(){var e=!1,t=m.IS_IOS?"clicfg_appbrand_ios_native_socket_wcwss":"clicfg_appbrand_native_socket_wcwss";Object(x._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=Object(C.checkPermissionSync)("bindingWebSocket");(e||n)&&(Pe=xe,De=Te)}));var Re=new WeakMap,je={};function Ne(e,t){return je[t]||(je[t]=new WeakMap,ve.on("onSocket"+t,Me(t)),Ie.on("onSocket"+t,Me(t))),function(n){Object(O.beforeInvoke)("onSocket"+t,n,I.noop)&&je[t].set(e,n)}}function Me(e){return function(t,n){var r=n.__socketInstance__,i=je[e].get(r),o=Re.get(r);i&&n===o&&__errorTracer__.surroundThirdByTryCatch(i,"at onSocket"+e+" callback function")(t)}}var Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({__skipDomainCheck__:!1},e);var t={};return{connectSocket:function(n){if(Object(O.beforeInvoke)("connectSocket",n,{url:""}))if(!1!==Object(j.validateUrl)(n.url,"websocket")){"object"!==Object(R.default)(n.header)&&void 0!==n.header&&delete n.header;var r={};n.header&&(r=Object(j.convertObjectValueToString)(n.header)),n.__skipDomainCheck__=e.__skipDomainCheck__;try{var i=Re.get(t),o=new Pe(t,Object.assign({},n,{header:r}));return i&&i.readyState!==i.CLOSED?i.readyState:Re.set(t,o),o}catch(e){return e.message,void Object(O.beforeInvokeFail)("connectSocket",n,e.message)}}else Object(O.beforeInvokeFail)("request",n,'invalid url "'+n.url+'"')},closeSocket:function(e){var n=Re.get(t);for(var r in n&&n.readyState!==n.CLOSED?(n.readyState=n.CLOSED,n.close(e)):Object(O.beforeInvokeFail)("closeSocket",e,"WebSocket is not connected"),De){var i=De[r];i.__socketInstance__===t&&(i.readyState=i.CLOSED,i!==n&&i.close())}},sendSocketMessage:function(e){var n=Re.get(t);n&&n.readyState===n.OPEN?n.send(e):Object(O.beforeInvokeFail)("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:Ne(t,"Open"),onSocketClose:Ne(t,"Close"),onSocketMessage:Ne(t,"Message"),onSocketError:Ne(t,"Error")}},Be=Le(),Fe=function(){return Le({__skipDomainCheck__:!0})},Ue=n(29),We=n(30),Ve=(new WeakMap,new WeakMap,new We.default);Object(O.onMethod)("onDownloadAppStateChangeForNative",(function(e){var t=e.state,n=e.downloadId;switch(delete e.state,delete e.downloadId,delete e.appId,t){case"download_succ":Ve.emit(n+":progressUpdate",e),Ve.emit(n+":success",e);break;case"download_failed":Ve.emit(n+":fail",e);break;case"download_progress_changed":Ve.emit(n+":progressUpdate",e)}"download_succ"!==t&&"download_failed"!==t||(Ve.removeAllListeners(n+":success"),Ve.removeAllListeners(n+":fail"),Ve.removeAllListeners(n+":progressUpdate"))}));var Ge=n(48),He=n(81),ze=n(154);function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var qe=function(e){Object(M.default)(n,e);var t=Ye(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,"APP-SERVICE-SDK:"+e)).type="AppServiceSdkKnownError",r}return n}(Object(ze.default)(Error)),Ke=0,Je=function(e){return Array.isArray(e)?e.filter((function(e){return"string"==typeof e&&!e.startsWith("__plugins__")})):[]},Xe={setStorage:function(e){if(Object(O.beforeInvoke)("setStorage",e,{key:""}))try{var t=Object(I.anyTypeToString)(e.data),n=t.data,r=t.dataType;Object(O.invokeMethod)("setStorage",{key:e.key,data:n,dataType:r,storageId:Ke,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:"setStorage:fail "+t.message}),"function"==typeof e.complete&&e.complete({errMsg:"setStorage:fail "+t.message})}},setStorageSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Object(O.beforeInvoke)("setStorage",e,"")){var n=m.IS_IOS?"setStorage":"setStorageSync",r=Object(I.anyTypeToString)(t),i=r.data,o=r.dataType,a=!1,s="";if(Object(O.invokeMethod)(n,{key:e,data:i,dataType:o,storageId:Ke,fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=!0,s=e.errMsg.replace("setStorage:","setStorageSync:")}}),a)throw new qe(s)}},getStorage:function(e){Object(O.beforeInvoke)("getStorage",e,{key:""})&&Object(O.invokeMethod)("getStorage",Object.assign({},e,{storageId:Ke}),{beforeSuccess:function(e){e.data=Object(I.stringToAnyType)(e.data,e.dataType),delete e.dataType},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}})},getStorageSync:function(e){if(Object(U.isString)(e)){var t,n=m.IS_IOS?"getStorage":"getStorageSync";return Object(O.invokeMethod)(n,{key:e,storageId:Ke},{beforeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object(I.stringToAnyType)(e.data,e.dataType)},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}}),t}},getStorageInfo:function(e){Object(O.invokeMethod)("getStorageInfo",Object.assign({},e,{storageId:Ke}),{beforeAll:function(e){e.keys=Je(e.keys)}})},getStorageInfoSync:function(){var e;return Object(O.invokeMethod)("getStorageInfoSync",{storageId:Ke},{beforeAll:function(t){e=t,t.keys=Je(t.keys),delete t.errMsg}}),e},removeStorage:function(e){Object(O.beforeInvoke)("removeStorage",e,{key:""})&&Object(O.invokeMethod)("removeStorage",Object.assign({},e,{storageId:Ke}))},removeStorageSync:function(e){Object(O.beforeInvoke)("removeStorageSync",e,"")&&Object(O.invokeMethod)("removeStorageSync",{key:e,storageId:Ke})},clearStorage:function(e){Object(O.invokeMethod)("clearStorage",Object.assign({},e,{storageId:Ke}))},clearStorageSync:function(){var e=m.IS_IOS?"clearStorage":"clearStorageSync";Object(O.invokeMethod)(e,{storageId:Ke})}},$e={app:0,game:0,opendata:1,singlePage:2},Ze=function(e){var t=$e[e],n={};return Object.keys(Xe).forEach((function(e){var r=Xe[e];n[e]=function(){return Ke=t,r.apply(void 0,arguments)}})),n},Qe={app:Ze("app"),game:Ze("game"),opendata:Ze("opendata"),singlePage:Ze("singlePage")},et=n(41),tt=n(25),nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){Object(O.invokeMethod)("getBatteryInfo",e)}),0)},rt=function(){var e={level:100,isCharging:!0};if(Object(O.invokeMethod)("getBatteryInfo",{complete:function(t){return e=t}}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e},it=n(36),ot=!1,at=Object(E.getEventManager)("accelerometerChange"),st=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=void 0!==t[e.interval]?t[e.interval]:t.normal,r=Object(j.assign)(e,{interval:n,enable:!0});Object(O.invokeMethod)("enableAccelerometer",r,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),ot=!0},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("enableAccelerometer",Object(j.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),ot=!1},ut=at.onMethod,lt=at.offMethod,dt=function(e){ot||(Object(O.invokeMethod)("enableAccelerometer",{enable:!0}),ot=!0),ut(e)};Object(O.onMethod)("onAccelerometerChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w.default.clientVersion>=369558016&&w.default.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),at.emit(e)}));var ft=!1,pt=Object(E.getEventManager)("compassChange"),ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("enableCompass",Object(j.assign)(e,{enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),ft=!0},gt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("enableCompass",Object(j.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),ft=!1},vt=pt.onMethod,_t=pt.offMethod,yt=function(e){ft||(Object(O.invokeMethod)("enableCompass",{enable:!0}),ft=!0),vt(e)};Object(O.onMethod)("onCompassChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};pt.emit(e)}));var mt=n(20),bt=n(26);Object(bt.default)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=(e.products||[]).map((function(e){return{info:{title:e.info.title,category:e.info.category.map((function(e){return{name:e.name}}))}}}))})),Object(bt.default)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=e.products||[]}));var wt,Ot=function(e){if(""!==W.default.currentClipBoardData){var t;"undefined"!=typeof __appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===W.default.currentWebviewId}))||{});var n=[W.default.currentClipBoardData,t?t.route:"",e?1:0,t?Object.keys(t.options||{}).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.options[e])})).join("&"):"",Reporter.getAppType()].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Clipboard",value:n})}},Et=n(23),St=__safeway__.apiSign.makeApiSign,Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.invokeMethod)("getClipboardData",St("getClipboardData",e)),7!==w.default.appType){var t=w.default.system,n=w.default.accountInfo;if(w.default.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){var r=n?n.nickname:"小程序";Object(Et.showToast)({icon:"none",title:"“"+r+"”读取了你的剪切板内容"})}}},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("setClipboardData",e,{data:""})){var t=St("setClipboardData",e);Object(O.invokeMethod)("setClipboardData",t,{beforeSuccess:function(){Object(O._invokeMethod)("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1});try{W.default.currentClipBoardData=e.data,Ot(!0)}catch(e){}}})}},At=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.uuids.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(O.beforeInvokeFail)("startBeaconDiscovery",e,"invalid service uuid")}Object(O.invokeMethod)("startBeaconDiscovery",e)}else Object(O.beforeInvokeFail)("startBeaconDiscovery",e,"uuid must be an Array");else Object(O.beforeInvokeFail)("startBeaconDiscovery",e,"must have uuid")},Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("stopBeaconDiscovery",e)},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("getBeacons",e)},xt=function(e){Object(O.beforeInvoke)("onBeaconUpdate",e,I.noop)&&Object(O.onMethod)("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},Pt=function(){Object(O.onMethod)("onBeaconUpdated",(function(){}))},Dt=function(e){Object(O.beforeInvoke)("onBeaconServiceChange",e,I.noop)&&Object(O.onMethod)("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},Rt=function(){Object(O.onMethod)("onBeaconServiceChanged",(function(){}))},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("captureScreen",e,{})},Nt=n(168),Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("getScreenBrightness",e,{})},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("setScreenBrightness",e,{})},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("setKeepScreenOn",e,{keepScreenOn:!0})&&Object(O.invokeMethod)("setKeepScreenOn",e,{})},Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("vibrateShort",e,{})},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("vibrateLong",e,{})},Wt=n(13),Vt=n.n(Wt),Gt=n(37),Ht=(n(58),Object(I.async2Invoke)("searchContacts",Object(Gt.default)(Vt.a.mark((function e(){var t,n,r=arguments;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},Object(O.beforeInvokePromise)(t,{phoneNumber:""}),/^.{8,}$/.test(t.phoneNumber)){e.next=4;break}throw new Error("phoneNumber length is less than 8");case 4:return e.next=6,Object(O.invokeMethodAsync)("searchContacts",t,{});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("openBluetoothAdapter",e,{})}),zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("closeBluetoothAdapter",e,{})},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("getBluetoothAdapterState",e,{})},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void Object(O.beforeInvokeFail)("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(O.beforeInvokeFail)("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((function(e){return m.IS_ANDROID&&(e=e.toUpperCase()),4===e.length?"0000"+e+"-0000-1000-8000-00805F9B34FB":8===e.length?e+"-0000-1000-8000-00805F9B34FB":e}))}}Object(O.invokeMethod)("startBluetoothDevicesDiscovery",e,{})},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("stopBluetoothDevicesDiscovery",e,{})},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("getBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((function(e){if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Object(j.base64ToArrayBuffer)(e.advertisData)),e.serviceData){var t=e.serviceData;Object.keys(t).forEach((function(e){t[e]&&(t[e]=Object(j.base64ToArrayBuffer)(t[e]))}))}return e}))}})},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("getBLEDeviceRSSI",e,{deviceId:""})&&Object(O.invokeMethod)("getBLEDeviceRSSI",e)},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void Object(O.beforeInvokeFail)("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(O.beforeInvokeFail)("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((function(e){return m.IS_ANDROID&&(e=e.toUpperCase()),4===e.length?"0000"+e+"-0000-1000-8000-00805F9B34FB":8===e.length?e+"-0000-1000-8000-00805F9B34FB":e}))}}Object(O.invokeMethod)("getConnectedBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((function(e){return e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Object(j.base64ToArrayBuffer)(e.advertisData)),e}))}})},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("createBLEConnection",e,{deviceId:""})&&Object(O.invokeMethod)("createBLEConnection",e,{})},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("closeBLEConnection",e,{deviceId:""})&&Object(O.invokeMethod)("closeBLEConnection",e,{})},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("getBLEDeviceServices",e,{deviceId:""})&&Object(O.invokeMethod)("getBLEDeviceServices",e,{beforeSuccess:function(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&Object(O.invokeMethod)("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:m.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess:function(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&Object(O.invokeMethod)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:m.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:m.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&Object(O.invokeMethod)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:m.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:m.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll:function(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&Object(O.invokeMethod)("readBLECharacteristicValue",Object.assign({},e,{serviceId:m.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:m.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&Object(O.invokeMethod)("writeBLECharacteristicValue",Object.assign({},e,{value:Object(j.arrayBufferToBase64)(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:m.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},sn=function(e){Object(O.onMethod)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},cn=function(){Object(O.onMethod)("onBLEConnectionStateChanged",(function(){}))},un=function(e){Object(O.onMethod)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function"))},ln=function(){Object(O.onMethod)("onBLEConnectionStateChanged",(function(){}))},dn=function(e){Object(O.onMethod)("onBLECharacteristicValueChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t.value&&(t.value=Object(j.base64ToArrayBuffer)(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},fn=function(){Object(O.onMethod)("onBLECharacteristicValueChange",(function(){}))},pn=function(e){Object(O.onMethod)("onBluetoothDeviceFound",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];Array.isArray(t.devices)?n=t.devices:n.push(t),n=n.map((function(e){try{e.advertisData=Object(j.base64ToArrayBuffer)(e.advertisData)}catch(e){}try{var t=e.serviceData||{};Object.keys(t).forEach((function(e){t[e]&&(t[e]=Object(j.base64ToArrayBuffer)(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:n})}))},hn=function(){Object(O.onMethod)("onBluetoothDeviceFound",(function(){}))},gn=function(e){Object(O.onMethod)("onBluetoothAdapterStateChange",__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function"))},vn=function(){Object(O.onMethod)("onBluetoothAdapterStateChange",(function(){}))},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.IS_ANDROID?Object(O.beforeInvoke)("setBLEMTU",e,{deviceId:"",mtu:0})&&Object(O.invokeMethod)("setBLEMTU",e,{}):Object(O.beforeInvokeFail)("setBLEMTU",e,"can only be invoked on android")},yn=function(e,t){return Object.assign({},e,Object(mt.default)({},t,Object(j.arrayBufferToBase64)(e[t])))},mn=new We.default,bn=new WeakMap,wn=new WeakMap,On=function(e,t){var n=bn.get(this)+"_on"+e,r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at BLEPeripheralServer.on"+e+" callback function")(n)};wn.get(this).set(t,r),mn.on(n,r)},En=function(e,t){var n=bn.get(this)+"_on"+e,r=wn.get(this);if(Object(U.isFunction)(t)){var i=r.get(t);Object(U.isFunction)(i)&&(r.delete(t),mn.off(n,i))}else wn.set(this,new WeakMap),mn.removeAllListeners(n)},Sn=Object(E.getEventManager)("CharacteristicReadRequest");Sn.onMethod,Sn.offMethod;Object(O.onMethod)("onCharacteristicReadRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mn.emit(e.serverId+"_onCharacteristicReadRequest",e),Sn.emit(e)}));var Tn=Object(E.getEventManager)("CharacteristicWriteRequest");Tn.onMethod,Tn.offMethod;Object(O.onMethod)("onCharacteristicWriteRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof e.value&&(e.value=Object(j.base64ToArrayBuffer)(e.value)),mn.emit(e.serverId+"_onCharacteristicWriteRequest",e),Tn.emit(e)}));var In=Object(E.getEventManager)("CharacteristicSubscribed");In.onMethod,In.offMethod;Object(O.onMethod)("onCharacteristicSubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mn.emit(e.serverId+"_onCharacteristicSubscribed",e),In.emit(e)}));var An=Object(E.getEventManager)("CharacteristicUnsubscribed");An.onMethod,An.offMethod;Object(O.onMethod)("onCharacteristicUnsubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};mn.emit(e.serverId+"_onCharacteristicUnsubscribed",e),An.emit(e)}));var Cn=(ae((wt=function(){function e(t){var n=this;Object(N.default)(this,e),this.serverId=t,this.services=[],bn.set(this,t),wn.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((function(e){n["on"+e]=function(t){On.call(n,e,t)},n["off"+e]=function(t){En.call(n,e,t)}}))}return Object(oe.default)(e,[{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=Object.assign({},e,{serverId:this.serverId});Object(O.invokeMethod)("closeBLEPeripheralServer",n,{beforeSuccess:function(){t.serverId="",bn.delete(t)}})}},{key:"addService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("BLEPeripheralServer.addService",e,{service:{}})){var t=e.service.characteristics||[];t=t.map((function(e){var t=e.descriptors||[];return t=t.map((function(e){return yn(e,"value")})),Object.assign({},e,{value:Object(j.arrayBufferToBase64)(e.value),descriptors:t})}));var n=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),r=this;Object(O.invokeMethod)("addBLEPeripheralService",n,{beforeSuccess:function(){r.services.push(e.service.uuid)}})}}},{key:"removeService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("BLEPeripheralServer.removeService",e,{serviceId:""})){var t=this,n=Object.assign({},e,{serverId:this.serverId});Object(O.invokeMethod)("removeBLEPeripheralService",n,{beforeSuccess:function(){var n=t.services.indexOf(e.serviceId);n>=0&&t.services.splice(n,1)}})}}},{key:"startAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.advertiseRequest||{},n=t.manufacturerData||[];n=n.map((function(e){return yn(e,"manufacturerSpecificData")}));var r=Object.assign({},t,{manufacturerData:n}),i=Object.assign({},e,{serverId:this.serverId,advertiseRequest:r,powerLevel:e.powerLevel||"medium"});Object(O.invokeMethod)("startBLEPeripheralAdvertising",i,{})}},{key:"stopAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId});Object(O.invokeMethod)("stopBLEPeripheralAdvertising",t,{})}},{key:"writeCharacteristicValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId,value:Object(j.arrayBufferToBase64)(e.value)});Object(O.invokeMethod)("writeBLEPeripheralCharacteristicValue",t,{})}}]),e}()).prototype,"close",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"close"),wt.prototype),ae(wt.prototype,"addService",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"addService"),wt.prototype),ae(wt.prototype,"removeService",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"removeService"),wt.prototype),ae(wt.prototype,"startAdvertising",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"startAdvertising"),wt.prototype),ae(wt.prototype,"stopAdvertising",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"stopAdvertising"),wt.prototype),ae(wt.prototype,"writeCharacteristicValue",[I.promised],Object.getOwnPropertyDescriptor(wt.prototype,"writeCharacteristicValue"),wt.prototype),wt),kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("createBLEPeripheralServer",e,{beforeSuccess:function(e){var t=e.serverId,n=new Cn(t);delete e.serverId,e.server=n}})},xn=Object(E.getEventManager)("BLEPeripheralConnectionStateChanged"),Pn=xn.onMethod,Dn=xn.offMethod;Object(O.onMethod)("onBLEPeripheralConnectionStateChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xn.emit(e)}));var Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("makeBluetoothPair",e,{deviceId:""})){var t=Object.assign({},e);Object(U.isArrayBuffer)(e.pin||null)&&(t.pin=Object(j.arrayBufferToBase64)(e.pin)),Object(O.invokeMethod)("makeBluetoothPair",t)}},jn=null,Nn=["none","low","high"];Object(O.onMethod)("onEvaluateWifi",__errorTracer__.surroundThirdByTryCatch((function(e){var t,n={SSID:e.wifi.SSID,BSSID:e.wifi.BSSID,confidence:"none"};if("function"==typeof jn)try{t=jn(e)||{}}finally{Nn.find((function(e){return e===t.confidence}))&&(n.confidence=t.confidence),Object(O.invokeMethod)("evaluateWifi",n,{})}}),"at onEvaluateWifi callback function"));var Mn=n(34);new WeakMap;var Ln=new We.EventEmitter2,Bn="onNFCDiscovered",Fn="onNdefMessageRead";Object(Mn.onNativeEvent)("onNFCDiscovered",(function(e){Ln.emit(Bn,e)})),Object(Mn.onNativeEvent)("onNdefMessageRead",(function(e){Ln.emit(Fn,e)}));var Un=n(31),Wn=Object(E.getEventManager)("local-service-found"),Vn=Object(E.getEventManager)("local-service-lost"),Gn=Object(E.getEventManager)("local-service-discovery"),Hn=Object(E.getEventManager)("local-service-resolve-fail"),zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Un.invokeMethod)("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")}})},Yn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Un.invokeMethod)("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")}})};Object(Un.onMethod)("onLocalServiceEvent",(function(e){var t=Object.assign({},e);switch("object"===Object(R.default)(t.attributes)&&null!==t.attributes&&Object.keys(t.attributes).forEach((function(e){var n=t.attributes[e];t.attributes[e]=Object(j.base64ToArrayBuffer)(n)})),delete t.event,e.event){case"found":Wn.emit(t);break;case"lost":Vn.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Gn.emit(t);break;case"resolveFail":delete t.ip,delete t.port,Hn.emit(t)}}));var qn=Wn.onMethod,Kn=Wn.offMethod,Jn=Vn.onMethod,Xn=Vn.offMethod,$n=Gn.onMethod,Zn=Gn.offMethod,Qn=Hn.onMethod,er=Hn.offMethod,tr=Object(E.getEventManager)("gyroscopeChange"),nr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;Object(O.invokeMethod)("enableGyroscope",Object(j.assign)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},rr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("enableGyroscope",Object(j.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},ir=tr.onMethod,or=tr.offMethod;Object(O.onMethod)("onGyroscopeChange",(function(e){tr.emit(e)}));var ar=Object(E.getEventManager)("deviceMotionChange"),sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;Object(O.invokeMethod)("enableDeviceMotionChangeListening",Object(j.assign)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},cr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("enableDeviceMotionChangeListening",Object(j.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},ur=ar.onMethod,lr=ar.offMethod;Object(O.onMethod)("onDeviceMotionChange",(function(e){ar.emit(e)}));var dr=n(123),fr=(n(169),n(51)),pr=new We.default,hr={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};Object(O.onMethod)("onRecorderStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,pr.emit("onRecorderStateChange_"+t,e)}));var gr,vr=function(e){Object(O.invokeMethod)("operateRecorder",Object.assign({},e))},_r={start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(hr).map((function(e){return parseInt(e,10)})).indexOf(t.sampleRate))throw new Error('invalid sampleRate "'+t.sampleRate+'", sampleRate should be one of '+JSON.stringify(Object.keys(hr)));if(t.encodeBitRate>hr[t.sampleRate][1]||t.encodeBitRate<hr[t.sampleRate][0])throw new Error('invalid encodeBitRate "'+t.encodeBitRate+'", encodeBitRate should be greater than '+hr[t.sampleRate][0]+" and less than "+hr[t.sampleRate][1]);t.operationType="start",t.fail=function(e){pr.emit("onRecorderStateChange_error",e)},vr(t)},pause:function(){vr({operationType:"pause",fail:function(e){pr.emit("onRecorderStateChange_error",e)}})},resume:function(){vr({operationType:"resume",success:function(){pr.emit("onRecorderStateChange_resume")},fail:function(e){pr.emit("onRecorderStateChange_error",e)}})},stop:function(){vr({operationType:"stop",fail:function(e){pr.emit("onRecorderStateChange_error",e)}})},onStart:function(e){pr.removeAllListeners("onRecorderStateChange_start"),pr.on("onRecorderStateChange_start",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume:function(e){pr.removeAllListeners("onRecorderStateChange_resume"),pr.on("onRecorderStateChange_resume",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause:function(e){pr.removeAllListeners("onRecorderStateChange_pause"),pr.on("onRecorderStateChange_pause",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop:function(e){pr.removeAllListeners("onRecorderStateChange_stop"),pr.on("onRecorderStateChange_stop",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded:function(e){pr.removeAllListeners("onRecorderStateChange_frameRecorded"),pr.on("onRecorderStateChange_frameRecorded",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError:function(e){pr.removeAllListeners("onRecorderStateChange_error"),pr.on("onRecorderStateChange_error",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin:function(e){pr.removeAllListeners("onRecorderStateChange_interruptionBegin"),pr.on("onRecorderStateChange_interruptionBegin",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd:function(e){pr.removeAllListeners("onRecorderStateChange_interruptionEnd"),pr.on("onRecorderStateChange_interruptionEnd",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}},yr=function(){return _r},mr=function(e){Object(fr.reportDeprecatedAPI)("startRecord"),Object(O.invokeMethod)("startRecord",e)},br=function(e){Object(fr.reportDeprecatedAPI)("stopRecord"),Object(O.invokeMethod)("stopRecord",e)},wr=n(63),Or=new ce.Emitter("BackgroundAudioManager",!0),Er=wxNativeConsole.createLogger("BackgroundAudioManager"),Sr={src:"",currentTime:0,duration:0,paused:!0,buffered:0,title:"",coverImgUrl:"",description:"",startTime:0,playbackRate:1,referrerPolicy:""};Object(O.onMethod)("onBackgroundAudioNext",(function(){Or.emit("Next")})),Object(O.onMethod)("onBackgroundAudioPrev",(function(){Or.emit("Prev")})),Object(O.onMethod)("onBackgroundAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,"play"===t?(Sr.paused=!1,W.default.possessingBackgroundAudioPlayer=!0):"preempted"===t||"occupied"===t?(W.default.possessingBackgroundAudioPlayer=!1,Or.emit("Stop",e)):("pause"===t||"stop"===t)&&(Sr.paused=!0),Or.emit(""+t[0].toUpperCase()+t.substr(1),e)}));var Tr={play:function(){setTimeout((function(){Ir({operationType:"play"})}),0)},pause:function(){setTimeout((function(){Ir({operationType:"pause"})}),0)},seek:function(e){if("number"!=typeof e)throw new Error("BackgroundAudioManager.seek(currentTime): unexpected type "+Object(R.default)(e));setTimeout((function(){Ir({currentTime:e,operationType:"seek"})}),0)},stop:function(){setTimeout((function(){Ir({operationType:"stop"})}),0)},onTimeUpdate:function(e){var t=this;void 0===gr&&(gr=setInterval((function(){var e=Sr.currentTime;Ar("currentTime",(function(){"active"===W.default.runningStatus&&!1!==W.default.possessingBackgroundAudioPlayer&&t.currentTime!==e&&Or.emit("Timeupdate")}))}),250)),Or.off("Timeupdate"),Or.on("Timeupdate",e)}};function Ir(e){Object(O.invokeMethod)("operateBackgroundAudio",e)}["src","title","epname","singer","startTime","coverImgUrl","currentTime","duration","paused","buffered","webUrl","protocol","playbackRate","referrerPolicy"].forEach((function(e){Object.defineProperty(Tr,e,{get:function(){return"src"===e&&Tr.srcCloudId?Tr.srcCloudId:"coverImgUrl"===e&&Tr.coverCloudId?Tr.coverCloudId:Ar(e)},set:function(t){["src","title","epname","singer","coverImgUrl","startTime","webUrl","protocol","playbackRate","referrerPolicy"].indexOf(e)>-1&&("src"===e?Object(wr.getCloudFileUrl)([t],"audio",(function(n){/^(cloud):\/\//.test(t)?Tr.srcCloudId=t:Tr.srcCloudId="",kr(e,n.data[0].url)})):"coverImgUrl"===e?Object(wr.getCloudFileUrl)([t],"image",(function(n){/^(cloud):\/\//.test(t)?Tr.coverCloudId=t:Tr.coverCloudId="",kr(e,n.data[0].url)})):kr(e,t))}})}));function Ar(e,t){if(!1!==W.default.possessingBackgroundAudioPlayer){var n=Sr[e];return Object(O.invokeMethod)("getBackgroundAudioState",{success:function(r){void 0===r.paused||!0===r.paused?r.paused=!0:r.paused=!1,Sr=Object.assign(Sr,r),n=Sr[e],"function"==typeof t&&t(n)},fail:function(e){var t=e.errMsg;Er.error("getBackgroundAudioState fail: "+t)}}),n}}["Canplay","Waiting","Error","Play","Pause","Seeking","Seeked","Ended","Stop","Next","Prev"].forEach((function(e){Tr["on"+e]=function(t){Or.off(e),Or.on(e,t)}}));var Cr={};function kr(e,t){if("src"===e&&!t)throw new Error("invalid BackgroundAudioManager.src: "+t);if("active"!==W.default.runningStatus&&!1===W.default.possessingBackgroundAudioPlayer)throw new j.AppServiceSdkKnownError("Can not set BackgroundAudioManager."+e+", background audio is preempted.");Cr[e]=t,1===Object.keys(Cr).length&&setTimeout((function(){Object.assign(Sr,Cr),Sr.src&&Sr.title?(Er.log("setBackgroundAudioState, stateInstance:",Sr),Object(O.invokeMethod)("setBackgroundAudioState",Object.assign({},Sr,{fail:function(e){var t=e.errMsg;Er.error(t),Or.emit("Error",{errMsg:t.replace(/^setBackgroundAudioState: fail /,"")})}})),Cr={}):Cr={}}),0)}var xr=new We.default;Object(O.onMethod)("onMusicPlay",(function(){W.default.possessingBackgroundAudioPlayer=!0,xr.emit("onBackgroundAudioPlay")}));var Pr=wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),Dr=new WeakMap;function Rr(e,t){var n=this;Dr.set(this,Object.assign(Dr.get(this),Object(mt.default)({},e,t))),this.promise.then((function(){var r;Object(O.invokeMethod)("operateAudioPlayer",(r={operationType:"update",containerId:Dr.get(n).containerId},Object(mt.default)(r,e,t),Object(mt.default)(r,"success",(function(e){Pr.log("update audio success",e)})),Object(mt.default)(r,"fail",(function(e){Pr.error("update audio fail",e)})),r))})).catch((function(e){Pr.error("update audio fail",e)}))}var jr=function(){function e(){var t=this;Object(N.default)(this,e),Dr.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),Object(O.invokeMethod)("operateAudioPlayer",{operationType:"create",success:function(e){Pr.log("operateAudioPlayer create success",e),Dr.set(t,Object.assign(Dr.get(t),{containerId:e.containerId})),t.resolve(e)},fail:function(e){Pr.error("operateAudioPlayer create fail",e),t.reject(e)}})}return Object(oe.default)(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(O.invokeMethod)("operateAudioPlayer",{operationType:"start",containerId:Dr.get(e).containerId,success:function(e){Pr.log("operateAudioPlayer start success",e),t(e)},fail:function(e){Pr.error("operateAudioPlayer start fail",e),n(e)}})}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Object(O.invokeMethod)("operateAudioPlayer",{operationType:"addTask",containerId:Dr.get(t).containerId,taskId:e.videoDecoderId,success:function(e){Pr.log("addAudioSource addTask success",e),n(e)},fail:function(e){Pr.error("addAudioSource addTask fail",e),r(e)}})}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Object(O.invokeMethod)("operateAudioPlayer",{operationType:"delTask",containerId:Dr.get(t).containerId,taskId:e.videoDecoderId,success:function(e){Pr.log("removeAudioSource delTask success",e),n(e)},fail:function(e){Pr.error("removeAudioSource delTask fail",e),r(e)}})}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(O.invokeMethod)("operateAudioPlayer",{operationType:"stop",containerId:Dr.get(e).containerId,success:function(e){Pr.log("stop audio success",e),t(e)},fail:function(e){Pr.log("stop audio fail",e),n(e)}})}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(O.invokeMethod)("operateAudioPlayer",{operationType:"remove",containerId:Dr.get(e).containerId,success:function(e){Pr.log("destroy audio success",e),t(e)},fail:function(e){Pr.error("destroy audio fail",e),n(e)}}),Dr.delete(e)}))}))}},{key:"volume",get:function(){return Dr.get(this).audioVolume},set:function(e){return Rr.call(this,"audioVolume",e),e}}]),e}(),Nr=wxNativeConsole.createLogger("MediaAudioPlayerBinding"),Mr=new WeakMap;function Lr(e,t){var n=this;Mr.set(this,Object.assign(Mr.get(this),Object(mt.default)({},e,t))),this.promise.then((function(){y.default.MediaToolKit.audioUpdate(Object(mt.default)({containerId:Mr.get(n).containerId},e,t),(function(e){0===e.errCode?Nr.log("operateAudioPlayer update success",e):Nr.error("operateAudioPlayer update fail",e)}))})).catch((function(e){Nr.error("update audio fail",e)}))}var Br=function(){function e(){var t=this;Object(N.default)(this,e),Mr.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),Nr.log("NativeGlobal.MediaToolKit.audioCreate",y.default.MediaToolKit.audioCreate),y.default.MediaToolKit.audioCreate({},(function(e){0===e.errCode?(Nr.log("NativeGlobal.MediaToolKit.audioCreate success",e),Mr.set(t,Object.assign(Mr.get(t),{containerId:e.containerId})),t.resolve(e)):(Nr.error("create MediaAudioPlayerBinding fail"),t.reject(e))}))}return Object(oe.default)(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){y.default.MediaToolKit.audioStart({containerId:Mr.get(e).containerId},(function(e){0===e.errCode?(Nr.log("operateAudioPlayer start success",e),t(e)):(Nr.error("operateAudioPlayer start fail",e),n(e))}))}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){y.default.MediaToolKit.audioAddTask({containerId:Mr.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(Nr.log("addAudioSource addTask success",e),n(e)):(Nr.error("addAudioSource addTask fail",e),r(e))}))}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){y.default.MediaToolKit.audioDelTask({containerId:Mr.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(Nr.log("removeAudioSource delTask success",e),n(e)):(Nr.error("removeAudioSource delTask fail",e),r(e))}))}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){y.default.MediaToolKit.audioStop({containerId:Mr.get(e).containerId},(function(e){0===e.errCode?(Nr.log("stop audio success",e),t(e)):(Nr.log("stop audio fail",e),n(e))}))}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){y.default.MediaToolKit.audioRemove({containerId:Mr.get(e).containerId},(function(e){0===e.errCode?(Nr.log("destroy audio success",e),t(e)):(Nr.error("destroy audio fail",e),n(e))})),Mr.delete(e)}))}))}},{key:"volume",get:function(){return Mr.get(this).audioVolume},set:function(e){return Lr.call(this,"audioVolume",e),e}}]),e}(),Fr=n(86),Ur=n(56),Wr=null,Vr=!1;Object(Ur.onAppRoute)((function(){Vr=!0})),Object(Fr.onAppRouteDone)((function(){Vr=!1,Wr&&(Hr(Wr),Wr=null)}));var Gr=100,Hr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type||(e.type="all"),void 0===e.count&&(e.count=Gr),Object(Un.beforeInvoke)("chooseMessageFile",e,{type:"",count:0})&&(e.count<=0?Object(Un.beforeInvokeFail)("chooseMessageFile",e,"param count should be larger than 0."):void 0===e.extension||"[object Array]"===Object.prototype.toString.call(e.extension)?!e.extension||e.extension.length?(e.count>Gr&&(e.count=Gr),Vr?Wr=e:Object(Un.invokeMethod)("chooseMessageFile",e)):Object(Un.beforeInvokeFail)("chooseMessageFile",e,"param extension should not be empty."):Object(Un.beforeInvokeFail)("chooseMessageFile",e,"param extension should be Array."))},zr=n(40),Yr=n(82),qr=Object(E.getEventManager)("AudioInterruptionBegin"),Kr=qr.onMethod,Jr=qr.offMethod,Xr=(qr.internalOnMethod,qr.internalOffMethod,Object(E.getEventManager)("AudioInterruptionEnd")),$r=Xr.onMethod,Zr=Xr.offMethod,Qr=(Xr.internalOnMethod,Xr.internalOffMethod,!1),ei=!1;Object(O.onMethod)("onAudioInterruptionBegin",(function(e){wxNativeConsole.info("onAudioInterruptionBegin"),Qr=!0,!1===ei&&qr.emit(e)})),Object(O.onMethod)("onAudioInterruptionEnd",(function(e){wxNativeConsole.info("onAudioInterruptionEnd"),Qr=!1,!1===ei&&Xr.emit(e)}));var ti=function(){!1===Qr&&!1===ei&&(Li.pauseAllAudio(),ei=!0,qr.emit({}))},ni=function(){return ei};Object.assign,new WeakMap,new WeakMap;var ri=n(198),ii=(n(199),Object.assign,n(177)),oi=new WeakMap,ai=new WeakMap,si=new WeakMap,ci=new WeakMap,ui=new WeakMap,li=new WeakMap,di=new WeakMap,fi=new Map,pi=new Map;y.default.EventHandler&&(y.default.EventHandler.onbindingobjectdestruct=function(e){var t=pi[e];t&&Object(O.invokeMethod)("getAudioState",{audioId:t,success:function(e){!0===e.paused?(fi.delete(t),Object(O.invokeMethod)("destroyAudioInstance",{audioId:t})):fi.get(t)&&!1===fi.get(t).loop&&bi.once(t+"_onAudioStateChange_ended",(function(){fi.delete(t),Object(O.invokeMethod)("destroyAudioInstance",{audioId:t})}))}})});var hi=function(e,t){var n=this;ai.set(this,Object.assign(ai.get(this),Object(mt.default)({},e,t))),"src"===e&&ai.set(this,Object.assign(ai.get(this),{paused:!0})),ci.get(this)&&(setTimeout((function(){var r=Object.assign({},ai.get(n),ui.get(n),{timestamp:Date.now(),audioId:oi.get(n),success:function(){ai.set(n,Object.assign(ai.get(n),Object(mt.default)({},e,t)))},fail:function(){vi.call(n)}});ni()&&(r.autoplay=!1),Object(O.invokeMethod)("setAudioState",r),ci.set(n,!0)}),0),ci.set(this,!1)),ui.set(this,Object.assign(ui.get(this),Object(mt.default)({},e,t)))},gi=function(e,t){var n=this;di.get(this).then((function(){hi.call(n,e,t)}))},vi=function(e,t){var n=this,r=ai.get(this)[e];return Object(O.invokeMethod)("getAudioState",{audioId:oi.get(this),success:function(i){delete i.errMsg,ai.set(n,Object.assign(ai.get(n),i)),r=i[e],"function"==typeof t&&t(r)}}),r},_i=function(e){var t=oi.get(this);Object(O.invokeMethod)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail:function(e){var t=e.errMsg;Ti("error",{errMsg:t,errCode:-1})}},e))},yi=function(e){var t=this;di.get(this).then((function(){setTimeout((function(){_i.call(t,e)}),0)}))},mi=function(){};w.default.onReady((function(){mi=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";void 0!==wx&&wx.version&&wx.version.version&&(r=wx.version.version);var i=w.default.appLaunchInfo,o="";o=Object.keys(i.query||{}).map((function(e){return e+"="+i.query[e]})).join("&"),o=encodeURIComponent(o);var a=[Math.round(Date.now()/1e3),i.scene,"",i.sessionid||i.sessionId,i.path,o,Object(it._getCurrentNetworkType)(),r,5,t,n,encodeURIComponent(e.substring(0,1024)).substring(0,1024),w.default.appType+1e3].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:a})}}));var bi=new We.default;Object(O.onMethod)("onAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.state=e.state.toLowerCase();var t=e.state,n=e.audioId;delete e.audioId,delete e.state;var r="play"!==t,i=fi.get(n);i&&(i.paused=r),Object(O.invokeMethod)("getAudioState",{audioId:n,success:function(e){var n=parseInt(e.currentTime/1e3,10),r=parseInt(e.duration/1e3,10);switch(t){case"canplay":mi(e.src,121,[e.autoplay?2:1,r].join(";"));break;case"waiting":mi(e.src,122,[n,r,e.buffered].join(";"));break;case"ended":mi(e.src,123,e.duration);break;case"error":mi(e.src,124,e.errCode);break;case"seeking":mi(e.src,125,[n,r,e.buffered].join(";"))}}}),bi.emit(n+"_onAudioStateChange_"+t,e)}));var wi=function(e,t){var n=oi.get(this)+"_onAudioStateChange_"+e,r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function")(n)};li.set(t,r),bi.on(n,r)},Oi=function(e,t){var n=this;di.get(this).then((function(){wi.call(n,e,t)}))},Ei=function(e,t){var n=oi.get(this)+"_onAudioStateChange_"+e;if(Object(U.isFunction)(t)){var r=li.get(t);Object(U.isFunction)(r)&&bi.off(n,r)}else bi.removeAllListeners(n)},Si=function(e,t){var n=this;di.get(this).then((function(){Ei.call(n,e,t)}))},Ti=function(e,t){bi.emit(oi.get(this)+"_onAudioStateChange_"+e,t)},Ii=0,Ai=!1,Ci=function(){function e(t){var n,r,i=this;Object(N.default)(this,e),ai.set(this,{}),ui.set(this,{}),si.set(this,void 0),ci.set(this,!0),di.set(this,new ii.WxPromise((function(e,t){n=e,r=t}))),Object(O.invokeMethod)(m.IS_ANDROID&&Object(A.isGame)()&&w.default.clientVersion>=654315008&&t?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:function(e){var t={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(fi.set(e.audioId,t),oi.set(i,e.audioId),ai.set(i,t),y.default.BindingObject){var r=new y.default.BindingObject;i.__bindingObject=r,pi[r.__id]=e.audioId}Ii+=1,++Ii>=1024&&!Ai&&m.IS_IOS&&(Ai=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(n,0)},fail:function(e){r(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((function(e){i["on"+e]=function(t){Oi.call(i,e.toLowerCase(),t)},i["off"+e]=function(t){Si.call(i,e.toLowerCase(),t)}}))}return Object(oe.default)(e,[{key:"src",get:function(){return this.cloudId?this.cloudId:vi.call(this,"src")},set:function(e){var t=this;"string"==typeof e&&0!==e.length?Object(wr.getCloudFileUrl)([e],"audio",(function(n){/^(cloud):\/\//.test(e)?t.cloudId=e:t.cloudId="",e=n.data[0].url,gi.call(t,"src",e)})):Ti.call(this,"error",{errMsg:"Failed to set src, the src "+e+" is invalid."})}},{key:"startTime",get:function(){return vi.call(this,"startTime")/1e3},set:function(e){"number"==typeof e?gi.call(this,"startTime",1e3*e):Ti("error",{errMsg:"Failed to set startTime, the startTime "+e+" is invalid."})}},{key:"autoplay",get:function(){return vi.call(this,"autoplay")},set:function(e){"boolean"==typeof e&&gi.call(this,"autoplay",e)}},{key:"loop",get:function(){return vi.call(this,"loop")},set:function(e){"boolean"==typeof e&&gi.call(this,"loop",e)}},{key:"obeyMuteSwitch",get:function(){return vi.call(this,"obeyMuteSwitch")},set:function(e){"boolean"==typeof e&&gi.call(this,"obeyMuteSwitch",e)}},{key:"volume",get:function(){return vi.call(this,"volume")},set:function(e){"number"!=typeof e||e<0||e>1||gi.call(this,"volume",e)}},{key:"playbackRate",get:function(){return vi.call(this,"playbackRate")},set:function(e){"number"!=typeof e||e<0||gi.call(this,"playbackRate",e)}},{key:"referrerPolicy",get:function(){return vi.call(this,"referrerPolicy")},set:function(e){"string"==typeof e&&gi.call(this,"referrerPolicy",e)}},{key:"paused",get:function(){return vi.call(this,"paused")}},{key:"duration",get:function(){return vi.call(this,"duration")/1e3}},{key:"currentTime",get:function(){return vi.call(this,"currentTime")/1e3}},{key:"buffered",get:function(){return vi.call(this,"buffered")/1e3}},{key:"play",value:function(){!1===ni()&&yi.call(this,{operationType:"play"})}},{key:"pause",value:function(){yi.call(this,{operationType:"pause"})}},{key:"stop",value:function(){yi.call(this,{operationType:"stop"})}},{key:"seek",value:function(e){"number"!=typeof e||e<0?Ti("error",{errMsg:"Failed to seek, the currentTime "+e+" is invalid."}):yi.call(this,{operationType:"seek",currentTime:1e3*e})}},{key:"destroy",value:function(){var e=this;di.get(this).then((function(){var t=oi.get(e);fi.has(t)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((function(e){var n=t+"_onAudioStateChange_"+e;bi.removeAllListeners(n)})),fi.delete(t),Ii-=1,Object(O.invokeMethod)("destroyAudioInstance",{audioId:t}))}))}},{key:"onTimeUpdate",value:function(e){var t=this;di.get(this).then((function(){var n=oi.get(t)+"_onAudioStateChange_timeupdate";void 0===si.get(t)&&si.set(t,setInterval((function(){if("active"===W.default.runningStatus&&!0!==ai.get(t).paused&&1!==ai.get(t).paused){var e=ai.get(t).currentTime;vi.call(t,"currentTime",(function(t){t!==e&&bi.emit(n)}))}}),250)),bi.removeAllListeners(n);var r=function(t){__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};li.set(e,r),bi.on(n,r)}))}},{key:"offTimeUpdate",value:function(e){var t=this;di.get(this).then((function(){Si.call(t,"timeupdate",e)}))}}],[{key:"pauseAllAudio",value:function(){fi.forEach((function(e,t){Object(O.invokeMethod)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}}]),e}(),ki=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],xi=["startTime","duration","currentTime"],Pi=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],Di=new Set,Ri=new WeakMap,ji=new WeakMap,Ni=new WeakMap,Mi=function(){function e(){var t=this;Object(N.default)(this,e);var n=new y.default.Audio,r=new We.default;Ri.set(this,n),Di.add(this),ki.forEach((function(e){return Object.defineProperty(t,e,{get:function(){return xi.includes(e)?n[e]/1e3:n[e]},set:function(t){xi.includes(e)?n[e]=1e3*t:n[e]=t}})})),Pi.forEach((function(e){t["on"+e]=function(t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function");ji.set(t,n),Ni.set(n,t),r.on(e,n)},t["off"+e]=function(t){if(Object(U.isFunction)(t)){var n=ji.get(t);Object(U.isFunction)(n)&&(r.off(e,n),ji.delete(t),Ni.delete(n))}else r.listeners(e).forEach((function(e){var t=Ni.get(e);ji.delete(t),Ni.delete(e)})),r.removeAllListeners(e)},n["on"+e.toLowerCase()]=function(t,n){t?r.emit(e,{errCode:t,errMsg:n}):r.emit(e)}}))}return Object(oe.default)(e,[{key:"play",value:function(){Ri.get(this).play()}},{key:"stop",value:function(){Ri.get(this).stop()}},{key:"pause",value:function(){Ri.get(this).pause()}},{key:"seek",value:function(e){Ri.get(this).seek(1e3*e)}},{key:"destroy",value:function(){var e=Ri.get(this);e.destroy&&e.destroy(),Di.delete(this),Ri.delete(this)}}],[{key:"pauseAllAudio",value:function(){Di.forEach((function(e){var t=Ri.get(e);t&&t.pause()}))}}]),e}(),Li=(m.IS_PC||m.IS_MINA)&&y.default.Audio?Mi:Ci,Bi=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Li(e)},Fi=n(66),Ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(O.invokeMethod)("getLocation",e,Object.assign({beforeSuccess:function(t){e.altitude||delete t.altitude}},t))},Wi=!1;w.default.onReady((function(){Wi="develop"===w.default.envVersion||"trial"===w.default.envVersion}));var Vi=0,Gi={wgs84:null,gcj02:null},Hi="频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化";Object(Ur.onAppRoute)((function(){Vi=0})),Object(Fi.onAppEnterBackground)((function(){Vi=0}));var zi=Object(E.getEventManager)("locationChange");zi.onMethod,zi.offMethod;Object(O.onMethod)("onLocationChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zi.emit(e)}));var Yi=Object(E.getEventManager)("locationChangeError");Yi.onMethod,Yi.offMethod;Object(O.onMethod)("onLocationChangeError",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Yi.emit(e)}));var qi=n(170),Ki=n(171),Ji=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("exitMiniProgram",e,{})},Xi=n(153),$i=n(57),Zi={debug:function(){},log:function(){},info:function(){},warn:function(){},error:function(){}};w.default.onReady((function(){Zi=wxNativeConsole.createLogger("LogManager"+(w.default.accountInfo&&w.default.accountInfo.appId)+"]")}));var Qi,eo,to,no="undefined"!=typeof __initHelper&&1===__initHelper,ro=function(){try{return Ge.accessSync.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return Zi.error("accessSync fail",e,arguments),{errMsg:e.message}}},io=function(){try{return Ge.renameSync.apply(this,arguments)}catch(e){return Zi.error("renameSync fail",e,arguments),{errMsg:e.message}}},oo=function(){try{var e=Ge.statSync.apply(this,arguments);return{stat:e,errMsg:"statSync:ok"}}catch(e){return Zi.error("statSync fail",e,arguments),{errMsg:e.message}}},ao=function(){try{var e=Ge.readFileSync.apply(this,arguments);return{data:e,errMsg:"readFileSync:ok"}}catch(e){return Zi.error("readFileSync fail",e,arguments),{errMsg:e.message}}},so=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},co=function(e){"string"!=typeof e&&(e+="");var t,n,r=0;for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<127?r+=1:n>=128&&n<=2047?r+=2:n>=2048&&n<=65535&&(r+=3);return r},uo=!1,lo=102400,fo=[],po={lastLogNum:1,lastLogSize:0},ho=!1,go=!1,vo=!1,_o={},yo=function(e){return eo+"log"+e},mo=Object(j.surroundByTryCatchFactory)((function(e){return ro(e).errMsg.indexOf("accessSync:ok")>=0})),bo=Object(j.surroundByTryCatchFactory)((function(e){var t=ro(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),wo=Object(j.surroundByTryCatchFactory)((function(e){if(Zi.info("initLog[1][isRemoteDebugMode="+no+", wxConfigReady="+uo+", isLogInit="+ho+"]"),no||!uo||ho)e&&e();else{if(Zi.info("initLog[2]"),Qi=w.default&&"devtools"===w.default.platform,eo=(w.default&&w.default.env.USER_DATA_PATH||(Qi?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!mo(eo))return Zi.info("initLog[3][mkdirSync][usrLogDir="+eo+"]"),function(){try{Ge.mkdirSync.apply(this,arguments)}catch(e){return Zi.error("mkdirSync fail",e,arguments),{errMsg:e.message}}}(eo),ho=!0,vo=bo(eo),e&&e(),vo?void Zi.error("hasNoPermission[1]"):void 0;if(vo=bo(eo))return ho=!0,void Zi.error("hasNoPermission[2]");for(var t=1;t<=5&&mo(yo(t));)_o[t]=!0,po.lastLogNum=t,t++;Zi.info("[before statSync] path="+yo(po.lastLogNum));var n=oo(yo(po.lastLogNum));n.stat&&(po.lastLogSize=n.stat.size),Zi.info("[before isLogInit changeinto true"),ho=!0,e&&e()}})),Oo=Object(j.surroundByTryCatchFactory)((function(){wo((function(){if(Zi.warn("[after initLog] isLogInit="+ho+"; isRemoteDebugMode="+no+"; hasNoPermission="+vo+"; CACHE_LOG.length="+fo.length+"; needDeleteOldLog="+go),ho&&!no&&!vo&&fo.length&&!go){for(var e=[],t=0,n=0;n<fo.length;n++){var r=co(fo[n]);if(Zi.warn("[logItemSize="+r+"][currentSize="+t+"][MAX_LOG_SIZE="+"102400]"),r>lo)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),Zi.warn("submitLog[3],logItemSize="+r+",MAX_LOG_SIZE="+lo);else{if(t+r>lo)break;t+=r,e.push(fo[n])}}if(Zi.warn("[reportLogList.length="+e.length+"]"),e.length){if(po.lastLogSize+t>1048576){if(po.lastLogNum+1>=6)return go=!0,Zi.warn("submitLog[4][deleteOldLog]","logConfig=",po,",MAX_FILE_COUNT=",4),void setTimeout((function(){Zi.info("deleteOldLog[1],unlinkSync,logPath(1)="+yo(1)),function(){try{Ge.unlinkSync.apply(this,arguments),Zi.info("unlinkSync success",arguments)}catch(e){return Zi.error("unlinkSync fail",e,arguments),{errMsg:e.message}}}(yo(1));for(var e=2;e<=5;e++)Zi.info("deleteOldLog[2],renameSync,logPath(1)="+yo(1)+",logPath(i - 1)="+yo(e-1)),io(yo(e),yo(e-1));po.lastLogNum=5,_o[po.lastLogNum]=!1,po.lastLogSize=0,go=!1}),50);po.lastLogNum++,po.lastLogSize=0}n===fo.length?fo=[]:fo.splice(0,n),_o[po.lastLogNum]||mo(yo(po.lastLogNum))?(Zi.info("submitLog[7],before appendFile, filePath=",yo(po.lastLogNum)),Object(Ge.appendFile)({filePath:yo(po.lastLogNum),data:(po.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail:function(e){Zi.error("submitLog[7.1], appendFile fail",e)},success:function(e){Zi.info("submitLog[7.2], appendFile success",e)}})):(Zi.info("submitLog[5], before writeFile, filePath=",yo(po.lastLogNum)),Object(Ge.writeFile)({filePath:yo(po.lastLogNum),data:(po.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success:function(e){Zi.info("submitLog[5.1], writeFile success",e)},fail:function(e){console.log("log writeFile err "+e.errMsg),Zi.error("submitLog[6],writeFile fail",e)}})),po.lastLogSize+=t}}}))}));function Eo(){to&&clearTimeout(to),to=setTimeout((function(){Oo(),to=null,Eo()}),2e3)}var So={logApiInvoke:!0};["info","debug","log","warn"].forEach((function(e){So[e]=function(){if(!no&&!vo&&uo&&arguments.length&&po){for(var t=[],n=0;n<arguments.length;n++)"number"==typeof arguments[n]||"string"==typeof arguments[n]?t.push(arguments[n]):t.push(JSON.stringify(arguments[n]));t.splice(0,0,so(new Date),"["+e+"]"),fo.push(t.join(" "))}}})),So._getUserLog=function(){for(var e={},t=1;t<=5;t++)e["log"+t]=oo(yo(t));return e},So.privateSystemLog=function(){if(uo&&7===w.default.appType){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0!==Reporter&&t&&t.length&&$i.nativeConsole.log.apply($i.nativeConsole,t)}},w.default.onReady((function(){no||(uo=!0,Object(j.surroundByTryCatchFactory)(Eo)())})),Object(Fi.onAppEnterBackground)((function(){no||Oo()}));var To=Object(j.surroundByTryCatchFactory)(Xi.sendDataToH5),Io=Object(j.surroundByTryCatchFactory)(Xi.onH5Data);function Ao(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Zi.info("uploadUserLog[1],logConfig.lastLogNum="+po.lastLogNum,",args=",e),!e.index||e.index>po.lastLogNum)return Zi.info("uploadUserLog[2]"),void(e.complete&&e.complete());var t="ios"===w.default.platform?1:5,n=e.readFileResp||ao(yo(e.index),"utf8");if(Zi.info("uploadUserLog[3],readFileSync="+n.errMsg+",index="+e.index+",EACH_SLICE="+t),n.errMsg.indexOf("readFileSync:ok")>=0&&n.data){var r=n.data.length,i=Math.max(parseInt(r/t,10),1),o=(e.slice-1)*i;Zi.info("uploadUserLog[4]","start=",o,"eachLen=",i,"len=",r,n.data.length);var a=n.data.substr(o,i);if(Zi.info("uploadUserLog[5],content.length=",a&&a.length,",logConfig=",po),!a)return Zi.info("uploadUserLog[6],uploadUserLogSliceComplete"),To({webviewId:e.webviewId,data:{total:po.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:Object(tt.getStaticSystemInfoSync)()}}),e.index++,e.slice=1,e.readFileResp=null,void Ao(e);Zi.info("uploadUserLog[7], uploadUserLogContent,content.length=",a&&a.length,",logConfig=",po),To({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:a,index:e.index,slice:e.slice||1,total:po.lastLogNum,info:1===e.index&&1===e.slice?Object(tt.getStaticSystemInfoSync)():null},success:function(){Zi.info("uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE="+t+", args.slice="+e.slice+", logConfig.lastLogNum="+po.lastLogNum),e.slice===t?(To({webviewId:e.webviewId,data:{total:po.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:Object(tt.getStaticSystemInfoSync)()}}),e.index++,e.slice=1,e.readFileResp=null,Ao(e)):(e.slice++,e.readFileResp=n,Zi.info("uploadUserLog[9],args=",e),Ao(e))},fail:function(t){Zi.error("uploadUserLog[10] fail,failResp.errMsg="+t.errMsg+",args.retry="+e.retry),e.retry?To({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:Object(tt.getStaticSystemInfoSync)()}}):(e.retry=!0,Ao(e))}})}else Zi.error("uploadUserLog[11],readFileSync fail="+n.errMsg+",index="+e.index),To({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:n.errMsg,index:e.index,info:Object(tt.getStaticSystemInfoSync)()}})}no||Io((function(e){Zi.info("onH5Data",e,po),e.data&&"uploadUserLog"===e.data.type&&Ao({index:1,slice:1,webviewId:e.webviewId})}));var Co=n(43),ko=n(24),xo=[],Po=[],Do=~~(+new Date/1e3),Ro=0;function jo(e,t,n,r){var i;i="string"==typeof r?r:r?"high":"low",Object(O.invokeMethod)("operateRealtimeData",{type:t,content:n,priority:i,id:e},{beforeSuccess:function(){},beforeFail:function(e){Po.forEach((function(t){return t(e)}))}})}function No(){var e=xo.shift();"function"==typeof e&&(e(),Ro=+new Date),xo.length&&setTimeout(No,200)}var Mo=function(e,t,n){if(!m.IS_DEVTOOLS){var r=+new Date,i=Do++;return r-Ro>=200&&!xo.length?(jo(i,e,t,n),Ro=r):(xo.push((function(){jo(i,e,t,n)})),setTimeout(No,200)),i}},Lo=function(e){m.IS_DEVTOOLS||"function"==typeof e&&Po.push(Object(I.surroundByTryCatchFactory)(e))};Object(O.onMethod)("onRealtimeDataResponse",(function(e){Po.forEach((function(t){return t(e)}))}));var Bo,Fo=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"GetUploadSetting")),Uo=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"GetUploadSetting",!0)),Wo={};function Vo(e){return e?(Wo[e]||(Wo[e]=Uo({apiName:"GetUploadSetting",reqData:{},pluginId:e})),Wo[e]):Bo||(Bo=Fo({apiName:"GetUploadSetting",reqData:{}}))}var Go=+new Date,Ho=function(){return Go++},zo=Object(j.surroundByTryCatchFactory)((function(e){return Yo(e).errMsg.indexOf("accessSync:ok")>=0})),Yo=function(){try{return Ge.accessSync.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},qo=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"UploadByApi")),Ko=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"UploadByApi",!0)),Jo={DEBUG:1,INFO:2,WARN:4,ERROR:8},Xo=1,$o=2,Zo=1,Qo="",ea=!1;function ta(e){ea?e&&e():(ea=!0,w.default.onReady((function(){Qo=w.default.accountInfo.appId,e&&e()})))}var na=function(e,t){if("string"!=typeof e)return 0;var n,r,i,o=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(r=0,i=e.length;r<i;r++)o+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,i=e.length;r<i;r++)o+=(n=e.charCodeAt(r))<=127?1:n<=2047?2:n<=65535?3:4;return o};function ra(){if("undefined"!=typeof __appServiceEngine__){var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if(Object(A.isGame)())return"index"}var ia;function oa(){ia&&(ia=clearTimeout(ia))}var aa,sa=!1,ca="",ua=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.default)(this,e),this.systemInfo=Object(tt.getStaticSystemInfoSync)(),this.opt={},this.opt.level=Jo.INFO,this.mode=n.mode||"normal",this.pluginId=n.pluginId,this.pluginVersion=n.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!n.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=Zo,this._logInfo.platform="ios"===this.systemInfo.platform?$o:Xo,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((function(){m.IS_DEVTOOLS||t._getLogConfig()}),300),ta((function(){Object(A.isGame)()&&t.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,Object(it.getNetworkType)({success:function(e){ca=e.networkType}}),Object(it.onNetworkStatusChange)((function(e){ca=e.networkType})),Lo((function(e){t.onRealtimeDataResponse(e)})))}return Object(oe.default)(e,[{key:"cyclelyUploadInGame",value:function(){var e=this;setTimeout((function(){ga(),e.cyclelyUploadInGame()}),6e5)}},{key:"onRealtimeDataResponse",value:function(e){var t=this;if(this.uploadCount++,0!==e.errcode&&("wifi"!==ca&&"4g"!==ca||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(sa=!0,this.failCount=0,this.uploadCount=0,setTimeout((function(){sa=!1}),6e4))),e.idList&&e.idList.length)){var n=!1,r={},i=!1,o={};e.idList.forEach((function(a){var s=t.historyLog[a];s&&(s.id,s.url,Reporter.reportKeyValue({key:"UserLogFail",value:","+ca+","+e.errcode+","+parseInt(Date.now()/1e3,10)+","+s.url+","+s.libraryVersion+","+Qo}),n=!0,delete t.historyLog[a],r[a]=s);var c=t.retryLogList[a];c&&(c.id,c.url,o[a]=c,delete t.retryLogList[a],i=!0)})),n&&(this.retryLogList=r,this.failRetry(r)),i&&this.saveToFile(o)}}},{key:"_getLogConfig",value:function(e,t){var n=this;return Vo(this.pluginId).then((function(r){if(r.rawData){try{var i=JSON.parse(r.rawData);n.MaxSize=1024*i.MaxLogSize,i.MaxLogCount&&(n.MaxLogCount=i.MaxLogCount),n._logInfo.id=i.UserUin,i.OpenId&&(n.traceid=i.OpenId+"_"+parseInt(Date.now()/1e3,10)),i.Debug&&i.Debug.MaxSize&&i.Debug.ExpireTime>Date.now()/1e3&&(n.isDebugMode=!0,n.MaxSize=1024*i.Debug.MaxSize,n.opt.level=Jo.DEBUG,i.Debug.MaxLogCount&&(n.MaxLogCount=i.Debug.MaxLogCount));var o=n._logCacheBeforeLogConfig||[];n._logCacheBeforeLogConfig=[],o.forEach((function(e){n._baseLog.apply(n,[e.key,e.path].concat(Object(Ue.default)(e.args)))})),n._getConfigFail=!1,e&&n.upload(t),Object(A.isGame)()||(a=i.ReportInterval,oa(),(a="number"!=typeof a?3e5:a)>0&&function e(){oa(),ia=setTimeout((function(){ga(),e()}),a)}())}catch(e){n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]}setTimeout((function(){n.tryUploadFailLog()}),100)}else n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[];var a})).catch((function(e){e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]),n._getConfigFail=!0}))}},{key:"_config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.mode&&(this.mode=e.mode)}},{key:"_checkSize",value:function(e,t){var n=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||ra()))return!0;t.forEach((function(e){n+=na(e)})),this.sizeList[e]=this.sizeList[e]||0;var r=this.sizeList[e];return r+n>this.MaxSize?n:(this.sizeList[e]=r+n,!0)}},{key:"_getLogValue",value:function(e){var t,n=Object(R.default)(e),r="";if("function"===n&&(t="function(){}"),"undefined"===n)t="<Undefined>";else if("object"===n){r=(r=Object.prototype.toString.call(e)).replace(/^\[object |\]$/g,"");try{t="Error"===r?e.stack:JSON.stringify(e)}catch(e){r="Error",t=e.message}}else e+="";return t||e}},{key:"_baseLog",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(r.length&&!this._hasNoPermission)if(this._logInfo.id){var o,a,s,c;"object"===Object(R.default)(e)?(o=e.id,a=e.name,s=e.level,c=e.time):(o="__DEFAULT__",a="__DEFAULT__",s=e,c=+new Date);var u=Jo[s.toUpperCase()]||0;if(!(u<this.opt.level)){var l,d;if(t=this.pluginId||t||ra(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){var f=r[0],p=r[1];if(!f||"string"!=typeof f)return;var h=this._getLogValue(p);d=this._checkSize(t,[f,h]),l=[o,c,a,f,h]}else l=r.map(this._getLogValue),d=this._checkSize(t,l),this.structSizeList[t]+=6+(l.length?3*l.length-1:0);if(!0===d)this._addLogMsg(l,t,u);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){var g=["UserLog:fail Log Size "+d+" Exceed."];"kv"===this.mode&&g.unshift("warning"),this._addLogMsg(g,t,Jo.WARN)}this.exceedSizeList[t]+=d}}}else this._logCacheBeforeLogConfig.push({key:e,path:t,args:r})}},{key:"_addLogMsg",value:function(e,t,n){if(!this.isExceedTodayUploadLogCount&&n&&(!this._getConfigFail||!this._getConfigRetry)){var r=this.pluginId||t||ra();if(r)if(this.msgList[r]=this.msgList[r]||[],this.msgList[r].length>=this.MaxLogCount)this.MaxLogCount;else{var i=this.msgList[r][0];if("kv"===this.mode){var o=Object(Co.default)(e,5),a=[n,o[0],o[1],o[2],o[3],o[4]];this.msgList[r].push(a)}else{var s=new Date,c=Math.ceil(+s/1e3),u=[i?c-i[0]:c,e,n,s.getMilliseconds()];if(!this.msgList[r].length){var l=(new Date).getTimezoneOffset();u.push(l)}this.msgList[r].push(u)}this.levelList[r]=this.levelList[r]||0,this.levelList[r]|=n}}}},{key:"OperateWxUploadLog",value:function(e,t){var n=this;if(!this.isExceedTodayUploadLogCount){var r=e.structSize||0;delete e.structSize;var i,o=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){var a=this.pluginId?1004:1001;e.url;var s=Mo(a,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:Qo}));return this.historyLog[s]=e,Reporter.reportKeyValue({key:"UserLog",value:","+(r+o)+","+o+e.timestamp+","+e.url+","+e.filter1+","+Qo}),void(t&&t(!0))}return(i={apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},i.pluginId?Ko(i):qo(i)).then((function(){t&&t(!0)})).catch((function(e){e&&1e4==+e.err_code&&(n.isExceedTodayUploadLogCount=!0),t&&t(!1),n.failCount++}))}}},{key:"failRetry",value:function(e){var t=this;this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((function(){if(e)for(var n in e)t.historyLog.hasOwnProperty(n)&&t.OperateWxUploadLog(t.historyLog[n])}),3e3))}},{key:"stat",value:function(e){return(e=this.pluginId||e||ra())&&this.sizeList[e]||0}},{key:"_hasUploadInterval",value:function(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}},{key:"upload",value:function(e){var t=this,n=e||ra();if(e=this.pluginId||n){var r=this.msgList[e]||[];if(r&&r.length)if(this._hasUploadInterval()){if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,n)}if(ea){if(!sa){this.msgList[e]=[];var i=this.levelList[e]||Jo.DEBUG;this.levelList[e]=0;var o=this.sizeList[e];this.sizeList[e]=0;var a=this.exceedSizeList[e];this.exceedSizeList[e]=0;var s=this._logInfo;s.level=i,s.rawSize=a+o;var c=this.structSizeList[e]||0;if(s.structSize=c,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){var u={},l={};r.forEach((function(e){var t=Object(Co.default)(e,6),n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=n||Jo.DEBUG;l[r]=l[r]||[i,{},c],l[r][1][a]=s,l[r][2]=Math.max(l[r][2],c),u[o]=u[o]||[],-1===u[o].indexOf(l[r])&&u[o].push(l[r])}));var d=this.kvFilterList,f=[];Object.keys(d[e]).forEach((function(t){d[e][t].forEach((function(e){var n=Object(Co.default)(e,2),r=n[0],i=n[1];if(l[r]){var o=l[r][1];o.__REALTIME_LOG_TAG__=o.__REALTIME_LOG_TAG__||[],-1===o.__REALTIME_LOG_TAG__.indexOf(i)&&o.__REALTIME_LOG_TAG__.push(i),-1===f.indexOf(i)&&(f.push(i),f.push(t+"_"+i))}}))})),s.msg=JSON.stringify(u),s.filter1=[].concat(Object.keys(u),f).join(" "),this.kvFilterList[e]=[]}else s.msg=JSON.stringify(r),s.filter1=this.filterList[e]||"",this.filterList[e]="";na(s.msg),s.appid=Qo,this.pluginId&&(s.pluginid=this.pluginId),this.pluginVersion&&(s.pluginVersion=this.pluginVersion),"kv"===this.mode&&(s.mode=this.mode),s.url=n,this.traceid&&(s.traceid=this.traceid),s.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(s,(function(e){t._isUploading=!1,t._lastUploadTime=Date.now(),e&&t._uploadList.length&&(t.timerId&&clearTimeout(t.timerId),t.timerId=setTimeout((function(){t.timerId=null,t.upload(t._uploadList.shift())}),1e3))}))}}else ta((function(){Qo&&t.upload(n)}))}else this._uploadList.indexOf(n)<0&&this._uploadList.push(n)}}},{key:"setFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),na(t)>2048)return!1;if(e=this.pluginId||e||ra(),"kv"===this.mode&&"object"===Object(R.default)(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=[[n.id,t]],!0}return this.filterList[e]=t,!0}},{key:"addFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||ra(),"kv"===this.mode&&"object"===Object(R.default)(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=r[e][n.name]||[],void r[e][n.name].push([n.id,t])}var i=this.filterList[e]||"";this.setFilterMsg(e,i+(i?" ":"")+t)}},{key:"getTraceId",value:function(){return this.traceid||""}},{key:"getFilePath",value:function(){var e=(w.default&&w.default.env.USER_DATA_PATH||(m.IS_DEVTOOLS?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return zo(e)||function(){try{Ge.mkdirSync.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}},{key:"getFileContent",value:function(e){var t=function(){try{return{data:Ge.readFileSync.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data)}catch(e){}return null}},{key:"saveToFile",value:function(e){if(e){var t=this.getFilePath();if(zo(t)){var n=this.getFileContent(t);if(n)for(var r in n)e[r]||(e[r]=n[r])}Object(Ge.writeFile)({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}},{key:"tryUploadFailLog",value:function(){var e=this.getFilePath();if(zo(e)){var t=this.getFileContent(e);if(!t)return;for(var n in t)t.hasOwnProperty(n)&&this.OperateWxUploadLog(t[n]);Object(Ge.writeFile)({filePath:e,data:"{}",encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}}]),e}(),la=null,da={},fa=function(e){return e?da[e]:la},pa=function(e,t){e?da[e]=t:la=t},ha=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="",i={stat:function(){if(!m.IS_DEVTOOLS){var e=fa(t);if(e)return e.stat(r)}},setFilterMsg:function(e){if(!m.IS_DEVTOOLS){var n=fa(t);if(n)return n.setFilterMsg(r,e)}},addFilterMsg:function(e){if(!m.IS_DEVTOOLS){var n=fa(t);if(n)return n.addFilterMsg(r,e)}},in:function(e){Object(A.isGame)()?r="index":e&&e.route&&(r=e.route)},tag:function(e){var n=Ho(),i=+new Date;return{debug:function(o,a){if(!m.IS_DEVTOOLS){var s=fa(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"debug"},r,o,a)}},info:function(o,a){if(!m.IS_DEVTOOLS){var s=fa(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"info"},r,o,a)}},warn:function(o,a){if(!m.IS_DEVTOOLS){var s=fa(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"warn"},r,o,a)}},error:function(o,a){if(!m.IS_DEVTOOLS){var s=fa(t);if(s)return s._baseLog({id:n,name:e,time:i,level:"error"},r,o,a)}},setFilterMsg:function(i){if(!m.IS_DEVTOOLS){var o=fa(t);if(o)return o.setFilterMsg(r,i,{name:e,id:n})}},addFilterMsg:function(i){if(!m.IS_DEVTOOLS){var o=fa(t);if(o)return o.addFilterMsg(r,i,{name:e,id:n})}}}}};return i=t?Object.assign(i,{config:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}):Object.assign(i,{config:function(e){if(!m.IS_DEVTOOLS&&"object"===Object(R.default)(e)){var n=fa(t);n&&n._config(e)}},debug:function(){if(!m.IS_DEVTOOLS){var e=fa(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["debug",r].concat(i))}}},info:function(){if(!m.IS_DEVTOOLS){var e=fa(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["info",r].concat(i))}}},warn:function(){if(!m.IS_DEVTOOLS){var e=fa(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["warn",r].concat(i))}}},error:function(){if(!m.IS_DEVTOOLS){var e=fa(t);if(e){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e._baseLog.apply(e,["error",r].concat(i))}}}}),fa(t)||pa(t,new ua({isClientReport:e.isClientReport,pluginId:t,pluginVersion:n,mode:t?"kv":"normal"})),i},ga=function(e){if(!m.IS_DEVTOOLS){var t,n=(t=[],la&&t.push(la),Object.keys(da).forEach((function(e){return t.push(da[e])})),t);n.length&&n.forEach((function(t){try{t.upload(e)}catch(e){}}))}};Object(Fi.onAppEnterBackground)((function(e){m.IS_DEVTOOLS||e&&8===e.targetAction||ea&&(aa&&clearTimeout(aa),aa=setTimeout((function(){"undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain("").forEach((function(e){ga(e.route)})):Object(A.isGame)()&&ga();aa=null}),10))}));var va,_a=n(45),ya=n(132),ma=n(77),ba=n(190),wa=n(71),Oa=n(72),Ea=y.default.requestPointerLock,Sa=y.default.exitPointerLock,Ta=y.default.isPointerLocked,Ia={now:y.default.performanceNow},Aa=Object(E.getEventManager)("memoryWarning"),Ca=Aa.onMethod,ka=Aa.offMethod,xa=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?va=e:Ca(e)};Object(O.onMethod)("onMemoryWarningReceive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(m.IS_ANDROID&&e.level<10)){var t=Aa.getGlobalListeners();t.length?Aa.emitGlobal(e):"function"==typeof va&&va(e)}}));var Pa=Date.now(),Da=function(){y.default.gc?y.default.gc():function(){for(var e={},t=0;t<1e5;t++)e[t]=[];e=null}()};xa((function(){Date.now()-Pa>1e3&&Da(),Pa=Date.now()}),!0);var Ra=n(114),ja=y.default.EventHandler,Na=new ce.Emitter("Mouse",!0),Ma={};["Down","Move","Up"].forEach((function(e){Ma["onMouse"+e]=function(t){return Na.on(e,t)},Ma["offMouse"+e]=function(t){return Na.off(e,t)},ja["onmouse"+e.toLowerCase()]=function(t){"Up"===e&&zr.GlobalEmitter.emit("beforeTouchEnd"),Na.emit(e,t),"Up"===e&&zr.GlobalEmitter.emit("afterTouchEnd")}}));var La=Ma,Ba=y.default.EventHandler,Fa=new ce.Emitter("PointerLock",!0),Ua={};["Change","Error"].forEach((function(e){Ua["onPointerLock"+e]=function(t){return Fa.on(e,t)},Ua["offPointerLock"+e]=function(t){return Fa.off(e,t)},Ba["onpointerlock"+e.toLowerCase()]=function(){return Fa.emit(e)}}));var Wa=Ua,Va=y.default.EventHandler,Ga=new ce.Emitter("Mouse",!0);Va.onwheel=function(e){return Ga.emit("Wheel",e)};var Ha=Object(E.getEventManager)("Game-Error"),za=Object(E.getEventManager)("Game-UnhandledRejection"),Ya=Ha.onMethod,qa=Ha.offMethod,Ka=za.onMethod,Ja=za.offMethod;Reporter.registerThirdErrorListener((function(e){Ha.emit({message:e,stack:""})})),Reporter.registerThirdUnhandledRejectionListener((function(e,t){za.emit({reason:e,promise:t})}));var Xa=n(47);function $a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$a(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qa=null;function es(e,t){"object"!==Object(R.default)(e)&&(e={});var n=Object(Oa._getEnterOptionsSync)(),r=n.scene,i=n.chatroomUsername,o="shareAppMessage",a=e.toCurrentGroup;a=1158===r?"boolean"!=typeof a||a:"boolean"==typeof a&&a;var s={title:e.title||w.default.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path};a&&1158===r&&(s.chatroomUsername=i,o="shareAppMessageToSpecificContactDirectly"),Object(ma._doShareAppMessage)(s,o,t)}Object(O.onMethod)("onShareAppMessage",(function(e){if(Object(Xa.isAtFunctionalPage)()){var t=Object(Xa.generateShareDataFromFunctionalPage)(e);Object(O.invokeMethod)("shareAppMessageDirectly",Za(Za({},t),{},{success:function(e){},fail:function(e){wxNativeConsole.error("shareAppMessageDirectly fail",e)}}))}else{var n={};if("function"==typeof Qa){try{n=Qa({})}catch(e){console.error(e)}"object"!==Object(R.default)(n)&&(n={})}if("Promise"===Object(U.getDataType)(n.promise)){var r=!1;setTimeout((function(){r||(r=!0,es(n,e))}),3e3),n.promise.then((function(t){r||(r=!0,es(t,e))}))}else es(n,e)}}));var ts=n(44),ns=n(60);var rs=n(130),is=n(147),os=n(146),as=n(65);function ss(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ss(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ss(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var us=wxNativeConsole.createLogger("shareTimeline");function ls(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:w.default.accountInfo.nickname},n={},r="string"==typeof e.query?e.query:"";r.length>2e3&&(console.warn('shreTimeline: query exceed max length limit 2000: "'+r.length+'"'),r=r.substr(0,2e3)),n.path=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_IMAGE,query:r});var i=Object(as.checkCanUseCustomImageUrl)(),o=Object(as.getShareImageMap)();if(i){var a=zr.FakeTempFilePathMap.get(e.imageUrl);n.imageUrl="string"==typeof a?a:e.imageUrl}else{if(!o[e.imageUrlId])return Object(Et.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),null;n.imageUrl=o[e.imageUrlId]}return Object.assign({userPath:"string"==typeof e.path?e.path:"",userQuery:r},t,e,n)}function ds(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return us.log("invokeShareTimeline",e,t,n,r),new Promise((function(i,o){var a={title:t.title,path:t.path,imageUrl:t.imageUrl?t.imageUrl:"",cardSubType:Object(Xa.mapPageTypeToCardSubType)(n),messageExtraData:cs({userPath:t.userPath,userQuery:t.userQuery,title:t.title,imageUrl:t.imageUrl||"",pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl,isCustomPreviewImg:e.isSnapshot?0:1},r)};n===ts.PAGE_TYPE.PLAY_PAGE_IMAGE&&(a.preloadResources=[e.fileUrl]),us.debug("shareParams",a),Object(O.invokeMethod)("shareTimeline",cs(cs({},a),{},{success:i,fail:o}))}))}function fs(e){Object(Et.showLoading)({title:"请稍等"}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.imagePreviewUrlId,n=e.imagePreviewUrl,r=Object(as.checkCanUseCustomImageUrl)(),i=Object(as.getShareImageMap)();if(r){if(/^(http|https):\/\//.test(n))return new Promise((function(e){Object(Q._downloadFileSkipCheckDomain)({url:n,success:function(t){e(ps(t.tempFilePath).catch((function(e){us.error(e),hs()})))},fail:function(t){us.error(t),e(hs())}})}));if(/^wxfile:\/\//.test(n))return ps(n).catch((function(e){return us.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,n),hs()}));if(Object(U.isString)(n)){var o=n.split(".").pop();o=o?o.toLowerCase():"jpg";var a="__wx_temp_timeline_img_"+Object(j.guid)()+"."+o,s=w.default.env.USER_DATA_PATH+"/"+a;return Object(A.promisify)(is.copyFile)({srcPath:n,destPath:s}).then((function(){return ps(s)})).then((function(e){return Object(os.unlink)({filePath:s,success:function(e){us.log("unlink success",e)},fail:function(e){us.error("unlink fail",e)}}),e})).catch((function(e){return us.error("getFinalUrlWithImageInfoAndCDNUrl fail",e,s),hs()}))}return hs()}var c=i[t];return t&&c?new Promise((function(e){Object(dr._getImageInfoWithDownloadFile)({src:c,success:function(t){var n=t.width,r=t.height,i=Object(as.generateUrlWithSize)(c,n,r);e({fileUrl:i,thumbUrl:i})},fail:function(){return e(hs())}},Q._downloadFileSkipCheckDomain)})):hs()}(e).then((function(e){return Object(Et.hideLoading)(),e})).then((function(t){return ds(t,e,ts.PAGE_TYPE.PLAY_PAGE_IMAGE)})).catch((function(e){Object(Et.hideLoading)(),us.debug("invokeShareTimeline fail",e)}))}function ps(e){return Promise.all([Object(as.getLocalImageInfo)(e),Object(as.checkImageFileSizeAvailable)(e,1048576).then((function(){return Object(as.uploadLocalImage)(e)}))]).then((function(e){var t=Object(Co.default)(e,2),n=t[0],r=t[1],i=n.width,o=n.height;return{fileUrl:Object(as.generateUrlWithSize)(r.fileUrl,i,o),thumbUrl:Object(as.generateUrlWithSize)(r.thumbUrl,i,o)}}))}function hs(){return new Promise((function(e,t){var n=Object(_a._getScreenCanvas)();n.toTempFilePath({x:0,y:0,width:n.width,height:n.height,destWidth:n.width,destHeight:n.height,success:function(t){t.width=n.width,t.height=n.height,e(t)},fail:function(e){wxNativeConsole.error("createSnapshot fail",e),t(e)}})})).then((function(e){var t=e.width,n=e.height,r=e.tempFilePath;return Object(as.uploadLocalImage)(r).then((function(e){return{fileUrl:Object(as.generateUrlWithSize)(e.fileUrl,t,n),thumbUrl:Object(as.generateUrlWithSize)(e.thumbUrl,t,n),isSnapshot:!0}}))}))}function gs(e){return Object(Et.showLoading)({title:"请稍等"}),Object(rs.uploadFile)({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((function(e){return Object(Et.hideLoading)(),e})).then((function(t){var n=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_VIDEO,query:e.query});return ds(t,{title:e.title,path:n,imageUrl:t.thumbUrl},ts.PAGE_TYPE.PLAY_PAGE_VIDEO,e)})).catch((function(e){Object(Et.hideLoading)(),us.error("fail",e)}))}var vs=wxNativeConsole.createLogger("onShareTimeline"),_s=null;function ys(e,t){var n=function(e){var t={};if("function"==typeof _s){try{t=_s()}catch(e){console.error(e)}"object"!==Object(R.default)(t)&&(t={})}return ls(t,e)}(t);vs.debug("onShareTimelineInGame shareData",n),n&&fs(n)}Object(O.onMethod)("onShareTimeline",(function(e){var t=ns.pageStorage.get();t?function(e,t){var n="",r="";e.pageType===ts.PAGE_TYPE.PLAY_PAGE_IMAGE?(n=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_IMAGE,query:e.query}),r=e.params.imageUrl||""):e.pageType===ts.PAGE_TYPE.PLAY_PAGE_VIDEO&&(n=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_VIDEO,query:e.query}),r=e.params.thumbUrl||"");var i={thumbUrl:e.params.thumbUrl,fileUrl:e.params.fileUrl},o={title:e.params.title||t.title,imageUrl:r,path:n,userPath:e.params.userPath,userQuery:e.params.userQuery};ds(i,o,e.pageType,e.params).catch((function(e){vs.error("fail",e)}))}(t,e):ys(0,e)}));var ms=n(67),bs=n(150),ws=Object(E.getEventManager)("Hide"),Os=Object(E.getEventManager)("BaseFrameHide"),Es=ws.onMethod,Ss=ws.offMethod,Ts=ws.internalOnMethod,Is=ws.internalOffMethod,As=Os.internalOnMethod;Os.internalOffMethod;Object(Mn.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(bs.setLastOnHideMode)(e.mode),Object(Xa.isAtFunctionalPage)()?Os.emit(e):(Os.emit(e),ws.emit(e))}));var Cs=new ce.Emitter("key",!0);y.default.EventHandler.onkeydown=function(e){Cs.emit("down",e)},y.default.EventHandler.onkeyup=function(e){Cs.emit("up",e)};var ks,xs,Ps=n(55),Ds=new Ps.default;["onKeyboardInput","onKeyboardConfirm","onKeyboardComplete"].forEach((function(e){Object(O.onMethod)(e,(function(t){Ds.emit(e,t)}))})),Object(O.onMethod)("onWindowResize",(function(){var e={},t=Object(tt.getSystemInfoSync)();ks===t.windowWidth&&xs===t.windowHeight||(ks=e.windowWidth=t.windowWidth,xs=e.windowHeight=t.windowHeight,zr.GlobalEmitter.emit("onWindowResize",e))}));function Rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ns=null;Object(O.onMethod)("onAddToFavorites",(function(e){var t={};if(Object(Xa.isAtFunctionalPage)()){var n=Object(Xa.generateShareDataFromFunctionalPage)(e);Object(O.invokeMethod)("addToFavorites",js(js({},n),{},{success:function(e){},fail:function(e){wxNativeConsole.error("addToFavorites fail",e)}}))}else{"function"==typeof Ns&&(t=Ns({}),"object"!==Object(R.default)(t)&&(t={}),t.path="string"==typeof t.path?t.path:"","string"==typeof t.query&&(t.path=t.path+"?"+t.query));var r=t.imageUrl;Object(wr.getCloudFileUrl)([r],"image",(function(n){/^(cloud):\/\//.test(r)&&(r=n.data[0].url),t.imageUrl=r,Object(O.invokeMethod)("addToFavorites",Object.assign(e,t))}))}}));var Ms=n(119),Ls=!1,Bs=!1,Fs=Ms.launchApplication,Us="";Object(ms._onShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scene,n=e.referrerInfo;void 0!==t&&("string"==typeof t&&(t=parseInt(t,10)),n&&n.appId&&(Us=n.appId),1036===t?(Bs=!0,Fs=Ms.launchApplication):1069===t?(Bs=!0,Fs=Ms.navigateBackApplication):1089!==t&&1090!==t&&1038!==t&&(Bs=!1))})),zr.GlobalEmitter.on("beforeTouchEnd",(function(){Ls=!0})),zr.GlobalEmitter.on("afterTouchEnd",(function(){Ls=!1}));var Ws=n(139),Vs=n(22),Gs=new A.EventEmitter;Object(O.onMethod)("onDeviceOrientationChange",(function(e){e.value=e.value.toLowerCase(),/reverse/.test(e.value)&&(e.value="landscapeReverse"),Gs.emit("deviceOrientationChange",e)}));var Hs,zs,Ys,qs,Ks=__subContextEngine__.getGameOpenDataContext(),Js=JSON.stringify,Xs=function(e){ec();try{Ks.postMessage({data:Js(e)})}catch(e){throw new j.ThirdScriptError(e.message)}},$s=function(e){ec(),Ks.onMessage(e)},Zs=!1,Qs=function(){var e=m.IS_DEVTOOLS?w.default.appConfig.subContext:w.default.subContext;return e&&"string"==typeof e},ec=function(){!Zs&&Qs()&&(__subContextEngine__.createGameOpenDataContext(),Zs=!0)},tc=null,nc=function(){return ec(),tc||(tc=Object(_a._createSharedCanvas)()),tc};try{m.IS_DEVTOOLS&&(zs=document.createElement.bind(document),Ys=document.body.appendChild.bind(document.body),qs=null)}catch(e){}var rc=n(188),ic=n(99),oc=n(180),ac=n(135),sc=1;w.default.onReady((function(){try{"number"==typeof w.default.wxAppInfo.maxWorkerConcurrent&&(sc=w.default.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));var cc=["app-service.js","game.js","subContext.js"],uc=n(75),lc=null,dc=null,fc=null,pc=null,hc=new Promise((function(e){pc=e}));w.default.onReady((function(){var e=function(e){dc=e,fc=w.default,lc=Object(tt.getStaticSystemInfoSync)(),pc()};new Promise((function(e,t){Object(it.getNetworkType)({success:function(t){e(t.networkType)},fail:function(e){t(e)}})})).then((function(t){e(t)})).catch((function(){e(null)}))}));var gc,vc=function(e){fc?e():hc.then(e)},_c={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0},yc=!1;function mc(e,t){if(0===t)return!1;var n=Math.ceil(1/t);return e%n===parseInt(Date.now()/864e5,10)%n}function bc(){var e="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],t=lc&&lc.brand,n=lc&&lc.model,r=lc&&lc.platform,i=lc&&lc.system,o=fc&&fc.appLaunchInfo&&fc.appLaunchInfo.scene,a=fc&&w.default.envVersion,s=lc&&lc.version,c=lc&&lc.SDKVersion,u=e.length>0&&e[e.length-1].__route__||"";return{platform:r,system:i,path:u=function(e){if(!e)return"";var t=e.indexOf("?");return t>-1?e.substring(0,t):e}(u),scene:o,brand:t,model:n,networkType:dc,envType:a,clientVersion:s,sdkVersion:c}}var wc=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"UploadByApi")),Oc={};function Ec(){var e=Object.keys(Oc);if(!(e.length<=0)&&_c.enabled&&("release"!==w.default.envVersion||1===_c.sampleRate||!_c.userUin||mc(_c.userUin,_c.sampleRate)))for(var t="develop"===w.default.envVersion||"trial"===w.default.envVersion,n=0,r=e;n<r.length;n++){var i=r[n],o=Oc[i],a={key:o.key,value:o.valueSum/o.count,num:o.count},s=o.baseInfo,c=o.dimensions;t?c.length>0?xc({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):xc({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):c.length>0?kc({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):kc({appId:o.appId,metrics:a,baseInfo:s,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete Oc[i],Reporter.reportKeyValue({key:"PerfReport",value:[o.appId,s.platform,s.scene,s.brand,s.model,s.networkType,s.envType,a.key,a.value,a.num,parseInt(Date.now()/1e3,10)].join(",")})}}var Sc=null;function Tc(){var e="develop"===w.default.envVersion||"trial"===w.default.envVersion?60:_c.batchTime;Sc&&clearInterval(Sc),Sc=setInterval(Ec,1e3*e)}var Ic=!1;function Ac(){Ic=!0,vc((function(){setTimeout(Ec,3e4),Tc(),Object(Fi.onAppEnterBackground)((function(){Ec()})),Object(uc.onAppEnterForeground)((function(){Tc()}))}))}function Cc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.dimensions,o=void 0===i?[]:i,a="";o.length>0&&(a="_"+o.join("_"));var s=bc(),c=r.key+"_"+s.networkType+"_"+s.scene+a,u=Object.keys(Oc).length;if(!(u>_c.bufferCapacity)){Oc[c]||(Oc[c]={appId:t,key:r.key,valueSum:0,count:0,baseInfo:s,dimensions:o});var l=Oc[c];l&&(l.valueSum+=r.value,l.count++)}}function kc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.baseInfo,o=void 0===i?{}:i,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions,d=JSON.stringify({appId:t,base:o,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)}),f=JSON.stringify({interface:s,busid:u,data:d});Mo(1002,f,!0)}function xc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,i=e.baseInfo,o=void 0===i?{}:i,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions;if(_c.enabled){var d=JSON.stringify({appId:t,base:o,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)});wc({apiName:"UploadByApi",reqData:{interface:s,busid:u,data:d}}).catch((function(){}))}}var Pc=4294967295;function Dc(e,t,n,r){_c.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=Pc||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=Pc?(void 0===n||Array.isArray(n)||(n=[String(n)]),Array.isArray(n)&&(n.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",n.length),0===(n=n.slice(0,2)).length&&(n[0]="",n[1]=""),1===n.length&&(n[1]=""),n=n.map((function(e){return e?String(e):""})).map((function(e){return e.substring(0,256)}))),n&&Array.isArray(n)||(n=[]),yc||(yc=!0,gc=Vo().then((function(e){var t;try{t=JSON.parse(e.rawData)}catch(e){}if(t){var n=t.PerformaceGlobalConf,r=t.PerformacePersonalConf;n&&(void 0!==n.PerformanceOldReportOff&&(_c.legacyReportEnabled=!(1===n.PerformanceOldReportOff)),void 0!==n.PerformanceReportMaxNum&&(_c.bufferCapacity=parseInt(n.PerformanceReportMaxNum,10)),void 0!==n.PerformanceMiniprogramlibGatherTime&&(_c.batchTime=60*parseInt(n.PerformanceMiniprogramlibGatherTime,10))),r&&(void 0!==r.PerformanceMiniprogramlibOff&&(_c.enabled=!(1===r.PerformanceMiniprogramlibOff)),void 0!==r.PerformanceMiniprogramlibGatherTime&&(_c.batchTime=60*parseInt(r.PerformanceMiniprogramlibGatherTime,10)),void 0!==r.PerformanceMiniprogramlibSamplingRatio&&(_c.sampleRate=parseInt(r.PerformanceMiniprogramlibSamplingRatio,10)/100)),_c.userUin=t.UserUin,300!==_c.batchTime&&Tc()}})).catch((function(e){}))),Ic||Ac(),vc((function(){"release"===w.default.envVersion&&1!==_c.sampleRate&&_c.userUin&&!mc(_c.userUin,_c.sampleRate)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=Object.create(null);i.key=e,i.value=t;var o=bc(),a="";r?(a=r.pluginId,o.pluginCustomVersion=r.customVersion,o.path=__virtualDOM__.convertRouteToComponentAlias(o.path),o.path.indexOf("plugin")<0&&(o.path="")):a=fc.accountInfo&&fc.accountInfo.appId,Cc({appId:a,metrics:i,dimensions:n}),gc&&gc.then((function(){"release"===w.default.envVersion&&1!==_c.sampleRate&&_c.userUin&&!mc(_c.userUin,_c.sampleRate)||_c.enabled&&_c.legacyReportEnabled&&kc({appId:a,metrics:i,baseInfo:o,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}(e,t,n,r)}))):console.warn("[reportPerformance] value should be in range of",0," to",Pc))}var Rc=y.default.createBufferURL||function(){return""},jc=y.default.revokeBufferURL||function(){return!1},Nc=y.default.createSignal||function(){return null},Mc=n(112),Lc=Et.showToast,Bc=Et.hideToast,Fc=Et._showModal,Uc=et.payment.requestPayment,Wc=et.payment.requestVirtualPayment,Vc=tt.getSystemInfo,Gc={request:Z,showToast:Lc,hideToast:Bc,requestVirtualPayment:Wc,requestPayment:Uc,getSystemInfo:Vc,showModal:Fc,getNetworkType:it.getNetworkType},Hc=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=44)}([function(e,t,n){var r=n(31);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){r(e,t,n[t])}))}return e}},function(e,t,n){"use strict";var r;!function(e,t){function n(e,t){return Object(R.default)(t)[0]==e}function i(t,r,i,o,a){setTimeout((function(){try{o=a(o),a=o&&n("o",o)|n(e,o)&&o.then,n(e,a)?o==t?i(TypeError()):a.call(o,r,i):r(o)}catch(e){i(e)}}))}function o(e){return r((function(t){t(e)}))}(r=function(t,o){return(o=function a(s,c,u,l,d,f){function p(e){return function(t){d&&(d=0,a(n,e,t))}}if(l=a.q,s!=n)return r((function(e,t){l.push({p:this,r:e,j:t,1:s,0:c})}));if(u&&n(e,u)|n("o",u))try{d=u.then}catch(e){c=0,u=e}if(n(e,d))try{d.call(u,p(1),c=p(0))}catch(e){c(e)}else for(o=function(o,a){return n(e,o=c?o:a)?r((function(e,t){i(this,e,t,u,o)})):t},f=0;f<l.length;)d=l[f++],n(e,s=d[c])?i(d.p,d.r,d.j,u,s):(c?d.r:d.j)(u)}).q=[],t.call(t={then:function(e,t){return o(e,t)},catch:function(e){return o(0,e)},always:function(e){return o(e,(function(t){throw e(t),t}))},finally:function(e){return e||(e=function(){}),o((function(t){return r.resolve(e()).then((function(){return t}))}),(function(t){return r.resolve(e()).then((function(){throw t}))}))}},(function(e){o(n,1,e)}),(function(e){o(n,0,e)})),t}).resolve=o,r.reject=function(e){return r((function(t,n){n(e)}))},r.all=function(e){return r((function(t,n,r,i){i=[],r=e.length||t(i),e.map((function(e,a){o(e).then((function(e){i[a]=e,--r||t(i)}),n)}))}))},r.race=function(e){return r((function(t,n){e.map((function(e){o(e).then(t,n)}))}))}}("f"),t.a=r},function(e,t,n){"use strict";function r(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];setTimeout((function(){return e.apply(void 0,r)}),t)}function i(e){return Object(c.a)(e)?e:[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.delay=r,t.debounce=function(e,t,n){var i,o,a=function(t,n){i=null,n&&(o=e.apply(t,n))},s=function(){i&&clearTimeout(i);for(var s=arguments.length,c=new Array(s),u=0;u<s;u++)c[u]=arguments[u];if(n){var l=!i;i=setTimeout(a,t),l&&(o=e.apply(this,c))}else i=r(a,t,this,c);return o};return s.cancel=function(){clearTimeout(i),i=null},s},n.d(t,"scene",(function(){return h})),t.toArray=i,n.d(t,"timer",(function(){return v})),t.endsWith=function(e,t){var n=e.length-t.length;return t.split("").every((function(t,r){return e[n+r]===t}))},t.retry=function(e,t){var n,i=t.times,o=t.interval,a=void 0===o?0:o,s=t.abort;return new u.a((function(t,o){!function c(){n=Date.now(),e().then(t).catch((function(e){if(0==--i)return o(e);if(s(e))return e.aborted=!0,o(e);var t=Date.now();a=Math.max(a-(t-n),0),r(c,a)}))}()}))},t.camelize=function(e){var t=function(e){return e.replace(/_([a-z0-9])/g,(function(e,t){return t.toUpperCase()}))};if(Object(s.a)(e))return t(e);if(Object(a.a)(e)){var n={};return Object(o.a)(e,(function(e,r){n[t(r)]=e})),n}return e},t.compact=function(e){var t={};return Object(o.a)(e,(function(e,n){void 0!==e&&(t[n]=e)})),t},t.normalizeOptions=function(e){var t={};return Object(o.a)(e,(function(e,n){t[n]=decodeURIComponent(e)})),t},t.signWithMD5=function(e,t){var n=(t||Object.keys(e)).sort().map((function(t){return e[t]?t+"="+e[t]:""})).join("&");return f(n+p.a.md5Salt).toUpperCase()};var o=n(10),a=n(6),s=n(9),c=n(7),u=n(1);n.d(t,"each",(function(){return o.a}));var l=n(16);n.d(t,"addParam",(function(){return l.a}));var d=n(17);n.d(t,"pick",(function(){return d.a}));var f=n(33),p=(n.n(f),n(11)),h=function(){var e={isQQMp:"object"==("undefined"==typeof qq?"undefined":Object(R.default)(qq)),isWxPlugin:!1,isComponent:!1,isOwnerMP:!1};try{e.isWxPlugin=WECHATAPP_PLUGIN}catch(e){}try{e.isComponent=STANDALONE_COMPONENT}catch(e){}try{e.isOwnerMP=PLUGIN_OWNER_MP}catch(e){}return e}(),g={},v={start:function(e){(e=i(e)).forEach((function(e){g[e]=(new Date).getTime()}))},get:function(e,t){var n=(e=i(e)).map((function(e){var n=(new Date).getTime()-g[e];return t&&(g[e]=n),n}));return n.length>1?n:n[0]},stop:function(e){return v.get(e,!0)},clear:function(e){(e=i(e)).forEach((function(e){delete g[e]}))}}},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}},function(e,t,n){"use strict";var r=function(){function e(t){t instanceof e?(this.stack=t.stack,this.message=t.message,this.name=t.name,this.info=t.info):(this.stack=(new Error).stack,this.message=t.msg,this.name="PayError",this.info=t)}return e.except=function(t){throw new e(t)},e.reject=function(t){return Promise.reject(new e(t))},e.prototype.toString=function(){return"PayError: "+this.message},e}();t.a=r},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return s}));var r,i={SUCCESS:0,FAIL:-1,CANCEL:-2,INTERFACE_NOT_EXIST:-3,RISK_INTERCEPT:-4,UNKNOWN:-5,PARAMS_ERROR:1e3},o=((r={})[i.SUCCESS]="支付成功",r[i.FAIL]="支付失败",r[i.CANCEL]="支付取消",r[i.PARAMS_ERROR]="参数错误",r[i.INTERFACE_NOT_EXIST]="接口不存在",r[i.RISK_INTERCEPT]="风控拦截",r[i.SIGN_SUCCESS]="签约成功",r[i.SIGN_FAIL]="签约失败",r.CHANNEL_NOT_SUPPORT="渠道不支持",r),a={FAIL:{ret:i.FAIL,msg:o[i.FAIL]}},s=function(e){return{ret:e,msg:o[e]}}},function(e,t,n){"use strict";t.a=function(e){return Object(r.a)("Object",e)&&null!==e};var r=n(13)},function(e,t,n){"use strict";t.a=function(e){return Object(r.a)("Array",e)};var r=n(13)},function(e,t,n){"use strict";function r(e,t){try{return e()}catch(e){return t?t(e):null}}var i=n(0),o=n.n(i),a=n(1),s=["showModal","hideModal","showToast","hideToast","getSystemInfo","getNetworkType","requestPayment","requestVirtualPayment","navigateTo","navigateToMiniProgram","openBusinessView"].reduce((function(e,t){return e[t]=function(e){return new a.a((function(n,r){try{Gc[t](o()({},e,{success:n,fail:r}))}catch(e){n(!0)}}))},e}),{}),c={onAppShow:[]};s.onAppShow=function(e){c.onAppShow.push(e),r((function(){return Gc.onAppShow(e)}))},s.offAllAppShow=function(){c.onAppShow.forEach((function(e){r((function(){return Gc.offAppShow(e)}))}))},t.a=s},function(e,t,n){"use strict";t.a=function(e){return Object(r.a)("String",e)};var r=n(13)},function(e,t,n){"use strict";t.a=function(e,t){var n,i=0;if(Object(r.a)(e)){var o=e.length;for(n=e[0];i<o&&!1!==t.call(n,n,i,e);n=e[++i]);}else for(var a in e)if(!1===t.call(e[a],e[a],a,e))break;return e};var r=n(7)},function(e,t,n){"use strict";t.c=function(){return"2.3.4"},t.b=function(){return["pf_header","wcp"]},n.d(t,"a",(function(){return r}));var r={md5Salt:"TwDbiyLgv93ysymjH6sHujMTXs9ehwe1"}},function(e,t,n){"use strict";var r=n(23),i=n(0),o=n.n(i),a=new(function(){function e(){}var t=e.prototype;return t.getSdkParam=function(e){return void 0===e?this._sdkParam:this._sdkParam[e]},t.setSdkParam=function(e){this._sdkParam=o()({},this._sdkParam,e)},t.setInfo=function(e){this._info=e},t.getInfo=function(e){return void 0===e?this._info:Object(r.a)(this._info,e)},e}());t.a=a},function(e,t,n){"use strict";t.a=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&n===e}},function(e,t,n){"use strict";t.a=function(e,t){if(void 0===t&&(t=!0),!Object(r.a)(e))return"";var n=[];for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&void 0!==e[i]&&null!==e[i]){var o=t?encodeURIComponent(i):i,a=t?encodeURIComponent(e[i]):e[i];n.push(o+"="+a)}return n.join("&")};var r=n(6)},function(e,t,n){"use strict";t.a=function(e){if(!Object(i.a)(e))return[];var t=[];return Object(r.a)(e,(function(e,n){t.push(n)})),t};var r=n(10),i=n(6)},function(e,t,n){"use strict";var r=n(14),i=n(10),o=n(15),a=n(6);t.a=function(e,t){if(!Object(a.a)(e))return t;var n=Object(o.a)(e);if(0===n.length)return t;t=function(e,t){return void 0===t&&(t=location.href),e instanceof Array||(e=[e]),t=t.replace(/[\r\n]/g,""),Object(i.a)(e,(function(e){t=(t=t.replace(new RegExp("(?:&"+e+"=[^&]*)","g"),"")).replace(new RegExp("(?:\\?"+e+"=[^&]*&?)","g"),"?")})),t}(n,t);var s=Object(r.a)(e);return t+(/(\?|&)$/.test(t)?""+s:/\?/.test(t)?"&"+s:"?"+s)}},function(e,t,n){"use strict";t.a=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})}},function(e,t,n){"use strict";t.a=function(){}},function(e,t,n){"use strict";t.a=function(e,t,n){void 0===e&&(e=location.href),void 0===t&&(t="&"),void 0===n&&(n="=");var i=e.replace(/.+?\?/,"").replace(/#.*/,""),o=i.split(t);return r[i]||(r[i]=o.reduce((function(e,t){var r=t.indexOf(n);if(r>-1){var i=t.substr(0,r);if(i){var o=t.substr(r+1);try{e[i]=decodeURIComponent(o)}catch(t){e[i]=o}}}return e}),{})),r[i]};var r={}},function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"g",(function(){return p}));var r=n(9),i=n(7),o=Object.prototype.hasOwnProperty,a=function(e,t){var n=function(e,t){if(!Object(i.a)(t))throw new Error("arr should be array! found: "+t);return t.filter((function(t){if(Object(r.a)(t))return!(o.call(e,t)&&""!==e[t]);if(Object(i.a)(t)){var n=t[0],a=t[1];return!(o.call(e,n)&&a(e[n]))}throw new Error("validate item should be string or array.")})).map((function(e){return Object(i.a)(e)?e[0]:e}))}(e,t);return 0===n.length?{status:!0,msg:""}:{status:!1,msg:n.join(", ")+" 错误"}},s=function(e,t){return void 0===t&&(t=[]),a(e,["offer_id","openid"].concat(t))},c=function(e,t){return void 0===t&&(t=[]),s(e,["buy_quantity","pf","zoneid"].concat(t))},u=function(e){return s(e,["buy_quantity","provide_uin"])},l=function(e){return c(e,["provide_uin"])},d=function(e){return s(e,["pf","service_code"])},f=function(e){return s(e,[["goodstokenurl",function(e){return/\d+\/[A-Za-z_-]+\?[A-Za-z_-]+=/.test(e)}],"zoneid","pf"])},p=function(e){return s(e,["pf","service_id"])}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),i=n.n(r),o=function(){function e(e){var t=e.ret,n=e.err_code,r=void 0===n?"":n,i=e.msg;this.result={resultCode:t,resultMsg:i,innerCode:r}}var t=e.prototype;return t.setExtra=function(e){return void 0===e&&(e={}),this.result=i()({},this.result,e),this},t.getResult=function(){return this.result},e}()},function(e,t,n){"use strict";function r(e){return Object(o.a)("Function",e)}var i=n(7),o=n(13);t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return r(e)?Object(i.a)(t[0])?e.call.apply(e,[null].concat(t[0])):e.call.apply(e,[null].concat(t)):null}},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t.split(".");e&&n<r.length;)e=e[r[n++]];return e}t.a=function(){var e=Array.prototype.slice.call(arguments);return r(e[0],e.slice(1).join("."))}},function(e,t,n){"use strict";t.a=function(e,t){var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),r=[],i=0;if(t=t||n.length,e)for(i=0;i<e;i++)r[i]=n[0|Math.random()*t];else for(r[8]=r[13]=r[18]=r[23]="-",r[14]="4",i=0;i<36;i++)if(!r[i]){var o=0|16*Math.random();r[i]=n[19===i?3&o|8:o]}return r.join("")}},function(e,t,n){"use strict";function r(e,t){if(!Object(a.a)(t)||0===t.length)return e;var n=t.reduce((function(e,t){return e[t]=!0,e}),{});return Object(o.a)(e).reduce((function(t,r){return n[r]||(t[r]=e[r]),t}),{})}var i=n(14),o=n(15),a=n(7),s=n(6),c=n(0),u=n.n(c),l=n(3),d=n.n(l),f=n(32),p=n.n(f),h=n(5),g=n(21),v=n(2),_=n(22),y=n(8),m=n(17),b=function(e){var t={0:0,"-1":-1,2:-2,3:1e3},n=String(e.errCode||e.resultCode),r=e.errMsg||e.resultMsg||"";if(Object.prototype.hasOwnProperty.call(t,n))return{resultCode:t[n],resultMsg:r};var i=h.b.FAIL;return{resultCode:i,resultMsg:h.d[i]}},w=n(12),O=n(34),E=n(30);n.d(t,"a",(function(){return C}));var S,T,I,A,C=(S=function(e,t){return void 0===e&&(e=!0),void 0===t&&(t=3e3),function(n,r,i){var o=i.value;return i.value=Object(v.debounce)(o,t,e),i}}(),T=function(e,t,n){if("launchPay"!==t)return n;var r=n.value;return n.value=function(){for(var e=this,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(~~this.opt.env){if(this.opt.__unsafe_disable_sandbox_tips)return void r.apply(this,i);y.a.showModal({content:"温馨提示：您即将进入测试环境，任何充值都无法在真实环境中使用。若您不是测试人员，请勿充值。",showCancel:!1}).then((function(t){t.confirm?r.apply(e,i):Object(_.a)(n.value.cancel)}))}else r.apply(this,i)},n},I=function(e,t,n){if(v.scene.isQQMp){var r=n.value;n.value=function(e,t){if(!e.useRequestMidasPayment)return r.call(this,e,t);var i=Object(v.camelize)(e),o=Object(v.compact)(u()({zoneId:i.zoneid||i.zoneId||"1"},Object(m.a)(i,["offerId","buyQuantity","isCanChange","discountId","aid","other"]),i._internal_qq_req_mdspay_param,{success:function(e){return t(b(e))},fail:function(e){return t(b(e))},complete:function(){return n.value.cancel&&n.value.cancel()}}));qq.requestMidasPayment(o)}}return n},A=function(e){function t(t,n){var r;return(r=e.call(this)||this).opt=t||{},w.a.setSdkParam(r.opt),r.api=n,r.name="BaseApi",r.params=null,r.callback=null,r.AppClass=null,r.app=null,r.callbackInvoked=!1,y.a.offAllAppShow(),r.checkUpdate({silent:t.silent}),r}d()(t,e);var n=t.prototype;return n.launchPay=function(e,t){var n=this;if("function"!=typeof t)throw new Error("Callback must be a function.");if(this.callbackInvoked)throw new Error("Midas instance should be re-initialized before calling `launchPay`.");this.params=e||{},w.a.setSdkParam(this.params),this.callback=t,this.app=new this.AppClass({params:e,opt:this.opt,api:this}),this.app.report("payparams",u()({},e,this.opt)),Object(s.a)(e.context)&&(e.context.__MIDAS_EXTEND__={report:this.app.report.bind(this.app),util:v}),this.app.pay().then((function(e){return n.constructResult(e)})).then((function(e){return n.invokeCallback(e)})).catch((function(e){return n.errorCallback(e)})).finally((function(){return n._destroy()}))},n.launchFeature=function(e,t){switch(e.type){case"ask":return e.goodstokenurl="/v1/r/"+e.offer_id+"/mobile_goods_info?friends_pay_msg="+e.order_id+"&token_store_type=1&friends_pay_source=mobile",delete e.order_id,delete e.type,this.launchPay(e,t);case"pay_score":return function(e){return void 0===e}(e.direct_channel)&&(e.direct_channel="wechat"),e.enablePayScore=!0,this.launchPay(e,t);case"friends_pay_order":return e.isFriendsPayOrder=!0,this.launchPay(e,t);default:throw new Error("type is not valid.")}},n.cancel=function(){"function"==typeof this.launchPay.cancel&&this.launchPay.cancel()},n.constructResult=function(e){return void 0===e&&(e={}),new g.a(e).setExtra(e.extra).getResult()},n.errorCallback=function(e){var t=u()({},r(e.info,["ret","msg","err_code"]),e.extra);if("PayError"===e.name){var n=new g.a(e.info).setExtra(t).getResult();if("FRIENDS_PAY_ORDER"===n.resultMsg){var o=w.a.getInfo("info.rate"),a=this.params.buy_quantity;return n.info&&!n.info.price_level&&(n.info.price_level=Math.round(a/parseInt(o))),n.info.friends_pay_msg=n.info.token,delete n.info.token,this.invokeCallback({resultCode:0,resultMsg:"下单成功",extendInfo:{token:Object(i.a)(n.info),priceLevel:n.info.price_level}})}return this.invokeCallback(n)}if(e.msg&&e.ret){var s=new g.a(e).setExtra(t).getResult();return this.invokeCallback(s)}return this.app&&this.app.clientLog("JS ERROR: "+e.message+". stack: "+e.stack,190,"midaspay/api/base-api.js"),this.invokeCallback()},n.invokeCallback=function(e){if(this.app.report("invoke.callback",u()({},e,{invoked:this.callbackInvoked})),!this.callbackInvoked&&"function"==typeof this.callback){var t=e||this.constructResult(h.a.FAIL);this.callback(t),this.callbackInvoked=!0}},n.destroy=function(){},n._destroy=function(){y.a.offAllAppShow(),this.invokeCallback(),w.a.getSdkParam("hide_loading")||y.a.hideToast(),this.cancel();try{this.app&&this.app.destroy&&(this.app.destroy(),this.app=null),this.callback=null,this.api.instance=null}catch(e){}},n.checkUpdate=function(e){return Object(E.a)(e)},n.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(n))},t}(O.TinyEmitter),p()(A.prototype,"launchPay",[S,T,I],Object.getOwnPropertyDescriptor(A.prototype,"launchPay"),A.prototype),A);C.createApi=function(e){return{init:function(t){return void 0===t&&(t={}),this.instance=new e(t,this),this.instance},get:function(){if(!this.instance)throw new Error(e+" is not initialized.");return this.instance},destroy:function(){this.instance&&(this.instance.destroy(),this.instance=null)}}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";var r=n(18),i=n(4),o=n(7),a=n(23),s=n(22),c=n(0),u=n.n(c),l=n(19),d=n(17),f=n(3),p=n.n(f),h=n(2),g=n(1),v=n(5),_=n(21),y=function(){function e(e,t,n){void 0===n&&(n={}),this.app=e,this.payMod=t,this.params=n,this.payMod.cgi.setChannel(this),this.name="",this.buyReportIformat="",this.payReportIformatPrefix=""}var t=e.prototype;return t.buildBuyParams=function(e){},t.beforeSave=function(){return g.a.resolve()},t.buyAndPay=function(e){var t=this;this.report(this.buyReportIformat);var n=this.buildBuyParams(e);return this.beforeSave().then((function(){return t.params.enablePayScore?t.payMod.enablePayScore():t.params.isFriendsPayOrder?t.payMod.friendsPayOrder():t.payMod.save(n)})).then((function(e){return t.params.isFriendsPayOrder&&(~~e.ret?i.a.except(e):i.a.except({info:e.info,msg:"FRIENDS_PAY_ORDER"})),e})).then((function(e){return t.beforePay(e)})).then((function(e){return t.pay(e,n)}))},t.beforePay=function(e){return h.timer.start(this.name+"pay"),e},t.pay=function(e,t){},t.getChannelName=function(){return""},t.constructResult=function(e,t){return void 0===t&&(t={channel:this.getChannelName()}),new _.a(e).setExtra(t).getResult()},t.reportPay=function(e,t){var n="fail"===e?{resultCode:-9999}:void 0;this.report(this.payReportIformatPrefix+"."+e+".callback",u()({},t,{times:h.timer.get(this.name+"pay")}),n)},t.report=function(e,t,n){this.app.report(e,t,n)},t.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(n))},e}();y.ResultAdapter=_.a;var m=n(8),b=n(12),w=function(e){function t(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,r)||this).name="WechatChannel",i.api=i.app.api,i.buyReportIformat="wechat.buy",i.payReportIformatPrefix="wechat_pay",i.buyParams={},i}p()(t,e);var n=t.prototype;return n.buildBuyParams=function(e){return this.buyParams=u()({wx_direct_pay:this.params.referer?3:0,wx_publice_pay:1,pay_method:"wechat"},e),"1"==this.payMod.getPayParams().change_wx_openid&&(this.buyParams.change_wx_openid="1"),this.buyParams},n.getChannelName=function(){return"wechat"},n.pay=function(e,t){if(e.wx_info=e.wx_info||{},e.info=e.info||{},this.report("wechat.handlebuy",e&&e.wx_info),m.a.hideToast(),h.scene.isOwnerMP||h.scene.isWxPlugin)return g.a.resolve({ret:0,extra:{wx_info:e.wx_info}});if(e.info.service_id)return this.payScore(e.info);var n=this.getSignUrl(e);return n?(this.wxSerialNo=e.wx_info?e.wx_info.wx_serialno:"",this.sign(n)):this.requestPayment(e)},n.payScore=function(e){var t=this;this.report("payscore.params",e);var n=function(){var e=b.a.getSdkParam("wx_api"),t="",n={};return"openBusinessView"===e?(t=e,n={businessType:"wxpayScoreEnable"}):(t="navigateToMiniProgram",n={appId:"wxd8f3793ea3b935b8",path:"pages/use/enable"}),{payScoreApi:t,payScoreParams:n}}(),r=n.payScoreApi,o=n.payScoreParams,a=b.a.getSdkParam("wx_extra")||{};return m.a[r](u()({},o,{extraData:Object(d.a)(e,["mch_id","service_id","out_request_no","timestamp","nonce_str","sign_type","sign"]),envVersion:b.a.getSdkParam("mp_env")},a)).then((function(){return i.a.except({ret:v.b.UNKNOWN,msg:"信用分开通结果未知，请从后台查询"})})).catch((function(e){if(e instanceof i.a)throw e;return t.report("payscore.navigate.error",e),i.a.except({ret:v.b.FAIL,msg:e.errMsg||"开通信用分失败"})}))},n.sign=function(e){var t=this,n=Object(l.a)(e);return this.report("sign.params",n),this.unknownError=new i.a({ret:v.b.UNKNOWN,msg:"签约结果未知"}),m.a.navigateToMiniProgram({appId:"wxbd687630cd02ce1d",path:"pages/index/index",extraData:n}).then((function(e){var n=new g.a((function(e,n){Object(h.delay)((function(){t.report("sign.timeout"),n(t.unknownError)}),15e3)}));return g.a.race([t.onNavigationSuccess(e,"wxbd687630cd02ce1d"),n])})).catch((function(e){if(e===t.unknownError)throw e;t.report("sign.navigate.error",e),i.a.except({ret:v.b.FAIL,msg:e.errMsg||"签约失败"})}))},n.onNavigationSuccess=function(e){var t=this;return this.report("sign.navigate.success",e),this.api.emit("navigateToSign"),new g.a((function(e,n){m.a.onAppShow((function(r){var o=r.referrerInfo||{},a=o.appId,s=o.extraData;if("wxbd687630cd02ce1d"===a){var c=s&&"SUCCESS"!==s.return_code,l=s&&"SUCCESS"===s.return_code,d={ret:v.b.SUCCESS,msg:"签约成功"};if(l)return e(u()({},d,{extra:{contractId:s.contract_id}}));if(c)throw Error();return t.wxSerialNo?(t.app.showPayLoading({duration:10,title:"查询结果中..."}),t.payMod.querySignResult(t.wxSerialNo).then((function(n){return t.report("query.sign.success",n),e(d)})).catch((function(e){return t.report("query.sign.fail",e),n(e&&e.info&&5===e.info.status?new i.a({ret:v.b.FAIL,msg:"签约失败"}):t.unknownError)}))):n(t.unknownError)}}))}))},n.requestPayment=function(e){var t=this,n=e.wx_info||{},r=n.wx_time,o=n.wx_noncenum,a=n.wx_package,s=n.wx_signtype,c=void 0===s?"SHA1":s,d=n.wx_sign;if(this.report("wechatpay.start.pv",e.wx_info),this.params.wx_h5pay){var f=Object(l.a)(d),p=e.info.portal_serial_no;return Gc.getSystemInfoSync().isQB&&this.params.referer?new g.a((function(n){Gc.requestPayment(u()({},f,{referer:t.params.referer,complete:function(){return n({ret:v.b.UNKNOWN,msg:"支付结果未知，请从后台查询",extra:{portalSerialNo:e.info.portal_serial_no}})}}))})):{ret:v.b.SUCCESS,msg:"",extra:u()({},f,{mweb_url:d,portalSerialNo:p})}}return m.a.requestPayment({timeStamp:r,nonceStr:o,package:a,signType:c,paySign:d}).then((function(e){return t.log("pay success",e),t.reportPay("success",e),{ret:v.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.log("pay fail ",e),t.report("fail",e);var n=(e.errMsg||"").indexOf("cancel")>-1?v.b.CANCEL:v.b.FAIL,r=void 0===e.errCode?n:e.errCode,o=e.errMsg||v.d[r];i.a.except({ret:r,msg:o})}))},n.getSignUrl=function(e){return e.wx_info.wx_sign_url||decodeURIComponent(e.url||"")},t}(y),O=function(e){function t(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,r)||this).name="WechatAppChannel",i.buyReportIformat="wechat_app.buy",i.payReportIformatPrefix="wechatapp_pay",i}p()(t,e);var n=t.prototype;return n.beforeSave=function(){return Gc&&Gc.requestVirtualPayment?g.a.resolve():(this.report("requestVirtualPayment.notexist"),i.a.reject({ret:v.b.INTERFACE_NOT_EXIST,msg:v.d[v.b.INTERFACE_NOT_EXIST]}))},n.buildBuyParams=function(e){if(this.payMod.needCurrencyType(this.getChannelName()))return this.app.paramsError("需要currency_type参数");var t=u()({currency_type:this.payMod.getCurrencyType(),pay_method:this.getChannelName()},e);return"1"==this.payMod.getPayParams().change_wx_openid&&(t.change_wx_openid="1"),t},n.getChannelName=function(){return"wechatapp"},n.pay=function(e,t){var n=this;return this.report("wechat_app.handlebuy",e&&e.wechatapp_info),m.a.hideToast(),new g.a((function(t,r){var o=e.wechatapp_info||{},a=o.price_level,s=o.orderid,c=o.orderid,u=o.desc,l=o.sign;n.report("wechatapp_pay.start.pv"),Gc.requestVirtualPayment({priceLevel:a,businessOrderId:s,outTradeNo:c,desc:u,virtualPaySign:l,success:function(e){n.reportPay("success",e);var r=v.b.SUCCESS,i=e.errMsg;t({ret:r,msg:i})},fail:function(e){n.reportPay("fail",e);var t=e.errMsg||"",o=t.indexOf("cancel")>-1?v.b.CANCEL:v.b.FAIL,a=void 0===e.errCode?o:e.errCode,s=t||v.d[a];r(new i.a({ret:a,msg:s}))}})}))},t}(y),E=function(e){function t(t,n,r){var i;return void 0===r&&(r={}),(i=e.call(this,t,n,r)||this).name="QQWalletChannel",i.api=i.app.api,i.buyReportIformat="qqwallet.buy",i.payReportIformatPrefix="qqwallet_pay",i.buyParams={},i}p()(t,e);var n=t.prototype;return n.buildBuyParams=function(e){return this.buyParams=u()({cft_type:"tokenid",pay_method:"qqwallet"},e),this.buyParams},n.getChannelName=function(){return"qqwallet"},n.pay=function(e){return e.qqwallet_info=e.qqwallet_info||{},this.report("qqwallet.handlebuy",e&&e.qqwallet_info),m.a.hideToast(),this.requestPayment(e.qqwallet_info)},n.requestPayment=function(e){var t=this,n=e||{},r=n.qqwallet_bargainorId,o=n.qqwallet_tokenId;return this.report("qqwalletpay.start.pv",e),m.a.requestPayment({bargainor_id:r,package:"prepay_id="+o}).then((function(e){return t.reportPay("success",e),{ret:v.b.SUCCESS,msg:e.errMsg}})).catch((function(e){t.report("fail",e);var n=(e.errMsg||"").indexOf("cancel")>-1?v.b.CANCEL:v.b.FAIL,r=void 0===e.errCode?n:e.errCode,o=e.errMsg||v.d[r];throw new i.a({ret:r,msg:o})}))},t}(y),S={wechat:function(e,t,n){return void 0===n&&(n={}),new w(e,t,n)},wechatapp:function(e,t,n){return void 0===n&&(n={}),new O(e,t,n)},qqwallet:function(e,t,n){return void 0===n&&(n={}),new E(e,t,n)}},T=n(14),I=n(24),A=n(11),C=function(){function e(){this.reportQueue=[],this.pid=0,this.iformatPrefix="",this.env={},this.params={},this.transactionId=Object(I.a)()+"_"+(new Date).getTime(),this.handleReportComplete=this.handleReportComplete.bind(this),this.name="Report"}var t=e.prototype;return t.constructParams=function(e,t,n){void 0===n&&(n={});var r=u()({6:10,7:0,8:t?Object(T.a)(t):"",13:this.pid++,21:[this.iformatPrefix,e].join("."),31:"midas_wx_sdk_"+Object(A.c)(),38:(new Date).getTime(),29:this.transactionId},n);return Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("|")},t.doSend=function(){var e,t=this,n=this.reportQueue[0]||{},r=n.iformat,i=n.resultInfo,o=n.opt;if(r){var a=Gc.request({url:"https://api.unipay.qq.com/v1/900/15499/log_data",method:"POST",data:{num:1,record0:this.constructParams(r,i,o),rr:Math.random()},header:{"content-type":"application/x-www-form-urlencoded"},complete:function(){clearTimeout(e),t.handleReportComplete()}});e=setTimeout((function(){try{a.abort()}catch(e){}}),3e3)}},t.handleReportComplete=function(){this.reportQueue.shift(),this.reportQueue.length>0&&this.doSend()},t.send=function(e,t,n){var r=this;void 0===n&&(n={}),this.reportQueue.push({iformat:e,resultInfo:t,opt:n}),1===this.reportQueue.length&&setTimeout((function(){r.doSend()}),0)},t.destroy=function(){},t.setIformatPrefix=function(e){this.iformatPrefix=e},t.setDefaultParams=function(e){this.params=e},t.init=function(){var e=this;if(this.report("before.checkenv"),this.env.model)return this.report("after.checkenv",this.env),this.env,g.a.resolve(this.env);var t=m.a.getSystemInfo().then((function(t){e.env=u()({},e.env,t)})).catch(r.a),n=m.a.getNetworkType().then((function(t){void 0===t&&(t={}),t.networkType,e.env.networkType=t.networkType})).catch(r.a);return g.a.all([t,n]).then((function(){e.report("after.checkenv",e.env),e.env}))},t.getPlatform=function(){var e=this.env;return e.model?e.model.indexOf("iPhone")>-1?"ios":"android":""},t.getLibVersion=function(){var e=this.env;return e&&e.version||""},t.report=function(e,t,n){void 0===n&&(n={}),this.iformatPrefix.split(".").slice(1).join("."),this.send(e,t,{3:this.params.openid||"",37:this.params.session_id||"",43:this.params.session_type||"",41:this.params.login_wx_appid||"",26:this.params.pf||"",7:n.resultCode||0,19:this.params.service_code||"",24:this.params.offer_id||"",50:this.getPlatform()+"_"+this.getLibVersion(),51:this.params.aid||""})},t.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(n))},e}(),k=n(20);n.d(t,"a",(function(){return x}));var x=function(){function e(e){var t=e.params,n=void 0===t?{}:t,r=e.opt,i=e.api;this.params=n,this.opt=r,this.env={},this.payMod=null,this.api=i,this.params=u()({},n,{env:~~r.env,bizAppId:this.getBizAppid(n)}),this.validator=k.d,this.reportObj=new C,this.reportObj.setDefaultParams(this.params)}var t=e.prototype;return t.beforePay=function(){if(h.timer.start(this.name+"paystart"),this.showPayLoading(),"function"==typeof this.validator&&!this.params._skipValidation){this.validator=this.params.enablePayScore?k.g:this.validator;var e=this.validator(this.params);return e.status?this.checkEnv():this.paramsError(e.msg)}return this.checkEnv()},t.pay=function(){var e=this;return this.beforePay().then((function(){if(!e.params.direct_channel)return e.payMod.getInfo()})).then((function(t){return e.getPayChannel(t)})).then((function(t){return e.directPay(t)}))},t.checkEnv=function(){return this.reportObj.init()},t.report=function(e,t,n){void 0===n&&(n={}),this.reportObj.report(e,t,n)},t.clientLog=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n=""),this.report("client.log",{msg:e,line:t,file:n})},t.getPayChannel=function(e){if(Object(s.a)(this.params.onPayInfo,e),this.params.direct_channel)return g.a.resolve(this.params.direct_channel);b.a.setInfo(e);var t=Object(a.a)(e,"info.channel");if(Object(o.a)(t)){var n=h.scene.isQQMp,r={qqwallet:n,wechat:!n,wechatapp:!n},c=t.filter((function(e){return r[e.name]}));if(c.length>0)return g.a.resolve(c[0].name)}return this.report("channel.info.exception",{},{resultCode:"-9999"}),i.a.reject({ret:v.b.FAIL,msg:v.d.CHANNEL_NOT_SUPPORT,err_code:t.map((function(e){return e.name})).join(", ")})},t.canDirectPay=function(e){return!(!e||!Object.prototype.hasOwnProperty.call(S,e))||(this.report("directpay.nosupport",{channel:e}),!1)},t.directPay=function(e){var t=this;return this.canDirectPay(e)?(this.report("directpay",{channel:e}),S[e](this,this.payMod,this.params).buyAndPay().then((function(e){return t.report("payduration",{time:h.timer.get(t.name+"paystart")}),e}))):i.a.reject({ret:v.b.FAIL,msg:v.d.CHANNEL_NOT_SUPPORT})},t.getBizAppid=function(e){return 1!==parseInt(this.opt.use_default_wxappid)?e.biz_appid||"1":""},t.paramsError=function(e){return void 0===e&&(e=""),i.a.reject({ret:v.b.PARAMS_ERROR,msg:e||v.d[v.b.FAIL]})},t.showPayLoading=function(e){var t=void 0===e?{}:e,n=t.duration,r=void 0===n?30:n,i=t.title,o=void 0===i?"支付中...":i;b.a.getSdkParam("hide_loading")||m.a.showToast({title:o,icon:"loading",mask:!0,duration:1e3*r})},t.hidePayLoading=function(){b.a.getSdkParam("hide_loading")||m.a.hideToast()},t.destroy=function(){this.callback=r.a,this.reportObj.destroy(),this.payMod.cgi.clearNetworkTask(),this.payMod=null},t.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(n))},e}()},function(e,t,n){"use strict";function r(e){return Object(l.a)(e,(function(t,n){Object(a.a)(t)&&""===t&&delete e[n],Object(s.a)(t)&&0===t.length&&delete e[n],Object(c.a)(t)&&(r(t),0===Object(u.a)(t).length&&delete e[n])})),e}function i(e){if(!Object(c.a)(e))return e.toString();try{var t=r(JSON.parse(JSON.stringify(e)));return JSON.stringify(t)}catch(t){return JSON.stringify(e)}}var o=n(4),a=n(9),s=n(7),c=n(6),u=n(15),l=n(10),d=n(0),f=n.n(d),p=n(19),h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},g=n(16),v=function(){function e(e){this.openid=e.openid.toString(),this.openkey=e.openkey||"",this.sessionid=e.sessionid,this.sessiontype=e.sessiontype}return e.createSession=function(t,n){return new e(h({},n,t))},e.createUinSkeySession=function(e){return this.createSession(e,this.uinSkeySchema)},e.createWechatSession=function(e){return this.createSession(e,this.wechatSchema)},e.createQQConnectSession=function(e){return this.createSession(e,this.qqConnectSchema)},e.createDummySession=function(e){var t=h({openkey:"nokey"},e);return this.createSession(t,this.dummySchema)},e.matchesSchema=function(e,t){return(Object(s.a)(t)?t:[t]).some((function(t){return e.sessionid===t.sessionid&&e.sessiontype===t.sessiontype}))},e.prototype.getSessionParam=function(){return{openid:encodeURIComponent(this.openid),openkey:encodeURIComponent(this.openkey),session_id:encodeURIComponent(this.sessionid),session_type:encodeURIComponent(this.sessiontype)}},e.prototype.addSessionParam=function(e){return Object(g.a)(this.getSessionParam(),e)},e.createSchema=function(e,t){return{sessionid:e,sessiontype:t}},e.wechatSchema=e.createSchema("hy_gameid","wc_actoken"),e.uinSkeySchema=e.createSchema("uin","skey"),e.qqConnectSchema=e.createSchema("openid","kp_accesstoken"),e.dummySchema=e.createSchema("hy_gameid","st_dummy"),e}(),_=n(11),y=n(12),m=n(24),b=n(35),w=n.n(b),O=n(5),E=n(1),S=n(18),T=n(8),I=n(2),A={5001:"buyQuantity参数错误，请参考虚拟支付教程中虚拟支付API接口说明",7007:"获取微信授权失败，请使用小游戏管理员账号重新授权登录",7006:"配置信息未发布沙箱，请在MP管理端将游戏币托管配置信息进行“沙箱发布”"},C=function(e){var t=f()({},e);if(1003===e.ret){var n=function(e){return Object(a.a)(e)&&e.split(/-+/)[1]||""}(e.err_code);A[n]&&(t.msg=A[n])}return 1138===e.ret?parseInt(y.a.getSdkParam("hide_risk_modal"))?E.a.resolve(t):function(e,t){var n=f()({},Object(O.c)(t),{err_code:e.err_code||"",extra:{resultInfo:e.msg}});return T.a.showModal({content:e.msg,showCancel:!1}).then((function(){return n})).catch((function(){return n}))}(t,O.b.RISK_INTERCEPT):t},k=function(e,t,n){if(2022===e.ret){var r=y.a.getSdkParam("context");if(!Object(c.a)(r))throw e;var i=f()({},e).flex_attack_info,a=void 0===i?{}:i,s=Object(I.pick)(t,["openid","openkey","session_id","session_type","from_h5","pf","pfkey","session_token","webversion","pay_method"]);"no_key"===s.openkey&&"wc_actoken"===s.session_type&&(s.session_type="st_dummy");var u=y.a.getSdkParam("hide_rc_switch"),l={hide_switch:void 0===u||u?1:"",amt:a.fk_amt,fk_info:encodeURIComponent(a.fk_info),from:"miniprogram",rcs_version:"1.0",r:Math.random(),type:"save",appid:y.a.getSdkParam("offer_id"),sandbox:y.a.getSdkParam("sandbox"),verify_url:a.verify_url},d=y.a.getSdkParam("rc_page")||"/pages/midas-rc/midas-rc",p=r.__MIDAS_EXTEND__,h=Object(g.a)(f()({},s,l),d);return new E.a((function(t,r){T.a.navigateTo({url:h}).catch((function(t){r(e)})),p.riskControlCallback=function(e,i){if(void 0===i&&(i={}),(e=e||{}).error&&!parseInt(y.a.getSdkParam("hide_risk_modal"))&&T.a.showModal({title:"提示",content:"对不起，目前不支持该验证方式，请选择其他验证方式并重试",showCancel:!1}),!i.fk_rc_token||e.error)return r(new o.a(Object(O.c)(O.b.RISK_INTERCEPT)));var a=n.buildBuyParams(i);n.payMod.save(a).then(t).catch(r),p.riskControlCallback=S.a}}))}throw e},x=function(e,t,n){void 0===e&&(e={});var r=null===n?"":n.getChannelName(),i=e.data||{},a={wechatapp:C,default:k},s="function"==typeof a[r]?a[r]:a.default;return E.a.resolve().then((function(){return s(i,t,n)})).catch((function(t){if(t instanceof o.a)throw t;throw Object(I.pick)(e.data,["msg","ret","err_code"])}))},P=function(){function e(e){void 0===e&&(e={}),this.pf=e.pf||"html5",this.pfkey=e.pfkey||"pfkey",this.appid=e.appid,this.sandbox=~~e.sandbox,this.sessionObj=e.sessionObj||null,this.mid=e.mid||"r",this.domain="api.unipay.qq.com",1===this.sandbox?this.domain="sandbox.api.unipay.qq.com":2===this.sandbox&&(this.domain="dev.api.unipay.qq.com"),this.domainq=this.sandbox?"sandbox.api.unipay.qq.com":"q.unipay.qq.com",this.sessionToken=e.sessionToken||Object(m.a)()+(new Date).getTime(),e.extend&&(this.extend=e.extend),this.requestTasks={},this.taskId=0,this.channel=null}var t=e.prototype;return t.setChannel=function(e){this.channel=e},t.setEnv=function(e){if(e&&this.sandbox)switch(this.env=e,e){case"dev":this.domain="dev.api.unipay.qq.com";break;case"sandbox":this.domain="sandbox.api.unipay.qq.com"}},t.restoreEnv=function(){this.sandbox&&this.setEnv("sandbox")},t._getCgiUrl=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),function(e,t){return Object(a.a)(e)&&Object(c.a)(t)?e.replace(/\$([a-zA-Z0-9_\.]*)\$/g,(function(e,n){if(-1!==n.indexOf(".")){n=n.split(/\./g);var r=t;return Object(l.a)(n,(function(e){r=r[e]})),r||""}return void 0!==t[n]?t[n]:""})):e}(e.url,f()({appid:this.appid,mid:this.mid||"r",domain:"https://"+(n.domainq?this.domainq:this.domain)},t))},t.setSession=function(e){this.sessionObj=e},t._getSessionParam=function(){return f()({pf:this.pf,pfkey:this.pfkey,from_h5:1,session_token:this.sessionToken,r:Math.random()},this.sessionObj.getSessionParam())},t.wxOpenBusiness=function(t,n){var r=f()({sub_channel:2},t,this._getSessionParam(),{wechatapp_proxy_type:"wx_open_business"});return r.sig=Object(I.signWithMD5)(r,["openid","openkey","session_id","session_type","service_id"]),this.request(this._getCgiUrl(e.url.wechatAppProc),r,n)},t.getToken=function(t,n){var r=f()({action:"new_friends_pay",friends_pay_source:"wechatapp",type:"save"},t,this._getSessionParam(),{wechatapp_proxy_type:"get_token"});return this.request(this._getCgiUrl(e.url.wechatAppProc),r,n)},t.request=function(e,t,n){var r=this;if(void 0===t&&(t={}),void 0===n&&(n={}),!Gc)throw new Error("wx is not defined.");t.webversion="midaswxapp_"+Object(_.c)();var i,o=this.genTaskId();return(e.split("?")[0]||"").match(/(\w+)$/),new E.a((function(a,s){var c=Gc.request({url:e,method:n.method||"GET",header:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},data:t,success:function(e){void 0===e&&(e={});var n={ret:-9998,httpCode:e.statusCode,msg:"系统繁忙，请稍后再试！"};return e.statusCode>=200&&e.statusCode<=299?e.data&&0===e.data.ret?a(e.data):(e.data.ret||(e.data=n),e.data.msg=e.data.msg||n.msg,x(e,t,r.channel).then(a).catch(s)):s(n)},fail:function(e){var t=e.errMsg||"";return s({ret:-9999,msg:"请求超时！（"+t+"）"})},complete:function(){r.clearSingleNetworkTask(o),i=null}});i=setTimeout((function(){i=null;try{c.abort()}catch(e){}}),12e3),r.addNetworkTask(o,c,i)}))},t.mobileSaveGoods=function(t,n){void 0===t&&(t={});var r=t._params;delete t._url,delete t._mid,delete t._params;var i=f()({biz_appid:this.sessionObj.appid||""},this._getSessionParam(),t);return r&&/\/mobile_goods_info\?/.test(r)&&(r=r.replace(/mobile_goods_info\?.+/,"wechatapp_proc")),this.request(this._getCgiUrl(e.url.mobileSaveGoods3,{params:r}),i,n)},t.mobileGoodsInfo=function(t,n){void 0===t&&(t={});var r=t.params;delete t.params;var i=f()({},this._getSessionParam(),t);return r&&/\/mobile_goods_info\?/.test(r)&&(r=r.replace(/mobile_goods_info\?.+/,"wechatapp_proc")),this.request(this._getCgiUrl(e.url.mobileGoodsInfo3,{params:r}),i,n)},t.wechatAppProc=function(e,t){return this.commonEndpoint("wechatAppProc",e,t)},t.querySignResult=function(e,t){return this.commonEndpoint("wechatAppProc",f()({},e,{cmd:17,wechatapp_proxy_type:"wechat_query"}),t).then((function(e){if(4!==e.wx_order_status)throw new o.a({ret:O.b.FAIL,status:e.wx_order_status})}))},t.commonEndpoint=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r={});var i=f()({},this._getSessionParam(),n);return this.request(this._getCgiUrl(e.url[t]),i,r)},t.addNetworkTask=function(e,t,n){this.requestTasks[e]={task:t,timeout:n}},t.clearNetworkTask=function(){var e=this;Object.keys(this.requestTasks).forEach((function(t){e.clearSingleNetworkTask(t)})),this.requestTasks={}},t.clearSingleNetworkTask=function(e){var t=this.requestTasks[e];try{t.timeout&&clearTimeout(t.timeout),t.task&&t.task.abort&&t.task.abort(),delete this.requestTasks[e]}catch(e){}},t.genTaskId=function(){return++this.taskId},w()(e,[{key:"isSandbox",set:function(e){this.sandbox=e,this.domain=this.sandbox?"sandbox.api.unipay.qq.com":"api.unipay.qq.com"}}]),e}();P.url={},P.url.mobileGoodsInfo3={url:"$domain$$params$",https:!0},P.url.mobileSaveGoods3={url:"$domain$$params$",https:!0},P.url.wechatAppProc={url:"$domain$/v1/r/$appid$/wechatapp_proc?",https:!0},P.url.wechatQuery={url:"$domain$/v1/r/$appid$/wechat_query?",https:!0},P.url.jifenPayGoods={url:"https://m.jifen.qq.com/cgi-bin/pay_goods?",https:!0},P.url.wxOpenBusiness={url:"$domain$/v1/r/$appid$/wx_open_business?",https:!0},P.url.getToken={url:"$domain$/v1/r/$appid$/get_token?",https:!0},n.d(t,"a",(function(){return D}));var D=function(){function e(e,t){this.app=e,this.name="BasePayMod",this.params=t,this.params.extend=t.extend||"",this.session=new v({openid:t.openid,openkey:t.openkey||"no_key",sessionid:t.session_id||"hy_gameid",sessiontype:t.session_type||"wc_actoken"}),this.infoReportIformat={pv:"info.pv",status:"info.status"},this.saveReportIformat={pv:"save.pv",status:"save.status"},this.processType="",this.cgi=new P({pf:this.params.pf,pfkey:this.params.pfkey||"pfkey",appid:this.params.offer_id,sandbox:~~this.params.env,sessionObj:this.session,app:e})}var t=e.prototype;return t.getInfoPublicParams=function(){var e={process_type:this.processType,page_type:"mall",wx_appid:this.params.login_wx_appid||""};return this.params.pf_header&&(e.pf_header=this.params.pf_header),e},t.beforeGetInfo=function(e){I.timer.start(this.name+"info"),this.report(this.infoReportIformat.pv,e)},t.buildInfoParams=function(){},t.getInfo=function(){},t.getAdditionalParams=function(){var e=this.params.additional;return e?Object(a.a)(e)?Object(p.a)(decodeURIComponent(e)):e:{}},t.getSavePublicParams=function(){var e=this,t=f()({},this.getAdditionalParams(),{process_type:this.processType,page_type:"order",from_https:"1",from_h5:"1",cr_flex:"1",fk_tips:"1",extend:encodeURIComponent(this.params.extend||""),provide_uin:this.params.provide_uin||"",wx_appid:this.params.login_wx_appid||""});if(Object(_.b)().forEach((function(n){e.params[n]&&(t[n]=e.params[n])})),this.params.groupid){var n={GamePayMod:"currency_group",GoodsPayMod:"goods_group",SubscribePayMod:"version=3.0&month_group"}[this.name];t.drm_info=n+"="+this.params.groupid}return t},t.getScorePayParams=function(){return f()({},this.getAdditionalParams(),{service_id:this.params.service_id})},t.getFriendsPayOrderParams=function(){var e=y.a.getInfo("info.rate"),t=this.params,n=t.zoneid,r=t.buy_quantity,i=t.currency_type,o=t.change_wx_openid,a=void 0===o?"":o,s=t.login_wx_appid,c=void 0===s?"":s,u=t.extend,l=void 0===u?"":u,d=Math.round(100*r/parseInt(e));return f()({},this.getAdditionalParams(),{zoneid:n,buy_quantity:r,currency_type:i,change_wx_openid:a,wx_appid:c,extend:l,wcp:"type="+i+"&amt="+d})},t.beforeSave=function(e){this.report(this.saveReportIformat.pv,e),I.timer.start(this.name+"save")},t.buildSaveParams=function(e){void 0===e&&(e={})},t.save=function(e){},t.getPayParams=function(){return this.params},t.getZoneid=function(e){return void 0===e&&(e={}),e.zoneid||this.params.zoneid||"1"},t.getCurrencyType=function(){return this.params.currency_type||""},t.needCurrencyType=function(e){return void 0===e&&(e=""),"wechat_app"===e&&!this.params.currency_type},t.querySignResult=function(e){var t=this;return Object(I.retry)((function(){return t.cgi.querySignResult({wx_serialno:e})}),{times:this.params.retry_times||5,interval:this.params.retry_interval?Math.max(this.params.retry_interval,1e3):2e3,abort:function(e){return e.info&&5===e.info.status}})},t.report=function(e,t,n){this.app.report(e,t,n)},t.enablePayScore=function(){this.beforeSave();var e=this.cgi.wxOpenBusiness(this.getScorePayParams(),{method:"POST"});return this.wrapSave(e)},t.friendsPayOrder=function(){this.beforeSave();var e=this.cgi.getToken(this.getFriendsPayOrderParams(),{method:"POST"});return this.wrapSave(e)},t.reportInfo=function(e){this.report(this.infoReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code||"",res:i(e),times:I.timer.get(this.name+"info")},{resultCode:e.ret})},t.wrapInfo=function(e){var t=this;return e.then((function(e){return t.reportInfo(e),e})).catch((function(e){if(e instanceof o.a)throw e;t.reportInfo(e),o.a.except(e)}))},t.reportSave=function(e){this.report(this.saveReportIformat.status,{httpCode:e.httpCode||"200",resultMsg:e.msg,errCode:e.err_code,res:i(e),times:I.timer.get(this.name+"save")},{resultCode:e.ret})},t.wrapSave=function(e){var t=this;return e.then((function(e){return t.reportSave(e),e})).catch((function(e){if(e instanceof o.a)throw e;t.reportSave(e),o.a.except(e)}))},t.log=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,[this.name].concat(n))},e}()},function(e,t,n){"use strict";function r(e,t){if(!Object(i.a)(e))return-1;if(!Object(i.a)(t))return 1;for(var n=e.split("."),r=t.split("."),o=Math.min(n.length,r.length),a=0;a<o;a++){var s=Number(n[a]),c=Number(r[a]);if(s>c)return 1;if(c>s)return-1;if(!isNaN(s)&&isNaN(c))return 1;if(isNaN(s)&&!isNaN(c))return-1}return 0}var i=n(9),o=n(1),a=n(11);t.a=function(e){void 0===e&&(e={});var t=!0,n=Object(a.c)();try{"devtools"!==Gc.getSystemInfoSync().platform&&(t=!1)}catch(e){t=!1}var i={shouldUpdate:!1,latestVersion:"unknown",currentVersion:n,updateAt:"unknown"};return t?new o.a((function(t){Gc.request({url:"http://r.tnpm.oa.com/@tencent/midas-mp-sdk",success:function(n){var i=n.data["dist-tags"].latest,o=new Date(n.data.time[i]).toLocaleString(),s=Object(a.c)(),c=r(i,s)>0,u={shouldUpdate:c,latestVersion:i,currentVersion:s,updateAt:o},l=console;return l.group("Midas SDK"),l.log(u),l.groupEnd("Midas SDK"),c&&!e.silent&&Gc.showModal({title:"Midas SDK",content:"米大师 SDK 有新版可用，详情请查看官网 http://midas.qq.com。如需屏蔽该消息，请在 init 时传入参数 silent: true。",showCancel:!1}),t(u)},fail:function(){return t(i)}})})):o.a.resolve(i)}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}},function(e,t,n){var r;!function(i){"use strict";function o(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,r,i,a){return o(function(e,t){return e<<t|e>>>32-t}(o(o(t,e),o(r,a)),i),n)}function s(e,t,n,r,i,o,s){return a(t&n|~t&r,e,t,i,o,s)}function c(e,t,n,r,i,o,s){return a(t&r|n&~r,e,t,i,o,s)}function u(e,t,n,r,i,o,s){return a(t^n^r,e,t,i,o,s)}function l(e,t,n,r,i,o,s){return a(n^(t|~r),e,t,i,o,s)}function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,i,a,d,f=1732584193,p=-271733879,h=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)r=f,i=p,a=h,d=g,f=s(f,p,h,g,e[n],7,-680876936),g=s(g,f,p,h,e[n+1],12,-389564586),h=s(h,g,f,p,e[n+2],17,606105819),p=s(p,h,g,f,e[n+3],22,-1044525330),f=s(f,p,h,g,e[n+4],7,-176418897),g=s(g,f,p,h,e[n+5],12,1200080426),h=s(h,g,f,p,e[n+6],17,-1473231341),p=s(p,h,g,f,e[n+7],22,-45705983),f=s(f,p,h,g,e[n+8],7,1770035416),g=s(g,f,p,h,e[n+9],12,-1958414417),h=s(h,g,f,p,e[n+10],17,-42063),p=s(p,h,g,f,e[n+11],22,-1990404162),f=s(f,p,h,g,e[n+12],7,1804603682),g=s(g,f,p,h,e[n+13],12,-40341101),h=s(h,g,f,p,e[n+14],17,-1502002290),f=c(f,p=s(p,h,g,f,e[n+15],22,1236535329),h,g,e[n+1],5,-165796510),g=c(g,f,p,h,e[n+6],9,-1069501632),h=c(h,g,f,p,e[n+11],14,643717713),p=c(p,h,g,f,e[n],20,-373897302),f=c(f,p,h,g,e[n+5],5,-701558691),g=c(g,f,p,h,e[n+10],9,38016083),h=c(h,g,f,p,e[n+15],14,-660478335),p=c(p,h,g,f,e[n+4],20,-405537848),f=c(f,p,h,g,e[n+9],5,568446438),g=c(g,f,p,h,e[n+14],9,-1019803690),h=c(h,g,f,p,e[n+3],14,-187363961),p=c(p,h,g,f,e[n+8],20,1163531501),f=c(f,p,h,g,e[n+13],5,-1444681467),g=c(g,f,p,h,e[n+2],9,-51403784),h=c(h,g,f,p,e[n+7],14,1735328473),f=u(f,p=c(p,h,g,f,e[n+12],20,-1926607734),h,g,e[n+5],4,-378558),g=u(g,f,p,h,e[n+8],11,-2022574463),h=u(h,g,f,p,e[n+11],16,1839030562),p=u(p,h,g,f,e[n+14],23,-35309556),f=u(f,p,h,g,e[n+1],4,-1530992060),g=u(g,f,p,h,e[n+4],11,1272893353),h=u(h,g,f,p,e[n+7],16,-155497632),p=u(p,h,g,f,e[n+10],23,-1094730640),f=u(f,p,h,g,e[n+13],4,681279174),g=u(g,f,p,h,e[n],11,-358537222),h=u(h,g,f,p,e[n+3],16,-722521979),p=u(p,h,g,f,e[n+6],23,76029189),f=u(f,p,h,g,e[n+9],4,-640364487),g=u(g,f,p,h,e[n+12],11,-421815835),h=u(h,g,f,p,e[n+15],16,530742520),f=l(f,p=u(p,h,g,f,e[n+2],23,-995338651),h,g,e[n],6,-198630844),g=l(g,f,p,h,e[n+7],10,1126891415),h=l(h,g,f,p,e[n+14],15,-1416354905),p=l(p,h,g,f,e[n+5],21,-57434055),f=l(f,p,h,g,e[n+12],6,1700485571),g=l(g,f,p,h,e[n+3],10,-1894986606),h=l(h,g,f,p,e[n+10],15,-1051523),p=l(p,h,g,f,e[n+1],21,-2054922799),f=l(f,p,h,g,e[n+8],6,1873313359),g=l(g,f,p,h,e[n+15],10,-30611744),h=l(h,g,f,p,e[n+6],15,-1560198380),p=l(p,h,g,f,e[n+13],21,1309151649),f=l(f,p,h,g,e[n+4],6,-145523070),g=l(g,f,p,h,e[n+11],10,-1120210379),h=l(h,g,f,p,e[n+2],15,718787259),p=l(p,h,g,f,e[n+9],21,-343485551),f=o(f,r),p=o(p,i),h=o(h,a),g=o(g,d);return[f,p,h,g]}function f(e){var t,n="",r=32*e.length;for(t=0;t<r;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function p(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function h(e){var t,n,r="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=r.charAt(t>>>4&15)+r.charAt(15&t);return i}function g(e){return unescape(encodeURIComponent(e))}function v(e){return function(e){return f(d(p(e),8*e.length))}(g(e))}function _(e,t){return function(e,t){var n,r,i=p(e),o=[],a=[];for(o[15]=a[15]=void 0,i.length>16&&(i=d(i,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^i[n],a[n]=1549556828^i[n];return r=d(o.concat(p(t)),512+8*t.length),f(d(a.concat(r),640))}(g(e),g(t))}function y(e,t,n){return t?n?_(t,e):function(e,t){return h(_(e,t))}(t,e):n?v(e):function(e){return h(v(e))}(e)}void 0!==(r=function(){return y}.call(t,n,t,e))&&(e.exports=r)}()},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},e.exports=n,e.exports.TinyEmitter=n},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),i=n.n(r),o=n(3),a=n.n(o),s=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="GamePayMod",r.processType="save",r.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}a()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return i()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"common",buy_quantity:this.params.buy_quantity||"1"})},n.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},n.buildSaveParams=function(e){return void 0===e&&(e={}),i()({},this.getSavePublicParams(),{buy_quantity:e.buy_quantity||this.params.buy_quantity||"1",zoneid:this.getZoneid(),accounttype:e.accounttype||"common",service_name:encodeURIComponent(this.params.service_name||""),discountid:this.params.discountid||""},e)},n.save=function(e){this.beforeSave();var t=this.cgi.wechatAppProc(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(n(29).a)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=n(25),a=n(0),s=n.n(a),c=n(26),u=n.n(c),l=n(27),d=n.n(l),f=n(28),p=n(19),h=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="GoodsPayMod",r.processType="bg",r.goodsInfo=null,r.infoReportIformat={pv:"goodsinfo.pv",status:"goodsinfo.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}i()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return s()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),params:this.params.goodstokenurl},Object(p.a)(this.params.goodstokenurl))},n.getInfo=function(e){this.beforeGetInfo();var t=this.cgi.mobileGoodsInfo(this.buildInfoParams(),e);return this.wrapInfo(t)},n.buildSaveParams=function(e){return void 0===e&&(e={}),s()({},this.getSavePublicParams(),{zoneid:this.getZoneid(),buy_quantity:this.params.buy_quantity||""},e,Object(p.a)(this.params.goodstokenurl),{_params:this.params.goodstokenurl})},n.save=function(e){this.beforeSave();var t=this.cgi.mobileSaveGoods(this.buildSaveParams(e),{method:"POST"});return this.wrapSave(t)},t}(n(29).a),g=n(20),v=function(e){function t(t){var n,r=t.params,i=void 0===r?{}:r,o=u()(t,["params"]);return(n=e.call(this,s()({params:i},o))||this).name="GoodsApp",n.iformatPrefix="midaswechatpay."+(n.isEnterprise()?"enterprise":"goods"),n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new h(d()(n),n.params),n.validator=g.b,n}return i()(t,e),t.prototype.isEnterprise=function(){return this.opt.isEnterprise},t}(f.a),_=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name=t.isEnterprise?"EnterpriseApi":"GoodsApi",n.AppClass=v,n}return i()(t,e),t}(o.a);t.default=o.a.createApi(_)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),i=n(3),o=n.n(i),a=n(25),s=n(0),c=n.n(s),u=n(26),l=n.n(u),d=n(27),f=n.n(d),p=n(28),h=n(19),g=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="SubscribePayMod",r.processType="unimonth",r.params.aid&&(r.params.appremark=encodeURIComponent("aid="+r.params.aid)),r.account=r.params.account||"wechat",r.infoReportIformat={pv:"monthinfo.pv",status:"monthinfo.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r.isContinuousMonth="continuous_month"===r.params.sign_type,r}o()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return c()({},this.getInfoPublicParams(),{service_code:this.params.service_code,product_id:this.params.product_id,buy_quantity:this.params.buy_quantity||"1",provide_no_type:this.getProvideNoType(),query_scope:this.isContinuousMonth?"include_continuous":""})},n.getInfo=function(){this.beforeGetInfo();var e=this.cgi.wechatAppProc(this.buildInfoParams());return this.wrapInfo(e)},n.buildSaveParams=function(e){void 0===e&&(e={});var t=c()({buy_quantity:e.buy_quantity||this.params.buy_quantity||1,service_code:this.params.service_code,product_id:e.product_id||this.params.product_id,appremark:this.params.appremark||"",provide_no_type:this.getProvideNoType(),service_name:this.params.service_name||"",continuous_month:this.isContinuousMonth?"1":""},this.getSavePublicParams(),e);return this.shouldAutoContinue()&&(t.auto_cont="1"),"wechatid"===this.getProvideNoType()&&delete t.provide_uin,"sign_only"===this.params.sign_type?c()({},t,{process_type:"month",page_type:"sign",type:"month",contract_type:this.params.contract_type||"",ts:Math.round((new Date).getTime()/1e3)}):t},n.save=function(e){var t=this.buildSaveParams(e);this.beforeSave({serviceCode:t.service_code,productId:t.product_id});var n=this.cgi.wechatAppProc(t,{method:"POST"});return this.wrapSave(n)},n.getProvideNoType=function(){return this.params.provide_uin?"uin":"wechatid"},n.shouldAutoContinue=function(){return this.params.extend?"1"===Object(h.a)(this.params.extend).auto_cont:1===parseInt(this.params.auto_cont)},t}(n(29).a),v=n(20),_=function(e){function t(t){var n,r=t.params,i=void 0===r?{}:r,o=l()(t,["params"]);return(n=e.call(this,c()({params:i},o))||this).name="SubscribeApp",n.iformatPrefix="midaswechatpay.subscribe",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new g(f()(n),n.params),n.validator=v.f,n}return o()(t,e),t}(p.a),y=n(2),m=n(5),b=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t,n)||this).name="SubscribeApi",r.AppClass=_,r}return o()(t,e),t.prototype.launchSign=function(e,t){return this.callback=t,Object(y.endsWith)(e.product_id,"continuous_month_pid")?this.launchPay(e,t):this.errorCallback(new r.a({ret:m.b.PARAMS_ERROR,msg:"product_id should ends with continuous_month_pid"}))},t}(a.a);t.default=a.a.createApi(b)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=n(25),a=n(0),s=n.n(a),c=n(26),u=n.n(c),l=n(27),d=n.n(l),f=n(28),p=n(36),h=n(20),g=function(e){function t(t){var n,r=t.params,i=void 0===r?{}:r,o=u()(t,["params"]);return(n=e.call(this,s()({params:i},o))||this).name="GameApp",n.iformatPrefix="midaswechatpay.game",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p.a(d()(n),n.params),n.validator=h.a,n}return i()(t,e),t}(f.a),v=function(e){function t(t,n){var r;return void 0===t&&(t={}),(r=e.call(this,t,n)||this).name="GameApi",r.AppClass=g,r}return i()(t,e),t}(o.a);t.default=o.a.createApi(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=n(25),a=n(0),s=n.n(a),c=n(26),u=n.n(c),l=n(27),d=n.n(l),f=n(28),p=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="PcGamePayMod",r}return i()(t,e),t}(n(36).a),h=n(20),g=function(e){function t(t){var n,r=t.params,i=void 0===r?{}:r,o=u()(t,["params"]);return(n=e.call(this,s()({params:i},o))||this).name="PcGameApp",n.iformatPrefix="midaswechatpay.pcgame",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p(d()(n),n.params),n.validator=h.c,n}return i()(t,e),t}(f.a),v=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name="PcGameApi",n.AppClass=g,n}return i()(t,e),t}(o.a);t.default=o.a.createApi(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=n.n(r),o=n(37),a=(n.n(o),n(38));t.default=i()({},a.default,{init:function(e){return void 0===e&&(e={}),e.isEnterprise=!0,a.default.init(e)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(3),i=n.n(r),o=(n(37),n(25)),a=n(0),s=n.n(a),c=n(26),u=n.n(c),l=n(27),d=n.n(l),f=n(28),p=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).name="QbPayMod",r.processType="qb",r.infoReportIformat={pv:"buypage.pv",status:"buypage.status"},r.saveReportIformat={pv:"startsave.pv",status:"savestatus"},r}i()(t,e);var n=t.prototype;return n.buildInfoParams=function(){return s()({},this.getInfoPublicParams(),{zoneid:this.getZoneid(),accounttype:"qb",buy_quantity:this.params.buy_quantity||"1"})},n.buildSaveParams=function(t){return void 0===t&&(t={}),s()({},e.prototype.buildSaveParams.call(this,t),{accounttype:"qb"})},t}(n(36).a),h=n(20),g=function(e){function t(t){var n,r=t.params,i=void 0===r?{}:r,o=u()(t,["params"]);return(n=e.call(this,s()({params:i},o))||this).name="QbApp",n.iformatPrefix="midaswechatpay.qb",n.reportObj.setIformatPrefix(n.iformatPrefix),n.payMod=new p(d()(n),n.params),n.validator=h.e,i.service_name="充值Q币",n}return i()(t,e),t}(f.a),v=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this,t)||this).name="QbApi",n.AppClass=g,n}return i()(t,e),t}(o.a);t.default=o.a.createApi(v)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);n.d(t,"getVersion",(function(){return r.c}));var i=n(30);n.d(t,"checkUpdate",(function(){return i.a}));var o=n(39);n.d(t,"subscribe",(function(){return o.default}));var a=n(40);n.d(t,"game",(function(){return a.default}));var s=n(41);n.d(t,"pcGame",(function(){return s.default}));var c=n(38);n.d(t,"goods",(function(){return c.default}));var u=n(42);n.d(t,"enterprise",(function(){return u.default}));var l=n(43);n.d(t,"recharge",(function(){return l.default})),n(37)}]),zc={};Object(Mn.onNativeEvent)("onAppEnterForeground",(function(e){Object.assign(zc,e)})),w.default.onReady((function(){Object.assign(zc,w.default.appLaunchInfo)}));var Yc=Object(bt.default)("querySettlementMark","jsapi_querysettlementmark",{},{},(function(){return{isWxHost:!w.default.host||"WeChat"===w.default.host.env,sdkAppId:w.default.host&&w.default.host.appId,scene:zc.scene,sceneNote:zc.scene_note||zc.sceneNote,sessionId:zc.sessionId||zc.sessionid}})),qc=function(){return new Promise((function(e){Yc({complete:function(t){var n=t.mark;return e(n)}})}))},Kc=n(129),Jc={offer_id:"offerId",currency_type:"currencyType",session_id:"sessionId",session_type:"sessionType",pf:"platform",login_wx_appid:"loginWXAppId",change_wx_openid:"changeWXOpenId",extend:"extend",product_id:"productId",service_code:"serviceCode",service_name:"serviceName",buy_quantity:"buyQuantity",aid:"aid",provide_uin:"provideUin",zoneid:"zoneId",goodstokenurl:"goodsTokenUrl"},Xc=["offer_id","currency_type","session_id","session_type","pf","login_wx_appid","change_wx_openid","extend"];function $c(e){var t=[];return"subscribe"===e.mode?t=["product_id","service_code","service_name","buy_quantity","aid","provide_uin"]:"game"===e.mode||"pcGame"===e.mode?t=["buy_quantity","zoneid","provide_uin"]:"goods"===e.mode?t=["buy_quantity","zoneid","goodstokenurl"]:"enterprise"===e.mode&&(t=["zoneid","goodstokenurl"]),[].concat(Xc,Object(Ue.default)(t)).reduce((function(t,n){return t[n]=e[Jc[n]],"pf"===n&&"windows"===t.pf&&(t.pf="android",t.pf_header="wxgame_windows-2001"),t}),{})}var Zc=n(49),Qc=["subscribe","game","pcGame","goods","enterprise"],eu="requestMidasPayment",tu=["game"],nu="requestMidasFriendPayment",ru=wxNativeConsole.createLogger("requestMidasFriendPayment");function iu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(Kc.default)().then((function(t){var n=t.openId,r=t.appId;return new Promise((function(t,i){var o=e.mode,a=e.env,s=e.offerId,c=e.currencyType,u=e.zoneId,l=e.outTradeNo,d=e.platform,f=e.buyQuantity,p=e.nonceStr,h=e.timeStamp,g=e.signature;Hc[o].destroy();var v=Hc[o].init({env:a,hide_loading:!0}),_=$c(e);_.openid=n,_.login_wx_appid=r||e.loginWXAppId,_.type="friends_pay_order",_.pf=d||"android",ru.info("[transedArgs]",_),v.launchFeature(_,function(){var n=Object(Gt.default)(Vt.a.mark((function n(r){var d,v,y,m,b,w;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d=r.resultCode,v=r.resultMsg,y=r.extendInfo,ru.info("[instance.launchFeature success]",{resultCode:d,resultMsg:v,extendInfo:y}),0!==d){n.next=15;break}return m=y.token,b=y.priceLevel,w={offerId:s,currencyType:c,priceLevel:b,token:m,env:a,zoneId:u,busiOrderNo:l,mode:o,buyQuantity:f,nonceStr:p,timeStamp:h,signature:g,platform:_.pf},["session_id","session_type","login_wx_appid","change_wx_openid","extend","product_id","service_code","service_name","aid","provide_uin","goodstokenurl"].forEach((function(t){void 0!==e[Jc[t]]&&(w[Jc[t]]=_[t])})),n.next=10,qc();case 10:w.settlementMark=n.sent,ru.info("reqData",w),Object(ko._operateWXData)({apiName:"webapi_addpayfororder",reqData:w,success:function(e){ru.info("[operateWXData success]",e);var n=e.respData,r=JSON.parse(n.data),o={};o.shareData=r,o.iv=n.iv,o.encryptedData=n.encryptedData,n.cloud_id&&(o.cloudID=n.cloud_id),Number.isInteger(r.errCode)&&0!==r.errCode?(ru.error("[operateWXData fail]",r),i({errCode:r.errCode,errMsg:r.errMsg}),au({actionStatus:0,errType:5})):t(o)},fail:function(e){ru.error("[operateWXData fail]",e),i(e),au({actionStatus:0,errType:4})}}),n.next=18;break;case 15:i({errMsg:v,errCode:d}),Reporter.reportIDKey({key:"midasLaunchFeatureFail"}),au({actionStatus:0,errType:3});case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}))}))}function ou(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t){var n=Object(A.checkAPIAvailable)("h5PayDisableForward");Object(O.invokeMethod)("shareAppMessageDirectly",{type:"h5",title:e.shareData.title,desc:e.shareData.desc,imageUrl:e.shareData.imageUrl,useDefaultSnapshot:!1,disableForward:n,link:e.shareData.link,success:function(){t({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),au({actionStatus:1,orderNo:e.shareData.orderNo,orderNoForUrl:e.shareData.orderNoForUrl})},fail:function(){t({cloudID:e.cloudID,iv:e.iv,encryptedData:e.encryptedData}),au({actionStatus:0,errType:6,orderNo:e.shareData.orderNo,orderNoForUrl:e.shareData.orderNoForUrl})}})}))}function au(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.actionStatus,n=e.errType,r=void 0===n?0:n,i=e.orderNo,o=void 0===i?"":i,a=e.orderNoForUrl,s=void 0===a?"":a,c=[0,3001,30,10,1,t,"",0,s,Object(it._getCurrentNetworkType)(),0,0,r,0,"",o,""].join(",");ru.log("[MidasFriendPayment reportValue]",c),Reporter.reportKeyValue({key:"MidasFriendPayment",value:c})}function su(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){-1===tu.indexOf(e.mode)?n({errCode:1e3,errMsg:"mode错误"}):t()}))}function cu(){return Object(C.checkPermissionSync)("requestMidasFriendPayment")?Promise.resolve():(au({actionStatus:0,errType:1}),Promise.reject({errCode:-15005,errMsg:"No MidasFriendPayment Permission"}))}function uu(){return Object(C.checkPermissionSync)("requestVirtualPayment")?Promise.resolve():(au({actionStatus:0,errType:2}),Promise.reject({errCode:-15005,errMsg:"No VirtualPayment Permission"}))}var lu=Object(bt.default)("checkIsSupportMidasFriendPayment","webapi_isaddpayfororderblocked",{},{},(function(){return{}}),(function(e){return e.blocked=e.is_blocked,delete e.is_blocked,delete e.rawData,e}));var du=new We.default;Object(O.onMethod)("onUpdateStatusChange",(function(e){var t,n=(e.state||"").toLowerCase();e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===n&&(console.info("[apply update before]"),m.IS_ANDROID&&w.default.clientVersion<=654315263?Object(O.invokeMethod)("updateApp",t):Object(Et._showModal)({content:"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){Object(O.invokeMethod)("updateApp",t)}})):(delete e.state,du.emit(n,e))}));var fu,pu=[];du.on("updating",(function(){fu={hasUpdate:!0},hu()})),du.on("noupdate",(function(){fu={hasUpdate:!1},hu()}));var hu=function(){pu.forEach((function(e){"function"==typeof e&&e(fu)})),pu.length=0},gu=[],vu=!1,_u=!1;du.on("updateready",(function(){vu=!0,mu()}));var yu,mu=function(){gu.forEach((function(e){"function"==typeof e&&e()})),gu.length=0},bu=[];du.on("updatefailed",(function(){yu={},wu()}));var wu=function(){bu.forEach((function(e){"function"==typeof e&&e(yu)})),bu.length=0},Ou={onCheckForUpdate:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),fu?"function"==typeof e&&e(fu):pu.push(e)},onUpdateReady:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),vu?"function"==typeof e&&e():gu.push(e)},onUpdateFailed:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),yu?"function"==typeof e&&e(yu):bu.push(e)},applyUpdate:function(e){vu&&_u?Object(O.beforeInvokeFail)("applyUpdate",e,"applyUpdate has been called"):vu?(_u=!0,m.IS_ANDROID&&w.default.clientVersion<=654315263?Object(O.invokeMethod)("updateApp",e):Object(Et._showModal)({content:"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){Object(O.invokeMethod)("updateApp",e)}})):Object(O.beforeInvokeFail)("applyUpdate",e,"update is not ready")}},Eu=n(85),Su={};w.default.onReady((function(){"object"===Object(R.default)(w.default.env)&&Object.assign(Su,w.default.env)}));var Tu=Su,Iu=n(194),Au=n(140),Cu=n(7),ku=n(92),xu=n.n(ku),Pu=n(3),Du=n(64);function Ru(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var ju=function(e){Object(M.default)(n,e);var t=Ru(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.template,o=r.style,a=r.event;if(Object(N.default)(this,n),e=t.call(this),i){var s=Object(Pu.getPrivateThis)(Object(Cu.default)(e)),c=xu()(i),u=c.root;Pu.init.call(Object(Cu.default)(e),u,o),Vs.webviewLayout.add(s.container),e.initEvent(a)}return ti(),Object(O.invokeMethod)("showShareMenu"),Object(O.invokeMethod)("showShareTimelineMenu"),e}return Object(oe.default)(n,[{key:"initEvent",value:function(e){if(e){var t=Object(Pu.getPrivateThis)(this);this.event=e,Object.keys(e).forEach((function(n){var r=e[n];Object.keys(r).forEach((function(e){var i=r[e];t[n]&&t[n].on(e,i)}))}))}}},{key:"unbundEvent",value:function(){var e=this;if(this.event){var t=Object(Pu.getPrivateThis)(this);Object.keys(this.event).forEach((function(n){var r=e.event[n];Object.keys(r).forEach((function(e){var i=r[e];t[n]&&t[n].off(e,i)}))}))}}},{key:"destroy",value:function(){this.unbundEvent();var e=Object(Pu.getPrivateThis)(this);Vs.webviewLayout.remove(e.container),Object(Pu.removePrivateThis)(this),Du.userShareMenuState.showShareAppMessageMenu&&(Du.userShareMenuState.withShareTicket?Object(O.invokeMethod)("showShareMenuWithShareTicket",{withShareTicket:!0}):Object(O.invokeMethod)("showShareMenu")),Du.userShareMenuState.showShareTimelineMenu&&Object(O.invokeMethod)("showShareTimelineMenu"),!1===Qr&&!0===ei&&(ei=!1,Xr.emit({}))}}]),n}(Pu.Component);function Nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Mu=function(e){Object(M.default)(n,e);var t=Nu(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.template,i=e.style;return Object(N.default)(this,n),t.call(this,{template:r,style:i})}return n}(ju);function Lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Bu=!1,Fu=0,Uu=0,Wu=0;function Vu(){var e=Uu>Fu?"landscape":"portrait";return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?Uu:Fu,height:"portrait"===e?Fu:Uu},imgWrp:{flexDirection:"row",justifyContent:"center"},mainImage:{left:0,top:Bu?Wu+44+8:0,width:"portrait"===e?Uu:Fu,height:"portrait"===e?Fu:Uu,objectFit:"contain"}}}function Gu(e,t){var n=Math.max(Fu,Uu),r=Math.min(Fu,Uu);return t/e-(n-Wu-44-8-44-8)/r>.1?(n-2*(Wu+44))/n:(Uu-20)/Uu}w.default.onReady((function(){Bu="devtools"===w.default.platform,Fu=w.default.screenHeight,Uu=w.default.screenWidth,Wu=w.default.statusBarHeight}));var Hu=function(e){Object(M.default)(n,e);var t=Lu(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.imageUrl;Object(N.default)(this,n);var o=1,a=0,s=0,c=i.match(/size=(\d+)x(\d+)$/);c&&(o=Gu(a=+c[1],s=+c[2]));var u='<image id="mainImage" src="'+i+'" />',l='<image-previewer id="mainImage" scale="'+o+'"></image-previewer>',d='<view id="container">\n      <view id="imgWrp">\n        '+(Bu?u:l)+"\n      </view>\n    </view>",f=Vu();(e=t.call(this,{template:d,style:f})).imageUrl=i,e.scale=o,e.width=a,e.height=s,e.sizeMatch=c,e.retried=[];var p=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return Bu||p.mainImage.onImageLoadFail((function(t){e.handleOnImageLoadFail(t)})),e.initImageInfo(),e}return Object(oe.default)(n,[{key:"handleOnImageLoadFail",value:function(e){var t=this.retried;t.includes(e.url)?Object(Et._showModal)({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((function(){Object(Et.hideLoading)()}),500)}},{key:"initImageInfo",value:function(){var e=this;setTimeout((function(){Object(Et.showLoading)({title:"加载中",maskAll:!0})}),500),this.sizeMatch?this.downloadImage().then((function(t){e.showImage({width:e.width,height:e.height,url:t.tempFilePath,scale:e.scale})})):this.downloadImage().then((function(t){Object(O.invokeMethod)("getImageInfo",{src:t.tempFilePath,success:function(n){var r=n.width,i=n.height,o=Gu(r,i);e.showImage({width:r,height:i,url:t.tempFilePath,scale:o})},fail:function(){e.handleOnImageLoadFail({url:t.tempFilePath})}})}))}},{key:"downloadImage",value:function(){var e=this;return new Promise((function(t){Object(Q._downloadFileSkipCheckDomain)({url:e.imageUrl,success:function(e){t(e)},fail:function(){e.handleOnImageLoadFail({url:e.imageUrl})}})}))}},{key:"showImage",value:function(e){var t=e.width,n=e.height,r=e.url,i=e.scale,o=Object(Pu.getPrivateThis)(this);"portrait"===(t>n?"landscape":"portrait")?Bu?o.mainImage.style.scale=i:o.mainImage.scale=i:(Bu&&(o.mainImage.style.top=0),Bu?(o.mainImage.style.scale=1,o.mainImage.style.top=0):o.mainImage.scale=1),o.mainImage.urls=[r],o.mainImage.update(),setTimeout((function(){Object(Et.hideLoading)()}),500)}}]),n}(Mu);function zu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Yu=0,qu=0,Ku=0,Ju=0,Xu={};function $u(){var e=Ku>qu?"landscape":"portrait",t=Ju+44+8,n=Yu+44+8;return{container:{backgroundColor:"#191919",flexDirection:"column",width:"portrait"===e?Ku:qu,height:"portrait"===e?qu:Ku},imgWrp:{flexDirection:"row",justifyContent:"center"},mainVideo:{position:"absolute",top:t,left:0,width:"portrait"===e?Ku:qu,height:"portrait"===e?qu-t-n:Ku-t-n}}}w.default.onReady((function(){qu=w.default.screenHeight,Ku=w.default.screenWidth,Ju=w.default.statusBarHeight,Xu=w.default.safeArea;var e=Math.max(qu,Ku),t=e;Xu&&Xu.bottom&&(t=Math.max(Xu.bottom,Xu.right)),Yu=e-t}));var Zu=function(e){Object(M.default)(n,e);var t=zu(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.videoUrl,o=r.thumbUrl;Object(N.default)(this,n);var a='\n    <view id="container">\n      <view id="imgWrp">\n        <video id="mainVideo" src="'+i+'" poster="'+o+'" controls="true" object-fit="contain" autoplay="false" z-index="2" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n      </view>\n    </view>',s=$u();return(e=t.call(this,{template:a,style:s}))._handleVideoError(),e._playAtWIFI(),e}return Object(oe.default)(n,[{key:"_handleVideoError",value:function(){Object(Pu.getPrivateThis)(this).mainVideo.onError((function(){Object(Et._showModal)({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}},{key:"_playAtWIFI",value:function(){var e=this;Object(O.invokeMethod)("getNetworkType",{success:function(t){var n=t.networkType,r=Object(Pu.getPrivateThis)(e);"wifi"===n&&(r.mainVideo.showCenterPlayBtn=!1,r.mainVideo.play().then((function(e){})))}})}}]),n}(Mu),Qu=new We.default;Object(O.onMethod)("onLoadSubPackageTaskStateChange",(function(e){Qu.emit(e.state,e.taskId,e)}));var el={},tl=[],nl=new WeakMap,rl=new WeakMap,il=function(e){return el[e]},ol=function(e){var t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},al=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith(".js")||(n.endsWith("/")||(n+="/"),n+="game.js");var r=ns.pageStorage.get();if(Object(A.isIsolateContext)()&&Object(A.isGame)()&&!t&&!r)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(n)};Qu.on("success",function(){var e=Object(Gt.default)(Vt.a.mark((function e(t,n){var r,i,o,a;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=il(t),delete el[t],!r){e.next=12;break}return i=n.moduleName,o=nl.get(r),a=ol(n),tl.push(i),e.next=9,al(i,n.isMonkeyTest);case 9:a.errMsg="loadSubpackage:ok","function"==typeof o.success&&o.success(a),"function"==typeof o.complete&&o.complete(a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Qu.on("fail",(function(e,t){var n=il(e);if(delete el[e],n){var r=nl.get(n),i=ol(t);i.errMsg="loadSubpackage:fail module not found","function"==typeof r.fail&&r.fail(i),"function"==typeof r.complete&&r.complete(i)}})),Qu.on("progressUpdate",(function(e,t){var n=il(e);if(n){var r=rl.get(n),i=ol(t);"function"==typeof r&&r(i)}}));var sl,cl,ul,ll=function(){var e,t=this,n=nl.get(this);if(tl.indexOf(n.name)>=0){var r={errMsg:"loadSubpackage:ok",moduleName:n.name};return"function"==typeof n.success&&n.success(r),void("function"==typeof n.complete&&n.complete(r))}if("__APP__"===n.name&&m.IS_DEVTOOLS&&Object(A.isIsolateContext)()&&Object(A.isGame)()){tl.push(n.name),al(n.name);var i={errMsg:"loadSubpackage:ok"};return"function"==typeof n.success&&n.success(i),void("function"==typeof n.complete&&n.complete(i))}if(Object(O.invokeMethod)("createLoadSubPackageTask",{moduleName:n.name,success:function(e){el[e.loadTaskId]=t},fail:function(t){e=t.errMsg,m.IS_IOS&&(t.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&__errorTracer__.surroundThirdByTryCatch(n.fail)(t),"function"==typeof n.complete&&__errorTracer__.surroundThirdByTryCatch(n.complete)(t))}}),e)throw new Error(e.replace(/createLoadSubPackageTask:fail[ :]/,""))},dl=function(){function e(t){Object(N.default)(this,e),nl.set(this,t),["success","fail","complete"].forEach((function(e){"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],"at api loadSubpackage "+e+" callback function"))})),ll.call(this)}return Object(oe.default)(e,[{key:"onProgressUpdate",value:function(e){rl.set(this,(function(t){void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}]),e}(),fl=n(78),pl="GameReportKV",hl="Display",gl=!1,vl=0,_l=0,yl=-1,ml={},bl=0,wl=0,Ol={},El="",Sl="",Tl="",Il=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=2;if(w.default){var r=w.default.accountInfo,i=w.default.envVersion;r&&(t=r.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}El||(El=wx&&wx.version&&wx.version.version||"");var o={DeviceModel:ul.model||"",DeviceBrand:ul.brand||"",OsName:ul.platform||"",OsVersion:ul.system||"",LanguageVersion:ul.language||"",appid:t,appversion:El,appstate:n,event_id:e.eventId,scene:e.scene,scene_note:e.sceneNote.substr(0,1024),sessionid:e.sessionId,usedstate:e.usedState,pagepath:(e.pagepath||"").substr(0,1024),networktype:e.networktype||"",costtime:e.costTime,staytime:e.stayTime||0,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction||0,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.SDKVersion,prescene:e.prescene,prescene_note:e.presceneNote,isentrance:e.isEntrance,query:e.queryArray.join("&").substr(0,1024),apptype:Reporter.getAppType(),pagetype:0,anchorTargetText:"",clickTime:e.clickTimestamp,anchorTargetRelatedText:"",orientationChangeCount:0,startCostTime:e.startCostTime,startType:e.startType,reportTime:Date.now()};try{Mo(1e3,JSON.stringify(o),!0)}catch(e){}},Al=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},ml,Ol,e),Ol=e;var t=e.query||w.default.appLaunchInfo.query,n=[];t&&"object"===Object(R.default)(t)&&Object.keys(t).forEach((function(e){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t[e]))}));var r=e.eventTime,i=e.clickTimestamp,o=r-(i=i<=9999999999?1e3*i:i),a=e.sessionid||e.sessionId,s=cl||cl===a?0:1;cl=a,1===e.eventId&&(bl=Date.now()-i,wl=e.isLaunch?1:2),e.sceneNote=e.scene_note||e.sceneNote||"",e.sessionId=a||"",e.usedState=e.usedstate||e.usedState,e.costTime=o,e.SDKVersion=fl.SDKVersion,e.presceneNote=e.prescene_note||e.presceneNote||"",e.isEntrance=s,e.queryArray=n,e.startCostTime=bl,e.startType=wl,Sl=e.pagepath=e.path||w.default.appLaunchInfo.path;var c=[e.eventId,e.scene,e.sceneNote,e.sessionId,e.usedState,e.pagepath,e.networktype||"",e.costTime,e.stayTime||0,encodeURIComponent(e.referpagepath||""),e.targetAction||0,e.targetPagePath||"",e.clickTimestamp,e.SDKVersion,e.prescene,e.presceneNote,e.isEntrance,e.queryArray.join("&"),Reporter.getAppType(),0,"",0,e.clickTimestamp,"",0,e.startCostTime,e.startType,Date.now(),"number"==typeof e.staytimeFuncpageStart?e.staytimeFuncpageStart:0,w.default.host?w.default.host.appId:"",e.shortLink].map(encodeURIComponent).map((function(e,t){return-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e})).join(",");Reporter.reportKeyValue({key:hl,value:c}),Reporter.submit(),Il(e)},Cl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};1===(e=e.isLaunch?Object.assign(t,e,ml):Object.assign(t,e)).eventId?(e.scene_note=e.scene_note||e.sceneNote||"",e.sessionid=e.sessionid||e.sessionId||"",e.prescene_note=e.prescene_note||e.presceneNote||"",e.targetPagePath=e.targetPagePath||"",e.referpagepath=e.referpagepath||"",e.clickTimestamp=e.clickTimestamp||Date.now(),e.stayTime=e.stayTime||0):2===e.eventId&&(e.targetAction=e.targetAction||0),Object(it.getNetworkType)({success:function(t){var n=t.networkType;"none"===n&&(n="offline"),e.networktype=n,Al(e)},fail:function(){Al(e)}})},kl=function(e){var t=parseInt((e.eventTime||0)/1e3,10);return[e.eventId,e.scene,t,e.stayTime||0,e.sessionId,w.default.host?w.default.host.appId:"",sl,e.instanceId].map(encodeURIComponent).join(",")},xl=Object(A.surroundByTryCatchFactory)((function(e){sl=Object(j.guid)(),yl=e.scene,vl=Date.now(),Tl=e.sessionid||e.sessionId||"";var t=e.scene,n=kl({eventId:1,scene:t,eventTime:vl,sessionId:sl,instanceId:Tl});Reporter.reportKeyValue({key:pl,value:n}),Cl(e,{eventId:1,eventTime:vl,staytimeFuncpageStart:0})}),"at private.reportEnterForeground","gameSDKScriptError"),Pl=Object(A.surroundByTryCatchFactory)((function(e){var t=Date.now(),n=t-vl,r=0;0===_l?r=0:_l>0&&Object(Xa.isFunctionalPagePath)(Sl)?r=t-_l:_l>0&&/^index/.test(Sl)&&(r=n);var i=yl,o=kl({eventId:2,scene:i,eventTime:t,stayTime:n,sessionId:sl,instanceId:Tl});Reporter.reportKeyValue({key:pl,value:o}),Cl(e,{eventId:2,scene:i,eventTime:t,stayTime:n,staytimeFuncpageStart:r})}),"at private.reportEnterBackground","gameSDKScriptError");function Dl(e){_l="number"==typeof e?e:Date.now()}function Rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var jl=0,Nl=0,Ml=0,Ll={};function Bl(){return{container:{backgroundColor:"#000000",flexDirection:"column",width:Ml,height:Nl,zIndex:1000010},wrp:{flexDirection:"row",justifyContent:"center"},footer:{flexDirection:"row",justifyContent:"center",position:"absolute",paddingBottom:16+jl,paddingTop:12,bottom:0,left:0,width:Ml,backgroundColor:"#000000"},playBtn:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#FA9D3B",width:184}}}function Fl(){return __subContextEngine__.getPool().length>0}w.default.onReady((function(){Nl=w.default.screenHeight,Ml=w.default.screenWidth,Ll=w.default.safeArea;var e=Math.max(Nl,Ml),t=e;Ll&&Ll.bottom&&(t=Math.max(Ll.bottom,Ll.right)),jl=e-t}));var Ul=function(e){Object(M.default)(n,e);var t=Rl(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.slotTemplate,o=r.slotStyle;Object(N.default)(this,n);var a='\n    <view id="container">\n      <view id="wrp">\n        '+i+'\n      </view>\n      <view id="footer">\n        <text id="playBtn" value="开始游戏" />\n      </view>\n    </view>',s=Object.assign(Bl(),o),c={playBtn:{click:function(){e._handlePlayBtnClick()}}};return e=t.call(this,{template:a,style:s,event:c}),Fl()||setTimeout((function(){e.preloadPackage()}),0),Dl(0),e}return Object(oe.default)(n,[{key:"preloadPackage",value:function(){var e=ns.pageStorage.get().params,t="__APP__";if(e.userPath){var n=__subContextEngine__.isValidGameIndependentSubpackagePath(e.userPath,w.default.subPackages);if(n){var r=t=n.root;r.endsWith(".js")||(r.endsWith("/")||(r+="/"),r+="game.js"),__subContextEngine__.getGameContext().setEntry([r])}}this.loadTaskPromise=new Promise((function(e,n){new dl({name:t,success:function(t){e()},fail:function(e){wxNativeConsole.error("createLoadSubPackageTask fail",e),n(),Object(Et._showModal)({title:"提示",content:"加载游戏失败，请尝试重新打开游戏",showCancel:!1})}})}))}},{key:"_handlePlayBtnClick",value:function(){this.runGame(1e3)}},{key:"runGame",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=ns.pageStorage.get().query,r=Object(Xa.generateGameIndexPath)(n,"functionalpage-index.html");0===t&&(this.destroy(),ns.pageStorage.clear()),Object(Et.showLoading)({title:"加载中",maskAll:!0});var i=new Promise((function(e){setTimeout((function(){e()}),t)})),o=null,a=[i];Fl()||(o=this.loadTaskPromise,a.push(o)),Promise.all(a).then((function(){Object(O.invokeMethod)("functionalPageStartGame",{url:r,success:function(e){},fail:function(e){}}),o&&__subContextEngine__.initGameJS(),Object(Et.hideLoading)(),t>0&&(e.destroy(),ns.pageStorage.clear()),Object(ms.emitGameOnshow)(),Dl(Date.now())}))}}]),n}(ju);function Wl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Vl=0,Gl=0,Hl=0,zl={};function Yl(){return{mainImage:{left:0,top:0,width:Hl,height:"portrait"===(Hl>Gl?"landscape":"portrait")?Gl:Gl-(Vl+16+40+12)}}}function ql(e,t){var n=1;if("portrait"===(Hl>Gl?"landscape":"portrait")){n=(Gl-2*(Vl+16+40+12-16))/Gl}else n=.95;if("portrait"===(e>t?"landscape":"portrait")){t/e-Gl/Hl>=0||(n=(Hl-20)/Hl)}return n}w.default.onReady((function(){Gl=w.default.screenHeight,Hl=w.default.screenWidth,zl=w.default.safeArea;var e=Math.max(Gl,Hl),t=e;zl&&zl.bottom&&(t=Math.max(zl.bottom,zl.right)),Vl=e-t}));var Kl=function(e){Object(M.default)(n,e);var t=Wl(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.imageUrl;Object(N.default)(this,n);var o=1,a=0,s=0,c=i.match(/size=(\d+)x(\d+)$/);c&&(o=ql(a=+c[1],s=+c[2]));var u='\n      <image-previewer id="mainImage" scale="'+o+'"></image-previewer>\n    ',l=Yl();(e=t.call(this,{slotTemplate:u,slotStyle:l})).imageUrl=i,e.scale=o,e.width=a,e.height=s,e.sizeMatch=c,e.retried=[];var d=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return d.mainImage.onImageLoadFail((function(t){e.handleOnImageLoadFail(t)})),e.initImageInfo(),e}return Object(oe.default)(n,[{key:"handleOnImageLoadFail",value:function(e){var t=this.retried;t.includes(e.url)?Object(Et._showModal)({content:"图片加载失败",showCancel:!1}):(t.push(e.url),this.initImageInfo()),setTimeout((function(){Object(Et.hideLoading)()}),500)}},{key:"initImageInfo",value:function(){var e=this;Object(Et.showLoading)({title:"加载中",maskAll:!0}),this.sizeMatch?this.downloadImage().then((function(t){e.showImage({width:e.width,height:e.height,url:t.tempFilePath,scale:e.scale})})):this.downloadImage().then((function(t){Object(O.invokeMethod)("getImageInfo",{src:t.tempFilePath,success:function(n){var r=n.width,i=n.height,o=ql(r,i);e.showImage({width:r,height:i,url:t.tempFilePath,scale:o})},fail:function(){e.handleOnImageLoadFail({url:t.tempFilePath})}})}))}},{key:"downloadImage",value:function(){var e=this;return new Promise((function(t){Object(Q._downloadFileSkipCheckDomain)({url:e.imageUrl,success:function(e){t(e)},fail:function(){e.handleOnImageLoadFail({url:e.imageUrl})}})}))}},{key:"showImage",value:function(e){var t=e.width,n=e.height,r=e.url,i=e.scale,o=Object(Pu.getPrivateThis)(this);"portrait"===(t>n?"landscape":"portrait")&&(o.mainImage.scale=i),o.mainImage.urls=[r],o.mainImage.update(),setTimeout((function(){Object(Et.hideLoading)()}),500)}}]),n}(Ul);function Jl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Xl=0,$l=0,Zl=0,Ql=0,ed={};function td(){var e=Zl>$l?"landscape":"portrait",t=Xl+16+12+40;return{mainVideo:{position:"absolute",top:"portrait"===e?Ql+36:20,left:"portrait"===e?0:Xl,width:"portrait"===e?Zl:Zl-2*Xl,height:"portrait"===e?$l-(Ql+36)-t:$l-20-t}}}w.default.onReady((function(){$l=w.default.screenHeight,Zl=w.default.screenWidth,Ql=w.default.statusBarHeight,ed=w.default.safeArea;var e=Math.max($l,Zl),t=e;ed&&ed.bottom&&(t=Math.max(ed.bottom,ed.right)),Xl=e-t}));var nd=function(e){Object(M.default)(n,e);var t=Jl(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.videoUrl,o=r.thumbUrl;Object(N.default)(this,n);var a='\n      <video id="mainVideo" src="'+i+'" poster="'+o+'" controls="true" object-fit="contain" autoplay="false" z-index="1000011" showProgress="false" showProgressInControlMode="true" backgroundColor="transparent"></video>\n    ',s=td();return(e=t.call(this,{slotTemplate:a,slotStyle:s}))._handleVideoError(),e._playAtWIFI(),e}return Object(oe.default)(n,[{key:"_handleVideoError",value:function(){Object(Pu.getPrivateThis)(this).mainVideo.onError((function(){Object(Et._showModal)({title:"视频加载失败，请稍后再试",confirmText:"确定",showCancel:!1})}))}},{key:"_playAtWIFI",value:function(){var e=this;Object(O.invokeMethod)("getNetworkType",{success:function(t){var n=t.networkType,r=Object(Pu.getPrivateThis)(e);"wifi"===n&&(r.mainVideo.showCenterPlayBtn=!1,r.mainVideo.play().then((function(e){})))}})}}]),n}(Ul),rd=Object(E.getEventManager)("BottomBannerButtonClicked"),id=rd.internalOnMethod;rd.internalOffMethod;function od(){var e=Object(Xa.getFunctionalPageEnterParams)(),t=Object(Oa._getEnterOptionsSync)(),n=Object(Xa.parseCompletePath)(t.path),r=ns.pageStorage.get();r&&r.page.destroy();var i=function(e){var t=e.path,n=e.query,r=e.pageType,i=e.params,o=e.paramsString,a=e.mode,s=null;switch(r){case ts.PAGE_TYPE.PLAY_PAGE_IMAGE:s="singlePage"===a?new Hu({imageUrl:e.params.fileUrl}):new Kl({imageUrl:e.params.fileUrl});break;case ts.PAGE_TYPE.PLAY_PAGE_VIDEO:s="singlePage"===a?new Zu({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl}):new nd({videoUrl:e.params.fileUrl,thumbUrl:e.params.thumbUrl});break;default:s=new Hu({imageUrl:e.params.fileUrl}),wxNativeConsole.error("PAGE_TYPE invalid",e)}return{path:t,query:n,pageType:r,params:i,paramsString:o,page:s}}({path:n.path,query:t.query,pageType:n.functionalPageType,params:e,paramsString:JSON.stringify(e),mode:t.mode});ns.pageStorage.set(i)}Object(Mn.onNativeEvent)("onBottomBannerButtonClicked",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};rd.emit(e)})),w.default.onReady((function(){Object(ms._onBaseFrameShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.isLaunch)try{var t=Object(Xa.parseCompletePath)(e.path),n=ns.pageStorage.get();if(n){var r=Object(Xa.getFunctionalPageEnterParamsString)();t.isFunctionalPage?ts.VALID_SCENE.includes(e.scene)&&r!==n.paramsString&&(n.page.destroy(),ns.pageStorage.clear(),od()):n.page.runGame(0)}else t.isFunctionalPage&&od()}catch(e){wxNativeConsole.error("onAppEnterForeground 错误",e)}})),id((function(){var e=ns.pageStorage.get().params,t=Object(Xa.generateGameIndexPath)(e.userQuery,e.userPath);Object(O.invokeMethod)("restart",{url:t,scene:1155,fail:function(e){wxNativeConsole.error("restart fail",e)}})}))}));var ad={parseCompletePath:Xa.parseCompletePath,initFunctionalPage:od,VALID_SCENE:ts.VALID_SCENE},sd=n(52),cd=null,ud=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("showAuthorize",e,{apply:""})){var t=w.default.accountInfo.nickname,n=w.default.accountInfo.icon,r=JSON.stringify({nickname:t,icon:n,apply:e.apply,overlay:e.overlay}),i=Object(sd.setNavigateBackInterception)((function(e){[sd.NavigationBackTypes.BottomBackButton,sd.NavigationBackTypes.NavigationBackInterceptionType,sd.NavigationBackTypes.NavigateBackCall].includes(e.type)&&cd&&(cd.handleCancel(),cd=null)}));__sclEngine__.initScl((function(t){(cd=t.mainRoot.append("authorize",{input:r})).addListener("confirm",(function(){Object(sd.stopNavigateBackInterception)(i),Object(O.beforeInvokeCallback)({name:"showAuthorize",args:e})})),cd.addListener("cancel",(function(){Object(sd.stopNavigateBackInterception)(i),Object(O.beforeInvokeFail)("showAuthorize",e,"cancel")}))}))}};function ld(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Reporter.reportKeyValue({key:"Handoff",value:[w.default.appType+1e3,w.default.appLaunchInfo.scene,e,t,n,r,Object(it._getCurrentNetworkType)(),""].join(",")})}var dd=!1;function fd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ld(2,2,2),ud({apply:"在电脑端微信打开小游戏",success:function(){ld(2,2,1),Object(O.invokeMethod)("startHandoff",Object.assign({},e,{actionId:2}),{beforeSuccess:function(){return ld(2,1,1)},beforeFail:function(e){return ld(2,1,0,e.errCode)}})},fail:function(){ld(2,2,0),Object(O.beforeInvokeFail)("startHandoff",e,"cancel")}})}zr.GlobalEmitter.on("beforeTouchEnd",(function(){dd=!0})),zr.GlobalEmitter.on("afterTouchEnd",(function(){dd=!1}));var pd="";var hd=null;Object(O.onMethod)("onStartHandoff",(function(){var e={};"function"==typeof hd&&(e=hd({}),"object"!==Object(R.default)(e)&&(e={}),e.path="string"==typeof e.path?e.path:"","string"==typeof e.query&&(e.path=e.path+"?"+e.query)),Object(O.invokeMethod)("startHandoff",Object.assign({},e,{actionId:1}),{beforeSuccess:function(){return ld(1,1,1)},beforeFail:function(e){return ld(1,1,0,e.errCode)}})}));var gd=Object(ko.constructOperateWXData)(!1,"getGroupUserGameData"),vd=wxNativeConsole.createLogger("getGroupUserGameData"),_d=[],yd=Object(ko.constructOperateWXData)(!1,"getFriendUserGameData"),md=[],bd=n(133),wd=n(184),Od=n(187),Ed=n(185),Sd=n(183),Td=Object(bt.default)("setUserCloudStorage","webapi_setselfuserstorage",{},{},(function(e){var t=e.KVDataList,n={kv_list:void 0===t?[]:t};return Object(U.isBoolean)(w.default.disableSetUserStorageFromMiniProgram)&&(n.disable_set_user_storage_from_miniprogram=w.default.disableSetUserStorageFromMiniProgram),n}),(function(e){return delete e.rawData,e})),Id=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((function(e){if("object"!==Object(R.default)(e)||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?Object(O.beforeInvokeFail)("setUserCloudStorage",e,"invalid KVData item"):Td(e):Object(O.beforeInvokeFail)("setUserCloudStorage",e,"KVDataList.length must greater than 0"):Object(O.beforeInvokeFail)("setUserCloudStorage",e,"KVDataList must be an Array")},Ad=n(191),Cd=n(101),kd=Object(bt.default)("removeUserCloudStorage","webapi_removeselfuserstorage",{},{},(function(e){return{key:e.keyList}}),(function(e){return delete e.rawData,e})),xd=function(e){var t=Object(Cd.checkKeyList)(e.keyList);t?Object(O.beforeInvokeFail)("removeUserCloudStorage",e,t):kd(e)},Pd=n(116),Dd=n(186),Rd=102,jd=103,Nd=104,Md=105,Ld=106,Bd=108,Fd=111,Ud=112,Wd=1,Vd=2,Gd=4,Hd=5,zd=6,Yd=7,qd=8,Kd=9,Jd=10,Xd=11,$d=12,Zd=13,Qd=14,ef=15,tf=21,nf=22,rf=23,of=1001,af=1004,sf=1005,cf=1006,uf=1007,lf=1e5,df=100001,ff=2018,pf=2019,hf=2020,gf=2021,vf=2023,_f=2024,yf=3001,mf=3002,bf=3003,wf=3004,Of=4001;function Ef(e){try{JSON.parse(e);var t=JSON.parse(e);return!0===t.is_notify?function(e,t){var n;switch(t){case ff:n="broadcast";break;case pf:n="roomInfoChange";break;case hf:n="syncFrame";break;case vf:n="gameStartEnd";break;case gf:n="receiveMessage";break;case _f:n="beKickedOut";break;case yf:case mf:case bf:n="syncInfo";break;case wf:n="friendMessage";break;case Of:n="gameMatched";break;default:n=""}return{type:n,data:e.data}}(t,t.notify_cmd):function(e){var t,n=e.businessid,r=e.ts,i=e.data,o=e.ret;switch(n){case Rd:return{type:"active",ts:r,errCode:o};case jd:return{type:"heartBeat",ts:r,errCode:o};case Nd:case Md:if(0!==o)return{type:"resp-"+r,ts:r,errCode:o};var a=JSON.parse(i);return t={type:"resp-"+r,ts:r,errCode:a.errcode,errMsg:a.errmsg},a.resp_data&&(t.data=JSON.parse(a.resp_data)),t;case Bd:case Fd:case Ud:if(0!==o)return{type:"resp-"+r,ts:r,errCode:o};var s=JSON.parse(i);return t={type:"resp-"+r,ts:r,errCode:s.errcode,errMsg:s.errmsg},s.resp_data&&(t.data=JSON.parse(s.resp_data)),t;case Ld:return 0!==o?{type:"resp-"+r,ts:r,errCode:o}:t={type:"resp-"+r,ts:r,errCode:0,data:{clientId:i}};default:wxNativeConsole.error("Unknown WebSocket Message:",e)}}(t)}catch(e){return{type:"error",data:e.message}}}var Sf,Tf={webSocketState:0,roomAccessInfo:"",gameAccessInfo:"",clientId:0,sessionId:"",socketTask:null,lockStep:null,connectedToRoom:!1,connectedToGame:!1,hasGameStarted:!1,roomInfo:null,hasLoggedIn:!1,loginPromise:null},If={getCredentialsFail:217,startLockStepFail:218,getLostFramesFail:219},Af=function(e){var t=If[e];t?Reporter.reportIDKey({key:t}):wxNativeConsole.error('invalid name "'+e+'"')},Cf="wss://long.wxagame.weixin.qq.com",kf=new We.default;function xf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{url:Cf});return Fe().connectSocket(t)}function Pf(){return new Promise((function(e){Sf?e(Sf):Object(ko._operateWXData)({apiName:"webapi_getlockstepticket",success:function(t){var n=JSON.parse(t.rawData);Sf=n.socket_key,e(Sf),Tf.sessionId=Sf},fail:function(e){Af(If.getCredentialsFail),wxNativeConsole.error("getCredentials",e.errMsg)}})}))}var Df=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(N.default)(this,e),this.options=Object.assign({heartBeat:!0,heartBeatInterval:15e3,heartBeatTimeout:3e4},n),this._emitter=new We.default,this._setSocket(t),this._bindHandlers(),this}return Object(oe.default)(e,[{key:"_setSocket",value:function(e){this._socketTask=e,this._socketTask.onOpen(this._emitter.emit.bind(this._emitter,"ws-open")),this._socketTask.onClose(this._emitter.emit.bind(this._emitter,"ws-close")),this._socketTask.onError(this._emitter.emit.bind(this._emitter,"ws-error")),this._socketTask.onMessage(this._emitter.emit.bind(this._emitter,"ws-message"))}},{key:"_bindHandlers",value:function(){var e=this;this._emitter.on("ws-open",(function(){e._emitter.once("recv-active",(function(t){0===t.errCode?e._emitter.emit("open",t):e._emitter.emit("error",t)})),e._sendRawPacket(Rd).catch((function(t){e._emitter.off("recv-active"),e._emitter.emit("error",t)}))})).on("ws-message",(function(t){var n=Ef(t.data);"error"===n.type&&wxNativeConsole.error("响应数据异常",n.data),e._emitter.emit("recv-"+n.type,n),kf.emit("recv-"+n.type,n)})).on("open",(function(){e._sendHeartBeat()})).on("error",(function(){e._heartBeatTimer&&clearTimeout(e._heartBeatTimer)})).on("ws-error",(function(t){wxNativeConsole.error("socket error:",t),e._heartBeatTimer&&clearTimeout(e._heartBeatTimer)})).on("ws-close",(function(t){wxNativeConsole.warn("socket close:",t),e._heartBeatTimer&&clearTimeout(e._heartBeatTimer),Sf=void 0,Tf.hasLoggedIn=!1,Tf.loginPromise=null,e._emitter.emit("logout",t)})).on("heartBeat-error",(function(e){wxNativeConsole.warn("heartbeat error",e)})).on("logout",(function(e){wxNativeConsole.warn("logout",e),kf.emit("logout",e)}))}},{key:"_sendHeartBeat",value:function(){var e=this;this.options.heartBeat&&(this._heartBeatTimer=setTimeout((function(){e._sendRawPacket(jd).catch((function(t){e._emitter.emit("heartBeat-error",t)})),e._emitter.once("recv-heartBeat",(function(t){0===t.errCode?(e._emitter.emit("heartBeat-ok",t),e._heartBeatTimeout&&clearTimeout(e._heartBeatTimeout),e._sendHeartBeat()):e._emitter.emit("heartBeat-error",t)})),e._heartBeatTimeout=setTimeout((function(){e._emitter.emit("logout")}),e.options.heartBeatTimeout)}),this.options.heartBeatInterval))}},{key:"_sendRawPacket",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return Pf().then((function(o){return new Promise((function(a,s){var c={session_id:o,fast:1,businessid:e,data:n,access_info:r,ts:(i||Date.now())+""};e===Nd&&delete c.session_id,t._socketTask.send({data:JSON.stringify(c),success:a,fail:s})}))}))}},{key:"_listenForResponse",value:function(e,t,n,r){this._emitter.once("recv-resp-"+e,(function(e){delete e.type,delete e.ts,r.beforeAll&&r.beforeAll(e),0===e.errCode?(r.beforeSuccess&&r.beforeSuccess(e),t(e),r.afterSuccess&&r.afterSuccess(e)):(r.beforeFail&&r.beforeFail(e),n(e),r.afterFail&&r.afterFail(e)),r.afterAll&&r.afterAll(e)}))}},{key:"sendCommand",value:function(e,t,n){var r,i=this;switch(e){case Vd:case Hd:case Gd:r=Nd;break;case Jd:r=Ld;break;case of:case af:case sf:case cf:case uf:r=Bd;break;case lf:case df:r=Fd;break;default:r=Md}return new Promise((function(o,a){var s=t.content,c=t.accessInfo,u=Date.now();i._listenForResponse(u,o,a,n),i._sendRawPacket(r,JSON.stringify({cmd:e,content:JSON.stringify(s)}),c,u).then((function(e){})).catch((function(e){wxNativeConsole.error("packet error",e),a(e)}))}))}},{key:"close",value:function(e){return this._socketTask.close(e)}},{key:"onOpen",value:function(e){this._emitter.on("open",e)}},{key:"onClose",value:function(e){this._emitter.on("close",e)}},{key:"onError",value:function(e){this._emitter.on("error",e)}},{key:"onMessage",value:function(e){this._emitter.on("recv-message",e)}}]),e}();function Rf(e){return"Object"===Object(U.getDataType)(e)?Object.keys(e).reduce((function(t,n){var r;return e[n]=Rf(e[n]),t[(r=n,r.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]})))]=e[n],t}),{}):Array.isArray(e)?e.map(Rf):e}function jf(e){return"Object"===Object(U.getDataType)(e)?Object.keys(e).reduce((function(t,n){var r;return e[n]=jf(e[n]),t[(r=n,r.split(/(?=[A-Z])/).join("_").toLowerCase())]=e[n],t}),{}):Array.isArray(e)?e.map(jf):e}function Nf(){wxNativeConsole.warn("[getConfigOptions][WXConfig]",w.default);var e={gameTick:33,UDPReliabilityStrategy:3,heartBeatTick:2e3,offlineTimeLength:15e3,dataType:"String"};return Object(U.isObject)(w.default.lockStepOptions)?(["gameTick","UDPReliabilityStrategy","heartBeatTick","offlineTimeLength"].forEach((function(t){Object(U.isNumber)(w.default.lockStepOptions[t])?e[t]=w.default.lockStepOptions[t]:console.warn("game.json: lockStepOptions."+t+" is not a Number, using default value "+e[t])})),["String","ArrayBuffer"].indexOf(w.default.lockStepOptions.dataType)&&console.warn('game.json: lockStepOptions.dataType "WXConfig.lockStepOptions.dataType" is invalid, using default value "String"'),e):(console.warn("game.json: lockStepOptions is not an Object, using default options.",e),e)}var Mf=new We.default;var Lf=1,Bf=0,Ff=1,Uf=2,Wf=3,Vf=4,Gf=5,Hf=6,zf=6,Yf=function(){function e(){var t=this;if(Object(N.default)(this,e),y.default.LockStep){this.emitter=new We.EventEmitter2;try{this.nativeInstance=new y.default.LockStep}catch(e){wxNativeConsole.warn("[LockStep] new 失败 "+e.message)}wxNativeConsole.warn("[LockStep] new 成功",this.nativeInstance);var n=Nf(),r=n.heartBeatTick,i=n.offlineTimeLength,o=n.gameTick,a=n.UDPReliabilityStrategy,s=n.dataType,c={heartBeatTick:r,offlineTimeLength:i,UDPReliabilityStrategy:a,gameTick:o,dataType:s,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn("[LockStep.initialize]gameTick="+c.gameTick+", hearBeatTick="+c.heartBeatTick+", offlineTimeLength="+c.offlineTimeLength+", UDPReliabilityStrategy="+c.UDPReliabilityStrategy+", gameTick="+c.gameTick+", dataType="+s+", address="+c.address+", port="+c.port),this.nativeInstance.initialize(c),this.nativeInstance.onStatusChange=function(e){var n=e.status,r=e.requestId;if(delete e.status,wxNativeConsole.warn("[LockStep.onStatusChange] status="+n+", requestId="+r,e),r)wxNativeConsole.warn("[LockStep.onStatusChange]key="+n+"_"+r),t.emitter.emit(n+"_"+r,e);else{switch(n){case Bf:t.emitter.emit("onDisconnect");break;case Gf:t.emitter.emit("onError"),Mf.emit("error",e)}t.emitter.emit(n,e)}},this.nativeInstance.onSyncFrame=function(e){t.emitter.emit("onSyncFrame",e)}}else wxNativeConsole.error("当前环境不支持 LockStep")}return Object(oe.default)(e,[{key:"uploadFrame",value:function(e){var t=this,n=e.actionList;return new Promise((function(e,r){try{t.nativeInstance.uploadFrame({actionList:n}),e()}catch(e){wxNativeConsole.error("[LockStep.uploadFrame][fail] errMsg="+e.message),r({errMsg:e.message})}}))}},{key:"getLostFrames",value:function(e){var t=this,n=e.beginFrameId,r=e.endFrameId,i=Lf++;return new Promise((function(e,o){t.nativeInstance.getLostFrames({beginFrameId:n,endFrameId:r,requestId:i}),t.emitter.once(Hf+"_"+i,e),t.emitter.once(zf+"_"+i,(function(e){Af(If.getLostFramesFail),wxNativeConsole.error("[LockStep.getLostFrames][fail], errMsg="+e.errMsg+", errCode="+e.errCode),o(e)}))}))}},{key:"reconnect",value:function(e){var t=this,n=e.accessInfo,r=e.clientId,i=e.sessionId,o=Lf++;return wxNativeConsole.warn("[LockStep.reconnect]accessInfo="+n+", clientId="+r+", sessionId="+i+", requestId="+o),new Promise((function(e,a){t.nativeInstance.reconnect({accessInfo:n,clientId:r,sessionId:i,requestId:o}),t.emitter.once(Wf+"_"+o,e),t.emitter.once(Vf+"_"+o,a)}))}},{key:"onSyncFrame",value:function(e){this.emitter.on("onSyncFrame",e)}},{key:"offSyncFrame",value:function(e){this.emitter.off("onSyncFrame",e)}},{key:"startLockStep",value:function(e){var t=this,n=e.accessInfo,r=e.clientId,i=e.sessionId,o=Lf++;return wxNativeConsole.warn("[LockStep.startLockStep]accessInfo="+n+", clientId="+r+", sessionId="+i+", requestId="+o),new Promise((function(e,a){t.nativeInstance.startLockStep({accessInfo:n,clientId:r,sessionId:i,requestId:o}),t.emitter.once(Ff+"_"+o,e),t.emitter.once(Uf+"_"+o,a)}))}},{key:"stopLockStep",value:function(){wxNativeConsole.warn("[LockStep.stopLockStep]");var e=Lf++;this.nativeInstance.stopLockStep({requestId:e})}},{key:"onError",value:function(e){this.emitter.on("onError",e)}},{key:"offError",value:function(e){this.emitter.off("onError",e)}},{key:"onDisconnect",value:function(e){this.emitter.on("onDisconnect",e)}},{key:"offDisconnect",value:function(e){this.emitter.off("onDisconnect",e)}}]),e}(),qf=n(113),Kf=new We.EventEmitter2;Object(O.onMethod)("onLockStepTaskEvent",(function(e){var t=e.id,n=e.event,r=Object(qf.default)(e,["id","event"]);Kf.emit(t+"_"+n,r),Mf.emit(n,r)}));var Jf=function(){function e(){Object(N.default)(this,e),this._createLockStep(),this._initialize(),this._registerMethod(),this._registerEvent()}return Object(oe.default)(e,[{key:"_createLockStep",value:function(){var e=this,t="createLockStep 没有同步回调";if(Object(O.invokeMethod)("createLockStep",{success:function(t){var n=t.id;wxNativeConsole.warn("[createLockStep][success]id="+n),e.id=n},fail:function(e){wxNativeConsole.error("[createLockStep][fail]errMsg="+e.errMsg),t=e.errMsg}}),Object(U.isUndefined)(this.id))throw new Error(t)}},{key:"_initialize",value:function(){var e=Nf(),t=e.heartBeatTick,n=e.offlineTimeLength,r=e.gameTick,i={heartBeatTick:t,offlineTimeLength:n,UDPReliabilityStrategy:e.UDPReliabilityStrategy,gameTick:r,dataType:e.dataType,address:"long.wxagame.weixin.qq.com",port:10010};wxNativeConsole.warn("[LockStep.initialize]gameTick="+i.gameTick+", hearBeatTick="+i.heartBeatTick+", offlineTimeLength="+i.offlineTimeLength+", UDPReliabilityStrategy="+i.UDPReliabilityStrategy+", gameTick="+i.gameTick+", dataType="+i.dataType+", address="+i.address+", port="+i.port),this._invokeLockStepMethod("initialize",i)}},{key:"_invokeLockStepMethod",value:function(e,t){Object(O.invokeMethod)("invokeLockStepMethod",Object.assign({},t,{method:e,id:this.id}),{beforeAll:function(t){t.errMsg=t.errMsg.replace("invokeLockStepMethod","GameServerManager."+e),delete t.id,delete t.cmdId}})}},{key:"_registerMethod",value:function(){var e=this;["uploadFrame","getLostFrames","reconnect","startLockStep","stopLockStep"].forEach((function(t){e[t]=function(n){return new Promise((function(r,i){e._invokeLockStepMethod(t,Object.assign({},n,{success:r,fail:i}))}))}}))}},{key:"_registerEvent",value:function(){var e=this;["syncFrame","disconnect","error"].forEach((function(t){var n=Object(E.getEventManager)("LockStep_"+e.id+"_"+t);e["on"+Object(A.capitalizeFirstLetter)(t)]=n.onMethod,e["off"+Object(A.capitalizeFirstLetter)(t)]=n.offMethod,Kf.on(e.id+"_"+t,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.emit(e)}))}))}}]),e}(),Xf=function e(){return Object(N.default)(this,e),m.IS_DEVTOOLS?new Jf:new Yf};function $f(){}var Zf=function(){function e(t){var n=t.wsEventName,r=t.nativeEventName,i=t.needJSONParse,o=void 0!==i&&i,a=t.beforeEvent,s=void 0===a?$f:a;if(Object(N.default)(this,e),Object.assign(this,{wsEventName:n,nativeEventName:r,needJSONParse:o,beforeEvent:s}),this.hasListenedNativeEvent=!1,n)this.internalEventManager=Object(E.getEventManager)("GSM-"+this.wsEventName),this.initWSEvent();else{if(!r)throw new Error('invalid wsEventName "'+n+'" and nativeEventName "'+r+'"');this.internalEventManager=Object(E.getEventManager)("GSM-"+this.nativeEventName)}}return Object(oe.default)(e,[{key:"initWSEvent",value:function(){var e=this;kf.on(this.wsEventName,(function(t){e.needJSONParse?t=Rf(JSON.parse(t.data)):t.data=Rf(t.data),e.beforeEvent(t),e.internalEventManager.emit(t)})),this.onMethod=this.internalEventManager.onMethod,this.offMethod=this.internalEventManager.offMethod}},{key:"onMethod",value:function(e){var t=this;this.hasListenedNativeEvent||(this.hasListenedNativeEvent=!0,Tf.lockStep||(Tf.lockStep=new Xf),Tf.lockStep[this.nativeEventName]((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.beforeEvent(e),t.internalEventManager.emit(e)}))),this.internalEventManager.onMethod(e)}},{key:"offMethod",value:function(e){this.internalEventManager.offMethod(e)}}]),e}(),Qf=new Zf({nativeEventName:"onDisconnect",beforeEvent:function(e){e.type="game",Tf.connectedToGame=!1}}),ep=Qf.onMethod.bind(Qf),tp=Qf.offMethod.bind(Qf),np=Qf.internalEventManager.emit,rp={errCode:1001,errMsg:"has not logged in to server"};function ip(){}var op=function(){function e(t){var n=t.command,r=t.nativeMethodName,i=t.expectedArgs,o=void 0===i?{}:i,a=t.beforeInvoke,s=void 0===a?ip:a,c=t.beforeSend,u=void 0===c?ip:c,l=t.beforeSuccess,d=void 0===l?ip:l,f=t.autoFillAccessInfo,p=void 0===f||f,h=t.functionType,g=void 0===h?1:h;Object(N.default)(this,e),this.command=n,this.nativeMethodName=r,this.expectedArgs=o,this.beforeInvoke=s,this.beforeSend=u,this.beforeSuccess=d,this.autoFillAccessInfo=p,this.functionType=g}return Object(oe.default)(e,[{key:"checkType",value:function(e,t,n){var r=Object(U.getDataType)(n);if(r!==t)throw new Error(e+" should be "+t+" instead of "+r)}},{key:"assertType",value:function(e){if("Object"!==Object(U.getDataType)(e))throw new Error("args should be object instead of "+Object(U.getDataType)(e));for(var t in this.expectedArgs)this.checkType(t.type,e[this.expectedArg.name])}},{key:"checkIsCallbackStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"Function"===Object(U.getDataType)(e.success)||"Function"===Object(U.getDataType)(e.fail)||"Function"===Object(U.getDataType)(e.complete)}},{key:"sendCommand",value:function(e){var t=this,n=e.rawArgs;return Tf.hasLoggedIn?new Promise((function(e,r){var i={accessInfo:t.autoFillAccessInfo?Tf.roomAccessInfo:n.accessInfo,content:jf(n)};delete i.content.access_info,t.beforeSend(i,n),Tf.socketTask.sendCommand(t.command,i,{}).then((function(n){n=Rf(n);var i=t.beforeSuccess(n);i instanceof Promise?i.then((function(){e(n)})).catch((function(e){r(e)})):e(n)})).catch((function(e){r(e)}))})):Promise.reject(rp)}},{key:"callNative",value:function(e){var t=e.rawArgs,n=Object.assign({},t);return delete n.success,delete n.fail,delete n.complete,["login","reconnect"].includes(this.nativeMethodName)&&(n.sessionId=Tf.sessionId,n.clientId=Tf.clientId),Tf.lockStep||(Tf.lockStep=new Xf),Tf.lockStep[this.nativeMethodName](n)}},{key:"invokeMethod",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.assertType(e),this.beforeInvoke(e);var t,n=this.checkIsCallbackStyle(e);switch(this.functionType){case 1:t=this.sendCommand({rawArgs:e});break;case 2:t=this.callNative({rawArgs:e});break;default:throw new Error("invalid function type: "+this.functionType)}return n?void t.then((function(t){e.success&&e.success(t),e.complete&&e.complete(t)})).catch((function(t){e.fail&&e.fail(t),e.complete&&e.complete(t)})):t}}]),e}(),ap=new op({command:qd,beforeSend:function(e){var t=Nf(),n=t.gameTick,r=t.UDPReliabilityStrategy;e.content.udp_reliability_strategy=r,e.content.game_tick=n},beforeSuccess:function(e){Tf.gameAccessInfo&&Tf.lockStep.stopLockStep();var t=e.data,n=t.accessInfo,r=t.clientId;Tf.roomAccessInfo=n,Tf.gameAccessInfo="",Tf.connectedToRoom=!0,Tf.clientId=r}}),sp=ap.invokeMethod.bind(ap),cp=new op({command:Kd,autoFillAccessInfo:!1,beforeSend:function(e){this.tempAccessInfo=e.accessInfo},beforeSuccess:function(e){var t=e.data.clientId;Tf.roomAccessInfo=this.tempAccessInfo,Tf.gameAccessInfo="",Tf.connectedToRoom=!0,Tf.clientId=t}}),up=cp.invokeMethod.bind(cp),lp=new op({command:Xd}),dp=lp.invokeMethod.bind(lp),fp=new op({command:$d}),pp=fp.invokeMethod.bind(fp),hp=new op({command:ef}),gp=hp.invokeMethod.bind(hp),vp=new op({command:zd}),_p=vp.invokeMethod.bind(vp),yp=new op({command:Qd,beforeSend:function(e){e.content.quit=!0},beforeSuccess:function(){Tf.gameAccessInfo&&Tf.lockStep.stopLockStep(),Tf.roomAccessInfo="",Tf.gameAccessInfo=""}}),mp=yp.invokeMethod.bind(yp),bp=new op({command:Zd,beforeSuccess:function(){Tf.gameAccessInfo&&Tf.lockStep.stopLockStep(),Tf.roomAccessInfo="",Tf.gameAccessInfo=""}}),wp=bp.invokeMethod.bind(bp),Op=new op({command:Wd,beforeSend:function(e){e.content.use_udp_to_lockstep=!0}}),Ep=Op.invokeMethod.bind(Op),Sp=new op({command:Yd,beforeInvoke:function(){if(!Tf.gameAccessInfo)throw new Error("game has not started")},beforeSend:function(e){e.content.use_udp_to_lockstep=!0}}),Tp=Sp.invokeMethod.bind(Sp),Ip=new op({functionType:2,nativeMethodName:"uploadFrame"}),Ap=Ip.invokeMethod.bind(Ip),Cp=new op({functionType:2,nativeMethodName:"getLostFrames"}),kp=Cp.invokeMethod.bind(Cp),xp=new Zf({wsEventName:"recv-broadcast",needJSONParse:!0}),Pp=xp.onMethod,Dp=xp.offMethod,Rp=new Zf({wsEventName:"recv-roomInfoChange",needJSONParse:!0,beforeEvent:function(e){wxNativeConsole.warn("[onRoomInfoChange][beforeEmit] 储存 roomInfo"),Tf.roomInfo=e}}),jp=Rp.onMethod,Np=Rp.offMethod;new Zf({wsEventName:"recv-gameStartEnd",needJSONParse:!0}).onMethod((function(e){var t=e.state,n=e.accessInfo;switch(t){case 2:wxNativeConsole.warn("[onGameStart] accessInfo="+n),Tf.gameAccessInfo=n,Tf.lockStep||(Tf.lockStep=new Xf),Tf.lockStep.startLockStep({accessInfo:n,clientId:Tf.clientId,sessionId:Tf.sessionId}).then((function(){Tf.connectedToGame=!0,Tf.hasGameStarted=!0,Lp.emit({}),wxNativeConsole.warn("[onGameStart][LockStep.start][success]")})).catch((function(e){Af(If.startLockStepFail),wxNativeConsole.error("[onGameStart][LockStep.start][fail]",e)}));break;case 3:wxNativeConsole.warn("[onGameEnd]"),Tf.lockStep.stopLockStep(),Tf.hasGameStarted=!0,Up.emit({gameAccessInfo:Tf.gameAccessInfo}),Tf.gameAccessInfo=""}}));var Mp,Lp=Object(E.getEventManager)("LockStepGameStart"),Bp=Lp.onMethod,Fp=Lp.offMethod,Up=Object(E.getEventManager)("LockStepGameEnd"),Wp=Up.onMethod,Vp=Up.offMethod,Gp=new Zf({nativeEventName:"onSyncFrame",beforeEvent:function(){Tf.hasGameStarted||(Tf.hasGameStarted=!0,Tf.connectedToGame=!0,Lp.emit({}))}}),Hp=Gp.onMethod.bind(Gp),zp=Gp.offMethod.bind(Gp),Yp=(Mp=new op({command:Jd,autoFillAccessInfo:!1})).invokeMethod.bind(Mp),qp=function(){var e=new op({functionType:2,nativeMethodName:"reconnect",beforeSuccess:function(){Tf.connectedToGame=!0}});return e.invokeMethod.bind(e)}();function Kp(e){if(wxNativeConsole.info("[gameReconnect]connectedToGame="+Tf.connectedToGame+", roomState="+e.roomState),Tf.connectedToGame)return Promise.resolve({});switch(e.roomState){case 1:return Promise.resolve({});case 2:case 5:var t=e.gameAccessInfo;return Tf.gameAccessInfo=t,qp({accessInfo:t,clientId:Tf.clientId,sessionId:Tf.sessionId});case 3:return Promise.reject({errMsg:"the room state is ended."});case 4:return Promise.reject({errMsg:"the room state is destroyed"});default:return Promise.reject({errMsg:"invalid room state: "+e.roomState})}}var Jp=new op({command:tf}),Xp=Jp.invokeMethod.bind(Jp),$p=new op({command:nf}),Zp=$p.invokeMethod.bind($p),Qp=new Zf({wsEventName:"recv-beKickedOut",needJSONParse:!1,beforeEvent:function(e){Tf.gameAccessInfo&&Tf.lockStep.stopLockStep(),Tf.roomAccessInfo="",Tf.gameAccessInfo="",wxNativeConsole.warn("[onBeKickedOut]",e)}}),eh=Qp.onMethod.bind(Qp),th=Qp.offMethod.bind(Qp),nh=new op({command:rf}),rh=nh.invokeMethod.bind(nh),ih=new op({command:of}),oh=ih.invokeMethod.bind(ih),ah=new op({command:sf}),sh=ah.invokeMethod.bind(ah),ch="";var uh=new op({command:cf}),lh=uh.invokeMethod.bind(uh);var dh=new op({command:uf}),fh=dh.invokeMethod.bind(dh),ph=new Zf({wsEventName:"recv-syncInfo",needJSONParse:!0}),hh=ph.onMethod,gh=ph.offMethod,vh=new We.default;new Zf({wsEventName:"recv-friendMessage",needJSONParse:!0}).onMethod((function(e){e.msg=JSON.parse(e.msg),vh.emit(e.msg.type,e)}));var _h=new WeakMap;var yh=Object(bt.default)("getFriendsStateData","webapi_opengameinfo_getfriendsuserdata",{},{},(function(){}),(function(e){var t=e.friend_data_list;return e.list=t?t.map((function(e){var t=e.game_info,n=e.profile;return{userState:t.user_state,sysState:t.sys_state,openId:t.open_id,nickName:n.nick_name,avatarUrl:n.avatar_url,gender:n.gender}})):[],delete e.friend_data_list,delete e.rawData,e})),mh=new op({command:lf}),bh=mh.invokeMethod.bind(mh),wh=new op({command:df}),Oh=wh.invokeMethod.bind(wh),Eh=new Zf({wsEventName:"recv-gameMatched",needJSONParse:!0}),Sh=Eh.onMethod,Th=Eh.offMethod,Ih={login:function(){return Tf.loginPromise||(Tf.loginPromise=new Promise((function(e,t){var n=function(e){wxNativeConsole.error("connectSocketError",e),t(e.errMsg)};Tf.socketTask=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Df(xf(e),e)}(),Tf.socketTask._emitter.once("recv-active",(function(){Tf.hasLoggedIn=!0,e(),Tf.socketTask._emitter.off("ws-error",n)})),Tf.socketTask._emitter.once("ws-error",n)}))),Tf.loginPromise},logout:function(){return new Promise((function(e,t){if(!Tf.socketTask)return e();try{Tf.socketTask.close(),Tf.socketTask._emitter.once("ws-close",e),delete Tf.socketTask}catch(e){wxNativeConsole.error("GameServerManager.logout() fail",e.message),t(e.message)}}))},onLogout:function(e){kf.on("logout",(function(){e(),Tf.roomAccessInfo&&np({type:"room"})}))},offLogout:function(e){kf.off("logout",e)},createRoom:sp,joinRoom:up,updateReadyStatus:dp,changeSeat:pp,getRoomInfo:gp,broadcastInRoom:_p,ownerLeaveRoom:wp,memberLeaveRoom:mp,startGame:Ep,endGame:Tp,uploadFrame:Ap,getLostFrames:kp,reconnect:function(e){return wxNativeConsole.warn("[reconnect][invoke]",e),(t=e.accessInfo,Yp({accessInfo:t}).then((function(e){return wxNativeConsole.warn("[roomReconnect][success]accessInfo="+t+", clientId="+e.data.clientId),Tf.roomAccessInfo=t,Tf.connectedToRoom=!0,Tf.clientId=Number(e.data.clientId),gp()})).then((function(e){return wxNativeConsole.warn("[getRoomInfo][success]",e),Tf.roomInfo=e.data.roomInfo,Tf.roomInfo.gameAccessInfo&&(Tf.gameAccessInfo=Tf.roomInfo.gameAccessInfo),Promise.resolve(Tf.roomInfo)}))).then(Kp);var t},getLastRoomInfo:Xp,kickoutMember:Zp,restart:rh,onBroadcast:Pp,offBroadcast:Dp,onRoomInfoChange:jp,offRoomInfoChange:Np,onSyncFrame:Hp,offSyncFrame:zp,onGameStart:Bp,offGameStart:Fp,onGameEnd:Wp,offGameEnd:Vp,onDisconnect:ep,offDisconnect:tp,onBeKickedOut:eh,offBeKickedOut:th,onLockStepError:function(e){"function"==typeof e&&Mf.on("error",e)},offLockStepError:function(e){"function"==typeof e?Mf.off("error",e):Mf.removeAllListeners("error")},startStateService:oh,endStateService:sh,setState:fh,setInviteData:function(e){return"string"==typeof e&&(ch=e,!0)},onInvite:function(e){var t=function(t){var n=t.srcProfile,r=t.msg.data,i=n.nickName,o=n.openId,a=o+"_"+Date.now(),s=[o,"",1,a].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:s}),Object(Et._showModal)({confirmText:"加入",cancelText:"取消",content:i+" 邀请你一起玩游戏，是否加入？",success:function(t){t.confirm&&e({openId:o,data:r});var n=[o,"",t.confirm?2:3,a].join(",");Reporter.reportKeyValue({key:"GameServerInvite",value:n})}})};_h.set(e,t),vh.on("invite",t)},offInvite:function(e){vh.off("invite",_h.get(e)),_h.delete(e)},startMatch:bh,cancelMatch:Oh,onMatch:Sh,offMatch:Th},Ah={inviteFriend:function(e){var t=e.openId;lh({target_openid_list:[t],msg:JSON.stringify({type:"invite",data:ch})})},onStateUpdate:hh,offStateUpdate:gh,getFriendsStateData:yh},Ch=new WeakMap;function kh(){var e={toString:function(){return"9999"}};return e}var xh=function(){function e(){Object(N.default)(this,e),Ch.set(this,new WeakMap)}return Object(oe.default)(e,[{key:"setTimeout",value:function(){var e=Ch.get(this),t=y.default.setTimeout.apply(void 0,arguments),n=kh();return e.set(n,t),n}},{key:"clearTimeout",value:function(e){var t=Ch.get(this).get(e);void 0!==t&&y.default.clearTimeout(t)}},{key:"setInterval",value:function(){var e=Ch.get(this),t=y.default.setInterval.apply(void 0,arguments),n=kh();return e.set(n,t),n}},{key:"clearInterval",value:function(e){var t=Ch.get(this).get(e);void 0!==t&&y.default.clearInterval(t)}},{key:"requestAnimationFrame",value:function(){var e=Ch.get(this),t=y.default.requestAnimationFrame.apply(void 0,arguments),n=kh();return e.set(n,t),n}},{key:"cancelAnimationFrame",value:function(e){var t=Ch.get(this).get(e);void 0!==t&&y.default.cancelAnimationFrame(t)}}]),e}(),Ph=n(117),Dh=n(120),Rh=wxNativeConsole.createLogger("requirePlugin"),jh=function(e){var t=e.match(/([^/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'+e+'" has not registered.');var n=t[1],r=t[2],i=(w.default.plugins||w.default.gamePlugins)[n];if(void 0===i)throw new Error('Plugin "'+e+'" has not registered.');return{pluginId:i.provider,contexts:i.contexts,alias:n,path:r}},Nh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.some((function(e){return"isolatedContext"===e.type}))},Mh=function(e){return!e||e.some((function(e){return"gameContext"===e.type}))},Lh=function(e){return e.some((function(e){return"openDataContext"===e.type}))};function Bh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Rh.log("invoke: schema="+e+", env's type="+("undefined"==typeof env?"undefined":Object(R.default)(env)));var r=jh(e),i=r.pluginId,o=r.contexts,a=r.path;Rh.log("pluginId="+i+", path="+a+", contexts=",o);var s,c="__plugin__/"+i+(a?"/"+a:"");if(Rh.log("modKey="+c),!n&&Nh(o)){Rh.log("isIsolatedContext");var u=Object(Dh.getEnv)(i,t);Rh.log("env.keys: ",Object.keys(u)),s=__subContextEngine__.createIsolatedGamePlugin({provider:i,secure:!0,env:u,isPreload:!1})}else if(!n&&Mh(o))Rh.log("isGameContext"),s=__subContextEngine__.getGameContext().contextGlobal.__require;else{if(!n||!Lh(o))throw new Error("invalid context type: "+Object(U.safelyToString)(o));Rh.log("isOpenDataContext"),s=__subContextEngine__.getGameOpenDataContext().contextGlobal.__require}return s(c)}var Fh,Uh=Object(Un.operateWXDataFactory)("routeJSServer","routeJsSvr",{},{},(function(e){var t=e.name,n=void 0===t?"":t,r=e.arg,i=void 0===r?"":r;return{json_args:JSON.stringify({data:JSON.stringify({arg:i,name:n})})}}),(function(e){if(!e.rawData)return e.errMsg,e;e.rawData;var t=JSON.parse(e.rawData),n=t.data,r=t.log;return e.data=JSON.parse(n),e.log=r,e.baseResp=JSON.parse(e.base_resp),e.baseResp.errCode=e.baseResp.errcode,e.baseResp.errMsg=e.baseResp.errmsg,delete e.rawData,delete e.base_resp,delete e.baseResp.errcode,delete e.baseResp.errmsg,e})),Wh=null,Vh={console:Object.assign({},console),Reporter:Reporter,setTimeout:y.default.setTimeout,clearTimeout:y.default.clearTimeout,setInterval:y.default.setInterval,clearInterval:y.default.clearInterval,requestAnimationFrame:y.default.requestAnimationFrame,cancelAnimationFrame:y.default.cancelAnimationFrame,wxNativeConsole:wxNativeConsole,FunctionalPage:ad,requirePlugin:function(e,t){return Bh(e,t)},WebAssembly:Iu.WebAssembly,getWxSourceMap:function(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap},_getCurrentNetworkType:it._getCurrentNetworkType},Gh={setTimeout:(Fh=new xh).setTimeout.bind(Fh),clearTimeout:Fh.clearTimeout.bind(Fh),setInterval:Fh.setInterval.bind(Fh),clearInterval:Fh.clearInterval.bind(Fh),requestAnimationFrame:Fh.requestAnimationFrame.bind(Fh),cancelAnimationFrame:Fh.cancelAnimationFrame.bind(Fh)},Hh={WXConfig:w.default,log:y.default.log,setTimeout:Gh.setTimeout,clearTimeout:Gh.clearTimeout,setInterval:Gh.setInterval,clearInterval:Gh.clearInterval,requestAnimationFrame:Gh.requestAnimationFrame,cancelAnimationFrame:Gh.cancelAnimationFrame,Canvas:_a.openDataCreateOffScreenCanvas,Image:ya.createImage,Touch:Ra.emitter2,Audio:Bi,APIs:{getGroupUserGameData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareTicket,n=e.success,r=e.fail,i=e.complete;setTimeout((function(){var e=et.share.ShareInfoStorage,o=t||e.lastShareTicket;if(o&&e.get(o)){var a=e.get(o),s=a.shareKey,c=a.shareName;vd.info("shareTicket=",o),vd.info("shareInfo=",JSON.stringify(a)),gd({apiName:"webapi_getgroupsnsdata",reqData:{share_key:s,share_name:c},success:function(e){var t=JSON.parse(e.respData.data),r=t.member_list||t.memberList||[];_d=r,"function"==typeof n&&n({errMsg:e.errMsg,data:r})},fail:r,complete:i})}else{var u={errMsg:"getGroupUserGameData:fail 当前小程序不是从群分享卡片打开"};"function"==typeof r&&r(u),"function"==typeof i&&i(u)}}),0)},getFriendUserGameData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;setTimeout((function(){yd({apiName:"webapi_getfriendsnsdata",reqData:{},success:function(e){var n=JSON.parse(e.respData.data).friendList||[];md=n,"function"==typeof t&&t({errMsg:e.errMsg,data:n})},fail:n,complete:r})}),0)},getUserInfo:bd.getUserInfo,getFriendCloudStorage:wd.getFriendCloudStorage,getGroupInfo:Od.getGroupInfo,getGroupCloudStorage:Ed.getGroupCloudStorage,getUserCloudStorage:Sd.getUserCloudStorage,setUserCloudStorage:Id,getUserCloudStorageKeys:Ad.getUserCloudStorageKeys,removeUserCloudStorage:xd,getGroupDataCache:function(){return _d},getFriendDataCache:function(){return md},getSystemInfo:tt.getSystemInfo,getSystemInfoSync:tt.getSystemInfoSync,showModal:Et.showModal,modifyFriendInteractiveStorage:Ph.modifyFriendInteractiveStorage,shareMessageToFriend:Pd.shareMessageToFriend,getPotentialFriendList:Dd.getPotentialFriendList,getGameServerManager:function(){return Ah},routeJSServer:Uh,getCloudFileUrl:wr.getCloudFileUrl,checkHandoffEnabled:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("checkHandoffEnabled",Object.assign({},e,{showToast:!1}),{beforeSuccess:function(e){return ld(2,3,e.isEnabled?1:0,e.errCode)}})},startHandoff:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(C.checkPermissionSync)("handoff")?dd?Object(O.invokeMethod)("checkHandoffEnabled",{showToast:!0,success:function(t){var n=t.isEnabled,r=t.errCode;n?fd(Object.assign({},e,{path:pd})):(ld(2,1,0,r),Object(O.beforeInvokeFail)("startHandoff",e,"low pc version or not login"))},fail:function(t){var n=t.errMsg;Object(O.beforeInvokeFail)("startHandoff",e,n)}}):Object(O.beforeInvokeFail)("startHandoff",e,"not in touchEnd"):Object(O.beforeInvokeFail)("startHandoff",e,"no permission")}},checkPermissionSync:C.checkPermissionSync,apiReport:P.apiReport,Reporter:Reporter,wxNativeConsole:wxNativeConsole,requirePlugin:Bh,getWxSourceMap:function(){if("undefined"!=typeof __wxSourceMap)return __wxSourceMap}};m.IS_DEVTOOLS&&(Hh.console=console);var zh=function(){if(Wh)return Wh;if(Vh.sharedCanvas=Object(_a._createSharedCanvas)(),Hh.sharedCanvas=Object(_a._createSharedCanvas)(),Hh.originalProto=Object(Au.getOriginalProto)(),Hh.WXConfig=w.default,Vh.wx=wx,w.default.openDataContextExtension){var e=Object.assign({},wx,{getFileSystemManager:function(){return He.default.opendata}},Qe.opendata);e.env={USER_DATA_PATH:Object(He.getOpenDataDir)()},Hh.wx=e,Hh.NativeGlobal=y.default}return Wh={game:Vh,gameOpenData:Hh}},Yh=function(e,t,n){for(var r in t){if("exportToAppServiceSDK"===r)return;e[r]=t[r]}["onPageReload"].forEach((function(r){t[r]&&(e[r]=function(e){t[r].call(n,e)})}))},qh=Object(ko.constructOperateWXData)(!1,"getAdData"),Kh=Object(ko.constructOperateWXData)(!1,"reportAdData"),Jh=function(){return new Promise((function(e,t){wx.getNetworkType({success:function(t){e(t.networkType)},fail:function(e){t(e)}})}))},Xh="1.9.91",$h=function(){function e(t){var n=t.traceid,r=t.aid,i=t.group_id,o=t.dest_type,a=t.dest_appid,s=t.watermark_type,c=t.url,u=t.rl,l=t.apurl,d=t.weapp_ghid,f=t.pt,p=t.title,h=t.imageUrl,g=t.width,v=t.height;Object(N.default)(this,e),this.traceid=n,this.aid=r,this.group_id=i,this.dest_type=o,this.dest_appid=a,this.watermark_type=s,this.url=c,this.rl=u,this.apurl=l,this.weapp_ghid=d,this.pt=f,this.title=p,this.imageUrl=h,this.width=g,this.height=v}return Object(oe.default)(e,[{key:"getConstant",value:function(){var e=this,t=["traceid","aid","group_id","weapp_ghid","pt"];return 1===this.dest_type&&(t=["traceid","aid","group_id","pt"]),Object.keys(this).filter((function(e){return-1!==t.indexOf(e)})).reduce((function(t,n){return t[n]=e[n],t}),{sdk_version:Xh})}},{key:"report",value:function(e,t,n,r){Kh({apiName:"advert_report",reqData:e,success:function(e){try{0!==(e=JSON.parse(e.rawData)).ret?"function"==typeof n&&n({errMsg:"reportAdData fail: ret "+e.ret}):"function"==typeof t&&t(e)}catch(e){"function"==typeof n&&n({errMsg:e.message})}},fail:n,complete:r})}},{key:"reportExpose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewable,n=e.screenCount,r=void 0===n?1:n,i=e.success,o=e.fail,a=e.complete,s=this.getConstant(),c={report_type:0,apurl:this.apurl,viewable:t,screen_cnt:r};this.report(Object.assign({},c,s),i,o,a)}},{key:"reportClick",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.screenCount,n=void 0===t?1:t,r=e.absoluteX,i=void 0===r?0:r,o=e.absoluteY,a=void 0===o?0:o,s=e.pressInterval,c=void 0===s?0:s,u=e.relativeX,l=void 0===u?0:u,d=e.relativeY,f=void 0===d?0:d,p=e.realWidth,h=e.realHeight,g=e.success,v=e.fail,_=e.complete,y=this.getConstant(),m={report_type:1,rl:this.rl,screen_cnt:n,click_point:JSON.stringify({x:i,y:a}),press_interval:c,pos_x:l,pos_y:f,ad_w:p,ad_h:h,from_game:1};this.report(Object.assign({},m,y),g,v,_)}},{key:"navigateTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;1===this.dest_type?Object(Eu.openUrl)({url:this.url,success:t,fail:n,complete:r}):6===this.dest_type?Object(O.invokeMethod)("navigateToMiniProgram",{appId:this.dest_appid,path:Object(j.transWxmlToHtml)(this.url).trim(),scene:1092,sourcetype:1,success:t,fail:n,complete:r}):"function"==typeof n&&n({errMsg:"dest_type "+this.dest_type+" 是一个非法值"})}}]),e}(),Zh=n(76),Qh=n.n(Zh);function eg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ng="",rg="",ig="{}",og="",ag="",sg="{}";function cg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){var r="",i="";m.IS_ANDROID&&w.default.clientVersion>=654316032?Object(O.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){r=e.waid||"",i=e.imei||"",t({waid:r,imei:i})},fail:function(e){n(e)}}):t({waid:r,imei:i})}))}var ug=n(38),lg=n(46),dg=n(19);function fg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return pg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pg(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function pg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hg=function(e){var t={};try{var n,r=fg(e=JSON.parse(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;i.hasOwnProperty("exp_para")&&i.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){r.e(e)}finally{r.f()}for(var o in t)dg.FLOW_EXP_MAP[o]&&(t[dg.FLOW_EXP_MAP[o]]=t[o]);return t}catch(e){return{}}},gg=function(e){var t=e.aid,n=e.buttonText,r=void 0===n?"":n;return Object(ug.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:t.toString(),button_text:r})}}).then((function(e){if(!e.rawData)throw new Error("get_ad_metric no result");try{var t=JSON.parse(e.rawData),n=JSON.parse(t.result)||{},r=n.ad_metric_count,i=n.desc_text;return null==r||null==i||r<50?null:{count:Object(lg.convertTenThousand)(r),descText:i}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((function(){throw new Error("get_ad_metric request failed")}))},vg=function(e){var t=e.guide_group_id,n=e.uxinfo;return Object(ug.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:t,uxinfo:n})}}).then((function(e){return"ok"===e.msg?Promise.resolve(e):Promise.reject(e)}))},_g=n(151),yg="<?xml version='1.0' encoding='utf-8' ?>",mg=function(e){return"<![CDATA["+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"]]>"},bg=function(e){return e.children&&e.children.length>0?e.children.map((function(e){return wg(e)})).join(""):""},wg=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?yg:"";return n+="<"+e.name+">",e.children.length>0?n+=bg(e):n+=mg(e.content),n+="</"+e.name+">"},Og=n(107),Eg=n(103),Sg=Symbol("signExport"),Tg=function(){return function(e,t){e[Sg]=e[Sg]||new Set,e[Sg].add(t)}};function Ig(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ag(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cg=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},kg=function(e,t){var n,r=Array.isArray(t)?t:[t],i=Ig(r);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(!(o in e)||"function"!=typeof e[o])throw new Error(o+" is not the function method of the class")}}catch(e){i.e(e)}finally{i.f()}return r.map((function(t){return e[t]}))},xg=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,i){var o=i.value,a=kg(n,e);i.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cg(this,void 0,void 0,Vt.a.mark((function e(){var n,r,i,s;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.call.apply(o,[this].concat(t));case 2:n=e.sent,r=Ig(a),e.prev=4,r.s();case 6:if((i=r.n()).done){e.next=12;break}return s=i.value,e.next=10,s.call(this,n);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})))}:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=o.call.apply(o,[this].concat(n));if(i instanceof Promise)return i.then((function(t){var n,r=Ig(a);try{for(r.s();!(n=r.n()).done;){n.value.call(e,t)}}catch(e){r.e(e)}finally{r.f()}return t}));var s,c=Ig(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,i)}}catch(e){c.e(e)}finally{c.f()}return i}}},Pg=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,i){var o=i.value,a=kg(n,e);i.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Cg(this,void 0,void 0,Vt.a.mark((function e(){var n,r,i,s;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.call.apply(o,[this].concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),r=Ig(a),e.prev=10,r.s();case 12:if((i=r.n()).done){e.next=18;break}return s=i.value,e.next=16,s.call(this,e.t0);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(10),r.e(e.t1);case 23:return e.prev=23,r.f(),e.finish(23);case 26:throw e.t0;case 27:case"end":return e.stop()}}),e,this,[[0,7],[10,20,23,26]])})))}:function(){var e=this;try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=o.call.apply(o,[this].concat(n));return i instanceof Promise&&i.catch((function(t){var n,r=Ig(a);try{for(r.s();!(n=r.n()).done;){n.value.call(e,t)}}catch(e){r.e(e)}finally{r.f()}})),i}catch(e){var s,c=Ig(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,e)}}catch(e){c.e(e)}finally{c.f()}throw e}}}},Dg=n(28),Rg=n(189),jg=n(111),Ng={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:m.PLATFORM,isWaGame:!0,isIOS:m.IS_IOS,isAndroid:m.IS_ANDROID,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},Mg={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},Lg=function(){return Object(Dg.pick)(Ng,["oaid","imei","idfa","common_device_id"])},Bg=function(){if(!Ng.isWaGame){var e=Object(tt.getStaticSystemInfoSync)();Ng.screenWidth=e.screenWidth,Ng.screenHeight=e.screenHeight,Ng.deviceOrientation=Ng.screenWidth>Ng.screenHeight?"landscape":"portrait"}return Ng.deviceOrientation},Fg=function(){},Ug=function(){return new Promise((function(e){Fg=e}))},Wg=function(){return new Promise((function(e){var t;t=function(t){Ng.oaid=t,e()},ng?t&&t(ng):m.IS_ANDROID&&w.default.clientVersion<654315827?Object(O.invokeMethod)("getOAID",{success:function(e){/:ok/.test(e.errMsg)?(ng=e.result||"",t&&t(ng)):t&&t("")},fail:function(){t&&t("")}}):t&&t("")}))},Vg=function(){return new Promise((function(e){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){m.IS_ANDROID&&w.default.clientVersion>=654315827||m.IS_IOS&&w.default.clientVersion>=385879808?Object(O.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){ng=e.oaid||"",rg=e.imei||"",ag=e.waid||"",og=e.ua||"",sg=e.devIdInfo||"{}";try{ig=JSON.stringify(tg(tg({},JSON.parse(sg)),og?{ua:og}:{}))}catch(e){n(e)}t({oaid:ng,imei:rg,commonid:ig,waid:ag})},fail:function(e){n(e)}}):t({oaid:ng,imei:rg,commonid:ig,waid:ag})}))})().then((function(t){var n=t.imei,r=t.oaid,i=t.commonid;m.IS_IOS?Ng.idfa=n:m.IS_ANDROID&&(Ng.oaid=r,Ng.imei=n),Ng.common_device_id=i||"{}",e(),Ug().then((function(){Object(jg.reportAdMonitorData)(vv.IDKEY.GET_DEVICEINFO_SUCCESS)}))})).catch((function(t){e(),Ug().then((function(){Object(jg.reportAdMonitorData)(vv.IDKEY.GET_DEVICEINFO_ERROR,t)}))}))}))},Gg=new Promise((function(e){w.default.onReady((function(){Ng.startTime=new Date,Ng.deviceOrientation=Object(Dg.getInitDeviceOrientation)()||"",Ng.envVersion=w.default.envVersion;var t=Object(tt.getStableSystemInfo)(),n=Object(tt.getInitScreenSize)();Ng.screenWidth=n.screenWidth||0,Ng.screenHeight=n.screenHeight||0,Ng.systemVersion=t.system,Ng.wechatVersion=t.version,Ng.SDKVersion=t.SDKVersion,Ng.brand=t.brand,Ng.model=t.model,Ng.isWaGame=Object(A.isGame)();try{Ng.gameAppId=w.default.accountInfo.appId,Ng.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([Wg(),Vg()]).then((function(){return e(Ng)}))}))})),Hg=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Ng[r]=e[r]}};try{Object(Ur.onAppRoute)((function(e){var t=e.webviewId,n=e.openType,r=e.path;Ng.isWaGame||(Mg.lastWebviewId=Mg.currentWebviewId,Mg.currentWebviewId=t||0,Mg.currentOpenType=n,Mg.weappPath=r)}))}catch(e){}Object(ms._onShow)((function(e){var t=e.scene;Mg.enterForegroundTime=new Date,Mg.currentScene=t})),Ts((function(){Mg.gameDuration+=Date.now()-Mg.enterForegroundTime.getTime()}));var zg,Yg,qg,Kg,Jg,Xg,$g,Zg,Qg,ev,tv,nv,rv,iv,ov,av,sv,cv,uv,lv=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},dv=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},fv=function(){function e(t){Object(N.default)(this,e),this.adProxy=t,this.timePoints={},this.analyseBranchInfo=null}return Object(oe.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"convertedAdData",get:function(){return this.adProxy.convertedAdData}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"lastClickTime",get:function(){return this.adProxy.getLastClickTime()}},{key:"getTimePoint",value:function(e){return this.timePoints[e]?this.timePoints[e]:0}},{key:"setTimePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("splashAd"!==this.adType){["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});var n=t.time;this.timePoints[e]=n||Date.now()}else this.timePoints[e]=Date.now()}},{key:"reportTimePoints",value:function(e){var t=e.slotid,n=e.costtype,r=e.splash_instance_id,i=void 0===r?"":r,o=e.scene,a=void 0===o?0:o,s=e.errCode,c=void 0===s?0:s,u=e.extInfo,l=void 0===u?{}:u;if(["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType)){this.reportMMData(19837,Object.assign({slotid:t,costtype:n,ext_info:JSON.stringify(Object.assign({},l,{adUnitId:this.adUnitId,is_game:!0})),instance_id:i,scene:a,crt_size:this.data.crt_size,error_code:c},this.timePoints))}}},{key:"reportCloseAction",value:function(e){return this.reportMMData(16743,e)}},{key:"reportAdEntranceExposure",value:function(e){return this.reportMMData(18988,e)}},{key:"reportTouchClick",value:function(e){return this.reportMMData(16487,e)}},{key:"reportCancelRewardPlayablePage",value:function(e){return this.reportMMData(20299,e)}},{key:"formatMMData",value:function(e,t){var n,r=Object(Rg.getMMDataProto)(e);if(!r||0===r.length)return null;var i=this.data;if("grid"===this.adType&&-1!==[16139].indexOf(e))try{i=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:i.aid,traceid:i.traceid,crt_size:i.crt_size,slotid:dg.POS_ID_MAP[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=dg.POS_TYPE_MAP[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:Ng.gameAppId,appid:this.pluginAppid?this.pluginAppid:Ng.gameAppId,orig_weapp_id:this.pluginAppid?Ng.gameAppId:"",network_type:Ng.adNetworkType,wechat_version:Ng.wechatVersion,platform:Ng.platform,system_version:Ng.systemVersion,device_orientation:Ng.deviceOrientation,wxapp_lib_version:Ng.SDKVersion,wxapp_lib_time:Ng.SDKVersionTime,machine_type:Ng.model,ad_platform:Ng.isWaGame?1:0,ad_unit_id:this.adUnitId}),r.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}}))}},{key:"reportMMData",value:function(e,t){var n=this.formatMMData(e,t);return Object(ug.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}},{key:"reportAbnormalDetect",value:function(e){var t={adunit_id:this.adUnitId,appid:Ng.gameAppId};if(Object.assign(e,t),"object"===Object(R.default)(e))return this.reportMMData(16139,e)}},{key:"reportAdIDKey",value:function(e){var t,n=e.key,r=e.id,i=n;"object"===Object(R.default)(i)&&(!r&&(r=i.idKeyGroup),i=i.idKey),r||(r=null!==(t=dg.ID_KEY_MAP[this.adType])&&void 0!==t?t:924),0===i&&(i="0"),Reporter.reportIDKeyDirectly({id:r,key:i})}},{key:"processStackMsg",value:function(e){var t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return t.indexOf(n)<0&&(t=n+"@"+t),t}},{key:"reportAdIDKeyErrorData",value:function(e){var t,n,r=e.key,i=e.id,o=e.extInfo,a=r,s=i,c=void 0===o?"":o;"object"===Object(R.default)(a)&&(!s&&(s=a.idKeyGroup),a=a.idKey),0===a&&(a="0");var u="",l="";try{if(this.data){var d={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916,pv.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){var f=this.convertedAdData;f&&(l=f.video.src,d.is_gauss_blur=f.isGaussBlur,d.is_expand_style=f.isExpandStyle)}else this.adProxy.isBannerAd()&&(l=this.data.image_url);u=JSON.stringify(d)}if(c&&"string"!=typeof c)try{c instanceof Error&&(c=this.processStackMsg(c)),c=JSON.stringify(c)}catch(e){c=c.toString()}}catch(e){c=this.processStackMsg(e),l="",u=null===(t=this.data)||void 0===t?void 0:t.crt_size}return this.reportMMData(16295,{id_key:a,id_key_group:null!==(n=null!=s?s:dg.ID_KEY_MAP[this.adType])&&void 0!==n?n:924,report_time:+new Date,source_url:l,expand_feild:u,expand_feild2:c,scene:this.adProxy.scene||0})}},{key:"reportAdMonitorData",value:function(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}},{key:"reportEndPage",value:function(e){var t=e.slotid,n=e.costtype,r=e.isGame,i=void 0===r?0:r,o=e.posType,a=e.ace_type,s=e.exposure_duration,c=void 0===s?0:s;return this.reportMMData(19002,{slotid:t,costtype:n,is_game:i,pos_type:o,ace_type:a,exposure_duration:c})}},{key:"reportAdFeedbackData",value:function(e){var t,n,r,i={};if("grid"===this.adType){var o={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(t=this.datas)||void 0===t||t.forEach((function(e){e.extBackComm&&o.viewid.push(e.extBackComm.viewid),o.s_pt.push(e.pt),o.s_aid.push(e.aid),o.s_trace_id.push(e.traceid)})),i.grid_feedback_info=o}return this.reportMMData(17045,{appid:Ng.gameAppId,weapp_path:Mg.weappPath,ad_unit_id:this.adUnitId,device_type:Ng.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:Ng.screenHeight,screen_width:Ng.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:dg.POS_ID_MAP[this.adType],service_type:Ng.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(n=e.isClickAd)&&void 0!==n?n:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(r=e.clickAdTimeMs)&&void 0!==r?r:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(i)})}},{key:"reportBehaviorButton",value:function(e){var t=e.button,n=e.playDuration,r=e.preloadVideo,i=e.preloadVideoSuccess,o=e.videoFirstPlay,a=e.cardFirstShow,s=e.clickCard,c=e.pressInterval,u=e.currentPlayUrl,l=e.lastFetchUrl,d=e.isEnded,f=e.videoDuration;return this.reportMMData(16e3,{click_button:t,play_duration:n,click_close_ts:+new Date,preload_video:r,preload_video_success:i,video_first_play_ts:o,card_first_show_ts:a,click_card_ts:s,press_interval:c,current_play_url:u,last_fetch_url:l,is_ended:d?1:0,video_duration:f})}},{key:"reportVideoLoadTime",value:function(e){var t=e.beginTime,n=void 0===t?0:t,r=e.endTime,i=void 0===r?0:r,o=e.departureTime,a=void 0===o?0:o,s=e.preloadVideo,c=void 0===s?0:s,u=e.preloadVideoSuccess,l=void 0===u?0:u,d=e.reportType,f=void 0===d?0:d,p=i-a-n;return p>0?this.reportMMData(15730,{load_begin_time:n,load_end_time:i,load_departure_time:a,load_cost_time:p,preload_video:c,preload_video_success:l,report_type:f}):Promise.resolve()}},{key:"reportRepeatClick",value:function(e){var t=e.slotId,n=e.costType,r=e.clkCnt,i=e.lastClkPeriod,o=e.retCode,a=e.costTime,s=e.pageStayTime,c=e.jsapiName;return this.reportMMData(15979,{slotid:t,costtype:n,clkcnt:r,currenttime:+new Date,lastclkperiod:i,retcode:o,costtime:a,pagestaytime:s,jsapiname:c})}},{key:"reportLandingTime",value:function(e){var t=e.slotId,n=e.costType,r=e.openTime,i=e.closeTime,o=e.stayTime,a=e.jsapiName,s=e.clickTime,c=e.clkCnt,u=e.retCode,l=e.costTime,d=e.actTypeInt,f=e.actTypeStr;return this.reportMMData(15980,{slotid:t,costtype:n,currenttime:s,opentime:r,closetime:i,staytime:o,jsapiname:a,clkcnt:c,retcode:u,costtime:l,act_type_int:d,act_type_str:f})}},{key:"reportVideoLastClick",value:function(e){var t=e.touchStartX,n=e.touchStartY,r=e.touchEndX,i=e.touchEndY,o=e.touchDuration,a=e.screenWidth,s=e.screenHeight;return this.reportMMData(17035,{touch_start_x:t,touch_start_y:n,touch_end_x:r,touch_end_y:i,touch_duration:o,screenwidth:a,screenheight:s})}},{key:"reportBannerLastClick",value:function(e){var t=e.lastClickArr,n=e.top,r=e.left,i=e.width,o=e.height,a=e.expMs,s=e.clickMs,c=e.bannerClkScreenX,u=e.bannerClkScreenY,l=e.lastShowTime;return this.reportMMData(18072,{last_clicks:t,banner_x:n,banner_y:r,banner_width:i,banner_height:o,exp_ms:a,clk_ms:s,banner_clk_screen_x:c,banner_clk_screen_y:u,last_show_time:l,slotid:dg.POS_ID_MAP[this.adType]})}},{key:"reportRelationFetchDuration",value:function(e){var t=e.startTime,n=e.showTime,r=e.endTime;return this.reportMMData(19429,{start_time:t,show_time:n,end_time:r,show_delay_duration:0===n?0:r-n,fetch_duration:r-t})}},{key:"reportMMClickPos",value:function(e){var t,n=e.clickPos;return this.reportMMData(20480,{slotid:dg.POS_ID_MAP[this.adType],costtype:(null===(t=this.data)||void 0===t?void 0:t.is_cpm)?1:2,currenttime:Date.now(),click_pos:n})}},{key:"reportADFunnelModel",value:function(e){var t=[e.adtype,e.stage].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:t,force:!0,immediately:!0})}},{key:"recordAnalyseBranchInfo",value:function(e){var t=e.branchId,n=e.branchDim;this.analyseBranchInfo={branchId:t,branchDim:n}}},{key:"resetAnalyseBranchInfo",value:function(){this.analyseBranchInfo=null}},{key:"reportAnalyseInfo",value:function(e){var t=dg.EXPOSURE_TYPE_MAP[this.adType]||"viewable";if(Ng.isWaGame&&e===t){var n=this.analyseBranchInfo;n&&("release"!==Ng.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}}},{key:"reportRewardGaussVideo",value:function(e){var t=e.useGaussVideo,n=e.useExpandStyle,r=e.videoUrl,i=e.gaussVideoUrl,o=e.expUseGaussVideo,a=e.expUseExpandStyle;this.reportMMData(21644,{use_gauss_video:t?1:0,video_url:r,gauss_video_url:i,use_expand_style:n?1:0,exp_use_gauss_video:o,exp_use_expand_style:a})}}]),e}();lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[String]),dv("design:returntype",void 0)],fv.prototype,"getTimePoint",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[String,Object]),dv("design:returntype",void 0)],fv.prototype,"setTimePoint",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportTimePoints",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportCloseAction",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportAdEntranceExposure",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportTouchClick",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportCancelRewardPlayablePage",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Number,Object]),dv("design:returntype",void 0)],fv.prototype,"reportMMData",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportAbnormalDetect",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportAdIDKey",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Error]),dv("design:returntype",void 0)],fv.prototype,"processStackMsg",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportAdIDKeyErrorData",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object,Object]),dv("design:returntype",void 0)],fv.prototype,"reportAdMonitorData",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportEndPage",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportAdFeedbackData",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportBehaviorButton",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportVideoLoadTime",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportRepeatClick",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportLandingTime",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportVideoLastClick",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportBannerLastClick",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportRelationFetchDuration",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportMMClickPos",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportADFunnelModel",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"recordAnalyseBranchInfo",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[]),dv("design:returntype",void 0)],fv.prototype,"resetAnalyseBranchInfo",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[String]),dv("design:returntype",void 0)],fv.prototype,"reportAnalyseInfo",null),lv([Tg(),dv("design:type",Function),dv("design:paramtypes",[Object]),dv("design:returntype",void 0)],fv.prototype,"reportRewardGaussVideo",null),function(e){e[e.kUnknown=0]="kUnknown",e[e.kVideo=1]="kVideo",e[e.kArticle=2]="kArticle"}(zg||(zg={})),function(e){e[e.EXPOSE=1]="EXPOSE",e[e.CLICK=2]="CLICK"}(Yg||(Yg={})),function(e){e[e.kDeviceUnknow=0]="kDeviceUnknow",e[e.kDeviceAndroid=1]="kDeviceAndroid",e[e.kDeviceIphone=2]="kDeviceIphone",e[e.kDeviceIpad=3]="kDeviceIpad",e[e.kDeviceTv=4]="kDeviceTv"}(qg||(qg={})),function(e){e[e.AppServiceType_NORMAL=1]="AppServiceType_NORMAL",e[e.AppServiceType_GAME=2]="AppServiceType_GAME"}(Kg||(Kg={})),function(e){e[e.AllOS=0]="AllOS",e[e.Ios=1]="Ios",e[e.Android=2]="Android",e[e.Winphone=3]="Winphone",e[e.JAVA=4]="JAVA",e[e.OS_UNKNOWN=5]="OS_UNKNOWN",e[e.SYMBIAN=6]="SYMBIAN",e[e.S40asha=7]="S40asha",e[e.Webwx=8]="Webwx",e[e.Blackberry=9]="Blackberry",e[e.Windows=10]="Windows"}(Jg||(Jg={})),function(e){e[e.kUnknownNetwork=0]="kUnknownNetwork",e[e.kWIFI=1]="kWIFI",e[e.k2G=2]="k2G",e[e.k3G=3]="k3G",e[e.k4G=4]="k4G",e[e.k5G=5]="k5G",e[e.kAll=10]="kAll"}(Xg||(Xg={})),function(e){e[e.kUnknownCarrier=0]="kUnknownCarrier",e[e.kCMCC=1]="kCMCC",e[e.kCUCC=2]="kCUCC",e[e.kCTCC=3]="kCTCC"}($g||($g={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CMNET=1]="CMNET",e[e.CMWAP=2]="CMWAP",e[e.THREEGNET=3]="THREEGNET",e[e.THREEGWAP=4]="THREEGWAP",e[e.UNINET=5]="UNINET",e[e.UNIWAP=6]="UNIWAP",e[e.WIFI=7]="WIFI",e[e.CTWAP=8]="CTWAP",e[e.CTNET=9]="CTNET",e[e.THREEGNET_UNINET=10]="THREEGNET_UNINET",e[e.THREEGWAP_UNIWAP=11]="THREEGWAP_UNIWAP",e[e.CTNET_CTWAP=12]="CTNET_CTWAP",e[e.THREEGNET_THREEGWAP_UNINET_UNIWAP=13]="THREEGNET_THREEGWAP_UNINET_UNIWAP",e[e.WIMAX=14]="WIMAX"}(Zg||(Zg={})),function(e){e[e.Default_Source=0]="Default_Source",e[e.MediaPlatform=1]="MediaPlatform",e[e.WeApp=2]="WeApp",e[e.Moments=3]="Moments",e[e.BizTimeLine=4]="BizTimeLine"}(Qg||(Qg={})),function(e){e[e.JSON=0]="JSON",e[e.XML=1]="XML"}(ev||(ev={})),function(e){e[e.Unknown_sys=-1]="Unknown_sys",e[e.Windows=0]="Windows",e[e.Ios=1]="Ios",e[e.Android=2]="Android"}(tv||(tv={})),function(e){e[e.Unknown_type=0]="Unknown_type",e[e.Wifi=1]="Wifi",e[e.TwoG=2]="TwoG",e[e.TreeG=3]="TreeG",e[e.FourG=4]="FourG",e[e.FiveG=5]="FiveG",e[e.Ethernet=6]="Ethernet"}(nv||(nv={})),function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(rv||(rv={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(iv||(iv={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(ov||(ov={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(av||(av={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(sv||(sv={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(cv||(cv={})),function(e){e[e.PRODUCTTYPE_UNKNOWN=0]="PRODUCTTYPE_UNKNOWN",e[e.PRODUCTTYPE_OPEN_PLATFORM_APP_MOB=12]="PRODUCTTYPE_OPEN_PLATFORM_APP_MOB",e[e.PRODUCTTYPE_APPLE_APP_STORE=19]="PRODUCTTYPE_APPLE_APP_STORE",e[e.PRODUCTTYPE_WECHAT=23]="PRODUCTTYPE_WECHAT",e[e.PRODUCTTYPE_JD_URL=25]="PRODUCTTYPE_JD_URL",e[e.PRODUCTTYPE_DP_SHOP=26]="PRODUCTTYPE_DP_SHOP",e[e.PRODUCTTYPE_WECHAT_ARTICLE=29]="PRODUCTTYPE_WECHAT_ARTICLE",e[e.PRODUCTTYPE_WECHAT_SHOP=30]="PRODUCTTYPE_WECHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_URL=31]="PRODUCTTYPE_WECHAT_URL",e[e.PRODUCTTYPE_WECHAT_CARD=36]="PRODUCTTYPE_WECHAT_CARD",e[e.PRODUCTTYPE_WECHAT_LBS=37]="PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_WECHAT_APP=38]="PRODUCTTYPE_WECHAT_APP",e[e.GDT_PRODUCTTYPE_WECHAT_LBS=39]="GDT_PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_LEAD_AD=43]="PRODUCTTYPE_LEAD_AD",e[e.PRODUCTTYPE_WECHAT_MINI_GAME=46]="PRODUCTTYPE_WECHAT_MINI_GAME",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.PRODUCTTYPE_WECHAT_CHANNELS=51]="PRODUCTTYPE_WECHAT_CHANNELS",e[e.PRODUCTTYPE_MINI_PROGRAM_WECHAT=52]="PRODUCTTYPE_MINI_PROGRAM_WECHAT"}(uv||(uv={}));var pv,hv,gv,vv=n(156);!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(pv||(pv={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(hv||(hv={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(gv||(gv={}));var _v,yv={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},mv={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},bv=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],wv=[pv.CRT_SIZE_WX_APPLICATION,pv.CRT_SIZE_WX_APPLICATION_NEW,pv.CRT_SIZE_WX_APPLICATION_X,pv.CRT_SIZE_WX_APPLICATION_CARD,pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916,pv.CRT_SIZE_TABLE_SCREEN_IMAGE,pv.CRT_SIZE_REWARD_LANDINGPAGE,pv.CRT_SIZE_INSERT_VIDEO,pv.CRT_SIZE_MULTI_POS_NEW_PIC,pv.CRT_SIZE_MULTI_POS_VEDIO,pv.CRT_SIZE_MULTI_POS_GRID,pv.CRT_SIZE_CPM_PIC,pv.CRT_SIZE_COVER_AD,pv.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,pv.CRT_SIZE_VERTICAL_VIDEO_NEW_916];!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(_v||(_v={}));var Ov=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Ev=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Sv=1,Tv=new Set,Iv=function(){function e(t){Object(N.default)(this,e),this.adProxy=t,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=Sv,Sv+=1,Tv.add(this.adUnitId)}return Object(oe.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"slotData",get:function(){return this.adProxy.getSlotData()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"reset",value:function(){this.lastVideoReportTime=0}},{key:"getLastClickTime",value:function(){return this.lastClickTime}},{key:"getLastAdReqTs",value:function(){return this.lastAdReqTs}},{key:"setLastExposureTime",value:function(e){this.lastExposureTime=e}},{key:"setLastClickTime",value:function(e){this.lastClickTime=e}},{key:"setLastAdReqTs",value:function(e){this.lastAdReqTs=e}},{key:"reportFollow",value:function(e){var t=this,n=e.result,r=5;return this.adProxy.isRewardedVideoAd()?r=6:[pv.CRT_SIZE_TABLE_SCREEN_IMAGE,pv.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(r=8),Object(ug.operateWXData)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[n],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:r}}).catch((function(e){throw t.reportAdMonitorData(vv.IDKEY.FOLLOW_REPORT_ERROR,e),e}))}},{key:"getExtraExpOrClkData",value:function(e){var t,n,r,i,o,a,s=this,c=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?c=e.multiList.map((function(e,t){return{idx:t,waid:s.datas[e].waid||""}})):this.data.waid&&(c=[{idx:0,waid:this.data.waid}]);var u=Object.assign(Object.assign({},Lg()),{weapp_enter_scene:(null===(t=null===w.default||void 0===w.default?void 0:w.default.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(c)}),l=Object.assign({},u),d=Object.assign({},u);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var f={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(n=e.multiList)||void 0===n||n.forEach((function(e){var t=s.datas[e];t.extBackComm&&f.viewid.push(t.extBackComm.viewid),f.s_pt.push(t.pt),f.s_aid.push(t.aid),f.s_trace_id.push(t.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:f.viewid}),s_trace_id:JSON.stringify(f.s_trace_id),s_aid:JSON.stringify(f.s_aid),s_pt:JSON.stringify(f.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var p=this.adProxy.adDataIndex;d.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(r=this.data.extBackComm)||void 0===r?void 0:r.viewid,box_index:p}}if("customAd"===this.adType){var h=null===(i=this.data.extBackComm)||void 0===i?void 0:i.sub_templ_id;h&&(l.sub_templ_id=h,d.sub_templ_id=h)}if("incentive-video"===this.adType&&this.data.isPlayable&&(l.is_playable=1,d.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){var g=e.videoData,v=g.currentTime,_=g.duration;(v||_)&&(d.video_play_time=v,d.video_duration=_)}if("grid"===this.adType)if("exposure"===e.reportType){var y={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(o=this.datas)||void 0===o||o.forEach((function(e){e.extBackComm&&y.viewid.push(e.extBackComm.viewid),y.s_pt.push(e.pt),y.s_aid.push(e.aid),y.s_trace_id.push(e.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:y.viewid}),s_trace_id:JSON.stringify(y.s_trace_id),s_aid:JSON.stringify(y.s_aid),s_pt:JSON.stringify(y.s_pt)}}else if("click"===e.reportType){var m=e.clickAdIndex||0;d.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(a=this.data.extBackComm)||void 0===a?void 0:a.viewid,box_index:m}}return{extExposureComm:l,extClickComm:d}}},{key:"reportExpOrClk",value:function(e){var t=this,n=3;if("exposure"===e.reportType?(n={showed:2,viewable:5,incentiveVideoCard:14}[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){var r=this.adProxy.adDataIndex;e.multiList.forEach((function(e){t.adProxy.setCurrentData(e),Object(O.invokeMethod)("adDataReport",{adInfo:t.adProxy.getTransmissionChainData({logtype:n})})})),this.adProxy.setCurrentData(r)}else Object(O.invokeMethod)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:n})});var i=this.getExtraExpOrClkData(e),o=i.extExposureComm,a=i.extClickComm,s=this.getExpOrClkCommonArgs(e),c="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(a)}:{exposure_type:dg.REPORT_EXPOSURE_TYPE_MAP[e.exposureType],ext_exposure_comm:JSON.stringify(o)};return Object(ug.operateWXData)({apiName:"advert_report",reqData:Object.assign(Object.assign(Object.assign({},s),c),{report_type:dg.REPORT_TYPE_MAP[e.reportType],weapp_extra_data:JSON.stringify(s.weapp_extra_data),ad_group_id:s.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:s.weapp_gh_id})})}},{key:"getExpOrClkCommonArgs",value:function(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:dg.POS_ID_MAP[this.adType],pos_type:dg.AD_TYPE_MAP[this.adType],sdk_version:Ng.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:Ng.startTime.valueOf(),wegame_enter_ts:Mg.enterForegroundTime.valueOf(),wegame_user_duration:Mg.gameDuration+(Date.now()-Mg.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:Object.assign(Object.assign({},this.getWeappExtraData()),e.weappExtraData||{})}}},{key:"reportClick",value:function(e){var t=this;return this.lastClickTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"click"},e)).catch((function(e){throw t.reportAdMonitorData(vv.IDKEY.CLICK_REPORT_ERROR,e),e}))}},{key:"reportExposure",value:function(e){var t=this;return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"exposure"},e)).catch((function(e){throw t.reportAdMonitorData(vv.IDKEY.EXPOSURE_REPORT_ERROR,e),e}))}},{key:"reportFlooringPage",value:function(e,t){var n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Ng.gameAppId,orig_weapp_id:this.pluginAppid?Ng.gameAppId:""},r=null==t?void 0:t.map((function(e){return Object.assign(Object.assign({},n),e)})),i={};return 1===e?i.rewared_video_ending_page_a=r:2===e&&(i.rewared_video_ending_page_b=r),Object(ug.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(i)}})}},{key:"reportAntifraud",value:function(e){var t=Object.assign(Object.assign({},e),{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Ng.gameAppId,orig_weapp_id:this.pluginAppid?Ng.gameAppId:"",network_type:Ng.adNetworkType,wechat_version:Ng.wechatVersion,platform:Ng.platform,system_version:Ng.systemVersion,device_orientation:Ng.deviceOrientation,wxapp_lib_version:Ng.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:Ng.brand||"",machine_type:Ng.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],Object(ug.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}},{key:"reportVideo",value:function(e){var t=e.playType,n=e.conditionType,r=e.muted,i=e.playDuration,o=e.videoDuration,a=e.rewardedTime,s=e.isRewarded,c=Object(ug.operateWXData)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[t],play_duration:i-this.lastVideoReportTime,video_duration:o,auto_play:!0,muted:r,rewarded_time:a&&Math.min(a,o),is_rewarded:s},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[n]}});return this.lastVideoReportTime=i,c}},{key:"getWxaReportDetail",value:function(e){var t=e.top,n=void 0===t?0:t,r=e.left,i=void 0===r?0:r;return{page_x:i||0,page_y:n||0,screen_x:i||0,screen_y:n||0,ad_number:Sv-1,ad_unit_number:Tv.size,ad_index:this.index,page_enter_time:Mg.enterForegroundTime.valueOf(),phone_screen_width:Ng.screenWidth,phone_screen_height:Ng.screenHeight}}},{key:"getWeappExtraData",value:function(){var e,t;return{weixin_version:Ng.wechatVersion,os_version:Ng.systemVersion,machine_brand:Ng.brand||"",machine_type:Ng.model,network_type:Ng.adNetworkType,start_ts:Ng.startTime.valueOf(),enter_ts:Mg.enterForegroundTime.valueOf(),user_duration:Mg.gameDuration+(Date.now()-Mg.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=w.default.host)||void 0===e?void 0:e.env,app_appid:null===(t=w.default.host)||void 0===t?void 0:t.appId}}},{key:"composeExposureCommonInfo",value:function(e){var t,n=e.top,r=void 0===n?0:n,i=e.left,o=void 0===i?0:i,a=e.width,s=void 0===a?0:a,c=e.height,u=void 0===c?0:c,l=e.adType,d=void 0===l?"incentive-video":l;try{t=this.data.weapp_info.original_id}catch(e){}var f=Object.assign({},Lg()),p=this.getWeappExtraData(),h=this.getWxaReportDetail({top:r,left:o}),g={report_type:0,pos_id:dg.POS_ID_MAP[this.adType],sdk_version:Ng.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:t,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:s,ad_h:u,from_game:1,from_h5:0,wegame_start_ts:Ng.startTime.valueOf(),wegame_enter_ts:Mg.enterForegroundTime.valueOf(),wegame_user_duration:Mg.gameDuration+(Date.now()-Mg.enterForegroundTime.getTime()),pos_type:dg.AD_TYPE_MAP[d],wxa_report_detail:h,weapp_extra_data:JSON.stringify(p),ext_exposure_comm:JSON.stringify(f)};return JSON.stringify(g)}},{key:"reportInstallFollow",value:function(e){var t=this.data.condition;t&&1===t.widget_gray_report_install_follow&&Object(ug.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}},{key:"reportAnalyseDebugInfo",value:function(e){var t=this,n=dg.ANALYSE_INFO_DEBUG_TYPE[this.adType];return n||this.reportAdMonitorData(vv.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,new Error("invalid reportType "+this.adType)),Object(ug.operateWXData)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:n}]}}).catch((function(e){t.reportAdMonitorData(vv.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,e)}))}}]),e}();function Av(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[]),Ev("design:returntype",void 0)],Iv.prototype,"getLastClickTime",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[]),Ev("design:returntype",void 0)],Iv.prototype,"getLastAdReqTs",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Number]),Ev("design:returntype",void 0)],Iv.prototype,"setLastExposureTime",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Number]),Ev("design:returntype",void 0)],Iv.prototype,"setLastClickTime",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Number]),Ev("design:returntype",void 0)],Iv.prototype,"setLastAdReqTs",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportFollow",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"getExpOrClkCommonArgs",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportClick",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportExposure",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object,Array]),Ev("design:returntype",void 0)],Iv.prototype,"reportFlooringPage",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportAntifraud",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportVideo",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",Object)],Iv.prototype,"getWxaReportDetail",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"composeExposureCommonInfo",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportInstallFollow",null),Ov([Tg(),Ev("design:type",Function),Ev("design:paramtypes",[Object]),Ev("design:returntype",void 0)],Iv.prototype,"reportAnalyseDebugInfo",null);var Cv=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},kv=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},xv=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Pv=function(){function e(t){Object(N.default)(this,e),this.adProxy=t,this.isAppInstalled=!1}return Object(oe.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"isValidCondition",get:function(){return this.adProxy.isValidCondition}},{key:"getFullRl",value:function(){var e=this.data.rl;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+="?viewid="+this.data.extBackComm.viewid:e+="&viewid="+this.data.extBackComm.viewid)}catch(e){}return e}},{key:"getFollowPageUrl",value:function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:Ng.isWaGame?147:140};return Object(Dg.addUrlParam)(t,n)}},{key:"isPrefetch",value:function(e){var t,n,r,i,o,a,s,c,u={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(i=null===(r=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===r?void 0:r.flooring_page)||void 0===i?void 0:i.page_url}[e],l={url:this.data.dest_type===av.DEST_TYPE_OUTER,jump_url:(null===(o=this.data.button_action)||void 0===o?void 0:o.jump_type)===av.DEST_TYPE_OUTER,playable_url:!0}[e];return u&&l&&Boolean(null===(c=null===(s=null===(a=this.data)||void 0===a?void 0:a.extBackComm)||void 0===s?void 0:s.material_handler_Info)||void 0===c?void 0:c.h5_preload_info[e])}},{key:"getTransmissionChainData",value:function(e){var t=e.logtype,n=void 0===t?3:t,r={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:n};return Object.keys(r).map((function(e){return e+"="+r[e]})).join("&")}},{key:"setAppInstallState",value:function(e){this.isAppInstalled=e}},{key:"land",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isButton,r=void 0!==n&&n;return xv(this,void 0,void 0,Vt.a.mark((function t(){var n,i,o,a,s,c,u,l,d,f,p,h,g,v,_,y,m=this;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.data,i=n.dest_type,o=n.product_type,a=n.url,!r){t.next=43;break}if(this.isPrefetch("jump_url")&&this.adProxy.reportAdMonitorData(vv.IDKEY.H5_PRELOAD_BUTTON_CLICKED),s=this.data.button_action,c=s.jump_type,u=s.jump_url,o!==hv.IOS){t.next=6;break}return t.abrupt("return",this.openAppStore());case 6:if(o!==hv.WE_CHAT){t.next=40;break}if(l=this.data.biz_info,d=l.user_name,!l.is_subscribed){t.next=12;break}if(10!==c){t.next=11;break}return t.abrupt("return",this.landPage(c,a));case 11:return t.abrupt("return",Object(ug.openUrl)({url:this.getFollowPageUrl(this.data,u),adInfo:this.getTransmissionChainData({logtype:3})}));case 12:return t.prev=12,t.next=15,this.adProxy.addContact({username:d,isWaGame:Ng.isWaGame});case 15:f=t.sent,p=this.data,h=p.ext_info,g=p.uxinfo;try{v=JSON.parse(h)}catch(e){}if(!(/ok|added/.test(f.errMsg)&&v&&v.guide_group_id&&g)){t.next=29;break}return t.prev=20,t.next=23,vg({guide_group_id:v.guide_group_id,uxinfo:g});case 23:this.adProxy.reportAdIDKey({key:vv.IDKEY.BIND_GUIDE_SUCCESS}),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(20),this.reportAdMonitorData(vv.IDKEY.BIND_GUIDE_ERROR,t.t0);case 29:return t.abrupt("return",f);case 32:if(t.prev=32,t.t1=t.catch(12),!/cancel/.test(t.t1.errMsg)){t.next=36;break}return t.abrupt("return",t.t1);case 36:throw this.reportAdMonitorData(vv.IDKEY.ADD_CONTACT_ERROR,t.t1),t.t1;case 38:t.next=41;break;case 40:return t.abrupt("return",this.landPage(c,u));case 41:t.next=53;break;case 43:if(this.isPrefetch("url")&&this.adProxy.reportAdMonitorData(vv.IDKEY.H5_PRELOAD_CARD_CLICKED),!([12,19].indexOf(o)>-1)){t.next=52;break}if(_=this.data.app_info.url_scheme,Ng.isIOS&&(y=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001})),!(_&&_.trim().length>0)){t.next=51;break}if(!Ng.isAndroid||this.isAppInstalled){t.next=50;break}return t.abrupt("return",this.landPage(i,a));case 50:return t.abrupt("return",this.adProxy.launchApplication({schemeUrl:_,isIosDirect:Ng.isIOS,appInfo:this.data.app_info,extraData:y}).catch((function(){return m.landPage(i,a)})));case 51:case 52:return t.abrupt("return",this.landPage(i,a));case 53:case"end":return t.stop()}}),t,this,[[12,32],[20,26]])})))}},{key:"landPage",value:function(e,t){var n,r=this;if(e===av.DEST_TYPE_APPDETAIL&&Ng.isIOS){var i=this.data.app_info.appinfo_url,o=JSON.stringify({aid:this.data.aid,ad_uid:null===(n=this.data.extBackComm)||void 0===n?void 0:n.uid,scene_id:4001});return this.adProxy.launchApplication({schemeUrl:i,extraData:o}).catch((function(){return Object(ug.openUrl)({url:i,adInfo:r.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(vv.IDKEY.OPEN_URL_ERROR,e),e}))}))}if(e===av.DEST_TYPE_BIZ)return Object(ug.openUrl)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(vv.IDKEY.OPEN_URL_ERROR,e),e}));if(e===av.DEST_TYPE_WECHAT_APPLET){var a=this.data,s=a.weapp_info.appid,c=a.traceid,u=a.aid,l=a.uxinfo;return Object(ug.navigateToMiniProgram)({appId:s,path:t,traceid:c,aid:u,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:l}).catch((function(e){throw r.reportAdMonitorData(vv.IDKEY.OPEN_WXAPP_ERROR,e),e}))}if(e===av.DEST_TYPE_CANVAS){var d=this.data,f=d.canvas_info,p=d.pos_type;return Object(ug.openADCanvas)({canvasInfo:f,posType:p}).catch((function(e){throw r.reportAdMonitorData(vv.IDKEY.OPEN_CANVAS_ERROR,e),e}))}if(10===e){var h=this.data.biz_info.user_name;return this.adProxy.openProfile({username:h}).catch((function(e){throw e}))}return e===av.DEST_TYPE_CHANNELS?this.jumpChannels("activity"):e===av.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live"):e===av.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile"):Object(ug.openUrl)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((function(e){throw r.reportAdMonitorData(vv.IDKEY.OPEN_URL_ERROR,e),e}))}},{key:"jumpChannels",value:function(e){var t;return xv(this,void 0,void 0,Vt.a.mark((function n(){var r,i,o,a,s,c,u,l,d,f;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null===(t=this.data)||void 0===t?void 0:t.extBackComm.channels_info,i=this.data,o=i.crt_size,a=i.apurl,s=i.rl,c=i.uxinfo,u={feedId:r.id,nonceId:r.nonce_id,finderUserName:r.username},l={activity:vv.IDKEY.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:vv.IDKEY.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:vv.IDKEY.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],d={activity:vv.IDKEY.OPEN_CHANNELS_ACTIVITY_FAILED,live:vv.IDKEY.OPEN_CHANNELS_LIVE_FAILED,userProfile:vv.IDKEY.OPEN_CHANNELS_USER_PROFILE_FAILED}[e],!r){n.next=38;break}if("activity"!==e||o!==pv.CRT_SIZE_REWARD_LANDINGPAGE){n.next=18;break}return n.prev=7,n.next=10,this.adProxy.openChannelsRewardedVideoAd(Object.assign(Object.assign({},u),{expReportLink:a,clkReportLink:s,uxInfo:c||"",reportInfo:this.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:Ng.screenWidth,height:Ng.screenHeight}),clickPosMap:{follow:_v.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:_v.MMOCAD_CLICKPOS_BIZ_LIKE,comment:_v.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:_v.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:_v.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:_v.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:this.getFeedbackUrl(Ng.isWaGame?1003:1005)}));case 10:return f=n.sent,this.reportAdMonitorData(l),n.abrupt("return",f);case 15:n.prev=15,n.t0=n.catch(7),this.reportAdMonitorData(d,n.t0);case 18:n.prev=18,n.t1=e,n.next="activity"===n.t1?22:"live"===n.t1?25:"userProfile"===n.t1?28:31;break;case 22:return n.next=24,this.adProxy.openChannelsActivity(u);case 24:return n.abrupt("break",31);case 25:return n.next=27,this.adProxy.openChannelsLive(u);case 27:return n.abrupt("break",31);case 28:return n.next=30,this.adProxy.openChannelsUserProfile(u);case 30:return n.abrupt("break",31);case 31:return this.reportAdMonitorData(l),n.abrupt("return");case 35:n.prev=35,n.t2=n.catch(18),this.reportAdMonitorData(d,n.t2);case 38:return this.reportAdMonitorData(d,new Error("channelsInfo is empty")),n.abrupt("return");case 40:case"end":return n.stop()}}),n,this,[[7,15],[18,35]])})))}},{key:"openAppStore",value:function(){var e,t=this,n=this.data.app_info,r=n.appinfo_url,i=n.url_scheme,o=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001});return i&&i.trim().length>0?this.adProxy.launchApplication({schemeUrl:i,isIosDirect:!0,appInfo:this.data.app_info,extraData:o}).catch((function(){return t.adProxy.launchApplication({schemeUrl:r,extraData:o}).catch((function(){return Object(ug.openUrl)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(vv.IDKEY.OPEN_URL_ERROR,e),e}))}))})):this.adProxy.launchApplication({schemeUrl:r,extraData:o}).catch((function(){return Object(ug.openUrl)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(vv.IDKEY.OPEN_URL_ERROR,e),e}))}))}},{key:"preloadLanding",value:function(){var e=this;try{if(6===this.data.dest_type){var t=[],n=[];if("grid"===this.adType?this.datas.forEach((function(e){var r;(null===(r=e.weapp_info)||void 0===r?void 0:r.appid)&&(t.push(e.weapp_info.appid),n.push(Av(e)))})):(t=[this.data.weapp_info.appid],n.push(Av(this.data))),Object(O.invokeMethod)("batchGetContact",{appIds:t}),Ng.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&Object(O.invokeMethod)("batchPreloadMiniProgram",{openParams:{visitScene:Mg.currentScene,businessScene:1,innerScene:1095},preloadList:n,success:function(t){e.reportAdMonitorData(vv.IDKEY.BATCHLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(vv.IDKEY.BATCHLOAD_ERROR,t)}});else if(Ng.isIOS){var r="app";this.data.product_type===hv.MINI_GAME&&(r="game"),this.isValidCondition("widget_gray_preload_env")&&(Ng.isAndroid||"app"===r)&&Object(O.invokeMethod)("preloadMiniProgramEnv",{type:r,success:function(t){e.reportAdMonitorData(vv.IDKEY.PRELOAD_MINIENV_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(vv.IDKEY.PRELOAD_MINIENV_ERROR,t)}}),this.isValidCondition("widget_gray_predownload_app")&&Object(O.invokeMethod)("predownloadMiniProgramPackage",{username:this.data.weapp_info.original_id+"@app",path:this.data.url,scene:1,success:function(t){e.reportAdMonitorData(vv.IDKEY.PREDOWNLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(vv.IDKEY.PREDOWNLOAD_ERROR,t)}})}}}catch(e){}}},{key:"checkFollow",value:function(e){return xv(this,void 0,void 0,Vt.a.mark((function t(){var n,r;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(ug.operateWXData)({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});case 2:return n=t.sent,r=n.rawData,t.abrupt("return",1===JSON.parse(r).is_subscribed);case 5:case"end":return t.stop()}}),t)})))}},{key:"getFeedbackUrl",value:function(e){var t=this.data.material_id_list||[],n=encodeURIComponent("["+t.toString()+"]")||"",r=Object(Dg.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:Ng.model,publisher_appid:Ng.gameAppId});if("grid"===this.adType){var i=[],o=[],a=[];this.datas.forEach((function(e){i.push(e.traceid),o.push(e.material_id_list||[]),a.push(e.aid)}));var s={traceid:JSON.stringify(i),source:e,aid:JSON.stringify(a),material_id:JSON.stringify(o),machine_type:Ng.model,publisher_appid:Ng.gameAppId};r=Object(Dg.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",s)}return r}},{key:"openFeedbackUrl",value:function(e){var t=this.getFeedbackUrl(e);return Object(ug.openUrl)({url:t})}},{key:"checkPreloadH5Page",value:function(){var e,t,n,r,i;return xv(this,void 0,void 0,Vt.a.mark((function o(){var a,s,c,u,l;return Vt.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=new Set,s=this.data.url,c=null===(e=this.data.button_action)||void 0===e?void 0:e.jump_url,u=null===(i=null===(r=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===r?void 0:r.flooring_page)||void 0===i?void 0:i.page_url,this.isPrefetch("url")&&("1"!==Object(Dg.getQueryString)(s).prefetch&&(s=Object(Dg.addUrlParam)(s,{prefetch:1}),this.data.url=s),a.add(s)),this.isPrefetch("jump_url")&&("1"!==Object(Dg.getQueryString)(c).prefetch&&(c=Object(Dg.addUrlParam)(c,{prefetch:1}),this.data.button_action.jump_url=c),a.add(c)),this.isPrefetch("playable_url")&&("1"!==Object(Dg.getQueryString)(u).prefetch&&(u=Object(Dg.addUrlParam)(u,{prefetch:1}),this.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=u),a.add(u)),!(l=Object(Ue.default)(a).map((function(e){return{url:e,bizScene:20002}}))).length){o.next=18;break}return o.prev=9,o.next=12,this.adProxy.preloadH5Page({urlList:l});case 12:this.reportAdMonitorData(vv.IDKEY.H5_PRELOAD_SUCCESS),o.next=18;break;case 15:o.prev=15,o.t0=o.catch(9),this.reportAdMonitorData(vv.IDKEY.H5_PRELOAD_FAILED,o.t0);case 18:case"end":return o.stop()}}),o,this,[[9,15]])})))}}]),e}();Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[String]),kv("design:returntype",void 0)],Pv.prototype,"isPrefetch",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Object]),kv("design:returntype",void 0)],Pv.prototype,"getTransmissionChainData",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Boolean]),kv("design:returntype",void 0)],Pv.prototype,"setAppInstallState",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Object]),kv("design:returntype",Promise)],Pv.prototype,"land",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Number,String]),kv("design:returntype",void 0)],Pv.prototype,"landPage",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[]),kv("design:returntype",void 0)],Pv.prototype,"openAppStore",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[]),kv("design:returntype",void 0)],Pv.prototype,"preloadLanding",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Number]),kv("design:returntype",Promise)],Pv.prototype,"checkFollow",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Number]),kv("design:returntype",void 0)],Pv.prototype,"getFeedbackUrl",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[Number]),kv("design:returntype",void 0)],Pv.prototype,"openFeedbackUrl",null),Cv([Tg(),kv("design:type",Function),kv("design:paramtypes",[]),kv("design:returntype",Promise)],Pv.prototype,"checkPreloadH5Page",null);var Dv=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Rv=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},jv=__safeway__.apiSign.makeApiSign,Nv=function(e){return function(t){return new Promise((function(n,r){e(Object.assign({},t,{success:n,fail:r}))}))}},Mv=function(e){var t=e.username,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("profile",{username:t,scene:75,success:n,fail:r,complete:i})},Lv=function(e){var t=e.username,n=e.isWaGame,r=e.success,i=e.fail,o=e.complete;Object(O.invokeMethod)("private_addContact",{username:t,scene:n?146:139,webtype:1,success:r,fail:i,complete:o})},Bv=function(e){var t=e.schemeUrl,n=e.isIosDirect,r=e.appInfo,i=e.extraData,o=e.success,a=e.fail,s=e.complete,c={};n&&(c.appId=r.app_id,c.installSchemeUrl=r.appinfo_url,c.installAction=0),i&&(c.extraData=i),Object(O.invokeMethod)("launchApplication",Object.assign(c,{schemeUrl:t,operateDirectly:1,success:o,fail:a,complete:s}))},Fv=function(e){var t=e.appUrl,n=e.success,r=e.fail,i=e.complete,o=jv("downloadAppInternal",{appUrl:t,operateDirectly:1,success:n,fail:r,complete:i});Object(O.invokeMethod)("downloadAppInternal",o)},Uv=function(e){var t=e.packageName,n=e.success,r=e.fail,i=e.complete,o=jv("getInstallState",{packageName:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i});Object(O.invokeMethod)("getInstallState",o)},Wv=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("queryDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Vv=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("pauseDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Gv=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("resumeDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i})},Hv=function(e){var t=e.downloadId,n=e.success,r=e.fail,i=e.complete,o=jv("installDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:i});Object(O.invokeMethod)("installDownloadTask",o)},zv=function(e){var t=e.isHide,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:i})},Yv=function(e){var t=e.isHide,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("private_setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:i})},qv=function(e){var t=e.resources,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("loadVideoResource",{resources:t,success:n,fail:r,complete:i})},Kv=function(e){var t=e.orientation,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("private_setPageOrientation",{orientation:t,success:n,fail:r,complete:i})},Jv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(O.invokeMethod)("hideVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},Xv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(O.invokeMethod)("showVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},$v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(O.invokeMethod)("showStatusBar",{success:t,fail:n,complete:r})},Zv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(O.invokeMethod)("hideStatusBar",{success:t,fail:n,complete:r})},Qv=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName;Object(O.invokeMethod)("openChannelsActivity",{feedId:i,nonceId:o,finderUserName:a,success:t,fail:n,complete:r})},e_=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName;Object(O.invokeMethod)("openChannelsLive",{feedId:i,nonceId:o,finderUserName:a,success:t,fail:n,complete:r})},t_=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.finderUserName;Object(O.invokeMethod)("openChannelsUserProfile",{finderUserName:i,success:t,fail:n,complete:r})},n_=function(e){var t=e.success,n=e.fail,r=e.complete,i=e.feedId,o=e.nonceId,a=e.finderUserName,s=e.uxInfo,c=e.expReportLink,u=e.clkReportLink,l=e.reportInfo,d=e.clickPosMap,f=e.feedbackUrl;Object(O.invokeMethod)("openChannelsRewardedVideoAd",{feedId:i,nonceId:o,finderUserName:a,uxInfo:s,expReportLink:c,clkReportLink:u,reportInfo:l,clickPosMap:d,feedbackUrl:f,success:t,fail:n,complete:r})},r_=function(e){var t=e.mixWithOther,n=void 0===t||t,r=e.obeyMuteSwitch,i=void 0===r||r,o=e.success,a=e.fail,s=e.complete;Object(O.invokeMethod)("setInnerAudioOption",{mixWithOther:n,obeyMuteSwitch:i,success:o,fail:a,complete:s})},i_=function(e){var t=e.urlList,n=e.success,r=e.fail,i=e.complete;Object(O.invokeMethod)("private_onWebPageUrlExposed",{urlList:t,success:n,fail:r,complete:i})},o_=Nv((function(e){var t=e.taskName,n=e.taskUrl,r=e.fileMd5,i=e.extInfo,o=e.success,a=e.fail,s=e.complete,c=jv("addDownloadTaskStraight",{taskName:t,taskUrl:n,fileMd5:r,extInfo:i,permissionBytes:[1,1,1],success:o,fail:a,complete:s});Object(O.invokeMethod)("addDownloadTaskStraight",c)})),a_=function e(){var t=this;Object(N.default)(this,e),this.setNavigationBarRightButton=Nv(zv),this.setMiniProgramNavigationBarRightButton=Nv(Yv),this.hideVirtualBottomNavigationBar=Nv(Jv),this.showVirtualBottomNavigationBar=Nv(Xv),this.showStatusBar=Nv($v),this.hideStatusBar=Nv(Zv),this.openProfile=Nv(Mv),this.addContact=Nv(Lv),this.downloadAppInternal=Nv(Fv),this.openChannelsActivity=Nv(Qv),this.openChannelsRewardedVideoAd=Nv(n_),this.openChannelsLive=Nv(e_),this.openChannelsUserProfile=Nv(t_),this.getNetworkType=Nv(it.getNetworkType),this.preloadH5Page=Nv(i_),this.innerPreloadVideo=Nv(qv),this.preloadVideo=function(e){return t.innerPreloadVideo({resources:e})},this.innerLaunchApplication=Nv(Bv),this.launchApplication=function(e){var n="string"==typeof e?{schemeUrl:e}:e;return t.innerLaunchApplication(n)},this.innerGetInstallState=Nv(Uv),this.getInstallState=function(e){return t.innerGetInstallState({packageName:e})},this.innerQueryDownloadTask=Nv(Wv),this.queryDownloadTask=function(e){return t.innerQueryDownloadTask({downloadId:e})},this.innerPauseDownloadTask=Nv(Vv),this.pauseDownloadTask=function(e){return t.innerPauseDownloadTask({downloadId:e})},this.innerResumeDownloadTask=Nv(Gv),this.resumeDownloadTask=function(e){return t.innerResumeDownloadTask({downloadId:e})},this.innerInstallDownloadTask=Nv(Hv),this.installDownloadTask=function(e){return t.innerInstallDownloadTask({downloadId:e})},this.innerSetPageOrientation=Nv(Kv),this.setPageOrientation=function(e){return t.innerSetPageOrientation({orientation:e})},this.innerSetInnerAudioOption=Nv(r_),this.setInnerAudioOption=function(e,n){return t.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:n})}};function s_(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c_(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c_(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Dv([Tg(),Rv("design:type",Object)],a_.prototype,"setNavigationBarRightButton",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"setMiniProgramNavigationBarRightButton",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"hideVirtualBottomNavigationBar",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"showVirtualBottomNavigationBar",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"showStatusBar",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"hideStatusBar",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"openProfile",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"addContact",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"downloadAppInternal",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"openChannelsActivity",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"openChannelsRewardedVideoAd",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"openChannelsLive",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"openChannelsUserProfile",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"getNetworkType",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"preloadH5Page",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"preloadVideo",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"launchApplication",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"getInstallState",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"queryDownloadTask",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"pauseDownloadTask",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"resumeDownloadTask",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"installDownloadTask",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"setPageOrientation",void 0),Dv([Tg(),Rv("design:type",Object)],a_.prototype,"setInnerAudioOption",void 0);var u_,l_=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},d_=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(R.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},f_=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},p_=function(){function e(t){var n=this,r=t.adUnitId,i=t.adType,o=t.pluginAppid,a=void 0===o?"":o;Object(N.default)(this,e),this.slotData={},this.lastAdRetCode=0,this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=Mg.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new a_,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==i&&Fg(),this.adUnitId=r,this.adType=i,this.pluginAppid=Ng.isWaGame?"":a,this.mmReporter=new fv(this),this.cgiReporter=new Iv(this),this.lander=new Pv(this),this.bindProxyMethods(),this.setTimePoint("p1"),Object(Og.onWxAdUserCaptureScreen)((function(e){if(e.webviewId===Mg.currentWebviewId&&n.data&&n.isViewable){var t=n.data.uxinfo;Object(_g.reportUserCaptureScreen)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:4,uxinfo:t,url:e.path?e.path:"index.html"})}}))}return Object(oe.default)(e,[{key:"bindProxyMethods",value:function(){for(var e=this,t=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander],n=function(){var t,n=i[r],o=s_(Object(Dg.getMembers)(n));try{var a=function(){var r,i,o,a=t.value;i=a,(null===(o=(r=n)&&r[Sg])||void 0===o?void 0:o.has(i))&&(e[a]=function(){return n[a].apply(n,arguments)})};for(o.s();!(t=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}},r=0,i=t;r<i.length;r++)n()}},{key:"isLimitRequest",value:function(){return 0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}},{key:"convertTestAdData",value:function(e){var t,n;try{var r=Object(Dg.cloneDeep)(e),i=JSON.parse(r.crt_exp_info);if(r.crtExpInfo=i,1002===i.exp_type){if(null===(t=r.wx_game_video)||void 0===t?void 0:t.wxgame_video_card){var o=JSON.parse(i.exp_data);r.wx_game_video.wxgame_video_card.flooring_page=o}}else if(1001===i.exp_type){r.profile_exp=!0;var a=i.exp_data&&"string"==typeof i.exp_data?JSON.parse(i.exp_data):i.exp_data;r.dest_type=a.dest_type;var s={};if(r.button_action)try{s=JSON.parse(e.button_action)}catch(e){}s.jump_type=a.jump_type,r.button_action=JSON.stringify(s)}else if(105===i.exp_type)r.ad_style_data=i.exp_data;else if(106===i.exp_type){var c=i.exp_data&&"string"==typeof i.exp_data?JSON.parse(i.exp_data):i.exp_data;Object(Dg.mergeDeep)(r,c),r.common_exp=!0}else if(i.exp_type&&[108,109,2001].includes(i.exp_type))r.ad_dynamic_list=i.exp_data;else if(i.crt_size&&[pv.CRT_SIZE_WX_APPLICATION_NEW,pv.CRT_SIZE_WX_APPLICATION_X].includes(i.crt_size)){if(r.crt_size=i.crt_size,r.ad_width=i.width,r.material_width=i.width,r.ad_height=i.height,r.material_height=i.height,r.image_url=i.image_url,i.dest_url&&r.url&&[1,3,6].includes(r.dest_type)){var u=Object(Dg.getQueryString)(r.url),l={};u.weixinadkey&&(l.weixinadkey=u.weixinadkey),u.ticket&&(l.ticket=u.ticket),u.gdt_vid&&(l.gdt_vid=u.gdt_vid),u.weixinadinfo&&(l.weixinadinfo=u.weixinadinfo),r.url=Object(Dg.addUrlParam)(i.dest_url,l)}r.watermark_text=i.watermark||""}else i.landpage_type&&(null===(n=r.wx_game_video)||void 0===n?void 0:n.wxgame_video_card)&&(r.wx_game_video.wxgame_video_card.flooring_page=i);return r}catch(t){return e}}},{key:"getFetchArgs",value:function(e){var t,n,r=e.isAdInterval,i={scene_type:Mg.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:Ng.gameAppId,orig_weapp_id:this.pluginAppid?Ng.gameAppId:"",weapp_path:Mg.weappPath,pos_id:"",network_type:Ng.adNetworkType,orientation:{landscape:1,portrait:2}[Ng.deviceOrientation],sdk_version:Ng.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:Ng.startTime.valueOf(),wxa_enter_ts:Mg.enterForegroundTime.valueOf(),weixin_version:Ng.wechatVersion,os_version:Ng.systemVersion,machine_type:Ng.model,is_ad_interval:!!r,env:null===(t=w.default.host)||void 0===t?void 0:t.env,app_appid:null===(n=w.default.host)||void 0===n?void 0:n.appId})};i.pos_id=dg.POS_ID_MAP[this.adType];var o={};return"grid"===this.adType?o.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(o.splash_ad={count:String(5)},delete i.appid):"customAd"===this.adType&&(o={is_adunit_tmpl:!0}),Object(A.isIn3rdApp)()&&(o.in_3rd_app=1),i.ext_slot_custom_comm=JSON.stringify(o),i}},{key:"validateFetchEnv",value:function(){if(Object(A.isIn3rdApp)()&&this.reportAdMonitorData(vv.IDKEY.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}},{key:"validateFetchRes",value:function(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}},{key:"validateCrtSize",value:function(e){var t=e.pt,n=e.crt_size,r=bv.includes(t),i=wv.includes(n);if(!r&&!i){if(n&&!i)throw{errMsg:"unexpected advertisement crt_size "+n};throw{errMsg:"unexpected advertisement type "+t}}}},{key:"handleAdDataDone",value:function(){this.reportAdMonitorData(vv.IDKEY.AD_FETCH_SUCCESS)}},{key:"handleAdDataError",value:function(e){this.reportAdMonitorData(vv.IDKEY.AD_FETCH_SUCCESS,e)}},{key:"handleWaidForList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};if(t.length<1)return Promise.resolve(n);var r=[];return null==t||t.forEach((function(e){r.push(cg(e.apkName).then((function(t){return Object.assign(Object.assign({},t),{aid:e.aid})})))})),Promise.race([Promise.all(r).then((function(e){return e.forEach((function(e){var t=e.waid,r=e.aid,i=void 0===r?"":r;t&&i&&(n[i]=t)})),n})).catch((function(t){return e.reportAdMonitorData(vv.IDKEY.READ_ADINFOS_ERROR,t),n})),Object(lg.timeout)(2e3).then((function(){return n}))])}},{key:"handleBulkSaveMaterials",value:function(e){var t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?Object(Eg.bulkSaveMaterials)(t):Promise.resolve()}},{key:"getSplashAdMaterialList",value:function(e){var t,n,r=[],i=(null==e?void 0:e.crtInfo[0])||{},o=e.rerankingExtInfo.material_hash||"",a=(null==i?void 0:i.image_url)||"",s=(null===(t=null==i?void 0:i.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null===(n=null==i?void 0:i.card_info)||void 0===n?void 0:n.material_blur_url)||"",u=dg.WX_AD_PATH+"/"+e.aid+"_"+o+".png";if(o&&r.push({url:a,fileName:e.aid+"_"+o+".png",filePath:u}),s){var l=dg.WX_AD_PATH+"/"+e.aid+"_"+o+"_pure_color.png";o&&r.push({url:s,fileName:e.aid+"_"+o+"_pure_color.png",filePath:l})}if(c){var d=dg.WX_AD_PATH+"/"+e.aid+"_"+o+"_blur.png";o&&r.push({url:c,fileName:e.aid+"_"+o+"_blur.png",filePath:d})}return r}},{key:"handleAdInfosIndexCache",value:function(e,t,n){return f_(this,void 0,void 0,Vt.a.mark((function r(){var i;return Vt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.handleWaidForList(e);case 3:i=r.sent,r.next=8;break;case 6:r.prev=6,r.t0=r.catch(0);case 8:return t.deviceInfo=Lg(),t.waidMap=i,this.reportAdMonitorData(vv.IDKEY.READ_ADINFOS_SUCCESS,{adInfos:t}),r.prev=11,r.next=14,Object(Eg.saveAdDataToFile)(t,n);case 14:return r.abrupt("return",this.reportAdMonitorData(vv.SPLASHAD_IDKEY.WRITE_ADINFOS_SUCCESS,{adInfos:t}));case 17:return r.prev=17,r.t1=r.catch(11),r.abrupt("return",this.reportAdMonitorData(vv.SPLASHAD_IDKEY.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:this.processStackMsg(r.t1)}));case 20:case"end":return r.stop()}}),r,this,[[0,6],[11,17]])})))}},{key:"handleSplashAd",value:function(e){return f_(this,void 0,void 0,Vt.a.mark((function t(){var n,r,i,o,a,s,c,u,l,d,f,p=this;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.reportAdMonitorData(vv.SPLASHAD_IDKEY.dataLoadSuccess),r=0,i=[],o=[],a=[],s=Object(lg.getTodayFormat)(),c=s+"_exposure_times",u=dg.WX_AD_PATH+"/adinfos.txt",n={slot_id:dg.POS_ID_MAP[this.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0},Object(mt.default)(n,c,0),Object(mt.default)(n,"requestInQueue","true"),l=n,t.prev=9,d=e.advertisement_info.length>0&&e.advertisement_info.map((function(e,t){var n,s,u={},d=p.handleAdData(e),f=d.rerankingExtInfo.material_hash||"";u.material_hash=d.rerankingExtInfo.material_hash||"",u.tid=d.rerankingExtInfo.tid.toString()||"",u.aid=d.aid,u.trace_id=d.traceid,l.ads.push(u),l.total_exposure_times=d.rerankingExtInfo.total_exposure_times||0,l[c]=d.rerankingExtInfo[c]||0;var h=null===(n=d.condition)||void 0===n?void 0:n.widget_gray_splash_data_channel_parallel;l.requestInQueue=h?"false":"true",l.materialHashMap[d.aid]=f;var g=d.crtInfo[0]||{};d.crtInfo&&(l.crtSizeMap[d.aid]=g.width>g.height?"landscape":"portrait");var v=p.getSplashAdMaterialList(d);o=o.concat(v),r+=0===t?v.length:0;var _=dg.WX_AD_PATH+"/"+d.aid+".txt";if(i.push(Object(Eg.saveAdDataToFile)(d,_)),d.product_type===hv.ANDROID){var y=null===(s=d.appInfo)||void 0===s?void 0:s.apkName;a.push({apkName:y,aid:d.aid})}return d})),this.datas=d,t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(9),this.reportAdMonitorData(vv.SPLASHAD_IDKEY.handleDataFail,t.t0),t.t0;case 18:return f=o.slice(0,r),t.next=21,Object(Eg.bulkSaveMaterials)(f);case 21:return i.push(Object(Eg.bulkSaveMaterials)(o)),i.push(this.handleAdInfosIndexCache(a,l,u)),Promise.all(i).then((function(){p.reportAdMonitorData(vv.SPLASHAD_IDKEY.dataPreloadSuccess),Object(Eg.removeOutdatedData)(dg.WX_AD_PATH).catch((function(e){return p.reportAdMonitorData(vv.SPLASHAD_IDKEY.removeFileDataFail,e)}))})).catch((function(e){throw p.reportAdMonitorData(vv.SPLASHAD_IDKEY.dataPreloadFail,e),e})),t.abrupt("return",this.datas[0]);case 25:case"end":return t.stop()}}),t,this,[[9,14]])})))}},{key:"handleCustomAd",value:function(e){var t=this,n=e.advertisement_info.map((function(e,n){var r,i,o,a=function(e){if(0===n)throw e},s=null,c=t.handleAdData(e),u=c.crtInfo,l=c.button_action,d=c.product_type,f=c.dest_type,p=c.crt_size;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)o=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{var h=JSON.parse(c.reranking_ext_info);h.refresh_time&&(o=h.refresh_time)}catch(e){}if(null===(r=null==c?void 0:c.extBackComm)||void 0===r?void 0:r.tmpl_info)try{var g=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(g.tmpl_content),i=Number(c.extBackComm.sub_templ_id)}catch(e){t.reportAdMonitorData(vv.CUSTOMAD_IDKEY.TPL_PARSE_FAILED),a({errMsg:"custom template error",errCode:dg.CUSTOMAD_ERROR_CODE.ERR_TPL_PARSE})}else t.reportAdMonitorData(vv.CUSTOMAD_IDKEY.TPL_LOAD_FAILED),a({errMsg:"no custom template",errCode:dg.CUSTOMAD_ERROR_CODE.ERR_TPL_NONE});return Object.assign(Object.assign({},e),{crtInfo:u,button_action:l,product_type:d,dest_type:f,crt_size:p,condition:c.condition,template:s,subTemplId:i,refreshTime:o,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(vv.CUSTOMAD_IDKEY.LOAD_SUCCESS),n.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=n,this.setCurrentData(0),n[0]}},{key:"handleGridAd",value:function(e){var t=this;if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(vv.IDKEY.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};var n=e.advertisement_info.map((function(e,n){var r=t.handleAdData(e);return r._isGrid=!0,r._gridInfo={row:5===t.slotData.gridCount?1:2,column:5===t.slotData.gridCount?5:4,index:n},r}));this.datas=n,this.setCurrentData(0),this.fetchRetryCount=0;var r,i=s_(this.datas);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.crt_size!==pv.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:"unexpected advertisement crt_size "+o.crt_size}}}catch(e){i.e(e)}finally{i.f()}return this.reportAdMonitorData(vv.IDKEY.AD_GRID_LOAD_SUCCESS),this.datas}},{key:"handleInterstitialAd",value:function(e){var t=JSON.parse(e.image_url),n=Object.assign(Object.assign({},t[0]||{}),Object(Dg.pick)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo"]));if(e.crt_size===pv.CRT_SIZE_INSERT_VIDEO){var r="0",i=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(i)&&(r=RegExp.$1),this.data.wx_game_video={short_video:{viewid:r}}}return this.convertedAdData=n,n}},{key:"handleRewardedVideoAd",value:function(e){var t,n,r,i,o;e.crt_size===pv.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);var a=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===a.length&&a.push({wxgame_video_card:{}});var s=Object(Co.default)(a,1)[0],c=s.wxgame_video_card,u=c.head_bg_img,l=c.mp_tag_type,d=s.wxgame_gauss_video,f=e.canvas_info,p=e.wx_game_video,h=p.short_video,g=p.wxgame_video_card,v=g.show_time,_=g.thumb,y=g.title,m=g.desc,b=g.flooring_page,w=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)w=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{var O=JSON.parse(e.reranking_ext_info);O.rewarded_time&&(w=O.rewarded_time)}catch(e){}w=Math.floor(1e3*w);var E=h,S="portrait"===Ng.deviceOrientation,T=e.crt_size===pv.CRT_SIZE_REWARD_VEDIO916,I=S!==T&&[pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&![3,4].includes(null==b?void 0:b.landpage_type),A=!1;(null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==d?void 0:d.video_url)&&S!==T&&[pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(I||S)&&(E=Object.assign(Object.assign({},d),{video_duration:d.video_duration_ms}),A=!0),this.reportRewardGaussVideo({useGaussVideo:A,useExpandStyle:I,expUseGaussVideo:null!==(r=null===(n=e.condition)||void 0===n?void 0:n.widget_gray_reward_use_gauss_blur)&&void 0!==r?r:0,expUseExpandStyle:1,videoUrl:null!==(i=null==h?void 0:h.video_url)&&void 0!==i?i:"",gaussVideoUrl:null!==(o=null==d?void 0:d.video_url)&&void 0!==o?o:""}),(null==d?void 0:d.video_url)&&this.reportAdMonitorData(vv.IDKEY.REWARD_GAUSS_EXISTS),A&&I?this.reportAdMonitorData(vv.IDKEY.REWARD_USE_GAUSS_AND_EXPAND_STYLE):A?this.reportAdMonitorData(vv.IDKEY.REWARD_USE_GAUSS):I&&this.reportAdMonitorData(vv.IDKEY.REWARD_USE_EXPAND_STYLE),b&&[3,4].indexOf(b.landpage_type)>-1&&(this.data.isPlayable=!0);var C=Object.assign({crtInfo:a[0],canvas_info:f,type:yv[e.pt],video:this.mapRewardVideoFields(E),shortVideo:this.mapRewardVideoFields(h),rewardedTime:w,isGaussBlur:A,isExpandStyle:I,card:{icon:_,name:y,wording:m,headBgImg:u,mpTagType:l,showTime:v},flooringPage:b},Object(Dg.pick)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));return this.convertedAdData=C,C}},{key:"mapRewardVideoFields",value:function(e){return{poster:e.thumb_url,src:e.video_url,duration:e.video_duration,width:e.thumb_width,height:e.thumb_height}}},{key:"handleRewardedLandingPage",value:function(e){var t,n=Ng.isAndroid&&w.default.clientVersion>=654315008||Ng.isIOS&&w.default.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{var r=e.canvas_info,i=Qh()(r.ad_info_xml).root,o=Object(lg.getAdDataViewId)(e),a=this.composeExposureCommonInfo({top:0,left:0,width:Ng.screenWidth,height:Ng.screenHeight});i.children.push({name:"viewid",children:[],attributes:{},content:o},{name:"commInfo",children:[],attributes:{},content:a});var s=wg(i,!0);this.data.canvas_info.ad_info_xml=s,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}},{key:"handleBannerAd",value:function(e){var t,n,r=e.pt,i=e.crt_size,o=e.image_url,a=e.material_width,s=e.material_height,c=e.ad_width,u=e.ad_height,l=e.use_style_data,d=e.hint_txt,f=e.watermark_type,p=yv[r];l?(t=c,n=u):[pv.CRT_SIZE_WX_APPLICATION,pv.CRT_SIZE_WX_APPLICATION_NEW,pv.CRT_SIZE_WX_APPLICATION_X].includes(i)?(t=(c||a)/2,n=(u||s)/2):i===pv.CRT_SIZE_WX_APPLICATION_CARD&&(t=c,n=u);var h=Object.assign({type:p,crt_size:i,useStyleData:l,watermark:mv[f],width:t,height:n,image:{src:o,width:a,height:s},wording:d},Object(Dg.pick)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=h,h}},{key:"extractJson",value:function(e,t,n,r){var i=null!=n?n:t;if(e[i]&&"string"==typeof e[i])try{e[t]=JSON.parse(e[i])}catch(n){e[t]=null!=r?r:{}}else null!=r&&(e[t]=r)}},{key:"buildWechatInfo",value:function(e){if(e.product_type===hv.WE_CHAT){var t=e.biz_appid,n=e.biz_info,r=n.nick_name,i=n.is_subscribed;return{icon:n.head_img,nickname:r,uin:n.biz_uin,isFollowed:i,biz_appid:t}}return{}}},{key:"buildAppInfo",value:function(e){var t=e.product_type;if([hv.ANDROID,hv.IOS].includes(t)){var n=e.app_info;return{appName:n.app_name,apkName:n.apk_name,apkUrl:n.apk_url,appMd5:n.app_md5,iconUrl:n.icon_url,urlScheme:n.url_scheme,versionCode:n.version_code,channelId:n.channel_id,desc:n.desc}}return{}}},{key:"handleAdData",value:function(e){var t,n=this;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};var r=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):Object(Dg.cloneDeep)(e),i=r;if(r.crt_size&&(i.crt_size=Number(r.crt_size)),this.extractJson(i,"crtInfo","crt_info"),this.extractJson(i,"extBackComm","ext_back_comm"),this.extractJson(i,"button_action","button_action",{}),this.extractJson(i,"adStyleData","ad_style_data",""),this.extractJson(i,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(i,"extInfo","ext_info"),this.extractJson(i,"adDynamicList","ad_dynamic_list"),r.flow_exp_info&&!this.isSplashAd())try{i.condition=hg(r.flow_exp_info),this.handleSplashAdFetchLog(i.condition)}catch(e){}if(i.adStyleData&&[pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916,pv.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(i.crt_size)){i.use_style_data=!0;var o=i.adStyleData;r.ad_width=o.width,r.ad_height=o.height,o.widgets.forEach((function(e){var t=r.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(i);var a=r.button_action;if(a.button_text=a.button_text||"查看",r.watermark_text=r.watermark_text||"去逛逛",18001===(null===(t=null==i?void 0:i.extInfo)||void 0===t?void 0:t.page_type)){var s={gdt_vid:r.traceid||"",uxinfo:r.uxinfo||"",ad_token:r.ad_token||"",rl:r.rl||""};r.url=Object(Dg.addUrlParam)(r.url,s)}var c=this.buildWechatInfo(i),u=this.buildAppInfo(i);return r.product_type===hv.ANDROID&&cg(u.apkName).then((function(e){var t=e.waid;i.waid=t,n.reportAdMonitorData(vv.IDKEY.GET_WAID_SUCCESS)})).catch((function(e){n.reportAdMonitorData(vv.IDKEY.GET_WAID_ERROR,e)})),Object.assign(Object.assign({},i),{app:c,appInfo:u})}},{key:"handleSplashAdFetchLog",value:function(e){this.handledInNewFetch||(this.handledInNewFetch=!0,Object(Eg.handleSplashAdFetchLog)(e))}},{key:"handleOperateWXData",value:function(e){var t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?Object(ug.adOperateWXData)(t):Object(ug.operateWXData)(t)}},{key:"processFetch",value:function(e,t){return f_(this,void 0,void 0,Vt.a.mark((function n(){var r,i,o,a,s,c;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validateFetchEnv(),!(Object.keys(t).length>0)){n.next=5;break}Hg(t),n.next=11;break;case 5:return Ng.deviceOrientation=Bg(),n.next=8,this.getNetworkType();case 8:r=n.sent,i=r.networkType,Ng.adNetworkType=i;case 11:return o=this.getFetchArgs({isAdInterval:e}),this.setLastAdReqTs(+new Date),this.setLastExposureTime(0),this.setLastClickTime(0),this.setTimePoint("p2"),n.prev=16,n.next=19,this.handleOperateWXData(o);case 19:if(a=n.sent,this.fetchPromise=null,this.fetchRetryCount=0,this.handledInNewFetch=!1,this.setTimePoint("p3"),a=JSON.parse(a.rawData),this.validateFetchRes(a),!this.isSplashAd()){n.next=28;break}return n.abrupt("return",this.handleSplashAd(a));case 28:if(!this.isGridAd()){n.next=30;break}return n.abrupt("return",this.handleGridAd(a));case 30:if(!this.isCustomAd()){n.next=32;break}return n.abrupt("return",this.handleCustomAd(a));case 32:if(s=this.handleAdData(a.advertisement_info[0]),this.data=s,this.checkDuplicateRecommendedAds(s.product_type,s.app,s.appInfo),!this.isInterstitialAd(s)){n.next=37;break}return n.abrupt("return",this.handleInterstitialAd(s));case 37:if(!this.isRewardedVideoAd(s)){n.next=39;break}return n.abrupt("return",this.handleRewardedVideoAd(s));case 39:return n.abrupt("return",this.handleBannerAd(s));case 42:n.prev=42,n.t0=n.catch(16),c="";try{c=JSON.parse(n.t0).errMsg}catch(e){}if(this.fetchPromise=null,!(0===c.indexOf("getAdData:fail")&&this.fetchRetryCount<1)){n.next=50;break}return this.fetchRetryCount+=1,n.abrupt("return",this.fetch(e));case 50:throw this.isBannerAd()?this.reportAdMonitorData(vv.IDKEY.AD_BANNER_LOAD_ERROR,n.t0):this.isRewardedVideoAd()?this.reportAdMonitorData(vv.IDKEY.AD_VIDEO_LOAD_ERROR,n.t0):this.isInterstitialAd()?this.reportAdMonitorData(vv.IDKEY.AD_INTERSTITIAL_LOAD_ERROR,n.t0):this.isGridAd()?this.reportAdMonitorData(vv.IDKEY.AD_GRID_LOAD_ERROR,n.t0):this.isCustomAd()?this.reportAdMonitorData(vv.CUSTOMAD_IDKEY.LOAD_FAILED,n.t0):this.isSplashAd()&&this.reportAdMonitorData(vv.SPLASHAD_IDKEY.dataLoadFail,n.t0),n.t0;case 52:case"end":return n.stop()}}),n,this,[[16,42]])})))}},{key:"checkDuplicateRecommendedAds",value:function(e,t,n){return f_(this,void 0,void 0,Vt.a.mark((function r(){var i,o,a,s,c,u,l,d,f,p,h,g,v;return Vt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=[],o="0",a=decodeURIComponent(this.data.apurl),/viewid=([^&]+)/.test(a)&&(o=RegExp.$1),s={conv_status:i},c={},r.next=8,Gg;case 8:if(u=r.sent,l=u.imei,d=u.idfa,f={viewid:o,app_status:0,follow_status:0,imei:l,idfa:d},e!==hv.WE_CHAT){r.next=20;break}if(c.ad_type=1,c.ad_id=t.biz_appid,f.follow_status=t.isFollowed?2:1,!t.isFollowed){r.next=18;break}return r.abrupt("return",this.reportAdMonitorData(vv.IDKEY.AD_FOLLOWED,{adInfo:c}));case 18:r.next=37;break;case 20:if(e!==hv.ANDROID){r.next=37;break}return p=n.apkName,h=n.versionCode,r.prev=22,r.next=25,this.getInstallState(p);case 25:g=r.sent,v=g.isInstalled&&(void 0===g.versionCode||g.versionCode>=h),c.ad_type=2,c.ad_id=p,f.app_status=v?2:1,v&&this.reportAdMonitorData(vv.IDKEY.AD_INSTALLED,{adInfo:c}),r.next=37;break;case 33:r.prev=33,r.t0=r.catch(22),f.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0});case 37:i.push(f),this.reportInstallFollow(s);case 39:case"end":return r.stop()}}),r,this,[[22,33]])})))}},{key:"getAdType",value:function(){return this.adType}},{key:"getAdUnitId",value:function(){return this.adUnitId}},{key:"getPluginAppid",value:function(){return this.pluginAppid}},{key:"getSlotData",value:function(){return this.slotData}},{key:"getDeviceInfo",value:function(){return Ng}},{key:"isBannerAd",value:function(){return"banner"===this.adType}},{key:"isRewardedVideoAd",value:function(e){return"incentive-video"===this.adType&&(!e||[pv.CRT_SIZE_REWARD_VEDIO169,pv.CRT_SIZE_REWARD_VEDIO916,pv.CRT_SIZE_VERTICAL_VIDEO_NEW_916,pv.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}},{key:"isInterstitialAd",value:function(e){return"interstitialAd"===this.adType&&(!e||[pv.CRT_SIZE_TABLE_SCREEN_IMAGE,pv.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}},{key:"isGridAd",value:function(){return"grid"===this.adType}},{key:"isCustomAd",value:function(){return"customAd"===this.adType}},{key:"isSplashAd",value:function(){return"splashAd"===this.adType}},{key:"getProgramStartTime",value:function(){return Ng.startTime}},{key:"getWebviewInfo",value:function(){return{createWebviewId:this.webviewId,lastWebviewId:Mg.lastWebviewId,currentWebviewId:Mg.currentWebviewId,openType:Mg.currentOpenType}}},{key:"setSlotData",value:function(e){this.slotData=Object.assign(this.slotData,e||{})}},{key:"reset",value:function(){this.adDataIndex=0,this.cgiReporter.reset()}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t)),this.fetchPromise}},{key:"setRightButtonHide",value:function(e){var t=this,n=function(){return Ng.isWaGame?t.setNavigationBarRightButton({isHide:e}):t.setMiniProgramNavigationBarRightButton({isHide:e})};return n().catch((function(r){return t.reportAdMonitorData(vv.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:t.processStackMsg(r)}),n().catch((function(n){throw t.reportAdMonitorData(vv.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:t.processStackMsg(n)}),n}))}))}},{key:"addDownloadTaskStraight",value:function(e,t,n,r){var i=this;return o_({taskName:e,taskUrl:t,fileMd5:n,extInfo:r}).catch((function(e){return i.reportAdMonitorData(vv.IDKEY.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e)}))}},{key:"operateFullscreen",value:function(e){if(!e)return Promise.reject();var t=[this.setRightButtonHide("hide"===e)];return Ng.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!Ng.isWaGame&&Ng.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}},{key:"isTriggerClick",value:function(e){var t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,i=e.absoluteEndY,o=e.pressInterval,a=!1;return Math.abs(i-n)<30&&Math.abs(r-t)<30&&o<300&&(a=!0),a}},{key:"isValidCondition",value:function(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}},{key:"setCurrentData",value:function(e){var t;this.adDataIndex=e,(null===(t=this.datas)||void 0===t?void 0:t[e])&&(this.data=this.datas[e])}},{key:"checkCanvasXmlState",value:function(){return this.isCanvasXmlHook}},{key:"handleRewardedVideoPlayableLand",value:function(e,t){var n,r,i=null===(r=null===(n=null==this?void 0:this.data)||void 0===n?void 0:n.extBackComm)||void 0===r?void 0:r.uid,o={};4===t?o.xj_scene=6:(o.gdt_vid=this.data.traceid||"",o.uxinfo=this.data.uxinfo||"",o.reward=1),o.rl=this.data.rl||"",o.ad_token=this.data.ad_token||"",Ng.isIOS&&(o.uid=i||"");var a=Object(Dg.addUrlParam)(e,o);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(vv.IDKEY.H5_PRELOAD_BUTTON_CLICKED),Object(ug.openUrl)({url:a})}},{key:"setDeviceInfo",value:function(e){Object.assign(Ng,e)}}]),e}();l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",Promise)],p_.prototype,"handleSplashAd",null),l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",void 0)],p_.prototype,"handleCustomAd",null),l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",void 0)],p_.prototype,"handleGridAd",null),l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",void 0)],p_.prototype,"handleInterstitialAd",null),l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",void 0)],p_.prototype,"handleRewardedVideoAd",null),l_([xg("handleAdDataDone"),Pg("handleAdDataError"),d_("design:type",Function),d_("design:paramtypes",[Object]),d_("design:returntype",void 0)],p_.prototype,"handleBannerAd",null),l_([function(e,t,n){var r=n.value;n.value=function(){var e=this,t=function(t){u_&&u_ in e&&"function"==typeof e[u_]&&e[u_](t)};try{for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=r.call.apply(r,[this].concat(i));return a instanceof Promise?a.catch((function(e){return t(e)})):a}catch(e){t(e)}}},d_("design:type",Function),d_("design:paramtypes",[Number,Object,Object]),d_("design:returntype",Promise)],p_.prototype,"checkDuplicateRecommendedAds",null);var h_,g_=new Ps.default,v_="SHOW_REWARD",__="HIDE_REWARD",y_={banner:"SHOW_BANNER","incentive-video":v_,grid:"SHOW_GRID"},m_={banner:"HIDE_BANNER","incentive-video":__,grid:"HIDE_GRID"},b_=function(){function e(t){var n=t.adUnitId,r=t.adType,i=void 0===r?"banner":r;Object(N.default)(this,e),this.adUnitId=n,this.adType=i}return Object(oe.default)(e,[{key:"show",value:function(){var e=y_[this.adType];e&&g_.emit(e,{adUnitId:this.adUnitId})}},{key:"hide",value:function(){var e=m_[this.adType];e&&g_.emit(e,{adUnitId:this.adUnitId})}},{key:"on",value:function(e,t){var n=this;g_.on(e,(function(e){e.adUnitId!==n.adUnitId&&t(e)}))}}]),e}(),w_=n(14),O_=function(e,t,n){return Pu.init.call(this,e,function(e){for(var t={},n=0,r=Object.keys(e||{});n<r.length;n++){var i=r[n];e[i]&&(t[i]=Object.assign({},e[i]),e[i].landscape&&!e[i].landscapeLeft&&(t[i].landscapeLeft=Object.assign({},e[i].landscape)),e[i].landscape&&!e[i].landscapeRight&&(t[i].landscapeRight=Object.assign({},e[i].landscape)))}return t}(t),n)},E_={container:{position:"absolute",hidden:!0,overflow:"hidden"},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},tag:{width:63,height:18,right:0,bottom:0,position:"absolute"},tagView:{hidden:!0,right:0,bottom:0,position:"absolute",flexDirection:"row"},tagBeforeContainer:{width:6,height:18,overflow:"hidden"},tagBefore:{width:12,height:24,borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.2)"},tagContent:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)"},tagMiniapp:{hidden:!0,width:11,height:12,marginRight:1},tagLabel:{height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},S_={container:{flexDirection:"row",justifyContent:"space-between",position:"absolute",hidden:!0,overflow:"hidden",backgroundColor:"#ffffff"},appContainer:{flex:1,flexDirection:"column",backgroundColor:"#ffffff",alignItems:"center",paddingTop:12.5,paddingBottom:12.5},appIcon:{width:37,height:37,borderRadius:18.5},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},appName:{height:13,fontSize:11,lineHeight:13,color:"#888888",marginTop:5,marginBottom:15,textAlign:"center"},appButton:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadButton:{width:60,height:27,hidden:!0},downloadButtonText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},T_={1:function(e,t){var n=A_(e.id),r='<text id="{id}" value="{value}" bubble-event="true"></text>';r=C_(r,"id",n),r=C_(r,"value",e.content);var i={};return i[n]={position:"absolute",overflow:"hidden",left:e.left,top:e.top,width:e.width,height:e.height,fontSize:e.font_size,lineHeight:e.line_height,fontWeight:e.font_weight||"normal",color:e.font_color||"#000000",textAlign:e.align||"left",lineBreak:1==e.nowrap?"clip":"break-word"},{widgetTmpl:r,widgetStyle:i,scaleDoms:[n]}},2:function(e,t){var n=A_(e.id),r='<image id="{id}" src="{src}" bubble-event="true"></image>';r=C_(r,"id",n),r=C_(r,"src",e.image_url);var i={};return i[n]={position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height},{widgetTmpl:r,widgetStyle:i,scaleDoms:[n]}},3:function(e,t){},4:function(e,t){var n='\n  <view id="downloadButton" click-state="true">\n    <text id="downloadButtonText" value="{value}" bubble-event="true"></text>\n    <text id="downloadProgress" bubble-event="true">\n      <text id="downloadProgressText" bubble-event="true"></text>\n    </text>\n  </view>\n  <text id="appButton" value="{value}" click-state="true"></text>\n';return{widgetTmpl:n=C_(n,"value",e.title),widgetStyle:{appButton:{position:"absolute",textAlign:"center",left:e.left,top:e.top,width:e.width,height:e.height,lineHeight:e.height,fontSize:e.font_size,color:e.font_color||"#000000",fontWeight:e.font_weight||"normal",backgroundColor:e.background_color||"transparent",borderColor:e.border_color||"transparent",borderWidth:1,borderRadius:e.border_radius},downloadButton:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,hidden:!0},downloadButtonText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:e.font_color||"#04be02",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:"#ffffff",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:e.border_color||"#04be02"}},scaleDoms:["appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]}},5:function(e,t,n){var r=A_(e.id),i=A_(e.id),o=A_(e.id),a='\n  <view id="{wrapId}" bubble-event="true">\n    <image id="{headerId}" src="{header}" bubble-event="true"></image>\n    <text id="{labelId}" value="{label}" bubble-event="true"></text>\n  </view>\n';a=C_(a,"wrapId",r),a=C_(a,"headerId",i),a=C_(a,"header",e.head_url),a=C_(a,"labelId",o),a=C_(a,"label",e.nick_name);var s={},c=120/690*n.width;s[r]={position:"absolute",left:e.left,top:e.top,width:c,overflow:"hidden",flex:1,flexDirection:"column",alignItems:"center"};var u=70/690*n.width;s[i]={width:u,height:u,borderRadius:1==e.head_type?u/5:u/2,marginBottom:10/690*n.width};var l=24/690*n.width;return s[o]={fontSize:l,color:"#888888",width:c,height:l+5,lineHeight:l+5,textAlign:"center",lineBreak:"ellipsis"},{widgetTmpl:a,widgetStyle:s,scaleDoms:[r,i,o]}},6:function(e,t){var n=A_(e.id),r=A_(e.id),i=A_(e.id),o=A_(e.id),a=A_(e.id),s='\n  <view id="{tagViewId}" bubble-event="true">\n    <image id="{tagBeforeId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgm1whMrNszgO3SgLoE6tlNzpKQQm4ubB6PeOLWL30sIWR7Sfsiakp1Ouw/0?wx_fmt=png"></image>\n    <view id="{tagContentId}" bubble-event="true">\n      <image id="{tagMiniappId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgmCKiaGzo9XUvxlDiaibHqzSO9BqvH74E0m5ibptJHaMAxicKvxXmM4LjMicaA/0?wx_fmt=png"></image>\n      <text id="{tagLabelId}" value="{label}" bubble-event="true"></text>\n    </view>\n  </view>\n';s=C_(s,"tagViewId",n),s=C_(s,"tagBeforeId",r),s=C_(s,"tagContentId",i),s=C_(s,"tagMiniappId",o),s=C_(s,"tagLabelId",a),s=C_(s,"label",e.watermark_text);var c={};c[n]={right:0,bottom:0,position:"absolute",flexDirection:"row"},c[r]={width:14,height:18},c[i]={flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.6)"},c[o]={hidden:1==e.watermark_icon,width:11,height:12,marginRight:1},c[a]={width:11*e.watermark_text.length+6,height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11};return{widgetTmpl:s,widgetStyle:c,scaleDoms:[]}}},I_=1,A_=function(e){return["wdgt",e,I_++].join("__")},C_=function(e,t,n){return e.replace(RegExp("\\{"+t+"\\}","gi"),n)},k_=(h_={adFeedback:{width:46,height:15,backgroundColor:"rgba(40, 40, 40, 0.6)",borderRadius:12,"ios-portrait":{borderRadius:7},"ios-landscape":{borderRadius:7},"iphone x-portrait":{borderRadius:7},"iphone x-landscape":{borderRadius:7},color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:11,left:4,top:1.5,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5},position:"absolute"},rectangle:{top:7,left:32,width:7.2,height:4.2,position:"absolute"},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"}},Object(mt.default)(h_,"adCloseBtnLine",{width:134,height:1,backgroundColor:"#E0E0E0"}),Object(mt.default)(h_,"adCloseBtnLine0",{width:134,height:1,backgroundColor:"#E0E0E0"}),Object(mt.default)(h_,"rectangleClose",{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"}),Object(mt.default)(h_,"adCloseTip",{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999}),Object(mt.default)(h_,"adCloseTipWrap",{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"}),Object(mt.default)(h_,"adCloseTipIcon",{width:48,height:41}),Object(mt.default)(h_,"adCloseTipText",{width:200,height:45,marginLeft:8}),Object(mt.default)(h_,"adCloseTipTitle",{width:200,height:20,fontSize:18,color:"#3a3a3a"}),Object(mt.default)(h_,"adCloseTipContent",{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}),h_);function x_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var P_=n(76),D_=P_('\n  <image id="container" click-state="false">\n    <view id="ad-feedback" click-state="true">\n        <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <text id="ad-close-btn" click-state="true" value="关闭"></text>\n      <view id="ad-close-btn-line-dislike"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-affect"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line0"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n    <image id="tag" bubble-event="true"></image>\n    <view id="tagView" bubble-event="true">\n      <view id="tagBeforeContainer">\n        <view id="tagBefore" bubble-event="true"></view>\n      </view>\n      <view id="tagContent" bubble-event="true">\n        <image id="tagMiniapp" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/mini_program_v2.png"></image>\n        <text id="tagLabel" value="" bubble-event="true"></text>\n      </view>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </image>\n').root,R_=(P_('\n  <view id="container" click-state="true">\n    <image id="app-icon" bubble-event="true"></image>\n    <view id="app-information" bubble-event="true">\n      <text id="app-name" bubble-event="true"></text>\n      <text id="app-wording" bubble-event="true"></text>\n    </view>\n    <text id="app-button" click-state="true"></text>\n  </view>\n').root,P_('\n  <view id="container" click-state="false">\n    <image id="image" bubble-event="true">\n        <view id="ad-feedback" click-state="true">\n            <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n            <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n            <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        </view>\n        <view id="ad-feedback-list">\n          <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n          <text id="ad-close-btn" click-state="true" value="关闭"></text>\n          <view id="ad-close-btn-line-dislike"></view>\n          <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n          <view id="ad-close-btn-line-affect"></view>\n          <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n        </view>\n        <view id="ad-feedback-menu">\n          <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n          <view id="ad-close-btn-line"></view>\n          <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n          <view id="ad-close-btn-line0"></view>\n          <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n        </view>\n    </image>\n    <view id="app-container" bubble-event="true">\n      <image id="app-icon" bubble-event="true"></image>\n      <text id="app-name" bubble-event="true"></text>\n      <view id="download-button" click-state="true">\n        <text id="download-button-text" bubble-event="true"></text>\n        <text id="download-progress" bubble-event="true">\n          <text id="download-progress-text" bubble-event="true"></text>\n        </text>\n      </view>\n      <text id="app-button" click-state="true"></text>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root),j_=0,N_=0,M_=m.PLATFORM,L_=m.IS_IOS,B_=m.IS_ANDROID,F_={},U_=[];w.default.onReady((function(){var e=Object(tt.getInitScreenSize)();if(j_=e.screenWidth,N_=e.screenHeight,Object(A.isGame)()){var t=n(114).default;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((F_={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),F_.touchStartPosY=Math.round(e.changedTouches[0].clientY),F_.touchEndPosX=0,F_.touchEndPosY=0,F_.touchStartTime=+new Date,F_.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(F_.touchEndPosX=Math.round(e.changedTouches[0].clientX),F_.touchEndPosY=Math.round(e.changedTouches[0].clientY),F_.touchInterval=+new Date-F_.touchStartTime,U_.length>=10&&U_.shift(),U_.push(F_))}))}}));var W_=1e3,V_=1,G_=2,H_=3,z_=function(e){var t=this;return Q_.call(this).then((function(){var n=Object(Pu.getPrivateThis)(t),r=n.container.layoutBox,i=r.left,o=r.top,a=(r.width,r.height,{slotid:8040321819858439,ScreenHeight:N_,ScreenWidth:j_,PageY:o,PageX:i,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},Y_=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Pu.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&iy.call(this,e,i),r},q_=function(e){var t=Object(Pu.getPrivateThis)(this),n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48));var u=0;t.adProxy.isValidCondition("widget_gray_banner_limit_click")&&(u=100*(t.data.condition.widget_gray_banner_limit_click||5)),u>0&&+new Date-t.lastShowTime<u&&(s=!0,t.adProxy.reportAdMonitorData(155));var l=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(l=t.data.condition.widget_gray_bd_limit||10),e&&l>0&&(e.absoluteEndX-r<l||r+o-e.absoluteEndX<l||e.absoluteEndY-i<l||i+a-e.absoluteEndY<l)&&(s=!0,t.adProxy.reportAdMonitorData(47)),s},K_=function(){var e=this,t=Object(Pu.getPrivateThis)(this),n=sy.call(this),r=(n.outer,n.inner,n.scale),i=t.data,o=i.crt_size,a=i.use_style_data,s=i.ad_style_data,c=i.dest_type,u=i.product_type;if(a){var l=function(e){var t="",n={container:{hidden:!0,position:"absolute",overflow:"hidden",backgroundColor:e.background_color||"#FFFFFF",width:e.width,height:e.height}},r=[];return t+='<view id="container" click-state="false">',e.widgets.forEach((function(i,o){var a=T_[i.type];if(a){var s=a(i,o,e),c=s.widgetTmpl,u=s.widgetStyle,l=s.scaleDoms;t+=c,n=Object.assign(n,u),r=r.concat(l)}})),t+='\n  <view id="adFeedback" click-state="true">\n    <text id="adText" value="广告" click-state="true" bubble-event="true"></text>\n    <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <text id="ad-close-btn" click-state="true" value="关闭"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    <view id="ad-close-btn-line-affect"></view>\n    <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line0"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="ad-close-tip">\n    <view id="ad-close-tip-wrap">\n      <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n      <view id="ad-close-tip-text" bubble-event="true">\n        <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n        <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n      </view>\n    </view>\n  </view>\n',n=Object.assign(n,k_),{template:t+="</view>",style:n,scaleDoms:r}}(s),d=l.template,f=l.style,p=l.scaleDoms,h=P_(d).root;O_.call(this,h,f),t.scaleDoms=p,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.appButton&&([12,19].indexOf(u)>-1?X_.call(this):t.appButton.on("click",(function(n){Y_.call(e,n)&&(q_.call(e,n)||(L_&&46===u&&6===t.data.button_action.jump_type?Promise.race([oy.call(e,n),Object(w_.timeout)(500)]).then((function(){cy.call(e,{isButton:!0})})).catch((function(){cy.call(e,{isButton:!0})})):(oy.call(e,n),cy.call(e,{isButton:!0}))))}))),t.container.on("click",(function(t){Y_.call(e,t)&&(q_.call(e,t)||(L_&&46===u&&6===c?Promise.race([oy.call(e,t),Object(w_.timeout)(500)]).then((function(){cy.call(e)})).catch((function(){cy.call(e)})):(oy.call(e,t),cy.call(e))))}))}else if([532,608,567].indexOf(o)>-1){O_.call(this,D_,E_);var g=t.data,v=g.image,_=v.src,y=(v.width,v.height,g.watermark_text);t.container.src=_,t.tag.style.hidden=!0,t.tagView.style.hidden=!1,t.tagLabel.value=y,t.tagLabel.style.width=11*t.data.watermark_text.length+6,6===t.adProxy.data.dest_type&&(t.tagMiniapp.style.hidden=!1),12===u&&(t.adProxy.setAppInstallState(!1),Z_.call(this)),t.container.on("click",(function(t){Y_.call(e,t)&&(q_.call(e,t)||(L_&&46===u&&6===c?Promise.race([oy.call(e,t),Object(w_.timeout)(500)]).then((function(){cy.call(e)})).catch((function(){cy.call(e)})):(oy.call(e,t),3===c?cy.call(e,{toOfficalAccountDetail:!0}):cy.call(e))))}))}else if(556==o){if([12,19].indexOf(u)>-1){O_.call(this,R_,S_);var m=t.data,b=m.width,w=m.image,O=w.src,E=w.width,S=(w.height,m.appInfo),T=S.appName,I=(S.apkName,S.apkUrl,S.appMd5,S.iconUrl);S.urlScheme,S.versionCode,S.channelId;t.image.style.width=239,t.image.style.height=120,t.image.src=O,t.appIcon.src=I,t.appName.value=Object(w_.truncate)(T,16),t.appName.style.width=b-E,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appIcon.style.borderRadius=4,t.appName.style.scale=r,t.downloadButtonText.style.scale=r,t.downloadProgress.style.scale=r,t.downloadProgressText.style.scale=r,t.downloadButton.style.scale=r,X_.call(this)}else{O_.call(this,R_,S_);var A=t.data,C=A.width,k=A.image,x=k.src,P=k.width,D=(k.height,A.app),R=D.icon,j=D.isFollowed,N=D.nickname,M=A.button_action;A.wording;t.image.style.width=239,t.image.style.height=120,t.image.src=x,t.appIcon.src=R,t.appName.value=Object(w_.truncate)(N,16),t.appName.style.width=C-P,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appName.style.scale=r,t.appButton.style.scale=r,t.appButton.value=23==u&&j?"查看":M.button_text,t.appButton.on("click",(function(t){Y_.call(e,t)&&(q_.call(e,t)||(oy.call(e,t),fy.call(e),cy.call(e,{isButton:!0})))}))}t.container.on("click",(function(t){Y_.call(e,t)&&(q_.call(e,t)||(L_&&46===u&&6===c?Promise.race([oy.call(e,t),Object(w_.timeout)(500)]).then((function(){cy.call(e)})).catch((function(){cy.call(e)})):(oy.call(e,t),cy.call(e))))}))}t.container||t.adProxy.reportAdMonitorData(7)},J_=function(){var e=this,t=Object(Pu.getPrivateThis)(this);try{var n=this.style,r=n.left,i=n.top,o=sy.call(this),a=(o.outer,o.inner);o.scale,t.data.type;K_.call(this),t.adFeedback.style.hidden=!1,t.adFeedback.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||ny.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn.on("click",(function(n){if(Y_.call(e,n,!1)){t.adProxy.openFeedbackUrl(1002);t.adFeedbackList.style.hidden=!0,ny.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})}})),t.adCloseBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,ty.call(e))})),t.adDislikeBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,ty.call(e,2,"不感兴趣"))})),t.adQualityBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,ty.call(e,2,"不感兴趣",4))})),t.adDuplicateBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,ty.call(e,2,"不感兴趣",5))})),t.adDismatchBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,ty.call(e,2,"不感兴趣",1))})),t.adAffectBtn.on("click",(function(n){Y_.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,ty.call(e,3,"影响操作"))})),t.adProxy.isValidCondition("widget_gray_close_v2")?(t.adCloseBtnLineDislike.style.hidden=!1,t.adCloseBtnLineAffect.style.hidden=!1,t.adDislikeBtn.style.hidden=!1,t.adAffectBtn.style.hidden=!1,t.rectangle.style.hidden=!1,t.rectangleClose.style.hidden=!0,t.adCloseBtn.style.hidden=!0,ey.call(this)):(t.adFeedbackList.style.height=64,t.adCloseBtnLine.style.hidden=!1,t.adCloseBtn.style.hidden=!1),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=i,t.container.style.width=a.width,t.container.style.height=a.height,t.adCloseTip.style.width=a.width,t.adCloseTip.style.height=a.height,Vs.webviewLayout.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){Object(w_.log)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){z_.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(6,e),Promise.reject({})}},X_=function(){var e=this,t=Object(Pu.getPrivateThis)(this),n=t.data.appInfo,r=n.appName,i=n.apkName,o=n.apkUrl,a=n.appMd5,s=(n.iconUrl,n.urlScheme);n.versionCode,n.channelId;t.downloadButton.style.hidden=!1,t.appButton.style.hidden=!0,L_?(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadButton.on("click",(function(t){Y_.call(e,t)&&(q_.call(e,t)||(oy.call(e,t),cy.call(e,{isButton:!0})))}))):B_&&(t.downloadButtonText.value=t.downloadProgressText.value=t.data.button_action.button_text,Z_.call(this),t.downloadButton.on("click",(function(n){if(Y_.call(e,n)&&!q_.call(e,n)){oy.call(e,n);var c=t.adProxy.data,u=c.aid,l=c.traceid,d=c.apurl,f=0,p="";if(t.landingCount++,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4==t.androidAppState)t.adProxy.launchApplication(s).catch((function(e){})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0==t.androidAppState){var h=[u,l,i.replace(/./g,"_"),0,20,d.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(r,o,a,h).then((function(n){fy.call(e),t.androidDownloadId=n.downloadId,setTimeout($_.bind(e),W_)})).catch((function(t){cy.call(e,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",f=4,p="下载"}else t.androidAppState==V_?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="继续",t.androidAppState=G_,t.lastJsapiName="pauseDownloadTask",f=5,p="暂停"):t.androidAppState==G_?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((function(t){setTimeout($_.bind(e),W_)})).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="暂停",t.androidAppState=V_,t.lastJsapiName="resumeDownloadTask",f=6,p="继续"):t.androidAppState==H_&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((function(e){})),t.lastJsapiName="installDownloadTask",f=7,p="安装");f>0&&t.adProxy.reportLandingTime({slotId:8040321819858439,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:f,actTypeStr:p})}})))},$_=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=Object(Pu.getPrivateThis)(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){"download_succ"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="安装",r.downloadProgress.style.width=r.downloadButton.style.width,r.androidAppState=H_,dy.call(t)):"downloading"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="暂停",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress)/100,r.androidAppState=V_):"download_fail"===n.state&&(r.downloadButtonText.value=r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,r.androidAppState=0,dy.call(t)),"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),W_)})).catch((function(t){n>0&&e(--n)}))},Z_=function(){var e=Object(Pu.getPrivateThis)(this),t=e.data.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),e.downloadButtonText&&(e.downloadButtonText.value=e.downloadProgressText.value="已安装",i&&i.trim().length>0&&(e.downloadButtonText.value=e.downloadProgressText.value="进入")),e.tagLabel&&i&&i.trim().length>0&&(e.tagLabel.value="进入应用",e.tagLabel.style.width=50))})).catch((function(e){}))},Q_=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Pu.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},ey=function(){var e=Object(Pu.getPrivateThis)(this),t=sy.call(this),n=(t.inner,t.scale);n=n<.8?.8:n;var r=347/120/(e.adProxy.data.ad_width/e.adProxy.data.ad_height);e.adFeedbackBtn.style.height=e.adDislikeBtn.style.height=e.adAffectBtn.style.height=e.adQualityBtn.style.height=e.adDuplicateBtn.style.height=e.adDismatchBtn.style.height=e.adFeedbackBtn.style.lineHeight=e.adDislikeBtn.style.lineHeight=e.adAffectBtn.style.lineHeight=e.adQualityBtn.style.lineHeight=e.adDuplicateBtn.style.lineHeight=e.adDismatchBtn.style.lineHeight=32*n*r,e.adFeedbackBtn.style.fontSize=e.adDislikeBtn.style.fontSize=e.adAffectBtn.style.fontSize=e.adQualityBtn.style.fontSize=e.adDuplicateBtn.style.fontSize=e.adDismatchBtn.style.fontSize=12*n*r,e.adFeedbackList.style.height=98*n*r,e.adFeedbackMenu.style.height=98*n*r},ty=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Object(Pu.getPrivateThis)(this);i.isClosed=!0,i.lastClosedAction="",i.closeAdTime=+new Date,e?(ny.call(this,{secondGradeId:e,secondGradeDesc:t,feedbackReason:r}),(2!==e||r)&&Object(w_.timeout)(2e3).then((function(){n.hide(),i.emitter.emit("close")}))):(ny.call(this,{firstGradeId:0,firstGradeDesc:""}),this.hide(),i.emitter.emit("close"))},ny=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=Object(Pu.getPrivateThis)(this),f=d.container.layoutBox,p=f.left,h=f.top,g=f.width,v=f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:Math.round(g),adHeight:Math.round(v),adPosX:Math.round(p),adPosY:Math.round(h),expTime:d.showedExposureTime,slotId:8040321819858439,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},ry=function(){Object(w_.log)("开始 update UI");var e=Object(Pu.getPrivateThis)(this),t=this.style,n=t.left,r=t.top,i=sy.call(this),o=i.inner,a=i.scale,s=e.data,c=(s.type,s.crt_size),u=s.product_type,l=s.use_style_data;Object(w_.log)(this.style.width,this.style.height),Object(w_.log)("update UI",o),Object.assign(e.container.style,o,{left:n,top:r});var d=[];return l?d=e.scaleDoms:[532,608,567].indexOf(c)>-1?d=[]:556==c&&23==u?d=["image","appContainer","appIcon","appName","appButton"]:556==c&&[12,19].indexOf(u)>-1&&(d=["image","appContainer","appIcon","appName","appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]),d.forEach((function(t){e[t].style.scale=a})),ey.call(this),e.container.nextUpdate().then((function(){return Object(w_.log)("updateUI 完成"),Promise.resolve()}))},iy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(Pu.getPrivateThis)(this);if(!gy.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:8040321819858439,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},oy=function(e){var t=Object(Pu.getPrivateThis)(this);if(!gy.call(this)&&t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=Object.keys(F_).length?{pos_x:F_.touchStartPosX,pos_y:F_.touchStartPosY,time:F_.touchStartTime}:{pos_x:0,pos_y:0,time:0},c=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:r,top:i,width:o,height:a,weappExtraData:{show_time:t.lastShowTime,last_click:s}});return Object(w_.logReport)(c,"banner","点击"),py.call(this,{stage:1002}),U_=U_.map((function(e){return"["+[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")+"]"})),t.adProxy.reportBannerLastClick({lastClickArr:"["+U_.join(",")+"]",expMs:t.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:r,top:i,width:o,height:a,lastShowTime:t.lastShowTime}),U_=[],c}},ay=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Pu.getPrivateThis)(this);if(Object(w_.log)("检查曝光"),gy.call(this))return Object(w_.log)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return Object(w_.log)("还没经过布局, 下一个 loop 再做"),Object(w_.timeout)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(a>N_-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){Object(w_.log)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed"});Object(w_.logReport)(l,"banner","原始")}if(a+c/2<=N_&&!r.isViewableExposureReported&&u){if(!n)return Object(w_.log)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),Object(w_.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(w_.log)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"viewable"});Object(w_.logReport)(d,"banner","可视")}return Promise.resolve()},sy=function(){var e=Object(Pu.getPrivateThis)(this),t=e.data,n=t.width,r=t.height,i=(t.type,t.crt_size),o=t.use_style_data;o?(n=n,r=r):532==i?(n=345,r=99):(608==i||567==i||556==i)&&(n=345,r=120);var a=this.style,s=a.width,c=a.height;o?(s=s||345,c=c||r/n*690/2):(s=s||n,c=c||r);var u=Object(w_.contain)({outer:{width:s,height:c},inner:{width:n,height:r},minScale:300/n,maxScale:j_/n,side:"width"}),l=e.lastRealWidth!==u.inner.width||e.lastRealHeight!==u.inner.height;return this.style.realWidth=e.lastRealWidth=u.inner.width,this.style.realHeight=e.lastRealHeight=u.inner.height,l&&e.emitter.emit("resize",u.inner),u},cy=function(e){var t=this,n=Object(Pu.getPrivateThis)(this);n.landingCount++,n.landingCount>1&&n.adProxy.reportRepeatClick({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.landingCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName}),n.lastLandingTime=+new Date,n.lastJsapiStatus=2,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0;var r=n.adProxy.land(e);23==n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var r=/ok/.test(e.errMsg);r&&(n.appButton.value="查看",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:9})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=i-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:i,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.landingCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"}),dy.call(t)})).catch((function(e){n.lastJsapiStatus=1})),uy.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?n.isLandingPage=!0:n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1}))},uy=function(e){var t=Object(Pu.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));Object(w_.logReport)(n,"banner","关注")},ly=function(e){var t=this;if(!gy.call(this)){var n=Object(Pu.getPrivateThis)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.data=e,Q_.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Vs.webviewLayout.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.adProxy.isViewable=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,J_.call(t),Q_.call(t)})).then((function(){return gy.call(t)||"hide"===n.lastClosedAction?Q_.call(t):n.isHideBYCover?(n.lastDisplayAction="show",Q_.call(t)):(n.isShow=!0,py.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return ay.call(t)})),dy.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},dy=function(){var e=this,t=Object(Pu.getPrivateThis)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return ly.call(e,!0)}),n)}},fy=function(){if(!gy.call(this)){var e=Object(Pu.getPrivateThis)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},py=function(e){var t={adtype:1,stage:e.stage};Object(Pu.getPrivateThis)(this).adProxy.reportADFunnelModel(t)},hy=function(){var e=this;if(!gy.call(this)){var t=Object(Pu.getPrivateThis)(this);Object(w_.log)("destroy 调用"),fy.call(this),this._destroyed=!0,z_.call(this,{type:2}),Q_.call(this).then((function(){return t.updateResult})).then((function(){Object(w_.log)("UI update 完成, 正式开始 destroy"),Object(ms._offShow)(t.checkAdState),Is(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Vs.webviewLayout.remove(t.container),Object(Pu.removePrivateThis)(e)}))}},gy=function(){return this._destroyed},vy="banner-ad has been destroyed",_y=function(e){Object(M.default)(n,e);var t=x_(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.adUnitId,o=r.style,a=void 0===o?{left:0,top:0,width:0,height:0}:o,s=r.adIntervals,c=void 0===s?0:s;Object(N.default)(this,n),e=t.call(this);var u=Object(Pu.getPrivateThis)(Object(Cu.default)(e));u.emitter=new Ps.default,u.adProxy=new p_({adUnitId:i,adType:"banner"}),u.androidAppState=0,u.androidDownloadId=0,u.clickCount=0,u.landingCount=0,u.lastLandingTime=0,u.lastJsapiName="",u.lastJsapiStatus=0,u.lastJsapiCostTime=0,u.isLandingPage=!1,u.landingPageCostTime=0,u.hideTime=0,u.isShowedExposureReported=!1,u.isViewableExposureReported=!1,u.isReady=!1,u.isShow=!1,u.emitter.on("ready",(function(){return u.isReady=!0})),u.isHideBYCover=!1,u.adCover=new b_({adUnitId:i,adType:"banner"}),u.adIntervals="number"==typeof c?c:0,u.adTimer=null,u.isClosed=!1,u.closeAdTime=0,u.showedExposureTime=0,u.lastShowTime=0,u.clickFirstGradeTime=0,u.adCover.on(v_,(function(){gy.call(Object(Cu.default)(e))||Q_.call(Object(Cu.default)(e)).then((function(){u.isShow&&!gy.call(Object(Cu.default)(e))&&(u.container.style.hidden=!0),u.isHideBYCover=!0,u.lastDisplayAction=""})).catch((function(e){}))})),u.adCover.on(__,(function(){gy.call(Object(Cu.default)(e))||Q_.call(Object(Cu.default)(e)).then((function(){u.isShow&&!gy.call(Object(Cu.default)(e))&&(u.container.style.hidden=!1),u.isHideBYCover=!1,"show"==u.lastDisplayAction?e.show():"hide"==u.lastDisplayAction&&e.hide()})).catch((function(e){}))})),u.lastRealWidth=0,u.lastRealHeight=0,u.updateResult=Promise.resolve(),e.adUnitId=i,e.style={},e._destroyed=!1;var l=null;Object.keys(a).forEach((function(t){Object.defineProperty(e.style,t,{configurable:!0,enumerable:!0,get:function(){return a[t]},set:function(n){gy.call(Object(Cu.default)(e))||n!==a[t]&&(a[t]=n,u.updateResult=new Promise((function(e){clearTimeout(l),l=setTimeout(e,0)})).then((function(){return Q_.call(Object(Cu.default)(e))})).then((function(){return Promise.all([ry.call(Object(Cu.default)(e)),u.container.nextLayout().then((function(){return ay.call(Object(Cu.default)(e))}))])})))}})})),e.style.realWidth=e.style.width,e.style.realHeight=e.style.height;var d=u.adProxy.fetch();return d.catch((function(e){return u.emitter.emit("_error",e)})),u.adFetchResult=d,u.adFetchResult.then((function(t){(u.emitter.emitter._events?Object.keys(u.emitter.emitter._events):[]).includes("_error")||"devtools"!==M_?(u.data=t,J_.call(Object(Cu.default)(e))):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),u.checkAdState=function(){u.adFetchResult.then((function(){if(u.appButton&&23==u.data.product_type?u.adProxy.checkFollow(u.data.app.uin).then((function(e){var t=u.data.button_action.button_text;u.appButton.value=e?"查看":t,u.adProxy.data.biz_info&&(u.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===u.data.product_type&&Z_.call(Object(Cu.default)(e)),u.isLandingPage){u.lastJsapiStatus=0,u.isLandingPage=!1;var t=+new Date;u.landingPageCostTime=t-u.hideTime,u.adProxy.reportLandingTime({slotId:8040321819858439,costType:u.adProxy.data&&u.adProxy.data.is_cpm?1:2,openTime:u.hideTime,closeTime:t,stayTime:u.landingPageCostTime,jsapiName:u.lastJsapiName,clickTime:u.lastLandingTime,clkCnt:u.landingCount,retCode:u.lastJsapiStatus,costTime:u.lastJsapiCostTime,actTypeInt:1})}})).then((function(){!u.isShow||u.adTimer||[V_,G_,H_].includes(u.androidAppState)||dy.call(Object(Cu.default)(e))})).catch((function(){})),!gy.call(Object(Cu.default)(e))&&u.isClosed&&u.closeAdTime&&+new Date-u.closeAdTime>60*(u.data.condition.widget_gray_close_v2||3)*1e3&&Q_.call(Object(Cu.default)(e)).then((function(){u.isClosed=!1,u.closeAdTime=0,ly.call(Object(Cu.default)(e))}))},Object(ms._onShow)(u.checkAdState),u.onHide=function(t){fy.call(Object(Cu.default)(e)),u.hideTime=+new Date},Ts(u.onHide),e}return Object(oe.default)(n,[{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(gy.call(this))return Promise.reject({errMsg:vy});var i=Object(Pu.getPrivateThis)(this);return i.isClosed?(i.lastClosedAction="show",Promise.reject({errMsg:"banner-ad has been closed"})):i.isHideBYCover?(i.lastDisplayAction="show",Q_.call(this)):(i.isShow=!0,i.lastShowTime=+new Date,py.call(this,{stage:1001}),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),Q_.call(this).then((function(){i.adFeedbackList.style.hidden=!0,i.adFeedbackMenu.style.hidden=!0,i.container.style.hidden=!1,i.container.nextLayout((function(){return ay.call(e)})),dy.call(e)})))}},{key:"hide",value:function(){var e=this;if(!gy.call(this)){var t=Object(Pu.getPrivateThis)(this);return t.isClosed&&(t.lastClosedAction="hide"),t.isHideBYCover?(t.lastDisplayAction="hide",Q_.call(this)):(t.isShow=!1,t.adProxy.isViewable=!1,Q_.call(this).then((function(){t.container.style.hidden=!0,fy.call(e)})))}}},{key:"destory",value:function(){hy.call(this)}},{key:"destroy",value:function(){hy.call(this)}},{key:"onResize",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("resize",e)}},{key:"onError",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("close",e)}},{key:"offClose",value:function(e){gy.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("close",e)}}]),n}(Pu.Component);function yy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var my,by=function(e){Object(M.default)(n,e);var t=yy(n);function n(){return Object(N.default)(this,n),t.apply(this,arguments)}return n}(Ps.default),wy={},Oy=function(e,t,n){wy.hasOwnProperty(e)||(wy[e]={}),wy[e][t]=n},Ey=function(e,t){if(wy.hasOwnProperty(e))return wy[e][t]},Sy=function(){if(wy.hasOwnProperty("close")){var e=Object.keys(wy.close).map((function(e){return wy.close[e]}));return Math.max.apply(Math,Object(Ue.default)(e))}},Ty=function(){if(wy.hasOwnProperty("show")){var e=Object.keys(wy.show).map((function(e){return wy.show[e]}));return Math.max.apply(Math,Object(Ue.default)(e))}},Iy=n(53);!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(my||(my={}));var Ay="REWARDED_DYNAMIC",Cy=n(61),ky={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},xy={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Py=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),Dy=n(42);function Ry(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jy(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ny={type:"EOF"},My=function(){function e(){Object(N.default)(this,e),this.token=[],this.tokens=[],this.state=null,this.state=this.start}return Object(oe.default)(e,[{key:"isEOF",value:function(e){var t=e;return t&&"object"===Object(R.default)(t)&&"EOF"===t.type}},{key:"start",value:function(e){return this.isEOF(e)?(this.emmitToken("EOF",Ny),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}},{key:"inLogic",value:function(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}},{key:"inNumber",value:function(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}},{key:"inTplFunc",value:function(e){var t=this;return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&function(){for(var e=0,n=0,r=0,i=t.token.length;r<i;r++){var o=t.token[r];"("===o?e+=1:")"===o&&(n+=1)}return e===n}()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}},{key:"inTplStr",value:function(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}},{key:"inCompare",value:function(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}},{key:"inQuoteStr",value:function(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}},{key:"emmitToken",value:function(e,t){this.tokens.push({type:e,value:t})}},{key:"push",value:function(e){this.state&&(this.state=this.state(e))}},{key:"end",value:function(){this.state&&this.state(Ny)}}]),e}(),Ly=function(e){for(var t=new My,n=0,r=e.length;n<r;){var i=e[n];n+=1,t.push(i)}return t.end(),t.tokens},By=function(e){return"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null},Fy=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren)},Uy=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren)},Wy=function(e){var t;t="string"==typeof e?Ly(e):e;for(var n=[By({type:"ROOT"})],r=function(e){for(var t=e.priority;Fy(n[n.length-1])&&Uy(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){var r=n[n.length-2].children;null==r||r.push(n.pop())}},i=function(e){var t=By(e),i=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(Fy(i))return;Uy(i)?i.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?Fy(i)&&(t.priority>i.priority?function(e,t){var r=t.children.pop();r&&e.children.push(r),n.push(e)}(t,i):(r(t),function(e){var t=n.pop();t&&e.children.push(t),n.push(e)}(t))):"ROOT_END"===t.type&&(r(t),n.push(t))},o=0,a=t.length;o<a;o++)i(t[o]);return n},Vy=function(e,t){var n=e.split("."),r="";return n.forEach((function(e){""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r},Gy=function(e,t,n){var r=e.indexOf("("),i=e.substring(0,r),o=e.substring(r+1,e.length-1);if(!n[i])return null;for(var a=Ly(o),s=[],c=[],u=0,l=a.length;u<l;u++){var d=a[u];"COMMA"===d.type||"EOF"===d.type?(s.push(c),c=[]):c.push(d)}var f=[];return s.forEach((function(e){f.push(Yy(e,t,n))})),n[i].apply(null,f)},Hy=function e(t,n){var r=t.type,i=t.children,o=t.operator,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(t){return e(i[t],n,a)};if("COMPARE"===r){var c={">":function(){return s(0)>s(1)},"<":function(){return s(0)<s(1)},">=":function(){return s(0)>=s(1)},"<=":function(){return s(0)<=s(1)},"==":function(){return s(0)==s(1)},"!=":function(){return s(0)!=s(1)},"===":function(){return s(0)===s(1)}},u=o&&c[o];return u?u():null}if("LOGIC"===r){var l={"&&":function(){return s(0)&&s(1)},"||":function(){return s(0)||s(1)}},d=o&&l[o];return d?d():null}var f={NUMBER:function(){return Number(i[0])},STR:function(){return i[0]},TPLSTR:function(){return Vy(i[0],n)},QUESTION:function(){return s(0)?s(1):s(2)},TPLFUNC:function(){return Gy(i[0],n,a)}},p=f[r]||null;return p?p():null},zy={"#scope":function(e){return e},"#no":function(e){return!e},"#add":function(e,t){return e+t},"#sub":function(e,t){return e-t},"#multi":function(e,t){return e*t},"#division":function(e,t){return e/t},"#toNumber":function(e){return Number(e)},"#toString":function(e){return String(e)},"#ceil":function(e){return Math.ceil(e)},"#floor":function(e){return Math.floor(e)},"#round":function(e){return Math.round(e)},"#substring":function(e,t,n){return e.substring(t,n)},"#like":function(e,t){return-1!==e.indexOf(t)},"#toLowerCase":function(e){return e.toLowerCase()},"#len":function(e){return e.length},"#parse":function(e){try{return JSON.parse(e)}catch(e){return{}}},"#value":function(e,t){return e[t]||{}},"#truncate":function(e,t){var n,r="",i=0,o=Ry(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;if((i+=/[\u4e00-\u9fa5]/.test(a)?2:1)>t){r+="...";break}r+=a}}catch(e){o.e(e)}finally{o.f()}return r},"#concat":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")},"#split":function(e,t,n){return null==e?void 0:e.split(t,n)}},Yy=function(e,t,n){try{var r=Wy(e);return Hy(r[1],t,Object.assign({},zy,n))}catch(e){}return null},qy=n(8);function Ky(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jy(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Jy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Xy(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var $y=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Zy={},Qy=m.PLATFORM,em=function(e){Object(M.default)(n,e);var t=Xy(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.autoRegister,a=void 0===o||o;Object(N.default)(this,n),(r=t.call(this,e)).ratio=1,r.tplConfig=null,r.adCustomListener=null,r.clickCallbackMap=new WeakMap,r.handleCommonClick=function(e){r.doActions(r.events.tap,{event:e})},r.handleAdCustomAction=function(e){e.targetid===r.id&&r.doCommonAction(e)},r.adCustomId=e.adCustomId,r.adProxy=e.adProxy,r.adData=e.adData,r.adDatas=e.adDatas,r.manager=e.manager,r.reporter=e.reporter,r.emitter=e.emitter,r.idPrefix=e.idPrefix||"",r.forType=e.forType||qy.FOR_TYPES.NONE,r.forItem=e.forItem,r.forIndex=e.forIndex,e.ratio&&(r.ratio=e.ratio),r.checkSize();var s=e.template||{};r.template=s,r.id=r.adCustomId+"-"+r.idPrefix+r.template.id;var c=s.options||{};r.options=c,r.data=c.data||{},r.events=c.events||{},r.lifecycle=c.lifecycle||{},r.innerStyles=c.innerStyles||{},r.animations=c.animations||{},r.bubbleEvent=void 0===c.bubbleEvent||c.bubbleEvent;var u=r.getDataValue("_bubbleEvent");return void 0!==u&&(r.bubbleEvent=u),a&&r.bindCommonEvents(),r}return Object(oe.default)(n,[{key:"ready",value:function(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}},{key:"updatedProps",value:function(){this.updateBubbleEvent()}},{key:"destroy",value:function(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}},{key:"bindCommonEvents",value:function(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}},{key:"getCommonSubComponentProps",value:function(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}},{key:"getDataValue",value:function(e,t,n){var r=t||this.data,i=r[e+"Expr"];return i?this.run(i,null==n?void 0:n.args):r[e]}},{key:"getDataValueWithDefault",value:function(e,t,n,r){var i=n?this.getDataValue(e,n,r):this.getDataValue(e);return void 0===i?t:i}},{key:"getAdData",value:function(){return this.forType===qy.FOR_TYPES.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}},{key:"getAdDatas",value:function(){return this.adDatas||[]}},{key:"addAdCustomListener",value:function(e){var t=this;this.removeAdCustomListener(),this.adCustomListener=function(n){n.adCustomId===t.adCustomId&&(null==e||e(n))},this.emitter.on("adCustomEvent",this.adCustomListener)}},{key:"removeAdCustomListener",value:function(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}},{key:"setRatio",value:function(e){this.ratio=e}},{key:"checkSize",value:function(){var e,t,n,r,i,o=this.template;if(!o||"root"===o.type){this.tplConfig=(null===(e=o)||void 0===e?void 0:e.tplConfig)||{};var a=this.props.adPosition||{};if(this.tplConfig){var s=this.tplConfig,c=(this.props.adPosition||{}).width;null==c&&(c=(null===(n=null===(t=this.props)||void 0===t?void 0:t.systemInfo)||void 0===n?void 0:n.screenWidth)||Ng.screenWidth),c=Number(c);var u=s.minWidth||0,l=s.maxWidth||0,d=s.baseWidth||375,f=Math.min((null===(i=null===(r=this.props)||void 0===r?void 0:r.systemInfo)||void 0===i?void 0:i.screenWidth)||Ng.screenWidth,Math.max(u,c));l&&(f=Math.min(f,l)),0===f&&this.setRatio(d/d),a.width=f,this.setRatio(f/d)}}}},{key:"emitAdCustomEvent",value:function(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}},{key:"emitComponentEvent",value:function(e,t){var n=this.events[e];(null==n?void 0:n.length)&&this.doActions(n,t||{})}},{key:"emitComponentLifeCycle",value:function(e,t){var n=this.lifecycle[e];(null==n?void 0:n.length)&&this.doActions(n,t)}},{key:"doActions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ky(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;i.force&&!i.targetid?this.doCommonAction({args:n,payload:i}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:i.targetid?this.adCustomId+"-"+i.targetid:this.id,args:n,payload:i})}}catch(e){r.e(e)}finally{r.f()}}},{key:"doCommonAction",value:function(e){var t=this,n=e.payload,r=e.args,i=n.delay,o=void 0===i?0:i,a=n.expr,s=void 0===a?void 0:a,c=function(){var i;if(!s||t.run(s,r))switch(n.action){case qy.ACTIONS.SETSTYLE:var o=n.value;if(o.styleExpr)for(var a=0,c=Object.keys(o.styleExpr);a<c.length;a++){var u=c[a];o.style[u]=t.run(o.styleExpr[u],r)}t.setStyle(o.id,o.style);break;case qy.ACTIONS.SETEXPRVARS:var l=n.value.key,d=t.getDataValue("value",n.value);t.getExprInnerVars()[l]=d;break;case qy.ACTIONS.REPORTIDKEY:break;case qy.ACTIONS.TRIGGEREVENT:var f=n.value,p=f.detail,h=void 0===p?{}:p,g=f.eventName;try{if((null==r?void 0:r.event)&&(h.rawDetail=JSON.stringify(r.event)),n.value.detailExpr)for(var v=0,_=Object.keys(n.value.detailExpr);v<_.length;v++){var y=_[v],m=n.value.detailExpr[y];h[y]=t.run(m,r)}}catch(e){}t.emitAdCustomEvent(qy.CUSTOM_EVENT.TRIGGEREVENT,{eventName:g,detail:h});break;case qy.ACTIONS.REPORTMMDATA:var b=n.value,w=b.data,O=b.dataExpr,E=b.id;if(O)for(var S=0,T=Object.keys(O);S<T.length;S++){var I=T[S],A=O[I];w[I]=t.run(A,r)}t.emitAdCustomEvent(qy.CUSTOM_EVENT.REPORTMMDATA,{id:E,data:w});break;case qy.ACTIONS.ANIMATE:var C=n.value,k=C.id,x=C.animation;t.doAnimation({id:k,animationName:x});break;case qy.ACTIONS.TRIGGERBTNCLICK:var P=null==r?void 0:r.event;P&&t.emitAdCustomEvent(qy.CUSTOM_EVENT.BTNTAP,{event:P,isHandleDownload:(null===(i=n.value)||void 0===i?void 0:i.isHandleDownload)||!1});break;case qy.ACTIONS.LANDAD:var D=null==r?void 0:r.event;D&&t.emitAdCustomEvent(qy.CUSTOM_EVENT.LANDAD,{index:t.getDataValueWithDefault("index",0,n.value,{args:r}),event:D});break;case qy.ACTIONS.SPLASHSKIPAD:var R=null==r?void 0:r.event;R&&t.emitAdCustomEvent(qy.CUSTOM_EVENT.SPLASHSKIPAD,{event:R});break;case qy.ACTIONS.REPORTADMONITORDATA:var j=n.value,N=j.id,M=j.key,L=j.extInfo;t.emitAdCustomEvent(qy.CUSTOM_EVENT.REPORTADMONITORDATA,{id:N,key:M,extInfo:L});break;case qy.ACTIONS.REWARDEDVIDEODYNAMIC:var B=n.value.list;t.emitAdCustomEvent(qy.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC,{list:B});break;default:"doAction"in t&&"function"==typeof t.doAction&&t.doAction(e)}};o?setTimeout(c,o):c()}},{key:"run",value:function(e,t){var n=this.getInnerFunction(),r=Object.assign(Object.assign({},this.getScope()),n);return Yy(e,t?Object.assign({$args:t},r):r,n)}},{key:"getElementById",value:function(e){var t,r;if(!e){var i=null!==(r=null===(t=this.getRootElement())||void 0===t?void 0:t.parent)&&void 0!==r?r:null;return i===Cy.Layout?this.getRootElement():i}return"$$"===e?this.getRootElement():Object(Dy.default)(Object(B.default)(n.prototype),"getElementById",this).call(this,e)}},{key:"doAnimation",value:function(e){var t=e.id,r=e.emitEvent,i=void 0===r||r,o=e.animationName,a=e.animation;return $y(this,void 0,void 0,Vt.a.mark((function e(){var r,s,c,u,l,d,f,p,h,g,v,_,y,m,b,w,O,E,S,T;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!a&&o?this.animations[o]:a,s=this.getElementById(t),r&&s){e.next=4;break}return e.abrupt("return");case 4:if(c=r.keys,u=r.duration,l=r.easing,!(((null==c?void 0:c.length)||0)<2)){e.next=8;break}return e.abrupt("return");case 8:d=0,f=0,p=Object.keys(c);case 10:if(!(f<p.length)){e.next=30;break}if(h=p[f],g=c[+h],v=g.offset,_=g.opacity,y=g.left,m=g.top,b=g.rotate,w=g.scaleX,O=g.scaleY,E=u*v,S=Object(Cy.convertStyle)({opacity:_,left:y,top:m,rotate:b,scaleWidth:w,scaleHeight:O}),!(E<=0)){e.next=21;break}return e.next=19,this.setStyle(t,S);case 19:e.next=27;break;case 21:return(T=Object.assign(Object.assign({},S),{easing:l,duration:E-d})).left=S.left,T.top=S.top,e.next=26,n.animate(s,T);case 26:d=E;case 27:f++,e.next=10;break;case 30:if(!o||!i){e.next=33;break}return e.next=33,this.emitComponentEvent(qy.COMMON_EVENT.ANIMATIONEND,{animation:o});case 33:case"end":return e.stop()}}),e,this)})))}},{key:"updateInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];r.expr&&!this.run(r.expr)||this.updateStyle(r.style,n)}}},{key:"setStyle",value:function(e,t){var r,i,o=this,a=Object.create(null,{setStyle:{get:function(){return Object(Dy.default)(Object(B.default)(n.prototype),"setStyle",o)}}});return $y(this,void 0,void 0,Vt.a.mark((function n(){var o,s,c,u,l;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=this.getDataValue("_useApx")?this.convertToApxRatio(t):t,"$$"===(s=e)&&(s=null===(r=this.getRootElement())||void 0===r?void 0:r.name),!o){n.next=11;break}for(c=0,u=Object.keys(o);c<u.length;c++)l=u[c],o[l]=this.convertApxStyle(o[l]);if(!s){n.next=10;break}return n.next=8,a.setStyle.call(this,s,o);case 8:n.next=11;break;case 10:null===(i=this.parent)||void 0===i||i.setStyle("container",o);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"convertApxStyle",value:function(e){var t=this;return e&&"string"==typeof e?e.replace(/([+-]?\d+(?:\.\d+)?)apx/g,(function(e,n){return Number(n*t.ratio)+"px"})):e}},{key:"updateStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],o=i,a=e[i];if(i.includes("Expr")){var s=i.split("Expr");if(2===s.length)o=Object(Co.default)(s,1)[0],a=this.run(a)}this.setStyle(t,Object(mt.default)({},o,a))}}},{key:"removeInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];this.removeStyle(r.style,n)}}},{key:"removeStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];this.setStyle(t,Object(mt.default)({},i,null))}}},{key:"getScope",value:function(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}},{key:"getExprInnerVars",value:function(){return void 0===Zy[this.adCustomId]&&(Zy[this.adCustomId]={}),Zy[this.adCustomId]}},{key:"getInnerFunction",value:function(){var e=this.getExprInnerVars();return{"#getVar":function(t){return e[t]},"#measureText":function(e,t){return Iy.default.getTextWidth(e,t)}}}},{key:"updateBubbleEvent",value:function(){var e=this.getRootElement();e&&Object(Dg.traverseElement)(e,(function(e){if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){var t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}},{key:"onClick",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.handleTriggerClick,a=void 0===o||o,s=i.handleClickLimit,c=void 0===s||s,u=i.isReport,l=void 0!==u&&u,d=i.clickType,f=void 0===d?0:d,p=function(e){null!==r.reporter&&(a&&!r.reporter.judgeTriggerClick(e,l)||c&&r.reporter.isClickLimit(e,f))||t(e)};return this.clickCallbackMap.set(t,p),Object(Dy.default)(Object(B.default)(n.prototype),"onClick",this).call(this,e,p)}},{key:"offClick",value:function(e,t){return this.clickCallbackMap.has(t)?Object(Dy.default)(Object(B.default)(n.prototype),"offClick",this).call(this,e,this.clickCallbackMap.get(t)):Object(Dy.default)(Object(B.default)(n.prototype),"offClick",this).call(this,e,t)}},{key:"checkUseApx",value:function(){if(this.getDataValue("_useApx"))for(var e=0,t=Object.keys(this.style);e<t.length;e++){var n=t[e];this.style[n]=this.convertToApxRatio(this.style[n])}}},{key:"convertToApxRatio",value:function(e){for(var t=this.ratio,n=/(\d+)px/g,r={},i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if(null===qy.scalableStyles||void 0===qy.scalableStyles?void 0:qy.scalableStyles.includes(a)){var s=e[a],c=s;"number"==typeof s?c=s*t:"string"==typeof s?c=s.replace(n,(function(e,n){var r=Number(n);return Number.isNaN(r)?e:r*t+"px"})):Array.isArray(s)&&(null==s?void 0:s.every((function(e){return"number"==typeof e})))&&(c=s.map((function(e){return e*t}))),r[a]=c}else r[a]=e[a]}return r}}],[{key:"animate",value:function(e,t){var n=t.left,r=t.top,i=t.scaleWidth,o=t.scaleHeight,a=t.opacity,s=t.rotate,c=void 0===s?0:s,u=t.easing,l=void 0===u?"ease-in":u,d=t.duration,f=void 0===d?500:d,p=new Promise((function(t,s){Object(O.invokeMethod)("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:f,finalStyle:{left:n,top:r,opacity:a,rotate:c,scaleX:i,scaleY:o},success:t,fail:s})}));return"devtools"===Qy&&(p=Promise.all([p,Object(w_.timeout)(f)])),p}}]),n}(Cy.Component);function tm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var nm=function(e){Object(M.default)(n,e);var t=tm(n);function n(e){var r,i;if(Object(N.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},r.isLinearGradient=!1,r.isLinearGradientReverse=!1,r.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",r.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,r.isShow=r.getDataValueWithDefault("_isShow",!0),r.isShow&&("feedback"===r.template.type?r.setStyle("container",{display:"inline-block"}):"end"===r.template.type&&r.setStyle("container",{display:"none"}),r.updateStyle(r.template.style||{},"container"),null===(i=r.template.style)||void 0===i?void 0:i.background)){var o=r.linearGradientRe.exec(r.template.style.background.replace(/ /g,""));if(o){var a=o.slice(1),s=Object(Co.default)(a,2),c=s[0],u=s[1];r.isLinearGradient=!0,Number(c)>Number(u)&&(r.isLinearGradientReverse=!0)}}return r}return Object(oe.default)(n,[{key:"getSubComponentProps",value:function(){return this.getCommonSubComponentProps()}},{key:"render",value:function(){var e=this.props.template,t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t="Custom"+e.type[0].toUpperCase()+e.type.slice(1)),this.isShow&&t?'\n      <view id="container">\n        '+(this.isLinearGradient?'\n          <image id="linear-gradient" class="'+(this.isLinearGradientReverse?"reverse":"")+'" src="'+this.linearGradientSrc+'"></image>\n        ':"")+"\n        <"+t+"></"+t+">\n      </view>\n    ":'<view id="blank"></view>')}}]),n}(em);function rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}nm.subComponents=function(){return{CustomLayout:am,CustomText:um,CustomImage:dm,CustomButton:pm,CustomVideo:_m,CustomFeedback:mm,CustomEnd:wm,CustomFor:Em,CustomCarousel:jm,CustomCountdown:Mm}};var im=function(e){Object(M.default)(n,e);var t=rm(n);function n(e){var r,i,o,a;Object(N.default)(this,n),(r=t.call(this,e)).style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},r.state={hidden:!0},r.multiShowList=void 0,r.show=function(){r.setStyle("body",{hidden:!1,opacity:1}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.CHECKEXPOSURE)},r.hide=function(){r.setStyle("body",{hidden:!0,opacity:0}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.CHECKEXPOSURE)},r.showFeedback=function(){Object(Cu.default)(r).useDefaultFeedback&&(r.setStyle("tipContainer",{hidden:!1}),setTimeout((function(){r.setStyle("tipContainer",{hidden:!0})}),3e3))},r.handleEnterForeground=function(){r.emitComponentEvent(qy.ROOT_EVENT.APPENTERFOREGROUND),r.emitAdCustomEvent(qy.CUSTOM_EVENT.APPENTERFOREGROUND)},r.handleEnterBackground=function(){r.emitComponentEvent(qy.ROOT_EVENT.APPENTERBACKGROUND),r.emitAdCustomEvent(qy.CUSTOM_EVENT.APPENTERBACKGROUND)},r.handleContainerClick=function(e){var t,n;(null===(t=r.manager)||void 0===t?void 0:t.isMulti)||(r.emitComponentEvent(qy.ROOT_EVENT.CONTAINERTAP),null===(n=r.reporter)||void 0===n||n.handleClick(e,2))},r.isFullScreen=r.getDataValueWithDefault("isFullScreen",!1),r.enableTimer=r.getDataValueWithDefault("enableTimer",!0),r.useDefaultFeedback=r.getDataValueWithDefault("useDefaultFeedback",!0),r.exposureUntilVideoPlay=r.getDataValueWithDefault("exposureUntilVideoPlay",!1),r.hideAfterLanding=r.getDataValueWithDefault("hideAfterLanding",!1),r.exportAid=r.getDataValueWithDefault("exportAid",!1),r.isMulti=null!==(a=null===(o=null===(i=r.template)||void 0===i?void 0:i.tplConfig)||void 0===o?void 0:o.isMulti)&&void 0!==a&&a,r.isWidthRequired=r.getDataValueWithDefault("isWidthRequired",!1),r.multiShowList=r.getDataValue("multiShowList"),r.bindEvent(),r.updateInnerStyle(),r.updateStyle(r.template.style||{},"container");var s=["left","top"];return!Ng.isWaGame&&s.push("fixed"),r.isWidthRequired&&s.push("width"),!r.isFullScreen&&e.adPosition&&r.setStyle("body",Object(Dg.pick)(e.adPosition,s)),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"ready",value:function(e){Object(Dy.default)(Object(B.default)(n.prototype),"ready",this).call(this,e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){Object(ms._onShow)(this.handleEnterForeground),Ts(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}},{key:"unbindEvent",value:function(){Object(ms._offShow)(this.handleEnterForeground),Is(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}},{key:"getRootData",value:function(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}},{key:"doAction",value:function(e){var t,n,r,i=e.payload,o=e.args;i.action===qy.ACTIONS.HIDEAD?"value"in i&&i.value.preventClose?null===(t=this.manager)||void 0===t||t.hide(!0):null===(n=this.manager)||void 0===n||n.hide():i.action===qy.ACTIONS.RELOADAD?null===(r=this.manager)||void 0===r||r.reload():i.action===qy.ACTIONS.CHANGEMULTISHOW&&(i.value.listExpr?this.emitAdCustomEvent(qy.CUSTOM_EVENT.CHANGEMULTISHOW,{list:this.run(i.value.listExpr,o)}):i.value.list?this.emitAdCustomEvent(qy.CUSTOM_EVENT.CHANGEMULTISHOW,{list:i.value.list}):(null==o?void 0:o.list)&&this.emitAdCustomEvent(qy.CUSTOM_EVENT.CHANGEMULTISHOW,{list:o.list}))}},{key:"isShow",value:function(){var e,t=this.getElementById("body");return null!==(e=!(null==t?void 0:t.style.hidden))&&void 0!==e&&e}},{key:"render",value:function(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';var e=this.props.template,t=this.isFullScreen,n=this.useDefaultFeedback;return'\n      <view id="body" class="'+(t?"full-size":"")+'">\n        '+(e?'\n          <view id="container" class="wx-ad-custom '+(t?"full full-size":"")+'">\n            '+e.children.map((function(e,t){return'\n              <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n            '})).join("\n")+"\n          </view>\n          "+(n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':"")+"\n        ":"")+"\n      </view>\n    "}}]),n}(em);function om(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}im.subComponents={CustomItem:nm};var am=function(e){Object(M.default)(n,e);var t=om(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e)).state={children:[]},r.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},r.classRow=!1,r.classColumn=!1,r.baseType=r.options.baseType||qy.LAYOUT_TYPES.COMMON,r.baseType===qy.LAYOUT_TYPES.ROW?r.classRow=!0:r.baseType===qy.LAYOUT_TYPES.COLUMN?r.classColumn=!0:(r.baseType,qy.LAYOUT_TYPES.PROPORTION),r.state.children=r.template.children||[],r.updateInnerStyle(),r}return Object(oe.default)(n,[{key:"doAction",value:function(e){var t=e.payload;if(t.action===qy.ACTIONS.ADDCHILDREN){var n=t.value,r=Array.isArray(n)?n:[n],i=[].concat(Object(Ue.default)(this.state.children),Object(Ue.default)(r));this.setState({children:i})}}},{key:"ready",value:function(e){Object(Dy.default)(Object(B.default)(n.prototype),"ready",this).call(this,e),this.initProportionComponent()}},{key:"initProportionComponent",value:function(){var e=this.getDataValue("mProportion");if(e){var t=this.getRootElement().layoutBox;if(t.width/t.height>e){var n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{var r=Math.round(t.width/e);this.setStyle("container",{height:r,top:(t.height-r)/2,left:0})}}}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.state.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.state.children,t=["layout"];return this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column"),'\n      <view\n        id="container"\n        class="'+t.join(" ")+'"\n      >\n      '+e.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n      '})).join("\n")+"\n      </view>\n    "}}]),n}(em);function sm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}am.subComponents=function(){return{CustomItem:nm}};var cm=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},um=function(e){Object(M.default)(n,e);var t=sm(n);function n(e){var r;Object(N.default)(this,n),(r=t.call(this,e)).style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},r.state={text:""},r.classEllipsis=!1;var i=r.options.baseType||qy.TEXT_TYPES.NICKNAME;return r.baseType=i,i===qy.TEXT_TYPES.COMMON?r.initCommonComponent():i===qy.TEXT_TYPES.NICKNAME?r.initNickNameComponent():i===qy.TEXT_TYPES.DESC&&r.initDescComponent(),r.classEllipsis=r.getDataValueWithDefault("isEllipsis",!0),r.maxLen=r.getDataValueWithDefault("maxLen",null),r.updateInnerStyle(),r}return Object(oe.default)(n,[{key:"ready",value:function(e){Object(Dy.default)(Object(B.default)(n.prototype),"ready",this).call(this,e),this.baseType===qy.TEXT_TYPES.RELATION&&this.initRelationComponent()}},{key:"initCommonComponent",value:function(){this.state.text=this.getDataValueWithDefault("text","")}},{key:"initNickNameComponent",value:function(){var e=this.getAdData(),t=[dg.PRODUCT_TYPE.APPLE_APP_STORE,dg.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===dg.CRT_SIZE.CRT_SIZE_GRID,r=[dg.PRODUCT_TYPE.WE_CHAT_ARTICLE,dg.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),i=[dg.PRODUCT_TYPE.WE_CHAT_SHOP,dg.PRODUCT_TYPE.JD_URL].includes(e.product_type),o=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,dg.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,dg.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:r},{value:"电商推广",condition:i},{value:"活动推广"}];this.state.text=Object(Dg.getDataFromPaths)(e,o)}},{key:"initDescComponent",value:function(){var e=this.getAdData(),t=[dg.PRODUCT_TYPE.APPLE_APP_STORE,dg.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,dg.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,dg.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),r=e.product_type===dg.PRODUCT_TYPE.MINI_GAME,i=e.product_type===dg.PRODUCT_TYPE.WECHAT,o=[dg.PRODUCT_TYPE.WE_CHAT_ARTICLE,dg.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),a=[dg.PRODUCT_TYPE.WE_CHAT_SHOP,dg.PRODUCT_TYPE.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[dg.CRT_SIZE.CRT_SIZE_MULTI_POS_NEW_PIC,dg.CRT_SIZE.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:o},{value:"今日商品推荐",condition:a},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:i},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=Object(Dg.getDataFromPaths)(e,s)}},{key:"initRelationComponent",value:function(){var e;return cm(this,void 0,void 0,Vt.a.mark((function t(){var n,r,i,o,a,s,c,u,l;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getAdData(),8===Object(Dg.get)(n,["crtInfo","0","card_info","mp_tag_type"])){t.next=3;break}return t.abrupt("return");case 3:return r=n.aid,i=Date.now(),o=Object(Dg.get)(n,["button_action","button_text"],""),t.prev=6,t.next=9,gg({aid:r,buttonText:o});case 9:a=t.sent,s=Date.now(),this.adProxy.reportRelationFetchDuration({startTime:i,endTime:s,showTime:(null===(e=this.manager)||void 0===e?void 0:e.showDetailTime)||0}),c="",a&&(u=a.count,l=a.descText,c=this.getDataValueWithDefault("text","",void 0,{args:{count:u,descText:l}}),this.emitComponentEvent(qy.TEXT_EVENT.RELATIONFETCHED,{count:u,descText:l})),this.setState({text:c}),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),this.setState({text:""}),this.adProxy.reportAdMonitorData(qy.IDKEY.RELATION_FETCH_ERROR,t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,17]])})))}},{key:"doAction",value:function(e){var t=e.payload;t.action===qy.ACTIONS.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",t.value)})}},{key:"render",value:function(){var e=this.classEllipsis,t=this.state.text;return this.classEllipsis&&null!==this.maxLen&&t&&(t=Object(lg.truncate)(t,2*this.maxLen)),'\n      <view id="container">\n        <text\n          id="text"\n          class="text '+(e?"text-ellipsis":"")+'"\n          value="'+t+'"\n        ></text>\n      </view>\n    '}}]),n}(em);function lm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var dm=function(e){Object(M.default)(n,e);var t=lm(n);function n(e){var r;Object(N.default)(this,n),(r=t.call(this,e)).style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},r.state={imgUrl:""},r.classAppIcon=!1,r.classIcon=!1,r.useBgMode=!1,r.useBgMode=r.getDataValueWithDefault("useBgMode",!1);var i=r.options.baseType||qy.IMAGE_TYPES.ICON;switch(r.baseType=i,i){case qy.IMAGE_TYPES.COMMON:r.initCommonComponent();break;case qy.IMAGE_TYPES.AD:r.initADComponent();break;case qy.IMAGE_TYPES.ICON:r.initIconComponent()}return r.useBgMode,r.updateInnerStyle(),r}return Object(oe.default)(n,[{key:"initCommonComponent",value:function(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}},{key:"initIconComponent",value:function(){var e=this.getAdData(),t=[dg.PRODUCT_TYPE.APPLE_APP_STORE,dg.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===dg.CRT_SIZE.CRT_SIZE_GRID,r=[dg.PRODUCT_TYPE.WE_CHAT_SHOP,dg.PRODUCT_TYPE.JD_URL].includes(e.product_type),i=[dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,dg.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;var o=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:i},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:r},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=Object(Dg.getDataFromPaths)(e,o)}},{key:"initADComponent",value:function(){var e=this.getAdData(),t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}},{key:"doAction",value:function(e){var t=e.payload;t.action===qy.ACTIONS.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",t.value)})}},{key:"render",value:function(){var e=this.classAppIcon,t=this.classIcon,n=this.baseType===qy.IMAGE_TYPES.AD,r=this.state.imgUrl,i=["image-img"];return e&&i.push("image-img-appicon"),t&&i.push("image-img-icon"),'\n      <view id="container" class="image">\n        <image\n          id="img"\n          '+(n?'bubble-event="false"':"")+'\n          class="'+i.join(" ")+'"\n          src="'+r+'"\n        >\n      </view>\n    '}}]),n}(em);function fm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var pm=function(e){Object(M.default)(n,e);var t=fm(n);function n(e){var r;Object(N.default)(this,n),(r=t.call(this,e)).style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.state={buttonText:""},r.downloadProgress=0,r.isHandleDownload=!1,r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;t===qy.CUSTOM_EVENT.CHANGEADBTNTEXT&&i.text&&(r.setState({buttonText:i.text}),i.progress&&(r.downloadProgress=i.progress))},r.handleButtonClick=function(e){r.emitAdCustomEvent(qy.CUSTOM_EVENT.BTNTAP,{event:e,isHandleDownload:r.isHandleDownload}),r.emitComponentEvent(qy.BUTTON_EVENT.BUTTONTAP,{event:e})};var i=r.options.baseType||qy.BUTTON_TYPES.LOGICCOMMON;return i===qy.BUTTON_TYPES.COMMON?r.initCommonComponent():i===qy.BUTTON_TYPES.LOGICCOMMON&&r.initLogicCommonComponent(),r.updateInnerStyle(),r.setStyle("downloadProgressBar",{width:r.downloadProgress+"%"}),r.setStyle("downloadTextContainer",{width:1e4/r.downloadProgress+"%"}),r.onClick("container",r.handleButtonClick,{isReport:!0,clickType:1}),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.offClick("container",this.handleButtonClick)}},{key:"getButtonText",value:function(){return this.state.buttonText}},{key:"initCommonComponent",value:function(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}},{key:"initLogicCommonComponent",value:function(){var e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===hv.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}},{key:"doAction",value:function(e){var t=e.payload;t.action===qy.ACTIONS.BUTTONSETTEXT&&this.setText(t.value)}},{key:"setText",value:function(e){this.setState({buttonText:this.getDataValue("text",e)})}},{key:"render",value:function(){var e=this.isHandleDownload,t=this.state.buttonText;return'\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="'+t+'"></text>\n        '+(e?'\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="'+t+'"></text>\n            </view>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(em),hm={videoDataMap:{}},gm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(hm.videoDataMap[e]=t)};function vm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var _m=function(e){Object(M.default)(n,e);var t=vm(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e)).style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},r.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},r.src="",r.poster="",r.isShowVoice=!0,r.isShowProgress=!0,r.isShowCountDown=!1,r.isShowEndPage=!1,r.voicePlacement=null,r.countDownPlacement=null,r.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",r.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",r.currentTime=0,r.videoDuration=0,r.objectFit="contain",r.toggleMuted=function(){r.setState({muted:!r.state.muted}),r.emitComponentEvent(qy.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})},r.handleCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;switch(t){case qy.CUSTOM_EVENT.ADSHOWHALF:r.state.isEndPageShowing||r.operateVideoPlay("play");break;case qy.CUSTOM_EVENT.ADHIDEHALF:r.state.isEndPageShowing||r.operateVideoPlay("pause");break;case qy.CUSTOM_EVENT.APPENTERBACKGROUND:var o=Math.min(r.currentTime,r.videoDuration);i.inAdDetail?r.reportVideoPlay("partial","exit",o):r.reportVideoPlay("partial","app_exit",o);break;case qy.CUSTOM_EVENT.ENDPAGEINIT:r.isShowEndPage=r.getDataValueWithDefault("isShowEndPage",!1),r.isShowEndPage&&r.setState({loop:!1});break;case qy.CUSTOM_EVENT.ENDPAGEHIDE:r.isShowEndPage&&(r.setState({isEndPageShowing:!1}),r.operateVideoPlay("play"));break;case qy.CUSTOM_EVENT.ENDPAGESHOW:r.isShowEndPage&&r.setState({isEndPageShowing:!0});break;case qy.CUSTOM_EVENT.BTNTAP:r.reportVideoPlay(r.currentTime<r.videoDuration?"partial":"complete","land",r.videoDuration)}},r.handleError=function(e){r.adProxy.reportAdMonitorData(qy.IDKEY.AD_VIDEO_LOAD_FAILED,e)},r.handleTimeUpdate=function(e){var t,n=e.duration,i=e.position;if(null!=n&&null!=i){var o=Math.min(1,i/n);r.setStyle("videoProgressPlayed",{width:100*o+"%"}),r.isShowCountDown&&r.setState({countDownNumber:Math.ceil(n-i)+"s"}),r.emitComponentEvent(qy.VIDEO_EVENT.VIDEOTIMEUPDATE,{event:e,rate:o}),r.currentTime=1e3*i,r.videoDuration||(r.videoDuration=1e3*n);var a={currentTime:r.currentTime,duration:r.videoDuration},s=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;gm(s,a)}},r.handleEnded=function(e){var t;r.emitComponentEvent(qy.VIDEO_EVENT.VIDEOENDED,{event:e}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:r.baseType}}),r.reportVideoPlay("viewable","end",r.videoDuration),m.IS_IOS&&r.reportVideoPlay("partial","start");var n={currentTime:r.videoDuration,duration:r.videoDuration},i=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;gm(i,n),r.currentTime=0,r.isShowEndPage&&r.emitAdCustomEvent(qy.CUSTOM_EVENT.SHOWENDPAGE,{videoId:r.id}),r.setState({countDownNumber:null})},r.handlePlay=function(e){r.emitComponentEvent(qy.VIDEO_EVENT.VIDEOPLAY,{event:e}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.ADVIDEOPLAY),r.reportVideoPlay("partial","start",Math.min(r.currentTime,r.videoDuration))},r.handlePause=function(e){r.emitComponentEvent(qy.VIDEO_EVENT.VIDEOPAUSE,{event:e}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.ADVIDEOPAUSE),r.reportVideoPlay("partial","close",Math.min(r.currentTime,r.videoDuration))},r.baseType=r.options.baseType||qy.VIDEO_TYPES.AD,r.baseType===qy.VIDEO_TYPES.COMMON?r.initCommonComponent():r.baseType===qy.VIDEO_TYPES.AD&&r.initADComponent(),r.isShowVoice=r.getDataValueWithDefault("isShowVoice",!0),r.voicePlacement=r.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),r.state.muted=r.getDataValueWithDefault("muted",!0),r.state.loop=r.getDataValueWithDefault("loop",!0),r.isShowProgress=r.getDataValueWithDefault("isShowProgress",!0),r.isShowCountDown=r.getDataValueWithDefault("isShowCountDown",!1),r.countDownPlacement=r.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),r.objectFit=r.getDataValueWithDefault("objectFit","contain"),r.updateInnerStyle(),r.bindEvent(),setTimeout((function(){r.emitComponentEvent(qy.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})}),0),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.unbindEvent(),this.removeAdCustomListener()}},{key:"bindEvent",value:function(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}},{key:"unbindEvent",value:function(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}},{key:"initCommonComponent",value:function(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}},{key:"initADComponent",value:function(){var e,t=this.getAdData();this.src=this.getDataValue("src")||Object(Dg.get)(t,["video_info","videoUrl"])||Object(Dg.get)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||Object(Dg.get)(t,["video_info","thumbUrl"])||Object(Dg.get)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=Object(Dg.get)(t,["wx_game_video","short_video","video_duration"])||Object(Dg.get)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;var n={currentTime:0,duration:this.videoDuration},r=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;gm(r,n),this.emitAdCustomEvent(qy.CUSTOM_EVENT.REPORTTIMEPOINT,{key:"p8"})}},{key:"doAction",value:function(e){switch(e.payload.action){case qy.ACTIONS.VIDEOTOGGLEMUTED:this.toggleMuted();break;case qy.ACTIONS.VIDEOPLAY:this.operateVideoPlay("play");break;case qy.ACTIONS.VIDEOPAUSE:this.operateVideoPlay("pause");break;case qy.ACTIONS.VIDEOSTOP:this.operateVideoPlay("stop")}}},{key:"operateVideoPlay",value:function(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});var t=this.getElementById("video");(null==t?void 0:t[e])&&t[e]()}}},{key:"reportVideoPlay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.baseType===qy.VIDEO_TYPES.AD&&this.emitAdCustomEvent(qy.CUSTOM_EVENT.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}},{key:"render",value:function(){var e=this.src,t=this.poster,n=this.isShowVoice,r=this.mutedIconSrc,i=this.voiceIconSrc,o=this.voicePlacement,a=this.countDownPlacement,s=this.isShowProgress,c=this.isShowCountDown,u=this.objectFit,l=this.state,d=l.muted,f=l.loop,p=l.autoplay,h=l.countDownNumber,g=l.isEndPageShowing,v=["video-voice-box"],_=["video-count-down"];return v.push("video-voice-box-"+o),_.push("video-count-down-"+a),'\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="'+e+'"\n          poster="'+t+'"\n          controls="false"\n          muted="'+d+'"\n          loop="'+f+'"\n          autoplay="'+p+'"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="'+u+'"\n        >\n          '+(!g&&n?'\n            <view id="videovoicebox" bubble-event="false" class="'+v.join(" ")+'">\n              <image\n                src="'+(d?r:i)+'"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          ':"")+"\n          "+(s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':"")+"\n          "+(!g&&c&&h?'\n            <text id="video-count-down" class="'+_.join(" ")+'" value="'+h+'"></text>\n          ':"")+"\n        </video>\n      </view>\n    "}}]),n}(em);function ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var mm=function(e){Object(M.default)(n,e);var t=ym(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e)).style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},r.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},r.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",r.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",r.dislikeReasonHandlers={},r.handleTagClick=function(e){if(r.baseType===qy.FEEDBACK_TYPES.SIMPLE)return r.handleSimpleTagClick(e);var t=r.state,n=t.isShowFeedback,i=t.isShowFeedbackMenu;n||i?r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(r.setState({isShowFeedback:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitAdCustomEvent(qy.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),r.emitComponentEvent(qy.FEEDBACK_EVENT.TAGTAP,{event:e}))},r.handleDislikeClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitComponentEvent(qy.FEEDBACK_EVENT.DISLIKETAP,{event:e})},r.handleFeedbackBtnClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),r.emitComponentEvent(qy.FEEDBACK_EVENT.FEEDBACKBTNTAP,{event:e}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.FEEDBACKBTNTAP)},r.checkUseApx(),r.baseType=r.options.baseType||qy.FEEDBACK_TYPES.COMMON,r.bindEvent(),r.updateInnerStyle(),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"bindEvent",value:function(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}},{key:"unbindEvent",value:function(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(var e=0,t=Object.keys(this.dislikeReasonHandlers);e<t.length;e++){var n=t[e],r=this.dislikeReasonHandlers[n];this.offClick(n,r)}}},{key:"updateMenuPosition",value:function(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}},{key:"handleSimpleTagClick",value:function(e){this.emitAdCustomEvent(qy.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(qy.CUSTOM_EVENT.HIDEAD),this.emitComponentEvent(qy.FEEDBACK_EVENT.TAGTAP,{event:e})}},{key:"handleDislikeReasonClick",value:function(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(qy.FEEDBACK_EVENT.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(qy.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});var n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(qy.CUSTOM_EVENT.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(qy.CUSTOM_EVENT.HIDEAD)}},{key:"render",value:function(){var e=this.state,t=e.isShowFeedback,n=e.isShowFeedbackMenu,r=e.position,i=["feedback-list"],o=["feedback-list"];r&&(i.push("feedback-list-"+r.toLowerCase()),o.push("feedback-list-"+r.toLowerCase()));var a=this.baseType===qy.FEEDBACK_TYPES.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return'\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="'+(this.baseType===qy.FEEDBACK_TYPES.SIMPLE?"close-icon":"feedback-icon")+'" src="'+a+'"></image>\n        </view>\n        '+(t?'\n          <view id="menu1" key="menu1" class="'+i.join(" ")+'">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        ':"")+"\n        "+(n?'\n          <view id="menu2" key="menu2" class="'+o.join(" ")+'">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(em);function bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var wm=function(e){Object(M.default)(n,e);var t=bm(n);function n(e){var r;Object(N.default)(this,n),(r=t.call(this,e)).style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},r.state={isShowEndPage:!1},r.children=[],r.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",r.showTime=0,r.backgroundImage="",r.exposured=!1,r.viewableExposured=!1,r.viewableExposureTimer=null,r.handleAdCustomListener=function(e){switch(e.action){case qy.CUSTOM_EVENT.SHOWENDPAGE:r.setState({isShowEndPage:!0}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.ENDPAGESHOW),r.showTime=Date.now(),!r.exposured&&r.reportEndPageExposure(),r.exposured=!0,r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)),r.emitComponentEvent(qy.ENDPAGE_EVENT.SHOW);break;case qy.CUSTOM_EVENT.APPENTERBACKGROUND:r.state.isShowEndPage&&r.reportEndPageDuration();break;case qy.CUSTOM_EVENT.APPENTERFOREGROUND:r.state.isShowEndPage&&(r.showTime=Date.now());break;case qy.CUSTOM_EVENT.ADSHOWHALF:r.state.isShowEndPage&&(r.showTime=Date.now(),r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)));break;case qy.CUSTOM_EVENT.ADHIDEHALF:r.state.isShowEndPage&&(r.reportEndPageDuration(),r.viewableExposureTimer&&(clearTimeout(r.viewableExposureTimer),r.viewableExposureTimer=null))}},r.handleReplay=function(){r.setState({isShowEndPage:!1}),r.emitAdCustomEvent(qy.CUSTOM_EVENT.ENDPAGEHIDE),r.emitComponentEvent(qy.ENDPAGE_EVENT.HIDE),r.reportEndPage({act_type:1003}),r.emitComponentEvent(qy.ENDPAGE_EVENT.REPLAY)},r.handleContainerClick=function(e){var t;r.reportEndPage({act_type:1002}),null===(t=r.reporter)||void 0===t||t.handleClick(e,2)};var i=r.getAdData();return r.cardInfo=Object(lg.get)(i,["crtInfo",0,"card_info"],{}),r.cardInfo.end_page_type?(r.backgroundImage=r.cardInfo.head_bg_img,r.setStyle("refresh",{padding:"13apx 12apx"}),r.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),r.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),r.children=r.getChildren(),r.bindEvent(),r.updateInnerStyle(),setTimeout((function(){r.emitAdCustomEvent(qy.CUSTOM_EVENT.ENDPAGEINIT)}),0),r):Object(L.default)(r)}return Object(oe.default)(n,[{key:"updateState",value:function(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}},{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}},{key:"reportEndPageDuration",value:function(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}},{key:"reportEndPageExposure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}},{key:"reportEndPage",value:function(e){this.emitAdCustomEvent(qy.CUSTOM_EVENT.REPORTENDPAGE,{data:e})}},{key:"doAction",value:function(e){e.payload.action===qy.ACTIONS.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(qy.CUSTOM_EVENT.ENDPAGEHIDE),this.emitComponentEvent(qy.ENDPAGE_EVENT.HIDE))}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},i=this.template.id;r.feedBack={type:"feedback",id:i+"_endPageFeedback",style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:qy.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:qy.ACTIONS.TRIGGEREVENT,value:{eventName:qy.ENDPAGE_EVENT.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:i+"_endPageIconBig",style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:i+"_endPageNickBig",style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:i+"_endPageDescSmall",style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:i+"_endPageButton",style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:qy.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},r.iconSmall={type:"image",id:i+"_endPageIconSmall",style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:i+"_endPageNickSmall",style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:i+"_endPageLayoutSmall",style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:i+"_endPageDescBig",style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};var o=this.getDataValue("childrenConf");if(o)for(var a=0,s=Object.keys(o);a<s.length;a++){var c=s[a];r[c]&&Object(lg.mergeDeep)(r[c],o[c])}var u=[];return u=2===this.cardInfo.end_page_type?[r.feedBack,r.layoutSmall,r.descBig,r.button]:[r.feedBack,r.iconBig,r.nickBig,r.descSmall,r.button],3===e?u.concat(this.template.children||[]):u}},{key:"render",value:function(){var e=this.backgroundImage,t=this.children,n=this.refreshIconSrc;return'\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        '+(e?'<image src="'+e+'"></image>':"")+"\n        "+t.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src='+n+"></image>\n        </view>\n      </view>\n    "}}]),n}(em);function Om(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}wm.subComponents=function(){return{CustomItem:nm}};var Em=function(e){Object(M.default)(n,e);var t=Om(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).forType=r.options.baseType||qy.FOR_TYPES.COMMON,r.forArr=r.getDataValueWithDefault("forArr",[]),r.forType===qy.FOR_TYPES.COMMON?r.forArr=r.getDataValueWithDefault("forArr",[]):r.forType===qy.FOR_TYPES.ADS&&(r.forArr=r.getAdDatas()),r}return Object(oe.default)(n,[{key:"getSubComponentProps",value:function(e,t,n){var r=this.template,i=this.forArr;return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{idPrefix:this.idPrefix+(r.id||"")+t,forType:this.forType,forItem:i[Number(t)],template:r.children[Number(n)],forIndex:Number(t)})}},{key:"render",value:function(){var e=this.props.template;return"<Fragment>"+this.forArr.map((function(t,n){return e.children.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+n+":"+t+'"></CustomItem>\n      '})).join("\n")})).join("\n")+"</Fragment>"}}]),n}(em);Em.subComponents=function(){return{CustomItem:nm}};var Sm=n(73),Tm=1,Im=function(e,t){Tm=e/t},Am=/([+-]?\d+(?:\.\d+)?)apx/g,Cm=/([+-]?\d+(?:\.\d+)?)rpx/g,km=function(e){return(null==e?void 0:e.replace)?e.replace(Cm,(function(e,t){return function(e){if(0===e)return 0;var t=e/750*Sm.deviceInfo.screenWidth;return t<0&&(t=-t),t=Math.floor(t+1e-4),e<0?-t:t}(Number(t))+"px"})):e};function xm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Pm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Rm=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},jm=function(e){Object(M.default)(n,e);var t=Dm(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e)).style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},r.isViewable=!1,r.isPlaying=!1,r.animated=!1,r.timerSet=new Set,r.handleMaskClick=function(e){var t,n=null!=r.moveTime?(Date.now()-r.moveTime)/r.duration*r.size:0;t=r.animated?-r.animateCount*r.size+n:-n;var i=(r.isCol?e.relativeY:e.relativeX)-t,o=Math.floor(i/r.size);r.emitComponentEvent(qy.CAROUSEL_EVENT.UNITTAP,{index:o,event:e})},r.handleAdCustomEvent=function(e){var t=e.action;[qy.CUSTOM_EVENT.ADSHOWHALF].includes(t)?(r.isViewable=!0,r.autoplay()):[qy.CUSTOM_EVENT.ADHIDEHALF].includes(t)&&(r.isViewable=!1,r.clearTimers())},r.moveTime=null,r.baseType=r.options.baseType||qy.CAROUSEL_TYPES.ROWLOOP,r.showCount=r.getDataValueWithDefault("showCount",0),r.allCount=r.getDataValueWithDefault("allCount",0),r.animateCount=r.allCount-r.showCount,r.size=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:km(e);return t&&"string"==typeof t?t.replace(Am,(function(e,t){return Number(t*Tm)+"px"})):t}(r.getDataValueWithDefault("size","0px")).replace("px",""),r.duration=r.getDataValueWithDefault("duration",1500),r.disabled=r.getDataValueWithDefault("disabled",!1),r.allIndexList=Array.from({length:r.allCount}).map((function(e,t){return t})),r.isCol=r.baseType===qy.CAROUSEL_TYPES.COLUMNLOOP,r.onClick("mask",r.handleMaskClick),r.baseType===qy.CAROUSEL_TYPES.ROWLOOP?r.initCarousel("width"):r.baseType===qy.CAROUSEL_TYPES.COLUMNLOOP&&r.initCarousel("height"),r.updateInnerStyle(),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}},{key:"initCarousel",value:function(e){this.setStyle("container",Object(mt.default)({},e,this.showCount*this.size)),this.setStyle("list",Object(mt.default)({},e,this.allCount*this.size)),this.addAdCustomListener(this.handleAdCustomEvent)}},{key:"clearTimers",value:function(){var e,t=xm(this.timerSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"autoplay",value:function(){return Rm(this,void 0,void 0,Vt.a.mark((function e(){var t,n,r,i,o=this;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isViewable&&!this.isPlaying){e.next=2;break}return e.abrupt("return");case 2:if(t=this.baseType===qy.CAROUSEL_TYPES.ROWLOOP?"left":"top",!this.disabled){e.next=8;break}this.emitComponentEvent(qy.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList.slice(0,this.showCount)||[]}),this.isPlaying=!1,e.next=29;break;case 8:if(!(this.animateCount<=0)){e.next=13;break}this.emitComponentEvent(qy.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList||[]}),this.isPlaying=!1,e.next=29;break;case 13:for(this.isPlaying=!0,n=function(e){var t=o.animated,n=setTimeout((function(){o.timerSet.delete(n);var r=t?o.allIndexList.slice(o.allCount-e-o.showCount,o.allCount-e):o.allIndexList.slice(e,e+o.showCount);o.emitComponentEvent(qy.CAROUSEL_EVENT.SHOWCHANGE,{list:r})}),e*o.duration);o.timerSet.add(n)},r=0;r<this.animateCount;r+=1)n(r);return this.moveTime=Date.now(),e.prev=17,e.next=20,this.doAnimation({id:"list",emitEvent:!1,animation:{keys:[Object(mt.default)({offset:0},t,this.animated?-1*this.animateCount*this.size:0),Object(mt.default)({offset:1},t,this.animated?0:-1*this.animateCount*this.size)],duration:this.duration*this.animateCount,easing:"linear"}});case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:this.animated=!this.animated,this.isPlaying=!1,this.moveTime=null,i=setTimeout((function(){o.timerSet.delete(i),o.autoplay()}),this.duration/4),this.timerSet.add(i);case 29:case"end":return e.stop()}}),e,this,[[17,22]])})))}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.props.template.children,t=this.baseType,n=this.allCount,r=this.showCount;return e&&e.length&&n&&r?'\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="'+["carousel-list",t===qy.CAROUSEL_TYPES.ROWLOOP?"carousel-row":"carousel-col"].join(" ")+'">\n          '+e.map((function(e,t){return'\n            <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n          '})).join("\n")+"\n        </view>\n      </view>\n    ":"<view></view>"}}]),n}(em);function Nm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}jm.subComponents=function(){return{CustomItem:nm}};var Mm=function(e){Object(M.default)(n,e);var t=Nm(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,e)).style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},r.state={countdownValue:""},r.children=[],r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,i=void 0===n?{}:n;if(t===qy.CUSTOM_EVENT.CHANGECOUNTDOWN){var o=r.getElementById("countdownvalue"),a=2===i.value.toString().length?18:11;r.setStyle("countdownvalue",{width:a}),o&&(o.value=i.value)}},r.children=r.getChildren(),r.updateInnerStyle(),r.addAdCustomListener(r.handleAdCustomEvent),r}return Object(oe.default)(n,[{key:"destroy",value:function(){Object(Dy.default)(Object(B.default)(n.prototype),"destroy",this).call(this)}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:qy.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:qy.ACTIONS.TRIGGEREVENT,value:{eventName:qy.ENDPAGE_EVENT.VIDEODISLIKE}}]},data:{}}};var i=this.getDataValue("childrenConf");if(i)for(var o=0,a=Object.keys(i);o<a.length;o++){var s=a[o];r[s]&&Object(lg.mergeDeep)(r[s],i[s])}var c=[];return c=[r.feedBack],3===e?c.concat(this.template.children||[]):c}},{key:"render",value:function(){return'\n      <view id="container" class="countdown" bubble-event="false">\n        '+this.children.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    '}}]),n}(em);Mm.subComponents=function(){return{CustomItem:nm}};var Lm=im;function Bm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function Fm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Um(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Um(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Um(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wm="1030436212907001",Vm=function(e){return Object(Pu.getPrivateThis)(e)},Gm=function(){return w_.logReport.apply(void 0,arguments)},Hm=Qh()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root,zm="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",Ym="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",qm="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",Km=1e3,Jm=2e3,Xm=500,$m="",Zm=0,Qm=0,eb=m.PLATFORM,tb=m.IS_IOS,nb=m.IS_ANDROID,rb=!1,ib=!0,ob="portrait",ab=0,sb=0,cb=0,ub=0,lb=0,db=0,fb={};w.default.onReady((function(){$m=Object(Dg.getInitDeviceOrientation)();var e=Object(tt.getStableSystemInfo)(),t=Object(tt.getInitScreenSize)();fb=w.default.safeArea||{},$m=$m||e.deviceOrientation||"",Zm=t.screenWidth,Qm=t.screenHeight;try{w.default.global.window.pageOrientation&&(ob=w.default.global.window.pageOrientation)}catch(e){}if(ib=Object(A.isGame)(),tb?rb=!0===w.default.showStatusBar:nb&&(rb=!0===w.default.showStatusBar||"true"===w.default.showStatusBar),ib){var r=n(114).default;r.onTouchStart((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(ab=Math.round(e.changedTouches[0].clientX),sb=Math.round(e.changedTouches[0].clientY),cb=0,ub=0,db=0,lb=+new Date)})),r.onTouchEnd((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(cb=Math.round(e.changedTouches[0].clientX),ub=Math.round(e.changedTouches[0].clientY),db=+new Date-lb)}))}}));var pb=function(e,t){var n=e.touchendTimeStamp-e.touchstartTimeStamp;if(e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0){var r=t.screenHeight>t.screenWidth?"portrait":"landscape";Object(jg.reportMMData)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:t.screenWidth,screenheight:t.screenHeight,device_orientation:r})}},hb=function(){var e=Vm(this);try{if(tb&&Object(A.isApp)()&&e.adProxy.isValidCondition("widget_gray_measure_text")){var t;Object(O.invokeMethod)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&(Object(O.invokeMethod)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{var n=Iy.default.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=n),!1===e.downloadButton.style.hidden&&(n=Iy.default.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=n+2,e.downloadButtonText.style.width=n,e.downloadProgressText.style.width=n),e.data.flooringPage&&2===e.pageType&&(n=Iy.default.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=n)}}catch(t){e.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_BUTTON_WIDTH_ERROR,t)}},gb="video-ad has been destroyed",vb=function(){var e=Vm(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((function(){var t="即将跳转试玩",n={text:t=tb?t+" ":t,fontSize:12},r=Object(lg.measureText)(n)||72,i=Object(lg.measureText)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=r,e.playableGiveUp.style.width=i,e.playableTipsWrap.style.width=r+i+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=r+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=i+20,Object(w_.timeout)(300).then((function(){return e.playableTipsWrap.animate({left:0,duration:200})}))}))},_b=function(e){if(!Ew.call(this)){var t=Vm(this);if("object"===Object(R.default)(e)&&e.length>0){var n,r=Fm(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i]&&(t[i].style.width=Zm,t[i].style.height=Qm)}}catch(e){r.e(e)}finally{r.f()}}}},yb=function(){if(Ew.call(this))return Promise.reject({errMsg:gb});var e=Vm(this);if(!e.data)return!1;var t=e.data,n=t.crt_size,r=t.isGaussBlur,i=t.isExpandStyle;return n===dg.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916&&"landscape"===$m&&!r&&!i},mb=function(){var e=this;if(Ew.call(this))return Promise.reject({errMsg:gb});var t=Vm(this);return wb.call(this,"hide").then((function(){ib||(t.adProxy.setPageOrientation($m),nb&&(t.updateScreenInfoTimer&&(clearTimeout(t.updateScreenInfoTimer),t.updateScreenInfoTimer=null),t.updateScreenInfoTimer=setTimeout((function(){var n=Object(tt.getSystemInfoSync)(),r=!1,i=0;Qm===n.screenHeight&&Zm===n.screenWidth||(r=!0,i=yb.call(e)?n.screenWidth-Qm:n.screenHeight-Qm),Zm=n.screenWidth,Qm=n.screenHeight,yb.call(e)&&(Zm=n.screenHeight,Qm=n.screenWidth,t.container.style.left=(Qm-Zm)/2,t.container.style.top=(Zm-Qm)/2),i&&(t.cardContainer.style.top+=i);var o=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];Iw.call(e)&&o.push("video"),_b.call(e,o),r&&Iw.call(e)&&(Tb.call(e,!0),Rw.call(e),jw.call(e))}),1e3)))}))},bb=function(){if(Ew.call(this))return Promise.reject({errMsg:gb});var e=Vm(this);return wb.call(this,"show").then((function(){ib||e.adProxy.setPageOrientation(ob)})).catch((function(t){throw e.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},wb=function(e){var t=Vm(this);return Cw.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},Ob=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ew.call(this))return!1;var n=Vm(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&rw.call(this,e,i),r},Eb=function(){var e=this;if(!Ew.call(this)){var t=Vm(this),n=t.data,r=n.product_type,i=n.button_action,o=n.card,a=o.icon,s=o.name,c=o.wording,u=o.showTime,l=o.headBgImg,d=o.mpTagType,f=n.app,p=n.flooringPage,h=kw.call(this),g=h||!t.expandCardUseLogoStrategy;t.cardShowTime=u,t.appIcon.src=a,t.appName.value=Object(w_.truncate)(s,20),t.appWording.value=c,t.appIcon.style.borderRadius=10,-1===[12,19].indexOf(r)&&("portrait"===$m?t.appIcon.style.borderRadius=27:"landscape"===$m&&(t.appIcon.style.borderRadius=22)),t.button.value=i.button_text,i.button_text||(12===r?t.button.value="下载":19===r&&(t.button.value="查看")),23===r&&t.adProxy.checkFollow(t.data.app.uin).then((function(n){var r=n?"查看公众号":i.button_text||"关注公众号";t.button.value=r,hb.call(e),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value=r:t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value=r:t.pageType||(t.defaultPageButton.value=r),t.expandCardButton.value=r,Qb.call(e,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:r})})).catch((function(){var n=f.isFollowed?"查看公众号":i.button_text||"关注公众号";t.button.value=n,hb.call(e),Qb.call(e,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:n})})),1===t.buttonTextType&&(t.button.value=i.button_text,Qb.call(this,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:i.button_text})),hb.call(this),t.pageType=(null==p?void 0:p.landpage_type)?p.landpage_type:0,Vb.call(this),g&&(t.expandCardAppIcon.bubbleEvent=!1),t.expandCardAppIcon.src=a,t.expandCardAppName.value=Object(w_.truncate)(s,20),t.expandCardAppWording.value=c,t.expandCardButton.value=t.button.value;var v=t.expandCardInfoContainer.style;if("portrait"===$m?(v.width=Zm,v.justifyContent="flex-start",v.paddingLeft=0,v.paddingTop=48,v.height=400/375*Zm,v.bottom=0,v.position="absolute"):(v.justifyContent="center",v.paddingLeft=.672*Qm,v.width=v.paddingLeft+300,v.paddingTop=0,v.height=Qm,v.bottom=null,v.position=null),!g){var _=Iy.default.getTextWidth(Object(w_.truncate)(s,20),17);t.expandCardAppIcon.style.left=134-_/2;for(var y=0,m=Object.keys(xy);y<m.length;y++){var b=m[y],w=xy[b];t[b]&&Object.assign(t[b].style,w)}}if(p&&1===t.pageType&&"portrait"===$m)t.pageAppIcon.src=a,t.pageAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageAppName.value=Object(w_.truncate)(s,20),t.pageAppWording.value=c,t.pageButton.value=t.button.value,t.imgBaseName="pageImg",t.pageImgContainer.style.width=Zm,t.pageImgContainer.style.height=Zm,t.pageImgBox.style.width=3*Zm,t.pageImgBox.style.height=Zm,t.pageImgBox.style.left=0,t.pageInfoContainer.style.width=Zm,t.pageInfoContainer.style.height=Qm-Zm,t.pageInfoContainer.style.top=Zm,t.pageImgTips.style.top=Zm-20,t.pageImgTips.style.left=Zm/2-17.5,tb&&(t.pageImgIcon0.style.borderRadius=4,t.pageImgIcon1.style.borderRadius=4,t.pageImgIcon2.style.borderRadius=4),t.pageImgIcon0.style.backgroundColor="#ffffff",t.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",t.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",Ub.call(this),Tb.call(this);else if(p&&2===t.pageType&&"portrait"===$m)t.pageCardContainer.style.width=Zm,t.pageCardAppIcon.src=a,t.pageCardAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageCardAppName.value=Object(w_.truncate)(s,20),t.pageCardAppWording.value=c,t.pageCardButton.value=t.button.value,t.pageCard.style.width=Zm,t.pageCardSplitLine.style.width=Zm-20,t.pageCardHotArea.style.width=Zm,t.pageCardImgContainer.style.width=Zm-20,t.pageCardImgBox.style.width=Bb.call(this,{padding:10}),t.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",t.video.style.padding=0,t.video.style.paddingBottom=0,t.imgBaseName="pageCardImg",Ub.call(this),Tb.call(this),t.pageHandler.style.hidden=!1;else if(p&&[3,4].indexOf(t.pageType)>-1){var O="视频结束后可试玩",E={text:O=tb?O+" ":O,fontSize:12},S=Object(lg.measureText)(E)||100;t.playableTipsContent.style.width=S,t.playableTipsWrap.style.width=S+24,t.cardContainer.style.top-=32}else if(!t.pageType){if(h&&(t.defaultPageAppIcon.bubbleEvent=!1),t.defaultPageAppIcon.src=a,t.defaultPageAppName.value=Object(w_.truncate)(s,20),t.defaultPageAppWording.value=c,t.defaultPageButton.value=t.button.value,!h){var T=Iy.default.getTextWidth(Object(w_.truncate)(s,20),17);t.defaultPageAppIcon.style.left=134-T/2;for(var I=0,A=Object.keys(ky);I<A.length;I++){var C=A[I],k=ky[C];t[C]&&Object.assign(t[C].style,k)}}t.defaultPageBackgroundImage.src=l||"",Rw.call(this)}if(8===d){var x=+new Date;gg({buttonText:t.button.value,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:x,endTime:n,showTime:t.showDetailTime||0}),e){var r="- 最近已有"+e.count+"人"+e.descText+" -";t.pageType?1===t.pageType&&(t.pageAppConversion.value=r,t.pageAppConversion.style.hidden=!1):(t.defaultPageAppConversion.value=r,t.defaultPageAppConversion.style.hidden=!1),t.expandCardAppConversion.value=r,t.expandCardAppConversion.style.hidden=!1}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0})).catch((function(e){t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0,t.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_RELATION_FETCH_ERROR,e)}))}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0;t.androidAppState=0,t.button.style.hidden=!1,t.pageButton.style.hidden=!1,t.defaultPageButton.style.hidden=!1,t.expandCardButton.style.hidden=!1,t.downloadButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!0,12===r&&t.adProxy.isValidCondition("widget_gray_video_download_v2")&&(t.button.style.hidden=!0,t.downloadButton.style.hidden=!1,t.downloadButtonText.value=i.button_text,t.downloadProgressText.value=i.button_text,hb.call(this),1===t.pageType&&(t.pageButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!1,t.pageDownloadButtonText.value=i.button_text,t.pageDownloadProgressText.value=i.button_text))}},Sb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ew.call(this))return!1;var t=Vm(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){var n=e.y,r=t.flooringPageIsShow?t.video.style.height-180:0,i=t.flooringPageIsShow?t.video.style.height:0;return!!(n>r&&n<i)}if("top"===e.direction){var o=e.y,a=0,s=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(o>a&&o<s)}}return!1},Tb=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ew.call(this)){var t,n=Vm(this),r="",i="",o=0,a=0,s=0,c=0,u=(Qm-n.video.style.height)/2;1===n.pageType?(n.pageHandler.style.width=Zm,n.pageHandler.style.height=Zm,r="pageImgBox",a=Zm/4,o=3*Zm/4-n.pageImgBox.style.width,t={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-Zm,-2*Zm]}):2===n.pageType&&(n.pageHandler.style.width=Zm,n.pageHandler.style.height=n.video.style.height,n.pageHandler.style.top=(Qm-n.video.style.height)/2,(Qm!==n.video.style.height||e)&&(n.pageMask.style.hidden=!1,n.pageMask.style.width=Zm,n.pageMask.style.height=(Qm-n.video.style.height)/2,n.pageMask.style.top=(Qm+n.video.style.height)/2),r="pageCardImgBox",i="pageCardBody",o=Zm-(a=60)-n.pageCardImgBox.style.width,s=n.video.style.height-n.pageCardBody.style.height+10,!ib&&nb&&(s=n.video.style.height-n.pageCardBody.style.height+u+10),c=s+180,n.pageCardBody.style.top=c,t={yRevise:!0,directionMap:{up:s,down:c},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:Zm-n.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),n.flooringPageInfos={xMin:o,xMax:a,yMin:s,yMax:c,xContainer:r,yContainer:i,infos:t}}},Ib=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var n=Vm(this),r=!0===n.flooringPageIsShow?t.max:t.min;return n.pageCardBody.animate({top:r,duration:50}).then((function(){return Yb.call(e,t)})).then((function(){return kb.call(e)}))}},Ab=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var t=Vm(this),n=e.event?e.event:{};if(xb.call(this,n))if(t.flooringPageIsShow){var r=t.pageCard.getAbsolutePosition(),i=r.top,o=r.top+e.cardHeight,a=t.pageCardImgContainer.getAbsolutePosition(),s=a.top;if(n.y>i&&n.y<o){var c=t.pageCardButton.getAbsolutePosition(),u=c.top,l=c.top+e.buttonHeight,d=c.left,f=c.left+e.buttonWidth;n.y>u&&n.y<l&&n.x>d&&n.x<f?Pb.call(this,n,"button",my.REWARD_PAGE_BUTTON):Pb.call(this,n,"card",my.REWARD_PAGE_CARD)}else n.y>=s&&n.y<=t.video.style.height?Pb.call(this,n,"img",my.REWARD_PAGE_IMAGE):Ib.call(this,e)}else{var p=t.pageCard.getAbsolutePosition(),h=p.top,g=p.top+e.cardHeight,v=t.pageCardButton.getAbsolutePosition(),_=v.top,y=v.top+e.buttonHeight,m=v.left,b=v.left+e.buttonWidth;n.y>h&&n.y<g?n.y>_&&n.y<y&&n.x>m&&n.x<b?Pb.call(this,n,"button",my.REWARD_PAGE_BUTTON):Pb.call(this,n,"card",my.REWARD_PAGE_CARD):Ib.call(this,e)}}},Cb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var t=Vm(this),n=e.imgBox?e.imgBox:"",r=e.xMin?e.xMin:0,i=e.xMax?e.xMax:0,o=e.xHead?e.xHead:0,a=e.xTail?e.xTail:0;return t[n].nextLayout((function(){var e=t[n].style.left,s=e;if(e>o&&e<=i?s=o:e>=r&&e<a&&(s=a),s!==e)return t[n].animate({left:s,duration:50})}))}},kb=function(){if(!Ew.call(this)){var e=Vm(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)}},xb=function(e){if(!Ew.call(this)){var t=Vm(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)}},Pb=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;Ew.call(this)||xb.call(this,e)&&Db.call(this,e,t,n)},Db=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(!Ew.call(this)){var i=Vm(this);if([1,2].includes(i.pageType)&&Hb.call(this,e,n),nb&&12===i.data.product_type&&1===i.pageType&&i.adProxy.isValidCondition("widget_gray_video_download_v2"))_w.call(this);else if(tb&&46===i.data.product_type&&6===i.data.dest_type)Promise.race([iw.call(this,e,r),Object(w_.timeout)(500)]).then((function(){aw.call(t,{button:5},e),hw.call(t)})).catch((function(){aw.call(t,{button:5},e),hw.call(t)}));else{iw.call(this,e,r),aw.call(this,{button:5},e);var o={};23===i.data.product_type&&(o["button"===n?"isButton":"toOfficalAccountDetail"]=!0),hw.call(this,o)}}},Rb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var t=Vm(this),n=e.container?e.container:"",r=e.event?e.event:{},i=t[n].getAbsolutePosition();return{x:i.left+r.x,y:i.top+r.y}}},jb=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ew.call(this)){var n=Vm(this);n.isPress=e,n.startPosX=(null==t?void 0:t.x)?t.x:0,n.startPosY=(null==t?void 0:t.y)?t.y:0,n.lastPosX=(null==t?void 0:t.x)?t.x:0,n.lastPosY=(null==t?void 0:t.y)?t.y:0,n.lastSecondPosX=(null==t?void 0:t.x)?t.x:0,n.lastSecondPosY=(null==t?void 0:t.y)?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]}},Nb=function(){if(!Ew.call(this))for(var e=Vm(this),t=e.imgBaseName,n=0;n<3;n++){var r=e[t+n].getAbsolutePosition();e["pageImgIcon"+n].style.backgroundColor=0===r.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},Mb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var t=Vm(this),n=e.event?e.event:{},r=e.direction?e.direction:"left",i="top"===r?n.y-t.lastPosY:n.x-t.lastPosX;nb&&(i="top"===r?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);var o=e.critical?e.critical:0;return"top"===r?i<0&&Math.abs(i)>=o?"up":"down":i<0&&Math.abs(i)>=o?"right":"left"}},Lb=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ew.call(this))return Promise.reject({errMsg:gb});var n=Vm(this),r=t.direction?t.direction:"left",i=t.imgBox?t.imgBox:"",o="top"===r?t.event.y:t.event.x,a=Mb.call(this,t),s=t.directionMap?t.directionMap:{},c=t.posQueue?t.posQueue:[],u=null;if(Object.keys(s).length>0)u=s[a]?s[a]:0;else{o=n[i].style[r],c.sort((function(e,t){return e-t}));for(var l=0,d=c.length-1;l<d;){var f=Math.floor((l+d)/2),p=d-l,h=c[f];if(o===h){u=h;break}if(o>h?l=f:d=f,p<=1)break}if(!u)if(t.decideByDirection)u=c[a]||("right"===a?c[l]:c[d]);else{var g=c[d],v=c[l];u=Math.abs(o-g)>=Math.abs(o-v)?v:g}}return Promise.resolve().then((function(){n[i].style[r]=u})).then((function(){if(t.logPagePull)return Yb.call(e,t);jb.call(e)})).then((function(){if(t.showTips)return kb.call(e)})).then((function(){if(t.setImgTips)return n[i].nextLayout((function(){Nb.call(e)}))}))},Bb=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)&&t&&"object"===Object(R.default)(t)){var n=Vm(this),r=t.padding?t.padding:0,i=n.pageType,o=n.data.flooringPage.img_list?n.data.flooringPage.img_list:[];o="string"==typeof o?JSON.parse(o):o;var a=0;return o.forEach((function(t,n){var o=Fb.call(e,{pageType:i,width:t.width,height:t.height}).width;a+=0===n?o:r+o})),a}},Fb=function(e){if(!Ew.call(this)){var t={};if(!e||"object"!==Object(R.default)(e))return t;var n=e.pageType,r=e.width,i=e.height;return 1!==n&&n?2===n&&r===i?(t.scale=150/r,t.width=150,t.height=150):2===n&&r!==i&&(t.scale=150/i,t.width=150*r/i,t.height=150):(t.scale=Zm/r,t.width=Zm,t.height=Zm),t}},Ub=function(){var e=this;if(!Ew.call(this)){var t=Vm(this),n=t.pageType,r=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];r="string"==typeof r?JSON.parse(r):r;var i=t.imgBaseName?t.imgBaseName:"";r.forEach((function(r,o){var a=i+o,s=Fb.call(e,{pageType:n,width:r.width,height:r.height}),c=s.width,u=s.height,l=s.scale;t[a].scale=l,t[a].style.width=c,t[a].style.height=u,t[a].src=r.image_url}))}},Wb=function(){var e=this;if(Ew.call(this))return Promise.resolve();var t=Vm(this);if(!t.data.flooringPage)return Promise.resolve();ew.call(this,qy.REWARDEDVIDEO_EVENT.REWARDEDVIDEOSHOWFLOORINGPAGE);var n=t.flooringPageInfos,r=n.yMin,i=n.yMax;return 2!==t.pageType||t.flooringPageIsShow?1===t.pageType?t.pageContainer.animate({left:0,duration:300}).then((function(){return Yb.call(e)})):t.pageType?Promise.resolve():(t.cardContainer.animate({opacity:0,duration:280}),t.defaultPageContainer.animate({opacity:1,duration:280}).then((function(){return Yb.call(e)}))):t.pageCardBody.animate({top:r,duration:50}).then((function(){return t.flooringPageAutoShow=!0,Yb.call(e,{min:r,max:i})})).then((function(){return kb.call(e)}))},Vb=function(){if(!Ew.call(this)){var e=Vm(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(var t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState["img"+t]={exposure:0,click:0}}}},Gb=function(){if(!Ew.call(this)){var e=Vm(this);if(tb){for(var t=0;t<3;t++)e["pageImg"+t].src=qm,e["pageCardImg"+t].src=qm;e.pageCardImg3.src=qm,e.pageAppIcon.src=qm,e.pageCardAppIcon.src=qm,e.pageCardTipIcon.src=qm}}},Hb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!Ew.call(this)){var n=Vm(this);if("img"===t)for(var r=n.imgBaseName,i=0;i<=3&&(3!==i||2===n.pageType);i++){var o=n[r+i].getAbsolutePosition(),a=n[r+i].style.width,s=n[r+i].style.height,c=o.left,u=o.left+a,l=o.top,d=o.top+s;e.x>=c&&e.x<=u&&e.y>=l&&e.y<=d&&(n.flooringPageState["img"+i].click+=1)}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)}},zb=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ew.call(this)){var r=Vm(this);if(n){if(r.pageType)for(var i=r.imgBaseName,o=0;o<=3&&(3!==o||2===r.pageType);o++){var a=r[i+o].getAbsolutePosition(),s=r[i+o].style.width,c=-s/2,u=Zm-s/2;a.left>c&&a.left<u&&(r.flooringPageState["img"+o].exposure+=1)}}else r.exposureTimer&&(clearTimeout(r.exposureTimer),r.exposureTimer=null),r.exposureTimer=setTimeout((function(){return e.call(t,!0)}),1e3)}},Yb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var t=Vm(this);if(2===t.pageType){var n=e.min?e.min:0,r=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===r&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,qb.call(this,{type:2,staytime:0,componentsstartstr:""}),qb.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Vb.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,qb.call(this,{type:4,staytime:0,componentsstartstr:""}),zb.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,qb.call(this,{type:5,staytime:0,componentsstartstr:""}),qb.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Vb.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,qb.call(this,{type:1,staytime:0,componentsstartstr:""}),zb.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,qb.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Vb.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,qb.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),zb.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,qb.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Vb.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,qb.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),zb.call(this)))}},qb=function(e){if(!Ew.call(this)){var t=Vm(this);1===t.pageType&&delete e.type;var n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)}},Kb=function(){var e=this;if(Ew.call(this))return Promise.reject({errMsg:gb});var t=Vm(this);return t.adProxy.fetch().then((function(n){try{t.adProxy.setTimePoint("p4");var r=Object.keys(t.emitter.emitter).includes("_events")?Object.keys(t.emitter.emitter._events):[];return"devtools"!==eb||r.includes("_error")?(t.data=n,t.isData=!0,Jb.call(e,{screenWidth:Zm,screenHeight:Qm,deviceOrientation:$m}),t.adProxy.preloadLanding(),t.emitter.emit("load"),void t.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(e){throw t.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_PARSE_ERROR,e),{}}}))},Jb=function(e){if(!Ew.call(this)){var t=Vm(this),n=t.data;if($m=e.deviceOrientation||(e.screenHeight>e.screenWidth?"portrait":"landscape"),yb.call(this))Zm=e.screenHeight,Qm=e.screenWidth,t.container.style.left=(Qm-Zm)/2,t.container.style.rotate=-90,m.IS_IOS&&(t.topBar.style.top=fb.top?44:12,t.topBarFix.style.top=fb.top?44:12,t.adFeedbackList.style.top=fb.top?78:46,t.adFeedbackMenu.style.top=fb.top?78:46);else if(Zm=e.screenWidth,Qm=e.screenHeight,t.container.style.left=0,t.container.style.rotate=0,m.IS_IOS){var r="portrait"===$m?fb.top?44:12:10,i="portrait"===$m?fb.top?78:46:44;t.topBar.style.top=r,t.topBarFix.style.top=r,t.adFeedbackList.style.top=i,t.adFeedbackMenu.style.top=i}t.container.style.top=Qm,t.video.style.padding=8,t.video.style.paddingBottom=16;if(_b.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),Zm<Qm)t.cardContainer.style.width=Zm-16,t.cardContainer.style.top=Qm-130,t.cardContainer.style.left=8,t.topBar.style.left=0,t.topBar.style.width=Zm,t.card.style.height=90;else if(Zm>=Qm){var o=fb.top||0;t.cardContainer.style.width=348,t.cardContainer.style.top=Qm-104,t.cardContainer.style.left=o+18,t.topBar.style.width=Zm-2*o-16,t.topBar.style.left=o+8,t.card.style.height=72}if(rb&&(t.topBar.style.top=t.topBar.style.top+30,t.topBarFix.style.top=t.topBarFix.style.top+30,t.adFeedbackList.style.top=t.adFeedbackList.style.top+30,t.adFeedbackMenu.style.top=t.adFeedbackMenu.style.top+30),ib?t.container.style.fixed&&delete t.container.style.fixed:t.container.style.fixed=!0,t.dialog.style.top=Qm>138?(Qm-138)/2:0,t.dialog.style.left=Zm>300?(Zm-300)/2:0,t.dialogCloseTip.style.top=(Qm-36)/2,t.dialogCloseTip.style.left=(Zm-124)/2,Aw.call(this))t.cardContainer.style.hidden=!0,t.container.style.backgroundColor="rgba(0, 0, 0, 0)",t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!0,t.video.style.hidden=!0,t.video.src&&(t.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{t.container.style.backgroundColor="#000000";var a=n.video,s=a.src,c=a.poster,u=a.duration,l=n.isExpandStyle,d=n.product_type;t.cardContainer.style.hidden=l,t.expandCardContainer.style.hidden=!l,tb&&t.video.src===s&&t.video.seek(0),tb?(t.video.poster=c,Object(w_.timeout)(500).then((function(){t.video.src=s}))):(t.video.src=s,t.video.poster=c),t.adProxy.setTimePoint("p8"),t.buttonTextType=t.data.button_action.text_type||0,jw.call(this),nb&&(t.preloadVideo=!0,t.preloadVideoSuccess=!1,t.adProxy.preloadVideo([s]).catch((function(e){t.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_PRELOAD_ERROR,e)})));var f=t.data.rewardedTime,p=Math.ceil((u>f?f:u)/1e3).toString();t.countDown.value=p,t.countDownFix.value=p,t.countDownAppend.value="秒后可获得奖励",t.countDownAppendFix.value="秒后可获得奖励",t.countDown.style.width=2===p.length?19:12,t.countDownFix.style.width=2===p.length?19:12,t.countDownAppend.style.width=100,t.countDownAppendFix.style.width=100,Eb.call(this),t.adProxy.isValidCondition("widget_gray_close_v2")&&(t.adFeedback.style.hidden=!1,t.close.value="关闭",t.close.style.width=29),12===d&&(t.adProxy.setAppInstallState(!1),vw.call(this));var h=t.adProxy.data.adDynamicList;$b.call(this,{screenWidth:Zm,screenHeight:Qm,deviceOrientation:e.deviceOrientation},h)}}},Xb=null,$b=function(e,t){var n=Vm(this);(null==t?void 0:t.length)&&(n.dynamicElems||(n.dynamicElems={}),n.dynamicOldStyle||(n.dynamicOldStyle={}),n.dynamicEmitter||Zb.call(this),t.forEach((function(t){var r,i,o,a,s=t.op,c=t.expr;if(!c||Yy(c,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:Object.assign({},e),time:Date.now()},$scope:{private:n,safeArea:fb}},{}))if("insert"===s){var u=t.id,l=t.parent,d=t.tpl,f=t.bubbleEvent;if(null===(r=n.dynamicElems)||void 0===r?void 0:r[u]){if(e.screenWidth===Xb)return;null===(o=(i=n.dynamicElems[u]).remove)||void 0===o||o.call(i),Object(Cy.unmount)(null===(a=n.dynamicElems[u])||void 0===a?void 0:a.referComponent)}var p=Object(Cy.render)(nm,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:d,systemInfo:Object.assign({},e),scope:{private:n,safeArea:fb},adData:n.adProxy.data,adDatas:n.adProxy.datas,adCustomId:Ay,isEmpty:!1},!1);!1!==f&&p.updateBubbleEvent(),n.dynamicElems[u]=p.getRootElement(),n[l]&&n[l].add(n.dynamicElems[u])}else if("setStyle"===s){var h=t.id,g=t.style,v=n[h]||n.dynamicElems[h]||null;if(v){var _=!1;n.dynamicOldStyle&&!n.dynamicOldStyle[h]&&(_=!0,n.dynamicOldStyle[h]={});for(var y=0,m=Object.keys(g);y<m.length;y++){var b=m[y];_&&(n.dynamicOldStyle[h][b]=v.style[b]),v.style[b]=g[b]}}}else if("setAttrs"===s){var w=t.id,O=t.attrs,E=n[w]||n.dynamicElems[w]||null;if(E)for(var S=0,T=Object.keys(O);S<T.length;S++){var I=T[S];E[I]=O[I]}}})),Xb=e.screenWidth),ew.call(this,qy.REWARDEDVIDEO_EVENT.REWARDEDVIDEOHANDLEDYNAMICDONE)},Zb=function(){var e=this,t=Vm(this);t.dynamicEmitter=new by,t.dynamicEmitter.on("adCustomEvent",(function(n){var r,i,o=n.action,a=n.adCustomId,s=n.value;if(a===Ay)if(o===qy.CUSTOM_EVENT.LANDAD){var c=null===(r=n.value)||void 0===r?void 0:r.event;if(!Ob.call(e,c))return;Db.call(e,c,"",my.REWARD_DYNAMIC_CONTENT)}else if(o===qy.CUSTOM_EVENT.BTNTAP){var u=null===(i=n.value)||void 0===i?void 0:i.event;if(!Ob.call(e,u))return;Db.call(e,u,"button",my.REWARD_DYNAMIC_BUTTON)}else if(o===qy.CUSTOM_EVENT.REPORTADMONITORDATA){var l=s.id,d=s.key,f=s.extInfo,p=l?{idKeyGroup:l,idKey:d}:d;t.adProxy.reportAdMonitorData(p,f)}else if(o===qy.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC){var h=s.list,g=Object(tt.getSystemInfoSync)(),v={screenWidth:g.screenWidth,screenHeight:g.screenHeight,deviceOrientation:g.deviceOrientation};yb.call(e)&&(v.screenHeight=g.screenWidth,v.screenWidth=g.screenHeight),$b.call(e,v,h)}}))},Qb=function(e,t){var n=Vm(this);n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:Ay,action:e,value:t})},ew=function(e,t){var n,r=Vm(this);if(r.dynamicElems)for(var i=0,o=Object.keys(r.dynamicElems);i<o.length;i++){var a=o[i],s=null===(n=r.dynamicElems[a])||void 0===n?void 0:n.referComponent;s&&s.emitComponentEvent(e,t)}},tw=function(){var e=Vm(this);nw.call(this),e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:e.data.video.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},nw=function(){var e=Vm(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},rw=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Ew.call(this))return Promise.reject({errMsg:gb});var r=Vm(this),i=2===r.pageType?r.pageCard.layoutBox:r.card.layoutBox,o=i.width,a=i.height;[0,2,3].includes(n)&&(r.clickCount+=1);var s={slotid:Wm,costtype:(null===(t=r.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(o)||0,ad_height:Number(a)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(s)},iw=function(e,t){if(Ew.call(this))return Promise.reject({errMsg:gb});var n=Vm(this),r=Promise.resolve(),i={currentTime:n.currentTime,duration:n.data.video.duration},o=n.card,a=e.absoluteX,s=e.absoluteY;2===n.pageType?(o=n.pageCardContainer,a=Math.round(e.x),s=Math.round(e.y)):o=[my.REWARD_CARD_BUTTON,my.REWARD_CARD].indexOf(t)>-1?n.card:n.container;var c=o.getAbsolutePosition(),u=c.left,l=c.top,d=o.layoutBox,f=d.width,p=d.height;return r=n.adProxy.reportClick({clickAbsoluteLeft:a,clickAbsoluteTop:s,clickRelativeLeft:a-u,clickRelativeTop:s-l,pressInterval:e.pressInterval,left:u,top:l,width:f,height:p,videoData:i}),xw.call(this,t),Gm(r,"激励视频","点击广告卡片"),sw.call(this,{stage:1002}),r},ow=function(e){var t=e.playType,n=e.conditionType;if(Ew.call(this))return Promise.reject({errMsg:gb});var r=Vm(this);return r.adProxy.reportVideo({playType:t,conditionType:n,playDuration:r.currentTime,videoDuration:r.data.video.duration,muted:r.video.muted,rewardedTime:r.data.rewardedTime,isRewarded:r.isRewarded})},aw=function(e){var t,n,r=e.button,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ew.call(this))return Promise.reject({errMsg:gb});var o=Vm(this),a=5===r?+new Date:0,s=i?i.pressInterval:0;return o.adProxy.reportBehaviorButton({button:r,isEnded:o.isEnded,playDuration:o.currentTime,videoDuration:null!==(n=null===(t=o.data.video)||void 0===t?void 0:t.duration)&&void 0!==n?n:0,preloadVideo:o.preloadVideo?1:0,preloadVideoSuccess:o.preloadVideoSuccess?1:0,videoFirstPlay:o.videoFirstPlayTime,cardFirstShow:o.cardFirstShowTime,clickCard:a,pressInterval:s,currentPlayUrl:o.video.src,lastFetchUrl:o.data.video?o.data.video.src:""})},sw=function(e){var t=e.stage;if(Ew.call(this))return Promise.reject({errMsg:gb});var n={adtype:2,stage:t};return Vm(this).adProxy.reportADFunnelModel(n)},cw=function(e){e?Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_ADS_FIN):Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_ADS_CANCEL)},uw=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Ew.call(this)){var i=Vm(this);i.adProxy.reportTimePoints({slotid:Wm,costtype:(null===(e=i.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,extInfo:{preloadVideoSuccess:i.preloadVideoSuccess?1:0}});var o=i.isRewarded;i.sound.style.hidden=!1,i.soundFix.style.hidden=!1,i.splitLine.style.hidden=!1,i.splitLineFix.style.hidden=!1,i.landingCount=0,i.clickCount=0,i.isPlaying=!1,i.isVideoCalledPlay=!1,i.isFirstPlaySuccess=!1,i.isShowed=!1,i.isRewarded=!1,i.isEnded=!1,i.isData=!1;try{if(i.dynamicElems)for(var a=0,s=Object.keys(i.dynamicElems);a<s.length;a++){var c=s[a],u=i.dynamicElems[c];(null==u?void 0:u.remove)&&u.remove(),u.referComponent&&Object(Cy.unmount)(u.referComponent)}if(i.dynamicOldStyle)for(var l=0,d=Object.keys(i.dynamicOldStyle);l<d.length;l++)for(var f=d[l],p=i[f]||(null===(t=i.dynamicElems)||void 0===t?void 0:t[f])||null,h=i.dynamicOldStyle[f],g=0,v=Object.keys(h);g<v.length;g++){var _=v[g];p.style[_]=h[_]}i.dynamicElems=null,i.dynamicOldStyle=null,(null===(n=i.dynamicEmitter)||void 0===n?void 0:n.off)&&i.dynamicEmitter.off("adCustomEvent"),i.dynamicEmitter=null}catch(e){}if(i.isCancelPlayablePage=!1,i.isLandingPlayblePage=!1,i.playableTipsContent.value="视频结束后可试玩",i.playableGiveUp.value="放弃",i.playableGiveUp.style.color="#07C160",i.playableGiveUp.style.opacity=1,i.playableTipsWrap.style.width=132,i.playableTipsWrap.style.left=0,i.playableTipsWrap.style.hidden=!0,i.cardContainer.style.hidden=!0,i.playableTipsContent.style.width=120,i.playableGiveUp.style.hidden=!0,i.playableCancelBox.style.hidden=!0,i.cardContainer.style.opacity=1,i.rewardPageCostTime=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.adProxy.isViewable=!0,ib||(i.isFullscreen=!1),i.downloadProgress.style.width=0,i.pageDownloadProgress.style.width=0,2!==r&&(!ib&&(tb||i.data&&i.data.crt_size===dg.CRT_SIZE.CRT_SIZE_REWARD_LANDINGPAGE)?Object(w_.timeout)(100).then((function(){i.emitter.emit("close",{isEnded:o}),cw(o)})):(i.emitter.emit("close",{isEnded:o}),cw(o))),i.adProxy.reset(),yb.call(this)){var y=Object(tt.getSystemInfoSync)();if(Zm=y.screenWidth,Qm=y.screenHeight,i.container.style.top=Qm,i.container.style.left=0,i.container.style.rotate=0,m.IS_IOS){var b=10,w=44;i.topBar.style.top=b,i.topBarFix.style.top=b,i.adFeedbackList.style.top=w,i.adFeedbackMenu.style.top=w}}var O=Kb.call(this);O.catch((function(){})),i.adFetchResult=O,i.container.style.hidden=!0,i.adCover.hide(),o?sw.call(this,{stage:1005}):sw.call(this,{stage:1006}),1===i.pageType?i.pageContainer.style.hidden=!0:2===i.pageType?(i.pageHandler.style.hidden=!0,i.pageCardBody.style.hidden=!0,i.pageMask.style.hidden=!0,i.pageCardTip.style.hidden=!0,i.video.style.padding=8,i.video.style.paddingBottom=16):i.pageType||(i.defaultPageContainer.style.hidden=!0),i.pageHandler.style.hidden=!0,Yb.call(this,{isClose:!0}),nb&&i.adProxy.setInnerAudioOption(!0).catch((function(){})),i.showTipsTimer&&clearTimeout(i.showTipsTimer),i.exposureTimer&&clearTimeout(i.exposureTimer),i.updateScreenInfoTimer&&clearTimeout(i.updateScreenInfoTimer),i.layoutTimer&&clearTimeout(i.layoutTimer),i.rewardPageTimer&&clearTimeout(i.rewardPageTimer),i.pageType=0,i.imgBaseName="",Oy("show",i.adType,0),Oy("close",i.adType,+new Date)}},lw=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Ew.call(this))return Promise.reject({errMsg:gb});var n=Vm(this);if(Aw.call(this)||Cw.call(this))return dw.call(this,t);if(ow.call(this,{playType:n.isEnded?"complete":"partial",conditionType:"close"}),1===t)return uw.call(this),Promise.resolve();if([2,3].includes(t))return Promise.all([bb.call(this),uw.call(this,t)]);var r={top:Qm,duration:Xm};return yb.call(this)&&(r={top:Zm,duration:Xm,rotate:-90}),n.container.animate(r).then((function(){return bb.call(e)})).then((function(){return uw.call(e)}))},dw=function(e){if(Ew.call(this))return Promise.reject({errMsg:gb});var t=Vm(this);return Cw.call(this)||(t.container.style.top=Qm,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(uw.call(this),Promise.resolve()):Promise.all([bb.call(this),uw.call(this,e)])},fw=function(){if(!Ew.call(this)){var e=Vm(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,lw.call(this),aw.call(this,{button:4});else{e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续浏览页面",e.adProxy.setRightButtonHide(!0).catch((function(){}))}}},pw=function(){if(!Ew.call(this)){var e=Vm(this);if(nw.call(this),e.isRewarded)lw.call(this),aw.call(this,{button:4});else{e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续观看视频",Dw.call(this,"pause"),e.isPause=!0}}},hw=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var r=Vm(this);r.notReportExit=!0,r.landingCount+=1,r.landingCount>1&&r.adProxy.reportRepeatClick({slotId:Wm,costType:(null===(e=r.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,clkCnt:r.landingCount,lastClkPeriod:+new Date-r.lastLandingTime,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,pageStayTime:r.landingPageCostTime,jsapiName:r.lastJsapiName}),r.lastLandingTime=+new Date,r.lastJsapiStatus=2,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0;var i=r.adProxy.land(n);if(23===r.data.product_type&&n&&n.isButton&&!r.adProxy.data.biz_info.is_subscribed?(i.then((function(e){var n,i=/ok/.test(e.errMsg);i&&(0===r.buttonTextType&&(r.button.value="查看公众号",hb.call(t),Qb.call(t,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"查看公众号"})),r.data.flooringPage&&1===r.pageType&&0===r.buttonTextType?r.pageButton.value="查看公众号":r.data.flooringPage&&2===r.pageType&&0===r.buttonTextType?r.pageCardButton.value="查看公众号":r.pageType||(r.defaultPageButton.value="查看公众号"),r.expandCardButton.value="查看公众号",r.adProxy.data.biz_info&&(r.adProxy.data.biz_info.is_subscribed=1),r.adProxy.reportAdIDKey({key:vv.IDKEY.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(r.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var o=+new Date;r.lastJsapiStatus=0,r.lastJsapiCostTime=o-r.lastLandingTime,"private_addContact"===r.lastJsapiName&&r.adProxy.reportLandingTime({slotId:Wm,costType:(null===(n=r.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:r.lastLandingTime,closeTime:o,stayTime:r.lastJsapiCostTime,jsapiName:r.lastJsapiName,clickTime:r.lastLandingTime,clkCnt:r.landingCount,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,actTypeInt:i?2:3,actTypeStr:i?"关注":"取消"}),ib||!nb||Cw.call(t)||setTimeout((function(){r.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),r.container.forceUpdate()}),250)})).catch((function(){r.lastJsapiStatus=1})),gw.call(this,i)):(r.flooringPageCloseTime=(new Date).getTime(),i.then((function(e){e.errMsg&&(r.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===r.lastJsapiName||"navigateToMiniProgram"===r.lastJsapiName||"openADCanvas"===r.lastJsapiName||"launchApplication"===r.lastJsapiName?(r.isLandingPage=!0,nw.call(t),r.flooringPageIsShow&&(qb.call(t,{type:3,staytime:r.flooringPageCloseTime-r.flooringPageShowTime,componentsstartstr:JSON.stringify(r.flooringPageState)}),r.flooringPageShowTime=0,r.flooringPageCloseTime=0,Vb.call(t))):r.lastJsapiStatus=0,r.lastJsapiCostTime=+new Date-r.lastLandingTime})).catch((function(){r.lastJsapiStatus=1}))),Aw.call(this)||Cw.call(this)){setTimeout((function(){r.notReportExit=!1}),1e3);var o=r.adProxy.reportVideo({playType:r.isPlaying?"partial":"complete",conditionType:"land",playDuration:r.currentTime,videoDuration:r.data.video.duration,muted:r.video.muted});Gm(o,"激励视频","跳转落地页")}return i}},gw=function(e){if(!Ew.call(this)){var t=Vm(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve()})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));return Gm(n,"激励视频","关注"),n}},vw=function(){var e=this;if(!Ew.call(this)){var t=Vm(this),n=t.data.appInfo,r=n.apkName,i=n.versionCode,o=n.urlScheme;t.adProxy.getInstallState(r).then((function(n){if(n.isInstalled&&(void 0===n.versionCode||n.versionCode>=i)){if(t.adProxy.setAppInstallState(!0),t.androidAppState=4,t.button&&o&&o.trim().length>0){if(t.button.value="进入应用",t.pageCardButton.value="进入应用",t.pageButton.value="进入应用",t.defaultPageButton.value="进入应用",t.expandCardButton.value="进入应用",Qb.call(e,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"进入应用"}),1===t.buttonTextType){var r=t.data.button_action.button_text;t.button.value=r,t.pageCardButton.value=r,t.pageButton.value=r,t.defaultPageButton.value=r,t.expandCardButton.value=r,Qb.call(e,qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:r})}hb.call(e)}if(t.adProxy.isValidCondition("widget_gray_video_download_v2")&&t.downloadButtonText&&o&&o.trim().length>0){if(t.downloadButtonText.value="进入应用",t.downloadProgressText.value="进入应用",1===t.buttonTextType){var a=t.data.button_action.button_text;t.downloadButtonText.value=a,t.downloadProgressText.value=a}if(1===t.pageType&&(t.pageDownloadButtonText.value="进入应用",t.pageDownloadProgressText.value="进入应用",1===t.buttonTextType)){var s=t.data.button_action.button_text;t.pageDownloadButtonText.value=s,t.pageDownloadProgressText.value=s}hb.call(e)}}else t.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===t.androidAppState&&(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,hb.call(e),1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text),t.androidAppState=0)})).catch((function(){}))}},_w=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ew.call(this)){var r=Vm(this);iw.call(this,n,my.REWARD_DOWNLOAD);var i=r.data.appInfo,o=i.appName,a=i.apkName,s=i.apkUrl,c=i.appMd5,u=i.urlScheme,l=r.adProxy.data,d=l.aid,f=l.traceid,p=l.apurl,h=0,g="";if(r.landingCount+=1,r.lastLandingTime=+new Date,r.lastJsapiStatus=0,r.lastJsapiCostTime=0,4===r.androidAppState)r.adProxy.launchApplication(u).catch((function(){hw.call(t,{isButton:!0})})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(0===r.androidAppState){var v=[d,f,a.replace(/./g,"_"),0,20,p.indexOf("ad.wx.com")>-1?1:0].join(".");r.adProxy.addDownloadTaskStraight(o,s,c,v).then((function(e){r.androidDownloadId=e.downloadId,setTimeout(yw.bind(t),Km)})).catch((function(){hw.call(t,{isButton:!0})})),r.lastJsapiName="addDownloadTaskStraight",h=4,g="下载"}else 1===r.androidAppState?(r.adProxy.pauseDownloadTask(r.androidDownloadId).catch((function(){})),r.downloadButtonText.value="继续下载",r.downloadProgressText.value="继续下载",1===r.pageType&&(r.pageDownloadButtonText.value="继续下载",r.pageDownloadProgressText.value="继续下载"),hb.call(this),r.androidAppState=2,r.lastJsapiName="pauseDownloadTask",h=5,g="暂停"):2===r.androidAppState?(r.adProxy.resumeDownloadTask(r.androidDownloadId).then((function(){setTimeout(yw.bind(t),Km)})).catch((function(){})),r.downloadButtonText.value="暂停下载",r.downloadProgressText.value="暂停下载",1===r.pageType&&(r.pageDownloadButtonText.value="暂停下载",r.pageDownloadProgressText.value="暂停下载"),hb.call(this),r.androidAppState=1,r.lastJsapiName="resumeDownloadTask",h=6,g="继续"):3===r.androidAppState&&(r.adProxy.installDownloadTask(r.androidDownloadId).catch((function(){})),r.lastJsapiName="installDownloadTask",h=7,g="安装");h>0&&r.adProxy.reportLandingTime({slotId:Wm,costType:(null===(e=r.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,openTime:r.lastLandingTime,clickTime:r.lastLandingTime,clkCnt:r.landingCount,jsapiName:r.lastJsapiName,actTypeInt:h,actTypeStr:g})}},yw=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(!Ew.call(this)){var r=Vm(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){if("download_succ"===n.state)r.downloadButtonText.value="安装应用",r.downloadProgressText.value="安装应用",r.downloadProgress.style.width=r.downloadButton.style.width,1===r.pageType&&(r.pageDownloadButtonText.value="安装应用",r.pageDownloadProgressText.value="安装应用",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width),r.androidAppState=3,hb.call(t);else if("downloading"===n.state)r.downloadButtonText.value="暂停下载",r.downloadProgressText.value="暂停下载",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress,10)/100,1===r.pageType&&(r.pageDownloadButtonText.value="暂停下载",r.pageDownloadProgressText.value="暂停下载",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width*parseInt(n.progress,10)/100),r.androidAppState=1,hb.call(t);else if("download_fail"===n.state){if(r.downloadButtonText.value=r.data.button_action.button_text,r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,1===r.pageType&&(r.pageDownloadButtonText.value=r.data.button_action.button_text,r.pageDownloadProgressText.value=r.data.button_action.button_text,r.pageDownloadProgress.style.width=0,1===r.buttonTextType)){var i=r.data.button_action.button_text;r.pageDownloadButtonText.value=i}r.androidAppState=0,hb.call(t)}"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),Km)})).catch((function(){n>0&&e.call(t,n-1)}))}},mw=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!Ew.call(this)){var d=Vm(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:Zm,adHeight:Qm,adPosX:0,adPosY:0,expTime:d.startExposureTime,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},bw=function(e){var t=Vm(this),n={adWidth:Zm,adHeight:Qm,adPosX:0,adPosY:0},r={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e)){var i,o=Fm(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,s=a.type,c=a.expTime,u=a.isClickAd,l=a.clickAdTimeMs,d=a.feedbackTimeMs;if("good"!==s){var f=r[s]||{};t.adProxy.reportAdFeedbackData(Object.assign(Object.assign(Object.assign({},n),f),{expTime:c||0,isClickAd:u,clickAdTimeMs:l||0,secondGradeTime:d||0}))}}}catch(e){o.e(e)}finally{o.f()}}},ww=function(){var e=Vm(this),t=ib?"count":"count_"+e.adProxy.getWebviewInfo().currentWebviewId,n=Ey(t,e.adType)||0;Oy(t,e.adType,n>0?n-1:0),Object(ms._offShow)(e.onShow),Is(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Vs.webviewLayout.remove(e.container),Object(Pu.removePrivateThis)(this)},Ow=function(){var e=this;if(!Ew.call(this)){var t=Vm(this),n=Promise.resolve();t.isShowed&&(n=bb.call(this).then((function(){t.adCover.hide(),nb&&t.adProxy.setInnerAudioOption(!0).catch((function(){})),Oy("show",t.adType,0),Oy("close",t.adType,+new Date)}))),n.then((function(){ww.call(e)})).catch((function(){ww.call(e)})),this._destroyed=!0}},Ew=function(){return this._destroyed},Sw=function(e){var t=Vm(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:Zm,height:Qm});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),Gm(n,"激励浏览","原始曝光")},Tw=function(){var e=this,t=Vm(this);return Cw.call(this)||(t.container.style.hidden=!1,t.container.style.top=0,t.adCover.show()),t.container.nextLayout().then((function(){return Ew.call(e)?Promise.reject({errMsg:gb}):(mb.call(e).then((function(){ib||(t.isFullscreen=!0)})).catch((function(e){t.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,e)})),hw.call(e))})).then((function(n){if(Cw.call(e)){n?t.adProxy.reportAdMonitorData(vv.IDKEY.REWARD_CHANNELS_CALLBACK_SUCCESS,n):t.adProxy.reportAdMonitorData(vv.IDKEY.REWARD_CHANNELS_CALLBACK_FAILED);var r=n||{},i=r.rewardedDuration,o=r.feedbackInfo,a=null!=i&&i>=15;t.isEnded=a,t.isRewarded=a,lw.call(e),aw.call(e,{button:a?4:1}),bw.call(e,o)}})).catch((function(e){throw Oy("show",t.adType,0),e}))},Iw=function(){var e;return(null===(e=Vm(this).data)||void 0===e?void 0:e.crt_size)!==pv.CRT_SIZE_REWARD_LANDINGPAGE},Aw=function(){var e,t,n=Vm(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===pv.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==av.DEST_TYPE_CHANNELS},Cw=function(){var e,t,n=Vm(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===pv.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===av.DEST_TYPE_CHANNELS},kw=function(){var e=Vm(this).data.product_type;return[dg.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB,dg.PRODUCT_TYPE.APPLE_APP_STORE,dg.PRODUCT_TYPE.WECHAT,dg.PRODUCT_TYPE.MINI_GAME].includes(e)},xw=function(e){Vm(this).adProxy.reportMMClickPos({clickPos:e})},Pw=function(){var e=this,t=Vm(this),n=t.data;if(n.isGaussBlur){n.video=n.shortVideo,t.data.isGaussBlur=!1;var r=t.data.video,i=r.poster,o=r.src,a=r.width,s=r.height;t.video.poster!==i&&(t.video.poster=i),t.video.src!==o&&(t.video.src=o,setTimeout((function(){t.isVideoCalledPlay&&Dw.call(e,"play")}),0));var c=Object(w_.contain)({outer:{width:t.container.style.width,height:t.container.style.height},inner:{width:a,height:s}}).inner;t.video.style.width=Zm,t.video.style.height=Qm,"portrait"===$m?t.video.style.bottom=1032*Zm/960-(Qm-c.height)/2:t.video.style.left=-.448*Qm}},Dw=function(e){var t=Vm(this),n=t.video;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},Rw=function(){var e=Vm(this),t="portrait"===$m||yb.call(this),n=t?Qm:Zm,r=t?Zm:Qm;e.defaultPageBackgroundImage.style.width=n,e.defaultPageBackgroundImage.style.height=n;var i=(n-r)/-2;t?(e.defaultPageBackgroundImage.style.left=i,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=i)},jw=function(){var e=Vm(this),t=e.data,n=t.video,r=n.width,i=n.height,o=t.isGaussBlur,a=t.isExpandStyle,s=Object(w_.contain)({outer:{width:e.container.style.width,height:e.container.style.height},inner:{width:r,height:i}}).inner;if(e.video.style.width=Zm,e.video.style.height=Qm,e.video.style.left=0,e.video.style.bottom=0,o){if("portrait"===$m&&r<i)e.video.style.height=Math.floor(Zm/r*i),e.video.style.width=Zm;else if("landscape"===$m&&r>i){var c=Math.floor(Qm*r/i);e.video.style.width=c,e.video.style.height=Qm,e.video.style.left=(Zm-c)/2}}else a&&("portrait"===$m?e.video.style.bottom=1032*Zm/960-(Qm-s.height)/2:e.video.style.left=-.448*Qm)},Nw=function(e){Object(M.default)(n,e);var t=Bm(n);function n(e){var r,i=e.adUnitId,o=e.multiton,a=void 0!==o&&o,s=e.pluginId,c=void 0===s?"":s;Object(N.default)(this,n),r=t.call(this);var u=Vm(Object(Cu.default)(r));u.emitter=new by,u.androidAppState=0,u.androidDownloadId=0,u.adUnitId=i,u.adType="incentive-video",u.adProxy=new p_({adUnitId:i,adType:"incentive-video",pluginAppid:c}),u.adCover=new b_({adUnitId:i,adType:"incentive-video"}),u.isShowedExposureReported=!1,u.isViewableExposureReported=!1,u.isCardExposureReported=!1,u.dynamicElems=null,u.dynamicOldStyle=null,u.dynamicEmitter=null,u.expandCardUseLogoStrategy=!1,u.rewardPageCostTime=0,u.rewardPageTimer=null,u.showDialogContainer=!1,u.isData=!1,u.isFirstPlay=!1,u.isFirstPlaySuccess=!1,u.isPlaying=!1,u.isVideoCalledPlay=!1,u.isRewarded=!1,u.isEnded=!1,u.isPause=!1,u.currentTime=0,u.cardShowTime=0,u.videoFirstPlayTime=0,u.preloadVideo=!1,u.preloadVideoSuccess=!1,u.cardFirstShowTime=0,u.clickCount=0,u.landingCount=0,u.lastLandingTime=0,u.lastJsapiName="",u.lastJsapiStatus=0,u.lastJsapiCostTime=0,u.isLandingPage=!1,u.landingPageCostTime=0,u.hideTime=0,u.showTime=0,u.startExposureTime=0,u.clickFirstGradeTime=0,u.flooringPageIsShow=!1,u.flooringPageShowTime=0,u.flooringPageCloseTime=0,u.flooringPageState={},u.flooringPageAutoShow=!1,u.showTipsTimer=null,u.exposureTimer=null,u.isCancelPlayablePage=!1,u.isLandingPlayblePage=!1,u.buttonTextType=0,u.isPress=!1,u.startPosX=0,u.startPosY=0,u.lastPosX=0,u.lastPosY=0,u.lastSecondPosX=0,u.lastSecondPosY=0,u.direction="",u.throttleTimer=null,u.timeStamp=0,u.callCount=0,u.distanceList=[],u.startTime=0,u.lastStartTime=0,u.lastMoveTime=0,u.flooringPageInfos={},u.weappTouchEventHandler=null,u.updateScreenInfoTimer=null,u.layoutTimer=null,u.closeEventCount=0,r._destroyed=!1,O_.call(Object(Cu.default)(r),Hm,Py),u.container.style.width=Zm,u.container.style.height=Qm,u.container.style.top=Qm,u.container.style.hidden=!0,u.topBar.style.width=Zm,u.sound.src=Ym,u.soundFix.src=Ym,u.appIcon.src=qm,Gb.call(Object(Cu.default)(r)),tb&&(u.video.obeyMuteSwitch=!0),Vs.webviewLayout.add(u.container),rb&&(u.topBar.style.top=u.topBar.style.top+30,u.topBarFix.style.top=u.topBarFix.style.top+30,u.adFeedbackList.style.top=u.adFeedbackList.style.top+30,u.adFeedbackMenu.style.top=u.adFeedbackMenu.style.top+30);_b.call(Object(Cu.default)(r),["dialogContainer","dialogMask"]),u.dialog.style.top=Qm>138?(Qm-138)/2:0,u.dialog.style.left=Zm>300?(Zm-300)/2:0,ib||(u.container.fullscreen=!0,u.isFullscreen=!1);var l=Kb.call(Object(Cu.default)(r));l.catch((function(){})),u.adFetchResult=l,u.isSwitched=!1,ib||Object(Fr.onAppRouteDone)((function(){if(!Ew.call(Object(Cu.default)(r))){var e=u.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,i=e.lastWebviewId;if(["navigateTo","switchTab"].includes(t)&&n===i&&(u.isSwitched=!0),["navigateBack","navigateTo"].includes(t)&&n===i&&u.isShowed&&u.isData){var o=u.isFullscreen?3:1;aw.call(Object(Cu.default)(r),{button:6}),lw.call(Object(Cu.default)(r),o)}}})),u.close.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&pw.call(Object(Cu.default)(r))})),u.closeFix.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&pw.call(Object(Cu.default)(r))})),u.dialogClose.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.dialogContainer.style.hidden=!0,lw.call(Object(Cu.default)(r)),aw.call(Object(Cu.default)(r),{button:1}))})),u.dialogCancel.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.dialogContainer.style.hidden=!0,Aw.call(Object(Cu.default)(r))?(u.showDialogContainer=!1,hw.call(Object(Cu.default)(r))):(Dw.call(Object(Cu.default)(r),"play"),tw.call(Object(Cu.default)(r))),aw.call(Object(Cu.default)(r),{button:2}))})),u.sound.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.video.muted=!u.video.muted,u.sound.src=u.video.muted?Ym:zm)})),u.soundFix.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.video.muted=!u.video.muted,u.soundFix.src=u.video.muted?Ym:zm)})),u.adFeedback.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.adFeedbackList.style.hidden=!u.adFeedbackMenu.style.hidden||!u.adFeedbackList.style.hidden,u.adFeedbackList.style.hidden||mw.call(Object(Cu.default)(r),{firstGradeId:1,firstGradeDesc:"广告角标"}))})),u.adFeedbackBtn.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.adProxy.openFeedbackUrl(ib?1003:1005),u.adFeedbackList.style.hidden=!0,mw.call(Object(Cu.default)(r),{secondGradeId:1,secondGradeDesc:"投诉"}))})),u.adDislikeBtn.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(mw.call(Object(Cu.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣"}),u.adFeedbackList.style.hidden=!0,u.adFeedbackMenu.style.hidden=!1)})),u.adQualityBtn.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,mw.call(Object(Cu.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),u.dialogCloseTip.style.hidden=!1,Object(w_.timeout)(Jm).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.adDuplicateBtn.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,mw.call(Object(Cu.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),u.dialogCloseTip.style.hidden=!1,Object(w_.timeout)(Jm).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.adDismatchBtn.on("click",(function(e){Ob.call(Object(Cu.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,mw.call(Object(Cu.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),u.dialogCloseTip.style.hidden=!1,Object(w_.timeout)(Jm).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.video.onTimeUpdate((function(e){var t=Number(e.duration),n=Number(e.position);try{if(Ew.call(Object(Cu.default)(r))||!u.isShowed)return;if(tw.call(Object(Cu.default)(r)),u.isFirstPlay){var i=0;u.showTime>u.videoFirstPlayTime&&(i=u.showTime-u.videoFirstPlayTime),u.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n}),u.adProxy.reportVideoLoadTime({beginTime:u.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*n),departureTime:i,preloadVideo:u.preloadVideo?1:0,preloadVideoSuccess:u.preloadVideoSuccess?1:0,reportType:1}),u.isFirstPlay=!1,sw.call(Object(Cu.default)(r),{stage:1004})}if(u.isPlaying=!0,n>0&&(u.currentTime=1e3*n),n>=1&&!u.isViewableExposureReported){var o=u.video.style,a=o.width,s=o.height;u.isViewableExposureReported=!0,u.adProxy.isViewable=!0;var c=u.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:a,height:s});Gm(c,"激励视频","可视曝光")}Math.ceil(t-n)<=6&&[3,4].indexOf(u.pageType)>-1&&u.playableGiveUp.style.hidden&&vb.call(Object(Cu.default)(r));var l=u.data,d=l.video.duration,f=l.rewardedTime,p=t>f/1e3?f/1e3:t,h=Math.ceil((d>f?f:d)/1e3);if(p>n){var g=Math.ceil(p-n);g>h&&(g=h),u.countDown.value=g.toString(),u.countDownFix.value=g.toString(),u.countDownAppend.value="秒后可获得奖励",u.countDownAppendFix.value="秒后可获得奖励",u.countDown.style.width=2===g.toString().length?19:12,u.countDownFix.style.width=2===g.toString().length?19:12,u.countDownAppend.style.width=100,u.countDownAppendFix.style.width=100}else u.countDown.style.hidden=!0,u.countDownFix.style.hidden=!0,u.sound.style.hidden=!0,u.soundFix.style.hidden=!0,u.splitLine.style.hidden=!0,u.splitLineFix.style.hidden=!0,u.countDownAppend.value="已获得奖励",u.countDownAppendFix.value="已获得奖励",u.countDownAppend.style.width=72,u.countDownAppendFix.style.width=72,u.isRewarded=!0;if((1e3*n>=u.cardShowTime||1e3*n>0)&&u.card.style.hidden){if(u.data.flooringPage&&2===u.pageType&&"portrait"===$m?u.pageCardBody.style.hidden=!1:(u.playableTipsWrap.style.hidden=!(u.data.flooringPage&&[3,4].indexOf(u.pageType)>-1),u.card.style.hidden=!1),u.isCardExposureReported)return;u.card.nextLayout((function(){var e=u.card.getAbsolutePosition(),t=e.left,n=e.top,i=u.card.layoutBox,o=i.width,a=i.height;u.isCardExposureReported=!0;var s=u.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:t,top:n,width:o,height:a});Gm(s,"激励视频","卡片曝光"),u.cardFirstShowTime=(new Date).getTime(),u.data.flooringPage&&2===u.pageType&&(u.showTipsTimer=setTimeout((function(){kb.call(Object(Cu.default)(r))}),3e3))}))}ew.call(Object(Cu.default)(r),qy.REWARDEDVIDEO_EVENT.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){u.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_RENDER_ERROR,e)}})),u.video.onEnded((function(){var e,t;if(!Ew.call(Object(Cu.default)(r))&&u.isShowed){u.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_END),nw.call(Object(Cu.default)(r)),u.countDown.style.hidden=!0,u.countDownFix.style.hidden=!0,u.sound.style.hidden=!0,u.soundFix.style.hidden=!0,u.splitLine.style.hidden=!0,u.splitLineFix.style.hidden=!0,u.countDownAppend.value="已获得奖励",u.countDownAppendFix.value="已获得奖励",u.countDownAppend.style.width=72,u.countDownAppendFix.style.width=72,u.isRewarded=!0,u.isPlaying=!1,u.isVideoCalledPlay=!1,u.isEnded=!0,u.isPause=!1;var n=u.data.video.duration;u.currentTime=n;var i=null===(t=null===(e=u.data)||void 0===e?void 0:e.card)||void 0===t?void 0:t.headBgImg,o=u.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:u.currentTime,videoDuration:n,muted:u.video.muted});if(u.data.flooringPage&&1===u.pageType&&"portrait"===$m)u.pageContainer.style.width=Zm,u.pageContainer.style.height=Qm,u.pageContainer.style.left=Zm,u.pageContainer.style.hidden=!1,u.pageHandler.style.hidden=!1,u.pageHandler.style.zIndex=1000003,u.topBar.style.zIndex=1000004,u.pageImgTips.style.zIndex=1000004,u.pageContainer.nextLayout((function(){Wb.call(Object(Cu.default)(r))}));else if(u.data.flooringPage&&2===u.pageType&&"portrait"===$m)Wb.call(Object(Cu.default)(r));else if(u.data.flooringPage&&[3,4].indexOf(u.pageType)>-1&&!u.isCancelPlayablePage){var a=u.data.flooringPage.page_url||"";if(!a&&u.data.crtInfo)try{a=u.data.crtInfo.wxgame_video_card.flooring_page.page_url||""}catch(e){}u.adProxy.handleRewardedVideoPlayableLand(a,u.pageType).then((function(){u.isLandingPlayblePage=!0}))}else!u.pageType&&i&&(u.defaultPageContainer.style.hidden=!1,u.defaultPageContainer.style.opacity=0,u.defaultPageContainer.nextLayout((function(){Wb.call(Object(Cu.default)(r))})));Gm(o,"激励视频","播放完成")}})),u.video.onError((function(e){var t;u.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_LOAD_ERROR,e),nw.call(Object(Cu.default)(r)),(null===(t=null==u?void 0:u.data)||void 0===t?void 0:t.isGaussBlur)&&Pw.call(Object(Cu.default)(r))})),u.playableCancelBox.on("click",(function(e){var t;if(Ob.call(Object(Cu.default)(r),e)&&!u.isCancelPlayablePage){u.isCancelPlayablePage=!0,u.playableGiveUp.value="已放弃",u.playableGiveUp.style.color="#ffffff",u.playableGiveUp.style.opacity=.6;var n=Object(lg.measureText)({text:"已放弃",fontSize:12})||36;u.playableGiveUp.style.width=n,u.playableTipsWrap.style.width=u.playableTipsContent.style.width+n+32,u.adProxy.reportCancelRewardPlayablePage({costtype:(null===(t=u.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,slotid:Wm,is_reward:1,is_cancel:1})}})),u.pageButton.on("click",(function(e){Ob.call(Object(Cu.default)(r),e)&&Db.call(Object(Cu.default)(r),e,"button",my.REWARD_OLD_ENDPAGE_BUTTON)}));var d=function(e){return function(t){if(Ob.call(Object(Cu.default)(r),t)){var n=kw.call(Object(Cu.default)(r));if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var i=[[my.REWARD_ENDPAGE_HEAD_IMG,n&&"logo"===e],[my.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[my.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[my.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,n&&"button"===e],[my.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return Object(Co.default)(e,2)[1]}))[0];Db.call(Object(Cu.default)(r),t,"button"===e?"button":"",i)}}}},f=function(e){return function(t){if(Ob.call(Object(Cu.default)(r),t)){var n=kw.call(Object(Cu.default)(r))||!u.expandCardUseLogoStrategy;if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var i=[[my.REWARD_EXPAND_CARD_HEAD_IMG,n&&"logo"===e],[my.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[my.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[my.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,n&&"button"===e],[my.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return Object(Co.default)(e,2)[1]}))[0];Db.call(Object(Cu.default)(r),t,"button"===e?"button":"",i)}}}};if(u.defaultPageButton.on("click",d("button")),u.defaultPageAppIcon.on("click",d("logo")),u.defaultPageAppName.on("click",d("wording")),u.defaultPageAppWording.on("click",d("wording")),u.defaultPageWordingWrapper.on("click",d("wrapper")),u.expandCardButton.on("click",f("button")),u.expandCardAppIcon.on("click",f("logo")),u.expandCardAppName.on("click",f("wording")),u.expandCardAppWording.on("click",f("wording")),u.expandCardWordingWrapper.on("click",f("wrapper")),u.pageDownloadButton.on("click",(function(e){Ob.call(Object(Cu.default)(r),e)&&_w.call(Object(Cu.default)(r),e)})),u.button.on("click",(function(e){Ob.call(Object(Cu.default)(r),e)&&(tb&&46===u.data.product_type&&6===u.data.dest_type?Promise.race([iw.call(Object(Cu.default)(r),e,my.REWARD_CARD_BUTTON),Object(w_.timeout)(500)]).then((function(){aw.call(Object(Cu.default)(r),{button:5},e),hw.call(Object(Cu.default)(r))})).catch((function(){aw.call(Object(Cu.default)(r),{button:5},e),hw.call(Object(Cu.default)(r))})):(iw.call(Object(Cu.default)(r),e,my.REWARD_CARD_BUTTON),aw.call(Object(Cu.default)(r),{button:5},e),23===u.data.product_type?hw.call(Object(Cu.default)(r),{isButton:!0}):hw.call(Object(Cu.default)(r))))})),u.downloadButton.on("click",(function(e){Ob.call(Object(Cu.default)(r),e)&&_w.call(Object(Cu.default)(r),e)})),u.card.on("click",(function(e){Ob.call(Object(Cu.default)(r),e)&&(tb&&46===u.data.product_type&&6===u.data.dest_type?Promise.race([iw.call(Object(Cu.default)(r),e,my.REWARD_CARD),Object(w_.timeout)(500)]).then((function(){aw.call(Object(Cu.default)(r),{button:5},e),hw.call(Object(Cu.default)(r))})).catch((function(){aw.call(Object(Cu.default)(r),{button:5},e),hw.call(Object(Cu.default)(r))})):(iw.call(Object(Cu.default)(r),e,my.REWARD_CARD),aw.call(Object(Cu.default)(r),{button:5},e),23===u.data.product_type?hw.call(Object(Cu.default)(r),{toOfficalAccountDetail:!0}):hw.call(Object(Cu.default)(r))))})),u.pageHandler.on("touchstart",(function(e){if(!Ew.call(Object(Cu.default)(r))){var t=Rb.call(Object(Cu.default)(r),{event:e,container:"pageHandler"});u.startPosX=t.x,u.startPosY=t.y,u.lastPosX=t.x,u.lastPosY=t.y,u.lastStartTime=(new Date).getTime()}})),u.pageHandler.on("touchmove",(function(e){if(!Ew.call(Object(Cu.default)(r))){var t=u.pageHandler.getAbsolutePosition(),n=t.left+e[0].x,i=t.top+e[0].y,o=u.flooringPageInfos,a=o.xMin,s=o.xMax,c=o.yMin,l=o.yMax,d=o.xContainer,f=o.yContainer;if(n-u.lastPosX!=0&&d&&Sb.call(Object(Cu.default)(r),{x:n,y:i,direction:"left"})){var p=u[d].style.left;(p+=n-u.lastPosX)>=a&&p<=s&&(u[d].style.left=p,u.lastSecondPosX=u.lastPosX,u.lastPosX=n,u.direction="left",u.lastMoveTime=(new Date).getTime())}if(i-u.lastPosY!=0&&f&&Sb.call(Object(Cu.default)(r),{x:n,y:i,direction:"top"})){var h=u[f].style.top;(h+=i-u.lastPosY)>=c&&h<=l&&(u[f].style.top=h,u.lastSecondPosY=u.lastPosY,u.lastPosY=i,u.direction="top")}}})),u.pageHandler.on("touchend",(function(e){if(!Ew.call(Object(Cu.default)(r))){var t=Rb.call(Object(Cu.default)(r),{event:e,container:"pageHandler"}),n=u.flooringPageInfos,i=n.xMin,o=n.xMax,a=n.yMin,s=n.yMax,c=n.xContainer,l=n.yContainer,d=n.infos;if(d.event=t,d.event&&(d.event.pressInterval=(new Date).getTime()-u.lastStartTime),d.touchClick&&Ab.call(Object(Cu.default)(r),Object.assign({},d,{event:t,max:s,min:a})),"top"===u.direction&&d.yRevise)Lb.call(Object(Cu.default)(r),Object.assign({},d,{max:s,min:a,direction:"top",imgBox:l}));else if("left"===u.direction&&d.xRevise)Lb.call(Object(Cu.default)(r),Object.assign({},d,{max:o,min:i,direction:"left",imgBox:c})),zb.call(Object(Cu.default)(r));else if("left"===u.direction&&d.xInertia){var f=t.x-u.lastPosX,p=u[c].style.left+5*f;p>=d.xHead&&p<=d.xTail?u[c].style.left=p:Cb.call(Object(Cu.default)(r),Object.assign({},d,{xMax:o,xMin:i,imgBox:c})),zb.call(Object(Cu.default)(r))}else u.startPosX=0,u.startPosY=0,u.lastPosX=0,u.lastPosY=0,u.lastSecondPosX=0,u.lastSecondPosY=0,u.direction="";u.direction=""}})),u.onShow=function(){if(!Ew.call(Object(Cu.default)(r))&&(u.adProxy.setTimePoint("p11"),[3,4].indexOf(u.pageType)>-1&&u.isLandingPlayblePage&&lw.call(Object(Cu.default)(r)),!Cw.call(Object(Cu.default)(r)))){if(Aw.call(Object(Cu.default)(r))&&u.isShowed&&!u.showDialogContainer)return u.rewardPageTimer&&clearTimeout(u.rewardPageTimer),u.rewardPageCostTime+=+new Date-u.hideTime-400,fw.call(Object(Cu.default)(r)),setTimeout((function(){u.lastJsapiStatus=0,u.isLandingPage=!1}),10),void(ib||!nb||Cw.call(Object(Cu.default)(r))||(u.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),u.layoutTimer=setTimeout((function(){u.container.forceUpdate()}),250)));!u.isShowed||u.isEnded||u.isPause||setTimeout((function(){!u.isShowed||u.isEnded||u.isPause||(Dw.call(Object(Cu.default)(r),"play"),tw.call(Object(Cu.default)(r)))}),1e3),u.data&&23===u.data.product_type?u.adProxy.checkFollow(u.data.app.uin).then((function(e){var t=u.data.button_action.button_text;0===u.buttonTextType&&(u.button.value=e?"查看公众号":t,hb.call(Object(Cu.default)(r)),Qb.call(Object(Cu.default)(r),qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),u.data.flooringPage&&2===u.pageType&&0===u.buttonTextType?u.pageCardButton.value=e?"查看公众号":t:u.data.flooringPage&&1===u.pageType&&0===u.buttonTextType?u.pageButton.value=e?"查看公众号":t:u.pageType||(u.defaultPageButton.value=e?"查看公众号":t),u.expandCardButton.value=e?"查看公众号":t,u.adProxy.data.biz_info&&(u.adProxy.data.biz_info.is_subscribed=e?1:0)})):u.data&&12===u.data.product_type&&vw.call(Object(Cu.default)(r)),u.showTime=+new Date,setTimeout((function(){var e;u.flooringPageIsShow&&(u.flooringPageShowTime=+new Date,zb.call(Object(Cu.default)(r))),u.isLandingPage&&(u.lastJsapiStatus=0,u.isLandingPage=!1,u.landingPageCostTime=u.showTime-u.hideTime,u.adProxy.reportLandingTime({slotId:Wm,costType:(null===(e=u.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,openTime:u.hideTime,closeTime:u.showTime,stayTime:u.landingPageCostTime,jsapiName:u.lastJsapiName,clickTime:u.lastLandingTime,clkCnt:u.landingCount,retCode:u.lastJsapiStatus,costTime:u.lastJsapiCostTime,actTypeInt:1}),ib||!nb||Cw.call(Object(Cu.default)(r))||(u.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),u.layoutTimer=setTimeout((function(){u.container.forceUpdate()}),250)),u.adProxy.setRightButtonHide(!0).catch((function(){})))}),10)}},Object(ms._onShow)(u.onShow),u.onHide=function(){if(!Ew.call(Object(Cu.default)(r))){if(u.hideTime=+new Date,Aw.call(Object(Cu.default)(r))&&u.isShowed){var e=u.adProxy.checkCanvasXmlState();return!e&&!u.isShowedExposureReported&&Sw.call(Object(Cu.default)(r),"showed"),!e&&!u.isViewableExposureReported&&Sw.call(Object(Cu.default)(r),"viewable")}if(!u.notReportExit&&u.isShowed){nw.call(Object(Cu.default)(r));var t=u.adProxy.reportVideo({playType:u.isPlaying?"partial":"complete",conditionType:"exit",playDuration:u.currentTime,videoDuration:u.data.video.duration,muted:u.video.muted});Gm(t,"激励视频","退出小游戏"),u.flooringPageIsShow&&(u.flooringPageCloseTime=(new Date).getTime(),qb.call(Object(Cu.default)(r),{type:6,staytime:u.flooringPageCloseTime-u.flooringPageShowTime,componentsstartstr:JSON.stringify(u.flooringPageState)}),u.flooringPageShowTime=0,u.flooringPageCloseTime=0,Vb.call(Object(Cu.default)(r)))}}},Ts(u.onHide),Object(O.onMethod)("onVideoResourceLoad",(function(e){!u.isShowed&&u.video&&u.video.src===e.resource&&(u.preloadVideoSuccess=!0,u.video.src=e.resource,u.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===a){var p=ib?"count":"count_"+u.adProxy.getWebviewInfo().currentWebviewId,h=(Ey(p,u.adType)||0)+1;Oy(p,u.adType,h),h>=5&&(console.warn("系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响"+(ib?"小游戏":"小程序")+"性能，请减少实例创建数量或调用destroy方法销毁无用的实例"),5===h&&u.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_INSTANCE_BROKEN))}return r}return Object(oe.default)(n,[{key:"load",value:function(){if(Ew.call(this))return Promise.reject({errMsg:gb});var e=Vm(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();var t=Kb.call(this);return e.adFetchResult=t.catch((function(t){var n=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",n),n})),e.adFetchResult}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(Ew.call(this))return Promise.reject({errMsg:gb});var i=Vm(this);if(i.isShowed)return Promise.resolve();if(!i.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});var o=Ey("show",i.adType)||0;if(1===o)return i.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});sw.call(this,{stage:1001});var a=(new Date).getTime();return i.isSwitched=!1,Oy("show",i.adType,1),i.adProxy.setTimePoint("p19"),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),i.adFetchResult.then((function(){if(Ew.call(e))return Promise.reject({errMsg:gb});var t=Object(tt.getSystemInfoSync)();return Jb.call(e,{screenWidth:t.screenWidth,screenHeight:t.screenHeight,deviceOrientation:t.deviceOrientation}),ib?i.adProxy.reportVideoLastClick({touchStartX:Math.round(ab),touchStartY:Math.round(sb),touchEndX:Math.round(cb),touchEndY:Math.round(ub),touchDuration:db,screenWidth:Zm,screenHeight:Qm}):(i.weappTouchEventHandler&&Object(Og.offWeappTouchEvent)(i.weappTouchEventHandler),i.weappTouchEventHandler=Object(Og.onceWeappTouchEvent)(pb,{aid:i.adProxy.data.aid,traceid:i.adProxy.data.traceid,screenWidth:Zm,screenHeight:Qm}),Object(O.publish)("emitWeappTouchEvent")),i.adProxy.reportVideoLoadTime({beginTime:a,endTime:(new Date).getTime(),reportType:2}),i.isShowed=!0,i.startExposureTime=0,i.isShowedExposureReported=!1,i.isViewableExposureReported=!1,i.isCardExposureReported=!1,i.adProxy.isViewable=!1,Aw.call(e)||Cw.call(e)?Tw.call(e):(i.adProxy.isValidCondition("widget_gray_video_sound")?(Li.pauseAllAudio(),i.video.muted=!1,tb&&(i.video.obeyMuteSwitch=!0),i.sound.src=zm,i.soundFix.src=zm):(i.video.muted=!0,i.sound.src=Ym,i.soundFix.src=Ym),i.count.style.hidden=!1,i.countDown.style.hidden=!1,i.splitLineLeft.style.hidden=!1,i.countDownFix.style.hidden=!1,i.card.style.hidden=!0,i.container.style.hidden=!1,i.adFeedbackList.style.hidden=!0,i.adCover.show(),i.adProxy.setTimePoint("p15"),i.container.nextLayout().then((function(){return Object(w_.timeout)(500)})).then((function(){if(Ew.call(e))return Promise.reject({errMsg:gb});if(i.isSwitched)return lw.call(e,1);mb.call(e).then((function(){i.topBar.style.hidden=!1,i.topBarFix.style.hidden=!0,ib||(i.isFullscreen=!0)})).catch((function(){i.topBar.style.hidden=!0,i.topBarFix.style.hidden=!1}));var t=(Zm-Qm)/2,n={top:0,duration:Xm};return yb.call(e)&&(n={top:t,rotate:-90,duration:Xm}),i.container.animate(n).then((function(){Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_ADS);var t=i.video.style,n=t.width,r=t.height,o=i.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:n,height:r});return i.startExposureTime=+new Date,Gm(o,"激励视频","原始曝光"),Object(w_.timeout)(500).then((function(){i.isFirstPlay=!0,i.videoFirstPlayTime=(new Date).getTime(),i.adProxy.setTimePoint("p20"),Dw.call(e,"play"),tw.call(e),ew.call(e,qy.REWARDEDVIDEO_EVENT.REWARDEDVIDEOPLAY)}))})).then((function(){i.isFirstPlaySuccess=!0;var e=i.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:i.data.video.duration,muted:i.video.muted});Gm(e,"激励视频","开始播放")})).catch((function(t){var n={errMsg:t,isSwitched:i.isSwitched};return i.adProxy.reportAdMonitorData(vv.IDKEY.REWARDED_VIDEO_ANIMATE_ERROR,n),lw.call(e,2)}))})).catch((function(e){throw Oy("show",i.adType,0),e})))})).catch((function(e){throw Oy("show",i.adType,0),e}))}},{key:"isReady",value:function(){return!Ew.call(this)&&Vm(this).isData}},{key:"destory",value:function(){Ow.call(this)}},{key:"destroy",value:function(){Ow.call(this)}},{key:"onError",value:function(e){Ew.call(this)||Vm(this).emitter.on("_error",e)}},{key:"offError",value:function(e){Ew.call(this)||Vm(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){Ew.call(this)||Vm(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){Ew.call(this)||Vm(this).emitter.off("load",e)}},{key:"onClose",value:function(e){if(!Ew.call(this)){var t=Vm(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}}},{key:"offClose",value:function(e){if(!Ew.call(this)){var t=Vm(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}}]),n}(Pu.Component),Mw=n(192),Lw=327,Bw=249,Fw=184,Uw=140,Ww=388,Vw=308;function Gw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gw(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gw(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var zw={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},Yw={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:Lw,height:36},landscape:{width:Bw,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:Lw,height:Ww},landscape:{width:Bw,height:Vw}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:Lw,height:Ww},landscape:{marginTop:70,width:Bw,height:Vw},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:Lw,height:Ww},landscape:{width:Bw,height:Vw},hidden:!0},adContent:{zIndex:1000008,portrait:{width:Lw,height:204},landscape:{width:Bw,height:168},flexDirection:"column",alignItems:"center"},adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:zw,wordingLine1:zw,wordingLine2:zw,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:8,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:Lw,height:400},landscape:{width:Bw,height:Vw}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},qw={adMedia:{zIndex:1000008,portrait:{width:Lw,height:Fw},landscape:{width:Bw,height:Uw}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:Lw,height:Fw},landscape:{width:Bw,height:Uw},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:Lw,height:Fw},landscape:{width:Bw,height:Uw}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:Lw,height:Fw},landscape:{width:Bw,height:Uw}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:Lw},landscape:{fontSize:11,width:Bw},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},Kw={adMedia:{zIndex:1000008,portrait:{width:Lw,height:Fw},landscape:{width:Bw,height:Uw}}},Jw='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',Xw='\n    <image id="ad-media">\n      '+Jw+"\n    </image>\n  ",$w='\n  <text bubble-event="true"></text>\n';function Zw(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var Qw=n(76),eO="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png",tO=0,nO=0,rO=m.IS_IOS,iO=m.IS_ANDROID,oO="",aO=!0,sO="image",cO="video";w.default.onReady((function(){oO=Object(Dg.getInitDeviceOrientation)();var e=Object(tt.getInitScreenSize)();tO=e.screenWidth,nO=e.screenHeight;try{w.default.global.window.pageOrientation&&w.default.global.window.pageOrientation}catch(e){}aO=Object(A.isGame)()}));var uO=0xac3cfbe83299d,lO="interstitial-ad has been destroyed",dO=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(FO.call(this))return!1;var n=Object(Pu.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&pO.call(this,e,i),r},fO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(FO.call(this))return!1;var n=Object(Pu.getPrivateThis)(this),r=!1,i=0;return n.adProxy.isValidCondition("widget_gray_time_limit_2")&&(i=100*(n.data.condition.widget_gray_time_limit_2||5)),i>0&&(0===n.startExposureTime||+new Date-n.startExposureTime<i)&&(r=!0,n.adProxy.reportAdMonitorData(49,{clickType:t})),n.isShow||(r=!1),r},pO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!FO.call(this)){var n=Object(Pu.getPrivateThis)(this);if(n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:uO,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}}},hO=function(e){if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s={currentTime:t.videoCurrentTime,duration:t.videoDuration},c=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:r,top:i,width:o,height:a,videoData:s});return Object(w_.logReport)(c,"interstitialAd","点击"),gO.call(this,{stage:1002}),c}}},gO=function(e){var t=e.stage;if(!FO.call(this)){var n={adtype:3,stage:t};Object(Pu.getPrivateThis)(this).adProxy.reportADFunnelModel(n)}},vO=function(e){if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));Object(w_.logReport)(n,"interstitialAd","关注")}},_O=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!FO.call(this)){var r=Object(Pu.getPrivateThis)(this);if(Object(w_.log)("插屏广告 - 检查曝光"),!r.container.layoutBox)return Object(w_.log)("插屏广告 - 尚未完成布局，等待下一个loop检查"),Object(w_.timeout)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height,u=!1===r.container.style.hidden;if(!r.isShowedExposureReported&&u){Object(w_.log)("插屏广告 - 原始曝光"),r.isShowedExposureReported=!0,r.startExposureTime=+new Date;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed"});Object(w_.logReport)(l,"interstitialAd","原始")}if(!r.isViewableExposureReported&&u&&r.ad_type===sO){if(!n)return Object(w_.log)("可视曝光第 1 阶段, 需等待 1 秒后再检查"),Object(w_.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(w_.log)("插屏广告 - 可视曝光第 2 阶段"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,exposureType:"viewable"});Object(w_.logReport)(d,"interstitialAd","可视")}}},yO=function(e){if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this),n=+new Date,r={slotid:uO,is_game:aO?1:0,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,close_type:e,exposure_duration:n-t.startExposureTime-t.hideDuration,start_time:t.startExposureTime,close_time:n};return t.adProxy.reportCloseAction(r)}},mO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!FO.call(this)){var n=Object(Pu.getPrivateThis)(this),r=n.adContainer.style,i=r.width,o=r.height,a={click_button:e,cost_type:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,slotid:uO,is_game:aO?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,clientexptime:n.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:tO,screen_height:nO};return n.adProxy.reportAntifraud(a)}},bO=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!FO.call(this)){var d=Object(Pu.getPrivateThis)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:tO,adHeight:nO,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:uO,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},wO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)}},OO=function(){if(!FO.call(this)){var e=Object(tt.getSystemInfoSync)();tO=e.screenWidth,nO=e.screenHeight,oO=tO>nO?"landscape":"portrait"}},EO=function(){var e=this;if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this),n=t.adProxy.fetch();return n.catch((function(e){return t.emitter.emit("_error",e)})),t.adFetchResult=n,t.adFetchResult.then((function(n){return t.isData=!0,t.data=n||{},t.autoCloseTime=n.card_info&&n.card_info.auto_close_time||15,t.launchTime=n.card_info&&n.card_info.launch_time||15,t.frequencyTime=n.card_info&&n.card_info.frequency_time||15,IO.call(e)})).catch((function(e){return Promise.reject(e)}))}},SO=function(e){var t=this,n=Object(Pu.getPrivateThis)(this),r=function(e){var t="",n="";switch(e){case"image":t=Xw,n=Hw(Hw({},Yw),Kw);break;case"video":t='\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        \n    <text id="ad-video-Count-Down">\n    </text>\n  \n        \n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  \n        \n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  \n        \n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  \n      </video>\n    </view>\n  ',n=Hw(Hw({},Yw),qw);break;default:t=Xw,n=Hw(Hw({},Yw),Kw)}return{template:'\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        '+t+'\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  ',style:n}}(n.ad_type),i=r.template,o=r.style;n.cardStyle=o,n.cardXOM=Qw(i).root,O_.call(this,n.cardXOM,o),Vs.webviewLayout.add(n.body),n.container.on("click",(function(e){if(dO.call(t,e,!1)&&!n.isShowCloseTip&&!fO.call(t,e,4)){if(n.isClosing)return Promise.resolve();NO.call(t,1),mO.call(t,4,e)}})),n.cancelBox.on("click",(function(e){if(n.isShow||n.adProxy.reportAdMonitorData(124,{isClosing:n.isClosing}),dO.call(t,e,!1)&&!n.isShowCloseTip&&!fO.call(t,e,3)){if(n.isClosing)return Promise.resolve();NO.call(t,0),mO.call(t,3,e)}})),n.adFeedbackContainer.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adFeedbackList.style.hidden=!n.adFeedbackMenu.style.hidden||!n.adFeedbackList.style.hidden,n.adFeedbackMenu.style.hidden=!0,n.adFeedbackList.style.hidden||bO.call(t,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),n.adFeedbackBtn.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adProxy.openFeedbackUrl(aO?1007:1006),n.adFeedbackList.style.hidden=!0,bO.call(t,{secondGradeId:1,secondGradeDesc:"投诉"})))})),n.adDislikeBtn.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adFeedbackList.style.hidden=!0,n.adFeedbackMenu.style.hidden=!1,bO.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),n.adQualityBtn.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,bO.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),NO.call(t,7),mO.call(t,8,e)))})),n.adDuplicateBtn.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,bO.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),NO.call(t,7),mO.call(t,8,e)))})),n.adDismatchBtn.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,bO.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),NO.call(t,7),mO.call(t,8,e)))})),n.adButton.on("click",(function(e){dO.call(t,e)&&(fO.call(t,e,1)||MO.call(t,e,1))})),n.adWording.on("click",(function(e){mO.call(t,5,e)})),n.ad_type===sO&&n.adMedia.on("click",(function(e){n.adProxy.isValidCondition("widget_gray_optimizedstyle")?dO.call(t,e)&&(fO.call(t,e,2)||MO.call(t,e,2)):mO.call(t,2,e)})),n.ad_type===cO&&(n.adVideoClickMask.on("click",(function(e){dO.call(t,e)&&(fO.call(t,e,2)||MO.call(t,e,2))})),n.adVideoAfter.on("click",(function(e){dO.call(t,e)&&(fO.call(t,e,2)||MO.call(t,e,2))})),n.adVideoAudioBox.on("click",(function(e){dO.call(t,e,!1)&&(fO.call(t,e,1)||(n.adMedia.muted=!n.adMedia.muted,n.adVideoAudioIcon.src=n.adMedia.muted?eO:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),n.adMedia.onTimeUpdate((function(e){var r=e.duration,i=e.position;if(!FO.call(t)){if(UO.call(t),n.adMedia.autoplay=!1,i>0&&(n.videoCurrentTime=1e3*i),n.isFirstPlay){n.adProxy.setTimePoint("p21",{time:Date.now()-1e3*i});var o=0;n.showTime>n.videoFirstPlayTime&&(o=n.showTime-n.videoFirstPlayTime),n.adProxy.reportVideoLoadTime({beginTime:n.videoFirstPlayTime,endTime:(new Date).getTime()-parseInt(1e3*i),departureTime:o,reportType:1,preloadVideo:n.preloadVideo?1:0,preloadVideoSuccess:n.preloadVideoSuccess?1:0}),n.isFirstPlay=!1,gO.call(t,{stage:1004}),n.isFirstPlaySuccess=!0,n.adProxy.reportAdIDKey({key:103})}if(i>=1&&!n.isViewableExposureReported){var a=n.adMedia.style,s=a.width,c=a.height;n.isViewableExposureReported=!0,n.adProxy.isViewable=!0;var u=n.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:s,height:c});Object(w_.logReport)(u,"插屏视频","播放曝光")}var l=Math.ceil(r-i);n.adVideoCountDown.value=l.toString()+"s",rO&&r-i<.6&&n.adVideoAfter.style.hidden&&(n.adVideoAfter.style.hidden=!1,n.adVideoAfter.animate({opacity:1,duration:350}),n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0),n.videoDuration=1e3*r}})),n.adMedia.onEnded((function(){n.videoCurrentTime=n.videoDuration,n.isEnded=!0,n.isPlaying=!1,WO.call(t);var e=n.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});Object(w_.logReport)(e,"插屏视频","播放完成"),n.adVideoAfter.style.hidden=!1,n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0,iO&&n.adVideoAfter.animate({opacity:1,duration:300}),n.adProxy.reportAdMonitorData({key:104})})),n.adMedia.onError((function(e){WO.call(t),n.adProxy.reportAdMonitorData(101,e)})))},TO=function(){if(!FO.call(this)){var e=Object(Pu.getPrivateThis)(this),t=e.data,n=t.width,r=t.height,i="portrait"===oO?Lw/n:Bw/n,o="portrait"===oO?Ww/r:Vw/r,a="portrait"===oO?tO/375:nO/375;e.adMedia.scale=i;var s=Object.keys(e.cardStyle);s.forEach((function(t){if(e.cardStyle[t].hasOwnProperty(oO)){var n=e.cardStyle[t][oO];Object.keys(n).forEach((function(r){e[t]&&(e[t].style[r]=n[r],e.cardStyle[t][r]=n[r])}))}})),e.adBackground.scale=o;var c=n*o;e.adBackground.style.width=e.cardStyle.adBackground.width=c,"portrait"===oO?(e.adMedia.style.width=e.cardStyle.adMedia.width=Lw,e.adMedia.style.height=e.cardStyle.adMedia.height=Fw,e.adBackground.style.height=e.cardStyle.adBackground.height=Ww,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-Lw)/2):"landscape"===oO&&(e.adMedia.style.width=e.cardStyle.adMedia.width=Bw,e.adMedia.style.height=e.cardStyle.adMedia.height=Uw,e.adBackground.style.height=e.cardStyle.adBackground.height=Vw,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-Bw)/2);var u=["width","height","fontSize","lineHeight","borderRadius"];return s.forEach((function(t){if(!["container","mask","body"].includes(t))if(u.forEach((function(n){e[t]&&e[t].style.hasOwnProperty(n)&&(e[t].style[n]=e.cardStyle[t][n]*a)})),"adWording"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a;else if("adButton"===t)e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if("adVideoAfterIcon"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a,e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if(0===t.indexOf("wordingLine")){var n="portrait"===oO?Lw:Bw;e[t]&&e[t].style&&(e[t].style.width=n*a)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=tO,e.container.style.height=nO,e.body.style.width=tO,e.body.style.height=nO,e.mask.style.width=tO,e.mask.style.height=nO,e.container.nextLayout().then((function(){return Object(w_.log)("updateUI 完成"),!aO&&rO?e.container.forceUpdate():Promise.resolve()}))}},IO=function(){var e=this;if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this);try{var n,r=t.data,i=r.app,o=r.appInfo,a=(o.apkName,o.channelId,o.urlScheme,r.product_type),s=(r.dest_type,r.crt_size),c=r.crtInfo,u=r.button_action,l=r.image_url,d=r.card_info,f=d.bg_color,p=d.font_color,h=d.bg_img,g=d.desc,v=d.thumb,_=d.title,y=c&&c[0]&&c[0].card_info&&c[0].card_info.mp_tag_type;switch(s){case 701:t.ad_type=sO;break;case 913:t.ad_type=cO;break;default:t.ad_type=sO}if(t.body&&Vs.webviewLayout.remove(t.body),SO.call(this),t.body.fullscreen=!0,aO||(t.body.style.fixed=!0),t.ad_type===cO){var m=t.data.short_video,b=m.thumb_url,w=m.video_url,O=m.video_duration;t.adMask.style.hidden=!0,t.adBackground.style.hidden=!0,t.adVideoAfter.style.hidden=!0,t.adVideoAudioIcon.src=eO,t.adVideoAfter.src=h,t.adVideoAfterIcon.src=v,t.adVideoAfterText.value=_,t.videoDuration=1e3*O,t.adMedia.autoplay=!1,rO&&t.adMedia.src==w&&t.adMedia.seek(0),rO?(t.adMedia.poster=b,Object(w_.timeout)(500).then((function(){t.adMedia.src=w,t.adProxy.setTimePoint("p8")}))):(t.adProxy.setTimePoint("p8"),t.adMedia.src=w,t.adMedia.poster=b),iO&&(t.preloadVideo=!0,t.preloadVideoSuccess=!1,t.adProxy.preloadVideo([w]).catch((function(e){t.adProxy.reportAdMonitorData(107,e)}))),t.adProxy.reportVideoLoadTime({beginTime:t.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),t.adProxy.reportAdIDKey({key:98})}else t.ad_type===sO&&(t.adMedia.src=l,t.adMask.style.hidden=!1,t.adBackground.style.hidden=!1,t.adProxy.reportAdIDKey({key:100}));if(f?(t.adMask.style.opacity=1,t.adMask.style.backgroundColor=f,n=p,t.relationLine.style.color=p,t.adButton.style.color=p,t.adButton.style.borderColor=p,t.adButtonText.style.color=p,t.adBackground.style.hidden=!0):t.adProxy.isValidCondition("widget_gray_optimizedstyle")?(t.adContainer.style.borderRadius=8,t.adContent.style.backgroundColor="#ffffff",n="#000000",t.relationLine.style.color="#b3b3b3",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#07c160",t.adButton.style.backgroundColor="#07c160",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===cO):(t.adMask.style.opacity=.5,t.adMask.style.backgroundColor="#000000",n="#ffffff",t.relationLine.style.color="#ffffff",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#ffffff",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===cO,t.adBackground.src=h),g.forEach((function(r,i){var o="wordingLine"+i,a=Qw($w).root;a.attributes.id=o;var s=Pu.create.call(e,a);s.value=r,s.style.color=n,t.adWording.add(s)})),t.adButtonText.value=u.button_text,t.buttonTextType=u.text_type||0,8===y){var E=+new Date;gg({buttonText:u.button_text,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:E,endTime:n,showTime:t.showDetailTime||0}),e){var r="— 最近已有"+e.count+"人"+e.descText+" —";t.relationLine.value=r}else t.relationLine.value=""})).catch((function(e){t.relationLine.value="",t.adProxy.reportAdMonitorData(116,e)}))}12===a?(t.adProxy.setAppInstallState(!1),kO.call(this)):23===a&&i.isFollowed&&0===t.buttonTextType&&(t.adButtonText.value="查看公众号"),t.adProxy.preloadLanding(),t.emitter.emit("load"),t.container.ready().then((function(){Object(w_.log)("interstitialAd container 及其子元素 ready"),t.emitter.emit("ready")})),t.adProxy.reportAdIDKey({key:108})}catch(e){return t.adProxy.reportAdIDKey({key:110}),t.adProxy.reportAdMonitorData(40,e),t.adProxy.reportAdIDKey({key:109}),Promise.reject(e)}}},AO=function(e){var t=this;if(!FO.call(this)){var n=Object(Pu.getPrivateThis)(this);n.clickCount>1&&n.adProxy.reportRepeatClick({slotId:uO,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.clickCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName});var r=n.adProxy.land(e);if(23===n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var t=/ok/.test(e.errMsg);t&&0===n.buttonTextType&&(n.adButtonText.value="查看公众号",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:41})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=r-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:uO,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:r,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.clickCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"})})).catch((function(e){n.lastJsapiStatus=1})),vO.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?(n.isLandingPage=!0,WO.call(t)):n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1})),n.ad_type===cO){var i=n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"land",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});Object(w_.logReport)(i,"插屏视频","跳转")}}},CO=function(){var e=this;if(!FO.call(this)){var t=Object(Pu.getPrivateThis)(this);return Object(w_.timeout)(10).then((function(){return t.adFetchResult.then((function(){if(t.isLandingPage){t.lastJsapiStatus=0,t.isLandingPage=!1;var n=+new Date;t.landingPageCostTime=n-t.hideTime,t.adProxy.reportLandingTime({slotId:uO,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.hideTime,closeTime:n,stayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:1}),NO.call(e,3)}t.adButton&&23===t.data.product_type?t.adProxy.checkFollow(t.data.app.uin).then((function(e){0===t.buttonTextType&&(t.adButtonText.value=e?"查看公众号":t.data.button_action.button_text),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===t.data.product_type&&kO.call(e)})).catch((function(){}))}))}},kO=function(){if(!FO.call(this)){var e=Object(Pu.getPrivateThis)(this);if(e.data){var t=e.data.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),i&&i.trim().length>0?e.adButtonText.value="进入应用":e.adButtonText.value="查看应用",1===e.buttonTextType&&(e.adButtonText.value=e.data.button_action.button_text))})).catch((function(e){}))}}},xO=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Pu.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},PO=function(){var e=this;if(FO.call(this))return Promise.reject({errMsg:lO});var t=Object(Pu.getPrivateThis)(this);return t.onceSwitched=!1,t.startShow=+new Date,t.body.style.width=tO,t.body.style.height=nO,!aO&&rO&&(t.body.style.hidden=!1),Promise.resolve().then((function(){if(OO(),FO.call(e))return Promise.reject({errMsg:lO});if(t.isShow=!0,t.isShowCloseTip=!1,t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!0,t.ad_type===cO){t.videoFirstPlayTime=(new Date).getTime(),t.adProxy.setTimePoint("p20"),UO.call(e),t.adMedia.play(),t.adMedia.autoplay=!0,t.isFirstPlay=!0;var n=t.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:t.videoDuration,muted:t.adMedia.muted});t.adProxy.reportAdIDKey({key:99}),Object(w_.logReport)(n,"插屏视频","开始播放")}return TO.call(e).then((function(){return t.body.style.hidden&&(t.body.style.hidden=!1),t.container.style.hidden=!1,t.isSwitched?NO.call(e,6):t.container.animate({opacity:1,duration:300}).then((function(){return t.showDetailTime=+new Date,t.container.nextLayout((function(){return _O.call(e)}))})).catch((function(n){var r={errMsg:n,isSwitched:t.isSwitched,onceSwitched:t.onceSwitched,startShow:t.startShow,enterRoute:t.enterRoute,enterTime:t.enterTime,outRoute:t.outRoute,outTime:t.outTime,lastRoute:t.lastRoute};return t.adProxy.reportAdMonitorData(36,r),NO.call(e,6).then((function(){return Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})}))}))}))}))},DO=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(FO.call(this))return Promise.reject({errMsg:lO});var i=Object(Pu.getPrivateThis)(this),o=Ty()||0;if(1===o)return i.adProxy.reportAdMonitorData(44,wO.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});var a=i.adProxy.getWebviewInfo(),s=a.createWebviewId,c=a.currentWebviewId;return s!==c?(i.adProxy.reportAdMonitorData(45,wO.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(i.adProxy.setTimePoint("p19"),i.isSwitched=!1,Oy("show",i.adType,1),i.showTime=+new Date,i.fetchBeginTime=(new Date).getTime(),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),i.adFetchResult.catch((function(){return Promise.reject({errMsg:"no ad data"})})).then((function(){var t=+new Date-+new Date(i.adProxy.getProgramStartTime());if(t<=1e3*i.launchTime)return i.adProxy.reportAdMonitorData(42,wO.call(e,{startInterval:t})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});var n=Sy()||0,r=+new Date-n;return r<=1e3*i.frequencyTime?(i.adProxy.reportAdMonitorData(43,wO.call(e,{closeInterval:r})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(gO.call(e,{stage:1001}),xO.call(e).then((function(){return PO.call(e)})).then((function(){i.adProxy.reportAdMonitorData(46,wO.call(e))})))})).catch((function(e){return Oy("show",i.adType,0),Promise.reject(e)})))},RO=function(){if(!FO.call(this)){var e=Object(Pu.getPrivateThis)(this);e.androidAppState=0,e.isData=!1,e.isShow=!1,e.startExposureTime=0,e.isShowedExposureReported=!1,e.isViewableExposureReported=!1,e.adProxy.isViewable=!1,e.lastCloseTime=0,e.buttonTextType=0,e.startExposureTime=0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.body.style.hidden=!0,e.container.style.hidden=!0,e.isReady=!1,e.videoFirstPlayTime=0,e.isEnded=!1,e.fetchBeginTime=0,e.videoCurrentTime=0,e.videoDuration=0,e.isPlaying=!1,e.isFirstPlay=!1,e.isFirstPlaySuccess=!1,e.isSwitched=!1,e.onceSwitched=!1,e.startShow=0,e.showDetailTime=0,e.isEnded?gO.call(this,{stage:1005}):gO.call(this,{stage:1006}),Oy("show",e.adType,0),Oy("close",e.adType,+new Date),!aO&&rO?Object(w_.timeout)(100).then((function(){e.emitter.emit("close")})):e.emitter.emit("close"),e.adProxy.reset()}},jO=function(e){var t=this;if(!FO.call(this)){var n=Object(Pu.getPrivateThis)(this);return n.adProxy.reportTimePoints({slotid:uO,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}}),Promise.resolve().then((function(){return[4,6].includes(e)?Promise.resolve():n.container.animate({opacity:0,duration:300})})).then((function(){return yO.call(t,e),2===e?mO.call(t,6):3===e&&mO.call(t,7),RO.call(t),4===e?Promise.resolve():EO.call(t)}))}},NO=function(e){var t=this;if(!FO.call(this)){var n=Object(Pu.getPrivateThis)(this);return n.isClosing?Promise.resolve():n.container?(n.isClosing=!0,n.ad_type===cO&&(n.adProxy.reportVideo({playType:n.isEnded?"complete":"partial",conditionType:"close",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted}),n.adMedia.autoplay=!1,n.adMedia.pause(),WO.call(this),n.adMedia.muted=!0,n.adVideoAfter.style.opacity=0),n.container.ready().then((function(){return jO.call(t,e)})).then((function(){return n.isClosing=!1})).catch((function(e){n.isClosing=!1,n.adProxy.reportAdMonitorData(126,e)}))):(n.adProxy.reportAdIDKey({key:125}),Promise.resolve())}},MO=function(e,t){var n=this,r=Object(Pu.getPrivateThis)(this);if(r.isShow||r.adProxy.reportAdMonitorData(123,t),!FO.call(this)){var i=r.data,o=i.appInfo,a=(o.apkName,o.channelId,o.urlScheme),s=i.product_type,c=i.dest_type;12===s&&iO&&4===r.androidAppState&&a&&a.trim().length>0?(hO.call(this,e),mO.call(this,t,e),r.adProxy.launchApplication(a).catch((function(e){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0):rO&&46===s&&6===c?Promise.race([hO.call(this,e),Object(w_.timeout)(500)]).then((function(){mO.call(n,t,e),AO.call(n)})).catch((function(){mO.call(n,t,e),AO.call(n)})):(hO.call(this,e),mO.call(this,t,e),AO.call(this))}},LO=function(){var e=Object(Pu.getPrivateThis)(this);Object(ms._offShow)(e.handleEnterForeground),Is(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Vs.webviewLayout.remove(e.body),Object(Pu.removePrivateThis)(this)},BO=function(){var e=this;FO.call(this)||(xO.call(this).then((function(){var t=Object(Pu.getPrivateThis)(e);t.isShow&&(Oy("show",t.adType,0),Oy("close",t.adType,+new Date)),LO.call(e)})),this._destroyed=!0)},FO=function(){return this._destroyed},UO=function(){var e=Object(Pu.getPrivateThis)(this);WO.call(this),e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(153,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:e.adMedia.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},WO=function(){var e=Object(Pu.getPrivateThis)(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},VO=function(e){Object(M.default)(n,e);var t=Zw(n);function n(e){var r,i=e.adUnitId,o=e.pluginId,a=void 0===o?"":o;Object(N.default)(this,n),r=t.call(this);var s=Object(Pu.getPrivateThis)(Object(Cu.default)(r));s.adUnitId=i,s.adType="interstitialAd",s.cardXOM="",s.cardStyle="",s.ad_type="",s.emitter=new Ps.default,s.adProxy=new p_({adUnitId:i,adType:"interstitialAd",pluginAppid:a}),s.androidAppState=0,s.isShowedExposureReported=!1,s.isViewableExposureReported=!1,s.isReady=!1,s.isShow=!1,s.emitter.on("ready",(function(){return s.isReady=!0})),s.lastCloseTime=0,s.autoCloseTime=15,s.launchTime=15,s.frequencyTime=15,s.startExposureTime=0,s.clickCount=0,s.lastLandingTime=0,s.lastJsapiName="",s.lastJsapiStatus=0,s.lastJsapiCostTime=0,s.isLandingPage=!1,s.landingPageCostTime=0,s.hideTime=0,s.showTime=0,s.hideDuration=0,s.isClosing=!1,s.isShowCloseTip=!1,s.clickFirstGradeTime=0,s.videoFirstPlayTime=0,s.isEnded=!1,s.fetchBeginTime=0,s.videoCurrentTime=0,s.videoDuration=0,s.isPlaying=!1,s.isFirstPlay=!1,s.preloadVideo=!1,s.preloadVideoSuccess=!1,s.keepAliveTimer=null,s.isData=!1,r._destroyed=!1,s.updateResult=Promise.resolve(),s.isSwitched=!1,s.onceSwitched=!1,s.startShow=0;var c=s.adProxy.getWebviewInfo(),u=c.openType,l=c.createWebviewId,d=c.lastWebviewId,f=c.currentWebviewId,p=[u,d,f,l];return s.outRoute="",s.lastRoute="",s.enterTime=0,s.outTime=0,l===f&&(s.enterRoute=p.join("|"),s.enterTime=+new Date,s.lastRoute="enter"),l===d&&(s.outRoute=p.join("|"),s.outTime=+new Date,s.lastRoute="out"),EO.call(Object(Cu.default)(r)),aO||(Object(Ur.onAppRoute)((function(e){if(!FO.call(Object(Cu.default)(r))){var t=s.adProxy.getWebviewInfo(),n=t.createWebviewId,i=t.lastWebviewId,o=t.currentWebviewId,a=[e.openType,i,o,n];n===o&&(s.enterRoute=a.join("|"),s.enterTime=+new Date,s.onceSwitched=!0,s.lastRoute="enter"),n===i&&(s.outRoute=a.join("|"),s.outTime=+new Date,s.onceSwitched=!0,s.lastRoute="out")}})),Object(Fr.onAppRouteDone)((function(){if(!FO.call(Object(Cu.default)(r))){var e=s.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,i=e.currentWebviewId;["navigateTo","navigateBack","switchTab"].includes(t)&&n===i&&(s.isSwitched=!0,s.isShow&&NO.call(Object(Cu.default)(r),4))}})),Object(Mw.onWindowResize)((function(e){!FO.call(Object(Cu.default)(r))&&s.isShow&&e.size&&(nO=e.size.screenHeight,tO=e.size.screenWidth,oO=e.deviceOrientation,TO.call(Object(Cu.default)(r)))}))),s.handleEnterForeground=function(){if(!FO.call(Object(Cu.default)(r))){s.ad_type===cO&&s.isShow&&UO.call(Object(Cu.default)(r));var e=oO;OO(),e!==oO&&s.isShow&&TO.call(Object(Cu.default)(r)),s.hideTime>0&&s.isShow&&(s.hideDuration+=+new Date-s.hideTime),CO.call(Object(Cu.default)(r))}},s.handleEnterBackground=function(){if(!FO.call(Object(Cu.default)(r))&&s.isShow&&(s.hideTime=+new Date,s.ad_type===cO)){WO.call(Object(Cu.default)(r));var e=s.adProxy.reportVideo({playType:s.isPlaying?"partial":"complete",conditionType:"exit",playDuration:s.videoCurrentTime,videoDuration:s.videoDuration,muted:s.adMedia.muted});Object(w_.logReport)(e,"插屏广告","退出")}},Object(ms._onShow)(s.handleEnterForeground),Ts(s.handleEnterBackground),Object(O.onMethod)("onVideoResourceLoad",(function(e){!s.isShow&&s.ad_type===cO&&s.adMedia&&s.adMedia.src==e.resource&&(s.adProxy.reportAdIDKey({key:106}),s.preloadVideoSuccess=!0,s.adMedia.src=e.resource)})),r}return Object(oe.default)(n,[{key:"load",value:function(){if(FO.call(this))return Promise.reject({errMsg:lO});var e=Object(Pu.getPrivateThis)(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():EO.call(this)}},{key:"show",value:function(e){return FO.call(this)?Promise.reject({errMsg:lO}):DO.call(this,e)}},{key:"destory",value:function(){BO.call(this)}},{key:"destroy",value:function(){BO.call(this)}},{key:"onError",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("close",e)}},{key:"offClose",value:function(e){FO.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("close",e)}}]),n}(Pu.Component),GO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},HO=function(e){return!(e.isDestroyed()||!Object(lg.get)(e,["rootElement","layoutBox"]))},zO=function(){function e(t){var n=this,r=t.manager,i=t.adProxy,o=t.emitter;Object(N.default)(this,e),this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.handleEnterForeground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(qy.ROOT_EVENT.SHOWHALF),e.emitAdCustomEvent(qy.CUSTOM_EVENT.ADSHOWHALF)))},this.handleEnterBackground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(qy.ROOT_EVENT.HIDEHALF),e.emitAdCustomEvent(qy.CUSTOM_EVENT.ADHIDEHALF)))},this.handleAdCustomEvent=function(e){switch(e.action){case qy.CUSTOM_EVENT.ADVIDEOPLAY:n.checkVideoViewableExposure(!0);break;case qy.CUSTOM_EVENT.ADVIDEOPAUSE:n.checkVideoViewableExposure(!1);break;case qy.CUSTOM_EVENT.REPORTVIDEOPLAY:n.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case qy.CUSTOM_EVENT.FEEDBACKREPORT:n.reportAdFeedbackData(e.value);break;case qy.CUSTOM_EVENT.REPORTENDPAGE:n.reportEndPage(e.value.data);break;case qy.CUSTOM_EVENT.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case qy.CUSTOM_EVENT.BTNTAP:n.manager.rootComponent&&n.manager.rootComponent.emitComponentEvent(qy.ROOT_EVENT.ADBUTTONTAP),n.handleClick(e.value.event,1,!0);break;case qy.CUSTOM_EVENT.CHANGEMULTISHOW:n.multiShowList=e.value.list,n.checkExposure()}},this.manager=r,this.adProxy=i,this.emitter=o,this.bindEvent()}return Object(oe.default)(e,[{key:"setMultiShowList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.multiShowList=Object(Ue.default)(e)}},{key:"destroy",value:function(){this.unbindEvent()}},{key:"reset",value:function(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}},{key:"bindEvent",value:function(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),Object(ms._onShow)(this.handleEnterForeground),Ts(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),Object(ms._offShow)(this.handleEnterForeground),Is(this.handleEnterBackground)}},{key:"judgeTriggerClick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.manager.isDestroyed())return!1;var n=this.adProxy.isTriggerClick(e),r=n?0:1;return t&&this.reportTouchClick(e,r),n}},{key:"reportTouchClick",value:function(e,t){if(HO(this.manager)){var n=this.manager.rootElement.layoutBox,r=n.width,i=n.height,o=0;[0,2,3].includes(t)&&(this.clickCount+=1,o=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:Object(lg.get)(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:o,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:r||0,ad_height:i||0,press_interval:e.pressInterval,block_click:t})}}},{key:"handleClick",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.manager.isDestroyed()&&this.manager.adData){var i=this.manager.adData,o=i.appInfo.urlScheme,a=i.product_type,s=i.dest_type;this.manager.clearAdTimer(),a===dg.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB&&m.IS_ANDROID&&this.landManager.downloadState===qy.DOWNLOAD_STATE.INSTALLED&&o&&o.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(o).catch((function(){})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):m.IS_IOS&&a===hv.MINI_GAME&&6===s?Promise.race([this.reportClick(e),Object(lg.timeout)(500)]).then((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})).catch((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:r}))}}},{key:"reportClick",value:function(e){if(HO(this.manager)){var t=this.manager.rootElement.layoutBox,n=t.left,r=t.top,i=t.width,o=t.height,a=function(e){return hm.videoDataMap[e]||{}}(this.manager.adCustomId);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:n,top:r,width:i,height:o,videoData:a})}}},{key:"isClickLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.adProxy,r=this.manager.rootElement;if(!r)return!1;var i=r.layoutBox,o=i.width,a=i.height,s=r.getAbsolutePosition(),c=s.left,u=s.top,l=!1,d=0;n.isValidCondition("widget_gray_time_limit")&&(d=100*(this.manager.adData.condition.widget_gray_time_limit||1)),d>0&&Date.now()-this.showedExposureTime<d&&(l=!0,n.reportAdMonitorData(qy.IDKEY.AD_LIMIT_TIME,{clickType:t}));var f=0;return n.isValidCondition("widget_gray_bd_limit")&&(f=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==m.PLATFORM&&e&&f>0&&(e.absoluteEndX-c<f||c+o-e.absoluteEndX<f||e.absoluteEndY-u<f||u+a-e.absoluteEndY<f)&&(l=!0,n.reportAdMonitorData(qy.IDKEY.AD_LIMIT_BOUNDARY)),l}},{key:"reportExposure",value:function(e){var t=e.isViewable;return GO(this,void 0,void 0,Vt.a.mark((function e(){var n,r,i,o,a,s,c,u,l,d,f,p;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(HO(this.manager)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.manager,r=n.rootElement,i=n.rootComponent,o=n.isMulti,a=r.layoutBox,s=a.left,c=a.top,u=a.width,l=a.height,d={left:s,top:c,width:u,height:l},o){e.next=11;break}return t?i.emitComponentEvent(qy.ROOT_EVENT.VIEWABLEEXPOSURE):i.emitComponentEvent(qy.ROOT_EVENT.EXPOSURE),e.next=9,this.adProxy.reportExposure(Object.assign(Object.assign({},d),{exposureType:t?"viewable":"showed"}));case 9:e.next=18;break;case 11:if(f=t?this.multiViewableExposureList:this.multiExposureList,!(p=this.multiShowList.filter((function(e){return!f.has(e)}))).length){e.next=18;break}return p.forEach(f.add,f),i.emitComponentEvent(t?qy.ROOT_EVENT.VIEWABLEEXPOSURE:qy.ROOT_EVENT.EXPOSURE,{exposureList:p}),e.next=18,this.adProxy.reportExposure(Object.assign(Object.assign({},d),{multiList:p,isMulti:o,exposureType:t?"viewable":"showed"}));case 18:case"end":return e.stop()}}),e,this)})))}},{key:"checkExposure",value:function(){return GO(this,void 0,void 0,Vt.a.mark((function e(){var t,n,r,i,o,a=this;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:if(HO(this.manager)){e.next=8;break}return e.next=5,Object(lg.timeout)(0);case 5:return e.next=7,this.checkExposure();case 7:return e.abrupt("return");case 8:if(t=this.manager,n=t.rootComponent,r=t.isMulti,i=n.isShow(),o=n.exposureUntilVideoPlay,(r||!this.isExposured&&i)&&(this.isExposured=!0,this.showedExposureTime=Date.now(),this.reportExposure({isViewable:!1})),i&&!this.hasEmitShowHalf?(this.hasEmitShowHalf=!0,n.emitComponentEvent(qy.ROOT_EVENT.SHOWHALF),n.emitAdCustomEvent(qy.CUSTOM_EVENT.ADSHOWHALF)):i||(this.hasEmitShowHalf=!1,n.emitComponentEvent(qy.ROOT_EVENT.HIDEHALF),n.emitAdCustomEvent(qy.CUSTOM_EVENT.ADHIDEHALF)),!o){e.next=15;break}return e.abrupt("return");case 15:i?this.exposureTimer=setTimeout((function(){var e=n.isShow();(r||!a.isViewableExposured&&e)&&(a.isViewableExposured=!0,a.adProxy.isViewable=!0,a.reportExposure({isViewable:!0}))}),1e3):this.exposureTimer&&clearTimeout(this.exposureTimer);case 16:case"end":return e.stop()}}),e,this)})))}},{key:"checkVideoViewableExposure",value:function(e){var t=this,n=this.manager,r=n.rootElement,i=n.rootComponent;if(!this.manager.isDestroyed()&&r&&i){var o=i.isShow(),a=i.exposureUntilVideoPlay,s=r.layoutBox,c=s.left,u=s.top,l=s.width,d=s.height;a&&(o&&e?this.exposureTimer=setTimeout((function(){t.isViewableExposured||(t.isViewableExposured=!0,t.adProxy.isViewable=!0,t.adProxy.reportExposure({left:c,top:u,width:l,height:d,exposureType:"viewable"}),i.emitComponentEvent(qy.ROOT_EVENT.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}}},{key:"reportAntifraud",value:function(e,t){var n;return GO(this,void 0,void 0,Vt.a.mark((function r(){var i,o,a;return Vt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.manager.ready();case 2:if(HO(this.manager)){r.next=4;break}return r.abrupt("return");case 4:i=this.manager.rootElement.layoutBox,o=i.width,a=i.height,this.adProxy.reportAntifraud({click_button:e,cost_type:(null===(n=this.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,slotid:this.manager.getSlotId(),is_game:Sm.deviceInfo.isWaGame?1:0,pageentertime:+new Date(this.adProxy.getProgramStartTime()),ad_width:o||0,ad_height:a||0,clientexptime:this.showedExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX||0),pos_y:Math.round(t.absoluteY||0),screen_width:Sm.deviceInfo.screenWidth,screen_height:Sm.deviceInfo.screenHeight});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"reportCloseAction",value:function(e){if(!this.manager.isDestroyed()){var t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:Sm.deviceInfo.isWaGame?1:0,costtype:Object(lg.get)(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}}},{key:"reportAdFeedbackData",value:function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;this.manager.isDestroyed()||(n&&!a&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:Sm.deviceInfo.screenWidth,adHeight:Sm.deviceInfo.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?this.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?Date.now():0,feedbackReason:l}))}},{key:"reportFollow",value:function(e){var t=this;if(!this.manager.isDestroyed())return e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}))}},{key:"reportVideoPlay",value:function(e,t,n){var r=n.playDuration,i=n.isMuted,o=n.videoDuration;this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:r,videoDuration:o,muted:i})}},{key:"reportEndPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ace_type,n=e.exposure_duration,r=void 0===n?0:n;this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:Object(lg.get)(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:Sm.deviceInfo.isWaGame?1:0,ace_type:t,exposure_duration:r})}},{key:"reportTimePoints",value:function(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:Object(lg.get)(this.adProxy,["adData","data","is_cpm"])?1:2})}}]),e}(),YO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},qO=function(){function e(t){var n=t.manager,r=t.reporter;Object(N.default)(this,e),this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=qy.DOWNLOAD_STATE.DEFAULT,this.downloadProgress=0,this.manager=n,this.adProxy=n.adProxy,this.reporter=r}return Object(oe.default)(e,[{key:"reset",value:function(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}},{key:"checkAdState",value:function(){var e;return YO(this,void 0,void 0,Vt.a.mark((function t(){var n;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.manager.isDestroyed()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(w_.timeout)(10);case 4:this.isLandingPage&&(this.adProxy.setTimePoint("p11"),this.lastJsapiStatus=0,this.isLandingPage=!1,n=Date.now(),this.landingPageCostTime=this.hideTime?n-this.hideTime:0,this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:Object(Dg.get)(this.adProxy,["adData","data","is_cpm"])?1:2,openTime:this.hideTime,closeTime:n,stayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:1}),(null===(e=this.manager.rootComponent)||void 0===e?void 0:e.hideAfterLanding)&&this.manager.hide()),this.manager.isShow&&this.manager.setAdTimer();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"checkFollow",value:function(){return YO(this,void 0,void 0,Vt.a.mark((function e(){var t,n,r;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.manager.adData,n=Object(Dg.get)(t,["button_action","text_type"],0),e.next=4,this.adProxy.checkFollow(t.app.uin);case 4:r=e.sent,0===n&&this.manager.updateButtonText({text:r?"查看":t.button_action.button_text}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=r?1:0);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"checkAppInstallState",value:function(){return YO(this,void 0,void 0,Vt.a.mark((function e(){var t,n,r,i,o;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return t=this.manager.adData.appInfo,n=t.apkName,r=t.versionCode,i=t.urlScheme,e.prev=3,e.next=6,this.adProxy.getInstallState(n);case 6:(o=e.sent).isInstalled&&(void 0===o.versionCode||o.versionCode>=r)&&(this.downloadState=qy.DOWNLOAD_STATE.INSTALLED,this.downloadProgress=0,this.adProxy.setAppInstallState(!0),i&&i.trim().length>0?this.manager.updateButtonText({text:"进入应用"}):this.manager.updateButtonText({text:"查看应用"})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}}),e,this,[[3,10]])})))}},{key:"landing",value:function(e){var t=this;if(!this.manager.isDestroyed()){this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:Object(Dg.get)(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});var n=this.adProxy.land(e),r=Object(Dg.get)(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===dg.PRODUCT_TYPE.WECHAT&&Object(Dg.get)(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n,i=/ok/.test(e.errMsg);i&&0===r&&(t.manager.updateButtonText({text:"查看公众号"}),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:qy.IDKEY.FOLLOW_SUCCESS})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var o=Date.now();t.lastJsapiStatus=0,t.lastJsapiCostTime=o-t.lastLandingTime,"private_addContact"===t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:t.manager.getSlotId(),costType:(null===(n=t.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:t.lastLandingTime,closeTime:o,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.reporter.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:i?2:3,actTypeStr:i?"关注":"取消"}),t.manager.isShow&&t.manager.setAdTimer()})).catch((function(){t.lastJsapiStatus=1})),this.reporter.reportFollow(n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(t.lastJsapiName)?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=Date.now()-t.lastLandingTime})).catch((function(){t.lastJsapiStatus=1}))}}}]),e}(),KO=n(108);function JO(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return XO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return XO(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function XO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $O=new WeakMap,ZO=function(e){return $O.get(e)},QO=function e(t){Object(N.default)(this,e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object(KO.default)(t,r);$O.set(this,o)};function eE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function tE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rE=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},iE="customAd has been destroyed",oE=1,aE=function(){function e(t){var n=this,r=t.adUnitId,i=t.adIntervals,o=void 0===i?0:i,a=t.left,s=t.top,c=t.width,u=t.height,l=t.fixed,d=t.style;if(Object(N.default)(this,e),this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new by,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.adTimer=null,this.readyResolve=new Set,this.isMulti=!1,this.handleReady=function(){if(!n.isReady){var e,t=tE(n.readyResolve);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}n.readyResolve.clear(),n.isReady=!0}},this.handleEnterBackground=function(){n.landManager.hideTime=Date.now(),n.clearAdTimer()},this.handleEnterForeground=function(){n.landManager.checkAdState(),n.landManager.hideTime&&(n.reporter.hideDuration+=Date.now()-n.landManager.hideTime)},this.handleAdCustomEvent=function(e){var t;switch(e.action){case qy.CUSTOM_EVENT.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&n.emitter.emit(e.value.eventName,e.value.detail||{});break;case qy.CUSTOM_EVENT.SHOWFEEDBACK:null===(t=n.rootComponent)||void 0===t||t.showFeedback();break;case qy.CUSTOM_EVENT.FEEDBACKBTNTAP:n.adProxy.openFeedbackUrl(Ng.isWaGame?1003:1005);break;case qy.CUSTOM_EVENT.HIDEAD:n.hide();break;case qy.CUSTOM_EVENT.REPORTTIMEPOINT:e.value.key&&n.adProxy.setTimePoint(e.value.key);break;case qy.CUSTOM_EVENT.ADSHOWHALF:n.isShow=!0;break;case qy.CUSTOM_EVENT.ADHIDEHALF:n.isShow=!1;break;case qy.CUSTOM_EVENT.CHECKEXPOSURE:n.reporter.checkExposure();break;case qy.CUSTOM_EVENT.LANDAD:var r=e.value,i=r.index,o=r.event;if(n.reporter.isClickLimit(o))return;n.isMulti&&n.adProxy.setCurrentData(i),n.reporter.handleClick(o,1,!1)}},this.handleLoad=function(e){return n.emitCallback("load",e)},this.handleError=function(e){return n.emitCallback("error",e)},this.handleClose=function(){return n.emitCallback("close")},this.handleHide=function(){return n.emitCallback("hide")},this.handleVideoDislike=function(){return n.emitCallback("videodislike")},this.onLoad=function(e){return n.callbacks.load.push(e)},this.onError=function(e){return n.callbacks.error.push(e)},this.onClose=function(e){return n.callbacks.close.push(e)},this.onHide=function(e){return n.callbacks.hide.push(e)},this.onVideoDislike=function(e){return n.callbacks.videoDislike.push(e)},this.offLoad=function(e){return n.removeCallback("load",e)},this.offError=function(e){return n.removeCallback("error",e)},this.offClose=function(e){return n.removeCallback("close",e)},this.offHide=function(e){return n.removeCallback("hide",e)},this.offVideoDislike=function(e){return n.removeCallback("videodislike",e)},r||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=r,this.slotId="4071202390577885",this.adCustomId="AD_CUSTOM_"+oE,oE+=1,this.adPosition={left:a,top:s,width:c,height:u,fixed:l},d&&"object"===Object(R.default)(d))for(var f=0,p=["left","top","width","height","fixed"];f<p.length;f++){var h=p[f];null!=d[h]&&(this.adPosition[h]=d[h])}Object(A.isGame)()&&delete this.adPosition.fixed,this.adProxy=new p_({adUnitId:r,adType:this.adType}),this.reporter=new zO({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new qO({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof o?o:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}return Object(oe.default)(e,[{key:"getSlotId",value:function(){return this.slotId}},{key:"bindEvent",value:function(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),Object(ms._onShow)(this.handleEnterForeground),Ts(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),Object(ms._offShow)(this.handleEnterForeground),Is(this.handleEnterBackground)}},{key:"fetchAndRender",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isAdInterval,i=void 0!==r&&r,o=n.autoUnmount,a=void 0!==o&&o;return rE(this,void 0,void 0,Vt.a.mark((function n(){var r,o,s,c,u,l;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([this.adProxy.fetch(i),this.getSystemInfo(),Object(Sm.deviceReady)()]);case 3:return r=n.sent,o=Object(Co.default)(r,2),s=o[0],c=o[1],a&&this.resetState(),this.systemInfo=c,this.adData=s,this.adDatas=this.adProxy.datas||[],this.template=this.getTemplateFromAdData(s),this.tplConfig=(null===(e=this.template)||void 0===e?void 0:e.tplConfig)||{},this.checkSize(),n.next=16,this.render();case 16:this.adProxy.reportAdMonitorData(qy.IDKEY.RENDER_SUCCESS),u={errMsg:"load advertisement success"},(null===(t=this.rootComponent)||void 0===t?void 0:t.exportAid)&&(u.aid=this.adData.aid),this.emitter.emit("load",u),this.fetchedError=null,this.adProxy.preloadLanding(),n.next=30;break;case 24:n.prev=24,n.t0=n.catch(0),this.adProxy.reportAdMonitorData(qy.IDKEY.RENDER_FAILED,n.t0),l=(null===n.t0||void 0===n.t0?void 0:n.t0.errCode)?n.t0:{errCode:qy.ERROR_CODE.ERR_RENDER,errMsg:"customAd render failed"},this.fetchedError=l,this.emitter.emit("error",l);case 30:case"end":return n.stop()}}),n,this,[[0,24]])})))}},{key:"getTemplateFromAdData",value:function(e){return e.template}},{key:"checkSize",value:function(){if(this.tplConfig){var e=this.tplConfig,t=this.adPosition.width;null==t&&(t=Ng.screenWidth),t=Number(t);var n=e.minWidth||0,r=e.maxWidth||0,i=e.baseWidth||375,o=Math.min(Ng.screenWidth,Math.max(n,t));r&&(o=Math.min(o,r)),0===o&&(this.adProxy.reportAdMonitorData(qy.IDKEY.WIDTH_GET_ERROR,{unitId:this.adUnitId}),Im(i,i)),this.adPosition.width=o,Im(o,i)}}},{key:"reload",value:function(){}},{key:"updateButtonText",value:function(e){var t,n=e.text,r=e.progress;null===(t=this.rootComponent)||void 0===t||t.emitAdCustomEvent(qy.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:n||"",progress:r||0})}},{key:"getSystemInfo",value:function(){return Ng}},{key:"ready",value:function(){var e=this;return new Promise((function(t,n){var r=function(){e.fetchedError?n(e.fetchedError):t()};e.isReady?r():e.readyResolve.add(r)}))}},{key:"removeCallback",value:function(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((function(e){return e!==t})):[])}},{key:"emitCallback",value:function(e,t){if(this.callbacks[e]){var n,r=tE(this.callbacks[e]);try{for(r.s();!(n=r.n()).done;){var i=n.value;"function"==typeof i&&i(t)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.branchId,n=e.branchDim;return rE(this,void 0,void 0,Vt.a.mark((function e(){return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}throw{errMsg:iE};case 2:if(!this.isShow&&!this.isShowing){e.next=4;break}throw{errMsg:"the advertisement has shown"};case 4:return this.isShowing=!0,t?this.adProxy.recordAnalyseBranchInfo({branchId:t,branchDim:n}):this.adProxy.resetAnalyseBranchInfo(),e.prev=6,e.next=9,this.ready();case 9:this.rootComponent&&this.rootComponent.show(),this.setAdTimer();case 11:return e.prev=11,this.isShowing=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[6,,11,14]])})))}},{key:"setAdTimer",value:function(){var e,t,n=this;this.rootComponent&&!this.rootComponent.enableTimer||(t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:(null===(e=this.adData)||void 0===e?void 0:e.refreshTime)?1e3*this.adData.refreshTime:null)&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((function(){return n.refetch(!0)}),t))}},{key:"clearAdTimer",value:function(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}},{key:"refetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return rE(this,void 0,void 0,Vt.a.mark((function t(){var n;return Vt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isDestroyed()&&this.isShow){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.fetchAndRender({isAdInterval:e,autoUnmount:!0});case 5:return t.next=7,this.show();case 7:if(this.adProxy.reportAdMonitorData(qy.IDKEY.REFETCH_SUCCESS),!this.rootElement){t.next=12;break}return t.next=11,this.rootElement.nextLayout();case 11:this.reporter.checkExposure();case 12:t.next=19;break;case 14:t.prev=14,t.t0=t.catch(2),this.adProxy.reportAdMonitorData(qy.IDKEY.REFETCH_FAILED,t.t0),n={errCode:qy.ERROR_CODE.ERR_RENDER,errMsg:"customAd render failed"},this.emitter.emit("error",n);case 19:case"end":return t.stop()}}),t,this,[[2,14]])})))}},{key:"hide",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return rE(this,void 0,void 0,Vt.a.mark((function n(){var r;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isDestroyed()){n.next=2;break}throw{errMsg:iE};case 2:if(this.isShow&&!this.isHiding){n.next=4;break}return n.abrupt("return");case 4:if(this.isHiding=!0,null===(e=this.rootComponent)||void 0===e||e.hide(),this.clearAdTimer(),t){n.next=25;break}if(this.isReady=!1,this.emitter.emit("close"),this.resetState(),this.adProxy.setTimePoint("p14"),this.reporter.reportTimePoints(),r=!1,this.rootComponent&&(r=this.rootComponent.getRootData("refetchable")),!r){n.next=21;break}return this.unmount(),n.next=19,this.fetchAndRender();case 19:n.next=23;break;case 21:return n.next=23,this.destroy();case 23:n.next=26;break;case 25:this.emitter.emit("hide");case 26:this.isHiding=!1;case 27:case"end":return n.stop()}}),n,this)})))}},{key:"destroy",value:function(){return rE(this,void 0,void 0,Vt.a.mark((function e(){return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return this.isDestroy=!0,e.prev=3,e.next=6,this.ready();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:this.clearAdTimer(),this.unbindEvent(),this.resetState(),this.callbacks={load:[],error:[],close:[]},this.reporter.destroy();case 15:case"end":return e.stop()}}),e,this,[[3,8]])})))}},{key:"isDestroyed",value:function(){return this.isDestroy}},{key:"canHideAd",value:function(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}},{key:"resetState",value:function(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}},{key:"emitRender",value:function(e){return this.rootComponent?(Object(Cy.updateRender)(this.rootComponent,e),this.rootComponent):Object(Cy.render)(Lm,e)}},{key:"render",value:function(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(qy.IDKEY.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}},{key:"initialMultiLists",value:function(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){var e=this.rootComponent.multiShowList;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((function(e){return+e})))}}},{key:"unmount",value:function(){this.rootComponent&&(Object(Cy.unmount)(this.rootComponent),this.rootElement=null,this.rootComponent=null)}},{key:"renderEmpty",value:function(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),Cy.Layout.nextLayout()}}]),e}(),sE=function(e){return ZO(e)},cE=function(e){Object(M.default)(n,e);var t=eE(n);function n(e){var r;return Object(N.default)(this,n),(r=t.call(this,aE,e)).isDestroy=!1,r}return Object(oe.default)(n,[{key:"destroy",value:function(){return rE(this,void 0,void 0,Vt.a.mark((function e(){return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroy){e.next=5;break}return e.next=3,sE(this).destroy();case 3:t=this,$O.delete(t),this.isDestroy=!0;case 5:case"end":return e.stop()}var t}),e,this)})))}},{key:"hide",value:function(){return rE(this,void 0,void 0,Vt.a.mark((function e(){var t;return Vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=sE(this)).canHideAd()){e.next=6;break}return e.next=4,t.hide(!0);case 4:e.next=7;break;case 6:throw{errMsg:"the advertisement don't support hide"};case 7:case"end":return e.stop()}}),e,this)})))}},{key:"isShow",value:function(){return sE(this).isShow}}]),n}(QO);!function(e,t){var n,r=JO(t);try{var i=function(){var t=n.value;e.prototype[t]=function(){var e;return(e=ZO(this))[t].apply(e,arguments)}};for(r.s();!(n=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}(cE,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]);function uE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var lE=n(76),dE=0,fE=0,pE=m.PLATFORM,hE=m.IS_IOS,gE=(m.IS_ANDROID,{}),vE=[],_E=!0,yE=7070083760581921;w.default.onReady((function(){var e=Object(tt.getInitScreenSize)();if(dE=e.screenWidth,fE=e.screenHeight,_E=Object(A.isGame)()){var t=n(114).default;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((gE={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),gE.touchStartPosY=Math.round(e.changedTouches[0].clientY),gE.touchEndPosX=0,gE.touchEndPosY=0,gE.touchStartTime=+new Date,gE.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(gE.touchEndPosX=Math.round(e.changedTouches[0].clientX),gE.touchEndPosY=Math.round(e.changedTouches[0].clientY),gE.touchInterval=+new Date-gE.touchStartTime,vE.length>=10&&vE.shift(),vE.push(gE))}))}}));var mE=5,bE=8,wE=function(e){var t=this;return kE.call(this).then((function(){var n=Object(Pu.getPrivateThis)(t),r=n.container.layoutBox,i=r.left,o=r.top,a=(r.width,r.height,{slotid:yE,ScreenHeight:fE,ScreenWidth:dE,PageY:o,PageX:i,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},OE=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Pu.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&DE.call(this,e,i),r},EE=function(e){var t=Object(Pu.getPrivateThis)(this),n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48,{slotid:yE}));var u=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(u=t.data.condition.widget_gray_bd_limit||10),e&&u>0&&(e.absoluteEndX-r<u||r+o-e.absoluteEndX<u||e.absoluteEndY-i<u||i+a-e.absoluteEndY<u)&&(s=!0,t.adProxy.reportAdMonitorData(47,{slotid:yE})),s},SE=function(e,t,n){for(var r=Object(Pu.getPrivateThis)(this),i=0;i<r.gridCount;i++)"item"===e?r["gridItem"+i].style[t]=n:"icon"===e?r["gridItemIcon"+i].style[t]=n:"name"===e&&(r["gridItemName"+i].style[t]=n)},TE=function(){var e=Object(Pu.getPrivateThis)(this);return Promise.resolve().then((function(){e.animateDoms.forEach((function(t){e[t].animate({scaleWidth:1,scaleHeight:1,duration:400}).catch((function(n){e[t].style.scaleWidth=1,e[t].style.scaleHeight=1}))}))}))},IE=function(e,t){var n=this;return function(r){var i=Object(Pu.getPrivateThis)(n);if(i.adProxy.setCurrentData(e),OE.call(n,r)&&!EE.call(n,r)){var o=i.adProxy.data,a=o.product_type,s=o.dest_type;hE&&46===a&&6===s?Promise.race([jE.call(n,r,e,t),Object(w_.timeout)(500)]).then((function(){FE.call(n)})).catch((function(){FE.call(n)})):(jE.call(n,r,e,t),FE.call(n))}}},AE=function(){var e=this,t=Object(Pu.getPrivateThis)(this),n=BE.call(this),r=(n.outer,n.inner,n.scale),i=t.datas.map((function(e,t){var n=e.weapp_info||{};return{name:Object(lg.truncate)(n.nick_name,10),url:n.head_img||""}})),o=function(e,t){var n={container:{position:"absolute",overflow:"hidden",borderRadius:8,hidden:!0},topContainer:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:24,paddingLeft:12,paddingRight:12,paddingTop:8},gridTitle1:{width:36,height:16,lineHeight:16,fontSize:12},gridTitle2:{width:24,height:16,lineHeight:16,fontSize:12},gridTitleSplitLine:{width:2,height:16,lineHeight:16,fontSize:10,textAlign:"center",paddingRight:8,paddingLeft:8},gridContentContainerMask:{position:"absolute",top:0,left:0,right:0,bottom:0},gridFeedbackIconWarp:{display:"flex",height:8,width:16,flexDirection:"row",justifyContent:"center",alignItems:"center"},gridFeedbackIcon:{width:10,height:6},gridFeedbackArea:{display:"flex",height:16,width:50,flexDirection:"row",justifyContent:"start",alignItems:"center"},adFeedbackList:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adAffectBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:92,height:1,backgroundColor:"#E0E0E0"}},r=[],i=[],o=[],a=function(t,a){r.push('<view id="grid-item'+t+'">\n        <image src="'+a.url+'" id="grid-item-icon'+t+'"></image>\n        <text id="grid-item-name'+t+'" value="'+a.name+'"></text>\n      </view>'),o.push("gridItem"+t),o.push("gridItemIcon"+t),o.push("gridItemName"+t),i.push("gridItem"+t),i.push("gridItemIcon"+t),i.push("gridItemName"+t),n["gridItem"+t]={display:"flex",flexDirection:"column",alignItems:"center",width:5===e?60:70},n["gridItemIcon"+t]={width:48,height:48,borderRadius:6},n["gridItemName"+t]={marginTop:5===e?8:6,fontSize:5===e?12:14,lineHeight:5===e?16:18,height:5===e?16:18,width:5===e?60:70,textAlign:"center",overflow:"hidden"}};if(r.push('<view id="container" click-state="false">'),r.push('<view id="grid-content-container-mask"></view>'),r.push('<view id="top-container" bubble-event="true">\n                      <text id="grid-title1" value="小游戏"></text>\n                      <text id="grid-title-split-line" value="|"></view>\n                      <view id="grid-feedback-area">\n                        <text id="grid-title2" value="广告" bubble-event="true"></text>\n                        <view id="grid-feedback-icon-warp" bubble-event="true">\n                          <image id="grid-feedback-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon.png"></image>\n                        </view>\n                      </view>\n                    </view>'),i.push("topContainer"),i.push("gridTitle1"),i.push("gridTitle2"),i.push("gridTitleSplitLine"),i.push("gridFeedbackIconWarp"),i.push("gridFeedbackArea"),i=[].concat(Object(Ue.default)(i),["adFeedbackMenu","adDislikeBtn","adFeedbackBtn","adAffectBtn","adFeedbackList","adDismatchBtn","adDuplicateBtn","adQualityBtn"]),5===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:12,paddingLeft:10.5,paddingRight:10.5,paddingBottom:12},i.push("gridContentContainer");for(var s=0;s<e;s++)a(s,t[s]);r.push("</view>")}else if(8===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",paddingTop:16,paddingLeft:14,paddingRight:14,paddingBottom:16};for(var c=0;c<2;c++){r.push('<view id="grid-count8-line'+c+'">'),n["gridCount8Line"+c]={display:"flex",flexDirection:"row",justifyContent:"space-between"};for(var u=0;u<4;u++){var l=4*c+u;a(l,t[l])}r.push("</view>")}n.gridCount8Line0.marginBottom=16,i.push("gridCount8Line0"),r.push("</view>")}return r.push('\n     <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  '),r.push("</view>"),{template:r.join(""),style:n,scaleDoms:i,animateDoms:o}}(t.gridCount,i),a=o.template,s=o.style,c=o.scaleDoms,u=o.animateDoms,l=lE(a).root;O_.call(this,l,s),"white"===this.adTheme?(t.gridContentContainerMask.style.backgroundColor="#ffffff",t.gridTitle1.style.color="#7F7F7F",t.gridTitle2.style.color="#7F7F7F",t.gridTitleSplitLine.style.color="#7F7F7F",SE.call(this,"name","color","#191919")):"black"===this.adTheme&&(t.gridContentContainerMask.style.backgroundColor="#1A1A1A",t.gridTitle1.style.color="#8c8c8c",t.gridTitle2.style.color="#8c8c8c",t.gridTitleSplitLine.style.color="#8c8c8c",t.gridFeedbackIcon.src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon_white.png",SE.call(this,"name","color","#FFFFFF")),t.scaleDoms=c,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.animateDoms=u,t.animateDoms.forEach((function(e){t[e].style.scaleWidth=.7,t[e].style.scaleHeight=.7})),t.container.on("click",(function(e){}));for(var d=0;d<t.gridCount;d++)t["gridItemIcon"+d]&&t["gridItemIcon"+d].on("click",IE.call(this,d,"icon")),t["gridItemName"+d]&&t["gridItemName"+d].on("click",IE.call(this,d,"name"));t.gridFeedbackArea.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||ME.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),t.adFeedbackBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adProxy.openFeedbackUrl(_E?1007:1006),t.adFeedbackList.style.hidden=!0,ME.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})))})),t.adDislikeBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,ME.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),t.adQualityBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ME.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),NE.call(e)))})),t.adDuplicateBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ME.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),NE.call(e)))})),t.adDismatchBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,ME.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),NE.call(e)))})),t.adAffectBtn.on("click",(function(n){OE.call(e,n,!1)&&(EE.call(e,n)||(t.adFeedbackList.style.hidden=!0,ME.call(e,{secondGradeId:3,secondGradeDesc:"影响操作"}),NE.call(e)))})),t.container||t.adProxy.reportAdMonitorData(92),t.adProxy.setSlotData({gridScale:r})},CE=function(){var e=this,t=Object(Pu.getPrivateThis)(this);try{var n=this.style,r=n.left,i=n.top,o=BE.call(this),a=(o.outer,o.inner);o.scale,t.data.type;AE.call(this),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=i,t.container.style.width=a.width,t.container.style.height=a.height,xE.call(this),Vs.webviewLayout.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){Object(w_.log)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){wE.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(91,e),Promise.reject({})}},kE=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Pu.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},xE=function(){var e=Object(Pu.getPrivateThis)(this),t=this.style.opacity;.5<=t&&t<=1?(this.style.opacity=t,e.gridContentContainerMask.style.opacity=t,e.gridFeedbackIcon.style.opacity=t):this.style.opacity=1},PE=function(){Object(w_.log)("开始 update UI");var e=Object(Pu.getPrivateThis)(this),t=this.style,n=t.left,r=t.top,i=BE.call(this),o=i.inner,a=i.scale,s=e.data;s.type,s.crt_size,s.product_type,s.use_style_data;return Object(w_.log)(this.style.width,this.style.height),Object(w_.log)("update UI",o),Object.assign(e.container.style,o,{left:n,top:r}),e.scaleDoms.forEach((function(t){e[t].style.scale=a})),xE.call(this),e.container.nextUpdate().then((function(){return Object(w_.log)("updateUI 完成"),Promise.resolve()}))},DE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(Pu.getPrivateThis)(this);if(!zE.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,i=r.width,o=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:yE,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},RE=function(e){var t=0,n=0,r=Object(Pu.getPrivateThis)(this).adProxy.slotData;try{if(5===r.gridCount)t=Math.round((61*e+40.5)*r.gridScale),n=Math.round(60*r.gridScale);else if(8===r.gridCount){var i=Math.floor(e/4),o=e%4;t=Math.round((77*o+44)*r.gridScale),n=Math.round((64+88*i)*r.gridScale)}}catch(e){}return{x:t,y:n}},jE=function(e,t,n){var r=Object(Pu.getPrivateThis)(this);if(!zE.call(this)&&r.container&&r.container.layoutBox){var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height,u=RE.call(this,t),l=r.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-o,clickRelativeTop:e.absoluteY-a,pressInterval:e.pressInterval,left:o,top:a,width:s,height:c,clickAdIndex:t,clickAdPos:n,weappExtraData:{box_center_x:u.x,box_center_y:u.y,box_aid_list:r.adProxy.datas.map((function(e){return e.aid})),click_pos:n}});return Object(w_.logReport)(l,"grid","点击"),GE.call(this,{stage:1002}),vE=vE.map((function(e){return"["+[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")+"]"})),r.adProxy.reportBannerLastClick({lastClickArr:"["+vE.join(",")+"]",expMs:r.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:o,top:a,width:s,height:c}),vE=[],l}},NE=function(){this.hide(),_private.emitter.emit("close")},ME=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!zE.call(this)){var d=Object(Pu.getPrivateThis)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:dE,adHeight:fE,adPosX:0,adPosY:0,expTime:d.showedExposureTime,slotId:yE,firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},LE=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Pu.getPrivateThis)(this);if(Object(w_.log)("检查曝光"),zE.call(this))return Object(w_.log)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return Object(w_.log)("还没经过布局, 下一个 loop 再做"),Object(w_.timeout)(0).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(a>fE-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){Object(w_.log)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"showed"});Object(w_.logReport)(l,"banner","原始"),TE.call(this)}if(a+c/2<=fE&&!r.isViewableExposureReported&&u){if(!n)return Object(w_.log)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),Object(w_.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(w_.log)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"viewable"});Object(w_.logReport)(d,"banner","可视")}return Promise.resolve()},BE=function(){var e,t,n=Object(Pu.getPrivateThis)(this);n.gridCount===mE?t=(e=Math.min(345,dE))/345*120:n.gridCount===bE&&(t=(e=Math.min(343,dE))/343*216);var r=this.style,i=r.width,o=r.height;i=i||e,o=o||t;var a=Object(w_.contain)({outer:{width:i,height:o},inner:{width:e,height:t},minScale:.8,maxScale:dE/e,side:"width"}),s=n.lastRealWidth!==a.inner.width||n.lastRealHeight!==a.inner.height;return this.style.realWidth=n.lastRealWidth=a.inner.width,this.style.realHeight=n.lastRealHeight=a.inner.height,s&&n.emitter.emit("resize",a.inner),a},FE=function(e){var t=Object(Pu.getPrivateThis)(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:yE,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.adProxy.land(e).then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1}))},UE=function(e){var t=this;if(!zE.call(this)){var n=Object(Pu.getPrivateThis)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.datas=e,n.data=n.adProxy.data,kE.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Vs.webviewLayout.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,n.adProxy.isViewable=!1,CE.call(t),kE.call(t)})).then((function(){return zE.call(t)?kE.call(t):n.isHideBYCover?(n.lastDisplayAction="show",kE.call(t)):(n.isShow=!0,GE.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return LE.call(t)})),WE.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},WE=function(){var e=this,t=Object(Pu.getPrivateThis)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return UE.call(e,!0)}),n)}},VE=function(){if(!zE.call(this)){var e=Object(Pu.getPrivateThis)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},GE=function(e){var t={adtype:4,stage:e.stage};Object(Pu.getPrivateThis)(this).adProxy.reportADFunnelModel(t)},HE=function(){var e=this;if(!zE.call(this)){var t=Object(Pu.getPrivateThis)(this);Object(w_.log)("destroy 调用"),VE.call(this),this._destroyed=!0,wE.call(this,{type:2}),kE.call(this).then((function(){return t.updateResult})).then((function(){Object(w_.log)("UI update 完成, 正式开始 destroy"),Object(ms._offShow)(t.checkAdState),Is(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Vs.webviewLayout.remove(t.container),Object(Pu.removePrivateThis)(e)}))}},zE=function(){return this._destroyed},YE="grid-ad has been destroyed",qE=function(e){Object(M.default)(n,e);var t=uE(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.adUnitId,o=r.style,a=void 0===o?{left:0,top:0,width:0,height:0,opacity:1}:o,s=r.adIntervals,c=void 0===s?0:s,u=r.adTheme,l=void 0===u?"white":u,d=r.gridCount,f=void 0===d?5:d;Object(N.default)(this,n),e=t.call(this),console.warn("格子广告位计划在2021年5月内下线，请尽快接入原生模板广告位替换，详情可查看MP流量主公告消息。");var p=Object(Pu.getPrivateThis)(Object(Cu.default)(e));if(p.emitter=new Ps.default,p.adProxy=new p_({adUnitId:i,adType:"grid"}),p.clickCount=0,p.landingCount=0,p.lastLandingTime=0,p.lastJsapiName="",p.lastJsapiStatus=0,p.lastJsapiCostTime=0,p.isLandingPage=!1,p.landingPageCostTime=0,p.hideTime=0,p.isShowedExposureReported=!1,p.isViewableExposureReported=!1,p.isReady=!1,p.isShow=!1,p.emitter.on("ready",(function(){return p.isReady=!0})),p.isHideBYCover=!1,p.adCover=new b_({adUnitId:i,adType:"grid"}),p.adIntervals="number"==typeof c?c:0,p.adTimer=null,p.showedExposureTime=0,p.clickFirstGradeTime=0,p.adCover.on(v_,(function(){zE.call(Object(Cu.default)(e))||kE.call(Object(Cu.default)(e)).then((function(){p.isShow&&!zE.call(Object(Cu.default)(e))&&(p.container.style.hidden=!0),p.isHideBYCover=!0,p.lastDisplayAction=""})).catch((function(e){}))})),p.adCover.on(__,(function(){zE.call(Object(Cu.default)(e))||kE.call(Object(Cu.default)(e)).then((function(){p.isShow&&!zE.call(Object(Cu.default)(e))&&(p.container.style.hidden=!1),p.isHideBYCover=!1,"show"==p.lastDisplayAction?e.show():"hide"==p.lastDisplayAction&&e.hide()})).catch((function(e){}))})),p.lastRealWidth=0,p.lastRealHeight=0,p.updateResult=Promise.resolve(),e.adUnitId=i,-1===[mE,bE].indexOf(f))return console.error("您设置的gridCount参数有误"),Object(L.default)(e);if(p.gridCount=f,-1===["white","black"].indexOf(l))return console.error("您设置的adTheme参数有误"),Object(L.default)(e);e.adTheme=l,e.style={},e._destroyed=!1;var h=null;Object.keys(a).forEach((function(t){Object.defineProperty(e.style,t,{configurable:!0,enumerable:!0,get:function(){return a[t]},set:function(n){zE.call(Object(Cu.default)(e))||n!==a[t]&&(a[t]=n,p.updateResult=new Promise((function(e){clearTimeout(h),h=setTimeout(e,0)})).then((function(){return kE.call(Object(Cu.default)(e))})).then((function(){return Promise.all([PE.call(Object(Cu.default)(e)),p.container.nextLayout().then((function(){return LE.call(Object(Cu.default)(e))}))])})))}})})),e.style.realWidth=e.style.width,e.style.realHeight=e.style.height,p.adProxy.setSlotData({gridCount:f,adTheme:l,gridOpacity:e.style.opacity});var g=p.adProxy.fetch();return g.catch((function(e){return p.emitter.emit("_error",e)})),p.adFetchResult=g,p.adFetchResult.then((function(t){(p.emitter.emitter._events?Object.keys(p.emitter.emitter._events):[]).includes("_error")||"devtools"!==pE?(p.datas=t,p.data=p.adProxy.data,CE.call(Object(Cu.default)(e))):console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。")})),p.checkAdState=function(){p.adFetchResult.then((function(){if(p.isLandingPage){p.lastJsapiStatus=0,p.isLandingPage=!1;var e=+new Date;p.landingPageCostTime=e-p.hideTime,p.adProxy.reportLandingTime({slotId:yE,costType:p.adProxy.data&&p.adProxy.data.is_cpm?1:2,openTime:p.hideTime,closeTime:e,stayTime:p.landingPageCostTime,jsapiName:p.lastJsapiName,clickTime:p.lastLandingTime,clkCnt:p.landingCount,retCode:p.lastJsapiStatus,costTime:p.lastJsapiCostTime,actTypeInt:1})}})).then((function(){p.isShow&&!p.adTimer&&WE.call(Object(Cu.default)(e))})).catch((function(){}))},Object(ms._onShow)(p.checkAdState),p.onHide=function(t){VE.call(Object(Cu.default)(e)),p.hideTime=+new Date},Ts(p.onHide),e}return Object(oe.default)(n,[{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(zE.call(this))return Promise.reject({errMsg:YE});var i=Object(Pu.getPrivateThis)(this);return i.isHideBYCover?(i.lastDisplayAction="show",kE.call(this)):(i.isShow=!0,GE.call(this,{stage:1001}),n?i.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):i.adProxy.resetAnalyseBranchInfo(),kE.call(this).then((function(){i.container.style.hidden=!1,i.container.nextLayout((function(){return LE.call(e)})),WE.call(e)})))}},{key:"hide",value:function(){var e=this;if(!zE.call(this)){var t=Object(Pu.getPrivateThis)(this);return t.isHideBYCover?(t.lastDisplayAction="hide",kE.call(this)):(t.isShow=!1,t.adProxy.isViewable=!1,kE.call(this).then((function(){t.container.style.hidden=!0,VE.call(e)})))}}},{key:"destory",value:function(){HE.call(this)}},{key:"destroy",value:function(){HE.call(this)}},{key:"onResize",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("resize",e)}},{key:"onError",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){zE.call(this)||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}}]),n}(Pu.Component),KE=n(95),JE=n(131),XE=n(96),$E={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},ZE=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),QE={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'};function eS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function tS(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nS(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function nS(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rS,iS=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},oS=function(){return w_.logReport.apply(void 0,arguments)},aS=Qh()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n').root,sS=0,cS=0,uS=0,lS=0,dS=0,fS=0,pS=0,hS=!1,gS=!1,vS=!1,_S="",yS="",mS="",bS="",wS=dg.WX_AD_PATH+"/adinfos.txt",OS=m.IS_ANDROID?200:400,ES=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Pu.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),i=r?0:1;return t&&SS.call(this,e,i),r},SS=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Object(Pu.getPrivateThis)(this);if(r.container&&r.container.layoutBox){var i=r.container.layoutBox,o=i.width,a=i.height,s=0;[0,2,3].includes(n)&&(r.clickCount+=1,s=r.clickCount);var c={slotid:dg.POS_ID_MAP[r.adType],costtype:(null===(t=r.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:Date.now(),click_cnt:s,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(a,10)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(c)}},TS=function(){var e=Object(Pu.getPrivateThis)(this),t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},IS=function(e,t){var n,r=Object(Pu.getPrivateThis)(this),i=r.container.style,o=i.width,a=i.height,s={click_button:e,cost_type:(null===(n=r.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,slotid:dg.POS_ID_MAP[r.adType],is_game:hS?1:0,pageentertime:+new Date(r.adProxy.getProgramStartTime()),ad_width:parseInt(o,10)||0,ad_height:parseInt(a,10)||0,clientexptime:r.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:sS,screen_height:cS};return r.adProxy.reportAntifraud(s)},AS=function(e){var t=Object(Pu.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));oS(n,"splashAd","关注")},CS=function(e){var t,n=Object(Pu.getPrivateThis)(this),r=+new Date,i={slotid:dg.POS_ID_MAP[n.adType],is_game:hS?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,close_type:e,exposure_duration:r-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:r};return n.adProxy.reportCloseAction(i)},kS=function(e){var t,n=Object(Pu.getPrivateThis)(this),r={slotid:dg.POS_ID_MAP[n.adType],is_game:hS?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(r)},xS=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,i=void 0===r?"广告角标":r,o=e.secondGradeId,a=void 0===o?0:o,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=Object(Pu.getPrivateThis)(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:sS,adHeight:cS,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:dg.POS_ID_MAP[d.adType],firstGradeId:n,firstGradeDesc:i,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},PS=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Pu.getPrivateThis)(this);if(r.isShowed){if(!r.data||!r.container.layoutBox)return Object(w_.timeout)(100).then((function(){return e.call(t,n)}));var i=r.container.layoutBox,o=i.left,a=i.top,s=i.width,c=i.height;if(!r.isShowedExposureReported){r.isShowedExposureReported=!0,r.startExposureTime=+new Date,r.adProxy.setTimePoint("p6");var u=w.default.onReady((function(){r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"showed",source:r.source});var e="launch"===r.source?dg.SPLASHAD_IDKEY.firstShowSuccess:dg.SPLASHAD_IDKEY.secondShowSuccess;r.adProxy.reportAdMonitorData(e)}));oS(u,"splashAd","原始")}if(!r.isViewableExposureReported){if(!n)return Object(w_.timeout)(1e3).then((function(){return e.call(t,!0)}));r.adProxy.setTimePoint("p7"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var l=r.adProxy.reportExposure({left:o,top:a,width:s,height:c,exposureType:"viewable",source:r.source});oS(l,"splashAd","可视")}}},DS=function(e){var t=Object(Pu.getPrivateThis)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,i=n.top,o=n.width,a=n.height,s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-i,pressInterval:e.pressInterval,left:r,top:i,width:o,height:a,source:t.source});return oS(s,"splashAd","点击"),s}},RS=function(e,t){var n=this,r=Object(Pu.getPrivateThis)(this),i=r.data,o=i.appInfo,a=o.apkName,s=o.channelId,c=o.urlScheme,u=i.product_type,l=i.dest_type;if(12===u&&m.IS_ANDROID&&4===r.androidAppState&&c&&c.trim().length>0)DS.call(this,e),IS.call(this,t,e),r.adProxy.launchApplication(c).catch((function(){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(12===u&&m.IS_ANDROID&&r.isYYBInstalled){DS.call(this,e),IS.call(this,t,e);var d=r.adProxy.data,f=d.aid,p=d.traceid,h=d.apurl,g=["ANDROIDWX.YYB.WX.ADVERTISE",p,f,a.replace(/\./g,"_"),"0",15,h.indexOf("ad.wx.com")>-1?1:0].join("."),v="tmast://download?oplist=1,2&pname="+a+"&channelid="+s+"&via="+g;r.adProxy.launchApplication(v).catch((function(){jS.call(n)})),r.lastJsapiName="launchApplication",r.isLandingPage=!0}else m.IS_IOS&&46===u&&6===l?Promise.race([DS.call(this,e),Object(w_.timeout)(500)]).then((function(){IS.call(n,t,e),jS.call(n)})).catch((function(){IS.call(n,t,e),jS.call(n)})):(DS.call(this,e),IS.call(this,t,e),jS.call(this))},jS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Pu.getPrivateThis)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n,r=/ok/.test(e.errMsg);r&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"===t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:dg.POS_ID_MAP[t.adType],costType:(null===(n=t.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"})})).catch((function(){t.lastJsapiStatus=1})),AS.call(this,n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.landingPageFail,{source:t.source,msg:e})})),n},NS=function(e){var t,n=Object(Pu.getPrivateThis)(this),r=tS(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i]&&clearTimeout(n[i])}}catch(e){r.e(e)}finally{r.f()}},MS=function(){var e,t=Object(Pu.getPrivateThis)(this);t.eventsMap={},(null===(e=t.appInfo)||void 0===e?void 0:e.style)&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",NS.call(this,["countTimer"]),w.default.onReady((function(){var e,n,r;t.adProxy.reportTimePoints({slotid:dg.POS_ID_MAP[t.adType],costtype:(null===(e=t.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(r=t.showInfo)||void 0===r?void 0:r.scene,extInfo:{adInfos:t.adInfos}})}))},LS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t&&CS.call(this,t),Object(ug.closeSplashAd)(e)},BS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Pu.getPrivateThis)(this);return t.adProxy.fetch(!1,e).catch((function(){}))},FS=function(){var e=Object(Pu.getPrivateThis)(this);if((m.IS_ANDROID||m.IS_IOS)&&!vS)try{e.adFetchResult=BS.call(this),e.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.OTHER_ADS_EMIT_FETCH)}catch(e){}},US=function(){var e,t=Object(Pu.getPrivateThis)(this).data||{},n={};if(null===(e=t.crtInfo)||void 0===e?void 0:e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){var r=t.crtInfo?t.crtInfo[0]:{};n=(null==r?void 0:r.card_info)?r.card_info:{}}return n},WS=function e(){var t=this,n=Object(Pu.getPrivateThis)(this),r=5e3-(+new Date-n.startExposureTime-n.hideDuration);if(r>=0){var i=Math.ceil(r/1e3).toString();n.countDown&&(n.countDown.value=i),n.tplComponent&&n.tplComponent.emitAdCustomEvent(KE.CUSTOM_EVENT.CHANGECOUNTDOWN,{value:i}),n.countTimer&&clearTimeout(n.countTimer),n.countTimer=setTimeout((function(){e.call(t)}),1e3)}else"launch"===n.source&&n.isShowedExposureReported&&(n.isDynamic&&n.tplComponent.hide(),LS.call(this,{source:n.source,animated:!0},12))},VS=function(){var e,t=Object(Pu.getPrivateThis)(this);if("launch"===t.source)t.topBar&&lS&&(t.topBar.style.top=lS,t.adFeedbackMenu.style.top=lS+34,t.adFeedbackList.style.top=lS+34),t.closeContainer&&(t.closeContainer.style.marginTop=dS-68),t.appInfo&&(t.appInfo.style.height=fS,t.appInfo.style.width=sS,t.isDarkMode&&(t.appInfo.style.backgroundColor="#191919",t.container.style.backgroundColor="#191919")),t.appIcon&&(t.appIcon.src=t.showInfo.appIcon,t.appIcon.style.marginTop=hS?16:28),t.appName&&(t.appName.value=t.showInfo.appName,t.appName.style.width=sS,t.appName.style.color=t.isDarkMode?"#ffffff":"#000000"),t.tipsContainer&&(t.tipsContainer.style.height=32,t.tipsContainer.style.width=sS,t.tipsLineOne.style.width=sS,t.tipsLineOne.style.color=t.isDarkMode?"#ffffff":"#000000",t.tipsLineTwo.style.color=t.isDarkMode?"#ffffff":"#000000"),t.adCloseTips&&(t.adCloseTips.style.height=cS-fS,t.adCloseTips.style.width=sS);else if("menu"===t.source){if(!t.data)return;var n=t.data,r=US.call(this),i=Object(tt.getSystemInfoSync)();t.adIcon.src=r.thumb,t.adName.value=r.title,(null===(e=n.button_action)||void 0===e?void 0:e.button_text)&&(t.button.value=n.button_action.button_text),i.screenTop&&i.screenTop>0?uS=i.screenTop:uS&&0!==uS||(uS=88*cS/812),t.navigator.style.height=uS,t.navigator.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.width=sS,t.card.style.height=fS-uS,t.adName.style.color=t.isDarkMode?"#ffffff":"#000000",t.adWording.style.color=t.isDarkMode?"#ffffff":"#000000",t.mediaBottom&&(t.mediaBottom.style.marginTop=dS-12,t.mediaBottom.style.width=sS,t.mediaBottom.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff")}if("landscape"===t.crtOrientation){var o=t.data||{},a=US.call(this);if(a&&t.adHeadInfo&&(t.adHeadIcon.src=a.thumb||"",t.adversName.value=a.title||"",t.adHeadInfo.style.width=sS/375*311,t.adversName.style.width=sS/375*311),o.hint_txt&&t.adTitle&&o.crt_size!==dg.CRT_SIZE.CRT_SIZE_BIG_PIC?(t.adTitle.value=o.hint_txt,t.adTitle.style.width=sS/375*311):a.description&&t.adTitle?(t.adTitle.value=a.description,t.adTitle.style.width=sS/375*311):t.adTitle&&o.product_type&&dg.BIG_PIC_TITLE_MAP[o.product_type]&&(t.adTitle.value="今日"+dg.BIG_PIC_TITLE_MAP[o.product_type]+"推荐",t.adTitle.style.width=sS/375*311),o.button_action&&t.adButtonContainer){t.adButton.value=o.button_action.button_text,t.adButtonContainer.style.width=sS,t.closeContainer&&(t.closeContainer.style.marginTop=dS-132);var s={text:o.button_action.button_text,fontSize:17},c=Object(lg.measureText)(s)||80;t.adButton.style.width=c+8,t.adButton.style.width+12>100&&(t.adButton.style.width=t.adButton.style.width+12)}}},GS=function(e){var t=Object(Pu.getPrivateThis)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||KS.call(this),!t.dynamicElems.root){var n=t.data.adDynamicList,r=zS.call(this,{tpl:n,source:e}),i=r.getRootElement();t.dynamicElems.root=i,t.container.add(t.dynamicElems.root),r.show(),t.tplComponent=r,t.tplComponent.emitComponentEvent(JE.ROOT_EVENT.SPLASHADFIRSTRENDER)}},HS=function(){var e="",t=Object(Pu.getPrivateThis)(this).adProxy.data,n=US.call(this);return t.hint_txt&&t.crt_size!==dg.CRT_SIZE.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&dg.BIG_PIC_TITLE_MAP[t.product_type]&&(e="今日"+dg.BIG_PIC_TITLE_MAP[t.product_type]+"推荐"),e},zS=function(e){var t=e.tpl,n=e.source,r=Object(Pu.getPrivateThis)(this),i=r.adProxy.data,o=HS.call(this),a=US.call(this);return Object(Cy.render)(im,{manager:null,reporter:null,emitter:r.dynamicEmitter,adProxy:r.adProxy,template:t,systemInfo:{screenWidth:sS,screenHeight:cS},adData:i,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:lS||40,source:n,screenTop:uS||88*cS/812,isDarkMode:r.isDarkMode,adTitle:o||"",cardInfo:a,materialFile:_S,materialBgFile:mS,materialBlurFile:bS,private:r,appIcon:r.showInfo.appIcon,appName:r.showInfo.appName}},!1)},YS=function(e){var t=Object(Pu.getPrivateThis)(this);ES.call(this,e,!1)&&(TS.call(this)||"launch"===t.source&&LS.call(this,{source:t.source,animated:!0},11))},qS=function(e){var t=this,n=Object(Pu.getPrivateThis)(this);switch(e.action){case KE.CUSTOM_EVENT.LANDAD:var r=e.value,i=r.event,o=r.index;if(!ES.call(this,i,13===o))return;13===o&&RS.call(this,i,o),LS.call(this,{source:n.source,animated:!1},o),16===o&&(n.isLandingPage=!0,Object(w_.timeout)(OS).then((function(){return RS.call(t,i,o)})));break;case KE.CUSTOM_EVENT.CHECKEXPOSURE:n.dynamicRendered=!0,n.isShowedExposureReported||PS.call(this),n.countTimer||WS.call(this);break;case KE.CUSTOM_EVENT.FEEDBACKREPORT:xS.call(this,e.value);break;case KE.CUSTOM_EVENT.FEEDBACKBTNTAP:n.data&&n.adProxy.openFeedbackUrl(1014);break;case KE.CUSTOM_EVENT.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case KE.CUSTOM_EVENT.SPLASHSKIPAD:var a=e.value.event;YS.call(this,a);break;case KE.CUSTOM_EVENT.REPORTADMONITORDATA:var s=null==e?void 0:e.value,c=s.id,u=s.key,l=s.extInfo,d=c?{idKeyGroup:c,idKey:u}:u;n.adProxy.reportAdMonitorData(d,l)}},KS=function(){var e=this,t=Object(Pu.getPrivateThis)(this);t.dynamicEmitter=new by,t.dynamicEmitter.on("adCustomEvent",(function(t){qS.call(e,t)}))},JS=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object(Pu.getPrivateThis)(this);e.forEach((function(e){var n=Qh()(QE[e.name]).root,i=Pu.create.call(t,n);r[e.parent].add(i)})),r.componentsRenderred=!0,VS.call(this),n&&XS.call(this)},XS=function(){var e=this,t=Object(Pu.getPrivateThis)(this);t.adFeedback&&!t.eventsMap.adFeedback&&t.adFeedback.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||xS.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn&&!t.eventsMap.adFeedbackBtn&&t.adFeedbackBtn.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,xS.call(e,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===t.source&&LS.call(e,{source:t.source,animated:!0},17),t.data&&t.adProxy.openFeedbackUrl(1014))})),t.adDislikeBtn&&!t.eventsMap.adDislikeBtn&&t.adDislikeBtn.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,xS.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),t.adQualityBtn&&!t.eventsMap.adQualityBtn&&t.adQualityBtn.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,xS.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===t.source&&LS.call(e,{source:t.source,animated:!0},17))})),t.adDuplicateBtn&&!t.eventsMap.adDuplicateBtn&&t.adDuplicateBtn.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,xS.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===t.source&&LS.call(e,{source:t.source,animated:!0},17))})),t.adDismatchBtn&&!t.eventsMap.adDismatchBtn&&t.adDismatchBtn.on("click",(function(n){ES.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,xS.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===t.source&&LS.call(e,{source:t.source,animated:!0},17))})),t.closeContainer&&!t.eventsMap.closeContainer&&t.closeContainer.on("click",(function(n){ES.call(e,n,!1)&&(TS.call(e)||"launch"===t.source&&LS.call(e,{source:t.source,animated:!0},11))})),t.adMedia&&!t.eventsMap.adMedia&&t.adMedia.on("click",(function(t){$S.call(e,t,"adMedia")})),t.adButtonContainer&&!t.eventsMap.adButtonContainer&&t.adButtonContainer.on("click",(function(t){$S.call(e,t,"button")})),t.buttonContainer&&!t.eventsMap.buttonContainer&&t.buttonContainer.on("click",(function(n){if(ES.call(e,n,!1))return t.data?(LS.call(e,{source:t.source,animated:!1},16),t.isLandingPage=!0,Object(w_.timeout)(OS).then((function(){return RS.call(e,n,16)}))):void 0}));for(var n=0,r=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];n<r.length;n++){var i=r[n];t[i]&&!t.eventsMap[i]&&(t.eventsMap[i]=!0)}},$S=function(e){var t,n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=Object(Pu.getPrivateThis)(this),a=(null===(n=null===(t=null==o?void 0:o.data)||void 0===t?void 0:t.condition)||void 0===n?void 0:n.widget_gray_splash_click_area_switch)||0;if((!a||"button"===i)&&ES.call(this,e,!1))return o.data&&"launch"===o.source?!hS||m.IS_ANDROID?(RS.call(this,e,13),Object(w_.timeout)(200).then((function(){return LS.call(r,{source:o.source,animated:!1},13)}))):(LS.call(this,{source:o.source,animated:!1},13),RS.call(this,e,13)):void 0},ZS=function(){var e=Object(Pu.getPrivateThis)(this);if(e.data){var t=US.call(this);t&&"launch"===e.source&&Object(ug.showSplashAdMenu)({showMenu:!0,title:t.title,icon:t.thumb,success:function(){e.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.showSplashAdMenuSuccess)},fail:function(t){e.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.showSplashAdMenuFail,{msg:t})}})}},QS=function(){var e,t=Object(Pu.getPrivateThis)(this);try{var n=(null===(e=t.data)||void 0===e?void 0:e.aid)||"";t.adProxy.data&&t.adInfos&&t.adInfos.waidMap&&(t.adProxy.data.waid=t.adInfos.waidMap[n])}catch(e){}},eT=function(){var e=Object(Pu.getPrivateThis)(this);if(!e.data||""===e.data||"object"!==Object(R.default)(e.data)){var t=ug.fs.readFileSync(yS,"utf-8");try{var n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){w.default.onReady((function(){e.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.readFileDataFail,{source:e.source,msg:t})}))}}},tT=function(){var e=Object(Pu.getPrivateThis)(this);if("launch"===e.source){JS.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0}},nT=function(){var e=Object(Pu.getPrivateThis)(this);if("launch"===e.source){var t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(m.IS_ANDROID||lS>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),JS.call(this,t,!0),Object(ug.splashAdAllViewLayoutStateChange)({state:0}),Vs.nativeviewLayout.layout().then((function(){Object(ug.splashAdAllViewLayoutStateChange)({state:1}),Vs.nativeviewLayout.auto=!0})).catch((function(t){w.default.onReady((function(){e.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.secondInsertFail,{source:e.source,msg:t})}))}))}},rT=function(){var e=Object(Pu.getPrivateThis)(this);fS=Math.max(160,160*cS/812),dS=cS-fS,e.adMedia.style.width=sS,e.adMedia.style.height=dS;var t=9*cS/16;e.adMaterial.style.width=t,e.adMaterial.style.height=cS,e.adMaterial.style.left=t>sS?(sS-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=_S:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=sS,e.adMaterial.style.height=dS,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=sS,e.adMaterialContainer.style.height=dS,e.adMaterial.src=mS,e.adMaterialBg.style.width=.45*cS*16/9,e.adMaterialBg.style.height=.45*cS,e.adMaterialBg.style.left=-(.45*cS*16/9-sS)/2,e.adMaterialLandscape.style.width=sS/375*311,e.adMaterialLandscape.style.height=sS/375*175,e.adMaterialBg.src=_S,e.adMaterialLandscape.src=_S,e.adCardInfo.style.width=sS/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=cS/1920},iT=function(e){var t,n=this,r=Object(Pu.getPrivateThis)(this);if(r.showInfo=e,r.source=e.source,r.isDarkMode=e.isDarkMode||!1,e.isGame&&(hS=e.isGame),sS=e.screenWidth,cS=e.screenHeight,null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.adDynamicList){var i=Qh()('\n  <view id="container">\n  </view>\n').root;O_.call(this,i,$E),r.isDynamic=!0,GS.call(this,e.source)}else O_.call(this,aS,ZE),rT.call(this);if(r.container.style.width=sS,r.container.style.height=cS,r.container.style.backgroundColor=r.isDarkMode?"#191919":"#ffffff",Vs.nativeviewLayout.add(r.container),!r.isDynamic)try{ug.fs.access({path:bS,success:function(){r.adMaterialBg.src=bS}})}catch(e){}var o=[];"menu"!==r.source||r.isDynamic||(eT.call(this),o=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===r.crtOrientation&&(o=o.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),r.navigator.style.hidden=!1,JS.call(this,o,!0)),Object(ug.splashAdFirstStepViewLayoutStateChange)({state:0}),Vs.nativeviewLayout.layout().then((function(){if(r.firstInserted=!0,r.isShowed=!0,Object(ug.splashAdFirstStepViewLayoutStateChange)({state:1}),"launch"!==r.source||r.isDynamic)Vs.nativeviewLayout.auto=!0,r.container.requestLayout();else try{nT.call(n)}catch(e){w.default.onReady((function(){r.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.secondRenderFail,{source:r.source,msg:e})}))}})).catch((function(e){w.default.onReady((function(){r.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.firstInsertFail,{source:r.source,msg:e})}))}))},oT=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=Object(Pu.getPrivateThis)(this),o=dg.SPLASHAD_ERROR_CODE[r],a=dg.SPLASHAD_IDKEY[r];return w.default.onReady((function(){var n;i.adProxy.reportAdMonitorData(a,t),i.adProxy.reportTimePoints({slotid:dg.POS_ID_MAP[i.adType],costtype:(null===(n=i.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,splash_instance_id:e.instanceId,errCode:o,scene:e.scene,extInfo:t})})),Object(ug.showSplashAd)({adCallTime:Date.now(),errCode:o,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})},aT=function(e){Object(M.default)(n,e);var t=eS(n);function n(){var e;Object(N.default)(this,n),e=t.call(this);var r=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return r.canShowed=!1,r.today=Object(lg.getTodayFormat)(),r.countTimer=null,r.componentsRenderred=!1,r.isShowed=!1,r.firstInserted=!1,r.adFeedbackInserted=!1,r.isDynamic=!1,r.isShowedExposureReported=!1,r.startExposureTime=0,r.isViewableExposureReported=!1,r.clickCount=0,r.lastLandingTime=0,r.lastJsapiName="",r.lastJsapiStatus=0,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0,r.hideTime=0,r.hideDuration=0,r.isClosing=!1,r.isShowCloseTip=!1,r.clickFirstGradeTime=0,r.eventsMap={},r.source="",r.crtOrientation="portrait",r.adType="splashAd",r.adProxy=new p_({adUnitId:"",adType:r.adType}),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null,Object(XE.onSplashAdButtonClicked)((function(t){"close"===t.buttonType&&"launch"===t.source?(CS.call(Object(Cu.default)(e),10),NS.call(Object(Cu.default)(e),["countTimer"])):"close"===t.buttonType&&"menu"===t.source?CS.call(Object(Cu.default)(e),14):"back"!==t.buttonType||"menu"!==t.source||r.isLandingPage?"menu"===t.buttonType&&kS.call(Object(Cu.default)(e),1):CS.call(Object(Cu.default)(e),15)})),Object(XE.onSplashAdWillLayout)((function(t){if(t.menuViewFrame&&("launch"===t.source?(lS=t.menuViewFrame.y||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&lS&&r.tplComponent.emitComponentEvent(JE.ROOT_EVENT.SPLASHADMENUVIEW,{countdownTop:lS})):"menu"===t.source&&(uS=t.menuViewFrame.height||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&uS&&r.tplComponent.emitComponentEvent(JE.ROOT_EVENT.SPLASHADMENUVIEW,{navHeight:uS,menuHeight:172-uS})),m.IS_IOS&&r.firstInserted&&!r.adFeedbackInserted))try{tT.call(Object(Cu.default)(e))}catch(e){w.default.onReady((function(){r.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.iosThirdInsertFail,{source:r.source,msg:e})}))}})),Object(XE.onSplashAdShow)((function(){r.adProxy.setTimePoint("p5"),"launch"!==r.source||r.isDynamic||(eT.call(Object(Cu.default)(e)),VS.call(Object(Cu.default)(e))),ZS.call(Object(Cu.default)(e)),QS.call(Object(Cu.default)(e)),r.hideTime>0&&(r.hideDuration=+new Date-r.hideTime),PS.call(Object(Cu.default)(e)),"launch"===r.source&&r.isShowedExposureReported&&WS.call(Object(Cu.default)(e)),r.isLandingPage&&(r.isLandingPage=!1)})),Object(XE.onSplashAdHide)((function(){r.hideTime=+new Date,NS.call(Object(Cu.default)(e),["countTimer"])})),Object(XE.onSplashAdClose)((function(){gS||(gS=!0),m.IS_IOS&&r.startExposureTime>0&&+new Date-r.startExposureTime>1e3&&PS.call(Object(Cu.default)(e),!0),r.container&&(r.isDynamic&&(r.tplComponent&&Object(Cy.unmount)(r.tplComponent),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null),Vs.nativeviewLayout.remove(r.container)),MS.call(Object(Cu.default)(e))})),e}return Object(oe.default)(n,[{key:"otherAdsEmitFetch",value:function(){FS.call(this)}},{key:"show",value:function(e){var t,n=this;vS=!0;var r=Object(Pu.getPrivateThis)(this);r.showInfo=e,r.adProxy.scene=e.scene,r.adProxy.setTimePoint("p14");var i=r.adProxy.getTimePoint("p14");if(w.default.onReady((function(){setTimeout((function(){var t="launch"===e.source?dg.SPLASHAD_IDKEY.launchAcceptShouldShow:dg.SPLASHAD_IDKEY.menuAcceptShouldShow;r.adProxy.reportAdMonitorData(t)}),1500)})),"launch"===e.source){w.default.onReady((function(){setTimeout((function(){r.adFetchResult=BS.call(n)}),1500)}));var o={};try{var a=ug.fs.readFileSync(wS,"utf-8");o.adInfos=a||{},r.adInfos=JSON.parse(a)}catch(e){r.adInfos={},o.errMsg=r.adProxy.processStackMsg(e),o.fileName=wS}if(0===Object.keys(r.adInfos).length)return pS=dg.SPLASHAD_ERROR_CODE.NO_ADINFOS,oT.call(this,e,o,{startInit:i},"NO_ADINFOS");this.showAdByCheckAdsOnline(e,i);var s=r.adInfos.ads||[];r.adDatas={};var c,u=tS(s);try{for(u.s();!(c=u.n()).done;){var l=c.value;try{var d=dg.WX_AD_PATH+"/"+l.aid+".txt",f=ug.fs.readFileSync(d,"utf-8"),p=JSON.parse(f);r.adDatas[l.aid]=p}catch(e){}}}catch(e){u.e(e)}finally{u.f()}try{var h=(null===(t=r.adInfos)||void 0===t?void 0:t.deviceInfo)||{};r.adProxy.setDeviceInfo(h)}catch(e){}}else"menu"===e.source&&this.showDetail(e)}},{key:"showAdByRealtimeFetch",value:function(e){var t=this,n=Object(Pu.getPrivateThis)(this),r={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:fl.SDKVersion,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:m.IS_IOS,isAndroid:m.IS_ANDROID,adNetworkType:e.networkType};return BS.call(this,r).then((function(r){n.data=r,n.adProxy.data=r,t.showDetail(e,{aid:r.aid},!0)}))}},{key:"showAdByCheckAdsOnline",value:function(e,t){var n=this,r=Object(Pu.getPrivateThis)(this),i=r.adInfos.requestInQueue&&"true"===r.adInfos.requestInQueue,o=JSON.stringify({weapp_enter_scene:e.scene||0}),a={slot_id:dg.POS_ID_MAP[r.adType],publisher_appid:e.appId,network_type:dg.NET_TYPE_MAP[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:fl.SDKVersion,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:r.adInfos.ads||[],ext_check_ads_weapp:o};r.adProxy.setTimePoint("p15"),w.default.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.START_CHECK_AD_STATUS)}),1500)})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(ug.adOperateWXData)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t})}(a,i).then((function(t){w.default.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.CHECK_AD_STATUS_SUCCESS)}),1500)})),r.adProxy.setTimePoint("p16");var i=JSON.parse(t.rawData);n.showDetail(e,i)})).catch((function(i){return r.adProxy.setTimePoint("p16"),oT.call(n,e,{msg:i},{startInit:t},"CHECK_AD_STATUS_ERROR")}))}},{key:"showDetail",value:function(e){var t,n,r,i,o,a,s,c,u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{aid:0},d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return iS(this,void 0,void 0,Vt.a.mark((function f(){var p,h,g,v,_,y,m,b,O,E,S,T,I=this;return Vt.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(Vs.nativeviewLayout.style.width=e.screenWidth,Vs.nativeviewLayout.style.height=e.screenHeight,Vs.nativeviewLayout.auto=!1,p=Object(Pu.getPrivateThis)(this),h={startInit:p.adProxy.getTimePoint("p14"),startFetchTime:p.adProxy.getTimePoint("p15"),fetchCallbackTime:p.adProxy.getTimePoint("p16")},g=[],v=l.aid,"launch"!==e.source||!d){f.next=19;break}_=(null===(n=null===(t=null==p?void 0:p.data)||void 0===t?void 0:t.rerankingExtInfo)||void 0===n?void 0:n.material_hash)||"",_S=dg.WX_AD_PATH+"/"+v+"_"+_+".png",mS=dg.WX_AD_PATH+"/"+v+"_"+_+"_pure_color.png",bS=dg.WX_AD_PATH+"/"+v+"_"+_+"_blur.png",g.push(_S),p.crtOrientation="portrait",y=(null===(r=null==p?void 0:p.data)||void 0===r?void 0:r.crtInfo[0])||{},Object.keys(y).length>0&&(m=y.width,b=y.height,p.crtOrientation=m>b?"landscape":"portrait"),"landscape"===p.crtOrientation&&g.push(mS),f.next=37;break;case 19:if("launch"!==e.source||d){f.next=36;break}if(v&&"0"!==v){f.next=22;break}return f.abrupt("return",oT.call(this,e,{adInfos:p.adInfos,checkAdStatus:l},h,"NO_AID"));case 22:if(v&&(null===(i=null==p?void 0:p.adDatas)||void 0===i?void 0:i[v])&&(p.data=p.adDatas[v],p.adProxy.data=p.adDatas[v]),p.crtOrientation=v?null===(a=null===(o=null==p?void 0:p.adInfos)||void 0===o?void 0:o.crtSizeMap)||void 0===a?void 0:a[v]:"",p.crtOrientation){f.next=26;break}return f.abrupt("return",oT.call(this,e,{adInfos:p.adInfos,checkAdStatus:l},h,"CRT_ORIENTATION_NOT_SURE"));case 26:O=v?null===(s=null==p?void 0:p.adInfos)||void 0===s?void 0:s.materialHashMap[v]:"",yS=dg.WX_AD_PATH+"/"+v+".txt",_S=dg.WX_AD_PATH+"/"+v+"_"+O+".png",mS=dg.WX_AD_PATH+"/"+v+"_"+O+"_pure_color.png",bS=dg.WX_AD_PATH+"/"+v+"_"+O+"_blur.png",g.push(yS),g.push(_S),"landscape"===p.crtOrientation&&g.push(mS),f.next=37;break;case 36:"menu"===e.source&&(E={},(null===(c=p.data)||void 0===c?void 0:c.crtInfo)&&p.data.crtInfo.length>0?(S=Object(Co.default)(p.data.crtInfo,1),E=S[0]):(null===(u=p.data)||void 0===u?void 0:u.crtInfo)&&(E=p.data.crtInfo),Object.keys(E).length>0&&!p.crtOrientation&&(p.crtOrientation=p.data.crtInfo.width>p.data.crtInfo.height?"landscape":"portrait"),kS.call(this,2));case 37:f.prev=37,"launch"===e.source&&g.forEach((function(e){ug.fs.accessSync(e)})),f.next=51;break;case 41:if(f.prev=41,f.t0=f.catch(37),pS=dg.SPLASHAD_ERROR_CODE.MATERIAL_NOT_READY,T=p.adProxy.processStackMsg(f.t0),!p.data){f.next=50;break}return f.next=48,p.adProxy.handleBulkSaveMaterials(p.data);case 48:f.next=51;break;case 50:return f.abrupt("return",oT.call(this,e,{adInfos:p.adInfos,checkAdStatus:l,msg:T},h,"MATERIAL_NOT_READY"));case 51:p.adProxy.setTimePoint("p17"),"launch"===e.source&&Object(ug.showSplashAd)({showMenu:!0,show:!0,errCode:pS,adCallTime:p.adProxy.getTimePoint("p17"),eventReceivedTime:h.startInit,cgiFetchStart:h.startFetchTime,cgiFetchCallBack:h.fetchCallbackTime,success:function(){p.adProxy.setTimePoint("p18"),w.default.onReady((function(){p.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.launchShowSplashAdSuccess)}))},fail:function(e){p.adProxy.setTimePoint("p18"),w.default.onReady((function(){p.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.showSplashAdFail,{adInfos:p.adInfos,checkAdStatus:l,msg:e})})),MS.call(I),p.container&&Vs.nativeviewLayout.remove(p.container)}});try{p.adProxy.setTimePoint("p4"),iT.call(this,e)}catch(t){LS.call(this,{source:e.source,animated:!1},19),MS.call(this),w.default.onReady((function(){p.adProxy.reportAdMonitorData(dg.SPLASHAD_IDKEY.firstRenderFail,{adInfos:p.adInfos,source:e.source,msg:t})}))}case 54:case"end":return f.stop()}}),f,this,[[37,41]])})))}}]),n}(Pu.Component);function sT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(n),!0).forEach((function(t){Object(mt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}rS||(rS=new aT),Object(XE.onShouldShowSplashAd)((function(e){rS||(rS=new aT),rS.show(e)})),Object(XE.onEmitSplashAdFetch)((function(){rS||(rS=new aT),rS.otherAdsEmitFetch()}));var uT=null,lT=function(e){var t=cT({},e);return delete t.pluginId,function(e){return e&&!0===e.multiton?new Nw(e):(uT||(uT=new Nw(e)),uT)}(t)},dT=n(89),fT=new WeakMap,pT=function(){function e(t){var n=this,r=t.type,i=void 0===r?"text":r,o=t.style,a=void 0===o?{}:o,s=t.text,c=void 0===s?"":s,u=t.image,l=void 0===u?"":u,d=t.onTapCallback,f=void 0===d?function(){return Promise.resolve()}:d;Object(N.default)(this,e);var p={};fT.set(this,p),p.emitter=new Ps.default,p.onTapCallback=f,a=Object.assign(Object(dT.getDefaultStyle)(),a,{position:"absolute"}),this.style={},p.button="text"===i?new Vs.Text({style:a,value:c,eventType:"click"}):new Vs.Image({style:a,src:l,eventType:"click"}),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:function(){return c},set:function(e){c=e,p.button.value=e}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:function(){return l},set:function(e){l=e,p.button.src=e}}),Object.keys(a).forEach((function(e){"position"!==e&&Object.defineProperty(n.style,e,{configurable:!0,enumerable:!0,get:function(){return a[e]},set:function(t){a[e]=t,p.button.style[e]=t}})})),p.button.on("click",(function(){p.onTapCallback().then((function(e){return p.emitter.emit("tap",e)})).catch((function(e){return p.emitter.emit("tap",e)}))})),Vs.webviewLayout.add(p.button)}return Object(oe.default)(e,[{key:"onTap",value:function(e){fT.get(this).emitter.on("tap",e)}},{key:"offTap",value:function(e){fT.get(this).emitter.off("tap",e)}},{key:"show",value:function(){fT.get(this).button.style.hidden=!1}},{key:"hide",value:function(){fT.get(this).button.style.hidden=!0}},{key:"destroy",value:function(){var e=fT.get(this);Vs.webviewLayout.remove(e.button)}}]),e}();function hT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var gT=Object(w_.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.withCredentials,n=void 0===t||t,r=e.lang,i=void 0===r?"en":r,o=e.success,a=e.fail,s=wx&&wx.version&&wx.version.version||"";Object(O.baseOperateWXData)({isImportant:!0,data:{api_name:"webapi_getuserinfo",from_component:!0,with_credentials:n,data:{lang:i,version:s}},success:o,fail:a},{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserInfo")},beforeSuccess:function(e){m.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})})),vT=function(e){Object(M.default)(n,e);var t=hT(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.type,i=void 0===r?"text":r,o=e.style,a=e.image,s=e.text,c=void 0===s?"获取用户信息":s,u=e.withCredentials,l=e.lang;return Object(N.default)(this,n),t.call(this,{type:i,style:o,image:a,text:c,onTapCallback:function(){return gT({withCredentials:u,lang:l})}})}return n}(pT);function _T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var yT={green:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHroMcjTH0DGy1sGwV95nfxnBialPaFEXZG5B1iarolFC6Uic4BRlTlsR0Q/0?wx_fmt=png",white:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH8hmRP9YkP3WHQ9gKcXR4oKD0rwZxFojibQDMfjgwa3foAtjZH7Ce9Xg/0?wx_fmt=png",light:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMHlGKmb23Js82NJ4dH3b3BoUNe74Tvk2Q4ZVfzD8ibwJicgs1czbYd6Qtw/0?wx_fmt=png",dark:"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJF4M4rgy8wMH6RhR996JZgib3RG3AtyO1OgnR6FibX7DPsBKQAJd5miaYcwyslLR7F6KQ/0?wx_fmt=png"},mT={appid:"",ssid:1037},bT={appid:"",ssid:30,wechat_pkgid:"circlecenter_mixed_circle"};w.default.onReady((function(){mT.appid=w.default.accountInfo.appId,bT.appid=w.default.accountInfo.appId}));var wT=Object(w_.promisify)((function(e){var t,n=e.success,r=e.fail,i=e.extra;if(Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_GAME_ClUB),Object(C.checkPermissionSync)("openH5GameClub")){var o=(t=Object.assign({},i,bT),"https://game.weixin.qq.com/cgi-bin/h5/static/circlecenter/mixed_circle.html?"+Object.keys(t).map((function(e){try{return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}catch(e){return""}})).join("&")+"#wechat_redirect");Object(O.invokeMethod)("private_openUrl",{url:o,isNativeStyle:!0,success:n,fail:r})}else{var a=function(e,t){return e+"?"+Object.keys(t).map((function(e){try{return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}catch(e){return""}})).join("&")}("pages/club_index/club_index.html",Object.assign({},i,mT));Object(O.invokeMethod)("navigateToMiniProgram",{appId:"wxff3bb5c177303374",path:a,scene:37,sourcetype:3,success:n,fail:r})}})),OT=function(e){Object(M.default)(n,e);var t=_T(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=r.icon,a=void 0===o?"green":o,s=r.type,c=void 0===s?"image":s,u=r.image,l=r.text,d=void 0===l?"打开游戏圈":l,f=r.extra;return Object(N.default)(this,n),"bindGroup"===c?(c="text",d="关联群聊",f=Object.assign({},f,{action:"bindGroup"})):"joinGroup"===c&&(c="text",d="进入群聊",f=Object.assign({},f,{action:"joinGroup"})),e=t.call(this,{type:c,style:i,image:u||yT[a],text:d,onTapCallback:function(){return wT({extra:f})}}),"image"===c&&Object.defineProperty(Object(Cu.default)(e),"icon",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,_private.button.src=yT[a]}}),e}return n}(pT),ET=n(100);function ST(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var TT=Object(w_.promisify)(et._openSetting),IT=function(e){Object(M.default)(n,e);var t=ST(n);function n(e){var r=e.type,i=void 0===r?"text":r,o=e.style,a=e.image,s=e.text,c=void 0===s?"打开设置":s;return Object(N.default)(this,n),t.call(this,{type:i,style:o,image:a,text:c,onTapCallback:function(){return TT().then((function(){Object(ET.reportRecycledAPI)({name:"openSetting",scene:1})}))}})}return n}(pT);function AT(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var CT="";try{w.default.onReady((function(){CT=w.default.accountInfo.appId}))}catch(e){}var kT=Object(w_.promisify)((function(e){var t=e.success,n=e.fail;Object(O.invokeMethod)("private_openUrl",{url:"https://mp.weixin.qq.com/mp/wapreportwxadevlog?action=get_page&appid="+CT+"#wechat_redirect",isNativeStyle:!0,success:t,fail:n})})),xT=function(e){Object(M.default)(n,e);var t=AT(n);function n(e){var r=e.type,i=void 0===r?"text":r,o=e.style,a=e.image,s=e.text,c=void 0===s?"打开意见反馈页面":s;return Object(N.default)(this,n),t.call(this,{type:i,style:o,image:a,text:c,onTapCallback:function(){return kT()}})}return n}(pT),PT=Object(w_.promisify)(Object(ko.constructOperateWXData)(!1,"compload"));function DT(e,t){if(function(e,t){var n=Object.prototype.toString;return"Null"===t&&null===e||"Undefined"===t&&void 0===e||n.call(e).slice(8,-1)===t}(t,"String")){var n=t.split(".");return n.reduce((function(e,t,r){return r===n.length-1?e[t]:e[t]||{}}),e)}}function RT(){var e=Object(Pu.getPrivateThis)(this),t=new Date;return PT({apiName:"webapi_compload",reqData:{act_id:e.act_id,comp_id:e.comp_id}}).catch((function(n){throw e.reporter.reportKeyValue({action:WT.actionMap.getJSON,execTime:new Date-t,externInfo:JSON.stringify(n),isSuccess:0}),e.config={flows:[]},e.emitter.emit("error",n),new Error(LT(n))})).then((function(n){e.reporter.reportKeyValue({action:WT.actionMap.getJSON,execTime:new Date-t,isSuccess:1}),n||(n={});var r={};try{r=JSON.parse(n.rawData||"{}")}catch(e){r={}}var i=r,o=i.sign,a=i.config;e.sign=o,e.config=a,e.config}))}function jT(){var e=Object(Pu.getPrivateThis)(this);this.isDestroyed=!0,this.ready=!1,e.emitter.off("_error"),e.emitter.off("load"),e.pages.forEach((function(e){Vs.webviewLayout.remove(e)}))}function NT(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.destroyPromise||(t.destroyPromise=new Promise((function(n){t.fetchPromise?t.fetchPromise.then((function(){jT.call(e),n()})).catch((function(){jT.call(e),n()})):(jT.call(e),n())}))),t.destroyPromise}function MT(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.fetchPromise=RT.call(this).then((function(){if(e.isDestroyed)throw new Error("组件已经被销毁");return t.uiEngine.init()})),t.fetchPromise}function LT(e){var t;try{t=JSON.stringify(e)}catch(e){t="{}"}return t}function BT(e){return JSON.parse(JSON.stringify(e))}function FT(e,t){var n;e=e||"{}";try{n=JSON.parse(e)}catch(e){n=t||{}}return n}var UT={appid:"",scene:0};w.default.onReady((function(){var e=w.default.appLaunchInfo||{},t=w.default.accountInfo||{};UT.scene=e.scene||0,UT.appid=t.appId||"",UT.SDKVersion=w.default.SDKVersion}));var WT=function(){function e(t){Object(N.default)(this,e),this._private=t}return Object(oe.default)(e,[{key:"reportKeyValue",value:function(e){var t=e.action,n=e.execTime,r=void 0===n?0:n,i=e.externInfo,o=void 0===i?"":i,a=e.isSuccess,s=void 0===a?1:a,c=e.flowid,u=void 0===c?"":c,l=[UT.scene,this._private.act_id,this._private.comp_id,UT.SDKVersion,Object(it._getCurrentNetworkType)(),t,s,r,o,u].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameComponent",value:l,force:!0,immediately:!0})}}]),e}();WT.actionMap={getJSON:1,execFlow:2,execModelAction:3,shareAppMessage:4,launchGameWithShare:5,broadcastEvent:6,closeComponent:7,exposure:8,createRewardedVideoAd:9,createAndShowRewardedVideoAdSuccess:10,createAndShowRewardedVideoAdFail:11,confirmRewardVideo:12,cancelRewardVideo:13,destroyRewardedVideoAd:14,videoOnError:15,showModal:16,confirmModal:17};var VT=Object(w_.promisify)(Object(ko.constructOperateWXData)(!1,"compflowinvoke")),GT=/\$(.+)\$/,HT={},zT={},YT={launchInfo:{query:zT.query||{}}};Object.defineProperty(YT,"network_type",{configurable:!0,enumerable:!0,get:function(){return Object(it._getCurrentNetworkType)()}}),w.default.onReady((function(){zT=w.default.appLaunchInfo,Object.assign(YT.launchInfo.query,zT.query||{}),wx.onShow((function(e){Object.assign(YT.launchInfo.query,e.query||{})}))}));var qT={String:"",Unit32:"0",Boolean:"true"},KT={String:String,Uint32:String,Boolean:Boolean};function JT(e){var t=BT(e);return void 0===t.value&&(t.value=qT[t.format]),"Boolean"!==t.format?t.value=KT[t.format]&&KT[t.format](t.value)||t.value:t.value="true"===t.value,t}var XT=/\$\((.+)\)/;function $T(e,t,n,r){return"Variable"===t?DT(YT,n):"datasetValue"===t?function(e,t,n){var r=t.split("."),i=r[0];if(XT.test(i)){var o=XT.exec(i)[1],a="this"===o?n:e.uiEngine.getElementById(o);return a&&DT(a.dataset,r.slice(1).join("."))}}(e,n,r):n}function ZT(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return Object.keys(t&&t.inputs||{}).reduce((function(r,i){var o=t.inputs[i];return r[i]=JT({value:$T(e,o.parse,o.value,n),format:o.format}),r}),{})}function QT(e,t){var n=t.act_id,r=t.flow_id,i=t.inputs,o=t.sign,a=new Date;return VT({apiName:"webapi_compflowinvoke",reqData:{act_id:n,flow_id:r,inputs:i,sign:o}}).catch((function(t){throw e.reporter.reportKeyValue({action:WT.actionMap.execFlow,execTime:new Date-a,externInfo:LT(t),isSuccess:0,flowid:r}),new Error(t.errMsg||"")})).then((function(t){return e.reporter.reportKeyValue({action:WT.actionMap.execFlow,execTime:new Date-a,isSuccess:1,flowid:r}),t}))}var eI=new(function(){function e(){Object(N.default)(this,e)}return Object(oe.default)(e,[{key:"getCgi",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.channel,i=t.id,o={act_id:e.act_id,flow_id:i,sign:e.sign,inputs:ZT(e,r,n)};return QT(e,o).then((function(t){t||(t={});var n=FT(t.rawData||"{}");n.models;var r=n.models,i=void 0===r?[]:r,o="minigame_component_post";e.uiEngine.modelsHandler(n.models.filter((function(e){return e.id!==o})));var a=i.find((function(e){return e.id===o}));if(a&&a.extra&&a.extra.action)return FT(a.extra.action)}))}},{key:"closeComponent",value:function(e){var t=e.pages.map((function(e){return e.style.hidden=!0,e.nextLayout()}));return e.reporter.reportKeyValue({action:WT.actionMap.closeComponent,isSuccess:1}),Promise.all(t).then((function(){e.emitter.emit("close")}))}},{key:"shareAppMessage",value:function(e,t,n){var r=n&&n.dataset||{},i=r.share_params||{},o="";Object.keys(i).forEach((function(e,t){o+=e+"="+i[e],t<Object.keys(i).length-1&&(o+="&")})),e.reporter.reportKeyValue({action:WT.actionMap.shareAppMessage,isSuccess:1,externInfo:LT({title:r.title||"",query:o,imageUrl:r.image_url||""})}),Object(ma.shareAppMessage)({title:r.title||"",query:o,imageUrl:r.image_url||""})}},{key:"broadcastEvent",value:function(e,t){var n=ZT(e,t.channel);n.eventName&&n.eventName.value&&(e.emitter.emit(n.eventName.value,{errcode:Number(n.errcode&&n.errcode.value||0),errMsg:n.errMsg&&n.errMsg.value||""}),e.reporter.reportKeyValue({action:WT.actionMap.broadcastEvent,isSuccess:1,externInfo:LT(n)}))}},{key:"showModal",value:function(e,t){var n=t.channel,r=ZT(e,n),i=r.title&&r.title.value||"提示",o=r.content&&r.content.value||"温馨提示",a=r.cancelText&&r.cancelText.value||"取消",s=r.cancelColor&&r.cancelColor.value||"#000000",c=r.confirmText&&r.confirmText.value||"确定",u=r.confirmColor&&r.confirmColor.value||"#576B95",l=r.showCancel&&r.showCancel.value;return l=void 0===l||l,e.reporter.reportKeyValue({action:WT.actionMap.showModal,isSuccess:1,externInfo:LT(r)}),new Promise((function(t){Object(Et.showModal)({title:i,content:o,showCancel:l,cancelText:a,cancelColor:s,confirmText:c,confirmColor:u,success:function(n){n.confirm?(e.reporter.reportKeyValue({action:WT.actionMap.confirmModal,isSuccess:1,externInfo:LT(r)}),t()):n.cancel}})}))}},{key:"showLoading",value:function(e,t){var n=ZT(e,t.channel),r=n.title&&n.title.value||"加载中...",i=n.mask&&n.mask.value||!1;return new Promise((function(e){Object(Et.showLoading)({title:r,mask:i,complete:e})}))}},{key:"showToast",value:function(e,t){var n=ZT(e,t.channel),r=n.duration&&n.duration.value||2e3;return new Promise((function(e){Object(Et.showToast)({title:n.title&&n.title.value||"",icon:n.type&&n.type.value||"none",duration:r,complete:e})}))}},{key:"actionFlow",value:function(e,t,n){t.id;var r=t.channel,i=void 0===r?{}:r,o=t.conditions,a=void 0===o?{}:o,s=ZT(e,i,n),c=i.models,u=void 0===c?[]:c;return new Promise((function(t){var r=s.cond_key&&void 0!==s.cond_key.value?s.cond_key.value:void 0;if(void 0!==r&&Object.keys(a).find((function(e){return e===""+r}))){var i=a[r].channel,o=(void 0===i?{}:i).models,c=void 0===o?[]:o;e.uiEngine.modelsHandler(c)}var l=u.map((function(e){var t=BT(e);t.attributes||(t.attributes={});var r=t.attributes,i=FT((void 0===r?{}:r).dataset);for(var o in i){var a=GT.test(i[o]),s=GT.exec(i[o]);if(a){var c=s[1],u=DT(n,c);i[o]=i[o].replace(GT,u)}}return t.attributes.dataset=LT(i),t}));l.length&&e.uiEngine.modelsHandler(l),t()}))}},{key:"createRewardedVideoAd",value:function(e,t,n){var r=n.dataset.adUnitId;return e.reporter.reportKeyValue({action:WT.actionMap.createRewardedVideoAd,externInfo:r}),new Promise((function(t,n){if(r||(Object(Et.hideLoading)(),n(new Error("广告id参数必填"))),HT[r])t(HT[r]);else{var i=lT({adUnitId:r,multiton:!0});HT[r]=i,i.onError((function(t){t.adUnitId=r,e.reporter.reportKeyValue({action:WT.actionMap.videoOnError,externInfo:LT(t),isSuccess:0})})),t(i)}}))}},{key:"createAndShowRewardedVideoAd",value:function(e,t,n){var r=this;return Object(Et.showLoading)({title:"加载视频中..."}),new Promise((function(i,o){r.createRewardedVideoAd(e,t,n).then((function(t){return t.load().then((function(n){t.show().then((function(){e.reporter.reportKeyValue({action:WT.actionMap.createAndShowRewardedVideoAdSuccess,externInfo:t.adUnitId}),Object(Et.hideLoading)()}))})).catch((function(n){Object(Et.hideLoading)(),Object(Et.showToast)({title:"无可观看视频",icon:"none"}),e.reporter.reportKeyValue({action:WT.actionMap.createAndShowRewardedVideoAdFail,externInfo:t.adUnitId}),o(n)})),t.closeCbk&&t.offClose(t.closeCbk),t.closeCbk=function(n){n&&n.isEnded||void 0===n?(e.reporter.reportKeyValue({action:WT.actionMap.confirmRewardVideo,externInfo:t.adUnitId}),i()):(e.reporter.reportKeyValue({action:WT.actionMap.cancelRewardVideo,externInfo:t.adUnitId}),Object(Et.showToast)({title:"领取失败",icon:"none"}))},t.onClose(t.closeCbk),t.load()}))}))}},{key:"destroyRewardedVideoAd",value:function(e,t){var n=t.channel,r=ZT(e,n),i=r.id&&r.id.value,o=HT.get(i);return new Promise((function(t,n){i&&o?(e.reporter.reportKeyValue({action:WT.actionMap.destroyRewardedVideoAd,externInfo:i,isSuccess:1}),o.destroy(),HT.delete(i),t()):(e.reporter.reportKeyValue({action:WT.actionMap.destroyRewardedVideoAd,externInfo:i,isSuccess:0}),n(new Error("组件不存在")))}))}},{key:"flowParser",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=r.type||r.flow_type;return t=this[o]?this[o](e,r,i):Promise.reject(),r.next?t.then((function(){return n.flowParser(e,r.next,i)})):t}}]),e}());function tI(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return t.id===n&&(e=t),(t.items||[]).forEach((function(t){e=tI(t,n)||e})),e}function nI(e){var t=e.attributes,n=(void 0===t?{}:t).dataset,r=void 0===n?"{}":n;return r=FT(r)}function rI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return n||(n=[]),(nI(e).className||"").split(/\s+/).find((function(e){return e===t}))&&n.push(e),(e.items||[]).forEach((function(e){return rI(e,t,n)})),n}function iI(e,t){if(e.value&&(t.value=e.value),e.attributes){if(t.attributes||(t.attributes={}),e.attributes.dataset){var n=Object.assign(FT(t.attributes.dataset||""),FT(e.attributes.dataset));t.attributes.dataset=LT(n)}if(e.attributes.style){var r=Object.assign(FT(t.attributes.style||""),FT(e.attributes.style));t.attributes.style=LT(r)}}}var oI=/(.+)\((.+)\)/,aI=/\$(.+)\$/,sI=/\$\((.+)\)/,cI={view:Vs.View,text:Vs.Text,image:Vs.Image};function uI(e,t){Object.keys(t.query||{}).find((function(e){return e.indexOf("minigame_component")>-1}))&&(t.query,e.reporter.reportKeyValue({action:WT.actionMap.launchGameWithShare,isSuccess:1,externInfo:LT(t.query)}))}function lI(e,t){for(var n in e.style.scale=t,e.children)lI(e.children[n],t)}var dI=function(){function e(t,n){Object(N.default)(this,e),this._private=t,this.componentInstance=n,this.id=1}return Object(oe.default)(e,[{key:"oneFlowExec",value:function(e,t){var n=this._private,r=n.config&&n.config.flows.find((function(t){return t.id===e}));return r&&eI.flowParser(n,r,t)}},{key:"oneModelActionExec",value:function(e,t,n){var r=this,i=this._private.config.model_actions.find((function(t){return t.name===e}));if("$this"===t)this.updateOneElement(i,n);else{var o=t.split(":");if("$class"===o[0])this.getElementsByClassName(o[1]).forEach((function(e){r.updateOneElement(i,e)}));else if("$id"===o[0]){var a=this.getElementById(o[1]);a&&this.updateOneElement(i,a)}}}},{key:"eventReigster",value:function(e,t){var n=this,r=t.attributes.dataset;r.click&&e.on("click",(function(t){(e.id,!e.disabled&&function(e){var t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,i=e.absoluteEndY,o=e.pressInterval,a=!1;return Math.abs(i-n)<30&&Math.abs(r-t)<30&&o<300&&(a=!0),a}(t))&&r.click.split(";").forEach((function(t){if("execFlow"===t&&r.flowid)r.flowid.split(";").forEach((function(t){n.oneFlowExec(t,e)}));else if("execModelAction"===t&&r.action){r.action.split(";").filter((function(e){return e&&e.match(oI)})).forEach((function(t){var r=oI.exec(t),i=r[1],o=r[2];n.oneModelActionExec(i,o,e)}))}}))}))}},{key:"create",value:function(e,t){var n=this,r=this._private,i=e.attributes,o=e.component,a=e.value;i.style=FT(i.style);var s=FT(i.dataset);i.dataset=s,i.value=a,i.src=a,i.bubbleEvent=!0;var c=new(0,cI[o])(i);if("list"===s.type&&s.listlength&&e.items.length){var u=e.items[0];e.items=[];for(var l=0;l<s.listlength;l++){var d=BT(u);s.defaultvalue&&(d.value=s.defaultvalue,d.src=s.defaultvalue);var f=FT(d.attributes.dataset);f.idprefix&&(f.idName=f.idprefix+l,d.attributes.dataset=LT(f)),e.items.push(d)}}c.dataset=s,s.if&&(c.style.hidden=!0,setTimeout((function(){if(s.if&&sI.test(s.if)){var e=s.if.split("."),t=sI.exec(s.if)[1],r=n.getElementById(t),i=e.slice(1).join("."),o=i+"__bridge";r.dataset[o]=r.dataset[i],void 0!==r.dataset[i]&&(c.style.hidden=!r.dataset[i]),Object.defineProperty(r.dataset,i,{configurable:!0,enumerable:!0,get:function(){return r.dataset[o]},set:function(e){void 0!==e&&(c.style.hidden=!e),r.dataset[o]=e}})}}),0)),e.items.forEach((function(e){var r=n.create(e,t);c.add(r)})),this.eventReigster.call(this,c,e);var p=s.idName||this.id++;return r[t+"Container"][p]=c,c}},{key:"init",value:function(){var e=this,t=this._private;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.flows,n=(void 0===t?[]:t).find((function(e){return"init"===e.id}));if(n){var r=n.channel,i=(void 0===r?{}:r).models,o=void 0===i?[]:i,a=e.model,s=void 0===a?{}:a;o.forEach((function(e){var t=e.extra,n=void 0===t?{}:t;if(n.action){var r=FT(n.action);if("execModelAction"===r.actionType){var i=r.model_actions||[];if("string"==typeof i)try{i=JSON.parse(i)}catch(e){i=[]}i.forEach((function(e){if(e.id){var t=tI(s,e.id);t&&iI(e,t)}else e.class&&rI(s,e.class).forEach((function(t){iI(e,t)}))}))}}}))}}(t.config);var n=Object(tt.getSystemInfoSync)();t.pages=[],t.pageContainers={},t.root=new Vs.View({}),t.root.dataset={};var r=t.config.model;r.items.forEach((function(i){var o=i.id,a=o+"Container";t[a]={},t.pageContainers[a]=t[a];var s=i.attributes,c=void 0===s?{}:s,u=FT(c.style);u.hidden=!0,"singlePage"!==r.label&&(u.width=n.windowWidth,u.height=n.windowHeight),c.style=LT(u),e.create(i,o);var l=t[a][o];if(t[o]=l,t[o].isPage=!0,t.pages.push(l),Vs.webviewLayout.add(l),"singlePage"===r.label){var d=l.style;e.componentInstance.style={width:d.width||0,height:d.height||0,left:0,top:0};["width","height","left","top"].forEach((function(t){Object.defineProperty(e.componentInstance.style,t,{configurable:!0,enumerable:!0,get:function(){return l.computedStyle[t]},set:function(e){if("width"===t||"height"===t)throw new Error("can not set width and height");e!==d[t]&&(d[t]=e)}})})),Object.keys(t.style).forEach((function(n){"left"!==n&&"top"!==n||(e.componentInstance.style[n]=t.style[n])}))}})),this.componentInstance.ready=!0,t.emitter.emit("load"),uI(t,Object(wa._getLaunchOptionsSync)()),Object(ms._onShow)((function(e){uI(t,e)}))}},{key:"updateListTreeChild",value:function(e,t){var n=e.dataset;if(n.origin&&aI.test(n.origin)){var r=DT({item:t},aI.exec(n.origin)[1]);n.origin_source=r}if(n.render&&aI.test(n.render)){var i=DT({item:t},aI.exec(n.render)[1]);i&&(e.value=i,e.src=i)}if(n.if&&aI.test(n.if)){var o=DT({item:t},aI.exec(n.if)[1]);void 0!==o&&(e.style.hidden=!o)}for(var a in e.children)this.updateListTreeChild(e.children[a],t)}},{key:"updateListTree",value:function(e,t){var n=this,r=FT(t.value,[]),i=Object.keys(e.children).map((function(t){return e.children[t]}));r.forEach((function(e,t){n.updateListTreeChild(i[t],e)}))}},{key:"updateList",value:function(e,t){var n=e.dataset,r=FT(t.value);if(e&&"list"===e.dataset.type&&t.value_filter_name){var i=Object.keys(e.children).map((function(t){return e.children[t]})),o=t.value_filter_name.split(".");if(o[0].indexOf("[]")>-1){var a=r[o[0].replace("[]","")];if(a){var s=o[1];i.forEach((function(e,t){if(a[t]&&a[t][s]){var r=a[t][s];"avatar_url"===s&&(r+="/0"),e.src=r,e.value=r}else n.defaultvalue&&(e.src=n.defaultvalue,e.value=n.defaultvalue)}))}}}}},{key:"getElementsByClassName",value:function(e){var t=this._private,n=[];return Object.keys(t.pageContainers).forEach((function(r){var i=t.pageContainers[r],o=Object.keys(i);n=n.concat(o.map((function(t){return!!(i[t].dataset.className||"").split(/\s+/).find((function(t){return t===e}))&&i[t]})).filter((function(e){return e})))})),n}},{key:"getElementById",value:function(e){var t,n=this._private;return"root"===e?n.root:(Object.keys(n.pageContainers).forEach((function(r){var i=n.pageContainers[r],o=Object.keys(i).find((function(t){return i[t].dataset.idName===e}));o&&i[o]&&(t=i[o])})),t)}},{key:"updateOneElement",value:function(e,t){var n=this,r=this._private,i=t||this.getElementById(e.id),o=e.attributes,a=void 0===o?{}:o,s=e.value;if(i){if(void 0!==a.hide&&(i.style.hidden=a.hide,!1===i.style.hidden&&i.isPage&&r.reporter.reportKeyValue({action:WT.actionMap.exposure,isSuccess:1,externInfo:LT(i.dataset)})),s&&i.value&&(i.value=s),s&&i.src&&(i.src=s),a.dataset&&(i.dataset=Object.assign(i.dataset,FT(a.dataset))),a.style)try{var c=FT(a.style);Object.assign(i.style,c),void 0!==c.scale&&lI(i,c.scale)}catch(e){}void 0!==a.disabled&&(i.disabled=a.disabled),this.updateList(i,e),"list"!==i.dataset.type||e.value_filter_name||this.updateListTree(i,e)}e.items&&e.items.length&&e.items.forEach((function(e){n.updateOneElement(e)}))}},{key:"modelsHandler",value:function(e){var t=this;e.forEach((function(e){t.updateOneElement(e)})),e.filter((function(e){return"root"===e.id})).forEach(this.rootHandler.bind(this))}},{key:"rootHandler",value:function(e){var t=this,n=this._private,r=e.extra,i=FT((void 0===r?{}:r).action);if("execFlow"===i.actionType)eI.flowParser(n,i);else if("execConfigFlow"===i.actionType){var o=i.type,a=i.channel,s=n.config.flows.find((function(e){return e.id===o}));if(s){var c=BT(s);c.channel=a||c.channel,eI.actionFlow(n,c)}}else if("execModelAction"===i.actionType){var u=i.model_actions||[];"string"==typeof u&&(u=FT(u,[])),u.forEach((function(e){if(!e.name&&e.id)t.updateOneElement(e);else if(!e.name&&e.class)t.getElementsByClassName(e.class).forEach((function(n){t.updateOneElement(e,n)}));else{var r=BT(n.config.model_actions.find((function(t){return t.name===e.name})));r.id=e.id,t.updateOneElement(r)}}))}}}]),e}();function fI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}var pI=function(e){Object(M.default)(n,e);var t=fI(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.id,o=r.name,a=r.style,s=void 0===a?{}:a;Object(N.default)(this,n),e=t.call(this);var c=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return c.style=s,c.uiEngine=new dI(c,Object(Cu.default)(e)),c.act_id=i,c.comp_id=o,c.emitter=new Ps.default,c.destroyPromise=null,c.reporter=new WT(c),e.isDestroyed=!1,e.ready=!1,e.id=i,e.name=o,MT.call(Object(Cu.default)(e)).catch((function(){})),e}return Object(oe.default)(n,[{key:"offClose",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("close",e)}},{key:"onClose",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("close",e)}},{key:"destroy",value:function(){return NT.call(this)}},{key:"onLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"onError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("error",e)}},{key:"offLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"onMessage",value:function(e,t){Object(Pu.getPrivateThis)(this).emitter.on(e,t)}},{key:"offMessage",value:function(e,t){Object(Pu.getPrivateThis)(this).emitter.off(e,t)}},{key:"invoke",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isDestroyed)return Promise.reject(new Error("组件已经被销毁"));var t=Object(Pu.getPrivateThis)(this),n=e.action,r=t.config&&t.config.flows&&t.config.flows.find((function(e){return e.id===n}));return r?n&&t.uiEngine.oneFlowExec(n):Promise.reject(new Error("action "+n+" is not exist"))}}]),n}(Pu.Component);globalThis.setTimeout=y.default.setTimeout,globalThis.clearTimeout=y.default.clearTimeout,globalThis.setInterval=y.default.setInterval,globalThis.clearInterval=y.default.clearInterval,globalThis.requestAnimationFrame=y.default.requestAnimationFrame,globalThis.cancelAnimationFrame=y.default.cancelAnimationFrame,globalThis.GameGlobal=globalThis,GameGlobal.__isAdapterInjected=!1,Object.defineProperty(globalThis,"sharedCanvas",{get:function(){return nc()}});var hI=w.default.accountInfo?w.default.accountInfo:{};w.default.onReady((function(){hI=w.default.accountInfo}));var gI=!1;zr.GlobalEmitter.once("beforeTouchStart",(function(){gI=!0}));var vI=n(98),_I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if(Object(O.beforeInvoke)("loadSubPackage",t,{name:""})){var n=w.default.subPackages||w.default.subpackages;if(n){n.forEach((function(e){t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));var r="__APP__"===t.name||"__GAME__"===t.name;r||t.name.startsWith("/")||(t.name="/"+t.name),r||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name=t.name+"/"),"__GAME__"===t.name&&(t.name="__APP__");try{var i=new dl(t);return i}catch(e){return void Object(O.beforeInvokeFail)("loadSubpackage",t,e.message)}}else Object(O.beforeInvokeFail)("loadSubpackage",t,"Your subpackages configuration is invalid.")}},yI={};function mI(){return new Promise((function(e,t){var n=it._getCurrentNetworkType();n?e(n):it.getNetworkType({success:function(n){n.networkType?e(n.networkType):t(new Error("get network type failed."))},fail:t})}))}w.default.onReady((function(){Object(Fr.onAppRouteDone)((function(e){var t=e.path;if(w.default.preloadRule&&w.default.preloadRule[t])return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));var t=e.packages.filter((function(e){return!(e in yI)}));return("all"!==e.network?mI().then((function(e){if("wifi"!==e.toLowerCase())return Promise.reject(new Error("network type does not match, '"+e+"' !== 'wifi'"))}),(function(){return Promise.reject(new Error("get network type failed."))})):Promise.resolve()).then((function(){return Promise.all(t.map((function(e){return new Promise((function(n){_I({name:e,success:function(){yI[e]=!0,n(t)},fail:function(t){var r=new Error(t.errMsg.replace("loadSubpackage:fail",""));r.packageName=e,n(r)}})}))}))).then((function(e){if((e=e.filter((function(e){return e instanceof Error}))).length>0){var t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))}))}(w.default.preloadRule[t]).then((function(){console.info("preloadSubpackages: success")}),(function(e){e._detail?(console.group("preloadSubpackages fail: "+e.message),e._detail.forEach((function(e){console.warn(e.packageName+": "+e.message)})),console.groupEnd()):console.warn("preloadSubpackages fail: "+e.message)}))}))}));var bI=Object(A.promisify)(Et._showModal),wI=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"informFreezed")),OI=n(118),EI=wxNativeConsole.createLogger("common reportUserBehavior"),SI=Object(A.promisify)(Et._showModal),TI=!1;w.default.onReady((function(){var e=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"reportUserBehavior")),t=w.default.appLaunchInfo,n=0,r=null,i=0,o="",a="",s={},c=!1,u=!1,l=!1,d=!1,f=0,p=3e5;try{w.default.appContactInfo&&w.default.appContactInfo.operationInfo&&w.default.appContactInfo.operationInfo.jsonInfo&&w.default.appContactInfo.operationInfo.jsonInfo.op_info&&(l=1===Number(w.default.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),d=1===Number(w.default.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){EI.error("get op_info fail",e.message)}var h=Object(A.isGame)()||d,g=Object(A.isGame)()||d,v=Object(A.isGame)()||d||l,_=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.coldBoot;f=Date.now();var d={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return TI?h().then(g).catch((function(e){EI.error("report fail",e)})):AI.then(h).then(g).catch((function(e){EI.error("report fail",e)}));function h(){var r={type:d[t],duration:n/1e3,scene_note:a,scene:i,referrerInfo:{appId:o,extraData:s},appServiceType:w.default.appType};return Object(A.isGame)()||(r.isWxaAdultOnly=l),e({apiName:"jsapi_reportuserbehav",reqData:r})}function g(e){var t=JSON.parse(e.rawData),n=t.action,r=t.alertMsg,i=t.heartbeatInterval;switch(i!==p&&i>=1e4&&(p=i,y()),n){case 1:break;case 2:SI({title:"提示",content:r,showCancel:!1});break;case 3:SI({title:"提示",content:r,showCancel:!1}).then(Ji);break;case 4:var o=t.urlInfo,a=o.url,s=o.name;!u&&r&&a&&s&&(u=!0,Object(Et._showModal)({title:"提示",content:r,confirmText:s,success:function(e){e.confirm?Object(Eu.privateOpenUrl)({url:a,isNativeStyle:!0,success:function(){c=!0},fail:function(e){EI.error("跳转实名认证h5失败=",e)}}):e.cancel&&(EI.info("modal cancel"),Ji()),u=!1},fail:function(e){EI.error("show modal fail=",e),Ji(),u=!1}}))}}},y=function(){null!==r&&(clearInterval(r),m())},m=function(){r=setInterval((function(){n=Date.now()-f,h&&_("heartbeat",n)}),p)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.coldBoot,u=void 0!==r&&r;a=e.scene_note||"",n=0,i=e.scene,e.referrerInfo&&(o=e.referrerInfo.appId,s=e.referrerInfo.extraData),m(),c?(_("retryLogin",n),c=!1):v&&_("onShow",n,{coldBoot:u})},O=function(){n=Date.now()-f,clearInterval(r),r=null,g&&_("onHide",n)};b(t,{coldBoot:!0}),Object(Mn.onNativeEvent)("onAppEnterForeground",(function(e){b(t=e)})),Object(Mn.onNativeEvent)("onAppEnterBackground",(function(){O()})),Object(Mn.onNativeEvent)("onAppRoute",(function(e){EI.log("onAppRoute",e),"autoReLaunch"===e.openType&&(u=!1,O(),setTimeout((function(){b(t)}),1e3))}))}));var II=function(){},AI=new Promise((function(e){II=e})),CI=function(){TI=!0,II()},kI=!1;w.default.onReady((function(){try{kI=w.default.appContactInfo.operationInfo.jsonInfo.misc_ban_info.minigame_freeze_status}catch(e){}kI?wI({apiName:"webapi_wxacloseinfo",reqData:{}}).then((function(e){var t=JSON.parse(e.rawData);if(t.need_show&&t.svr_stoptimestamp){t.svr_stoptimestamp;var n=t.svr_stoptimestamp,r=new Date(1e3*n),i=r.getFullYear(),o=r.getMonth()+1,a=r.getDate();return bI({title:"提示",content:"本小游戏计划于 "+i+"-"+o+"-"+a+" 下架，请及时处理充值所得道具，注意保护自身合法权益",showCancel:!1})}})).catch((function(e){e.errMsg})).then((function(){return CI()})):CI(),setTimeout((function(){Object(OI.informSubjectChange)(w.default.deviceOrientation,!0)}),1e3)}));var xI=n(193),PI=!1,DI=0;zr.GlobalEmitter.on("setLastTapTime",(function(e){DI=e})),zr.GlobalEmitter.on("beforeTouchStart",(function(){PI=!0,DI=Date.now()})),Ts((function(){PI=!1,DI=0}));var RI={muteMicrophone:!1,muteEarphone:!1};function jI(e){return Object(U.isObject)(e)?(Object(U.isBoolean)(e.muteMicrophone)&&(RI.muteMicrophone=e.muteMicrophone),Object(U.isBoolean)(e.muteEarphone)&&(RI.muteEarphone=e.muteEarphone),RI):RI}var NI=Object(E.getEventManager)("voIPChatMembersChanged"),MI=NI.onMethod,LI=NI.offMethod;Object(O.onMethod)("onVoIPChatMembersChanged",(function(e){e.errCode=0,e.errMsg=e.errMsg||"ok",NI.emit(e)}));var BI=Object(E.getEventManager)("VoIPChatInterrupted"),FI=function(e){e.errCode||(e.errCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3}(e.reason)),BI.emit(e)};Object(O.onMethod)("onVoIPChatInterrupted",(function(e){FI(e)})),Object(O.onMethod)("onVoIPChatInterruptedJsEvent",(function(e){FI(e)}));var UI=BI.onMethod,WI=BI.offMethod,VI=Object(E.getEventManager)("VoIPVideoMembersChanged"),GI=VI.onMethod,HI=VI.offMethod;Object(O.onMethod)("onVoIPVideoMembersChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};VI.emit(e)}));var zI=Object(E.getEventManager)("voIPChatStateChanged"),YI=zI.onMethod,qI=zI.offMethod;Object(O.onMethod)("onVoIPChatStateChanged",(function(e){e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",zI.emit(e)}));var KI=1;w.default.onReady((function(){["close","error","listening","message"].forEach((function(e){Object(O.onMethod)("onUDPSocket"+Object(A.capitalizeFirstLetter)(e),(function(t){var n=t.socketId;delete t.socketId,Object(A.capitalizeFirstLetter)(e),Object(E.getEventManager)("jsapi-udp-"+n+"-"+e).emit(t)}))}))}));var JI=function(){function e(){var t,n=this;if(Object(N.default)(this,e),this._id=KI++,Object(O.invokeMethod)("createUDPSocket",{socketId:this._id,fail:function(e){e.errMsg,t=e.errMsg}}),t)throw new Error(t);["close","error","listening","message"].forEach((function(e){var t=Object(E.getEventManager)("jsapi-udp-"+n._id+"-"+e);n["on"+Object(A.capitalizeFirstLetter)(e)]=t.onMethod,n["off"+Object(A.capitalizeFirstLetter)(e)]=t.onMethod}))}return Object(oe.default)(e,[{key:"bind",value:function(e){var t,n;if(Object(O.invokeMethod)("bindUDPSocket",{port:e,socketId:this._id,success:function(e){t=e.port},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t}},{key:"send",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ArrayBuffer.isView(n.message)?n.message.buffer:n.message,Object(O.invokeMethod)("sendUDPSocketMessage",Object.assign({},n,{socketId:this._id,message:e,success:function(e){},fail:function(e){var n=e.errMsg;Object(E.getEventManager)("jsapi-udp-"+t._id+"-error").emit({errMsg:"send: fail "+n})}}))}},{key:"connect",value:function(){}},{key:"write",value:function(e){this.send(e)}},{key:"close",value:function(){var e;if(Object(O.invokeMethod)("closeUDPSocket",{socketId:this._id,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}}]),e}(),XI=y.default.UDP,$I=new WeakMap,ZI=new WeakMap,QI=new WeakMap,eA=1,tA=function(){function e(){var t=this;if(Object(N.default)(this,e),!XI)return null;var n=new XI;if(null===n)return null;var r=eA++;QI.set(this,{}),["close","error","listening","message"].forEach((function(e){var i=Object(E.getEventManager)("jsbinding-udp-"+r+"-"+e);n["on"+e]=function(){i.emit.apply(i,arguments),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},QI.set(t,Object.assign(QI.get(t),Object(mt.default)({},e,i))),t["on"+Object(A.capitalizeFirstLetter)(e)]=i.onMethod,t["off"+Object(A.capitalizeFirstLetter)(e)]=i.offMethod})),$I.set(this,n),ZI.set(this,r)}return Object(oe.default)(e,[{key:"bind",value:function(e){return Object(ue.reportNetworkAPI)("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),$I.get(this).bind({port:e})}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(C.checkPermissionSync)("UDP")){var t,n="udp://"+e.address;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,$I.get(this).send(Object.assign({},e,{message:t})),Math.random()>.99&&Object(ue.reportNetworkAPI)("sendUDP",n,1,0,"","",!1,Object(A.getDataLength)(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}else{var r=Object(E.getEventManager)("jsbinding-udp-"+ZI.get(this)+"-error");r.emit({errMsg:"send socket fail: no permission",errCode:-3})}}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=$I.get(this);"function"==typeof t.connect&&t.connect(e)}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(C.checkPermissionSync)("UDP")){var t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;var n=$I.get(this);"function"==typeof n.write?n.write(Object.assign({},e,{message:t})):this.send(e)}else{var r=Object(E.getEventManager)("jsbinding-udp-"+ZI.get(this)+"-error");r.emit({errMsg:"write socket fail: no permission",errCode:-3})}}},{key:"onConnect",value:function(e){$I.get(this).onconnect=e}},{key:"close",value:function(){return $I.get(this).close()}}]),e}(),nA=n(141),rA=!1;function iA(){return!!rA}function oA(){return iA()||Object(Et._checkIsInteracting)()?Promise.resolve():Promise.reject(new Error("require user interaction (only in touchend event)"))}zr.GlobalEmitter.on("beforeTouchEnd",(function(){rA=!0})),zr.GlobalEmitter.on("afterTouchEnd",(function(){rA=!1})),Ts((function(){rA=!1}));var aA=Object(w_.throttle)(et.requestSubscribeMessage,1e3),sA=n(148),cA="requestSubscribeSystemMessage",uA=Object(ko.constructOperateWXData)(!1,cA),lA=!1;function dA(e){var t=e.msgTypeList;return new Promise((function(e,n){if(Array.isArray(t)&&t.length>0){var r=t.reduce((function(e,t){var n=Object(sA.mapSysMsgTypeNameToNum)(t);return n&&e.push(n),e}),[]);r.length>0?e(r):n({errMsg:"invalid arguments:msgTypeList"})}else n({errMsg:"invalid arguments:msgTypeList"})}))}function fA(e){return new Promise((function(t,n){uA({apiName:"webapi_getsyssubscribemsgtemplateinfo",reqData:{msg_type_list:e},success:function(e){t(e)},fail:function(e){n({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}})}))}function pA(e){return new Promise((function(t,n){var r=JSON.parse(e.respData.data);r&&r.msg_info_list?t(r.msg_info_list):n({errMsg:"data error"})}))}function hA(e){return new Promise((function(t,n){var r,i,o=e.map((function(e){return e.template_id}));r={tmplIds:o,success:function(n){var r={};e.forEach((function(e){var t=e.msg_type,i=Object(sA.mapSysMsgTypeNumToName)(t);r[i]=n[e.template_id]})),t(r)},fail:function(e){n({errMsg:e.errMsg,errCode:e.err_code||e.errCode})}},(i=Object.assign({},r)).tmplIds=Array.from(new Set(r.tmplIds)),Object(O.invokeMethod)("requestSubscribeMessage",i)}))}var gA=n(152),vA="getWhatsNewSubscriptionsSetting",_A=Object(ko.constructOperateWXData)(!1,vA),yA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(C.checkPermissionSync)("requestSubscribeWhatsNew")?_A({apiName:"webapi_game_query_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success:function(t){var n=JSON.parse(t.respData.data);Object(O.beforeInvokeCallback)({name:vA,args:e,res:n})},fail:e.fail,complete:e.complete}):Object(O.beforeInvokeFail)(vA,e,"",4)},mA=function(e){var t=e.action,n=Object(Oa._getEnterOptionsSync)(),r=[n.scene||"",n.scene_note||"",n.sessionid||n.sessionId||"",t].join(",");Reporter.reportKeyValue({key:"GameWhatsNew",value:r})},bA=wxNativeConsole.createLogger("requestSubscribeWhatsNew"),wA="requestSubscribeWhatsNew",OA=Object(ko.constructOperateWXData)(!1,wA),EA=!1;function SA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){mA({action:1}),Object(C.checkPermissionSync)("requestSubscribeWhatsNew")?yA({msgType:e.msgType,success:function(e){1===e.status?t():n({errCode:e.status})},fail:function(e){bA.error("getWhatsNewSubscriptionsSetting fail",e),n(e)}}):n({errCode:4})}))}function TA(){return new Promise((function(e){mA({action:2});var t=Object(gA.showPopup)({title:"接收游戏更新提醒",content:w.default.accountInfo.nickname+"更新时，你将收到微信小游戏的提醒",confirmText:"接收",cancelText:"取消",confirm:function(){t.destroy(),e({confirm:!0}),mA({action:4})},cancel:function(){t.destroy(),e({confirm:!1}),mA({action:3})},style:{title:{fontSize:17,color:"#1b1b1b"},content:{fontSize:14,color:"#d4d4d4",lineHeight:19.6,marginTop:16,marginBottom:0},confirm:{backgroundColor:"#FA9D3B"},cancel:{color:"#FA9D3B"}}})}))}function IA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){OA({apiName:"webapi_game_subscribe_whats_new",reqData:{msg_type:e.msgType||1},success:function(e){var r=JSON.parse(e.respData.data).errcode;0===r?t({confirm:!0}):n({errCode:r})},fail:function(e){bA.error("[webapi_game_subscribe_whats_new] fail",e),n({errCode:e.errcode||e.errCode,errMsg:e.errMsg})}})}))}var AA=n(39),CA=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"getplaybackinfo")),kA=function(e,t){var n={};return e&&Object(U.isString)(e.template)&&Object(U.isNonNullObject)(e.data)&&(n.desc_template_data={name:e.template,data_list:Object.keys(e.data).map((function(t){return{key:t,value:e.data[t]}}))}),t&&Object(U.isString)(t.template)&&(n.launch_desc_template=t.template),CA({apiName:"webapi_getplaybackinfo",reqData:n}).then((function(e){return{shareTitle:(e=JSON.parse(e.rawData)).title,shareDesc:e.desc,buttonText:e.launch_desc,videoDesc:e.playback_desc}}))},xA=null,PA=function(){return xA||(xA=CA({apiName:"webapi_getplaybackconfig"}).then((function(e){return(e=JSON.parse(e.rawData)).enable_share_to_haowan})).catch((function(){return!1})))},DA=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shareTitle,r=void 0===n?"":n,i=t.sharePath,o=void 0===i?"":i,a=t.useBgm,s=void 0!==a&&a,c=t.useTimeRange,u=void 0!==c&&c,l=t.useAtempo,d=void 0!==l&&l,f=t.atempo,p=void 0===f?1:f,h=t.hookBgm,g=void 0===h||h;return PA().then((function(t){var n=t?2:1,i=Object(Oa._getEnterOptionsSync)(),a=[i.scene||"",i.scene_note||"",i.sessionid||i.sessionId||"",e,n,r,o,w.default.appType+1e3,s,u,d,p,g].join(",");Reporter.reportKeyValue({key:"GameRecorder",value:a})}))},RA=["start","stop","pause","resume","abort","timeUpdate","error"].reduce((function(e,t){return e[t]={internal:Object(E.getEventManager)("GameRecorder-internal-"+t),external:Object(E.getEventManager)("GameRecorder-external-"+t)},e}),{}),jA=!1,NA=!1,MA=!1,LA=!1,BA=function(e){var t={101:{code:AA.error.GameRecorder_StartDurationInvalid,message:"GameRecorder.start:fail duration invalid"},103:{code:AA.error.GameRecorder_StartWhileAlreadyStartRecording,message:"GameRecorder.start:fail start while already start recording"},104:{code:AA.error.GameRecorder_StartWhilePaused,message:"GameRecorder.start:fail start while paused"},106:{code:AA.error.GameRecorder_StartBitRateInvalid,message:"GameRecorder.start:fail bitrate invalid"},107:{code:AA.error.GameRecorder_StartFPSInvalid,message:"GameRecorder.start:fail fps invalid"},108:{code:AA.error.GameRecorder_StartGOPInvalid,message:"GameRecorder.start:fail gop invalid"},201:{code:AA.error.GameRecorder_PauseWhileNotStartRecording,message:"GameRecorder.pause:fail pause while not start recording"},202:{code:AA.error.GameRecorder_PauseWhileAlreadyPaused,message:"GameRecorder.pause:fail pause while already paused"},301:{code:AA.error.GameRecorder_ResumeWhileNotStartRecording,message:"GameRecorder.resume:fail resume while not start recording"},302:{code:AA.error.GameRecorder_ResumeWhileRecording,message:"GameRecorder.resume:fail resume while recording"},401:{code:AA.error.GameRecorder_AbortWhileNotStartRecording,message:"GameRecorder.abort:fail abort while not start recording"},501:{code:AA.error.GameRecorder_StopWhileNotStartRecording,message:"GameRecorder.stop:fail stop while not start recording"},503:{code:AA.error.Global_FileStorageNotEnough,message:"GameRecorder.stop:fail file storage not enough"}};return t[e]?t[e]:[102,110,111,502,710,810].includes(e)?{code:AA.error.GameRecorder_InternalFailed,message:"GameRecorder:fail internal failed"}:{code:AA.error.GameRecorder_UnknownError,message:"GameRecorder:fail unknown error"}};w.default.onReady((function(){var e=Object(tt.getStableSystemInfo)(),t=e.version,n=e.system.split(" ")[1],r=m.IS_ANDROID&&-1===Object(A.versionCompare)(n,"5.0"),i=m.IS_IOS&&-1===Object(A.versionCompare)(t,"7.0.8");"7.0.5"===t||r||i||Object(O.invokeMethod)("isGameRecorderSupported",{success:function(e){jA=e.isFrameSupported,NA=e.isSoundSupported,MA=e.isVolumeSupported,LA=e.isAtempoSupported}}),Object(O.onMethod)("onGameRecorderStateChange",(function(e){var t=e.state;if(delete e.state,"stop"===t)RA[t].internal.emit(e),RA[t].external.emit({duration:Math.floor(e.duration/1e3)});else if("timeUpdate"===t)RA[t].internal.emit(e),RA[t].external.emit({currentTime:e.currentTime});else if("error"===t){var n=BA(e.errCode);RA[t].external.emit({error:n})}else RA[t].external.emit()}))}));var FA=null,UA=function(){function e(){Object(N.default)(this,e),RA.stop.internal.onMethod((function(e){FA=e.tempFilePath})),this._operatePromise=Promise.resolve()}return Object(oe.default)(e,[{key:"isFrameSupported",value:function(){return jA}},{key:"isSoundSupported",value:function(){return NA}},{key:"isVolumeSupported",value:function(){return MA}},{key:"isAtempoSupported",value:function(){return LA}},{key:"_operate",value:function(e,t){var n=this;return this._operatePromise=this._operatePromise.then((function(){return n.__operate(e,t)})).catch((function(){return n.__operate(e,t)})),this._operatePromise}},{key:"__operate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"start",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!jA){var n="GameRecorder."+e+":fail frame not supported";return Promise.reject({errMsg:n,error:{message:n,code:AA.error.GameRecorder_NotSupported}})}var r=!0;return new Promise((function(n,i){Object(O.invokeMethod)("operateGameRecorder",Object.assign({operationType:e,success:function(){"start"===e?DA(1,{hookBgm:t.hookBgm}):"stop"===e&&DA(2),n({errMsg:"GameRecorder."+e+":ok",error:{code:AA.error.OK,message:"GameRecorder."+e+":ok"}}),r=!1},fail:function(e){wxNativeConsole.error("[operateGameRecorder fail]",e);var t=BA(e.errCode);i({errMsg:t.message,error:t}),r=!1},complete:function(t){if(r)if(0!==t.errCode){var o=BA(t.errCode);o?i({errMsg:o.message,error:o}):(i({errMsg:"GameRecorder: "+e+" unknow error"}),console.error(t))}else n()}},t))}))}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fps,n=void 0===t?24:t,r=e.bitrate,i=void 0===r?1e3:r,o=e.gop,a=void 0===o?12:o,s=e.duration,c=void 0===s?7200:s,u=e.hookBgm,l=void 0===u||u;return c="number"==typeof c?Math.min(7200,Math.max(5,c)):7200,i="number"==typeof i?Math.min(3e3,Math.max(600,i)):1e3,"boolean"!=typeof l&&(l=!0),this._operate("start",{fps:n,bitrate:i,gop:a,duration:c,hookBgm:l,audioBitrate:128,width:w.default.screenWidth+4-w.default.screenWidth%4,height:w.default.screenHeight+4-w.default.screenHeight%4,cumulativeStamp:!0,notifyVideoKeyFrame:!0,timeUpdateInterval:30})}},{key:"stop",value:function(){return this._operate("stop")}},{key:"pause",value:function(){return this._operate("pause")}},{key:"resume",value:function(){return this._operate("resume")}},{key:"abort",value:function(){return this._operate("abort")}},{key:"on",value:function(e,t){RA[e].external.onMethod(t)}},{key:"off",value:function(e,t){RA[e].external.offMethod(t)}}]),e}(),WA=null,VA=function(){return FA},GA=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"getplaybackconfig")),HA=null;function zA(){return HA||(HA=GA({apiName:"webapi_getplaybackconfig",reqData:{appServiceType:w.default.appType}}).then((function(e){return e=JSON.parse(e.rawData)})))}var YA=2e3,qA=wxNativeConsole.createLogger("shareGameRecorder"),KA=null,JA=null;Object(ms._onBaseFrameShow)((function(){JA&&JA()}));var XA=function(e,t){var n=6e4*t,r=0;Array.isArray(e)||(i=[[0,n]],console.warn("GameRecorder:time range invalid "+JSON.stringify(e)+".It has been corrected to [[0, "+n+"]] under x"+t+" atempo"));var i=e.reduce((function(e,t,i){if(Array.isArray(t)&&2===t.length){var o=Object(Co.default)(t,2),a=o[0],s=o[1],c=Object(U.isInteger)(a)&&Object(U.isInteger)(s),u=a<s&&(!e[i-1]||a>=e[i-1][1]);c&&u&&r+s-a<=n&&(e.push([a,s]),r+=s-a)}return e}),[]);return 0===i.length&&(i=[[0,n]],console.warn("GameRecorder:time range invalid "+JSON.stringify(e)+".It has been corrected to [[0, "+n+"]] under x"+t+" atempo")),i},$A=function(e){return"number"==typeof e&&e>=0&&e<=1?Number(e.toFixed(2)):(console.warn("GameRecorder:volume invalid "+JSON.stringify(e)+".It has been corrected to 1"),1)},ZA=function(e){return"number"==typeof e&&[.3,.5,1,1.5,2,2.5,3].includes(e)?e:(console.warn("GameRecorder:atempo invalid "+JSON.stringify(e)+".It has been corrected to 1"),1)},QA=["left","top","height","paddingLeft","paddingRight","backgroundColor","borderColor","borderWidth","borderRadius"],eC=["fontSize","color"],tC=new WeakMap,nC=null,rC=function(){if(nC)return nC;var e=new y.default.Canvas;return e.width=1,e.height=1,nC=e.getContext("2d")},iC=function(e,t){var n=rC();return t&&(n.font=t+"px sans-serif"),n.measureText(e).width},oC=function(){function e(t){var n=this,r=t.style,i=void 0===r?{}:r,o=t.image,a=void 0===o?"":o,s=t.icon,c=void 0===s?"http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht7bQQ8PW9rXljICmxVsZbEwrJgsCiaWWGm6YibFoxibLwX5UvINt8owvFnBibrv2uDgqvw/0?wx_fmt=png":s,u=t.text,l=void 0===u?"分享游戏时刻":u,d=t.share,f=void 0===d?{}:d;Object(N.default)(this,e);var p={};tC.set(this,p),p.emitter=new Ps.default,i=Object.assign(Object(dT.getDefaultStyle)(),i);var h=Object.keys(i).filter((function(e){return QA.includes(e)})).reduce((function(e,t){return e[t]=i[t],e}),{});h.paddingLeft=h.paddingLeft||16,h.paddingLeft=Math.max(h.paddingLeft,16),h.paddingRight=h.paddingRight||16,h.paddingRight=Math.max(h.paddingRight,16),h.position="absolute",h.flexDirection="row",h.justifyContent="center",h.alignItems="center",h.backgroundColor=h.backgroundColor||"#09bb07",h.borderRadius=h.borderRadius||3;var g=Object.keys(i).filter((function(e){return eC.includes(e)})).reduce((function(e,t){return e[t]=i[t],e}),{});g.color=g.color||"#ffffff",g.fontSize=g.fontSize||17,g.lineHeight=24*g.fontSize/17,g.width=iC(l,g.fontSize),g.height=g.lineHeight,p.button=new Vs.Image({style:h,src:a,clickState:!0}),p.icon=new Vs.Image({style:{width:24,height:16,marginRight:i.iconMarginRight||8},src:c}),p.text=new Vs.Text({style:g,value:l,bubbleEvent:!0}),p.button.add(p.icon),p.button.add(p.text),Vs.webviewLayout.add(p.button),Object.defineProperty(this,"text",{configurable:!0,enumerable:!0,get:function(){return l},set:function(e){l=e,p.text.value=e,p.text.style.width=iC(l,p.text.style.fontSize)}}),Object.defineProperty(this,"image",{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,p.button.src=e}}),this.style={};var v={};QA.forEach((function(e){Object.defineProperty(n.style,e,{configurable:!0,enumerable:!0,get:function(){return v[e]},set:function(t){"height"===e?t=Math.max(t,40):"paddingLeft"!==e&&"paddingRight"!==e||(t=Math.max(t,16)),v[e]=t,p.button.style[e]=t}})})),eC.forEach((function(e){Object.defineProperty(n.style,e,{configurable:!0,enumerable:!0,get:function(){return v[e]},set:function(t){"fontSize"===e&&(t=Math.min(Math.max(t,17),22),p.text.style.width=iC(l,t),p.text.style.height=24*t/17,p.text.style.lineHeight=24*t/17),v[e]=t,p.text.style[e]=t}})})),Object.defineProperty(this.style,"iconMarginRight",{configurable:!0,enumerable:!0,get:function(){return v.iconMarginRight},set:function(e){v.iconMarginRight=e,p.icon.style.marginRight=e}}),this.share=f,p.button.on("click",(function(){DA(3),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,n=void 0===t?"":t,r=e.path,i=void 0===r?"":r,o=e.title,a=e.button,s=e.bgm,c=void 0===s?"":s,u=e.timeRange,l=void 0===u?[]:u,d=e.volume,f=void 0===d?1:d,p=e.atempo,h=void 0===p?1:p,g=e.audioMix,v=void 0!==g&&g,_=VA();if(!_){var y="GamaRecorder.share:fail no recorded video";return Promise.reject({errMsg:y,error:{code:AA.error.GameRecorder_NoVideo,message:y}})}var m=$A(f),b=ZA(h),w=XA(l,b);if(w.reduce((function(e,t){return e+t[1]-t[0]}),0)<YA*b){var E="GamaRecorder.share:fail time range too short.It should be longer than "+YA*b+"ms under x"+b+" atempo.";return Promise.reject({errMsg:E,error:{code:AA.error.GameRecorder_TimeRangeTooShort,message:E}})}return Promise.all([kA(o,a),zA()]).then((function(e){var t=Object(Co.default)(e,2),r=t[0],i=t[1],o={videoSrc:_,timeRange:w,bgmSrc:c,volume:m,atempo:b,shareOptions:[{id:1,name:"发送给好友",needExtUrl:!1}],audioMix:!!v};return qA.debug("shareAvailbleConfig",i),i.enable_share_to_haowan,i.enable_share_to_timeline&&o.shareOptions.push({id:3,name:"分享到朋友圈"}),new Promise((function(e,t){KA=new Promise((function(e){JA=e})),Object(O.invokeMethod)("editGameRecorderVideo",Object.assign(o,{success:function(t){DA(5,{shareTitle:r.shareTitle,sharePath:"?"+n,useBgm:!!c,useTimeRange:Array.isArray(l)&&l.length>0,useAtempo:[.3,.5,1.5,2,2.5,3].includes(h),atempo:h,audioMix:!!v}),e(Object.assign(t,r))},fail:function(n){if(804===n.errCode||803===n.errCode)return e();var r={0:{code:AA.error.OK,message:"GamaRecorder.share:ok"},801:{code:AA.error.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"},802:{code:AA.error.GameRecorder_InternalFailed,message:"GamaRecorder.share:fail internal failed"}};t({errMsg:n.errMsg.replace("editGameRecorderVideo","shareGameVideo"),error:r[n.errCode]||{code:AA.error.GameRecorder_UnknownError,message:"GamaRecorder.share:fail unknow error code "+n.errCode}})}}))}))})).then((function(e){return KA.then((function(){return e}))})).then((function(e){KA=null,JA=null;var t=i;if(void 0!==e){if(2===e.chosenId&&"string"==typeof e.extUrl)DA(7),Object(O.invokeMethod)("private_openUrl",{url:e.extUrl});else if(1===e.chosenId||0===e.chosenId){var r=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_VIDEO,query:n});DA(6,{shareTitle:e.shareTitle,sharePath:r}),Object(ma.shareVideoAppMessage)({filePath:e.videoPath,thumbFilePath:e.thumbPath,title:e.shareTitle,query:n,path:r,userPath:t}).then((function(){DA(8,{shareTitle:e.shareTitle,sharePath:e.path})}))}else if(3===e.chosenId){var o=Object(Xa.generateFunctionalPagePath)({pageType:ts.PAGE_TYPE.PLAY_PAGE_VIDEO,query:n});DA(9,{shareTitle:e.shareTitle,sharePath:o}),gs({filePath:e.videoPath,thumbFilePath:e.thumbPath,title:e.shareTitle,query:n,userPath:t}).then((function(){DA(10,{shareTitle:e.shareTitle,sharePath:o})}))}return{errMsg:"GamaRecorder.share:ok",error:{code:AA.error.OK,message:"GamaRecorder.share:ok"}}}})).catch((function(e){qA.error(e)}))}(n.share).catch((function(e){p.emitter.emit("tap",e),RA.error.external.emit(e)}))})),DA(4)}return Object(oe.default)(e,[{key:"onTap",value:function(e){tC.get(this).emitter.on("tap",e)}},{key:"offTap",value:function(e){tC.get(this).emitter.off("tap",e)}},{key:"show",value:function(){var e=tC.get(this);e.button.style.hidden&&(e.button.style.hidden=!1,DA(4))}},{key:"hide",value:function(){tC.get(this).button.style.hidden=!0}}]),e}(),aC=null,sC=Object(w_.promisify)(Object(ko.constructOperateWXData)(!1,"webapi_game_ad_report")),cC=Object(w_.promisify)(it.getNetworkType),uC=1,lC=2,dC=3,fC=1,pC=2,hC=3,gC=1,vC=2,_C=3,yC=null;function mC(e){return(yC?Promise.resolve(yC):kC().then((function(e){var t=e.info;return yC={session_id:e.sessionid||"",device_brand:t.brand||"",device_model:t.model||"",version:t.version||"",sdk_version:t.SDKVersion||"",system:t.system||"",screen_width:t.screenHeight||0,screen_height:t.screenWidth||0,appid:e.appid}}))).then((function(){return cC()})).then((function(t){var n=t.networkType,r=(Array.isArray(e)?e:[e]).map((function(e){var t=e.type,r=e.params;return r.network_type=n,Object(mt.default)({},t,r)}));return sC({apiName:"webapi_game_ad_report",reqData:{base_info:yC,data_list:r}}).catch((function(e){return Promise.reject(e)}))}))}var bC=n(32);function wC(e,t){return e[t]?e[t]*(e.scale||1):0}function OC(e){var t=Object(Pu.getPrivateThis)(this),n=e.load_type,r=e.open_time,i=e.cost_time,o=e.result,a=e.layout,s={load_type:n,ad_type:t.adType,open_time:r,cost_time:i,result:o,trace_id:t.trace_id};n===dC&&(s.serving_list=[],t.data.game_ad_list.forEach((function(e,t){s.serving_list.push({ad_pos_id:t+1,serving_id:e.serving_id||""})})));var c=function(e){var t={};if(e&&e.layoutBox){var n=e.layoutBox||{},r=e.style||{};return t.ad_x=Math.round(n.left||wC(r,"left")||0),t.ad_y=Math.round(n.top||wC(r,"top")||0),t.ad_w=Math.round(n.width||wC(r,"width")||0),t.ad_h=Math.round(n.height||wC(r,"height")||0),t}}(a);return c&&Object.assign(s,c),s}function EC(e){var t=Object(Pu.getPrivateThis)(this),n=[],r={type:"component_load",params:OC.call(this,{load_type:dC,open_time:t.exposure_time.s,cost_time:0,layout:e,result:0})};n.push(r),t.data.game_ad_list.forEach((function(e,r){n.push({type:"game_exposure",params:{ad_type:t.adType,ad_pos_id:r+1,trace_id:t.trace_id||"",serving_id:e.serving_id||"",exposure_time:t.exposure_time.s}})})),mC(n)}function SC(e){var t=e.event,n=void 0===t?{}:t,r=e.ad_pos_id,i=e.action_type,o=e.layout,a=e.serving_id,s=Object(Pu.getPrivateThis)(this),c=o.layoutBox||{},u={action_type:i,ad_x:c.left||0,ad_y:c.top||0,ad_w:c.width||0,ad_h:c.height||0,ad_type:s.adType,exposure_time:s.exposure_time.s||DC().s,stay_time:DC().ms-s.exposure_time.ms};return s.trace_id&&(u.trace_id=s.trace_id),a&&(u.serving_id=a),n&&(u.click_x=n.absoluteX||0,u.click_y=n.absoluteY||0),r&&(u.ad_pos_id=r),u}function TC(e){return function(e){Reporter.reportIDKeyDirectly({id:bC.default.reportId,key:e})}(e.key),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.key,n=void 0===t?1:t,r=e.error_detail,i=void 0===r?"":r,o=e.adUnitId,a=void 0===o?"":o,s=e.adType,c=void 0===s?1:s,u={};if(xC(i,"Object"))try{i=JSON.stringify(i)}catch(e){i=""}return kC().then((function(e){return u=e,IC()})).then((function(e){var t=e.networkType;return{type:"error",params:{key:n,error_detail:i,appid:u.appid,ad_type:c,ad_unit_id:a,session_id:u.sessionid,network_type:t}}}))}(e).then((function(e){return mC(e)}))}var IC=Object(w_.promisify)(it.getNetworkType),AC=bC.default.adTypeName,CC={screenWidth:0,screenHeight:0,platform:"",isIOS:!1,isAndroid:!1,sessionid:"",deviceOrientation:"",info:{},appid:"",sessionStartTime:DC(),sessionStayTime:0,maxGameCount:3,enterScene:0};function kC(){return new Promise((function(e){CC.screenWidth?(CC.sessionStayTime=DC().ms-CC.sessionStartTime.ms,e(CC)):w.default.onReady((function(){var t=Object(tt.getStaticSystemInfoSync)();CC.info=t||{},CC.screenWidth=t.screenWidth,CC.screenHeight=t.screenHeight,CC.platform=t.platform,CC.isIOS="ios"===CC.platform,CC.isAndroid="android"===CC.platform;var n=w.default.deviceOrientation||"";CC.deviceOrientation=n||(t.deviceOrientation||""),e(CC)}))}))}function xC(e,t){var n=Object.prototype.toString;return"Null"===t&&null===e||"Undefined"===t&&undefined===e||n.call(e).slice(8,-1)===t}function PC(e){var t=this,n=e.appid,r=e.adType,i=e.serving_id,o=Object(Pu.getPrivateThis)(this);kC().then((function(e){var a=e.appid+":"+e.sessionid+":"+i+":"+r;Object(O.invokeMethod)("navigateToMiniProgram",{appId:n,path:"",scene:1139,sourcetype:1,sceneNote:a,success:function(){},fail:function(e){TC.call(t,{key:bC.default.idkey.LAUNCH_APP_ERROR,adType:o.adType,adUnitId:o.adUnitId,error_detail:e})}})}))}function DC(){var e=new Date;return{s:parseInt(e.getTime()/1e3),ms:e.getTime()}}function RC(e,t,n,r){return"left"===t&&n<0?0:"left"===t&&n+r.width>e.screenWidth?e.screenWidth-r.width:"top"===t&&n<0?0:"top"===t&&n+r.height>e.screenHeight?e.screenHeight-r.height:n}function jC(e){var t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,i=e.absoluteEndY,o=e.pressInterval,a=!1;return Math.abs(i-n)<30&&Math.abs(r-t)<30&&o<300&&(a=!0),a}function NC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout((function(){t({message:"timeout trigger success"})}),e)}))}function MC(e){var t={};return e.errMsg&&(t.errMsg=e.errMsg),e.errCode&&(t.errCode=e.errCode),t}function LC(e,t,n){return e<t?t:e>n?n:e}w.default.onReady((function(){CC.sessionStartTime=DC(),CC.enterScene=w.default.appLaunchInfo&&w.default.appLaunchInfo.scene||0,CC.appid=w.default.accountInfo&&w.default.accountInfo.appId||"",CC.sessionid=w.default.appLaunchInfo.sessionid||w.default.appLaunchInfo.sessionId||""})),Object(ms._onShow)((function(e){CC.sessionid=e.sessionid||e.sessionId||""}));var BC={appType:1004,path:""};function FC(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(Pu.getPrivateThis)(this),r=t.map((function(e){var t=e.pre_load_param||{},n=JSON.parse(JSON.stringify(BC));return n.appId=e.appid,n.openRate=t.score||0,n})).filter((function(e){return 0!==e.openRate}));r.length&&kC().then((function(t){Object(O.invokeMethod)("batchPreloadMiniProgram",{openParams:{visitScene:t.enterScene,businessScene:2,innerScene:1139},preloadList:r,success:function(t){TC.call(e,{key:bC.default.idkey[AC[n.adType]+"_SUCCESS_FAIL"],adType:n.adType,adUnitId:n.adUnitId,error_detail:t})},fail:function(t){TC.call(e,{key:bC.default.idkey[AC[n.adType]+"_PRELOAD_FAIL"],adType:n.adType,adUnitId:n.adUnitId,error_detail:t})}})}))}var UC=new(function(){function e(){Object(N.default)(this,e),this.map=Object.keys(bC.default.adType).reduce((function(e,t){var n=bC.default.adType[t];return e[n]={total_open:0,total_click:0,ad_type:n},e}),{})}return Object(oe.default)(e,[{key:"openAdd",value:function(e){this.map[e].total_open+=1}},{key:"clickAdd",value:function(e){this.map[e].total_click+=1}}]),e}()),WC=Object(w_.promisify)(Object(ko.constructOperateWXData)(!1,"webapi_game_ad_load")),VC=bC.default.adTypeName,GC=function(){function e(t){var n=t.adUnitId,r=t.adType,i=t.maxGameCount;Object(N.default)(this,e),this.adUnitId=n,this.adType=r,this.maxGameCount=i,this.fetchPromise=null}return Object(oe.default)(e,[{key:"getFetchParams",value:function(){var e=this;return kC().then((function(t){return{place_id:e.adUnitId,context:{total_stay:t.sessionStayTime,enter_scene:t.enterScene,ad_type_stat_list:Object.keys(UC.map).map((function(e){return UC.map[e]}))},limit:e.maxGameCount||t.maxGameCount,ad_type:e.adType}}))}},{key:"fetch",value:function(){var e=this;if(this.fetchPromise)return this.fetchPromise;var t=new Date;return this.fetchPromise=this.getFetchParams().then((function(n){return WC({apiName:"webapi_game_ad_load",reqData:n}).catch((function(r){var i=new Date-t;if(i>bC.default.TIMEOUT){xC(r,"Object")&&(r.time=i,r.step=1),TC.call(e,{key:bC.default.idkey[VC[e.adType]+"_TIMEOUT"],adType:e.adType,adUnitId:e.adUnitId,error_detail:r});var o=new Date;return WC({apiName:"webapi_game_ad_load",reqData:n}).catch((function(t){var n=new Date-o;return xC(t,"Object")&&(t.firstTime=i,t.retryTime=n,t.step=2),TC.call(e,{key:bC.default.idkey[VC[e.adType]+"_TIMEOUT_RETRY_FAIL"],adType:e.adType,adUnitId:e.adUnitId,error_detail:t}),Promise.reject(t)})).then((function(t){return TC.call(e,{key:bC.default.idkey[VC[e.adType]+"_TIMEOUT_RETRY_SUCCESS"],adType:e.adType,adUnitId:e.adUnitId,error_detail:{firstTime:i,retryTime:new Date-o,step:3}}),t}))}return xC(r,"Object")&&(r.time=i,r.step=4),TC.call(e,{key:bC.default.idkey[VC[e.adType]+"_LOAD_ERROR"],adType:e.adType,adUnitId:e.adUnitId,error_detail:r}),Promise.reject(r)})).then((function(n){e.fetchPromise=null;var r=JSON.parse(n.rawData||"{}"),i=new Date-t;return i>bC.default.TIMEOUT&&(xC(n,"Object")&&(n.time=i,n.step=4),TC.call(e,{key:bC.default.idkey[VC[e.adType]+"_WXDATA_TIMEOUT"],adType:e.adType,adUnitId:e.adUnitId,error_detail:n})),0===r.errcode&&r.game_ad_list&&!r.game_ad_list.length?Promise.reject({errCode:r.errcode||1004}):0!==r.errcode?Promise.reject({errCode:r.errcode}):n}))})),this.fetchPromise}}]),e}(),HC=n(87),zC=JSON.stringify({bottomIcon:{position:"absolute",right:0,bottom:0,width:72,height:16},btnGreenBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#ffffff",fontSize:16,backgroundColor:"#07C160",fontWeight:500},btnGrayBg:{width:67,height:32,lineHeight:32,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#07C160",fontSize:16,backgroundColor:"rgba(0,0,0,0.05)",fontWeight:500},gameinfoIcon:{width:48,height:48,borderRadius:24,borderColor:"rgba(0, 0, 0, 0.1)",borderWidth:.5},gameNameTagWithoutBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:2,marginLeft:4,marginTop:3},gameNameTagWithBorder:{width:25,height:13,color:"#ffffff",backgroundColor:"#F97402",fontSize:10,lineHeight:13,textAlign:"center",borderRadius:1,position:"absolute",right:0,bottom:0,borderWidth:1,borderColor:"#ffffff"},feedback:{position:"absolute",left:6,top:6,width:46,height:16,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},feedbackTitle:{width:22,fontSize:10,height:16,lineHeight:16,color:"#ffffff",marginLeft:8},feedbackImg:{top:7,left:32,width:6,height:3,position:"absolute"},feedbackList:{hidden:!0,height:36,borderRadius:4,backgroundColor:"#4C4C4C",position:"absolute",left:6,top:28,flexDirection:"row",zIndex:2,alignItems:"center"},feedbackItem:{width:78,height:36,lineHeight:36,color:"#ffffff",fontSize:14,textAlign:"center"},feedbackItemSplit:{width:.5,height:24,backgroundColor:"rgba(0, 0, 0, 0.2)"}}),YC=Object.assign(JSON.parse(zC),{container:{width:350,height:300,position:"absoulte",top:0,left:0,overflow:"hidden",hidden:!0,zIndex:2},wrapper:{alignItems:"center",justifyContent:"center",landscape:{flexDirection:"row"}},mask:{backgroundColor:"#000000",opacity:.7,position:"absoulte",top:0,left:0},gameboxwrap:{flexDirection:"row"},gamebox:{width:327,overflow:"hidden",backgroundColor:"#ffffff",borderRadius:10,paddingLeft:16,paddingTop:22,paddingRight:16},title:{height:22,fontSize:17,lineHeight:22,fontWeight:"bold",marginBottom:8,color:"#000000",opacity:.9},closeIconBox:{width:36,height:36,alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.30)",borderColor:"rgba(255,255,255,0.30)",borderWidth:1,borderRadius:18},closeIconBoxVer:{alignSelf:"flex-end",marginBottom:8},closeIconBoxHor:{alignSelf:"flex-start",marginLeft:8},closeIcon:{width:12,height:12},gameinfo:{marginTop:16,flexDirection:"row"},gameinfoBox:{paddingLeft:8,width:263,landscape:{width:401}},gameinfoTitle:{flexDirection:"row"},gameName:{height:22,width:68,fontSize:17,color:"#000000",opacity:.9},gameDesc:{width:174,height:16,fontSize:14,marginTop:4,color:"#000000",opacity:.5},gameTagList:{marginTop:8,flexDirection:"row"},gameTagItem:{marginRight:8,width:36,height:20,backgroundColor:"#C8C8C8",lineHeight:20,textAlign:"center",borderRadius:3,fontSize:12,color:"#000000",opacity:.5,ios:{height:21}},gameFriendValue:{fontSize:14,color:"#000000",opacity:.3,width:180,height:20,lineHeight:20,textAlign:"right",position:"absolute",bottom:16,right:17},gameinfoBorder:{width:255,height:1,backgroundColor:"#000000",marginTop:16,opacity:.1,landscape:{width:393}},gameinfoBorderLast:{width:255,height:1,backgroundColor:"#000000",marginTop:16,opacity:0},close:{width:48,height:48,marginTop:32,borderRadius:24},gamepic:{width:292,height:114,marginTop:16,borderRadius:3,marginBottom:18,landscape:{width:433,height:167}},gameBtnText:{marginTop:16,marginBottom:32,width:184,height:40,lineHeight:40,borderRadius:3,backgroundColor:"#07C160",textAlign:"center",justifyContent:"center",alignItems:"center",marginLeft:0,marginRight:0,color:"#ffffff",fontSize:17,alignSelf:"center",fontWeight:500},emptyBlock:{width:433,height:16},portalBtn:{position:"absolute",right:16,top:8}}),qC='\n    {{? it.showFeedback !== false && it.feedbackList }}\n        <view id="feedback">\n            <text value="广告" id="feedbackTitle" bubbleEvent="true"></text>\n            <image src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png" id="feedbackImg" bubbleEvent="true"></image>\n        </view>\n\n        <view id="feedbackList">\n            {{~it.feedbackList:feedbackItem:index}}\n                <text id="feedbackItem__{{=index}}" class="feedbackItem" value="{{=feedbackItem.name}}"></text>\n\n                {{? index < it.feedbackList.length - 1 }}\n                    <view id="feedbackItemSplit"></view>\n                {{?}}\n            {{~}}\n        </view>\n    {{?}}\n';function KC(){var e=this,t=Object(Pu.getPrivateThis)(this),n=t.feedbackList;n&&(t.feedback.on("click",(function(e){jC(e)&&(n.style.hidden=!n.style.hidden,t.feedbackImg.src=n.style.hidden?"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrow.png":"https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190720/closearrowup.png")})),t.data.feedbackList.forEach((function(n,r){t["feedbackItem__"+r].on("click",(function(r){if(jC(r)){var i=t.adType===bC.default.adType.AD_TYPE_BANNER?t.container:t.gameboxwrap;mC({type:"game_click",params:SC.call(e,{event:r,action_type:n.actionType,layout:i})}),t.container.style.hidden=!0,t.feedbackList.style.hidden=!0,t.emitter.emit("close"),t.adType===bC.default.adType.AD_TYPE_PORTAL&&Vs.webviewLayout.remove(t.container)}}))})))}var JC='\n  <view id="container">\n    <view id="mask"></view>\n    <view id="wrapper">\n        {{? it.deviceOrientation === \'portrait\'}}\n            <view id="closeIconBox" class="closeIconBoxVer">\n                <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n            </view>\n        {{?}}\n        <view id="gameboxwrap">\n            <view id="gamebox">\n                <view id="gameAdList">\n                    {{~it.game_ad_list :game:index}}\n                        <view class="gameinfo" id="gameinfo__{{=index}}" bubble-event="true">\n                            <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n\n                            <view id="gameinfoBox" bubble-event="true">\n                                <view id="gameinfoTitle" bubble-event="true">\n                                    <text id="gameName__{{=index}}" class="gameName {{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n                                    {{? game.is_original_game }}\n                                        <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                                    {{?}}\n                                </view>\n\n                                {{? game.brief_intro}}\n                                    {{~game.brief_intro_lines :line:lineIndex}}\n                                        <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                                    {{~}}\n                                {{?}}\n\n                                \x3c!-- 竖屏 - 2个 or 3个游戏，展示2行描述，不展示标签 --\x3e\n                                {{? it.deviceOrientation !== \'portrait\' || (it.deviceOrientation === \'portrait\' && it.game_ad_list.length === 1)}}\n                                    <view id="gameTagList" bubble-event="true">\n                                        {{~game.tag_list :tag:tagIndex}}\n                                            <text id="gameTagItem" class="{{=game.tag_classlist[tagIndex]}}" value="{{=tag}}" bubble-event="true"></text>\n                                        {{~}}\n                                    </view>\n                                {{?}}\n\n                                \x3c!-- 竖屏多游戏或者横屏模式下才出现 --\x3e\n                                {{? it.game_ad_list.length > 1 || it.deviceOrientation !== \'portrait\' }}\n                                    <text id="btnGrayBg" class="portalBtn {{=game.btnClassName || \'\' }}" value="立即玩"  bubble-event="true"></text>\n                                {{?}}\n\n                                {{? index < it.game_ad_list.length - 1}}\n                                    <view class="gameinfoBorder" id="gameinfoBorder__{{=index}}"></view>\n                                {{?}}\n\n                                {{? index === it.game_ad_list.length - 1 && it.game_ad_list.length > 1}}\n                                    <view id="gameinfoBorderLast"></view>\n                                {{?}}\n                            </view>\n                        </view>\n                    {{~}}\n\n                    {{? it.game_ad_list.length === 1 && it.game_ad_list[0].banner_url }}\n                        <image id="gamepic" src="{{=it.game_ad_list[0].banner_url}}" bubble-event="true"></image>\n                    {{?}}\n\n                    {{? it.game_ad_list.length === 1 && !it.game_ad_list[0].banner_url && it.deviceOrientation !== \'portrait\'  }}\n                        <view id="emptyBlock"></view>\n                    {{?}}\n\n                    {{? it.game_ad_list.length === 1 && it.deviceOrientation === \'portrait\' }}\n                        <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n                    {{?}}\n                </view>\n\n                <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n                '+qC+'\n            </view>\n\n            {{? it.deviceOrientation !== \'portrait\'}}\n                <view id="closeIconBox" class="closeIconBoxHor">\n                    <image id="closeIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190713/close.png" bubbleEvent="true"></image>\n                </view>\n            {{?}}\n        </view>\n    </view>\n  </view>\n',XC=HC.default.template(JC);function $C(e,t){var n=this,r=Object(Pu.getPrivateThis)(this);if(jC(e)){UC.clickAdd(r.adType);var i=mC({type:"game_click",params:SC.call(this,{event:e,ad_pos_id:1,action_type:gC,layout:r.gameboxwrap,serving_id:t.serving_id||""})});Promise.race([i,NC(500)]).then((function(){PC.call(n,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})})).catch((function(){PC.call(n,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})}))}}function ZC(){var e=this,t=Object(Pu.getPrivateThis)(this);if(KC.call(this),t.closeIconBox.on("click",(function(n){jC(n)&&(mC({type:"game_click",params:SC.call(e,{event:n,action_type:vC,layout:t.gameboxwrap})}),t.container.style.hidden=!0,Vs.webviewLayout.remove(t.container),t.emitter.emit("close"))})),1===t.data.game_ad_list.length){var n=t.data.game_ad_list[0];t.gameAdList.on("click",(function(t){$C.call(e,t,n)}))}else t.data.game_ad_list.forEach((function(n,r){t["gameinfo__"+r].on("click",(function(t){$C.call(e,t,n)}))}))}function QC(e){var t=this,n=Object(Pu.getPrivateThis)(this);return n.data=e,n.data.dataBackTime=new Date,e.feedbackList=bC.default.feedbackList,kC().then((function(r){n.data.deviceOrientation=r.deviceOrientation,function(e,t,n){"landscape"===t.deviceOrientation&&(e.gamebox.width=465,e.gameDesc.width=308),e.container.width=t.screenWidth,e.container.height=t.screenHeight,e.mask.width=t.screenWidth,e.mask.height=t.screenHeight,e.wrapper.width=t.screenWidth,e.wrapper.height=t.screenHeight,e.closeIconBoxVer.marginRight=(t.screenWidth-e.gamebox.width)/2,n.deviceOrientation=t.deviceOrientation;var r=function(e,t){return"portrait"===e.deviceOrientation&&t.game_ad_list.length>1?{appname:144,desc:172}:"portrait"===e.deviceOrientation&&1===t.game_ad_list.length?{appname:214,desc:239}:"portrait"!==e.deviceOrientation?{appname:280,desc:308}:void 0}(t,n),i=r.appname,o=r.desc,a=n.game_ad_list.length;n.game_ad_list.forEach((function(n){if("portrait"!==t.deviceOrientation&&1===a&&(n.btnClassName="btnGreenBg"),n.appname){var r=Iy.default.textMetrics(n.appname,{maxWidth:i-5,maxLines:1,fontSize:e.gameName.fontSize})[0];n.appname=r.text,n.className="width_"+r.width,e[n.className]={width:r.width}}var s="portrait"===t.deviceOrientation&&a>1?2:1;if(n.brief_intro){var c=Iy.default.textMetrics(n.brief_intro,{maxWidth:o-5,maxLines:s,fontSize:e.gameDesc.fontSize});c.forEach((function(t){t.className="width_"+o,e[t.className]={width:o}})),n.brief_intro_lines=c}n.tag_classlist=[],n.tag_list&&n.tag_list.length&&n.tag_list.forEach((function(t,r){var i=Iy.default.getTextWidth(t,e.gameTagItem.fontSize)+12;n.tag_classlist[r]="width_"+i,e[n.tag_classlist[r]]={width:i}}))}));var s=1;("portrait"===t.deviceOrientation&&t.screenWidth<bC.default.designWidth||"portrait"!==t.deviceOrientation&&t.screenHeight<bC.default.designWidth)&&(s="portrait"===t.deviceOrientation?t.screenWidth/bC.default.designWidth:t.screenHeight/bC.default.designWidth),"portrait"!==t.deviceOrientation&&t.screenWidth-230<(e.gamebox.width+44)*s&&(s*=(t.screenWidth-230)/((e.gamebox.width+44)*s)),1!==s&&Object.keys(e).forEach((function(t){"container"!==t&&"mask"!==t&&"wrapper"!==t&&(e[t].scale=s)}))}(YC,r,e),JC=XC(e);var i=xu()(JC).root;return Pu.init.call(t,i,YC),Vs.webviewLayout.add(n.container),n.container||TC.call(t,{key:bC.default.idkey.PORTAL_RENDER_ERROR,adType:n.adType,adUnitId:n.adUnitId,error_detail:{msg:"Layout.add error"}}),ZC.call(t),n.container.ready()}))}var ek=new(function(){function e(){for(var t in Object(N.default)(this,e),this.map={},bC.default.adType)this.map[bC.default.adType[t]]={current:null}}return Object(oe.default)(e,[{key:"show",value:function(e,t){this.map[e].current=t}},{key:"hide",value:function(e,t){this.map[e].current===t&&(this.map[e].current=null)}}]),e}());function tk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function nk(e,t){mC({type:"component_load",params:OC.call(this,{load_type:uC,open_time:e.s,cost_time:DC().ms-e.ms,result:t})})}function rk(){var e=this,t=Object(Pu.getPrivateThis)(this);function n(e){var n=this;e=e||{};var r=JSON.parse(e.rawData||"{}");t.trace_id=r.trace_id,nk.call(this,t.open_time,parseInt(r.errcode));var i=DC();return QC.call(this,r).then((function(){t.hasData=!0,t.emitter.emit("load"),mC({type:"component_load",params:OC.call(n,{load_type:lC,open_time:i.s,layout:t.gameboxwrap,cost_time:DC().ms-i.ms,result:0})}),t.emitter.emit("ready")}))}return t.open_time=DC(),t.fetchPromise=t.proxy.fetch().then((function(t){return n.call(e,t)})).catch((function(n){return t.fetchPromise=null,nk.call(e,t.open_time,parseInt(n.errCode||n.err_code||-1)),Promise.reject(n)})),t.fetchPromise}function ik(){var e=Object(Pu.getPrivateThis)(this);e.isShowed=!1,e.hasData=!1,e.exposure_time=DC(),e.open_time=DC(),e.trace_id="",e.fetchPromise=null,e.showPromise=null,ek.hide(e.adType,e)}function ok(){var e=Object(Pu.getPrivateThis)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),ek.hide(e.adType,e),e.container&&Vs.webviewLayout.remove(e.container)}function ak(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.destroyPromise||(t.destroyPromise=new Promise((function(n){t.fetchPromise?t.fetchPromise.then((function(){ok.call(e),n()})).catch((function(){ok.call(e),n()})):(ok.call(e),n())}))),t.destroyPromise}var sk=function(e){Object(M.default)(n,e);var t=tk(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.default)(this,n),e=t.call(this);var i=r.adUnitId;if(!i)throw new j.ThirdScriptError("[GamePortal]:"+bC.default.ERRMSG.NO_ADUNITID_WARN);e.isDestroyed=!1;var o=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return o.adUnitId=i||"",o.adType=pC,o.emitter=new Ps.default,o.proxy=new GC({adUnitId:i,adType:o.adType}),o.destroyPromise=null,o.isReady=!1,ik.call(Object(Cu.default)(e)),o.emitter.on("ready",(function(){return o.isReady=!0})),o.emitter.on("close",(function(){ik.call(Object(Cu.default)(e)),e.load()})),e.load(),e}return Object(oe.default)(n,[{key:"load",value:function(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):t.isShowed?Promise.reject({errMsg:"can't invoke load() while GamePortal is showed"}):t.data&&(new Date).toDateString()!==t.data.dataBackTime.toDateString()?(t.container&&Vs.webviewLayout.remove(t.container),TC.call(this,{key:bC.default.idkey.PORTAL_DATA_INVALID,adType:t.adType,adUnitId:t.adUnitId,error_detail:{dataBackTime:t.data.dataBackTime.getTime()}}),rk.call(this).catch((function(n){return TC.call(e,{key:bC.default.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"load"}}),t.emitter.emit("_error",MC(n)),Promise.reject(n)})).then((function(n){return TC.call(e,{key:bC.default.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"load"}}),n}))):t.fetchPromise?t.fetchPromise:rk.call(this).catch((function(e){return t.emitter.emit("_error",MC(e)),Promise.reject(e)}))}},{key:"offClose",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("close",e)}},{key:"offError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"offLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("close",e)}},{key:"onError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"onLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"show",value:function(){var e=this;if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var t=Object(Pu.getPrivateThis)(this),n=ek.map[t.adType].current;return n&&n!==t?Promise.reject({errMsg:bC.default.ERRMSG.DUPLICATEWARN}):(ek.show(t.adType,t),t.showPromise?t.showPromise:t.hasData?t.data&&(new Date).toDateString()!==t.data.dataBackTime.toDateString()?(t.container&&Vs.webviewLayout.remove(t.container),TC.call(this,{key:bC.default.idkey.PORTAL_DATA_INVALID,adType:t.adType,adUnitId:t.adUnitId,error_detail:{dataBackTime:t.data.dataBackTime.getTime()}}),rk.call(this).catch((function(n){return t.emitter.emit("_error",MC(n)),ek.hide(t.adType,t),TC.call(e,{key:bC.default.idkey.PORTAL_DATA_INVALID_RETRY_FAIL,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"show"}}),Promise.reject(n)})).then((function(){return TC.call(e,{key:bC.default.idkey.PORTAL_DATA_INVALID_RETRY_SUCCESS,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"show"}}),t.container.style.hidden=!1,t.showPromise=t.container.nextLayout().then((function(){t.isShowed=!0,t.exposure_time=DC(),EC.call(e,t.gameboxwrap),UC.openAdd(t.adType),FC.call(e,t.data.game_ad_list)})),t.showPromise}))):(t.container.style.hidden=!1,t.showPromise=t.container.nextLayout().then((function(){t.isShowed=!0,t.exposure_time=DC(),EC.call(e,t.gameboxwrap),UC.openAdd(t.adType),FC.call(e,t.data.game_ad_list)})),t.showPromise):(ek.hide(t.adType,t),Promise.reject({errMsg:bC.default.ERRMSG.NODATA})))}},{key:"destroy",value:function(){return ak.call(this)}}]),n}(Pu.Component),ck='\n    <view id="container">\n        <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n\n        <view id="gameinfoBox" bubble-event="true">\n            <view id="gameinfoTitle" bubble-event="true">\n                <text id="gameName" class="{{=it.game.className}}" value="{{=it.game.appname}}" bubble-event="true"></text>\n                {{? it.game.is_original_game }}\n                    <text id="gameNameTagWithoutBorder" value="创意" bubble-event="true"></text>\n                {{?}}\n            </view>\n            \x3c!-- 换行 --\x3e\n            {{? it.game.brief_intro}}\n                {{~it.game.brief_intro_lines :line:lineIndex}}\n                    <text id="gameDesc" value="{{=line.text}}" class="{{=line.className}}" bubble-event="true"></text>\n                {{~}}\n            {{?}}\n        </view>\n        <text id="btnGreenBg" value="立即玩"  bubble-event="true"></text>\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        '+qC+"\n    </view>\n",uk={container:{width:343,height:108,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,zIndex:1,flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:16},gamebox:{},gameinfoBox:{paddingLeft:8},gameinfoTitle:{flexDirection:"row"},gameName:{height:22,overflow:"visible",width:68,fontSize:17,color:"#000000",opacity:.9},gameDesc:{width:190,height:17,fontSize:14,marginTop:3,color:"#000000",opacity:.5,overflow:"hidden"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.3,width:177,marginTop:5,height:14}};function lk(e,t,n){n.game=n.game_ad_list[0],n.game_ad_list.forEach((function(t){if(t.appname){var n=Iy.default.textMetrics(t.appname,{maxWidth:145,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text,t.className="width_"+n.width,e[t.className]={width:n.width}}if(t.brief_intro){var r=Iy.default.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-10,maxLines:2,fontSize:e.gameDesc.fontSize});r.forEach((function(t){t.className="width_"+e.gameDesc.width,e[t.className]={width:e.gameDesc.width}})),t.brief_intro_lines=r,2===r.length&&(e.container.height=120)}}))}uk=Object.assign(JSON.parse(zC),uk);var dk=HC.default.template(ck),fk='\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n\n                <text id="gameName" class="{{=game.className}}" value="{{=game.appname}}" bubble-event="true"></text>\n\n                {{? game.brief_intro }}\n                    <text class="gameFriendValue" value="{{=game.brief_intro}}" id="gameFriendValue__{{=index}}" bubble-event="true"></text>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        '+qC+"\n    </view>\n",pk={container:{width:343,position:"absoulte",overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:18,paddingRight:18,paddingTop:12,paddingBottom:20,flexDirection:"row",justifyContent:"center",zIndex:1},gameItem:{width:167,alignItems:"center",flex:1},gameIconBox:{width:53,heigth:48,overflow:"visible"},gameName:{height:20,width:105,fontSize:14,marginTop:6,textAlign:"center"},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:105,height:15,textAlign:"center"}},hk=HC.default.template(fk);function gk(e,t,n){e.container.height=n.game_ad_list.find((function(e){return e.brief_intro}))?120:102,2===n.game_ad_list.length&&(e.gameFriendValue.width=130,e.gameName.width=130),n.game_ad_list.forEach((function(t){if(t.appname){var n=Iy.default.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,2).join("丨"),t.brief_intro){var r=Iy.default.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=r.text}}))}pk=Object.assign(JSON.parse(zC),pk);var vk='\n    <view id="container">\n        {{~it.game_ad_list :game:index}}\n            <view class="gameItem" id="gameinfo__{{=index}}">\n                <view id="gameIconBox" bubble-event="true">\n                    <image id="gameinfoIcon" src="{{=game.icon_url}}" bubble-event="true"></image>\n                    {{? game.is_original_game }}\n                        <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                <view id="gameinfoBox" bubble-event="true">\n                    <text id="gameName" value="{{=game.appname}}" bubble-event="true"></text>\n\n                    {{? game.brief_intro }}\n                        <text id="gameFriendValue" value="{{=game.brief_intro}}" bubble-event="true"></text>\n                    {{?}}\n                </view>\n                {{? index < it.game_ad_list.length - 1}}\n                    <view id="gameItemRightBorder"></view>\n                {{?}}\n            </view>\n        {{~}}\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        '+qC+"\n    </view>\n",_k={container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,flexDirection:"row",alignItems:"center",zIndex:1},gameItem:{width:167,flex:1,flexDirection:"row",alignItems:"center"},gameItemRightBorder:{width:1,backgroundColor:"#e5e5e5",height:70},gameIconBox:{width:53,heigth:48,marginLeft:16},gameinfoBox:{paddingLeft:4,width:95},gameName:{height:20,width:88,fontSize:14},gameFriendValue:{fontSize:12,color:"#000000",opacity:.5,width:88,marginTop:0,height:15,textAlign:"left"}};_k=Object.assign(JSON.parse(zC),_k);var yk=HC.default.template(vk);function mk(e,t,n){e.container.width=167*n.game_ad_list.length,n.game_ad_list.forEach((function(t){if(t.appname){var n=Iy.default.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,1).join("丨"),t.brief_intro){var r=Iy.default.textMetrics(t.brief_intro,{maxWidth:e.gameFriendValue.width-5,maxLines:1,fontSize:e.gameFriendValue.fontSize})[0];t.brief_intro=r.text}}))}var bk='\n    <view id="container">\n        <view id="gameIconBox" bubble-event="true">\n            <image id="gameinfoIcon" src="{{=it.game.icon_url}}" bubble-event="true"></image>\n            {{? it.game.is_original_game }}\n                <text id="gameNameTagWithBorder" value="创意" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <view id="gameinfoBox" bubble-event="true">\n            <view id="gameinfoTitle" bubble-event="true">\n                <text id="gameName" class="{{=it.game.className }}" value="{{=it.game.appname}}" bubble-event="true"></text>\n            </view>\n            {{? it.game.brief_intro}}\n                <text id="gameDesc" value="{{=it.game.brief_intro}}" bubble-event="true"></text>\n            {{?}}\n        </view>\n        <text id="gameBtnText" value="立即玩" bubble-event="true"></text>\n        <image id="bottomIcon" src="https://res.wx.qq.com/wechatgame/product/webpack/userupload/20190705/bottomicon.png"></image>\n        '+qC+"\n    </view>\n",wk={container:{width:334,height:70,position:"absoulte",bottom:31,overflow:"hidden",hidden:!0,backgroundColor:"#ffffff",borderRadius:4,paddingLeft:16,paddingRight:16,flexDirection:"row",alignItems:"center",zIndex:1},gameIconBox:{width:53,heigth:48},gameinfoBox:{paddingLeft:4},gameinfoTitle:{flexDirection:"row",height:17},gameName:{height:17,width:170,fontSize:14},gameDesc:{width:180,height:14,fontSize:12,marginTop:4,color:"#000000",opacity:.5,overflow:"hidden"},gameBtnText:{width:67,height:28,lineHeight:28,borderRadius:3,textAlign:"center",justifyContent:"center",alignItems:"center",color:"#06AE56",fontSize:17,backgroundColor:"#f2f2f2"}};wk=Object.assign(JSON.parse(zC),wk);var Ok=HC.default.template(bk);function Ek(e,t,n){n.game=n.game_ad_list[0],n.game_ad_list.forEach((function(t){if(t.appname){var n=Iy.default.textMetrics(t.appname,{maxWidth:e.gameName.width-5,maxLines:1,fontSize:e.gameName.fontSize})[0];t.appname=n.text}if(t.brief_intro=t.tag_list.slice(0,3).join("丨"),t.brief_intro){var r=Iy.default.textMetrics(t.brief_intro,{maxWidth:e.gameDesc.width-5,maxLines:1,fontSize:e.gameDesc.fontSize})[0];t.brief_intro=r.text}}))}var Sk=n(92);function Tk(e,t){var n=this,r=Object(Pu.getPrivateThis)(this);if(jC(e)){var i=mC({type:"game_click",params:SC.call(this,{event:e,ad_pos_id:1,action_type:gC,layout:r.container,serving_id:t.serving_id||""})});UC.clickAdd(r.adType),$i.nativeConsole.log("clickReportBeforeNavigateToMiniProgram_"+t.appid+"_"+t.serving_id),Promise.race([i,NC(500)]).then((function(){PC.call(n,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})})).catch((function(){PC.call(n,{appid:t.appid,adType:r.adType,serving_id:t.serving_id||""})}))}}function Ik(){var e=this,t=Object(Pu.getPrivateThis)(this),n=t.data.game;KC.call(this),1===t.data.game_ad_list.length?t.container.on("click",(function(t){Tk.call(e,t,n)})):t.data.game_ad_list.forEach((function(n,r){t["gameinfo__"+r].on("click",(function(t){Tk.call(e,t,n)}))}))}function Ak(e,t){var n=Object(Pu.getPrivateThis)(this);n.globalScale=1;var r=1;e.screenWidth<bC.default.designWidth&&(r=e.screenWidth/bC.default.designWidth,n.globalScale=r,Object.keys(t).forEach((function(e){t[e].scale=r})));var i={width:t.container.width*r,height:t.container.height*r},o=(e.screenHeight-i.height-31)/r,a=(e.screenWidth-i.width)/2/r,s=n.devStyle;s.left&&(a=RC(e,"left",s.left,i)/r),s.top&&(o=RC(e,"top",s.top,i)/r),t.container.top=o,t.container.left=a}function Ck(e){var t=this,n=Object(Pu.getPrivateThis)(this);return n.data=e,n.data.dataBackTime=new Date,e.feedbackList=bC.default.feedbackList,kC().then((function(r){var i=function(e,t){var n=t.game_ad_list||[];return"portrait"===e.deviceOrientation?1===n.length?{template:ck,style:uk,tplFn:dk,styleFilter:lk}:{template:fk,style:pk,tplFn:hk,styleFilter:gk}:1===n.length?{template:bk,style:wk,tplFn:Ok,styleFilter:Ek}:{template:vk,style:_k,tplFn:yk,styleFilter:mk}}(r,e),o=i.template,a=i.style,s=i.tplFn;i.styleFilter.call(t,a,r,e),Ak.call(t,r,a),o=s(n.data);var c=Sk(o).root;return Pu.init.call(t,c,a),Vs.webviewLayout.add(n.container),n.container||TC.call(t,{key:bC.default.idkey.BANNER_RENDER_ERROR,adType:n.adType,adUnitId:n.adUnitId,error_detail:{msg:"Layout.add error"}}),Ik.call(t),n.container.nextLayout()}))}function kk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function xk(e,t){mC({type:"component_load",params:OC.call(this,{load_type:uC,open_time:e.s,cost_time:DC().ms-e.ms,result:t})})}function Pk(){var e=Object(Pu.getPrivateThis)(this),t=e.container.style,n=e.globalScale||1;e.devStyle.left=t.left,e.devStyle.top=t.top,this.style.width=Math.round(t.width*n),this.style.height=Math.round(t.height*n),e.emitter.emit("resize",{width:Math.round(t.width*n),height:Math.round(t.height*n),left:Math.round(t.left*n),top:Math.round(t.top*n)})}function Dk(e){var t=this,n=Object(Pu.getPrivateThis)(this);return Ck.call(this,e).then((function(){Pk.call(t),setTimeout((function(){n.emitter.emit("ready")}),0)}))}var Rk=function(){var e=Object(Pu.getPrivateThis)(this);return new Promise((function(t){e.isReady?t():e.emitter.on("ready",t)}))};function jk(){var e=Object(Pu.getPrivateThis)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),ek.hide(e.adType,e),e.container&&Vs.webviewLayout.remove(e.container)}function Nk(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.destroyPromise||(t.destroyPromise=new Promise((function(n){t.fetchPromise?t.fetchPromise.then((function(){jk.call(e),n()})).catch((function(){jk.call(e),n()})):(jk.call(e),n())}))),t.destroyPromise}function Mk(){var e=this,t=Object(Pu.getPrivateThis)(this);function n(e){var n=this;t.emitter.emit("load"),e=e||{};var r=JSON.parse(e.rawData||"{}");t.trace_id=r.trace_id,xk.call(this,t.open_time,parseInt(r.err_code||r.errcode||r.errCode||0));var i=DC();return Dk.call(this,r).then((function(){t.hasData=!0,mC({type:"component_load",params:OC.call(n,{load_type:lC,open_time:i.s,layout:t.container,cost_time:DC().ms-i.ms,result:0})})}))}return t.open_time=DC(),t.fetchPromise=t.proxy.fetch().then((function(t){if(!e.isDestroyed)return n.call(e,t)})).catch((function(n){return xk.call(e,t.open_time,parseInt(n.errCode||n.err_code||-1)),Promise.reject(n)})),t.fetchPromise}function Lk(e,t){var n=this;return kC().then((function(r){var i=Object(Pu.getPrivateThis)(n),o={width:i.container.style.width*i.globalScale||1,height:i.container.style.height*i.globalScale||1};return RC(r,e,t,o)/(i.globalScale||1)}))}var Bk=function(e){Object(M.default)(n,e);var t=kk(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.default)(this,n),e=t.call(this);var i=r.adUnitId,o=r.style,a=void 0===o?{left:0,top:0}:o;if(!i)throw new j.ThirdScriptError("[GameBanner]:"+bC.default.ERRMSG.NO_ADUNITID_WARN);a.left||(a.left=0),a.top||(a.top=0),e.isDestroyed=!1,e.style={width:0,height:0};var s=Object(Pu.getPrivateThis)(Object(Cu.default)(e));return s.emitter=new Ps.default,s.adType=fC,s.proxy=new GC({adUnitId:i,adType:s.adType}),s.destroyPromise=null,s.isShowed=!1,s.hasData=!1,s.trace_id="",s.globalScale=1,s.devStyle=a,Object.keys(a).forEach((function(t){Object.defineProperty(e.style,t,{configurable:!0,enumerable:!0,get:function(){return Math.round(s.devStyle[t]*s.globalScale)},set:function(n){e.isDestroyed||n!==s.devStyle[t]&&Rk.call(Object(Cu.default)(e)).then((function(){Lk.call(Object(Cu.default)(e),t,n).then((function(n){n!==s.devStyle[t]&&(s.devStyle[t]=n,Object.assign(s.container.style,{left:s.devStyle.left,top:s.devStyle.top}),Pk.call(Object(Cu.default)(e)))}))}))}})})),s.isReady=!1,s.emitter.on("ready",(function(){return s.isReady=!0})),s.emitter.on("close",(function(){s.isShowed=!1,ek.hide(s.adType,s)})),Mk.call(Object(Cu.default)(e)).catch((function(e){s.emitter.emit("_error",MC(e))})),e}return Object(oe.default)(n,[{key:"offClose",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("close",e)}},{key:"offError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"offLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"onError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"onLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"show",value:function(){var e=this;if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var t=Object(Pu.getPrivateThis)(this),n=ek.map[t.adType].current;return n&&n!==t?Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"}):(ek.show(t.adType,t),t.isShowed?Promise.resolve():(t.isShowed=!0,t.data&&(new Date).toDateString()!==t.data.dataBackTime.toDateString()&&(t.container&&Vs.webviewLayout.remove(t.container),TC.call(this,{key:bC.default.idkey.BANNER_DATA_INVALID,adType:t.adType,adUnitId:t.adUnitId,error_detail:{dataBackTime:t.data.dataBackTime.getTime()}}),Mk.call(this).catch((function(e){ek.hide(t.adType,t),t.emitter.emit("_error",MC(e))}))),t.fetchPromise.then((function(){return t.container.style.hidden=!1,t.exposure_time=DC(),EC.call(e,t.container),UC.openAdd(t.adType),FC.call(e,t.data.game_ad_list),t.container.nextLayout()})).catch((function(e){return ek.hide(t.adType,t),Promise.reject(e)}))))}},{key:"destroy",value:function(){return Nk.call(this)}},{key:"hide",value:function(){var e=this;if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var t=Object(Pu.getPrivateThis)(this);return t.isShowed?(t.isShowed=!1,Rk.call(this).then((function(){return t.container.style.hidden=!0,t.container.nextLayout().then((function(){ek.hide(t.adType,t),mC({type:"game_click",params:SC.call(e,{action_type:_C,layout:t.container})})}))}))):Promise.resolve()}},{key:"onResize",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("resize",e)}}]),n}(Pu.Component);style=JSON.parse(JSON.stringify({iconcontainer:{width:700,height:1e3},gameIconBoxContainer:{width:72,height:90,alignItems:"center",position:"absolute",hidden:!0},gameIcon:{marginTop:8},gameName:{fontSize:12,height:20,width:72,textAlign:"center",marginTop:4}}));var Fk='\n    <view>\n        {{~it.game_ad_list :game:index}}\n            <view id="gameIconBox{{= index}}" class="gameIconBoxContainer" bubble-event="true">\n                <image id="gameIcon{{= index}}" class="gameIcon" src="{{= game.icon_url}}" bubble-event="true"></image>\n                <text id="gameName{{= index}}" class="gameName" value="{{= game.appname}}" bubble-event="true"></text>\n            </view>\n        {{~}}\n    </view>\n',Uk=HC.default.template(Fk);function Wk(e,t,n){var r=this,i=Object(Pu.getPrivateThis)(this);if(jC(e)){var o=mC({type:"game_click",params:SC.call(this,{event:e,ad_pos_id:n+1,action_type:gC,layout:i.gameIconBox0,serving_id:t.serving_id||""})});UC.clickAdd(i.adType),Promise.race([o,NC(500)]).then((function(){PC.call(r,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})})).catch((function(){PC.call(r,{appid:t.appid,adType:i.adType,serving_id:t.serving_id||""})}))}}function Vk(){var e=this,t=Object(Pu.getPrivateThis)(this);t.data.game_ad_list.forEach((function(n,r){t["gameIconBox"+r].on("click",(function(t){Wk.call(e,t,n,r)}))}))}function Gk(e,t){var n=this,r=Object(Pu.getPrivateThis)(this);return r.data=e,r.data.dataBackTime=new Date,kC().then((function(i){r.data.deviceOrientation=i.deviceOrientation,function(e,t,n,r){var i=n.game_ad_list||[];r.forEach((function(t,n){var r={};e["gameIconBox"+n]=r,r.left=t.left,r.top=t.top;var o={};e["gameIcon"+n]=o;var a=LC(t.size,32,64),s=LC(t.borderWidth,0,10);o.width=a,o.height=a,o.borderColor=t.borderColor,o.borderWidth=s,o.borderRadius=o.width/2;var c={};if(e["gameName"+n]=c,c.color=t.color,c.hidden=t.appNameHidden,r.height=t.appNameHidden?64:90,i[n]&&i[n].appname){var u=Iy.default.textMetrics(i[n].appname,{maxWidth:e.gameName.width,maxLines:1,fontSize:e.gameName.fontSize})[0];i[n].appname=u.text}}))}(style,0,e,t),Fk=Uk(e);for(var o=xu()(Fk).root,a=0;a<n.icons.length;a++)r["gameIconBox"+a]&&Vs.webviewLayout.remove(r["gameIconBox"+a]);for(var s=0;s<o.children.length;s++)Pu.init.call(n,o.children[s],style),Vs.webviewLayout.add(r["gameIconBox"+s]);Vk.call(n);var c=Object(Ue.default)(Array(e.game_ad_list.length)).map((function(e,t){return r["gameIconBox"+t].ready()}));return Promise.all(c)}))}function Hk(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.default)(e);if(t){var i=Object(B.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(L.default)(this,n)}}function zk(e,t){mC({type:"component_load",params:OC.call(this,{load_type:uC,open_time:e.s,cost_time:DC().ms-e.ms,result:t})})}function Yk(){Object(Pu.getPrivateThis)(this).emitter.emit("resize",this.icons.slice(0,this.iconCount))}function qk(){var e=this,t=Object(Pu.getPrivateThis)(this);function n(e){var n=this;t.emitter.emit("load"),e=e||{};var r=JSON.parse(e.rawData||"{}");this.iconCount=r.game_ad_list.length,t.trace_id=r.trace_id,zk.call(this,t.open_time,parseInt(r.err_code||r.errcode||r.errCode||0));var i=DC();return Gk.call(this,r,t.icons).then((function(){Yk.call(n),setTimeout((function(){t.emitter.emit("ready")}),0),mC({type:"component_load",params:OC.call(n,{load_type:lC,open_time:i.s,layout:t.gameIconBox0,cost_time:DC().ms-i.ms,result:0})})}))}return t.open_time=DC(),t.fetchPromise=t.proxy.fetch().then((function(t){if(!e.isDestroyed)return n.call(e,t)})).catch((function(n){return t.fetchPromise=null,zk.call(e,t.open_time,parseInt(n.errCode||n.err_code||-1)),Promise.reject(n)})),t.fetchPromise}var Kk=function(){var e=Object(Pu.getPrivateThis)(this);return new Promise((function(t){e.isReady?t():e.emitter.on("ready",t)}))};function Jk(){var e=Object(Pu.getPrivateThis)(this);this.isDestroyed=!0,e.emitter.off("_error"),e.emitter.off("load"),ek.hide(e.adType,e),Xk.call(this).forEach((function(e){return e&&Vs.webviewLayout.remove(e)}))}function Xk(){for(var e=Object(Pu.getPrivateThis)(this),t=[],n=0;n<this.iconCount;n++)t.push(e["gameIconBox"+n]);return t}function $k(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.destroyPromise||(t.destroyPromise=new Promise((function(n){t.fetchPromise?t.fetchPromise.then((function(){Jk.call(e),n()})).catch((function(){Jk.call(e),n()})):(Jk.call(e),n())}))),t.destroyPromise}function Zk(){for(var e=this,t=Object(Pu.getPrivateThis)(this),n=function(n){e.icons[n]={},Object.keys(t.icons[n]).forEach((function(r){Object.defineProperty(e.icons[n],r,{configurable:!0,enumerable:!0,get:function(){return"width"!==r&&"height"!==r||!t["gameIconBox"+n]?t.icons[n][r]:t["gameIconBox"+n].style[r]},set:function(i){if(!e.isDestroyed){if("width"===r||"height"===r)return console.error("组件的宽高不可设置");if(i!==t.icons[n][r]){var o=t["gameIconBox"+n],a=t["gameIcon"+n],s=t["gameName"+n];if(o){var c=i;Kk.call(e).then((function(){"left"===r||"top"===r?o.style[r]=c:"size"===r?(c=LC(c,32,64),a.style.width=a.style.height=c):"borderColor"===r?a.style[r]=c:"borderWidth"===r?(c=LC(c,0,10),a.style[r]=c):"color"===r?s.style.color=c:"appNameHidden"===r&&(s.style.hidden=c,o.style.height=c?64:84),t.icons[n][r]=c,Yk.call(e)}))}}}}})}))},r=0;r<t.count;r++)n(r)}var Qk=function(e){Object(M.default)(n,e);var t=Hk(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(N.default)(this,n),e=t.call(this);var i=r.adUnitId,o=r.count,a=r.style;if(!i)throw new j.ThirdScriptError("[GameIcon]:"+bC.default.ERRMSG.NO_ADUNITID_WARN);if(!xC(o,"Number")||o<1||o>9)throw new j.ThirdScriptError("[GameIcon]: count字段必须是1-9的数字");if(a&&(!xC(a,"Array")||a.find((function(e){return!xC(e,"Object")}))))throw new j.ThirdScriptError("[GameIcon]: style必须是由对象组成的数组");a||(a=[]);var s=Object(Pu.getPrivateThis)(Object(Cu.default)(e));e.isDestroyed=!1,e.iconCount=0,e.icons=[],s.count=o,s.icons=[];for(var c=10,u=0,l=0;l<o;l++)l>0&&l%3==0&&(c=10,u+=84),s.icons[l]=Object.assign({left:c,top:u,appNameHidden:!1,color:"#000000",size:48,borderWidth:0,borderColor:"#FFF8D5",width:64,height:84},a[l]||{}),c+=82;return s.emitter=new Ps.default,s.adType=hC,s.proxy=new GC({adUnitId:i,adType:s.adType,maxGameCount:o}),s.destroyPromise=null,s.isShowed=!1,s.trace_id="",s.isReady=!1,s.emitter.on("ready",(function(){return s.isReady=!0})),Zk.call(Object(Cu.default)(e)),qk.call(Object(Cu.default)(e)).catch((function(e){s.emitter.emit("_error",MC(e))})),e}return Object(oe.default)(n,[{key:"load",value:function(){var e=this,t=Object(Pu.getPrivateThis)(this);return t.fetchPromise,this.isDestroyed?Promise.reject({errMsg:"组件已经被销毁"}):t.data&&(new Date).toDateString()!==t.data.dataBackTime.toDateString()?(t.container&&Vs.webviewLayout.remove(t.container),TC.call(this,{key:bC.default.idkey.ICON_DATA_INVALID,adType:t.adType,adUnitId:t.adUnitId,error_detail:{dataBackTime:t.data.dataBackTime.getTime()}}),qk.call(this).catch((function(n){return TC.call(e,{key:bC.default.idkey.ICON_DATA_INVALID_RETRY_FAIL,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"load"}}),t.emitter.emit("_error",MC(n)),Promise.reject(n)})).then((function(n){return TC.call(e,{key:bC.default.idkey.ICON_DATA_INVALID_RETRY_SUCCESS,adType:t.adType,adUnitId:t.adUnitId,error_detail:{type:"load"}}),n}))):t.fetchPromise?t.fetchPromise:(t.isReady=!1,qk.call(this).catch((function(e){return t.emitter.emit("_error",MC(e)),Promise.reject(e)})).then((function(n){return t.isShowed?(t.isShowed=!1,ek.hide(t.adType,t),e.show()):Promise.resolve(n)})))}},{key:"onLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("load",e)}},{key:"offError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("_error",e)}},{key:"onError",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("_error",e)}},{key:"show",value:function(){var e=this;if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var t=Object(Pu.getPrivateThis)(this),n=ek.map[t.adType].current;if(n&&n!==t)return Promise.reject({errMsg:"同一时刻只能展示一个同一类型的组件"});if(ek.show(t.adType,t),t.isShowed)return Promise.resolve();if(t.isShowed=!0,t.data&&(new Date).toDateString()!==t.data.dataBackTime.toDateString()&&(Xk.call(this).forEach((function(e){return e&&Vs.webviewLayout.remove(e)})),TC.call(this,{key:bC.default.idkey.ICON_DATA_INVALID,adType:t.adType,adUnitId:t.adUnitId,error_detail:{dataBackTime:t.data.dataBackTime.getTime()}}),qk.call(this).catch((function(e){ek.hide(t.adType,t),t.emitter.emit("_error",MC(e))}))),!t.fetchPromise){t.exposure_time=DC(),EC.call(this,t.gameIconBox0),UC.openAdd(t.adType);for(var r=[],i=0;i<this.iconCount;i++){var o=t["gameIconBox"+i];o.style.hidden=!1,r.push(o.nextLayout())}return Promise.all(r)}return t.fetchPromise.then((function(){t.fetchPromise=null,t.exposure_time=DC(),EC.call(e,t.gameIconBox0),UC.openAdd(t.adType);for(var n=[],r=0;r<e.iconCount;r++){var i=t["gameIconBox"+r];i.style.hidden=!1,n.push(i.nextLayout())}return FC.call(e,t.data.game_ad_list),Promise.all(n)})).catch((function(e){return ek.hide(t.adType,t),Promise.reject(e)}))}},{key:"destroy",value:function(){return $k.call(this)}},{key:"hide",value:function(){var e=this;if(this.isDestroyed)return Promise.reject({errMsg:"组件已经被销毁"});var t=Object(Pu.getPrivateThis)(this);return t.isShowed?(t.isShowed=!1,Kk.call(this).then((function(){var n=[];return Xk.call(e).forEach((function(e){e.style.hidden=!0,n.push(e.nextLayout())})),Promise.all(n).then((function(){ek.hide(t.adType,t),mC({type:"game_click",params:SC.call(e,{action_type:_C,layout:t.gameIconBox0})})}))}))):Promise.resolve()}},{key:"onResize",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.on("resize",e)}},{key:"offResize",value:function(e){this.isDestroyed||Object(Pu.getPrivateThis)(this).emitter.off("resize",e)}}]),n}(Pu.Component),ex=Object(bt.default)("getUserInteractiveStorage","webapi_getuserinteractivedata",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}})),tx=function(){if(!w.default.ext)return{};try{return JSON.parse(JSON.stringify(w.default.ext))}catch(e){return{}}},nx=n(124),rx=n(136),ix=n(220).originFunction,ox=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===Object(R.default)(e)&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="./entry.js")}({"./entry.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers/index.js"),i=n("./node_modules/protocol-buffers-encodings/index.js"),o=n("./node_modules/varint/index.js"),a=function(e,t){var n=new Uint8Array(8),r=t,i=0,o=0,s=0;do{o|=(127&e[r])<<s,(s+=7)>=8&&(n[i]=255&o,o>>=8,s-=8,i++)}while(e[r++]>=128);return n[i]=255&o,a.bytes=r-t,n};function s(e,t){for(var n=0,r=t;r<e.length;r++){if(!(128&e[r]))return n+1;n++}return n}var c,u=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};i.uint64=(c=o.encode,u(0,c,(function e(t,n){var r=s(t,n);if(r>=7&&NativeGlobal.decodeUint64Array){t=a(t,n);var i=NativeGlobal.decodeUint64Array(t);e.bytes=r}else i=o.decode(t,n),e.bytes=o.decode.bytes;return i}),(function(e){return e<0?10:o.encodingLength(e)}))),i.int64=u(0,(function e(t,n,r){if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new Error("number too large, not supported yet");if(t<0){var i=r+9;for(o.encode(-1*t,n,r),n[r+=o.encode.bytes-1]=128|n[r];r<i-1;)n[++r]=255;n[i]=1,e.bytes=10}else o.encode(t,n,r),e.bytes=o.encode.bytes;return n}),(function e(n,r){if(((u=o.decode(n,r))>Number.MAX_SAFE_INTEGER||u<Number.MIN_SAFE_INTEGER)&&NativeGlobal.decodeUint64Array){var i=s(n,r),c=10==i;c&&(n[9+r]=127&n[9+r]),n=a(n,r);var u=NativeGlobal.decodeUint64Array(n);return e.bytes=i,c?"-"+u:u}if(u>=Math.pow(2,63)){for(var l=9;255===n[r+l-1];)l--;var d=new t(l=l||9);n.copy(d,0,r,r+l),d[l-1]=127&d[l-1],u=-1*o.decode(d,0),e.bytes=10}else e.bytes=o.decode.bytes;return u}),(function(e){return e<0?10:o.encodingLength(e)})),e.exports=function(e){var n=r(e);return Object.keys(n).forEach((function(e){var r;n[e].decode&&(n[e].decode=(r=n[e].decode,function e(n){"[object Uint8Array]"==Object.prototype.toString.call(n)&&n.__proto__!=t.__proto__&&(n.__proto__=t.prototype);var i=r.apply(this,arguments);return e.bytes=r.bytes,i}))})),n},e.exports.fixBuffer=function(e){return"[object Uint8Array]"==Object.prototype.toString.call(e)&&e.__proto__!=t.__proto__&&(e.__proto__=t.prototype),e}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/base64-js/index.js":function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,c=n-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},"./node_modules/buffer/index.js":function(e,t,n){"use strict";(function(e){var r=n("./node_modules/base64-js/index.js"),i=n("./node_modules/ieee754/index.js"),o=n("./node_modules/isarray/index.js");function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&o(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return T(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,f=0;f<c;f++)if(u(e,o+f)!==u(t,f)){d=!1;break}if(d)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return G(W(t,e.length-n),e,n,r)}function w(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function E(e,t,n,r){return G(V(t),e,n,r)}function S(e,t,n,r){return G(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function T(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=A)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=A));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function x(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,o){return o||M(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,o){return o||M(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):N(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):N(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):N(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:W(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n("./node_modules/webpack/buildin/global.js"))},"./node_modules/generate-function/index.js":function(e,t,n){for(var r=n("./node_modules/util/util.js"),i=n("./node_modules/is-property/is-property.js"),o=/[\{\[]/,a=/[\}\]]/,s=["do","if","in","for","let","new","try","var","case","else","enum","eval","null","this","true","void","with","await","break","catch","class","const","false","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof","NaN","undefined"],c={},u=0;u<s.length;u++)c[s[u]]=!0;var l=function(e){return i(e)&&!c.hasOwnProperty(e)},d={s:function(e){return""+e},d:function(e){return""+Number(e)},o:function(e){return JSON.stringify(e)}},f=function(){var e=[],t=0,n={},s=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},c=function(e){return a.test(e.trim()[0])&&o.test(e[e.length-1])?(t--,s(e),void t++):o.test(e[e.length-1])?(s(e),void t++):a.test(e.trim()[0])?(t--,void s(e)):void s(e)},u=function e(t){if(!t)return e;if(1===arguments.length&&t.indexOf("\n")>-1)for(var n=t.trim().split("\n"),i=0;i<n.length;i++)c(n[i].trim());else c(r.format.apply(r,arguments));return e};return u.scope={},u.formats=d,u.sym=function(e){return e&&l(e)||(e="tmp"),n[e]||(n[e]=0),e+(n[e]++||"")},u.property=function(e,t){return 1===arguments.length&&(t=e,e=""),i(t+="")?e?e+"."+t:t:e?e+"["+JSON.stringify(t)+"]":JSON.stringify(t)},u.toString=function(){return e.join("\n")},u.toFunction=function(t){t||(t={});var n="return ("+e.join("\n")+")";Object.keys(u.scope).forEach((function(e){t[e]||(t[e]=u.scope[e])}));var r=Object.keys(t).map((function(e){return e})),i=r.map((function(e){return t[e]}));return ix.apply(null,r.concat(n)).apply(null,i)},arguments.length&&u.apply(null,arguments),u};f.formats=d,e.exports=f},"./node_modules/generate-object-property/index.js":function(e,t,n){var r=n("./node_modules/is-property/is-property.js"),i=function(e,t){return r(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};i.valid=r,i.property=function(e){return r(e)?e:JSON.stringify(e)},e.exports=i},"./node_modules/ieee754/index.js":function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,f=n?-1:1,p=e[t+d];for(d+=f,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=f,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},"./node_modules/is-property/is-property.js":function(e,t,n){"use strict";e.exports=function(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e)}},"./node_modules/isarray/index.js":function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},"./node_modules/os-browserify/browser.js":function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},"./node_modules/process/browser.js":function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},"./node_modules/protocol-buffers-encodings/index.js":function(e,t,n){(function(e){var r=n("./node_modules/varint/index.js"),i=n("./node_modules/signed-varint/index.js");function o(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}}function a(t){return e.isBuffer(t)?t.length:e.byteLength(t)}t.make=o,t.name=function(e){for(var n=Object.keys(t),r=0;r<n.length;r++)if(t[n[r]]===e)return n[r];return null},t.skip=function(e,t,n){switch(e){case 0:return r.decode(t,n),n+r.decode.bytes;case 1:return n+8;case 2:var i=r.decode(t,n);return n+r.decode.bytes+i;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},t.bytes=o(2,(function t(n,i,o){var s=o,c=a(n);return r.encode(c,i,o),o+=r.encode.bytes,e.isBuffer(n)?n.copy(i,o):i.write(n,o,c),t.bytes=(o+=c)-s,i}),(function e(t,n){var i=n,o=r.decode(t,n);n+=r.decode.bytes;var a=t.slice(n,n+o);return n+=a.length,e.bytes=n-i,a}),(function(e){var t=a(e);return r.encodingLength(t)+t})),t.string=o(2,(function t(n,i,o){var a=o,s=e.byteLength(n);return r.encode(s,i,o,"utf-8"),o+=r.encode.bytes,i.write(n,o,s),t.bytes=(o+=s)-a,i}),(function e(t,n){var i=n,o=r.decode(t,n);n+=r.decode.bytes;var a=t.toString("utf-8",n,n+o);return e.bytes=(n+=o)-i,a}),(function(t){var n=e.byteLength(t);return r.encodingLength(n)+n})),t.bool=o(0,(function e(t,n,r){return n[r]=t?1:0,e.bytes=1,n}),(function e(t,n){var r=t[n]>0;return e.bytes=1,r}),(function(){return 1})),t.int32=o(0,(function e(t,n,i){return r.encode(t<0?t+4294967296:t,n,i),e.bytes=r.encode.bytes,n}),(function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,i>2147483647?i-4294967296:i}),(function(e){return r.encodingLength(e<0?e+4294967296:e)})),t.int64=o(0,(function e(t,n,i){if(t<0){var o=i+9;for(r.encode(-1*t,n,i),n[i+=r.encode.bytes-1]=128|n[i];i<o-1;)n[++i]=255;n[o]=1,e.bytes=10}else r.encode(t,n,i),e.bytes=r.encode.bytes;return n}),(function t(n,i){var o=r.decode(n,i);if(o>=Math.pow(2,63)){for(var a=9;255===n[i+a-1];)a--;a=a||9;var s=e.allocUnsafe(a);n.copy(s,0,i,i+a),s[a-1]=127&s[a-1],o=-1*r.decode(s,0),t.bytes=10}else t.bytes=r.decode.bytes;return o}),(function(e){return e<0?10:r.encodingLength(e)})),t.sint32=t.sint64=o(0,i.encode,i.decode,i.encodingLength),t.uint32=t.uint64=t.enum=t.varint=o(0,r.encode,r.decode,r.encodingLength),t.fixed64=t.sfixed64=o(1,(function e(t,n,r){return t.copy(n,r),e.bytes=8,n}),(function e(t,n){var r=t.slice(n,n+8);return e.bytes=8,r}),(function(){return 8})),t.double=o(1,(function e(t,n,r){return n.writeDoubleLE(t,r),e.bytes=8,n}),(function e(t,n){var r=t.readDoubleLE(n);return e.bytes=8,r}),(function(){return 8})),t.fixed32=o(5,(function e(t,n,r){return n.writeUInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readUInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.sfixed32=o(5,(function e(t,n,r){return n.writeInt32LE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readInt32LE(n);return e.bytes=4,r}),(function(){return 4})),t.float=o(5,(function e(t,n,r){return n.writeFloatLE(t,r),e.bytes=4,n}),(function e(t,n){var r=t.readFloatLE(n);return e.bytes=4,r}),(function(){return 4}))}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers-schema/index.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/parse.js"),i=n("./node_modules/protocol-buffers-schema/stringify.js");e.exports=r,e.exports.parse=r,e.exports.stringify=i},"./node_modules/protocol-buffers-schema/parse.js":function(e,t,n){var r=n("./node_modules/protocol-buffers-schema/tokenize.js"),i=["int32","int64","uint32","uint64","sint32","sint64","bool","fixed64","sfixed64","double","fixed32","sfixed32","float"],o=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},a=function(e){for(var t={name:null,type:null,tag:-1,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=o(e);break;case";":if(null===t.name)throw new Error("Missing field name");if(null===t.type)throw new Error("Missing type in message field: "+t.name);if(-1===t.tag)throw new Error("Missing tag number in message field: "+t.name);return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],options:{},messages:[],fields:[],extends:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(a(e));break;case"enum":t.enums.push(h(e));break;case"message":t.messages.push(l(e));break;case"extensions":t.extensions=u(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=a(e);r.oneof=n,t.fields.push(r)}e.shift();break;case"extend":t.extends.push(c(e));break;case";":e.shift();break;case"reserved":for(e.shift();";"!==e[0];)e.shift();break;case"option":var i=g(e);if(void 0!==t.options[i.name])throw new Error("Duplicate option "+i.name);t.options[i.name]=i.value;break;default:e.unshift("optional"),t.fields.push(a(e))}return t},c=function(e){return{name:e[1],message:l(e)}},u=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=536870911),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},l=function(e){e.shift();var t=1,n=[],r={name:e.shift(),options:{},enums:[],extends:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=s(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extends=n.extends,r.extensions=n.extensions,r.options=n.options,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},d=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},f=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},p=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3]&&"["!==e[3])throw new Error("Expected ; or [ but found "+e[1]);var t=e.shift();e.shift();var n={value:null,options:{}};return n.value=Number(e.shift()),"["===e[0]&&(n.options=o(e)),e.shift(),{name:t,val:n}},h=function(e){e.shift();var t={},n={name:e.shift(),values:{},options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),n;if("option"!==e[0]){var r=p(e);n.values[r.name]=r.val}else t=g(e),n.options[t.name]=t.value}throw new Error("No closing tag for enum")},g=function(e){for(var t=null,n=null,r=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}"."===e[0][0]&&(t+=e.shift());break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=v(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},v=function e(t){for(var n=function(e){return"true"===e||"false"!==e&&e.replace(/^"+|"+$/gm,"")},r={};t.length;){if("}"===t[0])return t.shift(),r;var i="("===t[0];i&&t.shift();var o=t.shift();if(i){if(")"!==t[0])throw new Error("Expected ) but found "+t[0]);t.shift()}var a=null;switch(t[0]){case":":if(void 0!==r[o])throw new Error("Duplicate option map key "+o);t.shift(),"{"===(a=n(t.shift()))&&(a=e(t)),r[o]=a,";"===t[0]&&t.shift();break;case"{":if(t.shift(),a=e(t),void 0===r[o]&&(r[o]=[]),!Array.isArray(r[o]))throw new Error("Duplicate option map key "+o);r[o].push(a);break;default:throw new Error("Unexpected token in option map: "+t[0])}}throw new Error("No closing tag for option map")},_=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},y=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(m(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},m=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=g(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")};e.exports=function(e){for(var t=r(e.toString()),n=0;n<t.length;n++){var o;if(/^("|')([^'"]*)$/.test(t[n]))for(o=1===t[n].length?n+1:n;o<t.length;o++)if(/^[^'"\\]*(?:\\.[^'"\\]*)*("|')$/.test(t[o])){t=t.slice(0,n).concat(t.slice(n,o+1).join("")).concat(t.slice(o+1));break}}for(var a={syntax:3,package:null,imports:[],enums:[],messages:[],options:{},extends:[]},s=!0;t.length;){switch(t[0]){case"package":a.package=d(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");a.syntax=f(t);break;case"message":a.messages.push(l(t));break;case"enum":a.enums.push(h(t));break;case"option":var u=g(t);if(a.options[u.name])throw new Error("Duplicate option "+u.name);a.options[u.name]=u.value;break;case"import":a.imports.push(_(t));break;case"extend":a.extends.push(c(t));break;case"service":a.services||(a.services=[]),a.services.push(y(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return a.extends.forEach((function(e){a.messages.forEach((function(t){t.name===e.name&&e.message.fields.forEach((function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)}))}))})),a.messages.forEach((function(e){e.fields.forEach((function(t){var n,r,o,s;if(t.options&&"true"===t.options.packed&&-1===i.indexOf(t.type)){if(-1===t.type.indexOf(".")){if(e.enums&&e.enums.some((function(e){return e.name===t.type})))return}else{if((n=t.type.split(".")).length>2)throw new Error("what is this?");if(r=n[0],o=n[1],a.messages.some((function(e){if(e.name===r)return s=e,e})),s&&s.enums&&s.enums.some((function(e){return e.name===o})))return}throw new Error("Fields of type "+t.type+' cannot be declared [packed=true]. Only repeated fields of primitive numeric types (types which use the varint, 32-bit, or 64-bit wire types) can be declared "packed". See https://developers.google.com/protocol-buffers/docs/encoding#optional')}}))})),a}},"./node_modules/protocol-buffers-schema/stringify.js":function(e,t){var n=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},r=function e(t,r){r.push("message "+t.name+" {"),t.options||(t.options={}),a(t.options,r),t.enums||(t.enums=[]),t.enums.forEach((function(e){r.push(i(e,[]))})),t.messages||(t.messages=[]),t.messages.forEach((function(t){r.push(e(t,[]))}));var o={};return t.fields||(t.fields=[]),t.fields.forEach((function(e){e.oneof?(o[e.oneof]||(o[e.oneof]=[]),o[e.oneof].push(n(e,[]))):r.push(n(e,[]))})),Object.keys(o).forEach((function(e){o[e].unshift("oneof "+e+" {"),o[e].push("}"),r.push(o[e])})),r.push("}",""),r},i=function(e,t){t.push("enum "+e.name+" {"),e.options||(e.options={});var n=a(e.options,[]);return n.length>1&&t.push(n.slice(0,-1)),Object.keys(e.values).map((function(n){var r=o(e.values[n]);t.push([n+" = "+r+";"])})),t.push("}",""),t},o=function(e,t){var n=Object.keys(e.options||{}).map((function(t){return t+" = "+e.options[t]})).join(",");return n&&(n=" ["+n+"]"),e.value+n},a=function(e,t){var n=Object.keys(e);return n.forEach((function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var i=Object(R.default)(r);"object"===i?(r=s(r,[])).length&&t.push("option "+n+" = {",r,"};"):("string"===i&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))})),n.length>0&&t.push(""),t},s=function e(t,n){return Object.keys(t).forEach((function(r){var i=t[r],o=Object(R.default)(i);"object"===o?Array.isArray(i)?i.forEach((function(t){(t=e(t,[])).length&&n.push(r+" {",t,"}")})):(i=e(i,[])).length&&n.push(r+" {",i,"}"):("string"===o&&(i='"'+i+'"'),n.push(r+": "+i))})),n},c=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=a(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},u=function e(t){return function(n){return Array.isArray(n)?n.map(e(t+"  ")).join("\n"):t+n}};e.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e.package&&t.push("package "+e.package+";",""),e.options||(e.options={}),a(e.options,t),e.enums||(e.enums=[]),e.enums.forEach((function(e){i(e,t)})),e.messages||(e.messages=[]),e.messages.forEach((function(e){r(e,t)})),e.services&&e.services.forEach((function(e){!function(e,t){t.push("service "+e.name+" {"),e.options||(e.options={}),a(e.options,t),e.methods||(e.methods=[]),e.methods.forEach((function(e){t.push(c(e,[]))})),t.push("}","")}(e,t)})),t.map(u("")).join("\n")}},"./node_modules/protocol-buffers-schema/tokenize.js":function(e,t){e.exports=function(e){var t,n=function(e){return e.trim()};return e.replace(/([;,{}()=:[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(n).filter(Boolean).map((function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e})).map(n).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter((t=!1,function(e){return"/*"===e?(t=!0,!1):"*/"===e?(t=!1,!1):!t}))}},"./node_modules/protocol-buffers/compile-to-js.js":function(e,t,n){var r=n("./node_modules/os-browserify/browser.js"),i={type:!0,message:!0,name:!0,buffer:!0,encode:!0,decode:!0,encodingLength:!0,dependencies:!0};function o(e){return"function"==typeof e.encode}e.exports=function(e){var t="";return t+="// This file is auto generated by the protocol-buffers compiler"+r.EOL,t+=r.EOL,t+="/* eslint-disable quotes */"+r.EOL,t+="/* eslint-disable indent */"+r.EOL,t+="/* eslint-disable no-redeclare */"+r.EOL,t+="/* eslint-disable camelcase */"+r.EOL,t+=r.EOL,t+="// Remember to `npm install --save protocol-buffers-encodings`"+r.EOL,t+="var encodings = require('protocol-buffers-encodings')"+r.EOL,t+="var varint = encodings.varint"+r.EOL,t+="var skip = encodings.skip"+r.EOL,t+=r.EOL,function e(n,s,c){var u=Object.keys(n).filter((function(e){return!i[e]&&o(n[e])}));Object.keys(n).filter((function(e){if(i[e])return false;return!o(n[e])})).forEach((function(e){t+=c+s+"."+e+" = "+function(e,t){var n=Object.keys(e);if(!n.every((function(t){return"number"==typeof e[t]&&/^[a-z][a-z0-9]+$/i.test(t)})))return JSON.stringify(e,null,2).replace(/\n/g,r.EOL)+r.EOL;var i="{"+r.EOL;return n.forEach((function(o,a){i+=t+"  "+o+": "+e[o]+(a<n.length-1?",":"")+r.EOL})),i+t+"}"+r.EOL}(n[e],c)+r.EOL})),u.forEach((function(e){t+=c+"var "+e+" = "+s+"."+e+" = {"+r.EOL,t+=c+"  buffer: true,"+r.EOL,t+=c+"  encodingLength: null,"+r.EOL,t+=c+"  encode: null,"+r.EOL,t+=c+"  decode: null"+r.EOL,t+=c+"}"+r.EOL,t+=r.EOL})),u.forEach((function(e){t+=c+"define"+e+"()"+r.EOL})),u.length&&(t+=r.EOL);u.forEach((function(i){t+=c+"function define"+i+" () {"+r.EOL,e(n[i],i,c+"  "),t+=c+"  "+i+".encodingLength = encodingLength"+r.EOL,t+=c+"  "+i+".encode = encode"+r.EOL,t+=c+"  "+i+".decode = decode"+r.EOL+r.EOL,t+=c+"  "+a(n[i].encodingLength,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[i].encode,c+"  ")+r.EOL+r.EOL,t+=c+"  "+a(n[i].decode,c+"  ")+r.EOL,t+=c+"}"+r.EOL+r.EOL}))}(e,"exports",""),t+=a(n("./node_modules/protocol-buffers/compile.js").defined,"")+r.EOL;function a(e,t){return e.toString().split("\n").map((function(e,n){return n?t+e:e.replace(/(function \w+)\(/,"$1 (")})).join("\n")}}},"./node_modules/protocol-buffers/compile.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers-encodings/index.js"),i=n("./node_modules/varint/index.js"),o=n("./node_modules/generate-object-property/index.js"),a=n("./node_modules/generate-function/index.js"),s=function(e){return null!=e&&("number"!=typeof e||!isNaN(e))},c=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(e){return!1}}(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};e.exports=function(e,n,u){var l={},d={},f={},p=function(e,t){return u?(n=t[e],(i=r.name(n))?"encodings."+i:n.name?n.name:"encodings.enum"):"enc["+e+"]";var n,i};!function e(t,n){t.enums&&t.enums.forEach((function(t){t.id=n+(n?".":"")+t.name,d[t.id]=t,e(t,t.id)})),t.messages&&t.messages.forEach((function(r){r.id=n+(n?".":"")+r.name,l[r.id]=r,r.fields.forEach((function(e){if(e.map){var r="Map_"+e.map.from+"_"+e.map.to,i={name:r,enums:[],messages:[],fields:[{name:"key",type:e.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:e.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:n+(n?".":"")+r};l[i.id]||(l[i.id]=i,t.messages.push(i)),e.type=r,e.repeated=!0}})),e(r,r.id)}))}(e,"");var h=function(n,u){n.messages.forEach((function(e){u[e.name]=g(e.name,n.id)})),n.enums.forEach((function(e){u[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(e.values)})),u.type=2,u.message=!0,u.name=n.name;var l={};n.fields.forEach((function(e){e.oneof&&(l[e.oneof]||(l[e.oneof]=[]),l[e.oneof].push(e.name))}));var d=n.fields.map((function(e){return g(e.type,n.id)})),f=d.filter((function(e,t){return d.indexOf(e)===t})),h=d.map((function(e){return f.indexOf(e)})),v=function(e){for(var t=0;t<d.length;t++)e(d[t],n.fields[t],o("obj",n.fields[t].name),t)},_=a()("function encodingLength (obj) {")("var length = 0");Object.keys(l).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=l[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");_("if ((%s) > 1) throw new Error(%s)",n,t)})),v((function(e,t,n,r){var o=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,a=i.encodingLength(t.tag<<3|e.type);t.required?_("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):_("if (defined(%s)) {",n),t.map&&(_()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),o?(_()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("var len = %s.encodingLength(%s)",p(h[r],f),n+"[i]")("packedLen += len"),e.message&&_("packedLen += varint.encodingLength(len)"),_("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",a)("}")):(t.repeated&&(_("for (var i = 0; i < %s.length; i++) {",n),_("if (!defined(%s)) continue",n+="[i]")),_("var len = %s.encodingLength(%s)",p(h[r],f),n),e.message&&_("length += varint.encodingLength(len)"),_("length += %d + len",a),t.repeated&&_("}")),t.required||_("}")})),_()("return length")("}"),_=_.toFunction({defined:s,varint:i,enc:f});var y=a()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = Buffer.allocUnsafe(encodingLength(obj))")("var oldOffset = offset");Object.keys(l).forEach((function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=l[e].map((function(e){return"+defined("+o("obj",e)+")"})).join(" + ");y("if ((%s) > 1) throw new Error(%s)",n,t)})),v((function(e,t,n,r){t.required?y("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):y("if (defined(%s)) {",n);var o,a=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=i.encode(t.tag<<3|2),c=i.encode(t.tag<<3|e.type);if(t.map&&(y()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),a){for(y()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("packedLen += %s.encodingLength(%s)",p(h[r],f),n+"[i]")("}"),y("if (packedLen) {"),o=0;o<c.length;o++)y("buf[offset++] = %d",s[o]);y("varint.encode(packedLen, buf, offset)"),y("offset += varint.encode.bytes"),y("}")}if(t.repeated&&(y("for (var i = 0; i < %s.length; i++) {",n),y("if (!defined(%s)) continue",n+="[i]")),!a)for(o=0;o<c.length;o++)y("buf[offset++] = %d",c[o]);e.message&&(y("varint.encode(%s.encodingLength(%s), buf, offset)",p(h[r],f),n),y("offset += varint.encode.bytes")),y("%s.encode(%s, buf, offset)",p(h[r],f),n),y("offset += %s.encode.bytes",p(h[r],f)),t.repeated&&y("}"),t.required||y("}")})),y()("encode.bytes = offset - oldOffset")("return buf")("}"),y=y.toFunction({encodingLength:_,defined:s,varint:i,enc:f,Buffer:t});var m,b=n.fields.map((function(e,t){return e.required&&"!found"+t})).filter((function(e){return e})).join(" || "),w=a(),O=[];return v((function(e,t){var r=t.options&&t.options.default,i=g(t.type,n.id,!1),a=i&&i.values;a?t.repeated?O.push(o.property(t.name)+": []"):(r=r&&a[r]?a[r].value:a[Object.keys(a)[0]].value,O.push(o.property(t.name)+": "+parseInt(r||0,10))):O.push(o.property(t.name)+": "+c(t,r))})),O=O.filter((m={},function(e){return!m.hasOwnProperty(e)&&(m[e]=!0,!0)})),w()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),O.forEach((function(e,t){w(e+(t===O.length-1?"":","))})),w("}"),v((function(e,t,n,r){t.required&&w("var found%d = false",r)})),w("while (true) {")("if (end <= offset) {")(b&&'if (%s) throw new Error("Decoded message is not valid")',b)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),v((function(t,r,i,a){var s=r.repeated&&(r.options&&r.options.packed&&"false"!==r.options.packed||!(r.options&&"false"==r.options.packed)&&3==e.syntax&&("float"===r.type||"double"===r.type||-1!=r.type.indexOf("int")));w("case %d:",r.tag),r.oneof&&n.fields.forEach((function(e){e.oneof===r.oneof&&r.name!==e.name&&w("delete %s",o("obj",e.name))})),s&&w()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(w("var len = varint.decode(buf, offset)"),w("offset += varint.decode.bytes"),r.map?(w("var tmp = %s.decode(buf, offset, offset + len)",p(h[a],f)),w("%s[tmp.key] = tmp.value",i)):r.repeated?w("%s.push(%s.decode(buf, offset, offset + len))",i,p(h[a],f)):w("%s = %s.decode(buf, offset, offset + len)",i,p(h[a],f))):r.repeated?w("%s.push(%s.decode(buf, offset))",i,p(h[a],f)):w("%s = %s.decode(buf, offset)",i,p(h[a],f)),w("offset += %s.decode.bytes",p(h[a],f)),s&&w("}"),r.required&&w("found%d = true",a),w("break")})),w()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),w=w.toFunction({varint:i,skip:r.skip,enc:f}),y.bytes=w.bytes=0,u.buffer=!0,u.encode=y,u.decode=w,u.encodingLength=_,u.dependencies=f,u},g=function(e,t,o){if(n&&n[e])return n[e];if(r[e])return r[e];var s=(t?t+"."+e:e).split(".").map((function(t,n,r){return r.slice(0,n).concat(e).join(".")})).reverse().reduce((function(e,t){return e||l[t]||d[t]}),null);if(!1===o)return s;if(!s)throw new Error("Could not resolve "+e);return s.values?function(e){var t=Object.keys(e.values).map((function(t){return"val !== "+parseInt(e.values[t].value,10)})).join(" && ");t||(t="true");var n=a()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:i}),o=a()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:i});return r.make(0,n,o,i.encodingLength)}(s):f[s.id]?f[s.id]:(f[s.id]={},h(s,f[s.id]))};return(e.enums||[]).concat((e.messages||[]).map((function(e){return g(e.id)})))},e.exports.defined=s}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/protocol-buffers/index.js":function(e,t,n){(function(t){var r=n("./node_modules/protocol-buffers-schema/index.js"),i=n("./node_modules/protocol-buffers/compile.js"),o=n("./node_modules/protocol-buffers/compile-to-js.js");e.exports=function(e,n){if(n||(n={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var o="object"!==Object(R.default)(e)||t.isBuffer(e)?r.parse(e):e,a=function(){var e=this;i(o,n.encodings||{},n.inlineEnc).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].value})),t}(t.values)||t}))};return a.prototype.toString=function(){return r.stringify(o)},a.prototype.toJSON=function(){return o},new a},e.exports.toJS=function(t){return o(e.exports(t,{inlineEnc:!0}))}}).call(this,n("./node_modules/buffer/index.js").Buffer)},"./node_modules/signed-varint/index.js":function(e,t,n){var r=n("./node_modules/varint/index.js");t.encode=function e(t,n,i){t=t>=0?2*t:-2*t-1;var o=r.encode(t,n,i);return e.bytes=r.encode.bytes,o},t.decode=function e(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,1&i?(i+1)/-2:i/2},t.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},"./node_modules/util/node_modules/inherits/inherits_browser.js":function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},"./node_modules/util/support/isBufferBrowser.js":function(e,t){e.exports=function(e){return e&&"object"===Object(R.default)(e)&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/util.js":function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},i=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(e).replace(i,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),c=r[n];n<o;c=r[++n])g(c)||!b(c)?a+=" "+c:a+=" "+s(c);return a},t.deprecate=function(n,r){if(void 0!==e&&!0===e.noDeprecation)return n;if(void 0===e)return function(){return t.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(e,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(n)?r.showHidden=n:n&&t._extend(r,n),y(r.showHidden)&&(r.showHidden=!1),y(r.depth)&&(r.depth=2),y(r.colors)&&(r.colors=!1),y(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,e,r.depth)}function c(e,t){var n=s.styles[t];return n?"["+s.colors[n][0]+"m"+e+"["+s.colors[n][1]+"m":e}function u(e,t){return e}function l(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return _(i)||(i=l(e,i,r)),i}var o=function(e,t){if(y(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(v(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),O(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return d(n);if(0===a.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(m(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(w(n))return e.stylize(Date.prototype.toString.call(n),"date");if(O(n))return d(n)}var u,b="",S=!1,T=["{","}"];(p(n)&&(S=!0,T=["[","]"]),E(n))&&(b=" [Function"+(n.name?": "+n.name:"")+"]");return m(n)&&(b=" "+RegExp.prototype.toString.call(n)),w(n)&&(b=" "+Date.prototype.toUTCString.call(n)),O(n)&&(b=" "+d(n)),0!==a.length||S&&0!=n.length?r<0?m(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=S?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)C(t,String(a))?o.push(f(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return f(e,n,r,s,t,S)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(u,b,T)):T[0]+b+T[1]}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(n)?l(e,c.value,null):l(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),y(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return"number"==typeof e}function _(e){return"string"==typeof e}function y(e){return void 0===e}function m(e){return b(e)&&"[object RegExp]"===S(e)}function b(e){return"object"===Object(R.default)(e)&&null!==e}function w(e){return b(e)&&"[object Date]"===S(e)}function O(e){return b(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(y(o)&&(o=e.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;a[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else a[n]=function(){};return a[n]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=p,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=v,t.isString=_,t.isSymbol=function(e){return"symbol"===Object(R.default)(e)},t.isUndefined=y,t.isRegExp=m,t.isObject=b,t.isDate=w,t.isError=O,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===Object(R.default)(e)||void 0===e},t.isBuffer=n("./node_modules/util/support/isBufferBrowser.js");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function A(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",A(),t.format.apply(t,arguments))},t.inherits=n("./node_modules/util/node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!b(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var k="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(k&&e[k]){var t;if("function"!=typeof(t=e[k]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),k&&Object.defineProperty(t,k,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=k,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(a,null,t)}),(function(t){e.nextTick(x,t,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}}).call(this,n("./node_modules/process/browser.js"))},"./node_modules/varint/decode.js":function(e,t){e.exports=function e(t,n){var r,i=0,o=0,a=n=n||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");r=t[a++],i+=o<28?(127&r)<<o:(127&r)*Math.pow(2,o),o+=7}while(r>=128);return e.bytes=a-n,i}},"./node_modules/varint/encode.js":function(e,t){e.exports=function e(t,r,i){r=r||[];var o=i=i||0;for(;t>=n;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-o+1,r};var n=Math.pow(2,31)},"./node_modules/varint/index.js":function(e,t,n){e.exports={encode:n("./node_modules/varint/encode.js"),decode:n("./node_modules/varint/decode.js"),encodingLength:n("./node_modules/varint/length.js")}},"./node_modules/varint/length.js":function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),a=Math.pow(2,35),s=Math.pow(2,42),c=Math.pow(2,49),u=Math.pow(2,56),l=Math.pow(2,63);e.exports=function(e){return e<n?1:e<r?2:e<i?3:e<o?4:e<a?5:e<s?6:e<c?7:e<u?8:e<l?9:10}},"./node_modules/webpack/buildin/global.js":function(e,t){var n;n=globalThis;try{n=n||new ix("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":Object(R.default)(window))&&(n=window)}e.exports=n}}),ax=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","setBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts"],sx=n(195),cx={};function ux(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Reporter.reportKeyValue({key:"MidasFriendPayment",value:[cx.scene,1,31,t?1:2,0,"1","",0,"",Object(it._getCurrentNetworkType)(),0,0,0,0,0,cx.scene_note,encodeURIComponent(JSON.stringify({label:e.mark_type,report_info:e.report_info,sessionId:cx.sessionid||cx.sessionId}))].join(",")})}w.default.onReady((function(){var e;cx=w.default.appLaunchInfo||{},e=(cx.referrerInfo||{}).messageExtraData||{},Object(ko._operateWXData)({apiName:"webapi_game_getsharemarkingame",reqData:{lib_version:fl.SDKVersion,scene:cx.scene,launch_with_share_mark:!!e.shareCardMarker},success:function(e){var t=e.rawData;t&&(JSON.parse(t).mark_list||[]).forEach((function(e,t){return setTimeout((function(){ux(e),function(e){var t=e.label,n=e.icon,r=e.tag,i=e.data,o=e.more,a=void 0!==o&&o;Object(sx.drawLabel)({label:t,icon:n,tag:r,more:a,background:"transparent",base64:m.IS_ANDROID}).then((function(e){var n=new Vs.Image({src:e,autoInsert:!0,style:{left:0,width:210,height:40,opacity:0,top:/landscape/.test(w.default.deviceOrientation)?48:104}}),r=!1;a&&n.on("click",(function(){r=!0,Object(ko._operateWXData)({apiName:"webapi_game_getfriendsscore",success:function(e){var n=e.rawData,r=JSON.parse(n).friend_score_list||[];!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__sclEngine__.initScl((function(t){t.mainRoot.append("game-ranklist",e)}))}({title:t,list:r})}}),ux(i,!1),n.destroy()})),Object(O.invokeMethod)("animateCoverView",{viewId:n.id,finalStyle:{opacity:1},duration:250,easing:"ease-out"}),setTimeout((function(){setTimeout((function(){return r||n.destroy()}),300),r||Object(O.invokeMethod)("animateCoverView",{viewId:n.id,finalStyle:{opacity:0},duration:200,easing:"ease-in"})}),5250)}))}({data:e,label:e.wording,icon:e.head_img_url,tag:e.mark_word,more:6===e.mark_type})}),2e3+4500*t)}))}})}));var lx=null;void 0!==y.default.CpuProfiler&&(lx=new y.default.CpuProfiler);var dx,fx,px=!1,hx=!1,gx={},vx=JSON.parse,_x="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",yx="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function mx(){if("string"==typeof w.default.opConfig){var e;try{e=vx(w.default.opConfig)}catch(e){}return e&&e.expt_info}return w.default.opConfig&&w.default.opConfig.expt_info}function bx(){var e,t=mx();return t&&hx?(e=1,dx=t,Reporter.reportIDKey({key:"useLaunchExptInfo"})):t?(e=2,dx=t,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(e=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:dx,jsDataType:e}}function Ox(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof _x&&(_x=_x.replace(" ","")),"string"==typeof yx&&(yx=yx.replace(" ","-")),Object(Mn.onNativeEvent)("onAppEnterForeground",(function(e){Object.assign(gx,e),fx=gx.sessionId})),T((function(e){mx()&&(hx=!0)})),w.default.onReady((function(){Object.assign(gx,w.default.appLaunchInfo),w.default.opConfig?dx=mx():w.default.appContactInfo&&w.default.appContactInfo.passThroughInfo&&(dx=w.default.appContactInfo.passThroughInfo.expt_info)}));var Ex=Object(bt.default)("getExptInfo","webapi_wxaexpt_hit",{},{},(function(e){return{param_name_list:e.keyList}}),(function(e){return e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((function(t){e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,delete e.rawData,e}));function Sx(e,t){var n=2,r=w.default||{},i=r.accountInfo,o=r.envVersion,a=i?i.appId:"";"release"===o?n=1:"trial"===o&&(n=3);var s=Object(tt.getSystemInfoSync)();gx.sessionId||(gx.sessionId=gx.sessionid),gx.usedState||(gx.usedState=gx.usedstate),Mo(1005,JSON.stringify({appid:a,app_state:n,appversion:Object(nx.getAccountInfoSync)().miniProgram.version,enter_scene:gx.scene,scene_note:gx.scene_note||gx.sceneNote,prescene:gx.prescene,prescene_note:gx.prescene_note||gx.presceneNote,sessionid:gx.sessionId,add_state:gx.usedState,page_path:Ox()||gx.path,page_query:JSON.stringify(gx.query||{}),referpagepath:gx.referpagepath,isentrance:fx||fx===gx.sessionId?0:1,event_time:Date.now(),sdk_version:fl.SDKVersion,devicemodel:s.model,devicebrand:s.brand,os_name:s.platform,os_version:s.system,language_version:s.language,networktype:Object(it._getCurrentNetworkType)(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:w.default.screenWidth,screen_height:w.default.screenHeight,open_source:w.default.host&&w.default.host.appId?2:1,host_appid:w.default.host?w.default.host.appId:""}),"immediate")}var Tx=Object(bt.default)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(function(e){return{export_id:e.feedId,finder_username:e.finderUserName}}),(function(e){e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData}));function Ix(){if("undefined"==typeof __appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function Ax(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[e||"",Ix(),t,n,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:i})}var Cx=!1;zr.GlobalEmitter.on("beforeTouchEnd",(function(){Cx=!0})),zr.GlobalEmitter.on("afterTouchEnd",(function(){Cx=!1})),Ts((function(){Cx=!1}));var kx=function(e,t){return function(n){Cx?t(n):Object(Un.beforeInvokeFail)(e,n,"require user interaction (only in touchend event)")}},xx=kx("openChannelsLive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tx(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(Et._showModal)({content:"即将打开"+r+"视频号直播",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(O.invokeMethod)("openChannelsLive",e,{beforeAll:function(t){var n=t.errMsg;Ax(e.finderUserName,1,/^\w+:ok/.test(n)?1:0,n)}}):(Ax(e.finderUserName,1,0,"cancel"),Object(O.beforeInvokeFail)("openChannelsLive",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Ax(e.finderUserName,1,0,n),Object(O.beforeInvokeFail)("openChannelsLive",e,n)},complete:null}))})),Px=kx("openChannelsActivity",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tx(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(Et._showModal)({content:"即将打开"+r+"视频号",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(O.invokeMethod)("openChannelsActivity",e,{beforeAll:function(t){var n=t.errMsg;Ax(e.finderUserName,3,/^\w+:ok/.test(n)?1:0,n)}}):(Ax(e.finderUserName,3,0,"cancel"),Object(O.beforeInvokeFail)("openChannelsActivity",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Ax(e.finderUserName,3,0,n),Object(O.beforeInvokeFail)("openChannelsActivity",e,n)},complete:null}))})),Dx=kx("openChannelsUserProfile",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tx(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(Et._showModal)({content:"即将打开"+r+"视频号",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(O.invokeMethod)("openChannelsUserProfile",e,{beforeAll:function(t){var n=t.errMsg;Ax(e.finderUserName,2,/^\w+:ok/.test(n)?1:0,n)}}):(Ax(e.finderUserName,2,0,"cancel"),Object(O.beforeInvokeFail)("openChannelsUserProfile",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Ax(e.finderUserName,2,0,n),Object(O.beforeInvokeFail)("openChannelsUserProfile",e,n)},complete:null}))})),Rx="navigateToUserCenter",jx=Object(ko.constructOperateWXData)(!1,"getadcardrechargeinfo"),Nx=Object(A.promisify)(Eu.privateOpenUrl),Mx=null,Lx=!1,Bx=function(){return(Mx?Promise.resolve(Mx):new Promise((function(e,t){jx({apiName:"webapi_getadcardrechargeinfo",reqData:{},success:function(n){var r=JSON.parse(n.rawData);r.rechargeUrl?e(Mx=r):t(r)},fail:t})}))).then((function(e){var t=e.rechargeUrl;return Nx({url:t,isNativeStyle:!0})}))},Fx=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;switch(t){case"adsSkipCard":return Bx();default:return Promise.reject(new Error("invalid type"))}},Ux="requestConsumeAdsSkipCard",Wx=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"check")),Vx=Object(A.promisify)(Object(ko.constructOperateWXData)(!1,"consume")),Gx=Object(A.promisify)(Et._showModal),Hx=!1;function zx(e){var t=e.amount,n=e.subactionID;Reporter.reportKeyValue({key:"MidasFriendPayment",value:["",1,10,18,n,"","","","",Object(it._getCurrentNetworkType)(),"","","","","","",encodeURIComponent(JSON.stringify({num:t}))].join(",")})}function Yx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Wx({apiName:"webapi_getadcardcostorderpaypackage",reqData:{orderNo:e.orderNo}}).then((function(e){var t=JSON.parse(e.rawData),n=t.token,r=t.errCode,i=t.errMsg,o=t.amount;if(n)return{token:n,amount:o};throw{errCode:r,errMsg:i}}))}function qx(e){var t=e.amount;return zx({subactionID:1}),Gx({content:"使用 "+t+" 张广告跳过卡",confirmText:"确认",cancelText:"取消"}).then((function(n){if(n.confirm)return e;throw zx({amount:t,subactionID:7}),{errMsg:"cancel"}}))}function Kx(e){var t=e.token,n=e.amount;return Vx({apiName:"webapi_payadcardcostorder",reqData:{token:t}}).then((function(e){var t=JSON.parse(e.rawData),r=t.errMsg,i=t.errCode;if(0===i)return zx({amount:n,subactionID:3}),Object(Et.showToast)({icon:"none",title:"已消耗"+n+"张广告跳过卡",duration:1e3}),t;throw zx({amount:n,subactionID:4}),Object(Et.showToast)({icon:"none",title:"广告跳过卡使用失败，请重试",duration:2500}),{errMsg:r,errCode:i}})).catch((function(e){throw zx({amount:n,subactionID:4}),e}))}function Jx(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}gl||(gl=!0,w.default.onReady((function(){Object(A.isGame)()&&(setTimeout((function(){var e=ml=Object.assign({},w.default.appLaunchInfo||{},Object(wa._getLaunchOptionsSync)()||{});xl({scene:e.scene||-1,isLaunch:!0,sessionId:e.sessionid||e.sessionId||""}),Object(ms._onBaseFrameShow)(xl),As(Pl)}),0),ul=Object(tt.getSystemInfoSync)())}))),Object(Zc.initReportCanvasData)();var Xx=Ra.default,$x=La,Zx=Wa,Qx=Ya,eP=qa,tP=Ka,nP=Ja,rP=function(e){Qa=e},iP=function(){Qa=null},oP=function(e){_s=e},aP=function(){_s=null},sP=function(){Object(fr.reportDeprecatedAPI)("onLaunch"),console.warn("onLaunch 已废弃，请使用 wx.getLaunchOptionsSync()。")},cP=function(){Object(fr.reportDeprecatedAPI)("offLaunch"),console.warn("offLaunch 已废弃")},uP=ms.onShow,lP=ms.offShow,dP=Es,fP=Ss,pP=function(){Object(fr.reportDeprecatedAPI)("onStickyStatusChange"),console.warn("wx.onStickyStatusChange 已废弃，请勿继续使用")},hP=function(){Object(fr.reportDeprecatedAPI)("offStickyStatusChange"),console.warn("wx.offStickyStatusChange 已废弃，请勿继续使用")},gP=function(e){Ns=e},vP=function(){Ns=null},_P=function(e){Cs.on("down",e)},yP=function(e){Cs.off("down",e)},mP=function(e){Cs.on("up",e)},bP=function(e){Cs.off("up",e)},wP=function(e){Ds.on("onKeyboardInput",e)},OP=function(e){Ds.off("onKeyboardInput",e)},EP=function(e){Ds.on("onKeyboardConfirm",e)},SP=function(e){Ds.off("onKeyboardConfirm",e)},TP=function(e){Ds.on("onKeyboardComplete",e)},IP=function(e){Ds.off("onKeyboardComplete",e)},AP=function(e){return Ga.on("Wheel",e)},CP=function(e){return Ga.off("Wheel",e)},kP=function(e){zr.GlobalEmitter.on("onWindowResize",e)},xP=function(e){zr.GlobalEmitter.off("onWindowResize",e)},PP=Xx.onTouchStart,DP=Xx.offTouchStart,RP=Xx.onTouchMove,jP=Xx.offTouchMove,NP=Xx.onTouchEnd,MP=Xx.offTouchEnd,LP=Xx.onTouchCancel,BP=Xx.offTouchCancel,FP=$x.onMouseDown,UP=$x.offMouseDown,WP=$x.onMouseMove,VP=$x.offMouseMove,GP=$x.onMouseUp,HP=$x.offMouseUp,zP=Zx.onPointerLockChange,YP=Zx.offPointerLockChange,qP=Zx.onPointerLockError,KP=Zx.offPointerLockError,JP=Qe.game,XP=JP.setStorage,$P=JP.setStorageSync,ZP=JP.getStorage,QP=JP.getStorageSync,eD=JP.getStorageInfo,tD=JP.getStorageInfoSync,nD=JP.removeStorage,rD=JP.removeStorageSync,iD=JP.clearStorage,oD=JP.clearStorageSync;Protect.hijack(!0,!1);var aD,sD=Be.connectSocket,cD=Be.closeSocket,uD=Be.sendSocketMessage,lD=Be.onSocketOpen,dD=Be.onSocketClose,fD=Be.onSocketMessage,pD=Be.onSocketError,hD=et.share.getShareInfo,gD=et.share.showShareMenu,vD=et.share.hideShareMenu,_D=et.share.updateShareMenu,yD=et.share.showUpdatableMessageSubscribeButton,mD=et.share.authPrivateMessage,bD=et.share.showShareImageMenu,wD=Et.showToast,OD=Et.hideToast,ED=Et.showLoading,SD=Et.hideLoading,TD=Et.showModal,ID=Et.showActionSheet,AD=u.vibrateShort,CD=u.vibrateLong,kD=function(e){if(Object(O.beforeInvoke)("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""})){var t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:jI(e.muteConfig),handsFree:!Object(U.isBoolean)(e.handsFree)||e.handsFree,roomType:t}),r=Object(Yr.getPluginId)(this);Object(O.invokeMethodWithPlugin)(r)("joinVoIPChat",n,{beforeSuccess:function(e){Object(O.publish)("joinVoIPChat",{}),e.errCode=0},beforeFail:function(e){void 0===e.errCode&&(e.errCode=function(e){var t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;var n=parseInt(t[1],10),r=parseInt(t[2],10);if(-10086!==n&&-10087!==n)return-1e3;switch(r){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}}(e.errMsg))}})}},xD=function(e){try{var t=Object(Yr.getPluginId)(this);Object(O.invokeMethodWithPlugin)(t)("exitVoIPChat",Object.assign({},e,{success:function(t){var n=t.errMsg||"ok";Object(O.publish)("exitVoIPChat",{}),Object(O.beforeInvokeCallback)({name:"exitVoIPChat",args:e,errMsg:n,errCode:0,res:t})},fail:function(t){var n=t.errCode||-1,r=t.errMsg||"unknown error";Object(O.beforeInvokeCallback)({name:"exitVoIPChat",args:e,success:!1,errMsg:r,errCode:n,res:t})},complete:function(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:"exitVoIPChat:fail "+t.message}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:"exitVoIPChat:complete "+t.message})}},PD=function(e){if(Object(O.beforeInvoke)("updateVoIPChatMuteConfig",e,{muteConfig:{}})){var t=Object(Yr.getPluginId)(this);Object(O.invokeMethodWithPlugin)(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:jI(e.muteConfig),handsFree:!Object(U.isBoolean)(e.handsFree)||e.handsFree}))}},DD=MI,RD=function(e){try{Object(O.onMethod)("onVoIPChatSpeakersChanged",(function(t){t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},jD=UI,ND=LI,MD=function(){Object(O.onMethod)("onVoIPChatSpeakersChanged",(function(){}))},LD=WI,BD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("subscribeVoIPVideoMembers",e,{openIdList:[]})&&Object(O.invokeMethod)("subscribeVoIPMembers",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},FD=GI,UD=HI,WD=YI,VD=qI,GD={request:$,downloadFile:Q.downloadFile,uploadFile:re,addNativeDownloadTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.IS_IOS?Object(O.beforeInvokeFail)("addNativeDownloadTask",e,"iOS not supported"):Object(O.invokeMethod)("addNativeDownloadTask",e,{})},calRqt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("calRqt",e,{rqt:""})&&Object(O.invokeMethod)("calRqt",e)},connectSocket:sD,closeSocket:cD,sendSocketMessage:uD,onSocketOpen:lD,onSocketClose:dD,onSocketMessage:fD,onSocketError:pD,getNetworkType:it.getNetworkType,onNetworkStatusChange:it.onNetworkStatusChange,offNetworkStatusChange:it.offNetworkStatusChange,openDocument:Ge.openDocument,setStorage:XP,setStorageSync:$P,getStorage:ZP,getStorageSync:QP,getStorageInfo:eD,getStorageInfoSync:tD,removeStorage:nD,removeStorageSync:rD,clearStorage:iD,clearStorageSync:oD,authorize:et.authorize,checkSession:et.checkSession,getUserInfo:et.getUserInfo,getUserProfile:et.getUserProfile,login:et.login,openSetting:et.openSetting,getSetting:et.getSetting,sendGroupMessage:et.sendGroupMessage,reportGroupShare:et.reportGroupShare,operateWXData:et.operateWXData,getWeRunData:et.getWeRunData,uploadWeRunData:et.uploadWeRunData,addWeRunData:et.addWeRunData,getGroupMsgTicket:function(e){var t=ic.default.get(e.shareTicket);t&&t.shareKey?Object(rc.gameGetGroupMsgTicket)(Object.assign({},e,{shareKey:t.shareKey})):Object(O.beforeInvokeFail)("getGroupMsgTicket",e,"invalid shareTicket")},removeUserCloudStorage:xd,setUserCloudStorage:Id,openCustomerServiceConversation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gI?(Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE),Object(Et._showModal)({content:"即将进入“"+hI.nickname+"”客服会话",confirmText:"确认",cancelText:"取消",success:function(t){t.confirm?Object(O.invokeMethod)("enterContact",e,{}):Object(O.beforeInvokeFail)("openCustomerServiceConversation",e,"cancel")},fail:function(){Object(O.beforeInvokeFail)("openCustomerServiceConversation",e,"showModal fail")}})):Object(O.beforeInvokeFail)("openCustomerServiceConversation",e,"require user interaction")},sendRedPacket:et.redPacket.sendRedPacket,openRedPacket:et.redPacket.openRedPacket,sendBizRedPacket:et.redPacket.sendBizRedPacket,reportAnalytics:function(e,t){var n="undefined"!=typeof __appServiceEngine__&&void 0!==__appServiceEngine__.getCurrentPagesByDomain&&__appServiceEngine__.getCurrentPagesByDomain(""),r=n&&n.pop&&n.pop(),i={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:r&&r.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:wx&&wx.version&&wx.version.version||0};m.IS_DEVTOOLS||(console.info("[自定义分析] 上报成功"),console.info(i)),Object(O.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify(i)})},reportMonitor:function(e,t){if(e)if(void 0===t&&(t=1),"number"==typeof t){var n=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});Object(O.invokeMethod)("reportRealtimeAction",{actionData:n})}else console.error("wx.reportMonitor: 'value' argument must be a Number.");else console.error("wx.reportMonitor: require 'name' argument.")},requestSubscribeMessage:function(e){iA()?aA(e):Object(Un.beforeInvokeFail)("requestSubscribeMessage",e,"require user interaction (only in touchend event)")},requestSubscribeSystemMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};lA?Object(O.beforeInvokeFail)(cA,e,"please invoke after last subscription ended"):(lA=!0,oA().then((function(){return dA(e)})).then(fA).then(pA).then(hA).then((function(t){Object(O.beforeInvokeCallback)({name:cA,args:e,res:t}),lA=!1})).catch((function(t){Object(O.beforeInvokeFail)(cA,e,t.errMsg||t.message,t.errCode||t.err_code),lA=!1})))},requestSubscribeWhatsNew:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bA.log("[args]",e),EA?Object(O.beforeInvokeFail)(wA,e,"please invoke after last subscription ended"):(EA=!0,oA().then((function(){return SA(e)})).then(TA).then((function(t){return t.confirm?IA(e):t})).then((function(t){Object(O.beforeInvokeCallback)({name:wA,args:e,res:t}),EA=!1})).catch((function(t){Object(O.beforeInvokeFail)(wA,e,t.errMsg||t.message,+(t.errCode||t.err_code)),EA=!1})))},getWhatsNewSubscriptionsSetting:yA,getUserGameLabel:et.getUserGameLabel,reportUserBehaviorBranchAnalytics:et.reportUserBehaviorBranchAnalytics,addCard:nA.addCard,openCard:nA.openCard,saveFile:Ge.saveFile,getFileInfo:Ge.getFileInfo,getSavedFileList:Ge.getSavedFileList,getSavedFileInfo:Ge.getSavedFileInfo,removeSavedFile:Ge.removeSavedFile,readFile:function(e){Object(fr.reportDeprecatedAPI)("readFile"),console.warn("wx.readFile 即将废弃，请使用 wx.getFileSystemManager().readFile"),Object(Ge.readFile)(e)},writeFile:function(e){Object(fr.reportDeprecatedAPI)("writeFile"),console.warn("wx.writeFile 即将废弃，请使用 wx.getFileSystemManager().writeFile"),Object(Ge.writeFile)(e)},access:function(e){Object(fr.reportDeprecatedAPI)("access"),console.warn("wx.access 即将废弃，请使用 wx.getFileSystemManager().access"),Object(Ge.access)(e)},unlink:function(e){Object(fr.reportDeprecatedAPI)("unlink"),console.warn("wx.unlink 即将废弃，请使用 wx.getFileSystemManager().unlink"),Object(Ge.unlink)(e)},stat:function(e){Object(fr.reportDeprecatedAPI)("stat"),console.warn("wx.stat 即将废弃，请使用 wx.getFileSystemManager().stat"),Object(Ge.stat)(e)},mkdir:function(e){Object(fr.reportDeprecatedAPI)("mkdir"),console.warn("wx.mkdir 即将废弃，请使用 wx.getFileSystemManager().mkdir"),Object(Ge.mkdir)(e)},readdir:function(e){Object(fr.reportDeprecatedAPI)("readdir"),console.warn("wx.readdir 即将废弃，请使用 wx.getFileSystemManager().readdir"),Object(Ge.readdir)(e)},rmdir:function(e){Object(fr.reportDeprecatedAPI)("rmdir"),console.warn("wx.rmdir 即将废弃，请使用 wx.getFileSystemManager().rmdir"),Object(Ge.rmdir)(e)},getFileSystemManager:function(){return He.default.game},saveFileToDisk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("saveFileToDisk",e,{})},startAccelerometer:i.startAccelerometer,stopAccelerometer:i.stopAccelerometer,onAccelerometerChange:i.onAccelerometerChange,offAccelerometerChange:i.offAccelerometerChange,scanCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("scanCode",e,{})&&Object(O.invokeMethod)("scanCode",e,{beforeSuccess:function(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},startCompass:o.startCompass,stopCompass:o.stopCompass,onCompassChange:o.onCompassChange,offCompassChange:o.offCompassChange,startDeviceMotionListening:p.startDeviceMotionListening,stopDeviceMotionListening:p.stopDeviceMotionListening,onDeviceMotionChange:p.onDeviceMotionChange,offDeviceMotionChange:p.offDeviceMotionChange,startGyroscope:f.startGyroscope,stopGyroscope:f.stopGyroscope,onGyroscopeChange:f.onGyroscopeChange,offGyroscopeChange:f.offGyroscopeChange,setScreenBrightness:c.setScreenBrightness,getScreenBrightness:c.getScreenBrightness,setKeepScreenOn:c.setKeepScreenOn,captureScreen:c.captureScreen,vibrateShort:AD,vibrateLong:CD,getClipboardData:a.getClipboardData,setClipboardData:a.setClipboardData,makeBluetoothPair:l.makeBluetoothPair,openBluetoothAdapter:l.openBluetoothAdapter,closeBluetoothAdapter:l.closeBluetoothAdapter,getBluetoothAdapterState:l.getBluetoothAdapterState,onBluetoothAdapterStateChange:l.onBluetoothAdapterStateChange,offBluetoothAdapterStateChange:l.offBluetoothAdapterStateChange,startBluetoothDevicesDiscovery:l.startBluetoothDevicesDiscovery,stopBluetoothDevicesDiscovery:l.stopBluetoothDevicesDiscovery,getBluetoothDevices:l.getBluetoothDevices,getConnectedBluetoothDevices:l.getConnectedBluetoothDevices,createBLEConnection:l.createBLEConnection,closeBLEConnection:l.closeBLEConnection,getBLEDeviceServices:l.getBLEDeviceServices,getBLEDeviceRSSI:l.getBLEDeviceRSSI,setBLEMTU:l.setBLEMTU,getBLEDeviceCharacteristics:l.getBLEDeviceCharacteristics,createBLEPeripheralServer:l.createBLEPeripheralServer,onBLEPeripheralConnectionStateChanged:l.onBLEPeripheralConnectionStateChanged,offBLEPeripheralConnectionStateChanged:l.offBLEPeripheralConnectionStateChanged,notifyBLECharacteristicValueChanged:l.notifyBLECharacteristicValueChanged,notifyBLECharacteristicValueChange:l.notifyBLECharacteristicValueChange,readBLECharacteristicValue:l.readBLECharacteristicValue,writeBLECharacteristicValue:l.writeBLECharacteristicValue,onBluetoothDeviceFound:l.onBluetoothDeviceFound,offBluetoothDeviceFound:l.offBluetoothDeviceFound,onBLEConnectionStateChanged:l.onBLEConnectionStateChanged,onBLEConnectionStateChange:l.onBLEConnectionStateChange,onBLECharacteristicValueChange:l.onBLECharacteristicValueChange,offBLEConnectionStateChanged:l.offBLEConnectionStateChanged,offBLEConnectionStateChange:l.offBLEConnectionStateChange,offBLECharacteristicValueChange:l.offBLECharacteristicValueChange,startBeaconDiscovery:s.startBeaconDiscovery,stopBeaconDiscovery:s.stopBeaconDiscovery,getBeacons:s.getBeacons,onBeaconUpdate:s.onBeaconUpdate,offBeaconUpdate:s.offBeaconUpdate,onBeaconServiceChange:s.onBeaconServiceChange,offBeaconServiceChange:s.offBeaconServiceChange,getLocation:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"gcj02"!==e.type&&(e.type="wgs84");var t=Date.now(),n=Gi[e.type];if(t-Vi>=1e4||!Wi&&!n)return Vi=t,void Ui(e,{afterAll:function(t){Gi[e.type]=t}});if(Wi)Object(O.beforeInvokeFail)("getLocation",e,Hi);else{var r=0===n.errMsg.indexOf("getLocation:ok");Object(O.beforeInvokeCallback)({name:"getLocation",success:r,args:e,errMsg:n.errMsg,res:n})}},createInnerAudioContext:Bi,getAvailableAudioSources:function(e){Object(O.invokeMethod)("getAvailableAudioSources",e)},setInnerAudioOption:function(e){Object(O.invokeMethod)("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},createVideoDecoder:ri.createVideoDecoder,createMediaAudioPlayer:function(){return y.default.MediaToolKit&&y.default.MediaToolKit.audioCreate?new Br:new jr},getRecorderManager:h.getRecorderManager,chooseImage:dr.chooseImage,previewImage:dr.previewImage,previewMedia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(O.beforeInvoke)("previewMedia",e,{sources:[]}))if(e.sources.length>50)Object(O.beforeInvokeFail)("previewMedia",e,"maximum length of sources is 50");else{var t=Object(Yr.getPluginId)(this),n=function(e){return"string"!=typeof t||"/"!==e[0]?e:Object(j.convertProtocolPath)("plugin-private://"+t+e)},r=JSON.parse(JSON.stringify(e.sources)),i=[],o=[];r.forEach((function(e,t){e.type=e.type||"image",e.index=t,e.url=e.url?zr.FakeTempFilePathMap.get(e.url)||e.url:"","image"===e.type?i.push(e):"video"===e.type&&o.push(e)}));var a=i.map((function(e){return e.url||""})).map((function(e){return n(e)})),s=o.map((function(e){return e.url||""})).map((function(e){return n(e)}));Object(wr.getCloudFileUrl)(a,"image",(function(t){var n=t.data.map((function(e){return e.url}));Object(wr.getCloudFileUrl)(s,"video",(function(t){var a=t.data.map((function(e){return e.url}));n.forEach((function(e,t){var n=i[t].index;r[n].url=e})),a.forEach((function(e,t){var n=o[t].index;r[n].url=e}));var s=Object.assign({current:0},e,{sources:r});Object(O.invokeMethod)("previewMedia",s)}))}))}},saveImageToPhotosAlbum:dr.saveImageToPhotosAlbum,joinVoIPChat:kD,exitVoIPChat:xD,updateVoIPChatMuteConfig:PD,onVoIPChatMembersChanged:DD,onVoIPChatSpeakersChanged:RD,onVoIPChatInterrupted:jD,offVoIPChatMembersChanged:ND,offVoIPChatSpeakersChanged:MD,offVoIPChatInterrupted:LD,subscribeVoIPVideoMembers:BD,onVoIPVideoMembersChanged:FD,offVoIPVideoMembersChanged:UD,onVoIPChatStateChanged:WD,offVoIPChatStateChanged:VD,createCanvas:_a.createCanvas,createOffScreenCanvas:_a.gameCreateOffScreenCanvas,createImage:ya.createImage,onTouchStart:PP,offTouchStart:DP,onTouchMove:RP,offTouchMove:jP,onTouchEnd:NP,offTouchEnd:MP,onTouchCancel:LP,offTouchCancel:BP,onWheel:AP,offWheel:CP,onMouseDown:FP,offMouseDown:UP,onMouseMove:WP,offMouseMove:VP,onMouseUp:GP,offMouseUp:HP,onKeyDown:_P,offKeyDown:yP,onKeyUp:mP,offKeyUp:bP,onPointerLockChange:zP,offPointerLockChange:YP,onPointerLockError:qP,offPointerLockError:KP,onKeyboardInput:wP,offKeyboardInput:OP,onKeyboardConfirm:EP,offKeyboardConfirm:SP,onKeyboardComplete:TP,offKeyboardComplete:IP,onWindowResize:kP,offWindowResize:xP,getShareInfo:hD,authPrivateMessage:mD,showShareMenu:function(e){setTimeout(gD.bind(this,e),0)},hideShareMenu:vD,updateShareMenu:function(e){setTimeout(_D.bind(this,e),0)},onShareAppMessage:rP,offShareAppMessage:iP,onShareTimeline:oP,offShareTimeline:aP,shareAppMessage:ma.shareAppMessage,showUpdatableMessageSubscribeButton:yD,setMessageToFriendQuery:ba.setMessageToFriendQuery,onShareMessageToFriend:ma.onShareMessageToFriend,onAddToFavorites:gP,offAddToFavorites:vP,showShareImageMenu:bD,onCopyUrl:Mc.onCopyUrl,offCopyUrl:Mc.offCopyUrl,setWindowSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvokeFail)("setWindowSize",e,"deprecated")},setTopBarText:qi.setTopBarText,showToast:wD,hideToast:OD,showLoading:ED,hideLoading:SD,showModal:TD,showActionSheet:ID,setMenuStyle:function(e){"dark"===e.style||"light"===e.style?Object(O.invokeMethod)("setMenuStyle",e):Object(O.beforeInvokeFail)("setMenuStyle",e,'invalid style "'+e.style+'"')},setStatusBarStyle:function(e){Object(O.beforeInvoke)("setStatusBarStyle",e,{style:""})&&("white"===e.style||"black"===e.style?Object(O.invokeMethod)("setStatusBarStyle",Object.assign({},e,{color:e.style})):Object(O.beforeInvokeFail)("setStatusBarStyle",e,'invalid style "'+e.style+'"'))},getMenuButtonBoundingClientRect:Ki.getMenuButtonBoundingClientRect,hideSplashScreen:function(e){Object(O.invokeMethod)("hideSplashScreen",e)},onError:Qx,offError:eP,onUnhandledRejection:tP,offUnhandledRejection:nP,onLaunch:sP,offLaunch:cP,onShow:uP,offShow:lP,onHide:dP,offHide:fP,onStickyStatusChange:pP,offStickyStatusChange:hP,onAudioInterruptionBegin:Kr,offAudioInterruptionBegin:Jr,onAudioInterruptionEnd:$r,offAudioInterruptionEnd:Zr,getSystemInfo:tt.getSystemInfo,getSystemInfoSync:tt.getSystemInfoSync,getBatteryInfo:r.getBatteryInfo,getBatteryInfoSync:r.getBatteryInfoSync,getLaunchOptionsSync:wa.getLaunchOptionsSync,getEnterOptionsSync:Oa.getEnterOptionsSync,setPreferredFramesPerSecond:function(e){"function"==typeof y.default.setPreferredFramesPerSecond?y.default.setPreferredFramesPerSecond(e):console.warn("当前版本暂不支持设置帧率")},loadFont:function(e){return"function"==typeof y.default.loadFont?y.default.loadFont(e):(console.warn("当前版本暂不支持此加载自定义字体"),null)},setCursor:function(e){return"function"==typeof y.default.setCursor?y.default.setCursor(e):(console.warn("当前版本暂不支持加载自定义光标"),!1)},requestPointerLock:Ea,exitPointerLock:Sa,isPointerLocked:Ta,getTextLineHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fontStyle,n=void 0===t?"normal":t,r=e.fontWeight,i=void 0===r?"normal":r,o=e.fontSize,a=void 0===o?16:o,s=e.fontFamily,c=e.text,u=void 0===c?"":c;if(m.IS_DEVTOOLS){qs||((qs=zs("div")).style.opacity=0,Ys(qs)),qs.style.fontStyle=n,qs.style.fontWeight=i,qs.style.fontSize=a+"px",qs.style.fontFamily=s,qs.innerHTML=u||"ajghl~!";var l=qs.clientHeight;return l}var d=n+" "+i+" "+a+"px "+s;return y.default.getTextLineHeight(d,u)},requestMidasPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_PAY),m.IS_IOS)Object(O.beforeInvokeFail)(eu,e,"iOS not supported");else if(-1!==Qc.indexOf(e.mode)){var t=e.env;Object(Kc.default)().then(function(){var n=Object(Gt.default)(Vt.a.mark((function n(r){var i,o,a,s,c,u;return Vt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.openId,o=r.appId,Hc[e.mode].destroy(),a=Hc[e.mode].init({env:t}),(s=$c(e)).openid=i,s.login_wx_appid=o||e.loginWXAppId,n.next=8,qc();case 8:return(c=n.sent)&&(u="settlement_mark="+encodeURIComponent(c),s.additional={remark:encodeURIComponent(u)}),s.additional,a.launchPay(s,(function(t){var n=t.resultMsg,r=t.resultCode;if(0===r)Object(O.beforeInvokeCallback)({name:eu,args:e});else{n=n.replace("requestVirtualPayment:fail","");var i="requestVirtualPayment:fail PAY_LIMIT";-15009===r?Object(Et._showModal)({title:"提示",content:n,showCancel:!1,success:function(){Object(O.beforeInvokeFail)(eu,e,i,r)},fail:function(){Object(O.beforeInvokeFail)(eu,e,i,r)}}):Object(O.beforeInvokeFail)(eu,e,n,r)}})),n.abrupt("return",void 0);case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(t){Object(O.beforeInvokeFail)(eu,e,t,-1)}))}else Object(O.beforeInvokeFail)(eu,e,"mode错误",1e3)},requestMidasFriendPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)(nu,e,{mode:"",offerId:"",currencyType:"",buyQuantity:0,outTradeNo:"",nonceStr:"",timeStamp:0,signature:""})?(Object(Et.showLoading)({title:"加载中"}),su(e).then(cu).then(uu).then((function(){return iu(e)})).then((function(e){return Object(Et.hideLoading)(),ou(e)})).then((function(t){Object(O.beforeInvokeCallback)({name:nu,args:e,res:t})})).catch((function(t){Object(Et.hideLoading)(),ru.error("fail:",t),Object(O.beforeInvokeFail)(nu,e,t.errMsg,+(t.errCode||t.err_code))}))):au({actionStatus:0,errType:7})},checkIsSupportMidasFriendPayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Promise.resolve().then(cu).then(uu).then((function(){return lu(e)})).catch((function(t){var n=t.errMsg,r=t.errCode,i=t.err_code;Object(O.beforeInvokeFail)("checkIsSupportMidasFriendPayment",e,n,+(r||i))}))},gameLoginReport:function(){Object(fr.reportDeprecatedAPI)("gameLoginReport"),console.warn("wx.gameLoginReport 已经废弃")},gameLogoutReport:function(){Object(fr.reportDeprecatedAPI)("gameLogoutReport"),console.warn("wx.gameLogoutReport 已经废弃")},exitMiniProgram:Ji,launchApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(C.checkPermissionSync)("launchApp"))if(Ls)if(Bs){var t=Object.assign({},e,{appId:Us});Fs===Ms.navigateBackApplication?t.extraData=e.appParameter:(t.messageExt=e.appParameter,t.extInfo=e.appParameter),Fs(t)}else Object(O.beforeInvokeFail)("launchApp",e,"invalid scene");else Object(O.beforeInvokeFail)("launchApp",e,"not in touchEnd");else Object(O.beforeInvokeFail)("launchApp",e,"no permission")},showKeyboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.defaultValue&&e.maxLength){var t=parseInt(e.maxLength,10);Number.isNaN(t)||(t=Math.max(0,t),e.defaultValue=e.defaultValue.toString().slice(0,t))}Object(O.invokeMethod)("showKeyboard",e)},hideKeyboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("hideKeyboard",e)},updateKeyboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("updateKeyboard",e)},getExtConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){var t={errMsg:"getExtConfig: ok",extConfig:tx()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},getExtConfigSync:tx,bindGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("bindGroup",e)},joinGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m.IS_ANDROID&&w.default.clientVersion<654316032||m.IS_IOS?Object(ko._operateWXData)({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success:function(e){var t=JSON.parse(e.rawData);Object(O.invokeMethod)("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail:function(e){var t=e.errMsg;Object(Et.showToast)({title:t.replace(/^\w+:fail\s+/,""),icon:"none"})},complete:function(){Object(O.beforeInvokeCallback)({name:"joinGroup",args:e})}}):Object(O.invokeMethod)("joinGroup",e)},getAccountInfoSync:nx.getAccountInfoSync,encode:Ws.encode,decode:Ws.decode,parseXML:function(e){m.IS_DEVTOOLS?Object(O.invokeMethod)("parseXML",e):(new y.default.XMLReader).parse(e.xml,(function(t){/ok/.test(t.errMsg)?"function"==typeof e.success&&e.success(t):"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}))},createVideo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);Object(U.isNumber)(t.zIndex)?t.zIndex=Math.min(0,t.zIndex):Object(U.isUndefined)(t.zIndex)||(t.zIndex=0);var n=new Vs.Video(t);return n},createCamera:function(e){return new Vs.Camera(e)},createLivePlayer:function(e){return new Vs.LivePlayer(e)},createLivePusher:function(e){return new Vs.LivePusher(e)},createWebView:vI.createWebView,onDeviceOrientationChange:function(e){Object(O.invokeMethod)("enableDeviceOrientationChangeListening",{enable:!0}),Gs.on("deviceOrientationChange",e)},offDeviceOrientationChange:function(e){Object(O.invokeMethod)("enableDeviceOrientationChangeListening",{enable:!1}),Gs.off("deviceOrientationChange",e)},onUserCaptureScreen:Nt.onUserCaptureScreen,offUserCaptureScreen:Nt.offUserCaptureScreen,postMessage:Xs,onMessage:$s,getOpenDataContext:function(){return Hs||(Qs()||console.warn("getOpenDataContext:fail no openDataContext target file"),Hs={postMessage:function(e){Xs(e)},onMessage:function(e){$s(e)},get canvas(){return nc()}})},createUserGameData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvokeFail)("createUserGameData",e,"createUserGameData 接口已废弃")},updateUserGameData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvokeFail)("updateUserGameData",e,"updateUserGameData 接口已废弃")},getPerformance:function(){return Ia},setEnableDebug:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.beforeInvoke)("setEnableDebug",e,{enableDebug:!0})&&(Object(O.invokeMethod)("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))},triggerGC:Da,onMemoryWarning:xa,offMemoryWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?va=null:ka(e)},reportPerformance:function(e,t,n){Dc(e,t,n)},createWorker:function(e,t){var n=Object.assign({workerUrl:e,appid:w.default.accountInfo.appId,useExperimentalWorker:!1},t);if(n.useExperimentalWorker=n.useExperimentalWorker&&Object(C.checkPermissionSync)("WeAppWorker"),function(e){for(var t=0;t<cc.length;t++)if(e===cc[t])return!0;return!1}(e))throw new Error('createWorker: Worker "'+e+'" hit black list');if(ac.default.size>=sc)throw new Error("createWorker: exceed max concurrent workers limit.");var r=__safeway__.worker.create("workers.js",n),i=r.workerId,o=r.useWKWorker;if(setTimeout((function(){Reporter.reportIDKey({key:o?"createWKWorker":"createNormalWorker"})}),0),i>0)return new oc.default(i,e,{useWKWorker:o});throw-1===i?new Error('createWorker: Worker "'+e+'" does not exists.'):new Error("createWorker: unknown error.")},createSharedArrayBuffer:rx.createSharedArrayBuffer,checkIsUserAdvisedToRest:et.checkIsUserAdvisedToRest,getUpdateManager:function(){return Ou},updateWeChatApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});Object(Eu.privateOpenUrl)(t)},getAd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scene,n=e.adId,r=e.success,i=e.fail,o=e.complete;return Jh().then((function(e){return qh({apiName:"webapi_getadvert",reqData:{scene_type:t,ad_unit_id:n,weapp_path:"index.html",sdk_version:Xh,network_type:e},success:function(e){if(-201828!==(e=JSON.parse(e.rawData)).ret)if(e.ret&&0!==parseInt(e.ret,10))"function"==typeof i&&i(e);else if(0!==e.advertisement_num)try{var t=e.advertisement_info[0],n={traceid:t.traceid,aid:t.aid,group_id:t.group_id,dest_type:t.dest_type,watermark_type:t.watermark_type,url:t.url,rl:t.rl,apurl:t.apurl,pt:t.pt,title:t.hint_txt,imageUrl:t.image_url,width:t.material_width,height:t.material_height};6===t.dest_type&&(n.weapp_ghid=t.weapp_info.original_id,n.dest_appid=t.weapp_info.appid);var o=new $h(n);"function"==typeof r&&r(o)}catch(e){"function"==typeof i&&i({errMsg:e.message})}else"function"==typeof i&&i({errMsg:"no advertisement"});else"function"==typeof i&&i({errMsg:"getAd: fail no permission"})},fail:i,complete:o})}))},openTencentGameContract:vI.openTencentGameContract,openTencentPrivacyContract:vI.openTencentPrivacyContract,openUrl:vI.openUrl,openTencentBoardGameContract:vI.openTencentBoardGameContract,openTencentChildrenGuideContract:vI.openTencentChildrenGuideContract,openTencentAccountCancelContract:vI.openTencentAccountCancelContract,createRewardedVideoAd:lT,createIncentiveVideoAd:lT,createBannerAd:function(e){return new _y(e)},createInterstitialAd:function(e){var t=cT({},e);return delete t.pluginId,new VO(t)},createCustomAd:function(e){var t=cT({},e);return delete t.pluginId,new cE(t)},createGridAd:function(e){return new qE(e)},createUserInfoButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new vT(e)},createGameClubButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new OT(e)},createOpenSettingButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new IT(e)},createFeedbackButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new xT(e)},loadSubpackage:_I,navigateToMiniProgram:function(e){Object(ET.reportRecycledAPI)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===DI?-2:Date.now()-DI}),PI?(Object(Zc.reportCanvasData)(Zc.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_JUMP_TO_APP),Object(xI._navigateToMiniProgram)(e)):Object(Un.beforeInvokeFail)("navigateToMiniProgram",e,"require user interaction")},createUDPSocket:function(){return m.IS_DEVTOOLS?new JI:new tA},markScene:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("markScene",e)},createGamePortal:function(e){return new sk(e)},createGameBanner:function(e){return new Bk(e)},createGameIcon:function(e){return new Qk(e)},getUserInteractiveStorage:function(e){var t=Object(Cd.checkKeyList)(e.keyList);t?Object(O.beforeInvokeFail)("getUserInteractiveStorage",e,t):(Reporter.reportIDKey({key:"getUserInteractiveStorage"}),ex(e))},onInteractiveStorageModified:Ph.onInteractiveStorageModified,offInteractiveStorageModified:Ph.offInteractiveStorageModified,env:Tu,getLogManager:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof e.level&&(So.level=e.level),1===So.level?So.logApiInvoke=!1:0===So.level&&(So.logApiInvoke=!0),So},getRealtimeLogManager:function(e){e=e||{};var t="develop"===w.default.envVersion||"trial"===w.default.envVersion;return e.isClientReport=!t,ha(e)},error:AA.error,isSystemError:AA.isSystemError,isSDKError:AA.isSDKError,isThirdError:AA.isThirdError,getGameRecorder:function(){return WA||(WA=new UA)},createGameRecorderShareButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return aC||(aC=new oC(e))},cloud:__cloudSDK__.getCloudAPI(),version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:__libVersionInfo__,getGameServerManager:function(){return Ih},getBox2D:function(){return y.default.Box2D},protobuf:ox,createGameComponent:function(e){return new pI(e)},getGroupEnterInfo:et.getGroupEnterInfo,onHandoff:function(e){hd=e},offHandoff:function(){hd=null},setHandoffQuery:function(e){return"string"==typeof e&&(pd="?"===e[0]?e:"?"+e,!0)},faceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("faceDetect",e)},initFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("faceProcessInit",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(O.invokeMethod)("faceProcessStop",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:Rc,revokeBufferURL:jc,createSignal:Nc,startLocalServiceDiscovery:d.startLocalServiceDiscovery,stopLocalServiceDiscovery:d.stopLocalServiceDiscovery,onLocalServiceFound:d.onLocalServiceFound,offLocalServiceFound:d.offLocalServiceFound,onLocalServiceLost:d.onLocalServiceLost,offLocalServiceLost:d.offLocalServiceLost,onLocalServiceDiscoveryStop:d.onLocalServiceDiscoveryStop,offLocalServiceDiscoveryStop:d.offLocalServiceDiscoveryStop,onLocalServiceResolveFail:d.onLocalServiceResolveFail,offLocalServiceResolveFail:d.offLocalServiceResolveFail,startCPUProfiling:function(){lx&&(px||(px=!0,lx.startProfiling()))},stopCPUProfiling:function(){return lx&&px?(px=!1,lx.stopProfiling()):null},getExptInfo:Ex,getExptInfoSync:function(e){var t={},n=bx(),r=n.exptInfo,i=n.jsDataType;return r&&Array.isArray(r.expt_param_list)&&(Array.isArray(e)||(e=r.expt_param_list.map((function(e){return e.param_name}))),r.expt_param_list.forEach((function(n){-1!==e.indexOf(n.param_name)&&(t[n.param_name]=n.param_value,function(e,t,n){Reporter.reportKeyValue({key:"ExptHit",value:[_x,yx,e,encodeURIComponent(JSON.stringify(t)),0,"",n].join(",")})}(n.expt_group_id,n,i))}))),t},reportEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};setTimeout((function(){return Sx(e,t)}))},getChannelsLiveInfo:Tx,openChannelsLive:xx,openChannelsActivity:Px,openChannelsUserProfile:Dx,navigateToUserCenter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Lx?Object(O.beforeInvokeFail)(Rx,e,"please invoke after last navigate ended"):(Lx=!0,oA().then((function(){return Fx(e)})).then((function(){return Object(O.beforeInvokeCallback)({name:Rx,args:e,res:{}}),Lx=!1,null})).catch((function(t){Object(O.beforeInvokeFail)(Rx,e,t.errMsg||t.message,t.errCode||t.err_code),Lx=!1})))},requestConsumeAdsSkipCard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Hx?Object(O.beforeInvokeFail)(Ux,e,"please invoke after last request ended"):Object(O.beforeInvoke)(Ux,e,{orderNo:""})&&(Hx=!0,Yx(e).then(qx).then(Kx).then((function(){Hx=!1,Object(O.beforeInvokeCallback)({name:Ux,args:e,res:{}})})).catch((function(t){Hx=!1,void 0!==t.errCode||void 0!==t.err_code?Object(O.beforeInvokeFail)(Ux,e,t.errMsg||t.message,+(t.errCode||t.err_code||0)):Object(O.beforeInvokeFail)(Ux,e,t.errMsg||t.message)})))}},HD=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jx(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jx(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(ax);try{for(HD.s();!(aD=HD.n()).done;){var zD=aD.value;if("function"==typeof GD[zD]){var YD=GD[zD];GD[zD]=Object(I.surroundByPromiseFactory)(YD)}}}catch(e){HD.e(e)}finally{HD.f()}["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((function(e){var t=GD[e];GD[e]=Object(I.surroundByPromiseFactory)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(A.timeout)(t,e)}))})),Reporter.setAsGame(),Object(P.apiReport)(GD);var qD={wx:Object(A.surroundWXByTryCatch)(GD,"gameSDKScriptError")};Yh(qD,v,GD),Yh(qD,g,GD);t.default=qD}]).default,wx=__appServiceSDK__.wx;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.wx=wx);;console.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);wxNativeConsole.info('Wechat Lib:' + wx.version.version + ', ' + wx.version.updateTime);if (typeof __passWAGameGlobal__ === 'function') {
  var __WAGameGlobal__ = {}
  __WAGameGlobal__.JSContext = JSContext
  __WAGameGlobal__.Protect = Protect
  __WAGameGlobal__.__cloudSDK__ = __cloudSDK__
  __WAGameGlobal__.__subContextEngine__ = __subContextEngine__
  __WAGameGlobal__.Safeway = Safeway
  __WAGameGlobal__.Reporter = Reporter
  __WAGameGlobal__.__appServiceSDK__ = __appServiceSDK__
  __WAGameGlobal__.WeixinJSBridge = WeixinJSBridge
  __WAGameGlobal__.WeixinWorker = WeixinWorker
  __WAGameGlobal__.wxNativeConsole = wxNativeConsole
  __passWAGameGlobal__(__WAGameGlobal__)
};;global.wx=wx;global.requirePlugin=requirePlugin;__subContextEngine__.initGameRelatedContexts();})(this);var __WAGameEndTime__ = Date.now();
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
