var __wxLibrary={fileName: 'WASubContext.js', envType: 'Service', contextType: 'App:SubContext', execStart: Date.now()}
try { var __defaultStackLimit__ = Error.stackTraceLimit; Error.stackTraceLimit = 40 } catch (e) {};var __WASubContextStartTime__ = Date.now();(function(__exportGlobal__){var __clientsubcontext = true;var __safeway__;var Reporter;var BaseConsole;;var __libVersionInfo__ = {"updateTime":"2021.4.28 16:10:21","version":"2.17.0","features":{"pruneWxConfigByPage":true,"injectGameContextPlugin":true,"lazyCodeLoading2":true,"injectAppSeparatedPlugin":true,"nativeTrans":true}};;var __Function__ = __exportGlobal__.Function; var Function = __Function__;;var wxNativeConsole;;var __sclEngine__ = null;!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(e){var t=!1;if(e.__wxConfig&&"string"==typeof e.__wxConfig.platform)"ios"===e.__wxConfig.platform.toLowerCase()&&(t=!0);else if("undefined"!=typeof navigator&&"string"==typeof navigator.userAgent){var r=navigator.userAgent.toLowerCase();(r.indexOf("iphone")>=0||r.indexOf("ipad")>=0)&&(t=!0)}var o=[];t&&(e.Promise=void 0,o.push("Promise")),n(2)({usePolyfill:o,useNative:["WeakMap"]}),n(22)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(3),o=n(6),i=n(8),a=n(10),s=i.data,c=i.normalize,u="USE_FUNCTION_CONSTRUCTOR",l="AsyncIteratorPrototype",d=function(e,t){if(o(e))for(var n=0;n<e.length;n++)s[c(e[n])]=t};e.exports=function(e){"object"==typeof e&&(d(e.useNative,i.NATIVE),d(e.usePolyfill,i.POLYFILL),d(e.useFeatureDetection,null),r(e,u)&&(a.USE_FUNCTION_CONSTRUCTOR=!!e.USE_FUNCTION_CONSTRUCTOR),r(e,l)&&(a.USE_FUNCTION_CONSTRUCTOR=e.AsyncIteratorPrototype))}},function(e,t,n){var r=n(4),o={}.hasOwnProperty;e.exports=function(e,t){return o.call(r(e),t)}},function(e,t,n){var r=n(5);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var r=n(7);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9),o=/#|\.prototype\./,i=function(e,t){var n=s[a(e)];return n==u||n!=c&&("function"==typeof t?r(t):!!t)},a=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(11),o=n(12),i="__core-js_shared__",a=r[i]||o(i,{});e.exports=a},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(1))},function(e,t,n){var r=n(11),o=n(13);e.exports=function(e,t){try{o(r,e,t)}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(14),o=n(15),i=n(21);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(9);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t,n){var r=n(14),o=n(16),i=n(19),a=n(20),s=Object.defineProperty;t.f=r?s:function(e,t,n){if(i(e),t=a(t,!0),i(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(14),o=n(9),i=n(17);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(11),o=n(18),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){var r=n(18);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";n.r(t);n(23),n(50),n(59),n(64),n(65),n(80),n(83),n(84),n(85),n(86),n(87),n(88),n(97),n(99),n(100),n(104),n(106),n(107),n(115),n(116),n(117),n(128),n(129),n(133),n(134),n(144),n(146),n(147),n(148),n(157),n(158),n(159),n(160),n(161),n(162),n(163),n(164),n(165),n(166),n(167),n(169),n(171),n(173),n(175),n(177),n(180);["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"].forEach((e=>{var t=globalThis[e];t&&t.name!==e&&Object.defineProperty(t,"name",{value:e})}))},function(e,t,n){"use strict";var r=n(24),o=n(14),i=n(11),a=n(3),s=n(18),c=n(15).f,u=n(38),l=i.Symbol;if(o&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof f?new l(e):void 0===e?l():l(e);return""===e&&(d[t]=!0),t};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var h=p.toString,v="Symbol(test)"==String(l("test")),g=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=h.call(e);if(a(d,e))return"";var n=v?t.slice(7,-1):t.replace(g,"$1");return""===n?void 0:n}}),r({global:!0,forced:!0},{Symbol:f})}},function(e,t,n){var r=n(11),o=n(25).f,i=n(13),a=n(29),s=n(12),c=n(38),u=n(8);e.exports=function(e,t){var n,l,d,f,p,h=e.target,v=e.global,g=e.stat;if(n=v?r:g?r[h]||s(h,{}):(r[h]||{}).prototype)for(l in t){if(f=t[l],d=e.noTargetGet?(p=o(n,l))&&p.value:n[l],!u(v?l:h+(g?".":"#")+l,e.forced)&&void 0!==d){if(typeof f==typeof d)continue;c(f,d)}(e.sham||d&&d.sham)&&i(f,"sham",!0),a(n,l,f,e)}}},function(e,t,n){var r=n(14),o=n(26),i=n(21),a=n(27),s=n(20),c=n(3),u=n(16),l=Object.getOwnPropertyDescriptor;t.f=r?l:function(e,t){if(e=a(e),t=s(t,!0),u)try{return l(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!r.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(28),o=n(5);e.exports=function(e){return r(o(e))}},function(e,t,n){var r=n(9),o=n(7),i="".split;e.exports=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,n){var r=n(11),o=n(13),i=n(3),a=n(12),s=n(30),c=n(31),u=c.get,l=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,u=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,p=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||i(n,"name")||o(n,"name",t),(c=l(n)).source||(c.source=d.join("string"==typeof t?t:""))),e!==r?(u?!p&&e[t]&&(f=!0):delete e[t],f?e[t]=n:o(e,t,n)):f?e[t]=n:a(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||s(this)}))},function(e,t,n){var r=n(10),o=Function.toString;"function"!=typeof r.inspectSource&&(r.inspectSource=function(e){return o.call(e)}),e.exports=r.inspectSource},function(e,t,n){var r,o,i,a=n(32),s=n(11),c=n(18),u=n(13),l=n(3),d=n(10),f=n(33),p=n(37),h="Object already initialized",v=s.WeakMap;if(a){var g=d.state||(d.state=new v),_=g.get,b=g.has,y=g.set;r=function(e,t){if(b.call(g,e))throw new TypeError(h);return t.facade=e,y.call(g,e,t),t},o=function(e){return _.call(g,e)||{}},i=function(e){return b.call(g,e)}}else{var m=f("state");p[m]=!0,r=function(e,t){if(l(e,m))throw new TypeError(h);return t.facade=e,u(e,m,t),t},o=function(e){return l(e,m)?e[m]:{}},i=function(e){return l(e,m)}}e.exports={set:r,get:o,has:i,enforce:function(e){return i(e)?o(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(11),o=n(30),i=r.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t,n){var r=n(34),o=n(36),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,n){var r=n(35),o=n(10);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.11.0",mode:r?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!1},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+r).toString(36)}},function(e,t){e.exports={}},function(e,t,n){var r=n(3),o=n(39),i=n(25),a=n(15);e.exports=function(e,t){for(var n=o(t),s=a.f,c=i.f,u=0;u<n.length;u++){var l=n[u];r(e,l)||s(e,l,c(t,l))}}},function(e,t,n){var r=n(40),o=n(42),i=n(49),a=n(19);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(a(e)),n=i.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(41),o=n(11),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e])||i(o[e]):r[e]&&r[e][t]||o[e]&&o[e][t]}},function(e,t,n){var r=n(11);e.exports=r},function(e,t,n){var r=n(43),o=n(48).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},function(e,t,n){var r=n(3),o=n(27),i=n(44).indexOf,a=n(37);e.exports=function(e,t){var n,s=o(e),c=0,u=[];for(n in s)!r(a,n)&&r(s,n)&&u.push(n);for(;t.length>c;)r(s,n=t[c++])&&(~i(u,n)||u.push(n));return u}},function(e,t,n){var r=n(27),o=n(45),i=n(47),a=function(e){return function(t,n,a){var s,c=r(t),u=o(c.length),l=i(a,u);if(e&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t,n){var r=n(46),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(46),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){n(51)("asyncIterator")},function(e,t,n){var r=n(41),o=n(3),i=n(52),a=n(15).f;e.exports=function(e){var t=r.Symbol||(r.Symbol={});o(t,e)||a(t,e,{value:i.f(e)})}},function(e,t,n){var r=n(53);t.f=r},function(e,t,n){var r=n(11),o=n(34),i=n(3),a=n(36),s=n(54),c=n(58),u=o("wks"),l=r.Symbol,d=c?l:l&&l.withoutSetter||a;e.exports=function(e){return i(u,e)&&(s||"string"==typeof u[e])||(s&&i(l,e)?u[e]=l[e]:u[e]=d("Symbol."+e)),u[e]}},function(e,t,n){var r=n(55),o=n(56),i=n(9);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!Symbol.sham&&(r?38===o:o>37&&o<41)}))},function(e,t,n){var r=n(7),o=n(11);e.exports="process"==r(o.process)},function(e,t,n){var r,o,i=n(11),a=n(57),s=i.process,c=s&&s.versions,u=c&&c.v8;u?o=(r=u.split("."))[0]+r[1]:a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(o=r[1]),e.exports=o&&+o},function(e,t,n){var r=n(40);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(54);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){"use strict";var r=n(24),o=n(60),i=n(4),a=n(45),s=n(46),c=n(63);r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=i(this),n=a(t.length),r=c(t,0);return r.length=o(r,t,t,n,0,void 0===e?1:s(e)),r}})},function(e,t,n){"use strict";var r=n(6),o=n(45),i=n(61),a=function(e,t,n,s,c,u,l,d){for(var f,p=c,h=0,v=!!l&&i(l,d,3);h<s;){if(h in n){if(f=v?v(n[h],h,t):n[h],u>0&&r(f))p=a(e,t,f,o(f.length),p,u-1)-1;else{if(p>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[p]=f}p++}h++}return p};e.exports=a},function(e,t,n){var r=n(62);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var r=n(18),o=n(6),i=n(53)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?r(n)&&null===(n=n[i])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){"use strict";var r=n(24),o=n(60),i=n(4),a=n(45),s=n(62),c=n(63);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=i(this),r=a(n.length);return s(e),(t=c(n,0)).length=o(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},function(e,t,n){"use strict";var r=n(27),o=n(66),i=n(71),a=n(31),s=n(72),c="Array Iterator",u=a.set,l=a.getterFor(c);e.exports=s(Array,"Array",(function(e,t){u(this,{type:c,target:r(e),index:0,kind:t})}),(function(){var e=l(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),i.Arguments=i.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var r=n(53),o=n(67),i=n(15),a=r("unscopables"),s=Array.prototype;null==s[a]&&i.f(s,a,{configurable:!0,value:o(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r,o=n(19),i=n(68),a=n(48),s=n(37),c=n(70),u=n(17),l=n(33),d=l("IE_PROTO"),f=function(){},p=function(e){return"<script>"+e+"</"+"script>"},h=function(){try{r=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;h=r?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(r):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var n=a.length;n--;)delete h.prototype[a[n]];return h()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(f.prototype=o(e),n=new f,f.prototype=null,n[d]=e):n=h(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(14),o=n(15),i=n(19),a=n(69);e.exports=r?Object.defineProperties:function(e,t){i(e);for(var n,r=a(t),s=r.length,c=0;s>c;)o.f(e,n=r[c++],t[n]);return e}},function(e,t,n){var r=n(43),o=n(48);e.exports=Object.keys||function(e){return r(e,o)}},function(e,t,n){var r=n(40);e.exports=r("document","documentElement")},function(e,t){e.exports={}},function(e,t,n){"use strict";var r=n(24),o=n(73),i=n(75),a=n(78),s=n(77),c=n(13),u=n(29),l=n(53),d=n(35),f=n(71),p=n(74),h=p.IteratorPrototype,v=p.BUGGY_SAFARI_ITERATORS,g=l("iterator"),_="keys",b="values",y="entries",m=function(){return this};e.exports=function(e,t,n,l,p,w,O){o(n,t,l);var S,I,E,C=function(e){if(e===p&&D)return D;if(!v&&e in A)return A[e];switch(e){case _:case b:case y:return function(){return new n(this,e)}}return function(){return new n(this)}},T=t+" Iterator",k=!1,A=e.prototype,P=A[g]||A["@@iterator"]||p&&A[p],D=!v&&P||C(p),j="Array"==t&&A.entries||P;if(j&&(S=i(j.call(new e)),h!==Object.prototype&&S.next&&(d||i(S)===h||(a?a(S,h):"function"!=typeof S[g]&&c(S,g,m)),s(S,T,!0,!0),d&&(f[T]=m))),p==b&&P&&P.name!==b&&(k=!0,D=function(){return P.call(this)}),d&&!O||A[g]===D||c(A,g,D),f[t]=D,p)if(I={values:C(b),keys:w?D:C(_),entries:C(y)},O)for(E in I)(v||k||!(E in A))&&u(A,E,I[E]);else r({target:t,proto:!0,forced:v||k},I);return I}},function(e,t,n){"use strict";var r=n(74).IteratorPrototype,o=n(67),i=n(21),a=n(77),s=n(71),c=function(){return this};e.exports=function(e,t,n){var u=t+" Iterator";return e.prototype=o(r,{next:i(1,n)}),a(e,u,!1,!0),s[u]=c,e}},function(e,t,n){"use strict";var r,o,i,a=n(9),s=n(75),c=n(13),u=n(3),l=n(53),d=n(35),f=l("iterator"),p=!1;[].keys&&("next"in(i=[].keys())?(o=s(s(i)))!==Object.prototype&&(r=o):p=!0);var h=null==r||a((function(){var e={};return r[f].call(e)!==e}));h&&(r={}),d&&!h||u(r,f)||c(r,f,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var r=n(3),o=n(4),i=n(33),a=n(76),s=i("IE_PROTO"),c=Object.prototype;e.exports=a?Object.getPrototypeOf:function(e){return e=o(e),r(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var r=n(9);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(15).f,o=n(3),i=n(53)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},function(e,t,n){var r=n(19),o=n(79);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return r(n),o(i),t?e.call(n,i):n.__proto__=i,n}}():void 0)},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){"use strict";var r=n(24),o=n(81).left,i=n(82),a=n(56),s=n(55);r({target:"Array",proto:!0,forced:!i("reduce")||!s&&a>79&&a<83},{reduce:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(62),o=n(4),i=n(28),a=n(45),s=function(e){return function(t,n,s,c){r(n);var u=o(t),l=i(u),d=a(u.length),f=e?d-1:0,p=e?-1:1;if(s<2)for(;;){if(f in l){c=l[f],f+=p;break}if(f+=p,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=p)f in l&&(c=n(c,l[f],f,u));return c}};e.exports={left:s(!1),right:s(!0)}},function(e,t,n){"use strict";var r=n(9);e.exports=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))}},function(e,t,n){"use strict";var r=n(24),o=n(81).right,i=n(82),a=n(56),s=n(55);r({target:"Array",proto:!0,forced:!i("reduceRight")||!s&&a>79&&a<83},{reduceRight:function(e){return o(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(24),o=n(6),i=[].reverse,a=[1,2];r({target:"Array",proto:!0,forced:String(a)===String(a.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),i.call(this)}})},function(e,t,n){"use strict";var r=n(24),o=n(62),i=n(4),a=n(9),s=n(82),c=[],u=c.sort,l=a((function(){c.sort(void 0)})),d=a((function(){c.sort(null)})),f=s("sort");r({target:"Array",proto:!0,forced:l||!d||!f},{sort:function(e){return void 0===e?u.call(i(this)):u.call(i(this),o(e))}})},function(e,t,n){n(66)("flat")},function(e,t,n){n(66)("flatMap")},function(e,t,n){"use strict";var r=n(24),o=n(11),i=n(89),a=n(96),s="ArrayBuffer",c=i.ArrayBuffer;r({global:!0,forced:o.ArrayBuffer!==c},{ArrayBuffer:c}),a(s)},function(e,t,n){"use strict";var r=n(11),o=n(14),i=n(90),a=n(13),s=n(91),c=n(9),u=n(92),l=n(46),d=n(45),f=n(93),p=n(94),h=n(75),v=n(78),g=n(42).f,_=n(15).f,b=n(95),y=n(77),m=n(31),w=m.get,O=m.set,S="ArrayBuffer",I="DataView",E="Wrong index",C=r.ArrayBuffer,T=C,k=r.DataView,A=k&&k.prototype,P=Object.prototype,D=r.RangeError,j=p.pack,x=p.unpack,R=function(e){return[255&e]},M=function(e){return[255&e,e>>8&255]},N=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},L=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return j(e,23,4)},F=function(e){return j(e,52,8)},W=function(e,t){_(e.prototype,t,{get:function(){return w(this)[t]}})},U=function(e,t,n,r){var o=f(n),i=w(e);if(o+t>i.byteLength)throw D(E);var a=w(i.buffer).bytes,s=o+i.byteOffset,c=a.slice(s,s+t);return r?c:c.reverse()},V=function(e,t,n,r,o,i){var a=f(n),s=w(e);if(a+t>s.byteLength)throw D(E);for(var c=w(s.buffer).bytes,u=a+s.byteOffset,l=r(+o),d=0;d<t;d++)c[u+d]=l[i?d:t-d-1]};if(i){if(!c((function(){C(1)}))||!c((function(){new C(-1)}))||c((function(){return new C,new C(1.5),new C(NaN),C.name!=S}))){for(var G,H=(T=function(e){return u(this,T),new C(f(e))}).prototype=C.prototype,z=g(C),q=0;z.length>q;)(G=z[q++])in T||a(T,G,C[G]);H.constructor=T}v&&h(A)!==P&&v(A,P);var Y=new k(new T(2)),K=A.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||s(A,{setInt8:function(e,t){K.call(this,e,t<<24>>24)},setUint8:function(e,t){K.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){u(this,T,S);var t=f(e);O(this,{bytes:b.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},k=function(e,t,n){u(this,k,I),u(e,T,I);var r=w(e).byteLength,i=l(t);if(i<0||i>r)throw D("Wrong offset");if(i+(n=void 0===n?r-i:d(n))>r)throw D("Wrong length");O(this,{buffer:e,byteLength:n,byteOffset:i}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=i)},o&&(W(T,"byteLength"),W(k,"buffer"),W(k,"byteLength"),W(k,"byteOffset")),s(k.prototype,{getInt8:function(e){return U(this,1,e)[0]<<24>>24},getUint8:function(e){return U(this,1,e)[0]},getInt16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=U(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return L(U(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return L(U(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return x(U(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return x(U(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,R,t)},setUint8:function(e,t){V(this,1,e,R,t)},setInt16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,M,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,N,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,N,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,B,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,F,t,arguments.length>2?arguments[2]:void 0)}});y(T,S),y(k,I),e.exports={ArrayBuffer:T,DataView:k}},function(e,t){e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},function(e,t,n){var r=n(29);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var r=n(46),o=n(45);e.exports=function(e){if(void 0===e)return 0;var t=r(e),n=o(t);if(t!==n)throw RangeError("Wrong length or index");return n}},function(e,t){var n=Math.abs,r=Math.pow,o=Math.floor,i=Math.log,a=Math.LN2;e.exports={pack:function(e,t,s){var c,u,l,d=new Array(s),f=8*s-t-1,p=(1<<f)-1,h=p>>1,v=23===t?r(2,-24)-r(2,-77):0,g=e<0||0===e&&1/e<0?1:0,_=0;for((e=n(e))!=e||e===1/0?(u=e!=e?1:0,c=p):(c=o(i(e)/a),e*(l=r(2,-c))<1&&(c--,l*=2),(e+=c+h>=1?v/l:v*r(2,1-h))*l>=2&&(c++,l/=2),c+h>=p?(u=0,c=p):c+h>=1?(u=(e*l-1)*r(2,t),c+=h):(u=e*r(2,h-1)*r(2,t),c=0));t>=8;d[_++]=255&u,u/=256,t-=8);for(c=c<<t|u,f+=t;f>0;d[_++]=255&c,c/=256,f-=8);return d[--_]|=128*g,d},unpack:function(e,t){var n,o=e.length,i=8*o-t-1,a=(1<<i)-1,s=a>>1,c=i-7,u=o-1,l=e[u--],d=127&l;for(l>>=7;c>0;d=256*d+e[u],u--,c-=8);for(n=d&(1<<-c)-1,d>>=-c,c+=t;c>0;n=256*n+e[u],u--,c-=8);if(0===d)d=1-s;else{if(d===a)return n?NaN:l?-1/0:1/0;n+=r(2,t),d-=s}return(l?-1:1)*n*r(2,d-t)}}},function(e,t,n){"use strict";var r=n(4),o=n(47),i=n(45);e.exports=function(e){for(var t=r(this),n=i(t.length),a=arguments.length,s=o(a>1?arguments[1]:void 0,n),c=a>2?arguments[2]:void 0,u=void 0===c?n:o(c,n);u>s;)t[s++]=e;return t}},function(e,t,n){"use strict";var r=n(40),o=n(15),i=n(53),a=n(14),s=i("species");e.exports=function(e){var t=r(e),n=o.f;a&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(24),o=n(9),i=n(89),a=n(19),s=n(47),c=n(45),u=n(98),l=i.ArrayBuffer,d=i.DataView,f=l.prototype.slice;r({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:o((function(){return!new l(2).slice(1,void 0).byteLength}))},{slice:function(e,t){if(void 0!==f&&void 0===t)return f.call(a(this),e);for(var n=a(this).byteLength,r=s(e,n),o=s(void 0===t?n:t,n),i=new(u(this,l))(c(o-r)),p=new d(this),h=new d(i),v=0;r<o;)h.setUint8(v++,p.getUint8(r++));return i}})},function(e,t,n){var r=n(19),o=n(62),i=n(53)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[i])?t:o(n)}},function(e,t,n){var r=n(24),o=Math.hypot,i=Math.abs,a=Math.sqrt;r({target:"Math",stat:!0,forced:!!o&&o(1/0,NaN)!==1/0},{hypot:function(e,t){for(var n,r,o=0,s=0,c=arguments.length,u=0;s<c;)u<(n=i(arguments[s++]))?(o=o*(r=u/n)*r+1,u=n):o+=n>0?(r=n/u)*r:n;return u===1/0?1/0:u*a(o)}})},function(e,t,n){var r=n(24),o=n(101);r({target:"Number",stat:!0,forced:Number.parseFloat!=o},{parseFloat:o})},function(e,t,n){var r=n(11),o=n(102).trim,i=n(103),a=r.parseFloat,s=1/a(i+"-0")!=-1/0;e.exports=s?function(e){var t=o(String(e)),n=a(t);return 0===n&&"-"==t.charAt(0)?-0:n}:a},function(e,t,n){var r=n(5),o="["+n(103)+"]",i=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),s=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(i,"")),2&e&&(n=n.replace(a,"")),n}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var r=n(24),o=n(14),i=n(105),a=n(4),s=n(62),c=n(15);o&&r({target:"Object",proto:!0,forced:i},{__defineGetter__:function(e,t){c.f(a(this),e,{get:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(35),o=n(11),i=n(9);e.exports=r||!i((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete o[e]}))},function(e,t,n){"use strict";var r=n(24),o=n(14),i=n(105),a=n(4),s=n(62),c=n(15);o&&r({target:"Object",proto:!0,forced:i},{__defineSetter__:function(e,t){c.f(a(this),e,{set:s(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(24),o=n(108),i=n(114);r({target:"Object",stat:!0},{fromEntries:function(e){var t={};return o(e,(function(e,n){i(t,e,n)}),{AS_ENTRIES:!0}),t}})},function(e,t,n){var r=n(19),o=n(109),i=n(45),a=n(61),s=n(110),c=n(113),u=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var l,d,f,p,h,v,g,_=n&&n.that,b=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),m=!(!n||!n.INTERRUPTED),w=a(t,_,1+b+m),O=function(e){return l&&c(l),new u(!0,e)},S=function(e){return b?(r(e),m?w(e[0],e[1],O):w(e[0],e[1])):m?w(e,O):w(e)};if(y)l=e;else{if("function"!=typeof(d=s(e)))throw TypeError("Target is not iterable");if(o(d)){for(f=0,p=i(e.length);p>f;f++)if((h=S(e[f]))&&h instanceof u)return h;return new u(!1)}l=d.call(e)}for(v=l.next;!(g=v.call(l)).done;){try{h=S(g.value)}catch(e){throw c(l),e}if("object"==typeof h&&h&&h instanceof u)return h}return new u(!1)}},function(e,t,n){var r=n(53),o=n(71),i=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||a[i]===e)}},function(e,t,n){var r=n(111),o=n(71),i=n(53)("iterator");e.exports=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(112),o=n(7),i=n(53)("toStringTag"),a="Arguments"==o(function(){return arguments}());e.exports=r?o:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:a?o(t):"Object"==(r=o(t))&&"function"==typeof t.callee?"Arguments":r}},function(e,t,n){var r={};r[n(53)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r=n(19);e.exports=function(e){var t=e.return;if(void 0!==t)return r(t.call(e)).value}},function(e,t,n){"use strict";var r=n(20),o=n(15),i=n(21);e.exports=function(e,t,n){var a=r(t);a in e?o.f(e,a,i(0,n)):e[a]=n}},function(e,t,n){"use strict";var r=n(24),o=n(14),i=n(105),a=n(4),s=n(20),c=n(75),u=n(25).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupGetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.get}while(n=c(n))}})},function(e,t,n){"use strict";var r=n(24),o=n(14),i=n(105),a=n(4),s=n(20),c=n(75),u=n(25).f;o&&r({target:"Object",proto:!0,forced:i},{__lookupSetter__:function(e){var t,n=a(this),r=s(e,!0);do{if(t=u(n,r))return t.set}while(n=c(n))}})},function(e,t,n){"use strict";var r,o,i,a,s=n(24),c=n(35),u=n(11),l=n(40),d=n(118),f=n(29),p=n(91),h=n(77),v=n(96),g=n(18),_=n(62),b=n(92),y=n(30),m=n(108),w=n(119),O=n(98),S=n(120).set,I=n(122),E=n(124),C=n(126),T=n(125),k=n(127),A=n(31),P=n(8),D=n(53),j=n(55),x=n(56),R=D("species"),M="Promise",N=A.get,L=A.set,B=A.getterFor(M),F=d,W=u.TypeError,U=u.document,V=u.process,G=l("fetch"),H=T.f,z=H,q=!!(U&&U.createEvent&&u.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,K="unhandledrejection",J=P(M,(function(){if(!(y(F)!==String(F))){if(66===x)return!0;if(!j&&!Y)return!0}if(c&&!F.prototype.finally)return!0;if(x>=51&&/native code/.test(F))return!1;var e=F.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[R]=t,!(e.then((function(){}))instanceof t)})),X=J||!w((function(e){F.all(e).catch((function(){}))})),$=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},Z=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;I((function(){for(var r=e.value,o=1==e.state,i=0;n.length>i;){var a,s,c,u=n[i++],l=o?u.ok:u.fail,d=u.resolve,f=u.reject,p=u.domain;try{l?(o||(2===e.rejection&&ne(e),e.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),c=!0)),a===u.promise?f(W("Promise-chain cycle")):(s=$(a))?s.call(a,d,f):d(a)):f(r)}catch(e){p&&!c&&p.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&ee(e)}))}},Q=function(e,t,n){var r,o;q?((r=U.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),u.dispatchEvent(r)):r={promise:t,reason:n},!Y&&(o=u["on"+e])?o(r):e===K&&C("Unhandled promise rejection",n)},ee=function(e){S.call(u,(function(){var t,n=e.facade,r=e.value;if(te(e)&&(t=k((function(){j?V.emit("unhandledRejection",r,n):Q(K,n,r)})),e.rejection=j||te(e)?2:1,t.error))throw t.value}))},te=function(e){return 1!==e.rejection&&!e.parent},ne=function(e){S.call(u,(function(){var t=e.facade;j?V.emit("rejectionHandled",t):Q("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},oe=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Z(e,!0))},ie=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw W("Promise can't be resolved itself");var r=$(t);r?I((function(){var n={done:!1};try{r.call(t,re(ie,n,e),re(oe,n,e))}catch(t){oe(n,t,e)}})):(e.value=t,e.state=1,Z(e,!1))}catch(t){oe({done:!1},t,e)}}};J&&(F=function(e){b(this,F,M),_(e),r.call(this);var t=N(this);try{e(re(ie,t),re(oe,t))}catch(e){oe(t,e)}},(r=function(e){L(this,{type:M,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=p(F.prototype,{then:function(e,t){var n=B(this),r=H(O(this,F));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=j?V.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Z(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r,t=N(e);this.promise=e,this.resolve=re(ie,t),this.reject=re(oe,t)},T.f=H=function(e){return e===F||e===i?new o(e):z(e)},c||"function"!=typeof d||(a=d.prototype.then,f(d.prototype,"then",(function(e,t){var n=this;return new F((function(e,t){a.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(F,G.apply(u,arguments))}}))),s({global:!0,wrap:!0,forced:J},{Promise:F}),h(F,M,!1,!0),v(M),i=l(M),s({target:M,stat:!0,forced:J},{reject:function(e){var t=H(this);return t.reject.call(void 0,e),t.promise}}),s({target:M,stat:!0,forced:c||J},{resolve:function(e){return E(c&&this===i?F:this,e)}}),s({target:M,stat:!0,forced:X},{all:function(e){var t=this,n=H(t),r=n.resolve,o=n.reject,i=k((function(){var n=_(t.resolve),i=[],a=0,s=1;m(e,(function(e){var c=a++,u=!1;i.push(void 0),s++,n.call(t,e).then((function(e){u||(u=!0,i[c]=e,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise},race:function(e){var t=this,n=H(t),r=n.reject,o=k((function(){var o=_(t.resolve);m(e,(function(e){o.call(t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}})},function(e,t,n){var r=n(11);e.exports=r.Promise},function(e,t,n){var r=n(53)("iterator"),o=!1;try{var i=0,a={next:function(){return{done:!!i++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){var r,o,i,a=n(11),s=n(9),c=n(61),u=n(70),l=n(17),d=n(121),f=n(55),p=a.location,h=a.setImmediate,v=a.clearImmediate,g=a.process,_=a.MessageChannel,b=a.Dispatch,y=0,m={},w="onreadystatechange",O=function(e){if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},S=function(e){return function(){O(e)}},I=function(e){O(e.data)},E=function(e){a.postMessage(e+"",p.protocol+"//"+p.host)};h&&v||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},r(y),y},v=function(e){delete m[e]},f?r=function(e){g.nextTick(S(e))}:b&&b.now?r=function(e){b.now(S(e))}:_&&!d?(i=(o=new _).port2,o.port1.onmessage=I,r=c(i.postMessage,i,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&p&&"file:"!==p.protocol&&!s(E)?(r=E,a.addEventListener("message",I,!1)):r=w in l("script")?function(e){u.appendChild(l("script")).onreadystatechange=function(){u.removeChild(this),O(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:h,clear:v}},function(e,t,n){var r=n(57);e.exports=/(?:iphone|ipod|ipad).*applewebkit/i.test(r)},function(e,t,n){var r,o,i,a,s,c,u,l,d=n(11),f=n(25).f,p=n(120).set,h=n(121),v=n(123),g=n(55),_=d.MutationObserver||d.WebKitMutationObserver,b=d.document,y=d.process,m=d.Promise,w=f(d,"queueMicrotask"),O=w&&w.value;O||(r=function(){var e,t;for(g&&(e=y.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?a():i=void 0,e}}i=void 0,e&&e.enter()},h||g||v||!_||!b?m&&m.resolve?(u=m.resolve(void 0),l=u.then,a=function(){l.call(u,r)}):a=g?function(){y.nextTick(r)}:function(){p.call(d,r)}:(s=!0,c=b.createTextNode(""),new _(r).observe(c,{characterData:!0}),a=function(){c.data=s=!s})),e.exports=O||function(e){var t={fn:e,next:void 0};i&&(i.next=t),o||(o=t,a()),i=t}},function(e,t,n){var r=n(57);e.exports=/web0s(?!.*chrome)/i.test(r)},function(e,t,n){var r=n(19),o=n(18),i=n(125);e.exports=function(e,t){if(r(e),o(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(62),o=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=r(t),this.reject=r(n)};e.exports.f=function(e){return new o(e)}},function(e,t,n){var r=n(11);e.exports=function(e,t){var n=r.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){"use strict";var r=n(24),o=n(35),i=n(118),a=n(9),s=n(40),c=n(98),u=n(124),l=n(29);r({target:"Promise",proto:!0,real:!0,forced:!!i&&a((function(){i.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return u(t,e()).then((function(){return n}))}:e,n?function(n){return u(t,e()).then((function(){throw n}))}:e)}}),o||"function"!=typeof i||i.prototype.finally||l(i.prototype,"finally",s("Promise").prototype.finally)},function(e,t,n){"use strict";var r=n(24),o=n(130).end;r({target:"String",proto:!0,forced:n(132)},{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){var r=n(45),o=n(131),i=n(5),a=Math.ceil,s=function(e){return function(t,n,s){var c,u,l=String(i(t)),d=l.length,f=void 0===s?" ":String(s),p=r(n);return p<=d||""==f?l:(c=p-d,(u=o.call(f,a(c/f.length))).length>c&&(u=u.slice(0,c)),e?l+u:u+l)}};e.exports={start:s(!1),end:s(!0)}},function(e,t,n){"use strict";var r=n(46),o=n(5);e.exports=function(e){var t=String(o(this)),n="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n}},function(e,t,n){var r=n(57);e.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},function(e,t,n){"use strict";var r=n(24),o=n(130).start;r({target:"String",proto:!0,forced:n(132)},{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";var r=n(135),o=n(19),i=n(45),a=n(46),s=n(5),c=n(140),u=n(142),l=n(143),d=Math.max,f=Math.min;r("replace",2,(function(e,t,n,r){var p=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,h=r.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(n,r){var o=s(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,o,r):t.call(String(o),n,r)},function(e,r){if(!p&&h||"string"==typeof r&&-1===r.indexOf(v)){var s=n(t,e,this,r);if(s.done)return s.value}var g=o(e),_=String(this),b="function"==typeof r;b||(r=String(r));var y=g.global;if(y){var m=g.unicode;g.lastIndex=0}for(var w=[];;){var O=l(g,_);if(null===O)break;if(w.push(O),!y)break;""===String(O[0])&&(g.lastIndex=c(_,i(g.lastIndex),m))}for(var S,I="",E=0,C=0;C<w.length;C++){O=w[C];for(var T=String(O[0]),k=d(f(a(O.index),_.length),0),A=[],P=1;P<O.length;P++)A.push(void 0===(S=O[P])?S:String(S));var D=O.groups;if(b){var j=[T].concat(A,k,_);void 0!==D&&j.push(D);var x=String(r.apply(void 0,j))}else x=u(T,_,k,A,D,r);k>=E&&(I+=_.slice(E,k)+x,E=k+T.length)}return I+_.slice(E)}]}))},function(e,t,n){"use strict";n(136);var r=n(29),o=n(9),i=n(53),a=n(13),s=i("species"),c=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u="$0"==="a".replace(/./,"$0"),l=i("replace"),d=!!/./[l]&&""===/./[l]("a","$0"),f=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,l){var p=i(e),h=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),v=h&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[s]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return t=!0,null},n[p](""),!t}));if(!h||!v||"replace"===e&&(!c||!u||d)||"split"===e&&!f){var g=/./[p],_=n(p,""[e],(function(e,t,n,r,o){return t.exec===RegExp.prototype.exec?h&&!o?{done:!0,value:g.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),b=_[0],y=_[1];r(String.prototype,e,b),r(RegExp.prototype,p,2==t?function(e,t){return y.call(e,this,t)}:function(e){return y.call(e,this)})}l&&a(RegExp.prototype[p],"sham",!0)}},function(e,t,n){"use strict";var r=n(24),o=n(137);r({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,n){"use strict";var r,o,i=n(138),a=n(139),s=n(34),c=RegExp.prototype.exec,u=s("native-string-replace",String.prototype.replace),l=c,d=(r=/a/,o=/b*/g,c.call(r,"a"),c.call(o,"a"),0!==r.lastIndex||0!==o.lastIndex),f=a.UNSUPPORTED_Y||a.BROKEN_CARET,p=void 0!==/()??/.exec("")[1];(d||p||f)&&(l=function(e){var t,n,r,o,a=this,s=f&&a.sticky,l=i.call(a),h=a.source,v=0,g=e;return s&&(-1===(l=l.replace("y","")).indexOf("g")&&(l+="g"),g=String(e).slice(a.lastIndex),a.lastIndex>0&&(!a.multiline||a.multiline&&"\n"!==e[a.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,v++),n=new RegExp("^(?:"+h+")",l)),p&&(n=new RegExp("^"+h+"$(?!\\s)",l)),d&&(t=a.lastIndex),r=c.call(s?n:a,g),s?r?(r.input=r.input.slice(v),r[0]=r[0].slice(v),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:d&&r&&(a.lastIndex=a.global?r.index+r[0].length:t),p&&r&&r.length>1&&u.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),e.exports=l},function(e,t,n){"use strict";var r=n(19);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,n){"use strict";var r=n(9);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=r((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=r((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,n){"use strict";var r=n(141).charAt;e.exports=function(e,t,n){return t+(n?r(e,t).length:1)}},function(e,t,n){var r=n(46),o=n(5),i=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){var r=n(4),o=Math.floor,i="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,c,u,l){var d=n+e.length,f=c.length,p=s;return void 0!==u&&(u=r(u),p=a),i.call(l,p,(function(r,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(d);case"<":a=u[i.slice(1,-1)];break;default:var s=+i;if(0===s)return r;if(s>f){var l=o(s/10);return 0===l?r:l<=f?void 0===c[l-1]?i.charAt(1):c[l-1]+i.charAt(1):r}a=c[s-1]}return void 0===a?"":a}))}},function(e,t,n){var r=n(7),o=n(137);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,n){"use strict";var r=n(24),o=n(102).trim;r({target:"String",proto:!0,forced:n(145)("trim")},{trim:function(){return o(this)}})},function(e,t,n){var r=n(9),o=n(103);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},function(e,t,n){"use strict";var r=n(24),o=n(102).end,i=n(145)("trimEnd"),a=i?function(){return o(this)}:"".trimEnd;r({target:"String",proto:!0,forced:i},{trimEnd:a,trimRight:a})},function(e,t,n){"use strict";var r=n(24),o=n(102).start,i=n(145)("trimStart"),a=i?function(){return o(this)}:"".trimStart;r({target:"String",proto:!0,forced:i},{trimStart:a,trimLeft:a})},function(e,t,n){n(149)("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(24),o=n(11),i=n(14),a=n(150),s=n(151),c=n(89),u=n(92),l=n(21),d=n(13),f=n(45),p=n(93),h=n(152),v=n(20),g=n(3),_=n(111),b=n(18),y=n(67),m=n(78),w=n(42).f,O=n(154),S=n(155).forEach,I=n(96),E=n(15),C=n(25),T=n(31),k=n(156),A=T.get,P=T.set,D=E.f,j=C.f,x=Math.round,R=o.RangeError,M=c.ArrayBuffer,N=c.DataView,L=s.NATIVE_ARRAY_BUFFER_VIEWS,B=s.TYPED_ARRAY_TAG,F=s.TypedArray,W=s.TypedArrayPrototype,U=s.aTypedArrayConstructor,V=s.isTypedArray,G="BYTES_PER_ELEMENT",H="Wrong length",z=function(e,t){for(var n=0,r=t.length,o=new(U(e))(r);r>n;)o[n]=t[n++];return o},q=function(e,t){D(e,t,{get:function(){return A(this)[t]}})},Y=function(e){var t;return e instanceof M||"ArrayBuffer"==(t=_(e))||"SharedArrayBuffer"==t},K=function(e,t){return V(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},J=function(e,t){return K(e,t=v(t,!0))?l(2,e[t]):j(e,t)},X=function(e,t,n){return!(K(e,t=v(t,!0))&&b(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?D(e,t,n):(e[t]=n.value,e)};i?(L||(C.f=J,E.f=X,q(W,"buffer"),q(W,"byteOffset"),q(W,"byteLength"),q(W,"length")),r({target:"Object",stat:!0,forced:!L},{getOwnPropertyDescriptor:J,defineProperty:X}),e.exports=function(e,t,n){var i=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,l="set"+e,v=o[s],g=v,_=g&&g.prototype,E={},C=function(e,t){D(e,t,{get:function(){return function(e,t){var n=A(e);return n.view[c](t*i+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,r){var o=A(e);n&&(r=(r=x(r))<0?0:r>255?255:255&r),o.view[l](t*i+o.byteOffset,r,!0)}(this,t,e)},enumerable:!0})};L?a&&(g=t((function(e,t,n,r){return u(e,g,s),k(b(t)?Y(t)?void 0!==r?new v(t,h(n,i),r):void 0!==n?new v(t,h(n,i)):new v(t):V(t)?z(g,t):O.call(g,t):new v(p(t)),e,g)})),m&&m(g,F),S(w(v),(function(e){e in g||d(g,e,v[e])})),g.prototype=_):(g=t((function(e,t,n,r){u(e,g,s);var o,a,c,l=0,d=0;if(b(t)){if(!Y(t))return V(t)?z(g,t):O.call(g,t);o=t,d=h(n,i);var v=t.byteLength;if(void 0===r){if(v%i)throw R(H);if((a=v-d)<0)throw R(H)}else if((a=f(r)*i)+d>v)throw R(H);c=a/i}else c=p(t),o=new M(a=c*i);for(P(e,{buffer:o,byteOffset:d,byteLength:a,length:c,view:new N(o)});l<c;)C(e,l++)})),m&&m(g,F),_=g.prototype=y(W)),_.constructor!==g&&d(_,"constructor",g),B&&d(_,B,s),E[s]=g,r({global:!0,forced:g!=v,sham:!L},E),G in g||d(g,G,i),G in _||d(_,G,i),I(s)}):e.exports=function(){}},function(e,t,n){var r=n(11),o=n(9),i=n(119),a=n(151).NATIVE_ARRAY_BUFFER_VIEWS,s=r.ArrayBuffer,c=r.Int8Array;e.exports=!a||!o((function(){c(1)}))||!o((function(){new c(-1)}))||!i((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||o((function(){return 1!==new c(new s(2),1,void 0).length}))},function(e,t,n){"use strict";var r,o=n(90),i=n(14),a=n(11),s=n(18),c=n(3),u=n(111),l=n(13),d=n(29),f=n(15).f,p=n(75),h=n(78),v=n(53),g=n(36),_=a.Int8Array,b=_&&_.prototype,y=a.Uint8ClampedArray,m=y&&y.prototype,w=_&&p(_),O=b&&p(b),S=Object.prototype,I=S.isPrototypeOf,E=v("toStringTag"),C=g("TYPED_ARRAY_TAG"),T=o&&!!h&&"Opera"!==u(a.opera),k=!1,A={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},P={BigInt64Array:8,BigUint64Array:8},D=function(e){if(!s(e))return!1;var t=u(e);return c(A,t)||c(P,t)};for(r in A)a[r]||(T=!1);if((!T||"function"!=typeof w||w===Function.prototype)&&(w=function(){throw TypeError("Incorrect invocation")},T))for(r in A)a[r]&&h(a[r],w);if((!T||!O||O===S)&&(O=w.prototype,T))for(r in A)a[r]&&h(a[r].prototype,O);if(T&&p(m)!==O&&h(m,O),i&&!c(O,E))for(r in k=!0,f(O,E,{get:function(){return s(this)?this[C]:void 0}}),A)a[r]&&l(a[r],C,r);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:T,TYPED_ARRAY_TAG:k&&C,aTypedArray:function(e){if(D(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(h){if(I.call(w,e))return e}else for(var t in A)if(c(A,r)){var n=a[t];if(n&&(e===n||I.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(i){if(n)for(var r in A){var o=a[r];o&&c(o.prototype,e)&&delete o.prototype[e]}O[e]&&!n||d(O,e,n?t:T&&b[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,o;if(i){if(h){if(n)for(r in A)(o=a[r])&&c(o,e)&&delete o[e];if(w[e]&&!n)return;try{return d(w,e,n?t:T&&_[e]||t)}catch(e){}}for(r in A)!(o=a[r])||o[e]&&!n||d(o,e,t)}},isView:function(e){if(!s(e))return!1;var t=u(e);return"DataView"===t||c(A,t)||c(P,t)},isTypedArray:D,TypedArray:w,TypedArrayPrototype:O}},function(e,t,n){var r=n(153);e.exports=function(e,t){var n=r(e);if(n%t)throw RangeError("Wrong offset");return n}},function(e,t,n){var r=n(46);e.exports=function(e){var t=r(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},function(e,t,n){var r=n(4),o=n(45),i=n(110),a=n(109),s=n(61),c=n(151).aTypedArrayConstructor;e.exports=function(e){var t,n,u,l,d,f,p=r(e),h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,_=i(p);if(null!=_&&!a(_))for(f=(d=_.call(p)).next,p=[];!(l=f.call(d)).done;)p.push(l.value);for(g&&h>2&&(v=s(v,arguments[2],2)),n=o(p.length),u=new(c(this))(n),t=0;n>t;t++)u[t]=g?v(p[t],t):p[t];return u}},function(e,t,n){var r=n(61),o=n(28),i=n(4),a=n(45),s=n(63),c=[].push,u=function(e){var t=1==e,n=2==e,u=3==e,l=4==e,d=6==e,f=7==e,p=5==e||d;return function(h,v,g,_){for(var b,y,m=i(h),w=o(m),O=r(v,g,3),S=a(w.length),I=0,E=_||s,C=t?E(h,S):n||f?E(h,0):void 0;S>I;I++)if((p||I in w)&&(y=O(b=w[I],I,m),e))if(t)C[I]=y;else if(y)switch(e){case 3:return!0;case 5:return b;case 6:return I;case 2:c.call(C,b)}else switch(e){case 4:return!1;case 7:c.call(C,b)}return d?-1:u||l?l:C}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterOut:u(7)}},function(e,t,n){var r=n(18),o=n(78);e.exports=function(e,t,n){var i,a;return o&&"function"==typeof(i=t.constructor)&&i!==n&&r(a=i.prototype)&&a!==n.prototype&&o(e,a),e}},function(e,t,n){n(149)("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0)},function(e,t,n){n(149)("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){n(149)("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}))},function(e,t,n){"use strict";var r=n(150);(0,n(151).exportTypedArrayStaticMethod)("from",n(154),r)},function(e,t,n){"use strict";var r=n(151),o=n(150),i=r.aTypedArrayConstructor;(0,r.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(i(this))(t);t>e;)n[e]=arguments[e++];return n}),o)},function(e,t,n){var r=n(11),o=n(168),i=n(65),a=n(13),s=n(53),c=s("iterator"),u=s("toStringTag"),l=i.values;for(var d in o){var f=r[d],p=f&&f.prototype;if(p){if(p[c]!==l)try{a(p,c,l)}catch(e){p[c]=l}if(p[u]||a(p,u,d),o[d])for(var h in i)if(p[h]!==i[h])try{a(p,h,i[h])}catch(e){p[h]=i[h]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){n(170)},function(e,t,n){"use strict";var r=n(24),o=n(75),i=n(78),a=n(67),s=n(13),c=n(21),u=n(108),l=function(e,t){var n=this;if(!(n instanceof l))return new l(e,t);i&&(n=i(new Error(void 0),o(n))),void 0!==t&&s(n,"message",String(t));var r=[];return u(e,r.push,{that:r}),s(n,"errors",r),n};l.prototype=a(Error.prototype,{constructor:c(5,l),message:c(5,""),name:c(5,"AggregateError")}),r({global:!0},{AggregateError:l})},function(e,t,n){n(172)},function(e,t,n){n(24)({global:!0},{globalThis:n(11)})},function(e,t,n){n(174)},function(e,t,n){"use strict";var r=n(24),o=n(62),i=n(125),a=n(127),s=n(108);r({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=i.f(t),r=n.resolve,c=n.reject,u=a((function(){var n=o(t.resolve),i=[],a=0,c=1;s(e,(function(e){var o=a++,s=!1;i.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,i[o]={status:"fulfilled",value:e},--c||r(i))}),(function(e){s||(s=!0,i[o]={status:"rejected",reason:e},--c||r(i))}))})),--c||r(i)}));return u.error&&c(u.value),n.promise}})},function(e,t,n){n(176)},function(e,t,n){"use strict";var r=n(24),o=n(62),i=n(40),a=n(125),s=n(127),c=n(108),u="No one promise resolved";r({target:"Promise",stat:!0},{any:function(e){var t=this,n=a.f(t),r=n.resolve,l=n.reject,d=s((function(){var n=o(t.resolve),a=[],s=0,d=1,f=!1;c(e,(function(e){var o=s++,c=!1;a.push(void 0),d++,n.call(t,e).then((function(e){c||f||(f=!0,r(e))}),(function(e){c||f||(c=!0,a[o]=e,--d||l(new(i("AggregateError"))(a,u)))}))})),--d||l(new(i("AggregateError"))(a,u))}));return d.error&&l(d.value),n.promise}})},function(e,t,n){n(178)},function(e,t,n){"use strict";var r=n(24),o=n(73),i=n(5),a=n(45),s=n(62),c=n(19),u=n(7),l=n(179),d=n(138),f=n(13),p=n(9),h=n(53),v=n(98),g=n(140),_=n(31),b=n(35),y=h("matchAll"),m="RegExp String",w="RegExp String Iterator",O=_.set,S=_.getterFor(w),I=RegExp.prototype,E=I.exec,C="".matchAll,T=!!C&&!p((function(){"a".matchAll(/./)})),k=o((function(e,t,n,r){O(this,{type:w,regexp:e,string:t,global:n,unicode:r,done:!1})}),m,(function(){var e=S(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return E.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=g(n,a(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),A=function(e){var t,n,r,o,i,s,u=c(this),l=String(e);return t=v(u,RegExp),void 0===(n=u.flags)&&u instanceof RegExp&&!("flags"in I)&&(n=d.call(u)),r=void 0===n?"":String(n),o=new t(t===RegExp?u.source:u,r),i=!!~r.indexOf("g"),s=!!~r.indexOf("u"),o.lastIndex=a(u.lastIndex),new k(o,l,i,s)};r({target:"String",proto:!0,forced:T},{matchAll:function(e){var t,n,r,o=i(this);if(null!=e){if(l(e)&&!~String(i("flags"in I?e.flags:d.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(T)return C.apply(o,arguments);if(void 0===(n=e[y])&&b&&"RegExp"==u(e)&&(n=A),null!=n)return s(n).call(e,o)}else if(T)return C.apply(o,arguments);return t=String(o),r=new RegExp(e,"g"),b?A.call(r,t):r[y](t)}}),b||y in I||f(I,y,A)},function(e,t,n){var r=n(18),o=n(7),i=n(53)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,n){n(181)},function(e,t,n){"use strict";var r=n(24),o=n(5),i=n(179),a=n(138),s=n(142),c=n(53),u=n(35),l=c("replace"),d=RegExp.prototype,f=Math.max,p=function(e,t,n){return n>e.length?-1:""===t?n:e.indexOf(t,n)};r({target:"String",proto:!0},{replaceAll:function(e,t){var n,r,c,h,v,g,_,b,y=o(this),m=0,w=0,O="";if(null!=e){if((n=i(e))&&!~String(o("flags"in d?e.flags:a.call(e))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(void 0!==(r=e[l]))return r.call(e,y,t);if(u&&n)return String(y).replace(e,t)}for(c=String(y),h=String(e),(v="function"==typeof t)||(t=String(t)),g=h.length,_=f(1,g),m=p(c,h,0);-1!==m;)b=v?String(t(h,m,c)):s(h,c,m,[],void 0,t),O+=c.slice(w,m)+b,w=m+g,m=p(c,h,m+_);return w<c.length&&(O+=c.slice(w)),O}})}]);var __wxTest__=!1,wxRunOnDebug=function(e){e()},__wxConfig,Foundation=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}n.r(t),n.d(t,"EventEmitter",(function(){return o}));var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners={}}var t,n,o;return t=e,(n=[{key:"emit",value:function(e,t){if(this.listeners[e]&&this.listeners[e].length>0){var n=!1;return this.listeners[e].forEach((function(e){0!==e.count&&e.cb(t),e.count>0&&e.count--,0===e.count&&(n=!0)})),n&&(this.listeners[e]=this.listeners[e].filter((function(e){return 0!==e.count}))),!0}return!1}},{key:"many",value:function(e,t,n){if(!t)return this;var r={count:n,cb:t};return this.listeners[e]?this.listeners[e].push(r):this.listeners[e]=[r],this}},{key:"on",value:function(e,t){this.many(e,t,-1)}},{key:"once",value:function(e,t){this.many(e,t,1)}},{key:"off",value:function(e,t){for(var n=0;n<this.listeners[e].length;n++){var r=this.listeners[e][n];if(r.cb===t)return void(r.count=0)}}}])&&r(t.prototype,n),o&&r(t,o),e}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";n.r(t),function(e){var n=e.__wxLibrary,r=e.__wxConfig,o=n.envType,i=n.contextType,a="Service"===o,s="WebView"===o,c="Worker"===o,u="Widget"===o,l=s||a&&0===i.indexOf("App:"),d=a&&0===i.indexOf("Game:"),f=c&&"function"==typeof e.workerInvokeJsApi,p=!!r.isIsolateContext,h=a&&(p&&i.indexOf("Uncertain")>=0||i.indexOf("MainContext")>=0),v=a&&i.indexOf("SubContext")>=0,g=h||v,_=s||h,b="wxlib"===r.workerContentType,y=function(){var e=r.platform;if(!e&&s){var t=window.navigator.userAgent.toLowerCase();t.indexOf("devtools")>=0?e="devtools":t.indexOf("miniprogramenv/windows")>=0?e="windows":t.indexOf("miniprogramenv/mac")>=0?e="mac":t.indexOf("miniprogramenv/mina")>=0?e="mina":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?e="ios":t.indexOf("android")>=0&&(e="android")}return(e||"unknown").toLowerCase()}(),m="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version;t.default={platform:y,SDKVersion:m,isIsolateContext:g,isGame:d,isApp:l,isMainContext:h,isSubContext:v,isSafeEnv:_,isService:a,isWebView:s,isWorker:c,isWidget:u,isSupportWorkerAPI:f,typeStr:o,isWXLibWorker:b}}.call(this,n(1))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return(i=o()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&r(i,n.prototype),i}).apply(null,arguments)}n.r(t),n.d(t,"default",(function(){return i}))},function(e,t,n){"use strict";n.r(t),function(e){var r=n(4),o=n(2),i=n(0),a=n(3),s=new i.EventEmitter,c={},u="configReady",l="libraryReady";function d(e,t){e in c?t(c[e]):h.once("lifeCycle:"+e,t)}function f(e,t){return!(e in c)&&(c[e]=t,h.emit("lifeCycle:"+e,t))}var p=e,h={EventEmitter:i.EventEmitter,on:s.on.bind(s),emit:s.emit.bind(s),once:s.once.bind(s),onConfigReady:d.bind(null,u),emitConfigReady:f.bind(null,u),get isConfigReady(){return u in c},onLibraryReady:d.bind(null,l),emitLibraryReady:f.bind(null,l),get isLibraryReady(){return l in c},onBridgeReady:function(e){"undefined"!=typeof WeixinJSBridge?e():"object"===("undefined"==typeof document?"undefined":Object(o.default)(document))&&document.addEventListener("WeixinJSBridgeReady",e,!1)},env:a.default,global:p};"undefined"!=typeof __Function__&&(Function=function(){return"return this"===arguments[arguments.length-1]?function(){return p}:Object(r.default)(__Function__,Array.prototype.slice.call(arguments))},Function.prototype=__Function__.prototype),e.__wxLibrary.onEnd=function(){h.emitLibraryReady({})},t.default=h}.call(this,n(1))}]).default;!function(e){var t=JSON.parse,n=JSON.stringify,r=Object.defineProperty,o=Foundation.env.isSubContext,i=Foundation.env.isSafeEnv,a={},s=(Foundation.env.isWXLibWorker,["env","appLaunchInfo","ext","wxAppInfo","debug","entryPagePath","envVersion","tabBar","pages","page","accountInfo","global","platform","system","appType","networkTimeout","navigateToMiniProgramAppIdList","plugins","extAppid","host","prerender"]);function c(e,t,n,o){r(e,n,{configurable:!0,enumerable:!0,get:function(){if(n in t)return t[n];try{(new Error).stack,"object"==typeof Reporter&&"function"==typeof Reporter.reportKeyValue&&Reporter.reportKeyValue({key:"DeprecatedAPI",value:"__wxConfig."+n,force:!0})}catch(e){}try{return"function"!=typeof o?o:o()}catch(e){return}},set:function(e){t[n]=e}})}function u(e){return t(n(e))}var l=!0===(__wxConfig=void 0!==e.__wxConfig?i?Object.assign({},e.__wxConfig):u(e.__wxConfig):{}).preload,d=!1,f=[],p=[],h=Foundation.env.typeStr;Foundation.env.isSubContext&&(h="SubContext");function v(e,t){try{Date.now();e(t);Date.now()}catch(e){e.message,e.stack,"object"==typeof Reporter&&"function"==typeof Reporter.errorReport&&Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:"at wxConfig.onReady callback"})}}var g=function(e){p.push(e)},_=function(e){d?void 0!==__wxConfig&&v(e,__wxConfig):"function"==typeof e&&f.push(e)},b=function(t){t.tabBar&&t.tabBar.list&&t.tabBar.list.forEach((function(e){delete e.iconData,delete e.selectedIconData})),delete t.permission;var n=t.subPackages||t.subpackages;return n&&n.length>0&&(n.forEach((function(e){delete e.pages})),t.subPackages=t.subpackages=n),d&&(__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(o||(__wxConfig._preloadRule=__wxConfig.preloadRule||{},__wxConfig._page=__wxConfig.page||{},delete __wxConfig.preloadRule,delete __wxConfig.page),__wxConfig.updatePage=function(e,t){__wxConfig.page=__wxConfig.page||{},__wxConfig.page[e]=__wxConfig.page[e+".html"]=t,a[e+".html"]=u(t)},__wxConfig.updatePreloadRule=function(e,t){__wxConfig.preloadRule=__wxConfig.preloadRule||{},__wxConfig.preloadRule[e]=t}),e.__wxConfig.page=e.__wxConfig.page||{},__wxConfig.page=__wxConfig.page||{}),t},y=function(e){return e.onReady=_,e.beforeReady=g,o||(e.preload=l),e.isReady=d,e.isSubContext=o,e.envTag=h,e.isSafeContext=i,e.sdkVersion=e.SDKVersion=Foundation.env.SDKVersion,e.twoPhaseInject=!0,e.platform=Foundation.env.platform,e.brand||"ios"!==e.platform||(e.brand="iPhone"),"number"==typeof e.pixelRatio?e.devicePixelRatio=e.pixelRatio:"number"==typeof e.devicePixelRatio&&(e.pixelRatio=e.devicePixelRatio),e},m=function(){void 0===e.__wxConfig||d||(d=!0,Object.assign(__wxConfig,i?e.__wxConfig:u(e.__wxConfig)),__wxConfig=y(__wxConfig),__wxConfig=b(__wxConfig),function(e){if(!p.length)return e();var t=!1;setTimeout((function(){t||(console.warn("beforeReady timeout"),t=!0,e())}),3e3),Promise.all(p).catch((function(e){console.warn("beforeReady error",e)})).then((function(){t||(t=!0,e())})),p=[]}((function(){__wxConfig.onReadyStart=Date.now(),f.forEach((function(e){v(e,__wxConfig)})),__wxConfig.onReadyEnd=Date.now(),f=[],function(){if(!i){var t=e.__wxConfig,n={},r={};a=t.page||{},__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage&&(a={});try{c(r,n,"deprecated",!0),s.forEach((function(e){if(e in t){var o=t[e];switch(e){case"page":c(r,n,e,a);break;case"env":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.env is deprecated, please use wx.env instead."),{USER_DATA_PATH:o.USER_DATA_PATH}}));break;case"accountInfo":c(r,n,e,{appId:o.appId,icon:o.icon,nickname:o.nickname});break;case"appLaunchInfo":c(r,n,e,(function(){return console.warn("DeprecationWarning: __wxConfig.appLaunchInfo is deprecated, please use wx.getLaunchOptionsSync() instead."),wx&&"function"==typeof wx.getLaunchOptionsSync?wx.getLaunchOptionsSync():{}}));break;case"wxAppInfo":c(r,n,e,{maxRequestConcurrent:o.maxRequestConcurrent,maxUploadConcurrent:o.maxUploadConcurrent,maxDownloadConcurrent:o.maxDownloadConcurrent,maxWorkerConcurrent:o.maxWorkerConcurrent,maxWebsocketConnect:o.maxWebsocketConnect});break;default:c(r,n,e,o)}}})),e.__wxConfig=r}catch(n){e.__wxConfig=t}}}()})))};function w(){Foundation.emitConfigReady(__wxConfig)}__wxConfig=y(__wxConfig),__wxConfig=b(__wxConfig),Foundation.onConfigReady((function(){m()})),o?__wxConfig.__readyHandler=w:l?Foundation.onBridgeReady((function(){WeixinJSBridge.on("onWxConfigReady",w)})):Foundation.onLibraryReady(w)}(this),function(e){function t(e){Foundation.emit("unhandledRejection",e)||console.error("Uncaught (in promise)",e.reason)}var n,r,o=(n=[],r=[],{set:function(e,t){n.push(e),r.push(t)},get:function(e){var t=n.indexOf(e);if(-1!==t)return r[t]},delete:function(e){var t=n.indexOf(e);-1!==t&&(n.splice(t,1),r.splice(t,1))}});"object"==typeof e&&"function"==typeof e.addEventListener?(e.addEventListener("unhandledrejection",(function(e){t({reason:e.reason,promise:e.promise}),e.preventDefault()})),e.addEventListener("error",(function(e){var t;t=e.error||e.message,Foundation.emit("error",t)||console.error("Uncaught",t),e.preventDefault()}))):void 0===e.onunhandledrejection&&Object.defineProperty(e,"onunhandledrejection",{value:function(e){e=e||{},"android"===__wxConfig.platform?function(e){var n=o.get(e.promise);if(n)n.event=e;else{var r={event:e};setTimeout((function(){0===r.event.type&&t(r.event),o.delete(r.event.promise)}),0),o.set(e.promise,r)}}({type:e.type,reason:e.reason,promise:e.promise}):t({reason:e.reason,promise:e.promise})}})}(this);var wxConsole=["log","info","warn","error","debug","time","timeEnd","group","groupEnd"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxPerfConsole=["log","info","warn","error","time","timeEnd","trace","profile","profileSync"].reduce((function(e,t){return e[t]=function(){},e}),{}),wxNativeConsole=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.r(t);var s=Foundation,c=s.onConfigReady,u=s.env,l=["log","info","warn","error","debug","createLogger"].reduce((function(e,t){return e[t]=function(){},e}),{});function d(e,t){this.num=e,this.type=t}var f,p,h,v,g,_,b={ALL:new d(Number.MIN_VALUE,"ALL"),DEBUG:new d(5e3,"DEBUG"),LOG:new d(1e4,"LOG"),INFO:new d(2e4,"INFO"),WARN:new d(3e4,"WARN"),ERROR:new d(4e4,"ERROR"),OFF:new d(Number.MAX_VALUE,"OFF")},y=function(e,t){return{debug:e(b.DEBUG,t),log:e(b.LOG,t),info:e(b.INFO,t),warn:e(b.WARN,t),error:e(b.ERROR,t)}},m=b.INFO;if(u.isWorker||u.isWidget){l=Object.assign({createLogger:function(){return wxConsole}},wxConsole)}else u.isSubContext&&u.isIsolateContext?(f=[],p=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];f.push({level:e,logs:r,category:t})}},c((function e(){setTimeout((function(){var t=wxNativeConsole.__isFromMainContext?wxNativeConsole.__mergeSubContextLogs:null;t?(t(f),f=[]):e()}),1e3)})),l=a(a({},y(p)),{},{createLogger:function(e){return y(p,"string"==typeof e?e:"default")},__isFromMainContext:!1})):(h=__wxConfig.platform,v=[],g=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),o=("0"+e.getMinutes()).slice(-2),i=("0"+e.getSeconds()).slice(-2),a=("00"+e.getMilliseconds()).slice(-3),s=e.getFullYear()+"-"+t+"-"+n,c=r+":"+o+":"+i+"."+a;return"ios"===h?s+" "+c+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):s+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+c},_=function(e,t){var n=e.type;return function(){for(var r,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];if(t&&Array.prototype.unshift.call(a,"["+t+"]"),(r=wxConsole[n.toLowerCase()]).call.apply(r,[wxConsole].concat(a)),e.num>=m.num){var c=new Date,u=Array.prototype.slice.call(a).map((function(e){switch(o(e)){case"bigint":case"boolean":case"function":case"number":return e.toString();case"string":return e;case"symbol":return e.toString();case"undefined":return"undefined";case"object":var t;try{t=JSON.stringify(e)}catch(e){t="[对象含有循环引用]"}return t;default:return}})).join(" ");v&&v.length>1024&&v.shift(),v.push({date:c,type:n,content:u})}}},c((function(){setTimeout((function e(){var t;setTimeout(e,3e3),0!==v.length&&(t=v,"ios"===h?WeixinJSBridge.invoke("systemLog",{dataArray:t.map((function(e){return{message:"\n"+g(e.date)+" ["+e.type[0].toUpperCase()+"][wxapplib]] "+e.content}}))}):"android"===h&&WeixinJSBridge.invoke("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+g(e.date)+"][wxapplib]] "+e.content}))).join("\n")}),v=[])}),3e3)})),l=a(a({},y(_)),{},{createLogger:function(e){return y(_,"string"==typeof e?e:"default")},__mergeSubContextLogs:function(e){Array.isArray(e)&&e.forEach((function(e){var t=e.level,n=e.logs,r=e.category;_(t,r)(n)}))},__isFromMainContext:!0}));t.default=l}]).default,JSContext=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,n){"use strict";n.r(t),n.d(t,"ObjDefProp",(function(){return s})),n.d(t,"getDataType",(function(){return c})),n.d(t,"getAllPropertyDescs",(function(){return u}));var r=Object.prototype.toString,o=Object.getPrototypeOf,i=Object.getOwnPropertyNames,a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,c=function(e){return r.call(e).split(" ")[1].split("]")[0]},u=function(e){for(var t=[],n=function(e){i(e).forEach((function(n){var r=a(e,n);void 0!==r&&(r.name=n,t.push(r))}))},r=e;r;r=o(r))n(r);return t}},function(e,t,n){"use strict";n.r(t);var r,o=n(0),i={},a={subscribeHandler:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(void 0!==e&&e===r){t=t.valueOf();var o=i[t];"function"==typeof o&&o(n)}}},s={__init__:function(e,t){void 0===r&&void 0!==e&&(r=e).register(e,a,t)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(o.getDataType)(t);if("Object"!==n&&"Undefined"!==n)throw new Error("params should be an object.");var i=e.valueOf(),s=t||{};r&&"function"==typeof r.subscribeHandler&&r.subscribeHandler(r,a,i,s)},subscribe:function(e,t){i[e]=t},invokeMainContextMethodSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=Object(o.getDataType)(t);if("Object"!==i&&"Undefined"!==i)throw new Error("params should be an object.");var a,s=e.valueOf();return a=n?t||{}:void 0===t?{}:t,r.syncMethodHandler(r,s,a,n)}};t.default=s},function(e,t,n){"use strict";n.r(t),t.default={alloc:function(){return-9999},create:function(){return-9999},destroy:function(){return-9999},publish:function(){},subscribe:function(){},supportAlloc:function(){}}},function(e,t,n){"use strict";n.r(t);var r,o,i,a,s,c,u=n(0),l=["constructor","__proto__","__defineGetter__","__defineSetter__"],d="undefined"!=typeof WeakMap?new WeakMap:{},f="undefined"!=typeof WeakMap?new WeakMap:{},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f.get(e);return void 0!==n||(n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=0;i<r.length;i++){var a=r[i];r[i]=v(a)}var s=t?d.get(this):void 0,c=e.call.apply(e,[s].concat(r));return v(c)},f.set(e,n)),n},h=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(v(r))}return t},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(u.getDataType)(e);return"String"===n||"Number"===n||"Boolean"===n?e.valueOf():"Object"===n?new m(e):"Array"===n?h(e):"Function"===n?p(e,t):"Undefined"!==n&&"Null"===n?null:void 0},g=function(e){return function(){var t=d.get(this);if(void 0!==t){if(null===t)return null;var n=t[e];return v(n,!0)}}},_=function(e){return function(t){var n=d.get(this);if(void 0!==n)return null===n?null:void(n[e]=v(t))}},b=function(e){for(var t=0;t<l.length;t++){if(l[t]===e)return!0}return!1},y=function(){for(var e=d.get(this),t=Object(u.getAllPropertyDescs)(e),n=0;n<t.length;n++){var r=t[n],o=r.name;b(o)||(o in this||(delete r.value,delete r.writable,Object(u.ObjDefProp)(this,o,Object.assign(r,{get:g(o),set:_(o)}))))}},m=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.set(this,t),y.call(this)},w=m,O={},S={},I=[],E=0,C=[],T=function(e,t,n){if(void 0!==t&&void 0!==e&&e===r){var o=void 0!==n?n:++E;return S[o]=t,I.push(o),C.forEach((function(e){"function"==typeof e&&e(o)})),o}},k=function(e,t,n,o){if(void 0!==e&&e===r){var i=function(e){for(var t=I.length,n=0;n<t;n++){var r=I[n];if(S[r]===e)return r}}(t);if(void 0!==i){var a=O[n];"function"==typeof a&&a(o,i)}}},A={},P=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0!==e&&e===r){o||(t=t.valueOf(),n=new w(n));var i=A[t];return"function"==typeof i?i(n):void 0}},D={__init__:function(e){void 0===r&&void 0!==e&&((r=e).register=T,r.subscribeHandler=k,r.syncMethodHandler=P,o=r.alloc,i=r.create,a=r.destroy,s=r.evaluateScriptFile,c=r.loadJsFiles,delete r.alloc,delete r.create,delete r.destroy,delete r.evaluateScriptFile,delete r.loadJsFiles)},publish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=Object(u.getDataType)(t);if("Object"!==o&&"Undefined"!==o)throw new Error("params should be an object.");n.forEach((function(n){var o=S[n];o&&o.subscribeHandler(r,e,t)}))},subscribe:function(e,t){O[e]=t},onRegister:function(e){C.push(e)},evaluateScriptFile:function(e,t,n){return s(e,t,n)},batchLoadJsFiles:function(e,t){if(void 0===c||"function"!=typeof c)return"failed: loadJsFiles not supported";try{return c(e,JSON.stringify(t)),"success"}catch(e){return"failed: "+e}},alloc:function(e,t){return"function"==typeof o?o.call(r,e,t):-9999},create:function(e,t){return"function"==typeof i?i.call(r,e,t):-9999},destroy:function(e,t){return"function"==typeof a?a(e,t):-9999},isAsync:function(){return r&&!0===r.async},supportAlloc:function(){return"function"==typeof o},registerSyncMethod:function(e,t){A[e]=t}};t.default=D},function(e,t,n){"use strict";n.r(t),function(e){var r,o=n(3),i=n(1),a=n(2);if(void 0===e)throw new Error("js-context: global is undefined");void 0!==e.WeixinJSContext?(r=Object.getPrototypeOf(e.WeixinJSContext)===Object.prototype?o.default:i.default).__init__(WeixinJSContext,e.WeixinJSContextId):r=a.default;delete r.__init__,delete e.WeixinJSContext,delete e.WeixinJSContextId,t.default=r}.call(this,n(5))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}]).default,Protect=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){(function(t){var r=n(5),o=n(6).reportDeprecatedAPI,i=Function;e.exports={hijack:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0!==t.Function){var o=function(){if(arguments.length>0&&"return this"===arguments[arguments.length-1])return function(){return n?i:{}}},i={};o.prototype=t.Function.prototype,t.Function.prototype.constructor=o,t.Function=o}var a=globalThis;if("undefined"!=typeof eval&&(eval=void 0),"undefined"!=typeof setTimeout&&e){var s=setTimeout;setTimeout=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("function"!=typeof e)throw new TypeError("setTimeout expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setTimeout callback function"),o=[].slice.call(arguments,2);return s((function(){n.apply(a,o)}),t)};var c=setInterval;setInterval=function(e,t){if("function"!=typeof e)throw new TypeError("setInterval expects a function as first argument but got "+r(e)+".");var n=__errorTracer__.surroundThirdByTryCatch(e,"at setInterval callback function"),o=[].slice.call(arguments,2);return c((function(){n.apply(a,o)}),t)}}},hijackWasm:function(){if("undefined"!=typeof WebAssembly){["compile","compileStreaming","instantiate","instantiateStreaming","validate","Module"].forEach((function(e){if(void 0!==WebAssembly[e]){var t=WebAssembly[e];Object.defineProperty(WebAssembly,e,{get:function(){return o("globalWa"),t},set:function(t){Object.defineProperty(WebAssembly,e,{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}}))}},originFunction:i}}).call(this,n(3))},function(e,t,n){n.r(t),function(e){n.d(t,"doNotWriteObj",(function(){return i}));var r=n(0),o=e.Object.setPrototypeOf,i=function e(t,n,i,a){if(t&&n&&-1===n.indexOf("constructor")){var s;try{s=t[n]}catch(e){return}if(s){var c=Object.getOwnPropertyDescriptor(t,n);if(a||c||"__proto__"===n){c=c||{enumerable:!!a,configurable:!0};var u=Object(r.default)(s);if(s&&("function"===u||"object"===u)&&(c.configurable&&Object.defineProperty(t,n,{get:function(){return s},set:function(c){if(this!==t)return e(this,n,i,!0),void(this[n]=c);if(s!==c)if(a)try{s=c,"__proto__"===n&&o(this,c)}catch(e){}else console.error("[non-writable] modification of global variable '"+i+"' is not allowed when using plugins at app.json."),"object"===("undefined"==typeof Reporter?"undefined":Object(r.default)(Reporter))&&(Reporter.reportKeyValue({key:"GlobalReadOnly",value:i}),Reporter.reportIDKey({key:"global_objs_readonly"}))},enumerable:c.enumerable,configurable:!!a&&c.configurable}),!a&&"__proto__"!==n)){var l=Object.getOwnPropertyNames(s);"object"===Object(r.default)(s)&&e(s,"__proto__",i+".__proto__",!1);for(var d=0;d<l.length;++d){var f=l[d];e(s,f,i+"."+f,!1)}}}}}}}.call(this,n(3))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){if("undefined"==typeof navigator){try{new Function("const GeneratorFunction = Object.getPrototypeOf(function *() {}).constructor; const f = new GeneratorFunction('', 'console.log(0)'); f().__proto__.__proto__.next = () => {};")()}catch(e){}try{new Function("const AsyncFunctionProto = Object.getPrototypeOf(async function() {}); Object.defineProperty(AsyncFunctionProto, 'constructor', { value: function(){} });")()}catch(e){}try{new Function("const AsyncGeneratorFunctionProto = Object.getPrototypeOf(async function *() {}); Object.defineProperty(AsyncGeneratorFunctionProto, 'constructor', { value: function(){} });")()}catch(e){}}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"reportDeprecatedAPI",(function(){return r}));var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},function(e,t,n){n.r(t),n.d(t,"overwriteSetPrototypeOf",(function(){return s})),n.d(t,"doNotWriteGlobalObjs",(function(){return c})),n.d(t,"doNotWriteObj",(function(){return u})),n.d(t,"globalEsObjs",(function(){return r})),n.d(t,"hijack",(function(){return l.hijack})),n.d(t,"hijackWasm",(function(){return l.hijackWasm}));var r=["Array","ArrayBuffer","AsyncFunction","Atomics","Boolean","DataView","Date","EvalError","Float32Array","Float64Array","Function","Generator","GeneratorFunction","Infinity","Int16Array","Int32Array","Int8Array","InternalError","Intl","Intl.Collator","Intl.DateTimeFormat","Intl.NumberFormat","Iterator","JSON","Map","Math","NaN","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","TypedArray","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","null","parseFloat","parseInt","undefined","unescape","uneval"];"NodeJS"!==__wxConfig.JSEngineName&&r.push("Error");var o=globalThis,i=n(2),a=r.concat(["getApp","getCurrentPages","define","require","Reporter","Protect","requirePlugin","definePlugin"]),s=function(){Object.defineProperty(o.Object,"setPrototypeOf",{value:function(e,t){return e.__proto__=t,e},configurable:!0})},c=function(){try{new Date;for(var e=0;e<a.length;++e){var t=a[e];if(o[t]){new Date;Object(i.doNotWriteObj)(o,t,t,!1),new Date}}new Date}catch(e){}},u=function(e,t,n){return Object(i.doNotWriteObj)(e,t,n,!1)},l=(n(4),n(1))}]),__subContextEngine__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(e,t,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function g(){}function _(){}function b(){}var y={};y[i]=function(){return this};var m=Object.getPrototypeOf,w=m&&m(m(A([])));w&&w!==n&&r.call(w,i)&&(y=w);var O=b.prototype=g.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return _.prototype=O.constructor=b,b.constructor=_,_.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},S(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),c(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"surroundByTryCatch",(function(){return f})),n.d(t,"surroundThirdByTryCatch",(function(){return l})),n.d(t,"onInitReady",(function(){return z})),n.d(t,"loadJsFiles",(function(){return W})),n.d(t,"initSubContext",(function(){return Y}));var o={name:void 0,secure:!0,runningType:"app",init:function(e){this.name=e.contextName,this.secure=e.contextSecure,this.name.startsWith("game")?this.runningType="game":this.name.startsWith("app")&&(this.runningType="app"),this.remoteObjectProto=e.__proto__}},i=o,a={},s=Object.keys;a.init=function(e){for(var t=s(e),n=0;n<t.length;n++){var r=t[n];void 0===a[r]&&(a[r]=e[r])}};var c=a,u=function(e,t,n){try{var r;if("game"===i.name)r=c.RunType.GAME;else if("gameOpenData"===i.name)r=c.RunType.GAME_SUBCONTEXT;else if("app"===i.name)r=c.RunType.APP;else{if(!i.name.startsWith("gamePlugin_"))throw new Error("unknown context");r=c.RunType.GAME_SUBCONTEXT}void 0!==n?c.thirdErrorReport({key:r,error:e,extend:t,triggerErrorCallback:!i.secure,isUnhandledRejection:!0,promise:n}):c.thirdErrorReport({key:r,error:e,extend:t,triggerErrorCallback:!i.secure,isUnhandledRejection:!1})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}};function l(e,t){return function(){var n;try{"function"==typeof e&&(n=e.apply(e,arguments))}catch(e){u(e,t)}return n}}function d(e,t){var n="";if("app"===i.runningType?n="appSubContextSDKScriptError":"game"===i.runningType&&(n="gameSubContextSDKScriptError"),"function"==typeof c.thirdErrorReport)try{c.errorReport({key:n,error:e,extend:t,triggerErrorCallback:!i.secure})}catch(e){console.error("[ErrorHandler] error in Report.thirdErrorReport: ",e.message)}else{var r=n+"\n"+(t?e.message+";"+t:e.message)+"\n"+e.stack;"undefined"!=typeof console&&console.error(r)}}function f(e,t){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;d(e,t)}return}}}function p(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]}function h(e){e=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.replace(/"/g,'\\"').replace(/'/g,'"').replace(/\n/g,"\\n"))}catch(t){return{message:e,stack:""}}}(e),u(e,"")}function v(e){u(e.reason,"",e.promise||null)}"undefined"==typeof WeixinJSBridge&&(WeixinJSBridge={},WeixinJSBridge.subscribeHandler=function(e,t){"onError"===e?h(t):"unhandledRejection"===e&&v(t)},WeixinJSBridge.invokeCallbackHandler=function(){}),Foundation.on("error",h),Foundation.on("unhandledRejection",v);var g=function(){return this}(),_=Object.getPrototypeOf,b=Object.getOwnPropertyNames,y=Object.getOwnPropertyDescriptor,m=Object.defineProperty,w=["constructor","__proto__","__defineGetter__","__defineSetter__"],O=new WeakMap,S=new WeakMap,I=new WeakMap,E=new WeakMap,C=new WeakMap,T=new WeakMap,k=function(e){for(var t=0;t<w.length;t++){if(w[t]===e)return!0}return!1},A=function(e){for(var t=C.has(e)?C.get(e):{},n=function(e){for(var t=[],n=e;n;n=_(n))for(var r=b(n),o=0;o<r.length;o++){var i=r[o],a=y(n,i);void 0!==a&&(a.name=i,t.push(a))}return t}(e),r=0;r<n.length;r++){var o=n[r],i=o.name;k(i)||(i in t||(delete o.value,delete o.writable,m(t,i,Object.assign(o,{get:P(i).bind(t),set:D(i).bind(t)}))))}return C.set(e,t),O.set(t,e),t},P=function(e){return function(){var t=O.get(this);if(void 0!==t)return null===t?null:x(t[e])}},D=function(e){return function(t){var n=O.get(this);if(null!=n){if(null!=t){var r=j(t);if(r)return void(n[e]=r)}n[e]=x(t)}}},j=function(e){if(("function"==typeof e||"object"===r(e))&&null!=e)return O.get(e)||S.get(e)||I.get(e)},x=function(e){var t=p(e);return"String"===t||"Number"===t||"Boolean"===t?e.valueOf():"Array"===t?function(e){if(T.has(e))return T.get(e);for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(x(r))}return T.set(e,t),I.set(t,e),t}(e):"Function"===t?function(e){if(E.has(e))return E.get(e);var t=function(){"use strict";for(var t=[],n=0;n<arguments.length;n++)t[n]=x(arguments[n]);var r=j(this)||this,o=e.apply(r,t);return x(o)};return E.set(e,t),S.set(t,e),t}(e):"Object"===t?A(e):"ArrayBuffer"===t?(e!==ArrayBuffer.prototype&&(e.__proto__=ArrayBuffer.prototype),e):"Undefined"===t?void 0:"Null"===t?null:e},R=x,M=function(e,t){return function(){return"function"==typeof arguments[0]&&(arguments[0]=l(arguments[0],t)),e.apply(void 0,arguments)}},N=function(e){g.__isAdapterInjected=!1,g.console=e.console,g.sharedCanvas=e.sharedCanvas;var t=["cloud","getBox2D","protobuf"];__wxConfig.onReady((function(){!0!==__wxConfig.useHighPerformanceMode?g.wx=Object.keys(e.wx).reduce((function(n,r){return t.includes(r)?n[r]=e.wx[r]:n[r]=new R(e.wx[r]),n}),{}):g.wx=e.wx})),g.requirePlugin=e.requirePlugin,g.WXWebAssembly=e.WebAssembly,delete g.WebAssembly,g.GameGlobal=g,g.setGlobalAttribute=e.setGlobalAttribute,wxNativeConsole=e.wxNativeConsole,Object.defineProperty(g,"__wxSourceMap",{get:R(e.getWxSourceMap)})},L=function(e){e.getWxSourceMap&&(e.getWxSourceMap=R(e.getWxSourceMap)),__gameOpenDataSDK__.init(e)},B=function(e){var t;g.console=new e.BaseConsole,e.wxLibVersion!==((null===(t=__libVersionInfo__)||void 0===t?void 0:t.version)||"9.9.9")&&Reporter.reportIDKey({key:"subContextLibVersionNotMatch"}),__safeway__=e.safeway,Reporter=e.Reporter,NativeGlobal=e.NativeGlobal,WeixinCanvas=e.WeixinCanvas,WeixinArrayBuffer=e.WeixinArrayBuffer,wxNativeConsole=e.wxNativeConsole,Canvas=e.Canvas,Image=e.Image,ImageData=e.ImageData,Path2D=e.Path2D,SkiaCanvasExternalTexture=e.SkiaCanvasExternalTexture,skiacanvasLoadNewFont=e.skiacanvasLoadNewFont,SkiaCanvas=e.SkiaCanvas,HTMLCanvasView=e.HTMLCanvasView,HTMLCanvasElement=e.HTMLCanvasElement,SkiaImage=e.SkiaImage,SkiaImageData=e.SkiaImageData,SkiaPath2D=e.SkiaPath2D,SkiaCanvasLoadNewFont=e.SkiaCanvasLoadNewFont,SkiaCanvasRequestAnimationFrame=e.SkiaCanvasRequestAnimationFrame,SkiaCanvasCancelAnimationFrame=e.SkiaCanvasCancelAnimationFrame,BaseConsole=e.BaseConsole,performanceChannel=e.performanceChannel,__sclEngine__=e.__sclEngine__,Object.defineProperty(g,"__wxSourceMap",{get:R(e.getWxSourceMap)})},F=function(e){g.env=e,g.console=e.console,e.pluginEnv&&(g.pluginEnv=e.pluginEnv)},W=function(e){return JSContext&&JSContext.invokeMainContextMethodSync?JSContext.invokeMainContextMethodSync("loadJsFiles",R({paths:e}),!0):"failed"};n(0);var U=function(){return"devtools"===__wxConfig.platform};delete g.WeixinJSCore,delete g.WeixinNativeBuffer,delete g.WeixinWorker;var V=[],G=!1,H=function(){V.forEach((function(e){e()})),V=[]},z=function(e){G?H():V.push(e)};JSContext.subscribe("subContextEnvReady",f((function(e){if(i.init(e),function(e){g.setTimeout=M(e.setTimeout,"at setTimeout callback function"),g.clearTimeout=M(e.clearTimeout),g.setInterval=M(e.setInterval,"at setInterval callback function"),g.clearInterval=M(e.clearInterval),"game"===i.runningType&&(g.requestAnimationFrame=M(e.requestAnimationFrame,"at requestAnimationFrame callback function"),g.cancelAnimationFrame=M(e.cancelAnimationFrame))}(e),c.init(e.Reporter),"game"===i.name)N(e);else if("gameOpenData"===i.name)L(e);else if("app"===i.name)B(e);else{if(!i.name.startsWith("gamePlugin_"))throw new Error("subContextEnvReady: missing context name.");F(e)}e.__wxConfig.onReady((function(e){var t=JSON.parse(JSON.stringify(e)),n=__wxConfig.__readyHandler;g.__wxConfig=t,"function"==typeof n&&n()}))}))),JSContext.subscribe("subContextRefreshEnv",f((function(e){if("game"===i.name)N(e);else if("gameOpenData"===i.name)L(e);else if("app"===i.name)B(e);else{if(!i.name.startsWith("gamePlugin_"))throw new Error("subContextRefreshEnv: missing context name.");F(e)}JSContext.publish("subContextRefreshEnvReady",null,!0)}))),JSContext.subscribe("subContextRefreshWxConfig",f((function(e){var t=e.key,n=e.value;"string"==typeof t&&n&&(__wxConfig[t]=n)}))),JSContext.subscribe("exportGlobalRequire",f((function(e){var t=/^[A-Za-z]+(\.[A-Za-z]+)*$/,n=function(e){var n=e.name,r=e.value,o=e.needCondom;if("string"!=typeof n||!t.test(n))throw new Error("exportGlobalRequire: illegal variable name.");n.split(".").reduce((function(e,t,i,a){if(i===a.length-1){if(t in e)throw new Error("exportGlobalRequire: Variable "+n+" exists.");e[t]=o?R(r):r}if("Array"!==p(e[t])&&"Function"!==p(e[t])&&"Object"!==p(e[t])){var s=a.slice(0,i+1).join(".");throw new Error("exportGlobalRequire: "+s+" is not an Object.")}return e[t]}),g)};return"[object Array]"===Object.prototype.toString.call(e)?e.forEach(n):n(e)}))),JSContext.subscribe("subContextDestroy",(function(){})),JSContext.publish("subContextReady",{contextGlobal:{get __wxSourceMap(){return g.__wxSourceMap},get __require(){return"game"===i.name||i.name.startsWith("gamePlugin_")?g.require:R(g.require)},jsonParse:JSON.parse,jsonStringify:JSON.stringify,arrayBufferProto:ArrayBuffer.prototype}},!0);var q=function(){Protect.overwriteSetPrototypeOf(),Protect.doNotWriteGlobalObjs()},Y=function(){Protect.hijack(!1);var e=!1;i.secure&&__wxConfig&&__wxConfig.isIsolateContext&&(q(),e=!0),__wxConfig.onReady((function(){e||__wxConfig.plugins&&!U()&&q()})),G=!0,H()}}]),__errorTracer__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n.r(t),n.d(t,"callSystemFunction",(function(){return u})),n.d(t,"wrapSystemFunction",(function(){return l})),n.d(t,"callMiniProgramOrPluginFunction",(function(){return d})),n.d(t,"callThirdPartyFunction",(function(){return f})),n.d(t,"wrapMiniProgramOrPluginFunction",(function(){return p})),n.d(t,"wrapThirdPartyFunction",(function(){return h})),n.d(t,"surroundThirdByTryCatch",(function(){return v}));var r=/[ (@]*https?:\/\/([^/]*)\/+(.*?):(\d+):(\d+)/,o=[];function i(e){if(!e||e.__wxOriginalStack__)return!1;var t=e.stack;if(void 0===t)return!1;for(var n=t,r=o.length-1,i=0;i>=0&&r>=0;){var s=n.length,c=0;for(var u in a)if(a[u]){var l=n.indexOf(a[u],i);l<0||s<=l||(s=l,c=a[u].length)}if(s>=n.length)break;var d="at <"+o[r--].description+">";n=n.slice(0,s)+d+n.slice(s+c),i=s+d.length}return Object.defineProperties(e,{__wxOriginalStack__:{value:t,writable:!0,configurable:!0},stack:{value:n,writable:!0,enumerable:!0,configurable:!0}}),!0}var a={wrapSystemFunction:null,wrapMiniProgramOrPluginFunction:null};function s(e){var t=((new Error).stack||"").match(/.+/gm),n="",o=0;t&&t.forEach((function(e){if(r.test(e)&&2===(o+=1)){var t=e.match(/^(\s*)at /),i=t?t[1].length:0;return n=e.slice(i),!1}return!0})),a[e]=n}function c(){for(var e="",t=o.length-1;t>=0;t--)o[t].pluginAppId&&(e=o[t].pluginAppId);return e}function u(e,t,n,r,u){var d,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===a.wrapSystemFunction&&(a.wrapSystemFunction="",l("","",s)("wrapSystemFunction")),o.push({description:t});try{d=n.apply(r,u)}catch(t){if(i(t)){if("AppServiceSdkKnownError"===t.type)throw o.pop(),t;if("ThirdScriptError"===t.type){var p=c();Reporter.thirdErrorReport({error:t,source:p,triggerErrorCallback:!f})}else Reporter.errorReport({key:e,error:t,triggerErrorCallback:!f})}if(f)throw o.pop(),t}return o.pop(),d}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return u(e,t,n,this,i,r)}}function d(e,t,n,r,c){var u,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];null===a.wrapMiniProgramOrPluginFunction&&(a.wrapMiniProgramOrPluginFunction="",p("","",s)("wrapMiniProgramOrPluginFunction")),o.push({description:t,pluginAppId:e});try{u=n.apply(r,c)}catch(t){if(i(t)&&Reporter.thirdErrorReport({error:t,source:e||"",triggerErrorCallback:!l}),l)throw o.pop(),t}return o.pop(),u}function f(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return d(c(),e,t,n,r,o)}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return d(e,t,n,this,i,r)}}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return d(c(),e,t,this,o,n)}}function v(e,t){var n=(t||"").match(/^\s*(?:at )?([\s\S]*)$/),r=n?n[1]:"",o=e||function(){};return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d(c(),r,o,o,t,!1)}}}]),__cloudSDK__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=67)}([function(e,t,n){n.r(t),n.d(t,"__extends",(function(){return o})),n.d(t,"__assign",(function(){return i})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return c})),n.d(t,"__metadata",(function(){return u})),n.d(t,"__awaiter",(function(){return l})),n.d(t,"__generator",(function(){return d})),n.d(t,"__exportStar",(function(){return f})),n.d(t,"__values",(function(){return p})),n.d(t,"__read",(function(){return h})),n.d(t,"__spread",(function(){return v})),n.d(t,"__spreadArrays",(function(){return g})),n.d(t,"__await",(function(){return _})),n.d(t,"__asyncGenerator",(function(){return b})),n.d(t,"__asyncDelegator",(function(){return y})),n.d(t,"__asyncValues",(function(){return m})),n.d(t,"__makeTemplateObject",(function(){return w})),n.d(t,"__importStar",(function(){return O})),n.d(t,"__importDefault",(function(){return S})),n.d(t,"__classPrivateFieldGet",(function(){return I})),n.d(t,"__classPrivateFieldSet",(function(){return E}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){Object.defineProperty(this,"constructor",{value:e})}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a}function c(e,t){return function(n,r){t(n,r,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function d(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function h(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function g(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function b(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof _?Promise.resolve(e.value.v).then(c,u):l(i[0][2],e)}(o[e](t))}catch(e){l(i[0][3],e)}}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:_(e[r](t)),done:"return"===r}:o?o(t):t}:o}}function m(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=p(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function O(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function I(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}},function(e,t,n){n.r(t),n.d(t,"CloudSDKError",(function(){return a})),n.d(t,"isSDKError",(function(){return s})),n.d(t,"returnAsCloudSDKError",(function(){return c})),n.d(t,"returnAsFinalCloudSDKError",(function(){return u})),n.d(t,"toSDKError",(function(){return l})),n.d(t,"isGenericError",(function(){return d})),n.d(t,"TimeoutError",(function(){return f})),n.d(t,"isTimeoutError",(function(){return p})),n.d(t,"CancelledError",(function(){return h})),n.d(t,"isCancelledError",(function(){return v}));var r=n(0),o=n(2),i=n(3),a=function(e){function t(t){var n=e.call(this,t.errMsg)||this;return n.errCode=-1,Object.defineProperties(n,{message:{get:function(){return"errCode: "+this.errCode+" "+(i.ERR_CODE[this.errCode]||"")+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e}}}),n.errCode=t.errCode||-1,n.errMsg=t.errMsg,n}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"message",{get:function(){return"errCode: "+this.errCode+" | errMsg: "+this.errMsg},set:function(e){this.errMsg=e},enumerable:!1,configurable:!0}),t}(Error);function s(e){return e&&e instanceof Error&&Object(o.isString)(e.errMsg)}function c(e,t){if(void 0===t&&(t=""),e){if(s(e))return t&&(e.errMsg+="; "+t),e;var n=e?e.errCode:void 0,r=(e&&e.errMsg||e.toString()||"unknown error")+"; "+t;return new a({errCode:n,errMsg:r})}return new a({errMsg:t})}function u(e,t){return l(e,t)}function l(e,t){if(e){if(s(e))return e;var n,r=t+":fail ";if(e instanceof Error)e.message=""+r+e.message,e.stack=e.stack?e.stack.slice(0,7)+r+e.stack.slice(7):e.stack,(n=e).errCode=-1;else if("string"==typeof e)(n=new Error(""+r+e)).errCode=-1;else{var o=e.errMsg||"";(n=new Error(t+":fail "+e.errCode+" "+(i.ERR_CODE[e.errCode]||"")+". "+o)).errCode=e.errCode||-1}return n.errMsg=n.message+"",n}var a=new Error(t+":fail");return a.errCode=-1,a.errMsg=a.message+"",a}var d=function(e){return e.generic},f=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="timeout",r.generic=!0,r.payload=n,r}return Object(r.__extends)(t,e),t}(Error),p=function(e){return"timeout"===e.type},h=function(e){function t(t,n){var r=e.call(this,t)||this;return r.type="cancelled",r.generic=!0,r.payload=n,r}return Object(r.__extends)(t,e),t}(Error),v=function(e){return"cancelled"===e.type}},function(e,t,n){n.r(t),n.d(t,"getType",(function(){return r})),n.d(t,"isObject",(function(){return o})),n.d(t,"isString",(function(){return i})),n.d(t,"isNumber",(function(){return a})),n.d(t,"isPromise",(function(){return s})),n.d(t,"isFunction",(function(){return c})),n.d(t,"isArray",(function(){return u})),n.d(t,"isDate",(function(){return l})),n.d(t,"isRegExp",(function(){return d})),n.d(t,"isInternalObject",(function(){return f})),n.d(t,"isPlainObject",(function(){return p}));var r=function(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()},o=function(e){return"object"===r(e)},i=function(e){return"string"===r(e)},a=function(e){return"number"===r(e)},s=function(e){return"promise"===r(e)},c=function(e){return"function"==typeof e},u=function(e){return Array.isArray(e)},l=function(e){return"date"===r(e)},d=function(e){return"regexp"===r(e)},f=function(e){return e&&"symbol"===r(e._internalType)},p=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){n.r(t),n.d(t,"ERR_CODE",(function(){return r}));var r={"-1":"",UNKNOWN_ERROR:-1,"-401001":"api permission denied",SDK_API_PERMISSION_DENIED:-401001,"-401002":"api parameter error",SDK_API_PARAMETER_ERROR:-401002,"-401003":"api parameter type error",SDK_API_PARAMETER_TYPE_ERROR:-401003,"-402001":"circular reference detected",SDK_DATABASE_CIRCULAR_REFERENCE:-402001,"-402002":"realtime listener init watch fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:-402002,"-402003":"realtime listener reconnect ws fail",SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL:-402003,"-402004":"realtime listener rebuild watch fail",SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL:-402004,"-402005":"realtime listener close watch fail",SDK_DATABASE_REALTIME_LISTENER_CLOSE_WATCH_FAIL:-402005,"-402006":"realtime listener receive server error msg",SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG:-402006,"-402007":"realtime listener receive invalid server data",SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA:-402007,"-402008":"realtime listener websocket connection error",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_ERROR:-402008,"-402009":"realtime listener websocket connection closed",SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED:-402009,"-402010":"realtime listener check last fail",SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL:-402010,"-402011":"realtime listener unexpected fatal error",SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR:-402011,"-402012":"realtime listener init ws fail",SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL:-402012,"-403001":"max upload file size exceeded",SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE:-403001,"-403002":"internal server error: empty upload url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL:-403002,"-403003":"internal server error: empty download url",SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL:-403003,"-404001":"empty call result",SDK_FUNCTIONS_EMPTY_CALL_RESULT:-404001,"-404002":"empty event id",SDK_FUNCTIONS_EMPTY_EVENT_ID:-404002,"-404003":"empty poll url",SDK_FUNCTIONS_EMPTY_POLL_URL:-404003,"-404004":"empty poll result json",SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON:-404004,"-404005":"exceed max poll retry",SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY:-404005,"-404006":"empty poll result base resp",SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP:-404006,"-404007":"poll result base resp ret abnormal",SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-404007,"-404008":"poll result status code error",SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR:-404008,"-404009":"poll error",SDK_FUNCTIONS_POLL_ERROR:-404009,"-404010":"result expired",SDK_FUNCTIONS_POLL_RESULT_EXPIRED:-404010,"-404011":"cloud function execution error",SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR:-404011,"-404012":"polling exceed max timeout retry",SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY:-404012,"-404013":"polling exceed max system error retry",SDK_FUNCTIONS_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-404013,"-405001":"empty call result",SDK_CONTAINER_EMPTY_CALL_RESULT:-405001,"-405002":"empty event id",SDK_CONTAINER_EMPTY_EVENT_ID:-405002,"-405003":"empty poll url",SDK_CONTAINER_EMPTY_POLL_URL:-405003,"-405004":"empty poll result json",SDK_CONTAINER_EMPTY_POLL_RESULT_JSON:-405004,"-405005":"exceed max poll retry",SDK_CONTAINER_EXCEED_MAX_POLL_RETRY:-405005,"-405006":"empty poll result base resp",SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP:-405006,"-405007":"poll result base resp ret abnormal",SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL:-405007,"-405008":"poll result status code error",SDK_CONTAINER_POLL_RESULT_STATUS_CODE_ERROR:-405008,"-405009":"poll error",SDK_CONTAINER_POLL_ERROR:-405009,"-405010":"result expired",SDK_CONTAINER_POLL_RESULT_EXPIRED:-405010,"-405012":"polling exceed max timeout retry",SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY:-405012,"-405013":"polling exceed max system error retry",SDK_CONTAINER_EXCEED_MAX_SYSTEM_ERROR_POLL_RETRY:-405013,"-405014":"cannot download result (cdn)",SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL:-405014,"-601001":"system error",WX_SYSTEM_ERROR:-601001,"-601002":"system args error",WX_SYSTEM_ARGS_ERROR:-601002,"-601003":"system network error",WX_SYSTEM_NETWORK_ERROR:-601003,"-601004":"api permission denied",WX_API_PERMISSION_DENIED:-601004,"-601005":"invalid cloudID",WX_INVALID_CLOUDID:-601005,"-601006":"cloudID expired",WX_CLOUDID_EXPIRED:-601006,"-601007":"cloudID and calling user does not match",WX_CLOUDID_USER_NOT_MATCH:-601007,"-601008":"server-side request timedout",WX_SERVER_REQUEST_TIMEOUT:-601008,"-601009":"missing mobile phone",WX_MISSING_MOBILE_PHONE:-601009,"-601010":"no write permission",WX_NO_WRITE_PERMISSION:-601010,"-601011":"no privilege permission",WX_NO_PRIVILEGE_PERMISSION:-601011,"-601012":"unauthorized env",WX_UNAUTHORIZED_ENV:-601012,"-601013":"no multiend permission",WX_NO_MULTIEND_PERMISSION:-601013,"-601015":"access denied (cloudfunction cloudbase_auth returns empty errCode)",WX_CLOUDBASE_AUTH_RETURN_EMPTY_ERRCODE:-601015,"-601016":"missing env auth info",WX_MISSING_ENV_AUTH_INFO:-601016,"-601017":"access denied (cloudbase_auth returns non-zero errCode)",WX_CLOUDBASE_AUTH_RETURN_NON_ZERO_ERRCODE:-601017,"-602018":"unauthorized API",WX_UNAUTHORIZED_API:-601018,"-602001":"database query result size exceed limit (1MB)",WX_DATABASE_QUERY_SIZE_EXCEED_LIMIT:-602001,"-604001":"cloudfunction result size exceed limit (1MB)",WX_CLOUDFUNCTION_RESULT_SIZE_EXCEED_LIMIT:-604001,"-501001":"resource system error",TCB_RESOURCE_SYSTEM_ERROR:-501001,"-501002":"resource server timeout",TCB_RESOURCE_SERVER_TIMEOUT:-501002,"-501003":"exceed request limit",TCB_EXCEED_REQUEST_LIMIT:-501003,"-501004":"exceed concurrent request limit",TCB_EXCEED_CONCURRENT_REQUEST_LIMIT:-501004,"-501005":"invalid env",TCB_INVALID_ENV:-501005,"-501006":"invalid common parameters",TCB_INVALID_COMMON_PARAM:-501006,"-501007":"invalid parameters",TCB_INVALID_PARAM:-501007,"-501008":"invalid request source",TCB_INVALID_REQUEST_SOURCE:-501008,"-501009":"resource not initialized",TCB_RESOURCE_NOT_INITIALIZED:-501009,"-501010":"tencentcloud key signature verification fail",TCB_KEY_SIGNATURE_VERIFICATION_FAIL:-501010,"-501011":"invalid env status",TCB_INVALID_ENV_STATUS:-501011,"-501012":"invalid api name",TCB_INVALID_API_NAME:-501012,"-501013":"request data size exceeds limit (5M)",TCB_REQ_DATA_EXCEED_LIMIT_5M:-501013,"-501014":"upload file size exceeds limit (5M)",TCB_UPLOAD_FILE_SIZE_EXCEED_LIMIT_5M:-501014,"-501023":"permission denied",TCB_PERMISSION_DENIED:-501023,"-502001":"database request fail",TCB_DB_REQUEST_FAIL:-502001,"-502002":"database invalid command",TCB_DB_INVALID_COMMAND:-502002,"-502003":"database permission denied",TCB_DB_PERMISSION_DENIED:-502003,"-502004":"database exceed collection limit",TCB_DB_EXCEED_COLLECTION_LIMIT:-502004,"-502005":"database collection not exists",TCB_DB_COLLECTION_NOT_EXISTS:-502005,"-503001":"storage request fail",TCB_STORAGE_REQUEST_FAIL:-503001,"-503002":"storage permission denied",TCB_STORAGE_PERMISSION_DENIED:-503002,"-503003":"storage file not exists",TCB_STORAGE_FILE_NOT_EXISTS:-503003,"-503004":"storage invalid sign parameter",TCB_STORAGE_INVALID_SIGN_PARAM:-503004,"-504001":"functions request fail",TCB_FUNCTIONS_REQUEST_FAIL:-504001,"-504002":"functions execute fail",TCB_FUNCTIONS_EXEC_FAIL:-504002}},function(e,t,n){n.r(t),n.d(t,"init",(function(){return f})),n.d(t,"reportAPISpeed",(function(){return h})),n.d(t,"reportIDKey",(function(){return v})),n.d(t,"wrapTiming",(function(){return g})),n.d(t,"socketOnMessageSamplePicker",(function(){return _}));var r,o,i=n(0),a=n(14),s=n(8),c=n(2),u=!1,l=[],d="unknown",f=function(){if(!u)try{var e=Object(s.getSDK)();e.wx.getNetworkType({success:function(e){d=e.networkType},complete:function(){u=!0,p()}}),e.wx.onNetworkStatusChange((function(e){u||(u=!0,p()),d=e.networkType}))}catch(e){0}},p=function(){var e,t;try{for(var n=Object(i.__values)(l),r=n.next();!r.done;r=n.next()){var o=r.value;try{o()}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}l=[]},h=function(e){setTimeout((function(){try{if(!function(e){return!(e.tunnelStartTime&&e.tunnelEndTime&&e.tunnelEndTime<e.tunnelStartTime||!(e.apiStartTime&&e.apiEndTime&&e.apiEndTime>e.apiStartTime))}(e))return;if(!u&&l.length<100)return void l.push(h.bind(null,e));var t=e.apiEndTime-e.apiStartTime,n=e.tunnelEndTime?e.tunnelEndTime-e.tunnelStartTime:0,r=[0,e.apiName,t,n,(e.pollStartTime&&e.pollEndTime&&e.pollEndTime>e.pollStartTime?e.pollEndTime-e.pollStartTime:0)||0,d,e.tunnelTimeNoCSNetCost?t-e.tunnelTimeNoCSNetCost:0,e.tunnelTimeNoCSNetCost?n-e.tunnelTimeNoCSNetCost:0,e.funcExecTime?e.funcExecTime:0];a.default.reportKeyValue({key:"CloudReport",value:r.join(","),force:!0})}catch(e){}}))},v=function(e,t,n,r){a.default.reportIDKeyDirectly({id:e,key:t,force:n,immediately:r})},g=function(e,t){var n=Object(c.isFunction)(e);function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t.samplePicker&&!t.samplePicker.next())return n?e.apply(this,r):e;var a=Date.now(),s=!0;try{if(t.condition&&t.condition.emptyKey&&t.timing[t.startKey])return n?e.apply(this,r):e;var u=void 0;if(n){var l=e.apply(this,r);if(!Object(c.isPromise)(l))return s=!1,l;u=l}else u=e;return u.then((function(){return o(a)})).catch((function(){return o(a)})),u}catch(e){throw s=!1,e}finally{s||o(a)}}function o(e){t.timing[t.startKey]=e,t.timing[t.endKey]=Date.now(),t.autoReport&&h(Object(i.__assign)(Object(i.__assign)({},t.timing),{apiName:t.autoReport}))}return n?r:r()},_=(r=10,o=!0,function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:e=function(){return parseInt(Math.round(2*Math.random()*r),10)},t=o?0:e(),n.label=1;case 1:return t>0?(t--,[4,!1]):[3,3];case 2:return n.sent(),[3,5];case 3:return t=e(),[4,!0];case 4:n.sent(),n.label=5;case 5:return[3,1];case 6:return[2]}}))})()},function(e,t,n){n.r(t),n.d(t,"invokeSuccessCallback",(function(){return i})),n.d(t,"invokeFailCallback",(function(){return a})),n.d(t,"invokeCompleteCallback",(function(){return s})),n.d(t,"invokeSuccessCompleteCallbacks",(function(){return c})),n.d(t,"invokeFailCompleteCallbacks",(function(){return u})),n.d(t,"hasAPICallback",(function(){return l}));var r=n(2),o=n(19);function i(e,t,n){t.success&&Object(r.isFunction)(t.success)&&Object(o.wrapWithTryCatch)(t.success,"at api "+e+" success callback function;")(n)}function a(e,t,n){t.fail&&Object(r.isFunction)(t.fail)&&Object(o.wrapWithTryCatch)(t.fail,"at api "+e+" fail callback function;")(n)}function s(e,t,n){t.complete&&Object(r.isFunction)(t.complete)&&Object(o.wrapWithTryCatch)(t.complete,"at api "+e+" complete callback function;")(n)}function c(e,t,n){i(e,t,n),s(e,t,n)}function u(e,t,n){a(e,t,n),s(e,t,n)}function l(e){return e&&(e.success||e.fail||e.complete)}},function(e,t,n){n.r(t),function(e,r){n.d(t,"isDevTools",(function(){return a})),n.d(t,"isMINA",(function(){return s}));var o,i=n(0);try{__wxConfig.platform,o=Object(i.__assign)({},__wxConfig),__wxConfig.onReady((function(){o=Object.assign(o,__wxConfig)}))}catch(t){o={platform:"ios",appLaunchInfo:{mode:""},onReady:function(e){setTimeout((function(){e()}))}},e.env.TEST&&(r.__wxConfig=o)}t.default=o;var a=function(){return"devtools"===o.platform},s=function(){return"mina"===o.platform}}.call(this,n(54),n(27))},function(e,t,n){n.r(t),function(e){n.d(t,"sleep",(function(){return a})),n.d(t,"nextLoop",(function(){return s})),n.d(t,"autoCount",(function(){return u})),n.d(t,"getWXVersion",(function(){return l})),n.d(t,"getNetworkStatus",(function(){return p})),n.d(t,"throwErrorIfNetworkOffline",(function(){return h})),n.d(t,"onceNetworkOnline",(function(){return v})),n.d(t,"onAppVisibilityChange",(function(){return b})),n.d(t,"offAppVisibilityChange",(function(){return y})),n.d(t,"tryJSONParse",(function(){return m})),n.d(t,"arrayBufferToBase64",(function(){return O})),n.d(t,"base64ToArrayBuffer",(function(){return S})),n.d(t,"arrayBufferToString",(function(){return I})),n.d(t,"stringToArrayBuffer",(function(){return E}));var r,o=n(0),i=n(8),a=function(e){return void 0===e&&(e=0),new Promise((function(t){return setTimeout(t,e)}))},s=function(){return new Promise((function(t){return e(t)}))},c={},u=function(e){return void 0===e&&(e="any"),c[e]||(c[e]=0),c[e]++},l=function(){var e,t,n=Object(i.getSDK)().wx;if(n&&n.version){e=n.version.version,t=n.version.updateTime;var r=n.version.updateTime.match(/^(\d+)\.(\d+)\.(\d+)/);return{version:e,updateTime:t,updateDateInDashes:r?r[1]+"-"+r[2]+"-"+r[3]:"unknown"}}return{version:"unknown",updateTime:"unknown",updateDateInDashes:"unknown"}},d=!1,f=[],p=function(){return new Promise((function(e,t){if(r)e(r);else{0;try{Object(i.getSDK)().wx.getNetworkType({success:function(t){r={networkType:t.networkType,isConnected:"none"!==t.networkType},e(r),d||(Object(i.getSDK)().wx.onNetworkStatusChange((function(e){if(r.networkType=e.networkType,r.isConnected=e.isConnected,e.isConnected&&f.length)for(;f.length;)try{f.shift()()}catch(e){}})),d=!0)},fail:t})}catch(e){t(e)}}}))},h=function(){return new Promise((function(e,t){return Object(o.__awaiter)(void 0,void 0,void 0,(function(){return Object(o.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,p()];case 1:return n.sent().isConnected?e():t("network offline"),[3,3];case 2:return n.sent(),e(),[3,3];case 3:return[2]}}))}))}))},v=function(){return new Promise((function(e){r&&r.isConnected?e():f.push(e)}))};var g=!1,_=new Set;function b(e){Object(i.getSDK)().wx.onAppShow&&(g||(!function(){var e=Object(i.getSDK)().wx;e.onAppShow&&e.onAppHide&&(e.onAppShow((function(){var e,t;"visible";try{for(var n=Object(o.__values)(_),r=n.next();!r.done;r=n.next()){var i=r.value;try{i("show")}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})),e.onAppHide((function(){var e,t;"hidden";try{for(var n=Object(o.__values)(_),r=n.next();!r.done;r=n.next()){var i=r.value;try{i("hide")}catch(e){0}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})))}(),g=!0),_.size>50&&_.clear(),_.add(e))}function y(e){_.delete(e)}function m(e){try{return JSON.parse(e)}catch(t){return e}}var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function O(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return function(e){for(var t=String(e),n="",r=void 0,o=void 0,i=0,a=w;t.charAt(0|i)||(a="=",i%1);n+=a.charAt(63&r>>8-i%1*8)){if((o=t.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');r=r<<8|o}return n}(t)}function S(e){for(var t=function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r=0,o=void 0,i=void 0,a=0;i=t.charAt(a++);~i&&(o=r%4?64*o+i:i,r++%4)?n+=String.fromCharCode(255&o>>(-2*r&6)):0)i=w.indexOf(i);return n}(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function I(e){return function(e){var t,n,r=e.length,o="",i=0;for(;i<r;){var a=e[i++];switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(a);break;case 12:case 13:t=e[i++],o+=String.fromCharCode((31&a)<<6|63&t);break;case 14:t=e[i++],n=e[i++],o+=String.fromCharCode((15&a)<<12|(63&t)<<6|(63&n)<<0)}}return o}(new Uint8Array(e))}function E(e){var t,n,r=e.split(""),i=[];try{for(var a=Object(o.__values)(r),s=a.next();!s.done;s=a.next()){var c=s.value;i.push(c.charCodeAt(0))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return new Uint8Array(i).buffer}}.call(this,n(61).setImmediate)},function(e,t,n){n.r(t),n.d(t,"getSDK",(function(){return a})),n.d(t,"setSDK",(function(){return s})),n.d(t,"setDefaultSDK",(function(){return c}));var r,o=new WeakMap;function i(){return null!=r?r:void 0!==__appServiceSDK__?__appServiceSDK__:void 0}var a=function(e){if(!e)return i();var t=o.get(e);return t&&t||i()},s=function(e,t){o.set(e,t)},c=function(e){r=e}},function(e,t,n){n.r(t);var r=n(44),o="object"==typeof self&&self&&self.Object===Object&&self,i=r.default||o||Function("return this")();t.default=i},function(e,t,n){n.r(t),t.default=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){n.r(t),t.default=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){n.r(t);var r=Array.isArray;t.default=r},function(e,t,n){var r,o=n(28),i=n(9).default["__core-js_shared__"],a=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var s=function(e){return!!a&&a in e},c=n(10),u=n(21),l=/^\[object .+?Constructor\]$/,d=Function.prototype,f=Object.prototype,p=d.toString,h=f.hasOwnProperty,v=RegExp("^"+p.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var g=function(e){return!(!Object(c.default)(e)||s(e))&&(Object(o.default)(e)?v:l).test(Object(u.default)(e))};var _=function(e,t){return null==e?void 0:e[t]};t.default=function(e,t){var n=_(e,t);return g(n)?n:void 0}},function(e,t,n){n.r(t);var r,o=n(19),i={surroundThirdByTryCatch:function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return Object(o.tryCatch)((function(){try{return e.apply(e,n)}catch(n){throw console.error(JSON.stringify(n)+"; "+t+"\n"+n.stack),console.error(e.toString()),n}}),t)}},reportIDKey:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},reportIDKeyDirectly:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},reportKeyValue:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}},a=!1,s=10;function c(){try{return a?Reporter:(s<=0||(s--,Reporter.surroundThirdByTryCatch,r=Reporter,a=!0),r)}catch(e){return r=i}}t.default={surroundThirdByTryCatch:function(e,t){return c().surroundThirdByTryCatch(e,t)},reportIDKey:function(e){return c().reportIDKey(e)},reportIDKeyDirectly:function(e){return c().reportIDKeyDirectly(e)},reportKeyValue:function(e){return c().reportKeyValue(e)}}},function(e,t,n){var r=n(16),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r.default?r.default.toStringTag:void 0;var c=function(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o},u=Object.prototype.toString;var l=function(e){return u.call(e)},d=r.default?r.default.toStringTag:void 0;t.default=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":d&&d in Object(e)?c(e):l(e)}},function(e,t,n){n.r(t);var r=n(9).default.Symbol;t.default=r},function(e,t,n){n.r(t);var r=n(34),o=n(29);t.default=function(e,t,n,i){var a=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var u=t[s],l=i?i(n[u],e[u],u,n,e):void 0;void 0===l&&(l=e[u]),a?Object(o.default)(n,u,l):Object(r.default)(n,u,l)}return n}},function(e,t,n){var r=n(53),o=n(10),i=n(31);var a=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},s=Object.prototype.hasOwnProperty;var c=function(e){if(!Object(o.default)(e))return a(e);var t=Object(i.default)(e),n=[];for(var r in e)("constructor"!=r||!t&&s.call(e,r))&&n.push(r);return n},u=n(23);t.default=function(e){return Object(u.default)(e)?Object(r.default)(e,!0):c(e)}},function(e,t,n){n.r(t),n.d(t,"tryCatch",(function(){return a})),n.d(t,"wrapWithTryCatch",(function(){return s})),n.d(t,"wrapParamCallbacksWithTryCatch",(function(){return c}));var r=n(1),o=n(2),i=n(14);function a(e,t){void 0===t&&(t="");try{return e()}catch(e){if(Object(r.isSDKError)(e))return e.errMsg+=t,e;var n=(e?e.toString():"")+t;return new r.CloudSDKError({errMsg:n})}}function s(e,t){return void 0===t&&(t=""),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return a((function(){return e.apply(e,n)}),t)}}function c(e){var t=e.param;t&&(t.success&&Object(o.isFunction)(t.success)&&(t.success=i.default.surroundThirdByTryCatch(t.success,"at api "+e.apiName+" success callback function")),t.fail&&Object(o.isFunction)(t.fail)&&(t.fail=i.default.surroundThirdByTryCatch(t.fail,"at api "+e.apiName+" fail callback function")),t.complete&&Object(o.isFunction)(t.complete)&&(t.complete=i.default.surroundThirdByTryCatch(t.complete,"at api "+e.apiName+" complete callback function")))}},function(e,t,n){n.r(t),function(e){var r=n(44),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o&&r.default.process,s=function(){try{var e=i&&i.require&&i.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();t.default=s}.call(this,n(55)(e))},function(e,t,n){n.r(t);var r=Function.prototype.toString;t.default=function(e){if(null!=e){try{return r.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){n.r(t),t.default=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){n.r(t);var r=n(28),o=n(49);t.default=function(e){return null!=e&&Object(o.default)(e.length)&&!Object(r.default)(e)}},function(e,t,n){var r=function(){this.__data__=[],this.size=0},o=n(22);var i=function(e,t){for(var n=e.length;n--;)if(Object(o.default)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=i(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)};var c=function(e){var t=this.__data__,n=i(t,e);return n<0?void 0:t[n][1]};var u=function(e){return i(this.__data__,e)>-1};var l=function(e,t){var n=this.__data__,r=i(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function d(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}d.prototype.clear=r,d.prototype.delete=s,d.prototype.get=c,d.prototype.has=u,d.prototype.set=l;t.default=d},function(e,t,n){n.r(t);var r=n(13),o=n(9),i=Object(r.default)(o.default,"Map");t.default=i},function(module,exports,__webpack_require__){(function(global,Buffer){module.exports=function(exports){var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;function init(){inited=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)lookup[t]=e[t],revLookup[e.charCodeAt(t)]=t;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(e){var t,n,r,o,i,a;inited||init();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");i="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Arr(3*s/4-i),r=i>0?s-4:s;var c=0;for(t=0,n=0;t<r;t+=4,n+=3)o=revLookup[e.charCodeAt(t)]<<18|revLookup[e.charCodeAt(t+1)]<<12|revLookup[e.charCodeAt(t+2)]<<6|revLookup[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===i?(o=revLookup[e.charCodeAt(t)]<<2|revLookup[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===i&&(o=revLookup[e.charCodeAt(t)]<<10|revLookup[e.charCodeAt(t+1)]<<4|revLookup[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,n){for(var r,o=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(tripletToBase64(r));return o.join("")}function fromByteArray(e){var t;inited||init();for(var n=e.length,r=n%3,o="",i=[],a=16383,s=0,c=n-r;s<c;s+=a)i.push(encodeChunk(e,s,s+a>c?c:s+a));return 1===r?(t=e[n-1],o+=lookup[t>>2],o+=lookup[t<<4&63],o+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],o+=lookup[t>>10],o+=lookup[t>>4&63],o+=lookup[t<<2&63],o+="="),i.push(o),i.join("")}function read(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)}function write(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*v}var toString={}.toString,isArray=Array.isArray||function(e){return"[object Array]"==toString.call(e)},INSPECT_MAX_BYTES=50;Buffer$1.TYPED_ARRAY_SUPPORT=void 0===global.TYPED_ARRAY_SUPPORT||global.TYPED_ARRAY_SUPPORT;var _kMaxLength=kMaxLength();function kMaxLength(){return Buffer$1.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(e,t){if(kMaxLength()<t)throw new RangeError("Invalid typed array length");return Buffer$1.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=Buffer$1.prototype:(null===e&&(e=new Buffer$1(t)),e.length=t),e}function Buffer$1(e,t,n){if(!(Buffer$1.TYPED_ARRAY_SUPPORT||this instanceof Buffer$1))return new Buffer$1(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,e)}return from(this,e,t,n)}function from(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?fromArrayBuffer(e,t,n,r):"string"==typeof t?fromString(e,t,n):fromObject(e,t)}function assertSize(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function alloc(e,t,n,r){return assertSize(t),t<=0?createBuffer(e,t):void 0!==n?"string"==typeof r?createBuffer(e,t).fill(n,r):createBuffer(e,t).fill(n):createBuffer(e,t)}function allocUnsafe(e,t){if(assertSize(t),e=createBuffer(e,t<0?0:0|checked(t)),!Buffer$1.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fromString(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!Buffer$1.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|byteLength(t,n),o=(e=createBuffer(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}function fromArrayLike(e,t){var n=t.length<0?0:0|checked(t.length);e=createBuffer(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function fromArrayBuffer(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),Buffer$1.TYPED_ARRAY_SUPPORT?(e=t).__proto__=Buffer$1.prototype:e=fromArrayLike(e,t),e}function fromObject(e,t){if(internalIsBuffer(t)){var n=0|checked(t.length);return 0===(e=createBuffer(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||isnan(t.length)?createBuffer(e,0):fromArrayLike(e,t);if("Buffer"===t.type&&isArray(t.data))return fromArrayLike(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(e){if(e>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|e}function SlowBuffer(e){return+e!=e&&(e=0),Buffer$1.alloc(+e)}function internalIsBuffer(e){return!(null==e||!e._isBuffer)}function byteLength(e,t){if(internalIsBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return base64ToBytes(e).length;default:if(r)return utf8ToBytes(e).length;t=(""+t).toLowerCase(),r=!0}}function slowToString(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return hexSlice(this,t,n);case"utf8":case"utf-8":return utf8Slice(this,t,n);case"ascii":return asciiSlice(this,t,n);case"latin1":case"binary":return latin1Slice(this,t,n);case"base64":return base64Slice(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function swap(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function bidirectionalIndexOf(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=Buffer$1.from(t,r)),internalIsBuffer(t))return 0===t.length?-1:arrayIndexOf(e,t,n,r,o);if("number"==typeof t)return t&=255,Buffer$1.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):arrayIndexOf(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function hexWrite(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function utf8Write(e,t,n,r){return blitBuffer(utf8ToBytes(t,e.length-n),e,n,r)}function asciiWrite(e,t,n,r){return blitBuffer(asciiToBytes(t),e,n,r)}function latin1Write(e,t,n,r){return asciiWrite(e,t,n,r)}function base64Write(e,t,n,r){return blitBuffer(base64ToBytes(t),e,n,r)}function ucs2Write(e,t,n,r){return blitBuffer(utf16leToBytes(t,e.length-n),e,n,r)}function base64Slice(e,t,n){return 0===t&&n===e.length?fromByteArray(e):fromByteArray(e.slice(t,n))}function utf8Slice(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return decodeCodePointsArray(r)}Buffer$1.poolSize=8192,Buffer$1._augment=function(e){return e.__proto__=Buffer$1.prototype,e},Buffer$1.from=function(e,t,n){return from(null,e,t,n)},Buffer$1.TYPED_ARRAY_SUPPORT&&(Buffer$1.prototype.__proto__=Uint8Array.prototype,Buffer$1.__proto__=Uint8Array),Buffer$1.alloc=function(e,t,n){return alloc(null,e,t,n)},Buffer$1.allocUnsafe=function(e){return allocUnsafe(null,e)},Buffer$1.allocUnsafeSlow=function(e){return allocUnsafe(null,e)},Buffer$1.isBuffer=isBuffer,Buffer$1.compare=function(e,t){if(!internalIsBuffer(e)||!internalIsBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},Buffer$1.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer$1.concat=function(e,t){if(!isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer$1.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=Buffer$1.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var i=e[n];if(!internalIsBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,o),o+=i.length}return r},Buffer$1.byteLength=byteLength,Buffer$1.prototype._isBuffer=!0,Buffer$1.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)swap(this,t,t+1);return this},Buffer$1.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)swap(this,t,t+3),swap(this,t+1,t+2);return this},Buffer$1.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)swap(this,t,t+7),swap(this,t+1,t+6),swap(this,t+2,t+5),swap(this,t+3,t+4);return this},Buffer$1.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?utf8Slice(this,0,e):slowToString.apply(this,arguments)},Buffer$1.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer$1.compare(this,e)},Buffer$1.prototype.inspect=function(){var e="",t=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},Buffer$1.prototype.compare=function(e,t,n,r,o){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),c=this.slice(r,o),u=e.slice(t,n),l=0;l<s;++l)if(c[l]!==u[l]){i=c[l],a=u[l];break}return i<a?-1:a<i?1:0},Buffer$1.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},Buffer$1.prototype.indexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!0)},Buffer$1.prototype.lastIndexOf=function(e,t,n){return bidirectionalIndexOf(this,e,t,n,!1)},Buffer$1.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return hexWrite(this,e,t,n);case"utf8":case"utf-8":return utf8Write(this,e,t,n);case"ascii":return asciiWrite(this,e,t,n);case"latin1":case"binary":return latin1Write(this,e,t,n);case"base64":return base64Write(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},Buffer$1.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(e){var t=e.length;if(t<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=MAX_ARGUMENTS_LENGTH));return n}function asciiSlice(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function latin1Slice(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function hexSlice(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=toHex(e[i]);return o}function utf16leSlice(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function checkOffset(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function checkInt(e,t,n,r,o,i){if(!internalIsBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function objectWriteUInt16(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function objectWriteUInt32(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function checkIEEE754(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(e,t,n,r,o){return o||checkIEEE754(e,t,n,4,34028234663852886e22,-34028234663852886e22),write(e,t,n,r,23,4),n+4}function writeDouble(e,t,n,r,o){return o||checkIEEE754(e,t,n,8,17976931348623157e292,-17976931348623157e292),write(e,t,n,r,52,8),n+8}Buffer$1.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),Buffer$1.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=Buffer$1.prototype;else{var o=t-e;n=new Buffer$1(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},Buffer$1.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},Buffer$1.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},Buffer$1.prototype.readUInt8=function(e,t){return t||checkOffset(e,1,this.length),this[e]},Buffer$1.prototype.readUInt16LE=function(e,t){return t||checkOffset(e,2,this.length),this[e]|this[e+1]<<8},Buffer$1.prototype.readUInt16BE=function(e,t){return t||checkOffset(e,2,this.length),this[e]<<8|this[e+1]},Buffer$1.prototype.readUInt32LE=function(e,t){return t||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer$1.prototype.readUInt32BE=function(e,t){return t||checkOffset(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer$1.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},Buffer$1.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||checkOffset(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},Buffer$1.prototype.readInt8=function(e,t){return t||checkOffset(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer$1.prototype.readInt16LE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt16BE=function(e,t){t||checkOffset(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},Buffer$1.prototype.readInt32LE=function(e,t){return t||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer$1.prototype.readInt32BE=function(e,t){return t||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer$1.prototype.readFloatLE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!0,23,4)},Buffer$1.prototype.readFloatBE=function(e,t){return t||checkOffset(e,4,this.length),read(this,e,!1,23,4)},Buffer$1.prototype.readDoubleLE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!0,52,8)},Buffer$1.prototype.readDoubleBE=function(e,t){return t||checkOffset(e,8,this.length),read(this,e,!1,52,8)},Buffer$1.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},Buffer$1.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||checkInt(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},Buffer$1.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,255,0),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},Buffer$1.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,65535,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,4294967295,0),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);checkInt(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},Buffer$1.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,1,127,-128),Buffer$1.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer$1.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):objectWriteUInt16(this,e,t,!0),t+2},Buffer$1.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,2,32767,-32768),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):objectWriteUInt16(this,e,t,!1),t+2},Buffer$1.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):objectWriteUInt32(this,e,t,!0),t+4},Buffer$1.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||checkInt(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$1.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):objectWriteUInt32(this,e,t,!1),t+4},Buffer$1.prototype.writeFloatLE=function(e,t,n){return writeFloat(this,e,t,!0,n)},Buffer$1.prototype.writeFloatBE=function(e,t,n){return writeFloat(this,e,t,!1,n)},Buffer$1.prototype.writeDoubleLE=function(e,t,n){return writeDouble(this,e,t,!0,n)},Buffer$1.prototype.writeDoubleBE=function(e,t,n){return writeDouble(this,e,t,!1,n)},Buffer$1.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!Buffer$1.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},Buffer$1.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Buffer$1.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=internalIsBuffer(e)?e:utf8ToBytes(new Buffer$1(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(e){if((e=stringtrim(e).replace(INVALID_BASE64_RE,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function stringtrim(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function toHex(e){return e<16?"0"+e.toString(16):e.toString(16)}function utf8ToBytes(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function asciiToBytes(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function utf16leToBytes(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}function base64ToBytes(e){return toByteArray(base64clean(e))}function blitBuffer(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function isnan(e){return e!=e}function isBuffer(e){return null!=e&&(!!e._isBuffer||isFastBuffer(e)||isSlowBuffer(e))}function isFastBuffer(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function isSlowBuffer(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&isFastBuffer(e.slice(0,0))}var bufferEs6=Object.freeze({INSPECT_MAX_BYTES:INSPECT_MAX_BYTES,kMaxLength:_kMaxLength,Buffer:Buffer$1,SlowBuffer:SlowBuffer,isBuffer:isBuffer}),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var map=Map,long_1=Long,wasm=null;function Long(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function isLong(e){return!0===(e&&e.__isLong__)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var n,r,o;return t?(o=0<=(e>>>=0)&&e<256)&&(r=UINT_CACHE[e])?r:(n=fromBits(e,(0|e)<0?-1:0,!0),o&&(UINT_CACHE[e]=n),n):(o=-128<=(e|=0)&&e<128)&&(r=INT_CACHE[e])?r:(n=fromBits(e,e<0?-1:0,!1),o&&(INT_CACHE[e]=n),n)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,n){return new Long(e,t,n)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString$1(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return ZERO;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return fromString$1(e.substring(1),t,n).neg();for(var o=fromNumber(pow_dbl(n,8)),i=ZERO,a=0;a<e.length;a+=8){var s=Math.min(8,e.length-a),c=parseInt(e.substring(a,a+s),n);if(s<8){var u=fromNumber(pow_dbl(n,s));i=i.mul(u).add(fromNumber(c))}else i=(i=i.mul(o)).add(fromNumber(c))}return i.unsigned=t,i}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString$1(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString$1,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=fromNumber(pow_dbl(e,6),this.unsigned),i=this,a="";;){var s=i.div(o),c=(i.sub(s.mul(o)).toInt()>>>0).toString(e);if((i=s).isZero())return c+a;for(;c.length<6;)c="0"+c;a=""+c+a}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=0,u=0,l=0,d=0;return l+=(d+=o+(65535&e.low))>>>16,u+=(l+=r+s)>>>16,c+=(u+=n+a)>>>16,c+=t+i,fromBits((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return ZERO;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,i=e.high>>>16,a=65535&e.high,s=e.low>>>16,c=65535&e.low,u=0,l=0,d=0,f=0;return d+=(f+=o*c)>>>16,l+=(d+=r*c)>>>16,d&=65535,l+=(d+=o*s)>>>16,u+=(l+=n*c)>>>16,l&=65535,u+=(l+=r*s)>>>16,l&=65535,u+=(l+=o*a)>>>16,u+=t*c+n*s+r*a+o*i,fromBits((d&=65535)<<16|(f&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,n,r;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;r=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(n=this.sub(e.mul(t)),r=t.add(n.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();r=ZERO}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:pow_dbl(2,o-48),a=fromNumber(t),s=a.mul(e);s.isNegative()||s.gt(n);)s=(a=fromNumber(t-=i,this.unsigned)).mul(e);a.isZero()&&(a=ONE),r=r.add(a),n=n.sub(s)}return r},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){if(isLong(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?fromBits(this.low>>>e|t<<32-e,t>>>e,this.unsigned):fromBits(32===e?t:t>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,n){return n?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},long_1.prototype.toExtendedJSON=function(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}},long_1.fromExtendedJSON=function(e,t){var n=long_1.fromString(e.$numberLong);return t&&t.relaxed?n.toNumber():n},Object.defineProperty(long_1.prototype,"_bsontype",{value:"Long"});var long_1$1=long_1;function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var Double=function(){function e(t){_classCallCheck(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:{$numberDouble:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseFloat(t.$numberDouble):new e(parseFloat(t.$numberDouble))}}]),e}();Object.defineProperty(Double.prototype,"_bsontype",{value:"Double"});var double_1=Double;function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),e}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Timestamp=function(e){function t(e,n){var r;return _classCallCheck$1(this,t),r=long_1$1.isLong(e)?_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e.low,e.high,!0)):_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,!0)),_possibleConstructorReturn(r)}return _inherits(t,e),_createClass$1(t,[{key:"toJSON",value:function(){return{$timestamp:this.toString()}}},{key:"toExtendedJSON",value:function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}}}],[{key:"fromInt",value:function(e){return new t(long_1$1.fromInt(e,!0))}},{key:"fromNumber",value:function(e){return new t(long_1$1.fromNumber(e,!0))}},{key:"fromBits",value:function(e,n){return new t(e,n)}},{key:"fromString",value:function(e,n){return new t(long_1$1.fromString(e,n,!0))}},{key:"fromExtendedJSON",value:function(e){return new t(e.$timestamp.i,e.$timestamp.t)}}]),t}(long_1$1);Object.defineProperty(Timestamp.prototype,"_bsontype",{value:"Timestamp"}),Timestamp.MAX_VALUE=Timestamp.MAX_UNSIGNED_VALUE;var timestamp=Timestamp,require$$0={};function normalizedFunctionString(e){return e.toString().replace("function(","function (")}function insecureRandomBytes(e){for(var t=new Uint8Array(e),n=0;n<e;++n)t[n]=Math.floor(256*Math.random());return t}var randomBytes=insecureRandomBytes;if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues)randomBytes=function(e){return window.crypto.getRandomValues(new Uint8Array(e))};else{try{randomBytes=require$$0.randomBytes}catch(e){}null==randomBytes&&(randomBytes=insecureRandomBytes)}var utils={normalizedFunctionString:normalizedFunctionString,randomBytes:randomBytes};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}"function"==typeof global.setTimeout&&(cachedSetTimeout=setTimeout),"function"==typeof global.clearTimeout&&(cachedClearTimeout=clearTimeout);var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function nextTick(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)}function Item(e,t){this.fun=e,this.array=t}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform="browser",browser=!0,env={},argv=[],version="",versions={},release={},config={};function noop(){}var on=noop,addListener=noop,once=noop,off=noop,removeListener=noop,removeAllListeners=noop,emit=noop;function binding(e){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(e){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance=global.performance||{},performanceNow=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||function(){return(new Date).getTime()};function hrtime(e){var t=.001*performanceNow.call(performance),n=Math.floor(t),r=Math.floor(t%1*1e9);return e&&(n-=e[0],(r-=e[1])<0&&(n--,r+=1e9)),[n,r]}var startTime=new Date;function uptime(){return(new Date-startTime)/1e3}var process={nextTick:nextTick,title:title,browser:browser,env:env,argv:argv,version:version,versions:versions,on:on,addListener:addListener,once:once,off:off,removeListener:removeListener,removeAllListeners:removeAllListeners,emit:emit,binding:binding,cwd:cwd,chdir:chdir,umask:umask,hrtime:hrtime,platform:platform,release:release,config:config,uptime:uptime},inherits;inherits="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var inherits$1=inherits;function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var formatRegExp=/%[sdj%]/g;function format(e){if(!isString(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(inspect(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(formatRegExp,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),a=r[n];n<o;a=r[++n])isNull(a)||!isObject(a)?i+=" "+a:i+=" "+inspect(a);return i}function deprecate(e,t){if(isUndefined(global.process))return function(){return deprecate(e,t).apply(this,arguments)};var n=!1;return function(){return n||(console.error(t),n=!0),e.apply(this,arguments)}}var debugs={},debugEnviron;function debuglog(e){if(isUndefined(debugEnviron)&&(debugEnviron=process.env.NODE_DEBUG||""),e=e.toUpperCase(),!debugs[e])if(new RegExp("\\b"+e+"\\b","i").test(debugEnviron)){debugs[e]=function(){var t=format.apply(null,arguments);console.error("%s %d: %s",e,0,t)}}else debugs[e]=function(){};return debugs[e]}function inspect(e,t){var n={seen:[],stylize:stylizeNoColor};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),isBoolean(t)?n.showHidden=t:t&&_extend(n,t),isUndefined(n.showHidden)&&(n.showHidden=!1),isUndefined(n.depth)&&(n.depth=2),isUndefined(n.colors)&&(n.colors=!1),isUndefined(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=stylizeWithColor),formatValue(n,e,n.depth)}function stylizeWithColor(e,t){var n=inspect.styles[t];return n?"["+inspect.colors[n][0]+"m"+e+"["+inspect.colors[n][1]+"m":e}function stylizeNoColor(e,t){return e}function arrayToHash(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function formatValue(e,t,n){if(e.customInspect&&t&&isFunction(t.inspect)&&t.inspect!==inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return isString(r)||(r=formatValue(e,r,n)),r}var o=formatPrimitive(e,t);if(o)return o;var i=Object.keys(t),a=arrayToHash(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(t)),isError(t)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return formatError(t);if(0===i.length){if(isFunction(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(isRegExp(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(isDate(t))return e.stylize(Date.prototype.toString.call(t),"date");if(isError(t))return formatError(t)}var c,u="",l=!1,d=["{","}"];(isArray$1(t)&&(l=!0,d=["[","]"]),isFunction(t))&&(u=" [Function"+(t.name?": "+t.name:"")+"]");return isRegExp(t)&&(u=" "+RegExp.prototype.toString.call(t)),isDate(t)&&(u=" "+Date.prototype.toUTCString.call(t)),isError(t)&&(u=" "+formatError(t)),0!==i.length||l&&0!=t.length?n<0?isRegExp(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=l?formatArray(e,t,n,a,i):i.map((function(r){return formatProperty(e,t,n,a,r,l)})),e.seen.pop(),reduceToSingleString(c,u,d)):d[0]+u+d[1]}function formatPrimitive(e,t){if(isUndefined(t))return e.stylize("undefined","undefined");if(isString(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return isNumber(t)?e.stylize(""+t,"number"):isBoolean(t)?e.stylize(""+t,"boolean"):isNull(t)?e.stylize("null","null"):void 0}function formatError(e){return"["+Error.prototype.toString.call(e)+"]"}function formatArray(e,t,n,r,o){for(var i=[],a=0,s=t.length;a<s;++a)hasOwnProperty(t,String(a))?i.push(formatProperty(e,t,n,r,String(a),!0)):i.push("");return o.forEach((function(o){o.match(/^\d+$/)||i.push(formatProperty(e,t,n,r,o,!0))})),i}function formatProperty(e,t,n,r,o,i){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),hasOwnProperty(r,o)||(a="["+o+"]"),s||(e.seen.indexOf(c.value)<0?(s=isNull(n)?formatValue(e,c.value,null):formatValue(e,c.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),isUndefined(a)){if(i&&o.match(/^\d+$/))return s;(a=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function reduceToSingleString(e,t,n){return e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function isArray$1(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"===_typeof$1(e)}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"===_typeof$1(e)&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"===_typeof$1(e)||void 0===e}function isBuffer$1(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}function pad(e){return e<10?"0"+e.toString(10):e.toString(10)}inspect.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},inspect.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function timestamp$1(){var e=new Date,t=[pad(e.getHours()),pad(e.getMinutes()),pad(e.getSeconds())].join(":");return[e.getDate(),months[e.getMonth()],t].join(" ")}function log(){console.log("%s - %s",timestamp$1(),format.apply(null,arguments))}function _extend(e,t){if(!t||!isObject(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var util={inherits:inherits$1,_extend:_extend,log:log,isBuffer:isBuffer$1,isPrimitive:isPrimitive,isFunction:isFunction,isError:isError,isDate:isDate,isObject:isObject,isRegExp:isRegExp,isUndefined:isUndefined,isSymbol:isSymbol,isString:isString,isNumber:isNumber,isNullOrUndefined:isNullOrUndefined,isNull:isNull,isBoolean:isBoolean,isArray:isArray$1,inspect:inspect,deprecate:deprecate,format:format,debuglog:debuglog};function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),e}var Buffer$2=bufferEs6.Buffer,randomBytes$1=utils.randomBytes,deprecate$1=util.deprecate,PROCESS_UNIQUE=randomBytes$1(5),checkForHexRegExp=new RegExp("^[0-9a-fA-F]{24}$"),hasBufferType=!1;try{Buffer$2&&Buffer$2.from&&(hasBufferType=!0)}catch(e){hasBufferType=!1}for(var hexTable=[],_i=0;_i<256;_i++)hexTable[_i]=(_i<=15?"0":"")+_i.toString(16);for(var decodeLookup=[],i=0;i<10;)decodeLookup[48+i]=i++;for(;i<16;)decodeLookup[55+i]=decodeLookup[87+i]=i++;var _Buffer=Buffer$2;function convertToHex(e){return e.toString("hex")}function makeObjectIdError(e,t){var n=e[t];return new TypeError('ObjectId string "'.concat(e,'" contains invalid character "').concat(n,'" with character code (').concat(e.charCodeAt(t),"). All character codes for a non-hex string must be less than 256."))}var ObjectId=function(){function e(t){if(_classCallCheck$2(this,e),t instanceof e)return t;if(null==t||"number"==typeof t)return this.id=e.generate(t),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(t);if(!n&&null!=t)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"==typeof t&&24===t.length&&hasBufferType)return new e(Buffer$2.from(t,"hex"));if(n&&"string"==typeof t&&24===t.length)return e.createFromHexString(t);if(null==t||12!==t.length){if(null!=t&&t.toHexString)return e.createFromHexString(t.toHexString());throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=t,e.cacheHexString&&(this.__id=this.toString("hex"))}return _createClass$2(e,[{key:"toHexString",value:function(){if(e.cacheHexString&&this.__id)return this.__id;var t="";if(!this.id||!this.id.length)throw new TypeError("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof _Buffer)return t=convertToHex(this.id),e.cacheHexString&&(this.__id=t),t;for(var n=0;n<this.id.length;n++){var r=hexTable[this.id.charCodeAt(n)];if("string"!=typeof r)throw makeObjectIdError(this.id,n);t+=r}return e.cacheHexString&&(this.__id=t),t}},{key:"toString",value:function(e){return this.id&&this.id.copy?this.id.toString("string"==typeof e?e:"hex"):this.toHexString()}},{key:"toJSON",value:function(){return this.toHexString()}},{key:"equals",value:function(t){return t instanceof e?this.toString()===t.toString():"string"==typeof t&&e.isValid(t)&&12===t.length&&this.id instanceof _Buffer?t===this.id.toString("binary"):"string"==typeof t&&e.isValid(t)&&24===t.length?t.toLowerCase()===this.toHexString():"string"==typeof t&&e.isValid(t)&&12===t.length?t===this.id:!(null==t||!(t instanceof e||t.toHexString))&&t.toHexString()===this.toHexString()}},{key:"getTimestamp",value:function(){var e=new Date,t=this.id.readUInt32BE(0);return e.setTime(1e3*Math.floor(t)),e}},{key:"toExtendedJSON",value:function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}}],[{key:"getInc",value:function(){return e.index=(e.index+1)%16777215}},{key:"generate",value:function(t){"number"!=typeof t&&(t=~~(Date.now()/1e3));var n=e.getInc(),r=Buffer$2.alloc(12);return r[3]=255&t,r[2]=t>>8&255,r[1]=t>>16&255,r[0]=t>>24&255,r[4]=PROCESS_UNIQUE[0],r[5]=PROCESS_UNIQUE[1],r[6]=PROCESS_UNIQUE[2],r[7]=PROCESS_UNIQUE[3],r[8]=PROCESS_UNIQUE[4],r[11]=255&n,r[10]=n>>8&255,r[9]=n>>16&255,r}},{key:"createPk",value:function(){return new e}},{key:"createFromTime",value:function(t){var n=Buffer$2.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n[3]=255&t,n[2]=t>>8&255,n[1]=t>>16&255,n[0]=t>>24&255,new e(n)}},{key:"createFromHexString",value:function(t){if(void 0===t||null!=t&&24!==t.length)throw new TypeError("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(hasBufferType)return new e(Buffer$2.from(t,"hex"));for(var n=new _Buffer(12),r=0,o=0;o<24;)n[r++]=decodeLookup[t.charCodeAt(o++)]<<4|decodeLookup[t.charCodeAt(o++)];return new e(n)}},{key:"isValid",value:function(t){return null!=t&&("number"==typeof t||("string"==typeof t?12===t.length||24===t.length&&checkForHexRegExp.test(t):t instanceof e||(t instanceof _Buffer&&12===t.length||!!t.toHexString&&(12===t.id.length||24===t.id.length&&checkForHexRegExp.test(t.id)))))}},{key:"fromExtendedJSON",value:function(t){return new e(t.$oid)}}]),e}();ObjectId.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.get_inc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.getInc=deprecate$1((function(){return ObjectId.getInc()}),"Please use the static `ObjectId.getInc()` instead"),ObjectId.prototype.generate=deprecate$1((function(e){return ObjectId.generate(e)}),"Please use the static `ObjectId.generate(time)` instead"),Object.defineProperty(ObjectId.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),ObjectId.prototype[util.inspect.custom||"inspect"]=ObjectId.prototype.toString,ObjectId.index=~~(16777215*Math.random()),Object.defineProperty(ObjectId.prototype,"_bsontype",{value:"ObjectID"});var objectid=ObjectId;function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),n&&_defineProperties$3(e,n),e}function alphabetize(e){return e.split("").sort().join("")}var BSONRegExp=function(){function e(t,n){_classCallCheck$3(this,e),this.pattern=t||"",this.options=n?alphabetize(n):"";for(var r=0;r<this.options.length;r++)if("i"!==this.options[r]&&"m"!==this.options[r]&&"x"!==this.options[r]&&"l"!==this.options[r]&&"s"!==this.options[r]&&"u"!==this.options[r])throw new Error("The regular expression option [".concat(this.options[r],"] is not supported"))}return _createClass$3(e,[{key:"toExtendedJSON",value:function(e){return(e=e||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}}],[{key:"parseOptions",value:function(e){return e?e.split("").sort().join(""):""}},{key:"fromExtendedJSON",value:function(t){return t.$regex?"BSONRegExp"===t.$regex._bsontype?t:new e(t.$regex,e.parseOptions(t.$options)):new e(t.$regularExpression.pattern,e.parseOptions(t.$regularExpression.options))}}]),e}();Object.defineProperty(BSONRegExp.prototype,"_bsontype",{value:"BSONRegExp"});var regexp=BSONRegExp;function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),e}var BSONSymbol=function(){function e(t){_classCallCheck$4(this,e),this.value=t}return _createClass$4(e,[{key:"valueOf",value:function(){return this.value}},{key:"toString",value:function(){return this.value}},{key:"inspect",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(){return{$symbol:this.value}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$symbol)}}]),e}();Object.defineProperty(BSONSymbol.prototype,"_bsontype",{value:"Symbol"});var symbol=BSONSymbol;function _classCallCheck$5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$5(e,t,n){return t&&_defineProperties$5(e.prototype,t),n&&_defineProperties$5(e,n),e}var Int32=function(){function e(t){_classCallCheck$5(this,e),t instanceof Number&&(t=t.valueOf()),this.value=t}return _createClass$5(e,[{key:"valueOf",value:function(){return this.value}},{key:"toJSON",value:function(){return this.value}},{key:"toExtendedJSON",value:function(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}}],[{key:"fromExtendedJSON",value:function(t,n){return n&&n.relaxed?parseInt(t.$numberInt,10):new e(t.$numberInt)}}]),e}();Object.defineProperty(Int32.prototype,"_bsontype",{value:"Int32"});var int_32=Int32;function _classCallCheck$6(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$6(e,t,n){return t&&_defineProperties$6(e.prototype,t),n&&_defineProperties$6(e,n),e}var Code=function(){function e(t,n){_classCallCheck$6(this,e),this.code=t,this.scope=n}return _createClass$6(e,[{key:"toJSON",value:function(){return{scope:this.scope,code:this.code}}},{key:"toExtendedJSON",value:function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}}],[{key:"fromExtendedJSON",value:function(t){return new e(t.$code,t.$scope)}}]),e}();Object.defineProperty(Code.prototype,"_bsontype",{value:"Code"});var code=Code,Buffer$3=bufferEs6.Buffer,PARSE_STRING_REGEXP=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,PARSE_INF_REGEXP=/^(\+|-)?(Infinity|inf)$/i,PARSE_NAN_REGEXP=/^(\+|-)?NaN$/i,EXPONENT_MAX=6111,EXPONENT_MIN=-6176,EXPONENT_BIAS=6176,MAX_DIGITS=34,NAN_BUFFER=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_NEGATIVE_BUFFER=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),INF_POSITIVE_BUFFER=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),EXPONENT_REGEX=/^([-+])?(\d+)?$/;function isDigit(e){return!isNaN(parseInt(e,10))}function divideu128(e){var t=long_1$1.fromNumber(1e9),n=long_1$1.fromNumber(0);if(!(e.parts[0]||e.parts[1]||e.parts[2]||e.parts[3]))return{quotient:e,rem:n};for(var r=0;r<=3;r++)n=(n=n.shiftLeft(32)).add(new long_1$1(e.parts[r],0)),e.parts[r]=n.div(t).low,n=n.modulo(t);return{quotient:e,rem:n}}function multiply64x2(e,t){if(!e&&!t)return{high:long_1$1.fromNumber(0),low:long_1$1.fromNumber(0)};var n=e.shiftRightUnsigned(32),r=new long_1$1(e.getLowBits(),0),o=t.shiftRightUnsigned(32),i=new long_1$1(t.getLowBits(),0),a=n.multiply(o),s=n.multiply(i),c=r.multiply(o),u=r.multiply(i);return a=a.add(s.shiftRightUnsigned(32)),s=new long_1$1(s.getLowBits(),0).add(c).add(u.shiftRightUnsigned(32)),{high:a=a.add(s.shiftRightUnsigned(32)),low:u=s.shiftLeft(32).add(new long_1$1(u.getLowBits(),0))}}function lessThan(e,t){var n=e.high>>>0,r=t.high>>>0;return n<r||n===r&&e.low>>>0<t.low>>>0}function invalidErr(e,t){throw new TypeError('"'.concat(e,'" is not a valid Decimal128 string - ').concat(t))}function Decimal128(e){this.bytes=e}Decimal128.fromString=function(e){var t,n=!1,r=!1,o=!1,i=0,a=0,s=0,c=0,u=0,l=[0],d=0,f=0,p=0,h=0,v=0,g=0,_=[0,0],b=[0,0],y=0;if(e.length>=7e3)throw new TypeError(e+" not a valid Decimal128 string");var m=e.match(PARSE_STRING_REGEXP),w=e.match(PARSE_INF_REGEXP),O=e.match(PARSE_NAN_REGEXP);if(!m&&!w&&!O||0===e.length)throw new TypeError(e+" not a valid Decimal128 string");if(m){var S=m[2],I=m[4],E=m[5],C=m[6];I&&void 0===C&&invalidErr(e,"missing exponent power"),I&&void 0===S&&invalidErr(e,"missing exponent base"),void 0===I&&(E||C)&&invalidErr(e,"missing e before exponent")}if("+"!==e[y]&&"-"!==e[y]||(n="-"===e[y++]),!isDigit(e[y])&&"."!==e[y]){if("i"===e[y]||"I"===e[y])return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));if("N"===e[y])return new Decimal128(Buffer$3.from(NAN_BUFFER))}for(;isDigit(e[y])||"."===e[y];)"."!==e[y]?(d<34&&("0"!==e[y]||o)&&(o||(u=a),o=!0,l[f++]=parseInt(e[y],10),d+=1),o&&(s+=1),r&&(c+=1),a+=1,y+=1):(r&&invalidErr(e,"contains multiple periods"),r=!0,y+=1);if(r&&!a)throw new TypeError(e+" not a valid Decimal128 string");if("e"===e[y]||"E"===e[y]){var T=e.substr(++y).match(EXPONENT_REGEX);if(!T||!T[2])return new Decimal128(Buffer$3.from(NAN_BUFFER));v=parseInt(T[0],10),y+=T[0].length}if(e[y])return new Decimal128(Buffer$3.from(NAN_BUFFER));if(p=0,d){if(h=d-1,1!==(i=s))for(;"0"===e[u+i-1];)i-=1}else p=0,h=0,l[0]=0,s=1,d=1,i=0;for(v<=c&&c-v>16384?v=EXPONENT_MIN:v-=c;v>EXPONENT_MAX;){if((h+=1)-p>MAX_DIGITS){if(l.join("").match(/^0+$/)){v=EXPONENT_MAX;break}invalidErr(e,"overflow")}v-=1}for(;v<EXPONENT_MIN||d<s;){if(0===h&&i<d){v=EXPONENT_MIN,i=0;break}if(d<s?s-=1:h-=1,v<EXPONENT_MAX)v+=1;else{if(l.join("").match(/^0+$/)){v=EXPONENT_MAX;break}invalidErr(e,"overflow")}}if(h-p+1<i){var k=a;r&&(u+=1,k+=1),n&&(u+=1,k+=1);var A=parseInt(e[u+h+1],10),P=0;if(A>=5&&(P=1,5===A))for(P=l[h]%2==1,g=u+h+2;g<k;g++)if(parseInt(e[g],10)){P=1;break}if(P)for(var D=h;D>=0;D--)if(++l[D]>9&&(l[D]=0,0===D)){if(!(v<EXPONENT_MAX))return new Decimal128(Buffer$3.from(n?INF_NEGATIVE_BUFFER:INF_POSITIVE_BUFFER));v+=1,l[D]=1}}if(_=long_1$1.fromNumber(0),b=long_1$1.fromNumber(0),0===i)_=long_1$1.fromNumber(0),b=long_1$1.fromNumber(0);else if(h-p<17){var j=p;for(b=long_1$1.fromNumber(l[j++]),_=new long_1$1(0,0);j<=h;j++)b=(b=b.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[j]))}else{var x=p;for(_=long_1$1.fromNumber(l[x++]);x<=h-17;x++)_=(_=_.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[x]));for(b=long_1$1.fromNumber(l[x++]);x<=h;x++)b=(b=b.multiply(long_1$1.fromNumber(10))).add(long_1$1.fromNumber(l[x]))}var R=multiply64x2(_,long_1$1.fromString("100000000000000000"));R.low=R.low.add(b),lessThan(R.low,b)&&(R.high=R.high.add(long_1$1.fromNumber(1))),t=v+EXPONENT_BIAS;var M={low:long_1$1.fromNumber(0),high:long_1$1.fromNumber(0)};R.high.shiftRightUnsigned(49).and(long_1$1.fromNumber(1)).equals(long_1$1.fromNumber(1))?(M.high=M.high.or(long_1$1.fromNumber(3).shiftLeft(61)),M.high=M.high.or(long_1$1.fromNumber(t).and(long_1$1.fromNumber(16383).shiftLeft(47))),M.high=M.high.or(R.high.and(long_1$1.fromNumber(0x7fffffffffff)))):(M.high=M.high.or(long_1$1.fromNumber(16383&t).shiftLeft(49)),M.high=M.high.or(R.high.and(long_1$1.fromNumber(562949953421311)))),M.low=R.low,n&&(M.high=M.high.or(long_1$1.fromString("9223372036854775808")));var N=Buffer$3.alloc(16);return y=0,N[y++]=255&M.low.low,N[y++]=M.low.low>>8&255,N[y++]=M.low.low>>16&255,N[y++]=M.low.low>>24&255,N[y++]=255&M.low.high,N[y++]=M.low.high>>8&255,N[y++]=M.low.high>>16&255,N[y++]=M.low.high>>24&255,N[y++]=255&M.high.low,N[y++]=M.high.low>>8&255,N[y++]=M.high.low>>16&255,N[y++]=M.high.low>>24&255,N[y++]=255&M.high.high,N[y++]=M.high.high>>8&255,N[y++]=M.high.high>>16&255,N[y++]=M.high.high>>24&255,new Decimal128(N)};var COMBINATION_MASK=31,EXPONENT_MASK=16383,COMBINATION_INFINITY=30,COMBINATION_NAN=31;Decimal128.prototype.toString=function(){for(var e,t,n,r,o,i,a=0,s=new Array(36),c=0;c<s.length;c++)s[c]=0;var u,l,d,f,p,h=0,v=!1,g={parts:new Array(4)},_=[];h=0;var b=this.bytes;if(r=b[h++]|b[h++]<<8|b[h++]<<16|b[h++]<<24,n=b[h++]|b[h++]<<8|b[h++]<<16|b[h++]<<24,t=b[h++]|b[h++]<<8|b[h++]<<16|b[h++]<<24,e=b[h++]|b[h++]<<8|b[h++]<<16|b[h++]<<24,h=0,{low:new long_1$1(r,n),high:new long_1$1(t,e)}.high.lessThan(long_1$1.ZERO)&&_.push("-"),(o=e>>26&COMBINATION_MASK)>>3==3){if(o===COMBINATION_INFINITY)return _.join("")+"Infinity";if(o===COMBINATION_NAN)return"NaN";i=e>>15&EXPONENT_MASK,d=8+(e>>14&1)}else d=e>>14&7,i=e>>17&EXPONENT_MASK;if(u=i-EXPONENT_BIAS,g.parts[0]=(16383&e)+((15&d)<<14),g.parts[1]=t,g.parts[2]=n,g.parts[3]=r,0===g.parts[0]&&0===g.parts[1]&&0===g.parts[2]&&0===g.parts[3])v=!0;else for(p=3;p>=0;p--){var y=0,m=divideu128(g);if(g=m.quotient,y=m.rem.low)for(f=8;f>=0;f--)s[9*p+f]=y%10,y=Math.floor(y/10)}if(v)a=1,s[h]=0;else for(a=36;!s[h];)a-=1,h+=1;if((l=a-1+u)>=34||l<=-7||u>0){if(a>34)return _.push(0),u>0?_.push("E+"+u):u<0&&_.push("E"+u),_.join("");_.push(s[h++]),(a-=1)&&_.push(".");for(var w=0;w<a;w++)_.push(s[h++]);_.push("E"),l>0?_.push("+"+l):_.push(l)}else if(u>=0)for(var O=0;O<a;O++)_.push(s[h++]);else{var S=a+u;if(S>0)for(var I=0;I<S;I++)_.push(s[h++]);else _.push("0");for(_.push(".");S++<0;)_.push("0");for(var E=0;E<a-Math.max(S-1,0);E++)_.push(s[h++])}return _.join("")},Decimal128.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},Decimal128.fromExtendedJSON=function(e){return Decimal128.fromString(e.$numberDecimal)},Object.defineProperty(Decimal128.prototype,"_bsontype",{value:"Decimal128"});var decimal128=Decimal128;function _classCallCheck$7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$7(e,t,n){return t&&_defineProperties$7(e.prototype,t),n&&_defineProperties$7(e,n),e}var MinKey=function(){function e(){_classCallCheck$7(this,e)}return _createClass$7(e,[{key:"toExtendedJSON",value:function(){return{$minKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MinKey.prototype,"_bsontype",{value:"MinKey"});var min_key=MinKey;function _classCallCheck$8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$8(e,t,n){return t&&_defineProperties$8(e.prototype,t),n&&_defineProperties$8(e,n),e}var MaxKey=function(){function e(){_classCallCheck$8(this,e)}return _createClass$8(e,[{key:"toExtendedJSON",value:function(){return{$maxKey:1}}}],[{key:"fromExtendedJSON",value:function(){return new e}}]),e}();Object.defineProperty(MaxKey.prototype,"_bsontype",{value:"MaxKey"});var max_key=MaxKey;function _classCallCheck$9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$9(e,t,n){return t&&_defineProperties$9(e.prototype,t),n&&_defineProperties$9(e,n),e}var DBRef=function(){function e(t,n,r,o){_classCallCheck$9(this,e);var i=t.split(".");2===i.length&&(r=i.shift(),t=i.shift()),this.collection=t,this.oid=n,this.db=r,this.fields=o||{}}return _createClass$9(e,[{key:"toJSON",value:function(){var e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(e.$db=this.db),e}},{key:"toExtendedJSON",value:function(e){e=e||{};var t={$ref:this.collection,$id:this.oid};return e.legacy?t:(this.db&&(t.$db=this.db),t=Object.assign(t,this.fields))}}],[{key:"fromExtendedJSON",value:function(t){var n=Object.assign({},t);return["$ref","$id","$db"].forEach((function(e){return delete n[e]})),new e(t.$ref,t.$id,t.$db,n)}}]),e}();Object.defineProperty(DBRef.prototype,"_bsontype",{value:"DBRef"}),Object.defineProperty(DBRef.prototype,"namespace",{get:function(){return this.collection},set:function(e){this.collection=e},configurable:!1});var db_ref=DBRef;function _classCallCheck$a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$a(e,t,n){return t&&_defineProperties$a(e.prototype,t),n&&_defineProperties$a(e,n),e}var Buffer$4=bufferEs6.Buffer,Binary=function(){function e(t,n){if(_classCallCheck$a(this,e),!(null==t||"string"==typeof t||Buffer$4.isBuffer(t)||t instanceof Uint8Array||Array.isArray(t)))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");if(this.sub_type=null==n?BSON_BINARY_SUBTYPE_DEFAULT:n,this.position=0,null==t||t instanceof Number)void 0!==Buffer$4?this.buffer=Buffer$4.alloc(e.BUFFER_SIZE):"undefined"!=typeof Uint8Array?this.buffer=new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE)):this.buffer=new Array(e.BUFFER_SIZE);else{if("string"==typeof t)if(void 0!==Buffer$4)this.buffer=Buffer$4.from(t);else{if("undefined"==typeof Uint8Array&&!Array.isArray(t))throw new TypeError("only String, Buffer, Uint8Array or Array accepted");this.buffer=writeStringToArray(t)}else this.buffer=t;this.position=t.length}}return _createClass$a(e,[{key:"put",value:function(t){if(null!=t.length&&"number"!=typeof t&&1!==t.length)throw new TypeError("only accepts single character String, Uint8Array or Array");if("number"!=typeof t&&t<0||t>255)throw new TypeError("only accepts number in a valid unsigned byte range 0-255");var n=null;if(n="string"==typeof t?t.charCodeAt(0):null!=t.length?t[0]:t,this.buffer.length>this.position)this.buffer[this.position++]=n;else if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)){var r=Buffer$4.alloc(e.BUFFER_SIZE+this.buffer.length);this.buffer.copy(r,0,0,this.buffer.length),this.buffer=r,this.buffer[this.position++]=n}else{var o=null;o=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(e.BUFFER_SIZE+this.buffer.length)):new Array(e.BUFFER_SIZE+this.buffer.length);for(var i=0;i<this.buffer.length;i++)o[i]=this.buffer[i];this.buffer=o,this.buffer[this.position++]=n}}},{key:"write",value:function(e,t){if(t="number"==typeof t?t:this.position,this.buffer.length<t+e.length){var n=null;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))n=Buffer$4.alloc(this.buffer.length+e.length),this.buffer.copy(n,0,0,this.buffer.length);else if(isUint8Array(this.buffer)){n=new Uint8Array(new ArrayBuffer(this.buffer.length+e.length));for(var r=0;r<this.position;r++)n[r]=this.buffer[r]}this.buffer=n}if(void 0!==Buffer$4&&Buffer$4.isBuffer(e)&&Buffer$4.isBuffer(this.buffer))e.copy(this.buffer,t,0,e.length),this.position=t+e.length>this.position?t+e.length:this.position;else if(void 0!==Buffer$4&&"string"==typeof e&&Buffer$4.isBuffer(this.buffer))this.buffer.write(e,t,"binary"),this.position=t+e.length>this.position?t+e.length:this.position;else if(isUint8Array(e)||Array.isArray(e)&&"string"!=typeof e){for(var o=0;o<e.length;o++)this.buffer[t++]=e[o];this.position=t>this.position?t:this.position}else if("string"==typeof e){for(var i=0;i<e.length;i++)this.buffer[t++]=e.charCodeAt(i);this.position=t>this.position?t:this.position}}},{key:"read",value:function(e,t){if(t=t&&t>0?t:this.position,this.buffer.slice)return this.buffer.slice(e,e+t);for(var n="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(t)):new Array(t),r=0;r<t;r++)n[r]=this.buffer[e++];return n}},{key:"value",value:function(e){if((e=null!=e&&e)&&void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer)&&this.buffer.length===this.position)return this.buffer;if(void 0!==Buffer$4&&Buffer$4.isBuffer(this.buffer))return e?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position);if(e){if(null!=this.buffer.slice)return this.buffer.slice(0,this.position);for(var t=isUint8Array(this.buffer)?new Uint8Array(new ArrayBuffer(this.position)):new Array(this.position),n=0;n<this.position;n++)t[n]=this.buffer[n];return t}return convertArraytoUtf8BinaryString(this.buffer,0,this.position)}},{key:"length",value:function(){return this.position}},{key:"toJSON",value:function(){return null!=this.buffer?this.buffer.toString("base64"):""}},{key:"toString",value:function(e){return null!=this.buffer?this.buffer.slice(0,this.position).toString(e):""}},{key:"toExtendedJSON",value:function(e){e=e||{};var t=Buffer$4.isBuffer(this.buffer)?this.buffer.toString("base64"):Buffer$4.from(this.buffer).toString("base64"),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:t,$type:1===n.length?"0"+n:n}:{$binary:{base64:t,subType:1===n.length?"0"+n:n}}}}],[{key:"fromExtendedJSON",value:function(t,n){var r,o;return(n=n||{}).legacy?(o=t.$type?parseInt(t.$type,16):0,r=Buffer$4.from(t.$binary,"base64")):(o=t.$binary.subType?parseInt(t.$binary.subType,16):0,r=Buffer$4.from(t.$binary.base64,"base64")),new e(r,o)}}]),e}(),BSON_BINARY_SUBTYPE_DEFAULT=0;function isUint8Array(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)}function writeStringToArray(e){for(var t="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(e.length)):new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function convertArraytoUtf8BinaryString(e,t,n){for(var r="",o=t;o<n;o++)r+=String.fromCharCode(e[o]);return r}Binary.BUFFER_SIZE=256,Binary.SUBTYPE_DEFAULT=0,Binary.SUBTYPE_FUNCTION=1,Binary.SUBTYPE_BYTE_ARRAY=2,Binary.SUBTYPE_UUID_OLD=3,Binary.SUBTYPE_UUID=4,Binary.SUBTYPE_MD5=5,Binary.SUBTYPE_USER_DEFINED=128,Object.defineProperty(Binary.prototype,"_bsontype",{value:"Binary"});var binary=Binary,constants={BSON_INT32_MAX:2147483647,BSON_INT32_MIN:-2147483648,BSON_INT64_MAX:Math.pow(2,63)-1,BSON_INT64_MIN:-Math.pow(2,63),JS_INT_MAX:9007199254740992,JS_INT_MIN:-9007199254740992,BSON_DATA_NUMBER:1,BSON_DATA_STRING:2,BSON_DATA_OBJECT:3,BSON_DATA_ARRAY:4,BSON_DATA_BINARY:5,BSON_DATA_UNDEFINED:6,BSON_DATA_OID:7,BSON_DATA_BOOLEAN:8,BSON_DATA_DATE:9,BSON_DATA_NULL:10,BSON_DATA_REGEXP:11,BSON_DATA_DBPOINTER:12,BSON_DATA_CODE:13,BSON_DATA_SYMBOL:14,BSON_DATA_CODE_W_SCOPE:15,BSON_DATA_INT:16,BSON_DATA_TIMESTAMP:17,BSON_DATA_LONG:18,BSON_DATA_DECIMAL128:19,BSON_DATA_MIN_KEY:255,BSON_DATA_MAX_KEY:127,BSON_BINARY_SUBTYPE_DEFAULT:0,BSON_BINARY_SUBTYPE_FUNCTION:1,BSON_BINARY_SUBTYPE_BYTE_ARRAY:2,BSON_BINARY_SUBTYPE_UUID:3,BSON_BINARY_SUBTYPE_MD5:4,BSON_BINARY_SUBTYPE_USER_DEFINED:128};function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var keysToCodecs={$oid:objectid,$binary:binary,$symbol:symbol,$numberInt:int_32,$numberDecimal:decimal128,$numberDouble:double_1,$numberLong:long_1$1,$minKey:min_key,$maxKey:max_key,$regex:regexp,$regularExpression:regexp,$timestamp:timestamp};function deserializeValue(e,t,n,r){if("number"==typeof n){if(r.relaxed||r.legacy)return n;if(Math.floor(n)===n){if(n>=BSON_INT32_MIN&&n<=BSON_INT32_MAX)return new int_32(n);if(n>=BSON_INT64_MIN&&n<=BSON_INT64_MAX)return new long_1$1.fromNumber(n)}return new double_1(n)}if(null==n||"object"!==_typeof$2(n))return n;if(n.$undefined)return null;for(var o=Object.keys(n).filter((function(e){return e.startsWith("$")&&null!=n[e]})),i=0;i<o.length;i++){var a=keysToCodecs[o[i]];if(a)return a.fromExtendedJSON(n,r)}if(null!=n.$date){var s=n.$date,c=new Date;return r.legacy?"number"==typeof s?c.setTime(s):"string"==typeof s&&c.setTime(Date.parse(s)):"string"==typeof s?c.setTime(Date.parse(s)):long_1$1.isLong(s)?c.setTime(s.toNumber()):"number"==typeof s&&r.relaxed&&c.setTime(s),c}if(null!=n.$code){var u=Object.assign({},n);return n.$scope&&(u.$scope=deserializeValue(e,null,n.$scope)),code.fromExtendedJSON(n)}if(null!=n.$ref||null!=n.$dbPointer){var l=n.$ref?n:n.$dbPointer;if(l instanceof db_ref)return l;var d=Object.keys(l).filter((function(e){return e.startsWith("$")})),f=!0;if(d.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(f=!1)})),f)return db_ref.fromExtendedJSON(l)}return n}function parse(e,t){var n=this;return"boolean"==typeof(t=Object.assign({},{relaxed:!0,legacy:!1},t)).relaxed&&(t.strict=!t.relaxed),"boolean"==typeof t.strict&&(t.relaxed=!t.strict),JSON.parse(e,(function(e,r){return deserializeValue(n,e,r,t)}))}var BSON_INT32_MAX=2147483647,BSON_INT32_MIN=-2147483648,BSON_INT64_MAX=0x8000000000000000,BSON_INT64_MIN=-0x8000000000000000;function stringify(e,t,n,r){null!=n&&"object"===_typeof$2(n)&&(r=n,n=0),null==t||"object"!==_typeof$2(t)||Array.isArray(t)||(r=t,t=null,n=0),r=Object.assign({},{relaxed:!0,legacy:!1},r);var o=Array.isArray(e)?serializeArray(e,r):serializeDocument(e,r);return JSON.stringify(o,t,n)}function serialize(e,t){return t=t||{},JSON.parse(stringify(e,t))}function deserialize(e,t){return t=t||{},parse(JSON.stringify(e),t)}function serializeArray(e,t){return e.map((function(e){return serializeValue(e,t)}))}function getISOString(e){var t=e.toISOString();return 0!==e.getUTCMilliseconds()?t:t.slice(0,-5)+"Z"}function serializeValue(e,t){if(Array.isArray(e))return serializeArray(e,t);if(void 0===e)return null;if(e instanceof Date){var n=e.getTime(),r=n>-1&&n<2534023188e5;return t.legacy?t.relaxed&&r?{$date:e.getTime()}:{$date:getISOString(e)}:t.relaxed&&r?{$date:getISOString(e)}:{$date:{$numberLong:e.getTime().toString()}}}if("number"==typeof e&&!t.relaxed){if(Math.floor(e)===e){var o=e>=BSON_INT64_MIN&&e<=BSON_INT64_MAX;if(e>=BSON_INT32_MIN&&e<=BSON_INT32_MAX)return{$numberInt:e.toString()};if(o)return{$numberLong:e.toString()}}return{$numberDouble:e.toString()}}if(e instanceof RegExp){var i=e.flags;return void 0===i&&(i=e.toString().match(/[gimuy]*$/)[0]),new regexp(e.source,i).toExtendedJSON(t)}return null!=e&&"object"===_typeof$2(e)?serializeDocument(e,t):e}var BSON_TYPE_MAPPINGS={Binary:function(e){return new binary(e.value(),e.subtype)},Code:function(e){return new code(e.code,e.scope)},DBRef:function(e){return new db_ref(e.collection||e.namespace,e.oid,e.db,e.fields)},Decimal128:function(e){return new decimal128(e.bytes)},Double:function(e){return new double_1(e.value)},Int32:function(e){return new int_32(e.value)},Long:function(e){return long_1$1.fromBits(null!=e.low?e.low:e.low_,null!=e.low?e.high:e.high_,null!=e.low?e.unsigned:e.unsigned_)},MaxKey:function(){return new max_key},MinKey:function(){return new min_key},ObjectID:function(e){return new objectid(e)},ObjectId:function(e){return new objectid(e)},BSONRegExp:function(e){return new regexp(e.pattern,e.options)},Symbol:function(e){return new symbol(e.value)},Timestamp:function(e){return timestamp.fromBits(e.low,e.high)}};function serializeDocument(e,t){if(null==e||"object"!==_typeof$2(e))throw new Error("not an object instance");var n=e._bsontype;if(void 0===n){var r={};for(var o in e)r[o]=serializeValue(e[o],t);return r}if("string"==typeof n){var i=e;if("function"!=typeof i.toExtendedJSON){var a=BSON_TYPE_MAPPINGS[n];if(!a)throw new TypeError("Unrecognized or invalid _bsontype: "+n);i=a(i)}return"Code"===n&&i.scope?i=new code(i.code,serializeValue(i.scope,t)):"DBRef"===n&&i.oid&&(i=new db_ref(i.collection,serializeValue(i.oid,t),i.db,i.fields)),i.toExtendedJSON(t)}throw new Error("_bsontype must be a string, but was: "+_typeof$2(n))}var extended_json={parse:parse,deserialize:deserialize,serialize:serialize,stringify:stringify},FIRST_BIT=128,FIRST_TWO_BITS=192,FIRST_THREE_BITS=224,FIRST_FOUR_BITS=240,FIRST_FIVE_BITS=248,TWO_BIT_CHAR=192,THREE_BIT_CHAR=224,FOUR_BIT_CHAR=240,CONTINUING_CHAR=128;function validateUtf8(e,t,n){for(var r=0,o=t;o<n;o+=1){var i=e[o];if(r){if((i&FIRST_TWO_BITS)!==CONTINUING_CHAR)return!1;r-=1}else if(i&FIRST_BIT)if((i&FIRST_THREE_BITS)===TWO_BIT_CHAR)r=1;else if((i&FIRST_FOUR_BITS)===THREE_BIT_CHAR)r=2;else{if((i&FIRST_FIVE_BITS)!==FOUR_BIT_CHAR)return!1;r=3}}return!r}var validateUtf8_1=validateUtf8,validate_utf8={validateUtf8:validateUtf8_1},Buffer$5=bufferEs6.Buffer,validateUtf8$1=validate_utf8.validateUtf8,JS_INT_MAX_LONG=long_1$1.fromNumber(constants.JS_INT_MAX),JS_INT_MIN_LONG=long_1$1.fromNumber(constants.JS_INT_MIN),functionCache={};function deserialize$1(e,t,n){var r=(t=null==t?{}:t)&&t.index?t.index:0,o=e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24;if(o<5)throw new Error("bson size must be >= 5, is ".concat(o));if(t.allowObjectSmallerThanBufferSize&&e.length<o)throw new Error("buffer length ".concat(e.length," must be >= bson size ").concat(o));if(!t.allowObjectSmallerThanBufferSize&&e.length!==o)throw new Error("buffer length ".concat(e.length," must === bson size ").concat(o));if(o+r>e.length)throw new Error("(bson size ".concat(o," + options.index ").concat(r," must be <= buffer length ").concat(Buffer$5.byteLength(e),")"));if(0!==e[r+o-1])throw new Error("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return deserializeObject(e,r,t,n)}function deserializeObject(e,t,n,r){var o=null!=n.evalFunctions&&n.evalFunctions,i=null!=n.cacheFunctions&&n.cacheFunctions,a=null!=n.cacheFunctionsCrc32&&n.cacheFunctionsCrc32;if(!a)var s=null;var c=null==n.fieldsAsRaw?null:n.fieldsAsRaw,u=null!=n.raw&&n.raw,l="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,d=null!=n.promoteBuffers&&n.promoteBuffers,f=null==n.promoteLongs||n.promoteLongs,p=null==n.promoteValues||n.promoteValues,h=t;if(e.length<5)throw new Error("corrupt bson message < 5 bytes long");var v=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(v<5||v>e.length)throw new Error("corrupt bson message");for(var g=r?[]:{},_=0;;){var b=e[t++];if(0===b)break;for(var y=t;0!==e[y]&&y<e.length;)y++;if(y>=Buffer$5.byteLength(e))throw new Error("Bad BSON Document: illegal CString");var m=r?_++:e.toString("utf8",t,y);if(t=y+1,b===constants.BSON_DATA_STRING){var w=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(w<=0||w>e.length-t||0!==e[t+w-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+w-1))throw new Error("Invalid UTF-8 string in BSON document");var O=e.toString("utf8",t,t+w-1);g[m]=O,t+=w}else if(b===constants.BSON_DATA_OID){var S=Buffer$5.alloc(12);e.copy(S,0,t,t+12),g[m]=new objectid(S),t+=12}else if(b===constants.BSON_DATA_INT&&!1===p)g[m]=new int_32(e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24);else if(b===constants.BSON_DATA_INT)g[m]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;else if(b===constants.BSON_DATA_NUMBER&&!1===p)g[m]=new double_1(e.readDoubleLE(t)),t+=8;else if(b===constants.BSON_DATA_NUMBER)g[m]=e.readDoubleLE(t),t+=8;else if(b===constants.BSON_DATA_DATE){var I=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,E=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;g[m]=new Date(new long_1$1(I,E).toNumber())}else if(b===constants.BSON_DATA_BOOLEAN){if(0!==e[t]&&1!==e[t])throw new Error("illegal boolean type value");g[m]=1===e[t++]}else if(b===constants.BSON_DATA_OBJECT){var C=t,T=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24;if(T<=0||T>e.length-t)throw new Error("bad embedded document length in bson");g[m]=u?e.slice(t,t+T):deserializeObject(e,C,n,!1),t+=T}else if(b===constants.BSON_DATA_ARRAY){var k=t,A=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,P=n,D=t+A;if(c&&c[m]){for(var j in P={},n)P[j]=n[j];P.raw=!0}if(g[m]=deserializeObject(e,k,P,!0),0!==e[(t+=A)-1])throw new Error("invalid array terminator byte");if(t!==D)throw new Error("corrupted array bson")}else if(b===constants.BSON_DATA_UNDEFINED)g[m]=void 0;else if(b===constants.BSON_DATA_NULL)g[m]=null;else if(b===constants.BSON_DATA_LONG){var x=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,R=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,M=new long_1$1(x,R);g[m]=f&&!0===p&&M.lessThanOrEqual(JS_INT_MAX_LONG)&&M.greaterThanOrEqual(JS_INT_MIN_LONG)?M.toNumber():M}else if(b===constants.BSON_DATA_DECIMAL128){var N=Buffer$5.alloc(16);e.copy(N,0,t,t+16),t+=16;var L=new decimal128(N);g[m]=L.toObject?L.toObject():L}else if(b===constants.BSON_DATA_BINARY){var B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,F=B,W=e[t++];if(B<0)throw new Error("Negative binary type element size found");if(B>Buffer$5.byteLength(e))throw new Error("Binary type size larger than document size");if(null!=e.slice){if(W===binary.SUBTYPE_BYTE_ARRAY){if((B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>F-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<F-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}g[m]=d&&p?e.slice(t,t+B):new binary(e.slice(t,t+B),W)}else{var U="undefined"!=typeof Uint8Array?new Uint8Array(new ArrayBuffer(B)):new Array(B);if(W===binary.SUBTYPE_BYTE_ARRAY){if((B=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24)<0)throw new Error("Negative binary type element size found for subtype 0x02");if(B>F-4)throw new Error("Binary type with subtype 0x02 contains to long binary size");if(B<F-4)throw new Error("Binary type with subtype 0x02 contains to short binary size")}for(y=0;y<B;y++)U[y]=e[t+y];g[m]=d&&p?U:new binary(U,W)}t+=B}else if(b===constants.BSON_DATA_REGEXP&&!1===l){for(y=t;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var V=e.toString("utf8",t,y);for(y=t=y+1;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var G=e.toString("utf8",t,y);t=y+1;var H=new Array(G.length);for(y=0;y<G.length;y++)switch(G[y]){case"m":H[y]="m";break;case"s":H[y]="g";break;case"i":H[y]="i"}g[m]=new RegExp(V,H.join(""))}else if(b===constants.BSON_DATA_REGEXP&&!0===l){for(y=t;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var z=e.toString("utf8",t,y);for(y=t=y+1;0!==e[y]&&y<e.length;)y++;if(y>=e.length)throw new Error("Bad BSON Document: illegal CString");var q=e.toString("utf8",t,y);t=y+1,g[m]=new regexp(z,q)}else if(b===constants.BSON_DATA_SYMBOL){var Y=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Y<=0||Y>e.length-t||0!==e[t+Y-1])throw new Error("bad string length in bson");g[m]=e.toString("utf8",t,t+Y-1),t+=Y}else if(b===constants.BSON_DATA_TIMESTAMP){var K=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24,J=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;g[m]=new timestamp(K,J)}else if(b===constants.BSON_DATA_MIN_KEY)g[m]=new min_key;else if(b===constants.BSON_DATA_MAX_KEY)g[m]=new max_key;else if(b===constants.BSON_DATA_CODE){var X=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(X<=0||X>e.length-t||0!==e[t+X-1])throw new Error("bad string length in bson");var $=e.toString("utf8",t,t+X-1);if(o)if(i){var Z=a?s($):$;g[m]=isolateEvalWithHash(functionCache,Z,$,g)}else g[m]=isolateEval($);else g[m]=new code($);t+=X}else if(b===constants.BSON_DATA_CODE_W_SCOPE){var Q=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(Q<13)throw new Error("code_w_scope total size shorter minimum expected length");var ee=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ee<=0||ee>e.length-t||0!==e[t+ee-1])throw new Error("bad string length in bson");var te=e.toString("utf8",t,t+ee-1),ne=t+=ee,re=e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24,oe=deserializeObject(e,ne,n,!1);if(t+=re,Q<8+re+ee)throw new Error("code_w_scope total size is to short, truncating scope");if(Q>8+re+ee)throw new Error("code_w_scope total size is to long, clips outer document");if(o){if(i){var ie=a?s(te):te;g[m]=isolateEvalWithHash(functionCache,ie,te,g)}else g[m]=isolateEval(te);g[m].scope=oe}else g[m]=new code(te,oe)}else{if(b!==constants.BSON_DATA_DBPOINTER)throw new Error("Detected unknown BSON type "+b.toString(16)+' for fieldname "'+m+'", are you using the latest BSON parser?');var ae=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;if(ae<=0||ae>e.length-t||0!==e[t+ae-1])throw new Error("bad string length in bson");if(!validateUtf8$1(e,t,t+ae-1))throw new Error("Invalid UTF-8 string in BSON document");var se=e.toString("utf8",t,t+ae-1);t+=ae;var ce=Buffer$5.alloc(12);e.copy(ce,0,t,t+12);var ue=new objectid(ce);t+=12,g[m]=new db_ref(se,ue)}}if(v!==t-h){if(r)throw new Error("corrupt array bson");throw new Error("corrupt object bson")}var le=Object.keys(g).filter((function(e){return e.startsWith("$")})),de=!0;if(le.forEach((function(e){-1===["$ref","$id","$db"].indexOf(e)&&(de=!1)})),!de)return g;if(null!=g.$id&&null!=g.$ref){var fe=Object.assign({},g);return delete fe.$ref,delete fe.$id,delete fe.$db,new db_ref(g.$ref,g.$id,g.$db||null,fe)}return g}function isolateEvalWithHash(functionCache,hash,functionString,object){var value=null;return null==functionCache[hash]&&(eval("value = "+functionString),functionCache[hash]=value),functionCache[hash].bind(object)}function isolateEval(functionString){var value=null;return eval("value = "+functionString),value}var deserializer=deserialize$1;function readIEEE754(e,t,n,r,o){var i,a,s="big"===n,c=8*o-r-1,u=(1<<c)-1,l=u>>1,d=-7,f=s?0:o-1,p=s?1:-1,h=e[t+f];for(f+=p,i=h&(1<<-d)-1,h>>=-d,d+=c;d>0;i=256*i+e[t+f],f+=p,d-=8);for(a=i&(1<<-d)-1,i>>=-d,d+=r;d>0;a=256*a+e[t+f],f+=p,d-=8);if(0===i)i=1-l;else{if(i===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),i-=l}return(h?-1:1)*a*Math.pow(2,i-r)}function writeIEEE754(e,t,n,r,o,i){var a,s,c,u="big"===r,l=8*i-o-1,d=(1<<l)-1,f=d>>1,p=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=u?i-1:0,v=u?-1:1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+f>=1?p/c:p*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=d?(s=0,a=d):a+f>=1?(s=(t*c-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0)),isNaN(t)&&(s=0);o>=8;)e[n+h]=255&s,h+=v,s/=256,o-=8;for(a=a<<o|s,isNaN(t)&&(a+=8),l+=o;l>0;)e[n+h]=255&a,h+=v,a/=256,l-=8;e[n+h-v]|=128*g}var float_parser={readIEEE754:readIEEE754,writeIEEE754:writeIEEE754};function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Buffer$6=bufferEs6.Buffer,writeIEEE754$1=float_parser.writeIEEE754,normalizedFunctionString$1=utils.normalizedFunctionString,regexp$1=/\x00/,ignoreKeys=new Set(["$db","$ref","$id","$clusterTime"]),isDate$1=function(e){return"object"===_typeof$3(e)&&"[object Date]"===Object.prototype.toString.call(e)},isRegExp$1=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)};function serializeString(e,t,n,r,o){e[r++]=constants.BSON_DATA_STRING;var i=o?e.write(t,r,"ascii"):e.write(t,r,"utf8");e[(r=r+i+1)-1]=0;var a=e.write(n,r+4,"utf8");return e[r+3]=a+1>>24&255,e[r+2]=a+1>>16&255,e[r+1]=a+1>>8&255,e[r]=a+1&255,r=r+4+a,e[r++]=0,r}function serializeNumber(e,t,n,r,o){if(Math.floor(n)===n&&n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX)if(n>=constants.BSON_INT32_MIN&&n<=constants.BSON_INT32_MAX)e[r++]=constants.BSON_DATA_INT,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255;else if(n>=constants.JS_INT_MIN&&n<=constants.JS_INT_MAX){e[r++]=constants.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8}else{e[r++]=constants.BSON_DATA_LONG,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=long_1$1.fromNumber(n),a=i.getLowBits(),s=i.getHighBits();e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255}else e[r++]=constants.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n,r,"little",52,8),r+=8;return r}function serializeNull(e,t,n,r,o){return e[r++]=constants.BSON_DATA_NULL,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeBoolean(e,t,n,r,o){return e[r++]=constants.BSON_DATA_BOOLEAN,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=n?1:0,r}function serializeDate(e,t,n,r,o){e[r++]=constants.BSON_DATA_DATE,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=long_1$1.fromNumber(n.getTime()),a=i.getLowBits(),s=i.getHighBits();return e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=255&s,e[r++]=s>>8&255,e[r++]=s>>16&255,e[r++]=s>>24&255,r}function serializeRegExp(e,t,n,r,o){if(e[r++]=constants.BSON_DATA_REGEXP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.source&&null!=n.source.match(regexp$1))throw Error("value "+n.source+" must not contain null bytes");return r+=e.write(n.source,r,"utf8"),e[r++]=0,n.ignoreCase&&(e[r++]=105),n.global&&(e[r++]=115),n.multiline&&(e[r++]=109),e[r++]=0,r}function serializeBSONRegExp(e,t,n,r,o){if(e[r++]=constants.BSON_DATA_REGEXP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,null!=n.pattern.match(regexp$1))throw Error("pattern "+n.pattern+" must not contain null bytes");return r+=e.write(n.pattern,r,"utf8"),e[r++]=0,r+=e.write(n.options.split("").sort().join(""),r,"utf8"),e[r++]=0,r}function serializeMinMax(e,t,n,r,o){return null===n?e[r++]=constants.BSON_DATA_NULL:"MinKey"===n._bsontype?e[r++]=constants.BSON_DATA_MIN_KEY:e[r++]=constants.BSON_DATA_MAX_KEY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,r}function serializeObjectId(e,t,n,r,o){if(e[r++]=constants.BSON_DATA_OID,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,"string"==typeof n.id)e.write(n.id,r,"binary");else{if(!n.id||!n.id.copy)throw new TypeError("object ["+JSON.stringify(n)+"] is not a valid ObjectId");n.id.copy(e,r,0,12)}return r+12}function serializeBuffer(e,t,n,r,o){e[r++]=constants.BSON_DATA_BINARY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.length;return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=constants.BSON_BINARY_SUBTYPE_DEFAULT,n.copy(e,r,0,i),r+=i}function serializeObject(e,t,n,r,o,i,a,s,c,u){for(var l=0;l<u.length;l++)if(u[l]===n)throw new Error("cyclic dependency detected");u.push(n),e[r++]=Array.isArray(n)?constants.BSON_DATA_ARRAY:constants.BSON_DATA_OBJECT,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var d=serializeInto(e,n,o,r,i+1,a,s,u);return u.pop(),d}function serializeDecimal128(e,t,n,r,o){return e[r++]=constants.BSON_DATA_DECIMAL128,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,n.bytes.copy(e,r,0,16),r+16}function serializeLong(e,t,n,r,o){e[r++]="Long"===n._bsontype?constants.BSON_DATA_LONG:constants.BSON_DATA_TIMESTAMP,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.getLowBits(),a=n.getHighBits();return e[r++]=255&i,e[r++]=i>>8&255,e[r++]=i>>16&255,e[r++]=i>>24&255,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,r}function serializeInt32(e,t,n,r,o){return e[r++]=constants.BSON_DATA_INT,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,e[r++]=255&n,e[r++]=n>>8&255,e[r++]=n>>16&255,e[r++]=n>>24&255,r}function serializeDouble(e,t,n,r,o){return e[r++]=constants.BSON_DATA_NUMBER,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0,writeIEEE754$1(e,n.value,r,"little",52,8),r+=8}function serializeFunction(e,t,n,r,o,i,a){e[r++]=constants.BSON_DATA_CODE,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s=normalizedFunctionString$1(n),c=e.write(s,r+4,"utf8")+1;return e[r]=255&c,e[r+1]=c>>8&255,e[r+2]=c>>16&255,e[r+3]=c>>24&255,r=r+4+c-1,e[r++]=0,r}function serializeCode(e,t,n,r,o,i,a,s,c){if(n.scope&&"object"===_typeof$3(n.scope)){e[r++]=constants.BSON_DATA_CODE_W_SCOPE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var u=r,l="string"==typeof n.code?n.code:n.code.toString();r+=4;var d=e.write(l,r+4,"utf8")+1;e[r]=255&d,e[r+1]=d>>8&255,e[r+2]=d>>16&255,e[r+3]=d>>24&255,e[r+4+d-1]=0,r=r+d+4;var f=serializeInto(e,n.scope,o,r,i+1,a,s);r=f-1;var p=f-u;e[u++]=255&p,e[u++]=p>>8&255,e[u++]=p>>16&255,e[u++]=p>>24&255,e[r++]=0}else{e[r++]=constants.BSON_DATA_CODE,r+=c?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var h=n.code.toString(),v=e.write(h,r+4,"utf8")+1;e[r]=255&v,e[r+1]=v>>8&255,e[r+2]=v>>16&255,e[r+3]=v>>24&255,r=r+4+v-1,e[r++]=0}return r}function serializeBinary(e,t,n,r,o){e[r++]=constants.BSON_DATA_BINARY,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=n.value(!0),a=n.position;return n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a+=4),e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255,e[r++]=n.sub_type,n.sub_type===binary.SUBTYPE_BYTE_ARRAY&&(a-=4,e[r++]=255&a,e[r++]=a>>8&255,e[r++]=a>>16&255,e[r++]=a>>24&255),i.copy(e,r,0,n.position),r+=n.position}function serializeSymbol(e,t,n,r,o){e[r++]=constants.BSON_DATA_SYMBOL,r+=o?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var i=e.write(n.value,r+4,"utf8")+1;return e[r]=255&i,e[r+1]=i>>8&255,e[r+2]=i>>16&255,e[r+3]=i>>24&255,r=r+4+i-1,e[r++]=0,r}function serializeDBRef(e,t,n,r,o,i,a){e[r++]=constants.BSON_DATA_OBJECT,r+=a?e.write(t,r,"ascii"):e.write(t,r,"utf8"),e[r++]=0;var s,c=r,u={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(u.$db=n.db);var l=(s=serializeInto(e,u=Object.assign(u,n.fields),!1,r,o+1,i))-c;return e[c++]=255&l,e[c++]=l>>8&255,e[c++]=l>>16&255,e[c++]=l>>24&255,s}function serializeInto(e,t,n,r,o,i,a,s){r=r||0,(s=s||[]).push(t);var c=r+4;if(Array.isArray(t))for(var u=0;u<t.length;u++){var l=""+u,d=t[u];if(d&&d.toBSON){if("function"!=typeof d.toBSON)throw new TypeError("toBSON is not a function");d=d.toBSON()}var f=_typeof$3(d);if("string"===f)c=serializeString(e,l,d,c,!0);else if("number"===f)c=serializeNumber(e,l,d,c,!0);else if("boolean"===f)c=serializeBoolean(e,l,d,c,!0);else if(d instanceof Date||isDate$1(d))c=serializeDate(e,l,d,c,!0);else if(void 0===d)c=serializeNull(e,l,d,c,!0);else if(null===d)c=serializeNull(e,l,d,c,!0);else if("ObjectId"===d._bsontype||"ObjectID"===d._bsontype)c=serializeObjectId(e,l,d,c,!0);else if(Buffer$6.isBuffer(d))c=serializeBuffer(e,l,d,c,!0);else if(d instanceof RegExp||isRegExp$1(d))c=serializeRegExp(e,l,d,c,!0);else if("object"===f&&null==d._bsontype)c=serializeObject(e,l,d,c,n,o,i,a,!0,s);else if("object"===f&&"Decimal128"===d._bsontype)c=serializeDecimal128(e,l,d,c,!0);else if("Long"===d._bsontype||"Timestamp"===d._bsontype)c=serializeLong(e,l,d,c,!0);else if("Double"===d._bsontype)c=serializeDouble(e,l,d,c,!0);else if("function"==typeof d&&i)c=serializeFunction(e,l,d,c,n,o,i,!0);else if("Code"===d._bsontype)c=serializeCode(e,l,d,c,n,o,i,a,!0);else if("Binary"===d._bsontype)c=serializeBinary(e,l,d,c,!0);else if("Symbol"===d._bsontype)c=serializeSymbol(e,l,d,c,!0);else if("DBRef"===d._bsontype)c=serializeDBRef(e,l,d,c,o,i,!0);else if("BSONRegExp"===d._bsontype)c=serializeBSONRegExp(e,l,d,c,!0);else if("Int32"===d._bsontype)c=serializeInt32(e,l,d,c,!0);else if("MinKey"===d._bsontype||"MaxKey"===d._bsontype)c=serializeMinMax(e,l,d,c,!0);else if(void 0!==d._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+d._bsontype)}else if(t instanceof map)for(var p=t.entries(),h=!1;!h;){var v=p.next();if(!(h=v.done)){var g=v.value[0],_=v.value[1],b=_typeof$3(_);if("string"==typeof g&&!ignoreKeys.has(g)){if(null!=g.match(regexp$1))throw Error("key "+g+" must not contain null bytes");if(n){if("$"===g[0])throw Error("key "+g+" must not start with '$'");if(~g.indexOf("."))throw Error("key "+g+" must not contain '.'")}}if("string"===b)c=serializeString(e,g,_,c);else if("number"===b)c=serializeNumber(e,g,_,c);else if("boolean"===b)c=serializeBoolean(e,g,_,c);else if(_ instanceof Date||isDate$1(_))c=serializeDate(e,g,_,c);else if(null===_||void 0===_&&!1===a)c=serializeNull(e,g,_,c);else if("ObjectId"===_._bsontype||"ObjectID"===_._bsontype)c=serializeObjectId(e,g,_,c);else if(Buffer$6.isBuffer(_))c=serializeBuffer(e,g,_,c);else if(_ instanceof RegExp||isRegExp$1(_))c=serializeRegExp(e,g,_,c);else if("object"===b&&null==_._bsontype)c=serializeObject(e,g,_,c,n,o,i,a,!1,s);else if("object"===b&&"Decimal128"===_._bsontype)c=serializeDecimal128(e,g,_,c);else if("Long"===_._bsontype||"Timestamp"===_._bsontype)c=serializeLong(e,g,_,c);else if("Double"===_._bsontype)c=serializeDouble(e,g,_,c);else if("Code"===_._bsontype)c=serializeCode(e,g,_,c,n,o,i,a);else if("function"==typeof _&&i)c=serializeFunction(e,g,_,c,n,o,i);else if("Binary"===_._bsontype)c=serializeBinary(e,g,_,c);else if("Symbol"===_._bsontype)c=serializeSymbol(e,g,_,c);else if("DBRef"===_._bsontype)c=serializeDBRef(e,g,_,c,o,i);else if("BSONRegExp"===_._bsontype)c=serializeBSONRegExp(e,g,_,c);else if("Int32"===_._bsontype)c=serializeInt32(e,g,_,c);else if("MinKey"===_._bsontype||"MaxKey"===_._bsontype)c=serializeMinMax(e,g,_,c);else if(void 0!==_._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+_._bsontype)}}else{if(t.toBSON){if("function"!=typeof t.toBSON)throw new TypeError("toBSON is not a function");if(null!=(t=t.toBSON())&&"object"!==_typeof$3(t))throw new TypeError("toBSON function did not return an object")}for(var y in t){var m=t[y];if(m&&m.toBSON){if("function"!=typeof m.toBSON)throw new TypeError("toBSON is not a function");m=m.toBSON()}var w=_typeof$3(m);if("string"==typeof y&&!ignoreKeys.has(y)){if(null!=y.match(regexp$1))throw Error("key "+y+" must not contain null bytes");if(n){if("$"===y[0])throw Error("key "+y+" must not start with '$'");if(~y.indexOf("."))throw Error("key "+y+" must not contain '.'")}}if("string"===w)c=serializeString(e,y,m,c);else if("number"===w)c=serializeNumber(e,y,m,c);else if("boolean"===w)c=serializeBoolean(e,y,m,c);else if(m instanceof Date||isDate$1(m))c=serializeDate(e,y,m,c);else if(void 0===m)!1===a&&(c=serializeNull(e,y,m,c));else if(null===m)c=serializeNull(e,y,m,c);else if("ObjectId"===m._bsontype||"ObjectID"===m._bsontype)c=serializeObjectId(e,y,m,c);else if(Buffer$6.isBuffer(m))c=serializeBuffer(e,y,m,c);else if(m instanceof RegExp||isRegExp$1(m))c=serializeRegExp(e,y,m,c);else if("object"===w&&null==m._bsontype)c=serializeObject(e,y,m,c,n,o,i,a,!1,s);else if("object"===w&&"Decimal128"===m._bsontype)c=serializeDecimal128(e,y,m,c);else if("Long"===m._bsontype||"Timestamp"===m._bsontype)c=serializeLong(e,y,m,c);else if("Double"===m._bsontype)c=serializeDouble(e,y,m,c);else if("Code"===m._bsontype)c=serializeCode(e,y,m,c,n,o,i,a);else if("function"==typeof m&&i)c=serializeFunction(e,y,m,c,n,o,i);else if("Binary"===m._bsontype)c=serializeBinary(e,y,m,c);else if("Symbol"===m._bsontype)c=serializeSymbol(e,y,m,c);else if("DBRef"===m._bsontype)c=serializeDBRef(e,y,m,c,o,i);else if("BSONRegExp"===m._bsontype)c=serializeBSONRegExp(e,y,m,c);else if("Int32"===m._bsontype)c=serializeInt32(e,y,m,c);else if("MinKey"===m._bsontype||"MaxKey"===m._bsontype)c=serializeMinMax(e,y,m,c);else if(void 0!==m._bsontype)throw new TypeError("Unrecognized or invalid _bsontype: "+m._bsontype)}}s.pop(),e[c++]=0;var O=c-r;return e[r++]=255&O,e[r++]=O>>8&255,e[r++]=O>>16&255,e[r++]=O>>24&255,c}var serializer=serializeInto;function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Buffer$7=bufferEs6.Buffer,normalizedFunctionString$2=utils.normalizedFunctionString;function isDate$2(e){return"object"===_typeof$4(e)&&"[object Date]"===Object.prototype.toString.call(e)}function calculateObjectSize(e,t,n){var r=5;if(Array.isArray(e))for(var o=0;o<e.length;o++)r+=calculateElement(o.toString(),e[o],t,!0,n);else for(var i in e.toBSON&&(e=e.toBSON()),e)r+=calculateElement(i,e[i],t,!1,n);return r}function calculateElement(e,t,n,r,o){switch(t&&t.toBSON&&(t=t.toBSON()),_typeof$4(t)){case"string":return 1+Buffer$7.byteLength(e,"utf8")+1+4+Buffer$7.byteLength(t,"utf8")+1;case"number":return Math.floor(t)===t&&t>=constants.JS_INT_MIN&&t<=constants.JS_INT_MAX&&t>=constants.BSON_INT32_MIN&&t<=constants.BSON_INT32_MAX?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+5:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;case"undefined":return r||!o?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1:0;case"boolean":return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+2;case"object":if(null==t||"MinKey"===t._bsontype||"MaxKey"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1;if("ObjectId"===t._bsontype||"ObjectID"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+13;if(t instanceof Date||isDate$2(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if(void 0!==Buffer$7&&Buffer$7.isBuffer(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+6+t.length;if("Long"===t._bsontype||"Double"===t._bsontype||"Timestamp"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+9;if("Decimal128"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+17;if("Code"===t._bsontype)return null!=t.scope&&Object.keys(t.scope).length>0?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1+calculateObjectSize(t.scope,n,o):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(t.code.toString(),"utf8")+1;if("Binary"===t._bsontype)return t.sub_type===binary.SUBTYPE_BYTE_ARRAY?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1+4):(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+(t.position+1+4+1);if("Symbol"===t._bsontype)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+Buffer$7.byteLength(t.value,"utf8")+4+1+1;if("DBRef"===t._bsontype){var i=Object.assign({$ref:t.collection,$id:t.oid},t.fields);return null!=t.db&&(i.$db=t.db),(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+calculateObjectSize(i,n,o)}return t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1:"BSONRegExp"===t._bsontype?(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.pattern,"utf8")+1+Buffer$7.byteLength(t.options,"utf8")+1:(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+calculateObjectSize(t,n,o)+1;case"function":if(t instanceof RegExp||"[object RegExp]"===Object.prototype.toString.call(t)||"[object RegExp]"===String.call(t))return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+Buffer$7.byteLength(t.source,"utf8")+1+(t.global?1:0)+(t.ignoreCase?1:0)+(t.multiline?1:0)+1;if(n&&null!=t.scope&&Object.keys(t.scope).length>0)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1+calculateObjectSize(t.scope,n,o);if(n)return(null!=e?Buffer$7.byteLength(e,"utf8")+1:0)+1+4+Buffer$7.byteLength(normalizedFunctionString$2(t),"utf8")+1}return 0}var calculate_size=calculateObjectSize,Buffer$8=bufferEs6.Buffer,ensure_buffer=function(e){if(e instanceof Buffer$8)return e;if(e instanceof Uint8Array)return Buffer$8.from(e.buffer);throw new TypeError("Must use either Buffer or Uint8Array")},Buffer$9=bufferEs6.Buffer,MAXSIZE=17825792,buffer=Buffer$9.alloc(MAXSIZE);function setInternalBufferSize(e){buffer.length<e&&(buffer=Buffer$9.alloc(e))}function serialize$1(e,t){var n="boolean"==typeof(t=t||{}).checkKeys&&t.checkKeys,r="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,o="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,i="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:MAXSIZE;buffer.length<i&&(buffer=Buffer$9.alloc(i));var a=serializer(buffer,e,n,0,0,r,o,[]),s=Buffer$9.alloc(a);return buffer.copy(s,0,0,s.length),s}function serializeWithBufferAndIndex(e,t,n){var r="boolean"==typeof(n=n||{}).checkKeys&&n.checkKeys,o="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,i="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,a="number"==typeof n.index?n.index:0,s=serializer(buffer,e,r,0,0,o,i);return buffer.copy(t,a,0,s),a+s-1}function deserialize$2(e,t){return e=ensure_buffer(e),deserializer(e,t)}function calculateObjectSize$1(e,t){var n="boolean"==typeof(t=t||{}).serializeFunctions&&t.serializeFunctions,r="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined;return calculate_size(e,n,r)}function deserializeStream(e,t,n,r,o,i){i=Object.assign({allowObjectSmallerThanBufferSize:!0},i),e=ensure_buffer(e);for(var a=t,s=0;s<n;s++){var c=e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]<<24;i.index=a,r[o+s]=deserializer(e,i),a+=c}return a}var bson={BSON_INT32_MAX:constants.BSON_INT32_MAX,BSON_INT32_MIN:constants.BSON_INT32_MIN,BSON_INT64_MAX:constants.BSON_INT64_MAX,BSON_INT64_MIN:constants.BSON_INT64_MIN,JS_INT_MAX:constants.JS_INT_MAX,JS_INT_MIN:constants.JS_INT_MIN,BSON_DATA_NUMBER:constants.BSON_DATA_NUMBER,BSON_DATA_STRING:constants.BSON_DATA_STRING,BSON_DATA_OBJECT:constants.BSON_DATA_OBJECT,BSON_DATA_ARRAY:constants.BSON_DATA_ARRAY,BSON_DATA_BINARY:constants.BSON_DATA_BINARY,BSON_DATA_UNDEFINED:constants.BSON_DATA_UNDEFINED,BSON_DATA_OID:constants.BSON_DATA_OID,BSON_DATA_BOOLEAN:constants.BSON_DATA_BOOLEAN,BSON_DATA_DATE:constants.BSON_DATA_DATE,BSON_DATA_NULL:constants.BSON_DATA_NULL,BSON_DATA_REGEXP:constants.BSON_DATA_REGEXP,BSON_DATA_DBPOINTER:constants.BSON_DATA_DBPOINTER,BSON_DATA_CODE:constants.BSON_DATA_CODE,BSON_DATA_SYMBOL:constants.BSON_DATA_SYMBOL,BSON_DATA_CODE_W_SCOPE:constants.BSON_DATA_CODE_W_SCOPE,BSON_DATA_INT:constants.BSON_DATA_INT,BSON_DATA_TIMESTAMP:constants.BSON_DATA_TIMESTAMP,BSON_DATA_LONG:constants.BSON_DATA_LONG,BSON_DATA_DECIMAL128:constants.BSON_DATA_DECIMAL128,BSON_DATA_MIN_KEY:constants.BSON_DATA_MIN_KEY,BSON_DATA_MAX_KEY:constants.BSON_DATA_MAX_KEY,BSON_BINARY_SUBTYPE_DEFAULT:constants.BSON_BINARY_SUBTYPE_DEFAULT,BSON_BINARY_SUBTYPE_FUNCTION:constants.BSON_BINARY_SUBTYPE_FUNCTION,BSON_BINARY_SUBTYPE_BYTE_ARRAY:constants.BSON_BINARY_SUBTYPE_BYTE_ARRAY,BSON_BINARY_SUBTYPE_UUID:constants.BSON_BINARY_SUBTYPE_UUID,BSON_BINARY_SUBTYPE_MD5:constants.BSON_BINARY_SUBTYPE_MD5,BSON_BINARY_SUBTYPE_USER_DEFINED:constants.BSON_BINARY_SUBTYPE_USER_DEFINED,Code:code,Map:map,BSONSymbol:symbol,DBRef:db_ref,Binary:binary,ObjectId:objectid,Long:long_1$1,Timestamp:timestamp,Double:double_1,Int32:int_32,MinKey:min_key,MaxKey:max_key,BSONRegExp:regexp,Decimal128:decimal128,serialize:serialize$1,serializeWithBufferAndIndex:serializeWithBufferAndIndex,deserialize:deserialize$2,calculateObjectSize:calculateObjectSize$1,deserializeStream:deserializeStream,setInternalBufferSize:setInternalBufferSize,ObjectID:objectid,EJSON:extended_json},bson_1=bson.BSON_INT32_MAX,bson_2=bson.BSON_INT32_MIN,bson_3=bson.BSON_INT64_MAX,bson_4=bson.BSON_INT64_MIN,bson_5=bson.JS_INT_MAX,bson_6=bson.JS_INT_MIN,bson_7=bson.BSON_DATA_NUMBER,bson_8=bson.BSON_DATA_STRING,bson_9=bson.BSON_DATA_OBJECT,bson_10=bson.BSON_DATA_ARRAY,bson_11=bson.BSON_DATA_BINARY,bson_12=bson.BSON_DATA_UNDEFINED,bson_13=bson.BSON_DATA_OID,bson_14=bson.BSON_DATA_BOOLEAN,bson_15=bson.BSON_DATA_DATE,bson_16=bson.BSON_DATA_NULL,bson_17=bson.BSON_DATA_REGEXP,bson_18=bson.BSON_DATA_DBPOINTER,bson_19=bson.BSON_DATA_CODE,bson_20=bson.BSON_DATA_SYMBOL,bson_21=bson.BSON_DATA_CODE_W_SCOPE,bson_22=bson.BSON_DATA_INT,bson_23=bson.BSON_DATA_TIMESTAMP,bson_24=bson.BSON_DATA_LONG,bson_25=bson.BSON_DATA_DECIMAL128,bson_26=bson.BSON_DATA_MIN_KEY,bson_27=bson.BSON_DATA_MAX_KEY,bson_28=bson.BSON_BINARY_SUBTYPE_DEFAULT,bson_29=bson.BSON_BINARY_SUBTYPE_FUNCTION,bson_30=bson.BSON_BINARY_SUBTYPE_BYTE_ARRAY,bson_31=bson.BSON_BINARY_SUBTYPE_UUID,bson_32=bson.BSON_BINARY_SUBTYPE_MD5,bson_33=bson.BSON_BINARY_SUBTYPE_USER_DEFINED,bson_34=bson.Code,bson_35=bson.BSONSymbol,bson_36=bson.DBRef,bson_37=bson.Binary,bson_38=bson.ObjectId,bson_39=bson.Long,bson_40=bson.Timestamp,bson_41=bson.Double,bson_42=bson.Int32,bson_43=bson.MinKey,bson_44=bson.MaxKey,bson_45=bson.BSONRegExp,bson_46=bson.Decimal128,bson_47=bson.serialize,bson_48=bson.serializeWithBufferAndIndex,bson_49=bson.deserialize,bson_50=bson.calculateObjectSize,bson_51=bson.deserializeStream,bson_52=bson.setInternalBufferSize,bson_53=bson.ObjectID,bson_54=bson.EJSON;return exports.default=bson,exports.BSON_INT32_MAX=bson_1,exports.BSON_INT32_MIN=bson_2,exports.BSON_INT64_MAX=bson_3,exports.BSON_INT64_MIN=bson_4,exports.JS_INT_MAX=bson_5,exports.JS_INT_MIN=bson_6,exports.BSON_DATA_NUMBER=bson_7,exports.BSON_DATA_STRING=bson_8,exports.BSON_DATA_OBJECT=bson_9,exports.BSON_DATA_ARRAY=bson_10,exports.BSON_DATA_BINARY=bson_11,exports.BSON_DATA_UNDEFINED=bson_12,exports.BSON_DATA_OID=bson_13,exports.BSON_DATA_BOOLEAN=bson_14,exports.BSON_DATA_DATE=bson_15,exports.BSON_DATA_NULL=bson_16,exports.BSON_DATA_REGEXP=bson_17,exports.BSON_DATA_DBPOINTER=bson_18,exports.BSON_DATA_CODE=bson_19,exports.BSON_DATA_SYMBOL=bson_20,exports.BSON_DATA_CODE_W_SCOPE=bson_21,exports.BSON_DATA_INT=bson_22,exports.BSON_DATA_TIMESTAMP=bson_23,exports.BSON_DATA_LONG=bson_24,exports.BSON_DATA_DECIMAL128=bson_25,exports.BSON_DATA_MIN_KEY=bson_26,exports.BSON_DATA_MAX_KEY=bson_27,exports.BSON_BINARY_SUBTYPE_DEFAULT=bson_28,exports.BSON_BINARY_SUBTYPE_FUNCTION=bson_29,exports.BSON_BINARY_SUBTYPE_BYTE_ARRAY=bson_30,exports.BSON_BINARY_SUBTYPE_UUID=bson_31,exports.BSON_BINARY_SUBTYPE_MD5=bson_32,exports.BSON_BINARY_SUBTYPE_USER_DEFINED=bson_33,exports.Code=bson_34,exports.BSONSymbol=bson_35,exports.DBRef=bson_36,exports.Binary=bson_37,exports.ObjectId=bson_38,exports.Long=bson_39,exports.Timestamp=bson_40,exports.Double=bson_41,exports.Int32=bson_42,exports.MinKey=bson_43,exports.MaxKey=bson_44,exports.BSONRegExp=bson_45,exports.Decimal128=bson_46,exports.serialize=bson_47,exports.serializeWithBufferAndIndex=bson_48,exports.deserialize=bson_49,exports.calculateObjectSize=bson_50,exports.deserializeStream=bson_51,exports.setInternalBufferSize=bson_52,exports.ObjectID=bson_53,exports.EJSON=bson_54,exports}({})}).call(this,__webpack_require__(27),__webpack_require__(63).Buffer)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t);var r=n(15),o=n(10);t.default=function(e){if(!Object(o.default)(e))return!1;var t=Object(r.default)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},function(e,t,n){n.r(t);var r=n(37);t.default=function(e,t,n){"__proto__"==t&&r.default?Object(r.default)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){n.r(t);var r=n(48),o=Object(r.default)(Object.getPrototypeOf,Object);t.default=o},function(e,t,n){n.r(t);var r=Object.prototype;t.default=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){n.r(t),function(e){var r=n(9),o=n(58),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=i&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===i?r.default.Buffer:void 0,c=(s?s.isBuffer:void 0)||o.default;t.default=c}.call(this,n(55)(e))},function(e,t,n){n.r(t),t.default=function(e){return function(t){return e(t)}}},function(e,t,n){n.r(t);var r=n(29),o=n(22),i=Object.prototype.hasOwnProperty;t.default=function(e,t,n){var a=e[t];i.call(e,t)&&Object(o.default)(a,n)&&(void 0!==n||t in e)||Object(r.default)(e,t,n)}},function(e,t,n){n.r(t);var r=/^(?:0|[1-9]\d*)$/;t.default=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(9).default.Uint8Array;t.default=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t,n){n.r(t);var r=n(13),o=function(){try{var e=Object(r.default)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.default=o},function(e,t,n){n.r(t),n.d(t,"tunnel",(function(){return s})),n.d(t,"constructTunnelReq",(function(){return c})),n.d(t,"getBoundTunnelRequest",(function(){return u}));var r=n(0),o=n(1),i=n(8),a=new(function(){function e(){this._running=0,this._onIdleCallbacks=[]}return Object.defineProperty(e.prototype,"running",{get:function(){return this._running},enumerable:!1,configurable:!0}),e.prototype.incrementRunning=function(e){void 0===e&&(e=1),this._running+=e,this._idleTriggerTimer&&clearTimeout(this._idleTriggerTimer)},e.prototype.decrementRunning=function(e){var t=this;void 0===e&&(e=1),this._running-=e,this._running<0&&(this._running=0),this._running<=0&&this._onIdleCallbacks.length&&(this._idleTriggerTimer=setTimeout((function(){if(t._idleTriggerTimer=null,t._onIdleCallbacks.length){var e=t._onIdleCallbacks.shift();e&&e()}}),50))},e.prototype.onceIdle=function(e){this._running>0?this._onIdleCallbacks.push(e):e()},e}());function s(e,t){var n=this;if(void 0===t&&(t={}),t.fireOnIdle&&a.running>0)return new Promise((function(o,i){a.onceIdle((function(){return Object(r.__awaiter)(n,void 0,void 0,(function(){var n,a;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s(e,t)];case 1:return n=r.sent(),o(n),[3,3];case 2:return a=r.sent(),i(a),[3,3];case 3:return[2]}}))}))}))}));if(t.onFire)try{t.onFire()}catch(e){}return new Promise((function(n,s){var c,u,l,d,f;a.incrementRunning(),Object(i.getSDK)((e.cloud||t.cloud||{}).identifiers)._operateWXData({appid:null===(u=null===(c=e.cloud)||void 0===c?void 0:c.instanceOptions)||void 0===u?void 0:u.resourceAppid,accessToken:null===(d=null===(l=e.cloud)||void 0===l?void 0:l.authStorage)||void 0===d?void 0:d.getItem("access_token"),webRequest:null===(f=e.cloud)||void 0===f?void 0:f.webRequest,apiName:e.apiName||"qbase_commapi",reqData:e.data,requestInQueue:!1,success:function(e){var i=Object(r.__assign)(Object(r.__assign)({},e),{data:e.rawData});if(e.rawData)try{var a=JSON.parse(e.rawData);if(a.baseresponse&&0!==a.baseresponse.errcode){var c=new o.CloudSDKError({errCode:a.baseresponse.errcode,errMsg:a.baseresponse.errmsg});return void s(c)}i=Object(r.__assign)(Object(r.__assign)({},e),{data:a})}catch(e){c=new o.CloudSDKError({errMsg:e&&e.toString()});return void s(c)}else if(t&&t.requireDataNotEmpty){c=new o.CloudSDKError({errCode:e.errCode,errMsg:"error empty internal server response, "+e.errMsg});return void s(c)}n(i)},fail:function(e){if(e&&e.errMsg)if(e.errMsg.includes("invalid scope")){var t="invalid scope 没有权限，请先开通云服务";(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}else{t=e.errMsg.replace(/^operateWXData:fail /,"");(e=new Error(t)).errMsg=t,e.operateWXDataFail=!0}s(e)},complete:function(){e.complete&&e.complete.apply(null,arguments),a.decrementRunning()}})}))}function c(e){var t=e.cloud;return{apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:{env:e.env},qbase_meta:t.getMetaData(),cli_req_id:+new Date+"_"+Math.random()},cloud:t}}function u(e){var t=e.cloud;return function(e){var n=t.isInstance?{appid:t.instanceOptions.resourceAppid,env:t.instanceOptions.resourceEnv}:{env:e.env};return s({apiName:"qbase_commapi",data:{qbase_api_name:e.apiName,qbase_req:e.serializedReqData,qbase_options:n,qbase_meta:t.getMetaData(),cli_req_id:+new Date+"_"+Math.random()},cloud:t})}}t.default=s},function(e,t){e.exports={}},function(e,t,n){n.r(t),n.d(t,"getRuntimeInfo",(function(){return o}));n(39);var r={env:"",platform:""},o=function(){return r};if(void 0!==__wxConfig)r.env="miniprogram",r.platform=__wxConfig.platform;else if(r.env="web",window.__wxjs_environment&&"miniprogram"===window.__wxjs_environment)r.platform="miniprogram";else{var i=window.navigator.userAgent.toLowerCase();/MicroMessenger/i.test(i)&&(r.platform="wxweb")}},function(e,t,n){var r=n(13),o=Object(r.default)(Object,"create");var i=function(){this.__data__=o?o(null):{},this.size=0};var a=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},s=Object.prototype.hasOwnProperty;var c=function(e){var t=this.__data__;if(o){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(t,e)?t[e]:void 0},u=Object.prototype.hasOwnProperty;var l=function(e){var t=this.__data__;return o?void 0!==t[e]:u.call(t,e)};var d=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=o&&void 0===t?"__lodash_hash_undefined__":t,this};function f(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}f.prototype.clear=i,f.prototype.delete=a,f.prototype.get=c,f.prototype.has=l,f.prototype.set=d;var p=f,h=n(24),v=n(25);var g=function(){this.size=0,this.__data__={hash:new p,map:new(v.default||h.default),string:new p}};var _=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var b=function(e,t){var n=e.__data__;return _(t)?n["string"==typeof t?"string":"hash"]:n.map};var y=function(e){var t=b(this,e).delete(e);return this.size-=t?1:0,t};var m=function(e){return b(this,e).get(e)};var w=function(e){return b(this,e).has(e)};var O=function(e,t){var n=b(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function S(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}S.prototype.clear=g,S.prototype.delete=y,S.prototype.get=m,S.prototype.has=w,S.prototype.set=O;t.default=S},function(e,t,n){var r=n(15),o=n(11);var i=function(e){return Object(o.default)(e)&&"[object Arguments]"==Object(r.default)(e)},a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable,u=i(function(){return arguments}())?i:function(e){return Object(o.default)(e)&&s.call(e,"callee")&&!c.call(e,"callee")};t.default=u},function(e,t,n){n.r(t),n.d(t,"serverConfigurable",(function(){return r})),n.d(t,"clientConfigDefaults",(function(){return o}));var r={db_doc_size_limit:524288,db_realtime_ping_interval:15e3,db_realtime_pong_wait_timeout:15e3,db_realtime_query_event_cache_timeout:18e4,upload_max_file_size:20971520,get_temp_file_url_max_requests:50,call_function_poll_max_retry:10,call_function_max_req_data_size:5242880,call_function_client_poll_timeout:15e3,call_function_valid_start_retry_gap:6e4,call_container_poll_max_retry:10,call_container_client_poll_timeout:15e3,call_container_valid_start_retry_gap:6e4},o={REALTIME_DB_MAX_RECONNECT:5,REALTIME_DB_WS_RECONNECT_INTERVAL:5e3,REALTIME_DB_TOTAL_CONNECTION_TIMEOUT:1/0};t.default=r},function(e,t,n){n.r(t),function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.default=n}.call(this,n(27))},function(e,t,n){n.r(t),function(e){var r=n(9),o="object"==typeof exports&&exports&&!exports.nodeType&&exports,i=o&&"object"==typeof e&&e&&!e.nodeType&&e,a=i&&i.exports===o?r.default.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.default=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}.call(this,n(55)(e))},function(e,t,n){n.r(t);var r=n(36);t.default=function(e,t){var n=t?Object(r.default)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){n.r(t),t.default=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){n.r(t),t.default=function(e,t){return function(n){return e(t(n))}}},function(e,t,n){n.r(t);t.default=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},function(e,t,n){var r=n(24);var o=function(){this.__data__=new r.default,this.size=0};var i=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},c=n(25),u=n(41);var l=function(e,t){var n=this.__data__;if(n instanceof r.default){var o=n.__data__;if(!c.default||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new u.default(o)}return n.set(e,t),this.size=n.size,this};function d(e){var t=this.__data__=new r.default(e);this.size=t.size}d.prototype.clear=o,d.prototype.delete=i,d.prototype.get=a,d.prototype.has=s,d.prototype.set=l;t.default=d},function(e,t,n){var r=n(10),o=Object.create,i=function(){function e(){}return function(t){if(!Object(r.default)(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),a=n(30),s=n(31);t.default=function(e){return"function"!=typeof e.constructor||Object(s.default)(e)?{}:i(Object(a.default)(e))}},function(e,t,n){var r=n(15),o=n(49),i=n(11),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return Object(i.default)(e)&&Object(o.default)(e.length)&&!!a[Object(r.default)(e)]},c=n(33),u=n(20),l=u.default&&u.default.isTypedArray,d=l?Object(c.default)(l):s;t.default=d},function(e,t,n){var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},o=n(42),i=n(12),a=n(32),s=n(35),c=n(52),u=Object.prototype.hasOwnProperty;t.default=function(e,t){var n=Object(i.default)(e),l=!n&&Object(o.default)(e),d=!n&&!l&&Object(a.default)(e),f=!n&&!l&&!d&&Object(c.default)(e),p=n||l||d||f,h=p?r(e.length,String):[],v=h.length;for(var g in e)!t&&!u.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||Object(s.default)(g,v))||h.push(g);return h}},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){var r=n(50),o=n(29),i=n(22);var a=function(e,t,n){(void 0!==n&&!Object(i.default)(e[t],n)||void 0===n&&!(t in e))&&Object(o.default)(e,t,n)};var s=function(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(!1===n(i[c],c,i))break}return t}}(),c=n(45),u=n(46),l=n(47),d=n(51),f=n(42),p=n(12),h=n(23),v=n(11);var g=function(e){return Object(v.default)(e)&&Object(h.default)(e)},_=n(32),b=n(28),y=n(10),m=n(15),w=n(30),O=Function.prototype,S=Object.prototype,I=O.toString,E=S.hasOwnProperty,C=I.call(Object);var T=function(e){if(!Object(v.default)(e)||"[object Object]"!=Object(m.default)(e))return!1;var t=Object(w.default)(e);if(null===t)return!0;var n=E.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&I.call(n)==C},k=n(52);var A=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},P=n(17),D=n(18);var j=function(e){return Object(P.default)(e,Object(D.default)(e))};var x=function(e,t,n,r,o,i,s){var h=A(e,n),v=A(t,n),m=s.get(v);if(m)a(e,n,m);else{var w=i?i(h,v,n+"",e,t,s):void 0,O=void 0===w;if(O){var S=Object(p.default)(v),I=!S&&Object(_.default)(v),E=!S&&!I&&Object(k.default)(v);w=v,S||I||E?Object(p.default)(h)?w=h:g(h)?w=Object(l.default)(h):I?(O=!1,w=Object(c.default)(v,!0)):E?(O=!1,w=Object(u.default)(v,!0)):w=[]:T(v)||Object(f.default)(v)?(w=h,Object(f.default)(h)?w=j(h):Object(y.default)(h)&&!Object(b.default)(h)||(w=Object(d.default)(v))):O=!1}O&&(s.set(v,w),o(w,v,r,i,s),s.delete(v)),a(e,n,w)}};var R=function e(t,n,o,i,c){t!==n&&s(n,(function(s,u){if(c||(c=new r.default),Object(y.default)(s))x(t,n,u,o,e,i,c);else{var l=i?i(A(t,u),s,u+"",t,n,c):void 0;void 0===l&&(l=s),a(t,u,l)}}),D.default)};var M=function(e){return e};var N=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},L=Math.max;var B=function(e,t,n){return t=L(void 0===t?e.length-1:t,0),function(){for(var r=arguments,o=-1,i=L(r.length-t,0),a=Array(i);++o<i;)a[o]=r[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=r[o];return s[t]=n(a),N(e,this,s)}};var F=function(e){return function(){return e}},W=n(37),U=W.default?function(e,t){return Object(W.default)(e,"toString",{configurable:!0,enumerable:!1,value:F(t),writable:!0})}:M,V=Date.now;var G=function(e){var t=0,n=0;return function(){var r=V(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(U);var H=function(e,t){return G(B(e,t,M),e+"")},z=n(35);var q=function(e,t,n){if(!Object(y.default)(n))return!1;var r=typeof t;return!!("number"==r?Object(h.default)(n)&&Object(z.default)(t,n.length):"string"==r&&t in n)&&Object(i.default)(n[t],e)};var Y=function(e){return H((function(t,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&q(n[0],n[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++r<o;){var s=n[r];s&&e(t,s,r,i)}return t}))}((function(e,t,n){R(e,t,n)}));t.default=Y},function(e,t,n){n.r(t),function(e){n.d(t,"getCloudInstance",(function(){return _})),n.d(t,"getCloudAPI",(function(){return b})),n.d(t,"DefaultCloud",(function(){return y})),n.d(t,"InstanceCloud",(function(){return m}));var r=n(0),o=n(56),i=n(60),a=n(39),s=n(1),c=n(2),u=n(38),l=n(3),d=n(8),f=n(6),p=n(4),h=n(43),v=n(40),g=n(59),_=function(e){void 0===e&&(e={});var t=e.sdk,n=e.identifiers||{};return t&&Object(d.setSDK)(n,t),new y(n,!1)},b=function(e){return void 0===e&&(e={}),_(e).exportAPI},y=function(){function t(t,n){var o=this;this.inited=!1,this.services={},this.apiServiceMap={},this.debug=!1,this.testSpeed=function(){return Object(r.__awaiter)(o,void 0,void 0,(function(){var e,t,n;return Object(r.__generator)(this,(function(r){return e=+new Date,t=e,n=Object(u.constructTunnelReq)({cloud:this,apiName:"tcbapi_testspeed",serializedReqData:null}),[2,Object(u.tunnel)(n,{fireOnIdle:!0,onFire:function(){e=+new Date,t=e}}).then((function(n){Object(p.reportAPISpeed)({apiName:"cloud.testspeed",apiEndTime:+new Date,apiStartTime:e,tunnelEndTime:+new Date,tunnelStartTime:t,tunnelTimeNoCSNetCost:n.data.baseresponse.stat.qbase_cost_time})})).catch((function(e){0}))]}))}))},this.identifiers=t,this.isInstance=n,this.runtimeInfo=Object(v.getRuntimeInfo)(),this.serviceEndpoint=new g.ServiceEndpoint,this.request=Object(u.getBoundTunnelRequest)({cloud:this});var a=this;this.exportAPI={init:this.init.bind(this)},this.isInstance||(this.exportAPI.Cloud=function(e){return new m(t,a,e).exportAPI}),Object(i.registerServices)(this),this.meta={session_id:Date.now()+""},this.serviceEndpoint.setMetaData(this.getMetaData()),this.serviceEndpoint.setTunnelRequest(this.request),this.config={database:w()},this.appConfig=Object(r.__assign)({},h.default),this.apiPermissions={};try{f.default.onReady((function(){setTimeout((function(){Object(p.init)()}),2e3)})),e.env.TEST&&(this.exportAPI.getCloudInstance=function(){return o})}catch(e){}}return t.prototype.getMetaData=function(){var t;if(!this.meta.sdk_version){var n=Object(d.getSDK)(this.identifiers);if(n){var r=n.wx;r&&r.version&&("miniprogram"===this.runtimeInfo.env?this.meta.sdk_version="wx-miniprogram-sdk/"+r.version.version+" ("+Date.parse(r.version.updateTime+" GMT+0800")+")":this.meta.sdk_version="wx-web-sdk/"+e.env.SDKVERSION+" ("+Date.parse(e.env.SDKVERSION_UPDATETIME+" GMT+0800")+")")}}return this.meta.filter_user_info="singlePage"===(null===(t=f.default.appLaunchInfo)||void 0===t?void 0:t.mode),this.meta},t.prototype.getConfig=function(){return this.config},t.prototype.getEnvForService=function(e){if(this.isInstance)return this.instanceOptions.resourceEnv;var t=this.config;if(t.env)switch(Object(c.getType)(t.env)){case"string":return t.env;case"object":return t.env[e];default:return}},t.prototype.checkAPIPermission=function(e){return!this.apiPermissions.hasOwnProperty(e)||1===this.apiPermissions[e]},t.prototype.init=function(e){var t=this;return void 0===e&&(e={}),this.inited=!0,this.initConfig(e),Promise.all([this.sendInitRequest().then((function(){t.testSpeed()}))]).then((function(){}))},t.prototype.initConfig=function(e){this.config=JSON.parse(JSON.stringify(e)),this.config.database?this.config.database=Object(o.default)(this.config.database,w()):this.config.database=w()},t.prototype.sendInitRequest=function(){var e=this,t="string"==typeof this.config.env?this.config.env:void 0,n=JSON.stringify({trace_user:!1!==this.config.traceUser,env:t}),o=+new Date,i=o;return this.request({apiName:"tcbapi_init",serializedReqData:n,env:t}).then((function(t){var n=+new Date,a=t.data;e.appConfig=Object(r.__assign)(Object(r.__assign)({},e.appConfig),a.config);for(var s=a.tcb_api_list||[],c=0,u=s.length;c<u;c++)e.apiPermissions[s[c].apiname]=s[c].status;Object(p.reportAPISpeed)({apiName:"cloud.init",apiEndTime:+new Date,apiStartTime:o,tunnelEndTime:n,tunnelStartTime:i,tunnelTimeNoCSNetCost:a.baseresponse.stat.qbase_cost_time})})).catch((function(e){console.error("cloud init error: ",e)}))},t.prototype.registerService=function(e){this.services[e.name]=e;var t=e.getAPIs();for(var n in t)if(this.apiServiceMap[n]=e.name,"function"==typeof t[n])this.registerFunction(n,!0,t[n]);else{var r=t[n],o=r.initRequired,i=r.fn;this.registerFunction(n,o,i)}},t.prototype.registerFunction=function(e,t,n){var r=this;this.exportAPI[e]=t?function(){if(!r.inited)throw new s.CloudSDKError({errMsg:"Cloud API isn't enabled, please call wx.cloud.init first\n请先调用 wx.cloud.init() 完成初始化后再调用其他云 API。"});if(!r.checkAPIPermission(e))throw new s.CloudSDKError({errCode:l.ERR_CODE.SDK_API_PERMISSION_DENIED,errMsg:l.ERR_CODE[l.ERR_CODE.SDK_API_PERMISSION_DENIED]});return n.apply(r,arguments)}:n},t.prototype.toJSON=function(){},t}(),m=function(e){function t(t,n,r){var i=e.call(this,t,!0)||this;if("web"===i.runtimeInfo.env){if(!r.identityless&&!r.appid)throw new Error("appid must be provided");if(!r.resourceAppid)throw new Error("resourceAppid must be provided")}if(!r.resourceEnv)throw new Error("resourceEnv must be provided");if(r.config||(r.config={}),i.defaultInstance=n,i.instanceOptions=JSON.parse(JSON.stringify(r)),i.meta=n.meta,i.apiPermissions=n.apiPermissions,i.instanceOptions.config.database=Object(o.default)(w(),i.instanceOptions.config.database||{}),"web"===i.runtimeInfo.env){if(i.exportAPI.init=i.webInit.bind(i),i.webRequest=Object(a.getBoundAuthRequest)(i),i.registerService(Object(a.createWebService)(i)),!i.instanceOptions.identityless&&(i.authStorage=i.defaultInstance.authStorage,!i.authStorage))throw new Error("authStorage not found")}else i.exportAPI.init=i.miniprogramInit.bind(i);return i.instanceOptions.resourceAppid&&(i.exportAPI.refreshAuth=i.refreshAuth.bind(i)),i}return Object(r.__extends)(t,e),t.prototype.miniprogramInit=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.inited?[2]:this.instanceOptions.resourceAppid?[4,this.refreshAuth()]:[3,2];case 1:return t=r.sent(),0===(n=t.data.env_auth_info).errCode?(e.prototype.init.call(this),[2,{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}]):[2,{errCode:n.errCode,errMsg:n.errMsg}];case 2:return e.prototype.init.call(this),[2]}}))}))},t.prototype.webInit=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t,n,o=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return this.inited?[2]:this.instanceOptions.identityless?[3,2]:[4,this.refreshAuth()];case 1:return t=r.sent(),0===(n=t.data.env_auth_info).errCode?(this.sendInitRequest().then((function(){o.testSpeed()})),e.prototype.init.call(this),[2,{errCode:n.errCode,errMsg:n.errMsg,expireTime:1e3*n.expire_time}]):[2,{errCode:n.errCode,errMsg:n.errMsg}];case 2:return this.inited=!0,[2]}}))}))},t.prototype.webRefreshToken=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return this._webCurrentRefreshTokenPromise||(this._webCurrentRefreshTokenPromise=new Promise((function(t,n){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,o,i;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),[4,this.webRequest({url:"/refresh_token",method:"POST",json:{appid:this.instanceOptions.appid,refresh_token:this.authStorage.getItem("refreshToken")}})];case 1:return e=r.sent(),o=e.data,this.authStorage.setItem("appid",o.access_token),t(),[3,4];case 2:return i=r.sent(),n(i),[3,4];case 3:return this._webCurrentRefreshTokenPromise=void 0,[7];case 4:return[2]}}))}))}))),[2,this._webCurrentRefreshTokenPromise]}))}))},t.prototype.refreshAuth=function(){var e=JSON.stringify({resource_appid:this.instanceOptions.resourceAppid,resource_env:this.instanceOptions.resourceEnv}),t=+new Date,n=t,r=this.request({apiName:"tcbapi_getenvauth",serializedReqData:e});return r.then((function(e){var r=+new Date;Object(p.reportAPISpeed)({apiName:"cloud.refreshAuth",apiEndTime:+new Date,apiStartTime:t,tunnelEndTime:r,tunnelStartTime:n})})),r},t}(y);function w(){return{realtime:{maxReconnect:h.clientConfigDefaults.REALTIME_DB_MAX_RECONNECT,reconnectInterval:h.clientConfigDefaults.REALTIME_DB_WS_RECONNECT_INTERVAL,totalConnectionTimeout:h.clientConfigDefaults.REALTIME_DB_TOTAL_CONNECTION_TIMEOUT}}}}.call(this,n(54))},function(e,t,n){n.r(t),t.default=function(){return!1}},function(e,t,n){n.r(t),n.d(t,"ServiceEndpoint",(function(){return c}));var r=n(0),o=n(38),i={},a={},s={},c=function(){function e(){}return e.prototype.setMetaData=function(e){this._meta=e},e.prototype.setTunnelRequest=function(e){this._tunnelRequest=e},e.prototype.getEndpoint=function(e){return Object(r.__awaiter)(this,void 0,void 0,(function(){var t;return Object(r.__generator)(this,(function(n){return(null==(t=i[e])?void 0:t.url)&&(null==t?void 0:t.expiresTs)&&Date.now()<t.expiresTs?[2,t]:[2,this.refreshContainerServiceEndpoint()]}))}))},e.prototype.refreshContainerServiceEndpoint=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(r.__generator)(this,(function(t){return a.container||(clearTimeout(s.container),a.container=new Promise((function(t,n){return Object(r.__awaiter)(e,void 0,void 0,(function(){var e,c,u,l,d,f,p,h=this;return Object(r.__generator)(this,(function(r){switch(r.label){case 0:e=[],c=0,r.label=1;case 1:if(!(c<3))return[3,9];r.label=2;case 2:return r.trys.push([2,7,,8]),u=Date.now(),this._tunnelRequest?[4,this._tunnelRequest({apiName:"tcbapi_get_service_info",serializedReqData:"{}"})]:[3,4];case 3:return l=r.sent(),[3,6];case 4:return[4,Object(o.default)({apiName:"qbase_commapi",data:{qbase_api_name:"tcbapi_get_service_info",qbase_req:"{}",qbase_options:{},qbase_meta:this._meta,cli_req_id:+new Date+"_"+Math.random()}})];case 5:l=r.sent(),r.label=6;case 6:return d=l.data,Date.now()-u>1e3*d.expires_in?(e.push("result already expired (startTs "+u+" resultTs "+Date.now()+")"),[3,8]):(f=Date.now()+1e3*d.expires_in-(Date.now()-u),i.container={url:d.service_url,expiresTs:f},t(i.container),delete a.container,clearTimeout(s.container),s.container=setTimeout((function(){h.refreshContainerServiceEndpoint()}),.8*(f-Date.now())),[2]);case 7:return p=r.sent(),e.push(p+""),[3,8];case 8:return c++,[3,1];case 9:return n("get container service endpoints errors: "+e.join("\n")),delete a.container,[2]}}))}))}))),[2,a.container]}))}))},e}()},function(e,t,n){var r={};n.r(r),n.d(r,"__safe_props__",(function(){return xt})),n.d(r,"Point",(function(){return bt})),n.d(r,"GeoPoint",(function(){return yt})),n.d(r,"MultiPoint",(function(){return mt})),n.d(r,"GeoMultiPoint",(function(){return wt})),n.d(r,"LineString",(function(){return Ot})),n.d(r,"GeoLineString",(function(){return St})),n.d(r,"MultiLineString",(function(){return It})),n.d(r,"GeoMultiLineString",(function(){return Et})),n.d(r,"Polygon",(function(){return Ct})),n.d(r,"GeoPolygon",(function(){return Tt})),n.d(r,"MultiPolygon",(function(){return kt})),n.d(r,"GeoMultiPolygon",(function(){return At}));var o={};n.r(o),n.d(o,"extractQueryOptions",(function(){return sn})),n.d(o,"getProjectionDefinition",(function(){return un})),n.d(o,"OperatorMap",(function(){return xi})),n.d(o,"AggregateOperatorMap",(function(){return Ri})),n.d(o,"operatorToString",(function(){return Ni})),n.d(o,"aggregateOperatorToString",(function(){return Li})),n.d(o,"QuerySerializer",(function(){return Ui})),n.d(o,"encode",(function(){return Vi})),n.d(o,"UpdateSerializer",(function(){return Yi})),n.d(o,"ProjectionSerializer",(function(){return Xi})),n.d(o,"Decoder",(function(){return $i})),n.d(o,"AggregateSerializer",(function(){return Fi})),n.d(o,"flattenQueryObject",(function(){return en})),n.d(o,"flattenObject",(function(){return tn})),n.d(o,"mergeConditionAfterEncode",(function(){return nn})),n.d(o,"isConversionRequired",(function(){return rn})),n.d(o,"encodeInternalDataType",(function(){return on})),n.d(o,"decodeInternalDataType",(function(){return an}));var i=n(0),a=n(5),s=n(2),c=n(1),u=n(3);function l(e,t,n,r){void 0===n&&(n="parameter"),void 0===r&&(r=c.CloudSDKError);var o=function(e,t,n){void 0===n&&(n="parameter");var r=function e(t,n,r){var o=Object(s.getType)(t),i=Object(s.getType)(n);if("string"===i)return o!==n?r+" should be "+n+" instead of "+o+";":"";if(o!==i)return r+" should be "+i+" instead of "+o+"; ";var a="";switch(o){case"object":for(var c in n)a+=e(t[c],n[c],r+"."+c);break;case"array":for(var u=0;u<n.length;u++)a+=e(t[u],n[u],r+"["+u+"]")}return a}(e,t,n);return{passed:!r,reason:r}}(e,t,n);if(!o.passed)throw new r({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:o.reason})}function d(e,t,n,r){if(void 0===r&&(r=c.CloudSDKError),null==e)throw new r({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter "+t+" of function "+n+" must be provided"})}function f(e){var t=e.name,n=e.input,r=e.max,o=e.maxWording,i=void 0===o?"":o,a=e.ErrorClass,s=void 0===a?c.CloudSDKError:a;if(n.length>r)throw new s({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:t+" size must be less than "+(i||r)})}function p(e){var t=e.target,n=e.name,r=e.ErrorClass,o=void 0===r?c.CloudSDKError:r;if(0===Object.keys(t).length)throw new o({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:n+" must not be empty"})}var h=n(19);function v(e,t){if(void 0===t&&(t=!1),t)return function(e){switch(Object(s.getType)(e)){case"object":return Object(i.__assign)({},e);case"array":return e.slice();case"number":return e instanceof Number?new Number(e):e;case"string":return e instanceof String?new String(e):e;case"boolean":return e instanceof Boolean?new Boolean(e):e;case"date":return new e.constructor(+e);case"map":return new Map(e);case"set":return new Set(e);default:return e}}(e);if(Object(s.isPlainObject)(e))return Object(i.__assign)({},e);switch(Object(s.getType)(e)){case"object":return e;case"array":return e.slice();default:return e}}var g=n(4);function _(e){return e+":ok"}function b(e,t){return JSON.stringify(e,(function(e,n){if(t&&t.has(n))return t.get(n);switch(Object(s.getType)(n)){case"arraybuffer":var r=new Uint8Array(n);return{type:"Buffer",data:Object(i.__spread)(r)}}return n}))}function y(e){return m(JSON.parse(e))}function m(e){switch(Object(s.getType)(e)){case"object":return w(e);case"array":return e.map(m);default:return e}}function w(e){var t=e,n=O(t);if(t!==n)return n;for(var r in t){var o=t[r];switch(Object(s.getType)(o)){case"object":var i=O(o);t[r]=i!==o?i:w(t[r]);break;case"array":(i=m(o))!==o&&(t[r]=i);break;default:continue}}return t}function O(e){for(var t in e)switch(t){case"type":switch(e.type){case"Buffer":if(Object(s.isArray)(e.data)&&Object(s.isNumber)(e.data[0]))try{return new Uint8Array(e.data).buffer}catch(t){return e}}}return e}var S=n(8),I=Symbol.for("CLOUD_ID"),E=Symbol("CDN");function C(e){var t=[];for(var n in e)Object(s.isObject)(e[n])&&e[n]._internalType===I&&t.push({key:n,cloudID:e[n].cloudID});return t}function T(e){return function(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){function n(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(n){return[2,new Promise((function(n,o){r(t,e.appConfig.maxPollRetry||50,n,o)}))]}))}))}function r(t,n,o,a){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(i){return Object(S.getSDK)(e.identifiers)._requestSkipCheckDomain({url:t,success:function(e){try{if(200!==e.statusCode)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_STATUS_CODE_ERROR,errMsg:"polling status code "+e.statusCode},W));var i=e.data;if(!i)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_JSON]},W));if(i.base_resp&&0===i.base_resp.ret){if(0!==i.status){if(1===i.status){if(0!==i.service_errcode){var s=Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"requestID "+i.func_req_id+", cloud function service error code "+(i.service_errcode||"unknown")+", error message "+(i.service_errmsg||"unknown")},W);return s.requestID=i.func_req_id,a(s)}var l=i.content;try{l=y(l)}catch(e){try{l=JSON.parse(l)}catch(e){}}return o({result:l,requestID:i.func_req_id})}return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching"},W))}if(!(n>=0))return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY]},W));r(t,n-1,o,a)}else{if(!i.base_resp)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP]},W));if(0!==i.base_resp.ret)return a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.ret "+i.base_resp.ret},W))}}catch(e){a(Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: "+e},W))}},fail:function(e){a(Object(c.returnAsFinalCloudSDKError)(e,W))}}),[2]}))}))}var o,a,s,l,d,p,h,v,g,m,w,O,I,E,T,k;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:if(o=Object(i.__assign)({},t.data),(a=C(o).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length)try{for(s=Object(i.__values)(a),l=s.next();!l.done;l=s.next())d=l.value,delete o[d.key_name]}catch(e){T={error:e}}finally{try{l&&!l.done&&(k=s.return)&&k.call(s)}finally{if(T)throw T.error}}return[4,t.cdnMapPromise];case 1:return p=r.sent(),f({input:h=b(o,p),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"}),v={function_name:t.name,data:h,cloudid_list:a},g=b(v),t.context.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_slowcallfunction",serviceName:e.name,serializedReqData:g,env:t.config&&t.config.env||e.env})];case 2:if(m=r.sent(),t.context.tunnelEndTime=+new Date,!(w=m.data))throw Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT]},W);if(w.event_id,!w.poll_url)throw Object(c.returnAsFinalCloudSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_URL]},W);return w.poll_url.indexOf("?")>-1?w.poll_url+="&devtools_ignore=true&skip_domain_check=true":w.poll_url+="?devtools_ignore=true&skip_domain_check=true",t.context.pollStartTime=+new Date,[4,n(w.poll_url)];case 3:return O=r.sent(),I=O.result,E=O.requestID,t.context.pollEndTime=+new Date,[2,{errMsg:_(W),result:I,requestID:E}]}}))}))}}var k=n(7),A=n(6),P=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},D=function(e){return e.join("->")};function j(e){return function(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){function n(t,n,o,a){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(i){return[2,new Promise((function(i,s){var c=[P("start")],u=function(e,t,n){var r=function(t){e.push(P("app "+t))};return Object(k.onAppVisibilityChange)(r),{resolve:function(e){Object(k.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(k.offAppVisibilityChange)(r),n(e)}}}(c,i,s),l=u.resolve,d=u.reject;r({param:t,functionName:t.name,data:n,cloudIDList:o,callID:a,action:R.CALL,scene:M.INITIATE_CALL,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,trace:c,resolve:l,reject:d})}))]}))}))}function r(n){return Object(i.__awaiter)(this,void 0,void 0,(function(){function o(e){try{if(I)return;C(),x(e);var t=e.data;if(!t)return v.push(P("empty resp")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_CALL_RESULT},W));if(!t.baseresponse||0!==t.baseresponse.errcode)return t.baseresponse?0!==t.baseresponse.errcode?w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode "+t.baseresponse.errcode+" errmsg "+t.baseresponse.errmsg+" (callId: "+d+")"},W)):w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp "+JSON.stringify(t.baseresponse)+" (callId: "+d+")"},W)):w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EMPTY_POLL_RESULT_BASE_RESP},W));if(0!==t.status){if(1===t.status){if(0!==t.service_errcode){if(t.service_errcode===u.ERR_CODE.TCB_FUNCTIONS_EXEC_FAIL){var o=t.service_errmsg||"";try{for(var a=o.split("\n"),s=[],l=0;l<a.length;l++)a[l].startsWith("Error: ")&&s.push([a[l],l]);if(s.length%2==1){var f=s[Math.floor(s.length/2)][1];o=a.slice(f).join("\n")}}catch(e){}return(p=Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"云函数执行错误\n云端堆栈信息(error stack)("+(t.func_request_id?"requestId "+t.func_request_id+", ":"")+"callid "+d+"):\n"+o},W)).stack="Error: "+p.message,p.requestID=t.func_request_id,w(p)}var p;return(p=Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_CLOUD_FUNCTION_EXECUTION_ERROR,errMsg:"\n云函数调用失败("+(t.func_request_id?"requestId "+t.func_request_id+", ":"")+"callid "+d+"):\n"+t.service_errcode+" "+t.service_errmsg},W)).stack="Error: "+p.message,p.requestID=t.func_request_id,w(p)}var g=t.data;try{g=y(g)}catch(e){try{g=JSON.parse(g)}catch(e){}}return m({result:g,requestID:t.func_request_id})}return v.push(P("poll result expired")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: "+d+") (trace: "+D(v)+")"},W))}if(!(h>=0))return v.push(P("too many polls, abort")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: "+d+") (trace: "+D(v)+")"},W));v.push(P("normal poll")),r(Object(i.__assign)(Object(i.__assign)({},n),{action:R.POLL,scene:M.NORMAL_POLL_RETRY,tryCount:h-1}))}catch(e){w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_ERROR,errMsg:"polling catch error: "+e+" (callId: "+d+")"},W))}}var s,l,d,f,p,h,v,g,_,m,w,O,S,I,E,C,T,j,x,N=this;return Object(i.__generator)(this,(function(y){return s=n.functionName,l=n.data,d=n.callID,f=n.action,p=n.scene,h=n.tryCount,v=n.trace,g=n.systemErrorRetry,_=n.timeoutErrorRetry,m=n.resolve,w=n.reject,O={function_name:s,data:f===R.CALL?l:void 0,action:f,scene:p,call_id:d,cloudid_list:f===R.CALL?a:[]},S=b(O),I=!1,E=!1,C=function(){clearTimeout(j),E=!0},T=+new Date,j=setTimeout((function(){return Object(i.__awaiter)(N,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(o){switch(o.label){case 0:return t=e.appConfig.clientPollTimeout||2e4,+new Date-T>t?[4,Object(k.sleep)()]:[3,2];case 1:if(o.sent(),E)return[2];o.label=2;case 2:return!Object(A.isDevTools)()&&+new Date-T>e.appConfig.maxStartRetryGap?(v.push(P("timeout, exceed max retry gap")),[2,w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+d+") (trace: "+D(v)+")"},W))]):(I=!0,n.timeoutErrorRetry>0?(v.push(P("timeout, retry")),r(Object(i.__assign)(Object(i.__assign)({},n),{scene:M.TIMEOUT_RETRY,tryCount:h-1,timeoutErrorRetry:_-1}))):(v.push(P("timeout, abort")),w(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_FUNCTIONS_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: "+d+") (trace: "+D(v)+")"},W))),[2])}}))}))}),e.appConfig.clientPollTimeout||2e4),x=function(e){var n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&(n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time),n.baseresponse.stat.func_exec_cost_time&&(t.context.funcExecTime=n.baseresponse.stat.func_exec_cost_time))},e.request({apiName:"tcbapi_slowcallfunction_v2",serviceName:e.name,serializedReqData:S,env:t.config&&t.config.env||e.env}).then(o).catch((function(e){I||(C(),e&&e.operateWXDataFail&&g>0?(v.push(P("system error ("+e+"), retry")),r(Object(i.__assign)(Object(i.__assign)({},n),{scene:M.SYSTEM_ERROR_RETRY,tryCount:h-1,systemErrorRetry:g-1}))):(v.push(P("system error ("+e+"), abort")),w(Object(c.toSDKError)(e+" (callId: "+d+") (trace: "+D(v)+")",W))))})),[2]}))}))}var o,a,s,l,d,p,h,v,g,m,w,O,S;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:if(o=Object(i.__assign)({},t.data),(a=C(o).map((function(e){return{key_name:e.key,cloud_id:e.cloudID}}))).length)try{for(s=Object(i.__values)(a),l=s.next();!l.done;l=s.next())d=l.value,delete o[d.key_name]}catch(e){O={error:e}}finally{try{l&&!l.done&&(S=s.return)&&S.call(s)}finally{if(O)throw O.error}}return[4,t.cdnMapPromise];case 1:return p=r.sent(),f({input:h=b(o,p),max:e.appConfig.maxReqDataSize,name:"callFunction data",maxWording:e.appConfig.maxReqDataSize/1024+" KB"}),v=+new Date+"-"+Math.random(),t.context.tunnelStartTime=+new Date,[4,n(t,h,a,v)];case 2:return g=r.sent(),m=g.result,w=g.requestID,t.context.tunnelEndTime=+new Date,[2,{errMsg:_(W),result:m,requestID:w}]}}))}))}}function x(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return t=new WeakMap,n=[],e?(JSON.stringify(e,(function(e,r){return r&&r._internalType===E?void n.push(new Promise((function(e,n){var o,a={appType:301,fileType:20303,fileKey:"file_"+Math.random()},c=r;switch(Object(s.getType)(c.target)){case"object":if(!c.target.filePath)throw new Error("filePath must be provided");a.filePath=c.target.filePath;break;default:a.fileData=c.target}e((o=a,new Promise((function(e,t){var n=Object(i.__assign)(Object(i.__assign)({},o),{appType:o.appType||301,fileType:o.fileType||20303,fileKey:o.fileKey||"file_"+Math.random()});Object(S.getSDK)().uploadToCommonCDN(Object(i.__assign)(Object(i.__assign)({},n),{success:e,fail:t}))}))).then((function(e){t.set(r,e.fileUrl)})))}))):r})),[4,Promise.all(n)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2,t]}}))}))}var R,M,N,L=function(e){return Object(i.__assign)(Object(i.__assign)({},e),{errMsg:void 0})},B=function(e){try{Object(A.isDevTools)()&&"undefined"!=typeof __global&&__global.networkLog&&__global.networkLog(Object(i.__assign)(Object(i.__assign)({},e),{domain:"cloud",method:"POST",timestampMs:e.timestampMs||+new Date,callFramesIgnoreLength:e.hasOwnProperty("callFramesIgnoreLength")?e.callFramesIgnoreLength:1}))}catch(e){}},F=function(e,t){try{if(Object(A.isDevTools)()&&"undefined"!=typeof __global&&__global.networkLog){var n=t(),r=Math.random()+"-"+ +new Date,o=n.console||!1,a=n.resultGetter||L;B({reqId:r,type:"requestWillBeSent",url:n.url,headers:n.headers||{},body:n.reqBody,console:o,callFramesIgnoreLength:2,timestampMs:n.timestampMs}),e.then((function(e){return Object(i.__awaiter)(void 0,void 0,void 0,(function(){return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(void 0===n&&(n=0),new Promise((function(e){return setTimeout(e,n)})))];case 1:return t.sent(),B({reqId:r,type:"loadingFinished",body:JSON.stringify(a(e),null,2),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()}),[3,3];case 2:return t.sent(),[3,3];case 3:return[2]}var n}))}))})).catch((function(e){try{B({reqId:r,type:"loadingFailed",errorCode:e&&e.errCode||-1,errorMsg:Object(s.isObject)(e)?e.errMsg||JSON.stringify(e):e.toString(),console:o,callFramesIgnoreLength:2,timestampMs:Date.now()})}catch(e){}}))}}catch(e){0}};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(R||(R={})),function(e){e[e.INITIATE_CALL=1]="INITIATE_CALL",e[e.NORMAL_POLL_RETRY=2]="NORMAL_POLL_RETRY",e[e.SYSTEM_ERROR_RETRY=3]="SYSTEM_ERROR_RETRY",e[e.TIMEOUT_RETRY=4]="TIMEOUT_RETRY"}(M||(M={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(N||(N={}));var W="cloud.callFunction";function U(e){var t,n,r;function o(){return r||(r=function(e){return function(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a,s;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n={function_name:t.name,data:b(t.data),cloudid_list:[]},r=b(n),[4,e.request({apiName:"tcbapi_callfunction",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:if(o=i.sent(),a=o.data,s=a&&a.data)try{s=JSON.parse(s)}catch(e){}return[2,{errMsg:_(W),result:s}]}}))}))}}(e)),r}return function(e){var t=+new Date;l(e,"object");var n=v(e);return n.data||(n.data={}),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,Object(a.hasAPICallback)(n)?function(e){Object(h.wrapParamCallbacksWithTryCatch)({apiName:W,param:e}),s(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(W,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(W,e,t)}))}(n):s(n)};function s(r){return Object(i.__awaiter)(this,void 0,void 0,(function(){function a(){return 1===r.version}var s,u,d;return Object(i.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,5,6,7]),function(e){l(e,{name:"string"}),e.data&&l(e.data,"object"),e.config&&e.config.env&&l(e.config.env,"string")}(r),r.cdnMapPromise=x(r.data),s=a()?(t||(t=T(e)),t)(r):(n||(n=j(e)),n)(r),Object(A.isDevTools)()&&(u=Date.now(),r.cdnMapPromise.then((function(t){F(s,(function(){var n;return{url:"wx.cloud.callFunction."+r.name,headers:{Env:e.isInstance?e.env:(null===(n=r.config)||void 0===n?void 0:n.env)||e.env},reqBody:b(r.data,t),timestampMs:u,console:e.debug}}))})).catch((function(){F(s,(function(){var t;return{url:"wx.cloud.callFunction."+r.name,headers:{Env:e.isInstance?e.env:(null===(t=r.config)||void 0===t?void 0:t.env)||e.env},reqBody:b(r.data),timestampMs:u,console:e.debug}}))}))),[4,s];case 1:return[2,f.sent()];case 2:return[4,o()(r)];case 3:return[2,f.sent()];case 4:return[3,7];case 5:throw d=f.sent(),Object(c.returnAsFinalCloudSDKError)(d,W);case 6:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r.context),{apiEndTime:+new Date,apiName:a()?W:"cloud.callFunction_real_v2"})),[7];case 7:return[2]}}))}))}}function V(e){return{callFunction:U(e)}}var G="functions";function H(e){e.registerService(function(e){var t={name:G,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(G)},appConfig:{get maxReqDataSize(){return e.appConfig.call_function_max_req_data_size},get maxPollRetry(){return e.appConfig.call_function_poll_max_retry},get maxStartRetryGap(){return e.appConfig.call_function_valid_start_retry_gap},get clientPollTimeout(){return e.appConfig.call_function_client_poll_timeout}}};return{name:G,context:t,getAPIs:V.bind(null,t)}}(e))}var z,q,Y,K,J="cloud.callContainer";function X(e){return function(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(r){return n=Date.now(),[2,Promise.all([t.cdnMapPromise,e.serviceEndpoint.getEndpoint("container")]).then((function(r){var o=Object(i.__read)(r,2),a=o[0],s=o[1];return t.endpointCost=Date.now()-n,t.shouldSerialize&&(t.data=b(t.data,a)),function(t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(r){return[2,new Promise((function(r,o){var a,s=Object(S.getSDK)(e.identifiers),c=Object(i.__assign)(Object(i.__assign)({},n.header),{"X-WX-ENV":e.isInstance?e.env:(null===(a=n.config)||void 0===a?void 0:a.env)||e.env,"X-WX-CONTAINER-PATH":n.path,"X-WX-CALL-ID":Math.random()+"_"+Date.now(),"X-WX-TEST":"1"});e.appid&&(c["X-WX-RESOURCE-APPID"]=e.appid),s._requestSkipCheckDomain({url:t,method:n.method,header:c,data:n.data,dataType:n.dataType,responseType:n.responseType,enableHttp2:!0,timeout:n.timeout,success:function(e){r(Object(i.__assign)(Object(i.__assign)({},e),{errMsg:J+":ok"}))},fail:function(e){o(Object(i.__assign)(Object(i.__assign)({},e),{errMsg:e.errMsg.replace(/^request/,J)}))}})}))]}))}))}(s.url,t)}))]}))}))}}!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL"}(z||(z={})),function(e){e[e.None=0]="None",e[e.Error=1]="Error",e[e.Timeout=2]="Timeout"}(q||(q={})),function(e){e[e.RAW=0]="RAW",e[e.BASE64=1]="BASE64",e[e.CDN_URL=2]="CDN_URL"}(Y||(Y={})),function(e){e[e.PENDING=0]="PENDING",e[e.DONE=1]="DONE",e[e.TIMEOUT=2]="TIMEOUT"}(K||(K={}));var $=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},Z=function(e){return e.join("->")},Q=1e5,ee="cloud.callContainer";function te(e){return function(t){var n,r;return Object(i.__awaiter)(this,void 0,void 0,(function(){function o(t,n,r,o){return Object(i.__awaiter)(this,void 0,void 0,(function(){var s,c,u;return Object(i.__generator)(this,(function(i){return s=!1,t.hasOwnProperty("timeout")&&(c=new Promise((function(e,n){setTimeout((function(){s=!0,n("timeout (options.timeout == "+t.timeout+")")}),t.timeout)}))),u=new Promise((function(i,u){var l=[$("start")],d=function(e,t,n){var r=function(t){e.push($("app "+t))};return Object(k.onAppVisibilityChange)(r),{resolve:function(e){Object(k.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(k.offAppVisibilityChange)(r),n(e)}}}(l,i,u),f=d.resolve,p=d.reject;a({param:t,data:n,dataType:r,callID:o,action:z.CALL,retryType:q.None,tryCount:e.appConfig.maxPollRetry||20,systemErrorRetry:2,timeoutErrorRetry:2,userTimeout:{get reached(){return!!c&&s}},trace:l,resolve:f,reject:p})})),[2,c?Promise.race([u,c]):u]}))}))}function a(n){return Object(i.__awaiter)(this,void 0,void 0,(function(){function r(r){return Object(i.__awaiter)(this,void 0,void 0,(function(){var o,s,d,f,v,g;return Object(i.__generator)(this,(function(b){switch(b.label){case 0:return b.trys.push([0,13,,14]),C||_.reached?[2]:(P(),x(r),(o=r.data)?o.baseresponse&&0===o.baseresponse.errcode?0!==o.status?[3,1]:p>=0?(h.push($("normal poll")),a(Object(i.__assign)(Object(i.__assign)({},n),{action:z.POLL,retryType:q.None,tryCount:p-1})),[3,10]):(h.push($("too many polls, abort")),[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EXCEED_MAX_POLL_RETRY,errMsg:"(callId: "+l+") (trace: "+Z(h)+")"},ee))]):[3,11]:(h.push($("empty resp")),[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_CALL_RESULT},ee))]));case 1:return 1!==o.status?[3,9]:(s=void 0,o.data_type!==Y.BASE64?[3,2]:(s=Object(k.base64ToArrayBuffer)(o.data),"json"===t.dataType?s=Object(k.tryJSONParse)(Object(k.arrayBufferToString)(s)):"arraybuffer"!==t.responseType&&(s=Object(k.arrayBufferToString)(s)),[3,8]));case 2:if(o.data_type!==Y.CDN_URL)return[3,7];b.label=3;case 3:return b.trys.push([3,5,,6]),d=Object(S.getSDK)(e.identifiers),[4,new Promise((function(e,n){d._requestSkipCheckDomain({url:o.data,dataType:t.dataType,responseType:t.responseType,success:function(t){200!==t.statusCode?n("download response status code "+t.statusCode):e(t)},fail:function(e){n(e)}})}))];case 4:return f=b.sent(),s=f.data,[3,6];case 5:return v=b.sent(),[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_DOWNLOAD_RESULT_FROM_CDN_FAIL,errMsg:"error: "+v+" \n (callId: "+l+") (trace: "+Z(h)+")"},ee))];case 6:return[3,8];case 7:s=o.data,"arraybuffer"===t.responseType?s=Object(k.stringToArrayBuffer)(s):"json"===t.dataType&&(s=Object(k.tryJSONParse)(s)),b.label=8;case 8:return[2,y({result:{data:s,statusCode:o.http_code,header:o.headers.reduce((function(e,t){return e[t.k]=t.v,e}),{})}})];case 9:return h.push($("poll result expired")),[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for result fetching, result cannot be fetched anymore (callId: "+l+") (trace: "+Z(h)+")"},ee))];case 10:return[3,12];case 11:return o.baseresponse?0!==o.baseresponse.errcode?[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_BASE_RESP_RET_ABNORMAL,errMsg:"polling base_resp.errcode "+o.baseresponse.errcode+" errmsg "+o.baseresponse.errmsg+" (callId: "+l+")"},ee))]:[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP,errMsg:"polling base_resp "+JSON.stringify(o.baseresponse)+" (callId: "+l+")"},ee))]:[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EMPTY_POLL_RESULT_BASE_RESP},ee))];case 12:return[3,14];case 13:return g=b.sent(),m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_ERROR,errMsg:"polling catch error: "+g+" (callId: "+l+")"},ee)),[3,14];case 14:return[2]}}))}))}var o,s,l,d,f,p,h,v,g,_,y,m,w,O,I,E,C,T,P,D,j,x,R=this;return Object(i.__generator)(this,(function(S){for(O in o=n.data,s=n.dataType,l=n.callID,d=n.action,f=n.retryType,p=n.tryCount,h=n.trace,v=n.systemErrorRetry,g=n.timeoutErrorRetry,_=n.userTimeout,y=n.resolve,m=n.reject,w=[],t.header)w.push({k:O,v:t.header[O]});return I=d===z.CALL?{method:t.method||"GET",headers:w,data:d===z.CALL?o:void 0,data_type:s,action:d,retryType:f,call_id:l}:{call_id:l,action:d,retryType:f},E=b(I),C=!1,T=!1,P=function(){clearTimeout(j),T=!0},D=+new Date,j=setTimeout((function(){return Object(i.__awaiter)(R,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return t=e.appConfig.clientPollTimeout||2e4,+new Date-D>t?[4,Object(k.sleep)()]:[3,2];case 1:if(r.sent(),T)return[2];r.label=2;case 2:return _.reached?[2]:!Object(A.isDevTools)()&&+new Date-D>e.appConfig.maxStartRetryGap?(h.push($("timeout, exceed max retry gap")),[2,m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+l+") (trace: "+Z(h)+")"},ee))]):(C=!0,n.timeoutErrorRetry>0?(h.push($("timeout, retry")),a(Object(i.__assign)(Object(i.__assign)({},n),{retryType:q.Timeout,tryCount:p-1,timeoutErrorRetry:g-1}))):(h.push($("timeout, abort")),m(Object(c.toSDKError)({errCode:u.ERR_CODE.SDK_CONTAINER_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:"(callId: "+l+") (trace: "+Z(h)+")"},ee))),[2])}}))}))}),e.appConfig.clientPollTimeout||2e4),x=function(e){var n=e.data;n&&n.baseresponse&&n.baseresponse.stat&&n.baseresponse.stat.qbase_cost_time&&(t.context.tunnelTimeNoCSNetCost+=n.baseresponse.stat.qbase_cost_time)},_.reached||e.request({apiName:"tcbapi_call_container",serviceName:e.name,serializedReqData:E,env:t.config&&t.config.env||e.env}).then(r).catch((function(e){C||_.reached||(P(),e&&e.operateWXDataFail&&v>0?(h.push($("system error ("+e+"), retry")),a(Object(i.__assign)(Object(i.__assign)({},n),{retryType:q.Error,tryCount:p-1,systemErrorRetry:v-1}))):(h.push($("system error ("+e+"), abort")),m(Object(c.toSDKError)(e+" (callId: "+l+") (trace: "+Z(h)+")",ee))))})),[2]}))}))}var l,d,f,p,h,v,g,y,m,w,O;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:return t.shouldSerialize?[4,t.cdnMapPromise]:[3,2];case 1:l=a.sent(),t.data=b(t.data,l),a.label=2;case 2:if(d=Y.RAW,f=(null===(n=t.method)||void 0===n?void 0:n.toUpperCase())||"GET",!t.data||!/^(POST|PUT|PATCH)$/.test(f))return[3,8];if("object"!==(p=Object(s.getType)(t.data)))return[3,3];if(t.isReqHeaderContentTypeJSON)t.data=JSON.stringify(t.data);else{if(!t.isReqHeaderContentTypeURLEncoded)throw new Error("input data cannnot be serialized");for(m in h="",t.data)h+=(h.length?"&":"")+encodeURIComponent(m)+"="+encodeURIComponent(t.data[m]);t.data=h}return[3,7];case 3:if("arraybuffer"!==p&&"string"!==p)return[3,6];if(v=!1,"string"===p?v=t.data.length>Q:t.data.byteLength>Q||(g=Object(k.arrayBufferToBase64)(t.data)).length>Q?v=!0:(t.data=g,d=Y.BASE64),!v)return[3,5];throw new Error("input data size too large (> 100KB)");case 4:y=a.sent(),t.data=y.fileUrl,d=Y.CDN_URL,a.label=5;case 5:return[3,7];case 6:throw new Error("input data type is not supported: "+p);case 7:return[3,9];case 8:t.data=void 0,a.label=9;case 9:for(m in t.header=Object(i.__assign)(Object(i.__assign)({},t.header),{"X-WX-ENV":e.isInstance?e.env:(null===(r=t.config)||void 0===r?void 0:r.env)||e.env,"X-WX-CONTAINER-PATH":t.path}),t.header)null!==t.header[m]&&void 0!==t.header[m]&&(t.header[m]+="");return w=+new Date+"-"+Math.random(),t.context.tunnelStartTime=+new Date,[4,o(t,t.data,d,w)];case 10:return O=a.sent().result,t.context.tunnelEndTime=+new Date,[2,Object(i.__assign)(Object(i.__assign)({},O),{errMsg:_(ee),callID:w})]}}))}))}}var ne="cloud.callContainer";function re(e){var t,n;return function(e){var t=+new Date;l(e,"object");var n=v(e);return n.data||(n.data={}),n.dataType||(n.dataType="json"),n.context={tunnelTimeNoCSNetCost:0},n.context.apiStartTime=t,Object(a.hasAPICallback)(n)?function(e){Object(h.wrapParamCallbacksWithTryCatch)({apiName:ne,param:e}),r(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(ne,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(ne,e,t)}))}(n):r(n)};function r(r){return Object(i.__awaiter)(this,void 0,void 0,(function(){var o,a,u,d,f,p;return Object(i.__generator)(this,(function(h){switch(h.label){case 0:for(a in h.trys.push([0,2,3,4]),function(t){var n;if(l(t,{path:"string"}),e.isInstance){if(!e.env)throw new Error("envId must be provided")}else if(null===(n=t.config)||void 0===n?void 0:n.env)l(t.config.env,"string");else if(!e.env)throw new Error("envId must be provided")}(r),r.header||(r.header={}),r.dataType||(r.dataType="json"),r.responseType||(r.responseType="text"),o=!1,r.header)"content-type"===a.toLowerCase()&&(o=!0,"application/json"===r.header[a]&&(r.isReqHeaderContentTypeJSON=!0),"application/x-www-form-urlencoded"===r.header[a]&&(r.isReqHeaderContentTypeURLEncoded=!0));return o||(r.header["content-type"]="application/json",r.isReqHeaderContentTypeJSON=!0),/post|put|patch/i.test(r.method||"")&&r.data&&r.isReqHeaderContentTypeJSON&&(u=Object(s.getType)(r.data),r.shouldSerialize="string"!==u),r.cdnMapPromise=r.shouldSerialize?x(r.data):Promise.resolve(new Map),d=Date.now(),f=function(e){return 1===e.apiVersion}(r)?(t||(t=X(e)),t)(r):(n||(n=te(e)),n)(r),r.cdnMapPromise.then((function(t){try{F(f,(function(){var n;return{url:"wx.cloud.callContainer"+r.path,headers:{Env:e.isInstance?e.env:(null===(n=r.config)||void 0===n?void 0:n.env)||e.env},reqBody:b(r.data,t),timestampMs:d,console:e.debug}}))}catch(t){F(f,(function(){var t;return{url:"wx.cloud.callContainer"+r.path,headers:{Env:e.isInstance?e.env:(null===(t=r.config)||void 0===t?void 0:t.env)||e.env},reqBody:b(r.data),timestampMs:d,console:e.debug}}))}})),[4,f];case 1:return[2,h.sent()];case 2:throw p=h.sent(),Object(c.returnAsFinalCloudSDKError)(p,ne);case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r.context),{apiEndTime:+new Date,apiName:ne})),[7];case 4:return[2]}}))}))}}function oe(e){return{callContainer:re(e)}}var ie="container";function ae(e){e.registerService(function(e){var t={name:ie,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,serviceEndpoint:e.serviceEndpoint,get debug(){return e.debug},get appid(){return e.isInstance?e.instanceOptions.resourceAppid:void 0},get env(){return e.getEnvForService(ie)},appConfig:{get maxPollRetry(){return e.appConfig.call_container_poll_max_retry},get clientPollTimeout(){return e.appConfig.call_container_client_poll_timeout},get maxStartRetryGap(){return e.appConfig.call_container_valid_start_retry_gap}}};return{name:ie,context:t,getAPIs:oe.bind(null,t)}}(e))}var se=n(40),ce="cloud.uploadFile";function ue(e){return function(e){if(e=v(e),Object(a.hasAPICallback)(e))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),o={apiStartTime:+new Date};return t(Object(i.__assign)(Object(i.__assign)({},e),{context:n,timing:o,uploadTaskAgent:r})).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(ce,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(ce,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(Object(i.__assign)(Object(i.__assign)({},e),{timing:n}))};function t(t){var r=this;return new Promise((function(o,a){return Object(i.__awaiter)(r,void 0,void 0,(function(){var r,s;return Object(i.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,2,3,4]),function(e){l(e,{cloudPath:"string"}),"miniprogram"===Object(se.getRuntimeInfo)().env?l(e,{filePath:"string"}):d(e,"file","uploadFile")}(t),t.filePath&&function(t){Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(n){return[2,new Promise((function(n,r){wx.getFileInfo?wx.getFileInfo({filePath:t,success:function(t){t.size>e.appConfig.uploadMaxFileSize?r(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_EXCEED_MAX_UPLOAD_SIZE,errMsg:"exceed max upload file size: "+e.appConfig.uploadMaxFileSize/1024/1024+" MB"})):n()},fail:function(){n()}}):n()}))]}))}))}(t.filePath),t.context&&(t.context.abort=function(){a(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce))},t.context.aborted)?[2,a(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce))]:[4,n(t)];case 1:return r=f.sent(),o(r),[3,4];case 2:return s=f.sent(),a(Object(c.returnAsFinalCloudSDKError)(s,ce)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},t.timing),{apiEndTime:+new Date,apiName:"cloud.uploadFile_v2"})),[7];case 4:return[2]}}))}))}))}function n(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(i.__generator)(this,(function(a){switch(a.label){case 0:return n=Object(S.getSDK)(e.identifiers),[4,r(t)];case 1:return o=a.sent(),[2,new Promise((function(e,r){if(t.context&&t.context.aborted)return r(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},ce));var a,u;if("web"===Object(se.getRuntimeInfo)().env){var l=new FormData;l.append("key",t.cloudPath),l.append("signature",o.authorization),l.append("x-cos-security-token",o.token),l.append("x-cos-meta-fileid",o.cos_file_id),l.append("file",t.file),a={url:o.url,timeout:t.timeout,filePath:"",header:t.header,name:"",formData:l}}else a={url:o.url,timeout:t.timeout,filePath:t.filePath,header:t.header,name:"file",formData:{key:t.cloudPath,signature:o.authorization,"x-cos-security-token":o.token,"x-cos-meta-fileid":o.cos_file_id}};(u=n._uploadFileSkipCheckDomain(Object(i.__assign)(Object(i.__assign)({},a),{success:function(t){try{if(t.statusCode>=200&&t.statusCode<300)e({errMsg:_(ce),fileID:o.file_id,statusCode:t.statusCode});else{var n=new c.CloudSDKError({errMsg:"status "+t.statusCode+", error: "+t.data+";"});r(n)}}catch(n){var i=new c.CloudSDKError({errMsg:"Error : "+t.data+";"});r(i)}},fail:function(e){r(e)}})))&&(u.onProgressUpdate((function(){t.uploadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&Object(s.isFunction)(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._uploadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=u.abort.bind(u)))}))]}}))}))}function r(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n=JSON.stringify({path:t.cloudPath}),r=+new Date,[4,e.request({apiName:"tcbapi_cos_uploadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})];case 1:if(o=i.sent(),a=o.data,t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.url)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_UPLOAD_URL]});return[2,a]}}))}))}}var le="cloud.downloadFile";function de(e){return function(e){if(e=v(e),Object(a.hasAPICallback)(e))return function(e){var n={aborted:!1},r=function(e){return{onProgressUpdate:function(t){e.onProgressUpdateUserHandler=t},abort:function(){e.abort&&e.abort(),e.aborted=!0}}}(n),o={apiStartTime:+new Date};return t(Object(i.__assign)(Object(i.__assign)({},e),{context:n,timing:o,downloadTaskAgent:r})).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(le,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(le,e,t)})),r}(e);var n={apiStartTime:+new Date};return t(Object(i.__assign)(Object(i.__assign)({},e),{timing:n}))};function t(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(i.__generator)(this,(function(r){return[2,new Promise((function(r,o){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,a;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,3,4]),function(e){l(e,{fileID:"string"}),e.config&&e.config.env&&l(e.config.env,"string")}(e),e.context&&(e.context.abort=function(){o(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le))},e.context.aborted)?[2,o(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le))]:[4,n(e)];case 1:return t=s.sent(),r(t),[3,4];case 2:return a=s.sent(),o(Object(c.returnAsFinalCloudSDKError)(a,le)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},e.timing),{apiEndTime:+new Date,apiName:le})),[7];case 4:return[2]}}))}))}))]}))}))}function n(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n=Object(S.getSDK)(e.identifiers),[4,r(t)];case 1:return o=i.sent(),[2,new Promise((function(e,r){if(t.context&&t.context.aborted)return r(Object(c.returnAsFinalCloudSDKError)({errMsg:"abort"},le));var i=n._downloadFileSkipCheckDomain({url:o,success:function(t){e(t)},fail:function(e){r(e)}});i&&(i.onProgressUpdate((function(){t.downloadTaskAgent&&t.context&&t.context.onProgressUpdateUserHandler&&Object(s.isFunction)(t.context.onProgressUpdateUserHandler)&&t.context.onProgressUpdateUserHandler.apply(n._downloadFileSkipCheckDomain,arguments)})),t.context&&(t.context.abort=i.abort.bind(i)))}))]}}))}))}function r(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n=JSON.stringify({fileid:t.fileID}),r=+new Date,[4,e.request({apiName:"tcbapi_downloadfile",serviceName:e.name,serializedReqData:n,env:t.config&&t.config.env||e.env})];case 1:if(o=i.sent(),a=o.data,t.timing&&(t.timing.tunnelStartTime=r,t.timing.tunnelEndTime=+new Date,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time),!a.download_url)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL,errMsg:u.ERR_CODE[u.ERR_CODE.SDK_STORAGE_INTERNAL_SERVER_ERROR_EMPTY_DOWNLOAD_URL]});return a.download_url.indexOf("?")>-1?a.download_url+="&skip_domain_check=true":a.download_url+="?skip_domain_check=true",[2,a.download_url]}}))}))}}var fe="cloud.getTempFileURL";function pe(e){return function(e){var n=v(e);return n.timing={apiStartTime:+new Date},Object(a.hasAPICallback)(n)?function(e){t(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(fe,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(fe,e,t)}))}(n):t(n)};function t(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r;return Object(i.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),function(t){if(l(t,{fileList:"array"}),t.config&&t.config.env&&l(t.config.env,"string"),e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length "+e.appConfig.getTempFileURLMaxReq})}(t),t.fileList.length?[4,n(t)]:[2,{errMsg:_(fe),fileList:[]}];case 1:return[2,o.sent()];case 2:throw r=o.sent(),Object(c.returnAsFinalCloudSDKError)(r,fe);case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},t.timing),{apiEndTime:+new Date,apiName:fe})),[7];case 4:return[2]}}))}))}function n(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n={file_list:t.fileList.map((function(e){return Object(s.isString)(e)?{fileid:e}:{fileid:e.fileID,max_age:e.maxAge}}))},r=JSON.stringify(n),t.timing.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_gettempfileurl",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:return o=i.sent(),t.timing.tunnelEndTime=+new Date,a=o.data,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,[2,{errMsg:_(fe),fileList:a.download_list.map((function(e){return{fileID:e.fileid,tempFileURL:e.download_url,maxAge:e.max_age,status:e.status,errMsg:e.errmsg}}))}]}}))}))}}var he="cloud.deleteFile";function ve(e){return function(e){var n=v(e);return n.timing={apiStartTime:+new Date},Object(a.hasAPICallback)(n)?function(e){t(e).then((function(t){Object(a.invokeSuccessCompleteCallbacks)(he,e,t)})).catch((function(t){Object(a.invokeFailCompleteCallbacks)(he,e,t)}))}(n):t(n)};function t(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r;return Object(i.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,3,4]),function(t){l(t,{fileList:"array"}),t.config&&t.config.env&&l(t.config.env,"string");for(var n=0,r=t.fileList.length;n<r;n++)l(t.fileList[n],"string","parameter.fileList["+n+"]");if(e.appConfig.getTempFileURLMaxReq&&t.fileList.length>e.appConfig.getTempFileURLMaxReq)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_ERROR,errMsg:"parameter.fileList exceed max length "+e.appConfig.getTempFileURLMaxReq})}(t),t.fileList.length?[4,n(t)]:[2,{errMsg:_(he),fileList:[]}];case 1:return[2,o.sent()];case 2:throw r=o.sent(),Object(c.returnAsFinalCloudSDKError)(r,he);case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},t.timing),{apiEndTime:+new Date,apiName:he})),[7];case 4:return[2]}}))}))}function n(t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return n={fileid_list:t.fileList},r=JSON.stringify(n),t.timing.tunnelStartTime=+new Date,[4,e.request({apiName:"tcbapi_deletefile",serviceName:e.name,serializedReqData:r,env:t.config&&t.config.env||e.env})];case 1:return o=i.sent(),t.timing.tunnelEndTime=+new Date,a=o.data,t.timing.tunnelTimeNoCSNetCost=a.baseresponse.stat.qbase_cost_time,[2,{errMsg:_(he),fileList:a.delete_list.map((function(e){return{fileID:e.fileid,status:e.status,errMsg:e.errmsg}}))}]}}))}))}}function ge(e){return{uploadFile:ue(e),downloadFile:de(e),getTempFileURL:pe(e),deleteFile:ve(e)}}var _e="storage";function be(e){e.registerService(function(e){var t={name:_e,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get env(){return e.getEnvForService(_e)},get debug(){return e.debug},appConfig:{get uploadMaxFileSize(){return e.appConfig.upload_max_file_size},get getTempFileURLMaxReq(){return e.appConfig.get_temp_file_url_max_requests}}};return{name:_e,context:t,getAPIs:ge.bind(null,t)}}(e))}var ye,me=Symbol.for("UNSET_FIELD_NAME"),we=Symbol.for("AGGREGATE"),Oe=Symbol.for("AGGREGATE_PIPELINE"),Se=Symbol.for("AGGREGATE_PIPELINE_STAGE"),Ie=Symbol.for("UPDATE_COMMAND"),Ee=Symbol.for("QUERY_COMMAND"),Ce=Symbol.for("LOGIC_COMMAND"),Te=Symbol.for("AGGREGATE_COMMAND"),ke=Symbol.for("PROJECT_COMMAND"),Ae=Symbol.for("GEO_POINT"),Pe=Symbol.for("GEO_LINESTRING"),De=Symbol.for("GEO_POLYGON"),je=Symbol.for("GEO_MULTIPOINT"),xe=Symbol.for("GEO_MULTILINESTRING"),Re=Symbol.for("GEO_MULTIPOLYGON"),Me=Symbol.for("SERVER_DATE"),Ne=Symbol.for("REGEXP");!function(e){e.AND="and",e.OR="or",e.NOT="not",e.NOR="nor"}(ye||(ye={}));var Le=[ye.AND,ye.OR,ye.NOT,ye.NOR],Be=new Set(Le),Fe=function(){function e(e,t,n){this._internalType=Ce,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||me}return e.prototype._setFieldName=function(t){var n=this.operands.map((function(e){return e===ye.AND||e===ye.OR?e._setFieldName(t):e}));return new e(this.operator,n,t)},e.prototype.and=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","and");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(ye.AND,r,this.fieldName)},e.prototype.or=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","or");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(ye.OR,r,this.fieldName)},e.prototype.nor=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];d(arguments[0],"expressions","nor");var r=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return r.unshift(this),new e(ye.NOR,r,this.fieldName)},e.prototype.not=function(t){return d(t,"expression","not"),new e(ye.NOT,[t],this.fieldName)},e.prototype.toJSON=function(){},e}();function We(e){return e&&e instanceof Fe&&e._internalType===Ce}var Ue;!function(e){e.EQ="eq",e.NEQ="neq",e.GT="gt",e.GTE="gte",e.LT="lt",e.LTE="lte",e.IN="in",e.NIN="nin",e.GEO_NEAR="geoNear",e.GEO_WITHIN="geoWithin",e.GEO_INTERSECTS="geoIntersects",e.EXISTS="exists",e.MOD="mod",e.ALL="all",e.ELEM_MATCH="elemMatch",e.SIZE="size",e.EXPR="expr"}(Ue||(Ue={}));var Ve=[Ue.EQ,Ue.NEQ,Ue.GT,Ue.GTE,Ue.LT,Ue.LTE,Ue.IN,Ue.NIN,Ue.GEO_NEAR,Ue.GEO_WITHIN,Ue.GEO_INTERSECTS,Ue.EXISTS,Ue.MOD,Ue.ALL,Ue.ELEM_MATCH,Ue.SIZE],Ge=new Set(Ve),He=(new Set(Object(i.__spread)(Ge,Be)),function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.operator=t,o._internalType=Ee,o}return Object(i.__extends)(t,e),t.prototype._setFieldName=function(e){return new t(this.operator,this.operands,e)},t.prototype.eq=function(e){var n=new t(Ue.EQ,[e],this.fieldName);return this.and(n)},t.prototype.neq=function(e){var n=new t(Ue.NEQ,[e],this.fieldName);return this.and(n)},t.prototype.gt=function(e){var n=new t(Ue.GT,[e],this.fieldName);return this.and(n)},t.prototype.gte=function(e){var n=new t(Ue.GTE,[e],this.fieldName);return this.and(n)},t.prototype.lt=function(e){var n=new t(Ue.LT,[e],this.fieldName);return this.and(n)},t.prototype.lte=function(e){var n=new t(Ue.LTE,[e],this.fieldName);return this.and(n)},t.prototype.in=function(e){l(e,"array");var n=new t(Ue.IN,e,this.fieldName);return this.and(n)},t.prototype.nin=function(e){l(e,"array");var n=new t(Ue.NIN,e,this.fieldName);return this.and(n)},t.prototype.geoNear=function(e){var n=new t(Ue.GEO_NEAR,[e],this.fieldName);return this.and(n)},t.prototype.geoWithin=function(e){var n=new t(Ue.GEO_WITHIN,[e],this.fieldName);return this.and(n)},t.prototype.geoIntersects=function(e){var n=new t(Ue.GEO_INTERSECTS,[e],this.fieldName);return this.and(n)},t.prototype.exists=function(e){var n=new t(Ue.EXISTS,[e],this.fieldName);return this.and(n)},t.prototype.mod=function(e,n){var r=new t(Ue.MOD,[e,n],this.fieldName);return this.and(r)},t.prototype.all=function(e){var n=new t(Ue.ALL,e,this.fieldName);return this.and(n)},t.prototype.elemMatch=function(e){var n=new t(Ue.ELEM_MATCH,[e],this.fieldName);return this.and(n)},t.prototype.size=function(e){var n=new t(Ue.SIZE,[e],this.fieldName);return this.and(n)},t}(Fe));function ze(e){return e&&e instanceof He&&e._internalType===Ee}var qe;!function(e){e.SET="set",e.REMOVE="remove",e.INC="inc",e.MUL="mul",e.MIN="min",e.MAX="max",e.RENAME="rename",e.BIT="bit",e.PUSH="push",e.POP="pop",e.SHIFT="shift",e.UNSHIFT="unshift",e.ADD_TO_SET="addToSet",e.PULL="pull",e.PULL_ALL="pullAll"}(qe||(qe={}));new Set([qe.SET,qe.REMOVE,qe.INC,qe.MUL,qe.MIN,qe.MAX,qe.RENAME,qe.BIT,qe.PUSH,qe.POP,qe.SHIFT,qe.UNSHIFT,qe.ADD_TO_SET,qe.PULL,qe.PULL_ALL]);var Ye=function(){function e(e,t,n){this._internalType=Ie,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||me}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e.prototype.toJSON=function(){},e}();function Ke(e){return e&&e instanceof Ye&&e._internalType===Ie}var Je;!function(e){e.ABS="abs",e.ADD="add",e.ADDTOSET="addToSet",e.ALLELEMENTSTRUE="allElementsTrue",e.AND="and",e.ANYELEMENTTRUE="anyElementTrue",e.ARRAYELEMAT="arrayElemAt",e.ARRAYTOOBJECT="arrayToObject",e.AVG="avg",e.CEIL="ceil",e.CMP="cmp",e.CONCAT="concat",e.CONCATARRAYS="concatArrays",e.COND="cond",e.CONVERT="convert",e.DATEFROMPARTS="dateFromParts",e.DATETOPARTS="dateToParts",e.DATEFROMSTRING="dateFromString",e.DATETOSTRING="dateToString",e.DAYOFMONTH="dayOfMonth",e.DAYOFWEEK="dayOfWeek",e.DAYOFYEAR="dayOfYear",e.DIVIDE="divide",e.EQ="eq",e.EXP="exp",e.FILTER="filter",e.FIRST="first",e.FLOOR="floor",e.GT="gt",e.GTE="gte",e.HOUR="hour",e.IFNULL="ifNull",e.IN="in",e.INDEXOFARRAY="indexOfArray",e.INDEXOFBYTES="indexOfBytes",e.INDEXOFCP="indexOfCP",e.ISARRAY="isArray",e.ISODAYOFWEEK="isoDayOfWeek",e.ISOWEEK="isoWeek",e.ISOWEEKYEAR="isoWeekYear",e.LAST="last",e.LET="let",e.LITERAL="literal",e.LN="ln",e.LOG="log",e.LOG10="log10",e.LT="lt",e.LTE="lte",e.LTRIM="ltrim",e.MAP="map",e.MAX="max",e.MERGEOBJECTS="mergeObjects",e.META="meta",e.MIN="min",e.MILLISECOND="millisecond",e.MINUTE="minute",e.MOD="mod",e.MONTH="month",e.MULTIPLY="multiply",e.NEQ="ne",e.NOT="not",e.OBJECTTOARRAY="objectToArray",e.OR="or",e.POW="pow",e.PUSH="push",e.RANGE="range",e.REDUCE="reduce",e.REVERSEARRAY="reverseArray",e.RTRIM="rtrim",e.SECOND="second",e.SETDIFFERENCE="setDifference",e.SETEQUALS="setEquals",e.SETINTERSECTION="setIntersection",e.SETISSUBSET="setIsSubset",e.SETUNION="setUnion",e.SIZE="size",e.SLICE="slice",e.SPLIT="split",e.SQRT="sqrt",e.STDDEVPOP="stdDevPop",e.STDDEVSAMP="stdDevSamp",e.STRCASECMP="strcasecmp",e.STRLENBYTES="strLenBytes",e.STRLENCP="strLenCP",e.SUBSTR="substr",e.SUBSTRBYTES="substrBytes",e.SUBSTRCP="substrCP",e.SUBTRACT="subtract",e.SUM="sum",e.SWITCH="switch",e.TOBOOL="toBool",e.TODATE="toDate",e.TODECIMAL="toDecimal",e.TODOUBLE="toDouble",e.TOINT="toInt",e.TOLONG="toLong",e.TOOBJECTID="toObjectId",e.TOSTRING="toString",e.TOLOWER="toLower",e.TOUPPER="toUpper",e.TRIM="trim",e.TRUNC="trunc",e.TYPE="type",e.WEEK="week",e.YEAR="year",e.ZIP="zip"}(Je||(Je={}));Je.ABS,Je.ADD,Je.ADDTOSET,Je.ALLELEMENTSTRUE,Je.AND,Je.ANYELEMENTTRUE,Je.ARRAYELEMAT,Je.ARRAYTOOBJECT,Je.AVG,Je.CEIL,Je.CMP,Je.CONCAT,Je.CONCATARRAYS,Je.COND,Je.CONVERT,Je.DATEFROMPARTS,Je.DATETOPARTS,Je.DATEFROMSTRING,Je.DATETOSTRING,Je.DAYOFMONTH,Je.DAYOFWEEK,Je.DAYOFYEAR,Je.DIVIDE,Je.EQ,Je.EXP,Je.FILTER,Je.FIRST,Je.FLOOR,Je.GT,Je.GTE,Je.HOUR,Je.IFNULL,Je.IN,Je.INDEXOFARRAY,Je.INDEXOFBYTES,Je.INDEXOFCP,Je.ISARRAY,Je.ISODAYOFWEEK,Je.ISOWEEK,Je.ISOWEEKYEAR,Je.LAST,Je.LET,Je.LITERAL,Je.LN,Je.LOG,Je.LOG10,Je.LT,Je.LTE,Je.LTRIM,Je.MAP,Je.MAX,Je.MERGEOBJECTS,Je.META,Je.MIN,Je.MILLISECOND,Je.MINUTE,Je.MOD,Je.MONTH,Je.MULTIPLY,Je.NEQ,Je.NOT,Je.OBJECTTOARRAY,Je.OR,Je.POW,Je.PUSH,Je.RANGE,Je.REDUCE,Je.REVERSEARRAY,Je.RTRIM,Je.SECOND,Je.SETDIFFERENCE,Je.SETEQUALS,Je.SETINTERSECTION,Je.SETISSUBSET,Je.SETUNION,Je.SIZE,Je.SLICE,Je.SPLIT,Je.SQRT,Je.STDDEVPOP,Je.STDDEVSAMP,Je.STRCASECMP,Je.STRLENBYTES,Je.STRLENCP,Je.SUBSTR,Je.SUBSTRBYTES,Je.SUBSTRCP,Je.SUBTRACT,Je.SUM,Je.SWITCH,Je.TOBOOL,Je.TODATE,Je.TODECIMAL,Je.TODOUBLE,Je.TOINT,Je.TOLONG,Je.TOOBJECTID,Je.TOSTRING,Je.TOLOWER,Je.TOUPPER,Je.TRIM,Je.TRUNC,Je.TYPE,Je.WEEK,Je.YEAR,Je.ZIP;var Xe=function(){function e(e,t,n){this._internalType=Te,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.operator=e,this.operands=t,this.fieldName=n||me}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e}();function $e(e){return e&&e instanceof Xe&&e._internalType===Te}var Ze;!function(e){e.SLICE="slice"}(Ze||(Ze={}));new Set([Ze.SLICE]);var Qe=function(){function e(e,t,n){this._internalType=ke,this.operator=e,this.operands=t,this.fieldName=n||me}return e.prototype._setFieldName=function(t){return new e(this.operator,this.operands,t)},e}();function et(e){return e&&e instanceof Qe&&e._internalType===ke}var tt,nt,rt;function ot(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o,a,s,c,u,l,d,f,p;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.collectionName,r=e.query,o=e.options,a=e.instanceContext,s=e.timing,c=e.env,u=Object(A.isDevTools)()?e.explain:void 0,l=o&&o.multi,d=JSON.stringify({collection_name:t,query:JSON.stringify(r),multi:l,query_type:l?tt.WHERE:tt.DOC,explain:u}),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_deletedocument",serviceName:a.serviceContext.name,serializedReqData:d,requireDataNotEmpty:!0,env:c||a.serviceContext.env})];case 1:return f=i.sent(),s.tunnelEndTime=+new Date,u?[2,n(26).EJSON.deserialize(f.data)]:(p=f.data,s.tunnelTimeNoCSNetCost=p.baseresponse.stat.qbase_cost_time,[2,{removed:p.deleted}])}}))}))}function it(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o,a,s,c,u,l,d,f,p,h,v,g;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,r=e.collectionName,o=e.query,a=e.options,s=void 0===a?{}:a,c=e.instanceContext,u=e.timing,l=e.queryType,d=Object(A.isDevTools)()?e.explain:void 0,f={collection_name:r,query:JSON.stringify(o),query_type:l,explain:d},s.offset&&(f.offset=s.offset),s.limit&&(f.limit=s.limit),s.order&&(f.order=s.order),s.projection&&(f.projection=JSON.stringify(s.projection)),p=JSON.stringify(f),u.tunnelStartTime=+new Date,[4,c.serviceContext.request({apiName:"tcbapi_db_querydocument",serviceName:c.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||c.serviceContext.env})];case 1:return h=i.sent(),u.tunnelEndTime=+new Date,d?[2,n(26).EJSON.deserialize(h.data)]:(v=h.data,u.tunnelTimeNoCSNetCost=v.baseresponse.stat.qbase_cost_time,g=v.data_list?JSON.parse(v.data_list):[],[2,{list:g=c.engine.Decoder.decode(g),offset:v.offset,limit:v.limit,total:v.total}])}}))}))}function at(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o,a,s,c,u,l,d,p,h,v,g,_,b;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,r=e.collectionName,o=e.query,a=e.data,s=e.options,c=void 0===s?{}:s,u=e.instanceContext,l=e.timing,d=e.queryType,p=Object(A.isDevTools)()?e.explain:void 0,f({input:h=JSON.stringify(a),max:u.serviceContext.appConfig.docSizeLimit,name:"update expression",maxWording:(u.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),(v={collection_name:r,query:JSON.stringify(o),data:h,query_type:d,explain:p}).multi=!1!==c.multi,v.merge=!1!==c.merge,c.upsert&&(v.upsert=c.upsert),g=JSON.stringify(v),l.tunnelStartTime=+new Date,[4,u.serviceContext.request({apiName:"tcbapi_db_updatedocument",serviceName:u.serviceContext.name,serializedReqData:g,requireDataNotEmpty:!0,env:t||u.serviceContext.env})];case 1:return _=i.sent(),l.tunnelEndTime=+new Date,p?[2,n(26).EJSON.deserialize(_.data)]:(b=_.data,l.tunnelTimeNoCSNetCost=b.baseresponse.stat.qbase_cost_time,[2,{updated:b.updated}])}}))}))}function st(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.request({apiName:"tcbapi_db_get_realtime_connection",env:t||e.env,serviceName:e.name,serializedReqData:JSON.stringify({}),requireDataNotEmpty:!0})];case 1:return n=o.sent(),[2,{envId:(r=n.data).env_id,secretVersion:r.secret_version,signStr:r.sign_str,wsUrl:r.ws_url}]}}))}))}!function(e){e[e.WHERE=0]="WHERE",e[e.DOC=1]="DOC"}(tt||(tt={})),function(e){e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(nt||(nt={})),function(e){e[e.ASC=0]="ASC",e[e.DESC=1]="DESC"}(rt||(rt={}));var ct=function(e){return function(t){function r(e,n){var r=t.call(this,n)||this;return r._internalType=we,r.collection=e,r}return Object(i.__extends)(r,t),r.prototype.pushStage=function(e,t){return new r(this.collection,Object(i.__spread)(this._stages,[new ut(e,t)]))},r.prototype.end=function(t){var r=this;void 0===t&&(t={});var o="collection.aggregate",s={apiStartTime:+new Date},u=function(){return function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o,a,s,c,u,l,d,f,p;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,r=e.collectionName,o=e.stages,a=e.instanceContext,s=e.timing,c=Object(A.isDevTools)()?e.explain:void 0,u={collection_name:r,stages:o.map((function(e){for(var t in e)return{stage_key:t,stage_value:JSON.stringify(e[t])};throw new Error("empty encoded stage ("+JSON.stringify(e)+")")})),explain:c},l=JSON.stringify(u),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_aggregate",serviceName:a.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return d=i.sent(),s.tunnelEndTime=+new Date,c?[2,n(26).EJSON.deserialize(d.data)]:(f=d.data,s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,p=n(26).EJSON,[2,{list:JSON.parse(f.list).map((function(e){return p.parse(e)}))}])}}))}))}({env:e.database.config.env,collectionName:r.collection.collectionName,stages:e.engine.AggregateSerializer.encodeStages(r._stages),instanceContext:e,timing:s,explain:t.explain})};var l=Object(a.hasAPICallback)(t),d=new Promise((function(e,n){return Object(i.__awaiter)(r,void 0,void 0,(function(){var r,a;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),[4,u()];case 1:return r=l.sent(),t.explain&&Object(A.isDevTools)()?[2,e(r)]:(e({list:r.list,errMsg:_(o)}),[3,4]);case 2:return a=l.sent(),n(Object(c.returnAsFinalCloudSDKError)(a,o)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},s),{apiEndTime:+new Date,apiName:"cloud.db."+o})),[7];case 4:return[2]}}))}))}));if(!l)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(o,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(o,t,e)}))},r}(lt)},ut=function(e,t){this._internalType=Se,this.stage=e,this.val=t},lt=function(){function e(e){this._internalType=Oe,this._stages=e}return e.prototype.pushStage=function(t,n){return new e(Object(i.__spread)(this._stages,[new ut(t,n)]))},e.prototype.addFields=function(e){return this.pushStage("addFields",e)},e.prototype.bucket=function(e){return this.pushStage("bucket",e)},e.prototype.bucketAuto=function(e){return this.pushStage("bucketAuto",e)},e.prototype.collStats=function(e){return this.pushStage("collStats",e)},e.prototype.count=function(e){return this.pushStage("count",e)},e.prototype.facet=function(e){return this.pushStage("facet",e)},e.prototype.geoNear=function(e){return this.pushStage("geoNear",e)},e.prototype.graphLookup=function(e){return this.pushStage("graphLookup",e)},e.prototype.group=function(e){return this.pushStage("group",e)},e.prototype.indexStats=function(){return this.pushStage("indexStats",{})},e.prototype.limit=function(e){return this.pushStage("limit",e)},e.prototype.lookup=function(e){return this.pushStage("lookup",e)},e.prototype.match=function(e){return this.pushStage("match",e)},e.prototype.out=function(e){return this.pushStage("out",e)},e.prototype.project=function(e){return this.pushStage("project",e)},e.prototype.redact=function(e){return this.pushStage("redact",e)},e.prototype.replaceRoot=function(e){return this.pushStage("replaceRoot",e)},e.prototype.sample=function(e){return this.pushStage("sample",e)},e.prototype.skip=function(e){return this.pushStage("skip",e)},e.prototype.sort=function(e){return this.pushStage("sort",e)},e.prototype.sortByCount=function(e){return this.pushStage("sortByCount",e)},e.prototype.unwind=function(e){return this.pushStage("unwind",e)},e.prototype.end=function(){},e}(),dt=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this,t)||this;return r._sealed=n,r}return Object(i.__extends)(t,e),t.prototype.pushStage=function(e,n){if(this._sealed)throw new Error("pushing new stage is not allowed after calling 'done()'");return new t(Object(i.__spread)(this._stages,[new ut(e,n)]))},t.prototype.done=function(){return new t(this._stages,!0)},t}(lt),ft=function(e){return e&&e._internalType===Oe},pt=function(e){return e&&e._internalType===Se},ht=new Set(["each","position","slice","sort"]),vt={eq:function(e){return new He(Ue.EQ,[e])},neq:function(e){return new He(Ue.NEQ,[e])},lt:function(e){return new He(Ue.LT,[e])},lte:function(e){return new He(Ue.LTE,[e])},gt:function(e){return new He(Ue.GT,[e])},gte:function(e){return new He(Ue.GTE,[e])},in:function(e){return new He(Ue.IN,e)},nin:function(e){return new He(Ue.NIN,e)},geoNear:function(e){return new He(Ue.GEO_NEAR,[e])},geoWithin:function(e){return new He(Ue.GEO_WITHIN,[e])},geoIntersects:function(e){return new He(Ue.GEO_INTERSECTS,[e])},and:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(ye.AND,n)},or:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(ye.OR,n)},nor:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Fe(ye.NOR,n)},not:function(e){return new Fe(ye.NOT,[e])},exists:function(e){return new He(Ue.EXISTS,[e])},mod:function(e,t){return new He(Ue.MOD,[e,t])},all:function(e){return new He(Ue.ALL,e)},elemMatch:function(e){return new He(Ue.ELEM_MATCH,[e])},size:function(e){return new He(Ue.SIZE,[e])},expr:function(e){return new He(Ue.EXPR,[e])},set:function(e){return new Ye(qe.SET,[e])},remove:function(){return new Ye(qe.REMOVE,[])},inc:function(e){return new Ye(qe.INC,[e])},mul:function(e){return new Ye(qe.MUL,[e])},min:function(e){return new Ye(qe.MIN,[e])},max:function(e){return new Ye(qe.MAX,[e])},rename:function(e){return new Ye(qe.RENAME,[e])},bit:function(e){return new Ye(qe.BIT,[e])},push:function(e){var t,n,r={};if(Object(s.isArray)(e))r.each=e;else if(Object(s.isObject)(e)&&Object(s.isArray)(e.each)){var o=Object.keys(e);if(1===o.length)r=e;else{var a=!1;try{for(var c=Object(i.__values)(o),u=c.next();!u.done;u=c.next()){var l=u.value;if(!ht.has(l)){a=!0;break}}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}r=a?[e]:e}}else r.each=[e];return new Ye(qe.PUSH,[r])},pop:function(){return new Ye(qe.POP,[])},shift:function(){return new Ye(qe.SHIFT,[])},unshift:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.isArray)(arguments[0])?arguments[0]:Array.from(arguments);return new Ye(qe.UNSHIFT,n)},addToSet:function(e){return new Ye(qe.ADD_TO_SET,[e])},pull:function(e){return new Ye(qe.PULL,[e])},pullAll:function(e){return new Ye(qe.PULL_ALL,[e])},project:{slice:function(e){return new Qe(Ze.SLICE,[e])}},aggregate:{pipeline:function(){return new dt([])},abs:function(e){return new Xe(Je.ABS,[e])},add:function(e){return new Xe(Je.ADD,[e])},addToSet:function(e){return new Xe(Je.ADDTOSET,[e])},allElementsTrue:function(e){return new Xe(Je.ALLELEMENTSTRUE,[e])},and:function(e){return new Xe(Je.AND,[e])},anyElementTrue:function(e){return new Xe(Je.ANYELEMENTTRUE,[e])},arrayElemAt:function(e){return new Xe(Je.ARRAYELEMAT,[e])},arrayToObject:function(e){return new Xe(Je.ARRAYTOOBJECT,[e])},avg:function(e){return new Xe(Je.AVG,[e])},ceil:function(e){return new Xe(Je.CEIL,[e])},cmp:function(e){return new Xe(Je.CMP,[e])},concat:function(e){return new Xe(Je.CONCAT,[e])},concatArrays:function(e){return new Xe(Je.CONCATARRAYS,[e])},cond:function(e){return new Xe(Je.COND,[e])},convert:function(e){return new Xe(Je.CONVERT,[e])},dateFromParts:function(e){return new Xe(Je.DATEFROMPARTS,[e])},dateToParts:function(e){return new Xe(Je.DATETOPARTS,[e])},dateFromString:function(e){return new Xe(Je.DATEFROMSTRING,[e])},dateToString:function(e){return new Xe(Je.DATETOSTRING,[e])},dayOfMonth:function(e){return new Xe(Je.DAYOFMONTH,[e])},dayOfWeek:function(e){return new Xe(Je.DAYOFWEEK,[e])},dayOfYear:function(e){return new Xe(Je.DAYOFYEAR,[e])},divide:function(e){return new Xe(Je.DIVIDE,[e])},eq:function(e){return new Xe(Je.EQ,[e])},exp:function(e){return new Xe(Je.EXP,[e])},filter:function(e){return new Xe(Je.FILTER,[e])},first:function(e){return new Xe(Je.FIRST,[e])},floor:function(e){return new Xe(Je.FLOOR,[e])},gt:function(e){return new Xe(Je.GT,[e])},gte:function(e){return new Xe(Je.GTE,[e])},hour:function(e){return new Xe(Je.HOUR,[e])},ifNull:function(e){return new Xe(Je.IFNULL,[e])},in:function(e){return new Xe(Je.IN,[e])},indexOfArray:function(e){return new Xe(Je.INDEXOFARRAY,[e])},indexOfBytes:function(e){return new Xe(Je.INDEXOFBYTES,[e])},indexOfCP:function(e){return new Xe(Je.INDEXOFCP,[e])},isArray:function(e){return new Xe(Je.ISARRAY,[e])},isoDayOfWeek:function(e){return new Xe(Je.ISODAYOFWEEK,[e])},isoWeek:function(e){return new Xe(Je.ISOWEEK,[e])},isoWeekYear:function(e){return new Xe(Je.ISOWEEKYEAR,[e])},last:function(e){return new Xe(Je.LAST,[e])},let:function(e){return new Xe(Je.LET,[e])},literal:function(e){return new Xe(Je.LITERAL,[e])},ln:function(e){return new Xe(Je.LN,[e])},log:function(e){return new Xe(Je.LOG,[e])},log10:function(e){return new Xe(Je.LOG10,[e])},lt:function(e){return new Xe(Je.LT,[e])},lte:function(e){return new Xe(Je.LTE,[e])},ltrim:function(e){return new Xe(Je.LTRIM,[e])},map:function(e){return new Xe(Je.MAP,[e])},max:function(e){return new Xe(Je.MAX,[e])},mergeObjects:function(e){return new Xe(Je.MERGEOBJECTS,[e])},meta:function(e){return new Xe(Je.META,[e])},min:function(e){return new Xe(Je.MIN,[e])},millisecond:function(e){return new Xe(Je.MILLISECOND,[e])},minute:function(e){return new Xe(Je.MINUTE,[e])},mod:function(e){return new Xe(Je.MOD,[e])},month:function(e){return new Xe(Je.MONTH,[e])},multiply:function(e){return new Xe(Je.MULTIPLY,[e])},neq:function(e){return new Xe(Je.NEQ,[e])},not:function(e){return new Xe(Je.NOT,[e])},objectToArray:function(e){return new Xe(Je.OBJECTTOARRAY,[e])},or:function(e){return new Xe(Je.OR,[e])},pow:function(e){return new Xe(Je.POW,[e])},push:function(e){return new Xe(Je.PUSH,[e])},range:function(e){return new Xe(Je.RANGE,[e])},reduce:function(e){return new Xe(Je.REDUCE,[e])},reverseArray:function(e){return new Xe(Je.REVERSEARRAY,[e])},rtrim:function(e){return new Xe(Je.RTRIM,[e])},second:function(e){return new Xe(Je.SECOND,[e])},setDifference:function(e){return new Xe(Je.SETDIFFERENCE,[e])},setEquals:function(e){return new Xe(Je.SETEQUALS,[e])},setIntersection:function(e){return new Xe(Je.SETINTERSECTION,[e])},setIsSubset:function(e){return new Xe(Je.SETISSUBSET,[e])},setUnion:function(e){return new Xe(Je.SETUNION,[e])},size:function(e){return new Xe(Je.SIZE,[e])},slice:function(e){return new Xe(Je.SLICE,[e])},split:function(e){return new Xe(Je.SPLIT,[e])},sqrt:function(e){return new Xe(Je.SQRT,[e])},stdDevPop:function(e){return new Xe(Je.STDDEVPOP,[e])},stdDevSamp:function(e){return new Xe(Je.STDDEVSAMP,[e])},strcasecmp:function(e){return new Xe(Je.STRCASECMP,[e])},strLenBytes:function(e){return new Xe(Je.STRLENBYTES,[e])},strLenCP:function(e){return new Xe(Je.STRLENCP,[e])},substr:function(e){return new Xe(Je.SUBSTR,[e])},substrBytes:function(e){return new Xe(Je.SUBSTRBYTES,[e])},substrCP:function(e){return new Xe(Je.SUBSTRCP,[e])},subtract:function(e){return new Xe(Je.SUBTRACT,[e])},sum:function(e){return new Xe(Je.SUM,[e])},switch:function(e){return new Xe(Je.SWITCH,[e])},toBool:function(e){return new Xe(Je.TOBOOL,[e])},toDate:function(e){return new Xe(Je.TODATE,[e])},toDecimal:function(e){return new Xe(Je.TODECIMAL,[e])},toDouble:function(e){return new Xe(Je.TODOUBLE,[e])},toInt:function(e){return new Xe(Je.TOINT,[e])},toLong:function(e){return new Xe(Je.TOLONG,[e])},toObjectId:function(e){return new Xe(Je.TOOBJECTID,[e])},toString:function(e){return new Xe(Je.TOSTRING,[e])},toLower:function(e){return new Xe(Je.TOLOWER,[e])},toUpper:function(e){return new Xe(Je.TOUPPER,[e])},trim:function(e){return new Xe(Je.TRIM,[e])},trunc:function(e){return new Xe(Je.TRUNC,[e])},type:function(e){return new Xe(Je.TYPE,[e])},week:function(e){return new Xe(Je.WEEK,[e])},year:function(e){return new Xe(Je.YEAR,[e])},zip:function(e){return new Xe(Je.ZIP,[e])}}};function gt(e){return new _t(e)}var _t=function(){function e(e){void 0===e&&(e={offset:0}),l(e,"object","serverDate.options"),this.options=e}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return Me},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{$date:this.options}},e}();function bt(e,t){return Wt(e)?Rt(e):new yt(e,t)}var yt=function(){function e(e,t){this._internalType=Ae,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}});var n=e,r=t;Object.defineProperties(this,{longitude:{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){if(l(e,"number","longitude"),e>180||e<-180)throw new c.CloudSDKError({errMsg:"longitude should be a number ranges from -180 to 180"})}},latitude:{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){if(l(e,"number","latitude"),e>90||e<-90)throw new c.CloudSDKError({errMsg:"latitude should be a number ranges from -90 to 90"})}}}),this.longitude=n,this.latitude=r}return e.prototype.toJSON=function(){return{type:"Point",coordinates:[(e=this).longitude,e.latitude]};var e},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function mt(e){return Ut(e)?Mt(e):new wt(e)}var wt=function(){function e(e){this._internalType=je,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}return e.prototype.toJSON=function(){return{type:"MultiPoint",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function Ot(e){return Vt(e)?Nt(e):new St(e)}var St=function(){function e(e){this._internalType=Pe,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.points=e}return e.prototype.toJSON=function(){return{type:"LineString",coordinates:this.points.map((function(e){return[e.longitude,e.latitude]}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function It(e){return Gt(e)?Lt(e):new Et(e)}var Et=function(){function e(e){this._internalType=xe,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}return e.prototype.toJSON=function(){return{type:"MultiLineString",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function Ct(e){return Ht(e)?Bt(e):new Tt(e)}var Tt=function(){function e(e){this._internalType=De,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.lines=e}return e.prototype.toJSON=function(){return{type:"Polygon",coordinates:this.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();function kt(e){return zt(e)?Ft(e):new At(e)}var At=function(){function e(e){this._internalType=Re,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}}),this.polygons=e}return e.prototype.toJSON=function(){return{type:"MultiPolygon",coordinates:this.polygons.map((function(e){return e.lines.map((function(e){return e.points.map((function(e){return[e.longitude,e.latitude]}))}))}))}},e.prototype.toString=function(){return JSON.stringify(this.toJSON())},e}();var Pt,Dt,jt,xt=undefined;function Rt(e){return bt(e.coordinates[0],e.coordinates[1])}function Mt(e){return mt(e.coordinates.map((function(e){return bt(e[0],e[1])})))}function Nt(e){return Ot(e.coordinates.map((function(e){return bt(e[0],e[1])})))}function Lt(e){return It(e.coordinates.map((function(e){return Ot(e.map((function(e){return bt(e[0],e[1])})))})))}function Bt(e){return Ct(e.coordinates.map((function(e){return Ot(e.map((function(e){return bt(e[0],e[1])})))})))}function Ft(e){return kt(e.coordinates.map((function(e){return Ct(e.map((function(e){return Ot(e.map((function(e){return bt(e[0],e[1])})))})))})))}function Wt(e){return Object(s.isObject)(e)&&qt(e.coordinates)}function Ut(e){return Object(s.isObject)(e)&&Yt(e.coordinates)}function Vt(e){return Object(s.isObject)(e)&&Kt(e.coordinates)}function Gt(e){return Object(s.isObject)(e)&&Jt(e.coordinates)}function Ht(e){return Object(s.isObject)(e)&&Xt(e.coordinates)}function zt(e){return Object(s.isObject)(e)&&(t=e.coordinates,Object(s.isArray)(t)&&t.every(Xt));var t}function qt(e){return Object(s.isArray)(e)&&Object(s.isNumber)(e[0])&&Object(s.isNumber)(e[1])}function Yt(e){return Object(s.isArray)(e)&&e.every(qt)}function Kt(e){return Yt(e)}function Jt(e){return Object(s.isArray)(e)&&e.every(Kt)}function Xt(e){return Jt(e)}function $t(e){return Zt(e,[e])}function Zt(e,t){if(!Object(s.isInternalObject)(e)){if(Object(s.isDate)(e))return{$date:+e};if(Object(s.isRegExp)(e))return{$regex:e.source,$options:e.flags};if(Object(s.isArray)(e))return e.map((function(e){if(t.indexOf(e)>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});return Zt(e,Object(i.__spread)(t,[e]))}));if(Object(s.isObject)(e)){var n=Object(i.__assign)({},e);for(var r in n){if(t.indexOf(n[r])>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});n[r]=Zt(n[r],Object(i.__spread)(t,[n[r]]))}return n}return e}switch(e._internalType){case Ae:case je:case Pe:case xe:case De:case Re:return e.toJSON();case Me:return{$date:e.options};case Ne:return{$regex:e.regexp,$options:e.options};default:return e.toJSON?e.toJSON():e}}function Qt(e,t,n,r){var o=Object(i.__assign)({},e);for(var a in e)if(!/^\$/.test(a)){var l=e[a];if(l&&Object(s.isObject)(l)&&!t(l)){if(r.indexOf(l)>-1)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_CIRCULAR_REFERENCE,errMsg:"Cannot convert circular structure to JSON"});var d=Qt(l,t,Object(i.__spread)(n,[a]),Object(i.__spread)(r,[l]));o[a]=d;var f=!1;for(var p in d)/^\$/.test(p)?f=!0:(o[a+"."+p]=d[p],delete o[a][p]);f||delete o[a]}}return o}function en(e){return Qt(e,rn,[],[e])}function tn(e){return Qt(e,(function(e){return!1}),[],[e])}function nn(e,t,n){for(var r in t[n]||delete e[n],t)e[r]?Object(s.isArray)(e[r])?e[r].push(t[r]):Object(s.isObject)(e[r])?Object(s.isObject)(t[r])?Object.assign(e[r],t[r]):(console.warn("unmergable condition, query is object but condition is "+Object(s.getType)(t)+", can only overwrite",t,n),e[r]=t[r]):(console.warn("to-merge query is of type "+Object(s.getType)(e)+", can only overwrite",e,t,n),e[r]=t[r]):e[r]=t[r]}function rn(e){return Object(s.isInternalObject)(e)||Object(s.isDate)(e)||Object(s.isRegExp)(e)}function on(e){return $t(e)}function an(e){return function(e){var t=Object(i.__assign)({},e);for(var n in t)switch(n){case"$date":switch(Object(s.getType)(t[n])){case"number":return new Date(t[n]);case"object":return gt(t[n])}break;case"type":switch(t.coordinates,t.type){case"Point":if(Wt(t))return Rt(t);break;case"MultiPoint":if(Ut(t))return Mt(t);break;case"LineString":if(Vt(t))return Nt(t);break;case"MultiLineString":if(Gt(t))return Lt(t);break;case"Polygon":if(Ht(t))return Bt(t);break;case"MultiPolygon":if(zt(t))return Ft(t)}}return e}(e)}function sn(e,t){return{limit:e._query.limit,offset:e._query.offset,order:cn(e._query.order||[]),projection:t.engine.ProjectionSerializer.encode(e._field)}}function cn(e){return e.map((function(e){return{field:e.fieldPath,direction:e.order===mi.DESC?rt.DESC:rt.ASC}}))}function un(e){var t=tn(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:delete t[n];return t}!function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED"}(Dt||(Dt={})),function(e){e.CONNECTION_START="connectionStart",e.CONNECTION_SUCCESS="connectionSuccess",e.CONNECTION_FAIL="connectionFail",e.DISCONNECT="disconnect"}(jt||(jt={}));var ln=((Pt={})[Dt.DISCONNECTED]={transitions:[{accept:jt.CONNECTION_START,to:Dt.CONNECTING}]},Pt[Dt.CONNECTING]={transitions:[{accept:jt.CONNECTION_SUCCESS,to:Dt.CONNECTED},{accept:jt.CONNECTION_FAIL,to:Dt.DISCONNECTED},{accept:jt.DISCONNECT,to:Dt.DISCONNECTED}]},Pt[Dt.CONNECTED]={transitions:[{accept:jt.DISCONNECT,to:Dt.DISCONNECTED},{accept:jt.CONNECTION_FAIL,to:Dt.DISCONNECTED}]},Pt),dn=n(34),fn=n(12),pn=n(15),hn=n(11);var vn=function(e){return"symbol"==typeof e||Object(hn.default)(e)&&"[object Symbol]"==Object(pn.default)(e)},gn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_n=/^\w*$/;var bn=function(e,t){if(Object(fn.default)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!vn(e))||(_n.test(e)||!gn.test(e)||null!=t&&e in Object(t))},yn=n(41);function mn(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=t?t.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=e.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(mn.Cache||yn.default),n}mn.Cache=yn.default;var wn=mn;var On=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sn=/\\(\\)?/g,In=function(e){var t=wn(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(On,(function(e,n,r,o){t.push(r?o.replace(Sn,"$1"):n||e)})),t})),En=n(16);var Cn=function(e,t){for(var n=-1,r=null==e?0:e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o},Tn=En.default?En.default.prototype:void 0,kn=Tn?Tn.toString:void 0;var An=function e(t){if("string"==typeof t)return t;if(Object(fn.default)(t))return Cn(t,e)+"";if(vn(t))return kn?kn.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var Pn=function(e){return null==e?"":An(e)};var Dn=function(e,t){return Object(fn.default)(e)?e:bn(e,t)?[e]:In(Pn(e))},jn=n(35),xn=n(10);var Rn=function(e){if("string"==typeof e||vn(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var Mn=function(e,t,n,r){if(!Object(xn.default)(e))return e;for(var o=-1,i=(t=Dn(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var c=Rn(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var l=s[c];void 0===(u=r?r(l,c,s):void 0)&&(u=Object(xn.default)(l)?l:Object(jn.default)(t[o+1])?[]:{})}Object(dn.default)(s,c,u),s=s[c]}return e};var Nn=function(e,t,n){return null==e?e:Mn(e,t,n)};var Ln=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var Bn=function(e,t){for(var n=0,r=(t=Dn(t,e)).length;null!=e&&n<r;)e=e[Rn(t[n++])];return n&&n==r?e:void 0};var Fn=function(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i};var Wn=function(e,t){return t.length<2?e:Bn(e,Fn(t,0,-1))};var Un=function(e,t){return t=Dn(t,e),null==(e=Wn(e,t))||delete e[Rn(Ln(t))]};var Vn=function(e,t){return null==e||Un(e,t)},Gn=n(50);var Hn=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},zn=n(17),qn=n(53),Yn=n(31),Kn=n(48),Jn=Object(Kn.default)(Object.keys,Object),Xn=Object.prototype.hasOwnProperty;var $n=function(e){if(!Object(Yn.default)(e))return Jn(e);var t=[];for(var n in Object(e))Xn.call(e,n)&&"constructor"!=n&&t.push(n);return t},Zn=n(23);var Qn=function(e){return Object(Zn.default)(e)?Object(qn.default)(e):$n(e)};var er=function(e,t){return e&&Object(zn.default)(t,Qn(t),e)},tr=n(18);var nr=function(e,t){return e&&Object(zn.default)(t,Object(tr.default)(t),e)},rr=n(45),or=n(47);var ir=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,i=[];++n<r;){var a=e[n];t(a,n,e)&&(i[o++]=a)}return i};var ar=function(){return[]},sr=Object.prototype.propertyIsEnumerable,cr=Object.getOwnPropertySymbols,ur=cr?function(e){return null==e?[]:(e=Object(e),ir(cr(e),(function(t){return sr.call(e,t)})))}:ar;var lr=function(e,t){return Object(zn.default)(e,ur(e),t)};var dr=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e},fr=n(30),pr=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)dr(t,ur(e)),e=Object(fr.default)(e);return t}:ar;var hr=function(e,t){return Object(zn.default)(e,pr(e),t)};var vr=function(e,t,n){var r=t(e);return Object(fn.default)(e)?r:dr(r,n(e))};var gr=function(e){return vr(e,Qn,ur)};var _r=function(e){return vr(e,tr.default,pr)},br=n(13),yr=n(9),mr=Object(br.default)(yr.default,"DataView"),wr=n(25),Or=Object(br.default)(yr.default,"Promise"),Sr=Object(br.default)(yr.default,"Set"),Ir=Object(br.default)(yr.default,"WeakMap"),Er=n(21),Cr="[object Map]",Tr="[object Promise]",kr="[object Set]",Ar="[object WeakMap]",Pr="[object DataView]",Dr=Object(Er.default)(mr),jr=Object(Er.default)(wr.default),xr=Object(Er.default)(Or),Rr=Object(Er.default)(Sr),Mr=Object(Er.default)(Ir),Nr=pn.default;(mr&&Nr(new mr(new ArrayBuffer(1)))!=Pr||wr.default&&Nr(new wr.default)!=Cr||Or&&Nr(Or.resolve())!=Tr||Sr&&Nr(new Sr)!=kr||Ir&&Nr(new Ir)!=Ar)&&(Nr=function(e){var t=Object(pn.default)(e),n="[object Object]"==t?e.constructor:void 0,r=n?Object(Er.default)(n):"";if(r)switch(r){case Dr:return Pr;case jr:return Cr;case xr:return Tr;case Rr:return kr;case Mr:return Ar}return t});var Lr=Nr,Br=Object.prototype.hasOwnProperty;var Fr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Br.call(e,"index")&&(n.index=e.index,n.input=e.input),n},Wr=n(36);var Ur=function(e,t){var n=t?Object(Wr.default)(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Vr=/\w*$/;var Gr=function(e){var t=new e.constructor(e.source,Vr.exec(e));return t.lastIndex=e.lastIndex,t},Hr=En.default?En.default.prototype:void 0,zr=Hr?Hr.valueOf:void 0;var qr=function(e){return zr?Object(zr.call(e)):{}},Yr=n(46);var Kr=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Object(Wr.default)(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Ur(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Object(Yr.default)(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Gr(e);case"[object Set]":return new r;case"[object Symbol]":return qr(e)}},Jr=n(51),Xr=n(32);var $r=function(e){return Object(hn.default)(e)&&"[object Map]"==Lr(e)},Zr=n(33),Qr=n(20),eo=Qr.default&&Qr.default.isMap,to=eo?Object(Zr.default)(eo):$r;var no=function(e){return Object(hn.default)(e)&&"[object Set]"==Lr(e)},ro=Qr.default&&Qr.default.isSet,oo=ro?Object(Zr.default)(ro):no,io="[object Arguments]",ao="[object Function]",so="[object Object]",co={};co[io]=co["[object Array]"]=co["[object ArrayBuffer]"]=co["[object DataView]"]=co["[object Boolean]"]=co["[object Date]"]=co["[object Float32Array]"]=co["[object Float64Array]"]=co["[object Int8Array]"]=co["[object Int16Array]"]=co["[object Int32Array]"]=co["[object Map]"]=co["[object Number]"]=co["[object Object]"]=co["[object RegExp]"]=co["[object Set]"]=co["[object String]"]=co["[object Symbol]"]=co["[object Uint8Array]"]=co["[object Uint8ClampedArray]"]=co["[object Uint16Array]"]=co["[object Uint32Array]"]=!0,co["[object Error]"]=co[ao]=co["[object WeakMap]"]=!1;var uo=function e(t,n,r,o,i,a){var s,c=1&n,u=2&n,l=4&n;if(r&&(s=i?r(t,o,i,a):r(t)),void 0!==s)return s;if(!Object(xn.default)(t))return t;var d=Object(fn.default)(t);if(d){if(s=Fr(t),!c)return Object(or.default)(t,s)}else{var f=Lr(t),p=f==ao||"[object GeneratorFunction]"==f;if(Object(Xr.default)(t))return Object(rr.default)(t,c);if(f==so||f==io||p&&!i){if(s=u||p?{}:Object(Jr.default)(t),!c)return u?hr(t,nr(s,t)):lr(t,er(s,t))}else{if(!co[f])return i?t:{};s=Kr(t,f,c)}}a||(a=new Gn.default);var h=a.get(t);if(h)return h;a.set(t,s),oo(t)?t.forEach((function(o){s.add(e(o,n,r,o,t,a))})):to(t)&&t.forEach((function(o,i){s.set(i,e(o,n,r,i,t,a))}));var v=l?u?_r:gr:u?tr.default:Qn,g=d?void 0:v(t);return Hn(g||t,(function(o,i){g&&(o=t[i=o]),Object(dn.default)(s,i,e(o,n,r,i,t,a))})),s};var lo,fo,po,ho=function(e){return uo(e,5)};!function(e){e.UNINIT="UNINIT",e.CLOSED="CLOSED",e.INIT_LOGGING_IN="INIT_LOGGING_IN",e.INIT_LOGGED_IN="INIT_LOGGED_IN",e.INIT_LOGIN_FAIL="INIT_LOGIN_FAIL",e.INIT_WATCH_PENDING="INIT_WATCH_PENDING",e.INIT_WATCH_FAIL="INIT_WATCH_FAIL",e.INIT_WATCH_SUCCESS="INIT_WATCH_SUCCESS",e.PAUSED="PAUSED",e.ABNORMAL_WATCH_STATUS="ABNORMAL_WATCH_STATUS",e.REBUILD_LOGGING_IN="REBUILD_LOGGING_IN",e.REBUILD_LOGGED_IN="REBUILD_LOGGED_IN",e.REBUILD_LOGIN_FAIL="REBUILD_LOGIN_FAIL",e.REBUILD_WATCH_PENDING="REBUILD_WATCH_PENDING",e.REBUILD_WATCH_FAIL="REBUILD_WATCH_FAIL",e.REBUILD_WATCH_SUCCESS="REBUILD_WATCH_SUCCESS"}(fo||(fo={})),function(e){e.CLOSE="close",e.LOGIN_START="loginStart",e.LOGIN_FAIL="loginFail",e.LOGIN_SUCCESS="loginSuccess",e.INIT_WATCH_START="initWatchStart",e.INIT_WATCH_FAIL="initWatchFail",e.INIT_WATCH_SUCCESS="initWatchSuccess",e.WS_DISCONNECTED="wsDisconnected",e.WS_CONNECTED="wsConnected",e.REBUILD_WATCH_START="rebuildWatchStart",e.REBUILD_WATCH_FAIL="rebuildWatchFail",e.REBUILD_WATCH_SUCCESS="rebuildWatchSuccess",e.NEED_REBUILD_WATCH="needRebuildWatch"}(po||(po={}));var vo={accept:po.CLOSE,to:fo.CLOSED},go={accept:po.WS_DISCONNECTED,to:fo.CLOSED},_o={accept:po.WS_DISCONNECTED,to:fo.PAUSED},bo=((lo={})[fo.UNINIT]={transitions:[{accept:po.LOGIN_START,to:fo.INIT_LOGGING_IN},go,vo]},lo[fo.CLOSED]={transitions:[vo]},lo[fo.INIT_LOGGING_IN]={transitions:[{accept:po.LOGIN_FAIL,to:fo.INIT_LOGIN_FAIL},{accept:po.LOGIN_SUCCESS,to:fo.INIT_LOGGED_IN},go,vo]},lo[fo.INIT_LOGIN_FAIL]={transitions:[{accept:po.LOGIN_START,to:fo.INIT_LOGGING_IN},go,vo]},lo[fo.INIT_LOGGED_IN]={transitions:[{accept:po.INIT_WATCH_START,to:fo.INIT_WATCH_PENDING},go,vo]},lo[fo.INIT_WATCH_PENDING]={transitions:[{accept:po.INIT_WATCH_FAIL,to:fo.INIT_WATCH_FAIL},{accept:po.INIT_WATCH_SUCCESS,to:fo.INIT_WATCH_SUCCESS},go,vo]},lo[fo.INIT_WATCH_FAIL]={transitions:[{accept:po.LOGIN_START,to:fo.INIT_LOGGING_IN},go,vo]},lo[fo.INIT_WATCH_SUCCESS]={transitions:[{accept:po.WS_DISCONNECTED,to:fo.PAUSED},{accept:po.NEED_REBUILD_WATCH,to:fo.ABNORMAL_WATCH_STATUS},_o,vo]},lo[fo.PAUSED]={transitions:[{accept:po.LOGIN_START,to:fo.REBUILD_LOGGING_IN},_o,vo]},lo[fo.ABNORMAL_WATCH_STATUS]={transitions:[{accept:po.LOGIN_START,to:fo.REBUILD_LOGGING_IN},_o,vo]},lo[fo.REBUILD_LOGGING_IN]={transitions:[{accept:po.LOGIN_FAIL,to:fo.REBUILD_LOGIN_FAIL},{accept:po.LOGIN_SUCCESS,to:fo.REBUILD_LOGGED_IN},_o,vo]},lo[fo.REBUILD_LOGIN_FAIL]={transitions:[{accept:po.LOGIN_START,to:fo.REBUILD_LOGGING_IN},_o,vo]},lo[fo.REBUILD_LOGGED_IN]={transitions:[{accept:po.REBUILD_WATCH_START,to:fo.REBUILD_WATCH_PENDING},_o,vo]},lo[fo.REBUILD_WATCH_PENDING]={transitions:[{accept:po.REBUILD_WATCH_FAIL,to:fo.REBUILD_WATCH_FAIL},{accept:po.REBUILD_WATCH_SUCCESS,to:fo.REBUILD_WATCH_SUCCESS},_o,vo]},lo[fo.REBUILD_WATCH_FAIL]={transitions:[{accept:po.LOGIN_START,to:fo.REBUILD_LOGGING_IN},_o,vo]},lo[fo.REBUILD_WATCH_SUCCESS]={transitions:[{accept:po.NEED_REBUILD_WATCH,to:fo.ABNORMAL_WATCH_STATUS},_o,vo]},lo),yo=function(){function e(e){for(var t in this.listeners=new Set,this.currentState=e.initialState,this.states=new Map,e.states)this.states.set(t,{name:t,transitions:new Map(e.states[t].transitions.map((function(e){return[e.accept,e.to]})))});this.history={options:{enable:!1,limit:100},transitions:[]},e.history&&("boolean"==typeof e.history?e.history&&(this.history.options.enable=!0):Boolean(e.history.enable)&&(void 0===e.history.limit||null===e.history.limit?this.history.options={enable:!0,limit:100}:e.history.limit>0&&(this.history.options={enable:!0,limit:e.history.limit}))),this.history.options.enable&&this.history.transitions.push({state:this.currentState})}return e.prototype.transition=function(e,t){var n=this;if(t&&(t instanceof Set?!t.has(this.currentState):t!==this.currentState))throw new mo("current state ("+this.currentState+") != expected from state ("+(t instanceof Set?JSON.stringify(Object(i.__spread)(t)):t)+")","unexpectedFromState");var r="string"==typeof e?{type:e}:e,o=this.states.get(this.currentState),a=o.transitions.get(r.type);if(!a)throw new mo("current state ("+this.currentState+') does not accept "'+r.type+'"',"unexpectedInput");this.currentState=a,this.history.options.enable&&(this.history.transitions.push({event:r.type,state:this.currentState}),this.history.transitions.length>this.history.options.limit&&(this.history.transitions.length===this.history.options.limit+1?this.history.transitions.shift():this.history.transitions.splice(0,this.history.transitions.length-this.history.options.limit))),this.listeners.forEach((function(e){try{e({event:r,from:o.name,to:n.currentState})}catch(e){console.error("FSM listener exec error: ",e)}}))},e.prototype.canAccept=function(e){return this.states.get(this.currentState).transitions.has(e)},e.prototype.subscribe=function(e){this.listeners.add(e)},e.prototype.unsubscribe=function(e){this.listeners.delete(e)},e.prototype.getHistoryRepresentation=function(e){return this.history.options.enable?"states: "+(e.limit?this.history.transitions.slice(-e.limit):this.history.transitions).map((function(e){var t=e.state,n=e.event;return(n?"-("+n+")->":"")+t})).join(""):""},e}(),mo=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.type="transition",o.generic=!0,o.subtype=n,o.payload=r,o}return Object(i.__extends)(t,e),t}(Error);function wo(e){return void 0===e&&(e=""),(e?e+"_":"")+ +new Date+"_"+Math.random()}var Oo=n(14),So=1128,Io=1,Eo=2,Co=3,To=4,ko=5,Ao=6,Po=7,Do=8,jo=9,xo=10,Ro=11,Mo=12,No=13,Lo=14,Bo=15,Fo=16,Wo=17,Uo=18,Vo=30,Go=31,Ho=32,zo=33,qo=34,Yo=35,Ko=36,Jo=37,Xo=38,$o=39,Zo=40,Qo=50,ei=51,ti=52,ni=53,ri=54,oi=55,ii=56,ai=57,si=58,ci=59,ui=60,li=function(e){this.close=e.close,this.onChange=e.onChange,this.onError=e.onError,e.debug&&Object.defineProperty(this,"virtualClient",{get:function(){return e.virtualClient}})},di=function(e){var t=e.id,n=e.docChanges,r=e.docs,o=e.type,i=(e.EJSON,e.requestId),a=e.watchId;Object.defineProperties(this,{id:{get:function(){return t},enumerable:!0},docChanges:{get:function(){return n},enumerable:!0},docs:{get:function(){return r},enumerable:!0},type:{get:function(){return o},enumerable:!0}}),this.requestId=i,this.watchId=a},fi=function(e){function t(t){var n=e.call(this,"Watch Error "+JSON.stringify(t.msgData)+" (requestid: "+t.requestId+")")||this;return n.isRealtimeErrorMessageError=!0,n.payload=t,n}return Object(i.__extends)(t,e),t}(Error),pi=function(e){return e&&e.isRealtimeErrorMessageError},hi=new Set([fo.REBUILD_LOGGING_IN,fo.INIT_LOGGING_IN]),vi=function(e){0},gi=function(){function e(e){var t=this;this.closeWatchInvoked=!1,this.userOnErrorInvoked=!1,this._loginInvalidated=!1,this._errors=[],this._snapshotHistory=[],this._login=function(e){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:this._fsm.transition(po.LOGIN_START),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.login(this.envId,e||this._loginInvalidated,this.timing)];case 2:return t=r.sent(),this.envId||(this.envId=t.envId),this._fsm.transition(po.LOGIN_SUCCESS,hi),this._loginInvalidated=!1,[3,4];case 3:n=r.sent(),this._errors.push(n),this._loginInvalidated=!0;try{this._fsm.transition(po.LOGIN_FAIL,hi)}catch(e){console.warn("[realtime]",e)}return[3,4];case 4:return[2]}}))}))},this.initWatch=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t,n,r,o,a,s,c,u,l,d,f,p,h,v=this;return Object(i.__generator)(this,(function(_){switch(_.label){case 0:e=Date.now(),t=wo(),_.label=1;case 1:return _.trys.push([1,3,,4]),this._fsm.transition(po.INIT_WATCH_START,fo.INIT_LOGGED_IN),n=this.envId,r={watchId:this.watchId,requestId:t,msgType:"INIT_WATCH",msgData:{envId:n,collName:this.collectionName,query:this.query,limit:this.limit,orderBy:this.orderBy,queryType:this.queryType}},[4,this.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4})];case 2:if(o=_.sent(),this.assertAsyncTaskStatus(),a=o.msgData,s=a.events,c=a.currEvent,this.sessionInfo={queryID:o.msgData.queryID,currentEventId:c-1,currentDocs:[],currentEventTS:Date.now()},s.length>0){try{for(u=Object(i.__values)(s),l=u.next();!l.done;l=u.next())l.value.ID=c}catch(e){p={error:e}}finally{try{l&&!l.done&&(h=u.return)&&h.call(u)}finally{if(p)throw p.error}}this.handleServerEvents(o)}else this.sessionInfo.currentEventId=c,d=new di({id:c,docChanges:[],docs:[],type:"init",EJSON:this.getEJSON(),requestId:o.requestId,watchId:this.watchId}),Oo.default.surroundThirdByTryCatch((function(){return v.listener.onChange(d)}))(),this.scheduleSendACK(),this.debug&&this._snapshotHistory.push(d);return this.onWatchStart(this,this.sessionInfo.queryID),this._availableRetries.INIT_WATCH=2,this._wsDisconnectionTS=void 0,Object(g.reportIDKey)(So,ko,!0),Object(g.reportAPISpeed)({apiName:"_realtime.initWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),this._fsm.transition(po.INIT_WATCH_SUCCESS),[3,4];case 3:return f=_.sent(),Object(g.reportAPISpeed)({apiName:"_realtime.initWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),this.handleWatchEstablishmentError(f,{operationName:"INIT_WATCH",requestId:t}),[3,4];case 4:return[2]}}))}))},this.rebuildWatch=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t,n,r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:e=Date.now(),t=wo(),i.label=1;case 1:if(i.trys.push([1,4,,5]),this._fsm.transition(po.REBUILD_WATCH_START,fo.REBUILD_LOGGED_IN),n=this.envId,!this.sessionInfo)throw new Error("can not rebuildWatch without a successful initWatch (lack of sessionInfo)");if(this._wsDisconnectionTS&&Date.now()-this._wsDisconnectionTS>.9*this.getServiceContext().appConfig.realtimeQueryEventCacheTimeout)throw new c.TimeoutError("query event cache timeout, ws has been disconnected for too long, PLEASE RECONNECT manually",{subtype:"queryEventCacheClientTimeout",retryable:!1});return r={watchId:this.watchId,requestId:t,msgType:"REBUILD_WATCH",msgData:{envId:n,collName:this.collectionName,queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:r,waitResponse:!0,skipOnMessage:!0,timeout:1e4})];case 2:return o=i.sent(),this.assertAsyncTaskStatus(),[4,this.handleServerEvents(o)];case 3:return i.sent(),this._availableRetries.REBUILD_WATCH=2,this._wsDisconnectionTS=void 0,Object(g.reportIDKey)(So,Po,!0),Object(g.reportAPISpeed)({apiName:"_realtime.rebuildWatch(success)",apiStartTime:e,apiEndTime:Date.now()}),this._fsm.transition(po.REBUILD_WATCH_SUCCESS),[3,5];case 4:return a=i.sent(),Object(g.reportAPISpeed)({apiName:"_realtime.rebuildWatch(fail)",apiStartTime:e,apiEndTime:Date.now()}),this.handleWatchEstablishmentError(a,{operationName:"REBUILD_WATCH",requestId:t}),[3,5];case 5:return[2]}}))}))},this.handleWatchEstablishmentError=function(e,n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,r,o=this;return Object(i.__generator)(this,(function(i){return t="INIT_WATCH"===n.operationName,r=function(r){var i=(r||e)+" ("+(t?"initWatch":"rebuildWatch")+" requestId "+n.requestId+")";if(o.closeWithError(new c.CloudSDKError({errCode:t?u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:i})),Object(g.reportIDKey)(So,t?Ao:Do,!0),!pi(e)){if(Object(c.isTimeoutError)(e)){switch(e.payload.subtype){case"totalConnectionTimeout":Object(g.reportIDKey)(So,t?ri:oi,!0);break;case"queryEventCacheClientTimeout":t||Object(g.reportIDKey)(So,ii,!0)}return}return Object(c.isCancelledError)(e)?void Object(g.reportIDKey)(So,t?ai:si,!0):void Object(g.reportIDKey)(So,t?ci:ui,!0)}switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":Object(g.reportIDKey)(So,t?Qo:ei,!0);break;default:Object(g.reportIDKey)(So,t?ti:ni,!0)}},this._errors.push(e),this.handleCommonError(e,{onSignError:function(){o._loginInvalidated=!0,o._fsm.transition(o.initialized?po.REBUILD_WATCH_FAIL:po.INIT_WATCH_FAIL)},onTimeoutError:function(e){e.payload&&!e.payload.retryable?r(e):o._fsm.transition(o.initialized?po.REBUILD_WATCH_FAIL:po.INIT_WATCH_FAIL)},onNotRetryableError:r,onCancelledError:function(e){o._fsm.transition(o.initialized?po.REBUILD_WATCH_FAIL:po.INIT_WATCH_FAIL)},onUnknownError:function(){o._fsm.transition(o.initialized?po.REBUILD_WATCH_FAIL:po.INIT_WATCH_FAIL)}}),[2]}))}))},this.closeWatch=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:if(this.closeWatchInvoked=!0,e=this.sessionInfo?this.sessionInfo.queryID:"",this._fsm.currentState===fo.CLOSED)return[2];n.label=1;case 1:return n.trys.push([1,3,4,5]),this._fsm.transition(po.CLOSE),[4,this.sendCloseWatch()];case 2:return n.sent(),[3,5];case 3:return t=n.sent(),console.warn("[realtime] non-fatal error while closing watch: "+t),[3,5];case 4:return this.sessionInfo=void 0,this.onWatchClose(this,e),this._cleanup(),[7];case 5:return[2]}}))}))},this.sendCloseWatch=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return e={watchId:this.watchId,requestId:wo(),msgType:"CLOSE_WATCH",msgData:null},[4,this.send({msg:e})];case 1:return t.sent(),[2]}}))}))},this.scheduleSendACK=function(){t.clearACKSchedule(),t._ackTimeoutId=setTimeout((function(){t._waitExpectedTimeoutId?t.scheduleSendACK():t.sendACK()}),1e4)},this.clearACKSchedule=function(){t._ackTimeoutId&&clearTimeout(t._ackTimeoutId)},this.sendACK=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e,t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),this._fsm.currentState!==fo.INIT_WATCH_SUCCESS&&this._fsm.currentState!==fo.REBUILD_WATCH_SUCCESS?(this.scheduleSendACK(),[2]):this.sessionInfo?(e={watchId:this.watchId,requestId:wo(),msgType:"CHECK_LAST",msgData:{queryID:this.sessionInfo.queryID,eventID:this.sessionInfo.currentEventId}},[4,this.send({msg:e})]):(console.warn("[realtime listener] can not send ack without a successful initWatch (lack of sessionInfo)"),[2]);case 1:return r.sent(),this.scheduleSendACK(),[3,3];case 2:if(t=r.sent(),pi(t))switch((n=t.payload).msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return this._loginInvalidated=!0,this._fsm.currentState!==fo.INIT_WATCH_SUCCESS&&this._fsm.currentState!==fo.REBUILD_WATCH_SUCCESS||this._fsm.transition(po.NEED_REBUILD_WATCH),[2];case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":return this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:n.msgData.code})),[2]}return this._availableRetries.CHECK_LAST&&this._availableRetries.CHECK_LAST>0?(this._availableRetries.CHECK_LAST--,this.scheduleSendACK()):this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_CHECK_LAST_FAIL,errMsg:t})),[3,3];case 3:return[2]}}))}))},this.handleCommonError=function(e,t){if(pi(e)){switch(e.payload.msgData.code){case"CHECK_LOGIN_FAILED":case"SIGN_EXPIRED_ERROR":case"SIGN_INVALID_ERROR":case"SIGN_PARAM_INVALID":return void t.onSignError(e);case"QUERYID_INVALID_ERROR":case"SYS_ERR":case"INVALIID_ENV":case"COLLECTION_PERMISSION_DENIED":default:return void t.onNotRetryableError(e)}}else{if(Object(c.isTimeoutError)(e))return void t.onTimeoutError(e);if(Object(c.isCancelledError)(e))return void t.onCancelledError(e)}t.onUnknownError(e)},this.watchId="watchid_"+ +new Date+"_"+Math.random(),this._parentFSM=e.parentFSM,this.envId=e.envId,this.collectionName=e.collectionName,this.query=e.query,this.limit=e.limit,this.orderBy=e.orderBy,this.queryType=e.queryType,this.send=e.send,this.login=e.login,this.isWSConnected=e.isWSConnected,this.getWaitExpectedTimeoutLength=e.getWaitExpectedTimeoutLength,this.getEJSON=e.getEJSON,this.getServiceContext=e.getServiceContext,this.onWatchStart=e.onWatchStart,this.onWatchClose=e.onWatchClose,this.timing=e.timing,this.debug=e.debug,this._availableRetries={INIT_WATCH:2,REBUILD_WATCH:2,CHECK_LAST:2},this._fsm=new yo({initialState:fo.UNINIT,states:bo,history:!0}),this._subscribeParentFSMEvents(),this._subscribeFSMEvents(),this.listener=new li({close:this.closeWatch,onChange:e.onChange,onError:e.onError,debug:this.debug,virtualClient:this}),this._parentFSM.currentState===Dt.CONNECTED&&this._login(),e.debug&&(this.wsclient=e.wsclient)}return Object.defineProperty(e.prototype,"initialized",{get:function(){return Boolean(this.sessionInfo)},enumerable:!1,configurable:!0}),e.prototype._cleanup=function(){this._parentFSM.unsubscribe(this._parentFSMListener)},e.prototype._subscribeParentFSMEvents=function(){var e=this;this._parentFSMListener=function(t){var n=t.event;t.from,t.to;if(e._fsm.currentState!==fo.CLOSED)if(n.type===jt.DISCONNECT||n.type===jt.CONNECTION_FAIL)switch(e._fsm.currentState){case fo.UNINIT:case fo.INIT_LOGGING_IN:case fo.INIT_LOGIN_FAIL:case fo.INIT_LOGGED_IN:case fo.INIT_WATCH_PENDING:case fo.INIT_WATCH_FAIL:e.closeWithError(n.error||new Error("websocket connection fail"),!1);break;default:n.type===jt.DISCONNECT?(e._wsDisconnectionTS||(e._wsDisconnectionTS=Date.now()),e._fsm.transition(po.WS_DISCONNECTED)):e.closeWithError(n.error||new Error("websocket connection fail"),!1)}else if(n.type===jt.CONNECTION_SUCCESS)switch(e._fsm.currentState){case fo.UNINIT:case fo.PAUSED:e._login();break;case fo.CLOSED:break;default:console.warn("[realtime] current state should not be "+e._fsm.currentState+" (parent event "+n+")")}},this._parentFSM.subscribe(this._parentFSMListener)},e.prototype._subscribeFSMEvents=function(){var e=this;this._FSMListener=function(t){var n=t.event,r=t.from;t.to;switch(n.type){case po.WS_CONNECTED:e._login().catch(vi);break;case po.LOGIN_SUCCESS:r===fo.INIT_LOGGING_IN?e.initWatch().catch(vi):r===fo.REBUILD_LOGGING_IN?e.rebuildWatch().catch(vi):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event "+n.type+" from "+r}));break;case po.LOGIN_FAIL:r===fo.INIT_LOGGING_IN?e.useRetryTicket("INIT_WATCH")?e._login().catch(vi):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"login fail "+e._errors[e._errors.length-1]})):r===fo.REBUILD_LOGGING_IN?e.useRetryTicket("REBUILD_WATCH")?e._login().catch(vi):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"login fail "+e._errors[e._errors.length-1]})):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:"unexpected state: event "+n.type+" from "+r}));break;case po.INIT_WATCH_SUCCESS:e._availableRetries.INIT_WATCH=2,e._errors=[];break;case po.INIT_WATCH_FAIL:e.useRetryTicket("INIT_WATCH")?e._login().catch(vi):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WATCH_FAIL,errMsg:"init watch fail "+e._errors[e._errors.length-1]}));break;case po.REBUILD_WATCH_SUCCESS:e._availableRetries.REBUILD_WATCH=2,e._errors=[];break;case po.REBUILD_WATCH_FAIL:e.useRetryTicket("REBUILD_WATCH")?e._login().catch(vi):e.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_REBUILD_WATCH_FAIL,errMsg:"init watch fail "+e._errors[e._errors.length-1]}));break;case po.NEED_REBUILD_WATCH:e._login().catch(vi)}},this._fsm.subscribe(this._FSMListener)},e.prototype.useRetryTicket=function(e){return!!(this._availableRetries[e]&&this._availableRetries[e]>0)&&(this._availableRetries[e]--,!0)},e.prototype.assertAsyncTaskStatus=function(){if(this.closeWatchInvoked)throw new c.CancelledError("closeWatch",{subtype:"closeWatch"});switch(this._fsm.currentState){case fo.PAUSED:throw new c.CancelledError("pause",{subtype:"pause"});case fo.CLOSED:throw new c.CancelledError("close",{subtype:"close"})}},e.prototype.handleServerEvents=function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.scheduleSendACK(),[4,this._handleServerEvents(e)];case 1:return n.sent(),this._postHandleServerEventsValidityCheck(e),[3,3];case 2:throw t=n.sent(),Object(g.reportIDKey)(So,zo,!0),t;case 3:return[2]}}))}))},e.prototype._handleServerEvents=function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,r,o,a,s,l,d,f,p,h=this;return Object(i.__generator)(this,(function(v){if(t=e.requestId,!(n=e.msgData.events).length||!this.sessionInfo)return[2];r=this.sessionInfo;try{o=n.map(_i)}catch(e){return this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECEIVE_INVALID_SERVER_DATA,errMsg:e})),[2]}for(a=Object(i.__spread)(r.currentDocs),s=!1,l=function(n,l){var f,p,v=o[n];if(r.currentEventId>=v.id)return!o[n-1]||v.id>o[n-1].id?Object(g.reportIDKey)(So,qo,!0):(console.error("[realtime listener] server non-fatal error: events out of order (the latter event's id is smaller than that of the former) (requestId "+t+")"),Object(g.reportIDKey)(So,Yo,!0)),"continue";if(r.currentEventId===v.id-1){switch(v.dataType){case"update":if(!v.doc)switch(v.queueType){case"update":case"dequeue":if(O=a.find((function(e){return e._id===v.docId}))){var _=ho(O);if(v.updatedFields)for(var b in v.updatedFields)Nn(_,b,v.updatedFields[b]);if(v.removedFields)try{for(var y=(f=void 0,Object(i.__values)(v.removedFields)),m=y.next();!m.done;m=y.next()){b=m.value;Vn(_,b)}}catch(e){f={error:e}}finally{try{m&&!m.done&&(p=y.return)&&p.call(y)}finally{if(f)throw f.error}}v.doc=_}else console.error("[realtime listener] internal non-fatal server error: unexpected update dataType event where no doc is associated."),Object(g.reportIDKey)(So,Ko,!0);break;case"enqueue":var w=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="update" and queueType="enqueue" (requestId '+e.requestId+")"});throw d.closeWithError(w),w}break;case"limit":if(!v.doc)switch(v.queueType){case"dequeue":var O;(O=a.find((function(e){return e._id===v.docId})))?v.doc=O:console.error("[realtime listener] internal non-fatal server error: unexpected limit dataType dequeue queueType event where no doc is associated.")}break;case"replace":if(!v.doc){w=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:'HandleServerEvents: full doc is not provided with dataType="replace" (requestId '+e.requestId+")"});throw d.closeWithError(w),w}break;case"remove":(_=a.find((function(e){return e._id===v.docId})))?v.doc=_:(console.error("[realtime listener] internal non-fatal server error: unexpected remove event where no doc is associated."),Object(g.reportIDKey)(So,Jo,!0))}switch(v.queueType){case"init":s?a.push(v.doc):(s=!0,a=[v.doc]);break;case"enqueue":a.push(v.doc);break;case"dequeue":(S=a.findIndex((function(e){return e._id===v.docId})))>-1?a.splice(S,1):(console.error("[realtime listener] internal non-fatal server error: unexpected dequeue event where no doc is associated."),Object(g.reportIDKey)(So,Xo,!0));break;case"update":var S;(S=a.findIndex((function(e){return e._id===v.docId})))>-1?a[S]=v.doc:(console.error("[realtime listener] internal non-fatal server error: unexpected queueType update event where no doc is associated."),Object(g.reportIDKey)(So,$o,!0))}if(n===l-1||o[n+1]&&o[n+1].id!==v.id){var I=Object(i.__spread)(a),E=o.slice(0,n+1).filter((function(e){return e.id===v.id}));d.sessionInfo.currentEventId=v.id,d.sessionInfo.currentDocs=a,d.sessionInfo.currentEventTS=Date.now();var C=new di({id:v.id,type:"init"===E[0].queueType?"init":void 0,docChanges:d.getEJSON().deserialize(E),docs:d.getEJSON().deserialize(I),EJSON:d.getEJSON(),requestId:t,watchId:d.watchId});Oo.default.surroundThirdByTryCatch((function(){return h.listener.onChange(C)}))(),d.debug&&d._snapshotHistory.push(C)}}else Object(g.reportIDKey)(So,Zo,!0),d._fsm.transition(po.NEED_REBUILD_WATCH)},d=this,f=0,p=o.length;f<p;f++)l(f,p);return[2]}))}))},e.prototype._postHandleServerEventsValidityCheck=function(e){this.sessionInfo?(this.sessionInfo.expectEventId&&this.sessionInfo.currentEventId>=this.sessionInfo.expectEventId&&this.clearWaitExpectedEvent(),this.sessionInfo.currentEventId<e.msgData.currEvent&&console.warn("[realtime listener] internal non-fatal error: client eventId "+this.sessionInfo.currentEventId+" does not match with server event id after server event handling "+e.msgData.currEvent+" (requestId "+e.requestId+")")):console.error("[realtime listener] internal non-fatal error: sessionInfo lost after server event handling, this should never occur. (requestId "+e.requestId+")")},e.prototype.clearWaitExpectedEvent=function(){this._waitExpectedTimeoutId&&(clearTimeout(this._waitExpectedTimeoutId),this._waitExpectedTimeoutId=void 0)},e.prototype.onMessage=function(e){var t=this;switch(this._fsm.currentState){case fo.INIT_WATCH_SUCCESS:case fo.REBUILD_WATCH_SUCCESS:break;case fo.PAUSED:if("ERROR"!==e.msgType)return;break;default:return void console.warn("[realtime listener] internal non-fatal error: unexpected message received while state is "+this._fsm.currentState)}if(this.sessionInfo)switch(this.scheduleSendACK(),e.msgType){case"NEXT_EVENT":0,this.handleServerEvents(e);break;case"CHECK_EVENT":this.sessionInfo.currentEventId<e.msgData.currEvent&&(this.sessionInfo.expectEventId=e.msgData.currEvent,this.clearWaitExpectedEvent(),this._waitExpectedTimeoutId=setTimeout((function(){t._fsm.transition(po.NEED_REBUILD_WATCH)}),this.getWaitExpectedTimeoutLength()));break;case"ERROR":this.closeWithError(new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_SERVER_ERROR_MSG,errMsg:e.msgData.code+" - "+e.msgData.message}));break;default:0}else console.warn("[realtime listener] internal non-fatal error: sessionInfo not found while message is received.")},e.prototype.closeWithError=function(e,t){var n=this;if(void 0===t&&(t=!0),this._fsm.currentState!==fo.CLOSED&&this._fsm.transition(po.CLOSE),!this.userOnErrorInvoked){var r=this._fsm.getHistoryRepresentation({limit:20});Object(c.isSDKError)(e)?(e.errMsg+="\nhistory "+r,e.history=r):e&&((e=new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_UNEXPECTED_FATAL_ERROR,errMsg:e+" \nhistory "+r})).history=r),this.clearACKSchedule(),Oo.default.surroundThirdByTryCatch((function(){return n.listener.onError(e)}))(),this.userOnErrorInvoked=!0,this.onWatchClose(this,this.sessionInfo&&this.sessionInfo.queryID||""),t&&this.sendCloseWatch().catch(vi),this.sessionInfo=void 0}},e}();function _i(e){var t={id:e.ID,dataType:e.DataType,queueType:e.QueueType,docId:e.DocID,doc:e.Doc&&"{}"!==e.Doc?JSON.parse(e.Doc):void 0};return"update"===e.DataType&&(e.UpdatedFields&&(t.updatedFields=JSON.parse(e.UpdatedFields)),(e.removedFields||e.RemovedFields)&&(t.removedFields=e.removedFields?JSON.parse(e.removedFields):JSON.parse(e.RemovedFields))),t}var bi,yi={1e3:{code:1e3,name:"Normal Closure",description:"Normal closure; the connection successfully completed whatever purpose for which it was created."},1001:{code:1001,name:"Going Away",description:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection."},1002:{code:1002,name:"Protocol Error",description:"The endpoint is terminating the connection due to a protocol error."},1003:{code:1003,name:"Unsupported Data",description:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data)."},1005:{code:1005,name:"No Status Received",description:"Indicates that no status code was provided even though one was expected."},1006:{code:1006,name:"Abnormal Closure",description:"Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected."},1007:{code:1007,name:"Invalid frame payload data",description:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message)."},1008:{code:1008,name:"Policy Violation",description:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable."},1009:{code:1009,name:"Message too big",description:"The endpoint is terminating the connection because a data frame was received that is too large."},1010:{code:1010,name:"Missing Extension",description:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't."},1011:{code:1011,name:"Internal Error",description:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request."},1012:{code:1012,name:"Service Restart",description:"The server is terminating the connection because it is restarting."},1013:{code:1013,name:"Try Again Later",description:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients."},1014:{code:1014,name:"Bad Gateway",description:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code."},1015:{code:1015,name:"TLS Handshake",description:"Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified)."},3e3:{code:3e3,name:"Reconnect WebSocket",description:"The client is terminating the connection because it wants to reconnect"},3001:{code:3001,name:"No Realtime Listeners",description:"The client is terminating the connection because no more realtime listeners exist"},3002:{code:3002,name:"Heartbeat Ping Error",description:"The client is terminating the connection due to its failure in sending heartbeat messages"},3003:{code:3003,name:"Heartbeat Pong Timeout Error",description:"The client is terminating the connection because no heartbeat response is received from the server"},3004:{code:3004,name:"Client Reconnect on Server Upgrade",description:"The client is terminating the connection in response to server upgrade"},3050:{code:3050,name:"Server Close Unauthenticated Idle Connection",description:"The server is terminating the connection because the connection is idle and not authenticated"},3051:{code:3051,name:"Server Upgrade",description:"The server is terminating the connection because it is upgrading"},3052:{code:3052,name:"Server Requires Authentication",description:"The server is terminating the connection because it has not received authentication message as the connection's first message"}};!function(e){e[e.NormalClosure=1e3]="NormalClosure",e[e.GoingAway=1001]="GoingAway",e[e.ProtocolError=1002]="ProtocolError",e[e.UnsupportedData=1003]="UnsupportedData",e[e.NoStatusReceived=1005]="NoStatusReceived",e[e.AbnormalClosure=1006]="AbnormalClosure",e[e.InvalidFramePayloadData=1007]="InvalidFramePayloadData",e[e.PolicyViolation=1008]="PolicyViolation",e[e.MessageTooBig=1009]="MessageTooBig",e[e.MissingExtension=1010]="MissingExtension",e[e.InternalError=1011]="InternalError",e[e.ServiceRestart=1012]="ServiceRestart",e[e.TryAgainLater=1013]="TryAgainLater",e[e.BadGateway=1014]="BadGateway",e[e.TLSHandshake=1015]="TLSHandshake",e[e.ReconnectWebSocket=3e3]="ReconnectWebSocket",e[e.NoRealtimeListeners=3001]="NoRealtimeListeners",e[e.HeartbeatPingError=3002]="HeartbeatPingError",e[e.HeartbeatPongTimeoutError=3003]="HeartbeatPongTimeoutError",e[e.ReconnectOnServerUpgrade=3004]="ReconnectOnServerUpgrade",e[e.UnauthenticatedIdleConnection=3050]="UnauthenticatedIdleConnection",e[e.ServerUpgrade=3051]="ServerUpgrade",e[e.AuthenticationRequired=3052]="AuthenticationRequired"}(bi||(bi={}));var mi,wi=function(e,t){var n=yi[e],r=n?n.name+", code "+e+", reason "+(t||n.description):"code "+e;return new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_WEBSOCKET_CONNECTION_CLOSED,errMsg:r})},Oi=1,Si=function(){function e(e){var t=this;this._virtualWSClient=new Set,this._queryIdClientMap=new Map,this._watchIdClientMap=new Map,this._pingFailed=0,this._pongMissed=0,this._logins=new Map,this._signatures=new Map,this._wsResponseWait=new Map,this._rttObserved=[],this._closedWatches=new Set,this.initWebSocketConnection=function(e,r){return void 0===r&&(r=t._maxReconnect),Object(i.__awaiter)(t,void 0,void 0,(function(){var t,r,o,a,s,l,d,f,p,h=this;return Object(i.__generator)(this,(function(v){switch(v.label){case 0:if(this._EJSON||(t=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(r){return e=Date.now(),t=n(26),Object(g.reportAPISpeed)({apiName:"_realtime.importBSON",apiStartTime:e,apiEndTime:Date.now()}),[2,t.EJSON]}))}))}().then((function(e){return h._EJSON=e}))),this._fsm.currentState!==Dt.DISCONNECTED)return[2];this._fsm.transition(jt.CONNECTION_START),this._logins=new Map,this._wsResponseWait=new Map,r=!1,o=[],a=!1,!this._totalConnectionTimeoutId&&this._totalConnectionTimeout&&this._totalConnectionTimeout!==1/0&&(s=this._totalConnectionTimeout,this._totalConnectionTimeoutId=setTimeout((function(){a=!0,h._totalConnectionTimeoutId=void 0;var e=new c.TimeoutError("reconnect timeout (reach totalConnectionTimeout "+s+"s)",{subtype:"totalConnectionTimeout",retryable:!1});Object(g.reportIDKey)(So,Wo,!0),h._fsm.transition({type:jt.CONNECTION_FAIL,error:e})}),1e3*s)),l=function(n){var s,c,l,f;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,11,,17]),[4,Object(k.getNetworkStatus)()];case 1:return n.sent().isConnected?[3,5]:e?[3,2]:(d._fsm.transition({type:jt.CONNECTION_FAIL,error:new Error("network offline")}),[2,{value:void 0}]);case 2:return[4,Object(k.onceNetworkOnline)()];case 3:return n.sent(),0===d._virtualWSClient.size?(d.clearTotalReconnectTimeout(),[2,{value:void 0}]):Object(A.isDevTools)()?[4,Object(k.sleep)(100)]:[3,5];case 4:n.sent(),n.label=5;case 5:return a?[2,{value:void 0}]:[4,d.getSignature(d._connectionEnvId)];case 6:return s=n.sent(),a?[2,{value:void 0}]:(c=Date.now(),[4,new Promise((function(e,t){h._ws=Object(S.getSDK)(h._context.identifiers)._socketSkipCheckDomainFactory().connectSocket({url:s.wsUrl,header:{"content-type":"application/json"},perMessageDeflate:!0,success:e,fail:t})}))]);case 7:return n.sent(),a?[2,{value:void 0}]:(Object(g.reportAPISpeed)({apiName:"_realtime.connectSocket",apiStartTime:c,apiEndTime:Date.now()}),[4,d.initWebSocketEvent()]);case 8:return n.sent(),a?[2,{value:void 0}]:t?[4,t]:[3,10];case 9:if(n.sent(),a)return[2,{value:void 0}];n.label=10;case 10:return r=!0,[2,"break"];case 11:return l=n.sent(),o.unshift(l),l.errCode===u.ERR_CODE.TCB_PERMISSION_DENIED?[2,"break"]:[4,Object(k.getNetworkStatus)()];case 12:return f=n.sent().isConnected,a?[2,{value:void 0}]:f?[4,Object(k.sleep)(d._reconnectInterval)]:[3,14];case 13:if(n.sent(),a)return[2,{value:void 0}];n.label=14;case 14:return Object(A.isDevTools)()?[4,Object(k.sleep)(0)]:[3,16];case 15:if(n.sent(),a)return[2,{value:void 0}];n.label=16;case 16:return[3,17];case 17:return[2]}}))},d=this,f=this._maxReconnect,v.label=1;case 1:return f>=0?[5,l(f)]:[3,4];case 2:if("object"==typeof(p=v.sent()))return[2,p.value];if("break"===p)return[3,4];v.label=3;case 3:return f--,[3,1];case 4:return r?(this.clearTotalReconnectTimeout(),Object(g.reportIDKey)(So,e?Co:Io,!0),this._fsm.transition(jt.CONNECTION_SUCCESS),[2]):(this.clearTotalReconnectTimeout(),Object(g.reportIDKey)(So,e?To:Eo,!0),e?this._fsm.transition({type:jt.CONNECTION_FAIL,error:new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_RECONNECT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): "+JSON.stringify(o.map((function(e){return e+""})))})}):this._fsm.transition({type:jt.CONNECTION_FAIL,error:new c.CloudSDKError({errCode:u.ERR_CODE.SDK_DATABASE_REALTIME_LISTENER_INIT_WS_FAIL,errMsg:"errors of each retry (latest to oldest): "+JSON.stringify(o.map((function(e){return e+""})))})}),[2])}}))}))},this.initWebSocketEvent=function(){return new Promise((function(e,n){if(!t._ws)throw new Error("can not initWebSocketEvent, ws not exists");var r=!1;t._ws.onOpen((function(n){t._context.debug&&console.warn("[realtime] ws event: open",n),r=!0,e()}));var o=null;t._ws.onError((function(e){o=e,t._logins=new Map,r?(t._context.debug&&console.error("[realtime] ws event: error",e),t.clearHeartbeat(),Object(g.reportIDKey)(So,xo,!0)):(t._context.debug&&console.error("[realtime] ws open failed with ws event: error",e),n(e),Object(g.reportIDKey)(So,jo,!0))})),t._ws.onClose((function(e){t._logins=new Map,t.clearHeartbeat();var n=o||wi(e.code);switch(e.code){case bi.ReconnectOnServerUpgrade:case bi.ReconnectWebSocket:case bi.NoRealtimeListeners:t._fsm.transition({type:jt.DISCONNECT,error:n});break;case bi.HeartbeatPingError:case bi.HeartbeatPongTimeoutError:case bi.NormalClosure:case bi.AbnormalClosure:t._maxReconnect>0?(t._fsm.transition({type:jt.DISCONNECT,error:n}),t.initWebSocketConnection(!0)):t._fsm.transition({type:jt.CONNECTION_FAIL,error:n}),e.code===bi.HeartbeatPingError?Object(g.reportIDKey)(So,Mo,!0):e.code===bi.HeartbeatPongTimeoutError?Object(g.reportIDKey)(So,No,!0):Object(g.reportIDKey)(So,Lo,!0);break;case bi.UnauthenticatedIdleConnection:t._fsm.transition({type:jt.CONNECTION_FAIL,error:wi(e.code,e.reason)}),Object(g.reportIDKey)(So,Bo,!0);break;case bi.ServerUpgrade:t._fsm.transition({type:jt.DISCONNECT,error:n}),t.initWebSocketConnection(!0),Object(g.reportIDKey)(So,Uo,!0);break;default:t._maxReconnect>0?(t._fsm.transition({type:jt.DISCONNECT,error:n}),t.initWebSocketConnection(!0)):t._fsm.transition({type:jt.CONNECTION_FAIL,error:wi(e.code,e.reason)}),Object(g.reportIDKey)(So,Fo,!0)}Object(g.reportIDKey)(So,Ro,!0)}));var i={timing:{},startKey:"apiStartTime",endKey:"apiEndTime",samplePicker:g.socketOnMessageSamplePicker,autoReport:"_realtime.onSocketMessage"};t._ws.onMessage(Object(g.wrapTiming)(t.onSocketMessage,i)),t.heartbeat()}))},this.isWSConnected=function(){return Boolean(t._ws&&t._ws.readyState===Oi)},this.onSocketMessage=function(e){var n,r=e.data;t.heartbeat();try{n=JSON.parse(r)}catch(e){throw new Error("[realtime] onMessage parse res.data error: "+e)}t._context.debug&&console.log("[realtime] onMessage "+n.msgType+" ("+(new Date).toLocaleString()+")",n);var o=t._wsResponseWait.get(n.requestId);if(o){try{"ERROR"===n.msgType?o.reject(new fi(n)):o.resolve(n)}catch(e){t._context.debug&&console.error("ws onMessage responseWaitSpec.resolve(msg) errored:",e)}finally{t._wsResponseWait.delete(n.requestId)}if(o.skipOnMessage)return}if("PONG"!==n.msgType){var i=n.watchId&&t._watchIdClientMap.get(n.watchId);if(i)i.onMessage(n);else switch(n.watchId?t._closedWatches.has(n.watchId)?Object(g.reportIDKey)(So,Vo,!0):Object(g.reportIDKey)(So,Go,!0):Object(g.reportIDKey)(So,Ho,!0),n.msgType){case"INIT_EVENT":case"NEXT_EVENT":case"CHECK_EVENT":(i=t._queryIdClientMap.get(n.msgData.queryID))&&i.onMessage(n)}}else if(t._lastPingSendTS){var a=Date.now()-t._lastPingSendTS;if(a>1e4)return void(t._context.debug&&console.warn("[realtime] untrusted rtt observed: "+a));t._rttObserved.length>=3&&t._rttObserved.splice(0,t._rttObserved.length-3+1),t._rttObserved.push(a)}},this.login=function(e,n,r){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,o,a,s,c,u,l,d,f=this;return Object(i.__generator)(this,(function(p){switch(p.label){case 0:if(e=e||this._context.env||this._defaultEnvId,!n)if(e){if(t=this._logins.get(e)){if(t.loggedIn&&t.loginResult)return[2,t.loginResult];if(t.loggingInPromise)return[2,t.loggingInPromise]}}else if((o=this._logins.get(""))&&o.loggingInPromise)return[2,o.loggingInPromise];0,a=new Promise((function(t,o){return Object(i.__awaiter)(f,void 0,void 0,(function(){var a,s,c,u,l;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,r?Object(g.wrapTiming)(this.getSignature(e,n),{timing:r,startKey:"tunnelStartTime",endKey:"tunnelEndTime",condition:{emptyKey:!0}}):this.getSignature(e,n)];case 1:return a=i.sent(),s=Object(k.getWXVersion)(),c={watchId:void 0,requestId:wo(),msgType:"LOGIN",msgData:{envId:a.envId,signStr:a.signStr,secretVersion:a.secretVersion,referrer:"mp",sdkVersion:s.version,dataVersion:s.updateDateInDashes}},[4,this.send({msg:c,waitResponse:!0,skipOnMessage:!0,timeout:5e3})];case 2:return(u=i.sent()).msgData.code?o(new Error(u.msgData.code+" "+u.msgData.message)):t({envId:a.envId}),[3,4];case 3:return l=i.sent(),o(l),[3,4];case 4:return[2]}}))}))})),s=e&&this._logins.get(e),c=Date.now(),s?(s.loggedIn=!1,s.loggingInPromise=a,s.loginStartTS=c):(s={loggedIn:!1,loggingInPromise:a,loginStartTS:c},this._logins.set(e||"",s)),p.label=1;case 1:return p.trys.push([1,3,,4]),[4,a];case 2:if(u=p.sent(),(l=this._logins.get(e||""))&&l===s&&l.loginStartTS===c)return s.loggedIn=!0,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=u,[2,u];if(l){if(l.loggedIn&&l.loginResult)return[2,l.loginResult];if(l.loggingInPromise)return[2,l.loggingInPromise];throw new Error("ws unexpected login info")}throw new Error("ws login info reset");case 3:throw d=p.sent(),s.loggedIn=!1,s.loggingInPromise=void 0,s.loginStartTS=void 0,s.loginResult=void 0,d;case 4:return[2]}}))}))},this.getSignature=function(e,n){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,r,o,a;return Object(i.__generator)(this,(function(s){switch(s.label){case 0:if(e=e||this._context.env||this._defaultEnvId,!n&&e&&this._signatures.has(e)){if(t=this._signatures.get(e),Date.now()<t.expireTS)return[2,t]}else 0;return r=Date.now()+6e4,[4,st(this._context,e)];case 1:return o=s.sent(),Date.now()-r>6e4?[2,this.getSignature(e,n)]:(a=Object(i.__assign)(Object(i.__assign)({},o),{expireTS:r}),this._signatures.set(a.envId,a),e||(this._defaultEnvId=a.envId),[2,a])}}))}))},this.getWaitExpectedTimeoutLength=function(){return t._rttObserved.length?t._rttObserved.reduce((function(e,t){return e+t}))/t._rttObserved.length*1.5:5e3},this.ping=function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return e={watchId:void 0,requestId:wo(),msgType:"PING",msgData:null},[4,this.send({msg:e})];case 1:return t.sent(),this._context.debug&&console.log("ping sent"),[2]}}))}))},this.send=function(e){return new Promise((function(n,r){return Object(i.__awaiter)(t,void 0,void 0,(function(){var t,o,a,s,u,l=this;return Object(i.__generator)(this,(function(d){if(this._fsm.currentState!==Dt.CONNECTED)return[2,r(new Error("websocket not connected"))];o=!1,a=!1,s=function(e){o=!0,t&&clearTimeout(t),n(e)},u=function(e){a=!0,t&&clearTimeout(t),r(e)},e.timeout&&(t=setTimeout((function(){return Object(i.__awaiter)(l,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){switch(e.label){case 0:return o&&a?[3,2]:[4,Object(k.sleep)(0)];case 1:e.sent(),o&&a||u(new c.TimeoutError("wsclient.send timedout")),e.label=2;case 2:return[2]}}))}))}),e.timeout));try{if(this._context.debug&&console.log("[realtime] ws send "+e.msg.msgType+" ("+(new Date).toLocaleString()+"): ",e),!this._ws)return u(new Error("invalid state: ws connection not exists, can not send message")),[2];if(this._ws.readyState!==Oi)return u(new Error("ws readyState invalid: "+this._ws.readyState+", can not send message")),[2];e.waitResponse&&this._wsResponseWait.set(e.msg.requestId,{resolve:s,reject:u,skipOnMessage:e.skipOnMessage}),this._ws.send({data:JSON.stringify(e.msg),success:function(t){e.waitResponse||s(t)},fail:function(t){u(t),e.waitResponse&&l._wsResponseWait.delete(e.msg.requestId)}})}catch(e){u(e)}return[2]}))}))}))},this.onWatchStart=function(e,n){t._queryIdClientMap.set(n,e)},this.onWatchClose=function(e,n){n&&t._queryIdClientMap.delete(n),t._watchIdClientMap.delete(e.watchId),t._virtualWSClient.delete(e),t._closedWatches.add(e.watchId),t._virtualWSClient.size||t.close(bi.NoRealtimeListeners)},this.getEJSON=function(){return t._EJSON},this._fsm=new yo({initialState:Dt.DISCONNECTED,states:ln}),this._serviceContext=e.serviceContext}return Object.defineProperty(e.prototype,"_context",{get:function(){return this._serviceContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_maxReconnect",{get:function(){return this._context.appConfig.realtimeMaxReconnect},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reconnectInterval",{get:function(){return this._context.appConfig.realtimeReconnectInterval},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_totalConnectionTimeout",{get:function(){return this._context.appConfig.realtimeTotalConnectionTimeout},enumerable:!1,configurable:!0}),e.prototype.heartbeat=function(e){var t=this;this.clearHeartbeat(),this._pingTimeoutId=setTimeout((function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){var e=this;return Object(i.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this._ws&&this._ws.readyState===Oi?(this._lastPingSendTS=Date.now(),[4,this.ping()]):[2];case 1:return t.sent(),this._pingFailed=0,this._pongTimeoutId=setTimeout((function(){e._context.debug&&console.error("pong timed out"),e._pongMissed<2?(e._pongMissed++,e.heartbeat(!0)):e.close(bi.HeartbeatPongTimeoutError)}),this._context.appConfig.realtimePongWaitTimeout),[3,3];case 2:return t.sent(),this._pingFailed<2?(this._pingFailed++,this.heartbeat()):this.close(bi.HeartbeatPingError),[3,3];case 3:return[2]}}))}))}),e?0:this._context.appConfig.realtimePingInterval)},e.prototype.clearHeartbeat=function(){this._pingTimeoutId&&clearTimeout(this._pingTimeoutId),this._pongTimeoutId&&clearTimeout(this._pongTimeoutId)},e.prototype.clearTotalReconnectTimeout=function(){this._totalConnectionTimeoutId&&clearTimeout(this._totalConnectionTimeoutId)},e.prototype.close=function(e){this.clearHeartbeat(),this._ws&&(this._ws.close({code:e,reason:yi[e].name}),this._ws=void 0)},e.prototype.watch=function(e){var t=this,n={apiStartTime:Date.now()},r=!1,o=function(){Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},n),{apiName:e.reportAPIName}))},a=e.onChange,s=e.onError;this._fsm.currentState===Dt.DISCONNECTED&&(this._connectionEnvId=e.envId,this.initWebSocketConnection(!1));var c=new gi(Object(i.__assign)(Object(i.__assign)({},e),{parentFSM:this._fsm,send:this.send,login:this.login,isWSConnected:this.isWSConnected,getWaitExpectedTimeoutLength:this.getWaitExpectedTimeoutLength,getEJSON:this.getEJSON,getServiceContext:function(){return t._context},onWatchStart:this.onWatchStart,onWatchClose:this.onWatchClose,timing:n,debug:this._context.debug,wsclient:this,onChange:l,onError:d}));this._virtualWSClient.add(c),this._watchIdClientMap.set(c.watchId,c);var u=c.listener;return u;function l(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r||(r=!0,n.apiEndTime=Date.now(),o()),f(),Oo.default.surroundThirdByTryCatch((function(){return u.onChange.apply(e,t)}))()}function d(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];r||(r=!0,n.apiEndTime=Date.now(),o()),f(),Oo.default.surroundThirdByTryCatch((function(){return u.onError.apply(e,t)}))()}function f(){u.onChange===l&&(u.onChange=a),u.onError===d&&(u.onError=s)}},e}();!function(e){e.ASC="asc",e.DESC="desc"}(mi||(mi={}));var Ii=function(e){var t=function(){function t(t,n){var o=this;if(this.watch=function(t){return l(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Si({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(Object(i.__assign)(Object(i.__assign)({},t),{envId:e.database.config.env||e.serviceContext.env,collectionName:o.collectionName,query:JSON.stringify(e.engine.QuerySerializer.encode(o._query.where||{})),limit:o._query.limit,orderBy:o._query.order?o._query.order.reduce((function(e,t){return e[t.fieldPath]=t.order,e}),{}):void 0,queryType:tt.WHERE,reportAPIName:"cloud.db.collection.watch"}))},!t)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"collectionName must be provided"});this.collectionName=t,this._query=new r(n),Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field=n&&n.field||{}}return t.prototype.field=function(e){return d(e,"object","field"),new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{field:e}))},t.prototype.where=function(e){return d(e,"condition","where"),this._query.where?new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{where:vt.and(this._query.where,e)})):new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{where:e}))},t.prototype.orderBy=function(e,n){return d(e,"fieldPath","orderBy"),d(n,"order","orderBy"),new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{order:Object(i.__spread)(this._query.order||[],[{fieldPath:e,order:n}])}))},t.prototype.limit=function(e){return d(e,"max","limit"),new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{limit:e}))},t.prototype.skip=function(e){return d(e,"offset","skip"),new t(this.collectionName,Object(i.__assign)(Object(i.__assign)({},this._query.getProperties()),{offset:e}))},t.prototype.get=function(t){var n=this,r="collection.get",o={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(i.__awaiter)(n,void 0,void 0,(function(){var u,l;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),[4,it({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),queryType:tt.WHERE,options:sn(n,e),instanceContext:e,timing:o,explain:null==t?void 0:t.explain})];case 1:return u=d.sent(),(null==t?void 0:t.explain)&&Object(A.isDevTools)()?(a(u),[2]):(a({data:u.list,errMsg:_(r)}),[3,4]);case 2:return l=d.sent(),s(Object(c.returnAsFinalCloudSDKError)(l,r)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},o),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.update=function(t){var n=this,r="collection.update",o={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(i.__awaiter)(n,void 0,void 0,(function(){var u,f;return Object(i.__generator)(this,(function(p){switch(p.label){case 0:return p.trys.push([0,2,3,4]),function(){if(d(t,"options","update"),l(t,{data:"object"}),!n._query.where)throw new c.CloudSDKError({errCode:-1,errMsg:"query condition must be provided"})}(),[4,at({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),data:e.engine.UpdateSerializer.encode(t.data),queryType:tt.WHERE,options:{multi:!1!==t.multi,merge:!0},instanceContext:e,timing:o,explain:t.explain})];case 1:return u=p.sent(),(null==t?void 0:t.explain)&&Object(A.isDevTools)()?[2,a(u)]:(a({stats:{updated:u.updated},errMsg:_(r)}),[3,4]);case 2:return f=p.sent(),s(Object(c.returnAsFinalCloudSDKError)(f,r)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},o),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.remove=function(t){var n=this,r="collection.remove",o={apiStartTime:+new Date};var s=Object(a.hasAPICallback)(t),u=new Promise((function(a,s){return Object(i.__awaiter)(n,void 0,void 0,(function(){var u,l;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),function(){if(!n._query.where||0===Object.keys(n._query.where).length)throw new c.CloudSDKError({errCode:-1,errMsg:"query condition must be provided and not be empty"})}(),[4,ot({env:e.database.config.env,collectionName:n.collectionName,query:e.engine.QuerySerializer.encode(n._query.where||{}),queryType:tt.WHERE,options:{multi:!0},instanceContext:e,timing:o,explain:null==t?void 0:t.explain})];case 1:return u=d.sent(),(null==t?void 0:t.explain)&&Object(A.isDevTools)()?[2,a(u)]:(a({stats:{removed:u.removed||0},errMsg:_(r)}),[3,4]);case 2:return l=d.sent(),s(Object(c.returnAsFinalCloudSDKError)(l,r)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},o),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!s)return u;u.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},t.prototype.count=function(t){var r=this,o="collection.count",s={apiStartTime:+new Date},u=function(){return function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,r,o,a,s,c,u,l,d,f;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,r=e.collectionName,o=e.query,a=e.instanceContext,s=e.timing,c=Object(A.isDevTools)()?e.explain:void 0,u={collection_name:r,query:JSON.stringify(o),query_type:tt.WHERE,explain:c},l=JSON.stringify(u),s.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_countdocument",serviceName:a.serviceContext.name,serializedReqData:l,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return d=i.sent(),s.tunnelEndTime=+new Date,c?[2,n(26).EJSON.deserialize(d.data)]:(f=d.data,s.tunnelTimeNoCSNetCost=f.baseresponse.stat.qbase_cost_time,[2,{total:f.total}])}}))}))}({env:e.database.config.env,collectionName:r.collectionName,query:e.engine.QuerySerializer.encode(r._query.where||{}),queryType:tt.WHERE,instanceContext:e,timing:s,explain:null==t?void 0:t.explain})};var l=Object(a.hasAPICallback)(t),d=new Promise((function(e,n){return Object(i.__awaiter)(r,void 0,void 0,(function(){var r,a;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),[4,u()];case 1:return r=l.sent(),(null==t?void 0:t.explain)&&Object(A.isDevTools)()?[2,e(r)]:(e({total:r.total,errMsg:_(o)}),[3,4]);case 2:return a=l.sent(),n(Object(c.returnAsFinalCloudSDKError)(a,o)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},s),{apiEndTime:+new Date,apiName:"cloud.db."+o})),[7];case 4:return[2]}}))}))}));if(!l)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(o,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(o,t,e)}))},t.prototype.toJSON=function(){},t}(),r=function(){function e(e){this.where=e&&e.where,this.offset=e&&e.offset,this.limit=e&&e.limit,this.order=e&&e.order,this.field=e&&e.field}return e.prototype.getProperties=function(){return{where:this.where,offset:this.offset,limit:this.limit,order:this.order,field:this.field}},e}();return t},Ei="document.get",Ci="document.update",Ti="document.set",ki="document.remove",Ai=function(e){return function(){function t(t,n){var r=this;if(this.watch=function(t){return l(t,{onChange:"function",onError:"function"}),e.serviceContext.ws||(e.serviceContext.ws=new Si({serviceContext:e.serviceContext})),e.serviceContext.ws.watch(Object(i.__assign)(Object(i.__assign)({},t),{envId:e.database.config.env||e.serviceContext.env,collectionName:r.collection.collectionName,query:JSON.stringify({_id:r._id}),queryType:tt.DOC,reportAPIName:"cloud.db.document.watch"}))},this.collection=t,this._id=n,null==n)throw new c.CloudSDKError({errCode:u.ERR_CODE.SDK_API_PARAMETER_TYPE_ERROR,errMsg:"docId must not be null or undefined"});Object.defineProperties(this,{_field:{enumerable:!1,configurable:!1,writable:!0}}),this._field={}}return t.prototype.field=function(e){return d(e,"object","field"),l(e,"object","field"),this._field=e,this},t.prototype.get=function(t){var n=this,r={apiStartTime:+new Date};var o=Object(a.hasAPICallback)(t),s=new Promise((function(t,o){return Object(i.__awaiter)(n,void 0,void 0,(function(){var a,s,u;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),a=this._id,[4,it({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),options:{projection:e.engine.ProjectionSerializer.encode(n._field)},queryType:tt.DOC,instanceContext:e,timing:r})];case 1:if(!(s=l.sent()).list||!s.list.length)throw new Error("cannot find document with _id "+a+", please make sure that the document exists and you have the corresponding access permission");return t({data:s.list[0],errMsg:_(Ei)}),[3,4];case 2:return u=l.sent(),o(Object(c.returnAsFinalCloudSDKError)(u,Ei)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.get"})),[7];case 4:return[2]}}))}))}));if(!o)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Ei,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Ei,t,e)}))},t.prototype.set=function(t){var n=this,r={apiStartTime:+new Date},o=function(){return function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,r,o,a,c,u,l,d,p,h,v;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,n=e.collectionName,r=e._id,o=e.data,e.options,a=e.instanceContext,c=e.timing,f({input:u=JSON.stringify(o),max:a.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:(a.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),l=Object(s.isNumber)(r),d={collection_name:n,_id_type:l?nt.NUMBER:nt.STRING,data:u},l?d._id_number=r:d._id=r,p=JSON.stringify(d),c.tunnelStartTime=+new Date,[4,a.serviceContext.request({apiName:"tcbapi_db_setdocument",serviceName:a.serviceContext.name,serializedReqData:p,requireDataNotEmpty:!0,env:t||a.serviceContext.env})];case 1:return h=i.sent(),c.tunnelEndTime=+new Date,v=h.data,c.tunnelTimeNoCSNetCost=v.baseresponse.stat.qbase_cost_time,[2,{_id:v._id_type===nt.NUMBER?v._id_number:v._id,updated:v._id?0:1,created:v._id?1:0}]}}))}))}({env:e.database.config.env,collectionName:n.collection.collectionName,_id:n._id,data:e.engine.encodeInternalDataType(t.data),options:{},instanceContext:e,timing:r})};var u=Object(a.hasAPICallback)(t),d=new Promise((function(e,a){return Object(i.__awaiter)(n,void 0,void 0,(function(){var n,s;return Object(i.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,3,4]),l(t,{data:"object"}),p({name:"options.data",target:t.data}),[4,o()];case 1:return n=u.sent(),e({_id:n._id,errMsg:_(Ti),stats:{updated:n.updated,created:n.created}}),[3,4];case 2:return s=u.sent(),a(Object(c.returnAsFinalCloudSDKError)(s,Ti)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.set"})),[7];case 4:return[2]}}))}))}));if(!u)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Ti,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Ti,t,e)}))},t.prototype.update=function(t){var n=this,r={apiStartTime:+new Date};var o=Object(a.hasAPICallback)(t),s=new Promise((function(o,a){return Object(i.__awaiter)(n,void 0,void 0,(function(){var s,u;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),l(t,{data:"object"}),p({name:"options.data",target:t.data}),[4,at({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),data:e.engine.UpdateSerializer.encode(t.data),queryType:tt.DOC,options:{multi:!1,merge:!1},instanceContext:e,timing:r})];case 1:return s=d.sent(),o({stats:{updated:s.updated},errMsg:_(Ci)}),[3,4];case 2:return u=d.sent(),a(Object(c.returnAsFinalCloudSDKError)(u,Ci)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.update"})),[7];case 4:return[2]}}))}))}));if(!o)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(Ci,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(Ci,t,e)}))},t.prototype.remove=function(t){var n=this,r={apiStartTime:+new Date};var o=Object(a.hasAPICallback)(t),s=new Promise((function(t,o){return Object(i.__awaiter)(n,void 0,void 0,(function(){var a,s,u;return Object(i.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,4]),a=this._id,[4,ot({env:e.database.config.env,collectionName:n.collection.collectionName,query:e.engine.QuerySerializer.encode({_id:n._id}),queryType:tt.DOC,options:{},instanceContext:e,timing:r})];case 1:if(0===(s=l.sent()).removed)throw new Error("cannot remove document with _id "+a+", please make sure that the document exists and you have the corresponding Write permission");return t({stats:{removed:s.removed||0},errMsg:_(ki)}),[3,4];case 2:return u=l.sent(),o(Object(c.returnAsFinalCloudSDKError)(u,ki)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},r),{apiEndTime:+new Date,apiName:"cloud.db.document.remove"})),[7];case 4:return[2]}}))}))}));if(!o)return s;s.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(ki,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(ki,t,e)}))},t.prototype.toJSON=function(){},t}()},Pi=function(e){var t=Ii(e),n=Ai(e),r=ct(e);return function(t){function o(e){var n=t.call(this,e)||this;return n.collectionName=e,n}return Object(i.__extends)(o,t),o.prototype.doc=function(e){if(null==e)throw Object(c.returnAsFinalCloudSDKError)({errCode:-1,errMsg:"docId must not be empty"},"collection.doc");return new n(this,e)},o.prototype.add=function(t){var n=this,r="collection.add",o={apiStartTime:+new Date},s=function(){return function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,u,l,d;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return t=e.env,n=e.collectionName,r=e.data,o=e.instanceContext,a=e.timing,f({input:s=JSON.stringify(r),max:o.serviceContext.appConfig.docSizeLimit,name:"record",maxWording:(o.serviceContext.appConfig.docSizeLimit/1024).toFixed(0)+" KB"}),c={collection_name:n,data:s},u=JSON.stringify(c),a.tunnelStartTime=+new Date,[4,o.serviceContext.request({apiName:"tcbapi_db_adddocument",serviceName:o.serviceContext.name,serializedReqData:u,requireDataNotEmpty:!0,env:t||o.serviceContext.env})];case 1:return l=i.sent(),a.tunnelEndTime=+new Date,d=l.data,a.tunnelTimeNoCSNetCost=d.baseresponse.stat.qbase_cost_time,[2,{_id:d._id_type===nt.NUMBER?d._id_number:d._id}]}}))}))}({env:e.database.config.env,collectionName:n.collectionName,data:e.engine.encodeInternalDataType(t.data),instanceContext:e,timing:o})};var u=Object(a.hasAPICallback)(t),d=new Promise((function(e,a){return Object(i.__awaiter)(n,void 0,void 0,(function(){var n,u;return Object(i.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,2,3,4]),l(t,{data:"object"}),[4,s()];case 1:return n=d.sent(),e({_id:n._id,errMsg:_(r)}),[3,4];case 2:return u=d.sent(),a(Object(c.returnAsFinalCloudSDKError)(u,r)),[3,4];case 3:return Object(g.reportAPISpeed)(Object(i.__assign)(Object(i.__assign)({},o),{apiEndTime:+new Date,apiName:"cloud.db."+r})),[7];case 4:return[2]}}))}))}));if(!u)return d;d.then((function(e){Object(a.invokeSuccessCompleteCallbacks)(r,t,e)})).catch((function(e){Object(a.invokeFailCompleteCallbacks)(r,t,e)}))},o.prototype.aggregate=function(){return new r(this,[])},o}(t)},Di=function(e){return new ji(e)},ji=function(){function e(e){l(e,{regexp:"string"},"RegExp options"),e.options&&l(e.options,"string"),this.regexp=e.regexp,this.options=e.options||""}return Object.defineProperty(e.prototype,"_internalType",{get:function(){return Ne},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return{$regex:this.regexp,$options:this.options}},e}(),xi={},Ri={};for(var Mi in Ue)xi[Ue[Mi]]="$"+Ue[Mi];for(var Mi in ye)xi[ye[Mi]]="$"+ye[Mi];for(var Mi in qe)xi[qe[Mi]]="$"+qe[Mi];for(var Mi in Je)Ri[Je[Mi]]="$"+Je[Mi];function Ni(e){return xi[e]||"$"+e.toLowerCase()}function Li(e){return Ri[e]||"$"+e.toLowerCase()}xi[Ue.NEQ]="$ne",xi[qe.REMOVE]="$unset",xi[qe.SHIFT]="$pop",xi[qe.UNSHIFT]="$push",xi[Ue.GEO_NEAR]="$nearSphere",xi[Ue.GEO_WITHIN]="$geoWithin",xi[Ue.GEO_INTERSECTS]="$geoIntersects";var Bi,Fi=function(){function e(){}return e.encodeStages=function(e){return(new Wi).encodeStages(e)},e.encode=function(e){return(new Wi).encodeAny(e)},e}(),Wi=function(){function e(){}return e.prototype.encodeStages=function(e){var t=this;return e.map((function(e){return t.encodePipelineStage(e)}))},e.prototype.encodeAny=function(e){var t=this;return rn(e)?ft(e)?this.encodePipeline(e):pt(e)?this.encodePipelineStage(e):$e(e)?this.encodeAggregateCommand(e):on(e):Object(s.isObject)(e)?this.encodeObject(e):Object(s.isArray)(e)?e.map((function(e){return t.encodeAny(e)})):e},e.prototype.encodeObject=function(e){var t={};for(var n in e)t[n]=this.encodeAny(e[n]);return t},e.prototype.encodePipeline=function(e){var t=this;return e._stages.map((function(e){return t.encodeAny(e)}))},e.prototype.encodePipelineStage=function(e){var t,n,r="$"+e.stage;switch(e.stage){case"match":return(t={})[r]=Ui.encode(e.val),t;default:return(n={})[r]=this.encodeAny(e.val),n}},e.prototype.encodeAggregateCommand=function(e){var t;return(t={})[Li(e.operator)]=this.encodeAny(e.operands[0]),t},e}(),Ui=function(){function e(){}return e.encode=function(e){return Vi(e)},e}(),Vi=function(e){return We(e)?Hi(e):ze(e)?zi(e):ft(e)||$e(e)||pt(e)?Fi.encode(e):Object(s.isObject)(e)?Gi(e):on(e)},Gi=function(e){var t,n=en(e),r=[],o=((t={})[ye.OR]=0,t[ye.NOR]=0,t[ye.AND]=0,t[ye.NOT]=0,t),i=function(e){var t,i,a,s,c,u=n[e];if(We(u))switch(u.operator){case ye.OR:case ye.NOR:case ye.AND:o[u.operator]++,r.push(((t={})[Ni(u.operator)]=u.operands.map((function(t){var n;return Vi(((n={})[e]=t,n))})),t));break;case ye.NOT:var l=u.operands[0];if(We(l))switch(l.operator){case ye.AND:o[ye.OR]++,r.push(Hi(new Fe(ye.OR,l.operands.map((function(t){var n;return(n={})[e]=new Fe(ye.NOT,[t]),n})))));break;case ye.OR:o[ye.NOR]++,r.push(Hi(new Fe(ye.NOR,l.operands.map((function(t){var n;return(n={})[e]=t,n})))));break;case ye.NOR:o[ye.OR]++,r.push(Hi(new Fe(ye.OR,l.operands.map((function(t){var n;return(n={})[e]=t,n})))));break;case ye.NOT:r.push(Vi(((i={})[e]=l.operands[0],i)))}else r.push(((a={})[e]=Hi(u),a))}else ze(u)?r.push(((s={})[e]=zi(u),s)):r.push(((c={})[e]=on(u),c))};for(var a in n)i(a);return qi(r)},Hi=function(e){var t,n,r,o,a,s;switch(e.operator){case ye.AND:if(e.operands.every((function(e){return ze(e)}))){var c={};try{for(var u=Object(i.__values)(e.operands),l=u.next();!l.done;l=u.next()){var d=l.value;Object.assign(c,zi(d))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return c}var f=Ni(e.operator),p=e.operands.map(Vi);return(r={})[f]=p,r;case ye.OR:case ye.NOR:f=Ni(e.operator),p=e.operands.map(Vi);return(o={})[f]=p,o;case ye.NOT:f=Ni(e.operator),d=e.operands[0];return(a={})[f]=Vi(d),a;default:f=Ni(e.operator),p=e.operands.map(Vi);return(s={})[f]=p,s}},zi=function(e){var t,n,r,o,i,a,s,c,u=Ni(e.operator);switch(e.operator){case Ue.EQ:case Ue.NEQ:case Ue.LT:case Ue.LTE:case Ue.GT:case Ue.GTE:case Ue.EXISTS:case Ue.SIZE:return(t={})[u]=on(e.operands[0]),t;case Ue.IN:case Ue.NIN:case Ue.MOD:return(n={})[u]=on(e.operands),n;case Ue.ALL:return(r={})[u]=e.operands.map(Vi),r;case Ue.ELEM_MATCH:case Ue.EXPR:return(o={})[u]=Vi(e.operands[0]),o;case Ue.GEO_NEAR:return(i={})[u]={$geometry:on(e.operands[0].geometry),$maxDistance:e.operands[0].maxDistance,$minDistance:e.operands[0].minDistance},i;case Ue.GEO_WITHIN:var l={};return e.operands[0].geometry&&(l.$geometry=on(e.operands[0].geometry)),e.operands[0].centerSphere&&(l.$centerSphere=on(e.operands[0].centerSphere)),(a={})[u]=l,a;case Ue.GEO_INTERSECTS:return(s={})[u]={$geometry:on(e.operands[0].geometry)},s;default:return(c={})[u]=e.operands.length>1?e.operands.map(Vi):Vi(e.operands[0]),c}},qi=function(e){var t,n,r,o,a={$and:0,$or:0,$nor:0};try{for(var s=Object(i.__values)(e),c=s.next();!c.done;c=s.next()){(h=c.value).$and&&a.$and++,h.$or&&a.$or++,h.$nor&&a.$nor++}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var u=a.$and>1||a.$or>1||a.$nor>1,l=!1,d={};try{for(var f=Object(i.__values)(e),p=f.next();!p.done;p=f.next()){var h=p.value;for(var v in h){var g=h[v];u?l?d.$and.push(h):"$and"===v||"$or"===v||"$nor"===v?(l=!0,d.$and=[h]):d[v]=g:d[v]=g}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}return d},Yi=function(){function e(){}return e.encode=function(e){return Ki(e)},e}(),Ki=function(e){return Ji(e)},Ji=function(e){var t=en(e),n={};for(var r in t){var o=t[r];if(Ke(o)){var i=Ni(o.operator);switch(n[i]||(n[i]={}),o.operator){case qe.SET:case qe.INC:case qe.MUL:case qe.MIN:case qe.MAX:case qe.RENAME:case qe.BIT:n[i][r]=on(o.operands[0]);break;case qe.REMOVE:n[i][r]="";break;case qe.PUSH:var a=void 0;a=1===o.operands.length&&Object(s.isObject)(o.operands[0])?{$each:o.operands[0].each.map(on),$position:o.operands[0].position,$slice:o.operands[0].slice,$sort:o.operands[0].sort}:{$each:o.operands.map(on)},n[i][r]=a;break;case qe.UNSHIFT:a={$each:o.operands.map(on),$position:0};n[i][r]=a;break;case qe.POP:n[i][r]=1;break;case qe.SHIFT:n[i][r]=-1;break;case qe.ADD_TO_SET:n[i][r]=Object(s.isObject)(o.operands[0])&&o.operands[0].each?{$each:o.operands[0].each}:o.operands[0];break;case qe.PULL:n[i][r]=Ui.encode(o.operands[0]);break;case qe.PULL_ALL:default:n[i][r]=on(o.operands[0])}}else n.$set||(n.$set={}),n.$set[r]=on(o)}return n},Xi=function(){function e(){}return e.encode=function(t){return(new e).encodeProjection(t)},e.prototype.encodeProjection=function(e){return et(e)?this.encodeProjectionCommand(e):"object"===Object(s.getType)(e)?this.encodeProjectionObject(e):e},e.prototype.encodeProjectionCommand=function(e){var t,n=Ni(e.operator);switch(e.operator){case Ze.SLICE:default:return(t={})[n]=e.operands[0],t}},e.prototype.encodeProjectionObject=function(e){var t=en(e);for(var n in t)!0===t[n]||1===t[n]?t[n]=1:!1===t[n]||0===t[n]?t[n]=0:et(t[n])?t[n]=this.encodeProjectionCommand(t[n]):delete t[n];return t},e}(),$i=function(){function e(){}return e.decode=function(t){return(new e).decodeData(t)},e.prototype.decodeData=function(e){var t=this;switch(Object(s.getType)(e)){case"object":return this.decodeObject(e);case"array":return e.map((function(e){if(Object(s.isObject)(e)){var n=an(e);return n!==e?n:t.decodeObject(e)}return e}));default:return e}},e.prototype.decodeObject=function(e){var t=Object(i.__assign)({},e);for(var n in t){var r=t[n];switch(Object(s.getType)(r)){case"object":var o=an(r);t[n]=o!==r?o:this.decodeObject(t[n]);break;case"array":(o=this.decodeData(r))!==r&&(t[n]=o);break;default:continue}}return t},e}();!function(e){e[e.DEFAULT=0]="DEFAULT"}(Bi||(Bi={}));var Zi=function(e,t){return new(ea(e.identifiers||{}))({context:e,config:t})};function Qi(e){return e.debug}var ea=function(e){var t,n;return function(){function i(i){var a,s=i.config,c=i.context;this.identifiers=e,this.config=s||{},t={database:this,serviceContext:c,engine:(void 0===a&&(a=Bi.DEFAULT),o)},n=Pi(t),s&&s.env&&l(s.env,"string"),this.command=vt,this.Geo=r,this.serverDate=gt,this.RegExp=Di,s&&s.hasOwnProperty("debug")&&Object.defineProperties(this,{debug:{value:!0},QuerySerializer:{enumerable:!1,configurable:!1,get:function(){return Qi((e=t).database)?e.engine.QuerySerializer:void 0;var e},set:function(){}},UpdateSerializer:{enumerable:!1,configurable:!1,get:function(){return Qi((e=t).database)?e.engine.UpdateSerializer:void 0;var e},set:function(){}},ProjectionSerializer:{enumerable:!1,configurable:!1,get:function(){return Qi((e=t).database)?e.engine.ProjectionSerializer:void 0;var e},set:function(){}},AggregateSerializer:{enumerable:!1,configurable:!1,get:function(){return Qi((e=t).database)?e.engine.AggregateSerializer:void 0;var e},set:function(){}},Decoder:{enumerable:!1,configurable:!1,get:function(){return Qi((e=t).database)?e.engine.Decoder:void 0;var e},set:function(){}}})}return i.prototype.collection=function(e){return new n(e)},i.prototype.toJSON=function(){},i}()};function ta(e){return{database:Zi.bind(null,e)}}var na="database";function ra(e){e.registerService(function(e){var t={name:na,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug},get env(){return e.getEnvForService(na)},appConfig:{get docSizeLimit(){return e.appConfig.db_doc_size_limit},get realtimePingInterval(){return e.appConfig.db_realtime_ping_interval},get realtimePongWaitTimeout(){return e.appConfig.db_realtime_pong_wait_timeout},get realtimeMaxReconnect(){return e.config.database.realtime.maxReconnect},get realtimeReconnectInterval(){return e.config.database.realtime.reconnectInterval},get realtimeTotalConnectionTimeout(){return e.config.database.realtime.totalConnectionTimeout},get realtimeQueryEventCacheTimeout(){return e.appConfig.db_realtime_query_event_cache_timeout}}};return{name:na,context:t,getAPIs:ta.bind(null,t)}}(e))}function oa(e){return{CloudID:(n=function(){function e(e){this._internalType=I,this.cloudID=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return e.prototype.toJSON=function(){return this.cloudID},e.prototype.toString=function(){return this.cloudID},e}(),function(e){return new n(e)}),CDN:(t=function(){function e(e){this._internalType=E,this.target=e,Object.defineProperties(this,{_internalType:{enumerable:!1,configurable:!1}})}return e.prototype.toString=function(){return JSON.stringify({target:this.target})},e}(),function(e){return new t(e)})};var t,n}var ia="utils";function aa(e){e.registerService(function(e){var t={name:ia,identifiers:e.identifiers,request:e.request,isInstance:e.isInstance,get debug(){return e.debug}};return{name:ia,context:t,getAPIs:oa.bind(null,t)}}(e))}function sa(e){H(e),be(e),ra(e),aa(e),ae(e)}n.d(t,"registerServices",(function(){return sa}))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(62),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(27))},function(e,t,n){(function(e,t){!function(e,n){if(!e.setImmediate){var r,o,i,a,s,c=1,u={},l=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){h(e.data)},r=function(e){i.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):r=function(e){setTimeout(h,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&h(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[c]=o,r(c),c++},f.clearImmediate=p}function p(e){delete u[e]}function h(e){if(l)setTimeout(h,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{p(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(27),n(54))},function(e,t,n){(function(e){var r=n(64),o=n(65),i=n(66);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=f(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),o=(e=s(e,r)).write(t,n);o!==r&&(e=e.slice(0,o));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):f(e,t);if("Buffer"===t.type&&i(t.data))return f(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(e).length;default:if(r)return U(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return P(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return A(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function g(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){var i,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(o){var l=-1;for(i=n;i<s;i++)if(u(e,i)===u(t,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===c)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(n+c>s&&(n=s-c),i=n;i>=0;i--){for(var d=!0,f=0;f<c;f++)if(u(e,i+f)!==u(t,f)){d=!1;break}if(d)return i}return-1}function y(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function m(e,t,n,r){return G(U(t,e.length-n),e,n,r)}function w(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function O(e,t,n,r){return w(e,t,n,r)}function S(e,t,n,r){return G(V(t),e,n,r)}function I(e,t,n,r){return G(function(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],o=t;o<n;){var i,a,s,c,u=e[o],l=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(i=e[o+1]))&&(c=(31&u)<<6|63&i)>127&&(l=c);break;case 3:i=e[o+1],a=e[o+2],128==(192&i)&&128==(192&a)&&(c=(15&u)<<12|(63&i)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:i=e[o+1],a=e[o+2],s=e[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),o+=d}return function(e){var t=e.length;if(t<=T)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=T));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,o){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(i,a),u=this.slice(r,o),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){i=u[d],a=l[d];break}return i<a?-1:a<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return y(this,e,t,n);case"utf8":case"utf-8":return m(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return O(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function k(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function A(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function P(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=t;i<n;++i)o+=W(e[i]);return o}function D(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function x(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);o<i;++o)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function M(e,t,n,r){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);o<i;++o)e[n+o]=t>>>8*(r?o:3-o)&255}function N(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(e,t,n,r,i){return i||N(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||N(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var o=t-e;n=new c(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||x(this,e,t,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):M(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);x(this,e,t,n,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<n&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var o=Math.pow(2,8*n-1);x(this,e,t,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):R(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):R(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):M(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||x(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):M(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return L(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return L(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var o,i=r-n;if(this===e&&n<t&&t<r)for(o=i-1;o>=0;--o)e[o+t]=this[o+n];else if(i<1e3||!c.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var a=c.isBuffer(e)?e:U(new c(e,r).toString()),s=a.length;for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function U(e,t){var n;t=t||1/0;for(var r=e.length,o=null,i=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function V(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}}).call(this,n(27))},function(e,t,n){t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=o[e.charCodeAt(n)]<<18|o[e.charCodeAt(n+1)]<<12|o[e.charCodeAt(n+2)]<<6|o[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=o[e.charCodeAt(n)]<<2|o[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=o[e.charCodeAt(n)]<<10|o[e.charCodeAt(n+1)]<<4|o[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,o=n%3,i=[],a=16383,s=0,c=n-o;s<c;s+=a)i.push(l(e,s,s+a>c?c:s+a));1===o?(t=e[n-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===o&&(t=(e[n-2]<<8)+e[n-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var o,i,a=[],s=t;s<n;s+=3)o=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?o-1:0,f=n?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?f/c:f*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*v}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){var r=n(57),o=n(5),i=n(6),a=n(0),s=n(8),c=Symbol("CDN"),u=function(e){this.symbol=c,this.options=e};function l(e){return new Promise((function(t,n){Object(s.getSDK)().uploadToCommonCDN(Object(a.__assign)(Object(a.__assign)({},e),{success:t,fail:n}))}))}function d(e){return new Promise((function(t,n){Object(s.getSDK)()._operateWXData(Object(a.__assign)(Object(a.__assign)({},e),{success:t,fail:n}))}))}var f,p,h,v=function(e){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){var t,n,r,o,i,s,u,f,p,h,v;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if(a.trys.push([0,3,,4]),!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");return t=new WeakMap,n=[],e.data&&JSON.stringify(e.data,(function(e,r){return r&&r.symbol===c?void n.push(new Promise((function(e,n){var o,i={appType:301,fileType:20303,fileKey:"file_"+Math.random()},a=r;switch(o=a.options,Object.prototype.toString.call(o).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");i.filePath=a.options.filePath;break;default:i.fileData=a.options}e(l(i).then((function(e){t.set(r,e.fileUrl)})))}))):r})),[4,Promise.all(n)];case 1:return a.sent(),r=JSON.stringify(e.data,(function(e,n){return n&&n.symbol===c&&t.has(n)?t.get(n):n})),[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:r,client_msg_id:Math.random()+"_"+Date.now(),version:1}})];case 2:o=a.sent().rawData,i=void 0,s=void 0,u=void 0;try{f=JSON.parse(o),i=f.request_id,0===f.errcode?s=JSON.parse(f.data):(h="invokeService:fail "+f.errcode+" "+f.errmsg+" (requestId: "+i+")",(u=new Error(h)).errCode=f.errcode,u.errMsg=h,u.requestId=i)}catch(e){h="invokeService:fail inner protocol parse failed (requestId: "+(i||"empty")+")",(u=new Error(h)).errCode=-1,u.errMsg=h,u.requestId=i}if(u)throw u;return[2,{errMsg:"invokeService:ok",data:s,requestId:i}];case 3:throw p=a.sent(),h="invokeService:fail ",p&&p.errMsg&&p.err_code?(h+=p.errMsg,(v=new Error(h+"(err_code "+p.err_code+")")).errCode=p.err_code,v):p&&p.errMsg&&p.errCode?p:new Error("invokeService:fail "+p);case 4:return[2]}}))}))};!function(e){e[e.CALL=1]="CALL",e[e.POLL=2]="POLL",e[e.PreResp=3]="PreResp",e[e.FinalResp=4]="FinalResp"}(f||(f={})),function(e){e[e.None=0]="None",e[e.SysErr=1]="SysErr",e[e.Timeout=2]="Timeout"}(p||(p={})),function(e){e[e.Sync=0]="Sync",e[e.LongAsync=2]="LongAsync"}(h||(h={}));var g,_=n(7),b=n(1),y={SM_EXCEED_MAX_TIMEOUT_POLL_RETRY:100,SM_EMPTY_CALL_RESULT:101,SM_EXCEED_MAX_POLL_RETRY:102,SM_PROVIDER_EXECUTION_ERROR:103,SM_POLL_RESULT_EXPIRED:104,SM_EMPTY_POLL_RESULT_BASE_RESP:105,SM_POLL_RESULT_BASE_RESP_RET_ABNORMAL:106,SM_UNKNOWN_SCENE:107,SM_SYSTEM_ERROR:108},m="exceed max timeout retry",w="empty call result",O="exceed max poll retry",S="invokeService";!function(e){e[e.InvalidRequestId=14]="InvalidRequestId"}(g||(g={}));var I=function(e){var t=new Date;return t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+" "+e},E=function(e){return e.join("->")},C=function(e){return Object(a.__awaiter)(void 0,void 0,void 0,(function(){function t(e,t,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(o){return[2,new Promise((function(o,i){var a=[I("start")],s=function(e,t,n){var r=function(t){e.push(I("app "+t))};return Object(_.onAppVisibilityChange)(r),{resolve:function(e){Object(_.offAppVisibilityChange)(r),t(e)},reject:function(e){Object(_.offAppVisibilityChange)(r),n(e)}}}(a,o,i),c=s.resolve,u=s.reject;n({param:e,data:t,callID:r,scene:f.CALL,retryReason:p.None,tryCount:50,systemErrorRetry:2,timeoutErrorRetry:2,trace:a,resolve:c,reject:u})}))]}))}))}function n(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,r,o,s,c,u,l,h,v,g,C,T,k,A,P,D,j,x,R,M,N,L,B,F=this;return Object(a.__generator)(this,(function(W){switch(W.label){case 0:t=e.param,r=e.data,o=e.callID,s=e.scene,c=e.retryReason,u=e.tryCount,l=e.trace,h=e.systemErrorRetry,v=e.timeoutErrorRetry,g=e.resolve,C=e.reject,T={service_id:t.service,api_name:t.api,data:s===f.CALL?r:void 0,client_msg_id:Math.random()+"_"+Date.now(),version:2,call_id:o,scene:s,retry_reason:c},k=!1,A=!1,P=function(){clearTimeout(j),A=!0},D=+new Date,j=setTimeout((function(){return Object(a.__awaiter)(F,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return 2e4,+new Date-D>2e4?[4,Object(_.sleep)()]:[3,2];case 1:if(t.sent(),A)return[2];t.label=2;case 2:return!Object(i.isDevTools)()&&+new Date-D>60?(l.push(I("timeout, exceed max retry gap")),[2,C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_POLL_RESULT_EXPIRED,errMsg:"timeout for retry, cannot retry fetching the result anymore (callId: "+o+") (trace: "+E(l)+")"},S))]):(k=!0,e.timeoutErrorRetry>0?(l.push(I("timeout, retry")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:s,retryReason:p.Timeout,tryCount:u-1,timeoutErrorRetry:v-1}))):(l.push(I("timeout, abort")),C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_EXCEED_MAX_TIMEOUT_POLL_RETRY,errMsg:m+" (callId: "+o+") (trace: "+E(l)+")"},S))),[2])}}))}))}),2e4),W.label=1;case 1:return W.trys.push([1,3,,4]),new Date,[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:T})];case 2:x=W.sent();try{if(new Date,k)return[2];if(P(),x.rawData,!(R=JSON.parse(x.rawData)))return l.push(I("empty resp")),[2,C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_EMPTY_CALL_RESULT,errMsg:w},S))];if(R.scene!==f.PreResp){if(R.scene===f.FinalResp){if(0!==R.errcode)return(M=Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_PROVIDER_EXECUTION_ERROR,errMsg:"requestID "+R.request_id+", error message "+(R.provider_errmsg||"unknown")+" (callid "+o+")"},S)).requestID=R.request_id,[2,C(M)];N=R.data;try{N=JSON.parse(N)}catch(e){}return[2,g({result:N,requestID:R.request_id})]}return l.push(I("unexpected scene")),[2,C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_UNKNOWN_SCENE,errMsg:"unknown scene "+R.scene+" (callId: "+o+") (trace: "+E(l)+")"},S))]}if(!(u>=0))return l.push(I("too many polls, abort")),[2,C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_EXCEED_MAX_POLL_RETRY,errMsg:O+" (callId: "+o+") (trace: "+E(l)+")"},S))];l.push(I("normal poll")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:f.POLL,retryReason:p.None,tryCount:u-1}))}catch(e){C(Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_POLL_ERROR,errMsg:"polling catch error: "+e+" (callId: "+o+")"},S))}return[3,4];case 3:return L=W.sent(),new Date,k?[2]:(P(),B=L instanceof Error?L:JSON.stringify(L),L&&L.operateWXDataFail&&h>0?(l.push(I("system error ("+B+"), retry")),n(Object(a.__assign)(Object(a.__assign)({},e),{scene:s,retryReason:p.SysErr,tryCount:u-1,systemErrorRetry:h-1}))):(l.push(I("system error ("+B+"), abort")),C(Object(b.returnAsFinalCloudSDKError)(B+" (callId: "+o+") (trace: "+E(l)+")",S))),[3,4]);case 4:return[2]}}))}))}var r,o,s,u,v,g,C,T,k,A,P,D,j;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:if(n.trys.push([0,6,,7]),!e.service||!e.api)throw new Error("field 'service' and 'api' must be provided");return r=new WeakMap,o=[],e.data&&JSON.stringify(e.data,(function(e,t){return t&&t.symbol===c?void o.push(new Promise((function(e,n){var o,i={appType:301,fileType:20303,fileKey:"file_"+Math.random()},a=t;switch(o=a.options,Object.prototype.toString.call(o).slice(8,-1)){case"Object":if(!a.options.filePath)throw new Error("filePath must be provided");i.filePath=a.options.filePath;break;default:i.fileData=a.options}e(l(i).then((function(e){r.set(t,e.fileUrl)})))}))):t})),[4,Promise.all(o)];case 1:return n.sent(),s=JSON.stringify(e.data,(function(e,t){return t&&t.symbol===c&&r.has(t)?r.get(t):t})),u=Math.random()+"_"+Date.now(),e.async?[3,3]:[4,t(e,s,u)];case 2:return v=n.sent(),g=v.result,C=v.requestID,[2,{errMsg:"invokeService:ok",data:g,requestId:C}];case 3:return[4,d({apiName:"webapi_servicemarket_jsapi_comm",reqData:{service_id:e.service,api_name:e.api,data:s,client_msg_id:Math.random()+"_"+Date.now(),version:2,call_id:u,scene:f.CALL,retry_reason:p.None,req_type:h.LongAsync}})];case 4:if(T=n.sent(),(k=JSON.parse(T.rawData)).scene===f.FinalResp&&0===k.errcode)return[2,{errMsg:"invokeService:ok",requestId:k.request_id}];throw(A=Object(b.returnAsFinalCloudSDKError)({errCode:y.SM_SYSTEM_ERROR,errMsg:"requestID "+k.request_id+", error message "+(k.errmsg||"unknown")+" (callid "+u+")"},S)).requestID=k.request_id,A;case 5:return[3,7];case 6:throw P=n.sent(),D="invokeService:fail ",P&&P.errMsg&&P.err_code?(D+=P.errMsg,(j=new Error(D+"(err_code "+P.err_code+")")).errCode=P.err_code,j):P&&P.errMsg&&P.errCode?P:new Error("invokeService:fail "+P);case 7:return[2]}}))}))};function T(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,d({apiName:"webapi_servicemarket_jsapi_retrieve",reqData:{request_id:e.requestId}})];case 1:if(t=o.sent(),0===(n=JSON.parse(t.rawData)).errcode)return n.provider_errmsg?[2,{errCode:0,errMsg:"getAsyncResult:fail provider execution error",status:n.status,providerErrMsg:n.provider_errmsg,requestId:n.request_id}]:[2,{errCode:0,errMsg:"getAsyncResult:ok",data:JSON.parse(n.data),status:n.status,requestId:n.request_id}];throw(r=new Error("getAsyncResult:fail requestID "+n.request_id+", error message "+(n.errmsg||"unknown"))).errCode=n.errcode,r.errMsg=n.errmsg,r}}))}))}var k="invokeService",A="getAsyncResult",P=function(e){(Object(i.isDevTools)()&&!e.async?v(e):C(e)).then((function(t){Object(o.invokeSuccessCompleteCallbacks)(k,e,t)})).catch((function(t){Object(o.invokeFailCompleteCallbacks)(k,e,t)}))},D=function(e){T(e).then((function(t){Object(o.invokeSuccessCompleteCallbacks)(A,e,t)})).catch((function(t){Object(o.invokeFailCompleteCallbacks)(A,e,t)}))},j={invokeService:function(e){return Object(o.hasAPICallback)(e)?P(e):Object(i.isDevTools)()&&!e.async?v(e):C(e)},getAsyncResult:function(e){return Object(o.hasAPICallback)(e)?D(e):T(e)},CDN:u};n.d(t,"getCloudInstance",(function(){return r.getCloudInstance})),n.d(t,"getCloudAPI",(function(){return r.getCloudAPI})),n.d(t,"DefaultCloud",(function(){return r.DefaultCloud})),n.d(t,"InstanceCloud",(function(){return r.InstanceCloud})),n.d(t,"serviceMarket",(function(){return j}))}]),regeneratorRuntime,__appServiceSDK__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=210)}([function(e,t,n){n.r(t),n.d(t,"publish",(function(){return r.publish})),n.d(t,"subscribe",(function(){return o.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return i.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return i.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return i.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return i.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return i.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return i.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return i._invokeMethod})),n.d(t,"onMethod",(function(){return a.onMethod})),n.d(t,"beforeInvoke",(function(){return u})),n.d(t,"beforeInvokePromise",(function(){return l})),n.d(t,"beforeInvokeFail",(function(){return d})),n.d(t,"beforeInvokeComplete",(function(){return f})),n.d(t,"beforeInvokeCallback",(function(){return p})),n.d(t,"invoke",(function(){return h.invoke})),n.d(t,"on",(function(){return v.on})),n.d(t,"baseOperateWXData",(function(){return A}));var r=n(149),o=n(151),i=n(116),a=n(154),s=n(15),c=n(10);function u(e,t,n){var r=Object(c.paramCheck)(t,n);return!r||(d(e,t,"parameter error: "+r),!1)}function l(e,t){var n=Object(c.paramCheck)(e,t);if(n)throw new Error("parameter error: "+n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;p({name:e,args:t,errMsg:n,errCode:r,success:!1})}function f(e){var t=e.name,n=e.args,r=void 0===n?{}:n,o=e.errMsg,i=void 0===o?"":o,a=e.res,c=void 0===a?{}:a;r=r||{};var u=t+":"+i,l=__errorTracer__.surroundThirdByTryCatch(r.complete||s.noop,"at api "+t+" complete callback function");c.errMsg=u,l(c)}function p(e){var t=e.name,n=e.args,r=void 0===n?{}:n,o=e.success,i=void 0===o||o,a=e.errMsg,u=void 0===a?"":a,l=e.errCode,d=e.res,f=void 0===d?{}:d;r=r||{};var p=i?t+":ok":t+":fail "+u,h=__errorTracer__.surroundThirdByTryCatch((i?r.success:r.fail)||s.noop,"at api "+t+" "+(i?"success":"fail")+" callback function"),v=__errorTracer__.surroundThirdByTryCatch(r.complete||s.noop,"at api "+t+" complete callback function");f.errMsg=p,Object(c.isNumber)(l)&&(f.errCode=l),h(f),v(f)}var h=n(153),v=n(155),g=(n(150),n(152),n(20)),_=n(1),b=n(3),y="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",m="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function w(e){return function(t){return Object(c.isString)(t)&&t.length>e?t.substr(0,e):t}}function O(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(c.getDataType)(e);switch(n){case"Number":case"Boolean":return e;case"String":return w(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:"+O(e.message)+"|"+O(e.stack)+"]";case"Object":return t?Object.keys(e).map((function(t){return O(t)+"="+O(e[t],!1)})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"["+n+"]";default:return"["+n+"]"}}function S(e){var t=e.WXDataApiName,n=e.argument,r=e.isSuccess,o=e.invokeTime,i=e.costTime,a=e.result,s=e.errMsg,c=e.isConfirm,u=e.queueLength,l=e.wxdataQueueTimestamp,d=e.wxdataDequeueTimestamp,f=e.beginCGITimestamp,p=e.CGICallbackTimestamp,h=e.beginCGITimestampAfterConfirm,v=e.CGICallbackTimestampAfterConfirm,g=e.wxlibCallbackTimestamp,S=e.requestInQueue,I=e.requestingCount,E=e.cost1,C=e.cost2,T=e.cost3,k=e.cost4,A=e.cost5,P=e.cost6;Math.random()<.05&&setTimeout((function(){var e=b.default.currentNetworkType,D=_.default.appType+1e3,j=_.default.appLaunchInfo&&void 0!==_.default.appLaunchInfo.scene?_.default.appLaunchInfo.scene:0,x=[t,O(JSON.stringify(n)),r?1:0,o,i,e,O(a),D,j,y,m,s&&O(s)||"",c?1:0,u,E,C,T,k,A,P,0,S?1:0,I,o,l,d,f,p,h,v,g].map(w(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:x})}),0)}Object(c.isString)(y)&&(y=y.replace(" ","")),Object(c.isString)(m)&&(m=m.replace(" ","-"));var I=0,E=wxNativeConsole.createLogger("baseOperateWXData"),C=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],T=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],k=["qbase_commapi","webapi_botdemo"];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);n._isFromBaseOperateWXData=!0;var r=t.beforeAll,o=t.beforeSuccess,a=t.beforeFail,s=n.data&&n.data.api_name;C.includes(s)?n.requestInQueue=!0:n.requestInQueue=!1,T.includes(s)?n.isImportant=!0:n.isImportant=!1,k.includes(n.data&&n.data.api_name)&&(n.keepAlive=!0);var c={WXDataApiName:s,argument:n,invokeTime:Date.now(),requestInQueue:n.requestInQueue,requestingCount:++I};E.info(n.data.api_name+" _options.requestInQueue",n.requestInQueue);for(var u=arguments.length,l=new Array(u>2?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];i.invokeMethod.apply(void 0,["operateWXData",n,{beforeAll:function(e){var n=Date.now();I--,c.costTime=n-c.invokeTime;try{if(e&&e.data&&e.data.data?c.result=JSON.stringify(e.data):c.result=e.data,e.clientInfo&&"object"===Object(g.default)(e.clientInfo)){var o=e.clientInfo;Object.keys(o).forEach((function(e){c[e]=o[e]})),c.cost1=o.wxdataQueueTimestamp-c.invokeTime,c.cost2=o.wxdataDequeueTimestamp-o.wxdataQueueTimestamp,c.cost3=o.beginCGITimestamp-o.wxdataDequeueTimestamp,c.cost4=o.CGICallbackTimestamp-o.beginCGITimestamp,c.cost5=o.wxlibCallbackTimestamp-o.CGICallbackTimestamp,c.cost6=n-o.wxlibCallbackTimestamp}}catch(e){E.error(e)}"function"==typeof r&&r.call(t,e)},beforeSuccess:function(e){c.isSuccess=!0,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof o&&o.call(t,e),S(c)},beforeFail:function(e){c.isSuccess=!1,c.errMsg=e.errMsg,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof a&&a.call(t,e),S(c)}}].concat(l))}},function(e,t,n){n.r(t);var r=__wxConfig;t.default=r},function(e,t,n){n.r(t),n.d(t,"PLATFORM",(function(){return o})),n.d(t,"IS_DEVTOOLS",(function(){return i})),n.d(t,"IS_ANDROID",(function(){return a})),n.d(t,"IS_IOS",(function(){return s})),n.d(t,"IS_WINDOWS",(function(){return c})),n.d(t,"IS_MAC",(function(){return u})),n.d(t,"IS_MINA",(function(){return l})),n.d(t,"IS_PC",(function(){return d})),n.d(t,"debugEnabled",(function(){return f})),n.d(t,"HOST",(function(){return p})),n.d(t,"IS_HOST_SDK",(function(){return h})),n.d(t,"IS_HOST_WMPF",(function(){return v})),n.d(t,"IS_HOST_WECHAT",(function(){return g})),n.d(t,"IS_USE_NATIVE_MAP",(function(){return _}));var r=n(1),o=r.default.platform,i="devtools"===r.default.platform,a="android"===r.default.platform,s="ios"===r.default.platform,c="windows"===r.default.platform,u="mac"===r.default.platform,l="mina"===r.default.platform,d=c||u;function f(){if(r.default&&"debug"in r.default&&void 0!==r.default.debug)return!!r.default.debug}var p=r.default.host||{},h="SDK"===p.env,v="WMPF"===p.env,g="WeChat"===p.env,_=p.forceUseNativeMap||!1},function(e,t,n){n.r(t);var r=n(69);t.default={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:r.AppStatus.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",(function(){return o}))},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return g})),n.d(t,"getRealRoute",(function(){return _})),n.d(t,"convertProtocolPath",(function(){return b})),n.d(t,"getRealRouteWithProtocol",(function(){return y})),n.d(t,"getRouteDomain",(function(){return m})),n.d(t,"routesHaveSameDomain",(function(){return w})),n.d(t,"urlEncodeFormData",(function(){return O})),n.d(t,"getQueryString",(function(){return S})),n.d(t,"addQueryStringToUrl",(function(){return I})),n.d(t,"validateUrl",(function(){return E})),n.d(t,"assign",(function(){return C})),n.d(t,"encodeUrlQuery",(function(){return T})),n.d(t,"transWxmlToHtml",(function(){return k})),n.d(t,"removeHtmlSuffixFromUrl",(function(){return A})),n.d(t,"AppServiceSdkKnownError",(function(){return P})),n.d(t,"ThirdScriptError",(function(){return D})),n.d(t,"extend",(function(){return j})),n.d(t,"arrayBufferToBase64",(function(){return N})),n.d(t,"base64ToArrayBuffer",(function(){return L})),n.d(t,"blobToArrayBuffer",(function(){return B})),n.d(t,"convertObjectValueToString",(function(){return F})),n.d(t,"guid",(function(){return W})),n.d(t,"checkClientVersion",(function(){return V})),n.d(t,"renameProperty",(function(){return G})),n.d(t,"compareVersion",(function(){return H})),n.d(t,"successCallback",(function(){return z})),n.d(t,"successWithMessage",(function(){return q})),n.d(t,"failWithMessage",(function(){return Y}));var r=n(4),o=n(14),i=n(19),a=n(8),s=n(146),c=n(20),u=n(1),l=n(10),d=n(2),f=n(68);function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(a.default)(e);if(t){var o=Object(a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}n.d(t,"paramCheck",(function(){return l.paramCheck})),n.d(t,"getDataType",(function(){return l.getDataType})),n.d(t,"isObject",(function(){return l.isObject}));var h=/^[-+a-zA-Z0-9]+:\/\//,v=/^__[-+a-zA-Z0-9]+__\//;function g(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function _(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n&&(t=k(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return _(e,t.substr(2),!1);var r,o,i=t.split("/");for(r=0,o=i.length;r<o&&".."===i[r];r++);i.splice(0,r);var a=e.length>0?e.split("/"):[];a.splice(a.length-r-1,r+1);var s=a.concat(i),c=s.join("/");return c}function b(e){var t=e.match(h);if(!t)return e;var n=t[0];if("plugin://"===n){var r=n.length,o=e.indexOf("/",r);if(o>=0){var i=e.slice(r,o),a=u.default.plugins&&u.default.plugins[i]?u.default.plugins[i].provider:i;e=e.slice(0,r)+a+e.slice(o)}var s=e.indexOf("?");s<0&&(s=e.length);var c=e.slice(0,s),l=exparser.Component._list[c];if(!l)throw new P('Page "'+c+'" is not found');e=l.is+e.slice(s)}else if("plugin-private://"===n){var d=e.indexOf("?");d<0&&(d=e.length);var f=e.slice(0,d);e="/"+__appServiceEngine__.convertComponentAliasToRoute(f)+e.slice(d)}else{if("wx://"!==n)throw new P('Unknown URL protocol "'+n+'"');e="/__wx__/"+e.slice(5)}return e}function y(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];h.test(t);)t=b(t);return _(e,t,n)}function m(e){var t=e.match(h),n=e.match(v),r="";if(t){var o=t[0];if("plugin://"===o){var i=o.length,a=e.indexOf("/",i);if(a>=0){var s=e.slice(i,a);r=u.default.plugins&&u.default.plugins[s]?u.default.plugins[s].provider:s}}else if("plugin-private://"===o){var c=o.length,l=e.indexOf("/",c);if(l>=0)r=e.slice(c,l)}else"wx://"===o&&(r="//")}if(n){var d=n[0];if("__plugin__/"===d){var f=d.length,p=e.indexOf("/",f);if(p>=0)r=e.slice(f,p)}else"__wx__/"===d&&(r="//")}return r}function w(e,t){var n=m(t);return!n||m(__virtualDOM__.convertRouteToComponentAlias(e))===n}function O(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!==Object(c.default)(e))return e;var n=[];for(var r in e)if(Object(f.hasOwnProperty)(e,r))if(t)try{n.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]))}catch(t){n.push(r+"="+e[r])}else n.push(r+"="+e[r]);return n.join("&")}function S(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);if(r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#"))),!r)return t;for(var o=r.split("&"),i=0;i<o.length;i++){var a=o[i].split("=");t[a[0]]=a[1]}}return t}function I(e,t){if("string"==typeof e&&"object"===Object(c.default)(t)&&null!==t&&Object.keys(t).length>0){var n=e.split("?");return n[0]+"?"+O(C((n[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],o=n[1];e[r]=o}return e}),{}),Object.keys(t).reduce((function(e,n){return"object"===Object(c.default)(t[n])?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e}),{})))}return e}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http";return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function C(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)e[n]=t[n];return e}),{})}function T(e){if("string"==typeof e){var t=e.split("?"),n=t[0],r=(t[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),r=n[0],o=n[1];e[r]=o}return e}),{}),o=[];for(var i in r)Object(f.hasOwnProperty)(r,i)&&o.push(i+"="+encodeURIComponent(r[i]));return o.length>0?n+"?"+o.join("&"):e}return e}function k(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}function A(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}var P=function(e){Object(o.default)(n,e);var t=p(n);function n(e){var o;return Object(r.default)(this,n),(o=t.call(this,"APP-SERVICE-SDK:"+e)).type="AppServiceSdkKnownError",o}return n}(Object(s.default)(Error)),D=function(e){Object(o.default)(n,e);var t=p(n);function n(e){var o;return Object(r.default)(this,n),(o=t.call(this,""+e)).type="ThirdScriptError",o}return n}(Object(s.default)(Error));function j(e,t){for(var n in t)e[n]=t[n];return e}var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",R=R||function(e){for(var t,n,r=String(e),o="",i=0,a=x;r.charAt(0|i)||(a="=",i%1);o+=a.charAt(63&t>>8-i%1*8)){if((n=r.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return o},M=M||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var r,o,i=0,a=0;o=t.charAt(a++);~o&&(r=i%4?64*r+o:o,i++%4)?n+=String.fromCharCode(255&r>>(-2*i&6)):0)o=x.indexOf(o);return n};function N(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,o=0;o<r;o++)t+=String.fromCharCode(n[o]);return R(t)}function L(e){for(var t=M(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}function B(e,t){var n=new FileReader;n.onload=function(){t(this.result)},n.readAsArrayBuffer(e)}function F(e){return Object.keys(e).reduce((function(t,n){return"string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t}),{})}function W(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var U=u.default.clientVersion||1;function V(e,t){switch(d.PLATFORM){case"devtools":return!0;case"ios":return U>e;case"android":return U>t;default:return!1}}function G(e,t,n){!1!==Object(l.isObject)(e)&&t!==n&&Object(f.hasOwnProperty)(e,t)&&(e[n]=e[t],delete e[t])}function H(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var r=0;r<n;r++){var o=parseInt(e[r],10),i=parseInt(t[r],10);if(o>i)return 1;if(o<i)return-1}return 0}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function Y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},function(e,t,n){var r;n.r(t),n.d(t,"ACTIONS",(function(){return r})),n.d(t,"COMMON_EVENT",(function(){return v.COMMON_EVENT})),n.d(t,"ROOT_EVENT",(function(){return v.ROOT_EVENT})),n.d(t,"BUTTON_EVENT",(function(){return v.BUTTON_EVENT})),n.d(t,"TEXT_EVENT",(function(){return v.TEXT_EVENT})),n.d(t,"VIDEO_EVENT",(function(){return v.VIDEO_EVENT})),n.d(t,"FEEDBACK_EVENT",(function(){return v.FEEDBACK_EVENT})),n.d(t,"ENDPAGE_EVENT",(function(){return v.ENDPAGE_EVENT})),n.d(t,"CAROUSEL_EVENT",(function(){return v.CAROUSEL_EVENT})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return v.REWARDEDVIDEO_EVENT})),n.d(t,"CUSTOM_EVENT",(function(){return g.CUSTOM_EVENT})),n.d(t,"ROOT_TYPES",(function(){return o})),n.d(t,"LAYOUT_TYPES",(function(){return i})),n.d(t,"IMAGE_TYPES",(function(){return a})),n.d(t,"TEXT_TYPES",(function(){return s})),n.d(t,"BUTTON_TYPES",(function(){return c})),n.d(t,"VIDEO_TYPES",(function(){return u})),n.d(t,"FEEDBACK_TYPES",(function(){return l})),n.d(t,"COUNTDOWN_TYPES",(function(){return d})),n.d(t,"ENDPAGE_TYPES",(function(){return f})),n.d(t,"FOR_TYPES",(function(){return p})),n.d(t,"CAROUSEL_TYPES",(function(){return h})),n.d(t,"IDKEY",(function(){return y.CUSTOMAD_IDKEY})),n.d(t,"ERROR_CODE",(function(){return _})),n.d(t,"DOWNLOAD_STATE",(function(){return b})),n.d(t,"AD_TYPE_IMAGE",(function(){return m})),n.d(t,"AD_TYPE_VIDEO",(function(){return w})),n.d(t,"scalableStyles",(function(){return O})),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}));var o,i,a,s,c,u,l,d,f,p,h,v=n(132),g=n(88);!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(o||(o={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(i||(i={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(a||(a={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(p||(p={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(h||(h={}));var _,b,y=n(73);!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(_||(_={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(b||(b={}));var m="image",w="video",O=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},function(e,t,n){function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),function(e){n.d(t,"getDataType",(function(){return o})),n.d(t,"safeInstanceOf",(function(){return i})),n.d(t,"isString",(function(){return a})),n.d(t,"isNumber",(function(){return s})),n.d(t,"isBoolean",(function(){return c})),n.d(t,"isUndefined",(function(){return u})),n.d(t,"isNull",(function(){return l})),n.d(t,"isNaN",(function(){return d})),n.d(t,"isFinite",(function(){return f})),n.d(t,"isInfinity",(function(){return p})),n.d(t,"isInteger",(function(){return h})),n.d(t,"isObject",(function(){return v})),n.d(t,"isNonNullObject",(function(){return g})),n.d(t,"isJustObject",(function(){return _})),n.d(t,"isArray",(function(){return b})),n.d(t,"isFunction",(function(){return y})),n.d(t,"isDate",(function(){return m})),n.d(t,"isRegExp",(function(){return w})),n.d(t,"isError",(function(){return O})),n.d(t,"isSymbol",(function(){return S})),n.d(t,"isMap",(function(){return I})),n.d(t,"isWeakMap",(function(){return E})),n.d(t,"isSet",(function(){return C})),n.d(t,"isWeakSet",(function(){return T})),n.d(t,"isPromise",(function(){return k})),n.d(t,"isEmptyObject",(function(){return A})),n.d(t,"isArrayBuffer",(function(){return P})),n.d(t,"isDataView",(function(){return D})),n.d(t,"isTypedArray",(function(){return j})),n.d(t,"isVirtualNode",(function(){return x})),n.d(t,"isVirtualText",(function(){return R})),n.d(t,"paramCheck",(function(){return M})),n.d(t,"safelyToString",(function(){return N}));var r=Object.prototype.toString;function o(e){return r.call(e).slice(8,-1)}function i(e,t){return null!=e&&(e instanceof t||null!=e.constructor&&e.constructor.name===t.name)}var a=function(e){return"String"===o(e)},s=function(e){return"Number"===o(e)},c=function(e){return!0===e||!1===e||"Boolean"===o(e)},u=function(e){return void 0===e},l=function(e){return null===e},d=Number.isNaN||function(e){return e!=e},f=Number.isFinite||function(t){return s(t)&&e.isFinite(t)},p=function(e){return s(e)&&Math.abs(e)===1/0},h=function(e){return f(e)&&Math.floor(e)===e},v=function(e){return"Object"===o(e)},g=function(e){return v(e)&&!l(e)},_=function(e){return"Object"===o(e)},b=Array.isArray||function(e){return"Array"===o(e)},y=function(e){return"function"==typeof e},m=function(e){return"Date"===o(e)},w=function(e){return"RegExp"===o(e)},O=function(e){return"Error"===o(e)},S=function(e){return"Symbol"===o(e)},I=function(e){return"Map"===o(e)},E=function(e){return"WeakMap"===o(e)},C=function(e){return"Set"===o(e)},T=function(e){return"WeakSet"===o(e)},k=function(e){return"Promise"===o(e)},A=function(e){for(var t in e)return!1;return!0},P=function(e){return"ArrayBuffer"===o(e)},D=function(e){return"DataView"===o(e)},j=function(e){return ArrayBuffer.isView(e)&&!D(e)},x=function(e){return e&&"WxVirtualNode"===e.type},R=function(e){return e&&"WxVirtualText"===e.type};function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",r=o(t),i=o(e);if(i!==r)return n+" should be "+r+" instead of "+i+";";var a="";switch(r){case"Object":Object.keys(t).forEach((function(r){a+=M(e[r],t[r],n+"."+r)}));break;case"Array":if(e.length<t.length)return n+" should have at least "+t.length+" item;";for(var s=0;s<t.length;++s)a+=M(e[s],t[s],n+"["+s+"]")}return a}function N(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return d})),n.d(t,"surroundWXByTryCatch",(function(){return p})),n.d(t,"timeout",(function(){return h})),n.d(t,"deepFreeze",(function(){return v})),n.d(t,"EventEmitter",(function(){return g})),n.d(t,"getDataLength",(function(){return _})),n.d(t,"checkAPIAvailable",(function(){return b})),n.d(t,"isGame",(function(){return y})),n.d(t,"isApp",(function(){return m})),n.d(t,"promisify",(function(){return w})),n.d(t,"transformToCamelCaseVar",(function(){return O})),n.d(t,"transformToUnderScoreCaseVar",(function(){return S})),n.d(t,"capitalizeFirstLetter",(function(){return I})),n.d(t,"skipURLCheck",(function(){return E})),n.d(t,"versionCompare",(function(){return C})),n.d(t,"executeOnlyOnce",(function(){return T})),n.d(t,"filterObject",(function(){return k})),n.d(t,"hideInnerRequest",(function(){return A})),n.d(t,"isSinglePageMode",(function(){return P})),n.d(t,"isIn3rdApp",(function(){return D})),n.d(t,"isIsolateContext",(function(){return j})),n.d(t,"compareClientVersion",(function(){return x}));var r=n(4),o=n(5),i=n(20),a=n(33),s=n(1),c=n(24),u=n(2),l=n(10);function d(e,t,n){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:n,error:e,extend:t})}}}}function f(e,t,n,r){Object.defineProperty(e,n,{get:function(){var e=this;return"function"==typeof t[n]?d((function(){return Object(c.checkWxInterfaceSupported)(n),Object(c.wrappedByCheckPermissionInTap)(n,t[n]).apply(e,arguments)}),"wx."+n,r):t[n]},enumerable:!0,configurable:!0})}var p=function(e,t){var n={};for(var r in e)f(n,e,r,t);return n},h=function(e,t){var n=t.timeout;if("number"==typeof n){var r=!1,o=setTimeout((function(){var e={errMsg:"request timeout"};r=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),i=["success","fail","complete"].reduce((function(e,n){return e[n]=function(e){r||(clearTimeout(o),"function"==typeof t[n]&&t[n](e))},e}),{});e(Object.assign({},t,i))}else e(t)};function v(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n;try{n=e[t]}catch(e){}"object"!==Object(i.default)(n)&&"function"!=typeof n||Object.isFrozen(n)||v(n)})),e}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxListeners:2e3};Object(r.default)(this,e),this.emitter=new a.default(t),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}return Object(o.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r)}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}},{key:"listeners",value:function(e){return this.emitter.listeners(e)}}]),e}();function _(e){return"string"==typeof e?e.length:"object"===Object(i.default)(e)&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function b(e){var t="unknown";if(s.default.appContactInfo&&s.default.appContactInfo.operationInfo&&s.default.appContactInfo.operationInfo.jsonInfo&&s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable){var n=s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable;"number"==typeof n[e]&&(t=1===n[e])}return t}function y(){return 4===s.default.appType}function m(){return 0===s.default.appType}function w(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}}function O(e){return e.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]}))}function S(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}function E(){return u.IS_DEVTOOLS?!s.default.urlCheck:!0===s.default.debug}function C(e,t){var n,r=String(e).split(".").map((function(e){return parseInt(e,10)})),o=String(t).split(".").map((function(e){return parseInt(e,10)})),i=Math.max(r.length,o.length);if(null!=e&&null!=t){if(0===e.length&&0===t.length)return 0;if(0===e.length)return-1;if(0===t.length)return 1;for(var a=0;a<i&&0===(n=s(r[a],o[a]));a++);return n}function s(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e>t?1:e<t?-1:0}console.error("versionCompare()参数格式错误")}function T(e){var t=!1;return function(){if(!t)return t=!0,e.apply(void 0,arguments)}}function k(e,t){return t.reduce((function(t,n){return Object(l.isUndefined)(e[n])||(t[n]=e[n]),t}),{})}function A(e){if(!u.IS_DEVTOOLS||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){var t=e.split("?"),n=t[1]||"",r=n.length>0?"&":"";e=t[0]+"?"+n+r+"devtools_ignore=true"}return e}function P(){return s.default.appLaunchInfo&&"singlePage"===s.default.appLaunchInfo.mode}function D(){var e=s.default.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}var j=function(){return s.default.isIsolateContext};function x(e,t){var n=function(e){if("string"==typeof e){for(var t=e.split(".").map((function(e){return parseInt(e,10)}));t.length<4;)t.push(0);return function(e){for(var t=e.length,n=0,r=0;r<t;++r)n=n<<8|e[r];return n}(t.slice(0,4))}return"number"==typeof e?268435455&e:e};return(e=n(e))>(t=n(t))?1:e<t?-1:0}},function(e,t,n){n.r(t),n.d(t,"Component",(function(){return l})),n.d(t,"getPrivateThis",(function(){return s})),n.d(t,"removePrivateThis",(function(){return u})),n.d(t,"init",(function(){return d})),n.d(t,"create",(function(){return c}));var r=n(4),o=n(34),i=n(18),a=new WeakMap,s=function(e){return a.get(e)},c=function e(t){var n=this,r=s(this),a={view:o.View,text:o.Text,image:o.Image,video:o.Video,"image-previewer":o.ImagePreviewer}[t.name],c="";t.attributes.id?c=Object(i.splitLineToCamelCase)(t.attributes.id):wxNativeConsole.error(t.name+" 缺少id");var u=Object.keys(t.attributes).reduce((function(e,n){var o=t.attributes[n],a=Object(i.splitLineToCamelCase)(n);return"id"===n?(e.style=Object.assign(e.style||{},r.style[c]),e):"class"===n?(e.style=o.split(/\s+/).reduce((function(e,t){return Object.assign(e,r.style[t])}),e.style||{}),e):(/\{\{.+\}\}/.test(o)||(e[a]=""===o||"true"===o||"false"!==o&&o),e)}),{});u.name=c;var l=new a(u);return r[c]=l,t.children.forEach((function(t){var r=e.call(n,t);l.add(r)})),l},u=function(e){a.delete(e)},l=function e(){Object(r.default)(this,e);a.set(this,{})},d=function(e,t,n){var r=s(this);r.xom=e,r.style=t,r.state=n,c.call(this,e)}},function(e,t,n){e.exports=n(197)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(128);function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(r.default)(e,t)}},function(e,t,n){n.r(t),n.d(t,"guid",(function(){return u})),n.d(t,"surroundByTryCatchFactory",(function(){return l})),n.d(t,"noop",(function(){return d})),n.d(t,"anyTypeToString",(function(){return f})),n.d(t,"stringToAnyType",(function(){return p})),n.d(t,"surroundByPromiseFactory",(function(){return h})),n.d(t,"promised",(function(){return v})),n.d(t,"asyncPromised",(function(){return g})),n.d(t,"invoke2Async",(function(){return b})),n.d(t,"async2Invoke",(function(){return y})),n.d(t,"async2InvokeWithPromise",(function(){return m}));var r=n(135),o=n(16),i=n(10),a=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function l(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function d(){}var f=l((function(e){var t=Object(i.getDataType)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");var p=l((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function h(e){return function(){for(var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];var a=n=n||{},s=a.success,c=a.fail,u=a.complete;return s||c||u?e.apply(this,[n].concat(o)):new Promise((function(r,i){var a=Object.assign({success:r,fail:i},n);e.apply(t,[a].concat(o))}))}}function v(e,t,n){var r=h(n.value);return n.value=function(){return r.apply(this,arguments)},n}function g(e,t,n){var r=n.value,o=h(y(t,r));return n.value=function(){return o.apply(this,arguments)},n}var _=Symbol("ErrorInfosSymbol"),b=function(e){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return new Promise((function(n,i){return e.apply(void 0,[c(c({},t),{},{success:n,fail:function(e){var t=e.errMsg,n=Object(r.default)(e,["errMsg"]),o=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(o,n),o[_]=n,i(o)},complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errMsg,n=Object(r.default)(e,["errMsg"]);if(t&&!/^\w+:(ok|fail)/.test(t)){var o=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(o,n),o[_]=n,o._complete_hook=!0,i(o)}}})].concat(o))}))}},y=function(e,t){return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.success,i=n.fail,s=n.complete,c=Object(r.default)(n,["success","fail","complete"]),u={success:o,fail:i,complete:s},l=arguments.length,d=new Array(l>1?l-1:0),f=1;f<l;f++)d[f-1]=arguments[f];t.apply(void 0,[c].concat(d)).then((function(t){return Object(a.beforeInvokeCallback)({name:e,args:u,success:!0,res:t})}),(function(t){t._complete_hook?Object(a.beforeInvokeComplete)({name:e,args:u,errMsg:t.message,res:t[_]||{}}):Object(a.beforeInvokeCallback)({name:e,args:u,success:!1,errMsg:t.message,res:t[_]||{}})}))}},m=function(e,t){return h(y(e,t))}},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"CRT_SIZE",(function(){return o})),n.d(t,"POS_ID_MAP",(function(){return i})),n.d(t,"POS_TYPE_MAP",(function(){return a})),n.d(t,"EXPOSURE_TYPE_MAP",(function(){return s})),n.d(t,"ANALYSE_INFO_DEBUG_TYPE",(function(){return c})),n.d(t,"FLOW_EXP_MAP",(function(){return u})),n.d(t,"PRODUCT_TYPE",(function(){return l})),n.d(t,"WX_AD_PATH",(function(){return d})),n.d(t,"SPLASHAD_FETCH_LOG",(function(){return f})),n.d(t,"ID_KEY_MAP",(function(){return p})),n.d(t,"SPLASHAD_IDKEY",(function(){return h})),n.d(t,"AD_TYPE_MAP",(function(){return v})),n.d(t,"REPORT_TYPE_MAP",(function(){return g})),n.d(t,"REPORT_EXPOSURE_TYPE_MAP",(function(){return _})),n.d(t,"NET_TYPE_MAP",(function(){return b})),n.d(t,"SPLASHAD_ERROR_CODE",(function(){return y})),n.d(t,"BIG_PIC_TITLE_MAP",(function(){return m}));var r=n(7);n.d(t,"CUSTOMAD_IDKEY",(function(){return r.IDKEY})),n.d(t,"CUSTOMAD_ERROR_CODE",(function(){return r.ERROR_CODE}));var o={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},i={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},a={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},u={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch"},l={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},d="wxfile://ad",f=d+"/adinfos.txt",p={splashAd:1288,customAd:1390},h={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},v={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},g={click:1,exposure:0},_={showed:0,viewable:1,incentiveVideoCard:2},b={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},y={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},m={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},function(e,t,n){n.r(t),n.d(t,"contain",(function(){return o})),n.d(t,"timeout",(function(){return i})),n.d(t,"logReport",(function(){return a})),n.d(t,"log",(function(){return s})),n.d(t,"truncate",(function(){return c})),n.d(t,"splitLineToCamelCase",(function(){return u})),n.d(t,"filterUndefined",(function(){return d})),n.d(t,"hex",(function(){return f})),n.d(t,"promisify",(function(){return l})),n.d(t,"throttle",(function(){return p}));var r=n(20),o=function(e){var t,n,r,o=e.outer,i=void 0===o?{width:0,height:0}:o,a=e.inner,s=void 0===a?{width:0,height:0}:a,c=e.maxScale,u=void 0===c?1e3:c,l=e.minScale,d=void 0===l?0:l,f=e.side,p=i.width/i.height,h=s.width/s.height,v=i.width/s.width,g=i.height/s.height,_=p>h?g:v;return"width"===f?_=v:"height"===f&&(_=g),t=_,n=d,r=u,_=Math.min(Math.max(n,t),r),s.width*=_,s.height*=_,i.width=Math.max(i.width,s.width),i.height=Math.max(i.height,s.height),{scale:_,outer:i,inner:s}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))},a=function(){},s=function(){},c=function(e,t){for(var n="",r=0,o=0;o<e.length;o++){if((r+=/[\u4e00-\u9fa5]/.test(e[o])?2:1)>t){n+="...";break}n+=e[o]}return n},u=function(e){return e.split("-").map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join("")},l=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,r){e(Object.assign(t,{success:n,fail:r}))}))}},d=function e(t){return Object.keys(t).reduce((function(n,o){var i=t[o],a=Object(r.default)(i);return"object"===a&&null!==i?n[o]=e(i):"undefined"!==a&&(n[o]=t[o]),n}),{})},f=function(e){var t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e})).join(""):"#00000000":e},p=function(e,t,n){var r,o,i,a=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Date.now(),a=null,i=e.apply(r,o),a||(r=o=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var l=t-(u-s);return r=this,o=arguments,l<=0||l>t?(clearTimeout(a),a=null,s=u,i=e.apply(r,o),a||(r=o=null)):a||!1===n.trailing||(a=setTimeout(c,l)),i}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(20),o=n(9);function i(e,t){return!t||"object"!==Object(r.default)(t)&&"function"!=typeof t?Object(o.default)(e):t}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"login",(function(){return at})),n.d(t,"logout",(function(){return ct})),n.d(t,"checkSession",(function(){return st})),n.d(t,"authorize",(function(){return ut.authorize})),n.d(t,"_authorize",(function(){return ut._authorize})),n.d(t,"getUserInfo",(function(){return lt})),n.d(t,"getUserProfile",(function(){return dt})),n.d(t,"_getNativeUserInfo",(function(){return ft._getNativeUserInfo})),n.d(t,"chooseAddress",(function(){return pt})),n.d(t,"_chooseAddressForPlugin",(function(){return ht._chooseAddressForPlugin})),n.d(t,"_requestPaymentForPlugin",(function(){return vt._requestPaymentForPlugin})),n.d(t,"getSetting",(function(){return gt.getSetting})),n.d(t,"transformGetSettingResponse",(function(){return gt.transformGetSettingResponse})),n.d(t,"openSetting",(function(){return yt})),n.d(t,"_openSetting",(function(){return bt})),n.d(t,"_openSettingForPlugin",(function(){return mt._openSettingForPlugin})),n.d(t,"getWeRunData",(function(){return wt})),n.d(t,"uploadWeRunData",(function(){return Ot})),n.d(t,"addWeRunData",(function(){return St})),n.d(t,"chooseInvoiceTitle",(function(){return It.chooseInvoiceTitle})),n.d(t,"operateWXData",(function(){return m.operateWXData})),n.d(t,"_operateWXData",(function(){return m._operateWXData})),n.d(t,"constructOperateWXData",(function(){return m.constructOperateWXData})),n.d(t,"_pluginOperateWXData",(function(){return m._pluginOperateWXData})),n.d(t,"getOpenDeviceId",(function(){return Ct})),n.d(t,"getUserGameLabel",(function(){return Tt})),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return kt.reportUserBehaviorBranchAnalytics})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return kt.reportUserBehaviorBranchAnalyticsForDebug})),n.d(t,"shareToWeRun",(function(){return Bt})),n.d(t,"sendGroupMessage",(function(){return Wt})),n.d(t,"reportGroupShare",(function(){return Ut})),n.d(t,"payment",(function(){return r})),n.d(t,"share",(function(){return Ce})),n.d(t,"card",(function(){return Te})),n.d(t,"soter",(function(){return o})),n.d(t,"redPacket",(function(){return i})),n.d(t,"facialRecognition",(function(){return a})),n.d(t,"trafficCard",(function(){return s})),n.d(t,"favorites",(function(){return c})),n.d(t,"checkIsUserAdvisedToRest",(function(){return Gt})),n.d(t,"chooseInvoice",(function(){return zt})),n.d(t,"faceVerifyForPay",(function(){return qt})),n.d(t,"openOfficialAccountProfile",(function(){return Yt})),n.d(t,"openMiniProgramProfile",(function(){return Kt})),n.d(t,"openUserProfile",(function(){return Jt})),n.d(t,"preventApplePayUI",(function(){return $t})),n.d(t,"getWxSecData",(function(){return Zt})),n.d(t,"requestSubscribeMessage",(function(){return nn})),n.d(t,"openMiniProgramSearch",(function(){return sn})),n.d(t,"openMiniProgramHistoryList",(function(){return cn})),n.d(t,"openMiniProgramStarList",(function(){return un})),n.d(t,"batchGetContactDirectly",(function(){return ln})),n.d(t,"preloadMiniProgramEnvDirectly",(function(){return dn})),n.d(t,"predownloadMiniProgramPackageDirectly",(function(){return fn})),n.d(t,"requestBizSplitBillPayment",(function(){return pn})),n.d(t,"getGroupEnterInfo",(function(){return bn}));var r={};n.r(r),n.d(r,"requestPayment",(function(){return V})),n.d(r,"verifyPaymentPassword",(function(){return X})),n.d(r,"bindPaymentCard",(function(){return $})),n.d(r,"requestPaymentToBank",(function(){return Z})),n.d(r,"requestVirtualPayment",(function(){return Q})),n.d(r,"openOfflinePayView",(function(){return ee})),n.d(r,"openWCPayCardList",(function(){return te})),n.d(r,"requestMallPayment",(function(){return ne})),n.d(r,"setCurrentPaySpeech",(function(){return re})),n.d(r,"loadPaySpeechDialectConfig",(function(){return oe})),n.d(r,"requestJointPayment",(function(){return ie})),n.d(r,"getWCPayOverseaPrepayRequest",(function(){return ae})),n.d(r,"requestH5Transaction",(function(){return se})),n.d(r,"openWCPayOverseaPaymentReceive",(function(){return ce})),n.d(r,"handleWCPayOverseaWalletBuffer",(function(){return ue})),n.d(r,"requestVerifyUserIdentity",(function(){return le})),n.d(r,"openSelectPayment",(function(){return de})),n.d(r,"requestEntrustAuthorization",(function(){return fe})),n.d(r,"requestFacetoFacePayment",(function(){return pe})),n.d(r,"phoneBindCardVerifySms",(function(){return ve})),n.d(r,"requestQueryCashier",(function(){return ge})),n.d(r,"requestPersonalPay",(function(){return he})),n.d(r,"requestOrderPayment",(function(){return Ee}));var o={};n.r(o),n.d(o,"checkIsSupportSoterAuthentication",(function(){return ke})),n.d(o,"startSoterAuthentication",(function(){return Ae})),n.d(o,"checkIsSoterEnrolledInDevice",(function(){return Pe}));var i={};n.r(i),n.d(i,"openGoldenRedPacketDetail",(function(){return De})),n.d(i,"sendGoldenRedPacket",(function(){return je})),n.d(i,"sendBizRedPacket",(function(){return Me})),n.d(i,"sendRedPacket",(function(){return Ne})),n.d(i,"openRedPacket",(function(){return Le})),n.d(i,"showRedPackage",(function(){return Fe}));var a={};n.r(a),n.d(a,"checkIsSupportFacialRecognition",(function(){return We})),n.d(a,"startFacialRecognitionVerify",(function(){return Ge})),n.d(a,"startCustomFacialRecognitionVerify",(function(){return He})),n.d(a,"startFacialRecognitionVerifyAndUploadVideo",(function(){return ze})),n.d(a,"startCustomFacialRecognitionVerifyAndUploadVideo",(function(){return qe}));var s={};n.r(s),n.d(s,"checkTrafficCardConditions",(function(){return Ye})),n.d(s,"queryTrafficCardInfo",(function(){return Ke})),n.d(s,"issueTrafficCard",(function(){return Je})),n.d(s,"rechargeTrafficCard",(function(){return Xe})),n.d(s,"setDefaultTrafficCard",(function(){return $e}));var c={};n.r(c),n.d(c,"addFileToFavorites",(function(){return tt})),n.d(c,"addVideoToFavorites",(function(){return it}));var u=n(135),l=n(13),d=n.n(l),f=n(16),p=n(38),h=n(0),v=n(45),g=n(41),_=n(96),b=n(1),y=n(54),m=n(36),w=n(59),O=n(126),S=n(2),I=n(10),E=n(11),C=n(113),T=n(15),k=n(29),A=n(63);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j,x,R,M,N=0,L=1,B=2,F=3,W=4,U=(Object(A.onAppEnterForeground)((function(e){j=+e.scene||0,x=e.scene_note||e.sceneNote||"",R=+e.prescene||0,M=e.prescene_note||e.presceneNote||""})),b.default.onReady((function(){var e;e=b.default.appLaunchInfo||{},j=e.scene||0,x=e.scene_note||e.sceneNote||"",R=e.prescene||0,M=e.prescene_note||e.presceneNote||""})),function(){return{scene:j,scene_note:x,prescene:R,prescene_note:M}}),V=Object(T.async2Invoke)("requestPayment",function(){var e=Object(p.default)(d.a.mark((function e(t){var n,r,o,i,a,s,c,u,l,f,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Object(I.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=3;break}throw new Error("parameter error: "+n);case 3:if(t=Object.assign({},t),r=Object(C.getShouldCheckTicketBeforePayment)(),o=r.deprecated,i=!1,!(i="develop"===b.default.envVersion||"trial"===b.default.envVersion?b.default.usingShopPlugin||!1:Object(C.getShouldCheckTicketBeforePayment)().shouldCheck||!1)){e.next=35;break}if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),!o){e.next=11;break}throw new Error("deprecated for shop plugin");case 11:return a=N,s=t.ticket||"",e.prev=13,c=Object(C.getShouldCheckTicketBeforePayment)().timeout||500,e.prev=15,e.next=18,Promise.race([q(D({ticket:s,prepay_id:t.package.replace("prepay_id=","")},U())),Y("timeout",c)]);case 18:u=e.sent,l=u.is_authorized,a=l?F:W,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),e.t0,wxNativeConsole.error("[paymentCheckTicket] fail",e.t0),a=e.t0&&"timeout"===e.t0.message?B:L;case 29:if(a!==W){e.next=31;break}throw new Error("check ticket rejected");case 31:return e.prev=31,K({ticket:s,checkTicketStatus:a}),e.finish(31);case 35:return f=Oe.NONE,e.prev=36,e.next=39,J(t);case 39:return h=e.sent,f=Oe.SUCCESS,e.abrupt("return",h);case 44:throw e.prev=44,e.t1=e.catch(36),f=Oe.FAILED,p=e.t1.message,e.t1;case 49:return e.prev=49,i&&Ie({prepayId:(t.package||"").replace("prepay_id=",""),requestPaymentStatus:f,requestPaymentErrmsg:p}),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[13,,31,35],[15,24],[36,44,49,52]])})));return function(t){return e.apply(this,arguments)}}()),G=function(){var e=Object(p.default)(d.a.mark((function e(){var t,n,r,o,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){Object(_.getRequestPaymentFromStorage)((function(t){var n=!1,r="",o=b.default&&b.default.appContactInfo&&b.default.appContactInfo.operationInfo&&b.default.appContactInfo.operationInfo.jsonInfo&&b.default.appContactInfo.operationInfo.jsonInfo.warning_info&&b.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];o&&o.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,r=e.wording)})),e({time:t,isRistWarning:n,wording:r})}))}));case 2:if(t=e.sent,n=t.time,r=t.isRistWarning,o=t.wording,i=(+new Date-(n||0))/1e3/60,!(r&&i>30)){e.next=10;break}return e.next=10,new Promise((function(e,t){Object(g._showModal)({content:o,confirmText:"继续支付",cancelText:"取消",success:function(n){n.confirm?(Object(_.setRequestPaymentToStorage)(+new Date),e()):t(new Error("cancel"))}})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=Object(T.invoke2Async)(h.invokeMethod.bind(null,"requestPayment")),z=Object(T.invoke2Async)(m._operateWXData),q=function(){var e=Object(p.default)(d.a.mark((function e(){var t,n,r,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,z({apiName:"webapi_openproductcheckticket",reqData:D({},t)});case 3:return n=e.sent,r=n.respData,e.abrupt("return",JSON.parse(r.data));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e,t){return new Promise((function(n,r){return setTimeout((function(){return r(new Error(e))}),t)}))},K=function(e){var t=e.ticket,n=e.checkTicketStatus,r=b.default.appLaunchInfo||{},o=U(),i=[r.sessionid||r.sessionId||"",o.scene,o.scene_note,o.prescene,o.prescene_note,n||0,t||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:i})},J=function(){var e=Object(p.default)(d.a.mark((function e(t){var n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return n=Object(y.getPayCookieString)(),t.passCookies&&"string"==typeof t.passCookies?t.cookie=n?t.passCookies+";; "+n:t.passCookies:n?t.cookie=n:delete t.cookie,delete t.passCookies,r=Object(O.getAdUxInfo)(),e.next=8,H(D(D({adUxInfo:r},t),{},{grantMessageQuota:!0}));case 8:return o=e.sent,Object(m._operateWXData)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:t.package.replace("prepay_id=","")}}),Object(v.invokeWebviewMethod)("reportPaymentFormId",{packageStr:t.package}),Object(w._setWxIsInvokeInTapForNavToMiniProgram)(),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){Object(h.invokeMethod)("verifyPaymentPassword",e)},$=function(e){Object(h.invokeMethod)("bindPaymentCard",e)},Z=function(e){Object(h.invokeMethod)("requestPaymentToBank",e)},Q=function(e){Object(h.invokeMethod)("requestVirtualPayment",e)},ee=function(e){Object(h.invokeMethod)("openOfflinePayView",e)},te=function(e){Object(h.invokeMethod)("openWCPayCardList",e)},ne=function(e){Object(h.invokeMethod)("requestMallPayment",e)},re=function(e){Object(h.invokeMethod)("setCurrentPaySpeech",e)},oe=function(e){Object(h.invokeMethod)("loadPaySpeechDialectConfig",e)},ie=function(e){Object(h.invokeMethod)("requestJointPayment",e)},ae=function(e){Object(h.invokeMethod)("getWCPayOverseaPrepayRequest",e)},se=function(e){Object(h.invokeMethod)("requestH5Transaction",e)},ce=function(e){Object(h.invokeMethod)("openWCPayOverseaPaymentReceive",e)},ue=function(e){Object(h.invokeMethod)("handleWCPayOverseaWalletBuffer",e)},le=function(e){Object(h.invokeMethod)("requestVerifyUserIdentity",e)},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openSelectPayment",e)},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("requestEntrustAuthorization",e)},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("requestFacetoFacePayment",e)},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("requestPersonalPay",e)},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.15")>=0||S.IS_IOS&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.13")>=0?Object(h.invokeMethod)("phoneBindCardVerifySms",e):Object(h.beforeInvokeFail)("phoneBindCardVerifySms",e,"not yet supported")},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.beforeInvoke)("requestQueryCashier",e,{timeStamp:0,nonceStr:"",package:"",signType:"",paySign:""})&&Object(h.invokeMethod)("requestQueryCashier",e)},_e=0,be=1,ye=2,me=3,we=4,Oe={NONE:0,SUCCESS:1,FAILED:2},Se=function(){var e=Object(p.default)(d.a.mark((function e(){var t,n,r,o,i,a,s,c=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.extUserUin,r=t.prepayId,o=t.orderInfo,i=b.default.appLaunchInfo||{},e.next=4,z({apiName:"webapi_openproductaddorder",reqData:{ext_info:D({ext_useruin:n,ext_appid:b.default.host&&b.default.host.appId,session_id:i.sessionid||i.sessionId||""},U()),prepay_id:r,order_info:o}});case 4:return a=e.sent,s=a.respData,e.abrupt("return",JSON.parse(s.data));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(p.default)(d.a.mark((function e(t){var n,r,o,i,a,s,c,u,l,f;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.extUserUin,r=t.addOrderStatus,o=t.requestPaymentStatus,i=t.requestPaymentErrmsg,a=t.prepayId,s=t.outOrderId,c=Object(k.getSystemInfoSync)(),u=b.default.appLaunchInfo||{},e.next=5,z({apiName:"webapi_openproductreportorder",reqData:{ext_info:D(D({ext_useruin:n,ext_appid:b.default.host&&b.default.host.appId,session_id:u.sessionid||u.sessionId||""},U()),{},{add_order_status:r,request_payment_status:o,request_payment_errmsg:i,model:c.model,brand:c.brand,version:c.version,system:c.system,platform:c.platform,sdk_version:c.SDKVersion}),prepay_id:a,order_info:{out_order_id:s}}});case 5:return l=e.sent,f=l.respData,e.abrupt("return",JSON.parse(f.data));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=Object(T.async2Invoke)("requestOrderPayment",Object(p.default)(d.a.mark((function e(){var t,n,r,o,i,a,s,c,l,f,p,h,v,g,_,b,y=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},!(n=Object(I.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=4;break}throw new Error("parameter error: "+n);case 4:return r=t.orderInfo,o=void 0===r?{}:r,i=t.extUserUin,a=Object(u.default)(t,["orderInfo","extUserUin"]),s=(t.package||"").replace("prepay_id=",""),c=Object(C.getShouldCheckTicketBeforePayment)().timeout||500,l=(t.orderInfo||{}).out_order_id,f=_e,h=Oe.NONE,e.prev=10,e.prev=11,e.next=14,Promise.race([Se({extUserUin:i,prepayId:s,orderInfo:o}),Y("timeout",c)]);case 14:g=e.sent,_=g.errcode,b=g.errmsg,f=0===_?be:we,p=b,e.next=26;break;case 22:e.prev=22,e.t0=e.catch(11),e.t0,f=e.t0&&"timeout"===e.t0.message?me:ye;case 26:if(f!==we){e.next=28;break}throw new Error(p||"addOrder failed");case 28:return e.prev=28,e.next=31,J(a);case 31:h=Oe.SUCCESS,e.next=39;break;case 34:throw e.prev=34,e.t1=e.catch(28),v=e.t1.message||"unknown",h=Oe.FAILED,e.t1;case 39:return e.prev=39,Ie({extUserUin:i,addOrderStatus:f,requestPaymentStatus:h,requestPaymentErrmsg:v,prepayId:s,outOrderId:l}),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[10,,39,42],[11,22],[28,34]])})))),Ce=n(148),Te=n(159),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("checkIsSupportSoterAuthentication",e,{})},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(h.beforeInvoke)("startSoterAuthentication",e,{challenge:""})){var t=e.success;Object(h.invokeMethod)("startSoterAuthentication",Object.assign({},e,{success:function(n){0!==n.errCode?"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api startSoterAuthentication fail callback function")(n):"function"==typeof t&&__errorTracer__.surroundThirdByTryCatch(t,"at api startSoterAuthentication success callback function")(n)}}),{beforeSuccess:function(e){"number"==typeof e.errCode&&0!==e.errCode&&(e.errMsg="startSoterAuthentication:fail")}})}},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.beforeInvoke)("checkIsSoterEnrolledInDevice",e,{checkAuthMode:""})&&Object(h.invokeMethod)("checkIsSoterEnrolledInDevice",e,{})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openGoldenRedPacketDetail",e,{})},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("sendGoldenRedPacket",e,{})},xe=n(37),Re=n(79),Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(xe.checkPermissionSync)("sendBizRedPacketForOpen")){var t=Object(Re.getEnterOptionsSync)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){var n="sendBizRedPacket:fail scene "+t+" not support.";return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}Object(h.invokeMethod)("sendBizRedPacket",e,{})},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("sendRedPacket",e,{})},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openRedPacket",e,{})},Be="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket",Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(h.beforeInvoke)("showRedPackage",e,{url:""}))if(0===e.url.indexOf(Be)){var t=Object.assign({isNativeStyle:!0},e);Object(h.invokeMethod)("private_openUrl",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})}else Object(h.beforeInvokeFail)("showRedPackage",e,"url is invalid")},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("checkIsSupportFacialRecognition",e,{})},Ue=n(6),Ve=function(e){return JSON.stringify({name:e.name,id_card_number:e.idCardNumber,mobile:e.mobile,outer_verify_id:e.outerVerifyId,user_id_key:e.userIdKey})},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve(e);Object(h.invokeMethod)("startFacialRecognitionVerify",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve(e);Object(h.invokeMethod)("startCustomFacialRecognitionVerify",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve(e);Object(h.invokeMethod)("startFacialRecognitionVerifyAndUploadVideo",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve(e);Object(h.invokeMethod)("startCustomFacialRecognitionVerifyAndUploadVideo",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.18")>=0?Object(h.invokeMethod)("checkTrafficCardConditions",e):Object(h.beforeInvokeFail)("checkTrafficCardConditions",e,"not yet supported")},Ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.18")>=0?Object(h.invokeMethod)("queryTrafficCardInfo",e):Object(h.beforeInvokeFail)("queryTrafficCardInfo",e,"not yet supported")},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.18")>=0?Object(h.invokeMethod)("issueTrafficCard",e):Object(h.beforeInvokeFail)("issueTrafficCard",e,"not yet supported")},Xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.18")>=0?Object(h.invokeMethod)("rechargeTrafficCard",e):Object(h.beforeInvokeFail)("rechargeTrafficCard",e,"not yet supported")},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S.IS_ANDROID&&Object(E.compareClientVersion)(b.default.clientVersion,"7.0.18")>=0?Object(h.invokeMethod)("setDefaultTrafficCard",e):Object(h.beforeInvokeFail)("setDefaultTrafficCard",e,"not yet supported")},Ze=n(95);function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(n),!0).forEach((function(t){Object(f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(h.beforeInvoke)("addFileToFavorites",e,{filePath:""})){var t=Object(Ze.getLocalPath)(e.filePath);Object(h.invokeMethod)("addFileToFavorites",et(et({},e),{},{filePath:t}))}};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){Object(f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot,it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(h.beforeInvoke)("addVideoToFavorites",e,{videoPath:""})){var t=Object(Ze.getLocalPath)(e.videoPath),n=Object(Ze.getLocalPath)(e.thumbPath);Object(h.invokeMethod)("addVideoToFavorites",rt(rt({},e),{},{videoPath:t,thumbPath:n}))}},at=function(e){Object(h.invokeMethod)("login",Object(Ue.assign)(e,{requestInQueue:!1}))},st=function(e){ot&&clearTimeout(ot),Object(h.invokeMethod)("refreshSession",e,{beforeSuccess:function(e){ot=setTimeout((function(){Object(h.invokeMethod)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:function(e){e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},ct=function(){Object(h.invokeMethod)("logout",{})},ut=n(122),lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wx&&wx.version&&wx.version.version||"",n=!0===Object(E.checkAPIAvailable)("getUserInfo")||"unknown"===Object(E.checkAPIAvailable)("getUserInfo");Object(h.baseOperateWXData)(Object(Ue.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",version:t}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){S.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(h.beforeInvoke)("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)Object(h.beforeInvokeFail)("getUserProfile",e,"desc length does not meet the requirements");else{var n=!0===Object(E.checkAPIAvailable)("getUserProfile")||"unknown"===Object(E.checkAPIAvailable)("getUserProfile");Object(h.baseOperateWXData)(Object(Ue.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){S.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})}}},ft=n(160),pt=function(e){Object(h.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(Ue.renameProperty)(e,"addressPostalCode","postalCode"),Object(Ue.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(Ue.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(Ue.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(Ue.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddress"),delete e.err_msg}})},ht=n(161),vt=n(162),gt=n(125),_t=function(e){return{2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[e]},bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];if(e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}),e.subscriptionsSetting){var n={};if(n.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){var r=e.subscriptionsSetting.templatesInfo;n.itemSettings=r.reduce((function(e,t){var n=_t(t.tid),r={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=r[t.status]:e[t.templateId]=r[t.status],e}),{})}e.subscriptionsSetting=n}}})},yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bt(e)},mt=n(163),wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openWeRunSetting",{checkSupport:!0,success:function(){Object(h.baseOperateWXData)(Object(Ue.assign)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess:function(e){S.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},Ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(h.beforeInvokeFail)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(h.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(h.invokeMethod)("uploadWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(h.beforeInvokeFail)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(h.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(h.invokeMethod)("addWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},It=n(164),Et=n(32),Ct=Object(Et.default)("getOpenDeviceId","webapi_getdeviceinfo"),Tt=Object(Et.default)("getUserGameLabel","webapi_getgameplayerlabel",{},{},(function(){}),(function(e){return delete e.rawData,e})),kt=n(165),At=n(30),Pt=n(48),Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{sport_type_id:e.typeId,sport_time:e.time||0,sport_distance:e.distance||0,sport_number:e.number||0,sport_calorie:e.calorie||0,sport_url:e.url||""}}))},jt=Object(E.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Et.default)("checkWxaSportRecord","webapi_checkwxasportrecord",{},{},(function(e){return{sport_record_list:Dt(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),xt=Object(E.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Et.default)("reportWxaSportRecord","webapi_reportwxasportrecord",{},{},(function(e){return{sport_record_list:Dt(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),Rt=function(e){var t=e.show,n=void 0===t?0:t,r=e.statusCancel,o=void 0===r?0:r,i=e.statusConfirm,a=void 0===i?0:i,s=e.clickMoreCount,c=[n,o,a,void 0===s?0:s];Reporter.reportKeyValue({key:"ShareToWeRun",value:c.join(","),immediately:!0})},Mt=null;Object(At.onThemeChange)((function(e){var t=e.theme;Mt&&Mt.setData({theme:t})}));var Nt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=Object(Pt.setNavigateBackInterception)((function(e){[Pt.NavigationBackTypes.BottomBackButton,Pt.NavigationBackTypes.NavigationBackInterceptionType,Pt.NavigationBackTypes.NavigateBackCall].includes(e.type)&&Mt&&(Mt.handleCancel(),Mt=null)}));__sclEngine__.initScl((function(r){var o=r.mainRoot.append("werun",{input:e});Mt=o,o.addListener("confirm",(function(e){var r=e.detail.clickMoreCount;Rt({show:1,statusCancel:0,statusConfirm:1,clickMoreCount:r}),Object(Pt.stopNavigateBackInterception)(n),xt({recordList:t.recordList}).then((function(){return Object(h.beforeInvokeCallback)({name:"shareToWeRun",args:t})})).catch((function(e){return Object(h.beforeInvokeFail)("shareToWeRun",t,e.errMsg,+e.err_code)}))})),o.addListener("cancel",(function(e){var r=e.detail.clickMoreCount;Rt({show:1,statusCancel:1,statusConfirm:0,clickMoreCount:r}),Object(h.beforeInvokeFail)("shareToWeRun",t,"cancel"),Object(Pt.stopNavigateBackInterception)(n)}))}))},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.beforeInvoke)("shareToWeRun",e,{recordList:[]})&&(Object(xe.checkPermissionSync)("shareDataToWeRun")?jt({recordList:e.recordList}).then((function(t){var n=t.wording||{},r=Nt(n,["title","sport_name","note_title","note_detail"]);r.theme=Object(k.getSystemInfoSync)().theme||"light";var o=JSON.stringify(r);Lt(o,e)}),(function(t){Rt({show:0,statusCancel:0,statusConfirm:0,clickMoreCount:0}),Object(h.beforeInvokeFail)("shareToWeRun",e,t.errMsg,+t.err_code)})):Object(h.beforeInvokeFail)("shareToWeRun",e,"has no permission",-100004))},Ft=n(66),Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Ft.reportDeprecatedAPI)("sendGroupMessage"),Object(h.beforeInvokeFail)("sendGroupMessage",e,"sendGroupMessage 接口已废弃")},Ut=function(e){Object(m._operateWXData)({apiName:"webapi_reportgroupshare",reqData:e})},Vt=Object(Et.default)("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",{},{},(function(e){var t=e.todayPlayedTime;return{today_played_seconds:void 0===t?0:t}}),(function(e){e.result=!e.is_healthy,delete e.is_healthy})),Gt=function(e){Object(h.beforeInvoke)("checkIsUserAdvisedToRest",e,{todayPlayedTime:0})&&Vt(e)},Ht=parseInt(Date.now()/1e3,10),zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("chooseInvoice",Object.assign({},e,{timeStamp:Ht,nonceStr:Ht+""}),{beforeSuccess:function(){}})},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("faceVerifyForPay",e)},Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{scene:151});delete t.profileReportInfo,Object(h.invokeMethod)("openBizProfile",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("openBizProfile","openOfficialAccountProfile")}})},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openWeAppProfile",e)},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);delete t.profileReportInfo,Object(h.invokeMethod)("openUserProfile",t)},Xt=n(24),$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Xt.invokeMethod)("preventApplePayUI",e)},Zt=Object(Et.default)("getWxSecData","getWxSecData",{},{},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(function(e){return e})),Qt=n(117),en=Object(m.constructOperateWXData)(!1,"requestSubscribeMessage"),tn=!1;Object(At.onAppRoute)((function(){tn=!1})),Object(At.onAppEnterBackground)((function(){tn=!1}));var nn=function(e){if(tn)Object(h.beforeInvokeFail)("requestSubscribeMessage",e,"last call has not ended");else{if(!Object(h.beforeInvoke)("requestSubscribeMessage",e,{tmplIds:[]}))return;tn=!0,S.IS_IOS&&b.default.clientVersion<385877504||S.IS_ANDROID&&b.default.clientVersion<654313216||S.IS_DEVTOOLS?on(e):rn(e)}},rn=function(e){Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});var t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),Object(h.invokeMethod)("requestSubscribeMessage",t,{beforeAll:function(){tn=!1},beforeSuccess:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),tn=!1},beforeFail:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},on=function(e){var t,n,r=e.tmplIds||[];if(0===r.length?(t="TmplIds can't be empty",n=10001):r.length>=4?(t="Templates count out of max bounds",n=20003):""===r[0]?(t="No template data return, verify the template id exist",n=20001):"string"!=typeof r[0]&&(t="Invalid template id",n=10004),t)return tn=!1,void Object(h.beforeInvokeFail)("requestSubscribeMessage",e,t,n);var o=r.map((function(e){return{TemplateId:e}}));en({apiName:"webapi_subscribe_msg",reqData:{AppId:b.default.accountInfo.appId,ActionType:1,ItemList:o},success:function(t){var n=(JSON.parse(t.respData.data).InfoList||[])[0]||{};if(n.TemplateId!==r[0])return tn=!1,void Object(h.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:Object(f.default)({},r[0],"ban")});var o="订阅一次以下消息通知";3===n.TemplateType&&(o="长期订阅以下消息通知"),Object(g.showModal)({title:o,content:n.Title||"",confirmText:"允许",cancelText:"取消",success:function(t){tn=!1,an(e,t)},fail:function(t){tn=!1,Object(h.beforeInvokeFail)("requestSubscribeMessage",e,t.errMsg)}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(h.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code),tn=!1}})},an=function(e,t){var n=e.tmplIds[0];en({apiName:"webapi_subscribe_msg",reqData:{AppId:b.default.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success:function(){var r={};r[""+n]=t.confirm?"accept":"reject",Object(h.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:r}),Object(Qt.reportApiUse)({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(h.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code)}})},sn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openWeAppSearch",e)},cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openWeAppHistoryList",e)},un=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(h.invokeMethod)("openWeAppStarList",e)},ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(xe.checkPermissionSync)("batchGetContactDirectly"))Object(h.invokeMethod)("batchGetContact",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("batchGetContact","batchGetContactDirectly")}});else{var t="batchGetContactDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},dn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(xe.checkPermissionSync)("preloadMiniProgramEnvDirectly"))Object(h.invokeMethod)("preloadMiniProgramEnv",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("preloadMiniProgramEnv","preloadMiniProgramEnvDirectly")}});else{var t="preloadMiniProgramEnvDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(xe.checkPermissionSync)("predownloadMiniProgramPackageDirectly"))Object(h.invokeMethod)("predownloadMiniProgramPackage",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("predownloadMiniProgramPackage","predownloadMiniProgramPackageDirectly")}});else{var t="predownloadMiniProgramPackageDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Xt.beforeInvoke)("requestBizSplitBillPayment",e,{orderNo:""})&&Object(Xt.invokeMethod)("requestBizSplitBillPayment",e)},hn=n(27),vn="";b.default.onReady((function(){vn=b.default.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",vn)})),Object(hn.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vn=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",vn)}));var gn="getGroupEnterInfo",_n=Object(m.constructOperateWXData)(!1,gn),bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vn?Object(xe.checkPermissionSync)("getGroupToolbarInfo")?_n({apiName:"webapi_swapopengid",reqData:{chatroom_name:vn},success:function(t){wxNativeConsole.info("webapi_swapopengid res",t);var n=t.respData,r={};r.iv=n.iv,r.encryptedData=n.encryptedData,n.cloud_id&&(r.cloudID=n.cloud_id),Object(h.beforeInvokeCallback)({name:gn,args:e,res:r})},fail:e.fail}):Object(h.beforeInvokeFail)(gn,e,"no permission"):Object(h.beforeInvokeFail)(gn,e,"invalid scene")}},function(e,t,n){n.r(t),n.d(t,"getEventManager",(function(){return c}));var r=n(20),o=n(33),i=new o.default({maxListeners:20,newListener:!1}),a=new o.default({maxListeners:20,newListener:!1});var s={};function c(e){if(e=e[0].toUpperCase()+e.slice(1),!s[e]){var t=new WeakMap;s[e]={getGlobalListeners:function(){return i.listeners(e)},getInternalListeners:function(){return a.listeners(e)},emit:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,[e].concat(n)),i.emit.apply(i,[e].concat(n))},emitGlobal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];i.emit.apply(i,[e].concat(n))},emitInternal:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a.emit.apply(a,[e].concat(n))},internalOnMethod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof t&&(n.prepend?n.once?a.prependOnceListener(e,t):a.prependListener(e,t):n.once?a.once(e,t):a.on(e,t))},internalOffMethod:function(t){"function"==typeof t&&a.off(e,t)},onMethod:function(n){var o=function(e,t){return"function"!=typeof t?(console.error("on"+e+" should accept a function instead of "+Object(r.default)(t)),null):__errorTracer__.surroundThirdByTryCatch(t,"at api on"+e+" callback function")}(e,n);o&&(t.set(n,o),i.on(e,o))},offMethod:function(n){if(function(e,t){return!t||"function"==typeof t||(console.error("off"+e+" should accept a function instead of "+Object(r.default)(t)),!1)}(e,n))if(n){if(t.has(n)){var o=t.get(n);t.delete(n),i.off(e,o)}}else t=new WeakMap,i.removeAllListeners(e)}}}return s[e]}},function(e,t,n){n.r(t),n.d(t,"interaction",(function(){return s})),n.d(t,"navigationBar",(function(){return c})),n.d(t,"topBar",(function(){return r})),n.d(t,"tabBar",(function(){return a})),n.d(t,"route",(function(){return o})),n.d(t,"event",(function(){return i})),n.d(t,"pageScrollTo",(function(){return M})),n.d(t,"startPullDownRefresh",(function(){return N})),n.d(t,"stopPullDownRefresh",(function(){return L})),n.d(t,"setPageStyle",(function(){return V})),n.d(t,"hideKeyboard",(function(){return K})),n.d(t,"onKeyboardHeightChange",(function(){return J})),n.d(t,"offKeyboardHeightChange",(function(){return X})),n.d(t,"createAnimation",(function(){return te})),n.d(t,"updateWindowSizeStatus",(function(){return ne.updateWindowSizeStatus})),n.d(t,"onWindowResize",(function(){return ne.onWindowResize})),n.d(t,"offWindowResize",(function(){return ne.offWindowResize})),n.d(t,"setPageOrientation",(function(){return re})),n.d(t,"setBackgroundColor",(function(){return ie})),n.d(t,"setBackgroundTextStyle",(function(){return ae})),n.d(t,"enableAlertBeforeUnload",(function(){return ce})),n.d(t,"disableAlertBeforeUnload",(function(){return ue})),n.d(t,"getMenuButtonBoundingClientRect",(function(){return le.getMenuButtonBoundingClientRect})),n.d(t,"getSelectedTextRange",(function(){return ve})),n.d(t,"setNavigateBackInterception",(function(){return ge.setNavigateBackInterception})),n.d(t,"stopNavigateBackInterception",(function(){return ge.stopNavigateBackInterception}));var r={};n.r(r),n.d(r,"setTopBarText",(function(){return d}));var o={};n.r(o),n.d(o,"navigateToWithRelatedInfo",(function(){return f.navigateToWithRelatedInfo})),n.d(o,"navigateTo",(function(){return f.navigateTo})),n.d(o,"redirectTo",(function(){return f.redirectTo})),n.d(o,"switchTab",(function(){return f.switchTab})),n.d(o,"navigateBack",(function(){return f.navigateBack})),n.d(o,"reLaunch",(function(){return f.reLaunch})),n.d(o,"createRouter",(function(){return f.createRouter})),n.d(o,"onPageReload",(function(){return h})),n.d(o,"_triggerBeforeUnloadPage",(function(){return v})),n.d(o,"_triggerBeforeShareAppMessage",(function(){return g}));var i={};n.r(i),n.d(i,"onDomReady",(function(){return _.onDomReady})),n.d(i,"onWebviewEvent",(function(){return _.onWebviewEvent})),n.d(i,"onNativeEvent",(function(){return b}));var a={};n.r(a),n.d(a,"setTabBarBadge",(function(){return O})),n.d(a,"removeTabBarBadge",(function(){return S})),n.d(a,"showTabBarRedDot",(function(){return I})),n.d(a,"hideTabBarRedDot",(function(){return E})),n.d(a,"showTabBar",(function(){return T})),n.d(a,"hideTabBar",(function(){return k})),n.d(a,"setTabBarStyle",(function(){return P})),n.d(a,"setTabBarItem",(function(){return j})),n.d(a,"_isTabBar",(function(){return A}));var s=n(41),c=n(171),u=n(0),l=0,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.text?Date.now()-l<5e3?Object(u.beforeInvokeFail)("setTopBarText",e,"invoke too frequently"):Object(u.invokeMethod)("setTopBarText",e,{beforeSuccess:function(){l=Date.now()}}):Object(u.beforeInvokeFail)("setTopBarText",e,"invalid text")},f=n(102),p=n(43),h=p.onPageReload,v=p.triggerBeforeUnloadPage,g=p.triggerBeforeShareAppMessage,_=n(157),b=function(e){["onCanvasTouchStart","onCanvasTouchMove","onCanvasTouchEnd"].forEach((function(t){Object(u.onMethod)(t,(function(n,r){e({data:n,eventName:t,webviewId:r})}))}))},y=n(1),m=n(68),w=n(49),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0,text:""})){var t=Object.assign({},e);t.badgeValue=t.text,t.type="text",n(t.badgeValue)>4&&(t.badgeValue="..."),Object(u.invokeMethod)("setTabBarBadge",t)}function n(e){return null==e?0:("string"!=typeof e&&(e+=""),e.replace(/[^\x00-\xff]/g,"01").length)}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","removeTabBarBadge")}})}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="redDot",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","showTabBarRedDot")}})}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarBadge",e,{index:0})){var t=Object.assign({},e);t.type="none",Object(u.invokeMethod)("setTabBarBadge",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setTabBarBadge","hideTabBarRedDot")}})}},C=!1;Object(w.onAppRoute)((function(e){try{C=y.default.tabBar.list.some((function(t){return t.pagePath.startsWith(e.path)}))}catch(e){}}));var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),Object(u.beforeInvoke)("showTabBar",e,{animation:!0})&&Object(u.invokeMethod)("showTabBar",e,{beforeSuccess:function(){return C=!0}})},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===e.animation&&(e.animation=!1),Object(u.beforeInvoke)("hideTabBar",e,{animation:!0})&&Object(u.invokeMethod)("hideTabBar",e,{beforeSuccess:function(){return C=!1}})},A=function(){return C},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.invokeMethod)("setTabBarStyle",e)},D=null;y.default.onReady((function(){D=y.default.tabBar&&y.default.tabBar.list||[]}));var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("setTabBarItem",e,{index:0}))if(0!==(e.iconPath||"").indexOf("."))if(0!==(e.selectedIconPath||"").indexOf(".")){try{Object(m.hasOwnProperty)(e,"text")||(e.text=D[e.index].text||""),D[e.index].text=e.text}catch(e){e.message}Object(u.invokeMethod)("setTabBarItem",e)}else Object(u.beforeInvokeFail)("setTabBarItem",e,"selectedIconPath invalid, require absolute path");else Object(u.beforeInvokeFail)("setTabBarItem",e,"iconPath invalid, require absolute path")},x=1,R={};Object(u.subscribe)("pageScrollDone",(function(e){if(!(e.callbackId<0||void 0===R[e.callbackId])){var t=R[e.callbackId];delete R[e.callbackId],delete e.callbackId;var n="pageScrollTo";e.errMsg=e.errMsg||"scrollWebviewTo:ok",e.errMsg=e.errMsg.replace("scrollWebviewTo",n);var r=0===e.errMsg.indexOf(n+":ok"),o=0===e.errMsg.indexOf(n+":fail");r?"function"==typeof t.success&&t.success(e):o&&"function"==typeof t.fail&&t.success(e),"function"==typeof t.complete&&t.complete(e)}}));var M=function(e){var t=__appServiceEngine__.getCurrentPagesByDomain(""),n=t[t.length-1].__wxWebviewId__;Object(m.hasOwnProperty)(e,"page")&&Object(m.hasOwnProperty)(e.page,"__wxWebviewId__")&&(n=e.page.__wxWebviewId__);var r={};for(var o in e)"function"==typeof e[o]&&(r[o]=e[o],delete e[o]);e.callbackId=x,R[x]=r,x++,Object(u.publish)("pageScrollTo",e,[n])},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(u.invokeMethod)("startPullDownRefresh",e,{})},L=function(e){Object(u.invokeMethod)("stopPullDownRefresh",e)},B=n(20),F=n(3),W=0,U={},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U[W]={success:e.success,fail:e.fail,complete:e.complete},Object(u.publish)("setPageStyle",{callbackId:W,style:e.style},[F.default.currentWebviewId]),W+=1};Object(u.subscribe)("callbackSetPageStyle",(function(e){var t=e.res,n=e.callbackId,r=t.errMsg,o=0===r.indexOf("setPageStyle:ok"),i=0===r.indexOf("setPageStyle:fail"),a=U[n];delete U[n],"object"===Object(B.default)(a)&&(o?"function"==typeof a.success&&a.success(t):i&&"function"==typeof a.fail&&a.fail(t),"function"==typeof a.complete&&a.complete(t))}));var G=n(2),H=n(22),z=-1;function q(){return z}Object(u.subscribe)("xWebTextareaFocusChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus,n=arguments.length>1?arguments[1]:void 0;z=t?n:-1}));var Y=!1;Object(H.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;Y=t}));var K=function(e){if(G.IS_DEVTOOLS||G.IS_WINDOWS||G.IS_MINA)Object(u.publish)("hideKeyboard",{});else{var t=q();G.IS_ANDROID&&Y&&t===F.default.currentWebviewId?(Object(u.publish)("hideXWebKeyboard",{},[t]),e&&"function"==typeof e.success&&e.success({errMsg:"hideKeyboard:ok"}),e&&"function"==typeof e.complete&&e.complete({errMsg:"hideKeyboard:ok"})):Object(u.invokeMethod)("hideKeyboard",e)}},J=function(e){Object(u.onMethod)("onKeyboardHeightChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__errorTracer__.surroundThirdByTryCatch(e,"at onKeyboardHeightChange callback function")(t)}))},X=function(){Object(u.onMethod)("onKeyboardHeightChange",(function(){}))},$=n(31),Z=n(4),Q=n(5),ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Z.default)(this,e),this.actions=[],this.currentTransform=[],this.currentStepAnimates=[],this.option={transition:{duration:void 0!==t.duration?t.duration:400,timingFunction:void 0!==t.timingFunction?t.timingFunction:"linear",delay:void 0!==t.delay?t.delay:0},transformOrigin:t.transformOrigin||"50% 50% 0"}}return Object(Q.default)(e,[{key:"export",value:function(){var e=this.actions;return this.actions=[],{actions:e}}},{key:"step",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.currentStepAnimates.forEach((function(t){"style"!==t.type?e.currentTransform[t.type]=t:e.currentTransform[t.type+"."+t.args[0]]=t})),this.actions.push({animates:Object.keys(this.currentTransform).reduce((function(t,n){return[].concat(Object($.default)(t),[e.currentTransform[n]])}),[]),option:{transformOrigin:void 0!==t.transformOrigin?t.transformOrigin:this.option.transformOrigin,transition:{duration:void 0!==t.duration?t.duration:this.option.transition.duration,timingFunction:void 0!==t.timingFunction?t.timingFunction:this.option.transition.timingFunction,delay:void 0!==t.delay?t.delay:this.option.transition.delay}}}),this.currentStepAnimates=[],this}},{key:"matrix",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return this.currentStepAnimates.push({type:"matrix",args:[e,t,n,r,o,i]}),this}},{key:"matrix3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,h=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return this.currentStepAnimates.push({type:"matrix3d",args:[e,t,n,r,o,i,a,s,c,u,l,d,f,p,h,v]}),this.stepping=!1,this}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotate",args:[e]}),this}},{key:"rotate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return this.currentStepAnimates.push({type:"rotate3d",args:[e,t,n,r]}),this.stepping=!1,this}},{key:"rotateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateX",args:[e]}),this.stepping=!1,this}},{key:"rotateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateY",args:[e]}),this.stepping=!1,this}},{key:"rotateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"rotateZ",args:[e]}),this.stepping=!1,this}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;return t=void 0!==t?t:e,this.currentStepAnimates.push({type:"scale",args:[e,t]}),this}},{key:"scale3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.currentStepAnimates.push({type:"scale3d",args:[e,t,n]}),this}},{key:"scaleX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleX",args:[e]}),this}},{key:"scaleY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleY",args:[e]}),this}},{key:"scaleZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.currentStepAnimates.push({type:"scaleZ",args:[e]}),this}},{key:"skew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"skew",args:[e,t]}),this}},{key:"skewX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewX",args:[e]}),this}},{key:"skewY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"skewY",args:[e]}),this}},{key:"translate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.currentStepAnimates.push({type:"translate",args:[e,t]}),this}},{key:"translate3d",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.currentStepAnimates.push({type:"translate3d",args:[e,t,n]}),this}},{key:"translateX",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateX",args:[e]}),this}},{key:"translateY",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateY",args:[e]}),this}},{key:"translateZ",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.currentStepAnimates.push({type:"translateZ",args:[e]}),this}},{key:"opacity",value:function(e){return this.currentStepAnimates.push({type:"style",args:["opacity",e]}),this}},{key:"backgroundColor",value:function(e){return this.currentStepAnimates.push({type:"style",args:["background-color",e]}),this}},{key:"width",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["width",e]}),this}},{key:"height",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["height",e]}),this}},{key:"left",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["left",e]}),this}},{key:"right",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["right",e]}),this}},{key:"top",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["top",e]}),this}},{key:"bottom",value:function(e){return"number"==typeof e&&(e+="px"),this.currentStepAnimates.push({type:"style",args:["bottom",e]}),this}}]),e}(),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(u.beforeInvoke)("createAnimation",e,{}))return new ee(e)},ne=n(166),re=function(e){Object(u.invokeMethod)("setPageOrientation",e)},oe=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(e=Object.assign({},e)).backgroundColor&&!oe(e.backgroundColor)&&delete e.backgroundColor,e.backgroundColorTop&&!oe(e.backgroundColorTop)&&delete e.backgroundColorTop,e.backgroundColorBottom&&!oe(e.backgroundColorBottom)&&delete e.backgroundColorBottom,(e.backgroundColor||e.backgroundColorTop||e.backgroundColorBottom)&&Object(u.invokeMethod)("setBackgroundColor",e)},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};-1!==["dark","light"].indexOf(e.textStyle)?Object(u.invokeMethod)("setBackgroundTextStyle",e):Object(u.beforeInvokeFail)("setBackgroundTextStyle",e,'invalid textStyle "'+e.textStyle+'"')},se=function(){};function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="enableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||se,"at api "+t+" success callback function"),r=Reporter.surroundThirdByTryCatch(e.fail||se,"at api "+t+" fail callback function"),o=Reporter.surroundThirdByTryCatch(e.complete||se,"at api "+t+" complete callback function"),i="string"==typeof e.message?e.message:void 0;Object(u.invokeMethod)("setNavigateBackConfirmDialog",{enable:!0,content:i,success:n,fail:r,complete:o},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="disableAlertBeforeUnload",n=Reporter.surroundThirdByTryCatch(e.success||se,"at api "+t+" success callback function"),r=Reporter.surroundThirdByTryCatch(e.fail||se,"at api "+t+" fail callback function"),o=Reporter.surroundThirdByTryCatch(e.complete||se,"at api "+t+" complete callback function");Object(u.invokeMethod)("setNavigateBackConfirmDialog",{enable:!1,success:n,fail:r,complete:o},{beforeSuccess:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)},beforeFail:function(e){e.errMsg=e.errMsg&&e.errMsg.replace("setNavigateBackConfirmDialog",t)}})}var le=n(169),de=n(45),fe=!1;Object(H.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;fe=t}));var pe=0,he={};Object(u.subscribe)("onGetXWebSelectedTextRange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.focus,r=e.start,o=e.end,i=he[t];i&&(n?("function"==typeof i.success&&i.success({errMsg:"getSelectedTextRange:ok",start:r,end:o}),"function"==typeof i.complete&&i.complete({errMsg:"getSelectedTextRange:ok",start:r,end:o})):("function"==typeof i.fail&&i.fail({errMsg:"getSelectedTextRange:fail:no focused input"}),"function"==typeof i.complete&&i.complete({errMsg:"getSelectedTextRange:fail:no focused input"}))),delete he[t]}));var ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=q();if(G.IS_ANDROID&&fe&&t===F.default.currentWebviewId)return Object(u.publish)("xWebGetSelectedTextRange",{taskId:pe}),void(he[pe++]=e);Object(de.invokeWebviewMethod)("getSelectedTextRange",{},[F.default.currentWebviewId],(function(t){0===t.errMsg.indexOf("getSelectedTextRange:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))},ge=n(48)},function(e,t,n){n.r(t),n.d(t,"noop",(function(){return f})),n.d(t,"checkUrlInConfig",(function(){return p})),n.d(t,"setWxInterfaceDisabled",(function(){return v})),n.d(t,"checkWxInterfacePermission",(function(){return g})),n.d(t,"checkWxInterfaceSupported",(function(){return _})),n.d(t,"setWxInterfaceIsInvokeInTap",(function(){return y})),n.d(t,"unsetWxInterfaceIsInvokeInTap",(function(){return m})),n.d(t,"wrappedByCheckPermissionInTap",(function(){return S}));var r=n(20),o=n(6),i=n(2),a=n(91),s=n(119),c=n(1),u=n(11),l=n(0);n.d(t,"publish",(function(){return l.publish})),n.d(t,"subscribe",(function(){return l.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return l.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return l.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return l.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return l.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return l.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return l.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return l._invokeMethod})),n.d(t,"onMethod",(function(){return l.onMethod})),n.d(t,"beforeInvoke",(function(){return l.beforeInvoke})),n.d(t,"beforeInvokePromise",(function(){return l.beforeInvokePromise})),n.d(t,"beforeInvokeFail",(function(){return l.beforeInvokeFail})),n.d(t,"beforeInvokeComplete",(function(){return l.beforeInvokeComplete})),n.d(t,"beforeInvokeCallback",(function(){return l.beforeInvokeCallback})),n.d(t,"invoke",(function(){return l.invoke})),n.d(t,"on",(function(){return l.on})),n.d(t,"baseOperateWXData",(function(){return l.baseOperateWXData}));var d=n(32);function f(){}function p(e,t,n){var r=t.replace(/\.html\?.*|\.html$/,"");return!!__appServiceEngine__.hasPageRoute(r)||(Object(l.beforeInvokeFail)(e,n,'page "'+Object(o.removeHtmlSuffixFromUrl)(t)+'" is not found'),!1)}n.d(t,"operateWXDataFactory",(function(){return d.default}));var h=!1;function v(e){h=!!e.state,e.success&&e.success({state:h})}function g(e,t){_(e);var n=Object(s.apiCategoryValue)(e,"ui");if(n>0&&h)return!1;if(n>=20)if(void 0===__appServiceEngine__){if(t)return!1}else{var r=__appServiceEngine__.getCurrentRoute()||"";if(/^\/?__wx__\//.test(r))return!1;var o=r.match(/(?:^|\/)__plugin__\/(.*?)\//);if((o?o[1]:"")!==t&&n>=30)return!1}var i=Object(s.apiCategoryValue)(e,"singlePage");return!((!i||1===i)&&Object(u.isSinglePageMode)())||(1===i&&O()&&Object(l.invokeMethod)("showToast",{icon:"",title:"请前往小程序使用完整服务",duration:2500}),!1)}function _(e){var t=Object(s.apiCategoryValue)(e,"thirdApp");return 0!==t&&1!==t||!Object(u.isIn3rdApp)()||1===t&&O()&&Object(l.invokeMethod)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500}),!0}var b=!1;function y(e){b="tap"===e}function m(){setTimeout((function(){b=!1}),0)}function w(e){var t=this;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];if(4===c.default.appType)return y("tap"),e.apply(t,r),void m();__virtualDOM__.wrapTapMark((function(){e.apply(t,r)}))}}function O(){return 4===c.default.appType?b:b||__virtualDOM__.checkTapMark()}function S(e,t){return function(n){var o=this,d=Object(s.apiCategoryValue)(e,"tap"),f=O(),p=n;if(10!==d||f||(Object(a.reportRecycledAPI)({name:e,scene:0,strategy:1}),!i.IS_DEVTOOLS&&Object(u.checkAPIAvailable)(e))){if((20===d&&f||30===d)&&("function"==typeof n?p=w.call(this,n):"object"===Object(r.default)(n)&&(p=Object.assign({},n),["success","fail","complete"].forEach((function(e){"function"==typeof p[e]&&(p[e]=w.call(o,p[e]))})))),40!==d||4===c.default.appType||f){for(var h=arguments.length,v=new Array(h>1?h-1:0),g=1;g<h;g++)v[g-1]=arguments[g];var _=t.apply(this,[p].concat(v));return 4===c.default.appType&&[10,30,40].includes(d)&&m(),_}n&&(n.fail||n.complete)&&setTimeout((function(){Object(l.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}else n&&(n.fail||n.complete)&&setTimeout((function(){Object(l.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}}},function(e,t,n){n.r(t),n.d(t,"ImageData",(function(){return u})),n.d(t,"concatId",(function(){return l})),n.d(t,"subscribeOnce",(function(){return d})),n.d(t,"uint8ClampedArrayToBase64",(function(){return f})),n.d(t,"base64ToUint8ClampedArray",(function(){return g})),n.d(t,"getImageRealPath",(function(){return _})),n.d(t,"getImageRealPathForDevtools",(function(){return b})),n.d(t,"wrapImageObject",(function(){return y})),n.d(t,"normalizeTouch",(function(){return m})),n.d(t,"injectExtraTouchInfo",(function(){return w})),n.d(t,"pipe",(function(){return O})),n.d(t,"shouldUseOldCanvas",(function(){return I}));var r=n(0),o=n(6),i=n(3),a=n(1),s=n(2),c=n(11),u=void 0!==u?u:function(e,t,n){"[object Uint8ClampedArray]"===Object.prototype.toString.call(e)?(Object.defineProperty(this,"data",{value:e,enumerable:!0}),Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"height",{value:n,enumerable:!0}),this.constructor.prototype.constructor=function(){},this.__proto__&&"undefined"!=typeof Symbol&&(this.__proto__[Symbol.toStringTag]="ImageData")):console.error("parameter 1 is not of type 'Uint8ClampedArray'")};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="canvas_"+e+"_"+t+"_"+n+"_";return r&&r!==__virtualDOM__.getRootNodeId(e)&&(o+=r),o}function d(e){var t=[],n=1;return Object(r.subscribe)(e,(function(e){for(var n=-1,r=0;r<t.length;r++){var o=t[r],i=o[0],a=o[1];if(i.cid===e.cid&&i.canvasId===e.canvasId){n=r,a(e);break}}n>=0&&t.splice(n,1)})),function(e,r){e.cid=n++,t.push([e,r])}}function f(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return(window.__global||window).btoa(t)}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,v="undefined"!=typeof window&&window.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!h.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,r,o="",i=0;i<e.length;)t=p.indexOf(e.charAt(i++))<<18|p.indexOf(e.charAt(i++))<<12|(n=p.indexOf(e.charAt(i++)))<<6|(r=p.indexOf(e.charAt(i++))),o+=64===n?String.fromCharCode(t>>16&255):64===r?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return o};function g(e){for(var t=v(e),n=t.length,r=new Uint8ClampedArray(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r}function _(e,t,n,r){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;if(!/wxfile:\/\//.test(e))if(n||t){n=n.split("/")[0];var a=__virtualDOM__.getNodeById(t,r),s=a&&a.is||"";e=n?0===e.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(o.getRealRoute)(s,e,!1).replace(/\.html$/,""):Object(o.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(s),e,!1).replace(/\.html$/,""):Object(o.getRealRoute)(s,e,!1).replace(/\.html$/,"")}else e=Object(o.getRealRoute)(i.default.lastRoute,e,!1).replace(/.html$/,"");return e}function b(e,t,n,r){return/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e?e:"/__pageframe__/"+_(e,t,n,r)}function y(e,t){var n=e.setSrc.bind(e),r=e.getSrc.bind(e),o=e.getReferrerPolicy?e.getReferrerPolicy.bind(e):function(){},i=e.setReferrerPolicy?e.setReferrerPolicy.bind(e):function(){};return delete e.getSrc,delete e.setSrc,delete e.getReferrerPolicy,delete e.setReferrerPolicy,Object.defineProperty(e,"src",{enumerable:!0,set:function(e){var r=_(e,t.nodeId,t.pluginId,t.webviewId);n(r)},get:function(){return r()}}),Object.defineProperty(e,"referrerPolicy",{enumerable:!0,set:function(e){i(e)},get:function(){return o()}}),e}function m(e){return e&&e.length>0&&e.forEach((function(e){e.x=e.clientX||e.pageX,e.y=e.clientY||e.pageY,delete e.target})),e}function w(e){return e&&e.length>0&&e.forEach((function(e){e.clientX=e.x,e.clientY=e.y,e.pageX=e.x,e.pageY=e.y})),e}function O(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var i=0;i<t.length;++i){var a=t[i];"function"==typeof a&&(e=0===i?a.apply(null,r):a.call(null,e))}return e}}var S=!1;function I(){if(s.IS_IOS&&Object(c.isIn3rdApp)()){var e=255&Number(a.default.host.version);if(e>=16&&e<=31)return!0}return a.default.clientVersion>=385881088&&a.default.clientVersion<=385881343&&S}a.default.onReady((function(){Object(r.invokeMethod)("getPermissionBytes",{indexes:[977],success:function(e){e.permissionBytes&&1===e.permissionBytes[0]&&(S=!0)}})}))},function(e,t,n){n.r(t);var r="undefined"!=typeof NativeGlobal?NativeGlobal:{};t.default=r},function(e,t,n){n.r(t),n.d(t,"onNativeEvent",(function(){return a})),n.d(t,"offNativeEvent",(function(){return s}));var r=n(154),o=n(22),i={},a=function(e,t){var n=Object(o.getEventManager)("WeixinJSBridge-"+e);i[e]||(Object(r.onMethod)(e,(function(){n.emit.apply(n,arguments)})),i[e]=!0),n.internalOnMethod(t)},s=function(e,t){Object(o.getEventManager)("WeixinJSBridge-"+e).internalOffMethod(t)}},function(e,t,n){n.r(t),n.d(t,"getPluginId",(function(){return a})),n.d(t,"getPluginVersion",(function(){return s})),n.d(t,"getPluginInfo",(function(){return c})),n.d(t,"getPluginInfoForWebview",(function(){return u})),n.d(t,"checkDomains",(function(){return l})),n.d(t,"parsePluginInfo",(function(){return d})),n.d(t,"replaceErrMsgApiName",(function(){return f}));var r=n(109),o=n(50),i=function(e){for(var t in o.default.puidToPluginWX)if(o.default.puidToPluginWX[t]===e)return t},a=function(e){return o.default.pluginIDs[i(e)]},s=function(e){return o.default.pluginVersions[i(e)]},c=function(e){var t=a(e);if(void 0!==t)return o.default.pluginInfos[t]},u=function(e){e.success(o.default.pluginInfos[e.pluginId])},l=function(e,t){if(void 0===t||void 0===e)return!1;for(var n=Object(r.parse)(e||""),o=0;o<t.length;o++){var i=t[o]||"",a=Object(r.parse)(i);if(a.protocol===n.protocol&&a.hostname===n.hostname&&a.port===n.port)return!0}return!1},d=function(e){return null==e?{}:{id:e.plugin_id,hostSign:{noncestr:e.noncestr||"",timestamp:e.timestamp||"",signature:e.host_sign||""},domains:{request:e.request_domain||[],uploadFile:e.upload_domain||[],downloadFile:e.download_domain||[]}}},f=function(e,t,n){var r=new RegExp("^"+t+":"),o={};return["success","fail","complete"].forEach((function(t){"function"==typeof e[t]&&(o[t]=function(o){o.errMsg=o.errMsg.replace(r,n+":"),e[t](o)})})),Object.assign({},e,o)}},function(e,t,n){n.r(t),n.d(t,"getSystemInfo",(function(){return h})),n.d(t,"getSystemInfoSync",(function(){return v})),n.d(t,"getSystemInfoAsync",(function(){return g})),n.d(t,"getStaticSystemInfoSync",(function(){return _})),n.d(t,"getStableSystemInfo",(function(){return S})),n.d(t,"getInitScreenSize",(function(){return I})),n.d(t,"private_getUserAgent",(function(){return A}));var r=n(0),o=n(27),i=n(84),a=n(1),s=n(2),c=n(11),u=n(45),l=wxNativeConsole.createLogger("systemInfo"),d=null,f=function(e){l.info("[before process]",e);var t=s.PLATFORM;s.IS_IOS&&(e.brand="iPhone"),s.IS_DEVTOOLS&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=i.SDKVersion,e.enableDebug=Boolean(a.default.debug),a.default.devicePixelRatio&&(e.devicePixelRatio=a.default.devicePixelRatio),a.default.theme&&(e.theme=a.default.theme),a.default.host&&(e.host=a.default.host),s.IS_ANDROID&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),delete(d=Object.assign({},e)).errMsg,Object(c.isSinglePageMode)()&&4!==a.default.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),l.info("[after process]",e)},p=function(){a.default.isReady||(new Error).stack},h=function(e){p();Object(r.invokeMethod)("getSystemInfo",e,{beforeSuccess:f})},v=function(){var e={};return h({success:function(t){delete t.errMsg,e=t,d=Object.assign({},e)}}),e},g=function(e){a.default.supportAsyncGetSystemInfo||(console.info('Current Wechat version do not support asynchronous getSystemInfo. "wx.getSystemInfoAsync" will be finished by synchronous implementation.'),p());var t=a.default.supportAsyncGetSystemInfo?"getSystemInfoAsync":"getSystemInfo";Object(r.invokeMethod)(t,e,{beforeSuccess:f})},_=function(){return d||v()},b=null,y=0,m=0,w=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];a.default.onReady((function(){b={};for(var e=0;e<w.length;e++){if(!(w[e]in a.default)){b=_();break}b[w[e]]=a.default[w[e]]}if(a.default.screenHeight&&a.default.screenWidth)y=a.default.screenWidth,m=a.default.screenHeight;else{var t=_();y=t.screenWidth,m=t.screenHeight}}));var O,S=function(){return a.default.isReady?Object.assign({},b):((new Error).stack,{})},I=function(){return a.default.isReady?{screenWidth:y,screenHeight:m,deviceOrientation:y>m?"landscape":"portrait"}:((new Error).stack,{})},E=!1,C=new Set;Object(o.onNativeEvent)("onAppRouteDone",(function(){E=!0,C.forEach((function(e){return e()})),C.clear()}));var T=new Set,k=function(){Object(u.invokeWebviewMethod)("getUserAgent",{},void 0,(function(e){O=e,T.forEach((function(t){try{t(e)}catch(e){}})),T.clear()}))},A=function(e){O?e(O):E?(T.add(e),k()):(C.has(k)||C.add(k),T.add(e))}},function(e,t,n){n.r(t),n.d(t,"getAccountInfoSync",(function(){return x.getAccountInfoSync})),n.d(t,"getLaunchOptionsSync",(function(){return R.getLaunchOptionsSync})),n.d(t,"_getLaunchOptionsSync",(function(){return R._getLaunchOptionsSync})),n.d(t,"onAppEnterBackground",(function(){return r.onAppEnterBackground})),n.d(t,"onAppEnterForeground",(function(){return o.onAppEnterForeground})),n.d(t,"onAppRunningStatusChange",(function(){return N})),n.d(t,"_onAppUnhang",(function(){return h})),n.d(t,"onAppUnhang",(function(){return v})),n.d(t,"onAppHide",(function(){return c})),n.d(t,"offAppHide",(function(){return u})),n.d(t,"_onAppHide",(function(){return l})),n.d(t,"emitIsloatedAppHide",(function(){return d})),n.d(t,"onAppShow",(function(){return i.onAppShow})),n.d(t,"offAppShow",(function(){return i.offAppShow})),n.d(t,"_onAppShow",(function(){return i._onAppShow})),n.d(t,"emitIsloatedAppShow",(function(){return i.emitIsloatedAppShow})),n.d(t,"onError",(function(){return F})),n.d(t,"offError",(function(){return W})),n.d(t,"onUnhandledRejection",(function(){return U})),n.d(t,"offUnhandledRejection",(function(){return V})),n.d(t,"onAppRoute",(function(){return G.onAppRoute})),n.d(t,"offAppRoute",(function(){return G.offAppRoute})),n.d(t,"onAppRouteDone",(function(){return H.onAppRouteDone})),n.d(t,"offAppRouteDone",(function(){return H.offAppRouteDone})),n.d(t,"onAppRouteResized",(function(){return K})),n.d(t,"offAppRouteResized",(function(){return J})),n.d(t,"onPageNotFound",(function(){return ee})),n.d(t,"offPageNotFound",(function(){return te})),n.d(t,"saveExitState",(function(){return ie})),n.d(t,"loadExitState",(function(){return ae})),n.d(t,"_onThemeChange",(function(){return ue})),n.d(t,"onThemeChange",(function(){return ce})),n.d(t,"offThemeChange",(function(){return le})),n.d(t,"getEnterOptionsSync",(function(){return de.getEnterOptionsSync})),n.d(t,"getInnerEnterOptionsSync",(function(){return de.getInnerEnterOptionsSync})),n.d(t,"onCopyUrl",(function(){return E})),n.d(t,"offCopyUrl",(function(){return C}));var r=n(57),o=n(63),i=n(121),a=n(22),s=Object(a.getEventManager)("AppHide"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(){s.emitGlobal()}Object(r.onAppEnterBackground)((function(e){s.emitInternal(e)}));var f=n(0),p=Object(a.getEventManager)("AppUnhang"),h=p.internalOnMethod,v=p.onMethod;Object(f.onMethod)("onAppUnhang",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.emit(e)}));var g=n(69),_=n(3);_.default.appStatus=g.AppStatus.FORE_GROUND,_.default.hanged=!1,Object(i._onAppShow)((function(e){Date.now()})),l((function(e){Date.now()})),Object(o.onAppEnterForeground)((function(){_.default.appStatus=g.AppStatus.FORE_GROUND})),Object(r.onAppEnterBackground)((function(e){"hide"===e.mode?_.default.appStatus=g.AppStatus.LOCK:_.default.appStatus=g.AppStatus.BACK_GROUND,"close"===e.mode?_.default.hanged=!1:"hang"===e.mode&&(_.default.hanged=!0)})),v((function(){_.default.hanged=!1}));var b=n(32),y=n(41),m=n(11),w=n(1),O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.AppVersion",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data)}})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.VersionState",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})},I=null,E=function(e){I=e},C=function(){I=null},T=Object(m.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["release","develop","trial"],n=Object(b.default)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(function(e){return{wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)}}),(function(e){delete e.rawData,e.shortLink=e.short_link,delete e.short_link}));n(e)})),k=Object(m.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){S({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),A=function(e){return Object(y.showToast)({icon:"none",title:e})},P=new Map,D="请检查网络后重试",j=0;Object(f.onMethod)("onCopyUrl",(function(e){if(!Object(m.isGame)()&&e.webviewId!==_.default.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void A("请检查网络后重试");var t=e.shortLinkEnable||!1,n=_.default.lastRoute,r=_.default.lastOpenType,o=JSON.parse(JSON.stringify(_.default.lastRawQuery||{}));if("appLaunch"!==r&&"autoReLaunch"!==r)try{Object.keys(o).forEach((function(e){o[e]=decodeURIComponent(o[e])}))}catch(e){return void A(D)}var i=Object(m.isGame)()?t?"":"index.html":n+".html",a=Object.entries(o).map((function(e){return e.join("=")})).join("&");if(t&&"function"==typeof I)try{a=(I()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}var s=a?i+"?"+a:i;if(t){P.has(j)&&P.set(j,!1);var c=++j,u=!1;P.set(c,!0);var l=function(e){!!P.get(c)&&(A(e),e===D&&Object(f.invokeMethod)("returnCopyUrl",{url:"",shortLinkEnable:t}),P.set(c,!1))};setTimeout((function(){u=!0,l(D)}),1500);var d=w.default.page[n+".html"],p=d&&d.window||{},h=w.default.global&&w.default.global.window||{},v=p.navigationBarTitleText||h.navigationBarTitleText||"";k().then((function(e){var n=e.data;return T({appid:w.default.accountInfo.appId,envVersion:w.default.envVersion,path:s,title:Object(m.isGame)()?"":v,version:n}).then((function(e){return console.log("createWxaShortLinkAsync, ",e),!!P.get(c)&&!u&&(Object(f.invokeMethod)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success:function(){A("已复制")},fail:function(){A(D)}}),P.set(c,!1)),null})).catch((function(e){l(D),console.log("[onCopyUrl]:",e)})),null})).catch((function(e){l(D),console.log("[onCopyUrl]: ",e)}))}else Object(f.invokeMethod)("returnCopyUrl",{url:s,shortLinkEnable:t,success:function(){A("已复制")},fail:function(){A(D)}})}));var x=n(123),R=n(156),M=Object(a.getEventManager)("AppRunningStatusChange"),N=M.internalOnMethod;Object(f.onMethod)("onAppRunningStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_.default.runningStatus=e.status,M.emit(e)}));var L=Object(a.getEventManager)("AppService-Error"),B=Object(a.getEventManager)("AppService-UnhandledRejection"),F=L.onMethod,W=L.offMethod,U=B.onMethod,V=B.offMethod;Reporter.registerThirdErrorListener((function(e){L.emit(e)})),Reporter.registerThirdUnhandledRejectionListener((function(e,t){B.emit({reason:e,promise:t})}));var G=n(49),H=n(71),z=n(20),q=n(166),Y=Object(a.getEventManager)("AppRouteResized"),K=Y.internalOnMethod,J=Y.internalOffMethod;Object(f.onMethod)("onAppRouteResized",(function(e){"object"===Object(z.default)(e)&&null!==e&&Object(q.updateWindowSizeStatus)(e),Y.emit({})}));var X=n(6),$=n(173),Z=n(51),Q=Object(a.getEventManager)("PageNotFound"),ee=Q.onMethod,te=Q.offMethod;function ne(e){for(var t={},n=e.split("&"),r=0;r<n.length;r++){var o=n[r].split("=");if(o.length>1)try{t[o[0]]=decodeURIComponent(o[1])}catch(e){}}return t}var re={page:void 0,time:Date.now(),count:0};Object(f.onMethod)("onPageNotFound",(function(){Z.nativeConsole.info("Ignored onPageNotFound.")})),Object($.onAppRoutePageNotFound)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Z.nativeConsole.info("Page not found, webviewId="+t),_.default.lastRoute="",e&&"string"==typeof e.path&&e.path.endsWith(".html")&&(e.path=Object(X.removeHtmlSuffixFromUrl)(e.path)),e&&"string"==typeof e.query&&(e.query=ne(e.query)),re.page&&re.page===e.path?re.count++:re={page:e.path,time:Date.now(),count:1};var n=!0;Date.now()-re.time<=3e3&&re.count>3?(n=!1,console.error('onPageNotFound error: page "'+e.path+'" is not found.')):Q.emit(e);var r=Q.getGlobalListeners().length>0&&n;r||Reporter.thirdErrorReport({error:new Error('onPageNotFound error: page "'+e.path+'" is not found.'),extend:" at onPageNotFound"}),Object(f.invokeMethod)("pageNotFoundCallback",{hasHandler:r,webviewId:t})}));var oe=n(45),ie=function(e,t,n){var r=w.default.global&&w.default.global.window&&w.default.global.window.restartStrategy,o=w.default.page&&w.default.page[e+".html"]&&w.default.page[e+".html"].window&&w.default.page[e+".html"].window.restartStrategy,i=String(o||r||"");if(i){var a={type:i,path:t,extraData:n?n.data:void 0,expireTimeStamp:(n?n.expireTimeStamp:0)||Date.now()+864e5};w.default.accountInfo.appId,Object(oe.invokeWebviewMethod)("saveExitState",{appId:w.default.accountInfo.appId,data:a},[_.default.currentWebviewId],(function(e){}))}},ae=function(e){Object(oe.invokeWebviewMethod)("loadExitState",{appId:w.default.accountInfo.appId},[_.default.currentWebviewId],(function(t){return t&&t.expireTimeStamp>Date.now()?e(t.type,t.path,t.extraData):e()}))},se=Object(a.getEventManager)("ThemeChange"),ce=se.onMethod,ue=se.internalOnMethod,le=se.offMethod;Object(f.onMethod)("onThemeChange",(function(e){void 0!==w.default.theme&&(w.default.theme=e.theme,se.emit({theme:e.theme}))}));var de=n(79)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(138);var o=n(172),i=n(127);function a(e){return function(e){if(Array.isArray(e))return Object(r.default)(e)}(e)||Object(o.default)(e)||Object(i.default)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(0),o=n(2);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=a(c),Object(r.baseOperateWXData)(Object.assign({},c,{data:Object.assign({api_name:t},i,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll:function(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess:function(e){if(o.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.data){e.rawData=e.data.data;var t=JSON.parse(e.data.data);e=Object.assign(e,t)}e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data,e=s(e)}})}}},function(e,t,n){n.r(t),n.d(t,"EventEmitter2",(function(){return c}));var r=n(20),o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function s(e,t){console.warn("[Event] "+e+" listeners of event "+t+" have been added, possibly causing memory leak.")}function c(e){this._events={},this._newListener=!1,this._removeListener=!1,a.call(this,e)}c.prototype.delimiter=".",c.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},c.prototype.event="",c.prototype.once=function(e,t){return this._once(e,t,!1)},c.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},c.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},c.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},c.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},c.prototype._many=function(e,t,n,r){var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,r),o},c.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,o,a,s=arguments.length;if(this._all&&this._all.length){if(a=this._all.slice(),s>3)for(t=new Array(s),o=0;o<s;o++)t[o]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this,e);break;case 2:a[r].call(this,e,arguments[1]);break;case 3:a[r].call(this,e,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}}if("function"==typeof(a=this._events[e])){switch(this.event=e,s){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];a.apply(this,t)}return!0}if(a&&(a=a.slice()),a&&a.length){if(s>3)for(t=new Array(s-1),o=1;o<s;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,s){case 1:a[r].call(this);break;case 2:a[r].call(this,arguments[1]);break;case 3:a[r].call(this,arguments[1],arguments[2]);break;default:a[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},c.prototype.emitAsync=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,o,a,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:s.push(this._all[r].call(this,e));break;case 2:s.push(this._all[r].call(this,e,arguments[1]));break;case 3:s.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[r].apply(this,t))}}if("function"==typeof(a=this._events[e]))switch(this.event=e,c){case 1:s.push(a.call(this));break;case 2:s.push(a.call(this,arguments[1]));break;case 3:s.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];s.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:s.push(a[r].call(this));break;case 2:s.push(a[r].call(this,arguments[1]));break;case 3:s.push(a[r].call(this,arguments[1],arguments[2]));break;default:s.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},c.prototype.on=function(e,t){return this._on(e,t,!1)},c.prototype.prependListener=function(e,t){return this._on(e,t,!0)},c.prototype.onAny=function(e){return this._onAny(e,!1)},c.prototype.prependAny=function(e){return this._onAny(e,!0)},c.prototype.addListener=c.prototype.on,c.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},c.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||i.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this},c.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n});for(var a=0;a<i.length;a++){if(n=i[a]._listeners,o(n)){for(var s=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){s=c;break}if(s<0)continue;return this._events[e].splice(s,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var o in n){var i=n[o],a=t[i];a instanceof Function||"object"!==Object(r.default)(a)||null===a||(Object.keys(a).length>0&&e(t[i]),0===Object.keys(a).length&&delete t[i])}}}(this.listenerTree),this},c.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||i.call(this),this):(this._events&&(this._events[e]=null),this)},c.prototype.listeners=function(e){return this._events||i.call(this),this._events[e]||(this._events[e]=[]),o(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},c.prototype.eventNames=function(){return Object.keys(this._events)},c.prototype.listenerCount=function(e){return this.listeners(e).length},c.prototype.listenersAny=function(){return this._all?this._all:[]},t.default=c},function(e,t,n){n.r(t),n.d(t,"View",(function(){return p})),n.d(t,"Text",(function(){return v})),n.d(t,"Image",(function(){return C})),n.d(t,"Video",(function(){return U})),n.d(t,"Camera",(function(){return J})),n.d(t,"LivePlayer",(function(){return ee})),n.d(t,"LivePusher",(function(){return se})),n.d(t,"WebView",(function(){return ue.WebView})),n.d(t,"getWebViewIdList",(function(){return ue.getWebViewIdList})),n.d(t,"ImagePreviewer",(function(){return fe})),n.d(t,"webviewLayout",(function(){return O})),n.d(t,"nativeviewLayout",(function(){return S}));var r=n(4),o=n(5),i=n(39),a=n(14),s=n(19),c=n(8),u=n(0),l=n(72),d=n(18);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var p=function(e){Object(a.default)(n,e);var t=f(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.id,a=o.parentId,s=o.style,c=o.props,u=void 0===c?{}:c,l=o.type,d=void 0===l?"text":l,f=o.name,p=void 0===f?"":f,h=o.autoInsert,v=void 0!==h&&h,g=o.eventType,_=void 0===g?"touch":g,b=o.clickState,y=void 0!==b&&b,m=o.bubbleEvent,w=void 0!==m&&m;Object(r.default)(this,n),(e=t.call(this,{id:i,style:s,props:Object.assign(u,{fullscreen:!1}),name:p,parentId:a})).type="text"===d?"TextView":"ImageView",e.eventType=_,e.autoInsert=v,e.bubbleEvent=w,"touch"===e.eventType&&y&&e.ready().then((function(){e.mask=new n({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),e.mask.name="mask",e.add(e.mask)})).catch((function(){}));var O=Date.now(),S={x:0,y:0};e.on("touchstart",(function(t){y&&e.mask&&(e.mask.style.hidden=!1),O=Date.now(),S=t}));var I=function(t){y&&e.mask&&(e.mask.style.hidden=!0);var n={x:0,y:0};try{n=e.getAbsolutePosition()}catch(e){}var r={x:0,y:0};Array.isArray(t)?r=t.pop():t.x&&t.y&&(r=t);var o={absoluteX:n.left+S.x,absoluteY:n.top+S.y,relativeX:S.x,relativeY:S.y,absoluteEndX:n.left+r.x,absoluteEndY:n.top+r.y,relativeEndX:r.x,relativeEndY:r.y,pressInterval:Date.now()-O};e.emit("click",o)};return e.on("touchend",I),e.on("touchcancel",I),e.autoInsert&&e.insert(),e}return Object(o.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&t.push("objectFit");var n=t.reduce((function(t,n){return t[n]=e.computedStyle[n],"borderColor"===n&&(t[n]=Object(d.hex)(e.computedStyle[n])),t}),{});n.bgColor=Object(d.hex)(this.computedStyle.backgroundColor),n.scaleX=this.computedStyle.scaleWidth,n.scaleY=this.computedStyle.scaleHeight;var r={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};return this.layoutBox&&(r={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(r.width=0,r.height=0),this.mask&&(this.mask.style.width=r.width,this.mask.style.height=r.height),n.padding=[0,0,0,0],void 0!==n.borderRadius&&n.borderRadius||(n.borderRadius=0),{parentId:this.parentId,dest:this.dest,viewId:this.id,position:r,hide:this.computedStyle.hidden,style:n,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:n.fixed}}},{key:"insert",value:function(){var e=this,t=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise((function(n,r){Object(u.invokeMethod)("insert"+e.type,Object.assign(t,{success:function(t){Object(d.log)(e.name,e.id,"ready"),e.emit("ready"),n(t)},fail:r}))}))}},{key:"update",value:function(){var e=this;this.shouldUpdate=!1;var t=this.toNativeData();return new Promise((function(n,r){Object(u.invokeMethod)("update"+e.type,Object.assign(t,{success:n,fail:r}))}))}},{key:"destroy",value:function(){var e=this;Object(i.default)(Object(c.default)(n.prototype),"destroy",this).call(this);var t={dest:this.dest,viewId:this.id};return new Promise((function(n,r){Object(u.invokeMethod)("remove"+e.type,Object.assign(t,{success:n,fail:r}))}))}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.left,r=t.top,o=t.opacity,i=t.scaleWidth,a=t.scaleHeight,s=t.rotate,c=void 0===s?0:s,l=t.duration,d=void 0===l?500:l,f={dest:this.dest,viewId:this.id,easing:"ease-in",duration:d,finalStyle:{left:n,top:r,opacity:o,rotate:c,scaleX:i,scaleY:a}};return new Promise((function(e,t){Object(u.invokeMethod)("animateCoverView",Object.assign(f,{success:e,fail:t}))})).then((function(t){return void 0!==n&&(e.style.left=n),void 0!==r&&(e.style.top=r),void 0!==i&&(e.style.scaleWidth=i),void 0!==a&&(e.style.scaleHeight=a),void 0!==o&&(e.style.opacity=o),void 0!==c&&(e.style.rotate=c),t}))}}]),n}(l.Element);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var v=function(e){Object(a.default)(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.id,i=e.style,a=e.value,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(r.default)(this,n),t.call(this,{id:o,style:i,props:{value:s},type:"text",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(o.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce((function(t,n){return t[n]=e.computedStyle[n],t}),{});return Object.assign(Object(i.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{label:Object.assign(t,{content:this.value})})}}]),n}(p),g=n(181);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var b=function e(t,n){var r=!1;n.layoutBox=n.layoutBox||{},["left","top","width","height"].forEach((function(e){r=r||n.layoutBox[e]!==t.layout[e],n.layoutBox[e]=t.layout[e]})),n.shouldUpdate=n.shouldUpdate||r,t.children.forEach((function(t){var r=n.children[t.id];r&&e(t,r)}))},y=function e(t){var n=Promise.resolve();return t.isInserted?t.shouldUpdate&&(n=t.update()):n=t.insert(),n.then((function(){return Promise.all(Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)})))}))},m=function e(t){t.isInserted?t.shouldUpdate&&t.update():t.insert(),Object.keys(t.children).map((function(n){var r=t.children[n];return e(r)}))},w=function(e){Object(a.default)(n,e);var t=_(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=o.name,s=o.auto,c=void 0===s||s;Object(r.default)(this,n),e=t.call(this,{style:i,id:0,name:a});var u=null;return e.auto=c,e.on("layout",(function(){e.auto&&(clearTimeout(u),u=setTimeout((function(){return e.layout()}),0))})),e.onebyone=!0,e}return Object(o.default)(n,[{key:"layout",value:function(){var e=this,t={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return Object(g.default)(t),b(t,this),this.onebyone?y(this).then((function(){return e.emit("update-done")})):(m(this),Promise.resolve().then((function(){return e.emit("update-done")})))}}]),n}(l.Element),O=new w({name:"webview-layout"});O.dest=0;var S=new w({name:"nativeview-layout",auto:!1});S.onebyone=!1,S.dest=1;var I=n(11);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var C=function(e){Object(a.default)(n,e);var t=E(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.id,i=e.style,a=e.src,s=void 0===a?"":a,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(r.default)(this,n),t.call(this,{id:o,style:i,props:{src:s},type:"image",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(o.default)(n,[{key:"toNativeData",value:function(){return Object.assign(Object(i.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{iconPath:Object(I.hideInnerRequest)(this.src)})}}]),n}(p),T=n(9),k=n(83),A=n(27),P=n(2),D=n(1),j=n(47),x={video:1,"live-player":2,"live-pusher":3,image:4,audio:5},R=0,M={};D.default.onReady((function(){R=D.default.appType+1e3,M=D.default.appLaunchInfo}));var N={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92};function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var B={},F=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];P.IS_ANDROID&&F.push("onVideoFullScreenChange");var W=function(e,t,n){"ad"!==e.scene&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.component,n=e.eventName,r=e.eventData,o=e.src,i=void 0===o?"":o,a=Object(j._getCurrentNetworkType)(),s=wx&&wx.version&&wx.version.version||"",c=Object.keys(M.query||{}).map((function(e){return e+"="+M.query[e]})).join(",");c=encodeURIComponent(c);var u="";switch(n){case"onLoad":u=[r.duration,r.controls?2:1].join(";");break;case"onWaiting":u=[r.position,r.buffered].join(";");break;case"onError":u=r.errMsg.replace(","," ");break;case"onFullScreenChange":u=r.fullScreen?2:1;break;case"onTimeUpdate":u=[r.position,r.buffered].join(";");break;case"onImageLoad":u=[r.isLazyLoad?2:1,r.size,r.loadTime,r.width,r.height,r.originalWidth,r.originalHeight].join(";");break;case"onImageError":u=[r.isLazyLoad?2:1].join(";")}var l=[Math.round(Date.now()/1e3),M.scene,"",M.sessionid||M.sessionId,M.path,c,a,s,x[t],N[n],u,encodeURIComponent(i.substring(0,1024)).substring(0,1024),R].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})}({component:"video",eventName:t,eventData:n,src:e.src})},U=function(e){Object(a.default)(n,e);var t=L(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=void 0===i?{}:i,s=o.name,c=o.x,u=void 0===c?0:c,l=o.y,d=void 0===l?0:l,f=o.width,p=void 0===f?300:f,h=o.height,v=void 0===h?200:h,g=o.hide,_=void 0!==g&&g,b=o.src,y=o.poster,m=o.referrerPolicy,w=void 0===m?"no-referrer":m,O=o.initialTime,S=void 0===O?0:O,I=o.playbackRate,E=void 0===I?1:I,C=o.live,A=void 0!==C&&C,P=o.objectFit,D=void 0===P?"contain":P,j=o.controls,x=void 0===j||j,R=o.showProgress,M=void 0===R||R,N=o.showProgressInControlMode,L=void 0===N?M:N,W=o.autoplay,U=void 0!==W&&W,V=o.muted,G=void 0!==V&&V,H=o.loop,z=void 0!==H&&H,q=o.enableProgressGesture,Y=void 0===q||q,K=o.enablePlayGesture,J=void 0!==K&&K,X=o.showCenterPlayBtn,$=void 0===X||X,Z=o.autoInsert,Q=void 0===Z||Z,ee=o.scene,te=void 0===ee?"default":ee,ne=o.preLoad,re=void 0!==ne&&ne,oe=o.obeyMuteSwitch,ie=void 0!==oe&&oe,ae=o.underGameView,se=void 0!==ae&&ae,ce=o.backgroundColor,ue=void 0===ce?"#000000":ce,le=o.zIndex;Object(r.default)(this,n),(e=t.call(this,{style:a,name:s})).isSrcChanged=!1,e.autoInsert=Q,e.scene=te,e.preLoad=re,e.underGameView=se,e.zIndex=le,B[e.id]=Object(T.default)(e);var de=null;e.emitter=new k.default,e.deferred=[],e._buffered=0,e._position=0;var fe={x:u,y:d,width:p,height:v,hide:_,src:b,poster:y,initialTime:S,playbackRate:E,live:A,objectFit:D,controls:x,showProgress:M,showProgressInControlMode:L,backgroundColor:ue,autoplay:U,muted:G,loop:z,enableProgressGesture:Y,enablePlayGesture:J,showCenterPlayBtn:$,obeyMuteSwitch:ie,referrerPolicy:w};return Object.keys(fe).forEach((function(t){Object.defineProperty(Object(T.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return fe[t]},set:function(n){"src"!==t&&fe[t]===n||(fe[t]=n,e.isInserted?("src"===t&&(e.isSrcChanged=!0),"poster"===t&&(e.isPosterChanged=!0),"playbackRate"===t?e.operate("playbackRate",[n]):(clearTimeout(de),de=setTimeout((function(){return e.update()}),0))):e.deferred.push({type:"property",property:t,value:n}))}})})),F.forEach((function(t){var n=t.toLowerCase().replace("video","");e[n]=function(){},e.emitter.on(t,(function(t){e[n](t)}))})),e.autoInsert&&e.insert().then((function(){e.playbackRate&&1!==e.playbackRate&&e.operate("playbackRate",[e.playbackRate])})).then((function(){e.deferred.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))})),e}return Object(o.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return this.isInserted=!0,W(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("insertVideoPlayer",Object.assign(e.toNativeData(),{data:JSON.stringify({id:e.id}),filePath:Object(I.hideInnerRequest)(e.src),scene:e.scene,preLoad:e.preLoad,underGameView:e.underGameView,referrerPolicy:e.referrerPolicy,zIndex:e.zIndex,success:function(n){e.emit("ready"),t(n)},fail:n}))}))}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){P.IS_IOS?setTimeout((function(){Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n})}),0):Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n}),F.forEach((function(t){var n=t.replace("Video","").replace("on","off");"function"==typeof e[n]&&e[n]()})),delete B[e.id]}))}},{key:"toNativeData",value:function(){this.layoutBox;var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=Object(I.hideInnerRequest)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=Object(I.hideInnerRequest)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}},{key:"update",value:function(){this.shouldUpdate=!1;var e=this.toNativeData();return e.filePath&&W(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(e+" can't be invoked when video is hidden")):new Promise((function(r,o){Object(u.invokeMethod)("operateVideoPlayer",{videoPlayerId:t.id,type:e,data:n,success:r,fail:o})}));this.deferred.push({type:"method",method:e,args:n})}},{key:"play",value:function(){return this.operate("play")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"seek",value:function(e){return this.operate("seek",[e])}},{key:"requestFullScreen",value:function(e){return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}}]),n}(l.Element);F.forEach((function(e){var t=e.replace("Video","");U.prototype[t]=function(t){this.emitter.on(e,t)};var n=t.replace("on","off");U.prototype[n]=function(t){this.emitter.off(e,t)}})),F.forEach((function(e){Object(A.onNativeEvent)(e,(function(t){var n=t.videoPlayerId||JSON.parse(t.data).id,r=B[n];if(r)if(r.emitter.emit(e,t),"onVideoProgress"!==e){var o=t;"onVideoTimeUpdate"===e?(r._position=t.position,o={position:t.position,buffered:r._buffered}):"onVideoWaiting"===e&&(o={position:r._position,buffered:r._buffered}),W(r,e.replace("Video",""),o)}else r._buffered=t.buffered}))}));var V=n(33),G=n(55),H=n(37),z=n(182);function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var Y=new V.default,K={},J=function(e){Object(a.default)(n,e);var t=q(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=o.name,s=o.x,c=void 0===s?0:s,l=o.y,d=void 0===l?0:l,f=o.width,p=void 0===f?300:f,h=o.height,v=void 0===h?200:h,g=o.devicePosition,_=void 0===g?"back":g,b=o.flash,y=void 0===b?"auto":b,m=o.size,w=void 0===m?"small":m,O=o.autoInsert,S=void 0===O||O,I=o.success,E=o.fail,C=o.complete;Object(r.default)(this,n),(e=t.call(this,{style:i,name:a})).size=w,K[e.id]=Object(T.default)(e);var k=null;e.deferred=[];var A={x:c,y:d,width:p,height:v,devicePosition:_,flash:y};Object.keys(A).forEach((function(t){Object.defineProperty(Object(T.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return A[t]},set:function(n){if(A[t]!==n){if(A[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(k),k=setTimeout((function(){return e.update()}),0)}}})})),Y.on("onInit",(function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))}));var P={success:I,fail:E,complete:C};return S&&e.insert().then((function(t){e.frameWidth=t.width,e.frameHeight=t.height,Object(u.beforeInvokeCallback)({name:"createCamera",args:P})})).catch((function(){Object(u.beforeInvokeFail)("createCamera",P)})),e}return Object(o.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,o){Object(u.invokeMethod)("operateCamera",Object.assign(n,{cameraId:t.id,type:e,fail:o,success:function(n){if(r(n),"listenFrameChange"===e){if(!G.default)throw new Error("device not supported");n.data=G.default.get(n.bufferId),n.data.__proto__=ArrayBuffer.prototype,t._frame=n}}}))})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return this.operate("takePhoto",{quality:e})}},{key:"startRecord",value:function(){return this.operate("startRecord")}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.operate("stopRecord",{compressed:e})}},{key:"onAuthCancel",value:function(e){Y.on("onAuthCancel",e)}},{key:"onStop",value:function(e){Y.on("onStop",e)}},{key:"onCameraFrame",value:function(e){var t=this;"function"==typeof e&&Y.on("onCameraFrame",(function(){t._frame&&e({data:t._frame.data,width:t._frame.width,height:t._frame.height})}))}},{key:"listenFrameChange",value:function(e){var t=e?Object(z.getWorkerId)(e):void 0,n={size:this.size};return void 0!==t&&Object(H.checkPermissionSync)("listenFrameChangeInWorker")?(n.workerId=t,this.operate("listenFrameChange",n)):this.operate("listenFrameChange",n)}},{key:"closeFrameChange",value:function(){return this._frame=null,this.operate("closeFrameChange")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete K[e.id],Y.removeAllListeners("onInit"),Y.removeAllListeners("onAuthCancel"),Y.removeAllListeners("onStop"),Y.removeAllListeners("onCameraFrame"),Object(u.invokeMethod)("removeCamera",{cameraId:e.id,success:t,fail:n})}))}}]),n}(l.Element);Object(A.onNativeEvent)("onCameraInitDone",(function(){return Y.emit("onInit")})),Object(A.onNativeEvent)("onCameraNeedAuthCancel",(function(){return Y.emit("onAuthCancel")})),Object(A.onNativeEvent)("onCameraStop",(function(){return Y.emit("onStop")})),Object(A.onNativeEvent)("onCameraFrame",(function(){return Y.emit("onCameraFrame")}));var X=n(61);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var Z={},Q=new X.Emitter("LivePlayer",!0),ee=function(e){Object(a.default)(n,e);var t=$(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=o.name,s=o.x,c=void 0===s?0:s,l=o.y,d=void 0===l?0:l,f=o.width,p=void 0===f?300:f,h=o.height,v=void 0===h?200:h,g=o.src,_=o.mode,b=void 0===_?"live":_,y=o.autoplay,m=void 0!==y&&y,w=o.muted,O=void 0!==w&&w,S=o.orientation,I=void 0===S?"vertical":S,E=o.objectFit,C=void 0===E?"contain":E,k=o.minCache,A=void 0===k?1:k,P=o.maxCache,D=void 0===P?3:P,j=o.soundMode,x=void 0===j?"speaker":j,R=o.autoPauseIfOpenNative,M=void 0===R||R,N=o.autoInsert,L=void 0===N||N,B=o.success,F=o.fail,W=o.complete;Object(r.default)(this,n),e=t.call(this,{style:i,name:a}),Z[e.id]=Object(T.default)(e);var U=null;e.deferred=[];var V={x:c,y:d,width:p,height:v,src:g,mode:b,autoplay:m,muted:O,orientation:I,objectFit:C,minCache:A,maxCache:D,soundMode:x,autoPauseIfOpenNative:M};Object.keys(V).forEach((function(t){Object.defineProperty(Object(T.default)(e),t,{enumerable:!0,get:function(){return V[t]},set:function(n){if(V[t]!==n){if(V[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(U),U=setTimeout((function(){return e.update()}),0)}}})}));var G={success:B,fail:F,complete:W};return L&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePlayer",args:G})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePlayer",G,t)})),e}return Object(o.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.isInserted?new Promise((function(r,o){Object(u.invokeMethod)("operateLivePlayer",{livePlayerId:t.id,type:e,data:n,quality:n.quality,fail:o,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"play",value:function(){return this.operate("play")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"mute",value:function(){return this.operate("mute")}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";return this.operate("snapshot",{quality:e})}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete Z[e.id],Q.off("state-"+e.id),Q.off("fs-"+e.id),Q.off("net-"+e.id),Q.off("audio-"+e.id),Object(u.invokeMethod)("removeLivePlayer",{livePlayerId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){Q.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){Q.off("state-"+this.id,e)}},{key:"onFullScreenChange",value:function(e){Q.on("fs-"+this.id,e)}},{key:"offFullScreenChange",value:function(e){Q.off("fs-"+this.id,e)}},{key:"onNetStatus",value:function(e){Q.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){Q.off("net-"+this.id,e)}},{key:"onAudioVolumeNotify",value:function(e){Q.on("audio-"+this.id,e)}},{key:"offAudioVolumeNotify",value:function(e){Q.off("audio-"+this.id,e)}}]),n}(l.Element),te=function(e,t){return Object(A.onNativeEvent)(e,(function(e){return t(e||{})}))};function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}te("onLivePlayerEvent",(function(e){var t=e.livePlayerId,n=e.errCode,r=e.errMsg;Q.emit("state-"+t,{code:n,message:r})})),te("onLivePlayerFullScreenChange",(function(e){var t=e.livePlayerId,n=e.fullScreen,r=e.direction;Q.emit("fs-"+t,{fullScreen:n,direction:r})})),te("onLivePlayerNetStatus",(function(e){var t=e.livePlayerId,n=e.info;n&&Q.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),te("onLivePlayerAudioVolume",(function(e){var t=e.livePlayerId,n=e.volume;Q.emit("audio-"+t,{volume:n})}));var re={},oe=new X.Emitter("LivePusher",!0);function ie(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function ae(e){switch(e){case"3:14":return 1;default:return 2}}var se=function(e){Object(a.default)(n,e);var t=ne(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=o.name,s=o.x,c=void 0===s?0:s,l=o.y,d=void 0===l?0:l,f=o.width,p=void 0===f?300:f,h=o.height,v=void 0===h?200:h,g=o.url,_=o.mode,b=void 0===_?"RTC":_,y=o.autopush,m=void 0!==y&&y,w=o.muted,O=void 0!==w&&w,S=o.enableCamera,I=void 0===S||S,E=o.autoFocus,C=void 0===E||E,k=o.orientation,A=void 0===k?"vertical":k,P=o.beauty,D=void 0===P?0:P,j=o.whiteness,x=void 0===j?0:j,R=o.aspect,M=void 0===R?"9:16":R,N=o.minBitrate,L=void 0===N?200:N,B=o.maxBitrate,F=void 0===B?1e3:B,W=o.audioQuality,U=void 0===W?"high":W,V=o.waitingImage,G=o.waitingImageHash,H=o.zoom,z=void 0!==H&&H,q=o.devicePosition,Y=void 0===q?"front":q,K=o.remoteMirror,J=void 0!==K&&K,X=o.localMirror,$=void 0===X?"auto":X,Z=o.audioReverbType,Q=void 0===Z?0:Z,ee=o.enableMic,te=void 0===ee||ee,ne=o.enableAgc,oe=void 0!==ne&&ne,ie=o.enableAns,ae=void 0!==ie&&ie,se=o.audioVolumeType,ce=void 0===se?"voicecall":se,ue=o.videoWidth,le=void 0===ue?360:ue,de=o.videoHeight,fe=void 0===de?640:de,pe=o.autoInsert,he=void 0===pe||pe,ve=o.success,ge=o.fail,_e=o.complete;Object(r.default)(this,n),e=t.call(this,{style:i,name:a}),re[e.id]=Object(T.default)(e);var be=null;e.deferred=[];var ye={x:c,y:d,width:p,height:v,url:g,mode:b,autopush:m,muted:O,enableCamera:I,autoFocus:C,orientation:A,beauty:D,whiteness:x,aspect:M,minBitrate:L,maxBitrate:F,audioQuality:U,waitingImage:V,waitingImageHash:G,zoom:z,devicePosition:Y,remoteMirror:J,localMirror:$,audioReverbType:Q,enableMic:te,enableAgc:oe,enableAns:ae,audioVolumeType:ce,videoWidth:le,videoHeight:fe};Object.keys(ye).forEach((function(t){Object.defineProperty(Object(T.default)(e),t,{enumerable:!0,get:function(){return ye[t]},set:function(n){if(ye[t]!==n){if(ye[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(be),be=setTimeout((function(){return e.update()}),0)}}})}));var me={success:ve,fail:ge,complete:_e};return he&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePusher",args:me})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePusher",me,t)})),e}return Object(o.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(r,o){Object(u.invokeMethod)("operateLivePusher",{livePusherId:t.id,type:e,url:n.url,volume:n.volume,quality:n.quality,fail:o,success:r})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:ie(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:ae(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"start",value:function(){return this.operate("start")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"playBGM",value:function(e){return this.operate("playBGM",{url:e})}},{key:"stopBGM",value:function(){return this.operate("stopBGM")}},{key:"pauseBGM",value:function(){return this.operate("pauseBGM")}},{key:"resumeBGM",value:function(){return this.operate("resumeBGM")}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setBGMVolume",{volume:e})}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setMICVolume",{volume:e})}},{key:"startPreview",value:function(){return this.operate("startPreview")}},{key:"stopPreview",value:function(){return this.operate("stopPreview")}},{key:"snapshot",value:function(e){return this.operate("snapshot",{quality:e})}},{key:"switchCamera",value:function(){return this.operate("switchCamera")}},{key:"toggleTorch",value:function(){return this.operate("toggleTorch")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete re[e.id],oe.off("state-"+e.id),oe.off("net-"+e.id),oe.off("start-"+e.id),oe.off("progress-"+e.id),oe.off("complete-"+e.id),oe.off("error-"+e.id),Object(u.invokeMethod)("removeLivePusher",{livePusherId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){oe.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){oe.off("state-"+this.id,e)}},{key:"onNetStatus",value:function(e){oe.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){oe.off("net-"+this.id,e)}},{key:"onBGMStart",value:function(e){oe.on("start-"+this.id,e)}},{key:"offBGMStart",value:function(e){oe.off("start-"+this.id,e)}},{key:"onBGMProgress",value:function(e){oe.on("progress-"+this.id,e)}},{key:"offBGMProgress",value:function(e){oe.off("progress-"+this.id,e)}},{key:"onBGMComplete",value:function(e){oe.on("complete-"+this.id,e)}},{key:"offBGMComplete",value:function(e){oe.off("complete-"+this.id,e)}},{key:"onError",value:function(e){oe.on("error-"+this.id,e)}},{key:"offError",value:function(e){oe.off("error-"+this.id,e)}}]),n}(l.Element),ce=function(e,t){return Object(A.onNativeEvent)(e,(function(e){return t(e||{})}))};ce("onLivePusherEvent",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg;oe.emit("state-"+t,{code:n,message:r})})),ce("onLivePusherNetStatus",(function(e){var t=e.livePusherId,n=e.info;n&&oe.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),ce("onLivePusherBGMStart",(function(e){var t=e.livePusherId;oe.emit("start-"+t)})),ce("onLivePusherBGMProgress",(function(e){var t=e.livePusherId,n=e.progress,r=e.duration;oe.emit("progress-"+t,{progress:n,duration:r})})),ce("onLivePusherBGMComplete",(function(e){var t=e.livePusherId,n=e.errCode;oe.emit("complete-"+t,{errCode:n})})),ce("onLivePusherError",(function(e){var t=e.livePusherId,n=e.errCode,r=e.errMsg,o=e.data;oe.emit("error-"+t,{errCode:n,errMsg:r,data:o})}));var ue=n(114);function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var de={},fe=function(e){Object(a.default)(n,e);var t=le(n);function n(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.style,a=void 0===i?{}:i,s=o.name,c=o.x,u=void 0===c?0:c,l=o.y,d=void 0===l?0:l,f=o.width,p=void 0===f?300:f,h=o.height,v=void 0===h?200:h,g=o.url,_=void 0===g?"":g,b=o.urls,y=void 0===b?[]:b,m=o.scale,w=void 0===m?1:m,O=o.autoInsert,S=void 0===O||O,I=o.hide,E=void 0!==I&&I,C=o.zIndex,k=void 0===C?0:C;if(Object(r.default)(this,n),(e=t.call(this,{style:a,name:s})).x=u,e.y=d,e.width=p,e.height=v,e.scale=+w,e.hide=E,e.autoInsert=S,e.url=_,e.zIndex=k,e.emitter=new X.Emitter("ImagePreviewer",!0),de[e.id]=Object(T.default)(e),"string"==typeof y)try{e.urls=JSON.parse(y)}catch(t){e.urls=[]}else e.urls=y;return e._insertPromise=new Promise((function(t,n){e._insertPromiseResolve=t,e._insertPromiseReject=n})),e}return Object(o.default)(n,[{key:"insert",value:function(){var e=this;return this.toNativeData(),Object(u.invokeMethod)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:function(t){e._insertPromiseResolve(t)},fail:function(t){e._insertPromiseReject(t)}})),this._insertPromise}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){e._insertPromise.then((function(){e.toNativeData(),Object(u.invokeMethod)("updateImagePreviewer",Object.assign(e.toNativeData(),{success:function(e){t(e)},fail:function(e){n(e)}}))})).catch(n)}))}},{key:"destroy",value:function(){var e=this;return this.id,new Promise((function(t,n){setTimeout((function(){Object(u.invokeMethod)("removeImagePreviewer",{viewId:e.id,success:t,fail:n}),e.offImageLoadFail(),delete de[e.id]}),0)}))}},{key:"toNativeData",value:function(){this.layoutBox;var e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}},{key:"onImageLoadFail",value:function(e){this.emitter.on("onImageLoadFail",e)}},{key:"offImageLoadFail",value:function(e){this.emitter.off("onImageLoadFail",e)}}]),n}(l.Element);Object(A.onNativeEvent)("onImagePreviewerLoadFail",(function(e){de[e.viewId].emitter.emit("onImageLoadFail",e)}))},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return r.pick})),n.d(t,"omit",(function(){return r.omit})),n.d(t,"isObject",(function(){return r.isObject})),n.d(t,"mergeDeep",(function(){return r.mergeDeep})),n.d(t,"getMembers",(function(){return r.getMembers})),n.d(t,"get",(function(){return r.get})),n.d(t,"flatten",(function(){return r.flatten})),n.d(t,"cloneDeep",(function(){return r.cloneDeep})),n.d(t,"isRootElement",(function(){return s})),n.d(t,"getChildren",(function(){return c})),n.d(t,"getVisibleChildren",(function(){return u})),n.d(t,"traverseElement",(function(){return l})),n.d(t,"getDataFromPaths",(function(){return d})),n.d(t,"urlEncode",(function(){return _})),n.d(t,"urlDecode",(function(){return b})),n.d(t,"getQueryString",(function(){return y})),n.d(t,"addUrlParam",(function(){return m})),n.d(t,"allSettled",(function(){return w})),n.d(t,"getInitDeviceOrientation",(function(){return I}));var r=n(167),o=n(67);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t;return e.parent===o.Layout||!(null===(t=e.parent)||void 0===t?void 0:t.referComponent)},c=function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))},u=function(e){return c(e).filter((function(e){return!0!==(null==e?void 0:e.style.hidden)}))},l=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"downward";"downward"===r&&n(t);var o,a=i(c(t));try{for(a.s();!(o=a.n()).done;){var s=o.value;e(s,n,r)}}catch(e){a.e(e)}finally{a.f()}"upward"===r&&n(t)},d=function(e,t){var n,o=i(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,s=a.path,c=a.value,u=a.condition;if(void 0===u||u){var l=c||(s?Object(r.get)(e,s):"");if(l)return l}}}catch(e){o.e(e)}finally{o.f()}return null},f=n(42);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=63,g=function(e){var t=e.toString(16).toUpperCase();return t.length<2?"%0"+t:"%"+t},_=function(e){if(!e)return"";var t,n=[],r=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/,o=p(String(e));try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i.match(r)){var a=i.codePointAt?i.codePointAt(0):i.charCodeAt(0);a<128?n.push(g(a)):a<2048?n.push([g(192+(a>>6)),g(128+(a&v))].join("")):a<65536?n.push([g(224+(a>>12)),g(128+(a>>6&v)),g(128+(a&v))].join("")):a<2097152&&n.push([g(240+(a>>18)),g(128+(a>>12&v)),g(128+(a>>6&v)),g(128+(a&v))].join(""))}else n.push(i)}}catch(e){o.e(e)}finally{o.f()}return n.join("")},b=function(e){if(!e)return"";for(var t=function(e){if(!e)throw new Error("invalid text")},n=function(e){return String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e)},r=e.replace(/%[a-fA-F0-9]{2}/gi,(function(e){return String.fromCharCode(parseInt(e.replace("%",""),16))})),o=0,i="";o<r.length;){var a=r.charCodeAt(o);if(a<128)i+=n(a),o+=1;else if(a>=192&&a<224){t(o+1<r.length),i+=n((31&a)<<6|r.charCodeAt(o+1)&v),o+=2}else if(a<240){t(o+2<r.length);var s=r.charCodeAt(o+1),c=r.charCodeAt(o+2);i+=n((15&a)<<12|(s&v)<<6|c&v),o+=3}else{t(o+3<r.length);var u=r.charCodeAt(o+1),l=r.charCodeAt(o+2),d=r.charCodeAt(o+3);i+=n([(7&a)<<18,(u&v)<<12,(l&v)<<6,d&v].reduce((function(e,t){return e|t}),0)),o+=4}}return i},y=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));var o,i=p(r.split("&"));try{for(i.s();!(o=i.n()).done;){var a=o.value.split("="),s=Object(f.default)(a,2),c=s[0],u=s[1];t[c]=b(u)}}catch(e){i.e(e)}finally{i.f()}}return t},m=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?",o="",i=Object.keys(t);if(i.length>0){var a,s=p(i);try{for(s.s();!(a=s.n()).done;){var c=a.value;o=o.concat(c+"="+_(t[c])+"&")}}catch(e){s.e(e)}finally{s.f()}return o.length>0&&(o=o.substring(0,o.length-1)),n[0]+r+o+(n[1]?"#"+n[1]:"")}return e},w=function(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))},O=n(29),S=n(1),I=function(){var e=Object(O.getInitScreenSize)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":S.default.deviceOrientation&&/^landscape/.test(S.default.deviceOrientation)?"landscape":S.default.deviceOrientation||"portrait"}},function(e,t,n){n.r(t),n.d(t,"operateWXData",(function(){return a})),n.d(t,"_operateWXData",(function(){return s})),n.d(t,"constructOperateWXData",(function(){return i})),n.d(t,"_pluginOperateWXData",(function(){return c}));var r=n(0),o=n(2),i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("operateWXData",a,{apiName:""})){if("operateWXData"===t);var s={api_name:a.apiName,data:a.reqData||{},operate_directly:e};n&&(s.plugin_appid=a.pluginId);var c={data:s,isImportant:!0===i,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};Object(r.baseOperateWXData)(Object.assign({},c,a),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){o.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}},a=i(!0),s=i(!1),c=i(!0,void 0,!0)},function(e,t,n){n.r(t),n.d(t,"checkPermissionSync",(function(){return c}));var r=n(0),o=n(10),i=n(1),a={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021},s={};i.default.onReady((function(){var e=Object.keys(a).map((function(e){return a[e]}));Object(r.invokeMethod)("getPermissionBytes",{indexes:e,success:function(t){if(t.permissionBytes)for(var n=0;n<t.permissionBytes.length;n++){var r=e[n];s[r]=1===t.permissionBytes[n]}},fail:function(e){}})}));var c=function(e){var t=a[e];if("number"!=typeof t)return!1;if(!Object(o.isUndefined)(s[t]))return s[t];var n=!1;return Object(r.invokeMethod)("getPermissionBytes",{indexes:[t],success:function(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n}},function(e,t,n){function r(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,c,"next",e)}function c(e){r(a,o,i,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,"default",(function(){return o}))},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(8);function o(e,t,n){return(o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(r.default)(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return l})),n.d(t,"openADCanvas",(function(){return d})),n.d(t,"navigateToMiniProgram",(function(){return f})),n.d(t,"operateWXData",(function(){return h})),n.d(t,"adOperateWXData",(function(){return p})),n.d(t,"showSplashAd",(function(){return v})),n.d(t,"closeSplashAd",(function(){return g})),n.d(t,"showSplashAdMenu",(function(){return _})),n.d(t,"splashAdFirstStepViewLayoutStateChange",(function(){return b})),n.d(t,"splashAdAllViewLayoutStateChange",(function(){return y})),n.d(t,"fs",(function(){return u._fs}));var r=n(0),o=n(18),i=n(46),a=n(6),s=n(36),c=n(2),u=n(93),l=Object(o.promisify)((function(e){var t=e.url,n=e.adInfo,o=e.adUxInfo,i={url:t,adInfo:n,success:e.success,fail:e.fail,complete:e.complete};o&&(i.adUxInfo=o),Object(r.invokeMethod)("private_openUrl",i)})),d=Object(o.promisify)((function(e){var t=e.canvasInfo,n=e.posType,o=e.success,a=e.fail,s=e.complete;Object(r.invokeMethod)("openADCanvas",{canvasId:t.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:n}),adInfoXml:Object(i.htmlDecode)(t.ad_info_xml),openFirstSightVoice:1,success:o,fail:a,complete:s})})),f=Object(o.promisify)((function(e){var t=e.appId,n=e.path,o=e.traceid,i=e.aid,s=e.adInfo,c=e.adUxInfo,u=e.success,l=e.fail,d=e.complete,f=o+":"+i,p={appId:t,path:Object(a.transWxmlToHtml)(n).trim(),scene:1095,sourcetype:1,sceneNote:f,adInfo:s,success:u,fail:l,complete:d};c&&(p.adUxInfo=c),Object(r.invokeMethod)("navigateToMiniProgram",p)})),p=Object(o.promisify)(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("adOperateWXData",o,{apiName:""})){var i={api_name:o.apiName,data:o.reqData||{},operate_directly:e},a={data:i,isImportant:!0===n,requestInQueue:!o.hasOwnProperty("requestInQueue")||Boolean(o.requestInQueue)};Object(r.invokeMethod)("adOperateWXData",Object.assign({},a,o),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess:function(e){c.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})}}}(!1,"adOperateWXDataForAd")),h=Object(o.promisify)(Object(s.constructOperateWXData)(!1,"operateWXDataForAd"));function v(e){Object(r._invokeMethod)("showSplashAd",e)}function g(e){Object(r._invokeMethod)("closeSplashAd",e)}function _(e){Object(r._invokeMethod)("showSplashAdMenu",e)}function b(e){Object(r._invokeMethod)("splashAdFirstStepViewLayoutStateChange",e)}function y(e){Object(r._invokeMethod)("splashAdAllViewLayoutStateChange",e)}},function(e,t,n){n.r(t),n.d(t,"showToast",(function(){return y})),n.d(t,"hideToast",(function(){return m})),n.d(t,"showLoading",(function(){return O})),n.d(t,"hideLoading",(function(){return S})),n.d(t,"_showModal",(function(){return p})),n.d(t,"showModal",(function(){return h})),n.d(t,"showActionSheet",(function(){return I})),n.d(t,"showShareActionSheet",(function(){return E})),n.d(t,"_checkIsInteracting",(function(){return C}));var r=n(0),o=n(6),i=n(3),a=n(59),s=n(2),c=n(11),u=n(70),l=n(49),d=n(157),f=!1,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:s.IS_MINA?"#fff":"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:s.IS_MINA?"#07C160":"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=Object(o.extend)(t,e),Object(r.beforeInvoke)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?Object(r.beforeInvokeFail)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?Object(r.beforeInvokeFail)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):Object(r.invokeMethod)("showModal",t,{beforeSuccess:function(e){e.confirm=Boolean(e.confirm),s.IS_IOS||s.IS_MAC?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),Object(a._setWxIsInvokeInTapForNavToMiniProgram)()},beforeAll:function(){f=!0},afterAll:function(){f=!1}}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(e),Object(c.isGame)()&&Object(u.reportCanvasData)(u.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_MODAL)},v={},g={};Object(l.onAppRoute)((function(e){g[e.webviewId]=[]})),Object(d.onDomReady)((function(e){setTimeout((function(){var t=e.webviewId,n=g[t]||[];v[t]=!0,n.length>0&&(b=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args,o=/hideLoading/.test(t.errMsg)?{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};Object(r.invokeMethod)("hideToast",n,o)}))),delete g[t]}),100)}));var _=1,b=!1,y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={duration:1500,title:"",icon:"success",mask:!1};if(t=Object(o.extend)(t,e),e.image&&(t.image=Object(o.getRealRoute)(i.default.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),Object(r.beforeInvoke)("showToast",t,{duration:1,title:"",icon:""})){var n=g[i.default.currentWebviewId]||[];n.length>0&&(b=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete g[i.default.currentWebviewId]),b=_++,setTimeout((function(){b=!1}),t.duration),t.maskAll=!1,Object(r.invokeMethod)("showToast",t)}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&w&&(!b||b<w))return b=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");i.default.currentWebviewId;b=!1,Object(r.invokeMethod)("hideToast",e)},w=!1,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",icon:"loading",mask:!1,duration:1e8};if((t=Object(o.extend)(t,e)).icon="loading",delete t.image,Object(r.beforeInvoke)("showLoading",t,{duration:1,title:""})){var n=g[i.default.currentWebviewId]||[];n.length>0&&(b=!1,w=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete g[i.default.currentWebviewId]),w=_++,t.maskAll=!1,Object(r.invokeMethod)("showToast",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&b&&(!w||w<b))return w=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");i.default.currentWebviewId;w=!1,Object(r.invokeMethod)("hideToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};delete(t=Object(o.extend)(t,e)).cancelText,delete t.cancelColor,Object(r.beforeInvoke)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?Object(r.beforeInvokeFail)("showActionSheet",e,"parameter error: itemList should not be large than 6"):Object(r.invokeMethod)("showActionSheet",t,{beforeAll:function(e){(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&Object(a._setWxIsInvokeInTapForNavToMiniProgram)(),f=!0},afterAll:function(){f=!1}}))},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("showShareActionSheet",e)},C=function(){return f}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(174);var o=n(127),i=n(175);function a(e,t){return Object(r.default)(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||Object(o.default)(e,t)||Object(i.default)()}},function(e,t,n){n.r(t),n.d(t,"onPageReload",(function(){return s})),n.d(t,"triggerBeforeUnloadPage",(function(){return c})),n.d(t,"onBeforeUnloadPage",(function(){return u})),n.d(t,"triggerBeforeShareAppMessage",(function(){return l})),n.d(t,"onBeforeShareAppMessage",(function(){return d}));var r=n(33),o=n(0),i=n(6),a=new r.default;Object(o.onMethod)("onPageReload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.webviewId=t,a.emit("onPageReload",e)}));var s=function(e){a.on("onPageReload",(function(t){t.path&&(t.path=Object(i.removeHtmlSuffixFromUrl)(t.path)),"function"==typeof e&&e(t)}))},c=function(e){a.emit("onBeforeUnloadPage_"+e,e),a.removeAllListeners("onBeforeShareAppMessage_"+e)},u=function(e,t){a.once("onBeforeUnloadPage_"+e,(function(e){"function"==typeof t&&t(e)}))},l=function(e){a.emit("onBeforeShareAppMessage_"+e,e)},d=function(e,t){a.on("onBeforeShareAppMessage_"+e,(function(e){"function"==typeof t&&t(e)}))}},function(e,t,n){n.r(t),n.d(t,"skiaCanvasMappings",(function(){return y})),n.d(t,"canvasMap",(function(){return m})),n.d(t,"skiaCanvasInfo",(function(){return w})),n.d(t,"canvasRefMapById",(function(){return O})),n.d(t,"skiaCanvasInsert",(function(){return I})),n.d(t,"skiaCanvasRemove",(function(){return E})),n.d(t,"getSkiaCanvasById",(function(){return C})),n.d(t,"CanvasFontManager",(function(){return T})),n.d(t,"SkiaCanvas",(function(){return k}));var r=n(9),o=n(14),i=n(19),a=n(8),s=n(31),c=n(4),u=n(5),l=n(22),d=n(25),f=n(129),p=n(43),h=n(120);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(a.default)(e);if(t){var o=Object(a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(i.default)(this,n)}}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b={},y={},m=new WeakMap,w={},O={},S=Object(l.getEventManager)("skiaCanvasLoadFontFace");function I(e,t){var n=Object(d.concatId)(t,e.canvasNumber);y[n]={top:e.position.top,left:e.position.left,width:e.position.width,height:e.position.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},w[e.canvasNumber]={lastTouches:[],data:e.data,compPath:e.compPath};var r=b[n];"function"==typeof r&&(r.call(),delete b[n]),Object(p.onBeforeUnloadPage)(t,(function(){E(e,t)}))}function E(e,t){var n=Object(d.concatId)(t,e.canvasNumber);delete b[n],delete y[n],delete O[n],delete w[e.canvasNumber]}function C(e,t){var n=Object(d.concatId)(e,t),r=O[n];return r||null}var T=function(){function e(){Object(c.default)(this,e),this._fontAssets=[],this.loadFontFace(h.nativeFontAssets),this.subscribeFontLoadEvent()}return Object(u.default)(e,[{key:"loadFontFace",value:function(e){var t;(t=this._fontAssets).push.apply(t,Object(s.default)(e))}},{key:"subscribeFontLoadEvent",value:function(){var e=this;S.internalOnMethod((function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.nativeFontAssets,o=[],i=g(r);try{var a=function(){var n=t.value;e._fontAssets.find((function(e){return e.src===n.src||e.originalSrc===n.originalSrc}))||o.push(n)};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}o.length>0&&e.loadFontFace(o)}))}}],[{key:"initialize",value:function(e){this.fontManagerInstance||(this.fontManagerInstance=new e)}}]),e}();T.fontManagerInstance=null;var k=function(e){Object(o.default)(n,e);var t=v(n);function n(e,o,i,a){var s;return Object(c.default)(this,n),(s=t.call(this))._webviewId=e,s._canvasId=Object(d.concatId)(e,o),s._nodeId=a,s._nodeCanvasId=i,O[s._canvasId]=Object(r.default)(s),s}return Object(u.default)(n,[{key:"_init",value:function(){var e=y[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();t.width=300,t.height=150,m.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){m.get(e)||e._init(),t()};y[this._canvasId]?n():b[this._canvasId]=n}},{key:"getContext",value:function(e,t){if("2d"===e){var n=m.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=m.get(this);return e&&e.width},set:function(e){var t=m.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=m.get(this);return e&&e.height},set:function(e){var t=m.get(this);t&&(t.height=e)}},{key:"createImageData",value:function(){}},{key:"createPath2D",value:function(e){}},{key:"requestAnimationFrame",value:function(e){}},{key:"cancelAnimationFrame",value:function(){}},{key:"toDataURL",value:function(e,t){var n=m.get(this);return n?n.toDataURL(e,t):""}}]),n}(f.CanvasInterface)},function(e,t,n){n.r(t),n.d(t,"invokeWebviewMethod",(function(){return c})),n.d(t,"advancedInvokeWebviewMethod",(function(){return u}));var r=n(0),o=n(10),i=n(3),a=0,s=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=a++;s[c]=o,Object(r.publish)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[i.default.currentWebviewId]:n)};Object(r.subscribe)("callbackWebviewMethod",(function(e){var t=e.res,n=e.callbackId,r=s[n];delete s[n],r&&r(t)}));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(o.isObject)(t)||(t={}),t=Object.assign({},t);var i=Object(r.getSurroundedCallbacks)(t,e);c(e,t,void 0,(function(t){Object(r.callbackInvoke)(t,e,i,n)}))}},function(e,t,n){n.r(t),n.d(t,"htmlDecode",(function(){return s})),n.d(t,"getQueryString",(function(){return c})),n.d(t,"addUrlParam",(function(){return u})),n.d(t,"getFollowPageUrl",(function(){return l})),n.d(t,"isObject",(function(){return d})),n.d(t,"mergeDeep",(function(){return f})),n.d(t,"getTodayFormat",(function(){return p})),n.d(t,"convertTenThousand",(function(){return g})),n.d(t,"getAdDataViewId",(function(){return h})),n.d(t,"truncate",(function(){return v})),n.d(t,"pick",(function(){return _})),n.d(t,"get",(function(){return b})),n.d(t,"measureText",(function(){return y}));var r=n(16),o=n(20),i=n(0),a=n(18);n.d(t,"timeout",(function(){return a.timeout}));var s=function(e){return 0===(e=e||"").length?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g,"    ").replace(/&#039;|&#39;/g,"'").replace(/&#047;|&#47;/g,"/").replace(/&#092;|&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n")},c=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,r=e.substring(n);r.indexOf("#")>-1&&(r=r.substring(0,r.indexOf("#")));for(var o=r.split("&"),i=0;i<o.length;i++){var a=o[i].split("=");t[a[0]]=a[1]}}return t},u=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),r=n[0].indexOf("?")>-1?"&":"?",o="",i=Object.keys(t);if(i.length>0){for(var a=0;a<i.length;a++)o=o.concat(i[a]+"="+t[i[a]]+"&");return o.length>0&&(o=o.substring(0,o.length-1)),n[0]+r+o+(n[1]?"#"+n[1]:"")}return e},l=function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type};return u(t,n)},d=function(e){return e&&"object"===Object(o.default)(e)&&!Array.isArray(e)},f=function e(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(!o.length)return t;var a=o.shift();if(d(t)&&d(a))for(var s in a)d(a[s])?(t[s]||Object.assign(t,Object(r.default)({},s,{})),e(t[s],a[s])):Object.assign(t,Object(r.default)({},s,a[s]));return e.apply(void 0,[t].concat(o))},p=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},h=function(e){if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},v=function(e,t){for(var n=0,r=0,o=0;o<e.length;o++)(n+=/[\u4e00-\u9fa5]/.test(e[o])?2:1)<t-1&&(r=o);return n>t?e.substring(0,r+1)+"...":e},g=function(e){return e<1e4?e.toString():(e/1e4).toFixed(1)+"万"},_=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},b=function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var r=e,o=0;r&&o<t.length;)r=r[t[o]],o+=1;return r||n},y=function(e){var t=0,n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{Object(i.invokeMethod)("measureText",Object.assign({},n,{complete:function(e){t=e.width||0}}))}catch(e){}return t}},function(e,t,n){n.r(t),n.d(t,"getNetworkType",(function(){return u})),n.d(t,"onNetworkStatusChange",(function(){return l})),n.d(t,"offNetworkStatusChange",(function(){return d})),n.d(t,"_getCurrentNetworkType",(function(){return f}));var r=n(0),o=n(22),i=n(1),a=n(3),s="",c=Object(o.getEventManager)("networkstatusChange"),u=function(e){Object(r.invokeMethod)("getNetworkType",e)},l=c.onMethod,d=c.offMethod,f=function(){return s};Object(r.onMethod)("onNetworkStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=e.networkType,a.default.currentNetworkType=s,c.emit(e),Object(r.publish)("onNetworkStatusChange",e)})),i.default.onReady((function(){u({success:function(e){s=e.networkType,a.default.currentNetworkType=s}})}))},function(e,t,n){n.r(t),n.d(t,"NavigationBackTypes",(function(){return p})),n.d(t,"_setNavigateBackInterception",(function(){return y})),n.d(t,"_stopNavigateBackInterception",(function(){return w})),n.d(t,"_onNavigateBackIntercept",(function(){return O})),n.d(t,"_offNavigateBackIntercept",(function(){return S})),n.d(t,"setNavigateBackInterception",(function(){return I})),n.d(t,"stopNavigateBackInterception",(function(){return E}));var r=n(13),o=n.n(r),i=n(38),a=n(16),s=n(15),c=n(0),u=n(22);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(u.getEventManager)("navigateBackIntercept"),p={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},h=[p.SlideBack,p.BottomBackButton,p.NavigationBarBack,p.NavigateBackCall],v=[],g=0;Object(c.onMethod)("onNavigateBackIntercept",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v[v.length-1]||{},n=t.id;f.emit(d(d({},e),{},{id:n})),Object(c.publish)("onNavigateBackIntercept",d(d({},e),{},{id:n}))}));var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scopes,n=new Set(t||[]),r={scopes:h.map((function(e){return{type:e,interception:n.has(e)}}))};return Object(c.invokeMethodAsync)("setNavigateBackInterception",r)},b=function(){var e=Object(i.default)(o.a.mark((function e(){var t,n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(d({},n=i.length>0&&void 0!==i[0]?i[0]:{}),{},{scopes:null!==(t=n.scopes)&&void 0!==t?t:h}),e.next=4,_(n);case 4:return r=++g,v.push({id:r,options:n}),e.abrupt("return",{id:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=Object(s.async2Invoke)("setNavigateBackInterception",b),m=function(){var e=Object(i.default)(o.a.mark((function e(){var t,n,r,i,a=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:{},n=t.id,!((r=v.findIndex((function(e){return e.id===n})))<0)){e.next=4;break}return e.abrupt("return");case 4:if(r!==v.length-1){e.next=8;break}return i=v.length>1?v[v.length-2].options:{scope:[]},e.next=8,_(i);case 8:v.splice(r,1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(s.async2Invoke)("stopNavigateBackInterception",m),O=f.internalOnMethod,S=f.internalOffMethod,I=function(){var e=Object(i.default)(o.a.mark((function e(t){var n,r,i,a,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:h,e.next=3,b({scopes:n});case 3:return r=e.sent,i=r.id,O(a=function(e){e.id===i&&t(e)}),e.abrupt("return",{id:i,handler:a});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(i.default)(o.a.mark((function e(t){var n,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,r=n.id,i=n.handler,e.next=10,m({id:r});case 10:S(i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){n.r(t),n.d(t,"onAppRoute",(function(){return v})),n.d(t,"offAppRoute",(function(){return g}));var r=n(0),o=n(27),i=n(108),a=n(78),s=n(6),c=n(22),u=n(173),l=n(1),d=n(51),f=n(3),p=n(97),h=Object(c.getEventManager)("AppRoute"),v=h.internalOnMethod,g=h.internalOffMethod;Object(o.onNativeEvent)("onAppRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d.nativeConsole.log("received onAppRoute, res=",JSON.stringify(e)),p.webviewAnimation.appRoute=!0,p.webviewAnimation.appRouteDone=!1;var n=Object(u.handleRewriteRoute)(e,t);if(!n){if(e.path=Object(s.removeHtmlSuffixFromUrl)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(f.default.lastRoute=e.path||"",f.default.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),f.default.lastOpenType=e.openType,"appLaunch"!==e.openType&&"autoReLaunch"!==e.openType)for(var o in e.query)try{e.query[o]=decodeURIComponent(e.query[o])}catch(e){}if("dismissPip"!==e.openType&&(f.default.query=e.query,f.default.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){var c=e.preloadRule||l.default._preloadRule&&l.default._preloadRule[e.path],v=e.page||l.default._page&&l.default._page[e.path+".html"];if(c&&(l.default.updatePreloadRule(e.path,c),e.preloadRule,l.default.preloadRule),v){var g=l.default.global&&l.default.global.window||{};v.window=Object.assign({},g,v.window),l.default.updatePage(e.path,v),e.page,l.default.page}}Object(r.publish)("onAppRoute",e,[]),Object(i.checkNeedAppEnterForegroundPatch)()&&a.default.emitter.emit("onAppRoute"),h.emit(e)}}))},function(e,t,n){n.r(t);var r=new(n(33).default);t.default={emitter:r,puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}}},function(e,t,n){n.r(t),n.d(t,"nativeConsole",(function(){return c}));var r=n(0),o=__wxConfig.platform,i=[],a=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),a=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c=e.getFullYear()+"-"+t+"-"+n,u=r+":"+i+":"+a+"."+s;return"ios"===o?c+" "+u+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):c+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+u},s=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.map((function(e){switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");i.push({date:new Date,type:e,content:o})}};__wxConfig.onReady((function(){setTimeout((function e(){var t;(setTimeout(e,2e3),0!==i.length)&&(t=i.slice(),"ios"===o&&"function"==typeof systemLog?systemLog({dataArray:t.map((function(e){return"\n"+a(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}))}):"ios"===o||"windows"===o?Object(r.invokeMethod)("systemLog",{dataArray:t.map((function(e){return{message:"\n"+a(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}}))}):"android"===o&&Object(r.invokeMethod)("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+a(e.date)+"][weapplib] "+e.content}))).join("\n")}),i=[])}),2e3)}));var c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},function(e,t,n){n.r(t),n.d(t,"saveFile",(function(){return a})),n.d(t,"saveFileSync",(function(){return s})),n.d(t,"getSavedFileList",(function(){return c})),n.d(t,"getSavedFileInfo",(function(){return u})),n.d(t,"removeSavedFile",(function(){return l})),n.d(t,"getFileInfo",(function(){return d})),n.d(t,"readFile",(function(){return f})),n.d(t,"readFileSync",(function(){return p})),n.d(t,"writeFile",(function(){return h})),n.d(t,"writeFileSync",(function(){return v})),n.d(t,"mkdir",(function(){return g})),n.d(t,"mkdirSync",(function(){return _})),n.d(t,"rmdir",(function(){return b})),n.d(t,"rmdirSync",(function(){return y})),n.d(t,"readdir",(function(){return m})),n.d(t,"readdirSync",(function(){return w})),n.d(t,"access",(function(){return O})),n.d(t,"accessSync",(function(){return S})),n.d(t,"unlink",(function(){return I})),n.d(t,"unlinkSync",(function(){return E})),n.d(t,"stat",(function(){return C})),n.d(t,"statSync",(function(){return T})),n.d(t,"unzip",(function(){return k})),n.d(t,"copyFile",(function(){return A})),n.d(t,"copyFileSync",(function(){return P})),n.d(t,"rename",(function(){return D})),n.d(t,"renameSync",(function(){return j})),n.d(t,"appendFile",(function(){return x})),n.d(t,"appendFileSync",(function(){return R}));var r=n(93),o=n(111);n.d(t,"openDocument",(function(){return o.openDocument}));var i=r.default.app,a=i.saveFile,s=i.saveFileSync,c=i.getSavedFileList,u=i.getSavedFileInfo,l=i.removeSavedFile,d=i.getFileInfo,f=i.readFile,p=i.readFileSync,h=i.writeFile,v=i.writeFileSync,g=i.mkdir,_=i.mkdirSync,b=i.rmdir,y=i.rmdirSync,m=i.readdir,w=i.readdirSync,O=i.access,S=i.accessSync,I=i.unlink,E=i.unlinkSync,C=i.stat,T=i.statSync,k=i.unzip,A=i.copyFile,P=i.copyFileSync,D=i.rename,j=i.renameSync,x=i.appendFile,R=i.appendFileSync},function(e,t,n){n.r(t),n.d(t,"reportAdMonitorData",(function(){return I})),n.d(t,"reportMMData",(function(){return S}));var r=n(20),o=n(187),i=n(11),a=n(36),s=n(18),c=n(29),u=n(2),l=n(35),d=n(1),f=Object(s.promisify)(Object(a.constructOperateWXData)(!1,"advert_report")),p="",h=u.PLATFORM,v="",g="",_="",b="",y="",m="",w=!0,O="";d.default.onReady((function(){p=Object(l.getInitDeviceOrientation)()||"";var e=Object(c.getStableSystemInfo)();v=e.system,g=e.version,_=e.SDKVersion,y=e.model,m=e.brand,w=Object(i.isGame)();try{O=d.default.accountInfo.appId,b=__libVersionInfo__.updateTime}catch(e){}}));var S=function(e,t){var n=Object(o.getMMDataProto)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:O,appid:O,orig_weapp_id:"",network_type:"",wechat_version:g,platform:h,system_version:v,device_orientation:p,wxapp_lib_version:_,wxapp_lib_time:b,machine_type:y,ad_platform:w?1:0},t),t=Object.assign({DeviceModel:y,DeviceBrand:m,OsName:h,OsVersion:v},t),n=n.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}})),f({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((function(e){}))},I=function(e,t,n){!function(e){var t=e.key,n=e.id;"object"===Object(r.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),Reporter.reportIDKeyDirectly({id:n||924,key:t,force:!0})}({key:e}),function(e){var t=e.key,n=e.id,o=e.extInfo,i=e.reportData;if("object"===Object(r.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),i=i||{},o&&"string"!=typeof o)try{o=JSON.stringify(o)}catch(e){o=o.toString()}S(16295,{id_key:t,id_key_group:n||924,report_time:+new Date,ad_pos_type:i.ad_pos_type||0,source_url:i.source_url||"",expand_feild:i.reportAdData||"",expand_feild2:o,aid:i.aid||0,traceid:i.traceid||"",ad_unit_id:i.ad_unit_id})}({key:e,extInfo:t,reportData:n})}},function(e,t,n){n.r(t),n.d(t,"SET_COOKIES_INDEX",(function(){return h})),n.d(t,"GET_COOKIES_INDEX",(function(){return v})),n.d(t,"initCheckCookies",(function(){return w})),n.d(t,"getPassCookieString",(function(){return S})),n.d(t,"getPayCookieString",(function(){return I})),n.d(t,"getShareCookieString",(function(){return E})),n.d(t,"setCookiesWithoutPermission",(function(){return C})),n.d(t,"getCookiesWithoutPermission",(function(){return T})),n.d(t,"setCookies",(function(){return k})),n.d(t,"getCookies",(function(){return A}));var r=n(16),o=n(63),i=n(49),a=n(45),s=n(1),c=n(2),u=n(121),l=n(37),d=[],f=[],p=["expires","domain","path","busid","indate","receivetime","spread"],h=502,v=503,g={scene:-1,sceneNote:"",sessionId:""};function _(e){return c.IS_DEVTOOLS||Object(l.checkPermissionSync)(e)}function b(e){var t,n;t=function(t){t&&m(t,!1,d),e&&e()},n=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",Object(a.invokeWebviewMethod)("getCookiesFromGlobalStorage",{appId:n},void 0,t)}function y(){var e=Date.now(),t=[];d.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;if(r&&1e3*r>e){var o=[];for(var i in n)p.indexOf(i)>=0&&o.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));o.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value)),t.push(o.join("; "))}}));var n,r,o,i=t.join(";; ");i.length>=4096||(n=i,r=function(){},o=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",n&&n.trim()&&Object(a.invokeWebviewMethod)("setCookiesToGlobalStorage",{cookies:n,appId:o},void 0,r))}function m(e,t,n){if("string"==typeof e){var r=Date.now();e.split(";;").forEach((function(e){var o;if(e.split(";").forEach((function(e){o=o||{};var t=(e=e.split("="))[0].trim(),n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(p.indexOf(t)>=0?o[decodeURIComponent(t)]=decodeURIComponent(n):(o.name=decodeURIComponent(t),o.value=decodeURIComponent(n)))})),o){t&&(o.receivetime=~~(r/1e3)),void 0===o.expires&&void 0!==o.indate&&o.receivetime&&(o.__wxprivate_calc_expires__=+o.receivetime+ +o.indate);var i=o.expires||o.__wxprivate_calc_expires__;i&&!(1e3*i>r)||function(e,t){for(var n=0,r=t.length;n<r;n++){var o=t[n];if(e.busid===o.busid&&e.name===o.name)return!0}return!1}(o,n)||n.push(o),s.default.accountInfo&&s.default.accountInfo.appId&&o.spread&&(o.spread="*"===o.spread?"":o.spread+":",o.spread+=s.default.accountInfo.appId)}}))}}Object(u._onAppShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.scene=e.scene,g.sceneNote=e.scene_note,g.sessionId=e.sessionid}));var w=function(){Object(i.onAppRoute)((function(){var e=s.default.appLaunchInfo||{},t=+s.default.appLaunchInfo.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,o=n&&n.cookies||r&&r.cookies;"string"==typeof o&&m(o,1037!==t,d),b(y)})),Object(o.onAppEnterForeground)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=+e.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,r=e.referrerInfo&&e.referrerInfo.messageExtraData,o=n&&n.cookies||r&&r.cookies;(1037===t||o&&"string"==typeof o||1===e.reLaunch||!0===e.reLaunch)&&(d=[],f=[]),"string"==typeof o&&m(o,1037!==t,d),b(y)}))};function O(e){var t=[];for(var n in e)p.indexOf(n)>=0&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)),t.join("; ")}var S=function(e){var t=Date.now(),n=[];d.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!r||1e3*r>t)&&n.push(O(e))}));var r=n.join(";; ");return e&&e.success&&e.success({cookies:r}),r},I=function(e){var t=Date.now(),n=[];d.forEach((function(e){var r=e.expires||e.__wxprivate_calc_expires__;(!r||1e3*r>t)&&n.push(e)}));var r=s.default&&s.default.accountInfo&&s.default.accountInfo.appId||"",o=g.scene||"",i=g.sceneNote||"",a=g.sessionId||"";n.push({name:"appid",value:r,busid:"wxapp"},{name:"sessionid",value:a,busid:"wxapp"},{name:"scene",value:o,busid:"wxapp"},{name:"scene_note",value:i,busid:"wxapp"});var c=e&&e.pluginInfo?e.pluginInfo:{},u=c.hostAppId,l=c.pluginAppId;if(void 0!==u&&void 0!==l){var f=n.find((function(e){return"appid"===e.name}));f&&(f.value=u),n.push({name:"plugin_appid",value:l,busid:"wxapp"})}var p=s.default.host||{};"SDK"===p.env&&n.push({name:"sdk_host_appid",value:p.appId,busid:"wxapp"});var h=n.map(O).join(";; ");return e&&e.success&&e.success({cookies:h}),h},E=function(){var e=Date.now(),t=[];return f.forEach((function(n){var r=n.expires||n.__wxprivate_calc_expires__;(!r||1e3*r>e)&&t.push(O(n))})),t.join(";; ")},C=function(e){var t=Date.now(),n=e.cookies||[],r=e.isTemporary;if(n instanceof Array){var o=r?f:d,i=[],a={},c={},u=s.default.accountInfo&&s.default.accountInfo.appId||"";if(n.forEach((function(e){if(e.key&&"string"==typeof e.key){var n=+e.expires;if(!e.value||n&&1e3*n<t)a[e.key]={name:e.key,busid:e.busid};else{var o={name:e.key,value:e.value};p.forEach((function(t){var n=e[t];"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),"spread"===t&&n&&!r&&u&&(o.spread="*"===n?"":n+":",o.spread+=u),"receivetime"!==t&&"spread"!==t&&void 0!==n&&(o[t]=n)})),c[e.key]=o,i.push(o)}}})),o.forEach((function(e){var n=a[e.name];if(!n||(n.busid||e.busid)&&n.busid!==e.busid){var r=c[e.name];if(!r||(r.busid||e.busid)&&r.busid!==e.busid){var o=e.expires||e.__wxprivate_calc_expires__;o&&1e3*o<t||i.push(e)}}})),function(e){var t=[];return e.forEach((function(e){t.push(O(e))})),t.join(";; ")}(i).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";r?f=i:(d=i,y())}},T=function(e){var t=Date.now(),n=e.keys||[],o=e.busid,i=e.isTemporary;if(n instanceof Array){var a=[];return(i?f:d).forEach((function(e){var i=e.expires||e.__wxprivate_calc_expires__;if((!i||1e3*i>t)&&n.indexOf(e.name)>=0&&(!o||o&&o===e.busid)){var s=Object(r.default)({},e.name,e.value);Object.keys(e).forEach((function(t){p.indexOf(t)>=0&&(s[t]=e[t]),"indate"!==t&&"expires"!==t||(s[t]=+s[t])})),a.push(s)}})),a}},k=function(e){var t="setCookies:ok";if(_("setCookies")){var n=C(e);n?(t=n,"function"==typeof e.fail&&e.fail({errMsg:t})):"function"==typeof e.success&&e.success({errMsg:t})}else t="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})},A=function(e){var t="getCookies:ok";if(_("getCookies")){var n=T(e);"function"==typeof e.success&&e.success({errMsg:t,cookies:n})}else t="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})}},function(e,t,n){n.r(t),function(e){var n=e.WeixinArrayBuffer;delete e.WeixinArrayBuffer,t.default=n}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"error",(function(){return o})),n.d(t,"isSystemError",(function(){return i})),n.d(t,"isSDKError",(function(){return a})),n.d(t,"isThirdError",(function(){return s}));var r={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},o=Object.keys(r).reduce((function(e,t){var n=parseInt(t.replace(/\s/g,""),10);return e[r[t]]=n,e}),{}),i=function(e){return e.toString().endsWith(1)},a=function(e){return e.toString().endsWith(2)},s=function(e){return e.toString().endsWith(3)}},function(e,t,n){n.r(t),n.d(t,"onAppEnterBackground",(function(){return s}));var r=n(0),o=n(27),i=n(22),a=Object(i.getEventManager)("AppEnterBackground"),s=a.internalOnMethod;Object(o.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.emit(e),Object(r.publish)("onAppEnterBackground",e)}))},function(e,t,n){n.r(t),n.d(t,"GlobalEmitter",(function(){return i})),n.d(t,"FakeTempFilePathMap",(function(){return a}));var r=n(33),o=n(15),i=new r.default,a={map:{},set:function(e){var t=Object(o.guid)();return this.map[t]=e,t},get:function(e){var t=this;return e?this.map[e]:Object.keys(this.map).map((function(e){return t.map[e]}))}}},function(e,t,n){n.r(t),n.d(t,"_setWxIsInvokeInTapForNavToMiniProgram",(function(){return G})),n.d(t,"_navigateToMiniProgram",(function(){return W})),n.d(t,"_checkBeforeNavigateToMiniProgram",(function(){return F})),n.d(t,"_doNavigateToMiniProgram",(function(){return T})),n.d(t,"navigateToMiniProgram",(function(){return H})),n.d(t,"navigateToMiniProgramDirectly",(function(){return z}));var r=n(16),o=n(13),i=n.n(o),a=n(38),s=n(24),c=n(6),u=n(54),l=n(57),d=n(91),f=n(1),p=n(36),h=n(11),v=n(2),g=n(37),_=n(51),b=n(82),y=n(48),m=n(15),w=n(104),O=n(47);function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E,C=Object(m.invoke2Async)(p._operateWXData),T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JSON.stringify(e),JSON.stringify(t),JSON.stringify(n),_.nativeConsole.log("[_doNavigateToMiniProgram], args="+JSON.stringify(e)+", privateArgs="+JSON.stringify(t)+", ext="+JSON.stringify(n));var r=Object.assign({},e);delete r.sourcetype,delete r.preScene,delete r.preSceneNote,7!==f.default.appType&&(delete r.scene,delete r.sceneNote);var o,i=Object(u.getPassCookieString)();if(i?(r.privateExtraData=r.privateExtraData||{},r.privateExtraData.cookies=i):r.privateExtraData&&delete r.privateExtraData.cookies,o="string"==typeof r.path&&r.path.trim().length>0?Object.assign({},r,t,{path:Object(c.transWxmlToHtml)(r.path).trim()}):Object.assign({},r,t,{path:void 0}),JSON.stringify(o),_.nativeConsole.log("[_doNavigateToMiniProgram], finalArgs="+JSON.stringify(o)),o.needTransferToWeChat&&Object(h.isIn3rdApp)())return Object(s.beforeInvokeCallback)({name:"navigateToMiniProgram",args:o}),delete o.success,delete o.fail,delete o.complete,void Object(s.invokeMethod)("sdk_navigateToMiniProgram",o,n);Object(s.invokeMethod)("navigateToMiniProgram",o,n)},k=function(e,t,n,r){var o=[e,t,f.default.appType+1e3,n+1e3,r].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:o})},A=function(){return E||(E=new Promise((function(e){__sclEngine__.initScl((function(t){return e(t.mainRoot)}))}))),E},P=function(){var e=Object(a.default)(i.a.mark((function e(t){var n,r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:n=e.sent,e.t0=j,e.next=e.t0===D.HALF_SCREEN_DIALOG_WITHOUT_LOGO?6:e.t0===D.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?8:e.t0===D.HALF_SCREEN_DIALOG_WITH_SCORE?11:14;break;case 6:return r=n.append("navigateToMp",{title:t.oldWording,logo:"",name:"",type:D.HALF_SCREEN_DIALOG}),e.abrupt("break",16);case 8:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:D.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.used_friend_cnt_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 11:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:D.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.score_sub_desc;r.setData({desc:t||""})})),e.abrupt("break",16);case 14:return r=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:j}),e.abrupt("break",16);case 16:return o=Object(y.setNavigateBackInterception)((function(e){[y.NavigationBackTypes.BottomBackButton,y.NavigationBackTypes.NavigationBackInterceptionType,y.NavigationBackTypes.NavigateBackCall].includes(e.type)&&r.handleCancel()})),e.next=19,new Promise((function(e){r.addListener("confirm",(function(){e({confirm:!0})})),r.addListener("cancel",(function(){e({confirm:!1})}))}));case 19:return a=e.sent,Object(y.stopNavigateBackInterception)(o),e.abrupt("return",a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5},j=D.DEFAULT;f.default.onReady((function(){Object(b._getABTestConfig)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:function(e){JSON.stringify(e),e&&void 0!==e.testConfig&&(j=Number(e.testConfig)||D.DEFAULT,Object.values(D).includes(j)||(j=D.DEFAULT))}})}));var x,R=function(e,t,n,r,o,i){if(1===t)return Promise.resolve();var a=j!==D.DEFAULT&&"undefined"!=typeof __sclEngine__&&(v.IS_DEVTOOLS||v.IS_IOS||v.IS_ANDROID)&&o,c=a?j:D.DEFAULT;return Promise.resolve().then((function(){return a?P(I(I({},o),{},{oldWording:e,expensiveWording:i})):new Promise((function(t,n){Object(s.invokeMethod)("showModal",{title:"",content:e,confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA",success:function(e){t(e)},fail:function(e){n(e)}})}))})).then((function(e){if(!e.confirm)throw k(2,n,r,c),{errMsg:"cancel"};k(1,n,r,c)}),(function(e){throw k(3,n,r,c),e}))},M=1,N=2,L=function(){var e=Object(a.default)(i.a.mark((function e(t){var n,r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=j,e.next=e.t0===D.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?4:e.t0===D.HALF_SCREEN_DIALOG_WITH_SCORE?6:8;break;case 4:return n.push(N),e.abrupt("break",9);case 6:return n.push(M),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:if(n.length){e.next=11;break}return e.abrupt("return",{});case 11:return t.appId,_.nativeConsole.log("[_getNavigateWxAppDescInfo] appId="+t.appId),e.prev=13,e.next=16,C({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:t.appId,desc_type_list:n}});case 16:return r=e.sent,(o=r.respData).data,a=JSON.parse(o.data),e.abrupt("return",a);case 23:return e.prev=23,e.t1=e.catch(13),e.t1.message,e.abrupt("return",{});case 27:case"end":return e.stop()}}),e,null,[[13,23]])})));return function(t){return e.apply(this,arguments)}}(),B=(x=[],f.default.onReady((function(){Array.isArray(f.default.navigateToMiniProgramAppIdList)&&(x=f.default.navigateToMiniProgramAppIdList,Object(g.checkPermissionSync)("openWxappLimit5")&&x.splice(5))})),function(e,t){return new Promise((function(n,r){var o=Object(h.checkAPIAvailable)("navigateToMiniProgramConfig");!1===o||v.IS_DEVTOOLS?t?n():x.indexOf(e)>-1?n({sourcetype:4}):r({errMsg:'appId "'+e+'" is not in navigateToMiniProgramAppIdList'}):!0===o?n():"unknown"===o&&n({sourcetype:4})}))}),F=function(e){e.appId,_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram] appId="+e.appId);var t="_checkBeforeNavigateToMiniProgram",n=function(e){return new Promise((function(t,n){e.appId,_.nativeConsole.log("[_getNavigateWxAppInfo] appId="+e.appId),Object(p._operateWXData)({apiName:"webapi_getnavigatewxaappinfo",reqData:{target_appid:e.appId},success:function(e){var n=JSON.parse(e.respData.data),r=n.action_code,o=n.skip_local_check,i=Boolean(n.runtime_sdk_whitelist);t({actionCode:r,skipLocalCheck:o,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:i}),e.respData.data},fail:function(e){n(e),e.errMsg}})}))}(e),r=L(e);return j!==D.DEFAULT&&A(),new Promise((function(o,i){n.then((function(n){var a=n.actionCode,c=n.skipLocalCheck,u=n.reason,l=n.wording,d=n.appType,p=n.newWording,h=n.popupInfo,v=n.needTransferToWeChat;_.nativeConsole.log("[_getNavigateWxAppInfo][resolve] actionCode="+a+", skipLocalCheck="+c+", reason="+u+", wording="+l),1!==a&&2!==a?(h?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,0,1,u,"跳转跳出",Object(O._getCurrentNetworkType)()].join(",")}),Object(s.invokeMethod)("showModal",{showCancel:!0,content:h.desc,confirmText:h.confirm_wording,cancelText:h.cancel_wording,success:function(e){var t=e.confirm,n=h.confirm_url;t&&Object(w.privateOpenUrl)({url:n}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,t?1:2,2,u,"跳转跳出",Object(O._getCurrentNetworkType)()].join(",")})}})):l&&Object(s.invokeMethod)("showModal",{content:l,showCancel:!1}),Object(s.beforeInvokeFail)(t,e,u),i({errMsg:u})):B(e.appId,c).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return R(l,a,e.appId,d,p,r).then((function(){Object(s.beforeInvokeCallback)({name:t,args:e,res:{sourcetype:n.sourcetype}}),o(I(I({},n),{},{needTransferToWeChat:v}))}))})).catch((function(n){var r=n.errMsg||n.message;Object(s.beforeInvokeFail)(t,e,r),i(n)}))}),(function(n){Object(s.beforeInvokeCallback)({name:t,args:e}),o(),n.errMsg}))}))},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.beforeInvoke)("navigateToMiniProgram",e,{appId:""})&&(e.appId,_.nativeConsole.log("[_navigateToMiniProgram] appId="+e.appId),F({appId:e.appId}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};JSON.stringify(t),_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][resolve], res="+JSON.stringify(t)),T(e,{sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(function(t){var n=t.errMsg||t.message;_.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][reject], errMsg="+n),Object(s.beforeInvokeFail)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})})))},U=!1,V=0;Object(s.subscribe)("tapAnyWhere",(function(e){V=e.timeStamp,U=!0})),Object(l.onAppEnterBackground)((function(){V=0,U=!1}));var G=function(){V=Date.now(),U=!0},H=function(e){var t=f.default.accountInfo.appId;0===f.default.appType&&"wx308bd2aeb83d3345"!==t&&"wxc98889eca359c1e5"!==t?U?(W(e),Object(d.reportRecycledAPI)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===V?-2:Date.now()-V})):Object(s.beforeInvokeFail)("navigateToMiniProgram",e,"can only be invoked by user TAP gesture."):W(e)},z=function(e){Object(g.checkPermissionSync)("navigateToMiniProgramDirectly")?T(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}}):Object(s.beforeInvokeFail)("navigateToMiniProgramDirectly",e,"no permission")}},function(e,t,n){n.r(t),n.d(t,"getCloudFileUrl",(function(){return s})),n.d(t,"getCloudFileInfo",(function(){return u}));var r,o,i=n(32),a=(r="getCloudFileUrl",o="qbase_commapi",Object(i.default)(r,o,{},{},(function(e){var t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:+new Date+"_"+Math.random()}}),(function(e){return e})));var s=function(e,t,n){u({fileIds:e,type:t,success:n})},c=new Map,u=function(e){var t=e.fileIds,n=e.type,r=e.success,o=new Map,i=[],s=!1;if(t.forEach((function(e){var t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(o.has(e)||(o.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&i.push(e)})),0!==i.length){var u=0,d=function(e,t){for(var n=[],r=Math.ceil(e.length/t),o=0;o<r;o++)n.push(e.slice(o*t,(o+1)*t));return n}(t,50);Promise.all(d.map((function(e){return new Promise((function(t){a({data:{fileid_list:e,type:n},requestInQueue:!1,success:function(n){var r=JSON.parse(n.rawData);if(r.baseresponse&&0===r.baseresponse.errcode?r.download_list.forEach((function(e){o.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):r.baseresponse?e.forEach((function(e){o.set(e,{download_url:e,service_errcode:r.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+r.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((function(e){o.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),r.baseresponse&&r.baseresponse.stat&&r.baseresponse.stat.qbase_cost_time){var i=r.baseresponse.stat.qbase_cost_time;i>u&&(u=i)}t()},fail:function(){t()},complete:function(e){}})}))}))).then((function(){l(t,o,u,r)})).catch((function(e){"function"==typeof r&&r({data:t.map((function(t){return{url:t,service_errcode:-1,errmsg:e+""}}))})}))}else s?l(t,o,0,r):"function"==typeof r&&r({data:t.map((function(e){return{url:e}}))})};function l(e,t,n,r){var o=[];e.forEach((function(e){if(/^(cloud):\/\//.test(e)){var n=t.get(e);n?0===n.service_errcode?o.push({url:n.download_url}):o.push({url:e,code:n.service_errcode,msg:n.errmsg}):o.push({url:e,code:-1,msg:"NO_RESULT"})}else o.push({url:e})})),"function"==typeof r&&r({data:o,cost:n})}},function(e,t,n){n.r(t),n.d(t,"Emitter",(function(){return a}));var r=n(4),o=n(5),i=n(10),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.default)(this,e),this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=t,this.surround=n}return Object(o.default)(e,[{key:"on",value:function(e,t){if(Object(i.isFunction)(t)){var n,r,o=t;this.surround&&(n=t,r="at "+this.type+e+" callback function",o=void 0!==__errorTracer__?__errorTracer__.surroundThirdByTryCatch(n,r):void 0!==__subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(n,r):function(){try{return n.apply(void 0,arguments)}catch(e){return void console.error("thirdScriptError\n"+e.message+";"+r+"\n",e)}},this.callbackMap.set(t,o),this.originalCallbackMap.set(o,t)),this.eventMap.has(e)?this.eventMap.get(e).add(o):this.eventMap.set(e,new Set([o]))}else console.error("emitter.on fail: callback must be a function")}},{key:"off",value:function(e,t){var n=this,r=this.eventMap.get(e);if(r)if("function"!=typeof t)r.forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),r.clear();else if(this.surround){var o=this.callbackMap.get(t);r.delete(o),this.callbackMap.delete(t),this.originalCallbackMap.delete(o)}else r.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.eventMap.has(e)){var o=new Set(this.eventMap.get(e));o.forEach((function(e){return e.apply(void 0,n)}))}}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"getListenersLength",value:function(e){var t=this.eventMap.get(e);return t?t.size:0}}]),e}()},function(e,t,n){n.r(t),n.d(t,"PREFIX",(function(){return r})),n.d(t,"PAGE_TYPE",(function(){return o})),n.d(t,"VALID_SCENE",(function(){return i}));var r="__wx__/functional-page",o={PLAY_PAGE_IMAGE:"play_page_image",PLAY_PAGE_VIDEO:"play_page_video"},i=[1154,1007,1008,1074,1088,1044,1045,1046,1010,1096]},function(e,t,n){n.r(t),n.d(t,"onAppEnterForeground",(function(){return h}));var r=n(0),o=n(78),i=n(108),a=n(80),s=n(79),c=n(22),u=n(27),l=n(11),d=n(3),f=n(1);f.default.onReady((function(){d.default.scene=f.default.appLaunchInfo.scene}));var p=Object(c.getEventManager)("AppEnterForeground"),h=p.internalOnMethod;function v(e){if(!Object(l.isGame)()){e=Object(a.filterInfo)(e,!1),Object(s.setInnerEnterOptions)(e);var t=Object(a.filterPublicInfo)(e);e.__public=Object(a.isolateInfo)(t,""),Object(s.setEnterOptions)(t),p.emit(e),d.default.scene=e.scene}}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!Object(i.checkNeedAppEnterForegroundPatch)()||1!==e.reLaunch&&!0!==e.reLaunch?v(e):o.default.emitter.once("onAppRoute",(function(){v(e)})),Object(r.publish)("onAppEnterForeground",e)}))},function(e,t,n){n.r(t),n.d(t,"downloadFile",(function(){return M})),n.d(t,"_downloadFileSkipCheckDomain",(function(){return R}));var r=n(0),o=n(26),i=n(2),a=n(1),s=n(82),c=n(37),u=n(4),l=n(14),d=n(19),f=n(8),p=n(86);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(f.default)(e);if(t){var o=Object(f.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(d.default)(this,n)}}Object(p.registerTaskType)("Download",{maxTaskCount:10,functionName:"downloadFile"}),a.default.onReady((function(){try{"number"==typeof a.default.wxAppInfo.maxDownloadConcurrent&&Object(p.registerTaskType)("Download",{maxTaskCount:a.default.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));var v=function(e){Object(l.default)(n,e);var t=h(n);function n(e){return Object(u.default)(this,n),t.call(this,e,{taskType:"Download",beforeSend:function(t){return t.filePath=e.filePath,t},beforeSuccess:function(e){return delete e.timeInterval,e}})}return n}(p.NetworkTask),g=n(5),_=n(33),b=n(11),y=n(178),m=o.default.Download,w=new WeakMap,O=new WeakMap,S=new WeakMap,I=[],E=0,C=10;function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(e&&(w.delete(e),O.delete(e),S.delete(e),E--);I.length>0&&E<C;){var t=I.shift(),n=w.get(t),r=O.get(t);n&&r&&(n.start(r),E++)}}a.default.onReady((function(){a.default.wxAppInfo&&a.default.wxAppInfo.maxDownloadConcurrent&&(C=a.default.wxAppInfo.maxDownloadConcurrent)}));var k=function(){function e(t){var n=this;Object(u.default)(this,e);var o=new m,i=new _.default;w.set(this,o),S.set(this,i),O.set(this,Object(b.filterObject)(t,["url","header","filePath","enableProfile"])),o.onfail=function(e){Object(r.beforeInvokeFail)("downloadFile",t,e),T(!0)},o.onsuccess=function(e){Object(r.beforeInvokeCallback)({name:"downloadFile",args:t,res:e}),T(!0)},o.onheader=function(e){return i.emit("header",{header:e})},o.onprogress=function(e,t,n){return i.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:n})},Object(y.checkNetworkAPIURL)({api:"downloadFile",url:t.url}).then((function(e){t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost?(I.push(n),T()):Object(r.beforeInvokeFail)("downloadFile",t,"invalid url")})).catch((function(){Object(r.beforeInvokeFail)("downloadFile",t,"url validate error")}))}return Object(g.default)(e,[{key:"abort",value:function(){var e=w.get(this);e&&e.abort()}},{key:"onHeadersReceived",value:function(e){var t=S.get(this);t&&t.on("header",e)}},{key:"onProgressUpdate",value:function(e){var t=S.get(this);t&&t.on("progress",e)}},{key:"offHeadersReceived",value:function(e){var t=S.get(this);t&&t.off("header",e)}},{key:"offProgressUpdate",value:function(e){var t=S.get(this);t&&t.off("progress",e)}}]),e}(),A=!1;function P(e){return A?new k(e):new v(e)}o.default.Download&&a.default.onReady((function(){var e=!1,t=i.IS_IOS?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";Object(s._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=Object(c.checkPermissionSync)("bindingDownload");A=e||n}));var D=n(93),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{var n=new P(t);return n}catch(e){return void Object(r.beforeInvokeFail)("downloadFile",t,e.message)}}}},x=j(),R=j({__skipDomainCheck__:!0}),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.filePath||!e.filePath.startsWith(Object(D.getOpenDataDir)()))return x(e);Object(r.beforeInvokeFail)("downloadFile",e,"permission denied")}},function(e,t,n){n.r(t),function(e){n.d(t,"SkiaImageProxy",(function(){return s})),n.d(t,"decorateContextForImageProxy",(function(){return d}));var r=n(4),o=n(5),i=n(87),a=n(2),s=function(){function e(t){Object(r.default)(this,e),Object.defineProperty(this,"_ptr",{value:t,writable:!1,configurable:!1,enumerable:!1})}return Object(o.default)(e,[{key:"src",get:function(){return this._ptr.src},set:function(e){var t=this;/^(http|https):\/\//.test(e)&&(e=encodeURI(e));var n=function(e){return function(){setTimeout((function(){e()}),0)}};this._ptr.onload=n((function(){"function"==typeof t.__onload&&t.__onload.apply(t)})),this._ptr.onerror=n((function(){"function"==typeof t.__onerror&&t.__onerror.apply(t)})),this._ptr.src=e}},{key:"referrerPolicy",get:function(){return this._ptr.referrerPolicy},set:function(e){"string"==typeof e&&(this._ptr.referrerPolicy=e)}},{key:"onload",get:function(){return this._ptr.onload},set:function(e){Object.defineProperty(this,"__onload",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"onerror",get:function(){return this.__onload},set:function(e){Object.defineProperty(this,"__onerror",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"complete",get:function(){return this._ptr.complete}},{key:"width",get:function(){return this._ptr.width}},{key:"height",get:function(){return this._ptr.height}}]),e}(),c=new WeakMap,u=e.SkiaCanvasExternalTexture;function l(e,t){return a.IS_DEVTOOLS?Object(i.getVideoElementByContext)(e):new u(t,e._videoId,"video")}function d(e,t){if(!e)return e;var n=e.drawImage.bind(e),r=e.createPattern.bind(e);return e.drawImage=function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(e instanceof s)return n.apply(void 0,[e._ptr].concat(o));if(e instanceof i.VideoContext){var u=e,d=u._videoId;if("number"!=typeof d)throw new Error("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided video context is invalid, make sure that comes from 'createSelectQuery.context'.");var f=c.get(u)||{};f[t]?e=f[t]:(e=l(u,t),f[t]=e,c.set(u,f))}return n.apply(void 0,[e].concat(o))},e.createPattern=function(e,t){return r(e instanceof s?e._ptr:e,t)},e}delete e.SkiaCanvasExternalTexture}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"reportDeprecatedAPI",(function(){return r}));var r=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},function(e,t,n){n.r(t),n.d(t,"render",(function(){return Y})),n.d(t,"updateRender",(function(){return K})),n.d(t,"unmount",(function(){return J})),n.d(t,"emitComponentProperty",(function(){return X})),n.d(t,"percentProperties",(function(){return ye})),n.d(t,"convertStyle",(function(){return Te})),n.d(t,"mergeStyles",(function(){return ke})),n.d(t,"convertComputableStyle",(function(){return Pe})),n.d(t,"calculateDynamicStyle",(function(){return ve})),n.d(t,"VideoEventType",(function(){return y})),n.d(t,"Component",(function(){return b})),n.d(t,"innerUsage",(function(){return m})),n.d(t,"Layout",(function(){return De}));var r=n(34),o=n(16),i=n(31),a=n(133),s=n(77),c=n.n(s),u=n(18),l=n(13),d=n.n(l),f=n(4),p=n(5);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_=function(e){for(var t=Array.isArray(e)?e[0]:e;t.parent&&t.parent!==De&&t.parent.referComponent;)t=t.parent;return t},b=function(){function e(t){Object(f.default)(this,e),this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._elementMap={},this.parent=null,this.props=t}return Object(p.default)(e,[{key:"setState",value:function(e,t){var n=this;this._stateQueue=this._stateQueue||{};for(var r=!1,o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];e[a]!==this.state[a]&&(r=!0)}r?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout((function(){return g(n,void 0,void 0,d.a.mark((function e(){var n,r,o,i,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this._setStateTimer=null,n=!1,r=0,o=Object.keys(this._stateQueue);r<o.length;r++)i=o[r],a=this._stateQueue[i],this.state[i]!==a&&(n=!0);if(n){e.next=5;break}return e.abrupt("return");case 5:return X(this,"updateState",Object.assign(Object.assign({},this.state),this._stateQueue)),Object.assign(this.state,this._stateQueue),K(this),ve(_(this._rootElement)),e.next=11,De.nextLayout();case 11:null==t||t(this.state,this.props);case 12:case"end":return e.stop()}}),e,this)})))}),0)):null==t||t(this.state,this.props)}},{key:"ready",value:function(e){}},{key:"updatedProps",value:function(){}},{key:"render",value:function(){return""}},{key:"_unmountComponent",value:function(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents)){var e,t=h(this._subComponents);try{for(t.s();!(e=t.n()).done;){e.value._unmountComponent()}}catch(e){t.e(e)}finally{t.f()}}X(this,"destroy")}}},{key:"getRootElement",value:function(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}},{key:"getRootElements",value:function(){return this._rootElement}},{key:"getRootComponent",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getSubComponents",value:function(){return this._subComponents}},{key:"getElementById",value:function(e){return this._elementMap[e]?this._elementMap[e]:null}},{key:"getEventHandler",value:function(e){return this._eventHandler[e]}},{key:"setStyle",value:function(e,t){return g(this,void 0,void 0,d.a.mark((function n(){var r,o,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=this.getElementById(e),o=this._manualStyle,e&&t&&(r&&Object.assign(r.style,t),o[e]=o[e]||{},Object.assign(o[e],t)),n.next=5,Promise.resolve();case 5:return i=this.getRootComponent(),n.next=8,i.requestLayout();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"requestLayout",value:function(){var e=this,t=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((function(n){e._setStyleTimer&&clearTimeout(e._setStyleTimer),e._setStyleTimer=setTimeout((function(){e._setStyleTimer=null,ve(_(e._rootElement)),Promise.race([null==t?void 0:t.nextUpdate(),Object(u.timeout)(200)].filter((function(e){return e}))).then((function(){return n()}))}),0)}))}},{key:"_bindEvent",value:function(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}},{key:"_unbindEvent",value:function(e,t,n){var r,o;return!!(null===(o=null===(r=this._eventHandler[e])||void 0===r?void 0:r[t])||void 0===o?void 0:o.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}},{key:"onClick",value:function(e,t){return this._bindEvent(e,"click",t)}},{key:"offClick",value:function(e,t){return this._unbindEvent(e,"click",t)}},{key:"onReady",value:function(e,t){return this._bindEvent(e,"ready",t)}},{key:"offReady",value:function(e,t){return this._unbindEvent(e,"ready",t)}},{key:"onTouchstart",value:function(e,t){return this._bindEvent(e,"touchstart",t)}},{key:"offTouchstart",value:function(e,t){return this._unbindEvent(e,"touchstart",t)}},{key:"onTouchmove",value:function(e,t){return this._bindEvent(e,"touchmove",t)}},{key:"offTouchmove",value:function(e,t){return this._unbindEvent(e,"touchmove",t)}},{key:"onTouchend",value:function(e,t){return this._bindEvent(e,"touchend",t)}},{key:"offTouchend",value:function(e,t){return this._unbindEvent(e,"touchend",t)}},{key:"onTouchcancel",value:function(e,t){return this._bindEvent(e,"touchcancel",t)}},{key:"offTouchcancel",value:function(e,t){return this._unbindEvent(e,"touchcancel",t)}},{key:"onWaiting",value:function(e,t){return this._bindEvent(e,"waiting",t)}},{key:"offWaiting",value:function(e,t){return this._unbindEvent(e,"waiting",t)}},{key:"onPlay",value:function(e,t){return this._bindEvent(e,"play",t)}},{key:"offPlay",value:function(e,t){return this._unbindEvent(e,"play",t)}},{key:"onPause",value:function(e,t){return this._bindEvent(e,"pause",t)}},{key:"offPause",value:function(e,t){return this._unbindEvent(e,"pause",t)}},{key:"onEnded",value:function(e,t){return this._bindEvent(e,"ended",t)}},{key:"offEnded",value:function(e,t){return this._unbindEvent(e,"ended",t)}},{key:"onTimeUpdate",value:function(e,t){return this._bindEvent(e,"timeUpdate",t)}},{key:"offTimeUpdate",value:function(e,t){return this._unbindEvent(e,"timeUpdate",t)}},{key:"onError",value:function(e,t){return this._bindEvent(e,"error",t)}},{key:"offError",value:function(e,t){return this._unbindEvent(e,"error",t)}},{key:"onProgress",value:function(e,t){return this._bindEvent(e,"progress",t)}},{key:"offProgress",value:function(e,t){return this._unbindEvent(e,"progress",t)}},{key:"onFullScreenChange",value:function(e,t){return this._bindEvent(e,"fullScreenChange",t)}},{key:"offFullScreenChange",value:function(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}]),e}();b.isComponent=!0,b.subComponents={};var y,m=function(e){return e},w=n(167);!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(y||(y={}));var O=n(14),S=n(19),I=n(8);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(I.default)(e);if(t){var o=Object(I.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(S.default)(this,n)}}var C=function(e){Object(O.default)(n,e);var t=E(n);function n(){return Object(f.default)(this,n),t.apply(this,arguments)}return Object(p.default)(n,[{key:"render",value:function(){return this.props.children}}]),n}(b);function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}C.isFragment=!0;var A="Fragment",P={view:r.View,text:r.Text,image:r.Image,video:r.Video},D=function(e){return e.name[0]>="A"&&e.name[0]<="Z"},j=new WeakMap,x=function(e,t){var n=t.referComponent,r={children:t.children},o="getSubComponentProps",s=[];if(e.getProps){var c=e.getProps.split(":"),u=Object(a.default)(c);o=u[0],s=u.slice(1)}Object.assign(r,X.apply(void 0,[n,o,t.name].concat(Object(i.default)(s)))||{});for(var l=0,d=Object.keys(e);l<d.length;l++){var f=d[l],p=e[f];["getProps","children"].includes(f)||(r[f]=p)}return r.children=t.children,r},R=function(e,t,n){if(!n.isComponent)throw new Error("class "+e.name+" is not a component, please ensure extend BaseComponent");return Y(n,x(t,e),!1,e.referComponent)},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N(e),n=e.referComponent,r=t.id,o=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),i=Object.assign({},t);r&&(i.name=r),delete i.id,i.style=ke({classList:o,name:r,referComponent:n});var a=null!=i.bubbleEvent,s=P[e.name],c=new s(i);if(c.isBubbleEventSet=a,Object.assign(c,{classList:o,referComponent:n,key:t.key||null}),r&&n&&n.getEventHandler(r))for(var u=0,l=Object.keys(n.getEventHandler(r));u<l.length;u++){var d=l[u],f=n.getEventHandler(r)[d];if(d in y){if("video"===e.name){var p,h=T(f);try{for(h.s();!(p=h.n()).done;){var v=p.value,g="on"+d[0].toUpperCase()+d.slice(1),_=c[g];null==_||_.call(c,v)}}catch(e){h.e(e)}finally{h.f()}}}else{var b,w=T(f);try{for(w.s();!(b=w.n()).done;){var O=b.value;c.on(d,O)}}catch(e){w.e(e)}finally{w.f()}}}return null!=r&&(m(n)._elementMap[r]=c),c},N=function(e){for(var t={},n=0,r=Object.keys(e.attributes);n<r.length;n++){var o=r[n],i=e.attributes[o],a=Object(u.splitLineToCamelCase)(o);t[a]=i,/\{\{.+\}\}/.test(i)||("true"===i?t[a]=!0:"false"===i?t[a]=!1:"id"===a?t.id=Object(u.splitLineToCamelCase)(i):t[a]=i)}return t},L=function(e){var t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return Object.assign(Object.assign({},n),Object(o.default)({},A,C))},B=function e(t){if(Array.isArray(t)){var n,r={element:null,subComponents:[]},o=T(t.map((function(t){return e(t)})));try{for(o.s();!(n=o.n()).done;){var a,s=n.value,c=s.element,u=s.subComponents;if(c)if(null===r.element&&(r.element=[]),Array.isArray(c))(a=r.element).push.apply(a,Object(i.default)(Object(w.flatten)(c)));else r.element.push(c);var l,d=T(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;r.subComponents.includes(f)||r.subComponents.push(f)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){o.e(e)}finally{o.f()}return r}if(!t)return{element:null,subComponents:[]};var p,h=L(t.referComponent),v=[],g=N(t);if(D(t)){if(!h[t.name])throw new Error("component name "+t.name+" does not exists");var _=R(t,g,h[t.name]);if(!(p=_.getRootElements()))return{element:null,subComponents:[]};v.push(_)}else{var b=M(t,g);t.children.forEach((function(t){var n=e(t),r=n.element,o=n.subComponents;if(r)if(v.push.apply(v,Object(i.default)(o)),Array.isArray(r)){var a,s=T(r);try{for(s.s();!(a=s.n()).done;){var c=a.value;b.add(c)}}catch(e){s.e(e)}finally{s.f()}}else b.add(r)})),p=b}return{element:p,subComponents:v}},F=function(e,t){for(var n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"],r=!1,o=0,i=n;o<i.length;o++){var a=i[o];void 0===t[a]&&(t[a]=void 0)}for(var s=0,c=Object.keys(t);s<c.length;s++){var u=c[s],l=t[u];n.includes(u)&&e[u]!==l&&(e[u]=l,r=!0)}return r},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=n;if(e!==t){if(!r){if(!e||!e.parent)throw new Error("can not find element tree without parent");r=e.parent}if(e&&r.remove(e),t)if(Array.isArray(t)){var o,i=T(t);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.add(a)}}catch(e){i.e(e)}finally{i.f()}}else r.add(t)}},U=function(e,t){return P[t.name]&&e?e.constructor===P[t.name]:!(!(null==e?void 0:e.isRootElementOfComponent)||!e.referComponent)&&e.referComponent.constructor.name===t.name},V=function(e,t){var n=N(t),r=t.referComponent,o=L(r),a=e&&U(e,t);if(!D(t)){var s;if(!t.children||0===t.children.length)return e&&a?(F(e,n),e):M(t,n);if(e&&a)return F(e,n),H(function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))}(e),t.children),e;var c=B(t),u=c.element,l=c.subComponents;return(s=r.getSubComponents()).push.apply(s,Object(i.default)(l)),u}var d=null==e?void 0:e.referComponent,f=null==d?void 0:d.constructor;if(d&&f===o[t.name])return Object.assign(m(d).props,x(n,t)),K(d);var p=r.getSubComponents().indexOf(d);return p>-1&&r.getSubComponents().splice(p,1),d&&X(d,"destroy"),null==e||e.remove(),R(t,n,o[t.name]).getRootElements()},G=function e(t){return t.reduce((function(t,n){return n.name===A?t.push.apply(t,Object(i.default)(e(n.children))):t.push(n),t}),[])},H=function(e,t){var n,r=[],o={},a=T(e);try{for(a.s();!(n=a.n()).done;){var s=n.value;s.key?o[s.key]=s:r.push(s)}}catch(e){a.e(e)}finally{a.f()}var c,u=T(G(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,d=l.key,f=null;if(d)o[d]&&(f=o[d],delete o[d]);else for(var p=0,h=Object.keys(r);p<h.length;p++){var v=h[p],g=r[+v];if(g&&U(g,l)){f=g,r.splice(Number(v),1);break}}f||(f=r.shift()||null),e.length&&e[0].parent&&W(f,V(f,l),e[0].parent)}}catch(e){u.e(e)}finally{u.f()}for(var _=Object.keys(o).reduce((function(e,t){return e.push(o[t]),e}),[]),b=0,y=[].concat(r,Object(i.default)(_));b<y.length;b++){var m=y[b];null==m||m.remove()}},z=function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):(n(t),t.children.forEach((function(t){return e(t,n)})))},q=function(e,t){z(e,(function(e){e.referComponent||(e.referComponent=t)}))},Y=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new e(t);o.parent=r;var i=o.render(),a="string"==typeof i?c()(i).root:i;q(a,o);var s=B(a),u=s.element,l=s.subComponents;return m(o)._subComponents=l,u&&(m(o)._rootElement=u,Array.isArray(u)?u.forEach((function(e){e.isRootElementOfComponent=!0})):u.isRootElementOfComponent=!0),X(o,"ready",u,l),n&&(u&&(Array.isArray(u)?u.forEach((function(e){De.add(e),ve(e)})):(De.add(u),ve(u))),j.set(e,o)),o},K=function(e,t){t&&Object.assign(m(e).props,t);var n=e.getRootElements(),r=e.render(),o="string"==typeof r?c()(r).root:r;return q(o,e),Array.isArray(n)&&Array.isArray(o)?H(n,o):Array.isArray(n)&&!Array.isArray(o)?H(n,[o]):!Array.isArray(n)&&Array.isArray(o)?H([n],o):Array.isArray(n)||Array.isArray(o)||W(n,V(n,o)),X(e,"updatedProps"),n},J=function(e){if(!m(e).isComponent)throw new Error("variable is not a component instance");var t=e.getRootElements();Array.isArray(t)?t.forEach((function(e){return De.remove(e)})):De.remove(t),m(e)._unmountComponent(),j.delete(e.constructor)},X=function(e,t){if("function"==typeof e[t]){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return e[t].apply(e,r)}return null},$=n(42),Z=n(74),Q=n(35),ee=n(99);function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=["width","height"],oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"column",t=arguments.length>1?arguments[1]:void 0;return["row","column"].indexOf(e)===["width","height"].indexOf(t)},ie=function(e,t){return Math.max(e,t)},ae=function(e,t){return e+t},se=function(e){return{width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}},ce=function(e){return{width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}},ue=function(e,t,n){return e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n},le=function(e,t,n,r,o,i){var a,s=e.parent,c=r[n],u=ce(e)[n],l=t,d=null,f=!1;if(!o&&i>0&&(null==l||i>l)&&(l=i),r.position&&"absolute"===r.position[1]&&null!=l&&(l+=i),c||null==l)c&&"percent"===c[0]&&null!=l?(d=l*c[1]-u,f=!0):c&&"digit"===c[0]&&(d=c[1]-u,f=!0);else if("auto"!==e.style[n])if("absolute"===(null===(a=r.position)||void 0===a?void 0:a[1])){for(var p=0,h=!1,v=0,g="width"===n?["left","right"]:["top","bottom"];v<g.length;v++){var _=g[v];null!=r[_]?"digit"===r[_][0]?p+=Number(r[_][1])||0:"percent"===r[_][0]&&(p+=(Number(r[_][1])||0)*l):h=!0}d=h?null:l-p}else o&&oe(s.style.flexDirection,n)&&e.style.flex>0?d=null:(function(e){return Object(Q.getVisibleChildren)(e).some((function(e){return null!=e.style.flex&&e.style.flex>0}))}(e)&&(f=!0),d=l-u);return null!=d&&(e.autoFitSize[n].size=d),f},de=function e(t){var n=Object(Q.isRootElement)(t),o=ce(t);t.autoFitSize={width:{size:null,margin:0,padding:o.width},height:{size:null,margin:0,padding:o.height}};var i,a=t.parent,s=Pe(ke(t)),c={width:!1,height:!1},u={width:null,height:null},l=te(re);try{for(l.s();!(i=l.n()).done;){var d=i.value,f=s[d],p=n?"width"===d?Z.deviceInfo.screenWidth:Z.deviceInfo.screenHeight:a.autoFitSize[d].size,h=n?0:a.autoFitSize[d].padding;!f&&n&&"height"===d&&(p=null),c[d]=le(t,p,d,s,!0,h)}}catch(e){l.e(e)}finally{l.f()}pe(t,s);var v,g=ce(t),_="wrap"===t.style.flexWrap,b=[],y=te(Object(Q.getVisibleChildren)(t));try{for(y.s();!(v=y.n()).done;){var m=v.value;e(m);var w=se(m);if("absolute"!==m.style.position){var O,S=te(re);try{for(S.s();!(O=S.n()).done;){var I=O.value,E=oe(t.style.flexDirection,I);if(_){if(E){var C="width"===I?"height":"width";b.push([(m.autoFitSize[I].size||0)+m.autoFitSize[I].padding+w[I],(m.autoFitSize[C].size||0)+m.autoFitSize[C].padding+w[C]])}}else{var T=E?ae:ie;null==m.autoFitSize[I].size&&m.autoFitSize[I].padding<=0&&T===ae&&(c[I]=!0),u[I]=T((m.autoFitSize[I].size||0)+m.autoFitSize[I].padding+w[I],u[I]||0)}}}catch(e){S.e(e)}finally{S.f()}}}}catch(e){y.e(e)}finally{y.f()}if(_){var k=0,A=0,P=0,D=0,j=oe(t.style.flexDirection,"width")?"width":"height",x="width"===j?"height":"width";D=c[j]&&null!=t.style[j]?t.style[j]:b.reduce((function(e,t){return e+Object($.default)(t,1)[0]}),0);var R,M=te(b);try{for(M.s();!(R=M.n()).done;){var N=Object($.default)(R.value,2),L=N[0],B=N[1];P=Math.max(P,B),L+k>D?(A+=P,P=B,k=L):k+=L}}catch(e){M.e(e)}finally{M.f()}A+=P,u[j]=k,u[x]=A}t instanceof r.Text&&(null!=t.autoFitSize.height.size&&c.height||Object.assign(t.autoFitSize.height,{size:t.style.lineHeight||t.style.fontSize||0,padding:g.height}),null!=t.autoFitSize.width.size&&c.width||Object.assign(t.autoFitSize.width,{size:ee.default.getTextWidth(t.value,t.style.fontSize||14)+3,padding:g.width}));var F,W=te(re);try{for(W.s();!(F=W.n()).done;){var U=F.value;c[U]||null===u[U]?g[U]>0&&(t.autoFitSize[U].padding=g[U]):Object.assign(t.autoFitSize[U],{size:null!=u[U]?u[U]:null,padding:g[U]})}}catch(e){W.e(e)}finally{W.f()}},fe=function e(t){var n,o,i=Object(Q.getVisibleChildren)(t),a=te(re);try{for(a.s();!(o=a.n()).done;){var s=o.value,c=oe(t.style.flexDirection,s),u=t.autoFitSize[s].size,l=t.autoFitSize[s].padding;if(null!=u||l){u=u||0;var d,f=0,p=0,h=te(i);try{for(h.s();!(d=h.n()).done;){var v=d.value,g=v.autoFitSize[s],_=g.size,b=g.margin,y=g.padding;"absolute"!==v.style.position&&(null!=_?f+=_+y+b:v.style.flex&&v.style.flex>0&&(p+=Number(v.style.flex)))}}catch(e){h.e(e)}finally{h.f()}var m,w=te(i);try{for(w.s();!(m=w.n()).done;){var O=m.value,S=Pe(ke(O)),I=null;c?I=O.style.flex?(u-f)/ie(p,1)*O.style.flex:null:t.style.alignItems&&"stretch"!==t.style.alignItems||(I=u),null==O.autoFitSize[s].size&&I?le(O,I,s,S,!1,l):"absolute"===(null===(n=S.position)||void 0===n?void 0:n[1])&&le(O,u,s,S,!1,l)}}catch(e){w.e(e)}finally{w.f()}}}}catch(e){a.e(e)}finally{a.f()}var E,C=te(i);try{for(C.s();!(E=C.n()).done;){e(E.value)}}catch(e){C.e(e)}finally{C.f()}var T,k=te(re);try{for(k.s();!(T=k.n()).done;){var A=T.value,P=t.autoFitSize[A],D=P.size,j=P.padding;null!=D&&t.style[A]!==D+j&&(t.style[A]=D+j)}}catch(e){k.e(e)}finally{k.f()}t instanceof r.Text&&null==t.style.lineHeight&&(t.style.lineHeight=t.style.height)},pe=function(e,t){for(var n=e.autoFitSize.width.size,r=e.autoFitSize.height.size,o=0,i=Object.keys(t);o<i.length;o++){var a=i[o],s=t[a];"percent"===s[0]?"horizontal"===ye[a]&&null!=n?e.style[a]=s[1]*n:"vertical"===ye[a]&&null!=r&&(e.style[a]=s[1]*r):"normal"===s[0]&&(e.style[a]=s[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=ue(t.transform[1][0],n||0,e.style.left||0),e.style.top=ue(t.transform[1][1],r||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},he=function e(t){var n,r,o=[["width","left"],["height","top"]],i=te(Object(Q.getVisibleChildren)(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a);var s,c=te(o);try{for(c.s();!(s=c.n()).done;){var u=Object($.default)(s.value,2),l=u[0],d=u[1];if((a.style.position||(null===(n=a.expandAbsoluteSize)||void 0===n?void 0:n.has(l)))&&"hidden"!==t.style.overflow){var f=(a.style[l]||0)+(a.style[d]||0);f>(t.style[l]||0)&&(t.style[l]=f,t.expandAbsoluteSize=t.expandAbsoluteSize||new Set,t.expandAbsoluteSize.add(l))}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}},ve=function(e){de(e),fe(e),he(e)};function ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var be=function(e){return Number(e).toString()===e},ye={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},me=/^\s*#[0-9a-fA-F]{3}\s*$/,we=/^\s*#[0-9a-fA-F]{3,6}\s*$/,Oe=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,Se=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,Ie=/px$/,Ee=function(e){return"number"==typeof e?e:Ie.test(e)?Number(e.replace(Ie,""))||0:be(e)?parseInt(e,10):e},Ce=function(e){if("string"==typeof e&&me.test(e)){var t=e.slice(1),n=Object($.default)(t,3),r=n[0],o=n[1],i=n[2];return"#"+r+r+o+o+i+i}return e},Te=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];if(["padding","margin"].includes(i)){var s,c=Array.isArray(a)?a:(null==a?"":a).toString().split(/\s+/),u=null,l=null,d=null,f=null;switch(c.length){case 0:continue;case 1:var p=Object($.default)(c,1);u=p[0];var h=Object($.default)(c,1);l=h[0];var v=Object($.default)(c,1);d=v[0];var g=Object($.default)(c,1);f=g[0];break;case 2:var _=Object($.default)(c,2);u=_[0],l=_[1];var b=Object($.default)(c,2);d=b[0],f=b[1];break;case 3:var y=Object($.default)(c,3);u=y[0],l=y[1],d=y[2],f=l;break;case 4:var m=Object($.default)(c,4);u=m[0],f=m[1],d=m[2],l=m[3];break;default:continue}Object.assign(t,(s={},Object(o.default)(s,i+"Top",Ee(u)),Object(o.default)(s,i+"Left",Ee(l)),Object(o.default)(s,i+"Bottom",Ee(d)),Object(o.default)(s,i+"Right",Ee(f)),s))}else if("border"===i){var w=(a||"").toString().split(/\s+/);switch(w.length){case 0:continue;case 1:t.borderColor=Ce(w[0]);continue;case 2:t.borderWidth=Ee(w[0]),t.borderColor=Ce(w[1]);continue;case 3:t.borderWidth=Ee(w[0]),t.borderColor=Ce(w[2]);continue;default:continue}}else if("background"===i&&we.test(e[i]))t.backgroundColor=Ce(e[i]);else if("background"===i&&(Oe.test(e[i])||Se.test(e[i])))t.backgroundColor=e[i];else if("background"===i&&e[i].includes("linear-gradient"))t.backgroundColor=e[i];else if("color"===i&&"string"==typeof a&&Se.test(a)){var O=Se.exec(a).slice(1,5).map((function(e){return Number(e)})),S=Object($.default)(O,4),I=S[0],E=S[1],C=S[2],T=S[3],k=function(e){return e.toString(16)};t.color="#"+k(I)+k(E)+k(C),null==e.opacity&&(t.opacity=Number(T))}else if("display"===i&&"none"===e[i])t.hidden=!0;else if("rotate"===i){var A=e[i];t.rotate="string"==typeof A?Number(A.replace("deg",""))||0:A}else t[i]=Ce(Ee(e[i]))}return t},ke=function(e){var t=m(e.referComponent);if(!t)return Object.assign({},e.style||{});var n,r={},o=t.style||{},i=ge(e.classList||[]);try{for(i.s();!(n=i.n()).done;){var a=n.value;Object.assign(r,Te(o[a])),Object.assign(r,Te(o["."+a]))}}catch(e){i.e(e)}finally{i.f()}return o[e.name]&&Object.assign(r,Te(o[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(r,Te(t._manualStyle[e.name])),r},Ae={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},Pe=function(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=e[o];if(null!=i){var a=i.toString().trim();if((ye[o]||["width","height"].includes(o))&&Ae.percent.test(a)){var s=parseFloat(a.slice(0,-1))/100;t[o]=["percent",s]}else if(be(a))t[o]=["digit",Number(a)];else if("transform"===o&&a.includes("translate")){var c=Ae.translate.exec(a);c&&(t[o]=["transform",c.slice(1,3)])}else t[o]="string"==typeof i?["normal",a]:["normal",i]}}return t},De=r.webviewLayout},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.r(t),n.d(t,"hasOwnProperty",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"LOG_LIMIT",(function(){return r})),n.d(t,"AppStatus",(function(){return o})),n.d(t,"BackgroudAPIBlackList",(function(){return i})),n.d(t,"NotActiveAPIBlackList",(function(){return a}));var r=1024,o={FORE_GROUND:0,BACK_GROUND:1,LOCK:2},i=[],a=[]},function(e,t,n){n.r(t),n.d(t,"ReportCanvasDataEventType",(function(){return a})),n.d(t,"initReportCanvasData",(function(){return u})),n.d(t,"reportCanvasData",(function(){return l}));var r=n(0),o=n(10),i=n(114),a={EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18},s={sampleEventList:[]},c=new Map;function u(){Object(r.onMethod)("onCanvasReportEventSampleConfigReceived",(function(e){var t=JSON.parse(e.keyEventSampleConfig);Array.isArray(t.sample_event_list)&&(s.sampleEventList=t.sample_event_list,s.sampleEventList.forEach((function(e){c.set(e,0)})),function(){var e=s.sampleEventList.find((function(e){return e.event===a.EVENT_CANVAS_SAMPLE_BY_TIME}));if(e){var t=6e3,n=6,r=0;Object(o.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(o.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){l(a.EVENT_CANVAS_SAMPLE_BY_TIME),r++}),1e3);var i=setInterval((function(){r>n?clearInterval(i):setTimeout((function(){l(a.EVENT_CANVAS_SAMPLE_BY_TIME),r++}),500)}),t)}}(),function(){var e=s.sampleEventList.find((function(e){return e.event===a.EVENT_CANVAS_WEBVIEW_TIMING}));if(e){var t=6e3,n=6,r=0;Object(o.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(o.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){Object(i.getWebViewIdList)().forEach((function(e){l(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),r++}),1e3);var c=setInterval((function(){r>n?clearInterval(c):setTimeout((function(){Object(i.getWebViewIdList)().forEach((function(e){l(a.EVENT_CANVAS_WEBVIEW_TIMING,e)})),r++}),500)}),t)}}())})),Object(r.onMethod)("onStartReportCanvasData",(function(e){var t=e.event;t===a.EVENT_CANVAS_WEBVIEW_BEFORE_JUMP?Object(i.getWebViewIdList)().forEach((function(e){l(t,e)})):l(t)}))}function l(e,t){var n=function(e){return s.sampleEventList.find((function(t){return e===t.event}))}(e);if(n){var o=Date.now(),i=c.get(n);if(n.sample_interval_seconds,(o-i)/1e3<n.sample_interval_seconds)return;Object(r.invokeMethod)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success:function(){c.set(n,o)},fail:function(e){e.errMsg}})}}},function(e,t,n){n.r(t),n.d(t,"onAppRouteDone",(function(){return d})),n.d(t,"offAppRouteDone",(function(){return f}));var r=n(0),o=n(27),i=n(3),a=n(22),s=n(1),c=n(10),u=n(97),l=Object(a.getEventManager)("AppRouteDone"),d=l.internalOnMethod,f=l.internalOffMethod;function p(e,t){if(0===s.default.appType&&e&&t&&!i.default.navigationBarTitleMap[e]){var n="";s.default.page[t]&&s.default.page[t].window&&Object(c.isString)(s.default.page[t].window.navigationBarTitleText)?n=s.default.page[t].window.navigationBarTitleText:s.default.global&&s.default.global.window&&Object(c.isString)(s.default.global.window.navigationBarTitleText)&&(n=s.default.global.window.navigationBarTitleText),i.default.navigationBarTitleMap[e]=n}}Object(o.onNativeEvent)("onAppRouteDone",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.webviewAnimation.appRoute=!1,u.webviewAnimation.appRouteDone=!0,Object(u.clearDelayedInvoke)();var n="";i.default.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==i.default.lastOpenType&&(i.default.lastRoute=e.path||""),l.emit(e),Object(r.publish)("onAppRouteDone",{frameset:e.frameset},[t]),e.path,p(e.path,n)}))},function(e,t,n){n.r(t),n.d(t,"Element",(function(){return _}));var r=n(4),o=n(5),i=n(33),a=n(29),s=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],c=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],u=n(18),l=n(1),d=n(27),f=new i.default({maxListeners:2e5}),p=32768,h="portrait",v="";l.default.onReady((function(){h=l.default.deviceOrientation||h,v=Object(a.getStableSystemInfo)().model||""}));var g=function(e,t){return-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?"element-"+t+"-"+e:-1!==["layout"].indexOf(e)?e:void 0},_=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.parentId,i=void 0===o?0:o,a=n.id,d=void 0===a?p++:a,f=n.style,g=void 0===f?{}:f,_=n.props,b=void 0===_?{}:_,y=n.name,m=void 0===y?"":y;Object(r.default)(this,e);var w=l.default.platform;this.parentId=i,this.dest=0,this.id=d,this.name=m,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((function(e){t.on("ready",e)})),g=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},g),Object.assign(g,g[h]);var O=/iphone x/.test(v.toLowerCase())?"iphone x":w;Object.assign(g,g[O]),Object.assign(g,g[O+"-"+h]),this.style={},this.computedStyle=Object.assign({},g),this.lastComputedStyle=Object.assign({},g),this.layoutBox=null,Object.keys(g).forEach((function(e){Object.defineProperty(t.style,e,{configurable:!0,enumerable:!0,get:function(){return g[e]},set:function(n){if(n!==g[e]&&void 0!==n){if(g[e]=n,t.computedStyle[e]=n,t.lastComputedStyle[e]=n,-1!==s.indexOf(e)&&t.style.scale){var r=n*t.style.scale;t.computedStyle[e]=r,t.lastComputedStyle[e]=r}"scale"===e&&s.forEach((function(e){g[e]&&(t.computedStyle[e]=g[e]*n,t.lastComputedStyle[e]=g[e]*n)})),t.shouldUpdate=!0,"hidden"===e&&(n?(Object(u.log)(t.id,t.name,"隐藏, 保存宽高",t.computedStyle.width,t.computedStyle.height),c.forEach((function(e){t.computedStyle[e]=0}))):(Object(u.log)(t.id,t.name,"显示, 设置回来",t.lastComputedStyle.width,t.lastComputedStyle.height),c.forEach((function(e){t.computedStyle[e]=t.lastComputedStyle[e]})))),t.requestLayout()}}})})),s.forEach((function(e){if(t.style[e]&&t.style.scale){var n=t.style[e]*t.style.scale;t.computedStyle[e]=n,t.lastComputedStyle[e]=n}})),g.hidden&&c.forEach((function(e){t.computedStyle[e]=0})),Object.keys(b).forEach((function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return b[e]},set:function(n){n!==b[e]&&(b[e]=n,t.shouldUpdate=!0,t.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){t.on(e,(function(n){if(t.bubbleEvent&&t.parent){var r=0,o=0;try{r=t.layoutBox.left,o=t.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){var i=Object.assign({},n);i.x+=r,i.y+=o,t.parent.emit(e,i)}else{var a=n.map((function(e){return{x:e.x+r,y:e.y+o}}));t.parent.emit(e,a)}}}))}))}return Object(o.default)(e,[{key:"getChildren",value:function(){var e=this;return Object.keys(this.children).map((function(t){var n=e.children[t];return n.dest=e.dest,{id:n.id,name:n.name,style:n.computedStyle,children:n.getChildren()}}))}},{key:"getAbsolutePosition",value:function(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};var t=this.getAbsolutePosition(e.parent),n=t.left,r=t.top;return{left:n+e.layoutBox.left,top:r+e.layoutBox.top}}},{key:"add",value:function(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}},{key:"remove",value:function(e){var t=this;e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((function(e){t.children[e].remove(),delete t.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}},{key:"emit",value:function(e,t){f.emit(g(e,this.id),t)}},{key:"on",value:function(e,t){f.on(g(e,this.id),t)}},{key:"once",value:function(e,t){f.once(g(e,this.id),t)}},{key:"off",value:function(e,t){f.off(g(e,this.id),t)}},{key:"nextLayout",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextLayout(e)}));setTimeout(e,250)}},{key:"nextUpdate",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextUpdate(e)}));this.once("update-done",e)}},{key:"ready",value:function(){var e=this,t=Object.keys(this.children).map((function(t){return e.children[t].ready()}));return Promise.all(t.concat(this.readyResult))}},{key:"requestLayout",value:function(){this.emit("layout")}},{key:"forceUpdate",value:function(){var e=this,t=this.isInserted?this.update():this.insert(),n=Object.keys(this.children).map((function(t){return e.children[t].forceUpdate()}));return t.then((function(){return Promise.all(n)}))}},{key:"insert",value:function(){return Promise.resolve()}},{key:"update",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){var e=this;["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((function(t){var n=g(t,e.id);f.removeAllListeners(n)}))}}]),e}(),b=function(e){var t=JSON.parse(e.data).id;f.emit(g("click",t))};Object(d.onNativeEvent)("onTextViewClick",b),Object(d.onNativeEvent)("onImageViewClick",b),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((function(e){var t=e.replace(/^on/,"").toLowerCase();Object(d.onNativeEvent)(e,(function(e){try{var n=JSON.parse(e.data).id;f.emit(g(t,n),e.touch||e.touches)}catch(e){}}))}))},function(e,t,n){n.r(t),n.d(t,"encodeIdKey",(function(){return o})),n.d(t,"IDKEY_GROUP",(function(){return r})),n.d(t,"IDKEY",(function(){return a})),n.d(t,"SPLASHAD_IDKEY",(function(){return c})),n.d(t,"CUSTOMAD_IDKEY",(function(){return l}));var r,o=function(e,t){return{idKey:e,idKeyGroup:t}};!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(r||(r={}));var i=function(e){return o(e,r.COMMON)},a={AD_BANNER_LOAD_ERROR:i(5),AD_VIDEO_LOAD_ERROR:i(10),REWARDED_VIDEO_PARSE_ERROR:i(11),REWARDED_VIDEO_RENDER_ERROR:i(12),REWARDED_VIDEO_LOAD_ERROR:i(13),REWARDED_VIDEO_FOLLOW_SUCCESS:i(14),OPEN_URL_ERROR:i(21),OPEN_WXAPP_ERROR:i(22),OPEN_CANVAS_ERROR:i(23),ADD_CONTACT_ERROR:i(24),LAUNCH_APP_ERROR:i(25),OPEN_WEBAPPSTORE_ERROR:i(26),ADD_DOWNLOAD_TASK_ERROR:i(28),CLICK_REPORT_ERROR:i(32),EXPOSURE_REPORT_ERROR:i(33),FOLLOW_REPORT_ERROR:i(34),REWARDED_VIDEO_ANIMATE_ERROR:i(35),AD_FOLLOWED:i(37),AD_INSTALLED:i(38),AD_INTERSTITIAL_LOAD_ERROR:i(39),REWARDED_VIDEO_INSTANCE_BROKEN:i(50),PRELOAD_MINIENV_SUCCESS:i(86),PRELOAD_MINIENV_ERROR:i(87),AD_GRID_LOAD_SUCCESS:i(88),AD_GRID_LOAD_COUNT_ERROR:i(89),AD_GRID_LOAD_ERROR:i(90),PREDOWNLOAD_SUCCESS:i(96),PREDOWNLOAD_ERROR:i(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:i(105),BATCHLOAD_SUCCESS:i(112),BATCHLOAD_ERROR:i(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:i(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:i(115),BIND_GUIDE_SUCCESS:i(119),BIND_GUIDE_ERROR:i(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:i(121),RIGHTBUTTON_HIDE_ERROR:i(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:i(128),GET_DEVICEINFO_ERROR:i(129),THIRD_ERROR:i(130),GET_DEVICEINFO_SUCCESS:i(131),GET_WAID_SUCCESS:i(132),GET_WAID_ERROR:i(133),READ_ADINFOS_ERROR:i(134),AD_FETCH_SUCCESS:i(135),REWARDED_VIDEO_PRELOAD_ERROR:i(136),REWARDED_VIDEO_PRELOAD_SUCCESS:i(137),READ_ADINFOS_SUCCESS:i(138),ANALYSE_DEBUG_REPORT_ERROR:i(139),PRELOAD_CALL_ERROR:i(140),PRELOAD_LOAD_ERROR:i(141),PRELOAD_LOAD_SUCCESS:i(142),PRELOAD_USE_SUCCESS:i(143),PRELOAD_USE_ERROR:i(144),PRELOAD_DOWNLOAD_SUCCESS:i(145),PRELOAD_DOWNLOAD_ERROR:i(146),REPORT_VIDEO_FAILED:i(147),REWARD_GAUSS_EXISTS:i(148),REWARD_USE_GAUSS:i(149),REWARD_USE_EXPAND_STYLE:i(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:i(151),REWARDED_VIDEO_KEEP_ALIVE:i(152),REWARDED_VIDEO_END:i(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:i(156),OPEN_CHANNELS_ACTIVITY_FAILED:i(157),OPEN_CHANNELS_LIVE_SUCCESS:i(158),OPEN_CHANNELS_LIVE_FAILED:i(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:i(160),OPEN_CHANNELS_USER_PROFILE_FAILED:i(161),REWARD_CHANNELS_CALLBACK_SUCCESS:i(162),REWARD_CHANNELS_CALLBACK_FAILED:i(163),H5_PRELOAD_CARD_CLICKED:i(164),H5_PRELOAD_BUTTON_CLICKED:i(165),H5_PRELOAD_SUCCESS:i(166),H5_PRELOAD_FAILED:i(167),H5_PRELOAD_PLAYABLE_CLICKED:i(168)},s=function(e){return o(e,r.SPLASHAD)},c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},u=function(e){return o(e,r.CUSTOMAD)},l={LOAD_FAILED:u(1),PRELOAD_SUCCESS:u(2),PRELOAD_FAILED:u(3),PARSE_FAILED:u(4),TPL_RENDER_SUCCESS:u(5),TPL_PARSE_FAILED:u(6),TPL_LOAD_FAILED:u(7),AD_LIMIT_TIME:u(8),AD_LIMIT_BOUNDARY:u(9),RELATION_FETCH_ERROR:u(10),SHOW_FAILED1:u(11),SHOW_FAILED2:u(12),AD_VIDEO_LOAD_FAILED:u(13),FOLLOW_SUCCESS:u(14),FOLLOW_FAILED:u(15),RENDER_SUCCESS:u(16),RENDER_FAILED:u(17),REFETCH_SUCCESS:u(18),REFETCH_FAILED:u(19),LOAD_SUCCESS:u(20),WIDTH_GET_ERROR:u(21)}},function(e,t,n){n.r(t),n.d(t,"deviceInfo",(function(){return c})),n.d(t,"deviceReady",(function(){return u}));var r=n(1),o=n(11),i=n(35),a=n(29),s=!1,c={},u=function(){return s?Promise.resolve(c):new Promise((function(e){r.default.onReady((function(){s=!0,c.deviceOrientation=Object(i.getInitDeviceOrientation)();var t=Object(a.getInitScreenSize)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=Object(o.isGame)(),e(c)}))}))}},function(e,t,n){n.r(t),n.d(t,"SKIA_CANVAS_ENABLED",(function(){return _})),n.d(t,"canvas",(function(){return w})),n.d(t,"canvasInfo",(function(){return y})),n.d(t,"onCanvasMethodCallbackOnce",(function(){return T})),n.d(t,"createContext",(function(){return X})),n.d(t,"drawCanvasImpl",(function(){return B})),n.d(t,"drawCanvas",(function(){return F})),n.d(t,"canvasToTempFilePath",(function(){return q})),n.d(t,"createCanvasContext",(function(){return Z})),n.d(t,"drawCanvas4Plugin",(function(){return W})),n.d(t,"canvasToTempFilePath4Plugin",(function(){return Y})),n.d(t,"createCanvasContext4Plugin",(function(){return Q})),n.d(t,"canvasGetImageData4Plugin",(function(){return x})),n.d(t,"canvasPutImageData4Plugin",(function(){return N})),n.d(t,"canvasToDataURL",(function(){return J})),n.d(t,"canvasGetImageData",(function(){return j})),n.d(t,"canvasPutImageData",(function(){return M}));var r=n(1),o=n(0),i=n(43),a=n(68),s=n(147),c=n(6),u=n(3),l=n(25),d=n(29),f=n(2),p=n(101),h=f.IS_ANDROID&&r.default.useXWebCanvas,v=f.IS_IOS&&r.default.useSkiaCanvas,g=f.IS_ANDROID&&r.default.useNewXWebCanvasToTFP,_=h||v,b=function(){},y={},m={},w={},O={},S=0,I=0,E=4500,C=Date.now,T=Object(l.subscribeOnce)("onCanvasMethodCallback"),k=Object(l.subscribeOnce)("onDrawCanvas");function A(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,o=e.viewId,i=e.webviewId,a=Object(l.concatId)(i,t,n,r);w[a]&&delete w[a],_&&Object(p.skiaCanvasRemove)({webviewId:i,canvasId:t,pluginId:n,nodeId:r,viewId:o})}function P(e,t,n){var r={errMsg:e+": "+(n||"fail canvas is empty")},o=__errorTracer__.surroundThirdByTryCatch(t.fail||b,"at api "+e+" fail callback function"),i=__errorTracer__.surroundThirdByTryCatch(t.complete||b,"at api "+e+" complete callback function");o(r),i(r)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t),i=Object(c.assign)({},e);if("number"==typeof w[r]||_){if(i.canvasId=w[r],i.jsInvokedAt=Date.now(),i.x=Number(i.x)||0,i.y=Number(i.y)||0,i.width=Number(i.width)||0,i.height=Number(i.height)||0,0===i.width)return void P("canvasGetImageData",e,"the source width is 0");if(0===i.height)return void P("canvasGetImageData",e,"the source height is 0");if(_){var a=Object(p.getOrCreateCanvas)(r);return void a.getImageData(i)}if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)i.method="getImageData",T(i,(function(t){var n={width:t.width,height:t.height,data:Object(l.base64ToUint8ClampedArray)(t.data)};"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)})),Object(o.publish)("invokeCanvasMethod",i);else{var s=i.success,d=i.fail;i.success=function(e){"[object ArrayBuffer]"===Object.prototype.toString.call(e.data)?(e.width=i.width,e.height=i.height,e.data=new Uint8ClampedArray(e.data),"function"==typeof s&&s(e)):(delete e.data,e.errMsg="canvasGetImageData: fail","function"==typeof d&&d(e))},Object(o.invokeMethod)("canvasGetImageData",i)}}else P("canvasGetImageData",e)}function j(e,t){D(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function x(e,t,n){D(e,n,t)}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t),i=Object(c.assign)({},e);if("number"==typeof i.width)if(i.data&&"[object Uint8ClampedArray]"===Object.prototype.toString.call(i.data))if("number"==typeof w[r]||_){if(i.canvasId=w[r],i.jsInvokedAt=Date.now(),i.x=Number(i.x)||0,i.y=Number(i.y)||0,i.height="number"==typeof i.height?i.height:i.data.length/i.width/4|0,i.width*i.height*4!==i.data.length)return void P("canvasPutImageData",e,"invalid data format");if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)i.data=f.IS_WINDOWS||f.IS_MINA?WeixinNativeBuffer.new(i.data.buffer).id:Object(l.uint8ClampedArrayToBase64)(i.data),i.method="putImageData",Object(o.publish)("invokeCanvasMethod",i),"function"==typeof e.success&&e.success({errMsg:"canvasPutImageData:ok"}),"function"==typeof e.complete&&e.complete({errMsg:"canvasPutImageData:ok"});else{if(i.data=i.data.buffer,_){i.data=e.data;var a=Object(p.getOrCreateCanvas)(r);return void a.putImageData(i)}Object(o.invokeMethod)("canvasPutImageData",i)}}else P("canvasPutImageData",e);else P("canvasPutImageData",e,"data argument must be an Uint8ClampedArray");else P("canvasPutImageData",e,"invalid width argument")}function M(e,t){R(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function N(e,t,n){R(e,n,t)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA){var c={actions:t,reserve:n,canvasId:e};k(c,(function(e){"function"==typeof s&&s({errMsg:e.errMsg})})),Object(o.publish)("canvasActionsChanged",c)}else Object(o.invokeMethod)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:r,actions:t,success:i,fail:a,complete:s})}function B(e){var t=e.isWidgetCanvas,n=e.canvasId,r=e.actions,i=e.reserve,a=e.useHardwareAccelerate,s=e.success,c=e.fail,d=e.complete,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.currentWebviewId,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",g=C();if(Array.isArray(r)){if(t){if(g-S<E){var b={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return(I+=1)>500&&(I=0,console.warn(b.errMsg)),void("function"==typeof c&&c(b))}return S=g,void Object(o.invokeMethod)("drawCanvas",{canvasId:void 0,reserve:i,actions:r,success:s,fail:c,complete:d})}var y=Object(l.concatId)(f,n,h,v);if(_){var m=Object(p.getOrCreateCanvas)(y);m.draw(r,i,d,f,v,h)}else if("number"==typeof w[y]){var T=w[y];L(T,r,i,a,s,c,d)}else O[y]=O[y]||[],O[y]=O[y].concat({actions:r,reserve:i,useHardwareAccelerate:a,success:s,fail:c,complete:d})}}function F(e){B(e)}function W(e,t,n){B(e,u.default.currentWebviewId,t,n)}"undefined"!=typeof __widgetConfig__&&(E="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),Object(o.subscribe)("canvasInsert",(function(e,t){var n=e.canvasId,r=e.viewId,o=e.canvasNumber,a=e.pluginId,s=e.data,c=e.position,u=e.nodeId,d=e.compPath;_&&Object(p.skiaCanvasInsert)({canvasId:n,viewId:r,canvasNumber:o,pluginId:a,position:c,nodeId:u},t);var f=Object(l.concatId)(t,n,a,u);y[o]={lastTouches:[],data:s,compPath:d},w[f]=o,m[o]=c,Array.isArray(O[f])&&(O[f].forEach((function(e){L(o,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete O[f]),Object(i.onBeforeUnloadPage)(t,(function(){A({canvasId:n,pluginId:a,nodeId:u,viewId:r,webviewId:t})}))})),Object(o.subscribe)("canvasUpdate",(function(e){var t=e.canvasNumber,n=e.position;Object(a.hasOwnProperty)(m,t)&&(m[t]=n)})),Object(o.subscribe)("canvasRemove",(function(e,t){A({canvasId:e.canvasId,pluginId:e.pluginId,nodeId:e.nodeId,viewId:e.viewId,webviewId:t})}));var U=null,V=function(e,t,n,r){e.x=e.x?e.x:0,e.y=e.y?e.y:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width):n-e.x,e.height=e.height?Math.min(r-e.y,e.height):r-e.y,e.destWidth=e.destWidth?e.destWidth:e.width*t,e.destHeight=e.destHeight?e.destHeight:e.height*t},G=function(e,t){var n=Object(c.assign)({},t);n.success=t.success,n.fail=t.fail,n.complete=t.complete;var r=300,i=150;Object(a.hasOwnProperty)(m,t.canvasId)&&(r=m[t.canvasId].width,i=m[t.canvasId].height),!f.IS_IOS||"6.5.10"!==e.version&&"6.5.11"!==e.version&&"6.5.12"!==e.version?V(n,e.pixelRatio,r,i):function(e,t,n,r){n*=t,r*=t,e.x=e.x?e.x*t:0,e.y=e.y?e.y*t:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>r)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width*t):n-e.x,e.height=e.height?Math.min(r-e.y,e.height*t):r-e.y,e.destWidth=e.destWidth?e.destWidth/t:e.width/t,e.destHeight=e.destHeight?e.destHeight/t:e.height/t}(n,e.pixelRatio,r,i),Object(o.invokeMethod)("canvasToTempFilePath",n)};function H(e,t){if(e.fileType=["jpg","png"].indexOf(e.fileType)>-1?e.fileType:"png",e.quality="jpg"===e.fileType?e.quality<0||e.quality>1?1:e.quality:1,e.jpgQuality=e.quality,e.canvas){var n=e.canvas;delete e.canvas;var r=n._width?n.width/n._width:U.pixelRatio;if(e.x=Number(e.x)||0,e.y=Number(e.y)||0,f.IS_ANDROID){if(e.width*=r,e.height*=r,e.x=e.x?e.x*r:0,e.y=e.y?e.y*r:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),0===e.width)return void Object(c.failWithMessage)(e,"width is 0");if(0===e.height)return void Object(c.failWithMessage)(e,"height is 0");var i=n._ctx.getImageData(e.x,e.y,e.width,e.height);return void(g?(e.viewId=n.id,Object(o.invokeMethod)("xwebCanvasToTempFilePath",e)):(e.data=i.data.buffer,Object(o.invokeMethod)("canvasToTempFilePath",e)))}if(f.IS_IOS)return e.canvasId=n.id,V(e,r,n.width/r,n.height/r),void setTimeout((function(){Object(o.invokeMethod)("canvasToTempFilePath",e)}),100);if(f.IS_DEVTOOLS){e.width*=r,e.height*=r,e.x=e.x?e.x*r:0,e.y=e.y?e.y*r:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y);var a=document.createElement("canvas"),s=a.getContext("2d");a.width=e.destWidth,a.height=e.destHeight,s.drawImage(n._canvasRef,e.x,e.y,e.width,e.height,0,0,e.destWidth,e.destHeight);var u=a.toDataURL(e.fileType,e.quality);return u=u.replace(/^data:image\/(jpg|png|jpeg);base64,/,""),void Object(o.invokeMethod)("base64ToTempFilePath",Object(c.assign)({base64Data:u},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})}}if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)e.method="toDataURL",T(e,(function(t){var n=t.dataUrl;Object(o.invokeMethod)("base64ToTempFilePath",Object(c.assign)({base64Data:n},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})})),Object(o.publish)("invokeCanvasMethod",e);else if(_&&f.IS_ANDROID){var l=Object(p.getOrCreateCanvas)(t);l._contextPromise.then((function(){e.x=Number(e.x)||0,e.y=Number(e.y)||0,e.width=Number(e.width)||l.width-e.x,e.height=Number(e.height)||l.height-e.y,0!==e.width?0!==e.height?l.getImageData({x:e.x,y:e.y,width:e.width,height:e.height,success:function(t){e.data=t.data.buffer,Object(o.invokeMethod)("canvasToTempFilePath",e)},fail:function(){Object(c.failWithMessage)(e,"fail")}}):Object(c.failWithMessage)(e,"height is 0"):Object(c.failWithMessage)(e,"width is 0")}))}else U||(U=Object(d.getStaticSystemInfoSync)()),G(U,e)}function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.canvasId||e.canvas){if(e.canvas)return U||(U=Object(d.getStaticSystemInfoSync)()),void H(e,r);var r=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t);"number"==typeof w[r]?(e.canvasId=w[r],H(e)):P("canvasToTempFilePath",e)}}function q(e,t){z(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function Y(e,t,n){z(e,n,t)}function K(e){f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA?(e.method="toDataURL",T(e,(function(t){var n=t.dataUrl;e.success({data:n})})),Object(o.publish)("invokeCanvasMethod",e)):Object(o.invokeMethod)("canvasToData",e)}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.concatId)(u.default.currentWebviewId,e.canvasId),n=Object.assign({},e),r=n.success,o=n.complete;n.success=function(e){var t="data:image/"+(n.fileType||"png")+";base64,"+e.data;"function"==typeof r&&r({dataURL:t}),"function"==typeof o&&o({dataURL:t})},n.complete=b,"number"==typeof w[t]?(n.canvasId=w[t],K(n)):P("canvasToDataURL",e)}var X=function(){return new s.Context},$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new s.Context(e,t,n,r)},Z=function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"";return $(u.default.currentWebviewId,e,n)},Q=function(e,t,n){return $(u.default.currentWebviewId,e,n,t)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(204)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=o();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){r("tag %j",e);var t=i(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var l=o();if(!l)return u;u.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return u;for(i(/\??>\s*/),u.content=function(){r("content %j",e);var t=i(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return i(/^<\/[\w-:.]+>\s*/),u}}function o(){r("attribute %j",e);var t,n=i(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t);var r=n(33),o=n(103),i=new r.default,a={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:o.default,emitter:i};t.default=a},function(e,t,n){n.r(t),n.d(t,"setEnterOptions",(function(){return c})),n.d(t,"setInnerEnterOptions",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l})),n.d(t,"getInnerEnterOptionsSync",(function(){return d}));var r=n(80),o=n(28),i=n(0),a={},s={};function c(e){a=e}function u(e){s=e}function l(){var e=Object(o.getPluginId)(this)||"";return Object(r.isolateInfo)(a,e)}function d(){return s}Object(i.subscribe)("getEnterAppInfo",(function(e,t){var n=e.callbackId;Object(i.publish)("appEnterInfoGot",{res:d(),callbackId:n},[t])}))},function(e,t,n){n.r(t),n.d(t,"filterInfo",(function(){return d})),n.d(t,"filterPublicInfo",(function(){return f})),n.d(t,"isolateInfo",(function(){return p})),n.d(t,"setPrivateExtraData",(function(){return h}));var r,o=n(20),i=n(78),a=n(6),s=n(3),c=n(0),u=n(1),l=n(37);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:s.default.query)||{},e.path=t?Object(a.removeHtmlSuffixFromUrl)(e.path):Object(a.removeHtmlSuffixFromUrl)(s.default.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?s.default.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:s.default.lastShareInfo=void 0),i.default.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(i.default.appId=e.referrerInfo.appId),"object"===Object(o.default)(e.shareInfo)&&null!==e.shareInfo){var n=e.shareInfo;n.shareKey&&n.shareName&&(Object(c.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:n.shareKey}),e.shareTicket=i.default.ShareInfoStorage.set(n.shareKey,n.shareName),i.default.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;0===(e=Object.assign({},e)).scene?e.scene=r:r=e.scene;var n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!Object(l.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);var o=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(o.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;var i=Object.keys(e.referrerInfo.privateExtraData);0===i.length&&delete e.referrerInfo.privateExtraData}var a={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:o};e.chatroomUsername&&1156===n&&(a.chatroomUsername=e.chatroomUsername);var s=e.nativeExtraData||{};return s.location&&(a.locationInfo=s.location),7!==u.default.appType&&10!==u.default.appType||(e.nativeExtraData&&(a.nativeExtraData=e.nativeExtraData),a.sessionId=e.sessionid||e.sessionId,a.isLaunch=e.isLaunch,e.isLaunch&&(a.prerender=!!u.default.prerender),a.clickTimestamp=e.clickTimestamp,a.preloadType=t),e.mode&&(a.mode=e.mode),1173===n&&(s.mimeType?a.forwardMaterials=[{type:s.mimeType,path:s.materialPath,name:s.materialName,size:s.materialSize}]:Array.isArray(s.materials)&&(a.forwardMaterials=s.materials)),a}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(a.getRouteDomain)(e.path||"");if(n!==t){var r={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(r.mode=e.mode),10===u.default.appType&&(e.nativeExtraData&&(r.nativeExtraData=e.nativeExtraData),r.sessionId=e.sessionId,r.isLaunch=e.isLaunch,e.isLaunch&&(r.prerender=e.prerender),r.clickTimestamp=e.clickTimestamp,r.preloadType=e.preloadType),r}return e}function h(e){try{__appServiceEngine__.setPrivateExtraData(e.privateExtraData),e.success()}catch(t){e.fail(t)}}},function(e,t,n){n.r(t),n.d(t,"_getRealRoute",(function(){return i}));var r=n(6),o=n(3),i=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(r.getRealRoute)(o.default.lastRoute,e,t)}},function(e,t,n){n.r(t),n.d(t,"_getABTestConfig",(function(){return i})),n.d(t,"getABTestConfig",(function(){return a}));var r=n(1),o=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o.invokeMethod)("getABTestConfig",e)},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};7===r.default.appType?Object(o.invokeMethod)("getABTestConfig",e):Object(o.beforeInvokeFail)("getABTestConfig",e,"permission denied",1)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(4),o=n(5),i=n(33),a=function(){function e(){Object(r.default)(this,e),this.emitter=new i.default({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}return Object(o.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var r=this.callbackMap.get(t);"function"==typeof r&&(this.emitter.off(e,r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r))}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}]),e}()},function(e,t,n){n.r(t),n.d(t,"SDKVersion",(function(){return r}));var r="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},function(e,t,n){n.r(t),n.d(t,"reportNetworkAPI",(function(){return d}));var r=n(47),o=n(0),i=n(11),a=n(139),s=0,c=[],u=function(){var e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:c,appType:Reporter.getAppType()},null,2);Object(o.invokeMethod)("reportRealtimeAction",{actionData:e}),c=[]},l=function(e){var t="";return Object.keys(e).forEach((function(n,r){try{var o=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);0!==r&&(t+="&"),t+=o}catch(e){}})),t},d=function(e,t,n,o,d,f,p){var h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,v=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},_="",b="";Object(i.isGame)()&&(b=l(a.default.query));var y=[e,t,n,o,d,Reporter.getAppType(),f,h,Object(r._getCurrentNetworkType)(),_,b,v,l(g)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:y}),Reporter.reportIDKey({key:e+"_"+(1===n?"ok":"fail")}),c.push([e,t,n,f||"",o,d,Object(r._getCurrentNetworkType)(),p?"1":"0",Reporter.getAppType(),h].map((function(e){var t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-s>=6e4&&(s=Date.now(),setTimeout(u,6e4))}},function(e,t,n){n.r(t),n.d(t,"NetworkTask",(function(){return j})),n.d(t,"registerTaskType",(function(){return U}));var r=n(42),o=n(20),i=n(16),a=n(4),s=n(5),c=n(24),u=n(85),l=n(61),d=n(11),f=n(10),p=n(52);var h=n(2),v=n(177),g=n(1),_=Object(d.promisify)(p.stat),b=0,y=new WeakMap,m=new WeakMap,w=new WeakMap,O=new WeakMap,S=new WeakMap,I=new WeakMap,E=new WeakMap,C=new WeakMap,T=new WeakMap,k=new WeakMap,A={},P=new l.Emitter("Network",!0),D=wxNativeConsole.createLogger("NetworkTask"),j=function(){function e(t,n){var r=this,o=n.taskType,i=n.beforeSend,s=n.beforeSuccess,c=n.beforeFail;Object(a.default)(this,e);var u=b++;y.set(this,u),w.set(this,"waiting"),O.set(this,t),S.set(this,o),E.set(this,i),C.set(this,s),Object(f.isFunction)(c)&&T.set(this,c);var l=!1;h.IS_ANDROID&&g.default.clientVersion>=654315008&&("Download"!==o&&"Request"!==o||Object.keys(g.default.gamePlugins||g.default.plugins||{}).forEach((function(e){var t=(g.default.gamePlugins||g.default.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(l=!0)}))),k.set(this,l),this.promise=new v.WxPromise((function(e,t){r.resolve=e,r.reject=t}));var d=function(){F.call(r)?A[o].taskQueue.push({id:u,item:r}):R.call(r)};Object(f.isFunction)(t.customCheck)?t.customCheck(t,(function(e){e?x(o,t,e):d()})):d()}return Object(s.default)(e,[{key:"abort",value:function(){var e=this;if(D.info("["+S.get(this)+"]["+y.get(this)+"]abort()"),"waiting"===w.get(this)){D.info("["+S.get(this)+"]["+y.get(this)+"] waiting=true");var t=A[S.get(this)].taskQueue.findIndex((function(t){return t.id===y.get(e)}));t>-1&&(A[S.get(this)].taskQueue.splice(t,1),Object(c.beforeInvokeFail)(A[S.get(this)].functionName,O.get(this),"abort")),w.set(this,"done")}else this.promise.then((function(){var t;Object(c.invokeMethod)("operate"+S.get(e)+"Task",(t={},Object(i.default)(t,S.get(e).toLowerCase()+"TaskId",m.get(e)),Object(i.default)(t,"operationType","abort"),t))}))}},{key:"onProgressUpdate",value:function(e){var t=this;this.promise.then((function(){P.on(""+S.get(t)+m.get(t)+"progressUpdate",e)}))}},{key:"offProgressUpdate",value:function(e){var t=this;this.promise.then((function(){P.off(""+S.get(t)+m.get(t)+"progressUpdate",e)}))}},{key:"onHeadersReceived",value:function(e){var t=this;this.promise.then((function(){P.on(""+S.get(t)+m.get(t)+"headersReceived",e)}))}},{key:"offHeadersReceived",value:function(e){var t=this;this.promise.then((function(){P.off(""+S.get(t)+m.get(t)+"headersReceived",e)}))}}]),e}();function x(e,t,n){Object(c.beforeInvokeCallback)({name:A[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function R(){var e=this,t=O.get(this),n=S.get(this),r=k.get(this);w.set(this,"sending"),I.set(this,Date.now());var o=M.call(this);r?this.promise.then((function(){N.call(e)})).catch((function(e){x(n,t,e)})):o?x(n,t,o):N.call(this)}function M(){var e,t=this,n=S.get(this),r=O.get(this);A[n].currentTaskCount++;var o={data:r.data,url:r.url,header:r.header,method:r.method,timeout:Object(f.isNumber)(r.timeout)?r.timeout:0,enableHttp2:!!Object(f.isBoolean)(r.enableHttp2)&&r.enableHttp2,enableQuic:!!Object(f.isBoolean)(r.enableQuic)&&r.enableQuic,enableCache:!!Object(f.isBoolean)(r.enableCache)&&r.enableCache,enableProfile:!Object(f.isBoolean)(r.enableProfile)||r.enableProfile,__skipDomainCheck__:r.__skipDomainCheck__,success:function(e){var r=e[n.toLowerCase()+"TaskId"];m.set(t,r),A[n].taskIdMap[r]=t,t.resolve()},fail:function(o){A[n].currentTaskCount--;var i=o[n.toLowerCase()+"TaskId"];e=o.errMsg,L.call(t,{taskType:n,options:r,errMsg:e,success:!1}),t.reject(e),D.error("["+n+"][createTask][Fail] taskId="+i)},complete:function(){w.set(t,"done")}},i=k.get(this),a="create"+n+"Task"+(i?"Async":"");return Object(c.invokeMethod)(a,E.get(this)(o)),e}function N(){var e=this,t=m.get(this),n=O.get(this),r=S.get(this),o=A[r].functionName;P.on(""+r+t+"success",(function(t){C.get(e).call(e,t),Object(c.beforeInvokeCallback)({name:o,args:{success:n.success,fail:n.fail,complete:n.complete},res:t})})),P.on(""+r+t+"fail",(function(t){var r=T.get(e);r&&r.call(e,t),Object(c.beforeInvokeCallback)({name:o,args:{success:n.success,fail:n.fail,complete:n.complete},success:!1,errMsg:t.errMsg})}))}function L(e){var t=e.taskType,n=e.options,r=e.errMsg,o=e.success,i=void 0===o||o,a=e.dataLength,s=void 0===a?0:a,c=e.statusCode,l=void 0===c?"":c,d=e.responseDataLength,f=void 0===d?0:d,p=e.profile,h=void 0===p?{}:p,v=n.url,g=i?1:2,_=Date.now()-I.get(this),b=n.__skipDomainCheck__;_>=6e4&&D.error("reportTask costTime too long: "+_+"ms, taskId="+m.get(this)),Object(u.reportNetworkAPI)(A[t].functionName,v,g,_,r,l,b,s,f,h)}function B(e,t){var n,i=t.toLowerCase()+"TaskId",a=e[i],s=e.state,c=e.header;if(delete e.state,delete e[i],e.cookies=c&&(n=c["Set-Cookie"]||c["set-cookie"])?Array.isArray(n)?n:n.split(",").reduce((function(e,t){return/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e}),[]).map((function(e){return e.trim()})):[],P.emit(""+t+a+s,e),"success"===s||"fail"===s){var u=A[t].taskIdMap[a],l=O.get(u);if(!u)return;A[t].currentTaskCount-=1,A[t].taskQueue.length>0&&R.call(A[t].taskQueue.shift().item);var f=Promise.resolve(Object(d.getDataLength)(l.data));if("Upload"===t){var p=0;"object"===Object(o.default)(l.formData)&&null!==l.formData&&(p=JSON.stringify(l.formData).length),f=_({path:l.filePath}).then((function(e){return p+e.stats.size})).catch((function(){return p}))}var h=Promise.resolve(Object(d.getDataLength)(e.data));if("Download"===t){var v=e.dataLength;h="number"==typeof v?Promise.resolve(v):_({path:e.filePath||e.tempFilePath||""}).then((function(e){return e.stats.size})).catch((function(){return 0}))}Promise.all([f,h]).then((function(n){var o=Object(r.default)(n,2),i=o[0],a=o[1];L.call(u,{taskType:t,options:l,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===s,dataLength:i,responseDataLength:a,profile:e.profile})})),W.call(u)}}function F(){var e=S.get(this);return A[e].currentTaskCount>=A[e].maxTaskCount}function W(){var e=S.get(this),t=m.get(this);delete A[e].taskIdMap[t],P.removeAllListeners(""+e+t+"success"),P.removeAllListeners(""+e+t+"fail"),P.removeAllListeners(""+e+t+"complete")}function U(e,t){var n=this,r=A[e]?A[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};Object(c.onMethod)("on"+e+"TaskStateChange",(function(t){B.call(n,t,e)})),A[e]=Object.assign(r,t)}},function(e,t,n){n.r(t),n.d(t,"createVideoContext",(function(){return V})),n.d(t,"createSQVideoContext",(function(){return G})),n.d(t,"VideoContext",(function(){return N})),n.d(t,"getVideoElementByContext",(function(){return U})),n.d(t,"playerInfo",(function(){return D})),n.d(t,"pipInfo",(function(){return S}));var r=n(14),o=n(19),i=n(8),a=n(16),s=n(5),c=n(4),u=n(33),l=n(0),d=n(6),f=n(69),p=n(43),h=n(3),v=n(1),g=n(2);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.default)(e);if(t){var a=Object(i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=g.IS_DEVTOOLS||g.IS_WINDOWS||g.IS_MAC||g.IS_MINA,w={},O={},S={},I=new u.EventEmitter2,E={},C=new WeakMap,T={},k={},A=["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback","hidePoster"],P={},D={},j=v.default.useXWebVideo,x=!0,R=Object.keys;function M(e){E[e]||(E[e]=!0,Object(p.onBeforeUnloadPage)(e,(function(e){delete E[e],R(w).concat(R(O)).forEach((function(t){new RegExp("^"+e).test(t)&&delete w[t]})),R(T).forEach((function(t){(new RegExp("^api_"+e).test(t)||new RegExp("^SQ_"+e).test(t))&&delete T[t]})),g.IS_MINA&&Object(l.invokeMethod)("setKeepScreenOn",{keepScreenOn:!1},{})})))}Object(l.subscribe)("updateVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;S.webviewId=t,S.playerId=e.playerId})),Object(l.subscribe)("videoAdPlay",(function(e,t){var n=e.videoPlayerId,r=e.type;k[t+"_"+n]=r})),Object(l.subscribe)("videoPlayerInsert",(function(e,t){var n=e.domId,r=e.videoPlayerId,o=e.pluginId,i=e.nodeId,a=e.nodeInfo,s=e.data,c=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(c+=i),w[c]=r,function(e,t,n){if(!g.IS_DEVTOOLS)return;var r=document.createElement("video");e.elem=r,O[n+"_"+t]=e,r.controls=!1,r.preload="auto",r.muted=!0,r.autoplay=e.autoplay,r.style.width=e.width+"px",r.style.height=e.height+"px"}(a,r,t),I.emit("videoPlayerInsert"),M(t),D[t+"_"+r]=s||{}})),Object(l.subscribe)("xWebVideoInserted",(function(e,t){var n=e.domId,r=e.viewId,o=e.pluginId,i=e.nodeId,a=e.data,s=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(s+=i),w[s]=r,D[t+"_"+r]=a||{},I.emit("videoPlayerInsert"),M(t)})),Object(l.subscribe)("videoPlayerUpdated",(function(e,t){var n=e.action,r=e.value;W({_videoId:e.videoPlayerId,_webviewId:t},n,r)})),Object(l.subscribe)("videoPlayerRemoved",(function(e,t){var n=e.domId,r=e.videoPlayerId,o=e.pluginId,i=e.nodeId,a=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(a+=i),delete w[a],function(e,t){delete O[t+"_"+e]}(r,t);var s="api_"+t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(s+=i);var c="SQ_"+t+"_"+r;delete T[s],delete T[c],delete D[t+"_"+r]})),Object(l.subscribe)("xWebVideoRemoved",(function(e,t){var n=e.domId,r=e.pluginId,o=e.nodeId,i=t+"_"+r+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(i+=o);var a=w[i];delete w[i],delete D[t+"_"+a]})),Object(l.subscribe)("xWebVideoSupported",(function(e){var t=e.isXWebSupported;j=j&&t})),Object(l.subscribe)("insertVideoToWebLayerStateChanged",(function(e,t){var n=e.viewId,r=e.inserted;P[t+"_"+n]=r})),v.default.onReady((function(){v.default.global&&v.default.global.window&&"seperated"===v.default.global.window.renderingMode&&(x=!1,j=!1)}));var N=function e(){Object(c.default)(this,e)},L=function(){function e(t,n){var r=this;Object(c.default)(this,e);var o=this.exportContext=new N;A.forEach((function(e){o[e]=r[e].bind(r)})),o._videoId=t,o._webviewId=n}return Object(s.default)(e,[{key:"play",value:function(){var e=this._getAppStatus();e===f.AppStatus.BACK_GROUND||e===f.AppStatus.LOCK||this._invokeMethod("play")}},{key:"pause",value:function(){this._invokeMethod("pause")}},{key:"stop",value:function(){this._invokeMethod("stop")}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accurate";if("accurate"!==t&&"inaccurate"!==t)throw new d.ThirdScriptError("Parameter 2 must either be `accurate` or be `inaccurate`");this._invokeMethod("seek",[e,t])}},{key:"sendDanmu",value:function(e){var t=e.text,n=e.color;this._invokeMethod("sendDanmu",[t,n])}},{key:"playbackRate",value:function(e){.5!==(e=parseFloat(e.toFixed(2)))&&.8!==e&&1!==e&&1.25!==e&&1.5!==e&&2!==e||this._invokeMethod("playbackRate",[e])}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction;[0,90,-90].indexOf(t)>-1?this._invokeMethod("requestFullScreen",[t]):this._invokeMethod("requestFullScreen"),C.set(this,!0)}},{key:"exitFullScreen",value:function(){this._invokeMethod("exitFullScreen"),this.showStatusBar(),C.set(this,!1)}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.invokeMethod)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g.IS_ANDROID){var t="hideStatusBar:ok";return"function"==typeof e.success&&e.success({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}if(!C.get(this)){var n="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:n}),void("function"==typeof e.complete&&e.complete({errMsg:n}))}Object(l.invokeMethod)("hideStatusBar",e)}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(S){var t=S.playerId;g.IS_IOS?Object(l.invokeMethod)("operateVideoPlayer",y(y({},e),{},{videoPlayerId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateVideoPlayer","exitPictureInPicture")}}):g.IS_ANDROID&&Object(l.invokeMethod)("operateXWebVideo",y(y({},e),{},{viewId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebVideo","exitPictureInPicture")}})}}},{key:"requestBackgroundPlayback",value:function(){this._invokeMethod("requestBackgroundPlayback",[])}},{key:"exitBackgroundPlayback",value:function(){this._invokeMethod("exitBackgroundPlayback",[])}},{key:"hidePoster",value:function(){this._invokeMethod("hidePoster")}},{key:"_invokeMethodWithId",value:function(e,t,n){var r=this;"number"==typeof e?function(){if("begin"!==k[this.webviewId+"_"+e])if(x&&(g.IS_ANDROID&&j||g.IS_IOS&&P[this.webviewId+"_"+e])&&["requestFullScreen","exitFullScreen","sendDanmu","seek","stop","play"].indexOf(t)>-1)Object(l.publish)("video_"+this.webviewId+"_"+e+"_actionChanged",{method:t,data:n},[this.webviewId]);else{var r=this._getAppStatus();if(!m&&r===f.AppStatus.BACK_GROUND&&"stop"===t){var o="operateVideoPlayerBackground";return g.IS_ANDROID&&j&&(o="operateXWebVideoBackground"),void Object(l.invokeMethod)(o,{viewId:e,videoPlayerId:e,type:t})}m?(this._sendAction(e,{method:t,data:n}),["play","pause","stop","seek","playbackRate"].indexOf(t)>-1&&W(this.exportContext,t,n&&n[0])):g.IS_ANDROID&&j?Object(l.invokeMethod)("operateXWebVideo",{viewId:e,type:t,data:n}):Object(l.invokeMethod)("operateVideoPlayer",{data:n,videoPlayerId:e,type:t})}else console.error(t+":fail cannot operate video while ad playing.")}.apply(this):I.once("videoPlayerInsert",(function(){r._invokeMethod(t,n)}))}},{key:"_sendActionWithEvnetName",value:function(e,t){Object(l.publish)(e,t,[this.webviewId])}},{key:"_getAppStatus",value:function(){return h.default.appStatus}},{key:"_getHanged",value:function(){return h.default.hanged}}]),e}(),B=function(e){Object(r.default)(n,e);var t=_(n);function n(e,r,o,i){var a;if(Object(c.default)(this,n),a=t.call(this),"string"!=typeof e)throw new d.ThirdScriptError("Parameter 1 should be a string");return a.domId=e,a.webviewId=r,a.pluginId=i,a.nodeId=o,a}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,r=w[n];this._invokeMethodWithId(r,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L),F=function(e){Object(r.default)(n,e);var t=_(n);function n(e,r){var o;return Object(c.default)(this,n),(o=t.call(this,e,r)).videoPlayerId=e,o.webviewId=r,o}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.videoPlayerId;this._invokeMethodWithId(n,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L);function W(e,t,n){if(g.IS_DEVTOOLS&&void 0!==e._webviewId){var r=O[e._webviewId+"_"+e._videoId].elem;switch(t){case"setSrc":r.src=n;break;case"play":r.play();break;case"pause":case"stop":r.pause();break;case"seek":0===r.readyState||1===r.readyState?r.oncanplay=function(){r.currentTime=n,r.oncanplay=null}:r.currentTime=n;break;case"playbackRate":r.playbackRate=n}}}function U(e){return O[e._webviewId+"_"+e._videoId].elem}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="api_"+t+"_"+r+"_"+e+"_";if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(o+=n),T[o])return T[o].exportContext;var i=new B(e,t,n,r);return T[o]=i,i.exportContext}function G(e,t){var n="SQ_"+t+"_"+e;if(T[n])return T[n].exportContext;var r=new F(e,t);return T[n]=r,r.exportContext}},function(e,t,n){var r;n.r(t),n.d(t,"CUSTOM_EVENT",(function(){return r})),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(r||(r={}))},function(e,t,n){n.r(t),n.d(t,"emitSplashAdFetch",(function(){return i})),n.d(t,"onEmitSplashAdFetch",(function(){return a})),n.d(t,"onShouldShowSplashAd",(function(){return s})),n.d(t,"onSplashAdShow",(function(){return c})),n.d(t,"onSplashAdHide",(function(){return u})),n.d(t,"onSplashAdClose",(function(){return l})),n.d(t,"onSplashAdWillLayout",(function(){return d})),n.d(t,"onSplashAdButtonClicked",(function(){return f}));var r=n(0),o=new(n(11).EventEmitter),i=function(){o.emit("_onEmitSplashAdFetch")},a=function(e){"function"==typeof e&&o.on("_onEmitSplashAdFetch",e)};function s(e){Object(r.onMethod)("shouldShowSplashAd",e)}function c(e){Object(r.onMethod)("onSplashAdShow",e)}function u(e){Object(r.onMethod)("onSplashAdHide",e)}function l(e){Object(r.onMethod)("onSplashAdClose",e)}function d(e){Object(r.onMethod)("onSplashAdWillLayout",e)}function f(e){Object(r.onMethod)("onSplashAdButtonClicked",e)}},function(e,t,n){n.r(t),n.d(t,"getBanRuleIndexByPath",(function(){return y})),n.d(t,"getBanRuleIndexForPage",(function(){return m})),n.d(t,"needReport",(function(){return g})),n.d(t,"banAPISet",(function(){return _})),n.d(t,"ruleList",(function(){return b})),n.d(t,"checkAPIAvailableForCurrentPage",(function(){return O})),n.d(t,"reportAPIBanForPage",(function(){return S})),n.d(t,"ReportCheckScene",(function(){return h})),n.d(t,"ReportBlockStatus",(function(){return p}));var r=n(31),o=n(1),i=n(10),a=n(3),s=n(0),c=n(36),u=n(2),l=0,d=1,f=2,p={OK:1,BLOCK:2,NO_BLOCK:3},h={NAVIGATE_TO:1,SWITCH_TAB:2,REDIRECT_TO:3,API:4,RE_LAUNCH:5},v=wxNativeConsole.createLogger("BanForPage"),g=!1,_=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),b=[];function y(e){if(!e)return-1;var t=-1;try{t=b.findIndex((function(t){return Object(i.isString)(t.path_rule)&&new RegExp(t.path_rule).test(e)}))}catch(e){v.log("[getBanRuleIndexByPath] error: "+e.message)}return v.log('[getBanRuleIndexByPath] path="'+e+'", index='+t),t}function m(e,t,n){for(var r=-1,o=0;o<b.length;o++){var a=b[o];if((!Object(i.isString)(a.path_rule)||!a.path_rule||new RegExp(a.path_rule).test(t))&&(!Object(i.isString)(a.title_rule)||!a.title_rule||new RegExp(a.title_rule).test(n))){r=o;break}}return v.log("[getBanRuleIndexForPage] banRuleIndex="+r),r}function w(e,t,n){v.log("[checkAPIAvailableForPage] APIName="+e+", path="+t+", title="+n);var r=m(0,t,n);if(-1===r)return S(e,p.OK,h.API,e),!0;var o=b[r];return v.log("[checkAPIAvailableForPage], found rule:",o),function(e,t){var n,r,o=e.ban_jsapi_list.find((function(e){return e.jsapi_name===t}));if(!o)return v.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;if(v.log("[checkAPIAvailableForPageByRule], found APIItem:",o),o.state===l)n=!1;else if(o.state===d)n=!0;else if(o.state===f&&(n=!0,1===e.is_valid)){var i=o.toast_wording||"该功能暂时无法使用";Object(s._invokeMethod)("showToast",{title:i,icon:"none"})}return r=n?e.is_valid?p.BLOCK:p.NO_BLOCK:p.OK,S(t,r,h.API,t),1!==e.is_valid||!n}(o,e)}function O(e){var t=Object.keys(a.default.query).reduce((function(e,t){return[].concat(Object(r.default)(e),[t+"="+a.default.query[t]])}),[]).join("&"),n=a.default.lastRoute+(t?"?"+t:""),o=a.default.navigationBarTitleMap[a.default.lastRoute]||"";return v.log("[checkAPIAvailableForCurrentPage] APIName="+e+", path="+n+", title="+o),w(e,n,o)}function S(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(v.log("[reportAPIBanForPage] APIName="+e+", blockType="+t+", checkScene="+n+", extraInfo="+r+", needReport="+g),g){var s=o.default.appLaunchInfo,u=Object.keys(a.default.query).map((function(e){return e+"="+a.default.query[e]})).join("&"),l={session_id:s.sessionid||s.sessionId,cur_path:a.default.lastRoute+(u?"?"+u:""),title:a.default.navigationBarTitleMap[a.default.lastRoute],check_scene:n,block_status:t,extra_info:r,launch_scene:s.scene,launch_path:s.path,target_path:i};v.log("[reportAPIBanForPage], reqData:",l),Object(c._operateWXData)({reqData:l,apiName:"webapi_reportnvgcheckinfo",complete:function(e){v.log("[reportAPIBanForPage], res.errMsg="+e.errMsg)}})}}o.default.onReady((function(){if(!u.IS_DEVTOOLS)try{var e=o.default.appContactInfo.operationInfo.jsonInfo.navigate_ban_info,t=e.do_report,n=e.navigate_ban_rule_list;b=n,g=1===t,_=new Set(n.reduce((function(e,t){return[].concat(Object(r.default)(e),Object(r.default)(t.ban_jsapi_list))}),_)),v.log("[BanForPage][init] needReport="+g),v.log("[BanForPage][init] ruleList:",b),v.log("[BanForPage][init] banAPISet:",_)}catch(e){v.error("[BanForPage][init] fail, errMsg="+e.message)}}))},function(e,t,n){n.r(t),n.d(t,"reportRecycledAPI",(function(){return o}));var r=n(3),o=function(e){var t,n=e.name,o=e.scene,i=e.strategy,a=e.timeDiffToLastTap,s=void 0===a?0:a;void 0!==__appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===r.default.currentWebviewId}))||{});var c=[n,o,Reporter.getAppType(),t?t.route:"",i||0,s].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:c})}},function(e,t,n){n.r(t),n.d(t,"onWxAdUserCaptureScreen",(function(){return O})),n.d(t,"reportShareAppMessage",(function(){return S})),n.d(t,"onWeappTouchEvent",(function(){return C})),n.d(t,"offWeappTouchEvent",(function(){return T})),n.d(t,"onceWeappTouchEvent",(function(){return k}));var r=n(168),o=n(1),i=n(126),a=n(145),s=n(0),c=n(49),u=n(11),l=n(43),d=n(36),f=n(18),p=n(100),h=Object(f.promisify)(Object(d.constructOperateWXData)(!1,"advertReport")),v="",g=0,_="index.html",b=new u.EventEmitter,y="_onWxAdUserCaptureScreen",m={shareAppMessage:0,shareTimeline:3};o.default.onReady((function(){v=Object(i.getAdUxInfo)()}));var w={};try{Object(c.onAppRoute)((function(e){g=e.webviewId,w[g]||(w[g]=!0,_=e.path,Object(l.onBeforeUnloadPage)(g,(function(e){E(e)})))}))}catch(e){}Object(r._onUserCaptureScreen)((function(){var e=+new Date;v&&Object(a.reportUserCaptureScreen)({eventTimeStamp:e,scene:7,uxinfo:v,url:_}),g&&Object(s.publish)(y,{eventTimeStamp:e,path:_},[g]),b.emit(y,{eventTimeStamp:e,webviewId:g,path:_})}));var O=function(e){"function"==typeof e&&b.on("_onWxAdUserCaptureScreen",e)},S=function(e,t){if(v){var n="",r=m[e]?m[e]:0;"shareAppMessage"===e&&t.shareInfos&&(r=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===r&&"shareAppMessage"===e&&t.shareTickets&&(r=t.shareTickets.length>0?2:1),Object(a.reportLandingPageShare)({eventTimeStamp:+new Date,shareType:r,tousername:n,uxinfo:v,url:_})}},I={};Object(s.subscribe)("wxAdDelayReport",(function(e,t){I[t]||(I[t]={}),e.key&&e.value&&(I[t][e.key]=e.value)}));var E=function(e){if(I[e]){for(var t in I[e]){var n=I[e][t];h({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((function(e){}))}delete I[e]}};Object(s.subscribe)("checkWxAdFetchLog",(function(e){Object(p.handleSplashAdFetchLog)(e)})),Object(s.subscribe)("weappTouchEvent",(function(e){b.emit("_onWeappTouchEvent",e)}));var C=function(e,t){if("function"==typeof e){var n=function(n){e(n,t)};return b.on("_onWeappTouchEvent",n),n}return null},T=function(e){b.off("_onWeappTouchEvent",e)},k=function(e,t){var n=!1;if("function"==typeof e){var r=function(r){!n&&e(r,t),n=!0};return b.on("_onWeappTouchEvent",r),r}return null}},function(e,t,n){n.r(t),n.d(t,"_fs",(function(){return P})),n.d(t,"getOpenDataDir",(function(){return L}));var r,o=n(31),i=n(111),a=n(176),s=n(140),c=n(0),u=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"],l=n(58),d=n(1),f=n(2),p=f.IS_DEVTOOLS?"http://":"wxfile://",h=[],v=!1;f.IS_IOS?r=new RegExp("^"+p+"tmp_"):f.IS_ANDROID&&(r=new RegExp("^tmp_")),d.default.onReady((function(){f.IS_ANDROID||f.IS_IOS?Object(c.invokeMethod)("readdir",{dirPath:p,success:function(e){var t=e.files||[];h=t.filter((function(e){return r.test(e)})),v=!0}}):v=!0}));var g=function(e,t){if(/^wxfile:\/\/(tmp\/?)?$/.test(t)){var n=l.FakeTempFilePathMap.get();e.files=e.files.filter((function(e){return new RegExp("^"+t).test(e)||(e=""+t+e),-1===n.indexOf(e)})).filter((function(e){return v?-1===h.indexOf(e):!r.test(e)}))}};var _=n(4),b=n(5),y=function(){function e(t){var n=t.mode,r=t.size,o=t.lastAccessedTime,i=t.lastModifiedTime;Object(_.default)(this,e),this.mode=n,this.size=r,this.lastAccessedTime=o,this.lastModifiedTime=i}return Object(b.default)(e,[{key:"_checkModeProperty",value:function(e){return(61440&this.mode)===e}},{key:"isDirectory",value:function(){return this._checkModeProperty(16384)}},{key:"isFile",value:function(){return this._checkModeProperty(32768)}}]),e}(),m=function(e,t){var n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((function(t){n=n&&void 0!==e[t]})),n)e.stats=new y(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new y(e.stats[""]);else{var r=[],o=e.stats;f.IS_ANDROID&&(o=e,r.push({path:"/",stats:w(t)})),Object.keys(o).forEach((function(e){if("errMsg"!==e){var t=o[e];""===e&&(e="/"),r.push({path:e,stats:new y(t)}),delete o[e]}})),e.stats=r}},w=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("path must be a string");if(Object(c.invokeMethod)("statSync",{path:e,recursive:r,success:function(n){m(n,e),t=n.stats},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t},O=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"],S=n(6),I=n(10),E=n(16),C=n(55);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=n(11),P={saveFile:i.saveFile,saveFileSync:i.saveFileSync,getSavedFileList:i.getSavedFileList,getSavedFileInfo:i.getSavedFileInfo,removeSavedFile:i.removeSavedFile,getFileInfo:a.getFileInfo,readFile:s.readFile,readFileSync:s.readFileSync,writeFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("writeFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("writeFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("writeFile",e,{}))},writeFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var r;if(Object(c.invokeMethod)("writeFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},mkdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("mkdir",e,{dirPath:""})&&Object(c.invokeMethod)("mkdir",e)},mkdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");if(Object(c.invokeMethod)("mkdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},rmdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rmdir",e,{dirPath:""})&&Object(c.invokeMethod)("rmdir",e)},rmdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");if(Object(c.invokeMethod)("rmdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},readdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("readdir",e,{dirPath:""})&&Object(c.invokeMethod)("readdir",e,{beforeSuccess:function(t){g(t,e.dirPath)}})},readdirSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var t,n;if(Object(c.invokeMethod)("readdirSync",{dirPath:e,success:function(e){t=e.files},fail:function(e){n=e.errMsg}},{beforeSuccess:function(t){g(t,e)}}),n)throw new Error(n);return t},access:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("access",e,{path:""})&&Object(c.invokeMethod)("access",e)},accessSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("path must be a string");var t;if(Object(c.invokeMethod)("accessSync",{path:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},unlink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("unlink",e,{filePath:""})&&Object(c.invokeMethod)("unlink",e)},unlinkSync:function(e){if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var t;if(Object(c.invokeMethod)("unlinkSync",{filePath:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},stat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("stat",e,{path:""})&&Object(c.invokeMethod)("stat",e,{beforeSuccess:function(t){m(t,e.path)}})},statSync:w,unzip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("unzip",e,{zipFilePath:""})&&Object(c.invokeMethod)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("copyFile",e,{srcPath:"",destPath:""})&&Object(c.invokeMethod)("fs_copyFile",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},copyFileSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");var n;if(Object(c.invokeMethod)("fs_copyFileSync",{srcPath:e,destPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},rename:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rename",e,{oldPath:"",newPath:""})&&Object(c.invokeMethod)("fs_rename",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");var n;if(Object(c.invokeMethod)("fs_renameSync",{oldPath:e,newPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("appendFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("appendFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("fs_appendFile",e,{}))},appendFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var r;if(Object(c.invokeMethod)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail:function(e){r=e.errMsg}}),r)throw new Error(r)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);Object(c.beforeInvoke)("open",e,{filePath:""})&&(void 0===e.flag||O.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),Object(c.invokeMethod)("open",t)):Object(c.beforeInvokeFail)("open",e,'invalid flag "'+e.flag+'"'))},openSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.filePath,o=n.flag;if(!r||"string"!=typeof r)throw new TypeError("filePath must be a string");if(void 0!==o&&!O.includes(o))throw new S.ThirdScriptError("invalid flag: "+o);if(void 0===o&&(o="r"),Object(c.invokeMethod)("openSync",{filePath:r,flag:o,fail:function(e){t=e.errMsg},success:function(t){e=t.fd}}),t)throw new Error(t);return e},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("close",e,{fd:""})&&Object(c.invokeMethod)("close",e)},closeSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd;if(!n||"string"!=typeof n)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("closeSync",{fd:n,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},fstat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("fstat",e,{fd:""})&&Object(c.invokeMethod)("fstat",e,{beforeSuccess:function(e){var t=e.mode,n=e.size,r=e.lastAccessedTime,o=e.lastModifiedTime;r>1617e9&&(r=Math.floor(r/1e3)),o>1617e9&&(o=Math.floor(o/1e3)),e.stats=new y({mode:t,size:n,lastAccessedTime:r,lastModifiedTime:o}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("fstatSync",{fd:r,fail:function(e){t=e.errMsg},success:function(t){var n=t.mode,r=t.size,o=t.lastAccessedTime,i=t.lastModifiedTime;o>1617e9&&(o=Math.floor(o/1e3)),i>1617e9&&(i=Math.floor(i/1e3)),e=new y({mode:n,size:r,lastAccessedTime:o,lastModifiedTime:i})}}),t)throw new Error(t);return e},write:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if(Object(c.beforeInvoke)("write",t,{fd:""}))if(t.encoding&&-1===u.indexOf(t.encoding))Object(c.beforeInvokeFail)("write",t,'invalid encoding "'+t.encoding+'"');else{if(Object(I.isArrayBuffer)(t.data)){if(t.data.byteLength>10485760)return void Object(c.beforeInvokeFail)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!Object(I.isString)(t.data))return void Object(c.beforeInvokeFail)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),Object(c.invokeMethod)("write",t)}},writeSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.fd,o=n.data,i=n.offset,a=n.length,s=n.encoding,l=n.position;if(!r||"string"!=typeof r)throw new TypeError("fd must be a string");if(s&&-1===u.indexOf(s))throw new S.ThirdScriptError('invalid encoding "'+s+'"');if(Object(I.isArrayBuffer)(o)){if(o.byteLength>10485760)throw new S.ThirdScriptError("ArrayBuffer exceed size limit (10M)");("number"!=typeof i||i<0)&&(i=0),("number"!=typeof a||a<0)&&(a=o.byteLength-i)}else if(!Object(I.isString)(o))throw new TypeError("data must be a string or ArrayBuffer");if("number"!=typeof l&&(l=void 0),Object(c.invokeMethod)("writeSync",{fd:r,data:o,offset:i,length:a,encoding:s,position:l,fail:function(t){e=t.errMsg},success:function(e){t={bytesWritten:e.bytesWritten}}}),e)throw new Error(e);return t},read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.beforeInvoke)("read",e,{fd:""}))if(Object(I.isArrayBuffer)(e.arrayBuffer)){var t=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(t.arrayBufferId=C.default.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),Object(I.isNumber)(t.position)&&t.position<0?t.position=0:Object(I.isUndefined)(t.position)||Object(I.isNull)(t.position)?t.position=null:Object(I.isNumber)(t.position)||(t.position=0);var n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;var r=Number(t.offset);Number.isNaN(r)?t.offset=0:t.offset=r,Object(c.invokeMethod)("read",t,{beforeSuccess:function(t){t.arrayBuffer=e.arrayBuffer},afterAll:function(){f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(t.arrayBufferId)}})}else Object(c.beforeInvokeFail)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer")},readSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fd,n=e.arrayBuffer;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!Object(I.isArrayBuffer)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");var r=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(r.arrayBufferId=C.default.trace(r.arrayBuffer,"rw"),delete r.arrayBuffer),Object(I.isNumber)(r.position)&&r.position<0?r.position=0:Object(I.isUndefined)(r.position)||Object(I.isNull)(r.position)?r.position=null:Object(I.isNumber)(r.position)||(r.position=0);var o=Number(r.length);Number.isNaN(o)?r.length=0:r.length=o;var i,a,s=Number(r.offset);if(Number.isNaN(s)?r.offset=0:r.offset=s,Object(c.invokeMethod)("readSync",k(k({},r),{},{fail:function(e){a=e.errMsg},success:function(e){i={bytesRead:e.bytesRead,arrayBuffer:n}}})),f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(r.arrayBufferId),a)throw new Error(a);return i},truncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("truncate",e,{}))},truncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filePath,r=t.length;if(!n||"string"!=typeof n)throw new Error("filePath must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),Object(c.invokeMethod)("truncateSync",{filePath:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},ftruncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("ftruncate",e))},ftruncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd,r=t.length;if(!n||"string"!=typeof n)throw new Error("fd must be a string");if("number"!=typeof r&&(r=0),(r=Math.floor(r))<0&&(r=0),Object(c.invokeMethod)("ftruncateSync",{fd:n,length:r,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}},D="",j="";d.default.onReady((function(){try{D=d.default.env.USER_DATA_PATH,j=d.default.env.OPEN_DATA_PATH,delete d.default.env.OPEN_DATA_PATH}catch(e){}}));var x={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},R=function(e){"string"==typeof e&&e.startsWith(D+"/__plugins__")&&Reporter.reportKeyValue({key:"Error",value:[1,"FrameworkError","Warning: MiniProgram is using reserved plugin path",e,__libVersionInfo__.version,0,"","",__libVersionInfo__.updateTime,"",0,"",0].map(encodeURIComponent).join(",")})},M=function(e,t){return"string"!=typeof e||!e.startsWith("wxfile://ad")&&((!Object(A.isSinglePageMode)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?D:j))},N=function(e){var t={};return Object.keys(P).forEach((function(n){var r=P[n];t[n]=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];if(!x[n])return r.apply(void 0,Object(o.default)(i));x[n].forEach((function(e){var t=n.endsWith("Sync")?i:i[0];R(t[e])}));var s=x[n].every((function(t){var r=n.endsWith("Sync")?i:i[0];return M(r[t],e)}));if(s)return r.apply(void 0,Object(o.default)(i));if(n.endsWith("Sync"))throw new Error(n+":fail permission denied");i=i[0]||{},Object(c.beforeInvokeFail)(n,i,"permission denied")}})),t};t.default={app:N("app"),game:N("game"),opendata:N("opendata")};function L(){return j}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var r=n(128);function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return(i=o()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var i=new(Function.bind.apply(e,o));return n&&Object(r.default)(i,n.prototype),i}).apply(null,arguments)}},function(e,t,n){n.r(t),n.d(t,"getLocalPath",(function(){return o}));var r=n(81),o=function(e){if(e&&"string"==typeof e)if(/^\w+:\/\//.test(e)){if(!/^wxfile:\/\//.test(e)&&!/^http:\/\/tmp\//.test(e))throw new Error("invalid path")}else if(e)return Object(r._getRealRoute)(e,!1);return e}},function(e,t,n){n.r(t),n.d(t,"getRiskWarningFromStorage",(function(){return i})),n.d(t,"setRiskWarningToStorage",(function(){return a})),n.d(t,"getRequestPaymentFromStorage",(function(){return s})),n.d(t,"setRequestPaymentToStorage",(function(){return c}));var r=n(45),o=n(1);function i(e){var t=o.default.accountInfo&&o.default.accountInfo.appId||"noAppId";Object(r.invokeWebviewMethod)("getRiskWarningFromGlobalStorage",{appId:t},void 0,e)}function a(e,t){var n=o.default.accountInfo&&o.default.accountInfo.appId||"noAppId";e&&Object(r.invokeWebviewMethod)("setRiskWarningToGlobalStorage",{riskWarning:e,appId:n},void 0,t)}function s(e){var t=o.default.accountInfo&&o.default.accountInfo.appId||"noAppId";Object(r.invokeWebviewMethod)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}function c(e,t){var n=o.default.accountInfo&&o.default.accountInfo.appId||"noAppId";e&&Object(r.invokeWebviewMethod)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}},function(e,t,n){n.r(t),n.d(t,"UI_JSAPI",(function(){return o})),n.d(t,"webviewAnimation",(function(){return a})),n.d(t,"clearDelayedInvoke",(function(){return s})),n.d(t,"registerDelayedInvoke",(function(){return c}));var r=n(0),o=["startPullDownRefresh"],i=[],a={appRoute:!1,appRouteDone:!1},s=function(){i.forEach((function(e){var t=e.name,n=e.args,o=e.option;Object(r.mainInvokeMethod)(t,n,o)})),i=[]},c=function(e,t,n){var o=a.appRoute,s=a.appRouteDone;!o&&s?Object(r.mainInvokeMethod)(e,t,n):i.push({name:e,args:t,option:n})}},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return d})),n.d(t,"_getLaunchOptionsSync",(function(){return f})),n.d(t,"formatLaunchInfo",(function(){return p}));var r,o,i=n(20),a=n(21),s=n(1),c=n(37),u=n(142),l=a.share.ShareInfoStorage;s.default.onReady((function(){var e=p(s.default.appLaunchInfo||{});r=e.appLaunchInfo,o=e.publicLaunchInfo}));var d=function(){return o},f=function(){return r};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareInfo,n=e.scene,r=e.query||{};"object"===Object(i.default)(t)&&null!==t&&(e.shareTicket=l.set(t.shareKey,t.shareName),l.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(r=e.query={}),!1===e.reLaunch&&(r={}),Object(u.getLastOnHideMode)(),void 0===e.reLaunch&&"hide"===Object(u.getLastOnHideMode)()&&(r={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!Object(c.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008);var o={scene:n,query:r,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return s.default.debugLaunchInfo&&s.default.debugLaunchInfo.lanDebugInfo&&(o.lanDebugInfo=s.default.debugLaunchInfo.lanDebugInfo),{publicLaunchInfo:o,appLaunchInfo:e}}},function(e,t,n){n.r(t);var r,o=n(4),i=n(5),a=n(16),s={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3},c=(r={},Object(a.default)(r,s.AD_TYPE_BANNER,"BANNER"),Object(a.default)(r,s.AD_TYPE_PORTAL,"PORTAL"),Object(a.default)(r,s.AD_TYPE_ICON,"ICON"),{0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625}),u=n(2),l=n(11),d=c,f=null,p=function(){function e(){Object(o.default)(this,e)}return Object(i.default)(e,[{key:"getCharWidth",value:function(e,t){return(d[e]?d[e]:10)*t/10}},{key:"limitString",value:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}},{key:"getTextWidth",value:function(e,t){if(u.IS_ANDROID)return this.getTextWidthInAndroid(e,t);var n=function(){if(f)return f;if(Object(l.isGame)()){var e=new NativeGlobal.Canvas;e.width=1,e.height=1,f=e.getContext("2d")}else f=wx.createCanvasContext();return f}();return t&&(n.font=t+"px PingFangSC-Regular, SF Pro Display, SF Pro Text"),Math.ceil(n.measureText(e).width||0)+1}},{key:"getTextWidthInAndroid",value:function(e,t){var n=this;e=(e=String(e)).split("");var r=0;return e.forEach((function(e){var o=n.getCharWidth(e,t);r+=o})),r}},{key:"getMaxWordLength",value:function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(e=String(e)).split("");var o=0,i=0;r&&(n-=this.getTextWidth("...",t));for(var a=0;a<e.length;a++){var s=e[a],c=this.getCharWidth(s,t);if(o+c>n)break;i++,o+=c}return i}},{key:"textMetrics",value:function(e,t){for(var n=t.fontSize,r=t.maxWidth,o=t.maxLines,i=void 0===o?1:o,a=[],s=0,c=e.substring(0,e.length);s<i;){var u=this.getMaxWordLength(c,n,r,!(s!==i-1)),l=s===i-1?this.limitString(c,u):c.substring(0,u);l&&a.push({text:l,width:this.getTextWidth(l,n)}),s++,c=c.substring(u,c.length)}return a}}]),e}();t.default=new p},function(e,t,n){n.r(t),n.d(t,"saveAdDataToFile",(function(){return _})),n.d(t,"saveAdMaterialData",(function(){return b})),n.d(t,"removeOutdatedData",(function(){return g})),n.d(t,"handleSplashAdFetchLog",(function(){return m})),n.d(t,"bulkSaveMaterials",(function(){return y}));var r=n(20),o=n(64),i=n(40),a=n(17),s=n(2),c=n(89),u=n(11);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=6048e5,p=0,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.stat({path:e,recursive:!0,success:t,fail:n})}))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.unlink({filePath:e,success:t,fail:function(e){e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return Promise.resolve();var t=[];return h(e).then((function(n){var r,o=n.stats||[],i=+new Date,a=l(o);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(i-1e3*s.stats.lastAccessedTime>=f&&!["adinfos.txt","/"].includes(s.path)){var c=e+"/"+s.path;t.push(v(c))}}}catch(e){a.e(e)}finally{a.f()}return Promise.all(t)}))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?Object(u.isIn3rdApp)()?Promise.resolve():s.IS_ANDROID||s.IS_IOS?new Promise((function(n,r){i.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:r})})):Promise.resolve():Promise.resolve()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t)return new Promise((function(n,r){Object(o._downloadFileSkipCheckDomain)({url:e,filePath:t,success:n,fail:r})}))},y=function(e){return e&&0!==e.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.readdir({dirPath:e,success:t,fail:n})}))}(a.WX_AD_PATH).then((function(t){var n=t.files;e&&e.map((function(e){var t=e.url,r=e.filePath,o=e.fileName;return n.includes(o)?Promise.resolve():b(t,r)}))})):Promise.reject({errMsg:"无数据"})},m=function(e){if(e&&"object"===Object(r.default)(e)&&!(p>0)&&(p+=1,!Object(u.isIn3rdApp)()&&(s.IS_ANDROID||s.IS_IOS)&&e&&e.widget_gray_unlimit_fetch_tag)){var t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{i.fs.stat({path:a.SPLASHAD_FETCH_LOG,success:function(e){var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&Object(c.emitSplashAdFetch)()},fail:function(e){e.errMsg&&e.errMsg.indexOf("no such file")>-1&&_({},a.SPLASHAD_FETCH_LOG)}})}catch(e){}}}},function(e,t,n){n.r(t),function(e){n.d(t,"skiaCanvasInsert",(function(){return p})),n.d(t,"skiaCanvasRemove",(function(){return h})),n.d(t,"getOrCreateCanvas",(function(){return v})),n.d(t,"SkiaCanvas",(function(){return _}));var r=n(133),o=n(31),i=n(4),a=n(5),s=n(0),c=n(25),u=n(6),l=n(2),d={},f={};function p(e,t){var n=e.canvasId,r=e.viewId,o=e.canvasNumber,i=e.pluginId,a=e.position,s=e.nodeId,u=Object(c.concatId)(t,n,i,s),l=v(u);l.context&&(l=g(u)),l.context||l.init(o,a.width,a.height,r,t)}function h(e){var t=e.canvasId,n=e.pluginId,r=e.nodeId,o=e.viewId,i=e.webviewId,a=Object(c.concatId)(i,t,n,r);delete d[a],delete f[o]}function v(e){return d[e]?d[e]:g(e)}function g(e){var t=new _(e);return d[e]=t,t}l.IS_ANDROID&&Object(s.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),Object(s.subscribe)("skiaCanvasSizeChanged",(function(e,t){var n=e.canvasId,r=e.pluginId,o=e.nodeId,i=e.position,a=Object(c.concatId)(t,n,r,o),s=d[a];0===i.width&&0===i.height||!s||s.width===i.width&&s.height===i.height||(s.width=i.width,s.height=i.height,s.canvas&&s.context&&(s.canvas.width=i.width,s.canvas.height=i.height,s.needsReplay()&&s.replayActions()))}));var _=function(){function t(e){var n=this;Object(i.default)(this,t),this.id=e,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((function(e){n._resolveContext=e}))}return Object(a.default)(t,[{key:"init",value:function(t,n,r,o){this.width=n,this.height=r,l.IS_IOS&&(this.canvas=new e.Canvas(t),this.context=this.canvas.getContext("2d")),l.IS_ANDROID&&(this.canvasView=HTMLCanvasView.createView(o),f[o]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}},{key:"preloadImage",value:function(t){var n=this;t.forEach((function(t){var r="",o=t.method,i=t.data;"drawImage"===o?r=i[0]:"setFillStyle"===o&&"pattern"===i[0]&&(r=i[1]),r&&!n._images[r]&&(l.IS_IOS?(n._images[r]=new e.Image,n._images[r].onload=function(){n._images[r].ready=!0}):l.IS_ANDROID&&(n._images[r]=new SkiaImage,n._images[r].onload=function(){n._images[r].ready=!0}),n._images[r].setSrc(r))}))}},{key:"checkImageLoaded",value:function(e,t,n){var r=this,o=this._images[e];return o.ready?(n(o),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,o.onload=function(){o.ready=!0,n(o),r._actionsWaiting=!1;var e=r._actionsDefer.slice(0);r._actionsDefer=[];for(var t=e.shift();t;)r.draw(t[0],t[1],t[2],r._webviewId,r._nodeId,r._pluginId),t=e.shift()},!1)}},{key:"draw",value:function(e,t,n,r,o,i){var a=this;this._webviewId=r,this._nodeId=o,this._pluginId=i,this.context?this._draw(e,t,n,r,o,i):this._contextPromise.then((function(){return a._draw(e,t,n,r,o,i),null})).catch((function(){}))}},{key:"_draw",value:function(e,t,n,i,a,s){var c=this,u=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(u.fillStyle="#000000",u.strokeStyle="#000000",u.shadowColor="#000000",u.shadowBlur=0,u.shadowOffsetX=0,u.shadowOffsetY=0,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.width,this.height)),this.preloadImage(e,i,a,s),u.save();for(var d=function(t){var n=e[t],i=n.method,a=n.data;if(/^set/.test(i)&&"setTransform"!==i){var s=i[3].toLowerCase()+i.slice(4),l=void 0;if("fillStyle"===s||"strokeStyle"===s){if("normal"===a[0])l=a[1];else if("linear"===a[0])l=u.createLinearGradient.apply(u,Object(o.default)(a[1])),a[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}));else if("radial"===a[0]){var d=a[1][0],f=a[1][1],p=[d,f,0,d,f,a[1][2]];l=u.createRadialGradient.apply(u,p),a[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}))}else if("pattern"===a[0]){return c.checkImageLoaded(a[1],e.slice(t+1),(function(e){e&&(u[s]=u.createPattern(e,a[2]))}))?"continue":"break"}u[s]=l}else if("globalAlpha"===s)u[s]=a[0]/255;else if("shadow"===s){var h=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];a.forEach((function(e,t){u[h[t]]=e}))}else"fontSize"===s?u.font=u.font.replace(/\d+\.?\d*px/,a[0]+"px"):"lineDash"===s?(u.setLineDash(a[0]),u.lineDashOffset=a[1]||0):"textBaseline"===s?("normal"===a[0]&&(a[0]="alphabetic"),u[s]=a[0]):u[s]=a[0]}else if("fillPath"===i||"strokePath"===i)i=i.replace(/Path/,""),u.beginPath(),a.forEach((function(e){u[e.method].apply(u,Object(o.default)(e.data))})),u[i]();else if("fillText"===i){var v=Object(r.default)(a),g=v[0],_=v.slice(1);_&&_.map&&(_=_.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u.fillText.apply(u,[g].concat(Object(o.default)(_)))}else if("drawImage"===i){var b=Object(r.default)(a),y=b[0],m=b.slice(1);if(c._images=c._images||{},m&&m.map&&(m=m.map((function(e){return"string"==typeof e?parseFloat(e):e}))),!c.checkImageLoaded(y,e.slice(t+1),(function(e){e&&u.drawImage.apply(u,[e].concat(Object(o.default)(m.slice(4,8)),Object(o.default)(m.slice(0,4))))})))return"break"}else if("clip"===i)a.forEach((function(e){u[e.method].apply(u,Object(o.default)(e.data))})),u.clip();else if("arcTo"===i||"rotate"===i){var w=a;a&&a.map&&(w=a.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[i].apply(u,Object(o.default)(w))}else if("strokeText"===i){var O=Object(r.default)(a),S=O[0],I=O.slice(1);I&&I.map&&(I=I.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[i].apply(u,[S].concat(Object(o.default)(I)))}else u[i].apply(u,Object(o.default)(a))},f=0;f<e.length;f++){var p=d(f);if("break"===p)break}u.restore(),l.IS_ANDROID&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._getImageData(t):this._contextPromise.then((function(){return e._getImageData(t),null})).catch((function(){}))}},{key:"_getImageData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n=t||{},r=n.x,o=n.y,i=n.width,a=n.height;e=this.context.getImageData(r,o,i,a)}catch(e){return void Object(u.failWithMessage)(t,e)}if(e){var s={width:e.width,height:e.height,data:e.data};Object(u.successCallback)(t,s)}else Object(u.failWithMessage)("canvasGetImageData:fail")}},{key:"putImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._putImageData(t):this._contextPromise.then((function(){return e._putImageData(t),null})).catch((function(){}))}},{key:"_putImageData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n,r=t||{},o=r.x,i=r.y,a=r.width,s=r.height,c=r.data;l.IS_IOS?n=new e.ImageData(c,a,s):l.IS_ANDROID&&(n=new SkiaImageData(c,a,s)),l.IS_ANDROID&&this.canvasView.prepareDraw(),this.context.putImageData(n,o,i),l.IS_ANDROID&&this.canvasView.present()}catch(e){return void Object(u.failWithMessage)(t,e)}Object(u.successWithMessage)(t,"canvasPutImageData:ok")}},{key:"replayActions",value:function(){var e=this,t=function(){};this._actionsQueue.forEach((function(n){e.draw(n.actions,n.reserve,t,e._webviewId,e._nodeId,e._pluginId)}))}},{key:"needsReplay",value:function(){return this._actionsQueue.length>0}},{key:"_flushQueue",value:function(){this._actionsQueue=[]}},{key:"_enqueue",value:function(e){this._actionsQueue.push(e)}}]),t}()}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"navigateToWithRelatedInfo",(function(){return m})),n.d(t,"navigateTo",(function(){return y})),n.d(t,"redirectTo",(function(){return _})),n.d(t,"switchTab",(function(){return w})),n.d(t,"navigateBack",(function(){return O})),n.d(t,"reLaunch",(function(){return b})),n.d(t,"createRouter",(function(){return S}));var r=n(0),o=n(22),i=n(24),a=n(6),s=n(3),c=n(45),u=n(90),l=n(11),d=n(183),f=n(2),p=Object(o.getEventManager)("AppPerfRouteNavigation");function h(e,t,n){var r=void 0===n._relativePath?s.default.lastRoute:n._relativePath;return!Object(a.routesHaveSameDomain)(r,t)||/^__wx__\//.test(t)||Object(i.checkUrlInConfig)(e,t,n)}function v(e,t,n){var o=void 0===t._relativePath?s.default.lastRoute:t._relativePath;try{return Object(a.getRealRouteWithProtocol)(o,t.url,!n)}catch(i){if(!(i instanceof a.AppServiceSdkKnownError))throw i;if(!n){if(!Object(a.routesHaveSameDomain)(o,t.url))return t.url;Object(r.beforeInvokeFail)(e,t,i.message)}}return""}function g(e,t){var n=v(e,t,!0);if(!n)return!0;var o=Object(u.getBanRuleIndexByPath)(n),i=u.ReportCheckScene[Object(l.transformToUnderScoreCaseVar)(e).toUpperCase()],a=!0,s="",d=u.ReportBlockStatus.OK;if(o>-1){var f=u.ruleList[o];(s=f.redirect_url)&&1===f.is_valid?(Object(r.beforeInvokeFail)(e,t,"url has been banned"),Object(c.invokeWebviewMethod)("openUrl",{url:s}),d=u.ReportBlockStatus.BLOCK,a=!1):s&&1!==f.is_valid&&(d=u.ReportBlockStatus.NO_BLOCK)}return Object(u.reportAPIBanForPage)(e,d,i,s,n),a}var _=function(e){if(Object(r.beforeInvoke)("redirectTo",e,{url:""})&&g("redirectTo",e)){var t=v("redirectTo",e,!1);t&&(e.url=t,e.url=Object(a.encodeUrlQuery)(e.url),h("redirectTo",e.url,e)&&(s.default.navigatorLock=!0,Object(r.invokeMethod)("redirectTo",e,{afterFail:function(){s.default.navigatorLock=!1}}),p.emit({type:"redirectTo",start:Date.now()})))}},b=function(e){if("active"===s.default.runningStatus||"ios"!==f.PLATFORM){if(Object(r.beforeInvoke)("reLaunch",e,{url:""})&&g("reLaunch",e)){var t=v("reLaunch",e,!1);t&&(e.url=t,e.url=Object(a.encodeUrlQuery)(e.url),h("reLaunch",e.url,e)&&(s.default.navigatorLock=!0,Object(r.invokeMethod)("reLaunch",e,{afterFail:function(){s.default.navigatorLock=!1}}),p.emit({type:"reLaunch",start:Date.now()})))}}else Object(r.beforeInvokeFail)("reLaunch",e,"can not invoke reLaunch in background")},y=function(e){if(Object(r.beforeInvoke)("navigateTo",e,{url:""})&&g("navigateTo",e)){var t=v("navigateTo",e,!1);if(t&&(e.url=t,e.url=Object(a.encodeUrlQuery)(e.url),h("navigateTo",e.url,e))){var n=Object(d._getEventChannelEnd)();if(e.events)for(var o in e.events)n.on(o,e.events[o]);s.default.navigatorLock=!0,Object(r.invokeMethod)("navigateTo",e,{afterFail:function(){s.default.navigatorLock=!1},beforeSuccess:function(e){e.eventChannel=n}}),p.emit({type:"navigateTo",start:Date.now()})}}},m=function(e){__appServiceEngine__.DisplayReporter.setEventRelatedInfo(e._relatedInfo),y(e)},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("switchTab",e,{url:""})&&(/\?.*$/.test(e.url)&&(console.warn("wx.switchTab: url 不支持 queryString"),e.url=e.url.replace(/\?.*$/,"")),g("switchTab",e))){var t=v("switchTab",e,!1);t&&(e.url=t,e.url=Object(a.encodeUrlQuery)(e.url),h("switchTab",e.url,e)&&(s.default.navigatorLock=!0,Object(r.invokeMethod)("switchTab",e,{afterFail:function(){s.default.navigatorLock=!1}}),p.emit({type:"switchTab",start:Date.now()})))}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e=Object.assign({},e))._webviewId;if(void 0!==t){e.delta=void 0;var n=__appServiceEngine__.getPageMetaByWebviewId(t);if(n){var o=n.framesetViewId;e.viewId=o}}if("number"!=typeof e.delta?e.delta=1:(e.delta=parseInt(e.delta,10),e.delta<1&&(e.delta=1)),"function"==typeof __appServiceEngine__.getCurrentPagesByDomain){var i=__appServiceEngine__.getCurrentPagesByDomain("");if(i.length<=1)return void Object(r.beforeInvokeFail)("navigateBack",e,"cannot navigate back at first page.")}Object(r.invokeMethod)("navigateBack",e),p.emit({type:"navigateBack",start:Date.now()})},S=function(e,t){var n={_relativePath:e,_webviewId:t};return{navigateTo:function(e){y(Object.assign({},e,n))},redirectTo:function(e){_(Object.assign({},e,n))},switchTab:function(e){w(Object.assign({},e,n))},navigateBack:function(e){O(Object.assign({},e,n))},reLaunch:function(e){b(Object.assign({},e,n))}}}},function(e,t,n){n.r(t);var r=n(6),o={},i={lastShareTicket:null,get:function(e){return o[e]},set:function(e,t){var n=Object(r.guid)();return o[n]={shareKey:e,shareName:t},n}};t.default=i},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return s})),n.d(t,"privateOpenUrl",(function(){return c}));var r=n(0),o=n(6),i=n(3),a=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!0!==i.default.openUrlLock)if(t.url=t.url||"",Object(o.validateUrl)(t.url))i.default.openUrlLock=!0,Object(r.invokeMethod)(e,t,{afterAll:function(){i.default.openUrlLock=!1}});else{console.error("invalid url",t.url);var n={errMsg:e+': invalid url "'+t.url+'"'};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}}},s=a("openUrl"),c=a("private_openUrl")},function(e,t,n){n.r(t),n.d(t,"navigateBackMiniProgram",(function(){return s})),n.d(t,"_setWxIsInvokeInTapForNavToMiniProgram",(function(){return c._setWxIsInvokeInTapForNavToMiniProgram})),n.d(t,"_navigateToMiniProgram",(function(){return c._navigateToMiniProgram})),n.d(t,"_checkBeforeNavigateToMiniProgram",(function(){return c._checkBeforeNavigateToMiniProgram})),n.d(t,"_doNavigateToMiniProgram",(function(){return c._doNavigateToMiniProgram})),n.d(t,"navigateToMiniProgram",(function(){return c.navigateToMiniProgram})),n.d(t,"navigateToMiniProgramDirectly",(function(){return c.navigateToMiniProgramDirectly})),n.d(t,"doNavigateToDevMiniProgram",(function(){return d})),n.d(t,"navigateToDevMiniProgram",(function(){return f})),n.d(t,"launchMiniProgram",(function(){return p})),n.d(t,"launchDevMiniProgram",(function(){return h}));var r=n(0),o=n(63),i=n(1),a=!1;i.default.onReady((function(){a=a||1037===(i.default.appLaunchInfo||{}).scene})),Object(o.onAppEnterForeground)((function(e){a=a||1037===e.scene}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a?Object(r.invokeMethod)("navigateBackMiniProgram",e,{}):Object(r.beforeInvokeFail)("navigateBackMiniProgram",e,"not MiniProgram can navigate back.")},c=n(59),u=n(20),l=n(6),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";if(Object(r.beforeInvoke)("navigateToDevMiniProgram",e,{appId:""}))if(["undefined","string"].includes(Object(u.default)(e.relativeURL))){var n=Object.assign({},e);"string"==typeof n.path&&void 0===n.relativeURL&&(n.relativeURL=Object(l.transWxmlToHtml)(n.path)),Object(r.invokeMethodWithPlugin)(t)("navigateToDevMiniProgram",n,{})}else Object(r.beforeInvokeFail)("navigateToDevMiniProgram",e,"relativeURL should be string or undefined")},f=function(e){d(e,"/")},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.path&&(t.path=Object(l.transWxmlToHtml)(t.path)),Object(r.invokeMethod)("launchMiniProgram",t)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("launchDevMiniProgram",e,{appId:""})){var t=Object.assign({},e);t.path=Object(l.transWxmlToHtml)(t.path),"string"==typeof t.path&&void 0===t.relativeURL&&(t.relativeURL=t.path),Object(r.invokeMethod)("launchDevMiniProgram",t,{})}}},function(e,t,n){n.r(t),n.d(t,"temporarilyPatchContext",(function(){return o}));var r=n(20);function o(e){if(!e)return e;var t=e.fill.bind(e),n=e.putImageData.bind(e);return e.fill=function(e){return e?t(e,e):t()},e.putImageData=function(e){if(0===e||"object"!==Object(r.default)(e))return null;for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];return n.apply(void 0,[e].concat(o))},e}},function(e,t,n){function r(e){if(!Array.isArray(e)||e.some((function(e){return"string"!=typeof e||0===e.length})))return"invalid keyList"}n.r(t),n.d(t,"checkKeyList",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"checkNeedAppEnterForegroundPatch",(function(){return a})),n.d(t,"checkNeedInsertImageViewPatch",(function(){return s})),n.d(t,"checkNeedPreserveDrawingBufferPatch",(function(){return c}));var r,o=n(1),i=n(2),a=(r=!1,(i.IS_IOS||i.IS_ANDROID&&o.default.clientVersion>=637865520)&&(r=!0),function(){return r}),s=function(){var e=!1;return i.IS_IOS&&o.default.clientVersion>=385877248&&(e=!0),function(){return e}}(),c=function(){var e=!1;return i.IS_IOS&&o.default.clientVersion>=385878314&&(e=!0),function(){return e}}()},function(e,t,n){var r=n(198),o=n(200);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){o.isString(e)&&(e=y(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=n(201);function y(e,t,n){if(e&&o.isObject(e)&&e instanceof i)return e;var r=new i;return r.parse(e,t,n),r}i.prototype.parse=function(e,t,n){if(!o.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var y=e=u.join(s);if(y=y.trim(),!n&&1===e.split("#").length){var m=c.exec(y);if(m)return this.path=y,this.href=y,this.pathname=m[1],m[2]?(this.search=m[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(y);if(w){var O=(w=w[0]).toLowerCase();this.protocol=O,y=y.substr(w.length)}if(n||w||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||w&&g[w]||(y=y.substr(2),this.slashes=!0)}if(!g[w]&&(S||w&&!_[w])){for(var I,E,C=-1,T=0;T<f.length;T++){-1!==(k=y.indexOf(f[T]))&&(-1===C||k<C)&&(C=k)}-1!==(E=-1===C?y.lastIndexOf("@"):y.lastIndexOf("@",C))&&(I=y.slice(0,E),y=y.slice(E+1),this.auth=decodeURIComponent(I)),C=-1;for(T=0;T<d.length;T++){var k;-1!==(k=y.indexOf(d[T]))&&(-1===C||k<C)&&(C=k)}-1===C&&(C=y.length),this.host=y.slice(0,C),y=y.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),D=(T=0,P.length);T<D;T++){var j=P[T];if(j&&!j.match(p)){for(var x="",R=0,M=j.length;R<M;R++)j.charCodeAt(R)>127?x+="x":x+=j[R];if(!x.match(p)){var N=P.slice(0,T),L=P.slice(T+1),B=j.match(h);B&&(N.push(B[1]),L.unshift(B[2])),L.length&&(y="/"+L.join(".")+y),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!v[O])for(T=0,D=l.length;T<D;T++){var U=l[T];if(-1!==y.indexOf(U)){var V=encodeURIComponent(U);V===U&&(V=escape(U)),y=y.split(U).join(V)}}var G=y.indexOf("#");-1!==G&&(this.hash=y.substr(G),y=y.slice(0,G));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),t&&(this.query=b.parse(this.query)),y=y.slice(0,H)):t&&(this.search="",this.query={}),y&&(this.pathname=y),_[O]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var z=this.search||"";this.path=F+z}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&o.isObject(this.query)&&Object.keys(this.query).length&&(a=b.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||_[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},i.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(o.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return _[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!_[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",b=n.search||"";n.path=v+b}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var y=n.pathname&&"/"===n.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=m||y||n.host&&e.pathname,O=w,S=n.pathname&&n.pathname.split("/")||[],I=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!_[n.protocol]);if(I&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),w=w&&(""===h[0]||""===S[0])),m)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=h;else if(h.length)S||(S=[]),S.pop(),S=S.concat(h),n.search=e.search,n.query=e.query;else if(!o.isNullOrUndefined(e.search)){if(I)n.hostname=n.host=S.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var E=S.slice(-1)[0],C=(n.host||e.host||S.length>1)&&("."===E||".."===E)||""===E,T=0,k=S.length;k>=0;k--)"."===(E=S[k])?S.splice(k,1):".."===E?(S.splice(k,1),T++):T&&(S.splice(k,1),T--);if(!w&&!O)for(;T--;T)S.unshift("..");!w||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),C&&"/"!==S.join("/").substr(-1)&&S.push("");var A,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);I&&(n.hostname=n.host=P?"":S.length?S.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(w=w||n.host&&S.length)&&!P&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),o.isNull(n.pathname)&&o.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,n){n.r(t),function(e){function r(){return e.WeixinCanvas}n.d(t,"getWeixinCanvas",(function(){return r}))}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"saveFile",(function(){return o})),n.d(t,"saveFileSync",(function(){return i})),n.d(t,"getSavedFileList",(function(){return s})),n.d(t,"getSavedFileInfo",(function(){return c})),n.d(t,"removeSavedFile",(function(){return u})),n.d(t,"openDocument",(function(){return a}));var r=n(0),o=function(e){Object(r.beforeInvoke)("saveFile",e,{tempFilePath:""})&&Object(r.invokeMethod)("saveFile",e)},i=function(e,t){if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");var n,o;if(Object(r.invokeMethod)("saveFileSync",{tempFilePath:e,filePath:t,success:function(e){o=e.savedFilePath},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return o},a=function(e){Object(r.beforeInvoke)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,Object(r.invokeMethod)("openDocument",e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("getSavedFileList",e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("getSavedFileInfo",e,{filePath:""})&&Object(r.invokeMethod)("getSavedFileInfo",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.beforeInvoke)("removeSavedFile",e,{filePath:""})&&Object(r.invokeMethod)("removeSavedFile",e)}},function(e,t,n){n.r(t),n.d(t,"generateFunctionalPagePath",(function(){return c})),n.d(t,"isFunctionalPagePath",(function(){return u})),n.d(t,"parseCompletePath",(function(){return d})),n.d(t,"getFunctionalPageEnterParams",(function(){return f})),n.d(t,"getFunctionalPageEnterParamsString",(function(){return p})),n.d(t,"generateShareDataFromFunctionalPage",(function(){return h})),n.d(t,"mapPageTypeToCardSubType",(function(){return v})),n.d(t,"isAtFunctionalPage",(function(){return g})),n.d(t,"generateGameIndexPath",(function(){return b}));var r=n(16),o=n(20),i=n(143),a=n(144),s=n(62);function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageType,n=void 0===t?"":t,r=e.query,i="";return"string"==typeof r?i=r:r&&"object"===Object(o.default)(r)&&(i=_(r)),s.PREFIX+"/"+n+"?"+i.replace(/^\?/,"")}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp("^"+s.PREFIX+"/("+l()+")").test(e)}function l(){return Object.keys(s.PAGE_TYPE).map((function(e){return s.PAGE_TYPE[e]})).join("|")}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("?"),n="",r="";t>=0?(n=e.slice(0,t),r=e.slice(t+1)):n=e;var o=new RegExp("^"+s.PREFIX+"/("+l()+")"),i=e.match(o),a="";return i&&(a=i[1]),{path:n,query:r,functionalPageType:a,isFunctionalPage:!!a}}function f(){var e=Object(i._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n={};return"object"===Object(o.default)(t)&&null!==t&&(n=t),n}function p(){var e=Object(i._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n="";return"object"===Object(o.default)(t)&&null!==t&&(n=JSON.stringify(t)),n}function h(e){var t={},n=a.pageStorage.get();if(n.pageType===s.PAGE_TYPE.PLAY_PAGE_IMAGE){var r=c({pageType:s.PAGE_TYPE.PLAY_PAGE_IMAGE,query:n.query});t={title:n.params.title||e.title,path:r,imageUrl:n.params.imageUrl||n.params.fileUrl,messageExtraData:Object.assign({},n.params,{pageType:s.PAGE_TYPE.PLAY_PAGE_IMAGE}),cardSubType:v(s.PAGE_TYPE.PLAY_PAGE_IMAGE)}}else if(n.pageType===s.PAGE_TYPE.PLAY_PAGE_VIDEO){var o=c({pageType:s.PAGE_TYPE.PLAY_PAGE_VIDEO,query:n.query});t={title:n.params.title||e.title,path:o,imageUrl:n.params.thumbUrl,messageExtraData:Object.assign({},n.params,{pageType:s.PAGE_TYPE.PLAY_PAGE_VIDEO}),cardSubType:v(s.PAGE_TYPE.PLAY_PAGE_VIDEO)}}return t}function v(e){var t;return(t={},Object(r.default)(t,s.PAGE_TYPE.PLAY_PAGE_IMAGE,0),Object(r.default)(t,s.PAGE_TYPE.PLAY_PAGE_VIDEO,1),t)[e]}function g(){return!!a.pageStorage.get()}function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,n){return""+t+n+"="+e[n]+"&"}),"");return t=t.replace(/&$/,"")}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index.html",n="";"string"==typeof e?n=e:e&&"object"===Object(o.default)(e)&&(n=_(e));var r=t+"?"+n;return r}},function(e,t,n){n.r(t),n.d(t,"informSubjectChange",(function(){return g})),n.d(t,"getShouldCheckTicketBeforePayment",(function(){return v}));var r=n(4),o=n(5),i=n(36),a=n(11),s=n(29),c=n(34),u=Object(a.promisify)(Object(i.constructOperateWXData)(!1,"getSubjectalterInfo")),l=function(e){return new Promise((function(t){return setTimeout(t,e)}))},d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(r.default)(this,e);var o=286,i=38;this.orientation=t,this.animating=!1;var u=Object(s.getSystemInfoSync)(),l=u.screenWidth,d=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=n;var f=new c.View({id:d,style:{position:"absolute",left:(l-o)/2,top:this.getTop(),width:o,height:i,backgroundColor:"#000000",opacity:0,zIndex:1000001,borderRadius:5,fixed:!Object(a.isGame)()}}),p=new c.Text({id:d+1,style:{left:0,top:0,width:o,height:i,textAlign:"center",lineHeight:i,fontSize:15,color:"#ffffff"},value:"该"+(Object(a.isGame)()?"小游戏":"小程序")+"业务及数据已由新开发者承接"});f.add(p),c.webviewLayout.add(f),this.banner=f,this.bannerWidth=o}return Object(o.default)(e,[{key:"show",value:function(){var e=this;this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop(),opacity:.7,duration:300})})).then((function(){return e.animating=!1,l(5e3)})).then((function(){return e.animating=!0,e.banner.animate({top:e.getTop()-14,opacity:0,duration:300})})).then((function(){return l(3e3)})).then((function(){return c.webviewLayout.remove(e.banner)})).catch((function(){}))}},{key:"getTop",value:function(){var e=Object(s.getSystemInfoSync)().screenHeight;return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}},{key:"setOrientation",value:function(e){if(!this.animating){this.orientation=e;var t=Object(s.getSystemInfoSync)().screenWidth;this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}]),e}(),f=!1,p=500,h=!1,v=function(){return{shouldCheck:f,timeout:p,deprecated:h}},g=function(e,t){return u({apiName:"getSubjectalterInfo",reqData:{}}).then((function(n){var r=JSON.parse(n.rawData);if(r.need_show){var o=new d(e,t);return o.show(),o}void 0!==r.openproduct_checkticket&&(f=!!r.openproduct_checkticket),void 0!==r.openproduct_checktickettimeout&&(p=parseInt(r.openproduct_checktickettimeout,10)),void 0!==r.openproduct_checkticket_deprecated&&(h=!!r.openproduct_checkticket_deprecated)})).catch((function(){}))}},function(e,t,n){n.r(t),n.d(t,"WebView",(function(){return m})),n.d(t,"getWebViewIdList",(function(){return w}));var r=n(31),o=n(4),i=n(5),a=n(9),s=n(14),c=n(19),u=n(8),l=n(72),d=n(0),f=n(27),p=n(1);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.default)(e);if(t){var o=Object(u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.default)(this,n)}}var v=new Map,g=new WeakMap,_=new WeakMap,b=new WeakMap;function y(e){var t=this;return new Promise((function(n,r){var o=_.get(t);Object(d.invokeMethod)("insertHTMLWebView",{htmlId:t.id,position:o,src:g.get(t),zIndex:b.get(t),backgroundColor:o.backgroundColor,__skipDomainCheck__:e,success:n,fail:r})}))}var m=function(e){Object(s.default)(n,e);var t=h(n);function n(e){var r,i=e.src,s=e.zIndex,c=e.style,u=void 0===c?{}:c,l=e.__skipDomainCheck__;return Object(o.default)(this,n),r=t.call(this,{style:u}),v.set(r.id,Object(a.default)(r)),g.set(Object(a.default)(r),i),_.set(Object(a.default)(r),u),b.set(Object(a.default)(r),s),y.call(Object(a.default)(r),l),r}return Object(i.default)(n,[{key:"src",get:function(){return g.get(this)},set:function(e){g.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,src:e})}},{key:"style",get:function(){return _.get(this)},set:function(e){this.style||_.set(this,{});var t=Object.assign(this.style,e);Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}},{key:"zIndex",get:function(){return b.get(this)},set:function(e){b.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}},{key:"destroy",value:function(){v.delete(this.id),Object(d.invokeMethod)("removeHTMLWebView",{htmlId:this.id})}}]),n}(l.Element);function w(){return Object(r.default)(v.keys())}function O(e){var t=e.htmlId,n=v.get(t);n&&n.onload&&setTimeout(n.onload)}function S(e){var t=e.name,n=e.arg,r=e.htmlId;"postMessage"===t&&v.forEach((function(e,t){var o=e.onmessage;r&&r!==t||o&&setTimeout((function(){return o(n)}))}))}p.default.onReady((function(){4===p.default.appType&&(Object(f.onNativeEvent)("onWebviewFinishLoad",O),Object(f.onNativeEvent)("onWebInvokeAppService",S),Object(f.onNativeEvent)("WEB_INVOKE_APPSERVICE",S))}))},function(e,t,n){n.r(t),n.d(t,"openDeliveryList",(function(){return o})),n.d(t,"openUrl",(function(){return i.openUrl})),n.d(t,"privateOpenUrl",(function(){return i.privateOpenUrl})),n.d(t,"sendDataToH5",(function(){return u})),n.d(t,"onH5Data",(function(){return p}));var r=n(0),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("openDeliveryList",e,{})},i=n(104),a=n(20),s=!1,c=[],u=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.webviewId||!t.data){console.error("invalid arguments");var n={errMsg:"sendDataToH5: arguments data or webviewId cannot be null"};return"function"==typeof t.fail&&t.fail(n),void("function"==typeof t.complete&&t.complete(n))}"object"===Object(a.default)(t.data)&&(t.data=JSON.stringify(t.data)),s?c.push(t):(s=!0,Object(r.invokeMethod)("sendDataToH5",t,{afterAll:function(){if(s=!1,c.length){var t=c.shift();e(t)}}}))},l=!1,d=[];function f(e){for(var t=0;t<d.length;t++)d[t](e)}var p=function(e){if("function"==typeof e){d.push((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.webviewId&&t.data?("string"==typeof t.data&&(t.data=JSON.parse(t.data)),e(t)):console.error("invalid arguments in onH5Data callback")})),l||(Object(r.onMethod)("onH5Data",f),l=!0)}}},function(e,t,n){n.r(t),n.d(t,"getSurroundedCallbacks",(function(){return y})),n.d(t,"callbackInvoke",(function(){return w})),n.d(t,"mainInvokeMethod",(function(){return S})),n.d(t,"invokeMethod",(function(){return I})),n.d(t,"invokeMethodAsync",(function(){return E})),n.d(t,"invokeMethodWithPlugin",(function(){return C})),n.d(t,"_invokeMethod",(function(){return k}));var r=n(153),o=n(0),i={},a={},s={},c=0,u=function(e,t){return Object.keys(t).map((function(n){return Object.keys(t[n]).map((function(r){return{func:n,result:e,errMsg:r,count:t[n][r]}}))}))},l=function(){var e=u(1,i),t=u(2,a),n=u(3,s),r=[].concat(e,t,n);0!==r.length&&Object(o.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:r,appType:Reporter.getAppType()})}),i={},a={},s={}},d=n(15),f=n(90),p=n(1),h=n(10),v=n(97),g=n(2),_=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"],b=function(e){return g.IS_ANDROID&&_.includes(e)};function y(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=__errorTracer__.surroundThirdByTryCatch(e[r],"at api "+t+" "+r+" callback function"),delete e[r]),n}),{})}function m(e,t){return Object.keys(e).reduce((function(n,r){return"function"==typeof e[r]&&(n[r]=Object(d.surroundByTryCatchFactory)(e[r],"at api "+t+" "+r+" callback function"),n[r]._argumentsLength=e[r].length),n}),{})}function w(e,t,n,r){e.errMsg=e.errMsg||t+":ok";var o=0===e.errMsg.indexOf(t+":ok"),u=new RegExp(t+":(fail |fail:)?cancel").test(e.errMsg),d=0===e.errMsg.indexOf(t+":fail");"function"==typeof r.beforeAll&&r.beforeAll(e),o?function(e,t,n){var r=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,r):(n.beforeSuccess(t),r()):r()}(n,e,r):u?function(e,t,n,r){var o=new RegExp(t+":(fail |fail:)?cancel");e.errMsg=e.errMsg.replace(o,t+":fail cancel"),"function"==typeof n.fail&&n.fail(e),"function"==typeof r.beforeCancel&&r.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof r.afterCancel&&r.afterCancel(e)}(e,t,n,r):d&&function(e,t,n,r){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof r.fail&&r.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),Object(h.isFunction)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:t+"_fail"})}(r,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof r.afterAll&&r.afterAll(e),function(e,t,n,r,o){var u;(u=t?i:n?a:s)[e]=u[e]||{},u[e][o]=(u[e][o]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(l,6e4))}(t,o,d,0,e.errMsg)}function O(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";Object(h.isObject)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;var a=y(n,t);if(n=Object.assign({},n),o=m(o,t),Reporter.reportIDKey({key:t}),!e){if(0===p.default.appType&&f.banAPISet.has(t)&&!Object(f.checkAPIAvailableForCurrentPage)(t))return void w({errMsg:t+":fail API has been banned"},t,a,o);delete n.pluginId,delete n.permissionBytes,"/"!==i&&(n.pluginId=i)}var s=b(t);Object(r.invoke)(t,n,(function(e){w(e,t,a,o)}),s)}}var S=O(!1),I=function(e,t,n){v.UI_JSAPI.indexOf(e)<0?S(e,t,n):Object(v.registerDelayedInvoke)(e,t,n)},E=function(e,t,n){return Object(d.invoke2Async)((function(t){return I(e,t,n)}))(t)},C=function(e){return e?function(t,n,r){S(t,n,r,e)}:I},T=O(!0),k=function(e,t,n){T(e,t,n)}},function(e,t,n){n.r(t),n.d(t,"reportApiUse",(function(){return u})),n.d(t,"WHITELIST",(function(){return c}));var r=n(1),o=n(47),i=0,a={};r.default.onReady((function(){i=r.default.appType,a=r.default.appLaunchInfo}));var s=function(e,t){var n=[];return t.forEach((function(t){var r=e[t];"boolean"==typeof r&&(r=r?1:0),n.push(t+":"+r)})),n.join("|")},c=["getAccountInfoSync","getLaunchOptionsSync","arrayBufferToBase64","base64ToArrayBuffer","getExtConfig","getExtConfigSync","canIUse","setPageStyle","onError","offError"],u=function(e){var t=e.name,n=e.data,r=void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],c=r.length>0&&r[r.length-1].__route__||"",u=Object(o._getCurrentNetworkType)(),l=wx&&wx.version&&wx.version.version||"",d="";switch(t){case"loadFontFace":d=s(n,["family","source","global","scopes"]);break;case"requestSubscribeMessage":d=s(n,["templateCount","templateType","operationType"])}var f=[Math.round(Date.now()/1e3),a.scene,a.sessionid||a.sessionId,c,u,l,t,d,i,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:f,immediately:!0})}},function(e,t,n){n.r(t),n.d(t,"OffscreenCanvas",(function(){return T})),n.d(t,"createOffscreenCanvas",(function(){return k}));var r=n(14),o=n(19),i=n(8),a=n(16),s=n(20),c=n(4),u=n(5),l=n(26),d=n(110),f=n(0),p=n(2),h=n(3),v=n(25),g=n(195),_=n(196),b=n(39),y=n(131),m=n(65);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.default)(e);if(t){var a=Object(i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}var O=function(e){Object(r.default)(n,e);var t=w(n);function n(){return Object(c.default)(this,n),t.apply(this,arguments)}return Object(u.default)(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this.id,e}},{key:"getContext",value:function(e,t){return Object(v.pipe)(m.decorateContextForImageProxy)(Object(b.default)(Object(i.default)(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(v.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}}]),n}(y.OffscreenSkiaCanvas),S=n(141);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.default)(e);if(t){var a=Object(i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=function(){function e(t){var n=t.id,r=t.width,o=t.height,i=t.nodeId,a=t.pluginId;Object(c.default)(this,e),this._id=n,this._width=r,this._height=o,this._nodeId=i,this._pluginId=a}return Object(u.default)(e,[{key:"id",get:function(){return this._id}},{key:"_offscreenCanvasId",get:function(){return null}},{key:"createImage",value:function(){}},{key:"getContext",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}();function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="object"===Object(s.default)(e)?e:{width:e,height:t,compInst:n},o=C({type:"webgl",width:1,height:1,compInst:null,pluginId:""},r),i=o.type,a=o.width,c=o.height,u=o.compInst,l=o.pluginId;switch(i){case"2d":return A(a,c,u,l);case"webgl":return P(a,c,u,l);default:throw new Error('unknown type "'+i+'"')}}function A(e,t,n,r){var o=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,r){var o=-1*j();return new R({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):p.IS_ANDROID?function(e,t,n,r){var o=-1*j();return new N({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):p.IS_DEVTOOLS?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var o=-1*j();return new B({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):void 0}function P(e,t,n,r){var o=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,r){var o=-1*j();return new x({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):p.IS_ANDROID?function(e,t,n,r){var o=-1*j();return new M({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):p.IS_DEVTOOLS?function(e,t,n,r){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var o=-1*j();return new L({id:o,width:e,height:t,nodeId:n,pluginId:r})}(e,t,o,r):void 0}var D={},j=function(){for(;;){var e=Math.floor(32767*Math.random());if(!D[e])return D[e]=!0,e}},x=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),(r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u})).__id=-h.default.currentWebviewId||r.id,Object(f.invokeMethod)("insertWebGLCanvas",{position:{top:-100,left:-100,width:1,height:1},canvasId:r.__id,keepAlive:!0,fail:function(){}});var l=Object(d.getWeixinCanvas)();return r.canvas=l.createOffscreenCanvas(r.__id,i,a),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=Object(d.getWeixinCanvas)().createImage(this.__id);return Object(v.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(T),R=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u})).canvas=Object(v.shouldUseOldCanvas)()?new S.SkiaCanvasFake(h.default.currentWebviewId,o):new g.OffscreenSkiaCanvasIOS({id:o,width:i,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}console.warn("can only create 2d context")}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(T);var M=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u})).canvas=new l.default.OffscreenCanvas(i,a),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=new l.default.Image;return Object(v.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(T),N=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u})).canvas=Object(v.shouldUseOldCanvas)()?new S.SkiaCanvasFake(h.default.currentWebviewId,o):new _.OffscreenSkiaCanvasAndroid({id:o,width:i,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(T);var L=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u});var l=document.createElement("canvas");return l.width=i,l.height=a,r.canvas=l,r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(v.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(T),B=function(e){Object(r.default)(n,e);var t=I(n);function n(e){var r,o=e.id,i=e.width,a=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(r=t.call(this,{id:o,width:i,height:a,nodeId:s,pluginId:u})).canvas=new O({id:o,width:i,height:a,nodeId:s,pluginId:u}),r}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return(t=this.canvas).getContext.apply(t,[e].concat(r))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(T)},function(e,t,n){n.r(t),n.d(t,"categories",(function(){return r})),n.d(t,"apiCategoryValue",(function(){return o})),n.d(t,"listApisWithCategoryValue",(function(){return i}));var r={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:0,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},o=function(e,t){return r[t][e]},i=function(e,t){var n=r[e],o=[];for(var i in n)n[i]===t&&o.push(i);return o}},function(e,t,n){n.r(t),n.d(t,"nativeFontAssets",(function(){return y})),n.d(t,"loadFontFace",(function(){return S})),n.d(t,"fontFaceRecords",(function(){return f}));var r=n(16),o=n(22),i=n(58),a=n(0),s=n(3),c=n(117),u=n(64);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=[],p=new Map,h=0,v=/url\((.*)\)/i,g=/([^.]*)(\..*)?/i;Object(a.subscribe)("loadedFontFace",(function(e){var t=e.callbackId,n=e.errMsg,r=void 0===n?"":n;if(p.has(t)){var o=p.get(t);p.delete(t);var i=o.success,a=o.fail,s=o.complete,c=0===r.indexOf("loadFontFace:ok"),u={status:c?"loaded":"error",errMsg:r};c?"function"==typeof i&&i(u):"function"==typeof a&&a(u),"function"==typeof s&&s(u)}}));var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h++;var t=e.success,n=e.fail,r=e.complete;delete e.success,delete e.fail,delete e.complete,e.callbackId=h,p.set(h,{success:t,fail:n,complete:r});var o=e.global||!1;if(o){var i=encodeURIComponent(JSON.stringify(e));f.indexOf(i)<0&&f.push(i),Object(a.publish)("loadFontFace",e)}else Object(a.publish)("loadFontFace",e,[s.default.currentWebviewId])},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){_(d(d({},e),{},{success:function(e){t(e)},fail:function(e){n(e)}}))}))},y=[],m=Object(o.getEventManager)("skiaCanvasLoadFontFace");function w(e){y.push(e),m.emit({nativeFontAssets:y})}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=e.source.match(v);return n.length>=2&&(t=(t=n[1]).substring(1,t.length-1)),new Promise((function(n,r){Object(u._downloadFileSkipCheckDomain)({url:t,timeout:2e4,success:function(t){w({originalSrc:e.source,src:t.tempFilePath,family:e.family,style:e.desc&&e.desc.style,weight:e.desc&&e.desc.weight,variant:e.desc&&e.desc.variant});var r=(t.tempFilePath||"").replace(g,(function(){return arguments.length<=1?void 0:arguments[1]}));i.FakeTempFilePathMap.set(r),n()},fail:function(){r()}})}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("loadFontFace",e,{family:"",source:""})){var t="";if(""===e.family&&(t="parameter error: family can not be empty string"),""===e.source&&(t="parameter error: source can not be empty string"),t)Object(a.beforeInvokeFail)("loadFontFace",e,t);else{v.test(e.source)||(e.source='url("'+e.source+'")'),e.scopes||(e.scopes=["webview"]),Object(c.reportApiUse)({name:"loadFontFace",data:{family:e.family,source:encodeURIComponent(e.source),global:Boolean(e.global),scopes:e.scopes}});var n=[];if(e.scopes.indexOf("webview")>=0){var r=b(e);n.push(r)}if(e.scopes.indexOf("native")>=0){var o=O(e);n.push(o)}Promise.all(n).then((function(){Object(a.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!0,errMsg:"",res:{status:"loaded"}})})).catch((function(){Object(a.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!1,errMsg:"",res:{status:"error"}})}))}}}},function(e,t,n){n.r(t),n.d(t,"onAppShow",(function(){return c})),n.d(t,"offAppShow",(function(){return u})),n.d(t,"_onAppShow",(function(){return l})),n.d(t,"emitIsloatedAppShow",(function(){return d}));var r=n(63),o=n(22),i=n(156),a=n(49),s=Object(o.getEventManager)("AppShow"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(e){s.emitGlobal(e)}Object(r.onAppEnterForeground)((function(e){s.emitInternal(e)})),Object(a.onAppRoute)((function e(t){if("appLaunch"===t.openType){var n=Object(i._getLaunchOptionsSync)();s.emitInternal(n),Object(a.offAppRoute)(e)}}))},function(e,t,n){n.r(t),n.d(t,"authorize",(function(){return c})),n.d(t,"_authorize",(function(){return u}));var r=n(0),o=n(6),i=n(11);function a(e){return"scope.userInfo"!==e||(Object(i.checkAPIAvailable)("getUserInfo")||Object(i.checkAPIAvailable)("authorize"))}var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.innerContext,n=void 0===t?{}:t,i=e.args,s=void 0===i?{}:i;Object(r.beforeInvoke)("authorize",s,{scope:""})&&(a(s.scope)?Object(r.invokeMethod)("authorize",Object(o.assign)(s,{scope:[s.scope],requestInQueue:!n.hasOwnProperty("requestInQueue")||Boolean(n.requestInQueue)}),{beforeAll:function(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):Object(r.beforeInvokeFail)("authorize",s,"scope unauthorized"))},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s({args:e})},u=s},function(e,t,n){n.r(t),n.d(t,"getAccountInfoSync",(function(){return o}));var r=n(1),o=function(){return{miniProgram:{appId:r.default.accountInfo&&r.default.accountInfo.appId||"",envVersion:r.default.envVersion||"release",version:r.default.appContactInfo&&r.default.appContactInfo.user_version||""}}}},function(e,t,n){n.r(t),n.d(t,"onShow",(function(){return v})),n.d(t,"offShow",(function(){return g})),n.d(t,"_onShow",(function(){return _})),n.d(t,"_offShow",(function(){return b})),n.d(t,"emitGameOnshow",(function(){return w})),n.d(t,"_onBaseFrameShow",(function(){return y})),n.d(t,"_offBaseFrameShow",(function(){return m}));var r=n(20),o=n(98),i=n(22),a=n(1),s=n(137),c=n(2),u=n(27),l=n(139),d=n(112),f=n(10),p=Object(i.getEventManager)("Show"),h=Object(i.getEventManager)("BaseFrameShow"),v=p.onMethod,g=p.offMethod,_=p.internalOnMethod,b=p.internalOffMethod,y=h.internalOnMethod,m=h.internalOffMethod;function w(e,t){e=e||Object(o.getLaunchOptionsSync)(),t=t||Object(o._getLaunchOptionsSync)(),Reporter.__query__=e.query,l.default.query=e.query,p.emitInternal(t),p.emitGlobal(e)}function O(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),h.emitInternal(e)}function S(e){var t=e.split("?")[1],n={};if(t)try{n=t.split("&").reduce((function(e,t){var n=t.split("="),r=n[0],o=n.slice(1).join("=");return e[r]=o,e}),{})}catch(e){n={}}return n}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path;c.IS_ANDROID&&Object(f.isObject)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=S(t));var n=Object(o.formatLaunchInfo)(e),i=n.publicLaunchInfo,a=n.appLaunchInfo,u=a.shareInfo;O(a),setTimeout((function(){Object(d.isAtFunctionalPage)()||w(i,a),"object"===Object(r.default)(u)&&null!==u&&Object(s.showUpdatableMessageSubscribeButton)(u.shareKey)}),0)})),a.default.onReady((function(){var e=Object(o.getLaunchOptionsSync)(),t=Object(o._getLaunchOptionsSync)();Reporter.__query__=e.query,l.default.query=e.query,c.IS_DEVTOOLS||(O(t),setTimeout((function(){Object(d.isAtFunctionalPage)()||w(e,t)}),0))}))},function(e,t,n){n.r(t),n.d(t,"getSetting",(function(){return c})),n.d(t,"transformGetSettingResponse",(function(){return s}));var r=n(32),o={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},i=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(o);var a=wxNativeConsole.createLogger("getSetting");function s(e){if(a.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}):e.authSetting={},void 0!==e.sub_msg_switch){var t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){a.info("sub_msg_list",e.sub_msg_list);var n=e.sub_msg_list.reduce((function(e,t){var n,r=t.template_id;return t.sys_msg_type>0&&(n=t.sys_msg_type,r=i[n]),t.ban_flag?e[r]="ban":e[r]=t.setting_status?"accept":"reject",e}),{});a.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}var c=Object(r.default)("getSetting","webapi_getuserallappauth",{},{},(function(e){var t=wx&&wx.version&&wx.version.version||"",n=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete n.withSubscriptions,n}),s)},function(e,t,n){n.r(t),n.d(t,"getAdUxInfo",(function(){return u}));var r=n(27),o=n(1),i=n(149),a=n(151),s="",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};"undefined"!=typeof __safeway__&&(o.default.onReady((function(){c(o.default.appLaunchInfo)})),Object(r.onNativeEvent)("onAppEnterForeground",(function(e){c(e)})),Object(r.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"back"!==e.mode&&"close"!==e.mode||(s="")})),Object(a.subscribe)("getAdUxInfo",(function(e,t){Object(i.publish)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));var u=function(){return s}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var r=n(138);function o(e,t){if(e){if("string"==typeof e)return Object(r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.default)(e,t):void 0}}},function(e,t,n){function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"CanvasInterface",(function(){return i}));var r=n(4),o=n(5),i=function(){function e(){Object(r.default)(this,e)}return Object(o.default)(e,[{key:"_init",value:function(){}},{key:"_onReady",value:function(){}},{key:"_initCanvasInstance",value:function(){}},{key:"getContext",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}()},function(e,t,n){n.r(t),n.d(t,"apiReport",(function(){return A})),n.d(t,"setApiVersion",(function(){return P}));var r=n(1),o=n(27),i=n(47),a=n(10);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=0,l="",d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",f="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function p(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}Object(a.isString)(d)&&(d=d.replace(" ","")),Object(a.isString)(f)&&(f=f.replace(" ","-")),r.default.onReady((function(){u=r.default.appLaunchInfo.scene,l=r.default.appLaunchInfo.sessionid||r.default.appLaunchInfo.sessionId,Object(o.onNativeEvent)("onAppEnterForeground",(function(e){e&&e.scene&&(u=e.scene),e&&(e.sessionid||e.sessionId)&&(l=e.sessionid||e.sessionId)}))}));var h=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toString","valueOf","toLocaleString","getBox2D","createSharedArrayBuffer","nv_constructor","nv_toString"],v=["chooseMedia","chooseVideo","compressVideo","createCameraContext","stopRecord"],g=new WeakSet,_=[];function b(){return 1e4*Date.now()+Math.round(9999*Math.random())}function y(e,t,n){return!(!t||"_"===t[0])&&(!h.includes(t)&&(!(n&&!v.includes(t))&&!!Object(a.isFunction)(e[t])))}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Object(a.isFunction)(e)&&e.apply(void 0,n)}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.getDataType)(e);switch(n){case"Number":case"Boolean":return e;case"String":return O(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:"+w(e.message)+"|"+w(e.stack)+"]";case"Object":return t?Object.keys(e).map((function(t){return w(t)+"="+w(e[t],!1)})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"["+n+"]";default:return"["+n+"]"}}function O(e){return function(t){return Object(a.isString)(t)&&t.length>e?t.substr(0,e):t}}function S(e,t,n,o,i,a,s,c,h,v){var g=0;_.forEach((function(t){var n=t.match,r=t.version;"string"==typeof n?e===n&&(g=r):n instanceof RegExp&&n.test(e)&&(g=r)})),"connectWifi"===e&&(n="");var b=[e,t,w(n),o,i,Date.now()-i,a,s,w(c),r.default.appType+1e3,u,d,f,g,h,p(),l].map(O(1024)).join(",");v||1!==s||(Reporter.reportIDKey({key:"asyncApiCount"}),Reporter.reportIDKey({key:"asyncApiCost",value:Date.now()-i})),Reporter.reportKeyValue({key:v?"WeAppInvoke2":"WeAppInvoke",value:b})}var I=Map,E=Math.random;function C(e,t,n,r,o){var c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(Object(a.isObject)(t)){var u,l=new I,d=s(Object.getOwnPropertyNames(t));try{for(d.s();!(u=d.n()).done;){var f=u.value;Object.getOwnPropertyDescriptor(t,f).get||y(t,f,c)&&l.set(f,t[f])}}catch(e){d.e(e)}finally{d.f()}var p,h=s(Object.getOwnPropertyNames(Object.getPrototypeOf(t)));try{for(h.s();!(p=h.n()).done;){var v=p.value;Object.getOwnPropertyDescriptor(t.__proto__,v).get||y(t,v,c)&&l.set(v,Object.getPrototypeOf(t)[v])}}catch(e){h.e(e)}finally{h.f()}l.forEach((function(s,u){t[u]=function(l){for(var d=""+e+u,f=arguments.length,p=new Array(f>1?f-1:0),h=1;h<f;h++)p[h-1]=arguments[h];if(E()>r){var v=s.call.apply(s,[t,l].concat(p));return n&&Object(a.isObject)(v)&&!g.has(v)&&(C(d+".",v,!1,r,o,c),g.add(v)),v}var _=Object(i._getCurrentNetworkType)(),y=Date.now(),w=b();try{var O=s.call.apply(s,[t,Object(a.isObject)(l)&&("success"in l||"fail"in l||"complete"in l)?Object.assign({},l,{success:function(e){S(d,w,l,1,y,_,1,e,o,c),m(l.success,e)},fail:function(e){S(d,w,l,0,y,_,1,e,o,c),m(l.fail,e)}}):l].concat(p));return S(d,w,l,null===O?0:1,y,_,0,O,o,c),n&&Object(a.isObject)(O)&&!g.has(O)&&(C(d+".",O,!1,r,o,c),g.add(O)),O}catch(e){throw S(d,w,l,0,y,_,0,e,o,c),e}}}))}}var T=!1;function k(e){if(e.createCanvas){var t=e.createCanvas;e.createCanvas=function(){var n=t.call(e);if(n&&n.getContext){var r=n.getContext;n.getContext=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];var a=r.call.apply(r,[n].concat(t));if(a&&a.compressedTexImage2D){var s=a.compressedTexImage2D;a.compressedTexImage2D=function(){T||(T=!0,S("WebGLRenderingContext.compressedTexImage2D",b(),{},1,Date.now(),Object(i._getCurrentNetworkType)(),0,void 0));for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];s.call.apply(s,[a].concat(t))}}return a}}return n}}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;C("",e,!0,.05,t),C("",e,!0,1,t,!0),C("cloud.",e.cloud,!0,.05,t),k(e)}function P(e,t){_.push({match:e,version:t})}},function(e,t,n){n.r(t),n.d(t,"canvasMap",(function(){return p})),n.d(t,"OffscreenSkiaCanvas",(function(){return h}));var r=n(16),o=n(4),i=n(5),a=n(14),s=n(19),c=n(8),u=n(129);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var p=new WeakMap,h=function(e){Object(a.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.default)(this,n);var i=d({id:-1,width:1,height:1,top:0,left:0,nodeId:"",pluginId:""},r),a=i.id,s=i.width,c=i.height,u=i.top,l=i.left,f=i.nodeId,p=i.pluginId;return(e=t.call(this)).id=a,e._top=u,e._left=l,e._width=s,e._height=c,e._nodeId=f,e._pluginId=p,e._onReady(),e}return Object(i.default)(n,[{key:"_init",value:function(){if(this.id){var e=this._initCanvasInstance();e.width=this._width,e.height=this._height,p.set(this,e)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){p.get(e)||e._init(),t()};n()}},{key:"getContext",value:function(e,t){if("2d"===e){var n=p.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:r}),r}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=p.get(this);return e&&e.width},set:function(e){var t=p.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=p.get(this);return e&&e.height},set:function(e){var t=p.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){}},{key:"createImageData",value:function(){}}]),n}(u.CanvasInterface)},function(e,t,n){var r,o,i,a,s,c,u,l,d;n.r(t),n.d(t,"COMMON_EVENT",(function(){return r})),n.d(t,"ROOT_EVENT",(function(){return o})),n.d(t,"BUTTON_EVENT",(function(){return i})),n.d(t,"TEXT_EVENT",(function(){return a})),n.d(t,"VIDEO_EVENT",(function(){return s})),n.d(t,"FEEDBACK_EVENT",(function(){return c})),n.d(t,"ENDPAGE_EVENT",(function(){return u})),n.d(t,"CAROUSEL_EVENT",(function(){return l})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return d})),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(r||(r={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(o||(o={})),function(e){e.BUTTONTAP="buttonTap"}(i||(i={})),function(e){e.RELATIONFETCHED="relationFetched"}(a||(a={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(u||(u={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(l||(l={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(d||(d={}))},function(e,t,n){n.r(t),n.d(t,"default",(function(){return s}));var r=n(174),o=n(172),i=n(127),a=n(175);function s(e){return Object(r.default)(e)||Object(o.default)(e)||Object(i.default)(e)||Object(a.default)()}},function(e,t,n){n.r(t);var r=[],o={add:function(e){e&&r.indexOf(e)<0&&r.push(e)},remove:function(e){var t=r.indexOf(e);t>=0&&r.splice(t,1)},get size(){return r.length}};t.default=o},function(e,t,n){function r(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){var r=n(207)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!a()&&!s("?>");){var t=o();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){r("tag %j",e);var t=i(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(a()||s(">")||s("?>")||s("/>"));){var l=o();if(!l)return u;u.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return u;for(i(/\??>\s*/),u.content=function(){r("content %j",e);var t=i(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return i(/^<\/[\w-:.]+>\s*/),u}}function o(){r("attribute %j",e);var t,n=i(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function a(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t),n.d(t,"_shareAppMessage",(function(){return V})),n.d(t,"_beforeShareAppMessageSuccessFactory",(function(){return U})),n.d(t,"_doShareAppMessage",(function(){return G})),n.d(t,"shareAppMessage",(function(){return H})),n.d(t,"onShareMessageToFriend",(function(){return z})),n.d(t,"showUpdatableMessageSubscribeButton",(function(){return W})),n.d(t,"getMessageExtraData",(function(){return B})),n.d(t,"shareVideoAppMessage",(function(){return q}));var r=n(16),o=n(33),i=n(0),a=n(21),s=n(58),c=(n(3),n(2)),u=function(e){Object(i.baseOperateWXData)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success:function(t){c.IS_ANDROID&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));var n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,Object(i.beforeInvokeCallback)({name:"getGroupMsgTicket",args:e,res:t})):Object(i.beforeInvokeFail)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail:function(t){Object(i.beforeInvokeFail)("getGroupMsgTicket",e,t.errMsg,-1)}}))},l=n(11),d=n(91),f=n(1),p=n(41),h=n(32),v=Object(h.default)("getIAPInfo","webapi_getiapinfo");var g=n(47),_=n(20),b={};function y(e){var t=e.result,n=e.shareType,r=e.canUseCustomImageUrl,o=e.imageUrlId,i=void 0===o?"":o,a=e.transformedImageUrl,s=void 0===a?"":a,c=b.query,u=[],l=f.default.accountInfo&&f.default.accountInfo.nickname||"";if(c&&"object"===Object(_.default)(c))for(var d in c)u.push(encodeURIComponent(d)+"="+encodeURIComponent(c[d]));var p=[b.scene,b.scene_note,b.sessionid,"",l,Reporter.getAppType(),t,0,u.join("&"),n,r?1:2,i,s,f.default.host?f.default.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:p}),Reporter.submit()}var m=n(70),w=n(37),O=n(60),S=n(143);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filePath,n=e.thumbFilePath,r=e.fileType,o=e.appType;return new Promise((function(e,a){if(!/wxfile:\/\//.test(t)&&!/http:\/\//.test(t)){var c=s.FakeTempFilePathMap.get(t);t=c}Object(i.invokeMethod)("uploadToCommonCDN",{filePath:t,thumbFilePath:n,fileType:r,appType:o,isStorageMode:!0,snsUploadVersion:0,directReturnInDevtools:!0,success:e,fail:a})}))}var E=n(112),C=n(62),T=n(92),k=(n(176),!0),A={};f.default.onReady((function(){Object(l.checkAPIAvailable)("shareCustomImageUrl")||(Object(h.default)("getShareConfig","webapi_getshareconf")({success:function(e){Array.isArray(e.share_link_list)&&(A=e.share_link_list.reduce((function(e,t){return e[t.id]=t.url,e}),{}))},fail:function(e){}}),k=!1)}));var P=function(){return A},D=function(){return k};var j=n(165);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=new o.default,N=null,L=null,B=function(){return L};f.default.onReady((function(){Object(l.isGame)()&&n(124)._onShow((function(e){if(L={},e.referrerInfo&&e.referrerInfo.messageExtraData){var t=L=e.referrerInfo.messageExtraData,n=t.userInfo,r=t.shareType;if(r&&n){var o=[Reporter.getAppType(),r,n.openID,e.path||"",Object(g._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:o})}}}))}));var F=a.share.ShareInfoStorage,W=function(e){Object(i.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:e})},U=function(e){return function(t,n){var r=t.shareInfos;if(delete t.shareInfos,void 0!==r&&r.length>0)if(r=r.filter((function(e){return e.shareKey&&e.shareName})),t.shareTickets=r.map((function(e){return W(e.shareKey),F.set(e.shareKey,e.shareName)})),c.IS_DEVTOOLS)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(r.map((function(e){return new Promise((function(t){!function(e){u(e)}({shareKey:e.shareKey,success:function(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail:function(){t({groupMsgTicket:""})}})}))}))).then((function(e){return t.groupMsgInfos=e,n()})).catch((function(){}));n()}else n()}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=D(),a=P(),u="string"==typeof e.path?e.path:"",f="string"==typeof e.query?e.query:"",h="",v=0;switch(t){case"shareAppMessage":v=1;break;case"shareAppMessageDirectly":v=2;break;case"shareAppMessageToSpecificContactDirectly":v=3}if(f.length>2e3&&(console.warn('shareAppMessage: query exceed max length limit 2000: "'+f.length+'"'),f=f.substr(0,2e3)),f&&(u=u+"?"+f),e.imageUrl=s.FakeTempFilePathMap.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!o){if(!a[e.imageUrlId])return e.imageUrlId,Object(p.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void g(2);h=e.imageUrl=a[e.imageUrlId]}function g(t){y({result:t,shareType:v,canUseCustomImageUrl:o,imageUrlId:e.imageUrlId,transformedImageUrl:h})}Object(i.invokeMethod)(t,Object.assign(n,e,{path:u,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:v,userInfo:N},e.extra),success:function(t){Object(T.reportShareAppMessage)("shareAppMessage",t),(r||!c.IS_DEVTOOLS&&Object(l.checkAPIAvailable)("share"))&&Object(i.beforeInvokeCallback)({name:"shareAppMessage",args:e,res:t}),g(1),setTimeout((function(){Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500)},fail:function(t){var n=t.errMsg.replace("shareAppMessage:fail","");(r||!c.IS_DEVTOOLS&&Object(l.checkAPIAvailable)("share"))&&Object(i.beforeInvokeFail)("shareAppMessage",e,n),g(-1!==n.indexOf("cancel")?3:2)},cancel:function(){setTimeout((function(){Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:function(t){var n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),r=!n||"shareMessageToFriend:ok"===n;Object(w.checkPermissionSync)("shareCallback")&&3===v&&(M.emit("callback",{errMsg:n,success:r}),Object(i.beforeInvokeCallback)({name:"shareMessageToFriend",errMsg:n,success:r,args:e}))}}),{beforeSuccess:U(e),beforeAll:function(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((function(t){return"function"==typeof e[t]}))&&Object(d.reportRecycledAPI)({name:t,strategy:1}),Object(m.reportCanvasData)(m.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_SHARE)},G=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=function(){var e=t[0].imageUrl;Object(O.getCloudFileUrl)([e],"image",(function(r){/^(cloud):\/\//.test(e)&&(e=r.data[0].url),t[0].imageUrl=e,Object(l.isGame)()?n(211).addLabelToShareArgs(t[0]).catch(wxConsole.warn).then((function(){return V.apply(void 0,t)})):V.apply(void 0,t)}))};N?o():v({success:function(e){N=e},complete:function(){return o()}})},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:e.title||f.default.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path},n=Object(S._getEnterOptionsSync)(),r=n.scene,o=n.chatroomUsername,i="shareAppMessageDirectly",a=e.toCurrentGroup;(a=1158===r?"boolean"!=typeof a||a:"boolean"==typeof a&&a)&&1158===r&&(t.chatroomUsername=o,i="shareAppMessageToSpecificContactDirectly"),G(t,i),Object(j.reportUserBehaviorBranchAnalyticsForDebug)({reportType:8,query:e.query})},z=function(e){M.on("callback",e)};function q(e){return Object(p.showLoading)({title:"请稍等"}),I({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((function(e){return Object(p.hideLoading)(),e})).then((function(t){var n=Object(E.generateFunctionalPagePath)({pageType:C.PAGE_TYPE.PLAY_PAGE_VIDEO,query:e.query});return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,a){var s={title:t.title,path:t.path,imageUrl:e.thumbUrl,cardSubType:Object(E.mapPageTypeToCardSubType)(n),messageExtraData:R({title:t.title,imageUrl:e.fileUrl,pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl},r)};Object(i.invokeMethod)("shareAppMessageDirectly",R(R({},s),{},{success:o,fail:a}))}))}(t,{title:e.title,path:n,imageUrl:t.thumbUrl},C.PAGE_TYPE.PLAY_PAGE_VIDEO,e)})).catch((function(e){Object(p.hideLoading)(),wxNativeConsole.error("fail",e)}))}},function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),t.default={query:{}}},function(e,t,n){n.r(t),n.d(t,"readFile",(function(){return h})),n.d(t,"readFileSync",(function(){return v}));var r=n(0),o=n(37),i=n(26),a=n(2),s=n(1),c=n(82),u=n(130),l=n(10),d=n(6),f=i.default.fs,p=!1;f&&f.FileReader&&s.default.onReady((function(){var e=!1,t=a.IS_IOS?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";Object(c._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(Object(u.setApiVersion)(/readFile(?:Sync)?$/,1),e=!0)},fail:function(e){}});var n=Object(o.checkPermissionSync)("bindingReadFile");p=e||n}));var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("readFile",e,{filePath:""}))if(Object(l.isUndefined)(e.encoding)||Object(l.isString)(e.encoding))if(Object(l.isUndefined)(e.position)||Object(l.isNumber)(e.position))if(Object(l.isUndefined)(e.length)||Object(l.isNumber)(e.length))if(p){var t=new f.FileReader;t.onerror=function(t){return Object(r.beforeInvokeFail)("readFile",e,t)},t.onread=function(t){return Object(r.beforeInvokeCallback)({name:"readFile",args:e,res:{data:t}})},t.read(e.filePath,e.encoding)}else Object(r.invokeMethod)("readFile",e);else Object(r.beforeInvokeFail)("readFile",e,"invalid length: "+e.length);else Object(r.beforeInvokeFail)("readFile",e,"invalid position: "+e.position);else Object(r.beforeInvokeFail)("readFile",e,"invalid encoding: "+e.encoding)},v=function(e,t,n,o){if(!e||!Object(l.isString)(e))throw new d.ThirdScriptError("invalid filePath: "+e);if(!Object(l.isUndefined)(t)&&!Object(l.isString)(t))throw new d.ThirdScriptError("invalid encoding: "+t);if(!Object(l.isUndefined)(n)&&!Object(l.isNumber)(n))throw new d.ThirdScriptError("invalid position: "+n);if(!Object(l.isUndefined)(o)&&!Object(l.isNumber)(o))throw new d.ThirdScriptError("invalid length: "+o);if(p)try{return f.readFileSync(e,t)}catch(a){throw new Error(a)}var i,a;if(Object(r.invokeMethod)("readFileSync",{filePath:e,encoding:t,position:n,length:o,success:function(e){i=e.data},fail:function(e){a=e.errMsg}}),a)throw new Error(a);return i}},function(e,t,n){n.r(t),n.d(t,"FakeImage",(function(){return m})),n.d(t,"SkiaCanvasFake",(function(){return I}));var r=n(14),o=n(19),i=n(8),a=n(4),s=n(5),c=n(0),u=n(25),l=n(44),d=n(65),f=n(147),p=n(43),h=n(64),v=n(1);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.default)(e);if(t){var a=Object(i.default)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(o.default)(this,n)}}var _={};function b(e,t){var n=Object(u.concatId)(t,e.canvasNumber),r=_[n];delete _[n],r&&r.dispose()}v.default.onReady((function(){Object(u.shouldUseOldCanvas)()&&(Object(c.subscribe)("skiaCanvasInsert",(function(e,t){Object(l.skiaCanvasInsert)(e,t),Object(p.onBeforeUnloadPage)(t,(function(){b(e,t)}))})),Object(c.subscribe)("skiaCanvasRemove",(function(e,t){Object(l.skiaCanvasRemove)(e,t),b(e,t),Object(c.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(c.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(u.concatId)(t,e.canvasNumber),r=l.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})))}));var y=function(){function e(){Object(a.default)(this,e)}return Object(s.default)(e,[{key:"width",get:function(){return this._w},set:function(e){this._w=e}},{key:"height",get:function(){return this._h},set:function(e){this._h=e}}]),e}(),m=function(){function e(){Object(a.default)(this,e),this._src=null,this._referrerPolicy=""}return Object(s.default)(e,[{key:"setSrc",value:function(e){var t=this;this._src=e,/^(http|https):\/\//.test(e)?Object(h._downloadFileSkipCheckDomain)({url:e,success:function(e){t._src=e.tempFilePath,"function"==typeof t.onload&&t.onload()},fail:this.onerror||function(){}}):"function"==typeof this.onload&&this.onload()}},{key:"getSrc",value:function(){return this._src}},{key:"getReferrerPolicy",value:function(){return this._referrerPolicy}},{key:"setReferrerPolicy",value:function(e){this._referrerPolicy=e}}]),e}(),w=function(){function e(){Object(a.default)(this,e)}return Object(s.default)(e,[{key:"sync",value:function(e){var t=this;this.t=setTimeout((function n(){e(),t.t=setTimeout(n,1e3/60)}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),O={offset:Date.now(),now:function(){return Date.now()-this.offset}},S=function(){function e(t){var n=this;Object(a.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new w,this.vSync.sync((function(){var e=new Map(n.callbacks);if(n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[O.now()])})),n.canvasView.actions.length>0){for(var t=!0,r=n.canvasView.actions,o=0;o<r.length;o++)"clearRect"===r[o].method&&(t=!1);n.canvasView.draw(t)}}))}return Object(s.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),I=function(e){Object(r.default)(n,e);var t=g(n);function n(){return Object(a.default)(this,n),t.apply(this,arguments)}return Object(s.default)(n,[{key:"_initCanvasInstance",value:function(){return this._context=new f.Context(this._webviewId,this._nodeCanvasId,this._nodeId,""),this._scheduler=new S(this._context),_[this._canvasId]=this._scheduler,new y}},{key:"getContext",value:function(){return Object(u.pipe)(d.decorateContextForImageProxy)(this._context,this.id)}},{key:"width",get:function(){var e=l.canvasMap.get(this);return e&&e.width},set:function(e){e!==this._width&&(this._context._ignoreScale=!0);var t=l.canvasMap.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=l.canvasMap.get(this);return e&&e.height},set:function(e){e!==this._height&&(this._context._ignoreScale=!0);var t=l.canvasMap.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){var e=new m,t=Object(u.wrapImageObject)(e,l.skiaCanvasMappings[this._canvasId]);return new d.SkiaImageProxy(t)}},{key:"createImageData",value:function(){return null}},{key:"createPath2D",value:function(){return null}},{key:"requestAnimationFrame",value:function(e){return this._scheduler.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){this._scheduler.cancelAnimationFrame(e)}}]),n}(l.SkiaCanvas)},function(e,t,n){var r;function o(e){r=e}function i(){return r}n.r(t),n.d(t,"setLastOnHideMode",(function(){return o})),n.d(t,"getLastOnHideMode",(function(){return i}))},function(e,t,n){n.r(t),n.d(t,"_getEnterOptionsSync",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l}));var r=n(1),o=n(11),i=n(124),a=n(98),s={},c=null;function u(){return s}function l(){return c||Object(a.getLaunchOptionsSync)()}r.default.onReady((function(){s=r.default.appLaunchInfo,Object(o.isGame)()&&(Object(i._onBaseFrameShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);s.referrerInfo=Object.assign({},s.referrerInfo,t.referrerInfo),delete t.referrerInfo,s=Object.assign({},s,t)})),Object(i.onShow)((function(e){c=e})))}))},function(e,t,n){n.r(t),n.d(t,"pageStorage",(function(){return o}));var r={},o={get:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return r[e]},set:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";r[t]=e},clear:function(){r={}}}},function(e,t,n){n.r(t),n.d(t,"reportUserCaptureScreen",(function(){return o})),n.d(t,"reportLandingPageShare",(function(){return i}));var r=n(53),o=function(e){return Object(r.reportMMData)(19213,e)},i=function(e){return Object(r.reportMMData)(19214,e)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return a}));var r=n(8),o=n(128);var i=n(94);function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return Object(i.default)(e,arguments,Object(r.default)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(o.default)(a,e)})(e)}},function(e,t,n){n.r(t),n.d(t,"Context",(function(){return S}));var r=n(4),o=n(5),i=n(20),a=n(0),s=n(6),c=n(68),u=n(75),l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"},d=n(3),f=n(25),p=n(2),h={},v={};function g(e){return"number"==typeof e}function _(e){var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e)))return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255];if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){var n=t[1].slice(0,1),r=t[1].slice(1,2),o=t[1].slice(2,3);return[n=parseInt(n+n,16),r=parseInt(r+r,16),o=parseInt(o+o,16),255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));var i=e.toLowerCase();if(Object(c.hasOwnProperty)(l,i)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(l[i]);var a=parseInt(t[1].slice(0,2),16),s=parseInt(t[1].slice(2,4),16),u=parseInt(t[1].slice(4,6),16),d=parseInt(t[1].slice(6,8),16);return[a,s,u,d=d>=0?d:255]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function b(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push(b(e))})),t}if("object"===Object(i.default)(e)){var n={};for(var r in e)n[r]=b(e[r]);return n}return e}function y(e,t){if(!(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){var n=e.pluginId.split("/")[0],r=__virtualDOM__.getNodeById(e.nodeId,e.webviewId),o=r&&r.is||"";t=n?0===t.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(s.getRealRoute)(o,t,!1).replace(/\.html$/,""):Object(s.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(o),t,!1).replace(/\.html$/,""):Object(s.getRealRoute)(o,t,!1).replace(/\.html$/,"")}else t=Object(s.getRealRoute)(d.default.lastRoute,t,!1).replace(/.html$/,"");return t}var m=function(){function e(t,n){Object(r.default)(this,e),this.type=t,this.data=n,this.colorStop=[]}return Object(o.default)(e,[{key:"addColorStop",value:function(e,t){u.SKIA_CANVAS_ENABLED?this.colorStop.push([e,t]):this.colorStop.push([e,_(t)])}}]),e}(),w=function e(t){Object(r.default)(this,e),this.width=t},O=function e(t,n){Object(r.default)(this,e),this.image=t,this.repetition=n},S=function(){function e(t,n,o,i){if(Object(r.default)(this,e),this.actions=[],this.path=[],this.subpath=[],this.webviewId=t,this.canvasId=n,this.pluginId=i,this.useHardwareAccelerate=!0,this.nodeId=o,this._id=Object(f.concatId)(t,n,i,o),this.drawingState=h[this._id]=h[this._id]||[],this.state=v[this._id]=v[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:u.SKIA_CANVAS_ENABLED?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},p.IS_DEVTOOLS||p.IS_PC){var a=document.createElement("canvas");this._context=a.getContext("2d")}}return Object(o.default)(e,[{key:"getActions",value:function(){var e=b(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}},{key:"clearActions",value:function(){this.actions=[],this.path=[],this.subpath=[]}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this.canvasId,r=b(this.actions),o=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?Object(u.drawCanvasImpl)({isWidgetCanvas:!0,actions:r,reserve:e}):Object(u.drawCanvasImpl)({canvasId:n,actions:r,reserve:e,useHardwareAccelerate:o,complete:t},this.webviewId,this.pluginId,this.nodeId)}},{key:"createLinearGradient",value:function(e,t,n,r){return new m("linear",[e,t,n,r])}},{key:"createCircularGradient",value:function(e,t,n){return new m("radial",[e,t,n])}},{key:"createPattern",value:function(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:y(this,e),new O(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}},{key:"measureText",value:function(e){var t;return p.IS_DEVTOOLS||p.IS_PC?(this._context.font=this.state.font,t=this._context.measureText(e)):Object(a.invokeMethod)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete:function(e){t={width:e.width||0}}}),new w(t.width||0)}},{key:"save",value:function(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}},{key:"restore",value:function(){this.actions.push({method:"restore",data:[]}),this.state=v[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:u.SKIA_CANVAS_ENABLED?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}},{key:"getLineDash",value:function(){return this.state.lineDash}},{key:"beginPath",value:function(){this.path=[],this.subpath=[],(p.IS_DEVTOOLS||u.SKIA_CANVAS_ENABLED)&&this.path.push({method:"beginPath",data:[]})}},{key:"moveTo",value:function(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}},{key:"closePath",value:function(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}},{key:"lineTo",value:function(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}},{key:"quadraticCurveTo",value:function(e,t,n,r){this.path.push({method:"quadraticCurveTo",data:[e,t,n,r]}),this.subpath.push([n,r])}},{key:"bezierCurveTo",value:function(e,t,n,r,o,i){this.path.push({method:"bezierCurveTo",data:[e,t,n,r,o,i]}),this.subpath.push([o,i])}},{key:"arc",value:function(e,t,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!p.IS_ANDROID||u.SKIA_CANVAS_ENABLED)return this.path.push({method:"arc",data:[e,t,n,r,o,i]}),void this.subpath.push([e,t]);var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n;if(this.subpath.push([a,s]),i&&r-o>=2*Math.PI||!i&&o-r>=2*Math.PI)this.subpath.push([a,s]);else{var c=e+Math.cos(o)*n,l=t+Math.sin(o)*n;this.subpath.push([c,l])}this.path.push({method:"arc",data:[e,t,n,r,o,i]})}},{key:"rect",value:function(e,t,n,r){this.path.push({method:"rect",data:[e,t,n,r]}),this.subpath=[[e,t]],p.IS_ANDROID&&!u.SKIA_CANVAS_ENABLED&&this.path.push({method:"closePath",data:[]})}},{key:"arcTo",value:function(e,t,n,r,o,i){if((!p.IS_ANDROID||u.SKIA_CANVAS_ENABLED)&&!i)return this.path.push({method:"arcTo",data:[e,t,n,r,o]}),void this.subpath.push([n,r]);var a=this.subpath[this.subpath.length-1],s=a[0],c=a[1];if(s===e&&c===t||e===n&&t===r||0===o)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(s===e&&s===n||c===t&&c===r)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);var l,d,f,h,v,g,_=Math.sqrt,b=Math.acos,y=Math.sin,m=Math.tan,w=Math.atan,O=Math.PI,S=function(e){return Math.pow(e,2)},I=s-e,E=c-t,C=n-e,T=r-t,k=b((I*C+E*T)/(_(S(I)+S(E))*_(S(C)+S(T))))/2,A=Math.round(o/y(k)*1e6)/1e6,P=Math.round(o/m(k)*1e6)/1e6;if(s-e==0)l=e,d=c-t>0?t+P:t-P;else if(c-t==0)l=s-e>0?e+P:e-P,d=t;else{var D=(c-t)/(s-e),j=c-D*s;d=D*(l=(_(S(I)+S(E))*P+I*e+E*t-j*E)/(I+D*E))+j}if(n-e==0)f=e,h=r-t>0?t+P:t-P;else if(r-t==0)f=n-e>0?e+P:e-P,h=t;else{var x=(r-t)/(n-e),R=r-x*n;h=x*(f=(_(S(C)+S(C))*P+C*e+T*t-R*T)/(C+x*T))+R}var M=(l+f)/2-e,N=(d+h)/2-t;if(0===N)v=e,g=N>0?t+A:t-A;else{var L=N/M,B=t-L*e;g=L*(v=(_(S(M)+S(N))*A+e*M+t*N-B*N)/(M+L*N))+B}v=Math.round(1e6*v)/1e6;var F=d-(g=Math.round(1e6*g)/1e6),W=l-v,U=O-2*k,V=w(F/W);0===F&&W<0&&(V=Math.PI);var G=(l-v)*(h-g)-(d-g)*(f-v);this.path.push({method:"arc",data:[v,g,o,V,G>0?V+U:V-U,G<0]}),this.subpath.push([f,h])}},{key:"getTransform",value:function(){return this._transform}},{key:"clip",value:function(){this.actions.push({method:"clip",data:b(this.path)})}},{key:"lineDashOffset",set:function(e){if(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)this.actions.push({method:"setLineDashOffset",data:[e]});else{var t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}},{key:"globalCompositeOperation",set:function(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}},{key:"shadowBlur",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}},{key:"shadowColor",set:function(e){var t;p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowColor",data:[e]}):(t=u.SKIA_CANVAS_ENABLED?e:p.IS_IOS&&0===this.state.shadowBlur?[]:_(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t)}},{key:"shadowOffsetX",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}},{key:"shadowOffsetY",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}},{key:"font",get:function(){return this.state.font},set:function(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var r=n[1].trim().split(/\s/),o=parseFloat(n[3]),i=n[7],a=[],s="",c=this;if(r.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(a.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(a.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(a.push({method:"setFontStyle",data:["normal"]}),c.state.fontStyle="normal"):1===n&&u()})),1===r.length&&u(),s=a.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=o,this.state.fontFamily=i,p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)return s=s+" "+o+"px "+i,void this.actions.push({method:"setFont",data:[s]});this.actions.push.apply(this.actions,a),this.actions.push({method:"setFontSize",data:[o]},{method:"setFontFamily",data:[i]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function u(){a.push({method:"setFontWeight",data:["normal"]}),c.state.fontWeight="normal"}}},{key:"fillStyle",set:function(e){I(this,"setFillStyle",e)}},{key:"strokeStyle",set:function(e){I(this,"setStrokeStyle",e)}},{key:"globalAlpha",set:function(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}},{key:"textAlign",set:function(e){this.actions.push({method:"setTextAlign",data:[e]})}},{key:"lineCap",set:function(e){this.actions.push({method:"setLineCap",data:[e]})}},{key:"lineJoin",set:function(e){this.actions.push({method:"setLineJoin",data:[e]})}},{key:"lineWidth",set:function(e){this.actions.push({method:"setLineWidth",data:[e]})}},{key:"miterLimit",set:function(e){this.actions.push({method:"setMiterLimit",data:[e]})}},{key:"textBaseline",set:function(e){this.actions.push({method:"setTextBaseline",data:[e]})}}]),e}();function I(e,t,n){"string"==typeof n?u.SKIA_CANVAS_ENABLED?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",_(n)]}):"object"===Object(i.default)(n)&&n instanceof m?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof O&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){S.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:b(this.path)})}:"fillRect"===e?function(e,t,n,r){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,r]}]})}:"strokeRect"===e?function(e,t,n,r){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,r]}]})}:"fillText"===e||"strokeText"===e?function(t,n,r,o){var i=[t.toString(),n,r];"number"==typeof o&&i.push(o),this.actions.push({method:e,data:i})}:"drawImage"===e?function(t,n,r,o,i,a,s,c,u){var l;t=t._src?t._src:y(this,t),void 0===u&&(a=n,s=r,c=o,u=i,n=void 0,r=void 0,o=void 0,i=void 0),l=g(n)&&g(r)&&g(o)&&g(i)?[t,a,s,c,u,n,r,o,i]:g(c)&&g(u)?[t,a,s,c,u]:[t,a,s],this.actions.push({method:e,data:l})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,r,o,i,a){this._transform={a:t,b:n,c:r,d:o,e:i,f:a},this.actions.push({method:e,data:[t,n,r,o,i,a]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?S.prototype[e]=function(){var t=arguments[0];I(this,e,t)}:"setGlobalAlpha"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,4]);u.SKIA_CANVAS_ENABLED||(t[3]=p.IS_IOS&&0===t[2]?[]:_(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?S.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:S.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}))},function(e,t,n){n.r(t),n.d(t,"getShareInfo",(function(){return s})),n.d(t,"showShareMenu",(function(){return u})),n.d(t,"hideShareMenu",(function(){return l})),n.d(t,"updateShareMenu",(function(){return h})),n.d(t,"showUpdatableMessageSubscribeButton",(function(){return g})),n.d(t,"shareAppMessageForFakeNative",(function(){return w})),n.d(t,"shareFileMessage",(function(){return P})),n.d(t,"shareVideoMessage",(function(){return x})),n.d(t,"ShareInfoStorage",(function(){return r.default})),n.d(t,"authPrivateMessage",(function(){return B})),n.d(t,"userShareMenuState",(function(){return c})),n.d(t,"showShareImageMenu",(function(){return Z}));var r=n(103),o=n(0),i=n(6),a=n(2),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.default.get(e.shareTicket);t?Object(o.baseOperateWXData)(Object(i.assign)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:function(e){a.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{var t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):Object(o.beforeInvokeFail)("getShareInfo",e,"invalid shareTicket")},c={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){c.showShareAppMessageMenu=!0;var r=new Promise((function(t,n){!0===e.withShareTicket?(c.withShareTicket=!0,Object(o.invokeMethod)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll:function(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail:function(e){e.errMsg+=", with arg withShareTicket: true"}})):(c.withShareTicket=!1,Object(o.invokeMethod)("showShareMenu",{success:t,fail:n}))}));n.push(r)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){c.showShareTimelineMenu=!0;var i=new Promise((function(e,t){Object(o.invokeMethod)("showShareTimelineMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){Object(o.beforeInvokeCallback)({name:"showShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");Object(o.beforeInvokeFail)("showShareMenu",e,n,t.errCode)}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function r(){return new Promise((function(e,t){Object(o.invokeMethod)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(c.showShareTimelineMenu=!1,n.push(r())),t.includes("shareAppMessage")){c.showShareAppMessageMenu=!1,0===n.length&&n.push(r());var i=new Promise((function(e,t){Object(o.invokeMethod)("hideShareMenu",{success:e,fail:t})}));n.push(i)}Promise.all(n).then((function(){Object(o.beforeInvokeCallback)({name:"hideShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");Object(o.beforeInvokeFail)("hideShareMenu",e,n,t.errCode)}))};function d(e){return new Promise((function(t,n){"boolean"==typeof e.withShareTicket?Object(o.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll:function(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail:function(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function f(e){return new Promise((function(t,n){if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){var r=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});Object(o.invokeMethod)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:r,success:t,fail:n}),!0===e.isPrivateMessage?c.isPrivateMessage=!0:!1===e.isPrivateMessage&&(c.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function p(e){return new Promise((function(t,n){"string"==typeof e.toDoActivityId?(Object(o.invokeMethod)("updateShareMenuUpdatable",{updatable:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),Object(o.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),Object(o.invokeMethod)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:function(e){wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:function(e){wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([d(e),f(e),p(e)]).then((function(t){"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((function(t){void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))},v=n(66),g=function(){Object(v.reportDeprecatedAPI)("showUpdatableMessageSubscribeButton"),console.warn("wx.showUpdatableMessageSubscribeButton 此接口已废弃")},_=n(1),b=n(3),y=n(81),m=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(o.beforeInvoke)("shareAppMessageForFakeNative",e,{title:"",bizType:0})){var t=Object.assign({useDefaultSnapshot:!0,disableForward:!1},e);if(e.path&&"string"==typeof e.path)t.path=m(__appServiceEngine__.convertComponentAliasToRoute(e.path));else{var n=Object.keys(b.default.query).map((function(e){return e+"="+b.default.query[e]})).join("&"),r=b.default.lastRoute+"?"+n;t.path=m(__appServiceEngine__.convertComponentAliasToRoute(r))}e.imageUrl&&"string"==typeof e.imageUrl&&(/^(http|https|wxfile):\/\//.test(e.imageUrl)?t.imageUrl=e.imageUrl:t.imageUrl=Object(y._getRealRoute)(e.imageUrl,!1));var i=_.default.accountInfo.appId;"wx60422b707e49ff2e"!==i&&(delete t.bizSourceName,delete t.bizSourceIconUrl),Object(o.invokeMethod)("shareAppMessageForFakeNative",t)}},O=n(13),S=n.n(O),I=n(16),E=n(38),C=n(15),T=n(95);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(I.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(C.async2Invoke)("shareFileMessage",Object(E.default)(S.a.mark((function e(){var t,n,r=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},Object(o.beforeInvokePromise)(t,{filePath:""}),n=Object(T.getLocalPath)(t.filePath),e.prev=3,e.next=6,Object(o.invokeMethodAsync)("shareFileMessage",A(A({},t),{},{filePath:n}));case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"cancel"===e.t0.message){e.next=12;break}throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))));function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){Object(I.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=Object(C.async2Invoke)("shareVideoMessage",Object(E.default)(S.a.mark((function e(){var t,n,r,i=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},Object(o.beforeInvokePromise)(t,{videoPath:""}),n=Object(T.getLocalPath)(t.videoPath),r=Object(T.getLocalPath)(t.thumbPath),e.prev=6,e.next=9,Object(o.invokeMethodAsync)("shareVideoMessage",j(j({},t),{},{videoPath:n,thumbPath:r}));case 9:e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(6),"cancel"===e.t0.message){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[6,11]])})))),R=n(36),M=n(37),N="authPrivateMessage",L=Object(R.constructOperateWXData)(!1,N);function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.default.get(e.shareTicket);t&&t.shareKey?Object(M.checkPermissionSync)("authShareRelationship")?L({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success:function(t){wxNativeConsole.info("webapi_authmgr res",t);var n=JSON.parse(t.respData.data),r={};r.iv=n.iv,r.encryptedData=n.encrypt_activity_id,r.valid=1===n.res,Object(o.beforeInvokeCallback)({name:N,args:e,res:r})},fail:e.fail}):Object(o.beforeInvokeFail)(N,e,"no permission"):Object(o.beforeInvokeFail)(N,e,"invalid shareTicket")}var F=n(24),W=n(158),U=n(41),V=n(48),G=Object(C.invoke2Async)(W.getImageInfo),H=1,z=3,q=4,Y=5,K=6,J=7,X=function(e){var t=e.action,n=_.default.appLaunchInfo||{},r=[_.default.appType+1e3,t,n.sessionid||n.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:r})},$=function(){var e=Object(E.default)(S.a.mark((function e(t){var n,r,o,i,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return __sclEngine__.initScl((function(t){return e(t.mainRoot)}))}));case 2:return n=e.sent,r=n.append("share-image",{imgPath:t.imgPath,height:t.height,width:t.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA",imageDarkSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),o=Object(V.setNavigateBackInterception)((function(e){[V.NavigationBackTypes.BottomBackButton,V.NavigationBackTypes.NavigationBackInterceptionType,V.NavigationBackTypes.NavigateBackCall].includes(e.type)&&r.handleClose()})),e.next=7,new Promise((function(e){["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((function(t){r.addListener(t,(function(){return e({action:t})}))}))}));case 7:return i=e.sent,a=i.action,Object(V.stopNavigateBackInterception)(o),e.abrupt("return",{action:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=Object(C.async2Invoke)("showShareImageMenu",Object(E.default)(S.a.mark((function e(){var t,n,r,o,i,s,c,u=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},Object(M.checkPermissionSync)("showShareImageMenu")){e.next=3;break}throw new Error("no permission");case 3:if(Object(F.beforeInvokePromise)(t,{path:""}),n=t.path,!/^\w+:\/\//.test(n)){e.next=10;break}if(/^wxfile:\/\//.test(n)||/^http:\/\/tmp\//.test(n)){e.next=8;break}throw new Error("invalid path");case 8:e.next=11;break;case 10:n="/"+Object(y._getRealRoute)(n,!1);case 11:return e.next=13,G({src:n});case 13:return r=e.sent,o=r.height,i=r.width,e.next=18,$({imgPath:n,height:o,width:i});case 18:s=e.sent,c=s.action,X({action:H}),e.t0=c,e.next="shareToFriend"===e.t0?24:"addToFavorites"===e.t0?37:"saveToAlbum"===e.t0?41:(e.t0,46);break;case 24:return e.prev=24,e.next=27,Object(F.invokeMethodAsync)("shareImageMessage",{imagePath:n});case 27:X({action:z}),e.next=36;break;case 30:if(e.prev=30,e.t1=e.catch(24),"cancel"!==e.t1.message){e.next=35;break}return X({action:q}),e.abrupt("return");case 35:throw e.t1;case 36:return e.abrupt("return");case 37:return X({action:Y}),e.next=40,Object(F.invokeMethodAsync)("addImageToFavorites",{url:n});case 40:return e.abrupt("return");case 41:return X({action:K}),e.next=44,Object(F.invokeMethodAsync)("saveImageToPhotosAlbum",{filePath:n});case 44:return a.IS_IOS&&Object(U.showToast)({icon:"success",title:"已保存"}),e.abrupt("return");case 46:throw X({action:J}),new Error("cancel");case 48:case"end":return e.stop()}}),e,null,[[24,30]])}))))},function(e,t,n){n.r(t),n.d(t,"publish",(function(){return o}));var r=n(150);function o(e,t,n){var o={data:t,options:{timestamp:Date.now()}};Object(r.publish)(e,o,n)}},function(e,t,n){function r(e,t,n){__safeway__.bridge.publish(e,t,n)}n.r(t),n.d(t,"publish",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"subscribe",(function(){return o}));var r=n(152);function o(e,t){Object(r.subscribe)(e,(function(e,n){var r=e.data,o=e.options,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o&&o.timestamp||0,s=Date.now();Reporter.speedReport({key:"webview2AppService",data:r||{},timeMark:{startTime:a,endTime:s,nativeTime:i.nativeTime||0}}),"function"==typeof t&&t(r,n)}))}},function(e,t,n){function r(e,t){__safeway__.bridge.subscribe(e,t)}n.r(t),n.d(t,"subscribe",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"invoke",(function(){return o}));var r=n(126);function o(e,t,n,o){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||Object(r.getAdUxInfo)()),__safeway__.bridge.invoke(e,t,n,o)}},function(e,t,n){n.r(t),n.d(t,"onMethod",(function(){return i}));var r=n(155),o=n(15);function i(e,t){Object(r.on)(e,Object(o.surroundByTryCatchFactory)(t,"at api "+e+" callback function"))}},function(e,t,n){function r(e,t){__safeway__.bridge.on(e,t)}n.r(t),n.d(t,"on",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return f})),n.d(t,"_getLaunchOptionsSync",(function(){return p}));var r,o,i=n(0),a=n(78),s=n(80),c=n(79),u=n(1),l=n(28),d=n(11);function f(){if(!r)throw new Error("getLaunchOptionsSync:fail get launch options");var e=Object(l.getPluginId)(this)||"";return Object(s.isolateInfo)(r||{},e)}function p(){if(!o)throw new Error("getLaunchOptionsSync:fail get launch options");return o||{}}Object(i.subscribe)("getLaunchAppInfo",(function(e,t){var n=e.callbackId;Object(i.publish)("appLaunchInfoGot",{res:{sceneHistory:a.default.sceneHistory,appId:a.default.appId},callbackId:n},[t])})),u.default.onReady((function(){if(!Object(d.isGame)()){var e=u.default.appLaunchInfo||{};Object.assign(e,u.default.debugLaunchInfo||{}),a.default.appLaunchInfo=e,a.default.appLaunchShareInfo=e.shareInfo,Object(c.setInnerEnterOptions)(e),o=Object(s.filterInfo)(e,!0),r=Object(s.filterPublicInfo)(o,u.default.preloadType),o.__public=Object(s.isolateInfo)(r,""),Object(c.setEnterOptions)(r)}}))},function(e,t,n){n.r(t),n.d(t,"onDomReady",(function(){return f})),n.d(t,"onWebviewEvent",(function(){return p}));var r=n(0),o=n(6),i=n(3),a=n(2),s=n(22),c=Object(s.getEventManager)("XWebTextareaSupportedEvent"),u=!1;Object(r.subscribe)("xWebTextareaSupported",(function(e){var t=e.canInsert2XWeb;u=t,c.emit({canInsert2XWeb:t})})),(a.IS_DEVTOOLS||a.IS_WINDOWS||a.IS_MAC||a.IS_ANDROID||a.IS_MINA)&&Object(r.subscribe)("SPECIAL_PAGE_EVENT",(function(e){var t=e.data,n=e.eventName,s=e.ext,c=e.nodeId,l=e.instanceId,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((!a.IS_ANDROID||u)&&(t&&"input"===t.type&&s&&s.modelValueName&&__virtualDOM__.setModelValueData(t.detail.value,s.modelValueName,d,c),t&&"input"===t.type&&"function"==typeof i.default.webviewEventCallback)){var f=i.default.webviewEventCallback({data:t,eventName:n,webviewId:d,nodeId:c}),p=t.detail.value;if(s&&s.setKeyboardValue)if(void 0===f);else if("Object"===Object(o.getDataType)(f)){var h={};l&&(h.instanceId=l),p!==f.value&&(h.value=f.value+""),Number.isNaN(parseInt(f.cursor,10))||(h.cursor=parseInt(f.cursor,10)),Object(r.publish)("setKeyboardValue",h,[d])}else p!==f&&Object(r.publish)("setKeyboardValue",{value:f+"",cursor:-1,instanceId:l},[d])}}));var l="__DOMReady",d=Object(s.getEventManager)("DomReady"),f=d.internalOnMethod,p=function(e){i.default.webviewEventCallback=e,Object(r.subscribe)("PAGE_EVENT",(function(t){var n=t.data,r=t.eventName,o=t.nodeId,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r===l&&d.emit({data:n,eventName:r,webviewId:i,nodeId:o}),e({data:n,eventName:r,webviewId:i,nodeId:o})}))}},function(e,t,n){n.r(t),n.d(t,"chooseImage",(function(){return p})),n.d(t,"previewImage",(function(){return h})),n.d(t,"_getImageInfoWithDownloadFile",(function(){return g})),n.d(t,"getImageInfo",(function(){return v})),n.d(t,"saveImageToPhotosAlbum",(function(){return _})),n.d(t,"compressImage",(function(){return b}));var r=n(31),o=n(0),i=n(6),a=n(3),s=n(64),c=n(58),u=n(60),l=n(1);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.invokeMethod)("chooseImage",Object(i.assign)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess:function(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((function(e){return e})).map((function(t,n){return{path:t,size:e.tempFileSizes[n]}})):e.tempFiles=(e.tempFiles||[]).filter((function(e){return e.path&&"number"==typeof e.size})),delete e.tempFileSizes}})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(o.beforeInvoke)("previewImage",e,{urls:[""]})){var t,n=l.default.version,i=l.default.system,a="7.0.12"===n&&i.indexOf("iOS 13.4")>=0,s=d(e.urls);try{for(s.s();!(t=s.n()).done;){var f=t.value;if(/^\s*data:image\//.test(f)&&a)return void Object(o.beforeInvokeFail)("previewImage",e,"url can not be base64 on iOS 13.4")}}catch(e){s.e(e)}finally{s.f()}var p=Object.assign({},e);p.urls=p.urls.slice(),p.referrerPolicy=p.referrerPolicy||"origin",Object(u.getCloudFileUrl)(p.urls,"image",(function(e){var t=p.urls;if(p.urls=Object(r.default)(e.data.map((function(e){return e.url}))),p.current){var n=t.indexOf(p.current);n>=0&&(p.current=p.urls[n])}p.urls&&(p.urls=p.urls.map((function(e){return c.FakeTempFilePathMap.get(e)||e}))),Object(o.invokeMethod)("previewImage",p)}))}},v=function(e){var t=Object.assign({},e),n=[t.src];Object(u.getCloudFileUrl)(n,"image",(function(e){return t.src=e.data[0].url,g(t,s.downloadFile)}))},g=function(e,t){Object(o.beforeInvoke)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?Object(o.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success:function(t){404!==t.statusCode?(e.src=t.tempFilePath,Object(o.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})):Object(o.beforeInvokeFail)("getImageInfo",e,"image not found (404)")},fail:function(t){Object(o.beforeInvokeFail)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=Object(i.getRealRoute)(a.default.lastRoute,e.src,!1),Object(o.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})))},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.filePath=c.FakeTempFilePathMap.get(e.filePath)||e.filePath,Object(o.invokeMethod)("saveImageToPhotosAlbum",e,{})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={src:"",quality:80};t=Object(i.extend)(t,e),Object(o.beforeInvoke)("compressImage",t,{src:"",quality:80})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/(tmp|store)\//.test(e.src)||(t.src=Object(i.getRealRoute)(a.default.lastRoute,t.src,!1)),Object(o.invokeMethod)("compressImage",t))}},function(e,t,n){n.r(t),n.d(t,"addCard",(function(){return u})),n.d(t,"openCard",(function(){return l}));var r=n(0),o=n(71),i=n(49),a=!1,s=null,c=null;Object(i.onAppRoute)((function(){a=!0})),Object(o.onAppRouteDone)((function(){a=!1,s&&(u(s),s=null),c&&(l(c),c=null)}));var u=function(e){Object(r.beforeInvoke)("addCard",e,{cardList:[]})&&(a?s=e:Object(r.invokeMethod)("addCard",e))},l=function(e){Object(r.beforeInvoke)("openCard",e,{cardList:[]})&&(a?c=e:Object(r.invokeMethod)("openCard",e))}},function(e,t,n){n.r(t),n.d(t,"_getNativeUserInfo",(function(){return i}));var r=n(0),o=n(2),i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a.apiName="webapi_getuserinfo",Object(r.beforeInvoke)("operateWXData",a,{apiName:""})){var s=wx&&wx.version&&wx.version.version||"",c={api_name:a.apiName,from_component:!0,data:a.reqData||{},operate_directly:e};c.data.version=s,n&&(c.plugin_appid=a.pluginId);var u={data:c,isImportant:!0===i,requestInQueue:!a.hasOwnProperty("requestInQueue")||Boolean(a.requestInQueue)};new Date,new Date,Object(r.baseOperateWXData)(Object.assign({},u,a),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){new Date,new Date,o.IS_ANDROID&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}}(!1,void 0,!0)},function(e,t,n){n.r(t),n.d(t,"_chooseAddressForPlugin",(function(){return i}));var r=n(0),o=n(6),i=function(e){Object(r.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(o.renameProperty)(e,"addressPostalCode","postalCode"),Object(o.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(o.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(o.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(o.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddressForPlugin"),delete e.err_msg}})}},function(e,t,n){n.r(t),n.d(t,"_requestPaymentForPlugin",(function(){return l}));var r=n(0),o=n(45),i=n(41),a=n(96),s=n(1),c=n(54),u=n(59),l=function(e){Object(a.getRequestPaymentFromStorage)((function(t){var n=(+new Date-(t||0))/1e3/60,r=!1,o="",c=s.default&&s.default.appContactInfo&&s.default.appContactInfo.operationInfo&&s.default.appContactInfo.operationInfo.jsonInfo&&s.default.appContactInfo.operationInfo.jsonInfo.warning_info&&s.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];c&&c.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(r=!0,o=e.wording)})),r&&n>30?Object(i._showModal)({content:o,confirmText:"继续支付",cancelText:"取消",success:function(t){t.confirm&&(Object(a.setRequestPaymentToStorage)(+new Date),d(e))}}):d(e)}))},d=function(e){if(Object(r.beforeInvoke)("requestPayment",e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""})){e=Object.assign({},e);var t=Object(c.getPayCookieString)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,Object(r.invokeMethod)("requestPayment",Object.assign({},e,{grantMessageQuota:!0}),{beforeSuccess:function(){Object(o.invokeWebviewMethod)("reportPaymentFormId",{packageStr:e.package}),Object(u._setWxIsInvokeInTapForNavToMiniProgram)()}})}}},function(e,t,n){n.r(t),n.d(t,"_openSettingForPlugin",(function(){return o}));var r=n(0),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{})}})}},function(e,t,n){n.r(t),n.d(t,"chooseInvoiceTitle",(function(){return o}));var r=n(0),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("chooseInvoiceTitle",e,{beforeSuccess:function(e){var t=e.invoiceTitleInfo||e.choose_invoice_title_info;if(t)try{var n=JSON.parse(t);delete e.invoiceTitleInfo,delete e.choose_invoice_title_info,e=Object.assign(e,n)}catch(e){}}})}},function(e,t,n){n.r(t),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return u})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return c}));var r=n(32),o=n(0),i=n(1),a=Object(r.default)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,eventType:e.eventType}]}})),s=Object(r.default)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:e.reportType,query:e.query}]}}));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"release"!==i.default.envVersion&&s(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"!=typeof e.branchId?Object(o.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchId must be a string"):e.branchDim&&"string"!=typeof e.branchDim?Object(o.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchDim is an optional string"):1!==e.eventType&&2!==e.eventType?Object(o.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"eventType must be 1 or 2"):(a(e),c({branchId:e.branchId,branchDim:e.branchDim,reportType:e.eventType}))}},function(e,t,n){n.r(t),n.d(t,"updateWindowSizeStatus",(function(){return p})),n.d(t,"onWindowResize",(function(){return h})),n.d(t,"offWindowResize",(function(){return v}));var r=n(0),o=[],i=null,a=null,s=!1,c=[],u=!1,l="",d=0,f=0,p=function(e){e.deviceOrientation&&(l=e.deviceOrientation),d=e.size.windowWidth,f=e.size.windowHeight};Object(r.onMethod)("onViewDidResize",(function(e){!function(e){i=e;var t=!1,n=!0;e.deviceOrientation!==l&&(t=!0),e.size.windowWidth!==d&&(t=!0),e.size.windowHeight!==f&&(t=!0),p(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(u=!0),"auto"===e.pageOrientation.originalPageOrientation||u||(t=!1,n=!1)),void 0!==__appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(n=!1),t&&(s=!0);var r=e.changedWebviewIds;n&&r&&r.forEach((function(e){c.indexOf(e)<0&&c.push(e)})),a||(a=setTimeout((function(){a=null;var e=s;s=!1;var t=c;c=[];var n={deviceOrientation:i.deviceOrientation,size:i.size};e&&o.forEach((function(e){__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((function(e){var t=void 0!==__appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((function(){t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))}(e)}));var h=function(e){o.push(e)},v=function(e){o.splice(o.indexOf(e),1)}},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return c})),n.d(t,"omit",(function(){return u})),n.d(t,"isObject",(function(){return l})),n.d(t,"mergeDeep",(function(){return d})),n.d(t,"getMembers",(function(){return f})),n.d(t,"get",(function(){return p})),n.d(t,"flatten",(function(){return h})),n.d(t,"cloneDeep",(function(){return v}));var r=n(31),o=n(16),i=n(20);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},u=function(e,t){return c(e,Object.keys(e).filter((function(e){return!t.includes(e)})))},l=function(e){return e&&"object"===Object(i.default)(e)&&!Array.isArray(e)};function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var i=n.shift();if(l(e)&&l(i))for(var a=0,s=Object.keys(i);a<s.length;a++){var c=s[a];l(i[c])?(e[c]||Object.assign(e,Object(o.default)({},c,{})),d(e[c],i[c])):Object.assign(e,Object(o.default)({},c,i[c]))}return d.apply(void 0,[e].concat(n))}var f=function(e){for(var t=new Set,n=e;n;){var o,i=a(Object.getOwnPropertyNames(n));try{for(i.s();!(o=i.n()).done;){var s=o.value;t.add(s)}}catch(e){i.e(e)}finally{i.f()}n=Object.getPrototypeOf(n)}return Object(r.default)(t)},p=function(e,t,n){for(var r="string"==typeof t?t.split("."):t,o=e,i=0;o&&i<r.length;)o=o[r[i]],i+=1;return o||n},h=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?t.push.apply(t,Object(r.default)(e(n))):t.push(n),t}),[])},v=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){n.r(t),n.d(t,"onUserCaptureScreen",(function(){return u})),n.d(t,"offUserCaptureScreen",(function(){return l})),n.d(t,"_onUserCaptureScreen",(function(){return a})),n.d(t,"_offUserCaptureScreen",(function(){return s}));var r=n(0),o=n(22),i=Object(o.getEventManager)("userCaptureScreen"),a=i.onMethod,s=i.offMethod,c=null;Object(r.onMethod)("onUserCaptureScreen",(function(e){"function"==typeof c&&c(e),i.emit(e)}));var u=function(e){c=__errorTracer__.surroundThirdByTryCatch(e,"at onUserCaptureScreen callback function")},l=function(){c=null}},function(e,t,n){n.r(t),n.d(t,"getMenuButtonBoundingClientRect",(function(){return i}));var r=n(0),o=n(6),i=function(){var e,t={};if(Object(r.invokeMethod)("getMenuButtonBoundingClientRect",{success:function(e){Object.assign(t,e),delete t.errMsg},fail:function(t){e=t.errMsg}}),e)throw new o.ThirdScriptError(e);return t}},function(e,t,n){n.r(t),n.d(t,"navigateBackApplication",(function(){return c})),n.d(t,"launchApplication",(function(){return u})),n.d(t,"launchApplicationForNative",(function(){return l})),n.d(t,"launchApplicationDirectly",(function(){return d}));var r=n(0),o=n(37),i=n(2),a=n(36),s=__safeway__.apiSign.makeApiSign,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s("navigateBackApplication",e);Object(r.invokeMethod)("navigateBackApplication",t,{})},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.launchAppid&&"string"==typeof e.launchAppid?Object(a._operateWXData)({apiName:"wxaapi_verify_jump",reqData:{appid:e.launchAppid},success:function(t){"ok"===JSON.parse(t.rawData).res?Object(r.invokeMethod)("launchApplication",Object.assign(e,{appId:e.launchAppid,operateDirectly:!0})):Object(r.beforeInvokeFail)("launchApplication",e,"no permission")},fail:function(t){wxNativeConsole.error("[launchApplication][wxaapi_verify_jump] fail",t),Object(r.beforeInvokeFail)("launchApplication",e,"no permission")}}):(delete e.operateDirectly,Object(r.invokeMethod)("launchApplication",e,{}))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};delete e.operateDirectly,Object(r.invokeMethod)("launchApplicationForNative",e,{})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.checkPermissionSync)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,i.IS_IOS?Object(o.checkPermissionSync)("launchApplicationDirectly")?Object(r.invokeMethod)("launchApplication",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((function(){return Object(r.beforeInvokeFail)("launchApplicationDirectly",e,"no permission")})):Object(r.invokeMethod)("launchApplicationDirectly",e,{})}},function(e,t,n){n.r(t),n.d(t,"setNavigationBarTitle",(function(){return d})),n.d(t,"showNavigationBarLoading",(function(){return f})),n.d(t,"hideNavigationBarLoading",(function(){return p})),n.d(t,"_onNavigationBarTitleUpdate",(function(){return l})),n.d(t,"setNavigationBarAlpha",(function(){return m})),n.d(t,"setNavigationBarColor",(function(){return y})),n.d(t,"_getNavigationBarColor",(function(){return w})),n.d(t,"setNavigationBarRightButton",(function(){return O})),n.d(t,"onTapNavigationBarRightButton",(function(){return S})),n.d(t,"hideHomeButton",(function(){return E}));var r=n(16),o=n(0),i=n(22),a=n(3);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(i.getEventManager)("NavigationBarTitleUpdate"),l=u.internalOnMethod,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.beforeInvoke)("setNavigationBarTitle",e,{title:""})&&(a.default.navigationBarTitleMap[a.default.lastRoute]=e.title,a.default.lastRoute,e.title,Object(o.invokeMethod)("setNavigationBarTitle",e,{beforeAll:function(t){u.emitInternal(c({title:e.title},t))}}))},f=function(e){Object(o.invokeMethod)("showNavigationBarLoading",e)},p=function(e){Object(o.invokeMethod)("hideNavigationBarLoading",e)},h=n(49),v=n(1),g="#000000",_="#ffffff";function b(e){var t=(v.default.appContactInfo||{}).operationInfo||{};if(t.jsonInfo&&t.jsonInfo.op_info&&1===Number(t.jsonInfo.op_info.gray_flag)&&0===v.default.appType){var n=/^#([0-9|A-F|a-f]{6})$/.exec(e);if(null!=n){var r=parseInt(n[1].slice(0,2),16),i=parseInt(n[1].slice(2,4),16),a=parseInt(n[1].slice(4),16),s=Math.round(.299*r+.587*i+.114*a).toString(16).toUpperCase();Object(o.invokeMethod)("setNavigationBarColor",{frontColor:_,backgroundColor:"#"+s+s+s})}}}v.default.onReady((function(){Object(h.onAppRoute)((function(){if(void 0!==v.default&&v.default.global&&v.default.global.window){var e=v.default.global.window;g=e.navigationBarBackgroundColor||g,_="black"===e.navigationBarTextStyle?"#000000":"#ffffff"}var t=a.default.lastRoute+".html";if(void 0!==v.default&&v.default.page&&v.default.page[t]&&v.default.page[t].window){var n=v.default.page[t].window;g=n.navigationBarBackgroundColor||g,_="black"===n.navigationBarTextStyle?"#000000":"#ffffff"}b(g)}))}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(o.beforeInvoke)("setNavigationBarColor",e,{frontColor:"",backgroundColor:""}))if(-1!==["#ffffff","#000000"].indexOf(e.frontColor)){"#ffffff"===e.frontColor?Object(o.invokeMethod)("setStatusBarStyle",{color:"white"}):"#000000"===e.frontColor&&Object(o.invokeMethod)("setStatusBarStyle",{color:"black"});var t=Object.assign({},e);g=e.backgroundColor,_=e.frontColor,Object(o.invokeMethod)("setNavigationBarColor",t),b(g)}else Object(o.beforeInvokeFail)("setNavigationBarColor",e,'invalid frontColor "'+e.frontColor+'"')},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);t.backgroundColor=g,Object(o.invokeMethod)("setNavigationBarColor",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("setNavigationBarColor","setNavigationBarAlpha")}})},w=function(){return{backgroundColor:g,frontColor:_}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.beforeInvoke)("setNavigationBarRightButton",e,{hide:!0})&&Object(o.invokeMethod)("setNavigationBarRightButton",e,{})},S=function(e){Object(o.onMethod)("onCustomRightButtonClick",__errorTracer__.surroundThirdByTryCatch(e,"at onTapNavigationBarRightButton callback function"))},I=n(2),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(I.IS_ANDROID&&v.default.clientVersion<654313216||I.IS_IOS&&v.default.clientVersion<385877760){var t={errMsg:"hideHomeButton:ok"};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}else Object(o.invokeMethod)("hideHomeButton",e,{})}},function(e,t,n){function r(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"handleRewriteRoute",(function(){return g})),n.d(t,"handlePluginProtocol",(function(){return v})),n.d(t,"onAppRoutePageNotFound",(function(){return u})),n.d(t,"offAppRoutePageNotFound",(function(){return l})),n.d(t,"emitAppRoutePageNotFound",(function(){return d}));var r=n(116),o=n(22),i=n(6),a=n(51),s=Object.hasOwnProperty,c=Object(o.getEventManager)("AppRouteNotFound"),u=c.onMethod,l=c.offMethod,d=c.emit,f=function(e,t){a.nativeConsole.info("[rewriteRoute] (webviewId="+t+") "+e)},p={},h=function(e,t){var n=0;if(s.call(e,"originalWebviewId"))n=e.originalWebviewId,f("Found originalWebviewId="+n,t);else{if(1!==Object.keys(p).length)return f("No originalWebviewId found and we have "+Object.keys(p).length+" backup data, guess failed, cleaning backups and giving up",t),p={},e;n=Object.keys(p)[0],f("No originalWebviewId found and guess it="+n,t)}var r=p[n];return delete p[n],["openType","wxMaterial","location","prerender"].forEach((function(t){e[t]=r[t]})),e},v=function(e,t){var n=t.needHtmlSuffix,r=e.replace(/\.html(\?|$)/i,(function(e){return e.slice(5)})),o=Object(i.convertProtocolPath)(r);if("/"===o[0]&&(o=o.slice(1)),!n)return o;var a=o.indexOf("?");return a<0&&(a=o.length),o.slice(0,a)+".html"+o.slice(a)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=h(e,t)),!e.notFound)return!1;for(var n=!1,o=e.rawPath;/^[-_+a-z]+:\/\//i.test(o);){f(o+" has protocol, try rewriting",t);try{o=v(o,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),Object(r.invokeMethod)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(p[t]=e,f('rewriteRoute from "'+e.rawPath+'" to "'+o+'"',t),Object(r.invokeMethod)("rewriteRoute",{url:o,webviewId:t}),!0):(d(e,t),!1)}},function(e,t,n){function r(e){if(Array.isArray(e))return e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"getFileInfo",(function(){return i}));var r=n(0),o=n(10),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){var t=Object(o.paramCheck)(e,{digestAlgorithm:""});if(t)return void Object(r.beforeInvokeFail)("getFileInfo",e,"parameter error: "+t);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void Object(r.beforeInvokeFail)("getFileInfo",e,'parameter error: invalid digestAlgorithm "'+e.digestAlgorithm+'"')}Object(r.invokeMethod)("getFileInfo",e,{})}}},function(e,t,n){n.r(t),n.d(t,"WxPromise",(function(){return i}));var r=n(4),o=n(5),i=function(){function e(t){var n=this;if(Object(r.default)(this,e),this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof t)throw new TypeError("Promise resolver is not a function");try{t((function(e){"pending"===n._status&&(n._status="then",n._return=e,n._consume())}),(function(e){"pending"===n._status&&(n._status="catch",n._return=e,n._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}return Object(o.default)(e,[{key:"_consume",value:function(){if("pending"!==this._status){var e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}}},{key:"then",value:function(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}},{key:"catch",value:function(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}}],[{key:"resolve",value:function(t){return new e((function(e){return e(t)}))}},{key:"reject",value:function(t){return new e((function(){throw t}))}}]),e}()},function(e,t,n){n.r(t),n.d(t,"checkNetworkAPIURL",(function(){return i}));var r=n(0),o=n(11),i=function(e){var t=e.api,n=e.url;return Object(o.skipURLCheck)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!1}):new Promise((function(e,o){Object(r.invokeMethod)("checkNetworkAPIURL",{api:t,url:n,success:e,fail:o})}))}},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerIOS",(function(){return b})),n.d(t,"SkiaCanvasIOS",(function(){return y}));var r=n(94),o=n(4),i=n(5),a=n(39),s=n(14),c=n(19),u=n(8),l=n(0),d=n(25),f=n(2),p=n(44),h=n(65),v=n(106),g=n(110);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(u.default)(e);if(t){var o=Object(u.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.default)(this,n)}}f.IS_IOS&&(Object(l.subscribe)("skiaCanvasInsert",(function(e,t){Object(p.skiaCanvasInsert)(e,t)})),Object(l.subscribe)("skiaCanvasRemove",(function(e,t){Object(p.skiaCanvasRemove)(e,t),Object(l.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(l.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(d.concatId)(t,e.canvasNumber),r=p.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})));var b=function(t){Object(s.default)(r,t);var n=_(r);function r(){return Object(o.default)(this,r),n.apply(this,arguments)}return Object(i.default)(r,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(a.default)(Object(u.default)(r.prototype),"loadFontFace",this).call(this,t);var n=e.skiacanvasLoadNewFont;if("function"==typeof n){var o=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(o)}}}]),r}(p.CanvasFontManager),y=function(t){Object(s.default)(c,t);var n=_(c);function c(){return Object(o.default)(this,c),n.apply(this,arguments)}return Object(i.default)(c,[{key:"_initCanvasInstance",value:function(){return p.CanvasFontManager.initialize(b),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(d.pipe)(h.decorateContextForImageProxy,v.temporarilyPatchContext)(Object(a.default)(Object(u.default)(c.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image,n=Object(d.wrapImageObject)(t,p.skiaCanvasMappings[this._canvasId]);return new h.SkiaImageProxy(n)}},{key:"createImageData",value:function(t,n,r){return t?(n=parseFloat(n),r=parseFloat(r),new e.ImageData(t,n,r)):null}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?new Path2D:1===t.length?Object(r.default)(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return Object(g.getWeixinCanvas)().requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return Object(g.getWeixinCanvas)().cancelAnimationFrame(e)}}]),c}(p.SkiaCanvas)}.call(this,n(76))},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerAndroid",(function(){return E})),n.d(t,"SkiaCanvasAndroid",(function(){return C}));var r=n(94),o=n(39),i=n(14),a=n(19),s=n(8),c=n(4),u=n(5),l=n(1),d=n(26),f=n(0),p=n(2),h=n(25),v=n(44),g=n(65),_=n(106),b=n(43);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.default)(e);if(t){var o=Object(s.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(a.default)(this,n)}}var m={};function w(e,t){var n=Object(h.concatId)(t,e.canvasNumber),r=m[n];delete m[n],r&&r.dispose()}p.IS_ANDROID&&(Object(f.subscribe)("skiaCanvasInsert",(function(e,t){Object(v.skiaCanvasInsert)(e,t),Object(b.onBeforeUnloadPage)(t,(function(){w(e,t)}))})),Object(f.subscribe)("skiaCanvasRemove",(function(e,t){Object(v.skiaCanvasRemove)(e,t),w(e,t),Object(f.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(f.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(h.concatId)(t,e.canvasNumber),r=v.canvasRefMapById[n];r&&(r._top=e.position.top,r._left=e.position.left,r._width=e.position.width,r._height=e.position.height)})),Object(f.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(h.concatId)(t,e.viewId),r=v.canvasRefMapById[n];r&&"function"==typeof r._swap&&r._swap()})));var O=function(){function e(){Object(c.default)(this,e)}return Object(u.default)(e,[{key:"sync",value:function(e){this.t=setInterval((function(){e()}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),S={offset:Date.now(),now:function(){return Date.now()-this.offset}},I=function(){function e(t){var n=this;Object(c.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new O,this.vSync.sync((function(){var e=new Map(n.callbacks);n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[S.now()])})),n.canvasView.present()}))}return Object(u.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),E=function(t){Object(i.default)(r,t);var n=y(r);function r(){return Object(c.default)(this,r),n.apply(this,arguments)}return Object(u.default)(r,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(o.default)(Object(s.default)(r.prototype),"loadFontFace",this).call(this,t);var n=d.default.SkiaCanvasLoadNewFont||e.SkiaCanvasLoadNewFont;if("function"==typeof n){var i=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(i)}}}]),r}(v.CanvasFontManager),C=function(t){Object(i.default)(a,t);var n=y(a);function a(){return Object(c.default)(this,a),n.apply(this,arguments)}return Object(u.default)(a,[{key:"_initCanvasInstance",value:function(){v.CanvasFontManager.initialize(E);var t=(d.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id),n=(d.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t);return this._scheduler=new I(t),m[this._canvasId]=this._scheduler,this._swap=function(){t.swapSurface()},n}},{key:"getContext",value:function(e,t){return Object(h.pipe)(g.decorateContextForImageProxy,_.temporarilyPatchContext)(Object(o.default)(Object(s.default)(a.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(d.default.SkiaImages||SkiaImage),t=Object(h.wrapImageObject)(e,v.skiaCanvasMappings[this._canvasId]);return new g.SkiaImageProxy(t)}},{key:"createImageData",value:function(t,n,r){return t?(n=parseFloat(n),r=parseFloat(r),new(d.default.SkiaImageData||e.SkiaImageData)(t,n,r)):null}},{key:"createPath2D",value:function(){for(var t=d.default.SkiaPath2D||e.SkiaPath2D,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return 0===o.length?new t:1===o.length?Object(r.default)(t,o):null}},{key:"requestAnimationFrame",value:function(t){return l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasRequestAnimationFrame||e.SkiaCanvasRequestAnimationFrame)(t):this._scheduler.requestAnimationFrame(t)}},{key:"cancelAnimationFrame",value:function(t){l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasCancelAnimationFrame||e.SkiaCanvasCancelAnimationFrame)(t):this._scheduler.cancelAnimationFrame(t)}}]),a}(v.SkiaCanvas)}.call(this,n(76))},function(e,t,n){n.r(t);var r=function(){var e,t="inherit",n="row",r="row-reverse",o="column",i="column-reverse",a="flex-start",s="center",c="flex-start",u="center",l="flex-end",d="stretch",f="relative",p="absolute",h={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},v={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},g={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},_={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function b(e){return void 0===e}function y(e){return e===n||e===r}function m(e,t){if(void 0!==e.style.marginStart&&y(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function w(e,t){if(void 0!==e.style.marginEnd&&y(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function O(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&y(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function S(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&y(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function I(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&y(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+O(e,t)}function E(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&y(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+S(e,t)}function C(e,t){return O(e,t)+S(e,t)}function T(e,t){return m(e,t)+w(e,t)}function k(e,t){return I(e,t)+E(e,t)}function A(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function P(e,t){if("rtl"===t){if(e===n)return r;if(e===r)return n}return e}function D(e,t){return function(e){return e===o||e===i}(e)?P(n,t):o}function j(e){return e.style.position?e.style.position:"relative"}function x(e){return j(e)===f&&e.style.flex>0}function R(e,t){return e.layout[_[t]]+T(e,t)}function M(e,t){return void 0!==e.style[_[t]]&&e.style[_[t]]>=0}function N(e,t){return void 0!==e.style[t]}function L(e,t){return void 0!==e.style[t]?e.style[t]:0}function B(e,t,n){var r={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],o={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],i=n;return void 0!==o&&o>=0&&i>o&&(i=o),void 0!==r&&r>=0&&i<r&&(i=r),i}function F(e,t){return e>t?e:t}function W(e,t){void 0===e.layout[_[t]]&&M(e,t)&&(e.layout[_[t]]=F(B(e,t,e.style[_[t]]),k(e,t)))}function U(e,t,n){t.layout[v[n]]=e.layout[_[n]]-t.layout[_[n]]-t.layout[g[n]]}function V(e,t){return void 0!==e.style[h[t]]?L(e,h[t]):-L(e,v[t])}function G(S,G,z){var q=function(e,n){var r;return(r=e.style.direction?e.style.direction:t)===t&&(r=void 0===n?"ltr":n),r}(S,z),Y=P(function(e){return e.style.flexDirection?e.style.flexDirection:o}(S),q),K=D(Y,q),J=P(n,q);W(S,Y),W(S,K),S.layout.direction=q,S.layout[h[Y]]+=m(S,Y)+V(S,Y),S.layout[v[Y]]+=w(S,Y)+V(S,Y),S.layout[h[K]]+=m(S,K)+V(S,K),S.layout[v[K]]+=w(S,K)+V(S,K);var X=S.children.length,$=k(S,J);if(function(e){return void 0!==e.style.measure}(S)){var Z=!b(S.layout[_[J]]),Q=e;Q=M(S,J)?S.style.width:Z?S.layout[_[J]]:G-T(S,J),Q-=$;var ee=!M(S,J)&&!Z,te=!M(S,o)&&b(S.layout[_.column]);if(ee||te){var ne=S.style.measure(Q);ee&&(S.layout.width=ne.width+$),te&&(S.layout.height=ne.height+k(S,o))}if(0===X)return}var re,oe,ie,ae,se=function(e){return"wrap"===e.style.flexWrap}(S),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(S),ue=I(S,Y),le=I(S,K),de=k(S,Y),fe=k(S,K),pe=!b(S.layout[_[Y]]),he=!b(S.layout[_[K]]),ve=y(Y),ge=null,_e=null,be=e;pe&&(be=S.layout[_[Y]]-de);for(var ye=0,me=0,we=0,Oe=0,Se=0,Ie=0;me<X;){var Ee,Ce=0,Te=0,ke=0,Ae=0,Pe=pe&&ce===a||!pe&&ce!==s,De=Pe?X:ye,je=!0,xe=X,Re=null,Me=null,Ne=ue,Le=0;for(re=ye;re<X;++re){if((ie=S.children[re]).lineIndex=Ie,ie.nextAbsoluteChild=null,ie.nextFlexChild=null,(qe=A(S,ie))===d&&j(ie)===f&&he&&!M(ie,K))ie.layout[_[K]]=F(B(ie,K,S.layout[_[K]]-fe-T(ie,K)),k(ie,K));else if(j(ie)===p)for(null===ge&&(ge=ie),null!==_e&&(_e.nextAbsoluteChild=ie),_e=ie,oe=0;oe<2;oe++)ae=0!==oe?n:o,!b(S.layout[_[ae]])&&!M(ie,ae)&&N(ie,h[ae])&&N(ie,v[ae])&&(ie.layout[_[ae]]=F(B(ie,ae,S.layout[_[ae]]-k(S,ae)-T(ie,ae)-L(ie,h[ae])-L(ie,v[ae])),k(ie,ae)));var Be=0;if(pe&&x(ie)?(Te++,ke+=ie.style.flex,null===Re&&(Re=ie),null!==Me&&(Me.nextFlexChild=ie),Me=ie,Be=k(ie,Y)+T(ie,Y)):(Ee=e,ve||(Ee=M(S,J)?S.layout[_[J]]-$:G-T(S,J)-$),0===we&&H(ie,Ee,q),j(ie)===f&&(Ae++,Be=R(ie,Y))),se&&pe&&Ce+Be>be&&re!==ye){Ae--,we=1;break}Pe&&(j(ie)!==f||x(ie))&&(Pe=!1,De=re),je&&(j(ie)!==f||qe!==d&&qe!==c||b(ie.layout[_[K]]))&&(je=!1,xe=re),Pe&&(ie.layout[g[Y]]+=Ne,pe&&U(S,ie,Y),Ne+=R(ie,Y),Le=F(Le,B(ie,K,R(ie,K)))),je&&(ie.layout[g[K]]+=Oe+le,he&&U(S,ie,K)),we=0,Ce+=Be,me=re+1}var Fe=0,We=0,Ue=0;if(Ue=pe?be-Ce:F(Ce,0)-Ce,0!==Te){var Ve,Ge,He=Ue/ke;for(Me=Re;null!==Me;)(Ve=He*Me.style.flex+k(Me,Y))!==(Ge=B(Me,Y,Ve))&&(Ue-=Ge,ke-=Me.style.flex),Me=Me.nextFlexChild;for((He=Ue/ke)<0&&(He=0),Me=Re;null!==Me;)Me.layout[_[Y]]=B(Me,Y,He*Me.style.flex+k(Me,Y)),Ee=e,M(S,J)?Ee=S.layout[_[J]]-$:ve||(Ee=G-T(S,J)-$),H(Me,Ee,q),ie=Me,Me=Me.nextFlexChild,ie.nextFlexChild=null}else ce!==a&&(ce===s?Fe=Ue/2:"flex-end"===ce?Fe=Ue:"space-between"===ce?(Ue=F(Ue,0),We=Te+Ae-1!=0?Ue/(Te+Ae-1):0):"space-around"===ce&&(Fe=(We=Ue/(Te+Ae))/2));for(Ne+=Fe,re=De;re<me;++re)j(ie=S.children[re])===p&&N(ie,h[Y])?ie.layout[g[Y]]=L(ie,h[Y])+O(S,Y)+m(ie,Y):(ie.layout[g[Y]]+=Ne,pe&&U(S,ie,Y),j(ie)===f&&(Ne+=We+R(ie,Y),Le=F(Le,B(ie,K,R(ie,K)))));var ze=S.layout[_[K]];for(he||(ze=F(B(S,K,Le+fe),fe)),re=xe;re<me;++re)if(j(ie=S.children[re])===p&&N(ie,h[K]))ie.layout[g[K]]=L(ie,h[K])+O(S,K)+m(ie,K);else{var qe,Ye=le;if(j(ie)===f)if((qe=A(S,ie))===d)b(ie.layout[_[K]])&&(ie.layout[_[K]]=F(B(ie,K,ze-fe-T(ie,K)),k(ie,K)));else if(qe!==c){var Ke=ze-fe-R(ie,K);Ye+=qe===u?Ke/2:Ke}ie.layout[g[K]]+=Oe+Ye,he&&U(S,ie,K)}Oe+=Le,Se=F(Se,Ne),Ie+=1,ye=me}if(Ie>1&&he){var Je=S.layout[_[K]]-fe,Xe=Je-Oe,$e=0,Ze=le,Qe=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(S);Qe===l?Ze+=Xe:Qe===u?Ze+=Xe/2:Qe===d&&Je>Oe&&($e=Xe/Ie);var et=0;for(re=0;re<Ie;++re){var tt=et,nt=0;for(oe=tt;oe<X;++oe)if(j(ie=S.children[oe])===f){if(ie.lineIndex!==re)break;b(ie.layout[_[K]])||(nt=F(nt,ie.layout[_[K]]+T(ie,K)))}for(et=oe,nt+=$e,oe=tt;oe<et;++oe)if(j(ie=S.children[oe])===f){var rt=A(S,ie);if(rt===c)ie.layout[g[K]]=Ze+m(ie,K);else if(rt===l)ie.layout[g[K]]=Ze+nt-w(ie,K)-ie.layout[_[K]];else if(rt===u){var ot=ie.layout[_[K]];ie.layout[g[K]]=Ze+(nt-ot)/2}else rt===d&&(ie.layout[g[K]]=Ze+m(ie,K))}Ze+=nt}}var it=!1,at=!1;if(pe||(S.layout[_[Y]]=F(B(S,Y,Se+E(S,Y)),de),Y!==r&&Y!==i||(it=!0)),he||(S.layout[_[K]]=F(B(S,K,Oe+fe),fe),K!==r&&K!==i||(at=!0)),it||at)for(re=0;re<X;++re)ie=S.children[re],it&&U(S,ie,Y),at&&U(S,ie,K);for(_e=ge;null!==_e;){for(oe=0;oe<2;oe++)ae=0!==oe?n:o,!b(S.layout[_[ae]])&&!M(_e,ae)&&N(_e,h[ae])&&N(_e,v[ae])&&(_e.layout[_[ae]]=F(B(_e,ae,S.layout[_[ae]]-C(S,ae)-T(_e,ae)-L(_e,h[ae])-L(_e,v[ae])),k(_e,ae))),N(_e,v[ae])&&!N(_e,h[ae])&&(_e.layout[h[ae]]=S.layout[_[ae]]-_e.layout[_[ae]]-L(_e,v[ae]));ie=_e,_e=_e.nextAbsoluteChild,ie.nextAbsoluteChild=null}}function H(e,t,n){e.shouldUpdate=!0;var r=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===r?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=r,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),G(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:G,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();t.default=function(e){r.fillNodes(e),r.computeLayout(e)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return C})),n.d(t,"getWorkerId",(function(){return T}));var r=n(4),o=n(5),i=n(31),a=n(134),s=n(189),c=n(1),u=n(93),l=n(0),d=new WeakMap,f=new WeakMap,p=new WeakMap,h={},v={},g={},_=new WeakMap,b=new WeakMap,y=0,m={};function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++y;return g[e]?(m[e]||(m[e]=[]),m[e].push({id:n,callback:t})):(g[e]=n,t()),n}function O(e,t){if(g[e]===t&&(delete g[e],m[e]&&m[e].length)){var n=m[e].shift(),r=n.id;w(e,n.callback,r)}}if(!s.wxSAB.new){var S=0;Object.assign(s.wxSAB,{new:function(e){var t=++S;return v[t]=e,Object.keys(h).forEach((function(n){var r=d.get(h[n]);__safeway__.worker.postMsgToWorker(r,{__cmd__:"setSharedBuffer",__buffer__:e,__id__:t},!1)})),t},get:function(e){return v[e]},destroy:function(e){delete v[e]},Lock:w,Unlock:O})}__safeway__.worker.onWorkerMsg((function(e,t){var n=h[e],r=f.get(n),o=b.get(n);if(t.__log__&&t.logs)(a=t).__isNativeConsole__?(c=wxNativeConsole)[a.level].apply(c,Object(i.default)(a.logs)):(l=console)[a.level].apply(l,Object(i.default)(a.logs));else{var a,c,l;if("setSharedBuffer"===t.__cmd__)return v[t.__id__]=t.__buffer__,void Object.keys(h).forEach((function(n){var r=d.get(h[n]);r!==e&&__safeway__.worker.postMsgToWorker(r,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof r)if(o&&o.useWKWorker){if("requireScriptSuccess"===t.__cmd__){var p=_.get(n);return void(p&&p.evaluateWorkerScriptPromiseResolve&&p.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void u._fs.readFile({filePath:t.filePath,success:function(n){var r=n.data;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode.apply(String,Object(i.default)(new Uint16Array(r)))})},fail:function(n){var r=n.errMsg;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:r})}});r(t.data)}else r(Object(s.unpackSharedArrayBuffer)(t))}else O(t.__sid__,t.__lid__);else w(t.__sid__,(function(){return n.postMessage(t)}),t.__lid__)}}));var I=function(e){this.postMessage({__cmd__:"requireScript",__script__:e,__id__:d.get(this)})},E=function(){var e,t=new Promise((function(t){e=t}));_.set(this,{evaluateWorkerScriptPromise:t,evaluateWorkerScriptPromiseResolve:e})},C=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{useWKWorker:!1};Object(r.default)(this,e),d.set(this,t),b.set(this,o),h[t]=this,this._id=t,o.useWKWorker?E.call(this):I.call(this,n),a.default.add(this)}return Object(o.default)(e,[{key:"postMessage",value:function(e){var t=d.get(this),n=_.get(this),r=b.get(this);r&&r.useWKWorker&&n?n.evaluateWorkerScriptPromise.then((function(){__safeway__.worker.postMsgToWorker(t,{data:e,appid:c.default.accountInfo.appId})})):__safeway__.worker.postMsgToWorker(t,e)}},{key:"onMessage",value:function(e){f.set(this,e)}},{key:"terminate",value:function(){var e=d.get(this),t=b.get(this);t&&t.useWKWorker?__safeway__.worker.postMsgToWorker(e,{__cmd__:"terminate",appid:c.default.accountInfo.appId}):__safeway__.worker.terminate(e),a.default.remove(this),d.delete(this),f.delete(this),_.delete(this),p.delete(this),b.delete(this),delete h[e]}},{key:"onProcessKilled",value:function(e){p.set(this,e)}}]),e}();Object(l.onMethod)("onWorkerWebViewTerminate",(function(){Object.keys(h).forEach((function(e){var t=h[e],n=b.get(t);if(n&&n.useWKWorker){var r=p.get(t);a.default.remove(t),d.delete(t),f.delete(t),_.delete(t),p.delete(t),b.delete(t),delete h[e],"function"==typeof r&&__errorTracer__.surroundThirdByTryCatch(r,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));var T=function(e){if(e._id>=0&&h[e._id])return e._id}},function(e,t,n){n.r(t),n.d(t,"_getOpenerEventChannel",(function(){return l})),n.d(t,"_getEventChannelEnd",(function(){return d}));var r=n(31),o=n(4),i=n(5);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={},u=function(){function e(){Object(o.default)(this,e),this.listener={},this.emitCache={}}return Object(i.default)(e,[{key:"emit",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];if(!this.listener[e])return this.emitCache[e]||(this.emitCache[e]=[]),void this.emitCache[e].push(r);var i=function(){var n,o=a(t.listener[e]);try{for(o.s();!(n=o.n()).done;){var i,s=n.value;(i=s.fn).call.apply(i,[s.fn].concat(r))}}catch(e){o.e(e)}finally{o.f()}t.listener[e]=t.listener[e].filter((function(e){return"once"!==e.type}))};i.call(this)}},{key:"_clearCache",value:function(e){if(this.emitCache[e])for(;this.emitCache[e].length>0;)this.emit.apply(this,[e].concat(Object(r.default)(this.emitCache[e].shift())))}},{key:"on",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at on "+e+" callback function");this._addListener(e,"on",n),this._clearCache(e)}},{key:"once",value:function(e,t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at once "+e+" callback function");this._addListener(e,"once",n),this._clearCache(e)}},{key:"off",value:function(e,t){if(this.listener[e])if(t){var n=t.toString();for(var r in this.listener[e])for(var o=0;!(o>=this.listener[e].length);)n===this.listener[e][o].fn.toString()&&(this.listener[e].splice(o,1),o--),o++}else this.listener[e]=[],delete this.listener[e]}},{key:"_addListener",value:function(e,t,n){this.listener[e]||(this.listener[e]=[]),this.listener[e].push({fn:n,type:t})}}]),e}();function l(){var e=c;return c={},e}function d(){for(var e=new u,t=new u,n={},r=["listener","emit","on","once","off","_addListener"],o=0,i=r;o<i.length;o++){var a=i[o];"emit"===a?n[a]=t[a].bind(t):"function"==typeof e[a]?n[a]=e[a].bind(e):n[a]=e[a]}for(var s=0,l=r;s<l.length;s++){var d=l[s];"emit"===d?c[d]=e[d].bind(e):"function"==typeof t[d]?c[d]=t[d].bind(t):c[d]=t[d]}return n}},function(e,t,n){n.r(t),n.d(t,"getUserCloudStorage",(function(){return s}));var r=n(107),o=n(32),i=n(0),a=Object(o.default)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e})),s=function(e){var t=Object(r.checkKeyList)(e.keyList);t?Object(i.beforeInvokeFail)("getUserCloudStorage",e,t):a(e)}},function(e,t,n){n.r(t),n.d(t,"getFriendCloudStorage",(function(){return s}));var r=n(0),o=n(107),i=n(32),a=Object(i.default)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o.checkKeyList)(e.keyList);t?Object(r.beforeInvokeFail)("getFriendCloudStorage",e,t):a(e)}},function(e,t,n){n.r(t),n.d(t,"getGroupCloudStorage",(function(){return l}));var r=n(21),o=n(0),i=n(107),a=n(32),s=r.share.ShareInfoStorage,c=wxNativeConsole.createLogger("getGroupCloudStorage"),u=Object(a.default)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(function(e){var t=e.keyList,n=void 0===t?[]:t,r=e.shareTicket,o=s.get(r),i=o.shareKey,a=o.shareName;return c.info("shareTicket=",r),c.info("shareInfo=",JSON.stringify(o)),{key:n,share_key:i,share_name:a}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),l=function(e){var t=Object(i.checkKeyList)(e.keyList);t?Object(o.beforeInvokeFail)("getGroupCloudStorage",e,t):setTimeout((function(){e.shareTicket?s.get(e.shareTicket)?(c.info("use args.shareTicket",e.shareTicket),u(e)):Object(o.beforeInvokeFail)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):s.lastShareTicket&&s.get(s.lastShareTicket)?(c.info("use lastShareTicket",s.lastShareTicket),u(Object.assign({shareTicket:s.lastShareTicket},e))):Object(o.beforeInvokeFail)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)}},function(e,t,n){n.r(t),n.d(t,"getMMDataProto",(function(){return o}));var r={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}]},o=function(e){var t=r[e.toString()];return t?t.concat([]):[]}},function(e,t,n){n.r(t),function(e){n.d(t,"getPerformance",(function(){return Z})),n.d(t,"getPerformance4Plugin",(function(){return ee}));var r=n(39),o=n(31),i=n(5),a=n(14),s=n(19),c=n(8),u=n(4),l=n(2),d=n(22),f=n(49),p=n(71),h=n(33),v=n(1),g=n(0);function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var m,w=Object(d.getEventManager)("AppPerfRouteNavigation"),O=function(e){return e+9782784e5-3600*((new Date).getTimezoneOffset()/60)*1e3},S=null,I=new Promise((function(e){S=e})),E=new h.EventEmitter2,C=function e(t,n,r,o){Object(u.default)(this,e),t&&(this.name=t),n&&(this.entryType=n),r&&(this.startTime=r),o&&(this.duration=o)},T=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r,o,i,a,s,c){var l;return Object(u.default)(this,n),l=t.call(this,e,r,o,i),s&&(l.navigationType=s),c&&(l.path=c),a&&(l.navigationStart=a),l}return n}(C),k=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r,o,i,a){var s;return Object(u.default)(this,n),s=t.call(this,e,r,o,i),a&&(s.path=a),s}return n}(C),A=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r,o,i,a,s){var c;return Object(u.default)(this,n),c=t.call(this,e,r,o,i),a&&(c.packageName=a),s&&(c.packageSize=s),c}return n}(C),P=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r,o,i,a,s){var c;return Object(u.default)(this,n),c=t.call(this,e,r,o,i),a&&(c.moduleName=a),s&&(c.size=s),c}return n}(C),D={navigation:"navigation",loadPackage:"loadPackage",render:"render",script:"script"},j="appLaunch",x="route",R="firstRender",M="downloadPackage",N="evaluateScript",L={navigation:"navigation",render:"render"},B={appLaunch:"appLaunch",route:"route",firstRender:"firstRender"};function F(e){I.then((function(){E.emit(e.entryType,e)}))}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.indexOf("__plugin__")>-1||e.indexOf("plugin-private://")>-1}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.indexOf("__wx__")>-1}void 0!==e.performanceChannel&&(e.performanceChannel.setReceiver((function(e){if(e&&"evaluateScript"===e.type){var t=e.endTime-e.startTime,n="";n="__APP__/"===e.moduleName?"main":e.moduleName,F(new P(N,D.script,e.startTime,t,n))}})),delete e.performanceChannel),Object(g.onMethod)("onNewPerformanceMetric",(function(e){if("$$$loadPackage"===e.name&&!l.IS_DEVTOOLS){var t=e.endTime-e.startTime,n=e.extraInfo&&e.extraInfo.packageName;"__APP__"===n&&(n="main");var r=l.IS_IOS?O(e.startTime):e.startTime,o=e.extraInfo?e.extraInfo.size:0;F(new A(M,D.loadPackage,r,t,n,o))}if(l.IS_DEVTOOLS){if("$$$loadPackage"===e.name){var i=e.endTime-e.startTime,a=e.extraInfo&&e.extraInfo.packageName;"__APP__"===a&&(a="main");var s=l.IS_IOS?O(e.startTime):e.startTime;F(new A(M,D.loadPackage,s,i,a,0))}if("evaluateJavaScript"===e.name){var c=e.endTime-e.startTime,u="";u=e.moduleName&&e.moduleName.indexOf("__APP__")>-1?"main":e.moduleName,F(new P(N,D.script,e.startTime,c,u))}if("appLaunch"===e.name){var d=e.startTime,f=e.endTime-d,p=v.default.appLaunchInfo;F(new T(j,D.navigation,d,f,null,"appLaunch",p.path))}}}));var V={type:"",start:0},G={time:0,path:""};Object(f.onAppRoute)((function(e){G={time:Date.now(),path:e.path}})),Object(p.onAppRouteDone)((function(e){if(V&&V.type&&V.start){var t=G.time,n=V.type,r=Date.now()-V.start;F(new T(x,D.navigation,V.start,r,t,n,e.path))}V=null,S()})),w.internalOnMethod((function(e){V=e})),Object(g.subscribe)("initReady_getPerformance",(function(e){if(G.time&&G.path){var t=e.initReadyTs-G.time;F(new k(R,D.render,G.time,t,G.path))}if(!m&&!l.IS_DEVTOOLS){m=e.initReadyTs;var n=v.default.appLaunchInfo;if(n.isLaunch){var r,o;l.IS_IOS?(r=O(n.clickTimestampInMs),o=m-r):(r=n.clickTimestamp,o=m-r);var i=new T(j,D.navigation,r,o,null,"appLaunch",n.path);if(7===v.default.appType)if(l.IS_ANDROID)i.preloadType=n.preloadType;else if(l.IS_IOS){var a=n.preloadType,s=Math.floor(a%100/10),c=Math.floor(a%10),u=0;0===s&&0===c&&(u=0),1===s&&1===c&&(u=1),2===s&&2===c&&(u=2),0===s&&2===c&&(u=4),2===s&&0===c&&(u=5),i.preloadType=u}F(i)}}}));var H=function(){var e;(e=console).warn.apply(e,arguments)},z=function(e,t){return e.startTime>=t.startTime},q=function(){function e(t){Object(u.default)(this,e),Object.defineProperty(this,"_list",{value:t,writable:!1,configurable:!1,enumerable:!1})}return Object(i.default)(e,[{key:"getEntries",value:function(){var e=this._list.slice();return e.sort(z),e}},{key:"getEntriesByType",value:function(e){var t=[];if(!e)return H("entryType is not provided"),t;if(!D[e])return H("invalid entryType:",e),t;var n,r=_(this._list);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.entryType===e&&t.push(o)}}catch(e){r.e(e)}finally{r.f()}return t}},{key:"getEntriesByName",value:function(e,t){var n=[];if(!e)return H("getEntriesByName requires name"),n;var r,o=_(this._list);try{for(o.s();!(r=o.n()).done;){var i=r.value;t&&t!==i.entryType||i.name!==e||n.push(i)}}catch(e){o.e(e)}finally{o.f()}return n}}]),e}(),Y=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(u.default)(this,e),this._buffer=[],this._entryList=new q(this._buffer),this._bufferSize=30,this._emitter=t,this._internalSubscriptionHandler=function(e){var t;(n._buffer.length>=n._bufferSize&&n._buffer.shift(),0!==n._bufferSize)&&(t=n._buffer).push.apply(t,Object(o.default)(e.getEntries()))},this._initiateSubscription(r)}return Object(i.default)(e,[{key:"_initiateSubscription",value:function(){new K(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize).observe({entryTypes:Object.keys(D)})}},{key:"getEntries",value:function(){return this._entryList.getEntries()}},{key:"getEntriesByType",value:function(e){return this._entryList.getEntriesByType(e)}},{key:"getEntriesByName",value:function(e,t){return this._entryList.getEntriesByName(e,t)}},{key:"createObserver",value:function(e){return new K(e,this._emitter,this._buffer,this._bufferSize)}},{key:"setBufferSize",value:function(e){this._bufferSize=e}},{key:"now",value:function(){return Date.now()}}]),e}(),K=function(){function e(t,n,r,o){var i=this;Object(u.default)(this,e),this._emitter=n,this._buffer=r,this._bufferSize=o,this._callback=Reporter.surroundThirdByTryCatch(t,"at api PerformanceObserver callback function"),this._timer=null,this._batchBuffer=[],Object.defineProperty(this,"_observedEntryTypes",{value:[],writable:!1,configurable:!1,enumerable:!1}),this.__handle=function(){return i._handle.apply(i,arguments)}}return Object(i.default)(e,[{key:"_handle",value:function(e){var t=this;e&&"function"==typeof this._shouldHandle&&this._shouldHandle(e)&&(this._batchBuffer.push(e),null===this._timer&&(this._timer=setTimeout((function(){var e=new q(t._batchBuffer);t._callback(e,t),t._batchBuffer=[],t._timer=null}),500)))}},{key:"_shouldHandle",value:function(e){return!e.path||!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return W(e)||U(e)}(e.path)}},{key:"observe",value:function(e){if(e)if(this._observedEntryTypes.length>0&&this.disconnect(),e.type||e.entryTypes)if(e.type&&e.entryTypes)H("observe can only be called with either type or entryTypes, but not both of them");else if(!e.type||D[e.type]){if(e.entryTypes&&e.entryTypes.forEach((function(e){D[e]||H("invalid entry type:",e)})),e.type)this._emitter.on(e.type,this.__handle),this._observedEntryTypes.push(e.type);else if(e.entryTypes){var t,n=_(e.entryTypes);try{for(n.s();!(t=n.n()).done;){var r=t.value;D[r]&&(this._emitter.on(r,this.__handle),this._observedEntryTypes.push(r))}}catch(e){n.e(e)}finally{n.f()}}}else H("invalid entry type:",e.type);else H("observe can be called with either type or entryTypes provided")}},{key:"disconnect",value:function(){var e,t=_(this._observedEntryTypes);try{for(t.s();!(e=t.n()).done;){var n=e.value;this._emitter.off(n,this.__handle)}}catch(e){t.e(e)}finally{t.f()}this._observedEntryTypes=[]}},{key:"supportedEntryTypes",get:function(){return Object.keys(D)}}]),e}(),J=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r){var o;return Object(u.default)(this,n),(o=t.call(this,e,{pluginId:r}))._pluginId=r,o}return Object(i.default)(n,[{key:"_initiateSubscription",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};new X(this._internalSubscriptionHandler,this._emitter,this._buffer,this._bufferSize,e.pluginId).observe({entryTypes:Object.keys(L)})}},{key:"createObserver",value:function(e){return new X(e,this._emitter,this._buffer,this._bufferSize,this._pluginId)}}]),n}(Y),X=function(e){Object(a.default)(n,e);var t=y(n);function n(e,r,o,i,a){var s;return Object(u.default)(this,n),(s=t.call(this,e,r,o,i))._pluginId=a,s}return Object(i.default)(n,[{key:"_handle",value:function(e){return e.path&&(e.path=__virtualDOM__.convertRouteToComponentAlias(e.path)),Object(r.default)(Object(c.default)(n.prototype),"_handle",this).call(this,e)}},{key:"_shouldHandle",value:function(e){if(!!!(e&&L[e.entryType]&&B[e.name]))return!1;if(U(e.path))return!1;var t,n="plugin-private://"+this._pluginId;return!!((e instanceof T||e instanceof k)&&e.path&&(t=e.path)&&t.indexOf(n)>-1)}},{key:"supportedEntryTypes",get:function(){return Object.keys(L)}}]),n}(K),$=new Y(E);function Z(){return $}var Q=new Map;function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pluginId;return Q.has(t)||Q.set(t,new J(E,t)),Q.get(t)}}.call(this,n(76))},function(e,t,n){n.r(t),function(e){n.d(t,"wxSAB",(function(){return h})),n.d(t,"createSharedArrayBuffer",(function(){return g})),n.d(t,"getSharedArrayBuffer",(function(){return _})),n.d(t,"SharedArrayBuffer",(function(){return v})),n.d(t,"unpackSharedArrayBuffer",(function(){return b}));var r=n(4),o=n(5),i=n(10),a=n(6),s="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,c=0,u=1,l=2,d=new WeakMap,f=new Map,p=ArrayBuffer,h="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?p=__global.SharedArrayBuffer:e.SharedArrayBuffer&&(p=e.SharedArrayBuffer));var v=function(){function e(t,n){if(Object(r.default)(this,e),s.log("constructor length="+t+", sabId="+n),!Object(i.isNumber)(t)||t<0)throw new a.ThirdScriptError("Invalid array buffer length "+t);if(Object(i.isNumber)(n)){var o;s.info("get buffer with sabId: "+n);try{o=h.get(n)}catch(e){throw s.error("WeixinSharedBuffer.get"+n+" fail: "+e.message),new Error("WeixinSharedBuffer.get"+n+" fail: "+e.message)}Object.defineProperty(this,"buffer",{value:o,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:n,enumerable:!0,writable:!1})}else{s.info("new ArrayBuffer with length: "+t),Object.defineProperty(this,"buffer",{value:new p(t),writable:!1,enumerable:!0});var u=h.new(this.buffer);s.info("sabId: "+u),Object.defineProperty(this,"_sabId",{value:u,enumerable:!0,writable:!1})}var l={writeStatus:c,readStatus:c,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};d.set(this,l),f.set(this._sabId,this),s.log("["+this._sabId+"] created:",this.buffer)}return Object(o.default)(e,[{key:"destroy",value:function(){s.warn("["+this._sabId+"][destroy()]");var e=d.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],f.delete(this._sabId),d.get(this).destroyed=!0,this.unlock(),h.destroy(this._sabId)}},{key:"lock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!0;var n=d.get(this),r=n.destroyed,o=n.writeStatus,c=n.readStatus,f=n.writeLockCallbacks,p=n.readLockCallbacks;if(r)throw new a.ThirdScriptError("SharedArrayBuffer has been destroyed");if(!Object(i.isFunction)(e))throw new a.ThirdScriptError("callback must be a function");if(o!==l)if(t)f.push(e),o===u||(n.writeStatus=u,n.writeLockId=h.Lock(this._sabId,(function(){f.forEach((function(e){return e()})),p.forEach((function(e){return e()})),n.writeStatus=l,n.writeLockCallbacks=[],n.readLockCallbacks=[]})));else{if(c===l)return s.info("["+this._sabId+"][lock()] readStatus is locked, callback immediately"),void e();p.push(e),c===u||o===u||(n.readLockId=h.Lock(this._sabId,(function(){p.forEach((function(e){return e()})),n.readStatus=l,n.readLockCallbacks=[]})),n.readStatus=u)}else e()}},{key:"unlock",value:function(){var e=d.get(this),t=e.writeLockId,n=e.readLockId,r=e.writeStatus,o=e.readStatus;e.destroyed?console.warn("unlock: SharedArrayBuffer has been destroyed"):(r!==u&&r!==l||(h.Unlock(this._sabId,t),e.writeStatus=c,e.writeLockId=void 0,e.writeLockCallbacks=[]),o!==u&&o!==l||(h.Unlock(this._sabId,n),e.readStatus=c,e.readLockId=void 0,e.readLockCallbacks=[]))}}]),e}(),g=function(e){return new v(e)},_=function(e){return s.info("[getSharedArrayBuffer] sabId="+e),f.has(e)?(s.info("[getSharedArrayBuffer] return existed object"),f.get(e)):(s.info("[getSharedArrayBuffer] return new object"),new v(0,e))},b=function e(t){return s.log("[unpackSharedArrayBuffer]",t),Object(i.isObject)(t)?(s.log("[unpackSharedArrayBuffer] isObject"),Object(i.isNumber)(t._sabId)?(s.info("[unpackSharedArrayBuffer] sabId is number"),_(t._sabId)):Object.keys(t).reduce((function(n,r){var o=t[r];return n[r]=e(o),n}),{})):Object(i.isArray)(t)?t.map(e):t}}.call(this,n(76))},function(e,t,n){n.r(t),n.d(t,"emitter2",(function(){return u}));var r=n(26),o=n(61),i=n(58),a=n(24),s=n(10),c=new o.Emitter("touch",!0),u=new o.Emitter("touch",!0),l={};["start","move","end","cancel"].forEach((function(e){if("start"===e){r.default.EventHandler["ontouch"+e]=function(t){i.GlobalEmitter.emit("beforeTouchStart",t),i.GlobalEmitter.emit("setLastTapTime",Date.now()),Object(a.setWxInterfaceIsInvokeInTap)("tap"),c.emit(e,t),u.emit(e,t)}}else if("end"===e){r.default.EventHandler["ontouch"+e]=function(t){i.GlobalEmitter.emit("beforeTouchEnd"),c.emit(e,t),u.emit(e,t),i.GlobalEmitter.emit("afterTouchEnd")}}else r.default.EventHandler["ontouch"+e]=function(t){c.emit(e,t),u.emit(e,t)};l["onTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t,n){Object(s.isObject)(n)&&(r.default.EventHandler["ontouch"+e+"Dst"]=n),c.on(e,t)},l["offTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t){c.off(e,t)}})),t.default=l},function(e,t,n){n.r(t),n.d(t,"WebAssembly",(function(){return d})),n.d(t,"_WebAssembly",(function(){return f}));var r=n(26),o=n(2),i=n(140),a=n(0),s=n(10),c=(n(6),r.default.fs,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.beforeInvoke)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&Object(a.invokeMethod)("readCompressedFile",e)}),u=globalThis,l={};void 0!==r.default.WebAssembly?l=r.default.WebAssembly:void 0!==u.WebAssembly&&(l=u.WebAssembly);var d={Table:l.Table,Memory:l.Memory,Global:l.Global,Instance:l.Instance,instantiate:function(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(o.IS_IOS||o.IS_ANDROID){var n=l.instantiate(e,t);return"Promise"===Object(s.getDataType)(n)?n:Promise.resolve(n)}var r=i.readFile;return o.IS_DEVTOOLS&&/\.br$/.test(e)&&(r=c),new Promise((function(n,o){r({compressionAlgorithm:"br",filePath:e,success:function(e){n(l.instantiate(e.data,t))},fail:function(e){var t=e.errMsg;o(new Error(t.replace(/^\w+:fail\s*/,"")))}})}))}};u.WXWebAssembly=d,delete u.WebAssembly;var f=l},function(e,t,n){n.r(t),function(e){n.d(t,"createVideoDecoder",(function(){return E}));var r=n(13),o=n.n(r),i=n(4),a=n(5),s=n(16),c=n(38),u=n(33),l=n(0),d=n(55),f=n(2);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){Object(s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=new u.default,g=new WeakMap,_=new WeakMap;Object(l.onMethod)("onCanvasPlayerStateChange",(function(e){var t=e.state;"playEnd"===t?v.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?v.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&v.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));var b=!1;function y(e){return m.apply(this,arguments)}function m(){return(m=Object(c.default)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(l.invokeMethodAsync)("operateCanvasPlayer",h(h({},n),{},{containerId:e.id||0,operationType:t}))}function O(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(o,i){e.NativeGlobal.MediaToolKit[n](h(h({},r),{},{containerId:t.id||0}),(function(e){if(0!==e.errCode){var t=new Error(e.errMsg||n+" failed");return Object.assign(t,e),void i(t)}o(e)}))}))}function S(e,t,n){var r=g.get(e);r&&r.emit(t,n)}var I=function(){function t(){var n=this;Object(i.default)(this,t);var r=new u.default;g.set(this,r);var a=Object(c.default)(o.a.mark((function t(){var i,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f.IS_ANDROID){t.next=8;break}return f.IS_ANDROID&&(b||(b=!0,e.NativeGlobal.MediaToolKit.addEventListener("onPlayerBuffSize",(function(e){v.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}})})),e.NativeGlobal.MediaToolKit.addEventListener("onPlayerPlayEnd",(function(e){v.emit(e.containerId,{event:"ended",data:{}})})))),t.next=4,new Promise((function(t,n){e.NativeGlobal.MediaToolKit.playerCreate({},(function(e){if(0!==e.errCode){var r=new Error(e.errMsg||"create failed");return Object.assign(r,e),void n(r)}t(e)}))}));case 4:i=t.sent,n.id=i.containerId,t.next=12;break;case 8:return t.next=10,Object(l.invokeMethodAsync)("operateCanvasPlayer",{operationType:"create"});case 10:a=t.sent,n.id=a.containerId;case 12:v.on(n.id,(function(e){var t=e.event,n=e.data;return r.emit(t,n)}));case 13:case"end":return t.stop()}}),t)})))();_.set(this,a)}var n,r,s,p,h;return Object(a.default)(t,[{key:"start",value:(h=Object(c.default)(o.a.mark((function e(){var t,n,r,i,a,s,c=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,y(this);case 3:if(!f.IS_ANDROID){e.next=21;break}if(r=t.source,t.source&&/^(http|https):\/\/.*/i.test(t.source)){e.next=10;break}return e.next=8,Object(l.invokeMethodAsync)("private_fileSystemConvert",{operationType:"getAbsolutePath",localId:t.source});case 8:i=e.sent,r=i.filePath;case 10:return e.next=12,O(this,"playerStart",{filePath:r,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 12:a=e.sent,n=Object.assign({},a.video),this.width=n.width||0,this.height=n.height||0,this.buffer=new ArrayBuffer(this.width*this.height*4),n.video=a.video,n.audio=a.audio,e.next=30;break;case 21:return e.next=23,w(this,"start",{source:t.source,mode:void 0!==t.mode?t.mode:1,videoFormat:t.videoFormat||55,startStamp:t.startTime,abortAudio:t.abortAudio,abortVideo:t.abortVideo});case 23:s=e.sent,n=Object.assign({},s.video),this.buffId=s.buffId,this.width=n.width||0,this.height=n.height||0,n.video=s.video,n.audio=s.audio;case 30:return S(this,"start",n),e.abrupt("return",n);case 32:case"end":return e.stop()}}),e,this)}))),function(){return h.apply(this,arguments)})},{key:"seek",value:(p=Object(c.default)(o.a.mark((function e(t){var n,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"inaccurate",e.next=3,y(this);case 3:if(r="accurate"===n,!f.IS_ANDROID){e.next=9;break}return e.next=7,O(this,"playerSeek",{seekStamp:t,seekByStamp:r});case 7:e.next=11;break;case 9:return e.next=11,w(this,"seek",{seekStamp:t,seekByStamp:r});case 11:return S(this,"seek",{position:t}),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"wait",value:(s=Object(c.default)(o.a.mark((function e(){var t,n=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,y(this);case 3:if(!f.IS_ANDROID){e.next=8;break}return e.next=6,O(this,"playerWait",{wait:t});case 6:e.next=10;break;case 8:return e.next=10,w(this,"wait",{wait:t});case 10:S(this,"wait",{});case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"stop",value:(r=Object(c.default)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(this);case 2:if(!f.IS_ANDROID){e.next=7;break}return e.next=5,O(this,"playerStop",{});case 5:e.next=9;break;case 7:return e.next=9,w(this,"stop",{});case 9:S(this,"stop",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"remove",value:(n=Object(c.default)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y(this);case 2:if(this.id&&(v.removeAllListeners(this.id),(t=g.get(this)).eventNames().forEach((function(e){return t.removeAllListeners(e)}))),!f.IS_ANDROID){e.next=8;break}return e.next=6,O(this,"playerRemove",{});case 6:e.next=10;break;case 8:return e.next=10,w(this,"remove",{});case 10:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFrameData",value:function(){var t,n,r,o,i,a,s=this;if(f.IS_ANDROID?e.NativeGlobal.MediaToolKit.playerGetFrame({containerId:this.id,buffer:this.buffer},(function(e){e.got&&(t=s.buffer),n=e.pts,r=e.pk_pts,o=e.dts,i=e.pk_dts})):Object(l.invokeMethod)("operateCanvasPlayer",{operationType:"getFrame",containerId:this.id,success:function(e){e.got&&(t=d.default.get(s.buffId))&&(t.__proto__=ArrayBuffer.prototype),n=e.pts,r=e.pk_pts,o=e.dts,i=e.pk_dts},fail:function(e){a=new Error(e.errMsg&&e.errMsg.replace(/operateCanvasPlayer/g,"getFrameData")),Object.assign(a,e)}}),a)throw a;return t?{width:this.width,height:this.height,data:t,pts:n,pkPts:r,dts:o,pkDts:i}:null}},{key:"on",value:function(e,t){g.get(this).on(e,t)}},{key:"off",value:function(e,t){g.get(this).off(e,t)}},{key:"videoDecoderId",get:function(){return this.id}}]),t}();function E(){return new I}}.call(this,n(76))},function(e,t,n){n.r(t),function(e){n.d(t,"createMediaRecorder",(function(){return j}));var r=n(13),o=n.n(r),i=n(4),a=n(5),s=n(16),c=n(38),u=n(33),l=n(0),d=n(56),f=n(1),p=n(118),h=n(2);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){Object(s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=new u.default,b=new WeakMap,y=new WeakMap,m=new WeakMap,w=new WeakMap,O=new Map,S=new Map,I=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function E(e){return C.apply(this,arguments)}function C(){return(C=Object(c.default)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=w.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,o){e.NativeGlobal.MediaToolKit[t](n,(function(e){if(e&&e.errCode&&0!==e.errCode){var n=new Error(e.errMsg||t+" failed");return Object.assign(n,e),void o(n)}r(e)}))}))}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=y.get(e),o=r.id,i=0;return r instanceof p.OffscreenCanvas&&(o=r.__id,i=r._offscreenCanvasId),Object(l.invokeMethodAsync)("operateMediaRecorder",g(g({},n),{},{canvasId:o,offScreenCanvasId:i,operationType:t}))}Object(l.onMethod)("onMediaRecorderStateChange",(function(e){var t,n,r=e.state,o=e.canvasId<<0;if(o=O.has(o)?O.get(o):o,delete e.state,"timeUpdate"===r)_.emit(o,{event:"timeupdate",data:{currentTime:e.currentTime}});else if("error"===r){var i=(t=e.errCode,(n={101:{code:d.error.MediaRecorder_StartDurationInvalid,message:"MediaRecorder.start:fail duration invalid"},103:{code:d.error.MediaRecorder_StartWhileAlreadyStartRecording,message:"MediaRecorder.start:fail start while already start recording"},104:{code:d.error.MediaRecorder_StartWhilePaused,message:"MediaRecorder.start:fail start while paused"},106:{code:d.error.MediaRecorder_StartBitRateInvalid,message:"MediaRecorder.start:fail bitrate invalid"},107:{code:d.error.MediaRecorder_StartFPSInvalid,message:"MediaRecorder.start:fail fps invalid"},108:{code:d.error.MediaRecorder_StartGOPInvalid,message:"MediaRecorder.start:fail gop invalid"},201:{code:d.error.MediaRecorder_PauseWhileNotStartRecording,message:"MediaRecorder.pause:fail pause while not start recording"},202:{code:d.error.MediaRecorder_PauseWhileAlreadyPaused,message:"MediaRecorder.pause:fail pause while already paused"},301:{code:d.error.MediaRecorder_ResumeWhileNotStartRecording,message:"MediaRecorder.resume:fail resume while not start recording"},302:{code:d.error.MediaRecorder_ResumeWhileRecording,message:"MediaRecorder.resume:fail resume while recording"},401:{code:d.error.MediaRecorder_AbortWhileNotStartRecording,message:"MediaRecorder.abort:fail abort while not start recording"},501:{code:d.error.MediaRecorder_StopWhileNotStartRecording,message:"MediaRecorder.stop:fail stop while not start recording"},503:{code:d.error.Global_FileStorageNotEnough,message:"MediaRecorder.stop:fail file storage not enough"}})[t]?n[t]:[102,110,111,502,710,810].includes(t)?{code:d.error.MediaRecorder_InternalFailed,message:"MediaRecorder:fail internal failed"}:{code:d.error.MediaRecorder_UnknownError,message:"MediaRecorder:fail unknown error"});_.emit(o,{event:"error",data:{error:i}})}}));var A=!1;function P(){h.IS_ANDROID&&(A||(A=!0,e.NativeGlobal.MediaToolKit.addEventListener("onRecorderTimeUpdate",(function(e){if(S.has(e.containerId)){var t=S.get(e.containerId);_.emit(t,{event:"timeupdate",data:{currentTime:e.stamp}})}}))))}var D=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(i.default)(this,t),y.set(this,e);var a=new u.default;b.set(this,a),_.on(e.id,(function(e){var t=e.event,n=e.data;return a.emit(t,n)})),"number"==typeof r.duration?this.duration=Math.min(7200,Math.max(5,r.duration)):this.duration=7200,"number"==typeof r.videoBitsPerSecond?this.videoBitsPerSecond=Math.min(3e3,Math.max(600,r.videoBitsPerSecond)):this.videoBitsPerSecond=1e3,this.fps=r.fps||24,this.gop=r.gop||12,this.timeUpdateInterval=r.timeUpdateInterval||this.gop,this.audioPlayerId=r.audioPlayerId;var s=Object(c.default)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.IS_ANDROID){t.next=9;break}return P(),t.next=4,T("recorderCreate",{});case 4:r=t.sent,n._containerId=r.containerId,S.set(n._containerId,e.id),t.next=12;break;case 9:return t.next=11,k(n,"create",{});case 11:e instanceof p.OffscreenCanvas&&O.set(e.__id,e.id);case 12:a.emit("create",{});case 13:case"end":return t.stop()}}),t)})))();w.set(this,s)}var n,r,s,d,v,g;return Object(a.default)(t,[{key:"pause",value:(g=Object(c.default)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,T("recorderUpdate",{containerId:this._containerId,pause:!0});case 6:n=e.sent,t.emit("pause",n),e.next=13;break;case 10:return e.next=12,k(this,"pause",{});case 12:t.emit("pause");case 13:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"resume",value:(v=Object(c.default)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,T("recorderUpdate",{containerId:this._containerId,pause:!1});case 6:n=e.sent,t.emit("resume",n),e.next=13;break;case 10:return e.next=12,k(this,"resume");case 12:t.emit("resume");case 13:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"start",value:(d=Object(c.default)(o.a.mark((function e(){var t,n,r,i,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this);case 2:if(t=b.get(this),n=y.get(this),r={width:n.width,height:n.height,fps:this.fps,bitrate:this.videoBitsPerSecond,gop:this.gop,duration:this.duration,timeUpdateInterval:this.timeUpdateInterval,audioPlayerId:this.audioPlayerId,cumulativeStamp:!0},h.IS_IOS&&f.default.clientVersion<385879296?r.duration=Math.floor(this.duration):r.duration=Math.floor(1e3*this.duration),!h.IS_ANDROID){e.next=24;break}return e.next=9,Object(l.invokeMethodAsync)("private_fileSystemConvert",{operationType:"getWxFilePath",fileName:""+Date.now(),mimeType:"mp4",autoDeleteIfExists:!0});case 9:return i=e.sent,this.tempFilePath=i.localId,this._absoluteFilePath=i.filePath,a=n.id,n instanceof p.OffscreenCanvas&&(a=n._offscreenCanvasId),r.containerId=this._containerId,r.canvasId=a,r.notifyVideoKeyFrame=!0,r.filePath=i.filePath,e.next=20,T("recorderStart",r);case 20:s=e.sent,t.emit("start",s),e.next=27;break;case 24:return e.next=26,k(this,"start",r);case 26:t.emit("start");case 27:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"stop",value:(s=Object(c.default)(o.a.mark((function e(){var t,n,r,i,a,s,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=12;break}return e.next=6,T("recorderStop",{containerId:this._containerId});case 6:return e.next=8,T("analysis",{filePath:this._absoluteFilePath});case 8:r=e.sent,n={duration:r.duration,tempFilePath:this.tempFilePath,fileSize:r.size},e.next=20;break;case 12:return e.next=14,k(this,"stop");case 14:i=e.sent,a=i.tempFilePath,s=i.tempThumbPath,c=i.fileSize,u=i.duration,n={tempFilePath:a,tempThumbPath:s,fileSize:c,duration:u};case 20:return t.emit("stop",n),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"requestFrame",value:(r=Object(c.default)(o.a.mark((function t(){var n,r,i,a,s=this,c=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.length>0&&void 0!==c[0]?c[0]:function(){},t.next=3,E(this);case 3:if(r=y.get(this),!h.IS_ANDROID){t.next=18;break}return t.next=7,new Promise((function(t){e.NativeGlobal.MediaToolKit.recorderCapture({containerId:s._containerId},t)}));case 7:if(i=t.sent,a=1e3/this.fps,i.got){t.next=16;break}return t.next=12,I(a);case 12:return t.next=14,this.requestFrame(n);case 14:t.next=17;break;case 16:n();case 17:return t.abrupt("return");case 18:if(!(r instanceof p.OffscreenCanvas)){t.next=22;break}setTimeout((function(){n(),e.WeixinCanvas.recordFrame(r.__id,r._offscreenCanvasId)})),t.next=25;break;case 22:return t.next=24,new Promise((function(e){return r.requestAnimationFrame(e)}));case 24:n();case 25:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"on",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),b.get(this).on(e,t)}},{key:"off",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),b.get(this).off(e,t)}},{key:"destroy",value:(n=Object(c.default)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.get(this),_.removeAllListeners(t.id),(n=b.get(this)).eventNames().forEach((function(e){return n.removeAllListeners(e)})),!h.IS_ANDROID){e.next=12;break}return e.next=7,E(this);case 7:return S.delete(this._containerId),e.next=10,T("recorderRemove",{containerId:this._containerId});case 10:e.next=14;break;case 12:return e.next=14,k(this,"remove");case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}();function j(e,t){if(m.get(e))throw new Error("Already created by the same canvas node.");if(!e||"function"!=typeof e.getContext||!e.getContext("webgl"))throw new Error("Cannot get webgl context from target.");var n=new D(e,t);return m.set(e,n),n}}.call(this,n(76))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasIOS",(function(){return v}));var r=n(4),o=n(5),i=n(39),a=n(14),s=n(19),c=n(8),u=n(25),l=n(44),d=n(179),f=n(65),p=n(106);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var v=function(t){Object(a.default)(s,t);var n=h(s);function s(){return Object(r.default)(this,s),n.apply(this,arguments)}return Object(o.default)(s,[{key:"_initCanvasInstance",value:function(){return l.CanvasFontManager.initialize(d.CanvasFontManagerIOS),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(u.pipe)(f.decorateContextForImageProxy,p.temporarilyPatchContext)(Object(i.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image;return Object(u.wrapImageObject)(t,{nodeId:this.nodeId,pluginId:this.pluginId,webviewId:""})}}]),s}(n(131).OffscreenSkiaCanvas)}.call(this,n(76))},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasAndroid",(function(){return g}));var r=n(4),o=n(5),i=n(39),a=n(14),s=n(19),c=n(8),u=n(26),l=n(25),d=n(44),f=n(180),p=n(65),h=n(106);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(c.default)(e);if(t){var o=Object(c.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(s.default)(this,n)}}var g=function(t){Object(a.default)(s,t);var n=v(s);function s(){return Object(r.default)(this,s),n.apply(this,arguments)}return Object(o.default)(s,[{key:"_initCanvasInstance",value:function(){d.CanvasFontManager.initialize(f.CanvasFontManagerAndroid);var t=(u.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id);return(u.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t)}},{key:"getContext",value:function(e,t){return Object(l.pipe)(p.decorateContextForImageProxy,h.temporarilyPatchContext)(Object(i.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(u.default.SkiaImages||SkiaImage),t=Object(l.wrapImageObject)(e,{nodeId:this._nodeId,pluginId:this._pluginId,webviewId:""});return new p.SkiaImageProxy(t)}}]),s}(n(131).OffscreenSkiaCanvas)}.call(this,n(76))},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,i=Object.create(o.prototype),a=new k(r||[]);return i._invoke=function(e,t,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return P()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=l(e,t,n);if("normal"===c.type){if(r=n.done?h:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function g(){}function _(){}function b(){}var y={};y[i]=function(){return this};var m=Object.getPrototypeOf,w=m&&m(m(A([])));w&&w!==n&&r.call(w,i)&&(y=w);var O=b.prototype=g.prototype=Object.create(y);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,i,a,s){var c=l(e[o],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return _.prototype=O.constructor=b,b.constructor=_,_.displayName=c(b,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},S(I.prototype),I.prototype[a]=function(){return this},e.AsyncIterator=I,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new I(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(O),c(O,s,"Generator"),O[i]=function(){return this},O.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;T(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(e){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){(function(e,r){var o;!function(i){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var s,c=2147483647,u=36,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,v=String.fromCharCode;function g(e){throw new RangeError(p[e])}function _(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function b(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+_((e=e.replace(f,".")).split("."),t).join(".")}function y(e){for(var t,n,r=[],o=0,i=e.length;o<i;)(t=e.charCodeAt(o++))>=55296&&t<=56319&&o<i?56320==(64512&(n=e.charCodeAt(o++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),o--):r.push(t);return r}function m(e){return _(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)})).join("")}function w(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function O(e,t,n){var r=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;r+=u)e=h(e/35);return h(r+36*e/(e+38))}function S(e){var t,n,r,o,i,a,s,l,d,f,p,v=[],_=e.length,b=0,y=128,w=72;for((n=e.lastIndexOf("-"))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&g("not-basic"),v.push(e.charCodeAt(r));for(o=n>0?n+1:0;o<_;){for(i=b,a=1,s=u;o>=_&&g("invalid-input"),((l=(p=e.charCodeAt(o++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||l>h((c-b)/a))&&g("overflow"),b+=l*a,!(l<(d=s<=w?1:s>=w+26?26:s-w));s+=u)a>h(c/(f=u-d))&&g("overflow"),a*=f;w=O(b-i,t=v.length+1,0==i),h(b/t)>c-y&&g("overflow"),y+=h(b/t),b%=t,v.splice(b++,0,y)}return m(v)}function I(e){var t,n,r,o,i,a,s,l,d,f,p,_,b,m,S,I=[];for(_=(e=y(e)).length,t=128,n=0,i=72,a=0;a<_;++a)(p=e[a])<128&&I.push(v(p));for(r=o=I.length,o&&I.push("-");r<_;){for(s=c,a=0;a<_;++a)(p=e[a])>=t&&p<s&&(s=p);for(s-t>h((c-n)/(b=r+1))&&g("overflow"),n+=(s-t)*b,t=s,a=0;a<_;++a)if((p=e[a])<t&&++n>c&&g("overflow"),p==t){for(l=n,d=u;!(l<(f=d<=i?1:d>=i+26?26:d-i));d+=u)S=l-f,m=u-f,I.push(v(w(f+S%m,0))),l=h(S/m);I.push(v(w(l,0))),i=O(n,b,r==o),n=0,++r}++n,++t}return I.join("")}s={version:"1.4.1",ucs2:{decode:y,encode:m},decode:S,encode:I,toASCII:function(e){return b(e,(function(e){return d.test(e)?"xn--"+I(e):e}))},toUnicode:function(e){return b(e,(function(e){return l.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(o=function(){return s}.call(t,n,t,e))||(e.exports=o)}()}).call(this,n(199)(e),n(76))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(202),t.encode=t.stringify=n(203)},function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,f,p,h,v=e[l].replace(s,"%20"),g=v.indexOf(n);g>=0?(d=v.substr(0,g),f=v.substr(g+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),r(a,p)?o(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(205)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(194))},function(e,t,n){var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var i=a[c];n=o.call(e,i),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(206),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,a=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,i,"day")||s(c,o,"hour")||s(c,r,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(r){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(208)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))})),e.splice(i,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,n(194))},function(e,t,n){var r;function o(e){function n(){if(n.enabled){var e=n,o=+new Date,i=o-(r||o);e.diff=i,e.prev=r,e.curr=o,r=o;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=t.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var o=t.formatters[r];if("function"==typeof o){var i=a[c];n=o.call(e,i),a.splice(c,1),c--}return n})),t.formatArgs.call(e,a);var u=n.log||t.log||console.log.bind(console);u.apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&("-"===(e=n[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(209),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,r=60*n,o=60*r,i=24*o,a=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*a;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*o;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,i,"day")||s(c,o,"hour")||s(c,r,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){n.r(t);var r={};n.r(r),n.d(r,"SKIA_CANVAS_ENABLED",(function(){return Te.SKIA_CANVAS_ENABLED})),n.d(r,"canvas",(function(){return Te.canvas})),n.d(r,"canvasInfo",(function(){return Te.canvasInfo})),n.d(r,"onCanvasMethodCallbackOnce",(function(){return Te.onCanvasMethodCallbackOnce})),n.d(r,"createContext",(function(){return Te.createContext})),n.d(r,"drawCanvasImpl",(function(){return Te.drawCanvasImpl})),n.d(r,"drawCanvas",(function(){return Te.drawCanvas})),n.d(r,"canvasToTempFilePath",(function(){return Te.canvasToTempFilePath})),n.d(r,"createCanvasContext",(function(){return Te.createCanvasContext})),n.d(r,"drawCanvas4Plugin",(function(){return Te.drawCanvas4Plugin})),n.d(r,"canvasToTempFilePath4Plugin",(function(){return Te.canvasToTempFilePath4Plugin})),n.d(r,"createCanvasContext4Plugin",(function(){return Te.createCanvasContext4Plugin})),n.d(r,"canvasGetImageData4Plugin",(function(){return Te.canvasGetImageData4Plugin})),n.d(r,"canvasPutImageData4Plugin",(function(){return Te.canvasPutImageData4Plugin})),n.d(r,"canvasToDataURL",(function(){return Te.canvasToDataURL})),n.d(r,"canvasGetImageData",(function(){return Te.canvasGetImageData})),n.d(r,"canvasPutImageData",(function(){return Te.canvasPutImageData})),n.d(r,"OffscreenCanvas",(function(){return ke.OffscreenCanvas})),n.d(r,"createOffscreenCanvas",(function(){return ke.createOffscreenCanvas})),n.d(r,"skiaCanvasInsert",(function(){return Ae.skiaCanvasInsert})),n.d(r,"skiaCanvasRemove",(function(){return Ae.skiaCanvasRemove})),n.d(r,"getOrCreateCanvas",(function(){return Ae.getOrCreateCanvas})),n.d(r,"SkiaCanvas",(function(){return Ae.SkiaCanvas})),n.d(r,"createCanvasNode",(function(){return Tt}));var o={};n.r(o),n.d(o,"chooseVideo",(function(){return ur})),n.d(o,"saveVideoToPhotosAlbum",(function(){return lr})),n.d(o,"getVideoInfo",(function(){return dr})),n.d(o,"compressVideo",(function(){return fr}));var i={};n.r(i),n.d(i,"playVoice",(function(){return hr})),n.d(i,"pauseVoice",(function(){return vr})),n.d(i,"stopVoice",(function(){return gr})),n.d(i,"onVoicePlayEnd",(function(){return _r}));var a={};n.r(a),n.d(a,"getRecorderManager",(function(){return Ir})),n.d(a,"startRecord",(function(){return Er})),n.d(a,"stopRecord",(function(){return Cr}));var s={};n.r(s),n.d(s,"getBackgroundAudioManager",(function(){return Nr})),n.d(s,"getBackgroundAudioPlayerState",(function(){return Lr})),n.d(s,"playBackgroundAudio",(function(){return Br})),n.d(s,"pauseBackgroundAudio",(function(){return Fr})),n.d(s,"seekBackgroundAudio",(function(){return Wr})),n.d(s,"stopBackgroundAudio",(function(){return Ur})),n.d(s,"onBackgroundAudioPlay",(function(){return Gr})),n.d(s,"onBackgroundAudioPause",(function(){return Hr})),n.d(s,"onBackgroundAudioStop",(function(){return zr}));var c={};n.r(c),n.d(c,"createVideoContext",(function(){return Dt.createVideoContext})),n.d(c,"createSQVideoContext",(function(){return Dt.createSQVideoContext})),n.d(c,"createCameraContext",(function(){return nn})),n.d(c,"createMapContext",(function(){return me})),n.d(c,"createSQMapContext",(function(){return we})),n.d(c,"createInnerAudioContext",(function(){return bi})),n.d(c,"createLivePlayerContext",(function(){return Tn})),n.d(c,"createSQLivePlayerContext",(function(){return kn})),n.d(c,"createLivePusherContext",(function(){return Yn})),n.d(c,"createAudioContext",(function(){return sr})),n.d(c,"createSQEditorContext",(function(){return Ai}));var u={};n.r(u),n.d(u,"uploadEncryptedFileToCDN",(function(){return hl})),n.d(u,"onUploadEncryptedFileToCDNProgress",(function(){return vl})),n.d(u,"uploadToCommonCDN",(function(){return _l})),n.d(u,"private_uploadToCommonCDN",(function(){return bl}));var l={};n.r(l),n.d(l,"getBackgroundFetchData",(function(){return Ed})),n.d(l,"onBackgroundFetchData",(function(){return Cd})),n.d(l,"setBackgroundFetchToken",(function(){return Td})),n.d(l,"getBackgroundFetchToken",(function(){return kd}));var d={};n.r(d),n.d(d,"getBatteryInfo",(function(){return qd})),n.d(d,"getBatteryInfoSync",(function(){return Yd}));var f={};n.r(f),n.d(f,"startAccelerometer",(function(){return Xd})),n.d(f,"stopAccelerometer",(function(){return $d})),n.d(f,"onAccelerometerChange",(function(){return ef})),n.d(f,"offAccelerometerChange",(function(){return Qd}));var p={};n.r(p),n.d(p,"startCompass",(function(){return rf})),n.d(p,"stopCompass",(function(){return of})),n.d(p,"onCompassChange",(function(){return cf})),n.d(p,"offCompassChange",(function(){return sf}));var h={};n.r(h),n.d(h,"makePhoneCall",(function(){return uf})),n.d(h,"makeVoIPCall",(function(){return lf}));var v={};n.r(v),n.d(v,"scanCode",(function(){return vf})),n.d(v,"openQRCode",(function(){return gf})),n.d(v,"scanItem",(function(){return yf})),n.d(v,"_scanItem",(function(){return mf}));var g={};n.r(g),n.d(g,"getClipboardData",(function(){return Sf})),n.d(g,"setClipboardData",(function(){return If}));var _={};n.r(_),n.d(_,"startBeaconDiscovery",(function(){return Ef})),n.d(_,"stopBeaconDiscovery",(function(){return Cf})),n.d(_,"getBeacons",(function(){return Tf})),n.d(_,"onBeaconUpdate",(function(){return kf})),n.d(_,"offBeaconUpdate",(function(){return Af})),n.d(_,"onBeaconServiceChange",(function(){return Pf})),n.d(_,"offBeaconServiceChange",(function(){return Df}));var b={};n.r(b),n.d(b,"captureScreen",(function(){return jf})),n.d(b,"onUserCaptureScreen",(function(){return xf.onUserCaptureScreen})),n.d(b,"offUserCaptureScreen",(function(){return xf.offUserCaptureScreen})),n.d(b,"_onUserCaptureScreen",(function(){return xf._onUserCaptureScreen})),n.d(b,"_offUserCaptureScreen",(function(){return xf._offUserCaptureScreen})),n.d(b,"getScreenBrightness",(function(){return Rf})),n.d(b,"setScreenBrightness",(function(){return Mf})),n.d(b,"setKeepScreenOn",(function(){return an}));var y={};n.r(y),n.d(y,"vibrateShort",(function(){return Nf})),n.d(y,"vibrateLong",(function(){return Lf}));var m={};n.r(m),n.d(m,"chooseContact",(function(){return Bf})),n.d(m,"chooseWeChatContact",(function(){return Ff})),n.d(m,"addPhoneContact",(function(){return Wf})),n.d(m,"quicklyAddBrandContact",(function(){return Uf})),n.d(m,"searchContacts",(function(){return Vf})),n.d(m,"privateSearchContacts",(function(){return Gf}));var w={};n.r(w),n.d(w,"openBluetoothAdapter",(function(){return Hf})),n.d(w,"closeBluetoothAdapter",(function(){return zf})),n.d(w,"getBluetoothAdapterState",(function(){return qf})),n.d(w,"startBluetoothDevicesDiscovery",(function(){return Yf})),n.d(w,"stopBluetoothDevicesDiscovery",(function(){return Kf})),n.d(w,"getBluetoothDevices",(function(){return Jf})),n.d(w,"getBLEDeviceRSSI",(function(){return Xf})),n.d(w,"getConnectedBluetoothDevices",(function(){return $f})),n.d(w,"createBLEConnection",(function(){return Zf})),n.d(w,"closeBLEConnection",(function(){return Qf})),n.d(w,"getBLEDeviceServices",(function(){return ep})),n.d(w,"getBLEDeviceCharacteristics",(function(){return tp})),n.d(w,"notifyBLECharacteristicValueChanged",(function(){return np})),n.d(w,"notifyBLECharacteristicValueChange",(function(){return rp})),n.d(w,"readBLECharacteristicValue",(function(){return op})),n.d(w,"writeBLECharacteristicValue",(function(){return ip})),n.d(w,"onBLEConnectionStateChanged",(function(){return ap})),n.d(w,"offBLEConnectionStateChanged",(function(){return sp})),n.d(w,"onBLEConnectionStateChange",(function(){return cp})),n.d(w,"offBLEConnectionStateChange",(function(){return up})),n.d(w,"onBLECharacteristicValueChange",(function(){return lp})),n.d(w,"offBLECharacteristicValueChange",(function(){return dp})),n.d(w,"onBluetoothDeviceFound",(function(){return fp})),n.d(w,"offBluetoothDeviceFound",(function(){return pp})),n.d(w,"onBluetoothAdapterStateChange",(function(){return hp})),n.d(w,"offBluetoothAdapterStateChange",(function(){return vp})),n.d(w,"setBLEMTU",(function(){return gp})),n.d(w,"createBLEPeripheralServer",(function(){return kp})),n.d(w,"onBLEPeripheralConnectionStateChanged",(function(){return Pp})),n.d(w,"offBLEPeripheralConnectionStateChanged",(function(){return Dp})),n.d(w,"makeBluetoothPair",(function(){return jp}));var O={};n.r(O),n.d(O,"startWifi",(function(){return xp})),n.d(O,"stopWifi",(function(){return Rp})),n.d(O,"getWifiList",(function(){return Mp})),n.d(O,"getConnectedWifi",(function(){return Np})),n.d(O,"connectWifi",(function(){return Lp})),n.d(O,"presetWifiList",(function(){return Bp})),n.d(O,"setWifiList",(function(){return Fp})),n.d(O,"onGetWifiList",(function(){return Wp})),n.d(O,"offGetWifiList",(function(){return Up})),n.d(O,"onWifiConnected",(function(){return Vp})),n.d(O,"offWifiConnected",(function(){return Gp})),n.d(O,"onEvaluateWifi",(function(){return qp}));var S={};n.r(S),n.d(S,"getHCEState",(function(){return Yp})),n.d(S,"startHCE",(function(){return Kp})),n.d(S,"stopHCE",(function(){return Jp})),n.d(S,"sendHCEMessage",(function(){return Xp})),n.d(S,"onHCEMessage",(function(){return $p})),n.d(S,"offHCEMessage",(function(){return Zp})),n.d(S,"getNFCAdapter",(function(){return Sh}));var I={};n.r(I),n.d(I,"startLocalServiceDiscovery",(function(){return kh})),n.d(I,"stopLocalServiceDiscovery",(function(){return Ah})),n.d(I,"onLocalServiceFound",(function(){return Ph})),n.d(I,"offLocalServiceFound",(function(){return Dh})),n.d(I,"onLocalServiceLost",(function(){return jh})),n.d(I,"offLocalServiceLost",(function(){return xh})),n.d(I,"onLocalServiceDiscoveryStop",(function(){return Rh})),n.d(I,"offLocalServiceDiscoveryStop",(function(){return Mh})),n.d(I,"onLocalServiceResolveFail",(function(){return Nh})),n.d(I,"offLocalServiceResolveFail",(function(){return Lh}));var E={};n.r(E),n.d(E,"startGyroscope",(function(){return Fh})),n.d(E,"stopGyroscope",(function(){return Wh})),n.d(E,"onGyroscopeChange",(function(){return Uh})),n.d(E,"offGyroscopeChange",(function(){return Vh}));var C={};n.r(C),n.d(C,"startDeviceMotionListening",(function(){return Hh})),n.d(C,"stopDeviceMotionListening",(function(){return zh})),n.d(C,"onDeviceMotionChange",(function(){return qh})),n.d(C,"offDeviceMotionChange",(function(){return Yh}));var T={};n.r(T),n.d(T,"checkIsOpenAccessibility",(function(){return Kh}));var k={};n.r(k),n.d(k,"addPhoneCalendar",(function(){return Qh})),n.d(k,"addPhoneRepeatCalendar",(function(){return ev}));var A={};n.r(A),n.d(A,"getRandomValues",(function(){return tv}));var P={};n.r(P),n.d(P,"getAppConfig",(function(){return Zk})),n.d(P,"onAppConfig",(function(){return Qk})),n.d(P,"onPullDownRefresh",(function(){return eA})),n.d(P,"onShareAppMessage",(function(){return tA})),n.d(P,"onAddToFavorites",(function(){return nA})),n.d(P,"onStartHandoff",(function(){return rA})),n.d(P,"addToFavorites",(function(){return oA})),n.d(P,"onTabItemTap",(function(){return iA})),n.d(P,"publishAnalyticsConfig",(function(){return aA})),n.d(P,"reportRealtimeAction",(function(){return sA})),n.d(P,"shareAppMessage",(function(){return cA})),n.d(P,"shareAppMessageDirectly",(function(){return uA})),n.d(P,"shareAppMessageToSpecificContactDirectly",(function(){return lA})),n.d(P,"shareAppMessageForFakeNative",(function(){return dA})),n.d(P,"shareAppMessageToSpecificContactForFakeNativeDirectly",(function(){return fA})),n.d(P,"checkHandoffEnabled",(function(){return pA})),n.d(P,"subscribeAnalyticsReport",(function(){return hA})),n.d(P,"subscribeRecycleStatistics",(function(){return vA})),n.d(P,"subscribeSavePageState",(function(){return gA})),n.d(P,"subscribeTapShareButton",(function(){return _A})),n.d(P,"subscribeTapHandoffButton",(function(){return bA})),n.d(P,"subscribeTapShareTimeLineButton",(function(){return yA})),n.d(P,"showUpdatableMessageSubscribeButton",(function(){return mA})),n.d(P,"onShareTimeline",(function(){return wA})),n.d(P,"shareTimeline",(function(){return OA})),n.d(P,"showShareTimelineMenu",(function(){return SA})),n.d(P,"getInnerEnterOptionsSync",(function(){return IA})),n.d(P,"onAppUnhang",(function(){return EA})),n.d(P,"onPageNotFound",(function(){return CA})),n.d(P,"onThemeChange",(function(){return TA})),n.d(P,"onAppEnterForeground",(function(){return kA})),n.d(P,"onAppEnterBackground",(function(){return AA})),n.d(P,"onAppShow",(function(){return PA})),n.d(P,"onAppHide",(function(){return DA})),n.d(P,"onError",(function(){return jA})),n.d(P,"onUnhandledRejection",(function(){return xA})),n.d(P,"getLaunchOptionsSync",(function(){return RA})),n.d(P,"emitIsloatedAppShow",(function(){return MA})),n.d(P,"emitIsloatedAppHide",(function(){return NA})),n.d(P,"onNavigationBarTitleUpdate",(function(){return LA})),n.d(P,"showShareMenu",(function(){return BA})),n.d(P,"userShareMenuState",(function(){return FA})),n.d(P,"ShareInfoStorage",(function(){return WA})),n.d(P,"_getRealRoute",(function(){return te._getRealRoute})),n.d(P,"_triggerBeforeUnloadPage",(function(){return UA})),n.d(P,"_triggerBeforeShareAppMessage",(function(){return VA})),n.d(P,"onAppRoute",(function(){return GA})),n.d(P,"onAppRouteDone",(function(){return HA})),n.d(P,"onPageReload",(function(){return zA})),n.d(P,"onWebviewEvent",(function(){return qA})),n.d(P,"createPluginWX",(function(){return Dk})),n.d(P,"createPluginConsole",(function(){return jk})),n.d(P,"publishFunctionalPage",(function(){return YA})),n.d(P,"publishPageScrollTo",(function(){return KA})),n.d(P,"publishTelecontrol",(function(){return JA})),n.d(P,"publishUpdateAppData",(function(){return XA})),n.d(P,"subscribeCheckWebviewAliveOk",(function(){return $A})),n.d(P,"publishCheckWebviewAlive",(function(){return ZA})),n.d(P,"subscribeSubjectInfo",(function(){return QA})),n.d(P,"reportPv",(function(){return eP})),n.d(P,"invokeWebviewMethod",(function(){return uu.invokeWebviewMethod})),n.d(P,"getShareCookieString",(function(){return Gi.getShareCookieString})),n.d(P,"checkAPIAvailable",(function(){return Lo.checkAPIAvailable})),n.d(P,"reportRecycledAPI",(function(){return Vi.reportRecycledAPI})),n.d(P,"getLogManager",(function(){return Nv})),n.d(P,"getSystemInfoSync",(function(){return ea.getSystemInfoSync})),n.d(P,"getNetworkType",(function(){return No.getNetworkType})),n.d(P,"isIsolatedSubpackage",(function(){return Hk})),n.d(P,"operateRealtimeData",(function(){return qv})),n.d(P,"onRealtimeDataResponse",(function(){return Yv})),n.d(P,"getPublicLibVersion",(function(){return sv})),n.d(P,"onCallMethodFromWxs",(function(){return tP})),n.d(P,"nativeConsole",(function(){return uv.nativeConsole})),n.d(P,"uploadUserLogOnHide",(function(){return Cg})),n.d(P,"getCloudFileUrl",(function(){return ne.getCloudFileUrl})),n.d(P,"route",(function(){return lu.route})),n.d(P,"getPreloadVideoAdUnitIds",(function(){return Sa})),n.d(P,"getPreloadAdUnitIds",(function(){return ou})),n.d(P,"getCachePermissionBytes",(function(){return qk})),n.d(P,"fontFaceRecords",(function(){return pr.fontFaceRecords})),n.d(P,"reportShareAppMessage",(function(){return ns.reportShareAppMessage})),n.d(P,"startHandoff",(function(){return $k}));var D={};n.r(D),n.d(D,"onSubpackageReady",(function(){return gP})),n.d(D,"getSubpackagesConfig",(function(){return _P}));var j={};n.r(j),n.d(j,"_operateWXData",(function(){return Ut._operateWXData})),n.d(j,"_requestSkipCheckDomain",(function(){return xl})),n.d(j,"_uploadFileSkipCheckDomain",(function(){return Fl})),n.d(j,"_downloadFileSkipCheckDomain",(function(){return ra._downloadFileSkipCheckDomain})),n.d(j,"_socketSkipCheckDomainFactory",(function(){return gd})),n.d(j,"uploadToCommonCDN",(function(){return _l})),n.d(j,"private_getUserAgent",(function(){return ea.private_getUserAgent}));var x=n(20),R=n(0),M=n(24),N=n(6),L=n(3),B=null;Object(R.subscribe)("onInputComponentData",(function(e){B=e,W.forEach((function(e){F(e,e.webviewId)})),W=[]}));var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=B.data;if(n&&"function"==typeof L.default.webviewEventCallback){var r=JSON.parse(n);if(r.bindkeyboardheightchange)try{L.default.webviewEventCallback({data:{type:"keyboardheightchange",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{duration:e.duration||0,height:e.height||0}},eventName:r.bindkeyboardheightchange,webviewId:t||L.default.currentWebviewId,nodeId:r.nodeId})}catch(e){throw new N.AppServiceSdkKnownError("bind key input error")}}};Object(R.subscribe)("removeInputComponent",(function(e){B&&B.inputId===e.inputId&&(B=null)}));var W=[];Object(R.onMethod)("onKeyboardHeightChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;B?F(e,t):W.push({inputId:e.inputId,height:e.height,duration:e.duration,webviewId:t})})),Object(R.onMethod)("onKeyboardValueChange",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.value,r=e.cursor;if(Object(R.publish)("setKeyboardValue",{value:n,cursor:r,inputId:e.inputId},[t]),e.data){var o=JSON.parse(e.data);if(o.modelValueName&&__virtualDOM__.setModelValueData(e.value,o.modelValueName,t,o.nodeId),"function"==typeof L.default.webviewEventCallback&&o.bindinput){var i;try{i=L.default.webviewEventCallback({data:{type:"input",target:o.target,currentTarget:o.target,timeStamp:Date.now(),touches:[],detail:{value:e.value,cursor:e.cursor,keyCode:e.keyCode}},eventName:o.bindinput,webviewId:t,nodeId:o.nodeId})}catch(e){throw new N.AppServiceSdkKnownError("bind key input error")}if(o.setKeyboardValue)if(null==i||!1===i);else if("Object"===Object(N.getDataType)(i)){var a={inputId:e.inputId};n!==i.value&&(a.value=i.value+""),Number.isNaN(parseInt(i.cursor,10))||(a.cursor=parseInt(i.cursor,10),void 0===a.value&&(a.value=n),a.cursor>a.value.length&&(a.cursor=-1)),Object(R.invokeMethod)("setKeyboardValue",a)}else n!==i&&Object(R.invokeMethod)("setKeyboardValue",{value:i+"",cursor:-1,inputId:e.inputId})}}}));var U=n(33),V=n(27),G=n(14),H=n(19),z=n(8),q=n(16),Y=n(31),K=n(5);function J(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var X,$=n(4),Z=n(15),Q=n(43),ee=n(2),te=n(81),ne=n(60),re=n(10);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var se=!ee.IS_USE_NATIVE_MAP&&ee.IS_HOST_SDK,ce={},ue={},le=new U.EventEmitter2,de={},fe={},pe={},he=["getCenterLocation","getRegion","getScale","includePoints","moveToLocation","translateMarker","setIndoorFloor","getIndoorFloor","setIndoorMaskColor","getRotate","getSkew","eraseLines","setCenterOffset","addCustomLayer","removeCustomLayer","moveAlong","initMarkerCluster","addMarkers","removeMarkers","on","off","once","toScreenLocation","fromScreenLocation","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","openMapApp","setLocMarkerIcon"];var ve=0;Object(R.subscribe)("mapInsert",(function(e,t){var n=e.nodeId,r=e.domId,o=e.mapId,i=t+"_"+e.pluginId+"_"+r+"_";n&&n!==__virtualDOM__.getRootNodeId(t)&&(i+=n),ce[i]=o,ue[t+"_"+o]=e,le.emit("mapInsert"),function(e){de[e]||(de[e]=!0,Object(Q.onBeforeUnloadPage)(e,(function(e){delete de[e],Object.keys(ce).forEach((function(t){new RegExp("^"+e).test(t)&&(delete ue[e+"_"+ce[t]],delete ce[t])})),Object.keys(fe).forEach((function(t){new RegExp("^api_"+e).test(t)&&(delete ue[e+"_"+ce[t.substr(4)]],delete fe[t])})),Object.keys(fe).forEach((function(t){new RegExp("^SQ_"+e).test(t)&&(delete ue[t.substr(3)],delete fe[t])}))})))}(t)})),Object(R.subscribe)("mapRemove",(function(e,t){var n=e.domId,r=e.mapId,o=e.pluginId,i=e.nodeId,a=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(a+=i),delete ce[a],delete ue[t+"_"+r];var s="api_"+t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(s+=i);var c="SQ_"+t+"_"+r;delete fe[s],delete fe[c]}));var ge=function e(){Object($.default)(this,e)};Object(R.subscribe)("operateMapCallback",(function(e){var t=e.callbackId;t&&"function"==typeof pe[t]&&(pe[t](e),delete pe[t])}));var _e=(J((X=function(){function e(){var t=this;Object($.default)(this,e);var n=this.exportContext=new ge;he.forEach((function(e){return n[e]=t[e].bind(t)})),this._lastMarkerPos={},this._lastMarkerDeg={},this._translating={},this._delayTranslate={},this._isGetMarkerPos={}}return Object(K.default)(e,[{key:"on",value:function(e,t){this._listenerHandler("on",e,t)}},{key:"off",value:function(e,t){this._listenerHandler("off",e,t)}},{key:"once",value:function(e,t){this._listenerHandler("once",e,t)}},{key:"_invoke",value:function(e,t){if(ee.IS_PC||ee.IS_DEVTOOLS||se||ee.IS_MINA||["includeMapPoints","getMapMarker"].indexOf(e)>=0){t.method=e;var n="callback"+this.webviewId+"_"+t.mapId+"_"+ve++;pe[n]=function(e){delete e.callbackId,delete e.mapId,delete e.method,e.errMsg&&(e.errMsg.indexOf(":ok")>-1?"function"==typeof t.success&&t.success(e):e.errMsg.indexOf(":fail")>-1&&"function"==typeof t.fail&&t.fail(e)),"function"==typeof t.complete&&t.complete(e)},t.callbackId=n,Object(R.publish)("operateMap",t,[this.webviewId])}else Object(R.invokeMethod)(e,t)}},{key:"toScreenLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("toScreenLocation",e)}},{key:"fromScreenLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("fromScreenLocation",e)}},{key:"getCenterLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapCenterLocation",e)}},{key:"setLocMarkerIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("setLocMarkerIcon",e,{iconPath:""})){var t=Object.assign({},e);/^(wxfile|https?)/.test(t.iconPath)||(t.iconPath=Object(te._getRealRoute)(t.iconPath,!1)),this._invokeMethod("setMapLocMarkerIcon",t)}}},{key:"getScale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapScale",e,{beforeSuccess:function(e){e.scale=+Number.parseFloat(e.scale).toFixed(2)}})}},{key:"getRegion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapRegion",e)}},{key:"moveToLocation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("moveToMapLocation",e)}},{key:"addGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("addGroundOverlay",e,{id:0,src:"",bounds:{}})){var t=Object.assign({visible:!0,zIndex:1,opacity:1},e);/^(wxfile|https?)/.test(t.src)||(t.src=Object(te._getRealRoute)(t.src,!1)),this._invokeMethod("addMapGroundOverlay",t)}}},{key:"openMapApp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("openMapApp",e,{longitude:0,latitude:0,destination:""})&&this._invokeMethod("openMapApp",e)}},{key:"removeGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("removeGroundOverlay",e,{id:0})&&this._invokeMethod("removeMapGroundOverlay",e)}},{key:"updateGroundOverlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("updateGroundOverlay",e,{id:0,src:"",bounds:{}})){var t=Object.assign({visible:!0,zIndex:1,opacity:1},e);this._invokeMethod("updateMapGroundOverlay",t)}}},{key:"moveAlong",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("moveAlong",e,{duration:0,markerId:0,path:[]})){var t={autoRotate:!0};Object.assign(t,e),this._invokeMethod("moveMapMarkerAlong",t)}}},{key:"addMarkers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("addMarkers",t,{markers:[]})){var n=t.markers.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};re.isNumber(e.id)||console.warn("marker id must be a number");var t=Object.assign({},e);t.anchor=re.isObject(t.anchor)?t.anchor:{x:.5,y:1},t.alpha=re.isNumber(t.alpha)?t.alpha:1,t.rotate=re.isNumber(t.rotate)?t.rotate:0;var n=t.iconPath;return re.isString(n)&&!/^(wxfile|https?)/.test(n)&&(t.iconPath=Object(te._getRealRoute)(n,!1)),re.isObject(t.label)&&(t.label=Object.assign({content:"",color:"#000000",fontSize:12,borderRadius:0,borderWidth:0,borderColor:"#000000",bgColor:"#00000000",padding:0,anchorX:0,anchorY:0,textAlign:"right"},t.label)),re.isObject(t.callout)?(t.callout=Object.assign({content:"",color:"#000000",fontSize:12,display:"BYCLICK",borderRadius:0,borderWidth:0,borderColor:"#00000000",bgColor:"#ffffff",padding:0,anchorX:0,anchorY:0,textAlign:"center"},t.callout),t.callout.display="ALWAYS"===t.callout.display?1:0):re.isString(t.title)&&(t.callout={content:t.title,bgColor:"#FFFFFF",padding:10,display:0,textAlign:"center"}),delete t.title,t.data=JSON.stringify({markerId:t.id}),t})),r={};n.forEach((function(e,t){var n=e.iconPath;re.isString(n)&&/^cloud:/.test(n)&&(r[n]||(r[n]=[]),r[n].push(t))}));var o=Object.keys(r);Object(ne.getCloudFileUrl)(o,"image",(function(i){Object(Y.default)(i.data.map((function(e){return e.url}))).forEach((function(e,t){r[o[t]].forEach((function(t){n[t].iconPath=e}))}));var a=Object.assign({clear:!1},t,{markers:n});e._invokeMethod("addMapMarkers",a)}))}}},{key:"removeMarkers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("removeMarkers",e,{markerIds:[]})){var t=Object.assign({},{markers:e.markerIds},e);this._invokeMethod("removeMapMarkers",t)}}},{key:"initMarkerCluster",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({enableDefaultStyle:!0,zoomOnClick:!0,gridSize:60},e);this._invokeMethod("initMapMarkerCluster",t)}},{key:"translateMarker",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.markerId;if(void 0!==n)if(t.destination)if(this._translating[n])this._delayTranslate[n]?this._delayTranslate[n].push(t):this._delayTranslate[n]=[t];else{if(!this._isGetMarkerPos[n])return this._translating[n]=!0,this._invokeMethod("getMapMarker",{markerId:n,success:function(t){e._lastMarkerPos[n]=t.pos},complete:function(){e._isGetMarkerPos[n]=!0,e._translating[n]=!1;var t=e._delayTranslate[n];t&&t.length&&e.translateMarker(t.shift())}}),void(this._delayTranslate[n]?this._delayTranslate[n].push(t):this._delayTranslate[n]=[t]);0===t.duration&&(t.duration=1);var r={markerId:n,keyFrames:[],success:function(n){"function"==typeof t.success&&t.success.call(e,n),"function"==typeof t.animationEnd&&t.animationEnd.call(e)},fail:function(r){e._delayTranslate[n]=[],"function"==typeof t.fail&&t.fail.call(e,r)},complete:function(r){"function"==typeof t.complete&&t.complete.call(e,r),e._translating[n]=!1;var o=e._delayTranslate[n];o&&o.length&&e.translateMarker(o.shift())}},o=0,i=this._lastMarkerPos[n],a=t.destination,s=!(i&&i.latitude===a.latitude&&i.longitude===a.longitude);if(t.autoRotate||"number"!=typeof t.rotate){var c,u;if(i){var l=a.latitude-i.latitude,d=a.longitude-i.longitude,f=l/d||0;c=Math.abs((d<0?180:0)-Math.abs(180*Math.atan(f)/Math.PI))*(l>0?-1:1)}"number"==typeof this._lastMarkerDeg[n]&&(u=c-this._lastMarkerDeg[n],Math.abs(u)>180&&(u=u>0?u-360:u+360),Math.abs(u)>3&&t.autoRotate&&s&&(o=u)),(Math.abs(u)>3&&t.autoRotate||void 0===this._lastMarkerDeg[n])&&(this._lastMarkerDeg[n]=c)}else{var p=t.rotate-(this._lastMarkerDeg[n]||0);Math.abs(p)>3&&(Math.abs(p)>180&&(p=p>0?p-360:p+360),o=p,this._lastMarkerDeg[n]=t.rotate)}var h="number"==typeof t.duration?t.duration:1e3;t.moveWithRotate?r.keyFrames.push(ae({rotate:o,duration:h},t.destination)):(s&&r.keyFrames.push(ae({duration:h},t.destination)),0!==o&&r.keyFrames.unshift({rotate:o,duration:Math.abs(o)<10?100:500})),r.keyFrames.length>0?(this._translating[n]=!0,this._invokeMethod("translateMapMarker",r)):setTimeout((function(){r.success(),r.complete()})),this._lastMarkerPos[n]=t.destination}else console.warn("MapContext.translateMarker: require destination");else console.warn("MapContext.translateMarker: require markerId")}},{key:"includePoints",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.points&&e.points instanceof Array){e.points.forEach((function(e){e.latitude=Number(e.latitude),e.longitude=Number(e.longitude)}));var t=e.padding;e.padding=[0,0,0,0],t&&(e.padding[0]=Number(t[0])||0,e.padding[1]=Number(t[1])||0,e.padding[2]=Number(t[2])||0,e.padding[3]=Number(t[3])||0),this._invokeMethod("includeMapPoints",e)}}},{key:"setIndoorFloor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.buildingId?e.floorName?this._invokeMethod("setMapIndoorFloor",e):console.warn("MapContext.setIndoorFloor: require floorName"):console.warn("MapContext.setIndoorFloor: require buildingId")}},{key:"getIndoorFloor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapIndoorFloor",e)}},{key:"getRotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapRotate",e)}},{key:"getSkew",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("getMapSkew",e)}},{key:"setIndoorMaskColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("setMapIndoorMaskColor",e)}},{key:"eraseLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.lines&&e.lines instanceof Array?this._invokeMethod("eraseMapLines",e):console.warn("MapContext.eraseLines: require lines")}},{key:"setCenterOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({offset:[.5,.5],animated:!1},e);this._invokeMethod("setMapCenterOffset",t)}},{key:"addCustomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("addCustomLayer",e,{layerId:""})&&this._invokeMethod("addMapCustomLayer",e)}},{key:"removeCustomLayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("removeCustomLayer",e,{layerId:""})&&this._invokeMethod("removeMapCustomLayer",e)}}]),e}()).prototype,"toScreenLocation",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"toScreenLocation"),X.prototype),J(X.prototype,"fromScreenLocation",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"fromScreenLocation"),X.prototype),J(X.prototype,"getCenterLocation",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getCenterLocation"),X.prototype),J(X.prototype,"setLocMarkerIcon",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"setLocMarkerIcon"),X.prototype),J(X.prototype,"getScale",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getScale"),X.prototype),J(X.prototype,"getRegion",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getRegion"),X.prototype),J(X.prototype,"moveToLocation",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"moveToLocation"),X.prototype),J(X.prototype,"addGroundOverlay",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"addGroundOverlay"),X.prototype),J(X.prototype,"openMapApp",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"openMapApp"),X.prototype),J(X.prototype,"removeGroundOverlay",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"removeGroundOverlay"),X.prototype),J(X.prototype,"updateGroundOverlay",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"updateGroundOverlay"),X.prototype),J(X.prototype,"moveAlong",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"moveAlong"),X.prototype),J(X.prototype,"addMarkers",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"addMarkers"),X.prototype),J(X.prototype,"removeMarkers",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"removeMarkers"),X.prototype),J(X.prototype,"initMarkerCluster",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"initMarkerCluster"),X.prototype),J(X.prototype,"translateMarker",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"translateMarker"),X.prototype),J(X.prototype,"includePoints",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"includePoints"),X.prototype),J(X.prototype,"setIndoorFloor",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"setIndoorFloor"),X.prototype),J(X.prototype,"getIndoorFloor",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getIndoorFloor"),X.prototype),J(X.prototype,"getRotate",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getRotate"),X.prototype),J(X.prototype,"getSkew",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"getSkew"),X.prototype),J(X.prototype,"setIndoorMaskColor",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"setIndoorMaskColor"),X.prototype),J(X.prototype,"eraseLines",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"eraseLines"),X.prototype),J(X.prototype,"setCenterOffset",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"setCenterOffset"),X.prototype),J(X.prototype,"addCustomLayer",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"addCustomLayer"),X.prototype),J(X.prototype,"removeCustomLayer",[Z.promised],Object.getOwnPropertyDescriptor(X.prototype,"removeCustomLayer"),X.prototype),X),be=function(e){Object(G.default)(n,e);var t=oe(n);function n(e,r,o,i){var a;if(Object($.default)(this,n),a=t.call(this),"string"!=typeof e)throw new N.ThirdScriptError("Parameter 1 should be a string");return a.domId=e,a.pluginId=i,a.webviewId=r,a.nodeId=o,a}return Object(K.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId;"number"==typeof ce[o]||ce[o]?(t.mapId=ce[o],this._invoke(e,t,r)):le.on("mapInsert",(function(){t.mapId=ce[o],n._invoke(e,t,r)}))}},{key:"_listenerHandler",value:function(e,t,n){if(["on","off","once"].includes(e)){var r,o=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,i=this.webviewId;"number"==typeof ce[o]||ce[o]?(r=ce[o],Se[e](t+"_"+i+"_"+r,n)):le.on("mapInsert",(function(){r=ce[o],Se[e](t+"_"+i+"_"+r,n)}))}}}]),n}(_e),ye=function(e){Object(G.default)(n,e);var t=oe(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this)).mapId=e,o.webviewId=r,o}return Object(K.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.mapId=this.mapId,this._invoke(e,t,n)}},{key:"_listenerHandler",value:function(e,t,n){if(["on","off","once"].includes(e)){var r=this.webviewId,o=this.mapId;Se[e](t+"_"+r+"_"+o,n)}}}]),n}(_e),me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="api_"+t+"_"+r+"_"+e+"_";if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(o+=n),fe[o])return fe[o].exportContext;var i=new be(e,t,n,r);return fe[o]=i,i.exportContext},we=function(e,t){var n="SQ_"+t+"_"+e;if(fe[n])return fe[n].exportContext;var r=new ye(e,t);return fe[n]=r,r.exportContext},Oe=n(59),Se=new U.default({maxListeners:2e5}),Ie={onMapMarkerClusterCreate:"markerClusterCreate",onMapMarkerClusterClick:"markerClusterClick"};Object.keys(Ie).forEach((function(e){Object(V.onNativeEvent)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=t.mapId,o=Ie[e];delete t.mapId,Se.emit(o+"_"+n+"_"+r,t)}))})),Object(R.onMethod)("onMapMarkerClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];if(n&&n.bindmarkertap&&"function"==typeof L.default.webviewEventCallback){var r=JSON.parse(e.data);L.default.webviewEventCallback({data:{type:"markertap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindmarkertap,webviewId:t,nodeId:n.nodeId})}})),Object(R.onMethod)("onMapCalloutClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];if(n&&n.bindcallouttap&&"function"==typeof L.default.webviewEventCallback){var r=JSON.parse(e.data);L.default.webviewEventCallback({data:{type:"callouttap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindcallouttap,webviewId:t,nodeId:n.nodeId})}})),Object(R.onMethod)("onMapLabelClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];if(n&&n.bindlabeltap&&"function"==typeof L.default.webviewEventCallback){var r=JSON.parse(e.data);L.default.webviewEventCallback({data:{type:"labeltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{markerId:r.markerId},markerId:r.markerId,_userTap:!0},eventName:n.bindlabeltap,webviewId:t,nodeId:n.nodeId})}})),Object(R.onMethod)("onMapControlClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)(),e.data&&"function"==typeof L.default.webviewEventCallback){var n=JSON.parse(e.data);n.bindcontroltap&&L.default.webviewEventCallback({data:{type:"controltap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{controlId:n.controlId},controlId:n.controlId,_userTap:!0},eventName:n.bindcontroltap,webviewId:t,nodeId:n.nodeId})}})),Object(R.subscribe)("onMapControlTap",(function(e,t){var n=e.data;if(Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)(),n&&"function"==typeof L.default.webviewEventCallback){var r=JSON.parse(n);r.bindcontroltap&&L.default.webviewEventCallback({data:{type:"controltap",target:r.target,currentTarget:r.target,timeStamp:Date.now(),touches:[],detail:{controlId:r.controlId},controlId:r.controlId,_userTap:!0},eventName:r.bindcontroltap,webviewId:t,nodeId:r.nodeId})}})),Object(R.onMethod)("onMapRegionChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ue[t+"_"+e.mapId];if(n&&n.bindregionchange&&"function"==typeof L.default.webviewEventCallback){var r={type:e.type,rotate:e.rotate,skew:e.skew,gesture:e.gesture,scale:+Number.parseFloat(e.scale).toFixed(2),centerLocation:e.centerLocation,region:e.region},o={target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{type:e.type},type:e.type,causedBy:e.causedBy};"end"===e.type&&(o.detail=r),L.default.webviewEventCallback({data:o,eventName:n.bindregionchange,webviewId:t,nodeId:n.nodeId})}})),Object(R.onMethod)("onMapClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];n&&n.bindtap&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"tap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindtap,webviewId:t,nodeId:n.nodeId})})),Object(R.onMethod)("onMapPoiClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];if(n&&n.bindpoitap&&"function"==typeof L.default.webviewEventCallback){var r={name:e.name,longitude:e.longitude,latitude:e.latitude};e.buildingId&&(r.buildingId=e.buildingId),e.floorName&&(r.floorName=e.floorName),L.default.webviewEventCallback({data:{type:"poitap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:r,_userTap:!0},eventName:n.bindpoitap,webviewId:t,nodeId:n.nodeId})}})),Object(R.onMethod)("onMapIndoorChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=ue[t+"_"+e.mapId];n&&n.bindindoorchange&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{},info:{buildingId:e.buildingId,buildingName:e.buildingName,floorIndex:e.floorIndex,floorList:e.floorList}},eventName:n.bindindoorchange,webviewId:t,nodeId:n.nodeId})})),Object(R.onMethod)("onMapAnchorPointClick",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(Oe._setWxIsInvokeInTapForNavToMiniProgram)();var n=ue[t+"_"+e.mapId];n&&n.bindanchorpointtap&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"anchorpointtap",target:n.target,currentTarget:n.target,timeStamp:Date.now(),touches:[],detail:{longitude:e.longitude,latitude:e.latitude},_userTap:!0},eventName:n.bindanchorpointtap,webviewId:t,nodeId:n.nodeId})}));var Ee=function(e,t,n){var r=[],o=[];if("onTouchStart"===t){for(var i in e)r.push(e[i]);var a={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};o.push(a),r.push(a)}else if("onTouchMove"===t)for(var s in e){var c=e[s],u=!1;for(var l in n.touches){var d={x:n.touches[l].x,y:n.touches[l].y,identifier:n.touches[l].id};if(d.identifier===c.identifier&&(c.x!==d.x||c.y!==d.y)){r.push(d),o.push(d),u=!0;break}}u||r.push(c)}else if("onTouchEnd"===t){var f={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};for(var p in e){var h=e[p];h.identifier===f.identifier?o.push(f):r.push(h)}}else if("onTouchCancel"===t)for(var v in n.touches){var g={x:n.touches[v].x,y:n.touches[v].y,identifier:n.touches[v].id};o.push(g)}else if("onLongPress"===t){var _={x:n.touch.x,y:n.touch.y,identifier:n.touch.id};for(var b in e)e[b].identifier===_.identifier?r.push(_):r.push(e[b]);o.push(_)}return{touches:r,changedTouches:o}},Ce={onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel",onLongPress:"longtap"},Te=n(75),ke=n(118),Ae=n(101),Pe=n(9),De=n(25),je=n(129);function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Re={},Me={},Ne={},Le=new WeakMap,Be={};function Fe(e,t){var n=Object(De.concatId)(t,e.canvasNumber);Ne[n]={top:e.top,left:e.left,width:e.width,height:e.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},Me[n]=Object.assign({},e.data,{webviewId:t});var r=Re[n];"function"==typeof r&&(r.call(),delete Re[n]),Object(Q.onBeforeUnloadPage)(t,(function(){We(e,t)}))}function We(e,t){var n=Object(De.concatId)(t,e.canvasNumber);delete Ne[n],delete Me[n],delete Re[n],delete Be[n]}var Ue=function(e){Object(G.default)(n,e);var t=xe(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this))._canvasId=Object(De.concatId)(e,r),Be[o._canvasId]=Object(Pe.default)(o),o}return Object(K.default)(n,[{key:"_init",value:function(){var e=Ne[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();Le.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"getContext",value:function(e,t){if("2d"===e)console.info("getContext for canvas 2d is not yet supported");else{if("webgl"===e){var n=Le.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var r=n.getContext("webgl",t);return this._ctx=r,r}console.error("Invalid type ["+e+"] for Canvas#getContext")}}},{key:"_onReady",value:function(e){var t=this,n=function(){t._init(),"function"==typeof e&&e()};Ne[this._canvasId]?n():Re[this._canvasId]=n}},{key:"width",get:function(){var e=Le.get(this);return e&&e.width},set:function(e){var t=Le.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=Le.get(this);return e&&e.height},set:function(e){var t=Le.get(this);t&&(t.height=e)}},{key:"_initCanvasInstance",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}}]),n}(je.CanvasInterface),Ve=n(110);function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var He=null,ze=!1,qe={},Ye=["touchstart","touchmove","touchend","touchcancel"];ee.IS_IOS&&(Object(R.subscribe)("webGLInserted",(function(e,t){var n;He||(He=Object(Ve.getWeixinCanvas)()),ze||(ze=!0,n=He,Ye.forEach((function(e){n["on"+e]=function(t){var n=qe[t.canvasId];n?n.handlers["bind"+e]&&L.default.webviewEventCallback({data:{type:e,target:n.target,currentTarget:n.target,timeStamp:t.timeStamp,touches:Object(De.normalizeTouch)(t.touches),changedTouches:Object(De.normalizeTouch)(t.changedTouches)},eventName:n.handlers["bind"+e],webviewId:n.webviewId,nodeId:n.nodeId}):console.error("event can not be dispatched due to missing node info")}}))),qe[e.canvasNumber]=Object.assign({},e.data,{webviewId:t}),Fe(e,t)})),Object(R.subscribe)("webGLRemoved",(function(e,t){delete qe[e.canvasNumber],We(e,t)})));var Ke=function(e){Object(G.default)(n,e);var t=Ge(n);function n(){return Object($.default)(this,n),t.apply(this,arguments)}return Object(K.default)(n,[{key:"_initCanvasInstance",value:function(){var e,t;return e=this,(t=He.createCanvas(e.id))._canvasId=e._canvasId,t}},{key:"createImage",value:function(){return e=this,t=He.createImage(e.id),n=Ne[e._canvasId]||{},Object(De.wrapImageObject)(t,n);var e,t,n}},{key:"requestAnimationFrame",value:function(e){return He.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return He.cancelAnimationFrame(e)}}]),n}(Ue),Je=n(39),Xe=n(26);function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Ze=["touchstart","touchmove","touchend","touchcancel"],Qe=!1;function et(){var e=Xe.default.EventHandler;Ze.forEach((function(t){e["on"+t]=function(e){var n=e.currentTarget,r=Me[n._canvasId];r?r.handlers["bind"+t]&&L.default.webviewEventCallback({data:{type:t,target:r.target,currentTarget:r.target,timeStamp:e.timeStamp,touches:Object(De.normalizeTouch)(e.touches),changedTouches:Object(De.normalizeTouch)(e.changedTouches)},eventName:r.handlers["bind"+t],webviewId:r.webviewId,nodeId:r.nodeId}):console.error("event can not be dispatched due to missing node info")}}))}ee.IS_ANDROID&&(Object(R.subscribe)("webGLInserted",(function(){Qe||(Qe=!0,et()),Fe.apply(void 0,arguments)})),Object(R.subscribe)("webGLRemoved",We));var tt=function(e){Object(G.default)(n,e);var t=$e(n);function n(){return Object($.default)(this,n),t.apply(this,arguments)}return Object(K.default)(n,[{key:"_initCanvasInstance",value:function(){var e,t,n=(e=this,(t=new Xe.default.findElementById(e.id))._canvasId=e._canvasId,t);return this.__canvasNumber=this.id,this.id=n.__id,n}},{key:"getContext",value:function(e,t){return t&&t.alpha||Object(R.publish)("xwebWebGLSetOpaqueBackground",{canvasNumber:this.__canvasNumber}),Object(Je.default)(Object(z.default)(n.prototype),"getContext",this).call(this,e,t)}},{key:"createImage",value:function(){return e=this,t=new Xe.default.Image,n=Ne[e._canvasId],Object(De.wrapImageObject)(t,n);var e,t,n}},{key:"requestAnimationFrame",value:function(e){return Xe.default.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return Xe.default.cancelAnimationFrame(e)}}]),n}(Ue),nt=n(42),rt=n(49);function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function it(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var st={},ct={},ut={},lt={},dt=L.default.currentWebviewId;ee.IS_DEVTOOLS&&(Object(R.subscribe)("webGLInserted",Fe),Object(R.subscribe)("webGLUpdated",(function(e,t){var n=Object(De.concatId)(t,e.canvasNumber),r=st[n];if(!r)return;r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),Object(R.subscribe)("webGLRemoved",(function(e,t){var n=Object(De.concatId)(t,e.canvasNumber);We(e,t),delete st[n]})),Object(R.subscribe)("webGLPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),ut[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),Object(rt.onAppRoute)((function(e){lt[e.webviewId]||(Object(Q.onBeforeUnloadPage)(e.webviewId,(function(){var t=ct[e.webviewId];if(t){var n,r=it(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;delete st[o._canvasId],document.body.removeChild(o)}}catch(e){r.e(e)}finally{r.f()}delete ut[e.webviewId],delete ct[e.webviewId],delete lt[e.webviewId]}})),lt[e.webviewId]=!0);var t=e.webviewId;if(t!==dt)for(var n=0,r=Object.entries(ct);n<r.length;n++){var o=Object(nt.default)(r[n],2),i=o[0],a=o[1];if(String(i)===String(t)){var s,c=it(a);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=ut[i];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=it(a);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}dt=t})));var ft=function(e){Object(G.default)(n,e);var t=ot(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this,e,r))._webviewId=e,o}return Object(K.default)(n,[{key:"_initCanvasInstance",value:function(){var e,t;return e=this,(t=document.createElement("canvas")).style.position="absolute",t.style.top=e._top+"px",t.style.left=e._left+"px",t.style.width=e._width+"px",t.style.height=e._height+"px",t.width=e._width,t.height=e._height,t._canvasId=e._canvasId,document.body.appendChild(t),st[e._canvasId]=t,ct[e._webviewId]||(ct[e._webviewId]=[]),ct[e._webviewId].push(t),t}},{key:"createImage",value:function(){return e=Ne[this._canvasId],window.__global.createCustomImage((function(t){return Object(De.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,e.webviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));var e}},{key:"requestAnimationFrame",value:function(e){return window.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return window.cancelAnimationFrame(e)}}]),n}(Ue),pt=n(44),ht=n(179),vt=n(180),gt=n(94),_t=n(65);function bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function yt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wt={},Ot={},St={},It=L.default.currentWebviewId;ee.IS_DEVTOOLS&&(Object(R.subscribe)("skiaCanvasInsert",(function(e,t){Object(pt.skiaCanvasInsert)(e,t)})),Object(R.subscribe)("skiaCanvasRemove",(function(e,t){Object(pt.skiaCanvasRemove)(e,t);var n=Object(De.concatId)(t,e.canvasNumber);delete wt[n]})),Object(R.subscribe)("skiaCanvasUpdated",(function(e,t){var n=Object(De.concatId)(t,e.canvasNumber),r=wt[n];if(!r||"function"==typeof r){return void new Promise((function(e){wt[n]=e})).then((function(t){t.style.top=e.box.top+"px",t.style.left=e.box.left+"px",t.style.width=e.box.width+"px",t.style.height=e.box.height+"px"}))}r.style.top=e.box.top+"px",r.style.left=e.box.left+"px",r.style.width=e.box.width+"px",r.style.height=e.box.height+"px"})),Object(R.subscribe)("skiaPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),St[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),Object(rt.onAppRoute)((function(e){Object(Q.onBeforeUnloadPage)(e.webviewId,(function(){var t=Ot[e.webviewId];if(t){var n,r=yt(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;document.body.removeChild(o)}}catch(e){r.e(e)}finally{r.f()}delete St[e.webviewId],delete Ot[e.webviewId]}}));var t=e.webviewId;if(t!==It)for(var n=0,r=Object.entries(Ot);n<r.length;n++){var o=Object(nt.default)(r[n],2),i=o[0],a=o[1];if(String(i)===String(t)){var s,c=yt(a);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=St[i];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=yt(a);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}It=t})));var Et=function(e){Object(G.default)(n,e);var t=bt(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this,e,r))._webviewId=e,o}return Object(K.default)(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this._canvasId,document.body.appendChild(e);var t=wt[this._canvasId];return t&&"function"==typeof t&&t(e),wt[this._canvasId]=e,Ot[this._webviewId]||(Ot[this._webviewId]=[]),Ot[this._webviewId].push(e),this._canvasRef=e,e}},{key:"getContext",value:function(e,t){return Object(De.pipe)(_t.decorateContextForImageProxy)(Object(Je.default)(Object(z.default)(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=pt.skiaCanvasMappings[this._canvasId];return window.__global.createCustomImage((function(t){return Object(De.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,e.webviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}))}},{key:"createImageData",value:function(e,t,n){if(!e)return null;t=parseFloat(t),n=parseFloat(n);for(var r=document.createElement("canvas").getContext("2d").createImageData(t,n),o=0;o<e.length;o++)r.data[o]=e[o];return r}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return window.Path2D?Object(gt.default)(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return window.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return window.cancelAnimationFrame(e)}}]),n}(pt.SkiaCanvas),Ct=n(141);function Tt(e,t,n,r){if("2d"===t){var o=Object(pt.getSkiaCanvasById)(L.default.currentWebviewId,e);if(o)return o;if(Object(De.shouldUseOldCanvas)())return new Ct.SkiaCanvasFake(L.default.currentWebviewId,e,n,r);if(ee.IS_IOS)return new ht.SkiaCanvasIOS(L.default.currentWebviewId,e);if(ee.IS_ANDROID)return new vt.SkiaCanvasAndroid(L.default.currentWebviewId,e);if(ee.IS_DEVTOOLS){if(window&&"function"==typeof window.scrollTo)return new Et(L.default.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}else if("webgl"===t){var i=function(e,t){var n=Object(De.concatId)(e,t);return Be[n]||null}(L.default.currentWebviewId,e);if(i)return i;if(ee.IS_IOS)return new Ke(L.default.currentWebviewId,e);if(ee.IS_ANDROID)return new tt(L.default.currentWebviewId,e);if(ee.IS_DEVTOOLS){if(window&&"function"==typeof window.scrollTo)return new ft(L.default.currentWebviewId,e);console.warn("开发工具暂不支持获取 Canvas 节点")}}return null}var kt=n(68),At=n(1);function Pt(e,t,n,r){if("onLongPress"!==e){var o=function(e,t){var n=Object(De.concatId)(e,t);return Me[n]}(r,t.canvasNumber),i=Ee(o.lastTouches,e,n),a=i.touches,s=i.changedTouches;o.lastTouches=a,o[e]&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:Ce[e],timeStamp:new Date-o.startTime,target:o.target,touches:Object(De.injectExtraTouchInfo)(a),changedTouches:Object(De.injectExtraTouchInfo)(s)},eventName:o[e],webviewId:r,nodeId:o.nodeId})}}At.default.onReady((function(){["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onLongPress"].forEach((function(e){Object(V.onNativeEvent)(e,(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=JSON.parse(t.data||"{}"),o=r.canvasNumber,i=r.skia,a=r.type;if("TextView"!==a&&"ImageView"!==a)if("android-webgl"!==a){if(i){if(!Object(kt.hasOwnProperty)(pt.skiaCanvasInfo,o))return}else if(!Object(kt.hasOwnProperty)(Te.canvasInfo,o))return;var s;s=i?pt.skiaCanvasInfo[o].data:Te.canvasInfo[o].data;var c=Ee(s.lastTouches,e,t),u=c.touches,l=c.changedTouches;s.lastTouches=u,s[e]&&"function"==typeof L.default.webviewEventCallback&&("onTouchMove"===e&&0===l.length||L.default.webviewEventCallback({data:{type:Ce[e],timeStamp:new Date-s.startTime,target:s.target,touches:u,changedTouches:l},eventName:s[e],webviewId:n,nodeId:r.nodeId}))}else Pt(e,r,t,n)}))}))}));var Dt=n(87),jt=["onVideoPlay","onVideoPause","onVideoTimeUpdate","onVideoClickFullScreenBtn","onVideoClickDanmuBtn","onVideoFullScreenChange","onVideoWaiting","onVideoError","onVideoLoadedMetaData","onVideoProgress","onVideoBackgroundPlaybackChange"];At.default.onReady((function(){ee.IS_ANDROID&&At.default.useXWebVideo&&(jt=jt.map((function(e){return e.replace("on","onXWeb")})).concat(jt)),jt.forEach((function(e){Object(V.onNativeEvent)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r="bind"+e.replace("XWeb","").substring(7).toLowerCase(),o=JSON.parse(t.data),i=o.handlers,a=o.event,s=o.createdTimestamp,c=o.nodeId;if(i){var u=JSON.parse(t.data);if(t.videoPlayerId=t.videoPlayerId||u&&u.videoPlayerId||"-1000",i[r]&&"function"==typeof L.default.webviewEventCallback){var l={type:r.substring(4),target:a.target,currentTarget:a.currentTarget,timeStamp:(t.timeStamp||Date.now())-s,detail:{}};if("bindtimeupdate"===r&&(l.detail={currentTime:t.position,duration:t.duration}),"bindfullscreenchange"===r){var d=t.direction;d=0===d||180===d||"vertical"===d?"vertical":"horizontal",l.detail={fullScreen:t.fullScreen,fullscreen:t.fullScreen,direction:d}}"binderror"===r?l.detail={errMsg:t.errMsg}:"bindprogress"===r?l.detail={buffered:t.buffered}:"bindloadedmetadata"===r?l.detail={duration:t.duration,width:t.width,height:t.height}:"bindbackgroundplaybackchange"===r&&(l.detail={playInBackground:t.playInBackground}),L.default.webviewEventCallback({data:l,eventName:i[r],webviewId:n,nodeId:c})}}}))}))})),Object(R.onMethod)("onEnterVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Dt.pipInfo.webviewId,n=Dt.playerInfo[t+"_"+e.videoPlayerId];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),Object(R.onMethod)("onLeaveVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Dt.pipInfo.webviewId,n=Dt.playerInfo[t+"_"+e.videoPlayerId];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.event.target,currentTarget:n.event.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));var xt=!1,Rt={};Object(R.subscribe)("enableCoverViewScrollEventTransfer",(function(e){var t=e.nodeId;Rt[t]=!0})),Object(R.subscribe)("disableCoverViewScrollEventTransfer",(function(e){var t=e.nodeId;Rt[t]=!1})),Object(R.onMethod)("onScrollViewScroll",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(xt||(setTimeout((function(){xt=!1}),500),Object(R.invokeMethod)("hideKeyboard",{}),xt=!0),e.data&&"function"==typeof L.default.webviewEventCallback){var n=JSON.parse(e.data);n.bindscroll&&L.default.webviewEventCallback({data:{type:"scroll",target:n.target,currentTarget:n.target,detail:{scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop},timeStamp:Date.now()-n.timeStamp},eventName:n.bindscroll,webviewId:t,nodeId:n.nodeId}),Rt[n.nodeId]&&Object(R.publish)("coverViewScrollEvent",{nodeId:n.nodeId,scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})}}));var Mt,Nt=n(13),Lt=n.n(Nt),Bt=n(38),Ft=n(55),Wt=n(71),Ut=n(21),Vt={},Gt={},Ht={},zt=[],qt={},Yt=new U.EventEmitter2,Kt=new WeakMap;var Jt,Xt,$t,Zt=(Jt="onOperateCameraCallback",Xt=[],$t=1,Object(R.subscribe)(Jt,(function(e){Xt.forEach((function(t){var n=t[0],r=t[1];n.cid===e.cid&&n.cameraId===e.cameraId&&r(e)})),Xt=[]})),function(e,t){e.cid=$t++,Xt.push([e,t])}),Qt={};function en(e,t){var n=e.cameraId,r=e.pluginId;Yt.emit("cameraRemoved"),delete Vt[t+"_"+r],delete Gt[t+"_"+n],delete Ht[t+"_"+n],delete Qt[t]}Object(V.onNativeEvent)("onCameraInitDone",(function(){Qt[L.default.currentWebviewId]=!0,Yt.emit("cameraInitialized")})),Object(R.subscribe)("cameraInserted",(function(e,t){var n=e.cameraId,r=e.pluginId,o=e.bindings;Vt[t+"_"+r]=n,Gt[t+"_"+n]=o,Yt.emit("cameraInsert"),Object(Q.onBeforeUnloadPage)(t,(function(){en({cameraId:n,pluginId:r},t)}))})),Object(R.subscribe)("cameraUpdated",(function(e,t){var n=e.cameraId,r=e.hidden;Ht[t+"_"+n]=r})),Object(R.subscribe)("cameraRemoved",(function(e,t){en({cameraId:e.cameraId,pluginId:e.pluginId},t)})),Object(Wt.onAppRouteDone)((function(){if(void 0!==__appServiceEngine__&&"function"===__appServiceEngine__.getCurrentPagesByDomain){var e=__appServiceEngine__.getCurrentPagesByDomain("").map((function(e){return e.__wxWebviewId__}));Object.keys(Vt).forEach((function(t){var n=t.split("_").shift();-1===e.indexOf(Number(n))&&(delete Gt[n+"_"+Vt[t]],delete Ht[n+"_"+Vt[t]],delete Vt[t],qt[n]&&(qt[n].forEach((function(e){clearTimeout(e)})),delete qt[n]))}))}})),Object(R.onMethod)("onCameraVideoTaken",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;zt.forEach((function(n){n(e,t)}))}));var tn=(J((Mt=function(){function e(t,n){Object($.default)(this,e),this.webviewId=t,this.pluginId=n}return Object(K.default)(e,[{key:"onCameraFrame",value:function(e){if(ee.IS_DEVTOOLS||ee.IS_WINDOWS)return function(e,t,n){var r=null,o=null,i=null,a=Object(Z.async2InvokeWithPromise)("start",Object(Bt.default)(Lt.a.mark((function c(){var u,l,d,f,p,h,v,g,_,b,y;return Lt.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(u=480,l=640,d=t+"_"+n,e&&"function"==typeof e){c.next=5;break}throw new Error("callback is not a function");case 5:if("number"!=typeof Vt[d]&&!Vt[d]){c.next=11;break}f=Gt[t+"_"+Vt[d]],"small"===(p=(f||{}).frameSize)?(u=288,l=352):"medium"===p?(u=480,l=640):"large"===p&&(u=720,l=1280),c.next=14;break;case 11:return c.next=13,new Promise((function(e){return Yt.once("cameraInsert",e)}));case 13:return c.abrupt("return",a());case 14:return i=function(){s()},Yt.once("cameraRemoved",i),h=window.createObjectURL||window.URL&&window.URL.createObjectURL||window.webkitURL.createObjectURL,v=document.createElement("video"),g=document.createElement("canvas"),_=g.getContext("2d"),g.width=u,g.height=l,v.style.width=u+"px",v.style.height=l+"px",c.prev=24,c.next=27,new Promise((function(e,t){navigator.getUserMedia({video:{width:u,height:l},audio:!1},e,t)}));case 27:b=c.sent,c.next=33;break;case 30:throw c.prev=30,c.t0=c.catch(24),new Error("camera is not found");case 33:"srcObject"in v?v.srcObject=b:v.src=h(b),v.play(),r=b.getTracks()[0],y=function t(){_.drawImage(v,0,0),e({width:u,height:l,data:_.getImageData(0,0,u,l).data.buffer}),o=window.requestAnimationFrame(t)},o=window.requestAnimationFrame(y);case 38:case"end":return c.stop()}}),c,null,[[24,30]])})))),s=Object(Z.async2InvokeWithPromise)("stop",Object(Bt.default)(Lt.a.mark((function e(){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.cancelAnimationFrame(o),Yt.off("cameraRemoved",i),r&&r.stop();case 3:case"end":return e.stop()}}),e)}))));return{start:a,stop:s}}(e,this.webviewId,this.pluginId);var t=this.webviewId,n=Object(Z.invoke2Async)(this._invokeMethod.bind(this,"listenFrameChange")),r=Object(Z.invoke2Async)(this._invokeMethod.bind(this,"closeFrameChange")),o=!1,i=null,a=null,s=null,c=Object(Z.async2InvokeWithPromise)("start",Object(Bt.default)(Lt.a.mark((function r(){var c,l,d;return Lt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o){r.next=2;break}return r.abrupt("return");case 2:if(o=!0,e&&"function"==typeof e){r.next=5;break}throw new Error("callback is not a function");case 5:if(!ee.IS_ANDROID||Qt[t]){r.next=8;break}return r.next=8,new Promise((function(e){return Yt.once("cameraInitialized",e)}));case 8:if(o){r.next=10;break}throw new Error("listener has been stopped");case 10:return ee.IS_IOS&&(i=function(){if(o&&a){var t={width:a.width,height:a.height,data:a.data};e(t)}},Object(V.onNativeEvent)("onCameraFrame",i)),r.prev=11,r.next=14,n({});case 14:c=r.sent,r.next=21;break;case 17:throw r.prev=17,r.t0=r.catch(11),ee.IS_IOS&&Object(V.offNativeEvent)("onCameraFrame",i),r.t0;case 21:if(o){r.next=23;break}throw new Error("listener has been stopped");case 23:if(Ft.default){r.next=25;break}throw new Error("onCameraFrame is not supported on your device");case 25:if(!(l=Ft.default.get(c.bufferId))){r.next=30;break}l.__proto__=ArrayBuffer.prototype,r.next=31;break;case 30:throw new Error("onCameraFrame fails to allocate ArrayBuffer");case 31:d={width:c.width,height:c.height,data:l},ee.IS_IOS?a={width:c.width,height:c.height,data:l}:(i=function(){o&&e(d)},Object(V.onNativeEvent)("onCameraFrame",i)),s=function(){u()},Yt.once("cameraRemoved",s);case 35:case"end":return r.stop()}}),r,null,[[11,17]])})))),u=Object(Z.async2InvokeWithPromise)("stop",Object(Bt.default)(Lt.a.mark((function e(){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return o=!1,s&&(Yt.off("cameraRemoved",s),s=null),i&&(Object(V.offNativeEvent)("onCameraFrame",i),i=null),e.next=7,r({});case 7:case"end":return e.stop()}}),e)}))));return{start:c,stop:u}}},{key:"_invoke",value:function(e,t){t.type=e,ee.IS_DEVTOOLS||ee.IS_WINDOWS||ee.IS_MINA?(Zt(t,(function(n){var r=n.imageData,o=n.videoData;function i(t,n){Object(R.invokeMethod)("base64ToTempFilePath",Object.assign({fileType:"jpg",base64Data:r},t),{beforeAll:function(r){"takePhoto"===t.type?r.tempImagePath=r.tempFilePath:r.tempFilePath&&(r.tempThumbPath=r.tempFilePath),n&&(r.tempVideoPath=n),r.errMsg=r.errMsg.replace("base64ToTempFilePath",e),delete r.tempFilePath}})}o?Object(R.invokeMethod)("base64ToTempFilePath",{fileType:"webm",base64Data:o,complete:function(e){i(t,e.tempFilePath)}}):"startRecord"===e?("function"==typeof t.success&&t.success({errMsg:"startRecord:ok"}),"function"==typeof t.complete&&t.complete({errMsg:"startRecord:ok"})):i(t)})),Object(R.publish)("operateCamera",t,[this.webviewId])):Object(R.invokeMethod)("operateCamera",t)}},{key:"_invokeMethod",value:function(e,t){var n=this,r=this.webviewId+"_"+this.pluginId;if("number"==typeof Vt[r]||Vt[r]){var o=Gt[this.webviewId+"_"+Vt[r]];if(o.isCancelAuth)return"function"==typeof t.fail&&t.fail({errMsg:"user cancel auth"}),void("function"==typeof t.complete&&t.complete({errMsg:"user cancel auth"}));if("scanCode"===o.mode&&("takePhoto"===e||"startRecord"===e))return"function"==typeof t.fail&&t.fail({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}),void("function"==typeof t.complete&&t.complete({errMsg:"Not allow to invoke takePhoto in 'scanCode' mode."}));t.cameraId=Vt[r],this._invoke(e,t)}else Yt.once("cameraInsert",(function(){n._invokeMethod(e,t)}))}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.webviewId+"_"+this.pluginId,n=Ht[this.webviewId+"_"+Vt[t]];if(n)return"function"==typeof e.fail&&e.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof e.complete&&e.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));this._invokeMethod("takePhoto",e)}},{key:"setZoom",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("CameraContext.setZoom",e,{zoom:1})&&(e.zoom<1&&(e.zoom=1),this._invokeMethod("setZoom",e))}},{key:"startRecord",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Ut.authorize)({scope:"scope.record",success:function(){Kt.set(e,!0),e._startRecord(t)},fail:function(){"function"==typeof t.fail&&t.fail({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."}),"function"==typeof t.complete&&t.complete({errMsg:"Failed to invoke 'startRecord' on 'CameraContext': not allowed to use microphone."})}})}},{key:"_startRecord",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Kt.get(this)){var n=this.webviewId+"_"+this.pluginId,r=Ht[this.webviewId+"_"+Vt[n]];if(r)return"function"==typeof t.fail&&t.fail({errMsg:"Not allow to invoke takePhoto if camera is hidden."}),void("function"==typeof t.complete&&t.complete({errMsg:"Not allow to invoke takePhoto if camera is hidden."}));var o=t.timeoutCallback,i=t.fail;if(t.fail=function(t){e._isRecording=!1,clearTimeout(s),"function"==typeof i&&i(t)},this._invokeMethod("startRecord",t),!this._isRecording){this._isRecording=!0;var a="number"==typeof t.timeout?Math.max(0,t.timeout):30,s=this._timer=setTimeout((function(){e._isRecording&&(e.stopRecord({complete:o||function(){}}),e._isRecording=!1)}),1e3*a);0===a?clearTimeout(s):qt[this.webviewId]?qt[this.webviewId].push(s):qt[this.webviewId]=[s];var c=this._videoTaken=function(t,n){var r=n+"_"+e.pluginId;if(t.cameraId===Vt[r]){var i=zt.indexOf(c);i>-1&&zt.splice(i,1),e._isRecording&&(delete t.cameraId,"function"==typeof o&&o(t),e._isRecording=!1,clearTimeout(s))}};zt.push(c)}}}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zt.indexOf(this._videoTaken);t>-1&&(zt.splice(t,1),this._videoTaken=null),this._invokeMethod("stopRecord",e),this._isRecording=!1,clearTimeout(this._timer)}}]),e}()).prototype,"takePhoto",[Z.promised],Object.getOwnPropertyDescriptor(Mt.prototype,"takePhoto"),Mt.prototype),J(Mt.prototype,"setZoom",[Z.promised],Object.getOwnPropertyDescriptor(Mt.prototype,"setZoom"),Mt.prototype),J(Mt.prototype,"startRecord",[Z.promised],Object.getOwnPropertyDescriptor(Mt.prototype,"startRecord"),Mt.prototype),J(Mt.prototype,"stopRecord",[Z.promised],Object.getOwnPropertyDescriptor(Mt.prototype,"stopRecord"),Mt.prototype),Mt);function nn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new tn(t,r)}Object(V.onNativeEvent)("onCameraNeedAuthCancel",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Gt[t+"_"+e.cameraId];n&&n.binderror&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"error",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{msg:"user cancel auth"}},eventName:n.binderror,webviewId:t,nodeId:n.nodeId}),n&&(n.isCancelAuth=!0)})),Object(V.onNativeEvent)("onCameraStop",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Gt[t+"_"+e.cameraId];n&&n.bindstop&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"stop",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{}},eventName:n.bindstop,webviewId:t,nodeId:n.nodeId})})),Object(V.onNativeEvent)("onCameraInitDone",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Gt[t+"_"+e.cameraId];n&&n.bindinitdone&&"function"==typeof L.default.webviewEventCallback?L.default.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId}):Yt.once("cameraInsert",(function(){var n=Gt[t+"_"+e.cameraId];n&&n.bindinitdone&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"initdone",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{maxZoom:e.maxZoom}},eventName:n.bindinitdone,webviewId:t,nodeId:n.nodeId})}))})),Object(V.onNativeEvent)("onCameraScanCode",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Gt[t+"_"+e.cameraId];if(n&&n.bindscancode&&"function"==typeof L.default.webviewEventCallback){var r={data:{type:"scancode",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,detail:{type:e.type,result:e.result,rawData:e.rawData,charSet:e.charSet,scanArea:e.scanArea}},eventName:n.bindscancode,webviewId:t,nodeId:n.nodeId};"barcode"===e.type&&(delete r.data.detail.rawData,delete r.data.detail.charSet),L.default.webviewEventCallback(r)}}));var rn,on=n(69),an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("setKeepScreenOn",e,{keepScreenOn:!0})&&Object(R.invokeMethod)("setKeepScreenOn",e,{})};function sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln=ee.IS_DEVTOOLS,dn={},fn={},pn={},hn=new U.EventEmitter2,vn={},gn=new WeakMap,_n={},bn=["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","snapshot","requestPictureInPicture","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],yn=Object.assign,mn={};function wn(e,t){return e+"_"+t}function On(e){vn[e]||(vn[e]=!0,Object(Q.onBeforeUnloadPage)(e,(function(e){delete vn[e],Object.keys(dn).forEach((function(t){new RegExp("^"+e).test(t)&&(delete fn[e+"_"+dn[t]],delete dn[t])})),Object.keys(_n).forEach((function(t){new RegExp("^api_"+e).test(t)?(delete fn[e+"_"+dn[t.substr(4)]],delete _n[t]):new RegExp("^SQ_"+e).test(t)&&(delete fn[t.substr(3)],delete _n[t])})),function(e){delete jn[e]}(e),an({keepScreenOn:!1})})))}Object(R.subscribe)("xWebLivePlayerSupported",(function(e,t){var n=e.insert2XWebEnabled,r=e.viewId;mn[wn(t,r)]=n,Dn(mn)})),Object(R.subscribe)("updateLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;pn.webviewId=t,pn.playerId=e.playerId})),["xWebLivePlayerInsert","livePlayerInsert"].forEach((function(e){Object(R.subscribe)(e,(function(e,t){var n=e.viewId,r=e.domId,o=e.playerId,i=e.pluginId,a=e.data,s=e.nodeId,c=mn[wn(t,n)]?n:o,u=t+"_"+i+"_"+r+"_";s&&s!==__virtualDOM__.getRootNodeId(t)&&(u+=s),dn[u]=c,fn[t+"_"+c]=a||{},hn.emit("livePlayerInsert"),On(t),function(e){var t=jn[e];if(jn[e]=[],!t)return;for(var n=0;n<t.length;n++){var r=t[n];Mn(r[0],r[1],r[2])}}(t)}))})),["xWebLivePlayerRemoved","livePlayerRemoved"].forEach((function(e){Object(R.subscribe)(e,(function(e,t){var n=e.viewId,r=e.domId,o=e.playerId,i=e.pluginId,a=e.nodeId,s=mn[wn(t,n)]?n:o,c=t+"_"+i+"_"+r+"_";a&&a!==__virtualDOM__.getRootNodeId(t)&&(c+=a),delete dn[c],delete fn[t+"_"+s];var u="api_"+t+"_"+i+"_"+r+"_";a&&a!==__virtualDOM__.getRootNodeId(t)&&(u+=a);var l="SQ_"+t+"_"+s;delete _n[u],delete _n[l],an({keepScreenOn:!1})}))}));var Sn=function e(){Object($.default)(this,e)},In=(J((rn=function(){function e(){var t=this;Object($.default)(this,e);var n=this.exportContext=new Sn;bn.forEach((function(e){return n[e]=t[e].bind(t)}))}return Object(K.default)(e,[{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getAppStatus();t===on.AppStatus.BACK_GROUND||t===on.AppStatus.LOCK||(this._invokeMethod("play",[],e),an({keepScreenOn:!0}))}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("stop",[],e),an({keepScreenOn:!1})}},{key:"mute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("mute",[],e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("pause",[],e),an({keepScreenOn:!1})}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("resume",[],e),an({keepScreenOn:!0})}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId(),n=this._getWebviewId(),r=mn[wn(n,t)];if(r)this._invokeWebviewMethod("xWebLivePlayerRequestFullScreen",{direction:e.direction},e);else{var o=e.direction;[0,90,-90].indexOf(o)>-1?this._invokeMethod("requestFullScreen",[o],e):this._invokeMethod("requestFullScreen",[],e),gn.set(this,!0)}}},{key:"exitFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId(),n=this._getWebviewId(),r=mn[wn(n,t)];r?this._invokeWebviewMethod("xWebLivePlayerExitFullScreen",[],e):(this._invokeMethod("exitFullScreen",[],e),this.showStatusBar(),gn.set(this,!1))}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(pn){var t=Object(R.invokeMethodWithPlugin)(this.pluginId);ee.IS_IOS?t("operateLivePlayer",un(un({},e),{},{type:"exitPictureInPicture",livePlayerId:pn.playerId}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateLivePlayer","exitPictureInPicture")}}):ee.IS_ANDROID&&t("operateXWebLivePlayer",un(un({},e),{},{type:"exitPictureInPicture",viewId:pn.playerId}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebLivePlayer","exitPictureInPicture")}})}}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!gn.get(this)){var t="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}Object(R.invokeMethod)("hideStatusBar",e)}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ln)return console.warn("开发者工具暂不支持 LivePlayerContext.snapshot 接口，请到客户端调试。"),void("function"!=typeof e.fail&&"function"!=typeof e.complete||(e.fail||e.complete)({errMsg:"operateLivePlayer:fail not support in devtools"}));this._invokeMethod("snapshot",[],yn({quality:"raw"},e))}},{key:"requestBackgroundPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("requestBackgroundPlayback",[],e)}},{key:"exitBackgroundPlayback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._invokeMethod("exitBackgroundPlayback",[],e)}},{key:"requestPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getPlayerId();if("number"==typeof t){var n=Object(R.invokeMethodWithPlugin)(this.pluginId);n("requestLivePlayerPictureInPicture",un(un({},e),{},{viewId:t,livePlayerId:t,beforeAll:function(e){e.errMsg=e.errMsg.replace("requestLivePlayerPictureInPicture","requestPictureInPicture")}}))}else Object(R.beforeInvokeFail)("requestPictureInPicture",e,"playerId not exists")}},{key:"_invokeMethodWithId",value:function(e,t,n,r){var o=this,i=this._getPlayerId(),a=this._getWebviewId(),s=mn[wn(a,i)],c=s?"operateXWebLivePlayer":"operateLivePlayer";"number"==typeof e?(ln&&(r.type=t,r.playerId=e,Object(R.publish)("operateLivePlayer",r,[this.webviewId])),function(){var o=s?{viewId:e}:{livePlayerId:e},i=Object(R.invokeMethodWithPlugin)(this.pluginId);this._getAppStatus()===on.AppStatus.BACK_GROUND&&"stop"===t&&(c+="Background"),i(c,yn({},r,un({data:n,type:t},o)))}.apply(this)):hn.once("livePlayerInsert",(function(){o._invokeMethod(t,n,r)}))}},{key:"_getAppStatus",value:function(){return L.default.appStatus}},{key:"_getHanged",value:function(){return L.default.hanged}},{key:"_getPlayerId",value:function(){}},{key:"_getWebviewId",value:function(){}}]),e}()).prototype,"play",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"play"),rn.prototype),J(rn.prototype,"stop",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"stop"),rn.prototype),J(rn.prototype,"mute",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"mute"),rn.prototype),J(rn.prototype,"pause",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"pause"),rn.prototype),J(rn.prototype,"resume",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"resume"),rn.prototype),J(rn.prototype,"requestFullScreen",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"requestFullScreen"),rn.prototype),J(rn.prototype,"exitFullScreen",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"exitFullScreen"),rn.prototype),J(rn.prototype,"exitPictureInPicture",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"exitPictureInPicture"),rn.prototype),J(rn.prototype,"snapshot",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"snapshot"),rn.prototype),J(rn.prototype,"requestBackgroundPlayback",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"requestBackgroundPlayback"),rn.prototype),J(rn.prototype,"exitBackgroundPlayback",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"exitBackgroundPlayback"),rn.prototype),J(rn.prototype,"requestPictureInPicture",[Z.promised],Object.getOwnPropertyDescriptor(rn.prototype,"requestPictureInPicture"),rn.prototype),rn),En=function(e){Object(G.default)(n,e);var t=sn(n);function n(e,r,o,i){var a;if(Object($.default)(this,n),a=t.call(this),"string"!=typeof e)throw new N.ThirdScriptError("Parameter 1 should be a string");return a.domId=e,a.webviewId=r,a.nodeId=o,a.pluginId=i,a}return Object(K.default)(n,[{key:"_invokeMethod",value:function(e,t,n){var r=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,o=dn[r];this._invokeMethodWithId(o,e,t,n)}},{key:"_getPlayerId",value:function(){var e=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId;return dn[e]}},{key:"_getWebviewId",value:function(){return this.webviewId}},{key:"_invokeWebviewMethod",value:function(e,t,n){var r=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,o=dn[r];"function"==typeof n.success&&setTimeout((function(){n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((function(){n.complete({errMsg:"operateLivePlayer:ok"})}),0),Object(R.publish)(e,un({viewId:o},t),[this.webviewId])}}]),n}(In),Cn=function(e){Object(G.default)(n,e);var t=sn(n);function n(e,r,o){var i;return Object($.default)(this,n),(i=t.call(this)).playerId=e,i.webviewId=r,i.pluginId=o,i}return Object(K.default)(n,[{key:"_invokeMethod",value:function(e,t,n){var r=this.playerId;this._invokeMethodWithId(r,e,t,n)}},{key:"_getPlayerId",value:function(){return this.playerId}},{key:"_getWebviewId",value:function(){return this.webviewId}},{key:"_invokeWebviewMethod",value:function(e,t,n){"function"==typeof n.success&&setTimeout((function(){n.success({errMsg:"operateLivePlayer:ok"})}),0),"function"==typeof n.complete&&setTimeout((function(){n.complete({errMsg:"operateLivePlayer:ok"})}),0),Object(R.publish)(e,un({viewId:this.playerId},t),[this.webviewId])}}]),n}(In);function Tn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o="api_"+t+"_"+r+"_"+e+"_";if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(o+=n),_n[o])return _n[o].exportContext;var i=new En(e,t,n,r);return _n[o]=i,i.exportContext}function kn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="SQ_"+t+"_"+e;if(_n[r])return _n[r].exportContext;var o=new Cn(e,t,n);return _n[r]=o,o.exportContext}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pn={},Dn=function(e){Pn=e},jn={},xn={onLivePlayerEvent:"bindstatechange",onLivePlayerNetStatus:"bindnetstatus",onLivePlayerAudioVolume:"bindaudiovolumenotify",onLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"},Rn={onXWebLivePlayerEvent:"bindstatechange",onXWebLivePlayerNetStatus:"bindnetstatus",onXWebLivePlayerAudioVolume:"bindaudiovolumenotify",onXWebLivePlayerBackgroundPlaybackChange:"bindbackgroundplaybackchange"};function Mn(e,t,n){if(t){2004===t.errCode&&an({keepScreenOn:!0});var r=Pn[wn(n,t.viewId)],o=r?t.viewId:t.livePlayerId,i=fn[n+"_"+o],a=r?Rn[e]:xn[e],s={};switch(e){case"onLivePlayerEvent":case"onXWebLivePlayerEvent":s.code=t.errCode,s.message=t.errMsg,Object(R.publish)("onLivePlayerStateChange"+t.livePlayerId,{code:t.errCode},[n]);break;case"onLivePlayerNetStatus":case"onXWebLivePlayerNetStatus":t.info=t.info||{},s.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE,vDecCacheSize:t.info.V_DEC_CACHE_SIZE,vSumCacheSize:t.info.V_SUM_CACHE_SIZE,avPlayInterval:t.info.AV_PLAY_INTERVAL,avRecvInterval:t.info.AV_RECV_INTERVAL,audioCacheThreshold:t.info.AUDIO_CACHE_THRESHOLD},Object(R.publish)("onLivePlayerNetStatusChange"+t.livePlayerId,{info:s.info},[n]);break;case"onLivePlayerAudioVolume":case"onXWebLivePlayerAudioVolume":s.volume=t.volume;break;case"onLivePlayerBackgroundPlaybackChange":case"onXWebLivePlayerBackgroundPlaybackChange":s.playInBackground=t.playInBackground}if(!i)return jn[n]=jn[n]||[],void jn[n].push([e,t,n]);if(r&&("onXWebLivePlayerEvent"===e||"onXWebLivePlayerNetStatus"===e)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.info);"onXWebLivePlayerEvent"===e&&(c={code:t.errCode,message:t.errMsg}),Object(R.publish)("xWebLivePlayerStateChange",{type:e,detail:{info:c},viewId:t.viewId},[n])}i.handlers[a]&&"function"==typeof L.default.webviewEventCallback&&(r&&"onXWebLivePlayerEvent"===e&&t&&-9999999===t.errCode||L.default.webviewEventCallback({data:{type:a.replace("bind",""),target:i.target,currentTarget:i.target,timeStamp:Date.now()-i.createdTimeStamp,touches:[],detail:s},eventName:i.handlers[a],webviewId:n,nodeId:i.nodeId}))}}var Nn;["onLivePlayerEvent","onLivePlayerNetStatus","onLivePlayerAudioVolume","onLivePlayerBackgroundPlaybackChange"].concat(["onXWebLivePlayerEvent","onXWebLivePlayerNetStatus","onXWebLivePlayerAudioVolume","onXWebLivePlayerBackgroundPlaybackChange"]).forEach((function(e){Object(V.onNativeEvent)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;Mn(e,t,n)}))})),Object(R.subscribe)("xWebLivePlayerFullScreenEvent",(function(e,t){var n=e.viewId,r=e.data,o=fn[t+"_"+n];o&&o.handlers.bindfullscreenchange&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"fullscreenchange",target:o.target,currentTarget:o.target,timeStamp:Date.now()-o.createdTimeStamp,touches:[],detail:{fullScreen:r.fullScreen,direction:0===r.direction||180===r.direction||"vertical"===r.direction?"vertical":"horizontal"}},eventName:o.handlers.bindfullscreenchange,webviewId:t,nodeId:o.nodeId})})),Object(V.onNativeEvent)("onLivePlayerFullScreenChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;Object(R.publish)("videoFullScreenChange",e,[t]),Object(R.publish)("videoFullScreenChange"+e.livePlayerId,{fullScreen:e.fullScreen},[t]);var n=fn[t+"_"+e.livePlayerId];n&&n.handlers.bindfullscreenchange&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"fullscreenchange",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{fullScreen:e.fullScreen,direction:0===e.direction||180===e.direction||"vertical"===e.direction?"vertical":"horizontal"}},eventName:n.handlers.bindfullscreenchange,webviewId:t,nodeId:n.nodeId})})),Object(V.onNativeEvent)("onEnterLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=pn.webviewId,n=fn[t+"_"+e.livePlayerId];n&&n.handlers.bindenterpictureinpicture&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"enterpictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindenterpictureinpicture,webviewId:t,nodeId:n.nodeId})})),Object(V.onNativeEvent)("onLeaveLivePlayerPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=pn.webviewId,n=fn[t+"_"+e.livePlayerId];n&&n.handlers.bindleavepictureinpicture&&"function"==typeof L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"leavepictureinpicture",target:n.target,currentTarget:n.target,timeStamp:Date.now()-n.createdTimeStamp,touches:[],detail:{}},eventName:n.handlers.bindleavepictureinpicture,webviewId:t,nodeId:n.nodeId})}));var Ln=At.default.useXWebLive,Bn=ee.IS_ANDROID&&Ln;Object(R.subscribe)("xWebLivePusherSupported",(function(e){var t=e.enforcedXWebLive,n=e.canInsert2XWeb;Bn=t||n,$n({enforcedXWebLive:t,canInsert2XWeb:n})}));var Fn={},Wn={},Un=new U.EventEmitter2,Vn={},Gn=Object.assign;function Hn(e){Vn[e]||(Vn[e]=!0,Object(Q.onBeforeUnloadPage)(e,(function(e){delete Vn[e],Object.keys(Fn).forEach((function(t){new RegExp("^"+e).test(t)&&(delete Wn[e+"_"+Fn[t]],delete Fn[t])})),function(e){delete er[e]}(e)})))}function zn(e,t){var n=this,r=this.webviewId+"_"+this.pluginId;"number"==typeof Fn[r]?(Bn?t.viewId=Fn[r]:t.livePusherId=Fn[r],t.type=e,function(e,t,n){if(ee.IS_DEVTOOLS)console.warn("开发者工具暂不支持调用 LivePusherContext."+e+" 方法");else{Object(R.invokeMethodWithPlugin)(n)(Bn?"operateXWebLivePusher":"operateLivePusher",t)}}(e,t,this.pluginId)):Un.once("livePusherInserted",(function(){zn.call(n,e,t)}))}["xWebLivePusherInserted","livePusherInserted"].forEach((function(e){Object(R.subscribe)(e,(function(e,t){var n=e.viewId,r=e.pusherId,o=e.pluginId,i=e.data,a=Bn?n:r,s=t+"_"+o;Fn[s]=a,Wn[t+"_"+a]=i,Un.emit("livePusherInserted"),Hn(t),function(e){var t=er[e];if(er[e]=[],!t)return;for(var n=0;n<t.length;n++){var r=t[n];tr(r[0],r[1],r[2])}}(t)}))})),["xWebLivePusherRemoved","livePusherRemoved"].forEach((function(e){Object(R.subscribe)(e,(function(e,t){var n=e.viewId,r=e.pusherId,o=e.pluginId,i=Bn?n:r;delete Fn[t+"_"+o],delete Wn[t+"_"+i]}))}));var qn=(J((Nn=function(){function e(t,n){Object($.default)(this,e),this.webviewId=t,this.pluginId=n}return Object(K.default)(e,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"start",e)}},{key:"stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"stop",e)}},{key:"pause",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"pause",e)}},{key:"resume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"resume",e)}},{key:"switchCamera",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"switchCamera",e)}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"snapshot",Gn({quality:"raw"},e))}},{key:"toggleTorch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"toggleTorch",e)}},{key:"playBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("LivePusherContext.playBGM",e,{url:""})&&zn.call(this,"playBGM",e)}},{key:"stopBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"stopBGM",e)}},{key:"pauseBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"pauseBGM",e)}},{key:"resumeBGM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"resumeBGM",e)}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("LivePusherContext.setBGMVolume",e,{volume:0})&&zn.call(this,"setBGMVolume",e)}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("LivePusherContext.setMICVolume",e,{volume:0})&&zn.call(this,"setMICVolume",e)}},{key:"startPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"startPreview",e)}},{key:"stopPreview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"stopPreview",e)}},{key:"sendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zn.call(this,"sendMessage",e)}}]),e}()).prototype,"start",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"start"),Nn.prototype),J(Nn.prototype,"stop",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"stop"),Nn.prototype),J(Nn.prototype,"pause",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"pause"),Nn.prototype),J(Nn.prototype,"resume",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"resume"),Nn.prototype),J(Nn.prototype,"switchCamera",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"switchCamera"),Nn.prototype),J(Nn.prototype,"snapshot",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"snapshot"),Nn.prototype),J(Nn.prototype,"toggleTorch",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"toggleTorch"),Nn.prototype),J(Nn.prototype,"playBGM",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"playBGM"),Nn.prototype),J(Nn.prototype,"stopBGM",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"stopBGM"),Nn.prototype),J(Nn.prototype,"pauseBGM",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"pauseBGM"),Nn.prototype),J(Nn.prototype,"resumeBGM",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"resumeBGM"),Nn.prototype),J(Nn.prototype,"setBGMVolume",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"setBGMVolume"),Nn.prototype),J(Nn.prototype,"setMICVolume",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"setMICVolume"),Nn.prototype),J(Nn.prototype,"startPreview",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"startPreview"),Nn.prototype),J(Nn.prototype,"stopPreview",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"stopPreview"),Nn.prototype),J(Nn.prototype,"sendMessage",[Z.promised],Object.getOwnPropertyDescriptor(Nn.prototype,"sendMessage"),Nn.prototype),Nn);function Yn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new qn(t,r)}function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Jn=At.default.useXWebLive,Xn=ee.IS_ANDROID&&Jn,$n=function(e){var t=e.enforcedXWebLive,n=e.canInsert2XWeb;Xn=t||n},Zn={onLivePusherEvent:"bindstatechange",onLivePusherNetStatus:"bindnetstatus",onLivePusherBGMStart:"bindbgmstart",onLivePusherBGMProgress:"bindbgmprogress",onLivePusherBGMComplete:"bindbgmcomplete",onLivePusherError:"binderror",onLivePusherAudioVolume:"bindaudiovolumenotify"},Qn={onXWebLivePusherEvent:"bindstatechange",onXWebLivePusherNetStatus:"bindnetstatus",onXWebLivePusherBGMStart:"bindbgmstart",onXWebLivePusherBGMProgress:"bindbgmprogress",onXWebLivePusherBGMComplete:"bindbgmcomplete",onXWebLivePusherError:"binderror",onXWebLivePusherAudioVolume:"bindaudiovolumenotify"},er={};function tr(e,t,n){var r=Xn?t.viewId:t.livePusherId,o=Wn[n+"_"+r],i=Xn?Qn[e]:Zn[e],a={};switch(e){case"onLivePusherEvent":case"onXWebLivePusherEvent":a.code=t.errCode,a.message=t.errMsg,Object(R.publish)("onLivePusherStateChange"+t.livePusherId,{code:t.errCode},[n]);break;case"onLivePusherNetStatus":case"onXWebLivePusherNetStatus":t.info=t.info||{},a.info={videoBitrate:t.info.VIDEO_BITRATE,audioBitrate:t.info.AUDIO_BITRATE,videoFPS:t.info.VIDEO_FPS,videoGOP:t.info.VIDEO_GOP,netSpeed:t.info.NET_SPEED,netQualityLevel:t.info.NET_QUALITY_LEVEL,netJitter:t.info.NET_JITTER,videoWidth:t.info.VIDEO_WIDTH,videoHeight:t.info.VIDEO_HEIGHT,videoCache:t.info.VIDEO_CACHE,audioCache:t.info.AUDIO_CACHE},Object(R.publish)("onLivePusherNetStatusChagne"+t.livePusherId,{info:a.info},[n]);break;case"onLivePusherBGMProgress":case"onXWebLivePusherBGMProgress":a.progress=t.progress,a.duration=t.duration;break;case"onLivePusherBGMComplete":case"onXWebLivePusherBGMComplete":a.errCode=t.errCode;break;case"onLivePusherError":case"onXWebLivePusherError":a.errCode=t.errCode,a.errMsg=t.errMsg,a.data=t.data,Object(R.publish)("onLivePusherError"+t.livePusherId,{errcode:t.errcode},[n]);break;case"onLivePusherAudioVolume":case"onXWebLivePusherAudioVolume":a.volume=t.volume}if(!o)return er[n]=er[n]||[],void er[n].push([e,t,n]);if(Xn&&("onXWebLivePusherEvent"===e||"onXWebLivePusherNetStatus"===e)){var s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.info);"onXWebLivePusherEvent"===e&&(s={code:t.errCode,message:t.errMsg}),Object(R.publish)("xWebLivePusherStateChange",{type:e,detail:{info:s},viewId:t.viewId},[n])}o.handlers[i]&&"function"==typeof L.default.webviewEventCallback&&(Xn&&"onXWebLivePusherEvent"===e&&t&&-9999999===t.errCode||L.default.webviewEventCallback({data:{type:i.replace("bind",""),target:o.target,currentTarget:o.target,timeStamp:Date.now()-o.createdTimeStamp,touches:[],detail:a},eventName:o.handlers[i],webviewId:n,nodeId:o.nodeId}))}["onLivePusherEvent","onLivePusherNetStatus","onLivePusherBGMStart","onLivePusherBGMProgress","onLivePusherBGMComplete","onLivePusherError","onLivePusherAudioVolume"].concat(["onXWebLivePusherEvent","onXWebLivePusherNetStatus","onXWebLivePusherBGMStart","onXWebLivePusherBGMProgress","onXWebLivePusherBGMComplete","onXWebLivePusherError","onXWebLivePusherAudioVolume"]).forEach((function(e){Object(V.onNativeEvent)(e,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;tr(e,t,n)}))}));var nr=n(57),rr={},or=new U.EventEmitter2,ir={};Object(R.subscribe)("audioInsert",(function(e,t){var n=e.audioId,r=e.pluginId,o=e.nodeId,i=t+"_"+r+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(i+=o),rr[i]=!0,or.emit("audioInsert_"+i),function(e){ir[e]||(ir[e]=!0,Object(Q.onBeforeUnloadPage)(e,(function(e){delete ir[e],Object.keys(rr).forEach((function(t){new RegExp("^"+e).test(t)&&delete rr[t]}))})))}(t)})),Object(R.subscribe)("audioRemove",(function(e,t){var n=e.audioId,r=e.pluginId,o=e.nodeId,i=t+"_"+r+"_"+n+"_";o&&o!==__virtualDOM__.getRootNodeId(t)&&(i+=o),delete rr[i]}));var ar=function(){function e(t,n,r,o){if(Object($.default)(this,e),"string"!=typeof t)throw new N.ThirdScriptError("Parameter 1 should be a string");this.audioId=t,this.webviewId=n,this.pluginId=o,this.nodeId=r}return Object(K.default)(e,[{key:"setSrc",value:function(e){this._sendAction({method:"setSrc",data:e})}},{key:"play",value:function(){this._getAppStatus()===on.AppStatus.BACK_GROUND||this._sendAction({method:"play"})}},{key:"pause",value:function(){this._sendAction({method:"pause"})}},{key:"seek",value:function(e){this._sendAction({method:"setCurrentTime",data:e})}},{key:"_ready",value:function(e){var t=this.webviewId+"_"+this.pluginId+"_"+this.audioId+"_"+this.nodeId;rr[t]?e():or.on("audioInsert_"+t,(function(){e()}))}},{key:"_sendAction",value:function(e){var t=this;this._ready((function(){Object(R.publish)("audio_"+t.pluginId+"_"+t.audioId+"_"+t.nodeId+"_actionChanged",e,[t.webviewId])}))}}]),e}();function sr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=new ar(e,t,n,r);return o._getAppStatus=function(){return L.default.appStatus},o._getHanged=function(){return L.default.hanged},nr.onAppEnterBackground.call(this,(function(){o.pause()})),o}var cr=n(158),ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("number"==typeof e.maxDuration&&e.maxDuration>60){var t={errMsg:"chooseVideo:fail|maxDuration can not over 60"};return"function"==typeof e.fail&&e.fail(t),void("function"==typeof e.complete&&e.complete(t))}e.sourceType=e.sourceType||["album","camera"],e.camera=e.camera||"back","boolean"!=typeof e.compressed&&(e.compressed=!0),Object(R.invokeMethod)("chooseVideo",e)},lr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("saveVideoToPhotosAlbum",e,{})},dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getVideoInfo",e,{src:""})&&Object(R.invokeMethod)("getVideoInfo",e,{})},fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("compressVideo",e,{src:""})&&Object(R.invokeMethod)("compressVideo",e,{})},pr=n(120),hr=function(e){Object(R.beforeInvoke)("playVoice",e,{filePath:""})&&Object(R.invokeMethod)("playVoice",e)},vr=function(e){Object(R.invokeMethod)("pauseVoice",e)},gr=function(e){Object(R.invokeMethod)("stopVoice",e)},_r=function(e){Object(R.onMethod)("onVoicePlayEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onVoicePlayEnd callback function"))},br=n(66),yr=new U.default,mr={8e3:[16e3,48e3],11025:[16e3,48e3],12e3:[24e3,64e3],16e3:[24e3,96e3],22050:[32e3,128e3],24e3:[32e3,128e3],32e3:[48e3,192e3],44100:[64e3,32e4],48e3:[64e3,32e4]};Object(R.onMethod)("onRecorderStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,yr.emit("onRecorderStateChange_"+t,e)}));var wr,Or=function(e){Object(R.invokeMethod)("operateRecorder",Object.assign({},e))},Sr={start:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({format:"aac",sampleRate:8e3,encodeBitRate:48e3,numberOfChannels:2,audioSource:"auto"},e);if(-1===Object.keys(mr).map((function(e){return parseInt(e,10)})).indexOf(t.sampleRate))throw new Error('invalid sampleRate "'+t.sampleRate+'", sampleRate should be one of '+JSON.stringify(Object.keys(mr)));if(t.encodeBitRate>mr[t.sampleRate][1]||t.encodeBitRate<mr[t.sampleRate][0])throw new Error('invalid encodeBitRate "'+t.encodeBitRate+'", encodeBitRate should be greater than '+mr[t.sampleRate][0]+" and less than "+mr[t.sampleRate][1]);t.operationType="start",t.fail=function(e){yr.emit("onRecorderStateChange_error",e)},Or(t)},pause:function(){Or({operationType:"pause",fail:function(e){yr.emit("onRecorderStateChange_error",e)}})},resume:function(){Or({operationType:"resume",success:function(){yr.emit("onRecorderStateChange_resume")},fail:function(e){yr.emit("onRecorderStateChange_error",e)}})},stop:function(){Or({operationType:"stop",fail:function(e){yr.emit("onRecorderStateChange_error",e)}})},onStart:function(e){yr.removeAllListeners("onRecorderStateChange_start"),yr.on("onRecorderStateChange_start",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onResume:function(e){yr.removeAllListeners("onRecorderStateChange_resume"),yr.on("onRecorderStateChange_resume",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onResume callback function")()}))},onPause:function(e){yr.removeAllListeners("onRecorderStateChange_pause"),yr.on("onRecorderStateChange_pause",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onPause callback function")()}))},onStop:function(e){yr.removeAllListeners("onRecorderStateChange_stop"),yr.on("onRecorderStateChange_stop",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onStop callback function")(t)}))},onFrameRecorded:function(e){yr.removeAllListeners("onRecorderStateChange_frameRecorded"),yr.on("onRecorderStateChange_frameRecorded",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onFrameRecorded callback function")(t)}))},onError:function(e){yr.removeAllListeners("onRecorderStateChange_error"),yr.on("onRecorderStateChange_error",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onError callback function")(t)}))},onInterruptionBegin:function(e){yr.removeAllListeners("onRecorderStateChange_interruptionBegin"),yr.on("onRecorderStateChange_interruptionBegin",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionBegin callback function")(t)}))},onInterruptionEnd:function(e){yr.removeAllListeners("onRecorderStateChange_interruptionEnd"),yr.on("onRecorderStateChange_interruptionEnd",(function(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at recorderManager.onInterruptionEnd callback function")(t)}))}},Ir=function(){return Sr},Er=function(e){Object(br.reportDeprecatedAPI)("startRecord"),Object(R.invokeMethod)("startRecord",e)},Cr=function(e){Object(br.reportDeprecatedAPI)("stopRecord"),Object(R.invokeMethod)("stopRecord",e)},Tr=n(61),kr=new Tr.Emitter("BackgroundAudioManager",!0),Ar=wxNativeConsole.createLogger("BackgroundAudioManager"),Pr={src:"",currentTime:0,duration:0,paused:!0,buffered:0,title:"",coverImgUrl:"",description:"",startTime:0,playbackRate:1,referrerPolicy:""};Object(R.onMethod)("onBackgroundAudioNext",(function(){kr.emit("Next")})),Object(R.onMethod)("onBackgroundAudioPrev",(function(){kr.emit("Prev")})),Object(R.onMethod)("onBackgroundAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,"play"===t?(Pr.paused=!1,L.default.possessingBackgroundAudioPlayer=!0):"preempted"===t||"occupied"===t?(L.default.possessingBackgroundAudioPlayer=!1,kr.emit("Stop",e)):("pause"===t||"stop"===t)&&(Pr.paused=!0),kr.emit(""+t[0].toUpperCase()+t.substr(1),e)}));var Dr={play:function(){setTimeout((function(){jr({operationType:"play"})}),0)},pause:function(){setTimeout((function(){jr({operationType:"pause"})}),0)},seek:function(e){if("number"!=typeof e)throw new Error("BackgroundAudioManager.seek(currentTime): unexpected type "+Object(x.default)(e));setTimeout((function(){jr({currentTime:e,operationType:"seek"})}),0)},stop:function(){setTimeout((function(){jr({operationType:"stop"})}),0)},onTimeUpdate:function(e){var t=this;void 0===wr&&(wr=setInterval((function(){var e=Pr.currentTime;xr("currentTime",(function(){"active"===L.default.runningStatus&&!1!==L.default.possessingBackgroundAudioPlayer&&t.currentTime!==e&&kr.emit("Timeupdate")}))}),250)),kr.off("Timeupdate"),kr.on("Timeupdate",e)}};function jr(e){Object(R.invokeMethod)("operateBackgroundAudio",e)}["src","title","epname","singer","startTime","coverImgUrl","currentTime","duration","paused","buffered","webUrl","protocol","playbackRate","referrerPolicy"].forEach((function(e){Object.defineProperty(Dr,e,{get:function(){return"src"===e&&Dr.srcCloudId?Dr.srcCloudId:"coverImgUrl"===e&&Dr.coverCloudId?Dr.coverCloudId:xr(e)},set:function(t){["src","title","epname","singer","coverImgUrl","startTime","webUrl","protocol","playbackRate","referrerPolicy"].indexOf(e)>-1&&("src"===e?Object(ne.getCloudFileUrl)([t],"audio",(function(n){/^(cloud):\/\//.test(t)?Dr.srcCloudId=t:Dr.srcCloudId="",Mr(e,n.data[0].url)})):"coverImgUrl"===e?Object(ne.getCloudFileUrl)([t],"image",(function(n){/^(cloud):\/\//.test(t)?Dr.coverCloudId=t:Dr.coverCloudId="",Mr(e,n.data[0].url)})):Mr(e,t))}})}));function xr(e,t){if(!1!==L.default.possessingBackgroundAudioPlayer){var n=Pr[e];return Object(R.invokeMethod)("getBackgroundAudioState",{success:function(r){void 0===r.paused||!0===r.paused?r.paused=!0:r.paused=!1,Pr=Object.assign(Pr,r),n=Pr[e],"function"==typeof t&&t(n)},fail:function(e){var t=e.errMsg;Ar.error("getBackgroundAudioState fail: "+t)}}),n}}["Canplay","Waiting","Error","Play","Pause","Seeking","Seeked","Ended","Stop","Next","Prev"].forEach((function(e){Dr["on"+e]=function(t){kr.off(e),kr.on(e,t)}}));var Rr={};function Mr(e,t){if("src"===e&&!t)throw new Error("invalid BackgroundAudioManager.src: "+t);if("active"!==L.default.runningStatus&&!1===L.default.possessingBackgroundAudioPlayer)throw new N.AppServiceSdkKnownError("Can not set BackgroundAudioManager."+e+", background audio is preempted.");Rr[e]=t,1===Object.keys(Rr).length&&setTimeout((function(){Object.assign(Pr,Rr),Pr.src&&Pr.title?(Ar.log("setBackgroundAudioState, stateInstance:",Pr),Object(R.invokeMethod)("setBackgroundAudioState",Object.assign({},Pr,{fail:function(e){var t=e.errMsg;Ar.error(t),kr.emit("Error",{errMsg:t.replace(/^setBackgroundAudioState: fail /,"")})}})),Rr={}):Rr={}}),0)}var Nr=function(){return Dr},Lr=function(e){if(!1===L.default.possessingBackgroundAudioPlayer){var t={errMsg:"getBackgroundAudioPlayerState: fail not playing"};"function"==typeof e.fail&&e.fail(t),"function"==typeof e.complete&&e.complete(t)}else Object(R.invokeMethod)("getMusicPlayerState",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("getMusicPlayerState","getBackgroundAudioPlayerState")}})},Br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("operateMusicPlayer",Object(N.assign)({operationType:"play"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","playBackgroundAudio")}})},Fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("operateMusicPlayer",Object(N.assign)({operationType:"pause"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","pauseBackgroundAudio")}})},Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("seekBackgroundAudio",e,{position:1})&&Object(R.invokeMethod)("operateMusicPlayer",Object(N.assign)({operationType:"seek"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","seekBackgroundAudio")}})},Ur=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("operateMusicPlayer",Object(N.assign)({operationType:"stop"},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateMusicPlayer","stopBackgroundAudio")}})},Vr=new U.default;Object(R.onMethod)("onMusicPlay",(function(){L.default.possessingBackgroundAudioPlayer=!0,Vr.emit("onBackgroundAudioPlay")}));var Gr=function(e){Vr.removeAllListeners("onBackgroundAudioPlay"),Vr.on("onBackgroundAudioPlay",(function(){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at wx.onBackgroundAudioPlay callback function")()}))},Hr=function(e){Object(R.onMethod)("onMusicPause",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioPause callback function"))},zr=function(e){Object(R.onMethod)("onMusicEnd",__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundAudioStop callback function"))},qr=function(e){Object(R.invokeMethod)("getAvailableAudioSources",e)},Yr=function(e){Object(R.invokeMethod)("setInnerAudioOption",Object.assign({mixWithOther:!0,obeyMuteSwitch:!0},e))},Kr=wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),Jr=new WeakMap;function Xr(e,t){var n=this;Jr.set(this,Object.assign(Jr.get(this),Object(q.default)({},e,t))),this.promise.then((function(){var r;Object(R.invokeMethod)("operateAudioPlayer",(r={operationType:"update",containerId:Jr.get(n).containerId},Object(q.default)(r,e,t),Object(q.default)(r,"success",(function(e){Kr.log("update audio success",e)})),Object(q.default)(r,"fail",(function(e){Kr.error("update audio fail",e)})),r))})).catch((function(e){Kr.error("update audio fail",e)}))}var $r=function(){function e(){var t=this;Object($.default)(this,e),Jr.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),Object(R.invokeMethod)("operateAudioPlayer",{operationType:"create",success:function(e){Kr.log("operateAudioPlayer create success",e),Jr.set(t,Object.assign(Jr.get(t),{containerId:e.containerId})),t.resolve(e)},fail:function(e){Kr.error("operateAudioPlayer create fail",e),t.reject(e)}})}return Object(K.default)(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(R.invokeMethod)("operateAudioPlayer",{operationType:"start",containerId:Jr.get(e).containerId,success:function(e){Kr.log("operateAudioPlayer start success",e),t(e)},fail:function(e){Kr.error("operateAudioPlayer start fail",e),n(e)}})}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Object(R.invokeMethod)("operateAudioPlayer",{operationType:"addTask",containerId:Jr.get(t).containerId,taskId:e.videoDecoderId,success:function(e){Kr.log("addAudioSource addTask success",e),n(e)},fail:function(e){Kr.error("addAudioSource addTask fail",e),r(e)}})}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Object(R.invokeMethod)("operateAudioPlayer",{operationType:"delTask",containerId:Jr.get(t).containerId,taskId:e.videoDecoderId,success:function(e){Kr.log("removeAudioSource delTask success",e),n(e)},fail:function(e){Kr.error("removeAudioSource delTask fail",e),r(e)}})}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(R.invokeMethod)("operateAudioPlayer",{operationType:"stop",containerId:Jr.get(e).containerId,success:function(e){Kr.log("stop audio success",e),t(e)},fail:function(e){Kr.log("stop audio fail",e),n(e)}})}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Object(R.invokeMethod)("operateAudioPlayer",{operationType:"remove",containerId:Jr.get(e).containerId,success:function(e){Kr.log("destroy audio success",e),t(e)},fail:function(e){Kr.error("destroy audio fail",e),n(e)}}),Jr.delete(e)}))}))}},{key:"volume",get:function(){return Jr.get(this).audioVolume},set:function(e){return Xr.call(this,"audioVolume",e),e}}]),e}(),Zr=wxNativeConsole.createLogger("MediaAudioPlayerBinding"),Qr=new WeakMap;function eo(e,t){var n=this;Qr.set(this,Object.assign(Qr.get(this),Object(q.default)({},e,t))),this.promise.then((function(){Xe.default.MediaToolKit.audioUpdate(Object(q.default)({containerId:Qr.get(n).containerId},e,t),(function(e){0===e.errCode?Zr.log("operateAudioPlayer update success",e):Zr.error("operateAudioPlayer update fail",e)}))})).catch((function(e){Zr.error("update audio fail",e)}))}var to=function(){function e(){var t=this;Object($.default)(this,e),Qr.set(this,{}),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),Zr.log("NativeGlobal.MediaToolKit.audioCreate",Xe.default.MediaToolKit.audioCreate),Xe.default.MediaToolKit.audioCreate({},(function(e){0===e.errCode?(Zr.log("NativeGlobal.MediaToolKit.audioCreate success",e),Qr.set(t,Object.assign(Qr.get(t),{containerId:e.containerId})),t.resolve(e)):(Zr.error("create MediaAudioPlayerBinding fail"),t.reject(e))}))}return Object(K.default)(e,[{key:"start",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Xe.default.MediaToolKit.audioStart({containerId:Qr.get(e).containerId},(function(e){0===e.errCode?(Zr.log("operateAudioPlayer start success",e),t(e)):(Zr.error("operateAudioPlayer start fail",e),n(e))}))}))}))}},{key:"addAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Xe.default.MediaToolKit.audioAddTask({containerId:Qr.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(Zr.log("addAudioSource addTask success",e),n(e)):(Zr.error("addAudioSource addTask fail",e),r(e))}))}))}))}},{key:"removeAudioSource",value:function(e){var t=this;return this.promise.then((function(){return new Promise((function(n,r){Xe.default.MediaToolKit.audioDelTask({containerId:Qr.get(t).containerId,taskId:e.videoDecoderId},(function(e){0===e.errCode?(Zr.log("removeAudioSource delTask success",e),n(e)):(Zr.error("removeAudioSource delTask fail",e),r(e))}))}))}))}},{key:"stop",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Xe.default.MediaToolKit.audioStop({containerId:Qr.get(e).containerId},(function(e){0===e.errCode?(Zr.log("stop audio success",e),t(e)):(Zr.log("stop audio fail",e),n(e))}))}))}))}},{key:"destroy",value:function(){var e=this;return this.promise.then((function(){return new Promise((function(t,n){Xe.default.MediaToolKit.audioRemove({containerId:Qr.get(e).containerId},(function(e){0===e.errCode?(Zr.log("destroy audio success",e),t(e)):(Zr.error("destroy audio fail",e),n(e))})),Qr.delete(e)}))}))}},{key:"volume",get:function(){return Qr.get(this).audioVolume},set:function(e){return eo.call(this,"audioVolume",e),e}}]),e}(),no=function(){return Xe.default.MediaToolKit&&Xe.default.MediaToolKit.audioCreate?new to:new $r},ro=null,oo=!1;Object(rt.onAppRoute)((function(){oo=!0})),Object(Wt.onAppRouteDone)((function(){oo=!1,ro&&(ao(ro),ro=null)}));var io=100,ao=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type||(e.type="all"),void 0===e.count&&(e.count=io),Object(M.beforeInvoke)("chooseMessageFile",e,{type:"",count:0})&&(e.count<=0?Object(M.beforeInvokeFail)("chooseMessageFile",e,"param count should be larger than 0."):void 0===e.extension||"[object Array]"===Object.prototype.toString.call(e.extension)?!e.extension||e.extension.length?(e.count>io&&(e.count=io),oo?ro=e:Object(M.invokeMethod)("chooseMessageFile",e)):Object(M.beforeInvokeFail)("chooseMessageFile",e,"param extension should not be empty."):Object(M.beforeInvokeFail)("chooseMessageFile",e,"param extension should be Array."))},so=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("chooseMedia",e)},co=n(58),uo=n(28),lo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("previewMedia",e,{sources:[]}))if(e.sources.length>50)Object(R.beforeInvokeFail)("previewMedia",e,"maximum length of sources is 50");else{var t=Object(uo.getPluginId)(this),n=function(e){return"string"!=typeof t||"/"!==e[0]?e:Object(N.convertProtocolPath)("plugin-private://"+t+e)},r=JSON.parse(JSON.stringify(e.sources)),o=[],i=[];r.forEach((function(e,t){e.type=e.type||"image",e.index=t,e.url=e.url?co.FakeTempFilePathMap.get(e.url)||e.url:"","image"===e.type?o.push(e):"video"===e.type&&i.push(e)}));var a=o.map((function(e){return e.url||""})).map((function(e){return n(e)})),s=i.map((function(e){return e.url||""})).map((function(e){return n(e)}));Object(ne.getCloudFileUrl)(a,"image",(function(t){var n=t.data.map((function(e){return e.url}));Object(ne.getCloudFileUrl)(s,"video",(function(t){var a=t.data.map((function(e){return e.url}));n.forEach((function(e,t){var n=o[t].index;r[n].url=e})),a.forEach((function(e,t){var n=i[t].index;r[n].url=e}));var s=Object.assign({current:0},e,{sources:r});Object(R.invokeMethod)("previewMedia",s)}))}))}},fo=n(22),po=Object(fo.getEventManager)("AudioInterruptionBegin"),ho=po.onMethod,vo=po.offMethod,go=(po.internalOnMethod,po.internalOffMethod,Object(fo.getEventManager)("AudioInterruptionEnd")),_o=go.onMethod,bo=go.offMethod,yo=(go.internalOnMethod,go.internalOffMethod,!1);Object(R.onMethod)("onAudioInterruptionBegin",(function(e){wxNativeConsole.info("onAudioInterruptionBegin"),!0,!1===yo&&po.emit(e)})),Object(R.onMethod)("onAudioInterruptionEnd",(function(e){wxNativeConsole.info("onAudioInterruptionEnd"),!1,!1===yo&&go.emit(e)}));var mo=function(){return yo};function wo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Oo=Object.assign,So=new WeakMap,Io=new WeakMap;function Eo(e,t){return e.map((function(e){return"video"===e.kind?new ko(e.trackId,e.duration,t):"audio"===e.kind?new To(e.trackId,e.duration,t):null}))}var Co=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;Object($.default)(this,e),this.id=t,this.duration=n,this.mediaContainer=r}return Object(K.default)(e,[{key:"appendFrom",value:function(t){var n=this;if(!(t instanceof e))throw new Error("Parameter 1 should be a MediaTrack");So.get(this.mediaContainer).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"update",containerId:n.mediaContainer.id,trackId:n.id,appendFrom:t.id,fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to append. errMsg: "+e.errMsg)}),"at MediaTrack.appendFrom method")})}))}},{key:"slice",value:function(e,t){var n=this,r=[];if("number"==typeof e){if("number"!=typeof t)throw new Error("Parameter 2 should be a number.");r.push([e,t])}else r=e;So.get(this.mediaContainer).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"update",containerId:n.mediaContainer.id,trackId:n.id,slice:r,fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to slice. errMsg: "+e.errMsg)}),"at MediaTrack.slice method")})}))}}]),e}(),To=function(e){Object(G.default)(n,e);var t=wo(n);function n(e,r,o){var i;return Object($.default)(this,n),(i=t.call(this,e,r,o)).kind="audio",i}return Object(K.default)(n,[{key:"volume",set:function(e){var t=this;if(!(e>=0&&e<=1))throw new Error("Parameter 1 out of range.");So.get(this.mediaContainer).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"update",containerId:t.mediaContainer.id,trackId:t.id,volume:e,fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to set volume. errMsg: "+e.errMsg)}),"at MediaTrack.volume setter")})}))}},{key:"atempo",set:function(e){var t=this;if(!(e>=0&&e<=10))throw new Error("Parameter 1 out of range.");So.get(this.mediaContainer).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"update",containerId:t.mediaContainer.id,trackId:t.id,atempo:e,fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to set atempo. errMsg: "+e.errMsg)}),"at MediaTrack.atempo setter")})}))}}]),n}(Co),ko=function(e){Object(G.default)(n,e);var t=wo(n);function n(e,r,o){var i;return Object($.default)(this,n),(i=t.call(this,e,r,o)).kind="video",i}return n}(Co),Ao=function(){function e(){var t=this;Object($.default)(this,e);var n=new Promise((function(e){Object(R.invokeMethod)("operateMediaContainer",{operationType:"create",success:function(n){t.id=n.containerId,e()},fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to createMediaContainer. errMsg: "+e.errMsg)}),"at createMediaContainer function")})}));So.set(this,n)}return Object(K.default)(e,[{key:"extractDataSource",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("createMediaContainer.extractDataSource",t,{source:""})&&So.get(this).then((function(){Object(R.invokeMethod)("operateMediaTrack",Oo(t,{operationType:"get",containerId:e.id}),{beforeSuccess:function(t){t.errMsg=t.errMsg.replace("operateMediaTrack","extractDataSource"),t.tracks=Eo(t.tracks,e)},beforeFail:function(e){e.errMsg=e.errMsg.replace("operateMediaTrack","extractDataSource")}})}))}},{key:"addTrack",value:function(e){var t=this;if(!(e instanceof Co))throw new Error("Parameter 1 should be a MediaTrack");if("video"===e.kind){if(Io.get(this))throw new Error("Only can be added one video track.");Io.set(this,!0)}So.get(this).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"create",containerId:t.id,trackId:e.id,fail:Object(N.surroundByTryCatchFactory)((function(e){throw new Error("fail to addTrack. errMsg: "+e.errMsg)}),"at createMediaContainer.addTrack function")})}))}},{key:"removeTrack",value:function(e){var t=this;if(!(e instanceof Co))throw new Error("Parameter 1 should be a MediaTrack");"video"===e.kind&&Io.set(this,!1),So.get(this).then((function(){Object(R.invokeMethod)("operateMediaTrack",{operationType:"remove",containerId:t.id,trackId:e.id})}))}},{key:"export",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.mimeType||(t.mimeType="mp4"),So.get(this).then((function(){Object(R.invokeMethod)("operateMediaContainer",Oo(t,{operationType:"export",containerId:e.id}))}))}},{key:"destroy",value:function(){var e=this;So.get(this).then((function(){Object(R.invokeMethod)("operateMediaContainer",{operationType:"remove",containerId:e.id})}))}}]),e}();function Po(){return new Ao}var Do=n(192),jo=n(193),xo=300,Ro=Object.assign,Mo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("openVideoEditor",e,{filePath:""})){var t=e.title,n=e.filePath,r=e.minDuration,o=e.maxDuration;(!(r=parseInt(r,10))||r<1)&&(r=1),(!(o=parseInt(o,10))||o>xo)&&(o=xo),Object(R.invokeMethod)("openVideoEditor",Ro({},e,{editType:2,editorParmas:{title:t,filePath:n,minDuration:r,maxDuration:o,toolBars:["crop"],buttonOptions:[]}}),{beforeSuccess:function(e){e.duration=e.duraionMs||Math.round(e.duration/1e3),delete e.chosenId,delete e.videoMD5,delete e.duraionS,delete e.duraionMs,delete e.duraionUs}})}},No=n(47),Lo=n(11),Bo=n(177),Fo=new WeakMap,Wo=new WeakMap,Uo=new WeakMap,Vo=new WeakMap,Go=new WeakMap,Ho=new WeakMap,zo=new WeakMap,qo=new Map,Yo=new Map;Xe.default.EventHandler&&(Xe.default.EventHandler.onbindingobjectdestruct=function(e){var t=Yo[e];t&&Object(R.invokeMethod)("getAudioState",{audioId:t,success:function(e){!0===e.paused?(qo.delete(t),Object(R.invokeMethod)("destroyAudioInstance",{audioId:t})):qo.get(t)&&!1===qo.get(t).loop&&ei.once(t+"_onAudioStateChange_ended",(function(){qo.delete(t),Object(R.invokeMethod)("destroyAudioInstance",{audioId:t})}))}})});var Ko=function(e,t){var n=this;Wo.set(this,Object.assign(Wo.get(this),Object(q.default)({},e,t))),"src"===e&&Wo.set(this,Object.assign(Wo.get(this),{paused:!0})),Vo.get(this)&&(setTimeout((function(){var r=Object.assign({},Wo.get(n),Go.get(n),{timestamp:Date.now(),audioId:Fo.get(n),success:function(){Wo.set(n,Object.assign(Wo.get(n),Object(q.default)({},e,t)))},fail:function(){Xo.call(n)}});mo()&&(r.autoplay=!1),Object(R.invokeMethod)("setAudioState",r),Vo.set(n,!0)}),0),Vo.set(this,!1)),Go.set(this,Object.assign(Go.get(this),Object(q.default)({},e,t)))},Jo=function(e,t){var n=this;zo.get(this).then((function(){Ko.call(n,e,t)}))},Xo=function(e,t){var n=this,r=Wo.get(this)[e];return Object(R.invokeMethod)("getAudioState",{audioId:Fo.get(this),success:function(o){delete o.errMsg,Wo.set(n,Object.assign(Wo.get(n),o)),r=o[e],"function"==typeof t&&t(r)}}),r},$o=function(e){var t=Fo.get(this);Object(R.invokeMethod)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail:function(e){var t=e.errMsg;ii("error",{errMsg:t,errCode:-1})}},e))},Zo=function(e){var t=this;zo.get(this).then((function(){setTimeout((function(){$o.call(t,e)}),0)}))},Qo=function(){};At.default.onReady((function(){Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";void 0!==wx&&wx.version&&wx.version.version&&(r=wx.version.version);var o=At.default.appLaunchInfo,i="";i=Object.keys(o.query||{}).map((function(e){return e+"="+o.query[e]})).join("&"),i=encodeURIComponent(i);var a=[Math.round(Date.now()/1e3),o.scene,"",o.sessionid||o.sessionId,o.path,i,Object(No._getCurrentNetworkType)(),r,5,t,n,encodeURIComponent(e.substring(0,1024)).substring(0,1024),At.default.appType+1e3].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:a})}}));var ei=new U.default;Object(R.onMethod)("onAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.state=e.state.toLowerCase();var t=e.state,n=e.audioId;delete e.audioId,delete e.state;var r="play"!==t,o=qo.get(n);o&&(o.paused=r),Object(R.invokeMethod)("getAudioState",{audioId:n,success:function(e){var n=parseInt(e.currentTime/1e3,10),r=parseInt(e.duration/1e3,10);switch(t){case"canplay":Qo(e.src,121,[e.autoplay?2:1,r].join(";"));break;case"waiting":Qo(e.src,122,[n,r,e.buffered].join(";"));break;case"ended":Qo(e.src,123,e.duration);break;case"error":Qo(e.src,124,e.errCode);break;case"seeking":Qo(e.src,125,[n,r,e.buffered].join(";"))}}}),ei.emit(n+"_onAudioStateChange_"+t,e)}));var ti=function(e,t){var n=Fo.get(this)+"_onAudioStateChange_"+e,r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function")(n)};Ho.set(t,r),ei.on(n,r)},ni=function(e,t){var n=this;zo.get(this).then((function(){ti.call(n,e,t)}))},ri=function(e,t){var n=Fo.get(this)+"_onAudioStateChange_"+e;if(Object(re.isFunction)(t)){var r=Ho.get(t);Object(re.isFunction)(r)&&ei.off(n,r)}else ei.removeAllListeners(n)},oi=function(e,t){var n=this;zo.get(this).then((function(){ri.call(n,e,t)}))},ii=function(e,t){ei.emit(Fo.get(this)+"_onAudioStateChange_"+e,t)},ai=0,si=!1,ci=function(){function e(t){var n,r,o=this;Object($.default)(this,e),Wo.set(this,{}),Go.set(this,{}),Uo.set(this,void 0),Vo.set(this,!0),zo.set(this,new Bo.WxPromise((function(e,t){n=e,r=t}))),Object(R.invokeMethod)(ee.IS_ANDROID&&Object(Lo.isGame)()&&At.default.clientVersion>=654315008&&t?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:function(e){var t={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(qo.set(e.audioId,t),Fo.set(o,e.audioId),Wo.set(o,t),Xe.default.BindingObject){var r=new Xe.default.BindingObject;o.__bindingObject=r,Yo[r.__id]=e.audioId}ai+=1,++ai>=1024&&!si&&ee.IS_IOS&&(si=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(n,0)},fail:function(e){r(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((function(e){o["on"+e]=function(t){ni.call(o,e.toLowerCase(),t)},o["off"+e]=function(t){oi.call(o,e.toLowerCase(),t)}}))}return Object(K.default)(e,[{key:"src",get:function(){return this.cloudId?this.cloudId:Xo.call(this,"src")},set:function(e){var t=this;"string"==typeof e&&0!==e.length?Object(ne.getCloudFileUrl)([e],"audio",(function(n){/^(cloud):\/\//.test(e)?t.cloudId=e:t.cloudId="",e=n.data[0].url,Jo.call(t,"src",e)})):ii.call(this,"error",{errMsg:"Failed to set src, the src "+e+" is invalid."})}},{key:"startTime",get:function(){return Xo.call(this,"startTime")/1e3},set:function(e){"number"==typeof e?Jo.call(this,"startTime",1e3*e):ii("error",{errMsg:"Failed to set startTime, the startTime "+e+" is invalid."})}},{key:"autoplay",get:function(){return Xo.call(this,"autoplay")},set:function(e){"boolean"==typeof e&&Jo.call(this,"autoplay",e)}},{key:"loop",get:function(){return Xo.call(this,"loop")},set:function(e){"boolean"==typeof e&&Jo.call(this,"loop",e)}},{key:"obeyMuteSwitch",get:function(){return Xo.call(this,"obeyMuteSwitch")},set:function(e){"boolean"==typeof e&&Jo.call(this,"obeyMuteSwitch",e)}},{key:"volume",get:function(){return Xo.call(this,"volume")},set:function(e){"number"!=typeof e||e<0||e>1||Jo.call(this,"volume",e)}},{key:"playbackRate",get:function(){return Xo.call(this,"playbackRate")},set:function(e){"number"!=typeof e||e<0||Jo.call(this,"playbackRate",e)}},{key:"referrerPolicy",get:function(){return Xo.call(this,"referrerPolicy")},set:function(e){"string"==typeof e&&Jo.call(this,"referrerPolicy",e)}},{key:"paused",get:function(){return Xo.call(this,"paused")}},{key:"duration",get:function(){return Xo.call(this,"duration")/1e3}},{key:"currentTime",get:function(){return Xo.call(this,"currentTime")/1e3}},{key:"buffered",get:function(){return Xo.call(this,"buffered")/1e3}},{key:"play",value:function(){!1===mo()&&Zo.call(this,{operationType:"play"})}},{key:"pause",value:function(){Zo.call(this,{operationType:"pause"})}},{key:"stop",value:function(){Zo.call(this,{operationType:"stop"})}},{key:"seek",value:function(e){"number"!=typeof e||e<0?ii("error",{errMsg:"Failed to seek, the currentTime "+e+" is invalid."}):Zo.call(this,{operationType:"seek",currentTime:1e3*e})}},{key:"destroy",value:function(){var e=this;zo.get(this).then((function(){var t=Fo.get(e);qo.has(t)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((function(e){var n=t+"_onAudioStateChange_"+e;ei.removeAllListeners(n)})),qo.delete(t),ai-=1,Object(R.invokeMethod)("destroyAudioInstance",{audioId:t}))}))}},{key:"onTimeUpdate",value:function(e){var t=this;zo.get(this).then((function(){var n=Fo.get(t)+"_onAudioStateChange_timeupdate";void 0===Uo.get(t)&&Uo.set(t,setInterval((function(){if("active"===L.default.runningStatus&&!0!==Wo.get(t).paused&&1!==Wo.get(t).paused){var e=Wo.get(t).currentTime;Xo.call(t,"currentTime",(function(t){t!==e&&ei.emit(n)}))}}),250)),ei.removeAllListeners(n);var r=function(t){__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};Ho.set(e,r),ei.on(n,r)}))}},{key:"offTimeUpdate",value:function(e){var t=this;zo.get(this).then((function(){oi.call(t,"timeupdate",e)}))}}],[{key:"pauseAllAudio",value:function(){qo.forEach((function(e,t){Object(R.invokeMethod)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}}]),e}(),ui=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],li=["startTime","duration","currentTime"],di=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],fi=new Set,pi=new WeakMap,hi=new WeakMap,vi=new WeakMap,gi=function(){function e(){var t=this;Object($.default)(this,e);var n=new Xe.default.Audio,r=new U.default;pi.set(this,n),fi.add(this),ui.forEach((function(e){return Object.defineProperty(t,e,{get:function(){return li.includes(e)?n[e]/1e3:n[e]},set:function(t){li.includes(e)?n[e]=1e3*t:n[e]=t}})})),di.forEach((function(e){t["on"+e]=function(t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function");hi.set(t,n),vi.set(n,t),r.on(e,n)},t["off"+e]=function(t){if(Object(re.isFunction)(t)){var n=hi.get(t);Object(re.isFunction)(n)&&(r.off(e,n),hi.delete(t),vi.delete(n))}else r.listeners(e).forEach((function(e){var t=vi.get(e);hi.delete(t),vi.delete(e)})),r.removeAllListeners(e)},n["on"+e.toLowerCase()]=function(t,n){t?r.emit(e,{errCode:t,errMsg:n}):r.emit(e)}}))}return Object(K.default)(e,[{key:"play",value:function(){pi.get(this).play()}},{key:"stop",value:function(){pi.get(this).stop()}},{key:"pause",value:function(){pi.get(this).pause()}},{key:"seek",value:function(e){pi.get(this).seek(1e3*e)}},{key:"destroy",value:function(){var e=pi.get(this);e.destroy&&e.destroy(),fi.delete(this),pi.delete(this)}}],[{key:"pauseAllAudio",value:function(){fi.forEach((function(e){var t=pi.get(e);t&&t.pause()}))}}]),e}(),_i=(ee.IS_PC||ee.IS_MINA)&&Xe.default.Audio?gi:ci,bi=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new _i(e)};function yi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oi={},Si={},Ii={},Ei={},Ci=1;Object(R.subscribe)("editorInsert",(function(e,t){var n=e.domId,r=e.editorId,o=e.pluginId,i=e.nodeId,a=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(a+=i),Oi[a]=r,function(e){Ii[e]||(Ii[e]=!0,Object(Q.onBeforeUnloadPage)(e,(function(e){delete Ii[e],Object.keys(Oi).forEach((function(t){new RegExp("^"+e).test(t)&&delete Oi[t]})),Object.keys(Si).forEach((function(t){new RegExp("^api_"+e).test(t)&&delete Si[t]})),Object.keys(Si).forEach((function(t){new RegExp("^SQ_"+e).test(t)&&delete Si[t]}))})))}(t)})),Object(R.subscribe)("editorRemoved",(function(e,t){var n=e.domId,r=e.editorId,o=e.pluginId,i=e.nodeId,a=t+"_"+o+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(a+=i),delete Oi[a];var s="SQ_"+t+"_"+r;delete Si["api_"+t+"_"+o+"_"+n+"_"+i],delete Si[s]})),Object(R.subscribe)("doEditorActionCallback",(function(e){var t=e.callbackId;if(t&&void 0!==Ei[t]){delete e.callbackId;var n=Ei[t];e.errMsg&&(e.errMsg.indexOf("ok")>-1?"function"==typeof n.success&&n.success(e):e.errMsg.indexOf("fail")>-1&&"function"==typeof n.fail&&n.fail(e)),"function"==typeof n.complete&&n.complete(e),delete Ei[t]}}));var Ti=function(){function e(){Object($.default)(this,e)}return Object(K.default)(e,[{key:"format",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._execCommand("format",{name:e,value:t,needCallBack:!1})}},{key:"scrollIntoView",value:function(){this._execCommand("scrollIntoView",{needCallBack:!1})}},{key:"_execCommandWithId",value:function(e,t,n){if(n.needCallBack){var r={};Object.keys(n).forEach((function(e){"function"==typeof n[e]&&(r[e]=n[e],delete n[e])}));var o="callback"+this.webviewId+"_"+e+"_"+Ci++;Ei[o]=r,n.callbackId=o}delete n.needCallBack,this.action={method:t,args:n},Object(R.publish)("editor_"+this.webviewId+"_"+e+"_actionChanged",this.action,[this.webviewId])}}]),e}();["insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","getSelectionText"].forEach((function(e){Ti.prototype[e]=Object(Z.surroundByPromiseFactory)((function(t){this._execCommand(e,wi(wi({},t),{},{needCallBack:!0}))}))}));var ki=function(e){Object(G.default)(n,e);var t=yi(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this)).editorId=e,o.webviewId=r,o}return Object(K.default)(n,[{key:"_execCommand",value:function(e,t){this._execCommandWithId(this.editorId,e,t)}}]),n}(Ti);function Ai(e,t){var n="SQ_"+t+"_"+e;if(Si[n])return Si[n];var r=new ki(e,t);return Si[n]=r,r}var Pi=n(63),Di=function(e){if(""!==L.default.currentClipBoardData){var t;void 0!==__appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===L.default.currentWebviewId}))||{});var n=[L.default.currentClipBoardData,t?t.route:"",e?1:0,t?Object.keys(t.options||{}).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t.options[e])})).join("&"):"",Reporter.getAppType()].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Clipboard",value:n})}},ji=__safeway__.apiSign.makeApiSign;function xi(){var e=ji("getClipboardData",{success:function(e){L.default.currentClipBoardData=e.data}});Ri()&&Object(R._invokeMethod)("getClipboardData",e)}function Ri(){var e=At.default.system;return!At.default.useClipboardWithPermissionNotify&&(!/^iOS /i.test(e)||parseInt(e.split(" ")[1],10)<14)}At.default.onReady(xi),Object(Pi.onAppEnterForeground)(xi),Object(nr.onAppEnterBackground)((function(){var e=ji("getClipboardData",{success:function(e){e.data!==L.default.currentClipBoardData&&(L.default.currentClipBoardData=e.data,Di(!1))}});Ri()&&Object(R._invokeMethod)("getClipboardData",e)}));var Mi,Ni,Li,Bi=n(102),Fi=n(184),Wi=n(185),Ui=n(186),Vi=n(91),Gi=n(54),Hi=n(50),zi=Hi.default.pluginInfos,qi=[],Yi=(Ni=!1,At.default.clientVersion>=369431584&&At.default.clientVersion<=369432575&&(Ni=!0),At.default.clientVersion>=637867008&&At.default.clientVersion<=637868031&&(Ni=!0),function(){return Ni}),Ki=function(e){var t=String(e).split(".",3);return t.length<3?-1:Number(1e3*t[0]*1e3+1e3*t[1]+1*t[2])};var Ji=function(e){"android"===At.default.platform&&At.default.clientVersion<=654315519&&(Li=function(){for(var t=function(t){var n=e[t],r=n.plugin_id,o=zi[r];if(!o)return{v:void 0};var i=function(e,t){var r=new Set(o.domains[e]);n[t].forEach((function(e){r.add(e)})),o.domains[e]=Array.from(r)};i("request","request_domain"),i("uploadFile","upload_domain"),i("downloadFile","download_domain"),i("connectSocket","wsrequest_domain")},n=0;n<e.length;n++){var r=t(n);if("object"===Object(x.default)(r))return r.v}Object.keys(zi).map((function(e){return[e,zi[e].domains]}))})},Xi=function(e){var t=e.version;return{customVersion:e.customVersion,version:t,domains:{},hostSign:{}}},$i=n(80),Zi=n(105),Qi=n(30),ea=n(29),ta=n(53),na=n(36),ra=n(64);function oa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var aa=0,sa={};Object(Qi.onAppRoute)((function(e){sa=e,aa=e.webviewId}));var ca=Date.now(),ua=Date.now(),la=Date.now(),da=0;Object(Qi.onAppEnterForeground)((function(){(ca=Date.now())>ua&&(da+=ca-ua)})),Object(Qi.onAppEnterBackground)((function(){ua=Date.now()})),Object(Qi.onAppRouteDone)((function(){la=Date.now()}));var fa=null,pa=[];Object(R.subscribe)("videoAdPreloadInfoGet",(function(e){fa=e,pa.forEach((function(e){e&&e(fa)})),pa=[]}));var ha=null,va=new Date,ga="";At.default.onReady((function(){va=new Date;var e=Object(ea.getStableSystemInfo)();ga=e.model}));var _a={},ba=function(e,t){_a[e]=t},ya=Object(na.constructOperateWXData)(!1,"operateWXData"),ma=function(e){var t;t=function(t){var n={};Object(Lo.isIn3rdApp)()&&(n.in_3rd_app=1);var r={ad_unit_id:e,pos_id:"7090665964306299",scene_type:t.scene_type,weapp_path:sa.path,user_agent:t.ua,weapp_extra_data:JSON.stringify({start_ts:va.valueOf(),enter_ts:ca,user_duration:Date.now()-la-da,machine_type:ga,env:At.default.host&&At.default.host.env,app_appid:At.default.host&&At.default.host.appId}),ext_slot_custom_comm:JSON.stringify(n)};ya({apiName:"webapi_getadvert",reqData:r,success:function(t){try{if((t=JSON.parse(t.rawData)).advertisement_num>=1&&t.advertisement_info.length){var n=t.advertisement_info[0];n._preloadTime=+new Date,1515===n.crt_size?function(e,t){try{var n=Date.now();Object(ra._downloadFileSkipCheckDomain)({url:t.video_info.videoUrl,success:function(r){t.video_info.preloadUrl=r.tempFilePath,ba(e,t),Object(ta.reportAdMonitorData)(80,{costTime:Date.now()-n},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})},fail:function(r){ba(e,t),Object(ta.reportAdMonitorData)(81,{costTime:Date.now()-n,e:r},{ad_pos_type:6,aid:t.aid,traceid:t.traceid,ad_unit_id:e})}})}catch(e){}}(e,n):ba(e,n);var r=function(e){var t={};try{var n,r=oa(e=JSON.parse(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;o.hasOwnProperty("exp_para")&&o.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){r.e(e)}finally{r.f()}return t}catch(e){return{}}}(n.flow_exp_info);void 0!==r.widget_gray_preload_max&&(Oa=r.widget_gray_preload_max),Object(ta.reportAdMonitorData)(74,{errMsg:"advertisement success",errCode:t.ret},{ad_pos_type:6,aid:n.aid,traceid:n.traceid,ad_unit_id:e})}else Object(ta.reportAdMonitorData)(75,{errMsg:"no advertisement",errCode:t.ret},{ad_pos_type:6,ad_unit_id:e})}catch(t){Object(ta.reportAdMonitorData)(75,{errMsg:"advertisement error"},{ad_pos_type:6,ad_unit_id:e})}},fail:function(){Object(ta.reportAdMonitorData)(76,{errMsg:"advertisement fail"},{ad_pos_type:6,ad_unit_id:e})}})},fa?t&&t(fa):(ha&&clearTimeout(ha),ha=setTimeout((function(){Object(R.publish)("videoAdPreloadInfo",null,[aa])}),0),pa.push(t))},wa=[],Oa=5,Sa=function(){return wa};function Ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ca="",Ta="",ka="{}",Aa="",Pa="",Da="{}";function ja(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){var r="",o="";ee.IS_ANDROID&&At.default.clientVersion>=654316032?Object(R.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){r=e.waid||"",o=e.imei||"",t({waid:r,imei:o})},fail:function(e){n(e)}}):t({waid:r,imei:o})}))}var xa=n(124),Ra=n(112),Ma=n(142),Na=Object(fo.getEventManager)("Hide"),La=Object(fo.getEventManager)("BaseFrameHide"),Ba=(Na.onMethod,Na.offMethod,Na.internalOnMethod),Fa=Na.internalOffMethod;La.internalOnMethod,La.internalOffMethod;Object(V.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Ma.setLastOnHideMode)(e.mode),Object(Ra.isAtFunctionalPage)()?La.emit(e):(La.emit(e),Na.emit(e))}));var Wa=n(35),Ua=n(77),Va=n.n(Ua),Ga=n(40),Ha=n(46),za=n(17);function qa(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ya(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ya(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Ya(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ka=function(e){var t={};try{var n,r=qa(e=JSON.parse(e));try{for(r.s();!(n=r.n()).done;){var o=n.value;o.hasOwnProperty("exp_para")&&o.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){r.e(e)}finally{r.f()}for(var i in t)za.FLOW_EXP_MAP[i]&&(t[za.FLOW_EXP_MAP[i]]=t[i]);return t}catch(e){return{}}},Ja=function(e){var t=e.aid,n=e.buttonText,r=void 0===n?"":n;return Object(Ga.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:t.toString(),button_text:r})}}).then((function(e){if(!e.rawData)throw new Error("get_ad_metric no result");try{var t=JSON.parse(e.rawData),n=JSON.parse(t.result)||{},r=n.ad_metric_count,o=n.desc_text;return null==r||null==o||r<50?null:{count:Object(Ha.convertTenThousand)(r),descText:o}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((function(){throw new Error("get_ad_metric request failed")}))},Xa=function(e){var t=e.guide_group_id,n=e.uxinfo;return Object(Ga.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:t,uxinfo:n})}}).then((function(e){return"ok"===e.msg?Promise.resolve(e):Promise.reject(e)}))},$a=n(145),Za="<?xml version='1.0' encoding='utf-8' ?>",Qa=function(e){return"<![CDATA["+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"]]>"},es=function(e){return e.children&&e.children.length>0?e.children.map((function(e){return ts(e)})).join(""):""},ts=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?Za:"";return n+="<"+e.name+">",e.children.length>0?n+=es(e):n+=Qa(e.content),n+="</"+e.name+">"},ns=n(92),rs=n(100),os=Symbol("signExport"),is=function(){return function(e,t){e[os]=e[os]||new Set,e[os].add(t)}};function as(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ss(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ss(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ss(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cs,us,ls,ds,fs,ps,hs,vs,gs,_s,bs,ys,ms,ws,Os,Ss,Is,Es,Cs,Ts=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ks=function(e,t){var n,r=Array.isArray(t)?t:[t],o=as(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(!(i in e)||"function"!=typeof e[i])throw new Error(i+" is not the function method of the class")}}catch(e){o.e(e)}finally{o.f()}return r.map((function(t){return e[t]}))},As=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,o){var i=o.value,a=ks(n,e);o.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ts(this,void 0,void 0,Lt.a.mark((function e(){var n,r,o,s;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.call.apply(i,[this].concat(t));case 2:n=e.sent,r=as(a),e.prev=4,r.s();case 6:if((o=r.n()).done){e.next=12;break}return s=o.value,e.next=10,s.call(this,n);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})))}:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=i.call.apply(i,[this].concat(n));if(o instanceof Promise)return o.then((function(t){var n,r=as(a);try{for(r.s();!(n=r.n()).done;){n.value.call(e,t)}}catch(e){r.e(e)}finally{r.f()}return t}));var s,c=as(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,o)}}catch(e){c.e(e)}finally{c.f()}return o}}},Ps=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,r,o){var i=o.value,a=ks(n,e);o.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ts(this,void 0,void 0,Lt.a.mark((function e(){var n,r,o,s;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.call.apply(i,[this].concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),r=as(a),e.prev=10,r.s();case 12:if((o=r.n()).done){e.next=18;break}return s=o.value,e.next=16,s.call(this,e.t0);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(10),r.e(e.t1);case 23:return e.prev=23,r.f(),e.finish(23);case 26:throw e.t0;case 27:case"end":return e.stop()}}),e,this,[[0,7],[10,20,23,26]])})))}:function(){var e=this;try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=i.call.apply(i,[this].concat(n));return o instanceof Promise&&o.catch((function(t){var n,r=as(a);try{for(r.s();!(n=r.n()).done;){n.value.call(e,t)}}catch(e){r.e(e)}finally{r.f()}})),o}catch(e){var s,c=as(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,e)}}catch(e){c.e(e)}finally{c.f()}throw e}}}},Ds=n(187),js=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xs=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rs=function(){function e(t){Object($.default)(this,e),this.adProxy=t,this.timePoints={},this.analyseBranchInfo=null}return Object(K.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"convertedAdData",get:function(){return this.adProxy.convertedAdData}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"lastClickTime",get:function(){return this.adProxy.getLastClickTime()}},{key:"getTimePoint",value:function(e){return this.timePoints[e]?this.timePoints[e]:0}},{key:"setTimePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("splashAd"!==this.adType){["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});var n=t.time;this.timePoints[e]=n||Date.now()}else this.timePoints[e]=Date.now()}},{key:"reportTimePoints",value:function(e){var t=e.slotid,n=e.costtype,r=e.splash_instance_id,o=void 0===r?"":r,i=e.scene,a=void 0===i?0:i,s=e.errCode,c=void 0===s?0:s,u=e.extInfo,l=void 0===u?{}:u;if(["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType)){this.reportMMData(19837,Object.assign({slotid:t,costtype:n,ext_info:JSON.stringify(Object.assign({},l,{adUnitId:this.adUnitId,is_game:!0})),instance_id:o,scene:a,crt_size:this.data.crt_size,error_code:c},this.timePoints))}}},{key:"reportCloseAction",value:function(e){return this.reportMMData(16743,e)}},{key:"reportAdEntranceExposure",value:function(e){return this.reportMMData(18988,e)}},{key:"reportTouchClick",value:function(e){return this.reportMMData(16487,e)}},{key:"reportCancelRewardPlayablePage",value:function(e){return this.reportMMData(20299,e)}},{key:"formatMMData",value:function(e,t){var n,r=Object(Ds.getMMDataProto)(e);if(!r||0===r.length)return null;var o=this.data;if("grid"===this.adType&&-1!==[16139].indexOf(e))try{o=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:o.aid,traceid:o.traceid,crt_size:o.crt_size,slotid:za.POS_ID_MAP[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=za.POS_TYPE_MAP[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:Nc.gameAppId,appid:this.pluginAppid?this.pluginAppid:Nc.gameAppId,orig_weapp_id:this.pluginAppid?Nc.gameAppId:"",network_type:Nc.adNetworkType,wechat_version:Nc.wechatVersion,platform:Nc.platform,system_version:Nc.systemVersion,device_orientation:Nc.deviceOrientation,wxapp_lib_version:Nc.SDKVersion,wxapp_lib_time:Nc.SDKVersionTime,machine_type:Nc.model,ad_platform:Nc.isWaGame?1:0,ad_unit_id:this.adUnitId}),r.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}}))}},{key:"reportMMData",value:function(e,t){var n=this.formatMMData(e,t);return Object(Ga.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}},{key:"reportAbnormalDetect",value:function(e){var t={adunit_id:this.adUnitId,appid:Nc.gameAppId};if(Object.assign(e,t),"object"===Object(x.default)(e))return this.reportMMData(16139,e)}},{key:"reportAdIDKey",value:function(e){var t,n=e.key,r=e.id,o=n;"object"===Object(x.default)(o)&&(!r&&(r=o.idKeyGroup),o=o.idKey),r||(r=null!==(t=za.ID_KEY_MAP[this.adType])&&void 0!==t?t:924),0===o&&(o="0"),Reporter.reportIDKeyDirectly({id:r,key:o})}},{key:"processStackMsg",value:function(e){var t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return t.indexOf(n)<0&&(t=n+"@"+t),t}},{key:"reportAdIDKeyErrorData",value:function(e){var t,n,r=e.key,o=e.id,i=e.extInfo,a=r,s=o,c=void 0===i?"":i;"object"===Object(x.default)(a)&&(!s&&(s=a.idKeyGroup),a=a.idKey),0===a&&(a="0");var u="",l="";try{if(this.data){var d={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916,Ms.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){var f=this.convertedAdData;f&&(l=f.video.src,d.is_gauss_blur=f.isGaussBlur,d.is_expand_style=f.isExpandStyle)}else this.adProxy.isBannerAd()&&(l=this.data.image_url);u=JSON.stringify(d)}if(c&&"string"!=typeof c)try{c instanceof Error&&(c=this.processStackMsg(c)),c=JSON.stringify(c)}catch(e){c=c.toString()}}catch(e){c=this.processStackMsg(e),l="",u=null===(t=this.data)||void 0===t?void 0:t.crt_size}return this.reportMMData(16295,{id_key:a,id_key_group:null!==(n=null!=s?s:za.ID_KEY_MAP[this.adType])&&void 0!==n?n:924,report_time:+new Date,source_url:l,expand_feild:u,expand_feild2:c,scene:this.adProxy.scene||0})}},{key:"reportAdMonitorData",value:function(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}},{key:"reportEndPage",value:function(e){var t=e.slotid,n=e.costtype,r=e.isGame,o=void 0===r?0:r,i=e.posType,a=e.ace_type,s=e.exposure_duration,c=void 0===s?0:s;return this.reportMMData(19002,{slotid:t,costtype:n,is_game:o,pos_type:i,ace_type:a,exposure_duration:c})}},{key:"reportAdFeedbackData",value:function(e){var t,n,r,o={};if("grid"===this.adType){var i={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(t=this.datas)||void 0===t||t.forEach((function(e){e.extBackComm&&i.viewid.push(e.extBackComm.viewid),i.s_pt.push(e.pt),i.s_aid.push(e.aid),i.s_trace_id.push(e.traceid)})),o.grid_feedback_info=i}return this.reportMMData(17045,{appid:Nc.gameAppId,weapp_path:Lc.weappPath,ad_unit_id:this.adUnitId,device_type:Nc.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:Nc.screenHeight,screen_width:Nc.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:za.POS_ID_MAP[this.adType],service_type:Nc.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(n=e.isClickAd)&&void 0!==n?n:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(r=e.clickAdTimeMs)&&void 0!==r?r:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(o)})}},{key:"reportBehaviorButton",value:function(e){var t=e.button,n=e.playDuration,r=e.preloadVideo,o=e.preloadVideoSuccess,i=e.videoFirstPlay,a=e.cardFirstShow,s=e.clickCard,c=e.pressInterval,u=e.currentPlayUrl,l=e.lastFetchUrl,d=e.isEnded,f=e.videoDuration;return this.reportMMData(16e3,{click_button:t,play_duration:n,click_close_ts:+new Date,preload_video:r,preload_video_success:o,video_first_play_ts:i,card_first_show_ts:a,click_card_ts:s,press_interval:c,current_play_url:u,last_fetch_url:l,is_ended:d?1:0,video_duration:f})}},{key:"reportVideoLoadTime",value:function(e){var t=e.beginTime,n=void 0===t?0:t,r=e.endTime,o=void 0===r?0:r,i=e.departureTime,a=void 0===i?0:i,s=e.preloadVideo,c=void 0===s?0:s,u=e.preloadVideoSuccess,l=void 0===u?0:u,d=e.reportType,f=void 0===d?0:d,p=o-a-n;return p>0?this.reportMMData(15730,{load_begin_time:n,load_end_time:o,load_departure_time:a,load_cost_time:p,preload_video:c,preload_video_success:l,report_type:f}):Promise.resolve()}},{key:"reportRepeatClick",value:function(e){var t=e.slotId,n=e.costType,r=e.clkCnt,o=e.lastClkPeriod,i=e.retCode,a=e.costTime,s=e.pageStayTime,c=e.jsapiName;return this.reportMMData(15979,{slotid:t,costtype:n,clkcnt:r,currenttime:+new Date,lastclkperiod:o,retcode:i,costtime:a,pagestaytime:s,jsapiname:c})}},{key:"reportLandingTime",value:function(e){var t=e.slotId,n=e.costType,r=e.openTime,o=e.closeTime,i=e.stayTime,a=e.jsapiName,s=e.clickTime,c=e.clkCnt,u=e.retCode,l=e.costTime,d=e.actTypeInt,f=e.actTypeStr;return this.reportMMData(15980,{slotid:t,costtype:n,currenttime:s,opentime:r,closetime:o,staytime:i,jsapiname:a,clkcnt:c,retcode:u,costtime:l,act_type_int:d,act_type_str:f})}},{key:"reportVideoLastClick",value:function(e){var t=e.touchStartX,n=e.touchStartY,r=e.touchEndX,o=e.touchEndY,i=e.touchDuration,a=e.screenWidth,s=e.screenHeight;return this.reportMMData(17035,{touch_start_x:t,touch_start_y:n,touch_end_x:r,touch_end_y:o,touch_duration:i,screenwidth:a,screenheight:s})}},{key:"reportBannerLastClick",value:function(e){var t=e.lastClickArr,n=e.top,r=e.left,o=e.width,i=e.height,a=e.expMs,s=e.clickMs,c=e.bannerClkScreenX,u=e.bannerClkScreenY,l=e.lastShowTime;return this.reportMMData(18072,{last_clicks:t,banner_x:n,banner_y:r,banner_width:o,banner_height:i,exp_ms:a,clk_ms:s,banner_clk_screen_x:c,banner_clk_screen_y:u,last_show_time:l,slotid:za.POS_ID_MAP[this.adType]})}},{key:"reportRelationFetchDuration",value:function(e){var t=e.startTime,n=e.showTime,r=e.endTime;return this.reportMMData(19429,{start_time:t,show_time:n,end_time:r,show_delay_duration:0===n?0:r-n,fetch_duration:r-t})}},{key:"reportMMClickPos",value:function(e){var t,n=e.clickPos;return this.reportMMData(20480,{slotid:za.POS_ID_MAP[this.adType],costtype:(null===(t=this.data)||void 0===t?void 0:t.is_cpm)?1:2,currenttime:Date.now(),click_pos:n})}},{key:"reportADFunnelModel",value:function(e){var t=[e.adtype,e.stage].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:t,force:!0,immediately:!0})}},{key:"recordAnalyseBranchInfo",value:function(e){var t=e.branchId,n=e.branchDim;this.analyseBranchInfo={branchId:t,branchDim:n}}},{key:"resetAnalyseBranchInfo",value:function(){this.analyseBranchInfo=null}},{key:"reportAnalyseInfo",value:function(e){var t=za.EXPOSURE_TYPE_MAP[this.adType]||"viewable";if(Nc.isWaGame&&e===t){var n=this.analyseBranchInfo;n&&("release"!==Nc.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}}},{key:"reportRewardGaussVideo",value:function(e){var t=e.useGaussVideo,n=e.useExpandStyle,r=e.videoUrl,o=e.gaussVideoUrl,i=e.expUseGaussVideo,a=e.expUseExpandStyle;this.reportMMData(21644,{use_gauss_video:t?1:0,video_url:r,gauss_video_url:o,use_expand_style:n?1:0,exp_use_gauss_video:i,exp_use_expand_style:a})}}]),e}();js([is(),xs("design:type",Function),xs("design:paramtypes",[String]),xs("design:returntype",void 0)],Rs.prototype,"getTimePoint",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[String,Object]),xs("design:returntype",void 0)],Rs.prototype,"setTimePoint",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportTimePoints",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportCloseAction",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAdEntranceExposure",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportTouchClick",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportCancelRewardPlayablePage",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Number,Object]),xs("design:returntype",void 0)],Rs.prototype,"reportMMData",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAbnormalDetect",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAdIDKey",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Error]),xs("design:returntype",void 0)],Rs.prototype,"processStackMsg",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAdIDKeyErrorData",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object,Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAdMonitorData",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportEndPage",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportAdFeedbackData",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportBehaviorButton",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportVideoLoadTime",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportRepeatClick",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportLandingTime",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportVideoLastClick",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportBannerLastClick",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportRelationFetchDuration",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportMMClickPos",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportADFunnelModel",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"recordAnalyseBranchInfo",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[]),xs("design:returntype",void 0)],Rs.prototype,"resetAnalyseBranchInfo",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[String]),xs("design:returntype",void 0)],Rs.prototype,"reportAnalyseInfo",null),js([is(),xs("design:type",Function),xs("design:paramtypes",[Object]),xs("design:returntype",void 0)],Rs.prototype,"reportRewardGaussVideo",null),function(e){e[e.kUnknown=0]="kUnknown",e[e.kVideo=1]="kVideo",e[e.kArticle=2]="kArticle"}(cs||(cs={})),function(e){e[e.EXPOSE=1]="EXPOSE",e[e.CLICK=2]="CLICK"}(us||(us={})),function(e){e[e.kDeviceUnknow=0]="kDeviceUnknow",e[e.kDeviceAndroid=1]="kDeviceAndroid",e[e.kDeviceIphone=2]="kDeviceIphone",e[e.kDeviceIpad=3]="kDeviceIpad",e[e.kDeviceTv=4]="kDeviceTv"}(ls||(ls={})),function(e){e[e.AppServiceType_NORMAL=1]="AppServiceType_NORMAL",e[e.AppServiceType_GAME=2]="AppServiceType_GAME"}(ds||(ds={})),function(e){e[e.AllOS=0]="AllOS",e[e.Ios=1]="Ios",e[e.Android=2]="Android",e[e.Winphone=3]="Winphone",e[e.JAVA=4]="JAVA",e[e.OS_UNKNOWN=5]="OS_UNKNOWN",e[e.SYMBIAN=6]="SYMBIAN",e[e.S40asha=7]="S40asha",e[e.Webwx=8]="Webwx",e[e.Blackberry=9]="Blackberry",e[e.Windows=10]="Windows"}(fs||(fs={})),function(e){e[e.kUnknownNetwork=0]="kUnknownNetwork",e[e.kWIFI=1]="kWIFI",e[e.k2G=2]="k2G",e[e.k3G=3]="k3G",e[e.k4G=4]="k4G",e[e.k5G=5]="k5G",e[e.kAll=10]="kAll"}(ps||(ps={})),function(e){e[e.kUnknownCarrier=0]="kUnknownCarrier",e[e.kCMCC=1]="kCMCC",e[e.kCUCC=2]="kCUCC",e[e.kCTCC=3]="kCTCC"}(hs||(hs={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CMNET=1]="CMNET",e[e.CMWAP=2]="CMWAP",e[e.THREEGNET=3]="THREEGNET",e[e.THREEGWAP=4]="THREEGWAP",e[e.UNINET=5]="UNINET",e[e.UNIWAP=6]="UNIWAP",e[e.WIFI=7]="WIFI",e[e.CTWAP=8]="CTWAP",e[e.CTNET=9]="CTNET",e[e.THREEGNET_UNINET=10]="THREEGNET_UNINET",e[e.THREEGWAP_UNIWAP=11]="THREEGWAP_UNIWAP",e[e.CTNET_CTWAP=12]="CTNET_CTWAP",e[e.THREEGNET_THREEGWAP_UNINET_UNIWAP=13]="THREEGNET_THREEGWAP_UNINET_UNIWAP",e[e.WIMAX=14]="WIMAX"}(vs||(vs={})),function(e){e[e.Default_Source=0]="Default_Source",e[e.MediaPlatform=1]="MediaPlatform",e[e.WeApp=2]="WeApp",e[e.Moments=3]="Moments",e[e.BizTimeLine=4]="BizTimeLine"}(gs||(gs={})),function(e){e[e.JSON=0]="JSON",e[e.XML=1]="XML"}(_s||(_s={})),function(e){e[e.Unknown_sys=-1]="Unknown_sys",e[e.Windows=0]="Windows",e[e.Ios=1]="Ios",e[e.Android=2]="Android"}(bs||(bs={})),function(e){e[e.Unknown_type=0]="Unknown_type",e[e.Wifi=1]="Wifi",e[e.TwoG=2]="TwoG",e[e.TreeG=3]="TreeG",e[e.FourG=4]="FourG",e[e.FiveG=5]="FiveG",e[e.Ethernet=6]="Ethernet"}(ys||(ys={})),function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(ms||(ms={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(ws||(ws={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(Os||(Os={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(Ss||(Ss={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(Is||(Is={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(Es||(Es={})),function(e){e[e.PRODUCTTYPE_UNKNOWN=0]="PRODUCTTYPE_UNKNOWN",e[e.PRODUCTTYPE_OPEN_PLATFORM_APP_MOB=12]="PRODUCTTYPE_OPEN_PLATFORM_APP_MOB",e[e.PRODUCTTYPE_APPLE_APP_STORE=19]="PRODUCTTYPE_APPLE_APP_STORE",e[e.PRODUCTTYPE_WECHAT=23]="PRODUCTTYPE_WECHAT",e[e.PRODUCTTYPE_JD_URL=25]="PRODUCTTYPE_JD_URL",e[e.PRODUCTTYPE_DP_SHOP=26]="PRODUCTTYPE_DP_SHOP",e[e.PRODUCTTYPE_WECHAT_ARTICLE=29]="PRODUCTTYPE_WECHAT_ARTICLE",e[e.PRODUCTTYPE_WECHAT_SHOP=30]="PRODUCTTYPE_WECHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_URL=31]="PRODUCTTYPE_WECHAT_URL",e[e.PRODUCTTYPE_WECHAT_CARD=36]="PRODUCTTYPE_WECHAT_CARD",e[e.PRODUCTTYPE_WECHAT_LBS=37]="PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_WECHAT_APP=38]="PRODUCTTYPE_WECHAT_APP",e[e.GDT_PRODUCTTYPE_WECHAT_LBS=39]="GDT_PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_LEAD_AD=43]="PRODUCTTYPE_LEAD_AD",e[e.PRODUCTTYPE_WECHAT_MINI_GAME=46]="PRODUCTTYPE_WECHAT_MINI_GAME",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.PRODUCTTYPE_WECHAT_CHANNELS=51]="PRODUCTTYPE_WECHAT_CHANNELS",e[e.PRODUCTTYPE_MINI_PROGRAM_WECHAT=52]="PRODUCTTYPE_MINI_PROGRAM_WECHAT"}(Cs||(Cs={}));var Ms,Ns,Ls,Bs=n(73);!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(Ms||(Ms={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(Ns||(Ns={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(Ls||(Ls={}));var Fs,Ws={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},Us={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},Vs=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],Gs=[Ms.CRT_SIZE_WX_APPLICATION,Ms.CRT_SIZE_WX_APPLICATION_NEW,Ms.CRT_SIZE_WX_APPLICATION_X,Ms.CRT_SIZE_WX_APPLICATION_CARD,Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916,Ms.CRT_SIZE_TABLE_SCREEN_IMAGE,Ms.CRT_SIZE_REWARD_LANDINGPAGE,Ms.CRT_SIZE_INSERT_VIDEO,Ms.CRT_SIZE_MULTI_POS_NEW_PIC,Ms.CRT_SIZE_MULTI_POS_VEDIO,Ms.CRT_SIZE_MULTI_POS_GRID,Ms.CRT_SIZE_CPM_PIC,Ms.CRT_SIZE_COVER_AD,Ms.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,Ms.CRT_SIZE_VERTICAL_VIDEO_NEW_916];!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(Fs||(Fs={}));var Hs=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},zs=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qs=1,Ys=new Set,Ks=function(){function e(t){Object($.default)(this,e),this.adProxy=t,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=qs,qs+=1,Ys.add(this.adUnitId)}return Object(K.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"slotData",get:function(){return this.adProxy.getSlotData()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"reset",value:function(){this.lastVideoReportTime=0}},{key:"getLastClickTime",value:function(){return this.lastClickTime}},{key:"getLastAdReqTs",value:function(){return this.lastAdReqTs}},{key:"setLastExposureTime",value:function(e){this.lastExposureTime=e}},{key:"setLastClickTime",value:function(e){this.lastClickTime=e}},{key:"setLastAdReqTs",value:function(e){this.lastAdReqTs=e}},{key:"reportFollow",value:function(e){var t=this,n=e.result,r=5;return this.adProxy.isRewardedVideoAd()?r=6:[Ms.CRT_SIZE_TABLE_SCREEN_IMAGE,Ms.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(r=8),Object(Ga.operateWXData)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[n],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:r}}).catch((function(e){throw t.reportAdMonitorData(Bs.IDKEY.FOLLOW_REPORT_ERROR,e),e}))}},{key:"getExtraExpOrClkData",value:function(e){var t,n,r,o,i,a,s=this,c=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?c=e.multiList.map((function(e,t){return{idx:t,waid:s.datas[e].waid||""}})):this.data.waid&&(c=[{idx:0,waid:this.data.waid}]);var u=Object.assign(Object.assign({},Bc()),{weapp_enter_scene:(null===(t=null===At.default||void 0===At.default?void 0:At.default.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(c)}),l=Object.assign({},u),d=Object.assign({},u);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var f={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(n=e.multiList)||void 0===n||n.forEach((function(e){var t=s.datas[e];t.extBackComm&&f.viewid.push(t.extBackComm.viewid),f.s_pt.push(t.pt),f.s_aid.push(t.aid),f.s_trace_id.push(t.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:f.viewid}),s_trace_id:JSON.stringify(f.s_trace_id),s_aid:JSON.stringify(f.s_aid),s_pt:JSON.stringify(f.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var p=this.adProxy.adDataIndex;d.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(r=this.data.extBackComm)||void 0===r?void 0:r.viewid,box_index:p}}if("customAd"===this.adType){var h=null===(o=this.data.extBackComm)||void 0===o?void 0:o.sub_templ_id;h&&(l.sub_templ_id=h,d.sub_templ_id=h)}if("incentive-video"===this.adType&&this.data.isPlayable&&(l.is_playable=1,d.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){var v=e.videoData,g=v.currentTime,_=v.duration;(g||_)&&(d.video_play_time=g,d.video_duration=_)}if("grid"===this.adType)if("exposure"===e.reportType){var b={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(i=this.datas)||void 0===i||i.forEach((function(e){e.extBackComm&&b.viewid.push(e.extBackComm.viewid),b.s_pt.push(e.pt),b.s_aid.push(e.aid),b.s_trace_id.push(e.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:b.viewid}),s_trace_id:JSON.stringify(b.s_trace_id),s_aid:JSON.stringify(b.s_aid),s_pt:JSON.stringify(b.s_pt)}}else if("click"===e.reportType){var y=e.clickAdIndex||0;d.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(a=this.data.extBackComm)||void 0===a?void 0:a.viewid,box_index:y}}return{extExposureComm:l,extClickComm:d}}},{key:"reportExpOrClk",value:function(e){var t=this,n=3;if("exposure"===e.reportType?(n={showed:2,viewable:5,incentiveVideoCard:14}[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){var r=this.adProxy.adDataIndex;e.multiList.forEach((function(e){t.adProxy.setCurrentData(e),Object(R.invokeMethod)("adDataReport",{adInfo:t.adProxy.getTransmissionChainData({logtype:n})})})),this.adProxy.setCurrentData(r)}else Object(R.invokeMethod)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:n})});var o=this.getExtraExpOrClkData(e),i=o.extExposureComm,a=o.extClickComm,s=this.getExpOrClkCommonArgs(e),c="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(a)}:{exposure_type:za.REPORT_EXPOSURE_TYPE_MAP[e.exposureType],ext_exposure_comm:JSON.stringify(i)};return Object(Ga.operateWXData)({apiName:"advert_report",reqData:Object.assign(Object.assign(Object.assign({},s),c),{report_type:za.REPORT_TYPE_MAP[e.reportType],weapp_extra_data:JSON.stringify(s.weapp_extra_data),ad_group_id:s.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:s.weapp_gh_id})})}},{key:"getExpOrClkCommonArgs",value:function(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:za.POS_ID_MAP[this.adType],pos_type:za.AD_TYPE_MAP[this.adType],sdk_version:Nc.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:Nc.startTime.valueOf(),wegame_enter_ts:Lc.enterForegroundTime.valueOf(),wegame_user_duration:Lc.gameDuration+(Date.now()-Lc.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:Object.assign(Object.assign({},this.getWeappExtraData()),e.weappExtraData||{})}}},{key:"reportClick",value:function(e){var t=this;return this.lastClickTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"click"},e)).catch((function(e){throw t.reportAdMonitorData(Bs.IDKEY.CLICK_REPORT_ERROR,e),e}))}},{key:"reportExposure",value:function(e){var t=this;return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"exposure"},e)).catch((function(e){throw t.reportAdMonitorData(Bs.IDKEY.EXPOSURE_REPORT_ERROR,e),e}))}},{key:"reportFlooringPage",value:function(e,t){var n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Nc.gameAppId,orig_weapp_id:this.pluginAppid?Nc.gameAppId:""},r=null==t?void 0:t.map((function(e){return Object.assign(Object.assign({},n),e)})),o={};return 1===e?o.rewared_video_ending_page_a=r:2===e&&(o.rewared_video_ending_page_b=r),Object(Ga.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(o)}})}},{key:"reportAntifraud",value:function(e){var t=Object.assign(Object.assign({},e),{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:Nc.gameAppId,orig_weapp_id:this.pluginAppid?Nc.gameAppId:"",network_type:Nc.adNetworkType,wechat_version:Nc.wechatVersion,platform:Nc.platform,system_version:Nc.systemVersion,device_orientation:Nc.deviceOrientation,wxapp_lib_version:Nc.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:Nc.brand||"",machine_type:Nc.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],Object(Ga.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}},{key:"reportVideo",value:function(e){var t=e.playType,n=e.conditionType,r=e.muted,o=e.playDuration,i=e.videoDuration,a=e.rewardedTime,s=e.isRewarded,c=Object(Ga.operateWXData)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[t],play_duration:o-this.lastVideoReportTime,video_duration:i,auto_play:!0,muted:r,rewarded_time:a&&Math.min(a,i),is_rewarded:s},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[n]}});return this.lastVideoReportTime=o,c}},{key:"getWxaReportDetail",value:function(e){var t=e.top,n=void 0===t?0:t,r=e.left,o=void 0===r?0:r;return{page_x:o||0,page_y:n||0,screen_x:o||0,screen_y:n||0,ad_number:qs-1,ad_unit_number:Ys.size,ad_index:this.index,page_enter_time:Lc.enterForegroundTime.valueOf(),phone_screen_width:Nc.screenWidth,phone_screen_height:Nc.screenHeight}}},{key:"getWeappExtraData",value:function(){var e,t;return{weixin_version:Nc.wechatVersion,os_version:Nc.systemVersion,machine_brand:Nc.brand||"",machine_type:Nc.model,network_type:Nc.adNetworkType,start_ts:Nc.startTime.valueOf(),enter_ts:Lc.enterForegroundTime.valueOf(),user_duration:Lc.gameDuration+(Date.now()-Lc.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=At.default.host)||void 0===e?void 0:e.env,app_appid:null===(t=At.default.host)||void 0===t?void 0:t.appId}}},{key:"composeExposureCommonInfo",value:function(e){var t,n=e.top,r=void 0===n?0:n,o=e.left,i=void 0===o?0:o,a=e.width,s=void 0===a?0:a,c=e.height,u=void 0===c?0:c,l=e.adType,d=void 0===l?"incentive-video":l;try{t=this.data.weapp_info.original_id}catch(e){}var f=Object.assign({},Bc()),p=this.getWeappExtraData(),h=this.getWxaReportDetail({top:r,left:i}),v={report_type:0,pos_id:za.POS_ID_MAP[this.adType],sdk_version:Nc.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:t,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:s,ad_h:u,from_game:1,from_h5:0,wegame_start_ts:Nc.startTime.valueOf(),wegame_enter_ts:Lc.enterForegroundTime.valueOf(),wegame_user_duration:Lc.gameDuration+(Date.now()-Lc.enterForegroundTime.getTime()),pos_type:za.AD_TYPE_MAP[d],wxa_report_detail:h,weapp_extra_data:JSON.stringify(p),ext_exposure_comm:JSON.stringify(f)};return JSON.stringify(v)}},{key:"reportInstallFollow",value:function(e){var t=this.data.condition;t&&1===t.widget_gray_report_install_follow&&Object(Ga.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}},{key:"reportAnalyseDebugInfo",value:function(e){var t=this,n=za.ANALYSE_INFO_DEBUG_TYPE[this.adType];return n||this.reportAdMonitorData(Bs.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,new Error("invalid reportType "+this.adType)),Object(Ga.operateWXData)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:n}]}}).catch((function(e){t.reportAdMonitorData(Bs.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,e)}))}}]),e}();function Js(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}Hs([is(),zs("design:type",Function),zs("design:paramtypes",[]),zs("design:returntype",void 0)],Ks.prototype,"getLastClickTime",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[]),zs("design:returntype",void 0)],Ks.prototype,"getLastAdReqTs",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Number]),zs("design:returntype",void 0)],Ks.prototype,"setLastExposureTime",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Number]),zs("design:returntype",void 0)],Ks.prototype,"setLastClickTime",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Number]),zs("design:returntype",void 0)],Ks.prototype,"setLastAdReqTs",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportFollow",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"getExpOrClkCommonArgs",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportClick",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportExposure",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object,Array]),zs("design:returntype",void 0)],Ks.prototype,"reportFlooringPage",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportAntifraud",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportVideo",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",Object)],Ks.prototype,"getWxaReportDetail",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"composeExposureCommonInfo",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportInstallFollow",null),Hs([is(),zs("design:type",Function),zs("design:paramtypes",[Object]),zs("design:returntype",void 0)],Ks.prototype,"reportAnalyseDebugInfo",null);var Xs=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},$s=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Zs=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Qs=function(){function e(t){Object($.default)(this,e),this.adProxy=t,this.isAppInstalled=!1}return Object(K.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"isValidCondition",get:function(){return this.adProxy.isValidCondition}},{key:"getFullRl",value:function(){var e=this.data.rl;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+="?viewid="+this.data.extBackComm.viewid:e+="&viewid="+this.data.extBackComm.viewid)}catch(e){}return e}},{key:"getFollowPageUrl",value:function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:Nc.isWaGame?147:140};return Object(Wa.addUrlParam)(t,n)}},{key:"isPrefetch",value:function(e){var t,n,r,o,i,a,s,c,u={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(o=null===(r=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===r?void 0:r.flooring_page)||void 0===o?void 0:o.page_url}[e],l={url:this.data.dest_type===Ss.DEST_TYPE_OUTER,jump_url:(null===(i=this.data.button_action)||void 0===i?void 0:i.jump_type)===Ss.DEST_TYPE_OUTER,playable_url:!0}[e];return u&&l&&Boolean(null===(c=null===(s=null===(a=this.data)||void 0===a?void 0:a.extBackComm)||void 0===s?void 0:s.material_handler_Info)||void 0===c?void 0:c.h5_preload_info[e])}},{key:"getTransmissionChainData",value:function(e){var t=e.logtype,n=void 0===t?3:t,r={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:n};return Object.keys(r).map((function(e){return e+"="+r[e]})).join("&")}},{key:"setAppInstallState",value:function(e){this.isAppInstalled=e}},{key:"land",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isButton,r=void 0!==n&&n;return Zs(this,void 0,void 0,Lt.a.mark((function t(){var n,o,i,a,s,c,u,l,d,f,p,h,v,g,_,b,y=this;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.data,o=n.dest_type,i=n.product_type,a=n.url,!r){t.next=43;break}if(this.isPrefetch("jump_url")&&this.adProxy.reportAdMonitorData(Bs.IDKEY.H5_PRELOAD_BUTTON_CLICKED),s=this.data.button_action,c=s.jump_type,u=s.jump_url,i!==Ns.IOS){t.next=6;break}return t.abrupt("return",this.openAppStore());case 6:if(i!==Ns.WE_CHAT){t.next=40;break}if(l=this.data.biz_info,d=l.user_name,!l.is_subscribed){t.next=12;break}if(10!==c){t.next=11;break}return t.abrupt("return",this.landPage(c,a));case 11:return t.abrupt("return",Object(Ga.openUrl)({url:this.getFollowPageUrl(this.data,u),adInfo:this.getTransmissionChainData({logtype:3})}));case 12:return t.prev=12,t.next=15,this.adProxy.addContact({username:d,isWaGame:Nc.isWaGame});case 15:f=t.sent,p=this.data,h=p.ext_info,v=p.uxinfo;try{g=JSON.parse(h)}catch(e){}if(!(/ok|added/.test(f.errMsg)&&g&&g.guide_group_id&&v)){t.next=29;break}return t.prev=20,t.next=23,Xa({guide_group_id:g.guide_group_id,uxinfo:v});case 23:this.adProxy.reportAdIDKey({key:Bs.IDKEY.BIND_GUIDE_SUCCESS}),t.next=29;break;case 26:t.prev=26,t.t0=t.catch(20),this.reportAdMonitorData(Bs.IDKEY.BIND_GUIDE_ERROR,t.t0);case 29:return t.abrupt("return",f);case 32:if(t.prev=32,t.t1=t.catch(12),!/cancel/.test(t.t1.errMsg)){t.next=36;break}return t.abrupt("return",t.t1);case 36:throw this.reportAdMonitorData(Bs.IDKEY.ADD_CONTACT_ERROR,t.t1),t.t1;case 38:t.next=41;break;case 40:return t.abrupt("return",this.landPage(c,u));case 41:t.next=53;break;case 43:if(this.isPrefetch("url")&&this.adProxy.reportAdMonitorData(Bs.IDKEY.H5_PRELOAD_CARD_CLICKED),!([12,19].indexOf(i)>-1)){t.next=52;break}if(_=this.data.app_info.url_scheme,Nc.isIOS&&(b=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001})),!(_&&_.trim().length>0)){t.next=51;break}if(!Nc.isAndroid||this.isAppInstalled){t.next=50;break}return t.abrupt("return",this.landPage(o,a));case 50:return t.abrupt("return",this.adProxy.launchApplication({schemeUrl:_,isIosDirect:Nc.isIOS,appInfo:this.data.app_info,extraData:b}).catch((function(){return y.landPage(o,a)})));case 51:case 52:return t.abrupt("return",this.landPage(o,a));case 53:case"end":return t.stop()}}),t,this,[[12,32],[20,26]])})))}},{key:"landPage",value:function(e,t){var n,r=this;if(e===Ss.DEST_TYPE_APPDETAIL&&Nc.isIOS){var o=this.data.app_info.appinfo_url,i=JSON.stringify({aid:this.data.aid,ad_uid:null===(n=this.data.extBackComm)||void 0===n?void 0:n.uid,scene_id:4001});return this.adProxy.launchApplication({schemeUrl:o,extraData:i}).catch((function(){return Object(Ga.openUrl)({url:o,adInfo:r.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Bs.IDKEY.OPEN_URL_ERROR,e),e}))}))}if(e===Ss.DEST_TYPE_BIZ)return Object(Ga.openUrl)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Bs.IDKEY.OPEN_URL_ERROR,e),e}));if(e===Ss.DEST_TYPE_WECHAT_APPLET){var a=this.data,s=a.weapp_info.appid,c=a.traceid,u=a.aid,l=a.uxinfo;return Object(Ga.navigateToMiniProgram)({appId:s,path:t,traceid:c,aid:u,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:l}).catch((function(e){throw r.reportAdMonitorData(Bs.IDKEY.OPEN_WXAPP_ERROR,e),e}))}if(e===Ss.DEST_TYPE_CANVAS){var d=this.data,f=d.canvas_info,p=d.pos_type;return Object(Ga.openADCanvas)({canvasInfo:f,posType:p}).catch((function(e){throw r.reportAdMonitorData(Bs.IDKEY.OPEN_CANVAS_ERROR,e),e}))}if(10===e){var h=this.data.biz_info.user_name;return this.adProxy.openProfile({username:h}).catch((function(e){throw e}))}return e===Ss.DEST_TYPE_CHANNELS?this.jumpChannels("activity"):e===Ss.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live"):e===Ss.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile"):Object(Ga.openUrl)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((function(e){throw r.reportAdMonitorData(Bs.IDKEY.OPEN_URL_ERROR,e),e}))}},{key:"jumpChannels",value:function(e){var t;return Zs(this,void 0,void 0,Lt.a.mark((function n(){var r,o,i,a,s,c,u,l,d,f;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null===(t=this.data)||void 0===t?void 0:t.extBackComm.channels_info,o=this.data,i=o.crt_size,a=o.apurl,s=o.rl,c=o.uxinfo,u={feedId:r.id,nonceId:r.nonce_id,finderUserName:r.username},l={activity:Bs.IDKEY.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:Bs.IDKEY.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:Bs.IDKEY.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],d={activity:Bs.IDKEY.OPEN_CHANNELS_ACTIVITY_FAILED,live:Bs.IDKEY.OPEN_CHANNELS_LIVE_FAILED,userProfile:Bs.IDKEY.OPEN_CHANNELS_USER_PROFILE_FAILED}[e],!r){n.next=38;break}if("activity"!==e||i!==Ms.CRT_SIZE_REWARD_LANDINGPAGE){n.next=18;break}return n.prev=7,n.next=10,this.adProxy.openChannelsRewardedVideoAd(Object.assign(Object.assign({},u),{expReportLink:a,clkReportLink:s,uxInfo:c||"",reportInfo:this.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:Nc.screenWidth,height:Nc.screenHeight}),clickPosMap:{follow:Fs.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:Fs.MMOCAD_CLICKPOS_BIZ_LIKE,comment:Fs.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:Fs.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:Fs.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:Fs.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:this.getFeedbackUrl(Nc.isWaGame?1003:1005)}));case 10:return f=n.sent,this.reportAdMonitorData(l),n.abrupt("return",f);case 15:n.prev=15,n.t0=n.catch(7),this.reportAdMonitorData(d,n.t0);case 18:n.prev=18,n.t1=e,n.next="activity"===n.t1?22:"live"===n.t1?25:"userProfile"===n.t1?28:31;break;case 22:return n.next=24,this.adProxy.openChannelsActivity(u);case 24:return n.abrupt("break",31);case 25:return n.next=27,this.adProxy.openChannelsLive(u);case 27:return n.abrupt("break",31);case 28:return n.next=30,this.adProxy.openChannelsUserProfile(u);case 30:return n.abrupt("break",31);case 31:return this.reportAdMonitorData(l),n.abrupt("return");case 35:n.prev=35,n.t2=n.catch(18),this.reportAdMonitorData(d,n.t2);case 38:return this.reportAdMonitorData(d,new Error("channelsInfo is empty")),n.abrupt("return");case 40:case"end":return n.stop()}}),n,this,[[7,15],[18,35]])})))}},{key:"openAppStore",value:function(){var e,t=this,n=this.data.app_info,r=n.appinfo_url,o=n.url_scheme,i=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001});return o&&o.trim().length>0?this.adProxy.launchApplication({schemeUrl:o,isIosDirect:!0,appInfo:this.data.app_info,extraData:i}).catch((function(){return t.adProxy.launchApplication({schemeUrl:r,extraData:i}).catch((function(){return Object(Ga.openUrl)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Bs.IDKEY.OPEN_URL_ERROR,e),e}))}))})):this.adProxy.launchApplication({schemeUrl:r,extraData:i}).catch((function(){return Object(Ga.openUrl)({url:r,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Bs.IDKEY.OPEN_URL_ERROR,e),e}))}))}},{key:"preloadLanding",value:function(){var e=this;try{if(6===this.data.dest_type){var t=[],n=[];if("grid"===this.adType?this.datas.forEach((function(e){var r;(null===(r=e.weapp_info)||void 0===r?void 0:r.appid)&&(t.push(e.weapp_info.appid),n.push(Js(e)))})):(t=[this.data.weapp_info.appid],n.push(Js(this.data))),Object(R.invokeMethod)("batchGetContact",{appIds:t}),Nc.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&Object(R.invokeMethod)("batchPreloadMiniProgram",{openParams:{visitScene:Lc.currentScene,businessScene:1,innerScene:1095},preloadList:n,success:function(t){e.reportAdMonitorData(Bs.IDKEY.BATCHLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Bs.IDKEY.BATCHLOAD_ERROR,t)}});else if(Nc.isIOS){var r="app";this.data.product_type===Ns.MINI_GAME&&(r="game"),this.isValidCondition("widget_gray_preload_env")&&(Nc.isAndroid||"app"===r)&&Object(R.invokeMethod)("preloadMiniProgramEnv",{type:r,success:function(t){e.reportAdMonitorData(Bs.IDKEY.PRELOAD_MINIENV_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Bs.IDKEY.PRELOAD_MINIENV_ERROR,t)}}),this.isValidCondition("widget_gray_predownload_app")&&Object(R.invokeMethod)("predownloadMiniProgramPackage",{username:this.data.weapp_info.original_id+"@app",path:this.data.url,scene:1,success:function(t){e.reportAdMonitorData(Bs.IDKEY.PREDOWNLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Bs.IDKEY.PREDOWNLOAD_ERROR,t)}})}}}catch(e){}}},{key:"checkFollow",value:function(e){return Zs(this,void 0,void 0,Lt.a.mark((function t(){var n,r;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Ga.operateWXData)({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});case 2:return n=t.sent,r=n.rawData,t.abrupt("return",1===JSON.parse(r).is_subscribed);case 5:case"end":return t.stop()}}),t)})))}},{key:"getFeedbackUrl",value:function(e){var t=this.data.material_id_list||[],n=encodeURIComponent("["+t.toString()+"]")||"",r=Object(Wa.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:Nc.model,publisher_appid:Nc.gameAppId});if("grid"===this.adType){var o=[],i=[],a=[];this.datas.forEach((function(e){o.push(e.traceid),i.push(e.material_id_list||[]),a.push(e.aid)}));var s={traceid:JSON.stringify(o),source:e,aid:JSON.stringify(a),material_id:JSON.stringify(i),machine_type:Nc.model,publisher_appid:Nc.gameAppId};r=Object(Wa.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",s)}return r}},{key:"openFeedbackUrl",value:function(e){var t=this.getFeedbackUrl(e);return Object(Ga.openUrl)({url:t})}},{key:"checkPreloadH5Page",value:function(){var e,t,n,r,o;return Zs(this,void 0,void 0,Lt.a.mark((function i(){var a,s,c,u,l;return Lt.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=new Set,s=this.data.url,c=null===(e=this.data.button_action)||void 0===e?void 0:e.jump_url,u=null===(o=null===(r=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===r?void 0:r.flooring_page)||void 0===o?void 0:o.page_url,this.isPrefetch("url")&&("1"!==Object(Wa.getQueryString)(s).prefetch&&(s=Object(Wa.addUrlParam)(s,{prefetch:1}),this.data.url=s),a.add(s)),this.isPrefetch("jump_url")&&("1"!==Object(Wa.getQueryString)(c).prefetch&&(c=Object(Wa.addUrlParam)(c,{prefetch:1}),this.data.button_action.jump_url=c),a.add(c)),this.isPrefetch("playable_url")&&("1"!==Object(Wa.getQueryString)(u).prefetch&&(u=Object(Wa.addUrlParam)(u,{prefetch:1}),this.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=u),a.add(u)),!(l=Object(Y.default)(a).map((function(e){return{url:e,bizScene:20002}}))).length){i.next=18;break}return i.prev=9,i.next=12,this.adProxy.preloadH5Page({urlList:l});case 12:this.reportAdMonitorData(Bs.IDKEY.H5_PRELOAD_SUCCESS),i.next=18;break;case 15:i.prev=15,i.t0=i.catch(9),this.reportAdMonitorData(Bs.IDKEY.H5_PRELOAD_FAILED,i.t0);case 18:case"end":return i.stop()}}),i,this,[[9,15]])})))}}]),e}();Xs([is(),$s("design:type",Function),$s("design:paramtypes",[String]),$s("design:returntype",void 0)],Qs.prototype,"isPrefetch",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Object]),$s("design:returntype",void 0)],Qs.prototype,"getTransmissionChainData",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Boolean]),$s("design:returntype",void 0)],Qs.prototype,"setAppInstallState",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Object]),$s("design:returntype",Promise)],Qs.prototype,"land",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Number,String]),$s("design:returntype",void 0)],Qs.prototype,"landPage",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[]),$s("design:returntype",void 0)],Qs.prototype,"openAppStore",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[]),$s("design:returntype",void 0)],Qs.prototype,"preloadLanding",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Number]),$s("design:returntype",Promise)],Qs.prototype,"checkFollow",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Number]),$s("design:returntype",void 0)],Qs.prototype,"getFeedbackUrl",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[Number]),$s("design:returntype",void 0)],Qs.prototype,"openFeedbackUrl",null),Xs([is(),$s("design:type",Function),$s("design:paramtypes",[]),$s("design:returntype",Promise)],Qs.prototype,"checkPreloadH5Page",null);var ec=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},tc=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},nc=__safeway__.apiSign.makeApiSign,rc=function(e){return function(t){return new Promise((function(n,r){e(Object.assign({},t,{success:n,fail:r}))}))}},oc=function(e){var t=e.username,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("profile",{username:t,scene:75,success:n,fail:r,complete:o})},ic=function(e){var t=e.username,n=e.isWaGame,r=e.success,o=e.fail,i=e.complete;Object(R.invokeMethod)("private_addContact",{username:t,scene:n?146:139,webtype:1,success:r,fail:o,complete:i})},ac=function(e){var t=e.schemeUrl,n=e.isIosDirect,r=e.appInfo,o=e.extraData,i=e.success,a=e.fail,s=e.complete,c={};n&&(c.appId=r.app_id,c.installSchemeUrl=r.appinfo_url,c.installAction=0),o&&(c.extraData=o),Object(R.invokeMethod)("launchApplication",Object.assign(c,{schemeUrl:t,operateDirectly:1,success:i,fail:a,complete:s}))},sc=function(e){var t=e.appUrl,n=e.success,r=e.fail,o=e.complete,i=nc("downloadAppInternal",{appUrl:t,operateDirectly:1,success:n,fail:r,complete:o});Object(R.invokeMethod)("downloadAppInternal",i)},cc=function(e){var t=e.packageName,n=e.success,r=e.fail,o=e.complete,i=nc("getInstallState",{packageName:t,permissionBytes:[1,1,1],success:n,fail:r,complete:o});Object(R.invokeMethod)("getInstallState",i)},uc=function(e){var t=e.downloadId,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("queryDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:o})},lc=function(e){var t=e.downloadId,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("pauseDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:o})},dc=function(e){var t=e.downloadId,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("resumeDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:o})},fc=function(e){var t=e.downloadId,n=e.success,r=e.fail,o=e.complete,i=nc("installDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:r,complete:o});Object(R.invokeMethod)("installDownloadTask",i)},pc=function(e){var t=e.isHide,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:o})},hc=function(e){var t=e.isHide,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("private_setNavigationBarRightButton",{hide:t,success:n,fail:r,complete:o})},vc=function(e){var t=e.resources,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("loadVideoResource",{resources:t,success:n,fail:r,complete:o})},gc=function(e){var t=e.orientation,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("private_setPageOrientation",{orientation:t,success:n,fail:r,complete:o})},_c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(R.invokeMethod)("hideVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},bc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(R.invokeMethod)("showVirtualBottomNavigationBar",{success:t,fail:n,complete:r})},yc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(R.invokeMethod)("showStatusBar",{success:t,fail:n,complete:r})},mc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete;Object(R.invokeMethod)("hideStatusBar",{success:t,fail:n,complete:r})},wc=function(e){var t=e.success,n=e.fail,r=e.complete,o=e.feedId,i=e.nonceId,a=e.finderUserName;Object(R.invokeMethod)("openChannelsActivity",{feedId:o,nonceId:i,finderUserName:a,success:t,fail:n,complete:r})},Oc=function(e){var t=e.success,n=e.fail,r=e.complete,o=e.feedId,i=e.nonceId,a=e.finderUserName;Object(R.invokeMethod)("openChannelsLive",{feedId:o,nonceId:i,finderUserName:a,success:t,fail:n,complete:r})},Sc=function(e){var t=e.success,n=e.fail,r=e.complete,o=e.finderUserName;Object(R.invokeMethod)("openChannelsUserProfile",{finderUserName:o,success:t,fail:n,complete:r})},Ic=function(e){var t=e.success,n=e.fail,r=e.complete,o=e.feedId,i=e.nonceId,a=e.finderUserName,s=e.uxInfo,c=e.expReportLink,u=e.clkReportLink,l=e.reportInfo,d=e.clickPosMap,f=e.feedbackUrl;Object(R.invokeMethod)("openChannelsRewardedVideoAd",{feedId:o,nonceId:i,finderUserName:a,uxInfo:s,expReportLink:c,clkReportLink:u,reportInfo:l,clickPosMap:d,feedbackUrl:f,success:t,fail:n,complete:r})},Ec=function(e){var t=e.mixWithOther,n=void 0===t||t,r=e.obeyMuteSwitch,o=void 0===r||r,i=e.success,a=e.fail,s=e.complete;Object(R.invokeMethod)("setInnerAudioOption",{mixWithOther:n,obeyMuteSwitch:o,success:i,fail:a,complete:s})},Cc=function(e){var t=e.urlList,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("private_onWebPageUrlExposed",{urlList:t,success:n,fail:r,complete:o})},Tc=rc((function(e){var t=e.taskName,n=e.taskUrl,r=e.fileMd5,o=e.extInfo,i=e.success,a=e.fail,s=e.complete,c=nc("addDownloadTaskStraight",{taskName:t,taskUrl:n,fileMd5:r,extInfo:o,permissionBytes:[1,1,1],success:i,fail:a,complete:s});Object(R.invokeMethod)("addDownloadTaskStraight",c)})),kc=function e(){var t=this;Object($.default)(this,e),this.setNavigationBarRightButton=rc(pc),this.setMiniProgramNavigationBarRightButton=rc(hc),this.hideVirtualBottomNavigationBar=rc(_c),this.showVirtualBottomNavigationBar=rc(bc),this.showStatusBar=rc(yc),this.hideStatusBar=rc(mc),this.openProfile=rc(oc),this.addContact=rc(ic),this.downloadAppInternal=rc(sc),this.openChannelsActivity=rc(wc),this.openChannelsRewardedVideoAd=rc(Ic),this.openChannelsLive=rc(Oc),this.openChannelsUserProfile=rc(Sc),this.getNetworkType=rc(No.getNetworkType),this.preloadH5Page=rc(Cc),this.innerPreloadVideo=rc(vc),this.preloadVideo=function(e){return t.innerPreloadVideo({resources:e})},this.innerLaunchApplication=rc(ac),this.launchApplication=function(e){var n="string"==typeof e?{schemeUrl:e}:e;return t.innerLaunchApplication(n)},this.innerGetInstallState=rc(cc),this.getInstallState=function(e){return t.innerGetInstallState({packageName:e})},this.innerQueryDownloadTask=rc(uc),this.queryDownloadTask=function(e){return t.innerQueryDownloadTask({downloadId:e})},this.innerPauseDownloadTask=rc(lc),this.pauseDownloadTask=function(e){return t.innerPauseDownloadTask({downloadId:e})},this.innerResumeDownloadTask=rc(dc),this.resumeDownloadTask=function(e){return t.innerResumeDownloadTask({downloadId:e})},this.innerInstallDownloadTask=rc(fc),this.installDownloadTask=function(e){return t.innerInstallDownloadTask({downloadId:e})},this.innerSetPageOrientation=rc(gc),this.setPageOrientation=function(e){return t.innerSetPageOrientation({orientation:e})},this.innerSetInnerAudioOption=rc(Ec),this.setInnerAudioOption=function(e,n){return t.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:n})}};function Ac(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pc(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Pc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ec([is(),tc("design:type",Object)],kc.prototype,"setNavigationBarRightButton",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"setMiniProgramNavigationBarRightButton",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"hideVirtualBottomNavigationBar",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"showVirtualBottomNavigationBar",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"showStatusBar",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"hideStatusBar",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"openProfile",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"addContact",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"downloadAppInternal",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"openChannelsActivity",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"openChannelsRewardedVideoAd",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"openChannelsLive",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"openChannelsUserProfile",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"getNetworkType",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"preloadH5Page",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"preloadVideo",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"launchApplication",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"getInstallState",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"queryDownloadTask",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"pauseDownloadTask",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"resumeDownloadTask",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"installDownloadTask",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"setPageOrientation",void 0),ec([is(),tc("design:type",Object)],kc.prototype,"setInnerAudioOption",void 0);var Dc,jc=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},xc=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(x.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Rc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Mc=function(){function e(t){var n=this,r=t.adUnitId,o=t.adType,i=t.pluginAppid,a=void 0===i?"":i;Object($.default)(this,e),this.slotData={},this.lastAdRetCode=0,this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=Lc.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new kc,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==o&&Uc(),this.adUnitId=r,this.adType=o,this.pluginAppid=Nc.isWaGame?"":a,this.mmReporter=new Rs(this),this.cgiReporter=new Ks(this),this.lander=new Qs(this),this.bindProxyMethods(),this.setTimePoint("p1"),Object(ns.onWxAdUserCaptureScreen)((function(e){if(e.webviewId===Lc.currentWebviewId&&n.data&&n.isViewable){var t=n.data.uxinfo;Object($a.reportUserCaptureScreen)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:4,uxinfo:t,url:e.path?e.path:"index.html"})}}))}return Object(K.default)(e,[{key:"bindProxyMethods",value:function(){for(var e=this,t=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander],n=function(){var t,n=o[r],i=Ac(Object(Wa.getMembers)(n));try{var a=function(){var r,o,i,a=t.value;o=a,(null===(i=(r=n)&&r[os])||void 0===i?void 0:i.has(o))&&(e[a]=function(){return n[a].apply(n,arguments)})};for(i.s();!(t=i.n()).done;)a()}catch(e){i.e(e)}finally{i.f()}},r=0,o=t;r<o.length;r++)n()}},{key:"isLimitRequest",value:function(){return 0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}},{key:"convertTestAdData",value:function(e){var t,n;try{var r=Object(Wa.cloneDeep)(e),o=JSON.parse(r.crt_exp_info);if(r.crtExpInfo=o,1002===o.exp_type){if(null===(t=r.wx_game_video)||void 0===t?void 0:t.wxgame_video_card){var i=JSON.parse(o.exp_data);r.wx_game_video.wxgame_video_card.flooring_page=i}}else if(1001===o.exp_type){r.profile_exp=!0;var a=o.exp_data&&"string"==typeof o.exp_data?JSON.parse(o.exp_data):o.exp_data;r.dest_type=a.dest_type;var s={};if(r.button_action)try{s=JSON.parse(e.button_action)}catch(e){}s.jump_type=a.jump_type,r.button_action=JSON.stringify(s)}else if(105===o.exp_type)r.ad_style_data=o.exp_data;else if(106===o.exp_type){var c=o.exp_data&&"string"==typeof o.exp_data?JSON.parse(o.exp_data):o.exp_data;Object(Wa.mergeDeep)(r,c),r.common_exp=!0}else if(o.exp_type&&[108,109,2001].includes(o.exp_type))r.ad_dynamic_list=o.exp_data;else if(o.crt_size&&[Ms.CRT_SIZE_WX_APPLICATION_NEW,Ms.CRT_SIZE_WX_APPLICATION_X].includes(o.crt_size)){if(r.crt_size=o.crt_size,r.ad_width=o.width,r.material_width=o.width,r.ad_height=o.height,r.material_height=o.height,r.image_url=o.image_url,o.dest_url&&r.url&&[1,3,6].includes(r.dest_type)){var u=Object(Wa.getQueryString)(r.url),l={};u.weixinadkey&&(l.weixinadkey=u.weixinadkey),u.ticket&&(l.ticket=u.ticket),u.gdt_vid&&(l.gdt_vid=u.gdt_vid),u.weixinadinfo&&(l.weixinadinfo=u.weixinadinfo),r.url=Object(Wa.addUrlParam)(o.dest_url,l)}r.watermark_text=o.watermark||""}else o.landpage_type&&(null===(n=r.wx_game_video)||void 0===n?void 0:n.wxgame_video_card)&&(r.wx_game_video.wxgame_video_card.flooring_page=o);return r}catch(t){return e}}},{key:"getFetchArgs",value:function(e){var t,n,r=e.isAdInterval,o={scene_type:Lc.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:Nc.gameAppId,orig_weapp_id:this.pluginAppid?Nc.gameAppId:"",weapp_path:Lc.weappPath,pos_id:"",network_type:Nc.adNetworkType,orientation:{landscape:1,portrait:2}[Nc.deviceOrientation],sdk_version:Nc.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:Nc.startTime.valueOf(),wxa_enter_ts:Lc.enterForegroundTime.valueOf(),weixin_version:Nc.wechatVersion,os_version:Nc.systemVersion,machine_type:Nc.model,is_ad_interval:!!r,env:null===(t=At.default.host)||void 0===t?void 0:t.env,app_appid:null===(n=At.default.host)||void 0===n?void 0:n.appId})};o.pos_id=za.POS_ID_MAP[this.adType];var i={};return"grid"===this.adType?i.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(i.splash_ad={count:String(5)},delete o.appid):"customAd"===this.adType&&(i={is_adunit_tmpl:!0}),Object(Lo.isIn3rdApp)()&&(i.in_3rd_app=1),o.ext_slot_custom_comm=JSON.stringify(i),o}},{key:"validateFetchEnv",value:function(){if(Object(Lo.isIn3rdApp)()&&this.reportAdMonitorData(Bs.IDKEY.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}},{key:"validateFetchRes",value:function(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}},{key:"validateCrtSize",value:function(e){var t=e.pt,n=e.crt_size,r=Vs.includes(t),o=Gs.includes(n);if(!r&&!o){if(n&&!o)throw{errMsg:"unexpected advertisement crt_size "+n};throw{errMsg:"unexpected advertisement type "+t}}}},{key:"handleAdDataDone",value:function(){this.reportAdMonitorData(Bs.IDKEY.AD_FETCH_SUCCESS)}},{key:"handleAdDataError",value:function(e){this.reportAdMonitorData(Bs.IDKEY.AD_FETCH_SUCCESS,e)}},{key:"handleWaidForList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};if(t.length<1)return Promise.resolve(n);var r=[];return null==t||t.forEach((function(e){r.push(ja(e.apkName).then((function(t){return Object.assign(Object.assign({},t),{aid:e.aid})})))})),Promise.race([Promise.all(r).then((function(e){return e.forEach((function(e){var t=e.waid,r=e.aid,o=void 0===r?"":r;t&&o&&(n[o]=t)})),n})).catch((function(t){return e.reportAdMonitorData(Bs.IDKEY.READ_ADINFOS_ERROR,t),n})),Object(Ha.timeout)(2e3).then((function(){return n}))])}},{key:"handleBulkSaveMaterials",value:function(e){var t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?Object(rs.bulkSaveMaterials)(t):Promise.resolve()}},{key:"getSplashAdMaterialList",value:function(e){var t,n,r=[],o=(null==e?void 0:e.crtInfo[0])||{},i=e.rerankingExtInfo.material_hash||"",a=(null==o?void 0:o.image_url)||"",s=(null===(t=null==o?void 0:o.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null===(n=null==o?void 0:o.card_info)||void 0===n?void 0:n.material_blur_url)||"",u=za.WX_AD_PATH+"/"+e.aid+"_"+i+".png";if(i&&r.push({url:a,fileName:e.aid+"_"+i+".png",filePath:u}),s){var l=za.WX_AD_PATH+"/"+e.aid+"_"+i+"_pure_color.png";i&&r.push({url:s,fileName:e.aid+"_"+i+"_pure_color.png",filePath:l})}if(c){var d=za.WX_AD_PATH+"/"+e.aid+"_"+i+"_blur.png";i&&r.push({url:c,fileName:e.aid+"_"+i+"_blur.png",filePath:d})}return r}},{key:"handleAdInfosIndexCache",value:function(e,t,n){return Rc(this,void 0,void 0,Lt.a.mark((function r(){var o;return Lt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,this.handleWaidForList(e);case 3:o=r.sent,r.next=8;break;case 6:r.prev=6,r.t0=r.catch(0);case 8:return t.deviceInfo=Bc(),t.waidMap=o,this.reportAdMonitorData(Bs.IDKEY.READ_ADINFOS_SUCCESS,{adInfos:t}),r.prev=11,r.next=14,Object(rs.saveAdDataToFile)(t,n);case 14:return r.abrupt("return",this.reportAdMonitorData(Bs.SPLASHAD_IDKEY.WRITE_ADINFOS_SUCCESS,{adInfos:t}));case 17:return r.prev=17,r.t1=r.catch(11),r.abrupt("return",this.reportAdMonitorData(Bs.SPLASHAD_IDKEY.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:this.processStackMsg(r.t1)}));case 20:case"end":return r.stop()}}),r,this,[[0,6],[11,17]])})))}},{key:"handleSplashAd",value:function(e){return Rc(this,void 0,void 0,Lt.a.mark((function t(){var n,r,o,i,a,s,c,u,l,d,f,p=this;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.reportAdMonitorData(Bs.SPLASHAD_IDKEY.dataLoadSuccess),r=0,o=[],i=[],a=[],s=Object(Ha.getTodayFormat)(),c=s+"_exposure_times",u=za.WX_AD_PATH+"/adinfos.txt",n={slot_id:za.POS_ID_MAP[this.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0},Object(q.default)(n,c,0),Object(q.default)(n,"requestInQueue","true"),l=n,t.prev=9,d=e.advertisement_info.length>0&&e.advertisement_info.map((function(e,t){var n,s,u={},d=p.handleAdData(e),f=d.rerankingExtInfo.material_hash||"";u.material_hash=d.rerankingExtInfo.material_hash||"",u.tid=d.rerankingExtInfo.tid.toString()||"",u.aid=d.aid,u.trace_id=d.traceid,l.ads.push(u),l.total_exposure_times=d.rerankingExtInfo.total_exposure_times||0,l[c]=d.rerankingExtInfo[c]||0;var h=null===(n=d.condition)||void 0===n?void 0:n.widget_gray_splash_data_channel_parallel;l.requestInQueue=h?"false":"true",l.materialHashMap[d.aid]=f;var v=d.crtInfo[0]||{};d.crtInfo&&(l.crtSizeMap[d.aid]=v.width>v.height?"landscape":"portrait");var g=p.getSplashAdMaterialList(d);i=i.concat(g),r+=0===t?g.length:0;var _=za.WX_AD_PATH+"/"+d.aid+".txt";if(o.push(Object(rs.saveAdDataToFile)(d,_)),d.product_type===Ns.ANDROID){var b=null===(s=d.appInfo)||void 0===s?void 0:s.apkName;a.push({apkName:b,aid:d.aid})}return d})),this.datas=d,t.next=18;break;case 14:throw t.prev=14,t.t0=t.catch(9),this.reportAdMonitorData(Bs.SPLASHAD_IDKEY.handleDataFail,t.t0),t.t0;case 18:return f=i.slice(0,r),t.next=21,Object(rs.bulkSaveMaterials)(f);case 21:return o.push(Object(rs.bulkSaveMaterials)(i)),o.push(this.handleAdInfosIndexCache(a,l,u)),Promise.all(o).then((function(){p.reportAdMonitorData(Bs.SPLASHAD_IDKEY.dataPreloadSuccess),Object(rs.removeOutdatedData)(za.WX_AD_PATH).catch((function(e){return p.reportAdMonitorData(Bs.SPLASHAD_IDKEY.removeFileDataFail,e)}))})).catch((function(e){throw p.reportAdMonitorData(Bs.SPLASHAD_IDKEY.dataPreloadFail,e),e})),t.abrupt("return",this.datas[0]);case 25:case"end":return t.stop()}}),t,this,[[9,14]])})))}},{key:"handleCustomAd",value:function(e){var t=this,n=e.advertisement_info.map((function(e,n){var r,o,i,a=function(e){if(0===n)throw e},s=null,c=t.handleAdData(e),u=c.crtInfo,l=c.button_action,d=c.product_type,f=c.dest_type,p=c.crt_size;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)i=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{var h=JSON.parse(c.reranking_ext_info);h.refresh_time&&(i=h.refresh_time)}catch(e){}if(null===(r=null==c?void 0:c.extBackComm)||void 0===r?void 0:r.tmpl_info)try{var v=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(v.tmpl_content),o=Number(c.extBackComm.sub_templ_id)}catch(e){t.reportAdMonitorData(Bs.CUSTOMAD_IDKEY.TPL_PARSE_FAILED),a({errMsg:"custom template error",errCode:za.CUSTOMAD_ERROR_CODE.ERR_TPL_PARSE})}else t.reportAdMonitorData(Bs.CUSTOMAD_IDKEY.TPL_LOAD_FAILED),a({errMsg:"no custom template",errCode:za.CUSTOMAD_ERROR_CODE.ERR_TPL_NONE});return Object.assign(Object.assign({},e),{crtInfo:u,button_action:l,product_type:d,dest_type:f,crt_size:p,condition:c.condition,template:s,subTemplId:o,refreshTime:i,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(Bs.CUSTOMAD_IDKEY.LOAD_SUCCESS),n.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=n,this.setCurrentData(0),n[0]}},{key:"handleGridAd",value:function(e){var t=this;if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(Bs.IDKEY.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};var n=e.advertisement_info.map((function(e,n){var r=t.handleAdData(e);return r._isGrid=!0,r._gridInfo={row:5===t.slotData.gridCount?1:2,column:5===t.slotData.gridCount?5:4,index:n},r}));this.datas=n,this.setCurrentData(0),this.fetchRetryCount=0;var r,o=Ac(this.datas);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.crt_size!==Ms.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:"unexpected advertisement crt_size "+i.crt_size}}}catch(e){o.e(e)}finally{o.f()}return this.reportAdMonitorData(Bs.IDKEY.AD_GRID_LOAD_SUCCESS),this.datas}},{key:"handleInterstitialAd",value:function(e){var t=JSON.parse(e.image_url),n=Object.assign(Object.assign({},t[0]||{}),Object(Wa.pick)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo"]));if(e.crt_size===Ms.CRT_SIZE_INSERT_VIDEO){var r="0",o=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(o)&&(r=RegExp.$1),this.data.wx_game_video={short_video:{viewid:r}}}return this.convertedAdData=n,n}},{key:"handleRewardedVideoAd",value:function(e){var t,n,r,o,i;e.crt_size===Ms.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);var a=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===a.length&&a.push({wxgame_video_card:{}});var s=Object(nt.default)(a,1)[0],c=s.wxgame_video_card,u=c.head_bg_img,l=c.mp_tag_type,d=s.wxgame_gauss_video,f=e.canvas_info,p=e.wx_game_video,h=p.short_video,v=p.wxgame_video_card,g=v.show_time,_=v.thumb,b=v.title,y=v.desc,m=v.flooring_page,w=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)w=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{var O=JSON.parse(e.reranking_ext_info);O.rewarded_time&&(w=O.rewarded_time)}catch(e){}w=Math.floor(1e3*w);var S=h,I="portrait"===Nc.deviceOrientation,E=e.crt_size===Ms.CRT_SIZE_REWARD_VEDIO916,C=I!==E&&[Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&![3,4].includes(null==m?void 0:m.landpage_type),T=!1;(null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null==d?void 0:d.video_url)&&I!==E&&[Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(C||I)&&(S=Object.assign(Object.assign({},d),{video_duration:d.video_duration_ms}),T=!0),this.reportRewardGaussVideo({useGaussVideo:T,useExpandStyle:C,expUseGaussVideo:null!==(r=null===(n=e.condition)||void 0===n?void 0:n.widget_gray_reward_use_gauss_blur)&&void 0!==r?r:0,expUseExpandStyle:1,videoUrl:null!==(o=null==h?void 0:h.video_url)&&void 0!==o?o:"",gaussVideoUrl:null!==(i=null==d?void 0:d.video_url)&&void 0!==i?i:""}),(null==d?void 0:d.video_url)&&this.reportAdMonitorData(Bs.IDKEY.REWARD_GAUSS_EXISTS),T&&C?this.reportAdMonitorData(Bs.IDKEY.REWARD_USE_GAUSS_AND_EXPAND_STYLE):T?this.reportAdMonitorData(Bs.IDKEY.REWARD_USE_GAUSS):C&&this.reportAdMonitorData(Bs.IDKEY.REWARD_USE_EXPAND_STYLE),m&&[3,4].indexOf(m.landpage_type)>-1&&(this.data.isPlayable=!0);var k=Object.assign({crtInfo:a[0],canvas_info:f,type:Ws[e.pt],video:this.mapRewardVideoFields(S),shortVideo:this.mapRewardVideoFields(h),rewardedTime:w,isGaussBlur:T,isExpandStyle:C,card:{icon:_,name:b,wording:y,headBgImg:u,mpTagType:l,showTime:g},flooringPage:m},Object(Wa.pick)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));return this.convertedAdData=k,k}},{key:"mapRewardVideoFields",value:function(e){return{poster:e.thumb_url,src:e.video_url,duration:e.video_duration,width:e.thumb_width,height:e.thumb_height}}},{key:"handleRewardedLandingPage",value:function(e){var t,n=Nc.isAndroid&&At.default.clientVersion>=654315008||Nc.isIOS&&At.default.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{var r=e.canvas_info,o=Va()(r.ad_info_xml).root,i=Object(Ha.getAdDataViewId)(e),a=this.composeExposureCommonInfo({top:0,left:0,width:Nc.screenWidth,height:Nc.screenHeight});o.children.push({name:"viewid",children:[],attributes:{},content:i},{name:"commInfo",children:[],attributes:{},content:a});var s=ts(o,!0);this.data.canvas_info.ad_info_xml=s,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}},{key:"handleBannerAd",value:function(e){var t,n,r=e.pt,o=e.crt_size,i=e.image_url,a=e.material_width,s=e.material_height,c=e.ad_width,u=e.ad_height,l=e.use_style_data,d=e.hint_txt,f=e.watermark_type,p=Ws[r];l?(t=c,n=u):[Ms.CRT_SIZE_WX_APPLICATION,Ms.CRT_SIZE_WX_APPLICATION_NEW,Ms.CRT_SIZE_WX_APPLICATION_X].includes(o)?(t=(c||a)/2,n=(u||s)/2):o===Ms.CRT_SIZE_WX_APPLICATION_CARD&&(t=c,n=u);var h=Object.assign({type:p,crt_size:o,useStyleData:l,watermark:Us[f],width:t,height:n,image:{src:i,width:a,height:s},wording:d},Object(Wa.pick)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=h,h}},{key:"extractJson",value:function(e,t,n,r){var o=null!=n?n:t;if(e[o]&&"string"==typeof e[o])try{e[t]=JSON.parse(e[o])}catch(n){e[t]=null!=r?r:{}}else null!=r&&(e[t]=r)}},{key:"buildWechatInfo",value:function(e){if(e.product_type===Ns.WE_CHAT){var t=e.biz_appid,n=e.biz_info,r=n.nick_name,o=n.is_subscribed;return{icon:n.head_img,nickname:r,uin:n.biz_uin,isFollowed:o,biz_appid:t}}return{}}},{key:"buildAppInfo",value:function(e){var t=e.product_type;if([Ns.ANDROID,Ns.IOS].includes(t)){var n=e.app_info;return{appName:n.app_name,apkName:n.apk_name,apkUrl:n.apk_url,appMd5:n.app_md5,iconUrl:n.icon_url,urlScheme:n.url_scheme,versionCode:n.version_code,channelId:n.channel_id,desc:n.desc}}return{}}},{key:"handleAdData",value:function(e){var t,n=this;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};var r=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):Object(Wa.cloneDeep)(e),o=r;if(r.crt_size&&(o.crt_size=Number(r.crt_size)),this.extractJson(o,"crtInfo","crt_info"),this.extractJson(o,"extBackComm","ext_back_comm"),this.extractJson(o,"button_action","button_action",{}),this.extractJson(o,"adStyleData","ad_style_data",""),this.extractJson(o,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(o,"extInfo","ext_info"),this.extractJson(o,"adDynamicList","ad_dynamic_list"),r.flow_exp_info&&!this.isSplashAd())try{o.condition=Ka(r.flow_exp_info),this.handleSplashAdFetchLog(o.condition)}catch(e){}if(o.adStyleData&&[Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916,Ms.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(o.crt_size)){o.use_style_data=!0;var i=o.adStyleData;r.ad_width=i.width,r.ad_height=i.height,i.widgets.forEach((function(e){var t=r.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(o);var a=r.button_action;if(a.button_text=a.button_text||"查看",r.watermark_text=r.watermark_text||"去逛逛",18001===(null===(t=null==o?void 0:o.extInfo)||void 0===t?void 0:t.page_type)){var s={gdt_vid:r.traceid||"",uxinfo:r.uxinfo||"",ad_token:r.ad_token||"",rl:r.rl||""};r.url=Object(Wa.addUrlParam)(r.url,s)}var c=this.buildWechatInfo(o),u=this.buildAppInfo(o);return r.product_type===Ns.ANDROID&&ja(u.apkName).then((function(e){var t=e.waid;o.waid=t,n.reportAdMonitorData(Bs.IDKEY.GET_WAID_SUCCESS)})).catch((function(e){n.reportAdMonitorData(Bs.IDKEY.GET_WAID_ERROR,e)})),Object.assign(Object.assign({},o),{app:c,appInfo:u})}},{key:"handleSplashAdFetchLog",value:function(e){this.handledInNewFetch||(this.handledInNewFetch=!0,Object(rs.handleSplashAdFetchLog)(e))}},{key:"handleOperateWXData",value:function(e){var t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?Object(Ga.adOperateWXData)(t):Object(Ga.operateWXData)(t)}},{key:"processFetch",value:function(e,t){return Rc(this,void 0,void 0,Lt.a.mark((function n(){var r,o,i,a,s,c;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validateFetchEnv(),!(Object.keys(t).length>0)){n.next=5;break}qc(t),n.next=11;break;case 5:return Nc.deviceOrientation=Fc(),n.next=8,this.getNetworkType();case 8:r=n.sent,o=r.networkType,Nc.adNetworkType=o;case 11:return i=this.getFetchArgs({isAdInterval:e}),this.setLastAdReqTs(+new Date),this.setLastExposureTime(0),this.setLastClickTime(0),this.setTimePoint("p2"),n.prev=16,n.next=19,this.handleOperateWXData(i);case 19:if(a=n.sent,this.fetchPromise=null,this.fetchRetryCount=0,this.handledInNewFetch=!1,this.setTimePoint("p3"),a=JSON.parse(a.rawData),this.validateFetchRes(a),!this.isSplashAd()){n.next=28;break}return n.abrupt("return",this.handleSplashAd(a));case 28:if(!this.isGridAd()){n.next=30;break}return n.abrupt("return",this.handleGridAd(a));case 30:if(!this.isCustomAd()){n.next=32;break}return n.abrupt("return",this.handleCustomAd(a));case 32:if(s=this.handleAdData(a.advertisement_info[0]),this.data=s,this.checkDuplicateRecommendedAds(s.product_type,s.app,s.appInfo),!this.isInterstitialAd(s)){n.next=37;break}return n.abrupt("return",this.handleInterstitialAd(s));case 37:if(!this.isRewardedVideoAd(s)){n.next=39;break}return n.abrupt("return",this.handleRewardedVideoAd(s));case 39:return n.abrupt("return",this.handleBannerAd(s));case 42:n.prev=42,n.t0=n.catch(16),c="";try{c=JSON.parse(n.t0).errMsg}catch(e){}if(this.fetchPromise=null,!(0===c.indexOf("getAdData:fail")&&this.fetchRetryCount<1)){n.next=50;break}return this.fetchRetryCount+=1,n.abrupt("return",this.fetch(e));case 50:throw this.isBannerAd()?this.reportAdMonitorData(Bs.IDKEY.AD_BANNER_LOAD_ERROR,n.t0):this.isRewardedVideoAd()?this.reportAdMonitorData(Bs.IDKEY.AD_VIDEO_LOAD_ERROR,n.t0):this.isInterstitialAd()?this.reportAdMonitorData(Bs.IDKEY.AD_INTERSTITIAL_LOAD_ERROR,n.t0):this.isGridAd()?this.reportAdMonitorData(Bs.IDKEY.AD_GRID_LOAD_ERROR,n.t0):this.isCustomAd()?this.reportAdMonitorData(Bs.CUSTOMAD_IDKEY.LOAD_FAILED,n.t0):this.isSplashAd()&&this.reportAdMonitorData(Bs.SPLASHAD_IDKEY.dataLoadFail,n.t0),n.t0;case 52:case"end":return n.stop()}}),n,this,[[16,42]])})))}},{key:"checkDuplicateRecommendedAds",value:function(e,t,n){return Rc(this,void 0,void 0,Lt.a.mark((function r(){var o,i,a,s,c,u,l,d,f,p,h,v,g;return Lt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=[],i="0",a=decodeURIComponent(this.data.apurl),/viewid=([^&]+)/.test(a)&&(i=RegExp.$1),s={conv_status:o},c={},r.next=8,zc;case 8:if(u=r.sent,l=u.imei,d=u.idfa,f={viewid:i,app_status:0,follow_status:0,imei:l,idfa:d},e!==Ns.WE_CHAT){r.next=20;break}if(c.ad_type=1,c.ad_id=t.biz_appid,f.follow_status=t.isFollowed?2:1,!t.isFollowed){r.next=18;break}return r.abrupt("return",this.reportAdMonitorData(Bs.IDKEY.AD_FOLLOWED,{adInfo:c}));case 18:r.next=37;break;case 20:if(e!==Ns.ANDROID){r.next=37;break}return p=n.apkName,h=n.versionCode,r.prev=22,r.next=25,this.getInstallState(p);case 25:v=r.sent,g=v.isInstalled&&(void 0===v.versionCode||v.versionCode>=h),c.ad_type=2,c.ad_id=p,f.app_status=g?2:1,g&&this.reportAdMonitorData(Bs.IDKEY.AD_INSTALLED,{adInfo:c}),r.next=37;break;case 33:r.prev=33,r.t0=r.catch(22),f.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0});case 37:o.push(f),this.reportInstallFollow(s);case 39:case"end":return r.stop()}}),r,this,[[22,33]])})))}},{key:"getAdType",value:function(){return this.adType}},{key:"getAdUnitId",value:function(){return this.adUnitId}},{key:"getPluginAppid",value:function(){return this.pluginAppid}},{key:"getSlotData",value:function(){return this.slotData}},{key:"getDeviceInfo",value:function(){return Nc}},{key:"isBannerAd",value:function(){return"banner"===this.adType}},{key:"isRewardedVideoAd",value:function(e){return"incentive-video"===this.adType&&(!e||[Ms.CRT_SIZE_REWARD_VEDIO169,Ms.CRT_SIZE_REWARD_VEDIO916,Ms.CRT_SIZE_VERTICAL_VIDEO_NEW_916,Ms.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}},{key:"isInterstitialAd",value:function(e){return"interstitialAd"===this.adType&&(!e||[Ms.CRT_SIZE_TABLE_SCREEN_IMAGE,Ms.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}},{key:"isGridAd",value:function(){return"grid"===this.adType}},{key:"isCustomAd",value:function(){return"customAd"===this.adType}},{key:"isSplashAd",value:function(){return"splashAd"===this.adType}},{key:"getProgramStartTime",value:function(){return Nc.startTime}},{key:"getWebviewInfo",value:function(){return{createWebviewId:this.webviewId,lastWebviewId:Lc.lastWebviewId,currentWebviewId:Lc.currentWebviewId,openType:Lc.currentOpenType}}},{key:"setSlotData",value:function(e){this.slotData=Object.assign(this.slotData,e||{})}},{key:"reset",value:function(){this.adDataIndex=0,this.cgiReporter.reset()}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t)),this.fetchPromise}},{key:"setRightButtonHide",value:function(e){var t=this,n=function(){return Nc.isWaGame?t.setNavigationBarRightButton({isHide:e}):t.setMiniProgramNavigationBarRightButton({isHide:e})};return n().catch((function(r){return t.reportAdMonitorData(Bs.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:t.processStackMsg(r)}),n().catch((function(n){throw t.reportAdMonitorData(Bs.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:t.processStackMsg(n)}),n}))}))}},{key:"addDownloadTaskStraight",value:function(e,t,n,r){var o=this;return Tc({taskName:e,taskUrl:t,fileMd5:n,extInfo:r}).catch((function(e){return o.reportAdMonitorData(Bs.IDKEY.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e)}))}},{key:"operateFullscreen",value:function(e){if(!e)return Promise.reject();var t=[this.setRightButtonHide("hide"===e)];return Nc.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!Nc.isWaGame&&Nc.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}},{key:"isTriggerClick",value:function(e){var t=e.absoluteX,n=e.absoluteY,r=e.absoluteEndX,o=e.absoluteEndY,i=e.pressInterval,a=!1;return Math.abs(o-n)<30&&Math.abs(r-t)<30&&i<300&&(a=!0),a}},{key:"isValidCondition",value:function(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}},{key:"setCurrentData",value:function(e){var t;this.adDataIndex=e,(null===(t=this.datas)||void 0===t?void 0:t[e])&&(this.data=this.datas[e])}},{key:"checkCanvasXmlState",value:function(){return this.isCanvasXmlHook}},{key:"handleRewardedVideoPlayableLand",value:function(e,t){var n,r,o=null===(r=null===(n=null==this?void 0:this.data)||void 0===n?void 0:n.extBackComm)||void 0===r?void 0:r.uid,i={};4===t?i.xj_scene=6:(i.gdt_vid=this.data.traceid||"",i.uxinfo=this.data.uxinfo||"",i.reward=1),i.rl=this.data.rl||"",i.ad_token=this.data.ad_token||"",Nc.isIOS&&(i.uid=o||"");var a=Object(Wa.addUrlParam)(e,i);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(Bs.IDKEY.H5_PRELOAD_BUTTON_CLICKED),Object(Ga.openUrl)({url:a})}},{key:"setDeviceInfo",value:function(e){Object.assign(Nc,e)}}]),e}();jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",Promise)],Mc.prototype,"handleSplashAd",null),jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",void 0)],Mc.prototype,"handleCustomAd",null),jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",void 0)],Mc.prototype,"handleGridAd",null),jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",void 0)],Mc.prototype,"handleInterstitialAd",null),jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",void 0)],Mc.prototype,"handleRewardedVideoAd",null),jc([As("handleAdDataDone"),Ps("handleAdDataError"),xc("design:type",Function),xc("design:paramtypes",[Object]),xc("design:returntype",void 0)],Mc.prototype,"handleBannerAd",null),jc([function(e,t,n){var r=n.value;n.value=function(){var e=this,t=function(t){Dc&&Dc in e&&"function"==typeof e[Dc]&&e[Dc](t)};try{for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a=r.call.apply(r,[this].concat(o));return a instanceof Promise?a.catch((function(e){return t(e)})):a}catch(e){t(e)}}},xc("design:type",Function),xc("design:paramtypes",[Number,Object,Object]),xc("design:returntype",Promise)],Mc.prototype,"checkDuplicateRecommendedAds",null);var Nc={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:ee.PLATFORM,isWaGame:!0,isIOS:ee.IS_IOS,isAndroid:ee.IS_ANDROID,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},Lc={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},Bc=function(){return Object(Wa.pick)(Nc,["oaid","imei","idfa","common_device_id"])},Fc=function(){if(!Nc.isWaGame){var e=Object(ea.getStaticSystemInfoSync)();Nc.screenWidth=e.screenWidth,Nc.screenHeight=e.screenHeight,Nc.deviceOrientation=Nc.screenWidth>Nc.screenHeight?"landscape":"portrait"}return Nc.deviceOrientation},Wc=function(){},Uc=function(){return Wc()},Vc=function(){return new Promise((function(e){Wc=e}))},Gc=function(){return new Promise((function(e){var t;t=function(t){Nc.oaid=t,e()},Ca?t&&t(Ca):ee.IS_ANDROID&&At.default.clientVersion<654315827?Object(R.invokeMethod)("getOAID",{success:function(e){/:ok/.test(e.errMsg)?(Ca=e.result||"",t&&t(Ca)):t&&t("")},fail:function(){t&&t("")}}):t&&t("")}))},Hc=function(){return new Promise((function(e){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){ee.IS_ANDROID&&At.default.clientVersion>=654315827||ee.IS_IOS&&At.default.clientVersion>=385879808?Object(R.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){Ca=e.oaid||"",Ta=e.imei||"",Pa=e.waid||"",Aa=e.ua||"",Da=e.devIdInfo||"{}";try{ka=JSON.stringify(Ea(Ea({},JSON.parse(Da)),Aa?{ua:Aa}:{}))}catch(e){n(e)}t({oaid:Ca,imei:Ta,commonid:ka,waid:Pa})},fail:function(e){n(e)}}):t({oaid:Ca,imei:Ta,commonid:ka,waid:Pa})}))})().then((function(t){var n=t.imei,r=t.oaid,o=t.commonid;ee.IS_IOS?Nc.idfa=n:ee.IS_ANDROID&&(Nc.oaid=r,Nc.imei=n),Nc.common_device_id=o||"{}",e(),Vc().then((function(){Object(ta.reportAdMonitorData)(Bs.IDKEY.GET_DEVICEINFO_SUCCESS)}))})).catch((function(t){e(),Vc().then((function(){Object(ta.reportAdMonitorData)(Bs.IDKEY.GET_DEVICEINFO_ERROR,t)}))}))}))},zc=new Promise((function(e){At.default.onReady((function(){Nc.startTime=new Date,Nc.deviceOrientation=Object(Wa.getInitDeviceOrientation)()||"",Nc.envVersion=At.default.envVersion;var t=Object(ea.getStableSystemInfo)(),n=Object(ea.getInitScreenSize)();Nc.screenWidth=n.screenWidth||0,Nc.screenHeight=n.screenHeight||0,Nc.systemVersion=t.system,Nc.wechatVersion=t.version,Nc.SDKVersion=t.SDKVersion,Nc.brand=t.brand,Nc.model=t.model,Nc.isWaGame=Object(Lo.isGame)();try{Nc.gameAppId=At.default.accountInfo.appId,Nc.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([Gc(),Hc()]).then((function(){return e(Nc)}))}))})),qc=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Nc[r]=e[r]}};try{Object(rt.onAppRoute)((function(e){var t=e.webviewId,n=e.openType,r=e.path;Nc.isWaGame||(Lc.lastWebviewId=Lc.currentWebviewId,Lc.currentWebviewId=t||0,Lc.currentOpenType=n,Lc.weappPath=r)}))}catch(e){}Object(xa._onShow)((function(e){var t=e.scene;Lc.enterForegroundTime=new Date,Lc.currentScene=t})),Ba((function(){Lc.gameDuration+=Date.now()-Lc.enterForegroundTime.getTime()}));var Yc=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Kc=Object(na.constructOperateWXData)(!1,"operateWXData"),Jc=[],Xc={},$c=null,Zc=[];Object(R.subscribe)("videoAdPreloadInfoGet",(function(e){$c=e,Zc.forEach((function(e){null==e||e($c)})),Zc=[]}));var Qc=null,eu={},tu=function(e,t){return new Promise((function(n){var r=Date.now();Object(ra._downloadFileSkipCheckDomain)({url:t.video_info.videoUrl,success:function(o){n(o.tempFilePath),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_DOWNLOAD_SUCCESS,{type:e.type,url:t.video_info.videoUrl,costtime:Date.now()-r},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})},fail:function(){n(""),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_DOWNLOAD_ERROR,{type:e.type,url:t.video_info.videoUrl},{aid:t.aid,traceid:t.traceid,ad_unit_id:e.unitId})}})}))},nu=new Set,ru=function(e){var t;nu.has(e.unitId)||(nu.add(e.unitId),t=function(t){var n={pos_id:"",ad_unit_id:e.unitId,scene_type:t.scene_type,weapp_path:Lc.weappPath,user_agent:t.ua,sdk_version:Nc.SDKVersion,appid:Nc.gameAppId,orig_weapp_id:"",weapp_extra_data:JSON.stringify({wxa_start_ts:Nc.startTime.valueOf(),wxa_enter_ts:Lc.enterForegroundTime.valueOf(),start_ts:Nc.startTime.valueOf(),enter_ts:Lc.enterForegroundTime.valueOf(),user_duration:Lc.gameDuration+(Date.now()-Lc.enterForegroundTime.getTime()),machine_type:Nc.model,is_ad_interval:!1,wxa_ext:""}),ext_slot_custom_comm:""},r={is_ad_preload:1};"custom"===e.type?(n.pos_id=za.POS_ID_MAP.customAd,r.is_adunit_tmpl=!0):"banner"===e.type?(n.pos_id=za.POS_ID_MAP.banner,Number(e.adIntervals)>0&&(r.refresh_time=String(e.adIntervals))):"videoPatch"===e.type?n.pos_id=za.POS_ID_MAP.wxAppPreVideoAd:"video"===e.type&&(n.pos_id=za.POS_ID_MAP.wxAppVideo),Object(Lo.isIn3rdApp)()&&(r.in_3rd_app=1),n.ext_slot_custom_comm=JSON.stringify(r),Kc({apiName:"webapi_getadvert",reqData:n,success:function(t){!function(e,t){Yc(void 0,void 0,void 0,Lt.a.mark((function n(){var r,o,i,a,s,c;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!((a=JSON.parse(t.rawData)).advertisement_num>=1&&a.advertisement_info.length)){n.next=14;break}if(s=a.advertisement_info[0],o=s.aid,i=s.traceid,!(null===(r=s.video_info)||void 0===r?void 0:r.videoUrl)){n.next=11;break}return n.next=9,tu(e,s);case 9:(c=n.sent)&&(s.video_info.preloadUrl=c);case 11:Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_LOAD_SUCCESS,{type:e.type},{ad_unit_id:e.unitId,aid:s.aid,traceid:s.traceid}),n.next=16;break;case 14:return Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_LOAD_ERROR,{errCode:a.ret,errMsg:"no advertisement",type:e.type},{ad_unit_id:e.unitId}),n.abrupt("return");case 16:eu[e.unitId]={data:JSON.stringify(a),_preloadTime:+new Date,_aid:o,_traceid:i},n.next=22;break;case 19:n.prev=19,n.t0=n.catch(0),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_LOAD_ERROR,{errMsg:"advertisement error",error:null===n.t0||void 0===n.t0?void 0:n.t0.stack,type:e.type},{ad_unit_id:e.unitId});case 22:case"end":return n.stop()}}),n,null,[[0,19]])})))}(e,t)},fail:function(t){Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_CALL_ERROR,{error:t,type:e.type},{ad_unit_id:e.unitId})},complete:function(){nu.delete(e.unitId)}})},$c?null==t||t($c):(Qc&&clearTimeout(Qc),Qc=setTimeout((function(){Object(R.publish)("videoAdPreloadInfo",null,[Lc.currentWebviewId])}),0),Zc.push(t)))},ou=function(){return Jc},iu=n(48),au=__safeway__.apiSign.makeApiSign,su={setPrivateExtraData:$i.setPrivateExtraData,getCurrentRoute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success({currentRoute:L.default.lastRoute})},getRealRouteWithProtocol:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.lastRoute,n=void 0===t?L.default.lastRoute:t,r=e.relativeRoute,o=void 0===r?".":r,i=e.needTrans,a=void 0===i||i;e.success({route:Object(N.getRealRouteWithProtocol)(n,o,a)})},setWxInterfaceDisabled:M.setWxInterfaceDisabled,navigateTo:Bi.navigateTo,navigateToWithRelatedInfo:Bi.navigateToWithRelatedInfo,redirectTo:Bi.redirectTo,switchTab:Bi.switchTab,navigateBack:Bi.navigateBack,reLaunch:Bi.reLaunch,getUserCloudStorage:Fi.getUserCloudStorage,getFriendCloudStorage:Wi.getFriendCloudStorage,getGroupCloudStorage:Ui.getGroupCloudStorage,reportRecycledAPI:Vi.reportRecycledAPI,getPassCookieString:Gi.getPassCookieString,getPayCookieString:Gi.getPayCookieString,getPluginInfo:uo.getPluginInfoForWebview,getPluginContactList:function(e){void 0===Mi?qi.push(e.success):e.success(Mi)},_checkBeforeNavigateToMiniProgram:Zi._checkBeforeNavigateToMiniProgram,getVideoAdPreloadData:function(e){var t=e.data.unitId;_a[t]?(e.success&&e.success({adData:_a[t]}),delete _a[t]):e.success&&e.success({adData:null}),-1!==wa.indexOf(t)&&setTimeout((function(){ma(t)}),1e3)},getAdPreloadData:function(e){var t,n,r,o,i,a,s,c,u=e.data,l=u.ad_unit_id,d=u.appid,f=u.orig_weapp_id,p=u.weapp_extra_data,h=u.pos_id;try{if(d!==Nc.gameAppId)throw new Error("appid Error");if(f)throw new Error("orig_weapp_id Error");var v=JSON.parse(p);if(v.is_ad_interval)throw new Error("is_ad_interval Error");if(v.wxa_ext)throw new Error("wxa_ext Error");var g=Xc[l].type;if("banner"===g&&-1===[za.POS_ID_MAP.banner,void 0,""].indexOf(h))throw new Error("pos_id Error");if("custom"===g&&h!==za.POS_ID_MAP.customAd)throw new Error("pos_id Error");if("videoPatch"===g&&h!==za.POS_ID_MAP.wxAppPreVideoAd)throw new Error("pos_id Error");if("video"===g&&h!==za.POS_ID_MAP.wxAppVideo)throw new Error("pos_id Error")}catch(r){return null===(t=e.fail)||void 0===t||t.call(e,{errMsg:"getAdData: fail"}),void Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_USE_ERROR,{type:null===(n=Xc[l])||void 0===n?void 0:n.type,error:null==r?void 0:r.message},{ad_unit_id:l})}eu[l]?(Date.now()-eu[l]._preloadTime>6e5?(null===(r=e.fail)||void 0===r||r.call(e,{errMsg:"getAdData: fail"}),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_USE_ERROR,{type:null===(o=Xc[l])||void 0===o?void 0:o.type,error:"time more than 10m"},{ad_unit_id:l})):(null===(i=e.success)||void 0===i||i.call(e,{data:eu[l],errMsg:"getAdData: ok from preload"}),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_USE_SUCCESS,{type:null===(a=Xc[l])||void 0===a?void 0:a.type},{ad_unit_id:l,aid:eu[l]._aid,traceid:eu[l]._traceid})),delete eu[l]):(null===(s=e.fail)||void 0===s||s.call(e,{errMsg:"getAdData: fail"}),Object(ta.reportAdMonitorData)(Bs.IDKEY.PRELOAD_USE_ERROR,{type:null===(c=Xc[l])||void 0===c?void 0:c.type,error:"has no preload data"},{ad_unit_id:l})),-1===Jc.indexOf(l)||nu.has(l)||setTimeout((function(){ru(Xc[l])}),1e3)},shareImageMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("shareImageMessage",e,{})},getCloudFileInfo:ne.getCloudFileInfo,_setNavigateBackInterception:iu._setNavigateBackInterception,_stopNavigateBackInterception:iu._stopNavigateBackInterception,chooseInvoice:Ut.chooseInvoice,chooseInvoiceTitle:Ut.chooseInvoiceTitle},cu=function(e,t,n,r){Object(R.publish)("callbackAppServiceMethod",{res:e,isSuccess:t,callbackId:n},[r])};Object(R.subscribe)("invokeAppServiceMethod",(function(e,t){var n=e.name,r=e.type,o=e.args,i=e.callbackId;try{if("bridge"===r){var a=au(n,o);Object(R.invoke)(n,a,(function(e){e.errMsg=e.errMsg||n+":ok",-1!==e.errMsg.indexOf(n+":ok")?cu(e,!0,i,t):cu(e,!1,i,t)}))}else{o.success=function(e){cu(e,!0,i,t)},o.fail=function(e){cu(e,!1,i,t)};var s=("wx"===r?wx[n]:su[n])(o);s instanceof Promise&&s.catch((function(){}))}}catch(e){var c={errMsg:n+": fail "+e.message};cu(c,!1,i,t)}}));var uu=n(45);Object(R.onMethod)("onStartReportPageData",(function(){var e=(void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[]).find((function(e){return e.__wxWebviewId__===L.default.currentWebviewId}));e&&Object(uu.invokeWebviewMethod)("getInnerHTML",{},[L.default.currentWebviewId],(function(t){var n,r=t.html;try{n=JSON.stringify({html:r,data:e.data})}catch(e){n=""}Object(R.invokeMethod)("reportPageData",{isUserReport:!0,pageData:n,pageRoute:e.__route__,complete:function(){}})}))}));var lu=n(23),du={},fu={};function pu(e){var t=fu[e],n=du[e];n&&n.length&&t&&t.bindmessage&&L.default.webviewEventCallback&&L.default.webviewEventCallback({data:{type:"message",target:t.target,currentTarget:t.target,timeStamp:Date.now()-t.createdTimestamp,detail:{data:n}},eventName:t.bindmessage,webviewId:e,nodeId:t.nodeId})}function hu(e,t){var n=e.name,r=e.arg;!ee.IS_ANDROID||ee.IS_WINDOWS||ee.IS_MINA||(t=L.default.currentWebviewId),"navigateBack"===n?lu.route.navigateBack({delta:r.delta}):"navigateTo"===n?lu.route.navigateTo({url:r.url}):"redirectTo"===n?lu.route.redirectTo({url:r.url}):"reLaunch"===n?lu.route.reLaunch({url:r.url}):"switchTab"===n?lu.route.switchTab({url:r.url}):"postMessage"===n&&du[t]&&du[t].push(r)}Object(R.subscribe)("webViewInserted",(function(e,t){fu[t]=e,du[t]=[],Q.onBeforeUnloadPage(t,(function(e){pu(e),delete fu[e],delete du[e]})),Q.onBeforeShareAppMessage(t,pu),Object(R.invokeMethod)("hideShareTimelineMenu")})),Object(R.subscribe)("webViewRemoved",(function(e,t){pu(t),delete fu[t],delete du[t],__appServiceEngine__.showShareTimelineMenuIfNeeded(t)})),Object(R.onMethod)("onWebInvokeAppService",hu),Object(R.onMethod)("WEB_INVOKE_APPSERVICE",hu),Object(R.onMethod)("onBottomBannerButtonClicked",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.currentPath,Object(R.invokeMethod)("restart",{url:e.currentPath,scene:1155,fail:function(e){wxNativeConsole.error("restart fail",e)}})}));var vu=function(e,t,n){setTimeout((function(){Object(R.publish)("callbackMiniProgramFunction",{callbackId:t,argArr:n},[e])}),0)};Object(R.subscribe)("callMiniProgramFunction",(function(e,t){var n=e.callbackId,r=e.paths,o=e.funcName,i=e.argArr,a=null;"object"!==Object(x.default)(r)&&(r=[r]);for(var s=0;s<r.length;s++){var c=r[s];".js"!==c.slice(-3)&&(c+=".js");try{a=requireMiniProgramFile(c)}catch(e){}if(a)break}if(a)if("function"!=typeof a[o]){vu(t,n,[{errMsg:"callMiniProgramFunction:fail Function not found"}])}else i.push((function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];vu(t,n,r)})),a[o].apply({},i);else{vu(t,n,[{errMsg:"callMiniProgramFunction:fail File not found"}])}}));var gu=n(96),_u=Object(fo.getEventManager)("UpdateWXConfig"),bu=_u.onMethod;_u.offMethod;Object(R.onMethod)("onUpdateWXConfig",(function(e){wxNativeConsole.info("onUpdateWXConfig",e),Object.keys(e).forEach((function(t){At.default[t]=e[t]})),_u.emit(e)}));var yu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(R.invokeMethod)("getLocation",e,Object.assign({beforeSuccess:function(t){e.altitude||delete t.altitude}},t))},mu=!1;At.default.onReady((function(){mu="develop"===At.default.envVersion||"trial"===At.default.envVersion}));var wu=0,Ou={wgs84:null,gcj02:null},Su="频繁调用会增加电量损耗，可考虑使用 wx.onLocationChange 监听地理位置变化";Object(rt.onAppRoute)((function(){wu=0})),Object(nr.onAppEnterBackground)((function(){wu=0}));var Iu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"gcj02"!==e.type&&(e.type="wgs84");var t=Date.now(),n=Ou[e.type];if(t-wu>=1e4||!mu&&!n)return wu=t,void yu(e,{afterAll:function(t){Ou[e.type]=t}});if(mu)Object(R.beforeInvokeFail)("getLocation",e,Su);else{var r=0===n.errMsg.indexOf("getLocation:ok");Object(R.beforeInvokeCallback)({name:"getLocation",success:r,args:e,errMsg:n.errMsg,res:n})}},Eu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("chooseLocation",e)},Cu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("choosePoi",e)},Tu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("openLocation",e,{latitude:1,longitude:1})&&Object(R.invokeMethod)("openLocation",e)},ku=Object(fo.getEventManager)("locationChange"),Au=ku.onMethod,Pu=ku.offMethod;Object(R.onMethod)("onLocationChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ku.emit(e)}));var Du=Object(fo.getEventManager)("locationChangeError"),ju=Du.onMethod,xu=Du.offMethod;Object(R.onMethod)("onLocationChangeError",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Du.emit(e)}));var Ru=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={subKey:"",enableIndoor:!1,enable:!0};Object.assign(t,e),Object(R.invokeMethod)("enableLocationUpdate",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdate","startLocationUpdate")}})},Mu=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_ANDROID&&At.default.clientVersion>=654312704&&At.default.clientVersion<654312960?Object(R.invokeMethod)("enableLocationUpdate",Object.assign({enable:!1},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdate","stopLocationUpdate")}}):Object(R.invokeMethod)("disableLocationUpdate",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("disableLocationUpdate","stopLocationUpdate")}})},Nu=function(){if(!At.default.ext)return{};try{return JSON.parse(JSON.stringify(At.default.ext))}catch(e){return{}}};function Lu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function Bu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bu(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wu={},Uu={},Vu={};function Gu(e,t){return e+"_"+t}function Hu(){return(ee.IS_IOS?Number((At.default.system||"").replace("iOS","")):0)>=13}function zu(e){delete Wu[e],delete Uu[e],delete Vu[e]}function qu(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Gu(t,e);if(r&&(void 0===Wu[o]||!0!==Wu[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var i=Fu({scrollViewId:e},n),a=Wu[o];return a&&a.fallback?Object(R.publish)("operateWebviewScrollView",i,[t]):Object(R.invokeMethod)("operateScrollView",i,{success:function(){}}),!0}function Yu(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Gu(e,t);if(r&&(void 0===Wu[o]||!0!==Wu[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var i=Fu({scrollViewId:t},n);return Object(R.publish)("operateXWebScrollView",i,[e]),!0}Object(R.subscribe)("enhancedScrollViewReady",(function(e,t){var n=Gu(t,e.scrollViewId);Wu[n]={enhanced:!0,data:e.data,fallback:e.fallback}})),Object(R.subscribe)("commonScrollViewReady",(function(e,t){var n=Gu(t,e.scrollViewId);Wu[n]||(Wu[n]={enhanced:!1});var r=Uu[n];r&&"function"==typeof r&&(r(),delete Uu[n]),Object(Q.onBeforeUnloadPage)(t,(function(){zu(n)}))})),Object(R.subscribe)("commonScrollViewDestroyed",(function(e,t){zu(Gu(t,e.scrollViewId))})),Object(R.subscribe)("enhancedScrollViewDragEvent",(function(e,t){var n=Gu(t,e.scrollViewId),r=Wu[n];if(r&&r.data){var o=r.data,i="",a="";if("dragstart"===e.eventName?(i="dragstart",a=o.handlers.binddragstart):"dragging"===e.eventName?(i="dragging",a=o.handlers.binddragging):"dragend"===e.eventName&&(i="dragend",a=o.handlers.binddragend),a){var s={scrollTop:e.scrollTop,scrollLeft:e.scrollLeft};"dragend"===i&&(s.velocity=e.velocity),L.default.webviewEventCallback({data:{type:i,target:o.target,currentTarget:o.target,touches:[],detail:s},eventName:a,webviewId:o.webviewId,nodeId:o.nodeId})}}})),Object(R.subscribe)("enhancedScrollViewSubscribeEvent",(function(e,t){ee.IS_IOS&&!Hu()||(e.subscribe?qu(e.scrollViewId,t,{registerDelegate:!0}):qu(e.scrollViewId,t,{removeDelegate:!0}))})),Object(V.onNativeEvent)("onScrollViewWillEndDragging",(function(e){var t=Gu(L.default.currentWebviewId,e.scrollViewId),n=Wu[t];if(n&&n.data){var r=n.data;L.default.webviewEventCallback({data:{type:"dragend",target:r.target,currentTarget:r.target,touches:[],detail:{scrollTop:e.contentOffset.y,scrollLeft:e.contentOffset.x,velocity:e.velocity}},eventName:r.handlers.binddragend,webviewId:r.webviewId,nodeId:r.nodeId})}}));var Ku=function e(t,n){Object($.default)(this,e),this.id=t,this.webviewId=n,this._scrollEnabled=!0,this._bounces=!0,this._showScrollbar=!0,this._pagingEnabled=!1,this._fastDeceleration=!1,this._decelerationDisabled=!1},Ju=function(e){Object(G.default)(n,e);var t=Lu(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this,e,r)).uid=Gu(r,e),void 0!==Wu[e]&&!0===Wu[e].enhanced&&(o.scrollEnabled=!0),o}return Object(K.default)(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){qu(this.id,this.webviewId,{scrollEnabled:e})&&(this._scrollEnabled=e)}},{key:"bounces",get:function(){return this._bounces},set:function(e){qu(this.id,this.webviewId,{bounces:e})&&(this._bounces=e)}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){qu(this.id,this.webviewId,{showsVerticalScrollIndicator:e,showsHorizontalScrollIndicator:e})&&(this._showScrollbar=e)}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){qu(this.id,this.webviewId,{pagingEnabled:e})&&(this._pagingEnabled=e)}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){qu(this.id,this.webviewId,{decelerationRate:e?.99:.998})&&(this._fastDeceleration=e)}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=e.left,r=e.duration,o=e.velocity,i=e.animated,a=void 0!==n?n:0,s=void 0!==t?t:0;if(void 0===r)qu(this.id,this.webviewId,{"setContentOffset:animated":{animated:!!i,contentOffset:{x:a,y:s}}});else{if(ee.IS_IOS&&!Hu())return;qu(this.id,this.webviewId,{"setContentOffset:springAnimated":{contentOffset:{x:a,y:s},duration:r/1e3,delay:0,damping:1,velocity:o}})}}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){ee.IS_IOS&&!Hu()||qu(this.id,this.webviewId,{customDecelerateEnabled:e})&&(this._decelerationDisabled=e)}},{key:"_onReady",value:function(e){var t=Wu[this.uid],n=function(){"function"==typeof e&&e()};t?n():Uu[this.uid]=function(){n()}}},{key:"scrollIntoView",value:function(e){!function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=Gu(t,e);if(r&&(void 0===Wu[o]||!0!==Wu[o].enhanced))return console.warn("此方法需要 scroll-view 开启 enhanced 属性！"),!1;var i=Fu({scrollViewId:e},n);Object(R.publish)("operateWebviewScrollView",i,[t])}(this.id,this.webviewId,{scrollIntoView:e},!1)}}]),n}(Ku),Xu=function(e){Object(G.default)(n,e);var t=Lu(n);function n(e,r){var o;return Object($.default)(this,n),(o=t.call(this,e,r)).uid=Gu(r,e),o}return Object(K.default)(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){Yu(this.webviewId,this.id,{scrollEnabled:e})&&(this._scrollEnabled=e)}},{key:"bounces",get:function(){return this._bounces},set:function(e){}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){Yu(this.webviewId,this.id,{showScrollbar:e})&&(this._showScrollbar=e)}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){Yu(this.webviewId,this.id,{pagingEnabled:e})&&(this._pagingEnabled=e)}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){Yu(this.webviewId,this.id,{fastDeceleration:e})&&(this._fastDeceleration=e)}},{key:"scrollTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,n=e.left,r=e.duration,o=e.velocity,i=e.animated,a=void 0!==n?n:0,s=void 0!==t?t:0;Yu(this.webviewId,this.id,{scrollToWithAnimation:{contentOffset:{x:a,y:s},duration:r,animated:i,velocity:o}})}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){}},{key:"_onReady",value:function(e){var t=Wu[this.uid],n=function(){"function"==typeof e&&e()};t?n():Uu[this.uid]=function(){n()}}},{key:"scrollIntoView",value:function(e){Yu(this.webviewId,this.id,{scrollIntoView:e},!1)}}]),n}(Ku),$u=function(e){Object(G.default)(n,e);var t=Lu(n);function n(){return Object($.default)(this,n),t.apply(this,arguments)}return Object(K.default)(n,[{key:"scrollEnabled",get:function(){return this._scrollEnabled},set:function(e){}},{key:"bounces",get:function(){return this._bounces},set:function(e){}},{key:"showScrollbar",get:function(){return this._showScrollbar},set:function(e){}},{key:"pagingEnabled",get:function(){return this._pagingEnabled},set:function(e){}},{key:"fastDeceleration",get:function(){return this._fastDeceleration},set:function(e){}},{key:"scrollTo",value:function(){}},{key:"decelerationDisabled",get:function(){return this._decelerationDisabled},set:function(e){}},{key:"scrollIntoView",value:function(e){Yu(this.webviewId,this.id,{scrollIntoView:e},!1)}}]),n}(Ku);var Zu=function e(t,n,r,o){if(t)if(Array.isArray(t))t.forEach((function(t){return e(t,n,r,o)}));else{var i=t.contextIs,a=t.contextId,s=t.contextCanvasId;i&&("wx-video"===i&&(t.context=Object(Dt.createSQVideoContext)(a,L.default.currentWebviewId)),"wx-live-player"===i&&(t.context=kn(a,L.default.currentWebviewId,o)),"wx-map"===i&&(t.context=we(a,L.default.currentWebviewId)),"wx-canvas"===i&&s&&(t.context=Object(Te.createCanvasContext)(s,n)),"wx-editor"===i&&(t.context=Ai(a,L.default.currentWebviewId)),delete t.contextIs,delete t.contextId,delete t.contextCanvasId);var c=t.nodeIs,u=t.nodeId,l=t.nodeCanvasType,d=t.nodeCanvasId,f=t.nodeNodeId;c&&("wx-canvas"===c&&u&&(t.node=Tt(u,l,d,f)),"wx-scroll-view"===c&&u&&(t.node=function(e){var t=L.default.currentWebviewId,n=function(e,t){return e+"-"+t}(t,e);return Vu[n]||(ee.IS_IOS?Vu[n]=new Ju(e,t):ee.IS_ANDROID?Vu[n]=new Xu(e,t):Vu[n]=new $u(e,t)),Vu[n]}(u)),delete t.nodeIs,delete t.nodeId,delete t.nodeCanvasId,delete t.nodeNodeId,t.node&&"function"==typeof t.node._onReady&&r.push(new Promise((function(e){return t.node._onReady(e)}))))}},Qu=function(){function e(t,n,r,o){Object($.default)(this,e),this._selectorQuery=t,this._component=n,this._selector=r,this._single=o}return Object(K.default)(e,[{key:"fields",value:function(e,t){return this._selectorQuery._push(this._selector,this._component,this._single,e,t),this._selectorQuery}},{key:"boundingClientRect",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,rect:!0,size:!0},e),this._selectorQuery}},{key:"scrollOffset",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{id:!0,dataset:!0,scrollOffset:!0},e),this._selectorQuery}},{key:"context",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{context:!0},e),this._selectorQuery}},{key:"node",value:function(e){return this._selectorQuery._push(this._selector,this._component,this._single,{node:!0},e),this._selectorQuery}}]),e}(),el={},tl=function(e){return function(){function t(e){if(Object($.default)(this,t),e&&e.page)this._component=this._defaultComponent=e.page,this._webviewId=this._defaultComponent.__wxWebviewId__;else{var n=__appServiceEngine__.getCurrentPagesByDomain("");this._defaultComponent=n[n.length-1],this._component=null,this._webviewId=null}this._queue=[],this._queueCb=[]}return Object(K.default)(t,[{key:"in",value:function(e){return null===this._webviewId?(this._webviewId=e.__wxWebviewId__,this._component=e):this._webviewId!==e.__wxWebviewId__?console.error("A single SelectorQuery could not work in components in different pages. A SelectorQuery#in call has been ignored."):this._component=e,this}},{key:"select",value:function(e){return new Qu(this,this._component,e,!0)}},{key:"selectAll",value:function(e){return new Qu(this,this._component,e,!1)}},{key:"selectViewport",value:function(){return new Qu(this,0,"",!0)}},{key:"_push",value:function(t,n,r,o,i){null===this._webviewId&&(this._webviewId=this._defaultComponent?this._defaultComponent.__wxWebviewId__:void 0);var a=e?"":__virtualDOM__.getRootNodeId(this._webviewId);this._queue.push({component:null!=n?0===n?0:n.__wxExparserNodeId__:a,selector:t,single:r,fields:o}),this._queueCb.push(i||null)}},{key:"exec",value:function(t){var n=this;!function(e,t,n){if(null!=e)var r=__virtualDOM__.requestViewInfo("selectorQuery",t,e,(function(t){n&&(__virtualDOM__.endViewInfoCallback(e,r),n&&n(t))}));else console.warn("An SelectorQuery call is ignored because no proper page or component is found. Please considering using `SelectorQuery.in` to specify a proper one.")}(this._webviewId,{pluginId:e,queue:this._queue},(function(r){var o=n._queueCb,i=[],a=[];r.forEach((function(t,r){Zu(t,n._component,a,e),"function"==typeof o[r]&&i.push(__errorTracer__.surroundThirdByTryCatch((function(){o[r].call(n,t)}),"at SelectorQuery callback function"))})),"function"==typeof t&&i.push(__errorTracer__.surroundThirdByTryCatch((function(){t.call(n,r)}),"at SelectorQuery callback function")),a.length?Promise.all(a).then((function(){i.forEach((function(e){return e()}))})):i.forEach((function(e){return e()}))}))}}]),t}()};function nl(e,t){return el[t]||(el[t]=tl(t)),new el[t](e)}var rl=function(e,t,n){var r=__virtualDOM__.requestViewInfo("intersection",t,e,(function(t){t.reqEnd&&__virtualDOM__.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},ol={};function il(e,t,n){return ol[n]||(ol[n]=function(e){return function(){function t(e,n){if(Object($.default)(this,t),this._component=e,this._options=n,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,e)this._webviewId=e.__wxWebviewId__;else{var r=__appServiceEngine__.getCurrentPagesByDomain("");r.length&&(this._webviewId=r[r.length-1].__wxWebviewId__)}}return Object(K.default)(t,[{key:"relativeTo",value:function(e,t){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:e,margins:t}),this}},{key:"relativeToViewport",value:function(e){if(null!==this._observerId)throw new Error('Relative nodes cannot be added after "observe" call in IntersectionObserver');return this._relativeInfo.push({selector:null,margins:e}),this}},{key:"observe",value:function(t,n){var r=this;if(null!==this._observerId)throw new Error('"observe" call can be only called once in IntersectionObserver');this._observerId="";var o=this._component;rl(this._webviewId,{type:"addIntersectionObserver",pluginId:e,nodeId:o?o.__wxExparserNodeId__:__virtualDOM__.getRootNodeId(this._webviewId),targetSelector:t,relativeInfo:this._relativeInfo,options:this._options},(function(e){r._disconnected||(e.observerId&&(r._observerId=e.observerId),e.info&&n.call(r,e.info))}))}},{key:"disconnect",value:function(){rl(this._webviewId,{type:"removeIntersectionObserver",observerId:this._observerId}),this._disconnected=!0}}]),t}()}(n)),new ol[n](e,t)}var al=function(e,t,n){var r=__virtualDOM__.requestViewInfo("matchMedia",t,e,(function(t){t.reqEnd&&__virtualDOM__.endViewInfoCallback(e,r),n&&(t.reqEnd||n(t))}))},sl={};function cl(e,t,n){return sl[n]||(sl[n]=function(){function e(t,n){Object($.default)(this,e),this._component=t,this._options=n,this._relativeInfo=[],this._observerId=null,this._disconnected=!1,this._webviewId=t.__wxWebviewId__}return Object(K.default)(e,[{key:"observe",value:function(e,t){var n=this;if(null!==this._observerId)throw new Error('"observe" call can be only called once in MediaQueryObserver');this._observerId="",al(this._webviewId,{type:"addMediaQueryObserver",mediaQueryCond:e},(function(e){n._disconnected||(e.observerId&&(n._observerId=e.observerId),e.info&&t.call(n,e.info))}))}},{key:"disconnect",value:function(){al(this._webviewId,{type:"removeMediaQueryObserver",observerId:this._observerId}),this._disconnected=!0}}]),e}()),new sl[n](e,t)}var ul=[],ll=null;function dl(){var e=ul;ul=[],ll=null;for(var t=0,n=e.length;t<n;t++){var r=e[t];r&&(r=__errorTracer__.surroundThirdByTryCatch(r,"at api nextTick callback function")),r&&r()}}var fl=function(e){e&&"function"==typeof e&&(ul.push(e),ll||(ll=setTimeout(dl,0)))},pl=n(183),hl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("uploadEncryptedFileToCDN",e,{})},vl=function(e){Object(R.onMethod)("onUploadEncryptedFileToCDNProgress",e)},gl=n(37),_l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("uploadToCommonCDN",e,{})},bl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(gl.checkPermissionSync)("uploadToCommonCDN"))Object(R.invokeMethod)("uploadToCommonCDN",e,{});else{var t="uploadToCommonCDN:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},yl=n(82),ml=n(130),wl=[{APINames:[/^connectSocket/],ios:{app:"clicfg_wegame_ios_use_wcwss",game:"clicfg_wegame_ios_use_wcwss"},android:{app:"clicfg_appbrand_socket_wcwss",game:"clicfg_appbrand_game_socket_wcwss"},version:1},{APINames:[/^request/,/^downloadFile/],ios:{app:"clicfg_wegame_ios_use_cronet_request",game:"clicfg_wegame_ios_use_cronet_request"},android:{app:"clicfg_appbrand_request_cdn",game:"clicfg_appbrand_game_request_cdn"},version:1},{APINames:[/^downloadFile/],ios:{app:"clicfg_appbrand_ios_native_download",game:"clicfg_appbrand_ios_native_download"},android:{app:"",game:""},version:2},{APINames:[/^connectSocket/],ios:{app:"clicfg_appbrand_ios_native_socket_wcwss",game:"clicfg_appbrand_ios_native_socket_wcwss"},android:{app:"clicfg_appbrand_native_socket_wcwss",game:"clicfg_appbrand_native_socket_wcwss"},version:2}];At.default.onReady((function(){if(Object(Lo.isGame)()||Object(Lo.isApp)()){var e=Object(Lo.isGame)()?"game":"app";wl.forEach((function(t){var n=t.APINames,r=t.version,o=t[ee.PLATFORM];o&&o[e]&&function(e,t,n){JSON.stringify(t),Object(yl._getABTestConfig)({experimentId:e,experimentType:"Expt",success:function(e){var r=e.testConfig;JSON.stringify(t),1===Number(r)&&t.forEach((function(e){Object(ml.setApiVersion)(e,n)}))}})}(o[e],n,r)}))}}));var Ol=n(86),Sl="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",Il="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function El(e){var t=e.isSuccess,n=e.invokeTime,r=e.costTime,o=e.wxdataQueueTimestamp,i=e.wxdataDequeueTimestamp,a=e.beginCGITimestamp,s=e.CGICallbackTimestamp,c=e.wxlibCallbackTimestamp,u=e.requestingCount,l=e.cost1,d=e.cost2,f=e.cost3,p=e.cost4,h=e.cost5,v=e.cost6,g=e.JSApiType;Math.random()<.002&&setTimeout((function(){var e,_=L.default.currentNetworkType,b=At.default.appType+1e3,y=At.default.appLaunchInfo&&void 0!==At.default.appLaunchInfo.scene?At.default.appLaunchInfo.scene:0,m=["","",t?1:0,n,r,_,"",b,y,Sl,Il,"",0,0,l,d,f,p,h,v,0,0,u,n,o,i,a,s,0,0,c,g].map((e=1024,function(t){return Object(re.isString)(t)&&t.length>e?t.substr(0,e):t})).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:m})}),0)}function Cl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}Object(re.isString)(Sl)&&(Sl=Sl.replace(" ","")),Object(re.isString)(Il)&&(Il=Il.replace(" ","-"));var Tl=0;function kl(e,t,n){var r=Date.now();if(Tl--,t.costTime=r-t.invokeTime,e.clientInfo&&"object"===Object(x.default)(e.clientInfo)){var o=e.clientInfo;t.wxdataQueueTimestamp=o.invokeTime,t.wxdataDequeueTimestamp=o.invokeTime,t.beginCGITimestamp=o.beginCGITimestamp,t.CGICallbackTimestamp=o.CGICallbackTimestamp,t.wxlibCallbackTimestamp=o.wxlibCallbackTimestamp,t.cost1=t.wxdataQueueTimestamp-t.invokeTime,t.cost2=t.wxdataDequeueTimestamp-t.wxdataQueueTimestamp,t.cost3=t.beginCGITimestamp-t.wxdataDequeueTimestamp,t.cost4=t.CGICallbackTimestamp-t.beginCGITimestamp,t.cost5=t.wxlibCallbackTimestamp-t.CGICallbackTimestamp,t.cost6=r-t.wxlibCallbackTimestamp,n&&n.__wxUseProfile__&&(e.__requestProfileInfo=t),delete e.clientInfo,El(t)}}Object(Ol.registerTaskType)("Request",{maxTaskCount:10,functionName:"request"}),At.default.onReady((function(){try{"number"==typeof At.default.wxAppInfo.maxRequestConcurrent&&Object(Ol.registerTaskType)("Request",{maxTaskCount:At.default.wxAppInfo.maxRequestConcurrent})}catch(e){}}));var Al=function(e){Object(G.default)(n,e);var t=Cl(n);function n(e){Object($.default)(this,n);var r={JSApiType:1,invokeTime:Date.now(),requestingCount:++Tl};return t.call(this,e,{taskType:"Request",beforeSend:function(t){return t.responseType=e.responseType,t.apiSigningSeq=e.apiSigningSeq,t.apiSignature=e.apiSignature,t},beforeSuccess:function(t){return r.isSuccess=!0,function(e){"string"==typeof e.data&&65279===e.data.charCodeAt(0)&&(e.data=e.data.substr(1))}(t),function(e){e.statusCode=parseInt(e.statusCode,10)}(t),function(e){"object"===Object(x.default)(e.header)&&(e.header=Object.keys(e.header).reduce((function(t,n){return Array.isArray(e.header[n])?t[n]=e.header[n].join(","):"string"==typeof e.header[n]&&(t[n]=e.header[n]),t}),{}))}(t),"json"===e.dataType&&function(e){try{e.data=JSON.parse(e.data)}catch(e){}}(t),kl(t,r,e),t},beforeFail:function(t){return r.isSuccess=!1,kl(t,r,e),t}})}return n}(Ol.NetworkTask),Pl=__safeway__.apiSign.makeApiSign,Dl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("request",t,{url:""}))if(!1!==Object(N.validateUrl)(t.url)){try{JSON.stringify(t.data)}catch(e){return void Object(R.beforeInvokeFail)("request",t,"fail to stringify data")}if("function"!=typeof t.data){var n=Object(N.getDataType)(t.header);t.header=t.header||{},t.header=Object(N.convertObjectValueToString)(t.header),"Undefined"!==n&&"Object"!==n&&(console.warn("wx.request: header must be an object"),t.header={}),t.header=Object.keys(t.header).reduce((function(e,n){return"content-type"===n.toLowerCase()?e[n.toLowerCase()]=t.header[n]:e[n]=t.header[n],e}),{});var r="text";t.responseType&&(r=t.responseType.toLowerCase());var o,i=t.header||{},a="GET";"string"==typeof t.method&&(a=t.method.toUpperCase()),t.dataType=t.dataType||"json",i["content-type"]=i["content-type"]||"application/json",o=void 0===t.data?"":"string"!=typeof t.data&&"ArrayBuffer"!==Object(N.getDataType)(t.data)?i["content-type"].indexOf("application/x-www-form-urlencoded")>-1?Object(N.urlEncodeFormData)(t.data,!0):i["content-type"].indexOf("application/json")>-1||"object"===Object(x.default)(t.data)?JSON.stringify(t.data):o.toString():t.data,"GET"===a&&(t.url=Object(N.addQueryStringToUrl)(t.url,t.data));try{var s=new Al(Object.assign({},t,{header:i,method:a,responseType:r,data:o},Pl("createRequestTask",{url:t.url,__skipDomainCheck__:e.__skipDomainCheck__})));return s}catch(e){return void Object(R.beforeInvokeFail)("request",t,e.message)}}else Object(R.beforeInvokeFail)("request",t,"data should not be Function")}else Object(R.beforeInvokeFail)("request",t,'invalid url "'+t.url+'"')}},jl=Dl(),xl=Dl({__skipDomainCheck__:!0});function Rl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}Object(Ol.registerTaskType)("Upload",{maxTaskCount:10,functionName:"uploadFile"}),At.default.onReady((function(){try{"number"==typeof At.default.wxAppInfo.maxUploadConcurrent&&Object(Ol.registerTaskType)("Upload",{maxTaskCount:At.default.wxAppInfo.maxUploadConcurrent})}catch(e){}}));var Ml,Nl=function(e){Object(G.default)(n,e);var t=Rl(n);function n(e){return Object($.default)(this,n),t.call(this,e,{taskType:"Upload",beforeSend:function(t){return t.filePath=e.filePath,t.name=e.name,t.formData=e.formData,t},beforeSuccess:function(e){return e}})}return n}(Ol.NetworkTask),Ll=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("uploadFile",t,{url:"",filePath:"",name:""})){"object"!==Object(x.default)(t.header)&&void 0!==t.header&&(console.warn("uploadFile: header must be an object"),delete t.header),"object"!==Object(x.default)(t.formData)&&void 0!==t.formData&&(console.warn("uploadFile: formData must be an object"),delete t.formData);var n={},r={};t.header&&(n=Object(N.convertObjectValueToString)(t.header)),t.formData&&(r=Object(N.convertObjectValueToString)(t.formData));try{var o=new Nl(Object.assign({},t,{header:n,formData:r,__skipDomainCheck__:e.__skipDomainCheck__}));return o}catch(e){return void Object(R.beforeInvokeFail)("uploadFile",t,e.message)}}}},Bl=Ll(),Fl=Ll({__skipDomainCheck__:!0}),Wl=n(85),Ul=0,Vl=new WeakMap,Gl=new WeakMap,Hl=new WeakMap,zl=new WeakMap,ql={},Yl=new Tr.Emitter;Object(R.onMethod)("onSocketTaskStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state,n=e.socketTaskId,r=ql[n];if(r){var o=Vl.get(r);if(delete e.state,delete e.socketTaskId,r){if("open"===t){r.readyState=r.OPEN;var i=Hl.get(r).url,a=1,s=Date.now()-zl.get(r),c="",u=e.statusCode,l=Hl.get(r).__skipDomainCheck__,d=0,f=e.profile;Object(Wl.reportNetworkAPI)("connectSocket",i,a,s,c,u,l,d,0,f)}else"close"!==t&&"error"!==t||(r.readyState=r.CLOSED);Yl.emit(""+o+t,e),Yl.emit("onSocket"+(t[0].toUpperCase()+t.substr(1)),e,r),"close"===t&&(delete ql[n],Yl.removeAllListeners(o+"open"),Yl.removeAllListeners(o+"close"),Yl.removeAllListeners(o+"error"),Yl.removeAllListeners(o+"message"))}}}));var Kl=function(e,t){Yl.on(""+Vl.get(this)+e,__errorTracer__.surroundThirdByTryCatch(t,"at socketTask.on"+e+" callback function"))},Jl=(J((Ml=function(){function e(t,n){var r=this;Object($.default)(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING;var o,i=Ul++;Vl.set(this,i),Hl.set(this,n),Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1}),["success","fail","complete"].forEach((function(e){"function"==typeof n[e]&&(n[e]=__errorTracer__.surroundThirdByTryCatch(n[e],"at api connectSocket "+e+" callback function"))})),zl.set(this,Date.now()),Object(re.isNumber)(n.timeout)||(n.timeout=0);var a=function(){Object(R.invokeMethod)("createSocketTask",n,{beforeAll:function(e){e.errMsg=e.errMsg.replace("createSocketTask","connectSocket")},beforeSuccess:function(e){Gl.set(r,e.socketTaskId),ql[e.socketTaskId]=r},beforeFail:function(e){var t=n.url,i=Date.now()-zl.get(r),a=n.__skipDomainCheck__;o=e.errMsg,Object(Wl.reportNetworkAPI)("connectSocket",t,2,i,o,"",a,0)}}),o&&(r.readyState=r.CLOSED,setTimeout((function(){Yl.emit(i+"error",{errMsg:o})}),0))};Object(re.isFunction)(n.customCheck)?n.customCheck(n,(function(e){e?(Object(R.beforeInvokeFail)("connectSocket",n,e),r.readyState=r.CLOSED,setTimeout((function(){Yl.emit(i+"error",{errMsg:e})}),0)):a()})):a()}return Object(K.default)(e,[{key:"send",value:function(e){var t=this;if(this.readyState===this.OPEN){var n=Date.now();Object(R.invokeMethod)("operateSocketTask",Object.assign({},e,{operationType:"send",socketTaskId:Gl.get(this)}),{beforeAll:function(r){if(r.errMsg=r.errMsg.replace("operateSocketTask","sendSocketMessage"),Math.random()>.99){var o=Hl.get(t).url,i=r.errMsg.indexOf("ok")>-1?1:2,a=Date.now()-n,s=r.errMsg,c=Hl.get(t).__skipDomainCheck__,u=Object(Lo.getDataLength)(e.data);Object(Wl.reportNetworkAPI)("sendSocketMessage",o,i,a,s,"",c,u)}}})}else Object(R.beforeInvokeFail)("SocketTask.send",e,"SocketTask.readyState is not OPEN")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("operateSocketTask",Object.assign({code:1e3},e,{operationType:"close",socketTaskId:Gl.get(this)}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateSocketTask","closeSocket")}})}},{key:"onOpen",value:function(e){Kl.call(this,"open",e)}},{key:"onClose",value:function(e){Kl.call(this,"close",e)}},{key:"onMessage",value:function(e){Kl.call(this,"message",e)}},{key:"onError",value:function(e){Kl.call(this,"error",e)}}]),e}()).prototype,"send",[Z.promised],Object.getOwnPropertyDescriptor(Ml.prototype,"send"),Ml.prototype),J(Ml.prototype,"close",[Z.promised],Object.getOwnPropertyDescriptor(Ml.prototype,"close"),Ml.prototype),Ml),Xl=n(178),$l=5;At.default.onReady((function(){At.default.wxAppInfo&&At.default.wxAppInfo.maxWebsocketConnect&&($l=At.default.wxAppInfo.maxWebsocketConnect)}));var Zl=Xe.default.WSS,Ql=new WeakMap,ed=new WeakMap,td=new WeakMap,nd={},rd=new Tr.Emitter,od=0,id=0;function ad(e,t,n){t.errMsg=t.errMsg||"ok";var r="ok"===t.errMsg;Object(R.beforeInvokeCallback)({name:e,args:n,success:r,errMsg:t.errMsg})}var sd=function(){function e(t,n){var r=this;Object($.default)(this,e),this.CONNECTING=0,this.OPEN=1,this.CLOSING=2,this.CLOSED=3,this.readyState=this.CONNECTING,Object.defineProperty(this,"__socketInstance__",{value:t,writable:!1,configurable:!1,enumerable:!1});var o=od++,i=new Zl;Ql.set(this,n),ed.set(this,i),td.set(this,o);var a=Date.now();i.onopen=function(e,t){r.readyState!==r.CLOSED&&(id++,r.readyState=r.OPEN,rd.emit(o+"open",{header:e,profile:t}),rd.emit("onSocketOpen",{header:e,profile:t},r),Object(Wl.reportNetworkAPI)("connectSocket",n.url,1,Date.now()-a,"","",n.__skipDomainCheck__,0,0,t))},i.onclose=function(e,t){id--,r.readyState=r.CLOSED,rd.emit(o+"close",{code:e,reason:t}),rd.emit("onSocketClose",{code:e,reason:t},r)},i.onmessage=function(e){r.readyState!==r.CLOSED&&(Object(re.isArrayBuffer)(e)&&(e.__proto__=ArrayBuffer.prototype),rd.emit(o+"message",{data:e}),rd.emit("onSocketMessage",{data:e},r))},i.onerror=function(e,t){id--,r.readyState=r.CLOSED,setTimeout((function(){rd.emit(o+"error",{errCode:e,errMsg:t}),rd.emit("onSocketError",{errCode:e,errMsg:t},r)}),0)};var s=function(){var e={errMsg:""};id>=$l?(r.readyState=r.CLOSED,e.errMsg="fail reach max websocket connect count "+$l):(e.errMsg=i.connect(Object(Lo.filterObject)(n,["url","header","timeout","protocols","tcpNoDelay","perMessageDeflate","enableProfile"])),"string"==typeof e.errMsg&&""!==e.errMsg||(e.errMsg="ok")),e.errMsg,"ok"===e.errMsg&&(nd[o]=r),ad("connectSocket",e,n)};Object(re.isFunction)(n.customCheck)?n.customCheck(n,(function(e){e?ad("connectSocket",{errMsg:e},n):s()})):(s(),Object(Xl.checkNetworkAPIURL)({api:"websocket",url:n.url}).then((function(e){if(n.url,!(n.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost))throw new Error("fail:url not in domain list")})).catch((function(e){r.readyState=r.CLOSED;var t=e.message||e.errMsg;rd.emit(o+"error",{errMsg:t}),rd.emit("onSocketError",{errMsg:t},r)})))}return Object(K.default)(e,[{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={errMsg:ed.get(this).send(e.data)};if(ad("sendSocketMessage",t,e),Math.random()<.01){var n=Ql.get(this).url,r=-1===t?2:1,o=0,i="",a="",s=Ql.get(this).__skipDomainCheck__,c=Object(Lo.getDataLength)(e.data);Object(Wl.reportNetworkAPI)("sendSocketMessage",n,r,o,i,a,s,c)}}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.readyState;var t={errMsg:ed.get(this).close(Object(re.isNumber)(e.code)?e.code:1e3,e.reason)};ad("closeSocket",t,e)}},{key:"onOpen",value:function(e){rd.on(td.get(this)+"open",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onOpen callback function"))}},{key:"onClose",value:function(e){rd.on(td.get(this)+"close",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onClose callback function"))}},{key:"onMessage",value:function(e){rd.on(td.get(this)+"message",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onMessage callback function"))}},{key:"onError",value:function(e){rd.on(td.get(this)+"error",__errorTracer__.surroundThirdByTryCatch(e,"at socketTask.onError callback function"))}}]),e}(),cd=Jl,ud=ql;Xe.default.WSS&&At.default.onReady((function(){var e=!1,t=ee.IS_IOS?"clicfg_appbrand_ios_native_socket_wcwss":"clicfg_appbrand_native_socket_wcwss";Object(yl._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=Object(gl.checkPermissionSync)("bindingWebSocket");(e||n)&&(cd=sd,ud=nd)}));var ld=new WeakMap,dd={};function fd(e,t){return dd[t]||(dd[t]=new WeakMap,Yl.on("onSocket"+t,pd(t)),rd.on("onSocket"+t,pd(t))),function(n){Object(R.beforeInvoke)("onSocket"+t,n,Z.noop)&&dd[t].set(e,n)}}function pd(e){return function(t,n){var r=n.__socketInstance__,o=dd[e].get(r),i=ld.get(r);o&&n===i&&__errorTracer__.surroundThirdByTryCatch(o,"at onSocket"+e+" callback function")(t)}}var hd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({__skipDomainCheck__:!1},e);var t={};return{connectSocket:function(n){if(Object(R.beforeInvoke)("connectSocket",n,{url:""}))if(!1!==Object(N.validateUrl)(n.url,"websocket")){"object"!==Object(x.default)(n.header)&&void 0!==n.header&&delete n.header;var r={};n.header&&(r=Object(N.convertObjectValueToString)(n.header)),n.__skipDomainCheck__=e.__skipDomainCheck__;try{var o=ld.get(t),i=new cd(t,Object.assign({},n,{header:r}));return o&&o.readyState!==o.CLOSED?o.readyState:ld.set(t,i),i}catch(e){return e.message,void Object(R.beforeInvokeFail)("connectSocket",n,e.message)}}else Object(R.beforeInvokeFail)("request",n,'invalid url "'+n.url+'"')},closeSocket:function(e){var n=ld.get(t);for(var r in n&&n.readyState!==n.CLOSED?(n.readyState=n.CLOSED,n.close(e)):Object(R.beforeInvokeFail)("closeSocket",e,"WebSocket is not connected"),ud){var o=ud[r];o.__socketInstance__===t&&(o.readyState=o.CLOSED,o!==n&&o.close())}},sendSocketMessage:function(e){var n=ld.get(t);n&&n.readyState===n.OPEN?n.send(e):Object(R.beforeInvokeFail)("sendSocketMessage",e,"WebSocket is not connected")},onSocketOpen:fd(t,"Open"),onSocketClose:fd(t,"Close"),onSocketMessage:fd(t,"Message"),onSocketError:fd(t,"Error")}},vd=hd(),gd=function(){return hd({__skipDomainCheck__:!0})},_d=new WeakMap,bd=new WeakMap,yd=new U.default;function md(e){var t=this,n=e.success,r=e.fail,o=e.complete;Object(R.invokeMethod)("addDownloadTaskForNative",Object.assign(e,{success:function(e){delete e.errMsg,t.taskId=e.downloadId,yd.on(t.taskId+":success",(function(e){e.errMsg="downloadApp:ok","function"==typeof n&&n(e),"function"==typeof o&&o(e)})),yd.on(t.taskId+":fail",(function(e){e.errMsg="downloadFile:fail "+e.errMsg,"function"==typeof r&&r(e),"function"==typeof o&&o(e)}));var i=bd.get(t)||[];_d.set(t,"ready"),i.forEach((function(e){wd.call.apply(wd,[t,e[0]].concat(Object(Y.default)(e[1])))})),yd.emit(t.taskId+":created",e)},fail:function(e){"function"==typeof r&&r(e),"function"==typeof o&&o(e)},complete:function(){bd.set(t,[])}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("addDownloadTaskForNative","downloadApp")}})}function wd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("ready"!==_d.get(this)){var o=bd.get(this)||[];return o.push([e,n]),void bd.set(this,o)}switch(e){case"cancel":Object(R.invokeMethod)("cancelDownloadTaskForNative",{downloadIdArray:[this.taskId]});break;case"onProgressUpdate":yd.on(this.taskId+":progressUpdate",(function(e){"function"==typeof n[0]&&__errorTracer__.surroundThirdByTryCatch(n[0],"at DownloadAppTask.onProgressUpdate callback function")(e)}));break;case"onCreated":yd.on(this.taskId+":created",(function(e){"function"==typeof n[0]&&__errorTracer__.surroundThirdByTryCatch(n[0],"at DownloadAppTask.onCreated callback function")(e)}));break;default:Object(R.invokeMethod)(e+"DownloadTaskForNative",{downloadId:this.taskId})}}Object(R.onMethod)("onDownloadAppStateChangeForNative",(function(e){var t=e.state,n=e.downloadId;switch(delete e.state,delete e.downloadId,delete e.appId,t){case"download_succ":yd.emit(n+":progressUpdate",e),yd.emit(n+":success",e);break;case"download_failed":yd.emit(n+":fail",e);break;case"download_progress_changed":yd.emit(n+":progressUpdate",e)}"download_succ"!==t&&"download_failed"!==t||(yd.removeAllListeners(n+":success"),yd.removeAllListeners(n+":fail"),yd.removeAllListeners(n+":progressUpdate"))}));var Od=function(){function e(t){Object($.default)(this,e),this.taskId=null,["success","fail","complete"].forEach((function(e){"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],"at api downloadApp "+e+" callback function"))})),md.call(this,t)}return Object(K.default)(e,[{key:"pause",value:function(){wd.call(this,"pause")}},{key:"resume",value:function(){wd.call(this,"resume")}},{key:"cancel",value:function(){wd.call(this,"cancel")}},{key:"install",value:function(){wd.call(this,"install")}},{key:"onCreated",value:function(e){wd.call(this,"onCreated",e)}},{key:"onProgressUpdate",value:function(e){wd.call(this,"onProgressUpdate",e)}}]),e}(),Sd=n(52),Id=n(93),Ed=function(e){if(Object(M.beforeInvoke)("getBackgroundFetchData",e,{fetchType:""}))if("pre"===e.fetchType||"periodic"===e.fetchType)try{Object(M.invokeMethod)("getBackgroundFetchData",{fetchType:e.fetchType,success:function(t){Object(M.beforeInvokeCallback)({name:"getBackgroundFetchData",args:e,res:t})},fail:function(t){Object(M.beforeInvokeCallback)({name:"getBackgroundFetchData",args:e,success:!1,errMsg:t.errMsg,res:t})},complete:function(){}})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:"getBackgroundFetchData:fail "+t.message}),"function"==typeof e.complete&&e.complete({errMsg:"getBackgroundFetchData:fail "+t.message})}else Object(M.beforeInvokeFail)("getBackgroundFetchData",e,"invalid fetchType")},Cd=function(e){try{Object(M.onMethod)("onBackgroundFetchData",(function(t){t.errMsg="onBackgroundFetchData:ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}))}catch(t){"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onBackgroundFetchData callback function")(t)}},Td=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(M.beforeInvoke)("setBackgroundFetchToken",e,{token:""})&&Object(M.invokeMethod)("setBackgroundFetchToken",e)},kd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(M.invokeMethod)("getBackgroundFetchToken",e)},Ad=n(146);function Pd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Dd=function(e){Object(G.default)(n,e);var t=Pd(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,"APP-SERVICE-SDK:"+e)).type="AppServiceSdkKnownError",r}return n}(Object(Ad.default)(Error)),jd=0,xd=function(e){return Array.isArray(e)?e.filter((function(e){return"string"==typeof e&&!e.startsWith("__plugins__")})):[]},Rd={setStorage:function(e){if(Object(R.beforeInvoke)("setStorage",e,{key:""}))try{var t=Object(Z.anyTypeToString)(e.data),n=t.data,r=t.dataType;Object(R.invokeMethod)("setStorage",{key:e.key,data:n,dataType:r,storageId:jd,success:e.success,fail:e.fail,complete:e.complete})}catch(t){"function"==typeof e.fail&&e.fail({errMsg:"setStorage:fail "+t.message}),"function"==typeof e.complete&&e.complete({errMsg:"setStorage:fail "+t.message})}},setStorageSync:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Object(R.beforeInvoke)("setStorage",e,"")){var n=ee.IS_IOS?"setStorage":"setStorageSync",r=Object(Z.anyTypeToString)(t),o=r.data,i=r.dataType,a=!1,s="";if(Object(R.invokeMethod)(n,{key:e,data:o,dataType:i,storageId:jd,fail:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a=!0,s=e.errMsg.replace("setStorage:","setStorageSync:")}}),a)throw new Dd(s)}},getStorage:function(e){Object(R.beforeInvoke)("getStorage",e,{key:""})&&Object(R.invokeMethod)("getStorage",Object.assign({},e,{storageId:jd}),{beforeSuccess:function(e){e.data=Object(Z.stringToAnyType)(e.data,e.dataType),delete e.dataType},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}})},getStorageSync:function(e){if(Object(re.isString)(e)){var t,n=ee.IS_IOS?"getStorage":"getStorageSync";return Object(R.invokeMethod)(n,{key:e,storageId:jd},{beforeAll:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=Object(Z.stringToAnyType)(e.data,e.dataType)},checkNeedReportFail:function(e){return-1===e.errMsg.indexOf("data not found")}}),t}},getStorageInfo:function(e){Object(R.invokeMethod)("getStorageInfo",Object.assign({},e,{storageId:jd}),{beforeAll:function(e){e.keys=xd(e.keys)}})},getStorageInfoSync:function(){var e;return Object(R.invokeMethod)("getStorageInfoSync",{storageId:jd},{beforeAll:function(t){e=t,t.keys=xd(t.keys),delete t.errMsg}}),e},removeStorage:function(e){Object(R.beforeInvoke)("removeStorage",e,{key:""})&&Object(R.invokeMethod)("removeStorage",Object.assign({},e,{storageId:jd}))},removeStorageSync:function(e){Object(R.beforeInvoke)("removeStorageSync",e,"")&&Object(R.invokeMethod)("removeStorageSync",{key:e,storageId:jd})},clearStorage:function(e){Object(R.invokeMethod)("clearStorage",Object.assign({},e,{storageId:jd}))},clearStorageSync:function(){var e=ee.IS_IOS?"clearStorage":"clearStorageSync";Object(R.invokeMethod)(e,{storageId:jd})}},Md={app:0,game:0,opendata:1,singlePage:2},Nd=function(e){var t=Md[e],n={};return Object.keys(Rd).forEach((function(e){var r=Rd[e];n[e]=function(){return jd=t,r.apply(void 0,arguments)}})),n},Ld={app:Nd("app"),game:Nd("game"),opendata:Nd("opendata"),singlePage:Nd("singlePage")},Bd=void 0,Fd={};["setStorage","getStorage","getStorageInfo","removeStorage","clearStorage"].forEach((function(e){Fd[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.key){var n=t.key.toString();if(n.startsWith("__plugins__"))return void Object(R.beforeInvokeFail)(e,t,'invalid key "'+t.key+'"')}var r=Ld[Object(Lo.isSinglePageMode)()?"singlePage":"app"];return r[""+e](t)},Fd[e+"Sync"]=function(t){var n;if(!t||!t.toString().startsWith("__plugins__")){for(var r=Ld[Object(Lo.isSinglePageMode)()?"singlePage":"app"],o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return(n=r[e+"Sync"]).call.apply(n,[Bd,t].concat(i))}};var t="plugin_"+e;Fd[t]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.key&&(t.key="__plugins__/"+t.key);var n=Ld[Object(Lo.isSinglePageMode)()?"singlePage":"app"];return n[""+e](t)},Fd[t+"Sync"]=function(t){var n;t&&(t="__plugins__/"+t);for(var r=Ld[Object(Lo.isSinglePageMode)()?"singlePage":"app"],o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return(n=r[e+"Sync"]).call.apply(n,[Bd,t].concat(i))}}));var Wd=Fd,Ud=JSON.parse('{"ad":{"unit-id":1,"ad-intervals":1,"ad-type":1,"ad-theme":1,"bindload":1,"binderror":1,"bindclose":1},"audio":{"id":1,"src":1,"loop":1,"controls":1,"poster":1,"name":1,"author":1,"binderror":1,"bindplay":1,"bindpause":1,"bindtimeupdate":1,"bindended":1},"button":{"size":["default","mini"],"type":["primary","default","warn"],"plain":1,"disabled":1,"loading":1,"form-type":["submit","reset"],"open-type":["contact","share","getPhoneNumber","getUserInfo","launchApp","openSetting","feedback"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"lang":["en","zh_CN","zh_TW"],"session-from":1,"send-message-title":1,"send-message-path":1,"send-message-img":1,"app-parameter":1,"show-message-card":1,"bindgetuserinfo":1,"bindcontact":1,"bindgetphonenumber":1,"binderror":1,"bindopensetting":1,"bindlaunchapp":1},"camera":{"mode":["normal","scanCode"],"resolution":["low","medium","high"],"device-position":["front","back"],"flash":["auto","on","off","torch"],"frame-size":["small","medium","large"],"bindstop":1,"binderror":1,"bindinitdone":1,"bindscancode":1},"canvas":{"type":1,"canvas-id":1,"disable-scroll":1,"bindtouchstart":1,"bindtouchmove":1,"bindtouchend":1,"bindtouchcancel":1,"bindlongtap":1,"binderror":1},"checkbox":{"value":1,"disabled":1,"checked":1,"color":1},"checkbox-group":{"bindchange":1},"cover-image":{"src":1,"bindload":1,"binderror":1},"cover-view":{"scroll-top":1},"editor":{"read-only":1,"placeholder":1,"show-img-size":1,"show-img-toolbar":1,"show-img-resize":1,"bindready":1,"bindfocus":1,"bindblur":1,"bindinput":1,"bindstatuschange":1},"form":{"report-submit":1,"report-submit-timeout":1,"bindsubmit":1,"bindreset":1},"functional-page-navigator":{"version":["develop","trial","release"],"name":["loginAndGetUserInfo","requestPayment","chooseAddress","chooseInvoice","chooseInvoiceTitle"],"args":1,"bindsuccess":1,"bindfail":1,"bindcancel":1},"icon":{"type":1,"size":1,"color":1},"image":{"src":1,"mode":["scaleToFill","aspectFit","aspectFill","widthFix","heightFix","top","bottom","center","left","right","top left","top right","bottom left","bottom right"],"webp":1,"lazy-load":1,"show-menu-by-longpress":1,"binderror":1,"bindload":1},"input":{"value":1,"type":["text","number","idcard","digit"],"password":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"cursor-spacing":1,"auto-focus":1,"focus":1,"confirm-type":["send","search","next","go","done"],"always-embed":1,"confirm-hold":1,"cursor":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"bindinput":1,"bindfocus":1,"bindblur":1,"bindconfirm":1,"bindkeyboardheightchange":1},"keyboard-accessory":{},"label":{"for":1},"live-player":{"src":1,"mode":["live","RTC"],"autoplay":1,"muted":1,"orientation":["vertical","horizontal"],"object-fit":["contain","fillCrop"],"background-mute":1,"min-cache":1,"max-cache":1,"sound-mode":["speaker","ear"],"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"picture-in-picture-mode":["[]","push","pop"],"bindstatechange":1,"bindfullscreenchange":1,"bindnetstatus":1,"bindaudiovolumenotify":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1},"live-pusher":{"url":1,"mode":1,"autopush":1,"muted":1,"enable-camera":1,"auto-focus":1,"orientation":["vertical","horizontal"],"beauty":1,"whiteness":1,"aspect":1,"min-bitrate":1,"max-bitrate":1,"audio-quality":1,"waiting-image":1,"waiting-image-hash":1,"zoom":1,"device-position":1,"background-mute":1,"mirror":1,"remote-mirror":1,"local-mirror":["auto","enable","disable"],"audio-reverb-type":["0","1","2","3","4","5","6","7"],"enable-mic":1,"enable-agc":1,"enable-ans":1,"audio-volume-type":["auto","media","voicecall"],"video-width":1,"video-height":1,"beauty-style":["smooth","nature"],"filter":["standard","pink","nostalgia","blues","romantic","cool","fresher","solor","aestheticism","whitening","cerisered"],"bindstatechange":1,"bindnetstatus":1,"binderror":1,"bindbgmstart":1,"bindbgmprogress":1,"bindbgmcomplete":1,"bindaudiovolumenotify":1},"map":{"longitude":1,"latitude":1,"scale":1,"min-scale":1,"max-scale":1,"markers":1,"covers":1,"polyline":1,"circles":1,"controls":1,"include-points":1,"show-location":1,"polygons":1,"subkey":1,"layer-style":1,"rotate":1,"skew":1,"enable-3D":1,"show-compass":1,"show-scale":1,"enable-overlooking":1,"enable-zoom":1,"enable-scroll":1,"enable-rotate":1,"enable-satellite":1,"enable-traffic":1,"enable-poi":1,"enable-building":1,"setting":1,"bindtap":1,"bindmarkertap":1,"bindlabeltap":1,"bindcontroltap":1,"bindcallouttap":1,"bindupdated":1,"bindregionchange":1,"bindpoitap":1,"bindanchorpointtap":1},"match-media":{"min-width":1,"max-width":1,"width":1,"min-height":1,"max-height":1,"height":1,"orientation":1},"movable-area":{"scale-area":1},"movable-view":{"direction":1,"inertia":1,"out-of-bounds":1,"x":1,"y":1,"damping":1,"friction":1,"disabled":1,"scale":1,"scale-min":1,"scale-max":1,"scale-value":1,"animation":1,"bindchange":1,"bindscale":1,"htouchmove":1,"vtouchmove":1},"navigation-bar":{"title":1,"loading":1,"front-color":1,"background-color":1,"color-animation-duration":1,"color-animation-timing-func":1},"navigator":{"target":["self","miniProgram"],"url":1,"open-type":["navigate","redirect","switchTab","reLaunch","navigateBack","exit"],"delta":1,"app-id":1,"path":1,"extra-data":1,"version":["develop","trial","release"],"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1,"bindsuccess":1,"bindfail":1,"bindcomplete":1},"official-account":{},"open-data":{"type":["groupName","userNickName","userAvatarUrl","userGender","userCity","userProvince","userCountry","userLanguage"],"open-gid":1,"lang":["en","zh_CN","zh_TW"],"default-text":1,"default-avatar":1,"binderror":1},"page-container":{"show":1,"duration":1,"z-index":1,"overlay":1,"position":1,"round":1,"close-on-slideDown":1,"overlay-style":1,"custom-style":1,"bind:beforeenter":1,"bind:enter":1,"bind:afterenter":1,"bind:beforeleave":1,"bind:leave":1,"bind:afterleave":1,"bind:clickoverlay":1},"page-meta":{"background-text-style":1,"background-color":1,"background-color-top":1,"background-color-bottom":1,"root-background-color":1,"scroll-top":1,"scroll-duration":1,"page-style":1,"page-font-size":1,"root-font-size":1,"page-orientation":1,"bindresize":1,"bindscroll":1,"bindscrolldone":1},"picker":{"header-text":1,"mode":["selector","multiSelector","time","date","region"],"disabled":1,"bindcancel":1},"picker-view":{"value":1,"indicator-style":1,"indicator-class":1,"mask-style":1,"mask-class":1,"bindchange":1,"bindpickstart":1,"bindpickend":1},"picker-view-column":{},"progress":{"percent":1,"show-info":1,"border-radius":1,"font-size":1,"stroke-width":1,"color":1,"activeColor":1,"backgroundColor":1,"active":1,"active-mode":1,"duration":1,"bindactiveend":1},"radio":{"value":1,"checked":1,"disabled":1,"color":1},"radio-group":{"bindchange":1},"rich-text":{"nodes":1,"space":["ensp","emsp","nbsp"]},"scroll-view":{"scroll-x":1,"scroll-y":1,"upper-threshold":1,"lower-threshold":1,"scroll-top":1,"scroll-left":1,"scroll-into-view":1,"scroll-with-animation":1,"enable-back-to-top":1,"enable-flex":1,"scroll-anchoring":1,"refresher-enabled":1,"refresher-threshold":1,"refresher-default-style":1,"refresher-background":1,"refresher-triggered":1,"enhanced":1,"bounces":1,"show-scrollbar":1,"paging-enabled":1,"fast-deceleration":1,"binddragstart":1,"binddragging":1,"binddragend":1,"bindscrolltoupper":1,"bindscrolltolower":1,"bindscroll":1,"bindrefresherpulling":1,"bindrefresherrefresh":1,"bindrefresherrestore":1,"bindrefresherabort":1},"share-element":{"key":1,"transform":1,"duration":1,"easing-function":1},"slider":{"min":1,"max":1,"step":1,"disabled":1,"value":1,"color":1,"selected-color":1,"activeColor":1,"backgroundColor":1,"block-size":1,"block-color":1,"show-value":1,"bindchange":1,"bindchanging":1},"swiper":{"indicator-dots":1,"indicator-color":1,"indicator-active-color":1,"autoplay":1,"current":1,"interval":1,"duration":1,"circular":1,"vertical":1,"previous-margin":1,"next-margin":1,"snap-to-edge":1,"display-multiple-items":1,"easing-function":["default","linear","easeInCubic","easeOutCubic","easeInOutCubic"],"bindchange":1,"bindtransition":1,"bindanimationfinish":1},"swiper-item":{"item-id":1,"skip-hidden-item-layout":1},"switch":{"checked":1,"disabled":1,"type":1,"color":1,"bindchange":1},"text":{"selectable":1,"user-select":1,"space":["ensp","emsp","nbsp"],"decode":1},"textarea":{"value":1,"placeholder":1,"placeholder-style":1,"placeholder-class":1,"disabled":1,"maxlength":1,"auto-focus":1,"focus":1,"auto-height":1,"fixed":1,"cursor-spacing":1,"cursor":1,"show-confirm-bar":1,"selection-start":1,"selection-end":1,"adjust-position":1,"hold-keyboard":1,"disable-default-padding":1,"confirm-type":["send","search","next","go","done","return"],"confirm-hold":1,"bindfocus":1,"bindblur":1,"bindlinechange":1,"bindinput":1,"bindconfirm":1,"bindkeyboardheightchange":1},"video":{"src":1,"duration":1,"controls":1,"danmu-list":1,"danmu-btn":1,"enable-danmu":1,"autoplay":1,"loop":1,"muted":1,"initial-time":1,"page-gesture":1,"direction":["0","90","-90"],"show-progress":1,"show-fullscreen-btn":1,"show-play-btn":1,"show-center-play-btn":1,"enable-progress-gesture":1,"object-fit":["contain","fill","cover"],"poster":1,"show-mute-btn":1,"title":1,"play-btn-position":["bottom","center"],"enable-play-gesture":1,"auto-pause-if-navigate":1,"auto-pause-if-open-native":1,"vslide-gesture":1,"vslide-gesture-in-fullscreen":1,"ad-unit-id":1,"poster-for-crawler":1,"show-casting-button":1,"picture-in-picture-mode":["[]","push","pop"],"picture-in-picture-show-progress":1,"enable-auto-rotation":1,"show-screen-lock-button":1,"show-snapshot-button":1,"show-background-playback-button":1,"background-poster":1,"bindplay":1,"bindpause":1,"bindended":1,"bindtimeupdate":1,"bindfullscreenchange":1,"bindwaiting":1,"binderror":1,"bindprogress":1,"bindloadedmetadata":1,"bindcontrolstoggle":1,"bindenterpictureinpicture":1,"bindleavepictureinpicture":1,"bindseekcomplete":1},"view":{"hover-class":1,"hover-stop-propagation":1,"hover-start-time":1,"hover-stay-time":1},"voip-room":{"openid":1,"mode":1,"device-position":1,"binderror":1},"web-view":{"src":1,"bindmessage":1,"bindload":1,"binderror":1},"ad-custom":{"unit-id":1,"ad-intervals":1,"bindload":1,"binderror":1},"aria-component":{},"native-component":{}}'),Vd=JSON.parse('{"class":{"console":["debug","log","info","warn","error","group","groupEnd"],"env":["USER_DATA_PATH"],"CanvasContext":["draw","createLinearGradient","createCircularGradient","createPattern","measureText","save","restore","beginPath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arc","rect","arcTo","clip","fillRect","strokeRect","clearRect","fill","stroke","closePath","scale","rotate","translate","drawImage","strokeText","transform","setTransform","setFillStyle","setStrokeStyle","setShadow","setGlobalAlpha","setLineWidth","setLineJoin","setLineCap","setLineDash","setMiterLimit","fillText","setFontSize","setTextAlign","setTextBaseline","fillStyle","strokeStyle","shadowOffsetX","shadowOffsetY","shadowColor","shadowBlur","lineWidth","lineCap","lineJoin","miterLimit","lineDashOffset","font","globalAlpha","globalCompositeOperation"],"CanvasGradient":["addColorStop"],"OffscreenCanvas":["getContext","createImage","width","height"],"Color":[],"EventChannel":["emit","on","once","off"],"IntersectionObserver":["relativeTo","relativeToViewport","observe","disconnect"],"MediaQueryObserver":["observe","disconnect"],"NodesRef":["fields","boundingClientRect","scrollOffset","context","node"],"SelectorQuery":["in","select","selectAll","selectViewport","exec"],"AudioContext":["setSrc","play","pause","seek"],"InnerAudioContext":["play","pause","stop","seek","destroy","onCanplay","offCanplay","onPlay","offPlay","onPause","offPause","onStop","offStop","onEnded","offEnded","onTimeUpdate","offTimeUpdate","onError","offError","onWaiting","offWaiting","onSeeking","offSeeking","onSeeked","offSeeked","src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered"],"CameraContext":["onCameraFrame","takePhoto","setZoom","startRecord","stopRecord"],"CameraFrameListener":["start","stop"],"EditorContext":["format","insertDivider","insertImage","insertText","setContents","getContents","clear","removeFormat","undo","redo","blur","scrollIntoView","getSelectionText"],"LivePlayerContext":["play","stop","mute","pause","resume","requestFullScreen","exitFullScreen","exitPictureInPicture","snapshot","requestPictureInPicture"],"LivePusherContext":["start","stop","pause","resume","switchCamera","snapshot","toggleTorch","playBGM","stopBGM","pauseBGM","resumeBGM","setBGMVolume","setMICVolume","startPreview","stopPreview","sendMessage"],"MapContext":["getCenterLocation","setLocMarkerIcon","moveToLocation","translateMarker","moveAlong","includePoints","getRegion","getRotate","getSkew","getScale","setCenterOffset","removeCustomLayer","addCustomLayer","addGroundOverlay","updateGroundOverlay","removeGroundOverlay","toScreenLocation","fromScreenLocation","openMapApp","addMarkers","removeMarkers","initMarkerCluster","on"],"ScrollViewContext":["scrollTo","scrollIntoView","scrollEnabled","bounces","showScrollbar","pagingEnabled","fastDeceleration","decelerationDisabled"],"VideoContext":["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback"],"LogManager":["debug","info","log","warn"],"RealtimeLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"RealtimeTagLogManager":["info","warn","error","setFilterMsg","addFilterMsg"],"IBeaconInfo":["uuid","major","minor","proximity","accuracy","rssi"],"MediaRecorder":["pause","resume","start","stop","requestFrame","on","off","destroy"],"VideoDecoder":["start","seek","stop","remove","getFrameData","on","off"],"MediaTrack":["kind","duration","volume"],"MediaContainer":["extractDataSource","addTrack","removeTrack","export","destroy"],"UserInfo":["nickName","avatarUrl","gender","country","province","city","language"],"EntryList":["getEntries","getEntriesByType","getEntriesByName"],"Performance":["getEntries","getEntriesByType","getEntriesByName","createObserver","setBufferSize"],"PerformanceObserver":["observe","disconnect","supportedEntryTypes"],"Animation":["export","step","matrix","matrix3d","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","translate","translate3d","translateX","translateY","translateZ","opacity","backgroundColor","width","height","left","right","top","bottom"],"UpdateManager":["applyUpdate","onCheckForUpdate","onUpdateReady","onUpdateFailed"],"Worker":["postMessage","terminate","onMessage","onProcessKilled"],"FileSystemManager":[],"readResult":["bytesRead","arrayBuffer"],"Stats":["isDirectory","isFile","mode","size","lastAccessedTime","lastModifiedTime"],"writeResult":["bytesWritten"],"UDPSocket":["bind","send","connect","write","close","onClose","offClose","onError","offError","onListening","offListening","onMessage","offMessage"],"Canvas":["getContext","createImage","requestAnimationFrame","cancelAnimationFrame","createImageData","createPath2D","toDataURL","width","height"],"RenderingContext":[],"Image":["src","width","height","onload","onerror"],"NFCAdapter":["startDiscovery","stopDiscovery","getNdef","getNfcA","getNfcB","getIsoDep","getNfcF","getNfcV","getMifareClassic","getMifareUltralight","onDiscovered","offDiscovered","tech"],"Ndef":["connect","close","setTimeout","isConnected","onNdefMessage","offNdefMessage","writeNdefMessage"],"NfcA":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getAtqa","getSak"],"NfcB":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"IsoDep":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive","getHistoricalBytes"],"NfcF":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"NfcV":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareClassic":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"MifareUltralight":["connect","close","setTimeout","isConnected","getMaxTransceiveLength","transceive"],"WifiInfo":["SSID","BSSID","secure","signalStrength","frequency"],"BackgroundAudioManager":["play","pause","seek","stop","onCanplay","onWaiting","onError","onPlay","onPause","onSeeking","onSeeked","onEnded","onStop","onTimeUpdate","onNext","onPrev","src","startTime","title","epname","singer","coverImgUrl","webUrl","protocol","playbackRate","duration","currentTime","paused","buffered"],"RecorderManager":["start","pause","resume","stop","onStart","onResume","onPause","onStop","onFrameRecorded","onError","onInterruptionBegin","onInterruptionEnd"],"DownloadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"RequestTask":["abort","onHeadersReceived","offHeadersReceived"],"SocketTask":["send","close","onOpen","onClose","onError","onMessage"],"UploadTask":["abort","onProgressUpdate","offProgressUpdate","onHeadersReceived","offHeadersReceived"],"AuthSetting":["scope.userInfo","scope.userLocation","scope.address","scope.invoiceTitle","scope.invoice","scope.werun","scope.record","scope.writePhotosAlbum","scope.camera"],"SubscriptionsSetting":["mainSwitch","itemSettings"],"ImageData":["width","height","data"],"Path2D":[],"BLEPeripheralServer":["addService","removeService","startAdvertising","stopAdvertising","writeCharacteristicValue","onCharacteristicWriteRequest","offCharacteristicWriteRequest","onCharacteristicReadRequest","offCharacteristicReadRequest","onCharacteristicSubscribed","offCharacteristicSubscribed","onCharacteristicUnsubscribed","offCharacteristicUnsubscribed"],"MediaAudioPlayer":["start","addAudioSource","removeAudioSource","stop","destroy","volume"],"RewardedVideoAd":["load","show","destroy","onLoad","offLoad","onError","offError","onClose","offClose"]},"method":{"arrayBufferToBase64":{},"base64ToArrayBuffer":{},"exitVoIPChat":{"object":{},"success":{}},"joinVoIPChat":{"object":{"roomType":["voice","video"],"signature":1,"nonceStr":1,"timeStamp":1,"groupId":1,"muteConfig":1},"success":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatInterrupted":{"callback":{"errCode":1,"errMsg":1}},"offVoIPChatInterrupted":{},"onVoIPChatMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPChatMembersChanged":{},"onVoIPChatSpeakersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"onVoIPChatStateChanged":{"callback":{"code":1,"data":1,"errCode":1,"errMsg":1}},"offVoIPChatStateChanged":{"callback":{}},"onVoIPVideoMembersChanged":{"callback":{"openIdList":1,"errCode":1,"errMsg":1}},"offVoIPVideoMembersChanged":{"callback":{}},"subscribeVoIPVideoMembers":{"object":{"openIdList":1},"success":{}},"updateVoIPChatMuteConfig":{"object":{"muteConfig":1},"success":{}},"getAccountInfoSync":{},"onAppHide":{"callback":{}},"offAppHide":{"callback":{}},"onAppShow":{"callback":{"path":1,"scene":1,"query":1,"shareTicket":1,"referrerInfo":["appId","extraData"],"forwardMaterials":1}},"offAppShow":{"callback":{}},"getEnterOptionsSync":{},"onError":{"callback":{}},"offError":{},"onUnhandledRejection":{"callback":{"reason":1,"promise":1}},"offUnhandledRejection":{"callback":{}},"getLaunchOptionsSync":{},"onCopyUrl":{"callback":{"query":1}},"offCopyUrl":{"callback":{}},"onPageNotFound":{"callback":{"path":1,"query":1,"isEntryPage":1}},"offPageNotFound":{"callback":{}},"onThemeChange":{"callback":{"theme":["dark","light"]}},"offThemeChange":{"callback":{}},"canvasGetImageData":{"object":{"canvasId":1,"x":1,"y":1,"width":1,"height":1},"success":{"width":1,"height":1,"data":1}},"canvasPutImageData":{"object":{"canvasId":1,"data":1,"x":1,"y":1,"width":1,"height":1},"success":{}},"canvasToTempFilePath":{"object":{"x":1,"y":1,"width":1,"height":1,"destWidth":1,"destHeight":1,"canvasId":1,"canvas":1,"fileType":["jpg","png"],"quality":1},"success":{"tempFilePath":1}},"createCanvasContext":{},"createOffscreenCanvas":{"object":{"type":["webgl","2d"],"width":1,"height":1,"compInst":1}},"createIntersectionObserver":{},"nextTick":{},"createSelectorQuery":{},"createAudioContext":{},"createCameraContext":{},"createLivePlayerContext":{},"createLivePusherContext":{},"createMapContext":{},"createVideoContext":{},"createInnerAudioContext":{},"getLogManager":{"object":{"level":1}},"setEnableDebug":{"object":{"enableDebug":1},"success":{}},"getRealtimeLogManager":{},"startAccelerometer":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopAccelerometer":{"object":{},"success":{}},"onAccelerometerChange":{"callback":{"x":1,"y":1,"z":1}},"offAccelerometerChange":{},"checkIsOpenAccessibility":{"object":{},"success":{"open":1}},"getBatteryInfo":{"object":{},"success":{"level":1,"isCharging":1}},"getBatteryInfoSync":{"return":{"level":1,"isCharging":1}},"addPhoneCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1},"success":{}},"addPhoneRepeatCalendar":{"object":{"title":1,"startTime":1,"allDay":1,"description":1,"location":1,"endTime":1,"alarm":1,"alarmOffset":1,"repeatInterval":1,"repeatEndTime":1},"success":{}},"getClipboardData":{"object":{},"success":{"data":1}},"setClipboardData":{"object":{"data":1},"success":{}},"startCompass":{"object":{},"success":{}},"stopCompass":{"object":{},"success":{}},"onCompassChange":{"callback":{"direction":1,"accuracy":1}},"offCompassChange":{},"chooseContact":{"object":{},"success":{"phoneNumber":1,"displayName":1,"phoneNumberList":1}},"addPhoneContact":{"object":{"firstName":1,"photoFilePath":1,"nickName":1,"lastName":1,"middleName":1,"remark":1,"mobilePhoneNumber":1,"weChatNumber":1,"addressCountry":1,"addressState":1,"addressCity":1,"addressStreet":1,"addressPostalCode":1,"organization":1,"title":1,"workFaxNumber":1,"workPhoneNumber":1,"hostNumber":1,"email":1,"url":1,"workAddressCountry":1,"workAddressState":1,"workAddressCity":1,"workAddressStreet":1,"workAddressPostalCode":1,"homeFaxNumber":1,"homePhoneNumber":1,"homeAddressCountry":1,"homeAddressState":1,"homeAddressCity":1,"homeAddressStreet":1,"homeAddressPostalCode":1},"success":{}},"searchContacts":{"object":{"phoneNumber":1},"success":{"result":1}},"getRandomValues":{"object":{"length":1},"success":{"randomValues":1}},"startGyroscope":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopGyroscope":{"object":{},"success":{}},"onGyroscopeChange":{"callback":{"x":1,"y":1,"z":1}},"offGyroscopeChange":{},"startBeaconDiscovery":{"object":{"uuids":1,"ignoreBluetoothAvailable":1},"success":{}},"stopBeaconDiscovery":{"object":{},"success":{}},"getBeacons":{"object":{},"success":{"beacons":1}},"onBeaconUpdate":{"callback":{"beacons":1}},"offBeaconUpdate":{"callback":{}},"onBeaconServiceChange":{"callback":{"available":1,"discovering":1}},"offBeaconServiceChange":{"callback":{}},"startLocalServiceDiscovery":{"object":{"serviceType":1},"success":{}},"stopLocalServiceDiscovery":{"object":{},"success":{}},"onLocalServiceFound":{"callback":{"serviceType":1,"serviceName":1,"ip":1,"port":1}},"offLocalServiceFound":{"callback":{}},"onLocalServiceLost":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceLost":{"callback":{}},"onLocalServiceDiscoveryStop":{"callback":{}},"offLocalServiceDiscoveryStop":{"callback":{}},"onLocalServiceResolveFail":{"callback":{"serviceType":1,"serviceName":1}},"offLocalServiceResolveFail":{"callback":{}},"startDeviceMotionListening":{"object":{"interval":["game","ui","normal"]},"success":{}},"stopDeviceMotionListening":{"object":{},"success":{}},"onDeviceMotionChange":{"callback":{"alpha":1,"beta":1,"gamma":1}},"offDeviceMotionChange":{},"getNetworkType":{"object":{},"success":{"networkType":["wifi","2g","3g","4g","5g","unknown","none"],"signalStrength":1}},"onNetworkStatusChange":{"callback":{"isConnected":1,"networkType":["wifi","2g","3g","4g","unknown","none"]}},"offNetworkStatusChange":{},"makePhoneCall":{"object":{"phoneNumber":1},"success":{}},"scanCode":{"object":{"onlyFromCamera":1,"scanType":["barCode","qrCode","datamatrix","pdf417"]},"success":{"result":1,"scanType":["QR_CODE","AZTEC","CODABAR","CODE_39","CODE_93","CODE_128","DATA_MATRIX","EAN_8","EAN_13","ITF","MAXICODE","PDF_417","RSS_14","RSS_EXPANDED","UPC_A","UPC_E","UPC_EAN_EXTENSION","WX_CODE","CODE_25"],"charSet":1,"path":1,"rawData":1}},"getSystemInfo":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"getSystemInfoSync":{},"getSystemInfoAsync":{"object":{},"success":{"brand":1,"model":1,"pixelRatio":1,"screenWidth":1,"screenHeight":1,"windowWidth":1,"windowHeight":1,"statusBarHeight":1,"language":1,"version":1,"system":1,"platform":1,"fontSizeSetting":1,"SDKVersion":1,"benchmarkLevel":1,"albumAuthorized":1,"cameraAuthorized":1,"locationAuthorized":1,"microphoneAuthorized":1,"notificationAuthorized":1,"notificationAlertAuthorized":1,"notificationBadgeAuthorized":1,"notificationSoundAuthorized":1,"bluetoothEnabled":1,"locationEnabled":1,"wifiEnabled":1,"safeArea":["left","right","top","bottom","width","height"],"locationReducedAccuracy":1,"theme":["dark","light"],"host":["appId"],"enableDebug":1,"deviceOrientation":["portrait","landscape"]}},"vibrateShort":{"object":{"type":1},"success":{}},"vibrateLong":{"object":{},"success":{}},"getExptInfoSync":{"return":{}},"reportEvent":{},"getExtConfig":{"object":{},"success":{"extConfig":1}},"getExtConfigSync":{"return":{}},"chooseLocation":{"object":{"latitude":1,"longitude":1},"success":{"name":1,"address":1,"latitude":1,"longitude":1}},"choosePoi":{"object":{},"success":{"type":1,"city":1,"name":1,"address":1,"latitude":1,"longitude":1}},"getLocation":{"object":{"type":1,"altitude":1,"isHighAccuracy":1,"highAccuracyExpireTime":1},"success":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"onLocationChange":{"callback":{"latitude":1,"longitude":1,"speed":1,"accuracy":1,"altitude":1,"verticalAccuracy":1,"horizontalAccuracy":1}},"offLocationChange":{"callback":{}},"startLocationUpdateBackground":{"object":{},"success":{}},"startLocationUpdate":{"object":{},"success":{}},"stopLocationUpdate":{"object":{},"success":{}},"openLocation":{"object":{"latitude":1,"longitude":1,"scale":1,"name":1,"address":1},"success":{}},"onAudioInterruptionBegin":{"callback":{}},"offAudioInterruptionBegin":{"callback":{}},"onAudioInterruptionEnd":{"callback":{}},"offAudioInterruptionEnd":{"callback":{}},"chooseMedia":{"object":{"count":1,"mediaType":["image","video"],"sourceType":["album","camera"],"maxDuration":1,"sizeType":1,"camera":["back","front"]},"success":{"tempFiles":1,"type":1}},"chooseMessageFile":{"object":{"count":1,"type":["all","video","image","file"],"extension":1},"success":{"tempFiles":1}},"loadFontFace":{"object":{"global":1,"family":1,"source":1,"desc":["style","weight","variant"],"scopes":1},"success":{"status":1}},"chooseImage":{"object":{"count":1,"sizeType":["original","compressed"],"sourceType":["album","camera"]},"success":{"tempFilePaths":1,"tempFiles":1}},"previewImage":{"object":{"urls":1,"showmenu":1,"current":1},"success":{}},"getImageInfo":{"object":{"src":1},"success":{"width":1,"height":1,"path":1,"orientation":["up","up-mirrored","down","down-mirrored","left-mirrored","right","right-mirrored","left"],"type":1}},"saveImageToPhotosAlbum":{"object":{"filePath":1},"success":{}},"compressImage":{"object":{"src":1,"quality":1},"success":{"tempFilePath":1}},"createMediaRecorder":{},"openVideoEditor":{"object":{"filePath":1},"success":{"duration":1,"size":1,"tempFilePath":1,"tempThumbPath":1}},"previewMedia":{"object":{"sources":1,"current":1,"showmenu":1},"success":{}},"chooseVideo":{"object":{"sourceType":["album","camera"],"compressed":1,"maxDuration":1,"camera":["back","front"]},"success":{"tempFilePath":1,"duration":1,"size":1,"height":1,"width":1}},"saveVideoToPhotosAlbum":{"object":{"filePath":1},"success":{}},"getVideoInfo":{"object":{"src":1},"success":{"orientation":["up","down","left","right","up-mirrored","down-mirrored","left-mirrored","right-mirrored"],"type":1,"duration":1,"size":1,"height":1,"width":1,"fps":1,"bitrate":1}},"compressVideo":{"object":{"src":1,"quality":["low","medium","high"],"bitrate":1,"fps":1,"resolution":1},"success":{"tempFilePath":1,"size":1}},"createVideoDecoder":{},"createMediaContainer":{},"downloadFile":{"object":{"url":1,"header":1,"timeout":1,"filePath":1},"success":{"tempFilePath":1,"filePath":1,"statusCode":1,"profile":1}},"request":{"object":{"url":1,"data":1,"header":1,"timeout":1,"method":["OPTIONS","GET","HEAD","POST","PUT","DELETE","TRACE","CONNECT"],"dataType":["json","其他"],"responseType":["text","arraybuffer"],"enableHttp2":1,"enableQuic":1,"enableCache":1},"success":{"data":1,"statusCode":1,"header":1,"cookies":1,"profile":1}},"uploadFile":{"object":{"url":1,"filePath":1,"name":1,"header":1,"formData":1,"timeout":1},"success":{"data":1,"statusCode":1}},"login":{"object":{"timeout":1},"success":{"code":1}},"checkSession":{"object":{},"success":{}},"chooseAddress":{"object":{},"success":{"userName":1,"postalCode":1,"provinceName":1,"cityName":1,"countyName":1,"detailInfo":1,"nationalCode":1,"telNumber":1,"errMsg":1}},"authorize":{"object":{"scope":1},"success":{}},"addCard":{"object":{"cardList":1},"success":{"cardList":1}},"openCard":{"object":{"cardList":1},"success":{}},"chooseInvoice":{"object":{},"success":{"invoiceInfo":1}},"chooseInvoiceTitle":{"object":{},"success":{"type":["0","1"],"title":1,"taxNumber":1,"companyAddress":1,"telephone":1,"bankName":1,"bankAccount":1,"errMsg":1}},"getGroupEnterInfo":{"object":{},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserInfo":{"object":{"withCredentials":1,"lang":["en","zh_CN","zh_TW"]},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"getUserProfile":{"object":{"lang":["en","zh_CN","zh_TW"],"desc":1},"success":{"userInfo":1,"rawData":1,"signature":1,"encryptedData":1,"iv":1,"cloudID":1}},"requestPayment":{"object":{"timeStamp":1,"nonceStr":1,"package":1,"signType":["MD5","HMAC-SHA256","RSA"],"paySign":1},"success":{}},"requestOrderPayment":{},"requestSubscribeMessage":{"object":{"tmplIds":1},"success":{"errMsg":1,"TEMPLATE_ID":1}},"getWeRunData":{"object":{},"success":{"encryptedData":1,"iv":1,"cloudID":1}},"getPerformance":{},"onMemoryWarning":{"callback":{"level":["5","10","15"]}},"offMemoryWarning":{},"reportPerformance":{},"reportAnalytics":{},"reportMonitor":{},"getBackgroundFetchData":{"object":{"fetchType":1},"success":{}},"onBackgroundFetchData":{"callback":{"fetchType":1,"fetchedData":1,"timeStamp":1}},"setBackgroundFetchToken":{"object":{"token":1},"success":{}},"getBackgroundFetchToken":{"object":{},"success":{}},"createAnimation":{"object":{"duration":1,"timingFunction":["linear","ease","ease-in","ease-in-out","ease-out","step-start","step-end"],"delay":1,"transformOrigin":1}},"enableAlertBeforeUnload":{"object":{"message":1},"success":{}},"disableAlertBeforeUnload":{"object":{},"success":{}},"getMenuButtonBoundingClientRect":{},"getSelectedTextRange":{"object":{},"success":{"start":1,"end":1}},"hideKeyboard":{"object":{},"success":{}},"showModal":{"object":{"title":1,"content":1,"showCancel":1,"cancelText":1,"cancelColor":1,"confirmText":1,"confirmColor":1},"success":{"content":1,"confirm":1,"cancel":1}},"showToast":{"object":{"title":1,"icon":["success","error","loading","none"],"image":1,"duration":1,"mask":1},"success":{}},"hideToast":{"object":{},"success":{}},"showLoading":{"object":{"title":1,"mask":1},"success":{}},"hideLoading":{"object":{},"success":{}},"showActionSheet":{"object":{"alertText":1,"itemList":1,"itemColor":1},"success":{"tapIndex":1}},"onKeyboardHeightChange":{"callback":{"height":1}},"offKeyboardHeightChange":{},"pageScrollTo":{"object":{"scrollTop":1,"duration":1,"selector":1},"success":{}},"startPullDownRefresh":{"object":{},"success":{}},"stopPullDownRefresh":{"object":{},"success":{}},"onWindowResize":{"callback":{"size":["windowWidth","windowHeight"]}},"offWindowResize":{"callback":{}},"setBackgroundColor":{"object":{"backgroundColor":1,"backgroundColorTop":1,"backgroundColorBottom":1},"success":{}},"setBackgroundTextStyle":{"object":{"textStyle":["dark","light"]},"success":{}},"setWindowSize":{"object":{"width":1,"height":1},"success":{}},"setTabBarBadge":{"object":{"index":1,"text":1},"success":{}},"removeTabBarBadge":{"object":{"index":1},"success":{}},"showTabBarRedDot":{"object":{"index":1},"success":{}},"hideTabBarRedDot":{"object":{"index":1},"success":{}},"showTabBar":{"object":{"animation":1},"success":{}},"hideTabBar":{"object":{"animation":1},"success":{}},"setTabBarStyle":{"object":{"color":1,"selectedColor":1,"backgroundColor":1,"borderStyle":1},"success":{}},"setTabBarItem":{"object":{"index":1,"text":1,"iconPath":1,"selectedIconPath":1},"success":{}},"setTopBarText":{"object":{"text":1},"success":{}},"getUpdateManager":{},"updateWeChatApp":{"object":{},"success":{}},"createWorker":{},"saveFile":{"object":{"tempFilePath":1},"success":{"savedFilePath":1}},"openDocument":{"object":{"filePath":1,"showMenu":1,"fileType":["doc","docx","xls","xlsx","ppt","pptx","pdf"]},"success":{}},"getSavedFileList":{"object":{},"success":{"fileList":1}},"getSavedFileInfo":{"object":{"filePath":1},"success":{"size":1,"createTime":1}},"removeSavedFile":{"object":{"filePath":1},"success":{}},"getFileInfo":{"object":{"filePath":1,"digestAlgorithm":["md5","sha1"]},"success":{"size":1,"digest":1}},"getFileSystemManager":{},"saveFileToDisk":{"object":{"filePath":1},"success":{}},"getStorage":{"object":{"key":1},"success":{"data":1}},"getStorageSync":{},"setStorage":{"object":{"key":1,"data":1},"success":{}},"setStorageSync":{},"removeStorage":{"object":{"key":1},"success":{}},"removeStorageSync":{},"clearStorage":{"object":{},"success":{}},"clearStorageSync":{},"getStorageInfo":{"object":{},"success":{"keys":1,"currentSize":1,"limitSize":1}},"getStorageInfoSync":{"return":{"keys":1,"currentSize":1,"limitSize":1}},"createUDPSocket":{},"authorizeForMiniProgram":{"object":{"scope":["scope.record","scope.writePhotosAlbum","scope.camera"]},"success":{}},"canIUse":{},"closeBLEConnection":{"object":{"deviceId":1},"success":{}},"closeBluetoothAdapter":{"object":{},"success":{}},"createBLEConnection":{"object":{"deviceId":1,"timeout":1},"success":{}},"getBLEDeviceCharacteristics":{"object":{"deviceId":1,"serviceId":1},"success":{"characteristics":1}},"getBLEDeviceRSSI":{"object":{"deviceId":1},"success":{"RSSI":1}},"getBLEDeviceServices":{"object":{"deviceId":1},"success":{"services":1}},"getBluetoothAdapterState":{"object":{},"success":{"discovering":1,"available":1}},"getBluetoothDevices":{"object":{},"success":{"devices":1}},"getConnectedBluetoothDevices":{"object":{"services":1},"success":{"devices":1}},"makeBluetoothPair":{"object":{"deviceId":1,"pin":1,"timeout":1},"success":{}},"notifyBLECharacteristicValueChange":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"state":1},"success":{}},"onBLECharacteristicValueChange":{"callback":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1}},"offBLECharacteristicValueChange":{},"onBLEConnectionStateChange":{"callback":{"deviceId":1,"connected":1}},"offBLEConnectionStateChange":{},"onBluetoothAdapterStateChange":{"callback":{"available":1,"discovering":1}},"offBluetoothAdapterStateChange":{},"onBluetoothDeviceFound":{"callback":{"devices":1}},"offBluetoothDeviceFound":{},"openBluetoothAdapter":{"object":{"mode":["central","peripheral"]},"success":{}},"readBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1},"success":{}},"setBLEMTU":{"object":{"deviceId":1,"mtu":1},"success":{}},"startBluetoothDevicesDiscovery":{"object":{"services":1,"allowDuplicatesKey":1,"interval":1,"powerLevel":["low","medium","high"]},"success":{}},"stopBluetoothDevicesDiscovery":{"object":{},"success":{}},"writeBLECharacteristicValue":{"object":{"deviceId":1,"serviceId":1,"characteristicId":1,"value":1},"success":{}},"getHCEState":{"object":{},"success":{}},"getNFCAdapter":{},"onHCEMessage":{"callback":{"messageType":["1","2"],"data":1,"reason":1}},"offHCEMessage":{},"sendHCEMessage":{"object":{"data":1},"success":{}},"startHCE":{"object":{"aid_list":1},"success":{}},"stopHCE":{"object":{},"success":{}},"getScreenBrightness":{"object":{},"success":{"value":1}},"onUserCaptureScreen":{"callback":{}},"offUserCaptureScreen":{},"setKeepScreenOn":{"object":{"keepScreenOn":1},"success":{}},"setScreenBrightness":{"object":{"value":1},"success":{}},"connectWifi":{"object":{"SSID":1,"BSSID":1,"password":1,"maunal":1},"success":{}},"getConnectedWifi":{"object":{},"success":{"wifi":1}},"getWifiList":{"object":{},"success":{}},"onGetWifiList":{"callback":{"wifiList":1}},"offGetWifiList":{},"onWifiConnected":{"callback":{"wifi":1}},"offWifiConnected":{},"setWifiList":{"object":{"wifiList":1},"success":{}},"startWifi":{"object":{},"success":{}},"stopWifi":{"object":{},"success":{}},"getBackgroundAudioManager":{},"getRecorderManager":{},"getBackgroundAudioPlayerState":{"object":{},"success":{"duration":1,"currentPosition":1,"status":["0","1","2"],"downloadPercent":1,"dataUrl":1}},"playBackgroundAudio":{"object":{"dataUrl":1,"title":1,"coverImgUrl":1},"success":{}},"pauseBackgroundAudio":{"object":{},"success":{}},"seekBackgroundAudio":{"object":{"position":1},"success":{}},"stopBackgroundAudio":{"object":{},"success":{}},"onBackgroundAudioPlay":{"callback":{}},"onBackgroundAudioPause":{"callback":{}},"onBackgroundAudioStop":{"callback":{}},"getAvailableAudioSources":{"object":{},"success":{"audioSources":["auto","buildInMic","headsetMic","mic","camcorder","voice_communication","voice_recognition"]}},"startRecord":{"object":{},"success":{"tempFilePath":1}},"stopRecord":{"object":{},"success":{}},"setInnerAudioOption":{"object":{"mixWithOther":1,"obeyMuteSwitch":1,"speakerOn":1},"success":{}},"playVoice":{"object":{"filePath":1,"duration":1},"success":{}},"pauseVoice":{"object":{},"success":{}},"stopVoice":{"object":{},"success":{}},"connectSocket":{"object":{"url":1,"header":1,"protocols":1,"tcpNoDelay":1,"perMessageDeflate":1,"timeout":1},"success":{}},"closeSocket":{"object":{"code":1,"reason":1},"success":{}},"sendSocketMessage":{"object":{"data":1},"success":{}},"onSocketOpen":{"callback":{"header":1}},"onSocketClose":{"callback":{"code":1,"reason":1}},"onSocketMessage":{"callback":{"data":1}},"onSocketError":{"callback":{"errMsg":1}},"addFileToFavorites":{"object":{"filePath":1,"fileName":1},"success":{}},"addVideoToFavorites":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showRedPackage":{"object":{"url":1},"success":{}},"getSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1,"miniprogramAuthSetting":1}},"openSetting":{"object":{"withSubscriptions":1},"success":{"authSetting":1,"subscriptionsSetting":1}},"authPrivateMessage":{"object":{"shareTicket":1},"success":{"errMsg":1,"valid":1,"encryptedData":1,"iv":1}},"getShareInfo":{"object":{"shareTicket":1,"timeout":1},"success":{"errMsg":1,"encryptedData":1,"iv":1,"cloudID":1}},"hideShareMenu":{"object":{"menus":1},"success":{}},"shareFileMessage":{"object":{"filePath":1,"fileName":1},"success":{}},"shareVideoMessage":{"object":{"videoPath":1,"thumbPath":1},"success":{}},"showShareImageMenu":{"object":{"path":1},"success":{}},"showShareMenu":{"object":{"withShareTicket":1,"menus":1},"success":{}},"updateShareMenu":{"object":{"withShareTicket":1,"isUpdatableMessage":1,"activityId":1,"toDoActivityId":1,"templateInfo":1,"isPrivateMessage":1},"success":{}},"checkIsSoterEnrolledInDevice":{"object":{"checkAuthMode":["fingerPrint","facial","speech"]},"success":{"isEnrolled":1,"errMsg":1}},"checkIsSupportSoterAuthentication":{"object":{},"success":{"supportMode":["fingerPrint","facial","speech"]}},"startSoterAuthentication":{"object":{"requestAuthModes":["fingerPrint","facial","speech"],"challenge":1,"authContent":1},"success":{"authMode":1,"resultJSON":1,"resultJSONSignature":1,"errCode":1,"errMsg":1}},"shareToWeRun":{"object":{"recordList":1},"success":{}},"navigateBackMiniProgram":{"object":{"extraData":1},"success":{}},"navigateToMiniProgram":{"object":{"appId":1,"path":1,"extraData":1,"envVersion":["develop","trial","release"]},"success":{}},"setNavigationBarTitle":{"object":{"title":1},"success":{}},"showNavigationBarLoading":{"object":{},"success":{}},"hideNavigationBarLoading":{"object":{},"success":{}},"hideHomeButton":{"object":{},"success":{}},"setNavigationBarColor":{"object":{"frontColor":1,"backgroundColor":1,"animation":["duration","timingFunc"]},"success":{}},"redirectTo":{"object":{"url":1},"success":{}},"reLaunch":{"object":{"url":1},"success":{}},"navigateTo":{"object":{"url":1,"events":1},"success":{"eventChannel":1}},"switchTab":{"object":{"url":1},"success":{}},"navigateBack":{"object":{"delta":1},"success":{}},"createBLEPeripheralServer":{"object":{},"success":{"server":1}},"onBLEPeripheralConnectionStateChanged":{"callback":{"deviceId":1,"serverId":1,"connected":1}},"offBLEPeripheralConnectionStateChanged":{"callback":{}},"createMediaAudioPlayer":{},"createRewardedVideoAd":{"object":{"adUnitId":1,"multiton":1}}}}');function Gd(e,t,n){var r=Ud[e];return!!r&&((!t||t in r)&&!(n&&(!Array.isArray(r[t])||r[t].indexOf(n)<0)))}function Hd(e,t,n,r){var o=Vd.method[e];if(!o)return!1;if(t&&!o[t])return!1;if(n&&!o[t][n])return!1;if(r){var i=o[t][n];if(!Array.isArray(i)||i.indexOf(r)<0)return!1}return!0}function zd(e,t){var n=Vd.class[e];return!!n&&!(t&&n.indexOf(t)<0)}var qd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){Object(R.invokeMethod)("getBatteryInfo",e)}),0)},Yd=function(){var e={level:100,isCharging:!0};if(Object(R.invokeMethod)("getBatteryInfo",{complete:function(t){return e=t}}),e.errMsg=e.errMsg?e.errMsg.replace("getBatteryInfo","getBatteryInfoSync"):"getBatteryInfoSync:ok",/fail/.test(e.errMsg))throw new Error(e.errMsg);return e},Kd=!1,Jd=Object(fo.getEventManager)("accelerometerChange"),Xd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=void 0!==t[e.interval]?t[e.interval]:t.normal,r=Object(N.assign)(e,{interval:n,enable:!0});Object(R.invokeMethod)("enableAccelerometer",r,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","startAccelerometer")}}),Kd=!0},$d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("enableAccelerometer",Object(N.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableAccelerometer","stopAccelerometer")}}),Kd=!1},Zd=Jd.onMethod,Qd=Jd.offMethod,ef=function(e){Kd||(Object(R.invokeMethod)("enableAccelerometer",{enable:!0}),Kd=!0),Zd(e)};Object(R.onMethod)("onAccelerometerChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At.default.clientVersion>=369558016&&At.default.clientVersion<369558272&&(e.x&&(e.x/=180/Math.PI),e.y&&(e.y/=180/Math.PI),e.z&&(e.z/=180/Math.PI)),Jd.emit(e)}));var tf=!1,nf=Object(fo.getEventManager)("compassChange"),rf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("enableCompass",Object(N.assign)(e,{enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","startCompass")}}),tf=!0},of=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("enableCompass",Object(N.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableCompass","stopCompass")}}),tf=!1},af=nf.onMethod,sf=nf.offMethod,cf=function(e){tf||(Object(R.invokeMethod)("enableCompass",{enable:!0}),tf=!0),af(e)};Object(R.onMethod)("onCompassChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};nf.emit(e)}));var uf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("makePhoneCall",e,{phoneNumber:""})&&Object(R.invokeMethod)("makePhoneCall",e)},lf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("makeVoIPCall",Object(N.assign)({allowBackCamera:!1,showOther:!1},e))},df=n(32);function ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ff(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hf,vf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("scanCode",e,{})&&Object(R.invokeMethod)("scanCode",e,{beforeSuccess:function(e){"string"==typeof e.path&&(e.path=e.path.replace(/\.html$/,""),e.path=e.path.replace(/\.html\?/,"?"))}})},gf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("openQRCode",e,{})&&Object(R.invokeMethod)("openQRCode",e)},_f=Object(df.default)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=(e.products||[]).map((function(e){return{info:{title:e.info.title,category:e.info.category.map((function(e){return{name:e.name}}))}}}))})),bf=Object(df.default)("scanItem","ProductLogic",{},{},(function(e){return{method:"AIIdentifyProductInfo",data:JSON.stringify({req_key:e.reqKey})}}),(function(e){delete e.rawData,delete e.errcode,e.products=e.products||[]})),yf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("scanItem",e,{})&&Object(R.invokeMethod)("scanItem",pf(pf({},e),{},{data:JSON.stringify({appId:At.default.accountInfo.appId,path:L.default.lastRoute}),success:function(){},fail:function(){},complete:function(t){0!==t.errMsg.indexOf("scanItem:fail")?_f({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):Object(R.beforeInvokeFail)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},mf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("scanItem",e,{})&&Object(R.invokeMethod)("scanItem",pf(pf({},e),{},{data:JSON.stringify({appId:At.default.accountInfo.appId,path:L.default.lastRoute}),success:function(){},fail:function(){},complete:function(t){0!==t.errMsg.indexOf("scanItem:fail")?bf({reqKey:t.reqKey,success:e.success,fail:e.fail,complete:e.complete}):Object(R.beforeInvokeFail)("scanItem",e,t.errMsg.substr(14).trim(),t.errCode)}}))},wf=n(41),Of=__safeway__.apiSign.makeApiSign,Sf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.invokeMethod)("getClipboardData",Of("getClipboardData",e)),7!==At.default.appType){var t=At.default.system,n=At.default.accountInfo;if(At.default.useClipboardWithPermissionNotify||/^iOS /i.test(t)&&parseInt(t.split(" ")[1],10)>=14){var r=n?n.nickname:"小程序";Object(wf.showToast)({icon:"none",title:"“"+r+"”读取了你的剪切板内容"})}}},If=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("setClipboardData",e,{data:""})){var t=Of("setClipboardData",e);Object(R.invokeMethod)("setClipboardData",t,{beforeSuccess:function(){Object(R._invokeMethod)("showToast",{duration:1500,title:"内容已复制",icon:"none",mask:!1});try{L.default.currentClipBoardData=e.data,Di(!0)}catch(e){}}})}},Ef=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.uuids)if(Array.isArray(e.uuids)){if(0!==e.uuids.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.uuids.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(R.beforeInvokeFail)("startBeaconDiscovery",e,"invalid service uuid")}Object(R.invokeMethod)("startBeaconDiscovery",e)}else Object(R.beforeInvokeFail)("startBeaconDiscovery",e,"uuid must be an Array");else Object(R.beforeInvokeFail)("startBeaconDiscovery",e,"must have uuid")},Cf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("stopBeaconDiscovery",e)},Tf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getBeacons",e)},kf=function(e){Object(R.beforeInvoke)("onBeaconUpdate",e,Z.noop)&&Object(R.onMethod)("onBeaconUpdated",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconUpdate callback function"))},Af=function(){Object(R.onMethod)("onBeaconUpdated",(function(){}))},Pf=function(e){Object(R.beforeInvoke)("onBeaconServiceChange",e,Z.noop)&&Object(R.onMethod)("onBeaconServiceChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBeaconServiceChange callback function"))},Df=function(){Object(R.onMethod)("onBeaconServiceChanged",(function(){}))},jf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("captureScreen",e,{})},xf=n(168),Rf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getScreenBrightness",e,{})},Mf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("setScreenBrightness",e,{})},Nf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("vibrateShort",e,{})},Lf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("vibrateLong",e,{})},Bf=function(e){Object(R.invokeMethod)("chooseContact",e)},Ff=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("chooseWeChatContact",e)},Wf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("addPhoneContact",e,{})},Uf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(uu.advancedInvokeWebviewMethod)("quicklyAddBrandContact",e,{})},Vf=Object(Z.async2Invoke)("searchContacts",Object(Bt.default)(Lt.a.mark((function e(){var t,n,r=arguments;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},Object(R.beforeInvokePromise)(t,{phoneNumber:""}),/^.{8,}$/.test(t.phoneNumber)){e.next=4;break}throw new Error("phoneNumber length is less than 8");case 4:return e.next=6,Object(R.invokeMethodAsync)("searchContacts",t,{});case 6:return n=e.sent,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))),Gf=Vf,Hf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("openBluetoothAdapter",e,{})},zf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("closeBluetoothAdapter",e,{})},qf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getBluetoothAdapterState",e,{})},Yf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void Object(R.beforeInvokeFail)("startBluetoothDevicesDiscovery",{},"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(R.beforeInvokeFail)("startBluetoothDevicesDiscovery",{},"invalid service uuid");e.services=e.services.map((function(e){return ee.IS_ANDROID&&(e=e.toUpperCase()),4===e.length?"0000"+e+"-0000-1000-8000-00805F9B34FB":8===e.length?e+"-0000-1000-8000-00805F9B34FB":e}))}}Object(R.invokeMethod)("startBluetoothDevicesDiscovery",e,{})},Kf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("stopBluetoothDevicesDiscovery",e,{})},Jf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices.map((function(e){if(e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Object(N.base64ToArrayBuffer)(e.advertisData)),e.serviceData){var t=e.serviceData;Object.keys(t).forEach((function(e){t[e]&&(t[e]=Object(N.base64ToArrayBuffer)(t[e]))}))}return e}))}})},Xf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getBLEDeviceRSSI",e,{deviceId:""})&&Object(R.invokeMethod)("getBLEDeviceRSSI",e)},$f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.services){if(!Array.isArray(e.services))return void Object(R.beforeInvokeFail)("getConnectedBluetoothDevices",e,"services must be an Array");if(0!==e.services.length){var t=new RegExp(/^[0-9a-f]{4}$|^[0-9a-f]{8}$|^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),n=e.services.some((function(e){return"string"==typeof e&&t.test(e)}));if(!n)return void Object(R.beforeInvokeFail)("getConnectedBluetoothDevices",{},"invalid service uuid");e.services=e.services.map((function(e){return ee.IS_ANDROID&&(e=e.toUpperCase()),4===e.length?"0000"+e+"-0000-1000-8000-00805F9B34FB":8===e.length?e+"-0000-1000-8000-00805F9B34FB":e}))}}Object(R.invokeMethod)("getConnectedBluetoothDevices",e,{beforeSuccess:function(e){Array.isArray(e.devices)||(e.devices=[]),e.devices=e.devices.map((function(e){return e.name||(e.name="未知设备"),e.advertisData&&(e.advertisData=Object(N.base64ToArrayBuffer)(e.advertisData)),e}))}})},Zf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("createBLEConnection",e,{deviceId:""})&&Object(R.invokeMethod)("createBLEConnection",e,{})},Qf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("closeBLEConnection",e,{deviceId:""})&&Object(R.invokeMethod)("closeBLEConnection",e,{})},ep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getBLEDeviceServices",e,{deviceId:""})&&Object(R.invokeMethod)("getBLEDeviceServices",e,{beforeSuccess:function(e){Array.isArray(e.services)||(e.services=[]),void 0===e.errCode&&(e.errCode=0)}})},tp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getBLEDeviceCharacteristics",e,{deviceId:"",serviceId:""})&&Object(R.invokeMethod)("getBLEDeviceCharacteristics",Object.assign({},e,{serviceId:ee.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId}),{beforeSuccess:function(e){Array.isArray(e.characteristics)||(e.characteristics=[])}})},np=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("notifyBLECharacteristicValueChanged",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&Object(R.invokeMethod)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:ee.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:ee.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},rp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("notifyBLECharacteristicValueChange",e,{state:!0,deviceId:"",serviceId:"",characteristicId:""})&&Object(R.invokeMethod)("notifyBLECharacteristicValueChanged",Object.assign({},e,{serviceId:ee.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:ee.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{beforeAll:function(e){void 0!==e.errCode&&(e.errCode=Number(e.errCode)),e.errMsg=e.errMsg.replace("notifyBLECharacteristicValueChanged","notifyBLECharacteristicValueChange")}})},op=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("readBLECharacteristicValue",e,{deviceId:"",serviceId:"",characteristicId:""})&&Object(R.invokeMethod)("readBLECharacteristicValue",Object.assign({},e,{serviceId:ee.IS_ANDROID?e.serviceId.toUpperCase():e.serviceId,characteristicId:ee.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},ip=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("writeBLECharacteristicValue",e,{value:new ArrayBuffer(0),deviceId:"",serviceId:"",characteristicId:""})&&Object(R.invokeMethod)("writeBLECharacteristicValue",Object.assign({},e,{value:Object(N.arrayBufferToBase64)(e.value),serviceId:e.serviceId.toUpperCase(),characteristicId:ee.IS_ANDROID?e.characteristicId.toUpperCase():e.characteristicId}),{})},ap=function(e){Object(R.onMethod)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChanged callback function"))},sp=function(){Object(R.onMethod)("onBLEConnectionStateChanged",(function(){}))},cp=function(e){Object(R.onMethod)("onBLEConnectionStateChanged",__errorTracer__.surroundThirdByTryCatch(e,"at onBLEConnectionStateChange callback function"))},up=function(){Object(R.onMethod)("onBLEConnectionStateChanged",(function(){}))},lp=function(e){Object(R.onMethod)("onBLECharacteristicValueChange",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t.value&&(t.value=Object(N.base64ToArrayBuffer)(t.value)),__errorTracer__.surroundThirdByTryCatch(e,"at onBLECharacteristicValueChange callback function")(t)}))},dp=function(){Object(R.onMethod)("onBLECharacteristicValueChange",(function(){}))},fp=function(e){Object(R.onMethod)("onBluetoothDeviceFound",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];Array.isArray(t.devices)?n=t.devices:n.push(t),n=n.map((function(e){try{e.advertisData=Object(N.base64ToArrayBuffer)(e.advertisData)}catch(e){}try{var t=e.serviceData||{};Object.keys(t).forEach((function(e){t[e]&&(t[e]=Object(N.base64ToArrayBuffer)(t[e]))}))}catch(e){}return e})),__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothDeviceFound callback function")({devices:n})}))},pp=function(){Object(R.onMethod)("onBluetoothDeviceFound",(function(){}))},hp=function(e){Object(R.onMethod)("onBluetoothAdapterStateChange",__errorTracer__.surroundThirdByTryCatch(e,"at onBluetoothAdapterStateChange callback function"))},vp=function(){Object(R.onMethod)("onBluetoothAdapterStateChange",(function(){}))},gp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_ANDROID?Object(R.beforeInvoke)("setBLEMTU",e,{deviceId:"",mtu:0})&&Object(R.invokeMethod)("setBLEMTU",e,{}):Object(R.beforeInvokeFail)("setBLEMTU",e,"can only be invoked on android")},_p=function(e,t){return Object.assign({},e,Object(q.default)({},t,Object(N.arrayBufferToBase64)(e[t])))},bp=new U.default,yp=new WeakMap,mp=new WeakMap,wp=function(e,t){var n=yp.get(this)+"_on"+e,r=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at BLEPeripheralServer.on"+e+" callback function")(n)};mp.get(this).set(t,r),bp.on(n,r)},Op=function(e,t){var n=yp.get(this)+"_on"+e,r=mp.get(this);if(Object(re.isFunction)(t)){var o=r.get(t);Object(re.isFunction)(o)&&(r.delete(t),bp.off(n,o))}else mp.set(this,new WeakMap),bp.removeAllListeners(n)},Sp=Object(fo.getEventManager)("CharacteristicReadRequest");Sp.onMethod,Sp.offMethod;Object(R.onMethod)("onCharacteristicReadRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bp.emit(e.serverId+"_onCharacteristicReadRequest",e),Sp.emit(e)}));var Ip=Object(fo.getEventManager)("CharacteristicWriteRequest");Ip.onMethod,Ip.offMethod;Object(R.onMethod)("onCharacteristicWriteRequest",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof e.value&&(e.value=Object(N.base64ToArrayBuffer)(e.value)),bp.emit(e.serverId+"_onCharacteristicWriteRequest",e),Ip.emit(e)}));var Ep=Object(fo.getEventManager)("CharacteristicSubscribed");Ep.onMethod,Ep.offMethod;Object(R.onMethod)("onCharacteristicSubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bp.emit(e.serverId+"_onCharacteristicSubscribed",e),Ep.emit(e)}));var Cp=Object(fo.getEventManager)("CharacteristicUnsubscribed");Cp.onMethod,Cp.offMethod;Object(R.onMethod)("onCharacteristicUnsubscribed",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bp.emit(e.serverId+"_onCharacteristicUnsubscribed",e),Cp.emit(e)}));var Tp=(J((hf=function(){function e(t){var n=this;Object($.default)(this,e),this.serverId=t,this.services=[],yp.set(this,t),mp.set(this,new WeakMap);["CharacteristicReadRequest","CharacteristicWriteRequest","CharacteristicSubscribed","CharacteristicUnsubscribed"].forEach((function(e){n["on"+e]=function(t){wp.call(n,e,t)},n["off"+e]=function(t){Op.call(n,e,t)}}))}return Object(K.default)(e,[{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=Object.assign({},e,{serverId:this.serverId});Object(R.invokeMethod)("closeBLEPeripheralServer",n,{beforeSuccess:function(){t.serverId="",yp.delete(t)}})}},{key:"addService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("BLEPeripheralServer.addService",e,{service:{}})){var t=e.service.characteristics||[];t=t.map((function(e){var t=e.descriptors||[];return t=t.map((function(e){return _p(e,"value")})),Object.assign({},e,{value:Object(N.arrayBufferToBase64)(e.value),descriptors:t})}));var n=Object.assign({},e,{serverId:this.serverId,service:{uuid:e.service.uuid,characteristics:t}}),r=this;Object(R.invokeMethod)("addBLEPeripheralService",n,{beforeSuccess:function(){r.services.push(e.service.uuid)}})}}},{key:"removeService",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("BLEPeripheralServer.removeService",e,{serviceId:""})){var t=this,n=Object.assign({},e,{serverId:this.serverId});Object(R.invokeMethod)("removeBLEPeripheralService",n,{beforeSuccess:function(){var n=t.services.indexOf(e.serviceId);n>=0&&t.services.splice(n,1)}})}}},{key:"startAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.advertiseRequest||{},n=t.manufacturerData||[];n=n.map((function(e){return _p(e,"manufacturerSpecificData")}));var r=Object.assign({},t,{manufacturerData:n}),o=Object.assign({},e,{serverId:this.serverId,advertiseRequest:r,powerLevel:e.powerLevel||"medium"});Object(R.invokeMethod)("startBLEPeripheralAdvertising",o,{})}},{key:"stopAdvertising",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId});Object(R.invokeMethod)("stopBLEPeripheralAdvertising",t,{})}},{key:"writeCharacteristicValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{serverId:this.serverId,value:Object(N.arrayBufferToBase64)(e.value)});Object(R.invokeMethod)("writeBLEPeripheralCharacteristicValue",t,{})}}]),e}()).prototype,"close",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"close"),hf.prototype),J(hf.prototype,"addService",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"addService"),hf.prototype),J(hf.prototype,"removeService",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"removeService"),hf.prototype),J(hf.prototype,"startAdvertising",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"startAdvertising"),hf.prototype),J(hf.prototype,"stopAdvertising",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"stopAdvertising"),hf.prototype),J(hf.prototype,"writeCharacteristicValue",[Z.promised],Object.getOwnPropertyDescriptor(hf.prototype,"writeCharacteristicValue"),hf.prototype),hf),kp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("createBLEPeripheralServer",e,{beforeSuccess:function(e){var t=e.serverId,n=new Tp(t);delete e.serverId,e.server=n}})},Ap=Object(fo.getEventManager)("BLEPeripheralConnectionStateChanged"),Pp=Ap.onMethod,Dp=Ap.offMethod;Object(R.onMethod)("onBLEPeripheralConnectionStateChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ap.emit(e)}));var jp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("makeBluetoothPair",e,{deviceId:""})){var t=Object.assign({},e);Object(re.isArrayBuffer)(e.pin||null)&&(t.pin=Object(N.arrayBufferToBase64)(e.pin)),Object(R.invokeMethod)("makeBluetoothPair",t)}},xp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("startWifi",e,{})},Rp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("stopWifi",e,{})},Mp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getWifiList",e,{})},Np=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getConnectedWifi",e,{})},Lp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("connectWifi",e,{SSID:"",password:""})){var t=Object.assign({maunal:!1},e);Object(R.invokeMethod)("connectWifi",t,{})}},Bp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvoke)("presetWifiList",e,{wifiList:[]})&&Object(R.invokeMethod)("presetWifiList",e,{}):Object(R.beforeInvokeFail)("presetWifiList",e,"presetWifiList must be invoked on iOS platform")},Fp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvoke)("setWifiList",e,{wifiList:[]})&&Object(R.invokeMethod)("setWifiList",e,{}):Object(R.beforeInvokeFail)("setWifiList",e,"setWifiList must be invoked on iOS platform")},Wp=function(e){Object(R.onMethod)("onGetWifiList",__errorTracer__.surroundThirdByTryCatch(e,"at onGetWifiList callback function"))},Up=function(){Object(R.onMethod)("onGetWifiList",(function(){}))},Vp=function(e){Object(R.onMethod)("onWifiConnected",__errorTracer__.surroundThirdByTryCatch(e,"at onWifiConnected callback function"))},Gp=function(){Object(R.onMethod)("onWifiConnected",(function(){}))},Hp=null,zp=["none","low","high"],qp=function(e){"function"==typeof e&&(Hp=e)};Object(R.onMethod)("onEvaluateWifi",__errorTracer__.surroundThirdByTryCatch((function(e){var t,n={SSID:e.wifi.SSID,BSSID:e.wifi.BSSID,confidence:"none"};if("function"==typeof Hp)try{t=Hp(e)||{}}finally{zp.find((function(e){return e===t.confidence}))&&(n.confidence=t.confidence),Object(R.invokeMethod)("evaluateWifi",n,{})}}),"at onEvaluateWifi callback function"));var Yp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getHCEState",e,{})},Kp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("startHCE",e,{})},Jp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("stopHCE",e,{})},Xp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("sendHCEMessage",e,{data:new ArrayBuffer(0)})&&Object(R.invokeMethod)("sendHCEMessage",Object.assign({},e,{data:Object(N.arrayBufferToBase64)(e.data)}),{})},$p=function(e){Object(R.onMethod)("onHCEMessage",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"==typeof t.data&&(t.data=Object(N.base64ToArrayBuffer)(t.data)),__errorTracer__.surroundThirdByTryCatch(e,"at onHCEMessage callback function")(t)}))},Zp=function(){Object(R.onMethod)("onHCEMessage",(function(){}))};function Qp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nh=function(){},rh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Reporter.surroundThirdByTryCatch(e.success||nh,"at api "+t+" success callback function"),r=Reporter.surroundThirdByTryCatch(e.fail||nh,"at api "+t+" fail callback function"),o=Reporter.surroundThirdByTryCatch(e.complete||nh,"at api "+t+" complete callback function");return th(th({},e),{},{success:n,fail:r,complete:o})},oh=function(e,t,n){var r=void 0===n?{errMsg:t}:{errMsg:t,errCode:n};e.fail(r),e.complete(r)},ih=new WeakMap,ah=new U.EventEmitter2,sh="onNFCDiscovered",ch="onNdefMessageRead";Object(V.onNativeEvent)("onNFCDiscovered",(function(e){ah.emit(sh,e)})),Object(V.onNativeEvent)("onNdefMessageRead",(function(e){ah.emit(ch,e)}));var uh={ndef:"NDEF",nfcA:"NFC-A",nfcB:"NFC-B",isoDep:"ISO-DEP",nfcF:"NFC-F",nfcV:"NFC-V",mifareClassic:"MIFARE Classic",mifareUltralight:"MIFARE Ultralight"};function lh(e,t){if(!this[e]){var n=t();return Object.defineProperty(this,e,{enumerable:!1,configurable:!1,writable:!1,value:n}),n}return this[e]}var dh=function(){function e(){Object($.default)(this,e),this.tech=uh,Object.defineProperty(this,"_singleton",{enumerable:!1,configurable:!1,writable:!1})}return Object(K.default)(e,[{key:"startDiscovery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,"NFCAdapter#startDiscovery"),ee.IS_ANDROID?Object(R.invokeMethod)("isSupportNFC",{success:function(){Object(R.invokeMethod)("startNFCDiscovery",{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("startNFCDiscovery","startDiscovery"))}})},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isSupportNFC","startDiscovery"))}}):oh(e,"startDiscovery:fail current platform is not supported")}},{key:"stopDiscovery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,"NFCAdapter#stopDiscovery"),ee.IS_ANDROID?Object(R.invokeMethod)("stopNFCDiscovery",{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("stopNFCDiscovery","stopDiscovery"))}}):oh(e,"stopDiscovery:fail current platform is not supported")}},{key:"onDiscovered",value:function(e){if("function"==typeof e){var t=Reporter.surroundThirdByTryCatch(e,"at NFCAdapter#onDiscovered callback function"),n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.messages&&Object(re.isArray)(e.messages)){for(var n=[],r=e.messages||[],o=0;o<r.length;++o){for(var i={records:[]},a=r[o]||[],s=0;s<a.length;++s){var c="payload-"+o+"-"+s,u=e[c];delete e[c],a[s].payload=u,a[s].id=Object(N.base64ToArrayBuffer)(a[s].id),a[s].type=Object(N.base64ToArrayBuffer)(a[s].type),i.records.push(a[s])}n.push(i)}e.messages=n}e.id&&"string"==typeof e.id&&(e.id=Object(N.base64ToArrayBuffer)(e.id)),t(e)};ah.on(sh,n),ih.set(e,n)}}},{key:"offDiscovered",value:function(e){if("function"==typeof e){var t=ih.get(e);t&&ah.off(sh,t)}}},{key:"getNdef",value:function(){return lh.call(this,"_ndef",(function(){return new ph}))}},{key:"getNfcA",value:function(){return lh.call(this,"_nfcA",(function(){return new vh}))}},{key:"getNfcB",value:function(){return lh.call(this,"_nfcB",(function(){return new gh}))}},{key:"getIsoDep",value:function(){return lh.call(this,"_isoDep",(function(){return new _h}))}},{key:"getNfcF",value:function(){return lh.call(this,"_nfcF",(function(){return new bh}))}},{key:"getNfcV",value:function(){return lh.call(this,"_nfcV",(function(){return new yh}))}},{key:"getMifareClassic",value:function(){return lh.call(this,"_mirafeClassic",(function(){return new mh}))}},{key:"getMifareUltralight",value:function(){return lh.call(this,"_mifareUltralight",(function(){return new wh}))}}]),e}(),fh=function(){function e(t){Object($.default)(this,e),this.techType=t}return Object(K.default)(e,[{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#connect"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCConnect",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCConnect","connect"))}}):oh(e,"connect:fail current platform is not supported")}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#close"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCClose",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCClose","close"))}}):oh(e,"close:fail current platform is not supported")}},{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#setTimeout"),ee.IS_ANDROID?e.timeout?Object(R.invokeMethod)("NFCSetTimeout",{tech:this.techType,timeout:parseInt(e.timeout,10),success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCSetTimeout","setTimeout"))}}):oh(e,"timeout should be specified"):oh(e,"setTimeout:fail current platform is not supported")}},{key:"isConnected",value:function(e){e=rh(e,this.techType+"#isConnected"),ee.IS_ANDROID?Object(R.invokeMethod)("isNFCTechConnected",{tech:this.techType,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("isNFCTechConnected","isConnected"))}}):oh(e,"isConnected:fail current platform is not supported")}}]),e}(),ph=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"NDEF")}return Object(K.default)(n,[{key:"onNdefMessage",value:function(e){if("function"==typeof e){var t=Reporter.surroundThirdByTryCatch(e,"at Ndef#onReadNdefMessage callback function"),n=function(e){for(var n=e.messages||[],r=0;r<n.length;++r)for(var o=n[r]||[],i=0;i<o.length;++i){var a="payload-"+r+"-"+i,s=e[a];o[i].payload=s,delete e[a]}t(e)};ah.on(ch,n),ih.set(e,n)}}},{key:"offNdefMessage",value:function(e){if("function"==typeof e){var t=ih.get(e);t&&ah.off(ch,t)}}},{key:"writeNdefMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e=rh(e,"Ndef#writeNdefMessage"),ee.IS_ANDROID){if(e.uris)return Object(re.isArray)(e.uris)?void Object(R.invokeMethod)("writeNdefMessage",{uris:e.uris,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void oh(e,"writeNdefMessage: urils should be type of Array");if(e.texts)return Object(re.isArray)(e.texts)?void Object(R.invokeMethod)("writeNdefMessage",{texts:e.texts,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}}):void oh(e,"writeNdefMessage: texts should be type of Array");if(e.records){if(!Object(re.isArray)(e.records))return void oh(e,"writeNdefMessage: records should be type of Array");for(var t={},n=0;n<e.records.length;++n){var r=e.records[n];if(!Object(re.isArrayBuffer)(r.id))return void oh(e,"writeNdefMessage: record.id should be type of ArrayBuffer");if(!Object(re.isArrayBuffer)(r.type))return void oh(e,"writeNdefMessage: record.type should be type of ArrayBuffer");r.id=Object(N.arrayBufferToBase64)(r.id),r.type=Object(N.arrayBufferToBase64)(r.type);var o="payload-"+n;t[o]=r.payload,delete r.payload}Object(R.invokeMethod)("writeNdefMessage",th(th({records:e.records},t),{},{success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}}),{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("writeNdefMessage","writeNdefMessage"))}})}else oh(e,"writeNdefMessage: expect parameter contains one of uris, texts, records")}else oh(e,"writeNdefMessage:fail current platform is not supported")}}]),n}(fh),hh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.apply(this,arguments)}return Object(K.default)(n,[{key:"getMaxTransceiveLength",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#getMaxTransceiveLength"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCGetMaxTransceiveLength",{tech:this.techType,success:e.success,fail:e.fail,complete:e.complete},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetMaxTransceiveLength","getMaxTransceiveLength"))}}):oh(e,"getMaxTransceiveLength:fail current platform is not supported")}},{key:"transceive",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#transceive"),ee.IS_ANDROID?e.data?Object(re.isArrayBuffer)(e.data)?Object(R.invokeMethod)("NFCTransceive",{tech:this.techType,data:e.data,success:function(t){e.success(t)},fail:function(t){e.fail(t)},complete:function(t){e.complete(t)}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCTransceive","transceive"))}}):oh(e,"transceive: data should be type of ArrayBuffer"):oh(e,"transceive: data field is required"):oh(e,"transceive:fail current platform is not supported")}}]),n}(fh),vh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"NFC-A")}return Object(K.default)(n,[{key:"getAtqa",value:function(e){e=rh(e,this.techType+"#getAtqa"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCGetAtqa",{success:function(t){t&&t.atqa?e.success({errMsg:t.errMsg,atqa:Object(N.base64ToArrayBuffer)(t.atqa)}):e.success({errMsg:t.errMsg,atqa:null})},fail:function(t){e.fail(t)},complete:function(t){t&&t.atqa?e.complete({errMsg:t.errMsg,atqa:Object(N.base64ToArrayBuffer)(t.atqa)}):e.complete({errMsg:t.errMsg,atqa:null})}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetAtqa","getAtqa"))}}):oh(e,"getAtqa:fail current platform is not supported")}},{key:"getSak",value:function(e){e=rh(e,this.techType+"#getSak"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCGetSak",e,{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetSak","getSak"))}}):oh(e,"getSak:fail current platform is not supported")}}]),n}(hh),gh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"NFC-B")}return Object(K.default)(n,[{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#setTimeout"),oh(e,"setTimeout: function not support",13024)}}]),n}(hh),_h=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"ISO-DEP")}return Object(K.default)(n,[{key:"getHistoricalBytes",value:function(e){e=rh(e,this.techType+"#getHistoricalBytes"),ee.IS_ANDROID?Object(R.invokeMethod)("NFCGetHistoricalBytes",{success:function(t){t&&t.histBytes?e.success({errMsg:t.errMsg,histBytes:Object(N.base64ToArrayBuffer)(t.histBytes)}):e.success({errMsg:t.errMsg,histBytes:null})},fail:function(t){e.fail(t)},complete:function(t){t&&t.histBytes?e.complete({errMsg:t.errMsg,histBytes:Object(N.base64ToArrayBuffer)(t.histBytes)}):e.complete({errMsg:t.errMsg,histBytes:null})}},{beforeAll:function(e){e&&e.errMsg&&(e.errMsg=e.errMsg.replace("NFCGetHistoricalBytes","getHistoricalBytes"))}}):oh(e,"getHistoricalBytes:fail current platform is not supported")}}]),n}(hh),bh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"NFC-F")}return n}(hh),yh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"NFC-V")}return Object(K.default)(n,[{key:"setTimeout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=rh(e,this.techType+"#setTimeout"),oh(e,"setTimeout: function not support",13024)}}]),n}(hh),mh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"MIFARE Classic")}return n}(hh),wh=function(e){Object(G.default)(n,e);var t=Qp(n);function n(){return Object($.default)(this,n),t.call(this,"MIFARE Ultralight")}return n}(hh),Oh=null;function Sh(){return Oh||(Oh=new dh)}var Ih=Object(fo.getEventManager)("local-service-found"),Eh=Object(fo.getEventManager)("local-service-lost"),Ch=Object(fo.getEventManager)("local-service-discovery"),Th=Object(fo.getEventManager)("local-service-resolve-fail"),kh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(M.invokeMethod)("operateLocalServicesScan",Object.assign({},e,{action:"start"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","startLocalServiceDiscovery")}})},Ah=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(M.invokeMethod)("operateLocalServicesScan",Object.assign({},e,{action:"stop"}),{beforeSuccess:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")},beforeFail:function(e){return e.errMsg=e.errMsg.replace("operateLocalServicesScan","stopLocalServiceDiscovery")}})};Object(M.onMethod)("onLocalServiceEvent",(function(e){var t=Object.assign({},e);switch("object"===Object(x.default)(t.attributes)&&null!==t.attributes&&Object.keys(t.attributes).forEach((function(e){var n=t.attributes[e];t.attributes[e]=Object(N.base64ToArrayBuffer)(n)})),delete t.event,e.event){case"found":Ih.emit(t);break;case"lost":Eh.emit(t);break;case"stopScan":delete t.serviceType,delete t.serviceName,delete t.ip,delete t.port,Ch.emit(t);break;case"resolveFail":delete t.ip,delete t.port,Th.emit(t)}}));var Ph=Ih.onMethod,Dh=Ih.offMethod,jh=Eh.onMethod,xh=Eh.offMethod,Rh=Ch.onMethod,Mh=Ch.offMethod,Nh=Th.onMethod,Lh=Th.offMethod,Bh=Object(fo.getEventManager)("gyroscopeChange"),Fh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;Object(R.invokeMethod)("enableGyroscope",Object(N.assign)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","startGyroscope")}})},Wh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("enableGyroscope",Object(N.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableGyroscope","stopGyroscope")}})},Uh=Bh.onMethod,Vh=Bh.offMethod;Object(R.onMethod)("onGyroscopeChange",(function(e){Bh.emit(e)}));var Gh=Object(fo.getEventManager)("deviceMotionChange"),Hh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={fast:0,game:20,ui:60,normal:200},n=t[e.interval]||t.normal;Object(R.invokeMethod)("enableDeviceMotionChangeListening",Object(N.assign)(e,{interval:n,enable:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","startDeviceMotionListening")}})},zh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("enableDeviceMotionChangeListening",Object(N.assign)(e,{enable:!1}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableDeviceMotionChangeListening","stopDeviceMotionListening")}})},qh=Gh.onMethod,Yh=Gh.offMethod;Object(R.onMethod)("onDeviceMotionChange",(function(e){Gh.emit(e)}));var Kh=function(e){Object(R.invokeMethod)("checkIsOpenAccessibility",e)};function Jh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jh(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $h=function(e){var t=new Date(1e3*e);return t.setHours(0,0,0),t.valueOf()/1e3},Zh=function(e){var t=new Date(1e3*e);return t.setSeconds(0),t.valueOf()/1e3},Qh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("addPhoneCalendar",e,{})){var t=e.allDay?$h(e.startTime):Zh(e.startTime),n=e.endTime?e.allDay?$h(e.endTime):Zh(e.endTime):void 0;Object(R.invokeMethod)("addPhoneCalendar",Xh(Xh({allDay:!1,alarm:!0},e),{},{startTime:t,endTime:n,repeat:!1}))}},ev=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(gl.checkPermissionSync)("addPhoneRepeatCalendar");if(t){if(Object(R.beforeInvoke)("addPhoneCalendar",e,{})){var n=e.allDay?$h(e.startTime):Zh(e.startTime),r=e.endTime?e.allDay?$h(e.endTime):Zh(e.endTime):void 0;Object(R.invokeMethod)("addPhoneCalendar",Xh(Xh({allDay:!1,alarm:!0,repeatInterval:"month"},e),{},{startTime:n,endTime:r,repeat:!0}))}}else Object(R.beforeInvokeFail)("addPhoneCalendar",e,"permission denied")},tv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getRandomValues",e,{length:0})&&((!Number.isInteger(e.length)||e.length<=0||e.length>1048576)&&Object(R.beforeInvokeFail)("getRandomValues",e,"invalid length"),Object(R.invokeMethod)("getRandomValues",e))},nv=n(107),rv=Object(df.default)("removeUserCloudStorage","webapi_removeselfuserstorage",{},{},(function(e){return{key:e.keyList}}),(function(e){return delete e.rawData,e})),ov=Object(df.default)("setUserCloudStorage","webapi_setselfuserstorage",{},{},(function(e){var t=e.KVDataList,n={kv_list:void 0===t?[]:t};return Object(re.isBoolean)(At.default.disableSetUserStorageFromMiniProgram)&&(n.disable_set_user_storage_from_miniprogram=At.default.disableSetUserStorageFromMiniProgram),n}),(function(e){return delete e.rawData,e})),iv=n(170),av=n(115),sv=function(){var e={};return Object(R.invokeMethod)("getPublicLibVersion",{complete:function(t){t.version?e=t.version:delete(e=t).errMsg}}),e},cv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("setEnableDebug",e,{enableDebug:!0})&&(Object(R.invokeMethod)("setEnableDebug",e,{}),e.enableDebug&&console.warn("已通过 wx.setEnableDebug 打开调试"))},uv=n(51),lv={debug:function(){},log:function(){},info:function(){},warn:function(){},error:function(){}};At.default.onReady((function(){lv=wxNativeConsole.createLogger("LogManager"+(At.default.accountInfo&&At.default.accountInfo.appId)+"]")}));var dv,fv,pv,hv="undefined"!=typeof __initHelper&&1===__initHelper,vv=function(){try{return Sd.accessSync.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return lv.error("accessSync fail",e,arguments),{errMsg:e.message}}},gv=function(){try{return Sd.renameSync.apply(this,arguments)}catch(e){return lv.error("renameSync fail",e,arguments),{errMsg:e.message}}},_v=function(){try{var e=Sd.statSync.apply(this,arguments);return{stat:e,errMsg:"statSync:ok"}}catch(e){return lv.error("statSync fail",e,arguments),{errMsg:e.message}}},bv=function(){try{var e=Sd.readFileSync.apply(this,arguments);return{data:e,errMsg:"readFileSync:ok"}}catch(e){return lv.error("readFileSync fail",e,arguments),{errMsg:e.message}}},yv=function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},mv=function(e){"string"!=typeof e&&(e+="");var t,n,r=0;for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<127?r+=1:n>=128&&n<=2047?r+=2:n>=2048&&n<=65535&&(r+=3);return r},wv=!1,Ov=102400,Sv=[],Iv={lastLogNum:1,lastLogSize:0},Ev=!1,Cv=!1,Tv=!1,kv={},Av=function(e){return fv+"log"+e},Pv=Object(N.surroundByTryCatchFactory)((function(e){return vv(e).errMsg.indexOf("accessSync:ok")>=0})),Dv=Object(N.surroundByTryCatchFactory)((function(e){var t=vv(e).errMsg;return t.indexOf("fail")>=0&&(t.indexOf("access denied")>=0||t.indexOf("no permission")>=0)})),jv=Object(N.surroundByTryCatchFactory)((function(e){if(lv.info("initLog[1][isRemoteDebugMode="+hv+", wxConfigReady="+wv+", isLogInit="+Ev+"]"),hv||!wv||Ev)e&&e();else{if(lv.info("initLog[2]"),dv=At.default&&"devtools"===At.default.platform,fv=(At.default&&At.default.env.USER_DATA_PATH||(dv?"http://usr":"wxfile://usr"))+"/miniprogramLog/",!Pv(fv))return lv.info("initLog[3][mkdirSync][usrLogDir="+fv+"]"),function(){try{Sd.mkdirSync.apply(this,arguments)}catch(e){return lv.error("mkdirSync fail",e,arguments),{errMsg:e.message}}}(fv),Ev=!0,Tv=Dv(fv),e&&e(),Tv?void lv.error("hasNoPermission[1]"):void 0;if(Tv=Dv(fv))return Ev=!0,void lv.error("hasNoPermission[2]");for(var t=1;t<=5&&Pv(Av(t));)kv[t]=!0,Iv.lastLogNum=t,t++;lv.info("[before statSync] path="+Av(Iv.lastLogNum));var n=_v(Av(Iv.lastLogNum));n.stat&&(Iv.lastLogSize=n.stat.size),lv.info("[before isLogInit changeinto true"),Ev=!0,e&&e()}})),xv=Object(N.surroundByTryCatchFactory)((function(){jv((function(){if(lv.warn("[after initLog] isLogInit="+Ev+"; isRemoteDebugMode="+hv+"; hasNoPermission="+Tv+"; CACHE_LOG.length="+Sv.length+"; needDeleteOldLog="+Cv),Ev&&!hv&&!Tv&&Sv.length&&!Cv){for(var e=[],t=0,n=0;n<Sv.length;n++){var r=mv(Sv[n]);if(lv.warn("[logItemSize="+r+"][currentSize="+t+"][MAX_LOG_SIZE="+"102400]"),r>Ov)console.warn("[wx.log warn] each log size exceed 100KB will be discard."),lv.warn("submitLog[3],logItemSize="+r+",MAX_LOG_SIZE="+Ov);else{if(t+r>Ov)break;t+=r,e.push(Sv[n])}}if(lv.warn("[reportLogList.length="+e.length+"]"),e.length){if(Iv.lastLogSize+t>1048576){if(Iv.lastLogNum+1>=6)return Cv=!0,lv.warn("submitLog[4][deleteOldLog]","logConfig=",Iv,",MAX_FILE_COUNT=",4),void setTimeout((function(){lv.info("deleteOldLog[1],unlinkSync,logPath(1)="+Av(1)),function(){try{Sd.unlinkSync.apply(this,arguments),lv.info("unlinkSync success",arguments)}catch(e){return lv.error("unlinkSync fail",e,arguments),{errMsg:e.message}}}(Av(1));for(var e=2;e<=5;e++)lv.info("deleteOldLog[2],renameSync,logPath(1)="+Av(1)+",logPath(i - 1)="+Av(e-1)),gv(Av(e),Av(e-1));Iv.lastLogNum=5,kv[Iv.lastLogNum]=!1,Iv.lastLogSize=0,Cv=!1}),50);Iv.lastLogNum++,Iv.lastLogSize=0}n===Sv.length?Sv=[]:Sv.splice(0,n),kv[Iv.lastLogNum]||Pv(Av(Iv.lastLogNum))?(lv.info("submitLog[7],before appendFile, filePath=",Av(Iv.lastLogNum)),Object(Sd.appendFile)({filePath:Av(Iv.lastLogNum),data:(Iv.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",fail:function(e){lv.error("submitLog[7.1], appendFile fail",e)},success:function(e){lv.info("submitLog[7.2], appendFile success",e)}})):(lv.info("submitLog[5], before writeFile, filePath=",Av(Iv.lastLogNum)),Object(Sd.writeFile)({filePath:Av(Iv.lastLogNum),data:(Iv.lastLogSize?"\n":"")+e.join("\n"),encoding:"utf8",success:function(e){lv.info("submitLog[5.1], writeFile success",e)},fail:function(e){console.log("log writeFile err "+e.errMsg),lv.error("submitLog[6],writeFile fail",e)}})),Iv.lastLogSize+=t}}}))}));function Rv(){pv&&clearTimeout(pv),pv=setTimeout((function(){xv(),pv=null,Rv()}),2e3)}var Mv={logApiInvoke:!0};function Nv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"number"==typeof e.level&&(Mv.level=e.level),1===Mv.level?Mv.logApiInvoke=!1:0===Mv.level&&(Mv.logApiInvoke=!0),Mv}["info","debug","log","warn"].forEach((function(e){Mv[e]=function(){if(!hv&&!Tv&&wv&&arguments.length&&Iv){for(var t=[],n=0;n<arguments.length;n++)"number"==typeof arguments[n]||"string"==typeof arguments[n]?t.push(arguments[n]):t.push(JSON.stringify(arguments[n]));t.splice(0,0,yv(new Date),"["+e+"]"),Sv.push(t.join(" "))}}})),Mv._getUserLog=function(){for(var e={},t=1;t<=5;t++)e["log"+t]=_v(Av(t));return e},Mv.privateSystemLog=function(){if(wv&&7===At.default.appType){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"undefined"!=typeof Reporter&&t&&t.length&&uv.nativeConsole.log.apply(uv.nativeConsole,t)}},At.default.onReady((function(){hv||(wv=!0,Object(N.surroundByTryCatchFactory)(Rv)())})),Object(nr.onAppEnterBackground)((function(){hv||xv()}));var Lv=Object(N.surroundByTryCatchFactory)(av.sendDataToH5),Bv=Object(N.surroundByTryCatchFactory)(av.onH5Data);function Fv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(lv.info("uploadUserLog[1],logConfig.lastLogNum="+Iv.lastLogNum,",args=",e),!e.index||e.index>Iv.lastLogNum)return lv.info("uploadUserLog[2]"),void(e.complete&&e.complete());var t="ios"===At.default.platform?1:5,n=e.readFileResp||bv(Av(e.index),"utf8");if(lv.info("uploadUserLog[3],readFileSync="+n.errMsg+",index="+e.index+",EACH_SLICE="+t),n.errMsg.indexOf("readFileSync:ok")>=0&&n.data){var r=n.data.length,o=Math.max(parseInt(r/t,10),1),i=(e.slice-1)*o;lv.info("uploadUserLog[4]","start=",i,"eachLen=",o,"len=",r,n.data.length);var a=n.data.substr(i,o);if(lv.info("uploadUserLog[5],content.length=",a&&a.length,",logConfig=",Iv),!a)return lv.info("uploadUserLog[6],uploadUserLogSliceComplete"),Lv({webviewId:e.webviewId,data:{total:Iv.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:Object(ea.getStaticSystemInfoSync)()}}),e.index++,e.slice=1,e.readFileResp=null,void Fv(e);lv.info("uploadUserLog[7], uploadUserLogContent,content.length=",a&&a.length,",logConfig=",Iv),Lv({webviewId:e.webviewId,data:{type:"uploadUserLogContent",content:a,index:e.index,slice:e.slice||1,total:Iv.lastLogNum,info:1===e.index&&1===e.slice?Object(ea.getStaticSystemInfoSync)():null},success:function(){lv.info("uploadUserLog[8] uploadUserLogContent suc, EACH_SLICE="+t+", args.slice="+e.slice+", logConfig.lastLogNum="+Iv.lastLogNum),e.slice===t?(Lv({webviewId:e.webviewId,data:{total:Iv.lastLogNum,type:"uploadUserLogSliceComplete",index:e.index,info:Object(ea.getStaticSystemInfoSync)()}}),e.index++,e.slice=1,e.readFileResp=null,Fv(e)):(e.slice++,e.readFileResp=n,lv.info("uploadUserLog[9],args=",e),Fv(e))},fail:function(t){lv.error("uploadUserLog[10] fail,failResp.errMsg="+t.errMsg+",args.retry="+e.retry),e.retry?Lv({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:t&&t.errMsg,index:e.index,info:Object(ea.getStaticSystemInfoSync)()}}):(e.retry=!0,Fv(e))}})}else lv.error("uploadUserLog[11],readFileSync fail="+n.errMsg+",index="+e.index),Lv({webviewId:e.webviewId,data:{type:"uploadUserLogError",errMsg:n.errMsg,index:e.index,info:Object(ea.getStaticSystemInfoSync)()}})}hv||Bv((function(e){lv.info("onH5Data",e,Iv),e.data&&"uploadUserLog"===e.data.type&&Fv({index:1,slice:1,webviewId:e.webviewId})}));var Wv=[],Uv=[],Vv=~~(+new Date/1e3),Gv=0;function Hv(e,t,n,r){var o;o="string"==typeof r?r:r?"high":"low",Object(R.invokeMethod)("operateRealtimeData",{type:t,content:n,priority:o,id:e},{beforeSuccess:function(){},beforeFail:function(e){Uv.forEach((function(t){return t(e)}))}})}function zv(){var e=Wv.shift();"function"==typeof e&&(e(),Gv=+new Date),Wv.length&&setTimeout(zv,200)}var qv=function(e,t,n){if(!ee.IS_DEVTOOLS){var r=+new Date,o=Vv++;return r-Gv>=200&&!Wv.length?(Hv(o,e,t,n),Gv=r):(Wv.push((function(){Hv(o,e,t,n)})),setTimeout(zv,200)),o}},Yv=function(e){ee.IS_DEVTOOLS||"function"==typeof e&&Uv.push(Object(Z.surroundByTryCatchFactory)(e))};Object(R.onMethod)("onRealtimeDataResponse",(function(e){Uv.forEach((function(t){return t(e)}))}));var Kv,Jv=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"GetUploadSetting")),Xv=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"GetUploadSetting",!0)),$v={};function Zv(e){return e?($v[e]||($v[e]=Xv({apiName:"GetUploadSetting",reqData:{},pluginId:e})),$v[e]):Kv||(Kv=Jv({apiName:"GetUploadSetting",reqData:{}}))}var Qv=+new Date,eg=function(){return Qv++},tg=Object(N.surroundByTryCatchFactory)((function(e){return ng(e).errMsg.indexOf("accessSync:ok")>=0})),ng=function(){try{return Sd.accessSync.apply(this,arguments),{errMsg:"accessSync:ok"}}catch(e){return{errMsg:e.message||""}}},rg=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"UploadByApi")),og=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"UploadByApi",!0)),ig={DEBUG:1,INFO:2,WARN:4,ERROR:8},ag=1,sg=2,cg=1,ug="",lg=!1;function dg(e){lg?e&&e():(lg=!0,At.default.onReady((function(){ug=At.default.accountInfo.appId,e&&e()})))}var fg=function(e,t){if("string"!=typeof e)return 0;var n,r,o,i=0;if("utf-16"===(t=t?t.toLowerCase():"utf8")||"utf16"===t)for(r=0,o=e.length;r<o;r++)i+=(n=e.charCodeAt(r))<=65535?2:4;else for(r=0,o=e.length;r<o;r++)i+=(n=e.charCodeAt(r))<=127?1:n<=2047?2:n<=65535?3:4;return i};function pg(){if(void 0!==__appServiceEngine__){var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}if(Object(Lo.isGame)())return"index"}var hg;function vg(){hg&&(hg=clearTimeout(hg))}var gg,_g=!1,bg="",yg=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,e),this.systemInfo=Object(ea.getStaticSystemInfoSync)(),this.opt={},this.opt.level=ig.INFO,this.mode=n.mode||"normal",this.pluginId=n.pluginId,this.pluginVersion=n.pluginVersion,this.timerId=null,this.isExceedTodayUploadLogCount=!1,this.opt.isClientReport=!!n.isClientReport,this.msgList={},this.filterList={},this.kvFilterList={},this.sizeList={},this.levelList={},this._uploadList=[],this._logInfo={},this._logInfo.level=0,this._logInfo.version=2,this._logInfo.source=cg,this._logInfo.platform="ios"===this.systemInfo.platform?sg:ag,this._logInfo.libraryVersion=this.systemInfo.SDKVersion,this._logInfo.clientVersion=this.systemInfo.version,this.exceedSizeList={},this.structSizeList={},this.historyLog={},this.retryLogList={},this.MaxSize=10240,this.MaxLogCount=500,this._logCacheBeforeLogConfig=[],setTimeout((function(){ee.IS_DEVTOOLS||t._getLogConfig()}),300),dg((function(){Object(Lo.isGame)()&&t.cyclelyUploadInGame()})),this.uploadCount=0,this.failCount=0,this.opt.isClientReport&&(this.MaxSize=5120,this.MaxLogCount=200,Object(No.getNetworkType)({success:function(e){bg=e.networkType}}),Object(No.onNetworkStatusChange)((function(e){bg=e.networkType})),Yv((function(e){t.onRealtimeDataResponse(e)})))}return Object(K.default)(e,[{key:"cyclelyUploadInGame",value:function(){var e=this;setTimeout((function(){Cg(),e.cyclelyUploadInGame()}),6e5)}},{key:"onRealtimeDataResponse",value:function(e){var t=this;if(this.uploadCount++,0!==e.errcode&&("wifi"!==bg&&"4g"!==bg||(this.failCount++,this.uploadCount>=5&&this.failCount/this.uploadCount>=.6&&(_g=!0,this.failCount=0,this.uploadCount=0,setTimeout((function(){_g=!1}),6e4))),e.idList&&e.idList.length)){var n=!1,r={},o=!1,i={};e.idList.forEach((function(a){var s=t.historyLog[a];s&&(s.id,s.url,Reporter.reportKeyValue({key:"UserLogFail",value:","+bg+","+e.errcode+","+parseInt(Date.now()/1e3,10)+","+s.url+","+s.libraryVersion+","+ug}),n=!0,delete t.historyLog[a],r[a]=s);var c=t.retryLogList[a];c&&(c.id,c.url,i[a]=c,delete t.retryLogList[a],o=!0)})),n&&(this.retryLogList=r,this.failRetry(r)),o&&this.saveToFile(i)}}},{key:"_getLogConfig",value:function(e,t){var n=this;return Zv(this.pluginId).then((function(r){if(r.rawData){try{var o=JSON.parse(r.rawData);n.MaxSize=1024*o.MaxLogSize,o.MaxLogCount&&(n.MaxLogCount=o.MaxLogCount),n._logInfo.id=o.UserUin,o.OpenId&&(n.traceid=o.OpenId+"_"+parseInt(Date.now()/1e3,10)),o.Debug&&o.Debug.MaxSize&&o.Debug.ExpireTime>Date.now()/1e3&&(n.isDebugMode=!0,n.MaxSize=1024*o.Debug.MaxSize,n.opt.level=ig.DEBUG,o.Debug.MaxLogCount&&(n.MaxLogCount=o.Debug.MaxLogCount));var i=n._logCacheBeforeLogConfig||[];n._logCacheBeforeLogConfig=[],i.forEach((function(e){n._baseLog.apply(n,[e.key,e.path].concat(Object(Y.default)(e.args)))})),n._getConfigFail=!1,e&&n.upload(t),Object(Lo.isGame)()||(a=o.ReportInterval,vg(),(a="number"!=typeof a?3e5:a)>0&&function e(){vg(),hg=setTimeout((function(){Cg(),e()}),a)}())}catch(e){n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]}setTimeout((function(){n.tryUploadFailLog()}),100)}else n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[];var a})).catch((function(e){e.errMsg&&e.errMsg.indexOf("fail invalid scope")>=0&&(n._hasNoPermission=!0,n._logCacheBeforeLogConfig=[]),n._getConfigFail=!0}))}},{key:"_config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.mode&&(this.mode=e.mode)}},{key:"_checkSize",value:function(e,t){var n=0;if(!t||!t.length)return!0;if(!(e=this.pluginId||e||pg()))return!0;t.forEach((function(e){n+=fg(e)})),this.sizeList[e]=this.sizeList[e]||0;var r=this.sizeList[e];return r+n>this.MaxSize?n:(this.sizeList[e]=r+n,!0)}},{key:"_getLogValue",value:function(e){var t,n=Object(x.default)(e),r="";if("function"===n&&(t="function(){}"),"undefined"===n)t="<Undefined>";else if("object"===n){r=(r=Object.prototype.toString.call(e)).replace(/^\[object |\]$/g,"");try{t="Error"===r?e.stack:JSON.stringify(e)}catch(e){r="Error",t=e.message}}else e+="";return t||e}},{key:"_baseLog",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(r.length&&!this._hasNoPermission)if(this._logInfo.id){var i,a,s,c;"object"===Object(x.default)(e)?(i=e.id,a=e.name,s=e.level,c=e.time):(i="__DEFAULT__",a="__DEFAULT__",s=e,c=+new Date);var u=ig[s.toUpperCase()]||0;if(!(u<this.opt.level)){var l,d;if(t=this.pluginId||t||pg(),this.structSizeList[t]=this.structSizeList[t]||0,"kv"===this.mode){var f=r[0],p=r[1];if(!f||"string"!=typeof f)return;var h=this._getLogValue(p);d=this._checkSize(t,[f,h]),l=[i,c,a,f,h]}else l=r.map(this._getLogValue),d=this._checkSize(t,l),this.structSizeList[t]+=6+(l.length?3*l.length-1:0);if(!0===d)this._addLogMsg(l,t,u);else{if(this.exceedSizeList[t]=this.exceedSizeList[t]||0,!this.exceedSizeList[t]){var v=["UserLog:fail Log Size "+d+" Exceed."];"kv"===this.mode&&v.unshift("warning"),this._addLogMsg(v,t,ig.WARN)}this.exceedSizeList[t]+=d}}}else this._logCacheBeforeLogConfig.push({key:e,path:t,args:r})}},{key:"_addLogMsg",value:function(e,t,n){if(!this.isExceedTodayUploadLogCount&&n&&(!this._getConfigFail||!this._getConfigRetry)){var r=this.pluginId||t||pg();if(r)if(this.msgList[r]=this.msgList[r]||[],this.msgList[r].length>=this.MaxLogCount)this.MaxLogCount;else{var o=this.msgList[r][0];if("kv"===this.mode){var i=Object(nt.default)(e,5),a=[n,i[0],i[1],i[2],i[3],i[4]];this.msgList[r].push(a)}else{var s=new Date,c=Math.ceil(+s/1e3),u=[o?c-o[0]:c,e,n,s.getMilliseconds()];if(!this.msgList[r].length){var l=(new Date).getTimezoneOffset();u.push(l)}this.msgList[r].push(u)}this.levelList[r]=this.levelList[r]||0,this.levelList[r]|=n}}}},{key:"OperateWxUploadLog",value:function(e,t){var n=this;if(!this.isExceedTodayUploadLogCount){var r=e.structSize||0;delete e.structSize;var o,i=e.rawSize||0;if(delete e.rawSize,this.opt.isClientReport){var a=this.pluginId?1004:1001;e.url;var s=qv(a,JSON.stringify({interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0,pluginId:this.pluginId||"",pluginVersion:this.pluginVersion||"",appId:ug}));return this.historyLog[s]=e,Reporter.reportKeyValue({key:"UserLog",value:","+(r+i)+","+i+e.timestamp+","+e.url+","+e.filter1+","+ug}),void(t&&t(!0))}return(o={apiName:"UploadByApi",pluginId:this.pluginId,reqData:{interface:this.pluginId?"plugin_log":"weapplog",data:JSON.stringify(e),debug:this.isDebugMode?1:0}},o.pluginId?og(o):rg(o)).then((function(){t&&t(!0)})).catch((function(e){e&&1e4==+e.err_code&&(n.isExceedTodayUploadLogCount=!0),t&&t(!1),n.failCount++}))}}},{key:"failRetry",value:function(e){var t=this;this.uploadFailRetryTimerId||(this.uploadFailRetryTimerId=setTimeout((function(){if(e)for(var n in e)t.historyLog.hasOwnProperty(n)&&t.OperateWxUploadLog(t.historyLog[n])}),3e3))}},{key:"stat",value:function(e){return(e=this.pluginId||e||pg())&&this.sizeList[e]||0}},{key:"_hasUploadInterval",value:function(){return!!this.opt.isClientReport||!(this._isUploading||Date.now()-this._lastUploadTime<1e3)}},{key:"upload",value:function(e){var t=this,n=e||pg();if(e=this.pluginId||n){var r=this.msgList[e]||[];if(r&&r.length)if(this._hasUploadInterval()){if(this._getConfigFail||!this._logInfo.id){if(this._getConfigRetry)return;return this._getConfigRetry=!0,void this._getLogConfig(!0,n)}if(lg){if(!_g){this.msgList[e]=[];var o=this.levelList[e]||ig.DEBUG;this.levelList[e]=0;var i=this.sizeList[e];this.sizeList[e]=0;var a=this.exceedSizeList[e];this.exceedSizeList[e]=0;var s=this._logInfo;s.level=o,s.rawSize=a+i;var c=this.structSizeList[e]||0;if(s.structSize=c,this.structSizeList[e]=0,this._logInfo.timestamp=Math.ceil(Date.now()/1e3),this._logInfo=Object.assign({},this._logInfo),"kv"===this.mode){var u={},l={};r.forEach((function(e){var t=Object(nt.default)(e,6),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5],c=n||ig.DEBUG;l[r]=l[r]||[o,{},c],l[r][1][a]=s,l[r][2]=Math.max(l[r][2],c),u[i]=u[i]||[],-1===u[i].indexOf(l[r])&&u[i].push(l[r])}));var d=this.kvFilterList,f=[];Object.keys(d[e]).forEach((function(t){d[e][t].forEach((function(e){var n=Object(nt.default)(e,2),r=n[0],o=n[1];if(l[r]){var i=l[r][1];i.__REALTIME_LOG_TAG__=i.__REALTIME_LOG_TAG__||[],-1===i.__REALTIME_LOG_TAG__.indexOf(o)&&i.__REALTIME_LOG_TAG__.push(o),-1===f.indexOf(o)&&(f.push(o),f.push(t+"_"+o))}}))})),s.msg=JSON.stringify(u),s.filter1=[].concat(Object.keys(u),f).join(" "),this.kvFilterList[e]=[]}else s.msg=JSON.stringify(r),s.filter1=this.filterList[e]||"",this.filterList[e]="";fg(s.msg),s.appid=ug,this.pluginId&&(s.pluginid=this.pluginId),this.pluginVersion&&(s.pluginVersion=this.pluginVersion),"kv"===this.mode&&(s.mode=this.mode),s.url=n,this.traceid&&(s.traceid=this.traceid),s.device=this.systemInfo.model+" "+this.systemInfo.system,this._isUploading=!0,this.OperateWxUploadLog(s,(function(e){t._isUploading=!1,t._lastUploadTime=Date.now(),e&&t._uploadList.length&&(t.timerId&&clearTimeout(t.timerId),t.timerId=setTimeout((function(){t.timerId=null,t.upload(t._uploadList.shift())}),1e3))}))}}else dg((function(){ug&&t.upload(n)}))}else this._uploadList.indexOf(n)<0&&this._uploadList.push(n)}}},{key:"setFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),fg(t)>2048)return!1;if(e=this.pluginId||e||pg(),"kv"===this.mode&&"object"===Object(x.default)(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=[[n.id,t]],!0}return this.filterList[e]=t,!0}},{key:"addFilterMsg",value:function(e,t,n){if("string"!=typeof t&&(t=JSON.stringify(t)),e=this.pluginId||e||pg(),"kv"===this.mode&&"object"===Object(x.default)(n)){var r=this.kvFilterList;return r[e]=r[e]||{},r[e][n.name]=r[e][n.name]||[],void r[e][n.name].push([n.id,t])}var o=this.filterList[e]||"";this.setFilterMsg(e,o+(o?" ":"")+t)}},{key:"getTraceId",value:function(){return this.traceid||""}},{key:"getFilePath",value:function(){var e=(At.default&&At.default.env.USER_DATA_PATH||(ee.IS_DEVTOOLS?"http://usr":"wxfile://usr"))+"/miniprogramLog/",t=e+"realtime.log";return tg(e)||function(){try{Sd.mkdirSync.apply(this,arguments)}catch(e){return{errMsg:e.message}}}(e),t}},{key:"getFileContent",value:function(e){var t=function(){try{return{data:Sd.readFileSync.apply(this,arguments),errMsg:"readFileSync:ok"}}catch(e){return{errMsg:e.message}}}(e,"utf8");try{if(t&&t.data)return t=JSON.parse(t.data)}catch(e){}return null}},{key:"saveToFile",value:function(e){if(e){var t=this.getFilePath();if(tg(t)){var n=this.getFileContent(t);if(n)for(var r in n)e[r]||(e[r]=n[r])}Object(Sd.writeFile)({filePath:t,data:JSON.stringify(e),encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}},{key:"tryUploadFailLog",value:function(){var e=this.getFilePath();if(tg(e)){var t=this.getFileContent(e);if(!t)return;for(var n in t)t.hasOwnProperty(n)&&this.OperateWxUploadLog(t[n]);Object(Sd.writeFile)({filePath:e,data:"{}",encoding:"utf8",fail:function(e){e.errMsg},success:function(e){}})}}}]),e}(),mg=null,wg={},Og=function(e){return e?wg[e]:mg},Sg=function(e,t){e?wg[e]=t:mg=t},Ig=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r="",o={stat:function(){if(!ee.IS_DEVTOOLS){var e=Og(t);if(e)return e.stat(r)}},setFilterMsg:function(e){if(!ee.IS_DEVTOOLS){var n=Og(t);if(n)return n.setFilterMsg(r,e)}},addFilterMsg:function(e){if(!ee.IS_DEVTOOLS){var n=Og(t);if(n)return n.addFilterMsg(r,e)}},in:function(e){Object(Lo.isGame)()?r="index":e&&e.route&&(r=e.route)},tag:function(e){var n=eg(),o=+new Date;return{debug:function(i,a){if(!ee.IS_DEVTOOLS){var s=Og(t);if(s)return s._baseLog({id:n,name:e,time:o,level:"debug"},r,i,a)}},info:function(i,a){if(!ee.IS_DEVTOOLS){var s=Og(t);if(s)return s._baseLog({id:n,name:e,time:o,level:"info"},r,i,a)}},warn:function(i,a){if(!ee.IS_DEVTOOLS){var s=Og(t);if(s)return s._baseLog({id:n,name:e,time:o,level:"warn"},r,i,a)}},error:function(i,a){if(!ee.IS_DEVTOOLS){var s=Og(t);if(s)return s._baseLog({id:n,name:e,time:o,level:"error"},r,i,a)}},setFilterMsg:function(o){if(!ee.IS_DEVTOOLS){var i=Og(t);if(i)return i.setFilterMsg(r,o,{name:e,id:n})}},addFilterMsg:function(o){if(!ee.IS_DEVTOOLS){var i=Og(t);if(i)return i.addFilterMsg(r,o,{name:e,id:n})}}}}};return o=t?Object.assign(o,{config:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}):Object.assign(o,{config:function(e){if(!ee.IS_DEVTOOLS&&"object"===Object(x.default)(e)){var n=Og(t);n&&n._config(e)}},debug:function(){if(!ee.IS_DEVTOOLS){var e=Og(t);if(e){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e._baseLog.apply(e,["debug",r].concat(o))}}},info:function(){if(!ee.IS_DEVTOOLS){var e=Og(t);if(e){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e._baseLog.apply(e,["info",r].concat(o))}}},warn:function(){if(!ee.IS_DEVTOOLS){var e=Og(t);if(e){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e._baseLog.apply(e,["warn",r].concat(o))}}},error:function(){if(!ee.IS_DEVTOOLS){var e=Og(t);if(e){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e._baseLog.apply(e,["error",r].concat(o))}}}}),Og(t)||Sg(t,new yg({isClientReport:e.isClientReport,pluginId:t,pluginVersion:n,mode:t?"kv":"normal"})),o},Eg=function(e,t,n){n=n||{};var r="develop"===At.default.envVersion||"trial"===At.default.envVersion;return n.isClientReport=!r,Ig(n,e,t)},Cg=function(e){if(!ee.IS_DEVTOOLS){var t,n=(t=[],mg&&t.push(mg),Object.keys(wg).forEach((function(e){return t.push(wg[e])})),t);n.length&&n.forEach((function(t){try{t.upload(e)}catch(e){}}))}};Object(nr.onAppEnterBackground)((function(e){ee.IS_DEVTOOLS||e&&8===e.targetAction||lg&&(gg&&clearTimeout(gg),gg=setTimeout((function(){void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain("").forEach((function(e){Cg(e.route)})):Object(Lo.isGame)()&&Cg();gg=null}),10))}));var Tg,kg=function(e){var t=Object(uo.getPluginId)(this);Object(R.invokeMethodWithPlugin)(t)("chooseShareGroup",e)},Ag=Object(fo.getEventManager)("memoryWarning"),Pg=Ag.onMethod,Dg=Ag.offMethod;Object(R.onMethod)("onMemoryWarningReceive",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(ee.IS_ANDROID&&e.level<10)){var t=Ag.getGlobalListeners();t.length?Ag.emitGlobal(e):"function"==typeof Tg&&Tg(e)}}));var jg=[],xg="undefined"!=typeof document,Rg=!1;void 0!==__wxConfig&&(!__wxConfig.platform&&xg?window.navigator.userAgent.toLowerCase().indexOf("wechatdevtools")>=0&&(Rg=!0):"devtools"===__wxConfig.platform&&(Rg=!0));var Mg=Rg?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={category:e,name:t,timeStamp:"undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),phase:"B",args:JSON.stringify(n)};jg.push(r),"undefined"!=typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[r]})}:function(){},Ng=Rg?function(e){var t=jg.pop();t?(t.args=e?t.args:JSON.stringify(e),t.timeStamp="undefined"!=typeof performance&&performance.now?performance.timing.navigationStart+performance.now():Date.now(),t.phase="E","undefined"!=typeof WeixinJSBridge&&"function"==typeof WeixinJSBridge.invoke&&WeixinJSBridge.invoke("traceEvent",{events:[t]})):console.error("[Perf] Call traceBeginEvent() before traceEndEvent().")}:function(){},Lg=null,Bg=null,Fg=null,Wg=null,Ug=new Promise((function(e){Wg=e}));At.default.onReady((function(){var e=function(e){Bg=e,Fg=At.default,Lg=Object(ea.getStaticSystemInfoSync)(),Wg()};new Promise((function(e,t){Object(No.getNetworkType)({success:function(t){e(t.networkType)},fail:function(e){t(e)}})})).then((function(t){e(t)})).catch((function(){e(null)}))}));var Vg,Gg=function(e){Fg?e():Ug.then(e)},Hg={enabled:!0,sampleRate:1,batchTime:300,legacyReportEnabled:!0,bufferCapacity:1e3,userUin:0},zg=!1;function qg(e,t){if(0===t)return!1;var n=Math.ceil(1/t);return e%n===parseInt(Date.now()/864e5,10)%n}function Yg(){var e=void 0!==__appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],t=Lg&&Lg.brand,n=Lg&&Lg.model,r=Lg&&Lg.platform,o=Lg&&Lg.system,i=Fg&&Fg.appLaunchInfo&&Fg.appLaunchInfo.scene,a=Fg&&At.default.envVersion,s=Lg&&Lg.version,c=Lg&&Lg.SDKVersion,u=e.length>0&&e[e.length-1].__route__||"";return{platform:r,system:o,path:u=function(e){if(!e)return"";var t=e.indexOf("?");return t>-1?e.substring(0,t):e}(u),scene:i,brand:t,model:n,networkType:Bg,envType:a,clientVersion:s,sdkVersion:c}}var Kg=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"UploadByApi")),Jg={};function Xg(){var e=Object.keys(Jg);if(!(e.length<=0)&&Hg.enabled&&("release"!==At.default.envVersion||1===Hg.sampleRate||!Hg.userUin||qg(Hg.userUin,Hg.sampleRate)))for(var t="develop"===At.default.envVersion||"trial"===At.default.envVersion,n=0,r=e;n<r.length;n++){var o=r[n],i=Jg[o],a={key:i.key,value:i.valueSum/i.count,num:i.count},s=i.baseInfo,c=i.dimensions;t?c.length>0?r_({appId:i.appId,metrics:a,baseInfo:s,interfaces:"log_20004",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):r_({appId:i.appId,metrics:a,baseInfo:s,interfaces:"log_20002",busid:"b_wxg_wxa_miniprogram_performance"}):c.length>0?n_({appId:i.appId,metrics:a,baseInfo:s,interfaces:"log_20003",busid:"b_wxg_wxa_miniprogram_performance",dimensions:c}):n_({appId:i.appId,metrics:a,baseInfo:s,interfaces:"log_20001",busid:"b_wxg_wxa_miniprogram_performance"}),delete Jg[o],Reporter.reportKeyValue({key:"PerfReport",value:[i.appId,s.platform,s.scene,s.brand,s.model,s.networkType,s.envType,a.key,a.value,a.num,parseInt(Date.now()/1e3,10)].join(",")})}}var $g=null;function Zg(){var e="develop"===At.default.envVersion||"trial"===At.default.envVersion?60:Hg.batchTime;$g&&clearInterval($g),$g=setInterval(Xg,1e3*e)}var Qg=!1;function e_(){Qg=!0,Gg((function(){setTimeout(Xg,3e4),Zg(),Object(nr.onAppEnterBackground)((function(){Xg()})),Object(Pi.onAppEnterForeground)((function(){Zg()}))}))}function t_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,o=e.dimensions,i=void 0===o?[]:o,a="";i.length>0&&(a="_"+i.join("_"));var s=Yg(),c=r.key+"_"+s.networkType+"_"+s.scene+a,u=Object.keys(Jg).length;if(!(u>Hg.bufferCapacity)){Jg[c]||(Jg[c]={appId:t,key:r.key,valueSum:0,count:0,baseInfo:s,dimensions:i});var l=Jg[c];l&&(l.valueSum+=r.value,l.count++)}}function n_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,o=e.baseInfo,i=void 0===o?{}:o,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions,d=JSON.stringify({appId:t,base:i,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)}),f=JSON.stringify({interface:s,busid:u,data:d});qv(1002,f,!0)}function r_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.appId,n=e.metrics,r=void 0===n?{}:n,o=e.baseInfo,i=void 0===o?{}:o,a=e.interfaces,s=void 0===a?"":a,c=e.busid,u=void 0===c?"":c,l=e.dimensions;if(Hg.enabled){var d=JSON.stringify({appId:t,base:i,metrics:r,dimensions:l,time:parseInt(Date.now()/1e3,10)});Kg({apiName:"UploadByApi",reqData:{interface:s,busid:u,data:d}}).catch((function(){}))}}var o_=4294967295;function i_(e,t,n,r){Hg.enabled&&(e||"number"==typeof e||console.warn("[reportPerformance] id can not be empty"),t||"number"==typeof t||console.warn("[reportPerformance] value can not be empty"),e=parseFloat(e),t=parseFloat(t),(Number.isNaN(e)||"number"!=typeof e)&&console.warn("[reportPerformance] id should always be type of Number"),e>=0&&e<=o_||console.warn("[reportPerformance] id is out of range, will probably cause report failure"),(Number.isNaN(t)||"number"!=typeof t)&&console.warn("[reportPerformance] id should always be type of Number"),t>=0&&t<=o_?(void 0===n||Array.isArray(n)||(n=[String(n)]),Array.isArray(n)&&(n.length>2&&console.warn("[reportPerformance] expected dimensions length to be less than or equals to 2, but got",n.length),0===(n=n.slice(0,2)).length&&(n[0]="",n[1]=""),1===n.length&&(n[1]=""),n=n.map((function(e){return e?String(e):""})).map((function(e){return e.substring(0,256)}))),n&&Array.isArray(n)||(n=[]),zg||(zg=!0,Vg=Zv().then((function(e){var t;try{t=JSON.parse(e.rawData)}catch(e){}if(t){var n=t.PerformaceGlobalConf,r=t.PerformacePersonalConf;n&&(void 0!==n.PerformanceOldReportOff&&(Hg.legacyReportEnabled=!(1===n.PerformanceOldReportOff)),void 0!==n.PerformanceReportMaxNum&&(Hg.bufferCapacity=parseInt(n.PerformanceReportMaxNum,10)),void 0!==n.PerformanceMiniprogramlibGatherTime&&(Hg.batchTime=60*parseInt(n.PerformanceMiniprogramlibGatherTime,10))),r&&(void 0!==r.PerformanceMiniprogramlibOff&&(Hg.enabled=!(1===r.PerformanceMiniprogramlibOff)),void 0!==r.PerformanceMiniprogramlibGatherTime&&(Hg.batchTime=60*parseInt(r.PerformanceMiniprogramlibGatherTime,10)),void 0!==r.PerformanceMiniprogramlibSamplingRatio&&(Hg.sampleRate=parseInt(r.PerformanceMiniprogramlibSamplingRatio,10)/100)),Hg.userUin=t.UserUin,300!==Hg.batchTime&&Zg()}})).catch((function(e){}))),Qg||e_(),Gg((function(){"release"===At.default.envVersion&&1!==Hg.sampleRate&&Hg.userUin&&!qg(Hg.userUin,Hg.sampleRate)||function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,o=Object.create(null);o.key=e,o.value=t;var i=Yg(),a="";r?(a=r.pluginId,i.pluginCustomVersion=r.customVersion,i.path=__virtualDOM__.convertRouteToComponentAlias(i.path),i.path.indexOf("plugin")<0&&(i.path="")):a=Fg.accountInfo&&Fg.accountInfo.appId,t_({appId:a,metrics:o,dimensions:n}),Vg&&Vg.then((function(){"release"===At.default.envVersion&&1!==Hg.sampleRate&&Hg.userUin&&!qg(Hg.userUin,Hg.sampleRate)||Hg.enabled&&Hg.legacyReportEnabled&&n_({appId:a,metrics:o,baseInfo:i,interfaces:"log_20000_userdefine",busid:"b_wxg_wxa_miniprogram_performance"})}))}(e,t,n,r)}))):console.warn("[reportPerformance] value should be in range of",0," to",o_))}var a_=n(188),s_=new U.default;Object(R.onMethod)("onUpdateStatusChange",(function(e){var t,n=(e.state||"").toLowerCase();e.appContactInfo&&e.appContactInfo.passThroughInfo.forceUpdate||!1?"updateready"===n&&(console.info("[apply update before]"),ee.IS_ANDROID&&At.default.clientVersion<=654315263?Object(R.invokeMethod)("updateApp",t):Object(wf._showModal)({content:"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){Object(R.invokeMethod)("updateApp",t)}})):(delete e.state,s_.emit(n,e))}));var c_,u_=[];s_.on("updating",(function(){c_={hasUpdate:!0},l_()})),s_.on("noupdate",(function(){c_={hasUpdate:!1},l_()}));var l_=function(){u_.forEach((function(e){"function"==typeof e&&e(c_)})),u_.length=0},d_=[],f_=!1,p_=!1;s_.on("updateready",(function(){f_=!0,v_()}));var h_,v_=function(){d_.forEach((function(e){"function"==typeof e&&e()})),d_.length=0},g_=[];s_.on("updatefailed",(function(){h_={},__()}));var __=function(){g_.forEach((function(e){"function"==typeof e&&e(h_)})),g_.length=0},b_={onCheckForUpdate:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onCheckForUpdate callback function"),c_?"function"==typeof e&&e(c_):u_.push(e)},onUpdateReady:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),f_?"function"==typeof e&&e():d_.push(e)},onUpdateFailed:function(e){e=__errorTracer__.surroundThirdByTryCatch(e,"at onUpdateReady callback function"),h_?"function"==typeof e&&e(h_):g_.push(e)},applyUpdate:function(e){f_&&p_?Object(R.beforeInvokeFail)("applyUpdate",e,"applyUpdate has been called"):f_?(p_=!0,ee.IS_ANDROID&&At.default.clientVersion<=654315263?Object(R.invokeMethod)("updateApp",e):Object(wf._showModal)({content:"小程序需要重启以使用最新功能",confirmText:"知道了",showCancel:!1,complete:function(){Object(R.invokeMethod)("updateApp",e)}})):Object(R.beforeInvokeFail)("applyUpdate",e,"update is not ready")}},y_=n(104),m_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(e,{url:"https://support.weixin.qq.com/update/"});Object(y_.privateOpenUrl)(t)},w_=0,O_=function(e){Date.now()>w_&&(Object(wf._showModal)({title:"",content:e,confirmText:"确定",showCancel:!1},50),w_=Date.now()+6e4)},S_={2:"插件版本过低，无法提供服务"},I_=function(e,t,n){if(!Hi.default.pluginInfos)return null;var r=Hi.default.pluginInfos[e];if(!r)return null;var o=r.runningFlag,i=r.banning||{},a=S_[o];return o||i[t]?{all:o,detail:i[t],hint:i.hint||a||n||"由于小程序违规，该服务暂时无法使用"}:null};Hi.default.emitter.on("pluginInfoFetchDone",(function(){if(void 0!==__virtualDOM__&&__virtualDOM__.initBannedMap){var e={},t=Hi.default.pluginInfos;for(var n in t)e[n]=I_(n,"components");__virtualDOM__.initBannedMap(e)}}));var E_,C_=n(109),T_={request:xl,uploadFile:Fl,downloadFile:ra._downloadFileSkipCheckDomain,connectSocket:gd().connectSocket},k_={_requestSkipCheckDomain:xl,_uploadFileSkipCheckDomain:Fl,_downloadFileSkipCheckDomain:ra._downloadFileSkipCheckDomain,_socketSkipCheckDomainFactory:gd},A_=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];uv.nativeConsole[e](["[Plugin]"].concat(Object(Y.default)(n.map((function(e){return"string"==typeof e?e:JSON.stringify(e)})))).join(" "))}},P_=A_("info"),D_=A_("warn"),j_=Hi.default.emitter,x_=Hi.default.pluginInfos,R_=(E_={},Object(q.default)(E_,1,!1),Object(q.default)(E_,3,!1),E_),M_=0,N_=0,L_=[10,10,10],B_=!1;Yi()||(R_[2]=!1);var F_=function(e){R_[e]=!0,Object.keys(R_).reduce((function(e,t){return e&&R_[t]}),!0)&&(B_||(P_("all steps done, emit pluginInfoFetchDone"),j_.emit("pluginInfoFetchDone"),B_=!0),j_.emit("pluginInfoFetchDoneInterval"))},W_=function(e,t){setTimeout((function(){var n=[e,t,__appServiceEngine__.getCurrentRoute(),Object(Qi._getLaunchOptionsSync)().sessionid||Object(Qi._getLaunchOptionsSync)().sessionId||"",1,""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:n})}),0)},U_=function e(t){P_("start to invokeGetContact");var n=[],r={};for(var o in x_)n.push(o),r[o]=x_[o].customVersion;0!==n.length?(Object(R.invokeMethod)("batchGetContact",{appIds:n,success:function(n){var o=n.contactList;if(P_("batchGetContact result -> ",o),function(e){if(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.appId;if(void 0===n.appId||void 0===n.plugin_list)return;if(!n.plugin_list[0]||!zi[r])return;var o=n.plugin_list[0].PluginNetWork||{},i=n.plugin_list[0].last_version||{};zi[r].domains={request:o.RequestDomain||[],uploadFile:o.UploadDomain||[],downloadFile:o.DownloadDomain||[],connectSocket:o.WsRequestDomain||[]},zi[r].latestCustomVersion=Ki(i.custom_version)}void 0!==Li&&Li(),Mi=e,qi.forEach((function(e){e(Mi)}))}}(o),t>0){var i=!1;if(!i){var a=0;for(var s in x_){if(x_[s].latestCustomVersion>=0&&r[s]>x_[s].latestCustomVersion){P_("customVersion in code ("+r[s]+") is larger than customVersion in contact info ("+x_[s].latestCustomVersion+"). Retry needed."),i=!0;break}for(var c in x_[s].domains)x_[s].domains[c]&&(a+=x_[s].domains[c].length)}i||a||(P_("no domains set. Retry needed."),i=!0)}if(i)return void setTimeout((function(){e(t-1)}),1e3)}F_(2)},fail:function(t){D_("batchGetContact failed: "+t.errMsg),M_<1?(P_("retry to batchGetContact.."),setTimeout(e,0),M_++):F_(2)}}),setTimeout((function(){F_(2)}),12e4)):P_("appids are empty, skip invokeGetContact.")},V_=null,G_=function(){null!==V_&&(clearTimeout(V_),V_=null,H_())},H_=function e(){P_("start to invokeVerifyPlugin",Date.now());var t=[];for(var n in x_){var r=x_[n];t.push({provider:n,inner_version:r.version})}0!==t.length?function(e){var t=e.plugins,n=e.success,r=e.fail,o=e.timeout,i=!1,a=setTimeout((function(){i=!0,r({errMsg:"verifyPlugin:fail timeout"})}),1e3*o);Object(R.invokeMethod)("verifyPlugin",{data:{plugins:t},success:function(){i||(clearTimeout(a),n.apply(void 0,arguments))},fail:function(){i||(clearTimeout(a),r.apply(void 0,arguments))}})}({plugins:t,timeout:10,success:function(e){var t=e.data;if(void 0!==t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){}!function(e){for(var t=0;t<e.length;t++){var n=e[t],r=n.plugin_id,o=zi[r];if(!o)return;o.banning=n.banning,o.runningFlag=n.running_flag_info,o.hostSign={noncestr:n.noncestr||"",timestamp:n.timestamp||"",signature:n.host_sign||""},Yi()&&(o.domains={request:n.request_domain||[],uploadFile:n.upload_domain||[],downloadFile:n.download_domain||[],connectSocket:n.wsrequest_domain||[]})}Ji(e),Li&&Li()}(Array.isArray(t.list)?t.list:[]),P_("verifyPlugin result -> ",t.list),F_(3),N_=0,V_=setTimeout(G_,6e5)}else D_("Plugin data from backend is not available.")},fail:function(t){var n;D_("invokeVerifyPlugin failed: "+t.errMsg,Date.now()),N_<L_.length?n=L_[N_]:(R_[3]||F_(3),n=30),P_("retry invokeVerifyPlugin after "+n+"s.."),setTimeout(e,1e3*n),N_++}}):P_("plugins is empty, skip invokeVerifyPlugin.")};__safeway__.onSubpackageReady((function(e,t){var n=t.separatedPlugins||[];P_("onSubpackageReady",n),n.forEach((function(e){x_[e.plugin_id]&&e.custom_version&&(x_[e.plugin_id].customVersion=Ki(e.custom_version))}))}));var z_=function(e,t){var n=I_(e,"domains");if(!n)return!1;if(!n.all){for(var r=n.detail,o=Object(C_.parse)(t||""),i=!1,a=0;a<r.length;a++){var s=Object(C_.parse)(r[a]||"");if(o.protocol===s.protocol&&o.hostname===s.hostname&&o.port===s.port){i=!0;break}}if(!i)return!1}return O_(n.hint),!0},q_=function(e,t){var n=t.header||{},r=e.hostSign||{};n["X-WECHAT-HOSTSIGN"]=JSON.stringify(r),wxNativeConsole.info("[Plugin] add host sign: "+JSON.stringify(r)),t.header=n},Y_=function(e,t,n){var r=[e,t,__appServiceEngine__.getCurrentRoute(),Object(Qi._getLaunchOptionsSync)().sessionid||Object(Qi._getLaunchOptionsSync)().sessionId||"",2,n].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"PluginDisplay",value:r})},K_=!1;At.default.onReady((function(){if(ee.IS_DEVTOOLS)K_=!1===At.default.urlCheck;else{var e=At.default.envVersion&&"release"!==At.default.envVersion,t=!0===At.default.debug;K_=e&&t}}));var J_=function(e,t,n){return new Promise((function(r,o){Object(R.invokeMethod)("checkNetworkAPIURL",{api:e,url:t,success:function(e){var i=Object(uo.checkDomains)(t,n)||e.isInLAN&&!e.isLocalHost,a="";i||(a='Url "'+t+"\" not in plugin's domain list.",K_&&console.warn(a+" This network request will be blocked in release version.")),K_||i?r():o(a)},fail:function(e){o(e.errMsg||"check url failed.")}})}))},X_=0,$_=!0,Z_=[];Hi.default.emitter.on("pluginInfoFetchDoneInterval",(function(){for($_=!1,X_=Date.now();Z_.length>0;){Z_.shift()()}}));var Q_=function(){return Date.now()-X_>6e5?($_||G_(),new Promise((function(e){Z_.push(e)}))):Promise.resolve()},eb=Object.assign,tb={};Object.keys(T_).forEach((function(e){tb[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(uo.getPluginId)(this),r=eb({},t);return r.customCheck=function(t,r){var o;Q_().then((function(){var r=(o=Hi.default.pluginInfos[n]).domains[e],i=e;return"connectSocket"===e&&(i="websocket"),J_(i,t.url,r)})).then((function(){if(z_(n,t.url)){var e='url "'+t.url+'" is temporarily rejected.';r(e)}else Y_(n,o.version,t.url),q_(o,t),r(null)})).catch((function(e){var t=Object(re.isString)(e)?e:"check url failed.";r(t)}))},T_[e](r)}}));var nb=tb,rb=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ee.IS_IOS){var n="preloadWebview:ok preload request ignored in iOS";Object(R.callbackInvoke)({errMsg:n},"preloadWebview",t,{})}else Object(uu.invokeWebviewMethod)("preloadWebview",{pluginId:e},void 0,(function(e){Object(R.callbackInvoke)(e,"preloadWebview",t,{})}))}},ob=rb("/");function ib(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ab(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ib(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ib(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sb=new WeakMap,cb=function(e,t){var n=I_(e,"apis");return!!n&&(!(!n.all&&n.detail.indexOf(t)<0)&&(O_(n.hint),!0))},ub=function(e,t){var n=this,r=function(r){var o=e[r];if("function"==typeof o){var i=n;n[r]=function(e){if(Object(M.checkWxInterfacePermission)(r,t)&&!cb(t,r))return o.apply(i,arguments);if("Sync"===r.slice(-4))throw new N.AppServiceSdkKnownError(r+":fail rejected due to no permission currently in plugin");e&&(e.fail||e.complete)&&setTimeout((function(){Object(R.beforeInvokeFail)(r,e,"rejected due to no permission currently in plugin")}),0)}}else n[r]=e[r]};for(var o in e)r(o)},lb=function(e){for(var t in At.default.plugins){var n=At.default.plugins[t];n.provider===e&&sb.set(this,n.version)}},db=function(){function e(t,n,r){Object($.default)(this,e);var o=Object(N.guid)();Hi.default.puidToPluginWX[o]=this,Hi.default.pluginIDs[o]=n,Hi.default.pluginVersions[o]=r;var i=function(e,t,n,r){var o=ab(ab({},k_),{},{_operateWXData:t.operateWXData});for(var i in o)o[i]=o[i].bind(e);return ab(ab({},t),{},{preloadWebview:rb(n),cloud:__cloudSDK__.getCloudAPI({sdk:o,identifiers:{pluginId:n,pluginVersion:r}})})}(this,t,n,r);ub.call(this,i,n),lb.call(this,n)}return Object(K.default)(e,[{key:"getPluginVersion",value:function(){return sb.get(this)}}]),e}(),fb={},pb=function(e,t){var n=(e=e.replace("plugin_","")).endsWith("Sync");fb[e]=function(e){var r=Object(uo.getPluginId)(this);if(n){e&&(e=r+"/"+e);for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.apply(void 0,[e].concat(i))}return e.key&&(e.key=r+"/"+e.key),t(e)}};for(var hb in Wd)hb.startsWith("plugin_")&&pb(hb,Wd[hb]);var vb=fb,gb={createInnerAudioContext:bi};["createAudioContext","createCameraContext","createMapContext","createVideoContext","createLivePlayerContext","createLivePusherContext"].forEach((function(e){gb[e]=function(t,n){var r=Object(uo.getPluginId)(this),o=Object(uo.getPluginVersion)(this),i=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return c[e].call(this,t,L.default.currentWebviewId,i,r+"/"+o)}}));var _b=gb,bb={createOffscreenCanvas:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r="object"===Object(x.default)(e)?r:{width:e,height:t,compInst:n},o=Object(uo.getPluginId)(this);return r.pluginId=o,ke.createOffscreenCanvas(r)}},yb=[];for(var mb in r)mb.endsWith("4Plugin")&&yb.push(mb);yb.forEach((function(e){var t=e.replace("4Plugin","");bb[t]=function(t,n){var o=Object(uo.getPluginId)(this),i=Object(uo.getPluginVersion)(this),a=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return r[e].call(this,t,o+"/"+i,a)}}));var wb,Ob=bb,Sb=n(123),Ib=n(84),Eb=n(34),Cb=n(83),Tb=new Cb.default,kb="SHOW_REWARD",Ab="HIDE_REWARD",Pb={banner:"SHOW_BANNER","incentive-video":kb,grid:"SHOW_GRID"},Db={banner:"HIDE_BANNER","incentive-video":Ab,grid:"HIDE_GRID"},jb=function(){function e(t){var n=t.adUnitId,r=t.adType,o=void 0===r?"banner":r;Object($.default)(this,e),this.adUnitId=n,this.adType=o}return Object(K.default)(e,[{key:"show",value:function(){var e=Pb[this.adType];e&&Tb.emit(e,{adUnitId:this.adUnitId})}},{key:"hide",value:function(){var e=Db[this.adType];e&&Tb.emit(e,{adUnitId:this.adUnitId})}},{key:"on",value:function(e,t){var n=this;Tb.on(e,(function(e){e.adUnitId!==n.adUnitId&&t(e)}))}}]),e}(),xb=n(18),Rb=n(12),Mb=function(e,t,n){return Rb.init.call(this,e,function(e){for(var t={},n=0,r=Object.keys(e||{});n<r.length;n++){var o=r[n];e[o]&&(t[o]=Object.assign({},e[o]),e[o].landscape&&!e[o].landscapeLeft&&(t[o].landscapeLeft=Object.assign({},e[o].landscape)),e[o].landscape&&!e[o].landscapeRight&&(t[o].landscapeRight=Object.assign({},e[o].landscape)))}return t}(t),n)},Nb={container:{position:"absolute",hidden:!0,overflow:"hidden"},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},tag:{width:63,height:18,right:0,bottom:0,position:"absolute"},tagView:{hidden:!0,right:0,bottom:0,position:"absolute",flexDirection:"row"},tagBeforeContainer:{width:6,height:18,overflow:"hidden"},tagBefore:{width:12,height:24,borderRadius:6,backgroundColor:"rgba(0, 0, 0, 0.2)"},tagContent:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.2)"},tagMiniapp:{hidden:!0,width:11,height:12,marginRight:1},tagLabel:{height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},Lb={container:{flexDirection:"row",justifyContent:"space-between",position:"absolute",hidden:!0,overflow:"hidden",backgroundColor:"#ffffff"},appContainer:{flex:1,flexDirection:"column",backgroundColor:"#ffffff",alignItems:"center",paddingTop:12.5,paddingBottom:12.5},appIcon:{width:37,height:37,borderRadius:18.5},adFeedback:{hidden:!0,width:40,height:15,backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2,color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",justifyContent:"center",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:10},rectangle:{marginTop:2,marginRight:4,width:7.2,height:4.2},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:131,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine0:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},appName:{height:13,fontSize:11,lineHeight:13,color:"#888888",marginTop:5,marginBottom:15,textAlign:"center"},appButton:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadButton:{width:60,height:27,hidden:!0},downloadButtonText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:27,lineHeight:27,textAlign:"center",fontSize:15,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},rectangleClose:{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"},adCloseTip:{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999},adCloseTipWrap:{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:48,height:41},adCloseTipText:{width:200,height:45,marginLeft:8},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}},Bb={1:function(e,t){var n=Wb(e.id),r='<text id="{id}" value="{value}" bubble-event="true"></text>';r=Ub(r,"id",n),r=Ub(r,"value",e.content);var o={};return o[n]={position:"absolute",overflow:"hidden",left:e.left,top:e.top,width:e.width,height:e.height,fontSize:e.font_size,lineHeight:e.line_height,fontWeight:e.font_weight||"normal",color:e.font_color||"#000000",textAlign:e.align||"left",lineBreak:1==e.nowrap?"clip":"break-word"},{widgetTmpl:r,widgetStyle:o,scaleDoms:[n]}},2:function(e,t){var n=Wb(e.id),r='<image id="{id}" src="{src}" bubble-event="true"></image>';r=Ub(r,"id",n),r=Ub(r,"src",e.image_url);var o={};return o[n]={position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height},{widgetTmpl:r,widgetStyle:o,scaleDoms:[n]}},3:function(e,t){},4:function(e,t){var n='\n  <view id="downloadButton" click-state="true">\n    <text id="downloadButtonText" value="{value}" bubble-event="true"></text>\n    <text id="downloadProgress" bubble-event="true">\n      <text id="downloadProgressText" bubble-event="true"></text>\n    </text>\n  </view>\n  <text id="appButton" value="{value}" click-state="true"></text>\n';return{widgetTmpl:n=Ub(n,"value",e.title),widgetStyle:{appButton:{position:"absolute",textAlign:"center",left:e.left,top:e.top,width:e.width,height:e.height,lineHeight:e.height,fontSize:e.font_size,color:e.font_color||"#000000",fontWeight:e.font_weight||"normal",backgroundColor:e.background_color||"transparent",borderColor:e.border_color||"transparent",borderWidth:1,borderRadius:e.border_radius},downloadButton:{position:"absolute",left:e.left,top:e.top,width:e.width,height:e.height,hidden:!0},downloadButtonText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:e.font_color||"#04be02",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:e.width,height:e.height,lineHeight:e.height,textAlign:"center",fontSize:e.font_size,color:"#ffffff",borderWidth:1,borderColor:e.border_color||"#04be02",borderRadius:e.border_radius,backgroundColor:e.border_color||"#04be02"}},scaleDoms:["appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]}},5:function(e,t,n){var r=Wb(e.id),o=Wb(e.id),i=Wb(e.id),a='\n  <view id="{wrapId}" bubble-event="true">\n    <image id="{headerId}" src="{header}" bubble-event="true"></image>\n    <text id="{labelId}" value="{label}" bubble-event="true"></text>\n  </view>\n';a=Ub(a,"wrapId",r),a=Ub(a,"headerId",o),a=Ub(a,"header",e.head_url),a=Ub(a,"labelId",i),a=Ub(a,"label",e.nick_name);var s={},c=120/690*n.width;s[r]={position:"absolute",left:e.left,top:e.top,width:c,overflow:"hidden",flex:1,flexDirection:"column",alignItems:"center"};var u=70/690*n.width;s[o]={width:u,height:u,borderRadius:1==e.head_type?u/5:u/2,marginBottom:10/690*n.width};var l=24/690*n.width;return s[i]={fontSize:l,color:"#888888",width:c,height:l+5,lineHeight:l+5,textAlign:"center",lineBreak:"ellipsis"},{widgetTmpl:a,widgetStyle:s,scaleDoms:[r,o,i]}},6:function(e,t){var n=Wb(e.id),r=Wb(e.id),o=Wb(e.id),i=Wb(e.id),a=Wb(e.id),s='\n  <view id="{tagViewId}" bubble-event="true">\n    <image id="{tagBeforeId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgm1whMrNszgO3SgLoE6tlNzpKQQm4ubB6PeOLWL30sIWR7Sfsiakp1Ouw/0?wx_fmt=png"></image>\n    <view id="{tagContentId}" bubble-event="true">\n      <image id="{tagMiniappId}" bubble-event="true" src="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJD1yfAwp8hgmCKiaGzo9XUvxlDiaibHqzSO9BqvH74E0m5ibptJHaMAxicKvxXmM4LjMicaA/0?wx_fmt=png"></image>\n      <text id="{tagLabelId}" value="{label}" bubble-event="true"></text>\n    </view>\n  </view>\n';s=Ub(s,"tagViewId",n),s=Ub(s,"tagBeforeId",r),s=Ub(s,"tagContentId",o),s=Ub(s,"tagMiniappId",i),s=Ub(s,"tagLabelId",a),s=Ub(s,"label",e.watermark_text);var c={};c[n]={right:0,bottom:0,position:"absolute",flexDirection:"row"},c[r]={width:14,height:18},c[o]={flexDirection:"row",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.6)"},c[i]={hidden:1==e.watermark_icon,width:11,height:12,marginRight:1},c[a]={width:11*e.watermark_text.length+6,height:18,lineHeight:18,color:"#ffffff",textAlign:"left",fontSize:11};return{widgetTmpl:s,widgetStyle:c,scaleDoms:[]}}},Fb=1,Wb=function(e){return["wdgt",e,Fb++].join("__")},Ub=function(e,t,n){return e.replace(RegExp("\\{"+t+"\\}","gi"),n)},Vb=(wb={adFeedback:{width:46,height:15,backgroundColor:"rgba(40, 40, 40, 0.6)",borderRadius:12,"ios-portrait":{borderRadius:7},"ios-landscape":{borderRadius:7},"iphone x-portrait":{borderRadius:7},"iphone x-landscape":{borderRadius:7},color:"#ffffff",textAlign:"center",left:5,top:5,flexDirection:"row",alignItems:"center",position:"absolute"},adText:{width:28,height:14,lineHeight:14,color:"#ffffff",textAlign:"center",fontSize:11,left:4,top:1.5,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5},position:"absolute"},rectangle:{top:7,left:32,width:7.2,height:4.2,position:"absolute"},adFeedbackList:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLine:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineAffect:{hidden:!0,width:134,height:1,backgroundColor:"#E0E0E0"},adDislikeBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adAffectBtn:{hidden:!0,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:20,left:5,position:"absolute",width:134,height:98,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"}},Object(q.default)(wb,"adCloseBtnLine",{width:134,height:1,backgroundColor:"#E0E0E0"}),Object(q.default)(wb,"adCloseBtnLine0",{width:134,height:1,backgroundColor:"#E0E0E0"}),Object(q.default)(wb,"rectangleClose",{hidden:!0,top:5,left:32,width:7.2,height:7.2,position:"absolute"}),Object(q.default)(wb,"adCloseTip",{hidden:!0,backgroundColor:"#f7f7f7",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:9999}),Object(q.default)(wb,"adCloseTipWrap",{width:300,height:80,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center"}),Object(q.default)(wb,"adCloseTipIcon",{width:48,height:41}),Object(q.default)(wb,"adCloseTipText",{width:200,height:45,marginLeft:8}),Object(q.default)(wb,"adCloseTipTitle",{width:200,height:20,fontSize:18,color:"#3a3a3a"}),Object(q.default)(wb,"adCloseTipContent",{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:5}),wb);function Gb(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Hb=n(77),zb=Hb('\n  <image id="container" click-state="false">\n    <view id="ad-feedback" click-state="true">\n        <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <text id="ad-close-btn" click-state="true" value="关闭"></text>\n      <view id="ad-close-btn-line-dislike"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-affect"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line0"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n    <image id="tag" bubble-event="true"></image>\n    <view id="tagView" bubble-event="true">\n      <view id="tagBeforeContainer">\n        <view id="tagBefore" bubble-event="true"></view>\n      </view>\n      <view id="tagContent" bubble-event="true">\n        <image id="tagMiniapp" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/mini_program_v2.png"></image>\n        <text id="tagLabel" value="" bubble-event="true"></text>\n      </view>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </image>\n').root,qb=(Hb('\n  <view id="container" click-state="true">\n    <image id="app-icon" bubble-event="true"></image>\n    <view id="app-information" bubble-event="true">\n      <text id="app-name" bubble-event="true"></text>\n      <text id="app-wording" bubble-event="true"></text>\n    </view>\n    <text id="app-button" click-state="true"></text>\n  </view>\n').root,Hb('\n  <view id="container" click-state="false">\n    <image id="image" bubble-event="true">\n        <view id="ad-feedback" click-state="true">\n            <text id="ad-text" value="广告" click-state="true" bubble-event="true"></text>\n            <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n            <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n        </view>\n        <view id="ad-feedback-list">\n          <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n          <text id="ad-close-btn" click-state="true" value="关闭"></text>\n          <view id="ad-close-btn-line-dislike"></view>\n          <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n          <view id="ad-close-btn-line-affect"></view>\n          <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n        </view>\n        <view id="ad-feedback-menu">\n          <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n          <view id="ad-close-btn-line"></view>\n          <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n          <view id="ad-close-btn-line0"></view>\n          <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n        </view>\n    </image>\n    <view id="app-container" bubble-event="true">\n      <image id="app-icon" bubble-event="true"></image>\n      <text id="app-name" bubble-event="true"></text>\n      <view id="download-button" click-state="true">\n        <text id="download-button-text" bubble-event="true"></text>\n        <text id="download-progress" bubble-event="true">\n          <text id="download-progress-text" bubble-event="true"></text>\n        </text>\n      </view>\n      <text id="app-button" click-state="true"></text>\n    </view>\n    <view id="ad-close-tip">\n      <view id="ad-close-tip-wrap">\n        <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n        <view id="ad-close-tip-text" bubble-event="true">\n          <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n          <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root),Yb=0,Kb=0,Jb=ee.PLATFORM,Xb=ee.IS_IOS,$b=ee.IS_ANDROID,Zb={},Qb=[];At.default.onReady((function(){var e=Object(ea.getInitScreenSize)();if(Yb=e.screenWidth,Kb=e.screenHeight,Object(Lo.isGame)()){var t=n(190).default;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((Zb={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),Zb.touchStartPosY=Math.round(e.changedTouches[0].clientY),Zb.touchEndPosX=0,Zb.touchEndPosY=0,Zb.touchStartTime=+new Date,Zb.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(Zb.touchEndPosX=Math.round(e.changedTouches[0].clientX),Zb.touchEndPosY=Math.round(e.changedTouches[0].clientY),Zb.touchInterval=+new Date-Zb.touchStartTime,Qb.length>=10&&Qb.shift(),Qb.push(Zb))}))}}));var ey=1e3,ty=1,ny=2,ry=3,oy=function(e){var t=this;return fy.call(this).then((function(){var n=Object(Rb.getPrivateThis)(t),r=n.container.layoutBox,o=r.left,i=r.top,a=(r.width,r.height,{slotid:8040321819858439,ScreenHeight:Kb,ScreenWidth:Yb,PageY:i,PageX:o,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},iy=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Rb.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),o=r?0:1;return t&&_y.call(this,e,o),r},ay=function(e){var t=Object(Rb.getPrivateThis)(this),n=t.container.layoutBox,r=n.left,o=n.top,i=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48));var u=0;t.adProxy.isValidCondition("widget_gray_banner_limit_click")&&(u=100*(t.data.condition.widget_gray_banner_limit_click||5)),u>0&&+new Date-t.lastShowTime<u&&(s=!0,t.adProxy.reportAdMonitorData(155));var l=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(l=t.data.condition.widget_gray_bd_limit||10),e&&l>0&&(e.absoluteEndX-r<l||r+i-e.absoluteEndX<l||e.absoluteEndY-o<l||o+a-e.absoluteEndY<l)&&(s=!0,t.adProxy.reportAdMonitorData(47)),s},sy=function(){var e=this,t=Object(Rb.getPrivateThis)(this),n=my.call(this),r=(n.outer,n.inner,n.scale),o=t.data,i=o.crt_size,a=o.use_style_data,s=o.ad_style_data,c=o.dest_type,u=o.product_type;if(a){var l=function(e){var t="",n={container:{hidden:!0,position:"absolute",overflow:"hidden",backgroundColor:e.background_color||"#FFFFFF",width:e.width,height:e.height}},r=[];return t+='<view id="container" click-state="false">',e.widgets.forEach((function(o,i){var a=Bb[o.type];if(a){var s=a(o,i,e),c=s.widgetTmpl,u=s.widgetStyle,l=s.scaleDoms;t+=c,n=Object.assign(n,u),r=r.concat(l)}})),t+='\n  <view id="adFeedback" click-state="true">\n    <text id="adText" value="广告" click-state="true" bubble-event="true"></text>\n    <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n    <image id="rectangle-close" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=afd84f82db2b9f4780501537f3232caf&filekey=3033020101041f301d02016d040253480410afd84f82db2b9f4780501537f3232caf020200ae040d00000004627466730000000131&hy=SH&storeid=32303139303432343136303032353030306231323964313336666664393336663561333230613030303030303664&bizid=1023" click-state="true" bubble-event="true"></image>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <text id="ad-close-btn" click-state="true" value="关闭"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    <view id="ad-close-btn-line-affect"></view>\n    <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line0"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="ad-close-tip">\n    <view id="ad-close-tip-wrap">\n      <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=127e353c0a9bb8ec60aa40e2f94d51df&filekey=3033020101041f301d02016d040253480410127e353c0a9bb8ec60aa40e2f94d51df020204f2040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353431363030306631383661313336666664393337303561333230613030303030303664&bizid=1023"></image>\n      <view id="ad-close-tip-text" bubble-event="true">\n        <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n        <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n      </view>\n    </view>\n  </view>\n',n=Object.assign(n,Vb),{template:t+="</view>",style:n,scaleDoms:r}}(s),d=l.template,f=l.style,p=l.scaleDoms,h=Hb(d).root;Mb.call(this,h,f),t.scaleDoms=p,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.appButton&&([12,19].indexOf(u)>-1?uy.call(this):t.appButton.on("click",(function(n){iy.call(e,n)&&(ay.call(e,n)||(Xb&&46===u&&6===t.data.button_action.jump_type?Promise.race([by.call(e,n),Object(xb.timeout)(500)]).then((function(){wy.call(e,{isButton:!0})})).catch((function(){wy.call(e,{isButton:!0})})):(by.call(e,n),wy.call(e,{isButton:!0}))))}))),t.container.on("click",(function(t){iy.call(e,t)&&(ay.call(e,t)||(Xb&&46===u&&6===c?Promise.race([by.call(e,t),Object(xb.timeout)(500)]).then((function(){wy.call(e)})).catch((function(){wy.call(e)})):(by.call(e,t),wy.call(e))))}))}else if([532,608,567].indexOf(i)>-1){Mb.call(this,zb,Nb);var v=t.data,g=v.image,_=g.src,b=(g.width,g.height,v.watermark_text);t.container.src=_,t.tag.style.hidden=!0,t.tagView.style.hidden=!1,t.tagLabel.value=b,t.tagLabel.style.width=11*t.data.watermark_text.length+6,6===t.adProxy.data.dest_type&&(t.tagMiniapp.style.hidden=!1),12===u&&(t.adProxy.setAppInstallState(!1),dy.call(this)),t.container.on("click",(function(t){iy.call(e,t)&&(ay.call(e,t)||(Xb&&46===u&&6===c?Promise.race([by.call(e,t),Object(xb.timeout)(500)]).then((function(){wy.call(e)})).catch((function(){wy.call(e)})):(by.call(e,t),3===c?wy.call(e,{toOfficalAccountDetail:!0}):wy.call(e))))}))}else if(556==i){if([12,19].indexOf(u)>-1){Mb.call(this,qb,Lb);var y=t.data,m=y.width,w=y.image,O=w.src,S=w.width,I=(w.height,y.appInfo),E=I.appName,C=(I.apkName,I.apkUrl,I.appMd5,I.iconUrl);I.urlScheme,I.versionCode,I.channelId;t.image.style.width=239,t.image.style.height=120,t.image.src=O,t.appIcon.src=C,t.appName.value=Object(xb.truncate)(E,16),t.appName.style.width=m-S,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appIcon.style.borderRadius=4,t.appName.style.scale=r,t.downloadButtonText.style.scale=r,t.downloadProgress.style.scale=r,t.downloadProgressText.style.scale=r,t.downloadButton.style.scale=r,uy.call(this)}else{Mb.call(this,qb,Lb);var T=t.data,k=T.width,A=T.image,P=A.src,D=A.width,j=(A.height,T.app),x=j.icon,R=j.isFollowed,M=j.nickname,N=T.button_action;T.wording;t.image.style.width=239,t.image.style.height=120,t.image.src=P,t.appIcon.src=x,t.appName.value=Object(xb.truncate)(M,16),t.appName.style.width=k-D,t.image.style.scale=r,t.appContainer.style.scale=r,t.appIcon.style.scale=r,t.appName.style.scale=r,t.appButton.style.scale=r,t.appButton.value=23==u&&R?"查看":N.button_text,t.appButton.on("click",(function(t){iy.call(e,t)&&(ay.call(e,t)||(by.call(e,t),Ey.call(e),wy.call(e,{isButton:!0})))}))}t.container.on("click",(function(t){iy.call(e,t)&&(ay.call(e,t)||(Xb&&46===u&&6===c?Promise.race([by.call(e,t),Object(xb.timeout)(500)]).then((function(){wy.call(e)})).catch((function(){wy.call(e)})):(by.call(e,t),wy.call(e))))}))}t.container||t.adProxy.reportAdMonitorData(7)},cy=function(){var e=this,t=Object(Rb.getPrivateThis)(this);try{var n=this.style,r=n.left,o=n.top,i=my.call(this),a=(i.outer,i.inner);i.scale,t.data.type;sy.call(this),t.adFeedback.style.hidden=!1,t.adFeedback.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||vy.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn.on("click",(function(n){if(iy.call(e,n,!1)){t.adProxy.openFeedbackUrl(1002);t.adFeedbackList.style.hidden=!0,vy.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})}})),t.adCloseBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,hy.call(e))})),t.adDislikeBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,hy.call(e,2,"不感兴趣"))})),t.adQualityBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,hy.call(e,2,"不感兴趣",4))})),t.adDuplicateBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,hy.call(e,2,"不感兴趣",5))})),t.adDismatchBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,hy.call(e,2,"不感兴趣",1))})),t.adAffectBtn.on("click",(function(n){iy.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,hy.call(e,3,"影响操作"))})),t.adProxy.isValidCondition("widget_gray_close_v2")?(t.adCloseBtnLineDislike.style.hidden=!1,t.adCloseBtnLineAffect.style.hidden=!1,t.adDislikeBtn.style.hidden=!1,t.adAffectBtn.style.hidden=!1,t.rectangle.style.hidden=!1,t.rectangleClose.style.hidden=!0,t.adCloseBtn.style.hidden=!0,py.call(this)):(t.adFeedbackList.style.height=64,t.adCloseBtnLine.style.hidden=!1,t.adCloseBtn.style.hidden=!1),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=o,t.container.style.width=a.width,t.container.style.height=a.height,t.adCloseTip.style.width=a.width,t.adCloseTip.style.height=a.height,Eb.webviewLayout.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){Object(xb.log)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){oy.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(6,e),Promise.reject({})}},uy=function(){var e=this,t=Object(Rb.getPrivateThis)(this),n=t.data.appInfo,r=n.appName,o=n.apkName,i=n.apkUrl,a=n.appMd5,s=(n.iconUrl,n.urlScheme);n.versionCode,n.channelId;t.downloadButton.style.hidden=!1,t.appButton.style.hidden=!0,Xb?(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadButton.on("click",(function(t){iy.call(e,t)&&(ay.call(e,t)||(by.call(e,t),wy.call(e,{isButton:!0})))}))):$b&&(t.downloadButtonText.value=t.downloadProgressText.value=t.data.button_action.button_text,dy.call(this),t.downloadButton.on("click",(function(n){if(iy.call(e,n)&&!ay.call(e,n)){by.call(e,n);var c=t.adProxy.data,u=c.aid,l=c.traceid,d=c.apurl,f=0,p="";if(t.landingCount++,t.lastLandingTime=+new Date,t.lastJsapiStatus=0,t.lastJsapiCostTime=0,4==t.androidAppState)t.adProxy.launchApplication(s).catch((function(e){})),t.lastJsapiName="launchApplication",t.isLandingPage=!0;else if(0==t.androidAppState){var h=[u,l,o.replace(/./g,"_"),0,20,d.indexOf("ad.wx.com")>-1?1:0].join(".");t.adProxy.addDownloadTaskStraight(r,i,a,h).then((function(n){Ey.call(e),t.androidDownloadId=n.downloadId,setTimeout(ly.bind(e),ey)})).catch((function(t){wy.call(e,{isButton:!0})})),t.lastJsapiName="addDownloadTaskStraight",f=4,p="下载"}else t.androidAppState==ty?(t.adProxy.pauseDownloadTask(t.androidDownloadId).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="继续",t.androidAppState=ny,t.lastJsapiName="pauseDownloadTask",f=5,p="暂停"):t.androidAppState==ny?(t.adProxy.resumeDownloadTask(t.androidDownloadId).then((function(t){setTimeout(ly.bind(e),ey)})).catch((function(e){})),t.downloadButtonText.value=t.downloadProgressText.value="暂停",t.androidAppState=ty,t.lastJsapiName="resumeDownloadTask",f=6,p="继续"):t.androidAppState==ry&&(t.adProxy.installDownloadTask(t.androidDownloadId).catch((function(e){})),t.lastJsapiName="installDownloadTask",f=7,p="安装");f>0&&t.adProxy.reportLandingTime({slotId:8040321819858439,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.lastLandingTime,clickTime:t.lastLandingTime,clkCnt:t.landingCount,jsapiName:t.lastJsapiName,actTypeInt:f,actTypeStr:p})}})))},ly=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,r=Object(Rb.getPrivateThis)(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){"download_succ"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="安装",r.downloadProgress.style.width=r.downloadButton.style.width,r.androidAppState=ry,Iy.call(t)):"downloading"===n.state?(r.downloadButtonText.value=r.downloadProgressText.value="暂停",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress)/100,r.androidAppState=ty):"download_fail"===n.state&&(r.downloadButtonText.value=r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,r.androidAppState=0,Iy.call(t)),"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),ey)})).catch((function(t){n>0&&e(--n)}))},dy=function(){var e=Object(Rb.getPrivateThis)(this),t=e.data.appInfo,n=t.apkName,r=t.versionCode,o=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),e.downloadButtonText&&(e.downloadButtonText.value=e.downloadProgressText.value="已安装",o&&o.trim().length>0&&(e.downloadButtonText.value=e.downloadProgressText.value="进入")),e.tagLabel&&o&&o.trim().length>0&&(e.tagLabel.value="进入应用",e.tagLabel.style.width=50))})).catch((function(e){}))},fy=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Rb.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},py=function(){var e=Object(Rb.getPrivateThis)(this),t=my.call(this),n=(t.inner,t.scale);n=n<.8?.8:n;var r=347/120/(e.adProxy.data.ad_width/e.adProxy.data.ad_height);e.adFeedbackBtn.style.height=e.adDislikeBtn.style.height=e.adAffectBtn.style.height=e.adQualityBtn.style.height=e.adDuplicateBtn.style.height=e.adDismatchBtn.style.height=e.adFeedbackBtn.style.lineHeight=e.adDislikeBtn.style.lineHeight=e.adAffectBtn.style.lineHeight=e.adQualityBtn.style.lineHeight=e.adDuplicateBtn.style.lineHeight=e.adDismatchBtn.style.lineHeight=32*n*r,e.adFeedbackBtn.style.fontSize=e.adDislikeBtn.style.fontSize=e.adAffectBtn.style.fontSize=e.adQualityBtn.style.fontSize=e.adDuplicateBtn.style.fontSize=e.adDismatchBtn.style.fontSize=12*n*r,e.adFeedbackList.style.height=98*n*r,e.adFeedbackMenu.style.height=98*n*r},hy=function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=Object(Rb.getPrivateThis)(this);o.isClosed=!0,o.lastClosedAction="",o.closeAdTime=+new Date,e?(vy.call(this,{secondGradeId:e,secondGradeDesc:t,feedbackReason:r}),(2!==e||r)&&Object(xb.timeout)(2e3).then((function(){n.hide(),o.emitter.emit("close")}))):(vy.call(this,{firstGradeId:0,firstGradeDesc:""}),this.hide(),o.emitter.emit("close"))},vy=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=Object(Rb.getPrivateThis)(this),f=d.container.layoutBox,p=f.left,h=f.top,v=f.width,g=f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:Math.round(v),adHeight:Math.round(g),adPosX:Math.round(p),adPosY:Math.round(h),expTime:d.showedExposureTime,slotId:8040321819858439,firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},gy=function(){Object(xb.log)("开始 update UI");var e=Object(Rb.getPrivateThis)(this),t=this.style,n=t.left,r=t.top,o=my.call(this),i=o.inner,a=o.scale,s=e.data,c=(s.type,s.crt_size),u=s.product_type,l=s.use_style_data;Object(xb.log)(this.style.width,this.style.height),Object(xb.log)("update UI",i),Object.assign(e.container.style,i,{left:n,top:r});var d=[];return l?d=e.scaleDoms:[532,608,567].indexOf(c)>-1?d=[]:556==c&&23==u?d=["image","appContainer","appIcon","appName","appButton"]:556==c&&[12,19].indexOf(u)>-1&&(d=["image","appContainer","appIcon","appName","appButton","downloadButton","downloadButtonText","downloadProgress","downloadProgressText"]),d.forEach((function(t){e[t].style.scale=a})),py.call(this),e.container.nextUpdate().then((function(){return Object(xb.log)("updateUI 完成"),Promise.resolve()}))},_y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(Rb.getPrivateThis)(this);if(!ky.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,o=r.width,i=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:8040321819858439,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},by=function(e){var t=Object(Rb.getPrivateThis)(this);if(!ky.call(this)&&t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,o=n.top,i=n.width,a=n.height,s=Object.keys(Zb).length?{pos_x:Zb.touchStartPosX,pos_y:Zb.touchStartPosY,time:Zb.touchStartTime}:{pos_x:0,pos_y:0,time:0},c=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-o,pressInterval:e.pressInterval,left:r,top:o,width:i,height:a,weappExtraData:{show_time:t.lastShowTime,last_click:s}});return Object(xb.logReport)(c,"banner","点击"),Cy.call(this,{stage:1002}),Qb=Qb.map((function(e){return"["+[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")+"]"})),t.adProxy.reportBannerLastClick({lastClickArr:"["+Qb.join(",")+"]",expMs:t.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:r,top:o,width:i,height:a,lastShowTime:t.lastShowTime}),Qb=[],c}},yy=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Rb.getPrivateThis)(this);if(Object(xb.log)("检查曝光"),ky.call(this))return Object(xb.log)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return Object(xb.log)("还没经过布局, 下一个 loop 再做"),Object(xb.timeout)(0).then((function(){return e.call(t,n)}));var o=r.container.layoutBox,i=o.left,a=o.top,s=o.width,c=o.height;if(a>Kb-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){Object(xb.log)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"showed"});Object(xb.logReport)(l,"banner","原始")}if(a+c/2<=Kb&&!r.isViewableExposureReported&&u){if(!n)return Object(xb.log)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),Object(xb.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(xb.log)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"viewable"});Object(xb.logReport)(d,"banner","可视")}return Promise.resolve()},my=function(){var e=Object(Rb.getPrivateThis)(this),t=e.data,n=t.width,r=t.height,o=(t.type,t.crt_size),i=t.use_style_data;i?(n=n,r=r):532==o?(n=345,r=99):(608==o||567==o||556==o)&&(n=345,r=120);var a=this.style,s=a.width,c=a.height;i?(s=s||345,c=c||r/n*690/2):(s=s||n,c=c||r);var u=Object(xb.contain)({outer:{width:s,height:c},inner:{width:n,height:r},minScale:300/n,maxScale:Yb/n,side:"width"}),l=e.lastRealWidth!==u.inner.width||e.lastRealHeight!==u.inner.height;return this.style.realWidth=e.lastRealWidth=u.inner.width,this.style.realHeight=e.lastRealHeight=u.inner.height,l&&e.emitter.emit("resize",u.inner),u},wy=function(e){var t=this,n=Object(Rb.getPrivateThis)(this);n.landingCount++,n.landingCount>1&&n.adProxy.reportRepeatClick({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.landingCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName}),n.lastLandingTime=+new Date,n.lastJsapiStatus=2,n.lastJsapiCostTime=0,n.isLandingPage=!1,n.landingPageCostTime=0;var r=n.adProxy.land(e);23==n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var r=/ok/.test(e.errMsg);r&&(n.appButton.value="查看",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:9})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var o=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=o-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:8040321819858439,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:o,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.landingCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"}),Iy.call(t)})).catch((function(e){n.lastJsapiStatus=1})),Oy.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?n.isLandingPage=!0:n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1}))},Oy=function(e){var t=Object(Rb.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));Object(xb.logReport)(n,"banner","关注")},Sy=function(e){var t=this;if(!ky.call(this)){var n=Object(Rb.getPrivateThis)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.data=e,fy.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Eb.webviewLayout.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.adProxy.isViewable=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,cy.call(t),fy.call(t)})).then((function(){return ky.call(t)||"hide"===n.lastClosedAction?fy.call(t):n.isHideBYCover?(n.lastDisplayAction="show",fy.call(t)):(n.isShow=!0,Cy.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return yy.call(t)})),Iy.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},Iy=function(){var e=this,t=Object(Rb.getPrivateThis)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return Sy.call(e,!0)}),n)}},Ey=function(){if(!ky.call(this)){var e=Object(Rb.getPrivateThis)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},Cy=function(e){var t={adtype:1,stage:e.stage};Object(Rb.getPrivateThis)(this).adProxy.reportADFunnelModel(t)},Ty=function(){var e=this;if(!ky.call(this)){var t=Object(Rb.getPrivateThis)(this);Object(xb.log)("destroy 调用"),Ey.call(this),this._destroyed=!0,oy.call(this,{type:2}),fy.call(this).then((function(){return t.updateResult})).then((function(){Object(xb.log)("UI update 完成, 正式开始 destroy"),Object(xa._offShow)(t.checkAdState),Fa(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Eb.webviewLayout.remove(t.container),Object(Rb.removePrivateThis)(e)}))}},ky=function(){return this._destroyed},Ay="banner-ad has been destroyed";Rb.Component;function Py(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Dy,jy=function(e){Object(G.default)(n,e);var t=Py(n);function n(){return Object($.default)(this,n),t.apply(this,arguments)}return n}(Cb.default),xy={},Ry=function(e,t,n){xy.hasOwnProperty(e)||(xy[e]={}),xy[e][t]=n},My=function(e,t){if(xy.hasOwnProperty(e))return xy[e][t]},Ny=function(){if(xy.hasOwnProperty("close")){var e=Object.keys(xy.close).map((function(e){return xy.close[e]}));return Math.max.apply(Math,Object(Y.default)(e))}},Ly=function(){if(xy.hasOwnProperty("show")){var e=Object.keys(xy.show).map((function(e){return xy.show[e]}));return Math.max.apply(Math,Object(Y.default)(e))}},By=n(99);!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(Dy||(Dy={}));var Fy="REWARDED_DYNAMIC",Wy=n(67),Uy={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Vy={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Gy=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),Hy=n(70);function zy(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return qy(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qy(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function qy(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Yy={type:"EOF"},Ky=function(){function e(){Object($.default)(this,e),this.token=[],this.tokens=[],this.state=null,this.state=this.start}return Object(K.default)(e,[{key:"isEOF",value:function(e){var t=e;return t&&"object"===Object(x.default)(t)&&"EOF"===t.type}},{key:"start",value:function(e){return this.isEOF(e)?(this.emmitToken("EOF",Yy),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}},{key:"inLogic",value:function(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}},{key:"inNumber",value:function(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}},{key:"inTplFunc",value:function(e){var t=this;return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&function(){for(var e=0,n=0,r=0,o=t.token.length;r<o;r++){var i=t.token[r];"("===i?e+=1:")"===i&&(n+=1)}return e===n}()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}},{key:"inTplStr",value:function(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}},{key:"inCompare",value:function(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}},{key:"inQuoteStr",value:function(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}},{key:"emmitToken",value:function(e,t){this.tokens.push({type:e,value:t})}},{key:"push",value:function(e){this.state&&(this.state=this.state(e))}},{key:"end",value:function(){this.state&&this.state(Yy)}}]),e}(),Jy=function(e){for(var t=new Ky,n=0,r=e.length;n<r;){var o=e[n];n+=1,t.push(o)}return t.end(),t.tokens},Xy=function(e){return"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null},$y=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren)},Zy=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren)},Qy=function(e){var t;t="string"==typeof e?Jy(e):e;for(var n=[Xy({type:"ROOT"})],r=function(e){for(var t=e.priority;$y(n[n.length-1])&&Zy(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){var r=n[n.length-2].children;null==r||r.push(n.pop())}},o=function(e){var t=Xy(e),o=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if($y(o))return;Zy(o)?o.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?$y(o)&&(t.priority>o.priority?function(e,t){var r=t.children.pop();r&&e.children.push(r),n.push(e)}(t,o):(r(t),function(e){var t=n.pop();t&&e.children.push(t),n.push(e)}(t))):"ROOT_END"===t.type&&(r(t),n.push(t))},i=0,a=t.length;i<a;i++)o(t[i]);return n},em=function(e,t){var n=e.split("."),r="";return n.forEach((function(e){""===r?r=t[e]:("string"==typeof r&&(r=JSON.parse(r)),r=r[e])})),r},tm=function(e,t,n){var r=e.indexOf("("),o=e.substring(0,r),i=e.substring(r+1,e.length-1);if(!n[o])return null;for(var a=Jy(i),s=[],c=[],u=0,l=a.length;u<l;u++){var d=a[u];"COMMA"===d.type||"EOF"===d.type?(s.push(c),c=[]):c.push(d)}var f=[];return s.forEach((function(e){f.push(om(e,t,n))})),n[o].apply(null,f)},nm=function e(t,n){var r=t.type,o=t.children,i=t.operator,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(t){return e(o[t],n,a)};if("COMPARE"===r){var c={">":function(){return s(0)>s(1)},"<":function(){return s(0)<s(1)},">=":function(){return s(0)>=s(1)},"<=":function(){return s(0)<=s(1)},"==":function(){return s(0)==s(1)},"!=":function(){return s(0)!=s(1)},"===":function(){return s(0)===s(1)}},u=i&&c[i];return u?u():null}if("LOGIC"===r){var l={"&&":function(){return s(0)&&s(1)},"||":function(){return s(0)||s(1)}},d=i&&l[i];return d?d():null}var f={NUMBER:function(){return Number(o[0])},STR:function(){return o[0]},TPLSTR:function(){return em(o[0],n)},QUESTION:function(){return s(0)?s(1):s(2)},TPLFUNC:function(){return tm(o[0],n,a)}},p=f[r]||null;return p?p():null},rm={"#scope":function(e){return e},"#no":function(e){return!e},"#add":function(e,t){return e+t},"#sub":function(e,t){return e-t},"#multi":function(e,t){return e*t},"#division":function(e,t){return e/t},"#toNumber":function(e){return Number(e)},"#toString":function(e){return String(e)},"#ceil":function(e){return Math.ceil(e)},"#floor":function(e){return Math.floor(e)},"#round":function(e){return Math.round(e)},"#substring":function(e,t,n){return e.substring(t,n)},"#like":function(e,t){return-1!==e.indexOf(t)},"#toLowerCase":function(e){return e.toLowerCase()},"#len":function(e){return e.length},"#parse":function(e){try{return JSON.parse(e)}catch(e){return{}}},"#value":function(e,t){return e[t]||{}},"#truncate":function(e,t){var n,r="",o=0,i=zy(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if((o+=/[\u4e00-\u9fa5]/.test(a)?2:1)>t){r+="...";break}r+=a}}catch(e){i.e(e)}finally{i.f()}return r},"#concat":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")},"#split":function(e,t,n){return null==e?void 0:e.split(t,n)}},om=function(e,t,n){try{var r=Qy(e);return nm(r[1],t,Object.assign({},rm,n))}catch(e){}return null},im=n(7);function am(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return sm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function sm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var um=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},lm={},dm=ee.PLATFORM,fm=function(e){Object(G.default)(n,e);var t=cm(n);function n(e){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.autoRegister,a=void 0===i||i;Object($.default)(this,n),(r=t.call(this,e)).ratio=1,r.tplConfig=null,r.adCustomListener=null,r.clickCallbackMap=new WeakMap,r.handleCommonClick=function(e){r.doActions(r.events.tap,{event:e})},r.handleAdCustomAction=function(e){e.targetid===r.id&&r.doCommonAction(e)},r.adCustomId=e.adCustomId,r.adProxy=e.adProxy,r.adData=e.adData,r.adDatas=e.adDatas,r.manager=e.manager,r.reporter=e.reporter,r.emitter=e.emitter,r.idPrefix=e.idPrefix||"",r.forType=e.forType||im.FOR_TYPES.NONE,r.forItem=e.forItem,r.forIndex=e.forIndex,e.ratio&&(r.ratio=e.ratio),r.checkSize();var s=e.template||{};r.template=s,r.id=r.adCustomId+"-"+r.idPrefix+r.template.id;var c=s.options||{};r.options=c,r.data=c.data||{},r.events=c.events||{},r.lifecycle=c.lifecycle||{},r.innerStyles=c.innerStyles||{},r.animations=c.animations||{},r.bubbleEvent=void 0===c.bubbleEvent||c.bubbleEvent;var u=r.getDataValue("_bubbleEvent");return void 0!==u&&(r.bubbleEvent=u),a&&r.bindCommonEvents(),r}return Object(K.default)(n,[{key:"ready",value:function(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}},{key:"updatedProps",value:function(){this.updateBubbleEvent()}},{key:"destroy",value:function(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}},{key:"bindCommonEvents",value:function(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}},{key:"getCommonSubComponentProps",value:function(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}},{key:"getDataValue",value:function(e,t,n){var r=t||this.data,o=r[e+"Expr"];return o?this.run(o,null==n?void 0:n.args):r[e]}},{key:"getDataValueWithDefault",value:function(e,t,n,r){var o=n?this.getDataValue(e,n,r):this.getDataValue(e);return void 0===o?t:o}},{key:"getAdData",value:function(){return this.forType===im.FOR_TYPES.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}},{key:"getAdDatas",value:function(){return this.adDatas||[]}},{key:"addAdCustomListener",value:function(e){var t=this;this.removeAdCustomListener(),this.adCustomListener=function(n){n.adCustomId===t.adCustomId&&(null==e||e(n))},this.emitter.on("adCustomEvent",this.adCustomListener)}},{key:"removeAdCustomListener",value:function(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}},{key:"setRatio",value:function(e){this.ratio=e}},{key:"checkSize",value:function(){var e,t,n,r,o,i=this.template;if(!i||"root"===i.type){this.tplConfig=(null===(e=i)||void 0===e?void 0:e.tplConfig)||{};var a=this.props.adPosition||{};if(this.tplConfig){var s=this.tplConfig,c=(this.props.adPosition||{}).width;null==c&&(c=(null===(n=null===(t=this.props)||void 0===t?void 0:t.systemInfo)||void 0===n?void 0:n.screenWidth)||Nc.screenWidth),c=Number(c);var u=s.minWidth||0,l=s.maxWidth||0,d=s.baseWidth||375,f=Math.min((null===(o=null===(r=this.props)||void 0===r?void 0:r.systemInfo)||void 0===o?void 0:o.screenWidth)||Nc.screenWidth,Math.max(u,c));l&&(f=Math.min(f,l)),0===f&&this.setRatio(d/d),a.width=f,this.setRatio(f/d)}}}},{key:"emitAdCustomEvent",value:function(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}},{key:"emitComponentEvent",value:function(e,t){var n=this.events[e];(null==n?void 0:n.length)&&this.doActions(n,t||{})}},{key:"emitComponentLifeCycle",value:function(e,t){var n=this.lifecycle[e];(null==n?void 0:n.length)&&this.doActions(n,t)}},{key:"doActions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=am(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;o.force&&!o.targetid?this.doCommonAction({args:n,payload:o}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:o.targetid?this.adCustomId+"-"+o.targetid:this.id,args:n,payload:o})}}catch(e){r.e(e)}finally{r.f()}}},{key:"doCommonAction",value:function(e){var t=this,n=e.payload,r=e.args,o=n.delay,i=void 0===o?0:o,a=n.expr,s=void 0===a?void 0:a,c=function(){var o;if(!s||t.run(s,r))switch(n.action){case im.ACTIONS.SETSTYLE:var i=n.value;if(i.styleExpr)for(var a=0,c=Object.keys(i.styleExpr);a<c.length;a++){var u=c[a];i.style[u]=t.run(i.styleExpr[u],r)}t.setStyle(i.id,i.style);break;case im.ACTIONS.SETEXPRVARS:var l=n.value.key,d=t.getDataValue("value",n.value);t.getExprInnerVars()[l]=d;break;case im.ACTIONS.REPORTIDKEY:break;case im.ACTIONS.TRIGGEREVENT:var f=n.value,p=f.detail,h=void 0===p?{}:p,v=f.eventName;try{if((null==r?void 0:r.event)&&(h.rawDetail=JSON.stringify(r.event)),n.value.detailExpr)for(var g=0,_=Object.keys(n.value.detailExpr);g<_.length;g++){var b=_[g],y=n.value.detailExpr[b];h[b]=t.run(y,r)}}catch(e){}t.emitAdCustomEvent(im.CUSTOM_EVENT.TRIGGEREVENT,{eventName:v,detail:h});break;case im.ACTIONS.REPORTMMDATA:var m=n.value,w=m.data,O=m.dataExpr,S=m.id;if(O)for(var I=0,E=Object.keys(O);I<E.length;I++){var C=E[I],T=O[C];w[C]=t.run(T,r)}t.emitAdCustomEvent(im.CUSTOM_EVENT.REPORTMMDATA,{id:S,data:w});break;case im.ACTIONS.ANIMATE:var k=n.value,A=k.id,P=k.animation;t.doAnimation({id:A,animationName:P});break;case im.ACTIONS.TRIGGERBTNCLICK:var D=null==r?void 0:r.event;D&&t.emitAdCustomEvent(im.CUSTOM_EVENT.BTNTAP,{event:D,isHandleDownload:(null===(o=n.value)||void 0===o?void 0:o.isHandleDownload)||!1});break;case im.ACTIONS.LANDAD:var j=null==r?void 0:r.event;j&&t.emitAdCustomEvent(im.CUSTOM_EVENT.LANDAD,{index:t.getDataValueWithDefault("index",0,n.value,{args:r}),event:j});break;case im.ACTIONS.SPLASHSKIPAD:var x=null==r?void 0:r.event;x&&t.emitAdCustomEvent(im.CUSTOM_EVENT.SPLASHSKIPAD,{event:x});break;case im.ACTIONS.REPORTADMONITORDATA:var R=n.value,M=R.id,N=R.key,L=R.extInfo;t.emitAdCustomEvent(im.CUSTOM_EVENT.REPORTADMONITORDATA,{id:M,key:N,extInfo:L});break;case im.ACTIONS.REWARDEDVIDEODYNAMIC:var B=n.value.list;t.emitAdCustomEvent(im.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC,{list:B});break;default:"doAction"in t&&"function"==typeof t.doAction&&t.doAction(e)}};i?setTimeout(c,i):c()}},{key:"run",value:function(e,t){var n=this.getInnerFunction(),r=Object.assign(Object.assign({},this.getScope()),n);return om(e,t?Object.assign({$args:t},r):r,n)}},{key:"getElementById",value:function(e){var t,r;if(!e){var o=null!==(r=null===(t=this.getRootElement())||void 0===t?void 0:t.parent)&&void 0!==r?r:null;return o===Wy.Layout?this.getRootElement():o}return"$$"===e?this.getRootElement():Object(Je.default)(Object(z.default)(n.prototype),"getElementById",this).call(this,e)}},{key:"doAnimation",value:function(e){var t=e.id,r=e.emitEvent,o=void 0===r||r,i=e.animationName,a=e.animation;return um(this,void 0,void 0,Lt.a.mark((function e(){var r,s,c,u,l,d,f,p,h,v,g,_,b,y,m,w,O,S,I,E;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=!a&&i?this.animations[i]:a,s=this.getElementById(t),r&&s){e.next=4;break}return e.abrupt("return");case 4:if(c=r.keys,u=r.duration,l=r.easing,!(((null==c?void 0:c.length)||0)<2)){e.next=8;break}return e.abrupt("return");case 8:d=0,f=0,p=Object.keys(c);case 10:if(!(f<p.length)){e.next=30;break}if(h=p[f],v=c[+h],g=v.offset,_=v.opacity,b=v.left,y=v.top,m=v.rotate,w=v.scaleX,O=v.scaleY,S=u*g,I=Object(Wy.convertStyle)({opacity:_,left:b,top:y,rotate:m,scaleWidth:w,scaleHeight:O}),!(S<=0)){e.next=21;break}return e.next=19,this.setStyle(t,I);case 19:e.next=27;break;case 21:return(E=Object.assign(Object.assign({},I),{easing:l,duration:S-d})).left=I.left,E.top=I.top,e.next=26,n.animate(s,E);case 26:d=S;case 27:f++,e.next=10;break;case 30:if(!i||!o){e.next=33;break}return e.next=33,this.emitComponentEvent(im.COMMON_EVENT.ANIMATIONEND,{animation:i});case 33:case"end":return e.stop()}}),e,this)})))}},{key:"updateInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];r.expr&&!this.run(r.expr)||this.updateStyle(r.style,n)}}},{key:"setStyle",value:function(e,t){var r,o,i=this,a=Object.create(null,{setStyle:{get:function(){return Object(Je.default)(Object(z.default)(n.prototype),"setStyle",i)}}});return um(this,void 0,void 0,Lt.a.mark((function n(){var i,s,c,u,l;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.getDataValue("_useApx")?this.convertToApxRatio(t):t,"$$"===(s=e)&&(s=null===(r=this.getRootElement())||void 0===r?void 0:r.name),!i){n.next=11;break}for(c=0,u=Object.keys(i);c<u.length;c++)l=u[c],i[l]=this.convertApxStyle(i[l]);if(!s){n.next=10;break}return n.next=8,a.setStyle.call(this,s,i);case 8:n.next=11;break;case 10:null===(o=this.parent)||void 0===o||o.setStyle("container",i);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"convertApxStyle",value:function(e){var t=this;return e&&"string"==typeof e?e.replace(/([+-]?\d+(?:\.\d+)?)apx/g,(function(e,n){return Number(n*t.ratio)+"px"})):e}},{key:"updateStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n],i=o,a=e[o];if(o.includes("Expr")){var s=o.split("Expr");if(2===s.length)i=Object(nt.default)(s,1)[0],a=this.run(a)}this.setStyle(t,Object(q.default)({},i,a))}}},{key:"removeInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],r=this.innerStyles[n];this.removeStyle(r.style,n)}}},{key:"removeStyle",value:function(e,t){if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];this.setStyle(t,Object(q.default)({},o,null))}}},{key:"getScope",value:function(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}},{key:"getExprInnerVars",value:function(){return void 0===lm[this.adCustomId]&&(lm[this.adCustomId]={}),lm[this.adCustomId]}},{key:"getInnerFunction",value:function(){var e=this.getExprInnerVars();return{"#getVar":function(t){return e[t]},"#measureText":function(e,t){return By.default.getTextWidth(e,t)}}}},{key:"updateBubbleEvent",value:function(){var e=this.getRootElement();e&&Object(Wa.traverseElement)(e,(function(e){if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){var t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}},{key:"onClick",value:function(e,t){var r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.handleTriggerClick,a=void 0===i||i,s=o.handleClickLimit,c=void 0===s||s,u=o.isReport,l=void 0!==u&&u,d=o.clickType,f=void 0===d?0:d,p=function(e){null!==r.reporter&&(a&&!r.reporter.judgeTriggerClick(e,l)||c&&r.reporter.isClickLimit(e,f))||t(e)};return this.clickCallbackMap.set(t,p),Object(Je.default)(Object(z.default)(n.prototype),"onClick",this).call(this,e,p)}},{key:"offClick",value:function(e,t){return this.clickCallbackMap.has(t)?Object(Je.default)(Object(z.default)(n.prototype),"offClick",this).call(this,e,this.clickCallbackMap.get(t)):Object(Je.default)(Object(z.default)(n.prototype),"offClick",this).call(this,e,t)}},{key:"checkUseApx",value:function(){if(this.getDataValue("_useApx"))for(var e=0,t=Object.keys(this.style);e<t.length;e++){var n=t[e];this.style[n]=this.convertToApxRatio(this.style[n])}}},{key:"convertToApxRatio",value:function(e){for(var t=this.ratio,n=/(\d+)px/g,r={},o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];if(null===im.scalableStyles||void 0===im.scalableStyles?void 0:im.scalableStyles.includes(a)){var s=e[a],c=s;"number"==typeof s?c=s*t:"string"==typeof s?c=s.replace(n,(function(e,n){var r=Number(n);return Number.isNaN(r)?e:r*t+"px"})):Array.isArray(s)&&(null==s?void 0:s.every((function(e){return"number"==typeof e})))&&(c=s.map((function(e){return e*t}))),r[a]=c}else r[a]=e[a]}return r}}],[{key:"animate",value:function(e,t){var n=t.left,r=t.top,o=t.scaleWidth,i=t.scaleHeight,a=t.opacity,s=t.rotate,c=void 0===s?0:s,u=t.easing,l=void 0===u?"ease-in":u,d=t.duration,f=void 0===d?500:d,p=new Promise((function(t,s){Object(R.invokeMethod)("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:f,finalStyle:{left:n,top:r,opacity:a,rotate:c,scaleX:o,scaleY:i},success:t,fail:s})}));return"devtools"===dm&&(p=Promise.all([p,Object(xb.timeout)(f)])),p}}]),n}(Wy.Component);function pm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var hm=function(e){Object(G.default)(n,e);var t=pm(n);function n(e){var r,o;if(Object($.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},r.isLinearGradient=!1,r.isLinearGradientReverse=!1,r.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",r.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,r.isShow=r.getDataValueWithDefault("_isShow",!0),r.isShow&&("feedback"===r.template.type?r.setStyle("container",{display:"inline-block"}):"end"===r.template.type&&r.setStyle("container",{display:"none"}),r.updateStyle(r.template.style||{},"container"),null===(o=r.template.style)||void 0===o?void 0:o.background)){var i=r.linearGradientRe.exec(r.template.style.background.replace(/ /g,""));if(i){var a=i.slice(1),s=Object(nt.default)(a,2),c=s[0],u=s[1];r.isLinearGradient=!0,Number(c)>Number(u)&&(r.isLinearGradientReverse=!0)}}return r}return Object(K.default)(n,[{key:"getSubComponentProps",value:function(){return this.getCommonSubComponentProps()}},{key:"render",value:function(){var e=this.props.template,t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t="Custom"+e.type[0].toUpperCase()+e.type.slice(1)),this.isShow&&t?'\n      <view id="container">\n        '+(this.isLinearGradient?'\n          <image id="linear-gradient" class="'+(this.isLinearGradientReverse?"reverse":"")+'" src="'+this.linearGradientSrc+'"></image>\n        ':"")+"\n        <"+t+"></"+t+">\n      </view>\n    ":'<view id="blank"></view>')}}]),n}(fm);function vm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}hm.subComponents=function(){return{CustomLayout:bm,CustomText:wm,CustomImage:Sm,CustomButton:Em,CustomVideo:Am,CustomFeedback:Dm,CustomEnd:xm,CustomFor:Mm,CustomCarousel:qm,CustomCountdown:Km}};var gm=function(e){Object(G.default)(n,e);var t=vm(n);function n(e){var r,o,i,a;Object($.default)(this,n),(r=t.call(this,e)).style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},r.state={hidden:!0},r.multiShowList=void 0,r.show=function(){r.setStyle("body",{hidden:!1,opacity:1}),r.emitAdCustomEvent(im.CUSTOM_EVENT.CHECKEXPOSURE)},r.hide=function(){r.setStyle("body",{hidden:!0,opacity:0}),r.emitAdCustomEvent(im.CUSTOM_EVENT.CHECKEXPOSURE)},r.showFeedback=function(){Object(Pe.default)(r).useDefaultFeedback&&(r.setStyle("tipContainer",{hidden:!1}),setTimeout((function(){r.setStyle("tipContainer",{hidden:!0})}),3e3))},r.handleEnterForeground=function(){r.emitComponentEvent(im.ROOT_EVENT.APPENTERFOREGROUND),r.emitAdCustomEvent(im.CUSTOM_EVENT.APPENTERFOREGROUND)},r.handleEnterBackground=function(){r.emitComponentEvent(im.ROOT_EVENT.APPENTERBACKGROUND),r.emitAdCustomEvent(im.CUSTOM_EVENT.APPENTERBACKGROUND)},r.handleContainerClick=function(e){var t,n;(null===(t=r.manager)||void 0===t?void 0:t.isMulti)||(r.emitComponentEvent(im.ROOT_EVENT.CONTAINERTAP),null===(n=r.reporter)||void 0===n||n.handleClick(e,2))},r.isFullScreen=r.getDataValueWithDefault("isFullScreen",!1),r.enableTimer=r.getDataValueWithDefault("enableTimer",!0),r.useDefaultFeedback=r.getDataValueWithDefault("useDefaultFeedback",!0),r.exposureUntilVideoPlay=r.getDataValueWithDefault("exposureUntilVideoPlay",!1),r.hideAfterLanding=r.getDataValueWithDefault("hideAfterLanding",!1),r.exportAid=r.getDataValueWithDefault("exportAid",!1),r.isMulti=null!==(a=null===(i=null===(o=r.template)||void 0===o?void 0:o.tplConfig)||void 0===i?void 0:i.isMulti)&&void 0!==a&&a,r.isWidthRequired=r.getDataValueWithDefault("isWidthRequired",!1),r.multiShowList=r.getDataValue("multiShowList"),r.bindEvent(),r.updateInnerStyle(),r.updateStyle(r.template.style||{},"container");var s=["left","top"];return!Nc.isWaGame&&s.push("fixed"),r.isWidthRequired&&s.push("width"),!r.isFullScreen&&e.adPosition&&r.setStyle("body",Object(Wa.pick)(e.adPosition,s)),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"ready",value:function(e){Object(Je.default)(Object(z.default)(n.prototype),"ready",this).call(this,e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){Object(xa._onShow)(this.handleEnterForeground),Ba(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}},{key:"unbindEvent",value:function(){Object(xa._offShow)(this.handleEnterForeground),Fa(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}},{key:"getRootData",value:function(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}},{key:"doAction",value:function(e){var t,n,r,o=e.payload,i=e.args;o.action===im.ACTIONS.HIDEAD?"value"in o&&o.value.preventClose?null===(t=this.manager)||void 0===t||t.hide(!0):null===(n=this.manager)||void 0===n||n.hide():o.action===im.ACTIONS.RELOADAD?null===(r=this.manager)||void 0===r||r.reload():o.action===im.ACTIONS.CHANGEMULTISHOW&&(o.value.listExpr?this.emitAdCustomEvent(im.CUSTOM_EVENT.CHANGEMULTISHOW,{list:this.run(o.value.listExpr,i)}):o.value.list?this.emitAdCustomEvent(im.CUSTOM_EVENT.CHANGEMULTISHOW,{list:o.value.list}):(null==i?void 0:i.list)&&this.emitAdCustomEvent(im.CUSTOM_EVENT.CHANGEMULTISHOW,{list:i.list}))}},{key:"isShow",value:function(){var e,t=this.getElementById("body");return null!==(e=!(null==t?void 0:t.style.hidden))&&void 0!==e&&e}},{key:"render",value:function(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';var e=this.props.template,t=this.isFullScreen,n=this.useDefaultFeedback;return'\n      <view id="body" class="'+(t?"full-size":"")+'">\n        '+(e?'\n          <view id="container" class="wx-ad-custom '+(t?"full full-size":"")+'">\n            '+e.children.map((function(e,t){return'\n              <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n            '})).join("\n")+"\n          </view>\n          "+(n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':"")+"\n        ":"")+"\n      </view>\n    "}}]),n}(fm);function _m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}gm.subComponents={CustomItem:hm};var bm=function(e){Object(G.default)(n,e);var t=_m(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e)).state={children:[]},r.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},r.classRow=!1,r.classColumn=!1,r.baseType=r.options.baseType||im.LAYOUT_TYPES.COMMON,r.baseType===im.LAYOUT_TYPES.ROW?r.classRow=!0:r.baseType===im.LAYOUT_TYPES.COLUMN?r.classColumn=!0:(r.baseType,im.LAYOUT_TYPES.PROPORTION),r.state.children=r.template.children||[],r.updateInnerStyle(),r}return Object(K.default)(n,[{key:"doAction",value:function(e){var t=e.payload;if(t.action===im.ACTIONS.ADDCHILDREN){var n=t.value,r=Array.isArray(n)?n:[n],o=[].concat(Object(Y.default)(this.state.children),Object(Y.default)(r));this.setState({children:o})}}},{key:"ready",value:function(e){Object(Je.default)(Object(z.default)(n.prototype),"ready",this).call(this,e),this.initProportionComponent()}},{key:"initProportionComponent",value:function(){var e=this.getDataValue("mProportion");if(e){var t=this.getRootElement().layoutBox;if(t.width/t.height>e){var n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{var r=Math.round(t.width/e);this.setStyle("container",{height:r,top:(t.height-r)/2,left:0})}}}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.state.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.state.children,t=["layout"];return this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column"),'\n      <view\n        id="container"\n        class="'+t.join(" ")+'"\n      >\n      '+e.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n      '})).join("\n")+"\n      </view>\n    "}}]),n}(fm);function ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}bm.subComponents=function(){return{CustomItem:hm}};var mm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},wm=function(e){Object(G.default)(n,e);var t=ym(n);function n(e){var r;Object($.default)(this,n),(r=t.call(this,e)).style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},r.state={text:""},r.classEllipsis=!1;var o=r.options.baseType||im.TEXT_TYPES.NICKNAME;return r.baseType=o,o===im.TEXT_TYPES.COMMON?r.initCommonComponent():o===im.TEXT_TYPES.NICKNAME?r.initNickNameComponent():o===im.TEXT_TYPES.DESC&&r.initDescComponent(),r.classEllipsis=r.getDataValueWithDefault("isEllipsis",!0),r.maxLen=r.getDataValueWithDefault("maxLen",null),r.updateInnerStyle(),r}return Object(K.default)(n,[{key:"ready",value:function(e){Object(Je.default)(Object(z.default)(n.prototype),"ready",this).call(this,e),this.baseType===im.TEXT_TYPES.RELATION&&this.initRelationComponent()}},{key:"initCommonComponent",value:function(){this.state.text=this.getDataValueWithDefault("text","")}},{key:"initNickNameComponent",value:function(){var e=this.getAdData(),t=[za.PRODUCT_TYPE.APPLE_APP_STORE,za.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===za.CRT_SIZE.CRT_SIZE_GRID,r=[za.PRODUCT_TYPE.WE_CHAT_ARTICLE,za.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),o=[za.PRODUCT_TYPE.WE_CHAT_SHOP,za.PRODUCT_TYPE.JD_URL].includes(e.product_type),i=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,za.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:r},{value:"电商推广",condition:o},{value:"活动推广"}];this.state.text=Object(Wa.getDataFromPaths)(e,i)}},{key:"initDescComponent",value:function(){var e=this.getAdData(),t=[za.PRODUCT_TYPE.APPLE_APP_STORE,za.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,za.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),r=e.product_type===za.PRODUCT_TYPE.MINI_GAME,o=e.product_type===za.PRODUCT_TYPE.WECHAT,i=[za.PRODUCT_TYPE.WE_CHAT_ARTICLE,za.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),a=[za.PRODUCT_TYPE.WE_CHAT_SHOP,za.PRODUCT_TYPE.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[za.CRT_SIZE.CRT_SIZE_MULTI_POS_NEW_PIC,za.CRT_SIZE.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:i},{value:"今日商品推荐",condition:a},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:o},{value:"今日小游戏推荐",condition:r},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=Object(Wa.getDataFromPaths)(e,s)}},{key:"initRelationComponent",value:function(){var e;return mm(this,void 0,void 0,Lt.a.mark((function t(){var n,r,o,i,a,s,c,u,l;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getAdData(),8===Object(Wa.get)(n,["crtInfo","0","card_info","mp_tag_type"])){t.next=3;break}return t.abrupt("return");case 3:return r=n.aid,o=Date.now(),i=Object(Wa.get)(n,["button_action","button_text"],""),t.prev=6,t.next=9,Ja({aid:r,buttonText:i});case 9:a=t.sent,s=Date.now(),this.adProxy.reportRelationFetchDuration({startTime:o,endTime:s,showTime:(null===(e=this.manager)||void 0===e?void 0:e.showDetailTime)||0}),c="",a&&(u=a.count,l=a.descText,c=this.getDataValueWithDefault("text","",void 0,{args:{count:u,descText:l}}),this.emitComponentEvent(im.TEXT_EVENT.RELATIONFETCHED,{count:u,descText:l})),this.setState({text:c}),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),this.setState({text:""}),this.adProxy.reportAdMonitorData(im.IDKEY.RELATION_FETCH_ERROR,t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,17]])})))}},{key:"doAction",value:function(e){var t=e.payload;t.action===im.ACTIONS.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",t.value)})}},{key:"render",value:function(){var e=this.classEllipsis,t=this.state.text;return this.classEllipsis&&null!==this.maxLen&&t&&(t=Object(Ha.truncate)(t,2*this.maxLen)),'\n      <view id="container">\n        <text\n          id="text"\n          class="text '+(e?"text-ellipsis":"")+'"\n          value="'+t+'"\n        ></text>\n      </view>\n    '}}]),n}(fm);function Om(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Sm=function(e){Object(G.default)(n,e);var t=Om(n);function n(e){var r;Object($.default)(this,n),(r=t.call(this,e)).style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},r.state={imgUrl:""},r.classAppIcon=!1,r.classIcon=!1,r.useBgMode=!1,r.useBgMode=r.getDataValueWithDefault("useBgMode",!1);var o=r.options.baseType||im.IMAGE_TYPES.ICON;switch(r.baseType=o,o){case im.IMAGE_TYPES.COMMON:r.initCommonComponent();break;case im.IMAGE_TYPES.AD:r.initADComponent();break;case im.IMAGE_TYPES.ICON:r.initIconComponent()}return r.useBgMode,r.updateInnerStyle(),r}return Object(K.default)(n,[{key:"initCommonComponent",value:function(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}},{key:"initIconComponent",value:function(){var e=this.getAdData(),t=[za.PRODUCT_TYPE.APPLE_APP_STORE,za.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===za.CRT_SIZE.CRT_SIZE_GRID,r=[za.PRODUCT_TYPE.WE_CHAT_SHOP,za.PRODUCT_TYPE.JD_URL].includes(e.product_type),o=[za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;var i=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:o},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:r},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=Object(Wa.getDataFromPaths)(e,i)}},{key:"initADComponent",value:function(){var e=this.getAdData(),t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}},{key:"doAction",value:function(e){var t=e.payload;t.action===im.ACTIONS.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",t.value)})}},{key:"render",value:function(){var e=this.classAppIcon,t=this.classIcon,n=this.baseType===im.IMAGE_TYPES.AD,r=this.state.imgUrl,o=["image-img"];return e&&o.push("image-img-appicon"),t&&o.push("image-img-icon"),'\n      <view id="container" class="image">\n        <image\n          id="img"\n          '+(n?'bubble-event="false"':"")+'\n          class="'+o.join(" ")+'"\n          src="'+r+'"\n        >\n      </view>\n    '}}]),n}(fm);function Im(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Em=function(e){Object(G.default)(n,e);var t=Im(n);function n(e){var r;Object($.default)(this,n),(r=t.call(this,e)).style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.state={buttonText:""},r.downloadProgress=0,r.isHandleDownload=!1,r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,o=void 0===n?{}:n;t===im.CUSTOM_EVENT.CHANGEADBTNTEXT&&o.text&&(r.setState({buttonText:o.text}),o.progress&&(r.downloadProgress=o.progress))},r.handleButtonClick=function(e){r.emitAdCustomEvent(im.CUSTOM_EVENT.BTNTAP,{event:e,isHandleDownload:r.isHandleDownload}),r.emitComponentEvent(im.BUTTON_EVENT.BUTTONTAP,{event:e})};var o=r.options.baseType||im.BUTTON_TYPES.LOGICCOMMON;return o===im.BUTTON_TYPES.COMMON?r.initCommonComponent():o===im.BUTTON_TYPES.LOGICCOMMON&&r.initLogicCommonComponent(),r.updateInnerStyle(),r.setStyle("downloadProgressBar",{width:r.downloadProgress+"%"}),r.setStyle("downloadTextContainer",{width:1e4/r.downloadProgress+"%"}),r.onClick("container",r.handleButtonClick,{isReport:!0,clickType:1}),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.offClick("container",this.handleButtonClick)}},{key:"getButtonText",value:function(){return this.state.buttonText}},{key:"initCommonComponent",value:function(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}},{key:"initLogicCommonComponent",value:function(){var e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===Ns.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}},{key:"doAction",value:function(e){var t=e.payload;t.action===im.ACTIONS.BUTTONSETTEXT&&this.setText(t.value)}},{key:"setText",value:function(e){this.setState({buttonText:this.getDataValue("text",e)})}},{key:"render",value:function(){var e=this.isHandleDownload,t=this.state.buttonText;return'\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="'+t+'"></text>\n        '+(e?'\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="'+t+'"></text>\n            </view>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(fm),Cm={videoDataMap:{}},Tm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(Cm.videoDataMap[e]=t)};function km(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Am=function(e){Object(G.default)(n,e);var t=km(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e)).style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},r.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},r.src="",r.poster="",r.isShowVoice=!0,r.isShowProgress=!0,r.isShowCountDown=!1,r.isShowEndPage=!1,r.voicePlacement=null,r.countDownPlacement=null,r.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",r.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",r.currentTime=0,r.videoDuration=0,r.objectFit="contain",r.toggleMuted=function(){r.setState({muted:!r.state.muted}),r.emitComponentEvent(im.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})},r.handleCustomEvent=function(e){var t=e.action,n=e.value,o=void 0===n?{}:n;switch(t){case im.CUSTOM_EVENT.ADSHOWHALF:r.state.isEndPageShowing||r.operateVideoPlay("play");break;case im.CUSTOM_EVENT.ADHIDEHALF:r.state.isEndPageShowing||r.operateVideoPlay("pause");break;case im.CUSTOM_EVENT.APPENTERBACKGROUND:var i=Math.min(r.currentTime,r.videoDuration);o.inAdDetail?r.reportVideoPlay("partial","exit",i):r.reportVideoPlay("partial","app_exit",i);break;case im.CUSTOM_EVENT.ENDPAGEINIT:r.isShowEndPage=r.getDataValueWithDefault("isShowEndPage",!1),r.isShowEndPage&&r.setState({loop:!1});break;case im.CUSTOM_EVENT.ENDPAGEHIDE:r.isShowEndPage&&(r.setState({isEndPageShowing:!1}),r.operateVideoPlay("play"));break;case im.CUSTOM_EVENT.ENDPAGESHOW:r.isShowEndPage&&r.setState({isEndPageShowing:!0});break;case im.CUSTOM_EVENT.BTNTAP:r.reportVideoPlay(r.currentTime<r.videoDuration?"partial":"complete","land",r.videoDuration)}},r.handleError=function(e){r.adProxy.reportAdMonitorData(im.IDKEY.AD_VIDEO_LOAD_FAILED,e)},r.handleTimeUpdate=function(e){var t,n=e.duration,o=e.position;if(null!=n&&null!=o){var i=Math.min(1,o/n);r.setStyle("videoProgressPlayed",{width:100*i+"%"}),r.isShowCountDown&&r.setState({countDownNumber:Math.ceil(n-o)+"s"}),r.emitComponentEvent(im.VIDEO_EVENT.VIDEOTIMEUPDATE,{event:e,rate:i}),r.currentTime=1e3*o,r.videoDuration||(r.videoDuration=1e3*n);var a={currentTime:r.currentTime,duration:r.videoDuration},s=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;Tm(s,a)}},r.handleEnded=function(e){var t;r.emitComponentEvent(im.VIDEO_EVENT.VIDEOENDED,{event:e}),r.emitAdCustomEvent(im.CUSTOM_EVENT.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:r.baseType}}),r.reportVideoPlay("viewable","end",r.videoDuration),ee.IS_IOS&&r.reportVideoPlay("partial","start");var n={currentTime:r.videoDuration,duration:r.videoDuration},o=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;Tm(o,n),r.currentTime=0,r.isShowEndPage&&r.emitAdCustomEvent(im.CUSTOM_EVENT.SHOWENDPAGE,{videoId:r.id}),r.setState({countDownNumber:null})},r.handlePlay=function(e){r.emitComponentEvent(im.VIDEO_EVENT.VIDEOPLAY,{event:e}),r.emitAdCustomEvent(im.CUSTOM_EVENT.ADVIDEOPLAY),r.reportVideoPlay("partial","start",Math.min(r.currentTime,r.videoDuration))},r.handlePause=function(e){r.emitComponentEvent(im.VIDEO_EVENT.VIDEOPAUSE,{event:e}),r.emitAdCustomEvent(im.CUSTOM_EVENT.ADVIDEOPAUSE),r.reportVideoPlay("partial","close",Math.min(r.currentTime,r.videoDuration))},r.baseType=r.options.baseType||im.VIDEO_TYPES.AD,r.baseType===im.VIDEO_TYPES.COMMON?r.initCommonComponent():r.baseType===im.VIDEO_TYPES.AD&&r.initADComponent(),r.isShowVoice=r.getDataValueWithDefault("isShowVoice",!0),r.voicePlacement=r.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),r.state.muted=r.getDataValueWithDefault("muted",!0),r.state.loop=r.getDataValueWithDefault("loop",!0),r.isShowProgress=r.getDataValueWithDefault("isShowProgress",!0),r.isShowCountDown=r.getDataValueWithDefault("isShowCountDown",!1),r.countDownPlacement=r.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),r.objectFit=r.getDataValueWithDefault("objectFit","contain"),r.updateInnerStyle(),r.bindEvent(),setTimeout((function(){r.emitComponentEvent(im.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})}),0),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.unbindEvent(),this.removeAdCustomListener()}},{key:"bindEvent",value:function(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}},{key:"unbindEvent",value:function(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}},{key:"initCommonComponent",value:function(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}},{key:"initADComponent",value:function(){var e,t=this.getAdData();this.src=this.getDataValue("src")||Object(Wa.get)(t,["video_info","videoUrl"])||Object(Wa.get)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||Object(Wa.get)(t,["video_info","thumbUrl"])||Object(Wa.get)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=Object(Wa.get)(t,["wx_game_video","short_video","video_duration"])||Object(Wa.get)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;var n={currentTime:0,duration:this.videoDuration},r=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;Tm(r,n),this.emitAdCustomEvent(im.CUSTOM_EVENT.REPORTTIMEPOINT,{key:"p8"})}},{key:"doAction",value:function(e){switch(e.payload.action){case im.ACTIONS.VIDEOTOGGLEMUTED:this.toggleMuted();break;case im.ACTIONS.VIDEOPLAY:this.operateVideoPlay("play");break;case im.ACTIONS.VIDEOPAUSE:this.operateVideoPlay("pause");break;case im.ACTIONS.VIDEOSTOP:this.operateVideoPlay("stop")}}},{key:"operateVideoPlay",value:function(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});var t=this.getElementById("video");(null==t?void 0:t[e])&&t[e]()}}},{key:"reportVideoPlay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.baseType===im.VIDEO_TYPES.AD&&this.emitAdCustomEvent(im.CUSTOM_EVENT.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}},{key:"render",value:function(){var e=this.src,t=this.poster,n=this.isShowVoice,r=this.mutedIconSrc,o=this.voiceIconSrc,i=this.voicePlacement,a=this.countDownPlacement,s=this.isShowProgress,c=this.isShowCountDown,u=this.objectFit,l=this.state,d=l.muted,f=l.loop,p=l.autoplay,h=l.countDownNumber,v=l.isEndPageShowing,g=["video-voice-box"],_=["video-count-down"];return g.push("video-voice-box-"+i),_.push("video-count-down-"+a),'\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="'+e+'"\n          poster="'+t+'"\n          controls="false"\n          muted="'+d+'"\n          loop="'+f+'"\n          autoplay="'+p+'"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="'+u+'"\n        >\n          '+(!v&&n?'\n            <view id="videovoicebox" bubble-event="false" class="'+g.join(" ")+'">\n              <image\n                src="'+(d?r:o)+'"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          ':"")+"\n          "+(s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':"")+"\n          "+(!v&&c&&h?'\n            <text id="video-count-down" class="'+_.join(" ")+'" value="'+h+'"></text>\n          ':"")+"\n        </video>\n      </view>\n    "}}]),n}(fm);function Pm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var Dm=function(e){Object(G.default)(n,e);var t=Pm(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e)).style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},r.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},r.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",r.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",r.dislikeReasonHandlers={},r.handleTagClick=function(e){if(r.baseType===im.FEEDBACK_TYPES.SIMPLE)return r.handleSimpleTagClick(e);var t=r.state,n=t.isShowFeedback,o=t.isShowFeedbackMenu;n||o?r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(r.setState({isShowFeedback:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitAdCustomEvent(im.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),r.emitComponentEvent(im.FEEDBACK_EVENT.TAGTAP,{event:e}))},r.handleDislikeClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitComponentEvent(im.FEEDBACK_EVENT.DISLIKETAP,{event:e})},r.handleFeedbackBtnClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),r.emitComponentEvent(im.FEEDBACK_EVENT.FEEDBACKBTNTAP,{event:e}),r.emitAdCustomEvent(im.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),r.emitAdCustomEvent(im.CUSTOM_EVENT.FEEDBACKBTNTAP)},r.checkUseApx(),r.baseType=r.options.baseType||im.FEEDBACK_TYPES.COMMON,r.bindEvent(),r.updateInnerStyle(),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"bindEvent",value:function(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}},{key:"unbindEvent",value:function(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(var e=0,t=Object.keys(this.dislikeReasonHandlers);e<t.length;e++){var n=t[e],r=this.dislikeReasonHandlers[n];this.offClick(n,r)}}},{key:"updateMenuPosition",value:function(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}},{key:"handleSimpleTagClick",value:function(e){this.emitAdCustomEvent(im.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(im.CUSTOM_EVENT.HIDEAD),this.emitComponentEvent(im.FEEDBACK_EVENT.TAGTAP,{event:e})}},{key:"handleDislikeReasonClick",value:function(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(im.FEEDBACK_EVENT.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(im.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});var n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(im.CUSTOM_EVENT.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(im.CUSTOM_EVENT.HIDEAD)}},{key:"render",value:function(){var e=this.state,t=e.isShowFeedback,n=e.isShowFeedbackMenu,r=e.position,o=["feedback-list"],i=["feedback-list"];r&&(o.push("feedback-list-"+r.toLowerCase()),i.push("feedback-list-"+r.toLowerCase()));var a=this.baseType===im.FEEDBACK_TYPES.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return'\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="'+(this.baseType===im.FEEDBACK_TYPES.SIMPLE?"close-icon":"feedback-icon")+'" src="'+a+'"></image>\n        </view>\n        '+(t?'\n          <view id="menu1" key="menu1" class="'+o.join(" ")+'">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        ':"")+"\n        "+(n?'\n          <view id="menu2" key="menu2" class="'+i.join(" ")+'">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(fm);function jm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var xm=function(e){Object(G.default)(n,e);var t=jm(n);function n(e){var r;Object($.default)(this,n),(r=t.call(this,e)).style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},r.state={isShowEndPage:!1},r.children=[],r.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",r.showTime=0,r.backgroundImage="",r.exposured=!1,r.viewableExposured=!1,r.viewableExposureTimer=null,r.handleAdCustomListener=function(e){switch(e.action){case im.CUSTOM_EVENT.SHOWENDPAGE:r.setState({isShowEndPage:!0}),r.emitAdCustomEvent(im.CUSTOM_EVENT.ENDPAGESHOW),r.showTime=Date.now(),!r.exposured&&r.reportEndPageExposure(),r.exposured=!0,r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)),r.emitComponentEvent(im.ENDPAGE_EVENT.SHOW);break;case im.CUSTOM_EVENT.APPENTERBACKGROUND:r.state.isShowEndPage&&r.reportEndPageDuration();break;case im.CUSTOM_EVENT.APPENTERFOREGROUND:r.state.isShowEndPage&&(r.showTime=Date.now());break;case im.CUSTOM_EVENT.ADSHOWHALF:r.state.isShowEndPage&&(r.showTime=Date.now(),r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)));break;case im.CUSTOM_EVENT.ADHIDEHALF:r.state.isShowEndPage&&(r.reportEndPageDuration(),r.viewableExposureTimer&&(clearTimeout(r.viewableExposureTimer),r.viewableExposureTimer=null))}},r.handleReplay=function(){r.setState({isShowEndPage:!1}),r.emitAdCustomEvent(im.CUSTOM_EVENT.ENDPAGEHIDE),r.emitComponentEvent(im.ENDPAGE_EVENT.HIDE),r.reportEndPage({act_type:1003}),r.emitComponentEvent(im.ENDPAGE_EVENT.REPLAY)},r.handleContainerClick=function(e){var t;r.reportEndPage({act_type:1002}),null===(t=r.reporter)||void 0===t||t.handleClick(e,2)};var o=r.getAdData();return r.cardInfo=Object(Ha.get)(o,["crtInfo",0,"card_info"],{}),r.cardInfo.end_page_type?(r.backgroundImage=r.cardInfo.head_bg_img,r.setStyle("refresh",{padding:"13apx 12apx"}),r.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),r.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),r.children=r.getChildren(),r.bindEvent(),r.updateInnerStyle(),setTimeout((function(){r.emitAdCustomEvent(im.CUSTOM_EVENT.ENDPAGEINIT)}),0),r):Object(H.default)(r)}return Object(K.default)(n,[{key:"updateState",value:function(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}},{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}},{key:"reportEndPageDuration",value:function(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}},{key:"reportEndPageExposure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}},{key:"reportEndPage",value:function(e){this.emitAdCustomEvent(im.CUSTOM_EVENT.REPORTENDPAGE,{data:e})}},{key:"doAction",value:function(e){e.payload.action===im.ACTIONS.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(im.CUSTOM_EVENT.ENDPAGEHIDE),this.emitComponentEvent(im.ENDPAGE_EVENT.HIDE))}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={},o=this.template.id;r.feedBack={type:"feedback",id:o+"_endPageFeedback",style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:im.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:im.ACTIONS.TRIGGEREVENT,value:{eventName:im.ENDPAGE_EVENT.VIDEODISLIKE}}]}}},r.iconBig={type:"image",id:o+"_endPageIconBig",style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},r.nickBig={type:"text",id:o+"_endPageNickBig",style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},r.descSmall={type:"text",id:o+"_endPageDescSmall",style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},r.button={type:"button",id:o+"_endPageButton",style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:im.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},r.iconSmall={type:"image",id:o+"_endPageIconSmall",style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},r.nickSmall={type:"text",id:o+"_endPageNickSmall",style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},r.layoutSmall={type:"layout",id:o+"_endPageLayoutSmall",style:{marginBottom:"16apx"},options:{baseType:2},children:[]},r.layoutSmall.children.push(r.iconSmall),r.layoutSmall.children.push(r.nickSmall),r.descBig={type:"text",id:o+"_endPageDescBig",style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};var i=this.getDataValue("childrenConf");if(i)for(var a=0,s=Object.keys(i);a<s.length;a++){var c=s[a];r[c]&&Object(Ha.mergeDeep)(r[c],i[c])}var u=[];return u=2===this.cardInfo.end_page_type?[r.feedBack,r.layoutSmall,r.descBig,r.button]:[r.feedBack,r.iconBig,r.nickBig,r.descSmall,r.button],3===e?u.concat(this.template.children||[]):u}},{key:"render",value:function(){var e=this.backgroundImage,t=this.children,n=this.refreshIconSrc;return'\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        '+(e?'<image src="'+e+'"></image>':"")+"\n        "+t.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src='+n+"></image>\n        </view>\n      </view>\n    "}}]),n}(fm);function Rm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}xm.subComponents=function(){return{CustomItem:hm}};var Mm=function(e){Object(G.default)(n,e);var t=Rm(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).forType=r.options.baseType||im.FOR_TYPES.COMMON,r.forArr=r.getDataValueWithDefault("forArr",[]),r.forType===im.FOR_TYPES.COMMON?r.forArr=r.getDataValueWithDefault("forArr",[]):r.forType===im.FOR_TYPES.ADS&&(r.forArr=r.getAdDatas()),r}return Object(K.default)(n,[{key:"getSubComponentProps",value:function(e,t,n){var r=this.template,o=this.forArr;return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{idPrefix:this.idPrefix+(r.id||"")+t,forType:this.forType,forItem:o[Number(t)],template:r.children[Number(n)],forIndex:Number(t)})}},{key:"render",value:function(){var e=this.props.template;return"<Fragment>"+this.forArr.map((function(t,n){return e.children.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+n+":"+t+'"></CustomItem>\n      '})).join("\n")})).join("\n")+"</Fragment>"}}]),n}(fm);Mm.subComponents=function(){return{CustomItem:hm}};var Nm=n(74),Lm=1,Bm=function(e,t){Lm=e/t},Fm=/([+-]?\d+(?:\.\d+)?)apx/g,Wm=/([+-]?\d+(?:\.\d+)?)rpx/g,Um=function(e){return(null==e?void 0:e.replace)?e.replace(Wm,(function(e,t){return function(e){if(0===e)return 0;var t=e/750*Nm.deviceInfo.screenWidth;return t<0&&(t=-t),t=Math.floor(t+1e-4),e<0?-t:t}(Number(t))+"px"})):e};function Vm(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Gm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var zm=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},qm=function(e){Object(G.default)(n,e);var t=Hm(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e)).style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},r.isViewable=!1,r.isPlaying=!1,r.animated=!1,r.timerSet=new Set,r.handleMaskClick=function(e){var t,n=null!=r.moveTime?(Date.now()-r.moveTime)/r.duration*r.size:0;t=r.animated?-r.animateCount*r.size+n:-n;var o=(r.isCol?e.relativeY:e.relativeX)-t,i=Math.floor(o/r.size);r.emitComponentEvent(im.CAROUSEL_EVENT.UNITTAP,{index:i,event:e})},r.handleAdCustomEvent=function(e){var t=e.action;[im.CUSTOM_EVENT.ADSHOWHALF].includes(t)?(r.isViewable=!0,r.autoplay()):[im.CUSTOM_EVENT.ADHIDEHALF].includes(t)&&(r.isViewable=!1,r.clearTimers())},r.moveTime=null,r.baseType=r.options.baseType||im.CAROUSEL_TYPES.ROWLOOP,r.showCount=r.getDataValueWithDefault("showCount",0),r.allCount=r.getDataValueWithDefault("allCount",0),r.animateCount=r.allCount-r.showCount,r.size=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:Um(e);return t&&"string"==typeof t?t.replace(Fm,(function(e,t){return Number(t*Lm)+"px"})):t}(r.getDataValueWithDefault("size","0px")).replace("px",""),r.duration=r.getDataValueWithDefault("duration",1500),r.disabled=r.getDataValueWithDefault("disabled",!1),r.allIndexList=Array.from({length:r.allCount}).map((function(e,t){return t})),r.isCol=r.baseType===im.CAROUSEL_TYPES.COLUMNLOOP,r.onClick("mask",r.handleMaskClick),r.baseType===im.CAROUSEL_TYPES.ROWLOOP?r.initCarousel("width"):r.baseType===im.CAROUSEL_TYPES.COLUMNLOOP&&r.initCarousel("height"),r.updateInnerStyle(),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}},{key:"initCarousel",value:function(e){this.setStyle("container",Object(q.default)({},e,this.showCount*this.size)),this.setStyle("list",Object(q.default)({},e,this.allCount*this.size)),this.addAdCustomListener(this.handleAdCustomEvent)}},{key:"clearTimers",value:function(){var e,t=Vm(this.timerSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"autoplay",value:function(){return zm(this,void 0,void 0,Lt.a.mark((function e(){var t,n,r,o,i=this;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isViewable&&!this.isPlaying){e.next=2;break}return e.abrupt("return");case 2:if(t=this.baseType===im.CAROUSEL_TYPES.ROWLOOP?"left":"top",!this.disabled){e.next=8;break}this.emitComponentEvent(im.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList.slice(0,this.showCount)||[]}),this.isPlaying=!1,e.next=29;break;case 8:if(!(this.animateCount<=0)){e.next=13;break}this.emitComponentEvent(im.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList||[]}),this.isPlaying=!1,e.next=29;break;case 13:for(this.isPlaying=!0,n=function(e){var t=i.animated,n=setTimeout((function(){i.timerSet.delete(n);var r=t?i.allIndexList.slice(i.allCount-e-i.showCount,i.allCount-e):i.allIndexList.slice(e,e+i.showCount);i.emitComponentEvent(im.CAROUSEL_EVENT.SHOWCHANGE,{list:r})}),e*i.duration);i.timerSet.add(n)},r=0;r<this.animateCount;r+=1)n(r);return this.moveTime=Date.now(),e.prev=17,e.next=20,this.doAnimation({id:"list",emitEvent:!1,animation:{keys:[Object(q.default)({offset:0},t,this.animated?-1*this.animateCount*this.size:0),Object(q.default)({offset:1},t,this.animated?0:-1*this.animateCount*this.size)],duration:this.duration*this.animateCount,easing:"linear"}});case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:this.animated=!this.animated,this.isPlaying=!1,this.moveTime=null,o=setTimeout((function(){i.timerSet.delete(o),i.autoplay()}),this.duration/4),this.timerSet.add(o);case 29:case"end":return e.stop()}}),e,this,[[17,22]])})))}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.props.template.children,t=this.baseType,n=this.allCount,r=this.showCount;return e&&e.length&&n&&r?'\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="'+["carousel-list",t===im.CAROUSEL_TYPES.ROWLOOP?"carousel-row":"carousel-col"].join(" ")+'">\n          '+e.map((function(e,t){return'\n            <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n          '})).join("\n")+"\n        </view>\n      </view>\n    ":"<view></view>"}}]),n}(fm);function Ym(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}qm.subComponents=function(){return{CustomItem:hm}};var Km=function(e){Object(G.default)(n,e);var t=Ym(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,e)).style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},r.state={countdownValue:""},r.children=[],r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,o=void 0===n?{}:n;if(t===im.CUSTOM_EVENT.CHANGECOUNTDOWN){var i=r.getElementById("countdownvalue"),a=2===o.value.toString().length?18:11;r.setStyle("countdownvalue",{width:a}),i&&(i.value=o.value)}},r.children=r.getChildren(),r.updateInnerStyle(),r.addAdCustomListener(r.handleAdCustomEvent),r}return Object(K.default)(n,[{key:"destroy",value:function(){Object(Je.default)(Object(z.default)(n.prototype),"destroy",this).call(this)}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},r={};r.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:im.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:im.ACTIONS.TRIGGEREVENT,value:{eventName:im.ENDPAGE_EVENT.VIDEODISLIKE}}]},data:{}}};var o=this.getDataValue("childrenConf");if(o)for(var i=0,a=Object.keys(o);i<a.length;i++){var s=a[i];r[s]&&Object(Ha.mergeDeep)(r[s],o[s])}var c=[];return c=[r.feedBack],3===e?c.concat(this.template.children||[]):c}},{key:"render",value:function(){return'\n      <view id="container" class="countdown" bubble-event="false">\n        '+this.children.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    '}}]),n}(fm);Km.subComponents=function(){return{CustomItem:hm}};var Jm=gm;function Xm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function $m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Zm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zm(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Zm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qm="1030436212907001",ew=function(e){return Object(Rb.getPrivateThis)(e)},tw=function(){return xb.logReport.apply(void 0,arguments)},nw=Va()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root,rw="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",ow="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",iw="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",aw=1e3,sw=2e3,cw=500,uw="",lw=0,dw=0,fw=ee.PLATFORM,pw=ee.IS_IOS,hw=ee.IS_ANDROID,vw=!1,gw=!0,_w="portrait",bw=0,yw=0,mw=0,ww=0,Ow=0,Sw=0,Iw={};At.default.onReady((function(){uw=Object(Wa.getInitDeviceOrientation)();var e=Object(ea.getStableSystemInfo)(),t=Object(ea.getInitScreenSize)();Iw=At.default.safeArea||{},uw=uw||e.deviceOrientation||"",lw=t.screenWidth,dw=t.screenHeight;try{At.default.global.window.pageOrientation&&(_w=At.default.global.window.pageOrientation)}catch(e){}if(gw=Object(Lo.isGame)(),pw?vw=!0===At.default.showStatusBar:hw&&(vw=!0===At.default.showStatusBar||"true"===At.default.showStatusBar),gw){var r=n(190).default;r.onTouchStart((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(bw=Math.round(e.changedTouches[0].clientX),yw=Math.round(e.changedTouches[0].clientY),mw=0,ww=0,Sw=0,Ow=+new Date)})),r.onTouchEnd((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(mw=Math.round(e.changedTouches[0].clientX),ww=Math.round(e.changedTouches[0].clientY),Sw=+new Date-Ow)}))}}));var Ew=function(e,t){var n=e.touchendTimeStamp-e.touchstartTimeStamp;if(e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0){var r=t.screenHeight>t.screenWidth?"portrait":"landscape";Object(ta.reportMMData)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:t.screenWidth,screenheight:t.screenHeight,device_orientation:r})}},Cw=function(){var e=ew(this);try{if(pw&&Object(Lo.isApp)()&&e.adProxy.isValidCondition("widget_gray_measure_text")){var t;Object(R.invokeMethod)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&(Object(R.invokeMethod)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{var n=By.default.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=n),!1===e.downloadButton.style.hidden&&(n=By.default.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=n+2,e.downloadButtonText.style.width=n,e.downloadProgressText.style.width=n),e.data.flooringPage&&2===e.pageType&&(n=By.default.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=n)}}catch(t){e.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_BUTTON_WIDTH_ERROR,t)}},Tw="video-ad has been destroyed",kw=function(){var e=ew(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((function(){var t="即将跳转试玩",n={text:t=pw?t+" ":t,fontSize:12},r=Object(Ha.measureText)(n)||72,o=Object(Ha.measureText)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=r,e.playableGiveUp.style.width=o,e.playableTipsWrap.style.width=r+o+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=r+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=o+20,Object(xb.timeout)(300).then((function(){return e.playableTipsWrap.animate({left:0,duration:200})}))}))},Aw=function(e){if(!MO.call(this)){var t=ew(this);if("object"===Object(x.default)(e)&&e.length>0){var n,r=$m(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t[o]&&(t[o].style.width=lw,t[o].style.height=dw)}}catch(e){r.e(e)}finally{r.f()}}}},Pw=function(){if(MO.call(this))return Promise.reject({errMsg:Tw});var e=ew(this);if(!e.data)return!1;var t=e.data,n=t.crt_size,r=t.isGaussBlur,o=t.isExpandStyle;return n===za.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916&&"landscape"===uw&&!r&&!o},Dw=function(){var e=this;if(MO.call(this))return Promise.reject({errMsg:Tw});var t=ew(this);return xw.call(this,"hide").then((function(){gw||(t.adProxy.setPageOrientation(uw),hw&&(t.updateScreenInfoTimer&&(clearTimeout(t.updateScreenInfoTimer),t.updateScreenInfoTimer=null),t.updateScreenInfoTimer=setTimeout((function(){var n=Object(ea.getSystemInfoSync)(),r=!1,o=0;dw===n.screenHeight&&lw===n.screenWidth||(r=!0,o=Pw.call(e)?n.screenWidth-dw:n.screenHeight-dw),lw=n.screenWidth,dw=n.screenHeight,Pw.call(e)&&(lw=n.screenHeight,dw=n.screenWidth,t.container.style.left=(dw-lw)/2,t.container.style.top=(lw-dw)/2),o&&(t.cardContainer.style.top+=o);var i=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];BO.call(e)&&i.push("video"),Aw.call(e,i),r&&BO.call(e)&&(Lw.call(e,!0),zO.call(e),qO.call(e))}),1e3)))}))},jw=function(){if(MO.call(this))return Promise.reject({errMsg:Tw});var e=ew(this);return xw.call(this,"show").then((function(){gw||e.adProxy.setPageOrientation(_w)})).catch((function(t){throw e.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},xw=function(e){var t=ew(this);return WO.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},Rw=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(MO.call(this))return!1;var n=ew(this),r=n.adProxy.isTriggerClick(e),o=r?0:1;return t&&vO.call(this,e,o),r},Mw=function(){var e=this;if(!MO.call(this)){var t=ew(this),n=t.data,r=n.product_type,o=n.button_action,i=n.card,a=i.icon,s=i.name,c=i.wording,u=i.showTime,l=i.headBgImg,d=i.mpTagType,f=n.app,p=n.flooringPage,h=UO.call(this),v=h||!t.expandCardUseLogoStrategy;t.cardShowTime=u,t.appIcon.src=a,t.appName.value=Object(xb.truncate)(s,20),t.appWording.value=c,t.appIcon.style.borderRadius=10,-1===[12,19].indexOf(r)&&("portrait"===uw?t.appIcon.style.borderRadius=27:"landscape"===uw&&(t.appIcon.style.borderRadius=22)),t.button.value=o.button_text,o.button_text||(12===r?t.button.value="下载":19===r&&(t.button.value="查看")),23===r&&t.adProxy.checkFollow(t.data.app.uin).then((function(n){var r=n?"查看公众号":o.button_text||"关注公众号";t.button.value=r,Cw.call(e),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value=r:t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value=r:t.pageType||(t.defaultPageButton.value=r),t.expandCardButton.value=r,dO.call(e,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:r})})).catch((function(){var n=f.isFollowed?"查看公众号":o.button_text||"关注公众号";t.button.value=n,Cw.call(e),dO.call(e,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:n})})),1===t.buttonTextType&&(t.button.value=o.button_text,dO.call(this,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:o.button_text})),Cw.call(this),t.pageType=(null==p?void 0:p.landpage_type)?p.landpage_type:0,eO.call(this),v&&(t.expandCardAppIcon.bubbleEvent=!1),t.expandCardAppIcon.src=a,t.expandCardAppName.value=Object(xb.truncate)(s,20),t.expandCardAppWording.value=c,t.expandCardButton.value=t.button.value;var g=t.expandCardInfoContainer.style;if("portrait"===uw?(g.width=lw,g.justifyContent="flex-start",g.paddingLeft=0,g.paddingTop=48,g.height=400/375*lw,g.bottom=0,g.position="absolute"):(g.justifyContent="center",g.paddingLeft=.672*dw,g.width=g.paddingLeft+300,g.paddingTop=0,g.height=dw,g.bottom=null,g.position=null),!v){var _=By.default.getTextWidth(Object(xb.truncate)(s,20),17);t.expandCardAppIcon.style.left=134-_/2;for(var b=0,y=Object.keys(Vy);b<y.length;b++){var m=y[b],w=Vy[m];t[m]&&Object.assign(t[m].style,w)}}if(p&&1===t.pageType&&"portrait"===uw)t.pageAppIcon.src=a,t.pageAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageAppName.value=Object(xb.truncate)(s,20),t.pageAppWording.value=c,t.pageButton.value=t.button.value,t.imgBaseName="pageImg",t.pageImgContainer.style.width=lw,t.pageImgContainer.style.height=lw,t.pageImgBox.style.width=3*lw,t.pageImgBox.style.height=lw,t.pageImgBox.style.left=0,t.pageInfoContainer.style.width=lw,t.pageInfoContainer.style.height=dw-lw,t.pageInfoContainer.style.top=lw,t.pageImgTips.style.top=lw-20,t.pageImgTips.style.left=lw/2-17.5,pw&&(t.pageImgIcon0.style.borderRadius=4,t.pageImgIcon1.style.borderRadius=4,t.pageImgIcon2.style.borderRadius=4),t.pageImgIcon0.style.backgroundColor="#ffffff",t.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",t.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",Zw.call(this),Lw.call(this);else if(p&&2===t.pageType&&"portrait"===uw)t.pageCardContainer.style.width=lw,t.pageCardAppIcon.src=a,t.pageCardAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageCardAppName.value=Object(xb.truncate)(s,20),t.pageCardAppWording.value=c,t.pageCardButton.value=t.button.value,t.pageCard.style.width=lw,t.pageCardSplitLine.style.width=lw-20,t.pageCardHotArea.style.width=lw,t.pageCardImgContainer.style.width=lw-20,t.pageCardImgBox.style.width=Xw.call(this,{padding:10}),t.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",t.video.style.padding=0,t.video.style.paddingBottom=0,t.imgBaseName="pageCardImg",Zw.call(this),Lw.call(this),t.pageHandler.style.hidden=!1;else if(p&&[3,4].indexOf(t.pageType)>-1){var O="视频结束后可试玩",S={text:O=pw?O+" ":O,fontSize:12},I=Object(Ha.measureText)(S)||100;t.playableTipsContent.style.width=I,t.playableTipsWrap.style.width=I+24,t.cardContainer.style.top-=32}else if(!t.pageType){if(h&&(t.defaultPageAppIcon.bubbleEvent=!1),t.defaultPageAppIcon.src=a,t.defaultPageAppName.value=Object(xb.truncate)(s,20),t.defaultPageAppWording.value=c,t.defaultPageButton.value=t.button.value,!h){var E=By.default.getTextWidth(Object(xb.truncate)(s,20),17);t.defaultPageAppIcon.style.left=134-E/2;for(var C=0,T=Object.keys(Uy);C<T.length;C++){var k=T[C],A=Uy[k];t[k]&&Object.assign(t[k].style,A)}}t.defaultPageBackgroundImage.src=l||"",zO.call(this)}if(8===d){var P=+new Date;Ja({buttonText:t.button.value,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:P,endTime:n,showTime:t.showDetailTime||0}),e){var r="- 最近已有"+e.count+"人"+e.descText+" -";t.pageType?1===t.pageType&&(t.pageAppConversion.value=r,t.pageAppConversion.style.hidden=!1):(t.defaultPageAppConversion.value=r,t.defaultPageAppConversion.style.hidden=!1),t.expandCardAppConversion.value=r,t.expandCardAppConversion.style.hidden=!1}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0})).catch((function(e){t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0,t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_RELATION_FETCH_ERROR,e)}))}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0;t.androidAppState=0,t.button.style.hidden=!1,t.pageButton.style.hidden=!1,t.defaultPageButton.style.hidden=!1,t.expandCardButton.style.hidden=!1,t.downloadButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!0,12===r&&t.adProxy.isValidCondition("widget_gray_video_download_v2")&&(t.button.style.hidden=!0,t.downloadButton.style.hidden=!1,t.downloadButtonText.value=o.button_text,t.downloadProgressText.value=o.button_text,Cw.call(this),1===t.pageType&&(t.pageButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!1,t.pageDownloadButtonText.value=o.button_text,t.pageDownloadProgressText.value=o.button_text))}},Nw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(MO.call(this))return!1;var t=ew(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){var n=e.y,r=t.flooringPageIsShow?t.video.style.height-180:0,o=t.flooringPageIsShow?t.video.style.height:0;return!!(n>r&&n<o)}if("top"===e.direction){var i=e.y,a=0,s=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(i>a&&i<s)}}return!1},Lw=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!MO.call(this)){var t,n=ew(this),r="",o="",i=0,a=0,s=0,c=0,u=(dw-n.video.style.height)/2;1===n.pageType?(n.pageHandler.style.width=lw,n.pageHandler.style.height=lw,r="pageImgBox",a=lw/4,i=3*lw/4-n.pageImgBox.style.width,t={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-lw,-2*lw]}):2===n.pageType&&(n.pageHandler.style.width=lw,n.pageHandler.style.height=n.video.style.height,n.pageHandler.style.top=(dw-n.video.style.height)/2,(dw!==n.video.style.height||e)&&(n.pageMask.style.hidden=!1,n.pageMask.style.width=lw,n.pageMask.style.height=(dw-n.video.style.height)/2,n.pageMask.style.top=(dw+n.video.style.height)/2),r="pageCardImgBox",o="pageCardBody",i=lw-(a=60)-n.pageCardImgBox.style.width,s=n.video.style.height-n.pageCardBody.style.height+10,!gw&&hw&&(s=n.video.style.height-n.pageCardBody.style.height+u+10),c=s+180,n.pageCardBody.style.top=c,t={yRevise:!0,directionMap:{up:s,down:c},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:lw-n.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),n.flooringPageInfos={xMin:i,xMax:a,yMin:s,yMax:c,xContainer:r,yContainer:o,infos:t}}},Bw=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var n=ew(this),r=!0===n.flooringPageIsShow?t.max:t.min;return n.pageCardBody.animate({top:r,duration:50}).then((function(){return oO.call(e,t)})).then((function(){return Uw.call(e)}))}},Fw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var t=ew(this),n=e.event?e.event:{};if(Vw.call(this,n))if(t.flooringPageIsShow){var r=t.pageCard.getAbsolutePosition(),o=r.top,i=r.top+e.cardHeight,a=t.pageCardImgContainer.getAbsolutePosition(),s=a.top;if(n.y>o&&n.y<i){var c=t.pageCardButton.getAbsolutePosition(),u=c.top,l=c.top+e.buttonHeight,d=c.left,f=c.left+e.buttonWidth;n.y>u&&n.y<l&&n.x>d&&n.x<f?Gw.call(this,n,"button",Dy.REWARD_PAGE_BUTTON):Gw.call(this,n,"card",Dy.REWARD_PAGE_CARD)}else n.y>=s&&n.y<=t.video.style.height?Gw.call(this,n,"img",Dy.REWARD_PAGE_IMAGE):Bw.call(this,e)}else{var p=t.pageCard.getAbsolutePosition(),h=p.top,v=p.top+e.cardHeight,g=t.pageCardButton.getAbsolutePosition(),_=g.top,b=g.top+e.buttonHeight,y=g.left,m=g.left+e.buttonWidth;n.y>h&&n.y<v?n.y>_&&n.y<b&&n.x>y&&n.x<m?Gw.call(this,n,"button",Dy.REWARD_PAGE_BUTTON):Gw.call(this,n,"card",Dy.REWARD_PAGE_CARD):Bw.call(this,e)}}},Ww=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var t=ew(this),n=e.imgBox?e.imgBox:"",r=e.xMin?e.xMin:0,o=e.xMax?e.xMax:0,i=e.xHead?e.xHead:0,a=e.xTail?e.xTail:0;return t[n].nextLayout((function(){var e=t[n].style.left,s=e;if(e>i&&e<=o?s=i:e>=r&&e<a&&(s=a),s!==e)return t[n].animate({left:s,duration:50})}))}},Uw=function(){if(!MO.call(this)){var e=ew(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)}},Vw=function(e){if(!MO.call(this)){var t=ew(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)}},Gw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;MO.call(this)||Vw.call(this,e)&&Hw.call(this,e,t,n)},Hw=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(!MO.call(this)){var o=ew(this);if([1,2].includes(o.pageType)&&nO.call(this,e,n),hw&&12===o.data.product_type&&1===o.pageType&&o.adProxy.isValidCondition("widget_gray_video_download_v2"))AO.call(this);else if(pw&&46===o.data.product_type&&6===o.data.dest_type)Promise.race([gO.call(this,e,r),Object(xb.timeout)(500)]).then((function(){bO.call(t,{button:5},e),CO.call(t)})).catch((function(){bO.call(t,{button:5},e),CO.call(t)}));else{gO.call(this,e,r),bO.call(this,{button:5},e);var i={};23===o.data.product_type&&(i["button"===n?"isButton":"toOfficalAccountDetail"]=!0),CO.call(this,i)}}},zw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var t=ew(this),n=e.container?e.container:"",r=e.event?e.event:{},o=t[n].getAbsolutePosition();return{x:o.left+r.x,y:o.top+r.y}}},qw=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!MO.call(this)){var n=ew(this);n.isPress=e,n.startPosX=(null==t?void 0:t.x)?t.x:0,n.startPosY=(null==t?void 0:t.y)?t.y:0,n.lastPosX=(null==t?void 0:t.x)?t.x:0,n.lastPosY=(null==t?void 0:t.y)?t.y:0,n.lastSecondPosX=(null==t?void 0:t.x)?t.x:0,n.lastSecondPosY=(null==t?void 0:t.y)?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]}},Yw=function(){if(!MO.call(this))for(var e=ew(this),t=e.imgBaseName,n=0;n<3;n++){var r=e[t+n].getAbsolutePosition();e["pageImgIcon"+n].style.backgroundColor=0===r.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},Kw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var t=ew(this),n=e.event?e.event:{},r=e.direction?e.direction:"left",o="top"===r?n.y-t.lastPosY:n.x-t.lastPosX;hw&&(o="top"===r?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);var i=e.critical?e.critical:0;return"top"===r?o<0&&Math.abs(o)>=i?"up":"down":o<0&&Math.abs(o)>=i?"right":"left"}},Jw=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(MO.call(this))return Promise.reject({errMsg:Tw});var n=ew(this),r=t.direction?t.direction:"left",o=t.imgBox?t.imgBox:"",i="top"===r?t.event.y:t.event.x,a=Kw.call(this,t),s=t.directionMap?t.directionMap:{},c=t.posQueue?t.posQueue:[],u=null;if(Object.keys(s).length>0)u=s[a]?s[a]:0;else{i=n[o].style[r],c.sort((function(e,t){return e-t}));for(var l=0,d=c.length-1;l<d;){var f=Math.floor((l+d)/2),p=d-l,h=c[f];if(i===h){u=h;break}if(i>h?l=f:d=f,p<=1)break}if(!u)if(t.decideByDirection)u=c[a]||("right"===a?c[l]:c[d]);else{var v=c[d],g=c[l];u=Math.abs(i-v)>=Math.abs(i-g)?g:v}}return Promise.resolve().then((function(){n[o].style[r]=u})).then((function(){if(t.logPagePull)return oO.call(e,t);qw.call(e)})).then((function(){if(t.showTips)return Uw.call(e)})).then((function(){if(t.setImgTips)return n[o].nextLayout((function(){Yw.call(e)}))}))},Xw=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)&&t&&"object"===Object(x.default)(t)){var n=ew(this),r=t.padding?t.padding:0,o=n.pageType,i=n.data.flooringPage.img_list?n.data.flooringPage.img_list:[];i="string"==typeof i?JSON.parse(i):i;var a=0;return i.forEach((function(t,n){var i=$w.call(e,{pageType:o,width:t.width,height:t.height}).width;a+=0===n?i:r+i})),a}},$w=function(e){if(!MO.call(this)){var t={};if(!e||"object"!==Object(x.default)(e))return t;var n=e.pageType,r=e.width,o=e.height;return 1!==n&&n?2===n&&r===o?(t.scale=150/r,t.width=150,t.height=150):2===n&&r!==o&&(t.scale=150/o,t.width=150*r/o,t.height=150):(t.scale=lw/r,t.width=lw,t.height=lw),t}},Zw=function(){var e=this;if(!MO.call(this)){var t=ew(this),n=t.pageType,r=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];r="string"==typeof r?JSON.parse(r):r;var o=t.imgBaseName?t.imgBaseName:"";r.forEach((function(r,i){var a=o+i,s=$w.call(e,{pageType:n,width:r.width,height:r.height}),c=s.width,u=s.height,l=s.scale;t[a].scale=l,t[a].style.width=c,t[a].style.height=u,t[a].src=r.image_url}))}},Qw=function(){var e=this;if(MO.call(this))return Promise.resolve();var t=ew(this);if(!t.data.flooringPage)return Promise.resolve();fO.call(this,im.REWARDEDVIDEO_EVENT.REWARDEDVIDEOSHOWFLOORINGPAGE);var n=t.flooringPageInfos,r=n.yMin,o=n.yMax;return 2!==t.pageType||t.flooringPageIsShow?1===t.pageType?t.pageContainer.animate({left:0,duration:300}).then((function(){return oO.call(e)})):t.pageType?Promise.resolve():(t.cardContainer.animate({opacity:0,duration:280}),t.defaultPageContainer.animate({opacity:1,duration:280}).then((function(){return oO.call(e)}))):t.pageCardBody.animate({top:r,duration:50}).then((function(){return t.flooringPageAutoShow=!0,oO.call(e,{min:r,max:o})})).then((function(){return Uw.call(e)}))},eO=function(){if(!MO.call(this)){var e=ew(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(var t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState["img"+t]={exposure:0,click:0}}}},tO=function(){if(!MO.call(this)){var e=ew(this);if(pw){for(var t=0;t<3;t++)e["pageImg"+t].src=iw,e["pageCardImg"+t].src=iw;e.pageCardImg3.src=iw,e.pageAppIcon.src=iw,e.pageCardAppIcon.src=iw,e.pageCardTipIcon.src=iw}}},nO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!MO.call(this)){var n=ew(this);if("img"===t)for(var r=n.imgBaseName,o=0;o<=3&&(3!==o||2===n.pageType);o++){var i=n[r+o].getAbsolutePosition(),a=n[r+o].style.width,s=n[r+o].style.height,c=i.left,u=i.left+a,l=i.top,d=i.top+s;e.x>=c&&e.x<=u&&e.y>=l&&e.y<=d&&(n.flooringPageState["img"+o].click+=1)}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)}},rO=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!MO.call(this)){var r=ew(this);if(n){if(r.pageType)for(var o=r.imgBaseName,i=0;i<=3&&(3!==i||2===r.pageType);i++){var a=r[o+i].getAbsolutePosition(),s=r[o+i].style.width,c=-s/2,u=lw-s/2;a.left>c&&a.left<u&&(r.flooringPageState["img"+i].exposure+=1)}}else r.exposureTimer&&(clearTimeout(r.exposureTimer),r.exposureTimer=null),r.exposureTimer=setTimeout((function(){return e.call(t,!0)}),1e3)}},oO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var t=ew(this);if(2===t.pageType){var n=e.min?e.min:0,r=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===r&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,iO.call(this,{type:2,staytime:0,componentsstartstr:""}),iO.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,eO.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,iO.call(this,{type:4,staytime:0,componentsstartstr:""}),rO.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,iO.call(this,{type:5,staytime:0,componentsstartstr:""}),iO.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,eO.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,iO.call(this,{type:1,staytime:0,componentsstartstr:""}),rO.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,iO.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,eO.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,iO.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),rO.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,iO.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,eO.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,iO.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),rO.call(this)))}},iO=function(e){if(!MO.call(this)){var t=ew(this);1===t.pageType&&delete e.type;var n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)}},aO=function(){var e=this;if(MO.call(this))return Promise.reject({errMsg:Tw});var t=ew(this);return t.adProxy.fetch().then((function(n){try{t.adProxy.setTimePoint("p4");var r=Object.keys(t.emitter.emitter).includes("_events")?Object.keys(t.emitter.emitter._events):[];return"devtools"!==fw||r.includes("_error")?(t.data=n,t.isData=!0,sO.call(e,{screenWidth:lw,screenHeight:dw,deviceOrientation:uw}),t.adProxy.preloadLanding(),t.emitter.emit("load"),void t.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(e){throw t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_PARSE_ERROR,e),{}}}))},sO=function(e){if(!MO.call(this)){var t=ew(this),n=t.data;if(uw=e.deviceOrientation||(e.screenHeight>e.screenWidth?"portrait":"landscape"),Pw.call(this))lw=e.screenHeight,dw=e.screenWidth,t.container.style.left=(dw-lw)/2,t.container.style.rotate=-90,ee.IS_IOS&&(t.topBar.style.top=Iw.top?44:12,t.topBarFix.style.top=Iw.top?44:12,t.adFeedbackList.style.top=Iw.top?78:46,t.adFeedbackMenu.style.top=Iw.top?78:46);else if(lw=e.screenWidth,dw=e.screenHeight,t.container.style.left=0,t.container.style.rotate=0,ee.IS_IOS){var r="portrait"===uw?Iw.top?44:12:10,o="portrait"===uw?Iw.top?78:46:44;t.topBar.style.top=r,t.topBarFix.style.top=r,t.adFeedbackList.style.top=o,t.adFeedbackMenu.style.top=o}t.container.style.top=dw,t.video.style.padding=8,t.video.style.paddingBottom=16;if(Aw.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),lw<dw)t.cardContainer.style.width=lw-16,t.cardContainer.style.top=dw-130,t.cardContainer.style.left=8,t.topBar.style.left=0,t.topBar.style.width=lw,t.card.style.height=90;else if(lw>=dw){var i=Iw.top||0;t.cardContainer.style.width=348,t.cardContainer.style.top=dw-104,t.cardContainer.style.left=i+18,t.topBar.style.width=lw-2*i-16,t.topBar.style.left=i+8,t.card.style.height=72}if(vw&&(t.topBar.style.top=t.topBar.style.top+30,t.topBarFix.style.top=t.topBarFix.style.top+30,t.adFeedbackList.style.top=t.adFeedbackList.style.top+30,t.adFeedbackMenu.style.top=t.adFeedbackMenu.style.top+30),gw?t.container.style.fixed&&delete t.container.style.fixed:t.container.style.fixed=!0,t.dialog.style.top=dw>138?(dw-138)/2:0,t.dialog.style.left=lw>300?(lw-300)/2:0,t.dialogCloseTip.style.top=(dw-36)/2,t.dialogCloseTip.style.left=(lw-124)/2,FO.call(this))t.cardContainer.style.hidden=!0,t.container.style.backgroundColor="rgba(0, 0, 0, 0)",t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!0,t.video.style.hidden=!0,t.video.src&&(t.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{t.container.style.backgroundColor="#000000";var a=n.video,s=a.src,c=a.poster,u=a.duration,l=n.isExpandStyle,d=n.product_type;t.cardContainer.style.hidden=l,t.expandCardContainer.style.hidden=!l,pw&&t.video.src===s&&t.video.seek(0),pw?(t.video.poster=c,Object(xb.timeout)(500).then((function(){t.video.src=s}))):(t.video.src=s,t.video.poster=c),t.adProxy.setTimePoint("p8"),t.buttonTextType=t.data.button_action.text_type||0,qO.call(this),hw&&(t.preloadVideo=!0,t.preloadVideoSuccess=!1,t.adProxy.preloadVideo([s]).catch((function(e){t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_PRELOAD_ERROR,e)})));var f=t.data.rewardedTime,p=Math.ceil((u>f?f:u)/1e3).toString();t.countDown.value=p,t.countDownFix.value=p,t.countDownAppend.value="秒后可获得奖励",t.countDownAppendFix.value="秒后可获得奖励",t.countDown.style.width=2===p.length?19:12,t.countDownFix.style.width=2===p.length?19:12,t.countDownAppend.style.width=100,t.countDownAppendFix.style.width=100,Mw.call(this),t.adProxy.isValidCondition("widget_gray_close_v2")&&(t.adFeedback.style.hidden=!1,t.close.value="关闭",t.close.style.width=29),12===d&&(t.adProxy.setAppInstallState(!1),kO.call(this));var h=t.adProxy.data.adDynamicList;uO.call(this,{screenWidth:lw,screenHeight:dw,deviceOrientation:e.deviceOrientation},h)}}},cO=null,uO=function(e,t){var n=ew(this);(null==t?void 0:t.length)&&(n.dynamicElems||(n.dynamicElems={}),n.dynamicOldStyle||(n.dynamicOldStyle={}),n.dynamicEmitter||lO.call(this),t.forEach((function(t){var r,o,i,a,s=t.op,c=t.expr;if(!c||om(c,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:Object.assign({},e),time:Date.now()},$scope:{private:n,safeArea:Iw}},{}))if("insert"===s){var u=t.id,l=t.parent,d=t.tpl,f=t.bubbleEvent;if(null===(r=n.dynamicElems)||void 0===r?void 0:r[u]){if(e.screenWidth===cO)return;null===(i=(o=n.dynamicElems[u]).remove)||void 0===i||i.call(o),Object(Wy.unmount)(null===(a=n.dynamicElems[u])||void 0===a?void 0:a.referComponent)}var p=Object(Wy.render)(hm,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:d,systemInfo:Object.assign({},e),scope:{private:n,safeArea:Iw},adData:n.adProxy.data,adDatas:n.adProxy.datas,adCustomId:Fy,isEmpty:!1},!1);!1!==f&&p.updateBubbleEvent(),n.dynamicElems[u]=p.getRootElement(),n[l]&&n[l].add(n.dynamicElems[u])}else if("setStyle"===s){var h=t.id,v=t.style,g=n[h]||n.dynamicElems[h]||null;if(g){var _=!1;n.dynamicOldStyle&&!n.dynamicOldStyle[h]&&(_=!0,n.dynamicOldStyle[h]={});for(var b=0,y=Object.keys(v);b<y.length;b++){var m=y[b];_&&(n.dynamicOldStyle[h][m]=g.style[m]),g.style[m]=v[m]}}}else if("setAttrs"===s){var w=t.id,O=t.attrs,S=n[w]||n.dynamicElems[w]||null;if(S)for(var I=0,E=Object.keys(O);I<E.length;I++){var C=E[I];S[C]=O[C]}}})),cO=e.screenWidth),fO.call(this,im.REWARDEDVIDEO_EVENT.REWARDEDVIDEOHANDLEDYNAMICDONE)},lO=function(){var e=this,t=ew(this);t.dynamicEmitter=new jy,t.dynamicEmitter.on("adCustomEvent",(function(n){var r,o,i=n.action,a=n.adCustomId,s=n.value;if(a===Fy)if(i===im.CUSTOM_EVENT.LANDAD){var c=null===(r=n.value)||void 0===r?void 0:r.event;if(!Rw.call(e,c))return;Hw.call(e,c,"",Dy.REWARD_DYNAMIC_CONTENT)}else if(i===im.CUSTOM_EVENT.BTNTAP){var u=null===(o=n.value)||void 0===o?void 0:o.event;if(!Rw.call(e,u))return;Hw.call(e,u,"button",Dy.REWARD_DYNAMIC_BUTTON)}else if(i===im.CUSTOM_EVENT.REPORTADMONITORDATA){var l=s.id,d=s.key,f=s.extInfo,p=l?{idKeyGroup:l,idKey:d}:d;t.adProxy.reportAdMonitorData(p,f)}else if(i===im.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC){var h=s.list,v=Object(ea.getSystemInfoSync)(),g={screenWidth:v.screenWidth,screenHeight:v.screenHeight,deviceOrientation:v.deviceOrientation};Pw.call(e)&&(g.screenHeight=v.screenWidth,g.screenWidth=v.screenHeight),uO.call(e,g,h)}}))},dO=function(e,t){var n=ew(this);n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:Fy,action:e,value:t})},fO=function(e,t){var n,r=ew(this);if(r.dynamicElems)for(var o=0,i=Object.keys(r.dynamicElems);o<i.length;o++){var a=i[o],s=null===(n=r.dynamicElems[a])||void 0===n?void 0:n.referComponent;s&&s.emitComponentEvent(e,t)}},pO=function(){var e=ew(this);hO.call(this),e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:e.data.video.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},hO=function(){var e=ew(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},vO=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(MO.call(this))return Promise.reject({errMsg:Tw});var r=ew(this),o=2===r.pageType?r.pageCard.layoutBox:r.card.layoutBox,i=o.width,a=o.height;[0,2,3].includes(n)&&(r.clickCount+=1);var s={slotid:Qm,costtype:(null===(t=r.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(i)||0,ad_height:Number(a)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(s)},gO=function(e,t){if(MO.call(this))return Promise.reject({errMsg:Tw});var n=ew(this),r=Promise.resolve(),o={currentTime:n.currentTime,duration:n.data.video.duration},i=n.card,a=e.absoluteX,s=e.absoluteY;2===n.pageType?(i=n.pageCardContainer,a=Math.round(e.x),s=Math.round(e.y)):i=[Dy.REWARD_CARD_BUTTON,Dy.REWARD_CARD].indexOf(t)>-1?n.card:n.container;var c=i.getAbsolutePosition(),u=c.left,l=c.top,d=i.layoutBox,f=d.width,p=d.height;return r=n.adProxy.reportClick({clickAbsoluteLeft:a,clickAbsoluteTop:s,clickRelativeLeft:a-u,clickRelativeTop:s-l,pressInterval:e.pressInterval,left:u,top:l,width:f,height:p,videoData:o}),VO.call(this,t),tw(r,"激励视频","点击广告卡片"),yO.call(this,{stage:1002}),r},_O=function(e){var t=e.playType,n=e.conditionType;if(MO.call(this))return Promise.reject({errMsg:Tw});var r=ew(this);return r.adProxy.reportVideo({playType:t,conditionType:n,playDuration:r.currentTime,videoDuration:r.data.video.duration,muted:r.video.muted,rewardedTime:r.data.rewardedTime,isRewarded:r.isRewarded})},bO=function(e){var t,n,r=e.button,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(MO.call(this))return Promise.reject({errMsg:Tw});var i=ew(this),a=5===r?+new Date:0,s=o?o.pressInterval:0;return i.adProxy.reportBehaviorButton({button:r,isEnded:i.isEnded,playDuration:i.currentTime,videoDuration:null!==(n=null===(t=i.data.video)||void 0===t?void 0:t.duration)&&void 0!==n?n:0,preloadVideo:i.preloadVideo?1:0,preloadVideoSuccess:i.preloadVideoSuccess?1:0,videoFirstPlay:i.videoFirstPlayTime,cardFirstShow:i.cardFirstShowTime,clickCard:a,pressInterval:s,currentPlayUrl:i.video.src,lastFetchUrl:i.data.video?i.data.video.src:""})},yO=function(e){var t=e.stage;if(MO.call(this))return Promise.reject({errMsg:Tw});var n={adtype:2,stage:t};return ew(this).adProxy.reportADFunnelModel(n)},mO=function(e){e?Object(Hy.reportCanvasData)(Hy.ReportCanvasDataEventType.EVENT_CANVAS_ADS_FIN):Object(Hy.reportCanvasData)(Hy.ReportCanvasDataEventType.EVENT_CANVAS_ADS_CANCEL)},wO=function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!MO.call(this)){var o=ew(this);o.adProxy.reportTimePoints({slotid:Qm,costtype:(null===(e=o.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,extInfo:{preloadVideoSuccess:o.preloadVideoSuccess?1:0}});var i=o.isRewarded;o.sound.style.hidden=!1,o.soundFix.style.hidden=!1,o.splitLine.style.hidden=!1,o.splitLineFix.style.hidden=!1,o.landingCount=0,o.clickCount=0,o.isPlaying=!1,o.isVideoCalledPlay=!1,o.isFirstPlaySuccess=!1,o.isShowed=!1,o.isRewarded=!1,o.isEnded=!1,o.isData=!1;try{if(o.dynamicElems)for(var a=0,s=Object.keys(o.dynamicElems);a<s.length;a++){var c=s[a],u=o.dynamicElems[c];(null==u?void 0:u.remove)&&u.remove(),u.referComponent&&Object(Wy.unmount)(u.referComponent)}if(o.dynamicOldStyle)for(var l=0,d=Object.keys(o.dynamicOldStyle);l<d.length;l++)for(var f=d[l],p=o[f]||(null===(t=o.dynamicElems)||void 0===t?void 0:t[f])||null,h=o.dynamicOldStyle[f],v=0,g=Object.keys(h);v<g.length;v++){var _=g[v];p.style[_]=h[_]}o.dynamicElems=null,o.dynamicOldStyle=null,(null===(n=o.dynamicEmitter)||void 0===n?void 0:n.off)&&o.dynamicEmitter.off("adCustomEvent"),o.dynamicEmitter=null}catch(e){}if(o.isCancelPlayablePage=!1,o.isLandingPlayblePage=!1,o.playableTipsContent.value="视频结束后可试玩",o.playableGiveUp.value="放弃",o.playableGiveUp.style.color="#07C160",o.playableGiveUp.style.opacity=1,o.playableTipsWrap.style.width=132,o.playableTipsWrap.style.left=0,o.playableTipsWrap.style.hidden=!0,o.cardContainer.style.hidden=!0,o.playableTipsContent.style.width=120,o.playableGiveUp.style.hidden=!0,o.playableCancelBox.style.hidden=!0,o.cardContainer.style.opacity=1,o.rewardPageCostTime=0,o.isShowedExposureReported=!1,o.isViewableExposureReported=!1,o.adProxy.isViewable=!0,gw||(o.isFullscreen=!1),o.downloadProgress.style.width=0,o.pageDownloadProgress.style.width=0,2!==r&&(!gw&&(pw||o.data&&o.data.crt_size===za.CRT_SIZE.CRT_SIZE_REWARD_LANDINGPAGE)?Object(xb.timeout)(100).then((function(){o.emitter.emit("close",{isEnded:i}),mO(i)})):(o.emitter.emit("close",{isEnded:i}),mO(i))),o.adProxy.reset(),Pw.call(this)){var b=Object(ea.getSystemInfoSync)();if(lw=b.screenWidth,dw=b.screenHeight,o.container.style.top=dw,o.container.style.left=0,o.container.style.rotate=0,ee.IS_IOS){var y=10,m=44;o.topBar.style.top=y,o.topBarFix.style.top=y,o.adFeedbackList.style.top=m,o.adFeedbackMenu.style.top=m}}var w=aO.call(this);w.catch((function(){})),o.adFetchResult=w,o.container.style.hidden=!0,o.adCover.hide(),i?yO.call(this,{stage:1005}):yO.call(this,{stage:1006}),1===o.pageType?o.pageContainer.style.hidden=!0:2===o.pageType?(o.pageHandler.style.hidden=!0,o.pageCardBody.style.hidden=!0,o.pageMask.style.hidden=!0,o.pageCardTip.style.hidden=!0,o.video.style.padding=8,o.video.style.paddingBottom=16):o.pageType||(o.defaultPageContainer.style.hidden=!0),o.pageHandler.style.hidden=!0,oO.call(this,{isClose:!0}),hw&&o.adProxy.setInnerAudioOption(!0).catch((function(){})),o.showTipsTimer&&clearTimeout(o.showTipsTimer),o.exposureTimer&&clearTimeout(o.exposureTimer),o.updateScreenInfoTimer&&clearTimeout(o.updateScreenInfoTimer),o.layoutTimer&&clearTimeout(o.layoutTimer),o.rewardPageTimer&&clearTimeout(o.rewardPageTimer),o.pageType=0,o.imgBaseName="",Ry("show",o.adType,0),Ry("close",o.adType,+new Date)}},OO=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(MO.call(this))return Promise.reject({errMsg:Tw});var n=ew(this);if(FO.call(this)||WO.call(this))return SO.call(this,t);if(_O.call(this,{playType:n.isEnded?"complete":"partial",conditionType:"close"}),1===t)return wO.call(this),Promise.resolve();if([2,3].includes(t))return Promise.all([jw.call(this),wO.call(this,t)]);var r={top:dw,duration:cw};return Pw.call(this)&&(r={top:lw,duration:cw,rotate:-90}),n.container.animate(r).then((function(){return jw.call(e)})).then((function(){return wO.call(e)}))},SO=function(e){if(MO.call(this))return Promise.reject({errMsg:Tw});var t=ew(this);return WO.call(this)||(t.container.style.top=dw,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(wO.call(this),Promise.resolve()):Promise.all([jw.call(this),wO.call(this,e)])},IO=function(){if(!MO.call(this)){var e=ew(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,OO.call(this),bO.call(this,{button:4});else{e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续浏览页面",e.adProxy.setRightButtonHide(!0).catch((function(){}))}}},EO=function(){if(!MO.call(this)){var e=ew(this);if(hO.call(this),e.isRewarded)OO.call(this),bO.call(this,{button:4});else{e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续观看视频",HO.call(this,"pause"),e.isPause=!0}}},CO=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var r=ew(this);r.notReportExit=!0,r.landingCount+=1,r.landingCount>1&&r.adProxy.reportRepeatClick({slotId:Qm,costType:(null===(e=r.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,clkCnt:r.landingCount,lastClkPeriod:+new Date-r.lastLandingTime,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,pageStayTime:r.landingPageCostTime,jsapiName:r.lastJsapiName}),r.lastLandingTime=+new Date,r.lastJsapiStatus=2,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0;var o=r.adProxy.land(n);if(23===r.data.product_type&&n&&n.isButton&&!r.adProxy.data.biz_info.is_subscribed?(o.then((function(e){var n,o=/ok/.test(e.errMsg);o&&(0===r.buttonTextType&&(r.button.value="查看公众号",Cw.call(t),dO.call(t,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"查看公众号"})),r.data.flooringPage&&1===r.pageType&&0===r.buttonTextType?r.pageButton.value="查看公众号":r.data.flooringPage&&2===r.pageType&&0===r.buttonTextType?r.pageCardButton.value="查看公众号":r.pageType||(r.defaultPageButton.value="查看公众号"),r.expandCardButton.value="查看公众号",r.adProxy.data.biz_info&&(r.adProxy.data.biz_info.is_subscribed=1),r.adProxy.reportAdIDKey({key:Bs.IDKEY.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(r.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=+new Date;r.lastJsapiStatus=0,r.lastJsapiCostTime=i-r.lastLandingTime,"private_addContact"===r.lastJsapiName&&r.adProxy.reportLandingTime({slotId:Qm,costType:(null===(n=r.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:r.lastLandingTime,closeTime:i,stayTime:r.lastJsapiCostTime,jsapiName:r.lastJsapiName,clickTime:r.lastLandingTime,clkCnt:r.landingCount,retCode:r.lastJsapiStatus,costTime:r.lastJsapiCostTime,actTypeInt:o?2:3,actTypeStr:o?"关注":"取消"}),gw||!hw||WO.call(t)||setTimeout((function(){r.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),r.container.forceUpdate()}),250)})).catch((function(){r.lastJsapiStatus=1})),TO.call(this,o)):(r.flooringPageCloseTime=(new Date).getTime(),o.then((function(e){e.errMsg&&(r.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===r.lastJsapiName||"navigateToMiniProgram"===r.lastJsapiName||"openADCanvas"===r.lastJsapiName||"launchApplication"===r.lastJsapiName?(r.isLandingPage=!0,hO.call(t),r.flooringPageIsShow&&(iO.call(t,{type:3,staytime:r.flooringPageCloseTime-r.flooringPageShowTime,componentsstartstr:JSON.stringify(r.flooringPageState)}),r.flooringPageShowTime=0,r.flooringPageCloseTime=0,eO.call(t))):r.lastJsapiStatus=0,r.lastJsapiCostTime=+new Date-r.lastLandingTime})).catch((function(){r.lastJsapiStatus=1}))),FO.call(this)||WO.call(this)){setTimeout((function(){r.notReportExit=!1}),1e3);var i=r.adProxy.reportVideo({playType:r.isPlaying?"partial":"complete",conditionType:"land",playDuration:r.currentTime,videoDuration:r.data.video.duration,muted:r.video.muted});tw(i,"激励视频","跳转落地页")}return o}},TO=function(e){if(!MO.call(this)){var t=ew(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve()})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));return tw(n,"激励视频","关注"),n}},kO=function(){var e=this;if(!MO.call(this)){var t=ew(this),n=t.data.appInfo,r=n.apkName,o=n.versionCode,i=n.urlScheme;t.adProxy.getInstallState(r).then((function(n){if(n.isInstalled&&(void 0===n.versionCode||n.versionCode>=o)){if(t.adProxy.setAppInstallState(!0),t.androidAppState=4,t.button&&i&&i.trim().length>0){if(t.button.value="进入应用",t.pageCardButton.value="进入应用",t.pageButton.value="进入应用",t.defaultPageButton.value="进入应用",t.expandCardButton.value="进入应用",dO.call(e,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"进入应用"}),1===t.buttonTextType){var r=t.data.button_action.button_text;t.button.value=r,t.pageCardButton.value=r,t.pageButton.value=r,t.defaultPageButton.value=r,t.expandCardButton.value=r,dO.call(e,im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:r})}Cw.call(e)}if(t.adProxy.isValidCondition("widget_gray_video_download_v2")&&t.downloadButtonText&&i&&i.trim().length>0){if(t.downloadButtonText.value="进入应用",t.downloadProgressText.value="进入应用",1===t.buttonTextType){var a=t.data.button_action.button_text;t.downloadButtonText.value=a,t.downloadProgressText.value=a}if(1===t.pageType&&(t.pageDownloadButtonText.value="进入应用",t.pageDownloadProgressText.value="进入应用",1===t.buttonTextType)){var s=t.data.button_action.button_text;t.pageDownloadButtonText.value=s,t.pageDownloadProgressText.value=s}Cw.call(e)}}else t.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===t.androidAppState&&(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,Cw.call(e),1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text),t.androidAppState=0)})).catch((function(){}))}},AO=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!MO.call(this)){var r=ew(this);gO.call(this,n,Dy.REWARD_DOWNLOAD);var o=r.data.appInfo,i=o.appName,a=o.apkName,s=o.apkUrl,c=o.appMd5,u=o.urlScheme,l=r.adProxy.data,d=l.aid,f=l.traceid,p=l.apurl,h=0,v="";if(r.landingCount+=1,r.lastLandingTime=+new Date,r.lastJsapiStatus=0,r.lastJsapiCostTime=0,4===r.androidAppState)r.adProxy.launchApplication(u).catch((function(){CO.call(t,{isButton:!0})})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(0===r.androidAppState){var g=[d,f,a.replace(/./g,"_"),0,20,p.indexOf("ad.wx.com")>-1?1:0].join(".");r.adProxy.addDownloadTaskStraight(i,s,c,g).then((function(e){r.androidDownloadId=e.downloadId,setTimeout(PO.bind(t),aw)})).catch((function(){CO.call(t,{isButton:!0})})),r.lastJsapiName="addDownloadTaskStraight",h=4,v="下载"}else 1===r.androidAppState?(r.adProxy.pauseDownloadTask(r.androidDownloadId).catch((function(){})),r.downloadButtonText.value="继续下载",r.downloadProgressText.value="继续下载",1===r.pageType&&(r.pageDownloadButtonText.value="继续下载",r.pageDownloadProgressText.value="继续下载"),Cw.call(this),r.androidAppState=2,r.lastJsapiName="pauseDownloadTask",h=5,v="暂停"):2===r.androidAppState?(r.adProxy.resumeDownloadTask(r.androidDownloadId).then((function(){setTimeout(PO.bind(t),aw)})).catch((function(){})),r.downloadButtonText.value="暂停下载",r.downloadProgressText.value="暂停下载",1===r.pageType&&(r.pageDownloadButtonText.value="暂停下载",r.pageDownloadProgressText.value="暂停下载"),Cw.call(this),r.androidAppState=1,r.lastJsapiName="resumeDownloadTask",h=6,v="继续"):3===r.androidAppState&&(r.adProxy.installDownloadTask(r.androidDownloadId).catch((function(){})),r.lastJsapiName="installDownloadTask",h=7,v="安装");h>0&&r.adProxy.reportLandingTime({slotId:Qm,costType:(null===(e=r.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,openTime:r.lastLandingTime,clickTime:r.lastLandingTime,clkCnt:r.landingCount,jsapiName:r.lastJsapiName,actTypeInt:h,actTypeStr:v})}},PO=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(!MO.call(this)){var r=ew(this);r.adProxy.queryDownloadTask(r.androidDownloadId).then((function(n){if("download_succ"===n.state)r.downloadButtonText.value="安装应用",r.downloadProgressText.value="安装应用",r.downloadProgress.style.width=r.downloadButton.style.width,1===r.pageType&&(r.pageDownloadButtonText.value="安装应用",r.pageDownloadProgressText.value="安装应用",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width),r.androidAppState=3,Cw.call(t);else if("downloading"===n.state)r.downloadButtonText.value="暂停下载",r.downloadProgressText.value="暂停下载",r.downloadProgress.style.width=r.downloadButton.style.width*parseInt(n.progress,10)/100,1===r.pageType&&(r.pageDownloadButtonText.value="暂停下载",r.pageDownloadProgressText.value="暂停下载",r.pageDownloadProgress.style.width=r.pageDownloadButton.style.width*parseInt(n.progress,10)/100),r.androidAppState=1,Cw.call(t);else if("download_fail"===n.state){if(r.downloadButtonText.value=r.data.button_action.button_text,r.downloadProgressText.value=r.data.button_action.button_text,r.downloadProgress.style.width=0,1===r.pageType&&(r.pageDownloadButtonText.value=r.data.button_action.button_text,r.pageDownloadProgressText.value=r.data.button_action.button_text,r.pageDownloadProgress.style.width=0,1===r.buttonTextType)){var o=r.data.button_action.button_text;r.pageDownloadButtonText.value=o}r.androidAppState=0,Cw.call(t)}"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),aw)})).catch((function(){n>0&&e.call(t,n-1)}))}},DO=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!MO.call(this)){var d=ew(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:lw,adHeight:dw,adPosX:0,adPosY:0,expTime:d.startExposureTime,firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},jO=function(e){var t=ew(this),n={adWidth:lw,adHeight:dw,adPosX:0,adPosY:0},r={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e)){var o,i=$m(e);try{for(i.s();!(o=i.n()).done;){var a=o.value,s=a.type,c=a.expTime,u=a.isClickAd,l=a.clickAdTimeMs,d=a.feedbackTimeMs;if("good"!==s){var f=r[s]||{};t.adProxy.reportAdFeedbackData(Object.assign(Object.assign(Object.assign({},n),f),{expTime:c||0,isClickAd:u,clickAdTimeMs:l||0,secondGradeTime:d||0}))}}}catch(e){i.e(e)}finally{i.f()}}},xO=function(){var e=ew(this),t=gw?"count":"count_"+e.adProxy.getWebviewInfo().currentWebviewId,n=My(t,e.adType)||0;Ry(t,e.adType,n>0?n-1:0),Object(xa._offShow)(e.onShow),Fa(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Eb.webviewLayout.remove(e.container),Object(Rb.removePrivateThis)(this)},RO=function(){var e=this;if(!MO.call(this)){var t=ew(this),n=Promise.resolve();t.isShowed&&(n=jw.call(this).then((function(){t.adCover.hide(),hw&&t.adProxy.setInnerAudioOption(!0).catch((function(){})),Ry("show",t.adType,0),Ry("close",t.adType,+new Date)}))),n.then((function(){xO.call(e)})).catch((function(){xO.call(e)})),this._destroyed=!0}},MO=function(){return this._destroyed},NO=function(e){var t=ew(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:lw,height:dw});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),tw(n,"激励浏览","原始曝光")},LO=function(){var e=this,t=ew(this);return WO.call(this)||(t.container.style.hidden=!1,t.container.style.top=0,t.adCover.show()),t.container.nextLayout().then((function(){return MO.call(e)?Promise.reject({errMsg:Tw}):(Dw.call(e).then((function(){gw||(t.isFullscreen=!0)})).catch((function(e){t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,e)})),CO.call(e))})).then((function(n){if(WO.call(e)){n?t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARD_CHANNELS_CALLBACK_SUCCESS,n):t.adProxy.reportAdMonitorData(Bs.IDKEY.REWARD_CHANNELS_CALLBACK_FAILED);var r=n||{},o=r.rewardedDuration,i=r.feedbackInfo,a=null!=o&&o>=15;t.isEnded=a,t.isRewarded=a,OO.call(e),bO.call(e,{button:a?4:1}),jO.call(e,i)}})).catch((function(e){throw Ry("show",t.adType,0),e}))},BO=function(){var e;return(null===(e=ew(this).data)||void 0===e?void 0:e.crt_size)!==Ms.CRT_SIZE_REWARD_LANDINGPAGE},FO=function(){var e,t,n=ew(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===Ms.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==Ss.DEST_TYPE_CHANNELS},WO=function(){var e,t,n=ew(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===Ms.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===Ss.DEST_TYPE_CHANNELS},UO=function(){var e=ew(this).data.product_type;return[za.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB,za.PRODUCT_TYPE.APPLE_APP_STORE,za.PRODUCT_TYPE.WECHAT,za.PRODUCT_TYPE.MINI_GAME].includes(e)},VO=function(e){ew(this).adProxy.reportMMClickPos({clickPos:e})},GO=function(){var e=this,t=ew(this),n=t.data;if(n.isGaussBlur){n.video=n.shortVideo,t.data.isGaussBlur=!1;var r=t.data.video,o=r.poster,i=r.src,a=r.width,s=r.height;t.video.poster!==o&&(t.video.poster=o),t.video.src!==i&&(t.video.src=i,setTimeout((function(){t.isVideoCalledPlay&&HO.call(e,"play")}),0));var c=Object(xb.contain)({outer:{width:t.container.style.width,height:t.container.style.height},inner:{width:a,height:s}}).inner;t.video.style.width=lw,t.video.style.height=dw,"portrait"===uw?t.video.style.bottom=1032*lw/960-(dw-c.height)/2:t.video.style.left=-.448*dw}},HO=function(e){var t=ew(this),n=t.video;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},zO=function(){var e=ew(this),t="portrait"===uw||Pw.call(this),n=t?dw:lw,r=t?lw:dw;e.defaultPageBackgroundImage.style.width=n,e.defaultPageBackgroundImage.style.height=n;var o=(n-r)/-2;t?(e.defaultPageBackgroundImage.style.left=o,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=o)},qO=function(){var e=ew(this),t=e.data,n=t.video,r=n.width,o=n.height,i=t.isGaussBlur,a=t.isExpandStyle,s=Object(xb.contain)({outer:{width:e.container.style.width,height:e.container.style.height},inner:{width:r,height:o}}).inner;if(e.video.style.width=lw,e.video.style.height=dw,e.video.style.left=0,e.video.style.bottom=0,i){if("portrait"===uw&&r<o)e.video.style.height=Math.floor(lw/r*o),e.video.style.width=lw;else if("landscape"===uw&&r>o){var c=Math.floor(dw*r/o);e.video.style.width=c,e.video.style.height=dw,e.video.style.left=(lw-c)/2}}else a&&("portrait"===uw?e.video.style.bottom=1032*lw/960-(dw-s.height)/2:e.video.style.left=-.448*dw)},YO=function(e){Object(G.default)(n,e);var t=Xm(n);function n(e){var r,o=e.adUnitId,i=e.multiton,a=void 0!==i&&i,s=e.pluginId,c=void 0===s?"":s;Object($.default)(this,n),r=t.call(this);var u=ew(Object(Pe.default)(r));u.emitter=new jy,u.androidAppState=0,u.androidDownloadId=0,u.adUnitId=o,u.adType="incentive-video",u.adProxy=new Mc({adUnitId:o,adType:"incentive-video",pluginAppid:c}),u.adCover=new jb({adUnitId:o,adType:"incentive-video"}),u.isShowedExposureReported=!1,u.isViewableExposureReported=!1,u.isCardExposureReported=!1,u.dynamicElems=null,u.dynamicOldStyle=null,u.dynamicEmitter=null,u.expandCardUseLogoStrategy=!1,u.rewardPageCostTime=0,u.rewardPageTimer=null,u.showDialogContainer=!1,u.isData=!1,u.isFirstPlay=!1,u.isFirstPlaySuccess=!1,u.isPlaying=!1,u.isVideoCalledPlay=!1,u.isRewarded=!1,u.isEnded=!1,u.isPause=!1,u.currentTime=0,u.cardShowTime=0,u.videoFirstPlayTime=0,u.preloadVideo=!1,u.preloadVideoSuccess=!1,u.cardFirstShowTime=0,u.clickCount=0,u.landingCount=0,u.lastLandingTime=0,u.lastJsapiName="",u.lastJsapiStatus=0,u.lastJsapiCostTime=0,u.isLandingPage=!1,u.landingPageCostTime=0,u.hideTime=0,u.showTime=0,u.startExposureTime=0,u.clickFirstGradeTime=0,u.flooringPageIsShow=!1,u.flooringPageShowTime=0,u.flooringPageCloseTime=0,u.flooringPageState={},u.flooringPageAutoShow=!1,u.showTipsTimer=null,u.exposureTimer=null,u.isCancelPlayablePage=!1,u.isLandingPlayblePage=!1,u.buttonTextType=0,u.isPress=!1,u.startPosX=0,u.startPosY=0,u.lastPosX=0,u.lastPosY=0,u.lastSecondPosX=0,u.lastSecondPosY=0,u.direction="",u.throttleTimer=null,u.timeStamp=0,u.callCount=0,u.distanceList=[],u.startTime=0,u.lastStartTime=0,u.lastMoveTime=0,u.flooringPageInfos={},u.weappTouchEventHandler=null,u.updateScreenInfoTimer=null,u.layoutTimer=null,u.closeEventCount=0,r._destroyed=!1,Mb.call(Object(Pe.default)(r),nw,Gy),u.container.style.width=lw,u.container.style.height=dw,u.container.style.top=dw,u.container.style.hidden=!0,u.topBar.style.width=lw,u.sound.src=ow,u.soundFix.src=ow,u.appIcon.src=iw,tO.call(Object(Pe.default)(r)),pw&&(u.video.obeyMuteSwitch=!0),Eb.webviewLayout.add(u.container),vw&&(u.topBar.style.top=u.topBar.style.top+30,u.topBarFix.style.top=u.topBarFix.style.top+30,u.adFeedbackList.style.top=u.adFeedbackList.style.top+30,u.adFeedbackMenu.style.top=u.adFeedbackMenu.style.top+30);Aw.call(Object(Pe.default)(r),["dialogContainer","dialogMask"]),u.dialog.style.top=dw>138?(dw-138)/2:0,u.dialog.style.left=lw>300?(lw-300)/2:0,gw||(u.container.fullscreen=!0,u.isFullscreen=!1);var l=aO.call(Object(Pe.default)(r));l.catch((function(){})),u.adFetchResult=l,u.isSwitched=!1,gw||Object(Wt.onAppRouteDone)((function(){if(!MO.call(Object(Pe.default)(r))){var e=u.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,o=e.lastWebviewId;if(["navigateTo","switchTab"].includes(t)&&n===o&&(u.isSwitched=!0),["navigateBack","navigateTo"].includes(t)&&n===o&&u.isShowed&&u.isData){var i=u.isFullscreen?3:1;bO.call(Object(Pe.default)(r),{button:6}),OO.call(Object(Pe.default)(r),i)}}})),u.close.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&EO.call(Object(Pe.default)(r))})),u.closeFix.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&EO.call(Object(Pe.default)(r))})),u.dialogClose.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.dialogContainer.style.hidden=!0,OO.call(Object(Pe.default)(r)),bO.call(Object(Pe.default)(r),{button:1}))})),u.dialogCancel.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.dialogContainer.style.hidden=!0,FO.call(Object(Pe.default)(r))?(u.showDialogContainer=!1,CO.call(Object(Pe.default)(r))):(HO.call(Object(Pe.default)(r),"play"),pO.call(Object(Pe.default)(r))),bO.call(Object(Pe.default)(r),{button:2}))})),u.sound.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.video.muted=!u.video.muted,u.sound.src=u.video.muted?ow:rw)})),u.soundFix.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.video.muted=!u.video.muted,u.soundFix.src=u.video.muted?ow:rw)})),u.adFeedback.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.adFeedbackList.style.hidden=!u.adFeedbackMenu.style.hidden||!u.adFeedbackList.style.hidden,u.adFeedbackList.style.hidden||DO.call(Object(Pe.default)(r),{firstGradeId:1,firstGradeDesc:"广告角标"}))})),u.adFeedbackBtn.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.adProxy.openFeedbackUrl(gw?1003:1005),u.adFeedbackList.style.hidden=!0,DO.call(Object(Pe.default)(r),{secondGradeId:1,secondGradeDesc:"投诉"}))})),u.adDislikeBtn.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(DO.call(Object(Pe.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣"}),u.adFeedbackList.style.hidden=!0,u.adFeedbackMenu.style.hidden=!1)})),u.adQualityBtn.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,DO.call(Object(Pe.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),u.dialogCloseTip.style.hidden=!1,Object(xb.timeout)(sw).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.adDuplicateBtn.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,DO.call(Object(Pe.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),u.dialogCloseTip.style.hidden=!1,Object(xb.timeout)(sw).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.adDismatchBtn.on("click",(function(e){Rw.call(Object(Pe.default)(r),e,!1)&&(u.adFeedbackMenu.style.hidden=!0,DO.call(Object(Pe.default)(r),{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),u.dialogCloseTip.style.hidden=!1,Object(xb.timeout)(sw).then((function(){u.dialogCloseTip.style.hidden=!0})))})),u.video.onTimeUpdate((function(e){var t=Number(e.duration),n=Number(e.position);try{if(MO.call(Object(Pe.default)(r))||!u.isShowed)return;if(pO.call(Object(Pe.default)(r)),u.isFirstPlay){var o=0;u.showTime>u.videoFirstPlayTime&&(o=u.showTime-u.videoFirstPlayTime),u.adProxy.setTimePoint("p21",{time:Date.now()-1e3*n}),u.adProxy.reportVideoLoadTime({beginTime:u.videoFirstPlayTime,endTime:(new Date).getTime()-Math.floor(1e3*n),departureTime:o,preloadVideo:u.preloadVideo?1:0,preloadVideoSuccess:u.preloadVideoSuccess?1:0,reportType:1}),u.isFirstPlay=!1,yO.call(Object(Pe.default)(r),{stage:1004})}if(u.isPlaying=!0,n>0&&(u.currentTime=1e3*n),n>=1&&!u.isViewableExposureReported){var i=u.video.style,a=i.width,s=i.height;u.isViewableExposureReported=!0,u.adProxy.isViewable=!0;var c=u.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:a,height:s});tw(c,"激励视频","可视曝光")}Math.ceil(t-n)<=6&&[3,4].indexOf(u.pageType)>-1&&u.playableGiveUp.style.hidden&&kw.call(Object(Pe.default)(r));var l=u.data,d=l.video.duration,f=l.rewardedTime,p=t>f/1e3?f/1e3:t,h=Math.ceil((d>f?f:d)/1e3);if(p>n){var v=Math.ceil(p-n);v>h&&(v=h),u.countDown.value=v.toString(),u.countDownFix.value=v.toString(),u.countDownAppend.value="秒后可获得奖励",u.countDownAppendFix.value="秒后可获得奖励",u.countDown.style.width=2===v.toString().length?19:12,u.countDownFix.style.width=2===v.toString().length?19:12,u.countDownAppend.style.width=100,u.countDownAppendFix.style.width=100}else u.countDown.style.hidden=!0,u.countDownFix.style.hidden=!0,u.sound.style.hidden=!0,u.soundFix.style.hidden=!0,u.splitLine.style.hidden=!0,u.splitLineFix.style.hidden=!0,u.countDownAppend.value="已获得奖励",u.countDownAppendFix.value="已获得奖励",u.countDownAppend.style.width=72,u.countDownAppendFix.style.width=72,u.isRewarded=!0;if((1e3*n>=u.cardShowTime||1e3*n>0)&&u.card.style.hidden){if(u.data.flooringPage&&2===u.pageType&&"portrait"===uw?u.pageCardBody.style.hidden=!1:(u.playableTipsWrap.style.hidden=!(u.data.flooringPage&&[3,4].indexOf(u.pageType)>-1),u.card.style.hidden=!1),u.isCardExposureReported)return;u.card.nextLayout((function(){var e=u.card.getAbsolutePosition(),t=e.left,n=e.top,o=u.card.layoutBox,i=o.width,a=o.height;u.isCardExposureReported=!0;var s=u.adProxy.reportExposure({exposureType:"incentiveVideoCard",left:t,top:n,width:i,height:a});tw(s,"激励视频","卡片曝光"),u.cardFirstShowTime=(new Date).getTime(),u.data.flooringPage&&2===u.pageType&&(u.showTipsTimer=setTimeout((function(){Uw.call(Object(Pe.default)(r))}),3e3))}))}fO.call(Object(Pe.default)(r),im.REWARDEDVIDEO_EVENT.REWARDEDVIDEOTIMEUPDATE,{event:e})}catch(e){u.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_RENDER_ERROR,e)}})),u.video.onEnded((function(){var e,t;if(!MO.call(Object(Pe.default)(r))&&u.isShowed){u.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_END),hO.call(Object(Pe.default)(r)),u.countDown.style.hidden=!0,u.countDownFix.style.hidden=!0,u.sound.style.hidden=!0,u.soundFix.style.hidden=!0,u.splitLine.style.hidden=!0,u.splitLineFix.style.hidden=!0,u.countDownAppend.value="已获得奖励",u.countDownAppendFix.value="已获得奖励",u.countDownAppend.style.width=72,u.countDownAppendFix.style.width=72,u.isRewarded=!0,u.isPlaying=!1,u.isVideoCalledPlay=!1,u.isEnded=!0,u.isPause=!1;var n=u.data.video.duration;u.currentTime=n;var o=null===(t=null===(e=u.data)||void 0===e?void 0:e.card)||void 0===t?void 0:t.headBgImg,i=u.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:u.currentTime,videoDuration:n,muted:u.video.muted});if(u.data.flooringPage&&1===u.pageType&&"portrait"===uw)u.pageContainer.style.width=lw,u.pageContainer.style.height=dw,u.pageContainer.style.left=lw,u.pageContainer.style.hidden=!1,u.pageHandler.style.hidden=!1,u.pageHandler.style.zIndex=1000003,u.topBar.style.zIndex=1000004,u.pageImgTips.style.zIndex=1000004,u.pageContainer.nextLayout((function(){Qw.call(Object(Pe.default)(r))}));else if(u.data.flooringPage&&2===u.pageType&&"portrait"===uw)Qw.call(Object(Pe.default)(r));else if(u.data.flooringPage&&[3,4].indexOf(u.pageType)>-1&&!u.isCancelPlayablePage){var a=u.data.flooringPage.page_url||"";if(!a&&u.data.crtInfo)try{a=u.data.crtInfo.wxgame_video_card.flooring_page.page_url||""}catch(e){}u.adProxy.handleRewardedVideoPlayableLand(a,u.pageType).then((function(){u.isLandingPlayblePage=!0}))}else!u.pageType&&o&&(u.defaultPageContainer.style.hidden=!1,u.defaultPageContainer.style.opacity=0,u.defaultPageContainer.nextLayout((function(){Qw.call(Object(Pe.default)(r))})));tw(i,"激励视频","播放完成")}})),u.video.onError((function(e){var t;u.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_LOAD_ERROR,e),hO.call(Object(Pe.default)(r)),(null===(t=null==u?void 0:u.data)||void 0===t?void 0:t.isGaussBlur)&&GO.call(Object(Pe.default)(r))})),u.playableCancelBox.on("click",(function(e){var t;if(Rw.call(Object(Pe.default)(r),e)&&!u.isCancelPlayablePage){u.isCancelPlayablePage=!0,u.playableGiveUp.value="已放弃",u.playableGiveUp.style.color="#ffffff",u.playableGiveUp.style.opacity=.6;var n=Object(Ha.measureText)({text:"已放弃",fontSize:12})||36;u.playableGiveUp.style.width=n,u.playableTipsWrap.style.width=u.playableTipsContent.style.width+n+32,u.adProxy.reportCancelRewardPlayablePage({costtype:(null===(t=u.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,slotid:Qm,is_reward:1,is_cancel:1})}})),u.pageButton.on("click",(function(e){Rw.call(Object(Pe.default)(r),e)&&Hw.call(Object(Pe.default)(r),e,"button",Dy.REWARD_OLD_ENDPAGE_BUTTON)}));var d=function(e){return function(t){if(Rw.call(Object(Pe.default)(r),t)){var n=UO.call(Object(Pe.default)(r));if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var o=[[Dy.REWARD_ENDPAGE_HEAD_IMG,n&&"logo"===e],[Dy.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[Dy.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[Dy.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED,n&&"button"===e],[Dy.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return Object(nt.default)(e,2)[1]}))[0];Hw.call(Object(Pe.default)(r),t,"button"===e?"button":"",o)}}}},f=function(e){return function(t){if(Rw.call(Object(Pe.default)(r),t)){var n=UO.call(Object(Pe.default)(r))||!u.expandCardUseLogoStrategy;if(!(n&&"wrapper"===e||!n&&["logo","wording"].includes(e))){var o=[[Dy.REWARD_EXPAND_CARD_HEAD_IMG,n&&"logo"===e],[Dy.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED,n&&["wording","wrapper"].includes(e)],[Dy.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED,!n&&["wording","wrapper"].includes(e)],[Dy.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED,n&&"button"===e],[Dy.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED,!n&&"button"===e]].find((function(e){return Object(nt.default)(e,2)[1]}))[0];Hw.call(Object(Pe.default)(r),t,"button"===e?"button":"",o)}}}};if(u.defaultPageButton.on("click",d("button")),u.defaultPageAppIcon.on("click",d("logo")),u.defaultPageAppName.on("click",d("wording")),u.defaultPageAppWording.on("click",d("wording")),u.defaultPageWordingWrapper.on("click",d("wrapper")),u.expandCardButton.on("click",f("button")),u.expandCardAppIcon.on("click",f("logo")),u.expandCardAppName.on("click",f("wording")),u.expandCardAppWording.on("click",f("wording")),u.expandCardWordingWrapper.on("click",f("wrapper")),u.pageDownloadButton.on("click",(function(e){Rw.call(Object(Pe.default)(r),e)&&AO.call(Object(Pe.default)(r),e)})),u.button.on("click",(function(e){Rw.call(Object(Pe.default)(r),e)&&(pw&&46===u.data.product_type&&6===u.data.dest_type?Promise.race([gO.call(Object(Pe.default)(r),e,Dy.REWARD_CARD_BUTTON),Object(xb.timeout)(500)]).then((function(){bO.call(Object(Pe.default)(r),{button:5},e),CO.call(Object(Pe.default)(r))})).catch((function(){bO.call(Object(Pe.default)(r),{button:5},e),CO.call(Object(Pe.default)(r))})):(gO.call(Object(Pe.default)(r),e,Dy.REWARD_CARD_BUTTON),bO.call(Object(Pe.default)(r),{button:5},e),23===u.data.product_type?CO.call(Object(Pe.default)(r),{isButton:!0}):CO.call(Object(Pe.default)(r))))})),u.downloadButton.on("click",(function(e){Rw.call(Object(Pe.default)(r),e)&&AO.call(Object(Pe.default)(r),e)})),u.card.on("click",(function(e){Rw.call(Object(Pe.default)(r),e)&&(pw&&46===u.data.product_type&&6===u.data.dest_type?Promise.race([gO.call(Object(Pe.default)(r),e,Dy.REWARD_CARD),Object(xb.timeout)(500)]).then((function(){bO.call(Object(Pe.default)(r),{button:5},e),CO.call(Object(Pe.default)(r))})).catch((function(){bO.call(Object(Pe.default)(r),{button:5},e),CO.call(Object(Pe.default)(r))})):(gO.call(Object(Pe.default)(r),e,Dy.REWARD_CARD),bO.call(Object(Pe.default)(r),{button:5},e),23===u.data.product_type?CO.call(Object(Pe.default)(r),{toOfficalAccountDetail:!0}):CO.call(Object(Pe.default)(r))))})),u.pageHandler.on("touchstart",(function(e){if(!MO.call(Object(Pe.default)(r))){var t=zw.call(Object(Pe.default)(r),{event:e,container:"pageHandler"});u.startPosX=t.x,u.startPosY=t.y,u.lastPosX=t.x,u.lastPosY=t.y,u.lastStartTime=(new Date).getTime()}})),u.pageHandler.on("touchmove",(function(e){if(!MO.call(Object(Pe.default)(r))){var t=u.pageHandler.getAbsolutePosition(),n=t.left+e[0].x,o=t.top+e[0].y,i=u.flooringPageInfos,a=i.xMin,s=i.xMax,c=i.yMin,l=i.yMax,d=i.xContainer,f=i.yContainer;if(n-u.lastPosX!=0&&d&&Nw.call(Object(Pe.default)(r),{x:n,y:o,direction:"left"})){var p=u[d].style.left;(p+=n-u.lastPosX)>=a&&p<=s&&(u[d].style.left=p,u.lastSecondPosX=u.lastPosX,u.lastPosX=n,u.direction="left",u.lastMoveTime=(new Date).getTime())}if(o-u.lastPosY!=0&&f&&Nw.call(Object(Pe.default)(r),{x:n,y:o,direction:"top"})){var h=u[f].style.top;(h+=o-u.lastPosY)>=c&&h<=l&&(u[f].style.top=h,u.lastSecondPosY=u.lastPosY,u.lastPosY=o,u.direction="top")}}})),u.pageHandler.on("touchend",(function(e){if(!MO.call(Object(Pe.default)(r))){var t=zw.call(Object(Pe.default)(r),{event:e,container:"pageHandler"}),n=u.flooringPageInfos,o=n.xMin,i=n.xMax,a=n.yMin,s=n.yMax,c=n.xContainer,l=n.yContainer,d=n.infos;if(d.event=t,d.event&&(d.event.pressInterval=(new Date).getTime()-u.lastStartTime),d.touchClick&&Fw.call(Object(Pe.default)(r),Object.assign({},d,{event:t,max:s,min:a})),"top"===u.direction&&d.yRevise)Jw.call(Object(Pe.default)(r),Object.assign({},d,{max:s,min:a,direction:"top",imgBox:l}));else if("left"===u.direction&&d.xRevise)Jw.call(Object(Pe.default)(r),Object.assign({},d,{max:i,min:o,direction:"left",imgBox:c})),rO.call(Object(Pe.default)(r));else if("left"===u.direction&&d.xInertia){var f=t.x-u.lastPosX,p=u[c].style.left+5*f;p>=d.xHead&&p<=d.xTail?u[c].style.left=p:Ww.call(Object(Pe.default)(r),Object.assign({},d,{xMax:i,xMin:o,imgBox:c})),rO.call(Object(Pe.default)(r))}else u.startPosX=0,u.startPosY=0,u.lastPosX=0,u.lastPosY=0,u.lastSecondPosX=0,u.lastSecondPosY=0,u.direction="";u.direction=""}})),u.onShow=function(){if(!MO.call(Object(Pe.default)(r))&&(u.adProxy.setTimePoint("p11"),[3,4].indexOf(u.pageType)>-1&&u.isLandingPlayblePage&&OO.call(Object(Pe.default)(r)),!WO.call(Object(Pe.default)(r)))){if(FO.call(Object(Pe.default)(r))&&u.isShowed&&!u.showDialogContainer)return u.rewardPageTimer&&clearTimeout(u.rewardPageTimer),u.rewardPageCostTime+=+new Date-u.hideTime-400,IO.call(Object(Pe.default)(r)),setTimeout((function(){u.lastJsapiStatus=0,u.isLandingPage=!1}),10),void(gw||!hw||WO.call(Object(Pe.default)(r))||(u.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),u.layoutTimer=setTimeout((function(){u.container.forceUpdate()}),250)));!u.isShowed||u.isEnded||u.isPause||setTimeout((function(){!u.isShowed||u.isEnded||u.isPause||(HO.call(Object(Pe.default)(r),"play"),pO.call(Object(Pe.default)(r)))}),1e3),u.data&&23===u.data.product_type?u.adProxy.checkFollow(u.data.app.uin).then((function(e){var t=u.data.button_action.button_text;0===u.buttonTextType&&(u.button.value=e?"查看公众号":t,Cw.call(Object(Pe.default)(r)),dO.call(Object(Pe.default)(r),im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:e?"查看公众号":t})),u.data.flooringPage&&2===u.pageType&&0===u.buttonTextType?u.pageCardButton.value=e?"查看公众号":t:u.data.flooringPage&&1===u.pageType&&0===u.buttonTextType?u.pageButton.value=e?"查看公众号":t:u.pageType||(u.defaultPageButton.value=e?"查看公众号":t),u.expandCardButton.value=e?"查看公众号":t,u.adProxy.data.biz_info&&(u.adProxy.data.biz_info.is_subscribed=e?1:0)})):u.data&&12===u.data.product_type&&kO.call(Object(Pe.default)(r)),u.showTime=+new Date,setTimeout((function(){var e;u.flooringPageIsShow&&(u.flooringPageShowTime=+new Date,rO.call(Object(Pe.default)(r))),u.isLandingPage&&(u.lastJsapiStatus=0,u.isLandingPage=!1,u.landingPageCostTime=u.showTime-u.hideTime,u.adProxy.reportLandingTime({slotId:Qm,costType:(null===(e=u.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,openTime:u.hideTime,closeTime:u.showTime,stayTime:u.landingPageCostTime,jsapiName:u.lastJsapiName,clickTime:u.lastLandingTime,clkCnt:u.landingCount,retCode:u.lastJsapiStatus,costTime:u.lastJsapiCostTime,actTypeInt:1}),gw||!hw||WO.call(Object(Pe.default)(r))||(u.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),u.layoutTimer=setTimeout((function(){u.container.forceUpdate()}),250)),u.adProxy.setRightButtonHide(!0).catch((function(){})))}),10)}},Object(xa._onShow)(u.onShow),u.onHide=function(){if(!MO.call(Object(Pe.default)(r))){if(u.hideTime=+new Date,FO.call(Object(Pe.default)(r))&&u.isShowed){var e=u.adProxy.checkCanvasXmlState();return!e&&!u.isShowedExposureReported&&NO.call(Object(Pe.default)(r),"showed"),!e&&!u.isViewableExposureReported&&NO.call(Object(Pe.default)(r),"viewable")}if(!u.notReportExit&&u.isShowed){hO.call(Object(Pe.default)(r));var t=u.adProxy.reportVideo({playType:u.isPlaying?"partial":"complete",conditionType:"exit",playDuration:u.currentTime,videoDuration:u.data.video.duration,muted:u.video.muted});tw(t,"激励视频","退出小游戏"),u.flooringPageIsShow&&(u.flooringPageCloseTime=(new Date).getTime(),iO.call(Object(Pe.default)(r),{type:6,staytime:u.flooringPageCloseTime-u.flooringPageShowTime,componentsstartstr:JSON.stringify(u.flooringPageState)}),u.flooringPageShowTime=0,u.flooringPageCloseTime=0,eO.call(Object(Pe.default)(r)))}}},Ba(u.onHide),Object(R.onMethod)("onVideoResourceLoad",(function(e){!u.isShowed&&u.video&&u.video.src===e.resource&&(u.preloadVideoSuccess=!0,u.video.src=e.resource,u.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_PRELOAD_SUCCESS))})),!0===a){var p=gw?"count":"count_"+u.adProxy.getWebviewInfo().currentWebviewId,h=(My(p,u.adType)||0)+1;Ry(p,u.adType,h),h>=5&&(console.warn("系统检测到您创建的激励视频广告实例过多，由于您当前使用的是多例模式，为避免影响"+(gw?"小游戏":"小程序")+"性能，请减少实例创建数量或调用destroy方法销毁无用的实例"),5===h&&u.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_INSTANCE_BROKEN))}return r}return Object(K.default)(n,[{key:"load",value:function(){if(MO.call(this))return Promise.reject({errMsg:Tw});var e=ew(this);if(e.isShowed)return Promise.reject({errMsg:"can't invoke load() while video-ad is showed"});if(e.isData)return Promise.resolve();var t=aO.call(this);return e.adFetchResult=t.catch((function(t){var n=-12001===t.errCode?{errMsg:"RewardedVideoAd fail no permission"}:t;throw e.emitter.emit("_error",n),n})),e.adFetchResult}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(MO.call(this))return Promise.reject({errMsg:Tw});var o=ew(this);if(o.isShowed)return Promise.resolve();if(!o.isData)return Promise.reject({errMsg:"no advertisement data available, please invoke load()"});var i=My("show",o.adType)||0;if(1===i)return o.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_OTHER_SHOW_ERROR),Promise.reject({errMsg:"can't invoke show() while other video-ad is showed"});yO.call(this,{stage:1001});var a=(new Date).getTime();return o.isSwitched=!1,Ry("show",o.adType,1),o.adProxy.setTimePoint("p19"),n?o.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):o.adProxy.resetAnalyseBranchInfo(),o.adFetchResult.then((function(){if(MO.call(e))return Promise.reject({errMsg:Tw});var t=Object(ea.getSystemInfoSync)();return sO.call(e,{screenWidth:t.screenWidth,screenHeight:t.screenHeight,deviceOrientation:t.deviceOrientation}),gw?o.adProxy.reportVideoLastClick({touchStartX:Math.round(bw),touchStartY:Math.round(yw),touchEndX:Math.round(mw),touchEndY:Math.round(ww),touchDuration:Sw,screenWidth:lw,screenHeight:dw}):(o.weappTouchEventHandler&&Object(ns.offWeappTouchEvent)(o.weappTouchEventHandler),o.weappTouchEventHandler=Object(ns.onceWeappTouchEvent)(Ew,{aid:o.adProxy.data.aid,traceid:o.adProxy.data.traceid,screenWidth:lw,screenHeight:dw}),Object(R.publish)("emitWeappTouchEvent")),o.adProxy.reportVideoLoadTime({beginTime:a,endTime:(new Date).getTime(),reportType:2}),o.isShowed=!0,o.startExposureTime=0,o.isShowedExposureReported=!1,o.isViewableExposureReported=!1,o.isCardExposureReported=!1,o.adProxy.isViewable=!1,FO.call(e)||WO.call(e)?LO.call(e):(o.adProxy.isValidCondition("widget_gray_video_sound")?(_i.pauseAllAudio(),o.video.muted=!1,pw&&(o.video.obeyMuteSwitch=!0),o.sound.src=rw,o.soundFix.src=rw):(o.video.muted=!0,o.sound.src=ow,o.soundFix.src=ow),o.count.style.hidden=!1,o.countDown.style.hidden=!1,o.splitLineLeft.style.hidden=!1,o.countDownFix.style.hidden=!1,o.card.style.hidden=!0,o.container.style.hidden=!1,o.adFeedbackList.style.hidden=!0,o.adCover.show(),o.adProxy.setTimePoint("p15"),o.container.nextLayout().then((function(){return Object(xb.timeout)(500)})).then((function(){if(MO.call(e))return Promise.reject({errMsg:Tw});if(o.isSwitched)return OO.call(e,1);Dw.call(e).then((function(){o.topBar.style.hidden=!1,o.topBarFix.style.hidden=!0,gw||(o.isFullscreen=!0)})).catch((function(){o.topBar.style.hidden=!0,o.topBarFix.style.hidden=!1}));var t=(lw-dw)/2,n={top:0,duration:cw};return Pw.call(e)&&(n={top:t,rotate:-90,duration:cw}),o.container.animate(n).then((function(){Object(Hy.reportCanvasData)(Hy.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_ADS);var t=o.video.style,n=t.width,r=t.height,i=o.adProxy.reportExposure({exposureType:"showed",left:0,top:0,width:n,height:r});return o.startExposureTime=+new Date,tw(i,"激励视频","原始曝光"),Object(xb.timeout)(500).then((function(){o.isFirstPlay=!0,o.videoFirstPlayTime=(new Date).getTime(),o.adProxy.setTimePoint("p20"),HO.call(e,"play"),pO.call(e),fO.call(e,im.REWARDEDVIDEO_EVENT.REWARDEDVIDEOPLAY)}))})).then((function(){o.isFirstPlaySuccess=!0;var e=o.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:o.data.video.duration,muted:o.video.muted});tw(e,"激励视频","开始播放")})).catch((function(t){var n={errMsg:t,isSwitched:o.isSwitched};return o.adProxy.reportAdMonitorData(Bs.IDKEY.REWARDED_VIDEO_ANIMATE_ERROR,n),OO.call(e,2)}))})).catch((function(e){throw Ry("show",o.adType,0),e})))})).catch((function(e){throw Ry("show",o.adType,0),e}))}},{key:"isReady",value:function(){return!MO.call(this)&&ew(this).isData}},{key:"destory",value:function(){RO.call(this)}},{key:"destroy",value:function(){RO.call(this)}},{key:"onError",value:function(e){MO.call(this)||ew(this).emitter.on("_error",e)}},{key:"offError",value:function(e){MO.call(this)||ew(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){MO.call(this)||ew(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){MO.call(this)||ew(this).emitter.off("load",e)}},{key:"onClose",value:function(e){if(!MO.call(this)){var t=ew(this);t.emitter.on("close",e),e&&"function"==typeof e&&(t.closeEventCount+=1,t.closeEventCount>1&&console.warn("激励视频广告组件检测到您绑定了多次 onClose 事件，绑定重复的事件会产生多次重复的回调，请确认您绑定的事件是否重复，以免造成事件重复回调问题。"))}}},{key:"offClose",value:function(e){if(!MO.call(this)){var t=ew(this);t.emitter.off("close",e),e&&"function"==typeof e&&t.closeEventCount>0&&(t.closeEventCount-=1),e||(t.closeEventCount=0)}}}]),n}(Rb.Component),KO=327,JO=249,XO=184,$O=140,ZO=388,QO=308;function eS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eS(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eS(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nS={textAlign:"center",color:"#ffffff",lineBreak:"ellipsis",portrait:{width:247,fontSize:17,height:24,lineHeight:24},landscape:{width:185,fontSize:14,height:20,lineHeight:20}},rS={body:{zIndex:1000005,position:"absolute",overflow:"visibal",hidden:!0},container:{zIndex:1000005,position:"absolute",overflow:"hidden",opacity:0,hidden:!0,flexDirection:"column",alignItems:"center",justifyContent:"center"},mask:{top:0,left:0,backgroundColor:"#000000",opacity:.7,position:"absolute",overflow:"hidden"},cancelBox:{marginBottom:8,portrait:{width:KO,height:36},landscape:{width:JO,height:28},flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},cancel:{portrait:{width:36,height:36},landscape:{width:28,height:28}},adContainer:{flexDirection:"column",alignItems:"center",overflow:"hidden",borderRadius:8,portrait:{width:KO,height:ZO},landscape:{width:JO,height:QO}},adBackground:{position:"absolute",zIndex:1000006,portrait:{marginTop:90,width:KO,height:ZO},landscape:{marginTop:70,width:JO,height:QO},hidden:!0},adMask:{position:"absolute",zIndex:1000007,backgroundColor:"#000000",opacity:.5,borderRadius:8,portrait:{width:KO,height:ZO},landscape:{width:JO,height:QO},hidden:!0},adContent:{zIndex:1000008,portrait:{width:KO,height:204},landscape:{width:JO,height:168},flexDirection:"column",alignItems:"center"},adWording:{flexDirection:"column",alignItems:"center",justifyContent:"center",portrait:{marginTop:24,marginBottom:12,height:72},landscape:{marginTop:16,marginBottom:10,height:60}},wordingLine0:nS,wordingLine1:nS,wordingLine2:nS,adButtonGroup:{flexDirection:"column",alignItems:"center",justifyContent:"center"},relationLine:{textAlign:"center",fontSize:12,height:16,lineHeight:16,color:"rgba(0, 0, 0, 0.3)",portrait:{width:247,marginBottom:12},landscape:{width:185,marginBottom:10}},adButton:{borderWidth:1,borderColor:"#ffffff",borderRadius:4,textAlign:"center",color:"#ffffff",portrait:{marginBottom:28,width:184,height:40},landscape:{marginBottom:24,width:184,height:32},flexDirection:"column",alignItems:"center",justifyContent:"center"},adButtonText:{textAlign:"center",color:"#ffffff",letterSpacing:1,fontSize:17,height:24,width:184,lineHeight:24},adFeedbackContainer:{position:"absolute",width:60,height:48,zIndex:1000008,top:0,left:0},adFeedback:{zIndex:1000008,width:35,height:16,marginTop:8,marginLeft:8,position:"absolute"},adFeedbackList:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adFeedbackTitle:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{zIndex:1000008,width:134,hidden:!0,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{zIndex:1000008,width:134,height:98,hidden:!0,marginTop:32,marginLeft:5,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{zIndex:1000008,width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,hidden:!0,height:1,backgroundColor:"#E0E0E0"},adCloseTip:{hidden:!0,backgroundColor:"#ffffff",flex:1,justifyContent:"center",alignItems:"center",position:"absolute",top:0,left:0,zIndex:1000009,portrait:{width:KO,height:400},landscape:{width:JO,height:QO}},adCloseTipWrap:{width:140,height:200,flex:1,justifyContent:"center",alignItems:"center"},adCloseTipIcon:{width:64,height:55},adCloseTipTitle:{width:200,height:20,fontSize:18,color:"#3a3a3a",marginTop:20,textAlign:"center"},adCloseTipContent:{width:200,height:20,fontSize:13,color:"#bfbfbf",marginTop:10,textAlign:"center"}},oS={adMedia:{zIndex:1000008,portrait:{width:KO,height:XO},landscape:{width:JO,height:$O}},adVideoAudioBox:{zIndex:1000008,position:"absolute",bottom:0,left:0,width:40,height:40},adVideoAudioIcon:{position:"absolute",bottom:8,left:8,width:24,height:24,hidden:!1},adVideoCountDown:{position:"absolute",top:8,right:10,color:"#ffffff",fontSize:12,lineHeight:18,width:24,height:18,textAlign:"right"},adVideoAfter:{position:"absolute",portrait:{width:KO,height:XO},landscape:{width:JO,height:$O},hidden:!0,alignItems:"center",opacity:0},adVideoAfterMask:{position:"absolute",backgroundColor:"#000000",opacity:.7,portrait:{width:KO,height:XO},landscape:{width:JO,height:$O}},adVideoClickMask:{position:"absolute",zIndex:1000008,borderRadius:6,portrait:{width:KO,height:XO},landscape:{width:JO,height:$O}},adVideoAfterIcon:{zIndex:1000008,flexDirection:"row",portrait:{width:48,height:48,marginTop:52,marginBottom:8},landscape:{width:36,height:36,marginTop:44,marginBottom:6},alignSelf:"center",borderRadius:4},adVideoAfterText:{zIndex:1000008,portrait:{fontSize:16,width:KO},landscape:{fontSize:11,width:JO},lineHeight:22,color:"#ffffff",textAlign:"center",height:22}},iS={adMedia:{zIndex:1000008,portrait:{width:KO,height:XO},landscape:{width:JO,height:$O}}},aS='\n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  ',sS='\n    <image id="ad-media">\n      '+aS+"\n    </image>\n  ",cS='\n  <text bubble-event="true"></text>\n';function uS(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var lS=n(77),dS="https://wxa.wxs.qq.com/images/wxapp/new_audio_mute_icon.png",fS=0,pS=0,hS=ee.IS_IOS,vS=ee.IS_ANDROID,gS="",_S=!0,bS="image",yS="video";At.default.onReady((function(){gS=Object(Wa.getInitDeviceOrientation)();var e=Object(ea.getInitScreenSize)();fS=e.screenWidth,pS=e.screenHeight;try{At.default.global.window.pageOrientation&&At.default.global.window.pageOrientation}catch(e){}_S=Object(Lo.isGame)()}));var mS=0xac3cfbe83299d,wS="interstitial-ad has been destroyed",OS=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(XS.call(this))return!1;var n=Object(Rb.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),o=r?0:1;return t&&IS.call(this,e,o),r},SS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(XS.call(this))return!1;var n=Object(Rb.getPrivateThis)(this),r=!1,o=0;return n.adProxy.isValidCondition("widget_gray_time_limit_2")&&(o=100*(n.data.condition.widget_gray_time_limit_2||5)),o>0&&(0===n.startExposureTime||+new Date-n.startExposureTime<o)&&(r=!0,n.adProxy.reportAdMonitorData(49,{clickType:t})),n.isShow||(r=!1),r},IS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!XS.call(this)){var n=Object(Rb.getPrivateThis)(this);if(n.container&&n.container.layoutBox){var r=n.container.layoutBox,o=r.width,i=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:mS,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}}},ES=function(e){if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,o=n.top,i=n.width,a=n.height,s={currentTime:t.videoCurrentTime,duration:t.videoDuration},c=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-o,pressInterval:e.pressInterval,left:r,top:o,width:i,height:a,videoData:s});return Object(xb.logReport)(c,"interstitialAd","点击"),CS.call(this,{stage:1002}),c}}},CS=function(e){var t=e.stage;if(!XS.call(this)){var n={adtype:3,stage:t};Object(Rb.getPrivateThis)(this).adProxy.reportADFunnelModel(n)}},TS=function(e){if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(e){return t.adProxy.reportFollow({result:"fail"})}));Object(xb.logReport)(n,"interstitialAd","关注")}},kS=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!XS.call(this)){var r=Object(Rb.getPrivateThis)(this);if(Object(xb.log)("插屏广告 - 检查曝光"),!r.container.layoutBox)return Object(xb.log)("插屏广告 - 尚未完成布局，等待下一个loop检查"),Object(xb.timeout)(0).then((function(){return e.call(t,n)}));var o=r.container.layoutBox,i=o.left,a=o.top,s=o.width,c=o.height,u=!1===r.container.style.hidden;if(!r.isShowedExposureReported&&u){Object(xb.log)("插屏广告 - 原始曝光"),r.isShowedExposureReported=!0,r.startExposureTime=+new Date;var l=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"showed"});Object(xb.logReport)(l,"interstitialAd","原始")}if(!r.isViewableExposureReported&&u&&r.ad_type===bS){if(!n)return Object(xb.log)("可视曝光第 1 阶段, 需等待 1 秒后再检查"),Object(xb.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(xb.log)("插屏广告 - 可视曝光第 2 阶段"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var d=r.adProxy.reportExposure({left:i,top:a,width:s,exposureType:"viewable"});Object(xb.logReport)(d,"interstitialAd","可视")}}},AS=function(e){if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this),n=+new Date,r={slotid:mS,is_game:_S?1:0,costtype:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,close_type:e,exposure_duration:n-t.startExposureTime-t.hideDuration,start_time:t.startExposureTime,close_time:n};return t.adProxy.reportCloseAction(r)}},PS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!XS.call(this)){var n=Object(Rb.getPrivateThis)(this),r=n.adContainer.style,o=r.width,i=r.height,a={click_button:e,cost_type:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,slotid:mS,is_game:_S?1:0,pageentertime:+new Date(n.adProxy.getProgramStartTime()),ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,clientexptime:n.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:fS,screen_height:pS};return n.adProxy.reportAntifraud(a)}},DS=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!XS.call(this)){var d=Object(Rb.getPrivateThis)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:fS,adHeight:pS,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:mS,firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},jS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this);return Object.assign({autoCloseTime:t.autoCloseTime,launchTime:t.launchTime,frequencyTime:t.frequencyTime},e)}},xS=function(){if(!XS.call(this)){var e=Object(ea.getSystemInfoSync)();fS=e.screenWidth,pS=e.screenHeight,gS=fS>pS?"landscape":"portrait"}},RS=function(){var e=this;if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this),n=t.adProxy.fetch();return n.catch((function(e){return t.emitter.emit("_error",e)})),t.adFetchResult=n,t.adFetchResult.then((function(n){return t.isData=!0,t.data=n||{},t.autoCloseTime=n.card_info&&n.card_info.auto_close_time||15,t.launchTime=n.card_info&&n.card_info.launch_time||15,t.frequencyTime=n.card_info&&n.card_info.frequency_time||15,LS.call(e)})).catch((function(e){return Promise.reject(e)}))}},MS=function(e){var t=this,n=Object(Rb.getPrivateThis)(this),r=function(e){var t="",n="";switch(e){case"image":t=sS,n=tS(tS({},rS),iS);break;case"video":t='\n    <view id="ad-video-container" click-state="true">\n      <video id="ad-media" click-state="true" bubble-event="true" controls="false" muted="true" autoplay="false" object-fit="cover" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n        <view id="ad-video-click-mask" click-state="true" bubble-event="true"></view>\n        \n    <text id="ad-video-Count-Down">\n    </text>\n  \n        \n    <view id="ad-video-audio-box">\n      <image id="ad-video-audio-icon" bubble-event="true"></image>\n    </view>\n  \n        \n    <image id="ad-video-after" click-state="true" bubble-event="true" >\n        <view id="ad-video-after-mask" click-state="true" bubble-event="true"></view>\n        <image id="ad-video-after-icon" click-state="true" bubble-event="true"></image>\n        <text id="ad-video-after-text" click-state="true" bubble-event="true"></text>\n    </image>\n  \n        \n    <view id="ad-feedback-container">\n      <image id="ad-feedback"  bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/adfeedback.png"></image>\n    </view>\n    <view id="ad-feedback-list">\n      <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  \n      </video>\n    </view>\n  ',n=tS(tS({},rS),oS);break;default:t=sS,n=tS(tS({},rS),iS)}return{template:'\n  <view id="body">\n    <view id="container">\n      <view id="mask" bubble-event="true"></view>\n      <view id="cancel-box">\n        <image id="cancel" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/interstitialClose.jpeg"></image>\n      </view>\n      <view id="ad-container">\n        <image id="ad-background"></image>\n        <view id="ad-mask"></view>\n        '+t+'\n        <view id="ad-content">\n          <view id="ad-wording">\n          </view>\n          <view id="ad-button-group">\n            <text id="relation-line">placeholder</text>\n            <view id="ad-button" click-state="true">\n              <text id="ad-button-text" click-state="true" bubble-event="true"></text>\n            </view>\n          </view>\n        </view>\n        <view id="ad-close-tip">\n          <view id="ad-close-tip-wrap">\n            <image id="ad-close-tip-icon" bubble-event="true" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=b7cf6bfe332cf0a981234fdfd5bde985&filekey=3033020101041f301d02016d040253480410b7cf6bfe332cf0a981234fdfd5bde985020207b7040d00000004627466730000000131&hy=SH&storeid=32303139303432343135353331363030303733623437313336666664393331323630333230613030303030303664&bizid=1023"></image>\n            <text id="ad-close-tip-title" bubble-event="true" value="感谢你的反馈"></text>\n            <text id="ad-close-tip-content" bubble-event="true" value="我们会努力为你推荐更优质的广告"></text>\n          </view>\n        </view>\n      </view>\n    </view>\n  </view>\n  ',style:n}}(n.ad_type),o=r.template,i=r.style;n.cardStyle=i,n.cardXOM=lS(o).root,Mb.call(this,n.cardXOM,i),Eb.webviewLayout.add(n.body),n.container.on("click",(function(e){if(OS.call(t,e,!1)&&!n.isShowCloseTip&&!SS.call(t,e,4)){if(n.isClosing)return Promise.resolve();qS.call(t,1),PS.call(t,4,e)}})),n.cancelBox.on("click",(function(e){if(n.isShow||n.adProxy.reportAdMonitorData(124,{isClosing:n.isClosing}),OS.call(t,e,!1)&&!n.isShowCloseTip&&!SS.call(t,e,3)){if(n.isClosing)return Promise.resolve();qS.call(t,0),PS.call(t,3,e)}})),n.adFeedbackContainer.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adFeedbackList.style.hidden=!n.adFeedbackMenu.style.hidden||!n.adFeedbackList.style.hidden,n.adFeedbackMenu.style.hidden=!0,n.adFeedbackList.style.hidden||DS.call(t,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),n.adFeedbackBtn.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adProxy.openFeedbackUrl(_S?1007:1006),n.adFeedbackList.style.hidden=!0,DS.call(t,{secondGradeId:1,secondGradeDesc:"投诉"})))})),n.adDislikeBtn.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adFeedbackList.style.hidden=!0,n.adFeedbackMenu.style.hidden=!1,DS.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),n.adQualityBtn.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,DS.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),qS.call(t,7),PS.call(t,8,e)))})),n.adDuplicateBtn.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,DS.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),qS.call(t,7),PS.call(t,8,e)))})),n.adDismatchBtn.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e)||(n.adFeedbackMenu.style.hidden=!0,DS.call(t,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),qS.call(t,7),PS.call(t,8,e)))})),n.adButton.on("click",(function(e){OS.call(t,e)&&(SS.call(t,e,1)||YS.call(t,e,1))})),n.adWording.on("click",(function(e){PS.call(t,5,e)})),n.ad_type===bS&&n.adMedia.on("click",(function(e){n.adProxy.isValidCondition("widget_gray_optimizedstyle")?OS.call(t,e)&&(SS.call(t,e,2)||YS.call(t,e,2)):PS.call(t,2,e)})),n.ad_type===yS&&(n.adVideoClickMask.on("click",(function(e){OS.call(t,e)&&(SS.call(t,e,2)||YS.call(t,e,2))})),n.adVideoAfter.on("click",(function(e){OS.call(t,e)&&(SS.call(t,e,2)||YS.call(t,e,2))})),n.adVideoAudioBox.on("click",(function(e){OS.call(t,e,!1)&&(SS.call(t,e,1)||(n.adMedia.muted=!n.adMedia.muted,n.adVideoAudioIcon.src=n.adMedia.muted?dS:"https://wxa.wxs.qq.com/images/wxapp/new_audio_icon.png"))})),n.adMedia.onTimeUpdate((function(e){var r=e.duration,o=e.position;if(!XS.call(t)){if($S.call(t),n.adMedia.autoplay=!1,o>0&&(n.videoCurrentTime=1e3*o),n.isFirstPlay){n.adProxy.setTimePoint("p21",{time:Date.now()-1e3*o});var i=0;n.showTime>n.videoFirstPlayTime&&(i=n.showTime-n.videoFirstPlayTime),n.adProxy.reportVideoLoadTime({beginTime:n.videoFirstPlayTime,endTime:(new Date).getTime()-parseInt(1e3*o),departureTime:i,reportType:1,preloadVideo:n.preloadVideo?1:0,preloadVideoSuccess:n.preloadVideoSuccess?1:0}),n.isFirstPlay=!1,CS.call(t,{stage:1004}),n.isFirstPlaySuccess=!0,n.adProxy.reportAdIDKey({key:103})}if(o>=1&&!n.isViewableExposureReported){var a=n.adMedia.style,s=a.width,c=a.height;n.isViewableExposureReported=!0,n.adProxy.isViewable=!0;var u=n.adProxy.reportExposure({exposureType:"viewable",left:0,top:0,width:s,height:c});Object(xb.logReport)(u,"插屏视频","播放曝光")}var l=Math.ceil(r-o);n.adVideoCountDown.value=l.toString()+"s",hS&&r-o<.6&&n.adVideoAfter.style.hidden&&(n.adVideoAfter.style.hidden=!1,n.adVideoAfter.animate({opacity:1,duration:350}),n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0),n.videoDuration=1e3*r}})),n.adMedia.onEnded((function(){n.videoCurrentTime=n.videoDuration,n.isEnded=!0,n.isPlaying=!1,ZS.call(t);var e=n.adProxy.reportVideo({playType:"complete",conditionType:"end",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});Object(xb.logReport)(e,"插屏视频","播放完成"),n.adVideoAfter.style.hidden=!1,n.adVideoAudioBox.style.hidden=!0,n.adVideoCountDown.style.hidden=!0,vS&&n.adVideoAfter.animate({opacity:1,duration:300}),n.adProxy.reportAdMonitorData({key:104})})),n.adMedia.onError((function(e){ZS.call(t),n.adProxy.reportAdMonitorData(101,e)})))},NS=function(){if(!XS.call(this)){var e=Object(Rb.getPrivateThis)(this),t=e.data,n=t.width,r=t.height,o="portrait"===gS?KO/n:JO/n,i="portrait"===gS?ZO/r:QO/r,a="portrait"===gS?fS/375:pS/375;e.adMedia.scale=o;var s=Object.keys(e.cardStyle);s.forEach((function(t){if(e.cardStyle[t].hasOwnProperty(gS)){var n=e.cardStyle[t][gS];Object.keys(n).forEach((function(r){e[t]&&(e[t].style[r]=n[r],e.cardStyle[t][r]=n[r])}))}})),e.adBackground.scale=i;var c=n*i;e.adBackground.style.width=e.cardStyle.adBackground.width=c,"portrait"===gS?(e.adMedia.style.width=e.cardStyle.adMedia.width=KO,e.adMedia.style.height=e.cardStyle.adMedia.height=XO,e.adBackground.style.height=e.cardStyle.adBackground.height=ZO,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-KO)/2):"landscape"===gS&&(e.adMedia.style.width=e.cardStyle.adMedia.width=JO,e.adMedia.style.height=e.cardStyle.adMedia.height=$O,e.adBackground.style.height=e.cardStyle.adBackground.height=QO,e.adBackground.style.left=e.cardStyle.adBackground.left=0-(c-JO)/2);var u=["width","height","fontSize","lineHeight","borderRadius"];return s.forEach((function(t){if(!["container","mask","body"].includes(t))if(u.forEach((function(n){e[t]&&e[t].style.hasOwnProperty(n)&&(e[t].style[n]=e.cardStyle[t][n]*a)})),"adWording"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a;else if("adButton"===t)e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if("adVideoAfterIcon"===t)e[t].style.marginTop=e.cardStyle[t].marginTop*a,e[t].style.marginBottom=e.cardStyle[t].marginBottom*a;else if(0===t.indexOf("wordingLine")){var n="portrait"===gS?KO:JO;e[t]&&e[t].style&&(e[t].style.width=n*a)}})),e.adProxy.isValidCondition("widget_gray_close_v2")&&(e.adFeedbackList.style.height=98,e.adFeedbackBtn.style.height=32,e.adDislikeBtn.style.height=32,e.adCloseBtnLineDislike0.style.hidden=!1,e.adCloseBtnLineDislike1.style.hidden=!1,e.adCloseBtnLineDislike2.style.hidden=!1,e.adCloseBtnLineDislike3.style.hidden=!1,e.adDislikeBtn.style.hidden=!1),e.container.style.width=fS,e.container.style.height=pS,e.body.style.width=fS,e.body.style.height=pS,e.mask.style.width=fS,e.mask.style.height=pS,e.container.nextLayout().then((function(){return Object(xb.log)("updateUI 完成"),!_S&&hS?e.container.forceUpdate():Promise.resolve()}))}},LS=function(){var e=this;if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this);try{var n,r=t.data,o=r.app,i=r.appInfo,a=(i.apkName,i.channelId,i.urlScheme,r.product_type),s=(r.dest_type,r.crt_size),c=r.crtInfo,u=r.button_action,l=r.image_url,d=r.card_info,f=d.bg_color,p=d.font_color,h=d.bg_img,v=d.desc,g=d.thumb,_=d.title,b=c&&c[0]&&c[0].card_info&&c[0].card_info.mp_tag_type;switch(s){case 701:t.ad_type=bS;break;case 913:t.ad_type=yS;break;default:t.ad_type=bS}if(t.body&&Eb.webviewLayout.remove(t.body),MS.call(this),t.body.fullscreen=!0,_S||(t.body.style.fixed=!0),t.ad_type===yS){var y=t.data.short_video,m=y.thumb_url,w=y.video_url,O=y.video_duration;t.adMask.style.hidden=!0,t.adBackground.style.hidden=!0,t.adVideoAfter.style.hidden=!0,t.adVideoAudioIcon.src=dS,t.adVideoAfter.src=h,t.adVideoAfterIcon.src=g,t.adVideoAfterText.value=_,t.videoDuration=1e3*O,t.adMedia.autoplay=!1,hS&&t.adMedia.src==w&&t.adMedia.seek(0),hS?(t.adMedia.poster=m,Object(xb.timeout)(500).then((function(){t.adMedia.src=w,t.adProxy.setTimePoint("p8")}))):(t.adProxy.setTimePoint("p8"),t.adMedia.src=w,t.adMedia.poster=m),vS&&(t.preloadVideo=!0,t.preloadVideoSuccess=!1,t.adProxy.preloadVideo([w]).catch((function(e){t.adProxy.reportAdMonitorData(107,e)}))),t.adProxy.reportVideoLoadTime({beginTime:t.fetchBeginTime,endTime:(new Date).getTime(),reportType:2}),t.adProxy.reportAdIDKey({key:98})}else t.ad_type===bS&&(t.adMedia.src=l,t.adMask.style.hidden=!1,t.adBackground.style.hidden=!1,t.adProxy.reportAdIDKey({key:100}));if(f?(t.adMask.style.opacity=1,t.adMask.style.backgroundColor=f,n=p,t.relationLine.style.color=p,t.adButton.style.color=p,t.adButton.style.borderColor=p,t.adButtonText.style.color=p,t.adBackground.style.hidden=!0):t.adProxy.isValidCondition("widget_gray_optimizedstyle")?(t.adContainer.style.borderRadius=8,t.adContent.style.backgroundColor="#ffffff",n="#000000",t.relationLine.style.color="#b3b3b3",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#07c160",t.adButton.style.backgroundColor="#07c160",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===yS):(t.adMask.style.opacity=.5,t.adMask.style.backgroundColor="#000000",n="#ffffff",t.relationLine.style.color="#ffffff",t.adButton.style.color="#ffffff",t.adButton.style.borderColor="#ffffff",t.adButtonText.style.color="#ffffff",t.adBackground.style.hidden=t.ad_type===yS,t.adBackground.src=h),v.forEach((function(r,o){var i="wordingLine"+o,a=lS(cS).root;a.attributes.id=i;var s=Rb.create.call(e,a);s.value=r,s.style.color=n,t.adWording.add(s)})),t.adButtonText.value=u.button_text,t.buttonTextType=u.text_type||0,8===b){var S=+new Date;Ja({buttonText:u.button_text,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:S,endTime:n,showTime:t.showDetailTime||0}),e){var r="— 最近已有"+e.count+"人"+e.descText+" —";t.relationLine.value=r}else t.relationLine.value=""})).catch((function(e){t.relationLine.value="",t.adProxy.reportAdMonitorData(116,e)}))}12===a?(t.adProxy.setAppInstallState(!1),WS.call(this)):23===a&&o.isFollowed&&0===t.buttonTextType&&(t.adButtonText.value="查看公众号"),t.adProxy.preloadLanding(),t.emitter.emit("load"),t.container.ready().then((function(){Object(xb.log)("interstitialAd container 及其子元素 ready"),t.emitter.emit("ready")})),t.adProxy.reportAdIDKey({key:108})}catch(e){return t.adProxy.reportAdIDKey({key:110}),t.adProxy.reportAdMonitorData(40,e),t.adProxy.reportAdIDKey({key:109}),Promise.reject(e)}}},BS=function(e){var t=this;if(!XS.call(this)){var n=Object(Rb.getPrivateThis)(this);n.clickCount>1&&n.adProxy.reportRepeatClick({slotId:mS,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,clkCnt:n.clickCount,lastClkPeriod:+new Date-n.lastLandingTime,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,pageStayTime:n.landingPageCostTime,jsapiName:n.lastJsapiName});var r=n.adProxy.land(e);if(23===n.data.product_type&&e&&e.isButton&&!n.adProxy.data.biz_info.is_subscribed?(r.then((function(e){var t=/ok/.test(e.errMsg);t&&0===n.buttonTextType&&(n.adButtonText.value="查看公众号",n.adProxy.data.biz_info&&(n.adProxy.data.biz_info.is_subscribed=1),n.adProxy.reportAdIDKey({key:41})),e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r=+new Date;n.lastJsapiStatus=0,n.lastJsapiCostTime=r-n.lastLandingTime,"private_addContact"==n.lastJsapiName&&n.adProxy.reportLandingTime({slotId:mS,costType:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,openTime:n.lastLandingTime,closeTime:r,stayTime:n.lastJsapiCostTime,jsapiName:n.lastJsapiName,clickTime:n.lastLandingTime,clkCnt:n.clickCount,retCode:n.lastJsapiStatus,costTime:n.lastJsapiCostTime,actTypeInt:t?2:3,actTypeStr:t?"关注":"取消"})})).catch((function(e){n.lastJsapiStatus=1})),TS.call(this,r)):r.then((function(e){e.errMsg&&(n.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==n.lastJsapiName||"navigateToMiniProgram"==n.lastJsapiName||"openADCanvas"==n.lastJsapiName||"launchApplication"==n.lastJsapiName?(n.isLandingPage=!0,ZS.call(t)):n.lastJsapiStatus=0,n.lastJsapiCostTime=+new Date-n.lastLandingTime})).catch((function(e){n.lastJsapiStatus=1})),n.ad_type===yS){var o=n.adProxy.reportVideo({playType:n.isPlaying?"partial":"complete",conditionType:"land",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted});Object(xb.logReport)(o,"插屏视频","跳转")}}},FS=function(){var e=this;if(!XS.call(this)){var t=Object(Rb.getPrivateThis)(this);return Object(xb.timeout)(10).then((function(){return t.adFetchResult.then((function(){if(t.isLandingPage){t.lastJsapiStatus=0,t.isLandingPage=!1;var n=+new Date;t.landingPageCostTime=n-t.hideTime,t.adProxy.reportLandingTime({slotId:mS,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,openTime:t.hideTime,closeTime:n,stayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:1}),qS.call(e,3)}t.adButton&&23===t.data.product_type?t.adProxy.checkFollow(t.data.app.uin).then((function(e){0===t.buttonTextType&&(t.adButtonText.value=e?"查看公众号":t.data.button_action.button_text),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=e?1:0)})):12===t.data.product_type&&WS.call(e)})).catch((function(){}))}))}},WS=function(){if(!XS.call(this)){var e=Object(Rb.getPrivateThis)(this);if(e.data){var t=e.data.appInfo,n=t.apkName,r=t.versionCode,o=t.urlScheme;e.adProxy.getInstallState(n).then((function(t){t.isInstalled&&(void 0===t.versionCode||t.versionCode>=r)&&(e.androidAppState=4,e.adProxy.setAppInstallState(!0),o&&o.trim().length>0?e.adButtonText.value="进入应用":e.adButtonText.value="查看应用",1===e.buttonTextType&&(e.adButtonText.value=e.data.button_action.button_text))})).catch((function(e){}))}}},US=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Rb.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},VS=function(){var e=this;if(XS.call(this))return Promise.reject({errMsg:wS});var t=Object(Rb.getPrivateThis)(this);return t.onceSwitched=!1,t.startShow=+new Date,t.body.style.width=fS,t.body.style.height=pS,!_S&&hS&&(t.body.style.hidden=!1),Promise.resolve().then((function(){if(xS(),XS.call(e))return Promise.reject({errMsg:wS});if(t.isShow=!0,t.isShowCloseTip=!1,t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!0,t.ad_type===yS){t.videoFirstPlayTime=(new Date).getTime(),t.adProxy.setTimePoint("p20"),$S.call(e),t.adMedia.play(),t.adMedia.autoplay=!0,t.isFirstPlay=!0;var n=t.adProxy.reportVideo({playType:"partial",conditionType:"start",playDuration:0,videoDuration:t.videoDuration,muted:t.adMedia.muted});t.adProxy.reportAdIDKey({key:99}),Object(xb.logReport)(n,"插屏视频","开始播放")}return NS.call(e).then((function(){return t.body.style.hidden&&(t.body.style.hidden=!1),t.container.style.hidden=!1,t.isSwitched?qS.call(e,6):t.container.animate({opacity:1,duration:300}).then((function(){return t.showDetailTime=+new Date,t.container.nextLayout((function(){return kS.call(e)}))})).catch((function(n){var r={errMsg:n,isSwitched:t.isSwitched,onceSwitched:t.onceSwitched,startShow:t.startShow,enterRoute:t.enterRoute,enterTime:t.enterTime,outRoute:t.outRoute,outTime:t.outTime,lastRoute:t.lastRoute};return t.adProxy.reportAdMonitorData(36,r),qS.call(e,6).then((function(){return Promise.reject({errCode:2004,errMsg:"广告渲染失败，或因小程序页面切换导致广告渲染失败"})}))}))}))}))},GS=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.branchId,r=t.branchDim;if(XS.call(this))return Promise.reject({errMsg:wS});var o=Object(Rb.getPrivateThis)(this),i=Ly()||0;if(1===i)return o.adProxy.reportAdMonitorData(44,jS.call(this)),Promise.reject({errCode:2003,errMsg:"当前正在播放激励视频广告或者插屏广告，不允许再次展示插屏广告"});var a=o.adProxy.getWebviewInfo(),s=a.createWebviewId,c=a.currentWebviewId;return s!==c?(o.adProxy.reportAdMonitorData(45,jS.call(this)),Promise.reject({errCode:2005,errMsg:"插屏广告并非当前页面调用，不允许展示插屏广告"})):(o.adProxy.setTimePoint("p19"),o.isSwitched=!1,Ry("show",o.adType,1),o.showTime=+new Date,o.fetchBeginTime=(new Date).getTime(),n?o.adProxy.recordAnalyseBranchInfo({branchId:n,branchDim:r}):o.adProxy.resetAnalyseBranchInfo(),o.adFetchResult.catch((function(){return Promise.reject({errMsg:"no ad data"})})).then((function(){var t=+new Date-+new Date(o.adProxy.getProgramStartTime());if(t<=1e3*o.launchTime)return o.adProxy.reportAdMonitorData(42,jS.call(e,{startInterval:t})),Promise.reject({errCode:2001,errMsg:"小程序启动一定时间内不允许展示插屏广告"});var n=Ny()||0,r=+new Date-n;return r<=1e3*o.frequencyTime?(o.adProxy.reportAdMonitorData(43,jS.call(e,{closeInterval:r})),Promise.reject({errCode:2002,errMsg:"距离小程序插屏广告或者激励视频广告上次播放时间间隔不足，不允许展示插屏广告"})):(CS.call(e,{stage:1001}),US.call(e).then((function(){return VS.call(e)})).then((function(){o.adProxy.reportAdMonitorData(46,jS.call(e))})))})).catch((function(e){return Ry("show",o.adType,0),Promise.reject(e)})))},HS=function(){if(!XS.call(this)){var e=Object(Rb.getPrivateThis)(this);e.androidAppState=0,e.isData=!1,e.isShow=!1,e.startExposureTime=0,e.isShowedExposureReported=!1,e.isViewableExposureReported=!1,e.adProxy.isViewable=!1,e.lastCloseTime=0,e.buttonTextType=0,e.startExposureTime=0,e.clickCount=0,e.lastLandingTime=0,e.lastJsapiName="",e.lastJsapiStatus=0,e.lastJsapiCostTime=0,e.isLandingPage=!1,e.landingPageCostTime=0,e.hideTime=0,e.hideDuration=0,e.body.style.hidden=!0,e.container.style.hidden=!0,e.isReady=!1,e.videoFirstPlayTime=0,e.isEnded=!1,e.fetchBeginTime=0,e.videoCurrentTime=0,e.videoDuration=0,e.isPlaying=!1,e.isFirstPlay=!1,e.isFirstPlaySuccess=!1,e.isSwitched=!1,e.onceSwitched=!1,e.startShow=0,e.showDetailTime=0,e.isEnded?CS.call(this,{stage:1005}):CS.call(this,{stage:1006}),Ry("show",e.adType,0),Ry("close",e.adType,+new Date),!_S&&hS?Object(xb.timeout)(100).then((function(){e.emitter.emit("close")})):e.emitter.emit("close"),e.adProxy.reset()}},zS=function(e){var t=this;if(!XS.call(this)){var n=Object(Rb.getPrivateThis)(this);return n.adProxy.reportTimePoints({slotid:mS,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,extInfo:{preloadVideoSuccess:n.preloadVideoSuccess?1:0}}),Promise.resolve().then((function(){return[4,6].includes(e)?Promise.resolve():n.container.animate({opacity:0,duration:300})})).then((function(){return AS.call(t,e),2===e?PS.call(t,6):3===e&&PS.call(t,7),HS.call(t),4===e?Promise.resolve():RS.call(t)}))}},qS=function(e){var t=this;if(!XS.call(this)){var n=Object(Rb.getPrivateThis)(this);return n.isClosing?Promise.resolve():n.container?(n.isClosing=!0,n.ad_type===yS&&(n.adProxy.reportVideo({playType:n.isEnded?"complete":"partial",conditionType:"close",playDuration:n.videoCurrentTime,videoDuration:n.videoDuration,muted:n.adMedia.muted}),n.adMedia.autoplay=!1,n.adMedia.pause(),ZS.call(this),n.adMedia.muted=!0,n.adVideoAfter.style.opacity=0),n.container.ready().then((function(){return zS.call(t,e)})).then((function(){return n.isClosing=!1})).catch((function(e){n.isClosing=!1,n.adProxy.reportAdMonitorData(126,e)}))):(n.adProxy.reportAdIDKey({key:125}),Promise.resolve())}},YS=function(e,t){var n=this,r=Object(Rb.getPrivateThis)(this);if(r.isShow||r.adProxy.reportAdMonitorData(123,t),!XS.call(this)){var o=r.data,i=o.appInfo,a=(i.apkName,i.channelId,i.urlScheme),s=o.product_type,c=o.dest_type;12===s&&vS&&4===r.androidAppState&&a&&a.trim().length>0?(ES.call(this,e),PS.call(this,t,e),r.adProxy.launchApplication(a).catch((function(e){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0):hS&&46===s&&6===c?Promise.race([ES.call(this,e),Object(xb.timeout)(500)]).then((function(){PS.call(n,t,e),BS.call(n)})).catch((function(){PS.call(n,t,e),BS.call(n)})):(ES.call(this,e),PS.call(this,t,e),BS.call(this))}},KS=function(){var e=Object(Rb.getPrivateThis)(this);Object(xa._offShow)(e.handleEnterForeground),Fa(e.handleEnterBackground),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),Eb.webviewLayout.remove(e.body),Object(Rb.removePrivateThis)(this)},JS=function(){var e=this;XS.call(this)||(US.call(this).then((function(){var t=Object(Rb.getPrivateThis)(e);t.isShow&&(Ry("show",t.adType,0),Ry("close",t.adType,+new Date)),KS.call(e)})),this._destroyed=!0)},XS=function(){return this._destroyed},$S=function(){var e=Object(Rb.getPrivateThis)(this);ZS.call(this),e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(153,{currentTime:e.videoCurrentTime,duration:e.videoDuration,src:e.adMedia.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},ZS=function(){var e=Object(Rb.getPrivateThis)(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},QS=function(e){Object(G.default)(n,e);var t=uS(n);function n(e){var r,o=e.adUnitId,i=e.pluginId,a=void 0===i?"":i;Object($.default)(this,n),r=t.call(this);var s=Object(Rb.getPrivateThis)(Object(Pe.default)(r));s.adUnitId=o,s.adType="interstitialAd",s.cardXOM="",s.cardStyle="",s.ad_type="",s.emitter=new Cb.default,s.adProxy=new Mc({adUnitId:o,adType:"interstitialAd",pluginAppid:a}),s.androidAppState=0,s.isShowedExposureReported=!1,s.isViewableExposureReported=!1,s.isReady=!1,s.isShow=!1,s.emitter.on("ready",(function(){return s.isReady=!0})),s.lastCloseTime=0,s.autoCloseTime=15,s.launchTime=15,s.frequencyTime=15,s.startExposureTime=0,s.clickCount=0,s.lastLandingTime=0,s.lastJsapiName="",s.lastJsapiStatus=0,s.lastJsapiCostTime=0,s.isLandingPage=!1,s.landingPageCostTime=0,s.hideTime=0,s.showTime=0,s.hideDuration=0,s.isClosing=!1,s.isShowCloseTip=!1,s.clickFirstGradeTime=0,s.videoFirstPlayTime=0,s.isEnded=!1,s.fetchBeginTime=0,s.videoCurrentTime=0,s.videoDuration=0,s.isPlaying=!1,s.isFirstPlay=!1,s.preloadVideo=!1,s.preloadVideoSuccess=!1,s.keepAliveTimer=null,s.isData=!1,r._destroyed=!1,s.updateResult=Promise.resolve(),s.isSwitched=!1,s.onceSwitched=!1,s.startShow=0;var c=s.adProxy.getWebviewInfo(),u=c.openType,l=c.createWebviewId,d=c.lastWebviewId,f=c.currentWebviewId,p=[u,d,f,l];return s.outRoute="",s.lastRoute="",s.enterTime=0,s.outTime=0,l===f&&(s.enterRoute=p.join("|"),s.enterTime=+new Date,s.lastRoute="enter"),l===d&&(s.outRoute=p.join("|"),s.outTime=+new Date,s.lastRoute="out"),RS.call(Object(Pe.default)(r)),_S||(Object(rt.onAppRoute)((function(e){if(!XS.call(Object(Pe.default)(r))){var t=s.adProxy.getWebviewInfo(),n=t.createWebviewId,o=t.lastWebviewId,i=t.currentWebviewId,a=[e.openType,o,i,n];n===i&&(s.enterRoute=a.join("|"),s.enterTime=+new Date,s.onceSwitched=!0,s.lastRoute="enter"),n===o&&(s.outRoute=a.join("|"),s.outTime=+new Date,s.onceSwitched=!0,s.lastRoute="out")}})),Object(Wt.onAppRouteDone)((function(){if(!XS.call(Object(Pe.default)(r))){var e=s.adProxy.getWebviewInfo(),t=e.openType,n=e.createWebviewId,o=e.currentWebviewId;["navigateTo","navigateBack","switchTab"].includes(t)&&n===o&&(s.isSwitched=!0,s.isShow&&qS.call(Object(Pe.default)(r),4))}})),Object(lu.onWindowResize)((function(e){!XS.call(Object(Pe.default)(r))&&s.isShow&&e.size&&(pS=e.size.screenHeight,fS=e.size.screenWidth,gS=e.deviceOrientation,NS.call(Object(Pe.default)(r)))}))),s.handleEnterForeground=function(){if(!XS.call(Object(Pe.default)(r))){s.ad_type===yS&&s.isShow&&$S.call(Object(Pe.default)(r));var e=gS;xS(),e!==gS&&s.isShow&&NS.call(Object(Pe.default)(r)),s.hideTime>0&&s.isShow&&(s.hideDuration+=+new Date-s.hideTime),FS.call(Object(Pe.default)(r))}},s.handleEnterBackground=function(){if(!XS.call(Object(Pe.default)(r))&&s.isShow&&(s.hideTime=+new Date,s.ad_type===yS)){ZS.call(Object(Pe.default)(r));var e=s.adProxy.reportVideo({playType:s.isPlaying?"partial":"complete",conditionType:"exit",playDuration:s.videoCurrentTime,videoDuration:s.videoDuration,muted:s.adMedia.muted});Object(xb.logReport)(e,"插屏广告","退出")}},Object(xa._onShow)(s.handleEnterForeground),Ba(s.handleEnterBackground),Object(R.onMethod)("onVideoResourceLoad",(function(e){!s.isShow&&s.ad_type===yS&&s.adMedia&&s.adMedia.src==e.resource&&(s.adProxy.reportAdIDKey({key:106}),s.preloadVideoSuccess=!0,s.adMedia.src=e.resource)})),r}return Object(K.default)(n,[{key:"load",value:function(){if(XS.call(this))return Promise.reject({errMsg:wS});var e=Object(Rb.getPrivateThis)(this);return e.isShow?Promise.reject({errMsg:"can't invoke load() while interstitial-ad is showed"}):e.isData?Promise.resolve():RS.call(this)}},{key:"show",value:function(e){return XS.call(this)?Promise.reject({errMsg:wS}):GS.call(this,e)}},{key:"destory",value:function(){JS.call(this)}},{key:"destroy",value:function(){JS.call(this)}},{key:"onError",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.on("_error",e)}},{key:"offError",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.off("_error",e)}},{key:"onLoad",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.on("load",e)}},{key:"offLoad",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.off("load",e)}},{key:"onClose",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.on("close",e)}},{key:"offClose",value:function(e){XS.call(this)||Object(Rb.getPrivateThis)(this).emitter.off("close",e)}}]),n}(Rb.Component),eI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},tI=function(e){return!(e.isDestroyed()||!Object(Ha.get)(e,["rootElement","layoutBox"]))},nI=function(){function e(t){var n=this,r=t.manager,o=t.adProxy,i=t.emitter;Object($.default)(this,e),this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.exposureTimer=null,this.clickFirstGradeTime=0,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set,this.hasEmitShowHalf=!1,this.handleEnterForeground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(im.ROOT_EVENT.SHOWHALF),e.emitAdCustomEvent(im.CUSTOM_EVENT.ADSHOWHALF)))},this.handleEnterBackground=function(){var e=n.manager.rootComponent;!n.manager.isDestroyed()&&e&&(e.isShow()&&(e.emitComponentEvent(im.ROOT_EVENT.HIDEHALF),e.emitAdCustomEvent(im.CUSTOM_EVENT.ADHIDEHALF)))},this.handleAdCustomEvent=function(e){switch(e.action){case im.CUSTOM_EVENT.ADVIDEOPLAY:n.checkVideoViewableExposure(!0);break;case im.CUSTOM_EVENT.ADVIDEOPAUSE:n.checkVideoViewableExposure(!1);break;case im.CUSTOM_EVENT.REPORTVIDEOPLAY:n.reportVideoPlay(e.value.playType,e.value.conditionType,e.value.videoInfo);break;case im.CUSTOM_EVENT.FEEDBACKREPORT:n.reportAdFeedbackData(e.value);break;case im.CUSTOM_EVENT.REPORTENDPAGE:n.reportEndPage(e.value.data);break;case im.CUSTOM_EVENT.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case im.CUSTOM_EVENT.BTNTAP:n.manager.rootComponent&&n.manager.rootComponent.emitComponentEvent(im.ROOT_EVENT.ADBUTTONTAP),n.handleClick(e.value.event,1,!0);break;case im.CUSTOM_EVENT.CHANGEMULTISHOW:n.multiShowList=e.value.list,n.checkExposure()}},this.manager=r,this.adProxy=o,this.emitter=i,this.bindEvent()}return Object(K.default)(e,[{key:"setMultiShowList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.multiShowList=Object(Y.default)(e)}},{key:"destroy",value:function(){this.unbindEvent()}},{key:"reset",value:function(){this.clickCount=0,this.hideDuration=0,this.showedExposureTime=0,this.isExposured=!1,this.isViewableExposured=!1,this.hasEmitShowHalf=!1,this.adProxy.isViewable=!1,this.exposureTimer&&clearTimeout(this.exposureTimer),this.exposureTimer=null,this.multiShowList=[],this.multiExposureList=new Set,this.multiViewableExposureList=new Set}},{key:"bindEvent",value:function(){this.emitter.on("adCustomEvent",this.handleAdCustomEvent),Object(xa._onShow)(this.handleEnterForeground),Ba(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("adCustomEvent",this.handleAdCustomEvent),Object(xa._offShow)(this.handleEnterForeground),Fa(this.handleEnterBackground)}},{key:"judgeTriggerClick",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.manager.isDestroyed())return!1;var n=this.adProxy.isTriggerClick(e),r=n?0:1;return t&&this.reportTouchClick(e,r),n}},{key:"reportTouchClick",value:function(e,t){if(tI(this.manager)){var n=this.manager.rootElement.layoutBox,r=n.width,o=n.height,i=0;[0,2,3].includes(t)&&(this.clickCount+=1,i=this.clickCount),this.adProxy.reportTouchClick({slotid:this.manager.getSlotId(),costtype:Object(Ha.get)(this.adProxy,["adData","data","is_cpm"])?1:2,click_time:Date.now(),click_cnt:i,start_posx:Math.round(e.relativeX||0),start_posy:Math.round(e.relativeY||0),end_posx:Math.round(e.relativeEndX||0),end_posy:Math.round(e.relativeEndY||0),ad_width:r||0,ad_height:o||0,press_interval:e.pressInterval,block_click:t})}}},{key:"handleClick",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.manager.isDestroyed()&&this.manager.adData){var o=this.manager.adData,i=o.appInfo.urlScheme,a=o.product_type,s=o.dest_type;this.manager.clearAdTimer(),a===za.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB&&ee.IS_ANDROID&&this.landManager.downloadState===im.DOWNLOAD_STATE.INSTALLED&&i&&i.trim().length>0?(this.reportClick(e),this.reportAntifraud(t,e),this.adProxy.launchApplication(i).catch((function(){})),this.manager.landManager.lastJsapiName="launchApplication",this.manager.landManager.isLandingPage=!0):ee.IS_IOS&&a===Ns.MINI_GAME&&6===s?Promise.race([this.reportClick(e),Object(Ha.timeout)(500)]).then((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})).catch((function(){n.reportAntifraud(t,e),n.manager.landManager.landing({isButton:r})})):(this.reportClick(e),this.reportAntifraud(t,e),this.manager.landManager.landing({isButton:r}))}}},{key:"reportClick",value:function(e){if(tI(this.manager)){var t=this.manager.rootElement.layoutBox,n=t.left,r=t.top,o=t.width,i=t.height,a=function(e){return Cm.videoDataMap[e]||{}}(this.manager.adCustomId);this.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-n,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,isMulti:this.manager.isMulti,left:n,top:r,width:o,height:i,videoData:a})}}},{key:"isClickLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.adProxy,r=this.manager.rootElement;if(!r)return!1;var o=r.layoutBox,i=o.width,a=o.height,s=r.getAbsolutePosition(),c=s.left,u=s.top,l=!1,d=0;n.isValidCondition("widget_gray_time_limit")&&(d=100*(this.manager.adData.condition.widget_gray_time_limit||1)),d>0&&Date.now()-this.showedExposureTime<d&&(l=!0,n.reportAdMonitorData(im.IDKEY.AD_LIMIT_TIME,{clickType:t}));var f=0;return n.isValidCondition("widget_gray_bd_limit")&&(f=this.manager.adData.condition.widget_gray_bd_limit||0),"devtools"!==ee.PLATFORM&&e&&f>0&&(e.absoluteEndX-c<f||c+i-e.absoluteEndX<f||e.absoluteEndY-u<f||u+a-e.absoluteEndY<f)&&(l=!0,n.reportAdMonitorData(im.IDKEY.AD_LIMIT_BOUNDARY)),l}},{key:"reportExposure",value:function(e){var t=e.isViewable;return eI(this,void 0,void 0,Lt.a.mark((function e(){var n,r,o,i,a,s,c,u,l,d,f,p;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(tI(this.manager)){e.next=2;break}return e.abrupt("return");case 2:if(n=this.manager,r=n.rootElement,o=n.rootComponent,i=n.isMulti,a=r.layoutBox,s=a.left,c=a.top,u=a.width,l=a.height,d={left:s,top:c,width:u,height:l},i){e.next=11;break}return t?o.emitComponentEvent(im.ROOT_EVENT.VIEWABLEEXPOSURE):o.emitComponentEvent(im.ROOT_EVENT.EXPOSURE),e.next=9,this.adProxy.reportExposure(Object.assign(Object.assign({},d),{exposureType:t?"viewable":"showed"}));case 9:e.next=18;break;case 11:if(f=t?this.multiViewableExposureList:this.multiExposureList,!(p=this.multiShowList.filter((function(e){return!f.has(e)}))).length){e.next=18;break}return p.forEach(f.add,f),o.emitComponentEvent(t?im.ROOT_EVENT.VIEWABLEEXPOSURE:im.ROOT_EVENT.EXPOSURE,{exposureList:p}),e.next=18,this.adProxy.reportExposure(Object.assign(Object.assign({},d),{multiList:p,isMulti:i,exposureType:t?"viewable":"showed"}));case 18:case"end":return e.stop()}}),e,this)})))}},{key:"checkExposure",value:function(){return eI(this,void 0,void 0,Lt.a.mark((function e(){var t,n,r,o,i,a=this;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:if(tI(this.manager)){e.next=8;break}return e.next=5,Object(Ha.timeout)(0);case 5:return e.next=7,this.checkExposure();case 7:return e.abrupt("return");case 8:if(t=this.manager,n=t.rootComponent,r=t.isMulti,o=n.isShow(),i=n.exposureUntilVideoPlay,(r||!this.isExposured&&o)&&(this.isExposured=!0,this.showedExposureTime=Date.now(),this.reportExposure({isViewable:!1})),o&&!this.hasEmitShowHalf?(this.hasEmitShowHalf=!0,n.emitComponentEvent(im.ROOT_EVENT.SHOWHALF),n.emitAdCustomEvent(im.CUSTOM_EVENT.ADSHOWHALF)):o||(this.hasEmitShowHalf=!1,n.emitComponentEvent(im.ROOT_EVENT.HIDEHALF),n.emitAdCustomEvent(im.CUSTOM_EVENT.ADHIDEHALF)),!i){e.next=15;break}return e.abrupt("return");case 15:o?this.exposureTimer=setTimeout((function(){var e=n.isShow();(r||!a.isViewableExposured&&e)&&(a.isViewableExposured=!0,a.adProxy.isViewable=!0,a.reportExposure({isViewable:!0}))}),1e3):this.exposureTimer&&clearTimeout(this.exposureTimer);case 16:case"end":return e.stop()}}),e,this)})))}},{key:"checkVideoViewableExposure",value:function(e){var t=this,n=this.manager,r=n.rootElement,o=n.rootComponent;if(!this.manager.isDestroyed()&&r&&o){var i=o.isShow(),a=o.exposureUntilVideoPlay,s=r.layoutBox,c=s.left,u=s.top,l=s.width,d=s.height;a&&(i&&e?this.exposureTimer=setTimeout((function(){t.isViewableExposured||(t.isViewableExposured=!0,t.adProxy.isViewable=!0,t.adProxy.reportExposure({left:c,top:u,width:l,height:d,exposureType:"viewable"}),o.emitComponentEvent(im.ROOT_EVENT.VIEWABLEEXPOSURE))}),0):this.exposureTimer&&clearTimeout(this.exposureTimer))}}},{key:"reportAntifraud",value:function(e,t){var n;return eI(this,void 0,void 0,Lt.a.mark((function r(){var o,i,a;return Lt.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.manager.ready();case 2:if(tI(this.manager)){r.next=4;break}return r.abrupt("return");case 4:o=this.manager.rootElement.layoutBox,i=o.width,a=o.height,this.adProxy.reportAntifraud({click_button:e,cost_type:(null===(n=this.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,slotid:this.manager.getSlotId(),is_game:Nm.deviceInfo.isWaGame?1:0,pageentertime:+new Date(this.adProxy.getProgramStartTime()),ad_width:i||0,ad_height:a||0,clientexptime:this.showedExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:Math.round(t.absoluteX||0),pos_y:Math.round(t.absoluteY||0),screen_width:Nm.deviceInfo.screenWidth,screen_height:Nm.deviceInfo.screenHeight});case 6:case"end":return r.stop()}}),r,this)})))}},{key:"reportCloseAction",value:function(e){if(!this.manager.isDestroyed()){var t=Date.now();this.adProxy.reportCloseAction({slotid:this.manager.getSlotId(),is_game:Nm.deviceInfo.isWaGame?1:0,costtype:Object(Ha.get)(this.adProxy,["data","is_cpm"])?1:2,close_type:e,exposure_duration:t-this.showedExposureTime-this.hideDuration,start_time:this.showedExposureTime,close_time:t})}}},{key:"reportAdFeedbackData",value:function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;this.manager.isDestroyed()||(n&&!a&&(this.clickFirstGradeTime=Date.now()),this.adProxy.reportAdFeedbackData({adWidth:Nm.deviceInfo.screenWidth,adHeight:Nm.deviceInfo.screenHeight,adPosX:0,adPosY:0,expTime:this.showedExposureTime,firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?this.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?Date.now():0,feedbackReason:l}))}},{key:"reportFollow",value:function(e){var t=this;if(!this.manager.isDestroyed())return e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}))}},{key:"reportVideoPlay",value:function(e,t,n){var r=n.playDuration,o=n.isMuted,i=n.videoDuration;this.adProxy.reportVideo({playType:e,conditionType:t,playDuration:r,videoDuration:i,muted:o})}},{key:"reportEndPage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ace_type,n=e.exposure_duration,r=void 0===n?0:n;this.adProxy.reportEndPage({slotid:this.manager.getSlotId(),costtype:Object(Ha.get)(this.adProxy,["adData","data","is_cpm"])?1:2,posType:this.adProxy.data.pos_type,isGame:Nm.deviceInfo.isWaGame?1:0,ace_type:t,exposure_duration:r})}},{key:"reportTimePoints",value:function(){this.adProxy.reportTimePoints({slotid:this.manager.getSlotId(),costtype:Object(Ha.get)(this.adProxy,["adData","data","is_cpm"])?1:2})}}]),e}(),rI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},oI=function(){function e(t){var n=t.manager,r=t.reporter;Object($.default)(this,e),this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.hideTime=null,this.isLandingPage=!1,this.landingPageCostTime=0,this.downloadState=im.DOWNLOAD_STATE.DEFAULT,this.downloadProgress=0,this.manager=n,this.adProxy=n.adProxy,this.reporter=r}return Object(K.default)(e,[{key:"reset",value:function(){this.lastLandingTime=0,this.lastJsapiName="",this.lastJsapiStatus=0,this.lastJsapiCostTime=0,this.isLandingPage=!1,this.landingPageCostTime=0}},{key:"checkAdState",value:function(){var e;return rI(this,void 0,void 0,Lt.a.mark((function t(){var n;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.manager.isDestroyed()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Object(xb.timeout)(10);case 4:this.isLandingPage&&(this.adProxy.setTimePoint("p11"),this.lastJsapiStatus=0,this.isLandingPage=!1,n=Date.now(),this.landingPageCostTime=this.hideTime?n-this.hideTime:0,this.adProxy.reportLandingTime({slotId:this.manager.getSlotId(),costType:Object(Wa.get)(this.adProxy,["adData","data","is_cpm"])?1:2,openTime:this.hideTime,closeTime:n,stayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName,clickTime:this.lastLandingTime,clkCnt:this.reporter.clickCount,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,actTypeInt:1}),(null===(e=this.manager.rootComponent)||void 0===e?void 0:e.hideAfterLanding)&&this.manager.hide()),this.manager.isShow&&this.manager.setAdTimer();case 6:case"end":return t.stop()}}),t,this)})))}},{key:"checkFollow",value:function(){return rI(this,void 0,void 0,Lt.a.mark((function e(){var t,n,r;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.manager.adData,n=Object(Wa.get)(t,["button_action","text_type"],0),e.next=4,this.adProxy.checkFollow(t.app.uin);case 4:r=e.sent,0===n&&this.manager.updateButtonText({text:r?"查看":t.button_action.button_text}),this.adProxy.data.biz_info&&(this.adProxy.data.biz_info.is_subscribed=r?1:0);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"checkAppInstallState",value:function(){return rI(this,void 0,void 0,Lt.a.mark((function e(){var t,n,r,o,i;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.manager.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return t=this.manager.adData.appInfo,n=t.apkName,r=t.versionCode,o=t.urlScheme,e.prev=3,e.next=6,this.adProxy.getInstallState(n);case 6:(i=e.sent).isInstalled&&(void 0===i.versionCode||i.versionCode>=r)&&(this.downloadState=im.DOWNLOAD_STATE.INSTALLED,this.downloadProgress=0,this.adProxy.setAppInstallState(!0),o&&o.trim().length>0?this.manager.updateButtonText({text:"进入应用"}):this.manager.updateButtonText({text:"查看应用"})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(3);case 12:case"end":return e.stop()}}),e,this,[[3,10]])})))}},{key:"landing",value:function(e){var t=this;if(!this.manager.isDestroyed()){this.reporter.clickCount>1&&this.adProxy.reportRepeatClick({slotId:this.manager.getSlotId(),costType:Object(Wa.get)(this.adProxy,["data","is_cpm"])?1:2,clkCnt:this.reporter.clickCount,lastClkPeriod:Date.now()-this.lastLandingTime,retCode:this.lastJsapiStatus,costTime:this.lastJsapiCostTime,pageStayTime:this.landingPageCostTime,jsapiName:this.lastJsapiName});var n=this.adProxy.land(e),r=Object(Wa.get)(this.adProxy,["data","button_action","text_type"],0);this.adProxy.data.product_type===za.PRODUCT_TYPE.WECHAT&&Object(Wa.get)(e,["isButton"])&&!this.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n,o=/ok/.test(e.errMsg);o&&0===r&&(t.manager.updateButtonText({text:"查看公众号"}),t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),t.adProxy.reportAdIDKey({key:im.IDKEY.FOLLOW_SUCCESS})),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=Date.now();t.lastJsapiStatus=0,t.lastJsapiCostTime=i-t.lastLandingTime,"private_addContact"===t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:t.manager.getSlotId(),costType:(null===(n=t.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:t.lastLandingTime,closeTime:i,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.reporter.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:o?2:3,actTypeStr:o?"关注":"取消"}),t.manager.isShow&&t.manager.setAdTimer()})).catch((function(){t.lastJsapiStatus=1})),this.reporter.reportFollow(n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),["private_openUrl","navigateToMiniProgram","openADCanvas","launchApplication"].includes(t.lastJsapiName)?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=Date.now()-t.lastLandingTime})).catch((function(){t.lastJsapiStatus=1}))}}}]),e}();function iI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return aI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return aI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function aI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var sI=new WeakMap,cI=function(e){return sI.get(e)},uI=function e(t){Object($.default)(this,e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=Object(gt.default)(t,r);sI.set(this,i)};function lI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function dI(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return fI(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fI(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function fI(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pI=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},hI="customAd has been destroyed",vI=1,gI=function(){function e(t){var n=this,r=t.adUnitId,o=t.adIntervals,i=void 0===o?0:o,a=t.left,s=t.top,c=t.width,u=t.height,l=t.fixed,d=t.style;if(Object($.default)(this,e),this.isShow=!1,this.rootElement=null,this.rootComponent=null,this.systemInfo=null,this.adData=null,this.adDatas=[],this.showDetailTime=0,this.callbacks={load:[],error:[],close:[],hide:[]},this.adType="customAd",this.emitter=new jy,this.isReady=!1,this.isDestroy=!1,this.isShowing=!1,this.isHiding=!1,this.fetchedError=null,this.template=null,this.tplConfig=null,this.adTimer=null,this.readyResolve=new Set,this.isMulti=!1,this.handleReady=function(){if(!n.isReady){var e,t=dI(n.readyResolve);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}n.readyResolve.clear(),n.isReady=!0}},this.handleEnterBackground=function(){n.landManager.hideTime=Date.now(),n.clearAdTimer()},this.handleEnterForeground=function(){n.landManager.checkAdState(),n.landManager.hideTime&&(n.reporter.hideDuration+=Date.now()-n.landManager.hideTime)},this.handleAdCustomEvent=function(e){var t;switch(e.action){case im.CUSTOM_EVENT.TRIGGEREVENT:["error","videodislike"].includes(e.value.eventName)&&n.emitter.emit(e.value.eventName,e.value.detail||{});break;case im.CUSTOM_EVENT.SHOWFEEDBACK:null===(t=n.rootComponent)||void 0===t||t.showFeedback();break;case im.CUSTOM_EVENT.FEEDBACKBTNTAP:n.adProxy.openFeedbackUrl(Nc.isWaGame?1003:1005);break;case im.CUSTOM_EVENT.HIDEAD:n.hide();break;case im.CUSTOM_EVENT.REPORTTIMEPOINT:e.value.key&&n.adProxy.setTimePoint(e.value.key);break;case im.CUSTOM_EVENT.ADSHOWHALF:n.isShow=!0;break;case im.CUSTOM_EVENT.ADHIDEHALF:n.isShow=!1;break;case im.CUSTOM_EVENT.CHECKEXPOSURE:n.reporter.checkExposure();break;case im.CUSTOM_EVENT.LANDAD:var r=e.value,o=r.index,i=r.event;if(n.reporter.isClickLimit(i))return;n.isMulti&&n.adProxy.setCurrentData(o),n.reporter.handleClick(i,1,!1)}},this.handleLoad=function(e){return n.emitCallback("load",e)},this.handleError=function(e){return n.emitCallback("error",e)},this.handleClose=function(){return n.emitCallback("close")},this.handleHide=function(){return n.emitCallback("hide")},this.handleVideoDislike=function(){return n.emitCallback("videodislike")},this.onLoad=function(e){return n.callbacks.load.push(e)},this.onError=function(e){return n.callbacks.error.push(e)},this.onClose=function(e){return n.callbacks.close.push(e)},this.onHide=function(e){return n.callbacks.hide.push(e)},this.onVideoDislike=function(e){return n.callbacks.videoDislike.push(e)},this.offLoad=function(e){return n.removeCallback("load",e)},this.offError=function(e){return n.removeCallback("error",e)},this.offClose=function(e){return n.removeCallback("close",e)},this.offHide=function(e){return n.removeCallback("hide",e)},this.offVideoDislike=function(e){return n.removeCallback("videodislike",e)},r||console.error("广告单元 id(unit-id) 为空, 请先在 'https://mp.weixin.qq.com' 上创建广告单元"),this.adUnitId=r,this.slotId="4071202390577885",this.adCustomId="AD_CUSTOM_"+vI,vI+=1,this.adPosition={left:a,top:s,width:c,height:u,fixed:l},d&&"object"===Object(x.default)(d))for(var f=0,p=["left","top","width","height","fixed"];f<p.length;f++){var h=p[f];null!=d[h]&&(this.adPosition[h]=d[h])}Object(Lo.isGame)()&&delete this.adPosition.fixed,this.adProxy=new Mc({adUnitId:r,adType:this.adType}),this.reporter=new nI({manager:this,adProxy:this.adProxy,emitter:this.emitter}),this.landManager=new oI({manager:this,reporter:this.reporter}),this.adIntervals="number"==typeof i?i:0,this.reporter.landManager=this.landManager,this.bindEvent(),this.fetchAndRender()}return Object(K.default)(e,[{key:"getSlotId",value:function(){return this.slotId}},{key:"bindEvent",value:function(){this.emitter.on("load",this.handleLoad),this.emitter.on("error",this.handleError),this.emitter.on("videoDislike",this.handleVideoDislike),this.emitter.on("close",this.handleClose),this.emitter.on("hide",this.handleHide),this.emitter.on("adCustomEvent",this.handleAdCustomEvent),this.onLoad(this.handleReady),this.onError(this.handleReady),Object(xa._onShow)(this.handleEnterForeground),Ba(this.handleEnterBackground)}},{key:"unbindEvent",value:function(){this.emitter.off("load",this.handleLoad),this.emitter.off("error",this.handleError),this.emitter.off("videoDislike",this.handleVideoDislike),this.emitter.off("close",this.handleClose),this.emitter.off("hide",this.handleHide),this.emitter.off("adCustomEvent",this.handleAdCustomEvent),this.offLoad(this.handleReady),this.offError(this.handleReady),Object(xa._offShow)(this.handleEnterForeground),Fa(this.handleEnterBackground)}},{key:"fetchAndRender",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.isAdInterval,o=void 0!==r&&r,i=n.autoUnmount,a=void 0!==i&&i;return pI(this,void 0,void 0,Lt.a.mark((function n(){var r,i,s,c,u,l;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([this.adProxy.fetch(o),this.getSystemInfo(),Object(Nm.deviceReady)()]);case 3:return r=n.sent,i=Object(nt.default)(r,2),s=i[0],c=i[1],a&&this.resetState(),this.systemInfo=c,this.adData=s,this.adDatas=this.adProxy.datas||[],this.template=this.getTemplateFromAdData(s),this.tplConfig=(null===(e=this.template)||void 0===e?void 0:e.tplConfig)||{},this.checkSize(),n.next=16,this.render();case 16:this.adProxy.reportAdMonitorData(im.IDKEY.RENDER_SUCCESS),u={errMsg:"load advertisement success"},(null===(t=this.rootComponent)||void 0===t?void 0:t.exportAid)&&(u.aid=this.adData.aid),this.emitter.emit("load",u),this.fetchedError=null,this.adProxy.preloadLanding(),n.next=30;break;case 24:n.prev=24,n.t0=n.catch(0),this.adProxy.reportAdMonitorData(im.IDKEY.RENDER_FAILED,n.t0),l=(null===n.t0||void 0===n.t0?void 0:n.t0.errCode)?n.t0:{errCode:im.ERROR_CODE.ERR_RENDER,errMsg:"customAd render failed"},this.fetchedError=l,this.emitter.emit("error",l);case 30:case"end":return n.stop()}}),n,this,[[0,24]])})))}},{key:"getTemplateFromAdData",value:function(e){return e.template}},{key:"checkSize",value:function(){if(this.tplConfig){var e=this.tplConfig,t=this.adPosition.width;null==t&&(t=Nc.screenWidth),t=Number(t);var n=e.minWidth||0,r=e.maxWidth||0,o=e.baseWidth||375,i=Math.min(Nc.screenWidth,Math.max(n,t));r&&(i=Math.min(i,r)),0===i&&(this.adProxy.reportAdMonitorData(im.IDKEY.WIDTH_GET_ERROR,{unitId:this.adUnitId}),Bm(o,o)),this.adPosition.width=i,Bm(i,o)}}},{key:"reload",value:function(){}},{key:"updateButtonText",value:function(e){var t,n=e.text,r=e.progress;null===(t=this.rootComponent)||void 0===t||t.emitAdCustomEvent(im.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:n||"",progress:r||0})}},{key:"getSystemInfo",value:function(){return Nc}},{key:"ready",value:function(){var e=this;return new Promise((function(t,n){var r=function(){e.fetchedError?n(e.fetchedError):t()};e.isReady?r():e.readyResolve.add(r)}))}},{key:"removeCallback",value:function(e,t){this.callbacks[e]&&(this.callbacks[e]=t?this.callbacks[e].filter((function(e){return e!==t})):[])}},{key:"emitCallback",value:function(e,t){if(this.callbacks[e]){var n,r=dI(this.callbacks[e]);try{for(r.s();!(n=r.n()).done;){var o=n.value;"function"==typeof o&&o(t)}}catch(e){r.e(e)}finally{r.f()}}}},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.branchId,n=e.branchDim;return pI(this,void 0,void 0,Lt.a.mark((function e(){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}throw{errMsg:hI};case 2:if(!this.isShow&&!this.isShowing){e.next=4;break}throw{errMsg:"the advertisement has shown"};case 4:return this.isShowing=!0,t?this.adProxy.recordAnalyseBranchInfo({branchId:t,branchDim:n}):this.adProxy.resetAnalyseBranchInfo(),e.prev=6,e.next=9,this.ready();case 9:this.rootComponent&&this.rootComponent.show(),this.setAdTimer();case 11:return e.prev=11,this.isShowing=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[6,,11,14]])})))}},{key:"setAdTimer",value:function(){var e,t,n=this;this.rootComponent&&!this.rootComponent.enableTimer||(t=this.adIntervals>=30&&this.adIntervals<=3600?1e3*this.adIntervals:(null===(e=this.adData)||void 0===e?void 0:e.refreshTime)?1e3*this.adData.refreshTime:null)&&(this.adTimer&&clearTimeout(this.adTimer),this.adTimer=setTimeout((function(){return n.refetch(!0)}),t))}},{key:"clearAdTimer",value:function(){this.isDestroyed()||this.adTimer&&(clearTimeout(this.adTimer),this.adTimer=null)}},{key:"refetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return pI(this,void 0,void 0,Lt.a.mark((function t(){var n;return Lt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isDestroyed()&&this.isShow){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,this.fetchAndRender({isAdInterval:e,autoUnmount:!0});case 5:return t.next=7,this.show();case 7:if(this.adProxy.reportAdMonitorData(im.IDKEY.REFETCH_SUCCESS),!this.rootElement){t.next=12;break}return t.next=11,this.rootElement.nextLayout();case 11:this.reporter.checkExposure();case 12:t.next=19;break;case 14:t.prev=14,t.t0=t.catch(2),this.adProxy.reportAdMonitorData(im.IDKEY.REFETCH_FAILED,t.t0),n={errCode:im.ERROR_CODE.ERR_RENDER,errMsg:"customAd render failed"},this.emitter.emit("error",n);case 19:case"end":return t.stop()}}),t,this,[[2,14]])})))}},{key:"hide",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return pI(this,void 0,void 0,Lt.a.mark((function n(){var r;return Lt.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.isDestroyed()){n.next=2;break}throw{errMsg:hI};case 2:if(this.isShow&&!this.isHiding){n.next=4;break}return n.abrupt("return");case 4:if(this.isHiding=!0,null===(e=this.rootComponent)||void 0===e||e.hide(),this.clearAdTimer(),t){n.next=25;break}if(this.isReady=!1,this.emitter.emit("close"),this.resetState(),this.adProxy.setTimePoint("p14"),this.reporter.reportTimePoints(),r=!1,this.rootComponent&&(r=this.rootComponent.getRootData("refetchable")),!r){n.next=21;break}return this.unmount(),n.next=19,this.fetchAndRender();case 19:n.next=23;break;case 21:return n.next=23,this.destroy();case 23:n.next=26;break;case 25:this.emitter.emit("hide");case 26:this.isHiding=!1;case 27:case"end":return n.stop()}}),n,this)})))}},{key:"destroy",value:function(){return pI(this,void 0,void 0,Lt.a.mark((function e(){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return this.isDestroy=!0,e.prev=3,e.next=6,this.ready();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:this.clearAdTimer(),this.unbindEvent(),this.resetState(),this.callbacks={load:[],error:[],close:[]},this.reporter.destroy();case 15:case"end":return e.stop()}}),e,this,[[3,8]])})))}},{key:"isDestroyed",value:function(){return this.isDestroy}},{key:"canHideAd",value:function(){return!!this.rootComponent&&this.rootComponent.getRootData("hidable")}},{key:"resetState",value:function(){this.unmount(),this.rootComponent=null,this.rootElement=null,this.isReady=!1,this.isShow=!1,this.isMulti=!1,this.adData=null,this.adDatas=[],this.reporter.reset(),this.landManager.reset()}},{key:"emitRender",value:function(e){return this.rootComponent?(Object(Wy.updateRender)(this.rootComponent,e),this.rootComponent):Object(Wy.render)(Jm,e)}},{key:"render",value:function(){return this.adProxy.setTimePoint("p4"),this.template?(this.rootComponent=this.emitRender({manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy,template:this.template,systemInfo:this.systemInfo,adData:this.adProxy.data,adDatas:this.adProxy.datas,adCustomId:this.adCustomId,adPosition:this.adPosition,isEmpty:!1}),this.initialMultiLists(),this.rootElement=this.rootComponent.getRootElement(),this.adProxy.reportAdMonitorData(im.IDKEY.TPL_RENDER_SUCCESS),this.adProxy.setTimePoint("p5"),this.rootElement.ready()):this.renderEmpty()}},{key:"initialMultiLists",value:function(){if(this.rootComponent&&(this.isMulti=this.rootComponent.isMulti&&this.adProxy.isMulti,this.isMulti)){var e=this.rootComponent.multiShowList;e&&Array.isArray(e)?this.reporter.setMultiShowList(e):this.reporter.setMultiShowList(Object.keys(this.adDatas).map((function(e){return+e})))}}},{key:"unmount",value:function(){this.rootComponent&&(Object(Wy.unmount)(this.rootComponent),this.rootElement=null,this.rootComponent=null)}},{key:"renderEmpty",value:function(){return this.rootComponent=this.emitRender({isEmpty:!0,manager:this,reporter:this.reporter,emitter:this.emitter,adProxy:this.adProxy}),this.rootElement=this.rootComponent.getRootElement(),Wy.Layout.nextLayout()}}]),e}(),_I=function(e){return cI(e)},bI=function(e){Object(G.default)(n,e);var t=lI(n);function n(e){var r;return Object($.default)(this,n),(r=t.call(this,gI,e)).isDestroy=!1,r}return Object(K.default)(n,[{key:"destroy",value:function(){return pI(this,void 0,void 0,Lt.a.mark((function e(){return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isDestroy){e.next=5;break}return e.next=3,_I(this).destroy();case 3:t=this,sI.delete(t),this.isDestroy=!0;case 5:case"end":return e.stop()}var t}),e,this)})))}},{key:"hide",value:function(){return pI(this,void 0,void 0,Lt.a.mark((function e(){var t;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=_I(this)).canHideAd()){e.next=6;break}return e.next=4,t.hide(!0);case 4:e.next=7;break;case 6:throw{errMsg:"the advertisement don't support hide"};case 7:case"end":return e.stop()}}),e,this)})))}},{key:"isShow",value:function(){return _I(this).isShow}}]),n}(uI);!function(e,t){var n,r=iI(t);try{var o=function(){var t=n.value;e.prototype[t]=function(){var e;return(e=cI(this))[t].apply(e,arguments)}};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}(bI,["show","isDestroyed","onLoad","onError","onClose","onHide","offLoad","offError","offClose","offHide"]);function yI(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var mI=n(77),wI=0,OI=0,SI=ee.PLATFORM,II=ee.IS_IOS,EI=(ee.IS_ANDROID,{}),CI=[],TI=!0,kI=7070083760581921;At.default.onReady((function(){var e=Object(ea.getInitScreenSize)();if(wI=e.screenWidth,OI=e.screenHeight,TI=Object(Lo.isGame)()){var t=n(190).default;t.onTouchStart((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&((EI={}).touchStartPosX=Math.round(e.changedTouches[0].clientX),EI.touchStartPosY=Math.round(e.changedTouches[0].clientY),EI.touchEndPosX=0,EI.touchEndPosY=0,EI.touchStartTime=+new Date,EI.touchInterval=0)})),t.onTouchEnd((function(e){e&&e.changedTouches&&e.changedTouches.length>0&&(EI.touchEndPosX=Math.round(e.changedTouches[0].clientX),EI.touchEndPosY=Math.round(e.changedTouches[0].clientY),EI.touchInterval=+new Date-EI.touchStartTime,CI.length>=10&&CI.shift(),CI.push(EI))}))}}));var AI=5,PI=8,DI=function(e){var t=this;return FI.call(this).then((function(){var n=Object(Rb.getPrivateThis)(t),r=n.container.layoutBox,o=r.left,i=r.top,a=(r.width,r.height,{slotid:kI,ScreenHeight:OI,ScreenWidth:wI,PageY:i,PageX:o,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,TimeMs:+new Date});return e=Object.assign({},a,e),n.adProxy.reportAbnormalDetect(e)}))},jI=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Rb.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),o=r?0:1;return t&&VI.call(this,e,o),r},xI=function(e){var t=Object(Rb.getPrivateThis)(this),n=t.container.layoutBox,r=n.left,o=n.top,i=n.width,a=n.height,s=!1,c=0;t.adProxy.isValidCondition("widget_gray_time_limit")&&(c=100*(t.data.condition.widget_gray_time_limit||1)),c>0&&+new Date-t.showedExposureTime<c&&(s=!0,t.adProxy.reportAdMonitorData(48,{slotid:kI}));var u=0;return t.adProxy.isValidCondition("widget_gray_bd_limit")&&(u=t.data.condition.widget_gray_bd_limit||10),e&&u>0&&(e.absoluteEndX-r<u||r+i-e.absoluteEndX<u||e.absoluteEndY-o<u||o+a-e.absoluteEndY<u)&&(s=!0,t.adProxy.reportAdMonitorData(47,{slotid:kI})),s},RI=function(e,t,n){for(var r=Object(Rb.getPrivateThis)(this),o=0;o<r.gridCount;o++)"item"===e?r["gridItem"+o].style[t]=n:"icon"===e?r["gridItemIcon"+o].style[t]=n:"name"===e&&(r["gridItemName"+o].style[t]=n)},MI=function(){var e=Object(Rb.getPrivateThis)(this);return Promise.resolve().then((function(){e.animateDoms.forEach((function(t){e[t].animate({scaleWidth:1,scaleHeight:1,duration:400}).catch((function(n){e[t].style.scaleWidth=1,e[t].style.scaleHeight=1}))}))}))},NI=function(e,t){var n=this;return function(r){var o=Object(Rb.getPrivateThis)(n);if(o.adProxy.setCurrentData(e),jI.call(n,r)&&!xI.call(n,r)){var i=o.adProxy.data,a=i.product_type,s=i.dest_type;II&&46===a&&6===s?Promise.race([HI.call(n,r,e,t),Object(xb.timeout)(500)]).then((function(){JI.call(n)})).catch((function(){JI.call(n)})):(HI.call(n,r,e,t),JI.call(n))}}},LI=function(){var e=this,t=Object(Rb.getPrivateThis)(this),n=KI.call(this),r=(n.outer,n.inner,n.scale),o=t.datas.map((function(e,t){var n=e.weapp_info||{};return{name:Object(Ha.truncate)(n.nick_name,10),url:n.head_img||""}})),i=function(e,t){var n={container:{position:"absolute",overflow:"hidden",borderRadius:8,hidden:!0},topContainer:{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",height:24,paddingLeft:12,paddingRight:12,paddingTop:8},gridTitle1:{width:36,height:16,lineHeight:16,fontSize:12},gridTitle2:{width:24,height:16,lineHeight:16,fontSize:12},gridTitleSplitLine:{width:2,height:16,lineHeight:16,fontSize:10,textAlign:"center",paddingRight:8,paddingLeft:8},gridContentContainerMask:{position:"absolute",top:0,left:0,right:0,bottom:0},gridFeedbackIconWarp:{display:"flex",height:8,width:16,flexDirection:"row",justifyContent:"center",alignItems:"center"},gridFeedbackIcon:{width:10,height:6},gridFeedbackArea:{display:"flex",height:16,width:50,flexDirection:"row",justifyContent:"start",alignItems:"center"},adFeedbackList:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adAffectBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{width:104,height:86,hidden:!0,left:10,top:28,paddingLeft:6,paddingRight:6,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff",flexDirection:"column",alignItems:"center",justifyContent:"center"},adQualityBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:104,height:28,lineHeight:28,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike0:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:92,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:92,height:1,backgroundColor:"#E0E0E0"}},r=[],o=[],i=[],a=function(t,a){r.push('<view id="grid-item'+t+'">\n        <image src="'+a.url+'" id="grid-item-icon'+t+'"></image>\n        <text id="grid-item-name'+t+'" value="'+a.name+'"></text>\n      </view>'),i.push("gridItem"+t),i.push("gridItemIcon"+t),i.push("gridItemName"+t),o.push("gridItem"+t),o.push("gridItemIcon"+t),o.push("gridItemName"+t),n["gridItem"+t]={display:"flex",flexDirection:"column",alignItems:"center",width:5===e?60:70},n["gridItemIcon"+t]={width:48,height:48,borderRadius:6},n["gridItemName"+t]={marginTop:5===e?8:6,fontSize:5===e?12:14,lineHeight:5===e?16:18,height:5===e?16:18,width:5===e?60:70,textAlign:"center",overflow:"hidden"}};if(r.push('<view id="container" click-state="false">'),r.push('<view id="grid-content-container-mask"></view>'),r.push('<view id="top-container" bubble-event="true">\n                      <text id="grid-title1" value="小游戏"></text>\n                      <text id="grid-title-split-line" value="|"></view>\n                      <view id="grid-feedback-area">\n                        <text id="grid-title2" value="广告" bubble-event="true"></text>\n                        <view id="grid-feedback-icon-warp" bubble-event="true">\n                          <image id="grid-feedback-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon.png"></image>\n                        </view>\n                      </view>\n                    </view>'),o.push("topContainer"),o.push("gridTitle1"),o.push("gridTitle2"),o.push("gridTitleSplitLine"),o.push("gridFeedbackIconWarp"),o.push("gridFeedbackArea"),o=[].concat(Object(Y.default)(o),["adFeedbackMenu","adDislikeBtn","adFeedbackBtn","adAffectBtn","adFeedbackList","adDismatchBtn","adDuplicateBtn","adQualityBtn"]),5===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingTop:12,paddingLeft:10.5,paddingRight:10.5,paddingBottom:12},o.push("gridContentContainer");for(var s=0;s<e;s++)a(s,t[s]);r.push("</view>")}else if(8===e){r.push('<view id="grid-content-container">'),n.gridContentContainer={position:"relative",paddingTop:16,paddingLeft:14,paddingRight:14,paddingBottom:16};for(var c=0;c<2;c++){r.push('<view id="grid-count8-line'+c+'">'),n["gridCount8Line"+c]={display:"flex",flexDirection:"row",justifyContent:"space-between"};for(var u=0;u<4;u++){var l=4*c+u;a(l,t[l])}r.push("</view>")}n.gridCount8Line0.marginBottom=16,o.push("gridCount8Line0"),r.push("</view>")}return r.push('\n     <view id="ad-feedback-list">\n      <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n      <view id="ad-close-btn-line-dislike0"></view>\n      <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n      <view id="ad-close-btn-line-dislike1"></view>\n      <text id="ad-affect-btn" click-state="true" value="影响操作"></text>\n    </view>\n    <view id="ad-feedback-menu">\n      <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n      <view id="ad-close-btn-line-dislike2"></view>\n      <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n      <view id="ad-close-btn-line-dislike3"></view>\n      <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n    </view>\n  '),r.push("</view>"),{template:r.join(""),style:n,scaleDoms:o,animateDoms:i}}(t.gridCount,o),a=i.template,s=i.style,c=i.scaleDoms,u=i.animateDoms,l=mI(a).root;Mb.call(this,l,s),"white"===this.adTheme?(t.gridContentContainerMask.style.backgroundColor="#ffffff",t.gridTitle1.style.color="#7F7F7F",t.gridTitle2.style.color="#7F7F7F",t.gridTitleSplitLine.style.color="#7F7F7F",RI.call(this,"name","color","#191919")):"black"===this.adTheme&&(t.gridContentContainerMask.style.backgroundColor="#1A1A1A",t.gridTitle1.style.color="#8c8c8c",t.gridTitle2.style.color="#8c8c8c",t.gridTitleSplitLine.style.color="#8c8c8c",t.gridFeedbackIcon.src="https://wxa.wxs.qq.com/images/wxapp/grid_feedback_icon_white.png",RI.call(this,"name","color","#FFFFFF")),t.scaleDoms=c,t.scaleDoms.forEach((function(e){t[e].style.scale=r})),t.animateDoms=u,t.animateDoms.forEach((function(e){t[e].style.scaleWidth=.7,t[e].style.scaleHeight=.7})),t.container.on("click",(function(e){}));for(var d=0;d<t.gridCount;d++)t["gridItemIcon"+d]&&t["gridItemIcon"+d].on("click",NI.call(this,d,"icon")),t["gridItemName"+d]&&t["gridItemName"+d].on("click",NI.call(this,d,"name"));t.gridFeedbackArea.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||qI.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"})))})),t.adFeedbackBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adProxy.openFeedbackUrl(TI?1007:1006),t.adFeedbackList.style.hidden=!0,qI.call(e,{secondGradeId:1,secondGradeDesc:"投诉"})))})),t.adDislikeBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,qI.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"})))})),t.adQualityBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,qI.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),zI.call(e)))})),t.adDuplicateBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,qI.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),zI.call(e)))})),t.adDismatchBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackMenu.style.hidden=!0,qI.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),zI.call(e)))})),t.adAffectBtn.on("click",(function(n){jI.call(e,n,!1)&&(xI.call(e,n)||(t.adFeedbackList.style.hidden=!0,qI.call(e,{secondGradeId:3,secondGradeDesc:"影响操作"}),zI.call(e)))})),t.container||t.adProxy.reportAdMonitorData(92),t.adProxy.setSlotData({gridScale:r})},BI=function(){var e=this,t=Object(Rb.getPrivateThis)(this);try{var n=this.style,r=n.left,o=n.top,i=KI.call(this),a=(i.outer,i.inner);i.scale,t.data.type;LI.call(this),t.adProxy.preloadLanding(),t.container.style.left=r,t.container.style.top=o,t.container.style.width=a.width,t.container.style.height=a.height,WI.call(this),Eb.webviewLayout.add(t.container),t.emitter.emit("load"),t.container.ready().then((function(){Object(xb.log)("container 及其子元素 ready"),t.emitter.emit("ready")})).then((function(){DI.call(e,{type:1})}))}catch(e){return t.adProxy.reportAdMonitorData(91,e),Promise.reject({})}},FI=function e(t){var n=this;if(!t||"function"!=typeof t)return new Promise((function(t){return e.call(n,t)}));var r=Object(Rb.getPrivateThis)(this);r.isReady?t():r.emitter.on("ready",t)},WI=function(){var e=Object(Rb.getPrivateThis)(this),t=this.style.opacity;.5<=t&&t<=1?(this.style.opacity=t,e.gridContentContainerMask.style.opacity=t,e.gridFeedbackIcon.style.opacity=t):this.style.opacity=1},UI=function(){Object(xb.log)("开始 update UI");var e=Object(Rb.getPrivateThis)(this),t=this.style,n=t.left,r=t.top,o=KI.call(this),i=o.inner,a=o.scale,s=e.data;s.type,s.crt_size,s.product_type,s.use_style_data;return Object(xb.log)(this.style.width,this.style.height),Object(xb.log)("update UI",i),Object.assign(e.container.style,i,{left:n,top:r}),e.scaleDoms.forEach((function(t){e[t].style.scale=a})),WI.call(this),e.container.nextUpdate().then((function(){return Object(xb.log)("updateUI 完成"),Promise.resolve()}))},VI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Object(Rb.getPrivateThis)(this);if(!tE.call(this)&&n.container&&n.container.layoutBox){var r=n.container.layoutBox,o=r.width,i=r.height,a=0;[0,2,3].includes(t)&&(n.clickCount++,a=n.clickCount);var s={slotid:kI,costtype:n.adProxy.data&&n.adProxy.data.is_cpm?1:2,click_time:+new Date,click_cnt:a,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(o,10)||0,ad_height:parseInt(i,10)||0,press_interval:e.pressInterval,block_click:t};return n.adProxy.reportTouchClick(s)}},GI=function(e){var t=0,n=0,r=Object(Rb.getPrivateThis)(this).adProxy.slotData;try{if(5===r.gridCount)t=Math.round((61*e+40.5)*r.gridScale),n=Math.round(60*r.gridScale);else if(8===r.gridCount){var o=Math.floor(e/4),i=e%4;t=Math.round((77*i+44)*r.gridScale),n=Math.round((64+88*o)*r.gridScale)}}catch(e){}return{x:t,y:n}},HI=function(e,t,n){var r=Object(Rb.getPrivateThis)(this);if(!tE.call(this)&&r.container&&r.container.layoutBox){var o=r.container.layoutBox,i=o.left,a=o.top,s=o.width,c=o.height,u=GI.call(this,t),l=r.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-i,clickRelativeTop:e.absoluteY-a,pressInterval:e.pressInterval,left:i,top:a,width:s,height:c,clickAdIndex:t,clickAdPos:n,weappExtraData:{box_center_x:u.x,box_center_y:u.y,box_aid_list:r.adProxy.datas.map((function(e){return e.aid})),click_pos:n}});return Object(xb.logReport)(l,"grid","点击"),QI.call(this,{stage:1002}),CI=CI.map((function(e){return"["+[e.touchStartPosX,e.touchStartPosY,e.touchEndPosX,e.touchEndPosY,e.touchStartTime,e.touchInterval].join(",")+"]"})),r.adProxy.reportBannerLastClick({lastClickArr:"["+CI.join(",")+"]",expMs:r.showedExposureTime,clickMs:+new Date,bannerClkScreenX:e.absoluteX,bannerClkScreenY:e.absoluteY,left:i,top:a,width:s,height:c}),CI=[],l}},zI=function(){this.hide(),_private.emitter.emit("close")},qI=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!tE.call(this)){var d=Object(Rb.getPrivateThis)(this),f=d.container.layoutBox;f.left,f.top,f.width,f.height;n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:wI,adHeight:OI,adPosX:0,adPosY:0,expTime:d.showedExposureTime,slotId:kI,firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})}},YI=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Rb.getPrivateThis)(this);if(Object(xb.log)("检查曝光"),tE.call(this))return Object(xb.log)("已经销毁, 不再曝光"),Promise.resolve();if(!r.container.layoutBox)return Object(xb.log)("还没经过布局, 下一个 loop 再做"),Object(xb.timeout)(0).then((function(){return e.call(t,n)}));var o=r.container.layoutBox,i=o.left,a=o.top,s=o.width,c=o.height;if(a>OI-1)return Promise.resolve();var u=!1===r.container.style.hidden;if(r.adProxy.isViewable=!!u,!r.isShowedExposureReported&&u){Object(xb.log)("原始曝光"),r.isShowedExposureReported=!0,r.showedExposureTime=+new Date;var l=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"showed"});Object(xb.logReport)(l,"banner","原始"),MI.call(this)}if(a+c/2<=OI&&!r.isViewableExposureReported&&u){if(!n)return Object(xb.log)("可视曝光第 1 阶段, 需要 1 秒以后再次检验"),Object(xb.timeout)(1e3).then((function(){return e.call(t,!0)}));Object(xb.log)("可视曝光第 2 阶段"),r.isViewableExposureReported=!0;var d=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,isMulti:!0,multiList:Object.keys(r.datas).map((function(e){return+e})),exposureType:"viewable"});Object(xb.logReport)(d,"banner","可视")}return Promise.resolve()},KI=function(){var e,t,n=Object(Rb.getPrivateThis)(this);n.gridCount===AI?t=(e=Math.min(345,wI))/345*120:n.gridCount===PI&&(t=(e=Math.min(343,wI))/343*216);var r=this.style,o=r.width,i=r.height;o=o||e,i=i||t;var a=Object(xb.contain)({outer:{width:o,height:i},inner:{width:e,height:t},minScale:.8,maxScale:wI/e,side:"width"}),s=n.lastRealWidth!==a.inner.width||n.lastRealHeight!==a.inner.height;return this.style.realWidth=n.lastRealWidth=a.inner.width,this.style.realHeight=n.lastRealHeight=a.inner.height,s&&n.emitter.emit("resize",a.inner),a},JI=function(e){var t=Object(Rb.getPrivateThis)(this);t.landingCount++,t.landingCount>1&&t.adProxy.reportRepeatClick({slotId:kI,costType:t.adProxy.data&&t.adProxy.data.is_cpm?1:2,clkCnt:t.landingCount,lastClkPeriod:+new Date-t.lastLandingTime,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,pageStayTime:t.landingPageCostTime,jsapiName:t.lastJsapiName}),t.lastLandingTime=+new Date,t.lastJsapiStatus=2,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.adProxy.land(e).then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"==t.lastJsapiName||"navigateToMiniProgram"==t.lastJsapiName||"openADCanvas"==t.lastJsapiName||"launchApplication"==t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1}))},XI=function(e){var t=this;if(!tE.call(this)){var n=Object(Rb.getPrivateThis)(this);n.isClosed||n.adProxy.fetch(e).then((function(e){return n.datas=e,n.data=n.adProxy.data,FI.call(t).then((function(){n.container.style.hidden=!0})).then((function(){return n.isReady=!1,Eb.webviewLayout.remove(n.container)})).then((function(){return n.isViewableExposureReported=!1,n.isShowedExposureReported=!1,n.showedExposureTime=0,n.adProxy.isViewable=!1,BI.call(t),FI.call(t)})).then((function(){return tE.call(t)?FI.call(t):n.isHideBYCover?(n.lastDisplayAction="show",FI.call(t)):(n.isShow=!0,QI.call(t,{stage:1001}),Promise.resolve().then((function(){n.container.style.hidden=!1,n.container.nextLayout((function(){return YI.call(t)})),$I.call(t)})))})).catch((function(e){return n.emitter.emit("_error",e)}))})).catch((function(e){return n.emitter.emit("_error",e)}))}},$I=function(){var e=this,t=Object(Rb.getPrivateThis)(this);if(t.adIntervals>=30&&t.adIntervals<=3600){t.adTimer&&clearTimeout(t.adTimer);var n=1e3*t.adIntervals;t.adTimer=setTimeout((function(){return XI.call(e,!0)}),n)}},ZI=function(){if(!tE.call(this)){var e=Object(Rb.getPrivateThis)(this);e.adTimer&&(clearTimeout(e.adTimer),e.adTimer=null)}},QI=function(e){var t={adtype:4,stage:e.stage};Object(Rb.getPrivateThis)(this).adProxy.reportADFunnelModel(t)},eE=function(){var e=this;if(!tE.call(this)){var t=Object(Rb.getPrivateThis)(this);Object(xb.log)("destroy 调用"),ZI.call(this),this._destroyed=!0,DI.call(this,{type:2}),FI.call(this).then((function(){return t.updateResult})).then((function(){Object(xb.log)("UI update 完成, 正式开始 destroy"),Object(xa._offShow)(t.checkAdState),Fa(t.onHide),t.emitter.off("resize"),t.emitter.off("_error"),t.emitter.off("load"),Eb.webviewLayout.remove(t.container),Object(Rb.removePrivateThis)(e)}))}},tE=function(){return this._destroyed},nE="grid-ad has been destroyed",rE=(Rb.Component,n(88)),oE=n(132),iE=n(89),aE={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},sE=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),cE={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'};function uE(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}function lE(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return dE(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dE(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function dE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fE,pE=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},hE=function(){return xb.logReport.apply(void 0,arguments)},vE=Va()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n').root,gE=0,_E=0,bE=0,yE=0,mE=0,wE=0,OE=0,SE=!1,IE=!1,EE=!1,CE="",TE="",kE="",AE="",PE=za.WX_AD_PATH+"/adinfos.txt",DE=ee.IS_ANDROID?200:400,jE=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(Rb.getPrivateThis)(this),r=n.adProxy.isTriggerClick(e),o=r?0:1;return t&&xE.call(this,e,o),r},xE=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=Object(Rb.getPrivateThis)(this);if(r.container&&r.container.layoutBox){var o=r.container.layoutBox,i=o.width,a=o.height,s=0;[0,2,3].includes(n)&&(r.clickCount+=1,s=r.clickCount);var c={slotid:za.POS_ID_MAP[r.adType],costtype:(null===(t=r.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:Date.now(),click_cnt:s,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(a,10)||0,press_interval:e.pressInterval,block_click:n};return r.adProxy.reportTouchClick(c)}},RE=function(){var e=Object(Rb.getPrivateThis)(this),t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},ME=function(e,t){var n,r=Object(Rb.getPrivateThis)(this),o=r.container.style,i=o.width,a=o.height,s={click_button:e,cost_type:(null===(n=r.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,slotid:za.POS_ID_MAP[r.adType],is_game:SE?1:0,pageentertime:+new Date(r.adProxy.getProgramStartTime()),ad_width:parseInt(i,10)||0,ad_height:parseInt(a,10)||0,clientexptime:r.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:gE,screen_height:_E};return r.adProxy.reportAntifraud(s)},NE=function(e){var t=Object(Rb.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));hE(n,"splashAd","关注")},LE=function(e){var t,n=Object(Rb.getPrivateThis)(this),r=+new Date,o={slotid:za.POS_ID_MAP[n.adType],is_game:SE?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,close_type:e,exposure_duration:r-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:r};return n.adProxy.reportCloseAction(o)},BE=function(e){var t,n=Object(Rb.getPrivateThis)(this),r={slotid:za.POS_ID_MAP[n.adType],is_game:SE?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(r)},FE=function(e){var t=e.firstGradeId,n=void 0===t?1:t,r=e.firstGradeDesc,o=void 0===r?"广告角标":r,i=e.secondGradeId,a=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=Object(Rb.getPrivateThis)(this);n&&!a&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:gE,adHeight:_E,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:za.POS_ID_MAP[d.adType],firstGradeId:n,firstGradeDesc:o,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:a,secondGradeDesc:c,secondGradeTime:a?+new Date:0,feedbackReason:l})},WE=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=Object(Rb.getPrivateThis)(this);if(r.isShowed){if(!r.data||!r.container.layoutBox)return Object(xb.timeout)(100).then((function(){return e.call(t,n)}));var o=r.container.layoutBox,i=o.left,a=o.top,s=o.width,c=o.height;if(!r.isShowedExposureReported){r.isShowedExposureReported=!0,r.startExposureTime=+new Date,r.adProxy.setTimePoint("p6");var u=At.default.onReady((function(){r.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"showed",source:r.source});var e="launch"===r.source?za.SPLASHAD_IDKEY.firstShowSuccess:za.SPLASHAD_IDKEY.secondShowSuccess;r.adProxy.reportAdMonitorData(e)}));hE(u,"splashAd","原始")}if(!r.isViewableExposureReported){if(!n)return Object(xb.timeout)(1e3).then((function(){return e.call(t,!0)}));r.adProxy.setTimePoint("p7"),r.isViewableExposureReported=!0,r.adProxy.isViewable=!0;var l=r.adProxy.reportExposure({left:i,top:a,width:s,height:c,exposureType:"viewable",source:r.source});hE(l,"splashAd","可视")}}},UE=function(e){var t=Object(Rb.getPrivateThis)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,r=n.left,o=n.top,i=n.width,a=n.height,s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-r,clickRelativeTop:e.absoluteY-o,pressInterval:e.pressInterval,left:r,top:o,width:i,height:a,source:t.source});return hE(s,"splashAd","点击"),s}},VE=function(e,t){var n=this,r=Object(Rb.getPrivateThis)(this),o=r.data,i=o.appInfo,a=i.apkName,s=i.channelId,c=i.urlScheme,u=o.product_type,l=o.dest_type;if(12===u&&ee.IS_ANDROID&&4===r.androidAppState&&c&&c.trim().length>0)UE.call(this,e),ME.call(this,t,e),r.adProxy.launchApplication(c).catch((function(){})),r.lastJsapiName="launchApplication",r.isLandingPage=!0;else if(12===u&&ee.IS_ANDROID&&r.isYYBInstalled){UE.call(this,e),ME.call(this,t,e);var d=r.adProxy.data,f=d.aid,p=d.traceid,h=d.apurl,v=["ANDROIDWX.YYB.WX.ADVERTISE",p,f,a.replace(/\./g,"_"),"0",15,h.indexOf("ad.wx.com")>-1?1:0].join("."),g="tmast://download?oplist=1,2&pname="+a+"&channelid="+s+"&via="+v;r.adProxy.launchApplication(g).catch((function(){GE.call(n)})),r.lastJsapiName="launchApplication",r.isLandingPage=!0}else ee.IS_IOS&&46===u&&6===l?Promise.race([UE.call(this,e),Object(xb.timeout)(500)]).then((function(){ME.call(n,t,e),GE.call(n)})).catch((function(){ME.call(n,t,e),GE.call(n)})):(UE.call(this,e),ME.call(this,t,e),GE.call(this))},GE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Rb.getPrivateThis)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n,r=/ok/.test(e.errMsg);r&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var o=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=o-t.lastLandingTime,"private_addContact"===t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:za.POS_ID_MAP[t.adType],costType:(null===(n=t.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:t.lastLandingTime,closeTime:o,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"})})).catch((function(){t.lastJsapiStatus=1})),NE.call(this,n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.landingPageFail,{source:t.source,msg:e})})),n},HE=function(e){var t,n=Object(Rb.getPrivateThis)(this),r=lE(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o]&&clearTimeout(n[o])}}catch(e){r.e(e)}finally{r.f()}},zE=function(){var e,t=Object(Rb.getPrivateThis)(this);t.eventsMap={},(null===(e=t.appInfo)||void 0===e?void 0:e.style)&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",HE.call(this,["countTimer"]),At.default.onReady((function(){var e,n,r;t.adProxy.reportTimePoints({slotid:za.POS_ID_MAP[t.adType],costtype:(null===(e=t.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(r=t.showInfo)||void 0===r?void 0:r.scene,extInfo:{adInfos:t.adInfos}})}))},qE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t&&LE.call(this,t),Object(Ga.closeSplashAd)(e)},YE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(Rb.getPrivateThis)(this);return t.adProxy.fetch(!1,e).catch((function(){}))},KE=function(){var e=Object(Rb.getPrivateThis)(this);if((ee.IS_ANDROID||ee.IS_IOS)&&!EE)try{e.adFetchResult=YE.call(this),e.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.OTHER_ADS_EMIT_FETCH)}catch(e){}},JE=function(){var e,t=Object(Rb.getPrivateThis)(this).data||{},n={};if(null===(e=t.crtInfo)||void 0===e?void 0:e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){var r=t.crtInfo?t.crtInfo[0]:{};n=(null==r?void 0:r.card_info)?r.card_info:{}}return n},XE=function e(){var t=this,n=Object(Rb.getPrivateThis)(this),r=5e3-(+new Date-n.startExposureTime-n.hideDuration);if(r>=0){var o=Math.ceil(r/1e3).toString();n.countDown&&(n.countDown.value=o),n.tplComponent&&n.tplComponent.emitAdCustomEvent(rE.CUSTOM_EVENT.CHANGECOUNTDOWN,{value:o}),n.countTimer&&clearTimeout(n.countTimer),n.countTimer=setTimeout((function(){e.call(t)}),1e3)}else"launch"===n.source&&n.isShowedExposureReported&&(n.isDynamic&&n.tplComponent.hide(),qE.call(this,{source:n.source,animated:!0},12))},$E=function(){var e,t=Object(Rb.getPrivateThis)(this);if("launch"===t.source)t.topBar&&yE&&(t.topBar.style.top=yE,t.adFeedbackMenu.style.top=yE+34,t.adFeedbackList.style.top=yE+34),t.closeContainer&&(t.closeContainer.style.marginTop=mE-68),t.appInfo&&(t.appInfo.style.height=wE,t.appInfo.style.width=gE,t.isDarkMode&&(t.appInfo.style.backgroundColor="#191919",t.container.style.backgroundColor="#191919")),t.appIcon&&(t.appIcon.src=t.showInfo.appIcon,t.appIcon.style.marginTop=SE?16:28),t.appName&&(t.appName.value=t.showInfo.appName,t.appName.style.width=gE,t.appName.style.color=t.isDarkMode?"#ffffff":"#000000"),t.tipsContainer&&(t.tipsContainer.style.height=32,t.tipsContainer.style.width=gE,t.tipsLineOne.style.width=gE,t.tipsLineOne.style.color=t.isDarkMode?"#ffffff":"#000000",t.tipsLineTwo.style.color=t.isDarkMode?"#ffffff":"#000000"),t.adCloseTips&&(t.adCloseTips.style.height=_E-wE,t.adCloseTips.style.width=gE);else if("menu"===t.source){if(!t.data)return;var n=t.data,r=JE.call(this),o=Object(ea.getSystemInfoSync)();t.adIcon.src=r.thumb,t.adName.value=r.title,(null===(e=n.button_action)||void 0===e?void 0:e.button_text)&&(t.button.value=n.button_action.button_text),o.screenTop&&o.screenTop>0?bE=o.screenTop:bE&&0!==bE||(bE=88*_E/812),t.navigator.style.height=bE,t.navigator.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.width=gE,t.card.style.height=wE-bE,t.adName.style.color=t.isDarkMode?"#ffffff":"#000000",t.adWording.style.color=t.isDarkMode?"#ffffff":"#000000",t.mediaBottom&&(t.mediaBottom.style.marginTop=mE-12,t.mediaBottom.style.width=gE,t.mediaBottom.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff")}if("landscape"===t.crtOrientation){var i=t.data||{},a=JE.call(this);if(a&&t.adHeadInfo&&(t.adHeadIcon.src=a.thumb||"",t.adversName.value=a.title||"",t.adHeadInfo.style.width=gE/375*311,t.adversName.style.width=gE/375*311),i.hint_txt&&t.adTitle&&i.crt_size!==za.CRT_SIZE.CRT_SIZE_BIG_PIC?(t.adTitle.value=i.hint_txt,t.adTitle.style.width=gE/375*311):a.description&&t.adTitle?(t.adTitle.value=a.description,t.adTitle.style.width=gE/375*311):t.adTitle&&i.product_type&&za.BIG_PIC_TITLE_MAP[i.product_type]&&(t.adTitle.value="今日"+za.BIG_PIC_TITLE_MAP[i.product_type]+"推荐",t.adTitle.style.width=gE/375*311),i.button_action&&t.adButtonContainer){t.adButton.value=i.button_action.button_text,t.adButtonContainer.style.width=gE,t.closeContainer&&(t.closeContainer.style.marginTop=mE-132);var s={text:i.button_action.button_text,fontSize:17},c=Object(Ha.measureText)(s)||80;t.adButton.style.width=c+8,t.adButton.style.width+12>100&&(t.adButton.style.width=t.adButton.style.width+12)}}},ZE=function(e){var t=Object(Rb.getPrivateThis)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||rC.call(this),!t.dynamicElems.root){var n=t.data.adDynamicList,r=eC.call(this,{tpl:n,source:e}),o=r.getRootElement();t.dynamicElems.root=o,t.container.add(t.dynamicElems.root),r.show(),t.tplComponent=r,t.tplComponent.emitComponentEvent(oE.ROOT_EVENT.SPLASHADFIRSTRENDER)}},QE=function(){var e="",t=Object(Rb.getPrivateThis)(this).adProxy.data,n=JE.call(this);return t.hint_txt&&t.crt_size!==za.CRT_SIZE.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&za.BIG_PIC_TITLE_MAP[t.product_type]&&(e="今日"+za.BIG_PIC_TITLE_MAP[t.product_type]+"推荐"),e},eC=function(e){var t=e.tpl,n=e.source,r=Object(Rb.getPrivateThis)(this),o=r.adProxy.data,i=QE.call(this),a=JE.call(this);return Object(Wy.render)(gm,{manager:null,reporter:null,emitter:r.dynamicEmitter,adProxy:r.adProxy,template:t,systemInfo:{screenWidth:gE,screenHeight:_E},adData:o,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:yE||40,source:n,screenTop:bE||88*_E/812,isDarkMode:r.isDarkMode,adTitle:i||"",cardInfo:a,materialFile:CE,materialBgFile:kE,materialBlurFile:AE,private:r,appIcon:r.showInfo.appIcon,appName:r.showInfo.appName}},!1)},tC=function(e){var t=Object(Rb.getPrivateThis)(this);jE.call(this,e,!1)&&(RE.call(this)||"launch"===t.source&&qE.call(this,{source:t.source,animated:!0},11))},nC=function(e){var t=this,n=Object(Rb.getPrivateThis)(this);switch(e.action){case rE.CUSTOM_EVENT.LANDAD:var r=e.value,o=r.event,i=r.index;if(!jE.call(this,o,13===i))return;13===i&&VE.call(this,o,i),qE.call(this,{source:n.source,animated:!1},i),16===i&&(n.isLandingPage=!0,Object(xb.timeout)(DE).then((function(){return VE.call(t,o,i)})));break;case rE.CUSTOM_EVENT.CHECKEXPOSURE:n.dynamicRendered=!0,n.isShowedExposureReported||WE.call(this),n.countTimer||XE.call(this);break;case rE.CUSTOM_EVENT.FEEDBACKREPORT:FE.call(this,e.value);break;case rE.CUSTOM_EVENT.FEEDBACKBTNTAP:n.data&&n.adProxy.openFeedbackUrl(1014);break;case rE.CUSTOM_EVENT.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case rE.CUSTOM_EVENT.SPLASHSKIPAD:var a=e.value.event;tC.call(this,a);break;case rE.CUSTOM_EVENT.REPORTADMONITORDATA:var s=null==e?void 0:e.value,c=s.id,u=s.key,l=s.extInfo,d=c?{idKeyGroup:c,idKey:u}:u;n.adProxy.reportAdMonitorData(d,l)}},rC=function(){var e=this,t=Object(Rb.getPrivateThis)(this);t.dynamicEmitter=new jy,t.dynamicEmitter.on("adCustomEvent",(function(t){nC.call(e,t)}))},oC=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Object(Rb.getPrivateThis)(this);e.forEach((function(e){var n=Va()(cE[e.name]).root,o=Rb.create.call(t,n);r[e.parent].add(o)})),r.componentsRenderred=!0,$E.call(this),n&&iC.call(this)},iC=function(){var e=this,t=Object(Rb.getPrivateThis)(this);t.adFeedback&&!t.eventsMap.adFeedback&&t.adFeedback.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||FE.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn&&!t.eventsMap.adFeedbackBtn&&t.adFeedbackBtn.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,FE.call(e,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===t.source&&qE.call(e,{source:t.source,animated:!0},17),t.data&&t.adProxy.openFeedbackUrl(1014))})),t.adDislikeBtn&&!t.eventsMap.adDislikeBtn&&t.adDislikeBtn.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,FE.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),t.adQualityBtn&&!t.eventsMap.adQualityBtn&&t.adQualityBtn.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,FE.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===t.source&&qE.call(e,{source:t.source,animated:!0},17))})),t.adDuplicateBtn&&!t.eventsMap.adDuplicateBtn&&t.adDuplicateBtn.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,FE.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===t.source&&qE.call(e,{source:t.source,animated:!0},17))})),t.adDismatchBtn&&!t.eventsMap.adDismatchBtn&&t.adDismatchBtn.on("click",(function(n){jE.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,FE.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===t.source&&qE.call(e,{source:t.source,animated:!0},17))})),t.closeContainer&&!t.eventsMap.closeContainer&&t.closeContainer.on("click",(function(n){jE.call(e,n,!1)&&(RE.call(e)||"launch"===t.source&&qE.call(e,{source:t.source,animated:!0},11))})),t.adMedia&&!t.eventsMap.adMedia&&t.adMedia.on("click",(function(t){aC.call(e,t,"adMedia")})),t.adButtonContainer&&!t.eventsMap.adButtonContainer&&t.adButtonContainer.on("click",(function(t){aC.call(e,t,"button")})),t.buttonContainer&&!t.eventsMap.buttonContainer&&t.buttonContainer.on("click",(function(n){if(jE.call(e,n,!1))return t.data?(qE.call(e,{source:t.source,animated:!1},16),t.isLandingPage=!0,Object(xb.timeout)(DE).then((function(){return VE.call(e,n,16)}))):void 0}));for(var n=0,r=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];n<r.length;n++){var o=r[n];t[o]&&!t.eventsMap[o]&&(t.eventsMap[o]=!0)}},aC=function(e){var t,n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Object(Rb.getPrivateThis)(this),a=(null===(n=null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.condition)||void 0===n?void 0:n.widget_gray_splash_click_area_switch)||0;if((!a||"button"===o)&&jE.call(this,e,!1))return i.data&&"launch"===i.source?!SE||ee.IS_ANDROID?(VE.call(this,e,13),Object(xb.timeout)(200).then((function(){return qE.call(r,{source:i.source,animated:!1},13)}))):(qE.call(this,{source:i.source,animated:!1},13),VE.call(this,e,13)):void 0},sC=function(){var e=Object(Rb.getPrivateThis)(this);if(e.data){var t=JE.call(this);t&&"launch"===e.source&&Object(Ga.showSplashAdMenu)({showMenu:!0,title:t.title,icon:t.thumb,success:function(){e.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.showSplashAdMenuSuccess)},fail:function(t){e.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.showSplashAdMenuFail,{msg:t})}})}},cC=function(){var e,t=Object(Rb.getPrivateThis)(this);try{var n=(null===(e=t.data)||void 0===e?void 0:e.aid)||"";t.adProxy.data&&t.adInfos&&t.adInfos.waidMap&&(t.adProxy.data.waid=t.adInfos.waidMap[n])}catch(e){}},uC=function(){var e=Object(Rb.getPrivateThis)(this);if(!e.data||""===e.data||"object"!==Object(x.default)(e.data)){var t=Ga.fs.readFileSync(TE,"utf-8");try{var n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){At.default.onReady((function(){e.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.readFileDataFail,{source:e.source,msg:t})}))}}},lC=function(){var e=Object(Rb.getPrivateThis)(this);if("launch"===e.source){oC.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0}},dC=function(){var e=Object(Rb.getPrivateThis)(this);if("launch"===e.source){var t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(ee.IS_ANDROID||yE>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),oC.call(this,t,!0),Object(Ga.splashAdAllViewLayoutStateChange)({state:0}),Eb.nativeviewLayout.layout().then((function(){Object(Ga.splashAdAllViewLayoutStateChange)({state:1}),Eb.nativeviewLayout.auto=!0})).catch((function(t){At.default.onReady((function(){e.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.secondInsertFail,{source:e.source,msg:t})}))}))}},fC=function(){var e=Object(Rb.getPrivateThis)(this);wE=Math.max(160,160*_E/812),mE=_E-wE,e.adMedia.style.width=gE,e.adMedia.style.height=mE;var t=9*_E/16;e.adMaterial.style.width=t,e.adMaterial.style.height=_E,e.adMaterial.style.left=t>gE?(gE-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=CE:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=gE,e.adMaterial.style.height=mE,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=gE,e.adMaterialContainer.style.height=mE,e.adMaterial.src=kE,e.adMaterialBg.style.width=.45*_E*16/9,e.adMaterialBg.style.height=.45*_E,e.adMaterialBg.style.left=-(.45*_E*16/9-gE)/2,e.adMaterialLandscape.style.width=gE/375*311,e.adMaterialLandscape.style.height=gE/375*175,e.adMaterialBg.src=CE,e.adMaterialLandscape.src=CE,e.adCardInfo.style.width=gE/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=_E/1920},pC=function(e){var t,n=this,r=Object(Rb.getPrivateThis)(this);if(r.showInfo=e,r.source=e.source,r.isDarkMode=e.isDarkMode||!1,e.isGame&&(SE=e.isGame),gE=e.screenWidth,_E=e.screenHeight,null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.adDynamicList){var o=Va()('\n  <view id="container">\n  </view>\n').root;Mb.call(this,o,aE),r.isDynamic=!0,ZE.call(this,e.source)}else Mb.call(this,vE,sE),fC.call(this);if(r.container.style.width=gE,r.container.style.height=_E,r.container.style.backgroundColor=r.isDarkMode?"#191919":"#ffffff",Eb.nativeviewLayout.add(r.container),!r.isDynamic)try{Ga.fs.access({path:AE,success:function(){r.adMaterialBg.src=AE}})}catch(e){}var i=[];"menu"!==r.source||r.isDynamic||(uC.call(this),i=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===r.crtOrientation&&(i=i.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),r.navigator.style.hidden=!1,oC.call(this,i,!0)),Object(Ga.splashAdFirstStepViewLayoutStateChange)({state:0}),Eb.nativeviewLayout.layout().then((function(){if(r.firstInserted=!0,r.isShowed=!0,Object(Ga.splashAdFirstStepViewLayoutStateChange)({state:1}),"launch"!==r.source||r.isDynamic)Eb.nativeviewLayout.auto=!0,r.container.requestLayout();else try{dC.call(n)}catch(e){At.default.onReady((function(){r.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.secondRenderFail,{source:r.source,msg:e})}))}})).catch((function(e){At.default.onReady((function(){r.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.firstInsertFail,{source:r.source,msg:e})}))}))},hC=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=Object(Rb.getPrivateThis)(this),i=za.SPLASHAD_ERROR_CODE[r],a=za.SPLASHAD_IDKEY[r];return At.default.onReady((function(){var n;o.adProxy.reportAdMonitorData(a,t),o.adProxy.reportTimePoints({slotid:za.POS_ID_MAP[o.adType],costtype:(null===(n=o.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,splash_instance_id:e.instanceId,errCode:i,scene:e.scene,extInfo:t})})),Object(Ga.showSplashAd)({adCallTime:Date.now(),errCode:i,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})},vC=function(e){Object(G.default)(n,e);var t=uE(n);function n(){var e;Object($.default)(this,n),e=t.call(this);var r=Object(Rb.getPrivateThis)(Object(Pe.default)(e));return r.canShowed=!1,r.today=Object(Ha.getTodayFormat)(),r.countTimer=null,r.componentsRenderred=!1,r.isShowed=!1,r.firstInserted=!1,r.adFeedbackInserted=!1,r.isDynamic=!1,r.isShowedExposureReported=!1,r.startExposureTime=0,r.isViewableExposureReported=!1,r.clickCount=0,r.lastLandingTime=0,r.lastJsapiName="",r.lastJsapiStatus=0,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0,r.hideTime=0,r.hideDuration=0,r.isClosing=!1,r.isShowCloseTip=!1,r.clickFirstGradeTime=0,r.eventsMap={},r.source="",r.crtOrientation="portrait",r.adType="splashAd",r.adProxy=new Mc({adUnitId:"",adType:r.adType}),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null,Object(iE.onSplashAdButtonClicked)((function(t){"close"===t.buttonType&&"launch"===t.source?(LE.call(Object(Pe.default)(e),10),HE.call(Object(Pe.default)(e),["countTimer"])):"close"===t.buttonType&&"menu"===t.source?LE.call(Object(Pe.default)(e),14):"back"!==t.buttonType||"menu"!==t.source||r.isLandingPage?"menu"===t.buttonType&&BE.call(Object(Pe.default)(e),1):LE.call(Object(Pe.default)(e),15)})),Object(iE.onSplashAdWillLayout)((function(t){if(t.menuViewFrame&&("launch"===t.source?(yE=t.menuViewFrame.y||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&yE&&r.tplComponent.emitComponentEvent(oE.ROOT_EVENT.SPLASHADMENUVIEW,{countdownTop:yE})):"menu"===t.source&&(bE=t.menuViewFrame.height||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&bE&&r.tplComponent.emitComponentEvent(oE.ROOT_EVENT.SPLASHADMENUVIEW,{navHeight:bE,menuHeight:172-bE})),ee.IS_IOS&&r.firstInserted&&!r.adFeedbackInserted))try{lC.call(Object(Pe.default)(e))}catch(e){At.default.onReady((function(){r.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.iosThirdInsertFail,{source:r.source,msg:e})}))}})),Object(iE.onSplashAdShow)((function(){r.adProxy.setTimePoint("p5"),"launch"!==r.source||r.isDynamic||(uC.call(Object(Pe.default)(e)),$E.call(Object(Pe.default)(e))),sC.call(Object(Pe.default)(e)),cC.call(Object(Pe.default)(e)),r.hideTime>0&&(r.hideDuration=+new Date-r.hideTime),WE.call(Object(Pe.default)(e)),"launch"===r.source&&r.isShowedExposureReported&&XE.call(Object(Pe.default)(e)),r.isLandingPage&&(r.isLandingPage=!1)})),Object(iE.onSplashAdHide)((function(){r.hideTime=+new Date,HE.call(Object(Pe.default)(e),["countTimer"])})),Object(iE.onSplashAdClose)((function(){IE||(IE=!0),ee.IS_IOS&&r.startExposureTime>0&&+new Date-r.startExposureTime>1e3&&WE.call(Object(Pe.default)(e),!0),r.container&&(r.isDynamic&&(r.tplComponent&&Object(Wy.unmount)(r.tplComponent),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null),Eb.nativeviewLayout.remove(r.container)),zE.call(Object(Pe.default)(e))})),e}return Object(K.default)(n,[{key:"otherAdsEmitFetch",value:function(){KE.call(this)}},{key:"show",value:function(e){var t,n=this;EE=!0;var r=Object(Rb.getPrivateThis)(this);r.showInfo=e,r.adProxy.scene=e.scene,r.adProxy.setTimePoint("p14");var o=r.adProxy.getTimePoint("p14");if(At.default.onReady((function(){setTimeout((function(){var t="launch"===e.source?za.SPLASHAD_IDKEY.launchAcceptShouldShow:za.SPLASHAD_IDKEY.menuAcceptShouldShow;r.adProxy.reportAdMonitorData(t)}),1500)})),"launch"===e.source){At.default.onReady((function(){setTimeout((function(){r.adFetchResult=YE.call(n)}),1500)}));var i={};try{var a=Ga.fs.readFileSync(PE,"utf-8");i.adInfos=a||{},r.adInfos=JSON.parse(a)}catch(e){r.adInfos={},i.errMsg=r.adProxy.processStackMsg(e),i.fileName=PE}if(0===Object.keys(r.adInfos).length)return OE=za.SPLASHAD_ERROR_CODE.NO_ADINFOS,hC.call(this,e,i,{startInit:o},"NO_ADINFOS");this.showAdByCheckAdsOnline(e,o);var s=r.adInfos.ads||[];r.adDatas={};var c,u=lE(s);try{for(u.s();!(c=u.n()).done;){var l=c.value;try{var d=za.WX_AD_PATH+"/"+l.aid+".txt",f=Ga.fs.readFileSync(d,"utf-8"),p=JSON.parse(f);r.adDatas[l.aid]=p}catch(e){}}}catch(e){u.e(e)}finally{u.f()}try{var h=(null===(t=r.adInfos)||void 0===t?void 0:t.deviceInfo)||{};r.adProxy.setDeviceInfo(h)}catch(e){}}else"menu"===e.source&&this.showDetail(e)}},{key:"showAdByRealtimeFetch",value:function(e){var t=this,n=Object(Rb.getPrivateThis)(this),r={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:Ib.SDKVersion,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:ee.IS_IOS,isAndroid:ee.IS_ANDROID,adNetworkType:e.networkType};return YE.call(this,r).then((function(r){n.data=r,n.adProxy.data=r,t.showDetail(e,{aid:r.aid},!0)}))}},{key:"showAdByCheckAdsOnline",value:function(e,t){var n=this,r=Object(Rb.getPrivateThis)(this),o=r.adInfos.requestInQueue&&"true"===r.adInfos.requestInQueue,i=JSON.stringify({weapp_enter_scene:e.scene||0}),a={slot_id:za.POS_ID_MAP[r.adType],publisher_appid:e.appId,network_type:za.NET_TYPE_MAP[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:Ib.SDKVersion,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:r.adInfos.ads||[],ext_check_ads_weapp:i};r.adProxy.setTimePoint("p15"),At.default.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.START_CHECK_AD_STATUS)}),1500)})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(Ga.adOperateWXData)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t})}(a,o).then((function(t){At.default.onReady((function(){setTimeout((function(){r.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.CHECK_AD_STATUS_SUCCESS)}),1500)})),r.adProxy.setTimePoint("p16");var o=JSON.parse(t.rawData);n.showDetail(e,o)})).catch((function(o){return r.adProxy.setTimePoint("p16"),hC.call(n,e,{msg:o},{startInit:t},"CHECK_AD_STATUS_ERROR")}))}},{key:"showDetail",value:function(e){var t,n,r,o,i,a,s,c,u,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{aid:0},d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return pE(this,void 0,void 0,Lt.a.mark((function f(){var p,h,v,g,_,b,y,m,w,O,S,I,E=this;return Lt.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(Eb.nativeviewLayout.style.width=e.screenWidth,Eb.nativeviewLayout.style.height=e.screenHeight,Eb.nativeviewLayout.auto=!1,p=Object(Rb.getPrivateThis)(this),h={startInit:p.adProxy.getTimePoint("p14"),startFetchTime:p.adProxy.getTimePoint("p15"),fetchCallbackTime:p.adProxy.getTimePoint("p16")},v=[],g=l.aid,"launch"!==e.source||!d){f.next=19;break}_=(null===(n=null===(t=null==p?void 0:p.data)||void 0===t?void 0:t.rerankingExtInfo)||void 0===n?void 0:n.material_hash)||"",CE=za.WX_AD_PATH+"/"+g+"_"+_+".png",kE=za.WX_AD_PATH+"/"+g+"_"+_+"_pure_color.png",AE=za.WX_AD_PATH+"/"+g+"_"+_+"_blur.png",v.push(CE),p.crtOrientation="portrait",b=(null===(r=null==p?void 0:p.data)||void 0===r?void 0:r.crtInfo[0])||{},Object.keys(b).length>0&&(y=b.width,m=b.height,p.crtOrientation=y>m?"landscape":"portrait"),"landscape"===p.crtOrientation&&v.push(kE),f.next=37;break;case 19:if("launch"!==e.source||d){f.next=36;break}if(g&&"0"!==g){f.next=22;break}return f.abrupt("return",hC.call(this,e,{adInfos:p.adInfos,checkAdStatus:l},h,"NO_AID"));case 22:if(g&&(null===(o=null==p?void 0:p.adDatas)||void 0===o?void 0:o[g])&&(p.data=p.adDatas[g],p.adProxy.data=p.adDatas[g]),p.crtOrientation=g?null===(a=null===(i=null==p?void 0:p.adInfos)||void 0===i?void 0:i.crtSizeMap)||void 0===a?void 0:a[g]:"",p.crtOrientation){f.next=26;break}return f.abrupt("return",hC.call(this,e,{adInfos:p.adInfos,checkAdStatus:l},h,"CRT_ORIENTATION_NOT_SURE"));case 26:w=g?null===(s=null==p?void 0:p.adInfos)||void 0===s?void 0:s.materialHashMap[g]:"",TE=za.WX_AD_PATH+"/"+g+".txt",CE=za.WX_AD_PATH+"/"+g+"_"+w+".png",kE=za.WX_AD_PATH+"/"+g+"_"+w+"_pure_color.png",AE=za.WX_AD_PATH+"/"+g+"_"+w+"_blur.png",v.push(TE),v.push(CE),"landscape"===p.crtOrientation&&v.push(kE),f.next=37;break;case 36:"menu"===e.source&&(O={},(null===(c=p.data)||void 0===c?void 0:c.crtInfo)&&p.data.crtInfo.length>0?(S=Object(nt.default)(p.data.crtInfo,1),O=S[0]):(null===(u=p.data)||void 0===u?void 0:u.crtInfo)&&(O=p.data.crtInfo),Object.keys(O).length>0&&!p.crtOrientation&&(p.crtOrientation=p.data.crtInfo.width>p.data.crtInfo.height?"landscape":"portrait"),BE.call(this,2));case 37:f.prev=37,"launch"===e.source&&v.forEach((function(e){Ga.fs.accessSync(e)})),f.next=51;break;case 41:if(f.prev=41,f.t0=f.catch(37),OE=za.SPLASHAD_ERROR_CODE.MATERIAL_NOT_READY,I=p.adProxy.processStackMsg(f.t0),!p.data){f.next=50;break}return f.next=48,p.adProxy.handleBulkSaveMaterials(p.data);case 48:f.next=51;break;case 50:return f.abrupt("return",hC.call(this,e,{adInfos:p.adInfos,checkAdStatus:l,msg:I},h,"MATERIAL_NOT_READY"));case 51:p.adProxy.setTimePoint("p17"),"launch"===e.source&&Object(Ga.showSplashAd)({showMenu:!0,show:!0,errCode:OE,adCallTime:p.adProxy.getTimePoint("p17"),eventReceivedTime:h.startInit,cgiFetchStart:h.startFetchTime,cgiFetchCallBack:h.fetchCallbackTime,success:function(){p.adProxy.setTimePoint("p18"),At.default.onReady((function(){p.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.launchShowSplashAdSuccess)}))},fail:function(e){p.adProxy.setTimePoint("p18"),At.default.onReady((function(){p.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.showSplashAdFail,{adInfos:p.adInfos,checkAdStatus:l,msg:e})})),zE.call(E),p.container&&Eb.nativeviewLayout.remove(p.container)}});try{p.adProxy.setTimePoint("p4"),pC.call(this,e)}catch(t){qE.call(this,{source:e.source,animated:!1},19),zE.call(this),At.default.onReady((function(){p.adProxy.reportAdMonitorData(za.SPLASHAD_IDKEY.firstRenderFail,{adInfos:p.adInfos,source:e.source,msg:t})}))}case 54:case"end":return f.stop()}}),f,this,[[37,41]])})))}}]),n}(Rb.Component);function gC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gC(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}fE||(fE=new vC),Object(iE.onShouldShowSplashAd)((function(e){fE||(fE=new vC),fE.show(e)})),Object(iE.onEmitSplashAdFetch)((function(){fE||(fE=new vC),fE.otherAdsEmitFetch()}));var bC={},yC={},mC=0;Object(Qi.onAppRoute)((function(e){var t=e.webviewId;mC=t,yC[t]||(yC[t]=!0,Object(Q.onBeforeUnloadPage)(t,(function(e){delete yC[e],delete bC[e]})))}));var wC=function(e){return e&&!0===e.multiton?new YO(e):(bC[mC]||(bC[mC]=new YO(e)),bC[mC])};function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function SC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?OC(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var IC={};function EC(e,t){var n,r="";if(e===Gi.SET_COOKIES_INDEX&&(r="setCookies"),e===Gi.GET_COOKIES_INDEX&&(r="getCookies"),r){var o=Object(uo.getPluginId)(this);IC[o]=IC[o]||(n={},Object(q.default)(n,Gi.SET_COOKIES_INDEX,null),Object(q.default)(n,Gi.GET_COOKIES_INDEX,null),n),__safeway__.pluginPermissionBytes.ifIs(o,r,1,(function(n){IC[o][e]=n,t()}))}}function CC(e,t){var n=Object(uo.getPluginId)(this);ee.IS_DEVTOOLS?t(!0):IC[n]&&null!==IC[n][e]?t(!!IC[n][e]):EC.call(this,e,(function(){return t(!!IC[n][e])}))}var TC={muteMicrophone:!1,muteEarphone:!1};function kC(e){return Object(re.isObject)(e)?(Object(re.isBoolean)(e.muteMicrophone)&&(TC.muteMicrophone=e.muteMicrophone),Object(re.isBoolean)(e.muteEarphone)&&(TC.muteEarphone=e.muteEarphone),TC):TC}var AC=function(e){if(Object(R.beforeInvoke)("joinVoIPChat",e,{signature:"",nonceStr:"",timeStamp:0,groupId:""})){var t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:kC(e.muteConfig),handsFree:!Object(re.isBoolean)(e.handsFree)||e.handsFree,roomType:t}),r=Object(uo.getPluginId)(this);Object(R.invokeMethodWithPlugin)(r)("joinVoIPChat",n,{beforeSuccess:function(e){Object(R.publish)("joinVoIPChat",{}),e.errCode=0},beforeFail:function(e){void 0===e.errCode&&(e.errCode=function(e){var t=new RegExp(/^joinVoIPChat:(?:fail )?fail: (-?[0-9]+?), (-?[0-9]+?), .*/).exec(e);if(!t)return-1e3;var n=parseInt(t[1],10),r=parseInt(t[2],10);if(-10086!==n&&-10087!==n)return-1e3;switch(r){case 0:return 0;case-1:return-1;case-7:return-2;default:return-1e3}}(e.errMsg))}})}},PC=function(e){try{var t=Object(uo.getPluginId)(this);Object(R.invokeMethodWithPlugin)(t)("exitVoIPChat",Object.assign({},e,{success:function(t){var n=t.errMsg||"ok";Object(R.publish)("exitVoIPChat",{}),Object(R.beforeInvokeCallback)({name:"exitVoIPChat",args:e,errMsg:n,errCode:0,res:t})},fail:function(t){var n=t.errCode||-1,r=t.errMsg||"unknown error";Object(R.beforeInvokeCallback)({name:"exitVoIPChat",args:e,success:!1,errMsg:r,errCode:n,res:t})},complete:function(){}}))}catch(t){"function"==typeof e.fail&&e.fail({errCode:-1,errMsg:"exitVoIPChat:fail "+t.message}),"function"==typeof e.complete&&e.complete({errCode:-1,errMsg:"exitVoIPChat:complete "+t.message})}},DC=function(e){if(Object(R.beforeInvoke)("updateVoIPChatMuteConfig",e,{muteConfig:{}})){var t=Object(uo.getPluginId)(this);Object(R.invokeMethodWithPlugin)(t)("updateVoIPChatMuteConfig",Object.assign({},e,{muteConfig:kC(e.muteConfig),handsFree:!Object(re.isBoolean)(e.handsFree)||e.handsFree}))}},jC=Object(fo.getEventManager)("voIPChatMembersChanged"),xC=jC.onMethod,RC=jC.offMethod;Object(R.onMethod)("onVoIPChatMembersChanged",(function(e){e.errCode=0,e.errMsg=e.errMsg||"ok",jC.emit(e)}));var MC=function(e){try{Object(R.onMethod)("onVoIPChatSpeakersChanged",(function(t){t.errCode=0,t.errMsg=t.errMsg||"ok","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}))}catch(t){t.errCode=t.errCode||-1,t.errMsg=t.errMsg||"unknown error","function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at onVoIPChatSpeakersChanged callback function")(t)}},NC=function(){Object(R.onMethod)("onVoIPChatSpeakersChanged",(function(){}))},LC=Object(fo.getEventManager)("VoIPChatInterrupted"),BC=function(e){e.errCode||(e.errCode=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes("current mini app entered background")?-1:e.includes("in comming call")?-2:-1e3}(e.reason)),LC.emit(e)};Object(R.onMethod)("onVoIPChatInterrupted",(function(e){BC(e)})),Object(R.onMethod)("onVoIPChatInterruptedJsEvent",(function(e){BC(e)}));var FC=LC.onMethod,WC=LC.offMethod,UC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("subscribeVoIPVideoMembers",e,{openIdList:[]})&&Object(R.invokeMethod)("subscribeVoIPMembers",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("subscribeVoIPMembers","subscribeVoIPVideoMembers")}})},VC=Object(fo.getEventManager)("VoIPVideoMembersChanged"),GC=VC.onMethod,HC=VC.offMethod;Object(R.onMethod)("onVoIPVideoMembersChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};VC.emit(e)}));var zC=Object(fo.getEventManager)("voIPChatStateChanged"),qC=zC.onMethod,YC=zC.offMethod;Object(R.onMethod)("onVoIPChatStateChanged",(function(e){e.errCode=e.errCode||0,e.errMsg=e.errMsg||"ok",zC.emit(e)}));var KC=n(148),JC=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Object(na.constructOperateWXData)(e,t,!0,n);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(uo.getPluginId)(this);r(Object.assign({},e,{pluginId:t}))}},XC=n(125),$C=n(160),ZC=JC(!1,"login"),QC=JC(!1,"getUserInfo",!0),eT=n(122),tT=["scope.record","scope.writePhotosAlbum","scope.camera"],nT=JC(!1,"getSetting"),rT=n(169),oT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("saveFileToDisk",e,{})},iT=1;At.default.onReady((function(){["close","error","listening","message"].forEach((function(e){Object(R.onMethod)("onUDPSocket"+Object(Lo.capitalizeFirstLetter)(e),(function(t){var n=t.socketId;delete t.socketId,Object(Lo.capitalizeFirstLetter)(e),Object(fo.getEventManager)("jsapi-udp-"+n+"-"+e).emit(t)}))}))}));var aT=function(){function e(){var t,n=this;if(Object($.default)(this,e),this._id=iT++,Object(R.invokeMethod)("createUDPSocket",{socketId:this._id,fail:function(e){e.errMsg,t=e.errMsg}}),t)throw new Error(t);["close","error","listening","message"].forEach((function(e){var t=Object(fo.getEventManager)("jsapi-udp-"+n._id+"-"+e);n["on"+Object(Lo.capitalizeFirstLetter)(e)]=t.onMethod,n["off"+Object(Lo.capitalizeFirstLetter)(e)]=t.onMethod}))}return Object(K.default)(e,[{key:"bind",value:function(e){var t,n;if(Object(R.invokeMethod)("bindUDPSocket",{port:e,socketId:this._id,success:function(e){t=e.port},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t}},{key:"send",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=ArrayBuffer.isView(n.message)?n.message.buffer:n.message,Object(R.invokeMethod)("sendUDPSocketMessage",Object.assign({},n,{socketId:this._id,message:e,success:function(e){},fail:function(e){var n=e.errMsg;Object(fo.getEventManager)("jsapi-udp-"+t._id+"-error").emit({errMsg:"send: fail "+n})}}))}},{key:"connect",value:function(){}},{key:"write",value:function(e){this.send(e)}},{key:"close",value:function(){var e;if(Object(R.invokeMethod)("closeUDPSocket",{socketId:this._id,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}}]),e}(),sT=Xe.default.UDP,cT=new WeakMap,uT=new WeakMap,lT=new WeakMap,dT=1,fT=function(){function e(){var t=this;if(Object($.default)(this,e),!sT)return null;var n=new sT;if(null===n)return null;var r=dT++;lT.set(this,{}),["close","error","listening","message"].forEach((function(e){var o=Object(fo.getEventManager)("jsbinding-udp-"+r+"-"+e);n["on"+e]=function(){o.emit.apply(o,arguments),"error"===e?Reporter.reportIDKey({key:"UDPError"}):"message"===e&&Reporter.reportIDKey({key:"receiveUDPMessage"})},lT.set(t,Object.assign(lT.get(t),Object(q.default)({},e,o))),t["on"+Object(Lo.capitalizeFirstLetter)(e)]=o.onMethod,t["off"+Object(Lo.capitalizeFirstLetter)(e)]=o.offMethod})),cT.set(this,n),uT.set(this,r)}return Object(K.default)(e,[{key:"bind",value:function(e){return Object(Wl.reportNetworkAPI)("bindUDP","",1,0,"","",!1,0),Reporter.reportIDKey({key:"bindUDP"}),cT.get(this).bind({port:e})}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(gl.checkPermissionSync)("UDP")){var t,n="udp://"+e.address;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message,cT.get(this).send(Object.assign({},e,{message:t})),Math.random()>.99&&Object(Wl.reportNetworkAPI)("sendUDP",n,1,0,"","",!1,Object(Lo.getDataLength)(e.message)),Reporter.reportIDKey({key:"sendUDPMessage"})}else{var r=Object(fo.getEventManager)("jsbinding-udp-"+uT.get(this)+"-error");r.emit({errMsg:"send socket fail: no permission",errCode:-3})}}},{key:"connect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=cT.get(this);"function"==typeof t.connect&&t.connect(e)}},{key:"write",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(gl.checkPermissionSync)("UDP")){var t;t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;var n=cT.get(this);"function"==typeof n.write?n.write(Object.assign({},e,{message:t})):this.send(e)}else{var r=Object(fo.getEventManager)("jsbinding-udp-"+uT.get(this)+"-error");r.emit({errMsg:"write socket fail: no permission",errCode:-3})}}},{key:"onConnect",value:function(e){cT.get(this).onconnect=e}},{key:"close",value:function(){return cT.get(this).close()}}]),e}(),pT=function(){return ee.IS_DEVTOOLS?new aT:new fT},hT=n(161);var vT=n(163),gT=n(162),_T=n(164),bT=n(159),yT=n(116),mT=n(79),wT="webapi_getenteroptions_sensitivetype",OT=function(e){return wxNativeConsole.info(wT+" "+e)},ST=Object(na.constructOperateWXData)(!1,"getInnerEnterOptions",!0),IT=function(e,t,n){var r={app_info_list:[{appid:e,scene:t}]};OT("reqData="+JSON.stringify(r)),ST({pluginId:e,apiName:wT,reqData:r,complete:function(e){OT("respData="+JSON.stringify(e))},fail:function(e){n(e.errmsg)},success:function(r){var o;try{o=JSON.parse(r.respData.data)}catch(e){return void n("system error")}var i=(o.sensitive_type_data_list||[]).find((function(n){return n.appid===e&&n.scene===t})),a=i?i.sensitive_type_list:[],s=a.indexOf("sessionId");-1!==s&&(a[s]="sessionid"),n(null,a||[])}})},ET=Object.prototype.hasOwnProperty,CT=Object.assign,TT=[{name:"chooseAddressForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(hT._chooseAddressForPlugin)(e)}},permissionBytes:["chooseAddressForPlugin"],copyToWx:!0},{name:"openSettingForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(vT._openSettingForPlugin)(e)}},permissionBytes:["openSettingForPlugin"],copyToWx:!0},{name:"requestPaymentForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(gT._requestPaymentForPlugin)(e)}},permissionBytes:["requestPaymentForPlugin"],copyToWx:!0},{name:"chooseAddressDirectly",factory:function(e){return function(t){!function(e,t){Object(na._pluginOperateWXData)({pluginId:e,apiName:"GetPluginAuthScope",reqData:{scope_list:["scope.eCommercePluginAuths"]},fail:function(){t(!1)},success:function(e){var n=JSON.parse(e.respData.data).auth_item_list.find((function(e){return"scope.eCommercePluginAuths"===e.scope}));t(!!n&&n.state&&1===n.state)}})}(e,(function(e){e?Object(uu.invokeWebviewMethod)("chooseAddressDirectly",{},void 0,(function(e){0===e.errMsg.indexOf("chooseAddressDirectly:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)})):Object(M.beforeInvokeFail)("chooseAddressDirectly",t,"no permission")}))}},permissionBytes:[],copyToWx:!0},{name:"enterContactForPlugin",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.permissionBytes=[1,1,1],Object(uu.invokeWebviewMethod)("appServiceEnterContact",e,void 0,(function(t){t.errMsg&&(t.errMsg=t.errMsg.replace("enterContact","enterContactForPlugin")),0===t.errMsg.indexOf("enterContactForPlugin:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))}},permissionBytes:["enterContactForPlugin"],copyToWx:!0},{name:"openUrl",factory:function(){return function(e){e.isNativeStyle=!0,Object(R.invokeMethod)("private_openUrl",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","openUrl")}})}},permissionBytes:["openUrlForPlugin"],copyToWx:!0},{name:"setLoginAuth",factory:function(e){return function(t){t.pluginId=e,t.appId=At.default.accountInfo.appId,Object(uu.invokeWebviewMethod)("setPluginLoginAuth",t,void 0,(function(e){0===e.errMsg.indexOf("setLoginAuth:ok")?t.success&&t.success(e):t.fail&&t.fail(e),t.complete&&t.complete(e)}))}},permissionBytes:["setLoginAuthForPlugin"],copyToWx:!0},{name:"navigateBackNative",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="";Object(re.isObject)(t.extraData)&&(n=JSON.stringify(t.extraData)),Object(R.invokeMethodWithPlugin)(e)("navigateBackNative",Object.assign({},t,{extraData:n}))}},permissionBytes:["navigateBackNative"],copyToWx:!0},{name:"setNavigationBarRightButton",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("setNavigationBarRightButton",t,{hide:!0})&&Object(R.invokeMethodWithPlugin)(e)("setNavigationBarRightButton",t,{})}},permissionBytes:["setNavigationBarRightButton"],copyToWx:!0},{name:"openAddressWithLightMode",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethodWithPlugin)(e)("openAddressWithLightMode",t,{beforeSuccess:function(e){Object(N.renameProperty)(e,"addressPostalCode","postalCode"),Object(N.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(N.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(N.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(N.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){delete e.err_msg}})}},permissionBytes:["openAddressWithLightMode"],copyToWx:!0},{name:"editTextWithPopForm",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethodWithPlugin)(e)("editTextWithPopForm",t,{})}},permissionBytes:["editTextWithPopForm"],copyToWx:!0},{name:"navigateToMiniProgramDirectly",factory:function(){return function(e){Object(Oe._doNavigateToMiniProgram)(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}})}},permissionBytes:["navigateToMiniProgramDirectly"],copyToWx:!0},{name:"getInnerEnterOptions",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object(mT.getInnerEnterOptionsSync)();n.sessionid=n.sessionid||n.sessionId,delete n.sessionId,IT(e,n.scene,(function(e,r){var o={};e||(o=CT(n.__public),r.forEach((function(e){ET.call(n,e)&&(o[e]=n[e])}))),Object(M.beforeInvokeCallback)({name:"getInnerEnterOptions",args:t,success:!e,errMsg:e,res:o})}))}},permissionBytes:["private_getEnterOptions"],copyToWx:!1},{name:"chooseInvoiceTitleDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_T.chooseInvoiceTitle)(Object(uo.replaceErrMsgApiName)(e,"chooseInvoiceTitle","chooseInvoiceTitleDirectly"))}},permissionBytes:["private_chooseInvoiceTitleDirectly"],copyToWx:!1},{name:"getPhoneNumberDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(uu.invokeWebviewMethod)("getPhoneNumber",Object.assign({permissionBytes:[1,1,1]},e),void 0,(function(t){"string"==typeof t.public.errMsg&&(t.public.errMsg=t.public.errMsg.replace(/^getPhoneNumber:/,"getPhoneNumberDirectly:")),Object(yT.callbackInvoke)(t.public,"getPhoneNumberDirectly",e,{})}))}},permissionBytes:["private_getPhoneNumberDirectly"],copyToWx:!1},{name:"openCardDirectly",factory:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(bT.openCard)(Object(uo.replaceErrMsgApiName)(e,"openCard","openCardDirectly"))}},permissionBytes:["private_openCardDirectly"],copyToWx:!1},{name:"launchTrialMiniProgram",factory:function(){return function(e){var t=Object(C_.parse)("https://open.weixin.qq.com/sns/checktpbetaplugintoken");t.query={appid:String(e.appid),token:String(e.token)},e.extraData&&(t.query.extraData=JSON.stringify(e.extraData));var n={url:t.format(),isNativeStyle:!0};Object(R.invokeMethod)("private_openUrl",n,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","launchTrialMiniProgram")}})}},permissionBytes:["private_launchTrialMiniProgram"],copyToWx:!1},{name:"navigateToDevMiniProgram",factory:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Zi.doNavigateToDevMiniProgram)(t,e)}},permissionBytes:[],copyToWx:!1}],kT=function(e,t,n){var r=__safeway__.pluginPermissionBytes.ifIsNot;Promise.all((t||[]).map((function(t){return function(t){return new Promise((function(n){return r(e,t,0,n)}))}(t)}))).then((function(e){n(e.every((function(e){return e})))}))};function AT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var PT,DT=b.captureScreen,jT=b.onUserCaptureScreen,xT=b.offUserCaptureScreen,RT=b.setKeepScreenOn,MT=b.setScreenBrightness,NT=b.getScreenBrightness,LT=y.vibrateShort,BT=y.vibrateLong,FT=cr.chooseImage,WT=cr.previewImage,UT=cr._getImageInfoWithDownloadFile,VT=cr.saveImageToPhotosAlbum,GT=cr.compressImage,HT=a.startRecord,zT=a.stopRecord,qT=a.getRecorderManager,YT=o.chooseVideo,KT=o.saveVideoToPhotosAlbum,JT=i.playVoice,XT=i.pauseVoice,$T=i.stopVoice,ZT=m.addPhoneContact,QT=s.getBackgroundAudioPlayerState,ek=s.playBackgroundAudio,tk=s.pauseBackgroundAudio,nk=s.seekBackgroundAudio,rk=s.stopBackgroundAudio,ok=s.onBackgroundAudioPlay,ik=s.onBackgroundAudioPause,ak=s.onBackgroundAudioStop,sk=lu.interaction.hideToast,ck=lu.interaction.showLoading,uk=lu.interaction.hideLoading,lk=lu.interaction.showModal,dk=lu.interaction.showActionSheet,fk=lu.navigationBar.setNavigationBarTitle,pk=lu.navigationBar.showNavigationBarLoading,hk=lu.navigationBar.hideNavigationBarLoading,vk=lu.navigationBar.setNavigationBarColor,gk=lu.navigationBar.setNavigationBarAlpha,_k=lu.navigationBar.setNavigationBarRightButton,bk=lu.navigationBar.onTapNavigationBarRightButton,yk=KC.getShareInfo,mk=KC.showShareMenu,wk=KC.hideShareMenu,Ok=KC.updateShareMenu,Sk=KC.showShareImageMenu,Ik=lu.route.navigateTo,Ek=lu.route.redirectTo,Ck=lu.route.navigateBack,Tk=lu.route.switchTab,kk=lu.route.reLaunch,Ak={getAccountInfoSync:function(){var e,t,n=Object(Sb.getAccountInfoSync)(),r=Object(uo.getPluginId)(this);return n.plugin={appId:r||"",version:(e=Hi.default.pluginInfos[r].customVersion,t=Number(e),[Math.floor(t/1e6),Math.floor(t/1e3)%1e3,t%1e3].join("."))},n},request:nb.request,uploadFile:nb.uploadFile,downloadFile:nb.downloadFile,connectSocket:nb.connectSocket,getStorage:vb.getStorage,getStorageSync:vb.getStorageSync,removeStorage:vb.removeStorage,removeStorageSync:vb.removeStorageSync,setStorage:vb.setStorage,setStorageSync:vb.setStorageSync,createAudioContext:_b.createAudioContext,createCameraContext:_b.createCameraContext,createMapContext:_b.createMapContext,createVideoContext:_b.createVideoContext,createInnerAudioContext:_b.createInnerAudioContext,createLivePlayerContext:_b.createLivePlayerContext,createLivePusherContext:_b.createLivePusherContext,createSelectorQuery:function(e){return nl(e,Object(uo.getPluginId)(this))},createIntersectionObserver:function(e,t){return il(e,t,Object(uo.getPluginId)(this))},createMediaQueryObserver:function(e,t){return cl(e,t,Object(uo.getPluginId)(this))},nextTick:function(e){return fl(e)},createCanvasContext:Ob.createCanvasContext,createOffscreenCanvas:Ob.createOffscreenCanvas,drawCanvas:Ob.drawCanvas,canvasToTempFilePath:Ob.canvasToTempFilePath,canvasGetImageData:Ob.canvasGetImageData,canvasPutImageData:Ob.canvasPutImageData,createAnimation:lu.createAnimation,reportAnalytics:function(e,t){var n={business:"mmbizwxaanalytics",eventID:e,data:t||{},uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:Ib.SDKVersion,pluginId:Object(uo.getPluginId)(this),pluginVersion:Object(uo.getPluginVersion)(this)};Object(R.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify(n)})},chooseImage:FT,chooseMedia:so,previewImage:WT,getImageInfo:function(e){return UT(e,nb.downloadFile.bind(this))},saveImageToPhotosAlbum:VT,compressImage:GT,startRecord:HT,stopRecord:zT,getRecorderManager:qT,playVoice:JT,pauseVoice:XT,stopVoice:$T,getBackgroundAudioManager:s.getBackgroundAudioManager,setInnerAudioOption:Yr,chooseVideo:YT,saveVideoToPhotosAlbum:KT,createMediaContainer:Po,createMediaRecorder:jo.createMediaRecorder,createVideoDecoder:Do.createVideoDecoder,createMediaAudioPlayer:no,getLocation:Iu,openLocation:Tu,chooseLocation:Eu,choosePoi:Cu,onLocationChange:Au,offLocationChange:Pu,onLocationChangeError:ju,offLocationChangeError:xu,startLocationUpdate:Ru,stopLocationUpdate:Mu,getNetworkType:No.getNetworkType,onNetworkStatusChange:No.onNetworkStatusChange,offNetworkStatusChange:No.offNetworkStatusChange,getSystemInfo:ea.getSystemInfo,getSystemInfoSync:ea.getSystemInfoSync,startAccelerometer:f.startAccelerometer,stopAccelerometer:f.stopAccelerometer,onAccelerometerChange:f.onAccelerometerChange,offAccelerometerChange:f.offAccelerometerChange,startCompass:p.startCompass,stopCompass:p.stopCompass,onCompassChange:p.onCompassChange,offCompassChange:p.offCompassChange,getClipboardData:g.getClipboardData,setClipboardData:g.setClipboardData,makePhoneCall:h.makePhoneCall,makeVoIPCall:h.makeVoIPCall,startGyroscope:E.startGyroscope,stopGyroscope:E.stopGyroscope,onGyroscopeChange:E.onGyroscopeChange,offGyroscopeChange:E.offGyroscopeChange,startDeviceMotionListening:C.startDeviceMotionListening,stopDeviceMotionListening:C.stopDeviceMotionListening,onDeviceMotionChange:C.onDeviceMotionChange,offDeviceMotionChange:C.offDeviceMotionChange,scanCode:v.scanCode,scanItem:v.scanItem,makeBluetoothPair:w.makeBluetoothPair,openBluetoothAdapter:w.openBluetoothAdapter,closeBluetoothAdapter:w.closeBluetoothAdapter,getBluetoothAdapterState:w.getBluetoothAdapterState,onBluetoothAdapterStateChange:w.onBluetoothAdapterStateChange,offBluetoothAdapterStateChange:w.offBluetoothAdapterStateChange,startBluetoothDevicesDiscovery:w.startBluetoothDevicesDiscovery,stopBluetoothDevicesDiscovery:w.stopBluetoothDevicesDiscovery,getBluetoothDevices:w.getBluetoothDevices,getConnectedBluetoothDevices:w.getConnectedBluetoothDevices,createBLEConnection:w.createBLEConnection,closeBLEConnection:w.closeBLEConnection,getBLEDeviceServices:w.getBLEDeviceServices,getBLEDeviceCharacteristics:w.getBLEDeviceCharacteristics,getBLEDeviceRSSI:w.getBLEDeviceRSSI,setBLEMTU:w.setBLEMTU,getHCEState:S.getHCEState,startHCE:S.startHCE,stopHCE:S.stopHCE,sendHCEMessage:S.sendHCEMessage,onHCEMessage:S.onHCEMessage,offHCEMessage:S.offHCEMessage,getNFCAdapter:S.getNFCAdapter,notifyBLECharacteristicValueChanged:w.notifyBLECharacteristicValueChanged,notifyBLECharacteristicValueChange:w.notifyBLECharacteristicValueChange,readBLECharacteristicValue:w.readBLECharacteristicValue,writeBLECharacteristicValue:w.writeBLECharacteristicValue,onBluetoothDeviceFound:w.onBluetoothDeviceFound,offBluetoothDeviceFound:w.offBluetoothDeviceFound,onBLEConnectionStateChanged:w.onBLEConnectionStateChanged,offBLEConnectionStateChanged:w.offBLEConnectionStateChanged,onBLEConnectionStateChange:w.onBLEConnectionStateChange,offBLEConnectionStateChange:w.offBLEConnectionStateChange,onBLECharacteristicValueChange:w.onBLECharacteristicValueChange,offBLECharacteristicValueChange:w.offBLECharacteristicValueChange,startBeaconDiscovery:_.startBeaconDiscovery,stopBeaconDiscovery:_.stopBeaconDiscovery,getBeacons:_.getBeacons,onBeaconUpdate:_.onBeaconUpdate,offBeaconUpdate:_.offBeaconUpdate,onBeaconServiceChange:_.onBeaconServiceChange,offBeaconServiceChange:_.offBeaconServiceChange,startWifi:O.startWifi,stopWifi:O.stopWifi,getWifiList:O.getWifiList,getConnectedWifi:O.getConnectedWifi,connectWifi:O.connectWifi,presetWifiList:O.presetWifiList,setWifiList:O.setWifiList,onGetWifiList:O.onGetWifiList,onWifiConnected:O.onWifiConnected,offGetWifiList:O.offGetWifiList,offWifiConnected:O.offWifiConnected,onEvaluateWifi:O.onEvaluateWifi,addPhoneCalendar:k.addPhoneCalendar,addPhoneRepeatCalendar:k.addPhoneRepeatCalendar,getRandomValues:A.getRandomValues,captureScreen:DT,onUserCaptureScreen:jT,offUserCaptureScreen:xT,setKeepScreenOn:RT,setScreenBrightness:MT,getScreenBrightness:NT,vibrateShort:LT,vibrateLong:BT,addPhoneContact:ZT,login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:At.default.accountInfo.appId});ZC.call(this,{apiName:"webapi_plugin_login",reqData:t,success:function(t){Object.assign(t,JSON.parse(t.respData.data)),delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:At.default.accountInfo.appId});QC.call(this,{apiName:"webapi_plugin_getuserinfo",reqData:t,success:function(t){t.userInfo=JSON.parse(t.respData.data),t.iv=t.respData.iv,t.signature=t.respData.signature,delete t.respData,"function"==typeof e.success&&e.success(t)},fail:e.fail,complete:e.complete})},getNativeUserInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(uo.getPluginId)(this);e.pluginId=t,Object($C._getNativeUserInfo)(e)},openSetting:Ut.openSetting,getSetting:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{miniprogram_appid:At.default.accountInfo.appId,filter_auth_status:1,with_app_auth:!0});nT.call(this,{apiName:"webapi_getwxapluginuserscope",reqData:t,success:function(t){var n=JSON.parse(t.respData.data),r={errMsg:"getSetting:ok"};r.authSetting=(n.auth_item||[]).reduce((function(e,t){return e[t.scope]=1===t.auth_status,e}),{}),n.user_all_app_auth&&(r.miniprogramAuthSetting=Object(XC.transformGetSettingResponse)(n.user_all_app_auth).authSetting||{}),"function"==typeof e.success&&e.success(r),"function"==typeof e.complete&&e.complete(r)},fail:function(t){var n={errMsg:t.errMsg||"getSetting:fail"};"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}})},operateWXData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(uo.getPluginId)(this);e.pluginId=t,Object(na._pluginOperateWXData)(e)},requestFacetoFacePayment:Ut.payment.requestFacetoFacePayment,requestPersonalPay:Ut.payment.requestPersonalPay,showModal:lk,showToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.image){if(0!==e.image.indexOf("/"))return void Object(R.beforeInvokeFail)("showToast",e,"parameter 'image' must be begin with '/'");var t=Object(uo.getPluginId)(this);e=Object.assign({},e,{image:__virtualDOM__.getPluginRoutePrefix(t)+e.image.substr(1)})}lu.interaction.showToast(e)},hideToast:sk,showLoading:ck,hideLoading:uk,showActionSheet:dk,pageScrollTo:lu.pageScrollTo,setPageStyle:lu.setPageStyle,setPageOrientation:lu.setPageOrientation,startPullDownRefresh:lu.startPullDownRefresh,stopPullDownRefresh:lu.stopPullDownRefresh,setNavigationBarTitle:fk,showNavigationBarLoading:pk,hideNavigationBarLoading:hk,setNavigationBarColor:vk,setNavigationBarAlpha:gk,setNavigationBarRightButton:_k,onTapNavigationBarRightButton:bk,getShareInfo:yk,showShareMenu:mk,hideShareMenu:wk,updateShareMenu:Ok,showShareImageMenu:Sk,setBackgroundColor:lu.setBackgroundColor,setBackgroundTextStyle:lu.setBackgroundTextStyle,navigateTo:Ik,redirectTo:Ek,navigateBack:Ck,switchTab:Tk,reLaunch:kk,getBackgroundAudioPlayerState:QT,playBackgroundAudio:ek,pauseBackgroundAudio:tk,seekBackgroundAudio:nk,stopBackgroundAudio:rk,onBackgroundAudioPlay:ok,onBackgroundAudioPause:ik,onBackgroundAudioStop:ak,setCookies:function(e){CC.call(this,Gi.SET_COOKIES_INDEX,(function(t){var n="setCookies:ok";if(t){var r=Object(Gi.setCookiesWithoutPermission)(e);r?(n=r,"function"==typeof e.fail&&e.fail({errMsg:n})):"function"==typeof e.success&&e.success({errMsg:n})}else n="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},getCookies:function(e){CC.call(this,Gi.GET_COOKIES_INDEX,(function(t){var n="getCookies:ok";if(t){var r=Object(Gi.getCookiesWithoutPermission)(e);"function"==typeof e.success&&e.success({errMsg:n,cookies:r})}else n="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:n});"function"==typeof e.complete&&e.complete({errMsg:n})}))},chooseShareGroup:kg,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(N.arrayBufferToBase64),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(N.base64ToArrayBuffer),openBusinessView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("openBusinessView",e,{businessType:""})){var t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,t.privateExtraData={__pluginAppId:Object(uo.getPluginId)(this)},Object(R.invokeMethod)("openBusinessView",t)}},joinVoIPChat:AC,exitVoIPChat:PC,updateVoIPChatMuteConfig:DC,onVoIPChatMembersChanged:xC,offVoIPChatMembersChanged:RC,onVoIPChatSpeakersChanged:MC,offVoIPChatSpeakersChanged:NC,onVoIPChatInterrupted:FC,offVoIPChatInterrupted:WC,subscribeVoIPVideoMembers:UC,onVoIPVideoMembersChanged:GC,offVoIPVideoMembersChanged:HC,onVoIPChatStateChanged:qC,offVoIPChatStateChanged:YC,createRewardedVideoAd:function(e){var t=Object(uo.getPluginId)(this);return wC(SC(SC({},e),{},{pluginId:t}))},createInterstitialAd:function(e){var t=Object(uo.getPluginId)(this);return function(e){return new QS(e)}(SC(SC({},e),{},{pluginId:t}))},updateWeChatApp:m_,reportPerformance:function(e,t,n){var r=Object(uo.getPluginId)(this),o=Object(uo.getPluginInfo)(this);!function(e,t,n,r){i_(e,t,n,r)}(e,t,n,{pluginId:r,customVersion:o?o.customVersion:""})},getPerformance:function(){var e=Object(uo.getPluginId)(this);return Object(a_.getPerformance4Plugin)({pluginId:e})},getLaunchOptionsSync:Qi.getLaunchOptionsSync,getEnterOptionsSync:Qi.getEnterOptionsSync,onThemeChange:Qi.onThemeChange,offThemeChange:Qi.offThemeChange,getVideoInfo:dr,compressVideo:fr,createUDPSocket:pT,serviceMarket:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AT(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AT(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},__cloudSDK__.serviceMarket),getRealtimeLogManager:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Eg.apply(void 0,[Object(uo.getPluginId)(this),Object(uo.getPluginVersion)(this)].concat(t))},authorizeForMiniProgram:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(M.beforeInvoke)("authorizeForMiniProgram",e,{scope:""})&&(tT.includes(e.scope)?Object(eT._authorize)({args:Object(uo.replaceErrMsgApiName)(e,"authorize","authorizeForMiniProgram")}):Object(M.beforeInvokeFail)("authorizeForMiniProgram",e,'scope "'+e.scope+'" is not supported to be authorized by plugin.'))},getPublicLibVersion:sv,startLocalServiceDiscovery:I.startLocalServiceDiscovery,stopLocalServiceDiscovery:I.stopLocalServiceDiscovery,onLocalServiceFound:I.onLocalServiceFound,offLocalServiceFound:I.offLocalServiceFound,onLocalServiceLost:I.onLocalServiceLost,offLocalServiceLost:I.offLocalServiceLost,onLocalServiceDiscoveryStop:I.onLocalServiceDiscoveryStop,offLocalServiceDiscoveryStop:I.offLocalServiceDiscoveryStop,onLocalServiceResolveFail:I.onLocalServiceResolveFail,offLocalServiceResolveFail:I.offLocalServiceResolveFail,loadFontFace:pr.loadFontFace,getBatteryInfo:d.getBatteryInfo,getBatteryInfoSync:d.getBatteryInfoSync,getAvailableAudioSources:qr,onAudioInterruptionBegin:ho,offAudioInterruptionBegin:vo,onAudioInterruptionEnd:_o,offAudioInterruptionEnd:bo,previewMedia:lo,openVideoEditor:Mo,saveFileToDisk:oT,openDocument:Sd.openDocument,getMenuButtonBoundingClientRect:rT.getMenuButtonBoundingClientRect,version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseAddress:Ut.chooseAddress,chooseInvoice:Ut.chooseInvoice,chooseInvoiceTitle:Ut.chooseInvoiceTitle},Pk=(PT={},TT.forEach((function(e){e.copyToWx&&(PT[e.name]=function(t){var n=Object(uo.getPluginId)(this);!function(e,t){var n=!0===At.default.debug,r="devtools"===At.default.platform;(n||r)&&console.warn("wx."+e+" is deprecated, and will be removed in future."),Object(br.reportDeprecatedAPI)(e+" ("+t+")")}(e.name,n),kT(n,e.permissionBytes,(function(r){r?e.factory(n)(t):Object(M.beforeInvokeFail)(e.name,t,"no permission")}))})})),PT);Object.keys(Pk).forEach((function(e){Ak[e]=Pk[e]}));var Dk=function(e,t){return new db(Ak,e,t)},jk=function(){return"undefined"==typeof BaseConsole?new __appServiceConsole__.BaseConsole:new BaseConsole};At.default.onReady((function(){!function(){if(P_("start to invokeGetPluginList"),At.default.appContactInfo&&At.default.appContactInfo.call_plugin_info)for(var e=At.default.appContactInfo.call_plugin_info,t=0;t<e.length;t++){var n=e[t],r=n.plugin_id;x_[r]=Xi({version:n.inner_version,customVersion:n.plugin_version||""}),W_(r,n.inner_version)}else if(At.default.plugins)for(var o in At.default.plugins){var i=At.default.plugins[o],a=i.provider;x_[a]=Xi({version:0,customVersion:i.version||""}),W_(a,0)}F_(1),P_("invokeGetPluginList -> ",x_)}(),Yi()||U_(5),H_()}));var xk=Hi.default.pluginInfos,Rk={};At.default.onReady((function(){"object"===Object(x.default)(At.default.env)&&(Rk.USER_DATA_PATH=At.default.env.USER_DATA_PATH)}));var Mk=Rk,Nk=n(182),Lk=n(134),Bk=1;At.default.onReady((function(){try{"number"==typeof At.default.wxAppInfo.maxWorkerConcurrent&&(Bk=At.default.wxAppInfo.maxWorkerConcurrent)}catch(e){}}));var Fk=["app-service.js","game.js","subContext.js"],Wk=n(119),Uk=function(e,t,n){for(var r in t){if("exportToAppServiceSDK"===r)return;e[r]=t[r]}["onPageReload"].forEach((function(r){t[r]&&(e[r]=function(e){t[r].call(n,e)})}))};function Vk(){return At.default.subpackages||At.default.subPackages||[]}function Gk(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Vk(),n=0;n<t.length;n++){var r=t[n];if(0===e.indexOf(r.root))return r}return null}function Hk(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Gk(e);return!!(t&&t.independent&&t.isolated)}var zk={};Object(R.subscribe)("media_banned",(function(e){var t=e.index,n=e.permissionByte;zk[t]=n}));var qk=function(){return zk},Yk=null,Kk=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("showAuthorize",e,{apply:""})){var t=At.default.accountInfo.nickname,n=At.default.accountInfo.icon,r=JSON.stringify({nickname:t,icon:n,apply:e.apply,overlay:e.overlay}),o=Object(iu.setNavigateBackInterception)((function(e){[iu.NavigationBackTypes.BottomBackButton,iu.NavigationBackTypes.NavigationBackInterceptionType,iu.NavigationBackTypes.NavigateBackCall].includes(e.type)&&Yk&&(Yk.handleCancel(),Yk=null)}));__sclEngine__.initScl((function(t){(Yk=t.mainRoot.append("authorize",{input:r})).addListener("confirm",(function(){Object(iu.stopNavigateBackInterception)(o),Object(R.beforeInvokeCallback)({name:"showAuthorize",args:e})})),Yk.addListener("cancel",(function(){Object(iu.stopNavigateBackInterception)(o),Object(R.beforeInvokeFail)("showAuthorize",e,"cancel")}))}))}};function Jk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Reporter.reportKeyValue({key:"Handoff",value:[At.default.appType+1e3,At.default.appLaunchInfo.scene,e,t,n,r,Object(No._getCurrentNetworkType)(),""].join(",")})}var Xk=function(e){Object(R.invokeMethod)("checkHandoffEnabled",e)},$k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path,n=e.fromButton;n?Object(gl.checkPermissionSync)("handoff")?Xk({success:function(e){var n=e.isEnabled,r=e.errCode;n?(Jk(2,2,2),Kk({apply:"在电脑端微信打开小程序",success:function(){Jk(2,2,1),Object(R.invokeMethod)("startHandoff",{path:t,actionId:2},{beforeSuccess:function(){return Jk(2,1,1)},beforeFail:function(e){return Jk(2,1,0,e.errCode)}})},fail:function(){Jk(2,2,0)}})):Jk(2,1,0,r)}}):console.warn("startHandOff:fail no permission"):Object(R.invokeMethod)("startHandoff",{path:t,actionId:1},{beforeSuccess:function(){return Jk(1,1,1)},beforeFail:function(e){return Jk(1,1,0,e.errCode)}})},Zk=function(e,t){Object(R.invokeMethod)("getAppConfig",e,t)},Qk=function(e){Object(R.onMethod)("onAppConfig",e)},eA=function(e){Object(R.onMethod)("onPullDownRefresh",e)},tA=function(e){Object(R.onMethod)("onShareAppMessage",e)},nA=function(e){Object(R.onMethod)("onAddToFavorites",e)},rA=function(e){Object(R.onMethod)("onStartHandoff",e)},oA=function(e,t){Object(R.invokeMethod)("addToFavorites",e,t)},iA=function(e){Object(R.onMethod)("onTabItemTap",e)},aA=function(e,t){Object(R.publish)("analyticsConfig",e,t)},sA=function(e,t){Object(R.invokeMethod)("reportRealtimeAction",e,t)},cA=function(e,t){Object(R.invokeMethod)("shareAppMessage",e,t)},uA=function(e,t){Object(R.invokeMethod)("shareAppMessageDirectly",e,t)},lA=function(e,t){Object(R.invokeMethod)("shareAppMessageToSpecificContactDirectly",e,t)},dA=function(e,t){Object(R.invokeMethod)("shareAppMessageForFakeNative",e,t)},fA=function(e,t){Object(R.invokeMethod)("shareAppMessageToSpecificContactForFakeNativeDirectly",e,t)},pA=function(e,t){Object(R.invokeMethod)("checkHandoffEnabled",e,t)},hA=function(e){Object(R.subscribe)("analyticsReport",e)},vA=function(e){Object(R.subscribe)("recycleStatistics",e)},gA=function(e){Object(R.subscribe)("savePageState",e)},_A=function(e){Object(R.subscribe)("tapShareButton",e)},bA=function(e){Object(R.subscribe)("tapHandoffButton",e)},yA=function(e){Object(R.subscribe)("tapShareTimeLineButton",e)},mA=function(e,t){Object(R.invokeMethod)("showUpdatableMessageSubscribeButton",e,t)},wA=function(e){return Object(R.onMethod)("onShareTimeline",e)},OA=function(e,t){return Object(R.invokeMethod)("shareTimeline",e,t)},SA=function(e){return Object(R.invokeMethod)("showShareTimelineMenu",e)},IA=Qi.getInnerEnterOptionsSync,EA=Qi._onAppUnhang,CA=Qi.onPageNotFound,TA=Qi._onThemeChange,kA=Qi.onAppEnterForeground,AA=Qi.onAppEnterBackground,PA=Qi._onAppShow,DA=Qi._onAppHide,jA=Qi.onError,xA=Qi.onUnhandledRejection,RA=Qi._getLaunchOptionsSync,MA=Qi.emitIsloatedAppShow,NA=Qi.emitIsloatedAppHide,LA=lu.navigationBar._onNavigationBarTitleUpdate,BA=Ut.share.showShareMenu,FA=Ut.share.userShareMenuState,WA=Ut.share.ShareInfoStorage,UA=lu.route._triggerBeforeUnloadPage,VA=lu.route._triggerBeforeShareAppMessage,GA=Qi.onAppRoute,HA=Qi.onAppRouteDone,zA=function(e){lu.route.onPageReload.call(this,e)},qA=lu.event.onWebviewEvent,YA=function(e,t){Object(R.publish)("functionalPage",e,t)},KA=function(e,t){Object(R.publish)("pageScrollTo",e,t)},JA=function(e,t){Object(R.publish)("telecontrol",e,t)},XA=function(e,t){Object(R.publish)("__updateAppData",e,t)},$A=function(e){Object(R.subscribe)("checkWebviewAliveOk",e)},ZA=function(e,t){Object(R.publish)("checkWebviewAlive",e,t)},QA=function(e){Object(R.subscribe)("subjectChangeInfo",e)},eP=function(e){Object(R.baseOperateWXData)({data:{api_name:"webapi_report_data",data:e}})},tP=function(e){Object(R.subscribe)("vdCallComponentMethodForWxs",e)},nP=new U.default;Object(R.onMethod)("onLoadSubPackageTaskStateChange",(function(e){nP.emit(e.state,e.taskId,e)}));var rP=n(144),oP={},iP=[],aP=new WeakMap,sP=new WeakMap,cP=function(e){return oP[e]},uP=function(e){var t=Object.assign({},e);return delete t.taskId,delete t.state,delete t.moduleName,t},lP=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e;"string"!=typeof n&&console.error("SubContext onSubPackageReady error: moduleName is empty"),n.endsWith(".js")||(n.endsWith("/")||(n+="/"),n+="game.js");var r=rP.pageStorage.get();if(Object(Lo.isIsolateContext)()&&Object(Lo.isGame)()&&!t&&!r)return"__APP__"===e?__subContextEngine__.getGameContext().evaluateScriptFile("game.js"):__subContextEngine__.getGameContext().evaluateScriptFile(n)};nP.on("success",function(){var e=Object(Bt.default)(Lt.a.mark((function e(t,n){var r,o,i,a;return Lt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=cP(t),delete oP[t],!r){e.next=12;break}return o=n.moduleName,i=aP.get(r),a=uP(n),iP.push(o),e.next=9,lP(o,n.isMonkeyTest);case 9:a.errMsg="loadSubpackage:ok","function"==typeof i.success&&i.success(a),"function"==typeof i.complete&&i.complete(a);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),nP.on("fail",(function(e,t){var n=cP(e);if(delete oP[e],n){var r=aP.get(n),o=uP(t);o.errMsg="loadSubpackage:fail module not found","function"==typeof r.fail&&r.fail(o),"function"==typeof r.complete&&r.complete(o)}})),nP.on("progressUpdate",(function(e,t){var n=cP(e);if(n){var r=sP.get(n),o=uP(t);"function"==typeof r&&r(o)}}));var dP=function(){var e,t=this,n=aP.get(this);if(iP.indexOf(n.name)>=0){var r={errMsg:"loadSubpackage:ok",moduleName:n.name};return"function"==typeof n.success&&n.success(r),void("function"==typeof n.complete&&n.complete(r))}if("__APP__"===n.name&&ee.IS_DEVTOOLS&&Object(Lo.isIsolateContext)()&&Object(Lo.isGame)()){iP.push(n.name),lP(n.name);var o={errMsg:"loadSubpackage:ok"};return"function"==typeof n.success&&n.success(o),void("function"==typeof n.complete&&n.complete(o))}if(Object(R.invokeMethod)("createLoadSubPackageTask",{moduleName:n.name,success:function(e){oP[e.loadTaskId]=t},fail:function(t){e=t.errMsg,ee.IS_IOS&&(t.errMsg="loadSubpackage:fail module not found","function"==typeof n.fail&&__errorTracer__.surroundThirdByTryCatch(n.fail)(t),"function"==typeof n.complete&&__errorTracer__.surroundThirdByTryCatch(n.complete)(t))}}),e)throw new Error(e.replace(/createLoadSubPackageTask:fail[ :]/,""))},fP=function(){function e(t){Object($.default)(this,e),aP.set(this,t),["success","fail","complete"].forEach((function(e){"function"==typeof t[e]&&(t[e]=__errorTracer__.surroundThirdByTryCatch(t[e],"at api loadSubpackage "+e+" callback function"))})),dP.call(this)}return Object(K.default)(e,[{key:"onProgressUpdate",value:function(e){sP.set(this,(function(t){void 0!==t.totalBytesWriten&&(t.totalBytesWritten=t.totalBytesWriten,delete t.totalBytesWriten),"function"==typeof e&&__errorTracer__.surroundThirdByTryCatch(e,"at LoadTask.onProgressUpdate callback function")(t)}))}}]),e}(),pP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if(Object(R.beforeInvoke)("loadSubPackage",t,{name:""})){var n=At.default.subPackages||At.default.subpackages;if(n){n.forEach((function(e){t.name!==e.alias&&t.name!==e.name||(t.name=e.root)}));var r="__APP__"===t.name||"__GAME__"===t.name;r||t.name.startsWith("/")||(t.name="/"+t.name),r||t.name.endsWith(".js")||t.name.endsWith("/")||(t.name=t.name+"/"),"__GAME__"===t.name&&(t.name="__APP__");try{var o=new fP(t);return o}catch(e){return void Object(R.beforeInvokeFail)("loadSubpackage",t,e.message)}}else Object(R.beforeInvokeFail)("loadSubpackage",t,"Your subpackages configuration is invalid.")}},hP={};function vP(){return new Promise((function(e,t){var n=No._getCurrentNetworkType();n?e(n):No.getNetworkType({success:function(n){n.networkType?e(n.networkType):t(new Error("get network type failed."))},fail:t})}))}At.default.onReady((function(){Object(Wt.onAppRouteDone)((function(e){var t=e.path;if(At.default.preloadRule&&At.default.preloadRule[t])return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Array.isArray(e.packages))return Promise.reject(new Error("packages must be an array."));"all"!==e.network&&(e.network="wifi"),console.info("preloadSubpackages: "+e.packages.join(", "));var t=e.packages.filter((function(e){return!(e in hP)}));return("all"!==e.network?vP().then((function(e){if("wifi"!==e.toLowerCase())return Promise.reject(new Error("network type does not match, '"+e+"' !== 'wifi'"))}),(function(){return Promise.reject(new Error("get network type failed."))})):Promise.resolve()).then((function(){return Promise.all(t.map((function(e){return new Promise((function(n){pP({name:e,success:function(){hP[e]=!0,n(t)},fail:function(t){var r=new Error(t.errMsg.replace("loadSubpackage:fail",""));r.packageName=e,n(r)}})}))}))).then((function(e){if((e=e.filter((function(e){return e instanceof Error}))).length>0){var t=new Error("preload subpackages failed.");return t._detail=e,Promise.reject(t)}}))}))}(At.default.preloadRule[t]).then((function(){console.info("preloadSubpackages: success")}),(function(e){e._detail?(console.group("preloadSubpackages fail: "+e.message),e._detail.forEach((function(e){console.warn(e.packageName+": "+e.message)})),console.groupEnd()):console.warn("preloadSubpackages fail: "+e.message)}))}))}));var gP=function(e){nP.on("success",e)},_P=function(){return At.default.subPackages||At.default.subpackages},bP=function(e){var t=/^rgba?\((.+)\)/.exec(e);if(!t)return e;var n=t[1].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e})).join("");return n="#"+n},yP=function(e){e.type=e.type||"play",Object(R.invokeMethod)("operateCallTone",e)},mP=function(e){Object(R.invokeMethod)("hasJoinVoIPChat",e)},wP={voip1v1:1},OP={};Object.keys(wP).forEach((function(e){OP[wP[e]]=e}));var SP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(wP[e.msgType]){var t=Object(df.default)("sendChannelMessage","webapi_sendwxachannelmsg",{},{},(function(e){return{msg_type:wP[e.msgType],receiver_openid:e.receiver,msg_content:JSON.stringify(e.data||{})}}),(function(e){delete e.rawData,e.msgId=e.msg_id,delete e.msg_id}));t(e)}else Object(R.beforeInvokeFail)("sendChannelMessage",e,"lock of message type")},IP=Object(fo.getEventManager)("receiveMsgChannel"),EP=IP.onMethod;IP.offMethod;Object(R.onMethod)("onReceiveMsgChannel",(function(e){e.msgType=OP[e.msgType],e.data=JSON.parse(e.msgContent),delete e.msgContent,IP.emit(e)}));var CP=n(171),TP=["对方版本暂不支持发起视频通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的视频通话请求","对方正在通话中，请稍后再播"],kP=["已接通","对方已挂断，通话结束","已拒绝，通话结束"],AP=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","对方已切换到语音通话，请使用听筒接听","已切换到语音通话，请使用听筒接听"],PP=["对方版本暂不支持发起语音通话","对方可能不在小程序内，建议稍后再次尝试","对方未接听","已接通","通话已取消","对方拒绝了您的语音通话请求","对方正在通话中，请稍后再播","对方设备未开启通话选项"],DP=["已接通，请使用听筒接听","对方已挂断，通话结束","已拒绝，通话结束"],jP=["当前通话对方网络不佳","当前通话你的网络不佳","连接中断，通话结束","网络异常，通话结束","对方已挂断，通话结束","通话结束","声音将通过扬声器播放","声音将通过听筒播放"],xP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(re.isObject)(e)&&(e=Object.keys(e));var n={};return e.forEach((function(e){e in t&&void 0!==t[e]&&(n[e]=t[e])})),n},RP=new U.default({maxListeners:2e5}),MP={onTextViewClick:"click",onImageViewClick:"click",onTextViewDrag:"drag",onTouchStart:"touchstart",onTouchMove:"touchmove",onTouchEnd:"touchend",onTouchCancel:"touchcancel"};Object.keys(MP).forEach((function(e){Object(V.onNativeEvent)(e,(function(t){var n=MP[e],r=JSON.parse(t.data).id;RP.emit(n+"-"+r,t)}))}));var NP,LP=32768,BP=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,e);var n=t.props,r=void 0===n?{}:n,o=t.style,i=void 0===o?{}:o,a=t.position,s=void 0===a?{}:a,c=t.dataset,u=void 0===c?{}:c;this.parent=null,this.parentId=0,this.children={},this.events=[],this.id=++LP,this.props=r,this.style=i,this.position=s,this.dataset=u,this.bubbleHandler()}return Object(K.default)(e,[{key:"bubbleHandler",value:function(){var e=this;["touchstart","touchmove","touchend","touchcancel","click"].forEach((function(t){e.on(t,(function(n){if(e.props.bubbles&&e.parent&&!e.parent.props.transEvt){var r=e.position.left,o=e.position.top;if("click"===t){if(!e.parent.props.clickable)return;e.parent.emit(t)}else if("touchstart"===t||"touchend"===t){if(!e.parent.props.gesture)return;var i=Object.assign({},n.touch);i.x+=r,i.y+=o,i.id=e.parent.id,e.parent.emit(t,{viewId:e.parent.id,touch:i})}else{if(!e.parent.props.gesture)return;var a=n.touches.map((function(t){return{x:t.x+r,y:t.y+o,id:e.parent.id}}));e.parent.emit(t,{viewId:e.parent.id,touches:a})}}}))}))}},{key:"getAbsolutePositon",value:function(){if(!this.parent)return{left:0,top:0};var e=this.parent.getAbsolutePositon(),t=this.position,n=t.left,r=t.top;return{left:n+e.left,top:r+e.top}}},{key:"hide",value:function(){return this.props.hide=!0,this.update()}},{key:"show",value:function(){return this.props.hide=!1,this.update()}},{key:"insert",value:function(){var e=this,t=this.insertView(),n=[];return Object.keys(this.children).forEach((function(t){var r=e.children[t];n.push(r.insert())})),Promise.all([t].concat(n)).then((function(){e.emit("ready")}),(function(t){e.emit("ready")}))}},{key:"update",value:function(){return this.updateView()}},{key:"remove",value:function(){var e=this;this.parent&&this.parent.removeChild(this);var t=[];Object.keys(this.children).forEach((function(n){var r=e.children[n];e.removeChild(r),t.push(r.remove())})),this.removeListeners();var n=this.removeView();return Promise.all([n].concat(t)).catch((function(e){}))}},{key:"insertView",value:function(){return Promise.resolve()}},{key:"updateView",value:function(){return Promise.resolve()}},{key:"removeView",value:function(){return Promise.resolve()}},{key:"removeListeners",value:function(){var e=this;this.events.forEach((function(t){RP.removeAllListeners(t+"-"+e.id)}))}},{key:"appendChild",value:function(e){e.parent=this,e.parentId=this.id,this.props.independent&&(e.props.independent=!0),this.children[e.id]=e}},{key:"empty",value:function(){var e=this;Object.keys(this.children).forEach((function(t){var n=e.children[t];e.removeChild(n),n.remove()}))}},{key:"removeChild",value:function(e){delete this.children[e.id],e.parent=null,e.parentId=0}},{key:"emit",value:function(e,t){RP.emit(e+"-"+this.id,t)}},{key:"on",value:function(e,t){RP.on(e+"-"+this.id,t)}},{key:"off",value:function(e,t){RP.off(e+"-"+this.id,t)}},{key:"once",value:function(e,t){RP.once(e+"-"+this.id,t)}}]),e}();function FP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var WP,UP=(J((NP=function(e){Object(G.default)(n,e);var t=FP(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,n);var o=(e=t.call(this,r)).getDefaultProps(),i=e.getDefaultLabel(),a=e.getDefaultStyle();e.events=["click","drag","touchstart","touchmove","touchend","ready"],e.style.backgroundColor&&(e.style.bgColor=e.style.backgroundColor);var s=e.props.label;return e.style=Object.assign(a,xP(a,e.style)),e.props=Object.assign(o,xP(o,e.props)),e.label=Object.assign(i,xP(i,s)),e.label.lineHeight=e.label.lineHeight||1.2*e.label.fontSize,e}return Object(K.default)(n,[{key:"getDefaultProps",value:function(){return{hide:!1,clickable:!1,gesture:!1,transEvt:!1,sendTo:"appservice",fullscreen:!1,independent:!1,bubbles:!1,draggable:!1,dragConfig:{}}}},{key:"getDefaultLabel",value:function(){return{content:"",color:"#000000",fontSize:12,textAlign:"left",fontWeight:"normal",lineHeight:0,lineBreak:"clip",whiteSpace:"nowrap"}}},{key:"getDefaultStyle",value:function(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,overflow:"hidden",rotate:0,scaleX:1,scaleY:1,zIndex:0,fixed:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,draggable:this.props.draggable,dragConfig:this.props.dragConfig,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,data:JSON.stringify({id:this.id}),label:this.label,fullscreen:this.props.fullscreen,independent:this.props.independent,zIndex:this.style.zIndex,fixed:this.style.fixed,style:this.style,notCoverRect:!0};Object.assign(t,e),Object(R.invokeMethod)("insertTextView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,hide:this.props.hide,label:this.label,independent:this.props.independent,style:this.style,fixed:this.style.fixed,zIndex:this.style.zIndex,notCoverRect:!0,draggable:this.props.draggable,dragConfig:this.props.dragConfig};Object.assign(t,e);Object(R.invokeMethod)("updateTextView",t,{beforeFail:function(e){}})}},{key:"removeView",value:function(e){var t=Object.assign({independent:this.props.independent,viewId:this.id},e);Object(R.invokeMethod)("removeTextView",t,{beforeFail:function(e){}})}},{key:"animate",value:function(e){var t=this,n={duration:300,easing:"linear",viewId:this.id,finalStyle:{},independent:this.props.independent},r=Object.assign(n,e);Object(R.invokeMethod)("animateCoverView",r,{beforeSuccess:function(){Object.keys(r.finalStyle).forEach((function(e){e in t.position?t.position[e]=r.finalStyle[e]:e in t.style&&(t.style[e]=r.finalStyle[e])}))},beforeFail:function(e){wxNativeConsole.error("animateView fail",t.id,r,e)}})}},{key:"measureText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=0,n={text:e,fontSize:this.label.fontSize,fontWeight:this.label.fontWeight,fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t=e.width||0}};return Object(R.invokeMethod)("measureText",n),t}},{key:"fadeIn",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.show().then((function(){return e.animate({finalStyle:{opacity:1},duration:t,easing:n})}))}},{key:"fadeOut",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.animate({finalStyle:{opacity:0},duration:t,easing:n}).then((function(){return e.hide()}))}},{key:"fadeTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear";return this.animate({finalStyle:{opacity:e},duration:t,easing:n})}},{key:"slideUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear";return this.animate({finalStyle:{height:0},duration:e,easing:t})}},{key:"slideDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"linear",n=this.position.height;return this.position.height=0,this.update(),this.animate({finalStyle:{height:n},duration:e,easing:t})}}]),n}(BP)).prototype,"insertView",[Z.promised],Object.getOwnPropertyDescriptor(NP.prototype,"insertView"),NP.prototype),J(NP.prototype,"updateView",[Z.promised],Object.getOwnPropertyDescriptor(NP.prototype,"updateView"),NP.prototype),J(NP.prototype,"removeView",[Z.promised],Object.getOwnPropertyDescriptor(NP.prototype,"removeView"),NP.prototype),J(NP.prototype,"animate",[Z.promised],Object.getOwnPropertyDescriptor(NP.prototype,"animate"),NP.prototype),NP);function VP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var GP,HP=(J((WP=function(e){Object(G.default)(n,e);var t=VP(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,n);var o=(e=t.call(this,r)).getDefaultProps(),i=e.getDefaultStyle();return e.events=["click","touchstart","touchmove","touchend","ready"],e.style.backgroundColor&&(e.style.bgColor=e.style.backgroundColor),e.style=Object.assign(i,xP(i,e.style)),e.props=Object.assign(o,xP(o,e.props)),e}return Object(K.default)(n,[{key:"getDefaultProps",value:function(){return{hide:!1,iconPath:"",clickable:!1,gesture:!1,transEvt:!1,bubbles:!1,sendTo:"appservice",independent:!1}}},{key:"getDefaultStyle",value:function(){return{bgColor:"#ffffff00",borderRadius:0,borderWidth:0,borderColor:"#000000",padding:[0,0,0,0],opacity:1,zIndex:0,fixed:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,hide:this.props.hide,iconPath:this.props.iconPath,clickable:this.props.clickable,gesture:this.props.gesture,transEvt:this.props.transEvt,sendTo:this.props.sendTo,independent:this.props.independent,data:JSON.stringify({id:this.id}),style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,notCoverRect:!0};Object.assign(t,e),Object(R.invokeMethod)("insertImageView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,iconPath:this.props.iconPath,hide:this.props.hide,style:this.style,zIndex:this.style.zIndex,fixed:this.style.fixed,independent:this.props.independent,notCoverRect:!0};Object.assign(t,e),Object(R.invokeMethod)("updateImageView",t)}},{key:"removeView",value:function(e){var t=Object.assign({independent:this.props.independent,viewId:this.id},e);Object(R.invokeMethod)("removeImageView",t)}}]),n}(BP)).prototype,"insertView",[Z.promised],Object.getOwnPropertyDescriptor(WP.prototype,"insertView"),WP.prototype),J(WP.prototype,"updateView",[Z.promised],Object.getOwnPropertyDescriptor(WP.prototype,"updateView"),WP.prototype),J(WP.prototype,"removeView",[Z.promised],Object.getOwnPropertyDescriptor(WP.prototype,"removeView"),WP.prototype),WP);function zP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var qP,YP=(J((GP=function(e){Object(G.default)(n,e);var t=zP(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,n);var o=(e=t.call(this,r)).getDefaultProps();return e.events=["ready"],e.props=Object.assign(o,xP(o,e.props)),e}return Object(K.default)(n,[{key:"getDefaultProps",value:function(){return{independent:!1,mode:"normal",devicePosition:"front",resolution:"medium",hide:!1}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,resolution:this.props.resolution,hide:this.props.hide};Object.assign(t,e),Object(R.invokeMethod)("insertCamera",t)}},{key:"updateView",value:function(e){var t={cameraId:this.id,position:this.position,independent:this.props.independent,mode:this.props.mode,devicePosition:this.props.devicePosition,hide:this.props.hide};Object.assign(t,e),Object(R.invokeMethod)("updateCamera",t)}},{key:"removeView",value:function(e){var t=Object.assign({cameraId:this.id,independent:this.props.independent},e);Object(R.invokeMethod)("removeCamera",t)}}]),n}(BP)).prototype,"insertView",[Z.promised],Object.getOwnPropertyDescriptor(GP.prototype,"insertView"),GP.prototype),J(GP.prototype,"updateView",[Z.promised],Object.getOwnPropertyDescriptor(GP.prototype,"updateView"),GP.prototype),J(GP.prototype,"removeView",[Z.promised],Object.getOwnPropertyDescriptor(GP.prototype,"removeView"),GP.prototype),GP);function KP(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(z.default)(e);if(t){var o=Object(z.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(H.default)(this,n)}}var JP=(J((qP=function(e){Object(G.default)(n,e);var t=KP(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object($.default)(this,n);var o=(e=t.call(this,r)).getDefaultProps();return e.events=["ready"],e.props=Object.assign(o,xP(o,e.props)),e}return Object(K.default)(n,[{key:"getDefaultProps",value:function(){return{independent:!1,self:!0,configCamera:"front",openid:""}}},{key:"insertView",value:function(e){var t={parentId:this.parentId,viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),Object(R.invokeMethod)("insertVoIPView",t)}},{key:"updateView",value:function(e){var t={viewId:this.id,position:this.position,type:this.props.self?"camera":"video",openId:this.props.openid,config:{camera:this.props.configCamera},independent:this.props.independent};Object.assign(t,e),Object(R.invokeMethod)("updateVoIPView",t)}},{key:"removeView",value:function(e){var t=Object.assign({viewId:this.id,independent:this.props.independent,openId:this.props.openid},e);Object(R.invokeMethod)("removeVoIPView",t)}}]),n}(BP)).prototype,"insertView",[Z.promised],Object.getOwnPropertyDescriptor(qP.prototype,"insertView"),qP.prototype),J(qP.prototype,"updateView",[Z.promised],Object.getOwnPropertyDescriptor(qP.prototype,"updateView"),qP.prototype),J(qP.prototype,"removeView",[Z.promised],Object.getOwnPropertyDescriptor(qP.prototype,"removeView"),qP.prototype),qP),XP=n(181),$P=n(136),ZP={view:UP,image:HP,voip:JP,camera:YP},QP=function(){function e(t,n){Object($.default)(this,e),this.elementClassMap={},this.root=null;var r=$P(t).root;this.addStyle(r,n),Object(XP.default)(r),this.root=this.compose(r)}return Object(K.default)(e,[{key:"querySelector",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.querySelectorAll(e)[0]||null}},{key:"querySelectorAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.startsWith("."))return null;var t=this.elementClassMap[e.slice(1)];return t||[]}},{key:"addStyle",value:function(e,t){var n=this,r=e.attributes,o={},i=["id","class","name"];e.tagName=e.name,Object.keys(r).forEach((function(n){var a=r[n];if(""===a||"true"===a?r[n]=!0:"false"===a&&(r[n]=!1),n.startsWith("data-")){i.push(n);var s=n.slice(5);o[s]=r[n]}"class"===n&&(e.class=a&&a.trim().split(/\s+/)||[],e.style=e.class.reduce((function(e,n){var r=t[n]||{};return Object.assign(e,r)}),{}))})),i.forEach((function(e){return delete r[e]})),e.dataset=o,e.children.forEach((function(e){n.addStyle(e,t)}))}},{key:"compose",value:function(e){var t=this,n=e.tagName,r=ZP[n],o=e.layout,i=e.attributes,a=e.dataset,s=e.content,c=e.style;if(i.hidden)return null;"view"===n&&(i.label=c,i.label.content=s,i.label.padding=c.labelPadding);var u=new r({position:o,props:i,dataset:a,style:c});return e.class.forEach((function(e){t.elementClassMap[e]||(t.elementClassMap[e]=[]),t.elementClassMap[e].push(u)})),e.children.forEach((function(n){e.attributes.independent&&(n.attributes.independent=!0);var r=t.compose(n);r&&u.appendChild(r)})),u}}]),e}(),eD="https://res.wx.qq.com/op_res/uv-tkcFVNYmjSLo8oYLi6eHVUT_JFSWYhjoYd77-hNkfpHKJrm4qL1nTZBE7JdfM",tD="https://res.wx.qq.com/op_res/eG0naaMvi5-ResXXogaG1JfWqr7axjp_DgJu1Q-Al-_KPOFwDImGlDAd1y8rHxv2",nD="https://res.wx.qq.com/op_res/abRQv44fOA20modJp4dTaplyqzBvee7vYikt8Um1XjPwg4gGibt6kvjqG_ZgN4tl",rD="https://res.wx.qq.com/op_res/Wvt127UTzax9olBJldzRshntgwJBswVtASV7AoLiSSsx85W_g2Umr33qRtOElgvD",oD="https://res.wx.qq.com/op_res/ZjsLKqozyScMcOTIqmL1LHdV6M95Hz9luJu65Tf4jmzrYgBPKFKxKxDGw6GAaki9";var iD=0,aD=1,sD=2,cD=3,uD=4,lD=5,dD=6,fD=7,pD=8,hD=10,vD=11,gD=12,_D="voip1v1",bD=function e(t){Object($.default)(this,e);var n=t.roomType,r=void 0===n?"video":n,o=t.roomId,i=void 0===o?"":o,a=t.groupId,s=void 0===a?0:a,c=t.disableSwitchVoice,u=void 0!==c&&c,l=t.command,d=void 0===l?-1:l,f=t.caller,p=void 0===f?{}:f,h=t.listener,v=void 0===h?{}:h,g=t.sender,_=void 0===g?"":g;this.roomType=r,this.roomId=i,this.groupId=s,this.disableSwitchVoice=u,this.command=d,this.caller=p,this.listener=v,this.sender=_};function yD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mD(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yD(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wD={};At.default.onReady((function(){var e,t,n,r,o,i,a,s,c,u,l,d,f,p,h=(e=Object(ea.getSystemInfoSync)(),t=e.screenWidth,n=e.screenHeight,r=e.statusBarHeight,o=ee.IS_IOS?44:46,c=(s=t-32)-32-24,u=n-105,l=n-226,d=t-151,f={left:t-87,top:24,width:75,height:162},p={left:0,top:0,width:t,height:a=n-(i=r+o+12)},{styleTree:{container:{width:t,height:n,zIndex:(At.default.menuButtonInfo&&At.default.menuButtonInfo.zIndex||1e3)-1},overlay:{position:"absolute",left:0,top:0,width:t,height:n,backgroundColor:"#000000",opacity:0},navigationBar:{marginTop:r,width:t,height:o,color:"#ffffff",lineHeight:o,fontSize:17,textAlign:"center",opacity:0},maxWindow:{position:"absolute",left:0,top:n,width:t,height:a+16,borderRadius:16,backgroundColor:bP("rgba(38,41,48,0.7)")},cameraContainer:{position:"absolute",left:0,top:0,width:t,height:a},camera:{position:"absolute",left:0,top:0,width:t,height:a},voipContainer:{position:"absolute",left:0,top:0,width:t,height:a},mainContainer:{position:"absolute",left:0,top:0,width:t,height:a},videoAreaContainer:{position:"absolute",left:0,top:0,width:t,height:a},voiceAreaContainer:{position:"absolute",left:0,top:0,width:t,height:a},previewWindow:{width:t,height:a},scaleBtn:{position:"absolute",left:0,top:0,width:60,height:60},scaleBtnIcon:{position:"absolute",left:16,top:24,width:24,height:24},videoInfoWindow:{flexDirection:"row",justifyContent:"flex-end",position:"absolute",right:12,top:24,height:48,width:c},videoInfoWindowNicknameCenter:{position:"absolute",textAlign:"center",color:"#ffffff",lineHeight:20,fontSize:14,height:20,width:t,top:24,left:0},voiceInfoWindow:{position:"absolute",top:234,left:0,width:t,height:200,alignItems:"center"},voiceInfoWindowHeadImage:{width:96,height:96,borderRadius:16,marginBottom:8},voiceInfoWindowNickname:{width:t,height:30,color:"#ffffff",lineHeight:30,fontSize:22,textAlign:"center"},voiceInfoWindowTips:{marginTop:4,width:t,height:20,color:bP("rgba(255,255,255,0.9)"),lineHeight:20,fontSize:14,textAlign:"center"},duration:{position:"absolute",bottom:177,width:t,height:16,color:"#ffffff",lineHeight:16,fontSize:14,textAlign:"center"},tips:{position:"absolute",left:t/2-33,bottom:225,width:66,labelPadding:[0,12,0,12],height:28,color:"#ffffff",lineHeight:28,fontSize:14,textAlign:"center",backgroundColor:bP("rgba(0,0,0,0.5)"),borderRadius:6},operationContainer:{position:"absolute",flexDirection:"row",justifyContent:"space-between",bottom:0,width:t,height:149,paddingLeft:38,paddingRight:38},operationItemContainer:{width:84,height:149,alignItems:"center"},listenItemContainer:{height:235},listenArea:{height:235},callItemContainer:{height:235},callArea:{height:235,justifyContent:"center"},switchVoiceText:{marginTop:8},operationItemTop:{width:84,height:57,alignItems:"center"},operationItemBottom:{position:"absolute",bottom:0,left:0,width:84,height:149,alignItems:"center"},callBtnArea:{position:"absolute",bottom:0,left:0,width:t,height:149,alignItems:"center"},operationItemBtn:{borderRadius:32,justifyContent:"center",alignItems:"center",width:64,height:64},operationItemIcon:{width:64,height:64},switchVoiceIcon:{width:32,height:32},operationItemText:{marginTop:16,color:"#ffffffe5",lineHeight:17,fontSize:12,textAlign:"center",width:104,height:17,overflow:"visible"},videoInfoWindowInfo:{width:c-60,height:48},videoInfoWindowTips:{marginTop:4,width:c-60,height:20,color:bP("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14,textAlign:"right"},videoInfoWindowNickname:{width:c-60,height:24,color:"#ffffff",lineHeight:24,fontSize:17,textAlign:"right"},videoInfoWindowHeadImage:{marginLeft:12,width:48,height:48,borderRadius:8},minPreviewWindowMask:mD({position:"absolute"},f),previewWindowSelfContainer:mD(mD({position:"absolute"},f),{},{zIndex:2}),previewWindowOtherContainer:mD(mD({position:"absolute"},p),{},{zIndex:1}),maskTop:{position:"absolute",left:0,top:0,width:t,height:145},maskBottom:{position:"absolute",left:0,top:a-201,width:t,height:201}},minWindowStyle1:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",left:16,top:u,height:72,width:s,backgroundColor:bP("rgba(38,41,48,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowLeft:{flexDirection:"row",paddingLeft:16,paddingRight:16,height:48,width:c},minWindowVoipContainer:{paddingRight:16,width:64,height:48,borderRadius:6},minWindowHeadImage:{width:48,height:48,borderRadius:6},minWindowVoip:{position:"absolute",left:0,top:0,width:48,height:48,borderRadius:6},minWindowInfo:{width:c-64,height:48},minWindowNickname:{width:c-64,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:4,width:c-64,height:20,color:bP("rgba(255, 255, 255, 0.7)"),lineHeight:20,fontSize:14},minWindowRight:{width:32,height:51},minWindowHangupIcon:{width:32,height:32},minWindowHangupText:{marginTop:2,width:32,height:17,color:bP("rgba(255, 255, 255, 0.9)"),lineHeight:17,fontSize:12,textAlign:"center"}},minWindowStyle2:{minWindow:{flexDirection:"row",alignItems:"center",position:"absolute",top:l,left:d,height:64,width:135,backgroundColor:bP("rgba(44,44,44,0.70)"),borderRadius:9.6,borderWidth:1,borderColor:"#ffffff7f"},minWindowVoipContainer:{paddingLeft:12,paddingRight:12,width:64,height:40},minWindowHeadImage:{width:40,height:40,borderRadius:4},minWindowVoip:{position:"absolute",left:12,top:0,width:40,height:40,borderRadius:4},minWindowInfo:{width:59,height:43},minWindowNickname:{width:59,height:24,color:"#ffffff",lineHeight:24,fontSize:17},minWindowDuration:{marginTop:3,width:59,height:16,color:bP("rgba(255, 255, 255, 0.7)"),lineHeight:16,fontSize:14}},maxPreviewWindowPosition:p,minPreviewWindowPosition:f,minPreviewWindowVoipPosition:{left:0,top:0,width:75,height:162},screenWidth:t,minWindowLeft2:d,maxWindowTop:i,maxWindowHeight:a});Object.assign(wD,h)}));var OD=void 0;function SD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ID(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SD(Object(n),!0).forEach((function(t){Object(q.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SD(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ED=Object(Lo.promisify)(XC.getSetting),CD=Object(Lo.promisify)(eT.authorize),TD=Object(Lo.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("join1v1VoIPChat",e,{roomId:0,sessionKey:"",lifespan:0})){var t="video"===e.roomType?1:2,n=Object.assign({},e,{muteConfig:kC(e.muteConfig),handsFree:!!Object(re.isBoolean)(e.handsFree)&&e.handsFree,roomType:t}),r=Object(uo.getPluginId)(this);Object(R.invokeMethodWithPlugin)(r)("join1v1VoIPChat",n)}})),kD=Object(Lo.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(df.default)("generateRoomId","webapi_join1v1voiproom",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId,groupid:e.groupId,room_type:"join"===e.type?2:1,target_openid:e.targetOpenid||""}}),(function(e){e.targetSupport=0===e.target_version,delete e.target_version,e.roomId=e.imroomid,delete e.imroomid,e.groupId=e.groupid,delete e.groupid}));e.pluginId=Object(uo.getPluginId)(OD),t(e)})),AD=Object(Lo.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(df.default)("getCloudSession","webapi_getcloudimsession",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId}}),(function(e){delete e.rawData,e.sessionKey=e.session_key,delete e.session_key}));e.pluginId=Object(uo.getPluginId)(OD),t(e)})),PD={enable:!1,ignoreSelfVersion:!1,minWindowType:1,popupDuration:300,userSessionInfo:{},widget:null,occupied:!1},DD=function(e,t){var n=e.sender,r=PD.userSessionInfo.openid,o=Object.assign({},e,{sender:r,command:t});SP({msgType:_D,receiver:n,data:o,complete:function(e){}})},jD=function(){return!(ee.IS_ANDROID&&At.default.clientVersion>=654315520)};EP((function(e){e.data.command;var t=e.msgType,n=e.data,r=PD.widget;t===_D&&(r?n.sender===r.sessionInfo.otherOpenid?r.handleReceiveMessage(n.command):r.sendMessage(pD):n.command===iD&&MD().then((function(){jD()&&!PD.ignoreSelfVersion?DD(n,vD):PD.enable?mP({complete:function(e){PD.occupied=e.join,PD.occupied?DD(n,pD):PD.widget=new xD(ID({role:"listener",minWindowType:PD.minWindowType},n))}}):DD(n,gD)})))})),Object(No.onNetworkStatusChange)((function(e){PD.widget&&PD.widget.onNetworkStatusChange(e)})),FC((function(e){PD.widget&&PD.widget.onVoIPChatInterrupted(e)})),xC((function(e){PD.widget&&PD.widget.onVoIPChatMembersChanged(e)}));var xD=function(){function e(t){var n=this;Object($.default)(this,e),this.node={container:null,overlay:null,navigationBar:null,maxWindow:null,scaleBtn:null,hangupBtns:null,muteBtn:null,handsFreeBtn:null,cancelBtn:null,refuseBtn:null,listenBtn:null,switchVoiceBtns:null,switchCameraBtn:null,cameraContainer:null,voipContainer:null,videoOperationArea:null,voiceOperationArea:null,videoInfoWindow:null,voiceInfoWindow:null,videoInfoWindowNicknameCenter:null,callArea:null,listenArea:null,minPreviewWindowMask:null,previewWindowSelfContainer:null,previewWindowOtherContainer:null,previewWindowSelf:null,previewWindowOther:null,tips:null,camera:null,duration:null,minWindow:null,minWindowLeft:null,minWindowInfo:null,minWindowHangupBtn:null,minWindowDuration:null,minWindowVoipContainer:null,minWindowVoip:null,minWindowHeadImage:null,videoInfoWindowTips:null,voiceInfoWindowTips:null,maskBottom:null,maskTop:null,callSwitchVoiceBtn:null,mainContainer:null};var r={};r.roomType=t.roomType||"video",r.isVoiceRoom="voice"===t.roomType,r.isCaller="caller"===t.role,r.groupId=t.groupId,r.roomId=t.roomId,r.disableSwitchVoice=t.disableSwitchVoice||!1,r.minWindowType=t.minWindowType||1,r.caller=t.caller,r.listener=t.listener,r.lifespan=PD.userSessionInfo.lifespan,r.sessionKey=PD.userSessionInfo.sessionKey,r.createSessionTime=PD.userSessionInfo.createSessionTime,r.handsFree=!1,r.muteConfig={muteMicrophone:!1,muteEarphone:!1},this.statistics={videoStartTime:0,videoEndTime:0,voiceStartTime:0,voiceEndTime:0},this.callback={success:t.success,fail:t.fail,complete:t.complete},r.isCaller?(r.selfOpenid=t.caller.openid,r.otherOpenid=t.listener.openid):(r.otherOpenid=t.caller.openid,r.selfOpenid=t.listener.openid),this.sessionInfo=r,this.isPreviewWindowOtherMax=!0,this.hasOtherReceiveCall=!1,this.showMinWindow=!1,this.onDraging=!1,this.onCalling=!1,this.destoryed=!1,this.hasJoinVoIPChat=!1,this.startChatTime=0;var o=this.compileTemplate(r),i=o.maxWindowTemplate,a=o.minWIndowTemplate,s=new QP(i,wD.styleTree),c=this.isMinWindowTypeMax()?wD.minWindowStyle1:wD.minWindowStyle2,u=new QP(a,c);Object.keys(this.node).forEach((function(e){n.node[e]=s.querySelector("."+e)}));["minWindow","minWindowLeft","minWindowRight","minWindowHangupBtn","minWindowDuration","minWindowInfo","minWindowVoipContainer","minWindowHeadImage","minWindowVoip"].forEach((function(e){n.node[e]=u.querySelector("."+e)})),this.node.hangupBtns=s.querySelectorAll(".hangupBtn"),this.node.switchVoiceBtns=s.querySelectorAll(".switchVoiceBtn"),this.bindEvent(),this.node.container.insert(),this.node.minWindow.insert(),this.startWaitAnimation(),r.isCaller||(this.startVibrateLong(),this.sendMessage(fD)),r.isCaller&&(setTimeout((function(){n.destoryed||n.onCalling||n.showMinWindow||n.showTips(TP[1],2e4)}),2e4),setTimeout((function(){n.destoryed||n.onCalling||(n.sendMessage(aD),n.showTipsThenDestory(TP[2]))}),6e4),this.call())}return Object(K.default)(e,[{key:"bindEvent",value:function(){var e=this,t=this.node,n=t.container,r=t.overlay,o=t.navigationBar,i=t.scaleBtn,a=t.maxWindow,s=t.minWindow,c=t.minWindowLeft,u=t.minWindowInfo,l=t.minWindowHangupBtn,d=t.cancelBtn,f=t.refuseBtn,p=t.listenBtn,h=t.muteBtn,v=t.handsFreeBtn,g=t.minPreviewWindowMask,_=t.switchCameraBtn,b=t.hangupBtns,y=t.switchVoiceBtns,m=t.minWindowVoipContainer,w=t.mainContainer;n.on("ready",(function(){e.popupMaxWindow(),o.fadeTo(.9,PD.popupDuration),r.fadeTo(.87,PD.popupDuration),e.changeStatusBarColor()})),i&&i.on("click",(function(){e.resetStatusBarColor(),e.showMinWindow=!0;var t=e.sessionInfo.isVoiceRoom;o.hide(),r.hide(),w.hide(),e.popDownMaxWindow().then((function(){n.hide(),!t&&e.onCalling&&(e.hideOtherVoipPreviewWindow(),e.showMinWindowVoipPreviewWindow())})),s.fadeIn()}));var O=function(){var t=e.onCalling?AP[5]:TP[4],n=e.onCalling?sD:aD;e.sendMessage(n),e.showTipsThenDestory(t,0)},S=function(){e.onDraging||(e.showMinWindow=!1,!e.sessionInfo.isVoiceRoom&&e.onCalling&&(e.hideMinWindowVoipPreviewWindow(),e.showOtherVoipPreviewWindow()),s.hide(),n.show(),e.popupMaxWindow().then((function(){r.show(),o.show(),w.show()})),e.changeStatusBarColor())};l&&l.on("click",(function(){O()})),c&&c.on("click",(function(){S()})),u&&u.on("click",(function(){e.isMinWindowTypeMax()||S()})),m&&m.on("click",(function(){var t=e.sessionInfo.isVoiceRoom;e.isMinWindowTypeMax()||(t?O():S())})),s&&s.on("drag",(function(t){var n=s.position.width/2,r=wD.screenWidth/2,o=t.stage,i=t.drag;"dragging"===o&&(e.onDraging=!0),"end"===o&&e.onDraging&&(e.onDraging=!1,s.position.left=16,i.left+n>r&&!e.isMinWindowTypeMax()&&(s.position.left=wD.minWindowLeft2),s.position.top=i.top,s.animate({finalStyle:ID({},s.position),duration:100}),a.position=Object.assign({},s.position),a.update())})),h&&h.on("click",(function(){var t=e.sessionInfo.muteConfig,n=!t.muteMicrophone;t.muteMicrophone=n,DC({muteConfig:{muteMicrophone:n}});var r=n?"https://res.wx.qq.com/op_res/tqnj65wMmdaQDVBAia5726VAaVtTVOcFF9PgeVrkis1gJWt_C2k7pHYWC_pjaGjR":rD;h.props.iconPath=r,h.update()})),v&&v.on("click",(function(){var t=!e.sessionInfo.handsFree;e.showTips(jP[t?6:7]),e.sessionInfo.handsFree=t,DC({muteConfig:e.sessionInfo.muteConfig,handsFree:t});var n=t?"https://res.wx.qq.com/op_res/7f8h7wvyZo92NU4yaA3Kwp4yXLkdgj8jsA4GFUO7G6r3rBObYxqqEeDP9pgm1O2k":oD;v.props.iconPath=n,v.update()})),d&&d.on("click",(function(){e.sendMessage(aD),e.showTipsThenDestory(TP[4])})),f&&f.on("click",(function(){e.stopVibrateLong(),e.sendMessage(uD),e.showTipsThenDestory(kP[2])})),b.forEach((function(t){t.on("click",(function(){e.showTipsThenDestory(AP[5])}))})),y.forEach((function(t){t.on("click",(function(){var t=e.sessionInfo.isCaller;e.sessionInfo.roomType="voice",e.sessionInfo.isVoiceRoom=!0,e.onCalling?(e.switchToVoiceCall(),e.sendMessage(cD)):t?(e.switchToVoiceCall(),e.showTips(AP[7]),e.sendMessage(cD)):(e.stopVibrateLong(),e.listenerJoinVoIPChat().then((function(){e.onCalling=!0,e.stopWaitAnimation(),e.pullUpCallingInterface(),e.showTips(AP[7]),e.sendMessage(dD),e.showDuration()})))}))})),p&&p.on("click",(function(){e.stopVibrateLong(),e.listenerJoinVoIPChat().then((function(){var t=e.sessionInfo.isVoiceRoom?DP[0]:kP[0];e.onCalling=!0,e.stopWaitAnimation(),e.showTips(t),e.showDuration(),e.pullUpCallingInterface(),e.sendMessage(lD)}))})),_&&_.on("click",(function(){var t=e.node.previewWindowSelf,n="front"===t.props.configCamera?"back":"front";t.props.configCamera=n,t.update()})),g&&g.on("click",(function(){e.switchVoipPreviewWindow()}))}},{key:"isMinWindowTypeMax",value:function(){return 1===this.sessionInfo.minWindowType}},{key:"call",value:function(){var e=this,t=this.callback;Date.now();kD({type:"create",targetOpenid:this.sessionInfo.otherOpenid}).then((function(n){Date.now();e.sessionInfo.groupId=n.groupId,e.sessionInfo.roomId=n.roomId,TD(ID({},e.sessionInfo)).then((function(n){e.hasJoinVoIPChat=!0,e.playCallTone();Date.now();e.sendMessage(iD);var r="join1v1Chat:ok";t.success&&t.success({errMsg:r,errCode:0}),t.complete&&t.complete({errMsg:r,errCode:0})})).catch((function(n){e.showTipsThenDestory("呼叫失败");var r=n.errMsg.replace("join1v1VoIPChat","join1v1Chat");t.fail&&t.fail({errMsg:r,errCode:n.errCode}),t.complete&&t.complete({errMsg:r,errCode:n.errCode})}))}))}},{key:"listenerJoinVoIPChat",value:function(){var e=this;return kD({type:"join",groupId:this.sessionInfo.groupId}).then((function(t){return e.sessionInfo.groupId=t.groupId,e.sessionInfo.roomId=t.roomId,TD(ID({},e.sessionInfo)).then((function(t){e.hasJoinVoIPChat=!0})).catch((function(t){e.showTipsThenDestory("接听失败"),wxNativeConsole.error(t)}))}))}},{key:"onVoIPChatInterrupted",value:function(){this.showTipsThenDestory(AP[4])}},{key:"onVoIPChatMembersChanged",value:function(e){var t=e.openIdList,n=this.sessionInfo,r=n.selfOpenid,o=n.isCaller,i=this.node.callSwitchVoiceBtn;2===t.length&&o&&(i&&i.hide(),this.showDuration()),this.onCalling&&1===t.length&&t[0]===r&&this.showTipsThenDestory(AP[4])}},{key:"sendMessage",value:function(e){if(!this.destoryed){var t=this.sessionInfo,n=t.otherOpenid,r=t.selfOpenid,o=new bD(ID(ID({},this.sessionInfo),{},{sender:r,command:e}));SP({msgType:_D,receiver:n,data:o,complete:function(e){}})}}},{key:"handleReceiveMessage",value:function(e){var t=this.sessionInfo.isVoiceRoom;switch(e){case lD:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.pullUpCallingInterface(),!t&&this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()),this.showTips(TP[3]);break;case cD:this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.switchToVoiceCall(),this.showTips(AP[6]);break;case dD:this.stopCallTone(),this.onCalling=!0,this.stopWaitAnimation(),this.sessionInfo.roomType="voice",this.sessionInfo.isVoiceRoom=!0,this.pullUpCallingInterface(),this.showTips(AP[6]);break;case fD:this.hasOtherReceiveCall=!0;break;case aD:this.showTipsThenDestory(kP[1]);break;case uD:var n=t?PP[5]:TP[5];this.showTipsThenDestory(n);break;case sD:break;case hD:this.showTips(AP[0]);break;case pD:this.showTipsThenDestory(TP[6]);break;case vD:this.showTipsThenDestory(PP[0]);break;case gD:this.showTipsThenDestory(PP[7])}}},{key:"onNetworkStatusChange",value:function(e){var t=e.isConnected,n=e.networkType,r=this.sessionInfo.isVoiceRoom;t?("2g"===n||!r&&"3g"===n)&&(this.sendMessage(hD),this.showTips(AP[1])):this.showTipsThenDestory(AP[3])}},{key:"switchToVoiceCall",value:function(){var e=this.node,t=e.videoInfoWindowNicknameCenter,n=e.voipContainer,r=e.cameraContainer,o=e.switchVoiceBtns,i=e.videoInfoWindow,a=e.voiceInfoWindow,s=e.voiceInfoWindowTips,c=e.videoOperationArea,u=e.voiceOperationArea,l=e.minWindowVoipContainer,d=e.minWindowInfo,f=e.minWindowHeadImage,p=e.maskBottom,h=e.maskTop,v=this.sessionInfo.isCaller;p&&p.hide(),h&&h.hide(),this.isMinWindowTypeMax()?(l&&l.remove(),d.position=Object.assign({},d.position,{left:16,top:0}),d.update()):(f.props.iconPath=nD,f.update()),this.onCalling?(v||(this.statistics.videoEndTime=Date.now(),this.statistics.voiceStartTime=Date.now()),n&&n.remove(),this.node.voipContainer=null,t.hide(),s.hide(),a.show(),c.hide(),u.show()):(r&&r.remove(),this.node.cameraContainer=null,i.hide(),a.show(),o.forEach((function(e){return e.hide()})))}},{key:"pullUpCallingInterface",value:function(){if(this.onCalling){var e=this.sessionInfo.isVoiceRoom,t=this.node,n=t.videoInfoWindow,r=t.videoOperationArea,o=t.listenArea,i=t.callArea,a=t.videoInfoWindowNicknameCenter,s=t.voiceInfoWindow,c=t.voiceInfoWindowTips,u=t.voiceOperationArea,l=t.cameraContainer,d=t.minWindowVoipContainer,f=t.minWindowInfo,p=t.minWindowHeadImage,h=t.maskTop,v=t.maskBottom;i&&i.hide(),o&&o.hide(),n&&n.hide(),l&&l.remove(),this.node.cameraContainer=null,e?(v&&v.hide(),h&&h.hide(),s.show(),c.hide(),u.show(),this.isMinWindowTypeMax()?(d&&d.remove(),f.position=Object.assign({},f.position,{left:16,top:0}),f.update()):(p.props.iconPath=nD,p.update())):(this.showVoipPreViewWindow(),s&&s.hide(),a.show(),r.show(),this.showMinWindow&&(this.hideOtherVoipPreviewWindow(),this.showMinWindowVoipPreviewWindow()))}}},{key:"destory",value:function(){this.hideDuration(),this.resetStatusBarColor(),this.stopWaitAnimation(),this.onCalling=!1,this.destoryed=!0,this.hasJoinVoIPChat&&PC(),this.node.container.remove(),this.node.minWindow.remove(),PD.widget=null}},{key:"showTipsThenDestory",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;this.stopCallTone(),this.stopVibrateLong(),0===n?this.destory():this.showTips(e,n).then((function(){return t.destory()}))}},{key:"showTips",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;if(this.showTipsTimier&&clearTimeout(this.showTipsTimier),this.showMinWindow)return Object(wf.showToast)({title:e,icon:"none",duration:n}),new Promise((function(e){setTimeout((function(){e()}),n)}));var r=this.node.tips,o=r.measureText(e),i=o+28,a=(wD.screenWidth-i)/2;return r.label.content=e,r.position.left=a,r.position.width=i,r.props.hide=!1,r.update(),new Promise((function(e){t.showTipsTimier=setTimeout((function(){t.destoryed||r.hide(),e()}),n)}))}},{key:"changeStatusBarColor",value:function(){Object(R.invokeMethod)("setStatusBarStyle",{color:"white"})}},{key:"resetStatusBarColor",value:function(){var e=Object(CP._getNavigationBarColor)().frontColor;Object(R.invokeMethod)("setStatusBarStyle",{color:"#ffffff"===e?"white":"black"})}},{key:"showVoipPreViewWindow",value:function(){var e=this.sessionInfo,t=e.otherOpenid,n=e.selfOpenid;this.createVoipPreviewWindow({self:!1,openid:t,size:"max"}),this.createVoipPreviewWindow({self:!0,openid:n,size:"min"})}},{key:"showOtherVoipPreviewWindow",value:function(){var e=this.sessionInfo.otherOpenid,t=this.isPreviewWindowOtherMax?"max":"min";this.createVoipPreviewWindow({self:!1,openid:e,size:t})}},{key:"hideOtherVoipPreviewWindow",value:function(){var e=this.node.previewWindowOther;e&&e.remove()}},{key:"showMinWindowVoipPreviewWindow",value:function(){var e=this.sessionInfo.otherOpenid,t=this.node.minWindowVoip,n=this.isMinWindowTypeMax()?48:40,r=this.isMinWindowTypeMax()?48:40,o=new JP({position:{left:0,top:0,width:r,height:n},props:{independent:!0,self:!1,openid:e}});t.appendChild(o),o.insert()}},{key:"hideMinWindowVoipPreviewWindow",value:function(){var e=this.node.minWindowVoip;e&&e.empty()}},{key:"switchVoipPreviewWindow",value:function(){var e=this.node,t=e.previewWindowOther,n=e.previewWindowSelf;if(n&&t){var r=this.isPreviewWindowOtherMax?"max":"min",o=this.isPreviewWindowOtherMax?"min":"max";this.adjustVoipPreviewWindow(n,r),this.adjustVoipPreviewWindow(t,o),this.isPreviewWindowOtherMax=!this.isPreviewWindowOtherMax}}},{key:"adjustVoipPreviewWindow",value:function(e,t){var n="max"===t,r=e.parent,o=n?wD.maxPreviewWindowPosition:wD.minPreviewWindowPosition,i=n?wD.maxPreviewWindowPosition:wD.minPreviewWindowVoipPosition,a=n?1:2;r.position=o,e.position=i,r.style.zIndex=a,r.update(),e.update()}},{key:"createVoipPreviewWindow",value:function(e){var t=e.size,n=e.self,r=e.openid,o=this.node,i=o.previewWindowSelfContainer,a=o.previewWindowOtherContainer,s=n?i:a,c=new JP({position:"max"===t?wD.maxPreviewWindowPosition:wD.minPreviewWindowVoipPosition,props:{independent:!0,self:n,openid:r}});this.node[n?"previewWindowSelf":"previewWindowOther"]=c,s.appendChild(c),c.insert()}},{key:"startWaitAnimation",value:function(){var e=this;this.sessionInfo.isCaller&&(this.waitCount=0,this.waitTimer=setInterval((function(){var t=e.node,n=t.voiceInfoWindowTips,r=t.videoInfoWindowTips,o="正在等待对方接收邀请"+new Array(++e.waitCount).fill(".").join("");e.waitCount%=3,r&&(r.label.content=o,r.update()),n&&(n.label.content=o,n.update())}),800))}},{key:"stopWaitAnimation",value:function(){clearInterval(this.waitTimer)}},{key:"playCallTone",value:function(){yP({type:"play"})}},{key:"stopCallTone",value:function(){yP({type:"stop"})}},{key:"startVibrateLong",value:function(){this.vibrateLongTimer=setInterval((function(){Lf()}),2e3)}},{key:"stopVibrateLong",value:function(){clearInterval(this.vibrateLongTimer)}},{key:"showDuration",value:function(){var e=this,t=this.node,n=t.duration,r=t.minWindowDuration,o=this.sessionInfo,i=o.isVoiceRoom;o.isCaller||(i?this.statistics.voiceStartTime=Date.now():this.statistics.videoStartTime=Date.now()),this.startChatTime||(this.startChatTime=Date.now()),n.show(),this.durationTimer=setInterval((function(){if(!e.destoryed){var t=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=e%3600-60*n;n<10&&(n="0"+n),r<10&&(r="0"+r);var o=n+":"+r;return t>0&&(o=t+":"+o),o}(Math.ceil((Date.now()-e.startChatTime)/1e3));n.label.content=t,n.update();var o=e.isMinWindowTypeMax()?i?"音频通话中 "+t:"通话中 "+t:t;r.label.content=o,r.update()}}),1e3)}},{key:"hideDuration",value:function(){var e=this.sessionInfo,t=e.isCaller,n=e.isVoiceRoom,r=e.caller,o=e.listener;if(this.onCalling&&!t){n?this.statistics.voiceEndTime=Date.now():this.statistics.videoEndTime=Date.now();var i=this.statistics,a=i.videoEndTime,s=i.videoStartTime,c=i.voiceEndTime,u=i.voiceStartTime,l=Math.ceil((a-s)/1e3),d=Math.ceil((c-u)/1e3);!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(df.default)("setVoIPChatRecord","webapi_set1v1voipcallrecord",{},{},(function(e){return{use_pluginid:void 0!==e.pluginId,caller_openid:e.callerOpenid,receiver_openid:e.listenerOpenid,video_time:e.videoTime||0,voice_time:e.voiceTime||0}}),(function(){}));e.pluginId=Object(uo.getPluginId)(OD),t(e)}({callerOpenid:r.openid,listenerOpenid:o.openid,videoTime:l,voiceTime:d,complete:function(e){}})}clearInterval(this.durationTimer)}},{key:"popupMaxWindow",value:function(){return this.node.maxWindow.animate({finalStyle:{top:wD.maxWindowTop,left:0,width:wD.screenWidth,height:wD.maxWindowHeight,opacity:1},duration:PD.popupDuration})}},{key:"popDownMaxWindow",value:function(){var e=this.node.minWindow;return this.node.maxWindow.animate({finalStyle:ID(ID({},e.position),{},{opacity:0}),duration:PD.popupDuration})}},{key:"compileTemplate",value:function(){var e=this.sessionInfo,t=e.isCaller?e.listener:e.caller;return function(e){var t='\n    <view class="container" independent="true" clickable="true">\n      <view class="overlay"></view>\n      <view class="navigationBar" clickable="true">'+e.title+'</view>\n\n      <view class="maxWindow"> \n        <view class="cameraContainer" hidden="'+e.isVoiceRoom+'">\n          <camera class="camera"></camera>\n        </view>\n        <view class="voipContainer" hidden="'+e.isVoiceRoom+'">\n          <view class="previewWindowSelfContainer"></view>\n          <view class="previewWindowOtherContainer"></view>\n        </view>\n\n        <image class="maskBottom" hidden="'+e.isVoiceRoom+'" iconPath="https://res.wx.qq.com/op_res/TnkjDXCOtdoxzei_oGVMdSiYu-0a3TBEgas1qwql8YYMyn8zwsFMDB0W272fSFZk"></image>\n        <image class="maskTop" hidden="'+e.isVoiceRoom+'" iconPath="https://res.wx.qq.com/op_res/XWPIP9W-ZHRXSdZMoQH_RzjZ2msJo3gNU7H9HkkV8ect4MGc6KJmXRjwBqr01Mb1"></image>\n\n        <view class="mainContainer">\n          <view class="videoInfoWindowNicknameCenter" hide="true" hidden="'+e.isVoiceRoom+'">'+e.nickname+'</view>\n          <view class="videoInfoWindow" hidden="'+e.isVoiceRoom+'">\n            <view class="videoInfoWindowInfo">\n              <view class="videoInfoWindowNickname">'+e.nickname+'</view>\n              <view class="videoInfoWindowTips">'+(e.isCaller?"正在等待对方接收邀请":"邀请你视频通话")+"</view>\n            </view>\n            "+(e.headImage?'<image class="videoInfoWindowHeadImage" iconPath="'+e.headImage+'"></image>':"")+'\n          </view>\n\n          <view class="operationContainer videoOperationArea" hide="true" hidden="'+e.isVoiceRoom+'">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon switchVoiceBtn" iconPath="https://res.wx.qq.com/op_res/MMZ7ikr1yDWDciblT6cTjGEYi5X7nUBkmxeFiAYY6pTrTZTcVWlcLB8_CsIP---k" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切到语音通话</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="'+tD+'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon switchCameraBtn" iconPath="https://res.wx.qq.com/op_res/QTADvaCvE516_xRgOJ7MxnMeM_I-9bk-ngeQrOE4O6SjCk0zj-YeAVwoWDzJEFsA" clickable="true"></image>\n              </view>\n              <view class="operationItemText">切换摄像头</view>\n            </view>\n          </view>\n\n          <view class="voiceInfoWindow" hide="'+!e.isVoiceRoom+'" hidden="'+e.disableSwitchVoice+'">\n            '+(e.headImage?'<image class="voiceInfoWindowHeadImage" iconPath="'+e.headImage+'"></image>':"")+'\n            <view class="voiceInfoWindowNickname">'+e.nickname+'</view>\n            <view class="voiceInfoWindowTips">'+(e.isCaller?"正在等待对方接收邀请":"邀请你语音通话")+'</view>\n          </view>\n\n          <view class="operationContainer voiceOperationArea" hide="true" hidden="'+e.disableSwitchVoice+'">\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon muteBtn" iconPath="'+rD+'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">静音</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn">\n                <image class="operationItemIcon hangupBtn" iconPath="'+tD+'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">挂断</view>\n            </view>\n            <view class="operationItemContainer">\n              <view class="operationItemBtn" >\n                <image class="operationItemIcon handsFreeBtn" iconPath="'+oD+'" clickable="true"></image>\n              </view>\n              <view class="operationItemText">免提</view>\n            </view>\n          </view>\n\n          <view class="operationContainer callArea" hidden="'+!e.isCaller+'">\n            <view class="operationItemContainer callItemContainer">\n              <view class="operationItemTop switchVoiceBtn callSwitchVoiceBtn" hidden="'+(e.isVoiceRoom||e.disableSwitchVoice)+'" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="'+eD+'" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon cancelBtn" iconPath="'+tD+'" clickable="true"></image>\n                </view>\n                <view class="operationItemText">取消</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="operationContainer listenArea" hidden="'+e.isCaller+'">\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop"></view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon refuseBtn" iconPath="'+tD+'" clickable="true"></image>\n                </view>\n                <view class="operationItemText">拒绝</view>\n              </view>\n            </view>\n            <view class="operationItemContainer listenItemContainer"></view>\n            <view class="operationItemContainer listenItemContainer">\n              <view class="operationItemTop switchVoiceBtn" hidden="'+(e.isVoiceRoom||e.disableSwitchVoice)+'" clickable="true">\n                <image class="operationItemIcon switchVoiceIcon" iconPath="'+eD+'" clickable="true" bubbles="true"></image>\n                <view class="operationItemText switchVoiceText">切到语音通话</view>\n              </view>\n              <view class="operationItemBottom">\n                <view class="operationItemBtn">\n                  <image class="operationItemIcon listenBtn" iconPath="https://res.wx.qq.com/op_res/VgAFtpPeKJeLoWBJ0QXzjP7ebzWqPqfVnfKclugzcpfp6_PkGC12B-uwBakQhvhP" clickable="true"></image>\n                </view>\n                <view class="operationItemText">接听</view>\n              </view>\n            </view>\n          </view>\n          \n          <view class="tips" hide="true">已接通</view>\n          <view class="duration" hide="true">00:01</view>\n          <view class="minPreviewWindowMask" clickable="true"></view>\n\n          <view class="scaleBtn" clickable="true">\n            <image class="scaleBtnIcon" iconPath="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAABPFJREFUeAHtnF2IVkUYx/e1NI3AMrpSaI2UMkKwi6AgQRCCLtILwaSL8sIiwUTrRvrQoAgqPyD6EDQvVMyr8FaI9sLwQr0QK7WgJKKLvlZsdXNb335/nFme9+y++75zOrPvHJ0H/jzPzJkz88z/fWbOzJyz29eXJTOQGcgMZAYyA3VloFHG8WazOZ37NoA1YCG4HUwDVUmzooqGqOcHcADsajQaI6H1BhPkyDlKQ0tDG+tx+QHaXx5KUplfXZFTN3L028hn+R4kZSLoJC0sca1cRX8BLrp0amo2Dq0AM5xjp4igR6I6yRC7BLwcjtpYBZXj6OfeWfSl0CrLDDFNyF4GvZGwttFtfe/K5TIE2Xuqetp05WwFhazvXVUXfENXtd5AhTJBHX7MTFAvCOJp0Q8Ogn3gng4+JH351kjefUy9T7q6F0DSE6w/RiO1FbXaWENMezUvj2Fs9Ym66VgEvQER/xoythBFddyeVLoDH+OD4fQ1iW1jGdd3+vshaY7Jq4UZK4LU+XfAVzKczEPv9QmvIe0ZcBl8C/p9fm01nbDy6WQdoeBc8Lu9Afslfw/2NGD3du/6a1Vp6t8NxiS03pgR1MdQ+wWH1hac+gBvH3Z589F3mOv/GDsJMypB6iEkHUF9aHo7E/sQJM1CP2DyZX5XSPc8GZ0g18NX0adNbxdh7wAPmjyZZwvpnidjLRRbOkYUDRMxq8k8AfyRwwvYOi/2opOBcz6Rip6qCNJQ0/DZWOj4/SZ9gTJXTDoJMxpBRMw8cAb8AY6Dz+ix1kE/tul5cvOP/Iw5xLQOesiR8ShamEySm3/kbLQIou4Lk7ExwbWbLoLehIS/wDKgp1U/aPeDaILW9iQ5iTbEmHCv0dvtDn3MQVr/LARa+4gwr2/D1lvPb9DJSTSCij2FgGHytBay66FiseTS7UI+OUd75VAmqAPzmaBMUAcGOlzOEdSBoCl7inXwY9xllgUvkvky0BmRFpFaaXt93j0VyYorSRIEOdqifAQarvuLCzRco8xP5ImwL8FOt+7CrFaSJIguPg48ORP1WFPDfQ5Poe8Cr4PKJdU5SKvsELk3pHBI2VQjqHjS6PukoxK9KBCBgrYuv4ItIIqkSlC7CJoPC4PMN89HYWOCSpMbYky+OpK1Q+b7gt87KKMz7SmR5Aii1xo2doLeTfoTw8YsbL0VmWnyopkpElScf/Qo3wTscYjeq70fjRVTcYoEFeefs8w5V/B5NRg2vq8nip426ShmigTpAM3L3xh6cumtyBnUZtlG9kDSXJOu3EyRIM03GlaKmnV2hYyt1bU+XPdyN4a+GkmnHzhjRWuSKRUanwN+tk5gv9bOCa6l+/FCO6f/Tz5R9Cf3Pwt05u1lK0ToS7bKJZ3QDOgaJA1Q/G1zyy3Yb5l0ZWYtCXK934Y+ZpgYMXZlZqpbjY4dJIpGGVYrKfgemAGi7MdqS5AYhKTfUM/JjiV1HmKxOGmpNxPUQsf4RCZoPCctOWUIsusPu+tuqTjRRDPUrzIEXTaNzDZ2qqb1cSjUyTJPsfM0ssQ1tIJH7WFs/Wlm8K/j6oilFN13Arvjt99EdtVuGYIOUrMnSOuPVV21lEahA6FuBM8hRMx0GjkKloY21uPyA7Qf/x8LsDjTkn45eAWcAjqzsRM3ySREPsk3+Shfg8nhniyZgcxAZiAzkBmoMQP/Af+8lwiMNw+aAAAAAElFTkSuQmCC" clickable="true" bubbles="true"></image>\n          </view>\n        </view>\n      </view>\n    </view>\n  ',n='\n    <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n      <view class="minWindowLeft" clickable="true">\n        '+(e.isVoiceRoom?"":'<view class="minWindowVoipContainer" transEvt="true">\n            <image class="minWindowHeadImage" iconPath="'+e.headImage+'"></image>\n            <view class="minWindowVoip"></view>\n          </view>')+'\n        <view class="minWindowInfo" transEvt="true">\n          <view class="minWindowNickname">'+e.nickname+'</view>\n          <view class="minWindowDuration">等待接听</view>\n        </view> \n      </view>\n      <view class="minWindowRight minWindowHangupBtn" clickable="true">\n        <image class="minWindowHangupIcon" iconPath="'+nD+'" clickable="true" bubbles="true"></image>\n        <view class="minWindowHangupText" transEvt="true">挂断</view>\n      </view>\n    </view>\n  ';return 2===e.minWindowType&&(n='\n      <view class="minWindow" draggable="true" hide="true" independent="true" clickable="true">\n        <view class="minWindowVoipContainer" clickable="true">\n          '+(e.isVoiceRoom?'<image class="minWindowHeadImage" iconPath="'+nD+'" clickable="true" bubbles="true"></image>':'<image class="minWindowHeadImage" iconPath="'+e.headImage+'" clickable="true" bubbles="true"></image>\n          <view class="minWindowVoip" transEvt="true"></view>')+'\n        </view>\n        <view class="minWindowInfo" clickable="true">\n          <view class="minWindowNickname" transEvt="true">'+e.nickname+'</view>\n          <view class="minWindowDuration" transEvt="true">等待接听</view>\n        </view>\n      </view>\n    '),{maxWindowTemplate:t,minWIndowTemplate:n}}({title:At.default.accountInfo.nickname,nickname:t.nickname,headImage:t.headImage,disableSwitchVoice:e.disableSwitchVoice,isVoiceRoom:e.isVoiceRoom,isCaller:e.isCaller,minWindowType:e.minWindowType})}}]),e}(),RD=["on call","wechat has no camera authorization","wechat has no record authorization","miniprogram has no record authorization","miniprogram has no camera authorization","device not support","not open 1v1 Chat","system error","occupied by other miniprogram"],MD=function(){var e=Math.ceil(Date.now()/1e3),t=PD.userSessionInfo,n=t.lifespan,r=t.createSessionTime;return r&&n&&e<r+n?Promise.resolve():AD().then((function(t){Object.assign(PD.userSessionInfo,{openid:t.openid,lifespan:t.lifespan,sessionKey:t.sessionKey,createSessionTime:e-3600})}),(function(e){}))},ND=!1;At.default.onReady((function(){ND=ND||1055===(At.default.appLaunchInfo||{}).scene})),Object(Pi.onAppEnterForeground)((function(e){ND=ND||1055===e.scene}));var LD=__safeway__.apiSign.makeApiSign,BD=n(113),FD=function(){function e(t,n){var r=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object($.default)(this,e),this.orientation=n,this.animating=!1;var i=Object(ea.getSystemInfoSync)(),a=i.screenWidth,s=parseInt(32767*Math.random(),10)+32767;this.isFullScreen=o;var c=a-30,u=38,l=30,d=new Eb.View({id:s,style:{display:"flex",alignItems:"center",position:"fixed",left:(a-c)/2,top:this.getTop(),width:c,height:u,backgroundColor:"#FA5151",opacity:0,zIndex:1000001,borderRadius:5,fixed:!0}}),f=new Eb.Text({id:s+1,style:{width:c-l,height:u,lineHeight:u,textAlign:"center",fontSize:13,color:"#ffffff"},value:t,bubbleEvent:!1,clickState:!1}),p=new Eb.Text({id:s+2,style:{position:"absolute",left:c-44,top:-2,width:l,height:u,lineHeight:u,fontSize:18,color:"#ffffff"},value:"×",eventType:"touch",bubbleEvent:!0,clickState:!0});f.add(p),d.add(f),Eb.webviewLayout.add(d),d.on("touchstart",(function(){r.hide()})),this.banner=d,this.bannerWidth=c}return Object(K.default)(e,[{key:"show",value:function(){var e=this;this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop(),opacity:.9,duration:300})})).then((function(){e.animating=!1})).catch((function(){}))}},{key:"hide",value:function(){var e=this;Object(gu.setRiskWarningToStorage)(+new Date),this.banner.ready().then((function(){return e.animating=!0,e.banner.animate({top:e.getTop()-14,opacity:0,duration:300})})).then((function(){return e=3e3,new Promise((function(t){return setTimeout(t,e)}));var e})).then((function(){return Eb.webviewLayout.remove(e.banner)})).catch((function(){}))}},{key:"getTop",value:function(){var e=Object(ea.getSystemInfoSync)().screenHeight;return this.isFullScreen?"portrait"===this.orientation?e/8:e/6:16}},{key:"setOrientation",value:function(e){if(!this.animating){this.orientation=e;var t=Object(ea.getSystemInfoSync)().screenWidth;this.banner.style.left=(t-this.bannerWidth)/2,this.banner.style.top=this.getTop()}}}]),e}(),WD=function(e,t){Object(gu.getRiskWarningFromStorage)((function(n){var r=(+new Date-(n||0))/1e3/60,o=At.default&&At.default.appContactInfo&&At.default.appContactInfo.operationInfo&&At.default.appContactInfo.operationInfo.jsonInfo&&At.default.appContactInfo.operationInfo.jsonInfo.warning_info&&At.default.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner&&At.default.appContactInfo.operationInfo.jsonInfo.warning_info.top_banner.wording||"";if(!Object(Lo.isGame)()&&o&&r>30){var i=new FD(o,e,t);return i.show(),i}}))},UD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("exitMiniProgram",e,{})},VD=wxNativeConsole.createLogger("common reportUserBehavior"),GD=Object(Lo.promisify)(wf._showModal),HD=!1;At.default.onReady((function(){var e=Object(Lo.promisify)(Object(na.constructOperateWXData)(!1,"reportUserBehavior")),t=At.default.appLaunchInfo,n=0,r=null,o=0,i="",a="",s={},c=!1,u=!1,l=!1,d=!1,f=0,p=3e5;try{At.default.appContactInfo&&At.default.appContactInfo.operationInfo&&At.default.appContactInfo.operationInfo.jsonInfo&&At.default.appContactInfo.operationInfo.jsonInfo.op_info&&(l=1===Number(At.default.appContactInfo.operationInfo.jsonInfo.op_info.adult_only),d=1===Number(At.default.appContactInfo.operationInfo.jsonInfo.op_info.grow_protect))}catch(e){VD.error("get op_info fail",e.message)}var h=Object(Lo.isGame)()||d,v=Object(Lo.isGame)()||d,g=Object(Lo.isGame)()||d||l,_=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.coldBoot;f=Date.now();var d={onShow:1,heartbeat:2,onHide:3,retryLogin:4};return HD?h().then(v).catch((function(e){VD.error("report fail",e)})):qD.then(h).then(v).catch((function(e){VD.error("report fail",e)}));function h(){var r={type:d[t],duration:n/1e3,scene_note:a,scene:o,referrerInfo:{appId:i,extraData:s},appServiceType:At.default.appType};return Object(Lo.isGame)()||(r.isWxaAdultOnly=l),e({apiName:"jsapi_reportuserbehav",reqData:r})}function v(e){var t=JSON.parse(e.rawData),n=t.action,r=t.alertMsg,o=t.heartbeatInterval;switch(o!==p&&o>=1e4&&(p=o,b()),n){case 1:break;case 2:GD({title:"提示",content:r,showCancel:!1});break;case 3:GD({title:"提示",content:r,showCancel:!1}).then(UD);break;case 4:var i=t.urlInfo,a=i.url,s=i.name;!u&&r&&a&&s&&(u=!0,Object(wf._showModal)({title:"提示",content:r,confirmText:s,success:function(e){e.confirm?Object(y_.privateOpenUrl)({url:a,isNativeStyle:!0,success:function(){c=!0},fail:function(e){VD.error("跳转实名认证h5失败=",e)}}):e.cancel&&(VD.info("modal cancel"),UD()),u=!1},fail:function(e){VD.error("show modal fail=",e),UD(),u=!1}}))}}},b=function(){null!==r&&(clearInterval(r),y())},y=function(){r=setInterval((function(){n=Date.now()-f,h&&_("heartbeat",n)}),p)},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.coldBoot,u=void 0!==r&&r;a=e.scene_note||"",n=0,o=e.scene,e.referrerInfo&&(i=e.referrerInfo.appId,s=e.referrerInfo.extraData),y(),c?(_("retryLogin",n),c=!1):g&&_("onShow",n,{coldBoot:u})},w=function(){n=Date.now()-f,clearInterval(r),r=null,v&&_("onHide",n)};m(t,{coldBoot:!0}),Object(V.onNativeEvent)("onAppEnterForeground",(function(e){m(t=e)})),Object(V.onNativeEvent)("onAppEnterBackground",(function(){w()})),Object(V.onNativeEvent)("onAppRoute",(function(e){VD.log("onAppRoute",e),"autoReLaunch"===e.openType&&(u=!1,w(),setTimeout((function(){m(t)}),1e3))}))}));var zD=function(){},qD=new Promise((function(e){zD=e}));At.default.onReady((function(){var e="",t=setInterval((function(){e&&(e&&clearInterval(t),n(e))}),1e3),n=function e(t){var n=Object.keys(At.default.page).find((function(e){return e.startsWith(t)})),r=At.default.page[n];if(n&&r&&r.window){var o=r.window.pageOrientation,i=!1;try{var a=r.window.navigationStyle||At.default.global.window.navigationStyle;i="custom"===a}catch(e){}if("landscape"===o){var s=!1;Object(Qi.onAppRouteResized)((function(){s||(Object(BD.informSubjectChange)(o,i),WD(o,i),s=!0)}))}else{var c=Object(BD.informSubjectChange)("portrait",i),u=WD(o,i);"auto"===o&&Object(lu.onWindowResize)((function(e){var t=e.windowWidth>e.windowHeight?"landscape":"portrait";c.then((function(e){e&&e.setOrientation&&e.setOrientation(t)})),u&&u.then((function(e){e&&e.setOrientation&&e.setOrientation(t)}))}))}Object(Qi.offAppRouteDone)(e)}};Object(Qi.onAppRouteDone)((function(t){e=t.path})),HD=!0,zD()}));var YD=n(117),KD=n(56),JD=!1,XD=!1,$D=!1,ZD=function(){if(!JD)return JD=!0,{invokeMethod:R.invokeMethod,onMethod:R.onMethod,subscribe:R.subscribe,publish:R.publish,beforeInvokeFail:R.beforeInvokeFail,beforeInvokeCallback:R.beforeInvokeCallback}};function QD(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("openWCPayLQTDetail",e)}function ej(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("openWCPayLQTSave",e)}function tj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("openWCPayLQTDepositPlan",e)}function nj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("openWCPayLQTDepositPlanAdd",e)}At.default.onReady((function(){$D=At.default.exportBaseMethods}));var rj=["canvasGetImageData","canvasPutImageData","canvasToTempFilePath","setEnableDebug","startAccelerometer","stopAccelerometer","getBatteryInfo","getClipboardData","setClipboardData","startCompass","stopCompass","addPhoneContact","startGyroscope","stopGyroscope","startBeaconDiscovery","stopBeaconDiscovery","getBeacons","startLocalServiceDiscovery","stopLocalServiceDiscovery","startDeviceMotionListening","stopDeviceMotionListening","getNetworkType","makePhoneCall","scanCode","scanItem","getSystemInfo","vibrateShort","vibrateLong","getExtConfig","chooseLocation","choosePoi","getLocation","startLocationUpdateBackground","startLocationUpdate","stopLocationUpdate","openLocation","chooseMessageFile","loadFontFace","chooseImage","previewImage","getImageInfo","saveImageToPhotosAlbum","compressImage","chooseVideo","saveVideoToPhotosAlbum","checkSession","chooseAddress","authorize","addCard","openCard","chooseInvoice","chooseInvoiceTitle","requestFacetoFacePayment","requestPayment","requestPersonalPay","requestSubscribeMessage","requestOrderPayment","getBackgroundFetchData","setBackgroundFetchToken","getBackgroundFetchToken","getSelectedTextRange","hideKeyboard","showModal","showToast","hideToast","showLoading","hideLoading","showActionSheet","pageScrollTo","startPullDownRefresh","stopPullDownRefresh","setBackgroundColor","setBackgroundTextStyle","setTabBarBadge","removeTabBarBadge","showTabBarRedDot","hideTabBarRedDot","showTabBar","hideTabBar","setTabBarStyle","setTabBarItem","setTopBarText","saveFile","openDocument","getSavedFileList","getSavedFileInfo","removeSavedFile","getFileInfo","getStorage","setStorage","removeStorage","clearStorage","getStorageInfo","closeBLEConnection","closeBluetoothAdapter","createBLEConnection","getBLEDeviceCharacteristics","getBLEDeviceServices","getBluetoothAdapterState","getBluetoothDevices","getConnectedBluetoothDevices","notifyBLECharacteristicValueChange","openBluetoothAdapter","readBLECharacteristicValue","startBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","writeBLECharacteristicValue","getHCEState","sendHCEMessage","startHCE","stopHCE","getScreenBrightness","setKeepScreenOn","setScreenBrightness","connectWifi","getConnectedWifi","getWifiList","setWifiList","startWifi","stopWifi","getBackgroundAudioPlayerState","playBackgroundAudio","pauseBackgroundAudio","seekBackgroundAudio","stopBackgroundAudio","getAvailableAudioSources","startRecord","stopRecord","setInnerAudioOption","playVoice","pauseVoice","stopVoice","closeSocket","sendSocketMessage","hideShareMenu","showShareMenu","updateShareMenu","getSetting","openSetting","checkIsSoterEnrolledInDevice","checkIsSupportSoterAuthentication","startSoterAuthentication","navigateBackMiniProgram","navigateToMiniProgram","setNavigationBarTitle","showNavigationBarLoading","hideNavigationBarLoading","hideHomeButton","setNavigationBarColor","redirectTo","reLaunch","navigateTo","switchTab","navigateBack","checkIsUserAdvisedToRest","getUserGameLabel","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getUserCloudStorage","getUserInteractiveStorage","modifyFriendInteractiveStorage","removeUserCloudStorage","setUserCloudStorage","exitVoIPChat","joinVoIPChat","updateVoIPChatMuteConfig","showKeyboard","updateKeyboard","openCustomerServiceConversation","setMenuStyle","setStatusBarStyle","exitMiniProgram","requestMidasPayment","showRedPackage","chooseMedia","requestSubscribeSystemMessage","getGroupInfo","getBLEDeviceRSSI","createBLEPeripheralServer","subscribeVoIPVideoMembers","previewMedia","makeBluetoothPair","setBLEMTU","getVideoInfo","compressVideo","checkIsOpenAccessibility","requestFacetoFacePayment","updateWeChatApp","join1v1Chat","setEnable1v1Chat","shareToWeRun","addPhoneCalendar","addPhoneRepeatCalendar","getRandomValues","showShareImageMenu","shareFileMessage","shareVideoMessage","addFileToFavorites","addVideoToFavorites","getUserProfile","searchContacts"],oj=(n(191),[{name:"quicklyAddBrandContact",permissionByte:"quicklyAddBrandContact"},{name:"privateScanItem",permissionByte:"privateScanItem"},{name:"privateSearchContacts",permissionByte:"privateSearchContacts"},{name:"setNavigateBackInterception",permissionByte:"private_setNavigateBackInterception"},{name:"stopNavigateBackInterception",permissionByte:"private_stopNavigateBackInterception"}]),ij=function(e){var t=!0===At.default.debug,n="devtools"===At.default.platform;(t||n)&&console.warn("wx."+e+" is deprecated, and will be removed in future."),Object(br.reportDeprecatedAPI)("wx."+e)};var aj,sj,cj=Xe.default.createBufferURL||function(){return""},uj=Xe.default.revokeBufferURL||function(){return!1},lj=Xe.default.createSignal||function(){return null},dj=!1,fj={},pj=JSON.parse,hj="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",vj="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function gj(){if("string"==typeof At.default.opConfig){var e;try{e=pj(At.default.opConfig)}catch(e){}return e&&e.expt_info}return At.default.opConfig&&At.default.opConfig.expt_info}function _j(){var e,t=gj();return t&&dj?(e=1,aj=t,Reporter.reportIDKey({key:"useLaunchExptInfo"})):t?(e=2,aj=t,Reporter.reportIDKey({key:"useLaunchExptInfo"}),Reporter.reportIDKey({key:"useOriginLaunchExptInfo"})):(e=0,Reporter.reportIDKey({key:"useContactExptInfo"})),{exptInfo:aj,jsDataType:e}}function bj(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}"string"==typeof hj&&(hj=hj.replace(" ","")),"string"==typeof vj&&(vj=vj.replace(" ","-")),Object(V.onNativeEvent)("onAppEnterForeground",(function(e){Object.assign(fj,e),sj=fj.sessionId})),bu((function(e){gj()&&(dj=!0)})),At.default.onReady((function(){Object.assign(fj,At.default.appLaunchInfo),At.default.opConfig?aj=gj():At.default.appContactInfo&&At.default.appContactInfo.passThroughInfo&&(aj=At.default.appContactInfo.passThroughInfo.expt_info)}));var yj=Object(df.default)("getExptInfo","webapi_wxaexpt_hit",{},{},(function(e){return{param_name_list:e.keyList}}),(function(e){return e.list={},Array.isArray(e.hit_list)&&e.hit_list.forEach((function(t){e.list[t.param_name]=t.param_value})),delete e.base_resp,delete e.hit_list,delete e.rawData,e}));function mj(e,t){var n=2,r=At.default||{},o=r.accountInfo,i=r.envVersion,a=o?o.appId:"";"release"===i?n=1:"trial"===i&&(n=3);var s=Object(ea.getSystemInfoSync)();fj.sessionId||(fj.sessionId=fj.sessionid),fj.usedState||(fj.usedState=fj.usedstate),qv(1005,JSON.stringify({appid:a,app_state:n,appversion:Object(Sb.getAccountInfoSync)().miniProgram.version,enter_scene:fj.scene,scene_note:fj.scene_note||fj.sceneNote,prescene:fj.prescene,prescene_note:fj.prescene_note||fj.presceneNote,sessionid:fj.sessionId,add_state:fj.usedState,page_path:bj()||fj.path,page_query:JSON.stringify(fj.query||{}),referpagepath:fj.referpagepath,isentrance:sj||sj===fj.sessionId?0:1,event_time:Date.now(),sdk_version:Ib.SDKVersion,devicemodel:s.model,devicebrand:s.brand,os_name:s.platform,os_version:s.system,language_version:s.language,networktype:Object(No._getCurrentNetworkType)(),event_name:e,event_value:JSON.stringify(t),unique_id:String(Date.now()+Math.random()),screen_width:At.default.screenWidth,screen_height:At.default.screenHeight,open_source:At.default.host&&At.default.host.appId?2:1,host_appid:At.default.host?At.default.host.appId:""}),"immediate")}var wj=Object(df.default)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(function(e){return{export_id:e.feedId,finder_username:e.finderUserName}}),(function(e){e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData}));function Oj(){if(void 0===__appServiceEngine__)return"";var e=__appServiceEngine__.getCurrentPagesByDomain("");return e&&e.length?e[e.length-1].route:""}function Sj(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=[e||"",Oj(),t,n,r].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"WeAppToChannels",value:o})}function Ij(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;__sclEngine__.initScl((function(n){var r=n.mainRoot.append("toast",e);"function"==typeof t&&t(r)}))}var Ej="https://mp.weixin.qq.com/intp/jump";function Cj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}Protect.hijack(),Protect.hijackWasm(),Object(Gi.initCheckCookies)();var Tj,kj=vd.connectSocket,Aj=vd.closeSocket,Pj=vd.sendSocketMessage,Dj=vd.onSocketOpen,jj=vd.onSocketClose,xj=vd.onSocketMessage,Rj=vd.onSocketError,Mj=cr.chooseImage,Nj=cr.previewImage,Lj=cr.getImageInfo,Bj=cr.saveImageToPhotosAlbum,Fj=cr.compressImage,Wj=a.startRecord,Uj=a.stopRecord,Vj=o.chooseVideo,Gj=o.saveVideoToPhotosAlbum,Hj=o.getVideoInfo,zj=o.compressVideo,qj=i.playVoice,Yj=i.pauseVoice,Kj=i.stopVoice,Jj=i.onVoicePlayEnd,Xj=pr.loadFontFace,$j=s.getBackgroundAudioPlayerState,Zj=s.playBackgroundAudio,Qj=s.pauseBackgroundAudio,ex=s.seekBackgroundAudio,tx=s.stopBackgroundAudio,nx=s.onBackgroundAudioPlay,rx=s.onBackgroundAudioPause,ox=s.onBackgroundAudioStop,ix=AC,ax=PC,sx=DC,cx=xC,ux=MC,lx=FC,dx=RC,fx=NC,px=WC,hx=UC,vx=GC,gx=HC,_x=qC,bx=YC,yx=function e(t){var n="ok",r=0;if(jD()&&!t.ignoreSelfVersion?(r=-20001,n=RD[5]):PD.widget?(r=-20002,n=RD[0]):PD.occupied&&(r=-20003,n=RD[8]),"ok"===n){var o=Object(ea.getSystemInfoSync)(),i=o.cameraAuthorized,a=o.microphoneAuthorized;if(!i||!a)return i||(n=RD[1],r=-30001),a||(n=RD[2],r=-30002),void Object(wf.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete:function(){Object(R.beforeInvokeFail)("join1v1Chat",t,n,r)}});ED().then((function(o){var i=o.authSetting["scope.camera"],a=o.authSetting["scope.record"];i&&a?MD().then((function(){mP({complete:function(e){if(PD.occupied=e.join,PD.occupied)n=RD[8],r=-20003,Object(R.beforeInvokeFail)("join1v1Chat",t,n,r);else{var o=Object.assign({role:"caller"},t);o.caller.openid=PD.userSessionInfo.openid,PD.widget=new xD(o)}}})}),(function(){n=RD[7],r=-3e4,Object(R.beforeInvokeFail)("join1v1Chat",t,n,r)})):a?i||CD({scope:"scope.camera"}).then((function(){e(t)}),(function(){n=RD[4],r=-30004,Object(R.beforeInvokeFail)("join1v1Chat",t,n,r)})):CD({scope:"scope.record"}).then((function(){e(t)}),(function(){n=RD[3],r=-30003,Object(R.beforeInvokeFail)("join1v1Chat",t,n,r)}))}))}else Object(R.beforeInvokeFail)("join1v1Chat",t,n,r)},mx=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(R.beforeInvoke)("setEnable1v1Chat",t,{enable:!0})){MD();var n="ok",r=0;if(jD()&&!t.ignoreSelfVersion)return r=-20001,n=RD[5],void Object(R.beforeInvokeFail)("setEnable1v1Chat",t,n,r);if(!t.enable)return PD.enable=!1,PD.ignoreSelfVersion=t.ignoreSelfVersion||!1,void Object(R.beforeInvokeCallback)({name:"setEnable1v1Chat",args:t});var o=Object(ea.getSystemInfoSync)(),i=o.cameraAuthorized,a=o.microphoneAuthorized;if(!i||!a)return i||(r=-30001,n=RD[1]),a||(r=-30002,n=RD[2]),void Object(wf.showModal)({title:"",content:"请在“设置-隐私”选项中，允许微信访问你的摄像头和麦克风",showCancel:!1,complete:function(){Object(R.beforeInvokeFail)("setEnable1v1Chat",t,n,r)}});ED().then((function(o){var i=o.authSetting["scope.camera"],a=o.authSetting["scope.record"];i&&a?(PD.enable=!0,PD.ignoreSelfVersion=t.ignoreSelfVersion||!1,PD.minWindowType=re.isNumber(t.minWindowType)?t.minWindowType:1,Object(R.beforeInvokeCallback)({name:"setEnable1v1Chat",args:t})):a?i||CD({scope:"scope.camera"}).then((function(){e(t)}),(function(){r=-30004,n=RD[4],Object(R.beforeInvokeFail)("setEnable1v1Chat",t,n,r)})):CD({scope:"scope.record"}).then((function(){e(t)}),(function(){r=-30003,n=RD[3],Object(R.beforeInvokeFail)("setEnable1v1Chat",t,n,r)}))}))}},Ox=b.captureScreen,Sx=b.onUserCaptureScreen,Ix=b.offUserCaptureScreen,Ex=b.setKeepScreenOn,Cx=b.setScreenBrightness,Tx=b.getScreenBrightness,kx=y.vibrateShort,Ax=y.vibrateLong,Px=m.chooseContact,Dx=m.chooseWeChatContact,jx=m.addPhoneContact,xx=m.quicklyAddBrandContact,Rx=m.searchContacts,Mx=m.privateSearchContacts,Nx=lu.interaction.showToast,Lx=lu.interaction.hideToast,Bx=lu.interaction.showLoading,Fx=lu.interaction.hideLoading,Wx=lu.interaction.showModal,Ux=lu.interaction.showActionSheet,Vx=lu.interaction.showShareActionSheet,Gx=lu.navigationBar.setNavigationBarTitle,Hx=lu.navigationBar.showNavigationBarLoading,zx=lu.navigationBar.hideNavigationBarLoading,qx=lu.navigationBar.setNavigationBarColor,Yx=lu.navigationBar.setNavigationBarAlpha,Kx=lu.navigationBar.setNavigationBarRightButton,Jx=lu.navigationBar.onTapNavigationBarRightButton,Xx=lu.navigationBar.hideHomeButton,$x=Ut.share.getShareInfo,Zx=Ut.share.showShareMenu,Qx=Ut.share.hideShareMenu,eR=Ut.share.updateShareMenu,tR=Ut.share.shareAppMessageForFakeNative,nR=Ut.share.authPrivateMessage,rR=Ut.share.showShareImageMenu,oR=Ut.share.shareFileMessage,iR=Ut.share.shareVideoMessage,aR=Wd.clearStorage,sR=Wd.clearStorageSync,cR=Wd.getStorage,uR=Wd.getStorageInfo,lR=Wd.getStorageInfoSync,dR=Wd.getStorageSync,fR=Wd.removeStorage,pR=Wd.removeStorageSync,hR=Wd.setStorage,vR=Wd.setStorageSync,gR=l.getBackgroundFetchData,_R=l.onBackgroundFetchData,bR=l.setBackgroundFetchToken,yR=l.getBackgroundFetchToken,mR={},wR={drawCanvas:Te.drawCanvas,createContext:Te.createContext,createCanvasContext:Te.createCanvasContext,canvasToTempFilePath:Te.canvasToTempFilePath,canvasGetImageData:Te.canvasGetImageData,canvasPutImageData:Te.canvasPutImageData,createOffscreenCanvas:ke.createOffscreenCanvas,getAccountInfoSync:Qi.getAccountInfoSync,getShareInfo:$x,authPrivateMessage:nR,pageScrollTo:lu.pageScrollTo,chooseInvoiceTitle:Ut.chooseInvoiceTitle,chooseInvoice:Ut.chooseInvoice,arrayBufferToBase64:__errorTracer__.surroundThirdByTryCatch(N.arrayBufferToBase64),base64ToArrayBuffer:__errorTracer__.surroundThirdByTryCatch(N.base64ToArrayBuffer),openSetting:Ut.openSetting,getExtConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};setTimeout((function(){var t={errMsg:"getExtConfig: ok",extConfig:Nu()};"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}),0)},chooseMedia:so,previewMedia:lo,chooseMultiMedia:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("chooseMultiMedia",e)},chooseMessageFile:ao,chooseWeChatContact:Dx,uploadEncryptedFileToCDN:u.uploadEncryptedFileToCDN,onUploadEncryptedFileToCDNProgress:u.onUploadEncryptedFileToCDNProgress,uploadToCommonCDN:u.private_uploadToCommonCDN,getExtConfigSync:Nu,showShareMenu:Zx,hideShareMenu:Qx,updateShareMenu:eR,shareAppMessageForFakeNative:tR,openUrl:av.openUrl,setNavigationBarColor:qx,setNavigationBarAlpha:Yx,showShareImageMenu:rR,shareFileMessage:oR,shareVideoMessage:iR,vibrateShort:kx,vibrateLong:Ax,getSetting:Ut.getSetting,checkIsSupportFacialRecognition:Ut.facialRecognition.checkIsSupportFacialRecognition,startFacialRecognitionVerify:Ut.facialRecognition.startFacialRecognitionVerify,startFacialRecognitionVerifyAndUploadVideo:Ut.facialRecognition.startFacialRecognitionVerifyAndUploadVideo,startCustomFacialRecognitionVerify:Ut.facialRecognition.startCustomFacialRecognitionVerify,startCustomFacialRecognitionVerifyAndUploadVideo:Ut.facialRecognition.startCustomFacialRecognitionVerifyAndUploadVideo,sendBizRedPacket:Ut.redPacket.sendBizRedPacket,sendGoldenRedPacket:Ut.redPacket.sendGoldenRedPacket,openGoldenRedPacketDetail:Ut.redPacket.openGoldenRedPacketDetail,showRedPackage:Ut.redPacket.showRedPackage,addPhoneContact:jx,quicklyAddBrandContact:xx,searchContacts:Rx,privateSearchContacts:Mx,setScreenBrightness:Cx,getScreenBrightness:Tx,shareToWeRun:Ut.shareToWeRun,getWeRunData:Ut.getWeRunData,uploadWeRunData:Ut.uploadWeRunData,addWeRunData:Ut.addWeRunData,canIUse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if("string"!=typeof e)throw new N.AppServiceSdkKnownError("canIUse: schema should be a string");var t=e.split(".");return!!Gd.apply(void 0,Object(Y.default)(t))||(!!zd.apply(void 0,Object(Y.default)(t))||!!Hd.apply(void 0,Object(Y.default)(t)))},setPageStyle:lu.setPageStyle,triggerGettingWidgetData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("triggerGettingWidgetData",e,{cacheKey:""})&&Object(R.invokeMethod)("triggerGettingWidgetData",e,{})},navigateToMiniProgram:Zi.navigateToMiniProgram,navigateToMiniProgramDirectly:Zi.navigateToMiniProgramDirectly,navigateToDevMiniProgram:Zi.navigateToDevMiniProgram,navigateBackMiniProgram:Zi.navigateBackMiniProgram,launchMiniProgram:Zi.launchMiniProgram,launchDevMiniProgram:Zi.launchDevMiniProgram,launchApplicationDirectly:iv.launchApplicationDirectly,launchApplicationForNative:iv.launchApplicationForNative,setNavigationBarRightButton:Kx,onTapNavigationBarRightButton:Jx,setTopBarText:lu.topBar.setTopBarText,setTabBarBadge:lu.tabBar.setTabBarBadge,removeTabBarBadge:lu.tabBar.removeTabBarBadge,showTabBarRedDot:lu.tabBar.showTabBarRedDot,hideTabBarRedDot:lu.tabBar.hideTabBarRedDot,showTabBar:lu.tabBar.showTabBar,hideTabBar:lu.tabBar.hideTabBar,setTabBarStyle:lu.tabBar.setTabBarStyle,setTabBarItem:lu.tabBar.setTabBarItem,setBackgroundColor:lu.setBackgroundColor,setBackgroundTextStyle:lu.setBackgroundTextStyle,setEnableDebug:cv,captureScreen:Ox,onUserCaptureScreen:Sx,offUserCaptureScreen:Ix,setKeepScreenOn:Ex,checkIsSupportSoterAuthentication:Ut.soter.checkIsSupportSoterAuthentication,startSoterAuthentication:Ut.soter.startSoterAuthentication,checkIsSoterEnrolledInDevice:Ut.soter.checkIsSoterEnrolledInDevice,openDeliveryList:av.openDeliveryList,navigateBackH5:function(e){ND?Object(R.invokeMethod)("navigateBackH5",e):Object(R.beforeInvokeFail)("navigateBackH5",e,"not HTML5 page can navigate back.")},openBusinessView:function(e){if(Object(R.beforeInvoke)("openBusinessView",e,{businessType:""})){var t=Object.assign({},e);delete t.sourcetype,delete t.preScene,delete t.preSceneNote,delete t.agentId,delete t.privateExtraData,delete t.scene,delete t.sceneNote,Object(R.invokeMethod)("openBusinessView",t)}},navigateBackApplication:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(7===At.default.appType){var t="";Object(re.isObject)(e.extraData)&&(t=JSON.stringify(e.extraData));var n=LD("navigateBackApplication",Object.assign({},e,{extraData:t}));Object(R.invokeMethod)("navigateBackApplication",n)}else Object(R.beforeInvokeFail)(e,"permission denied",1)},navigateBackNative:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";Object(re.isObject)(e.extraData)&&(t=JSON.stringify(e.extraData)),ee.IS_IOS&&At.default.clientVersion<=385877035||ee.IS_ANDROID&&At.default.clientVersion<=654312491?Object(R.beforeInvokeFail)("navigateBackNative",e,"does not exist."):Object(R.invokeMethod)("navigateBackNative",Object.assign({},e,{extraData:t}))},reportIDKey:function(){},reportKeyValue:function(){},setWindowSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvokeFail)("setWindowSize",e,"deprecated")},setNavigationBarTitle:Gx,showNavigationBarLoading:Hx,hideNavigationBarLoading:zx,hideHomeButton:Xx,startPullDownRefresh:lu.startPullDownRefresh,stopPullDownRefresh:lu.stopPullDownRefresh,operateWXData:Ut.operateWXData,getOpenDeviceId:Ut.getOpenDeviceId,getMenuButtonBoundingClientRect:lu.getMenuButtonBoundingClientRect,getSelectedTextRange:lu.getSelectedTextRange,enableAlertBeforeUnload:lu.enableAlertBeforeUnload,disableAlertBeforeUnload:lu.disableAlertBeforeUnload,setNavigateBackInterception:lu.setNavigateBackInterception,stopNavigateBackInterception:lu.stopNavigateBackInterception,makeBluetoothPair:w.makeBluetoothPair,openBluetoothAdapter:w.openBluetoothAdapter,closeBluetoothAdapter:w.closeBluetoothAdapter,getBluetoothAdapterState:w.getBluetoothAdapterState,onBluetoothAdapterStateChange:w.onBluetoothAdapterStateChange,offBluetoothAdapterStateChange:w.offBluetoothAdapterStateChange,startBluetoothDevicesDiscovery:w.startBluetoothDevicesDiscovery,stopBluetoothDevicesDiscovery:w.stopBluetoothDevicesDiscovery,getBluetoothDevices:w.getBluetoothDevices,getConnectedBluetoothDevices:w.getConnectedBluetoothDevices,createBLEConnection:w.createBLEConnection,setBLEMTU:w.setBLEMTU,closeBLEConnection:w.closeBLEConnection,getBLEDeviceServices:w.getBLEDeviceServices,getBLEDeviceRSSI:w.getBLEDeviceRSSI,getBLEDeviceCharacteristics:w.getBLEDeviceCharacteristics,createBLEPeripheralServer:w.createBLEPeripheralServer,onBLEPeripheralConnectionStateChanged:w.onBLEPeripheralConnectionStateChanged,offBLEPeripheralConnectionStateChanged:w.offBLEPeripheralConnectionStateChanged,notifyBLECharacteristicValueChanged:w.notifyBLECharacteristicValueChanged,notifyBLECharacteristicValueChange:w.notifyBLECharacteristicValueChange,readBLECharacteristicValue:w.readBLECharacteristicValue,writeBLECharacteristicValue:w.writeBLECharacteristicValue,onBluetoothDeviceFound:w.onBluetoothDeviceFound,offBluetoothDeviceFound:w.offBluetoothDeviceFound,onBLEConnectionStateChanged:w.onBLEConnectionStateChanged,onBLEConnectionStateChange:w.onBLEConnectionStateChange,onBLECharacteristicValueChange:w.onBLECharacteristicValueChange,offBLEConnectionStateChanged:w.offBLEConnectionStateChanged,offBLEConnectionStateChange:w.offBLEConnectionStateChange,offBLECharacteristicValueChange:w.offBLECharacteristicValueChange,startBeaconDiscovery:_.startBeaconDiscovery,stopBeaconDiscovery:_.stopBeaconDiscovery,getBeacons:_.getBeacons,onBeaconUpdate:_.onBeaconUpdate,offBeaconUpdate:_.offBeaconUpdate,onBeaconServiceChange:_.onBeaconServiceChange,offBeaconServiceChange:_.offBeaconServiceChange,startWifi:O.startWifi,stopWifi:O.stopWifi,getWifiList:O.getWifiList,getConnectedWifi:O.getConnectedWifi,connectWifi:O.connectWifi,presetWifiList:O.presetWifiList,setWifiList:O.setWifiList,onGetWifiList:O.onGetWifiList,onWifiConnected:O.onWifiConnected,offGetWifiList:O.offGetWifiList,offWifiConnected:O.offWifiConnected,onEvaluateWifi:O.onEvaluateWifi,getHCEState:S.getHCEState,startHCE:S.startHCE,stopHCE:S.stopHCE,sendHCEMessage:S.sendHCEMessage,onHCEMessage:S.onHCEMessage,offHCEMessage:S.offHCEMessage,getNFCAdapter:S.getNFCAdapter,startLocalServiceDiscovery:I.startLocalServiceDiscovery,stopLocalServiceDiscovery:I.stopLocalServiceDiscovery,onLocalServiceFound:I.onLocalServiceFound,offLocalServiceFound:I.offLocalServiceFound,onLocalServiceLost:I.onLocalServiceLost,offLocalServiceLost:I.offLocalServiceLost,onLocalServiceDiscoveryStop:I.onLocalServiceDiscoveryStop,offLocalServiceDiscoveryStop:I.offLocalServiceDiscoveryStop,onLocalServiceResolveFail:I.onLocalServiceResolveFail,offLocalServiceResolveFail:I.offLocalServiceResolveFail,redirectTo:lu.route.redirectTo,reLaunch:lu.route.reLaunch,navigateTo:lu.route.navigateTo,switchTab:lu.route.switchTab,navigateBack:lu.route.navigateBack,onAppShow:Qi.onAppShow,offAppShow:Qi.offAppShow,onAppHide:Qi.onAppHide,offAppHide:Qi.offAppHide,onError:Qi.onError,offError:Qi.offError,onUnhandledRejection:Qi.onUnhandledRejection,offUnhandledRejection:Qi.offUnhandledRejection,getLaunchOptionsSync:Qi.getLaunchOptionsSync,getEnterOptionsSync:Qi.getEnterOptionsSync,onWindowResize:lu.onWindowResize,offWindowResize:lu.offWindowResize,setPageOrientation:lu.setPageOrientation,getStorage:cR,getStorageSync:dR,setStorage:hR,setStorageSync:vR,removeStorage:fR,removeStorageSync:pR,clearStorage:aR,clearStorageSync:sR,getStorageInfo:uR,getStorageInfoSync:lR,getBackgroundFetchData:gR,onBackgroundFetchData:_R,setBackgroundFetchToken:bR,getBackgroundFetchToken:yR,request:jl,connectSocket:kj,closeSocket:Aj,sendSocketMessage:Pj,onSocketOpen:Dj,onSocketClose:jj,onSocketMessage:xj,onSocketError:Rj,uploadFile:Bl,downloadFile:ra.downloadFile,addNativeDownloadTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("addNativeDownloadTask",e,"iOS not supported"):Object(R.invokeMethod)("addNativeDownloadTask",e,{})},downloadApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(ee.IS_IOS)Object(R.beforeInvokeFail)("downloadApp",e,"iOS not supported");else{if(!Object(R.beforeInvoke)("downloadApp",e,{taskName:"",taskUrl:"",fileMd5:""}))return null;e.fileType=e.fileType||1;try{var t=new Od(e);return t}catch(t){return Object(R.beforeInvokeFail)("downloadApp",e,t.message),null}}},installDownloadApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("installDownloadApp",e,"iOS not supported"):Object(R.beforeInvoke)("installDownloadApp",e,{downloadId:""})&&Object(R.invokeMethod)("installDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("installDownloadTaskForNative","installDownloadApp")}})},getAppInstallState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("getAppInstallState",e,"iOS not supported"):e.packageName||e.packageNameArray?Object(R.invokeMethod)("getInstallStateForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("getInstallStateForNative","getAppInstallState")}}):Object(R.beforeInvokeFail)("getAppInstallState",e,"parameter error: require packageName or packageNameArray")},queryDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("queryDownloadAppTask",e,"iOS not supported"):e.downloadId||e.downloadIdArray||e.appIdArray?Object(R.invokeMethod)("queryDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("queryDownloadTaskForNative","queryDownloadAppTask"),"download_succ"===e.state&&(e.progress=100),(e.result||[]).forEach((function(e){"download_succ"===e.state&&(e.progress=100)}))}}):Object(R.beforeInvokeFail)("queryDownloadAppTask",e,"parameter error: require downloadId or downloadIdArray or appIdArray")},cancelDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("cancelDownloadAppTask",e,"iOS not supported"):Object(R.beforeInvoke)("cancelDownloadAppTask",e,{downloadIdArray:[]})&&Object(R.invokeMethod)("cancelDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("cancelDownloadTaskForNative","cancelDownloadAppTask")}})},resumeDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("resumeDownloadAppTask",e,"iOS not supported"):Object(R.beforeInvoke)("resumeDownloadAppTask",e,{downloadId:""})&&Object(R.invokeMethod)("resumeDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("resumeDownloadTaskForNative","resumeDownloadAppTask")}})},pauseDownloadAppTask:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_IOS?Object(R.beforeInvokeFail)("pauseDownloadAppTask",e,"iOS not supported"):Object(R.beforeInvoke)("pauseDownloadAppTask",e,{downloadId:""})&&Object(R.invokeMethod)("pauseDownloadTaskForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("pauseDownloadTaskForNative","pauseDownloadAppTask")}})},onDownloadAppStateChange:function(e){Object(R.onMethod)("onDownloadAppStateChangeForNative",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};__errorTracer__.surroundThirdByTryCatch(e,"at onDownloadAppStateChange callback function")(t)}))},downloadAppForIOS:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ee.IS_ANDROID)return Object(R.beforeInvoke)("downloadAppForIOS",e,{appUrl:""})?(Object(R.invokeMethod)("downloadAppInternalForNative",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("downloadAppInternalForNative","downloadAppForIOS")}}),null):null;Object(R.beforeInvokeFail)("downloadAppForIOS",e,"android not supported")},calRqt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("calRqt",e,{rqt:""})&&Object(R.invokeMethod)("calRqt",e)},secureTunnel:function(e){Object(R.invokeMethod)("secureTunnel",e)},chooseImage:Mj,previewImage:Nj,getImageInfo:Lj,saveImageToPhotosAlbum:Bj,compressImage:Fj,startRecord:Wj,stopRecord:Uj,playVoice:qj,pauseVoice:Yj,stopVoice:Kj,onVoicePlayEnd:Jj,chooseVideo:Vj,saveVideoToPhotosAlbum:Gj,getVideoInfo:Hj,compressVideo:zj,loadFontFace:Xj,createMediaContainer:Po,createMediaRecorder:jo.createMediaRecorder,createVideoDecoder:Do.createVideoDecoder,openVideoEditor:Mo,createMediaAudioPlayer:no,getLocation:Iu,openLocation:Tu,chooseLocation:Eu,choosePoi:Cu,onLocationChange:Au,offLocationChange:Pu,onLocationChangeError:ju,offLocationChangeError:xu,startLocationUpdateBackground:function(e){var t={subKey:"",enableIndoor:!1};Object.assign(t,e),Object(R.invokeMethod)("enableLocationUpdateBackground",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("enableLocationUpdateBackground","startLocationUpdateBackground")}})},startLocationUpdate:Ru,stopLocationUpdate:Mu,getNetworkType:No.getNetworkType,onNetworkStatusChange:No.onNetworkStatusChange,offNetworkStatusChange:No.offNetworkStatusChange,getSystemInfo:ea.getSystemInfo,getSystemInfoSync:ea.getSystemInfoSync,getSystemInfoAsync:ea.getSystemInfoAsync,getBatteryInfo:d.getBatteryInfo,getBatteryInfoSync:d.getBatteryInfoSync,startAccelerometer:f.startAccelerometer,stopAccelerometer:f.stopAccelerometer,onAccelerometerChange:f.onAccelerometerChange,offAccelerometerChange:f.offAccelerometerChange,startCompass:p.startCompass,stopCompass:p.stopCompass,onCompassChange:p.onCompassChange,offCompassChange:p.offCompassChange,startDeviceMotionListening:C.startDeviceMotionListening,stopDeviceMotionListening:C.stopDeviceMotionListening,onDeviceMotionChange:C.onDeviceMotionChange,offDeviceMotionChange:C.offDeviceMotionChange,startGyroscope:E.startGyroscope,stopGyroscope:E.stopGyroscope,onGyroscopeChange:E.onGyroscopeChange,offGyroscopeChange:E.offGyroscopeChange,checkIsOpenAccessibility:T.checkIsOpenAccessibility,addPhoneCalendar:k.addPhoneCalendar,addPhoneRepeatCalendar:k.addPhoneRepeatCalendar,getRandomValues:A.getRandomValues,reportAction:function(e){Object(R.invokeMethod)("reportAction",e)},getBackgroundAudioManager:s.getBackgroundAudioManager,getRecorderManager:a.getRecorderManager,getBackgroundAudioPlayerState:$j,playBackgroundAudio:Zj,pauseBackgroundAudio:Qj,seekBackgroundAudio:ex,stopBackgroundAudio:tx,onBackgroundAudioPlay:nx,onBackgroundAudioPause:rx,onBackgroundAudioStop:ox,joinVoIPChat:ix,exitVoIPChat:ax,updateVoIPChatMuteConfig:sx,onVoIPChatMembersChanged:cx,onVoIPChatSpeakersChanged:ux,onVoIPChatInterrupted:lx,offVoIPChatMembersChanged:dx,offVoIPChatSpeakersChanged:fx,offVoIPChatInterrupted:px,subscribeVoIPVideoMembers:hx,onVoIPVideoMembersChanged:vx,offVoIPVideoMembersChanged:gx,onVoIPChatStateChanged:_x,offVoIPChatStateChanged:bx,join1v1Chat:yx,setEnable1v1Chat:mx,requestSubscribeMessage:Ut.requestSubscribeMessage,login:Ut.login,logout:Ut.logout,checkSession:Ut.checkSession,authorize:Ut.authorize,getUserInfo:Ut.getUserInfo,getUserProfile:Ut.getUserProfile,requestPayment:Ut.payment.requestPayment,verifyPaymentPassword:Ut.payment.verifyPaymentPassword,bindPaymentCard:Ut.payment.bindPaymentCard,requestPaymentToBank:Ut.payment.requestPaymentToBank,requestVirtualPayment:Ut.payment.requestVirtualPayment,openOfflinePayView:Ut.payment.openOfflinePayView,openWCPayCardList:Ut.payment.openWCPayCardList,requestMallPayment:Ut.payment.requestMallPayment,setCurrentPaySpeech:Ut.payment.setCurrentPaySpeech,loadPaySpeechDialectConfig:Ut.payment.loadPaySpeechDialectConfig,requestJointPayment:Ut.payment.requestJointPayment,getWCPayOverseaPrepayRequest:Ut.payment.getWCPayOverseaPrepayRequest,requestH5Transaction:Ut.payment.requestH5Transaction,openWCPayOverseaPaymentReceive:Ut.payment.openWCPayOverseaPaymentReceive,handleWCPayOverseaWalletBuffer:Ut.payment.handleWCPayOverseaWalletBuffer,requestVerifyUserIdentity:Ut.payment.requestVerifyUserIdentity,requestPersonalPay:Ut.payment.requestPersonalPay,phoneBindCardVerifySms:Ut.payment.phoneBindCardVerifySms,faceVerifyForPay:Ut.faceVerifyForPay,openOfficialAccountProfile:Ut.openOfficialAccountProfile,openUserProfile:Ut.openUserProfile,requestBizSplitBillPayment:Ut.requestBizSplitBillPayment,openSelectPayment:Ut.payment.openSelectPayment,requestEntrustAuthorization:Ut.payment.requestEntrustAuthorization,requestFacetoFacePayment:Ut.payment.requestFacetoFacePayment,requestQueryCashier:Ut.payment.requestQueryCashier,requestOrderPayment:Ut.payment.requestOrderPayment,openMiniProgramProfile:Ut.openMiniProgramProfile,openMiniProgramSearch:Ut.openMiniProgramSearch,openMiniProgramHistoryList:Ut.openMiniProgramHistoryList,openMiniProgramStarList:Ut.openMiniProgramStarList,batchGetContactDirectly:Ut.batchGetContactDirectly,preloadMiniProgramEnvDirectly:Ut.preloadMiniProgramEnvDirectly,predownloadMiniProgramPackageDirectly:Ut.predownloadMiniProgramPackageDirectly,preventApplePayUI:Ut.preventApplePayUI,getWxSecData:Ut.getWxSecData,addCard:Ut.card.addCard,openCard:Ut.card.openCard,checkTrafficCardConditions:Ut.trafficCard.checkTrafficCardConditions,queryTrafficCardInfo:Ut.trafficCard.queryTrafficCardInfo,issueTrafficCard:Ut.trafficCard.issueTrafficCard,rechargeTrafficCard:Ut.trafficCard.rechargeTrafficCard,setDefaultTrafficCard:Ut.trafficCard.setDefaultTrafficCard,addFileToFavorites:Ut.favorites.addFileToFavorites,addVideoToFavorites:Ut.favorites.addVideoToFavorites,scanCode:v.scanCode,openQRCode:v.openQRCode,scanItem:v.scanItem,privateScanItem:v._scanItem,chooseAddress:Ut.chooseAddress,saveFile:Sd.saveFile,openDocument:Sd.openDocument,getSavedFileList:Sd.getSavedFileList,getSavedFileInfo:Sd.getSavedFileInfo,getFileInfo:Sd.getFileInfo,removeSavedFile:Sd.removeSavedFile,getFileSystemManager:function(){return Id.default.app},saveFileToDisk:oT,getABTestConfig:yl.getABTestConfig,chooseContact:Px,removeUserCloudStorage:function(e){var t=Object(nv.checkKeyList)(e.keyList);t?Object(R.beforeInvokeFail)("removeUserCloudStorage",e,t):rv(e)},setUserCloudStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Array.isArray(e.KVDataList)?0!==e.KVDataList.length?e.KVDataList.some((function(e){if("object"!==Object(x.default)(e)||"string"!=typeof e.key||"string"!=typeof e.value)return!0}))?Object(R.beforeInvokeFail)("setUserCloudStorage",e,"invalid KVData item"):ov(e):Object(R.beforeInvokeFail)("setUserCloudStorage",e,"KVDataList.length must greater than 0"):Object(R.beforeInvokeFail)("setUserCloudStorage",e,"KVDataList must be an Array")},makePhoneCall:h.makePhoneCall,makeVoIPCall:h.makeVoIPCall,onAppRoute:Qi.onAppRoute,onAppRouteDone:Qi.onAppRouteDone,onAppEnterBackground:Qi.onAppEnterBackground,onAppEnterForeground:Qi.onAppEnterForeground,onAppUnhang:Qi.onAppUnhang,onPageReload:function(e){lu.route.onPageReload.call(wR,e)},onPageNotFound:Qi.onPageNotFound,offPageNotFound:Qi.offPageNotFound,onThemeChange:Qi.onThemeChange,offThemeChange:Qi.offThemeChange,onCopyUrl:Qi.onCopyUrl,offCopyUrl:Qi.offCopyUrl,createAnimation:lu.createAnimation,createInnerAudioContext:bi,getAvailableAudioSources:qr,onAudioInterruptionBegin:ho,offAudioInterruptionBegin:vo,onAudioInterruptionEnd:_o,offAudioInterruptionEnd:bo,setInnerAudioOption:Yr,createAudioContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(L.default.currentWebviewId)?t.__wxExparserNodeId__:"";return sr.call(wR,e,L.default.currentWebviewId,n)},createVideoContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(L.default.currentWebviewId)?t.__wxExparserNodeId__:"";return Dt.createVideoContext.call(wR,e,L.default.currentWebviewId,n)},createMapContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(L.default.currentWebviewId)?t.__wxExparserNodeId__:"";return me.call(wR,e,L.default.currentWebviewId,n)},createCameraContext:function(){return nn.call(wR,null,L.default.currentWebviewId)},createLivePlayerContext:function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(L.default.currentWebviewId)?t.__wxExparserNodeId__:"";return Tn.call(wR,e,L.default.currentWebviewId,n)},createLivePusherContext:function(){return Yn.call(wR,null,L.default.currentWebviewId)},onWebviewEvent:lu.event.onWebviewEvent,onNativeEvent:lu.event.onNativeEvent,hideKeyboard:lu.hideKeyboard,onKeyboardHeightChange:lu.onKeyboardHeightChange,offKeyboardHeightChange:lu.offKeyboardHeightChange,getPublicLibVersion:sv,showModal:Wx,showToast:Nx,hideToast:Lx,showLoading:Bx,hideLoading:Fx,showActionSheet:Ux,showShareActionSheet:Vx,reportAnalytics:function(e,t){var n=void 0!==__appServiceEngine__&&void 0!==__appServiceEngine__.getCurrentPagesByDomain&&__appServiceEngine__.getCurrentPagesByDomain(""),r=n&&n.pop&&n.pop(),o={business:"mmbizwxaanalytics",eventID:e,data:t||{},page:r&&r.__route__,uid:Date.now().toString(16)+Math.random().toString(16).substr(2),type:1,version:wx&&wx.version&&wx.version.version||0};ee.IS_DEVTOOLS||(console.info("[自定义分析] 上报成功"),console.info(o)),Object(R.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify(o)})},reportMonitor:function(e,t){if(e)if(void 0===t&&(t=1),"number"==typeof t){var n=JSON.stringify({business:"mmbizwxamonitor",name:e,value:t,timeStamp:Date.now()});Object(R.invokeMethod)("reportRealtimeAction",{actionData:n})}else console.error("wx.reportMonitor: 'value' argument must be a Number.");else console.error("wx.reportMonitor: require 'name' argument.")},getClipboardData:g.getClipboardData,setClipboardData:g.setClipboardData,createSelectorQuery:function(e){return nl(e,"")},createIntersectionObserver:function(e,t){return il(e,t,"")},createMediaQueryObserver:function(e,t){return cl(e,t,"")},nextTick:fl,updatePerfData:function(e){Object(R.invokeMethod)("updatePerfData",e)},traceEvent:function(e){Object(R.invokeMethod)("traceEvent",e)},onMemoryWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?Tg=e:Pg(e)},offMemoryWarning:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?Tg=null:Dg(e)},reportPerformance:function(e,t,n){i_(e,t,n)},getPerformance:a_.getPerformance,getUpdateManager:function(){return b_},updateWeChatApp:m_,createWorker:function(e,t){var n=Object.assign({workerUrl:e,appid:At.default.accountInfo.appId,useExperimentalWorker:!1},t);if(n.useExperimentalWorker=n.useExperimentalWorker&&Object(gl.checkPermissionSync)("WeAppWorker"),function(e){for(var t=0;t<Fk.length;t++)if(e===Fk[t])return!0;return!1}(e))throw new Error('createWorker: Worker "'+e+'" hit black list');if(Lk.default.size>=Bk)throw new Error("createWorker: exceed max concurrent workers limit.");var r=__safeway__.worker.create("workers.js",n),o=r.workerId,i=r.useWKWorker;if(setTimeout((function(){Reporter.reportIDKey({key:i?"createWKWorker":"createNormalWorker"})}),0),o>0)return new Nk.default(o,e,{useWKWorker:i});throw-1===o?new Error('createWorker: Worker "'+e+'" does not exists.'):new Error("createWorker: unknown error.")},voiceSplitJoint:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("voiceSplitJoint",e)},uploadSilkVoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("uploadSilkVoice",e)},downloadSilkVoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("downloadSilkVoice",e)},getResPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("getResPath",e)},setResPath:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("setResPath",e)},setCookies:Gi.setCookies,getCookies:Gi.getCookies,faceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("faceDetect",e)},initFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("faceProcessInit",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"initFaceDetect:$2")}})},stopFaceDetect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("faceProcessStop",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^(\w+):(ok|fail)/,"stopFaceDetect:$2")}})},createBufferURL:cj,revokeBufferURL:uj,createSignal:lj,bindGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("bindGroup",e)},joinGroup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ee.IS_ANDROID&&At.default.clientVersion<654316032||ee.IS_IOS?Object(na._operateWXData)({apiName:"wxaapi_wxajoinchatroom",reqData:{groupid:e.groupId,nonce_str:e.nonceStr,signature:e.signature},success:function(e){var t=JSON.parse(e.rawData);Object(R.invokeMethod)("private_openUrl",{url:t.join_chatroom_url,isNativeStyle:!0})},fail:function(e){var t=e.errMsg;Object(wf.showToast)({title:t.replace(/^\w+:fail\s+/,""),icon:"none"})},complete:function(){Object(R.beforeInvokeCallback)({name:"joinGroup",args:e})}}):Object(R.invokeMethod)("joinGroup",e)},getLabInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("getLabInfo",e,{labId:""})&&Object(R.invokeMethod)("getLabInfo",e)},setLabInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.beforeInvoke)("setLabInfo",e,{labId:"",enabled:Boolean()})&&Object(R.invokeMethod)("setLabInfo",e)},createUDPSocket:pT,env:Mk,error:KD.error,isSystemError:KD.isSystemError,isSDKError:KD.isSDKError,isThirdError:KD.isThirdError,createRewardedVideoAd:function(e){var t=_C({},e);return delete t.pluginId,wC(t)},createInterstitialAd:function(e){var t=_C({},e);return delete t.pluginId,new QS(t)},createCustomAd:function(e){var t=_C({},e);return delete t.pluginId,new bI(t)},preloadVideoAd:function(e){if(console.warn("注意：wx.preloadVideoAd接口即将下线，请使用wx.preloadAd替换。"),Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var r=e[t];-1===wa.indexOf(r)?wa.length>=Oa?console.warn("preloadVideoAd最多预加载"+Oa+"个广告单元,"+r+"将不被预加载"):(wa.push(r),ma(r)):console.warn("preloadVideoAd已预加载过"+r+"这个广告单元,请勿重复调用")}else console.warn("preloadVideoAd参数应为数组")},preloadAd:function(e){if(Array.isArray(e))for(var t=0,n=e.length;t<n;t++){var r=e[t],o=r.unitId,i=r.type;-1!==["banner","custom","videoPatch","video"].indexOf(i)?-1===Jc.indexOf(o)?(Jc.push(o),Xc[o]=r,ru(r)):console.warn("preloadAd已预加载过"+o+"这个广告单元,请勿重复调用"):console.warn("wx.preloadAd参数有误，请检查type类型")}else console.warn("preloadAd参数应为数组")},getLogManager:Nv,getRealtimeLogManager:function(e){e=e||{};var t="develop"===At.default.envVersion||"trial"===At.default.envVersion;return e.isClientReport=!t,Ig(e)},getExptInfo:yj,getExptInfoSync:function(e){var t={},n=_j(),r=n.exptInfo,o=n.jsDataType;return r&&Array.isArray(r.expt_param_list)&&(Array.isArray(e)||(e=r.expt_param_list.map((function(e){return e.param_name}))),r.expt_param_list.forEach((function(n){-1!==e.indexOf(n.param_name)&&(t[n.param_name]=n.param_value,function(e,t,n){Reporter.reportKeyValue({key:"ExptHit",value:[hj,vj,e,encodeURIComponent(JSON.stringify(t)),0,"",n].join(",")})}(n.expt_group_id,n,o))}))),t},reportEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};setTimeout((function(){return mj(e,t)}))},getChannelsLiveInfo:wj,openChannelsLive:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wj(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(wf._showModal)({content:"即将打开"+r+"视频号直播",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(R.invokeMethod)("openChannelsLive",e,{beforeAll:function(t){var n=t.errMsg;Sj(e.finderUserName,1,/^\w+:ok/.test(n)?1:0,n)}}):(Sj(e.finderUserName,1,0,"cancel"),Object(R.beforeInvokeFail)("openChannelsLive",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Sj(e.finderUserName,1,0,n),Object(R.beforeInvokeFail)("openChannelsLive",e,n)},complete:null}))},openChannelsActivity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wj(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(wf._showModal)({content:"即将打开"+r+"视频号",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(R.invokeMethod)("openChannelsActivity",e,{beforeAll:function(t){var n=t.errMsg;Sj(e.finderUserName,3,/^\w+:ok/.test(n)?1:0,n)}}):(Sj(e.finderUserName,3,0,"cancel"),Object(R.beforeInvokeFail)("openChannelsActivity",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Sj(e.finderUserName,3,0,n),Object(R.beforeInvokeFail)("openChannelsActivity",e,n)},complete:null}))},openChannelsUserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wj(Object.assign({},e,{success:function(t){var n=t.nickname,r=n?"“"+n+"”":"";Object(wf._showModal)({content:"即将打开"+r+"视频号",confirmText:"允许",cancelText:"取消",success:function(t){t.confirm?Object(R.invokeMethod)("openChannelsUserProfile",e,{beforeAll:function(t){var n=t.errMsg;Sj(e.finderUserName,2,/^\w+:ok/.test(n)?1:0,n)}}):(Sj(e.finderUserName,2,0,"cancel"),Object(R.beforeInvokeFail)("openChannelsUserProfile",e,"cancel"))}})},fail:function(t){var n=t.errMsg;Sj(e.finderUserName,2,0,n),Object(R.beforeInvokeFail)("openChannelsUserProfile",e,n)},complete:null}))},openPublicServicePayment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.jumpToken,n=e.destUrl,r=e.openId;if(t&&n&&r){var o="?appid="+At.default.accountInfo.appId;o+="&jump_token="+encodeURIComponent(t),o+="&dest_url="+encodeURIComponent(n),o+="&openid="+encodeURIComponent(r),Ij({loading:!0,title:"政务民生缴费"},(function(t){setTimeout((function(){t.close(),Object(R.invokeMethod)("private_openUrl",Object.assign({},e,{url:Ej+o,isNativeStyle:!0}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","openPublicServicePayment")}})}),1e3)}))}else Object(R.beforeInvokeFail)("openPublicServicePayment",e,"missing arguments")},cloud:__cloudSDK__.getCloudAPI(),serviceMarket:__cloudSDK__.serviceMarket,version:"undefined"==typeof __libVersionInfo__?{version:"9.9.9"}:JSON.parse(JSON.stringify(__libVersionInfo__)),chooseShareGroup:kg,enterContact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};At.default.onReady((function(){if(2!==At.default.appType&&7!==At.default.appType){var t={errMsg:"enterContact:fail no permission"};return e.fail&&e.fail(t),void(e.complete&&e.complete(t))}e.privateEnterContact=!0,Object(uu.invokeWebviewMethod)("appServiceEnterContact",e,[L.default.currentWebviewId],(function(t){t.errMsg&&(t.errMsg=t.errMsg.replace("privateEnterContact","enterContact")),0===t.errMsg.indexOf("enterContact:ok")?e.success&&e.success(t):e.fail&&e.fail(t),e.complete&&e.complete(t)}))}))},getGroupEnterInfo:Ut.getGroupEnterInfo,preloadWebview:ob},OR=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Cj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cj(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(rj);try{for(OR.s();!(Tj=OR.n()).done;){var SR=Tj.value;if("function"==typeof wR[SR]){var IR=wR[SR];wR[SR]=Object(Z.surroundByPromiseFactory)(IR)}}}catch(e){OR.e(e)}finally{OR.f()}function ER(e){mR.__defineGetter__(e,(function(){YD.WHITELIST.indexOf(e)>=0&&Object(YD.reportApiUse)({name:e});var t=wR[e],n=this;if("function"==typeof t)return Object(N.surroundByTryCatchFactory)((function(r){if(Object(M.checkWxInterfacePermission)(e,""))return kR(e,Object(M.wrappedByCheckPermissionInTap)(e,t)).apply(n,arguments);if("Sync"===e.slice(-4))throw new N.AppServiceSdkKnownError(e+":fail rejected due to no permission currently");r&&(r.fail||r.complete)&&setTimeout((function(){Object(R.beforeInvokeFail)(e,r,"rejected due to no permission currently")}),0)})," at wx."+e);if(!Object(M.checkWxInterfacePermission)(e,""))throw new N.AppServiceSdkKnownError(e+":fail rejected due to no permission currently");return t}))}At.default.onReady((function(){7===At.default.appType&&(mR.openWCPayLQTDetail=QD,mR.openWCPayLQTSave=ej,mR.openWCPayLQTDepositPlan=tj,mR.openWCPayLQTDepositPlanAdd=nj,Object.defineProperty(mR,"reportIDKey",{get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(R.invokeMethod)("reportIDKey",e)}},configurable:!0}))})),["login","getUserInfo","getUserProfile","getShareInfo","getWeRunData"].forEach((function(e){var t=wR[e];wR[e]=Object(Z.surroundByPromiseFactory)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Lo.timeout)(t,e)}))})),Object(ml.apiReport)(wR),Object(R.subscribe)("INVOKE_METHOD",(function(e){var t=e.name,n=e.args;wR[t](n,!0)})),Object(R.subscribe)("WEBVIEW_ERROR_MSG",(function(e){var t=e.msg;Reporter.triggerErrorMessage(t)}));var CR=Nv(),TR=new WeakMap;function kR(e,t){var n=Object(Wk.apiCategoryValue)(e,"log");if(!n)return t;var r=0,o="request"===e;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];Mg("API","wx."+e);var c=o?" with seq "+r:"";r++;var u=a[0];if(1===n&&u&&"object"===Object(x.default)(u)){if(["success","fail"].forEach((function(t){var n=u[t];"function"==typeof n&&(u[t]=function(r){Mg("API","wx."+e+" "+t+" callback"),"function"==typeof n&&n.apply(void 0,arguments),CR&&CR.logApiInvoke&&CR.log("wx."+e+" "+t+" callback"+(r&&r.errMsg?" with msg "+r.errMsg:" ")+c),Ng()})})),"function"==typeof u.complete){var l=u.complete;u.complete=function(){Mg("API","wx."+e+" complete callback");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l.apply(null,n),Ng()}}}else 3===n&&"function"==typeof u&&(/^off/.test(e)&&TR.has(u)?a[0]=TR.get(u):a[0]=function(){Mg("API","wx."+e+" callback");for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];u.apply(null,n),Ng()},/^on/.test(e)&&TR.set(u,a[0]));CR&&CR.logApiInvoke&&CR.log("wx."+e+" api invoke"+c);var d=t.apply(wR,a);return 2===n&&CR&&CR.logApiInvoke&&CR.log("wx."+e+" return"),Ng(),d}}for(var AR in wR)ER(AR);!function(e){var t={};oj.forEach((function(n){var r=n.name,o=n.permissionByte,i=e[r];t[r]=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Object(gl.checkPermissionSync)(o)?i.call.apply(i,[e].concat(n)):Object(R.beforeInvokeFail)(r,n[0],"no permission")}.bind(e),n.deprecate?e[r]=function(e,t,n){return function(){ij(e);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t.apply(n,o)}}(r,t[r],e):delete e[r]})),function(e){var t=__wxLibrary,n=t.onEnd||function(){};t.onEnd=function(){n&&n(),defineMiniProgramFile("__wx__/private-api",(function(t,n){n.exports=e}))}}(t)}(mR),function(e){XD||(XD=!0,e.__defineGetter__("getBaseMethods",(function(){if($D)return ZD})))}(mR);var PR,DR,jR={wx:mR,createPluginWX:Dk,buildPluginPrivateApi:function(e){var t={};return TT.forEach((function(n){var r=n.factory(e);t[n.name]=function(t){kT(e,n.permissionBytes,(function(e){e?r(t):Object(M.beforeInvokeFail)(n.name,t,"no permission")}))}})),t},createPluginConsole:jk,onAppRouteResized:Qi.onAppRouteResized,showShareMenu:Zx,setWxInterfaceDisabled:M.setWxInterfaceDisabled,setWxInterfaceIsInvokeInTap:M.setWxInterfaceIsInvokeInTap,unsetWxInterfaceIsInvokeInTap:M.unsetWxInterfaceIsInvokeInTap,_setWxIsInvokeInTapForNavToMiniProgram:Zi._setWxIsInvokeInTapForNavToMiniProgram,_createSelectorQuery:nl,_createIntersectionObserver:il,_createMediaQueryObserver:cl,_getOpenerEventChannel:pl._getOpenerEventChannel,pluginInfos:xk,_virtualDOMTunnel:(PR=R.publish,DR=R.subscribe,{vdSync:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.splice(0,0,"vdSync"),PR.apply(void 0,t)},vdSyncBatch:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.splice(0,0,"vdSyncBatch"),PR.apply(void 0,t)},onVdSync:function(e){DR("vdSync",e)},onVdSyncBatch:function(e){DR("vdSyncBatch",e)}}),traceBeginEvent:Mg,traceEndEvent:Ng,saveExitState:Qi.saveExitState,loadExitState:Qi.loadExitState,createRouter:lu.route.createRouter,setEnableDebug:cv,_apiData:Vd};Uk(jR,P,wR),Uk(jR,D,wR),Uk(jR,j,wR);t.default=jR},function(e,t,n){n.r(t),n.d(t,"drawLabel",(function(){return Bt})),n.d(t,"addLabelToShareArgs",(function(){return Ft}));var r,o=n(13),i=n.n(o),a=n(38),s=n(1),c=n(84),u=n(2),l=n(26),d=l.default.Image,f=Object.defineProperty,p=Object.getOwnPropertyDescriptor,h=Object.prototype.hasOwnProperty,v=["src","width","height","naturalWidth","naturalHeight","complete","tagName","nodeName","onerror","onload"],g=new WeakMap;function _(e){return"function"!=typeof e?null:(g.set(e,(function(t){var n=t.type,r=t.target,o=t.timeStamp;return e&&e({type:n,target:r,currentTarget:r,timestamp:1e6*o})})),g.get(e))}var b=function(){var e=new d;return function(e){if(!u.IS_DEVTOOLS&&!h.call(e,"src")){var t=e.__proto__;r||(r={addEventListener:function(e,n){t.addEventListener.call(this,e,_(n))},removeEventListener:function(e,n){t.removeEventListener.call(this,e,g.get(n)||n)}}),e.__proto__=r,v.forEach((function(n){for(var r=t;r&&(!h.call(r,n)||"break"!==function(){var t=p(r,n);if(/^on/.test(n)){var o=null;f(e,n,{get:function(){return o},set:function(n){o=n,t.set.call(e,_(n))}})}else f(e,n,t);return"break"}());r=r.__proto__);}))}}(e),e},y=n(15),m=n(0),w=n(58),O=n(20),S=function(e){return"object"===Object(O.default)(e)&&null!==e},I=function(){var e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},E=function(){var e=arguments[arguments.length-1],t=wt(e),n=wt(this.canvas).flag,r=n.textures,o=n.currentTextureIndex,i=n.dirtyTextureMap,a=r[o];S(a)&&(t&&t.isSharedCanvas?i.set(a,!0):i.has(a)&&i.delete(a))},C=function(){var e=wt(this.canvas).flag,t=e.textures,n=e.currentFramebuffer,r=e.dirtyFramebufferMap,o=e.framebufferTextureMap,i=e.dirtyTextureMap,a=e.framebufferRenderbufferMap,s=e.dirtyRenderbufferMap;if(t.some((function(e){return i.has(e)}))){r.set(n,!0);var c=o.get(n);S(c)&&i.set(c,!0);var u=a.get(n);S(u)&&s.set(u,!0)}},T={activeTexture:function(e){var t=e-this.TEXTURE0;wt(this.canvas).flag.currentTextureIndex=t},bindTexture:function(e,t){var n=wt(this.canvas).flag;n.textures[n.currentTextureIndex]=t},wxBindCanvasTexture:function(e,t){var n=wt(this.canvas).flag,r=n.textures,o=n.currentTextureIndex,i=n.dirtyTextureMap;if(S(t)){var a=wt(t),s={type:"WeixinCanvasTexture"};r[o]=s,a&&a.isSharedCanvas?i.set(s,!0):i.has(s)&&i.delete(s)}else r[o]=null},texImage2D:E,texSubImage2D:E,bindFramebuffer:function(e,t){var n=wt(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D:function(e,t,n,r){var o=wt(this.canvas).flag,i=o.framebufferTextureMap,a=o.currentFramebuffer;i.set(a,r)},framebufferRenderbuffer:function(e,t,n,r){var o=wt(this.canvas).flag,i=o.dirtyRenderbufferMap,a=o.dirtyFramebufferMap,s=o.framebufferRenderbufferMap,c=o.currentFramebuffer;i.has(r)&&a.set(c,!0),s.set(c,r)},copyTexImage2D:function(){var e=wt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer,r=e.textures,o=e.currentTextureIndex,i=e.dirtyTextureMap;if(t.has(n)){var a=r[o];S(a)&&i.set(a,!0)}},drawArrays:C,drawElements:C},k=n(37),A=n(66),P=n(11),D=function(e){return!wt(e).secure},j=function(e,t){var n=wt(t);if(!n)return!0;var r=n.secure;return!(!wt(e).secure&&r)},x=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){var t=wt(this.canvas),n=t.flag,r=n.textures,o=n.currentTextureIndex,i=r[o];if(i&&"WeixinCanvasTexture"===i.type)return void console.warn("在调用 wxBindCanvasTexture() 向 "+o+" 号纹理单元提交纹理后，不能再调用 "+e+"() 向该纹理单元提交纹理")}var a=this.canvas,s=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(j(a,s))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 "+e+" 不能传入安全 Canvas")}},R=!1,M="unknown";s.default.onReady((function(){R=Object(k.checkPermissionSync)("screenCanvasReadPixels"),M=Object(P.checkAPIAvailable)("screenCanvasReadPixelsFreely")}));var N,L={toDataURL:function(){return!!D(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!D(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:x("createPattern"),drawImage:x("drawImage"),texImage2D:x("texImage2D"),texSubImage2D:x("texSubImage2D"),wxBindCanvasTexture:x("wxBindCanvasTexture"),readPixels:function(){if(!wt(this.canvas).secure)return!0;if(Object(A.reportDeprecatedAPI)("WebGLRenderingContext.readPixels"),R){var e=wt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer;if(!t.has(n)||(Object(A.reportDeprecatedAPI)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==M))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}else Object(A.reportDeprecatedAPI)("screenCanvasReadPixelsNoPermission")}},B=l.default.Canvas,F=l.default.Image,W={"2d":null,webgl:null},U={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},V=new WeakMap;function G(){var e=new B;return e.width=1,e.height=1,e}function H(e){var t={};return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof r.value)r.get||r.set?Object.defineProperty(t,n,{get:function(){if(r.get)return r.get.call(this)},set:function(e){r.set&&r.set.call(this,e)}}):Object.defineProperty(t,n,r);else{var o=e[n];t[n]=function(){if("function"==typeof L[n]){var e=L[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof T[n]&&T[n].apply(this,arguments),o.apply(this,arguments)}}})),t}var z,q=function(){if(N)return N;var e=G(),t=H(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){if(wt(this).isSharedCanvas)return{};var r=n.call(this,e,t);return null===r||(/2d|webgl/.test(e)&&Object.setPrototypeOf(r,function(e){if(W[e])return W[e];var t=G().getContext(e),n=H(Object.getPrototypeOf(t));return W[e]=n,W[e]}(e)),V.set(r,this),Object.defineProperty(r,"canvas",{value:this,configurable:!1,writeable:!1})),r},N=t,t},Y=n(108),K=wxGA,J=n(16),X=0,$=1,Z=2,Q=3,ee={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267};z={},Object(J.default)(z,X,"thirdScriptError"),Object(J.default)(z,$,"widgetThirdScriptError"),Object(J.default)(z,Z,"gameThirdScriptError"),Object(J.default)(z,Q,"gameSubContextThirdScriptError");var te=n(51),ne=n(184),re=n(185),oe=n(186),ie=n(32),ae=Object(ie.default)("getPotentialFriendList","webapi_game_potential_friends",{},{},(function(){}),(function(e){return e.list=e.friend_list,delete e.friend_list,delete e.rawData,e})),se=Object(ie.default)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(function(e){return{opengid_list:[e.openGId]}}),(function(e){return e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e}));var ce=n(137),ue={};function le(){return Object.keys(ue).map((function(e){return e+"="+ue[e]})).join("&")}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={openId:e.openId,title:e.title||s.default.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=le(),Object(ce._doShareAppMessage)(t,"shareAppMessageToSpecificContactDirectly")}var fe=n(36),pe=Object(fe.constructOperateWXData)(!1,"getUserInfo",!1,!0),he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openIdList,n=void 0===t?[]:t,r=e.lang,o=void 0===r?"en":r,i=e.success,a=e.fail,s=e.complete;pe({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:n,lang:o},success:function(e){var t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof i&&i({errMsg:e.errMsg,data:t})},fail:a,complete:s})},ve=Object(ie.default)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(function(){}),(function(e){return e.keys=e.data_key,delete e.data_key,delete e.rawData,e})),ge=n(61),_e=n(41),be=n(4),ye=n(5),me=n(9),we=n(14),Oe=n(19),Se=n(8),Ie=n(136),Ee=n.n(Ie),Ce=n(34),Te=n(12),ke=n(29),Ae=n(23);function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(Se.default)(e);if(t){var o=Object(Se.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(Oe.default)(this,n)}}var De="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png",je="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png",xe=0,Re=0;s.default.onReady((function(){var e=Object(ke.getInitScreenSize)();xe=e.screenWidth,Re=e.screenHeight,Object(Ae.onWindowResize)((function(e){xe=e.windowWidth,Re=e.windowHeight}))}));var Me=function(e){var t=e.cancelText,n=e.confirmText,r=e.icon,o=xe>Re;return{mask:{width:xe,height:Re,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:o?(xe-Re)/2:0,width:o?Re:xe},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:o?(xe-Re)/2:0,width:o?Re:xe},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:o?Re:xe},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:o?Re:xe},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:r?0:64,marginBottom:r?0:15,width:o?.9*Re:.9*xe},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:o?Re:xe},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:n?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:t?120:184}}},Ne=function(e){Object(we.default)(n,e);var t=Pe(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.title,i=r.content,a=r.icon,s=r.confirmText,c=r.cancelText,u=r.confirm,l=r.cancel,d=r.style,f=void 0===d?{}:d;Object(be.default)(this,n),e=t.call(this);var p=Object(Te.getPrivateThis)(Object(me.default)(e)),h='<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="'+De+'" />\n          <text id="title" value="'+o+'" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          '+(a?'<image id="icon" src="'+(!0===a?je:a)+'" />':"")+'\n          <text id="content" value="'+i+'" />\n        </view>\n        <view id="footer">\n          '+(c?'<text id="cancel" value="'+c+'" />':"")+"\n          "+(s?'<text id="confirm" value="'+s+'" />':"")+"\n        </view>\n      </view>\n    </view>",v=Ee()(h),g=v.root,_=Me(arguments[0]);return Object.keys(f).forEach((function(e){_[e]&&Object.assign(_[e],f[e])})),Te.init.call(Object(me.default)(e),g,_),Ce.webviewLayout.add(p.container),p.close&&p.close.on("click",(function(){"function"==typeof l&&l()})),p.cancel&&p.cancel.on("click",(function(){"function"==typeof l&&l()})),p.confirm&&p.confirm.on("click",(function(){"function"==typeof u&&u()})),e}return Object(ye.default)(n,[{key:"destroy",value:function(){var e=Object(Te.getPrivateThis)(this);Ce.webviewLayout.remove(e.container),Object(Te.removePrivateThis)(this)}}]),n}(Te.Component);function Le(e){return new Ne(e)}var Be=n(10);n(42);var Fe=0,We=2,Ue=3;var Ve=n(98);function Ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return He(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ze=new ge.Emitter("InteractiveStorageModified",!0),qe={add:1},Ye=Object(P.promisify)(he);var Ke=function(e){var t=e.actionId,n=e.actId,r=void 0===n?0:n,o=e.receiverOpenId,i=e.detail,a=e.opNum,s=void 0===a?0:a,c=e.operationType,u=[t,r,0,i,s,void 0===c?0:c,o].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:u})},Je=function(e){Reporter.reportIDKey({key:e})},Xe=Object(ie.default)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(function(e){var t=e.key,n=e.operation,r=e.opNum,o=e.toUser;return{key:t,operation:n,debug:e.debug,opNum:r,toUser:o,action:e.action,object:e.object,ratio:e.ratio,quiet:!!e.quiet,op_num:r,to_user:o,random_number:Date.now(),randomNumber:Date.now()}}),(function(e){var t,n,r=e.json_resp,o=e.inner_errcode,i=e.inner_errmsg,a="modifyFriendInteractiveStorage:fail ";e.errMsg,delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{t=JSON.parse(r)}catch(e){t={},e.message}if((n=t.log)&&n.split("\n").map(decodeURIComponent).forEach((function(e){var t=parseInt(e.substr(0,1),10),n="[JSServer]"+e.substr(1);switch(t){case Fe:console.log(n);break;case We:console.warn(n);break;case Ue:console.error(n)}})),!Object(Be.isUndefined)(o)&&0!==o)return e.errMsg=""+a+i,void(e.errCode=o);try{var s=JSON.parse(t.base_resp);if(0!==s.errcode)return e.errCode=s.errmsg,void(e.errMsg=""+a+s.errmsg);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=""+a+t.message,t.message}})),$e=n(191),Ze=Object(ie.default)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),Qe=Object(ie.default)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),et=Object(ie.default)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),tt=n(6),nt=function(e){var t=e.url,n=e.success,r=e.fail,o=e.complete;Object(m.invokeMethod)("private_openUrl",{url:t,isNativeStyle:!0,success:n,fail:r,complete:o})},rt=n(105),ot=n(115),it=Object(ie.default)("gameTransfer","webapi_game_transfer",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),at=n(170),st={Component:Te.Component,getPrivateThis:Te.getPrivateThis,removePrivateThis:Te.removePrivateThis,create:Te.create,init:Te.init,webviewLayout:Ce.webviewLayout,nativeviewLayout:Ce.nativeviewLayout,xmlParser:Ee.a},ct={Kanata:Kanata,wxGA:K,reportIDKey:function(e){var t=e.id,n=e.key,r=e.value;return Reporter.reportIDKey({id:t,key:n,value:r})},reportKeyValue:function(e){var t=e.key,n=e.value,r=e.immediately;return"number"!=typeof t||Object.values(ee).includes(t)?Reporter.reportKeyValue({key:t,value:n,immediately:r}):Reporter.reportKeyValue({key:t,value:n,immediately:r,number:!0})},getXLogManager:function(){return te.nativeConsole},getUserCloudStorage:ne.getUserCloudStorage,getFriendCloudStorage:re.getFriendCloudStorage,getGroupCloudStorage:oe.getGroupCloudStorage,getPotentialFriendList:ae,getGroupInfo:function(e){setTimeout((function(){se(Object.assign({},e,{success:function(t){return Object(m.beforeInvokeCallback)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}}))}))},shareMessageToFriend:de,getUserInfo:he,getUserCloudStorageKeys:ve,modifyFriendInteractiveStorage:function(e){Je("modifyFriendInteractiveStorage");var t=Object.assign({},e,{success:function(t){Object(m.beforeInvokeCallback)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||ze.emit("modified",""+e.key)}});t.quiet?function(e){var t=Object(Ve._getLaunchOptionsSync)(),n=Object(ce.getMessageExtraData)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?Xe(Object.assign(e,{toUser:n.userInfo.openID})):Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")}(t):t.toUser?s.default.modifyFriendInteractiveStorageTemplates?function(e){Ye({openIdList:[e.toUser]}).then((function(t){var n,r,o,i,a=t.data[0].nickName,c=parseInt(e.key,10),u=e.toUser,l=e.opNum,d=qe[e.operation],f=Ge(s.default.modifyFriendInteractiveStorageTemplates);try{for(f.s();!(i=f.n()).done;)if((o=i.value).key===e.key){var p=o.ratio?" x"+l*o.ratio+" ？":"？";n="确认"+o.action+" "+a+" "+o.object+p,r=encodeURIComponent(n);break}}catch(e){f.e(e)}finally{f.f()}if(!n)throw new Error("invalid key");var h={actId:c,receiverOpenId:u,detail:r,opNum:l,operationType:d};Ke(Object.assign({actionId:1},h)),Je("modifyFriendInteractiveStorageShowModal");var v=Le({content:n,title:""+o.action+o.object,confirmText:"确认"+o.action,confirm:function(){v.destroy(),Xe(Object.assign({action:o.action,object:o.object,ratio:o.ratio},e,{success:function(t){if(e.success&&e.success(t),!t.errCode)var n="string"==typeof e.title,r=Le({title:""+o.action+o.object,icon:!0,content:n?"已"+o.action+"，马上告诉微信好友？":"已"+o.action,cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel:function(){r.destroy()},confirm:function(){r.destroy(),de({openId:u,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),Ke(Object.assign({actionId:2},h)),Je("modifyFriendInteractiveStorageConfirm")},cancel:function(){v.destroy(),Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),Ke(Object.assign({actionId:3},h)),Je("modifyFriendInteractiveStorageCancel")}})})).catch((function(t){var n=t.errMsg,r=t.message;Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n||r)}))}(t):s.default.modifyFriendInteractiveStorageConfirmWording?function(e){Ye({openIdList:[e.toUser]}).then((function(t){var n=t.data[0].nickName,r=s.default.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),o={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(r),opNum:e.opNum,operationType:qe[e.operation]};Ke(Object.assign({actionId:1},o)),Je("modifyFriendInteractiveStorageShowModal"),Object(_e._showModal)({content:r,confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(Xe(e),Ke(Object.assign({actionId:2},o)),Je("modifyFriendInteractiveStorageConfirm")):(Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),Ke(Object.assign({actionId:3},o)),Je("modifyFriendInteractiveStorageCancel"))}})})).catch((function(t){var n=t.errMsg;Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n)}))}(t):Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):Object(m.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},WebAssembly:$e._WebAssembly,getGameLifeProfile:Ze,getGreetingControlInfo:Qe,interactGameLifeTag:et,openGameLifeAccountInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete,o=e.query,i="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html";nt({url:Object(tt.addQueryStringToUrl)(i,o),success:t,fail:n,complete:r})},openGameLifeMiniGameTransfer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,r=e.complete,o=e.query,i="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html";nt({url:Object(tt.addQueryStringToUrl)(i,o),success:t,fail:n,complete:r})},Function:Function.prototype.constructor,createCanvas:function(){return jt.apply(void 0,arguments)},createScreenCanvas:function(){return xt.apply(void 0,arguments)},createWebView:function(e){return new Ce.WebView(e)},navigateToMiniProgramDirectly:function(e){return Object(rt._doNavigateToMiniProgram)(e,e)},privateOpenUrl:ot.privateOpenUrl,gameTransfer:it,coverview:st,launchApplicationDirectly:at.launchApplicationDirectly,encode:function(e){if(u.IS_DEVTOOLS){var t=null;return Object(m.invokeMethod)("encodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.buffer},fail:function(){}})),t}return l.default.encodeArrayBuffer(e.data,e.format)},decode:function(e){if(u.IS_DEVTOOLS){var t="";return Object(m.invokeMethod)("decodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.result},fail:function(){}})),t}return l.default.decodeArrayBuffer(e.data,e.format)}},ut={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},lt=Object.keys(ut).map((function(e){return ut[e]})),dt={},ft=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],pt={},ht=function(e){return function(e){if(pt[e])return pt[e];dt[e]={},Object(m.invokeMethod)("getPluginPermissionBytes",{pluginList:[{indexes:lt,pluginId:e}],success:function(t){var n=t.pluginPermissionMap;if(n&&n[e])for(var r=0;r<n[e].length;r++){var o=lt[r];dt[e][o]=1===n[e][r]}}});var t={platform:s.default.platform};for(var n in ct){var r=ut[n],o=dt[e][r];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||o)&&("createCanvas"===n&&(vt=!0),-1===ft.indexOf(n)?t[n]=ct[n]:Object(k.checkPermissionSync)("engineOpenData")&&(vt=!0,t[n]=ct[n]))}return pt[e]=t,pt[e]}(e)},vt=!1,gt=function(){return vt},_t=l.default.Canvas,bt=new WeakMap,yt=0,mt=function(e){return bt.get(e).canvasId},wt=function(e){if(null!=e)return bt.get(e)};function Ot(e){Object(Y.checkNeedInsertImageViewPatch)()&&Object(m.invokeMethod)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete:function(e){e.errMsg}})}function St(e){Object(Y.checkNeedInsertImageViewPatch)()&&Object(m.invokeMethod)("removeImageView",{viewId:e,complete:function(e){e.errMsg}})}var It,Et,Ct=!1,Tt=Object.defineProperty,kt=Object.getOwnPropertyDescriptor,At=Object.prototype.hasOwnProperty,Pt=["getContext","toDataURL"],Dt=["width","height","tagName","nodeName"],jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secure,n=void 0!==t&&t,r=e.isSharedCanvas,o=void 0!==r&&r,i=new _t,a=u.IS_DEVTOOLS?s.default.appConfig.subContext:s.default.subContext,c="string"==typeof a;if(u.IS_DEVTOOLS){var l=i.__proto__.__proto__;i.__proto__=new Proxy(i.__proto__,{setPrototypeOf:function(e,t){return l=t,!0},getPrototypeOf:function(){return l}})}u.IS_DEVTOOLS||At.call(i,"width")||(Dt.forEach((function(e){for(var t=i;t;t=t.__proto__)if(At.call(t,e)){Tt(i,e,kt(t,e)),Tt(i,e,{configurable:!1});break}})),Tt(i,"style",{value:{},writable:!0}),It||(It={},Pt.forEach((function(e){for(var t=i;t;t=t.__proto__)if(At.call(t,e)){Tt(It,e,kt(t,e));break}}))),i.__proto__=It),c&&(Object.setPrototypeOf(i,q()),"Object"===Object(Be.getDataType)(i)&&Object.defineProperty(q(),Symbol.toStringTag,{get:function(){return"HTMLCanvasElement"}})),i.__id=i.__id||yt++;var d=!1;Ct||(Ct=!0,d=!0),bt.set(i,{canvasId:i.__id,secure:n,isSharedCanvas:o,isScreenCanvas:d,flag:I()}),delete i.__id;var f=u.IS_DEVTOOLS?i:mt(i),p=function(e){if(n){var t=w.FakeTempFilePathMap.set(e.tempFilePath);e.tempFilePath=t}St(f)};return i.toTempFilePathSync=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=bt.get(this),o=!!r&&r.isScreenCanvas;if(Ot(f),Object(m.invokeMethod)("canvasToTempFilePathSync",Object.assign({},n,{canvasId:f},{isScreenCanvas:o,success:function(t){e=t.tempFilePath},fail:function(e){t=e.errMsg}}),{beforeSuccess:p}),St(f),t)throw new Error(t);return e},i.toTempFilePath=Object(y.surroundByPromiseFactory)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=bt.get(i),n=!!t&&t.isScreenCanvas;Object(m.invokeMethod)("canvasToTempFilePath",Object.assign({},e,{canvasId:f,isScreenCanvas:n}),{beforeSuccess:p})})),i};s.default.onReady((function(){if(Object(P.isGame)()){(t=s.default.plugins||s.default.gamePlugins)&&Object.keys(t).forEach((function(e){var n=t[e].provider;ht(n)}));var e="string"==typeof(u.IS_DEVTOOLS?s.default.appConfig.subContext:s.default.subContext)||gt();(function(e){if(Object(Y.checkNeedPreserveDrawingBufferPatch)()){var t=e.getContext;e.getContext=function(n,r){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];if("webgl"===n||"2d"===n){var s=Object.assign({},r);return s.preserveDrawingBuffer=!0,t.call.apply(t,[e,n,s].concat(i))}return t.call.apply(t,[e,n,r].concat(i))}}})(jt({secure:e})),Object.keys(U).forEach((function(e){if(!U[e]){var t=G(),n=t.getContext("2d");if("Canvas"===e)U[e]=Object.getPrototypeOf(t);else if("Image"===e)U[e]=Object.getPrototypeOf(new F);else if("CanvasRenderingContext2D"===e)U[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){var r=n.createPattern(t,"repeat");U[e]=Object.getPrototypeOf(r)}else if("CanvasGradient"===e){var o=n.createLinearGradient(0,0,100,100);U[e]=Object.getPrototypeOf(o)}else if("ImageData"===e){var i=n.getImageData(0,0,10,10);U[e]=Object.getPrototypeOf(i)}else if("TextMetrics"===e){var a=n.measureText("123");U[e]=Object.getPrototypeOf(a)}}})),(Et=jt({secure:e,isSharedCanvas:!0})).width=s.default.screenWidth,Et.height=s.default.screenHeight}var t}));var xt=function(){return new l.default.ScreenCanvas},Rt=1,Mt=!1;function Nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.font=t+"px -apple-system",n?e.measureText(n).width:0}s.default.onReady((function(){Rt=s.default.pixelRatio,Object(fe._operateWXData)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:c.SDKVersion},success:function(e){var t=JSON.parse(e.rawData);Mt=t.is_enabled}})}));var Lt=function(e){return new Promise((function(t){if(e)if("transparent"===e)t({width:0,height:0});else{var n=b();n.onload=function(){return t(n)},n.onerror=function(){return t()},n.src=e}else t()}))},Bt=function(){var e=Object(a.default)(i.a.mark((function e(t){var n,r,o,a,s,c,u,l,d,f,p,h,v,g,_,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.background,r=t.label,o=t.icon,a=t.tag,s=t.more,c=void 0!==s&&s,u=t.base64,l=void 0!==u&&u,n){e.next=3;break}return e.abrupt("return",n);case 3:return d=jt({secure:gt()}),f=d.getContext("2d"),d.width=210*Rt,d.height=168*Rt,"transparent"===n&&(d.height=40*Rt),f.fillStyle="rgba(255, 255, 255, 0)",f.fillRect(0,0,d.width,d.height),e.next=12,Lt(n);case 12:if(p=e.sent){e.next=15;break}return e.abrupt("return",n);case 15:if(p.width/p.height>=1.25?f.drawImage(p,0,0,1.25*p.height,p.height,0,0,d.width,d.height):p.width/p.height<1.25&&f.drawImage(p,0,0,p.width,.8*p.width,0,0,d.width,d.height),h=Nt(f,12*Rt,r),!a){e.next=45;break}v=Nt(f,10*Rt,a),f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+v+12*Rt,8*Rt),f.arc(h+v+12*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),f.fillStyle="#F36D00",f.beginPath(),f.moveTo(4*Rt,14*Rt),f.arc(6*Rt,14*Rt,2*Rt,Math.PI,1.5*Math.PI),f.lineTo(v+10*Rt,12*Rt),f.arc(v+10*Rt,14*Rt,2*Rt,1.5*Math.PI,2*Math.PI),f.lineTo(v+12*Rt,26*Rt),f.arc(v+10*Rt,26*Rt,2*Rt,2*Math.PI,2.5*Math.PI),f.lineTo(6*Rt,28*Rt),f.arc(6*Rt,26*Rt,2*Rt,.5*Math.PI,Math.PI),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",f.fillText(a,8*Rt,23.5*Rt),Nt(f,12*Rt),f.fillText(r,v+16*Rt,24*Rt),e.next=79;break;case 45:if(!o){e.next=68;break}return e.next=48,Lt(c&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg==");case 48:return g=e.sent,_=g?10*Rt:0,f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+_+22*Rt,8*Rt),f.arc(h+_+22*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),e.next=60,Lt(o);case 60:(b=e.sent)&&b.width&&b.height&&f.drawImage(b,6*Rt,12*Rt,16*Rt,16*Rt),g&&g.width&&g.height&&f.drawImage(g,h+30*Rt,14*Rt,6*Rt,12*Rt),f.fillStyle="#FFFFFF",Nt(f,12*Rt),f.fillText(r,26*Rt,24*Rt),e.next=79;break;case 68:f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*Rt),f.lineTo(h+2*Rt,8*Rt),f.arc(h+2*Rt,20*Rt,12*Rt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*Rt),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",Nt(f,12*Rt),f.fillText(r,6*Rt,24*Rt);case 79:return e.abrupt("return",l?d.toDataURL():d.toTempFilePathSync());case 80:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ft=function(e){return new Promise((function(t){Mt&&e.imageUrl?Object(fe._operateWXData)({apiName:"webapi_game_getsharemark",reqData:{lib_version:c.SDKVersion},success:function(n){var r=n.rawData,o=JSON.parse(r);(o=(o.mark_list||[])[0])||t(e),o&&Bt({background:e.imageUrl,label:o.wording,icon:o.head_img_url,tag:o.mark_word}).then((function(n){e.imageUrl=n,e.extra={shareCardMarker:{label:o.mark_type}},t(e)})).catch((function(){return t(e)}))},fail:function(){return t(e)}}):t(e)}))}}]).default,wx=__appServiceSDK__.wx;if("undefined"!=typeof __exportGlobal__)if(__exportGlobal__.wx=wx,"devtools"===__wxConfig.platform)Object.defineProperty(__exportGlobal__,"regeneratorRuntime",{configurable:!0,enumerable:!0,get:function(){},set:function(e){return delete __exportGlobal__.regeneratorRuntime,__exportGlobal__.regeneratorRuntime=e}});else{var r={};Object.keys(regeneratorRuntime).forEach((function(e){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){return regeneratorRuntime[e]},set:function(t){return delete r[e],r[e]=t}})})),__exportGlobal__.regeneratorRuntime=r}var exparser=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var r=n(1),o=n(3),i=n(5),a=n(6),s=n(7),c=n(8),u=n(9),l=n(15),d=n(12),f=n(17),p=n(18),h=n(19),v=n(16),g=n(10),_=n(20),b=n(14),y=n(4),m=n(13),w=n(21);t.FreeTmpl=w,t.precompileTemplate=w.precompiler?w.precompiler.compile:null,t.precompiler=w.precompiler?w.precompiler:null,t.HtmlLLParser=w.htmlParser?w.htmlParser:null,t.LLParser=r,t.dataPath=s,t.dataUtils=i,t.Event=a,t.Element=u,t.TextNode=d,t.NativeNode=f,t.VirtualNode=p,t.ShadowRoot=h,t.Behavior=c,t.Component=l,t.Observer=g,t.DataGroup=v,t.ElementIterator=_,t.FakeDomElement=b,t.registerBehavior=c.create,t.registerElement=l.register,t.createElement=l.create,t.createTextNode=d.create,t.createVirtualNode=p.create,t.appendChild=u.appendChild,t.insertBefore=u.insertBefore,t.removeChild=u.removeChild,t.replaceChild=u.replaceChild,t.addListenerToElement=a.addListenerToElement,t.removeListenerFromElement=a.removeListenerFromElement,t.triggerEvent=a.triggerEvent,t.safeCallback=o.safeCallback,t.addGlobalErrorListener=o.addGlobalErrorListener,t.removeGlobalErrorListener=o.removeGlobalErrorListener,t.globalOptions=y,t.globalState=m,l._setDefaultTemplateEngine(w),(t.updateDefaultComponent=function(){delete l._list[""],l.register({is:"",options:{writeOnly:!0,allowInWriteOnly:!0,lazyRegistration:!1,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1}})})();var O=function(e){var t="";if(e instanceof exparser.Element&&(e.id&&(t+=' id="'+e.id+'"'),e.slot&&(t+=' slot="'+e.slot+'"'),e.__slotName&&(t+=' name="'+e.__slotName+'"'),e.classList&&(t+=' class="'+e.class+'"'),e.$$&&e.$$.getAttribute("style")&&(t+=' style="'+e.$$.getAttribute("style")+'"')),e instanceof exparser.VirtualNode)return t;if(e instanceof exparser.Component)return l.listPublicProperties(e).forEach((function(n){t+=" "+n+"="+JSON.stringify(e[n])})),t;for(var n=e.attributes,r=0;r<n.length;r++)t+=" "+n[r].name+'="'+n[r].value+'"';return t},S=t.dumpElementToString=function(e,t,n){var r=null;y.hasDOMBackend&&(r=window);var o=0,i="";for(o=n=n||0;o;o--)i+="  ";var a="";if(e instanceof exparser.Element)a+=i+"<"+(e.$$?e.$$.tagName.toLowerCase()+":":"")+e.is+O(e)+">",a+=e instanceof exparser.VirtualNode?" [Exp-Virtual]":e instanceof exparser.NativeNode?" [Exp-Native]":" [Exp-Component]",a+="\n"+S(t?e.__wxSlotChildren:e.childNodes,t,n+1);else if(e instanceof exparser.TextNode)a+=i+e.textContent+" [Exp-Text]\n";else if(r&&r.HTMLElement&&e instanceof r.HTMLElement)a+=i+"<"+e.tagName.toLowerCase()+O(e)+"> [DOM-Element]",a+="\n"+S(t&&e.__wxSlotChildren||e.childNodes,t,n+1);else if(r&&r.Text&&e instanceof r.Text)a+=i+e.textContent+" [DOM-Text]\n";else if(void 0!==e.length)for(o=0;o<e.length;o++)a+=S(e[o],t,n);else a=i+"[unknown node]\n";return a};t.dumpElement=function(e,t){console.log(S(e,t))}},function(e,t,n){var r=null,o=function(){},i=o.stats={all:0,copyIn:0,parse:0,constructOut:0},a=function(e){return r.llparser_create_descriptor(e,1)},s=function(e,t){var n=r.llparser_create_descriptor(e,0),o=!1;"^"===t[0]&&(o=!0);for(var i=o?1:0;i<t.length;i++){var a=t.charCodeAt(i);if("-"===t[i+1]){var s=t.charCodeAt(i+2);a<=s?(r.llparser_descriptor_add_range(n,a,s),i+=2):r.llparser_descriptor_add_char(n,a)}else r.llparser_descriptor_add_char(n,a)}return o&&r.llparser_descriptor_revert(n),n};o.create=function(e,t,i){r||(r=n(2));var c=new o;i=i||16384;var u=c._llp=r.llparser_create(i,128,128),l={},d={},f="";for(f in l.ALL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_all(l.ALL),l.NULL=r.llparser_create_descriptor(u,0),r.llparser_descriptor_set_nil(l.NULL),e)l[f]=a(u);for(f in e)for(var p=e[f],h=l[f],v=0;v<p.length;v++){for(var g=p[v].id,_=p[v].states,b=[],y=0;y<_.length;y++){var m=_[y];l[m]||(l[m]=s(u,m)),b.push(l[m])}var w=0;"_raw"===g?w=1:"_jump"===g?w=65536:"_blank"===g&&(w=65537);var O=r.llparser_add_rule(u,w,h,b.length,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);0===w&&(d[O]=t[g])}return r.llparser_prepare(u),c._inputPtr=r.llparser_get_input_buffer(u),c._resultPtr=r.llparser_get_result(u),c._stateIdMap=l,c._ruleCbMap=d,c._charCountLimit=i,c};o.prototype.parse=function(e,t){var n=Date.now();(function(e,t,n,r){for(var o=r>e.length?e.length:r,i=0;i<o;i++)t[n+i]=e.charCodeAt(i);t[n+o]=0})(t,new Uint16Array(r.memory.buffer),this._inputPtr>>1,this._charCountLimit),i.copyIn=i.copyIn+Date.now()-n,n=Date.now();var o=r.llparser_parse(this._llp,this._stateIdMap[e]);if(i.parse=i.parse+Date.now()-n,n=Date.now(),o)throw new Error("Parsing failed at character position "+(o-1)+' near "'+t.slice(o-20,o)+'"');var a=function(e,t,n,r,o){for(var i=[],a={i:0,r:0,n:!1,cc:-1,c:[]},s=a,c=o.pos,u=!1,l=!1,d=!1;;){var f=t[c],p=t[c+1];if(p<0?(l=!0,p=-p-1):l=!1,f>=0){d=!0;var h=n.slice(f,p);s.c.push(h),u=l}else{if(-1===f&&0===p)break;d=!1;var v=-f,g=p,_={i:s.c.length-(u?1:0),r:v,n:l,cc:g,c:[]};if(u){var b=s.c.length-1,y=s.c[b];_.c.push(y),s.c[b]=_}else s.c.push(_);i.push(s),s=_,u=!1}if(!d||!u)for(;s.c.length===s.cc;){u=s.n;var m=i.pop();if(m.c[s.i]=r[s.r].call(e,s.c),s=m,u)break}c+=2}return a.c[0]}(this,new Int32Array(r.memory.buffer),t,this._ruleCbMap,{pos:this._resultPtr>>2});return i.constructOut=i.constructOut+Date.now()-n,a},o.prototype.destroy=function(){r.llparser_destroy(this._llp)},e.exports=o},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(t){return e[t]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function r(e,t,n){return _.llparser_create(e,t,n)}function o(e){_.llparser_destroy(e)}function i(e,t){return _.llparser_create_descriptor(e,t)}function a(e){_.llparser_descriptor_set_all(e)}function s(e){_.llparser_descriptor_set_nil(e)}function c(e,t){_.llparser_descriptor_add_char(e,t)}function u(e,t,n){_.llparser_descriptor_add_range(e,t,n)}function l(e){_.llparser_descriptor_revert(e)}function d(e,t,n,r,o,i,a,s,c,u,l,d){return _.llparser_add_rule(e,t,n,r,o,i,a,s,c,u,l,d)}function f(e){_.llparser_prepare(e)}function p(e,t){return _.llparser_parse(e,t)}function h(e){return _.llparser_get_input_buffer(e)}function v(e){return _.llparser_get_result(e)}function g(){_.wasm_main()}n.r(t),n.d(t,"llparser_create",(function(){return r})),n.d(t,"llparser_destroy",(function(){return o})),n.d(t,"llparser_create_descriptor",(function(){return i})),n.d(t,"llparser_descriptor_set_all",(function(){return a})),n.d(t,"llparser_descriptor_set_nil",(function(){return s})),n.d(t,"llparser_descriptor_add_char",(function(){return c})),n.d(t,"llparser_descriptor_add_range",(function(){return u})),n.d(t,"llparser_descriptor_revert",(function(){return l})),n.d(t,"llparser_add_rule",(function(){return d})),n.d(t,"llparser_prepare",(function(){return f})),n.d(t,"llparser_parse",(function(){return p})),n.d(t,"llparser_get_input_buffer",(function(){return h})),n.d(t,"llparser_get_result",(function(){return v})),n.d(t,"wasm_main",(function(){return g})),n.d(t,"memory",(function(){return b}));var _=n(1),b=_.memory;_.__wbindgen_start()},function(e,t,n){"use strict";n.r(t),n.d(t,"memory",(function(){return i})),n.d(t,"rust_calloc",(function(){return a})),n.d(t,"rust_free",(function(){return s})),n.d(t,"llparser_create",(function(){return c})),n.d(t,"llparser_destroy",(function(){return u})),n.d(t,"llparser_create_descriptor",(function(){return l})),n.d(t,"llparser_descriptor_set_all",(function(){return d})),n.d(t,"llparser_descriptor_set_nil",(function(){return f})),n.d(t,"llparser_descriptor_add_char",(function(){return p})),n.d(t,"llparser_descriptor_add_range",(function(){return h})),n.d(t,"llparser_descriptor_revert",(function(){return v})),n.d(t,"llparser_add_rule",(function(){return g})),n.d(t,"llparser_prepare",(function(){return _})),n.d(t,"llparser_parse",(function(){return b})),n.d(t,"llparser_get_input_buffer",(function(){return y})),n.d(t,"llparser_get_result",(function(){return m})),n.d(t,"wasm_main",(function(){return w})),n.d(t,"__wbindgen_start",(function(){return O}));var r=new ArrayBuffer(1114112),o=function(e,t,n){function r(e){var t=0,n=0,r=0,o=0,i=0,c=0,u=0;n=(t=e+-8|0)+(e=-8&(o=h[e+-4>>2]))|0;e:{t:{n:{r:{o:if(!(1&o)){if(!(3&o))break r;if(e=(o=h[t>>2])+e|0,(0|(t=t-o|0))==h[262246]){if(3!=(3&h[n+4>>2]))break o;return h[262244]=e,h[n+4>>2]=-2&h[n+4>>2],h[t+4>>2]=1|e,void(h[e+t>>2]=e)}o>>>0>=256?s(t):(0|(r=h[t+8>>2]))==(0|(i=h[t+12>>2]))?(c=1048576,u=h[262144]&d(o>>>3),h[c>>2]=u):(h[r+12>>2]=i,h[i+8>>2]=r)}if(2&(o=h[n+4>>2]))h[n+4>>2]=-2&o,h[t+4>>2]=1|e,h[e+t>>2]=e;else{o:{if(h[262247]!=(0|n)){if((0|n)!=h[262246])break o;return h[262246]=t,e=h[262244]+e|0,h[262244]=e,h[t+4>>2]=1|e,void(h[e+t>>2]=e)}if(h[262247]=t,e=h[262245]+e|0,h[262245]=e,h[t+4>>2]=1|e,(0|t)==h[262246]&&(h[262244]=0,h[262246]=0),(n=h[262254])>>>0>=e>>>0)break r;if(!(e=h[262247]))break r;i:if(!((o=h[262245])>>>0<41))for(t=1049e3;;){if((r=h[t>>2])+h[t+4>>2]>>>0>e>>>0&&r>>>0<=e>>>0)break i;if(!(t=h[t+8>>2]))break}if(r=4095,e=h[262252]){for(t=0;t=t+1|0,e=h[e+8>>2];);r=t>>>0>4095?t:4095}if(h[262256]=r,o>>>0<=n>>>0)break r;return void(h[262254]=-1)}if(e=(r=-8&o)+e|0,r>>>0>=256?s(n):(0|(r=h[n+12>>2]))==(0|(n=h[n+8>>2]))?(c=1048576,u=h[262144]&d(o>>>3),h[c>>2]=u):(h[n+12>>2]=r,h[r+8>>2]=n),h[t+4>>2]=1|e,h[e+t>>2]=e,h[262246]==(0|t)){h[262244]=e;break r}}if(e>>>0<256)break n;if(a(t,e),e=h[262256]+-1|0,h[262256]=e,!e){if(e=h[262252])break t;e=4095;break e}}return}return e=1048584+((n=e>>>3)<<3)|0,o=h[262144],n=1<<(31&n),r=h[e+8>>2],o&n||(h[262144]=n|o,r=e),n=r,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,void(h[t+8>>2]=n)}for(t=0;t=t+1|0,e=h[e+8>>2];);e=t>>>0>4095?t:4095}h[262256]=e}function o(e,t,n,r,i){var a;if(m=a=m-48|0,h[a+44>>2]=e,h[a+40>>2]=t,h[a+36>>2]=n,h[a+32>>2]=r,h[a+28>>2]=i,h[h[a+40>>2]>>2]!=h[a+36>>2])for(h[h[a+40>>2]>>2]=h[a+36>>2],h[a+24>>2]=h[h[a+40>>2]+136>>2],h[a+20>>2]=1&(0!=h[a+28>>2]^-1^-1);h[a+24>>2];){for(h[a+20>>2]||(h[a+28>>2]=h[a+24>>2]),h[a+16>>2]=h[h[h[a+24>>2]>>2]+8>>2],1==h[h[a+16>>2]+4>>2]&&o(h[a+44>>2],h[a+16>>2],h[a+36>>2],h[a+32>>2],h[a+28>>2]),h[a+12>>2]=0;!(h[a+12>>2]>=128);)v[h[a+12>>2]+(h[a+16>>2]+8|0)|0]&&(_[h[a+28>>2]>>2]>=_[h[a+32>>2]+(h[a+12>>2]<<2)>>2]&&h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]||(h[h[a+32>>2]+(h[a+12>>2]<<2)>>2]=h[h[a+28>>2]>>2])),h[a+12>>2]=h[a+12>>2]+1;h[a+24>>2]=h[h[a+24>>2]+4>>2]}m=a+48|0}function i(e,t,n,r){var o;for(h[44+(o=m-48|0)>>2]=e,h[o+40>>2]=t,h[o+36>>2]=n,h[o+32>>2]=r,h[o+28>>2]=h[h[o+40>>2]+136>>2];h[o+28>>2];){if(h[o+24>>2]=h[h[h[o+28>>2]>>2]+8>>2],h[o+24>>2]==h[o+40>>2])for(h[o+20>>2]=h[h[h[o+28>>2]>>2]+12>>2],h[o+16>>2]=0;!(h[o+16>>2]>=128);){e:{if(1!=h[h[o+20>>2]+4>>2]){if(!v[h[o+16>>2]+(h[o+20>>2]+8|0)|0])break e}else if(h[o+12>>2]=h[h[o+44>>2]+32>>2]+((h[o+20>>2]-h[h[o+44>>2]+24>>2]|0)/140<<9),!h[h[o+12>>2]+(h[o+16>>2]<<2)>>2])break e;_[h[o+28>>2]>>2]>=_[h[o+32>>2]+(h[o+16>>2]<<2)>>2]&&h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]||(h[h[o+32>>2]+(h[o+16>>2]<<2)>>2]=h[h[o+28>>2]>>2])}h[o+16>>2]=h[o+16>>2]+1}h[o+28>>2]=h[h[o+28>>2]+4>>2]}}function a(e,t){var n=0,r=0,o=0,i=0;h[e+16>>2]=0,h[e+20>>2]=0,o=e,n=0,(r=t>>>8)&&(n=31,t>>>0>16777215||(n=62+((t>>>(6-(r=y(r))&31)&1)-(r<<1)|0)|0)),h[o+28>>2]=n,o=1048848+(n<<2)|0;e:{t:{n:{r:{if((i=h[262145])&(r=1<<(31&n))){if(r=h[o>>2],(-8&h[r+4>>2])!=(0|t))break r;n=r;break n}h[262145]=r|i,h[o>>2]=e,h[e+24>>2]=o;break e}for(o=t<<(31==(0|n)?0:25-(n>>>1)&31);;){if(!(n=h[(i=16+((o>>>29&4)+r|0)|0)>>2]))break t;if(o<<=1,r=n,(-8&h[n+4>>2])==(0|t))break}}return t=h[n+8>>2],h[t+12>>2]=e,h[n+8>>2]=e,h[e+24>>2]=0,h[e+12>>2]=n,void(h[e+8>>2]=t)}h[i>>2]=e,h[e+24>>2]=r}h[e+12>>2]=e,h[e+8>>2]=e}function s(e){var t,n=0,r=0,o=0,i=0,a=0,s=0;t=h[e+24>>2];e:{t:{if((0|e)==(0|(n=h[e+12>>2]))){if(o=h[(n=e+20|0)>>2],r=h[(o?20:16)+e>>2])break t;n=0;break e}r=h[e+8>>2],h[r+12>>2]=n,h[n+8>>2]=r;break e}for(o=o?n:e+16|0;i=o,(r=h[(o=(n=r)+20|0)>>2])||(o=n+16|0,r=h[n+16>>2]),r;);h[i>>2]=0}e:if(t){r=1048848+(h[e+28>>2]<<2)|0;t:{if((0|e)==h[r>>2]){if(h[r>>2]=n,n)break t;return a=1048580,s=h[262145]&d(h[e+28>>2]),void(h[a>>2]=s)}if(h[(h[t+16>>2]==(0|e)?16:20)+t>>2]=n,!n)break e}h[n+24>>2]=t,(r=h[e+16>>2])&&(h[n+16>>2]=r,h[r+24>>2]=n),(e=h[e+20>>2])&&(h[n+20>>2]=e,h[e+24>>2]=n)}}function c(e,t){return 0|function(e){var t;return!(t=function(e){var t=0,n=0,r=0,o=0,i=0,c=0,u=0,p=0,v=0,g=0,b=0;e:{t:{n:{if(e>>>0>=245){if(e>>>0>=4294901709)break t;if(o=-8&(e=e+11|0),!(p=h[262145]))break n;n=0-o|0,u=0,(e>>>=8)&&(u=31,o>>>0>16777215||(u=62+((o>>>(6-(e=y(e))&31)&1)-(e<<1)|0)|0));r:{o:{if(e=h[1048848+(u<<2)>>2]){for(i=o<<(31==(0|u)?0:25-(u>>>1)&31);;){if(!((c=-8&h[e+4>>2])>>>0<o>>>0||(c=c-o|0)>>>0>=n>>>0||(r=e,n=c))){n=0;break o}if(c=h[e+20>>2],e=h[16+((i>>>29&4)+e|0)>>2],t=c&&(0|c)!=(0|e)?c:t,i<<=1,!e)break}if(t){e=t;break o}if(r)break r}if(r=0,!(e=(0-(e=2<<(31&u))|e)&p))break n;if(!(e=h[1048848+(l(e&0-e)<<2)>>2]))break n}for(;r=(c=(i=(t=-8&h[e+4>>2])-o|0)>>>0<n>>>0&t>>>0>=o>>>0)?e:r,n=c?i:n,e=(t=h[e+16>>2])||h[e+20>>2];);if(!r)break n}if(n>>>0>=(e=h[262244])-o>>>0&&e>>>0>=o>>>0)break n;s(r);r:if(n>>>0>=16){if(h[r+4>>2]=3|o,h[4+(t=r+o|0)>>2]=1|n,h[t+n>>2]=n,n>>>0>=256){a(t,n);break r}e=1048584+((n>>>=3)<<3)|0,i=h[262144],n=1<<(31&n),u=h[e+8>>2],i&n||(h[262144]=n|i,u=e),n=u,h[e+8>>2]=t,h[n+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=n}else e=n+o|0,h[r+4>>2]=3|e,h[4+(e=e+r|0)>>2]=1|h[e+4>>2];return r+8|0}r:{o:{if(!(3&(e=(t=h[262144])>>>(r=31&(n=(o=e>>>0<11?16:e+11&-8)>>>3))))){if(o>>>0<=_[262244])break n;if(e)break o;if(!(e=h[262145]))break n;for(t=h[1048848+(l(e&0-e)<<2)>>2],n=(-8&h[t+4>>2])-o|0,i=t;;){if(!(e=h[t+16>>2])&&!(e=h[t+20>>2]))break r;n=(t=(r=(-8&h[e+4>>2])-o|0)>>>0<n>>>0)?r:n,i=t?e:i,t=e}}n=(e=h[1048592+(c=(r=n+(1&(-1^e))|0)<<3)>>2])+8|0,(0|(i=h[e+8>>2]))==(0|(c=c+1048584|0))?(g=1048576,b=d(r)&t,h[g>>2]=b):(h[i+12>>2]=c,h[c+8>>2]=i),t=r<<3,h[e+4>>2]=3|t,h[4+(e=e+t|0)>>2]=1|h[e+4>>2];break t}return r=l(0-(e=(n=e<<r)&(0-(e=2<<r)|e))&e),e=h[1048592+(i=r<<3)>>2],(0|(n=h[e+8>>2]))==(0|(i=i+1048584|0))?(g=1048576,b=d(r)&t,h[g>>2]=b):(h[n+12>>2]=i,h[i+8>>2]=n),i=e+8|0,h[e+4>>2]=3|o,n=(t=r<<3)-o|0,h[4+(c=e+o|0)>>2]=1|n,h[e+t>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],o=h[262144],r=1<<(31&r),u=h[e+8>>2],o&r||(h[262144]=r|o,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n,i}return s(i),n>>>0>=16?(h[i+4>>2]=3|o,h[4+(c=o+i|0)>>2]=1|n,h[n+c>>2]=n,(e=h[262244])&&(e=1048584+((r=e>>>3)<<3)|0,t=h[262246],o=h[262144],r=1<<(31&r),u=h[e+8>>2],o&r||(h[262144]=r|o,u=e),r=u,h[e+8>>2]=t,h[r+12>>2]=t,h[t+12>>2]=e,h[t+8>>2]=r),h[262246]=c,h[262244]=n):(e=n+o|0,h[i+4>>2]=3|e,h[4+(e=e+i|0)>>2]=1|h[e+4>>2]),i+8|0}n:{r:{o:{i:{if((t=h[262244])>>>0<o>>>0){if((e=h[262245])>>>0>o>>>0)break e;if(n=0,-1==(0|(t=f((e=o+65583|0)>>>16))))break t;if(!(r=t<<16))break t;if(e=(i=-65536&e)+h[262248]|0,h[262248]=e,t=h[262249],h[262249]=t>>>0>e>>>0?t:e,!(n=h[262247]))break i;for(e=1049e3;;){if((0|r)==((t=h[e>>2])+(c=h[e+4>>2])|0))break o;if(!(e=h[e+8>>2]))break}break r}return e=h[262246],(r=t-o|0)>>>0<=15?(h[262246]=0,h[262244]=0,h[e+4>>2]=3|t,o=4+(t=e+t|0)|0,n=1|h[t+4>>2]):(h[262244]=r,n=e+o|0,h[262246]=n,h[n+4>>2]=1|r,h[e+t>>2]=r,n=3|o,o=e+4|0),h[o>>2]=n,e+8|0}for((e=h[262255])>>>0<=r>>>0&&e||(h[262255]=r),e=0,h[262256]=4095,h[262251]=i,h[262250]=r,h[262253]=0;t=e+1048584|0,h[e+1048592>>2]=t,h[e+1048596>>2]=t,256!=(0|(e=e+8|0)););h[262247]=r,e=i+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}if(!(h[e+12>>2]|r>>>0<=n>>>0|t>>>0>n>>>0)){h[e+4>>2]=i+c,t=(e=h[262247])+15&-8,h[262247]=t+-8,n=8+((r=i+h[262245]|0)+(e-t|0)|0)|0,h[262245]=n,h[t+-4>>2]=1|n,h[4+(e+r|0)>>2]=40,h[262254]=2097152;break n}}e=h[262255],h[262255]=e>>>0<r>>>0?e:r,t=r+i|0,e=1049e3;r:{for(;;){if((0|t)!=h[e>>2]){if(e=h[e+8>>2])continue;break r}break}if(!h[e+12>>2]){h[e>>2]=r,h[e+4>>2]=i+h[e+4>>2],h[r+4>>2]=3|o,i=r+o|0,o=(t-r|0)-o|0;o:{i:{if((0|t)!=h[262247]){if(h[262246]==(0|t))break i;if(1==(3&(e=h[t+4>>2]))&&((n=-8&e)>>>0>=256?s(t):(0|(c=h[t+12>>2]))==(0|(u=h[t+8>>2]))?(g=1048576,b=h[262144]&d(e>>>3),h[g>>2]=b):(h[u+12>>2]=c,h[c+8>>2]=u),o=n+o|0,t=t+n|0),h[t+4>>2]=-2&h[t+4>>2],h[i+4>>2]=1|o,h[o+i>>2]=o,o>>>0>=256){a(i,o);break o}e=1048584+((t=o>>>3)<<3)|0,n=h[262144],t=1<<(31&t),u=h[e+8>>2],n&t||(h[262144]=t|n,u=e),n=u,h[e+8>>2]=i,h[n+12>>2]=i,h[i+12>>2]=e,h[i+8>>2]=n;break o}h[262247]=i,e=h[262245]+o|0,h[262245]=e,h[i+4>>2]=1|e;break o}h[262246]=i,e=h[262244]+o|0,h[262244]=e,h[i+4>>2]=1|e,h[e+i>>2]=e}return r+8|0}}for(e=1049e3;!((t=h[e>>2])>>>0<=n>>>0&&(c=t+h[e+4>>2]|0)>>>0>n>>>0);)e=h[e+8>>2];for(h[262247]=r,e=i+-40|0,h[262245]=e,h[r+4>>2]=1|e,h[4+(e+r|0)>>2]=40,h[262254]=2097152,h[(t=(e=(c+-32&-8)-8|0)>>>0<n+16>>>0?n:e)+4>>2]=27,e=h[262250],u=h[262251],v=h[262253],h[(p=t+16|0)>>2]=h[262252],h[p+4>>2]=v,h[t+8>>2]=e,h[t+12>>2]=u,h[262251]=i,h[262250]=r,h[262252]=t+8,h[262253]=0,e=t+28|0;h[e>>2]=7,c>>>0>(e=e+4|0)>>>0;);(0|t)!=(0|n)&&(h[t+4>>2]=-2&h[t+4>>2],e=t-n|0,h[n+4>>2]=1|e,h[t>>2]=e,e>>>0>=256?a(n,e):(e=1048584+((t=e>>>3)<<3)|0,r=h[262144],t=1<<(31&t),u=h[e+8>>2],r&t||(h[262144]=t|r,u=e),t=u,h[e+8>>2]=n,h[t+12>>2]=n,h[n+12>>2]=e,h[n+8>>2]=t))}if(n=0,!((e=h[262245])>>>0<=o>>>0))break e}return n}return t=e-o|0,h[262245]=t,r=(e=h[262247])+o|0,h[262247]=r,h[r+4>>2]=1|t,h[e+4>>2]=3|o,e+8|0}(e))|!(3&v[t+-4|0])||function(e,t){if(t)for(;p[0|e]=0,e=e+1|0,t=t+-1|0;);}(t,e),t}(b(e|=0,t|=0))}function u(){}function l(e){return e?31-y(e+-1^e)|0:32}function d(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function f(t){t|=0;var r=0|n.byteLength/65536,o=r+t|0;if(r<o&&o<65536){var i=new ArrayBuffer(b(o,65536)),a=new e.Int8Array(i);a.set(p),p=a,p=new e.Int8Array(i),new e.Int16Array(i),h=new e.Int32Array(i),v=new e.Uint8Array(i),g=new e.Uint16Array(i),_=new e.Uint32Array(i),new e.Float32Array(i),new e.Float64Array(i),n=i}return r}var p=new e.Int8Array(n),h=(new e.Int16Array(n),new e.Int32Array(n)),v=new e.Uint8Array(n),g=new e.Uint16Array(n),_=new e.Uint32Array(n),b=(new e.Float32Array(n),new e.Float64Array(n),e.Math.imul),y=(e.Math.fround,e.Math.abs,e.Math.clz32),m=(e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,e.NaN,e.Infinity,1048576);return{memory:Object.create(Object.prototype,{grow:{value:f},buffer:{get:function(){return n}}}),rust_calloc:c,rust_free:function(e){r(e|=0)},llparser_create:function(e,t,n){return 0|function(e,t,n){var r,o,i;return m=r=m-32|0,h[r+28>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,e=r,t=h[r+28>>2]?h[r+28>>2]:256,h[e+28>>2]=t,e=r,t=h[r+24>>2]?h[r+24>>2]:256,h[e+24>>2]=t,e=r,t=h[r+20>>2]?h[r+20>>2]:256,h[e+20>>2]=t,o=r,i=c(((((((b(h[r+24>>2],140)+52|0)+b(h[r+20>>2],44)|0)+(h[r+24>>2]<<9)|0)+(h[r+24>>2]<<9)|0)+b(h[r+20>>2],h[r+24>>2]<<3)|0)+(h[r+28>>2]<<1)|0)+(h[r+28>>2]<<3)|0,1),h[o+16>>2]=i,h[h[r+16>>2]+12>>2]=h[r+28>>2],h[h[r+16>>2]+16>>2]=h[r+24>>2],h[h[r+16>>2]+20>>2]=h[r+20>>2],h[h[r+16>>2]+4>>2]=0,h[h[r+16>>2]>>2]=0,h[h[r+16>>2]+8>>2]=0,h[r+12>>2]=h[r+16>>2]+52,h[h[r+16>>2]+24>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+b(h[r+24>>2],140),h[h[r+16>>2]+28>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+b(h[r+20>>2],44),h[h[r+16>>2]+32>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+36>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+24>>2]<<9),h[h[r+16>>2]+40>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+b(h[r+20>>2],h[r+24>>2]<<3),h[h[r+16>>2]+44>>2]=h[r+12>>2],h[r+12>>2]=h[r+12>>2]+(h[r+28>>2]<<1),h[h[r+16>>2]+48>>2]=h[r+12>>2],m=r+32|0,h[r+16>>2]}(e|=0,t|=0,n|=0)},llparser_destroy:function(e){!function(e){var t;m=t=m-16|0,h[t+12>>2]=e,r(h[t+12>>2]),m=t+16|0}(e|=0)},llparser_create_descriptor:function(e,t){return 0|function(e,t){var n,r;return h[12+(n=m-16|0)>>2]=e,h[n+8>>2]=t,t=h[h[n+12>>2]+24>>2],r=h[n+12>>2],e=h[r+4>>2],h[r+4>>2]=e+1,h[n+4>>2]=t+b(e,140),h[h[n+4>>2]+4>>2]=h[n+8>>2]?1:0,h[n+4>>2]}(e|=0,t|=0)},llparser_descriptor_set_all:function(e){var t;e|=0,h[12+(t=m-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-1,p[h[t+12>>2]+135|0]=1},llparser_descriptor_set_nil:function(e){var t;e|=0,h[12+(t=m-16|0)>>2]=e,h[h[t+12>>2]+4>>2]=-2,p[h[t+12>>2]+8|0]=1},llparser_descriptor_add_char:function(e,t){!function(e,t){var n;h[12+(n=m-16|0)>>2]=e,h[n+8>>2]=t,p[h[n+8>>2]+(h[n+12>>2]+8|0)|0]=1}(e|=0,t|=0)},llparser_descriptor_add_range:function(e,t,n){!function(e,t,n){var r;for(h[12+(r=m-16|0)>>2]=e,h[r+8>>2]=t,h[r+4>>2]=n,h[r>>2]=h[r+8>>2];!(h[r>>2]>h[r+4>>2]);)p[h[r>>2]+(h[r+12>>2]+8|0)|0]=1,h[r>>2]=h[r>>2]+1}(e|=0,t|=0,n|=0)},llparser_descriptor_revert:function(e){!function(e){var t;for(h[12+(t=m-16|0)>>2]=e,h[t+8>>2]=1;!(h[t+8>>2]>=127);)p[h[t+8>>2]+(h[t+12>>2]+8|0)|0]=1&(0!=v[h[t+8>>2]+(h[t+12>>2]+8|0)|0]^-1),h[t+8>>2]=h[t+8>>2]+1}(e|=0)},llparser_add_rule:function(e,t,n,r,o,i,a,s,c,u,l,d){return 0|function(e,t,n,r,o,i,a,s,c,u,l,d){var f;return m=f=m+-64|0,h[f+60>>2]=e,h[f+56>>2]=t,h[f+52>>2]=n,h[f+48>>2]=r,h[f+44>>2]=o,h[f+40>>2]=i,h[f+36>>2]=a,h[f+32>>2]=s,h[f+28>>2]=c,h[f+24>>2]=u,h[f+20>>2]=l,h[f+16>>2]=d,t=h[h[f+60>>2]+28>>2],n=h[f+60>>2],e=h[n>>2],h[n>>2]=e+1,h[f+12>>2]=t+b(e,44),h[h[f+12>>2]>>2]=h[f+52>>2],h[h[f+12>>2]+4>>2]=h[f+48>>2],h[f+48>>2]>0&&(h[h[f+12>>2]+8>>2]=h[f+44>>2]),h[f+48>>2]>1&&(h[h[f+12>>2]+12>>2]=h[f+40>>2]),h[f+48>>2]>2&&(h[h[f+12>>2]+16>>2]=h[f+36>>2]),h[f+48>>2]>3&&(h[h[f+12>>2]+20>>2]=h[f+32>>2]),h[f+48>>2]>4&&(h[h[f+12>>2]+24>>2]=h[f+28>>2]),h[f+48>>2]>5&&(h[h[f+12>>2]+28>>2]=h[f+24>>2]),h[f+48>>2]>6&&(h[h[f+12>>2]+32>>2]=h[f+20>>2]),h[f+48>>2]>7&&(h[h[f+12>>2]+36>>2]=h[f+16>>2]),h[h[f+12>>2]+40>>2]=h[f+56>>2],h[f+48>>2]>0&&function(e,t,n){var r;h[28+(r=m-32|0)>>2]=e,h[r+24>>2]=t,h[r+20>>2]=n,h[r+16>>2]=(h[r+20>>2]-h[h[r+28>>2]+24>>2]|0)/140,1==h[h[r+20>>2]+4>>2]&&(t=h[h[r+28>>2]+40>>2],n=h[r+28>>2],e=h[n+8>>2],h[n+8>>2]=e+1,h[r+12>>2]=t+(e<<3),h[h[r+12>>2]>>2]=h[r+24>>2],h[h[r+12>>2]+4>>2]=h[h[r+20>>2]+136>>2],h[h[r+20>>2]+136>>2]=h[r+12>>2])}(h[f+60>>2],h[f+12>>2],h[f+52>>2]),m=f- -64|0,h[f+12>>2]}(e|=0,t|=0,n|=0,r|=0,o|=0,i|=0,a|=0,s|=0,c|=0,u|=0,l|=0,d|=0)},llparser_prepare:function(e){!function(e){var t;for(m=t=m-32|0,h[t+28>>2]=e,h[t+24>>2]=0;!(h[t+24>>2]>=h[h[t+28>>2]+4>>2]);)h[t+20>>2]=h[h[t+28>>2]+24>>2]+b(h[t+24>>2],140),1==h[h[t+20>>2]+4>>2]&&o(h[t+28>>2],h[t+20>>2],h[t+20>>2],h[h[t+28>>2]+32>>2]+(h[t+24>>2]<<9)|0,0),h[t+24>>2]=h[t+24>>2]+1;for(h[t+16>>2]=0;!(h[t+16>>2]>=h[h[t+28>>2]+4>>2]);)h[t+12>>2]=h[h[t+28>>2]+24>>2]+b(h[t+16>>2],140),1==h[h[t+12>>2]+4>>2]&&(h[h[t+12>>2]>>2]=0,i(h[t+28>>2],h[t+12>>2],h[t+12>>2],h[h[t+28>>2]+36>>2]+(h[t+16>>2]<<9)|0)),h[t+16>>2]=h[t+16>>2]+1;m=t+32|0}(e|=0)},llparser_parse:function(e,t){return 0|function(e,t){var n,r,o;return m=n=m-32|0,h[n+24>>2]=e,h[n+20>>2]=t,h[n+16>>2]=0,h[n+12>>2]=0,r=n,o=function e(t,n,r,o,i,a,s){var c,u=0,l=0;m=c=m-96|0,h[c+88>>2]=t,h[c+84>>2]=n,h[c+80>>2]=r,h[c+76>>2]=o,h[c+72>>2]=i,h[c+68>>2]=a,h[c+64>>2]=s,h[c+60>>2]=g[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1);e:if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0))h[c+92>>2]=-1;else if(1==h[h[c+84>>2]+4>>2])if(h[c+56>>2]=h[h[c+76>>2]>>2],h[c+52>>2]=h[h[c+72>>2]>>2],h[c+48>>2]=0,h[c+44>>2]=0,h[c+40>>2]=h[h[c+88>>2]+32>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+36>>2]=0,!h[h[c+40>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+40>>2]+508>>2]?h[h[c+40>>2]>>2]&&(h[c+36>>2]=h[h[c+40>>2]>>2]):h[c+36>>2]=h[h[c+40>>2]+508>>2]:h[c+36>>2]=h[h[c+40>>2]+(h[c+60>>2]<<2)>>2],h[c+36>>2]){for(h[c+68>>2]||h[h[c+36>>2]+40>>2]||(h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2),h[c+32>>2]=0;h[c+32>>2]<h[h[c+36>>2]+4>>2];){if(h[c+28>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+36>>2]+40>>2]|h[h[c+36>>2]+40>>2]==(h[c+32>>2]+65536|0)||(h[c+28>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+36>>2]+8|0)+(h[c+32>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+28>>2],h[c+64>>2]),h[u+24>>2]=l,h[c+24>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+36>>2]+40>>2]!=(h[c+32>>2]+65536|0)||(h[c+44>>2]=h[c+24>>2]),h[c+32>>2]=h[c+32>>2]+1}for(h[c+68>>2]||(h[h[c+36>>2]+40>>2]?1==h[h[c+36>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+36>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+36>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1));;){if(h[h[c+72>>2]>>2]>(h[c+64>>2]-4|0)){h[c+92>>2]=-1;break e}if(h[c+20>>2]=h[h[c+88>>2]+36>>2]+((h[c+84>>2]-h[h[c+88>>2]+24>>2]|0)/140<<9),h[c+16>>2]=0,h[c+60>>2]=g[h[c+80>>2]+(h[h[c+76>>2]>>2]<<1)>>1],_[c+60>>2]>=128&&(h[c+60>>2]=1),!h[h[c+20>>2]+(h[c+60>>2]<<2)>>2]|_[c+60>>2]<=0|_[c+60>>2]>=127?!h[c+60>>2]|!h[h[c+20>>2]+508>>2]||(h[c+16>>2]=h[h[c+20>>2]+508>>2]):h[c+16>>2]=h[h[c+20>>2]+(h[c+60>>2]<<2)>>2],!h[c+16>>2])break;for(h[c+68>>2]||(h[h[c+16>>2]+40>>2]?65536!=h[h[c+16>>2]+40>>2]&&(h[h[c+72>>2]>>2]=h[c+52>>2]):(h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]=(0-h[h[h[c+88>>2]+48>>2]+(h[c+44>>2]<<2)>>2]|0)-1,h[c+48>>2]=h[h[c+72>>2]>>2],t=h[c+72>>2],h[t>>2]=h[t>>2]+2)),h[c+12>>2]=1;h[c+12>>2]<h[h[c+16>>2]+4>>2];){if(h[c+8>>2]=h[c+68>>2],h[c+68>>2]||!h[h[c+16>>2]+40>>2]|h[h[c+16>>2]+40>>2]==(h[c+12>>2]+65536|0)||(h[c+8>>2]=1),u=c,l=e(h[c+88>>2],h[(h[c+16>>2]+8|0)+(h[c+12>>2]<<2)>>2],h[c+80>>2],h[c+76>>2],h[c+72>>2],h[c+8>>2],h[c+64>>2]),h[u+4>>2]=l,h[c+4>>2]<0){h[c+92>>2]=-1;break e}h[c+68>>2]|h[h[c+16>>2]+40>>2]!=(h[c+12>>2]+65536|0)||(h[c+44>>2]=h[c+4>>2]),h[c+12>>2]=h[c+12>>2]+1}h[c+68>>2]||(h[h[c+16>>2]+40>>2]?1==h[h[c+16>>2]+40>>2]&&(n=h[c+56>>2],r=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[r+(t<<2)>>2]=n,h[c+44>>2]=h[h[c+72>>2]>>2],n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[r+(t<<2)>>2]=n):(h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]<<2)>>2]=0-h[c+16>>2],h[h[h[c+88>>2]+48>>2]+(h[c+48>>2]+1<<2)>>2]=h[h[c+16>>2]+4>>2],h[c+44>>2]=h[c+48>>2]+1))}h[c+92>>2]=h[c+44>>2]}else h[c+92>>2]=-1;else{if(h[c+60>>2]&&(-1==h[h[c+84>>2]+4>>2]&&(t=h[c+76>>2],h[t>>2]=h[t>>2]+1),!h[h[c+84>>2]+4>>2])){if(!v[h[c+60>>2]+(h[c+84>>2]+8|0)|0]){h[c+92>>2]=-1;break e}t=h[c+76>>2],h[t>>2]=h[t>>2]+1}h[c+68>>2]||(n=h[h[c+76>>2]>>2],r=h[h[c+84>>2]+4>>2],o=h[h[c+88>>2]+48>>2],i=h[c+72>>2],t=h[i>>2],h[i>>2]=t+1,h[o+(t<<2)>>2]=n-(-2==(0|r)?0:1),n=h[h[c+76>>2]>>2],r=h[h[c+88>>2]+48>>2],o=h[c+72>>2],t=h[o>>2],h[o>>2]=t+1,h[r+(t<<2)>>2]=n),h[c+92>>2]=h[h[c+72>>2]>>2]-1}return m=c+96|0,h[c+92>>2]}(h[n+24>>2],h[n+20>>2],h[h[n+24>>2]+44>>2],n+12|0,n+16|0,0,h[h[n+24>>2]+12>>2]<<1),h[r+8>>2]=o,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=-1,e=h[h[n+24>>2]+48>>2],t=h[n+16>>2],h[n+16>>2]=t+1,h[e+(t<<2)>>2]=0,g[h[h[n+24>>2]+44>>2]+(h[n+12>>2]<<1)>>1]|h[n+8>>2]<0?h[n+28>>2]=h[n+12>>2]+1:h[n+28>>2]=0,m=n+32|0,h[n+28>>2]}(e|=0,t|=0)},llparser_get_input_buffer:function(e){var t;return e|=0,h[12+(t=m-16|0)>>2]=e,h[h[t+12>>2]+44>>2]},llparser_get_result:function(e){var t;return e|=0,h[12+(t=m-16|0)>>2]=e,h[h[t+12>>2]+48>>2]},wasm_main:u,__wbindgen_start:u}}({Math:Math,Int8Array:Int8Array,Uint8Array:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:1/0},0,r),i=o.memory,a=o.rust_calloc,s=o.rust_free,c=o.llparser_create,u=o.llparser_destroy,l=o.llparser_create_descriptor,d=o.llparser_descriptor_set_all,f=o.llparser_descriptor_set_nil,p=o.llparser_descriptor_add_char,h=o.llparser_descriptor_add_range,v=o.llparser_descriptor_revert,g=o.llparser_add_rule,_=o.llparser_prepare,b=o.llparser_parse,y=o.llparser_get_input_buffer,m=o.llparser_get_result,w=o.wasm_main,O=o.__wbindgen_start}])},function(e,t,n){var r=n(4),o=function(e){this.empty=!0,this._type=e,this._arr=[],this._index=0};o.create=function(e){return new o(e)},o.prototype.add=function(e){var t=this._index++;return this._arr.push({id:t,func:e}),this.empty=!1,t},o.prototype.remove=function(e){var t=this._arr,n=0;if("function"==typeof e)for(n=0;n<t.length;n++){var r=t[n].func;if(r===e)return t.splice(n,1),this.empty=!t.length,r}else for(n=0;n<t.length;n++)if(t[n].id===e){var o=t[n].func;return t.splice(n,1),this.empty=!t.length,o}return null},o.prototype.call=function(e,t,n){for(var r=this._arr,o=!1,i=0;i<r.length;i++){!1===a(this._type,r[i].func,e,t,n)&&(o=!0)}if(o)return!1};var i=function(e,t){if(!t.type||!1!==s.call(null,[e,t])){if(r.throwGlobalError)throw e;console.error(e.stack)}},a=o.safeCallback=function(e,t,n,r,o){try{return t.apply(n,r)}catch(s){var a="[Exparser] [Error] [Component] "+(e||"Error Listener")+" Error @ ";n&&n.is&&(a+=n.is),a+="#"+(t.name||"(anonymous)"),o&&o.triggerLifeTime("error",[s]),i(s,{message:a,type:e,element:n,method:t,args:r})}},s=o.create();o.addGlobalErrorListener=function(e){return s.add(e)},o.removeGlobalErrorListener=function(e){return s.remove(e)},e.exports=o},function(e,t){var n={lazyRegistration:!0,publicProperties:!1,availability:null,domain:"",writeOnly:!1,allowInWriteOnly:!1,classPrefix:null,addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,reflectToAttributes:!1,writeFieldsToNode:!0,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,listenerChangeLifeTimes:!1,randomizeTagName:!1,virtualHost:!1,throwGlobalError:!1,writeExtraInfoToAttr:!1,documentBackend:"undefined"!=typeof window&&"undefined"!=typeof document?"dom":"none",hasDOMBackend:!("undefined"==typeof window||"undefined"==typeof document)};e.exports=n},function(e,t){var n=Object.prototype.hasOwnProperty,r=function(e,t){var o=typeof e;if("object"===o&&null!==e){var i=t?t.get(e):void 0;if(void 0!==i)return i;if(e instanceof Array){i=[],t&&t.set(e,i);for(var a=0;a<e.length;a++)i[a]=r(e[a],t)}else for(var s in i={},t&&t.set(e,i),e)n.call(e,s)&&(i[s]=r(e[s],t));return i}if("symbol"!==o)return e};t.deepCopy=function(e,t){var n=t&&"undefined"!=typeof WeakMap?new WeakMap:null;return r(e,n)}},function(e,t,n){var r=n(3),o=(Object.prototype.hasOwnProperty,function(){});o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}});var i=null;o._setElementSystem=function(e){i=e,o._setElementSystem=null};var a=null;o._setComponent=function(e){a=e,o._setComponent=null};var s=Date.now();o.setInitTimeStamp=function(e){return s=void 0===e?Date.now():e},o.getInitTimeStamp=function(e){return s},o.create=function(e,t,n){var r=(n=n||{}).originalEvent,i=n.extraFields||{},a=Date.now()-s,c=new o;for(var u in c.currentTarget=null,c.type=e,c.timeStamp=a,c.mark=null,c.detail=t,c.bubbles=!!n.bubbles,c.composed=!!n.composed,c.__originalEvent=r,c.__hasCapture=!!n.capturePhase,c.__stopped=!1,c.__dispatched=!1,i)c[u]=i[u];return c},o.prototype.preventDefault=function(){this.__originalEvent&&this.__originalEvent.preventDefault()},o.prototype.stopPropagation=function(){this.__stopped=!0},o.prototype.isStopped=function(){return!!this.__stopped},o.prototype.markMutated=function(){this.__mutatedMarked=!0},o.prototype.mutatedMarked=function(){return!!this.__mutatedMarked};var c=function(e,t,n,r){for(var o=e,a=e instanceof i?e.collectMarks():{},s=[],c=[],u=e;u;){if(o!==u&&(s.push(e),e=u,c.push(a),a=e instanceof i?e.collectMarks():{}),o=u.parentNode,!1===r(u,e,a))return;if(u.__wxHost){if(n)break;e=s.pop()||u.__wxHost,a=c.pop()||(e instanceof i?e.collectMarks():{}),o=u=u.__wxHost}else{var l=!0;u instanceof i&&(l=!1),u=l||n?u.parentNode:u.__wxSlotParent}}};o.dispatchEvent=function(e,t){if(!t.__dispatched){t.__dispatched=!0,e.__wxElement&&e.__wxHost!==e.__wxElement&&((e=e.__wxElement).shadowRoot instanceof i&&(e=e.shadowRoot)),t.target=e instanceof i?e.__methodCaller:e;var n=function(e,n,r){if(!(n&&n.length&&t.mutatedMarked())){var o=t.currentTarget=r instanceof i?r.__methodCaller:r,s=e.call(o,[t],r instanceof a?r:void 0);n&&n.length&&t.markMutated(),!1===s&&(t.__originalEvent&&t.__originalEvent.preventDefault(),t.__stopped=!0)}},r=t.type,o=!t.composed;if(t.__hasCapture){var s=[];c(e,0,o,(function(e,t,n){return e.__wxCaptureEvents&&e.__wxCaptureEvents[r]&&s.push([e,t,n]),!0}));for(var u=s.length-1;u>=0;u--){var l=s[u],d=l[0],f=l[1];t.target=f instanceof i?f.__methodCaller:f,t.mark=l[2];var p=d.__wxCaptureMutated&&d.__wxCaptureMutated[r];if(n(d.__wxCaptureEvents[r],p,d),t.__stopped)break}}if(t.target=e instanceof i?e.__methodCaller:e,!t.__stopped){var h=!t.bubbles;c(e,0,o,(function(e,o,a){t.target=o instanceof i?o.__methodCaller:o,t.mark=a;var s=e.__wxMutated&&e.__wxMutated[r];return e.__wxEvents&&e.__wxEvents[r]&&n(e.__wxEvents[r],s,e),!h&&!t.__stopped}))}}},o.triggerEvent=function(e,t,n,r){var i=o.create(t,n,r);o.dispatchEvent(e,i)},o.addListenerToElement=function(e,t,n,o){var i=o&&o.mutated;if(i){var s=n;n=function(e){if(!e.mutatedMarked()){var t=Array.prototype.slice.call(arguments);return s.apply(this,t)}}}var c=void 0;return o&&(o.useCapture||o.capture)?(e.__wxCaptureEvents||(e.__wxCaptureEvents=Object.create(null)),e.__wxCaptureEvents[t]||(e.__wxCaptureEvents[t]=r.create("Event Listener")),c=e.__wxCaptureEvents[t].add(n),i&&(e.__wxCaptureMutated||(e.__wxCaptureMutated=Object.create(null)),e.__wxCaptureMutated[t]||(e.__wxCaptureMutated[t]=[]),e.__wxCaptureMutated[t].push(c))):(e.__wxEvents||(e.__wxEvents=Object.create(null)),e.__wxEvents[t]||(e.__wxEvents[t]=r.create("Event Listener")),c=e.__wxEvents[t].add(n),i&&(e.__wxMutated||(e.__wxMutated=Object.create(null)),e.__wxMutated[t]||(e.__wxMutated[t]=[]),e.__wxMutated[t].push(c))),e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!0,t,n,o]),c},o.removeListenerFromElement=function(e,t,n,r){var o=null;if(r&&(r.useCapture||r.capture))e.__wxCaptureEvents&&e.__wxCaptureEvents[t]&&(o=e.__wxCaptureEvents[t].remove(n)),e.__wxCaptureMutated&&e.__wxCaptureMutated[t]&&-1!==(i=e.__wxCaptureMutated[t].indexOf(n))&&e.__wxCaptureMutated[t].splice(i,1);else if(e.__wxEvents&&e.__wxEvents[t]&&(o=e.__wxEvents[t].remove(n)),e.__wxMutated&&e.__wxMutated[t]){var i;-1!==(i=e.__wxMutated[t].indexOf(n))&&e.__wxMutated[t].splice(i,1)}o&&e instanceof a&&e.__componentOptions.listenerChangeLifeTimes&&e.triggerLifeTime("listenerChanged",[!1,t,o,r])},e.exports=o},function(e,t,n){var r=n(1),o=" \n\r\t\f",i=null;t.parseMultiPaths=function(e){return i||(i=r.create({MULTIPLE_PATHS:[{id:"arrayConcat",states:["MULTIPLE_PATHS",",","SINGLE_PATH"]},{id:"array",states:["SINGLE_PATH"]}],SINGLE_PATH:[{id:"arrayConcat",states:["SINGLE_PATH",".","VAR_NAME"]},{id:"arrayConcat",states:["SINGLE_PATH","[","INT","]"]},{id:"array",states:["VAR_NAME"]},{id:"_jump",states:["SINGLE_PATH",o]}],VAR_NAME:[{id:"_blank",states:[o,"VAR_NAME"]},{id:"_jump",states:["VAR_NAME",o]},{id:"_raw",states:["*","*"]},{id:"_raw",states:["_a-zA-Z$","VAR_NAME_AFTER"]}],VAR_NAME_AFTER:[{id:"_raw",states:["_a-zA-Z0-9$","VAR_NAME_AFTER"]},{id:"_raw",states:["NULL"]}],INT:[{id:"_blank",states:[o,"INT"]},{id:"_jump",states:["INT",o]},{id:"toNumber",states:["0-9","INT_AFTER"]}],INT_AFTER:[{id:"_raw",states:["0-9","INT_AFTER"]},{id:"_raw",states:["NULL"]}]},{arrayConcat:function(e){return e[0].push(e[2]),e[0]},array:function(e){return e},toNumber:function(e){return parseInt(e[0]+e[1],10)}})),i.parse("MULTIPLE_PATHS",e)},t.parseSinglePath=function(e){for(var t=e.length,n=[],r="",o=0,i=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1]||"\\"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw new Error("The path string should not start with []: "+e);a=!0,i=!1}else if("]"===c){if(!i)throw new Error("There should be digits inside [] in the path string: "+e);a=!1,n.push(o),o=0}else if(a){if(c<"0"||c>"9")throw new Error("Only digits (0-9) can be put inside [] in the path string: "+e);i=!0,o=10*o+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===t)throw new Error("The path string should not be empty");return n}},function(e,t,n){var r=n(3),o=n(4),i=n(7),a=["created","ready","cacheAttached","attached","moved","detached","saved","restored","error","listenerChanged","performanceData"],s=[String,Number,Boolean,Object,Array,null],c=function(){},u=i.parseMultiPaths,l=function(){},d=(l.matchTypeWithValue=function(e,t){if(e===String){if("string"!=typeof t)return!1}else if(e===Number){if(!Number.isFinite(t))return!1}else if(e===Boolean){if("boolean"!=typeof t)return!1}else if(e===Object){if(null===t||t.constructor!==Object)return!1}else if(e===Array){if(t.constructor!==Array)return!1}else if(void 0===t)return!1;return!0},function(e){for(var t=[],n=0;n<e.length;n++)t[n]=e[n];return t}),f=function(e){var t={};for(var n in e)t[n]=e[n];return t},p=function(e,t){for(var n in t)hasOwnProperty.call(e,n)?"object"!=typeof e[n]||"object"!=typeof t[n]||null===t[n]||t[n]instanceof Array?e[n]=t[n]:(e[n]instanceof Array?e[n]=d(e[n]):e[n]=f(e[n]),p(e[n],t[n])):e[n]=t[n]};l.create=function(e){var t=new l;return t.is=e.is||"",t.using=e.using||{},t.generics=e.generics||{},t.template=e.template,t.externalClasses=e.externalClasses||[],t.data="object"==typeof e.data?{}:null,t.properties=Object.create(null),t.methods=Object.create(null),t.listeners=Object.create(null),t.relations=Object.create(null),t.ancestors=[],t.initiator=e.initiator,t.lifetimes=Object.create(null),t.pageLifetimes=Object.create(null),t.observers=[],t.options={publicProperties:!!(e.options&&void 0!==e.options.publicProperties?e.options.publicProperties:o.publicProperties)},t.definitionFilter=e.definitionFilter,t._unprepared=e,(e.options&&void 0!==e.options.lazyRegistration?e.options.lazyRegistration:o.lazyRegistration)||l.prepare(t),e.is&&(l._list[e.is]=t),t},l.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.ancestors,r="",o=0;for(o=0;o<(t.behaviors||[]).length;o++){var i=t.behaviors[o],d=i;for(r in"string"==typeof d&&(d=l._list[i]),d._unprepared&&l.prepare(d),"object"==typeof d.data&&(null===e.data?e.data=d.data:p(e.data,d.data)),d.generics){var f=d.generics[r];"object"!=typeof f&&(f={}),e.generics[r]={default:f.default}}for(r in d.properties)e.properties[r]=d.properties[r];for(r in d.relations)e.relations[r]=d.relations[r];for(r in d.methods)e.methods[r]=d.methods[r];for(var h=0;h<d.ancestors.length;h++)n.indexOf(d.ancestors[h])<0&&n.push(d.ancestors[h])}for(r in"object"==typeof t.data&&(null===e.data?e.data=t.data:p(e.data,t.data)),t.properties){var v=t.properties[r];s.indexOf(v)>=0?v={type:v}:s.indexOf(v.type)<0&&v.optionalTypes&&v.optionalTypes.length>0&&(v.type=v.optionalTypes[0]),void 0===v.value&&(v.type===String?v.value="":v.type===Number?v.value=0:v.type===Boolean?v.value=!1:v.type===Array?v.value=[]:v.value=null),e.properties[r]={type:v.type,optionalTypes:v.optionalTypes,value:v.value,filter:v.filter,observer:v.observer,public:!!(void 0===v.public?e.options.publicProperties:v.public),availability:v.availability,observeAssignments:!!v.observeAssignments}}if(t.lifetimes&&"object"==typeof t.lifetimes)for(r in t.lifetimes)e.lifetimes[r]=t.lifetimes[r];for(o=0;o<a.length;o++)void 0===e.lifetimes[a[o]]&&(e.lifetimes[a[o]]=t[a[o]]);for(r in t.listeners)e.listeners[r]=t.listeners[r];var g=t.observers;if(g instanceof Array)for(o=0;o<g.length;o++){var _=g[o];e.observers.push({paths:u(_.fields||"**"),observer:_.observer})}else for(r in g)e.observers.push({paths:u(r),observer:g[r]});if(t.pageLifetimes&&"object"==typeof t.pageLifetimes)for(r in t.pageLifetimes)e.pageLifetimes[r]=t.pageLifetimes[r];for(r in t.relations){var b=t.relations[r];e.relations[r]={target:b.target||r,type:b.type,linked:b.linked||c,linkChanged:b.linkChanged||c,unlinked:b.unlinked||c,linkFailed:b.linkFailed||c}}for(r in t.methods)"function"==typeof t.methods[r]&&(e.methods[r]=t.methods[r]);n.push(e)}},l._list=Object.create(null),l.prototype.hasBehavior=function(e){this._unprepared&&l.prepare(this);for(var t=0;t<this.ancestors.length;t++)if(e instanceof l){if(this.ancestors[t]===e)return!0}else if(this.ancestors[t]===l._list[e])return!0;return!1},l.prototype._getAllListeners=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var r=this.ancestors[n];for(var o in r.listeners)Object.prototype.hasOwnProperty.call(e,o)?e[o].push(r.listeners[o]):e[o]=[r.listeners[o]]}return e},l.prototype._addObserversToDataProxy=function(e){for(var t=this.ancestors,n=0;n<t.length;n++)for(var r=this.ancestors[n].observers,o=0;o<r.length;o++){var i=r[o];e.addObserver(i.observer,i.paths)}},l.prototype._getAllLifeTimeFuncs=function(){var e={},t=this.ancestors;a.forEach((function(t){e[t]=r.create("Lifetime Method")}));for(var n=0;n<t.length;n++){var o=t[n];for(var i in o.lifetimes)o.lifetimes[i]&&(e[i]||(e[i]=r.create("Lifetime Method")),e[i].add(o.lifetimes[i]))}return e},l.prototype._getAllPageLifeTimeFuncs=function(){for(var e={},t=this.ancestors,n=0;n<t.length;n++){var o=t[n];for(var i in o.pageLifetimes)o.pageLifetimes[i]&&(e[i]||(e[i]=r.create("Page Lifetime Method")),e[i].add(o.pageLifetimes[i]))}return e},l.callDefinitionFilter=function(e){var t=e.definitionFilter,n=[];return e.behaviors instanceof Array&&e.behaviors.forEach((function(t){(t="string"==typeof t?l._list[t]:t)&&t.definitionFilter&&(n.push(t.definitionFilter),t.definitionFilter.call(null,e))})),"function"==typeof t?function(e){t(e,n)}:null},e.exports=l},function(e,t,n){var r=n(6),o=n(10),i=n(11),a=n(12),s=n(14),c=n(4),u=n(13),l=function(e){d(this,e||null)};l.prototype=Object.create(Object.prototype,{constructor:{value:l,writable:!0,configurable:!0},id:{get:function(){return this.__id},set:function(e){var t=String(e);if(this.__id!==t){if(this.__id=t,this.ownerShadowRoot){var n=this.ownerShadowRoot.__wxHost;n.__idCacheDirty=!0,this.__domElement&&n.__componentOptions.writeIdToDOM&&(this.__domElement.id=t)}c.writeExtraInfoToAttr&&this.__domElement&&this.__domElement.setAttribute("exparser:info-attr-id",t),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"id"})}},configurable:!0},slot:{get:function(){return this.__slot},set:function(e){e=String(e),this.__slot!==e&&(this.__inheritSlots||(this.__slot=e,m(this),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"slot"})))},configurable:!0},attributes:{get:function(){var e=[];if(!this.__attributes)return e;for(var t in this.__attributes)e.push({name:t,value:this.__attributes[t]});return e},set:function(){},configurable:!0},class:{get:function(){return this.classList.getClassNames()},set:function(e){this.classList&&this.classList.setClassNames(e),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"class"})},configurable:!0},style:{get:function(){return this.__domElement?this.__domElement.style:null},set:function(e){return k.call(this,e)},configurable:!0}}),r._setElementSystem(l),i._setElementSystem(l);var d=l.initialize=function(e,t,n){e.__id="",e.__slot="",e.__virtual=!1,e.__inheritSlots=!1,e.__attributes=null,e.__marks=null,e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=n,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=t,e.$$=t,t&&(t.__wxElement=e)};l._clone=function(e,t,n,r){if(e.__id=t.__id,e.__slot=t.__slot,e.__virtual=t.__virtual,e.__inheritSlots=t.__inheritSlots,e.__marks=t.__marks?{}:null,t.__marks)for(var o in t.__marks)e.__marks[o]=t.__marks[o];for(var i in e.__attributes=Object.create(null),t.__attributes)e.__attributes[i]=t.__attributes[i];e.__attached=!1,e.parentNode=null,e.childNodes=[],e.ownerShadowRoot=r,e.__wxSlotParent=null,e.__wxSlotChildren=e.childNodes,e.__subtreeObserversCount=0,e.classList=null,e.__styleSegments=[],e.__methodCaller=e,e.__relationHandler=null,e.__backendExtracted=u.backendExtractedDefault,e.__domElement=n,e.$$=n,n&&(n.__wxElement=e)};var f=function(e){if(!e.parentNode||e.parentNode.__attached){var t=function(e){if(e instanceof l){e.__attached=!0,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.attached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("attached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"attached"}),e.shadowRoot instanceof l&&t(e.shadowRoot);for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r])}};t(e)}},p=function(e){if(e.__attached){var t=function(e){if(e instanceof l){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof l&&t(e.shadowRoot),e.__attached=!1,e.__lifeTimeFuncs&&e.__lifeTimeFuncs.detached.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("detached"),e.__attachedObservers&&!e.__attachedObservers.empty&&o._callSingleObserver(e,"__attachedObservers",{type:"attachStatus",target:e,status:"detached"})}};t(e)}},h=function(e){if(!e.__attached)return f(e);var t=function(e){if(e instanceof l){for(var n=e.childNodes,r=0;r<n.length;r++)t(n[r]);e.shadowRoot instanceof l&&t(e.shadowRoot),e.__lifeTimeFuncs&&e.__lifeTimeFuncs.moved.call(e.__methodCaller,[],e),e.__relationHandler&&e.__relationHandler("moved")}};t(e)},v=function(e,t,n){if(e.__childObservers&&!e.__childObservers.empty||e.__subtreeObserversCount){var r,i=[n];r="add"===t?{type:"childList",target:e,addedNodes:i}:"remove"===t?{type:"childList",target:e,removedNodes:i}:{type:"childList",target:e,addedNodes:i,removedNodes:i},o._callObservers(e,"__childObservers",r)}},g=function(e,t){if(e instanceof l&&(!t.__wxHost.__idCacheDirty||!t.__slotCacheDirty)){var n=function(e){e.__id&&(t.__wxHost.__idCacheDirty=!0),void 0!==e.__slotName&&(t.__slotCacheDirty=!0);for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof l&&n(i)}};n(e)}};l._updateIdMap=function(e){var t=e.shadowRoot;if(e.__idCacheDirty){e.__idCacheDirty=!1;var n=e.__idCache=Object.create(null),r=function(e){e.__id&&(n[e.__id]||(n[e.__id]=e));for(var t=e.childNodes,o=0;o<t.length;o++)t[o]instanceof l&&r(t[o])};r(t)}};var _=function(e){if(e.__hostAssociated&&e.__slotCacheDirty){e.__slotCacheDirty=!1;var t,n=e.__wxHost,r=Object.create(null);t=void 0!==n.__singleSlot?{"":n.__singleSlot}:n.__slots;var o=function(e){void 0!==e.__slotName&&(r[e.__slotName]||(r[e.__slotName]=e));for(var t=e.childNodes,n=0;n<t.length;n++)t[n]instanceof l&&o(t[n])};o(e),void 0!==n.__singleSlot?n.__singleSlot!==r[""]&&(r[""]&&(r[""].__wxSlotChildren=n.childNodes),b(n,r,t,!0),n.__singleSlot&&(n.__singleSlot.__wxSlotChildren=[]),n.__singleSlot=r[""]||null):(b(n,r,t,!1),n.__slots=r)}},b=function(e,t,n,r){var o=e.childNodes,i=0;if(r){var a=t[""];if(a)for(;i<o.length;i++)w(a,o[i],null,!1,!1,!1,-1);else if(a=n[""])for(;i<o.length;i++)w(a,null,o[i],!0,!1,!1,i)}else{var s=function(e){for(var r=0;r<e.length;r++){var o=e[r],i=o.__slot||"",a=t[i];a?w(a,o,null,!1,!0,!0):(a=n[i])&&w(a,null,o,!0,!0,!0),o.__inheritSlots&&s(o.childNodes)}};s(o)}},y=function(e,t,n,r){for(var o=function(e,t,r){var i=e.childNodes,a=0;for(t&&(a=i.indexOf(t)+(r?0:1));a<i.length;a++){var s=i[a];if(s.__slot===n)return s;if(s.__inheritSlots){var c=o(s,null,!1);if(c)return c}}return null};t!==e;t=t.parentNode){var i=o(t.parentNode,t,r);if(i)return i;r=!1}return null},m=function(e){for(var t=e.parentNode;t&&t.__inheritSlots;)t=t.parentNode;if(t&&void 0===t.__singleSlot){var n=e.__slot||"",r=t.__slots[n];if(r){var o=y(t,e,n,!1);w(r,e,o,!1,!0,!0)}else(r=e.__wxSlotParent)&&w(r,null,e,!0,!0,!0)}},w=function(e,t,n,r,o,i,a){if(r&&(n.__wxSlotParent=null),o&&(a=e.__wxSlotChildren.indexOf(n)),t){var s=t.__wxSlotParent;if(t.__wxSlotParent=e,s&&i){var u=s.__wxSlotChildren.indexOf(t);s.__wxSlotChildren.splice(u,1),s===e&&u<a&&a--}}var d=!1;(t&&t.__backendExtracted||n&&n.__backendExtracted)&&(d=!0),d||function(e,t,n,r,o){var i=e;if(i instanceof l){for(;i.__virtual;){var a=i.__wxSlotParent;if(!a){i=null;break}if(t&&!n){var s=a.__wxSlotChildren.indexOf(i);n=a.__wxSlotChildren[s+1]}i=a}i instanceof l&&(i=i.__domElement)}if(i){var c=r,u=null,d=null;if(t)if(t.__virtual){var f=document.createDocumentFragment(),p=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?p(n):f.appendChild(n.__domElement)}};p(t),u=f}else u=t.__domElement;if(n)if(n.__virtual){var h=e,v=0;if(r){var g=function(e){for(var t=0;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];n.__virtual?g(n):i.removeChild(n.__domElement)}};g(n),c=!1,v=o+1}else h=n.__wxSlotParent,v=n===t?o:h.__wxSlotChildren.indexOf(n);if(t){var _=function(e,t){for(;t<e.__wxSlotChildren.length;t++){var n=e.__wxSlotChildren[t];if(!n.__virtual)return n;var r=_(n,0);if(r)return r}};n=null;for(var b=h;!(n=_(b,v))&&b.__virtual;b=b.__wxSlotParent)v=b.__wxSlotParent.__wxSlotChildren.indexOf(b)+1;n&&(d=n.__domElement)}}else d=n.__domElement;c?u?i.replaceChild(u,d):i.removeChild(d):u&&(d?i.insertBefore(u,d):i.appendChild(u))}else if(t&&t.__wxSlotParent){var y=function(e){if(e.__virtual)for(var t=0;t<e.__wxSlotChildren.length;t++)y(e.__wxSlotChildren[t]);else{var n=e.__domElement;n&&n.parentNode&&n.parentNode.removeChild(n)}};y(t)}}(e,t,n,r,a),c.writeExtraInfoToAttr&&(r&&n instanceof l&&n.__domElement&&n.__domElement.removeAttribute("exparser:info-in-slot-of"),t instanceof l&&t.__domElement&&(void 0!==e.__slotName&&e.ownerShadowRoot?t.__domElement.setAttribute("exparser:info-in-slot-of",e.ownerShadowRoot.__wxHost.__componentInstanceId):t.__domElement.removeAttribute("exparser:info-in-slot-of"))),o&&(-1===a&&(a=e.__wxSlotChildren.length),t?e.__wxSlotChildren.splice(a,r?1:0,t):e.__wxSlotChildren.splice(a,r?1:0))},O=function(e,t){for(var n=e.childNodes,r=0;r<n.length;r++){var o=n[r];t(e,o),o.__inheritSlots&&O(o,t)}},S=l.insertChildToElement=function(e,t,n,r){if(void 0!==e.__slotName)return!1;var i=n>=0?e.childNodes[n]:null;r&&t===i&&(r=!1);var a=null,s=e,c=e;if(t){a=t.parentNode,t.parentNode=e;var u=e.__subtreeObserversCount;if(a){var l=a.childNodes.indexOf(t);a.childNodes.splice(l,1),a===e&&l<n&&n--,u-=a.__subtreeObserversCount}u&&o._updateSubtreeCaches(t,u)}for(var d=e;d&&d.__inheritSlots;)d=d.parentNode;for(var b=!d||!d.__slots,m=!b||e.__inheritSlots,S=a;S&&S.__inheritSlots;)S=S.parentNode;var I=!S||!S.__slots,E=!I||a&&a.__inheritSlots;if(b)void 0!==e.__singleSlot&&(s=c=e.__singleSlot),s?w(s,t,i,r,m,E,n):t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,E,!1),t&&!I&&t.__inheritSlots&&O(t,(function(e,t){w(e,t,null,!1,!0,!0,-1)}));else{var C="";if(t&&(C=t.__slot||"",s=d.__slots[C]||null),i&&(c=d.__slots[i.__slot||""]||null),i&&c&&r&&w(c,null,i,r,!0,!1),t)if(s){var T=i?y(d,i,C,!r):y(d,e,C,!1);w(s,t,T,!1,!0,E)}else t.__wxSlotParent&&w(t.__wxSlotParent,null,t,!0,E,!1);i&&r&&i.__inheritSlots&&O(i,(function(e,t){w(e,t,null,!1,!0,!0,-1)})),t&&t.__inheritSlots&&O(t,(function(t,n){var o=n.__slot||"",a=d.__slots[o]||null;if(a){var s=i?y(d,i,o,!r):y(d,e,o,!1);w(a,n,s,!1,!0,!0)}else n.__wxSlotParent&&w(n.__wxSlotParent,null,n,!0,!0,!1)}))}return r&&(e.__subtreeObserversCount&&o._updateSubtreeCaches(i,-e.__subtreeObserversCount),i.parentNode=null),-1===n&&(n=e.childNodes.length),t?e.childNodes.splice(n,r?1:0,t):e.childNodes.splice(n,r?1:0),e.ownerShadowRoot&&(r&&g(i,e.ownerShadowRoot),t&&g(t,e.ownerShadowRoot),_(e.ownerShadowRoot)),r&&(p(i),v(e,"remove",i)),t&&(a?h(t):f(t),a===e?v(e,"move",t):(a&&v(a,"remove",t),v(e,"add",t))),!0},I=function(e,t,n,r){if(t&&e.ownerShadowRoot!==t.ownerShadowRoot)throw new Error("Cannot move the node from one shadow tree to another shadow tree.");var o=r?n:t,i=-1;return n&&(i=e.childNodes.indexOf(n))<0?null:S(e,t,i,r)?o:null};l._attachShadowRoot=function(e){var t=e.__wxHost;t.__wxSlotChildren=[e],w(t,e,null,!1,!1,0),e.__hostAssociated=!0,_(e)},l.appendChild=function(e,t){return I(e,t,null,!1)},l.insertBefore=function(e,t,n){return I(e,t,n,!1)},l.removeChild=function(e,t){return I(e,null,t,!0)},l.replaceChild=function(e,t,n){return I(e,t,n,!0)},l.prototype.appendChild=function(e){return I(this,e,null,!1)},l.prototype.insertBefore=function(e,t){return I(this,e,t,!1)},l.prototype.removeChild=function(e){return I(this,null,e,!0)},l.prototype.replaceChild=function(e,t){return I(this,e,t,!0)};var E=function(e){var t=!0,n=!0;if(e instanceof l?(e.__backendExtracted=!0,e.$$=e.__domElement=null,n=!1):e instanceof a&&(e.__backendExtracted=!0,e.$$=e.__domElement=null,t=!1,n=!1),t&&e.__wxSlotChildren)for(var r=0;r<e.__wxSlotChildren.length;r++){var o=e.__wxSlotChildren[r];E(o)}else if(n&&e.childNodes)for(var i=0;i<e.childNodes.length;i++)E(e.childNodes[i])};l.extractBackend=function(e){if(e.__backendExtracted)return null;var t=e.__domElement;return E(e),t};var C=function(e,t){if(!t){var n=s.toElement(e.__domElement);return e.$$=e.__domElement=n,n}if(e.__domElement.tagName.toUpperCase()===t.tagName)e.$$=e.__domElement=t;else{var r=s.toElement(e.__domElement);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null},T=function(e,t,n){var r=e instanceof l&&e.__virtual,o=t?t.childNodes[n]:void 0,i=!0,s=!0,c=null;if(e instanceof l)e.__backendExtracted=!1,r||(c=C(e,o)),s=!1;else if(e instanceof a)e.__backendExtracted=!1,c=function(e,t){if(!t){var n=document.createTextNode(e.textContent);return e.$$=e.__domElement=n,n}if(void 0!==t.textContent)t.textContent=e.textContent,e.$$=e.__domElement=t;else{var r=document.createTextNode(e.textContent);e.$$=e.__domElement=r,t.parentNode.replaceChild(r,t)}return null}(e,o),i=!1,s=!1;else{var u=document.createDocumentFragment();if(u.__wxSlotChildren=e.__wxSlotChildren,o&&o.childNodes)for(;o.childNodes.length;)u.appendChild(o.childNodes[0]);c=function(e,t){if(!t)return e;for(;e.childNodes&&t.childNodes&&t.childNodes.length;)e.appendChild(t.childNodes[0]);return t.parentNode.replaceChild(e,t),null}(e,o),e=u}c?(t.appendChild(c),o=c):o=t?t.childNodes[n]:void 0;var d=0;if(i&&e.__wxSlotChildren)for(var f=0;f<e.__wxSlotChildren.length;f++){var p=e.__wxSlotChildren[f];if(r)n=T(p,t,n);else if(p.asShadowRoot){for(var h=0;h<p.asShadowRoot.childNodes.length;h++)d=T(p.asShadowRoot.childNodes[h],o,d);e.shadowRoot=o,o.__wxHost=e,e.__wxSlotChildren[0]=o,o.__wxSlotParent=e,e.__singleSlot===p&&(e.__singleSlot=o)}else d=T(p,o,d)}else if(s&&e.childNodes)for(var v=0;v<e.childNodes.length;v++)d=T(e.childNodes[v],o,d);if(r)return n;for(;o.childNodes.length>d;)o.removeChild(o.childNodes[d]);return n+1};l.injectBackend=function(e,t){if(e.__backendExtracted){var n=document.createDocumentFragment();n.appendChild(t),T(e,n,0)}},l.prototype.triggerEvent=function(e,t,n){r.triggerEvent(this,e,t,n)},l.prototype.dispatchEvent=function(e){r.dispatchEvent(this,e)},l.prototype.addListener=function(e,t,n){r.addListenerToElement(this,e,t,n)},l.prototype.removeListener=function(e,t,n){r.removeListenerFromElement(this,e,t,n)},l.setMethodCaller=function(e,t){e.__methodCaller=t},l.getMethodCaller=function(e){return e.__methodCaller},l.prototype.getAttribute=function(e){if(!this.__attributes)return null;var t=this.__attributes[e];return void 0===t?null:t},l.prototype.setAttribute=function(e,t){this.__attributes||(this.__attributes=Object.create(null)),t=String(t),this.__attributes[e]=t,this.__domElement&&this.__domElement.setAttribute(e,t)},l.prototype.removeAttribute=function(e){this.__attributes&&(delete this.__attributes[e],this.__domElement&&this.__domElement.removeAttribute(e))},l.prototype.setMark=function(e,t){this.__marks||(this.__marks={}),this.__marks[e]=t},l.prototype.collectMarks=function(){for(var e={},t=this;t;t=t.parentNode)if(t.__marks)for(var n in t.__marks)hasOwnProperty.call(e,n)||(e[n]=t.__marks[n]);return e};var k=l.prototype.setNodeStyle=function(e,t){this.__styleSegments[t||0]=e;var n=this.__styleSegments.join(";");if(this.__domElement&&this.ownerShadowRoot&&this.ownerShadowRoot.__childrenPropsFilter){var r=this.ownerShadowRoot.__childrenPropsFilter.style;if("function"==typeof r)return void this.__domElement.setAttribute("style",r.call(this,n))}this.__domElement&&this.__domElement.setAttribute("style",n),(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&o._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:"style"})};l.replaceDocumentElement=function(e,t){e.__attached||(t.parentNode.replaceChild(e.__domElement,t),f(e))},l.pretendAttached=function(e){e.__attached||f(e)},l.pretendDetached=function(e){e.__attached&&p(e)},l.isAttached=function(e){return e.__attached},l.setSlotName=function(e,t){if(t=null==t?"":String(t),void 0===e.__slotName){if(0!==e.childNodes.length||0!==e.__wxSlotChildren.length)return;e.__wxSlotChildren=[]}e.__slotName=t,e.ownerShadowRoot&&(e.ownerShadowRoot.__slotCacheDirty=!0,_(e.ownerShadowRoot))},l.setInheritSlots=function(e){e.__singleSlot||e.__slots||e.__wxSlotChildren.length||(e.__wxSlotChildren=[],e.__inheritSlots=!0)},l.getInheritSlots=function(e){return e.__inheritSlots};var A=function(e,t){var n=e.match(/^(#[_a-zA-Z][-_a-zA-Z0-9:]*|)((?:\.-?[_a-zA-Z][-_a-zA-Z0-9]*)+|)$/);if(!n)return null;var r=n[1].slice(1),o=n[2].split(".");return o.shift(),r||o.length?{id:r,classes:o,relation:t||""}:null},P=l.parseSelector=function(e){for(var t=String(e||"").split(","),n=[],r=!1,o=0;o<t.length;o++){for(var i=t[o].split(/( |\t|>+)/g),a=[],s="",c=0;c<i.length;c++){var u=i[c];if(u&&" "!==u&&"\t"!==u)if(">"!==u[0]){var l=A(u,s);if(s="",!l)break;a.push(l)}else{if(""!==s)break;s=u,">>>"===u&&(r=!0)}}c===i.length&&a.length&&n.push(a)}return n.length?{crossShadow:r,union:n}:null},D=function(e,t,n,r,o){if(t===e)return!1;var i=n[r],a=!0;i.id&&i.id!==t.__id&&(a=!1);for(var s=i.classes,c=0;a&&c<s.length;c++)t.classList.contains(s[c])||(a=!1);if(!a&&">"===o)return!1;var u=t;if(a&&0===r){if(null===e)return!0;for(u=u.parentNode;u;u=u.parentNode)if(u===e)return!0;if(">>>"!==o)return!1;u=t,a=!1}var l=a?i.relation:o;do{u.parentNode?u=u.parentNode:">>>"===l?u=u.__wxHost:">>>"===o?(a=!1,u=u.__wxHost):u=null,u===e&&(u=null)}while(u&&u.__virtual);if(!u)return!1;if(a){if(D(e,u,n,r-1,l))return!0;if(">>>"!==o)return!1}return D(e,u,n,r,o)},j=function(e,t,n){if(n.__virtual)return!1;for(var r=e.union,o=0;o<r.length;o++){var i=r[o];if(D(t,n,i,i.length-1,">"))return!0}return!1},x=function(e,t,n,r,o){if(j(t,n,r)&&(e.push(r),o))return!0;if(r.shadowRoot&&t.crossShadow&&((r.ownerShadowRoot?r.ownerShadowRoot.__wxHost.__componentOptions.domain:c.domain)===r.__componentOptions.domain&&x(e,t,n,r.shadowRoot,o)&&o))return!0;for(var i=r.childNodes,a=0;a<i.length;a++)if(i[a]instanceof l&&x(e,t,n,i[a],o)&&o)return!0;return!1};l.prototype.querySelector=function(e){var t="object"==typeof e?e:P(e);if(!t)return null;var n=[];return x(n,t,this,this,!0),n[0]||null},l.prototype.querySelectorAll=function(e){var t="object"==typeof e?e:P(e),n=[];return t?(x(n,t,this,this,!1),n):[]},l.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&j(n,null,t)},l.prototype.matchSelector=function(e,t){var n="object"==typeof e?e:P(e);return!!n&&j(n,this,t)},e.exports=l},function(e,t,n){var r=n(3),o=function(){};o.prototype=Object.create(Object.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),o.create=function(e){var t=new o;return t._cb=e,t._noSubtreeCb=function(t){t.target===this&&e.call(this,t)},t._binded=[],t},o.prototype.observe=function(e,t){var n=0,o=(t=t||{}).subtree?this._cb:this._noSubtreeCb;t.properties&&(e.__propObservers||(e.__propObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__propObservers,id:e.__propObservers.add(o),subtree:t.subtree?e:null}),n++),t.childList&&(e.__childObservers||(e.__childObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__childObservers,id:e.__childObservers.add(o),subtree:t.subtree?e:null}),n++),t.characterData&&(e.__textObservers||(e.__textObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__textObservers,id:e.__textObservers.add(o),subtree:t.subtree?e:null}),n++),t.subtree&&i(e,n),t.attachStatus&&(e.__attachedObservers||(e.__attachedObservers=r.create("Observer Callback")),this._binded.push({funcArr:e.__attachedObservers,id:e.__attachedObservers.add(o),subtree:null}))},o.prototype.disconnect=function(){for(var e=this._binded,t=0;t<e.length;t++){var n=e[t];n.funcArr.remove(n.id),n.subtree&&i(n.subtree,-1)}this._binded=[]};var i=o._updateSubtreeCaches=function(e,t){e.__subtreeObserversCount+=t;var n=e.childNodes;if(n)for(var r=0;r<n.length;r++)i(n[r],t)};o._callObservers=function(e,t,n){do{e[t]&&e[t].call(e,[n]),e=e.parentNode}while(e&&e.__subtreeObserversCount)},o._callSingleObserver=function(e,t,n){e[t]&&e[t].call(e,[n])},e.exports=o},function(e,t){var n=function(){},r=/(~|\^+)?-?[_0-9a-z][-_0-9a-z]*/gi,o=null;n._setElementSystem=function(e){o=e,n._setElementSystem=null};var i=Object.prototype.hasOwnProperty;n.create=function(e,t){var r=new n;for(var o in r._prefix="",r._addOriginalClass=!1,r._alias=t,r._resolvedAlias={},t)r._resolvedAlias[o]="";return r._rawNames=[],r._elem=e,r._owner=null,r};var a=function(e){var t="",n=e._rawNames,r=e._prefix,o=e._owner?e._owner._resolvedAlias:null,a=e._addOriginalClass;r&&(r+="--");for(var s=0;s<n.length;s++){var c=n[s];if(s&&(t+=" "),o&&i.call(o,c))t+=o[c];else if("~"===c[0])t+=c.slice(1);else if("^"===c[0]){c=c.slice(1);for(var u=e._owner||null;"^"===c[0];)c=c.slice(1),u=u?u._owner:null;var l=u?u._prefix:"";l&&(l+="--"),t+=l+c}else a&&(t+=c+" "),t+=r+c}return t},s=function(e){var t=e._elem.__domElement;if(t){var n=a(e);n?t.setAttribute("class",n):t.removeAttribute("class")}},c=function(e){var t=e.classList;t instanceof n&&(t._alias&&u(t),s(t));for(var r=e.childNodes,i=0;i<r.length;i++)r[i]instanceof o&&c(r[i])},u=function(e){var t=e._owner;if(!t)return!1;var n=!1;for(var r in e._alias){var a=e._alias[r],s=[];if(a)for(var u=0;u<a.length;u++){var l=a[u];if(i.call(t._alias,l)){var d=t._resolvedAlias[l];s.push(d)}else{var f=e._prefix&&l?e._prefix+"--"+l:l;s.push(f)}}var p=s.join(" ");e._resolvedAlias[r]!==p&&(n=!0,e._resolvedAlias[r]=p)}n&&e._elem.shadowRoot instanceof o&&c(e._elem.shadowRoot)};n.prototype.toggle=function(e,t){var n=this._rawNames.indexOf(e);void 0===t&&(t=n<0),t?n<0&&(this._rawNames.push(e),s(this)):n>=0&&(this._rawNames.splice(n,1),s(this))},n.prototype.contains=function(e){for(var t=this._rawNames,n=0;n<t.length;n++){var r=t[n];if("~"===r[0]){if(r.slice(1)===e)return!0}else if("^"===r[0]){for(var o=1;"^"===r[o];)o++;if(r.slice(o)===e)return!0}else if(r===e)return!0}return!1},n.prototype._setOwnerOptions=function(e,t,n){var r=this._prefix;this._prefix=t,r!==t&&(this._addOriginalClass=n,this._owner=e,this._alias&&u(this),s(this))},n.prototype._setAlias=function(e,t){var n=this._owner,o=String(t).match(r);this._alias[e]=o;var a=[];if(o)for(var s=0;s<o.length;s++){var u=o[s];n&&i.call(n._alias,u)?a.push(n._resolvedAlias[u]):a.push(this._prefix?this._prefix+"--"+u:u)}this._resolvedAlias[e]=a.join(" "),c(this._elem.shadowRoot)},n.prototype.setClassNames=function(e){e=null==e?"":String(e),this._rawNames=e.match(r)||[],s(this)},n.prototype.getClassNames=function(){return a(this)},n.prototype.getPrefix=function(){return this._prefix},n.prototype.getAddOriginalClass=function(){return this._addOriginalClass},n.prototype.getRawNames=function(){return this._rawNames},e.exports=n},function(e,t,n){var r=n(10),o=n(4),i=n(13),a=function(){};a.prototype=Object.create(Object.prototype,{constructor:{value:a,writable:!0,configurable:!0}});var s=a._advancedCreate=function(e,t){var n=new a;n.__slot="";var r=null;return i.backendExtractedDefault||"dom"!==o.documentBackend?n.__textContent=e:(r=document.createTextNode(e||"")).__wxElement=n,n.$$=n.__domElement=r,n.__backendExtracted=i.backendExtractedDefault,n.__subtreeObserversCount=0,n.parentNode=null,n.ownerShadowRoot=t,n};a.create=function(e){return s(e,null)},Object.defineProperty(a.prototype,"textContent",{get:function(){return this.__domElement?this.__domElement.textContent:this.__textContent},set:function(e){this.__domElement?this.__domElement.textContent=e:this.__textContent=String(e),(this.__textObservers&&!this.__textObservers.empty||this.__subtreeObserversCount)&&r._callObservers(this,"__textObservers",{type:"characterData",target:this})}}),e.exports=a},function(e,t){t.backendExtractedDefault=!1,t.enableBackendExtractedDefault=function(){t.backendExtractedDefault=!0},t.disableBackendExtractedDefault=function(){t.backendExtractedDefault=!1}},function(e,t){var n=function(e){this.tagName=e,this.id="",this.attrs={}};n.toElement=function(e){var t=document.createElement(e.tagName);for(var n in e.id&&(t.id=e.id),e.attrs)t.setAttribute(n,e.attrs[n]);return t},n.fromElement=function(e){var t=new n(e.tagName);t.id=e.id;for(var r=e.attributes,o=0;o<r.length;o++)t.attrs[r[o].name]=r[o].value;return t},n.prototype.cloneNode=function(){var e=new n;for(var t in e.id=this.id,this.attrs)e.attrs[t]=this.attrs[t];return e},n.prototype.removeAttribute=function(e,t){delete this.attrs[e]},n.prototype.setAttribute=function(e,t){this.attrs[e]=t},n.prototype.getAttribute=function(e){return this.attrs[e]},e.exports=n},function(e,t,n){var r=n(3),o=n(5),i=n(16),a=n(6),s=n(8),c=n(9),u=n(17),l=n(10),d=n(11),f=n(14),p=n(4),h=n(13),v=n(7),g=a.addListenerToElement,_=v.parseSinglePath,b=o.deepCopy,y=function(){};y.prototype=Object.create(c.prototype,{constructor:{value:y,writable:!0,configurable:!0},data:{get:function(){return this.__dataProxy._data},set:function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace([n],e[n]);t.doUpdates()},configurable:!0},$:{get:function(){return c._updateIdMap(this),this.__idCache},set:function(){}}});var m=function(){};m.prototype=Object.create(Object.prototype),a._setComponent(y);var w=null;y._setDefaultTemplateEngine=function(e){w=e,y._setDefaultTemplateEngine=null};var O=function(e,t,n){if(n)for(var r=0;r<n.length;r++)if(s.matchTypeWithValue(n[r],e))return e;return t===String?null==e?"":String(e):t===Number?isFinite(e)?Number(e):0:t===Boolean?!!e:t===Array?e instanceof Array?e:[]:t===Object?"object"==typeof e?e:null:void 0===e?null:e};i.setPropUpdater((function(e,t,n,o){var i=e[0],a=this.__propData[i];if(n=O(n,t.type,t.optionalTypes),!(!t.availability||function(e,t,n,o){var i=[e.ownerShadowRoot?e.ownerShadowRoot.__wxHost.__componentOptions.domain:void 0,o?void 0:n];return!!r.safeCallback("Availablity Controller",t,e.__methodCaller,i,e)}(this,t.availability,n,o)))return a;if(t.filter){var s=r.safeCallback("Property Filter",t.filter,this.__methodCaller,o?[]:[n,a,e],this);void 0!==s&&(n=s)}return this.__domElement&&this.__componentOptions.reflectToAttributes&&this.__propPublic[i]&&function(e,t,n){var r=t.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()})),o=typeof n;"boolean"===o?n?e.__domElement.setAttribute(r,""):e.__domElement.removeAttribute(r):"object"===o?e.__domElement.setAttribute(r,JSON.stringify(n)):e.__domElement.setAttribute(r,n)}(this,i,n),n})),i.setPropObserver((function(e,t,n,o,i,a){if(o.observeAssignments||e!==t){var s=n[0];this.__propertyChangeListeners&&this.__propertyChangeListeners[s]&&!a&&r.safeCallback("Property Observer",this.__propertyChangeListeners[s],this.__methodCaller,[e],this),o.observer&&r.safeCallback("Property Observer",o.observer,this.__methodCaller,i?[]:[e,t,n],this),o.public&&(this.__propObservers&&!this.__propObservers.empty||this.__subtreeObserversCount)&&l._callObservers(this,"__propObservers",{type:"properties",target:this,propertyName:s})}}));var S=function(e,t,n){t.__relationLinks||(t.__relationLinks={});for(var r=t.__relationLinks[n]=[],o=0;o<e.length;o++)r.push(null)},I=function(e,t,n,o,i){for(var a=y.prototype.hasBehavior,c="parent"===o,u="shadowHost"===o,l=0;l<e.length;l++){var d,f=e[l];if(d="object"!=typeof f.target?s._list[f.target]:f.target){var p=t[l],h=null;if(!i)for(var v=u?n.ownerShadowRoot&&n.ownerShadowRoot.__wxHost:n.parentNode;v;v=u?v.ownerShadowRoot&&v.ownerShadowRoot.__wxHost:v.parentNode)if(!v.__virtual){if(a.call(v,d)){var g;g=c?v.__relationMap.child:u?v.__relationMap.shadowContent:v.__relationMap.descendant;for(var _=0;_<g.length;_++){var b,m=g[_];if((b="object"!=typeof m.target?s._list[m.target]:m.target)&&a.call(n,b)){h={parent:v,relation:m};break}}}if(c||h)break}t[l]=h,!p||h&&p.parent===h.parent||(r.safeCallback("Relation Unlinked Callback",p.relation.unlinked,p.parent.__methodCaller,[n.__methodCaller],p.parent),r.safeCallback("Relation Unlinked Callback",f.unlinked,n.__methodCaller,[p.parent.__methodCaller],n)),!h||p&&p.parent===h.parent||(r.safeCallback("Relation Linked Callback",h.relation.linked,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Linked Callback",f.linked,n.__methodCaller,[h.parent.__methodCaller],n)),p&&h&&p.parent===h.parent&&(r.safeCallback("Relation Link Changed Callback",h.relation.linkChanged,h.parent.__methodCaller,[n.__methodCaller],h.parent),r.safeCallback("Relation Link Changed Callback",f.linkChanged,n.__methodCaller,[h.parent.__methodCaller],n)),i||h||r.safeCallback("Relation Link Failed Callback",f.linkFailed,n.__methodCaller,[],n)}}},E=function(e,t,n){if(e instanceof c){var r=0,o=null;if(e instanceof y){for(e.__pageLifeTimeFuncs[t]&&e.__pageLifeTimeFuncs[t].call(e.__methodCaller,n||[]),o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n);e=e.shadowRoot}for(o=e.childNodes,r=0;r<o.length;r++)E(o[r],t,n)}};y._list={},y.register=function(e){var t=e.options||{},n=s.create(e),r=void 0!==t.classPrefix?t.classPrefix:p.classPrefix;null!=r||(r=n.is||"");var o=new m;return o._unprepared=n,o.is=e.is||"",o.behavior=n,o.protoFunc=null,o.props=null,o.template=null,o.innerEvents=null,o.generics=n.generics,o.initiator=n.initiator||null,o.options={availability:t.availability||p.availability,domain:t.domain||p.domain,writeOnly:!!(void 0!==t.writeOnly?t.writeOnly:p.writeOnly),allowInWriteOnly:!!(void 0!==t.allowInWriteOnly?t.allowInWriteOnly:p.allowInWriteOnly),classPrefix:r,addGlobalClass:!!(void 0!==t.addGlobalClass?t.addGlobalClass:p.addGlobalClass),templateEngine:t.templateEngine||p.templateEngine||w,renderingMode:t.renderingMode||p.renderingMode,multipleSlots:!!(void 0!==t.multipleSlots?t.multipleSlots:p.multipleSlots),reflectToAttributes:!!(void 0!==t.reflectToAttributes?t.reflectToAttributes:p.reflectToAttributes),writeFieldsToNode:!!(void 0!==t.writeFieldsToNode?t.writeFieldsToNode:p.writeFieldsToNode),writeIdToDOM:!!(void 0!==t.writeIdToDOM?t.writeIdToDOM:p.writeIdToDOM),separateInnerData:!!(void 0!==t.separateInnerData?t.separateInnerData:p.separateInnerData),innerDataExclude:t.innerDataExclude||p.innerDataExclude,listenerChangeLifeTimes:!!(void 0!==t.listenerChangeLifeTimes?t.listenerChangeLifeTimes:p.listenerChangeLifeTimes),randomizeTagName:!!(void 0!==t.randomizeTagName?t.randomizeTagName:p.randomizeTagName),virtualHost:!!(void 0!==t.virtualHost?t.virtualHost:p.virtualHost)},n._unprepared||y.prepare(o),void 0!==e.is&&(y._list[n.is]=o),o},y.isPrepared=function(e){return!e._unprepared},y.prepare=function(e){var t=e._unprepared;if(t){e._unprepared=null;var n=e.options,r={};t._unprepared&&s.prepare(t),n.writeOnly&&(r.data={value:null});var o=e.props={};Object.keys(t.properties).forEach((function(e){var i=t.properties[e];o[e]={type:i.type,optionalTypes:i.optionalTypes,value:i.value,filter:"function"==typeof i.filter?i.filter:null==i.filter?null:t.methods[i.filter],observer:"function"==typeof i.observer?i.observer:null==i.observer?null:t.methods[i.observer],public:i.public,availability:i.availability,observeAssignments:i.observeAssignments},n.writeFieldsToNode&&(r[e]={enumerable:!0,get:function(){return this.__propData[e]},set:function(t){var n=this.__dataProxy;n.scheduleReplace([e],t),n.doUpdates()}})}));var a=function(){};e.protoFunc=a;var c=a.prototype=Object.create(y.prototype,r);if(c.is=e.is,c.__componentOptions=n,c.__using=t.using,e.dataGroupObserverTree=i._createObserverTree(o),t._addObserversToDataProxy(e.dataGroupObserverTree),c.__behavior=t,n.writeFieldsToNode)for(var u in t.methods)c[u]=t.methods[u];c.__lifeTimeFuncs=t._getAllLifeTimeFuncs(),c.__pageLifeTimeFuncs=t._getAllPageLifeTimeFuncs();var l=t.relations,d=c.__relationMap={};for(var f in l){var p=l[f],h=p.type;d[h]?d[h].push(p):d[h]=[p]}var v=[];d.parent&&v.push((function(e){I(this.__relationMap.parent,this.__relationLinks.parent,this,"parent","detached"===e)})),d.ancestor&&v.push((function(e){I(this.__relationMap.ancestor,this.__relationLinks.ancestor,this,"ancestor","detached"===e)})),d.shadowHost&&v.push((function(e){I(this.__relationMap.shadowHost,this.__relationLinks.shadowHost,this,"shadowHost","detached"===e)})),e.relationHandler=function(e){for(var t=0;t<v.length;t++)v[t].call(this,e)};var g={},_={},b=t.data,m="";for(m in b)_[m]=b[m];for(m in o){var w=o[m];_[m]=w.value,g[m]=w.public}var O=_,S=n.separateInnerData,E=n.innerDataExclude;if(E){for(var C in O={},_)E.test(C)||(O[C]=_[C]);S||(_=O)}var T=n.templateEngine;e.template=T.create(t,_,O,n),c.__propPublic=g;var k=t._getAllListeners(),A=e.innerEvents=[];for(var P in k){for(var D=k[P],j=P.indexOf("."),x=P.slice(j+1),R=j<1?"":P.slice(0,j),M=[],N=0;N<D.length;N++){var L=D[N];"function"!=typeof L&&(L=null==L?null:t.methods[L]),M.push(L)}A.push({id:R,name:x,funcs:M})}}};var C=1,T=Object.prototype.hasOwnProperty,k=function(e,t){return function(n){return e.call(t.__methodCaller,n,t)}},A=y._advancedCreate=function(e,t,n,o,a){var s=t;s._unprepared&&y.prepare(s);var u=s.options;!u.availability||function(e,t,n){var o=[t?t.__wxHost.__componentOptions.domain:void 0];return!!r.safeCallback("Availablity Controller",n,e,o)}(s,n,u.availability)||(s=y._list[""]);var l=new(0,s.protoFunc),v=s.generics;l.__generics=v?function(e,t,n){var r={};for(var o in e){var i=e[o],a=t[o];"object"!=typeof a&&(a=y._list[a]),"object"!=typeof a&&null!=i.default&&(a=y._list[i.default]),a&&(r[o]=a)}return r}(v,o||{}):{};var _=null,m=p.documentBackend;if(u.virtualHost){_=null;"dom"===p.documentBackend&&(_=void 0),c.initialize(l,_,n),l.__virtual=!0}else"dom"===m?(_=h.backendExtractedDefault?new f(e):document.createElement(e),c.initialize(l,_,n)):c.initialize(l,null,n);var w=0,O=l.__externalClassAlias={};if(s.behavior.externalClasses){var I=s.behavior.externalClasses;for(w=0;w<I.length;w++)O[I[w]]=null}if(l.classList=d.create(l,O),n){var E=n.__wxHost;l.classList._setOwnerOptions(E.classList,E.__componentOptions.classPrefix,E.__componentOptions.addGlobalClass),p.writeExtraInfoToAttr&&_&&_.setAttribute("exparser:info-class-prefix",E.__componentOptions.classPrefix&&E.__componentOptions.classPrefix+"--")}p.writeExtraInfoToAttr&&_&&(l.__componentInstanceId=C++,_.setAttribute("exparser:info-component-id",l.__componentInstanceId));var T=l.__templateInstance=s.template.createInstance(l,a);l.__propData=T.data;var A=u.separateInnerData;l.__innerData=A?b(l.__propData):null;var P=u.innerDataExclude;if(A&&P){var D={};for(var j in l.__innerData)P.test(j)||(D[j]=l.__innerData[j]);l.__innerData=D}l.__dataProxy=i._advancedCreate(l,l.__propData,l.__innerData,P,s.dataGroupObserverTree,(function(e,t,n,r){l.__templateInstance.updateValues(l,A?l.__innerData:l.__propData,e,t,n,r)})),T.beforeMergeValues&&l.__dataProxy.setBeforeMergeCb((function(e,t,n){l.__templateInstance.beforeMergeValues(e,t,n)})),T.beforeUpdateValues&&l.__dataProxy.setBeforeUpdateCb((function(e){l.__templateInstance.beforeUpdateValues(l,A?l.__innerData:l.__propData,e)})),u.writeOnly&&l.__dataProxy.setHidingValue(!0),l.__idCacheDirty=!1,l.__idCache=T.idMap,null===T.slots[""]&&(T.slots[""]=_),s.options.multipleSlots?l.__slots=T.slots:(l.__singleSlot=T.slots[""]||null,l.__singleSlot&&(l.__singleSlot.__wxSlotChildren=l.childNodes)),T.shadowRoot instanceof c?(l.shadowRoot=T.shadowRoot,c._attachShadowRoot(T.shadowRoot)):_ instanceof f?(l.shadowRoot=_,_.__wxHost=l,l.__domElement.asShadowRoot=T.shadowRoot,l.__wxSlotChildren=[_],_.__wxSlotParent=l):(l.shadowRoot=_,_.__wxHost=l,l.__domElement.appendChild(T.shadowRoot),l.__wxSlotChildren=[_],_.__wxSlotParent=l);for(var x=T.listeners,R=0;R<x.length;R++){var M=x[R];g(M.target,M.name,k(M.func,l))}var N=s.innerEvents;for(w=0;w<N.length;w++){var L=N[w],B=L.id?"this"===L.id?l:l.__idCache[L.id]:l.shadowRoot;if(B)for(var F=L.name,W=L.funcs,U=0;U<W.length;U++)g(B,F,k(W[U],l))}var V=l.__relationMap;return V.parent&&(S(V.parent,l,"parent"),l.__relationHandler=s.relationHandler),V.ancestor&&(S(V.ancestor,l,"ancestor"),l.__relationHandler=s.relationHandler),V.shadowHost&&(S(V.shadowHost,l,"shadowHost"),l.__relationHandler=s.relationHandler),l.__propertyChangeListeners=null,s.initiator&&r.safeCallback("Component Initiator",s.initiator,l.__methodCaller,[],l),l.__lifeTimeFuncs.created.call(l.__methodCaller,[],l),l};y.createWithGenerics=function(e,t,n,r){return"object"==typeof e?A(e.is,e,null,n,r):e?e.indexOf("-")<0&&!t?u.create(e):A(e.toLowerCase(),t||T.call(y._list,e)&&y._list[e]||y._list[""],null,n,r):A("virtual",y._list[""],null,n,r)},y.create=function(e,t,n){return y.createWithGenerics(e,t,null,n)},y.listProperties=function(e){var t=[];for(var n in e.__propPublic)void 0!==e.__propPublic[n]&&t.push(n);return t},y.listPublicProperties=function(e){var t=[];for(var n in e.__propPublic)!0===e.__propPublic[n]&&t.push(n);return t},y.hasProperty=function(e,t){return void 0!==e.__propPublic[t]},y.hasPublicProperty=function(e,t){return!0===e.__propPublic[t]},y.getMethodsFromDef=function(e){return e.behavior._unprepared&&s.prepare(e.behavior),e.behavior.methods},y.getMethod=function(e,t){return e.__behavior.methods[t]},y.getComponentOptions=function(e){return e.__componentOptions},y.prototype.triggerLifeTime=function(e,t){this.__lifeTimeFuncs[e].call(this.__methodCaller,t||[])},y.prototype.triggerPageLifeTime=function(e,t){E(this,e,t)},y.prototype.hasBehavior=function(e){return"object"!=typeof e&&Object.prototype.hasOwnProperty.call(this.__using,e)&&(e=this.__using[e]),!!this.__behavior&&this.__behavior.hasBehavior(e)},y.prototype.getRootBehavior=function(){return this.__behavior},y.prototype.getRelationNodes=function(e){var t=this.__behavior.relations[e];if(!t)return null;if("parent"===t.type||"ancestor"===t.type||"shadowHost"===t.type){for(var n=this.__relationMap[t.type],r=0;r<n.length&&n[r]!==t;r++);return this.__relationLinks[t.type][r]?[this.__relationLinks[t.type][r].parent]:[]}return function(e,t){var n=[],r=t.type,o="child"===r,i="shadowContent"===r,a=function(r){for(var s=r.childNodes,u=0;u<s.length;u++){var l=s[u];if(l instanceof c)if(l.__virtual)a(l);else{var d;if(l.__relationLinks)if(d=o?l.__relationLinks.parent:i?l.__relationLinks.shadowHost:l.__relationLinks.ancestor)for(var f=0;f<d.length;f++){var p=d[f];if(p&&p.parent===e&&p.relation===t){n.push(l);break}}i&&l instanceof y&&a(l.shadowRoot),o||a(l)}}};return a(i?e.shadowRoot:e),n}(this,t)},y.prototype.hasExternalClass=function(e){return T.call(this.__externalClassAlias,e)},y.prototype.setExternalClass=function(e,t){this.classList._setAlias(e,t)},y.prototype.setPropertyChangeListener=function(e,t){this.__propertyChangeListeners||(this.__propertyChangeListeners={}),this.__propertyChangeListeners[e]=t},y.prototype.replaceDataOnPath=function(e,t){this.__dataProxy.scheduleReplace(e,t)},y.prototype.isInnerDataExcluded=function(e){var t=this.__componentOptions.innerDataExclude;return!!t&&t.test(e)},y.getInnerData=function(e){return e.__innerData},y.getDataProxy=function(e){return e.__dataProxy},y.replaceWholeData=function(e,t,n){e.__propData=t,e.__dataProxy.replaceWholeData(t,n)},y.prototype.applyDataUpdates=function(){this.__dataProxy.doUpdates()},y.prototype.setData=function(e){var t=this.__dataProxy;for(var n in e)t.scheduleReplace(_(n),e[n]);t.doUpdates()},e.exports=y},function(e,t,n){var r=n(3),o=n(5),i=null,a=null,s=Object.prototype.hasOwnProperty,c=o.deepCopy,u=function(e,t,n,r,o,i){this._data=t,this._innerData=n,this._innerDataExclude=r,this._comp=e,this._updateCb=i,this._beforeMergeCb=null,this._beforeUpdateCb=null,this._hidingValue=!1,this._changes=[],this._doingUpdates=null,this._propFields=o._propFields,this._observers=o._observers,this._observerTree=o._observerTree,this._relatedObserverTreeObj=o,this._observerStatus=[]};u._advancedCreate=function(e,t,n,r,o,i){return new u(e,t,n,r,o,i)};var l=function(e){this._propFields=e,this._observerIdInc=0,this._observers=[],this._observerTree={}};u._createObserverTree=function(e){return new l(e)},u.create=function(e,t,n){var r=new l({});return new u({__methodCaller:e},t,null,null,r,n)},u.setPropUpdater=function(e){i=e},u.setPropObserver=function(e){a=e},u.prototype.replaceWholeData=function(e,t){this._data=e},u.prototype.setHidingValue=function(e){this._hidingValue=!!e},u.prototype.setBeforeMergeCb=function(e){this._beforeMergeCb=e},u.prototype.setBeforeUpdateCb=function(e){this._beforeUpdateCb=e};var d=function(e,t,n){for(var r=e,o=0;o<t.length;o++){var i=t[o];if("**"===i)return r["**"]||(r["**"]=[]),void r["**"].push(n);r[i]||(r[i]={}),r=r[i]}r["~"]||(r["~"]=[]),r["~"].push(n)},f=function(e,t,n){for(var r=0;r<t.length;r++)d(e,t[r],n)},p=function(e,t,n){for(var r=e,o=0,i="";o<t.length&&"**"!==(i=t[o]);o++){if(!r)return;r=r[i]}var a="**"===i?r["**"]:r["~"];if(a)for(o=0;o<a.length;o++)if(a[o]===n){a.splice(o,1);break}},h=function(e,t,n){for(var r=0;r<t.length;r++)p(e,t[r],n)};l.prototype.addObserver=function(e,t){var n=this._observerIdInc++;return this._observers[n]={pathObj:t,func:e},f(this._observerTree,t,n),n},l.prototype.removeObserver=function(e){var t=this._observers[e];h(this._observerTree,t.pathObj,e),this._observers[e]=null},l.prototype.moveObserver=function(e,t){var n=this._observers[e];h(this._observerTree,n.pathObj,e),n.pathObj=t,f(this._observerTree,t,e)},u.prototype.getObserverTree=function(){return this._relatedObserverTreeObj};var v=function(e,t,n){for(var o=[],i=n.pathObj,a=0;a<i.length;a++){for(var s=i[a],c=t,u=0;u<s.length;u++){var l=s[u];if("**"===l)break;if("object"!=typeof c){c=void 0;break}c=c[l]}o[a]=c}r.safeCallback("Data Observer",n.func,e.__methodCaller,o,e)},g=function(e,t){var n=null,r=0;for(var o in e)if("~"!==o)if("**"!==o)g(e[o],t);else for(n=e["**"],r=0;r<n.length;r++)t[n[r]]=!0;else for(n=e["~"],r=0;r<n.length;r++)t[n[r]]=!0},_=function(e,t,n){for(var r=e,o=0;o<n.length;o++){if(r["**"])for(var i=r["**"],a=0;a<i.length;a++){t[i[a]]=!0}var c=n[o];if("number"==typeof c){if(!s.call(r,c)){r=null;break}}else if(!/^[_a-zA-Z]/.test(c)||!s.call(r,c)){r=null;break}r=r[c]}r&&g(r,t)},b=function(e,t,n,r,o){for(var i=0;i<e.length;i++){var a=e[i],s=t[i];s&&s&&(t[i]=!1,v(n,o?void 0:r,a))}};u.prototype.scheduleReplace=function(e,t,n){this._changes.push([e,t,n])},u.prototype.setChanges=function(e){this._changes=e},u.prototype.getChanges=function(){return this._changes},u.prototype.doUpdates=function(e,t){var n=this._propFields,r=this._comp,o=this._hidingValue,u=this._innerDataExclude,l=!!this._doingUpdates,d=this._relatedObserverTreeObj._observerIdInc,f=null,p=null,h=null;d?(l||(this._doingUpdates={changedPaths:[],changedValues:[],combinedChanges:[],changesTotal:0}),f=this._doingUpdates.changedPaths,p=this._doingUpdates.changedValues,h=this._doingUpdates.combinedChanges):(f=[],p=[],h=[]);var v=this._changes;this._changes=[];var g=[];this._beforeMergeCb&&this._beforeMergeCb(v,g,e);for(var y=0;y<v.length;y++){var m=v[y],w=m[0],O=m[1],S=O,I=void 0,E=w[0],C=!!u&&u.test(E),T=n[E];if(T&&1===w.length)I=this._data[E],O=i.call(this._comp,w,T,O,this._hidingValue),C||(this._innerData?(S=c(O),g[y]||(this._innerData[E]=S)):S=O,m[1]=S),C&&!this._innerData||(this._data[E]=O);else{var k=this._data,A=E,P=null,D=1;if(!C||this._innerData){for(;D<w.length;D++)"number"==typeof(P=w[D])&&isFinite(P)?s.call(k,A)&&k[A]instanceof Array||(k[A]=[]):(!s.call(k,A)||null===k[A]||"object"!=typeof k[A]||k[A]instanceof Array)&&(k[A]={}),k=k[A],A=P;k[A]=O}if(this._innerData&&(k=this._innerData,A=E,!C)){for(D=1;D<w.length;D++)"number"==typeof(P=w[D])&&isFinite(P)?s.call(k,A)&&k[A]instanceof Array||(k[A]=[]):(!s.call(k,A)||null===k[A]||"object"!=typeof k[A]||k[A]instanceof Array)&&(k[A]={}),k=k[A],A=P;S=c(O),g[y]||(k[A]=S),m[1]=S}}_(this._observerTree,this._observerStatus,w),C||(f.push(w),p.push([S,I,O]),h.push(m)),d&&(this._doingUpdates.changesTotal+=1)}if(!l){if(this._beforeUpdateCb&&this._beforeUpdateCb(e),d){var j=0;do{j=this._doingUpdates.changesTotal,b(this._observers,this._observerStatus,r,this._data,o)}while(j!==this._doingUpdates.changesTotal);this._doingUpdates=null}this._updateCb(f,p,h,e);for(var x=0;x<p.length;x++){var R=p[x];if(R){var M=f[x],N=n[M[0]];N&&a.call(r,R[2],R[1],M,N,o,t)}}}},e.exports=u},function(e,t,n){var r=n(9),o=n(11),i=n(14),a=n(4),s=n(13),c=function(){};c.prototype=Object.create(r.prototype,{constructor:{value:c,writable:!0,configurable:!0}});var u=c._advancedCreate=function(e,t){var n=new c;n.is=e.toLowerCase();var u=null;if("dom"===a.documentBackend&&(u=s.backendExtractedDefault?new i(e):document.createElement(e)),r.initialize(n,u,t),n.classList=o.create(n,null),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.create=function(e){return u(e,null)};var l=c._advancedClone=function(e,t){var n=new c;n.is=e.is;var u=null;if(e.__domElement&&(u=e.__domElement instanceof i?s.backendExtractedDefault?e.__domElement.cloneNode():i.toElement(e.__domElement):s.backendExtractedDefault?i.fromElement(e.__domElement):document.importNode?document.importNode(e.__domElement,!1):e.__domElement.cloneNode(!1)),r._clone(n,e,u,t),n.classList=o.create(n,null),t){var l=t.__wxHost;n.classList._setOwnerOptions(l.classList,l.__componentOptions.classPrefix,l.__componentOptions.addGlobalClass),a.writeExtraInfoToAttr&&u&&u.setAttribute("exparser:info-class-prefix",l.__componentOptions.classPrefix&&l.__componentOptions.classPrefix+"--")}return n};c.cloneNode=function(e){return l(e,null)},e.exports=c},function(e,t,n){var r=n(9),o=n(4),i=function(e,t){a(this,e,t)};i.prototype=Object.create(r.prototype);var a=i.initialize=function(e,t,n){e.is=t||"";var i=null;"dom"===o.documentBackend&&(i=void 0),r.initialize(e,i,n),e.__virtual=!0};i._advancedCreate=function(e,t){return new i(e,t)},i.create=function(e){return new i(e,null)},e.exports=i},function(e,t,n){var r=n(9),o=n(15),i=n(18),a=n(17),s=n(12),c=Object.prototype.hasOwnProperty,u=function(e){i.initialize(this,"shadow",this),this.__hostAssociated=!1,this.__wxHost=e,this.__childrenPropsFilter=null,this.__slotCacheDirty=!1};u.prototype=Object.create(i.prototype),u.create=function(e){var t=new u(e);if(e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(t.__childrenPropsFilter)for(var n in e.ownerShadowRoot.__childrenPropsFilter)t.__childrenPropsFilter[n]||(t.__childrenPropsFilter[n]=e.ownerShadowRoot.__childrenPropsFilter[n]);else t.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;return t};u.prototype.createTextNode=function(e){return s._advancedCreate(e,this)},u.prototype.createNativeNode=function(e){return a._advancedCreate(e,this)},u.prototype.cloneNativeNode=function(e){return a._advancedClone(e,this)},u.prototype.createVirtualNode=function(e){return i._advancedCreate(e,this)},u.prototype.createComponent=function(e,t,n,r){var i=null;i=void 0===t?e:t;var a=this.__wxHost;return"object"!=typeof i&&(c.call(a.__using,i)?i=a.__using[i]:c.call(a.__generics,i)&&(i=a.__generics[i]),"object"!=typeof i&&(i=o._list[i]||o._list[""])),n&&(n=function(e,t){var n={};for(var r in e){var i=e[r];"object"!=typeof i&&(c.call(t.__using,i)?i=t.__using[i]:c.call(t.__generics,i)&&(i=t.__generics[i]||o._list[""]),n[r]=i)}return n}(n,a)),"object"==typeof e&&(e=i.is),a.__componentOptions.randomizeTagName&&(e=function(){for(var e=Date.now(),t="exparser-",n=0;n<8;n++){var r=(e+Math.floor(26*Math.random()))%26;e=Math.floor(e/26),t+="abcdefghijklmnopqrstuvwxyz"[r]}return t}()),a.__componentOptions.writeOnly&&!i.options.allowInWriteOnly&&(i=o._list[""]),o._advancedCreate(e,i,this,n,r)},u.prototype.tagNameUsed=function(e){var t=this.__wxHost;return!!c.call(t.__using,e)||!!c.call(t.__generics,e)},u.prototype.getHostNode=function(){return this.__wxHost},u.prototype.getElementById=function(e){return r._updateIdMap(this.__wxHost),this.__wxHost.__idCache[e]},e.exports=u},function(e,t,n){var r=n(9),o=n(12),i=function(){};i.create=function(e,t,n){var a=new i;if(!(e instanceof r||e instanceof o))throw new Error("ElementIterator can only be used for exparser.Element or exparser.TextNode");a._elem=e,a._elemTypeLimit=n||r;var s=t.split("-");if("shadow"===s[0])a._composed=!1;else{if("composed"!==s[0])throw new Error("Unrecognized iterator type: "+t);a._composed=!0}if("ancestors"===s[1])a._relation="ancestors",a._order=0;else{if("descendants"!==s[1])throw new Error("Unrecognized iterator type: "+t);if(a._relation="descendants","root"!==s[2])throw new Error("Unrecognized iterator type: "+t);if("first"===s[3])a._order=-1;else{if("last"!==s[3])throw new Error("Unrecognized iterator type: "+t);a._order=1}}return a};var a=function(e,t,n,r,o){if(r<0&&e instanceof t&&!1===o(e))return!1;var i=n&&e.__wxSlotChildren||e.childNodes;if(i)for(var s=0;s<i.length;s++)if(!1===a(i[s],t,n,r,o))return!1;return!(r>0&&e instanceof t&&!1===o(e))};i.prototype.forEach=function(e){return"ancestors"===this._relation?function(e,t,n,r){for(;e;e=n&&(e.__wxSlotParent||e.__wxHost)||e.parentNode)if(e instanceof t&&!1===r(e))return!1;return!0}(this._elem,this._elemTypeLimit,this._composed,e):a(this._elem,this._elemTypeLimit,this._composed,this._order,e)},e.exports=i},function(e,t,n){(function(t){var r=n(4),o=n(3),i=n(9),a=n(17),s=n(12),c=n(19),u=n(15),l=n(23),d=n(24),f=function(){};f.prototype=Object.create(Object.prototype,{constructor:{value:f,writable:!0,configurable:!0}});var p=function(){};p.prototype=Object.create(Object.prototype,{constructor:{value:p,writable:!0,configurable:!0}});var h=null;f.precompiler=h,f.htmlParser=null;var v=function(e){return e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}))},g=Object.prototype.hasOwnProperty,_=function(e,t){if(null!==e&&"object"==typeof e&&g.call(e,t))return e[t]},b=function(e,t,n,r){if(g.call(t,n)){var i=t[n];if("function"==typeof i)return o.safeCallback("Template Method",i,e,r)}},y=function(e,t){return[{t:1,n:"slot",a:[],c:[],p:null}]},m={t:1,n:'"slot"',v:!0,sn:"",a:[],c:[],p:null},w=function(e,t,n){e.classList.toggle(t,!!n)},O=function(e,t,n){e[t]=n},S=function(e,t,n){var r=e.__dataProxy;r.scheduleReplace([t],n),r.doUpdates()},I=function(e,t,n){e.class=n},E=function(e,t,n){e.setAttribute("style",n)},C=function(e,t,n){e.setAttribute("class",n)},T=function(e,t,n){e.textContent=n},k=function(e,t,n){e.dataset||(e.dataset={}),e.dataset[t]=n},A={$:function(e,t,n){!0===n?e.setAttribute(t,""):!1===n||null==n?e.removeAttribute(t):e.setAttribute(t,n)},":":O,c:w,s:function(e,t,n){var r=e.style;r&&(r[t]=n)},d:k},P=function(e,t,n){return[{t:1,n:"slot",v:!0,sn:"",a:[],c:[]}]};f.create=function(e,n,r,o){var i=void 0===e.template?P:e.template,a=i;"function"!=typeof i&&(a=void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node?f.precompileAndGetCreator(i):y);var s=Object.create(f.prototype);return s._initValuesJSON=JSON.stringify(r),s._dataJSON=n!==r?JSON.stringify(n):null,s._tagTreeRoot=D(a,r,e.methods,o),s._renderingMode=o.renderingMode,s};var D=function(e,t,n,o){var i="native"===o.renderingMode,s=i,c=!1,u=Object.create(null);i&&!r.hasDOMBackend&&(e=y);var l={},f=e(_,b,n),p=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(3!==r.t){var o=r.n,u=!(i||"string"==typeof o&&o.indexOf("-")<0);"slot"===o&&""===r.sn&&(c=!0),r.n=o;var f=r.st;f&&f.e&&(f.o=E,s&&(f.v=f.e(t,l,null)));var h=r.cl;h&&h.e&&(h.o=i?C:I,s&&(h.v=h.e(t,l,null)));var g=null;u||(r.p=g=i?document.createElement(r.n):a.create(r.n),f&&void 0!==f.v&&g.setAttribute("style",f.v),i&&h&&void 0!==h.v&&g.setAttribute("class",h.v));for(var _=r.a,b=0;b<_.length;b++){var y=_[b];if(y.d)i||d[y.n].register(y.n,y,r);else{i||("bind"===y.n.slice(0,4)?(y.evCatch=!1,y.ev=v(y.n.slice(4)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))):"catch"===y.n.slice(0,5)&&(y.evCatch=!0,y.ev=v(y.n.slice(5)),":"===y.ev[0]&&(y.ev=y.ev.slice(1))));var m=y.o;if(u)m?y.o="&"===m?A[":"]:A[m]:(y.o=A[":"],y.n=v(y.n)),y.o===O&&(y.o=S),s&&y.e&&(y.v=y.e(t,l,null));else if(!y.ev){var k=A;y.o=m?"&"===m?k[":"]:k[m]:k.$,s?(y.e&&(y.v=y.e(t,l,null)),(y.o!==w||i)&&y.o(g,y.n,y.v)):y.e||y.o(g,y.n,y.v)}}}p(r.c),i&&(1!==r.c.length||void 0===r.c[0].sn||r.c[0].compressed||(r.sn=r.c[0].sn,r.compressed=!0,r.c.pop()))}else r.e&&(r.o=T,r.c=s?r.e(t,l,null):"")}};return p(f,u,!0),i&&(c||f.push(m),1!==f.length||""!==f[0].sn||f[0].compressed||f.pop()),f},j=function(e,t){return function(n){if(this[e](n),t)return!1}},x=function(e,t,n,r,o,a,s,c){for(var f=null,p=0,h=null,v=0;v<e.length;v++){var g=s,_=e[v];if(3===_.t)f=_.e?t.createTextNode(_.e(r,o,null)):t.createTextNode(_.c),_.e&&l.addBindings(a,g,_.b,f,_),i.appendChild(n,f);else{var b=_.cl,y=_.st,m=_.a,I=!1;for(p=0;p<m.length;p++)if((h=m[p]).d){var E=d[h.n].create(h.n,h,_,r,o,a,g,c,t,x,n);if(d[h.n].requireBlock){f=E,i.appendChild(n,f),I=!0;break}}if(I)continue;if(_.v)f=t.createVirtualNode(_.n);else if(_.p){for(f=t.cloneNativeNode(_.p),p=0;p<m.length;p++)(h=m[p]).d||(h.ev?c(f,h.ev,h.v,h.evCatch):h.o===O?f.__domElement&&(h.o(f.__domElement,h.n,h.e(r,o,null)),l.addBindings(a,g,h.b,f.__domElement,h)):(h.e&&h.o(f,h.n,h.e(r,o,null)),(h.e||h.o===w||h.o===k)&&l.addBindings(a,g,h.b,f,h)));y&&y.e&&(f.setAttribute("style",y.e(r,o,null)),l.addBindings(a,g,y.b,f,y))}else{if(_.cpf){var C={},T=t.__wxHost;for(var A in _.cpf)!function(e){var t=_.cpf[e];C[e]=T.__behavior.methods[t]}(A);t.__childrenPropsFilter=C}for(f=t.createComponent(_.n,void 0,_.g,void 0),p=0;p<m.length;p++)if(!(h=m[p]).d){var P=h.v;h.o===S&&u.hasPublicProperty(f,h.n)?(h.e&&(P=h.e(r,o,null),l.addBindings(a,g,h.b,f,h)),h.e?S(f,h.n,P):f.__behavior.properties[h.n].type===Boolean?S(f,h.n,!0):S(f,h.n,P)):h.ev?c(f,h.ev,P,h.evCatch):h.o!==S&&(h.e&&(P=h.e(r,o,null),l.addBindings(a,g,h.b,f,h)),h.o(f,h.n,P))}y&&(y.e?(f.__domElement.setAttribute("style",y.e(r,o,null)),l.addBindings(a,g,y.b,f.__domElement,y)):f.__domElement.setAttribute("style",y.v))}_.id&&(f.id=_.id),b&&(b.e?f.class=b.e(r,o,null):f.class=b.v,b.o&&l.addBindings(a,g,b.b,f,b)),_.sl&&(f.slot=_.sl),void 0!==_.sn&&i.setSlotName(f,_.sn),i.appendChild(n,f),x(_.c,t,f,r,o,a,g,c)}}},R=function(e,t,n){for(var r=e.childNodes,o=0;o<r.length;o++){var i=r[o];i instanceof s||(i.__id&&(t[i.__id]=i),void 0!==i.__slotName&&(n[i.__slotName]=i),R(i,t,n))}},M=function(e,t,n,r,o,i){for(var a=null,s=0,c=null,u=0;u<e.length;u++){var d=e[u];if(void 0===d.n)a=document.createTextNode(d.c),d.e&&l.addBindings(o,i,d.b,a,d),t.appendChild(a);else{var f=d.cl,p=d.st,h=d.a;for(a=d.v?document.createElement("virtual"):document.importNode?document.importNode(d.p,!1):d.p.cloneNode(!1),s=0;s<h.length;s++)(c=h[s]).e&&l.addBindings(o,i,c.b,a,c);t.appendChild(a),d.id&&(n[d.id]=a),f&&f.e&&l.addBindings(o,i,f.b,a,f),p&&p.e&&l.addBindings(o,i,p.b,a,p),void 0!==d.sn&&(r[d.sn]=a),M(d.c,a,n,r,o,i)}}};f.prototype.createInstance=function(e){var t=Object.create(p.prototype),n=JSON.parse(this._initValuesJSON),o=null===this._dataJSON?n:JSON.parse(this._dataJSON),i=Object.create(null),a=Object.create(null),s=[],u=l.create("",null,null,null,null,[],(function(e,t){})),d=null;if("native"===this._renderingMode)"dom"===r.documentBackend&&(d=document.createDocumentFragment()),M(this._tagTreeRoot,d,i,a,u,{}),a[""]||(a[""]=null);else{if(d=c.create(e),e.ownerShadowRoot&&e.ownerShadowRoot.__childrenPropsFilter)if(d.__childrenPropsFilter)for(var f in e.ownerShadowRoot.__childrenPropsFilter)d.__childrenPropsFilter[f]||(d.__childrenPropsFilter[f]=e.ownerShadowRoot.__childrenPropsFilter[f]);else d.__childrenPropsFilter=e.ownerShadowRoot.__childrenPropsFilter;x(this._tagTreeRoot,d,d,n,{},u,{},(function(e,t,n,r){d.__wxHost?e.addListener(t,j(n,r).bind(d.__wxHost)):s.push({target:e,name:t,func:j(n,r)})})),R(d,i,a)}return t.data=o,t.shadowRoot=d,t.idMap=i,t.slots=a,t.listeners=s,t._topScope=u,t},p.prototype.updateValues=function(e,t,n){for(var r=i.getMethodCaller(e),o=0;o<n.length;o++){var a=n[o];l.updateBinding(this._topScope,a,t,{},r)}},e.exports=f}).call(t,n(22))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function i(){h&&f&&(h=!1,f.length?p=f.concat(p):v=-1,p.length&&a())}function a(){if(!h){var e=o(i);h=!0;for(var t=p.length;t;){for(f=p,p=[];++v<t;)f&&f[v].run();v=-1,t=p.length}f=null,h=!1,function(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function c(){}var u,l,d=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(e){u=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var f,p=[],h=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||h||o(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var n={create:function(e,t,n,o,i,a,s){for(var c={inc:1,name:e,exp:o,lp:i,scopes:{},targets:{},children:null,lu:s,__scopeBinded:[]},u=0;u<a.length;u++){var l=a[u];null===l[0]?r(t,l,null,c):r(n[l[0]],l,null,c)}return c},proxyTopScope:function(e){var t={inc:1,linked:e,scopes:{},targets:{},children:null,__scopeBinded:[]};return r(e,[null],null,t),t},proxySubScopes:function(e){var t={};for(var n in e)t[n]={inc:1,linked:e[n],scopes:{},targets:{},children:null,__scopeBinded:[]},r(e[n],[null],null,t[n]);return t}},r=n.addBinding=function(e,t,n,r){for(var o=e,i=1;i<t.length;i++){var a=t[i];o.children||(o.children=Object.create(null));var s=o.children;s[a]||(s[a]={scopes:{},targets:{},children:null}),o=s[a]}var c=e.inc++;return n?o.targets[c]=[n,r]:(o.scopes[c]=r,r.__scopeBinded.push([o,c])),c};n.addBindings=function(e,t,n,o,i){for(var a=0;a<n.length;a++){var s=n[a];s[0]?r(t[s[0]],s,o,i):r(e,s,o,i)}},n.updateLvaluePath=function(e,t){e.lp=t},n.removeBindingsForScope=function(e){for(var t=e.__scopeBinded,n=0;n<t.length;n++){var r=t[n];delete r[0].scopes[r[1]]}};var o=function(e,t,n,r,o){if(e.linked)i(e,t,n,r,o);else{var a=r[e.name];r[e.name]=e.exp(n,r,o),i(e,t,n,r,o),r[e.name]=a}},i=n.updateBinding=function(e,t,n,r,i){for(var a=e,s=0,c=0;c<t.length;c++){for(s in a.scopes)o(a.scopes[s],t,n,r,i);var u=t[c];if(!a.children)return;var l=a.children;if(!l[u])return;a=l[u]}var d=function(e){for(s in e.targets){var t=e.targets[s],a=t[1];a.o(t[0],a.n,a.e(n,r,i))}for(s in e.scopes)o(e.scopes[s],[],n,r,i);for(s in e.children)d(e.children[s])};d(a)};e.exports=n},function(e,t,n){e.exports={if:n(25),elif:n(25),else:n(25),for:n(27),key:n(28),"for-index":n(29),"for-item":n(30),alias:n(31)}},function(e,t,n){var r=n(23),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,u,l,d){var f=u.createVirtualNode("wx:"+e);f.__wxIfCondValue=!0,f.__wxIfNextNode=null,f.__wxIfHasTrueCond=!0;var p=null;"if"!==e&&("wx:if"!==(p=d.childNodes[d.childNodes.length-1]).is&&"wx:elif"!==p.is?p=null:p.__wxIfNextNode=f),n.id&&(f.id=n.id);var h=f.__wxIfUpdateNode=function(){var e=f.__wxIfCondValue;if(p&&p.__wxIfHasTrueCond&&(e=!1),e&&!f.childNodes.length){var t=r.proxyTopScope(a),d=r.proxySubScopes(s);f.__wxTopScope=t,f.__wxSubScopes=d,l(n.c,u,f,o,i,t,d,c)}else if(!e&&f.childNodes.length){for(var h in r.removeBindingsForScope(f.__wxTopScope),f.__wxSubScopes)r.removeBindingsForScope(f.__wxSubScopes[h]);for(;f.childNodes.length;)f.removeChild(f.childNodes[0])}f.__wxIfNextNode&&f.__wxIfNextNode.__wxIfUpdateNode()},v=function(e){f.__wxIfCondValue=!!e,f.__wxIfHasTrueCond=f.__wxIfCondValue||p&&p.__wxIfHasTrueCond,h()};return"else"===e?v(!0):(r.addBindings(a,s,t.b,f,{e:t.d,o:function(e,t,n){v(n)}}),v(t.d(o,i,null))),f}}},function(e,t){t.TAG_TYPES={TAG_START:1,TAG_END:-1,TEXT:3,COMMENT:8},t.RUNTIME_NAMES={MEMBER:"m",CALL:"f",METHODS:"e",CALLER:"c",TOP_SCOPE:"t",SUB_SCOPE:"s"};var n=t.STRING_UNESCAPE_MAP={n:"\n",r:"\r",b:"\b",f:"\f",t:"\t",v:"\v",'"':'"',"'":"'","\\":"\\","\r":"\r","\n":"\n"},r=t.STRING_ESCAPE_MAP={},o="";for(var i in n)r[n[i]]=i,o+=n[i];t.STRING_ESCAPE_REGEXP=new RegExp("["+o+"]","g")},function(e,t,n){var r=(n(18),n(23)),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,addDefaultAttrs:[{n:"wx:for-index",v:"index"},{n:"wx:for-item",v:"item"}],register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,u,l){var d=n._wxForIndex||"index",f=n._wxForItem||"item",p=n._wxKey,h=u.createVirtualNode("wx:for:list");n.id&&(h.id=n.id),r.create("",a,s,(function(e,n,r){var o=t.d(e,n,null);return y(o,e,n,r),o}),t.l,t.b);var v=function(e,t,o,i,p){var v=u.createVirtualNode("wx:for:item"),g=r.proxyTopScope(a),_=r.proxySubScopes(s);v.__wxTopScope=g,v.__wxSubScopes=_,v.__wxForToRemove=!1,v.__wxForKeyStr="";var b=r.create(d,g,_,null,null,[]),y=r.create(f,g,_,null,[o],[]);return _[d]=b,_[f]=y,t[d]=o,t[f]=i,l(n.c,u,v,e,t,g,_,c),void 0===p?h.appendChild(v):h.insertBefore(v,p),v},g=function(e,t,n,i,a,s){var c=e.__wxSubScopes[f];r.updateLvaluePath(c,[i]),a&&(s?h.insertBefore(e,s):h.appendChild(e));var u=e.__wxSubScopes[d];n[d]=i,r.updateBinding(u,[],o,n,t)},_=function(e,t,n,o,i,a){o[f]=i,r.updateBinding(e.__wxSubScopes[f],t,n,o,a)},b=function(e){for(var t in r.removeBindingsForScope(e.__wxTopScope),h.__wxSubScopes)r.removeBindingsForScope(e.__wxSubScopes[t]);h.removeChild(e)},y=function(e,t,n,r){var o="",i=e;"object"==typeof e&&null!==e||(i=[]);var a={};for(o in n)a[o]=n[o];var s=0;if(p){var c=[],u=e instanceof Array,l=[];if(!u){var d=i;for(o in i=[],d)i.push(d[o]),l.push(o)}for(s=0;s<i.length;s++)c.push(String(i[s][p]));if(0===i.length)for(;h.childNodes.length;)b(h.childNodes[0]);else{var f=Object.create(null),y=Object.create(null),m=h.childNodes,w=null,O="";for(s=0;s<m.length;s++)f[O=(w=m[s]).__wxForKeyStr]>=0?(b(w),s--):(f[O]=s,y[O]=w,w.__wxForToRemove=!0);var S=-1,I=0,E=1,C=[];for((I=f[i[0][p]])>=0||(I=-1),m[I]&&(m[I].__wxForToRemove=!1),s=1;s<i.length;s++)(E=f[i[s][p]])>=0&&(S<I&&(I<E||S>E)&&(C.push(m[I]),S=I),m[I=E]&&(m[I].__wxForToRemove=!1));for(S<I&&C.push(m[I]),s=0;s<m.length;s++)(w=m[s]).__wxForToRemove&&(b(w),s--);var T=C.shift(),k=0;for(s=0;s<i.length;s++){var A=i[s],P=y[A[p]];if(y[A[p]]=null,P){var D=!0;if(P===T){for(;m[k]!==T;)k++;k++,T=C.shift(),D=!1}g(w=P,r,a,u?s:l[s],D,m[k]),D&&m[k]===w&&k++,_(w,[],t,a,i[s],r)}else w=v(t,a,u?s:l[s],i[s],m[k]),k++,w.__wxForKeyStr=String(A[p])}}}else{for(;h.childNodes.length;)b(h.childNodes[0]);if(e instanceof Array)for(s=0;s<i.length;s++)v(t,a,s,i[s]);else for(o in i)v(t,a,o,i[o])}};return y(t.d(o,i,null),o,i,null),h}}},function(e,t){e.exports={attachedToBlock:!0,register:function(e,t,n){n._wxKey=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForIndex=t.d},create:function(){}}},function(e,t){e.exports={attachedToBlock:"for",register:function(e,t,n){n._wxForItem=t.d},create:function(){}}},function(e,t,n){var r=n(23),o=n(26).RUNTIME_NAMES;o.TOP_SCOPE,o.SUB_SCOPE,o.CALLER,e.exports={requireBlock:!0,register:function(e,t,n){},create:function(e,t,n,o,i,a,s,c,u,l){var d=t.s[0],f=r.create(d,a,s,t.d,t.l,t.b),p={},h="";for(h in s)p[h]=s[h];p[d]=f;var v={};for(h in i)v[h]=i[h];v[d]=t.d(o,i,null);var g=u.createVirtualNode("wx:alias");return n.id&&(g.id=n.id),l(n.c,u,g,o,v,a,p,c),g}}}]),__virtualDOMDataThread__=!0,__virtualDOM__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=33)}([function(e,t,n){"use strict";n.r(t),n.d(t,"isDataThread",(function(){return s})),n.d(t,"inDevtoolsWebview",(function(){return c})),n.d(t,"setInDevtoolsWebView",(function(){return u})),n.d(t,"flushDataBuffer",(function(){return g})),n.d(t,"sendData",(function(){return _})),n.d(t,"setDataListener",(function(){return y})),n.d(t,"removeDataListeners",(function(){return m})),n.d(t,"loadJsFileToDataThread",(function(){return w})),n.d(t,"loadJsFileToWebview",(function(){return O}));var r={},o=-1,i=null,a=!1,s=function(){return __virtualDOMDataThread__},c=function(){return a},u=function(){a=!0},l=null,d=[],f=null,p=null,h=!1,v=function(e,t){var n=e.shift();if(""===n)return o=t,void(i&&i(t));var a=null;r[t=t||0]&&(a=r[t][n]),!a&&r.$GLOBAL&&(a=r.$GLOBAL[n]),a&&a(e,n,t)},g=function(){p&&(p=clearTimeout(p)),d.length&&l.vdSyncBatch(d,f&&[f]),f=null,d.length=0,h=!1},_=function(e,t,n,r){if(t=[e].concat(t),!h||r)return g(),h=!0,void l.vdSync(t,n&&[n]);f!==n&&g(),f=n,d.push(t),h=!0,p||(p=setTimeout((function(){p=null,g()}),15))},b=function(){(l=s()?__appServiceSDK__._virtualDOMTunnel:__webViewSDK__._virtualDOMTunnel).onVdSync((function(e,t){v(e,t)})),l.onVdSyncBatch((function(e,t){for(var n=0;n<e.length;n++)v(e[n],t)}))};s()&&"undefined"!=typeof __clientsubcontext&&__clientsubcontext?__subContextEngine__.onInitReady(b):b();var y=function(e,t,n){if(""===e)return i=t,void(o>=0&&i(o));r[n=n||0]||(r[n]={}),r[n][e]=t},m=function(e){delete r[e]},w=function(e){if(0===e.length)return 0;wxNativeConsole.info("[Lazyload] loadJsFileToAppService(paths: "+JSON.stringify(e)+")");var t=Date.now();__subContextEngine__.loadJsFiles(e);var n=Date.now();return wxNativeConsole.info("[Lazyload] loadJsFileToAppService done, cost: "+(n-t)+"ms"),n-t},O=function(e,t){if(0!==e.length){wxNativeConsole.info("[Lazyload] loadJsFileToWebview(paths: "+JSON.stringify(e)+")");var n=Date.now();WeixinJSBridge.loadJsFiles(e,(function(){var e=Date.now();wxNativeConsole.info("[Lazyload] loadJsFileToWebview done, cost: "+(e-n)+"ms"),t(e-n)}))}else t(0)}},function(e,t,n){"use strict";n.r(t),n.d(t,"RPX_RATE",(function(){return r})),n.d(t,"BASE_DEVICE_WIDTH",(function(){return o})),n.d(t,"SYNC_EVENT_NAME",(function(){return i})),n.d(t,"getEvName",(function(){return s})),n.d(t,"STYLE_SEGMENT_INDEX",(function(){return c}));var r=20,o=750,i={WX_EVENT:11,REQUEST_SAVE:12,COMPONENT_DEF:21,SAVE_STATE:22,RESTORE_STATE:23,FLOW_INITIAL_RENDERING_CACHE:24,FLOW_CLEAR_INITIAL_RENDERING_CACHE:25,SET_DATA_CALLBACK:32,FLOW_SET_DATA:33,FLUSH_BLOCKED:43,FLOW_GROUP:41,FLOW_GROUP_END:42,FLOW_DEPTH:2,FLOW_INITIAL_CREATION:3,FLOW_UPDATE:6,FLOW_DATA_OBSERVER:8,FLOW_APPLY_PROPERTY:4,FLOW_MINIPULATE_CHILD:7,FLOW_CREATE_NODE:5,FLOW_REPEAT:9,FLOW_VIEW_INFO:63,REQUEST_TAB:51,COMPONENT_DEF_TAB:52,FLOW_CREATE_TAB:53,DESTROY_TAB:54,REQUEST_BROADCAST_VIEW_ID:61,RESPONSE_BROADCAST_VIEW_ID:62,BANNING_MAP:90,PERFORMANCE_DATA:91,CALL_METHOD_FROM_WXS:50,RESPONSE_VIEW_INFO:64,MODEL_VALUE_CHANGE:65,FLOW_SET_NODE_ANIMATION_INFO:100,ANIMATION_TRANSITION_END:101,FLOW_CLEAR_NODE_ANIMATION_INFO:102,CLEAR_ANIMATION_COMPLETE:103,FLOW_SET_NODE_NEXT_ANIMATION_INFO:104,LOAD_COMPONENT_DEF:110,COMPONENT_DEF_LAZY:111,FLOW_DO_REPLACE_PLACEHOLDER:112,FLOW_REPLACE_PLACEHOLDER:113,RESTORE_LOAD_FILE:114,FLOW_HOT_UPDATE:900,FLOW_HOT_UPDATE_CHILD:901,FLOW_HOT_UPDATE_RESET:902,UPDATE_COMPONENT_DEF:903,UPDATE_PERFORMANCE_STAT:800,ENABLE_UPDATE_PERFORMANCE_STAT:801,DISABLE_UPDATE_PERFORMANCE_STAT:802},a={};Object.keys(i).forEach((function(e){a[i[e]]=e}));var s=function(e){return a[e]||"UNKNOWN_EVENT_"+e},c={ATTR:0,ANIMATION:1,WXS_STYLE:2}},function(e,t,n){"use strict";n.r(t);var r=n(14),o=n(15),i=n(4),a=n(3),s=Object(a.getExparser)(),c=function(){function e(){Object(r.default)(this,e),this._idNodeMap={}}return Object(o.default)(e,[{key:"getAll",value:function(){return this._idNodeMap}},{key:"getNodeById",value:function(e){return this._idNodeMap[e]}},{key:"getNodeId",value:function(e){return e.__wxTmplId}},{key:"allocNodeId",value:function(e,t){var n=t||Object(i.guid)();return e.__wxTmplId=n,this._idNodeMap[e.__wxTmplId]=e,n}},{key:"addNode",value:function(){}},{key:"removeNode",value:function(e){if(e.__wxTmplId&&delete this._idNodeMap[e.__wxTmplId],e.childNodes)for(var t=0;t<e.childNodes.length;t++)this.removeNode(e.childNodes[t]);e.shadowRoot instanceof s.Element&&this.removeNode(e.shadowRoot)}}]),e}(),u=n(31),l={},d=function(){function e(t){Object(r.default)(this,e),this.listenerInited=!1,this.root=null,this.tabRoot=null,this.tabDestroyed=!1,this.usedDef=null,this.tabUsedDef=null,this.statesData=null,this.operationFlow=new u.default(t,this),this.nodeId=new c,this.rootNodeId="",this.tabNodeId="",this.rootCompName="",this.tabCompName="",this.applyAnimationCbMap={},this.clearAnimationCbMap={},this.viewInfoCbMap={},this.initialRootData=null,this.lifetimeListener=null}return Object(o.default)(e,null,[{key:"create",value:function(t){var n=new e(t);return n.viewId=t,l[t]=n,n}},{key:"destroy",value:function(e){delete l[e]}},{key:"get",value:function(e){return l[e]}},{key:"listViewId",value:function(){var e=[];for(var t in l)e.push(l[t].viewId);return e}},{key:"list",value:function(){var e=[];for(var t in l)e.push(l[t]);return e}}]),e}();t.default=d},function(e,t,n){"use strict";n.r(t),n.d(t,"getExparser",(function(){return o}));var r=void 0!==exparser?exparser:{};"undefined"!=typeof __useSclExparser__&&__useSclExparser__&&"undefined"!=typeof __exparserSclEngine__&&(r=__exparserSclEngine__.exparser||r||{});var o=function(){return r}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"pathRelative",(function(){return s})),n.d(t,"isObject",(function(){return c})),n.d(t,"isEmptyObject",(function(){return u})),n.d(t,"isUndefined",(function(){return l})),n.d(t,"isNull",(function(){return d})),n.d(t,"isString",(function(){return f})),n.d(t,"isArray",(function(){return p})),n.d(t,"getPrototype",(function(){return h})),n.d(t,"getDataType",(function(){return v})),n.d(t,"getWxmlVersionTag",(function(){return g})),n.d(t,"guid",(function(){return _})),n.d(t,"objectValues",(function(){return b})),n.d(t,"dfsComponents",(function(){return y})),n.d(t,"speedReport",(function(){return m}));var r=n(7),o=n(3),i=Object(o.getExparser)(),a=/^[-+a-z]+:\/\//i,s=function(e,t){if(a.test(t))return t;var n=e.match(a),r="";n&&(r=n[0],e=e.slice(r.length)),0===t.indexOf("/")&&(e="");var o=e.split("/");o.pop();for(var i=t.split("/");i.length;){var s=i.shift();""!==s&&"."!==s&&(".."!==s?o.push(s):o.pop())}return r+o.join("/")},c=function(e){return"object"===Object(r.default)(e)&&null!==e},u=function(e){for(var t in e)return!1;return!0},l=function(e){return"[object Undefined]"===Object.prototype.toString.call(e)},d=function(e){return"[object Null]"===Object.prototype.toString.call(e)},f=function(e){return"[object String]"===Object.prototype.toString.call(e)},p=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},h=function(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.constructor?e.constructor.prototype:void 0},v=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]},g=function(t){var n=("undefined"==typeof window?e:window).__wcc_version_info__;if(n)return n[t]},_=function(){return Math.floor(4294967296*(1+Math.random())).toString(16).slice(1)},b=function(e){return Object.keys(e).map((function(t){return e[t]}))},y=function e(t,n,r){t instanceof i.Component&&(n>0&&r(t),n&&t.shadowRoot instanceof i.Element&&e(t.shadowRoot,n,r),n<0&&r(t));for(var o=t.childNodes,a=0;a<o.length;a++)o[a]instanceof i.Element&&e(o[a],n,r)},m=function(e,t,n,r){Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:n},force:"reRenderTime"!==e,data:r})}}.call(this,n(32))},function(e,t,n){"use strict";n.r(t);t.default={restoring:null,idDataMap:null,compIdArr:null,compExtraDataMap:null,compIdArrIndex:0}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(28);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||Object(r.default)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"setWxsGdc",(function(){return b})),n.d(t,"getWxsGdc",(function(){return y})),n.d(t,"wxsDeepCopy",(function(){return m})),n.d(t,"wxsDeepDecopy",(function(){return w})),n.d(t,"joinClassOrStyle",(function(){return O})),n.d(t,"triggerPageRerender",(function(){return E})),n.d(t,"getWxsHandlerInstance",(function(){return D})),n.d(t,"triggerWxsObserver",(function(){return R})),n.d(t,"callMethodFromWxsCallback",(function(){return M})),n.d(t,"saveNodeExtraData",(function(){return N})),n.d(t,"restoreNodeExtraData",(function(){return L})),n.d(t,"saveRootExtraData",(function(){return B})),n.d(t,"restoreRootExtraData",(function(){return F})),n.d(t,"saveTabRootExtraData",(function(){return W})),n.d(t,"restoreTabRootExtraData",(function(){return U}));var r=n(6),o=n(7),i=n(0),a=n(2),s=n(1),c=n(5),u=n(17),l=n(3),d=n(19),f=n(21),p=n(12),h=Object(l.getExparser)(),v=Object.prototype.hasOwnProperty,g=!1,_=null,b=function(e){"function"==typeof e&&(_=e)},y=function(){return"function"==typeof _?_:null},m=function(e,t){return _?_(e,"nv_",t?2:void 0):e},w=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _?_(e,void 0,t?2:void 0):e},O=function(e,t,n){return t?n?t+e+n:t||"":n||""},S=0,I=!1,E=function(){!Object(i.isDataThread)()&&I&&0===S&&(I=!1,document.dispatchEvent(new CustomEvent("pageReRender",{})))},C=function(e){return e instanceof h.Component&&h.Component.getComponentOptions(e).domain},T=null,k=[],A={},P=function e(t,n){var r,c=t,l=C(c),_=(r=c)instanceof h.Component&&"//"===h.Component.getComponentOptions(r).domain,b={selectAllComponents:function(r){if(n!==l)return[];var o=g?t.shadowRoot.querySelectorAll(r):t.querySelectorAll(r),i=[];return o.forEach((function(t){i.push(m(e(t,n),!0))})),i},selectComponent:function(r){if(n!==l)return null;var o=g?t.shadowRoot.querySelector(r):t.querySelector(r);return o?m(e(o,n),!0):null},removeClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object(i.isDataThread)()||!c||!t.length)return this;var r=c.__wxsClass?c.__wxsClass.split(/\s+/):[],o=[];return t.forEach((function(e){(e=e.replace(/^\s+|\s+$/g,""))&&c.classList.contains(e)&&(c.classList.toggle(e),I=!0,o.push(e))})),o.forEach((function(e){r.forEach((function(t,n){return t!==e||(r.splice(n,1),!1)}))})),c.__wxsClass=r.join(" "),this},addClass:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object(i.isDataThread)()||!c||!t.length)return this;var r=c.__wxsClass||"",o=[];return t.forEach((function(e){(e=e.replace(/^\s+|\s+$/g,""))&&(c.classList.contains(e)||(c.classList.toggle(e),o.push(e),I=!0))})),c.__wxsClass=r+(r?" ":"")+o.join(" "),this},hasClass:function(e){return!(Object(i.isDataThread)()||!c)&&c.classList.contains(e)},setStyle:function(e){if(Object(i.isDataThread)()||!c)return this;if(e===c.__wxsStyle)return this;var t=[];if("object"===Object(o.default)(e))for(var n in e=e?w(e):{})v.call(e,n)&&t.push(n+":"+e[n]);else t=[String(e)];c.__wxsStyle=t.join(";");var r=function(){var e=window.wx.transformRpx(c.__wxsStyle,!0);c.setNodeStyle(e,s.STYLE_SEGMENT_INDEX.WXS_STYLE)};return r(),Object(u.registerResizer)(c,s.STYLE_SEGMENT_INDEX.WXS_STYLE,r),I=!0,this},getDataset:function(){return c?m(c.dataset):null},getState:function(){return c?(c.__wxsState=c.__wxsState||{},c.__wxsState):null},triggerEvent:function(e,n,r){return _||!t||(n=n?w(n):n,r=r?w(r):r,S++,c.triggerEvent(e,n,r),S--),this},callMethod:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i.isDataThread)()||!e||(n=w(n),g?Object(i.sendData)(s.SYNC_EVENT_NAME.CALL_METHOD_FROM_WXS,[window.__webviewId__,t&&t.__wxTmplId||0,e,n,Object(p.checkTapMark)()]):wx.callMethodFromWxs([(window.__webviewId__,t&&t.__wxTmplId||0),e,n,Object(p.checkTapMark)()])),this},requestAnimationFrame:function(e){return Object(i.isDataThread)()||"function"!=typeof e||(t=e,Object(i.isDataThread)()||"function"!=typeof t||(k.push(t),T||(T=window.requestAnimationFrame((function(){T=null;var e=k;k=[],e.forEach((function(e){e(),E()}))}))))),this;var t},getComputedStyle:function(e){Array.isArray(e)||(e=[]);var t={computedStyle:e.filter((function(e){return"string"==typeof e}))};return m(Object(d.getNodeInfo)(c,t))},setTimeout:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];if(!Object(i.isDataThread)()&&"function"==typeof e){var a=window.setTimeout((function(){e.apply(void 0,r),delete A[a]}),t);return A[a]=!0,a}},clearTimeout:function(e){Object(i.isDataThread)()||A[e]&&(window.clearTimeout(e),delete A[e])},getBoundingClientRect:function(){if(Object(i.isDataThread)())return{};var e=c.$$&&c.$$.getBoundingClientRect();return e?m({x:e.x,y:e.y,width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left}):{}},animate:function(e,t,n){e=w(e);for(var r=Object(f.animationOptionHandler)(e,t),o=0;o<r.length;++o){var i=Math.random()+"-"+ +new Date,s=window.__webviewId__,u="animeJS"===r[o].type;delete r[o].type;var l={nodeId:c.getNodeId(),webviewId:s,options:r[o],selector:"#"+c.$$.id,reqId:i,type:u?"animeJS":void 0,fromWxs:!0};if(o===r.length-1){if(l.hasCallback="function"==typeof n,"function"==typeof n)a.default.instance.applyAnimationCbMap[i]=n;l.isLastAnimation=!0,Object(d.setNodeAnimationInfo)(l)}else l.hasCallback=!1,l.isLastAnimation=!1,Object(d.setNodeAnimationInfo)(l)}},clearAnimation:function(e,t){var n=Math.random()+"-"+ +new Date,r=a.default.instance,o=!1;"function"==typeof t?(e=w(e),r.clearAnimationCbMap[n]=t,o=!0):"function"==typeof e&&(r.clearAnimationCbMap[n]=e,o=!0);var i={nodeId:c.getNodeId(),webviewId:window.__webviewId__,options:e,selector:"#"+c.$$.id,reqId:n,fromWxs:!0,hasCallback:o};Object(d.clearNodeAnimationInfo)(i)}};return Object.freeze(b),b},D=function(e,t){var n=e.ownerShadowRoot?e.ownerShadowRoot.__wxHost:window.__DOMTree__,r=t?n:e;return g=!!e.ownerShadowRoot,P(r,C(r))},j=null,x=[],R=function(e,t){!e.wxsObserver||Object(i.isDataThread)()||c.default.restoring||(x.push({node:e,props:t}),j||(j=window.requestAnimationFrame((function(){j=null;var e=x;x=[],e.forEach((function(e){!function(e,t){for(var n in e.wxsObserver)if(v.call(t,n)&&e.wxsObserver[n]&&"function"==typeof e.wxsObserver[n].observer){var r=e.wxsObserver[n].value;h.safeCallback("WXS Observer",e.wxsObserver[n].observer,null,[m(t[n]),m(r),m(D(e,!0),!0),m(D(e),!0)],e.ownerShadowRoot?e.ownerShadowRoot.__wxHost:void 0),e.wxsObserver[n].value=t[n]}}(e.node,e.props)}))}))))},M=function(e){var t=Object(r.default)(e,5),n=t[0],o=t[1],i=t[2],s=t[3],c=t[4];if(s||(s={}),o){var u=a.default.get(n);if(!u)return;var l=u.nodeId.getNodeById(o);if(!l)return;var d=h.Element.getMethodCaller(l);d&&"function"==typeof d[i]&&(c?Object(p.wrapTapMark)((function(){d[i](s)})):d[i](s))}else{var f=__appServiceEngine__.getCurrentPagesByDomain("");if(!f.length)return;var v=f[f.length-1];v&&"function"==typeof v[i]&&(c?Object(p.wrapTapMark)((function(){v[i](s)})):v[i](s))}};Object(i.isDataThread)()&&__appServiceSDK__.onCallMethodFromWxs(M);var N=function(e,t,n){if(t.__wxsStyle||t.__wxsClass){var r={wxsStyle:t.__wxsStyle,wxsClass:t.__wxsClass,index:n,wxsState:w(t.__wxsState)};if(t.ownerShadowRoot&&a.default.instance){var o=a.default.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);e._custom=e._custom||{},(e=e._custom)[o]=e[o]||{},e=e[o]}e[t.is]=e[t.is]||[],e[t.is].push(r)}},L=function(e,t,n){if(e){var r=null;if(t.ownerShadowRoot&&a.default.instance&&e._custom){var o=a.default.instance.nodeId.getNodeId(t.ownerShadowRoot.__wxHost);if(!(e=e._custom)[o])return;e=e[o]}e[t.is]&&e[t.is].length&&e[t.is][0]&&e[t.is][0].index===n&&(r=e[t.is].shift()),r&&function(e,t){if(e.__wxsStyle=t.wxsStyle,e.__wxsClass=t.wxsClass,e.__wxsState=m(t.wxsState),t.wxsStyle){var n=function(){var t=window.wx.transformRpx(e.__wxsStyle,!0);e.setNodeStyle(t,s.STYLE_SEGMENT_INDEX.WXS_STYLE)};n(),Object(u.registerResizer)(e,s.STYLE_SEGMENT_INDEX.WXS_STYLE,n)}t.wxsClass&&(e.class=O(" ",e.class,t.wxsClass))}(t,r)}},B=function(e){if(!Object(i.isDataThread)()&&e){var t=g?a.default.instance.nodeId.getNodeById(a.default.instance.rootNodeId):window.__DOMTree__;t&&(e.wxsPageState=t.__wxsState)}},F=function(e){if(!Object(i.isDataThread)()&&e){var t=g?a.default.instance.nodeId.getNodeById(a.default.instance.rootNodeId):window.__DOMTree__;t&&(t.__wxsState=e.wxsPageState)}},W=function(e){if(!Object(i.isDataThread)()&&e){var t=window.__TAB_BAR__;t&&(e.wxsTabRootState=w(t.__wxsState))}},U=function(e){if(!Object(i.isDataThread)()&&e){var t=window.__TAB_BAR__;t&&(t.__wxsState=m(e.wxsTabRootState))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"reportPluginNodeCreation",(function(){return c})),n.d(t,"addFlowCount",(function(){return f})),n.d(t,"addGenFuncTime",(function(){return p})),n.d(t,"reportFlow",(function(){return h})),n.d(t,"reportFlowCombined",(function(){return w})),n.d(t,"reportFlowFlushCombined",(function(){return O})),n.d(t,"setLazyLoadReportField",(function(){return I})),n.d(t,"startNewLazyLoadReport",(function(){return E}));var r=n(0),o=n(2),i=n(3),a=Object(i.getExparser)(),s={},c=function(e,t){var n=a.Component.getComponentOptions(e).domain;if("/"!==n&&"//"!==n&&n){var i=n.split("/",1)[0],c=Object(r.isDataThread)()?t:o.default.instance,u=c.viewId;if(s[u]||(s[u]={}),!s[u][i]){s[u][i]=!0;var l=[i,__appServiceSDK__.pluginInfos[i].version,c.rootCompName,__appServiceSDK__.getLaunchOptionsSync().sessionid||__appServiceSDK__.getLaunchOptionsSync().sessionId||"",0,""].map(encodeURIComponent).join(",");"undefined"!=typeof Reporter&&(Reporter.reportKeyValue({key:"PluginDisplay",value:l,force:!0}),Reporter.reportIDKey({key:"pluginDisplayInPage",force:!0}))}}},u=0,l=0,d=0,f=function(){u+=1},p=function(e){l+=1,d+=e},h=function(e,t,n,o){var i=n-t,a=n-e,s=Math.ceil(d/(l||1)),c=[u,1,i,l,s,Object(r.isDataThread)()?1:2,a,o].map(encodeURIComponent).join(",");u=0,l=0,d=0,"undefined"!=typeof Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:c,force:!0})},v=0,g=0,_=0,b=0,y=0,m=0,w=function(e,t,n){return v+=u,_+=n-t,b+=l,y+=d,m+=n-e,u=0,l=0,d=0,g+=1},O=function(e){var t=Math.ceil(_/(g||1)),n=Math.ceil(y/(b||1)),o=Math.ceil(m/(g||1)),i=[v,g,t,b,n,Object(r.isDataThread)()?1:2,o,e].map(encodeURIComponent).join(",");"undefined"!=typeof Reporter&&Reporter.reportKeyValue({key:"SetDataPerf",value:i,force:!0})},S=function(){},I=function(e,t){S(e,t)},E=function(){var e=["libVersion","isFirstPage","isWebview","totalComps","loadedComps","lazyedComps","loadTime","lazyLoadTime"],t=new Set(e),n={},r=!1;(S=function(o,i){r||(n[o]=i,t.has(o)&&t.delete(o),0===t.size&&(!function(){if("undefined"!=typeof Reporter){var t=e.map((function(e){return encodeURIComponent(n[e])})).join(",");Reporter.reportKeyValue({key:"LazyCodeLoading",value:t,immediately:!0})}}(),r=!0))})("libVersion",wx.version.version)}},function(e,t,n){"use strict";n.r(t),n.d(t,"initBannedMap",(function(){return d})),n.d(t,"sendBannedMap",(function(){return f})),n.d(t,"banComponentNode",(function(){return p})),n.d(t,"banNode",(function(){return h})),n.d(t,"checkAndBanComponent",(function(){return g})),n.d(t,"initBannedListener",(function(){return _}));var r=n(6),o=n(1),i=n(0),a=n(2),s=n(3),c=Object(s.getExparser)(),u=null,l=null,d=function(e){0!==Object.keys(e).length&&(u=e,a.default.listViewId().forEach((function(t){Object(i.sendData)(o.SYNC_EVENT_NAME.BANNING_MAP,[e],t)})))},f=function(e){u&&Object(i.sendData)(o.SYNC_EVENT_NAME.BANNING_MAP,[u],e)},p=function(e){e.$$.style.display="none"},h=function(e){!function e(t){t instanceof c.Component?p(t):t instanceof c.VirtualNode?t.childNodes.forEach((function(t){e(t)})):t instanceof c.TextNode&&(t.textContent=""),t.__banned=!0}(e)},v=function(e,t){h(e),function(e,t){l||(l=c.registerElement({options:{renderingMode:"native"}}));var n=e.createComponent("wx-hint",l),r=document.createElement("div");r.innerText=t.hint,n.$$.appendChild(r),e.appendChild(n,e.childNodes[0])}(e,t)},g=function(e){if(u){var t=c.Component.getComponentOptions(e).domain.split("/",1)[0],n=e.shadowRoot;u[t]&&v(n,u[t])}},_=function(){Object(i.setDataListener)(o.SYNC_EVENT_NAME.BANNING_MAP,(function(e){!function(e){u||(u=e,function e(t){if(t instanceof c.Component){var n=c.Component.getComponentOptions(t).domain;if("//"!==n){var r=n.split("/",1)[0],o=t.shadowRoot;u[r]?v(o,u[r]):e(o)}}t instanceof c.Element&&t.childNodes.forEach((function(t){e(t)}))}(window.__DOMTree__))}(Object(r.default)(e,1)[0])}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"updateListener",(function(){return r})),n.d(t,"updatedWxAppCode",(function(){return i})),n.d(t,"addUpdateListener",(function(){return a})),n.d(t,"enableUpdateListener",(function(){return s})),n.d(t,"isUpdateListenerEnabled",(function(){return c}));var r=Object.create(null),o=!1,i={},a=function(e,t){o&&(r[e]=t)},s=function(){o=!0},c=function(){return o}},function(e,t,n){"use strict";n.r(t),n.d(t,"endTapMark",(function(){return i})),n.d(t,"beginTapMark",(function(){return a})),n.d(t,"wrapTapMark",(function(){return s})),n.d(t,"checkTapMark",(function(){return c}));var r=0,o=setTimeout,i=function(e){r===e&&(r=0)},a=function(){return r=Date.now()+Math.random()},s=function(e){var t,n=a();try{t=e(n)}catch(e){throw o((function(){i(n)}),0),e}return o((function(){i(n)}),0),t},c=function(){return!!r}},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"generateVirtualTree",(function(){return b})),n.d(t,"dumpVirtualTreeToString",(function(){return y})),n.d(t,"resetComponentNode",(function(){return m})),n.d(t,"virtualTreeToExparserNode",(function(){return w}));var r=n(7),o=n(24),i=n(2),a=n(22),s=n(1),c=n(0),u=n(9),l=n(5),d=n(10),f=n(26),p=n(11),h=n(3),v=Object(h.getExparser)(),g=v.dataUtils.deepCopy,_={tag:"shadow",children:[]},b=function(t,n){var r=Date.now(),o=t?t(n,null,e):_;return Object(u.addGenFuncTime)(Date.now()-r),o.tag="shadow",o},y=function e(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="",o=0;o<n;o++)r+="--";return"string"==typeof t?r+t+"\n":(r+="<"+t.tag+">\n",t.children&&t.children.forEach((function(t){r+=e(t,n+1)})),r)},m=function(e,t){if(Object(p.isUpdateListenerEnabled)()){Object(c.isDataThread)()&&(t.operationFlow.start(Date.now()),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_RESET,t.nodeId.getNodeId(e)]));var n="";e===t.root?n="body":e===t.tabRoot&&(n="tab-bar");var r=e.__vtObj,o=e.ownerShadowRoot?e.ownerShadowRoot.createComponent(r.tag,void 0,r.generics,t):v.createElement(n,v.Component._list[e.is],t);if(Object(c.isDataThread)())t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_RESET]);else if(t.operationFlow.iterator.nextStep()[0]!==s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_RESET)throw new Error("Expect FLOW_HOT_UPDATE_RESET but get another");var i=t.nodeId.getNodeId(e);if(t.nodeId.removeNode(e),t.nodeId.allocNodeId(o,i),e===t.root){v.Element.pretendDetached(e),t.root=o,Object(c.isDataThread)()||(window.__DOMTree__=o,document.body=o.$$),v.Element.pretendAttached(o);var a={},u=!1;Object.keys(t.initialRootData).forEach((function(e){v.Component.hasProperty(o,e)&&(a[e]=t.initialRootData[e],u=!0)})),u&&t.root.setData(a)}else if(e===t.tabRoot)t.tabRoot=o,Object(c.isDataThread)()||(window.__TAB_BAR__=o,e.parentNode.replaceChild(o,e));else{o.__vtObj=r;var l=r.attr;for(Object(f.applyProperties)(o,l,r.raw,r.rawAttr);e.childNodes.length;)o.appendChild(e.childNodes[0]);e.parentNode.replaceChild(o,e)}Object(c.isDataThread)()&&t.operationFlow.end()}},w=function e(t,n,s,l,d){var f=null,p=null;if(Object(c.isDataThread)()||l||(l=i.default.instance),"shadow"===t.tag&&n)s=f=v.ShadowRoot.create(n);else if("virtual"===t.tag||"shadow"===t.tag){var h="virtual";1===t.wxXCkey||3===t.wxXCkey?h="wx:if":2!==t.wxXCkey&&4!==t.wxXCkey||(h="wx:for"),f=s.createVirtualNode(h),v.Element.setInheritSlots(f),Object(c.isDataThread)()?f.__treeManager__=l:f.__wxVkey__=t.wxVkey}else if("wx-slot"===t.tag)f=s.createVirtualNode("slot"),v.Element.setSlotName(f,"");else{var g=s.tagNameUsed(t.tag);if(Object(c.isDataThread)()&&!g)(f=s.createVirtualNode(t.tag)).__treeManager__=l;else if(g){var _=s.getHostNode().__using[t.tag],b=s.getHostNode().is,y=Object(a.getLazyCompPlaceholder)(b)[t.tag];Object(a.shouldUsePlaceholder)(l.viewId,_)&&void 0!==y?((f=s.createComponent(y,void 0,t.generics,l)).__placeholder__=!0,p=function(e){Object(a.arrangePlaceholderReplace)(_,e,l,(function(){var e=s.createComponent(t.tag,void 0,t.generics,l);O(t,e,l,d),Object(o.default)(f.childNodes).forEach((function(t){f.removeChild(t),e.appendChild(t)})),f.parentNode&&f.parentNode.replaceChild(e,f),Object(c.isDataThread)()&&g&&Object(u.reportPluginNodeCreation)(e,l)}))}):(f=s.createComponent(t.tag,void 0,t.generics,l),Object(c.isDataThread)()&&g&&Object(u.reportPluginNodeCreation)(f,l))}else f=s.createComponent(t.tag,void 0,t.generics,l)}O(t,f,l,d),p&&p(l.nodeId.getNodeId(f));var m=t.children;if(m)for(var w=0;w<m.length;w++){var S=m[w];if(null!=S)if("object"===Object(r.default)(S)){var I=e(S,null,s,l,d);f.appendChild(I)}else{var E=s.createTextNode(S);f.appendChild(E)}}return f},O=function(e,t,n,r){if(Object(p.isUpdateListenerEnabled)()&&(t.__vtObj=e),3!==e.wxXCkey&&4!==e.wxXCkey||(Object(c.isDataThread)()||window.__customComponentMode__)&&(t.__wxDynamicSync__=4===e.wxXCkey?"wx:for":"wx:if"),!Object(c.isDataThread)()){if(e.extraAttr)for(var o in e.extraAttr)t.setAttribute(o,e.extraAttr[o]);void 0!==e.wxScopeData&&(t.__wxScopeData__=e.wxScopeData)}var a=t.__component__,u=t.__placeholder__;if(a||u)if(Object(c.isDataThread)())v.Element.getMethodCaller(t).__wxExparserNodeId__=n.nodeId.allocNodeId(t,""),n.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_CREATE_NODE,n.nodeId.getNodeId(t)]);else{if(n=i.default.instance,l.default.restoring){var h=l.default.idDataMap[n.nodeId.getNodeId(t)];v.Component.replaceWholeData(t,h,null)}else{var _=n.operationFlow.iterator.nextStep();if(_[0]!==s.SYNC_EVENT_NAME.FLOW_CREATE_NODE)throw new Error("Framework inner error (expect FLOW_CREATE_NODE but get another)");n.nodeId.allocNodeId(t,_[1])}Object(c.inDevtoolsWebview)()&&!u&&t.setAttribute("exparser:info-custom-component",t.__componentInstanceId),Object(d.checkAndBanComponent)(t),t.setAttribute("is",t.is)}var b=r?g(e.attr):e.attr;Object(f.applyProperties)(t,b,e.raw,e.rawAttr)}}.call(this,n(32))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",(function(){return o}))},function(e,t,n){"use strict";n.r(t),n.d(t,"getNodeById",(function(){return s})),n.d(t,"getNodeId",(function(){return c})),n.d(t,"getRootNodeId",(function(){return u}));var r=n(0),o=n(2),i=n(22);n.d(t,"requestViewInfo",(function(){return i.requestViewInfo})),n.d(t,"endViewInfoCallback",(function(){return i.endViewInfoCallback})),n.d(t,"setModelValueData",(function(){return i.setModelValueData})),n.d(t,"getLazyCompPlaceholder",(function(){return i.getLazyCompPlaceholder})),n.d(t,"componentLoaded",(function(){return i.componentLoaded})),n.d(t,"shouldUsePlaceholder",(function(){return i.shouldUsePlaceholder})),n.d(t,"getLoadedFilesInView",(function(){return i.getLoadedFilesInView})),n.d(t,"restoreLoadComponentDef",(function(){return i.restoreLoadComponentDef})),n.d(t,"arrangePlaceholderReplace",(function(){return i.arrangePlaceholderReplace})),n.d(t,"getOwnerPluginAppId",(function(){return i.getOwnerPluginAppId})),n.d(t,"Behavior",(function(){return i.Behavior})),n.d(t,"CustomComponent",(function(){return i.CustomComponent})),n.d(t,"Component",(function(){return i.Component})),n.d(t,"Page",(function(){return i.Page})),n.d(t,"initViewThread",(function(){return i.initViewThread})),n.d(t,"runComponentDef",(function(){return i.runComponentDef})),n.d(t,"sendTabBarCreationRequest",(function(){return i.sendTabBarCreationRequest})),n.d(t,"addView",(function(){return i.addView})),n.d(t,"attachView",(function(){return i.attachView})),n.d(t,"removeView",(function(){return i.removeView}));var a=n(18);n.d(t,"componentAliases",(function(){return a.componentAliases})),n.d(t,"componentPathToAlias",(function(){return a.componentPathToAlias})),n.d(t,"getDomainByPluginId",(function(){return a.getDomainByPluginId})),n.d(t,"publishDomainComponents",(function(){return a.publishDomainComponents}));var s=function(e,t){if(Object(r.isDataThread)()){var n=o.default.get(t);return n?n.nodeId.getNodeById(e):null}return o.default.instance?o.default.instance.nodeId.getNodeById(e):null},c=function(e,t){return Object(r.isDataThread)()?o.default.get(t).nodeId.getNodeId(e):o.default.instance?o.default.instance.nodeId.getNodeId(e):""},u=function(e){if(Object(r.isDataThread)()){var t=o.default.get(e);return t?t.rootNodeId:""}return o.default.instance.rootNodeId}},function(e,t,n){"use strict";n.r(t),n.d(t,"registerResizer",(function(){return s})),n.d(t,"unregisterResizer",(function(){return c})),n.d(t,"registerResizeListener",(function(){return u}));var r=n(3),o=Object(r.getExparser)(),i={},a=1,s=function(e,t,n){void 0===e.__resizers?(e.__resizers=[],function(e){var t=a++;i[t]=e,o.Observer.create((function(e){"detached"===e.status&&delete i[t]})).observe(e,{attachStatus:!0})}(e),e.__resizers[t]=n):e.__resizers[t]=n},c=function(e,t){void 0!==e.__resizers&&(e.__resizers[t]=void 0)},u=function(){wx.onWindowResize((function(e){var t=e.size,n={width:t.windowWidth,height:t.windowHeight};if(window.__rpxRecalculatingFuncs__){window.__rpxRecalculatingFuncs__.forEach((function(e){e(n)}));for(var r=document.getElementsByTagName("style"),o=0;o<r.length;o++)"string"==typeof r[o].getAttribute("wxss:path")&&(r[o].innerHTML=r[o].innerHTML+".wx-trigger-chrome-media-query-update { height: "+Math.random()+"px; }")}for(var a in i){i[a].__resizers.forEach((function(e){e&&e(n)}))}}))}},function(e,t,n){"use strict";n.r(t),n.d(t,"componentAliases",(function(){return i})),n.d(t,"componentPathToAlias",(function(){return a})),n.d(t,"getDomainByPluginId",(function(){return s})),n.d(t,"publishDomainComponents",(function(){return u}));var r=n(3),o=Object(r.getExparser)(),i={},a={},s=function(e,t){return e+"/"+t},c=function(e,t,n){var r=t.match(/^plugin-private:\/\/(.*?)\//);if(!r)return!1;var c=r[1];if(s(c,"0")!==e)return!1;var u=n.match(/^plugin:\/\/(.*?)\//);if(!u)return!1;var l=u[1];return s(l,"0")===e&&(o.Component._list[n]?(console.error('"'+n+'" has been used as another component or page. Please do not register multiple components or pages with the same alias.'),!1):(o.Component._list[n]=o.Component._list[t],i[n]=t,a[t]=n,!0))},u=function(e,t){for(var n in t)c(e,t[n],n)}},function(e,t,n){"use strict";n.r(t),n.d(t,"clearNodeAnimationInfo",(function(){return O})),n.d(t,"setNodeNextAnimationInfo",(function(){return S})),n.d(t,"wrapAnimationOptions",(function(){return I})),n.d(t,"setNodeAnimationInfo",(function(){return E})),n.d(t,"getNodeInfo",(function(){return C})),n.d(t,"getViewInfo",(function(){return T}));var r=n(7),o=n(17),i=n(0),a=n(1),s=n(10),c=n(16),u=n(21),l=n(3),d=n(30),f=n(29),p=n(2),h=Object(l.getExparser)(),v=void 0!==wx&&wx.transformRpx,g={},_={},b=0,y=1,m=2,w=function(e){return Object.keys(e).filter((function(t){return!(/transform|transition/i.test(t)&&""===e[t]||""===t.trim()||void 0===e[t]||""===e[t]||!isNaN(parseInt(t,10)))})).map((function(t){return t.replace(/([A-Z]{1})/g,(function(e){return"-"+e.toLowerCase()}))+":"+e[t]})).join(";")},O=function e(t,n){var r=t.nodeId,s=t.webviewId,l=t.options,d=t.selector,f=t.reqId,g=t.hasCallback,y=t.fromWxs,m=Object(c.getNodeById)(r,s);if(m){var O=m.shadowRoot,S=n||O.querySelectorAll(d);if(n){var I=function(){if(y){var e=p.default.instance,t=e.clearAnimationCbMap[f];"function"==typeof t&&(delete e.clearAnimationCbMap[f],h.safeCallback("Clear Animation",t,null,[]))}else Object(i.sendData)(a.SYNC_EVENT_NAME.CLEAR_ANIMATION_COMPLETE,{reqId:f})};if(Object(u.unbindScrollAnimation)(S),!l||"function"==typeof l||!S.__styleObj)return S.__animeOptions&&(S.__animeOptions.forEach((function(e){return"function"==typeof e.reset&&e.reset()})),S.__animeOptions=[]),S.setNodeStyle("",a.STYLE_SEGMENT_INDEX.ANIMATION),Object(o.unregisterResizer)(S,a.STYLE_SEGMENT_INDEX.ANIMATION),S.__styleObj=null,S.__animateStatus=b,S.__animationPendingQueue=[],void I();var E=S.__styleObj.transform.split(" ");for(var C in l)if(l[C])if(S.__styleObj["backgroundColor"===C?"background-color":C])delete S.__styleObj["backgroundColor"===C?"background-color":C];else for(var T=0;T<E.length;++T)E[T].indexOf(C)>=0&&E.splice(T,1);S.__styleObj.transform=E.join(" "),S.__styleObj["-webkit-transform"]=E.join(" "),S.__styleObj.transition="unset",S.__styleObj.transitionProperty="unset",S.__styleObj["-webkit-transition"]="unset",S.__styleObj["-webkit-transition-property"]="unset";var k=function(e){S.setNodeStyle(v(e,!0),a.STYLE_SEGMENT_INDEX.ANIMATION)};k(w(S.__styleObj)),Object(o.registerResizer)(S,a.STYLE_SEGMENT_INDEX.ANIMATION,k),S.__animateStatus=b,--_[f],0===_[f]&&g&&I()}else{_[f]=S.length;for(var A=0;A<S.length;++A)e(t,S[A])}}},S=function e(t,n){var r=t.nodeId,o=t.webviewId,i=t.selector,a=Object(c.getNodeById)(r,o);if(a){var s=a.shadowRoot,u=n||s.querySelectorAll(i);if(n)u.__animationPendingQueue&&u.__animationPendingQueue.length>0&&setTimeout((function(){u.__animateStatus=m,E(u.__animationPendingQueue.shift(),u,!0)}),32);else for(var l=0;l<u.length;++l)e(JSON.parse(JSON.stringify(t)),u[l])}},I=function(e){Object.keys(e).forEach((function(t){if(d.allowCSSProperties.includes(t)){var n=e[t];"string"==typeof n?e[t]=wx.transformRpx(e[t],!0):"object"===Object(r.default)(n)&&"string"==typeof n.value?e[t].value=wx.transformRpx(e[t].value,!0):Array.isArray(n)&&n.map((function(e){if("string"==typeof e.value)e.value=wx.transformRpx(e.value,!0);else if("string"==typeof e)return wx.transformRpx(e,!0);return e}))}}))},E=function e(t,n,r){wx.nextTick((function(){var u=t.nodeId,l=t.webviewId,d=t.options,_=t.selector,O=t.reqId,E=t.hasCallback,C=t.type,T=t.isLastAnimation,k=t.fromWxs,A=Object(c.getNodeById)(u,l);if(A){var P=A.shadowRoot,D=n||P.querySelectorAll(_);if(n){if(D.__animateStatus===y||D.__animateStatus===m&&!r)return D.__animationPendingQueue||(D.__animationPendingQueue=[]),void D.__animationPendingQueue.push(JSON.parse(JSON.stringify(t)));D.__hasCallback=E,D.__reqId=O,D.__args=JSON.stringify(t);var j=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom"],x=["opacity","backgroundColor","width","height","left","top","bottom"],R=["rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skewX","skewY","translateX","translateY","translateZ"],M="animeJS"===C,N=function(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(D.__animateStatus===y){if(--g[D.__reqId],D.__animationPendingQueue&&D.__animationPendingQueue.length>0&&!D.__hasCallback?(D.__animateStatus=m,e(D.__animationPendingQueue.shift(),D,!0)):D.__animateStatus=b,"function"==typeof n){D.__styleObj.transition="unset",D.__styleObj.transitionProperty="unset",D.__styleObj["-webkit-transition"]="unset",D.__styleObj["-webkit-transition-property"]="unset";var o=w(D.__styleObj);n(o)}if(0===g[D.__reqId]&&D.__hasCallback&&r)if(k){var s=p.default.instance,c=s.applyAnimationCbMap[D.__reqId];"function"==typeof c&&(delete s.applyAnimationCbMap[D.__reqId],h.safeCallback("Animation",c,null,[])),S(t)}else Object(i.sendData)(a.SYNC_EVENT_NAME.ANIMATION_TRANSITION_END,{reqId:D.__reqId,args:D.__args})}},L=[];for(var B in d)j.indexOf(B)>=0&&(x.indexOf(B)>=0?L.push({type:"style",args:["backgroundColor"===B?"background-color":B,d[B]]}):R.indexOf(B)>=0?L.push({type:B,args:[d[B]]}):L.push({type:B,args:d[B]}));var F={transition:{delay:d.delay||0,duration:d.duration||0,timingFunction:d.ease||"linear"},transformOrigin:d.transformOrigin||"50% 50% 0"},W={option:F,animates:L},U=wx.animationToStyle(W),V=U.transition,G=U.transitionProperty,H=U.transform,z=U.transformOrigin,q=U.style,Y=D.__styleObj?Object.assign({},D.__styleObj,{transition:V,transform:H,transitionProperty:G,transformOrigin:z}):{transition:V,transform:H,transitionProperty:G,transformOrigin:z};for(var K in Y["-webkit-transition"]=Y.transition,Y["-webkit-transform"]=Y.transform,Y["-webkit-transition-property"]=Y.transitionProperty,Y["-webkit-transform-origin"]=Y.transformOrigin,q)Y[K]=q[K];if(D.__styleObj&&Y.transform===D.__styleObj.transform){var J=!0;for(var X in Y)x.indexOf(X)>=0&&D.__styleObj[X]!==Y[X]&&(J=!1);if(J)return void setTimeout((function(){D.__animationPendingQueue&&D.__animationPendingQueue.length>0&&e(D.__animationPendingQueue.shift(),D,!0)}),F.duration)}if(0===F.transition.duration?(Y.transition="unset",Y.transitionProperty="unset",Y["-webkit-transition"]="unset",Y["-webkit-transition-property"]="unset"):D.__animateStatus=y,D.__styleObj=Y,M){d.targets=D,d.ease&&(d.easing=d.ease,delete d.ease),I(d),D.__animateStatus=y,D.__banned&&Object(s.banComponentNode)(D);var $=d.complete;d.complete=function(){N(void 0,T),"function"==typeof $&&$.apply(void 0,arguments)};var Z=Object(f.default)(d);D.__animeOptions||(D.__animeOptions=[]),D.__animeOptions.push(Z)}else{var Q=w(Y),ee=function(e){var t=function(){D.setNodeStyle(v(e,!0),a.STYLE_SEGMENT_INDEX.ANIMATION)};t(),Object(o.registerResizer)(D,a.STYLE_SEGMENT_INDEX.ANIMATION,t)};0===F.transition.duration?ee(Q):setTimeout((function(){ee(Q)}),32),D.__banned&&Object(s.banComponentNode)(D),D.__animationListener||(D.addListener("transitionend",(function(){N(ee)})),D.__animationListener=!0),0===F.transition.duration&&(D.__animationPendingQueue&&D.__animationPendingQueue.length>0?(D.__animateStatus=m,e(D.__animationPendingQueue.shift(),D,!0)):D.__animateStatus=b)}}else{g[O]=D.length;for(var te=0;te<D.length;++te)e(JSON.parse(JSON.stringify(t)),D[te])}}}))},C=function(e,t){var n=e.$$,r={};if(t.id&&(r.id=e.id||""),t.dataset&&(r.dataset=e.dataset||{}),t.mark&&(r.mark=e.collectMarks()||{}),t.rect||t.size){var o=n.getBoundingClientRect();t.rect&&(r.left=o.left,r.right=o.right,r.top=o.top,r.bottom=o.bottom),t.size&&(r.width=o.width,r.height=o.height)}if(t.properties&&t.properties.forEach((function(t){var n=t.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));h.Component.hasPublicProperty(e,n)&&(r[n]=e[n])})),t.scrollOffset)if(e.hasBehavior("wx-positioning-container")){var i=e.getScrollPosition();r.scrollLeft=i.scrollLeft,r.scrollTop=i.scrollTop,r.scrollWidth=i.scrollWidth,r.scrollHeight=i.scrollHeight}else r.scrollLeft=0,r.scrollTop=0,r.scrollWidth=0,r.scrollHeight=0;if(t.computedStyle&&t.computedStyle.length)for(var a=window.getComputedStyle(n),s=0,c=t.computedStyle.length;s<c;s++){var u=t.computedStyle[s];u&&void 0!==a[u]&&(r[u]=a[u])}return t.context&&(r.contextIs=e.is,r.contextId="function"==typeof e.getContextId&&e.getContextId(),r.contextCanvasId=e.canvasId||""),t.node&&(r.nodeIs=e.is,r.nodeId="function"==typeof e.getContextId&&e.getContextId(),r.nodeCanvasId=e.canvasId||"",r.nodeCanvasType=e.type||"",r.nodeNodeId=e.getNodeId()),r},T=function(e,t){var n=[],r=e.pluginId;return e.queue.forEach((function(e){var o=e.component,i=e.selector,a=e.single,s=e.fields,c=null;if(0===o)c=function(e){var t={};return e.id&&(t.id=""),e.dataset&&(t.dataset={}),e.mark&&(t.mark={}),e.rect&&(t.left=0,t.right=0,t.top=0,t.bottom=0),e.size&&(t.width=document.documentElement.clientWidth,t.height=document.documentElement.clientHeight),e.scrollOffset&&(t.scrollLeft=document.documentElement.scrollLeft||document.body.scrollLeft||0,t.scrollTop=document.documentElement.scrollTop||document.body.scrollTop||0,t.scrollWidth=document.documentElement.scrollWidth||document.body.scrollWidth||0,t.scrollHeight=document.documentElement.scrollHeight||document.body.scrollHeight||0),t}(s);else{var u=t.nodeId.getNodeById(o),l=!1;if(u?(h.Component.getComponentOptions(u).writeOnly&&(l=!0),u=u.shadowRoot):r||(u=window.__DOMTree__?window.__DOMTree__.shadowRoot:null),a){var d=u&&!l?u.querySelector(i):null;c=d?C(d,s):null}else{var f=u&&!l?u.querySelectorAll(i):[];c=[];for(var p=0;p<f.length;p++)c.push(C(f[p],s))}}n.push(c)})),n}},function(e,t,n){"use strict";n.r(t),n.d(t,"convertRouteToComponentAlias",(function(){return s})),n.d(t,"convertComponentAliasToRoute",(function(){return c})),n.d(t,"getPluginSubPackagePrefix",(function(){return u})),n.d(t,"getPluginRoutePrefix",(function(){return l}));var r=n(3),o=Object(r.getExparser)(),i=null,a=function(){i={};var e=null;__wxConfig&&__wxConfig.plugins?e=__wxConfig.plugins:"undefined"!=typeof window&&window&&window.__wxConfigAppService__&&window.__wxConfigAppService__.plugins&&(e=window.__wxConfigAppService__.plugins);var t=!1;if(e)for(var n in e){var r=e[n].provider,o=e[n].subpackage;if(void 0!==o){t=!0;var a=o||"";"__APP__"===a&&(a=""),"/"===a[0]&&(a=a.slice(1)),a&&"/"!==a.slice(-1)&&(a+="/"),i[r]=a}}if(!t){var s;if(__wxConfig&&__wxConfig.subPackages)s=__wxConfig.subPackages;else{if("undefined"==typeof window||!window||!window.__subPackages)return;s=window.__subPackages}s.length&&s.forEach((function(e){if(e){var t=e.root||"";if(t&&"/"!==t.slice(-1)&&(t+="/"),e.plugins)for(var n in e.plugins)if(Object.prototype.hasOwnProperty.call(e.plugins,n)){var r=e.plugins[n]&&e.plugins[n].provider;r&&(i[r]=t)}}}))}},s=function(e){var t=e.match(/(?:^|\/)__(wx|plugin)__\/(.*)$/);return t?"wx"===t[1]?"wx://"+t[2]:"plugin-private://"+t[2]:e},c=function(e){return i||a(),(o.Component._list[e]&&o.Component._list[e].is||e).replace(/^plugin-private:\/\/([0-9a-zA-Z]+)\//,(function(e,t){return(i[t]||"")+"__plugin__/"+t+"/"})).replace(/^wx:\/\//,"__wx__/")},u=function(e){return i[e]||""},l=function(e){return i||a(),(i[e]||"")+"__plugin__/"+e+"/"}},function(e,t,n){"use strict";n.r(t),n.d(t,"bindScrollAnimations",(function(){return _})),n.d(t,"unbindScrollAnimation",(function(){return b})),n.d(t,"animationOptionHandler",(function(){return y}));var r=n(14),o=n(15),i=n(29),a=n(30),s=Object.assign,c=Object.keys,u=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","delay","duration","offset","easing"],l=["linear","ease","ease-in","ease-out","ease-in-out","cubic-bezier","steps"],d=function(e,t){return e=__webViewSDK__.predefinedColor[e]||e,t?[e,e]:e},f=function(e,t){var n=e.length,r=0;return e.map((function(e,o){var i,a={};i="offset"in e?e.offset:1===n?1:o/(n-1);var l=r===i;return c(e).forEach((function(t){u.indexOf(t)>-1||("transform"!==t?a[t]=d(e[t],l):s(a,function(e,t){if("none"===(e=e.toLowerCase().trim()))return{};for(var n,r={},o=u.map((function(e){return e.toLowerCase()})),i={scale3d:"AAA",translate:"Aa",translate3d:"AAA",rotate3d:"AAAA",matrix3d:"AAAAAA",matrix:"AAAAAAAAAAAAAAAA"},a=["rotate3d","matrix","matrix3d"],s=/\s*(\w+)\(([^)]*)\)/g,l=0;n=s.exec(e);){if(n.index!==l)return{};l=n.index+n[0].length;var f=n[1],p=n[2].split(",");if(o.indexOf(f)>-1)r[f.replace(/(x|y|z)$/,(function(e){return e.toUpperCase()}))]=d(p.join(" "),t);else{if(!(c(i).indexOf(f)>-1))return{};var h=i[f];if(p.length>h.length)return{};for(var v=h.length-1;v>=0;v--){var g=h[v];if("a"!==g||p[v]){if("A"===g&&!p[v])return{};-1===a.indexOf(f)&&(r[f.replace("3d","")+String.fromCharCode(88+v)]=d(p[v].trim(),t))}}}}return r}(e[t],l)))})),l?a.duration=0:(a.duration=(i-r)*t,r=i),a}))},p=function(e){for(var t=0;t<l.length&&0!==e.indexOf(l[t]);t++);if(t===l.length)return"linear";switch(e){case"ease":return"cubicBezier(0.25, 0.1, 0.25, 1)";case"ease-in":return"cubicBezier(0.42, 0, 1, 1)";case"ease-out":return"cubicBezier(0, 0, 0.58, 1)";case"ease-in-out":return"cubicBezier(0.42, 0, 0.58, 1)";default:return e.replace(/^cubic-bezier/,"cubicBezier")}},h=function(){function e(t,n){Object(r.default)(this,e),this._nativeSupported="function"==typeof HTMLElement.prototype.animate;var o=t.keyframeOptions,a=this.direction=o.direction;if(this.timeline=n,this._nativeSupported){var c=function(e,t){var n=t.easing;return delete t.easing,e.map((function(e){return e.easing=n,e}))}(t.keyframeSet,o);this._inst=t.element.$$.animate(c,s(o,{fill:"both"})),this._inst.pause()}else this._inst=Object(i.default)({targets:t.element,keyframes:f(t.keyframeSet,o.duration),autoplay:!1,loop:o.iterations===1/0||o.iterations,easing:p(o.easing),direction:"normal",delay:"reverse"===a?o.endDelay:o.delay,endDelay:"reverse"===a?o.delay:o.endDelay});n._driven(this)}return Object(o.default)(e,[{key:"currentTime",set:function(e){if(!isNaN(e)){var t=this._inst;this._nativeSupported?t.currentTime=e:"reverse"===this.direction?t.seek(t.duration-e):t.seek(e)}}},{key:"cancel",value:function(){this._nativeSupported?this._inst.cancel():this._inst.reset(),this.timeline._destroy(),this._inst=null}}]),e}(),v=function(){function e(t,n){if(Object(r.default)(this,e),n.scrollSource){if(this._scrollNode=window.__DOMTree__.shadowRoot.querySelector(n.scrollSource),this._scrollNode||(this._scrollNode=t&&t.querySelector(n.scrollSource)),!this._scrollNode)throw new Error("Cannot find scroll source by "+n.scrollSource+" selector.")}else this._scrollNode=window.__DOMTree__;this.orientation=n.orientation||"vertical",this.startScrollOffset=n.startScrollOffset,this.endScrollOffset=n.endScrollOffset,this.timeRange=n.timeRange,this.fill=n.fill||"both",this._scroll=this._scroll.bind(this)}return Object(o.default)(e,[{key:"_calcCurrentTime",value:function(e,t){var n=this.startScrollOffset,r=this.endScrollOffset,o=this.fill,i=this.timeRange,a=e.scrollTop,s=e.scrollHeight-t.$$.offsetHeight;return"horizontal"===this.orientation&&(a=e.scrollLeft,s=e.scrollWidth-t.$$.offsetWidth),a<n?"none"===o||"forwards"===o?NaN:0:a>=r?r<s&&("none"===o||"backwards"===o)?NaN:i:n>=r?NaN:(a-n)/(r-n)*i}},{key:"_scroll",value:function(){var e=this._calcCurrentTime(this._scrollNode===window.__DOMTree__?window.__DOMTree__.$$:this._scrollNode.getScrollPosition(),this._scrollNode);this._animation.currentTime=e}},{key:"_driven",value:function(e){this._animation=e,this._scrollNode===window.__DOMTree__?document.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.addEventListener("scroll",this._scroll,{capture:!0,passive:!0}),this._scroll()}},{key:"_destroy",value:function(){this._scrollNode===window.__DOMTree__?document.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0}):this._scrollNode.$$.removeEventListener("scroll",this._scroll,{capture:!0,passive:!0})}}]),e}(),g=function(e,t,n,r,o){var i={element:t,keyframeSet:n,keyframeOptions:{delay:r.delay||0,direction:r.direction||"normal",duration:r.duration||0,easing:r.easing||"linear",endDelay:r.endDelay||0,iterations:1}},a=new v(e,o);t.__scrollAnimations=t.__scrollAnimations||[],t.__scrollAnimations.push(new h(i,a))},_=function(e,t){for(var n=e.nodeId,r=e.selector,o=e.options,i=e.duration,a=e.timeline,s=t.nodeId.getNodeById(n),c=(s=s?s.shadowRoot:window.__DOMTree__?window.__DOMTree__.shadowRoot:null)?s.querySelectorAll(r):[],u=0;u<c.length;u++)g(s,c[u],o,{duration:i},a)},b=function(e){(e.__scrollAnimations||[]).forEach((function(e){e.cancel()})),e.__scrollAnimations=[]},y=function(e,t){for(var n=[],r=0;r<e.length;++r)n.push(Object.assign({},e[r]));n[0].offset=0,n[n.length-1].offset=1;for(var o=function(e){n[e].offset=function(e,t){if("number"==typeof t[e].offset)return t[e].offset;for(var n=e+1;n<t.length;++n)if(t[n].offset)return(t[n].offset-t[e-1].offset)/(n-e+1)+t[e-1].offset;return 0}(e,n),n[e].duration=0===e?0:(n[e].offset-n[e-1].offset)*t,a.easeWithAnimeJS.some((function(t){return n[e].ease&&n[e].ease.startsWith(t)}))&&(n[e].type="animeJS")},i=0;i<n.length;++i)o(i);return n}},function(e,t,n){"use strict";n.r(t),n.d(t,"requestViewInfo",(function(){return ce})),n.d(t,"endViewInfoCallback",(function(){return ue})),n.d(t,"setModelValueData",(function(){return je})),n.d(t,"getLazyCompPlaceholder",(function(){return Me})),n.d(t,"componentLoaded",(function(){return Ge})),n.d(t,"shouldUsePlaceholder",(function(){return ze})),n.d(t,"getLoadedFilesInView",(function(){return qe})),n.d(t,"restoreLoadComponentDef",(function(){return Je})),n.d(t,"arrangePlaceholderReplace",(function(){return nt})),n.d(t,"getOwnerPluginAppId",(function(){return ot})),n.d(t,"Behavior",(function(){return ut})),n.d(t,"CustomComponent",(function(){return vt})),n.d(t,"Component",(function(){return yt})),n.d(t,"Page",(function(){return mt})),n.d(t,"initViewThread",(function(){return Et})),n.d(t,"runComponentDef",(function(){return Nt})),n.d(t,"sendTabBarCreationRequest",(function(){return Vt})),n.d(t,"addView",(function(){return Qt})),n.d(t,"attachView",(function(){return en})),n.d(t,"removeView",(function(){return tn}));var r=n(6),o=n(24),i=n(23),a=n(7),s=n(1),c=n(0),u=n(14),l=n(15),d=n(4),f=n(3),p=Object(f.getExparser)(),h=Object.prototype.hasOwnProperty,v=p.dataUtils.deepCopy,g=function(e,t,n,r,o){for(var i=o?v(e):e,s=0;s<t.length;s++){var c=t[s],u=c[0],l=c[1],d=c[2];if(void 0!==l){for(var f=i,p=u[0],g=1;g<u.length;g++)if(null!=(f=f[p])&&f.__wxspec__&&(f=f.__value__),p=u[g],null!=f&&!h.call(f,p)){f=null;break}null!=f&&h.call(f,p)&&(n?null!=d&&"object"===Object(a.default)(l)&&l instanceof Array==d instanceof Array?f[p]={__value__:d,__wxspec__:!0}:null!=f[p]&&f[p].__wxspec__||(f[p]={__value__:f[p],__wxspec__:!0}):f[p]=r?v(l,!1):l)}}return i},_=n(5),b=n(2),y=n(13),m=function(e){if(Object(c.isDataThread)())e.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_MINIPULATE_CHILD]);else if(e.operationFlow.iterator.nextStep()[0]!==s.SYNC_EVENT_NAME.FLOW_MINIPULATE_CHILD)throw new Error("Expect FLOW_MINIPULATE_CHILD but get another")},w=n(10),O=Object.prototype.hasOwnProperty,S=function(e){return"number"==typeof e&&isNaN(e)},I=function(e,t){for(var n=function(e){for(var t={},n=0;n<e.length;++n){var r=e[n],o=r&&r.wxKey;o?O.call(t,o)?r.wxKey=void 0:t[o]=n:S(o)&&(r.wxKey=void 0)}return t}(e),o=function(e){for(var t={},n=[],r=0;r<e.length;++r){var o=e[r],i=o&&o.wxKey;i?O.call(t,i)?(console.warn('For developer:Do not set same key "'+i+'" in wx:key.'),o.wxKey=void 0,n.push(r)):t[i]=r:(S(i)&&(o.wxKey=void 0),n.push(r))}return[t,n]}(t),i=Object(r.default)(o,2),a=i[0],s=i[1],c=[],u=[],l=[],d=0,f=0,p=0;p<e.length;++p){var h=e[p].wxKey;if(h)if(O.call(a,h)){var v=a[h];c.push(t[v])}else u.push(p-f),++f,c.push(null);else if(d<s.length){var g=s[d];c.push(t[g]),++d}else u.push(p-f),++f,c.push(null)}for(var _=c,b=0,y=[],m=0;m<t.length;){for(var w=t[m],I=w&&w.wxKey,E=_[b],C=E&&E.wxKey;null===E;)C=(E=_[++b])&&E.wxKey;b>=_.length?(l.push({oldIndex:n[I],index:m,pos:-1}),++b,++m):C===I?(y.push(b),++b,++m):I?(C?a[C]===m+1?l.push({oldIndex:n[I],index:m,pos:b}):(E=_[++b])&&E.wxKey===I?(y.push(b),++b):(--b,l.push({oldIndex:n[I],index:m,pos:b})):l.push({oldIndex:n[I],index:m,pos:b}),++m):++b}for(var T=0,k=0;k<l.length;k++){var A=l[k].pos;if(-1===A)break;for(;T<y.length&&A>y[T];)T++;T>=y.length?l[k].pos=-1:l[k].pos=y[T]}return{children:c,removes:u,inserts:l}},E=n(26),C=function(e,t,n){if(e!==t&&(!e||n))if(null==t)n.parentNode.removeChild(n);else if("object"===Object(a.default)(t))if("object"!==Object(a.default)(e)||null===e||e.tag!==t.tag||String(e.wxKey)!==String(t.wxKey)||"virtual"===e.tag&&e.wxVkey!==t.wxVkey){var r=Object(c.isDataThread)()?n.__treeManager__:b.default.instance,o=n.parentNode,i=Object(y.virtualTreeToExparserNode)(t,null,o.ownerShadowRoot,r,!1);o&&("wx:for"===o.__wxDynamicSync__||"wx:if"===n.__wxDynamicSync__?(r.nodeId.addNode(i),o.replaceChild(i,n),m(r),r.nodeId.removeNode(n)):o.replaceChild(i,n),n.__banned&&Object(w.banNode)(i))}else{if(t.n&&t.n.length){for(var s=t.n,u=t.attr,l={},d=0;d<s.length;d++){var f=s[d];l[f]=u[f]}Object(E.applyProperties)(n,l,t.raw,t.rawAttr)}void 0!==t.wxScopeData&&(n.__wxScopeData__=t.wxScopeData),T(e,t,n)}else if("string"==typeof e)t!==e&&(n.textContent=t);else{var p=n.ownerShadowRoot.createTextNode(t);n.parentNode.replaceChild(p,n)}},T=function(e,t,n){var r=!!Object(d.getWxmlVersionTag)("customComponents"),o=e.children,i=t.children,a="virtual"===e.tag&&(2===e.wxXCkey||4===e.wxXCkey||void 0===e.wxXCkey)||!r&&o.length!==i.length,s=null,u=null;if(a){var l=I(o,t.children);i=l.children,s=l.removes,u=l.inserts}for(var f=n.childNodes,p=0;p<o.length;p++){var h=o[p],v=i[p];!v&&a||C(h,v,f[p])}a&&function(e,t,n,r){for(var o=Object(c.isDataThread)()?n.__treeManager__:b.default.instance,i=n.childNodes,a=[],s=0;s<t.length;s++){var u=t[s];a.push({node:void 0!==u.oldIndex?i[u.oldIndex]:null,before:u.pos>=0?i[u.pos]:void 0,index:u.index})}for(var l=0;l<e.length;l++){var d=i[e[l]];n.removeChild(d),"wx:for"===i.__wxDynamicSync__&&(m(o),o.nodeId.removeNode(d))}for(var f=0;f<a.length;f++){var p=a[f],h=p.before,v=p.index,g=a[f].node;null===g&&(g=Object(y.virtualTreeToExparserNode)(r[v],null,n.ownerShadowRoot,o,!1)),"wx:for"===n.__wxDynamicSync__?(o.nodeId.addNode(g),n.insertBefore(g,h),m(o)):n.insertBefore(g,h)}n.__banned&&Object(w.banNode)(n)}(s,u,n,t.children)},k=n(11),A=Object(f.getExparser)(),P={},D=1,j=[],x=function(e,t){if(P[e]){var n=P[e],r=j[j.length-1],o=j[j.length-2],i=t(n),a=i.isMergedUpdate,u=i.dataPaths,l=i.pendingStartTimestamp,d=i.updateStartTimestamp,f=i.updateEndTimestamp;Object(c.sendData)(s.SYNC_EVENT_NAME.UPDATE_PERFORMANCE_STAT,[e,{isMergedUpdate:a,dataPaths:u,updateProcessId:r,parentUpdateProcessId:o,pendingStartTimestamp:l,updateStartTimestamp:d,updateEndTimestamp:f}])}};Object(c.isDataThread)()||(Object(c.setDataListener)(s.SYNC_EVENT_NAME.ENABLE_UPDATE_PERFORMANCE_STAT,(function(e){var t=Object(r.default)(e,2),n=t[0],o=t[1];P[n]=o})),Object(c.setDataListener)(s.SYNC_EVENT_NAME.DISABLE_UPDATE_PERFORMANCE_STAT,(function(e){var t=Object(r.default)(e,1)[0];delete P[t]})));var R=Object(f.getExparser)(),M=R.dataUtils.deepCopy,N=function(e){if("object"!==Object(a.default)(e)||!e)return Object(c.isDataThread)()||"undefined"==typeof window||(window.__usingDelayedGwx__=1|(window.__usingDelayedGwx__||0)),e;Object(c.isDataThread)()||"undefined"==typeof window||(window.__usingDelayedGwx__=2|(window.__usingDelayedGwx__||0));var t=e.slice();return t.shift().apply(void 0,Object(o.default)(t))},L=function e(t,n,r){for(var o=t.childNodes,i=0;i<o.length;i++){var a=o[i];a instanceof R.TextNode||(a.__id&&(n[a.__id]=a),void 0!==a.__slotName&&(r[a.__slotName]=a),e(a,n,r))}},B=function(){function e(){Object(u.default)(this,e)}return Object(l.default)(e,[{key:"createInstance",value:function(e,t){var n=new F,r=t;if(Object(c.isDataThread)()||(r=b.default.instance),n._template=this,n._generateFunc=this._generateFunc,n.data=M(this._data),n.idMap=Object.create(null),n.slots=Object.create(null),_.default.restoring){if(_.default.compIdArrIndex>=_.default.compIdArr.length)throw new Error("Component count unmatched while page recovering");r.nodeId.allocNodeId(e,_.default.compIdArr[_.default.compIdArrIndex++]);var o=_.default.idDataMap[r.nodeId.getNodeId(e)];n._virtualTree=Object(y.generateVirtualTree)(this._generateFunc,o)}else n._virtualTree=this._virtualTree;return n.shadowRoot=Object(y.virtualTreeToExparserNode)(n._virtualTree,e,null,t,!0),L(n.shadowRoot,n.idMap,n.slots),n.listeners=[],this._isSimpleComponent||(e.__component__=!0),Object(c.isDataThread)()&&(e.__treeManager__=r,n.shadowRoot.__treeManager__=r,r.operationFlow.registerSetDataCallback((function(){e.triggerLifeTime("ready")}))),n._delayedUpdateValues=null,n}},{key:"updateGenerateFunc",value:function(e){var t=this;this._generateFunc=N(e),this._virtualTree=Object(y.generateVirtualTree)(this._generateFunc,this._initValues),b.default.list().forEach((function(n){[n.root,n.tabRoot].forEach((function(r){r&&Object(d.dfsComponents)(r,1,(function(r){r instanceof R.Component&&r.__templateInstance._template===t&&(r.__templateInstance._generateFunc=e,Object(c.isDataThread)()&&r.__templateInstance._resetShadowChildren(r,r.data,n))}))}))}))}}]),e}();B.create=function(e,t,n,r){var o=new B;o._initValues=n,o._data=t;var i=e.template;return o._generateFunc=N(i.func),o._virtualTree=Object(y.generateVirtualTree)(o._generateFunc,o._initValues),o._isSimpleComponent="simple://"===r.domain.slice(0,9),Object(k.addUpdateListener)(i.path,(function(e){i.func=e,o.updateGenerateFunc(e)})),o};var F=function(){function e(){Object(u.default)(this,e)}return Object(l.default)(e,[{key:"beforeMergeValues",value:function(e,t,n){if(Object(c.isDataThread)())if("number"!=typeof n)e.forEach((function(e,n){void 0!==e[1]?t[n]=!1:(t[n]=!0,console.warn('Setting data field "'+e[0].join(".")+'" to undefined is invalid.'))}));else{for(var r=0;r<n;r++)t[r]=!1;for(var o=n;o<e.length;o++){var i=e[o];void 0!==i[1]?t[o]=!1:(t[o]=!0,console.warn('Setting data field "'+i[0].join(".")+'" to undefined is invalid.'))}}}},{key:"beforeUpdateValues",value:function(e,t,n){if(!Object(c.isDataThread)()&&!("number"!=typeof n)){var r=b.default.instance,o=r.operationFlow.iterator.nextStepIf(s.SYNC_EVENT_NAME.FLOW_DATA_OBSERVER);if(o){var i=o[1];if(e&&i.length){x(r.nodeId.getNodeId(e),(function(e){return{isMergedUpdate:!0,dataPaths:e.withDataPaths?i.map((function(e){return e[0]})):void 0}}));var a=R.Component.getDataProxy(e);a.setChanges(i),a.doUpdates(void 0,!Object(c.isDataThread)())}}}}},{key:"updateValues",value:function(e,t,n,r,o,i){if(!_.default.restoring){var a=null,u="number"!=typeof i;if(Object(c.isDataThread)())if(a=e.__treeManager__,u){a.operationFlow.start(Date.now());var l=[];o.forEach((function(e){void 0!==e[1]&&l.push(e)})),a.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_UPDATE,a.nodeId.getNodeId(e),M(l)])}else{for(var d=[],f=i;f<o.length;f++){var p=o[f];void 0!==p[1]&&d.push(p)}a.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_DATA_OBSERVER,M(d)])}if(this._delayedUpdateValues)this._delayedUpdateValues.push([M(t),n,r,o,i]);else{this._delayedUpdateValues=[];try{this._updateValues(e,t,n,r,o,i);var h=this._delayedUpdateValues;this._delayedUpdateValues=null;for(var v=0;v<h.length;v++){var g=h[v];this._updateValues(e,g[0],g[1],g[2],g[3],g[4])}}catch(e){throw this._delayedUpdateValues=null,e}}u&&Object(c.isDataThread)()&&a.operationFlow.end()}}},{key:"_updateValues",value:function(e,t,n,r,o,i){var a="number"!=typeof i,s=!Object(d.getWxmlVersionTag)("propValueDeepCopy"),c=g(t,o,!0,!1,s),u=Object(y.generateVirtualTree)(this._generateFunc,c);g(t,o,!1,a,!1);var l=this._virtualTree;this._virtualTree=u,C(l,u,this.shadowRoot)}},{key:"_resetShadowChildren",value:function(e,t,n){var r=function(){if(Object(c.isDataThread)())n.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_CHILD]);else if(n.operationFlow.iterator.nextStep()[0]!==s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_CHILD)throw new Error("Expect FLOW_HOT_UPDATE_CHILD but get another")};Object(c.isDataThread)()&&(n.operationFlow.start(Date.now()),n.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE,n.nodeId.getNodeId(e)]));for(var o=this.shadowRoot,i=(this._virtualTree.children||[]).length,a=0;a<i;a++)o.removeChild(o.childNodes[0]);r();var u=Object(y.generateVirtualTree)(this._generateFunc,t);r(),this._virtualTree=u;for(var l=Object(y.virtualTreeToExparserNode)(u,null,e.shadowRoot,n,!0).childNodes,d=l.length,f=0;f<d;f++)o.insertBefore(l[0],o.childNodes[f]);Object(c.isDataThread)()&&n.operationFlow.end()}}]),e}(),W=n(20),U=n(31),V=Object(f.getExparser)(),G=function e(t,n,r){if(t instanceof V.Component){t!==window.__DOMTree__&&(n.compCount++,t.hasBehavior("wx-base")?(r&&n.rootInternalCompCount++,t.hasBehavior("wx-native")&&n.nativeCompCount++):r&&n.rootCustomCompCount++);var o=t===window.__DOMTree__&&r;t.shadowRoot instanceof V.Element&&e(t.shadowRoot,n,o)}for(var i=t.childNodes,a=0,s=i.length;a<s;a++){var c=(i[a]instanceof V.VirtualNode||t===window.__DOMTree__||t===window.__DOMTree__.shadowRoot)&&r;i[a]instanceof V.Element&&e(i[a],n,c)}},H=function(){var e={compCount:0,customCompCount:0,nativeCompCount:0,rootCustomCompCount:0,rootInternalCompCount:0};try{G(window.__DOMTree__,e,!0)}catch(e){}var t=e.rootCustomCompCount,n=e.rootInternalCompCount,r=t+n;return{compCount:e.compCount,customCompCount:e.customCompCount,nativeCompCount:e.nativeCompCount,rootCompCount:r,rootCustomCompCount:t,rootCustomCompRatio:r?Math.floor(100*t/r):0,rootInternalCompCount:n}},z=n(8),q={id:null,prev:null,data:[]};Object(c.setDataListener)(s.SYNC_EVENT_NAME.RESTORE_LOAD_FILE,(function(e){var t=Object(r.default)(e,2),n=t[0],o=t[1];Je(n,o)})),Object(c.setDataListener)(s.SYNC_EVENT_NAME.SAVE_STATE,(function(){"function"==typeof wx.webViewReadyToTerminate&&wx.webViewReadyToTerminate({})})),Object(c.setDataListener)(s.SYNC_EVENT_NAME.RESTORE_STATE,(function(e){var t=Object(r.default)(e,3),n=t[0],o=t[1],i=t[2];if(n&&n.isSplitData){var a=n.splitInfo,s=a.id,c=a.index,u=a.total,l=a.data;if(1!==c&&(c!==q.prev+1||s!==q.id))return q.id=null,q.prev=null,void(q.data=[]);if(c!==u)return q.id=s,q.prev=c,void q.data.push(l);q.data.push(l);var d=q.data.join("");try{d=JSON.parse(d)}catch(e){console.error("Expected parse completed data with split data but got error"),Reporter.errorReport({key:"webviewScriptError",error:new Error("Expected parse completed data with split data but got error")}),d=null}if(q.id=null,q.prev=null,q.data=[],!d)return;n=d[0],o=d[1],i=d[2]}_.default.restoring=n||{},_.default.idDataMap=o,_.default.compIdArr=i,_.default.compIdArrIndex=0}));var Y=function(e){!function(e){var t=document.body.scrollTop||document.documentElement.scrollTop;e.__page__={scrollTop:t}}(e),e.compExtraDataMap={};var t=0;window.__TAB_BAR__&&(Object(d.dfsComponents)(window.__TAB_BAR__,1,(function(n){n.triggerLifeTime("saved",[e]),Object(z.saveNodeExtraData)(e.compExtraDataMap,n,t++)})),Object(z.saveTabRootExtraData)(e.compExtraDataMap)),Object(d.dfsComponents)(window.__DOMTree__,1,(function(n){n.triggerLifeTime("saved",[e]),Object(z.saveNodeExtraData)(e.compExtraDataMap,n,t++)})),Object(z.saveRootExtraData)(e.compExtraDataMap)},K=function(e){!function(e){var t=e.__page__;if(t){var n=parseInt(t.scrollTop,10);requestAnimationFrame((function(){document.body.scrollTop=document.documentElement.scrollTop=n}))}}(e);var t=0;window.__TAB_BAR__&&(Object(d.dfsComponents)(window.__TAB_BAR__,1,(function(n){n.triggerLifeTime("restored",[e]),Object(z.restoreNodeExtraData)(e.compExtraDataMap,n,t++)})),Object(z.restoreTabRootExtraData)(e.compExtraDataMap)),Object(d.dfsComponents)(window.__DOMTree__,1,(function(n){n.triggerLifeTime("restored",[e]),Object(z.restoreNodeExtraData)(e.compExtraDataMap,n,t++)})),Object(z.restoreRootExtraData)(e.compExtraDataMap)},J=function(){__webViewSDK__.publish("recycleStatistics",H());var e={};Y(e),Object(c.sendData)(s.SYNC_EVENT_NAME.REQUEST_SAVE,e,void 0,!0)},X=n(27),$=n(18),Z=n(9),Q={};function ee(e,t){Q[e]=t}Object(c.setDataListener)(s.SYNC_EVENT_NAME.PERFORMANCE_DATA,(function(e,t,n){var o=Object(r.default)(e,1)[0];b.default.get(n).root.triggerLifeTime("performanceData",[o])}));var te=Object(f.getExparser)(),ne=0;function re(e){e&&".html"!==e.slice(5)&&(e+=".html");var t="";return __wxConfigWindow__&&__wxConfigWindow__.initialRenderingCache&&(t=String(__wxConfigWindow__.initialRenderingCache)),t}function oe(e,t){var n=Date.now(),r={},o={},i=document.head.querySelectorAll("style")||[],a=[];te.ElementIterator.create(e,"composed-descendants-root-first",te.Component).forEach((function(e){e.hasBehavior("wx-base")||(r["./"+e.is+".wxss"]=!0)})),Object.keys(te.Component._list).forEach((function(e){o["./"+e+".wxss"]=!0}));for(var s=0;s<i.length;s++){var c=i[s],u=c.getAttribute("wxss:path");null!=u&&(!o[u]||r[u]?a.push("<style>"+c.innerHTML+"</style>"):c.innerHTML.length+15)}var l=a.join(""),d=l+e.$$.innerHTML;wx.saveInitialRenderingCache({content:d,appserviceData:t});Date.now();l.length}function ie(e,t){return"dynamic"!==re(window.__route__)?(console.error('An initial rendering cache state is ignored, because initialRenderingCache mode is not "dynamic".'),!1):(e?oe(e,t):wx.saveInitialRenderingCache({content:""}),!0)}var ae=n(12),se=Object(f.getExparser)(),ce=function(e,t,n,r){var o=Math.random()+"-"+ +new Date,i=b.default.get(n);if(i)return i.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_VIEW_INFO,e,t,o]),"function"==typeof r&&(i.viewInfoCbMap[o]=r),o},ue=function(e,t){var n=b.default.get(e);n&&delete n.viewInfoCbMap[t]},le=n(21),de=Object(f.getExparser)(),fe=!1,pe=[],he=function(e){fe?e():pe.push(e)};if(!Object(c.isDataThread)()){var ve=function(){!0!==fe&&(fe=!0,pe.forEach((function(e){e()})))};"undefined"!=typeof __wxAppCode__?ve():window.__mainPageFrameReady__=ve}var ge,_e,be=de.dataUtils.deepCopy,ye={lazyRegistration:!0,publicProperties:!0},me={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",templateEngine:B,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!0,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},we={domain:"/",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",renderingMode:"full",templateEngine:B,multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1,separateInnerData:!1,innerDataExclude:null,randomizeTagName:!1,virtualHost:!1},Oe="undefined"!=typeof WeakMap?new WeakMap:{},Se={},Ie={},Ee={},Ce={},Te={},ke=1,Ae=Object.prototype.hasOwnProperty,Pe=function(e,t){var n={},r=(t[e+".json"]||{}).usingComponents;for(var o in r)n["wx-"+o]=Object(d.pathRelative)(e,String(r[o]));return n},De=function(e,t){for(var n in t){var r=t[n];r.target=null!=r.target?String(r.target):Object(d.pathRelative)(e,String(n))}return t},je=function(e,t,n,r){var o=b.default.get(n).nodeId.getNodeById(r,n);o&&t&&de.Element.getMethodCaller(o).setData(Object(i.default)({},t,e))},xe={},Re=function(){var e="undefined"!=typeof __wxAppCode__?__wxAppCode__:{};for(var t in void 0===ge&&(ge={}),e)if(".json"===t.substr(t.length-5)){var n=t.slice(0,-5),r=e[t],o={},i=r.usingComponents;for(var a in i)o[a]=Object(d.pathRelative)(n,String(i[a]));var s=r.componentGenerics;for(var c in s){var u=s[c].default;s[c].default&&(o[u=String(u)]=Object(d.pathRelative)(n,u))}ge[n]=o,xe[n]={}}},Me=function(e){if(!xe[e])return{};var t={};return Object.keys(xe[e]).forEach((function(n){t["wx-"+n]="wx-"+xe[e][n]})),t},Ne=function(e){var t="__plugin__/",n=e.indexOf(t);return-1===n?e:"plugin-private://"+e.slice(n+t.length)},Le=function(e){var t=Ne(e),n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})["./"+t+".wxml"];Array.isArray(n)&&(n=n[0][n[1]]),window.__wxAppCodeReadyCallback__?window.__wxAppCodeReadyCallback__(n):document.dispatchEvent(new CustomEvent("generateFuncReady",{detail:{generateFunc:n}}))},Be=function(e){var t=Ne(e),n=("undefined"!=typeof __wxAppCode__?__wxAppCode__:{})[t+".wxss"];void 0!==n&&"function"==typeof n||(n=function(){}),window.__setCssStartTime__=Date.now(),n(),window.__setCssEndTime__=Date.now()},Fe=function(e,t){if("undefined"!=typeof __WXML_DEP__){var n=__WXML_DEP__["./"+e+".wxml"];n&&n.forEach((function(e){var n=e.substr(2,e.length-7);ge[n]&&t.add(n)}))}},We=function e(t,n){var r=n.set,o=n.dropLazy;if(!r.has(t)){r.add(t);var i=Object.keys(ge[t]||{});if(!0===o){var a=new Set(i),s=xe[t]||{};Object.keys(s).forEach((function(e){a.delete(e)})),Object(d.objectValues)(s).forEach((function(e){a.add(e)})),i=Array.from(a)}i.forEach((function(n){e(ge[t][n],{set:r,dropLazy:o})}))}},Ue=new Set,Ve=new Set([Kt]),Ge=function(e){return Ve.has(e)},He={},ze=function(e,t){return Object(c.isDataThread)()?t!==Kt&&!(He[e]&&He[e].has(t)):!Ge(t)},qe=function(e){return He[e]?Array.from(He[e]):[]},Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((Object(c.isDataThread)()?__wxConfig.subPackages:_e)||[]).filter((function(t){return 0===e.indexOf(t.root)})),o=r[0]&&r[0].root||"",i=r[0]&&r[0].allExtendedComponents||[],a=Array.from(t).map((function(e){return i.indexOf(e)>-1?o+e:e}));Object(c.isDataThread)()&&(He[n]||(He[n]=new Set),a.forEach((function(e){return He[n].add(e)})));var s=a.filter((function(e){return!Ge(e)}));return s.forEach((function(e){return Ve.add(e)})),s},Ke=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(!__wxConfig||!__wxConfig.isLazyLoad);if(o){Re();var i=Object.keys(ge);r||(Object(Z.startNewLazyLoadReport)(),Object(Z.setLazyLoadReportField)("isFirstPage",n?1:0),Object(Z.setLazyLoadReportField)("isWebview",Object(c.isDataThread)()?0:1),Object(Z.setLazyLoadReportField)("totalComps",i.length));var a=new Set;We(e,{set:a,dropLazy:!0}),Object.keys(xe).forEach((function(e){We(e,{set:Ue})})),a.forEach((function(e){return Fe(e,a)}));var s=Ye(e,a,t);if(r||(Object(Z.setLazyLoadReportField)("loadedComps",s.length),Object(Z.setLazyLoadReportField)("lazyedComps",0),Object(Z.setLazyLoadReportField)("lazyLoadTime",0)),Object(c.isDataThread)()){var u=s.map((function(e){return"/"+e+".appservice.js"})),l=Object(c.loadJsFileToDataThread)(u);r||Object(Z.setLazyLoadReportField)("loadTime",l)}else{var d=s.map((function(e){return"/"+e+".webview.js"}));Object(c.loadJsFileToWebview)(d,(function(t){var n=function(){Object(Z.setLazyLoadReportField)("loadTime",t),Be(e),Le(e)};r?qt():Jt()?zt(n):n()}))}}},Je=function(e,t){Object(c.loadJsFileToWebview)(e.map((function(e){return"/"+e+".webview.js"})),(function(){Ke(t,null,!1)}))};Object(c.isDataThread)()||he((function(){if(__wxConfig.isFirstPage){var e=__wxConfig.appLaunchInfo.path.replace(/\.html$/,"").replace(/^\//,"");setTimeout((function(){Ke(e,null,!0)}))}}));var Xe,$e,Ze,Qe=(Xe={},($e=function(){Xe={jsFileLoaded:!1,jsFileLoadedCallback:[],compDefLoaded:!1,compDefLoadedCallback:[]}})(),{notifyJsFileLoaded:function(){Xe.jsFileLoaded=!0,Xe.jsFileLoadedCallback.forEach((function(e){e()})),Xe.jsFileLoadedCallback=[]},onJsFileLoaded:function(e){Xe.jsFileLoaded?e():Xe.jsFileLoadedCallback.push(e)},notifyCompDefLoaded:function(){Xe.compDefLoaded=!0,Xe.compDefLoadedCallback.forEach((function(e){e()})),Xe.compDefLoadedCallback=[]},onCompDefLoaded:function(e){Xe.compDefLoaded?e():Xe.compDefLoadedCallback.push(e)},clearStatus:$e}),et=new Set,tt={},nt=function(e,t,n,r){et.add(e),tt[t]=r;void 0!==Ze&&clearTimeout(Ze),Ze=setTimeout((function(){var e=Array.from(et);et=new Set;var t=n.rootCompName;if(Object(c.isDataThread)()){var r,i,a=n.viewId;rt(e,t,a),e.forEach((function(e){Ue.delete(e)}));var u=[[],[],t,$.componentAliases];e.forEach((function(e){at(u,e,Mt,t)})),Object(c.sendData)(s.SYNC_EVENT_NAME.COMPONENT_DEF_LAZY,u,a),(r=n.usedDef[0]).push.apply(r,Object(o.default)(u[0])),(i=n.usedDef[1]).push.apply(i,Object(o.default)(u[1])),n.operationFlow.start(Date.now()),n.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_DO_REPLACE_PLACEHOLDER]),n.operationFlow.end();var l=Object.keys(tt);n.operationFlow.start(Date.now()),n.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_REPLACE_PLACEHOLDER,l]),l.forEach((function(e){tt[e](),delete tt[e]})),n.operationFlow.end()}else rt(e,t,null,(function(){Qe.notifyJsFileLoaded()}))}),50)};Object(c.setDataListener)(s.SYNC_EVENT_NAME.COMPONENT_DEF_LAZY,(function(e){Qe.onJsFileLoaded((function(){Dt(e,!1),Qe.notifyCompDefLoaded()}))}),0);var rt=function(e,t,n,r){var o=new Set;e.forEach((function(e){We(e,{set:o})})),o.forEach((function(e){return Fe(e,o)}));var i=Ye(t,o,n);if(i.forEach((function(e){return Ve.add(e)})),0!==i.length)if(Object(c.isDataThread)()){var a=Array.from(i).map((function(e){return"/"+e+".appservice.js"}));Object(c.loadJsFileToDataThread)(a)}else{var s=Array.from(i).map((function(e){return"/"+e+".webview.js"}));Object(c.loadJsFileToWebview)(s,r)}},ot=function(e){var t=dt(e);return t?lt(t):""},it=function e(t,n,r){if("wx://"!==n.slice(0,5)){var o=Ie[n];if(!o)throw new Error('"'+n+'" is not a behavior registered by Behavior()');t[0].unshift(o),r[n]=!0;var i=Te[o.is];if(i)for(var a=0;a<i.length;a++){var s=i[a];r[s]||e(t,s,r)}}},at=function e(t,n,r,o){Ae.call($.componentAliases,n)&&(n=$.componentAliases[n]);var i,a=Se[n];if(!a){if(i=n,Ue.has(i))return;throw new Error('Component is not found in path "'+n+'"'+(o?' (using by "'+o+'")':""))}"wx://"!==n.slice(0,5)&&t[1].unshift(a),r[n]=!0;var s=Ee[a.is],c=Ce[a.is];for(var u in s)if(Ae.call(s,u)){var l=s[u];r[l]||e(t,l,r,n)}for(var d in c)if(Ae.call(c,d)){var f=c[d].default;f&&(r[f]||e(t,f,r,n))}var p=Te[a.is];if(p)for(var h=0;h<p.length;h++){var v=p[h];r[v]||it(t,v,r)}},st=function(e,t){var n={};for(var r in e.properties){var o=e.properties[r];null===o?n[r]={type:null}:o===Number||o===String||o===Boolean||o===Object||o===Array?n[r]={type:o.name}:(void 0===o.public||o.public)&&(n[r]={type:null===o.type?null:o.type.name,value:o.value})}var i=e.options.innerDataExclude;return{is:e.is,using:e.using,generics:e.generics,behaviors:e.behaviors,data:e.data,properties:n,externalClasses:e.externalClasses,template:t,options:{domain:e.options.domain,writeOnly:e.options.writeOnly||void 0,multipleSlots:e.options.multipleSlots||void 0,writeIdToDOM:e.options.writeIdToDOM||void 0,styleIsolation:e.options.styleIsolation||void 0,addGlobalClass:e.options.addGlobalClass||void 0,hasObservers:!!e.observers,innerDataExcludeString:i?i.toString():null,virtualHost:e.options.virtualHost||void 0}}},ct=function(e){if(e.behaviors){for(var t=[],n=0;n<e.behaviors.length;n++){var r=String(e.behaviors[n]);if("/"!==r[0]&&"wx://"!==r.slice(0,5))throw new Error("Behaviors should be constructed with Behavior()");t.push(r)}e.behaviors=t,Te[e.is]=t}else e.behaviors=null},ut=function(e){var t="/"+ke+++"/"+Object(d.guid)(),n={};for(var r in e)n[r]="data"===r?be(e[r]):e[r];return n.is=t,ct(n),n.options=ye,Ie[t]=st(n),n.definitionFilter=de.Behavior.callDefinitionFilter(n),de.registerBehavior(n),n.is},lt=function(e){return de.Component.getComponentOptions(e).domain.split("/",1)[0]},dt=function(e){return Oe.get(e)},ft=function(e,t,n){var r=de.Component.getComponentOptions(t).domain,o=de.Component.getMethod(t,"__export__"),i=r===e?de.Element.getMethodCaller(t):null;if(o){var a=r===e?n:null,s=o.call(de.Element.getMethodCaller(t),a);return void 0===s?i:s}return i},pt=function(e,t,n){var r=dt(e),o=de.Component.getComponentOptions(r).domain,i=r.shadowRoot;if(n)return i.querySelectorAll(t).map((function(t){return ft(o,t,e)}));var a=i.querySelector(t);return a?ft(o,a,e):null},ht=function(e,t,n){e!==gt&&Object.defineProperty(e,t,{value:n,writable:!0,enumerable:!0,configurable:!0})};function vt(){}var gt=vt.prototype=Object.create(Object.prototype,{is:{get:function(){return dt(this).is},set:function(e){ht(this,"is",e)}},id:{get:function(){var e=dt(this);return de.Component.getComponentOptions(e).writeOnly?"":e.id},set:function(e){ht(this,"id",e)}},getPageId:{get:function(){return function(){return"pageId:"+dt(this).__treeManager__.viewId}},set:function(e){ht(this,"getPageId",e)}},router:{get:function(){return dt(this).__pageRouter__},set:function(e){ht(this,"router",e)}},pageRouter:{get:function(){return function(e){for(var t=dt(e),n=de.Component.getComponentOptions(t).domain;;){var r=t.ownerShadowRoot;if(!r)break;if(!(r instanceof de.ShadowRoot))return null;var o=r.getHostNode();if(!o)return null;if(de.Component.getComponentOptions(o).domain!==n)return null;t=o}return t}(this).__pageRouter__},set:function(e){ht(this,"pageRouter",e)}},dataset:{get:function(){var e=dt(this);return de.Component.getComponentOptions(e).writeOnly?null:e.dataset},set:function(e){ht(this,"dataset",e)}},properties:{get:function(){return this.__data__},set:function(e){ht(this,"properties",e)}},data:{get:function(){return this.__data__},set:function(e){ht(this,"data",e)}},setData:{get:function(){return function(e,t){var n=dt(this),r=n.__treeManager__;return"function"==typeof t&&r.operationFlow.registerSetDataCallback(t,this,n),n.setData(e)}},set:function(e){ht(this,"setData",e)}},groupSetData:{get:function(){return function(e){var t=dt(this).__treeManager__;t.operationFlow.start(Date.now()),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_GROUP]);var n=null;try{e.call(this)}catch(e){n=e}if(t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_GROUP_END]),t.operationFlow.end(),n)throw n}},set:function(e){ht(this,"setData",e)}},replaceDataOnPath:{get:function(){var e=this;return function(t,n){return dt(e).replaceDataOnPath(t,n)}},set:function(e){ht(this,"replaceDataOnPath",e)}},mergeDataOnPath:{get:function(){var e=this;return function(t,n){return dt(e).mergeDataOnPath(t,n)}},set:function(e){ht(this,"mergeDataOnPath",e)}},applyDataUpdates:{get:function(){var e=this;return function(){return dt(e).applyDataUpdates()}},set:function(e){ht(this,"applyDataUpdates",e)}},hasBehavior:{get:function(){var e=this;return function(t){return dt(e).hasBehavior(t)}},set:function(e){ht(this,"hasBehavior",e)}},triggerEvent:{get:function(){var e=this;return function(t,n,r){return dt(e).triggerEvent(t,n,r)}},set:function(e){ht(this,"triggerEvent",e)}},createSelectorQuery:{get:function(){var e=this;return function(){return __appServiceSDK__._createSelectorQuery({},lt(dt(e))).in(e)}},set:function(e){ht(this,"createSelectorQuery",e)}},createIntersectionObserver:{get:function(){var e=this;return function(t){return __appServiceSDK__._createIntersectionObserver(e,t,lt(dt(e)))}},set:function(e){ht(this,"createIntersectionObserver",e)}},createMediaQueryObserver:{get:function(){var e=this;return function(t){return __appServiceSDK__._createMediaQueryObserver(e,t,lt(dt(e)))}},set:function(e){ht(this,"createMediaQueryObserver",e)}},getOpenerEventChannel:{get:function(){var e=this;return function(){return e.__eventChannel}},set:function(e){ht(this,"getOpenerEventChannel",e)}},applyAnimation:{get:function(){var e=this;return function(t,n,r,o,i){var a=dt(e);!function(e,t,n,r,o,i,a,c){var u=Math.random()+"-"+ +new Date;"function"==typeof a&&(t.applyAnimationCbMap[u]=a),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_SET_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof a,reqId:u,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:o,type:i?"animeJS":void 0,isLastAnimation:c}])}(a,a.__treeManager__,e.__wxWebviewId__,t,n,r,o,i)}},set:function(e){ht(this,"applyAnimation",e)}},clearAnimation:{get:function(){var e=this;return function(t,n,r){var o=dt(e);!function(e,t,n,r,o,i){var a=Math.random()+"-"+ +new Date;"function"==typeof i?t.clearAnimationCbMap[a]=i:"function"==typeof o&&(t.clearAnimationCbMap[a]=o),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_CLEAR_NODE_ANIMATION_INFO,{hasCallback:"function"==typeof t.clearAnimationCbMap[a],reqId:a,nodeId:t.nodeId.getNodeId(e),webviewId:n,selector:r,options:o}])}(o,o.__treeManager__,e.__wxWebviewId__,t,n,r)}},set:function(e){ht(this,"clearAnimation",e)}},animate:{get:function(){var e=this;return function(t,n,r,o,i){if("function"==typeof o)i=o;else if(void 0!==o){var a=dt(e),c=a.__treeManager__;return void c.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_SET_NODE_ANIMATION_INFO,{type:"scrollTimeline",nodeId:c.nodeId.getNodeId(a),selector:t,options:n,duration:r,timeline:o}])}for(var u=Object(le.animationOptionHandler)(n,r),l=0;l<u.length;++l){var d="animeJS"===u[l].type;delete u[l].type,l===u.length-1?e.applyAnimation(t,u[l],d,i,!0):e.applyAnimation(t,u[l],d)}}},set:function(e){ht(this,"animate",e)}},selectOwnerComponent:{get:function(){var e=this;return function(t){var n=dt(e);return de.Component.getComponentOptions(n).writeOnly?null:function(e){var t=dt(e),n=de.Component.getComponentOptions(t).domain,r=t.ownerShadowRoot;if(!(r instanceof de.ShadowRoot))return null;var o=r.getHostNode();return o?ft(n,o,e):null}(e)}},set:function(e){ht(this,"selectOwnerComponent",e)}},selectComponent:{get:function(){var e=this;return function(t){var n=dt(e);return de.Component.getComponentOptions(n).writeOnly?null:pt(e,t,!1)}},set:function(e){ht(this,"selectComponent",e)}},selectAllComponents:{get:function(){var e=this;return function(t){var n=dt(e);return de.Component.getComponentOptions(n).writeOnly?[]:pt(e,t,!0)}},set:function(e){ht(this,"selectAllComponents",e)}},getRelationNodes:{get:function(){var e=this;return function(t){return function(e,t){var n=dt(e).getRelationNodes(t);return null===n?null:n.map((function(e){return de.Element.getMethodCaller(e)}))}(e,t)}},set:function(e){ht(this,"getRelationNodes",e)}},getTabBar:{get:function(){return function(){var e=dt(this).__treeManager__;return e.tabDestroyed||!e.tabRoot?null:de.Element.getMethodCaller(e.tabRoot)}},set:function(e){ht(this,"getTabBar",e)}},exitState:{get:function(){return this.__exitState__},set:function(e){ht(this,"exitState",e)}},setInitialRenderingCache:{get:function(){return function(e){var t=dt(this).__treeManager__;null===e?Wt(t):Ft(t,e)}},set:function(e){ht(this,"exitState",e)}},setUpdatePerformanceListener:{get:function(){return function(e,t){var n=dt(this),r=n.__treeManager__,o=r.nodeId.getNodeId(n);"function"==typeof t?(n.__updatePerformanceListener__=t,r.operationFlow.push([s.SYNC_EVENT_NAME.ENABLE_UPDATE_PERFORMANCE_STAT,o,e])):(n.__updatePerformanceListener__=null,r.operationFlow.push([s.SYNC_EVENT_NAME.DISABLE_UPDATE_PERFORMANCE_STAT,o]))}},set:function(e){ht(this,"exitState",e)}}}),_t=function(e,t,n){var r=t[n+".json"]||{};void 0!==r.styleIsolation&&(e.options||(e.options={}),e.options.styleIsolation=r.styleIsolation),void 0!==r.pureDataPattern&&(e.options||(e.options={}),e.options.pureDataPattern=new RegExp(r.pureDataPattern))},bt=function(e,t){e.using=Ee[e.is]=Pe(e.is,t),e.generics=Ce[e.is]=function(e,t){var n={},r=(t[e+".json"]||{}).componentGenerics;for(var o in r){var i=r[o];"object"===Object(a.default)(i)?n["wx-"+o]={default:Object(d.pathRelative)(e,String(i.default||""))}:null!=i&&(n["wx-"+o]={})}return n}(e.is,t),ct(e);var n=e.is+".wxml",r={path:n,func:k.updatedWxAppCode[n]||t[n]||null};e.template=r,Se[e.is]=st(e,n);var o=de.registerElement(e),i=Object.create(gt,{constructor:{value:vt,writable:!0,configurable:!0}});de.Behavior.prepare(o.behavior);var u=o.behavior.methods;for(var l in u)i[l]=u[l];return Object(k.addUpdateListener)(e.is+".js",(function(t){t(),function(e){var t=Se[e];b.default.list().forEach((function(n){Object(c.sendData)(s.SYNC_EVENT_NAME.UPDATE_COMPONENT_DEF,[t],n.viewId),[n.root,n.tabRoot].forEach((function(t){t&&Object(d.dfsComponents)(t,1,(function(t){if(t instanceof de.Component&&t.is===e){var r=t===n.root;r&&n.lifetimeListener&&n.lifetimeListener.call(n.root,"onUnload"),Object(y.resetComponentNode)(t,n),r&&n.lifetimeListener&&(n.lifetimeListener.call(n.root,"onLoad"),n.lifetimeListener.call(n.root,"onShow"))}}))}))}))}(e.is)})),i},yt=function e(t,n,r,o){var i=o||__wxAppCurrentFile__,a=r||__wxAppCode__,s=a[i+"on"];if(!i||!s)return console.error("Component constructors should be called while initialization. A constructor call has been ignored."),"";var c=i.slice(0,-3);if(s.component&&"simple"===s.component.type)return function(e,t,n,r,o){_t(e,o,t);var i={is:t,using:Pe(t,o),properties:e.properties,externalClasses:e.externalClasses,options:me},a=e.options||{};i.options=me,i.options.multipleSlots=a.multipleSlots||!1,i.options.writeOnly=!0,i.options.writeIdToDOM=!1,i.options.domain="simple://"+(r||"/"),i.options.styleIsolation=a.styleIsolation||"",i.options.addGlobalClass=a.addGlobalClass||!1,i.options.innerDataExclude=null,i.options.virtualHost=!1,Se[t]=st(i,t+".wxml"),i.is}(t,c,0,n,a),c;_t(t,a,c);var u=de.Behavior.callDefinitionFilter(t),l={is:c,properties:t.properties,data:be(t.data),methods:t.methods,behaviors:t.behaviors,lifetimes:t.lifetimes,pageLifetimes:t.pageLifetimes,created:t.created,attached:t.attached,ready:t.ready,moved:t.moved,detached:t.detached,saved:t.saved,restored:t.restored,relations:t.relations?De(i,t.relations):void 0,externalClasses:t.externalClasses,observers:t.observers,definitionFilter:u,options:me,initiator:function(){this.__customConstructor__=e,this.__pageRouter__=__appServiceSDK__.createRouter(c,this.__treeManager__.viewId);var t=Object.create(f);Oe.set(t,this),de.Element.setMethodCaller(this,t),Object.defineProperties(t,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},d=t.options||{};l.options=me,l.options.multipleSlots=d.multipleSlots||!1,l.options.writeOnly=d.writeOnly||!1,l.options.writeIdToDOM=!1,l.options.domain=(d.writeOnly?"wo://":"")+(n||"/"),l.options.styleIsolation=d.styleIsolation||"",l.options.addGlobalClass=d.addGlobalClass||!1,l.options.innerDataExclude=d.pureDataPattern||null,l.options.virtualHost=d.virtualHost||!1;var f=bt(l,a);return l.is},mt=function e(t,n,r,o){var i=o||__wxAppCurrentFile__;if(!i)return console.error("Page constructors should be called while initialization. A constructor call has been ignored."),"";var a=r||"undefined"!=typeof __wxAppCode__&&__wxAppCode__||{},s=Object.create(null),c={methods:{}};for(var u in t)"data"===u?c.data=t.data:"function"==typeof t[u]?c.methods[u]=t[u]:"methods"===u?s.methods=t.methods:c[u]=t[u];var l=function(e){if(!e)return!1;if(e instanceof Array){for(var t=0;t<e.length;t++){var n=String(e[t]);if("wx://"!==n.slice(0,5)&&!Ie[n])return console.warn('"behaviors" list contains non-behavior items. The whole list is ignored.'),!1}return!0}return!1}(c.behaviors),d=i.slice(0,-3);for(var f in _t(c,a,d),l&&de.Behavior.callDefinitionFilter(c),c)"data"!==f&&"methods"!==f&&(s[f]=c[f]);var p={is:d,behaviors:l?c.behaviors:void 0,data:be(c.data),methods:c.methods,properties:void 0===t.properties?c.properties:void 0,lifetimes:void 0===t.lifetimes?c.lifetimes:void 0,pageLifetimes:void 0===t.pageLifetimes?c.pageLifetimes:void 0,created:void 0===t.created?c.created:void 0,attached:void 0===t.attached?c.attached:void 0,ready:void 0===t.ready?c.ready:void 0,moved:void 0===t.moved?c.moved:void 0,detached:void 0===t.detached?c.detached:void 0,saved:void 0===t.saved?c.saved:void 0,restored:void 0===t.restored?c.restored:void 0,relations:void 0===t.relations&&c.relations?De(i,c.relations):void 0,externalClasses:void 0===t.externalClasses?c.externalClasses:void 0,observers:void 0===t.observers?c.observers:void 0,options:me,initiator:function(){this.__customConstructor__=e,this.__pageRouter__=__appServiceSDK__.createRouter(d,this.__treeManager__.viewId);var t=Object.create(v);Oe.set(t,this),de.Element.setMethodCaller(this,t),Object.defineProperties(t,{__data__:{value:this.data,writable:!0,enumerable:!1},__wxWebviewId__:{value:this.__treeManager__.viewId,writable:!0,enumerable:!1}})}},h=c.options||{};p.options.multipleSlots=!1,p.options.writeOnly=!1,p.options.writeIdToDOM=!0,p.options.domain=n||"/",p.options.styleIsolation=h.styleIsolation||"shared",p.options.addGlobalClass=!1,p.options.innerDataExclude=h.pureDataPattern||null,p.options.virtualHost=h.virtualHost||!1;var v=bt(p,a);return v.__freeData__=s,p.is},wt=!0,Ot=function(e){!function(e){var t=D++;j.push(t);try{e(t)}catch(e){throw j.pop(),e}j.pop()}((function(){St(e)}))},St=function(e){Object(Z.addFlowCount)();var t=Date.now(),n=e.operationFlow.iterator,r=n.expectStart(),o=n.nextStepType();if(o===s.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION)It(e,s.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION),Object(Z.reportFlow)(r,t,Date.now(),2);else if(o===s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE)It(e,s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE);else if(o===s.SYNC_EVENT_NAME.FLOW_CREATE_TAB)It(e,s.SYNC_EVENT_NAME.FLOW_CREATE_TAB),Object(Z.reportFlow)(r,t,Date.now(),3);else if(o===s.SYNC_EVENT_NAME.FLOW_DO_REPLACE_PLACEHOLDER)n.nextStep(),b.default.instance.operationFlow.block(),Qe.onCompDefLoaded((function(){Qe.clearStatus(),b.default.instance.operationFlow.unblock()}));else{var i=Date.now(),a=n.nextStep();if(a[0]===s.SYNC_EVENT_NAME.FLOW_UPDATE){var u=a[1],l=e.nodeId.getNodeById(u),f=a[2];if(l){if(f.length){var p=de.Component.getDataProxy(l);p.setChanges(f),p.doUpdates(void 0,!Object(c.isDataThread)()),x(u,(function(e){return{isMergedUpdate:!1,dataPaths:e.withDataPaths?f.map((function(e){return e[0]})):void 0,pendingStartTimestamp:r,updateStartTimestamp:t,updateEndTimestamp:Date.now()}}))}}else a[1],n.skipToEnd()}else if(a[0]===s.SYNC_EVENT_NAME.FLOW_GROUP){var h=n.nextStep();if(h[0]!==s.SYNC_EVENT_NAME.FLOW_GROUP_END)throw new Error("Framework inner error (expect FLOW_GROUP_END but get "+Object(s.getEvName)(h[0])+")")}else if(a[0]===s.SYNC_EVENT_NAME.FLOW_REPLACE_PLACEHOLDER){a[1].forEach((function(e){tt[e](),delete tt[e]}))}else if(a[0]===s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE){var v=e.nodeId.getNodeById(a[1]);v?v.__templateInstance._resetShadowChildren(v,v.data,e):n.skipToEnd()}else{if(a[0]!==s.SYNC_EVENT_NAME.FLOW_HOT_UPDATE_RESET)throw new Error("Framework inner error (expect an update event but get "+Object(s.getEvName)(a[0])+")");var g=e.nodeId.getNodeById(a[1]);Object(y.resetComponentNode)(g,e)}Object(d.speedReport)("reRenderTime",i,Date.now()),wt&&5===Object(Z.reportFlowCombined)(r,t,Date.now())&&(wt=!1,Object(Z.reportFlowFlushCombined)(1))}n.expectEnd()},It=function(e,t){var n=t===s.SYNC_EVENT_NAME.FLOW_CREATE_TAB,r=t===s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE,o=e.operationFlow.iterator,i=o.nextStep(),a=i[1],u=i[2],l=null;if(n)e.tabNodeId=u,e.tabRoot=l=window.__TAB_BAR__=de.createElement("tab-bar",de.Component._list[a]);else if(r){if(!a)return void ie(null);l=de.createElement("initial-rendering-cache",de.Component._list[a])}else{var f=i[3]||{};e.rootNodeId=u,e.root=l=window.__DOMTree__=de.Component.createWithGenerics("body",de.Component._list[a],f,e)}if(e.nodeId.allocNodeId(l,u),l.setAttribute("is",a),_.default.restoring&&!n){var p=_.default.idDataMap[e.nodeId.getNodeId(l)];de.Component.replaceWholeData(l,p,null),K(_.default.restoring),_.default.restoring=null,_.default.idDataMap=null}if((i=o.nextStep())[0]!==t)throw new Error("Framework inner error (expect "+Object(s.getEvName)(t)+" end but get "+Object(s.getEvName)(i[0])+")");if(e.nodeId.addNode(l),n){var h=de.createElement("wx-tab-bar-wrapper",de.Component._list["wx://tab-bar-wrapper"]);h.appendChild(l),document.documentElement.insertBefore(h.$$,document.body),de.Element.pretendAttached(h),e.tabDestroyed&&h.removeChild(l)}else if(r){var v=document.createElement("wx-initial-rendering-cache-wrapper");if(v.setAttribute("style","height: 0; overflow: hidden"),v.appendChild(l.$$),document.documentElement.insertBefore(v,document.body),(i=o.nextStep())[0]!==s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE)throw new Error("Framework inner error (expect initial rendering end but get another)");Object(d.dfsComponents)(l,1,(function(e){e.triggerLifeTime("cacheAttached")})),ie(l,i[1]),e.nodeId.removeNode(l),document.documentElement.removeChild(v)}else document.body=l.$$,Object(d.dfsComponents)(l,1,(function(e){e.triggerLifeTime("cacheAttached")})),function(e){ne&&Date.now(),"static"===re(window.__route__)&&oe(e)}(l),de.Element.pretendAttached(l),ee("initialRenderingDone",Date.now()),setTimeout((function(){Object(c.sendData)(s.SYNC_EVENT_NAME.PERFORMANCE_DATA,[Q],void 0,!0)}),0)},Et=function(){U.default.setStartOperation(Ot),b.default.instance=b.default.create(0)},Ct={String:String,Number:Number,Boolean:Boolean,Object:Object,Array:Array,null:null},Tt=null,kt=null,At=function(e,t,n){for(var r in e.properties)e.properties[r].type=Ct[e.properties[r].type];var o="",i=n?kt:Tt;t||(o=i[e.is]);var a=e.options,s=!(!a.writeIdToDOM&&!t);e.options=we,e.options.multipleSlots=a.multipleSlots||!1,e.options.writeOnly=a.writeOnly||!1,e.options.writeIdToDOM=s,e.options.domain=a.domain,e.options.randomizeTagName=!1,e.options.innerDataExclude=function(e){if(!e)return null;var t=e.lastIndexOf("/"),n=e.slice(1,t),r=e.slice(t+1);return new RegExp(n,r)}(a.innerDataExcludeString),e.options.virtualHost=a.virtualHost;var c=!1;if(a.styleIsolation){var u=a.styleIsolation;"page-"===u.slice(0,5)&&(c=!0,u=u.slice(5)),"isolated"===u?(o=i[e.is],e.options.addGlobalClass=!1):"strong-isolated"===u?(o=i[e.is],e.options.addGlobalClass=!1,e.options.randomizeTagName=!0):"apply-shared"===u?(o=i[e.is],e.options.addGlobalClass=!0):"shared"===u&&"/"===a.domain?(o="",e.options.addGlobalClass=!1):c=!1}else e.options.addGlobalClass=a.addGlobalClass||!1;e.options.classPrefix=o,a.hasObservers&&(e.observers={"**":function(){}}),window.__customComponentMode__="undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template];var l=window.__generateFunc__;return"undefined"!=typeof __wxAppCode__&&__wxAppCode__[e.template]?l=__wxAppCode__[e.template]:e.template,e.template={path:e.is+".wxml",func:l},de.registerElement(e),{disableAppWxss:c,classPrefix:o}},Pt=function(e,t){for(var n=new Set,r=0;r<e.length;r++)n.add(e[r].is);return __wxConfig.isLazyLoad&&!t&&Object.keys(ge).forEach((function(e){return n.add(e)})),function(e,t){for(var n={},r={},o=[],i=0;i<e.length;i++){var a=e[i],s=r[a]=a.split(/[^a-z0-9]+/i),c=s[s.length-1];Ae.call(n,c)?(n[c].push(a),o.push(c)):n[c]=[a]}for(var u=2;o.length;u++){var l=o;o=[];for(var d=0;d<l.length;d++){var f=l[d];if(Ae.call(n,f)){var p=n[f];delete n[f];for(var h=0;h<p.length;h++){var v=p[h],g=r[v].slice(-u).join("-");Ae.call(n,g)?(n[g].push(v),g!==f&&o.push(g)):n[g]=[v]}}}}var _={};for(var b in n){var y=n[b],m=Number(b[0])>=0?"x-"+b:b;if(1===y.length)_[y[0]]=t+m;else for(var w=0;w<y.length;w++)_[y[w]]=t+m+"-"+w}return _}(Array.from(n),t?"custom-tab-bar-":"")},Dt=function(e,t){t||(window.__forceSaveStates__=J,"function"==typeof wx.onWebViewWillManuallyTerminate&&wx.onWebViewWillManuallyTerminate(J));var n=Object(r.default)(e,4),o=n[0],i=n[1],a=n[2],s=n[3],c=b.default.instance;t||(c.rootCompName=a);for(var u=0;u<o.length;u++){var l=o[u];l.options=ye,de.registerBehavior(l)}t?kt=kt||Pt(i,t):Tt=Tt||Pt(i,t);for(var d=function(e){var n=i[e],r=At(n,n.is===a&&!t,t),o=r.disableAppWxss,s=r.classPrefix;o&&n.is===a&&!t&&__webviewEngine__.disableStyleElement("app.wxss");var c=n.is+".wxss",u="undefined"==typeof __wxAppCode__?null:__wxAppCode__[c];u&&((n.is!==a||t)&&u(s&&s+"--",{allowIllegalSelector:!0}),Object(k.addUpdateListener)(c,(function(e){e?e(s&&s+"--",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./"+c,""),document.dispatchEvent(new CustomEvent("pageReRender",{}))})))},f=0;f<i.length;f++)d(f);for(var p in Object(k.addUpdateListener)("app.wxss",(function(e){e?e("",{allowIllegalSelector:!0}):window.__styleSheetManager__.setCss("./app.wxss",""),document.dispatchEvent(new CustomEvent("pageReRender",{}))})),s)de.Component._list[p]=de.Component._list[s[p]]};Object(c.setDataListener)(s.SYNC_EVENT_NAME.LOAD_COMPONENT_DEF,(function(e){__wxConfig.isFirstPage||(_e=e[1],Ke(e[0],null,!1))}),0);var jt=!1,xt=[],Rt=[];Object(c.setDataListener)(s.SYNC_EVENT_NAME.COMPONENT_DEF,(function(e){jt?Dt(e,!1):xt.push(e)}),0),Object(c.setDataListener)(s.SYNC_EVENT_NAME.COMPONENT_DEF_TAB,(function(e){jt||fe?zt((function(){Dt(e,!0)})):Rt.push(e)}),0);var Mt,Nt=function(){jt=!0,Vt(),xt.forEach((function(e){Dt(e,!1)})),xt=[],Rt.forEach((function(e){zt((function(){Dt(e,!0)}))})),Rt=[]},Lt=function(e,t,n){var r=[[],[],n=Object(W.convertRouteToComponentAlias)(n),$.componentAliases];Mt=Object.create(null),at(r,n,Mt,"");var o=function(e){var t=$.componentPathToAlias[e];if(!t)return{};var n=t.match(/^plugin:\/\/(wx[0-9a-f]{16})\/(.+)$/);if(!n)return{};var r=n[1],o=n[2],i=Object(d.objectValues)(__wxConfig.plugins).find((function(e){return e.provider===r}));if(!i)return{};if(!i.genericsImplementation)return{};var a=i.genericsImplementation[o]||{},s={},c=Object(W.getPluginSubPackagePrefix)(r);return Object.keys(a).forEach((function(e){s["wx-"+e]=Object(d.pathRelative)(c,String(a[e]))})),s}(n);Object(d.objectValues)(o).forEach((function(e){at(r,e,Mt,"")})),Object(c.sendData)(s.SYNC_EVENT_NAME.COMPONENT_DEF,r,e),Object(w.sendBannedMap)(e),t.rootCompName=n,t.rootNodeId=Object(d.guid)(),t.operationFlow.start(),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION,n,t.rootNodeId,o]);var i=de.Component.createWithGenerics("body",de.Component._list[n],o,t);return Object(Z.reportPluginNodeCreation)(i,t),t.root=i,t.usedDef=r,de.Element.getMethodCaller(i).__wxExparserNodeId__=t.nodeId.allocNodeId(i,t.rootNodeId),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION]),t.nodeId.addNode(i),i};Object(c.setDataListener)(s.SYNC_EVENT_NAME.UPDATE_COMPONENT_DEF,(function(e){var t=Object(r.default)(e,1)[0],n=b.default.instance;de.Component._list[t.is]&&(kt&&kt[t.is]?At(t,n.rootCompName===t.is,!0):At(t,n.rootCompName===t.is,!1))}));var Bt=function(e,t){t.listenerInited||(t.listenerInited=!0,function(e,t){Object(c.setDataListener)(s.SYNC_EVENT_NAME.WX_EVENT,(function(n){var r=n[2],o=n[1],i=t.nodeId.getNodeById(n[0]);if(i){var a=de.Element.getMethodCaller(i),s=r._userTap;if(r._requireActive&&!__appServiceEngine__.isFramesetMode()){var c=__appServiceEngine__.getCurrentPagesByDomain("");if(c[c.length-1].__wxWebviewId__!==e)return;delete r._requireActive}r._relatedInfo&&(__appServiceEngine__.DisplayReporter.setEventRelatedInfo(r._relatedInfo),delete r._relatedInfo),"function"!=typeof a[o]?console.warn('Component "'+i.is+'" does not have a method "'+o+'" to handle event "'+r.type+'".'):s?Object(ae.wrapTapMark)((function(){__appServiceSDK__.setWxInterfaceIsInvokeInTap(r.type),de.safeCallback("Event Handler",a[o],a,[r],i),__appServiceSDK__.unsetWxInterfaceIsInvokeInTap()})):de.safeCallback("Event Handler",a[o],a,[r],i)}}),e),Object(c.setDataListener)(s.SYNC_EVENT_NAME.MODEL_VALUE_CHANGE,(function(e,t,n){var r=e[0],o=r.data,i=r.modelValueName,a=r.nodeId;je(o,i,n,a)}),e)}(e,t),Object(c.setDataListener)(s.SYNC_EVENT_NAME.REQUEST_SAVE,(function(t){var n=Object(r.default)(t,1)[0];Object(X.saveView)(e,n)}),e),Object(c.setDataListener)(s.SYNC_EVENT_NAME.CALL_METHOD_FROM_WXS,(function(e){Object(z.callMethodFromWxsCallback)(e)}),e),function(e,t){Object(c.setDataListener)(s.SYNC_EVENT_NAME.ANIMATION_TRANSITION_END,(function(e){if(e&&e[0]&&e[0].reqId){var n=t.applyAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.applyAnimationCbMap[e[0].reqId],se.safeCallback("Animation",n,null,[]));var r=JSON.parse(e[0].args);t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_SET_NODE_NEXT_ANIMATION_INFO,r])}}),e),Object(c.setDataListener)(s.SYNC_EVENT_NAME.CLEAR_ANIMATION_COMPLETE,(function(e){if(e&&e[0]&&e[0].reqId){var n=t.clearAnimationCbMap[e[0].reqId];"function"==typeof n&&(delete t.clearAnimationCbMap[e[0].reqId],se.safeCallback("Clear Animation",n,null,[]))}}),e)}(e,t),function(e,t){Object(c.setDataListener)(s.SYNC_EVENT_NAME.RESPONSE_VIEW_INFO,(function(e){var n=Object(r.default)(e,2),o=n[0],i=n[1];if(i){var a=t.viewInfoCbMap[i];a&&a(o)}}),e)}(e,t),function(e,t){Object(c.setDataListener)(s.SYNC_EVENT_NAME.UPDATE_PERFORMANCE_STAT,(function(e){var n=Object(r.default)(e,2),o=n[0],i=n[1],a=t.nodeId.getNodeById(o);if(a&&a.__updatePerformanceListener__){var s=A.Element.getMethodCaller(a);A.safeCallback("Update Performance Listener",a.__updatePerformanceListener__,s,[i],a)}}),e)}(e,t))},Ft=function(e,t){var n=Object(W.convertRouteToComponentAlias)(e.rootCompName),r=Object(d.guid)();e.operationFlow.start(),e.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE,n,r]);var o=de.createElement("initial-rendering-cache",de.Component._list[n],e);return de.Element.getMethodCaller(o).__wxExparserNodeId__=e.nodeId.allocNodeId(o,r),e.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE]),e.nodeId.addNode(o),o.setData(t),e.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE,t]),e.operationFlow.end(),e.nodeId.removeNode(o),o},Wt=function(e){e.operationFlow.start(),e.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_INITIAL_RENDERING_CACHE,"",null]),e.operationFlow.end()},Ut=!1,Vt=function(){Ut||(Ut=!0,Object(c.sendData)(s.SYNC_EVENT_NAME.REQUEST_TAB,[]))},Gt=[],Ht=!1,zt=function(e){__wxConfig&&__wxConfig.isLazyLoad?Ht?e():Gt.push(e):e()},qt=function(){!0!==Ht&&(Ht=!0,Gt.forEach((function(e){e()})))};Object(c.isDataThread)()||he((function(){Ke(Kt,null,__wxConfig.isFirstPage,!0),zt((function(){Vt()}))}));var Yt=function(e,t,n){var r=!0,o=__wxConfig.tabBar&&__wxConfig.tabBar.list;o instanceof Array&&(o.map((function(e){return e&&e.pagePath})).indexOf(t+".html")>=0&&(r=!1));r&&(e.tabDestroyed=!0,Object(c.sendData)(s.SYNC_EVENT_NAME.DESTROY_TAB,[],n))};Object(c.isDataThread)()||Object(c.setDataListener)(s.SYNC_EVENT_NAME.DESTROY_TAB,(function(){b.default.instance.tabDestroyed=!0,window.__TAB_BAR__&&window.__TAB_BAR__.parentNode.removeChild(window.__TAB_BAR__)}),0);var Kt="custom-tab-bar/index",Jt=function(){var e=!1;return __wxConfig.tabBar&&!0===__wxConfig.tabBar.custom&&(e=!0),$t(Kt)||(e=!1),__wxConfig.appLaunchInfo&&"singlePage"===__wxConfig.appLaunchInfo.mode&&(e=!1),e},Xt=function(e,t){if(Jt()){var n=b.default.get(e)||b.default.create(e);Bt(e,n),n.tabRoot||n.tabDestroyed||(Ke(Kt,e,Zt,!0),function(e,t,n){var r=[[],[],n=Object(W.convertRouteToComponentAlias)(n),{}];at(r,n,Object.create(null),""),Object(c.sendData)(s.SYNC_EVENT_NAME.COMPONENT_DEF_TAB,r,e),t.tabCompName=n,t.tabNodeId=Object(d.guid)(),t.operationFlow.start(),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_CREATE_TAB,n,t.tabNodeId]);var o=de.createElement("tab-bar",de.Component._list[n],t);t.tabRoot=o,t.tabUsedDef=r,de.Element.getMethodCaller(o).__wxExparserNodeId__=t.nodeId.allocNodeId(o,t.tabNodeId),t.operationFlow.push([s.SYNC_EVENT_NAME.FLOW_CREATE_TAB]),t.nodeId.addNode(o)}(e,n,Kt),de.Element.pretendAttached(n.tabRoot),n.operationFlow.end(),t&&Object(c.sendData)(s.SYNC_EVENT_NAME.FLUSH_BLOCKED,[],e),n.rootCompName&&Yt(n,n.rootCompName,e))}};Object(c.isDataThread)()?Object(c.setDataListener)(s.SYNC_EVENT_NAME.REQUEST_TAB,(function(e,t,n){__wxConfig.onReady((function(){Xt(n,!0)}))}),"$GLOBAL"):Object(c.setDataListener)(s.SYNC_EVENT_NAME.FLUSH_BLOCKED,(function(){b.default.instance.operationFlow.flushBlocked()}),0);var $t=function(e){return e=Object(W.convertRouteToComponentAlias)(e),Ae.call($.componentAliases,e)&&(e=$.componentAliases[e]),Se[e]},Zt=!0,Qt=function(e,t,n){var r=b.default.get(e)||b.default.create(e);r.lifetimeListener=n,r.operationFlow.unblock();try{Xt(e,!1)}catch(e){Reporter.thirdErrorReport({error:e})}Yt(r,t,e),Bt(e,r),t=Object(W.convertRouteToComponentAlias)(t);var o=(__wxConfig.subPackages||[]).filter((function(e){return!!e.allExtendedComponents}));return Object(c.sendData)(s.SYNC_EVENT_NAME.LOAD_COMPONENT_DEF,[t,o],e),Ke(t,e,Zt),Zt=!1,$t(t)||(t="wx://not-found"),Lt(e,r,t)},en=function(e,t){var n=b.default.get(e);if(n){var r=n.root,o=!1,i={};Object.keys(t).forEach((function(e){de.Component.hasProperty(r,e)&&(i[e]=t[e],o=!0)})),o&&n.root.setData(i),Object(k.isUpdateListenerEnabled)()&&(n.initialRootData=t),de.Element.pretendAttached(r),n.root.__treeManager__.operationFlow.end()}},tn=function(e){var t=b.default.get(e);t&&(de.Element.pretendDetached(t.root),b.default.destroy(e),Object(c.removeDataListeners)(e))}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return i}));var r=n(25);var o=n(28);function i(e){return function(e){if(Array.isArray(e))return Object(r.default)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(o.default)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";n.r(t),n.d(t,"setEventHandlerChangeListener",(function(){return E})),n.d(t,"applyProperties",(function(){return T}));var r=n(7),o=n(23),i=n(1),a={},s=/-[a-z]/g,c=/([A-Z])/g,u=function(e){return a[e]||(a[e]=e.replace(c,"-$1").toLowerCase())},l=n(0),d=n(2),f=n(17),p=n(10),h=n(5),v=n(8),g=n(12),_=n(3),b=Object(_.getExparser)(),y=void 0!==wx&&wx.transformRpx,m=b.Component.getComponentOptions,w=function(e){return Object(l.isDataThread)()&&e instanceof b.Component?d.default.get(e.__wxWebviewId__).nodeId.getNodeById(e.__wxExparserNodeId__):e},O=function(e,t,n){var r=w(e);return n&&r instanceof b.VirtualNode&&(r.id||Object.getOwnPropertyNames(r.dataset).length||(r=w(n))),{id:t?"":r.id,offsetLeft:r.$$&&!t?r.$$.offsetLeft:0,offsetTop:r.$$&&!t?r.$$.offsetTop:0,dataset:t?{}:r.dataset}},S=function(e,t,n){var r=w(e);return n&&r instanceof b.VirtualNode&&(r.id||Object.getOwnPropertyNames(r.dataset).length||(r=w(n))),{id:t?"":r.id,dataset:t?{}:r.dataset}},I=function(e){if(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push({identifier:r.identifier,pageX:r.pageX,pageY:r.pageY,clientX:r.clientX,clientY:r.clientY,force:r.force||0})}return t}},E=function(e,t){e.__eventHandlerChangeListener__=t},C=function(e,t,n,r,o,a,s,c){var u=a?"__wxEventCaptureHandleName":"__wxEventHandleName";t[u]||(t[u]=Object.create(null)),void 0===t[u][n]&&t.addListener(n,(function(r){var a=t[u][n],d=r.mutatedMarked();if((!c||!r.mutatedMarked())&&(c&&r.markMutated(),a)){r._hasListeners=!0;var f=t.ownerShadowRoot;if(f){var p=f.getHostNode(),h=b.Component.getComponentOptions(p).writeOnly;if(!h||r._allowWriteOnly)if(Object(l.isDataThread)()){if(s&&"function"==typeof a)return void console.warn('Cannot use wxs function to handle custom event "'+r.type+'".');var _=b.Element.getMethodCaller(p);"function"!=typeof _[a]?console.warn('Component "'+p.is+'" does not have a method "'+a+'" to handle event "'+r.type+'".'):_[a]({type:r.type,timeStamp:r.timeStamp,target:S(r.target,h,this),currentTarget:S(this,h,null),mark:r.mark,detail:r.detail,touches:r.touches,changedTouches:r.changedTouches,mut:d,_requireActive:r._requireActive})}else if(s)if("function"==typeof a&&Object(v.getWxsGdc)()){var y={type:r.type,timeStamp:r.timeStamp,target:O(r.target,h,this),currentTarget:O(this,h,null),mark:r.mark,detail:r.detail,touches:I(r.touches),changedTouches:I(r.changedTouches),mut:d};y.instance=Object(v.getWxsHandlerInstance)(t);var m=a(Object(v.wxsDeepCopy)(y,!0),Object(v.wxsDeepCopy)(Object(v.getWxsHandlerInstance)(t,!0),!0));if(Object(v.triggerPageRerender)(),!1===m)return m}else console.warn('Component "'+p.is+'" does not have a wxs function to handle event "'+r.type+'".');else{var w={type:r.type,timeStamp:r.timeStamp,target:O(r.target,h,this),currentTarget:O(this,h,null),mark:r.mark,detail:r.detail,touches:I(r.touches),changedTouches:I(r.changedTouches),mut:d,_requireActive:r._requireActive,_relatedInfo:r._relatedInfo,_userTap:Object(g.checkTapMark)(r._userTap)};Object(l.sendData)(i.SYNC_EVENT_NAME.WX_EVENT,[e.nodeId.getNodeId(p),a,w],void 0,!!r._requireActive||void 0)}}return!o&&void 0}}),{capture:a}),s?t[u][n]=r:(t[u][n]=null==r?"":String(r),t.__eventHandlerChangeListener__&&t.__eventHandlerChangeListener__(n,t[u][n],a))},T=function(e,t,n,c){var g=Object(l.isDataThread)()?e.__treeManager__:d.default.instance;e.dataset=e.dataset||{};var _=0,w=!1,O=[],S=e instanceof b.Component,I=S&&"//"===m(e).domain,E=b.Component.getDataProxy(e),T=function(d){var m,T=t[d],k=null;if("slot"===e.is&&e instanceof b.VirtualNode&&"name"===d)return b.Element.setSlotName(e,T),"continue";if("id"===d)return e.id=null==T?"":T,"continue";if("slot"===d)return e.slot=null==T?"":T,"continue";if("class"===d){if(S)e.class=e.__wxsClass?Object(v.joinClassOrStyle)(" ",null==T?"":T,e.__wxsClass):null==T?"":T,S&&e.hasExternalClass("class")&&e.setExternalClass("class",T);return"continue"}if("style"===d&&S&&e.$$){var A=y(T,!0);e.setNodeStyle(A,i.STYLE_SEGMENT_INDEX.ATTR),A!==T?Object(f.registerResizer)(e,i.STYLE_SEGMENT_INDEX.ATTR,(function(){var t=y(T,!0);e.setNodeStyle(t,i.STYLE_SEGMENT_INDEX.ATTR),e.__transformedPropValue=t})):Object(f.unregisterResizer)(e,i.STYLE_SEGMENT_INDEX.ATTR),e.__banned&&Object(p.banComponentNode)(e)}if(S&&b.Component.hasPublicProperty(e,d)){!I&&h.default.restoring||(E.scheduleReplace([d],T,null!=n?n[d]:null),I?E.doUpdates(void 0,!0):(w=!0,e.isInnerDataExcluded(d)||_++));var P=c&&c["model:"+u(d)];if(P){var D=P.match(/^\{\{(.*?)\}\}$/);if(D){var j=D[1].match(/^\s*([_a-zA-Z$][_a-zA-Z0-9$]+)\s*$/);if(j){var x=j[1];e.__modelValueName=Object.assign(e.__modelValueName||{},Object(o.default)({},d,x)),O.push(d)}else console.warn("For developer:Two-way binding does not support complex data paths currently. This two-way binding is ignored.")}else console.warn('For developer:"'+P+'" is not an assignable expression. This two-way binding is ignored.')}return"continue"}if("style"===d)return"continue";if(/^data-/.test(d)){var R=(m=d.slice(5).toLowerCase(),a[m]?a[m]:a[m]=m.indexOf("-")<=0?m:m.replace(s,(function(e){return e[1].toUpperCase()})));return e.dataset[R]=T,e.setAttribute(d,T),"continue"}if("$gdc"===d)return Object(v.setWxsGdc)(T),"continue";if((k=d.match(/^\$wxs:(capture-)?(mut-)?(bind|catch):?(.+)$/))&&("function"==typeof T||!T))return C(g,e,k[4],T,"catch"===k[3],k[1],!0,k[2]),Object(l.inDevtoolsWebview)()&&!Object(l.isDataThread)()&&e.setAttribute("exparser:info-attr-"+d.slice(4),T.name),"continue";if(k=d.match(/^(capture-)?(mut-)?(bind|catch):?(.+)$/))return C(g,e,k[4],T,"catch"===k[3],k[1],!1,k[2]),Object(l.inDevtoolsWebview)()&&!Object(l.isDataThread)()&&e.setAttribute("exparser:info-attr-"+d,T),"continue";if("on"===d.slice(0,2))return C(g,e,d.slice(2),T,!1,!1,!1),"continue";if("animation"===d){if(S&&e.$$&&null!==T&&"object"===Object(r.default)(T)&&T.actions&&T.actions.length>0){var M=function(){if(N<B){var t=wx.animationToStyle(L[N]),n=t.transition,r=t.transitionProperty,o=t.transform,a=t.transformOrigin,s=t.style,c=e.__styleObj?Object.assign({},e.__styleObj,{transition:n,transform:o,transitionProperty:r,transformOrigin:a}):{transition:n,transform:o,transitionProperty:r,transformOrigin:a};for(var u in c["-webkit-transition"]=c.transition,c["-webkit-transform"]=c.transform,c["-webkit-transition-property"]=c.transitionProperty,c["-webkit-transform-origin"]=c.transformOrigin,s)c[u]=s[u];e.__styleObj=c,""!==c.transform&&(e.__transformNoneEnabled=!0);var l=Object.keys(c).filter((function(t){return!(/transition/i.test(t)&&""===c[t]||""===t.trim()||void 0===c[t]||!/transform/i.test(t)&&""===c[t]||!isNaN(parseInt(t,10)))&&(/transform/i.test(t)&&""===c[t]&&e.__transformNoneEnabled&&(c[t]="none"),!0)})).map((function(e){return e.replace(/([A-Z]{1})/g,(function(e){return"-"+e.toLowerCase()}))+":"+c[e]})).join(";"),d=function(){e.setNodeStyle(y(l,!0),i.STYLE_SEGMENT_INDEX.ANIMATION)};d(),Object(f.registerResizer)(e,i.STYLE_SEGMENT_INDEX.ANIMATION,d),e.__banned&&Object(p.banComponentNode)(e)}},N=0,L=T.actions,B=T.actions.length;e.addListener("transitionend",(function(){N+=1,M()})),M()}return"continue"}if(k=d.match(/^\$wxs:change:(.+)$/))return e.wxsObserver=e.wxsObserver||{},e.wxsObserver[k[1]]=e.wxsObserver[k[1]]||{},e.wxsObserver[k[1]].observer=T,"continue";if(k=d.match(/^mark:(.+)$/))return e.setMark(k[1],T),"continue";var F=u(d);return S&&e.hasExternalClass(F)?(e.setExternalClass(F,T),"continue"):void 0};for(var k in t)T(k);w&&E.doUpdates(_,!Object(l.isDataThread)());for(var A=function(t){var n=O[t];e.__wxPropertyListener__&&e.__wxPropertyListener__[n]||(e.setPropertyChangeListener(n,(function(t){var r=e.ownerShadowRoot.getHostNode();if(Object(l.isDataThread)())r.setData(Object(o.default)({},e.__modelValueName[n],t));else{var a=g.nodeId.getNodeId(r);Object(l.sendData)(i.SYNC_EVENT_NAME.MODEL_VALUE_CHANGE,{data:t,modelValueName:e.__modelValueName&&e.__modelValueName[n],nodeId:a})}})),e.__wxPropertyListener__=e.__wxPropertyListener__||{},e.__wxPropertyListener__[n]=!0)},P=0;P<O.length;P++)A(P);if(!Object(l.isDataThread)()&&e.wxsObserver&&Object(v.getWxsGdc)()&&Object(v.triggerWxsObserver)(e,t),e.__component__&&!h.default.restoring)if(Object(l.isDataThread)())g.operationFlow.push([i.SYNC_EVENT_NAME.FLOW_APPLY_PROPERTY]);else if(g.operationFlow.iterator.nextStep()[0]!==i.SYNC_EVENT_NAME.FLOW_APPLY_PROPERTY)throw new Error("Framework inner error (expect FLOW_APPLY_PROPERTY but get another)")}},function(e,t,n){"use strict";n.r(t),n.d(t,"saveView",(function(){return l})),n.d(t,"restoreView",(function(){return d}));var r=n(1),o=n(0),i=n(4),a=n(22),s=n(2),c=262144,u=Date.now(),l=function(e,t){var n=s.default.get(e);n&&(n.statesData=t,n.tabRoot&&Object(i.dfsComponents)(n.tabRoot,1,(function(e){e.triggerLifeTime("saved")})),Object(i.dfsComponents)(n.root,1,(function(e){e.triggerLifeTime("saved")})),Object(o.sendData)(r.SYNC_EVENT_NAME.SAVE_STATE,[],e))},d=function(e){var t=s.default.get(e);if(t){Object(o.sendData)(r.SYNC_EVENT_NAME.RESTORE_LOAD_FILE,[Object(a.getLoadedFilesInView)(e),t.root.is],e);var n=t.nodeId.getAll(),l={},d=[],f=function(e){var r=t.nodeId.getNodeId(e);d.push(r),l[r]=n[r].data};t.tabRoot&&!t.tabDestroyed&&Object(i.dfsComponents)(t.tabRoot,1,f),Object(i.dfsComponents)(t.root,1,f);var p=[t.statesData||{},l,d],h=JSON.stringify(p),v=h.length;if(v>c){for(var g=[],_=0;v>_;)g.push(h.substr(_,c)),_+=c;for(var b=++u,y=0,m=g.length;y<m;y++)Object(o.sendData)(r.SYNC_EVENT_NAME.RESTORE_STATE,[{isSplitData:!0,splitInfo:{id:b,index:y+1,total:m,data:g[y]}}],e)}else Object(o.sendData)(r.SYNC_EVENT_NAME.RESTORE_STATE,p,e);if(t.statesData=void 0,!t.tabDestroyed&&t.tabRoot){Object(o.sendData)(r.SYNC_EVENT_NAME.COMPONENT_DEF_TAB,t.tabUsedDef,e);var w=t.tabRoot;t.operationFlow.start(),t.operationFlow.push([r.SYNC_EVENT_NAME.FLOW_CREATE_TAB,w.is,t.nodeId.getNodeId(w)]),t.operationFlow.push([r.SYNC_EVENT_NAME.FLOW_CREATE_TAB]),t.operationFlow.end()}Object(o.sendData)(r.SYNC_EVENT_NAME.COMPONENT_DEF,t.usedDef,e);var O=t.root;t.operationFlow.start(),t.operationFlow.push([r.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION,O.is,t.nodeId.getNodeId(O),{}]),t.operationFlow.push([r.SYNC_EVENT_NAME.FLOW_INITIAL_CREATION]),t.operationFlow.end(),t.tabRoot&&Object(i.dfsComponents)(t.tabRoot,1,(function(e){e.triggerLifeTime("restored")})),Object(i.dfsComponents)(t.root,1,(function(e){e.triggerLifeTime("restored")}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return o}));var r=n(25);function o(e,t){if(e){if("string"==typeof e)return Object(r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.default)(e,t):void 0}}},function(e,t,n){"use strict";n.r(t);var r=n(1),o={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},i={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},a=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],s={CSS:{},springs:{}};function c(e,t,n){return Math.min(Math.max(e,t),n)}function u(e,t){return e.indexOf(t)>-1}function l(e,t){return e.apply(null,t)}var d={arr:function(e){return Array.isArray(e)},obj:function(e){return u(Object.prototype.toString.call(e),"Object")},pth:function(e){return d.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||d.svg(e)||e.$$},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return d.hex(e)||d.rgb(e)||d.hsl(e)},key:function(e){return!o.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function f(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function p(e,t){var n=f(e),r=c(d.und(n[0])?1:n[0],.1,100),o=c(d.und(n[1])?100:n[1],.1,100),i=c(d.und(n[2])?10:n[2],.1,100),a=c(d.und(n[3])?0:n[3],.1,100),u=Math.sqrt(o/r),l=i/(2*Math.sqrt(o*r)),p=l<1?u*Math.sqrt(1-l*l):0,h=l<1?(l*u-a)/p:-a+u;function v(e){var n=t?t*e/1e3:e;return n=l<1?Math.exp(-n*l*u)*(1*Math.cos(p*n)+h*Math.sin(p*n)):(1+h*n)*Math.exp(-n*u),0===e||1===e?e:1-n}return t?v:function(){var t=s.springs[e];if(t)return t;for(var n=1/6,r=0,o=0;;)if(1===v(r+=n)){if(++o>=16)break}else o=0;var i=r*n*1e3;return s.springs[e]=i,i}}function h(e){return void 0===e&&(e=10),function(t){return Math.round(t*e)*(1/e)}}var v,g,_=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function o(e,o,i){return((t(o,i)*e+n(o,i))*e+r(o))*e}function i(e,o,i){return 3*t(o,i)*e*e+2*n(o,i)*e+r(o)}return function(t,n,r,a){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==a)for(var c=0;c<11;++c)s[c]=o(c*e,t,r);return function(e){return t===n&&r===a||0===e||1===e?e:o(u(e),n,a)}}function u(n){for(var a=0,c=1;10!==c&&s[c]<=n;++c)a+=e;--c;var u=a+(n-s[c])/(s[c+1]-s[c])*e,l=i(u,t,r);return l>=.001?function(e,t,n,r){for(var a=0;a<4;++a){var s=i(t,n,r);if(0===s)return t;t-=(o(t,n,r)-e)/s}return t}(n,u,t,r):0===l?u:function(e,t,n,r,i){var a,s,c=0;do{(a=o(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(a)>1e-7&&++c<10);return s}(n,a,a+e,t,r)}}}(),b=(v={linear:function(){return function(e){return e}}},g={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=c(e,1,10),r=c(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){g[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(g).forEach((function(e){var t=g[e];v["easeIn"+e]=t,v["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},v["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}}})),v);function y(e,t){if(d.fnc(e))return e;var n=e.split("(")[0],r=b[n],o=f(e);switch(n){case"spring":return p(e,t);case"cubicBezier":return l(_,o);case"steps":return l(h,o);default:return l(r,o)}}function m(e){try{return document.querySelectorAll(e)}catch(e){return}}function w(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,o=[],i=0;i<n;i++)if(i in e){var a=e[i];t.call(r,a,i,e)&&o.push(a)}return o}function O(e){return e.reduce((function(e,t){return e.concat(d.arr(t)?O(t):t)}),[])}function S(e){return d.arr(e)?e:(d.str(e)&&(e=m(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function I(e,t){return e.some((function(e){return e===t}))}function E(e){var t={};for(var n in e)t[n]=e[n];return t}function C(e,t){var n=E(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function T(e,t){var n=E(e);for(var r in t)n[r]=d.und(e[r])?t[r]:e[r];return n}function k(e){return d.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:d.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):d.hsl(e)?function(e){var t,n,r,o=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(o[1],10)/360,a=parseInt(o[2],10)/100,s=parseInt(o[3],10)/100,c=o[4]||1;function u(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==a)t=n=r=s;else{var l=s<.5?s*(1+a):s+a-s*a,d=2*s-l;t=u(d,l,i+1/3),n=u(d,l,i),r=u(d,l,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+c+")"}(e):void 0;var t,n}function A(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function P(e,t){return d.fnc(e)?e(t.target,t.id,t.total):e}function D(e,t){return e.getAttribute(t)}function j(e,t,n){if(e=e.$$||e,I([n,"deg","rad","turn"],A(t)))return t;var r=s.CSS[t+n];if(!d.und(r))return r;var o=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(o),o.style.position="absolute",o.style.width=100+n;var a=100/o.offsetWidth;i.removeChild(o);var c=a*parseFloat(t);return s.CSS[t+n]=c,c}function x(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),o=e.style[t]||getComputedStyle(e.$$||e).getPropertyValue(r)||"0";return n?j(e,o,n):o}}function R(e,t){return d.dom(e)&&!d.inp(e)&&(D(e,t)||d.svg(e)&&e[t])?"attribute":d.dom(e)&&I(a,t)?"transform":d.dom(e)&&"transform"!==t&&x(e,t)?"css":null!=e[t]?"object":void 0}function M(e){if(d.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,o=new Map;t=r.exec(n);)o.set(t[1],t[2]);return o}}function N(e,t,n,r){var o=u(t,"scale")?1:0+function(e){return u(e,"translate")||"perspective"===e?"px":u(e,"rotate")||u(e,"skew")?"deg":void 0}(t),i=M(e).get(t)||o;return n&&(n.transforms.list.set(t,i),n.transforms.last=t),r?j(e,i,r):i}function L(e,t,n,r){switch(R(e,t)){case"transform":return N(e,t,r,n);case"css":return x(e,t,n);case"attribute":return D(e,t);default:return e[t]||0}}function B(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=A(e)||0,o=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return o+i+r;case"-":return o-i+r;case"*":return o*i+r}}function F(e,t){if(d.col(e))return k(e);if(/\s/g.test(e))return e;var n=A(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function W(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function U(e){for(var t,n=e.points,r=0,o=0;o<n.numberOfItems;o++){var i=n.getItem(o);o>0&&(r+=W(t,i)),t=i}return r}function V(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*D(e,"r")}(e);case"rect":return function(e){return 2*D(e,"width")+2*D(e,"height")}(e);case"line":return function(e){return W({x:D(e,"x1"),y:D(e,"y1")},{x:D(e,"x2"),y:D(e,"y2")})}(e);case"polyline":return U(e);case"polygon":return function(e){var t=e.points;return U(e)+W(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function G(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;d.svg(t)&&d.svg(t.parentNode);)t=t.parentNode;return t}(e),o=r.getBoundingClientRect(),i=D(r,"viewBox"),a=o.width,s=o.height,c=n.viewBox||(i?i.split(" "):[0,0,a,s]);return{el:r,viewBox:c,x:c[0]/1,y:c[1]/1,w:a/c[2],h:s/c[3]}}function H(e,t){function n(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var r=G(e.el,e.svg),o=n(),i=n(-1),a=n(1);switch(e.property){case"x":return(o.x-r.x)*r.w;case"y":return(o.y-r.y)*r.h;case"angle":return 180*Math.atan2(a.y-i.y,a.x-i.x)/Math.PI}}function z(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=F(d.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:d.str(e)||t?r.split(n):[]}}function q(e){return w(e?O(d.arr(e)?e.map(S):S(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function Y(e){var t=q(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:M(e)}}}))}function K(e,t){var n=E(t);if(/^spring/.test(n.easing)&&(n.duration=p(n.easing)),d.arr(e)){var r=e.length;2===r&&!d.obj(e[0])?e={value:e}:d.fnc(t.duration)||(n.duration=t.duration/r)}var o=d.arr(e)?e:[e];return o.map((function(e,n){var r=d.obj(e)&&!d.pth(e)?e:{value:e};return d.und(r.delay)&&(r.delay=n?0:t.delay),d.und(r.endDelay)&&(r.endDelay=n===o.length-1?t.endDelay:0),r})).map((function(e){return T(e,n)}))}function J(e,t){var n=[],r=t.keyframes;for(var o in r&&(t=T(function(e){for(var t=w(O(e.map((function(e){return Object.keys(e)}))),(function(e){return d.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var o=t[r];n[o]=e.map((function(e){var t={};for(var n in e)d.key(n)?n==o&&(t.value=e[n]):t[n]=e[n];return t}))},o=0;o<t.length;o++)r(o);return n}(r),t)),t)d.key(o)&&n.push({name:o,tweens:K(t[o],e)});return n}function X(e,t){var n;return e.tweens.map((function(r){var o=function(e,t){var n={};for(var r in e){var o=P(e[r],t);d.arr(o)&&1===(o=o.map((function(e){return P(e,t)}))).length&&(o=o[0]),n[r]=o}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),i=o.value,a=d.arr(i)?i[1]:i,s=A(a),c=L(t.target,e.name,s,t),u=n?n.to.original:c,l=d.arr(i)?i[0]:u,f=A(l)||A(c),p=s||f;return d.und(a)&&(a=u),o.from=z(l,p),o.to=z(B(a,l),p),o.start=n?n.end:0,o.end=o.start+o.delay+o.duration+o.endDelay,o.easing=y(o.easing,o.duration),o.isPath=d.pth(i),o.isColor=d.col(o.from.original),o.isColor&&(o.round=1),n=o,o}))}var $={css:function(e,t,n){if(e.$$)return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+":"+wx.transformRpx(" "+n)+";";e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,o){if(r.list.set(t,n),t===r.last||o){var i="";if(r.list.forEach((function(e,t){i+=t+"("+e+") "})),e.$$)return"transform:"+wx.transformRpx(" "+i)+";";e.style.transform=i}return""}};function Z(e,t){Y(e).forEach((function(e){for(var n in t){var r=P(t[n],e),o=e.target,i=A(r),a=L(o,n,i,e),s=B(F(r,i||A(a)),a),c=R(o,n);$[c](o,n,s,e.transforms,!0)}}))}function Q(e,t){return w(O(e.map((function(e){return t.map((function(t){return function(e,t){var n=R(e.target,t.name);if(n){var r=X(t,e),o=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:o.end,delay:r[0].delay,endDelay:o.endDelay}}}(e,t)}))}))),(function(e){return!d.und(e)}))}function ee(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},o={};return o.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,o.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,o.endDelay=n?o.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,o}var te=0;var ne,re=[],oe=function(){function e(){ne=requestAnimationFrame(t)}function t(t){var n=re.length;if(n){for(var r=0;r<n;){var o=re[r];if(o.paused){var i=re.indexOf(o);i>-1&&(re.splice(i,1),n=re.length)}else o.tick(t);r++}e()}else ne=cancelAnimationFrame(ne)}return e}();function ie(e){void 0===e&&(e={});var t,n=0,a=0,s=0,u=0,l=null;function d(e){var t=window.Promise&&new Promise((function(e){return l=e}));return e.finished=t,t}var f=function(e){var t=C(o,e),n=C(i,e),r=J(n,e),a=Y(e.targets),s=Q(a,r),c=ee(s,n),u=te;return te++,T(t,{id:u,children:[],animatables:a,animations:s,duration:c.duration,delay:c.delay,endDelay:c.endDelay})}(e);d(f);function p(){var e=f.direction;"alternate"!==e&&(f.direction="normal"!==e?"normal":"reverse"),f.reversed=!f.reversed,t.forEach((function(e){return e.reversed=f.reversed}))}function h(e){return f.reversed?f.duration-e:e}function v(){n=0,a=h(f.currentTime)*(1/ie.speed)}function g(e,t){t&&t.seek(e-t.timelineOffset)}function _(e){for(var t=0,n=f.animations,o=n.length,i=[];t<o;){var a=n[t],s=a.animatable,u=a.tweens,l=u.length-1,d=u[l];l&&(d=w(u,(function(t){return e<t.end}))[0]||d);for(var p=c(e-d.start-d.delay,0,d.duration)/d.duration,h=isNaN(p)?1:d.easing(p),v=d.to.strings,g=d.round,_=[],b=d.to.numbers.length,y=void 0,m=0;m<b;m++){var O=void 0,S=d.to.numbers[m],I=d.from.numbers[m]||0;O=d.isPath?H(d.value,h*S):I+h*(S-I),g&&(d.isColor&&m>2||(O=Math.round(O*g)/g)),_.push(O)}var E=v.length;if(E){y=v[0];for(var C=0;C<E;C++){v[C];var T=v[C+1],k=_[C];isNaN(k)||(y+=T?k+T:k+" ")}}else y=_[0];var A=$[a.type](s.target,a.property,y,s.transforms);i.push(A),a.currentValue=y,t++}1===f.animatables.length&&f.animatables[0].target.$$&&f.animatables[0].target.setNodeStyle(i.join(" "),r.STYLE_SEGMENT_INDEX.ANIMATION)}function b(e){f[e]&&!f.passThrough&&f[e](f)}function y(e){var r=f.duration,o=f.delay,i=r-f.endDelay,v=h(e);f.progress=c(v/r*100,0,100),f.reversePlayback=v<f.currentTime,t&&function(e){if(f.reversePlayback)for(var n=u;n--;)g(e,t[n]);else for(var r=0;r<u;r++)g(e,t[r])}(v),!f.began&&f.currentTime>0&&(f.began=!0,b("begin")),!f.loopBegan&&f.currentTime>0&&(f.loopBegan=!0,b("loopBegin")),v<=o&&0!==f.currentTime&&_(0),(v>=i&&f.currentTime!==r||!r)&&_(r),v>o&&v<i?(f.changeBegan||(f.changeBegan=!0,f.changeCompleted=!1,b("changeBegin")),b("change"),_(v)):f.changeBegan&&(f.changeCompleted=!0,f.changeBegan=!1,b("changeComplete")),f.currentTime=c(v,0,r),f.began&&b("update"),e>=r&&(a=0,f.remaining&&!0!==f.remaining&&f.remaining--,f.remaining?(n=s,b("loopComplete"),f.loopBegan=!1,"alternate"===f.direction&&p()):(f.paused=!0,f.completed||(f.completed=!0,b("loopComplete"),b("complete"),!f.passThrough&&"Promise"in window&&(l(),d(f)))))}return f.reset=function(){var e=f.direction;f.passThrough=!1,f.currentTime=0,f.progress=0,f.paused=!0,f.began=!1,f.loopBegan=!1,f.changeBegan=!1,f.completed=!1,f.changeCompleted=!1,f.reversePlayback=!1,f.reversed="reverse"===e,f.remaining=f.loop,t=f.children;for(var n=u=t.length;n--;)f.children[n].reset();(f.reversed&&!0!==f.loop||"alternate"===e&&1===f.loop)&&f.remaining++,_(f.reversed?f.duration:0)},f.set=function(e,t){return Z(e,t),f},f.tick=function(e){s=e,n||(n=s),y((s+(a-n))*ie.speed)},f.seek=function(e){y(h(e))},f.pause=function(){f.paused=!0,v()},f.play=function(){f.paused&&(f.completed&&f.reset(),f.paused=!1,re.push(f),v(),ne||oe())},f.reverse=function(){p(),v()},f.restart=function(){f.reset(),f.play()},f.reset(),f.autoplay&&f.play(),f}function ae(e,t){for(var n=t.length;n--;)I(e,t[n].animatable.target)&&t.splice(n,1)}ie.version="3.1.0",ie.speed=1,ie.running=re,ie.remove=function(e){for(var t=q(e),n=re.length;n--;){var r=re[n],o=r.animations,i=r.children;ae(t,o);for(var a=i.length;a--;){var s=i[a],c=s.animations;ae(t,c),c.length||s.children.length||i.splice(a,1)}o.length||i.length||r.pause()}},ie.get=L,ie.set=Z,ie.convertPx=j,ie.path=function(e,t){var n=d.str(e)?m(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:G(n),totalLength:V(n)*(r/100)}}},ie.setDashoffset=function(e){var t=V(e);return e.setAttribute("stroke-dasharray",t),t},ie.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?y(t.easing):null,o=t.grid,i=t.axis,a=t.from||0,s="first"===a,c="center"===a,u="last"===a,l=d.arr(e),f=l?parseFloat(e[0]):parseFloat(e),p=l?parseFloat(e[1]):0,h=A(l?e[1]:e)||0,v=t.start||0+(l?f:0),g=[],_=0;return function(e,t,d){if(s&&(a=0),c&&(a=(d-1)/2),u&&(a=d-1),!g.length){for(var b=0;b<d;b++){if(o){var y=c?(o[0]-1)/2:a%o[0],m=c?(o[1]-1)/2:Math.floor(a/o[0]),w=y-b%o[0],O=m-Math.floor(b/o[0]),S=Math.sqrt(w*w+O*O);"x"===i&&(S=-w),"y"===i&&(S=-O),g.push(S)}else g.push(Math.abs(a-b));_=Math.max.apply(Math,g)}r&&(g=g.map((function(e){return r(e/_)*_}))),"reverse"===n&&(g=g.map((function(e){return i?e<0?-1*e:-e:Math.abs(_-e)})))}return v+(l?(p-f)/_:f)*(Math.round(100*g[t])/100)+h}},ie.timeline=function(e){void 0===e&&(e={});var t=ie(e);return t.duration=0,t.add=function(n,r){var o=re.indexOf(t),a=t.children;function s(e){e.passThrough=!0}o>-1&&re.splice(o,1);for(var c=0;c<a.length;c++)s(a[c]);var u=T(n,C(i,e));u.targets=u.targets||e.targets;var l=t.duration;u.autoplay=!1,u.direction=t.direction,u.timelineOffset=d.und(r)?l:B(r,l),s(t),t.seek(u.timelineOffset);var f=ie(u);s(f),a.push(f);var p=ee(a,e);return t.delay=p.delay,t.endDelay=p.endDelay,t.duration=p.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},ie.easing=y,ie.penner=b,ie.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.default=ie},function(e,t,n){"use strict";n.r(t),n.d(t,"allowCSSProperties",(function(){return r})),n.d(t,"extraParameters",(function(){return o})),n.d(t,"acceptParameters",(function(){return i})),n.d(t,"easeWithAnimeJS",(function(){return a}));var r=["height","left","matrix","matrix3d","opacity","right","rotate","rotate3d","rotateX","rotateY","rotateZ","scale","scale3d","scaleX","scaleY","scaleZ","skew","skewX","skewY","top","translate","translate3d","translateX","translateY","translateZ","width","backgroundColor","bottom","borderRadius"],o=["duration","direction","loop","delay","endDelay","easing","keyframes","value","round"],i=[].concat(r,o),a=["easeInElastic","easeOutElastic","easeInOutElastic","easeSpringElastic"]},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(14),i=n(15),a=n(1),s=n(0),c=n(19),u=n(4),l=n(3),d=Object(l.getExparser)(),f={},p={},h={},v=function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},g=function(e,t){var n={left:e.left<t.left?t.left:e.left,top:e.top<t.top?t.top:e.top,right:e.right>t.right?t.right:e.right,bottom:e.bottom>t.bottom?t.bottom:e.bottom,width:0,height:0};return n.right>n.left?n.width=n.right-n.left:n.right=n.left=n.bottom=n.top=0,n.bottom>n.top?n.height=n.bottom-n.top:n.right=n.left=n.bottom=n.top=0,n},_=function(e){var t=e.targetNode,n=e.relatives,r=e.thresholds,o=e.minWidthOrHeight,i=e.cb,a=e.currentRatio,s=function(e){for(var t=document.documentElement.clientWidth,n=document.documentElement.clientHeight,r=null,o=0;o<e.length;o++){var i=e[o],a=i.node,s=i.margins,c=a?a.$$.getBoundingClientRect():{left:0,top:0,right:t,bottom:n,width:t,height:n},u={left:c.left-s.left,top:c.top-s.top,right:c.right+s.right,bottom:c.bottom+s.bottom};r=r?g(r,u):u}return r}(n),c=v(t.$$.getBoundingClientRect());c.right-c.left<o&&(c.right=c.left+o,c.width=o),c.bottom-c.top<o&&(c.bottom=c.top+o,c.height=o);var u=g(s,c),l=c.width*c.height,d=l?u.width*u.height/l:0;e.currentRatio=d;var f=void 0===a;d!==a&&r.forEach((function(e){if(f)return!1;(d<=e&&a>=e||d>=e&&a<=e)&&(f=!0)})),f&&i.call(t,{id:t.id,dataset:t.dataset,time:Date.now(),boundingClientRect:c,intersectionRatio:d,intersectionRect:v(u),relativeRect:s})},b=function(e){return{left:(e=e||{}).left||0,top:e.top||0,right:e.right||0,bottom:e.bottom||0}},y=function(e,t,n,r,o){var i=null;if((r=r||{}).observeAll)i=e.querySelectorAll(t);else{var a=e.querySelector(t);i=a?[a]:[]}i.length||console.warn('For developer:Node "'+t+'" is not found. Intersection observer will not trigger.');var s=[];return n.forEach((function(t){var n=t.selector,r=t.margins,o=null==n?null:e.querySelector(n);o||null==n?s.push({node:o,margins:b(r)}):console.warn('For developer:Node "'+n+'" is not found. The relative node for intersection observer will be ignored.')})),s.length||console.warn("For developer:Intersection observer will be ignored because no relative nodes are found."),function(e,t,n,r,o,i){var a=Object(u.guid)();if(!e.length||!t.length)return a;var s=e.length;return h[a]=s,e.forEach((function(e,c){var u=a+"#"+c,l={targetNode:e,relatives:t,thresholds:n,currentRatio:r,minWidthOrHeight:o,cb:i},v=d.Observer.create((function(e){"attached"===e.status?(f[u]=l,requestAnimationFrame((function(){_(l)}))):"detached"===e.status&&(delete f[u],v.disconnect(),delete p[u],--s||delete h[a])}));p[u]=v,v.observe(e,{attachStatus:!0}),d.Element.isAttached(e)&&(f[u]=l,requestAnimationFrame((function(){_(l)})))})),a}(i,s,r.thresholds||[0],r.initialRatio||0,r.minWidthOrHeight||0,o)},m=!1,w=function(){m||(m=!0,requestAnimationFrame((function(){m=!1,function(){for(var e in f)_(f[e])}()})))};"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.addEventListener&&(document.addEventListener("pageReRender",(function(){w()})),window.addEventListener("scroll",(function(){w()}),{capture:!0,passive:!0}));var O=function(e,t,n){if("addIntersectionObserver"===e.type){var r=null;if(e.nodeId){var o=t.nodeId.getNodeById(e.nodeId);if(!o)return;r=o.shadowRoot}else e.pluginId||(r=window.__DOMTree__.shadowRoot);if(!r)return;return{observerId:y(r,e.targetSelector,e.relativeInfo,e.options,(function(e){n({info:e})}))}}if("removeIntersectionObserver"===e.type)return function(e){var t=h[e];delete h[e];for(var n=0;n<t;n++){var r=e+"#"+n,o=p[r];if(!o)break;delete f[r],o.disconnect(),delete p[r]}}(e.observerId),{reqEnd:!0}},S=n(7),I=1,E={},C=function(e,t){var n=function(e){if("object"!==Object(S.default)(e))return"";var t="";return["minWidth","maxWidth","width","minHeight","maxHeight","height"].forEach((function(n){if(void 0!==e[n]){var r=Number(e[n]);r>=0||(r="");var o=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t&&(t+=" and "),t+="("+o+": "+r+"px)"}})),["orientation"].forEach((function(n){if(void 0!==e[n]){var r=/^[-_a-z0-9]+$/i.test(e[n])?e[n]:"",o=n.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}));t&&(t+=" and "),t+="("+o+": "+r+")"}})),t}(e),r=window.matchMedia(n),o=I++,i=function(e){t({matches:e.matches})};return E[o]={observer:r,listener:i},r.addListener(i),t({matches:r.matches}),o},T=function(e,t){return"addMediaQueryObserver"===e.type?{observerId:C(e.mediaQueryCond,(function(e){t({info:e})}))}:"removeMediaQueryObserver"===e.type?(function(e){var t=E[e],n=t.observer,r=t.listener;n.removeListener(r),delete E[e]}(e.observerId),{reqEnd:!0}):void 0},k=n(21),A=Object(l.getExparser)(),P=function(){function e(t,n,r){Object(o.default)(this,e),this._treeManager=t,this._arr=n,this._depth=0,this._startCb=r}return Object(i.default)(e,[{key:"_consumeHead",value:function(){return this._arr.shift()}},{key:"nextStepType",value:function(){return this._arr[0][0]}},{key:"nextStep",value:function(){for(;this._arr[0][0]===a.SYNC_EVENT_NAME.FLOW_DEPTH;)this._startCb(this._treeManager);if(this._arr[0][0]===a.SYNC_EVENT_NAME.FLOW_REPEAT){var e=this._arr[0][2];return--this._arr[0][1]||this._consumeHead(),[e]}return this._consumeHead()}},{key:"nextStepIf",value:function(e){for(;this._arr[0][0]===a.SYNC_EVENT_NAME.FLOW_DEPTH;)this._startCb(this._treeManager);return this._arr[0][0]===e?this._consumeHead():null}},{key:"expectStart",value:function(){var e=this._consumeHead();if(this._depth++,e[0]!==a.SYNC_EVENT_NAME.FLOW_DEPTH||e[1]!==this._depth)throw new Error("Framework inner error (expect START descriptor with depth "+this._depth+" but get "+Object(a.getEvName)(e[0])+")");return e[2]}},{key:"expectEnd",value:function(){for(;this._arr[0][0]===a.SYNC_EVENT_NAME.FLOW_DEPTH&&this._arr[0][1]!==this._depth-1;)this._startCb(this._treeManager);var e=this._consumeHead();if(this._depth--,e[0]!==a.SYNC_EVENT_NAME.FLOW_DEPTH||e[1]!==this._depth)throw new Error("Framework inner error (expect END descriptor with depth "+this._depth+" but get "+Object(a.getEvName)(e[0])+")")}},{key:"skipToEnd",value:function(){for(;this._arr[0];)if(this._arr[0][0]!==a.SYNC_EVENT_NAME.FLOW_DEPTH)this._consumeHead();else{if(this._arr[0][1]===this._depth-1)break;this._startCb(this._treeManager)}}},{key:"getQueueLength",value:function(){return this._arr.length}},{key:"getDepth",value:function(){return this._depth}}]),e}(),D=function(){function e(t,n){var i=this;Object(o.default)(this,e),this._viewId=t,this._treeManager=n,this._depth=0,this._curWinSize=0,this._setDataCallbackInc=1,this._pendingSetDataCallbacks=[],this._setDataCallbackMap={},this._received=[],this._cache=[],this._blocked=[],this._fetchingViewInfoCallbacks=[];var u=function(t,n){if(i._received.push([n].concat(t)),n===a.SYNC_EVENT_NAME.FLOW_DEPTH&&(i._depth=t[0],0===i._depth)){var r=i._received;i._received=[],i._blocked?i._blocked.push(r):(i.iterator=new P(i._treeManager,r,e._startCb),e._startCb(i._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{})),Object(s.sendData)(a.SYNC_EVENT_NAME.SET_DATA_CALLBACK,[i._pendingSetDataCallbacks],null,!0),i._pendingSetDataCallbacks=[],i.checkDelayFetchingViewInfo())}};for(var l in a.SYNC_EVENT_NAME)"FLOW_"===l.slice(0,5)&&("FLOW_SET_DATA"===l?Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],(function(e){var t=Object(r.default)(e,1)[0];i._pendingSetDataCallbacks.push(t)}),t):"FLOW_VIEW_INFO"===l?function(){var e=function(e){var t=Object(r.default)(e,3),n=t[0],o=t[1],u=t[2],l=null;"selectorQuery"===n?l=Object(c.getViewInfo)(o,i._treeManager):"intersection"===n?l=O(o,i._treeManager,(function(e){Object(s.sendData)(a.SYNC_EVENT_NAME.RESPONSE_VIEW_INFO,[e,u])})):"matchMedia"===n&&(l=T(o,(function(e){Object(s.sendData)(a.SYNC_EVENT_NAME.RESPONSE_VIEW_INFO,[e,u])}))),l&&Object(s.sendData)(a.SYNC_EVENT_NAME.RESPONSE_VIEW_INFO,[l,u])};Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],(function(t){i._received.length||i._blocked?i._fetchingViewInfoCallbacks.push(e.bind(i,t)):e(t)}),t)}():"FLOW_SET_NODE_ANIMATION_INFO"===l?Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],(function(e){"scrollTimeline"===e[0].type?Object(k.bindScrollAnimations)(e[0],i._treeManager):Object(c.setNodeAnimationInfo)(e[0])})):"FLOW_CLEAR_NODE_ANIMATION_INFO"===l?Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],(function(e){Object(c.clearNodeAnimationInfo)(e[0])})):"FLOW_SET_NODE_NEXT_ANIMATION_INFO"===l?Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],(function(e){Object(c.setNodeNextAnimationInfo)(e[0])})):Object(s.setDataListener)(a.SYNC_EVENT_NAME[l],u,t));Object(s.setDataListener)(a.SYNC_EVENT_NAME.SET_DATA_CALLBACK,(function(e){var t=Object(r.default)(e,1)[0];i.triggerSetDataCallbacks(t)}),t)}return Object(i.default)(e,[{key:"flushBlocked",value:function(){if(this._blocked){for(;this._blocked.length;)try{var t=this._blocked.shift();this.iterator=new P(this._treeManager,t,e._startCb),e._startCb(this._treeManager),document.dispatchEvent(new CustomEvent("pageReRender",{}))}catch(e){console.error(e.message),Reporter.errorReport({key:"webviewScriptError",error:e})}this._blocked.length||(Object(s.sendData)(a.SYNC_EVENT_NAME.SET_DATA_CALLBACK,[this._pendingSetDataCallbacks],null,!0),this._pendingSetDataCallbacks=[],this.checkDelayFetchingViewInfo())}}},{key:"unblock",value:function(){this.flushBlocked(),this._blocked&&0===this._blocked.length&&(this._blocked=null)}},{key:"block",value:function(){null===this._blocked&&(this._blocked=[])}},{key:"start",value:function(){this.flush(),this._depth++,Object(s.sendData)(a.SYNC_EVENT_NAME.FLOW_DEPTH,[this._depth,Date.now()],this._viewId)}},{key:"dedupe",value:function(){var e=this._cache;if(this._curWinSize){if(2===e.length){var t=e[1][2];if(e[0][0]!==t){var n=e.pop(),r=n.shift();Object(s.sendData)(r,n,this._viewId)}else e.shift(),e[0][1]++}}else{var o=0;if(e.length>2&&e[0][0]===e[1][0]&&e[0][0]===e[2][0]&&e[0][0]!==a.SYNC_EVENT_NAME.FLOW_SET_DATA&&e[0][0]!==a.SYNC_EVENT_NAME.FLOW_VIEW_INFO&&(o=1),o){var i=e[0][0];e.splice(0,3),this.flush(),this._curWinSize=1,e.unshift([a.SYNC_EVENT_NAME.FLOW_REPEAT,3,i])}else if(e.length>3){var c=e.pop(),u=c.shift();Object(s.sendData)(u,c,this._viewId)}}}},{key:"push",value:function(e){this._cache.unshift(e),1!==e.length?this.flush():this.dedupe()}},{key:"flush",value:function(){for(this._curWinSize=0;this._cache.length;){var e=this._cache.pop(),t=e.shift();Object(s.sendData)(t,e,this._viewId)}}},{key:"end",value:function(){this.flush(),this._depth--,Object(s.sendData)(a.SYNC_EVENT_NAME.FLOW_DEPTH,this._depth,this._viewId),0===this._depth&&Object(s.flushDataBuffer)()}},{key:"checkDelayFetchingViewInfo",value:function(){if(this._fetchingViewInfoCallbacks.length){var e=this._fetchingViewInfoCallbacks;this._fetchingViewInfoCallbacks=[],e.forEach((function(e){return e()}))}}},{key:"registerSetDataCallback",value:function(e,t,n){var r=this._setDataCallbackInc++;this._setDataCallbackMap[r]=[e,t,n],this.push([a.SYNC_EVENT_NAME.FLOW_SET_DATA,r])}},{key:"triggerSetDataCallbacks",value:function(e){for(var t=0;t<e.length;t++){var n=e[t],o=Object(r.default)(this._setDataCallbackMap[n],3),i=o[0],a=o[1],s=o[2];delete this._setDataCallbackMap[n],A.safeCallback("SetData Callback",i,a,[],s)}}}],[{key:"setStartOperation",value:function(t){e._startCb=t}}]),e}();t.default=D},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"requestViewInfo",(function(){return c.requestViewInfo})),n.d(t,"endViewInfoCallback",(function(){return c.endViewInfoCallback})),n.d(t,"setModelValueData",(function(){return c.setModelValueData})),n.d(t,"getLazyCompPlaceholder",(function(){return c.getLazyCompPlaceholder})),n.d(t,"componentLoaded",(function(){return c.componentLoaded})),n.d(t,"shouldUsePlaceholder",(function(){return c.shouldUsePlaceholder})),n.d(t,"getLoadedFilesInView",(function(){return c.getLoadedFilesInView})),n.d(t,"restoreLoadComponentDef",(function(){return c.restoreLoadComponentDef})),n.d(t,"arrangePlaceholderReplace",(function(){return c.arrangePlaceholderReplace})),n.d(t,"getOwnerPluginAppId",(function(){return c.getOwnerPluginAppId})),n.d(t,"Behavior",(function(){return c.Behavior})),n.d(t,"CustomComponent",(function(){return c.CustomComponent})),n.d(t,"Component",(function(){return c.Component})),n.d(t,"Page",(function(){return c.Page})),n.d(t,"initViewThread",(function(){return c.initViewThread})),n.d(t,"runComponentDef",(function(){return c.runComponentDef})),n.d(t,"sendTabBarCreationRequest",(function(){return c.sendTabBarCreationRequest})),n.d(t,"addView",(function(){return c.addView})),n.d(t,"attachView",(function(){return c.attachView})),n.d(t,"removeView",(function(){return c.removeView})),n.d(t,"componentAliases",(function(){return c.componentAliases})),n.d(t,"componentPathToAlias",(function(){return c.componentPathToAlias})),n.d(t,"getDomainByPluginId",(function(){return c.getDomainByPluginId})),n.d(t,"publishDomainComponents",(function(){return c.publishDomainComponents})),n.d(t,"getNodeById",(function(){return c.getNodeById})),n.d(t,"getNodeId",(function(){return c.getNodeId})),n.d(t,"getRootNodeId",(function(){return c.getRootNodeId})),n.d(t,"saveView",(function(){return u.saveView})),n.d(t,"restoreView",(function(){return u.restoreView})),n.d(t,"convertRouteToComponentAlias",(function(){return l.convertRouteToComponentAlias})),n.d(t,"convertComponentAliasToRoute",(function(){return l.convertComponentAliasToRoute})),n.d(t,"getPluginSubPackagePrefix",(function(){return l.getPluginSubPackagePrefix})),n.d(t,"getPluginRoutePrefix",(function(){return l.getPluginRoutePrefix})),n.d(t,"initBannedMap",(function(){return d.initBannedMap})),n.d(t,"beginTapMark",(function(){return f.beginTapMark})),n.d(t,"endTapMark",(function(){return f.endTapMark})),n.d(t,"checkTapMark",(function(){return f.checkTapMark})),n.d(t,"wrapTapMark",(function(){return f.wrapTapMark})),n.d(t,"updateWxAppCode",(function(){return v})),n.d(t,"enableUpdateWxAppCode",(function(){return h})),n.d(t,"mergeData",(function(){return _}));var r,o=n(7),i=n(3),a=Object(i.getExparser)(),s=n(23),c=n(16),u=n(27),l=n(20),d=n(10),f=n(12),p=n(11),h=function(){Object(p.enableUpdateListener)()},v=function(e,t){var n=p.updateListener[e];if(n)return p.updatedWxAppCode[e]=t,n(t)},g=Object(i.getExparser)(),_=function(e){return e};g.addGlobalErrorListener((function(e,t){var n=t.element&&t.element instanceof c.CustomComponent?t.element:null,r=n?Object(c.getOwnerPluginAppId)(n):"";return Reporter.thirdErrorReport({source:r,error:e,extend:t.message.replace(/^\[exparser\] \[(error|warning)\]/i,"")}),!1})),g.globalOptions.createFakeDomElement=!1,g.globalOptions.inDocument=!1,g.globalOptions.documentBackend="none",g.updateDefaultComponent(),a.registerBehavior({is:"wx://form-field",properties:{name:{type:String,public:!0},value:{type:null,public:!0}}}),a.registerBehavior({is:"wx://form-field-group"}),a.registerBehavior({is:"wx://form-field-button"}),a.registerBehavior({is:"wx://style-filter"}),a.registerBehavior({is:"wx://request-filter"}),a.registerBehavior({is:"wx://request-sender"}),a.registerBehavior({is:"wx://component-export",definitionFilter:function(e){"function"==typeof e.export&&("object"===Object(o.default)(e.methods)?e.methods.__export__=e.export:e.methods={__export__:e.export})}}),r={domain:"//",writeOnly:!1,allowInWriteOnly:!1,lazyRegistration:!0,classPrefix:"",addGlobalClass:!1,templateEngine:null,renderingMode:"full",multipleSlots:!1,publicProperties:!0,reflectToAttributes:!1,writeFieldsToNode:!1,writeIdToDOM:!1},["not-found","functional-page","open-api-redirecting-page"].forEach((function(e){Object(c.Component)({options:r,properties:{}},"//",Object(s.default)({},"wx://"+e+".json",{usingComponents:{}}),"wx://"+e+".js")}))}]),__appServiceEngine__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.r(t),n.d(t,"default",(function(){return o}))},function(e,t,n){"use strict";n.r(t),n.d(t,"isDevTools",(function(){return o})),n.d(t,"addHtmlSuffixToUrl",(function(){return i})),n.d(t,"shouldExit",(function(){return a})),n.d(t,"hasExitCondition",(function(){return s})),n.d(t,"getCachedSystemInfo",(function(){return u}));var r=n(4),o=function(){return!!("undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("appservice")>-1)},i=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t},a=function(e){return"hang"!==e&&"hide"!==e},s=function(e){return-1!==r.EXIT_SCENES.indexOf(e.scene)},c=null,u=function(){return c||(c=__appServiceSDK__.getSystemInfoSync()),c}},function(e,t,n){"use strict";n.r(t),n.d(t,"DOM_READY_EVENT",(function(){return r})),n.d(t,"UPDATE_APP_DATA",(function(){return o})),n.d(t,"DEFAULT_ON_REACH_BOTTOM_DISTANCE",(function(){return i})),n.d(t,"EXIT_SCENES",(function(){return a}));var r="__DOMReady",o="__updateAppData",i=50,a=[1007,"1007",1008,"1008",1011,"1011",1025,"1025",1047,"1047",1048,"1048",1049,"1049",1050,"1050"]},function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"DisplayReporter",(function(){return b})),n.d(t,"reportShare",(function(){return y})),n.d(t,"reportWebviewRecycle",(function(){return m})),n.d(t,"reportWebviewRestore",(function(){return w})),n.d(t,"checkWebviewAlive",(function(){return S})),n.d(t,"stopCheckWebviewAlive",(function(){return I})),n.d(t,"setForCustomComponent",(function(){return C}));var r,o=n(0),i=n(1),a=n(2),s=n(3),c={},u=!0,l=null,d={},f={},p=null,h=null,v=null,g="";function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clickTimestamp;t&&((t=(t=parseInt(t,10))<1e12?1e3*t:t)&&t>0&&(l=t),u=e.isLaunch)}var b=function(){function e(t,n){Object(i.default)(this,e),this.showOptions={},this.hideOptions={},this.route=t,this.pageType=n||0,this.query={},this.deferred=[],this.showTimeStamp=null,this.pageReadyTime=null,this.showReferpagepath="",this.isentrance=0,this.isInitialLoading=!0,this.orientationChangeCount=0,this.startCostTime=null,this.startType=null}return Object(a.default)(e,[{key:"checkShowOptions",value:function(){var e=d,t=this.showOptions;t.scene=e.scene||0,t.scene_note=e.scene_note,t.sessionid=e.sessionid||e.sessionId,t.usedstate=e.usedstate,t.referpagepath=e.referpagepath,t.clickTimestamp=e.clickTimestamp,t.prescene=e.prescene,t.prescene_note=e.prescene_note,t.apptype=Reporter.getAppType(),t.publicLibVersion=e.publicLibVersion,t.hostAppId=e.hostAppId||"",t.shortLink=e.shortLink||"";var n=this.query,r=[];n&&"object"===Object(o.default)(n)&&Object.keys(n).forEach((function(e){r.push(encodeURIComponent(e)+"="+encodeURIComponent(n[e]))})),t.query=r.join("&")}},{key:"checkHideOptions",value:function(){var e=f,t=this.hideOptions;t.targetAction=e.targetAction||0,t.targetPagePath=e.targetPagePath||"",void 0!==e.usedstate&&(t.usedstate=e.usedstate),void 0!==e.usedState&&(t.usedstate=e.usedState)}},{key:"_checkDeferred",value:function(){for(var e=this.deferred;e.length;){e.pop()()}}},{key:"_reportShowPage",value:function(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,0,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map((function(e,t){return-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e})).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}},{key:"_reportHidePage",value:function(e){this.pageReadyTime?e.costtime=this.pageReadyTime-e.clickTimestamp:e.costtime=0,e.costtime<0&&(e.costtime=0),e.reportTime=Date.now();var t=[e.event_id,e.scene,e.scene_note,e.sessionid,e.usedstate,e.pagepath,e.networktype,e.costtime,e.staytime,e.referpagepath,e.targetAction,e.targetPagePath,e.clickTimestamp,e.publicLibVersion,e.prescene,e.prescene_note,e.isentrance,e.query,e.apptype,e.pagetype,e.anchorTargetText,0,e.clickTimestamp,e.anchorRelatedText,e.orientationChangeCount,e.startCostTime,e.startType,e.reportTime,0,e.hostAppId,e.shortLink].map(encodeURIComponent).map((function(e,t){return-1!==[2,9,11,17].indexOf(t)?(e||"").substr(0,1024):e})).join(",");Reporter.reportKeyValue({key:"Display",value:t,force:!0}),this._submit(),this._reportRealtime(e)}},{key:"_submit",value:function(){Reporter.submit(),setTimeout((function(){Reporter.submit()}),100)}},{key:"_reportRealtime",value:function(e){if(!Object(s.isDevTools)()){var t="",n=2;if(__wxConfig){var o=__wxConfig.accountInfo,i=__wxConfig.envVersion;o&&(t=o.appId||""),"release"===i?n=1:"trial"===i&&(n=3)}if(g||(g=wx&&wx.version&&wx.version.version||""),null==r)try{r=Object(s.getCachedSystemInfo)()||{}}catch(e){r={}}var a={DeviceModel:r.model||"",DeviceBrand:r.brand||"",OsName:r.platform||"",OsVersion:r.system||"",LanguageVersion:r.language||"",appid:t,appversion:g,appstate:n,event_id:e.event_id,scene:e.scene,scene_note:(e.scene_note||"").substr(0,1024),sessionid:e.sessionid,usedstate:e.usedstate,pagepath:e.pagepath,networktype:e.networktype,costtime:e.costtime,staytime:e.staytime,referpagepath:(e.referpagepath||"").substr(0,1024),targetAction:e.targetAction,targetPagePath:(e.targetPagePath||"").substr(0,1024),clickTimestamp:0,publicLibVersion:e.publicLibVersion,prescene:e.prescene,prescene_note:e.prescene_note,isentrance:e.isentrance,query:(e.query||"").substr(0,1024),apptype:e.apptype,pagetype:e.pagetype,anchorTargetText:e.anchorTargetText,clickTime:e.clickTimestamp,anchorTargetRelatedText:e.anchorRelatedText,orientationChangeCount:e.orientationChangeCount,startCostTime:e.startCostTime,startType:e.startType,reportTime:e.reportTime};try{__appServiceSDK__.operateRealtimeData(1e3,JSON.stringify(a),!0)}catch(e){}}}},{key:"setReadyTime",value:function(e){this.pageReadyTime=e,this._checkDeferred()}},{key:"setQuery",value:function(e){this.query=e}},{key:"addOrientationChangeCount",value:function(){this.orientationChangeCount+=1}},{key:"reportShowPage",value:function(){var t=this;this._checkDeferred(),this.checkShowOptions();var n=Date.now(),r=this.route,o=this.pageType,i=this.showOptions,a=i.referpagepath||"",s=i.clickTimestamp,c=0,d=0,f=0;h&&h!==r&&(a=h+".html",s=n);var g=p;p=null;var _={anchorTargetText:"",anchorRelatedText:""};this.isInitialLoading&&g&&g.anchorTapTime&&s-g.anchorTapTime<1e3&&(_.anchorTargetText=g.anchorTargetText,_.anchorRelatedText=g.anchorRelatedText),h=r,this.showTimeStamp=n,this.showReferpagepath=a,this.orientationChangeCount=0,v!==i.sessionid&&(v=i.sessionid,c=1),1===c&&(d=n-l,f=u?1:2,this.startCostTime=d,this.startType=f),this.isInitialLoading=!1,this.isentrance=c,e._getNetworkType((function(e){var n=Object.assign({},i,_,{event_id:1,pagepath:r+".html",networktype:e,staytime:0,referpagepath:a,targetAction:0,targetPagePath:"",isentrance:c,pagetype:o,clickTimestamp:s,startCostTime:d,startType:f});t.pageReadyTime?t._reportShowPage(n):t.deferred.push((function(){t._reportShowPage(n)}))}))}},{key:"reportHidePage",value:function(t,n){var r=this;this._checkDeferred(),this.checkShowOptions(),this.checkHideOptions();var o=Date.now(),i=this.route,a=this.pageType,s=this.showOptions,c=this.hideOptions,u=this.showReferpagepath||"",l=this.showTimeStamp?o-this.showTimeStamp:0,d=void 0!==c.usedstate?c.usedstate:s.usedstate,f=c.targetAction,p=c.targetPagePath,h=0,v=0;t&&(f=n?1:2,p=t+".html"),1===this.isentrance&&(h=null!==this.startCostTime?this.startCostTime:h,v=null!==this.startType?this.startType:v,this.startCostTime=null,this.startType=null),this.showTimeStamp=null,e._getNetworkType((function(e){var t=Object.assign({},s,{event_id:2,pagepath:i+".html",usedstate:d,networktype:e,staytime:l,referpagepath:u,targetAction:f,targetPagePath:p,isentrance:r.isentrance||0,pagetype:a,anchorTargetText:"",anchorRelatedText:"",orientationChangeCount:r.orientationChangeCount||0,startCostTime:h,startType:v});r._reportHidePage(t)}))}}],[{key:"setOnLaunch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(t),d=Object.assign(d,t),r=Object(s.getCachedSystemInfo)(),d.publicLibVersion=r.SDKVersion,d.hostAppId=__wxConfig.host&&__wxConfig.host.appId||"",e._assignForClientOnShow(d,t)}},{key:"setOnAppShow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(t),d=Object.assign(d,t),e._assignForClientOnShow(d,t)}},{key:"setOnAppHide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f=Object.assign(f,e)}},{key:"setEventRelatedInfo",value:function(e){p=e}},{key:"_assignForClientOnShow",value:function(e,t){e.shortLink=t.shortLink||"",e.scene_note=t.scene_note||t.sceneNote||"",e.referpagepath=t.referpagepath||"",e.usedstate=t.usedstate||t.usedState,e.prescene=t.prescene,e.prescene_note=t.prescene_note||t.presceneNote||"",e.clickTimestamp=Date.now()}},{key:"_getNetworkType",value:function(e){__appServiceSDK__.getNetworkType({success:function(t){var n=t.networkType;"none"===n&&(n="offline"),e(n)},fail:function(){e("")}})}}]),e}(),y=function(e,t,n){var r=e.page.__displayReporter;r.checkShowOptions();var o=r.showOptions,i=r.route+".html",a=t.errMsg,s=0,c=e.updateTitle&&e.updateTitle.trim(),u=(__wxConfig.global&&__wxConfig.global.window||{}).navigationBarTitleText||"",l=((__wxConfig.page[i]||{}).window||{}).navigationBarTitleText||"",d=__wxConfig.host&&__wxConfig.host.appId||"";a.indexOf(":ok")>=0?s=1:a.indexOf(":fail")>=0?s=2:a.indexOf(":cancel")>=0&&(s=3);var f=[o.scene,o.scene_note,o.sessionid,i,c||l||u,o.apptype,s,0,o.query,n,0,"","",d].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:f,force:!0}),Reporter.submit()},m=function(e,t){var n=t.pageCount,r=t.pageType,o=t.rootCompCount,i=void 0===o?0:o,a=t.rootCustomCompCount,s=void 0===a?0:a,u=t.rootCustomCompRatio,l=void 0===u?0:u,d=t.rootInternalCompCount,f=void 0===d?0:d,p=[n,r].map(encodeURIComponent).join(",");c[e]={rootCompCount:i,rootCustomCompCount:s,rootCustomCompRatio:l,rootInternalCompCount:f},Reporter.reportKeyValue({key:"WebviewRecycle",value:p}),Reporter.submit()},w=function(e,t){var n=t.pageCount,r=t.pageType,o=c[e]||{},i=[n,r,o.rootCompCount||0,o.rootCustomCompCount||0,o.rootCustomCompRatio||0,o.rootInternalCompCount||0].map(encodeURIComponent).join(",");c[e]={},Reporter.reportKeyValue({key:"WebviewRestore",value:i}),Reporter.submit()},O={};__appServiceSDK__.subscribeCheckWebviewAliveOk((function(e,t){1===O[t]&&(O[t]=2)}));var S=function(e){Reporter.reportIDKey({key:"pageOnShow"}),O[e]=1;var t=0;!function n(){1===O[e]&&(__appServiceSDK__.publishCheckWebviewAlive({},[e]),++t<3?setTimeout(n,500):setTimeout((function(){1===O[e]&&Reporter.reportIDKey({key:"clientRestoreWebview_fail"})}),2e3))}()},I=function(e){delete O[e]},E={use:{},kbone:0},C=function(e){try{!function(e){(e.options||{}).addGlobalClass&&(E.use[1]=1),e.pageLifetimes&&(E.use[2]=1),e.lifetimes&&(E.use[3]=1),e.definitionFilter&&(E.use[4]=1),e.behaviors&&e.behaviors.forEach((function(e){"wx://component-export"===e&&(E.use[5]=1)}))}(e)}catch(e){}},T=!0;__appServiceSDK__.onAppShow((function(t){if(T){T=!1,b.setOnLaunch(__appServiceSDK__.getLaunchOptionsSync());try{!function(t){var n=exparser.Component._list,r=t.pages||[],o=t.page||{},i=r.length,a=0,s=0,c=0,u=0,l=9999,d=0;Object.keys(exparser.Component._list).forEach((function(e){e&&"wx://functional-page"!==e&&!o[e+".html"]&&(s++,/(^|\/)miniprogram_npm\//g.test(e)&&c++)})),r.forEach((function(e){if(((o[e+".html"]||{}).window||{}).usingComponents){a++;var t=n[e];if(!t)return;var r=t.behavior,i=r.using||{},s=r.generics||{},c=Object.keys(i).length+Object.keys(s).length;c>u&&(u=c),c<l&&(l=c),d+=c}})),d=a?d/a:0,l=9999===l?0:l;var f=[];try{Object.keys(e.__modules__||{}).forEach((function(e){if(e.indexOf("miniprogram-render/")>=0&&(E.kbone=1),0===e.indexOf("miniprogram_npm/")){var t=e.indexOf("/",16),n=e.substring(16,t);"@"===n[0]&&(t=e.indexOf("/",t+1),n=e.substring(16,t)),f.push(n)}}));for(var p=f.length;p>=0;p--)for(var h=0;h<p;h++)f[h]===f[p]&&f.splice(p,1)}catch(e){}var v=[i,a,s,c,u,l,d,JSON.stringify(E),f.join(";")].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"CustomComponent",value:v,force:!0})}(__wxConfig),n=exparser.Component._list,r=Object.keys(n),o=["miniprogram-recycle-view","miniprogram-barrage","wxml-to-canvas","weui-miniprogram","miniprogram-navigation-bar"],i=/^miniprogram_npm\/(.+$)/,a={},r.forEach((function(e){var t=n[e].is,r=i.exec(t);if(r){var s=r[1],c=s.indexOf("/"),u=s.substring(0,c),l=s.substring(c+1);"@"===u[0]&&(c=s.indexOf("/",c+1),u=s.substring(0,c),l=s.substring(c+1)),(o.indexOf(u)>-1||/^@miniprogram-component-plus\//.test(u))&&(a[u]=a[u]||[],a[u].push(l))}})),Object.keys(a).forEach((function(e){Reporter.reportKeyValue({key:"NpmExtendedLib",value:[e,a[e].join(";")].map(encodeURIComponent).join(","),force:!0})})),Reporter.submit()}catch(e){}}else b.setOnAppShow(t);var n,r,o,i,a})),__appServiceSDK__.onAppHide((function(e){b.setOnAppHide(e)}))}.call(this,n(6))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"DisplayReporter",(function(){return U.DisplayReporter})),n.d(t,"__createPluginGlobal",(function(){return wn})),n.d(t,"Page",(function(){return On})),n.d(t,"Component",(function(){return Sn})),n.d(t,"Behavior",(function(){return In})),n.d(t,"isFramesetMode",(function(){return Mt})),n.d(t,"hasPageRoute",(function(){return Xt})),n.d(t,"convertComponentAliasToRoute",(function(){return Et})),n.d(t,"getPageByWebviewId",(function(){return Gt})),n.d(t,"getCurrentRoute",(function(){return Nt})),n.d(t,"getCurrentPages",(function(){return qt})),n.d(t,"getCurrentPagesByDomain",(function(){return zt})),n.d(t,"getCurrentPageWithAdditionalInfo",(function(){return Vt})),n.d(t,"getPageMetaByWebviewId",(function(){return Ht})),n.d(t,"forcePageReload",(function(){return ln})),n.d(t,"showShareTimelineMenuIfNeeded",(function(){return vn})),n.d(t,"App",(function(){return Ve})),n.d(t,"getApp",(function(){return Ge})),n.d(t,"setPrivateExtraData",(function(){return ze}));var o=n(0),i=Object.prototype.toString;function a(e,t){var n=c(e);return null!==n?n:s(e,t)}function s(e,t){if("function"!=typeof t)throw new TypeError("customizer is must be a Function");if("function"==typeof e)return e;var n=i.call(e);if("[object Array]"===n)return[];if("[object Object]"===n&&e.constructor===Object)return{};if("[object Date]"===n)return new Date(e.getTime());if("[object RegExp]"===n){var r=String(e),o=r.lastIndexOf("/");return new RegExp(r.slice(1,o),r.slice(o+1))}var a=t(e);return void 0!==a?a:null}function c(e){var t=Object(o.default)(e);return null!==e&&"object"!==t&&"function"!==t?e:null}var u=Object.prototype.toString,l="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var t=Object(o.default)(e);if(null===e||"function"!==t&&"object"!==t)throw new TypeError("obj must be an Object");var n,r=[];for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(n);return r},d="function"==typeof Symbol?function(e){return Object.getOwnPropertySymbols(e)}:function(){return[]};function f(e,t){if("[object Array]"!==u.call(e))throw new TypeError("array must be an Array");var n,r,o;for(n=0,r=e.length;n<r;++n)if((o=e[n])===t||o!=o&&t!=t)return n;return-1}function p(e){}function h(e,t,n,r,i){if(null===e)return null;var s=c(e);if(null!==s)return s;var u,p,v,g,_,b,y,m,w=l(e).concat(d(e));for(u=0,p=w.length;u<p;++u)b=void 0,y=void 0,m=void 0,-1===(_=f(r,g=e[v=w[u]]))?(y=null!==(b=a(g,t))?b:g,null!==g&&/^(?:function|object)$/.test(Object(o.default)(g))&&(r.push(g),i.push(y))):m=i[_],n[v]=m||h(g,t,y,r,i);return n}var v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;if(null===e)return null;var n=c(e);if(null!==n)return n;var r=s(e,t),o=null!==r?r:e,i=[e],a=[o];return h(e,t,o,i,a)},g=n(1),_=n(2);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==Object(o.default)(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function I(e,t,n){return(I=S()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&m(o,n.prototype),o}).apply(null,arguments)}function E(e){var t="function"==typeof Map?new Map:void 0;return(E=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return I(e,arguments,O(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}var T=function(e,t){for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e},k=function(){},A=function(e){return Object.prototype.toString.call(e).split(" ")[1].split("]")[0]},P=(Object.prototype.hasOwnProperty,Object.prototype.toString),D=function(e){return"[object Object]"===P.call(e)},j=function(e,t){console.group(new Date+" "+e),console.error(t),console.groupEnd()},x=function(e,t){console.group(new Date+" "+e),console.warn(t),console.groupEnd()},R=function(e){__wxConfig&&__wxConfig.debug&&console.info(e)},M=function(e,t){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceEngineKnownError"===e.type)throw e;Reporter.errorReport({key:"jsEnginScriptError",error:e,extend:t})}},N=function(e,t){return function(){try{for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(e,r)}catch(e){return M(e,t),function(){}}}},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(n,e);var t=C(n);function n(e){var r;return Object(g.default)(this,n),(r=t.call(this,"APP-SERVICE-Engine:"+e)).type="AppServiceEngineKnownError",r}return n}(E(Error));function B(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,o=t[0];Reporter.__route__=this.__route__,Reporter.__method__=o,t=t.slice(1);try{var i=Date.now();r=this[o].apply(this,y(t));var a=Date.now()-i;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:"at "+this.__route__+" page "+o+" function"})}catch(e){var s=__virtualDOM__.getOwnerPluginAppId(this);Reporter.thirdErrorReport({source:s,error:e,extend:"at "+this.__route__+" page "+o+" function"})}return Reporter.__route__=Reporter.__method__="",r}var F=Object.assign,W=n(3),U=n(5),V=function(e){if("String"!==A(e))throw j("数据路径错误","Path must be a string"),new L("Path must be a string");for(var t=e.length,n=[],r="",o=0,i=!1,a=!1,s=0;s<t;s++){var c=e[s];if("\\"===c)s+1<t&&("."===e[s+1]||"["===e[s+1]||"]"===e[s+1])?(r+=e[s+1],s++):r+="\\";else if("."===c)r&&(n.push(r),r="");else if("["===c){if(r&&(n.push(r),r=""),0===n.length)throw j("数据路径错误","Path can not start with []: "+e),new L("Path can not start with []: "+e);a=!0,i=!1}else if("]"===c){if(!i)throw j("数据路径错误","Must have number in []: "+e),new L("Must have number in []: "+e);a=!1,n.push(o),o=0}else if(a){if(c<"0"||c>"9")throw j("数据路径错误","Only number 0-9 could inside []: "+e),new L("Only number 0-9 could inside []: "+e);i=!0,o=10*o+c.charCodeAt(0)-48}else r+=c}if(r&&n.push(r),0===n.length)throw j("数据路径错误","Path can not be empty"),new L("Path can not be empty");return n},G=function(e,t){for(var n,r={},o=e,i=0;i<t.length;i++)Number(t[i])===t[i]&&t[i]%1==0?Array.isArray(o)||(r[n]=[],o=r[n]):D(o)||(r[n]={},o=r[n]),n=t[i],r=o,o=o[t[i]];return{obj:r,key:n}},H=function(e,t){for(var n,r,o=V(t),i=e,a=0;a<o.length;a++)Number(o[a])===o[a]&&o[a]%1==0?Array.isArray(i)||(i=[]):D(i)||(i={}),r=o[a],n=i,i=i[o[a]];return{obj:n,key:r}},z=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],q=["__wxWebviewId__","__route__"],Y=["route"],K=__appServiceSDK__.getLogManager(),J=function(){function e(t,n){var r=this;Object(g.default)(this,e);var o={__wxWebviewId__:t,__route__:n};q.forEach((function(e){Object.defineProperty(r,e,{set:function(){x("关键字保护","should not change the protected attribute "+e)},get:function(){return o[e]}})}));var i=__virtualDOM__.addView(t,n),a=exparser.Element.getMethodCaller(i),s=__virtualDOM__.getOwnerPluginAppId(a);this.__wxExparserNode__=i,this.__wxComponentInst__=a,exparser.Element.setMethodCaller(i,this);var c=bn(),u={};hasOwnProperty.call(c,n)?u=c[n]:console.info('Page "'+n+'" has not been registered yet.'),u.data=u.data||{},D(u.data)||j("Page data error","Page.data must be an object");var l=JSON.stringify(u.data);this.data=JSON.parse(l),this.__viewData__=JSON.parse(l),this.__displayReporter=new U.DisplayReporter(n,1);var d=__appServiceSDK__.getSystemInfoSync().deviceOrientation;this.__callPageLifeTime__=function(e){var n,r=(this[e]||k).bind(this);Reporter.__route__=this.__route__,Reporter.__method__=e;for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];"onLoad"===e&&(n=this.__displayReporter).setQuery.apply(n,i);if("onShow"===e)this.__displayReporter.reportShowPage(),Object(U.checkWebviewAlive)(t);else if("onReady"===e)this.__displayReporter.setReadyTime(Date.now());else if("onHide"===e||"onUnload"===e){var s=this.__toRoute__,c=this.__isBack__,u=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,u||this.__displayReporter.reportHidePage(s,c),Object(U.stopCheckWebviewAlive)(t)}else if("onResize"===e){var l=i[0]||{};d!==l.deviceOrientation&&(d=l.deviceOrientation,this.__displayReporter.addOrientationChangeCount())}R(this.__route__+": "+e+" have been invoked"),__appServiceSDK__.traceBeginEvent("LifeCycle","Page."+e);var f=r.apply(this,i);return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",f},z.forEach((function(e){r[e]=function(){var t,n=(u[e]||k).bind(this);try{for(var r=Date.now(),o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=n.apply(this,i);var c=Date.now()-r;c>1e3&&Reporter.slowReport({key:"pageInvoke",cost:c,extend:"at "+this.__route__+" page lifeCycleMethod "+e+" function"}),K&&K.logApiInvoke&&K.log("page "+this.__route__+" "+e+" have been invoked"),__appServiceSDK__.nativeConsole.info("page "+this.__route__+" "+e+" have been invoked")}catch(t){Reporter.thirdErrorReport({source:s,error:t,extend:"at "+this.__route__+" page lifeCycleMethod "+e+" function"})}return t}.bind(r)}));var f=function(e){!function(e){return-1!==q.indexOf(e)}(e)?function(e){for(var t=0;t<z.length;++t)if(z[t]===e)return!0;return"data"===e}(e)||("Function"===A(u[e])?r[e]=function(){var t;Reporter.__route__=this.__route__,Reporter.__method__=e,__appServiceSDK__.traceBeginEvent("User Script","Page."+e);try{for(var n=Date.now(),r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=u[e].apply(this,o);var a=Date.now()-n;a>1e3&&Reporter.slowReport({key:"pageInvoke",cost:a,extend:"at "+this.__route__+" page "+e+" function"})}catch(t){Reporter.thirdErrorReport({source:s,error:t,extend:"at "+this.__route__+" page "+e+" function"})}return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",t}.bind(r):r[e]=v(u[e])):x("关键字保护","Page's "+e+" is write-protected")};for(var p in u)f(p);var h={route:n};Y.forEach((function(e){Object.prototype.hasOwnProperty.call(r,e)||(r[e]=h[e])}));var _="function"==typeof u.onShareAppMessage;_&&__appServiceSDK__.showShareMenu();var b="function"==typeof u.onShareTimeline;_&&b&&__appServiceSDK__.showShareTimelineMenu()}return Object(_.default)(e,[{key:"setData",value:function(e,t){var n=this;try{var r=A(e);if("Object"!==r)return void j("类型错误","setData accepts an Object rather than some "+r);Object.keys(e).forEach((function(t){void 0===e[t]&&j("Page setData warning",'Setting data field "'+t+'" to undefined is invalid.');var r=V(t),o=G(n.data,r),i=o.obj,a=o.key;if(i&&(i[a]=v(e[t])),void 0!==e[t]){var s=G(n.__viewData__,r),c=s.obj,u=s.key;c&&(c[u]=v(e[t]))}})),__appServiceSDK__.traceBeginEvent("Framework","DataEmitter::emit"),this.__wxComponentInst__.setData(JSON.parse(JSON.stringify(e)),t),__appServiceSDK__.traceEndEvent()}catch(e){M(e)}}},{key:"pageScrollTo",value:function(e){__appServiceSDK__.publishPageScrollTo(e,[this.__wxWebviewId__])}}],[{key:"create",value:function(t,n){var r=new e(t,n),o=r.__wxExparserNode__;return delete r.__wxExparserNode__,{page:r,node:o}}},{key:"destroy",value:function(e){__virtualDOM__.removeView(e.__wxWebviewId__)}}]),e}(),X=["onLoad","onReady","onShow","onRouteEnd","onHide","onUnload","onResize"],$=__appServiceSDK__.getLogManager(),Z=function(){function e(){Object(g.default)(this,e)}return Object(_.default)(e,null,[{key:"create",value:function(e,t){var n=__virtualDOM__.addView(e,t),r=exparser.Element.getMethodCaller(n),o=__virtualDOM__.getOwnerPluginAppId(r);if(r.__wxWebviewId__=e,r.__route__=t,r.route=t,r.__displayReporter=new U.DisplayReporter(t,2),n.__customConstructor__===__virtualDOM__.Page){var i=n.getRootBehavior().methods,a=r.__freeData__;for(var s in i)r[s]=i[s].bind(r);for(var c in a)r[c]=v(a[c])}var u=__appServiceSDK__.getSystemInfoSync().deviceOrientation;r.__callPageLifeTime__=function(t){var o,i=this[t]||k;Reporter.__route__=this.__route__,Reporter.__method__=t;for(var a=arguments.length,s=new Array(a>1?a-1:0),c=1;c<a;c++)s[c-1]=arguments[c];"onLoad"===t&&(o=r.__displayReporter).setQuery.apply(o,s);if("onShow"===t)r.__displayReporter.reportShowPage(),Object(U.checkWebviewAlive)(e);else if("onReady"===t)r.__displayReporter.setReadyTime(Date.now());else if("onHide"===t||"onUnload"===t){var l=this.__toRoute__,d=this.__isBack__,f=this.__notReportHide__;delete this.__toRoute__,delete this.__isBack__,delete this.__notReportHide__,f||r.__displayReporter.reportHidePage(l,d),Object(U.stopCheckWebviewAlive)(e)}else if("onResize"===t){var p=s[0]||{};u!==p.deviceOrientation&&(u=p.deviceOrientation,r.__displayReporter.addOrientationChangeCount())}"onShow"===t?n.triggerPageLifeTime("show",s):"onHide"===t?n.triggerPageLifeTime("hide",s):"onResize"===t&&n.triggerPageLifeTime("resize",s),R(this.__route__+": "+t+" have been invoked"),__appServiceSDK__.traceBeginEvent("LifeCycle","Page."+t);var h=i.apply(this,s);return __appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__="",h},X.forEach((function(e){var t=r[e];r[e]=function(){var n,r=t||k;try{for(var i=Date.now(),a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];n=r.apply(this,s);var u=Date.now()-i;u>1e3&&Reporter.slowReport({key:"pageInvoke",cost:u,extend:'at "'+this.__route__+'" page lifeCycleMethod '+e+" function"}),$&&$.logApiInvoke&&$.log("page "+this.__route__+" "+e+" have been invoked"),__appServiceSDK__.nativeConsole.info("component page "+this.__route__+" "+e+" have been invoked")}catch(t){Reporter.thirdErrorReport({source:o,error:t,extend:'at "'+this.__route__+'" page lifeCycleMethod '+e+" function"})}return n}.bind(r)}));var l="function"==typeof r.onShareAppMessage;l&&__appServiceSDK__.showShareMenu();var d="function"==typeof r.onShareTimeline;return l&&d&&__appServiceSDK__.showShareTimelineMenu(),{page:r,node:n}}},{key:"destroy",value:function(e){__virtualDOM__.removeView(e.__wxWebviewId__)}}]),e}(),Q=n(4),ee=null,te=Object.create(null),ne=function(e,t,n){ee&&ee.triggerLifeTime("route",[{method:e,url:t,args:n}])},re=function(e,t,n,r,o,i){if("appLaunch"===i)s=function(){ne("appLaunch",t,{tabBarConfig:__wxConfig.tabBar,entryPagePath:__wxConfig.entryPagePath})},__sclEngine__.initScl((function(e){(ee=e.mainRoot.append("frameset",{placeholderImage:"frameset/placeholder.png"})).setPageLifeTimeCallback((function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];var i=te[e],a=Gt(i);a&&__errorTracer__.surroundThirdByTryCatch((function(){a.__callPageLifeTime__.apply(a,["on"+t].concat(r))}),"at "+t+" callback function")()})),s()}));else if("navigateTo"===i)ne("navigateTo",t);else if("redirectTo"===i)ne("redirectTo",t);else if("switchTab"===i)ne("switchTab",t);else if("reLaunch"===i||"autoReLaunch"===i)ne("reLaunch",t);else if("navigateBack"===i){var a=__sclEngine__.getExparserElementByViewId(o);a&&a.triggerEvent("navigateBack")}else"frameLoad"===i?(te[o]=n,nn(e,t,n,r,{framesetViewId:o})):"frameUnload"===i&&(delete te[o],on(Ht(n),""));var s},oe=function(){ee&&ee.setGlobalShowStatus(!0)},ie=function(){ee&&ee.setGlobalShowStatus(!1)},ae=0,se=1,ce=2,ue=3,le=4,de=5,fe=6,pe=7,he=8,ve=9,ge=10,_e=11,be=12,ye=[],me=!0;function we(e,t){ye[e]=t||Date.now()}function Oe(e,t){void 0===ye[e]&&we(e,t)}var Se=!1;function Ie(e){var t=__appServiceSDK__.isIsolatedSubpackage(e);!Se&&t?De():Se&&!t&&Pe(),Se=t}function Ee(){return!!Se}function Ce(e){return Se=__appServiceSDK__.isIsolatedSubpackage(e)}var Te=[],ke=!0,Ae={};function Pe(e){e=e||Ae,__appServiceSDK__.emitIsloatedAppShow(e),Te.forEach((function(t){t.preventOnShow||t.app.onShow(e),t.preventOnShow=!1})),Ae=e}function De(e){__appServiceSDK__.emitIsloatedAppHide(),Te.forEach((function(t){7===__wxConfig.appType?t.app.onHide(e):t.app.onHide()}))}function je(e){var t=__appServiceSDK__.getLaunchOptionsSync();Oe(ce),e.onLaunch(t.__public),e.onShow(t.__public),Te.push({app:e,preventOnShow:!0})}__appServiceSDK__.onAppUnhang((function(){!1})),__appServiceSDK__.onAppShow((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.isLaunch&&lt("launch"),Lt(e.path),Ce(e.path)||Pe(e.__public||e),lt("foreground"),ke||e.reLaunch)ke=!1;else{var t=zt("");t.length&&(Mt()?oe():"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onShow"),lt("enterPage",t[t.length-1],!0))}})),__appServiceSDK__.onAppHide((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"hang"===e.mode&&!0;var t=zt("");if(t.length){Mt()?ie():"function"==typeof t[t.length-1].__callPageLifeTime__&&t[t.length-1].__callPageLifeTime__("onHide");var n=Ut(),r=n.page;lt("leavePage",r,!0);var o="function"==typeof r.onSaveExitState?B.call(r,"onSaveExitState"):void 0;__appServiceSDK__.saveExitState(n.route,n.rawPath,o)}Ee()||De(e),lt("background")}));var xe,Re,Me,Ne=["onLaunch","onShow","onHide","onUnlaunch"],Le=function(e){for(var t=0;t<Ne.length;++t)if(Ne[t]===e)return!0;return!1},Be=function(e){return"getCurrentPage"===e},Fe=__appServiceSDK__.getLogManager(),We=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(g.default)(this,e),Ne.forEach((function(e){t[e]=function(){var t=n[e]||k;Reporter.__route__="App",Reporter.__method__=e,R("App: "+e+" have been invoked"),__appServiceSDK__.traceBeginEvent("LifeCycle","App."+e);try{for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t.apply(this,o),Fe&&Fe.logApiInvoke&&Fe.log("App "+e+" have been invoked"),__appServiceSDK__.nativeConsole.info("App "+e+" have been invoked")}catch(t){Reporter.thirdErrorReport({error:t,extend:"at App lifeCycleMethod "+e+" function"})}__appServiceSDK__.traceEndEvent(),Reporter.__route__=Reporter.__method__=""}.bind(t)}));var r=function(e){Be(e)?x("关键字保护","App's "+e+" is write-protected"):Le(e)||("function"==typeof n[e]?t[e]=function(){var t;Reporter.__route__="App",Reporter.__method__=e,__appServiceSDK__.traceBeginEvent("User Script","App."+e);try{for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t=n[e].apply(this,o)}catch(t){Reporter.thirdErrorReport({error:t,extend:"at App "+e+" function"})}return __appServiceSDK__.traceEndEvent(),t}.bind(t):t[e]=n[e])};for(var o in n)r(o);"function"==typeof this.onError&&__appServiceSDK__.onError(this.onError),"function"==typeof this.onUnhandledRejection&&__appServiceSDK__.onUnhandledRejection(this.onUnhandledRejection),"function"==typeof this.onPageNotFound&&__appServiceSDK__.onPageNotFound(this.onPageNotFound),"function"==typeof this.onThemeChange&&__appServiceSDK__.onThemeChange(this.onThemeChange),je(this)},Ue={},Ve=N((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(e,Ue),Ue={},xe=new We(e)}),"create app instance"),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.allowDefault?xe||Ue:xe},He=function(){return Re},ze=function(e){Re=e},qe=function(){return Me};__appServiceSDK__.onAppShow((function(e){var t=e.referrerInfo&&e.referrerInfo.privateExtraData;if(t){ze(t);var n=Yt();t.functionalPage&&n&&__appServiceSDK__.publishFunctionalPage(t.functionalPage,[n])}e.referrerInfo&&e.referrerInfo.openapiInvokeData&&(Me=e.referrerInfo.openapiInvokeData)}));var Ye={},Ke={},Je=[],Xe=!1,$e=[],Ze=!1,Qe=!1,et=0,tt=0,nt=0,rt=0,ot=0,it=0,at=null,st=null,ct=function(e,t){Object.keys(e.data||{}).forEach((function(n){var r,o,i=e.data[n],a=t&&t.data||{},s=!1;if("$"!==i.charAt(0)||void 0===(r=function(e){var t=0;switch(e){case"PAGE_TIME":return(t=nt?Date.now()-nt-rt:0)>=0?t:null;case"APP_TIME":return(t=et?Date.now()-et-tt:0)>=0?t:null;case"CURRENT_PAGE":return st||null;case"LAST_PAGE":return at||null;default:return}}(i.substr(1))))if(0!==i.indexOf("$APP")){if(t&&(e.page===t.__route__||"ANY_PAGE"===e.page)){if(0===i.indexOf("$DATASET")){var c=i.replace("$DATASET.","");o=e.dataset||{},(r=G(o,V(c))).obj&&void 0!==r.obj[r.key]&&(Ke[e.eventID].data[n]=r.obj[r.key],s=!0)}if(0===i.indexOf("$COMP")&&"number"==typeof e.nodeId){var u=__virtualDOM__.getNodeById(e.nodeId,e.webviewId);if(!u)return void console.warn('[自定义分析] 找不到自定义组件里的 "'+e.element+'" 节点');var l=exparser.Element.getMethodCaller(u);l&&(i=i.replace("$COMP.",""),a=l.data)}if(i.indexOf("[]")>-1){if((e.index||[]).forEach((function(e){i=i.replace("[]","["+e+"]")})),i.indexOf("[-1]")>-1||i.indexOf("[]")>-1)return void console.warn("[自定义分析] 取不到下标，请检查配置（"+i+"）");var d=i.match(/\[(\d+)\]\.\$INDEX$/);d&&(Ke[e.eventID].data[n]=Number(d[1]),s=!0)}if(void 0===(r=H(a,i)).obj||void 0===r.key||void 0===r.obj[r.key])return void(s||console.warn("[自定义分析] 取不到该字段，请检查配置（"+i+"）"));Ke[e.eventID].data[n]=r.obj[r.key]}}else!function(e,t){var n=e.data[t],r=Ge()||{},o=n.replace("$APP.",""),i=H(r,o);if(i.obj&&void 0!==i.obj[i.key]){var a=i.obj[i.key];"number"!=typeof a&&"string"!=typeof a&&"boolean"!=typeof a||(Ke[e.eventID].data[t]=a)}}(e,n);else null!==r&&(Ke[e.eventID].data[n]=r)}))},ut=function(e,t){if("start"!==e.action&&"start_and_report"!==e.action||(Ke[e.eventID]={eventID:e.eventID,data:{},extra:e.extra}),Ke[e.eventID]){var n,r,o,i=t||Ut()&&Ut().page;ct(e,i),"report"!==e.action&&"start_and_report"!==e.action||(n=e.eventID,r=i&&i.__route__,o=[],Object.keys(Ke[n].data).forEach((function(e){o.push({id:e,value:Ke[n].data[e]})})),Ke[n].data=o,Ke[n].page=r,Ke[n].version=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:0)||0,Ke[n].uid=Date.now().toString(16)+Math.random().toString(16).substr(2),Ke[n].type=0,Object(W.isDevTools)()||(console.info("[自定义分析] 上报成功"),console.info(Ke[n])),__appServiceSDK__.reportRealtimeAction({actionData:JSON.stringify(Ke[n])}),Ke[n]=null)}},lt=function(e,t,n){if("pageReady"===e&&t)!function(e){if(e){var t=e.__route__,n=Ye.click,r=[];n&&(n.forEach((function(e){e.page!==t&&"ANY_PAGE"!==e.page||!e.element||r.push({eventID:e.eventID,page:e.page,element:e.element,action:e.action})})),0!==r.length&&__appServiceSDK__.publishAnalyticsConfig(r,[e.__wxWebviewId__]))}}(t);else if(Qe)Je.push(e);else{if("launch"===e&&!Ze)return et=Date.now(),Ze=!0,Qe=!0,Je.push(e),void __appServiceSDK__.getAppConfig({type:1,complete:N((function(e){Qe=!1,e.data&&(console.info("[自定义分析] 配置拉取成功"),dt(e))}))});if(Xe){n||("enterPage"===e?(nt=Date.now(),rt=0,st=t&&t.__route__):"leavePage"===e?at=t&&t.__route__:"background"===e?ot=Date.now():"foreground"===e&&(it=Date.now(),ot&&it>ot&&(rt+=it-ot,tt+=it-ot)));var r=Ye[e];if(r){if("enterPage"===e&&t&&"page/component/index"===t.__route__&&__wxConfig.accountInfo&&"wxe5f52902cf4de896"===__wxConfig.accountInfo.appId){var o=0;r.map((function(e){return e.eventID})).forEach((function(e){1007===e&&o++})),o>1&&Reporter.reportIDKey({key:"demoConfigRepeat"}),Reporter.reportIDKey({key:"demoEnterHomePage"})}var i=["enterPage","leavePage","pageLoad","pageUnload","pullDownRefresh","switchTab"];r.forEach((function(n){n&&(i.indexOf(e)>-1?(t&&n.page===(t&&t.__route__)||"ANY_PAGE"===n.page)&&ut(n,t):ut(n))}))}}else $e.push([e,t,n])}},dt=function(e,t){var n={};try{n=JSON.parse(e.data)}catch(e){n={}}var r=Ut();Ye=function(e){var t={};return"[object Array]"!==Object.prototype.toString.call(e)||e.forEach((function(e){var n=e.eventTarget;"[object Object]"===Object.prototype.toString.call(n)&&(n=[n]),n.forEach((function(n){var r=n.trigger||"click";t[r]||(t[r]=[]),("click"!==r||/^([.#][a-zA-Z_][^.#]* ?)+$/.test(n.element&&n.element.trim()))&&t[r].push({eventID:e.eventID,page:n.page,element:n.element&&n.element.trim(),data:n.data,action:n.action,extra:e.extra})}))})),t}(n),Ke={},t||(Je.forEach((function(e){lt(e,r&&r.page,!0)})),Je=[]),lt("pageReady",r&&r.page)};__appServiceSDK__.subscribeAnalyticsReport((function(e,t){var n,r,o=e,i=Ye.click;if(i&&("start"===o.action||"start_and_report"===o.action||Ke[o.eventID])){for(var a=zt(""),s=0;s<a.length;s++){var c=a[s];if(c.__wxWebviewId__===t){r=c;break}}if(r){for(var u=0;u<i.length;u++){var l=i[u];if(o.eventID===l.eventID&&(o.page===l.page||"ANY_PAGE"===l.page)&&o.element===l.element){l.dataset=o.dataset||{},n=T({},l);break}}n&&(n.index=o.index,n.nodeId=o.nodeId,n.webviewId=t,ut(n,r))}}})),__appServiceSDK__.onAppConfig(N((function(e){console.info("[自定义分析] 收到最新配置"),1===Number(e.type)&&dt(e,!0)}))),__appServiceSDK__.onAppRouteDone((function(){Xe=!0,$e.forEach((function(e){lt.apply(void 0,y(e))})),$e=[]}));var ft=function(){function e(){Object(g.default)(this,e)}return Object(_.default)(e,null,[{key:"emit",value:function(e,t,n){__appServiceSDK__.invokeWebviewMethod("appDataChange",e,[t],n)}}]),e}();function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ht=Object.prototype.hasOwnProperty,vt=262144,gt=Date.now(),_t=__appServiceSDK__.ShareInfoStorage,bt=__appServiceSDK__._getRealRoute,yt=__appServiceSDK__._triggerBeforeUnloadPage,mt=__appServiceSDK__._triggerBeforeShareAppMessage,wt=__appServiceSDK__.userShareMenuState;delete __appServiceSDK__.ShareInfoStorage;var Ot,St,It,Et=__virtualDOM__.convertComponentAliasToRoute,Ct=__virtualDOM__.convertRouteToComponentAlias,Tt={},kt={},At={},Pt=[],Dt=[],jt="",xt=null,Rt=!1,Mt=function(){return Rt},Nt=function(){return jt},Lt=function(e){jt=e},Bt=function(e,t,n){var r;return n._userTap?__virtualDOM__.wrapTapMark((function(){r=B.call(e,t,n)})):r=B.call(e,t,n),r};__wxConfig.onReady((function(){var e=__wxConfig.page||{},t=__wxConfig.global?__wxConfig.global.window:{};Object.keys(e).forEach((function(n){e[n].window=Object.assign({},t,e[n].window)})),__wxConfig.tabBar&&__wxConfig.tabBar.list&&"object"===Object(o.default)(__wxConfig.tabBar.list)&&"function"==typeof __wxConfig.tabBar.list.forEach&&__wxConfig.tabBar.list.forEach((function(e){Dt.push(e.pagePath)})),__wxConfig.appLaunchInfo&&"string"==typeof __wxConfig.appLaunchInfo.path&&Lt(__wxConfig.appLaunchInfo.path),St=(__wxConfig.appLaunchInfo||{}).scene||0}));var Ft={appLaunchTime:0,appFgTime:0,appRouteTime:0,newPageTime:0,pageReadyTime:0},Wt=function(e,t,n){Reporter.speedReport({key:e,timeMark:{startTime:t,endTime:n}})},Ut=function(){return Ot},Vt=function(){return Ot},Gt=function(e){return ht.call(Tt,e)?Tt[e].page:null},Ht=function(e){return ht.call(Tt,e)?Tt[e]:null},zt=function(e){var t=[];return Pt.forEach((function(n){e&&function(e){if(/^__wx__\//.test(e=e||""))return"//";var t=e.match(/(?:^|\/)__plugin__\/(.*?)\//);return t?t[1]:"/"}(n.route)!==e?t.push(null):t.push(n.page)})),t},qt=function(){return zt("/")},Yt=function(){if(0!==Pt.length)return Pt[Pt.length-1].webviewId},Kt=function(e,t){return e.__wxExparserNodeId__&&ht.call(Object.getPrototypeOf(e),t)||ht.call(e,t)},Jt=function(e){return!!/(?:^|\/)__(wx|plugin)__\//.test(e)||!!("undefined"!=typeof __wxAppCode__&&__wxAppCode__[e+".json"]||{}).usingComponents},Xt=function(e){return!!function(e){for(var t=0;t<__wxConfig.pages.length;t++)if(__wxConfig.pages[t]===e)return!0;return!1}(e)||void 0!==At[e]},$t=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("User Script","Component constructor");var i=!1;(o.__wxRouteBegin||__wxRouteBegin)&&(i=!0),o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=__virtualDOM__.Component(e,t,n,r),s=Et(a);return a&&(kt[s]=exparser.Component._list[a]),At[s]=i,__appServiceSDK__.traceEndEvent(),String(a)},Zt=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("User Script","Page constructor");var i=o.__wxRoute||__wxRoute||r.replace(/\.js$/,"")||"";if(!o.__wxRouteBegin&&!__wxRouteBegin){if(!i)throw j("Page 注册错误",'Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json'),__appServiceSDK__.traceEndEvent(),new L('Please do not call Page constructor in files that not listed in "pages" section of app.json or plugin.json');throw j("Page 注册错误","Please do not register multiple Pages in "+i+".js"),__appServiceSDK__.traceEndEvent(),new L("Please do not register multiple Pages in "+i+".js")}o.__wxRouteBegin?o.__wxRouteBegin=!1:__wxRouteBegin=!1;var a=Ct(i),s=Et(a),c=Jt(s);if("Object"!==A(e))throw j("Page 注册错误","Options is not object: "+JSON.stringify(e)+" in "+i+".js"),__appServiceSDK__.traceEndEvent(),new L("Options is not object: "+JSON.stringify(e)+" in "+i+".js");R("Register: "+a);var u=__virtualDOM__.Page(e,t,n,c&&r?r:__wxRoute+".js");kt[s]=c?exparser.Component._list[u]:e,At[s]=!0,__appServiceSDK__.traceEndEvent()},Qt={isInit:!1};__appServiceSDK__.subscribeSubjectInfo((function(e){Qt.isInit=e.isInit}));var en=N((function(e,t,n,r,o,i){__appServiceSDK__.traceBeginEvent("Framework","publishInitData"),we(_e,n),R("Update view with init data");var a=e.page,s={};s.wechatLibVersion=("undefined"!=typeof __libVersionInfo__?__libVersionInfo__.version:"")||"",s.webviewId=t,s.enablePullUpRefresh=Kt(a,"onReachBottom"),s.enablePageScroll=Kt(a,"onPageScroll"),s.onReachBottomDistance=function(e){try{if("number"==typeof __wxConfig.page[e+".html"].window.onReachBottomDistance)return __wxConfig.page[e+".html"].window.onReachBottomDistance}catch(e){return Q.DEFAULT_ON_REACH_BOTTOM_DISTANCE}return Q.DEFAULT_ON_REACH_BOTTOM_DISTANCE}(a.__route__),s.statesData=r,s.scene=St,s.route=a.__route__,s.query=a.options,s.lastRoute=e.lastRoute,s.lastQuery=e.lastQuery,s.wxConfig={accountInfo:__wxConfig&&__wxConfig.accountInfo||{},appContactInfo:__wxConfig&&__wxConfig.appContactInfo||{},appLaunchInfo:__wxConfig&&__wxConfig.appLaunchInfo||{},plugins:__wxConfig&&__wxConfig.plugins||{}},s.windowConfig=__wxConfig&&__wxConfig.page&&__wxConfig.page[a.__route__+".html"]&&__wxConfig.page[a.__route__+".html"].window||{},s.debug=__wxConfig&&__wxConfig.debug,s.appId=__wxConfig&&__wxConfig.accountInfo&&__wxConfig.accountInfo.appId,s.appLaunchTime=Ft.appLaunchTime,s.appFgTime=Ft.appFgTime,s.isTabBarPage=e.isTabBarPage,s.isMainTabBarPage=e.isMainTabBarPage,s.navigationStyle=__wxConfig&&__wxConfig.global&&__wxConfig.global.window&&__wxConfig.global.window.navigationStyle,s.packageType=function(e){if(__wxConfig&&__wxConfig.subPackages&&__wxConfig.subPackages.length){for(var t=0;t<__wxConfig.subPackages.length;t++){var n=__wxConfig.subPackages[t];if(0===e.indexOf(n.root))return n.independent?"independent":"normal"}return"main"}return"none"}(a.__route__),s.needGetSubjectInfo=!Qt.isInit,s.subPackages=__wxConfig.subPackages,s.perfData=(ye[de]=Date.now(),ye[ae]=me?1:0,ye[pe]=__wxConfig.isSubContext?1:0,ye[se]=__wxConfig.onReadyStart,ye[fe]=__wxConfig.onReadyEnd||0,me=!1,ye),s.isReload=o,s.adInfo={preloadVideoAdUnitIds:__appServiceSDK__.getPreloadVideoAdUnitIds(),preloadAdUnitIds:__appServiceSDK__.getPreloadAdUnitIds()},s.permissionBytes=__appServiceSDK__.getCachePermissionBytes(),s.fontFaceRecords=__appServiceSDK__.fontFaceRecords,s.fontSizeSetting=Object(W.getCachedSystemInfo)().fontSizeSetting,s.prerender=i,s.extendedLibList=__wxConfig.extendedLibList;var c={ext:s,options:{firstRender:!0,timestamp:n,path:a.__route__}};if(r){var u=JSON.stringify(c),l=u.length;if(l>vt){for(var d=[],f=0;l>f;)d.push(u.substr(f,vt)),f+=vt;for(var p=++gt,h=0,v=d.length;h<v;h++)ft.emit({isSplitData:!0,splitInfo:{id:p,index:h+1,total:v,data:d[h]}},t);return lt("pageReady",a),void __appServiceSDK__.traceEndEvent()}}ft.emit(c,t),lt("pageReady",a),__appServiceSDK__.traceEndEvent()})),tn=function(e){return-1!==Dt.indexOf(e.route)||-1!==Dt.indexOf(e.route+".html")},nn=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};__appServiceSDK__.traceBeginEvent("Framework","openNewPage"),we(le);var i=It;It=void 0;var a=Jt(e);Ft.newPageTime=Date.now(),Lt(e);var s=a?Z.create(n,e):J.create(n,e),c=s.page,u=v(r);(Ot={page:c,webviewId:n,route:e,rawPath:t,lastRoute:Ot?Ot.route:"",lastQuery:Ot?Ot.page.options:{},node:s.node}).isTabBarPage=tn(Ot),Ot.isMainTabBarPage=o.isMainTabBarPage||!1,Pt.push(Ot),c.__exitState__=i;var l={};if(Object.keys(u).forEach((function(e){var t=u[e];try{l[e]=decodeURIComponent(t)}catch(n){l[e]=t}})),__virtualDOM__.attachView(n,l),/^__wx__\//.test(e)){var d={};if(/^__wx__\/open-api-redirecting-page/.test(e))d=qe()||{};else if(/^__wx__\/functional-page/.test(e)){var f=He();f&&f.functionalPage&&(d=Object.assign({},f.functionalPage,{accountInfo:__wxConfig.accountInfo}))}c.setData(d)}c.options=u,en(Ot,n,Ft.newPageTime,void 0,!1,o.prerender||!1),Object(W.isDevTools)()&&(__wxAppData[e]=c.data,__wxAppData[e].__webviewId__=n,__appServiceSDK__.publishUpdateAppData()),o.initialRenderingCacheData&&c.setData(o.initialRenderingCacheData);var p=__appServiceSDK__._getOpenerEventChannel();p&&(c.__eventChannel=p),c.__callPageLifeTime__("onLoad",r),c.__callPageLifeTime__("onShow"),Tt[n]={page:c,route:e,rawPath:t,webviewId:n,statesData:null,framesetViewId:o.framesetViewId,node:a?s.node:void 0},lt("pageLoad",c),lt("enterPage",c),Wt("appRoute2newPage",Ft.appRouteTime,Ft.newPageTime),__appServiceSDK__.traceEndEvent()},rn=function(e,t){__appServiceSDK__.traceBeginEvent("Framework","hidePage"),e.page.__toRoute__=t,Mt()||e.page.__callPageLifeTime__("onHide"),lt("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)},on=function(e,t,n,r){__appServiceSDK__.traceBeginEvent("Framework","unloadPage"),yt(e.webviewId),e.page.__toRoute__=t,e.page.__isBack__=n,e.page.__notReportHide__=r,e.page.__callPageLifeTime__("onUnload"),e.node&&Z.destroy(e.page),Object(W.isDevTools)()&&(delete __wxAppData[e.route],__appServiceSDK__.publishUpdateAppData()),delete Tt[e.webviewId];for(var o=Pt.length-1;o>=0&&Pt[o].webviewId!==e.webviewId;o--);o>=0&&Pt.splice(o,1),Pt.length?Lt(Pt[Pt.length-1].route):Lt(""),lt("pageUnload",e.page),lt("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)},an=function(e){__appServiceSDK__.traceBeginEvent("Framework","minimizePage"),rn(e),(Pt=Pt.slice(0,Pt.length-1)).length?Lt(Pt[Pt.length-1].route):Lt(""),__appServiceSDK__.traceEndEvent()},sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];__appServiceSDK__.traceBeginEvent("Framework","onNavigateBack");for(var n=!1,r=Tt[e]&&Tt[e].route,o=Pt.length-1;o>0;o--){var i=Pt[o];if(i.webviewId===e){n=!0,Ot=i;break}var a=!t&&xt&&xt.webviewId===i.webviewId;a?Pt=Pt.slice(0,Pt.length-1):t&&xt&&xt.webviewId===i.webviewId?an(i):on(i,r,!0)}if(1===Pt.length&&!n){var s=Pt[0];if(s.webviewId===e)n=!0,Ot=s;else if(tn(s)&&ht.call(Tt,e)){n=!0;var c=Tt[e],u=c.page,l=c.node;Ot={webviewId:e,route:r,page:u,node:l}}}if(Ie(r),n){Mt()||Ot.page.__callPageLifeTime__("onShow"),lt("enterPage",Ot.page);var d=He();ze({}),d&&d.functionalPage&&e&&__appServiceSDK__.publishFunctionalPage(d.functionalPage,[e])}else j("Page route 错误(system error)","navigateBack with an unexist webviewId "+e);__appServiceSDK__.traceEndEvent()},cn=function(e,t,n,r,o,i,a,s){var c=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+n[e]})).join("&"),u="/"+e+(c?"?"+c:"");__appServiceSDK__.traceBeginEvent("Framework","onAppRoute"),R("On app route: "+e),Ft.appRouteTime=Date.now();var l=a.qualityData;if(l){var d=l.navId,f=l.isWebviewPreload,p=l.isPreloadPageFrame;we(he,d),we(ve,f),we(ge,p),we(be,r)}Rt?re(e,u,t,n,s,r):"navigateTo"===r?o?function(e,t,n,r,o){__appServiceSDK__.traceBeginEvent("Framework","onNavigateToPip"),Ot&&rn(Ot,e),Ie(e),"min"===o?(xt=Pt[Pt.length-1],ht.call(Tt,n)?j("Page route 错误(system error)","navigateTo with an already exist webviewId "+n):nn(e,t,n,r)):"max"===o?xt&&(Lt(e),Ot=xt,Pt.push(Ot),Ot.page.__callPageLifeTime__("onShow"),xt=null):j("Page route 错误(system error)","navigateTo with unexpected pipMode"),__appServiceSDK__.traceEndEvent()}(e,u,t,n,o):function(e,t,n,r,o){__appServiceSDK__.traceBeginEvent("Framework","onNavigateTo"),Ot&&rn(Ot,e),Ie(e),ht.call(Tt,n)?j("Page route 错误(system error)","navigateTo with an already exist webviewId "+n):nn(e,t,n,r,{initialRenderingCacheData:o}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,i):"redirectTo"===r?function(e,t,n,r,o){__appServiceSDK__.traceBeginEvent("Framework","onRedirectTo"),Ot&&on(Ot,e),Ie(e),ht.call(Tt,n)?j("Page route 错误(system error)","redirectTo with an already exist webviewId "+n):nn(e,t,n,r,{initialRenderingCacheData:o}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,i):"navigateBack"===r?o?function(e,t){__appServiceSDK__.traceBeginEvent("Framework","onNavigateBack"),"min"===t?(xt=Pt[Pt.length-1],sn(e,!0)):"max"===t&&(xt=null,sn(e))}(t,o):sn(t):"switchTab"===r?function(e,t,n,r,o){__appServiceSDK__.traceBeginEvent("Framework","onSwitchTab");var i=!0,a=!0;if(0===Pt.length)return nn(e,t,n,r,{initialRenderingCacheData:o}),void __appServiceSDK__.traceEndEvent();for(;Pt.length>1;)xt&&xt.webviewId===Pt[Pt.length-1].webviewId?((Pt=Pt.slice(0,Pt.length-1)).length?Lt(Pt[Pt.length-1].route):Lt(""),i=!1):(on(Pt[Pt.length-1],e),i=!1);if(Pt[0].webviewId===n)Ot=Pt[0],i||Mt()||Ot.page.__callPageLifeTime__("onShow");else if(tn(Pt[0])?(a=!1,i&&rn(Pt[0],e)):xt&&xt.webviewId===Pt[0].webviewId?(Pt=Pt.slice(0,Pt.length-1),Lt("")):on(Pt[0],e),ht.call(Tt,n)){var s=Tt[n],c=s.page,u=s.node;Pt=[Ot={webviewId:n,route:e,page:c,node:u}],Mt()||c.__callPageLifeTime__("onShow"),lt("enterPage",c),lt("switchTab",c)}else Pt=[],nn(e,t,n,r,{isMainTabBarPage:a,initialRenderingCacheData:o});__appServiceSDK__.traceEndEvent()}(e,u,t,n,i):"appLaunch"===r?function(e,t,n,r,o,i){__appServiceSDK__.traceBeginEvent("Framework","onAppLaunch"),Oe(ue),Ft.appLaunchTime=Date.now(),Ft.appFgTime=Date.now(),ht.call(Tt,n)?j("Page route 错误(system error)","appLaunch with an already exist webviewId "+n):nn(e,t,n,r,{isMainTabBarPage:tn({route:e}),initialRenderingCacheData:o,prerender:i}),__appServiceSDK__.traceEndEvent();var a=__appServiceSDK__.getLaunchOptionsSync().scene;[1001,1003,1019,1023,1038,1056,1080,1083,1089,1090,1103,1104,1112,1113,1114,1117,1127,1131,1134].indexOf(a)<0||__appServiceSDK__.loadExitState((function(e,t,n){"latestPage"===e?setTimeout((function(){It=n,__appServiceSDK__.route.redirectTo({url:t})}),0):"homePageAndLatestPage"===e?setTimeout((function(){It=n,__appServiceSDK__.route.navigateTo({url:t})}),0):It=n}))}(e,u,t,n,i,a.prerender):"reLaunch"===r||"autoReLaunch"===r?function(e,t,n,r,o,i,a){__appServiceSDK__.traceBeginEvent("Framework","onReLaunch");var s=!1;for("reLaunch"===o&&(s=!0);Pt.length>0;){var c=!0;s&&(c=!1,s=!1),on(Pt[Pt.length-1],e,!1,c)}Object.keys(Tt).forEach((function(t){on(Tt[t],e,!1,!0)})),Ie(e),nn(e,t,n,r,{isMainTabBarPage:tn({route:e}),initialRenderingCacheData:i,prerender:a}),__appServiceSDK__.traceEndEvent()}(e,u,t,n,r,i,a.prerender):"dismissPip"===r?xt&&function(){__appServiceSDK__.traceBeginEvent("Framework","unloadPagePip");var e=xt;e&&(Pt.findIndex((function(e){return e.webviewId===xt.webviewId}))>=0?xt=null:(yt(e.webviewId),e.page.__callPageLifeTime__("onUnload"),e.node&&Z.destroy(e.page),Object(W.isDevTools)()&&(delete __wxAppData[e.route],__appServiceSDK__.publishUpdateAppData()),delete Tt[e.webviewId],lt("pageUnload",e.page),lt("leavePage",e.page),__appServiceSDK__.traceEndEvent(),__appServiceSDK__.uploadUserLogOnHide(e.route)))}():j("Page route 错误(system error)","Illegal open type: "+r),__appServiceSDK__.traceEndEvent()},un=function(e,t){if(R("On page reload: "+e),ht.call(Tt,t)){var n=Jt(e),r=Tt[t].statesData;Tt[t].statesData=void 0,__virtualDOM__.restoreView(t),en(Tt[t],t,Date.now(),r||{},!0),Object(U.reportWebviewRestore)(t,{pageCount:Pt.length,pageType:n?2:1})}else j("Page reload(system error)","Can not find webviewId "+t)},ln=function(){var e=Pt[Pt.length-1],t=e.route,n=e.webviewId;un(t,n)},dn=function(e,t){var n,r=e,o=Tt[t],i=o.page;if(Kt(i,"onShareAppMessage")&&(n="onShareAppMessage"),n){R("Invoke event "+n+" in page: "+o.route);var a={from:e.fromShareButton?"button":"menu",target:e.target};e.webViewUrl&&(a.webViewUrl=e.webViewUrl);var s=B.call(i,n,a)||{},c=s.promise;delete s.promise,"Promise"!==A(c)&&(c=Promise.resolve(s));var u=new Promise((function(e){return setTimeout(e,3e3,s)}));return Promise.race([u,c]).then((function(t){return r.title=t.title&&"string"==typeof t.title?t.title:e.title,r.desc=t.desc&&"string"==typeof t.desc?t.desc:e.desc,r.path=t.path&&"string"==typeof t.path?Object(W.addHtmlSuffixToUrl)(Et(t.path)):e.path,"string"==typeof t.imageUrl&&(t.imageUrl&&!/^(http|https|wxfile|cloud):\/\//.test(t.imageUrl)?r.imageUrl=bt(t.imageUrl,!1):r.imageUrl=t.imageUrl),r.toCurrentGroup=t.toCurrentGroup,t.cacheKey&&(r.cacheKey=t.cacheKey),t.webpageUrl&&(r.webpageUrl=t.webpageUrl),"wx60422b707e49ff2e"===__wxConfig.accountInfo.appId&&(t.bizSourceName&&(r.bizSourceName=t.bizSourceName),t.bizSourceIconUrl&&(r.bizSourceIconUrl=t.bizSourceIconUrl)),r.path.length>0&&"/"===r.path[0]&&(r.path=r.path.substr(1)),wt.isPrivateMessage?r.disableForward=!0:r.disableForward="boolean"==typeof t.disableForward&&t.disableForward,r.success=t.success,r.cancel=t.cancel,r.fail=t.fail,r.complete=t.complete,lt("share",i),r}))}return Promise.resolve(r)},fn=function(e,t){if(null!=Tt[t]){mt(t);var n=__appServiceSDK__.getInnerEnterOptionsSync(),r=n.chatroomUsername,o=n.scene,i=(e.detail||{}).openType,a=e.origin||"weixin";dn(e,t).then((function(n){var s,c;if(1158===o&&void 0===n.toCurrentGroup&&(n.toCurrentGroup=!0),!0===e.fromShareButton){s="shareAppMessageDirectly";var u=__appServiceSDK__.getShareCookieString();if(u&&(n.messageExtraData=n.messageExtraData||{},n.messageExtraData.cookies=u),c=2,"shareToChatroom"===i&&n.toCurrentGroup){if(1156!==o||!r)return void console.warn("shareToChatroom:fail scene "+o+", chatroomUsername "+r);n.chatroomUsername=r,n.bizType=1,s="shareAppMessageToSpecificContactForFakeNativeDirectly"}}else s="shareAppMessage",n.to=a,c=1;1158===o&&n.toCurrentGroup&&(s="shareAppMessageToSpecificContactDirectly",n.chatroomUsername=r);7===__wxConfig.appType&&"wxfe02ecfe70800f46"!==__wxConfig.accountInfo.appId&&(n.bizType=1,s="shareAppMessageForFakeNative",1156!==o&&1158!==o||!n.toCurrentGroup||(s="shareAppMessageToSpecificContactForFakeNativeDirectly")),n.useDefaultSnapshot=!0,n.webviewId=t,!Object(W.isDevTools)()&&__appServiceSDK__.checkAPIAvailable("share")||(n=F({},n),["success","fail","cancel","complete"].some((function(e){return"function"==typeof n[e]}))&&__appServiceSDK__.reportRecycledAPI({name:s,strategy:1}),"shareToChatroom"!==i&&(delete n.success,delete n.fail,delete n.cancel,delete n.complete));var l=function(){__appServiceSDK__[s](n,{beforeAll:function(e){var t=Ut();try{Object(U.reportShare)(t,e,c)}catch(e){}e.errMsg=e.errMsg.replace(/shareAppMessageDirectly|shareAppMessageToSpecificContactForFakeNativeDirectly|shareAppMessageForFakeNative|shareAppMessageToSpecificContactDirectly/,"shareAppMessage"),__appServiceSDK__.reportShareAppMessage("shareAppMessage",e),void 0!==e.shareInfos&&e.shareInfos.length>0&&(e.shareTickets=e.shareInfos.filter((function(e){return e.shareKey&&e.shareName})).map((function(e){return __appServiceSDK__.showUpdatableMessageSubscribeButton({shareKey:e.shareKey}),_t.set(e.shareKey,e.shareName)}))),delete e.shareInfos}})};return"string"==typeof n.imageUrl?__appServiceSDK__.getCloudFileUrl([n.imageUrl],"image",(function(e){n.imageUrl=e.data[0].url,l()})):l(),null})).catch((function(e){console.warn("onShareAppMessage error ",e)}))}},pn=function(e){__appServiceSDK__.shareTimeline(e,{beforeAll:function(e){__appServiceSDK__.reportShareAppMessage("shareTimeline",e)}})},hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(null!=Tt[t]){var n=Tt[t],r=n.page,o={from:e.fromShareTimeLineButton?"button":"menu",target:e.target},i=Kt(r,"onShareTimeline")&&B.call(r,"onShareTimeline",o)||{},a=i.title,s=i.query,c={title:a||e.title,path:"string"==typeof s?n.route+".html?"+s:n.rawPath.replace(/^\//,"").replace(/(\?|$)/,".html$1")};"string"==typeof i.imageUrl&&i.imageUrl?(/^(http|https|wxfile|cloud):\/\//.test(i.imageUrl)?c.imageUrl=i.imageUrl:c.imageUrl=bt(i.imageUrl,!1),__appServiceSDK__.getCloudFileUrl([c.imageUrl],"image",(function(e){c.imageUrl=e.data[0].url,pn(c)}))):pn(c)}},vn=function(e){if(Tt[e]){var t=Tt[e].page;Kt(t,"onShareTimeline")&&Kt(t,"onShareAppMessage")&&__appServiceSDK__.showShareTimelineMenu()}},gn=null;__appServiceSDK__.onAppRoute(N((function(e){var t=e.path,n=e.webviewId,r=e.viewId,o=e.query||{},i=e.openType,a=e.pipMode,s=e.initialRenderingCacheData;if("appLaunch"===i&&e.frameset&&(Rt=!0),!s&&e.appserviceData)try{s=JSON.parse(e.appserviceData)}catch(e){}gn&&gn(),e.resizing?gn=N((function(){gn=null,cn(t,n,o,i,a,s,e,r)}),"onAppRoute"):cn(t,n,o,i,a,s,e,r)}),"`onAppRoute`")),__appServiceSDK__.onAppRouteResized((function(){gn&&gn()})),__appServiceSDK__.onPageReload(N((function(e){var t=e.path,n=e.webviewId;un(t,n)}),"onPageReload")),__appServiceSDK__.onWebviewEvent(N((function(e){__appServiceSDK__.traceBeginEvent("Framework","onWebviewEvent");var t=e.webviewId,n=e.eventName,r=e.data,o=function(e,t,n,r){if(ht.call(Tt,e)){var o=Tt[e],i=o.page;if(n===Q.DOM_READY_EVENT)return Ft.pageReadyTime=Date.now(),R("Invoke event onReady in page: "+o.route),i.__callPageLifeTime__("onReady"),void Wt("newPage2pageReady",Ft.newPageTime,Ft.pageReadyTime);if(r._requireActive){var a=Pt[Pt.length-1];if(!a||a.webviewId!==e)return}if(r._relatedInfo&&U.DisplayReporter.setEventRelatedInfo(r._relatedInfo),t){var s=__virtualDOM__.getNodeById(t,e);if(!s)return;var c=exparser.Element.getMethodCaller(s);return R("Invoke event "+n+" in component: "+s.is),Kt(c,n)?Bt(c,n,r):void x("事件警告","Do not have "+n+" handler in component: "+s.is+". Please make sure that "+n+" handler has been defined in "+s.is+".")}if(R("Invoke event "+n+" in page: "+o.route),Kt(i,n))return Bt(i,n,r);x("事件警告","Do not have "+n+" handler in current page: "+o.route+". Please make sure that "+n+" handler has been defined in "+o.route+", or "+o.route+" has been added into app.json")}}(t,e.nodeId,n,r);return __appServiceSDK__.traceEndEvent(),o}),"onWebviewEvent")),__appServiceSDK__.onAppEnterForeground((function(e){Ft.appFgTime=Date.now(),0!==e.scene&&"0"!==e.scene&&(St=e.scene)})),__appServiceSDK__.onPullDownRefresh(N((function(e,t){!function(e){if(ht.call(Tt,e)){var t=Tt[e],n=t.page;Kt(n,"onPullDownRefresh")&&(R("Invoke event onPullDownRefresh in page: "+t.route),B.call(n,"onPullDownRefresh"),lt("pullDownRefresh",n))}else x("事件警告","onPullDownRefresh WebviewId: "+e+" not found")}(t)}),"onPullDownRefresh")),__appServiceSDK__.onShareAppMessage(N(fn,"onShareAppMessage"));var _n=function(e,t){if(e=e||{},null!==Tt[t]){var n=Tt[t],r=n.page,o={path:function(e){if(null===Tt[e])return"";var t=Tt[e].page,n=t.options||{},r=Object(W.addHtmlSuffixToUrl)(t.route);return Object.keys(n).length&&(r+="?"+Object.keys(n).map((function(e){return e+"="+n[e]})).join("&")),r}(t),fromButton:!!e.fromButton};if(Kt(r,"onHandoff")){R("Invoke event onHandoff in page: "+n.route);var i=B.call(r,"onHandoff")||{};i.path&&"string"==typeof i.path&&(o.path=Object(W.addHtmlSuffixToUrl)(Et(i.path)))}__appServiceSDK__.startHandoff(o)}};__appServiceSDK__.onAddToFavorites(N((function(e,t){if(null!==Tt[t]){var n=e,r="onAddToFavorites",o=Tt[t],i=o.page;if(Kt(i,r)){R("Invoke event onAddToFavorites in page: "+o.route);var a={webViewUrl:n.webViewUrl},s=B.call(i,r,a)||{};if(s.title&&"string"==typeof s.title&&(n.title=s.title),s.query&&"string"==typeof s.query){var c=n.path.split("?")[0];n.path=c+"?"+s.query}s.imageUrl&&"string"==typeof s.imageUrl&&(/^(https?|wxfile|cloud):\/\//.test(s.imageUrl)?n.imageUrl=s.imageUrl:n.imageUrl=bt(s.imageUrl,!1)),n.disableForward=s.disableForward||!1}__appServiceSDK__.getCloudFileUrl([n.imageUrl],"image",(function(e){n.imageUrl=e.data[0].url,__appServiceSDK__.addToFavorites(n,{})}))}}),"onAddToFavorites")),__appServiceSDK__.onStartHandoff(N(_n,"onStartHandoff")),__appServiceSDK__.subscribeTapHandoffButton((function(e,t){N(_n,"onStartHandoff")({fromButton:!0},t)})),__appServiceSDK__.subscribeTapShareButton((function(e,t){if(ht.call(Tt,t)){var n=Tt[t].page,r=Object(W.addHtmlSuffixToUrl)(n.route);Object.keys(n.options).length>0&&(r+="?"+Object.keys(n.options).map((function(e){return e+"="+n.options[e]})).join("&")),N(fn,"onShareAppMessage")({path:r,title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareButton:!0},t)}else x("事件警告","tapShareButton WebviewId: "+t+" not found")})),__appServiceSDK__.subscribeTapShareTimeLineButton((function(e,t){if(ht.call(Tt,t)){var n=Tt[t].page;Kt(n,"onShareTimeline")&&Kt(n,"onShareAppMessage")?N(hn,"onShareTimeline")({title:"",target:e?e.target:void 0,detail:e?e.detail:void 0,fromShareTimeLineButton:!0},t):x("事件警告","onShareTimeline and onShareAppMessage are both needed")}else x("事件警告","tapShareButton WebviewId: "+t+" not found")})),__appServiceSDK__.onShareTimeline(N(hn,"onShareTimeline")),__appServiceSDK__.subscribeSavePageState(N((function(e,t){ht.call(Tt,t)?Tt[t].statesData=e:x("事件警告","onPageWillManuallyTerminate WebviewId: "+t+" not found")}),"savePageState")),__appServiceSDK__.subscribeRecycleStatistics(N((function(e,t){if(ht.call(Tt,t)){var n=Tt[t];Object(U.reportWebviewRecycle)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({pageCount:Pt.length,pageType:Jt(n.route)?2:1},e))}}),"recycleStatistics")),__appServiceSDK__.onTabItemTap(N((function(e,t){if(__appServiceSDK__._setWxIsInvokeInTapForNavToMiniProgram(),ht.call(Tt,t)){var n=Tt[t],r=n.page;if(void 0!==__wxConfig&&__wxConfig.tabBar&&__wxConfig.tabBar.list&&__wxConfig.tabBar.list[e.index]){var o={index:e.index,pagePath:(__wxConfig.tabBar.list[e.index].pagePath||"").replace(/\.html$/,""),text:__wxConfig.tabBar.list[e.index].text};if(o.pagePath!==n.route)return;Kt(r,"onTabItemTap")&&(R("Invoke event onTabItemTap in page: "+n.route),__virtualDOM__.wrapTapMark((function(){B.call(r,"onTabItemTap",o)})))}}}),"tabItemTap"));var bn=function(){return kt};__appServiceSDK__.onNavigationBarTitleUpdate((function(e){if(e.errMsg.indexOf(":ok")>=0&&e.title){var t=Ut();t&&(t.updateTitle=e.title)}}));var yn=__appServiceSDK__.createPluginWX,mn=__appServiceSDK__.createPluginConsole,wn=function(e,t){var n=e+"/"+t,r={__wxAppCode__:{},__wxAppCurrentFile__:""};r.wx=yn(e,t),r.console=mn(),r.Page=function(e){Zt(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__,r)},r.getCurrentPages=function(){return zt(e)},r.Component=function(e){return $t(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__,r)},r.Behavior=function(e){return __virtualDOM__.Behavior(e,n,r.__wxAppCode__,r.__wxAppCurrentFile__)},r.publishDomainComponents=function(e){return __virtualDOM__.publishDomainComponents(n,e)};var o,i=function(e){var t=[];__wxConfig.plugins&&Object.keys(__wxConfig.plugins).forEach((function(e){var n=__wxConfig.plugins[e];t.push({alias:e,plugin:n,prefix:""})})),__wxConfig.subpackages&&__wxConfig.subpackages.forEach((function(e){e.plugins&&Object.keys(e.plugins).forEach((function(n){var r=e.plugins[n];t.push({alias:n,plugin:r,prefix:e.root})}))}));var n=function(){var n=t.filter((function(t){return t.plugin.provider===e}));if(0===n.length)return null;if(1===n.length){var r=n[0].plugin.subpackage||n[0].prefix;return"__APP__"===r&&(r=""),n[0].prefix=r,n[0]}return n.find((function(e){return""!==e.prefix}))}();if(null===n)return null;if(void 0===n.plugin.export)return null;var r=n.prefix||"";return"/"===r[0]&&(r=r.slice(1)),r&&"/"!==r.slice(-1)&&(r+="/"),r+(n.plugin.export||"")}(e);return r.requireMiniProgram=function(){return void 0===o&&(o=null===i?{}:requireMiniProgramFile(i)),o},r.beforeFactory=function(t){var n=__appServiceSDK__.buildPluginPrivateApi(e);t("__wx__/plugin-private-api",(function(e,t){t.exports=n}))},r};"function"==typeof logxx&&logxx("app-service-engine start");var On=function(e){Zt(e,"/")},Sn=function(e){return Object(U.setForCustomComponent)(e),$t(e,"/")},In=function(e){return Object(U.setForCustomComponent)(e),__virtualDOM__.Behavior(e)}}]),Page=__appServiceEngine__.Page,Component=__appServiceEngine__.Component,Behavior=__appServiceEngine__.Behavior,__webview_engine_version__=.02,__vd_version_info__={delayedGwx:!0},App=__appServiceEngine__.App,getApp=__appServiceEngine__.getApp,getCurrentPages=__appServiceEngine__.getCurrentPages,__pageComponent=null;"undefined"!=typeof __exportGlobal__&&(__exportGlobal__.Page=__appServiceEngine__.Page,__exportGlobal__.Component=__appServiceEngine__.Component,__exportGlobal__.Behavior=__appServiceEngine__.Behavior,__exportGlobal__.__webview_engine_version__=.02,__exportGlobal__.__vd_version_info__={delayedGwx:!0},__exportGlobal__.App=__appServiceEngine__.App,__exportGlobal__.getApp=__appServiceEngine__.getApp,__exportGlobal__.getCurrentPages=__appServiceEngine__.getCurrentPages,__exportGlobal__.__pageComponent=null);var __wxModule__=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}return n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=t.definePlugin=void 0;var r=n(1),o=n(5);t.definePlugin=r.definePlugin,t.requirePlugin=o.requirePlugin},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.definePlugin=t.innerDefineFactory=void 0;var r,o=n(2),i=n(3),a=(r=i)&&r.__esModule?r:{default:r},s=n(4);var c=a.default.plugin;t.innerDefineFactory=function(e){return function(t,n){var r=c[e];if(void 0===r)throw new Error('Sorry, plugin "'+e+'" is not defined.');r[t]={status:o.MODULE_STATUS_UNLOAD,factory:n}}},t.definePlugin=function(e,t){var n=(0,s.parseSchema)(e);if(!n||!n.pluginId||!n.version)throw new Error('schema must match "plugin://{name}/{version}"');var r=(0,s.getModKey)(n),i=function(e){if(void 0===__appServiceEngine__||"function"!=typeof __appServiceEngine__.__createPluginGlobal)throw new Error("Create plugin global failed.");return __appServiceEngine__.__createPluginGlobal(e.pluginId,e.version)}(n);c[r]={status:o.MODULE_STATUS_UNLOAD,factory:t,mods:{},global:i}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MODULE_STATUS_LOADED=2,t.MODULE_STATUS_UNLOAD=1},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={app:{},plugin:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=/^plugin:\/\/([A-Za-z0-9_-]+)[\/]?(.*)/;t.parseSchema=function(e){var t=e.match(n);if(t&&3===t.length)return{pluginId:t[1],version:"0",modId:t[2].length>=1?t[2]:void 0}},t.getModKey=function(e){return e.pluginId+"/"+e.version},t.getModDir=function(e){var t=e.match(/(.*)\/([^\/]+)?$/);return t&&t[1]?t[1]:"./"},t.checkWxConfig=function(){if(void 0===__wxConfig||void 0===__wxConfig.plugins&&void 0===__wxConfig.gamePlugins)throw new Error("This application has not registered any plugins yet.")},t.checkSchema=function(e){if("string"!=typeof e)throw new Error("requirePlugin args must be a string.")},t.getSchemaFromConfig=function(e){var t=e.match(/([^\/]*)\/?(.*)/);if(!t||t.length<2)throw new Error('Plugin "'+e+'" has not registered.');var n=t[1],r=t[2],o=(__wxConfig.plugins||__wxConfig.gamePlugins)[n];if(void 0===o)throw new Error('Plugin "'+e+'" has not registered.');return{pluginId:o.provider,version:"0",path:r}},t.isAppId=function(e){return null!==e.match(/^wx[0-9a-f]{16}$/)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.requirePlugin=void 0;var r,o=n(1),i=n(3),a=(r=i)&&r.__esModule?r:{default:r},s=n(2),c=n(4);var u=a.default.plugin,l=function(e){for(var t=[],n=e.split("/"),r=0,o=n.length;r<o;++r){var i=n[r];if(""!=i&&"."!=i)if(".."==i){if(0==t.length){t=null;break}t.pop()}else r+1<o&&".."==n[r+1]?r++:t.push(i)}return t},d=function(e,t){var n=u[e],r=l(t+"/index.js").join("/");return n&&n[r]?r:(r=l(t).join("/"),/\.js$/.test(r)||(r+=".js"),n&&n[r]?r:"")},f=function(e,t){var n=(0,c.getModDir)(t);return function(t){if("string"!=typeof t)throw new Error("require args must be a string.");var r=l(t.startsWith("/")?t:n+"/"+t);if(!r)throw new Error("can't find module : "+t);try{var o=r.join("/");return o=function(e,t,n,r){var o=t,i=u[e];if(/\.js$/.test(o)||(o+=".js"),"string"==typeof o&&i&&i[o])return o;var a=l(n);if(!a)throw new Error("can't find module : "+r);for(var s=t.substring(a.join("/").length),c=void 0;a.length;){var f=a.join("/")+"/miniprogram_npm"+s;if(c=d(e,f))break;a.pop()}return c||(s="/"===s[0]?s:"/"+s,c=d(e,"miniprogram_npm"+s)),c||t}(e,o,n,t),p(e,o)}catch(e){throw e}}},p=function(e,t){!function(e){if("string"!=typeof e)throw new Error("require args must be a string")}(t);var n=u[e];if(void 0===n)throw new Error('Plugin "'+e+'" is not defined.');var r=n[t];if(void 0===r)throw new Error('Plugin module "'+t+'" is not defined.');if(r.status===s.MODULE_STATUS_UNLOAD){r.status=s.MODULE_STATUS_LOADED;var o=void 0,i=r.factory,a={exports:{}};i&&(o=i(f(e,t),a,a.exports)),r.exports=void 0!==a.exports?a.exports:o}return r.exports},h=function(e,t){var n=t.factory,r=t.global,i={exports:{}};if(!n)return i.exports;var a=(0,o.innerDefineFactory)(e),s=function(e){return function(t){return p(e,t)}}(e),c=r.beforeFactory;delete r.beforeFactory;var u=r.afterFactory;delete r.afterFactory,"function"==typeof c&&c.apply(r,[a,s,i]);var l=n(a,s,i,i.exports,r,r.wx,void 0,r.Page,r.Component,r.Behavior,void 0,r.getCurrentPages,void 0,r.requireMiniProgram);return"function"==typeof u&&u.apply(r,[a,s,i]),void 0!==i.exports?i.exports:l};t.requirePlugin=function(e){(0,c.checkWxConfig)(),(0,c.checkSchema)(e);var t=void 0,n=void 0,r=(0,c.parseSchema)(e),o=void 0===r;if(o||(t=(0,c.getModKey)(r),n=u[t]),void 0===n&&(0,c.isAppId)(e)&&(t=(0,c.getModKey)({pluginId:e,version:"0"}),n=u[t]),void 0===n&&(t=(0,c.getModKey)((0,c.getSchemaFromConfig)(e)),n=u[t]),void 0===n)throw new Error('Plugin "'+t+'" is not defined.');return n.status===s.MODULE_STATUS_UNLOAD&&(n.exports=h(t,n),n.status=s.MODULE_STATUS_LOADED),o?"function"==typeof n.exports?n.exports():void 0:n.exports}}]),definePlugin=__wxModule__.definePlugin,requirePlugin=__wxModule__.requirePlugin;!function(e){var t={},n={};define=function(e,n){if(t[e]&&t[e].factory){var r=t[e],o=n.toString();r.factoryString||(r.factoryString=r.factory.toString()),o!==r.factoryString&&(t[e]={status:1,factory:n,factoryString:o})}else t[e]={status:1,factory:n}};var r=function(e){if(e&&__wxConfig.subPackages)for(var t=0,n=__wxConfig.subPackages.length;t<n;t++)if(0===e.indexOf(__wxConfig.subPackages[t].root))return __wxConfig.subPackages[t]},o=function(e){for(var t=[],n=e.split("/"),r=0,o=n.length;r<o;++r){var i=n[r];if(""!=i&&"."!=i)if(".."==i){if(0==t.length){t=null;break}t.pop()}else r+1<o&&".."==n[r+1]?r++:t.push(i)}return t},i=function(e){var n=o(e+"/index.js").join("/");return t[n]?n:(n=o(e).join("/"),/\.js$/.test(n)||(n+=".js"),t[n]?n:"")},a=function(e){var n=function(e){var t=e.match(/(.*)\/([^/]+)?$/);return t&&t[1]?t[1]:"./"}(e);return function(a){if("string"!=typeof a)throw new Error("require args must be a string");var s=o(n+"/"+a);if("/__wx__/private-api"===a&&(s=o(a)),!s)throw new Error("can not find module : "+a);try{var c=s.join("/");c=function(e,n,r){var a=e;if(/\.js$/.test(a)||(a+=".js"),"string"==typeof a&&t[a])return a;var s=o(n);if(!s)throw new Error("can not find module : "+r);for(var c,u=e.substring(s.join("/").length);s.length;){var l=s.join("/")+"/miniprogram_npm"+u;if(c=i(l))break;s.pop()}return c||(u="/"===u[0]?u:"/"+u,c=i(l="miniprogram_npm"+u)),c||e}(c,n,a);var u=function(e){return"functional-pages"===o(e)[0]};if(u(c)!==u(e)&&Reporter.thirdErrorReport({error:new Error('should not require across "functional-pages" folder'),extend:'at require("'+a+'") in '+e}),"devtools"===__wxConfig.platform&&__wxConfig.subPackages){var l=r(c),d=r(e);if(l&&l!==d)throw new Error("should not require "+a+" in "+e+" because they are in diffrent subPackages")}return require(c)}catch(e){throw e}}};require=function(r,o){if(void 0===o&&(o=!0),"string"!=typeof r)throw new Error("require args must be a string");var i=t[r];if(!i){var s=-1===r.indexOf("/")?r+"/index.js":r;/\.js$/.test(s="miniprogram_npm/"+s)||(s+=".js"),i=t[s]}if(r.endsWith(".js")||(r+=".js"),!i){var c="/"+r.substr(0,r.length-3)+".appservice.js",u={__wxRoute:e.__wxRoute,__wxAppCurrentFile__:e.__wxAppCurrentFile__,__wxRouteBegin:e.__wxRouteBegin};__subContextEngine__.loadJsFiles([c]),function(t){e.__wxRoute=t.__wxRoute,e.__wxAppCurrentFile__=t.__wxAppCurrentFile__,e.__wxRouteBegin=t.__wxRouteBegin}(u),i=t[r]}if(!i)throw new Error('module "'+r+'" is not defined');var l={exports:{}},d=i.factory;if(!o||n[r])return delete i.exports,i.status=1,n[r]=!0,d&&d(a(r),l,l.exports),l.exports;if(1===i.status){i.exports=l.exports,i.status=2;var f=void 0;try{d&&(f=d(a(r),l,l.exports))}catch(e){throw i.status=1,e}i.exports=void 0!==l.exports?l.exports:f}return i.exports},requireOnce=function(e){return require(e,!1)},e.__modules__=t}(this);var requireMiniProgramFile=require,defineMiniProgramFile=define;__exportGlobal__.definePlugin=__wxModule__.definePlugin;__exportGlobal__.requirePlugin=__wxModule__.requirePlugin;;__exportGlobal__.wx=wx;if(typeof __passWAServiceGlobal__==='function'){var __WAServiceGlobal__={};__WAServiceGlobal__.__appServiceEngine__=__appServiceEngine__;__WAServiceGlobal__.__appServiceSDK__=__appServiceSDK__;__WAServiceGlobal__.__virtualDOM__=__virtualDOM__;__WAServiceGlobal__.__subContextEngine__=__subContextEngine__;__WAServiceGlobal__.Protect=Protect;__WAServiceGlobal__.__safeway__=__safeway__;__WAServiceGlobal__.exparser=exparser;__WAServiceGlobal__.Reporter=Reporter;__passWAServiceGlobal__(__WAServiceGlobal__);};__subContextEngine__.initSubContext();})(this);var __WASubContextEndTime__ = Date.now();try { Error.stackTraceLimit = __defaultStackLimit__; __defaultStackLimit__ = undefined } catch (e) {};var __WXML_GLOBAL__=__WXML_GLOBAL__||{entrys:{},defines:{},modules:{},ops:[],wxs_nf_init:undefined,total_ops:0};var __vd_version_info__=__vd_version_info__||{};
typeof __wxLibrary.onEnd === 'function' && __wxLibrary.onEnd(); __wxLibrary = undefined;
